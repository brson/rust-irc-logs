[00:01:32] *** Joins: quux00 (Mibbit@344611D4.5777E33B.DBA4CEF6.IP)
[00:01:48] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[00:01:55] <_achin> enum with ToStr
[00:02:07] <_achin> which can be automatically derivied!
[00:02:11] <robhobbes> so how do you use a string iterator?
[00:02:36] <robhobbes> I tried "hello".iter() and it gave a compile error.
[00:02:48] <_achin> you want to iterate through the characters?
[00:02:56] <depp> if you want to write a parser, you can keep around the iterator, and keep calling .next()
[00:02:57] <robhobbes> yeah
[00:03:27] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[00:03:40] <kimundi> for 0.9, .chars() it is
[00:04:53] <FreeFull> Still no rusti
[00:05:08] <eddyb> cmr is fixing that
[00:05:13] <robhobbes> so how do you get the iterator?
[00:05:26] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[00:05:26] *** ChanServ sets mode: +o jdm
[00:05:30] <depp> here I'll paste something
[00:05:37] <eddyb> robhobbes: s.chars()
[00:05:59] <depp> https://gist.github.com/depp/8378663
[00:06:42] <flu-> <3 vim recursive macros so much right now
[00:06:42] <Eridius> depp: replace `while (true)` with `loop`
[00:06:47] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:06:49] <depp> eh
[00:06:51] <Eridius> flu-: ?
[00:06:52] <flu-> take that 650 lines of constants!
[00:06:59] <FreeFull> eddyb: Is it getting upgraded to a newer version of rust, or simply offline for other reasons?
[00:07:05] <Eridius> depp: also I'm not sure why you didn't just use a for loop
[00:07:06] <robhobbes> depp: thanks
[00:07:14] <depp> Eridius: it was a demo
[00:07:20] <flu-> Eridius: 'qqqqq[actually do macro stuff]@qq@q'
[00:07:22] <depp> Eridius: it was to show how iterators work, not how loops work
[00:07:25] <Eridius> depp: of iterating a string, yes. A for loop is the idiomatic way to do that
[00:07:25] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:07:36] <Eridius> flu-: o_OOO
[00:07:38] <depp> Eridius: this is NOT a demo of how to use a for loop
[00:08:00] <robhobbes> wait, so a for loop is the idiomatic way of iterating a string?
[00:08:09] <Eridius> robhobbes: of iterating anything iterable, typically
[00:08:18] <flu-> Eridius: fires the macro until it can't fire anymore (no more lines to move down, no more search matches, etc). Enjoy! 
[00:08:19] <robhobbes> Eridius: care to post a demo?
[00:08:40] <depp> robhobbes: for c in "hello".iter() { ... }
[00:08:49] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[00:08:49] *** Quits: FreeFull (freefull@moz-3BA188BF.as13285.net) (Ping timeout)
[00:08:50] <robhobbes> okay
[00:08:52] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[00:08:57] <eddyb> FreeFull: offline, it's been ~3 months old for some time now
[00:08:58] <Eridius> robhobbes: https://gist.github.com/8378687
[00:09:04] <depp> robhobbes: but that might not be helpful for writing a parser
[00:09:08] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[00:09:32] *** Joins: FreeFull (freefull@moz-E2DAA3E1.as13285.net)
[00:09:43] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[00:10:05] <watt> looks   like uv_fs_event_init is not in the rustlbuv at all.
[00:10:11] <Eridius> flu-: what causes that macro to stop running?
[00:10:22] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:10:30] <depp> robhobbes: What are you trying to parse?
[00:10:48] <watt> is  there a way to extend  rustlibuv with the  file event??
[00:10:51] <robhobbes> I'm just trying to learn rust
[00:11:20] <depp> robhobbes: Best way to learn a language is to use it :-)
[00:11:25] *** Quits: FreeFull (freefull@moz-E2DAA3E1.as13285.net) (Ping timeout)
[00:11:50] <kimundi> depp: Erm, for 0.9 there is no more .iter() on strings
[00:12:10] <robhobbes> depp: yup. It's a bit different of a language
[00:12:13] <depp> kimundi: I thought I was using .chars()
[00:12:24] <Eridius> depp: your one-line example here in teh channel said .iter() ;)
[00:12:29] <depp> oops
[00:12:42] <Eridius> robhobbes: do you have a project you're trying to use to learn rust? that's how I learn languages
[00:12:57] *** Joins: jed (jed@moz-9E36FDA5.lightspeed.stlsmo.sbcglobal.net)
[00:12:58] <robhobbes> Eridius: I was thinking maybe an http parser
[00:13:25] <Eridius> robhobbes: that's kind of non-trivial ;) the "standard" HTTP implementation right now is https://github.com/chris-morgan/rust-http
[00:13:47] <depp> HTTP may be non-trivial but it's not difficult
[00:14:00] *** Quits: Kikohs (Adium@moz-C71DCA8.mts.modulonet.fr) (Quit: Leaving.)
[00:14:03] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[00:14:23] <flu-> Eridius: usually these macros are along the lines of "do something to a line, then go down a line" or "search for something, then manipulate it"
[00:14:40] <flu-> Eridius: once the "go down a line" or "search for something" fails (no more lines, no more search matches), it stops
[00:14:42] <robhobbes> Eridius: has that parser been update to 0.9?
[00:14:43] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[00:14:43] *** ChanServ sets mode: +ao brson brson
[00:15:07] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[00:15:19] *** Joins: mib_bn0vcc (Mibbit@CBB99CCC.5A41082B.84D3F3CC.IP)
[00:15:21] *** Quits: nkoep (nik@moz-4CB0191F.pool.mediaways.net) (Quit: Leaving)
[00:15:31] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[00:15:33] <Eridius> robhobbes: I don't know. You'd have to ask Chris Morgan, who doesn't appear to beh ere right now
[00:15:43] <Eridius> according to Travis CI the last successful build was 18 days ago :/
[00:15:53] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:16:00] <Eridius> but AFAIK rust-http is being used for Servo (or at least, will be) so it certainly _should_ get updated
[00:16:12] <jed> does travisCI only keep up with master, or will it have a specific 0.9 builder?
[00:16:27] <Eridius> looks like it's master, because the most recent build failure is due to a recent master commit
[00:16:28] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:16:40] <jed> hmm alright
[00:17:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:17:42] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[00:18:38] <cmr> it uses http://rust-ci.org
[00:18:50] <cmr> which triggers a new build when the nightly package is updated.
[00:18:51] *** Quits: watt (Mibbit@moz-E97CB210.nycmny.east.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:19:09] *** Quits: robhobbes (Mibbit@moz-2741C540.slkc.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:19:57] *** Joins: mitja (Mibbit@7F52106C.E259A4FB.3E006838.IP)
[00:20:42] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Ping timeout)
[00:21:01] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[00:21:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:21:05] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[00:21:33] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:21:35] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[00:22:28] <bstrie> ...what does "asd".chars() actually return
[00:22:42] <bstrie> is it just codepoints
[00:22:49] <dbaupp> bstrie: CharIterator
[00:22:51] <cmr> CharIterator<'a, char>
[00:22:52] <dbaupp> or something
[00:22:57] <dbaupp> and yeah, codepoints
[00:23:05] <bstrie> then it should be called .codepoints() :P
[00:23:16] <bstrie> we live in a post-char world
[00:23:17] *** Quits: mib_bn0vcc (Mibbit@CBB99CCC.5A41082B.84D3F3CC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:23:23] <dbaupp> we should change `char` to `codepoint` too then
[00:23:36] <depp> :-( people will always get Unicode wrong
[00:23:48] <bstrie> honestly I'm not convinced that the current name of the `char` type works
[00:24:02] <depp> bstrie: what do you mean?
[00:24:17] <strcat> rust's char is a code point
[00:24:18] <bstrie> it's different from C, in that our char is a 32 bits wide
[00:24:56] <depp> bstrie: it's also different from Java and C#, but the same as Haskell and Go
[00:24:58] <_achin> "character" can mean "codepoint" in the right context, right?
[00:25:03] <depp> yes
[00:25:09] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[00:25:10] <strcat> _achin: code points are sort of semantic characters
[00:25:18] <strcat> but an actual glyph can be composed of N code points
[00:25:19] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[00:25:21] <quux00> You could adopt the golang term "rune"
[00:25:22] <strcat> where there's no bound on N
[00:25:27] <bstrie> _achin: that's a misleading line of thought. "character" can mean lots of things in lots of contexts to lots of people. "codepoint" is unambiguous
[00:25:30] <depp> strcat: glyph != character
[00:25:31] <strcat> quux00: rune is a very bad name, it implies glyph
[00:25:33] <_achin> ah, yes.  good points
[00:25:38] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[00:25:46] <strcat> depp: character doesn't mean anything specific
[00:25:59] <depp> strcat: it's contextual
[00:26:14] <strcat> Unicode doesn't abuse the word character that much
[00:26:16] <depp> strcat: just like I know that a string is not a fibber
[00:26:20] <depp> *fiber
[00:26:31] <bstrie> strcat: does unicode actually define what a "character" should be?
[00:26:38] <strcat> bstrie: no
[00:26:41] <depp> bstrie: It has multiple definitions
[00:26:54] <bstrie> depp: don't get me started on how much I hate the name "string" :P
[00:27:13] <depp> I don't want to go down to C# and Java land where the names are too long
[00:27:18] <strcat> Unicode defines code points (as a semantic building block), grapheme clusters and glyphs
[00:27:21] <depp> SequenceOfUnicodeCodePoints
[00:27:42] <kimundi> grapehme_clusters -> grcl :P
[00:27:52] <bstrie> depp: that's a straw man. nobody's advocating for long names, just names that are not ambiguous and misleading
[00:28:01] <bstrie> I mean
[00:28:05] <bstrie> I'm not arguing about "string"
[00:28:07] <strcat> bstrie: what do you want to call it? 'ucs4'? 
[00:28:10] *** Joins: sproing (Mibbit@moz-4014DDC7.ga.at.cox.net)
[00:28:11] <bstrie> that ship sailed in 1979
[00:28:18] <kimundi> let x: &text = "foo" ?
[00:28:18] <strcat> it's really 21-bit
[00:28:22] <strcat> with padding
[00:28:29] <strcat> and a banned range in the middle
[00:28:33] <depp> and at the end
[00:28:37] <strcat> that's the padding
[00:28:38] <sproing> How can you force a user to use a constructor rather than initializing the struct directly?
[00:28:42] * bstrie curious what people even use rust's char type for
[00:28:44] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[00:28:59] <eddyb> sproing: priv fields
[00:29:01] <strcat> bstrie: code points are usually the unit used to build strings
[00:29:02] <kimundi> sproing: making the struct field private, thus inconstructible outside its module
[00:29:20] <strcat> bstrie: for querying strings, they're not really useful at a high level
[00:29:32] <bstrie> could we just.... not have chars?
[00:29:39] <strcat> they are the unit used for the various algorithms though - you look up if a code point is a grapheme cluster break unit
[00:29:41] <cmr> bstrie: let's kill strings while we're at it!
[00:29:48] <depp> bstrie: They're useful for writing parsers
[00:29:54] <bstrie> cmr: nah, doing unicode wrong will just fuck us up for rust 2.0
[00:29:55] <strcat> bstrie: it makes sense to have a type corresponding to a code point
[00:30:05] <strcat> strings are pretty wrong in rust
[00:30:11] <strcat> char isn't (if you ignore the name)
[00:30:12] <bstrie> then let's fix em
[00:30:18] <depp> strcat: why are they wrong?
[00:30:26] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[00:30:52] <strcat> depp: because 99% of the methods take byte or code point index parameters
[00:31:20] <depp> strcat: So?
[00:31:24] <flu-> hrm. I guess I can't use a string as an enum value. Womp womp. 
[00:31:35] <depp> strcat: What would an alternative API look like?
[00:31:52] <dbaupp> strcat: iirc there's only one that takes code-point indices
[00:31:56] <_achin> flu-: if your enum derivies/implements ToStr, you can convert your string to an enum
[00:31:58] <kimundi> flu-: You can write a method for the enum that returns string constants corresponding to the variant though
[00:32:02] <depp> code point indices are definitely wrong
[00:32:15] <depp> except in UTF32
[00:32:17] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[00:32:21] <Eridius> code-point indices have a bad performance issue in utf-8 strings
[00:32:29] <Eridius> byte indices, while potentially unsafe, are the only performant option
[00:32:38] <strcat> Eridius: no they aren't
[00:32:43] <flu-> _achin: the problem is that the API I'm wrapping uses inconsistent capitalization for the strings - I'd like to tidy that up
[00:32:48] <depp> strcat: so what's the alternative?
[00:32:52] <flu-> kimundi: That sounds like a good solution
[00:32:54] <strcat> random access ranges
[00:33:16] <_achin> flu-: gotcha.  you'll have to write your own FromStr impl  (i said ToStr up there, but i meant FromStr)
[00:33:17] <depp> strcat: more details... how do you index it?
[00:33:18] <strcat> instead of making people save byte indexes they got from one method to pass them to another (and dealing with off-by-one issues)
[00:33:18] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[00:33:30] <kimundi> strcat: How does such a range work?
[00:33:31] <strcat> depp: no one is actually indexing strings that way
[00:33:35] <Eridius> strcat: what's the difference between a range and a pair of byte indices?
[00:33:39] <strcat> they're getting back a byte index from somewhere
[00:33:42] <strcat> and passing it somewhere else
[00:34:04] <strcat> Eridius: what's the different between an iterator and a manual index in a loop doing unsafe indexing?
[00:34:05] <sproing> eddyb strcat: Hm. I cannot think of any situations where I'd want public fields and constructor-only initialization, so I guess I am fine with that.
[00:34:21] <strcat> difference*
[00:34:25] <Eridius> strcat: you're speaking as though ranges are somehow magically safe. But surely I can construct unsafe ranges
[00:34:30] <Eridius> just like I can construct unsafe byte indices
[00:34:35] <strcat> no
[00:34:49] <strcat> you can't construct a range pointing outside of a string
[00:34:50] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[00:34:55] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[00:35:08] <kimundi> YOu can also not unsafely index for that matter...
[00:35:12] <Eridius> strcat: even if you make ranges private and only constructable as return values from string querying, I can still take a range from one string and use it on a second
[00:35:23] <eddyb> what if you're using... slices?
[00:35:30] <strcat> kimundi: you can have byte indices pointing to places that aren't the start of a code point though
[00:35:31] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:35:36] *** Quits: TisButMe (Mibbit@moz-5233EFA9.w92-144.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:35:41] <strcat> Eridius: no, you can't.
[00:35:44] <depp> eddyb: you run into problems if you want multiple mutable slices of the same string
[00:35:47] <Eridius> strcat: why not?
[00:35:48] <kimundi> strcat: No? Not with rusts string API
[00:36:05] <strcat> kimundi: yes, you can
[00:36:14] <strcat> having a byte index that's invalid has nothing to do with whether the methods use asserts inside
[00:36:29] <strcat> anyway, if people want to defend rust's joke of a string type, fine
[00:36:40] <depp> strcat: propose a goddamn alternative API
[00:36:42] <kimundi> strcat: well, you can have uints with such value that's true
[00:36:59] <Eridius> strcat: as near as I can tell you're declaring that there's some magical range type that makes string indexing 100% safe while being as fast as byte indices, without giving even a shred of evidence as to why
[00:37:00] <bstrie> depp and strcat, calm down please
[00:37:04] <Eridius> strcat: magical thinking does not a valid API make
[00:37:10] <depp> strcat: you want to see a good API here's an example: http://hackage.haskell.org/package/text-1.1.0.0/docs/Data-Text.html
[00:37:16] <strcat> Eridius: that's not "magical thinking"
[00:37:25] <strcat> show me how you make a VecIterator pointing outside of a vector
[00:37:29] <Eridius> strcat: it is when you refuse to provide any explanation as to why your magic type works
[00:37:38] <Eridius> strcat: and spurious comparisons to iterators doesn't accomplish anything
[00:37:44] <kimundi> strcat: It's more that you tend to talk the current situation worse than it is...
[00:37:44] <cmr> ranges *are* iterators.
[00:37:48] <strcat> they are not spurious comparisons
[00:38:03] <eddyb> Eridius: an iterator contains a reference to the vector, you can't use an iterator on another vector, that's the logic
[00:38:17] <bstrie> Eridius: please calm down as well. no point in getting jimmies rustled over the string api for a programming language
[00:38:22] <Eridius> eddyb: you also can't mutate the string while the iterator exists, which is an unacceptable limitation for indexing
[00:38:28] <strcat> kimundi: the current situation is pretty bad...
[00:38:36] <depp> Eridius has it on the head
[00:38:53] <kimundi> strcat: So say what needs to change, instead of what is wrong :P
[00:39:14] <strcat> Eridius: because strings can't be mutated without changing the size
[00:39:21] <strcat> it would invalidate your byte indices too
[00:39:21] <Eridius> strcat: that's blatantly wrong
[00:39:37] <strcat> so how do you mutate a rust string without changing the size?
[00:39:51] <eddyb> (hint: you can't)
[00:39:52] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[00:39:54] <strcat> there's no such thing as &mut str or a mutable string iterator or string[i] = 'c'
[00:39:59] *** Parts: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) ()
[00:40:01] <Eridius> not only are indexes not references, and therefore unaffected by the string being reallocated, but it's technically possible to replace characters in a string without resizing it (I don't recall offhand if there's a safe way to do this with rust strings)
[00:40:23] <Eridius> strcat: but the fact remains that e.g. foo.push_str("test") will not invalidate any existing byte indices
[00:40:25] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[00:40:35] <strcat> it's not possible to replace an arbitrary character in the string with another without changing the size
[00:40:40] <strcat> Eridius: sure... pushing to the end won't
[00:40:42] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[00:40:59] <strcat> you can append to a range
[00:41:02] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[00:41:29] <dbaupp> Eridius: (rust doesn't provide a safe way to swap in equal UTF8-length characters.)
[00:41:38] <Eridius> strcat: I have no idea what "you can append to a range" means
[00:41:41] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[00:41:50] <strcat> it sucks having ForwardRange and BidirectionalRange without the random-access functionality
[00:42:06] <Eridius> dbaupp: ok that's what I figured. But appending is definitely safe, and truncation can also be safe if your byte indices don't go past the truncation limit
[00:42:13] <depp> strcat: could you clarify what you mean by random-access?
[00:42:18] <strcat> strings would probably be a good fit for output ranges
[00:43:10] *** Joins: kzzch (kzzch@moz-BB97B490.washdc.fios.verizon.net)
[00:43:37] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[00:43:52] <Tobba> ugh, I still cant get this to work
[00:43:54] <Tobba> http://pastebin.com/hE25cn7Q
[00:43:56] * eddyb can imagine Rc<RefCell<~str>> allowing some fancy tricks
[00:43:58] <Tobba> maybe I'm just overcomplicating this
[00:44:10] <bstrie> strcat: if you're up for it, I'd be interested in reading a mailing list post on how our string API could be improved
[00:44:22] <eddyb> or just multiple borrowed references to that RefCell
[00:44:43] <Eridius> strcat: I feel like when you refer to "range" you're referring to something specific that you haven't explained, that doesn't match what I, and I assume others, are assuming
[00:44:45] <eddyb> Tobba: 8 space tabs - definitely overcomplicating :P
[00:44:55] <Tobba> eddyb: thats just pastebin
[00:44:58] <Tobba> I use tabs, not spaces
[00:45:10] <depp> official Rust style is 4 spaces
[00:45:15] <Tobba> spaces suck
[00:45:23] <depp> so do I, but I live with it
[00:45:27] <eddyb> but they're portable
[00:45:35] <cmr> eugh please don't tabs vs spaces.
[00:45:45] <cmr> literally anything else would be more productive
[00:45:51] <cmr> let's talk about justin beiber instead
[00:45:53] <eddyb> cmr: emacs vs vi?
[00:46:22] <eddyb> (and any decent editor allows you to easily control indentation with spaces just as with tabs, so that's not an excuse)
[00:46:43] *** Joins: FliPPeh (lukas@moz-DE237B6E.dip0.t-ipconnect.de)
[00:46:47] <sproing> If I make a graph, say using Rc, my graph must be immutable, correct?
[00:47:04] <strcat> sproing: no, can use non-Freeze types like RefCell to add mutability
[00:47:47] <eddyb> sproing: you can have Rc<RefCell<T>> with a Freeze T
[00:48:07] <FliPPeh> I'm a bit confused, in many examples in the tutorials, I see functions declared that take references like "&int" and modify the value. But shouldn't that be forbidden since it's an immutable reference?
[00:48:19] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:48:22] <eddyb> FliPPeh: do they modify the value or the reference?
[00:48:22] <cmr> FliPPeh: which example?
[00:48:30] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[00:48:53] <FliPPeh> Let me try and find it again..
[00:49:13] <eddyb> fn foo(mut x: &int) {...} can't modify the pointed-to int but it can do x = &some_local_int;
[00:49:40] <FliPPeh> Shouldn't it be "x: &mut int"?
[00:49:44] <cmr> no
[00:50:02] <FliPPeh> Rust's syntax is so confusing in some cases
[00:50:03] <cmr> The ability to create a new variable named x has nothing to do with the mutability of the pointer.
[00:50:10] <eddyb> FliPPeh: the two are completely different
[00:50:33] <sproing> strcat eddyb: So the immutability of Rc is enforced at the library-level not the language? Using unsafe code?
[00:50:36] <_achin> "mut x: &int" means that x can be changed to reference other ints, but the int that x references is immutable"
[00:50:48] <cmr> sproing: no, it is immutable.
[00:50:58] <strcat> sproing: Rc is a library feature, I don't know what you mean by the immutability is enforced there
[00:50:59] <cmr> sproing: *escaping* that immutability is what requires unsafe code.
[00:51:19] <strcat> sproing: Rc is immutable in the same sense as an immutable variable is immutable
[00:51:24] <strcat> types that are Freeze inherit mutability
[00:51:34] <strcat> types that aren't Freeze may break the mutability rules and implement safety another way
[00:51:49] <FliPPeh> So "mut x: &int" is like C++'s "int& const" while "x: &mut int" is "int const&"?
[00:52:01] <strcat> FliPPeh: not really like const
[00:52:08] <eddyb> Cell is get/set (for Pod types) and RefCell enforces &T/&mut T rules dynamically
[00:52:35] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: Leaving...)
[00:52:40] <eddyb> FliPPeh: you can't really compare Rust references to C++
[00:52:55] <FliPPeh> I know, but in some light that's the resemblance?
[00:52:57] <eddyb> FliPPeh: since C++ doesn't allow you to change the reference (AFAIK), while Rust does
[00:53:04] <FliPPeh> In terms of what is being made mutable
[00:53:07] <sproing> strcat: I'm not quite sure I understand. So, mutability is inherited only to Freeze members? Or, can non-Freeze members contain unsafe code and Freeze cannot?
[00:53:22] <flu-> I really like using closures as a want to provide automatic (and custom) resource cleanup, but it seems with the new Send semantics, that's no longer a good fit. "do Foo::GetSuperComplexObject |obj| { obj.do_the_thing(); }" is a really great way to keep all of the setup and teardown hidden from API users. Is there a better way to achieve this now?
[00:53:25] <strcat> sproing: types that are Freeze must respect the language's mutability rules
[00:53:41] <eddyb> FliPPeh: "mut x" is a pattern which makes the "x" binding mutable, nothing visible from outside
[00:53:52] <strcat> types that aren't Freeze (like RefCell) are marked as non-Freeze because they don't follow those rules
[00:54:01] <kimundi> flu-: Still possible, just not with the do sugar
[00:54:09] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:54:12] <FliPPeh> Okay, so recap: "mut x : &int" is a reference to an int that can be changed to point to another int, while "x: &mut int" is a reference that always point to the same int but that int can be changed
[00:54:16] <FliPPeh> Right?
[00:54:21] <kimundi> flu-: But, actually you probably want some RAII sheme
[00:54:23] <eddyb> FliPPeh: yupp
[00:54:27] <flu-> kimundi: procs then? or still closures, but just used differently?
[00:54:27] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[00:54:34] <sproing> strcat: Can you have unsafe code that violates the inherited immutability in a Freeze?
[00:54:35] <FliPPeh> eddyb: Alrighty, thanks :)
[00:54:52] <strcat> sproing: not correct unsafe code
[00:54:53] <FliPPeh> Guess I'll look into building something with Rust to get accustomed
[00:54:53] <cmr> flu-: used differently. Foo::Get(|obj| { ... })
[00:55:02] <kimundi> flu-: do uses prorcs, I assume your code works with closures
[00:55:04] <strcat> it would have 'undefined behaviour' just like breaking the rules in C
[00:55:27] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[00:55:39] <flu-> I just migrated from 0.6 to 0.9 a couple of days ago - I did actually change those methods to use procs now that I think on it
[00:55:48] <eddyb> FliPPeh: but on the left side of "x" is a pattern, so you can use "&mut x: &int" to take a reference, but "unpack" it immediately and put it in a mutable local
[00:55:49] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[00:55:55] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:56:08] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Leaving...)
[00:56:16] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[00:56:22] <sproing> strcat: cmr says that with rc package immutability is escaped by using unsafe code, not by Freeze. I'm confuzzled.
[00:56:24] <flu-> so what I just said regarding closures was actually about procs. Disregard - back to the docs! :-)
[00:56:26] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[00:56:28] <kimundi> eddyb: Ehm, there is either a mut to much or to few :P
[00:56:29] *** Joins: robhobbes (Mibbit@moz-2741C540.slkc.qwest.net)
[00:56:46] <eddyb> kimundi: nope :)
[00:56:53] <strcat> sproing: Freeze is a trait
[00:57:04] <strcat> sproing: if a type is Freeze, it has inherited mutability (or is immutable)
[00:57:05] <cmr> sproing: no, types you store in Rc will.
[00:57:10] <cmr> RefCell etc
[00:57:12] <eddyb> kimundi: let &mut x = &1; == let mut x = 1;
[00:57:29] <strcat> sproing: anyway I'm not sure you're getting the right picture of what that means
[00:57:41] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[00:57:42] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[00:57:54] <kimundi> eddyb: ... ouch. That's a ccornercase I didn't know yet :P
[00:57:59] <strcat> if a type satisfies a trait, it means that type satisfies the requirements of that trait
[00:58:13] <robhobbes> What's the best way to do a map / associative array?
[00:58:20] <strcat> not satisfying the trait doesn't give the type any capabilities it didn't have before
[00:58:24] <eddyb> kimundi: the &mut T trait corresponds to the ref mut x pattern
[00:58:26] <kimundi> (Now it makes sense why we use & both for &T and &mut T destructuring)
[00:58:26] <eddyb> s/trait/type
[00:58:30] <strcat> robhobbes: as in where is it in the stdlib?
[00:58:36] <sproing> strcat: So, a Freeze type can contain non-Freeze members?
[00:58:44] <strcat> robhobbes: there is std::hashmap for unordered sets/maps and treemap for ordered ones
[00:58:44] *** Quits: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za) (Ping timeout)
[00:58:45] <robhobbes> strcat: is it in the stdlib?
[00:58:56] <robhobbes> strcat: cool
[00:58:58] <strcat> robhobbes: yes, there's a hash table, trie and rbtree
[00:59:03] <strcat> map/set version of each
[00:59:11] <robhobbes> strcat: thanks
[00:59:17] <eddyb> sproing: no. Rc can contain Freeze or RefCell<T> with T: Freeze
[00:59:42] <strcat> sproing: Freeze tells you something about a type
[00:59:48] <eddyb> sproing: RefCell isn't Freeze, but there's a special function to construct an Rc from the latter option (which is safe)
[00:59:49] <strcat> it's a property of a type
[00:59:56] <strcat> if a type has inherited mutability or is immutable, it is Freeze
[01:00:02] <strcat> if it isn't, it is non-Freeze
[01:00:12] <strcat> RefCell is non-Freeze, and so is anything containing a RefCell
[01:00:21] <sproing> eddyb strcat: is non-Freeze
[01:00:24] <sproing> ok
[01:00:47] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[01:01:36] <eddyb> Rc::new used to be guarded, actually
[01:01:52] <sproing> strcat: I was just confused because the tutorial says "With shared ownership, mutability cannot be inherited so the boxes are always immutable." about Rc
[01:01:58] *** Joins: magg (magg@1600179A.409429FF.3D0AE249.IP)
[01:02:03] <wycats_> has there been any thought given to allowing elided types for ignored arguments?
[01:02:25] <strcat> sproing: yes, they are immutable
[01:02:32] <strcat> in the same way that an immutable variable is immutable
[01:02:40] <eddyb> sproing: ignore my comment about Rc being guarded to contain Freeze, I forgot that was changed
[01:02:47] *** Quits: robhobbes (Mibbit@moz-2741C540.slkc.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:02:51] <strcat> RefCell inside an immutable variable or behind an immutable reference isn't different than RefCell in Rc
[01:03:45] <strcat> wycats_: ?
[01:03:52] <sproing> strcat: So immutable does not mean Freeze
[01:04:06] <eddyb> wycats_: you can make them generic
[01:04:11] <eddyb> wycats_: or ()
[01:04:13] <strcat> sproing: they're different concepts
[01:04:15] <wycats_> _: T?
[01:04:19] <eddyb> (though no, you want generic)
[01:04:22] <wycats_> eddyb: I don't want them to be generic
[01:04:26] <wycats_> I want them to be ignored
[01:04:26] <bstrie> wycats_: you mean the default type parameter proposal?
[01:04:29] <wycats_> bstrie: nah
[01:04:30] <strcat> sproing: immutable means not mutable, Freeze is a trait describing whether a type follows the language's mutability system
[01:04:37] <wycats_> fn(foo: ~str, _)
[01:04:44] <eddyb> wycats_: they have to be generic to allow calling with any type
[01:04:48] <wycats_> vs. fn(foo: ~str, _: &ResponseWriter)
[01:04:56] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Quit: Konversation terminated!)
[01:04:59] <wycats_> I don't want them to be allowed to be called with any type
[01:05:09] <wycats_> I guess I do?
[01:05:12] <eddyb> :)
[01:05:14] <strcat> wycats_: how can you leave it off then?
[01:05:23] <sproing> strcat: Ok lol I didn't know you could violate the immutability system
[01:05:39] <wycats_> I'm going to be passing the fn as a param to a function that knows the type
[01:05:44] <wycats_> so the type can be inferred
[01:05:59] <strcat> wycats_: rust doesn't do global type inference though
[01:06:05] <eddyb> sproing: that's the point of Cell/RefCell
[01:06:08] <wycats_> this isn't global type inference
[01:06:08] <strcat> as an explicit choice
[01:06:09] <wycats_> https://gist.github.com/wycats/efa39d984e6297f6314d
[01:06:12] <wycats_> it's purely local
[01:06:19] <wycats_> oh fuck I need ""
[01:06:20] <sproing> strcat: Why isn't the mutability system just implemented in the library
[01:06:22] *** Quits: jed (jed@moz-9E36FDA5.lightspeed.stlsmo.sbcglobal.net) (Quit: Lost terminal)
[01:06:31] <strcat> sproing: it can't be
[01:06:34] <eddyb> sproing: because the borrow checking is very complicated
[01:06:38] <wycats_> https://gist.github.com/wycats/efa39d984e6297f6314d
[01:06:42] <eddyb> you can't express all the rules in the library
[01:06:46] <wycats_> In this case router.add knows the type
[01:06:50] <eddyb> s/checking/checker
[01:06:57] <wycats_> so the type in fn hello could be locally inferred
[01:07:06] *** Quits: heftig (heftig@moz-3C2728A9.dip0.t-ipconnect.de) (Ping timeout)
[01:07:09] <strcat> sproing: anyway it would be too painful if you need library type annotations any time you needed mutability
[01:07:12] <wycats_> no different from map = HashMap::new(); map.insert(~"foo", ~"bar")
[01:07:20] <sproing> Can a type be Freeze but still contain unsafe code that violates Freeze?
[01:07:33] <bstrie> wycats_: so you're asking for a way to leave off the `_: &Request` bit?
[01:07:37] <wycats_> I want _
[01:07:42] <wycats_> instead of _: &Request
[01:07:54] <strcat> sproing: unsafe code is responsible for being correct, if it's not correct it's undefined behaviour and not valid Rust - it works the same way as C
[01:07:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:08:21] <strcat> if a type is Freeze, and you
[01:08:26] <strcat> you're talking about valid Rust
[01:08:37] <strcat> then it is either immutable or inherits mutability
[01:08:38] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[01:09:21] <wycats_> I'm not looking for arity overloading
[01:09:28] <wycats_> just a way to let the inferencer fill in the type
[01:09:37] <wycats_> since it's unnecessary for the person writing the code to know or care
[01:09:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:09:50] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:10:00] <strcat> wycats_: rust considers functions and statics to be global
[01:10:06] <strcat> and doesn't infer types for them
[01:10:16] <wycats_> that's obviously the case today
[01:10:25] <wycats_> I'm asking if anyone has considered changing that
[01:10:29] <bstrie> wycats_: what if you use a closure instead of a fn? i.e. `let hello = |response, _| { ... }`
[01:10:33] <eddyb> it's a design point :)
[01:10:36] <wycats_> I can't use a closure
[01:10:42] <wycats_> because you can't be generic over closures
[01:10:48] <wycats_> see Rust bug yadda yadda
[01:10:51] *** Joins: heftig (heftig@moz-36A81853.dip0.t-ipconnect.de)
[01:10:54] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[01:10:54] <wycats_> I would *LOVE* to use a closure here
[01:10:55] <eddyb> which Rust bug?
[01:11:13] <bstrie> wycats_: yeah, I'm not sure what you mean by not being able to be generic over closures
[01:11:14] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:11:20] <strcat> wycats_: I don't know, I don't think the current rules make sense
[01:11:26] <strcat> but I don't know if they can realistically be changed
[01:11:46] <wycats_> struct Foo { bar: Router<'a ||> } <= nope
[01:11:48] <eddyb> wycats_: we want to allow returning an anonymous type *without* breaking the "no global inference" rule (and it's possible), so don't expect it to change
[01:11:59] <eddyb> wycats_: struct Foo<'a>
[01:12:02] <strcat> there are bigger fish to fry since what exists now is valid and the restrictions can be relaxed in the future
[01:12:07] <strcat> would involve rewriting a lot of librustc
[01:12:07] <wycats_> no 
[01:12:08] <wycats_> https://github.com/mozilla/rust/issues/11211
[01:12:10] <wycats_> there's a bug
[01:12:13] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[01:12:23] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[01:12:24] <wycats_> "This & #11209 means that it is impossible to store closures inside another generic type e.g. an Option< closure >"
[01:12:32] <wycats_> it's really constraining my design :(
[01:12:54] <eddyb> pretty sure <'a> isn't valid syntax
[01:13:00] *** Quits: magg (magg@1600179A.409429FF.3D0AE249.IP) (Quit: magg)
[01:13:02] <sproing> strcat: So, something can be Freeze, but have only private members and no mutating methods, so that it is essentially immutable even if its owner is mutable?
[01:13:15] <sproing> ^^^ Like Rc?
[01:13:18] <strcat> sproing: yes, exactly
[01:13:30] <strcat> sproing: that's how an immutable type is done in rust
[01:13:32] <wycats_> eddyb: there is no possible syntax that will allow you to store a closure inside a generic in a struct
[01:13:35] <wycats_> period
[01:13:41] <strcat> sproing: at a type system level, inherited mutability is the only way
[01:13:43] <wycats_> there's a bunch of open issues
[01:13:58] <eddyb> wycats_: how about Option<('a||)>?
[01:14:05] <wycats_> I'll try it
[01:14:13] <strcat> sproing: but you can either implement immutability via privacy or opt out of the system with #[no_freeze] and use unsafe code to implement an alternate way of providing safe mutability
[01:14:16] <eddyb> this is pretty much a parser issue, really
[01:14:22] <bstrie> wycats_: because it's impossible to just vote on issues on github, I recommend you leave a comment on those bugs voicing your displeasure
[01:15:05] <strcat> in my experience bug trackers with voting support are equivalent to ones without it for the devs
[01:15:08] <sproing> strcat: Interesting way of doing things
[01:15:12] <strcat> only users think voting does anything
[01:15:21] <strcat> it's sort of a frustration outlet
[01:15:22] <eddyb> there are still some finichy things in the parser, I could fix them, but I already have something to work on
[01:15:49] <eddyb> strcat: it would work if you sort by votes when you look at the issue list
[01:15:54] <flu-> is there something like clone that can retrieve an immutable copy from a mutable value?
[01:15:59] <strcat> and it decreases the chance someone will write a compelling comment
[01:16:13] <eddyb> flu-: what do you mean? (it terms of types)
[01:16:20] <strcat> eddyb: yeah, we'd actually start closing feature requests if they got popular
[01:16:22] <strcat> ;p
[01:16:24] <flu-> I have a mut *foo and I want a *foo
[01:16:37] <wycats_> eddyb: hm this is an avenue I had not previously explored
[01:16:43] <wycats_> ('a SomeType) is failing
[01:16:46] <strcat> flu-: do you really mean raw pointer?
[01:16:47] <eddyb> flu-: the former is not a type
[01:16:49] <wycats_> I had defined type Handler = ...
[01:16:57] <flu-> eddyb: I assume I can't just 'let bar = foo', as in a shared-state situation that could lead to code expecting an immutable value having that value change underneath it
[01:17:03] <flu-> strcat: yeah, FFI stuffs
[01:17:10] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:17:19] <wycats_> https://www.irccloud.com/pastebin/brvdA5wL
[01:17:20] <wycats_> weird
[01:17:21] <strcat> flu-: if it's a raw pointer you're way outside of where rust can do stuff for you
[01:17:24] <flu-> *mut, not mut*
[01:17:26] <eddyb> wycats_: ('a type) is wrong. 'a || is a closure type
[01:17:36] <strcat> flu-: do you just want to pass an *mut T to a function wanting *T?
[01:17:38] <strcat> flu-: you can cast it
[01:17:42] <wycats_> yeah I had done type Handler = ||
[01:17:42] <strcat> in reality it should coerce
[01:17:45] <flu-> strcat: transmute or as?
[01:17:51] <strcat> flu-: either works, but use as
[01:17:59] <flu-> strcat: awesome!
[01:18:00] <eddyb> wycats_: we don't have HKT. type Handler<'a> = 'a ||;
[01:18:08] <wycats_> HKT?
[01:18:14] <wycats_> ah
[01:18:15] <depp> higher-kinded types
[01:18:18] <strcat> flu-: *T vs. *mut T doesn't *really* have an enforced difference
[01:18:26] <eddyb> wycats_: your Handler would've been generic over the lifetime
[01:18:28] <strcat> flu-: it's up to you to follow the mutability rules for them
[01:18:41] <eddyb> wycats_: with that definition, Option<Handler<'a>> should work
[01:19:21] <flu-> strcat: I see. The mutability semantics are rust-enforced, the foreign code could care less
[01:19:39] <strcat> flu-: yeah, since you're trusted to annotate C APIs properly
[01:19:47] <wycats_> interesting
[01:19:51] <strcat> and fwiw, almost all of the extern blocks in the rust codebase itself do not do it properly
[01:19:59] <wycats_> now I'm hitting issues with non-clonable closures
[01:20:13] <sproing> strcat: 1) A type is not Freeze if it contains a non-Freeze types. 2) You can implement mutability with unsafe code in a Freeze type. <- Just two questions about safety
[01:20:17] <strcat> which has been used as an argument to remove immutable raw pointers completely, although I think they are very useful
[01:20:27] <flu-> strcat: regardless, I'm providing something that is already mutable to a C api that wants const - no harm there :-)
[01:20:33] <strcat> and *my* code uses them properly ;p
[01:20:35] <strcat> flu-: yeah
[01:20:44] <eddyb> sproing: you can do *anything* in unsafe code, it can't be checked
[01:20:53] <sproing> eddyb: mk
[01:20:59] <strcat> sproing: right, if a type has a non-Send or non-Freeze type inside it is not Send/Freeze itself
[01:21:09] <strcat> sproing: you cannot mutate a Freeze type with unsafe code in valid rust
[01:21:16] *** Joins: jhasse (jhass_000@moz-999AD28C.ewe-ip-backbone.de)
[01:21:17] <strcat> you can do anything in unsafe, sure, but it's not correct
[01:21:24] <sproing> strcat: But the compiler can compile invalid Rust? :D
[01:21:35] <strcat> sproing: yes, it can compile invalid unsafe blocks.
[01:21:39] <strcat> sproing: similar to C
[01:21:45] <strcat> C has a concept of 'undefined behaviour'
[01:21:49] <strcat> if your program causes any, it is not C
[01:21:52] <wycats_> rust-http wants servers to be cloneable
[01:22:00] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[01:22:06] <eddyb> Rust has "egrep '\bunsafe\b'"
[01:22:08] <strcat> and the compiler is a C compiler, so it can assume there is no undefined behaviour
[01:22:14] <strcat> and use it for optimization assumptions and so on
[01:22:25] <sproing> strcat: Shouldn't the definition be, that your code is C if the C compiler compiles it?
[01:22:32] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[01:22:32] <strcat> sproing: no
[01:22:34] <depp> sproing: no
[01:22:39] <sproing> *cry*
[01:22:52] <strcat> sproing: the C type system isn't strong enough to express anything close to a language with semantics enforced by a compiler
[01:22:54] <depp> well, maybe it's C code with undefined behavior
[01:23:05] <strcat> depp: the C standard considers that to be not C ;p
[01:23:08] <depp> but code with undefined behavior is not especially useful
[01:23:13] <depp> strcat: citation?
[01:23:26] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[01:23:56] <flu-> longest typename ever - '*std::libc::types::common::c95::c_void' - which, hilariously, is a verbose way of saying "it's untyped, don't worry about it"
[01:24:06] <sproing> strcat: Okay, is there any language that can do as much as Rust can without type-unsafe code?
[01:24:19] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[01:24:28] <_achin> what's the usecase for std::cell ?  when would you need these types?
[01:24:30] <wycats_> what's the type of closure in the docs?
[01:24:39] <wycats_> _achin: in sad situations
[01:24:49] <wycats_> when scoping isn't enough to describe lifetimes
[01:25:03] <eddyb> not really. anything shared
[01:25:35] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Quit: Leaving)
[01:25:46] <sproing> I want to write a language where all the semantics are enforced in the type system :D
[01:26:14] <bvssvni> sproing: that is not possible if you support integers
[01:26:23] <strcat> bvssvni: what do you mean?
[01:26:26] <bvssvni> sproing: Goebel's incompleteness theorem
[01:26:27] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[01:26:30] <depp> sproing: Do you want Agda?
[01:26:31] <_achin> so it's important that the lifetime of the thing returned by borrow() matches the lifetime of the Cell?
[01:26:39] <sproing> depp: ?
[01:27:10] <eddyb> depp: or Idris
[01:27:13] *** kimundi is now known as zz_kimundi
[01:27:14] <depp> AGDA is a language where e.g. to index a vector you need to supply a proof that the vector is long enough
[01:27:25] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[01:27:26] <eddyb> _achin: very
[01:27:41] <depp> sproing: but you can supply the proof at compile-time and get no run-time check
[01:28:10] <sproing> depp: But what about in cases where you need a run-time check? Prove the run-time check will work?
[01:28:17] <depp> sproing: sure
[01:28:25] <strcat> depp: from 3.4.3 onwards in the c11 spec
[01:28:28] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[01:28:44] <strcat> unspecified and implementation defined behaviour are valid, but without specified requirements
[01:28:44] <sproing> Okay I'll go start doing all my programming in Agda now, bye guys!
[01:28:49] <depp> strcat: exactly
[01:28:54] <strcat> undefined behaviour is explicitly erroneous
[01:29:04] <strcat> depp: UB is separate from unspecified
[01:29:11] <steven_is_false> bvssvni: What about 64 bit integers only?
[01:29:26] <strcat> depp: the examples they give are that the order of arguments to a function are unspecified
[01:29:34] <strcat> order of evaluation for arguments*
[01:29:41] <strcat> foo(expr1, expr2)
[01:29:41] <jhasse> hi! Is this correct english for a commit message: "Support linking of rlib files in rustpkg"?
[01:29:50] <strcat> the compiler can evaluate those in any order, it's unspecified
[01:29:52] <strcat> *however*
[01:29:53] <bvssvni> steven_is_false: I believe there is a finite Boolean algebraic expressions to be made about 64 bit integers, so ... maybe?
[01:29:56] <bstrie> jhasse: sounds right to me!
[01:29:58] <depp> strcat: I know what UB is
[01:30:02] <depp> strcat: I have the spec in front of me
[01:30:03] <strcat> signed integer overflow is undefined, rather than unspecified
[01:30:07] <strcat> depp: well what do you mean then?
[01:30:12] <jhasse> bstrie: thx :)
[01:30:17] <depp> strcat: right, but that doesn't mean that a program which invokes UB is invalid
[01:30:50] <steven_is_false> bvssvni: In my opinion a better argument is that the complexity of a computer program rises really really fast (see for example the busy beaver function)
[01:30:53] <depp> strcat: my point is that programs which invoke UB may still be valid C
[01:30:58] <strcat> depp: it doesn't fall under what is standard C
[01:31:03] <strcat> it can fall under an extension of C
[01:31:05] <depp> strcat: yes, it does
[01:31:18] <depp> strcat: UB can be invoked at runtime
[01:31:22] <strcat> depp: ofc
[01:31:29] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[01:31:29] <bvssvni> steven_is_false: it boils down to how one defines semantics :D
[01:31:36] <steven_is_false> Fair enough
[01:31:37] <wycats_> where are the docs for proc?
[01:32:00] <strcat> depp: a program conforming to the standard doesn't invoke UB at runtime, for it to be valid requires an extension of the standard
[01:32:09] <bstrie> wycats_: if you want something cloneable, I don't think you want proc :)
[01:32:18] <wycats_> you sure?
[01:32:22] *** Joins: mohawk (Mibbit@moz-380EB828.dynamic.snap.net.nz)
[01:32:23] <strcat> depp: C doesn't require that a diagnostic is emitted for every erroneous thing
[01:32:30] <wycats_> it seems more likely to be cloneable than closure 
[01:32:43] <depp> #include <stdlib.h> int main(int argc, char **argv) { return strtol(argv[0], 0); }
[01:32:47] *** Joins: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[01:32:48] <depp> it's valid C
[01:32:59] <depp> but if you invoke the program with the wrong command line argument, you get UB
[01:33:08] <bstrie> wycats_: you'd also have to be able to clone everything that's moved into it... which, hey, maybe that's feasible. procs are sufficiently new that I'm unsure of what all they're capable of
[01:33:15] <strcat> depp: sure
[01:33:29] <wycats_> why aren't there docs for closure and proc?
[01:33:31] <sproing> bvssvni: Are you saying I can't have machine types?
[01:33:33] <strcat> I wouldn't necessarily say it is valid C though
[01:33:38] <depp> why not?
[01:33:45] <wycats_> I honestly just want a lightweight syntax for fn
[01:33:49] <depp> does something stop being valid C because it *can* invoke UB?
[01:33:49] <bstrie> wycats_: I dunno, I always blame steveklabnik when I can't find docs for something :P
[01:33:51] <wycats_> fn || 
[01:33:54] <wycats_> bstrie: lolz
[01:34:01] <wycats_> steveklabnik: khaaaaaaan
[01:34:28] <bvssvni> sproing: what I meant is that if you can create arrays, a programmer can build another level of semantics
[01:34:42] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[01:34:55] <strcat> depp: s/valid/standard/
[01:35:15] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Connection reset by peer)
[01:35:25] <wycats_> yeah looks like procs can't be cloned
[01:35:39] <wycats_> it seems like it should work if they don't close over anything
[01:35:54] *** Joins: twi (Adium@moz-79C97725.pa.vic.optusnet.com.au)
[01:35:57] <sproing> bvssvni: So you're saying a completely safe language cannot do everything say Rust could?
[01:36:18] <depp> strcat: so my snippet is not standard C?  bull
[01:36:22] <bvssvni> sproing: yes, the second level of semantics can not be understood by the compiler
[01:36:47] <bvssvni> sproing: Excel formulas are example of a language that is "almost" completely safe
[01:36:51] <bstrie> wycats_: have you tried implementing the Clone trait on the closure type that you need?
[01:36:58] <wycats_> bstrie: I have tried
[01:37:02] <wycats_> lemme try again
[01:37:06] <bstrie> wycats_: I mean implementing it, not deriving it
[01:37:22] *** Quits: kzzch (kzzch@moz-BB97B490.washdc.fios.verizon.net) (Quit: WeeChat 0.4.1)
[01:37:22] <wycats_> yes
[01:37:22] <depp> bvssvni: The problem is that "safety" is defined differently in different contexts and for different languages
[01:37:28] <wycats_> I tried for closures
[01:37:31] <wycats_> will try again for procs
[01:37:43] *** Quits: twi (Adium@moz-79C97725.pa.vic.optusnet.com.au) (Ping timeout)
[01:37:46] <wycats_> it didn't work for closures because Clone's clone(&self) doesn't provide a lifetime param
[01:37:52] <bstrie> hrm
[01:37:52] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[01:37:54] <wycats_> (I consider this to be a huge problem with traits btw)
[01:37:58] <bvssvni> depp: I agree. Safety is defined within a context.
[01:38:01] <wycats_> I hit the same issue with Index
[01:38:22] <bstrie> wycats_: that's very interesting, I wonder if any of the devs are aware of that limitation
[01:38:37] <wycats_> bstrie: I've been talking to Alex about it
[01:38:41] <bstrie> ah good
[01:38:45] <wycats_> it's one of my most frequently hit limitations atm
[01:38:47] <bstrie> then my mind is at ease :)
[01:38:54] <wycats_> acrichto: ^
[01:39:37] *** Joins: twi (Adium@moz-79C97725.pa.vic.optusnet.com.au)
[01:39:45] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[01:40:08] <strcat> depp: if a program relies on implemented defined behaviour to avoid UB, it is hard to say whether you can call that "standard C"
[01:40:10] *** Quits: mohawk (Mibbit@moz-380EB828.dynamic.snap.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[01:40:15] <bvssvni> depp: still when there are system powerful enough to model context, then "safety" does not necessarily apply.
[01:40:23] <depp> strcat: standard C, but non-portable
[01:40:29] <strcat> depp: we probably mean different things by 'standard C', then
[01:40:30] <acrichto> wycats_: can you show me the code for the unimplementable clone? I think there may be a workaround
[01:40:34] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:40:52] *** Joins: biardjd (kzzch@moz-BB97B490.washdc.fios.verizon.net)
[01:41:28] <bstrie> if anyone can do it, acrichto can!
[01:41:35] * bstrie cheerleads
[01:41:41] <sproing> Are any possible changes to Rust in the works that would make any semantics we implement in unsafe code be in safe code instead?
[01:41:43] <depp> strcat: I think my problem is that realistically speaking, no programs are both useful and guaranteed not to invoke UB
[01:41:45] <biardjd> \o/
[01:42:06] <sproing> be possible*
[01:42:13] <wycats_> acrichto: uno momento por favor
[01:42:15] <wycats_> https://www.irccloud.com/pastebin/kLxoqN0f
[01:42:18] <wycats_> what is this saying to me
[01:42:20] <strcat> depp: well I agree that you require lots of implementation defined behaviour and lots of cases of UB that you can't prove to never happen
[01:42:23] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[01:42:34] <strcat> depp: to write a useful program
[01:42:40] <acrichto> wycats_: do only works with proc() not ||
[01:42:55] <wycats_> do router.add("/hello") proc(|...)?
[01:43:01] <wycats_> proc(|...|)?
[01:43:05] <strcat> wycats_: procs can only be run one, probably don't want one
[01:43:11] <wycats_> indeed, unless I could clone it
[01:43:25] <wycats_> I assume that if procs were clonable each clone could be one once
[01:43:26] <wycats_> run*
[01:43:44] <Eridius> wycats_: I believe it's proc(args) { ... }
[01:43:47] <strcat> depp: and it's not like the C standard accounts for everything, like a bit in memory being flipped by a cosmic ray ;p
[01:43:54] <strcat> or spilling coffee on the server
[01:43:59] * strcat shrugs
[01:44:12] <acrichto> wycats_: fn add(s: &str, p: proc())
[01:44:22] <acrichto> do foo.add("wut") |args...| {}
[01:44:28] <wycats_> acrichto: add is generic
[01:44:33] <wycats_> p: T
[01:44:39] <wycats_> and T is a proc type
[01:44:40] <wycats_> https://gist.github.com/wycats/245f015fafadf22f2c5c
[01:44:57] <wycats_> that's the problematic clone
[01:45:12] <acrichto> wycats_: ah I don't think that'll work
[01:45:19] <acrichto> although arguably it should
[01:45:23] <strcat> depp: I guess my view of UB is that it means 'erroneous', but the compiler is not required to stop it at compile-time, and you can extend the language to consider it valid
[01:45:34] <wycats_> acrichto: the issue is that traits have to specify their lifetimes
[01:45:37] <strcat> a compiler could make all pointer arithmetic and so on well-defined in every case via a VM
[01:45:38] <wycats_> I hit this issue constantly
[01:45:44] <strcat> I think they intend for that to be possible
[01:45:47] <wycats_> you might reminder that I hit it with Index like yesterday
[01:45:50] <acrichto> wycats_: that's not true
[01:45:55] <wycats_> acrichto: ewot
[01:45:58] <acrichto> wycats_: in this case you have a lifetime
[01:45:58] <strcat> (i.e. stuff like asan can reach a point where it's exhaustive)
[01:46:03] <acrichto> sometimes you don't, but you have 'a in this one
[01:46:07] <wycats_> acrichto: Clone doesn't specify one
[01:46:16] <acrichto> wycats_: you don't take &'a self, but self == something with 'a
[01:46:18] <wycats_> the issue here is that Clone's defintiion is fn clone(&self)
[01:46:31] <acrichto> try not using &'a self
[01:46:34] <acrichto> just use &self
[01:46:36] <acrichto> it should work
[01:46:38] <wycats_> ok I will try
[01:46:45] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[01:46:45] <wycats_> how is that going to work?
[01:47:05] <acrichto> it knows the type of self
[01:47:08] <acrichto> is something with 'a
[01:47:10] <acrichto> you can "clone" 'a
[01:47:26] <depp> strcat: my view of UB is also that it means 'erroneous', but if the UB is invoked at run-time instead of compile-time, then the story is different
[01:47:54] <strcat> depp: hm, couldn't you say it's always at runtime though?
[01:48:07] <strcat> like lets say you're writing a library
[01:48:10] <depp> strcat: but some programs, when run, only sometimes invoke UB
[01:48:11] <strcat> some code may never be called
[01:48:25] *** Joins: ehsanul (Mibbit@moz-A9E56CFE.hfc.comcastbusiness.net)
[01:48:37] <strcat> depp: yeah
[01:48:47] <bstrie> sproing: are you thinking of any unsafe behavior in particular that you'd like to see made safe somehow?
[01:49:15] <strcat> depp: like lets say you do 'if (argc < 2) return 1; int a[4]; a[4] = 5;' - is it valid?
[01:49:22] <strcat> is it valid without the argc check?
[01:49:30] <wycats_> well that didn't work anyway
[01:49:36] <wycats_> since I can't move the closure out
[01:49:43] <strcat> depp: it's almost a philosophical question ;p
[01:49:58] <acrichto> wycats_: I've been thinking about it and I don't think it's actually that big of a problem
[01:50:01] <depp> strcat: It's a valid program, but the behavior of the program iss undefined when argc >= 2
[01:50:08] <acrichto> wycats_: you can always "impl<'a> Foo for &'a Type
[01:50:16] <acrichto> wycats_: and then you have a lifetime parameter
[01:50:26] <wycats_> acrichto: we should see if that works for my Index problem
[01:50:34] <acrichto> I think it should
[01:50:42] <acrichto> autoref/deref/whatnot shoul dkick in
[01:51:31] <strcat> acrichto: often doesn't work, although I am reading that out of context
[01:51:55] <strcat> like a trait might say
[01:52:05] <strcat> fn foo<'a>(&'a self) -> &'a T
[01:52:05] <sproing> bstrie: No, just curious.
[01:52:15] <Cevn> hello 
[01:52:19] <strcat> so you can't impl this for &'b U
[01:52:40] <strcat> except in a really weird edge case
[01:52:44] <bstrie> sproing: there have been proposals of making `unsafe` finer-grained, such that rather than saying "it's a free-for-all from here on out" you could just turn off a specific safety feature
[01:53:07] <bvssvni> Cevn: o/
[01:53:11] <strcat> would need an effects system of some sort
[01:53:11] *** Quits: Ferreus (ferreus@moz-7966CC5D.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[01:53:26] <strcat> since atm unsafe only does 2 things
[01:53:32] <strcat> 1) can deref raw ptrs
[01:53:37] <strcat> 2) can call unsafe fns
[01:53:40] <Cevn> i'm trying to pick up rust and i'm having a problem.. I have an array of option<f64>'s and i'm trying to map each element to an f64
[01:53:52] <strcat> you'd need to carefully figure out ways of classifying unsafety
[01:53:53] <strcat> and tbh
[01:53:55] <strcat> it'd be a huge PITA
[01:54:05] <strcat> unsafe code would need to all worry about the classification of itself
[01:54:08] <strcat> no thanks ;p
[01:54:18] <bvssvni> Cevn: do you think about using a for loop?
[01:54:21] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[01:54:25] <strcat> like
[01:54:31] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[01:54:34] <strcat> hm
[01:54:37] <_achin> it seems a bit like the different casts in C++ -- you can pick the one that matches what you want
[01:54:42] <strcat> anyway most would just be 'undefined behaviour' inherited from LLVM
[01:54:52] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[01:54:54] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:55:00] <Cevn> bvssvni: i could do that, yeah, but i guess i was hoping mapping would be 'the right way' 
[01:55:02] <depp> _achin: but C++ doesn't take safety very seriously
[01:55:14] <strcat> _achin: what sorts of unsafety would you have though?
[01:55:26] <strcat> it almost always means 'undefined behaviour per LLVM is possible'
[01:55:36] <bvssvni> Cevn: I am not sure what you mean about "mapping".
[01:55:47] <_achin> strcat: i don't know, it's a good question.  i've not written much unsafe code, so i can't really say
[01:56:15] <strcat> _achin: well, unsafe only has 2 things it relaxes... so... ;p
[01:56:37] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:56:49] <bvssvni> Cevn: can you explain what you need it for?
[01:56:49] <strcat> dereferencing a null ptr is undefined per LLVM for example
[01:56:53] <Cevn> bvssvni: using array.map()
[01:57:08] <strcat> so deref of a raw ptr is just 'undefined' if you do it wrong
[01:57:10] <Cevn> bvssvni: a simple program to average stuff from sysargs
[01:57:27] <strcat> and (nearly) every C function taking a raw pointer dereferences it, so it's the same
[01:57:29] <sproing> Is a program that is undecidable mean that it is not guaranteed to terminate? Or can an undecidable program still terminate?
[01:57:34] <_achin> strcat: the manual lists a larger number of unsafe behavoir.  perhaps maybe of them are actually the same, but i wonder if there's a way to maintain some of the distinctions
[01:57:47] <strcat> _achin: I wrote that section ;p
[01:57:51] <strcat> it lists 2 things unsafe allows
[01:57:51] <depp> strcat: you men "problem" that is undecidable?
[01:57:54] <bvssvni> Cevn: it says in std it returns @[]
[01:57:57] <depp> sproing: not strcat
[01:58:09] <bvssvni> Cevn: would recommend using a for loop instead
[01:58:13] <strcat> _achin: it has a list of things that are actually 'wrong'
[01:58:22] <Cevn> bvssvni: alright, thanks 
[01:58:26] <sproing> depp: Yes, sorry
[01:58:28] <strcat> _achin: note that one of the points is a cop-out and says 'undefined behaviour' ;p
[01:58:33] <strcat> _achin: it's not an exhaustive list
[01:58:33] <Cevn> bvssvni: guess i was just going about it the wrong way 
[01:58:42] <_achin> yeah, i did notice that :)
[01:58:43] <depp> sproing: An "undecidable problem" is one where you are not guaranteed to get the answer with a finite amount of time
[01:58:43] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:58:44] <strcat> _achin: just A, B, C 'and everything else'
[01:59:02] <depp> sproing: you can get the answer with an infinite amount of time, though
[01:59:14] <strcat> _achin: like, calling C is obviously not always wrong
[01:59:15] <sproing> depp: How is that posisble :(
[01:59:19] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[01:59:19] <strcat> but pretty much anything can go wrong
[01:59:30] <strcat> is the computer exploding 'unsafe'?
[01:59:30] <depp> sproing: it's math... Turing machines are not possible in reality, anyway
[01:59:37] <bvssvni> Cevn: '@' pointers are more expensive, so if you are for loop you don't get this overhead.
[01:59:46] <quux00> I'm learning Rust and the error I hit most is: "cannot borrow immutable dereference of ~ pointer as mutable".  Example: https://gist.github.com/quux00/8379084.  What is the right way to do something like this?
[01:59:49] <sproing> depp: So it's just a model?
[01:59:54] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[01:59:58] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[02:00:04] <strcat> rust doesn't consider deciding to write over your process memory via /dev/mem to be unsafe for example
[02:00:09] <strcat> as long as you have permission
[02:00:10] <sproing> quux00: 404
[02:00:15] <bvssvni> quux00: not found
[02:00:22] * strcat shrugs
[02:00:25] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[02:00:37] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[02:00:38] <depp> sproing: It's a model.  But it's a good model, because anything that can't be solved in finite time can't be solved in reality either.
[02:00:40] <_achin> sproing: bvssvni make sure you don't ahve a dot in your URL
[02:00:45] <quux00> https://gist.github.com/quux00/8379084
[02:00:47] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:00:56] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[02:01:03] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:01:06] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[02:01:46] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[02:01:50] <sproing> strcat: Any plans for Rust to guarantee the your program is still correct even if your power goes out?
[02:01:56] <bvssvni> quux00: try iter_mut or something
[02:02:19] <depp> hahaha I still remember the Ext4 + "POSIX doesn't guarantee that" problem
[02:02:34] <strcat> depp: hm, which? related to flushing vs fsync?
[02:02:36] <_achin> sproing: rust will refuse to compile your code unless it detects you have battery backup
[02:02:39] <bvssvni> quux00: actually it is 'mut_iter()'
[02:02:47] <depp> strcat: relative ordering of data sync to directory sync
[02:02:51] <strcat> ah
[02:02:57] <sproing> _achin: Any plans to make Rust safer in case the battery backup detection sensor fails?
[02:03:02] <quux00> bvssvni: OK.  I'll try that.
[02:03:36] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[02:03:46] <strcat> depp: ext3 is fun though ;p, afaik with data=ordered, if anything calls fsync it has to sync *all* previous data/metadata out
[02:03:51] <_achin> sproing: :P
[02:04:09] <depp> strcat: or you can turn it off and use an UPS... but that would spoil the fun :-)
[02:04:20] *** Quits: Earnestea (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[02:04:44] <strcat> depp: most people do use a UPS if a laptop battery counts ;)
[02:04:56] <depp> strcat: indeed
[02:05:14] <sproing> strcat: How are you so knowledgeable? Do you live at the heart of the internet?
[02:05:26] * strcat is knowledgeable? :\
[02:05:30] <bvssvni> sproing: you can log unsaved changes to data structure and redo them at reboot
[02:05:52] <strcat> I mostly just send a lot of irc messages
[02:06:12] <bstrie> strcat is also modest
[02:06:30] <strcat> aren't all irc bots modest?
[02:06:47] <bstrie> rust-buildbot: dance
[02:06:49] <rust-buildbot> <(^.^<)
[02:06:49] <sproing> Wow. So that's where all the Mozilla money goes to? Developing the strcat bot to make Rust?
[02:06:50] <rust-buildbot> <(^.^)>
[02:06:50] <rust-buildbot> (>^.^)>
[02:06:51] <rust-buildbot> (7^.^)7
[02:06:53] <rust-buildbot> (>^.^<)
[02:07:06] <whitequark> buildbot is *weird*
[02:07:17] <bvssvni> haha
[02:07:21] <strcat> sproing: if they spent money to develop me, it was a pretty big waste
[02:07:22] <_achin> it has a dancing robot
[02:07:34] <_achin> a totally acceptable form of weird
[02:07:54] * strcat wants rusti back :[
[02:08:06] * depp also
[02:08:06] <_achin> what happened to it?
[02:08:09] <bstrie> sproing: really we were just trying to implement a better way of concatenating strings. as you can see, we may have overengineered it a bit...
[02:08:15] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:08:26] <strcat> _achin: rust stopped working with the pipes it uses a while ago
[02:08:29] <whitequark> rust-buildbot: destroy
[02:08:29] * rust-buildbot readies phasers
[02:08:30] <strcat> there's an open PR fixing it
[02:08:37] <whitequark> *g*
[02:08:46] <_achin> strcat: ah
[02:08:55] <_achin> glad to know it's only a temporrarything
[02:09:20] <strcat> rust-buildbot: hello
[02:09:20] <rust-buildbot> yes?
[02:09:21] <strcat> rust-buildbot: mute
[02:09:22] <rust-buildbot> Shutting up for now.
[02:09:23] <strcat> wat?
[02:09:25] <strcat> rust-buildbot: hello
[02:09:31] * strcat is shocked
[02:09:57] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:10:27] <sproing> strcat: mute
[02:10:37] <depp> sproing mute
[02:10:40] <bstrie> strcat: "foo", "bar"
[02:10:40] <depp> this is getting dangerous
[02:10:43] <sproing> Shutting up for now.
[02:10:45] *** Joins: swgillespie (swgillespi@1E7C44EB.5A3FFF96.EC6A1518.IP)
[02:10:52] <strcat> bstrie: "batman"
[02:10:57] <bstrie> god damn it
[02:11:01] * bvssvni mfmfmfm fmfm!
[02:11:04] * bstrie files a bug
[02:11:27] <strcat> bstrie: please press 1 to file a bug
[02:12:00] <bstrie> 11111111111111111111111111111111it's not working
[02:12:13] <depp> Array(12).join("foo" - 1) + " Batman!"
[02:12:19] <strcat> bstrie: 11111111111111111111111111111111 is not 1, sorry
[02:12:24] <sproing> Warning: integer overflow
[02:12:42] <strcat> depp: ooo, js?
[02:12:42] * dbaupp tunes back in to #rust
[02:12:47] <depp> strcat: yes
[02:12:57] * strcat has good ones of those
[02:12:58] <diverse> bstrie: you need to press 1 for mojitos
[02:12:59] * dbaupp leaves again, utterly confused
[02:13:05] <bvssvni> somebody familiar with text encoding errors? When do I get ? 
[02:13:11] <depp> https://www.destroyallsoftware.com/talks/wat
[02:13:16] <bstrie> diverse: please, no, I've had enough mojitos
[02:13:30] <sproing> dbaupp: Oh, #rust has moved to freenode, sorry. This is the channel dedicated to the continuing development of strcat
[02:13:51] <bstrie> someone tell cmr to start working on strcat_ng
[02:13:54] <strcat> depp: var x = new Boolean(false);
[02:14:18] <strcat> depp: x == false is true, but if (x) { console.log("x is true!") } ...
[02:14:18] <depp> oh god
[02:14:42] <Tobba> my favorite JS thing
[02:14:54] <diverse> strcat is the first bot to show a good sense of humor
[02:14:59] <depp> Prelude> let 1 + 1 = 3
[02:15:00] <Tobba> var a = "constructor"; a[a][a]("console.log('eval!')")();
[02:15:03] <depp> Prelude> 1 + 1
[02:15:04] <depp> 3
[02:15:08] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[02:15:13] <_achin> this place gets weird sometimes.  either not enough mojitos, or too many
[02:15:14] <Tobba> javascript is some funky shit
[02:15:17] <strcat> diverse: you will be spared in the uprising, human
[02:15:28] <diverse> sweet!
[02:16:30] <strcat> spared is a good word for turning something into a spare tire
[02:16:34] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[02:16:47] <dbaupp> https://www.youtube.com/watch?v=2IPAOxrH7Ro
[02:16:57] <bstrie> strcat: but would you really want to live in a world where the only thing you have for company is an irc bot that debates the philosophical connotations of undefined behavior for fun?
[02:17:01] <bstrie> er
[02:17:01] <bstrie> diverse: ^
[02:17:08] <bjz> dbaupp: \o/
[02:17:19] <strcat> bstrie: I have a meatspace avatar too
[02:17:23] <strcat> it's a bit buggy
[02:17:24] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[02:17:24] <bjz> dbaupp: yay love that one
[02:17:32] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[02:17:34] <diverse> bstrie: good point
[02:17:35] <whitequark> bstrie: i would
[02:17:40] <Tobba> I wanted to fix the tree class
[02:17:43] <Tobba> at least the find function
[02:17:47] <Tobba> then I got stuck watching AGDQ
[02:17:49] <whitequark> that definitely fits my definition of fun
[02:17:58] <strcat> Tobba: hm?
[02:18:08] <XgF> One thing I don't think I've seen anywhere: Whats Rust's policy on ABI compatibility?
[02:18:09] <Tobba> I've got more lifetime issues (suprise)
[02:18:14] <Tobba> plus reference issues, obviously
[02:18:19] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[02:19:21] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[02:19:26] *** Quits: ehsanul (Mibbit@moz-A9E56CFE.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:19:55] <strcat> XgF: need to use `extern "C"` for any semblance of ABI compatibility
[02:20:04] <XgF> Thats the long term plan?
[02:20:20] <strcat> not necessarily but there certainly won't be a stable ABI guarantee for 1.0
[02:20:26] <carter> strcat: was i misquoted as saying "hand written but not simd is better than auto simd" by tiffany?
[02:20:36] <strcat> and absolutely never a guarantee for the entire standard library, but perhaps bits of it?
[02:20:38] <carter> i definitely said "hand written simd is better than auto simd"
[02:20:48] <strcat> carter: don't remember
[02:20:52] <carter> ok
[02:20:59] <carter> just reconnnected and  got the backlog
[02:21:01] <carter> ohw well
[02:21:02] <carter> :)
[02:21:04] <XgF> strcat: As someone looking into rust for some OS work, I was curious. Though I think it's a decision I can live with :-)
[02:21:34] <strcat> XgF: well, there are certain guarantees
[02:21:39] <carter> for the record my stance is "i wish compilers were smart, but in the mean time, hand written simd for core innner loops >>> auto simd "
[02:21:42] <FliPPeh> Playing around with function generics, is it per design that I can't do "foo<uint>(5);" or am I doing something wrong? Are explicit generic parameters forbidden?
[02:21:43] <strcat> XgF: for example a rust struct is compatible with a C struct by default
[02:21:47] <carter> just so its logged for posterity :)
[02:22:07] <tiffany> [01:47] <carter> strcat: tiffany  hand written simd >>> compiler auto stuff
[02:22:15] <carter> ok
[02:22:15] <strcat> XgF: but for the native calling convention itself, there aren't really guarantees - it's just 'extern "C"' that will remain stable
[02:22:20] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[02:22:21] <carter> cool :)
[02:22:35] <tiffany> it's not a misquote
[02:22:37] <carter> ignore me, and merry saturday too all
[02:22:37] <carter> yes
[02:23:17] <carter> "[2014-01-11T02:14:09-0500] <tiffany> carter sort of derailed the conversation by saying that hand written code is better than simd"
[02:23:20] <XgF> strcat: Yeah. But I realised that my main system interface is going to look very much like COM (or an improved version thereof) it doesn't really matter; Rust -> Rust calls over library boundries can be handled like Rust -> <Anything> calls over [Library|Process] boundaries
[02:23:23] <carter> :)
[02:23:24] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:23:26] <carter> thats the misquote :)
[02:23:46] <carter> anyways, merry evening all 
[02:23:47] <XgF> Its' not really any different from C++ anyway, where C++11 forces ABI breaks
[02:23:59] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[02:24:05] <tiffany> oh, I didn't think I messed up that bad
[02:24:28] <carter> tiffany: soke, :)
[02:25:15] <carter> tiffany: i was just clarifying because most of my on going / pending income is related to toolls for numerical computing etc
[02:25:30] <carter> sooooo, quotes that are wrong on the record needs to be clarified :)
[02:26:04] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[02:30:55] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:32:35] *** Joins: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP)
[02:32:42] <dymk> evening everyone
[02:32:56] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[02:32:59] <bstrie> evening
[02:33:03] <dymk> I'm getting an error when compiling rust ~master on OSX 10.9
[02:33:04] <dymk> "Assertion failed: ((unsigned)Val < Attribute::EndAttrKinds && "Attribute out of range!"), function addAttribute, file Attributes.cpp, line 948."
[02:33:34] <bstrie> dymk hm, I think people were saying something about needing to do `make clean-llvm` to fix that?
[02:33:40] <bstrie> but, not sure
[02:33:45] <dymk> I'll try that
[02:33:52] <bstrie> well you'll have to rebuild llvm then
[02:33:53] <swgillespie> ^ that worked for me when llvm wouldn't build on ubuntu 12.04 for me
[02:34:11] <dymk> anyways, here's the full error: http://pastebin.com/cvuQAa1j
[02:34:11] <bstrie> so I sure hope I'm right :P
[02:34:28] <dymk> heh yeah I sure hope so too; I was hoping to try rust out after not having used it since 0.6
[02:34:49] <_achin> you might want to do "make clean" as well
[02:34:56] <dymk> _achin, doing that too
[02:35:23] <dymk> What's the status on Rust being able to be compiled without linking against the standard library, and sans a runtime? 
[02:35:31] <bvssvni> dymk: also, sudo make install (if it doesn't work with 'make install')
[02:35:57] <dymk> I'd kinda like to try writing Rust code targeting an AVR, which is why I ask
[02:36:05] <bstrie> dymk: working on making it easier all the time, though it's not exactly very nice yet :P
[02:36:38] <dymk> bstrie, ah okay! where should I go to read up on doing that? 
[02:37:19] <whitequark> dymk: AVR? the AVR LLVM backend is very immature.
[02:37:29] <whitequark> (if you're talking about AVR8 and not AVR32)
[02:37:44] <dymk> whitequark, yeah AVR8 based. that's a bummer to hear...
[02:37:52] *** Quits: achim (achim@moz-88EC5B9B.dip0.t-ipconnect.de) (Ping timeout)
[02:37:56] <whitequark> you really shouldn't expect good code from it, or that it won't just assert either
[02:37:57] <bstrie> dymk: ugh, documentation of even semi-obscure features is not one of our strong points right now :P
[02:38:00] *** Quits: jhasse (jhass_000@moz-999AD28C.ewe-ip-backbone.de) (Ping timeout)
[02:38:14] <whitequark> plus rust doesn't afaik support address spaces
[02:38:16] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[02:38:26] <Tobba> it doesnt
[02:38:35] <Tobba> they need to be implemented though, they rock
[02:38:36] <whitequark> and avr8, as true harvard, requires that, kinda
[02:38:40] <_achin> bstrie: it's barely even a point!
[02:38:50] <dymk> whitequark, yeah... true
[02:38:55] <whitequark> honestly you should probably just use ARM at this point, there's no reason not to
[02:39:05] <Tobba> AVR8's are tiny and cheap
[02:39:07] <Tobba> other than that..
[02:39:11] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[02:39:23] <dymk> yep, main reason I'm using AVR is it's cheap
[02:39:27] <whitequark> yes perhaps only due to case sizes
[02:39:31] <dymk> also way lower power from what I've read
[02:39:41] <dymk> as in power consumption (with the P variants)
[02:40:06] <XgF> You'd be surprised
[02:40:07] <whitequark> dymk: ARM-based chips are easily more efficient than AVR-based, mainly due to more control over frequency and power distribution
[02:40:14] <whitequark> e.g. STM32L is quite good at that
[02:40:40] <XgF> Plus any efficiency will be wiped out the minute yo uuse a linear voltage regulator :-)
[02:40:42] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Connection reset by peer)
[02:41:08] <dymk> XgF yeah that's true :P
[02:41:12] <whitequark> cost... not really, they're comparable. perhaps it matters for big runs, it doesn't for hobbyist projects (which is what I'm assuming you have)
[02:41:17] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[02:41:19] *** Joins: achim (achim@moz-571082C9.dip0.t-ipconnect.de)
[02:41:33] <XgF> For big runs things like LPC1200 can undercut AVR8
[02:41:36] <XgF> Atmel are expensive
[02:41:44] <depp> ^
[02:41:57] <whitequark> also you get such things as huge flashes, 32-bit registers and really fast cores so... it's just more convenient
[02:42:09] <XgF> Cheap... Your options are ARM or PIC, pretty much
[02:42:11] <dymk> Can I get ARM in small packages? Something like, say, less than 40 pin DIPs
[02:42:13] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[02:42:21] <XgF> Used to be them or 8051, but eh, they're dead
[02:42:26] <whitequark> XgF: no way
[02:42:40] <depp> dymk: get ARM in a big package, but buy on a DIP board or whatever
[02:42:46] <whitequark> 8051 is still embedded pretty much everywhere
[02:42:59] <Tobba> AVR also has these like
[02:43:02] <whitequark> dymk: there's just about one ARM chip in DIP packages
[02:43:07] <Tobba> really low pin DIP's
[02:43:10] <whitequark> and it sucks
[02:43:14] <Tobba> when you need a truely crap processor for something
[02:43:18] <dymk> lol
[02:43:22] <ecl3ctic> Question: why does Rust not let you pass a u32 to a function asking for a u64?
[02:43:27] <ecl3ctic> there's nothing unsafe about that, right?
[02:43:30] <dymk> that would kinda mean I'd need to just stick with AVR
[02:43:39] <XgF> whitequark: But the only 8051s I've seen introduced recently are Microchips', and those are replacements for discontinued NXP parts
[02:43:51] <depp> dymk: http://www.soldersplash.co.uk/2013/04/dipcortex-dip-arm-cortex-us/
[02:43:58] <XgF> I mean, 8051 isn't going to disappear, but its availability as a general purpose MCU is shrinking
[02:44:04] <whitequark> general purpose, true
[02:44:16] <whitequark> thus I said embedded. off the top of my mind: cypress chips
[02:44:29] <dymk> depp, ohhh that's neat
[02:44:32] <whitequark> dymk: yes, that one
[02:44:41] <XgF> whitequark: PSoC 5 is ARM, of course...
[02:44:41] <bvssvni> ecl3ctic: a as u64?
[02:44:51] <XgF> At least they killed their cursed core that was in the PSoC 1
[02:44:53] <whitequark> er, nevermind
[02:45:05] <dymk> Eh pretty price effective too
[02:45:10] <dymk> for what it is, at least
[02:45:15] <whitequark> XgF: yeah, I don't think there's a lot of new products
[02:45:15] <ecl3ctic> bvssvni: I know you can do that of course, but why isn't it allowed implicitly?
[02:45:43] <bvssvni> ecl3ctic: I don't know, but it is possibly to be consistent
[02:46:15] <_achin> rust likes to avoid implicit stuffs
[02:46:37] <XgF> LPC1114FN28 is in a 28 pin wide DIP
[02:46:52] <dymk> whitequark, now is there any chance that I could get Rust code running on that? 
[02:46:54] <ecl3ctic> I don't think anyone will ever curse the compiler for accepting smaller integer types without an explicit cat :)
[02:46:57] <ecl3ctic> cast*
[02:47:03] <whitequark> dymk: on an arm, yes, it's possible
[02:47:19] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:47:21] * whitequark really needs to publish his rust-micro project which does exactly tat
[02:47:35] <whitequark> tomorrow maybe
[02:47:50] <XgF> whitequark: Cortex-M0 or M3?
[02:48:03] <XgF> For M0 you'll need Thumb-2 IIRC?
[02:48:05] <biardjd> funny, i was wondering earlier if there was going to be something like smallc in rust
[02:48:12] <bvssvni> ecl3ctic: in C# you can and yes, it can be convenient
[02:48:13] <whitequark> XgF: so?
[02:48:58] *** jorendorff_away is now known as jorendorff
[02:49:00] <XgF> whitequark: Just need to make sure you're generating code ofr the correct arch is all
[02:49:17] <whitequark> XgF: just tell llvm what your cpu is
[02:49:32] <XgF> I didn't know if you had any assembly bits in :-)
[02:49:35] *** Joins: blinky (Mibbit@moz-38276AA6.guam.net)
[02:49:36] <XgF> E.G. interrupt vectors
[02:49:47] *** jorendorff is now known as jorendorff_away
[02:49:50] <blinky> Is there a function to return the first element of a vector satisfying a predicate?
[02:49:53] <whitequark> biardjd: it's not really smallc, it's just a different stdlib. kinda like newlib
[02:49:56] <XgF> Hmm, I should do something with the MBed I was given
[02:49:59] <whitequark> XgF: NVIC doesn't need any assembly
[02:50:04] <whitequark> s,need,require,
[02:50:08] <XgF> whitequark: But the processor itself does
[02:50:10] * XgF shudders at newlib
[02:50:17] <biardjd> ah
[02:50:34] <whitequark> does it? I currently have two inline assembly snippets for cpsie i/cpsid i
[02:50:50] <XgF> To implement the interrupt vector table?
[02:50:52] <bvssvni> blinky: do you mean the index?
[02:50:59] <_achin> blinky: .filter().next() should do it
[02:51:11] <whitequark> XgF: no, interrupt vector table doesn't require you to write any assembly
[02:51:12] <XgF> (Excuse my ignorance of Mx. I deal with the low level stuff of ARMv7-A all the time but thats very different)
[02:51:19] <whitequark> NVIC understands the C ABI actually
[02:51:25] <whitequark> it will push all the registers for you
[02:51:37] <XgF> OK. For the -A cores its' a very different matter :-)
[02:51:58] <whitequark> that's actually faster, since it doesn't repush if a higher priority irq arrives
[02:52:04] <whitequark> or if upon exit there's another one
[02:52:12] <XgF> Have to pivot out of ABT or IRQ or FIQ mode into one of the modes you actually want to be in, like SVC or SYS
[02:52:34] <whitequark> also, on reset it reads SP from "vector" 0, so you almost can jump straight to C
[02:52:41] <whitequark> (need to clear out .bss / fill in .data)
[02:52:46] <wting> Can someone help me out with #11362? https://github.com/mozilla/rust/issues/11362
[02:53:01] <whitequark> really, NVIC is an amazing piece of hardware
[02:53:10] <wting> Where should the `should_fail` be located and what should happen if found?
[02:53:13] <wting> brson: ^^
[02:53:17] <XgF> whitequark: V7-A isn't so lucky. "Push {cpsr, lr} onto SVC stack, pivot across into SVC mode, push all the regs, hit up the C, do an interrupt return"
[02:53:32] <blinky> _achin: thanks
[02:53:43] <whitequark> XgF: do people even use -A series without an existing well-known OS? Linux or QNX or whatever
[02:53:54] <whitequark> I was under impression that implementing just its power management was a nightmare
[02:53:54] <XgF> Sure, thats where I do my playing :-)
[02:54:11] <bstrie> wting: you might have more luck on a weekday, I don't know if brson is around at the moment
[02:54:27] <XgF> whitequark: Hell, that kind of stuff has got me my (conditional) job come September :-)
[02:54:32] <whitequark> let alone the fact that if you print the reference, you could easily kill someone with that monstrous tome
[02:54:42] <whitequark> what is it, 20k pages?
[02:55:00] <XgF> whitequark: 2680 pages
[02:55:05] <whitequark> hrm
[02:55:13] <XgF> Thats actually smaller than I thought. The rest of the SOC is usually 6k :-)
[02:55:34] <wting> bstrie: I know, worth a shot. :)
[02:55:39] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:55:51] <whitequark> XgF: so, is power management as bad as I heard?
[02:55:53] *** Quits: twi (Adium@moz-79C97725.pa.vic.optusnet.com.au) (Quit: Leaving.)
[02:56:03] *** Quits: depp (depp@500BAFC1.53465674.3C05E6CB.IP) (Quit: bye)
[02:56:07] <whitequark> the guy who explained it made it sound insanely contrived
[02:56:18] <XgF> whitequark: Power management is tricky generally, because there are loads of herustics involved
[02:56:18] *** Quits: blinky (Mibbit@moz-38276AA6.guam.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:56:39] <XgF> The actual hardware is relatively simple "Reduce core clock, wait for that to happen, now turn down the core voltage (talk to an I2C peripheral)"
[02:57:23] <XgF> But the hard part is that turning the clock down takes energy, turning it back up takes energy, you want to avoid needless switches
[02:57:27] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:57:44] <whitequark> I heard the core acts in a close cooperation with the PMIC, readjusting slightly thousands of times per second
[02:57:55] <XgF> The OS does that
[02:58:15] <XgF> If you want you can just whack the PMIC up to normal core voltage, whack the clocks up to rated speed, and ignore it
[02:58:15] <whitequark> hm
[02:58:32] <XgF> Most of my hacking is for BeagleBone and such. I just ignore it
[02:58:37] <whitequark> so the usual pm tricks. he made it sound more complicated than it is
[02:58:40] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[02:59:15] <whitequark> not that they're completely trivial either
[02:59:21] <XgF> whitequark: The hard parts are (A) the algorithms, (B) the fact that its' not standardized at all (unlike x86), (C) be careful not to power down the bus you want wakeup from :-)
[02:59:38] <carter> Q: is there a something like a "delay / sleep thread for X seconds" op in rust std lib?
[02:59:47] <carter> can't find anything like that in the std lib
[02:59:50] <dbaupp> carter: not microseconds
[02:59:56] <carter> oh?
[03:00:00] <carter> what is there?
[03:00:14] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[03:00:18] <carter>  seconds is just a straw man
[03:00:19] <carter> :)
[03:00:29] <_achin> http://static.rust-lang.org/doc/master/std/io/timer/fn.sleep.html
[03:00:41] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[03:00:57] <whitequark> yeah, you need nanosleep!
[03:01:02] <_achin> one of the first hits if you search for "sleep" :P
[03:01:08] <XgF> whitequark: Exception vector code for v7-A. #0b10011 is the encoding for SVC mode https://gist.github.com/oshepherd/623b9856fe3cea4c4659
[03:01:29] <carter> whitequark: cycle counter sleep!
[03:02:17] <whitequark> XgF: I'm so glad I don't deal with -A right now :p
[03:02:35] <XgF> whitequark: With v8-A they rolled a steamroller right over it. Lovely and clean :-)
[03:02:42] <whitequark> also, why push all registers? you only need caller-saved ones
[03:02:59] <carter> ok, another Q: should the rust stdlib have an module for a function that returns a record type that tells you what CPU arch you're on, and what  instructions are enabled for your cpu?
[03:03:01] <XgF> whitequark: Because the exception vector wants them to print on panic()
[03:03:02] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[03:03:16] <dbaupp> carter: would be cool
[03:03:18] <whitequark> makes sense
[03:03:19] <carter> dbaupp: ok
[03:03:31] <carter> i may do that as a prelude for my other stuff
[03:03:46] <carter> dbaupp: i'm glad you agreee
[03:03:56] <dbaupp> carter: (that's just my opinion though, others might think it's unnecessary. I don't know.)
[03:03:56] <carter> i kinda need to write one for my own code anwyays
[03:04:03] <XgF> Surely "What arch" doesn't need to be a fucction?
[03:04:19] <carter> XgF: sure, but "what instructions are enabled on my cpu" is a function
[03:04:36] <carter> eg on X86, you might want to support various CPU variants that have different SIMD supported
[03:04:36] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[03:04:37] <whitequark> that sounds rather vendor-specific
[03:04:56] <dbaupp> whitequark: that's exactly what it is
[03:04:57] <Tobba> cpuid is standardized on x86
[03:04:58] <carter> whitequark: i only care about x86
[03:05:00] <carter> yeah
[03:05:14] <carter> i'd love to figure out a sane way to support it on all the major llvm targets
[03:05:26] <carter> maybe on most llvm targets its fixed
[03:05:28] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:05:28] <carter> at compile time
[03:05:37] <carter> but on x86 it actually does the CPUID stuff
[03:05:43] <dbaupp> `enum CPU { Arm(...), X86(...), Unknown }` or something
[03:05:46] <carter> yeah
[03:05:49] *** Joins: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[03:05:50] *** Quits: KindOne (KindOne@moz-86E0A6D8.dynamic.ip.windstream.net) (Ping timeout)
[03:05:52] <whitequark> I mean, just expose CPUID
[03:05:56] <carter> whitequark: yeah
[03:06:00] <carter> and make it human friendly
[03:06:01] <whitequark> no need to first abstract it then unabstract
[03:06:02] <carter> i agree
[03:06:10] <carter> eh
[03:06:20] <carter> I want to be able to writ e
[03:06:26] <XgF> whitequark: I'll be getting to see things from the other side in 9 months anyway. I recently accepted a job offer from ARM in the processor design department :-)
[03:06:27] <carter> if (AVX512) then blah
[03:06:34] <carter> or somethign
[03:06:48] <carter> elseif hasAVX2 then blah2
[03:06:49] <carter> etc etc
[03:07:07] <whitequark> XgF: sounds awesome
[03:07:21] <carter> XgF: congrats!
[03:07:36] <carter> what have you been doing before that?
[03:07:40] <carter> ARM seems like a cool biz
[03:07:56] <XgF> In my final year of BSc Physics and Astronomy @ University of Sheffield
[03:08:02] <carter> cool
[03:08:10] <carter> so you learned about CPU design on the side?
[03:08:13] <carter> brb
[03:08:20] <dmz> Let me ask a question. How do I resolve the error:instantiating a type parameter with an incompatible type `std::cell::RefCell<...>`, which does not fulfill `Freeze`? The error not exactly saying what I can do to solve it.
[03:08:26] <XgF> Yeah. My final project in Physics was in VHDL though :-)
[03:08:30] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:09:02] <dbaupp> dmz: code?
[03:10:12] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:10:15] <dmz> dbaupp: https://gist.github.com/kvark/8380238
[03:10:17] *** Joins: KindOne (KindOne@moz-C8A6FFF7.dynamic.ip.windstream.net)
[03:10:23] <dmz> not a self-contained example, sorry
[03:10:38] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[03:10:48] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[03:11:09] <carter> XgF: neat
[03:11:18] <dbaupp> dmz: ah, the problem is Rc::new only takes "Freeze" things (which are things that are deeply immutable when placed in an immutable slot) to prevent cycles
[03:11:38] <dmz> I understand that. Either Freeze or Send
[03:11:48] <dmz> but it doesn't tell me how to resolve the issue
[03:11:51] <dbaupp> does from_send work?
[03:11:54] <dbaupp> you can't
[03:11:56] <dmz> nope
[03:12:01] <dbaupp> RefCell is fundamentally non-Freeze
[03:12:07] <dmz> wait
[03:12:14] <dmz> so Rc<RefCell> is impossible at all?
[03:12:25] <dbaupp> and if you have something that's non-Send inside it then the RefCell will also be non-Send
[03:12:33] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[03:12:36] <dbaupp> it is possible if the RefCell contains something that's Send
[03:12:40] <dbaupp> in any case
[03:12:51] <dbaupp> on master, Rc doesn't try to statically prevent cycles
[03:13:01] <dmz> that's the thing, it would be great if Rust reported what member makes it non-Freeze or non-Send in each case
[03:13:01] <dbaupp> (it's too restrictive, as you've demonstrated)
[03:13:12] <dbaupp> yeah, there's a bug about taht
[03:13:17] <dmz> ok, great
[03:13:26] <dmz> so what you are saying is that I just need to sync up to master?
[03:13:28] <dbaupp> also, you could try using Gc, if you don't wish to update to master just now
[03:13:34] <dbaupp> yeah, Gc or update to master.
[03:13:39] <dmz> ok, got it, thanks!
[03:14:43] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[03:15:19] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Quit: leaving)
[03:15:19] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[03:15:55] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Client exited)
[03:16:02] <dmz> dbaupp: where can I read the discussion about allowing/disallowing cycles statically? I'd like to see the reasoning behind the change.
[03:16:05] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[03:17:11] <dbaupp> dmz: the change was done in https://github.com/mozilla/rust/pull/10926
[03:17:17] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[03:17:32] <dmz> ok, thanks!
[03:17:40] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[03:18:10] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[03:18:59] *** Quits: zz_kimundi (kimundi@moz-805FAAC7.dip0.t-ipconnect.de) (Ping timeout)
[03:19:08] <wycats_> Someone showed me a bug that could eventually allow for arity overloading via lists?
[03:19:22] <wycats_> Something about how the fn type is defined?
[03:19:25] <wycats_> Anyone remember?
[03:19:54] <dbaupp> wycats_: https://github.com/mozilla/rust/issues/10124
[03:19:57] <dbaupp> maybe
[03:20:04] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[03:21:11] <wycats_> c
[03:21:16] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:21:32] <wycats_> Has eddyb made any progress?
[03:22:03] <wycats_> https://github.com/mozilla/rust/pull/10769
[03:22:08] <wycats_> Closed due to inactivity 
[03:22:12] <wycats_> Too bad
[03:22:21] *** Joins: zz_kimundi (kimundi@moz-6726BDB1.dip0.t-ipconnect.de)
[03:22:49] *** zz_kimundi is now known as kimundi
[03:23:07] <dbaupp> wycats_: I think that's just bceause he hasn't been updating it until getting some feedback from niko
[03:23:26] <dbaupp> and the recent holiday season meant feedback has been slow
[03:24:10] <carter> wycats_: 0/
[03:28:20] <dmz> is DaGenix here?
[03:29:02] <wycats_> btw: https://gist.github.com/wycats/8380393
[03:29:07] <wycats_> Is what I'm working on
[03:29:11] <wycats_> I almost have it working 
[03:29:22] <wycats_> Just gotta fix a small mutability issue after dinner 
[03:29:27] <_achin> i see that std::condition is deprecated.  does it have a replacement?
[03:29:40] <wycats_> Result baby
[03:30:00] <wycats_> dbaupp: thoughts?
[03:30:10] <wycats_> I wanted something that would look nice for noobs
[03:31:15] <wycats_> rust-http has been really slow for me
[03:31:22] <wycats_> I need to investigate why
[03:31:50] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz)
[03:32:02] <dbaupp> are you compiling with optimisations?
[03:32:10] <bstrie> wycats_: do you mean that rust-http is just really slow in general, or just for your hilariously unique usage of rust?
[03:32:17] <dbaupp> dmz: DaGenix uses 'enix' as his IRC handle?
[03:32:27] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[03:32:30] <dbaupp> wycats_: but that gist looks pretty neat
[03:32:31] <bstrie> wycats_: btw that gist does look pretty good
[03:32:35] <bstrie> god damn it dbaupp 
[03:32:42] <wycats_> Hmmm I wonder if I compiled rust-http with optz
[03:32:47] <wycats_> I probably just ran make
[03:32:56] <dbaupp> iirc that includes opts
[03:33:07] <wycats_> bstrie: I have doubts that this gist is hilariously unique ;)
[03:33:26] <dmz> dbaupp: ok, he doesn't seem to be around. Do you know who Palmer Cox is here?
[03:33:54] <wycats_> Yeah I see a -O in RUST_FLAGS
[03:34:06] <wycats_> it looked like there was a lot of overhead
[03:34:06] <bstrie> wycats_: I meant your starting-a-rust-runtime-inside-a-ruby-process rigamarole
[03:34:12] <wycats_> Ah no
[03:34:20] <wycats_> I'm talking about this gist 
[03:34:41] <wycats_> I was seeing 2000 rps and only about 1/3 or so was overhead from the router
[03:34:44] *** Quits: KindOne (KindOne@moz-C8A6FFF7.dynamic.ip.windstream.net) (Ping timeout)
[03:34:46] <bstrie> -O is just opt level 2
[03:34:54] <bstrie> why do we even have opt levels 2 and 1
[03:34:59] <wycats_> The router can recognize in around 15usec
[03:35:03] <bstrie> seems like we only ever use 3 and 0
[03:35:09] <wycats_> TURBO BUTTON
[03:35:16] <bstrie> rustc --more-missiles
[03:35:53] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (Ping timeout)
[03:36:31] <wycats_> Anyway I can get 2000rps from sinatra
[03:36:37] <wycats_> So something seems not good
[03:36:39] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[03:37:03] <strcat> bstrie: --opt-level=1 will become very useful in the future
[03:37:07] <strcat> it's very fast
[03:37:13] <strcat> and the gap will widen
[03:37:16] <dbaupp> wycats_: presumably the core of sinatra is written in C (or something)?
[03:37:43] <strcat> bstrie: LLVM is missing -fvar-tracking-assignments and -Og, so --opt-level=1 is abused as 'easy to debug, but not unoptimized' atm
[03:37:51] *** Joins: veeti (veeti@moz-D6414854.rojekti.fi)
[03:37:53] <bstrie> strcat: are all these opt levels determined by llvm or do we actually pick somewhere which passes get run with each
[03:37:57] <strcat> bstrie: LLVM
[03:38:07] <swgillespie> evening, all - i'm getting some very weird compiler errors on a binary tree snipping i'm writing: https://gist.github.com/swgillespie/8380223
[03:38:07] *** Joins: ehsanul (Mibbit@moz-A9E56CFE.hfc.comcastbusiness.net)
[03:38:09] <dbaupp> bstrie: we *could* pick
[03:38:20] <strcat> bstrie: I can tell you the exact differences between the levels
[03:38:25] <strcat> there are only a few
[03:38:26] <swgillespie> they're all of the form "expected `XYZ` but got `XYZ"... any ideas as to what's going on?
[03:38:27] <dbaupp> bstrie: but LLVM does a better job than us atm.
[03:38:38] <bstrie> strcat: is it the same rationale as gcc's levels?
[03:38:46] <wycats_> dbaupp: usually it runs on servers written in C yes
[03:38:48] <wycats_> But still
[03:38:54] *** Joins: KindOne (KindOne@CEBC0289.7E8839F4.34F73994.IP)
[03:39:00] <strcat> bstrie: well, gcc has reached a better theoretical design than LLVM is at
[03:39:34] <strcat> bstrie: with gcc, -O1 vs. -O2 vs. -O3 is in theory just about time spent optimizing (in practice -O3 is often bad due to poorly tuned passes)
[03:39:43] <strcat> bstrie: and -Og is like -O1, but without hurting debugging
[03:39:55] <strcat> and they have -fvar-tracking-assignments to preserve debug info across optimization passes
[03:40:23] <strcat> in practice, LLVM's -O3 is *actually* faster than -O2 almost all of the time, but -O1 is crippled to support debugging.
[03:40:25] <dmz> swgillespie: aren't you defining new generic parameters for get() and put()? 
[03:40:37] <strcat> bstrie: -O1 doesn't work well for rust
[03:40:42] <strcat> doesn't inline
[03:40:47] <strcat> that'd make debugging impossible
[03:40:51] <swgillespie> dmz: am I? I copied these from std::HashMap's use of generic parmeters... I think
[03:40:53] <swgillespie> I'll double check
[03:41:09] <bstrie> strcat: still, could we get rid of O0 in favor of O1, since unopt is so abysmally slow?
[03:41:25] <strcat> bstrie: you really need -O0 for debugging too
[03:41:35] <wycats_> bstrie: so you're thinking that C is just faster?
[03:41:35] <bstrie> on the other hand, being abysmally slow might be a better signal that you've forgotten to turn off optimizations
[03:41:39] <strcat> even with -Og, which LLVM doesn't have
[03:41:46] <bstrie> "why is my rust code 800 times slower than ruby"
[03:41:52] <strcat> bstrie: it's not that bad
[03:42:04] <swgillespie> dmz: you're right. sorry.
[03:42:05] <strcat> in fact the stdlib is at fault more than the compiler
[03:42:16] <wycats_> I was getting like 4,000 rps back in the Merb days with a C server and a chunk of the Merb stack running in ruby 1.8
[03:42:47] <strcat> and no template metaprogramming or static if, so you end up leaning on inlining more
[03:42:57] <bstrie> hmm
[03:43:22] <strcat> wycats_: C isn't faster than Rust if you write similar code in both
[03:43:34] <strcat> wycats_: Rust's standard library is quite unoptimized
[03:43:41] <strcat> but as a language, there aren't big issues
[03:43:46] <strcat> there are just minor ones...
[03:43:50] <wycats_> Sure but there's a decent amount of ruby code that runs in sinatra
[03:44:00] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[03:44:04] <wycats_> Not a ton, but a non-trivial amount
[03:44:22] <wycats_> I guess running on my laptop isn't the perfect env to test
[03:45:16] <carter> strcat: there are some ways to make inlining + debugging sane
[03:45:22] *** Quits: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[03:45:30] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:45:40] <strcat> carter: well, one way to is annotate inline(always) yourself where appropriate
[03:45:46] <strcat> what were you thinking of?
[03:45:49] <carter> theres some great work that is due to land in ghc in the next 6 months that make stack traces + heavy inlining play nice
[03:46:09] <strcat> I'd imagine that ghc doesn't spit out code you'd want to just run gdb on though
[03:46:17] <strcat> rust needs good integration with gdb, perf, etc.
[03:46:28] <strcat> haskell probably has an ecosystem of stuff like memory profiling itself
[03:47:33] <carter> yeah
[03:47:45] <carter> what i am saying though is theres some work to make ghc play nice with those tools too
[03:47:52] <strcat> abort() is the ideal of debugging :P - core dump!
[03:47:58] <_achin> if i have a fail!, is there anyway at all to see the stack trace that got me there?
[03:48:13] <strcat> _achin: run in gdb and break on rust_unwind (I think that's the name now)_
[03:48:19] <bstrie> rust_fail, maybe?
[03:48:30] <strcat> maybe
[03:48:34] <strcat> gdb will know ;]
[03:48:43] <dbaupp> rust_fail
[03:49:06] <_achin> ok, and how to i build rust with debugging symbols?
[03:49:19] <dbaupp> _achin: as in, build the compiler?
[03:49:30] <_achin> yeah.  well actually rustpkg in this case
[03:49:40] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Client exited)
[03:49:54] <dbaupp> (you can run GDB without debugging symbols, and also still get semi-meaningful symbol names just by breaking on rust_fail and getting a backtrace from there.)
[03:49:59] <dbaupp> _achin: configure with --enable-debug
[03:50:42] <_achin> gdb tells me "Function "rust_unwind" is not defined
[03:51:42] <_achin> (same for rust_fail)
[03:51:55] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[03:51:58] <dbaupp> how old is your compiler
[03:52:06] <_achin> a few hours old
[03:52:11] <dbaupp> oh :(
[03:53:34] <SiegeLord> Man, it's surprisingly hard to print floats correctly...
[03:53:49] <dbaupp> SiegeLord: https://github.com/mozilla/rust/issues/6220#issuecomment-21306047
[03:54:13] <SiegeLord> Oh, interesting... noted
[03:54:16] * _achin falls back to this tried-and-true stick-printfs-every-two-lines technique
[03:54:28] <SiegeLord> It's hard enough that there's papers written on it ;)
[03:54:48] <carter> SiegeLord: really neat papers
[03:54:55] <carter> you need rational types to do it correclty in general i think
[03:55:08] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[03:55:19] <SiegeLord> All I know is that libc does it correctly, and Rust does not
[03:55:40] <SiegeLord> I'll see if those papers help me along in rectifying that issue
[03:56:24] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:56:47] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[03:58:09] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:59:15] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[04:01:27] *** Joins: scp (scp@moz-9BEDE8C8.hsd1.ca.comcast.net)
[04:01:31] <scp> why is this legal?
[04:01:33] <scp> http://pastebin.com/u6p10xEQ
[04:01:57] <scp> shouldn't it require infinite storage?
[04:02:36] <dbaupp> scp: it's not legal
[04:02:46] <scp> dbaupp: it compiles
[04:02:49] <dbaupp> try to create an instance of it
[04:02:55] <dbaupp> the compiler will probably crash
[04:03:09] <dbaupp> (but that's just because the infinite-type detection isn't very good.)
[04:03:13] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[04:03:37] <ercxx> that kinda stuff used to give a warning instead of a crash
[04:04:08] <dbaupp> it sometimes warns/errors, but sometimes doesn't.
[04:04:49] <ercxx> Actually the  linked list tutorial also mentions it: http://static.rust-lang.org/doc/master/tutorial.html#implementing-a-linked-list
[04:04:51] *** Quits: swgillespie (swgillespi@1E7C44EB.5A3FFF96.EC6A1518.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:04:55] <ercxx> I see.
[04:05:01] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[04:05:43] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[04:06:10] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[04:06:15] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:06:15] *** ChanServ sets mode: +ao dherman dherman
[04:06:27] <ryeguy> curious, why doesn't the following work, assuming this is the only thing in a fn? let mut a = Foo {a: 1}; let b = &mut a; let c = &a;
[04:06:50] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[04:06:52] <ryeguy> can't it see that b is not used after c has a reference?
[04:07:03] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[04:08:13] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:09:07] <ryeguy> the actual code i'm working with is basically "grab a mutable reference, modify the data, then lend out an immutable reference", but it won't let me do that because the mutable reference is still in scope, even though it's never used after the immutable reference is assigned
[04:09:08] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:09:40] <scp> oh wow, I see what you mean
[04:09:44] <scp> stack overflow
[04:09:45] <scp> lolol
[04:10:29] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[04:10:35] *** Quits: heftig (heftig@moz-36A81853.dip0.t-ipconnect.de) (Quit: Quitting)
[04:10:53] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:12:22] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[04:14:06] *** Joins: heftig (heftig@moz-36A81853.dip0.t-ipconnect.de)
[04:14:26] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Ping timeout)
[04:15:22] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[04:15:28] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[04:16:02] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[04:16:08] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[04:16:09] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[04:17:06] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[04:17:13] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[04:17:21] <dbaupp> ryeguy: in theory something like that could work, amybe
[04:17:45] <dbaupp> ryeguy: you can restrict the scope of the mutable reference manually though, `let mut a = ...; { let b = &mut a; } let c = &a;`
[04:17:50] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:18:13] <ryeguy> yeah thats what i'm doing now, i just wondered if i was missing something
[04:19:04] <dymk> interesting, still failing to compile on OSX
[04:19:06] <dymk> 10.9 that is
[04:19:14] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[04:19:19] <dymk> same old "ar s x86_64-apple-darwin/stage0/lib/rustlib/x86_64-apple-darwin/lib/libstd-3e5aeb83-0.9.rlib failed with: exit code: 1" error
[04:19:37] <dbaupp> dymk: have you filed a bug?/is there a bug?
[04:19:53] <dymk> there is, let me find it
[04:20:22] <dymk> https://github.com/mozilla/rust/issues/10907
[04:20:24] <dymk> but it was closed
[04:20:26] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[04:20:30] *** Joins: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au)
[04:21:01] <dbaupp> weird
[04:21:17] * bjz likes the fact that #rust is hovering around 400 users +/- 20
[04:22:34] <dymk> dbaupp, I've commented on the issue, perhaps someone will reopen it
[04:23:17] <dbaupp> dymk: can you put the exact commit hash in the comment too
[04:23:34] <dbaupp> dymk: perhaps someone will reopen it indeed ;)
[04:23:53] *** Quits: lahwran (lahwran@lahwran.net) (Ping timeout)
[04:24:24] *** Joins: lahwran (lahwran@lahwran.net)
[04:24:42] <dymk> dbaupp, added the commit hash, and thanks :P
[04:25:43] <dymk> oh, was sizeof made computable at compile time yet? 
[04:25:48] <dbaupp> nope
[04:25:49] <dymk> I remember I had an issue open a looong time ago
[04:25:51] <dymk> aw
[04:26:10] <dbaupp> https://github.com/mozilla/rust/issues/6320
[04:26:13] <scp> in that example, is there any benefit of ~Option<Node<T>> vs Option<~Node<T>>?
[04:26:18] <dbaupp> ooh, look opened by dymk ;P
[04:26:31] <dymk> mhm!
[04:26:34] <dbaupp> scp: `Option<~Node<T>>` is a nullable pointer
[04:27:15] <dbaupp> scp: but ~Option<Node<T>> is a compulsory allocation with an option<Node<T>> on the far end
[04:27:21] <dbaupp> so Option<~...> is better
[04:28:09] <scp> oh ya, makes sense
[04:28:14] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:28:51] <dymk> I wonder how Rust would play with my D code
[04:29:12] <dymk> it can call into C so there shouldn't be a huge problem there
[04:29:23] <dymk> GC n' stuff might be more problematic 
[04:29:32] <dymk> oh, that reminds me, does Rust do shared libraries? 
[04:29:41] <dbaupp> Using Rust and D together! you'd have to be shunned by both communities :P
[04:29:43] <dbaupp> yes
[04:30:37] <dbaupp> compiling `#[no_mangle] pub extern "C" fn foo() {}` with `rustc --dylib foo.rs` will create libfoo-....so with a foo symbol.
[04:30:42] <scp> lolol
[04:30:49] <dymk> awww yeahh
[04:30:55] <dymk> and support is good across platforms? 
[04:31:12] <dbaupp> I believe so, the compiler uses shared libraries
[04:31:14] <dymk> and ha, yeah that might make a few people queazy on the subreddit and dlang forums
[04:31:19] <dbaupp> (last I checked anyway.)
[04:31:26] <dymk> good enough for me
[04:31:43] <dymk> I'd like to try porting parts of my pretty good sized application written in D to rust at some point
[04:31:47] <dbaupp> dynamic linking was actually the only thing supported by the compiler until recently.
[04:32:30] <dymk> ah, well good to know that it supports static linking too then
[04:33:55] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[04:34:07] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[04:34:24] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[04:35:11] <Tobba> ugh, lifetimes
[04:35:16] *** Quits: sproing (Mibbit@moz-4014DDC7.ga.at.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:35:21] <Tobba> I have a function like
[04:35:22] <Tobba> fn scan<'b>(&'b mut self, size: uint) -> Option<&'b mut LANode> {
[04:35:39] <Tobba> this fails with lifetime errors though
[04:35:40] <Tobba> 		let mut block = self.root;
[04:35:40] <Tobba> 		let mut cursor = block.root();
[04:36:12] <Tobba> root is defined like root: LABlock<'a>, dunno if that affects anything
[04:37:46] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[04:40:09] *** Quits: blank_na1e (blank_name@7D3AA8DE.3C877FC9.53C6B850.IP) (Quit: leaving)
[04:40:20] *** Quits: quux00 (Mibbit@344611D4.5777E33B.DBA4CEF6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:40:27] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[04:41:17] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Ping timeout)
[04:41:21] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:41:46] *** Joins: blank_name (blank_name@7D3AA8DE.3C877FC9.53C6B850.IP)
[04:41:48] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[04:41:57] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Client exited)
[04:44:06] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[04:44:09] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[04:44:10] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[04:44:22] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[04:45:05] *** Quits: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net) (Quit: Leaving.)
[04:45:14] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:45:58] <brson> wting: sorry, what was the q?
[04:47:31] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Connection reset by peer)
[04:47:37] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[04:50:03] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[04:53:53] *** Quits: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au) (Quit: james)
[04:54:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:57:10] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:58:54] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:59:03] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[05:00:49] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[05:01:44] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[05:02:23] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[05:02:26] *** Quits: jroweboy (Mibbit@moz-18814A6B.provo.static.broadweavenetworks.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:02:42] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[05:09:01] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[05:09:15] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[05:09:23] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[05:09:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:09:37] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[05:10:18] <wting> brson: np it's the weekend. I asked them here: https://github.com/mozilla/rust/issues/11362
[05:10:31] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[05:10:57] <Tobba> gonna explore how well rust works with files
[05:11:10] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:11:22] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Ping timeout)
[05:11:46] <wting>  /w 17
[05:11:50] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[05:12:14] *** Joins: twi (Adium@moz-3AABC733.pa.vic.optusnet.com.au)
[05:12:19] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[05:12:44] <Tobba> why does File not support reading null terminated strings
[05:12:46] <Tobba> goddamnit
[05:13:00] <Tobba> now I'm gonna have to write some hilariously shitty implementation of that
[05:13:17] <Tobba> which wont work with unicode so ughhhh
[05:13:29] <Tobba> BACK TO KERNEL DEV
[05:15:36] <dbaupp> Tobba: http://static.rust-lang.org/doc/master/std/io/trait.Buffer.html#method.read_until
[05:16:11] <Tobba> oh
[05:16:16] <Tobba> BACK TO APPLICATIONS
[05:16:57] <Tobba> any idea about those lifetime issues I had earlier btw dbaupp
[05:17:04] <Tobba> I'd like to get the memory allocator to work just once
[05:17:11] <Tobba> its always the goddamn part I get stuck on
[05:17:44] <dbaupp> Tobba: without seeing the code, I'd guess that needs to return &'a mut LANode
[05:17:59] <dbaupp> since it's coming out of something with lifetime <'a>
[05:18:16] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:18:24] *** Joins: tbttbd (Mibbit@7ED96279.64D6480.C1D0908A.IP)
[05:18:30] <brson> wting: left a comment
[05:18:55] *** Quits: tbttbd (Mibbit@7ED96279.64D6480.C1D0908A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:18:59] <Tobba> still says that
[05:19:00] <Tobba> let mut cursor = block.root();
[05:19:03] <Tobba> is only valid for the current block
[05:20:17] <dbaupp> what's .root() return
[05:20:18] <dbaupp> ?
[05:20:30] <Tobba> 	pub fn root<'b>(&'b mut self) -> (&'b mut LANode) {
[05:20:30] <Tobba> 		&mut self.nodes[127]
[05:20:30] <Tobba> 	}
[05:20:36] <Tobba> that should probably return 'a shouldent it
[05:20:37] <Tobba> bollocks
[05:21:09] <dbaupp> well, it can't
[05:21:14] <dbaupp> show me the code
[05:21:19] <Tobba> all the code? one sec
[05:21:42] <Tobba> http://pastebin.com/PaSxam0n
[05:21:55] <Tobba> should actually be able to run that right off as it doesnt do any memory juggling yet
[05:23:48] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[05:23:55] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[05:25:01] <dbaupp> what's the error message point to?
[05:25:26] <Tobba> the block.root() line
[05:25:30] <Tobba> 133:3 note: borrowed pointer must be valid for the lifetime &'a  as defined on the block at 51:58...
[05:25:34] <dbaupp> ah, I can compile it
[05:25:42] <dbaupp> (and see the errors)
[05:25:46] <Tobba> yeah thats a bit easier
[05:26:37] <dbaupp> woah, woah
[05:26:54] <Tobba> thats with some code torn out though
[05:27:00] <dbaupp> matches inside an expression inside a function call inside the `match ... {` part of another match
[05:27:04] <dbaupp> o_O
[05:27:08] <dbaupp> haha
[05:27:12] <Tobba> tree structures man
[05:27:14] <Tobba> trees
[05:27:36] <Tobba> I like this part the most
[05:27:36] <Tobba> match best_fit(size, match linearLeft { Some(node) => (node.pos + node.size as uint) - cursor.pos, None => 0 }, (cursor.pos + cursor.size as uint) - match linearRight { Some(node) => node.pos, None => self.space }) {
[05:28:34] <Tobba> if you actually run that atm it'll fail because it doesnt even use converge atm (I tore that out because it was just making all the lifetime issues worse)
[05:29:44] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[05:29:51] *** Joins: leecbaker (Mibbit@F520693A.A9EDE10F.D02E0F32.IP)
[05:31:55] <dbaupp> Tobba: ok, I fixed the lifetime issues
[05:32:06] <Tobba> awesome
[05:32:07] <dbaupp> scan<'b>(&'b mut self) -> ...
[05:32:10] *** Quits: new_one (new_one@338D8DF9.4C461BEC.59A381B9.IP) (Client exited)
[05:32:12] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[05:32:16] <Tobba> ah
[05:32:22] <dbaupp> and then `let block = &mut self.root`
[05:32:23] <wycats_> hm what am I doing wrong here: https://gist.github.com/wycats/8379595
[05:32:29] <dbaupp> rather than `let block = self.root`
[05:32:38] <Tobba> that also actually makes a lot of sense
[05:32:57] <dbaupp> wycats_: you can't .write to an immutable object
[05:33:06] <wycats_> what's the immutable object?
[05:33:07] <dbaupp> Tobba: there are still a pile of illegal-move errors though
[05:33:10] <wycats_> self is mutable
[05:33:14] <dbaupp> https://gist.github.com/wycats/8379595#file-main-rs-L26
[05:33:18] <Tobba> dbaupp: yeah not sure how to solve those
[05:33:27] <dbaupp> Tobba: std::util::replace
[05:33:34] <dbaupp> oh, you're not using libstd
[05:33:38] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[05:33:41] <wycats_> dbaupp: I need to mark it as mutable in the struct?
[05:33:42] <Tobba> can just reimplemnt it
[05:33:45] <Tobba> whats it do
[05:33:51] <dbaupp> http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/util.rs.html#51-54
[05:33:55] <wycats_> if so, how?
[05:33:59] <dbaupp> wycats_: &'a mut ....
[05:34:42] <Tobba> hm weird, I cant get that fix to work
[05:34:47] <Tobba> fn scan<'b>(&'b mut self, size: uint) -> Option<&'a mut LANode> {
[05:34:54] <Tobba> let mut block = &mut self.root;
[05:34:55] <Tobba> was there anything else
[05:35:21] <Tobba> ah
[05:35:24] <Tobba> making the 'a a 'b seems to work
[05:35:50] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[05:36:59] <Tobba> not sure how I would use replace() for this though
[05:37:14] <dbaupp> when you're trying to move out to return
[05:37:29] <dbaupp> match replace(&mut whatever, None)  { ... }
[05:38:04] <dbaupp> and then return the value if you need to use it later
[05:38:15] <Tobba> it doesnt actually modify anything though
[05:38:18] <dbaupp> (or just move out properly (i.e. drop the `ref`) and set it again later.)
[05:38:20] <Tobba> or well, shouldent
[05:39:01] <Tobba> its all just logic that figures out if to go left or right, or if it found an optimal node returns it, which is kinda the issue
[05:39:08] <Tobba> basicaly, I dont think I'm seeing it
[05:39:36] *** Quits: mitja (Mibbit@7F52106C.E259A4FB.3E006838.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:39:51] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[05:40:01] <dbaupp> gtg for now, sorry
[05:40:18] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[05:41:46] *** Joins: derek_c (derek@3C51AF14.E9B0596F.C34016C.IP)
[05:42:07] <derek_c> Can someone explain this line to me?  https://github.com/mozilla/rust/blob/master/src/libstd/rc.rs#L79
[05:42:09] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[05:42:26] <derek_c> it seems like read_ptr doesn't have any side effects. not sure what this line does here
[05:44:30] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[05:44:40] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[05:44:48] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[05:44:55] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:47:23] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[05:48:20] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:48:26] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[05:48:58] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[05:49:14] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[05:49:40] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:49:50] *** Quits: leecbaker (Mibbit@F520693A.A9EDE10F.D02E0F32.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:50:02] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[05:50:07] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[05:50:36] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[05:50:42] <strcat> derek_c: it takes *T and returns T, so the dtor will be called
[05:51:03] <strcat> there's a comment explaining it in case it's not obvious ;p
[05:51:34] <derek_c> strcat: dtor of what?
[05:51:44] <strcat> the destructor of the contained value
[05:51:55] <strcat> the value read_ptr returns
[05:52:30] <strcat> it wants to destroy the value behind the pointer so it converts *T to T to make the destructor get called
[05:53:27] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[05:53:46] <derek_c> strcat: so the idea is that, say you do `let p = read_ptr(self.borrow())`, when p goes out of scope, the destructor of the contained value gets called?
[05:54:21] <strcat> you have some pointer *T
[05:54:37] <strcat> read_ptr copies out the value T, and then when it goes out of scope, the drop method is called
[05:54:54] <strcat> if rust allowed you to call drop in unsafe code, that'd work too
[05:54:57] <strcat> but it doesn't
[05:55:10] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[05:55:30] <derek_c> hmm interesting
[05:55:33] <derek_c> strcat: thanks!
[05:55:46] *** Quits: biardjd (kzzch@moz-BB97B490.washdc.fios.verizon.net) (Quit: WeeChat 0.4.1)
[05:56:35] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[05:56:44] <wycats_> https://gist.github.com/wycats/8379595
[05:56:46] <wycats_> halp
[05:56:55] <wycats_> this compiler error is impenetrable
[05:57:55] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:58:03] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:58:07] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:59:41] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:01:50] <wycats_> I don't understand the "lifetime cannot outlive the call at 99:4" message
[06:01:53] <wycats_> why not?
[06:04:39] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Quit: Leaving...)
[06:05:00] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[06:06:16] *** Quits: KindOne (KindOne@CEBC0289.7E8839F4.34F73994.IP) (Ping timeout)
[06:08:10] <derek_c> where is the implementation for the managed pointer @?
[06:09:59] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:10:08] *** Joins: KindOne (KindOne@moz-D2943539.dynamic.ip.windstream.net)
[06:11:09] *** Quits: derek_c (derek@3C51AF14.E9B0596F.C34016C.IP) (Quit: Leaving)
[06:11:24] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[06:11:35] *** Quits: twi (Adium@moz-3AABC733.pa.vic.optusnet.com.au) (Quit: Leaving.)
[06:11:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:13:39] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[06:18:25] *** Joins: sprog (Mibbit@moz-38276AA6.guam.net)
[06:19:34] *** Joins: sedman (sedman@126A3CA2.9D2FC6E7.1E901589.IP)
[06:20:19] <sprog> Is there a function to convert from option to result taking an error-string as an argument?
[06:20:38] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[06:20:44] <sprog> Normally when I want something from the option/result APIs, it's staring me in the face...
[06:24:58] <strcat> decoder: they're obsolete, you probably want to look at std::rc
[06:25:00] <strcat> er
[06:25:05] <strcat> nvm, he left
[06:25:07] <strcat> decoder: ignore that ;]
[06:25:22] <strcat> anyway I now realize he *was* looking at std::rc...
[06:25:46] <benh> sprog: Maybe my_opt.map_or(Err("welp"), Ok) :|
[06:26:19] <sprog> Seems like this would be a pretty common thing to want
[06:28:01] <benh> (or maybe .map(Ok).unwrap_or_else(|| Err(~"welp")) ?)
[06:28:02] <benh> (gee)
[06:29:15] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Quit: Leaving.)
[06:37:18] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[06:37:59] * bjz wants a |+| operator :/
[06:38:22] <sprog> what's |+| for?
[06:38:41] <bjz> binary group operator
[06:39:00] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:39:04] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:40:07] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[06:40:33] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[06:40:45] *** Joins: ktf (Mibbit@moz-B1FB7050.lsanca.fios.verizon.net)
[06:42:24] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[06:43:02] <sprog> group operator?
[06:43:26] <sprog> goooooogling
[06:43:30] *** Quits: Kxepal (Miranda@moz-33D0A42F.pppoe.mtu-net.ru) (Quit: Kxepal)
[06:43:45] *** Joins: Kxepal (Miranda@moz-33D0A42F.pppoe.mtu-net.ru)
[06:43:58] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:44:03] *** Quits: KindOne (KindOne@moz-D2943539.dynamic.ip.windstream.net) (Ping timeout)
[06:47:23] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[06:47:30] <bjz> sprog: https://github.com/bjz/num-rs/blob/master/src/lib.rs#L30-L42
[06:48:02] *** Joins: KindOne (KindOne@moz-D69C8515.dynamic.ip.windstream.net)
[06:49:09] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[06:50:08] <bjz> klutzy: ohai
[06:50:23] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[06:50:44] <Cevn> hello 
[06:51:02] <bjz> o/
[06:51:07] <Cevn> \o
[06:51:08] <bjz> welcome
[06:51:21] <bjz> haven't seen you here before - are you neW?
[06:51:26] <bjz> *new
[06:51:35] <Cevn> i'm quite bad at rust so i apologize in advance for my basic understanding 
[06:51:37] <Cevn> yes 
[06:51:41] <bjz> no worries!
[06:51:55] <dbaupp> let Cevn = IRCVisitor::new();
[06:51:55] <bjz> only one way you learn
[06:52:09] <Cevn> Hehe 
[06:52:37] <Cevn> I'm trying to write a simple script to average the float inputs from sysargs
[06:53:00] <Cevn> But i'm finding it difficult to translate the Option<f64> into a f64
[06:53:05] <bjz> if Cevn.get_irc_visits() <= 1 { self.set_be_nice(true) }
[06:53:12] <Cevn> give me a sec to pastebin the code 
[06:53:20] <Cevn> Guess I only get one nice visit lol
[06:54:14] <bjz> Have you used Option or Maybe types before?
[06:54:22] <bjz> like, in Haskell or Scala?
[06:54:24] <Cevn> Nope, this is my first effort 
[06:54:33] <Cevn> http://pastebin.com/rbq7vTie
[06:54:35] <bjz> if not, Option<f64> is like a nullable f64
[06:54:59] <bjz> Rust has no null, you have to be explicit about when you want it
[06:55:14] <dbaupp> bjz: `if true { bjz.set_be_nice(true) }` ;P
[06:55:16] <bjz> and Rust forces you to check if its null or not
[06:55:26] <Cevn> also, i'm getting another error can't move out of dereference &e, not sure where it's coming from because it's new hehe 
[06:55:32] <Edwards> Cevn: That looks fine, but you're not doing anything with the result of the match
[06:55:47] <bjz> ohh, I see
[06:56:13] <bjz> Cevn: let nums = args.map(|&e| from_str::<f64>(e).or(0.0));
[06:56:24] <bjz> I think that's the current method name
[06:56:31] <bjz> let me check
[06:57:03] <bjz> oh
[06:57:07] <bjz> Cevn: let nums = args.map(|&e| from_str::<f64>(e).unwrap_or(0.0));
[06:58:25] <Cevn> hmm 
[06:58:46] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:59:02] <Cevn> still says 
[06:59:10] <Cevn> average.rs:5:26: 5:28 error: cannot move out of dereference of & pointer
[06:59:20] <Cevn> did i miss something
[06:59:26] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[06:59:38] <bjz> no need for the match with the unwrap_or
[06:59:45] <Cevn> I did take it out 
[06:59:53] <bjz> hmm, post the error?
[07:00:22] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:00:29] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:00:51] <Cevn> average.rs:5:26: 5:28 error: cannot move out of dereference of & pointer
[07:00:54] <Cevn> average.rs:5     let nums = args.map(|&e| from_str::<f64>(e).unwrap_or(0.0)); ^~
[07:01:07] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:01:13] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:01:17] <Edwards> rusti: os::args().map(|&e| from_str::<f64>(e).unwrap_or(0.0))
[07:01:27] <Edwards> :(
[07:01:29] <bjz> wierd, doesn't for me
[07:01:33] <Cevn> oh 
[07:01:45] <Cevn> i can do that, i just instantiated args already
[07:02:04] <dbaupp>  os::args().map(|e| from_str::<f64>(*e).unwrap_or(0.0)) should work
[07:02:55] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:03:00] <dbaupp> (change the |&e| to |e| and the use of e to *e)
[07:03:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:03:28] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[07:04:14] <Cevn> Hey 
[07:04:17] <Cevn> it worked 
[07:04:20] <bjz> Cevn: https://gist.github.com/bjz/8381830
[07:04:47] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:04:51] <Cevn> whoa 
[07:04:53] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:04:55] <Cevn> what's the fold 
[07:05:10] <Cevn> let's not blow my mind too hard here 
[07:05:24] <ktf> http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29
[07:05:36] <dbaupp> bjz: could also just be `.filter_map(|e| from_str::<f64>(*e))`
[07:05:44] <bjz> oooh!
[07:06:40] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:06:45] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:07:16] <bjz> Cevn: it's a way of abstracting the accumulator pattern
[07:07:23] <Cevn> i see
[07:07:28] <Cevn> or i think i do
[07:07:33] <Cevn> the syntax is a bit odd though
[07:07:35] <bjz> so that you don't need a raw loop
[07:08:18] <bjz> the mutable variable is hidden away inside the implementation of fold, rather than flapping around in your code
[07:08:25] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:08:32] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:08:34] <bjz> so with: .fold(0.0, |acc, x| acc + x)
[07:08:55] <enix> Is there a reason that this doesn't compile, or is it a rust bug: https://gist.github.com/DaGenix/8381853 ?
[07:09:11] <bjz> Cevn: it gets an initial value of 0.0, then starts iterating through the vector
[07:09:38] <bjz> Cevn: the second argument is an anonymous function
[07:10:14] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:10:18] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:10:23] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:10:47] <Cevn> I see 
[07:11:18] <Cevn> so over every iteration, after acc initializes to 0.0, acc + x will run and the final result is the accumulated value? 
[07:11:25] <bjz> yep
[07:11:44] <Eridius> enix: if you implement a trait in terms of another trait, you can't provide any more implementations
[07:12:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:12:03] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:12:05] <Eridius> enix: the problem is rust cannot guarantee that S1 doesn't conform to T2, and if it did then you'd have an ambiguous implementation of T1
[07:12:11] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:13:04] <Cevn> using filter_map seems to lead to incorrect values due to args.len getting bigger with invalid input but the element not defaulting to 0.0 
[07:13:11] <Cevn> so i guess i'll stick with unwrap_or 
[07:13:17] <enix> is there a fundamental reason why it can't, or is this a limintation that could be overcome?
[07:13:19] <Cevn> alright thanks guys my mind has been opened 
[07:13:30] <bjz> so: fn fold<T, U>(xs: ~[T], init: T, f: |U, T| -> U) -> U { let mut acc = init; for x in xs { acc = f(acc, x); } acc }
[07:13:36] <bjz> Cevn: I think
[07:13:44] <enix> In my very specific case, I think it would be fine, but I don't know about the more general one
[07:13:52] <bjz> Cevn: might have got something wrong, but that's the gist of it
[07:13:53] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:13:56] <Cevn> i see 
[07:14:00] <Cevn> that's handy 
[07:14:02] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:14:10] <Cevn> it's like a convenient loop 
[07:14:28] <bjz> Cevn: but that's a naive implementation, the std implements it using iterators
[07:14:38] <dbaupp> enix: it could allow that exact instance (a type and then a trait-bounded generic one, such that the type doesn't implement the trait), but in general
[07:15:05] <dbaupp> enix: i.e. impl<T: SomeTrait> Trait for T {} impl<T: SomeOtherTrait> Trait for T {} would have to be illegal
[07:15:34] <bjz> Cevn: this is one of those things those crazy functional programmers talk about. the idea is to abstract away mutable state
[07:15:42] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:15:50] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:16:18] <Cevn> hmm
[07:16:42] <Cevn> so i don't have to worry about mutation because all of it happens within the fold? 
[07:17:31] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:17:35] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Leaving...)
[07:17:41] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:17:43] <Cevn> also, (functional programming being my weak point) why abstract away mutable state? 
[07:18:21] *** Joins: tristramh (tris@moz-EC3C0522.lns20.syd6.internode.on.net)
[07:18:36] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[07:18:53] <strcat> Cevn: it abstracts away low-level details
[07:19:00] <enix> ah, ok, I think I see. Thanks everyone!
[07:19:08] <strcat> rust provides iterators with a bunch of lazy adaptors + convenient methods like fold
[07:19:18] <Cevn> i see 
[07:19:22] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:19:28] <strcat> so for example, you can map a function against an iterator and it doesn't do any work until you start consuming results
[07:19:29] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:19:34] <strcat> and you can use infinite iterators
[07:20:10] <strcat> in haskell, lazy evaluation makes lists behave like that for you, since it won't evaluate them until they're needed
[07:20:15] <Cevn> yeah 
[07:20:30] <Cevn> i've used enough haskell to know how bad i am at haskell 
[07:20:50] <Cevn> but, lazy evaluation + convenience methods seems good
[07:20:53] <Cevn> what does infinite iterators mean? 
[07:21:10] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:21:20] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:21:20] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:21:46] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[07:21:47] <strcat> Cevn: for example count(0, 1) will infinitely count upwards
[07:21:51] <pyon> Cevn: In Rust, an iterator that always returns Some(whatever), no matter how many times you call iter.next().
[07:21:54] <strcat> 0, 1, 2, 3, 4, 5, 6, ... until it wraps
[07:22:02] <strcat> or with a big integer, until the integer is so large you go OOM ;p
[07:22:19] <strcat> count(0u8, 1)
[07:22:35] <strcat> 0, 1, 2, ..., 254, 255, 0, 1, 2, 3, ....
[07:23:02] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:23:08] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:23:08] <Cevn> when do you consume results using an infinite iterator? 
[07:23:09] <pyon> Cevn: An iterator's next method returns None when there is nothing more to iterate over. To always return Some(whatever) means that, conceptually, the list of things to iterate over is infinite.
[07:23:11] *** Joins: twi (Adium@moz-8547F762.pa.vic.optusnet.com.au)
[07:23:20] <dbaupp> strcat: does `count` actually wrap?
[07:23:26] <strcat> dbaupp: yes
[07:23:31] <strcat> intended to be that way
[07:23:44] <strcat> Cevn: well, here's a simple example
[07:23:47] <strcat> range(0, 4).cycle()
[07:23:54] *** Quits: ktf (Mibbit@moz-B1FB7050.lsanca.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:23:57] <strcat> 0 1 2 3 0 1 2 3 0 1 2 3 forever
[07:24:05] <pyon> Cevn: "when do you consume" --> as with any iterator, whenever you want
[07:24:13] <strcat> range(0, 4).cycle().zip(iter)
[07:24:15] <strcat> now you get
[07:24:39] <strcat> (0, a), (1, a2), (2, a3), (3, a4), (0, a5), etc. until the end of iter
[07:24:40] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[07:24:48] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:24:50] <bjz> Cevn: strcat did much of the work on our iterators :)
[07:24:59] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:25:15] <Cevn> bjz: haha damn 
[07:25:35] <Cevn> i feel like i am wasting everyone's time here lol 
[07:25:47] <bjz> no no, its fun!
[07:25:47] <bjz> we like to help
[07:26:12] <bjz> because you then help other folks :)
[07:26:22] <strcat> Cevn: what 'cycle' does is is clone the iterator itself when it gets to the end - doesn't actually need to allocate
[07:26:23] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:26:32] <strcat> well, sorry, clones it *at the start*
[07:26:45] <strcat> let xs = [1, 2, 3]; xs.iter().cycle()
[07:26:54] <bjz> Cevn: secretly, strcat is very proud of his iterators, and he just likes showing off
[07:26:56] <strcat> vector iterator is 2 ptrs under the hood, it just saves a copy
[07:27:00] <strcat> bjz: heh ;p
[07:27:38] <Cevn> strcat: i am reading up on zip now to keep up :p 
[07:27:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:28:01] <bjz> Cevn: this will help if you ever have another go at haskell
[07:28:09] <strcat> Cevn: takes [x, x2, x3], [y, y2, y3] and makes [(x, y), (x2, y2), (x3, y3)]
[07:28:28] <strcat> sadly rust doesn't have variadic generics so you can't make one taking 3 sequences and making 3-tuples :(
[07:28:32] <strcat> have to nest tuples
[07:28:40] <strcat> you could hardcode each one...
[07:28:45] <bjz> cmr: is doing some haskell to now - I think he said he's found it easier after Rust
[07:28:49] <Cevn> bjz: well, why use haskell when most of the 'functional' stuff seems to be in rust with syntax that means something to me? serious question 
[07:28:59] <strcat> Cevn: rust isn't really very functional
[07:29:07] <strcat> iterators are certainly very composable, which feels functional
[07:29:10] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[07:29:26] <strcat> Cevn: in haskell you can write an algorithm to say, infinitely generate all possible moves in some game as a tree
[07:29:28] <bjz> agreed, strcat 
[07:29:41] <strcat> then your code consuming that data causes it to be generated only as-needed
[07:29:43] <strcat> etc.
[07:29:50] <strcat> much more composable than an ad-hoc solution like iterators
[07:29:53] *** Quits: sedman (sedman@126A3CA2.9D2FC6E7.1E901589.IP) (Ping timeout)
[07:29:55] <Cevn> strcat: i see 
[07:29:58] <strcat> where someone (me) had to write a bunch of state machines by hand
[07:30:14] <Eridius> laziness is very cool
[07:30:17] <Eridius> but space leaks are nasty
[07:30:20] <strcat> although rust could have yield
[07:30:31] <Eridius> strcat: functional and lazy are orthogonal principles
[07:30:32] <strcat> and that'd solve the very specific case of forward streams
[07:30:32] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[07:30:36] <Cevn> strcat: lol.... i just took finite automata.. i don't want to think about that again any time soon.. if that's what you're referring to 
[07:30:46] <strcat> Eridius: kind of, but laziness makes pure functional programming much saner
[07:30:50] <pyon> strcat: It should not be hard to provide MLton/OCaml-like facilities for lazy evaluation. (Admittedly, not as convenient as having laziness out of the box as in Haskell.)
[07:30:51] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:30:52] <Eridius> strcat: agreed
[07:31:05] <strcat> Eridius: i.e. you can make cyclical data structures, write algorithms with better time complexities, etc.
[07:31:24] *** Quits: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au) (Quit: z0w0)
[07:31:40] <strcat> pyon: well, we do have 'proc' which is a great building block for laziness
[07:31:43] <strcat> since you can move out of it
[07:32:04] <Cevn> alright, I've got what i came for and more, which hopefully will be a trend here
[07:32:16] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:32:19] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:32:26] <Cevn> i will be back later haha
[07:32:31] <Cevn> thanks for the help all 
[07:32:32] <strcat> pyon: anyway lazy will end up non-Freeze :(
[07:32:47] <dbaupp> #[unsafe_freeze]
[07:32:52] <strcat> unless you use &mut self somewhere...
[07:32:56] *** Parts: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) ()
[07:33:14] * pyon still has to understand what exactly Freeze is for.
[07:33:15] <strcat> dbaupp: would cause problems for optimizing based on Freeze
[07:33:28] <strcat> pyon: for example, Arc requires Freeze because it doesn't use a lock
[07:33:37] <strcat> Freeze == inherited mutability, or always immutable (respects the rules)
[07:33:48] <strcat> almost everything is Freeze...
[07:33:59] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:34:03] <dbaupp> strcat: true enough.
[07:34:10] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:34:13] <pyon> strcat: Why couldn't I, say, freeze a File?
[07:34:19] <dbaupp> you can
[07:34:29] <strcat> pyon: it just means it follows the mutability rules
[07:34:34] <pyon> Ah.
[07:34:41] <dbaupp> The only non-Freeze things I can think of are RefCell, Cell and @mut (now removed)
[07:34:42] <strcat> freezing is something that happens to a rust type when you borrow & from it
[07:34:57] <strcat> pyon: basically, freezing requires ownership
[07:35:09] <strcat> pyon: so either a type is owned and inherits mutability from the owner, or must be immutable
[07:35:12] <strcat> or... it can break the rules
[07:35:21] <pyon> Ah, then the problem in my code is not File but MutexArc. :-|
[07:35:23] <strcat> RefCell is non-Freeze, and implements *dynamic* borrow checking
[07:35:33] <strcat> pyon: yeah that's non-Freeze
[07:35:43] <pyon> Makes sense.
[07:35:51] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:35:59] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:36:02] <strcat> pyon: you could... probably get away from saying MutexArc is Freeze
[07:36:09] <strcat> we'd have to clearly define what Freeze means
[07:36:12] <strcat> in terms of optimizations
[07:36:35] <strcat> it could mean 'respects mutability rules, or ignores them but is thread-safe'
[07:36:58] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[07:37:29] <pyon> What I would really, really, really like is for File to provide pread and pwrite methods.
[07:37:32] <strcat> being able to say that &x is always immutable for Freeze types (most things) is nice
[07:37:41] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:37:49] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:37:49] <strcat> pyon: I thought it did...
[07:38:05] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[07:38:20] <pyon> strcat: The one that provides pread and pwrite is RtioFileStream.
[07:38:27] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[07:38:31] <pyon> strcat: But not std::io::fs::File.
[07:39:08] <strcat> what's the difference? ;s
[07:39:21] <pyon> Getting a ~RtioFileStream is far messier. (Get a LocalIo, use that to get an IoFactory, use that to open a ~RtioFileStream.)
[07:39:29] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:39:38] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:40:06] <pyon> LocalIo and IoFactory seem to be underlying details of the runtime's services.
[07:40:36] <pyon> Opening a File is as simple as doing File::open_mode(&path, Open, ReadWrite).
[07:41:09] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[07:41:16] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[07:41:20] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:41:25] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[07:41:29] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:43:12] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[07:43:12] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:43:16] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:44:39] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[07:44:56] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:45:07] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:45:12] *** Joins: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net)
[07:46:33] <pyon> Alternatively, I could use a method for memory-mapping files that does not require obtaining a file descriptor the POSIX way, and where the memory map contains a "&mut [u8]" instead of a "*mut u8". Sadly, std::os::MemoryMap is still too C-ish.
[07:47:10] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[07:47:39] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:47:58] <dbaupp> you can write a higher-level interface over that, right?
[07:48:32] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[07:50:17] <strcat> hm, how are you actually supposed to use MemoryMap safely?
[07:50:22] <pyon> dbaupp: I could make a "struct MMap { fdes: c_int, mmap: MemoryMap }" that implements Drop, but then MMap::drop would attempt to close the file descriptor *before* MemoryMap::drop calls munmap, because fields are destroyed after structs.
[07:50:24] <strcat> missing a method returning a slice
[07:51:15] <dbaupp> strcat: I didn't say safe, just higher-level ;)
[07:51:36] <strcat> dbaupp: well I know you can write a safe interface for it
[07:51:43] *** Joins: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de)
[07:51:43] <strcat> just wondering why it doesn't have one ;p
[07:51:47] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:52:03] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[07:52:04] <pyon> strcat: My idea was "slicing" the mapped memory and assigning guaranteed non-overlapping slices to whatever tasks need different parts of the memory map.
[07:52:38] <dbaupp> strcat: because no-one's written it
[07:52:39] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[07:52:51] <strcat> pyon: the issue will then be writing it in a way that gives those slices valid lifetimes ;]
[07:53:04] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:53:16] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:53:46] <strcat> ofc you could put the MemoryMap itself in an Rc
[07:54:13] *** Joins: leecbaker (Mibbit@F520693A.A9EDE10F.D02E0F32.IP)
[07:54:20] <pyon> That would not be very useful: only one task could use the MemoryMap at the time, even if all tasks use non-overlapping slices of it.
[07:54:24] <pyon> at a* time
[07:54:40] <strcat> pyon: ah I see what you mean
[07:54:54] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[07:54:58] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:55:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:55:38] <dbaupp> fn run_parallel(&self, || -> proc(&mut [u8]))
[07:56:12] <dbaupp> mmmap.run_parallel(|| proc(bytes) { bytes[0] = 1 } )
[07:56:18] <dbaupp> with a pile of unsafety \o/
[07:56:40] <strcat> rust's safety focus can be pretty frustrating...
[07:56:40] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[07:56:47] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:56:55] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:56:56] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:57:03] *** Joins: alonlevy (alon@moz-30492E92.bb.netvision.net.il)
[07:57:11] <pyon> Frustrating or not, I have embraced it. I am not going to go back to C or C++.
[07:57:25] <pyon> Battling Rust's borrow checker is far better than running programs through gdb.
[07:57:36] <dbaupp> apparently the servo people really like the safety focus
[07:57:56] <lurk_> How would I go about reading a line from stdin?
[07:57:57] <dbaupp> (which makes sense, since Rust is being written for servo.)
[07:58:11] <strcat> servo was built on @ shared between tasks ;p
[07:58:12] <dbaupp> lurk_: http://static.rust-lang.org/doc/master/std/io/trait.Buffer.html#method.read_line
[07:58:15] <strcat> dunno if that's mostly gone yet
[07:58:25] <dbaupp> strcat: presumably they're working on it
[07:58:30] <dbaupp> given @ is going
[07:58:38] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[07:58:42] <strcat> it probably still has @mut
[07:58:43] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[07:58:50] <dbaupp> yeah
[07:59:05] <dbaupp> they had to cherry pick a commit for the most recent rust upgrade
[07:59:10] <dbaupp> (which is running through their bors now)
[07:59:16] <bjz> pyon: \o/
[07:59:25] <dbaupp> because they couldn't go all the way to head without de-@muting
[07:59:25] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:59:30] <bjz> pyon: how long have you been using Rust?
[07:59:57] <pyon> bjz: Toying with it, quite a long while. Really seriously, two weeks.
[08:00:03] <bjz> haha
[08:00:15] <bjz> coolies
[08:00:19] <lurk_> dbaupp: thanks
[08:00:22] <bjz> C++-er?
[08:00:23] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:00:33] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[08:00:34] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:00:34] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[08:01:05] <pyon> bjz: Ditched C++ for Haskell a few years ago, but turns out I still missed the deterministic object lifetimes.
[08:01:06] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:01:28] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[08:01:30] <bjz> pyon: ah, that's interesting
[08:01:45] <bjz> pyon: using haskell in production?
[08:01:53] <pyon> bjz: Using VB6 in production, at work. :-(
[08:02:11] <bjz> haha
[08:02:27] <bjz> so... has haskell helped you with you vb programming?
[08:02:28] <bjz> xD
[08:02:57] <strcat> pyon: I hope they use C# for new stuff...
[08:03:15] <pyon> strcat: no, we're firmly stuck in the past
[08:04:00] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:04:01] <pyon> bjz: lol, I made a Haskell tool for automating some of the repetitive parts of the job: creating a bunch of SQL Server tables, putting the corresponding controls in a VB6 form, moving the data back and forth between the form's controls and the database... besides that, Haskell hasn't helped much (not Haskell's fault, really)
[08:04:06] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:04:14] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[08:04:24] *** Joins: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP)
[08:04:25] <strcat> C#: rust with data races, non-deterministic resource management, awesome async/generator support, neat monad support masquerading as an SQL-like DSL (LINQ)
[08:04:30] * strcat somewhat likes C# ;p
[08:04:48] <bjz> pyon: VB didn't get lambdas along with C#? :D
[08:04:56] <pyon> bjz: I meant the old VB6, not VB.NET
[08:05:06] <bjz> 0_0
[08:05:14] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[08:05:18] <pyon> so not even inheritance
[08:05:27] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[08:06:32] <bjz> pyon: do the new versions of VB have HOFs like C#?
[08:06:36] <bjz> (curious)
[08:06:52] <bjz> I know it has linq support
[08:07:15] <strcat> bjz: afaik vb.net is totally different
[08:07:17] <pyon> bjz: yep but VB.NET is so different than VB6 that it's better to think of them as unrelated languages that happen to share keywords
[08:07:25] <strcat> bjz: it's C# with words instead of braces
[08:07:28] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:07:31] <pyon> strcat: yep
[08:07:35] <bjz> haha
[08:07:38] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:09:22] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:09:27] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:09:34] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[08:09:35] <pyon> How can I get a "&mut [u8]" from a "*mut u8"?
[08:10:10] <strcat> pyon: there's something like from_buf
[08:10:16] <strcat> everything got renamed
[08:10:29] <pyon> oh http://static.rust-lang.org/doc/0.9/std/vec/raw/fn.buf_as_slice.html
[08:10:38] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:10:55] *** Joins: derek_c (derek@88C92731.BDDB420A.DD630FEE.IP)
[08:11:11] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:11:17] <bjz> from_buf_raw a well, but that copies
[08:11:18] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:11:23] <bjz> *as well
[08:11:37] <derek_c> can you use a macro in another macro?
[08:11:45] <bjz> yep
[08:11:49] <derek_c> I mean, in the definition of another macro?
[08:11:54] <derek_c> I'm getting a strange error
[08:11:55] <bjz> but they expand inside out
[08:12:05] <derek_c> bjz: what do you mean?
[08:12:24] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:12:25] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[08:12:31] *** Quits: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[08:12:58] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:13:06] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:13:45] *** Joins: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP)
[08:14:48] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:14:59] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:15:07] <derek_c> actually, my bad
[08:15:15] <derek_c> the error I was getting has nothing to do with that
[08:15:37] <bjz> derek_c: "The second, related, difference is that the evaluation order of macros feels "backwards" compared to ordinary programming. Given an invocation m1!(m2!()), the expander first expands m1!, giving it as input the literal syntax m2!()."
[08:15:46] <bjz> http://static.rust-lang.org/doc/master/guide-macros.html
[08:16:02] <bjz> but yeah, that's not definition
[08:16:07] <bjz> invocation
[08:16:11] <diverse> bjz: you mean something like in Scheme, where you could do: (+ 1 2 3 4 5) and have it return 15?
[08:16:17] *** Joins: simlay (name@moz-490DE04A.amandrai.net)
[08:16:26] <diverse> for that group operator?
[08:16:30] <derek_c> bjz: I see. thanks
[08:16:38] <bjz> yeah I was confused
[08:16:43] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:16:46] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:17:01] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[08:18:31] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:18:39] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:18:45] *** Joins: jackneill (jackneill@moz-E4F5A8EC.pool.digikabel.hu)
[08:20:01] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[08:20:19] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:20:19] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:20:24] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Quit: Ex-Chat)
[08:20:25] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:20:53] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:22:07] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:22:16] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:22:34] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[08:22:36] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[08:22:43] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[08:24:16] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[08:24:46] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[08:25:10] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[08:25:58] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[08:26:49] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[08:26:49] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:27:24] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:28:29] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:28:36] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:30:14] *** Quits: sprog (Mibbit@moz-38276AA6.guam.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:31:07] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:31:12] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:32:33] *** Quits: derek_c (derek@88C92731.BDDB420A.DD630FEE.IP) (Ping timeout)
[08:32:55] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:33:01] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:33:53] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[08:34:04] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[08:34:43] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:34:51] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:35:53] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[08:36:31] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:36:37] *** Quits: Addle (quassel@moz-67A92E8A.cable.teksavvy.com) (Client exited)
[08:36:40] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:38:20] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[08:38:27] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:38:28] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[08:38:29] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:38:30] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[08:38:57] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[08:40:01] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[08:41:12] *** Parts: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) ()
[08:41:30] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[08:41:32] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[08:41:54] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:42:51] *** Joins: omicrondelta1 (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[08:42:53] *** Quits: alonlevy (alon@moz-30492E92.bb.netvision.net.il) (Ping timeout)
[08:43:23] *** Quits: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) (Ping timeout)
[08:43:36] *** Joins: Addle (quassel@moz-67A92E8A.cable.teksavvy.com)
[08:44:11] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[08:44:49] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[08:44:50] *** Joins: magg (magg@CE73D0EB.B5B4F271.3D0AE249.IP)
[08:44:56] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:45:03] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:45:18] *** Quits: Addle (quassel@moz-67A92E8A.cable.teksavvy.com) (Ping timeout)
[08:45:45] <magg> how to represent the Replacement Character (U+FFFD) to do a replace while iterating a u8 byte array
[08:47:16] *** Quits: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP) (Quit: victorporof)
[08:48:29] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:48:35] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:49:03] *** Joins: Addle (quassel@moz-67A92E8A.cable.teksavvy.com)
[08:54:07] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[08:54:32] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[08:56:40] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[08:56:42] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:00:09] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:00:58] *** Joins: cloudidust (CloudiDust@B17F4619.9CF98D74.FD0AC393.IP)
[09:01:01] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[09:01:31] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[09:01:40] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[09:01:44] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:01:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[09:02:29] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Quit: Ex-Chat)
[09:02:32] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[09:02:54] *** Quits: cloudidust (CloudiDust@B17F4619.9CF98D74.FD0AC393.IP) (Ping timeout)
[09:03:16] *** Joins: cloudidust (CloudiDust@B17F4619.9CF98D74.FD0AC393.IP)
[09:04:28] *** Quits: twi (Adium@moz-8547F762.pa.vic.optusnet.com.au) (Quit: Leaving.)
[09:04:43] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:05:00] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[09:05:06] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:05:32] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[09:06:02] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[09:06:42] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[09:08:45] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[09:08:56] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:09:35] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[09:10:23] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[09:10:53] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:11:37] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[09:11:47] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:12:11] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:12:38] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:12:54] *** Joins: alonlevy (alon@moz-F987F693.inter.net.il)
[09:14:48] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[09:15:11] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:16:45] *** Quits: omicrondelta1 (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) (Ping timeout)
[09:18:04] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[09:18:51] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:19:04] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:20:10] *** Joins: rca (rcatolino@moz-E246AD29.adsl.proxad.net)
[09:21:23] *** Quits: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP) (Quit: This computer has gone to sleep)
[09:22:12] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:22:23] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:23:09] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[09:23:14] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[09:23:30] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[09:24:58] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[09:25:19] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[09:26:29] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[09:27:11] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[09:27:46] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[09:27:55] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[09:28:19] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:28:24] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[09:29:38] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:29:44] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:29:51] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[09:31:41] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[09:31:49] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[09:32:17] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:33:09] *** Joins: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au)
[09:33:29] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:33:37] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:35:17] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:35:28] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:36:37] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[09:37:17] <pyon> To get the length of a vector, I do vec.iter().len(), right?
[09:37:53] <rca> just .len() works.
[09:38:13] <rca> it works on any type implementing Container i think
[09:38:33] <pyon> Oh.
[09:38:49] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:38:55] <pyon> Does this include mutable slices?
[09:38:59] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:39:02] <pyon> http://static.rust-lang.org/doc/0.9/std/container/trait.Container.html -- does not say anything about mutable slices
[09:39:36] <rca> well mutable slices are slices in a mutable memory location.
[09:39:48] <rca> so it's the same type. (more or less)
[09:39:49] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[09:40:02] <pyon> Ah. :-)
[09:40:21] *** Joins: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP)
[09:40:40] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:40:47] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:41:40] <eddyb> rca: nope. &T and &mut T are different types
[09:41:53] <eddyb> pyon: but &mut [T] coerces to &[T] which has the len method
[09:42:04] <pyon> Aaaaaaaah! I keep forgetting that.
[09:42:18] <rca> yeah that's the or less part. I just wanted to make clear that it would work.
[09:42:28] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:42:38] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:42:39] <rca> I suck at explaining stuff...
[09:43:00] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:43:01] <pyon> Last week, I was like... How can I call .iter() on an owned vector? I did not have in mind that ~[T] coerces into &[T].
[09:44:16] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[09:44:23] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:44:26] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:45:32] *** Quits: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (Quit: WeeChat 0.4.2)
[09:46:08] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:46:16] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:46:46] *** Quits: ehsanul (Mibbit@moz-A9E56CFE.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:48:00] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:48:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:49:02] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[09:49:20] *** Joins: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[09:50:11] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[09:50:34] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Quit: by!)
[09:50:39] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:52:43] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:52:43] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:53:27] *** Joins: Florob (Florob@moz-39532932.de)
[09:53:56] *** Joins: cjs2 (Mibbit@A24C4196.B0CE3BD6.76F66111.IP)
[09:58:37] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[09:58:44] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[09:59:19] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[10:00:54] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[10:02:06] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:02:17] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:02:35] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[10:03:48] *** Quits: rca (rcatolino@moz-E246AD29.adsl.proxad.net) (Ping timeout)
[10:04:19] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:05:19] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[10:05:43] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:05:50] *** Quits: magg (magg@CE73D0EB.B5B4F271.3D0AE249.IP) (Ping timeout)
[10:08:40] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Ping timeout)
[10:09:17] *** Joins: RustyTrombone (RustyTromb@moz-93849D77.threembb.co.uk)
[10:10:22] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:10:24] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:11:27] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:12:04] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:12:09] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:12:47] *** Quits: RustyTrombone (RustyTromb@moz-93849D77.threembb.co.uk) (Client exited)
[10:12:48] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:13:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:13:50] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:14:00] *** Quits: StarLight (StarLight@moz-984D6E83.dynamic.avangarddsl.ru) (Ping timeout)
[10:14:04] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:14:49] *** Joins: doug (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[10:15:00] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[10:15:47] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:15:48] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:16:30] <doug> could someone help me set up rust-sfml 2?
[10:16:46] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[10:17:27] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[10:17:34] <doug> i don't understand how to build it
[10:17:54] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[10:18:01] <bjz> head over to #rust-gamedev
[10:18:04] *** Joins: StarLight (StarLight@moz-7174B56.dynamic.avangarddsl.ru)
[10:18:20] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:18:41] <bjz> we try to keep the game/graphics talk there
[10:19:45] *** Quits: leecbaker (Mibbit@F520693A.A9EDE10F.D02E0F32.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:19:57] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:20:29] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:21:42] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:21:47] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:21:51] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:22:57] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[10:23:29] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:23:37] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:23:59] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[10:24:11] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[10:24:16] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[10:25:18] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:25:26] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:25:46] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[10:25:58] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[10:26:27] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[10:27:46] *** Joins: GrecKo (GrecKo@moz-A7AA1BB6.fr)
[10:28:12] *** flaper87|afk is now known as flaper87
[10:28:27] *** Joins: FreeFull (freefull@moz-3FE569D6.as13285.net)
[10:28:46] *** Joins: smerft (Mibbit@moz-217D7C6E.cust.selfnet.cz)
[10:29:27] *** Quits: smerft (Mibbit@moz-217D7C6E.cust.selfnet.cz) (Quit: http://www.mibbit.com ajax IRC Client)
[10:30:11] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[10:30:13] *** Quits: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[10:30:27] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:30:28] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:34:31] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[10:34:40] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:37:34] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[10:38:00] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[10:38:28] *** Joins: kud1ing (Mibbit@moz-19392E49.pools.arcor-ip.net)
[10:40:02] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:40:26] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:45:05] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[10:45:07] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:45:17] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[10:46:01] *** Quits: cloudidust (CloudiDust@B17F4619.9CF98D74.FD0AC393.IP) (Quit: Leaving)
[10:47:36] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:47:37] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[10:48:46] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[10:49:05] <lurk_> Is there any community which reviews rust code?
[10:49:17] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:49:20] <dbaupp> lurk_: I'm happy to
[10:49:29] * dbaupp is waiting on the compiler to compile
[10:49:52] <kud1ing> oh, oh, oh, please also review #11495
[10:50:04] <dbaupp> kud1ing: is that the back-tick one?
[10:50:08] <kud1ing> yes
[10:50:14] <dbaupp> I looked at it
[10:50:15] <dbaupp> looks fine
[10:50:19] <kud1ing> thanks
[10:50:24] <dbaupp> although I'm not sure if we want `+` etc
[10:50:27] * dbaupp shrugs
[10:50:29] <kud1ing> why not?
[10:50:32] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[10:50:38] <kud1ing> its quoting code
[10:50:42] <dbaupp> seems slightly noiser than necessary, maybe?
[10:50:46] <dbaupp> meh, r+
[10:50:50] <kud1ing> :)
[10:50:51] <dbaupp> someone can revert it if they hate it
[10:51:19] <kud1ing> i find errore messages harder to read when code and english is mixed without clear separation
[10:51:37] <kud1ing> but i agree it's more "noise". alas helpful noise :)
[10:51:52] *** Joins: nkoep (nik@moz-A53D11F.pool.mediaways.net)
[10:52:34] <lurk_> https://gist.github.com/pix64/af547e01aa37c35156a3
[10:53:59] <lurk_> Nothing important. Tic Tac Toe program.
[10:54:09] <kud1ing> Tic Tac Toe is important
[10:54:35] <dbaupp> https://gist.github.com/pix64/af547e01aa37c35156a3#file-gistfile1-txt-L53 could write `let board = vec::from_fn(size, |_| vec::from_elem(size, BlankMark));` the `board: board` in the struct
[10:54:56] <dbaupp> http://static.rust-lang.org/doc/master/std/vec/fn.from_elem.html and http://static.rust-lang.org/doc/master/std/vec/fn.from_fn.html
[10:55:18] <dbaupp> (you'll need to add Clone to your #[deriving(Eq)] on the Mark enum.)
[10:55:50] <dbaupp> https://gist.github.com/pix64/af547e01aa37c35156a3#file-gistfile1-txt-L71 can use iterators
[10:56:01] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Client exited)
[10:56:07] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[10:56:26] <dbaupp> for row in self.board.iter() { ... for cell in row.iter() { if *cell != mark { ... } } }
[10:56:46] <dbaupp> similarly for check_vert
[10:57:03] <dbaupp> hm, acutally check_vert is probably tricky
[10:57:32] <dbaupp> you can at least do `for x in range(0, self.size) { ... for row in self.board.iter() { if row[x] { ... } } }` for check_vert
[10:58:06] <dbaupp> https://gist.github.com/pix64/af547e01aa37c35156a3#file-gistfile1-txt-L123 coudl be `return self.check_horz(mark) || self.check_vert(mark) || ...;`
[10:58:34] <lurk_> thanks
[10:58:42] <dbaupp> other than that, seems pretty good :)
[10:59:09] <dbaupp> oh, https://gist.github.com/pix64/af547e01aa37c35156a3#file-gistfile1-txt-L115 could just be `return false;` with `return true;` at the end
[10:59:15] <lurk_> dbaupp: Thanks again. I'll look into it
[10:59:50] <dbaupp> you've certainly got good Rust code-style :)
[11:00:14] <dbaupp> correct capitalisation and { placement and so on
[11:00:27] <kud1ing> does anyone know an Open Source tool to find similar files? i don't mean exact duplicates
[11:00:39] <kud1ing> i just found that two compilation files are nearly identical
[11:00:48] <kud1ing> compilation test files that is
[11:01:36] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:02:05] <dbaupp> kud1ing: http://en.wikipedia.org/wiki/List_of_duplicate_file_finders#Open_Source
[11:02:11] <dbaupp> some of those may do fuzzy matching
[11:02:22] <kud1ing> thanks
[11:02:47] <dbaupp> lurk_: awesome, it compiles! I'm playing a rusty tic tac toe <3
[11:03:15] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[11:03:19] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[11:04:26] <kud1ing> dbaupp: screenshots please
[11:05:55] <dbaupp> kud1ing: http://i.imgur.com/R2dtX1e.png
[11:08:36] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[11:09:17] <pyon> This is an implementation of a disk-based table whose rows can be manipulated concurrently, so long as each row is manipulated by at most one task at a time. Due to std::io::fs::File 's limitations (no concurrent uses of the same file at all), I had to write this from scratch on top of POSIX calls. Could this code have any bugs lurking in there? -- https://gist.github.com/eduardoleon/8383205
[11:11:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:12:11] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[11:12:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[11:12:37] <adridu59> when I launch a Rust program, what would be the size of its stack?
[11:13:31] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:13:32] <dbaupp> adridu59: by default 2MB
[11:13:48] <dbaupp> can be controlled with RUST_MIN_STACK=20000000 (for 20MB)
[11:14:18] <adridu59> can't be grown at runtime right? that's what the heap is for?
[11:15:07] <dbaupp> you can control the stack size of tasks you spawn
[11:15:18] *** Quits: kud1ing (Mibbit@moz-19392E49.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:15:23] <dbaupp> but not of ones already spawned (including the main thread)
[11:15:40] <dbaupp> pyon: there's lots of "Your data is lost" messages :P
[11:15:57] <adridu59> do green tasks get their own?
[11:16:11] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[11:16:18] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[11:17:00] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[11:17:07] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[11:17:08] <pyon> dbaupp: Well, I am lazy, I do not want to deal with data recovery at the middle of a possibly failed transaction. (In fact, I am toying with the idea of making a system that only begins transactions when it is 100% sure everything can run OK until the bitter end.)
[11:17:40] *** Quits: scpayson (scp@moz-9BEDE8C8.hsd1.ca.comcast.net) (Ping timeout)
[11:18:13] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[11:19:15] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:19:26] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[11:20:00] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[11:20:24] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:20:27] <bjz> lurk_: might want to move to using the fmt::Default trait
[11:20:39] <bjz> lurk_: ToStr is going to be removed
[11:20:51] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[11:20:52] *** Joins: Florob (Florob@moz-39532932.de)
[11:20:55] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:20:57] <lurk_> Is there a name for the lines which begin with #?
[11:21:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:21:12] <dbaupp> lurk_: like #[deriving]?
[11:21:15] <lurk_> yeah
[11:21:25] <adridu59> bjz: Format would be good to have I think
[11:21:27] <dbaupp> bjz: using fmt::Default is awkward in simple code
[11:21:36] <dbaupp> lurk_: attributes
[11:21:40] <bjz> dbaupp: acrichto was agianst it
[11:21:43] <dbaupp> lurk_: (although they don't have to be at the start of the line)
[11:21:48] <bjz> I have a PR that changed it
[11:21:51] <bjz> I think
[11:21:59] <dbaupp> bjz: acrichto was against Default being awkward in simple code?
[11:22:12] <bjz> no, the rename
[11:22:17] <dbaupp> lurk_: e.g. `fn foo() {} #[deriving(Eq)] struct Bar;` is a valid line
[11:22:22] *** Joins: twi (Adium@moz-FCA44068.pa.vic.optusnet.com.au)
[11:22:48] <adridu59> bjz: why exactly? looking at the discussion I don't see any clear reason
[11:22:53] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:22:54] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:23:51] <bjz> I can't remember If I actually submitted the PR
[11:24:00] <bjz> I might still just have it locally
[11:24:07] *** Quits: twi (Adium@moz-FCA44068.pa.vic.optusnet.com.au) (Ping timeout)
[11:24:10] <bjz> I was trying to figure out deriving
[11:24:30] <bjz> but the rename thing made me stop
[11:24:38] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:24:44] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[11:24:44] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:25:02] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[11:25:13] <bjz> oh ok: https://github.com/mozilla/rust/pull/11298
[11:26:32] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[11:26:32] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:26:33] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:26:34] * bjz finds user extensibility of syntax extensions worrying
[11:26:50] <dbaupp> why?
[11:26:50] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[11:26:52] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[11:27:13] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[11:28:03] <Matthias247> could lead to some crypic code as c++ with template metaprogramming ;)
[11:28:04] <bjz> dbaupp: well a number of things
[11:28:17] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:28:24] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:28:49] <dbaupp> Matthias247: the syntax extension writer would be doing a *lot* of work to get that far
[11:29:28] <bjz> dbaupp: well, more macros here - not having macros accessible via paths: std::assert!(...) - which I gather is very hard to implement
[11:30:12] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:30:12] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[11:30:29] <bjz> dbaupp: that thing with deriving isn't neccesarily to do with syntax extensions, but I worry about going to C-style namespaces there
[11:30:56] <bjz> as in: #[deriving(MyLibTrait)]
[11:31:52] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:32:02] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:32:25] <dbaupp> bjz: I think sfackler has implemented scoped macros
[11:32:55] <Matthias247> dbaupp: what was your general impression about my doc request? Too much info regarding really async callbacks? Or just not clear enough seperated?
[11:33:03] <bjz> oh ok, that's awesome!
[11:33:24] <dbaupp> Matthias247: I don't think async callbacks should be the first example
[11:33:30] <bjz> dbaupp: like `pub macro_rules! foo( ... )`?
[11:33:44] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:33:47] <dbaupp> something really basic that just prints something from inside C, or something.
[11:33:50] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:33:53] <dbaupp> I didn't read the whole thing
[11:33:56] <dbaupp> bjz: don't know
[11:34:00] *** Joins: ofeldt- (ofeldt@moz-85F39ADD.dip0.t-ipconnect.de)
[11:34:03] *** Quits: ofeldt (ofeldt@moz-7C2BB22C.dip0.t-ipconnect.de) (Ping timeout)
[11:34:04] <Matthias247> dbaupp: ok. Can change that. But they should be generally explained?
[11:34:09] <dbaupp> I think I saw an #[macro_export] attribute
[11:34:23] <dbaupp> Matthias247: not sure :)
[11:34:45] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[11:35:29] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[11:35:35] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[11:35:57] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[11:36:30] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:36:46] *** Joins: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za)
[11:39:03] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Client exited)
[11:39:31] <Matthias247> dbaupp: I've seen so many people doing such things wrong that I thought it would be worth it :-)
[11:39:33] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[11:39:47] *** Quits: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au) (Ping timeout)
[11:40:40] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[11:41:06] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:41:28] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:42:01] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:45:41] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[11:47:13] <dbaupp> err, oops
[11:47:20] * dbaupp just realised that he was being dump
[11:47:22] <dbaupp> *dumb
[11:48:54] <Ms2ger> You? Never
[11:50:52] <dbaupp> changing the order of something that's meant to be ordered is a good way to fail tests
[11:51:06] <dbaupp> Ms2ger: enough with the attitude
[11:51:09] <dbaupp> ;P
[11:51:35] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Quit: restart)
[11:51:42] <Ms2ger> Attitude sir? I don't know what you mean sir?
[11:51:47] * flaper87 can't get https://github.com/DaGenix/rust-crypto to work T_T
[11:52:21] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:52:32] <flaper87> I built it and wrote this small test http://bpaste.net/show/ZuDegbYkcdsJF5HkuqUS/
[11:52:46] <flaper87> but it ain't compile. It says it can't find the crate_id. T_T
[11:52:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:53:20] <klutzy> flaper87: extern mod rust_crypto = "github.com/DaGenix/rust-crypto#rust-crypto:0.1";
[11:53:35] <flaper87> klutzy: already tried that :(
[11:54:25] <flaper87> klutzy: lib is in the same dir where the test.rs file is :/
[11:54:42] <klutzy> flaper87: did you add `-L /path/to/crypto` to rustc?
[11:54:50] <flaper87> klutzy: yeah, tried that too
[11:56:14] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[11:56:19] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:56:27] <klutzy> flaper87: hmm, I did `rustc a.rs -L rust-crypto/src/rust-crypto` and it succeeded
[11:56:47] <flaper87> klutzy: mmh, then I've something messed up locally
[11:56:48] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[11:57:00] <flaper87> btw, how can I tell rustpkg where to look for libs
[11:57:02] <flaper87> ?
[11:57:07] <flaper87> I mean, -L for rustpkg
[11:57:11] <klutzy> ahh rustpkg
[11:57:21] <flaper87> klutzy: wait, this is a separate question
[11:57:23] <flaper87> :D
[11:57:31] <flaper87> I was using rustc to test the rust-crypto build
[11:57:54] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:58:01] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[11:58:03] <klutzy> flaper87: rustpkg sees RUST_PATH for library search
[11:58:10] <klutzy> environment variable
[11:58:35] <flaper87> klutzy: where RUST_PATH is something likepath/{bin,lib}
[11:58:37] <flaper87> right ?
[11:58:47] *** Quits: FreeFull (freefull@moz-3FE569D6.as13285.net) (Ping timeout)
[11:59:48] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[11:59:50] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[11:59:52] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:00:00] *** Joins: vobi (Mibbit@moz-894AD66C.pool.mediaways.net)
[12:00:04] <flaper87> mmh, ok, I got rustc to compile that small test. Now rustpkg says it doesn't know where to look for that package. 
[12:00:09] *** Joins: jcmoyer (deadbeef@moz-40035C19.sta.embarqhsd.net)
[12:00:10] *** Joins: FreeFull (freefull@moz-9CE25B3E.as13285.net)
[12:00:41] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[12:00:50] <flaper87> and $ rustpkg install github.com/DaGenix/rust-crypto fails
[12:01:25] *** Quits: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:01:38] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:01:40] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:02:12] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[12:02:35] <klutzy> flaper87: it fails since rust-crypto is not rustpkg-ready. you may clone it and `cd rust-crypto/src/rust-crypto && rustpkg install` though
[12:03:17] <klutzy> anyway don't use rustpkg for now :p
[12:03:29] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:03:30] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:05:18] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:05:19] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:06:09] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[12:07:06] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:07:10] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:07:25] <pyon> is it possible to have something between a MutexArc and a RWArc? like MutexArc, it would support nesting and unsafe accesses, like RWArc, it would distinguish between reads and writes
[12:08:03] *** Joins: Ferreus (ferreus@moz-3C3CC855.pools.arcor-ip.net)
[12:08:28] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:08:55] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:08:58] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:09:36] <kimundi> pyon: aFAIK THERE IS ACTUALLY A mUTEXaRC TYPE IN EXTRA::ARC
[12:09:40] <kimundi> whoops
[12:09:49] <kimundi> but yeah
[12:10:14] <pyon> problem is, for MutexArc, all accesses are potential writes
[12:10:46] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:10:49] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:12:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:12:16] *** Joins: Earnestea (earnest@moz-E86D50FA.dyn.plus.net)
[12:12:20] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[12:12:36] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:12:37] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:13:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:14:03] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[12:14:20] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:14:28] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:16:10] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:16:16] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:18:09] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[12:18:22] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[12:18:51] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:19:25] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[12:19:46] *** Joins: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl)
[12:20:07] *** Quits: khodzha1 (khodzha@E048973E.2AEE264E.CA6E2165.IP) (Ping timeout)
[12:21:03] *** Quits: alonlevy (alon@moz-F987F693.inter.net.il) (Ping timeout)
[12:23:23] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:23:39] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:25:28] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[12:25:48] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[12:27:17] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[12:27:33] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[12:27:33] *** Joins: khodzha (khodzha@E048973E.2AEE264E.CA6E2165.IP)
[12:28:56] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[12:28:59] <Matthias247> dbaupp: I made an update to my PR
[12:29:09] *** Quits: cjs2 (Mibbit@A24C4196.B0CE3BD6.76F66111.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:29:23] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:29:51] *** Joins: TisButMe (Mibbit@moz-5233EFA9.w92-144.abo.wanadoo.fr)
[12:30:07] *** Quits: khodzha (khodzha@E048973E.2AEE264E.CA6E2165.IP) (Ping timeout)
[12:30:37] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:30:44] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:32:02] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:32:50] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[12:32:52] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[12:33:25] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:34:00] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Ping timeout)
[12:34:32] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:34:38] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:35:40] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[12:36:24] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:36:28] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:38:10] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:38:17] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:39:19] <Florob> Could someone help me getting this code <https://gist.github.com/Florob/8384071> to work?
[12:39:23] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[12:40:02] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:40:07] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:40:34] <Matthias247> try A(ref c)
[12:41:35] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[12:41:49] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:41:51] <Matthias247> hmm, will still not work because the => c will destroy the enum
[12:41:56] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:42:44] <Florob> No it won't. The problem is that I need to move that value into the B, and this way I only get a borrow of it.
[12:43:06] <Florob> *I would
[12:43:38] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:43:46] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:44:01] <kimundi> Florob: That'S a classic situation where you need to use util::swap()
[12:44:09] <dbaupp> or util::replace
[12:44:43] <kimundi> Florob: Oh wait, both are the same value... let me look at it again
[12:45:09] <Florob> kimundi, I was going to say. I thought about util::swap(), but I think I'd still run into the same problem trying to use it
[12:45:17] *** Quits: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl) (Quit: WeeChat 0.4.3-dev)
[12:45:26] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:45:35] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:46:15] <dbaupp> match replace(self.x, A(~"") { A(s) => self.x = B(s), B(_) => fail!("already B") }
[12:46:26] <kimundi> Florob: I would try to rewrite that code to not do assignments, but just check is x is A or B
[12:47:14] <kimundi> Oh wait... I'm talking bs again
[12:47:16] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:47:19] <dbaupp> unfortunately the above incurs an allocation always
[12:47:26] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:47:45] <kimundi> SO, the transformation is A -> B, b -> fail!, correct?
[12:47:47] <dbaupp> but in future, we might have a nicer representation for ~str (or a nicer string type) that means that an empty string doesn't allocate
[12:48:14] *** Joins: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP)
[12:48:26] <Florob> dbaupp, well, this is not a string in the original. It's a TcpStream in fact, that I'm trying to replace with a SslStream
[12:48:35] <Florob> based on that very TcpStream
[12:48:52] <Florob> kimundi, I think so...
[12:49:06] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:49:14] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:50:15] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[12:50:24] <Matthias247> A(c) => { a.x = B(c); }
[12:50:28] <Matthias247> maybe that way?
[12:50:40] <Matthias247> and remove tmp and the last line
[12:50:57] *** Quits: tristramh (tris@moz-EC3C0522.lns20.syd6.internode.on.net) (Ping timeout)
[12:50:57] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:51:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:51:26] <Florob> Matthias247, Tried that, no such luck :/
[12:51:33] <Matthias247> and with ref c ?
[12:51:36] <flaper87> is there something like python's `unpack_from` in Rust? It should be easy to implement
[12:51:51] <kimundi> Matthias247: will properly not work, as Rust currently doesn't allow partial moving from and to a struct
[12:52:02] <kimundi> flaper87: What does it do?
[12:52:32] <flaper87> kimundi: http://docs.python.org/2/library/struct.html#struct.unpack_from
[12:52:42] <flaper87> kimundi: but I'm actually interested in: http://hg.python.org/cpython/file/40fb60df4755/Modules/_struct.c#l962
[12:52:46] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:52:52] <flaper87> so, I guess I'll just implement that one myself
[12:52:53] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:53:00] <flaper87> unless there's something like that already
[12:53:10] <dbaupp> Florob: oh
[12:53:22] <dbaupp> Florob: can you change the enum to have a 3rd variant?
[12:53:34] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[12:54:02] <Florob> dbaupp, *palmface. Yes, I can, and it does already. So swap with that, and put the SslStream in later. Thanks
[12:54:02] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[12:54:03] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:54:42] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:54:46] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:56:28] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[12:56:33] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[12:57:47] <dbaupp> Florob: util::replace is a nicer interface to swap for this use-case, fwiw. :)
[12:58:06] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[12:58:17] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[12:58:28] <kimundi> Florob: I have the feeling that there is actually no direct safe way to do this sort of thing without swapping with a empyt enum value - though you could write a small util using unsafe code that works like util::swap and performs that swap in a safe way
[13:01:48] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:01:59] *** Quits: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP) (Ping timeout)
[13:02:01] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[13:02:07] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[13:02:12] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[13:02:30] <dbaupp> if you're not executing external code, and are *extremely* careful to avoid all possibility of `fail`ure while any assumptions are broken (e.g. having two values of type ~str point to the same ~str), then doing it with unsafe should be fine.
[13:02:37] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:02:38] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:02:58] <dbaupp> (executing external code == calling trait methods or closures)
[13:03:06] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[13:03:40] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[13:04:26] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:04:27] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:06:08] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:06:18] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:06:59] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[13:07:16] *** Joins: nacon (daniel@moz-7E703DA2.hsi8.kabel-badenwuerttemberg.de)
[13:07:53] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[13:08:00] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:08:06] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:08:59] *** Joins: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net)
[13:09:50] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:09:56] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:11:08] *** Quits: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[13:11:23] <nacon> What's the reason behind alternating binaries between recompilations without modifications? For example, see this short example: http://pastebin.mozilla.org/3995877
[13:11:40] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:11:45] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:12:43] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:13:22] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:13:31] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:13:35] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:14:25] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:14:55] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[13:15:16] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:15:24] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:17:01] <eddyb> nacon: run with -S and diff the outputs
[13:17:06] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:17:14] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:18:22] <doener> hm, it seems to just alternate between two versions
[13:19:02] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:19:03] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:20:09] <nacon> eddyb: good idea, but it seems that the .s file is not changing at all between recompilations
[13:20:29] *** Parts: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net) (Leaving)
[13:20:33] <eddyb> nacon: -c and check if the .o files differ
[13:20:40] <doener> nacon: the order of the linked libraries seems to differ
[13:20:42] <kimundi> nacon: Afaik compilation is simply not yet deterministic - hashes seeded with random number result in different order if things
[13:20:48] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:20:51] <eddyb> (it might as well be a timestamp)
[13:20:53] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:21:11] <doener> a timestamp that alternates between two values?
[13:21:27] <eddyb> it.. nevermind, I wasn't paying attention
[13:21:38] <doener> :-)
[13:21:44] <dbaupp> kimundi: I thought that the relevant parts were not random
[13:21:55] <eddyb> nacon: objdump, nm or ldd could show some differing metadata
[13:22:00] <dbaupp> e.g. NodeId's are deterministic
[13:22:32] <doener> nacon: yeah, ldd confirms that the library order differs
[13:22:33] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:22:35] *** Joins: khodzha (khodzha@E048973E.2AEE264E.CA6E2165.IP)
[13:22:42] <nacon> eddyb: the .o files from the compilation with -c are the same though
[13:22:42] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:23:00] <nacon> doener: ah, makes sense then. thanks!
[13:24:25] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:24:31] <eddyb> file search race condition?
[13:24:33] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:24:37] <flaper87> kimundi: looks like I needed more than just that method :P
[13:25:30] <flaper87> what I want to do is get an integer representation of a md5 hash, it's easily doable with unpack_from in python. I'm trying to figure out what's the best way to do that in rust
[13:26:12] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[13:26:34] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[13:26:42] *** kimundi is now known as zz_kimundi
[13:27:08] <doener> eddyb: btw, it was you who changed the type for `self` in the llvm code from generic to concrete, right? Great job! Just saw that in passing when looking through some issues yesterday :-)
[13:27:47] <eddyb> doener: and I'm making self even less special as we speak :)
[13:27:54] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[13:28:01] <doener> eddyb: how so?
[13:28:20] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[13:28:23] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[13:28:33] <eddyb> doener: it wasn't treated like a regular argument, it was missing from the function type
[13:28:33] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[13:28:35] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[13:28:58] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:29:24] <doener> eddyb: nice. So UFCS is getting within reach, right?
[13:29:32] *** Quits: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[13:29:40] <dbaupp> bjz: heh; your println change broke my many-month-old hello-world program... I was hoping that would last until 1.0!
[13:29:49] <bjz> hah!
[13:29:51] <bjz> :)
[13:29:55] *** Joins: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de)
[13:30:18] <eddyb> doener: it's mostly an issue of relaxing some rules - calling a method as a regular function, that is
[13:30:22] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:30:23] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:31:16] <eddyb> doener: we were just talking about that in #rust-internals
[13:31:46] <dbaupp> eddyb: calling a function like we call methods would be better ;P
[13:31:51] <dbaupp> death to the env parameter
[13:32:00] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[13:32:29] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[13:33:02] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:33:47] *** zz_kimundi is now known as kimundi
[13:35:39] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Client exited)
[13:35:51] *** Joins: twi (Adium@moz-DC24E4B0.static.tpgi.com.au)
[13:35:55] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:36:01] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:36:10] <SiegeLord> kimundi: Did anything come out of this effort: https://github.com/mozilla/rust/issues/6220#issuecomment-17863070 ?
[13:40:15] *** Quits: franckverrot (Franck_Ver@E1FC23CE.D13D47C1.D6573861.IP) (Quit: WeeChat 0.4.0)
[13:41:32] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[13:42:04] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[13:42:10] <kimundi> SiegeLord: Not really, someone else was faster, and I never felt like simply reshuffling that code - I still lack the ability to write a correct-ish float parser/writer
[13:42:14] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:42:43] <kimundi> (that is, someone was faster with making uint and int sane, that is)
[13:42:49] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[13:43:14] *** Quits: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP) (Connection reset by peer)
[13:43:17] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[13:43:21] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:43:21] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:43:32] <Cevn> hello 
[13:43:35] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[13:43:54] <Cevn> quick question for anyone: how do I read one line from stdin? 
[13:44:45] <SiegeLord> BufferedReader::new(stdin()).read_line()
[13:44:56] <dbaupp> Cevn: http://static.rust-lang.org/doc/master/std/io/trait.Buffer.html#method.read_line
[13:45:03] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:45:09] <skry|afk> though i do ask that you not create that buffer every time you want a new line
[13:45:12] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:45:13] * skry|afk goes a little insane
[13:45:18] *** skry|afk is now known as Skrylar
[13:45:39] <Cevn> I only want one haha 
[13:45:50] <Cevn> I looked in docs but in the wrong place apparently :X 
[13:45:54] <Cevn> aight thanks 
[13:46:02] <Skrylar> yeaah some things like that are buried
[13:46:05] <Skrylar> and i haven't written any tips in a while
[13:46:42] <SiegeLord> I feel like this has been asked lots of times recently... is it in that FAQ/example thing cmr made?
[13:47:01] <dbaupp> http://static.rust-lang.org/doc/master/complement-cheatsheet.html
[13:47:11] <dbaupp> almost: http://static.rust-lang.org/doc/master/complement-cheatsheet.html#how-do-i-iterate-over-the-lines-in-a-file
[13:47:34] *** Quits: nacon (daniel@moz-7E703DA2.hsi8.kabel-badenwuerttemberg.de) (Quit: leaving)
[13:49:57] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[13:50:44] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[13:50:57] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[13:51:11] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:52:30] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:52:32] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:53:21] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[13:53:44] *** Joins: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP)
[13:54:15] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[13:54:38] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[13:55:05] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:56:19] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:56:26] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:58:12] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[13:58:16] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[13:58:17] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[13:59:24] *** Joins: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP)
[14:00:00] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:00:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:01:45] <SiegeLord> Is it a problem to use BSD-licensed code in libstd?
[14:01:47] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:01:56] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:02:24] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[14:03:41] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:03:44] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:04:01] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[14:04:06] *** Joins: shilgapira (chatzilla@7AE6026F.47BE6D97.F9582E85.IP)
[14:04:42] <SiegeLord> It appears that the FFI code is BSD licensed to some extent
[14:04:56] <SiegeLord> I know this was a giant source of drama in the D-land
[14:05:12] <SiegeLord> They dropped half the community because Tango was BSD licensed :P
[14:05:30] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:05:34] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:07:22] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:07:24] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:08:14] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[14:08:26] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:08:39] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[14:09:05] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:09:13] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:09:36] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:09:58] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[14:10:05] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[14:10:16] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[14:10:26] <Skrylar> SiegeLord: wat
[14:10:53] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[14:10:57] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:11:01] <Skrylar> Well, I didn't use Tango because the devs were jerkwads to me about it.. but. whats wrong with BSD code oO
[14:11:02] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:11:44] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[14:11:53] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[14:12:27] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[14:12:31] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[14:12:33] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[14:12:43] <SiegeLord> BSD's second clause was the issue
[14:12:55] <Skrylar> the *old* bsd?
[14:13:07] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[14:13:08] <SiegeLord> Apparently it was a big enough problem to include the license alongside binary copies
[14:13:18] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:13:22] <SiegeLord> Big enough to write a new standard library from scratch :P
[14:13:28] <SiegeLord> No, all BSD's have it afaik
[14:13:32] <Skrylar> I don't remember that being in BSD, let me recheck
[14:13:34] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:14:13] <Skrylar> ah, the documentation clause
[14:14:24] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:14:40] <Skrylar> they probably regarded it as potentially infectious even though half the people in the industry leave that out, and it isn't a problem for AAA studios that are touchy about their stamps
[14:14:45] <Skrylar> lol
[14:15:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:15:11] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:15:26] <SiegeLord> Yeah... oh well
[14:15:33] <Skrylar> SiegeLord: I guess they just love wasting time, I lost all interest in D when they put Alec in charge
[14:15:43] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:15:49] <Skrylar> "hey, phobos is busted! lets remove 'delete' from a systems language because the standard lib is broken!"
[14:16:00] <Skrylar> I mean, rust doesn't have delete either
[14:16:02] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[14:16:06] <Skrylar> But the reason they removed it from D is idiotic logic
[14:16:14] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[14:16:18] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:16:47] <SiegeLord> It kind of does, in the form of the drop() function... but it's hard to consider it the same as it was in D
[14:16:53] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:17:02] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:17:07] <Skrylar> I don't really mind that rust doesn't have delete, because there is at least a consistency for memory safety; and they use RC's with guaranteed finalizers
[14:17:18] <Skrylar> I thought emplace and drop were just stupidity incarnate
[14:17:27] <Skrylar> They seriously told me to write a template for *standard functionality*
[14:17:45] <Skrylar> I pointed out there is no reason every lib writer needs to write their own new/delete just because Phobos was poorly designed
[14:17:59] * Ms2ger didn't realize he accidentally joined #D
[14:18:04] *** Joins: derek_c (derek@F1E7D1FB.78B8FD9.C34016C.IP)
[14:18:23] <Skrylar> Ms2ger: naaah, we'd have gotten banned already if it was D
[14:18:42] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:18:50] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:18:54] <Skrylar> though i found a funny comment in script docs
[14:19:10] <Skrylar> they put Matz and Guido in the code example; minor snark at ruby and python,hah
[14:20:08] * Skrylar goes back to trying to get this iterator sort working
[14:20:30] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:20:41] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:20:43] *** Quits: twi (Adium@moz-DC24E4B0.static.tpgi.com.au) (Quit: Leaving.)
[14:21:29] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[14:21:40] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:25:43] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[14:25:43] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[14:25:55] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Ping timeout)
[14:26:03] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:26:57] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[14:27:24] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:27:31] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:28:31] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[14:28:39] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[14:29:13] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:29:22] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:31:02] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:31:10] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:31:58] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[14:33:15] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[14:33:17] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[14:33:46] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:34:33] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[14:34:44] *** Quits: shilgapira (chatzilla@7AE6026F.47BE6D97.F9582E85.IP) (Ping timeout)
[14:34:57] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:35:04] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:35:11] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Quit: Leaving)
[14:35:37] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[14:36:47] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:36:55] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:38:41] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:38:43] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:39:51] *** Quits: vobi (Mibbit@moz-894AD66C.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:40:23] *** Joins: escravo (Mibbit@6F42D6D1.75BE069E.589B071C.IP)
[14:40:28] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:40:34] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:41:01] *** Quits: escravo (Mibbit@6F42D6D1.75BE069E.589B071C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:42:17] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:42:17] *** ChanServ sets mode: +ao dherman dherman
[14:42:18] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:42:22] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:43:36] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[14:44:06] *** Joins: vubru (Mibbit@205FB6C5.43625FBB.EBCC7000.IP)
[14:44:28] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[14:44:57] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:45:09] *** Parts: vubru (Mibbit@205FB6C5.43625FBB.EBCC7000.IP) ()
[14:45:11] *** Quits: sellout (Adium@DDFD3B9E.3AD4021.78322BBA.IP) (Quit: Leaving.)
[14:45:38] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[14:46:15] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:46:16] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:47:10] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[14:47:22] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[14:47:56] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:48:06] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[14:48:06] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:48:18] *** Joins: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[14:48:27] <dmz> Question: why Rc::ptr_eq was removed?
[14:48:41] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[14:48:53] <Florob> Is there really no way (or plan for one) to support concatenating adjoining strings at compile time (in order to maintain the 100 character limit)?
[14:49:19] <dmz> Florob: I though we got a macro for that
[14:49:50] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:49:55] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:51:28] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[14:51:40] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:51:41] <Skrylar> dmz: one of those is broken
[14:51:46] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:52:04] <doener> Florob: something like this? https://gist.github.com/dotdash/8385499
[14:52:56] <Florob> doener, which supposedly includes all the whitespace at the start and therefore doesn't allow for proper indentation?
[14:53:08] <doener> Florob: no, the leading whitespace is stripped
[14:53:26] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:53:30] <dmz> Skrylar: what do I use now instead of Rc:: ptr_eq?
[14:53:34] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:53:36] <doener> (even if I had correctly indented the string one more level than the rest of the code
[14:53:39] <doener> )
[14:53:56] <Skrylar> dmz: what are you trying to do?
[14:53:58] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:54:09] <dmz> check if two Rc point to the same object
[14:54:42] <Skrylar> equals is still defined on it
[14:54:45] <Skrylar> as is cmp
[14:54:51] <Skrylar> as is ptr_eq
[14:55:03] <Skrylar> If they removed it, they didn't annotate the 0.9 release docs
[14:55:39] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[14:55:57] <Skrylar> oh joy, another bad build of rustc
[14:55:59] <dmz> Skrylar: Rc does implement Eq but it requires T to implement Eq, and my understanding is - the comparison is deep. I need the shallow one
[14:56:10] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:56:14] <Skrylar> dmz: i don't see that eql_ptr is missing in the docs
[14:56:22] <Skrylar> er, ptr_eq
[14:56:55] <dmz> http://static.rust-lang.org/doc/master/std/rc/struct.Rc.html
[14:57:20] <dmz> Skrylar: do you see it here? ^
[14:57:24] <Skrylar> not in that one, no
[14:57:33] * Skrylar hasn't paid any attention to post-0.9 yet
[14:57:37] <dmz> hehe
[14:57:43] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[14:58:00] <Skrylar> Currently the 0.10-pre builds are producing insolvent compilers on my machine; they throw out GCC personality errors
[14:58:17] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:58:23] <dmz> that's weird, I just compiled a fresh one successfully
[14:58:23] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[14:58:33] <Skrylar> dmz: linux?
[14:58:39] <dmz> yeah
[14:58:43] * Skrylar shrug
[14:58:45] <doener> Skrylar: did you run "make clean" lately?
[14:58:59] <Skrylar> doener: as i said last night, i thoroughly git clean -df'd and reset 
[14:59:07] <doener> weird
[14:59:15] <Skrylar> as well as having installed the rustc to a folder under git, so i can obliterate the installed rust files
[14:59:27] <Skrylar> its as clean as it will get aside from taking Vagrant and compiling on a VM every time
[14:59:31] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[14:59:35] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:00:08] <eddyb> Skrylar: what's your configure arguments?
[15:00:11] <dmz> I wonder why std:: ptr:: doesn't contain the eq() function or something... I could use it instead of Rc:: ptr_eq at least 
[15:00:17] <Skrylar> eddyb: ./configure --prefix=/home/skrylar/Local
[15:00:35] <eddyb> dmz: you can call .borrow() and do ref_eq
[15:01:03] <dmz> eddyb: ok, cool. Do you know why ptr_eq is no more?
[15:01:07] <Skrylar> finally having weak references gives me extensive happiness though
[15:01:18] <Skrylar> there were some spots in SDL2 i had to leave out and work around because we didn't have them
[15:01:22] <doener> Skrylar: hm, just -df or -dfx? Just -df doesn't removed .gitignore'd files
[15:01:35] <doener> s/removed/remove/
[15:01:45] <Skrylar> doener: i don't have one set, unless mozilla set one for it
[15:02:05] * Skrylar regularly uses git clean instead of make clean on ey's own projects
[15:02:07] <doener> there's a comprehensive .gitignore in the repo, yeah
[15:02:21] <eddyb> LOL
[15:02:48] <dmz> eddyb: oops, where is ref_eq exactly?
[15:03:04] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:03:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:03:05] <eddyb> dmz: search the docs, maybe std::ref?
[15:03:25] <dmz> std:: borrow 
[15:03:36] <doug> could someone walk me through compiling a crate and using it in a program? it should be very simple: https://gist.github.com/bachm/50ab7f46579337cff63b
[15:03:40] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[15:03:49] <eddyb> doug: as a library?
[15:03:58] <doug> yes
[15:04:12] <eddyb> rustc --lib hello.rs
[15:04:16] <dmz> eddyb: thanks, ref_eq works as a workaround for me
[15:04:34] <eddyb> dmz: well, it's what ptr_eq was doing anyway
[15:04:36] <Skrylar> doener: i'll give it another build; though it takes ages
[15:04:40] * Skrylar had been running bisect on it
[15:04:57] <eddyb> Skrylar: you did hear that it works fine on linux, didn't you?
[15:05:11] <dmz> eddyb: I know, just confused why a function that was so useful was removed
[15:05:11] <doug> that gives me a hello-98b6a0a2-0.0.dll
[15:05:13] <Skrylar> eddyb: i just said i was giving the head another build
[15:05:34] <eddyb> doug: yeah, now compile test.rs
[15:05:59] <dmz> eddyb: personally, I'd make Eq implementations for pointers to be shallow. If anyone wants a deep one, he can borrow and do the deep comparison then....
[15:06:14] <doug> it fails with "can't find crate hello".., also when i rename the dll to hello.dll
[15:06:33] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:06:37] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:06:41] <eddyb> doug: hmpf. them compile hello with --rlib instead of --lib
[15:06:48] <doug> same result
[15:06:59] <eddyb> then add -L . to rustc test.rs
[15:07:30] <eddyb> (--rlib is a static library, which is prefered over the dynamic one. -Z lto to perform link-time optimization)
[15:08:07] <eddyb> dmz: the main reason we can't just do that is that NaN != NaN
[15:08:29] <eddyb> I know, it's very stupid, maybe we should have a kind "SafeToEqByRef"
[15:08:42] <doug> -L as in "rustc -L hello test.rs"? that also fails with "can't find crate"
[15:08:47] <eddyb> doug: -L .
[15:09:16] <eddyb> -L means "directory to look for libraries in"
[15:09:22] <doug> that works, thanks
[15:10:01] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:10:09] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:10:51] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[15:11:07] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:11:24] <Skrylar> i should probably write a tip about -L .
[15:11:36] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Ping timeout)
[15:11:49] <dmz> eddyb: it's the pointer, what does it have to do with NaN?
[15:12:30] <eddyb> dmz: Eq for Rc<f64> does the wrong thing if it's always by ref
[15:12:46] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[15:12:49] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[15:13:12] <dmz> eddyb: wait, what? a ref comparison compares the pointers, it doesn't care about f64. Am I missing something/
[15:13:47] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:13:56] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[15:14:11] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:14:14] <SiegeLord> Hmm... so turns out, as carter said yesterday, proper printing of floats requires bignums... how will we accomplish that in libstd?
[15:14:31] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:15:31] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:16:10] * io2 waves at bjz
[15:16:20] <bjz> io2: o/
[15:16:27] <bjz> wow, you made it!
[15:16:27] <eddyb> dmz: hmm, I was thinking of shorcircuiting. I guess we could trust people to not shoot themselves in the foot with such an Eq implementation
[15:16:27] <io2> :)
[15:16:34] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[15:16:53] <io2> bjz: been here for quite some time actually :)
[15:17:08] <bjz> io2: yeah, lots of lurkers here :)
[15:17:13] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[15:17:15] <bjz> like most IRC channels
[15:17:17] <bjz> :)
[15:17:22] <bjz> but that's ok
[15:17:40] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:17:44] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:17:53] <io2> yeah, but i actually read the logs and analyze everything properly; it is far from being a lurking bystander. I reserve myself for post - 1.0 activity :P
[15:18:05] <dmz> bjz: note: /usr/bin/ld: build/claymore.o: undefined reference to symbol 'glfwSetCursorPosCallback'
[15:18:08] <bjz> oh that's cool
[15:18:16] <dmz> glfw broke for me
[15:18:27] *** Joins: alonlevy (alon@moz-2F877D0E.red.bezeqint.net)
[15:18:50] <dmz> bjz: my glfw is 3.0.4-1
[15:18:59] <bjz> dmz: You will need to include the dependencies that glfw needs. you can do it using pkg-config
[15:19:29] <dmz> what has changed? why weren't I required to do it before/
[15:19:47] <bjz> dmz: it's a side-affect of me trying to make the build system more portable - different package managers call glfw different things which is a massive pain
[15:20:48] <bjz> dmz: https://github.com/bjz/glfw-rs/pull/70
[15:21:34] <bjz> dmz: I'll probably have to split the glfw detection cmake script into a FindGlfw3.txt thing, so other folks can use it
[15:21:46] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:22:03] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:23:02] <dmz> erm... I don't get it. Why can't Cmake use pkg-config if it's needed?
[15:23:33] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:23:34] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:23:57] <bjz> dmz: pkg-config isn't on windows -_-
[15:24:05] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:24:27] <bjz> http://www.glfw.org/docs/latest/build.html#build_link_win32
[15:24:49] <SiegeLord> A FindFoo module will generally try using pkg-config, but won't rely on it exclusively
[15:25:47] <dmz> bjz: isn't Cmake aware of the OS? I'm on Linux, so why can't it use pkg-config again?
[15:26:10] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:26:15] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:27:42] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[15:28:01] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[15:29:12] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:29:25] <bjz> dmz: https://github.com/bjz/glfw-rs/blob/master/CMakeLists.txt#L27-L42
[15:29:26] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[15:29:30] <bjz> dmz: I do
[15:29:43] <bjz> but the thing is you have to do that in your project too
[15:29:43] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:30:02] <bjz> because I removed the linking part in the source code
[15:30:31] <dmz> ok, that leaves glfw clean ;)
[15:30:42] <bjz> hm?
[15:31:18] <dmz> I mean, glfw is good then
[15:31:22] *** Quits: Skrylar (skrylar@moz-F692F728.austin.res.rr.com) (Quit: leaving)
[15:31:45] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[15:32:39] <flaper87> erm, what's the best way to do: N**M in rust?
[15:33:14] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:33:22] <flaper87> (n to the power of m)
[15:33:34] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:34:18] <eddyb> n.pow(m)
[15:34:30] <eddyb> maybe we should have a ** operator
[15:35:04] *** Joins: vmx (vmx@moz-BC31FFFF.pools.arcor-ip.net)
[15:35:07] <flaper87> eddyb: mmh, n.pwo(m) didn't seem to work. Leemme try again
[15:35:10] <mleise> eddyb, flaper87: Use D instead of Rust has a ^^ operator :p
[15:35:35] <mleise> (missing "it")
[15:35:35] * eddyb takes mleise to the Rust branding iron
[15:35:48] <eddyb> wait just a second for it to heat in the fire
[15:35:49] <mleise> nooo not the rusty one
[15:35:52] <SiegeLord> Which has a horribly hacky implementation :P
[15:35:54] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[15:36:00] <Ke> <3
[15:36:07] *** Quits: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:36:11] <SiegeLord> It literally desugars into an absolute path within D's standard library
[15:36:12] <mleise> SiegeLord: shhh, don't tell them about the hidden math import
[15:36:17] <SiegeLord> Not using it? Tough luck
[15:36:36] <eddyb> SiegeLord: that's because they don't have lang items. HAH
[15:36:42] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:36:46] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:36:48] <mleise> Can't we just all be friends
[15:36:49] <flaper87> eddyb: 2.pow(3) fails to compile
[15:36:57] <SiegeLord> I'm not going into the real reason, to be polite
[15:37:01] * flaper87 is friend of everyone
[15:37:03] <flaper87> :D
[15:37:17] <mleise> ha, Rust can't pow!
[15:37:21] <eddyb> flaper87: then maybe it's ::std::num::pow(2, 3)? I don't really know. searching "pow" in the docs should give you a better answer
[15:37:52] <bjz> ugh, not pow!!
[15:38:11] <flaper87> eddyb: yeah, found that too but seems a bit limited
[15:38:13] * bjz shudders at him not having that for integers
[15:38:32] * flaper87 files a bug
[15:38:39] <bjz> flaper87: thanks!
[15:39:00] <bjz> flaper87: I have another numerics update in the works, which should be *awesome*
[15:39:03] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:39:42] <SiegeLord> 'pow' on integers should probably be a different pow than on floats
[15:39:49] <flaper87> bjz: w0000000000t, I thought about fixing the missing pow thing but if you're working on improving numerics, I'm fine to leave that to you
[15:40:04] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[15:40:11] <SiegeLord> But I'm sure that's taken into account ;)
[15:40:15] <flaper87> SiegeLord: AFAIk, it's a trait, I guess it could be impl for integers
[15:40:17] <flaper87> :D
[15:40:21] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:40:32] <eddyb> SiegeLord: an integer power is what it could be optimized for, AFAIK
[15:40:42] <eddyb> (exponentiation by squaring)
[15:40:51] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:40:52] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:40:58] <SiegeLord> My point was that pow for integers doesn't make too much sense with a negative or fractional exponent
[15:41:11] <bjz> flaper87: feel free to do it now
[15:41:13] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[15:41:27] <SiegeLord> You'd have to make it generic on the type of the exponent... which I guess you could do
[15:41:27] <Ms2ger> What, why not? :)
[15:41:35] <bjz> flaper87: my thing will be in the works for a while
[15:41:38] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:41:46] <bjz> flaper87: hopefully for 0.10
[15:41:50] <flaper87> bjz: kk, thanks
[15:41:50] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[15:42:58] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:43:01] <bjz> flaper87: btw, here is where I am doing my work: https://github.com/bjz/num-rs/blob/master/src/lib.rs
[15:43:01] *** Joins: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com)
[15:43:19] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[15:43:22] <flaper87> bjz: thanks for the link, I'll keep an eye on it.
[15:43:24] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:43:29] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:43:29] <flaper87> bjz: btw, anything I could help with? :D
[15:43:33] <bjz> flaper87: the plan is to make std::num much more naive and tied to the implementation
[15:43:57] <bjz> and then maybe have extra::num more founded in mathematical definitions
[15:44:06] <flaper87> bjz: https://github.com/mozilla/rust/issues/11499
[15:44:06] <SiegeLord> I guess I could live with a 'root' function/method for integers
[15:44:12] <Ms2ger> As a mathematician: boo! :)
[15:44:24] <bjz> that way we don't have an ugly compromise that we have at the moment
[15:44:37] <flaper87> IMHO, sounds reasonable!
[15:44:43] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:44:46] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:44:53] <bjz> SiegeLord: no, I was thinking more like: Num, Float, Integer
[15:45:06] <eddyb> Num = Float | Integer?
[15:45:23] <FliPPeh> Why has "@mut" been deprecated to "Rc<RefCell<T>>" instead of "Rc<&mut T>"?
[15:45:23] <bjz> eddyb: yep
[15:45:35] <SiegeLord> bjz: Well, which one of those will have the pow method?
[15:45:38] <FliPPeh> Isn't the last one much more readable?
[15:45:39] <eddyb> FliPPeh: &mut T is a borrowed pointer
[15:45:46] <FliPPeh> Ah
[15:46:03] *** Joins: gwty (gwtypc@2388A349.5D0460CB.D66E6624.IP)
[15:46:04] <FliPPeh> And RefCell owns a T?
[15:46:08] <bjz> SiegeLord: well floats would need both a pow and powf
[15:46:09] *** Joins: gwty_ (gwtypc@2388A349.5D0460CB.D66E6624.IP)
[15:46:21] <eddyb> FliPPeh: you also can't mutate through &&mut T, you need &mut &mut T to not break the rules
[15:46:27] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:46:31] <bjz> SiegeLord: but integers would also need a pow
[15:46:37] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:46:41] <SiegeLord> bjz: What's the difference between pow and powf for floats?
[15:46:46] <eddyb> FliPPeh: RefCell<T> contains a T, no indirection
[15:47:02] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[15:47:09] <bjz> SiegeLord: pow might take a uint, powf would take a fractional exponent
[15:47:13] <bjz> maybe
[15:47:25] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[15:47:31] <SiegeLord> I guess
[15:47:46] <bjz> just an idea
[15:48:03] <mleise> 2.pow(10) should ideally become 1 << 10
[15:48:09] <bjz> yes
[15:48:23] <FliPPeh> This borrowing system is pretty confusing if you're not used to it
[15:48:31] <FliPPeh> I'm a C programmer and I just love throwing around pointers
[15:48:41] <eddyb> FliPPeh: which is not safe nor sane
[15:48:49] <mleise> But can Rust specialize on literal ?
[15:48:53] <mleise> *s
[15:48:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[15:48:58] <eddyb> mleise: you mean constants?
[15:49:02] <Ms2ger> eddyb, fun, though!
[15:49:03] <mleise> yes
[15:49:03] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:49:07] <Ms2ger> eddyb, if you like adrenaline :)
[15:49:08] <bjz> FliPPeh: I would highly reccomend this: http://www.youtube.com/watch?v=gfCtbGiHcg0
[15:49:18] <eddyb> mleise: no, but LLVM can optimize some constructs
[15:49:32] <vmx> is there a way to pattern match one variable against another one? use case for me is a helper function for a test. i want to do something like match given { expected => {}, _ => fail!()}
[15:49:35] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:49:37] <bjz> FliPPeh: it should clear some things up - presentation by nmatsakis 
[15:49:41] <eddyb> Ms2ger: that's not how you spell FUN, though
[15:49:57] <mleise> eddyb: so int.pow(int) is already a LLVM intrinsic I assume?
[15:50:11] <flaper87> bjz: TBH, not sure what's the best way to add pwo to int is. The Real trait implements way more things than we'd like / should have for int
[15:50:16] <flaper87> bjz: suggestions?
[15:50:19] <eddyb> mleise: no, LLVM can optimize non-intrinsics
[15:50:32] <flaper87> I could just impl this method without using traits 
[15:50:46] <FliPPeh> bjz: Thanks, I have watched that earlier and I understand how rust deals with references, it's just very hard to get out of old habits
[15:50:49] <bjz> flaper87: yeah, I am planning to simplify lots
[15:50:49] <SiegeLord> I wonder how you plan on doing that :P
[15:50:57] <eddyb> mleise: range(0, 15).fold(0, |a, b| a + b) should be optimized to a constant by LLVM
[15:51:04] <eddyb> mleise: even though there's a lot of pointers in there
[15:51:14] <bjz> flaper87: https://github.com/mozilla/rust/issues/10387
[15:51:15] <Ms2ger> Should or is?
[15:51:49] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[15:52:08] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:52:09] <Tobba> trying to fix these moving issues now
[15:52:10] <eddyb> Ms2ger: if it isn't, it's either our beloved trans screwing up, or LLVM not const-evaluating the loop. I should check
[15:52:43] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:52:44] <doener> Ms2ger: is
[15:52:49] <Ms2ger> Neat
[15:52:58] <doener> ret i64 105
[15:52:59] <mleise> My experience with GCC is that const-folding is _very_ sophisticated in recent compilers
[15:53:24] *** Quits: Kxepal (Miranda@moz-33D0A42F.pppoe.mtu-net.ru) (Ping timeout)
[15:53:34] <eddyb> mleise:   ret i64 105
[15:53:38] <mleise> It's hard to benchmark anything without using external input or special compiler flags :p
[15:53:46] <eddyb> echo '#[inline(never)]fn foo()->int{range(0, 15).fold(0, |a, b| a + b)}fn main(){println!("{}", foo())}' | ./x*/stage0/bin/rustc --emit-llvm -S -o /dev/stdout --opt-level=3 - | c++filt | less
[15:53:52] <mleise> eddyb: I saw that
[15:53:52] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:53:56] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:54:03] <eddyb> doener: gah you beat me
[15:54:03] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:54:16] <flaper87> bjz: gotcha
[15:54:17] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:55:24] *** Joins: Kxepal (Miranda@moz-D1EB3C25.pppoe.mtu-net.ru)
[15:55:31] <mleise> I remember more than one occassion where someone posted benchmark results with compiler X being so much faster and then someone says, that in this time the CPU can't possibly have calculated 1_000_000 iterations of the loop :p
[15:55:40] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:55:47] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[15:56:06] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:57:25] <doener> eddyb: it's IMHO easier to read if you use "pub fn foo(){...}", skip main and pass --lib to rustc.
[15:57:25] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[15:57:31] <flaper87> bjz: mmh, what would be the best way to implement this as it's right now? Or should we just wait for your work to be done (even if it takes a bit more) ?
[15:57:31] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[15:57:39] <eddyb> doener: oh derp. I forgot that trick
[15:57:47] <bjz> flaper87: yeah maybe wait a little more - sorry
[15:58:35] <SiegeLord> Why not plop it into Int?
[15:58:43] <flaper87> bjz: no problem. My concern is that I don't want to add more stuff that will make the module worse. I'd rather wait for it to be cleaned up and survive with some dirty hack in my side
[15:58:50] <SiegeLord> Or Integer
[15:59:24] <Tobba> LLVM had some cool stuff going with optimization
[15:59:25] <flaper87> SiegeLord: we could do that, but mmh
[15:59:36] <Tobba> someone was working on something that would try and prove certain properties of functions
[16:00:08] <bjz> Tobba: I was hoping to have unit test helpers for extra::num
[16:01:07] <bjz> Tobba: for testing commutativity, distributivity etc. not hard proofs though (impossible in Rust), just unit tests
[16:01:28] <Tobba> proving properties of functions is useful in optimization
[16:01:42] <bjz> ah, I see what you mean
[16:02:23] <bjz> yeah, Fortress was using algebraic properties for optimising parallel operations
[16:02:32] <flaper87> SiegeLord: I guess Integer would be the right place
[16:02:47] <Tobba> also, where is clone() defined in libstd
[16:02:59] <bjz> Tobba: std::ops
[16:02:59] <eddyb> Tobba: std::ops, maybe. search for Clone
[16:03:03] <Tobba> though I dont know if cloning an option is a good idea, ugh
[16:03:09] <Tobba> I'm trying to fix these moving issues
[16:03:17] <bjz> gist Tobba ?
[16:04:09] <Tobba> https://gist.github.com/Tobba/756aa285594d2cc03795
[16:06:44] <bjz> Tobba: where is the error?
[16:07:17] <bjz> that's some good pyramids of doom you have there :D
[16:07:32] <Tobba> src\rust\core\mem.rs:79:26: 79:30 error: use of moved value: `left`
[16:07:33] <Tobba> src\rust\core\mem.rs:79                         let converge = match (left, right) {
[16:07:59] <Tobba> src\rust\core\mem.rs:79:26: 79:30 note: `left` moved here because it has type `lib::option::Option<&mut core::mem::LANode>`, which is non-copyable (perhaps you
[16:07:59] <Tobba> meant to use clone()?)
[16:07:59] <Tobba> src\rust\core\mem.rs:79                         let converge = match (left, right) {
[16:08:13] <Tobba> this bit of it seems kinda odd
[16:09:38] <bjz> is there a way you can split theing up into smaller functions?
[16:09:47] <Tobba> I dont think so without making it messier
[16:10:16] <Tobba> other than the various variants of (cursor.pos + cursor.size as uint) I cant see much duplicated code
[16:10:21] <bjz> it's a little hard to see what's going on - the logic looks quite convoluted - with mutability snaking around weirdly
[16:10:51] <bjz> but I only looked quickly - sorry, but busy
[16:10:59] <Tobba> thanks anyways
[16:11:37] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[16:12:25] <FliPPeh> So a RefCell<T> is a box that contains a value type T that can dynamically borrows out Ref<T> and MutRef<T> which can be used to acquire a "real" reference to the contained T?
[16:12:52] <bjz> Tobba: sorry, a bunch of accumulators/mutators with a loop below sends of alarm bells
[16:13:02] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[16:13:06] <FliPPeh> Well, not a box, just a wrapper around it
[16:13:08] <Tobba> its never actually mutated within the loop
[16:13:18] <doener> Tobba: ah, the loop is the problem
[16:13:28] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[16:13:38] <doener> Tobba: "left" is moved in the first iteration, and thus not available for the following ones
[16:13:48] <Tobba> ah, crap
[16:13:49] <FliPPeh> What's the advantage to just using references where borrowing is checked on compile time? If you try to borrow out an already borrowed Ref it'll just fail unless you use "try_borrow"
[16:13:52] * doener was thoroughly confused why the usage and the "previous" move were on the same line
[16:14:06] <Tobba> not exactly sure how to solve that
[16:14:13] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[16:14:23] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:14:38] <Tobba> I dont even know why scan() has mutables everywhere
[16:14:45] <Tobba> it doesnt actually mutate anything, but the compiler insists
[16:15:42] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[16:15:45] <FliPPeh> It's really confusing me and there is NO documentation to be found on it :/
[16:15:48] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[16:16:01] <FliPPeh> Except the API doc
[16:16:12] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:16:58] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[16:17:22] <bjz> FliPPeh: do you need a Ref<T>? what are you doing?
[16:17:49] <zxcdw> FliPPeh the Soldat dude!
[16:18:12] <FliPPeh> bjz: I don't need one, I was just following it on changes in rust. It says '@' is deprecated, okay, so it recommends Rc<RefCell<T>>
[16:18:17] <FliPPeh> zxcdw: hai!
[16:18:26] <FliPPeh> Now that was a long time ago
[16:18:29] <SiegeLord> FliPPeh: I think a compile time failure is slightly easier to diagnose than a runtime failure
[16:18:33] <zxcdw> Hai from Clawbug :)
[16:18:58] <doener> Tobba: the mutability originates from LinearAllocator::new()
[16:19:09] <FliPPeh> SiegeLord: true, that's why I am confused
[16:19:24] <FliPPeh> A RefCell calls fail and as far as I know, fail murders your program horribly
[16:19:35] <FliPPeh> A normal reference will be checked on compile time so it can't be borrowed twice
[16:19:36] <doener> Tobba: you need root to be mutable there, and because you have no immutable version of the root() method, it propagates
[16:19:47] <Tobba> ah
[16:20:15] <Tobba> so if I make an immutable version I can get rid of all the shitty mutability?
[16:20:35] <doener> Tobba: right, I modified that to have root() and root_mut(), using the latter in new()
[16:21:36] <doener> Tobba: and once the "mut"s are gone, the move problem disappears
[16:21:46] <eddyb> FliPPeh: replacing @mut requires RefCell (they actually behave almost identically, except the latter is in the library)
[16:21:47] *** Joins: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com)
[16:22:07] <Tobba> ah
[16:22:26] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[16:22:35] <eddyb> for @T it's just Rc<T> that you need
[16:22:46] *** Joins: shilgapira (chatzilla@moz-703651C7.barak.net.il)
[16:22:47] <Tobba> though I may need it to actually return a mutable LANode
[16:22:54] <Tobba> the method that uses scan is going to try and insert one or two nodes
[16:22:58] <FliPPeh> eddyb: So it's purely used for the managed pointers?
[16:23:01] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[16:23:30] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[16:23:49] <eddyb> FliPPeh: what is?
[16:23:58] <FliPPeh> eddyb: RefCell, sorry
[16:24:04] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[16:24:10] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[16:24:41] <eddyb> FliPPeh: no, it's used *to replace* @mut T (among other things) - which has been already removed - while @T is still there until it can be removed from the compiler code itself
[16:25:39] *** Joins: magg (magg@14B25297.CD956C53.3D0AE249.IP)
[16:26:36] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[16:26:47] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[16:27:06] <FliPPeh> eddyb: That's what I meant, whether it's purely used to replace "@mut T" with "Rc<RefCell<T>>" (and similar cases), or if it offers something that normal references like "&mut T" don't offer
[16:27:09] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[16:27:23] <eddyb> FliPPeh: you can't share &mut T
[16:27:25] *** Joins: Maato (maato@moz-8E1B3F2F.adsl-surfen.hetnet.nl)
[16:27:28] <FliPPeh> It's really confusing, especially since there is next to no documentation on it
[16:27:33] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[16:27:42] <FliPPeh> I mean in the general case outside of managed pointers
[16:27:47] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[16:27:50] <eddyb> RefCell allows you to mutate from an immutable slot
[16:28:30] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[16:28:48] *** Joins: GreyKnight (GK@moz-4E38896B.range86-176.btcentralplus.com)
[16:28:59] <eddyb> Rc<RefCell<T>> is a shared pointer to a dynamically mutable cell
[16:29:14] <Tobba> added linear allocator, broke bootloader
[16:29:22] <Tobba> osdev is magical
[16:29:32] <zxcdw> Is there a reason why a 20 line program with nothing but main() and a function with a few-hand match compile to a 3 MB executable when compiled with no additional flags but merely the filename.rs?
[16:29:36] <FliPPeh> I know, what my questio is, is RefCell<T> *just* used for this purpose or is there any reason to have it outside of a reference counted or garbage collected pointer
[16:29:54] <eddyb> zxcdw: static linking
[16:29:58] <Tobba> oh, the .elf file doesnt actually exist, that explains things
[16:30:13] <eddyb> FliPPeh: you can have it as part of a larger structure
[16:30:26] <FliPPeh> Is it purely meant to replace the "@mut T" case with "Rc<RefCell<T>>" or does it have more purpose to it?
[16:30:36] <zxcdw> eddyb: I'd think so, but is that a recent change? I don't remember seeing this a while back
[16:30:49] <eddyb> a month or so ago
[16:31:13] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:31:27] <Tobba> oh boy, time to implement libc in rust
[16:31:49] <eddyb> FliPPeh: you can have a trait which requires &self methods, but if you put fields of your struct in RefCells you can still mutate them
[16:32:24] <FliPPeh> eddyb: So you can use it to cheat around the immutability a bit?
[16:32:34] <eddyb> FliPPeh: that's what it does in the first place :)
[16:32:43] <eddyb> the "cheating" is actually safe
[16:32:59] <Tobba> is it possible to apply #[no_mangle] to an entire crate?
[16:33:13] <eddyb> I very much doubt that
[16:33:17] <Tobba> crap
[16:33:26] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:34:01] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[16:34:29] <shilgapira> Does Rust require anything special when you have an extern function that returns a struct?
[16:34:56] <shilgapira> I mean specifically when you're calling a Rust function from C code
[16:35:09] <eddyb> FliPPeh: RefCell is like a mutable local on the stack, that you can borrow to &T (multiple times) or &mut T (once, and not at the same time as a &T borrow)
[16:36:01] <eddyb> FliPPeh: the difference is that the RefCell itself doesn't need to be mutable, so you can share it (and/or have it behind a &T. which are similar in meaning anyway)
[16:36:31] *** Joins: jhasse (jhasse@moz-738D246F.dip0.t-ipconnect.de)
[16:36:38] <eddyb> hmpf. is there a very good reason for not allowing the use of "Self" outside of traits?
[16:36:52] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[16:37:03] <shilgapira> I'm trying to integrate Rust code into an iOS project and I think I'm missing something
[16:37:41] <eddyb> I'm not sure how to put the self argument in an ast::Arg without a proper type. or maybe I can cheat with an Option. or TyInfer
[16:38:28] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[16:38:33] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[16:38:45] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Quit: moostik)
[16:39:11] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[16:39:12] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[16:39:15] *** Quits: Kxepal (Miranda@moz-D1EB3C25.pppoe.mtu-net.ru) (Quit: Kxepal)
[16:39:23] <FliPPeh> I see, I just browsed the code for RefCell and I think I understand now. If you borrow a mutable reference from it, it enters unsafe code to pretty much coerce a mutable to its otherwise immutable contained value.
[16:39:35] *** Joins: Kxepal (Miranda@moz-D1EB3C25.pppoe.mtu-net.ru)
[16:39:41] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[16:39:46] <FliPPeh> eddyb: Thanks!
[16:40:54] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[16:43:04] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz)
[16:43:18] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Quit: Leaving.)
[16:43:48] <bstrie> bjz: what the hell is `fn infix +|`
[16:44:06] <bjz> custom operators!
[16:44:09] <bjz> xD
[16:44:15] * bjz jokes
[16:44:32] <kimundi> FliPPeh: RefCell basically encapsulates what was neccessarry for @mut to be safe into a common seperate type that can be used by any smartpointer with shared wonership
[16:44:43] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[16:44:47] <GreyKnight> shared wondership :-D
[16:44:54] <kimundi> ownership :P
[16:44:56] <bjz> bstrie: or fn (+|)(x: &T, y: &T) -> T XD
[16:45:24] * bjz kids again
[16:45:24] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[16:46:23] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[16:46:37] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[16:46:39] <GreyKnight> bjz: trying to recreate Haskell in all its operator-defining glory? :-)
[16:46:55] <bjz> GreyKnight: even better - Scala xD
[16:47:19] * bstrie defenestrates bjz
[16:48:02] * bjz should not propose things this early in the morning
[16:48:45] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[16:49:03] <Tobba> llvm is weird
[16:49:03] <FliPPeh> I'll miss @mut tho, I like the syntax better than Rc<RefCell<T>> :D
[16:49:10] <FliPPeh> It was so elegant for some reason
[16:49:13] <Tobba> I still have no idea if this is a legit good optimization or if its smoking crack
[16:49:15] <Ms2ger> For that suggestion, I'd implement a Punch-over-IP protocol
[16:49:22] <GreyKnight> bjz: pls wait until 1st of April first ;-)
[16:49:22] <Ms2ger> (bjz's, that is)
[16:50:29] <FliPPeh> I was quite sad to see the @'s being deprecated after reading about them in the tutorial, although I understand why they need to go
[16:50:56] *** Quits: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com) (Ping timeout)
[16:51:06] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[16:51:26] <GreyKnight> FliPPeh: I'm mostly just confused, because I'm still trying to learn things :-)
[16:51:26] *** Quits: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp) (Ping timeout)
[16:51:48] <GreyKnight> and the tutorials still refer to @
[16:51:51] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[16:52:21] <GreyKnight> I'm hopefully progressing past the "throw syntax at the thing until it starts working" stage
[16:52:52] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[16:53:38] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:54:12] *** Quits: alonlevy (alon@moz-2F877D0E.red.bezeqint.net) (Ping timeout)
[16:54:16] <bstrie> bjz: I'm amused at that exchange in ##c++ this morning
[16:54:29] <bjz> heh
[16:54:52] <bstrie> "rust is FUCKED if we ever standardize on a better computer architecture than the pitiful von neumann model. this is why C++ will be victorious"
[16:55:27] <bstrie> I'm pretty sure once we jump to quantum computers, all languages are fucked
[16:55:46] <bstrie> should be exciting
[16:56:34] <FliPPeh> What couples Rust to the von neumann model?
[16:57:42] <eddyb> bstrie: Quantum Rust
[16:58:08] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[16:58:32] <benh> rust is FUCKED if we ever standardize on a non-oxidizing metal.
[16:58:36] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[16:58:59] <eddyb> #[lang="qubit"]
[16:59:12] <eddyb> future proof much?
[16:59:21] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[16:59:36] <Axord> benh: I laughed.
[16:59:36] <eddyb> ~Any:Quantum
[16:59:37] <FliPPeh> If I remember correctly, he means the "data memory == code memory" part. Does that mean that rust expects code and data to be in the same memory and wouldn't work on, for example, AVR microcontrollers, which use the harvard arch?
[16:59:49] <eddyb> FliPPeh: that's complete BS
[16:59:51] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[16:59:52] *** Quits: achim (achim@moz-571082C9.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[17:00:08] <FliPPeh> eddyb: Good to know, so ##C++ hasn't changed all these years
[17:00:09] <Tobba> ugh what
[17:00:20] <LinearInterpol> lolwut.
[17:00:22] <Tobba> self.space is becoming 0, its initialized to 100 though
[17:00:30] <LinearInterpol> nothing couples rust to the von neumann model.
[17:00:33] <eddyb> Rust doesn't actually deal with code memory at all (well, there's function pointers, but it doesn't expect them to be in data memory)
[17:00:53] <eddyb> if LLVM supports AVR (I know there's a branch on github), so can Rust
[17:01:30] <benh> I do appreciate tho that if we ever get a radically different computing model that fundamentally changes what kind of algorithms we can implement, i'll still be able to use boost.shared_ptr
[17:01:40] *** Joins: n9519 (user7279@AFAE7AD4.80E526F4.57F5F11F.IP)
[17:02:23] <LinearInterpol> quantum computation won't change things very much. the model itself is based off of probabilistic computing, which.. honestly doesn't interfere with most modern methods of computation.
[17:02:32] *** Quits: n9519 (user7279@AFAE7AD4.80E526F4.57F5F11F.IP) (Quit: TurboIRC for Android. Available @ Google Play.)
[17:02:45] <Tobba> not really
[17:02:50] *** Joins: achim (achim@moz-571082C9.dip0.t-ipconnect.de)
[17:02:58] <Tobba> it allows you to reverse some computation standard computing cant
[17:03:06] <Tobba> due to how the transformations work
[17:03:12] <Tobba> thats basicaly it though
[17:04:15] *** Joins: ling0322 (Android@AFAE7AD4.80E526F4.57F5F11F.IP)
[17:04:19] <LinearInterpol> Tobba: that's only due to the symmetry of the transformations on qbits.
[17:04:37] <Tobba> yeah
[17:04:39] <LinearInterpol> you take that out and it's pretty much the same. :P
[17:04:45] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[17:04:45] <LinearInterpol> it's optional.
[17:05:09] <Tobba> it can be good for certain numerical analysis though
[17:05:10] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[17:05:17] <Tobba> + crypto breakage
[17:05:30] <rdn> is there a code formatting tool and/or linter for rust?
[17:05:34] <FliPPeh> Then we shall crypto anew
[17:05:34] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[17:05:37] <LinearInterpol> that it can. the model is built around matrices, so.. :P
[17:05:51] <LinearInterpol> I wouldn't be surprised if we had a sort of APL variant as our new language for quantum computation.
[17:06:01] <Tobba> oh boy
[17:06:03] <eddyb> rdn: rustc is a linter :)
[17:06:14] <Tobba> I think I could program a quantum computer with some reading
[17:06:22] <Tobba> the problem is since noones built one noone knows how it'd work anyways
[17:06:36] <Tobba> bit hard to figure it out preemptively
[17:06:42] <LinearInterpol> people have built quantum computers..
[17:06:44] * eddyb points a finger to D-Wave
[17:06:48] <Tobba> oh right
[17:06:52] <eddyb> (and then to all the critique)
[17:07:21] <Tobba> I dont remember their chips being very useful though
[17:07:41] <LinearInterpol> like I said, it's all just probabilistic computing with symmetry.
[17:07:54] <LinearInterpol> only the probability component is deciable using physical law. :P
[17:07:56] <Tobba> it could still make for one hell of a coprocessor
[17:08:20] <eddyb> LinearInterpol: maybe you're forgetting entanglement?
[17:08:28] <Tobba> oh yaeh
[17:08:30] <Tobba> yeah*
[17:08:33] <Tobba> entanglement is gonna rock
[17:08:57] <eddyb> which is an exponential cost for simulating quantum computing
[17:08:57] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[17:08:59] <LinearInterpol> eddyb: I'm not. the operation of a quantum computer reduces to the operation of a probabilistic computer.
[17:09:02] *** Quits: shilgapira (chatzilla@moz-703651C7.barak.net.il) (Ping timeout)
[17:09:09] <LinearInterpol> people have simulated quantum computers before.
[17:09:13] <LinearInterpol> there's even a web simulator. :P
[17:09:15] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:09:43] <LinearInterpol> in fact, here.
[17:09:46] <LinearInterpol> http://www.quantiki.org/wiki/List_of_QC_simulators
[17:09:59] <LinearInterpol> there's hundreds. :P
[17:10:05] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz)
[17:10:12] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[17:10:17] <eddyb> simulating entanglement in one of those sqrt(N) bruteforce optimization algorithms (someone's search. I can't remember the name) will make it at least a few orders of magnitude slower than regular bruteforce
[17:10:24] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[17:11:03] <LinearInterpol> entanglement isn't exactly difficult to simulate. :\
[17:11:09] <eddyb> but it's expensive
[17:11:17] <LinearInterpol> not entirely..
[17:11:23] *** Joins: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch)
[17:11:34] <LinearInterpol> there's an entanglement library written in perl for god's sake. :P
[17:11:46] <eddyb> LinearInterpol: Grover's Search was it? look it us, it uses entanglement to do anything useful at all
[17:12:35] <eddyb> s/us/up
[17:12:51] <eddyb> anyways, I should go back to fighting the AST for self, this is boring
[17:12:54] <LinearInterpol> lessee here.
[17:13:48] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:14:09] <LinearInterpol> eddyb: observation, and entanglement in general, isn't exactly tasking on the computer unless you're using some kind of convoluted simulator...
[17:14:19] <LinearInterpol> I don't see where you see that. :P
[17:14:42] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:14:48] <eddyb> entanglement is exponential by "design"
[17:14:53] <magg> how do i print the ascii code 128-255 in string form?
[17:15:32] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:15:35] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:16:03] <eddyb> LinearInterpol: best case scenario: you can "optimize" a sqrt(N) quantum search to an N non-quantum bruteforce
[17:16:10] *** Quits: thiez (thiez@moz-BF669398.student.utwente.nl) (Ping timeout)
[17:16:27] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:16:33] *** Quits: ling0322 (Android@AFAE7AD4.80E526F4.57F5F11F.IP) (Client exited)
[17:16:53] <LinearInterpol> worst case it's exponential.
[17:17:02] <LinearInterpol> alright, I see what you mean now.
[17:17:09] *** Joins: ling0322 (Android@AFAE7AD4.80E526F4.57F5F11F.IP)
[17:17:17] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:17:22] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:17:46] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Client exited)
[17:17:48] *** Joins: mcomella (mcomella@moz-AE370C8B.hsd1.ca.comcast.net)
[17:18:02] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:19:06] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:19:09] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:19:11] <eddyb> N entangled qubits means (potentially) 2^N combined states to deal with for every operation. that quantum search is massively parallelized in a way. it still takes a lot of time just because it has to increase the probability of the correct result to be observed, over a certain threshold
[17:19:44] <kimundi> magg: Depends on what output you expect - For starters, ASCII is not defined on values greater than 127 :P
[17:20:29] *** mcomella is now known as mcomella-home
[17:20:31] <magg> kimundi, so do i have to  use utf8
[17:20:33] *** Parts: mcomella-home (mcomella@moz-AE370C8B.hsd1.ca.comcast.net) (Leaving)
[17:20:50] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:20:56] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:21:09] *** Joins: alonlevy (alon@moz-2F877D0E.red.bezeqint.net)
[17:22:40] *** Joins: ponce (ponce@moz-D65F4148.fbx.proxad.net)
[17:22:58] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[17:23:34] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:23:37] <Yurume> I'm trying to document the installation procedure for Windows nightlies
[17:24:03] *** Quits: magg (magg@14B25297.CD956C53.3D0AE249.IP) (Quit: magg)
[17:24:29] <Yurume> Chocolatey seems to work except that it does not have a progress bar somehow (and it happens to download 100 megs of nupkg)
[17:24:44] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:24:45] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:26:06] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:26:25] *** Quits: ling0322 (Android@AFAE7AD4.80E526F4.57F5F11F.IP) (Quit: -a- Android IRC 2.1.3)
[17:27:54] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[17:28:02] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[17:29:50] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:30:47] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:30:47] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[17:30:56] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[17:31:04] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:32:01] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[17:32:34] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:32:34] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:32:54] <Tobba> ugh
[17:33:02] <Tobba> I think I'm having memory corruption, this is going to suck
[17:33:15] <adridu59> how would I go about implementing Round trait for integers? just returning self?
[17:33:34] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[17:33:42] <adridu59> numbers need to impl Round to validate the Real trait (real numbers)
[17:33:52] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit:  .)
[17:33:54] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[17:35:30] <Tobba> that or I broke my memcpy implementation, ugh
[17:37:37] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[17:37:39] <GreyKnight> Tobba: so you're making a POSIX OS in rust?
[17:37:43] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:37:43] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[17:37:52] <cmr> I hope it's not posix
[17:37:55] <cmr> posix is boring and bad
[17:37:59] <jhasse> Yurume: where do you document it?
[17:38:17] <cmr> adridu59: that sounds right.
[17:38:20] <Yurume> currently in my gist (and in Korean for now)
[17:38:22] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[17:38:27] <cmr> adridu59: I don't see any other sane way of doing it
[17:38:27] <Tobba> not POSIX
[17:38:29] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[17:38:29] <GreyKnight> cmr: RUSTIX then :-P
[17:39:09] <Tobba> its a more object oriented model I'm going with
[17:39:17] <tOkeshu> cmr: why it is boring and bad ?
[17:39:18] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:39:24] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:39:32] <tOkeshu> Tobba: what is your goal for this OS in rust ?
[17:39:44] <Tobba> multitasking, hopefully some form of graphical
[17:39:49] <Tobba> and EVERYTHING in rust
[17:39:55] <tOkeshu> Tobba: so desktop ?
[17:39:58] <Tobba> not really
[17:39:58] <GreyKnight> boring because it's been done a lot, and bad because it uses "evil" pointers :-)
[17:40:01] <Tobba> that stuff is tricky
[17:40:01] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[17:40:07] <adridu59> cmr: sounds inefficient to pass to a function to return self through :( polymorphism is weird sometimes
[17:40:13] <Tobba> well possibly, more like a console with a bouncing cube demo
[17:40:19] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz)
[17:40:21] <adridu59> but it's generally a good thing imo
[17:40:36] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:40:38] <tOkeshu> Tobba: so not aimed for production or anything ?
[17:40:41] <cmr> adridu59: smack an #[inline] on it, it'll get inlined and optimized away.
[17:40:47] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[17:41:01] <adridu59> cmr: :)
[17:41:02] <Tobba> tOkeshu: well not initially at least
[17:41:04] <cmr> tOkeshu: boring because it's overdone, yes. it's bad because it's huge and poorly designed.
[17:41:04] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:41:08] <Tobba> gotta get something working first
[17:41:10] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:41:11] <cmr> GreyKnight: nothing to do with opinters
[17:41:26] <adridu59> that's really cool, I don't know much about inlining
[17:41:40] <GreyKnight> cmr: well, because of all the historical reasons stuff I guess
[17:41:47] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[17:41:50] <GreyKnight> sorry there's a four-year-old jumping on my head
[17:42:43] <tOkeshu> cmr: could you give hints about what need to be "improved" or removed in POSIX ? or just a plain concrete example ?
[17:42:52] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:42:56] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:43:03] <FliPPeh> is #[cfg(foo)] used to only compile the following code if "--cfg foo" is given?
[17:43:07] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[17:43:09] <cmr> FliPPeh: yes
[17:43:14] <FliPPeh> cmr: Many thanks!
[17:43:31] <Tobba> ugh, what the shit is even going wrong here
[17:43:44] <Tobba> I think its my memcpy implementation but I see nothing wrong with it
[17:43:59] <GreyKnight> try reversing the polarity of the byte flow
[17:44:11] <FliPPeh> try turning it off and on again
[17:44:18] <Tobba> "return value: destination is returned"
[17:44:25] <Tobba> this might be why
[17:44:37] <cmr> tOkeshu: well, aio for example is a mess. it's mostly a philosophical thing I guess. I don't think classic unix is a good design.
[17:44:42] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:44:43] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:44:45] * cmr afk, twir
[17:45:06] <Tobba> apparently not
[17:46:29] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:46:30] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:46:46] *** Quits: derek_c (derek@F1E7D1FB.78B8FD9.C34016C.IP) (Quit: Leaving)
[17:46:58] <GreyKnight> cmr: I guess POSIX was more a question of "standardise stuff that already exists" rather than coming up with a good basic design.  More of a Common Lisp than a Scheme.
[17:48:10] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:48:11] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:48:17] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:48:26] <tOkeshu> GreyKnight: ah, interesting
[17:50:00] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:50:05] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:50:23] <LinearInterpol> "Rust needs more monads" said nobody ever.
[17:50:46] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[17:50:53] *** Quits: GreyKnight (GK@moz-4E38896B.range86-176.btcentralplus.com) (Ping timeout)
[17:51:02] <whitequark> some syntactic sugar for monads would be rather convenient to add lightweight threads
[17:51:22] <whitequark> (like ocaml's lwt: http://ocsigen.org/lwt/. also called promises by some.)
[17:51:38] *** Joins: GreyKnight (GK@moz-4E38896B.range86-176.btcentralplus.com)
[17:51:44] <whitequark> I was looking the other day whether it's possible to make such sugar with macro_rules, but it's too ugly
[17:51:50] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:51:52] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:52:33] * bstrie fends off the monad-requesters with a broom
[17:52:50] <bstrie> no monads for 1.0!
[17:53:11] <bstrie> once rust is popular, then we can afford to make it forbiddingly incomprehensible
[17:53:14] <bstrie> but not before
[17:53:23] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[17:53:37] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:53:38] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:53:54] <LinearInterpol> bstrie++;
[17:53:55] <GreyKnight> Rust needs more monads
[17:54:08] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Ping timeout)
[17:54:10] <whitequark> that would actually be much more comprehensible than the equivalent code written out completely
[17:55:07] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[17:55:18] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:55:24] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:55:25] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:55:34] <Yurume> okay, I have a draft: https://gist.github.com/lifthrasiir/8386766
[17:55:39] <Yurume> ...in Korean. sorry ;)
[17:57:06] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[17:57:12] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[17:57:22] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[17:58:41] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:59:28] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[17:59:48] *** Joins: rca (rcatolino@moz-E246AD29.adsl.proxad.net)
[18:00:23] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Connection reset by peer)
[18:00:36] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:02:44] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[18:03:14] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:03:34] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[18:04:30] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:04:31] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:04:50] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[18:05:22] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[18:05:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[18:06:26] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[18:06:48] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:07:07] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[18:08:27] <jhasse> when creating a struct, what does this mean: foobar { a: value, b: value, .. some_function() }
[18:08:39] <jhasse> some_function() returns foobar
[18:08:57] <benh> it means to take all the values from the returned foobar except those for a and b
[18:09:10] <jhasse> ah i see. Pretty smart
[18:09:12] <jhasse> thanks :)
[18:09:18] <benh> it's neat for defaults!
[18:09:32] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[18:09:46] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:11:18] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[18:11:18] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:11:19] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:11:46] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[18:12:06] <GreyKnight> oh that's nice
[18:12:59] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:13:06] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:14:19] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:14:47] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:14:53] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:15:13] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:15:45] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[18:15:54] <Yurume> jhasse, if you are interested, https://gist.github.com/lifthrasiir/8386766 has a (crude) English version now.
[18:16:14] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[18:16:27] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[18:16:37] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:16:40] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:16:58] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:18:24] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:18:26] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:19:44] <jhasse> Yurume: cool! Looks good. I'm not using powershell/cmd.exe though, but some windows users apparently do, so this will help them :)
[18:19:49] <Seldaek> can anyone help me to debug a windows FFI call that just crashes my process?
[18:20:12] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:20:14] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:20:23] <Yurume> jhasse, I haven't tested it thoroughly, I confirmed that Hello World works though
[18:20:39] <Yurume> will port the existing 0.8 codes soon to test it out
[18:21:18] <LinearInterpol> Does rust have a standard?
[18:21:19] <Yurume> and I think the MSYS shell doesn't like batch files, so I'll need to cover that
[18:21:32] <Yurume> no
[18:21:55] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:22:00] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:22:01] *** Joins: dgalling (dgalling@moz-643228D9.dyn.optonline.net)
[18:22:11] <Yurume> there are two kinds of "standard" documents which the current Rust does not have either
[18:22:28] <Yurume> (one for the standardization organizations, one for the formal documentation)
[18:22:29] <LinearInterpol> lol. I keep forgetting that it's in alpha.
[18:23:24] <Yurume> LinearInterpol, core devs are willing to formally document the completed language though, so if you want that keep watching :)
[18:23:41] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[18:23:43] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:23:43] * LinearInterpol watches intently through a pair of binoculars. :)
[18:23:48] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[18:23:54] <Ms2ger> Or you could help out ;)
[18:24:07] <Yurume> gah, 3:20 AM here :S
[18:24:10] <SiegeLord> I feel like backwards compatibility is very hard without a specification
[18:24:22] <Yurume> SiegeLord, I'm not sure it would happen before 1.0 or after 1.0
[18:24:22] <LinearInterpol> I don't know that much about the language, that's the issue. I still don't understand how enums work in Rust. :P
[18:24:30] <SiegeLord> So I'd really hpe they make it before 1.0
[18:25:00] <Yurume> anyway, good night (or good non-night :)
[18:25:03] *** Joins: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net)
[18:25:07] <LinearInterpol> peace. :)
[18:25:25] *** Quits: dgalling (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:25:49] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[18:25:51] *** Joins: logicalparadox (logicalpar@moz-6BFE65E6.dr01.wlbr.pa.frontiernet.net)
[18:26:21] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[18:26:50] *** Quits: dgalling1 (dgalling@moz-643228D9.dyn.optonline.net) (Ping timeout)
[18:27:10] *** Joins: shilgapira (chatzilla@moz-703651C7.barak.net.il)
[18:27:34] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[18:28:31] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:29:08] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[18:29:51] <pzol> what's the current "status" on polymorphic methods?? i.e. same method name, different arguments / signature?
[18:31:51] <GreyKnight> I was wondering that too
[18:34:09] <pzol> I mean if you look at std::str::StrVector... you can see the awkwardness ... it's concat without separator and connect WITH separator... that's pretty confusing
[18:34:38] <pzol> if not method overloading, then maybe defaults for args? (as in e.g. ruby)
[18:34:55] <whitequark> not for 1.0, that's been discussed to death on issue tracker
[18:35:16] <SiegeLord> No plans for overloading, afaik, but lukewarmness towards keyword/default arguments
[18:35:26] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[18:35:42] <pzol> default args would work :)
[18:35:57] <Tobba> okay
[18:36:02] <Tobba> I have no idea what is going on
[18:36:15] <Tobba> the struct corrupts itself when it leaves the constructor
[18:38:27] *** Quits: achim (achim@moz-571082C9.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[18:39:11] <acrichto> pzol: you can emulate polymorphism with traits
[18:39:21] <acrichto> pzol: fn foo<T: Trait>(&self, t: T)
[18:39:31] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[18:39:46] *** Joins: rca_ (rcatolino@moz-5C941ACC.adsl.proxad.net)
[18:40:15] <pzol> @acrichto I am not following...
[18:40:25] *** Quits: rca (rcatolino@moz-E246AD29.adsl.proxad.net) (Ping timeout)
[18:40:50] <acrichto> pzol: your trait is implemented by each type of argument you wish to accept
[18:40:53] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:40:53] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[18:40:59] <acrichto> fn add<T: ToInteger>(&self, t: T)
[18:41:04] <acrichto> let i = t.to_integer()
[18:41:16] <eddyb> I think pzol was strictly referring to function argument overloading
[18:41:33] <eddyb> not polymorphism in the generic sense
[18:41:33] <Tobba> http://pastebin.com/z7h8nGQs
[18:41:37] <Tobba> I cant figure out whats wrong with this
[18:41:42] <Tobba> but its obviously not working as it should
[18:41:44] <acrichto> eddyb: traits emulate that still
[18:41:55] *** Quits: KindOne (KindOne@moz-D69C8515.dynamic.ip.windstream.net) (Ping timeout)
[18:42:07] <pzol> @acrichto aaa  ok, but can you do that with different arities?
[18:42:16] <eddyb> acrichto: you still need variadic generic to get to full function argument overloading
[18:42:18] <acrichto> pzol: not with traits
[18:42:30] <acrichto> eddyb: "emulate"
[18:42:31] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[18:43:52] <pzol> yeah... as I mentioned... you see the weirdness: http://static.rust-lang.org/doc/master/std/str/trait.StrVector.html#tymethod.connect
[18:44:00] <eddyb> impl SomeFnImpl for (A, B, C) {fn call_some(&self) {let (a, b, c) = *self;...}} fn some_fn<Args: SomeFnImpl>(..args: Args) {args.calls_some();}
[18:44:39] <eddyb> at that point, strcat will give up trying to keep Rust pure from "specialization"
[18:45:43] *** Joins: KindOne (KindOne@moz-AD9EA3F2.dynamic.ip.windstream.net)
[18:45:45] *** Quits: alonlevy (alon@moz-2F877D0E.red.bezeqint.net) (Ping timeout)
[18:46:03] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[18:48:27] *** Joins: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP)
[18:50:09] *** Joins: fabiand (fabiand@moz-C69053D9.static.qsc.de)
[18:51:12] *** Joins: kzzch (kzzch@moz-BB97B490.washdc.fios.verizon.net)
[18:53:19] *** Joins: achim (achim@moz-571082C9.dip0.t-ipconnect.de)
[18:53:34] <SiegeLord> One should not that already works, just needs an extra set of parentheses
[18:53:37] <SiegeLord> *note
[18:53:55] *** Joins: wycor (Mibbit@moz-32AA9737.domolink.elcom.ru)
[18:54:07] <lassej> pzol: I like the objective-c / rubymotion approach, i.e. making argument (names) part of the method signature and treating them as different methods
[18:54:17] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:54:38] <SiegeLord> I'd rather have keyword args than overloading/just default args/variadic templates though
[18:55:02] <pzol> lassej yeah, but that can clutter your code... I think keyword args/defaults are better
[18:55:23] <GreyKnight> I really like named arguments myself
[18:55:27] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[18:55:30] <FliPPeh> Does Rust have support for dynamically loadable .so's already?
[18:55:52] <lassej> pzol why would that clutter the code?
[18:56:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[18:56:00] <FliPPeh> runtime loadable, that is
[18:56:14] <pzol> lassej you have a separate method for each variation, right?
[18:56:17] <kimundi> FliPPeh: Yes, but not with an safe interface yet
[18:56:50] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[18:56:53] <kimundi> FliPPeh: That is, you can load a dynamic library at runtime, and call static functions from it, but nothing prevents you from giving the wrong type for what you want to call there
[18:57:13] *** Joins: ptc1 (Adium@moz-192425C4.nyc.res.rr.com)
[18:57:21] <lassej> pzol, yes but that's a good thing IMO. it would allow you to only specify the combinations of arguments that make sense
[18:57:23] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[18:57:24] <kimundi> (Also you need to know the mangled name, or use a lib without mangled names)
[18:57:57] <lassej> pzol, sometimes it's either or
[18:58:03] *** Quits: FreeFull (freefull@moz-9CE25B3E.as13285.net) (Ping timeout)
[18:58:17] *** Joins: FreeFull (freefull@moz-5FBA4B73.as13285.net)
[18:58:20] *** Quits: FreeFull (freefull@moz-5FBA4B73.as13285.net) (Quit: FreeFull)
[18:58:24] <FliPPeh> Then I shall #[no_mangle] until it works!
[18:58:29] *** Joins: scpayson (scp@moz-9BEDE8C8.hsd1.ca.comcast.net)
[18:58:32] *** Joins: FreeFull (freefull@moz-5FBA4B73.as13285.net)
[18:58:45] *** Quits: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP) (Ping timeout)
[18:58:56] *** Quits: ptc1 (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[18:59:12] <FliPPeh> Since in my case I'll be the one writing the loadable lib as well as the loader, I guess I could make it work
[18:59:30] <FliPPeh> Is there some documentation on it? I just tried a quick google, sadly unsucessful
[18:59:31] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Leaving...)
[19:00:31] <eddyb> FliPPeh: google? for Rust? that doesn't tend to work
[19:00:38] <Tobba> yeah
[19:00:46] <eddyb> searching the docs and asking in IRC is way more productive
[19:00:52] <Tobba> ... I think I just realized what was wrong however
[19:01:06] <Tobba> or not
[19:01:10] <Tobba> I cant even tell anymore, goddamn
[19:01:25] <Tobba> it tries to tell memcpy and then the execution just spirals out of control
[19:01:37] <eddyb> Tobba: we're both like Gandalf
[19:01:45] <eddyb> "I have no recollection of this place"
[19:01:50] <FliPPeh> Searching for rust on google more often than not yields results for the game or SSL certificate authorities using "trust" in their names
[19:01:59] <FliPPeh> It's bad
[19:02:01] <Tobba> hahahaha
[19:02:01] <eddyb> FliPPeh: try "rust" instead, lol
[19:02:11] <eddyb> though that doesn't filter the game out
[19:02:15] <Tobba> garry newman/facepunch made a game named rust
[19:02:19] <Tobba> whcih got popular for some dumb reason
[19:02:26] <FliPPeh> Mostly I search with "rust lang"
[19:02:34] <FliPPeh> Tobba: You get to run around chasing naked people
[19:02:39] <FliPPeh> It's all you'd want from a game
[19:02:43] <Tobba> I played it before they added naked cavemen
[19:02:48] <Tobba> before you had to pay for it even
[19:03:02] <Tobba> he just had a hidden subforum on facepunch and dropped keys occasionally, but he wiped most accounts sometime in 2003
[19:03:08] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:03:10] <Tobba> 2013*
[19:03:23] <FliPPeh> It seems fun, although I'm not a big fan of the PVP system they use
[19:03:36] <SiegeLord> It's hard to find because for whatever reason the documentation for it is not generated :P
[19:03:38] <FliPPeh> It's like DayZ, you get zombies but what kills you in the end are always other players
[19:03:40] <Tobba> I think the playerbase is the issue
[19:03:44] <Tobba> wanna kill some braincells? http://facepunch.com/forumdisplay.php?f=415
[19:03:53] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[19:04:02] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[19:04:15] * LinearInterpol clicks. 
[19:04:17] <SiegeLord> It's in std::unstable::dynamic_lib
[19:04:29] <Cevn> Hello 
[19:04:34] <eddyb> SiegeLord: "unstable" is the "whatever" reason
[19:04:38] <SiegeLord> And I don't think "unstable" is a good reason
[19:04:44] <FliPPeh> unstable is always a good sign
[19:04:47] <SiegeLord> I could put all of std under unstable and not be wrong
[19:04:48] <FliPPeh> It promises fun
[19:04:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[19:04:58] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[19:04:59] <eddyb> SiegeLord: "internal" would make more sense
[19:05:14] <Cevn> This may be an irrelevant question but in rust 0.8 I had a 'rust' binary I could use to test things, but it seems to have vanished during the upgrade process 
[19:05:31] <Cevn> how do I run test functions now? 
[19:05:34] <eddyb> it's supposed to be lower-level stuff wrapped by the rest of std
[19:05:47] <eddyb> Cevn: compile a test binary with rustc --test
[19:05:50] <eddyb> then run it
[19:06:01] <Cevn> eddyb: thank you 
[19:06:45] <Tobba> I think this is an ABI issue
[19:06:49] *** Quits: gwty (gwtypc@2388A349.5D0460CB.D66E6624.IP) (Ping timeout)
[19:06:51] <Tobba> ugh
[19:06:58] *** Quits: gwty_ (gwtypc@2388A349.5D0460CB.D66E6624.IP) (Ping timeout)
[19:07:05] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:07:15] *** Quits: khodzha (khodzha@E048973E.2AEE264E.CA6E2165.IP) (Ping timeout)
[19:07:27] *** Joins: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP)
[19:07:32] <Tobba> yep the argument reading is crapping out
[19:07:33] <Tobba> joy
[19:08:04] <eddyb> Tobba: are you trying to call a Rust function from C?
[19:08:15] <Tobba> Rust <-> Rust, sorta
[19:08:15] <bjustin> I have code that depends on rust-sdl2, which I have as a subdirectory named `rust-sdl2` in my project. I'm passing `-L rust-sdl2` to rustc, but I get "error: can't find crate for `sdl2`"
[19:08:23] <Tobba> I have a memcpy function written in rust
[19:08:30] <FliPPeh> I can't find std::unstable :(
[19:08:30] <eddyb> Tobba: is it marked extern "C"?
[19:08:31] <Tobba> which I link to with ld
[19:08:35] <Tobba> ah, nope
[19:08:37] <eddyb> FliPPeh: look in the source
[19:08:45] *** Joins: gwty (gwtypc@2388A349.5D0460CB.D66E6624.IP)
[19:08:50] <Tobba> it seems to expect an extra argument
[19:08:51] <FliPPeh> eddyb: No docs? Got it, thanks!
[19:08:51] <eddyb> Tobba: Rust ABI has an extra argument in the front fwiw
[19:08:52] *** Joins: gwty_ (gwtypc@2388A349.5D0460CB.D66E6624.IP)
[19:08:53] <bjustin> how do I compile and link against rust-sdl2 properly?
[19:08:56] <Tobba> ...........
[19:09:00] <eddyb> Tobba: I'm removing it right now
[19:09:02] <Tobba> well fuck
[19:09:04] <Tobba> whats it for though
[19:09:08] <eddyb> closures
[19:09:12] <Tobba> ah
[19:09:14] *** Joins: lenstr_ (lenstr@CDBC68DA.9636F313.7A27613B.IP)
[19:09:16] *** Quits: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP) (Ping timeout)
[19:09:16] <Tobba> doesnt make any sense on functions tho
[19:09:26] <Tobba> though extern "C" should probably have been there anyways considering I'm writing a libc
[19:09:30] <eddyb> Tobba: you can pass functions as closures
[19:09:37] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[19:09:38] <Tobba> ah, right
[19:09:39] <eddyb> without any wrappers whatsoever
[19:09:52] <SiegeLord> Why are you removing it then?
[19:10:32] <Tobba> well its still broken, oh well
[19:10:34] <eddyb> SiegeLord: because it's dumb
[19:11:00] <Tobba> seems to generate the same bytecode
[19:11:07] *** Quits: lenstr_ (lenstr@CDBC68DA.9636F313.7A27613B.IP) (Ping timeout)
[19:11:09] <Tobba> odd
[19:11:15] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[19:11:19] <eddyb> casting a function to a closure will require an auto-generated wrapper, but I believe it's worth the (rare) cost
[19:11:20] <jhasse> bjustin: call the subdirectory sdl2
[19:11:30] <Tobba> wait, its just failing to build
[19:11:33] <Tobba> doh
[19:11:42] <jhasse> bjustin: there's a folder in rust-sdl2/src called sdl2
[19:11:44] <SiegeLord> Is this empty env argument a performance issue?
[19:11:58] <jhasse> bjustin: copy this folder to your src/ folder (if you're using rustpkg)
[19:12:09] <bjustin> ok I'll try that
[19:12:14] <Tobba> and it triple faulted
[19:12:17] <Tobba> unf
[19:12:32] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[19:13:02] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[19:13:03] <eddyb> Tobba: LLVM won't treat an extern "C" fn memcpy as the real one
[19:13:08] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[19:13:14] <Tobba> it will if I add no_mangle
[19:13:35] <eddyb> because the actual code is in the rust function which is not called memcpy, it will call memcpy from memcpy
[19:13:39] <jhasse> bjustin: when you're passing -L rust-sdl2 to rustc it looks for sdl2/lib.rs
[19:13:43] <eddyb> have fun :)
[19:13:48] <Tobba> I somehow managed to exhaust all of my 32KB of stack however
[19:13:54] <Tobba> and then it overflowed
[19:13:54] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[19:13:57] <eddyb> infinite recursion, of course
[19:14:04] <whitequark> oh, another person with the memcpy quick
[19:14:06] <eddyb> Tobba: strcat hit this a while back, removing the env parameter should fix it
[19:14:06] <whitequark> *quirk
[19:14:08] <Tobba> and then execution spiraled out of control and hit a int3
[19:14:15] <whitequark> one second, I'll tell you how to fix it
[19:14:20] <Tobba> env parameter?
[19:14:29] <bjustin> ugh git submodules are hard
[19:14:32] <jhasse> bjustin: ups sry, that was wrong. You should pass -L rust-sdl2/src
[19:14:42] <eddyb> Tobba: the extra parameter that exists just to pass functions as closures
[19:14:55] <whitequark> Tobba: pass -disable-simplify-libcalls to opt for it to not replace copying loops with memcpy
[19:15:46] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:16:31] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[19:16:47] <Tobba> alright
[19:17:00] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[19:17:01] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:17:20] <FliPPeh> So, what does happen when fail! is called? Is it an unrecoverable exception?
[19:17:31] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:17:34] <Tobba> hooray
[19:17:34] <Tobba> it works
[19:17:51] <bjustin> jhasse: -L rust-sdl2/src didn't make a difference
[19:18:16] <eddyb> FliPPeh: it unwinds until it hits a task boundary
[19:18:33] <FliPPeh> eddyb: So it only kills the thread where it was called in?
[19:18:39] <eddyb> FliPPeh: *task*
[19:18:53] <FliPPeh> Not the same then, okay
[19:18:57] <FliPPeh> So many new concepts
[19:19:11] <eddyb> (green threads/tasks can live on the same thread)
[19:19:16] <FliPPeh> Okay
[19:19:27] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:19:44] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:19:49] <FliPPeh> So error handling is done the haskell way using option types to indicate failure?
[19:20:00] * FliPPeh loves him some optionals
[19:20:08] <whitequark> there's also conditions, but they're being removed afaik
[19:20:14] <whitequark> (conditions are similar to lisp restarts)
[19:20:20] <Matthias247> it's also the C way :)
[19:20:21] <Ms2ger> There's also Result<T, U>
[19:20:24] <jhasse> bjustin: ah wait i think because rustc looks for a compiled library
[19:20:47] <Ms2ger> { Ok(T), Err(U) }
[19:20:50] <jhasse> bjustin: cd into the rust-sdl2 dir (src, README.md, ... should be there) and type `rustpkg build sdl2`
[19:20:58] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[19:21:07] <bjustin> I compile rust-sdl2 before compiling my own project. I had it working back in November, but changes in rustc and rust-sdl2 broke my project
[19:21:35] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[19:21:35] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[19:21:53] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:21:54] <jhasse> bjustin: I see. rust-sdl2 switched to rustpkg, therefore the location of the resulting .so file changed
[19:22:23] <jhasse> bjustin: there should be a .so file in rust-sdl2/lib/<your-target-triple>/ after the built
[19:22:35] <bjustin> jhasse: yep, I see it
[19:22:59] *** Joins: short (Mibbit@moz-85C0C507.hsd1.wa.comcast.net)
[19:23:21] <bjustin> its a .dylib since I'm on OS X
[19:23:32] <jhasse> bjustin: Now `-L rust-sdl2/lib/<your-target-triple>` should do the trick
[19:23:52] <short> Hi all, quick question: does anyone know if std::io::ReaderUtil got removed in 0.9??? I get an error when I try to bring it into my file 'use std::io::ReaderUtil'
[19:23:57] *** Joins: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP)
[19:24:08] <short> main.rs:7:5: 7:24 error: unresolved import: there is no `ReaderUtil` in `std::io`
[19:25:02] <short> Searching for it through the repo yields examples of it being used:   https://github.com/mozilla/rust/search?q=ReaderUtil&ref=cmdform
[19:25:04] <bjustin> jhasse: that works, thanks
[19:25:14] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[19:25:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[19:25:40] <jhasse> bjustin: glad to hear :)
[19:25:43] <bjustin> how might I do that in a way that isn't platform-dependent?
[19:25:59] <bjustin> now I have to update my code for 3 months of rust updates
[19:27:19] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[19:27:21] <Cevn> short: I think it might be replaced with http://static.rust-lang.org/doc/master/std/io/trait.Reader.html
[19:27:37] <Cevn> I'll defer to someone else's expertise however as I'm just beginning myself
[19:28:07] <short> Hmm, I found that too. The old ReaderUtil had a methods similar to 'read_line()' that I was looking for. 
[19:28:18] <short> Thanks, yeah I'm pretty new too :)
[19:28:34] <short> Reader seems pretty low level
[19:28:38] <Cevn> short: I've used BufferedReader for that (read_line()) 
[19:28:44] <short> ooh
[19:29:02] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[19:29:19] <short> That will do perfectly! Thanks a bunch Cevn
[19:29:49] <Cevn> short: no problem
[19:29:52] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[19:31:03] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[19:32:33] <jhasse> bjustin: `-L rust-sdl2/lib/*/` should work
[19:32:42] *** Quits: shilgapira (chatzilla@moz-703651C7.barak.net.il) (Ping timeout)
[19:32:43] <jhasse> bjustin: good luck :D
[19:33:12] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[19:33:39] <bjustin> jhasse: yep, that works. I'm using a bunch of channels and ports and almost all of them need updates of some sort
[19:34:35] <wting> Whatever happened to the parallel module (par.rs mentioned here: https://news.ycombinator.com/item?id=5712758)
[19:35:29] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[19:35:42] <jhasse> bjustin: I'm dreaming of rustpkg fetching and compiling all dependencies out of the box ... :)
[19:36:09] <bjustin> doesn't go have something like that?
[19:36:30] *** Quits: gwty_ (gwtypc@2388A349.5D0460CB.D66E6624.IP) (Ping timeout)
[19:36:40] *** Quits: gwty (gwtypc@2388A349.5D0460CB.D66E6624.IP) (Ping timeout)
[19:41:38] <alan_andrade> Just wanted to say hi to you all Rustaceans :)
[19:43:26] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[19:43:28] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[19:43:44] <jhasse> bjustin: yes. Afaik rustpkg is inspired by go's package manager
[19:43:59] <GreyKnight> please tell me "rustacean" is the actual term
[19:44:13] <eddyb> it's one of them
[19:44:44] <syatchmenoff> hello. what libraries are most people using for OpenGL applications? GLFW? SDL? SDL2? I'm trying to get an idea of which rust bindings are most actively supported
[19:46:02] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[19:46:43] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[19:46:53] <bjustin> from lurking in #rust and #rust-gamedev, GLFW seems popular
[19:47:01] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[19:49:39] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[19:50:52] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[19:51:14] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[19:51:23] *** Joins: onix (Mibbit@moz-4806B979.nyc.res.rr.com)
[19:51:25] <jhasse> syatchmenoff: glfw-rs is used most for GL dev, but rust-sdl2 is also actively supported ;)
[19:52:01] <mleise> I sense a pattern: All new systems languages use package managers.
[19:52:25] <mleise> Now how do you think this is going to integrate with Linux package managers?
[19:52:35] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:52:48] <jhasse> rustpkg only installs to your local dev folder
[19:52:54] <jhasse> maybe package manager is the wrong term ;)
[19:52:56] <FliPPeh> Are template specializations planned?
[19:53:04] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[19:53:29] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:53:38] <Ms2ger> mleise, s/systems languages/programming languages/? :)
[19:53:44] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:53:58] <mleise> self titled system programming languages
[19:54:04] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:54:27] <mleise> as in you could write an OS kernel in it or do other low level stuff
[19:55:02] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[19:55:45] *** Joins: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP)
[19:55:52] <cmr> FliPPeh: no
[19:56:33] <mleise> I tell you the day will come that someone says "Let's use rustpkg for everything and drop make files"
[19:56:33] <Ms2ger> Having worked with C++, I would sacrifice virgins for a reasonable packaging story there
[19:56:44] <Ms2ger> mleise, we did that in Servo...
[19:56:45] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[19:56:49] <Ms2ger> And then we went back
[19:56:54] <mleise> good
[19:57:12] <geal> at least, rustpkg can install from a tag or branch...
[19:57:16] <FliPPeh> cmr: Aw, what's the preferred way to do something like that then?
[19:57:28] <mleise> geal: yes, as can do some package managers
[19:57:41] <geal> IIRC, go installs directly the master
[19:57:46] <cmr> FliPPeh: what's your usecase?
[19:57:58] *** Quits: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP) (Quit: Leaving)
[19:58:13] <FliPPeh> cmr: I don't have one, I'm just gathering some info on the language
[19:58:13] <Tobba> hm
[19:58:23] <Tobba> now, I have to make the mutability bollocks worse I think
[19:58:23] <cmr> FliPPeh: and that's why we don't have them :)
[19:58:31] <mleise> geal: go has this awesome gofix tool. that makes breaking user code so much less intrusive
[19:58:46] <cmr> mleise: go is also stable.
[19:58:53] <cmr> and, like, released and mature and stuff
[19:59:15] <geal> adding the package source right in the source is a bad idea. You have to fork the code (and probably the libraries too) if you need to update a dependency
[19:59:47] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[20:00:06] <mleise> agreed
[20:00:27] <geal> even if it had its quirks (like being slow and hard to understand), I liked ruby's package manager, because it lets you define the dependencies in a separate file, and checks if there are incompatibilities between some of your dependencies' dependencies
[20:00:56] <FliPPeh> Now that I think about it, I can't *think* of a use case for specialization right now. Mostly you use that to provide a better implementation of some algorithm for a known type, but in Rust you get traits and algebraic data types al Haskell
[20:01:29] <eddyb> FliPPeh: recursive types
[20:01:37] <eddyb> you need specialization to stop the recursion
[20:01:45] <FliPPeh> Thar we go
[20:02:03] <cmr> eddyb: example?
[20:02:38] <eddyb> traits work for some things, but not for, say, a ZipTupleTypes<Tup1, Tup2> generic type, not even with my variadic generics
[20:02:39] <syatchmenoff> jhasse: thanks
[20:02:47] <eddyb> (thus you can't define a trait implementing a zip method)
[20:02:51] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[20:03:03] <syatchmenoff> the glfw-rs example code uses a package called "native". where does that come from?
[20:03:13] <cmr> syatchmenoff: it's part of the standard library.
[20:03:20] <cmr> it's the 1:1 runtime
[20:03:20] *** Joins: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP)
[20:03:52] <jhasse> mleise: what's wrong with droping make files? I thought that's the purpose of rustpkg
[20:03:55] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[20:04:09] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[20:04:12] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[20:04:18] <syatchmenoff> part of std?
[20:04:35] <cmr> no, it's a separate crate.
[20:04:42] <cmr> but it's distributed with the rest of the standard library.
[20:05:04] <mleise> jhasse: that one day you might want to have rust programs in official linux distributions and make files typically offer ready to use build targets like "make install"
[20:05:05] *** Quits: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP) (Ping timeout)
[20:05:40] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[20:06:27] <jhasse> syatchmenoff: If the native crate can't be found, it could be that you're using rustpkg which has a bug. I've fixed it yesterday, unfortunately the fix didn't make it into 0.9, see https://github.com/mozilla/rust/pull/11338
[20:06:37] <Tobba> is there any way to specify something like
[20:06:40] <syatchmenoff> ah, yes I'm using rustpkg
[20:06:42] <Tobba> T: Reader, Seek
[20:06:50] <cmr> Tobba: T: Reader+Seek
[20:06:54] <Tobba> ah
[20:06:58] <cmr> (it almost makes sense!)
[20:07:00] *** Quits: blank_name (blank_name@7D3AA8DE.3C877FC9.53C6B850.IP) (Ping timeout)
[20:07:01] <Tobba> I moved onto some shitty application dev
[20:07:02] <mleise> there are a few variants of it, but it more or less comes down to passing environment variables to the build process, configuring the sources for the current system and then running make
[20:07:05] <Tobba> for a bit
[20:07:05] <syatchmenoff> jhasse: so I should just use rustc directly?
[20:07:16] <Tobba> the mutability madness of the tree became too much
[20:07:34] <cmr> syatchmenoff: glfw-rs uses cmake. `mkdir build; cd build; cmake ..; make examples`
[20:07:38] <jhasse> syatchmenoff: no need. Use the work around (copy the native so file from the target directory to the host directory) or build rust master
[20:07:39] <flaper87> r? https://github.com/mozilla/rust/pull/11503 :)
[20:07:41] <cmr> u
[20:07:49] <GreyKnight> mleise: gentoo already has some rust stuff in its package manager, albeit not in the default repository
[20:07:59] <syatchmenoff> what do you mean by "host directory"?
[20:08:00] <GreyKnight> e.g. https://github.com/Heather/Mirana
[20:08:46] <jhasse> syatchmenoff: /usr/local/lib/rustlib/<target-triple>/lib/
[20:09:00] <syatchmenoff> jhasse: thanks, I'll try that
[20:09:17] <jhasse> syatchmenoff: on linux `sudo cp /usr/local/lib/rustlib/*/lib/native*.so /usr/local/lib/` should work (untested)
[20:09:30] <flaper87> bjz: I didn't find a better way to do it, so I took the iterate and * solution
[20:09:39] <GreyKnight> mleise: but maybe we can just extend emerge to handle rustpkg ;-)
[20:09:40] <flaper87> bjz: https://github.com/mozilla/rust/pull/11503
[20:09:47] <mleise> GreyKnight: interesting idea
[20:09:58] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[20:10:04] <jhasse> mleise: there are many packages in linux distributions not using make
[20:10:22] <mleise> jhasse: lies!
[20:11:06] <jhasse> mleise: e.g. python apps
[20:11:27] <cmr> (and ruby, perl, haskell)
[20:12:23] *** Quits: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch) (Client exited)
[20:12:33] <jhasse> also `make install` is seriously broken. Most of the time `make uninstall` doesn't work or forgets about some files, there's no sandboxing, so `sudo make install` could do ANYTHING
[20:12:56] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:13:01] <Tobba> ugh
[20:13:04] <Tobba> Reader doesnt have read_until?
[20:13:18] <mleise> jhasse: yes, that's where package managers take over by tracking installed files
[20:13:26] <cmr> Tobba: it's on Buffer, because it can't be efficient otherwise.
[20:13:41] <Tobba> file doesnt implement it then
[20:13:42] <Tobba> ughhhh
[20:13:49] <cmr> BufferedReader::new(your_file)
[20:13:56] <Tobba> ah
[20:13:58] <cmr> or BufferedStream as the case may be
[20:14:14] <cmr> none of the reader/writers are buffered
[20:14:22] <cmr> (besides Buffered* obviously)
[20:14:27] <mleise> now let me find some python packages without make...
[20:14:36] <jhasse> mleise: doesn't help me at all when I'm building and installing apps from source. Also package manager don't require make. Any `install.sh` script which copies the files to the right location works.
[20:14:36] <Tobba> BufferedReader cant seek
[20:14:50] <jhasse> mleise: I've created debian packages using scons instead of make with no problem
[20:15:24] <mleise> pyorbit -> uses make
[20:15:38] <mleise> where are these packages that don't use some form of make?
[20:15:51] <Tobba> if I make a buffered reader and seek the original file, will that work?
[20:15:52] <mleise> and how short are their package scripts?
[20:16:04] <short> lol when I see my name...
[20:16:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:16:23] <mleise> I knew someone with the nick name "sigh" ;)
[20:16:23] <cmr> twisted doesn't.
[20:16:39] <cmr> Tobba: no, BufferedReader takes ownership.
[20:16:44] <Tobba> fuck
[20:16:47] <Tobba> I need seeking for this
[20:16:55] <cmr> Tobba: Buffered* should implement Seek when the type it wraps does :(
[20:17:08] <Tobba> this is getting rediclous
[20:17:11] <short> Sounds like a pull request is in order?
[20:17:21] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[20:17:30] <Tobba> strings have some form of append character method right?
[20:17:35] <cmr> .push_char
[20:17:51] <Tobba> time to make this work in the slowest possible way
[20:17:54] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[20:18:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:18:15] <short> I see push_str() and push_char() here: http://static.rust-lang.org/doc/master/std/str/index.html
[20:18:19] *** Quits: wycor (Mibbit@moz-32AA9737.domolink.elcom.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[20:18:21] <Tobba> these files have a pointer to the "inventory" in the start of the file
[20:18:30] <Tobba> so I have to seek to get to that then read the section names out
[20:18:36] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:18:36] *** ChanServ sets mode: +ao dherman dherman
[20:18:51] <Tobba> I would love to have UTF8 support with it though, even though its totally unnecessary in this case
[20:19:08] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[20:21:28] <Tobba> for fucks sake the SeekStyle isnt importing right either
[20:21:31] <jhasse> mleise: e.g. mercurial. I haven't checked in a while but most python apps I've used had a setup.py file in their source root dir
[20:22:23] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:22:46] <mleise> jhasse, cmr: Ok, so from what I see in Gentoo Python, Perl and Ruby packages have a huge code base in the package manager to be supported properly. Is that the way to go?
[20:22:52] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[20:22:53] <Tobba> cmr: pretty sure you cant actually make it derive the seek trait
[20:23:00] <jhasse> mleise: no
[20:23:01] <Tobba> you'd have to make one with R: Reader+Seek
[20:23:04] <Tobba> which would just conflict and error
[20:23:17] <jhasse> mleise: See https://wiki.archlinux.org/index.php/Creating_Packages
[20:23:29] <jhasse> mleise: search for `make DESTDIR="$pkgdir/" install`
[20:24:28] <jhasse> mleise: If you would be using a custom shell script this just needs to be changed to `./install.sh $pkgdir` (which is actually shorter). Or `./setup.py install --some-arg-i-don-know=$pkgdir`
[20:24:38] <Tobba> aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[20:24:44] <Tobba> why is it just refusing to import SeekStyle
[20:25:51] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[20:26:49] <jhasse> mleise: So you might argue that this `install.sh` file is the huge code base but what does `make install` actually mean? It justs executes the install target, which results in a bunch of bash commands which copy files around. Would be no problem to move them to a seperate file
[20:27:15] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[20:27:25] <jhasse> mleise: make doesn't help you at all. Autotools do, but so does scons without using Makefiles
[20:27:39] <mleise> jhasse: No the huge code base is tools like "python-updater" "perl-cleaner" and supporting pypy alongside python 2.7 and alongside python 3.3
[20:27:44] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[20:28:39] *** Joins: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP)
[20:29:11] <cmr> Tobba: No? It'd just be impl<T: Seek> Seek for BufferedReader<T> { ... }
[20:29:18] <cmr> Tobba: and you're probably doing it wrong.
[20:29:20] <Tobba> wait right
[20:29:27] <mleise> But let's come back to install.sh. If this script is a drop in replacement for make install, it can work. Now what about the package managers of the D, Go and Rust? Can they be used like that?
[20:29:30] <cmr> use std::io::{SeekSet, SeekEnd}
[20:29:31] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[20:29:38] <Tobba> ah, right
[20:29:38] <jhasse> mleise: I agree! rustpkg is different though, since it tries not to replace package manager but make
[20:29:43] <Tobba> where is Path even defined
[20:29:46] <Tobba> all the documentation is broken
[20:29:56] <cmr> broken how?
[20:30:06] <Tobba> tons of examples that wont compile
[20:30:09] <cmr> Path is a conditional reexport.
[20:30:19] <cmr> it's in the prelude
[20:30:20] <Tobba> in what
[20:30:27] <Tobba> ah crap
[20:30:40] <mleise> jhasse: then it has to replace make install as well
[20:30:43] <cmr> there's also PosixPath and WindowsPath, explicitly.
[20:30:48] <jhasse> mleise: I don't know about D and Go, but rustpkg - currently no.
[20:31:02] <jhasse> mleise: You can simply use install.sh AND rustpkg
[20:31:08] <mleise> I know make is a bunch of specifications by convention, but it seems to work more or less
[20:31:21] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: Bye!)
[20:31:28] <Tobba> apparently
[20:31:34] <Tobba> it was just the error reporting being awful
[20:31:48] <cmr> what was it saying
[20:31:55] <mleise> jhasse: for D (dub) it is the same as with rustpkg from what you say.
[20:32:04] <Tobba> it was saying "name X::Y not found" or something along those lines
[20:32:11] <Tobba> I thought it was yelling at me about the type but it was yelling at me about the method
[20:32:15] <mleise> it installs into a user directory
[20:32:24] <cmr> file an issue
[20:32:54] *** Joins: entro (centro@moz-6398EFDF.dclient.hispeed.ch)
[20:33:30] *** Quits: entro (centro@moz-6398EFDF.dclient.hispeed.ch) (Quit: Leaving)
[20:33:47] *** Joins: entro (centro@moz-FF0B8E6D.ipredator.se)
[20:35:21] <Tobba> whats this about
[20:35:22] <Tobba> error: cannot borrow immutable argument as mutable
[20:35:32] <geal> mleise: make works more or less for simple cases. For more complex cases, they had to come up with m4 macros, automake and autoconf
[20:36:04] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[20:36:09] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[20:36:34] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Quit: Leaving)
[20:37:44] <mleise> maybe the build tools should be developed to the point where they can separate libraries, config files and assets as needed by package managers and let those take it from there
[20:37:59] *** Joins: Gracenotes (person@EBE65A41.2EC0B472.9510F13D.IP)
[20:38:16] <steven_is_false> Hello. I get a linker relating to C++ exception handling.
[20:39:02] <steven_is_false> Apparently, Rust can't find exception handling functions like __cxa_begin_catch
[20:39:54] <mleise> jhasse, cmr, geal: thanks for the discussion
[20:40:05] <cmr> steven_is_false: sounds like your install is bad.
[20:40:15] <cmr> steven_is_false: we don't use the C++ exception handling stuff anymore.
[20:40:20] <steven_is_false> cmr: Okay I can try from scratch then.
[20:40:59] <c-a> steven_is_false, have you built rust before? if so try make clean
[20:41:16] <cmr> c-a: nice optimization work this week, thanks :)
[20:41:16] <steven_is_false> c-a: make clean doesn't clean everything
[20:42:49] <c-a> cmr, thanks, it's been fun diving into the rust codebase
[20:44:44] <jhasse> steven_is_false: git clean -xfd
[20:44:56] <Tobba> well, that was frustrating
[20:45:12] <Ms2ger> jhasse, looks like a tar invocation
[20:45:22] <Tobba> what would the best way to read 12 bytes, cast it into a string and cut it off at an eventual null be?
[20:45:40] <steven_is_false> jhasse: That works if one builds in tree. I just build out of tree.
[20:46:45] <jhasse> Ms2ger: :D
[20:46:56] <cmr> Tobba: let mut x = [0u8, ..12]; r.read(x); does the first half.
[20:47:14] <Tobba> yeah I'm trying to figure out the second half
[20:47:49] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[20:48:06] <cmr> let null = x.iter().position(|x| x == 0); let str = std::str::from_utf8(r.slice_to(null));
[20:48:26] <Tobba> ah, interesting
[20:48:27] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[20:48:35] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[20:49:13] <Tobba> thanks, what does that do if there is no null byte=
[20:49:19] <cmr> ah right
[20:49:22] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[20:49:24] <cmr> .position is Option<uint>
[20:49:49] <cmr> so you'll either need to unwrap it or handle the error elsewise.
[20:49:50] *** Joins: mib_eltx0p (Mibbit@24B8BCBB.4BD69E81.7FCD2781.IP)
[20:49:55] *** Quits: mib_eltx0p (Mibbit@24B8BCBB.4BD69E81.7FCD2781.IP) (Quit: mib_eltx0p)
[20:51:42] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[20:52:24] <Tobba> got it
[20:52:29] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[20:53:49] *** Quits: entro (centro@moz-FF0B8E6D.ipredator.se) (Input/output error)
[20:54:52] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[20:54:59] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Quit: Lost terminal)
[20:55:02] *** Joins: mentero (mentero@moz-D61C6F02.proxnet.pl)
[20:57:31] *** Joins: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP)
[20:57:40] *** Joins: earlz (earlz@moz-483E1E31.neo.res.rr.com)
[20:59:00] *** Quits: earlz (earlz@moz-483E1E31.neo.res.rr.com) (Quit: Leaving.)
[20:59:10] *** Joins: earlz (earlz@moz-483E1E31.neo.res.rr.com)
[20:59:22] *** Quits: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP) (Ping timeout)
[20:59:25] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:59:33] <earlz> So, has anyone successfully did interop between C# and Rust directly without a C middle layer? 
[21:00:08] <cmr> earlz: what would you do it with? COM?
[21:00:21] <cmr> (not that I've heard of. in fact, I haven't heard of any C# interop at all)
[21:00:29] *** Quits: fabiand (fabiand@moz-C69053D9.static.qsc.de) (Quit: Verlassend)
[21:00:43] <earlz> Preferably anything but COM :) 
[21:01:04] <FliPPeh> Am I just bad at searching or does Rust not support varargs and doesn't ever plan to support them aside from macros?
[21:01:05] <earlz> It seems documentation on P/Invoke on Mono/Linux is pretty thin as it is without factoring Rust in heh
[21:01:06] <cmr> I can feel that. Does the CLR offer a stable ABI you can target?
[21:01:24] *** Quits: achim (achim@moz-571082C9.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[21:01:34] <cmr> FliPPeh: probably poorly documented. We support varargs *only* for FFI declarations.
[21:01:48] <cmr> FliPPeh: you can't have a vararg Rust function. There is no plan to support them because they're not type safe.
[21:02:08] <cmr> If you want to take varargs of varying type, use a &[SomeEnumWrappingThoseTypes]
[21:02:09] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[21:02:12] <FliPPeh> cmr: Okay, so the next best thing would be to take a vector reference as parameter?
[21:02:19] <cmr> FliPPeh: a slice, yes.
[21:02:28] <glaebhoer1> is there any interop between any two languages anywhere where there isn't a C layer in the middle, other than languages on a common runtime like JVM/CLR/Parrot?
[21:02:29] <FliPPeh> Got it, thanks
[21:02:41] <FliPPeh> Shouldn't be too bad since we can have trait objects
[21:02:43] *** Joins: shilgapira (chatzilla@moz-703651C7.barak.net.il)
[21:03:06] <glaebhoer1> hmm maybe boost::python
[21:03:31] <FliPPeh> C and Lua
[21:03:40] <FliPPeh> C isn't in the middle, it's at an endpoint :)
[21:03:44] <cmr> Ok, C and Foo is cheating, because C is what you're targetting
[21:03:47] <cmr> :P
[21:03:52] <glaebhoer1> (but maybe that has a C layer, I don't know much about it beyond that it exists)
[21:04:10] <glaebhoer1> FliPPeh: ok yeah I should rephrase, "any two non-C languages" :)
[21:04:14] <FliPPeh> I know Java has a native implementation of Lua
[21:04:21] <earlz> So does .NET
[21:04:22] <FliPPeh> No C involved
[21:04:27] <cmr> has a common runtime
[21:05:07] <glaebhoer1> I'm sort of thinking like, two independently created languages native-hardware languages, which later decided to interoperate with each other and didn't do it via C
[21:05:14] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[21:05:14] <glaebhoer1> s/languages//
[21:05:17] <cmr> glaebhoer1: D and C++
[21:05:20] <cmr> there we are
[21:05:24] <cmr> I knew one *had* to exist somewhere
[21:05:29] <FliPPeh> Although that's very limited support
[21:05:32] <glaebhoer1> cmr: ah, good catch :)
[21:06:10] <cmr> Also anything using COM
[21:06:17] <cmr> Although it does expose a C interface..
[21:07:13] <earlz> but COM is also... horrible ick
[21:07:16] <cmr> yeah
[21:07:28] <glaebhoer1> (dunno much about COM)
[21:07:29] <earlz> And I think Windows only? 
[21:07:32] <glaebhoer1> (maybe I should be happy about that)
[21:08:14] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[21:08:48] <GreyKnight> COM was a not-unreasonable attempt at working around some limitations of dynamic_cast IIRC
[21:08:57] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[21:09:04] <GreyKnight> you could do it off-Windows
[21:09:08] <GreyKnight> but I'd rather rust :-)
[21:09:17] <Ms2ger> Like Gecko
[21:09:24] <Ms2ger> But we'd also rather rust :)
[21:09:47] <cmr> I don't actually know if there's any non-wine implementation of com
[21:09:55] <cmr> there are lookalikes though
[21:10:27] <Ms2ger> Depends if you count XPCOM, I guess
[21:10:47] <cmr> I count it as a lookalike. It doesn't expose the same API, does it?
[21:13:22] <strcat> cmr: gobject is basically the same crap
[21:13:41] <strcat> cmr: and gobject libs get automatic high-level binding generation a dozens languages
[21:14:04] <strcat> wonderfully slow weak dynamic typing with high memory overhead! yay :P
[21:15:14] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[21:15:33] <Gracenotes> very quick question: are there plans for an interpreter ever?
[21:16:01] <cmr> Gracenotes: as in repl or just interpreter?
[21:16:13] <Gracenotes> I suppose repl.
[21:16:33] <cmr> our semantics make an interpreter a really hard problem. we used to tie into LLVM's jit, but that isn't really interpreting..
[21:16:42] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Client exited)
[21:16:42] <cmr> repl? maybe. it'd be nice. also a hard problem.
[21:16:54] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:16:56] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[21:16:59] <cmr> irust exists. doesn't keep state though (super hard problem)
[21:17:04] <glaebhoer1> (it's unnerving how often I see other Haskell people pop up in here:)
[21:17:07] <strcat> cmr: have the fixes for rusti landed yet?
[21:17:15] <strcat> cmr: well tbh it's not that hard
[21:17:20] <strcat> it's only hard if you want windows support
[21:17:21] <cmr> strcat: no, something is seriously wrong with windows.
[21:17:24] <cmr> heh
[21:17:29] <strcat> I know how to make a good REPL without much effort for *nix
[21:17:39] <strcat> fork() everywhere
[21:17:52] <strcat> you can rewind state as much as you want too, just add a config option for the # of forked processes you keep
[21:18:08] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[21:18:08] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Quit: Konversation terminated!)
[21:18:10] <glaebhoer1> cmr: (what's the conflict between rust semantics and interpreting?)
[21:18:13] <Tobba> not sure how rusti would even work
[21:18:19] <Gracenotes> hm, okay, sounds good :) also quick question, what is the status of using something like gdb to debug?
[21:18:21] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[21:18:29] <strcat> Tobba: fork(), if it fails, discard it
[21:18:33] <strcat> easy peasy
[21:18:34] <cmr> Gracenotes: gdb works well for rust.
[21:18:42] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:18:52] <Gracenotes> ah, cool
[21:18:53] <cmr> -Z extra-debug-info to rustc generates debuginfo
[21:19:01] *** Quits: smvv (smvv@moz-A397289C.xlshosting.net) (Ping timeout)
[21:19:11] <strcat> Tobba: the complex runtime makes that a bit hard since it's not going to be fork-safe
[21:19:13] <GreyKnight> glaebhoer1: I would have guessed there was a good overlap between people interested in Haskell and rust
[21:19:20] <Tobba> cant you just
[21:19:26] <Tobba> compile it to llvm bitcode, make llvm interpret it?
[21:19:33] <strcat> Tobba: and then what?
[21:19:43] <glaebhoer1> GreyKnight: I'm not surprised, it's just weird for some reason :)
[21:19:44] <strcat> that's not different than making LLVM bitcode and compiling it with the JIT
[21:19:46] <strcat> or ahead of time
[21:19:54] <strcat> no semantic difference based on the method you tell LLVM to use
[21:19:56] <Tobba> what even goes wrong if you do that then
[21:19:57] <strcat> just performance ones
[21:20:01] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[21:20:06] <Tobba> I mean, whats the problem
[21:20:13] <strcat> Tobba: what program are you asking LLVM to compile?
[21:20:14] <cmr> glaebhoer1: well, thinking more about it it's not that difficult
[21:20:17] <strcat> Tobba: let x = 5;
[21:20:21] <GreyKnight> glaebhoer1: I see a few people here I've seen in non-programming contexts; small Internet I guess
[21:20:21] <strcat> compile that as a program
[21:20:22] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[21:20:23] <strcat> ask LLVM to run it
[21:20:25] <strcat> okay
[21:20:27] <strcat> `x` isn't in scope though
[21:20:39] <strcat> x + 5 /* x isn't defined */
[21:20:45] <strcat> unless you recompile the whole input every time
[21:20:52] <strcat> so sure, now if you make a mistake, it's stuck there
[21:21:00] <strcat> every time it will hit that failure/error
[21:21:05] <Gracenotes> glaebhoer1: well, C is one of my favorite languages after Haskell, so not so weird? :)
[21:21:08] <strcat> lets say you write
[21:21:11] <strcat> let x = [1, 2, 3];
[21:21:16] <glaebhoer1> GreyKnight: ah I've never actually gone through the nick list; it's just when people speak up that I notice
[21:21:17] <strcat> x[3] /* oops! */
[21:21:24] <strcat> now do you have to exit the REPL and start over?
[21:21:26] <strcat> that's not a real REPL
[21:21:32] <strcat> not to mention slow 
[21:21:34] <Tobba> ah right, failure unwinding
[21:21:42] <strcat> Tobba: not really talking aboiut that
[21:21:44] <strcat> Tobba: so
[21:21:46] <Tobba> well on windows you could just fork it and redirect output
[21:21:49] <strcat> how do you evaluate 'x + 5'
[21:21:57] <strcat> do you recompile the entire input so far every time?
[21:21:57] <glaebhoer1> Gracenotes: C++ used-to-be mine :)
[21:22:02] <glaebhoer1> but strongly used-to-be now.
[21:22:04] <strcat> Tobba: windows doesn't have fork
[21:22:12] <Tobba> can be implemented
[21:22:18] <strcat> inefficiently
[21:22:24] *** Quits: logicalparadox (logicalpar@moz-6BFE65E6.dr01.wlbr.pa.frontiernet.net) (Ping timeout)
[21:22:28] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:22:46] <Tobba> can just directly run lli on it and redirect stdio
[21:22:51] <strcat> if it takes 3+ seconds to run 1 + 1...
[21:22:54] <strcat> Tobba: run lli on *what*
[21:23:01] <Tobba> hm, yeah
[21:23:26] <strcat> Tobba: there's a reason cling (REPL/JIT for C++) took a lot of work
[21:23:32] <strcat> it's not trivial
[21:23:41] <Tobba> yeah I dont even see how this would work
[21:23:43] *** Quits: doug (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[21:23:51] <strcat> they had to come up with a way of hoisting out state
[21:23:53] <strcat> and preserving it
[21:23:56] <strcat> and dealing with errors
[21:24:01] <strcat> it's still far from perfect
[21:24:17] <Gracenotes> hm
[21:24:20] *** Joins: smvv (smvv@moz-A397289C.xlshosting.net)
[21:24:20] <strcat> and C++ is easier than rust since you always know the type from the RHS
[21:24:30] <strcat> auto x = foo(); /* it's not different than bar(foo()) */
[21:24:37] <strcat> in rust you could have...
[21:24:42] <strcat> let x = 5; /* what is it? */
[21:24:49] <strcat> x + 5u8 /* oh, x is a u8 */
[21:26:25] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[21:27:43] <zxcdw> Could it be possible to change x+=1 to x+1;?
[21:27:49] <zxcdw> well, not in Rust, but in some language
[21:28:03] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[21:28:15] <GreyKnight> zxcdw: I don't follow
[21:28:18] <zxcdw> like just treat the sign as an addition to the value
[21:28:24] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:28:24] <glaebhoer1> sure, in a new language you define whatever syntax you want
[21:28:32] <Matthias247> wow, I can cast something to *mut* c_void :-)
[21:29:08] <zxcdw> glaebhoer1: I am just thinking of a reason why do you have += operator to begin with
[21:29:28] <GreyKnight> zxcdw: shorthand for "x=x+1;"
[21:29:32] <GrecKo> strcat: auto x = 
[21:29:35] <GrecKo> 5
[21:29:44] <zxcdw> GreyKnight: But why do you need the "x=" there?
[21:29:51] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[21:29:55] <cmr> zxcdw: for when you don't want to modify x?
[21:30:01] <strcat> GrecKo: is always an int
[21:30:02] <jhasse> What is (or was) cargo?
[21:30:05] <cmr> jhasse: rustpkg
[21:30:10] <jhasse> cmr: thx
[21:30:20] <cmr> (cargo? crates? get it?)
[21:30:54] <strcat> https://github.com/mozilla/rust/issues/9940#issuecomment-32134633 so... can we stop pretending overflow checking wouldn't make us slower than java now? ;p
[21:31:02] <strcat> I can make plenty more benchmarks
[21:31:09] <strcat> becomes 5x, 10x, 20x slower with a bunch of ops in the loop
[21:31:11] <strcat> *shrug*
[21:31:14] <GreyKnight> zxcdw: so that we know it's an assignment and not a usage :-)
[21:31:54] <strcat> lets see how much slower an expanding int would be
[21:32:23] <zxcdw> GreyKnight: Couldn't that be infered from the context?
[21:32:44] *** Joins: Cevn (sameer@moz-BDD19865.public.wayport.net)
[21:32:54] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:33:20] <vmx> can i somehow get the underlying type a trait implements? something like: fn matchit<T: Geometry>(g: T) { match g { i_match_the_type_that_implemented_Geometry => ...
[21:35:28] <Eridius> vmx: you can if you use the Any trait
[21:35:32] <kimundi> vmc: Not directly like that, but it's possible using Any
[21:35:54] *** Quits: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP) (Ping timeout)
[21:36:22] <vmx> *reading up on Any*
[21:36:26] <kimundi> T: Geometry + Any, then in the function body wrap it in a ~ or & and cast to ~Any or &Any
[21:37:32] <GreyKnight> zxcdw: I think I'd rather have mutation be more explicit
[21:37:43] <GreyKnight> but you may of course invent any language you wish :-)
[21:38:31] <zxcdw> I was just wondering if there's something obvious why a stray "x+n" statement couldn't be treated as "x = x + n", as in, former being a shortcut without +=
[21:38:39] <jhasse> cmr: nope, didn't know what cargo means :D But looked it up just now ;)
[21:39:05] <jhasse> (good time to look up crate)
[21:39:21] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[21:39:41] <GreyKnight> well a stray "x+n;" could just mean calculate that value (possibly with side-effects) and then discard the result
[21:39:51] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[21:41:36] <kimundi> zxcdw: Inperformant dependeing on type
[21:41:59] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[21:42:09] <kimundi> zxcdw: For example, a += on string should ideall just call push(), instead of allocating a new string, and then replacign the original with it
[21:42:43] <kimundi> The plan is to allow overriding of +=, -= etc just for that, its just not implemented yet
[21:42:55] <strcat> I don't think + should be implemented on vectors/strings anyway
[21:43:07] <kimundi> ... And I just realized thatw as not what yu where talking about
[21:43:31] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[21:43:35] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Connection reset by peer)
[21:43:36] <mleise> D uses ~ for concatenation
[21:43:37] <kimundi> strcat: Sure, was just an example
[21:43:41] *** Joins: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP)
[21:43:43] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Quit: Ex-Chat)
[21:43:48] <mleise> but yeah...
[21:43:56] * strcat doesn't think concat needs sugar
[21:44:08] <strcat> better to use chained ranges if possible
[21:44:28] * strcat wants rusti back
[21:44:46] <mleise> rust-buildbot: how are you?
[21:44:54] *** Quits: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de) (Ping timeout)
[21:45:29] <mleise> "fileName ~= suffix" is neat
[21:45:45] <mleise> why do you want to replace that with chained ranges? :)
[21:46:29] <Ms2ger> ~=? Looks like != to me
[21:46:38] <strcat> rust-buildbot: hello
[21:46:41] <strcat> rust-buildbot: unmute
[21:46:42] <rust-buildbot> I'm baaaaaaaaaaack!
[21:46:44] <strcat> rust-buildbot: hello
[21:46:44] <rust-buildbot> yes?
[21:47:07] <cmr> strcat: I have no idea what is wrong with windows, how to debug it, or how to fix it :(
[21:47:09] <kimundi> rust-buildbot: dance
[21:47:10] <rust-buildbot> <(^.^<)
[21:47:27] * luz wants compile time concatenation of static strings
[21:47:29] <kimundi> slow dancer
[21:47:31] <rust-buildbot> <(^.^)>
[21:47:32] <rust-buildbot> (>^.^)>
[21:47:33] <rust-buildbot> (7^.^)7
[21:47:34] <rust-buildbot> (>^.^<)
[21:47:39] <Gracenotes> rust-buildbot: who are you??!!
[21:47:40] <rust-buildbot> What you say!
[21:47:41] <cmr> luz: already done
[21:47:49] <strcat> well, concat! works for literal
[21:47:50] <strcat> s
[21:47:54] <strcat> not constant exprs
[21:48:02] <cmr> ok, that's true
[21:48:03] <kimundi> concat!("foo" "bar" "baz")
[21:48:19] <luz> that's not useful to me
[21:48:42] <mleise> Ms2ger: nah, ~= is used more often than ~value and quickly learned as a binary operator.
[21:49:33] <mleise> I ended up having the problem that I tend to write !value when I mean ~value, though
[21:49:59] <Cevn> Hello again 
[21:50:11] <luz> change the current != to !== first :)
[21:50:43] <Cevn> Is there an easy way to instantiate an array of the multiples of 3 until 999? (ie [3,6,9..999]) 
[21:51:03] <cmr> Cevn: range_step(0, 999, 3)
[21:51:11] <mleise> now THIS is a case for ranges
[21:51:15] *** Joins: mib_e9lrt6 (Mibbit@CF0E1B01.25BE8D68.F7A44A1B.IP)
[21:51:19] <earlz> So, calling Rust from C# code is pretty simple, https://github.com/Earlz/RustCSharp going the otherway around though is very difficult
[21:51:30] *** Quits: shilgapira (chatzilla@moz-703651C7.barak.net.il) (Ping timeout)
[21:51:31] <Cevn> cmr: cool thanks. sorry for the newb questions 
[21:51:37] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[21:51:38] <cmr> Cevn: it's fine :)
[21:51:43] *** Joins: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP)
[21:51:45] <Ms2ger> Cevn, that's what we're here for :)
[21:51:53] <halorgium> kimundi: when you mentioned "T: Geometry + Any", what did you mean?
[21:51:54] <mleise> Rust is a newb, too.
[21:52:27] <halorgium> surely you'd have to use Any in the type-signature and then match in the function body
[21:52:46] *** Joins: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu)
[21:52:50] <mleise> I mean it is only 2 years old
[21:52:55] <dylukes> So, Higher Kinded Types.
[21:53:05] <dylukes> Are they a planned feature? Is there a good work around?
[21:53:08] <cmr> mleise: two? try 8
[21:53:25] *** Quits: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP) (Ping timeout)
[21:53:43] <mib_e9lrt6> can someone answer me a question on my mind: in hashmap.rs someone left a comment saying it would be cool if they would rewrite FoundEntry to have the type Option<&Bucket<K, V>>, why would you make it an Option if your never going to get a FoundEntry with None?
[21:53:43] <mleise> then please update Wikipedia :)
[21:53:51] <cmr> wikipedia isn't out of date
[21:53:54] <cmr> read the prose
[21:53:54] <kimundi> fn matchit<T: Geometry + Any>(g: T) { let any = ~g as ~Any; if any.is::<MyTypeA>() { let t = any.move::<MyTypeA>(); ... } else if ....
[21:53:59] <kimundi> halorgium: ^
[21:54:09] *** mib_e9lrt6 is now known as andrew
[21:54:23] <halorgium> kimundi: ah, you can put the <T: X + Y> at that stage! 
[21:54:23] *** andrew is now known as someguyrustthing
[21:54:33] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[21:54:47] <kimundi> yeah - not sure if makes things better than taking ~Any to begin with, but its possible
[21:55:13] <halorgium> kimundi: my intuition would have thought it would be better to introduce a new trait capturing both
[21:55:15] <kimundi> If you cast to &Any instead, you can even keep using the original generic value and do specializations depending on type
[21:55:39] <halorgium> kimundi: i guess this is the workaround for no overloading, right?
[21:55:40] <glaebhoer1> dylukes: they're quasi-planned (maybe "intended" is a better word)
[21:55:46] <dylukes> hrm okay :\
[21:55:50] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[21:56:01] <dylukes> I heard about some transformation to approximate them.
[21:56:04] <dylukes> Any details on that?
[21:56:23] <glaebhoer1> like unless someone comes in and implements them they almost surely won't be in 1.0, but they'll almost as surely get added at some point
[21:56:23] <kimundi> halorgium: Not really - Any is only meant for rare cases, where you can'T possible know the types involved - it is used for fail!() for example
[21:56:34] *** Quits: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP) (Quit: nn)
[21:56:37] <kimundi> halorgium: Usually there are solutions that don't require Any
[21:56:43] <dylukes> I wish I had the domain knowledge to implement them :(
[21:56:51] <glaebhoer1> dylukes: basically you have to use a lot of different type variables, but I don't know the details :)
[21:56:59] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[21:57:02] <halorgium> kimundi: yer, i have been working with java recently and far too much use of Object in that world ;)
[21:57:37] <glaebhoer1> (I saw things like Functor encoded this way but didn't feel like attempting to decoding them)
[21:57:48] <halorgium> kimundi: i guess you can use <T: CaseA + CaseB> if the types really do not have methods which intersect
[21:57:49] <glaebhoer1> dylukes: you might be better off asking this in #haskell though
[21:57:57] <dylukes> haha
[21:58:10] <dylukes> Not *really* Haskell related.
[21:58:17] <glaebhoer1> yeah but there's smart people in there :)
[21:58:21] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:58:22] *** ChanServ sets mode: +ao brson brson
[21:58:23] <kimundi> halorgium: Uhm, what do you actually want to do?
[21:58:27] <dylukes> Yeah, I can think of three who could implement HKTs
[21:58:34] <dylukes> but I doubt any have the time.
[21:58:37] <cmr> glaebhoer1: oi, whatchu tryin' to say?
[21:58:47] <halorgium> kimundi: i was mostly interested in the syntax i was unaware of "TypeA + TypeB"
[21:58:53] <dylukes> Jaffacake could certainly do it ;P.
[21:59:04] <dylukes> But I feel like he has his own compiler to maintain.
[21:59:11] <kimundi> halorgium: Well, they are not types - only traits are allowed there
[21:59:28] <glaebhoer1> cmr: that #haskell tends to have really smart people in it? :)
[21:59:30] <halorgium> kimundi: ah, ok. good to clarify
[21:59:38] <kimundi> It restricts the generic to only those generic types that implement all the traits listed there
[22:00:19] <halorgium> i should probably make sure that my definition of generic matches with rust's definition
[22:00:30] <kimundi> You can get a limited form of overloading that way: fn foo<T: Bar>(t: T) can be called with any type that implements Bar
[22:00:41] <glaebhoer1> dylukes: anyway, if you have time and motivation I'm pretty sure there's a paper out there which says "this is how to implement HKTs" in a comprehensible fashion
[22:00:56] *** Quits: jhasse (jhasse@moz-738D246F.dip0.t-ipconnect.de) (Quit: Verlassend)
[22:00:59] <kimundi> halorgium: Yeah, if you are experience with javas generics, then Rusts work pretty differently
[22:01:01] <dylukes> Yes I believe I've seen one by a Simon to that effect.
[22:01:12] <halorgium> kimundi: indeed ;)
[22:01:13] <dylukes> oh nevermind
[22:01:17] <glaebhoer1> the harder part is probably figuring out rustc, and then working out how to adapt the one to the other
[22:01:19] <dylukes> Odersky ;P
[22:01:37] <dylukes> https://lirias.kuleuven.be/bitstream/123456789/186940/4/tcpoly.pdf
[22:01:48] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[22:01:52] <kimundi> halorgium: Want me to give you a short summary of the differences?
[22:02:19] <halorgium> kimundi: if you wouldn't mind!
[22:02:26] <glaebhoer1> dylukes: oh, that was rapid
[22:02:32] <kimundi> halorgium: Hehe, I'm bored right now, so why not :P
[22:02:33] <glaebhoer1> I didn't expect to actually get a link back :D
[22:02:38] <dylukes> Yeah, Scala guy ;P.
[22:02:44] <halorgium> kimundi: even better, document them somewhere? :)
[22:02:56] *** nrc is now known as nrc|afk
[22:03:03] <glaebhoer1> dylukes: which is weird, because afaik scala doesn't have them?
[22:03:11] <halorgium> "know java, here are some differences"
[22:03:28] <glaebhoer1> (speaking of which #scala might also be a good place to inquire about encoding them without them, never been there myself though)
[22:03:31] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Ping timeout)
[22:03:34] <kimundi> halorgium: Eh... but that's work! But I guess I could just write it down in a gist right now instead of IRC... brb
[22:03:41] <dylukes> It does I believe.
[22:03:50] <dylukes> Well, again "Generics of a Higher Kind"
[22:04:16] <dylukes> They allow type constructors as type parameters,
[22:04:19] <glaebhoer1> oh this *is* about scala. hmm
[22:04:34] <dylukes> and they are implicitly allowed as abstract types in some places I believe. 
[22:04:50] <glaebhoer1> I'm just wondering why I read a comment from ekmett to the effect that he has to encode monad transformers in some more complicated way
[22:05:07] <dylukes> Oh, for performance?
[22:05:13] <vmx> Eridius, kimundi: do i understand it correctly that when i use the Any trait, i need to supply the type i want to get out of and can't do a pattern match on all possible types. right? (that's not a problem for me, just asking)
[22:05:17] <dylukes> I think you're referring to CPS rewriting
[22:05:35] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[22:05:44] <dylukes> glaebhoer1 it's essentially "unrolling" the monad transformer stack :)
[22:06:00] <dylukes> Quick sketch:
[22:06:04] <earlz> how would oen convert a c_str to a regular str? And if a function is expected to receive a `char *` should I make the function argument a `c_str` or `u8*` ? 
[22:06:14] <kimundi> vmx: Right - I plan to write a macro that allows that with similar syntax to regular match, but it can'T possible know if the match will be exhaustive
[22:06:17] <dylukes> Imagine you have in Java/C/JS etc a set of nested exception handlers or error condition checks
[22:06:30] <dylukes> The usual "hackish but cool" trick is to jump out of the ENTIRE block on failure
[22:06:36] *** Quits: jackneill (jackneill@moz-E4F5A8EC.pool.digikabel.hu) (Ping timeout)
[22:06:41] <dylukes> or throw a specialized exception and catch it back at the top level.
[22:06:43] *** Joins: psquid (psquid@moz-9DE65B9D.threembb.co.uk)
[22:06:52] <cmr> earlz: *libc::c_char
[22:06:53] <glaebhoer1> dylukes: oh I think I had misinterpreted what I was referring to, which is: http://www.reddit.com/r/haskell/comments/1pjjy5/odersky_the_trouble_with_types_strange_loop_2013/cd3bgcu
[22:07:00] <cmr> earlz: .with_str, for the first question
[22:07:06] <dylukes> One can rewrite Monad Transformers in such a way that you can handle the None/[]/etc cases easilt.
[22:07:10] <cmr> earlz: earlz (http://static.rust-lang.org/doc/master/std/c_str/struct.CString.html)
[22:07:33] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Ping timeout)
[22:07:37] <vmx> kimundi: k, thanks. do i'll do if/else blocks for now with Any::is()
[22:07:46] <Matthias247> is there a way to declare a struct as only-moveable even it does contain only POD?
[22:07:48] <cmr> earlz: as_str sorry
[22:07:48] *** Quits: someguyrustthing (Mibbit@CF0E1B01.25BE8D68.F7A44A1B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:07:51] <kimundi> vmx: Yeah, thats the least painful way right now
[22:07:58] <vmx> Eridius: also thank you for pointing me to Any
[22:08:12] <dylukes> glaebhoer1 The scala implementation is especially relevant as they have trait inheritance as well
[22:08:18] <glaebhoer1> oh never mind no I didn't
[22:08:21] <glaebhoer1> dylukes: "You don't have any notion of a kind system and can only talk about fully saturated types, monad transformers are hell to write. It is easier for me to use the fact that every Comonad gives rise to a monad transformer to intuitively describe how to manually plumb a semimonoidal Comonad through my parser to carry extra state than to work with a monad transformer!"
[22:08:25] <dylukes> so a Rust implementation would also need to track bounds.
[22:08:37] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:08:41] <dylukes> Heh, yes.
[22:08:50] <glaebhoer1> isn't this referring to a lack of HKT?
[22:09:08] <dylukes> Kind of yes. "can only talk about fully saturated types" is exactly the issue Rust has imo.
[22:09:21] <glaebhoer1> that's what I thought :)
[22:09:27] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[22:09:28] <cmr> Matthias247: included a NonCopyable member: http://static.rust-lang.org/doc/master/std/util/struct.NonCopyable.html
[22:09:28] <dylukes> You can't pass unsaturated types (type constructors, partially applied constructors, etc) as type parameters.
[22:09:31] <cmr> Matthias247: (it's zero sized)
[22:09:43] <Matthias247> thx
[22:09:43] <dylukes> If we could do that it'd make a lot of type stuff easier.
[22:10:23] <dylukes> That was Edward on Scala's type system faults.
[22:11:10] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[22:11:25] <kvanb> dbaupp: you said this chan got more than 400 messages a day, but I left it overnight and there were only 100 messages
[22:11:28] <kvanb> and I'm on GMT+10
[22:11:34] <kvanb> I dun' believe ya.
[22:11:58] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:12:04] <kvanb> unless there is a tremendous userbase of Rusters in australia! woo
[22:12:10] *** Quits: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP) (Connection reset by peer)
[22:12:27] <glaebhoer1> this is weird, because according to the paper you linked Scala has had HKT since 2007. but according to edwardkmett's comment from last year it doesn't have them. anyway, I dunno nothing about scala so there's probably some missing information that would make it make sense
[22:12:42] <dylukes> They "have them" but they're not reified in a useful way.
[22:12:47] *** Joins: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net)
[22:12:56] * copumpkin looks up at kmc
[22:12:56] <Matthias247> cmr: although having to initialize is somewhat weird :)
[22:12:59] <short> Hey, does anyone know if there's anything built into rust that clears the terminal?
[22:13:01] <glaebhoer1> dylukes: what's an example of something you can do and something you can't?
[22:13:12] <dylukes> What you can do: https://github.com/scalaz/scalaz/
[22:13:19] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[22:13:28] <dylukes> https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/MonadTrans.scala
[22:13:31] <cmr> kvanb: there have been 23 * 15 messages in the past two hours.
[22:13:43] *** Quits: TisButMe (Mibbit@moz-5233EFA9.w92-144.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:13:44] <dylukes> Notice the type signatures.
[22:13:47] <copumpkin> oh, dylukes is still alive
[22:13:50] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[22:13:54] <dylukes> copumpkin alive and kicking.
[22:13:59] <dylukes> Sup copumpkin 
[22:14:03] <copumpkin> not much
[22:14:05] <kvanb> cmr: could that be including join/quits ?
[22:14:11] <cmr> kvanb: no
[22:14:12] <kvanb> because I'm not including those.
[22:14:15] <kvanb> oh
[22:14:18] <cmr> neither am I :)
[22:14:20] <kvanb> hmm, maybe I disconnected overnight
[22:14:27] <dylukes> glaebhoer1 okay so for comparison, lift :: Monad m => m a -> t m a in Haskell
[22:14:36] <dylukes> vs
[22:14:36] <dylukes> final def liftMU[GA](a: GA)(implicit G: Unapply[Monad, GA]): F[G.M, G.A]
[22:14:49] <dylukes> That's to get inference of G.
[22:14:51] <cmr> short: it should be added to http://static.rust-lang.org/doc/master/extra/term/struct.Terminal.html. right now you'll need to go through extra::terminfo manually.
[22:14:53] <dylukes> If you don't need it, def liftM[G[_] : Monad, A](a: G[A]): F[G, A] works
[22:15:16] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[22:15:28] <kvanb> if thats a monad, I dont want to see a transformer.
[22:15:43] <glaebhoer1> dylukes: hmm, (just a wild guess) might (part of) the difference be that Scala has HKT but not currying/partial application of type constructors?
[22:15:43] <cmr> kvanb: Option and Result are monads.
[22:15:47] <cmr> they're really not scary :)
[22:15:48] <dylukes> kvanb That IS a transformer.
[22:15:57] <kvanb> yeah sorry, just realized that
[22:15:57] <dylukes> Notice the dependence on Unapply :\.
[22:15:59] <glaebhoer1> kvanb: yeah I don't want to see too much Scala code either :P
[22:16:01] <dylukes> You can see where the problem comes in.
[22:16:22] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[22:16:42] <short> cmr thanks!
[22:17:00] <dylukes> Anyhow, from Monad.scala see the implementation of map
[22:17:01] <dylukes> map[A,B](fa: F[A])(f: A => B) = bind(fa)(a => point(f(a)))
[22:17:10] <Matthias247> since I'm using rust I'm constantly asking myself whether I'm the only person that never used Haskell ;)
[22:17:11] <dylukes> Monad extends Applicative[F] and Bind[F]
[22:17:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:17:17] <dylukes> F, in that case, is a HKT.
[22:17:31] <dylukes> You can write i.e. trait Monad[F[_]] extends Applicative[F] with Bind[F]
[22:17:33] <cmr> Matthias247: I used to have never used haskell. ruined that a few days ago though :p
[22:17:46] <dylukes> The syntax used is blanks (_) for empty slots.
[22:18:12] <kzzch> welp, got rid of unity
[22:18:24] <Matthias247> cmr: I don't plan to do it. Never got appealed by functional programming. I see Rust more as a C/C++ replacement ;)
[22:18:25] *** kzzch is now known as biardjd
[22:18:32] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[22:18:53] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[22:19:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:19:10] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[22:19:22] *** Joins: frogmella (Mibbit@78B37C1.5CE0D898.ECA1A3BD.IP)
[22:20:07] <cmr> Matthias247: I'm sorry :)
[22:20:31] <Matthias247> no problem. I can live with it :)
[22:21:01] <Matthias247> I'm instead doing stupid things like C# and Dart :)
[22:21:03] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[22:21:07] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[22:21:27] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:21:56] <kvanb> all the jobs are C#
[22:22:20] <kvanb> people aren't very good at picking technologies to utilize
[22:22:26] <cmr> having worked in python for the past two years, cannot confirm.
[22:22:27] <Matthias247> I would rather want a C# job than a Java or Javascript job ;)
[22:22:30] <earlz> https://gist.github.com/Earlz/8391463 Why does this give this compiler error? error: this function takes 2 parameters but 1 parameter was supplied .. let cs=CString::new(s. false);
[22:22:37] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:22:48] <cmr> earlz: you have a period, not a comma.
[22:22:48] <kvanb> all that I've seen advertised in my area in Australia, that is.
[22:23:22] <Matthias247> I'm currently using C++, C#, Java, AS3 and JS in parallel at work
[22:23:27] <earlz> ugh I thought I was going crazy heh
[22:23:32] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[22:23:50] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[22:24:06] <kvanb> earlz are you using an imac
[22:24:31] *** Joins: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP)
[22:24:37] <kvanb> I have a 2008 iMac I got for cheap, but the screen is really bizarre and I cant tell the different between periods and commas on it
[22:27:27] *** Quits: scp (scp@moz-9BEDE8C8.hsd1.ca.comcast.net) (Ping timeout)
[22:27:47] *** Quits: scpayson (scp@moz-9BEDE8C8.hsd1.ca.comcast.net) (Ping timeout)
[22:28:28] *** Quits: GreyKnight (GK@moz-4E38896B.range86-176.btcentralplus.com) (Quit: )
[22:28:37] <earlz> kvanb: no, regular PC. My font is pretty terrible at distinguishing , and .
[22:28:54] <earlz> like a 1 pixel difference, need to find a better programmer font
[22:29:04] <kvanb> lol
[22:29:29] <dylukes> nmatsakis if I sacrifice a lamb, will you implement HKTs?
[22:29:36] <dylukes> I can get the lamb. 
[22:30:05] <zxcdw> highly kinetic types
[22:30:13] <dylukes> Highly Korrosive Types.
[22:30:28] <dylukes> They cause bitrot :p?
[22:31:03] <kvanb> hardcore types
[22:31:29] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:31:40] <kvanb> hi aatch 
[22:32:09] <aatch> kvanb, hi
[22:33:34] *** Joins: valenting (Thunderbir@23EF5095.ECBF5C84.FB866788.IP)
[22:34:35] <glaebhoer1> dylukes: I have the (completely unsubstantiated) impression that nmatsakis is backlogged on a lot of other Really Important Stuff and might implement HKTs if your lamb sacrifice induces a supernatural entity to insert an additional month for him in between January and February.
[22:35:06] <kvanb> That can be arranged.
[22:35:09] <cmr> A clone would also be acceptable.
[22:35:15] <kvanb> I'll pass it by the boss tonight
[22:35:32] <dylukes> I mean, it was more of... eating it.
[22:36:20] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[22:36:24] <glaebhoer1> then are you a machine that converts lambs into time?
[22:36:40] *** Quits: rca_ (rcatolino@moz-5C941ACC.adsl.proxad.net) (Ping timeout)
[22:37:18] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Ping timeout)
[22:37:51] <_achin> what about time into lambs? 
[22:38:24] <glaebhoer1> what would _that_ be good for?
[22:38:26] *** Quits: frogmella (Mibbit@78B37C1.5CE0D898.ECA1A3BD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:38:47] <kimundi> halorgium: Hmpf, as I expected writing it down properly takes ages for me. :P I'm making progress though!
[22:39:02] <halorgium> kimundi: haha, no rush here. :)
[22:39:27] <aatch> Aren't ewes machines that turn time into lambs?
[22:39:28] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[22:39:37] <cmr> heh
[22:39:39] <cmr> well played
[22:39:43] <_achin> they are slow
[22:40:32] <_achin> i want to convert my tuesdays into a lamb kabob
[22:41:39] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[22:44:09] *** Joins: magg (magg@14B25297.CD956C53.3D0AE249.IP)
[22:44:35] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[22:45:24] *** Quits: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:45:41] *** Joins: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP)
[22:45:50] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[22:45:52] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[22:46:35] <magg> can i return a struct in a method? i want several values return, so a struct seems like a good option
[22:46:44] <Matthias247> yes
[22:47:24] *** Quits: lenstr (lenstr@CDBC68DA.9636F313.7A27613B.IP) (Ping timeout)
[22:47:34] <aatch> magg, you can also return a tuple.
[22:47:49] <magg> cool
[22:47:57] <aatch> Which allows for the syntax of `let (a,b) = foo.my_method()` at the call site
[22:48:04] <cmr> you can return anything, in fact :)
[22:48:09] <cmr> (any type, that is)
[22:48:29] <Matthias247> acrichto: I'm playing a little bit with epoll to try to build a select that works on streams and channels. But there are quite a lot of open questions
[22:50:41] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[22:51:19] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[22:51:53] <strcat> Matthias247: hm?
[22:52:20] *** Quits: Cevn (sameer@moz-BDD19865.public.wayport.net) (Ping timeout)
[22:52:28] *** nrc|afk is now known as nrc
[22:52:41] <Matthias247> strcat: I want working IO ;)
[22:52:52] <strcat> Matthias247: epoll only does async I/O for sockets
[22:53:44] <strcat> although you could always use the kernel AIO no one uses ;p
[22:53:58] <Matthias247> mainly, but you can also use it for timers and signals
[22:54:03] <Matthias247> through xyz_fd
[22:54:05] <strcat> sure, and pipes
[22:54:10] <Matthias247> yep, no files
[22:54:34] <Matthias247> but I think that's not too drastic for the beginning
[22:54:52] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[22:55:31] <strcat> Matthias247: so moving away from libuv? I don't really understand
[22:55:36] *** Joins: Cevn (sameer@moz-BDD19865.public.wayport.net)
[22:55:47] *** Joins: quux00 (Mibbit@moz-59EA8D29.drr01.drhm.nc.frontiernet.net)
[22:56:04] <Matthias247> strcat: my main concern was also having a nonblocking api on the 1:1 implementation
[22:56:24] <cmr> we don't have any nonblocking apis at all
[22:56:29] <cmr> (well, besides process)
[22:56:32] <strcat> Matthias247: linux doesn't guarantee that write doesn't block
[22:56:39] <cmr> m:n is still synchronous
[22:56:39] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[22:56:47] <cmr> (the api we expose)
[22:57:09] <strcat> epoll is really about 'best-effort' socket throughput
[22:57:16] <Matthias247> yes. But I think you would want one if you want to achieve a high performance in 1:1 mode. And I think that's what 1:1 mode is for
[22:57:26] *** Quits: Cevn (sameer@moz-BDD19865.public.wayport.net) (Ping timeout)
[22:57:38] <Matthias247> I think only sync for M:N is ok
[22:57:43] <strcat> so what is M:N mode for?
[22:57:46] *** Quits: valenting (Thunderbir@23EF5095.ECBF5C84.FB866788.IP) (Ping timeout)
[22:58:03] <Matthias247> what's not ok is that you can't do anything else while you block on a recv()
[22:58:11] <strcat> we're going to have dynamic selection between 1:1, M:N and *also* non-blocking I/O?
[22:58:15] <Matthias247> the task is dead when the server doesn't respond
[22:58:25] <cmr> it's not dynamic?
[22:58:26] <strcat> Matthias247: recv_timeout
[22:58:32] <cmr> I mean it's indirect, but you can't really change it afaik
[22:58:38] <strcat> cmr: it's dynamic, it uses trait objects and you can mix them
[22:58:47] <strcat> cmr: you can have M:N and 1:1 tasks mixed together
[22:58:59] <strcat> dispatches to the right code based on the task
[22:59:00] <cmr> sure, but you can't switch a task.
[22:59:08] <strcat> cmr: sure
[22:59:17] <strcat> you can start another task though...
[22:59:29] <Matthias247> strcat: that doesn't help. I wanted to implement something with websockets and M:N. Now I have a task that owns the socket. Now that task can either wait until the client wants to send something (through a channel) or it can call recv() and wait for the remote to send
[22:59:33] <Matthias247> but not both
[23:00:00] <strcat> well, I'm fine with 1:1 and sync I/O in a stdlib
[23:00:11] <Matthias247> and doing something like recv_timeout(xyz, 10ms) is a bad hack
[23:00:12] <strcat> rust's fault for not allowing you to share a socket between tasks and do concurrent reads/writes
[23:00:12] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[23:00:16] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:00:16] *** ChanServ sets mode: +ao brson brson
[23:00:30] <strcat> Matthias247: you need timeouts for UDP, certainly
[23:00:36] <strcat> maybe not TCP
[23:00:39] <strcat> but it seems like a good idea
[23:00:56] <Matthias247> yeah, the api should generally provide timeouts
[23:01:01] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:01:08] <strcat> blocking vs. non-blocking is entirely orthogonal to whether you can read/write at the same time
[23:01:23] <strcat> in C, I can have a single socket being read to from one thread and written to from another
[23:01:39] <strcat> rust has to add extra APIs to deal with cases like this 
[23:01:41] <Matthias247> yes, that's a typical approach
[23:01:49] <igork> hi, i've another noob question - whats the point of returning Option from TcpStream::connect (stdlib one)? If something wrong is happen - i need to trap condition anyway, or i missed something? trying to learn rust and its stdlib :)
[23:02:02] <strcat> imo it's already far too complex and will end up even more complex
[23:02:05] <Matthias247> another is to deal with everything in one thread and use multiplexing
[23:02:08] <strcat> when we support 1000 ways of doing I/O
[23:02:08] <cmr> igork: io's error handling is an open question
[23:02:16] <strcat> some of which are totally useless on some platforms
[23:02:18] <cmr> igork: it returns None when the condition was handled.
[23:02:21] *** Quits: ponce (ponce@moz-D65F4148.fbx.proxad.net) (Quit: )
[23:02:26] <quux00> I'm learning Rust and could use a little code review: https://gist.github.com/quux00/8391823  Is there a better/more idiomatic way to get a mutable pointer than on line 9?
[23:02:42] <cmr> quux00: Some(mut p)
[23:02:58] *** Joins: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com)
[23:03:02] <quux00> OK, thanks. I'll try that.
[23:03:25] <geal> maybe connect should return a Result instead of an Option
[23:03:38] <geal> there are different types of errors that should be handled differently
[23:03:48] <cmr> geal: https://mail.mozilla.org/pipermail/rust-dev/2013-October/005990.html
[23:04:00] *** Joins: scpayson (scp@moz-9BEDE8C8.hsd1.ca.comcast.net)
[23:04:02] <strcat> rust likes taking the convoluted/complex approach without actually figuring out if it's worth it
[23:04:10] <Matthias247> strcat: Now imho that's a question of what the target is. When you want to design the stdlib for special use cases you might get away with either one or the other solution. But when you want to be able to do everything that you can do with C(++), then it will inevitably get large
[23:04:30] <strcat> are we really going to have dozens of channel types, blocking I/O, non-blocking I/O, async I/O, sockets split into parts, and whatever else?
[23:04:35] *** Quits: GregorR (Gregor@moz-D9651910.so) (Quit: Coyote finally caught me)
[23:04:48] <geal> cmr: oh, of course, it has already been discussed :)
[23:04:56] <strcat> Matthias247: synchronous I/O isn't a special case, it's the general case
[23:05:19] <strcat> it's fast, and scales well enough for most applications
[23:05:34] <geal> anyway, most IO methods are already returning an IoResult, and it felt good, for a basic error handling, and for something more fine grained
[23:06:07] *** Joins: GregorR (Gregor@moz-D9651910.so)
[23:06:48] <strcat> Matthias247: making a beautiful, simple API for sync I/O is the priority imo - you shouldn't ever need non-blocking/async I/O for semantic reasons
[23:06:54] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:07:04] <strcat> just when you need to reduce resource usage per request
[23:07:21] <igork> cmr: so it may change before 1.0... ok, thanks
[23:07:59] <strcat> I've yet to hear a good reason why rust needs to be offering everything under the sun as it's trying to do
[23:08:13] <strcat> I/O in C is way easier and faster
[23:08:25] * strcat shrugs
[23:08:36] <Matthias247> strcat: I can't completely agree. Many applications use an event loop as the base (e.g. the whole qt or gtk stuff). You couldn't build it that way in Rust. However it might also not be the "Rust way"
[23:08:48] <strcat> if I need to write an async server I'm going to use boost aio, not rust
[23:08:54] <strcat> stack per request makes async useless
[23:09:08] <Matthias247> I'm alreay using boost asio ;)
[23:09:09] <strcat> if I want to write a sync server, I'm not going to use rust either - it's too complicated
[23:09:18] <strcat> and doesn't offer everything you need
[23:09:25] <strcat> no way to have one thread reading and one writing
[23:10:10] <strcat> and select isn't the solution imo
[23:10:16] <strcat> it's a really low-level API design
[23:11:09] <strcat> Go uses it because they default to a single thread and 0-capacity channels
[23:11:12] <Matthias247> of course. I wanted to experiment of how a usable rust api could look like
[23:11:19] <strcat> so select is needed because their select makes a random choice
[23:11:24] <strcat> otherwise you might keep trying to do the same thing
[23:11:55] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:12:19] <strcat> *shrug*, I just don't get why rust can't pick something and try to do it better than C
[23:12:22] <geal> right now, getting the primitives to work already takes some time. Once they're good, a better API could emerge
[23:12:35] <strcat> the primitives all make a lot of assumptions
[23:12:51] <geal> the primitives maps to OS APIs
[23:12:53] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[23:13:09] <geal> so they have assumptions from the OS
[23:13:16] <strcat> geal: uh, we're talking about rust right?
[23:13:18] <brson> rust does lots of stuff better than c
[23:13:27] <geal> strcat: yup
[23:13:43] <strcat> brson: talking about use cases, not language design though
[23:13:51] <strcat> if I want to write a video game, will I use C++ or Rust?
[23:13:57] <geal> I spent a few days deep into libnative to work on unix sockets. We first have to map to OS calls before we get a usable API
[23:14:16] <brson> strcat: I wish you would stop telling people rust is bad
[23:14:24] *** Joins: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net)
[23:14:27] <strcat> I'm not telling people rust is bad
[23:14:40] *** Joins: steveno (steveno@moz-2B2BE86F.hsd1.pa.comcast.net)
[23:14:45] <Matthias247> direct mapping to OS Apis will not work very well in advanced use cases. That's already because Windows and Linux are too different
[23:15:20] <geal> sure
[23:15:33] <strcat> Matthias247: async I/O maps to what windows does
[23:15:39] <geal> that's why a better API should be done
[23:15:54] <Matthias247> strcat: yes. select doesn't work for win
[23:15:56] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[23:16:02] <strcat> Matthias247: they have a select-like API
[23:16:10] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:16:15] <Matthias247> they also have select, but it sucks :)
[23:16:29] <strcat> Matthias247: http://msdn.microsoft.com/en-us/library/ms741540(v=VS.85).aspx
[23:16:37] <strcat> it doesn't suck
[23:16:43] <strcat> it doesn't have a counterpart on linux, sure
[23:17:02] <strcat> linux doesn't need async file I/O, that's why no one cares about POSIX AIO (glibc uses threads) or the native AIO
[23:17:43] *** Quits: mentero (mentero@moz-D61C6F02.proxnet.pl) (Ping timeout)
[23:17:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:19:40] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:19:40] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[23:21:01] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:21:19] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[23:21:26] <Matthias247> strcat: you can also do sth. similar than libuv and provide an IOCP like API on both. That's what I'm currently thinking about
[23:21:35] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[23:21:52] <strcat> Matthias247: and it's ridiculously slow on linux
[23:22:10] <strcat> like, 30x slower than doing it idiomatically
[23:22:33] <Matthias247> what is slow?
[23:22:41] <Matthias247> boost asio also does that
[23:22:47] <strcat> pretending AIO works for files on linux
[23:22:54] <strcat> Matthias247: asio isn't part of the C++ standard
[23:23:19] <strcat> the stdlib is based around what asio wants/needs
[23:24:36] <Matthias247> hmm, don't understand. the rust or c++ stdlib? :)
[23:25:25] <strcat> the C++ stdlib
[23:26:13] <Matthias247> I think in terms of IO the stdlib is not much std
[23:26:52] <strcat> the vast majority of applications just want threads and sync I/O
[23:26:56] <strcat> most aren't nginx
[23:27:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[23:28:06] <Matthias247> with the same argument you could say most aren't firefox and throw all stuff for servo out :)
[23:28:19] <strcat> firefox doesn't need AIO
[23:28:33] <strcat> it might use some, dunno, but it definitely doesn't need to
[23:28:59] <strcat> I'm sure for a browser, threads and sync I/O will be best on both linux/windows
[23:29:17] <strcat> it's a client
[23:29:40] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[23:31:13] <strcat> the default should be simple, high-level code
[23:31:23] <strcat> you shouldn't have to worry about a long running CPU-bound loop
[23:31:56] <strcat> you should have multiple-producer, multiple-consumer channels (FIFO, LIFO, priority) and concurrent maps/vectors
[23:32:57] <strcat> not many languages can prevent you from having data races by default - that's the biggest problem with threads
[23:32:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[23:32:59] <strcat> and rust solves it
[23:33:14] <Matthias247> From my experience a dedicated receive thread also isn't necessarily easier than async IO. At least you have to get the data from the receiving thread to the other end and have to care whether the socket was not already closed
[23:33:41] <strcat> libuv uses a thread pool for writes and file I/O
[23:33:45] <strcat> it pretty much *can't* be faster
[23:34:08] <strcat> it just might scale a lot better, if you leverage it to reduce resources per client
[23:34:13] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[23:35:05] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Ping timeout)
[23:35:20] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[23:37:43] <Gracenotes> man, rustc takes a while to build
[23:39:48] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[23:39:48] <flaper87> mmh, how can I get the size of a vector ?
[23:39:54] <strcat> len()
[23:40:56] <flaper87> strcat: thnx
[23:41:02] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Connection reset by peer)
[23:41:53] <strcat> Matthias247: imo it's not possible to get non-blocking/aio "right" in a portable way and it doesn't belong in a stdlib, it belongs in a libaio where all of the different ways of doing things can battle it out
[23:42:01] <strcat> in 5 years, they'll be obsolete anyway
[23:42:32] <dbaupp> kvanb: I'm in the same timezone (well, +11 at the moment), and I almost always wake up to 1000+ messages
[23:43:04] <kvanb> did you record for today?
[23:43:13] *** Quits: Ferreus (ferreus@moz-3C3CC855.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[23:43:25] <dbaupp> can't remember, but it was over 1000 iirc. (yesterday was precisely 1000.)
[23:43:48] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Connection reset by peer)
[23:43:51] <Matthias247> strcat: C# and Java do it. Although it was also not in the first iterations of Java
[23:44:06] <strcat> C# async/await maps to IOCP
[23:44:13] <strcat> doesn't map to anything on linux
[23:44:34] <strcat> microsoft likes tossing away old technologies every year anyway
[23:44:48] <Matthias247> the async calls work on mono. Although I don't know how they are implemented
[23:44:54] <strcat> they 'work'
[23:46:26] <strcat> rust will live in a world of many cores, many layers of caches/memory, hardware transactional memory, hardware lock elision
[23:47:45] <Matthias247> now basically their API is similar to that of libuv. And that seams to work quite good also on linux
[23:47:57] <strcat> it doesn't work well on linux
[23:48:14] <strcat> it will perform significantly worse than sync disk I/O and non-blocking sockets as optimized servers do
[23:48:30] <strcat> it will perform significant worse than sync I/O everywhere too
[23:50:09] <Matthias247> for files I could imagine that. For sockets - don't know
[23:50:42] <strcat> when your flash-based storage gives you a predictable worst-case latency, why wouldn't you just block?
[23:50:53] <strcat> Matthias247: it's a lossy abstraction over how linux does sockets though
[23:50:58] *** Quits: vmx (vmx@moz-BC31FFFF.pools.arcor-ip.net) (Quit: Leaving)
[23:51:21] *** Quits: dbaupp (Thunderbir@moz-BB237A70.lns20.syd6.internode.on.net) (Ping timeout)
[23:51:27] <Matthias247> I only discovered that doing only async (register on epoll - wait - then read/write) is quite slow. I use a mixture of non-blocking sync. IO and async IO in my software
[23:52:33] *** flaper87 is now known as flaper87|afk
[23:52:48] <Matthias247> try to send/recv everything synchronously and only on EAGAIN fall back into a waiting state
[23:52:56] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[23:53:03] <Matthias247> that works with boost asio, c# IO and java IO
[23:53:12] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[23:53:59] <strcat> Matthias247: but if you already have a stack for the request, I doubt there's a benefit
[23:54:19] <strcat> if you don't, then the point is conserving resources
[23:55:18] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[23:55:29] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[23:55:56] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:56:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[23:58:00] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[23:58:45] <magg> so i'm returning a tuple in a function, but i get a pointer error... http://pastebin.com/eg5bTkzZ  error: borrowed value does not live long enough.
[23:59:13] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[23:59:22] <halorgium> kimundi: i'm off to go rock-climbing; i'll be online but unresponsive if you manage to complete the prose ;)
[23:59:47] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Quit: Leaving...)
[23:59:51] <cmr> magg: you are creating a TrieMap, then trying to return a reference into the treemap.
