[00:00:11] <GBGamer> rillian: what c way are you trying?
[00:00:24] <rillian> niconii: what does that look like?
[00:00:41] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[00:01:02] <rillian> I guess I could let mut name : [u8; 4]; u[1] = v >> 24 & 0xff?
[00:01:06] *** Quits: ryanxcharles (ryan@moz-lcf.eq6.124.64.IP) (Quit: Leaving)
[00:01:28] <rillian> I was trying to find a way to do it in an initializer
[00:01:30] <GBGamer> let u: u32 = (a[0] as u32) << 24 | (a[1] as u32) << 16 | (a[2] as u32) << 8 | a[1] as u32;
[00:01:31] <bluss> yes
[00:01:47] <OmniMancer1> genbattle: to get ABI stability you'd have to forbid almost all features in the public interface, no generics, no actual structures, mark every single API function as #[inline(never)]
[00:01:50] <GBGamer> change the last a[1] to a[3]
[00:01:53] <niconii> GBGamer: that's the wrong direction
[00:01:59] <terpstra_> bstrie: you think another example other than scoped where destructors not running after the lifetime ends would make the ‘static proposal carry more weight?
[00:02:02] <niconii> GBGamer: they want u32 to bytes, not the other way around
[00:02:02] <rillian> GBGamer: or commas to go the other way
[00:02:07] <terpstra_> i try to find one, then!
[00:02:10] <rillian> I'll give that a try
[00:02:13] <GBGamer> Oh, sorry
[00:02:13] *** Quits: andresv (textual@moz-qhe.8nh.65.129.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:02:40] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[00:02:56] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:03:02] <niconii> playbot: let n: u32 = 0x12345678; let a = [(n >> 24 & 0xff) as u8, (n >> 16 & 0xff) as u8, (n >> 8 & 0xff) as u8, (n & 0xff) as u8]; a
[00:03:03] -playbot- [18, 52, 86, 120]
[00:03:14] <niconii> this would be big endian, here
[00:03:18] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[00:03:22] *** Joins: doomrobo (doomrobo@moz-tj2e6v.261j.6edk.2000.2604.IP)
[00:03:27] <niconii> pretty messy to do it this way, though
[00:03:32] *** Joins: new_one (new_one@moz-44f.fqb.42.128.IP)
[00:04:03] *** Quits: veqz (veqz@moz-es6.633.210.84.IP) (Ping timeout: 121 seconds)
[00:04:06] <niconii> if you don't actually care if they're u8s or not i guess you could take out the "as u8" for each
[00:04:15] <boss_mc> rillian: http://is.gd/8nex7b ?
[00:04:32] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[00:04:40] <boss_mc> oh I see someone already suggested that... ninja'd
[00:04:55] <GBGamer> the point is there are a lot of different ways to do it :P
[00:05:20] <niconii> if you're already using byteorder though, yeah, i'd go with that i think
[00:05:22] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[00:05:23] <doomrobo> can someone explain to me why I'm getting this "can't borrow immutable as mutable" error here? http://is.gd/1VmOfu
[00:06:06] <boss_mc> doomrobo: Your `f` parameter is non-mutable
[00:06:09] <Mutabah> doomrobo: f is a FnMut, which has call(&mut self)
[00:06:11] *** Joins: bombless (_@moz-odk.piv.41.59.IP)
[00:06:11] <GBGamer> doomrobo: make F: Fn(T)
[00:06:20] <boss_mc> http://is.gd/Z13WgM
[00:06:33] <Mutabah> doomrobo: Bind 'f' to be mut, and it will work "mut f: F"
[00:06:42] <doomrobo> awesome!
[00:06:53] *** Joins: aatch (james@moz-4tpcve.pd7t.fvcm.e000.2406.IP)
[00:07:14] <doomrobo> Mutabah, this code snippet is outdated, right? http://doc.rust-lang.org/reference.html#generic-functions
[00:07:20] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Ping timeout: 121 seconds)
[00:07:26] <terpstra_> bstrie: here’s a fairly bad example: take a RefMut from a RefCell<>. Leak the RefMut via Rc. Now the RefCell’s drop runs before the RefMut’s drop. Essentially, the leak causes you to retain dynamic ownership of an object while the object is being destroyed by its owner.
[00:07:29] <doomrobo> I'm trying to update that for the 1.0 release
[00:07:29] *** Quits: achanda (achanda@moz-fr1.spq.217.162.IP) (Connection closed)
[00:07:33] <terpstra_> probably a panic results
[00:07:49] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[00:08:38] <terpstra_> s/dynamic ownership/dynamic borrow/
[00:08:49] *** Joins: deadc0de (chsitter@moz-19g.0cb.197.90.IP)
[00:08:53] *** Quits: Ralith (ralith@moz-miv.lne.251.63.IP) (Ping timeout: 121 seconds)
[00:09:25] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[00:10:35] <boss_mc> What does the ? in "?Sized" mean?  It's also referenced in the Leak RFC as if it's a recognized modifier on traits, but I can't find any docs on it
[00:10:54] <terpstra_> boss_mc: Sized is a trait almost every type has
[00:10:54] <GBGamer> boss_mc: it means that it can be unsized or sized
[00:11:03] <terpstra_> ?Sized means you don’t require the thing to have Sized
[00:11:33] *** Quits: bitonic (bitonic@moz-433a13.31-151.libero.it) (Ping timeout: 121 seconds)
[00:11:48] <terpstra_> if you write generic code, there’s an implied T:Sized in your code. if you can actually handle unsized types, saying T:?Sized makes your code more general
[00:11:51] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Ping timeout: 121 seconds)
[00:11:52] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[00:12:19] *** Joins: acharles_ (acharles@moz-ulbdcn.ca.comcast.net)
[00:12:32] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[00:12:37] <bstrie> terpstra_: rust makes the following guarantee: "if you don't use `unsafe`, then any memory-unsafe behavior that results represents a soundness hole in rust or its standard library"
[00:12:41] *** Quits: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP) (Ping timeout: 121 seconds)
[00:13:09] <terpstra_> bstrie: i understand they are only concerned about memory safety
[00:13:12] <bstrie> terpstra_: if you can demonstrate a soundness hole (as arielb did to kick off this whole event), then it is a stop-the-world sky-is-falling defcon-1 emergency
[00:13:52] *** Quits: acharles (acharles@moz-ldt.et5.188.67.IP) (Ping timeout: 121 seconds)
[00:13:52] *** acharles_ is now known as acharles
[00:13:58] <boss_mc> terpstra_: Ah, that makes sense (and explains the comment about ?Leak, everything would assume "T: Leak" so you'd end up annotating everything with "?Leak" to deal with annoying cases
[00:14:01] <boss_mc> )
[00:14:14] <mdcox> Woo! PDXRust meetup is a go :D
[00:14:38] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:15:05] *** Joins: saml_ (saml@moz-rkfmct.res.rr.com)
[00:15:06] <aatch> boss_mc, there's arguments both ways. If we even decide to add a "Leak" trait, we'll have to do some investigation to determine what the best default it.
[00:15:47] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[00:15:55] <boss_mc> aatch: Yeah, I was just trying to understand the problem enough to follow the discussions :)
[00:16:15] *** Quits: zzmp_ (zzmp@moz-85ak57.12ul.lrlq.5500.2604.IP) (Connection closed)
[00:16:29] <bstrie> terpstra_: fwiw I think the rkjnsn's proposed extension to memory safety, "never allow non-static references to leak", is a good idea, but it's not enforceable
[00:16:45] *** Joins: porglezomp (Adium@moz-9jpvrg.dsl.speakeasy.net)
[00:16:54] <porglezomp> Hello!
[00:16:59] <mbrubeck> hi
[00:17:11] *** Quits: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[00:17:16] <bstrie> accounting for cycles in the definition of memory safety is more important than accomodating one specific kind of cleanup API
[00:17:24] <porglezomp> So, I'm wondering
[00:17:39] <porglezomp> Should I be using the box syntax and pattern features?
[00:17:50] <porglezomp> What are the downsides?
[00:18:05] *** Joins: ty (ty@moz-i6c4to.wa.comcast.net)
[00:18:08] <bstrie> porglezomp: anything unstable might break at any time. that's the downside :)
[00:18:20] <niconii> porglezomp: also, no one on beta can use your code
[00:18:22] <doomrobo> what box syntax and pattern features?
[00:18:26] *** Joins: choplin (choplin@moz-0fql9u.t6mc.g9m6.001a.240d.IP)
[00:18:32] *** Quits: maraoz (maraoz@moz-108.kt9.137.186.IP) (Connection closed)
[00:18:48] <mbrubeck> `box n` instead of `Box::new(n)`, and also `box n` as a pattern
[00:18:55] <ty> Why are official rust packages not getting updated?  Shouldn't this be a part of the official build process?  
[00:18:55] <doomrobo> ooh
[00:19:02] <porglezomp> So sad
[00:19:09] <porglezomp> I like it so much more
[00:19:19] *** nsm is now known as nsm|away
[00:19:24] <ty> `num` has been broken since the latest nightly :(
[00:19:35] *** Quits: deadc0de (chsitter@moz-19g.0cb.197.90.IP) (Quit: Lost terminal)
[00:19:59] <terpstra_> porglezomp: you’re not alone :)
[00:20:06] <scott> porglezomp: well, one option is to simply wait until it's stabilized, and use it then. you won't be sad forever :p
[00:20:12] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[00:20:29] <porglezomp> So is the current instability to do with the box location junk?
[00:20:46] <insaneinside> hooray: "error: aborting due to 100 previous errors"
[00:20:57] *** Quits: _petr (petr@moz-2pi.7q8.248.178.IP) (Ping timeout: 121 seconds)
[00:21:10] <porglezomp> And what is the timeframe that it's planned as stable?
[00:21:15] <mbrubeck> porglezomp: Yeah, I think it's waiting on implementation of https://github.com/rust-lang/rfcs/blob/master/text/0809-box-and-in-for-stdlib.md
[00:21:36] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[00:21:45] *** Joins: Dr_Doom (Mibbit@moz-jvs.pul.119.197.IP)
[00:22:14] <porglezomp> Oh yay!
[00:22:17] *** Quits: kgrandon (Adium@moz-l8ebtf.sfo1.mozilla.com) (Quit: Leaving.)
[00:22:21] <boblehest> How long do you think until an in-depth guide is available for Rust? Six months? I really don't like using Rust without proper understanding of _everything_. In particular the borrow checker is a creature I don't quite understand.
[00:22:35] *** Quits: redShadow (redShadow@moz-47mtkq.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[00:22:45] <boss_mc> boblehest: https://doc.rust-lang.org/book/ not enough?
[00:22:55] <mbrubeck> boblehest: There's an effort going on *right now* to update the language reference: http://internals.rust-lang.org/t/auditing-the-reference-manual/1952
[00:23:09] * mbrubeck had two reference PRs accepted already today :)
[00:23:12] <boblehest> boss_mc: Although a great guide, it doesn't cover everything. At least not yet. :)
[00:23:12] <terpstra_> boblehest: i found rustbyexample quite helpful
[00:23:32] <boblehest> terpstra_: I've read that as well.
[00:23:36] <boblehest> I also read the reference.
[00:23:38] *** Quits: marsel (user@moz-1gf.bsk.180.94.IP) (Ping timeout: 121 seconds)
[00:23:45] <Dr_Doom> Thank you for efforts 
[00:23:51] <boss_mc> boblehest: read all the code :-)
[00:24:00] <terpstra_> boblehest: http://arthurtw.github.io/2014/11/30/rust-borrow-lifetimes.html while a bit dated, helped me understand borrows
[00:24:01] <mbrubeck> The reference wasn't worked on much for the past while, because it was impossible to keep up with language changes pre-1.0
[00:24:11] <porglezomp> I see that box is not blocking 1.0, which is sad.
[00:24:12] <mbrubeck> so it needs a lot of work now, and is starting to get it.
[00:24:15] <freefall> boblehest: the fact is that those are currently as good as it gets for rust documentation
[00:24:19] <porglezomp> But also good because it looks like it's going to be a little while.
[00:24:24] <porglezomp> And 1.0 is clearly more important.
[00:24:29] <mbrubeck> porglezomp: But 1.1 will be six weeks later, and 1.2 six weeks after that... :)
[00:24:49] <iopq> how long do I wait for the num crate to get fixed before I reach for `unsafe` and do it myself?
[00:24:57] <mbrubeck> so it'll be on the stable channel very soon after it's ready
[00:24:59] <porglezomp> Is it really 6 weeks? Wow, I haven't been keeping up with the plans.
[00:25:07] <mbrubeck> Yup, just like Firefox and Chrome
[00:25:15] *** Quits: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:25:43] <bstrie> boblehest: the borrow checker has quite detailed documentation in its source, if you want a master-level understanding
[00:25:43] <mbrubeck> iopq: Does https://github.com/rust-lang/num/pull/87 fix your issue?
[00:25:44] <GBGamer> iopq: fix the num crate, pull request
[00:25:46] <OmniMancer1> iopq: what exactly is broken with it?
[00:25:53] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Quit: leaving)
[00:25:56] <GBGamer> then use that version you fixed
[00:26:10] *** Joins: krdln (krdln@moz-ohe9vg.dynamic.chello.pl)
[00:26:12] <boblehest> bstrie: Didn't think of that. :) Coming from C++, I'm not used to going to the source for information.
[00:26:12] <iopq> mbrubeck: didn't achrichton say it doesn't work
[00:26:14] *** Quits: marcusklaas (marcus@moz-0ol9oe.chello.nl) (Client exited)
[00:26:23] *** Parts: Dr_Doom (Mibbit@moz-jvs.pul.119.197.IP) ()
[00:26:27] <insaneinside> Hrm: "error: the trait `MyTrait` cannot be made into an object" indicates that `MyTrait` is not object-safe, correct?
[00:26:35] <mbrubeck> yeah, it appears to break from_str_radix
[00:27:06] <iopq> GBGamer: it's using unstable APIs, not sure how to fix other than to add the attribute, but then it wouldn't work on beta so it wouldn't be accepted
[00:27:29] *** Joins: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net)
[00:27:29] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Connection closed)
[00:27:30] <GBGamer> what specifically is it using?
[00:27:54] <iopq> from_radix_str
[00:27:58] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:28:03] <iopq> it's unstable for floats
[00:28:21] *** Joins: brson (brson@moz-1vj.eev.48.37.IP)
[00:28:21] *** ChanServ sets mode: +ao brson brson
[00:28:25] <GBGamer> well, you could just fix it yourself, then use it
[00:28:30] <GBGamer> And not do a PR
[00:29:46] <insaneinside> Have the object-safety rules changed in the past month?
[00:29:57] *** Joins: potato (Mibbit@moz-7jk.c4n.66.207.IP)
[00:30:46] <bstrie> boblehest: see also the readme at https://github.com/rust-lang/rust/tree/master/src/librustc_borrowck/borrowck
[00:31:17] *** Quits: borromakot (Adium@moz-p4vrhu.u9cs.nunl.000d.2601.IP) (Quit: Leaving.)
[00:31:20] *** Joins: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP)
[00:31:46] <insaneinside> A trait (call it `MyTrait`) that rustc used to consider object-safe now elicits "error: the trait `MyTrait` cannot be made into an object" on `impl Hash for MyTrait { ... }`.
[00:32:10] <GBGamer> iopq: I think that from_str_radix is still unstable might be a mistake...
[00:32:24] <potato> is there a helper func for extracting packaged integers from a u8 vector?  (e.g. I know u8s represent sequentially placed i32s in little endian; right now I'm bitshifting things back together again)
[00:32:49] <Mutabah> potato: the byteorder trait?
[00:32:54] <Mutabah> s/trait/crate/
[00:32:58] <mbrubeck> insaneinside: The last thing I see in the changelog about changing object safety is https://github.com/rust-lang/rfcs/pull/817 which was implement two months ago.
[00:33:10] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[00:33:34] *** nsm|away is now known as nsm
[00:33:49] <potato> Mutabah thanks!  that's what I was looking for
[00:34:21] *** Joins: Guest22 (textual@moz-v8ufgd.fibertel.com.ar)
[00:35:24] <insaneinside> mbrubeck: hrm... i *am* correct that the error message indicates an object-safety problem, correct?
[00:35:36] <mcpherrin> insaneinside: yes
[00:35:58] *** Joins: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net)
[00:36:09] <mcpherrin> insaneinside: Maybe impl<T> Hash for T where T: MyTrait?
[00:36:17] <mbrubeck> object safety is the sort of thing I hope the reference will include someday
[00:36:30] <mcpherrin> I have used that pattern to work around that message before.
[00:36:42] *** Joins: jawzi (jawzi@moz-9o5r4v.mn.charter.com)
[00:36:54] <insaneinside> mcpherrin: in this case i need to allow for dynamic dispatch for MyTrait trait objects.
[00:37:00] <steveklabnik> boblehest: at this point, if there's still not in the book, please file issues. ownership and such is gonna get a PR tomorrow, but anything non-ownership/lifetime/borrowing related
[00:37:21] <mcpherrin> insaneinside: Then I guess mytrait needs to be object safe
[00:37:27] *** Quits: potato (Mibbit@moz-7jk.c4n.66.207.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:39:16] <insaneinside> (yes, I'm aware that Hash itself isn't object-safe -- that's why `MyTrait: Hashable` where `pub trait Hashable { fn hash(&self, state: &mut Hasher); }`...)
[00:39:51] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[00:40:25] *** Joins: kgrandon (Adium@moz-t7gg8c.hjek.d045.0009.2601.IP)
[00:40:50] *** Joins: zzmp (zzmp@moz-85ak57.12ul.lrlq.5500.2604.IP)
[00:41:27] <jawzi> .
[00:41:46] <boss_mc> terpstra_: Is your example actually a problem?  The RefMut has been leaked, sure, but it's no longer reachable, so nothing will ever try to drop it.  The RefCell stays borrowed and can't be re-borrowed (as we leaked the RefMut) but once it leaves scope it will be dropped safely.
[00:42:09] <boblehest> steveklabnik: It's been at least 4 months since I read the book/reference.
[00:42:12] <insaneinside> ...duh: supertrait `Clone` isn't object-safe.  Would be nice if rustc told me that.
[00:42:40] <boblehest> steveklabnik: So my information might be a bit outdated by now. :)
[00:42:45] <steveklabnik> boblehest: oh, then yes, a lot has change
[00:42:46] <steveklabnik> d
[00:42:49] <terpstra_> i was checking what the RefCell would do on drop. thought it might assume all borrows are gone by that point (which they would be w/o leaks). seems its fine, though.
[00:42:52] <steveklabnik> the TOC was re-done like two weeks ago
[00:43:16] <boss_mc> terpstra_: http://is.gd/MmAJfQ
[00:43:21] *** Parts: porglezomp (Adium@moz-9jpvrg.dsl.speakeasy.net) ()
[00:43:31] <XMPPwocky> is the Rust reference unique or shared?
[00:43:39] *** Joins: raph (Adium@moz-7ma.780.198.207.IP)
[00:43:41] <steveklabnik> racy
[00:43:42] <steveklabnik> :p
[00:44:13] <terpstra_> boss_mc: yeah - like i said, it seems fine. RefCell doesn’t actually do any checks on drop.
[00:45:04] *** bentley|away is now known as bentley
[00:45:21] <mbrubeck> XMPPwocky: reference-counted, of course
[00:45:51] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[00:46:31] *** Quits: zzmp (zzmp@moz-85ak57.12ul.lrlq.5500.2604.IP) (A TLS packet with unexpected length was received.)
[00:46:38] *** Joins: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com)
[00:48:04] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:49:06] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[00:51:29] *** Quits: davebettin (davebettin@moz-hde.5e5.136.67.IP) (Ping timeout: 121 seconds)
[00:51:43] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[00:52:03] *** Joins: amyers (amyers@moz-3i5391.1kl3.v890.000a.2601.IP)
[00:52:27] <doomrobo> woo! thanks steveklabnik . First commit to the rust project!
[00:52:29] *** Joins: Feyn (Feyn@moz-qqa.rg0.115.42.IP)
[00:52:36] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[00:53:38] <steveklabnik> doomrobo: awesome! :)
[00:54:09] *** Joins: qdwang (androirc@moz-7fa.eb1.95.211.IP)
[00:55:03] <boblehest> steveklabnik: Sounds great. I'll give it another look when my hype reaches critical levels again.
[00:55:45] <boblehest> Which is does every now and then when it comes to Rust. Right now I'm deeply rooted in some C++ stuff.
[00:56:01] *** Quits: laogao (laogao@moz-k1t.k7v.78.124.IP) (Connection closed)
[00:56:54] <steveklabnik> boblehest: :+1:
[00:57:09] *** Quits: cengizIO (textual@moz-b49.92p.188.78.IP) (Quit: Textual IRC Client: www.textualapp.com)
[00:57:17] <qdwang> In regex, how can I do to get this. Using "a|ab|c", when matching ac, it get a and c. When matching ab, it get ab. Now it will get a but not ab
[00:57:35] <terpstra_> how to catch a unix signal in rust?
[00:58:30] <burntsushi> qdwang: `a(b|c)`
[00:58:46] <aatch> burntsushi, not quite the same.
[00:59:02] <insaneinside> `a(b|c)?`?
[00:59:36] <qdwang> Not right. When matching ac, it should get an a and an c
[00:59:38] <aatch> qdwang, I think you need to specify some boundaries
[00:59:45] *** Joins: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP)
[00:59:45] *** Joins: jimb (user@moz-6gkikn.or.comcast.net)
[01:00:00] <aatch> qdwang, since right now, you'll never match `ab` since the a case will always match.
[01:00:13] <qdwang> I think there is a right most matching mode in regex
[01:00:20] <burntsushi> `a(b|c)` gets `ac` and `ab`.
[01:00:21] *** Quits: raph (Adium@moz-7ma.780.198.207.IP) (Quit: Leaving.)
[01:01:13] <zamabe> qdwang: ab|ac|a|c ?
[01:01:18] <mbrubeck> (a(b?))|c
[01:01:27] <qdwang> A c should be spilted
[01:01:59] <burntsushi> qdwang: i really can't understand what you want. it might be a good idea to give us some example strings and what you want to match.
[01:02:27] <aatch> There's also the option that maybe a regex isn't the right tool for the job.
[01:03:16] <pingveno> aatch: Nonsense. Regexs are perfect for every text job, especially parsing HTML.
[01:03:49] <GBGamer> tatus 'exit) (zerop code)) (bury-buffer) (delete-window (get-buffer-window (get-buffer "*compilation*")))) (cons msg code)))
[01:03:52] <GBGamer> argh
[01:03:56] <GBGamer> https://xkcd.com/208/
[01:04:02] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:04:07] <zamabe> pingveno: my browsers always work better on regex, tyvm.
[01:04:08] <burntsushi> pingveno: no really, they are: https://github.com/python/cpython/blob/master/Lib/html/parser.py <-- python standard library HTML parser.
[01:04:11] <suzart> hi all, is there a way to see the macro generated code? Sometimes I feel blind because I can't see what was generated
[01:04:11] *** Quits: chmanchester (Chris@moz-bkc2l6.rgd2.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[01:04:48] <steveklabnik> --emit=expanded, iirc?
[01:04:51] *** suzart is now known as paulosuzart
[01:04:56] <steveklabnik> that's a rustc argument, not a cargo one
[01:04:56] <Mutabah> suzart: --pretty expanded -Z unstable-options
[01:05:02] <steveklabnik> ^^^
[01:05:09] <GBGamer> Mutabah's correct
[01:06:28] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Connection closed)
[01:07:23] *** Quits: eric_lagergren (barsonme@moz-add4ru.fomj.2174.0008.2601.IP) (Ping timeout: 121 seconds)
[01:09:21] *** Joins: Guest5 (textual@moz-hnb58r.oc.cox.net)
[01:09:45] *** Quits: qdwang (androirc@moz-7fa.eb1.95.211.IP) (Ping timeout: 121 seconds)
[01:10:17] *** Joins: qdwang (androirc@moz-7fa.eb1.95.211.IP)
[01:10:42] <GBGamer> steveklabnik: your irc client is pretty; what are you using?
[01:10:47] <GBGamer> (saw it in a tweet)
[01:11:32] *** Joins: Dr_Doom (Mibbit@moz-3fj.jdu.119.197.IP)
[01:11:34] *** Quits: qdwang (androirc@moz-7fa.eb1.95.211.IP) (Connection closed)
[01:11:35] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[01:11:56] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[01:12:17] *** Joins: dr_bibble (Mibbit@moz-ejhggg.il.comcast.net)
[01:12:17] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[01:12:17] *** bentley is now known as bentley|away
[01:12:24] *** bentley|away is now known as bentley
[01:12:42] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[01:12:58] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:13:07] *** Quits: Dr_Doom (Mibbit@moz-3fj.jdu.119.197.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:14:35] *** Joins: qdwang (androirc@moz-7fa.eb1.95.211.IP)
[01:15:41] *** Quits: meh (meh@moz-p5gc2m.42-151.net24.it) (Ping timeout: 121 seconds)
[01:15:48] *** Quits: brson (brson@moz-1vj.eev.48.37.IP) (Quit: leaving)
[01:15:50] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (Ping timeout: 121 seconds)
[01:16:51] <qdwang> I just want the regex automaton to keep matching until it gets stop and return rhe last matched patrern
[01:16:54] *** Quits: amyers (amyers@moz-3i5391.1kl3.v890.000a.2601.IP) (Ping timeout: 121 seconds)
[01:17:03] <qdwang> Pattern
[01:17:14] *** Joins: playjax (chatzilla@moz-00hrnr.optusnet.com.au)
[01:17:15] *** Joins: popow (Thunderbird@moz-03f.kd0.252.223.IP)
[01:17:23] <burntsushi> qdwang: `find_iter`?
[01:18:12] *** Joins: dylan_ (dylan@moz-k5u.d0d.43.100.IP)
[01:18:49] <qdwang> No i mean matching ab from a|ab get ab but not a
[01:19:21] <ChrisMorgan> qdwang: you mean that, given an iterator, you wish to examine the last match?
[01:19:44] *** Joins: negge (nathan@moz-p79l68.fios.verizon.net)
[01:19:56] *** nsm is now known as nsm|away
[01:19:59] <burntsushi> qdwang: can you please give us examples of what you want instead of having us guess?
[01:20:12] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[01:20:27] *** Joins: dpc_ (dpc@moz-52v2l7.nvidia.com)
[01:20:29] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:21:13] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[01:21:23] *** Joins: kazimuth (james@moz-8fb.l9t.189.18.IP)
[01:21:28] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[01:21:38] *** Parts: annodomini (lambda@moz-qgii5v.ma.comcast.net) ()
[01:22:23] *** Quits: negge_ (nathan@moz-p79l68.fios.verizon.net) (Ping timeout: 121 seconds)
[01:23:42] *** Quits: vairav (vairav@moz-pkkcjo.modeln.com) (Client exited)
[01:24:25] *** Quits: mate (Mibbit@moz-tpjl46.co.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:24:54] *** Quits: sysko (bst@moz-qau.e3g.230.116.IP) (Ping timeout: 121 seconds)
[01:25:07] *** Joins: jimb (user@moz-6gkikn.or.comcast.net)
[01:25:27] *** Quits: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.2/20150415140819])
[01:26:17] <patrickod> hey all, a small (possibly dumb) question. how does one turn off a compiler warning?
[01:26:21] *** Joins: raph (Adium@moz-7ma.780.198.207.IP)
[01:26:39] <GBGamer> at the top of your crate: #![allow(warning)]
[01:26:44] <tynopex> #![allow(foo)]
[01:26:49] <patrickod> specifically rustc is complaining about non-camel cased names, and I'd like to silence that warning for the moment. The warning output does not specify how to do this
[01:26:57] <patrickod> ah ok.
[01:27:00] <patrickod> thanks :)
[01:27:32] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[01:27:33] <niconii> burntsushi: well, from what i can tell, it seems like they have only three tokens here: "a", "ab", and "c"
[01:27:42] *** Quits: qdwang (androirc@moz-7fa.eb1.95.211.IP) (Connection closed)
[01:27:46] <Mutabah> patrickod: You can also suppress the warning for a single item
[01:27:50] <tynopex> can also put #[allow(foo)] on only the item that is complaining
[01:27:55] <dpc_> self.on_pte(((va & idx_mask) >> idx_shift) as usize, move |_| { }); complain about borrowking *self mutably twice. Why?
[01:28:31] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[01:29:02] *** Quits: isomarcte (isomarcte@moz-ngr.m93.90.70.IP) (Ping timeout: 121 seconds)
[01:29:07] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[01:29:08] *** Joins: flaper87 (flaper87@moz-fnn.1e9.132.209.IP)
[01:29:19] <dpc_> pub fn on_pte<F>(&'a mut self, i : usize, f : F) where F : Fn(PteMut<'a>) {
[01:29:24] <niconii> burntsushi: if they have a string "_a_ab__ac_", they want it so that it yields the matches "a", "ab", "a", and "c"
[01:29:55] <aatch> dpc_, is this in a loop?
[01:29:57] <niconii> burntsushi: so their main concern is that they don't want it to match on "a" and ignore the b, they want it to take the greediest possible option, i guess
[01:30:04] <dpc_> aatch: Yes it is.
[01:30:31] <aatch> dpc_, then something is causing the borrow to last longer than the loop itself.
[01:30:52] <dpc_> aatch: What that could possibly be?
[01:31:05] *** Quits: }ls{ (uhelp@moz-md9sim.dip0.t-ipconnect.de) (Quit: User terminated by real life interrupt)
[01:31:24] <aatch> dpc_, not sure, but I'd say that it might just be because the closure is passed something tied to the lifetime of self.
[01:31:35] <paulosuzart> (sorry, same questions but with my official nick): hi all, is there a way to see the macro generated code? Sometimes I feel blind because I can't see what was generated
[01:31:59] <aatch> paulosuzart, `--pretty expanded -Z unstable-options`
[01:32:34] <dpc_> aatch: Well, yes. The argument of the clousre has &'a , the same 'a than on the outter self.
[01:32:53] <aatch> dpc_, if you could give more context to the line, that'd help. It's pretty rare that the issue is confined to a single line of code.
[01:33:08] <paulosuzart> aatch: great! thanks a lot!
[01:33:09] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[01:33:10] *** Joins: rouma (zack@moz-t4kf3b.pekn.hg8m.2000.2604.IP)
[01:33:13] *** Joins: borromakot (Adium@moz-j6pi1a.il.comcast.net)
[01:33:20] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[01:33:45] <dpc_> aatch: http://sprunge.us/RXHd
[01:34:39] *** Joins: cmf028 (Mibbit@moz-25ulhc.austtx.sbcglobal.net)
[01:35:10] <aatch> dpc_, why have you got `&'a mut self` for `fn map`?
[01:36:03] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[01:36:13] *** Joins: flaper87 (flaper87@moz-fnn.1e9.132.209.IP)
[01:36:31] <aatch> dpc_, since you aren't returning anything from the method, you shouldn't need to borrow self for anything longer the method call.
[01:36:54] <dpc_> aatch: Probably because I don't fully understand lifetimes.
[01:36:59] *** Joins: m_kato (m_kato@moz-86b4bs.bitcat.net)
[01:37:42] <aatch> dpc_, I think that since you're tying the borrow to the lifetime parameter, it's causing issues there.
[01:37:46] <dpc_> How about "on_pte" ?
[01:37:55] <aatch> dpc_, same deal.
[01:38:12] <dpc_> Does passing PteMut<'a> not require having &'a self somewhere? 
[01:38:17] <aatch> dpc_, either use an anonymous lifetime, or a different lifetime.
[01:39:09] <dpc_> aatch: It worked. Thank you.
[01:39:16] *** Joins: kidnapped_robot (kidnapped_r@moz-en3d16.il.comcast.net)
[01:39:38] <dpc_> I don't understand the relation between <'a> on a type, and &'a self .
[01:39:52] *** Quits: Axord (axo@moz-p6in57.ca.charter.com) (Quit: What's the worst that could ha-)
[01:39:59] *** Quits: raph (Adium@moz-7ma.780.198.207.IP) (Quit: Leaving.)
[01:39:59] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[01:40:35] <aatch> dpc_, they're similar, but when you declare `fn foo<'a>(&'a self) -> &'a Foo` you're saying "I need a self that last for as long as 'a"
[01:40:56] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[01:40:59] <aatch> dpc_, and the compiler ensures that at the call site.
[01:41:09] <dpc_> impl<'a> PageTableMut<'a>
[01:41:25] *** Joins: grant_ (grant@moz-jfh.0nq.187.64.IP)
[01:41:36] <aatch> dpc_, a lifetime parameter like `Foo<'a>` is similar in that requires `Foo` to last for as long as `'a`
[01:42:06] <dpc_> But in the impl { } block there is really no "object" anywhere, until &self is introduced.
[01:42:26] <dpc_> So why do I need to put <'a> after  impl<'a> PageTableMut
[01:42:36] <aatch> dpc_, so what you were doing with `&'a self` there was to say "I want a `&'a Foo<'a>`, or a borrowed pointer that lasts for as long as `'a`.
[01:42:44] <dpc_> If in each function &self can have it's own lifetime.
[01:43:22] <dpc_> Isn't it always true?
[01:44:03] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:44:07] *** Joins: soma (Mibbit@moz-ef5.7ab.191.107.IP)
[01:44:18] <aatch> dpc_, well in your case, `&'a mut PageTableRaw` can outlive `PageTableMut`, so if you return a reference like `&'a PteRaw`, it's not limited by the lifetime of `PageTableMut`
[01:44:33] <dpc_> So what does "impl<'a> PageTableMut<'a> fn pte<'b>(&'b mut self) {} } mean?
[01:44:54] <soma> Hello! Does &["a", "b"] yields &&str?
[01:45:37] <aatch> dpc_, well in that case, the lifetimes of PageTableMut are unused, the `fn pte<'b>(&'b mut self)` means "I need to self to live as long as `'b`".
[01:46:33] <dpc_> to parafraze: "I want a `&'a Foo<'b>`" means I want a reference that lasts 'a to a structure that lasts 'b ...
[01:46:44] <aatch> dpc_, what that actually entails depends on the situation. In that specific case, it's useless, since you aren't exposing something related to `'b` to the caller.
[01:46:58] <aatch> dpc_, correct.
[01:47:47] <dpc_> So the 'b can last shorter than 'a ...
[01:47:57] <dpc_> Because I guess it's impossible for it to last longer...
[01:48:16] <dpc_> And that's why borrowck "overborrowed" everything without that additional 'b ...
[01:48:17] <aatch> dpc_, correct, there's an implicit bound of `'a : 'b` in that case.
[01:48:34] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[01:48:35] <dpc_> As it had no lifetime to fit it better.
[01:48:35] <Diggsey> aatch: Can't lifetimes still be contravariant?
[01:48:37] <dpc_> OK. I got it.
[01:48:47] <dpc_> aatch: Thank you very much. :)
[01:49:11] <scott> soma: that would be &[&str; 2]
[01:49:20] *** Joins: Axord (axo@moz-p6in57.ca.charter.com)
[01:49:24] <aatch> Diggsey, they are contravariant most of the time.
[01:49:38] <Diggsey> aatch: Maybe I mean covariant then?
[01:50:12] <Diggsey> aatch: Rust figures out which based on how it's used within the definition of Foo<'a>?
[01:50:23] <aatch> Diggsey, they can be either, it's inferred. I'm not familiar with variance inference though.
[01:50:48] <soma> scott: Oh, I mean when putting a slice in a for loop, how can I determine what will be yielded.
[01:50:52] *** Quits: dylan_ (dylan@moz-k5u.d0d.43.100.IP) (Ping timeout: 121 seconds)
[01:51:00] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[01:51:26] <scott> ah
[01:51:51] <scott> if you used that type directly in a for loop you would get &&str like you said, I believe
[01:52:12] <aatch> soma, the slice iterator yields &T, if T==&str, then you get &&str, yes.
[01:52:36] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Ping timeout: 121 seconds)
[01:52:47] <aatch> however, autoderef and deref coercions mean it doesn't really matter.
[01:52:59] <scott> specifically &'a [T; 2] impls the trait IntoIterator<Item=&'a T>
[01:53:03] <aatch> You can generally use a &&str wherever a &str would be expected.
[01:53:23] <scott> and when you say `for s in foo` it uses the IntoIterator impl for whatever type foo is
[01:53:26] <patrickod> how does one use FromPrimitive in 1.0.0-beta? when asked to use #[feature(core)] cargo then complains that it's not possible to use with a beta release
[01:53:39] <aatch> patrickod, use the num crate.
[01:54:39] *** Quits: qard (qard@moz-nekdha.vc.shawcable.net) (Quit: leaving)
[01:54:40] <soma> scott: oh, thank you!
[01:54:53] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[01:55:21] <patrickod> aatch: "use of unstable library feature 'core'"
[01:55:33] <soma> scott: so if foo does not implement IntoIterator, compiler will complain about "for i in foo"?
[01:55:39] *** Joins: brontron4k (Mibbit@moz-0pqlmn.ph.cox.net)
[01:55:43] <aatch> soma, correct.
[01:56:01] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[01:56:09] *** Joins: da-kid (da@moz-roadks.dip0.t-ipconnect.de)
[01:56:29] <cmf028> hello
[01:56:36] *** Quits: dzyp (dzyp@moz-97od8c.client.mchsi.com) (Connection closed)
[01:57:44] <cmf028> I was able to invoke unsafe behavior with only safe rust code, or what I think is safe rust code
[01:58:06] <cmf028> Or is there something I'm missing here? http://is.gd/AN2H4j
[01:58:26] <soma> aatch: ok. If I call split on a slice, what will it yield? a ref?
[01:58:41] <aatch> soma, I think so.
[01:58:53] *** Joins: raph (Adium@moz-o75.fg7.77.192.IP)
[01:58:59] *** Quits: da-kid_ (da@moz-3djkmm.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:59:01] *** Joins: froglegstew (Mibbit@moz-dbd.5vt.186.118.IP)
[02:00:01] <soma> aatch: Split first borrows orignal slice and then yields itself as intoiterator. Am I correct?
[02:01:07] <huon> cmf028: that does look like a bug
[02:01:17] *** Joins: monty65 (Mibbit@moz-b2f.rk7.177.122.IP)
[02:01:41] *** Joins: v21 (vee@moz-07pghd.asianet.co.th)
[02:01:46] <aturon> terpstra: https://github.com/rust-lang/rfcs/pull/1066#issuecomment-95773623
[02:02:32] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:03:13] *** Joins: sysko (bst@moz-g9d.6sp.95.211.IP)
[02:03:20] *** Joins: dzyp (dzyp@moz-97od8c.client.mchsi.com)
[02:04:04] <aatch> cmf028, huon, that's really weird. It looks like a bug with trait selection.
[02:04:10] <huon> aatch: yeah
[02:04:14] *** Quits: froglegstew (Mibbit@moz-dbd.5vt.186.118.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:04:28] *** Joins: ajitk (ajit@moz-6ht.i8n.51.106.IP)
[02:04:28] <huon> aatch: I can't work out the right UFCS invocation to convince it to work...
[02:04:36] <aatch> Since it shouldn't be calling the `Add` version of visit...
[02:04:45] *** Joins: qdwang (qdwang@moz-79j0gu.members.linode.com)
[02:04:47] *** Quits: terpstra_ (terpstra@moz-qgr8vi.dip0.t-ipconnect.de) (Client exited)
[02:04:56] <monty65> For fixed size array , I want array size to be size of some struct for eg " let arr: [u8; size_of! (Foo)] = unsafe (mem::zeroed()) ; "  Any idea how to do this?  thx
[02:04:59] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[02:05:18] <huon> cmf028: aatch: e.g. even replacing visitor.visit(self) in the Num impl with `<Visitor as VisitorBase<Num>>::visit(visitor, self);` still segfaults
[02:05:20] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[02:05:32] <zaeleus> Lifetime question: http://is.gd/lcKup0  On line 19, does the RefCell borrow not have the same lifetime as &self? I'm not sure how to make this work in this case.
[02:05:35] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[02:05:48] <huon> cmf028: would you like to file an issue?
[02:06:22] <cmf028> sure, though I'm not sure what to use as the title :P
[02:07:43] *** Quits: Nextra (Nextra@moz-9okko6.dip.osnanet.de) (Connection closed)
[02:07:43] <doomrobo> zaeleus, the refcell borrow goes out of scope at the end of that function
[02:07:48] <huon> cmf028: "incorrect methods selection when using a multidispatch trait as a supertrait twice"
[02:08:07] *** Joins: blaenk (blaenkdenum@moz-2focj4.n2pv.fsko.e000.2605.IP)
[02:08:08] <qdwang> Here is the example, when regex is /a|[a-z]/, matching "abcde!", I want to get "abcde", not "a", when string is "a!", I want to get "a". Is this possible?
[02:08:10] <aatch> huon, changing `visitor` to not be a trait object fixes it.
[02:09:14] <doomrobo> zaeleus, if there are multiple calls to children(), there may be multiple references to _Node.children, so maybe return a new Rc?
[02:09:41] *** Joins: dylan_ (dylan@moz-k5u.d0d.43.100.IP)
[02:10:13] <blaenk> isn't /a|[a-z]/ just /[a-z]/ ?
[02:10:24] <scott> yes
[02:10:35] <blaenk> I don't understand the question
[02:10:40] <scott> neither do I
[02:10:48] <huon> aatch: ah
[02:10:59] <blaenk> or maybe you're asking for what the regex should be to get that output, qdwang?
[02:11:10] <huon> cmf028: maybe "incorrect method selection with trait objects ..."
[02:11:10] <doomrobo> qdwang, what about /[a-z]*/
[02:11:13] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (Ping timeout: 121 seconds)
[02:11:34] *** Parts: monty65 (Mibbit@moz-b2f.rk7.177.122.IP) ()
[02:11:41] <zaeleus> doomrobo: You mean save an Rc in Children and initialize the iterator there?
[02:11:43] <blaenk> j
[02:11:48] *** Quits: Guest22 (textual@moz-v8ufgd.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:11:49] <blaenk> /[a-z]+[^!]/, so everything up to but not including the exclamation mark?
[02:11:58] *** Quits: smarks (smarks@moz-vjd.jad.79.109.IP) (A TLS packet with unexpected length was received.)
[02:12:01] <blaenk> or [a-z]* if you prefer
[02:12:44] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[02:12:51] *** Joins: sjj (sjj@moz-7s3.mbd.125.202.IP)
[02:13:03] <swgillespie> is there a way that I can constrain a type parameter to being pointer-sized?
[02:13:06] *** Quits: brontron4k (Mibbit@moz-0pqlmn.ph.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:13:13] <aatch> swgillespie, nope.
[02:13:17] <swgillespie> oh, ok.
[02:13:46] <swgillespie> I'm wrapping a jit library that hands Rust a function pointer, and i'm trying to figure out how to expose it nicely to rust
[02:13:55] <swgillespie> a mut *c_void pointer, I mean
[02:13:56] <qdwang> sorry typo, regex is /a|[a-z]+/
[02:14:43] <doomrobo> zaeleus, I mean I think Children should contain just an Rc<RefCell<_Node>>...I think. I'm not very experienced
[02:14:43] <aatch> qdwang, what if you have "wxyz?" as input?
[02:14:49] *** Quits: kimundi (kimundi@moz-ocelec.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:14:55] <qdwang> this means, when matching string length is 1, should match 'a', when matching string's length is larger than 1, should match '[a-z]+'
[02:14:56] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Connection closed)
[02:15:11] <qdwang> wxyz match the [a-z]+
[02:15:33] *** Joins: kimundi (kimundi@moz-hac5t8.dip0.t-ipconnect.de)
[02:15:44] <huon> qdwang: should it match 'b'
[02:15:45] <huon> ?
[02:15:57] <doomrobo> qdwang, it doesn't mean that. if the input is b, it'll match b
[02:16:01] <aatch> qdwang, ok, but in your example, the `a` case seems useless.
[02:16:04] <qdwang> wxyz match the [a-z]+ , awxyz match the 'a'(but I want it to match [a-z]+)
[02:16:52] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[02:16:52] *** ChanServ sets mode: +o erickt
[02:16:55] <aatch> qdwang, so you just want to strip the `a` off from the beginning?
[02:17:08] *** Quits: slurps-mad-rips (slurps-mad-@moz-o2c.uaj.44.17.IP) (Quit: Connection reset by bear)
[02:17:18] <qdwang> not the same
[02:17:28] <aatch> would "(a)?([a-z]*)" work?
[02:18:02] <qdwang> wxyz! match the [a-z]+ , awxyz! match the a(but I want it to match [a-z]+) , a! match the a(it's right) (! can be another other chars)
[02:18:08] <doomrobo> qdwang, to say "if it's one letter, it must be 'a', otherwise, match [a-z]+", it's /a[^a-z]|[a-z]+/
[02:18:09] <aatch> qdwang, because so far you've been kind of inconsistent.
[02:18:25] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[02:18:37] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[02:18:40] <aatch> <qdwang> Here is the example, when regex is /a|[a-z]/, matching "abcde!", I want to get "abcde", not "a", when string is "a!", I want to get "a". Is this possible?
[02:18:46] <aatch> doesn't quite match up with
[02:18:52] <aatch> <qdwang> wxyz! match the [a-z]+ , awxyz! match the a(but I want it to match [a-z]+) , a! match the a(it's right) (! can be another other chars)
[02:19:44] *** Joins: narann (narann@moz-mjj.eaj.250.162.IP)
[02:20:02] *** Quits: kazimuth (james@moz-8fb.l9t.189.18.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:20:08] <huon> I wonder if /a|[a-z][a-z]+/ is what you want
[02:20:09] *** Quits: choplin (choplin@moz-0fql9u.t6mc.g9m6.001a.240d.IP) (Connection closed)
[02:20:17] *** kimundi is now known as zz_kimundi
[02:20:29] *** Joins: diego (Mibbit@moz-teb.392.140.177.IP)
[02:20:51] <doomrobo> huon, I think that'd work too
[02:20:52] <aatch> qdwang, that said, have you considered *not* trying to encode everything in a regex? Could you not use the regex for the initial match, then process the results after?
[02:20:56] *** Joins: winding-lines (textual@moz-g7k4j8.ca.comcast.net)
[02:21:15] <zaeleus> doomrobo: Hm... I'm not sure. Even if I save an Rc in children, I still don't think I can use the RefCell borrow without it going out of scope.
[02:21:54] <diego> hello, may some one please help in String concatenation... I have a something like this: let a = "helo".to_string(); let mut b = "world".to_string();
[02:22:04] <diego> b= b + a;
[02:22:09] <doomrobo> zaeleus, the point is that you should not be saving a refcell borrow anywhere. you should only use it within a scope. if you save the Rc<RefCell<_Node>> though, anything with that Rc can then use that RefCell
[02:22:13] <diego> but it's not working
[02:23:01] *** Quits: dylan_ (dylan@moz-k5u.d0d.43.100.IP) (Ping timeout: 121 seconds)
[02:23:03] <aatch> diego, care to elaborate for the viewers at home?
[02:23:16] *** Joins: tikue (Mibbit@moz-n71.k1b.0.198.IP)
[02:23:31] <huon> diego: is there a compiler error?
[02:23:38] <diego> yes.. let take
[02:24:03] <tikue> hey all! is anyone having trouble with mutable for loops lately? I can't seem to iterate over a set mutably. http://is.gd/ENzXEX
[02:24:06] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:24:13] <diego> let mut last = parans[parans.len()-1];
[02:24:21] *** Quits: qdwang (qdwang@moz-79j0gu.members.linode.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[02:24:22] <diego> last = last + argument;
[02:24:38] <diego> ..error error: mismatched types
[02:24:47] <diego> expected `&str`,     found `collections::string::String`
[02:24:56] *** Joins: qdwang (qdwang@moz-79j0gu.members.linode.com)
[02:25:07] <doomrobo> diego, http://is.gd/yuToIr
[02:25:09] <aatch> diego, the rhs has to be a str
[02:25:11] <huon> tikue: one cannot iterate over a hashset mutably
[02:25:20] <tikue> huon: why's that?
[02:25:20] *** Quits: tynopex (Mibbit@moz-ikvsjo.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:25:28] <tikue> oh
[02:25:30] <huon> tikue: if you change the value, the hash may change
[02:25:30] <tikue> because you have to rehash
[02:25:31] <tikue> duh
[02:25:32] <tikue> thanks 
[02:25:37] <tikue> :( silly me
[02:25:56] *** Quits: adjivas (adjivas@moz-t655t6.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[02:26:01] <huon> that said, you can still achieve it, with Cell/RefCell
[02:26:03] <aatch> tikue, eh, its not *completely* obvious at first.
[02:26:07] *** Quits: housl (housl@moz-qnjt4k.ut.comcast.net) (Quit: WeeChat 1.1.1)
[02:26:17] <swgillespie> what does it mean for a cast to be non-scalar?
[02:26:24] <tikue> aatch: (: yeah, but it is once you see it!
[02:26:35] <diego> doomroo, thanks...
[02:26:59] <doomrobo> np
[02:27:03] *** zz_kimundi is now known as kimundi
[02:27:10] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[02:27:12] <aatch> swgillespie, that your trying to cast to something other than a numer from another number
[02:27:15] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[02:27:31] <aatch> swgillespie, or a few other things.
[02:27:37] <swgillespie> aatch: a pointer to a pointer, too?
[02:27:37] <zaeleus> doomrobo: I understand, but I would never be able to save the state of the Vec iterator that way, no?
[02:27:49] <swgillespie> or, *mut u8 to extern "C" fn()
[02:28:02] <aatch> swgillespie, ah, yeah, that's not allowed either.
[02:28:06] <swgillespie> :(
[02:28:19] <huon> swgillespie: use transmute
[02:28:26] <aatch> swgillespie, basically anything that allows you to get memory unsafety in safe code.
[02:28:34] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[02:28:37] *** Quits: dmac__ (dmac@moz-h4nvlf.ca.comcast.net) (Ping timeout: 121 seconds)
[02:28:38] <swgillespie> huon, aatch : thanksQ
[02:28:40] <swgillespie> *!
[02:28:40] *** Joins: Guest22 (textual@moz-v8ufgd.fibertel.com.ar)
[02:28:49] <aatch> swgillespie, if that *mut u8 isn't *actually* a pointer to a function, well...
[02:28:55] <swgillespie> yeah, I see your point
[02:29:16] *** Joins: james4k (james@moz-0kqjsm.consolidated.net)
[02:29:30] *** Joins: dylan_ (dylan@moz-k5u.d0d.43.100.IP)
[02:29:30] <aatch> hence why &T -> *const T is fine, but the other way around is not
[02:29:31] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[02:30:22] <swgillespie> I see
[02:30:25] <swgillespie> makes sense
[02:31:28] *** Quits: Pierre (pierre@moz-lmh.0pq.89.116.IP) (Quit: )
[02:31:53] *** Joins: kazimuth (james@moz-gs6.5qb.189.18.IP)
[02:31:55] <tikue> Is there an issue open for bad for-loop error messages? Saying "HashSet does not implement Iterator" doesn't seem very true. Maybe something like "Cannot iterate mutably over HashSet"
[02:32:34] *** Joins: csherratt (colin@moz-357qdq.cable.teksavvy.com)
[02:33:22] *** Quits: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:33:44] *** Quits: rbranson (rbranson@moz-i7m.9o0.201.199.IP) (Quit: Computer has gone to sleep.)
[02:34:04] <doomrobo> zaeleus, sorry for the wait. trying something...
[02:34:42] *** Quits: dylan_ (dylan@moz-k5u.d0d.43.100.IP) (Ping timeout: 121 seconds)
[02:34:56] *** Quits: sjj (sjj@moz-7s3.mbd.125.202.IP) (Connection closed)
[02:35:13] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:35:16] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:35:47] *** Joins: rbranson (rbranson@moz-i7m.9o0.201.199.IP)
[02:37:16] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[02:37:50] *** Quits: Jesse_ (jruderman@moz-cfhap5.mtv2.mozilla.com) (Client exited)
[02:37:55] *** Joins: arty (Mibbit@moz-ineiim.il.comcast.net)
[02:37:58] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[02:38:00] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[02:38:36] <Mutabah> is there a way to see the inferrer elided lifetime bindings?
[02:38:47] <Mutabah> *inferred
[02:38:51] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[02:39:15] *** Joins: forgottenone (forgottenon@moz-3eq.4bi.253.212.IP)
[02:39:26] *** Joins: kushal (kdas@moz-r2sm7r.202.sitibroadband.in)
[02:39:40] *** Quits: cmf028 (Mibbit@moz-25ulhc.austtx.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:40:15] *** Joins: cmf028 (Mibbit@moz-25ulhc.austtx.sbcglobal.net)
[02:41:13] *** Quits: cmf028 (Mibbit@moz-25ulhc.austtx.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:42:29] *** Joins: mib_123 (Mibbit@moz-966.099.5.189.IP)
[02:42:31] <doomrobo> zaeleus, I finally see what you were trying to do. Now why do you have 3 structs to do it?
[02:43:05] <mib_123> How can I get a struct as a &mut[u8] in order to use .read() to fill it?
[02:43:35] <geofft> mib_123: that's generally going to be unsafe behavior... 
[02:43:37] <huon> mib_123: only via `transmute`/`unsafe` code
[02:43:39] <Mutabah> mib_123: Transmute, but it's usually better to explicitly read the fields using a primitive reader
[02:43:56] <mib_123> I tried this let mut fake: Slice<u8> = Slice { 					data: mem::transmute(&db.header), 					len: mem::size_of::<DbHeader>() 				}; 				db.file_handle.read(&mut fake).unwrap()
[02:44:02] *** Quits: mkpankov (mkpankov@moz-369.4ms.23.84.IP) (Ping timeout: 121 seconds)
[02:44:15] <mib_123> but it doesn't really work :x
[02:44:16] <geofft> a Slice needs to be cast back to an actual slice 
[02:44:19] *** Joins: if_e1se (uid16886@moz-js7dlj.uxbridge.irccloud.com)
[02:44:27] <qdwang> I figured out, the right regex is /a\b|[a-z]+/
[02:44:32] <geofft> mib_123: https://doc.rust-lang.org/std/slice/fn.from_raw_parts.html 
[02:44:53] <geofft> mib_123: but also, what Mutabah said, this seems like premature optimization 
[02:44:57] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:45:01] *** Quits: Guest22 (textual@moz-v8ufgd.fibertel.com.ar) (Quit: Textual IRC Client: www.textualapp.com)
[02:45:03] <geofft> I suspect that if you read into the struct via safe methods, the optimizer will take care of it 
[02:45:05] <Mutabah> mib_123: May I suggest AGAINST casting to a slice, and instead use an explicit read call that fills each field
[02:45:12] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[02:45:13] <zaeleus> doomrobo: What's on the playpen is a reduced version of a mutable tree. _Node is the actual node, whereas Node is just a proxy to hide away the stuff with Rc and RefCell.
[02:45:18] <geofft> and I would not be confident about the need for any use of `unsafe` here until after I've benchmarked 
[02:45:20] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:45:30] <geofft> (fortunately, Rust has good tooling for microbenchmarks..) 
[02:45:36] <Mutabah> mib_123: The 'byteorder' crate on crates.io provides read methods for primtiive types
[02:45:54] *** Quits: rbranson (rbranson@moz-i7m.9o0.201.199.IP) (Quit: Computer has gone to sleep.)
[02:46:23] <geofft> yeah, if you're going to do this at all, make sure your struct is #[repr(C)], has explicit padding, is in local byte order, etc. 
[02:46:36] <geofft> (hence why it requires the word "unsafe"...) 
[02:46:43] *** Quits: claudiu (claudiu@moz-gqds22.0ekj.kp93.010d.2620.IP) (Connection closed)
[02:46:50] <geofft> (... also, now that I think about it, this violates strict aliasing, right?) 
[02:46:51] <mib_123> geofft: Mutabah: thanks you both
[02:47:24] <huon> geofft: Rust doesn't have C-like strict aliasing
[02:47:45] <huon> we get strong enough guarantees from & and &mut themselves
[02:47:46] <OmniMancer1> huon: I believe LLVM still requires a reduced version of it though
[02:47:54] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[02:48:05] *** Joins: srh (User@moz-tvc5sp.sntcca.sbcglobal.net)
[02:48:19] <huon> OmniMancer1: in what way?
[02:48:53] <huon> (LLVM is in the process of collapsing all pointer types to a single type, `ptr`.)
[02:49:12] <OmniMancer1> huon: okay, I can't remember exactly
[02:50:07] <geofft> huon: right, but if you drop to `unsafe`, then you can violate strict aliasing if you do things like transmute 
[02:50:13] *** Quits: vairav (vairav@moz-qtc2tv.ca.comcast.net) (Client exited)
[02:50:15] *** Joins: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP)
[02:50:17] <huon> OmniMancer1: it can definitely reason about aliasing, but I believe things like C's strict aliasing rules (and Rust's rules) are inserted as attributes/loadable pass by the frontend
[02:50:21] *** Joins: mdinger (mdinger@moz-qnm9vi.9bf5.ppaa.0306.2602.IP)
[02:50:23] *** Quits: cacaca (Mibbit@moz-aua.g0i.51.193.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:50:23] <geofft> I'm pretty glad that aliasing isn't a thing you have to worry about in safe Rust code 
[02:50:36] <mdinger> how do you get a backtrace via cargo?
[02:50:40] <OmniMancer1> huon: this is what I was thinking of http://llvm.org/docs/LangRef.html#pointer-aliasing-rules
[02:50:45] <geofft> but if you transmute a struct into a &[u8], read into it, and then read from the struct, then that almost certainly aliases badly 
[02:50:47] <aatch> C/C++ aliasing is done using Type-Based Alias Analysis.
[02:51:00] <mdinger> I'm not sure how to tell cargo to pass the command to rustc
[02:51:01] <huon> geofft: not really
[02:51:07] <doomrobo> zaeleus, here's what I got http://is.gd/LJwDhj
[02:51:09] <geofft> unless Rust asks LLVM to do the equivalent of -fno-strict-aliasing? 
[02:51:17] <huon> geofft: yes, that's what I meant by the above
[02:51:40] <geofft> oh, I misread that, okay. 
[02:51:46] <aatch> geofft, LLVM's aliasing rules only really care about whether a write via one pointer can affect a read via another.
[02:51:57] <FreeFull> &mut isn't allowed to alias with anything else
[02:52:00] <geofft> so if you drop to unsafe, Rust effectively does -fno-strict-aliasing around the unsafe block? cool 
[02:52:08] <OmniMancer1> aatch: Indeed
[02:52:18] <mkomitee> I'm having some difficulty writing a generic function, does anyone have a moment to take a look?
[02:52:18] <huon> geofft: Rust never has C-like strict-aliasing
[02:52:33] <huon> geofft: but the normal aliasing rules of & and &mut still apply inside unsafe blocks
[02:52:35] <geofft> aatch: right, so if I said let x: MyStruct; let y = std::mem::transmute<_, *mut u8>(&x); 
[02:52:48] <huon> geofft: (meaning that *mut and *const don't really have aliasing rules at all)
[02:52:50] <geofft> and then I wrote to y, and read from x 
[02:52:55] *** Quits: new_one (new_one@moz-44f.fqb.42.128.IP) (Quit: WeeChat 1.1.1)
[02:52:56] <aatch> I am unfamiliar with this "strict aliasing".
[02:53:11] <mkomitee> The objective is to take a filename and return a BufReader<T> with a type constraint that T implements Read.
[02:53:12] <scott> huon: are they just fully pessimized then? does rustc assume all raw pointers alias?
[02:53:28] <huon> aatch: strictly speaking, it's illegal to write `char *x; *((int*)x) = 10;` in C
[02:53:31] <huon> scott: I assume so
[02:53:35] <scott> hmm
[02:53:39] <geofft> maybe i'm using the wrong term, "strict aliasing" is what e.g. GCC calls it, and I think what the C and C++ standards call it 
[02:53:49] <mkomitee> But in one case (the input filename is "-") T will be Stdin, and in any other case, T will be a File.
[02:53:49] <geofft> rught, what huon said 
[02:53:50] <huon> geofft: yes, Rust doesn't have that.
[02:53:57] <huon> geofft: it has different aliasing rules
[02:54:05] <geofft> huon: my question is about when you're inside an unsafe block 
[02:54:11] <huon> geofft: there's no rule that &u8 and &i8 can't point to the same piece of memory
[02:54:13] <aatch> geofft, well LLVM uses a fairly conservative analysis, by default all pointers are considered to alias, however there are passes that do local reasoning.
[02:54:15] <OmniMancer1> geofft, huon: these are the rules as far as llvm is concerned http://llvm.org/docs/LangRef.html#pointer-aliasing-rules
[02:54:21] <scott> C and C++ aliasing rules are also fairly different from each other
[02:54:37] <aatch> And we pass along some aliasing-basing information.
[02:54:38] <huon> OmniMancer1: note that there's no inherent aliasing restrictions in those rules
[02:54:45] <geofft> are you obligated to obey by C-style strict aliasing rules when doing weirdo casts inside unsafe {}, lest LLVM optimize something? 
[02:54:46] <huon> OmniMancer1: (see the last paragraph)
[02:54:51] <huon> geofft: no
[02:54:55] *** Joins: sp0 (seth@moz-3cvluq.internode.on.net)
[02:54:57] <geofft> ok. neat. 
[02:55:32] <aatch> LLVM also has some heuristics in place to catch obviously-aliasing pointers, even if another analyis (like C++'s TBAA) says they can't.
[02:55:42] <geofft> oh, that page calls TBAA and strict aliasing the same thing 
[02:55:42] <OmniMancer1> huon: yes they are I believe mostly rules for not being allowed to read outside of the "type" memory I think
[02:55:50] <FreeFull> *mut and *const pointers cast between each other freely and between whatever type is inside, even without an unsafe block
[02:55:54] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[02:55:56] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:56:03] <zaeleus> doomrobo: Yeah, seems like manually iterating with the indices is the easiest way. I was trying to use Vec's iterator to avoid the bounds checking. Thanks a lot, though!
[02:56:13] *** Joins: c74d (c74d3a4ebb6@moz-gf2p70.mggc.hibn.4404.2002.IP)
[02:56:15] <scott> so casting *mut i32 to *mut i8 isn't a problem in Rust? there are no aliasing gotchas there?
[02:56:19] <FreeFull> playbot: let foo = &3 as *const u8 as *const String;
[02:56:20] -playbot- <anon>:9:19: 9:21 error: mismatched types:
[02:56:21] -playbot-  expected `*const u8`,
[02:56:21] -playbot- output truncated; full output at: http://bit.ly/1DW6HqA
[02:56:21] <aatch> Well it's only a pointer access that's a problem.
[02:56:26] *** Quits: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[02:56:29] <FreeFull> playbot: let foo = &3u8 as *const u8 as *const String;
[02:56:31] -playbot- ()
[02:56:40] <doomrobo> zaeleus, there definitely might be a more elegant way, but that's all I got in me :P . no problem!
[02:56:42] <FreeFull> Obviously u8 and String are completely different types
[02:57:09] <aatch> Remember, a raw pointer is like a gun, you can't shoot yourself in the foot if you never fire it.
[02:57:13] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[02:57:21] <scott> aatch: yes, I'm not asking about the cast, but about a basic strict aliasing-like example
[02:57:48] <bstrie> Gankro: there's someone on reddit asking for feedback on their lockless ringbuffer, do we have something analogous in idiomatic code that we could show them?
[02:57:49] <aatch> scott, we don't provide any alias-based information related to raw pointers to LLVM, no
[02:57:49] <geofft> yeah, I'm specifically asking about writing through a raw pointer, not merely having one 
[02:57:50] <huon> aatch: that analogy works so well... you can use it to start a (data) race
[02:57:58] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[02:58:11] <geofft> (though C has weird rules about _having_ pointers, IIRC?) 
[02:58:51] <aatch> geofft, just clarifying. It's surprising how many people get confused by the fact that casting to a raw pointer is allowed in safe Rust.
[02:58:59] <scott> aatch: so a C compiler explicitly informs LLVM that, say, int* and long* pointers do not alias each other even?
[02:59:00] <geofft> anyway, is "you don't have to worry about C-style strict aliasing inside unsafe" considered a _language_ guarantee, not an implementation one? 
[02:59:21] <scott> s/even/ever/
[02:59:25] <aatch> geofft, not sure. I don't think we ever defined it for raw pointers.
[02:59:35] <geofft> i.e., would a naive Rust-to-C transpiler, plus a C compiler without -fno-strict-aliasing, be considered an invalid implementation of the language? 
[02:59:37] <aatch> geofft, but probably, yeah.
[02:59:47] <bstrie> huon aatch: are we saying that rust allows you to aim the gun at your foot or pull the trigger, but never both at the same time? 
[02:59:49] <geofft> if it sounds like I'm really paranoid after having dealt with C compilers pushing the spec as hard as they can, it's 'cause I am :) 
[03:00:02] <OmniMancer1> geofft: no C doesn't care what you cast the pointers to as long as they are never read except as their original type I believe
[03:00:12] <tikue> hmm, is it not possible to reborrow a mutable reference as immutable?
[03:00:17] <aatch> bstrie, you're allowed to point the gun at your foot, but you have to take the safety off (go into unsafe) to fire it.
[03:00:20] <Mutabah> tikue: yes
[03:00:22] <geofft> OmniMancer1: I'm referring to (IIRC) the rule that you can't _have_ a pointer to an array that's more than 1 past the end 
[03:00:27] <tikue> Mutabah: yes it is not possible?
[03:00:34] <Mutabah> Yes it is possible
[03:00:35] <mdinger> can you get backtrace via cargo?
[03:00:38] <Mutabah> tikue: sorry.
[03:00:38] <tikue> Mutabah: ah, ok
[03:00:44] <tikue> Mutabah: no worries, thank you
[03:00:47] <arty> looking for assistance on mismatch type error (code at playpen:  http://is.gd/5GC1pw ) 
[03:00:56] <scott> bstrie: aatch: remarkably, the safety clicks off automatically when you aim away from your foot
[03:01:26] <aatch> That said, what the C standard says, and what compilers do are often quite different.
[03:01:26] <Gankro> bstrie: I have no background on lock-free
[03:01:27] <OmniMancer1> geofft: you'd have worse problems with other sources of undefined behaviour
[03:01:44] <Gankro> bstrie: I think that's aturon's specialty
[03:01:47] <scott> aatch: compiler like strict aliasing thought - it's an optimization
[03:01:51] <scott> though*
[03:01:59] * scott gives up his typing license
[03:02:18] <aatch> scott, yeah, I'm talking more about "having a pointer that's more than 1 past the end of an array"
[03:02:18] <Mutabah> arty: You're doing &why, not 'why'
[03:02:24] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[03:02:24] *** ChanServ sets mode: +o erickt
[03:02:35] <scott> ah
[03:02:37] <Mutabah> arty: The left of a match arm (before the => is a pattern)
[03:03:10] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[03:03:15] <arty> @mutabah - aha - thx fresh eyes
[03:03:48] *** Quits: soma (Mibbit@moz-ef5.7ab.191.107.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:03:55] <OmniMancer1> geofft: does having one cause a problem or only if it is used ever?
[03:04:11] <arty> @ mutabah - and it just compiled - thank you that did it
[03:04:48] <aatch> Unfortunately for alias analysis, there's all sorts of weird cases that you have to handle, like a pointer to first element of a struct and the struct itself alias.
[03:04:52] *** Quits: alonlevy (alon@moz-a2sapm.inter.net.il) (Ping timeout: 121 seconds)
[03:04:58] *** Quits: JanC_ (janc@moz-48mvsd.dsl.scarlet.be) (Ping timeout: 121 seconds)
[03:05:05] <borromakot> So I have a function that returns an Option<MyStruct>.  Whats the canonical way to turn that into Option<Box<MyStruct>>?  Can I just map it?  optional_struct.map(|&x| Box::new(x)) ?
[03:05:05] <aatch> Same with a pointer to the first element of a slice and the slice itself.
[03:05:22] <aatch> borromakot, yeah, just map works.
[03:05:30] <borromakot> aatch, word :D
[03:05:48] <aatch> borromakot, though I think map takes `FnOnce(T) -> U`, not `FnOnce(&T) -> U`
[03:07:26] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[03:08:34] *** Joins: 203AAXX9F (alex@moz-s9a.qrc.242.157.IP)
[03:09:08] *** Joins: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu)
[03:09:12] *** Quits: kazimuth (james@moz-gs6.5qb.189.18.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:09:28] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[03:09:34] <203AAXX9F> so let's say i've got a vec of hex strings (which turns into a vec of vec of bytes via rustc-serialize) - how do I xor two of these together?
[03:09:39] *** 203AAXX9F is now known as alex
[03:10:31] <alex> my first thought is just to iterate over all of them concurrently using something like zip
[03:10:51] *** Quits: Diggsey (diggsey@moz-fbohmi.dsl.pipex.com) (Ping timeout: 121 seconds)
[03:11:10] <Mutabah> Yeah, use zip to combine the two iterators
[03:11:11] <alex> but it looks like zip only accepts one discrete iterator
[03:11:30] <aatch> alex, are all the sub-Vecs the same length?
[03:11:36] <alex> nope
[03:11:48] *** Joins: Savago (Savago@moz-k613vv.ca.comcast.net)
[03:11:52] <aatch> do you want a single vector of bytes at the end?
[03:11:54] <Mutabah> alex: zip takes two iterators. The self iterator, and the argument
[03:12:13] <alex> aatch: yes
[03:12:44] <aatch> Mutabah, but you can't have a runtime-dependent chain of zip iterators.
[03:13:05] <Mutabah> aatch: Oh, I see npws
[03:13:09] <Mutabah> *see ow
[03:13:15] <alex> like, in python, I can just feed a sequence of iterators into zip
[03:13:18] <Mutabah> aatch: Oh, I see now
[03:13:22] <alex> and it'll just zip them all together
[03:13:48] *** Quits: mdinger (mdinger@moz-qnm9vi.9bf5.ppaa.0306.2602.IP) (Quit: Leaving)
[03:13:49] <aatch> alex, Ok, I assume you'll just fill the missing data from the vectors that aren't short enough?
[03:13:56] <Mutabah> aatch: I would in this case go for creating the output vec, and iterate over inputs manually
[03:13:58] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[03:14:01] <alex> probably just with zeros
[03:14:07] <alex> but yes
[03:14:15] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Quit: Leaving.)
[03:14:17] <alex> actually, it might be more desirable to truncate them
[03:14:35] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[03:14:40] <aatch> alex, yeah, I was going to suggest what Mutabah said, which is to just iterate manually.
[03:14:56] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[03:15:10] <alex> yea
[03:15:16] <alex> that doesn't sound like such an elegant solution
[03:15:21] <alex> but I suppose that's my only option :(
[03:15:28] <aatch> alex, get the min or max of the lengths, create an output vector with Vec::with_capacity, and then iterator from 0..n
[03:15:34] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[03:15:43] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[03:16:27] *** bentley is now known as bentley|away
[03:16:54] <aatch> alex, well you could make your own fancy iterator that takes a `&[T] where T:Iterator` and yeilds a &[T::Item], not sure it's worth the effort though.
[03:16:58] <alex> yea
[03:17:01] <alex> probably not
[03:17:09] <iopq> how long should I wait before making a stop-gap solution with `unsafe` for the num not building problem
[03:17:12] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[03:17:25] <huon> iopq: what's the problem with num?
[03:17:30] <iopq> huon: it doesn't build
[03:17:37] <huon> is there a PR?
[03:17:49] <huon> (I was hoping for more detail than "not building" :) )
[03:17:54] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[03:17:58] <iopq> huon: https://github.com/rust-lang/num/issues/88
[03:17:59] <aatch> alex, one thing you'll also not have with Python is the possibility of vectorisation.
[03:18:01] *** Joins: JanC_ (janc@moz-3oruui.dsl.scarlet.be)
[03:18:44] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Connection closed)
[03:18:48] <aatch> alex, it's possible that LLVM will actually generate code that xors like 64 bytes at a time.
[03:18:52] <huon> iopq: looks like the PR has some problems, unfortunately
[03:18:55] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[03:18:58] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[03:19:09] *** Joins: sw17ch (sw17ch@moz-h64l8d.wa.comcast.net)
[03:19:42] <alex> yes, I suppose it's unfair to compare rust to python
[03:19:48] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[03:19:53] *** Joins: chmanchester (chmancheste@moz-lmo.64e.222.162.IP)
[03:19:56] <Mutabah> Anyone up for helping with a lifetime error? https://gist.github.com/thepowersgang/877759ecb7da07d6d4ff (code https://github.com/thepowersgang/rust_os/blob/master/Kernel/Modules/storage_ata/lib.rs#L120-L124)
[03:20:10] <aatch> Heh, I'm gonna see if LLVM does actually manage it.
[03:20:18] *** Joins: mindtree (Mitch@moz-do07e9.iprimus.net.au)
[03:20:24] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[03:20:25] <iopq> huon: yeah, so I don't know if it's possible to fix it at all because acrichto never said WHERE it moved
[03:20:46] *** Joins: Guest_ (textual@moz-rtn.fg7.77.192.IP)
[03:21:00] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[03:21:36] *** Quits: Guest_ (textual@moz-rtn.fg7.77.192.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:22:38] <alex> how would I convert this array of u8s into a string, assuming ascii encoding?
[03:22:49] <alex> I remember rust has problems with strings etc
[03:22:49] *** Quits: kgrandon (Adium@moz-t7gg8c.hjek.d045.0009.2601.IP) (Quit: Leaving.)
[03:23:38] <huon> std::str::from_utf8 for &[u8] -> &str, or String::from_utf8 for Vec<u8> -> String
[03:24:34] *** Joins: mkpankov (mkpankov@moz-6il.21l.23.84.IP)
[03:24:54] <alex> utf8 is compatible with ascii correct?
[03:25:08] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[03:25:34] <ChrisMorgan> alex: UTF-8 is a superset of ASCII.
[03:25:36] <Mutabah> alex: Iirc, yes
[03:25:43] <huon> yeah, one of the most magical parts of UTF-8 is that any ASCII string is valid UTF-8
[03:26:19] <alex> I thought so
[03:26:21] <alex> but just wanted to make sure
[03:27:48] <cjh> alex: fwiw ascii is really 7 bits, so with utf8 if the first bit is 0 (on the first byte within a char) this means you are looking at ascii :)
[03:28:22] <OmniMancer1> huon: where ascii is only the first 128 numbers?
[03:28:23] *** Quits: mib_123 (Mibbit@moz-966.099.5.189.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:28:24] <cjh> s/looking at ascii/looking at an ascii character/
[03:28:49] <huon> OmniMancer1: yeah, "true" ascii is only 7 bits
[03:29:07] <cjh> heh, oh yeah ascii extensions.. oh god.
[03:29:09] *** bentley|away is now known as bentley
[03:29:16] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[03:29:21] <iopq> does anyone ACTUALLY encode in true ascii
[03:30:16] <huon> you're writing it in now
[03:31:17] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[03:31:18] <scott> someone should make a packed-ascii crate that stores ascii chars with only 7 bits instead of 8
[03:31:27] <scott> fit 8 chars in only 7 bytes
[03:31:51] *** Joins: invoker (Mibbit@moz-2pb.7t9.210.112.IP)
[03:32:33] <OmniMancer1> iopq: as long as you write plain latin characters with no accents it fits in pure ascii
[03:32:39] <niconii> iopq: well, considering it's not even possible to type non-ascii characters with most american keyboards (excepting stuff like alt+numpad stuff on windows, or whatever mac does, or international us keyboards, or smart quotes...)
[03:33:01] <OmniMancer1> alt+numpad types unicode :P
[03:33:02] *** Quits: diego (Mibbit@moz-teb.392.140.177.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:34:10] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[03:34:45] <FreeFull> Technically the keyboard doesn't matter, just the keyboard layout that the system itself has set
[03:35:25] *** Quits: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:35:50] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[03:36:07] <mcpherrin> niconii: Macs binds lots of non-ascii characters that are easily typed
[03:36:18] <niconii> OmniMancer1: not necessarily, iirc for any codepoint below 1000 (in decimal) you have to prefix it with 0 or it ends up being, like, IBM code page 437 or something along those lines
[03:37:15] <OmniMancer1> niconii: indeed
[03:37:49] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[03:38:11] <geofft> hm. it's sort of weird to me that building a lib crate, statically linked against libstd, exports all the symbols in libstd. 
[03:38:34] <geofft> am I doing something wrong? 
[03:38:41] <niconii> OmniMancer1: might depend on locale, but anyway, on my windows computer, alt+130 printed é, and so did alt+0233
[03:38:51] <geofft> or is there some fundamental reason why (e.g., multiple Rust-language libraries need to share a libstd)? 
[03:40:04] <geofft> ... actually, that seems like a bad idea, if you want to use two Rust-language libraries compiled against different versions of libstd 
[03:40:17] *** bentley is now known as bentley|away
[03:40:24] *** bentley|away is now known as bentley
[03:40:28] *** Joins: negge_ (nathan@moz-p79l68.fios.verizon.net)
[03:42:23] <niconii> OmniMancer1: oh, actually, 0233 working wasn't even because it was unicode, apparently leading 0 makes it look in the ansi codepage rather than oem, so in my case, code page 1252
[03:42:37] <cjh> niconii: fwiw within linux you also have ctrl-shift-u (say ctrl-shift-u 00df <enter>)
[03:42:39] *** Joins: aholler_ (aholler@moz-dqgirv.dip0.t-ipconnect.de)
[03:42:56] <FreeFull> The 00 isn't necessary
[03:43:08] <niconii> OmniMancer1: to do unicode, you have to hold alt, hit + on the numpad, then type in hex (with numbers on numpad and normal letters)
[03:43:13] <niconii> confusing
[03:43:13] <insaneinside> cjh: that's only with GTK-based UIs, IIRC.
[03:43:13] <cjh> FreeFull: oh cute, I had always typed them out religiously, ty
[03:43:23] <FreeFull> It lets you enter up to 8 hex digits
[03:43:23] <insaneinside> niconii: ...and that's Windows.
[03:43:24] *** Quits: negge (nathan@moz-p79l68.fios.verizon.net) (Ping timeout: 121 seconds)
[03:43:26] *** Quits: vairav (vairav@moz-qtc2tv.ca.comcast.net) (Client exited)
[03:43:31] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[03:43:33] <FreeFull> Although no codepoint will ever have more than 6
[03:43:53] * insaneinside doesn't know how to enter Unicode on a Mac, sorry.
[03:44:09] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[03:44:16] <niconii> insaneinside: yeah, it's because they decided to preserve old behavior for people who had memorized the old way
[03:44:25] *** Joins: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net)
[03:44:43] <alex> how can I iterate over every even number?
[03:44:53] <niconii> insaneinside: alt codes with ibm code pages used to actually be built-in hardware behavior via the bios
[03:44:57] <alex> it doesn't look like there's an easy way to do that
[03:45:08] <insaneinside> alex: it'll take you forever to do that, you know...
[03:45:14] <cjh> :)
[03:45:15] <alex> well
[03:45:20] <alex> seriously though
[03:45:20] <Mutabah> alex: Multiply by two?
[03:45:25] <FreeFull> I wish .step(n) wasn't unstable
[03:45:36] *** Quits: aholler (aholler@moz-5cnv6a.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:45:40] <Mutabah> playbot: (1..10).map(|x| x*2).collect::<Vec<_>>()
[03:45:41] -playbot- [2, 4, 6, 8, 10, 12, 14, 16, 18]
[03:45:51] <niconii> insaneinside: but windows used new code pages lke 1252, but people were so used to oem codepages that they had to preserve the old behavior
[03:45:59] <Mutabah> alex: Use that with an open range (and some other way of terminating), and you have even numbers
[03:46:10] <OmniMancer1> yea just iterate over every number and multioply them by 2
[03:46:11] <FreeFull> Mutabah: Terminating is the hard part
[03:46:17] <niconii> insaneinside: and then *unicode* hit, but everyone had memorized 1252 already, so they had to preserve *that* behavior too
[03:46:19] <FreeFull> You don't want to overflow
[03:46:19] *** Quits: tikue (Mibbit@moz-n71.k1b.0.198.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:46:25] *** Joins: towler (Mibbit@moz-a66vj9.members.linode.com)
[03:47:12] <insaneinside> niconii: ohh, i see -- i actually didn't know about the '+' for Unicode entry. cool!
[03:47:22] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[03:47:35] <invoker> Hello, How can i wrap the stringify macro with a different name? this doesn't seem to work:  SQL!(SELECT * FROM table)
[03:47:53] <niconii> insaneinside: there's actually a lot of legacy stuff windows still tries to preserve if you look into it
[03:49:16] <geofft> invoker: I worry that will eventually not do what you hope, since the arguments to a macro need to be valid Rust syntax 
[03:49:26] <niconii> insaneinside: i'm not sure if this is still applicable today, but i know at least for a while, windows would actually apply certain fixes to old programs that were improperly programmed in some way by making bad assumptions about the computer
[03:49:27] *** Quits: winding-lines (textual@moz-g7k4j8.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:49:29] <geofft> or valid Rust tokens, at least 
[03:49:59] *** Quits: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[03:50:04] *** Joins: sanxiyn (Mibbit@moz-e1v.gnt.91.111.IP)
[03:50:11] <insaneinside> niconii: we may want to move to #rust-offtopic
[03:50:25] <niconii> insaneinside: right
[03:50:35] <scott> playbot: macro_rules! sql { ($($x:tt)*) => (stringify!($($x)*)) }; sql!(SELECT * FROM table) // invoker: something like this?
[03:50:37] -playbot- "SELECT * FROM table"
[03:50:58] *** Quits: kushal (kdas@moz-r2sm7r.202.sitibroadband.in) (Ping timeout: 121 seconds)
[03:51:40] <insaneinside> geofft: can't that restriction be avoided by using compiler plugins?
[03:51:43] <scott> better to use a real string literal here, though
[03:51:49] <invoker> scott	: im gonna try that
[03:52:26] <scott> insaneinside: I don't think so
[03:52:29] <sanxiyn> huon: Too bad Rust Sydney 1.0 date is 19th
[03:52:39] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[03:53:21] <sanxiyn> Rust Korea (Seoul, really) will have a meetup at 16th and I was thinking about time to greet other meetups in a nearby timezone
[03:53:37] <sanxiyn> I still hope to set up one with Rust Tokyo
[03:54:01] <mkomitee> If I have a String, how can I make a copy of it?
[03:54:01] <aatch> insaneinside, you can't even create invalid rust tokens in a syntax extension.
[03:54:17] <aatch> invoker, since that doesn't really make sense to start with.
[03:54:21] <aatch> mkomitee, clone
[03:54:23] <scott> mkomitee: .clone()
[03:54:30] <cjh> scott: very cool use of macros, ty
[03:54:57] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[03:54:59] <aatch> insaneinside, I mean, not invoker 
[03:55:17] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[03:55:37] <geofft> insaneinside: my reading of the macro chapter implies that the desire is for syntax highlighters etc. not to have to understand macros 
[03:55:39] <scott> the other issue is that macro invocations must contain balanced parens, braces, brackets, etc
[03:55:40] <insaneinside> aatch: so e.g. the example of writing a compiler plugin to parse roman numerals (in Rustbook, i think) depends on those also parsing as valid identifiers?
[03:55:55] <mkomitee> thanks.
[03:56:01] <geofft> i.e., you should be able to properly tokenize a Rust program without implementing macro_rules (let alone compiler plugins..) 
[03:56:08] <invoker> scott: Thanks, it worked
[03:56:22] <geofft> invoker: did you see this discussion? 
[03:56:25] <scott> playbot: stringify!(0b) // insaneinside: see this for example
[03:56:25] -playbot- <anon>:9:20: 9:22 error: no valid digits found for number
[03:56:25] -playbot- <anon>:9         stringify!(0b) // insaneinside: see this for example
[03:56:25] -playbot- output truncated; full output at: http://bit.ly/1FiJq4o
[03:56:26] <cjh> scott: I quite like it as by day I write perl, so being able to throw together my own perl-like quote operators is very neat.
[03:56:27] <aatch> insaneinside, they need to tokenize.
[03:56:37] *** Joins: stjahns_ (stjahns@moz-163098.wireless.telus.com)
[03:56:38] <geofft> invoker: it'll stop working as soon as you have a SQL statement that isn't tokenizable as valid Rust 
[03:56:44] <insaneinside> that's sensible, though slightly disappointing.
[03:56:57] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[03:56:58] <scott> cjh: my sql macro example is just a dumb wrapper around the builtin stringify macro
[03:57:02] <geofft> I think simple statements will be fine but it'll get annoying in the future, better to just do sql!("select * from foo") 
[03:57:12] <aatch> insaneinside, since even a syntax extension takes a token tree as input.
[03:57:32] <huon> sanxiyn: yeah, timezones/scheduling pushed things back a few days :(
[03:57:38] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Ping timeout: 121 seconds)
[03:57:55] <scott> raw string literals can get you the ease of writing arbitrary text in a .rs file
[03:58:00] <cjh> scott: yeah, but I like the idea of writing a q[] and qw[] :)
[03:58:06] <scott> you could either use them alone or wrap with a macro
[03:58:30] <cjh> well q![] and qw![], but close enough.
[03:58:44] <scott> cjh: ah
[03:58:48] <sanxiyn> Confirmed Tokyo 5/16
[03:58:49] *** Joins: davebettin (davebettin@moz-ip635p.or.comcast.net)
[03:59:08] <cjh> scott: not sure if you know perl, but I often miss qw// is other languages, so that is my real use case.
[03:59:17] <scott> cjh: q! would be troublesome, since it would drop spaces
[03:59:22] <scott> qw might be reasonable
[03:59:33] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:59:35] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[03:59:36] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Connection closed)
[03:59:53] <scott> playbot: stringify!(this     illustrates the problem with    spaces)
[03:59:54] -playbot- "this illustrates the problem with spaces"
[04:00:06] <cjh> hhmmm
[04:00:16] *** Quits: sanxiyn (Mibbit@moz-e1v.gnt.91.111.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:00:16] *** Quits: thelink2012 (Mibbit@moz-pk9.7k4.214.186.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:00:20] <cjh> scott: for qw that should be fine as you expect it to strip whitespace
[04:00:27] <scott> right
[04:00:40] <borromakot> would anyone mind taking a look at some work I'm doing?  `git clone git@github.com:zachdaniel/rush.git`  It is a first attempt, and my first real undertaking in rust, so feel free to comment on the shoddily crafted code.  Right now, I'm getting an issue in my recursive next function.  To run, you'll need the latest nightly.
[04:00:40] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Quit: leaving)
[04:00:48] <cjh> scott: so is that the lexer flattening down whitespace before the macro gets the tokens ?
[04:00:52] *** nsm|away is now known as nsm
[04:00:56] * cjh hasn't looked into the rust macro system much
[04:01:01] * cjh just pretends it is scheme
[04:01:03] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[04:01:04] <scott> yep, the macro gets tokens with no notion of whitespace
[04:01:17] *** Quits: Savago (Savago@moz-k613vv.ca.comcast.net) (Client exited)
[04:01:22] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:01:26] <scott> playbot: macro_rules! qw { ($($x:tt)*) => ([$(stringify!($x)),*]) }; qw![this  is a test]
[04:01:27] -playbot- ["this", "is", "a", "test"]
[04:01:30] <scott> thanks for the idea :P
[04:01:44] <cjh> scott: beat me to it, was just playing around in play.rust-lang :D
[04:02:02] <cjh> scott: I had been meaning to try it at some point using rust macros, your sql! made me think to do it now :)
[04:02:05] <scott> playbot: macro_rules! qw { ($($x:tt)*) => ([$(stringify!($x)),*]) }; qw![this  (is a) test]
[04:02:06] -playbot- ["this", "( is a )", "test"]
[04:02:12] <scott> unfortunately it has oddities like that
[04:02:22] <cjh> ahhh
[04:02:23] <scott> since (is a) is one "tt" (a token tree)
[04:02:29] <cjh> as we are still bound by the lexer's ideas of token
[04:02:31] <cjh> yeah
[04:02:43] *** Quits: towler (Mibbit@moz-a66vj9.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:02:56] *** Quits: c74d (c74d3a4ebb6@moz-gf2p70.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[04:03:01] <aatch> A token tree is a series of tokens or other token trees surrounded by matching delimiters.
[04:03:09] <cjh> playbot: macro_rules! qw { ($($x:tt)*) => ([$(stringify!($x)),*]) }; qw![./foo /usr/bin/baz foo.text]
[04:03:10] -playbot- [".", "/", "foo", "/", "usr", "/", "bin", "/", "baz", "foo", ".", "text"]
[04:03:17] *** c74d3 is now known as c74d
[04:03:19] <cjh> I was afraid of that.
[04:03:30] *** Joins: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net)
[04:03:40] <scott> you could make all that work by writing qw!("foo bar") and writing it as a syntax extension
[04:03:55] <cjh> oohhh
[04:04:06] <invoker> Is it bad writing the SQL statement this way?
[04:04:07] <scott> but you could also just write "foo bar".some_method I bet
[04:04:10] <forgottenone> what is rust bindings essentially? references to data like python or data itself like c? and how this code converted to machine code:let x=3;let x=(3,3);
[04:04:25] <huon> forgottenone: like C
[04:04:32] <scott> invoker: you'll run into weird syntax issues. better to just use a string, I think
[04:04:32] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[04:04:46] <huon> forgottenone: that code will allocate stack space for an integer for the first x, and space for a tuple of integers for the second x
[04:04:59] <huon> forgottenone: it's the same as `let x1 = 3; let x2 = (3, 3);`
[04:05:06] <cjh> scott: ty for the pointer
[04:05:10] *** Quits: lutter1 (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net) (Quit: Leaving.)
[04:05:25] <scott> np
[04:05:55] <aatch> forgottenone, what do you want to actually know?
[04:06:22] <forgottenone> huon: thanks for the answer, is it possible to forbid rebind to another type
[04:06:40] <huon> forgottenone: it's declaring a whole new variable,
[04:06:40] <borromakot> anyone have a few minutes to check out the issue I mentioned ^?
[04:06:49] <borromakot> No biggie if no one does :D
[04:06:59] *** Quits: stjahns_ (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[04:07:00] <scott> forgottenone: it's not a rebinding, it's introducing a new variable with the same name as a previous one (so you can no longer access the old one)
[04:07:02] <invoker> scott: thanks, i'll use it conservatively :)
[04:07:15] <forgottenone> aatch: huon answered what i want to know
[04:07:31] *** Quits: doomrobo (doomrobo@moz-tj2e6v.261j.6edk.2000.2604.IP) (Quit: Leaving)
[04:07:40] *** Joins: Savago (Savago@moz-k613vv.ca.comcast.net)
[04:07:47] <huon> borromakot: could you post the compiler output (I can't easily build it myself right now)
[04:08:04] <borromakot> will do :D
[04:08:35] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[04:08:38] <forgottenone> scott: huon: ok but isn't it a bit error-prone
[04:08:51] *** Joins: jimb (user@moz-6gkikn.or.comcast.net)
[04:09:15] <aatch> forgottenone, nope, type checking catches the vast majority of errors you'd be likely to get.
[04:09:26] *** Joins: alx (alx@moz-veqt2u.ifmo.ru)
[04:09:39] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (Quit: ERC Version 5.3 (IRC client for Emacs))
[04:09:45] <borromakot> http://pastebin.com/8J0W8m8Z
[04:09:47] *** Joins: jimb (user@moz-6gkikn.or.comcast.net)
[04:09:56] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:10:11] <aatch> Along with the fact that a `let` is bound to the scope it is in, so a `let foo` in a sub-scope can only shadow a `foo` from a higher scope, not overwrite it.
[04:10:32] <cjh> scott: for qw![] can that be done entirely within the macro system or does it require a compiler extension?
[04:10:57] <scott> cjh: which version of it?
[04:11:16] <huon> forgottenone: not really; Rust is stactically typed and the compiler will catch many errors of that form
[04:11:24] <borromakot> huon: keep in mind its probably bad regardless of errors.
[04:11:26] <cjh> scott: I want to write a qw!["a b c"] => vec![a, b, c]
[04:11:31] <cjh> scott: which I think is as close as I can get
[04:11:37] <scott> cjh: that would require a compiler extension
[04:11:42] <cjh> scott: bugger, ty
[04:11:44] <scott> to parse the string at compile time
[04:11:55] <forgottenone> aatch: huon: thanks for the answers 
[04:11:57] <cjh> yeah, I was thinking it it is easy to do at runtime
[04:11:59] <iopq> is ascii actually packed like 8 characters in 7 bytes
[04:12:00] <cjh> scott: ty for your time
[04:12:15] <scott> maybe a constexpr-like thing would make this easier later on
[04:12:21] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[04:12:22] <aatch> I declare new variables with a different type all the time, normally because I have some intermediate variable.
[04:12:29] <OmniMancer1> iopq: not as far as I know
[04:12:40] <cjh> iopq: no, an ascii char uses 7 bits, packing like that isn't generally useful
[04:12:44] <mbrubeck> iopq: I've never seen a system that did that, but I wouldn't be too suprised if it existed somewhere.
[04:12:59] <cjh> iopq: having your ascii chars all be one byte allows you to more easily skip through or index them
[04:13:27] *** bentley is now known as bentley|away
[04:13:35] <ChrisMorgan> iopq: US-ASCII defines the last bit as always being zero.
[04:13:45] <OmniMancer1> you can send them with 7 bit RS232 though
[04:14:27] <ChrisMorgan> iopq: in the distant past the final bit was used as a parity bit.
[04:15:00] <huon> borromakot: it seems that inlining the definition of `token`, and removing references, i.e.: `match self.stream[self.index] { ... }` should work
[04:15:11] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[04:15:25] *** Joins: sjj (sjj@moz-7s3.mbd.125.202.IP)
[04:17:44] <borromakot> huon: very nice!  Thanks :D
[04:17:49] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[04:18:59] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[04:20:01] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[04:20:15] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[04:21:43] *** Quits: rfnash (weechat@moz-ulk8um.in.comcast.net) (Ping timeout: 121 seconds)
[04:21:50] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[04:21:59] <borromakot> it is interesting that the 'index out of bounds' panic doesn't say which line it happened on.
[04:22:13] <XMPPwocky> it totally does?
[04:22:18] <XMPPwocky> i swear it did
[04:22:52] *** Quits: qdwang (qdwang@moz-79j0gu.members.linode.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[04:23:01] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[04:23:04] <borromakot> it isn't for me.
[04:23:10] <XMPPwocky> yeah it is on playpen
[04:23:15] <XMPPwocky> thread '<main>' panicked at 'index out of bounds: the len is 1 but the index is 4002', <anon>:3
[04:23:21] <XMPPwocky> on the 3rd line
[04:23:46] <borromakot> thread '<main>' panicked at 'index out of bounds: the len is 6 but the index is 6', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libcollections/vec.rs:1358
[04:23:57] <XMPPwocky> oh right for Vec it sort of sucks
[04:24:30] <mbrubeck> That's often true for anything that panics inside libstd
[04:24:33] <borromakot> gotcha.  I don't really know enough about it to criticize, but that is sort of critical.
[04:24:42] *** Quits: Takronix (Takronix@moz-nm15k0.hr.cox.net) (Connection closed)
[04:24:46] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[04:24:54] <borromakot> at least for troubleshooting.  Its fine for me because there are only a few times I index a vec currently :D
[04:24:59] *** Joins: kgrandon (Adium@moz-t7gg8c.hjek.d045.0009.2601.IP)
[04:25:00] <mbrubeck> borromakot: It's showing you that it panicked on line 1358 of libcollections/vec.rs, which is true but useless
[04:25:06] *** Joins: Takronix (Takronix@moz-nm15k0.hr.cox.net)
[04:25:18] <mbrubeck> You can set RUST_BACKTRACE=1 to get more useful info...
[04:25:22] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[04:25:22] <XMPPwocky> RUST_BACKTRACE=1 does exist
[04:25:26] <borromakot> interesting.
[04:25:33] <borromakot> going to try it now.
[04:25:38] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:26:19] *** Quits: alex (alex@moz-s9a.qrc.242.157.IP) (Ping timeout: 121 seconds)
[04:26:35] <mbrubeck> I really never need to know that my program panicked at libcore/option.rs:362.  Which it often does.  :)
[04:28:27] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[04:28:49] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[04:29:01] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[04:29:02] *** Joins: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl)
[04:29:33] <Mutabah> Should libcore use intrinsics::type_name to make error messages more readable?
[04:29:41] <Mutabah> (I.e. for unwrap's message, it can mention the type)
[04:29:43] <scott> it'd be neat if those panic!s could be passed an optional number of steps up the backtrace they should go to grab that default file:line location
[04:29:54] <mbrubeck> scott: I was just about to say that. :)
[04:29:58] *** Quits: orangeshark (erik@moz-1cm543.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[04:29:59] *** Quits: Savago (Savago@moz-k613vv.ca.comcast.net) (Client exited)
[04:30:28] <mbrubeck> Argh, I just realized that de-stabilizing thread::scoped means I need to re-write http://rosettacode.org/wiki/Sorting_algorithms/Sleep_sort#Rust again
[04:30:39] <mbrubeck> I waited until beta so it would be backward compatible!
[04:31:24] <insaneinside> Sleep-sort?  Sounds like my favorite strategy: go to bed and see if the code is more manageable in the morning.
[04:31:38] <mbrubeck> This is about as sensible.  :)
[04:31:50] *** Joins: fabiand (fabiand@moz-ouf55j.dip0.t-ipconnect.de)
[04:32:32] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[04:34:38] <WindowsBunny> borromakot: fortunately you're on a mac so RUST_BACKTRACE will work for you
[04:34:42] <WindowsBunny> unlike people on windows Q_Q
[04:36:24] *** Joins: khades (Thunderbird@moz-ual.b31.186.31.IP)
[04:36:36] *** Quits: mkpankov (mkpankov@moz-6il.21l.23.84.IP) (Ping timeout: 121 seconds)
[04:36:54] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[04:37:01] *** Quits: spider-mario (spidermario@moz-ti7.kn0.165.37.IP) (Ping timeout: 121 seconds)
[04:37:15] *** Joins: kushal (kdas@moz-r2sm7r.202.sitibroadband.in)
[04:37:24] *** Joins: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net)
[04:37:24] *** Quits: arty (Mibbit@moz-ineiim.il.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:37:31] *** Quits: ndhoule (ndhoule@moz-sf7g6k.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:37:38] *** Joins: mkpankov (mkpankov@moz-lu7.0jj.23.84.IP)
[04:38:25] *** Joins: soma (Mibbit@moz-ef5.7ab.191.107.IP)
[04:38:43] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[04:38:47] *** Joins: spider-mario (spidermario@moz-g84.0qg.164.37.IP)
[04:38:59] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[04:38:59] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[04:39:32] *** Quits: invoker (Mibbit@moz-2pb.7t9.210.112.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:39:38] <soma> Hello! Is there any patterns I can use to find out what an iterator will yield? (a move, a copy, a ref or a mut ref)
[04:40:03] <XMPPwocky> iterators just yield types
[04:40:14] <Mutabah> soma: At what level?
[04:40:25] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[04:40:28] <Mutabah> soma: There are naming conventions for what an iterator will yield
[04:40:31] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[04:40:42] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[04:40:44] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:40:46] <Mutabah> soma: .into_iter() yeilds values, .iter() returns &-ptrs, and .iter_mut() returns &mut-ptrs
[04:41:28] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:41:44] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:41:49] <soma> Mutabah: ok, then why is slice's  into_iter yields refs
[04:42:16] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[04:43:40] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[04:43:53] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[04:43:55] <cmr> soma: because slices are non-owning.
[04:43:58] <cmr> they can't yield values.
[04:44:08] *** Quits: davebettin (davebettin@moz-ip635p.or.comcast.net) (Ping timeout: 121 seconds)
[04:44:09] <cmr> (well, references are values, but ignoring that...)
[04:44:35] <mbrubeck> There, updated http://rosettacode.org/wiki/Sorting_algorithms/Sleep_sort#Rust to avoid thread::scoped
[04:45:31] <OmniMancer1> isn't sleep sort just a kind of radix sort?
[04:46:25] <mcpherrin> OmniMancer1: well, it really depends on your cpu scheduler implementation I think
[04:46:36] <mcpherrin> it's probably more like a heap sort or something ;p
[04:47:25] *** Joins: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at)
[04:47:33] <scott> most schedulers/sleep() implementations probably don't provide strong enough guarantees to even make sleep sort a proper sort algorithm
[04:47:36] <OmniMancer1> it only works on numbers though doesn't it?
[04:47:36] *** Joins: npm (npm@moz-92sbjt.wa.comcast.net)
[04:47:40] <scott> it'll just work 'most of the time'
[04:47:51] <OmniMancer1> yea sleep isn't guaranteed to sleep for longer
[04:47:51] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[04:47:56] <OmniMancer1> not to
[04:48:02] <soma> cmr: ok, so slices's into_iter is just a clone  of itself?
[04:48:13] <cmr> soma: essentially, yeah.
[04:48:55] <npm> can someone kick GBGamer?
[04:49:04] <npm> I don't want to go upstairs due to a concussion
[04:49:11] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[04:49:24] <soma> cmr: got it , thank you
[04:49:29] *** GBGamer was kicked by cmr (cmr)
[04:49:49] <cmr> npm: you still don't get the nick though, since that doesn't DC the client...
[04:49:52] <npm> test?
[04:49:58] <npm> argh
[04:49:58] <cmr> (and I don't have the power to do that...)
[04:50:15] <npm> I don't feel like going upstairs...
[04:50:20] <npm> Okay fine
[04:50:26] <cmr> /nick GBGamer2
[04:50:29] <cmr> :P
[04:50:57] *** Joins: ryanxcharles (ryan@moz-gn66cd.bac4.d045.0009.2601.IP)
[04:51:05] <csherratt> I wanted to show off this nice small library I have been working on https://github.com/csherratt/atom 
[04:51:17] <niconii> GBGamre?
[04:51:20] *** npm is now known as GBGamer
[04:51:25] <GBGamer> alright, done
[04:51:33] *** Quits: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at) (Ping timeout: 121 seconds)
[04:51:47] <cmr> csherratt: nice diagrams!
[04:51:50] <GBGamer> thank you
[04:52:06] <csherratt> thanks cmr
[04:52:31] <GBGamer> how did you make those?
[04:53:06] <csherratt> with omnigraffle
[04:53:39] <GBGamer> cool
[04:53:47] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[04:54:29] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[04:54:38] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[04:54:43] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:55:01] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[04:55:04] <cmr> csherratt: I'm not sure how I feel about it exposing the ordering; it seems like the operation would always need to be sequentially consistent?
[04:55:18] <cmr> I haven't thought about it though, it's far too late for me to be thinking about weak memory ordering :)
[04:55:20] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[04:55:25] <aatch> GBGamer, if your name is registered, you can use ghost.
[04:55:43] <GBGamer> aatch: what does that mean?
[04:55:56] *** Quits: vpol (vpol@moz-k10.rvb.159.213.IP) (Client exited)
[04:55:59] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[04:56:05] *** Quits: Takronix (Takronix@moz-nm15k0.hr.cox.net) (Connection closed)
[04:56:29] *** Joins: Takronix (Takronix@moz-nm15k0.hr.cox.net)
[04:56:45] <niconii> GBGamer: it's possible to register an IRC nick with a server such that a password is tied to it
[04:56:48] *** Quits: forgottenone (forgottenon@moz-3eq.4bi.253.212.IP) (Quit: Konversation terminated!)
[04:56:58] <GBGamer> Yeah, I've set that up
[04:57:08] <GBGamer> but I don't know how to ghost?
[04:57:09] <niconii> GBGamer: with that in place, you can do various things such as "ghost" someone using your nick, which boots them off the server
[04:57:09] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[04:57:15] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[04:57:17] <csherratt> cmr: I assumed that someone might want to use Release and Acquire, but I guess if they need to think about it is likely not safe.
[04:57:21] *** Quits: srh (User@moz-tvc5sp.sntcca.sbcglobal.net) (Quit: Leaving)
[04:57:39] <niconii> GBGamer: `/msg nickserv ghost NICK PASSWORD` ought to do it
[04:57:48] <aatch> GBGamer, the idea being that the only person that can use your nick for longer than a minute is another instance of you.
[04:57:49] <GBGamer> awesome! thank you
[04:58:21] <aatch> I've used it to kick myself off my home computer from work.
[04:58:28] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:58:46] <niconii> GBGamer: oh, but actually, on this server, it seems "recover" is used rather than "ghost"
[04:58:51] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[04:59:12] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[04:59:28] *** GBGamer is now known as Guest34186
[04:59:29] *** Quits: vairav (vairav@moz-qtc2tv.ca.comcast.net) (Client exited)
[04:59:37] <Guest34186> oh hey cool it works :)
[04:59:39] *** Quits: Guest34186 (npm@moz-92sbjt.wa.comcast.net) (Quit: leaving)
[04:59:47] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[05:00:41] <niconii> GBGamer: seems the semantics are a little different here too, it only boots if you've identified as the nick (logged in, basically), otherwise it just changes your nick
[05:01:29] <GBGamer> that's cool
[05:02:24] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[05:03:14] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:04:04] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:07:24] *** Joins: vpol (vpol@moz-k10.rvb.159.213.IP)
[05:07:52] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[05:09:13] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[05:09:16] *** Joins: kevinD (Mibbit@moz-peq4hh.oit.duke.edu)
[05:11:38] <Mutabah> Can someone help me with a complex lifetime error? https://github.com/thepowersgang/rust_os/blob/master/Kernel/Modules/storage_ata/io.rs#L62-L78
[05:11:45] *** Quits: mnemnion_ (mnemnion@moz-e8rfii.ca.comcast.net) (Quit: Leaving...)
[05:12:02] *** Quits: kevinD (Mibbit@moz-peq4hh.oit.duke.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[05:12:32] <Mutabah> That fails to borrowck, I'm not sure how/if I can annotate the ctrlr.do_dma function such that this code is possible
[05:12:45] <Mutabah> (it functionally keeps a &-ptr to self, via two different objects)
[05:13:26] *** Quits: dr_bibble (Mibbit@moz-ejhggg.il.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:13:50] <GBGamer> Mutabah: what's the error?
[05:14:09] <Mutabah> One moment, updating my gist
[05:14:12] <Mutabah> (posted it earlier
[05:14:16] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:14:26] <Mutabah> GBGamer: https://gist.github.com/thepowersgang/877759ecb7da07d6d4ff
[05:14:39] *** Quits: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[05:14:47] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[05:14:51] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[05:15:44] *** Joins: chuckr (Mibbit@moz-oqn1os.users.condointernet.net)
[05:15:54] *** Joins: nwin (textual@moz-hvci8u.pools.vodafone-ip.de)
[05:16:03] <chuckr> anybody know about both rust and windows?
[05:16:16] *** Joins: GGist (Mibbit@moz-st7v59.wa.comcast.net)
[05:16:20] <Mutabah> chuckr: WindowsBunny?
[05:16:22] <Mutabah> :)
[05:16:23] <bstrie> chuckr: I think WindowsBunny has used windows before
[05:16:25] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:16:37] <bstrie> he may also know a thing or two about rabbits, I've never asked
[05:16:40] * WindowsBunny boops chuckr
[05:16:46] * WindowsBunny boops Mutabah
[05:16:49] * WindowsBunny boops bstrie
[05:16:57] <chuckr> I'm looking for info on building .dll's with rust
[05:17:05] <bstrie> WindowsBunny: tell me all you know about bunnies
[05:17:06] <chuckr> and linking with windows code
[05:17:25] <GBGamer> Mutabah: I'm checking it out
[05:17:32] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[05:17:52] <WindowsBunny> chuckr: I've never really investigated building DLLs with Rust
[05:20:25] <GBGamer> Mutabah: I'm getting, "error: couldn't read "Core/gui/../../../Graphics/logo.rs"
[05:20:29] *** Quits: O01eg (o01eg@moz-5p4n4r.pnu9.3egh.2698.2a02.IP) (Client exited)
[05:21:37] <Mutabah> GBGamer: Yeah... compiling yourself won't work well atm
[05:21:48] <GBGamer> also, "ignoring specified output filename because multiple outputs were requested"
[05:21:58] <Mutabah> GBGamer: That's benign.
[05:21:58] <GBGamer> How do you suggest I compile it
[05:22:08] <Mutabah> GBGamer: The logo can be generated using a script in that directory\
[05:22:31] *** Quits: Guest5 (textual@moz-hnb58r.oc.cox.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:22:42] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:23:07] *** Joins: arBmind (Andreas@moz-32aubh.adsl.alicedsl.de)
[05:23:10] <GBGamer> which directory
[05:23:36] *** Joins: jviereck (Adium@moz-2ful07.dclient.hispeed.ch)
[05:24:04] <GBGamer> Also, Kernel/Modules/storage_ata/lib.rs is for some reason +x?
[05:24:30] <Mutabah> GBGamer: Random quirks. And the graphics directory
[05:24:31] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[05:24:36] <WindowsBunny> chuckr: By linking with windows code, do you mean linking to the standard windows system libraries?
[05:25:01] <chuckr> Just using the windows toolchain. 
[05:25:10] <WindowsBunny> >windows toolchain
[05:25:13] <chuckr> visual studio
[05:25:22] <vadimcn> chuckr: rustc --crate-type=dylib <yoursource>.rs builds a .dll
[05:25:28] <GBGamer> Mutabah: okay what should I actually run :P
[05:25:30] <chuckr> any way to drop an import lib with it?
[05:25:33] *** Quits: OmniMancer (omnimancer@moz-b00.dat.149.118.IP) (Ping timeout: 121 seconds)
[05:25:35] <Mutabah> GBGamer: see PM
[05:25:37] <WindowsBunny> Rust doesn't integrate too well with the msvc toolchain
[05:25:39] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[05:25:56] <chuckr> I know. It's still fun to play around with. 
[05:26:18] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[05:26:19] <WindowsBunny> chuckr: When you create a dylib, it should create an .rlib to go with it
[05:26:32] <WindowsBunny> that .rlib should be a valid coff library that msvc can link against, theoretically
[05:26:40] *** Quits: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca) (Quit: Leaving)
[05:26:46] <chuckr> hm.
[05:26:58] <vadimcn> chuckr: can you be a bit more explicit about your scenario?  What are you linking with what?
[05:27:09] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[05:27:09] <WindowsBunny> I think he's trying to create a dll in rust
[05:27:15] <chuckr> which I can do
[05:27:15] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[05:27:18] <WindowsBunny> and then link to the dll from C/C++ in msvc
[05:27:22] <chuckr> but to link in windows you need an 'import lib'
[05:27:34] <chuckr> which is just a stubbed .lib
[05:27:49] <chuckr> I read that llvm can produce windows import libs
[05:28:02] <chuckr> I was curious if I could get that through rustc
[05:28:12] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:28:34] <vadimcn> chuckr: so you want to create a .dll using rust, and then link it into a MSVC project?
[05:28:42] *** Quits: jasonrm (jasonrm@moz-m96h5m.ph.cox.net) (Quit: ZNC - http://znc.in)
[05:28:51] <chuckr> http://lld.llvm.org/windows_support.html
[05:28:56] <chuckr> yes.
[05:29:10] <WindowsBunny> hmmm
[05:29:12] <chuckr> specifically interested in creating a VS debugger component with rust. 
[05:29:13] *** Quits: chmanchester (chmancheste@moz-lmo.64e.222.162.IP) (Quit: )
[05:29:21] <chuckr> because why not.
[05:29:32] <chuckr> just seeing if I can do it.
[05:30:18] <chuckr> I was able to link a rust dll into a windows exe today.
[05:30:20] <chuckr> but it was a pain.
[05:30:40] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[05:30:52] <WindowsBunny> I think someone is just going to have to reach rustc to output a .a/.lib on windows when creating a dylib
[05:31:00] <WindowsBunny> chuckr: I'll open an issue for that
[05:31:03] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[05:31:05] *** Joins: dylan (dylan@moz-k5u.d0d.43.100.IP)
[05:31:06] *** Joins: raph1 (Adium@moz-erv.4ra.239.216.IP)
[05:31:16] <chuckr> thanks.
[05:31:19] <vadimcn> you can create an import lib for any dll using "dlltool", which is incidentally shipped with windows Rust 
[05:31:25] *** dylan is now known as Guest55351
[05:31:28] <chuckr> well that is interesting
[05:31:37] <vadimcn> lemme find you an example...
[05:31:43] <chuckr> I created one using 'lib /def' and a .def file
[05:31:58] *** Quits: raph (Adium@moz-o75.fg7.77.192.IP) (Ping timeout: 121 seconds)
[05:32:15] <chuckr> thanks!
[05:32:19] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[05:33:03] *** Joins: dstrbad (dstrbad@moz-tpelsq.dsl.iskon.hr)
[05:33:07] *** Joins: jasonrm (jasonrm@moz-m96h5m.ph.cox.net)
[05:33:42] <chuckr> https://msdn.microsoft.com/en-us/library/0b9xe492.aspx
[05:33:46] <GBGamer> Anyone know of a replacement for Int?
[05:33:52] <GBGamer> (core::num::Int)
[05:35:04] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:35:25] *** Quits: narann (narann@moz-mjj.eaj.250.162.IP) (Quit: Leaving)
[05:35:37] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[05:35:54] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[05:36:14] *** Quits: Guest55351 (dylan@moz-k5u.d0d.43.100.IP) (Ping timeout: 121 seconds)
[05:36:43] <Mutabah> GBGamer: there's a crates.io one for it
[05:37:19] <GBGamer> blargh, I need to figure out irssi split windows
[05:38:38] *** Quits: vairav (vairav@moz-qtc2tv.ca.comcast.net) (Client exited)
[05:38:44] <WindowsBunny> chuckr: I made https://github.com/rust-lang/rust/issues/24763
[05:39:37] *** Parts: GBGamer (npm@moz-92sbjt.wa.comcast.net) ()
[05:39:41] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[05:39:46] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (Quit: leaving)
[05:39:52] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[05:39:54] *** Joins: edbond (edbond@moz-8st.7gv.108.109.IP)
[05:40:15] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[05:40:21] *** Quits: kgrandon (Adium@moz-t7gg8c.hjek.d045.0009.2601.IP) (Quit: Leaving.)
[05:40:53] <GBGamer> test
[05:41:02] <WindowsBunny> GBGamer: test passed
[05:41:06] <GBGamer> test 2
[05:41:12] <GBGamer> okay, this is not working
[05:41:13] *** Quits: dstrbad (dstrbad@moz-tpelsq.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[05:43:40] *** Joins: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP)
[05:43:57] <chuckr> WindowsBunny: thanks
[05:44:20] <chuckr> WindowsBunny: idk enough about .rlibs and windows import libs to know if those issues are related
[05:44:49] *** Quits: dzyp (dzyp@moz-97od8c.client.mchsi.com) (Connection closed)
[05:44:57] <WindowsBunny> I'm not actually sure of the difference between rlib and staticlib
[05:45:09] <huon> staticlib has no metadata
[05:45:32] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[05:45:32] *** ChanServ sets mode: +o erickt
[05:45:45] <WindowsBunny> huon: the rlib is 5 KB, the staticlib is 3,559 KB
[05:45:47] *** Quits: KindOne (KindOne@moz-49t.rnq.170.107.IP) (Quit: Hiring PHP developers does not contribute to the quota of employees with disabilities.)
[05:45:54] <WindowsBunny> for a simple library with a single empty function
[05:46:08] <WindowsBunny> :|
[05:46:18] <huon> WindowsBunny: huh
[05:46:29] <WindowsBunny> pub extern fn foo() {}
[05:46:34] <WindowsBunny> that's my rust file
[05:46:39] *** Quits: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP) (Quit: Leaving)
[05:46:48] *** Joins: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP)
[05:47:58] <huon> WindowsBunny: oh, the staticlib probably includes std etc.
[05:48:06] <huon> while the rlib doesn't need to link those in
[05:48:11] <WindowsBunny> huon: and this is the wonderful .a I get from it https://mega.co.nz/#!vVYQHQoZ!EsKA5bxBtOxsD8Rnk18-OVV5HIFixoM1RFRL4KRIdIY
[05:48:15] <WindowsBunny> but for an empty function?
[05:48:21] <huon> optimisations off?
[05:48:44] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:48:53] <chuckr> no std_lib?
[05:49:15] <WindowsBunny> even with optimizations enabled
[05:49:29] <WindowsBunny> then its 3,558 KB instead of 3,559 KB
[05:49:54] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[05:50:02] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:50:27] * WindowsBunny activates -Clto and watches it climb to 3,669 KB
[05:50:30] <WindowsBunny> I give up
[05:51:17] <huon> WindowsBunny: wat
[05:51:22] <huon> num is fixed!
[05:51:28] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Connection closed)
[05:51:32] <WindowsBunny> huon: -Cdebuginfo=0 has no effect
[05:51:57] <WindowsBunny> $ rustc main.rs --crate-type=staticlib -Copt-level=3 -Clto -Cdebuginfo=0
[05:52:02] <WindowsBunny> Can I get any better than that?
[05:52:43] <huon> I get 6MB for a literally empty file... :S
[05:52:48] <WindowsBunny> huon: Should this be classified as a bug?
[05:53:00] <huon> probably
[05:53:12] *** Quits: nonsensickle_ (nonsensickl@moz-4v0.gkd.16.182.IP) (Quit: Leaving)
[05:53:13] <WindowsBunny> to the issue tracker!
[05:53:28] <huon> yeah, there's a tonne of symbols stuff from std
[05:53:49] <huon> symbols of*
[05:54:01] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[05:54:36] <chuckr> huh
[05:55:10] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:55:31] <WindowsBunny> huon: https://github.com/rust-lang/rust/issues/24764
[05:55:36] * Mutabah prods huon/other expirenced rust users
[05:55:43] <Mutabah> https://gist.github.com/thepowersgang/877759ecb7da07d6d4ff
[05:55:56] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[05:56:10] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[05:56:10] *** Quits: DerisiveLogic (smuxi@moz-i85.d8k.72.74.IP) (Ping timeout: 121 seconds)
[05:56:24] <WindowsBunny> Mutabah: can see code?
[05:56:32] <Mutabah> https://github.com/thepowersgang/rust_os/blob/master/Kernel/Modules/storage_ata/io.rs#L62-L78
[05:56:36] <Mutabah> Just added that to the gist
[05:57:09] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[05:57:58] <vadimcn> huh I could swear I once found a way to create a lib from a dll using dlltool...
[05:58:40] <chuckr> just to be clear, in msvc when you create a static library you get a .lib
[05:58:44] *** Joins: dstrbad (dstrbad@moz-dgmnbj.cable.xnet.hr)
[05:58:48] <chuckr> when you create a dynamic library you get a .dll and a .lib
[05:58:55] <chuckr> the .lib's created in either case are different
[05:59:15] <WindowsBunny> chuckr: Either way, you then link to the .lib regardless
[05:59:30] <chuckr> WindowsBunny: yeah
[05:59:36] <vadimcn> what does work is this: -C link-args="-Wl,-out-implib,implib.lib"
[05:59:37] <WindowsBunny> and a .lib can both have functions inside of it, and functions relegated to a .dll
[05:59:54] <chuckr> WindowsBunny: really? nice.
[06:00:02] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:00:04] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:00:12] <WindowsBunny> chuckr: Well, that's what the coff format allows for
[06:00:29] <WindowsBunny> Whether or not any build tools actually create coff libraries like that is a different matter
[06:01:10] <Amaranth> That bit always seemed weird to me
[06:01:25] <chuckr> WindowsBunny: gtk
[06:01:28] <Amaranth> .lib files are basically .a files on *nix systems but you also need them to link to .dll files
[06:01:31] <chuckr> WindowsBunny: is cofff == PE format?
[06:02:00] <WindowsBunny> chuckr: PE is an extension/modification of COFF
[06:02:08] *** Joins: OmniMancer (OmniMancer@moz-6m1jrb.xtra.co.nz)
[06:02:13] *** Quits: devur (Mibbit@moz-49ifil.il.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:02:16] *** Joins: Uther (Thunderbird@moz-gssp49.fbx.proxad.net)
[06:02:24] <chuckr> WindowsBunny: got it.
[06:02:56] <WindowsBunny> static libraries use COFF, while DLLs/EXEs use PE
[06:03:16] *** Quits: OmniMancer1 (OmniMancer@moz-6m1jrb.xtra.co.nz) (Ping timeout: 121 seconds)
[06:03:22] <GBGamer> I'm off awesome peeps of rust, good night
[06:03:24] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (Quit: leaving)
[06:03:34] * chuckr nods
[06:03:55] *** Joins: squiggy (Mibbit@moz-v2g.9fv.219.176.IP)
[06:04:09] <chuckr> vadimcn: is that to rustc?
[06:04:37] <WindowsBunny> chuckr: Should be
[06:04:44] <squiggy> ok,when you write something like that thr
[06:04:45] <chuckr> so can somebody give me the gist of an rlib vs a dylib or a static lib?
[06:04:50] <vadimcn> chuckr: yes.  though ultimately it gets passed to the linker
[06:05:10] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:05:44] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[06:05:57] <vadimcn> chuckr: rlib = Rust library. in practice just a regular lib file with an extra object file containing metadata.
[06:06:01] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:06:11] <WindowsBunny> I think nobody paid much thought to the different rustc outputs on Windows
[06:06:23] <vadimcn> dylib = dynamic library (.so on unix, .dll on windows)
[06:06:54] <WindowsBunny> staticlib = library suitable for linking to by C/C++
[06:07:11] <WindowsBunny> which really just means renaming .rlib -> .a
[06:07:13] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[06:07:21] *** Joins: andresv (textual@moz-0jd3j8.ca.charter.com)
[06:07:21] <chuckr> lol
[06:07:23] <WindowsBunny> and then adding a bunch of garbage to bloat the size from a few KB to a few MB
[06:07:26] <WindowsBunny> for absolutely no reason
[06:07:26] <vadimcn> static lib = Rust output intended to be used for linking into C programs, and thus contains all upstream dependencies, as you just saw
[06:07:53] <chuckr> thanks
[06:07:58] <WindowsBunny> Even though COFF allows libraries to specify dependencies
[06:07:58] <bstrie> still should be getting optimized out, a 6mb hello world isn't right
[06:08:11] <WindowsBunny> its just that link.exe is the only linker able to understand that
[06:08:17] <bstrie> is it just windows?
[06:08:43] <squiggy> ok when you write  something like that there are two  distinct  x values:let x=10;let x=(5,7); is it also the case when you write let x=3; let x=5; or let x=3; let mut x=x;
[06:08:46] <WindowsBunny> bstrie: link.exe is the only sane easy to use linker, which makes me sad
[06:08:46] <chuckr> I think you can delay load and link directly against a dll
[06:09:01] <chuckr> but I was having difficulty with export/import names matching
[06:09:31] *** Joins: towler (Mibbit@moz-a66vj9.members.linode.com)
[06:09:52] *** Quits: vpol (vpol@moz-k10.rvb.159.213.IP) (Client exited)
[06:10:31] <WindowsBunny> bstrie: The inputs to link are even order independent, you don't need to start with crtbegin.o and crtend.o at the end, or whatever ld requires
[06:10:44] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[06:10:47] <squiggy> i mean 2 x created in the memory in first example,  is this also the case for other two example
[06:11:17] <WindowsBunny> squiggy: Every time you say `let x` you are creating a new variable named x
[06:11:32] <WindowsBunny> if it happens to have the same name as a previous variable, they are two entirely different variables
[06:11:45] <WindowsBunny> they just happen to have the same name, so you can no longer access the previous variable by name
[06:12:55] *** Joins: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com)
[06:13:43] *** Quits: sav (e@moz-qa4.jen.247.37.IP) (Connection closed)
[06:13:45] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[06:13:53] <niconii> hang on
[06:14:07] <niconii> playbot: let x = 10; let x = (5, 7); x
[06:14:08] -playbot- (5, 7)
[06:14:09] *** Joins: sav (e@moz-9u3te2.cc)
[06:14:20] <niconii> ...i didn't know creating a second variable with the same name was even *valid* until now
[06:14:31] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[06:15:19] <squiggy> so the compiler doesnt optimize even var same type or name or when we change the mutability of same binding 
[06:15:22] *** Quits: errordeveloper (ilya@moz-fmp.00e.200.90.IP) (Ping timeout: 121 seconds)
[06:15:31] *** Joins: errordeveloper (ilya@moz-fmp.00e.200.90.IP)
[06:15:52] <WindowsBunny> the compiler will optimize wherever it can
[06:16:04] <WindowsBunny> it can see the last place you use a given variable, and reuse that spot on the stack
[06:16:20] <WindowsBunny> and if it just sees you moving from one variable to another and not using the first variable, it'll elide the move entirely
[06:16:34] <bstrie> squiggy: internally *all* assignments, even when reusing the same variable, get brand-new bindings. this is called SSA form, and it's the basic technique of all optimizing compilers
[06:16:36] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Connection closed)
[06:16:46] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[06:17:09] <WindowsBunny> in the end its all optimized very nicely
[06:17:17] *** Quits: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP) (Connection closed)
[06:17:27] *** Joins: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP)
[06:18:16] <chuckr> ok so is it possible to pass flags to rustc through cargo?
[06:18:21] *** Quits: turtil (turtil@moz-gfc.es4.23.103.IP) (Quit: WeeChat 1.1.1)
[06:18:34] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:18:39] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:18:51] *** Joins: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl)
[06:18:52] <bstrie> chuckr: not at the moment, known pain point
[06:19:14] <chuckr> good old fashioned makefile.
[06:19:21] <chuckr> unless there's a better way
[06:19:28] <cmr> chuckr: what flag do you need to pass?
[06:19:44] <chuckr> linker flags
[06:19:57] <chuckr> -C link-args="-Wl,-out-implib,implib.lib"
[06:20:03] <chuckr> is what I've been told for my scenario
[06:20:06] <chuckr> haven't tried it yet.
[06:20:19] <cmr> Do you want to do that unconditionally?
[06:20:28] *** Quits: squiggy (Mibbit@moz-v2g.9fv.219.176.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:20:29] <cmr> (ie, every rustc invocation?)
[06:20:34] *** Joins: terpstra_ (terpstra@moz-a4595l.dip0.t-ipconnect.de)
[06:20:46] <tomaka> you should use a build script, they are made for this: http://doc.crates.io/build-script.html
[06:20:46] <chuckr> yes.
[06:21:02] <XMPPwocky> there is a way to pass arbitrary flags, but bewaaaare
[06:21:12] *** Joins: amphibulus (Mibbit@moz-qdcjho.res.rr.com)
[06:21:17] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[06:21:32] <XMPPwocky> https://github.com/XMPPwocky/vel0city/blob/master/winlink.bat you can override the actual name of the linker
[06:21:34] <tomaka> XMPPwocky: nooo, don't reveal that terrible secret
[06:22:02] *** Quits: amphibulus (Mibbit@moz-qdcjho.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:22:33] <chuckr> lol
[06:22:46] *** Joins: klp (Mibbit@moz-qdcjho.res.rr.com)
[06:22:53] <chuckr> so a build script is just an arbitrary rust file that has environment args?
[06:23:03] <chuckr> environment variables*
[06:23:05] <chuckr> or am I lost?
[06:23:07] *** Quits: klp (Mibbit@moz-qdcjho.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:23:23] <tomaka> chuckr: a build script is compiled and run by cargo before compiling your crate
[06:23:34] <tomaka> and it can output a list of libraries to link to
[06:23:40] *** Quits: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP) (Quit: Leaving)
[06:23:53] <tomaka> for example your build script can compile a C library then tell Cargo to link to it
[06:23:57] <chuckr> ok
[06:23:58] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:24:18] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[06:24:24] <tomaka> it can also be used to generate rust code or move files around or whatever you want to do pre-compilation
[06:25:13] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:25:31] <tomaka> in the build script of my game, I list the files that are in a directory named "assets"
[06:25:50] <chuckr> interesting
[06:25:51] <tomaka> then I generate rust code, for each code I add a line "static FILENAME = include_bytes!(file);"
[06:25:55] *** Quits: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[06:26:21] <chuckr> XMPPwocky: I don't understand.
[06:26:24] *** nsm is now known as nsm|away
[06:26:28] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[06:26:35] <tomaka> don't look at XMPPwocky's trick, it's a hack
[06:26:52] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (Ping timeout: 121 seconds)
[06:27:05] <tomaka> it's abusing the fact that you can pass the name to a linker to rustc in case of cross-compilation
[06:27:06] *** Joins: choplin (choplin@moz-q517gi.u-tokyo.ac.jp)
[06:27:19] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:27:24] <chuckr> ah
[06:29:45] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[06:29:53] *** Joins: mbudde (mbudde@moz-v8g.lim.109.2.IP)
[06:29:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:30:11] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:31:00] *** Joins: zk (zk@moz-2k31nn.retail.telecomitalia.it)
[06:31:05] *** Joins: _petr (petr@moz-2pi.7q8.248.178.IP)
[06:31:10] *** Quits: choplin (choplin@moz-q517gi.u-tokyo.ac.jp) (Ping timeout: 121 seconds)
[06:31:14] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[06:32:03] <Mutabah> WindowsBunny: Did you take a look at my lifetime problem?
[06:32:06] <Mutabah> (I'm kinda stumped)
[06:32:21] <WindowsBunny> I'm stumped
[06:32:32] *** Quits: rouma (zack@moz-t4kf3b.pekn.hg8m.2000.2604.IP) (Ping timeout: 121 seconds)
[06:32:53] <Mutabah> well... at least it makes three of us (GMGamer tried earlier)
[06:33:05] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[06:33:05] <Mutabah> *GBGamer
[06:34:03] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[06:34:23] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[06:34:53] *** Joins: choplin (choplin@moz-hqa.ohm.51.192.IP)
[06:35:14] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Quit: Leaving)
[06:36:05] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[06:36:29] *** Quits: NobbZ_ (NobbZ@moz-9hdemd.dynamic.kabel-deutschland.de) (Quit: Leaving)
[06:36:35] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[06:36:40] *** Quits: Porkepix_ (Porkepix@moz-e1bv2v.rev.sfr.net) (Quit: )
[06:36:48] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[06:37:39] <tomaka> playbot: 0.log2()
[06:37:41] -playbot- <anon>:9:11: 9:17 error: type `_` does not implement any method in scope named `log2`
[06:37:41] -playbot- <anon>:9         0.log2()
[06:37:41] -playbot- output truncated; full output at: http://bit.ly/1PsSuq1
[06:37:48] <tomaka> playbot: 0.0.log2()
[06:37:49] -playbot- output truncated; full output at: http://bit.ly/1d7URAJ
[06:37:59] *** Joins: m104ru (m104ru@moz-j4k.8g6.153.93.IP)
[06:38:09] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[06:38:20] <tomaka> ah I got it
[06:38:23] <tomaka> playbot: 0.0f32.log2()
[06:38:24] -playbot- -inf
[06:38:34] *** Joins: duncanmv (duncan@moz-2vm4r8.kosq.rj4h.0113.2620.IP)
[06:38:40] <tomaka> rustc can't determine the type of "0.0" alone
[06:38:48] <XMPPwocky> i filed that
[06:38:59] *** Quits: chuckr (Mibbit@moz-oqn1os.users.condointernet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:39:01] <XMPPwocky> https://github.com/rust-lang/rust/issues/24124
[06:39:03] *** Quits: Slava_I (slava@moz-vir.9d1.135.88.IP) (Ping timeout: 121 seconds)
[06:39:03] *** Quits: sav (e@moz-9u3te2.cc) (Connection closed)
[06:39:21] *** Joins: rootnode (rootnode@moz-go1ut4.ip1.george24.com)
[06:39:46] *** Joins: sav (e@moz-9u3te2.cc)
[06:40:03] *** Joins: zcourts (zcourts@moz-5q7.pma.221.31.IP)
[06:40:56] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Connection closed)
[06:41:10] <XMPPwocky> tomaka: ^
[06:41:16] *** Quits: jud (jud@moz-lmn.3g1.113.70.IP) (Quit: Leaving)
[06:41:18] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[06:41:19] *** ChanServ sets mode: +o pnkfelix
[06:41:46] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:42:13] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:42:16] *** Joins: squiddy_ (squiddy@moz-md4.pm3.19.178.IP)
[06:42:19] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[06:43:30] *** Joins: skade (skade@moz-9imj12.dip0.t-ipconnect.de)
[06:43:34] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[06:43:42] *** Quits: jviereck (Adium@moz-2ful07.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[06:43:55] *** Joins: slashus2 (slashus2___@moz-evfg9e.res.rr.com)
[06:43:56] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[06:44:05] *** Quits: zcourts (zcourts@moz-5q7.pma.221.31.IP) (Ping timeout: 121 seconds)
[06:44:09] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[06:45:33] *** Joins: Porkepix_ (Porkepix@moz-e1bv2v.rev.sfr.net)
[06:45:36] *** Quits: arBmind (Andreas@moz-32aubh.adsl.alicedsl.de) (Quit: Leaving.)
[06:45:45] *** Quits: duncanmv (duncan@moz-2vm4r8.kosq.rj4h.0113.2620.IP) (A TLS packet with unexpected length was received.)
[06:47:34] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[06:48:04] <Mutabah> Simpler question - Anyone know how "fn read(&self, prio: u8, blockidx: u64, count: usize, dst: &mut [u8]) -> Result<Box<::async::Waiter>, ()>;" would expand to (where Waiter is a trait)
[06:48:10] <Mutabah> (In terms of lifetime annotation)
[06:49:08] <bstrie> Mutabah: you're not returning any references, so I don't think it matters
[06:49:09] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[06:49:29] <Mutabah> bstrie: The returned boxed trait?
[06:49:39] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[06:49:41] <Mutabah> Or does that infer to 'static?
[06:49:52] <bstrie> Mutabah: that'll be inferring to static, yeah
[06:50:01] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[06:50:13] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[06:50:24] <Mutabah> I guess that means the error message I'm getting is not clear enough
[06:50:42] <Mutabah> No mention of 'static in https://gist.github.com/thepowersgang/877759ecb7da07d6d4ff
[06:51:26] <bstrie> Mutabah: if you hit a bad error message, file a bug!
[06:51:48] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:51:59] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[06:52:05] *** Quits: niconii (nicole@moz-isj0f9.frgo.qwest.net) (Quit: leaving)
[06:52:23] *** Joins: duncanmv (duncan@moz-2vm4r8.kosq.rj4h.0113.2620.IP)
[06:52:25] <Mutabah> bstrie: Read the gist I posted?
[06:52:56] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Ping timeout: 121 seconds)
[06:53:12] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[06:53:39] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[06:53:57] *** Quits: dstrbad (dstrbad@moz-dgmnbj.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[06:54:11] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:54:11] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[06:54:22] *** Joins: ebel (rory@moz-l1ldq7.hsi4.kabel-badenwuerttemberg.de)
[06:54:46] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[06:55:01] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[06:55:12] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[06:55:28] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[06:55:33] *** Joins: nedp (nedp@moz-vg6vvt.bigpond.net.au)
[06:56:02] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:57:31] *** Joins: Layl (Mibbit@moz-iachg4.sdb.prolocation.net)
[06:58:41] <bstrie> Mutabah: I read it, file a bug if you think we should be doing better :P and now I'm off to bed!
[06:59:05] <Mutabah> sleep well
[06:59:15] * Mutabah goes to headscratch at this similar error moving up and up the call chain
[06:59:43] *** Quits: fabiand (fabiand@moz-ouf55j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[06:59:54] *** Joins: mib_alwrze (Mibbit@moz-pb4q1q.metu.edu.tr)
[07:00:09] *** Joins: arBmind (Andreas@moz-np1ab8.dyn.telefonica.de)
[07:00:11] *** Quits: mib_alwrze (Mibbit@moz-pb4q1q.metu.edu.tr) (Quit: http://www.mibbit.com ajax IRC Client)
[07:00:36] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:01:00] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[07:01:02] *** Joins: ekiwi_ (kevin@moz-b1dekb.eduroam.rwth-aachen.de)
[07:01:15] *** Joins: aravindavk (aravinda@moz-m6j.f0d.244.121.IP)
[07:03:01] *** Quits: v21 (vee@moz-07pghd.asianet.co.th) (Quit: Leaving)
[07:03:09] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[07:03:09] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[07:03:29] *** Quits: soma (Mibbit@moz-ef5.7ab.191.107.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:03:43] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[07:03:48] *** Joins: fabiand (fabiand@moz-ouf55j.dip0.t-ipconnect.de)
[07:05:47] *** Quits: duncanmv (duncan@moz-2vm4r8.kosq.rj4h.0113.2620.IP) (A TLS packet with unexpected length was received.)
[07:07:21] *** Quits: GGist (Mibbit@moz-st7v59.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:07:36] *** Quits: errordeveloper (ilya@moz-fmp.00e.200.90.IP) (Ping timeout: 121 seconds)
[07:07:45] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[07:08:21] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[07:09:25] *** Quits: Porkepix_ (Porkepix@moz-e1bv2v.rev.sfr.net) (Quit: My laptop has gone to sleep. ZZZzzz…)
[07:09:25] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[07:10:00] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[07:10:46] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:11:09] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[07:11:24] *** Joins: hebz0rl (hebz0rl@moz-cfcrtj.static.qsc.de)
[07:11:26] *** Quits: borromakot (Adium@moz-j6pi1a.il.comcast.net) (Quit: Leaving.)
[07:11:54] *** Quits: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu) (Connection closed)
[07:12:23] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[07:13:06] <Layl> how can I get a folder with everything in it for running my application made in rust
[07:13:08] *** Joins: duncanmv (duncan@moz-2vm4r8.kosq.rj4h.0113.2620.IP)
[07:13:15] *** Joins: Temur (Tarmashirin@moz-93d.c6u.199.117.IP)
[07:13:16] *** Quits: Tarmashirin (Tarmashirin@moz-93d.c6u.199.117.IP) (Connection closed)
[07:13:17] <Layl> last time I tried to publish I got a missing gccsomething.dll
[07:13:29] *** Joins: giucam (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP)
[07:14:21] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[07:14:47] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[07:15:34] <Layl> if there's no way to do that, I can't exactly be using rust for any real applications...
[07:16:00] *** Quits: Temur (Tarmashirin@moz-93d.c6u.199.117.IP) (Connection closed)
[07:16:03] <Layl> since I can't just tell everyone using my application to install the rust compiler and mingw
[07:16:21] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[07:16:28] *** Joins: Temur (Tarmashirin@moz-93d.c6u.199.117.IP)
[07:17:21] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[07:17:21] *** Quits: skade (skade@moz-9imj12.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:20:26] *** Quits: mindtree (Mitch@moz-do07e9.iprimus.net.au) (Ping timeout: 121 seconds)
[07:21:51] *** Joins: skade (skade@moz-9imj12.dip0.t-ipconnect.de)
[07:23:36] <insaneinside> Lay1: that sounds like a problem with the system-installed linker.  Are you using Cygwin?
[07:23:46] *** Quits: slashus2 (slashus2___@moz-evfg9e.res.rr.com) (Quit: Leaving)
[07:23:57] <insaneinside> Layl: ^^
[07:24:05] <Layl> I'm using mingw
[07:24:18] <Layl> but this happened with a library that didn't use any C stuff
[07:24:22] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:24:27] <Layl> and it builds if I remove mingw from the path
[07:24:49] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[07:25:10] <insaneinside> It's been a few years since I tried any development on Windows.
[07:25:24] *** Joins: mindtree (Mitch@moz-qh8f9n.iprimus.net.au)
[07:25:31] <Layl> seriously why does every single language ever have this problem, there's never any way to just get it to build something that works out of the box and doesn't include all kinds of things you don't want in a release
[07:25:31] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[07:25:46] *** Quits: andresv (textual@moz-0jd3j8.ca.charter.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:26:05] <Layl> I just need a single folder with the executable and any DLLs it needs, and cargo just sets environment variables instead
[07:26:15] <Layl> as a result I have no idea where to even get everything I need to run this
[07:26:18] *** Quits: spider-mario (spidermario@moz-g84.0qg.164.37.IP) (A TLS packet with unexpected length was received.)
[07:26:40] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[07:27:22] <eerie> Is there a plan for removing the "eat your laundry" quote from the rust main page?
[07:27:35] <insaneinside> Layl: there might be someone around who knows how to avoid linking dlls you don't need -- but they've likely gone to bed already (many of them seem to be on US/West Coast)
[07:28:25] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[07:28:42] <ChrisMorgan> eerie: once we hit 1.0.0 it’ll theoretically no longer be true.
[07:28:49] <Layl> this just seems like such a common thing to do, having a publishable directory
[07:28:54] <Layl> I don't see why it ends up being so hard
[07:28:55] <ChrisMorgan> Therefore I would fully expect that it will be removed at that time.
[07:29:15] *** Parts: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) ()
[07:29:16] *** Joins: conan (Mibbit@moz-55k.tmf.159.62.IP)
[07:29:23] *** Quits: conan (Mibbit@moz-55k.tmf.159.62.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:29:23] *** Joins: frankmcsherry (frankmcsher@moz-9jgf5s.dyn.telefonica.de)
[07:29:23] *** Quits: Tuna-Fish (quassel@moz-5djkv5.kortex.jyu.fi) (Connection closed)
[07:29:32] *** Joins: xarcus (Mibbit@moz-55k.tmf.159.62.IP)
[07:29:38] *** Joins: curmet (Mibbit@moz-v4l.1a6.170.101.IP)
[07:29:53] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[07:30:23] <curmet> hi
[07:30:31] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[07:30:35] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[07:30:50] <curmet> is there a trait that represents that
[07:30:56] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[07:31:23] *** Joins: erz (erz@moz-83ijfr.broadband.corbina.ru)
[07:31:33] <curmet> says a type can be constructed with new() or similar?
[07:32:18] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[07:32:27] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[07:32:32] <ChrisMorgan> curmet: https://doc.rust-lang.org/std/default/trait.Default.html
[07:32:36] *** Joins: timonv (timonv@moz-1qu311.dynamic.ziggo.nl)
[07:32:51] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[07:32:59] *** Joins: errordeveloper (ilya@moz-fmp.00e.200.90.IP)
[07:33:00] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[07:33:19] <Layl> so, for right now, is there any way I can get my application in a way that I can run it on other computers?
[07:33:26] *** Joins: whidgle (Mibbit@moz-lbh.ira.101.140.IP)
[07:33:31] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Ping timeout: 121 seconds)
[07:33:42] <curmet> ChrisMorgan: awesome, that's exactly what i need. Thanks!
[07:33:54] *** Joins: jviereck (Adium@moz-ihn58j.97ug.g469.067c.2001.IP)
[07:34:36] *** Quits: grant_ (grant@moz-jfh.0nq.187.64.IP) (Client exited)
[07:34:54] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[07:34:59] *** Quits: curmet (Mibbit@moz-v4l.1a6.170.101.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:36:17] *** kimundi is now known as zz_kimundi
[07:36:50] <whidgle> Hello. I'm trying to build my project and got many "... error: module `...` is private" errors. How can I fix this? Thanks.
[07:38:50] <huon> whidgle: what sort of modules? modules in your own project?
[07:39:00] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Connection closed)
[07:39:15] <Layl> any way to do it? even a hacky way? I just need some way
[07:39:18] *** Quits: blaenk (blaenkdenum@moz-2focj4.n2pv.fsko.e000.2605.IP) (Connection closed)
[07:39:33] *** Joins: blaenk (blaenkdenum@moz-rrtddg.n2pv.fsko.e000.2605.IP)
[07:39:42] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[07:39:51] <whidgle> No, std modules. Tcp for example.
[07:39:54] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[07:40:07] *** Quits: nedp (nedp@moz-vg6vvt.bigpond.net.au) (Ping timeout: 121 seconds)
[07:40:20] *** Joins: davebettin (davebettin@moz-qs3lsi.bhak.dqhm.0007.2601.IP)
[07:40:35] *** Quits: timonv (timonv@moz-1qu311.dynamic.ziggo.nl) (Ping timeout: 121 seconds)
[07:40:36] <whidgle> First error is here: src/main.rs:12 use std::net::tcp;
[07:40:52] <Layl> seriously this shouldn't be a hard thing, surely the problem of "I have to run this on not a development computer" has come up before
[07:40:57] *** Quits: skade (skade@moz-9imj12.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:40:58] *** Quits: jviereck (Adium@moz-ihn58j.97ug.g469.067c.2001.IP) (Quit: Leaving.)
[07:41:03] *** Joins: Tuna-Fish (quassel@moz-5djkv5.kortex.jyu.fi)
[07:41:09] <cmr> Layl: copy the binary and all the dlls from the cargo deps dir?
[07:41:20] <Layl> cargo doesn't tell me what DLLs it's making my application use
[07:41:31] <Layl> and there's more than just the dependencies
[07:41:32] <cmr> it doesn't need to, they are all in the deps dir.
[07:41:53] <Layl> well that's what I thought but then it complained about missing gccsomething.dll
[07:41:59] <cmr> ah, the gcc runtime.
[07:42:24] <cmr> yeah, you'll need to copy that as well if the target computer doesn't have mingw
[07:42:29] <cmr> (libgcc)
[07:42:38] <cmr> WindowsBunny: http://static.rust-lang.org/doc/master/std/net/index.html
[07:42:38] <Layl> is there anything else I should be copying?
[07:42:42] <cmr> grr
[07:42:44] <cmr> whidgle: http://static.rust-lang.org/doc/master/std/net/index.html
[07:42:46] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[07:42:50] <cmr> whidgle: there is no std::net::tcp in the public API.
[07:43:12] <cmr> Layl: that *should* be all, iirc.
[07:43:34] <cmr> Ah, probably the Rust stdlib as well
[07:43:35] <Layl> so just libgcc_s_dw2-1.dll
[07:43:44] <Layl> isn't that statically linked
[07:44:03] <cmr> not necessarily, but it might be in your case.
[07:44:12] <whidgle> cmr: Thank you!
[07:44:22] *** Quits: davebettin (davebettin@moz-qs3lsi.bhak.dqhm.0007.2601.IP) (Ping timeout: 121 seconds)
[07:44:42] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[07:45:02] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[07:45:26] *** Joins: jviereck (Adium@moz-tde1p4.ethz.ch)
[07:45:52] *** Quits: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com) (Ping timeout: 121 seconds)
[07:45:56] *** Joins: mkpankov` (mkpankov@moz-0ga.jvq.149.83.IP)
[07:46:55] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[07:47:45] *** Quits: mkpankov (mkpankov@moz-lu7.0jj.23.84.IP) (Ping timeout: 121 seconds)
[07:48:57] *** Joins: kamilc__ (kamil@moz-6vuhjs.play-internet.pl)
[07:48:58] *** Joins: redShadow (redShadow@moz-47mtkq.retail.telecomitalia.it)
[07:49:11] *** Quits: xarcus (Mibbit@moz-55k.tmf.159.62.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:49:13] *** Quits: mbudde (mbudde@moz-v8g.lim.109.2.IP) (Ping timeout: 121 seconds)
[07:49:18] <achanda> I'm getting "crate-level attribute should be in the root module" when I put a #![feature(ip_addr)] in my lib.rs
[07:49:21] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[07:49:21] *** ChanServ sets mode: +o erickt
[07:49:33] <achanda> how do I get rid of it?
[07:50:09] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[07:50:09] <achanda> also unused attribute, #[warn(unused_attributes)] on by default
[07:50:52] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[07:51:06] <cmr> achanda: don't have `mod lib;` in a different file, http://doc.rust-lang.org/1.0.0-beta.2/book/crates-and-modules.html
[07:51:52] <achanda> thanks cmr
[07:53:05] <Layl> how can I produce an executable without a console window
[07:53:24] *** Joins: Thorn (Thorn@moz-gfo.20c.107.217.IP)
[07:53:51] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[07:53:59] *** Joins: nedp (nedp@moz-vg6vvt.bigpond.net.au)
[07:54:07] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[07:54:17] *** Quits: Kxepal (Miranda@moz-2urbaj.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[07:54:34] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[07:54:45] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:54:52] *** Joins: dstrbad (dstrbad@moz-dgmnbj.cable.xnet.hr)
[07:55:01] *** Joins: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP)
[07:55:42] <vadimcn> Layl: something like rustc -C link-args=-Wl,--subsystem,windows ...
[07:56:13] *** Quits: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP) (Quit: Leaving)
[07:56:22] *** Joins: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP)
[07:56:27] <Layl> vadimcn, what about with cargo
[07:56:30] *** Joins: Kxepal (Miranda@moz-tqbvro.pppoe.mtu-net.ru)
[07:56:55] <cmr> Layl: easiest way is to do https://github.com/XMPPwocky/vel0city/blob/master/.cargo/config and https://github.com/XMPPwocky/vel0city/blob/master/winlink.bat
[07:56:58] *** Quits: bren2010 (bren2010@moz-356.o3d.198.71.IP) (Quit: )
[07:57:07] <cmr> (ie, add the linker arguments to that gcc invocation)
[07:57:09] <frankmcsherry> is this meant to 404? https://doc.rust-lang.org/std/num/trait.Int.html
[07:57:17] <cmr> the -static-libgcc also avoids needing to distribute that dll I guess...
[07:57:17] *** Quits: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP) (Ping timeout: 121 seconds)
[07:57:35] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[07:57:38] <cmr> frankmcsherry: given that that trait doesn't exist, yes.
[07:57:50] <frankmcsherry> someone needs to have a chat with Google. 
[07:57:54] <frankmcsherry> so hard to find things. T.T
[07:58:06] <Layl> cmr, that helps at least with that, but the underlying problem remains that cargo seems to have no way at all to produce a runable output
[07:58:10] *** Joins: druzac (druzac@moz-hn17us.vc.shawcable.net)
[07:58:15] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[07:58:21] <Layl> which seems like kind of a big problem to have to me
[07:58:57] <vadimcn> yes, -static-libgcc produces executable without dependencies, but at the cost of breaking cross-module stack unwinding
[07:59:01] <terpstra_> Layl: you could try args=-Wl,-static-libgcc
[07:59:03] *** Quits: dstrbad (dstrbad@moz-dgmnbj.cable.xnet.hr) (Ping timeout: 121 seconds)
[07:59:37] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[08:00:15] <terpstra_> vadimcn: huh, i somehowoverlooked you previous answer! :P
[08:00:28] *** Quits: whidgle (Mibbit@moz-lbh.ira.101.140.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:00:29] *** Quits: giucam (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP) (Connection closed)
[08:00:44] *** Joins: giucam (giucam@moz-7gjibu.c665.0nib.2060.2001.IP)
[08:01:09] *** Quits: terpstra_ (terpstra@moz-a4595l.dip0.t-ipconnect.de) (Client exited)
[08:01:19] *** Quits: zeebo (zeebo@moz-6rqv1a.ut.comcast.net) (Ping timeout: 121 seconds)
[08:02:31] <vadimcn> I wish there was an easy-to-find place for platform-specific tips like this.   we used to have rust wiki...
[08:02:35] *** Joins: erz_ (erz@moz-n2p94l.broadband.corbina.ru)
[08:03:49] <Layl> I really rather just have cargo copy over the runtime dll
[08:03:58] *** Joins: gen_battle (genbattle@moz-4v0.gkd.16.182.IP)
[08:04:04] <Layl> I don't get why it doesn't just work by default
[08:04:17] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[08:05:41] *** Quits: erz (erz@moz-83ijfr.broadband.corbina.ru) (Ping timeout: 121 seconds)
[08:06:14] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[08:06:20] *** Joins: dstrbad (dstrbad@moz-dgmnbj.cable.xnet.hr)
[08:06:56] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[08:07:58] *** Quits: james4k (james@moz-0kqjsm.consolidated.net) (Ping timeout: 121 seconds)
[08:08:18] *** Quits: gen_battle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[08:09:10] <vadimcn> Layl: file a bug, cargo devs might agree
[08:09:32] <Layl> I've filed a bug https://github.com/rust-lang/cargo/issues/1544
[08:09:59] <Layl> meanwhile I quickly got someone to hallway test if just copying gccstuff.dll works
[08:10:00] <tomaka> *or* you could not use DLLs
[08:10:19] *** zz_kimundi is now known as kimundi
[08:10:39] <Layl> tomaka, I could if cargo didn't dynamically link gcc by default
[08:10:46] <tomaka> if you ship DLLs with your application, there's no reason (except legal) not to put the code inside the binary
[08:11:07] <Layl> as well, there's situations where you want DLLs
[08:11:22] *** Joins: anders (andars@moz-bsldst.sntcca.sbcglobal.net)
[08:11:23] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:11:24] <Layl> especially when you need to do things like have plugin DLLs
[08:13:00] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:13:34] *** Quits: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP) (A TLS packet with unexpected length was received.)
[08:13:45] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:14:29] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[08:15:43] <tomaka> oh you need some gcc stuff
[08:15:45] <tomaka> (just read above)
[08:16:01] <tomaka> if it's dynamically linked, it's probably a bug
[08:16:06] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[08:16:51] <tomaka> a simple rust executable doesn't need to ship any dll normally
[08:16:52] *** Joins: areski (areski@moz-t22j1v.user.ono.com)
[08:17:02] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[08:17:04] <Layl> still even if gcc wasn't dynamically linked, there's other things that are, for example C libraries
[08:17:31] <Layl> and, like I previously said, an application that has a plugin system will want dynamic linking as well
[08:17:41] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:17:41] <frankmcsherry> also 404s: https://doc.rust-lang.org/rand/trait.Rand.html. Arrived at by a search on doc.rust-lang.org for "rand"
[08:17:49] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[08:17:51] *** Joins: Phaiax (Phaiax@moz-aqopsj.hsi8.kabel-badenwuerttemberg.de)
[08:17:59] *** Joins: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com)
[08:18:10] <Layl> huh odd, frankmcsherry, std/rand redirects to rand/
[08:18:27] *** Joins: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl)
[08:18:56] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[08:19:38] <bluss> the docs are under  rand/rand
[08:21:47] *** Joins: eddyb-w32 (Mibbit@moz-6lf.c1f.226.193.IP)
[08:22:13] <frankmcsherry> bluss: ty! (( not clear why the docs are messed; they should be auto-generated, right? ))
[08:22:13] <eddyb-w32> Layl: I have, more stuff was breaking before :)
[08:22:33] <eddyb-w32> I ended up using a slightly older nightly
[08:22:35] <eddyb-w32> thread '<main>' panicked at 'No framebuffer objects, can't make a new one!', C:\ Users\elev\.cargo\git\checkouts\gfx_device_gl-ceded8a9e751584e\master\src\factory.rs:216
[08:22:40] *** Joins: laumann (thomas@moz-1i4.hq0.225.130.IP)
[08:22:56] <Layl> oh hey found a rust bug
[08:22:57] <tomaka> eddyb-w32: wrong channel?
[08:23:00] <eddyb-w32> oops
[08:23:02] <Layl> well, a std bug
[08:23:23] <eddyb-w32> tomaka: mibbit... broke and joined the wrong channel :|
[08:23:25] <Layl> PathBuf when created from "" will point at the current directory, but .exists() returns false
[08:23:47] <tomaka> eddyb-w32: are you trying that dark magic with shared opengl contexts?
[08:24:02] *** Parts: eddyb-w32 (Mibbit@moz-6lf.c1f.226.193.IP) ()
[08:24:10] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[08:26:01] *** Joins: zeebo (zeebo@moz-6rqv1a.ut.comcast.net)
[08:26:48] <frankmcsherry> "unresolved name `rand::thread_rng`"; are the examples at https://doc.rust-lang.org/rand/rand/index.html messed up, or just me? O.o
[08:27:43] <cmr> looks right to me, are you missing the `extern crate rand;` and dep in your Cargo.toml?
[08:27:53] *** Joins: mmatyas (mmatyas@moz-4lg94m.inf.u-szeged.hu)
[08:28:05] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[08:28:13] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[08:28:20] *** Quits: dstrbad (dstrbad@moz-dgmnbj.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[08:28:36] <frankmcsherry> cmr: Cargo dep. Ok (( thought it was attached as part of std, somehow, sorry. ))
[08:28:53] *** Joins: MaxV (MaxV@moz-1nu.kln.167.83.IP)
[08:29:37] <frankmcsherry> cmr: yar, adding that does it thanks. slightly weird way to indicate a missing dependency, but maybe I'm just being lazy. :)
[08:31:26] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:31:29] *** Joins: wldcordeiro (wldcordeiro@moz-metlmh.hmj8.a2nn.0007.2601.IP)
[08:31:36] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[08:32:31] <bluss> rand is from crates.io
[08:34:25] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[08:34:29] *** Quits: druzac (druzac@moz-hn17us.vc.shawcable.net) (Ping timeout: 121 seconds)
[08:36:59] <nathan7> frankmcsherry: it resolves a different librand, one internal to rustc
[08:37:42] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[08:37:51] <frankmcsherry> I see, I see. So searching for "rand" on doc.rust-lang.org was just a mis-fire; shouldn't have done that, then?
[08:40:11] *** Joins: espadrine_ (tyl@moz-qfr4fg.abo.wanadoo.fr)
[08:40:19] <bluss> it's not your fault, it's just a bit messy with the private crates
[08:40:56] *** Joins: mbudde (mbudde@moz-pr7.uis.144.94.IP)
[08:41:12] *** Quits: wldcordeiro (wldcordeiro@moz-metlmh.hmj8.a2nn.0007.2601.IP) (Ping timeout: 121 seconds)
[08:41:34] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[08:42:03] <huon> quickcheck is great
[08:43:19] <cmr> I love quickcheck
[08:43:33] <cmr> it's especially nice for testing FFI :)
[08:43:40] *** Quits: aatch (james@moz-4tpcve.pd7t.fvcm.e000.2406.IP) (Connection closed)
[08:44:18] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:44:30] <cmr> I've found some bugs in external libraries with it, most notably (I think) https://github.com/xianyi/OpenBLAS/issues/522
[08:45:36] *** Quits: dav (david@moz-kk5s6h.net) (Ping timeout: 121 seconds)
[08:45:36] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[08:45:42] *** Quits: jviereck (Adium@moz-tde1p4.ethz.ch) (Quit: Leaving.)
[08:46:00] <huon> cmr: oh nice
[08:46:02] *** Quits: mbudde (mbudde@moz-pr7.uis.144.94.IP) (Connection closed)
[08:46:11] <huon> hm, does cfg_attr not work with #[plugin]?
[08:46:12] *** Joins: mbudde (mbudde@moz-pr7.uis.144.94.IP)
[08:46:38] <cmr> hm, maybe not. I'm guessing that plugin handling happens before initial configuration?
[08:47:14] *** Joins: dav (david@moz-kk5s6h.net)
[08:47:29] *** Joins: dstrbad (dstrbad@moz-talqme.net.t-com.hr)
[08:48:06] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[08:48:23] *** Quits: dav (david@moz-kk5s6h.net) (Quit: leaving)
[08:48:40] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[08:48:54] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[08:49:17] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[08:49:59] <huon> cmr: you should totally write that up
[08:50:14] *** Quits: sirGusWrk (Gustav@moz-bo7slh.sme.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[08:50:19] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[08:50:28] <huon> (finding that bug)
[08:50:43] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[08:50:43] *** ChanServ sets mode: +o erickt
[08:50:47] <cmr> yeah, that'd be an interesting post.
[08:50:57] *** Joins: giucam_ (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP)
[08:51:08] <cmr> "Using modern systems languages to verify C libraries"
[08:51:19] <cmr> It's not that property based testing can't be done in C, it's just ultra annoying.
[08:51:39] *** Joins: kkimdev (kkimdev@moz-h9eu5l.59gh.vk5s.0000.2620.IP)
[08:51:42] <Layl> is the best way to try!() an option to make a helper function for the way the error should be interpreted?
[08:51:47] <cmr> and quickcheck is *so easy* to use.
[08:51:54] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[08:52:03] <kkimdev> Q: what would be the most idiomatic way to clone Box<[[f64;3]]> type?
[08:52:09] <cmr> (https://github.com/stainless-steel/blas/blob/master/tests/lib.rs)
[08:52:44] *** Quits: giucam (giucam@moz-7gjibu.c665.0nib.2060.2001.IP) (Ping timeout: 121 seconds)
[08:52:49] <jn> kkimdev: .clone() doesn't work?
[08:52:49] *** Joins: genbattle (genbattle@moz-n5c2kc.xtra.co.nz)
[08:53:07] <kkimdev> jn, type `[[f64; 3]]` does not implement any method in scope named `clone`
[08:53:15] <jn> :\
[08:53:32] <cmr> yeah, can't clone arrays.
[08:53:37] <kkimdev> yeah it was surprising to me too
[08:53:44] <bluss> .to_vec().into_boxed_slice() does that work?
[08:53:54] *** Joins: soma (Mibbit@moz-ef5.7ab.191.107.IP)
[08:54:15] <kkimdev> just curious, is there a reason that the array can't implement clone?
[08:54:19] <soma> hello! does rust support auto generate from_str method for enums?
[08:54:29] *** espadrine_ is now known as espadrine
[08:54:47] *** Joins: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP)
[08:54:53] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[08:55:04] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[08:55:22] <kkimdev> bluss, yeah working :)
[08:56:05] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[08:56:14] <kkimdev> bluss, I wished I could just use #[derive(Clone)] but OK :/
[08:56:29] *** Joins: smarks (smarks@moz-5vj.vr4.79.109.IP)
[08:56:57] <bluss> Box should impl Clone for Box<[T]>, I think it can
[08:57:16] <cmr> bluss: only if T: Clone, which arrays aren't.
[08:57:35] <bluss> so if it isn't T: Clone, why did .to_vec() work?
[08:57:38] <cmr> kkimdev: can't be generic over the length, and it's considered better to just wait for that feature than special-case traits for vectors.
[08:57:53] <bluss> cmr: [T; 3] is Clone if T: Clone
[08:58:13] <cmr> oh yeah, look at that, we implement it for all lengths up to 32.
[08:58:16] <bluss> if T: Copy actually (looking in the docs)
[08:58:18] <cmr> neato.
[08:58:24] <bluss> well semi-neato
[08:58:32] <cmr> better than nothing
[08:58:41] <cmr> I know we talked about it for a long time
[08:59:23] *** Joins: shellac (pldms@moz-c7026f.bris.ac.uk)
[08:59:27] *** Quits: mbudde (mbudde@moz-pr7.uis.144.94.IP) (Ping timeout: 121 seconds)
[09:00:15] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[09:00:18] *** Joins: llogiq (andre@moz-ebe0kb.unity-media.net)
[09:00:22] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[09:00:35] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[09:00:38] *** Quits: smarks (smarks@moz-5vj.vr4.79.109.IP) (Ping timeout: 121 seconds)
[09:01:17] *** Quits: basicdays (basicdays@moz-vreeoj.cable.rcn.com) (Ping timeout: 121 seconds)
[09:02:23] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[09:02:30] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[09:02:32] *** Joins: lenstr (lenstr@moz-1vt.vju.25.171.IP)
[09:03:10] <llogiq> Hi folks. Can someone help me setting up an external lint plugin? I have my lint in eq_op.rs registered as EQ_OP, and get the error: can't find crate for `eq_op`. My code is on https://github.com/llogiq/extra_lints
[09:03:14] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[09:06:13] *** Parts: insaneinside (user@moz-dgv9mb.customer.broadstripe.net) ("bye")
[09:06:20] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[09:06:41] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[09:06:55] *** Quits: danv (danv@moz-0js00c.iinet.net.au) (Quit: Linkinus - http://linkinus.com)
[09:07:11] <soma> Hello! why does slicing syntax a[..] not returning a slice but [T]?
[09:07:22] *** Joins: zippity (Mibbit@moz-hn2.0a1.91.183.IP)
[09:07:23] <huon> llogiq: you need [lib] plugin = true in the toml
[09:07:38] <huon> llogiq: e.g. https://github.com/BurntSushi/quickcheck/blob/master/quickcheck_macros/Cargo.toml#L16
[09:08:12] <zippity> HI, I have a BufReader to read each line but how I can detect the EOF, thanks
[09:08:21] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[09:09:03] *** Quits: kkimdev (kkimdev@moz-h9eu5l.59gh.vk5s.0000.2620.IP) (Quit: Leaving)
[09:09:03] *** Quits: soma (Mibbit@moz-ef5.7ab.191.107.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:09:34] *** Joins: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP)
[09:10:13] *** Joins: colinsurprenant (colin@moz-7co5v5.dyn.telefonica.de)
[09:10:37] <Layl> zippity, read_line returns a Result
[09:10:39] <duesenfranz_> is there something like itertools.combinations https://docs.python.org/2/library/itertools.html#itertools.combinations for rust?  i tried searching in the api, but it's really hard to search for something you don't know the name of
[09:10:44] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:10:53] <duesenfranz_> r/api/std
[09:11:36] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[09:13:54] <zippity> I didn't get any error
[09:14:16] <zippity> read_line get empty line when reaching the end of file
[09:14:25] <zippity> that's weird
[09:14:34] <Layl> how well does servo work embedded (once it compiles on a relatively recent nightly)
[09:14:53] *** Quits: genbattle (genbattle@moz-n5c2kc.xtra.co.nz) (Quit: Leaving)
[09:14:55] <zippity> match buff.read_line(&mut line){             Err(why) => println!("Read line error: {}", why),             Ok(_) => println!("One line: {}", line),        } 
[09:14:58] <zippity> this is it
[09:15:02] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[09:15:10] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[09:15:13] <bluss> Ok(0) is EOF
[09:15:18] <Layl> zippity, when you're reading an empty line, do you get the \n in it?
[09:15:30] <Layl> because if yes that's what you can use to distinguish between an empty line and EOF
[09:15:50] <zippity> no
[09:16:02] <zippity> I assume it's string = ""
[09:16:18] <llogiq> @huon: Thanks, that made it compile at least, however, it doesn't appear to pick up anything. I'll look if I can find some hints in the quickcheck repo.
[09:17:05] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[09:17:12] <bluss> duesenfranz_: I don't think it exists
[09:17:35] *** Quits: areski (areski@moz-t22j1v.user.ono.com) (Ping timeout: 121 seconds)
[09:18:25] *** Joins: forgottenone (forgottenon@moz-7c3.s8g.45.92.IP)
[09:18:37] <llogiq> Apparently ast::Nodes cannot be meaningfully compared with '=='.
[09:19:24] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[09:21:49] *** Joins: OmniMancer1 (omnimancer@moz-rv4.und.149.118.IP)
[09:21:56] *** Quits: Layl (Mibbit@moz-iachg4.sdb.prolocation.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:22:09] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[09:22:17] *** Joins: bitonic (bitonic@moz-433a13.31-151.libero.it)
[09:22:31] *** Quits: OmniMancer1 (omnimancer@moz-rv4.und.149.118.IP) (Connection closed)
[09:22:51] *** Joins: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl)
[09:23:33] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:23:48] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Connection closed)
[09:23:53] <zippity> @bluss, Ok(0) works, thanks
[09:24:31] <duesenfranz_> bluss: thanks anyhow!
[09:25:13] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[09:25:16] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[09:25:21] *** Joins: lucian (lucian@moz-iuo.htl.74.194.IP)
[09:25:55] *** Quits: alx (alx@moz-veqt2u.ifmo.ru) (Quit: WeeChat 1.2-dev)
[09:25:57] *** Joins: buzugu (baptiste@moz-5il26q.rev.sfr.net)
[09:26:03] *** Quits: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl) (Quit: WeeChat 1.1.1)
[09:26:21] *** Quits: ekiwi_ (kevin@moz-b1dekb.eduroam.rwth-aachen.de) (Client exited)
[09:27:09] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[09:27:10] *** Joins: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl)
[09:27:20] <buzugu> Hi! How can I work with unicode using the Rust beta ?
[09:27:39] <buzugu> The compiler told me about libunicode but I couldn't find anything on it
[09:29:07] <Yurume> buzugu: Rust string is already in Unicode.
[09:29:11] <Yurume> playbot: "안녕하세요!"
[09:29:12] -playbot- "\u{c548}\u{b155}\u{d558}\u{c138}\u{c694}!"
[09:29:33] <Mutabah> buzugu: Depends on the type of working you want to do
[09:31:23] <buzugu> Hm, I must've assumed too much from my one error then
[09:31:35] *** Joins: vmx (vmx@moz-t71rar.pools.vodafone-ip.de)
[09:31:37] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:31:54] <buzugu> I get `error: use of unstable library feature 'unicode': this functionality may only be provided by libunicode` when trying `for g in "a string".graphemes(true)`
[09:32:31] *** Quits: khades (Thunderbird@moz-ual.b31.186.31.IP) (Ping timeout: 121 seconds)
[09:32:36] <bluss> buzugu: those features have moved to external crates
[09:32:39] <munksgaard> How do I get a &[u8] from a String or &str ?
[09:32:49] <bluss> buzugu: search crates.io for unicode
[09:33:03] <Yurume> playbot: "like this".as_bytes()
[09:33:05] -playbot- [108, 105, 107, 101, 32, 116, 104, 105, 115]
[09:33:11] <bluss> buzugu: ta da https://crates.io/crates/unicode-segmentation
[09:33:38] <buzugu> Awesome, thanks so much!
[09:33:56] *** Quits: flan3002 (flan3002@moz-6vhgm3.de) (Ping timeout: 121 seconds)
[09:34:36] <munksgaard> Yurume: Thanks
[09:35:00] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[09:35:01] <kimundi> buzugu: Less essential parts of unicode library functions have moved out into external library crates, but string handling in Rust is unicode to the core
[09:35:11] <Ms2ger> steveklabnik, for https://github.com/rust-lang/rust/pull/24752/files , can the `ignore be removed?
[09:36:53] <buzugu> kimundi: Okay, thanks
[09:38:25] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[09:38:27] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[09:39:09] *** Quits: Guest47573 (Jorge@moz-7bh.ng6.177.186.IP) (Connection closed)
[09:40:26] *** Quits: edbond (edbond@moz-8st.7gv.108.109.IP) (Connection closed)
[09:43:01] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:43:28] *** Quits: ajitk (ajit@moz-6ht.i8n.51.106.IP) (Ping timeout: 121 seconds)
[09:43:36] *** Quits: m_kato (m_kato@moz-86b4bs.bitcat.net) (Quit: Leaving...)
[09:44:46] *** Joins: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net)
[09:45:11] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[09:45:19] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[09:46:01] *** Quits: colinsurprenant (colin@moz-7co5v5.dyn.telefonica.de) (Client exited)
[09:46:44] *** Quits: ville (ville@moz-nadkam.elisa-laajakaista.fi) (Quit:  )
[09:46:56] *** kimundi is now known as zz_kimundi
[09:47:20] *** Joins: m_kato (m_kato@moz-86b4bs.bitcat.net)
[09:47:30] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: Textual IRC Client: www.textualapp.com)
[09:47:55] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[09:48:52] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[09:50:47] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[09:50:49] *** Joins: mbudde (mbudde@moz-v8g.lim.109.2.IP)
[09:51:23] <nwin> What are the markdown rules for code tags? Are unicode chars disallowed?
[09:51:23] <llogiq> Yay! Now I check at least for equal literals as operands to comparisons or combining bit-ops
[09:51:25] *** Quits: fyolnish (fyolnish@moz-uup6dl.ocn.ne.jp) (Connection closed)
[09:51:59] *** Quits: dstrbad (dstrbad@moz-talqme.net.t-com.hr) (A TLS packet with unexpected length was received.)
[09:52:00] *** Quits: Yoric (Yoric@moz-no0.93r.245.63.IP) (Quit: ZNC - http://znc.in)
[09:53:10] <nwin> ok never mind forget my question
[09:53:37] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:54:14] *** Joins: Yoric (Yoric@moz-no0.93r.245.63.IP)
[09:56:07] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[09:56:19] *** Joins: ajitk (ajit@moz-6ht.i8n.51.106.IP)
[09:56:54] *** Joins: ville (ville@moz-nadkam.elisa-laajakaista.fi)
[09:57:30] *** Joins: r0ttis (r0ttis@moz-4e541i.adsl.tnnet.fi)
[09:57:40] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:58:22] *** Joins: dstrbad (dstrbad@moz-1gtctd.cable.xnet.hr)
[09:59:30] *** Joins: mkpankov (user@moz-h0n.sma.198.91.IP)
[10:00:19] <mkpankov> are there any drivers written in Rust? I'm arguing about it's application to system programming and need examples :)
[10:00:28] <mkpankov> *its'
[10:01:29] *** Joins: }ls{ (uhelp@moz-25pv1t.dip0.t-ipconnect.de)
[10:02:42] *** Quits: towler (Mibbit@moz-a66vj9.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[10:03:08] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[10:04:37] *** zz_kimundi is now known as kimundi
[10:05:09] *** Quits: arBmind (Andreas@moz-np1ab8.dyn.telefonica.de) (Quit: Leaving.)
[10:05:54] *** ChanServ sets mode: +o flaper87
[10:06:40] *** Quits: OmniMancer (OmniMancer@moz-6m1jrb.xtra.co.nz) (Ping timeout: 121 seconds)
[10:06:55] *** Joins: lyra2 (raikis@moz-0pbl66.static.zebra.lt)
[10:07:03] *** Joins: OmniMancer1 (OmniMancer@moz-6m1jrb.xtra.co.nz)
[10:07:07] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[10:08:16] *** Joins: imperio (Mibbit@moz-bpl.mgj.88.79.IP)
[10:09:07] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[10:10:22] *** Quits: lenstr (lenstr@moz-1vt.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[10:11:02] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[10:11:15] *** Joins: lenstr (lenstr@moz-1vt.vju.25.171.IP)
[10:11:30] *** Quits: lenstr (lenstr@moz-1vt.vju.25.171.IP) (Quit: Leaving...)
[10:12:08] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[10:12:18] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[10:12:47] *** Joins: mgottschlag (quassel@moz-np7o20.scc.kit.edu)
[10:12:48] *** Joins: arBmind (Andreas@moz-np1ab8.dyn.telefonica.de)
[10:13:21] *** Quits: andschwa (andschwa@moz-v32.q66.42.104.IP) (Ping timeout: 121 seconds)
[10:15:02] <nathan7> mkpankov: there are several people writing kernels, me included
[10:15:31] <nathan7> mkpankov: though mine is nowhere near interesting enough for me to release, some of the others are
[10:16:02] *** Joins: andschwa (andschwa@moz-v32.q66.42.104.IP)
[10:16:15] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[10:16:58] *** Parts: imperio (Mibbit@moz-bpl.mgj.88.79.IP) ()
[10:17:53] <liamfraser> does anyone know if we can pull request arbitrary target configurations?
[10:18:46] <liamfraser> as in I have a Raspberry Pi 2 specific set of features / cpu spec that I'm currently patching into arm-unknown-linux-gnueabihf
[10:18:47] <liamfraser> https://gist.github.com/liamfraser/004a5d1d45109c6e7f51
[10:19:05] <liamfraser> I've just added a couple of extra bits so need to check it compiles first
[10:20:02] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Connection closed)
[10:20:16] *** Joins: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th)
[10:20:38] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[10:20:47] <Ms2ger> Ah, bounds checks: http://arstechnica.com/security/2015/04/wi-fi-software-security-bug-could-leave-android-windows-linux-open-to-attack/
[10:22:35] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[10:22:49] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[10:22:53] <mkpankov> nathan7: doesn't matter, at the moment I would like just some links
[10:23:09] *** Quits: sysko (bst@moz-g9d.6sp.95.211.IP) (Ping timeout: 121 seconds)
[10:23:29] <nathan7> mkpankov: https://web.archive.org/web/20141225120322/https://github.com/rust-lang/rust/wiki/Operating-system-development
[10:23:30] <mkpankov> nathan7: I found thepowersgang/rust_os and rustboot, anything else?
[10:23:33] <nathan7> mkpankov: idk where that page went
[10:23:43] <mkpankov> oh nice
[10:23:46] <mkpankov> thanks!
[10:25:51] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:27:15] *** Joins: sleetdrop (sleetdrop@moz-pmb.klk.142.219.IP)
[10:29:19] <canndrew> is there a way to get `cargo build` to output a macro-expanded version of my code?
[10:29:31] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[10:29:54] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[10:30:18] <Ms2ger> -Z pretty-expanded, maybe
[10:30:43] <huon> canndrew: not cargo
[10:30:44] *** Joins: Layl (Mibbit@moz-iachg4.sdb.prolocation.net)
[10:31:21] <huon> the "easiest" way is getting the rustc invocation via `cargo build -v` and adding --pretty=expanded to that
[10:31:41] <canndrew> huon: cool, thanks
[10:32:36] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:32:44] <Layl> how come in the toml crate I can do some_string.parse() and it parses the string into a toml::Value
[10:33:04] <Ms2ger> The magic of FromStr and type inference
[10:33:40] <Layl> how can I do this explicitly
[10:33:56] <bluss> .parse::<toml::Value>() ?
[10:34:24] <Ms2ger> ^
[10:34:39] <Layl> oh I see, .parse is a member of String?
[10:34:47] <bluss> method on str
[10:35:05] <bluss> that uses the FromStr trait.. so everything that impls FromStr
[10:35:21] <Layl> I see
[10:35:33] *** Quits: zippity (Mibbit@moz-hn2.0a1.91.183.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:36:14] <Layl> this is one crazy type inference then
[10:36:24] <Layl> it goes through an entire match clause before it can find out what it is
[10:36:44] <aatch> Layl, it's fairly standard type inference.
[10:37:07] <bluss> Layl: that's how Rust works!
[10:37:10] <bluss> it's cool
[10:37:12] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:37:28] <aatch> Layl, type inference, at it's core, just collects a bunch of requirements for types, then finds types matching those requirements.
[10:37:31] <canndrew> I'm having fun writing syntax extensions. But how do I create a new InternedString?
[10:37:37] <Layl> I've seen F# type inference though, which can infer all types in a library by the way they're used
[10:37:38] *** Quits: choplin (choplin@moz-hqa.ohm.51.192.IP) (Connection closed)
[10:37:45] <bluss> just simple being generic on the expected return type is crazy compared to C++
[10:37:53] <Layl> it's a crazy kind of compile-time duck typing
[10:38:55] <aatch> Layl, wouldn't you still need whatever the F# equivalent of type-classes are to make it type check correctly?
[10:39:06] <Layl> yea you would
[10:39:21] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:39:25] <Layl> but it infers the type from usage
[10:39:54] <Layl> so say you've got a function: fn foo(bar) { bar.value } (rust for reference instead of F#)
[10:40:01] <Layl> it will infer all the types in that
[10:40:19] <Ms2ger> I sure am glad Rust doesn't do that
[10:40:37] <Layl> you can still give an explicit type but it sure is crazy sometimes
[10:40:42] <aatch> Well Rust does do it, it's just limited to a single function/method
[10:41:02] <Ms2ger> By "that", I mean the signature
[10:41:36] *** Joins: farcaller (farcaller@moz-8bdd0s.prod.ihdev.net)
[10:41:45] <aatch> Technically we do, for closures.
[10:41:56] <canndrew> ah nvm
[10:42:16] <Layl> aatch, even more, say you've got: fn foo(in) { in.some_value } and fn bar() { let value = foo(thing); value.bar; } and you've got 2 types with some_value and 2 types with bar, it will infer something that makes that compile
[10:42:24] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[10:42:29] *** Joins: dr_y (Mibbit@moz-ekk.6pr.47.77.IP)
[10:42:56] *** Joins: maro (maro@moz-r706nt.highway.telekom.at)
[10:43:09] <aatch> Layl, I am aware. I don't know the exact typing algorithm F# does, but I'd be surprised if was much different to Hindley-Milner
[10:44:02] *** Quits: sleetdrop (sleetdrop@moz-pmb.klk.142.219.IP) (Ping timeout: 121 seconds)
[10:44:26] *** Quits: iopq (Mibbit@moz-48stfr.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:44:50] <Mutabah> Is it possible to see a lifetime annotated version of your source?
[10:44:52] <VShell> personally, I like being able to see what type a function is without having to run a tool to figure it out.
[10:45:10] <aatch> Mutabah, --pretty typed might do it.
[10:45:29] <Layl> VShell, of course, F# is used in visual studio where you can just hover to see it
[10:45:41] <Layl> when you don't have tools like that it must be a nightmare
[10:45:43] <Mutabah> aatch: Doesn't really, it didn't put the implicit +'static bound on a trait object (which is aparently the default for boxed trait objects?)
[10:46:26] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[10:46:53] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[10:47:02] <VShell> Layl: yeah. most languages don't have the benefit of the One True IDE like Microsoft can push. I think most people who like open-source languages would be upset at being told they can't use their favourite editor, tbh, unfortunately. (I know I'd be upset that I can't realistically write quick programs in nano.)
[10:47:10] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[10:47:50] *** Joins: sirGusWrk (Gustav@moz-bo7slh.sme.bredbandsbolaget.se)
[10:48:48] <Mutabah> aatch (or others): Any idea on this? https://gist.github.com/thepowersgang/4b3326810227b1817e45
[10:49:24] <VShell> Layl: I suspect that when there's eventually a decent IDE for Rust, it'll be possible to just write fn foo(bar, baz) { ... } and have the IDE figure out what the types involved are from your code to fill them out automatically, which'd be interesting to see.
[10:50:02] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[10:50:08] <aatch> Mutabah, what if you pass zip &iter_bufs instead?
[10:50:24] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:50:26] <Mutabah> :/ iter_bufs is an interator
[10:50:46] <Mutabah> (I decomposed that one line to make it a little more readable, same lifetime error occurred before that)
[10:50:58] *** Quits: cptroot (Mibbit@moz-n169l8.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[10:51:37] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[10:51:37] *** ChanServ sets mode: +o erickt
[10:51:46] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[10:52:20] *** Joins: thelastinuit (thelastinui@moz-doh.aqt.240.148.IP)
[10:52:21] <Mutabah> I feel like I've done something dumb relating to the PhysicalVolume::read definition, but I don't see how this is causing an error
[10:52:30] <bluss> Mutabah: did you try enclosing it with an extra { }
[10:52:41] <Mutabah> In theory, it should be OK (both self.dev and buf live longer than the return value)
[10:52:46] <bluss> Mutabah: also you are reusing the binding name dst (not a problem, but it's hard er to read)
[10:53:00] <bluss> Mutabah: put { before let iter_bufs and } after the for loop 
[10:53:13] <Layl> can't wait to see a decent IDE for rust that also works on windows
[10:53:57] <bluss> Mutabah: it's simple, iter_bufs is still in scope to the end of the function, but you try to use the original dst too on the last line.. dst.len()
[10:54:26] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[10:54:33] <Mutabah> bluss: nice try, but no
[10:55:01] *** Quits: dstrbad (dstrbad@moz-1gtctd.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[10:55:07] <bluss> oh? :(
[10:55:40] <Mutabah> Adding those extra braces changed nothing, and in the original code (before moving those two iterators into let bindings) the same error occurred (pointing to the for loop)
[10:56:00] <Mutabah> Plus, it's not a "immutable borrow of mutably borrowed variable" error
[10:56:22] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[10:56:24] <bluss> but it would be a problem if it did get past the first error
[10:56:31] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[10:56:31] <Mutabah> bluss: Possibly
[10:56:39] *** Quits: shellac (pldms@moz-c7026f.bris.ac.uk) (Connection closed)
[10:56:48] <bluss> surely. anyway
[10:57:49] <aatch> Mutabah, hmm, this a tough one.
[10:57:56] <Mutabah> aatch: Yeah
[10:58:10] <Mutabah> I've been head-bashing this (or a variant) for the past day or so
[10:58:28] *** kimundi is now known as zz_kimundi
[10:58:41] *** Quits: sjj (sjj@moz-7s3.mbd.125.202.IP) (Connection closed)
[10:58:58] <aatch> I thought the dev.read method would be part of it but unless your version is notably different to the one in the rust_os repo, it shouldn't cause an issue.
[10:59:17] *** Joins: jviereck (Adium@moz-mbj2cc.58bf.g469.067c.2001.IP)
[10:59:24] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[10:59:26] <Mutabah> aatch: My current local version is in the gist
[10:59:30] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[10:59:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[10:59:42] *** Quits: llogiq (andre@moz-ebe0kb.unity-media.net) (Quit: Verlassend)
[10:59:43] <Mutabah> aatch: Dunno how different they are, I've been tweaking the prototype and pushing kinda often
[11:00:04] <Layl> following the concept that non-member non-friend functions instead of member functions improve a class' encapsulation, where is the best place to put such functions in a rust module, since within the same module still makes them friends
[11:00:11] <aatch> Mutabah, oh, so it is.
[11:00:17] <bluss> Mutabah: I don't understand why it needs a longer borrow for that self.dev.read call
[11:00:50] <liamfraser> has anyone seen the error: unresolved name `core::intrinsics::discriminant_value` when compiling rustc?
[11:00:53] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[11:01:12] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:01:36] <Mutabah> ... huh... this is interesting
[11:01:42] *** Joins: shellac (pldms@moz-c7026f.bris.ac.uk)
[11:01:56] <Mutabah> I just tried replacing the try expression with just a let _ = self.dev.read
[11:02:01] *** Joins: dstrbad (dstrbad@moz-1gtctd.cable.xnet.hr)
[11:02:07] *** Quits: playjax (chatzilla@moz-00hrnr.optusnet.com.au) (Ping timeout: 121 seconds)
[11:02:10] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[11:02:13] <aatch> Mutabah, hmm, I think the PhysicalVolume::read method is at fault here.
[11:02:29] *** Quits: freefall (ff@moz-7v49kj.rana.at) (A TLS packet with unexpected length was received.)
[11:02:50] <Mutabah> Ok! The trigger is the .wait() call
[11:02:55] *** Joins: sysko (bst@moz-qau.e3g.230.116.IP)
[11:03:39] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Quit: Leaving)
[11:03:49] <Mutabah> oh no...
[11:03:53] <Mutabah> oh please no rustc
[11:04:34] <Mutabah> Cause : https://github.com/thepowersgang/rust_os/blob/master/Kernel/Core/async/mod.rs#L70
[11:04:45] <Layl> what defines if a function can or can not access a struct's private fields
[11:04:49] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:04:55] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[11:05:14] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:05:27] <aatch> Layl, a function can only access a struct's private fields if it's in the same module.
[11:05:52] <Layl> aatch, what about a child module that's in the same file?
[11:05:55] *** Quits: jviereck (Adium@moz-mbj2cc.58bf.g469.067c.2001.IP) (Quit: Leaving.)
[11:06:04] <aatch> Layl, not sure, I don't think so though.
[11:06:15] <Mutabah> aatch: The cause was 1. rustc not correctly mentioning 'static requirements on trait objects
[11:06:23] <bluss> Mutabah: it feels like the lifetime bug with the last statement of a function, but I thought that was fixed
[11:06:33] <bluss> Mutabah: oh
[11:06:42] <Mutabah> aatch: and primarily, an "impl Waiter" block providing the .wait() method, which had an implicit +'static
[11:06:44] <Layl> if I were to do: mod utils {} pub use utils::*; and within a child module would make it inaccessable as well, would it appear like it's in the same module to the outside but still be separated?
[11:07:27] *** Joins: havarnov (Mibbit@moz-n2g.lsg.130.95.IP)
[11:08:14] * Mutabah smacks head against desk (metaphorically, not enough space on this desk)
[11:08:19] <aatch> Layl, no idea, try it and see. I've been through several changes in privacy and most of my Rust programming is either random experiments in which I make everything public, or in the compiler where that kind of encapsulation is less important.
[11:08:44] *** Joins: Guest67 (textual@moz-og7.cn8.251.116.IP)
[11:08:54] <Layl> I don't know really what the advantages would be of having fields public in rust
[11:09:00] <Layl> other than less typing for accessors
[11:09:10] <aatch> Layl, that's pretty much it.
[11:09:14] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[11:09:24] <Layl> well that can be fixed with a syntax extension right?
[11:09:34] *** Joins: Kynes (Kynes@moz-j2us35.mit.edu)
[11:10:02] <Layl> some kind of derive(Accessors)
[11:10:18] <Layl> with #[pub_get, pub_set] on fields or something like that
[11:10:22] <Guest67> Evening party, i'm trying to do re.replace_all(r"(?P<m>x|ch|ss|sh)$", "$1es"). Input "switch" is giving me "swit", I'm guessing because it's treating $1es as the entire named group. Tips?
[11:11:02] *** Guest67 is now known as BageDevimo
[11:11:10] *** Joins: sleetdrop (sleetdrop@moz-n2m.klk.142.219.IP)
[11:12:19] <aatch> burntsushi, ping
[11:12:32] <Layl> interesting how powerful rust metaprogramming is
[11:12:55] *** Joins: TheLemonMan (lemonboy@moz-mbnp7s.26-151.libero.it)
[11:13:08] *** Joins: andre (andre@moz-rnd.3qv.76.201.IP)
[11:13:27] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[11:13:44] *** Joins: yuja (yuja@moz-3k3neh.so-net.ne.jp)
[11:14:06] *** Joins: jviereck (Adium@moz-itslu9.ethz.ch)
[11:14:20] <BageDevimo> not that even when I removed the named group, it still fails.
[11:14:30] *** Quits: jviereck (Adium@moz-itslu9.ethz.ch) (Quit: Leaving.)
[11:14:31] <BageDevimo> note* rather.
[11:15:10] <Mutabah> aatch: https://github.com/rust-lang/rust/issues/24768
[11:15:27] <Mutabah> aatch: I'm heading off for a few hours, but I do have a ticket about the issue I saw.
[11:15:49] *** Joins: jviereck (Adium@moz-mbj2cc.58bf.g469.067c.2001.IP)
[11:16:02] *** Quits: jviereck (Adium@moz-mbj2cc.58bf.g469.067c.2001.IP) (Quit: Leaving.)
[11:16:36] *** Joins: bytewise (bytewise@moz-s5g.qas.61.134.IP)
[11:17:00] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[11:17:05] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[11:17:24] *** Joins: alonlevy (alon@moz-vaf.plq.19.46.IP)
[11:17:39] *** Quits: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl) (Quit: Leaving...)
[11:17:50] *** Joins: jviereck (Adium@moz-mbj2cc.58bf.g469.067c.2001.IP)
[11:18:04] <Layl> I'm actually really liking this
[11:18:19] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Connection closed)
[11:18:26] <Layl> that mod utils {} pub use self::utils::*; trick for separation
[11:18:40] <Layl> it really allows me to categorize my non member non friend functions
[11:18:52] <mkpankov> Mutabah: thepowersgang is you? :)
[11:18:52] * Mutabah is away (Screen Detached)
[11:19:16] *** Joins: smarks (smarks@moz-5vj.vr4.79.109.IP)
[11:19:47] *** Joins: untitaker (untitaker@moz-donca6.highway.telekom.at)
[11:20:21] *** Quits: mbudde (mbudde@moz-v8g.lim.109.2.IP) (Ping timeout: 121 seconds)
[11:21:07] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[11:21:24] <Layl> how can I use a relative path in "use"?
[11:21:45] *** Quits: jviereck (Adium@moz-mbj2cc.58bf.g469.067c.2001.IP) (Quit: Leaving.)
[11:21:51] <mkpankov> Layl: super:: or self::
[11:22:04] <aatch> Layl, `self::` is the current module, `super::` is the parent module
[11:22:22] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[11:22:24] <aatch> you can have multiple `super::`s in a path.
[11:22:37] *** Quits: untitaker_ (untitaker@moz-7buc2d.highway.telekom.at) (Ping timeout: 121 seconds)
[11:22:59] <Layl> aatch, alright thanks
[11:23:31] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[11:23:37] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[11:23:54] <Layl> hm, if I've got a "pub use utils::*;" and utils has a "use super::*;" does that cause problems?
[11:24:15] *** Joins: saml_ (saml@moz-rkfmct.res.rr.com)
[11:24:31] <Layl> seems it does, it isn't liking it though it's giving seemingly unrelated problems
[11:24:32] <aatch> Layl, probably
[11:24:45] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Ping timeout: 121 seconds)
[11:24:50] <aatch> Layl, it normally complains about unresolved symbols
[11:25:26] <Layl> yea it does that
[11:25:35] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[11:26:49] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:27:45] *** Joins: nical (nical@moz-jp38c1.lmuk.1rfi.0450.2001.IP)
[11:27:46] *** Joins: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl)
[11:28:16] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[11:28:33] *** Quits: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl) (Connection closed)
[11:28:34] *** Quits: aravindavk (aravinda@moz-m6j.f0d.244.121.IP) (Quit: Konversation terminated!)
[11:28:59] <bluss> MarkerTrait is removed now in the nightly, so fix your crates if applicable
[11:29:01] <robertknight_ic> What's the recommended alternative to String::as_str , since that is currently marked as unstable?
[11:29:21] <aatch> Know what I love, that the new coherence rules allow for both `impl Add<f32> for MyType` *and* `impl Add<MyType> for f32`
[11:29:27] <bluss> robertknight_ic: .as_ref() or just &foo or just &foo[..]
[11:29:37] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[11:29:39] <aatch> robertknight_ic, nothing? Most of the time just doing &s wil work fine.
[11:29:52] <aatch> I didn't even realise we *had* as_astr
[11:29:52] *** Joins: ytain (ytain@moz-aope4o.dsl.teksavvy.com)
[11:29:55] <BageDevimo> where might I found the test suite for the regex crate?
[11:29:56] <aatch> as_str*
[11:30:26] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[11:31:02] *** Joins: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr)
[11:31:23] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[11:31:57] *** Quits: sleetdrop (sleetdrop@moz-n2m.klk.142.219.IP) (Ping timeout: 121 seconds)
[11:31:57] *** Joins: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl)
[11:32:09] *** Quits: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl) (Connection closed)
[11:32:10] *** Joins: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl)
[11:32:11] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[11:32:24] *** Quits: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl) (Quit: Leaving...)
[11:33:11] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[11:33:24] *** Joins: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl)
[11:33:35] *** Quits: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr) (Quit: WeeChat 1.1.1)
[11:34:18] *** Joins: ekiwi (kevin@moz-b1dekb.eduroam.rwth-aachen.de)
[11:34:20] *** ekiwi is now known as ekiwi_
[11:34:49] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[11:35:26] *** Joins: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr)
[11:35:51] *** Joins: Nextra (Nextra@moz-4g173n.dip.osnanet.de)
[11:36:08] *** Quits: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr) (Quit: WeeChat 1.1.1)
[11:36:15] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[11:36:22] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Ping timeout: 121 seconds)
[11:38:31] *** Joins: freefall (ff@moz-g4vdbq.ip.as43289.net)
[11:39:40] *** Joins: lenstr (lenstr@moz-lno.vju.25.171.IP)
[11:39:41] *** Quits: alonlevy (alon@moz-vaf.plq.19.46.IP) (Connection closed)
[11:40:43] *** Quits: bytewise (bytewise@moz-s5g.qas.61.134.IP) (Quit: Quit)
[11:41:27] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[11:42:04] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[11:42:13] <Layl> how can I specify a type in a match arm for an enum
[11:42:52] *** Joins: mbudde (mbudde@moz-v8g.lim.109.2.IP)
[11:43:06] *** Joins: xyproto (alexander@moz-3vd7v3.members.linode.com)
[11:43:11] *** Quits: Temur (Tarmashirin@moz-93d.c6u.199.117.IP) (Connection closed)
[11:43:30] *** Joins: Temur (Tarmashirin@moz-93d.c6u.199.117.IP)
[11:43:34] <havarnov> BageDevimo: https://github.com/rust-lang/regex
[11:43:47] *** Joins: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr)
[11:43:53] <BageDevimo> but there is no tests that I can see? only some for regex!
[11:43:58] *** Quits: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr) (Quit: WeeChat 1.1.1)
[11:44:19] *** Joins: rkruppe (chatzilla@moz-5umokk.hrz.tu-darmstadt.de)
[11:44:27] *** Joins: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr)
[11:44:34] <xyproto> Hi, I have a repository with samples for using SDL2 from all kinds of languages. Rust is one of them, and worked great, until recently. Could someone please give the rust sample a spin and see if it works for them, with SDL2 + the latest version of Rust? It's the rust-cargo folder in the doesnotbuild branch in the https://github.com/xyproto/hello_sdl2 repo.
[11:44:55] *** Quits: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr) (Quit: WeeChat 1.1.1)
[11:45:10] <BageDevimo> @havarnov: I think my problem is to do with this: https://github.com/rust-lang/regex/blob/0709ef17bbc339021704143b5cf47c7d14b31602/src/re.rs#L792 -> time to make a patch I guess. :)
[11:45:21] *** Joins: Hannibal_Smith (nico@moz-ucg29b.retail.telecomitalia.it)
[11:45:25] <Layl> xyproto, most likely the compiler got updated
[11:45:37] <xyproto> Layl: yes, that is likely.
[11:45:44] *** Quits: commandoline (commandolin@moz-s9gqj7.marten-de-vries.nl) (Ping timeout: 121 seconds)
[11:45:49] <Layl> xyproto, have you tried running "cargo update" on your local build machine to update all dependencies
[11:45:55] <xyproto> Layl: so it's probably best to wait it out?
[11:45:56] <Layl> it might be that a dependency isn't building
[11:46:08] <xyproto> Layl: I tried removing the .cargo directory
[11:46:38] <Layl> the .cargo directory is just for local settings, generally used to tell cargo where to find libraries
[11:46:53] <xyproto> Layl: I see. I'll try the update command as well. Thanks!
[11:46:56] <Layl> the Cargo.lock file is what tells cargo what versions of libraries to use
[11:47:07] <Layl> and "cargo update" is the proper way to update that file
[11:47:26] <xyproto> Layl: I also tried removing Cargo.lock. I think the dependencies were updated.
[11:47:29] *** Joins: commandoline (commandolin@moz-s9gqj7.marten-de-vries.nl)
[11:47:33] <xyproto> Layl: I'll try the cargo update command now.
[11:48:20] <Layl> cargo update won't do much if you've already removed the Cargo.lock
[11:48:53] <xyproto> Layl: ok. Perhaps just waiting for the SDL2 library to be updates is the way to go, then.
[11:48:53] *** Joins: proclus (user@moz-i6nqh2.fios.verizon.net)
[11:49:01] <xyproto> *updated
[11:49:35] <Layl> I'm not sure if the sdl library used there is maintained anymore, hold on
[11:49:49] <xyproto> It's probably relatively easy to update the sdl2 deps for Rust, but I'm not an experienced Rust user.
[11:49:55] *** Quits: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net) (Ping timeout: 121 seconds)
[11:50:00] <Layl> oh it is being updated
[11:50:04] <Layl> was updated 5 hours ago in fact
[11:50:14] <xyproto> awesome
[11:50:14] *** Joins: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net)
[11:50:22] <xyproto> I'll give the new version a spin
[11:50:28] <Layl> oh, be sure that you're building with rust nightly
[11:50:30] <Layl> and not beta
[11:50:32] <Layl> that might be the problem
[11:51:02] <xyproto> Layl: I'm using rustc 1.0.0-dev (built 2015-02-23)
[11:51:19] <Layl> 2-23? that's hella old
[11:51:29] <xyproto> it's the official Arch Linux version
[11:51:34] <Layl> yea and it's hella old
[11:51:50] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[11:51:59] <SneakySnake> xyproto: Use multirust. There is a package in the AUR
[11:51:59] <xyproto> not compared to the release frequency of other compilers
[11:52:04] <Layl> keep in mind that rust's still in development and new versions come out daily
[11:52:07] <xyproto> SneakySnake: ok, will try that. Thanks
[11:52:37] <xyproto> but 1.0.0-dev from 02-23 is the latest release, right?
[11:52:43] <SneakySnake> No
[11:52:45] <Layl> rust has an extremely high release frequency compared to other compilers, though when it hits 1.0.0 release (not dev or beta), it should stabilize
[11:53:03] <SneakySnake> xyproto: rustc 1.1.0-nightly (21f278a68 2015-04-23) (built 2015-04-24) is the latest nightly
[11:53:17] <xyproto> it's an orphan!
[11:53:26] <bluss> xyproto: latest stable release is 1.0.0-beta.2 from last week. And then nightly snapshots every day
[11:53:35] <xyproto> No wonder it is flagged out-of-date and hasn't been updated
[11:53:39] <havarnov> BageDevimo: make an issue on github to start a discussion. It's really easy to implement the expand function with the api without using expend()
[11:54:03] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:54:06] <BageDevimo> i'm just going to make sure i've got the right idea.
[11:54:42] <BageDevimo> when i drop that regex into a regex tester, it doesn't match $1es, but $1
[11:54:45] <BageDevimo> so
[11:54:47] <BageDevimo> bah
[11:54:53] *** Joins: eibwen (eibwen@moz-dhk8m2.dip0.t-ipconnect.de)
[11:55:02] <xyproto> SneakySnake: I see. I'll adopt and update it, but it will be hard to keep it up to date every week.
[11:55:25] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[11:55:27] <SneakySnake> xyproto: Which package are you talking about?
[11:55:31] *** Quits: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP) (Ping timeout: 121 seconds)
[11:55:44] <SneakySnake> I told you to use multirust. It's well-maintained.
[11:55:46] *** Joins: adjivas (adjivas@moz-t655t6.abo.wanadoo.fr)
[11:56:02] <xyproto> SneakySnake: the rust package in [community]
[11:56:06] *** Joins: amyers (amyers@moz-f2k.1cm.177.128.IP)
[11:56:32] *** Joins: laogao (laogao@moz-m3ssu7.members.linode.com)
[11:56:42] <SneakySnake> xyproto: You don't need to update it every week. Just update it to the latest beta which is 1.0.0-beta.2
[11:56:56] <xyproto> SneakySnake: in progress :)
[11:57:19] <havarnov> BageDevimo: https://github.com/rust-lang/regex/pull/80
[11:57:23] *** Quits: proclus (user@moz-i6nqh2.fios.verizon.net) (Ping timeout: 121 seconds)
[11:57:38] <havarnov> BageDevimo: I think that was fixed the other day...
[11:57:49] <BageDevimo> ah, so I should move to nightly. :)
[11:57:50] *** Quits: r0ttis (r0ttis@moz-4e541i.adsl.tnnet.fi) (Quit: (null))
[11:58:04] <BageDevimo> merged 21 hours ago
[11:59:45] <havarnov> doesn't #[unstable]/#[stable] work for 3rd party libraries?
[11:59:53] *** Joins: playjax (chatzilla@moz-kv3nv0.optusnet.com.au)
[12:00:19] *** Quits: mgottschlag (quassel@moz-np7o20.scc.kit.edu) (Ping timeout: 121 seconds)
[12:00:59] <BageDevimo> @havarnov: can you explain that further?
[12:01:12] <SneakySnake> havarnov: It used to, but now it's reserved for the standard library
[12:01:19] *** Joins: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr)
[12:01:41] <SneakySnake> I wonder if an ability to mark item stability for user libraries will be reintroduced later
[12:01:53] <SneakySnake> It would be useful
[12:01:57] <aatch> SneakySnake, it's planned to be.
[12:02:08] <SneakySnake> At least unstable and deprecated
[12:02:48] *** Quits: Syneh (quassel@moz-948.gp8.139.37.IP) (Connection closed)
[12:02:50] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[12:02:54] *** Joins: Syneh (quassel@moz-948.gp8.139.37.IP)
[12:03:07] <aatch> The current unstable/stable/deprecated attributes are designed around the Rust release channel, not for general-purpose use.
[12:03:13] <BageDevimo> i've got my Cargo.toml saying: [dependencies.regex]
[12:03:13] <BageDevimo> regex = "0.1.29"
[12:03:20] *** Joins: khades (Thunderbird@moz-ual.b31.186.31.IP)
[12:03:43] <BageDevimo> which was updated 5 days ago, so could i just use the github specifically right?
[12:03:58] *** Joins: Altazimuth_ (Altazimuth@moz-rb7u6p.skybroadband.com)
[12:04:35] <havarnov> BageDevimo: just use git = "https://github.com/rust-lang/regex.git"
[12:05:08] <havarnov> SneakySnake: it would be very useful. thanks for the info :D
[12:05:10] *** Joins: alonlevy (alon@moz-p48.q13.159.94.IP)
[12:05:23] <BageDevimo> beauty, fixed it. thanks havarnov! :)
[12:05:30] *** Joins: Tarmashirin (Tarmashirin@moz-93d.c6u.199.117.IP)
[12:05:44] <burntsushi> BageDevimo: i haven't read all the scrollback about regex, but what's up?
[12:06:19] <BageDevimo> I had the neighbouring replacement issue that was fixed with https://github.com/rust-lang/regex/pull/80
[12:06:36] <burntsushi> BageDevimo: ah! and i have not made a new release yet. i'll do that now.
[12:06:37] *** Quits: Temur (Tarmashirin@moz-93d.c6u.199.117.IP) (Connection closed)
[12:06:41] <BageDevimo> obviously moving from crates.io -> github verion fixed it. :)
[12:06:44] <burntsushi> sorry about that!
[12:06:47] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[12:06:49] *** Quits: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[12:06:49] *** Joins: agjacome (agjacome@moz-ma9sfa.dynamic.jazztel.es)
[12:08:21] <BageDevimo> Not even close to your fault!
[12:09:12] *** Joins: mate (Mibbit@moz-tpjl46.co.comcast.net)
[12:09:32] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Connection closed)
[12:10:21] *** Joins: locks (sid130@moz-11300h.brockwell.irccloud.com)
[12:10:26] <Layl> the git = uses master by default right
[12:10:59] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[12:11:48] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[12:12:18] <burntsushi> BageDevimo: all right, crates.io has been updated
[12:12:27] <burntsushi> Layl: yes
[12:13:05] <aatch> Ok, I now feel less guilty about using the horribly unstable SIMD support in Rust, I have a non-SIMD implementation too!
[12:13:25] *** Quits: khades (Thunderbird@moz-ual.b31.186.31.IP) (Ping timeout: 121 seconds)
[12:14:20] *** Joins: fyolnish (fyolnish@moz-3n24u8.so-net.ne.jp)
[12:14:40] *** Joins: KennyAlive (Mibbit@moz-s08.8qj.164.46.IP)
[12:14:47] <aatch> Also, while I think most machines can handle a 4-wide single-precision float vector, I'm less sure how many support 4-wide double-precision
[12:15:07] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[12:15:10] *** Quits: KennyAlive (Mibbit@moz-s08.8qj.164.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:15:39] *** Joins: blaztinn_ (blaztinn@moz-7sp886.dynamic.t-2.net)
[12:15:47] *** Quits: laogao (laogao@moz-m3ssu7.members.linode.com) (Connection closed)
[12:15:55] *** Quits: blaztinn_ (blaztinn@moz-7sp886.dynamic.t-2.net) (Client exited)
[12:17:04] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[12:17:04] *** Joins: tomprogrammer (thomas@moz-gehkpe.tr5r.qept.4dd0.2001.IP)
[12:17:24] *** Quits: alonlevy (alon@moz-p48.q13.159.94.IP) (Ping timeout: 121 seconds)
[12:17:39] *** Joins: blaztinn_ (blaztinn@moz-7sp886.dynamic.t-2.net)
[12:17:44] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[12:18:53] *** Joins: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com)
[12:21:46] *** Joins: meh (meh@moz-p5gc2m.42-151.net24.it)
[12:22:02] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[12:22:11] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[12:24:41] *** Quits: if_e1se (uid16886@moz-js7dlj.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[12:24:43] <mate> 4 wide double requires AVX, which was first on sandy bridges. So Sandy/haswell/broadwell have it
[12:25:17] <mate> and ivy
[12:26:31] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[12:26:35] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[12:26:35] *** ChanServ sets mode: +o jdm
[12:26:41] *** Joins: Tuba (Tobba@moz-65g.7ki.21.217.IP)
[12:28:47] *** Joins: twipeD (wipeD@moz-hnda1k.dip0.t-ipconnect.de)
[12:28:52] <tomaka> It is currently possible to have both a method named "foo" on a type, and implement a trait which has a method named "foo" on the same type
[12:28:54] <tomaka> example: http://is.gd/moWPo5
[12:28:58] <tomaka> Is that a feature or a bug?
[12:29:13] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[12:29:14] <tomaka> I'd like to use that fact, but I don't want it to be "fixed" later
[12:29:21] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:29:23] *** Quits: buzugu (baptiste@moz-5il26q.rev.sfr.net) (Client exited)
[12:29:53] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[12:30:07] *** Quits: popow (Thunderbird@moz-03f.kd0.252.223.IP) (Connection closed)
[12:30:15] *** Joins: mahdi (mahdi@moz-ipf.n3s.129.78.IP)
[12:30:23] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[12:31:04] *** Quits: jiojiajiu (anonymous@moz-trc2j7.asianet.co.th) (Ping timeout: 121 seconds)
[12:31:11] <Rym> tomaka: it's feature, you can use UFCS to disambiguate
[12:31:21] <frankmcsherry> Is it weird that the profiler tells me that 22% of my 24s runtime is in Vec::drop? (( yes, right? :) ))
[12:31:33] <tomaka> Thanks
[12:31:43] <tomaka> yeah I tried that: http://is.gd/56NZV2
[12:32:13] *** Joins: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net)
[12:34:30] *** Quits: mahdi (mahdi@moz-ipf.n3s.129.78.IP) (Ping timeout: 121 seconds)
[12:35:23] *** Quits: copumpki_ (copumpkin@moz-regr09.dyn.optonline.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:36:31] *** Quits: BageDevimo (textual@moz-og7.cn8.251.116.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:37:05] *** Joins: skade (skade@moz-4eh.d50.201.212.IP)
[12:37:11] *** Joins: soma (Mibbit@moz-cp3.gb0.226.159.IP)
[12:38:53] <soma> Hello! I have a method : fn init(&mut self) {...}; when will it return the mut borrow?
[12:39:16] *** Joins: egor (egor@moz-dbb.3j0.166.192.IP)
[12:39:25] <tomaka> soma: When the function returns
[12:39:47] <tomaka> that's because "init" doesn't return anything
[12:40:00] <tomaka> if it returned something, it could extend the borrow
[12:40:11] *** Quits: Tuba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:40:27] <terpstra> aturon, excellent post re: rkjnsn's Rc<T> where T : 'static
[12:40:44] *** Joins: lnwdr (lnwdr@moz-fsg.jna.74.195.IP)
[12:40:58] <terpstra> aturon, i don't agree with you, but you cleared the issue up well enough that i can clearly articulate where i disagree :)
[12:41:26] *** Joins: mahdi (mahdi@moz-ipf.n3s.129.78.IP)
[12:41:27] *** Quits: babeard (brian@moz-ecqijr.hfc.comcastbusiness.net) (Connection closed)
[12:41:45] <soma> tomaka: oh. I've surrounded the init method with braces, why does it extend out?
[12:42:36] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[12:43:26] <tomaka> playbot: fn init(_: &mut i32) {}    let mut x = 0; init(&mut x); *x = 5;
[12:43:28] -playbot- <anon>:9:65: 9:67 error: type `i32` cannot be dereferenced
[12:43:28] -playbot- <anon>:9         fn init(_: &mut i32) {}    let mut x = 0; init(&mut x); *x = 5;
[12:43:28] -playbot- output truncated; full output at: http://bit.ly/1GoZkIU
[12:43:29] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[12:43:32] <tomaka> playbot: fn init(_: &mut i32) {}    let mut x = 0; init(&mut x); x = 5;
[12:43:33] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Ping timeout: 121 seconds)
[12:43:34] -playbot- <anon>:9:65: 9:66 warning: value assigned to `x` is never read, #[warn(unused_assignments)] on by default
[12:43:34] -playbot- <anon>:9         fn init(_: &mut i32) {}    let mut x = 0; init(&mut x); x = 5;
[12:43:34] -playbot- output truncated; full output at: http://bit.ly/1HzDVhU
[12:43:39] <tomaka> ...
[12:43:40] *** Joins: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP)
[12:43:41] <tomaka> playbot: fn init(_: &mut i32) {}    let mut x = 0; init(&mut x); x = 5; x
[12:43:43] -playbot- 5
[12:43:47] <tomaka> it works ^
[12:43:54] <tomaka> "x" is unborrowed when "init" returns
[12:44:07] <tomaka> I don't understand your problem
[12:44:44] <tomaka> You should probably just copy-paste your code and error message
[12:45:28] *** Quits: mahdi (mahdi@moz-ipf.n3s.129.78.IP) (Ping timeout: 121 seconds)
[12:45:40] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[12:46:05] *** Joins: new_one (new_one@moz-98g.jb4.42.128.IP)
[12:46:29] <burntsushi> aatch: pong
[12:46:47] *** Joins: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at)
[12:47:02] <soma> tomaka: It seems I'm stepping on some complicated place. My declaration is impl<'a> Foo<'a> {pub fn init(&'a mut self)}....
[12:47:19] <aatch> burntsushi, heh, I was gonna get your attention about the regex issues BageDevimo was having
[12:47:31] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[12:47:32] <burntsushi> aatch: oo gotya, yeah, just had to update. :)
[12:47:35] *** Quits: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at) (Connection closed)
[12:47:36] <soma> tomaka: Does it suggest a function to extend borrow scope without a return value?
[12:47:42] <aatch> soma, that is almost certainly incorrect.
[12:47:48] <burntsushi> aatch: sometimes i merge a PR at work and forget to follow through.
[12:48:17] <soma> aatch: hmm. I'm confused about this lifetime parameters
[12:48:26] <Rym> soma: remove the 'a from init
[12:48:29] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[12:48:56] <soma> Rym: It will break the inside code
[12:49:13] <aatch> soma, so a lifetime is you telling compiler something about how long a value has to live.
[12:49:27] *** Joins: palodequeso (quassel@moz-ebjt83.hfc.comcastbusiness.net)
[12:49:32] <soma> I have a vector contains reference to a hashmap's value. both inside the same struct
[12:49:48] <aatch> soma, ah, that's not going to work.
[12:50:11] <soma> aatch: why
[12:50:15] <aatch> soma, we just don't have the ability to specify that kind of cyclical dependency.
[12:50:20] *** Joins: Sackapoff (Mibbit@moz-1ku1f2.fbx.proxad.net)
[12:50:54] *** Joins: _ixti_ (ixti@moz-i3d.dae.119.188.IP)
[12:51:20] <soma> aatch: But I see no cycle here, just a bunch of pointers to a bunch of values
[12:51:27] <bluss> if Rust could track that it would force the hashmap to be immutable anyway
[12:51:37] <aatch> soma, there is a cyclical dependency on the lifetimes though.
[12:51:47] <bluss> and it can't tell the difference between borrows that lock moving a value and those that don't
[12:51:51] *** Quits: lenstr (lenstr@moz-lno.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[12:51:52] <tomaka> soma: all structs and enums in Rust need to be movable
[12:52:05] <tomaka> wait, that's not the good argument
[12:52:12] <tomaka> since the content of the hashmap doesn't move
[12:52:13] <Layl> soma, rust works by the concept of ownerships and borrowing, only one thing at a time can have mutable access to a value
[12:52:36] <aatch> tomaka, the thing is, Rust doesn't know that.
[12:52:54] <Layl> one mutable or many immutable, either of those but not at once
[12:52:56] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[12:52:59] <soma> ok, is there a alternative way?
[12:53:01] *** Quits: rainemak (rainemak@moz-1v4jqf.gjaa.pi0p.0998.2001.IP) (Ping timeout: 121 seconds)
[12:53:06] *** Joins: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca)
[12:53:08] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[12:53:08] *** ChanServ sets mode: +o erickt
[12:53:17] <aatch> soma, well, you've got a hashmap, why not store the keys?
[12:53:17] *** Joins: dzyp (hiatt@moz-ofiasr.static.qwest.net)
[12:53:27] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[12:53:29] <aatch> soma, otherwise, the only other option is to use unsafe code.
[12:54:17] *** Quits: fabiand (fabiand@moz-ouf55j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[12:54:48] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[12:55:10] *** Quits: Wild_Cat (Max@moz-na0tak.dsl.teksavvy.com) (Connection closed)
[12:55:13] <soma> aatch: I cannot make hashmap order its values as I want, since I need a predefined way to iterate over them
[12:55:24] <Layl> soma, well the best answer here would depend on this: why do you need both a vector and a hashmap
[12:55:24] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[12:56:25] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[12:57:21] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Quit: WeeChat 1.1.1)
[12:57:27] <soma> IMHO, LRU cache with O(1) lookup time would need this
[12:57:53] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[12:57:57] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Quit: Leaving)
[12:58:22] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[12:58:34] *** Quits: m_kato (m_kato@moz-86b4bs.bitcat.net) (Quit: Leaving...)
[12:58:59] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[12:59:41] *** Quits: lyra2 (raikis@moz-0pbl66.static.zebra.lt) (Quit: Leaving)
[13:00:27] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[13:01:46] *** Joins: lenstr (lenstr@moz-lno.vju.25.171.IP)
[13:01:47] *** Quits: lenstr (lenstr@moz-lno.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[13:01:48] *** Joins: lenstr (lenstr@moz-lno.vju.25.171.IP)
[13:02:47] *** Joins: mib_36jpoc (Mibbit@moz-dep.u67.91.160.IP)
[13:03:25] *** Quits: ajitk (ajit@moz-6ht.i8n.51.106.IP) (Ping timeout: 121 seconds)
[13:04:28] *** Joins: dylan_ (dylan@moz-ve0.6j4.9.153.IP)
[13:04:33] *** Quits: Phaiax (Phaiax@moz-aqopsj.hsi8.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[13:05:23] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[13:05:37] <Sackapoff> Hi. Is there a way to destructure a str like car/cdr in lisp? I think it's possible, since the doc says &str == &[u8], but I can't make it work
[13:05:43] *** Quits: RCIX (RCIX@moz-vnmep7.ph.cox.net) (Ping timeout: 121 seconds)
[13:05:44] <Sackapoff> my test : #![feature(advanced_slice_patterns, slice_patterns)] fn main() {     let x = "haha";     match x {         [] => println!("ko"),         [x, ..] => println!("ok : {}", x),     } }
[13:05:45] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[13:06:33] <Sackapoff> but i get mismatched types: expected `&str`, found `&[_]` (expected str, found slice)
[13:06:50] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[13:07:17] <Ms2ger> Sackapoff, &str != &[u8], they just have the same representation
[13:08:12] <Ms2ger> steveklabnik, that seems like a common misconception, maybe the docs should be rewritten
[13:08:22] *** Joins: fabiand (fabiand@moz-blfia4.dip0.t-ipconnect.de)
[13:08:23] <Sackapoff> so it's impossible to destructure a string in chars in a match? ok
[13:08:27] *** Joins: ixti (ixti@moz-i3d.dae.119.188.IP)
[13:08:44] *** Quits: sp0 (seth@moz-3cvluq.internode.on.net) (Connection closed)
[13:08:46] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[13:08:51] *** Quits: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[13:09:04] *** Quits: playjax (chatzilla@moz-kv3nv0.optusnet.com.au) (Quit: ChatZilla 0.9.91.1 [Firefox 32.0.1/20140911151253])
[13:09:05] *** Joins: jviereck (Adium@moz-427efu.97ug.g469.067c.2001.IP)
[13:09:06] <frankmcsherry> aatch, tomaka: are relative offsets a thing that Rust might ever support? having references in to your own struct would (probably?) be fine with those no?
[13:09:12] <Ms2ger> "The actual representation of strs have direct mappings to slices: &str is the same as &[u8]."
[13:09:27] <Ms2ger> frankmcsherry, maybe...
[13:10:15] <frankmcsherry> Ms2ger: like "maybe fine" or "maybe eventually support" ?
[13:11:20] <Ms2ger> Both :)
[13:11:47] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[13:11:56] <Ms2ger> Sackapoff, you can implement car as chars().nth(0), fwiw
[13:11:57] *** Joins: jviereck1 (Adium@moz-773cod.ethz.ch)
[13:12:03] *** Quits: jviereck (Adium@moz-427efu.97ug.g469.067c.2001.IP) (Connection closed)
[13:12:13] *** Quits: rkruppe (chatzilla@moz-5umokk.hrz.tu-darmstadt.de) (Ping timeout: 121 seconds)
[13:12:18] <soma> Hello! why does rust unsafe pointer not support deref coercion?
[13:12:22] <Sackapoff> just found as_bytes, guess it should work like that
[13:12:29] <Sackapoff> thanks for the help
[13:12:37] <Ms2ger> soma, might be null, might not point anywhere valid
[13:12:44] *** Quits: dylan_ (dylan@moz-ve0.6j4.9.153.IP) (Ping timeout: 121 seconds)
[13:12:54] *** Joins: playjax (chatzilla@moz-kv3nv0.optusnet.com.au)
[13:13:10] <Ms2ger> Sackapoff, depending on what you actually want to do, yeah, that's possible
[13:13:57] *** Joins: Eonil (Eonil@moz-05i.nh3.123.58.IP)
[13:14:12] *** bvssvni_ is now known as bvssvni
[13:14:13] *** Joins: marsel (user@moz-rrv.pek.234.188.IP)
[13:14:28] <duncan> Sackapoff: just remember that &str is utf-8, so 1 byte does not necessarily equal 1 character
[13:14:57] *** Joins: wei2912 (wei2912@moz-42b.ir0.156.175.IP)
[13:15:04] <Sackapoff> yeah, but that's just for learning/small exercises
[13:15:18] <soma> Ms2ger: since I'm already in the unsafe zone, it may save some typing work
[13:15:41] *** Quits: meh (meh@moz-p5gc2m.42-151.net24.it) (Ping timeout: 121 seconds)
[13:15:47] <duncan> Sackapoff: you could use chars() to get the actual characters out http://doc.rust-lang.org/nightly/std/primitive.str.html#method.chars
[13:15:54] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[13:16:12] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[13:17:27] *** Quits: amir (amir@moz-jnohkj.3bcq.01f6.0168.2a02.IP) (Ping timeout: 121 seconds)
[13:17:43] *** Joins: Diggsey (diggsey@moz-fbohmi.dsl.pipex.com)
[13:17:57] *** Joins: tadh (quassel@moz-88tk3f.res.rr.com)
[13:18:22] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[13:18:30] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[13:18:45] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[13:19:29] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[13:19:30] *** ChanServ sets mode: +o pnkfelix
[13:19:32] *** Parts: krdln (krdln@moz-ohe9vg.dynamic.chello.pl) ()
[13:19:36] *** Quits: ekiwi_ (kevin@moz-b1dekb.eduroam.rwth-aachen.de) (Client exited)
[13:19:44] *** Joins: ekiwi (kevin@moz-b1dekb.eduroam.rwth-aachen.de)
[13:19:46] *** ekiwi is now known as ekiwi_
[13:20:40] *** Quits: Eonil (Eonil@moz-05i.nh3.123.58.IP) (Quit: Leaving)
[13:21:23] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[13:22:21] *** Quits: egor (egor@moz-dbb.3j0.166.192.IP) (Quit: WeeChat 0.4.2)
[13:22:52] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[13:23:32] *** Joins: slomo (slomo@moz-p8m0g2.net)
[13:24:52] *** Quits: espadrine (tyl@moz-qfr4fg.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[13:25:03] *** Quits: funnel (hegel@moz-hmd.ddu.4.81.IP) (Ping timeout: 121 seconds)
[13:25:04] *** Joins: psd (psd@moz-cbbo1n.a8s4.2n0b.5600.2406.IP)
[13:26:11] *** Joins: agarie (agarie@moz-3eg.b1m.32.177.IP)
[13:26:38] *** Joins: buzugu (baptiste@moz-5il26q.rev.sfr.net)
[13:26:58] *** Joins: bombless (_@moz-odk.piv.41.59.IP)
[13:28:15] *** Joins: Eonil (Eonil@moz-05i.nh3.123.58.IP)
[13:29:31] *** Joins: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP)
[13:30:24] *** Joins: saml (saml@moz-0pt9vd.cst.lightpath.net)
[13:31:19] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[13:31:44] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[13:31:51] *** Joins: espadrine_ (tyl@moz-qfr4fg.abo.wanadoo.fr)
[13:32:07] *** Joins: amir (amir@moz-qbf4gg.fiber7.init7.net)
[13:32:11] *** Joins: essem2 (Thunderbird@moz-f9p.4ol.7.74.IP)
[13:32:38] *** espadrine_ is now known as espadrine
[13:33:24] *** Quits: IPoAC (franklin@moz-uodqn2.univ-tlse1.fr) (Quit: WeeChat 1.1.1)
[13:33:25] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[13:33:32] <Layl> does rust function well with templated trait functions
[13:33:43] *** Quits: Tarmashirin (Tarmashirin@moz-93d.c6u.199.117.IP) (Connection closed)
[13:33:59] <ChrisMorgan> Layl: what do you mean by “templated trait functions”?
[13:34:19] <frankmcsherry> Switching from a HashMap<K, Vec<D>> to a Vec<(K, Vec<D>)>   [in the dumb way] cut the amount of time I spent in drop by about 2-3s. (10% of total execution time). What could it be doing in HashMap::drop?
[13:34:23] *** Quits: essem2 (Thunderbird@moz-f9p.4ol.7.74.IP) (Client exited)
[13:34:25] <Layl> trait MyTrait { fn my_function<T: MyOtherTrait>() } like this
[13:35:20] *** Quits: dstrbad (dstrbad@moz-1gtctd.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[13:35:41] *** Joins: dstrbad (dstrbad@moz-1gtctd.cable.xnet.hr)
[13:35:46] <ChrisMorgan> Layl: the next question that arises is: what do you mean by “function well”? It works, there’s nothing wrong with it.
[13:36:35] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[13:36:42] <bluss> frankmcsherry: is the hashmap really overdimensioned in capacity?
[13:36:44] <Layl> well, does it not die horribly like C++ tends to when you try something like that
[13:37:41] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:37:45] <ChrisMorgan> Layl: try it!
[13:37:57] *** Joins: cmp (cmp@moz-0vqg2a.hfc.comcastbusiness.net)
[13:37:59] <frankmcsherry> bluss: it starts with something like 32 cells as a min capacity, right? ... erm. it probably is, then. But shouldn't it still do pretty minimal work in drop, just touching the live members?
[13:38:48] <Layl> it doesn't die horribly on compile, that's at least one step above C++
[13:38:50] <frankmcsherry> bluss: I am surprised at how much of my run-time I spend in drop. about 12.5% at the moment. I guess you have to do a heap crawl at some point, just .. hrm.
[13:39:14] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[13:39:41] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[13:39:43] *** Quits: dstrbad (dstrbad@moz-1gtctd.cable.xnet.hr) (Ping timeout: 121 seconds)
[13:39:58] *** Quits: cmp (cmp@moz-0vqg2a.hfc.comcastbusiness.net) (Quit: )
[13:40:15] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[13:40:18] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[13:40:43] *** Joins: funnel (hegel@moz-hmd.ddu.4.81.IP)
[13:40:56] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[13:41:27] <bluss> frankmcsherry: dropping will be improved later in Rust
[13:41:39] *** Quits: Feyn (Feyn@moz-qqa.rg0.115.42.IP) (Quit: Leaving)
[13:41:56] <frankmcsherry> bluss: is it doing something known to be silly?
[13:42:02] *** Quits: Sackapoff (Mibbit@moz-1ku1f2.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:42:02] *** Joins: ajitk (ajit@moz-6ht.i8n.51.106.IP)
[13:42:38] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[13:43:08] <Rym> frankmcsherry: are you continually making new vecs and then dropping them? If so, try to reuse previous allocations via `.clear()`?
[13:43:34] <bluss> frankmcsherry: kind of!
[13:43:39] <frankmcsherry> Rym: no, this is literally just at the end, at shutdown. All under the root obj's drop() call. 
[13:43:43] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[13:44:06] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[13:44:37] *** Quits: playjax (chatzilla@moz-kv3nv0.optusnet.com.au) (Connection closed)
[13:45:54] <Rym> heh, alright, probably see a marked improvement when we lose zeroing on drop (I think that's planned)
[13:46:18] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[13:46:26] *** Joins: chronoslynx (chronoslynx@moz-q32.838.207.130.IP)
[13:46:26] *** Quits: chronoslynx (chronoslynx@moz-q32.838.207.130.IP) (Quit: Textual IRC Client: www.textualapp.com)
[13:46:30] *** Joins: chronoslynx (chronoslynx@moz-q32.838.207.130.IP)
[13:46:35] <rkruppe> Or just mem::forget() the root object /s
[13:46:39] <frankmcsherry> Rym: oh, yeah. that would probably do it (or, something related to it).
[13:46:41] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Ping timeout: 121 seconds)
[13:47:14] <bluss> std::process::exit will forget everything pretty quickly
[13:49:08] *** Quits: nedp (nedp@moz-vg6vvt.bigpond.net.au) (Ping timeout: 121 seconds)
[13:50:32] *** Joins: davbo (sid46044@moz-mg9kc8.uxbridge.irccloud.com)
[13:50:34] *** Joins: Temur (Tarmashirin@moz-93d.c6u.199.117.IP)
[13:51:14] <mkpankov`> we do zeroing on drop?.. Surprised
[13:52:12] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:52:27] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[13:52:44] *** Quits: soma (Mibbit@moz-cp3.gb0.226.159.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:53:36] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[13:53:43] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:53:43] *** ChanServ sets mode: +o erickt
[13:53:53] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[13:55:20] *** Quits: chronoslynx (chronoslynx@moz-q32.838.207.130.IP) (Connection closed)
[13:55:53] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[13:58:46] <rkruppe> I think right now it's some meaningless non-zero byte, in preparation of getting rid of it entirely
[13:58:55] <rkruppe> But yes, stuff is overwritten when dropped
[13:59:32] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[13:59:39] <aturon> bluss: btw, in case you missed it, i wrote up the comment i mentioned yesterday with my perspective: https://github.com/rust-lang/rfcs/pull/1066#issuecomment-95773623
[14:00:51] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[14:01:39] *** Quits: m104ru (m104ru@moz-j4k.8g6.153.93.IP) (Ping timeout: 121 seconds)
[14:02:20] <mkpankov`> rkruppe what was initial motivation for doing it? 
[14:02:49] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Client exited)
[14:02:56] <bluss> aturon: thanks!
[14:04:12] *** Quits: laumann (thomas@moz-1i4.hq0.225.130.IP) (Quit: leaving)
[14:04:33] *** Joins: dstrbad (dstrbad@moz-3vdjjr.dsl.iskon.hr)
[14:04:38] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[14:05:11] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:05:11] *** Joins: sp0 (seth@moz-3cvluq.internode.on.net)
[14:06:11] *** Quits: maro (maro@moz-r706nt.highway.telekom.at) (Quit: Leaving)
[14:07:20] *** Quits: buzugu (baptiste@moz-5il26q.rev.sfr.net) (Client exited)
[14:07:22] *** Joins: sfusco (Adium@moz-io3.np5.78.208.IP)
[14:08:46] *** zz_kimundi is now known as kimundi
[14:08:53] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[14:09:00] <rkruppe> mkpankov`: IIUC, to avoid double-drops without altering control flow to account for moves/early drops
[14:09:48] <rkruppe> So instead of "__drop_glue(thing)" at the end of the function, insert "if (__drop_flag(thing) != 0) __drop_glue(thing)"
[14:10:04] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[14:11:04] <frankmcsherry> my relational join method has 12 generic parameters. not including 2-4 more due to parameterize the storage. Oof / neat that Rust can do that. :)
[14:11:17] *** Joins: buzugu (baptiste@moz-5il26q.rev.sfr.net)
[14:12:10] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[14:12:17] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[14:12:24] *** Joins: btobolaski (btobolaski@moz-ltbh80.va.comcast.net)
[14:12:29] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[14:15:09] *** Joins: fabianvf_ (fabianvf@moz-j12.dim.197.216.IP)
[14:15:09] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[14:15:53] <tomaka> Is there a crate on crates.io that provides dlopen/dlsym/dlclose/etc. ?
[14:16:06] <simias> tomaka: I thought it was in std?
[14:16:10] <simias> well, it once was
[14:16:13] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[14:16:21] <tomaka> it's unstable
[14:16:25] <simias> eh
[14:16:37] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[14:17:08] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:17:26] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Ping timeout: 121 seconds)
[14:19:16] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[14:19:42] *** Joins: laogao (laogao@moz-k1t.k7v.78.124.IP)
[14:19:52] *** Quits: blaztinn_ (blaztinn@moz-7sp886.dynamic.t-2.net) (Client exited)
[14:20:56] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Connection closed)
[14:20:58] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[14:22:01] *** Quits: jviereck1 (Adium@moz-773cod.ethz.ch) (Quit: Leaving.)
[14:22:25] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[14:22:42] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[14:23:19] *** Quits: marsel (user@moz-rrv.pek.234.188.IP) (Ping timeout: 121 seconds)
[14:23:27] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[14:23:32] *** Joins: hkr (hkr@moz-mvo.sbg.89.59.IP)
[14:24:11] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[14:24:28] *** Joins: maraoz (maraoz@moz-7fc9s6.fibertel.com.ar)
[14:24:39] *** Joins: alonlevy (alon@moz-p48.q13.159.94.IP)
[14:25:51] *** Quits: ryanxcharles (ryan@moz-gn66cd.bac4.d045.0009.2601.IP) (A TLS packet with unexpected length was received.)
[14:27:34] <hkr> So which paradigm describes rust best?
[14:27:46] <hkr> I don't really like to use paradigms and stuff, but I just want to get an idea of the language
[14:28:21] *** Quits: havarnov (Mibbit@moz-n2g.lsg.130.95.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:28:26] <rkruppe> Multi-paradigm, but that's a non-answer
[14:28:48] <burntsushi> hkr: i can't think of any one paradigm that describes rust. functional + imperative, maybe?
[14:29:09] *** Quits: Layl (Mibbit@moz-iachg4.sdb.prolocation.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:29:52] <rkruppe> Heavily erring on the side of imperative though, if we take Scala as the reference for an even split
[14:30:30] <simias> it's a good programming language
[14:30:36] <burntsushi> i don't know Scala, but yeah, i'd agree with erring on the side of imperative. without TCO, it's hard to make a stronger case for functional. but these are just weakly held opinions.
[14:31:11] *** Quits: nicoch (nicoch@moz-g02d7k.be) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:31:31] <annodomini> hkr: The best description I could give would be strongly typed, safe, imperative systems language with strong functional language influences, no GC, and minimal runtime.
[14:32:29] <rkruppe> There's also above-average tendency towards metaprogramming (macros), generic programming, and message passing
[14:32:45] <rkruppe> Not as much as lisp / C++ / Erlang respectively, but measurable
[14:32:58] <annodomini> indeed
[14:33:02] *** Quits: frankmcsherry (frankmcsher@moz-9jgf5s.dyn.telefonica.de) (Connection closed)
[14:34:24] *** Joins: sonder (chatzilla@moz-nt8r49.idi.ntnu.no)
[14:35:19] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[14:37:17] *** Quits: TheLemonMan (lemonboy@moz-mbnp7s.26-151.libero.it) (Quit: "It's now safe to turn off your computer.")
[14:37:53] *** Quits: ajitk (ajit@moz-6ht.i8n.51.106.IP) (Ping timeout: 121 seconds)
[14:38:09] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[14:38:57] *** Joins: Tarmashirin (Tarmashirin@moz-93d.c6u.199.117.IP)
[14:39:07] *** Quits: Temur (Tarmashirin@moz-93d.c6u.199.117.IP) (Connection closed)
[14:39:18] <hkr> annodomini: only functional 'influences'?
[14:39:33] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[14:39:36] <hkr> what abot lambda expressions?
[14:40:50] <annodomini> hkr: Yes, it has those. When I say “function influences”, I mean that it’s not a functional language in requiring or even preferring that all functions are pure, but it takes a lot of inspiration from functional langauges and offers a lot of the same tools, such as lamda expressions, higher order functions, and so on.
[14:41:25] *** Joins: marcusklaas (marcus@moz-0ol9oe.chello.nl)
[14:41:40] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[14:42:32] <annodomini> When most people talk about “functional languages” they mean languages in which pure functions are required or strongly preferred; while Rust embraces mutation, but does so in a way that guarantess memory and data race safety, by allowing only one live mutable reference to any object at any time.
[14:42:34] *** Quits: psd (psd@moz-cbbo1n.a8s4.2n0b.5600.2406.IP) (Ping timeout: 121 seconds)
[14:42:34] <Hannibal_Smith> hkr, with a C++ background to me Rust is "a response to _purist_ people who restrict themself from things like manually memory management, pointers and in some cases even assignment statement...Rust is a way to purify so that these classical tools can be used with comparative safety, and actually win the battle with the purist"
[14:43:26] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[14:43:42] *** Joins: sillyname (Mibbit@moz-r3h.em0.71.152.IP)
[14:43:49] <hkr> Hannibal_Smith: so you're saying it adds no productivity
[14:43:50] *** Quits: savorywatt (savorywatt@moz-k53q32.desm.qwest.net) (Ping timeout: 121 seconds)
[14:44:22] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[14:44:52] *** Quits: ytain (ytain@moz-aope4o.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[14:44:59] <annodomini> hkr: your question is unclear. What are you referring to by “it”? Rust? Functional programming?
[14:45:11] <hkr> rust
[14:45:24] <hkr> he's saying its just for purists or something along the lines of that
[14:46:10] <sillyname> quick newbie question : if i'm doing   "for i in s.chars()" where s is a String, how does 'i' get unwrapped? Does the for loop always do that? I want the underlying iterator and am not sure how to get it
[14:46:26] *** Joins: flan3002 (flan3002@moz-6vhgm3.de)
[14:46:39] *** bentley|away is now known as bentley
[14:46:54] <burntsushi> sillyname: the for loop stops looping if the `next()` call of an iterator yields `None`.
[14:46:56] *** Quits: lenstr (lenstr@moz-lno.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[14:47:08] <annodomini> hkr: No, he’s saying that it’s a way to achieve many of the same benefits of pure functional programming, without being restricted by the constraints of actually avoiding all mutation, and so thus is able to be more productive while still offering the same safety benefits.
[14:47:26] <Hannibal_Smith> hkr, http://web.archive.org/web/20130731202547/http://pplab.snu.ac.kr/courses/adv_pl05/papers/p261-knuth.pdf
[14:47:34] <Hannibal_Smith> I taken inspiration from Knuth
[14:47:46] <burntsushi> sillyname: for loops are sugar for something like, `loop { match it.next() { None => break, Some(i) => /* your code */ } }`
[14:47:51] <Hannibal_Smith> He actually predicted Rust so many years ago!
[14:47:52] <annodomini> hkr: It might help if you mention what kind of background you have; what languages you already know. It’s hard to tell where you are coming from with these questions; what point of reference we can use to describe things to you.
[14:47:56] *** Joins: borromakot (Adium@moz-n68mt9.u9cs.nunl.000d.2601.IP)
[14:48:01] *** Quits: giucam_ (giucam@moz-u9jnsc.c665.0nib.2060.2001.IP) (Ping timeout: 121 seconds)
[14:48:17] <hkr> C, Python and lil js
[14:48:24] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[14:48:32] <Hannibal_Smith> hkr, take a read of the introduction of that paper
[14:48:36] *** Joins: dschatzberg (dschatz@moz-nk1clf.bu.edu)
[14:48:47] <hkr> alright
[14:48:55] *** Joins: davebettin (davebettin@moz-a7hdsh.bhak.dqhm.0007.2601.IP)
[14:49:06] *** Quits: borromakot (Adium@moz-n68mt9.u9cs.nunl.000d.2601.IP) (Quit: Leaving.)
[14:49:18] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[14:49:19] <sillyname> burntsushi: that makes a lot of sense, thanks - i guess i can use loop() 
[14:49:36] <burntsushi> sillyname: out of curiosity, what are you trying to do?
[14:49:42] <rkruppe> hkr: Then my elevator pitch is: Rust can do everything C does, but almost all those things can be done with a level of convenience and confidence closer to Python than C
[14:49:44] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[14:50:30] <hkr> rkruppe: okay thanks
[14:50:36] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Connection closed)
[14:50:36] <mate> and rust doesn't have header files..
[14:51:00] <hkr> i could see
[14:51:12] <rkruppe> You still think about stack, heap, pointers, etc. but when something goes wrong, it results in a nice error message rather than random segfaults
[14:51:47] <kimundi> and most of these are compiler errors
[14:51:50] <annodomini> hkr: in C, you have to manage your memory manually; allocate fixed size arrays on the stack, or allocate manually with malloc, remember to free it (and free it only once, and be careful not to use it after freeing it), be careful to ensure that you never access any data beyond the bounds of an array that you have allocated (either on the stack or the heap) or you will encounter undefined behavior (a crash at best, sublte corruption and 
[14:51:51] <annodomini> security holes very commonly).
[14:52:07] <kimundi> you can juggle around stack pointers across threads and its either going to be safe, or won't compile
[14:52:39] <annodomini> hkr: In Python, you do not have to do any of that; every access to an array is bounds checked, the garbage collector will ensure that everything is freed exactly once, etc. It is a safe language.
[14:52:50] *** Joins: lenstr (lenstr@moz-lno.vju.25.171.IP)
[14:52:55] <hkr> so all this 'safety' talk is about finding the programmers errors only?
[14:53:10] <aawe> hkr: are there any other errors?
[14:53:15] <WindowsBunny> cmr: Why did you ping me about std::net?
[14:53:20] <sillyname> burntsushi: i want to double loop through a string, as if to go 'rabbit', 'abbit', 'bbit', etc. so the 1st iter advances by one each time and the 2nd loops
[14:53:20] *** Joins: mib_ouxzl2 (Mibbit@moz-arrf0r.access.telenet.be)
[14:53:22] <hkr> aawe: i don't know
[14:53:28] *** Quits: mib_ouxzl2 (Mibbit@moz-arrf0r.access.telenet.be) (Quit: http://www.mibbit.com ajax IRC Client)
[14:53:35] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[14:53:50] <kimundi> hkr: Its about "memory safety" specifically - it should not be possible to access out of bounds or freed memory for example. Obviosly other logic error are still possible
[14:53:52] <hkr> I mean if I was a perfect programmer who somehow kept track of array bounds and memory operations etc. all this safety thing wouldn't apply to me
[14:54:01] <kimundi> hkr: true
[14:54:05] <hkr> kimundi: alright
[14:54:15] <annodomini> However, that safety comes at a cost. In Python, you can’t do meaningful multi-threading; in order for the GC to work, there is a global interpreter lock, so any actual execution can happen only in one thread at a time (threads do drop the lock during I/O, so multi-threading can be used in Python for blocking I/O, but that’s just about all it’s good for).
[14:54:15] <hkr> but i do make a lot of frustrating errors in C :)
[14:54:29] <mate> hkr: it has modern shit like type classes, adt, pattern matching etc. Basically a better C++
[14:54:53] <rkruppe> The safety is only to catch programmer errors, yes, but Rust also has a lot of nice productivity boons over C, C++
[14:54:58] <annodomini> Additionally, all objects are heap-allocated in Python, accessed via a pointer, which leads to memory fragmentation, more time spent chasing pointers, more pressure on the allocator.
[14:55:02] <hkr> traits are similar to classes?
[14:55:08] <rkruppe> No, closer to interfaces
[14:55:10] <hkr> I dislike C++ because its too complex for me :P
[14:55:27] <rkruppe> Well Rust is simpler IMHO, but nowhere as simple as Python
[14:55:30] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[14:55:32] <mate> rust is less complex.. less random things you have to remember
[14:55:37] *** Joins: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP)
[14:55:42] <bstrie> rkruppe: python isn't really simple :P
[14:55:42] *** Quits: tomprogrammer (thomas@moz-gehkpe.tr5r.qept.4dd0.2001.IP) (Connection closed)
[14:55:44] <hkr> python also has a large library
[14:55:48] <kimundi> hkr: similar "type classes" from functional languages. Compared to to OOP, it closes resembles interfaces or purely abstract classes
[14:55:51] <rkruppe> bstrie: Simple to learn
[14:55:58] <burntsushi> sillyname: this is the best i can do: no `loop` but a `while let` and a clone: http://is.gd/cjNYFb
[14:55:59] <hkr> how will the rust library grow?
[14:56:00] <rkruppe> I know perfectly well how deep the rabbit hole goes
[14:56:04] <bstrie> rkruppe: explain metaclasses and decorators to someone trying to learn python :)
[14:56:10] <nox> Python is complex.
[14:56:12] <bstrie> hkr: gradually
[14:56:16] *** Quits: dschatzberg (dschatz@moz-nk1clf.bu.edu) (Quit: Leaving)
[14:56:18] <annodomini> Rust allows you to do all of the things you could do in C; allocate objects on the stack, allocate arrays with objects inline rather than references through a pointer, etc, making it more efficient than Python; and it allows you to write multi-threaded code. But it keeps track of pointers for you, statically, so that you can’t make the same kinds of errors you could make in C.
[14:56:21] *** Joins: dschatzberg (dschatz@moz-nk1clf.bu.edu)
[14:56:42] <burntsushi> sillyname: the trick there is that the `Chars` iterator itself can be cloned, which you can know from its `Clone` impl: http://doc.rust-lang.org/std/str/struct.Chars.html
[14:56:43] <sillyname> burntsushi: thanks a lot - that's much more elegant than the ugly loop/break i'd knocked up
[14:56:44] <hkr> well that means the release of 1.0 wont put rust in a spot to compete with python and C#?
[14:56:46] <rkruppe> bstrie: They don't need to know about metaclasses, and decorators are trivial iff they grok higher order functions
[14:56:53] <kimundi> hkr: Rust has a package manager with a central repository for community packages. So hwo the library ecosystem grows depends on all users basically
[14:56:59] <hkr> i read about cargo
[14:57:08] <annodomini> hkr: Rust does not yet have as large of a library as Python. However, there is http://crates.io, a collection of community contributed libraries, that is growing quite rapidly.
[14:57:09] <burntsushi> sillyname: yeah, sometimes the plain loop/break is unavoidable, but there is usually some trick you can employ.
[14:57:13] *** Joins: adukhno (chatzilla@moz-dl7.865.91.80.IP)
[14:57:18] <bstrie> rkruppe: I do agree that python makes it easy to get up and running with minimal overhead, but it's still a language that takes a long time to master
[14:57:22] <hkr> annodomini: thanks, ill check that out
[14:57:32] <hkr> i'm planning to start learning once 1.0 is out :D
[14:57:43] <kimundi> hkr: Rusts goal is not to have a all-inclusive std library like the .NET frameworks
[14:57:52] <hkr> kimundi: why is that?
[14:58:00] *** Quits: laogao (laogao@moz-k1t.k7v.78.124.IP) (Connection closed)
[14:58:02] <rkruppe> bstrie: Yes, that I can agree to. 
[14:58:11] *** Quits: nical (nical@moz-jp38c1.lmuk.1rfi.0450.2001.IP) (Ping timeout: 121 seconds)
[14:58:13] <steveklabnik> hkr: https://news.ycombinator.com/item?id=9423151 <- that's why
[14:58:15] <sillyname> burntsushi: yeah, i find half the time i'm thinking in python, and half C/C++, and sometimes it ends up a bit of a mess!
[14:58:16] <hkr> std library 
[14:58:23] <hkr> ok
[14:58:35] <kimundi> hkr: Simple - std lib code is not better than community code, but has to be maintained forever even if it turns out to be a bad api
[14:58:46] <bstrie> burntsushi: did you see that carllerche is doing DFA regex work?
[14:58:56] <hkr> alright, thanks everyone
[14:58:57] <burntsushi> bstrie: yup! exciting!
[14:59:03] *** Joins: nical (nical@moz-ductqg.2500.1rfi.0450.2001.IP)
[14:59:08] <hkr> anyways what was the flag you give to compile faster?
[14:59:12] <burntsushi> bstrie: i'm working on a parser rewrite now. and then hopefully a one pass NFA.
[14:59:16] <kimundi> hkr: -O
[14:59:23] <kimundi> hkr: or cargo build --release
[14:59:24] <hkr> optimizations
[14:59:27] <hkr> right?
[14:59:39] <kimundi> yes
[14:59:46] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[14:59:49] <kimundi> rustc -O file.rs
[14:59:55] <kimundi> no wait
[14:59:56] <bstrie> burntsushi: I thought it already did NFA, and it was DFA that was on the docket?
[14:59:58] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Connection closed)
[15:00:03] <bstrie> burntsushi: am I backwards?
[15:00:06] <kimundi> hkr: compiler faster, or compile something that is faster?
[15:00:12] <hkr> kimundi: compile faster
[15:00:29] <hkr> wait, how can you 'compile something that is faster'?? i'd love to know
[15:00:29] <kimundi> hkr: The compiler or your own code?
[15:00:36] <simias> alias rustc=rm
[15:00:38] <hkr> the compiler
[15:00:39] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[15:00:44] <hkr> simias: thanks a lot
[15:00:46] <kimundi> hkr: By compiling with optimizations, the thing you compiled is faster
[15:00:48] <burntsushi> bstrie: it does a full NFA simulation. a one pass NFA applies to a subset of regexes that satisfy the following invariant: at any state in the engine, at most one state can possibly lead to a match.
[15:00:50] <hkr> haha 
[15:01:05] <bstrie> neat
[15:01:07] <burntsushi> bstrie: it basically lets you avoid tracking capture groups.
[15:01:18] <kimundi> hkr: The standard setup of the compiler makefile is already the fastest possible way
[15:01:30] *** Quits: skade (skade@moz-4eh.d50.201.212.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:01:33] <burntsushi> bstrie: it's a bit easier to do than full DFA stuff. baby steps :-)
[15:01:35] <bstrie> burntsushi: you two should join forces :) or compete to the death, w/e
[15:01:37] <hkr> Is this supposed to be slow?
[15:01:40] <polyfractal> is there a go-to SPSC queue in rust right now?  I could use channels, but it seems the overhead of MPSC might be unnecessary if I know there will be just one producer?
[15:01:41] *** Quits: btobolaski (btobolaski@moz-ltbh80.va.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:01:43] <hkr> it takes half a second to compile hello world
[15:01:46] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[15:01:50] <kimundi> hkr: If you disable optimizations, the compiler builds its first stage faster... But the second and third one will take waaay longer than what you gain
[15:01:52] <burntsushi> bstrie: (and it isn't negated by DFA, because an NFA is still needed when you have a DFA)
[15:01:59] <hkr> kimundi: so optimizations are to reduce runtime?
[15:02:04] <kimundi> hkr: Yes
[15:02:07] <burntsushi> bstrie: hopefully he'll submit a PR to `rust-lang/regex` :-)
[15:02:12] <rkruppe> hkr: Half a second to compile hello world is awful, that shouldn't happen
[15:02:21] <kimundi> hkr: But wait, "Hello World"? I thought you where talking about compiling the compiler?
[15:02:32] <bstrie> hkr: what kimundi says is slightly misleading, by default rust compiles as fast as it can *today*, but we're actively working on making compilation faster. it's an enormous priority https://github.com/rust-lang/rust/pull/24615
[15:02:44] <hkr> kimundi: im just starting out on rust
[15:02:44] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[15:02:49] <hkr> making a hello world program.
[15:03:05] <kimundi> hkr: What platform? windows, linux, mac?
[15:03:09] <hkr> linux
[15:03:09] <dschatzberg> is there a cfg for doctests?
[15:03:23] <hkr> rustc 1.0.0-beta (9854143cb 2015-04-02) (built 2015-04-02)
[15:03:26] <kimundi> hkr: huh, compiling should not take a second then...
[15:03:35] <hkr> half a second, actually
[15:03:35] <steveklabnik> dschatzberg: what do you mean, exactly?
[15:03:49] <dschatzberg> conditional compilation based on building doctests
[15:03:51] <steveklabnik> nope
[15:03:57] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[15:04:01] <hkr> also i have a 3rd gen i3 >_>
[15:04:10] <bstrie> kimundi: we used to have a lot of constant-time overhead during compilation due to decompressing metadata for a million unnecessary crates, I wonder if that's back
[15:04:15] *** Joins: minsler (Mibbit@moz-5tu.bk7.57.86.IP)
[15:04:33] <kimundi> bstrie: Oh, I'm sure there are tons of reasons why it could be :)
[15:04:34] <steveklabnik> hello world on linux beta here takes 0.268s, user
[15:04:36] *** Joins: jedahan (jedahan@moz-1ob.cck.122.38.IP)
[15:04:45] *** Quits: minsler (Mibbit@moz-5tu.bk7.57.86.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:04:57] <liamfraser> the speed of compilation is a minor issue at this stage
[15:05:11] <liamfraser> especially if it's being actively worked on
[15:05:17] <hkr> real 0m0.543s
[15:05:18] <rkruppe> hkr: Did you try it a second time? Depending on your setup, the first run may be a lot slower because none of the files are cached
[15:05:35] <hkr> rkruppe: yeah, first time its 0.7s
[15:05:43] <hkr> second time its 0.54s
[15:05:50] <hkr> i'll try on a faster machine later
[15:06:07] <hkr> but still, a 3rd gen i3 with plenty ram shouldn't take 0.5s
[15:06:18] <kimundi> hkr: hello world takes half a second for my i3 too, so I guess its not specific to you
[15:06:30] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[15:06:34] <bstrie> hkr: like I said, we're making compiler speed a top priority once the language itself is finally stable :)
[15:06:40] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Connection closed)
[15:06:43] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[15:06:50] *** Joins: giucam_ (giucam@moz-iv0nnc.bb.dnainternet.fi)
[15:07:01] <liamfraser> real	0m0.427s for me
[15:07:03] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:07:03] <kimundi> MIght be because it statically links per default, so it has to procccess the whole standart library
[15:07:04] <hkr> kimundi: :(
[15:07:08] <sillyname> a few hundred ms here with an i5, but i honestly haven't found compile times an issue
[15:07:20] *** Joins: ajitk (ajit@moz-6ht.i8n.51.106.IP)
[15:07:20] <rkruppe> Huh, 0.7s for me
[15:07:21] <Ms2ger> bstrie, I hope so! :)
[15:07:29] <rkruppe> My perception of time is just off
[15:07:43] <hkr> i searched in google and heard people saying it was because of "lack of incremental compilation"
[15:07:44] <bstrie> Ms2ger: pcwalton is basically livid at compile times currently, there's no need to hope :P
[15:07:47] <hkr> whats that?
[15:07:55] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:07:56] *** Quits: vairav (vairav@moz-qtc2tv.ca.comcast.net) (Ping timeout: 121 seconds)
[15:07:58] <bstrie> hkr: incremental recompilation wouldn't help hello world
[15:08:00] <liamfraser> as a comparison gcc can compile a C hello world in real	0m0.062s
[15:08:07] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[15:08:16] <kimundi> hkr: You know how a C program consists of many .c files that get compiled seperately?
[15:08:17] <Ms2ger> hkr, C compiles per file, Rust per library
[15:08:22] <liamfraser> anyway, I'm compiling rustc on a Raspberry Pi so you can all stop moaning about compile times :)
[15:08:27] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[15:08:29] <kimundi> hkr: For Rust, imagine just one big .c file
[15:08:37] <rkruppe> hkr: If you have a large project with lots of files, already compiled once, and change a single file, then incremental compilation is avoiding re-building all the other files
[15:08:38] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[15:08:48] <bstrie> hkr: run the compiler with "rustc -Z time-passes hello.rs" to see a breakdown of where the compiler is spending its time currently
[15:09:05] *** Quits: Jesse (jruderman@moz-pqc1f5.ca.comcast.net) (Client exited)
[15:09:08] <bstrie> linking is a big one, coherence checking is another one. the latter is very strange, I need to ask niko about it
[15:09:16] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[15:09:18] *** Quits: jedahan (jedahan@moz-1ob.cck.122.38.IP) (Ping timeout: 121 seconds)
[15:09:21] <rkruppe> 0.5s in coherence checking
[15:09:23] <rkruppe> All of my wat.
[15:09:26] <hkr> wait wtf
[15:09:32] <hkr> rustc -V takes 0.4s
[15:09:40] *** Joins: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca)
[15:09:41] <sillesta> bstrie: how do you pass that to cargo?
[15:09:43] *** Quits: makhauser (quassel@moz-7p8.00g.111.213.IP) (Ping timeout: 121 seconds)
[15:09:49] <kimundi> sillesta: can't, afaik
[15:09:58] <bstrie> sillesta: gotta get your hands dirty with rustc directly :)
[15:10:02] <sillesta> :(
[15:10:02] <kimundi> sillesta: have to run cargo with -v and copy/paste the command line manually
[15:10:04] <rkruppe> No time-passes for cargo, there's an open issue for that
[15:10:13] <rkruppe> Or for arbitrary rustc flags
[15:10:16] <huon> hkr: hm, that's weird; what platform are you on?
[15:10:24] *** Quits: zk (zk@moz-2k31nn.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[15:10:41] *** Joins: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP)
[15:10:48] <huon> (it takes 0.06s for me, on x86-64 linux)
[15:11:11] <liamfraser> is there anything special about the version of rustc that you compile rustc with?
[15:11:18] <liamfraser> as in are the snapshots special in any way?
[15:11:25] <steveklabnik> only that they're snapshots
[15:11:28] <kimundi> hkr: Anyway, looking at the time-passes output, it seems rustc basically took zero time for the actual program, and all time in linking the final object. So I guess its just the overhead for adding the std library itsefl, and thus constant
[15:11:37] <steveklabnik> like, it's just a particular version
[15:11:43] <steveklabnik> there's nothing special about that version, inherently
[15:11:44] *** Joins: edbond (edbond@moz-8st.7gv.108.109.IP)
[15:11:49] <liamfraser> hmm, I'm getting the error error: unresolved name `core::intrinsics::discriminant_value`
[15:11:55] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[15:12:09] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[15:12:14] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[15:12:15] <liamfraser> when compiling rustc using a nightly from a couple of days ago, but if I use a different snapshot from the start of the month then it works
[15:12:17] <kimundi> liamfraser: What are you doing?
[15:12:23] <liamfraser> ^^
[15:12:23] *** nsm|away is now known as nsm
[15:12:29] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[15:12:33] <steveklabnik> wasn't that intrinsic only added very recently?
[15:12:38] *** Quits: }ls{ (uhelp@moz-25pv1t.dip0.t-ipconnect.de) (Connection closed)
[15:12:43] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[15:13:10] <liamfraser> it's the rustc-1.0.0-beta.2.tar.gz that I'm compiling
[15:13:11] *** Joins: housl (housl@moz-qnjt4k.ut.comcast.net)
[15:13:14] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[15:13:39] <geofft> rustc is written to a particular version of the Rust language, and at least the unstable parts are still changing 
[15:13:54] <geofft> and only updated periodically 
[15:14:08] *** Quits: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP) (Ping timeout: 121 seconds)
[15:14:10] <liamfraser> yeah, I guess I just have incompatible versions at the moment
[15:14:13] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[15:14:17] *** Joins: meh (meh@moz-p5gc2m.42-151.net24.it)
[15:14:40] <geofft> unrelated question: are the std::atomic types guaranteed to have a particular memory representation? 
[15:14:51] *** Quits: sillyname (Mibbit@moz-r3h.em0.71.152.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:15:10] <rkruppe> geofft: If it's not written anywhere that it is, layout is not guaranteed
[15:15:17] <rkruppe> Why are you asking?
[15:15:29] <geofft> I want to take a raw int pointer from C and access it atomically 
[15:15:50] <geofft> I suppose my platform probably guarantees that ints are atomic, hm 
[15:16:06] <rkruppe> There's intrinsics for that, I think
[15:16:18] *** Quits: globin (globin@moz-isrgf8.de) (Connection closed)
[15:16:21] <rkruppe> Which the std::atomic types use, too
[15:16:23] <geofft> fiine, I'll figure out how those work :) 
[15:16:28] <hkr> huon: x860-64 linux
[15:16:31] <hkr> arch linux
[15:16:49] <liamfraser> ah, geofft you're right. The current latest snapshot is 2015-03-27 which is the one I was using before trying to use the latest version I had compiled
[15:17:22] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[15:17:27] <hkr> wait nevermind, rustc -V takes only 0.03s
[15:17:47] *** Joins: }ls{ (uhelp@moz-25pv1t.dip0.t-ipconnect.de)
[15:18:06] <rkruppe> hkr: Whew, okay. So what does -Z time-passes say?
[15:18:20] <hkr> lots of stuff
[15:18:23] *** Quits: vairav (vairav@moz-qtc2tv.ca.comcast.net) (Client exited)
[15:18:25] <hkr> reading wait
[15:18:36] <hkr>   time: 0.296  running linker
[15:18:38] <hkr> time: 0.297  linking
[15:18:49] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[15:19:19] <hkr> time: 0.185  coherence checking
[15:19:30] <hkr> those three are the major things, rkruppe 
[15:19:41] *** Quits: OmniMancer1 (OmniMancer@moz-6m1jrb.xtra.co.nz) (Quit: Leaving.)
[15:20:02] <hkr> and everytime i restart the system/change system and try rustc, it takes a while. even if i'm doing something like rustc -V
[15:20:04] *** Joins: globin (globin@moz-isrgf8.de)
[15:20:19] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[15:20:57] *** bentley is now known as bentley|away
[15:21:22] *** Joins: niconii (nicole@moz-isj0f9.frgo.qwest.net)
[15:21:30] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[15:21:49] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[15:22:11] <rkruppe> Matches what I'm seeing
[15:22:18] *** Joins: btobolaski (btobolaski@moz-ltbh80.va.comcast.net)
[15:22:29] <hkr> Well what is being linked anyways?
[15:22:40] <rkruppe> the standard library
[15:23:03] <hkr> and someone told me here early on that they aim to keep the standard library small
[15:23:08] <hkr> bad job so far i guess :P
[15:23:11] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[15:23:38] <geofft> well, there are different goals, and different meanings of "small" 
[15:23:38] <rkruppe> It is small, compared to other languages, but it's still a few megabyte of compiled code (I think?)
[15:23:41] <hkr> (and I knew the std library was being linked, not sure why I asked a stupid question)
[15:24:06] <rkruppe> Now I really want to look into making rustc use lld
[15:24:08] <geofft> the standard library is "small" in the sense that it's not, e.g., batteries-included like Python 
[15:24:34] <hkr> so the big compile time has nothing to do with LLVM
[15:24:35] <geofft> it's also "small" in the sense that you can safely write dynamic libraries in Rust, for use by other languages, without weird things happening 
[15:24:58] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[15:25:09] <geofft> it's not very "small" in the sense of a low number of symbols. try running nm against your binary :) 
[15:25:38] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[15:26:16] *** Quits: Dr-Emann (Dr-Emann@moz-f8hd1t.tvh.ptd.net) (Ping timeout: 121 seconds)
[15:26:18] *** Quits: ebel (rory@moz-l1ldq7.hsi4.kabel-badenwuerttemberg.de) (Quit: Leaving)
[15:27:10] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Quit: Ex-Chat)
[15:27:22] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[15:27:52] *** Joins: Dr-Emann (Dr-Emann@moz-f8hd1t.tvh.ptd.net)
[15:28:37] <geofft> Kimundi: is there a writeup of how lazy_static's implementation works? 
[15:28:38] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[15:29:46] <geofft> kimundi: e.g., why the structs aren't unit-like, why __static_ref_initialize is a separate fn, etc. 
[15:30:10] *** Quits: sirGusWrk (Gustav@moz-bo7slh.sme.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[15:30:33] <steveklabnik> SimonSapin: ping
[15:30:57] *** Joins: rfnash (weechat@moz-ulk8um.in.comcast.net)
[15:31:11] *** Quits: marcusklaas (marcus@moz-0ol9oe.chello.nl) (Client exited)
[15:31:49] <bstrie> hkr: the big compile time for hello world doesn't have anything to do with llvm, but as your programs get larger llvm becomes the bottleneck (though it's rustc's fault for passing LLVM not-great IR)
[15:32:10] <hkr> bstrie: so you're saying its going to take even more time for larger programs ._.
[15:32:22] <bstrie> hkr: still faster than C++! :)
[15:32:35] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:32:35] *** ChanServ sets mode: +o erickt
[15:32:59] *** Quits: agarie (agarie@moz-3eg.b1m.32.177.IP) (Connection closed)
[15:33:18] <liamfraser> hkr: well it doesn't scale up in linear time from hello world
[15:33:22] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[15:33:33] *** Joins: frankmcsherry (frankmcsher@moz-faa086.adsl.alicedsl.de)
[15:34:48] <hkr> bstrie: hello world took 0.25 seconds in C++
[15:34:52] <liamfraser> http://pastebin.com/jfesTf7p
[15:34:56] <liamfraser> hkr ^^
[15:35:01] <liamfraser> significantly more complicated than hello world
[15:35:33] <liamfraser> that's a whole web framework with a templating library, regex library, openssl, etc..
[15:35:37] <liamfraser> and it takes 50 seconds
[15:35:41] *** Joins: eerie_ (eerie@moz-joilui.red.bezeqint.net)
[15:35:44] <liamfraser> when hello world takes 0.5
[15:36:04] <hkr> so... are you saying thats good or bad?
[15:36:14] <liamfraser> I'm saying it's not as bad as you're making out
[15:36:15] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:36:19] <hkr> cool 
[15:36:22] <hkr> i just started with rust and have no idea what cargo is building
[15:36:23] <kimundi> geofft: There isn't a separate write up, no. I can explain it if you want :)
[15:36:25] <liamfraser> because unless you're building a huge piece of software
[15:36:39] <liamfraser> as in larger than all of those libraries put together it won't be too bad :)
[15:36:51] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:36:58] <hkr> anyways, the only reason I asked is because one of the things that drove me to start learning rust was that I heard it was 'blazing' fast
[15:37:08] <hkr> I hope 1.0 makes compiling a bit more faster
[15:37:18] <bstrie> hkr: rust is blazing fast, that line is talking about compiled code :P
[15:37:22] *** Quits: pdgendt (pdgendt@moz-3q0nfd.access.telenet.be) (Connection closed)
[15:37:26] <bstrie> not the speed of compilation itself
[15:37:37] <geofft> kimundi: yeah I'm curious about those two things 
[15:37:51] <geofft> if you have time! 
[15:38:43] <hkr> bstrie: :(
[15:38:58] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[15:39:02] <hkr> "time complexity involves compilation time and time to run the object code"
[15:39:23] <hkr> whatever that means, I see it a lot
[15:39:27] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:39:39] <bstrie> hkr: I have never heard anyone say that before
[15:39:46] *** Joins: smarks_ (smarks@moz-5vj.vr4.79.109.IP)
[15:39:51] <hkr> you clearly have not tried studying computer science in india
[15:40:12] <hkr> anyways, how does the time to run object code match up against others?
[15:40:36] <bstrie> hkr: as fast as C and C++, and if it's not then you're allowed to file a bug so that we make it faster :)
[15:40:37] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[15:40:45] <rkruppe> Rust run-time performance is usually competitive with C/C++ (and when not, that's considered a bug)
[15:40:54] <hkr> well that sounds good
[15:41:24] *** Quits: smarks (smarks@moz-5vj.vr4.79.109.IP) (Ping timeout: 121 seconds)
[15:41:24] <bstrie> hkr: in any case, "time complexity" does not involve actually running anything. it's an algorithmic analysis that in fact *ignores* real-world concerns, such as constant-time factors, often to its detriment
[15:41:34] <kimundi> geofft: Okay, so the structs are not unit like because you could create them locally that way - that wouldn't really be bad though, but I wanted to prevent that
[15:41:50] <liamfraser> hkr: don't believe everything you learn in computer science
[15:41:51] <kimundi> geofft: By making them have a private field, its not possible to create them outside the module
[15:41:55] <liamfraser> a lot of it is theoretical
[15:42:06] <Hannibal_Smith> liamfraser, that definition is simply wrong
[15:42:14] <liamfraser> ^
[15:42:23] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[15:42:32] <hkr> bstrie: forget that. i don't really like what is being taught to us. most of the stuff are already outdated, just taught to us as if to say 'this is how everything began'
[15:42:32] <liamfraser> I can't wait till I graduate, which is still another year away
[15:42:56] <hkr> I can't wait till I graduate so I can leave this hell
[15:43:00] *** Quits: niconii (nicole@moz-isj0f9.frgo.qwest.net) (Quit: Lost terminal)
[15:43:37] <geofft> kimundi: oh, interesting. 
[15:43:41] * mbrubeck suspects Indian CS depts. have been secretly infiltrated by Rob Pike and Ken Thompson, pushing a secret Go / Plan9 agenda. ;)
[15:43:57] <kimundi> geofft: Most of the internal seemingly uneccessary functions are for scoping reasons - the initializing expression just gets pasted into that template after all, so anything visible in an outer scope would be as well, which is kinda unhygenic. For example, there was for a long time the bug that all expressions could use unsafe code, because the was a outer unsafe block in the macro
[15:44:00] *** Joins: niconii (nicole@moz-isj0f9.frgo.qwest.net)
[15:44:04] *** Quits: ekiwi_ (kevin@moz-b1dekb.eduroam.rwth-aachen.de) (Client exited)
[15:44:07] <hkr> More like Bjarne Stroupstup and Alan Turing
[15:44:08] <bstrie> mbudde: and UTF-8! those bastards
[15:44:12] *** Joins: ekiwi (kevin@moz-b1dekb.eduroam.rwth-aachen.de)
[15:44:13] <bstrie> er, mbrubeck ^
[15:44:14] *** Quits: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP) (Ping timeout: 121 seconds)
[15:44:14] *** ekiwi is now known as ekiwi_
[15:44:19] <geofft> ohhhh lol 
[15:44:32] *** Quits: thelastinuit (thelastinui@moz-doh.aqt.240.148.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:44:37] <geofft> ok, I see that 
[15:44:37] *** Joins: veqz (veqz@moz-nvr8g6.209.getinternet.no)
[15:44:42] *** Quits: tomaka (Pierre@moz-m1l3v0.abo.wanadoo.fr) (Connection closed)
[15:44:46] *** Quits: Eonil (Eonil@moz-05i.nh3.123.58.IP) (Quit: This computer has gone to sleep)
[15:44:58] *** Quits: mceier (mceier@moz-fm89sb.dynamic.chello.pl) (A TLS packet with unexpected length was received.)
[15:44:59] <rkruppe> Anyone spreading the UTF-8 word is fighting the good fight
[15:45:18] * hkr supporst ASCII
[15:45:29] <Hannibal_Smith> hkr, just a personal opinion, I would question myself how I well an interview can go with such definition of time complexity
[15:45:45] *** Joins: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP)
[15:45:48] *** Quits: MaxV (MaxV@moz-1nu.kln.167.83.IP) (Connection closed)
[15:46:06] <hkr> Hannibal_Smith: I would forget that soon
[15:46:10] <Hannibal_Smith> Ok
[15:46:13] <hkr> just like i forget half of the things being taught
[15:46:29] *** Quits: harikb (harikb@moz-te5530.compute.amazonaws.com) (Quit: ZNC - http://znc.in)
[15:46:37] <rkruppe> =/ is it that bad?
[15:46:43] <hkr> nope
[15:46:45] *** Joins: mceier (mceier@moz-fm89sb.dynamic.chello.pl)
[15:46:45] <hkr> they teach crap
[15:46:51] <hkr> im in it just for the degree
[15:46:55] *** Quits: smarks_ (smarks@moz-5vj.vr4.79.109.IP) (Ping timeout: 121 seconds)
[15:46:56] *** Joins: tomaka (Pierre@moz-m1l3v0.abo.wanadoo.fr)
[15:47:49] <hkr> and apparently time complexity is the time taken by an algorithm to run to its completion relative to the input size
[15:48:07] *** Joins: smarks (smarks@moz-5vj.vr4.79.109.IP)
[15:48:12] <Mutabah> mkpankov: (re my github account) yes, it is
[15:48:14] <hkr> right? not that I would have any use of a definition like this in the near future...
[15:48:22] <kimundi> hkr: sound right
[15:48:36] <hkr> back to rust :D
[15:48:38] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:48:43] <bstrie> hkr: that definition is correct :)
[15:48:45] <hkr> i'll annoy you guys with stupid question later
[15:48:52] <hkr> questions*
[15:48:53] <kimundi> hkr: And is generally useful to keep in mind whne reasoning about how long an algorithm is going to take in general
[15:48:53] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[15:48:53] <bstrie> hkr: I look forward to being annoyed
[15:49:10] *** Parts: hkr (hkr@moz-mvo.sbg.89.59.IP) ("later")
[15:49:13] *** Quits: squiddy_ (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[15:49:21] *** Quits: dstrbad (dstrbad@moz-3vdjjr.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[15:50:13] <frankmcsherry> bstrie: *makes note of that*
[15:50:16] *** Joins: dstrbad (dstrbad@moz-3vdjjr.dsl.iskon.hr)
[15:50:20] *** Joins: harikb (harikb@moz-te5530.compute.amazonaws.com)
[15:50:27] *** Joins: brachy (breiska@moz-sdntg3.dhcp.inet.fi)
[15:50:41] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[15:51:24] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[15:51:34] <Manishearth> mbrubeck: hahahahaha
[15:51:42] <Manishearth> actually no, they do C/C++/Java here
[15:51:47] <Manishearth> if you're lucky, Python
[15:51:54] <Manishearth> (India in general, that is)
[15:52:24] *** Quits: breiska (breiska@moz-sdntg3.dhcp.inet.fi) (Ping timeout: 121 seconds)
[15:52:36] <Manishearth> mbrubeck: me having to use Go for a course was because the course was being taught by an awesome prof who was also a language geek/polyglot
[15:53:05] *** Quits: ekiwi_ (kevin@moz-b1dekb.eduroam.rwth-aachen.de) (Client exited)
[15:53:11] <Manishearth> (he knows Nim and Rust; I think he knows Rust as well as Go, and he's friends with Niko, which is how I got around to taking that course in the first place)
[15:53:24] <nox> What is spreading the UTF-8 word?
[15:53:25] <Manishearth> he made us use Go because that was the only language he could expect us all to learn quickly
[15:53:34] <Hannibal_Smith> Manishearth, just a curiosity without begin too off topic here...did you find Go easier to learn and use than Python or Java?
[15:53:34] <kmcguire> whats the format `{}` code for a floating point with maximum precision?
[15:53:37] <Manishearth> and had good concurrency support
[15:53:46] <kmcguire> i try {:20f} but the `f` is invalid
[15:53:50] <Manishearth> Hannibal_Smith: http://inpursuitoflaziness.blogspot.in/2015/02/thoughts-of-rustacean-learning-go.html
[15:53:54] <erickt> SimonSapin: ping
[15:53:55] <Manishearth> kmcguire: {:.20}
[15:53:55] <kmcguire> im looking at, https://doc.rust-lang.org/std/fmt/
[15:54:04] <kmcguire> oh crap dot, thanks Manishearth 
[15:54:07] <Hannibal_Smith> Thank you Manishearth
[15:54:30] *** Quits: dstrbad (dstrbad@moz-3vdjjr.dsl.iskon.hr) (Ping timeout: 121 seconds)
[15:54:32] <Manishearth> Hannibal_Smith: I like python better. But. I have spent a significant amount of time with Python and Java, not so with Go
[15:54:41] <Hannibal_Smith> I think that is great that you put on a blog post your opinions on that
[15:54:46] <Manishearth> heh
[15:56:09] *** Quits: smarks (smarks@moz-5vj.vr4.79.109.IP) (Ping timeout: 121 seconds)
[15:57:21] *** Joins: smarks (smarks@moz-5vj.vr4.79.109.IP)
[15:57:40] <dzyp> i'm big in go and am learning rust
[15:57:53] *** Quits: fabianvf_ (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[15:57:56] <dzyp> i can tell you that the alrogithms/data structures we've ported so far have seen a huge improvement in rust
[15:58:08] <dzyp> including algorithms that are already highly optimized in go
[15:58:10] <raph1> interesting blog post; i think the desire to compare go/rust is a little overblown though, they really are different languages for different use cases
[15:58:16] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[15:58:29] <raph1> dzyp: i saw your lockfree data structure post, that also looked really interesting
[15:58:29] <dzyp> someone i work with just ported over a recursive descent parser and saw 38% improvement
[15:58:33] *** Joins: havarnov (Mibbit@moz-ae2rue.254.getinternet.no)
[15:58:40] <Mutabah> raph1: Originally afaik they were similar
[15:58:43] <Mutabah> nowdays... less so
[15:58:55] <raph1> dzyp: i've heard it said that gc is pretty much a prerequisite for efficient lockfree data structures
[15:59:02] <raph1> i guess you'll find out soon whether that's true :)
[15:59:09] <Mutabah> gc... and efficient?
[15:59:15] <dzyp> haha
[15:59:17] <dzyp> https://github.com/Workiva/go-datastructures/tree/master/rtree/hilbert
[15:59:22] <dzyp> that's what i'll be working on next
[15:59:26] *** Joins: askalski (akuda@moz-857tih.warszawa.vectranet.pl)
[15:59:36] <dzyp> the current implementation is getting killed doing dynamic dispatch on the interface
[16:00:17] <raph1> dzyp: sure, i think i was thinking more along the lines of java
[16:00:41] <Mutabah> rkruppe: Mind repeating that here?
[16:00:53] <raph1> dzyp: from my experiments, using interfaces also has a horrible negative impact on json speed, compared with bare-metal serialization code
[16:01:02] <Hannibal_Smith> raph1, is easier, not more efficient. The problem is that memory reclamation algorithms are usually difficult or patented
[16:01:14] <rkruppe> Mutabah: Repeat what?
[16:01:15] <shanemhansen> raph1, I've also heard that a gc really benefits certain types of lock free data structures. Let me see if I can find a reference to the specific one.
[16:01:32] <Mutabah> rkruppe: Oh, sorry, thought you accidentally cross-posted. GC discussion in both channels
[16:01:34] <Manishearth> raph1: agreed
[16:01:52] <Manishearth> from what I see, as far as *applications* go Rust covers more ground than Go
[16:02:02] <Manishearth> but as far as developer workflows go, the two are very different
[16:02:06] <dzyp> i think it depends on how you implement lock-free
[16:02:08] <shanemhansen> I'm not an expert, but I seem to recall hazard pointers http://en.wikipedia.org/wiki/Hazard_pointer solving some problem in that area.
[16:02:19] <dzyp> that rtree is lock free, but is implemented in memory using PALM
[16:02:28] <dzyp> don't think it should be too difficult
[16:02:33] <havarnov> i've made a multimap library and thought maybe someone else could use it. But before I take the "multimap" name on crates.io I wanted to check with you guys if that name should be reserved for a better implementation? My multimap is just a thin wrapper around HashMap<K,Vec<V>>. https://github.com/havarnov/multimap
[16:02:34] *** Quits: duncanmv (duncan@moz-2vm4r8.kosq.rj4h.0113.2620.IP) (Quit: Ex-Chat)
[16:02:39] <Hannibal_Smith> raph1, if you are curious about something interesting, http://en.wikipedia.org/wiki/Read-copy-update
[16:02:40] *** Joins: pvinis (pvinis@moz-mddkaj.static.inode.at)
[16:02:49] <Hannibal_Smith> Is very similar to a GC in the end
[16:03:00] <Hannibal_Smith> But without the tradeoff that a genric GC has to do
[16:03:06] *** Joins: jadbaires (jadrian@moz-2rsfti.dsl.telepac.pt)
[16:03:13] <Hannibal_Smith> And as you can see, it is used inside project like the Linux kernel
[16:03:38] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[16:03:42] <raph1> Hannibal_Smith: right, I had come across that before
[16:03:57] <dzyp> Hannibal_Smith: i think a lot of the concern over lock free comes from copy on write datastructures
[16:04:05] <dzyp> functional datastructures
[16:04:09] <raph1> my main interest in lockfree was being able to share stuff to a realtime audio thread from an app
[16:04:15] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[16:04:20] *** Quits: wei2912 (wei2912@moz-42b.ir0.156.175.IP) (Quit: Lost terminal)
[16:04:33] <nwin> How would you handle Errors in drop? It is almost impossible to write proper RAII guards for files…
[16:04:34] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[16:04:35] <dzyp> and those are technically lock free, but that's somewhat misleading
[16:04:51] *** Quits: pvinis (pvinis@moz-mddkaj.static.inode.at) (Quit: Leaving...)
[16:05:09] <dzyp> yes, you can write while you read but you can't really write at the same time and get the final result, at least in a lot of cases as far as i know
[16:05:29] *** Joins: nerdopoly (Mibbit@moz-lm1c50.range86-146.btcentralplus.com)
[16:05:29] <dzyp> in other words, writes still have to be serialized for the data structure to end up in the expected state
[16:06:16] <rkruppe> nwin: "Pray no errors happen" is the best solution I've seen so far
[16:06:36] <bstrie> nwin: abort the process
[16:06:55] <skade> does anyone have any further ideas here? http://users.rust-lang.org/t/searching-for-a-nice-to-and-from-binary-slice-abstraction/1092/7 (playpen:  http://is.gd/oiUh5M )
[16:07:15] *** Joins: nicoch (nicoch@moz-g02d7k.be)
[16:07:29] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[16:07:41] <bstrie> nwin: it's exactly as fraught as it is in c++ :)
[16:08:01] <nwin> bstrie: I don’t want to panic just because I could not write the file properly…I wonder if it would be better to use the closure-method from thread::scoped 
[16:08:20] *** Joins: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu)
[16:08:39] <Hannibal_Smith> dzyp, yes and I think that is actually accepted by any FP dev. If you read the Simon Marlow book on concurrent and parallel software inside Haskell, it's clear that you have to use things like lock, SMT...
[16:08:43] <raph1> dzyp: in any case, I salute you for working on this stuff, memory models make my head hurt
[16:08:45] <bstrie> nwin: RAII isn't always perfect, use the right tool for the job :)
[16:08:47] *** Quits: eerie_ (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[16:08:56] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[16:09:09] <dzyp> some academics did the hard work :)
[16:09:16] <dzyp> i just translate that stuff to code where i can
[16:09:19] *** Joins: drewm1980 (drewm1980@moz-b5ce5a.hujf.dasj.1812.2a02.IP)
[16:09:45] <drewm1980> Gooie morgen rustaceans!
[16:09:54] <bstrie> moiin
[16:09:59] <dzyp> and i found that a lot of academic papers skip over some very important pieces :(
[16:10:08] <drewm1980> Anyone have a good recommendation for a rust data structures tutorial?  
[16:10:11] <dzyp> b-link trees are one example, they basically just ignore deletes
[16:10:21] <dzyp> in the original paper anyway
[16:10:47] <drewm1980> i.e. various flavors of trees.  I'm not even doing graphs, and am still getting bogged down in borrow checker issues.
[16:10:48] <Hannibal_Smith> dzyp, or make comparisons that are simply silly like "Is how how sorting algo. is x4 tha...bublesort!"
[16:10:59] *** bentley|away is now known as bentley
[16:11:12] <bstrie> drewm1980: try http://cglab.ca/~abeinges/blah/
[16:11:13] <Mutabah> drewm1980: Are you using &-ptrs for nodes?
[16:11:39] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[16:11:39] <raph1> dzyp: the part that's scariest to me is figuring out the right weak memory guarantee to use, and making sure it actually does the right thing on all arch's
[16:12:05] <raph1> dzyp: for example, it's pretty easy to do a ring buffer that works on x86 but fails on ARM because the former has TSO
[16:12:43] *** Quits: timonv (timonv@moz-7btgcn.dynamic.ziggo.nl) (Ping timeout: 121 seconds)
[16:13:07] <mkpankov> raph1: TSO?
[16:13:10] <rkruppe> Things like these are why I'm scared of anything concurrency-related other than straight-up no-sharing message passing
[16:13:19] <drewm1980> Mutabah: I tried a few variations on Box<Vec<>> and Vec<Box> and Vec<&..> for the node children...
[16:13:21] <raph1> total store order, sorry
[16:13:34] <hoverbear> rkruppe: Did you read "Fearless concurrency"?
[16:13:51] <nwin> bstrie: this is really a tricky problem…ideally one would have a `finalize` that returns a Result…
[16:13:56] <drewm1980> bstrie: Thanks!  I will go read.
[16:14:00] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[16:14:00] <hoverbear> rkruppe: http://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html
[16:14:00] <Hannibal_Smith> raph1, MS tried to force SC as unique memory model for C++ for this reason
[16:14:00] <rkruppe> hoverbear: I'm aware it exists, but never read it for lack of time/interest
[16:14:08] <rkruppe> Oh, that blog post
[16:14:12] <rkruppe> I thought of something different
[16:14:20] *** Joins: bombless (_@moz-ud2b84.0v2u.0v40.0da8.2001.IP)
[16:14:26] <hoverbear> rkruppe: Might be relevant to your above messages.  :)
[16:14:36] <raph1> Hannibal_Smith: there was another recent paper proposing we just do SC, lemme find it
[16:14:38] <rkruppe> Yes, I know what safe Rust brings to the table
[16:14:56] <rkruppe> I meant things like discussed by raph1 etc.
[16:14:57] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:15:53] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:16:14] *** Joins: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl)
[16:16:16] *** bvssvni is now known as bvssvni_
[16:16:23] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[16:16:24] *** Quits: amyers (amyers@moz-f2k.1cm.177.128.IP) (Connection closed)
[16:16:30] *** ahal is now known as ahal|lunch
[16:16:35] *** Joins: amyers (amyers@moz-f2k.1cm.177.128.IP)
[16:16:45] *** Quits: fyolnish (fyolnish@moz-3n24u8.so-net.ne.jp) (Connection closed)
[16:17:06] <dzyp> yeah, rkruppe,  i think there's multiple classes of problems there
[16:18:06] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[16:18:08] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[16:18:40] <dzyp> but there is lots of good literature around concurrent data structures
[16:18:50] <dzyp> hashmaps, trees, skiplists, etc
[16:19:07] <dzyp> java has a really really good library of concurrent data structures
[16:19:28] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:19:28] *** Quits: sonder (chatzilla@moz-nt8r49.idi.ntnu.no) (Ping timeout: 121 seconds)
[16:19:36] <rkruppe> It's not that I mistrust the very fine researchers and programmers working on these things
[16:19:51] *** Joins: alex3 (alex@moz-s9a.qrc.242.157.IP)
[16:19:56] <rkruppe> I just can't see myself developing any sort of confidence that what *I* wrote is correct
[16:20:07] <Hannibal_Smith> .Net has also some, but are actually implemented more for "correctness" than performance
[16:20:10] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[16:20:16] <dzyp> haha, i will say that golang goes a long way there with their race detector
[16:20:17] *** Joins: mib_yftm62 (Mibbit@moz-466.rhj.204.184.IP)
[16:20:17] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:20:17] *** ChanServ sets mode: +o erickt
[16:20:23] <dzyp> and their cpu profiler is good too
[16:20:23] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[16:20:38] <dzyp> which is good, because apparently with go you need to really work to get good performance
[16:21:18] *** Quits: konsolebox (konsolebox@moz-lpd.tgb.198.112.IP) (Ping timeout: 121 seconds)
[16:21:34] *** Quits: kushal (kdas@moz-r2sm7r.202.sitibroadband.in) (Connection closed)
[16:21:43] <dzyp> but imo, threadsafety has been the easy part, it's correctness that's hard
[16:22:20] *** Joins: Porkepix (Porkepix@moz-71m.3nd.202.89.IP)
[16:22:29] *** Joins: lutter1 (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net)
[16:22:30] *** Joins: alex-diez (chatzilla@moz-jqd8kq.pool.ukrtel.net)
[16:22:37] *** bentley is now known as bentley|away
[16:23:34] *** Quits: tcard (tcard@moz-5eb1g3.staticIP.rima-tde.net) (Client exited)
[16:24:05] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[16:24:24] <dzyp> haha, just read the previous chats about time complexity as well
[16:24:25] *** Quits: lnwdr (lnwdr@moz-fsg.jna.74.195.IP) (Quit: Leaving...)
[16:24:26] *** Joins: agarie (agarie@moz-3eg.b1m.32.177.IP)
[16:24:46] <dzyp> found that with the y-fast and x-fast tries
[16:24:52] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[16:25:43] *** Joins: kushal (kdas@moz-r2sm7r.202.sitibroadband.in)
[16:25:58] <mib_yftm62> I have a borrow lifetime question. The code here http://is.gd/BhRTog produces a 'cannot move' error for &location. Why does the lifetime of &location last beyond the end of the call to Path:::new()?
[16:25:59] <raph1> this is the closest match to the paper I was looking for: http://web.eecs.umich.edu/~nsatish/papers/ISCA-12-SC.pdf
[16:25:59] *** bentley|away is now known as bentley
[16:26:44] <Hannibal_Smith> Thank you raph1 
[16:26:55] <raph1> there's a more recent one that I think is written for a more general audience, basically arguing that languages should support only sequential consistency because it is possible to make it almost as efficient as a relaxed memory model, and much easier to program
[16:27:01] <raph1> but i can't easily find it
[16:27:24] *** Joins: vairav (vairav@moz-pkkcjo.modeln.com)
[16:27:31] *** Quits: nerdopoly (Mibbit@moz-lm1c50.range86-146.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:27:33] <FreeFull> mib_yftm62: You mean, why it's failing if you don't have the extra scope put in?
[16:27:44] <mib_yftm62> FreeFull: Yes
[16:27:57] <FreeFull> I think it's because we don't have non-lexical lifetimes yet
[16:28:15] <FreeFull> so location remains borrowed till the } right after the return
[16:28:22] <mib_yftm62> I thought that this particular instance was handled
[16:28:26] <bstrie> FreeFull: I dunno, it looks kinda like a bug to me
[16:28:26] <mib_yftm62> I'll look for the link
[16:28:41] *** Quits: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net) (Ping timeout: 121 seconds)
[16:28:49] <rkruppe> If Path::new only borrowed for the duration of the call, it would work
[16:28:56] <mib_yftm62> let path = { Path::new(&location) }; also does not work
[16:29:01] <raph1> but my personal feeling is that the fancier memory models are useful, it's just that 99% of the time they should be in libraries written by experts, that real lock-free algorithms are too hard for normal programmers whether it's SC or a relaxed memory model
[16:29:29] <FreeFull> mib_yftm62: http://is.gd/XEG7ek This particular code works if you don't want the extra scope
[16:29:36] *** Quits: lenstr (lenstr@moz-lno.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[16:29:41] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[16:29:50] <rkruppe> mib_yftm62: A Path is now a type like str, it only refers to someone else's memory, so Path::new(&location) returns a &Path that points into location's storage
[16:30:00] <FreeFull> mib_yftm62: The problem is with the path variable itself, it borrows the String
[16:30:09] <FreeFull> And what rkruppe said
[16:30:39] <mib_yftm62> ok, I was starting to suspect it involved `path`
[16:30:56] <mbrubeck> mib_yftm62: This side-steps the borrow issue, but I'd just like to point out that you don't need a Path at all: http://is.gd/aYXxVk
[16:30:57] <mib_yftm62> because I wrote similar code that worked 
[16:31:13] <mbrubeck> because String is already AsPath
[16:31:23] <mib_yftm62> Oh. how about that.
[16:31:38] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[16:31:48] <mbrubeck> I mean AsRef<Path>, whatever it's called now. :)
[16:32:48] <Hannibal_Smith> raph1, yes I think that a good number of people think the same
[16:33:28] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:33:40] <raph1> Hannibal_Smith: a very good place to be in the long term is to have a formal semantics that includes the memory model, so you can have a proof that unsafe { } blocks actually work
[16:34:20] <raph1> but in the meantime, academic research + testing can get you most of the way there
[16:34:28] *** Quits: sp0 (seth@moz-3cvluq.internode.on.net) (Quit: Lost terminal)
[16:35:20] <bascule>  13_4__8__ 9_11__12_  13_4__ 8_9__11_    13_ 4_8_   11__12_ 13_ 4_ 
[16:35:23] <bascule> 4|  8_9__11|  12_ 13\4|_ 8_9|  11_ 12\  4/ 8\\ 9\ 11/ 12/ 13| 4| 8|
[16:35:26] <bascule> 8| 9|_  12| 13|_4) 8|| 9|11| 12| 13| 4|/ 8_ 9\11\ 12V 13/| 4| 8| 9|
[16:35:29] <bascule> 9|  11_12| 13|  4_ 8< 9| 11|12| 13|_4| 8/ 9__11_ 12\| 13| 4|8_|9_|11_|
[16:35:32] <bascule> 11|_12|   4|_8| 9\_11\_12__13|_4__8_/9_/   12\13_\4_| 8(9_|11_|12_)
[16:35:35] <bascule>                                         
[16:35:45] <Hannibal_Smith> raph1, MS research did it with http://vcc.codeplex.com and it's actually used for verify the correctness of MS hypervisor Hyper-V
[16:36:18] <rkruppe> Sign me up for formal semantics
[16:36:28] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[16:36:35] <raph1> Hannibal_Smith: right, hopefully will be even more practical in Rust than C(++)
[16:36:48] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[16:37:07] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[16:37:08] <raph1> but i'm sure it will take several years to happen
[16:37:10] <rkruppe> I want to hook a theorem prover into the compiler so that correctness proofs can be embedded in the source code (or conversely, source code in the correctness proof in a way that can be extracted automatically)
[16:37:18] *** Quits: drewm1980 (drewm1980@moz-b5ce5a.hujf.dasj.1812.2a02.IP) (Ping timeout: 121 seconds)
[16:37:38] *** Quits: vairav (vairav@moz-pkkcjo.modeln.com) (Client exited)
[16:37:50] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:37:56] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[16:38:02] <raph1> rkruppe: i think using a theorem prover is a good thing, I'm less convinced it needs to be hooked into the compiler
[16:38:15] <raph1> what's wrong with having it as a super-duper-lint?
[16:38:25] <rkruppe> Not really coupled with rustc really
[16:38:33] <raph1> ie, a tool you run over your source that reports "all unsafe blocks are sound"
[16:38:36] <mkpankov> bascule: how did you do that?
[16:38:42] *** Joins: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de)
[16:38:53] <rkruppe> But starting from the same, canonical source code that rustc sees, so that proof and implementation can't converge
[16:39:49] <rkruppe> *diverge
[16:40:05] <Hannibal_Smith> raph1, at least from my point of view the problem is more make interesting Rust to people who have experience in this area :-P For MS is easy to put some searcher working on something
[16:40:06] <raph1> rkruppe: yes, I think that's an important goal. Perhaps something like a #[proof(blahblah.hol)] annotation before an unsafe{}
[16:40:25] <mate> mutate it on all the threads
[16:40:50] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[16:40:51] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Ping timeout: 121 seconds)
[16:40:56] <bascule> mkpankov: spam the channel with rainbowfriday? I use a fork of figlet called toilet
[16:41:14] <raph1> Hannibal_Smith: if I were dictator of the world, PL research departments would drop almost all of what they're doing and work on Rust-related projects
[16:41:30] <rkruppe> raph1: Last time I tried to prove some Rust code memory safe, my argument spanned several unsafe blocks and safe methods
[16:41:48] *** Joins: dylan_ (dylan@moz-k5u.d0d.43.100.IP)
[16:41:56] <havarnov> what's a good strategy to handle Option<Option<T>>. E.g. if I want &T or some default value?
[16:42:19] <raph1> rkruppe: I see what you mean, but the safe methods that the unsafe blocks rely in are arguably part of your "trusted kernel"
[16:42:29] <bstrie> I've been wondering if it would be useful to have "capture clauses" on unsafe blocks, such that from within the unsafe block you could only reference variables mentioned in the capture clause
[16:42:42] <raph1> do you could argue that they should be inside unsafe{} also because changing them could destroy safety
[16:42:44] *** Quits: yuja (yuja@moz-3k3neh.so-net.ne.jp) (Ping timeout: 121 seconds)
[16:42:44] <rkruppe> Of course they are, which is why the proof needs to touch them
[16:43:17] <bstrie> rkruppe: what that capture clause idea have aided your proof?
[16:43:22] <raph1> but i suppose that's a style Q
[16:43:31] <bstrie> by making your invariants more explicit, that is
[16:43:38] *** Quits: nical (nical@moz-ductqg.2500.1rfi.0450.2001.IP) (Client exited)
[16:43:44] <rkruppe> That may work, yes
[16:43:52] *** Joins: kgrandon (Adium@moz-pq70bc.hjek.d045.0009.2601.IP)
[16:44:40] <rkruppe> My invariant was basically "for each Foo, there is only one Bar on which methods can be called", which goes beyond a single function though
[16:44:52] *** Joins: ianj (ianjneu@moz-03gv4a.ccs.neu.edu)
[16:44:54] <Manishearth> rkruppe: it would be easy to write a lint that does this
[16:44:58] <rkruppe> where Bar holds a pointer to some memory Foo allocates
[16:45:11] <rkruppe> Manishearth: Does what exactly?
[16:45:14] *** Quits: jadbaires (jadrian@moz-2rsfti.dsl.telepac.pt) (Ping timeout: 121 seconds)
[16:45:15] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[16:45:36] <Manishearth> rkruppe: looks for a marked capture clause above an unsafe block
[16:45:36] <bstrie> Manishearth is the lintmaster
[16:45:40] *** Joins: vairav (vairav@moz-pkkcjo.modeln.com)
[16:45:58] <Manishearth> #[warn(Manishearth)]
[16:46:02] *** Quits: ianj (ianjneu@moz-03gv4a.ccs.neu.edu) (A TLS packet with unexpected length was received.)
[16:46:23] <rkruppe> Manishearth: That should be easy, yes
[16:46:26] <Manishearth> warning: Manishearth detected. Please don't listen to him when he tries to push everything to compile time
[16:47:01] <Manishearth> rkruppe: something like #[unsafe_capture] { let foo = ...; let bar = ...; unsafe {....}}
[16:47:16] <Manishearth> or, #[capture(foo,bar)] unsafe {}
[16:47:27] <raph1> rkruppe: out of curiosity, what formal proof framework are you thinking of? HOL? Coq? Something else?
[16:47:42] <Manishearth> the former can be done by def map searches (needs a visitor), the latter also needs a visitor but you can just check the paths
[16:48:09] *** Quits: sysko (bst@moz-qau.e3g.230.116.IP) (Ping timeout: 121 seconds)
[16:48:16] <rkruppe> raph1: I have little experience with HOL and Coq. I've taken a liking to Lean lately
[16:48:21] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:48:21] *** ChanServ sets mode: +ao brson brson
[16:48:30] <raph1> the other alternative, I think, is for Rust to grow a full dependent type system for this kind of thing, but I'm far from convinced that's a good thing
[16:48:39] <rkruppe> No, I don't think that's a good idea
[16:48:53] * Manishearth wonders if a proper formal proof thingy can be encoded into a plugin
[16:49:13] <rkruppe> Manishearth: Well, plugins run Rust code, and Rust is Turing complete, so...
[16:49:17] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[16:49:21] <Manishearth> rkruppe: haha
[16:49:28] <bstrie> raph1: kmc is going to be giving a lightning talk about what a dependent type system might look like in rust :)
[16:49:29] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[16:49:34] <rkruppe> The sky's the limit. Or rather, sanity
[16:49:44] <raph1> Lean does look interesting
[16:49:47] <Manishearth> rkruppe: yeah, but how much of borrowck needs to be reimplemented in the plugin to get all the info you need?
[16:50:01] <bstrie> Manishearth: call the rustc_borrowck crate, done
[16:50:04] *** Quits: dylan_ (dylan@moz-k5u.d0d.43.100.IP) (Ping timeout: 121 seconds)
[16:50:05] <Manishearth> with humpty_dumpty we're basically writing a mini-borrowck
[16:50:16] <Manishearth> bstrie: yeah, that's too complicated to work with :p
[16:50:30] <rkruppe> Manishearth: I don't know, I think a better option would be to do this sort of thing *after* borrowchk and other analysises
[16:50:31] <bstrie> don't give me that! make it nicer to work with :P
[16:50:31] <Manishearth> borrowck is run before lints, but some data is discarded
[16:50:38] <Manishearth> bstrie: noooooooooooooooooooooooo
[16:50:45] <raph1> rkruppe: from what I can see, the logical framework of Lean is very similar to Coq, but there's a very fresh coat of paint on it
[16:50:46] <Manishearth> believe me, I tried. Couldn't make head or tail of it
[16:50:47] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[16:50:54] *** Quits: Havvy (Havvy@moz-2v0ao2.5euu.k9bm.0007.2601.IP) (Ping timeout: 121 seconds)
[16:51:12] <rkruppe> raph1: Yes, the kernel is quite conventional, but it's optimized for convenience and ease of learning
[16:51:15] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[16:51:15] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:51:27] <bstrie> Manishearth: humpty_dumpty?
[16:51:38] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[16:51:43] <Manishearth> bstrie: https://github.com/Manishearth/humpty_dumpty
[16:51:43] <SimonSapin> erickt: steveklabnik: pong / http://nohello.com/
[16:51:45] <Manishearth> bstrie: linear types
[16:51:53] <Manishearth> you can make types un-droppable
[16:52:05] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[16:52:15] *** Joins: akiss (akiss@moz-kij.q96.114.160.IP)
[16:52:18] <bstrie> Manishearth: do you have a counterpart to `drop` called `fall`
[16:52:28] <Manishearth> need it for https://github.com/Munksgaard/rust-sessions
[16:52:31] <Manishearth> bstrie: lol
[16:52:59] <Manishearth> sadly the paper behind rust-sessions is still being written, so I can't share it, but you might be able to figure out the model from the code
[16:53:00] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[16:53:38] <mkpankov> bstrie: any idea will the kmc's talk be published somewhere?
[16:54:11] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[16:54:15] <bstrie> mkpankov: it will be at the 1.0 release party in SF, not sure if it's being recorded
[16:54:32] <bstrie> mkpankov: you can also just ask kmc and see if he'd be willing to talk your ear off :)
[16:54:35] <Manishearth> the India Rust Release party will be held a week late :/
[16:54:56] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[16:55:29] <bstrie> Manishearth: I didn't think the time difference was so severe there :P
[16:55:35] <Manishearth> haha
[16:55:41] *** Quits: shellac (pldms@moz-c7026f.bris.ac.uk) (Ping timeout: 121 seconds)
[16:55:42] <mkpankov> bstrie: not sure if I understand enough of that to occupy real talking time... :P
[16:56:08] <Manishearth> it's not being held in the city I'll be in that week, and I won't be able to get there that weekend, but I can make it the next weekend
[16:56:22] <Manishearth> on that same weekend some other community members are out too
[16:57:19] <raph1> I'm disappointed I won't be able to make the SF one, I'll be out of town; I expect it'll be very exciting
[16:57:28] *** Quits: bombless (_@moz-ud2b84.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[16:58:19] *** Quits: mib_yftm62 (Mibbit@moz-466.rhj.204.184.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:58:38] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:58:38] *** ChanServ sets mode: +o erickt
[17:00:58] *** Joins: heiskanen (heiskanen@moz-s9qdpf.reaktor.fi)
[17:01:22] <heiskanen> hey, how to pipe Read instance to Write
[17:01:25] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[17:01:52] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[17:02:03] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:02:59] *** Joins: rbranson (rbranson@moz-i7m.9o0.201.199.IP)
[17:03:04] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[17:03:05] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[17:03:18] *** Quits: jhelwig (jhelwig@moz-m94qqt.technosorcery.net) (Quit: Zoom!)
[17:03:24] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[17:03:30] <heiskanen> I meant Reader to Writer
[17:03:49] *** Joins: brontron4k (Mibbit@moz-18sjb5.ph.cox.net)
[17:03:54] <mbrubeck> heiskanen: You can call reader.read() and writer.write() in a `for` loop, and break when read() returns Err(_) or Some(0).
[17:04:09] <mbrubeck> heiskanen: In Nightly you can use the tee() method, and then just consume the reader to the end: http://doc.rust-lang.org/std/io/trait.Read.html#method.tee
[17:04:16] *** Quits: agarie (agarie@moz-3eg.b1m.32.177.IP) (Connection closed)
[17:04:18] *** Quits: arBmind (Andreas@moz-np1ab8.dyn.telefonica.de) (Quit: Leaving.)
[17:04:34] <mbrubeck> (but it's not stable yet, so it may change, and can't be used in 1.0 beta)
[17:04:35] *** Joins: jhelwig (jhelwig@moz-m94qqt.technosorcery.net)
[17:04:36] *** Parts: farcaller (farcaller@moz-8bdd0s.prod.ihdev.net) ("Textual IRC Client: www.textualapp.com")
[17:04:37] <brontron4k> does iron work on beta 2? it's failing with the current nightly because of typemap.
[17:05:04] *** Joins: OtterCoder (quassel@moz-lij.rme.199.67.IP)
[17:05:25] <OtterCoder> Hi all, I'm running through the intro to rust on the most recent beta, but it has me using thread::scoped, which is unstable, and thus won't compile. Any tips for getting around this? thread::spawn works for some things in the tuts, but not all.
[17:05:44] <bstrie> steveklabnik: ^ bug
[17:05:54] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[17:05:55] <mbrubeck> heiskanen: Aha!  http://doc.rust-lang.org/std/io/fn.copy.html
[17:06:00] <heiskanen> I was looking at it as well
[17:06:03] <steveklabnik> bstrie: what is, OtterCoder 's?
[17:06:18] <bstrie> steveklabnik: yup
[17:06:20] <steveklabnik> OtterCoder: the intro has been deleted, actually
[17:06:22] <heiskanen> I wonder what sized buffer it uses
[17:06:29] <steveklabnik> OtterCoder: but that happend after beta2
[17:06:40] <steveklabnik> OtterCoder: it'll be gone for 1.0 final
[17:06:41] *** Quits: areski (areski@moz-erfa2b.dynamicIP.rima-tde.net) (Ping timeout: 121 seconds)
[17:06:43] <mbrubeck> OtterCoder: You can use the rustc nightly if you want to run that part of the intro.  thread::scoped was just marked unstable yesterday
[17:06:44] <bstrie> steveklabnik: ah, carry on then :)
[17:06:44] <OtterCoder> steveklabnik: Really? I downloaded it yesterday night...
[17:06:51] <OtterCoder> Ah
[17:06:54] <steveklabnik> OtterCoder: yeah, you downloaded beta2, which was built a few weeks ago
[17:07:03] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:07:22] <bstrie> I think we might be doing weekly beta updates? which would imply a beta3 today
[17:07:26] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Ping timeout: 121 seconds)
[17:07:29] <OtterCoder> steveklabnik: Dang, you Rust guys don't kid around about living on the bleeding edge. :)
[17:07:32] <bluss> heiskanen: 64k
[17:07:33] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[17:07:37] <steveklabnik> we haven't set an official schedule for how often beta gest updated
[17:07:39] <mkpankov> heheh
[17:07:50] <steveklabnik> OtterCoder: hehe. this post beta period has seen the language stop changing, but the docs TOTALLY change
[17:07:56] *** ahal|lunch is now known as ahal
[17:07:59] <bluss> OtterCoder: it's a busy period, 1.0 is approaching fast
[17:08:07] <steveklabnik> now that things are stable i can actually write stuff that doesn't go out of date
[17:08:17] <steveklabnik> speaking of which, i'm gonna get back to the revised ownership and lifetimes guides
[17:08:20] <OtterCoder> I'm excited. Everything I've read about Rust has me really hyped for it.
[17:08:22] *** Joins: andresv (textual@moz-phi.8nh.65.129.IP)
[17:08:47] *** Joins: sysko (bst@moz-qau.e3g.230.116.IP)
[17:09:06] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[17:09:19] <bstrie> OtterCoder: don't get too excited, there's still a lot of polish to do before the language can be considered complete-ish :)
[17:09:45] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:09:45] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:09:52] <bluss> being part of that process is much more exciting..
[17:10:24] <OtterCoder> bstrie: Fair, but rough patches don't scare me too much. :)
[17:10:50] *** Joins: smarks_ (smarks@moz-5vj.vr4.79.109.IP)
[17:11:03] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[17:11:24] *** Quits: smarks (smarks@moz-5vj.vr4.79.109.IP) (Ping timeout: 121 seconds)
[17:11:24] *** Quits: havarnov (Mibbit@moz-ae2rue.254.getinternet.no) (Quit: http://www.mibbit.com ajax IRC Client)
[17:13:08] *** Quits: espadrine (tyl@moz-qfr4fg.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[17:13:18] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[17:13:28] *** Joins: Riastradh (riastradh@moz-vjb.r8r.42.192.IP)
[17:13:38] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[17:13:57] *** Joins: hhhhhhhh1 (mike@moz-969kuj.cable.virginm.net)
[17:14:00] *** Joins: Layl (Layl@moz-65hqmf.direct-adsl.nl)
[17:14:15] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[17:14:16] *** Joins: chmanchester (Chris@moz-ha9kvr.2rkg.9kg1.0101.2620.IP)
[17:14:33] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[17:14:45] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[17:15:02] *** Quits: vairav (vairav@moz-pkkcjo.modeln.com) (Client exited)
[17:15:46] *** Joins: mib_9bymv8 (Mibbit@moz-6gtdlj.dz.ornl.gov)
[17:16:06] <mib_9bymv8> rkruppe: You were talking about theorm provers earlier, right?
[17:16:11] <mib_9bymv8> for rust
[17:16:16] <rkruppe> mib_9bymv8: Yes
[17:16:20] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[17:16:26] <mib_9bymv8> rkruppe: Have you looked into TLA+?
[17:16:33] <rkruppe> No, never heard of that acronym
[17:16:52] *** Quits: smarks_ (smarks@moz-5vj.vr4.79.109.IP) (Ping timeout: 121 seconds)
[17:16:53] *** Joins: vairav (vairav@moz-pkkcjo.modeln.com)
[17:17:03] <mib_9bymv8> someone else mentioned microsoft research, so I thought I'd throw this out there http://research.microsoft.com/en-us/um/people/lamport/tla/tla.html
[17:17:46] *** Joins: smarks (smarks@moz-5vj.vr4.79.109.IP)
[17:18:00] <mib_9bymv8> I'm not really well versed in this stuff, but TLA+ is a specification language where Coq and HOL/Isabelle are theorem proving assistants
[17:18:20] <mib_9bymv8> the backend of TLC (the TLA+ model checker) is Isabelle
[17:18:53] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[17:19:23] <frankmcsherry> Most of the uses I've seen for TLA are concurrency related, where it shines. Depends what sort of properties you want to prove, I guess.
[17:19:31] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:19:50] <mib_9bymv8> frankmcsherry: That's the uses I've seen described as well. I haven't formed an opinion yet.
[17:20:11] *** Joins: agarie (agarie@moz-3eg.b1m.32.177.IP)
[17:20:32] *** Quits: mkpankov (user@moz-h0n.sma.198.91.IP) (Ping timeout: 121 seconds)
[17:20:35] <frankmcsherry> mib_9bymv8: Amazon has had some good experiences with it. We tried to port a two paragraph proof to it, and it took 300 pages and a smart guy for four months. :)
[17:21:05] <Ms2ger> Aaaaaaaaaaaah TLA+ :)
[17:21:16] <Ms2ger> But at least it's not ACL2
[17:21:25] <mib_9bymv8> frankmcsherry: that is good information
[17:21:59] <rkruppe> frankmcsherry: Two paragraphs of what, prose or Coq/HOL/etc.?
[17:22:12] <frankmcsherry> mib_9bymv8: Amazon has a write-up about their experience. It sounds like they had a great use case for it. We had something that should have been good, I think, but we had to train TLA to understand lots of math that it didn't understand.
[17:22:24] <frankmcsherry> Two paras of prose. 
[17:22:33] <Hannibal_Smith> mib_9bymv8, studying it for university right now :-P
[17:22:38] <mib_9bymv8> I have a constructive method for producing a software specification based on function discovery. It was translated to ACL2 at one point, but I'm looking into TLA+
[17:23:06] <mib_9bymv8> frankmcsherry: I saw the Amazon write up in ACM, that's how I learned about it existing :-)
[17:23:27] *** Joins: jdm (jdm@moz-vmfnmv.ckpj.s0pt.0450.2001.IP)
[17:23:27] *** ChanServ sets mode: +o jdm
[17:24:00] *** Joins: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net)
[17:24:05] <mib_9bymv8> frankmcsherry: would your use case have been easier in any other language?
[17:24:07] <frankmcsherry> mib_9bymv8: this is the write-up of the stuff we did; not wildly illuminating, but http://research.microsoft.com/apps/pubs/default.aspx?id=183826
[17:24:13] <mib_9bymv8> Hannibal_Smith: studying TLA+?
[17:24:36] *** Joins: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com)
[17:24:36] <mib_9bymv8> frankmcsherry: Sweet! Thanks!
[17:24:53] <mib_9bymv8> I might try to get a paper out of thise yet
[17:25:33] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[17:25:40] <Hannibal_Smith> mib_9bymv8, yes it's a course on the use e theory of formal methods
[17:25:53] <frankmcsherry> mib_9bymv8: I'm not sure if it would have been easier in something else. TLA had some issues with completeness of reasoning (this a doubly nested counterfactual proof), and is apparently incapable of verifying the liveness property.
[17:26:01] *** Joins: bren2010 (bren2010@moz-356.o3d.198.71.IP)
[17:26:15] *** Joins: lenstr (lenstr@moz-lno.vju.25.171.IP)
[17:26:23] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[17:26:45] <Hannibal_Smith> mib_9bymv8, also related to TLA+ http://channel9.msdn.com/events/Build/2014/3-642
[17:27:06] <mib_9bymv8> frankmcsherry: do you knot the ratio of (LOC implementation) vs (LOC proof)?
[17:27:55] <mib_9bymv8> The lines required for using Isabelle to prove something vs the lines in the implementation shocked me
[17:27:57] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[17:28:13] *** Joins: sirGusWrk (Gustav@moz-bo7slh.sme.bredbandsbolaget.se)
[17:28:16] <frankmcsherry> mib_9bymv8: maybe 1:10 or 1:100? 
[17:28:59] <mib_9bymv8> interesting
[17:29:41] <mib_9bymv8> I suppose it's also important to know what the implementatoin language was
[17:30:11] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[17:30:56] <kmcguire> i dunno implementation language isnt going to make a big difference unless your using something really wild, right?
[17:31:09] *** Quits: Hannibal_Smith (nico@moz-ucg29b.retail.telecomitalia.it) (Quit: Leaving)
[17:31:23] <kmcguire> hmm i guess it does kinda scale up
[17:31:23] <mib_9bymv8> kmcguire: c vs. python can be a big difference is size of code base
[17:31:46] *** Joins: dmac__ (dmac@moz-2ig65r.ca.comcast.net)
[17:31:49] <kmcguire> mib, you figure that is because of the stdlib or just the language itself?
[17:32:13] <mib_9bymv8> libraries, yeah
[17:32:19] <kmcguire> aw doesnt matter but yeah i was just curious
[17:32:29] *** Joins: Savago (Savago@moz-k613vv.ca.comcast.net)
[17:32:42] <kmcguire> i didnt think about stdlib :p
[17:32:51] <kmcguire> libs
[17:32:54] <mib_9bymv8> `import antigravity` as the XKCD goes
[17:34:26] *** Quits: Kynes (Kynes@moz-j2us35.mit.edu) (Quit: Leaving)
[17:34:56] *** Joins: james4k (james@moz-0kqjsm.consolidated.net)
[17:36:00] *** Joins: tetricyclone (Mibbit@moz-sb8.u80.219.128.IP)
[17:36:03] *** Joins: proclus (Mibbit@moz-ts6083.ippl.jhmi.edu)
[17:36:13] <Lilly> I've just gotta say
[17:36:43] *** Quits: asabil (sid11150@moz-tigqfr.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[17:36:53] <bstrie> Lilly: say what you must, don't leave it there
[17:37:15] *** Joins: eric_lagergren (barsonme@moz-add4ru.fomj.2174.0008.2601.IP)
[17:37:26] <Lilly> I just managed to install rustdt, the eclipse based rust ide. i managed to compile racer. i've set everything up. i can create a new project and add dependencies. everything is working flawlessly.
[17:37:31] <Lilly> it's too good to be true
[17:37:44] <bstrie> Lilly: have you used rustdt before? what does it do?
[17:37:52] <mib_9bymv8> I don't think I've seen rustdt
[17:37:55] <tetricyclone> Autocomplete via racer is working for rustdt?
[17:38:01] <Lilly> being a windows user, systems programming has always been cumbersome
[17:38:03] <tetricyclone> Working *well*?
[17:38:05] <Lilly> this is just amazing
[17:38:23] <bstrie> Lilly: I demand a screencast
[17:38:26] <mate> can you debug in the ide?
[17:38:34] <geofft> what's the current style preference, `extern { }` or `extern "C" { }`? 
[17:38:52] <Lilly> http://i.imgur.com/jY91Vwu.png
[17:38:55] <mib_9bymv8> the features says it has racer
[17:38:58] <mib_9bymv8> give
[17:39:02] <Lilly> just look at this
[17:39:06] <mib_9bymv8> holy shit
[17:39:10] *** dmu|away is now known as dmu
[17:39:31] *** Joins: jimb (user@moz-09a.i8g.126.207.IP)
[17:39:54] <Lilly> i also added glium and glutin as deps, and managed to run the example by just hitting "Run"
[17:40:08] <steveklabnik> geofft: leave off the "C"
[17:40:30] <geofft> thanks 
[17:41:20] <Lilly> http://i.imgur.com/Jx4SGoQ.png
[17:41:33] <tetricyclone> Looks good!  Must try...
[17:41:54] *** Joins: Ralith (ralith@moz-miv.lne.251.63.IP)
[17:42:32] <Lilly> excuse my choice of words but this is so fucking cool
[17:42:37] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Ping timeout: 121 seconds)
[17:43:07] <gsingh93> so this is a problem i've been running into frequently with rust: http://is.gd/osQemK
[17:43:22] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:43:22] <gsingh93> i understand the problem, but i can't think of a clean workaround
[17:43:24] *** Quits: mkpankov` (mkpankov@moz-0ga.jvq.149.83.IP) (Ping timeout: 121 seconds)
[17:43:42] <gsingh93> i don't want to add extra bools, or split up the two sets
[17:43:53] <frankmcsherry> gsingh93: put a 'mut' in front of foo?
[17:43:57] <steveklabnik> gsingh93: let mut foo
[17:44:05] <gsingh93> oh wait
[17:44:15] <gsingh93> i don't think i sent the right example
[17:44:17] <Ms2ger> "have a look at Yehuda Katz's [blog post on ownership].)"
[17:44:17] <gsingh93> one sec
[17:44:18] <mate> rust might actually be popular someday
[17:44:20] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:44:27] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[17:44:36] <steveklabnik> mate: hopefully ;)
[17:44:40] <steveklabnik> Ms2ger: no link, you mean?
[17:44:43] <Ms2ger> Yep
[17:44:43] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[17:44:59] <steveklabnik> links fo rme
[17:45:21] <steveklabnik> how odd
[17:45:29] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[17:45:47] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Ping timeout: 121 seconds)
[17:46:00] <rkruppe> mib_9bymv8: So is TLA+ for checking your specs, or also for checking that your code correctly implements your spec?
[17:46:42] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[17:47:14] *** Quits: vairav (vairav@moz-pkkcjo.modeln.com) (Client exited)
[17:47:17] <rkruppe> frankmcsherry: ^
[17:47:28] <frankmcsherry> rkruppe: only the former.
[17:47:31] <Lilly> only thing missing is a plugin for eclipse to add a crates.io-browser :D
[17:47:38] <Ms2ger> steveklabnik, looks like someone fixed it in the meantime
[17:47:54] <frankmcsherry> rkruppe: writing and checking specs, mostly of distributed/concurrent protocols
[17:48:02] <Ms2ger> Thanks jdm 
[17:48:10] <rkruppe> frankmcsherry: Okay, thanks
[17:48:24] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[17:48:35] *** Quits: andresv (textual@moz-phi.8nh.65.129.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:48:50] *** Quits: lenstr (lenstr@moz-lno.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[17:49:00] *** Joins: drewm1980 (drewm1980@moz-fq6.jer.188.188.IP)
[17:49:44] <steveklabnik> Ms2ger: :+1:
[17:50:12] *** Quits: new_one (new_one@moz-98g.jb4.42.128.IP) (Quit: WeeChat 1.1.1)
[17:50:50] <gsingh93> nvmd about my question above, in my non-simplified example i just needed to use `get_mut`, I thought the problem was something else
[17:51:05] *** Quits: proclus (Mibbit@moz-ts6083.ippl.jhmi.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[17:51:43] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[17:51:56] *** Joins: vairav (vairav@moz-pkkcjo.modeln.com)
[17:52:20] <jdm> Ms2ger: ?
[17:52:22] *** Joins: figaro (Mibbit@moz-i7cb3r.fios.verizon.net)
[17:52:23] <jdm> oh, blog post?
[17:52:59] <Ms2ger> Yeah
[17:55:02] *** Joins: tomleb (tomleb@moz-7n1.40h.168.198.IP)
[17:55:19] *** Joins: sinistersnare (Mibbit@moz-vj2.mkr.2.129.IP)
[17:55:29] *** Quits: ajitk (ajit@moz-6ht.i8n.51.106.IP) (Ping timeout: 121 seconds)
[17:55:46] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[17:56:47] *** Quits: ptx (ptx@moz-989.5up.104.87.IP) (Ping timeout: 121 seconds)
[17:57:06] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[17:58:07] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[17:58:28] *** Joins: ptx (ptx@moz-989.5up.104.87.IP)
[17:58:43] *** Quits: mib_9bymv8 (Mibbit@moz-6gtdlj.dz.ornl.gov) (Quit: http://www.mibbit.com ajax IRC Client)
[17:58:45] *** Joins: smarks_ (smarks@moz-5vj.vr4.79.109.IP)
[17:58:48] *** Quits: smarks (smarks@moz-5vj.vr4.79.109.IP) (Ping timeout: 121 seconds)
[17:59:22] *** bentley is now known as bentley|away
[17:59:24] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Quit: Leaving)
[17:59:46] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[17:59:57] *** Quits: moa (Cedric@moz-9asvr1.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[18:01:20] *** Joins: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de)
[18:02:20] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[18:02:21] *** Quits: agarie (agarie@moz-3eg.b1m.32.177.IP) (Connection closed)
[18:02:40] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[18:03:06] *** Joins: wldcordeiro (wldcordeiro@moz-863roc.hfc.comcastbusiness.net)
[18:03:11] *** Joins: entity (Mibbit@moz-1rcml9.pks.muni.cz)
[18:03:16] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[18:03:17] <entity> hello, any advice on how to generate a random vector of enums?
[18:03:24] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[18:03:31] <entity> looks like it's illegal to cast an int to an enum
[18:04:12] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[18:04:45] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[18:05:10] <bluss> if you impl Rand for the enum it's simple
[18:05:21] *** Quits: drbawb (drbawb@moz-q7c35u.res.rr.com) (Quit: reboot)
[18:05:24] *** Quits: lucian (lucian@moz-iuo.htl.74.194.IP) (Ping timeout: 121 seconds)
[18:05:28] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:05:29] <bluss> with nightly you can even #[derive(Rand)] (but only there, because it's a plugin)
[18:05:31] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[18:05:43] *** Joins: isomarcte (isomarcte@moz-vqvrcl.hfc.comcastbusiness.net)
[18:05:54] <entity> I'm using rand from crates.io, the compiler was complaining otherwise
[18:06:02] <OtterCoder> In Rust, what's the idiomatic equivalent for dictionaries/objects/hashmaps/associative_arrays/whatever_it's_a_list_of_paired_strings_and_first-class_values?
[18:06:18] <steveklabnik> HashMap
[18:06:26] <steveklabnik> though we use them SIGNIFICANTLY less than dynamic languages
[18:06:42] <steveklabnik> for example http://hermanradtke.com/2015/04/18/replace-dicts-with-rust-enums.html
[18:06:45] *** Quits: kgrandon (Adium@moz-pq70bc.hjek.d045.0009.2601.IP) (Quit: Leaving.)
[18:06:59] <bluss> entity: yes, that's what you do either way
[18:07:13] <raph1> entity: https://github.com/rust-lang/rust/issues/16920 might be relevant
[18:07:14] *** Quits: frankmcsherry (frankmcsher@moz-faa086.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[18:07:14] <entity> ah okay
[18:07:47] *** Joins: Douman (Douman@moz-07e1oo.dynamic.mts-nn.ru)
[18:07:49] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[18:07:57] <bluss> entity: my advice is to either derive(Rand) if you can or impl Rand manually otherwise. after that it's simple
[18:08:02] <entity> btw why was std removed from stdlib? the general trend everywhere else seems to be to pack more stuff into stdlib these days
[18:08:03] <bluss> for the enum
[18:08:11] <entity> bluss: you will do one of those, thank you
[18:08:16] <entity> why was rand removed*
[18:08:22] *** Joins: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com)
[18:08:26] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[18:08:28] <steveklabnik> it wasn't good enough to stabilize for all time
[18:08:29] <bluss> entity: it's just Rust 1.0, we can't deliver the whole word with an honest promise of stability
[18:08:33] *** Quits: alex-diez (chatzilla@moz-jqd8kq.pool.ukrtel.net) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.2/20150415140819])
[18:08:34] <bluss> world
[18:08:38] *** Quits: buzugu (baptiste@moz-5il26q.rev.sfr.net) (Client exited)
[18:08:46] *** Quits: dmac__ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[18:09:05] *** Quits: OtterCoder (quassel@moz-lij.rme.199.67.IP) (Connection closed)
[18:09:10] *** Joins: OtterCoder (quassel@moz-lij.rme.199.67.IP)
[18:09:31] <OtterCoder> steveklabnik: Thanks! I'll give that a read.
[18:09:46] <entity> i see
[18:09:53] *** Joins: drbawb (drbawb@moz-q7c35u.res.rr.com)
[18:09:58] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[18:10:18] *** Joins: cxzz (Mibbit@moz-4m2.3qr.48.208.IP)
[18:10:52] <entity> ah so many typos
[18:11:02] <entity> I mean "yup will do one of those"
[18:11:07] <cxzz> Does Rust work on vanilla LLVM? 
[18:11:10] <bstrie> entity: rand will be reconsidered for the stdlib eventually
[18:11:16] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[18:11:25] <bstrie> cxzz: it might work on vanilla, but we don't test on vanilla
[18:11:26] *** Joins: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net)
[18:11:30] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Connection closed)
[18:11:42] *** Quits: amyers (amyers@moz-f2k.1cm.177.128.IP) (Connection closed)
[18:11:47] <cxzz> what is the differences between the special version of LLVM that ships with Rust, and is there plans to upstream it? 
[18:11:49] <bstrie> cxzz: so probably not, and if it does work, it might not later :)
[18:11:52] *** Joins: amyers (amyers@moz-f2k.1cm.177.128.IP)
[18:11:57] <niconii> entity: rust 1.0 isn't the end-all be-all of rust, it's more a stable base which things can be added to in the future
[18:12:26] <bstrie> cxzz: we always plan to upstream our patches, but these things take time
[18:12:35] *** Joins: moa (Cedric@moz-9asvr1.abo.wanadoo.fr)
[18:12:35] <entity> niconii:  I know, but RNG is kind of a big deal
[18:12:39] <bstrie> cxzz: and in the time that it takes to upstream our old patches, we come up with new ones :)
[18:12:39] <niconii> entity: rust 1.0 is just a promise that what's already there won't change (and break code) in the future
[18:12:42] <XMPPwocky> afaik most of the patches are performance things
[18:12:53] <cxzz> I remember asking about this back in like Rust 0.7 days :( 
[18:13:07] <bstrie> entity: RNG *is* kind of a big deal, which is why we'd rather not commit to a poor API at the moment
[18:13:15] *** Joins: frankmcsherry (frankmcsher@moz-faa086.adsl.alicedsl.de)
[18:13:22] <bstrie> entity: rust is powerful enough that any RNG lib you write can exist as a first-class citizen in the ecosystem
[18:13:30] <Titi_Alone> I don't know if he's here but huge thanks to Alex for the blog's article that he wrote
[18:13:47] <bstrie> Titi_Alone: that's acrichto 
[18:14:21] <niconii> entity: if we put it in std, we have to commit to it, which is why we're holding off until we're sure what we want to do
[18:14:29] <acrichto> Titi_Alone: :)
[18:14:45] <bstrie> entity: and if you don't want to use external crates, an xorshift rng only takes like two lines of code to implement :P
[18:15:13] *** Joins: agarie (agarie@moz-3eg.b1m.32.177.IP)
[18:15:21] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[18:15:48] <entity> it's fine, rust at least comes with a package manager
[18:16:12] <dzyp> is there a good example of rust code that has a tree with nodes that reference parent and children?
[18:16:47] <entity> by the way, is there any rough ETA on green threads? there isn't a lib for this on crates.io, is there?
[18:16:54] <frankmcsherry> if someone writes |x| x and |x| x twice in the same program, they will have different types, right?
[18:17:07] <frankmcsherry> sorry, the closures, that is.
[18:17:18] <reem> frankmcsherry: yes
[18:17:23] *** Joins: lenstr (lenstr@moz-lno.vju.25.171.IP)
[18:17:24] <bstrie> dzyp: that link I sent you has an article about btreemap, does that do what you're asking?
[18:17:38] <Titi_Alone> acrichto : I guess it's easily possible with C++ too?
[18:17:52] <bstrie> frankmcsherry: you can cast them to the same type, if you need to
[18:17:54] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Quit: )
[18:18:05] <acrichto> Titi_Alone: indeed! The C++ code would have to expose a C API (e.g. you can't call C++ class methods natively from Rust), but other than that it's all the same 
[18:18:51] <frankmcsherry> bstrie: it's all good. I need the same func a few times, am asking user for it, but need to give them "different" types. :)
[18:18:55] <Titi_Alone> acrichto : I was talking about C++ talking to Rust
[18:19:00] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[18:19:12] <dzyp> https://github.com/rust-lang/rust/blob/master/src/libcollections/btree/node.rs
[18:19:14] <acrichto> Titi_Alone: oh in that case it's the exact same story as C -> Rust
[18:19:18] <acrichto> (e.g. it's easy!)
[18:19:25] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[18:19:40] <bstrie> Titi_Alone: ...assuming that your C++ code exposes a C API, it's as easy as binding C to Rust :P
[18:19:51] <dzyp> that node doesn't reference a parent though
[18:20:05] *** Parts: sinistersnare (Mibbit@moz-vj2.mkr.2.129.IP) ()
[18:20:07] <dzyp> documentation suggests that i have to handle that reference differently
[18:20:14] <bstrie> dzyp: that's Gankro's blog, he's the collections czar and the one to talk to if you want to pledge your life to data structures in rust
[18:20:19] <dzyp> haha
[18:20:22] <dzyp> awesome, good to know
[18:20:23] <dzyp> thanks
[18:21:37] *** Joins: DerisiveLogic (smuxi@moz-flrfkv.public.wayport.net)
[18:22:37] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[18:22:42] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[18:23:06] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[18:23:08] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[18:23:14] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[18:23:32] *** Joins: pythoner6 (pythoner6@moz-isa852.WIFI.WPI.EDU)
[18:24:51] <Gankro> dzyp: whatup
[18:25:38] <dzyp> was looking for a good reference example involving a node that references both children and a parent
[18:25:38] <Gankro> dzyp: generally I would handle parent refs with "raw" pointers
[18:25:49] <Gankro> So unsafe code, basically
[18:26:17] <Gankro> children are `Option<Box<Node<T>>>`, parents are `*mut Node<T>`
[18:26:28] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[18:26:47] *** Quits: tomleb (tomleb@moz-7n1.40h.168.198.IP) (Connection closed)
[18:26:48] <dzyp> awesome, thanks
[18:26:49] <Gankro> Or `Option<NonZero<*mut Node<T>>> if you're a circular pedant
[18:26:57] *** Quits: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de) (Connection closed)
[18:26:59] *** Quits: Savago (Savago@moz-k613vv.ca.comcast.net) (Client exited)
[18:27:22] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[18:27:27] <frankmcsherry> Gankro: !!! <3 Buddy!
[18:27:28] *** Joins: dmac__ (dmac@moz-h4nvlf.ca.comcast.net)
[18:27:36] <Gankro> frankmcsherry: ?
[18:28:01] <frankmcsherry> Gankro: we need to do a thing where I tell you secret collection backdoors I need, and ... you get all the chocolate you can eat.
[18:28:10] <Gankro> Hmmmmm
[18:28:28] <Gankro> I'm partial to fancy pops ;)
[18:28:31] <bstrie> tell me, how does one insert backdoors into collections
[18:28:38] <bstrie> vec.fancy_pop()
[18:28:57] <Gankro> bstrie: secret knocks
[18:29:13] <frankmcsherry> bstrie: I have this thing where I think that Rust should drop fewer of my things. Some of the collections API drop more, in the interest of ergonomics, I think.
[18:29:20] <mbrubeck> entity: There's an async IO library at https://crates.io/crates/mio - currently lacking Windows support.  I'm not aware of any other general green-thread libraries on crates.io, though there may be one I missed.
[18:29:22] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (Ping timeout: 121 seconds)
[18:29:23] <Gankro> vec.push(1); vec.push(2); vec.pop(); vec.push(3); vec.pop(); vec.pop(); unlocks ultra mode
[18:29:31] <mbrubeck> s/other //
[18:29:32] *** Joins: lucian (lucian@moz-5ou.htl.74.194.IP)
[18:29:34] <bstrie> so like, I create a hashmap, and then insert a key of "CROATOAN", and then the value in the hashmap is the complete /usr/passwd file
[18:29:59] *** bentley|away is now known as bentley
[18:30:12] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[18:30:13] <Gankro> frankmcsherry: example?
[18:30:14] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[18:30:19] <frankmcsherry> Vec::retain!
[18:30:21] <Gankro> Oh the set thing
[18:30:41] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[18:30:44] <bstrie> Gankro: I don't see how that push/pop pattern can be done without incurring unnecessary bookkeeping. that's not in line with rust's philosophy of zero-overhead backdoors
[18:30:44] <frankmcsherry> Gankro: and HashMap::Entry::or_insert_with() should show me a reference to the key! 
[18:31:07] <Gankro> bstrie: it's in the compiler
[18:31:12] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[18:31:18] <bstrie> Gankro: good luck keeping that from bitrotting
[18:31:43] <Gankro> bstrie: That's what #[stable] and unit tests are for!
[18:31:44] <frankmcsherry> bstrie: it made beta; have to support it now. :P
[18:32:11] <bstrie> damn these stability guarantees!
[18:32:15] <bstrie> backdoors aren't soundness violations
[18:32:18] <bstrie> our hands are tied
[18:33:02] <rkruppe> That's what you get for limiting "safety" to memory safety
[18:33:18] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Connection closed)
[18:33:34] <frankmcsherry> maybe if we just mark "ultra mode" as safe...
[18:33:48] *** Quits: lucian (lucian@moz-5ou.htl.74.194.IP) (Ping timeout: 121 seconds)
[18:33:50] <bstrie> rultrust
[18:34:22] <Gankro> Can't spell ultrust without trust so it must be sound
[18:34:25] <entity> mbrubeck: thanks, i'll check it out
[18:34:32] *** Joins: jshs (jshs@moz-btk83h.dip0.t-ipconnect.de)
[18:34:35] *** Parts: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net) ()
[18:35:05] *** Joins: Havvy (Havvy@moz-aas.m8a.237.67.IP)
[18:35:12] *** Quits: lenstr (lenstr@moz-lno.vju.25.171.IP) (Quit: Leaving...)
[18:35:30] *** Quits: nwin (textual@moz-hvci8u.pools.vodafone-ip.de) (Quit: Textual IRC Client: www.textualapp.com)
[18:35:51] *** Joins: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com)
[18:35:59] *** Quits: DerisiveLogic (smuxi@moz-flrfkv.public.wayport.net) (Ping timeout: 121 seconds)
[18:36:03] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[18:36:56] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[18:37:34] <frankmcsherry> Gankro: but, in all seriousness, do you know of prior work on collections/datastructures for languages with linear/affine types?
[18:38:19] <frankmcsherry> Gankro: it seems like they are more particular than for languages where you just snag a pointer and have done with it.
[18:38:30] *** Quits: mindtree (Mitch@moz-qh8f9n.iprimus.net.au) (Quit: leaving)
[18:38:30] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Client exited)
[18:38:49] *** Quits: sysko (bst@moz-qau.e3g.230.116.IP) (Ping timeout: 121 seconds)
[18:39:20] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[18:40:17] *** Quits: vmx (vmx@moz-t71rar.pools.vodafone-ip.de) (Quit: Leaving)
[18:40:34] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:40:34] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:41:27] <Gankro> frankmcsherry: I'm not familiar with any such languages, to be honest
[18:41:35] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[18:42:00] <frankmcsherry> Gankro: erm, burp, wut? Wait, I was thinking of Rust -Copy/Clone
[18:42:18] <Gankro> frankmcsherry: Other than Rust, I guess
[18:42:23] *** Quits: drewm1980 (drewm1980@moz-fq6.jer.188.188.IP) (Ping timeout: 121 seconds)
[18:42:32] <frankmcsherry> Gankro: so, exciting new ground to break!
[18:42:56] <Gankro> frankmcsherry: I'm actually just very unread on the PL literature!
[18:42:57] *** bentley is now known as bentley|away
[18:43:02] *** Joins: mahdi (mahdi@moz-8oo.182.244.151.IP)
[18:43:32] *** Joins: buzugu (baptiste@moz-5il26q.rev.sfr.net)
[18:43:34] *** Joins: arBmind (Andreas@moz-32aubh.adsl.alicedsl.de)
[18:43:54] *** Quits: raignarok (raignarok@moz-ucs3ms.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[18:45:43] <frankmcsherry> So, because no Fn : Clone, I write |||k| k
[18:46:03] <frankmcsherry> I might start using 'l' in protest
[18:46:08] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[18:46:19] <bluss> maybe you can use a `fn` function
[18:46:30] <frankmcsherry> do closures coerce to those?
[18:46:37] <bluss> no
[18:46:43] <bluss> but they impl the closure traits
[18:46:45] *** Joins: chronoslynx (chronoslynx@moz-q32.838.207.130.IP)
[18:47:01] <reem> (They use the same mechanism)
[18:47:04] *** Quits: slomo (slomo@moz-p8m0g2.net) (A TLS packet with unexpected length was received.)
[18:47:09] *** Joins: tcard (tcard@moz-jdrdbk.ddns.jazztel.es)
[18:47:20] *** Joins: slomo (slomo@moz-p8m0g2.net)
[18:47:32] <frankmcsherry> its meant for some "ergonomic" dataflow apis: e.g. labels.join(&edges, |l| l, |e| e, |_k,l,d| (*d,*l));
[18:48:02] <frankmcsherry> ^-- is how you do one iteration of label propagation, for example!
[18:48:20] *** Quits: pythoner6 (pythoner6@moz-isa852.WIFI.WPI.EDU) (Quit: (null))
[18:48:45] <frankmcsherry> except, I need a second copy of the |l| l and |e| e closures to route data, in addition to the one for core logic.
[18:49:02] *** Joins: raignarok (raignarok@moz-3vl38g.dip0.t-ipconnect.de)
[18:49:46] *** Joins: crazymykl (mikemac@moz-dkas6j.cable.rcn.com)
[18:50:10] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[18:50:15] *** Quits: james4k (james@moz-0kqjsm.consolidated.net) (Connection closed)
[18:50:44] *** Joins: james4k (james@moz-0kqjsm.consolidated.net)
[18:51:52] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[18:51:55] *** Quits: vairav (vairav@moz-pkkcjo.modeln.com) (Client exited)
[18:52:07] *** Quits: mikemac (mikemac@moz-dkas6j.cable.rcn.com) (Ping timeout: 121 seconds)
[18:52:59] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[18:53:20] *** Joins: Guest67_ (textual@moz-mu0ot5.or.comcast.net)
[18:53:28] *** Quits: martin_ (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP) (Ping timeout: 121 seconds)
[18:53:53] *** Quits: harikb (harikb@moz-te5530.compute.amazonaws.com) (Quit: ZNC - http://znc.in)
[18:54:30] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[18:54:41] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:55:29] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[18:56:13] *** Quits: chronoslynx (chronoslynx@moz-q32.838.207.130.IP) (Quit: Textual IRC Client: www.textualapp.com)
[18:56:24] *** Joins: KindOne (KindOne@moz-49t.rnq.170.107.IP)
[18:56:30] *** Joins: harikb (harikb@moz-te5530.compute.amazonaws.com)
[18:57:23] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[18:57:27] *** Quits: akiss (akiss@moz-kij.q96.114.160.IP) (Ping timeout: 121 seconds)
[18:57:44] *** Joins: frogzilla (Mibbit@moz-h22uvn.rev.numericable.fr)
[18:59:19] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[18:59:48] *** Quits: fabiand (fabiand@moz-blfia4.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[19:00:06] <frogzilla> Hi, I'm looking for something similar too MemWriter.write_be_u64() in the the beta version, is there an equivalent, or must I do it by hand ?
[19:00:20] <frankmcsherry> frogzilla: byteorder crate!
[19:00:45] <brontron4k> What an idiomatic way to read chars/bytes now? it seems like i have to create a one element buffer each time and read the first value when before it was simply (read_char).
[19:00:52] <frankmcsherry> it provides all those extension methods for anything implementing Write (the new version of the Writer trait)
[19:00:53] *** Quits: alex3 (alex@moz-s9a.qrc.242.157.IP) (Ping timeout: 121 seconds)
[19:00:54] *** Joins: eerie_ (eerie@moz-joilui.red.bezeqint.net)
[19:01:48] <frogzilla> frankmcsherry: awesome, thanks!
[19:01:58] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[19:02:11] <frankmcsherry> frogzilla: and I think Vec<u8> now plays the role that MemWriter used to play.
[19:02:31] <frankmcsherry> frogzilla: in that it implements Write, and you just use one of them rather than wrapping with a MemWriter
[19:03:41] <frogzilla> hum, ok
[19:03:50] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:04:05] *** Quits: maraoz (maraoz@moz-7fc9s6.fibertel.com.ar) (Quit: Leaving)
[19:04:24] <XMPPwocky> if you need to seek, Cursor gives you that
[19:04:31] *** Joins: sysko (bst@moz-qau.e3g.230.116.IP)
[19:04:59] <FreeFull> Cursor also gives you Read
[19:05:51] *** Quits: frankmcsherry (frankmcsher@moz-faa086.adsl.alicedsl.de) (Connection closed)
[19:06:09] <brontron4k> Any help with reading one byte/char? I have a feeling I'm doing this the wrong way.
[19:06:25] *** Quits: agarie (agarie@moz-3eg.b1m.32.177.IP) (Connection closed)
[19:06:54] *** Quits: dr_y (Mibbit@moz-ekk.6pr.47.77.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:07:06] *** Joins: kgrandon (Adium@moz-idvg57.2rkg.9kg1.0101.2620.IP)
[19:08:37] *** Quits: sysko (bst@moz-qau.e3g.230.116.IP) (Ping timeout: 121 seconds)
[19:08:55] <JustAPerson> brontron4k: from a str?
[19:09:06] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[19:09:25] <brontron4k> Well previously I was calling this on a BufRead before the reform so now it's from a Cursor.
[19:09:29] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[19:09:55] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:10:11] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (A TLS packet with unexpected length was received.)
[19:10:16] *** Quits: amyers (amyers@moz-f2k.1cm.177.128.IP) (Connection closed)
[19:10:21] *** Joins: sysko (bst@moz-qau.e3g.230.116.IP)
[19:10:29] <JustAPerson> then just try .chars().next() -> Option<char>
[19:10:45] <JustAPerson> oh, apparently unstable
[19:11:09] *** Joins: vairav (vairav@moz-pkkcjo.modeln.com)
[19:11:12] *** Joins: agarie (agarie@moz-3eg.b1m.32.177.IP)
[19:11:39] *** Joins: Adityab (aditya@moz-otola7.dyn.telefonica.de)
[19:11:49] *** Quits: askalski (akuda@moz-857tih.warszawa.vectranet.pl) (Quit: Wychodzi)
[19:11:53] *** Quits: entity (Mibbit@moz-1rcml9.pks.muni.cz) (Quit: http://www.mibbit.com ajax IRC Client)
[19:12:03] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[19:12:06] *** Joins: iopq (Mibbit@moz-48stfr.ca.comcast.net)
[19:12:28] <iopq> Is there an equivalent to expect() that doesn't have ugly output?
[19:12:38] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[19:12:38] <XMPPwocky> unwpra?
[19:13:06] <iopq> XMPPwocky: I meant I want to quit with an error message but I don't want the user to see anything but the error message
[19:13:30] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[19:13:53] *** Quits: saml (saml@moz-0pt9vd.cst.lightpath.net) (Quit: Leaving)
[19:14:16] *** Quits: Guest67_ (textual@moz-mu0ot5.or.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:14:25] *** Quits: sysko (bst@moz-qau.e3g.230.116.IP) (Ping timeout: 121 seconds)
[19:15:01] <iopq> why is this at all relevant to me: thread '<main>' panicked at 'hi', /home/rustbuild/src/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libcore/option.rs:330
[19:15:13] <brontron4k> JustAPerson that chars option is so pretty :'(. So to do this in a stable way i would have to build a buffer each time?
[19:15:47] *** Joins: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de)
[19:15:48] <iopq> MAYBE if that line pointed to the line in main.rs it would be useful information
[19:15:50] *** Joins: sysko (bst@moz-qau.e3g.230.116.IP)
[19:16:06] <mbrubeck> iopq: You can do .or_else(|err| ...) and do anything you want in the error case.
[19:16:10] *** Joins: fabianvf_ (fabianvf@moz-j12.dim.197.216.IP)
[19:16:17] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Ping timeout: 121 seconds)
[19:17:37] <iopq> mbrubeck: obviously, but why is .expect()'s output kind of useless like that
[19:18:18] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:18:56] <mbrubeck> iopq: Yeah, we were just complaining about that last night... Wishing for a version of panic! that could print the line number from the previous stack frame instead of the current one.
[19:18:57] *** nsm is now known as nsm|away
[19:19:13] <mbrubeck> iopq: If you set RUST_BACKTRACE=1 then you get more useful info.
[19:19:50] <iopq> mbrubeck: not in my experience, I just get offsets from main, not actually information I can use
[19:21:07] <geofft> rustc -g? 
[19:21:23] *** Quits: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com) (Ping timeout: 121 seconds)
[19:22:02] *** Parts: duncan (paul@moz-dst.ms6.225.173.IP) ()
[19:22:44] <iopq> I thought cargo test already had debug info
[19:23:32] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[19:23:50] *** Quits: frogzilla (Mibbit@moz-h22uvn.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:24:10] <rkruppe> Debug info is there, but it's not read properly on windows
[19:24:24] <rkruppe> gh20351
[19:24:38] <rkruppe> https://github.com/rust-lang/rust/issues/20351
[19:25:29] <iopq> rkuppe: oh so that's what is is
[19:25:29] *** Joins: insaneinside (user@moz-dgv9mb.customer.broadstripe.net)
[19:25:36] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[19:25:56] <insaneinside> Does anything in this error message look wrong to you?  "error: expected one of `(`, `+`, `::`, `<`, `>`, `where`, or `{`, found `>`"
[19:26:20] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[19:26:20] *** ChanServ sets mode: +o erickt
[19:26:46] <XMPPwocky> it's confusing
[19:26:59] <XMPPwocky> hard to read, because of the "where", it's easy to skip the "or"
[19:27:27] <insaneinside> No, not "confusing".  "Wrong".
[19:27:36] <phaylon> yea, the '>' part
[19:27:48] <insaneinside> phaylon: congratulations!  You get a cookie! :)
[19:27:56] *** Joins: zzmp (zzmp@moz-5p1.h2b.247.173.IP)
[19:28:01] * insaneinside tosses a cookie in phaylon's direction.
[19:28:07] <phaylon> :D
[19:29:47] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Connection closed)
[19:30:13] <insaneinside> Reduced test case: http://is.gd/khyi4o
[19:30:16] *** Joins: Wqer (user@moz-rn4tf7.541k.ockc.8900.2605.IP)
[19:30:22] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[19:30:34] *** Joins: srh (User@moz-80e.38o.254.50.IP)
[19:30:38] <phaylon> yea, should probably be just the opening '<', like the '('
[19:30:49] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[19:30:56] *** Quits: tcard (tcard@moz-jdrdbk.ddns.jazztel.es) (Client exited)
[19:31:40] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Connection closed)
[19:31:50] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[19:31:54] <niconii> insaneinside: guess it's time to file a bug report then
[19:32:32] <insaneinside> i don't *think* a matching one exists: https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+expected+found+in%3Atitle
[19:32:34] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[19:32:43] <GBGamer> argh I need help
[19:32:50] *** Joins: kazimuth (james@moz-h7l.35b.189.18.IP)
[19:33:20] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[19:33:21] <GBGamer> I am attempting to emit a small i386 object file
[19:33:59] *** Quits: eerie_ (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:34:00] *** Quits: elbow_json (elbow@moz-vtr.tk4.30.50.IP) (Connection closed)
[19:34:10] *** Joins: elbow_json (elbow@moz-vtr.tk4.30.50.IP)
[19:34:14] <GBGamer> (freestanding)
[19:34:29] *** nsm|away is now known as nsm
[19:34:49] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:35:06] <GBGamer> but rustc --emit=obj -C target-cpu=i386 test.rs gives me an elf64-x86-64
[19:35:28] <GBGamer> Which, besides not being freestanding, is also 64-bit
[19:35:31] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[19:35:57] *** Quits: mahdi (mahdi@moz-8oo.182.244.151.IP) (Ping timeout: 121 seconds)
[19:36:45] *** Joins: mahdi (mahdi@moz-ipf.n3s.129.78.IP)
[19:36:54] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[19:37:03] *** Quits: kushal (kdas@moz-r2sm7r.202.sitibroadband.in) (Ping timeout: 121 seconds)
[19:37:21] *** Joins: makhauser (quassel@moz-7p8.00g.111.213.IP)
[19:37:23] <GBGamer> Well, I guess it's freestanding, but it still gives me a x86_64 obj when I want an x86 obj
[19:37:49] <mbrubeck> From the reference: "A path is a sequence of one or more path components logically separated by a namespace qualifier (::)."
[19:37:52] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[19:37:56] <mbrubeck> What does "logically separated" mean?
[19:38:05] <mbrubeck> (and why is *logically* in italics?)
[19:38:19] <insaneinside> mbrubeck: maybe you're supposed to be logical about it?
[19:38:29] <insaneinside> steveklabnik: ^^^
[19:39:15] * steveklabnik shrugs
[19:39:24] *** Quits: JanC_ (janc@moz-3oruui.dsl.scarlet.be) (Quit: 'k Zie weg)
[19:40:13] <Havvy> I think it means that `::` has semantic meaning versus, say, an underscore.
[19:40:14] *** Joins: JanC (janc@moz-3oruui.dsl.scarlet.be)
[19:41:54] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[19:41:57] <insaneinside> By specifying that there are *components* separated by something, it's pretty clear that the qualifier is not itself a component.
[19:43:57] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[19:45:21] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[19:45:37] *** Joins: drewm1980 (drewm1980@moz-b5ce5a.hujf.dasj.1812.2a02.IP)
[19:46:32] <insaneinside> er..  What's with `mem::POST_DROP_*`?
[19:46:45] *** Quits: dustinm (dustinm@moz-9ms.n6q.68.208.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[19:47:12] <insaneinside> e.g. `mem::POST_DROP_U8` is defined as 29.  But why the heck does it exist?
[19:47:36] <iopq> how do I write this? while let Some(liberty) in group.liberties().iter()
[19:48:30] *** Joins: akiss (akiss@moz-l61h32.pool.digikabel.hu)
[19:48:32] <insaneinside> iopq: you want to stop iteration on the first None value, correct?
[19:48:46] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[19:49:01] <iopq> insaneinside: actually no, I want to go through all of them
[19:49:05] <talchas> it looks like something about making sure nothing depends on zero-on-drop
[19:49:09] *** Parts: xyproto (alexander@moz-3vd7v3.members.linode.com) ("WeeChat 1.1.1")
[19:49:11] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[19:49:15] *** Quits: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:49:19] *** Joins: Ankhers (user@moz-t6s1p1.CYLAB.CMU.EDU)
[19:49:24] *** Joins: dustinm (dustinm@moz-9ms.n6q.68.208.IP)
[19:49:39] <Ankhers> What is the file naming convention for Rust?
[19:49:55] <jshs> iopq: why no for loop?
[19:50:06] <bluss> talchas: yes, to make it easier to migrate to non-filling drop later
[19:50:16] <iopq> jshs: I could do a for loop
[19:50:23] <insaneinside> bluss: but ... 29?
[19:50:59] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[19:51:00] <talchas> insaneinside: https://github.com/rust-lang/rust/pull/23535 for details
[19:51:01] *** Joins: cptroot (Mibbit@moz-n169l8.caltech.edu)
[19:51:02] <insaneinside> also: does Rust have something like `realloc`?
[19:51:07] *** Quits: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP) (Quit: nn)
[19:51:13] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[19:51:17] <bluss> yes
[19:52:40] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[19:53:23] *** Quits: Thorn (Thorn@moz-gfo.20c.107.217.IP) (Quit: Quit)
[19:53:51] *** Joins: slurps-mad-rips (slurps-mad-@moz-o2c.uaj.44.17.IP)
[19:53:52] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[19:55:01] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[19:55:09] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[19:56:13] <insaneinside> ehh.. so here's my current crazy idea: reduce excessive use of heap allocation for dynamically-sized allocators by using some sort of "flexible box"...
[19:56:28] <XMPPwocky> hm?
[19:56:40] *** Joins: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net)
[19:57:04] *** Joins: essem2 (Thunderbird@moz-f9p.4ol.7.74.IP)
[19:57:11] *** Quits: tetricyclone (Mibbit@moz-sb8.u80.219.128.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:57:55] <insaneinside> e.g. I decided to design the API I'm working on to be extensible -- it defines interfaces for things, and dynamically-loaded modules can implement those interfaces (the other option was to use enums, which would be more efficient but limit extensibility).
[19:57:56] *** Quits: frecel (quassel@moz-qme.p1t.254.162.IP) (Connection closed)
[19:58:06] *** Joins: frecel (quassel@moz-qme.p1t.254.162.IP)
[19:58:17] *** Quits: csherratt (colin@moz-357qdq.cable.teksavvy.com) (A TLS packet with unexpected length was received.)
[19:58:32] *** Joins: csherratt (colin@moz-357qdq.cable.teksavvy.com)
[19:58:37] *** Quits: Fiveside (fiveside@moz-t2eatg.vsp.com) (Quit: WeeChat 1.1.1)
[19:58:47] *** Quits: vairav (vairav@moz-pkkcjo.modeln.com) (Client exited)
[19:58:54] <insaneinside> Some methods in those interfaces (traits) return iterators -- which are necessarily boxed because their concrete types might differ between implementations.
[19:59:34] <FreeFull> main.0.rs:(.text._ZN4main20h70340525956400e4eaaE+0x20): undefined reference to `__morestack'
[20:00:22] <insaneinside> Now, in C++ I'd just provide a way to query the impl's iterator size, `alloca()` it, and then have the impl construct its iterator on the stack.  But we don't have `alloca` (...yet).
[20:00:34] <FreeFull> I'm trying to compile a program for an OS that LLVM doesn't support
[20:01:00] <FreeFull> That's what happens when I try to link using the gcc cross-compiler for it, any hints?
[20:01:09] <FreeFull> I am using libcore
[20:03:20] *** Joins: sprocket (Mibbit@moz-1mb.6sm.0.198.IP)
[20:03:29] <sprocket> hello rust hackers
[20:03:30] *** Joins: ytain (ytain@moz-aope4o.dsl.teksavvy.com)
[20:03:42] <sprocket> I would like to evaluate if I would like to become a rust hacker
[20:04:23] *** Quits: akiss (akiss@moz-l61h32.pool.digikabel.hu) (Ping timeout: 121 seconds)
[20:04:24] <sprocket> I want to download a bundle of all your docs so that I can peruse them disconnected from the interwebz which is necessary for me to actually be able to read properly
[20:04:30] <steveklabnik> sprocket: they come with the install
[20:04:33] <sprocket> can I do so? is there a git repo of them
[20:04:34] <sprocket> ah
[20:04:36] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[20:04:41] <sprocket> hey you are a famous person
[20:04:44] <steveklabnik> psssh
[20:04:44] <sprocket> thanks
[20:04:46] <sprocket> haha
[20:04:49] <steveklabnik> you're welcome though :)
[20:04:53] *** Joins: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP)
[20:05:00] <steveklabnik> note, i'm still pretty furiously working on them
[20:05:03] <sprocket> so on this ridiculous new version of osx
[20:05:03] <steveklabnik> like, literally right now
[20:05:06] <sprocket> nice
[20:05:11] <steveklabnik> so they'll get even better soon
[20:05:14] <sprocket> I applaud your dedication to the english language
[20:05:20] <steveklabnik> :)
[20:05:29] <sprocket> and will join you if I find the language good which I expect that I will
[20:05:55] <sprocket> so on os x 10.10.1 or whatever  this thing is called
[20:06:06] <sprocket> if I've got your source tar ball
[20:06:12] <sprocket> and gcc
[20:06:17] *** Joins: new_one (new_one@moz-jqr.s43.42.128.IP)
[20:06:20] <sprocket> via macports
[20:06:33] <sprocket> I should be able to build the compiler and docs and go from there?
[20:06:36] <geofft> the Rust compiler is written in Rust, so gcc doesn't really help you :( 
[20:06:48] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[20:06:54] <sprocket> oh, right you are self hosted
[20:06:59] <FreeFull> gcc is used for linking
[20:07:05] <sprocket> so I guess I will go read the building docs
[20:07:06] <geofft> in fairness, you can't build gcc without a C++ compiler either 
[20:07:15] <XMPPwocky> gcc is C++?
[20:07:21] *** Joins: krzysz00 (krzys@moz-959vup.dorm.utexas.edu)
[20:07:22] <geofft> as of a year or two ago, yeah (IIRC) 
[20:07:29] <reem> sprocket: this is just my opinion, but I find brew much nicer than macports on OS X
[20:07:29] <geofft> I don't think there is a particularly easy way to build Rust without having a Rust compiler 
[20:07:32] <sprocket> ya, you have to install xcode to install macports
[20:07:48] <FreeFull> A large section of Rust is written in Rust
[20:07:49] <geofft> I think it is technically possible, if you start with an OCaml compiler and about five years' worth of Rust snapshots 
[20:07:54] <geofft> and spend a month on it 
[20:08:01] <geofft> but really, just get a binary distribution from the website :) 
[20:08:03] <insaneinside> aren't there pre-compiled tarballs of Rust for OS X?
[20:08:04] <sprocket> Attempting to fetch rust-0.12.0-pre-20140903-8a89867_0.darwin_14.x86_64.tbz2 from http://packages.macports.org/rust
[20:08:08] <krzysz00> Are there plans to stabilize lib{core,alloc,collections} before 1.0. Having those as independent components is really useful for OS dev.
[20:08:08] <geofft> or that. 
[20:08:09] <FreeFull> insaneinside: Yes
[20:08:12] <sprocket> is that good enough?
[20:08:17] <reem> sprocket: no, that’s super old
[20:08:25] <geofft> 2014-09-03 is quite old 
[20:08:31] <sprocket> okay
[20:08:34] <FreeFull> krzysz00: osdev will have to stick to nightlies for now
[20:08:41] *** Quits: kamilc__ (kamil@moz-6vuhjs.play-internet.pl) (Quit: Linkinus - http://linkinus.com)
[20:08:43] *** Joins: fzzy (fzzy@moz-u36pr1.cs.helsinki.fi)
[20:08:48] <krzysz00> Good to know.
[20:08:50] *** Joins: lucian (lucian@moz-2c3pda.cable.virginm.net)
[20:09:16] <steveklabnik> krzysz00: before 1.0, certainly not.
[20:09:18] *** Joins: shawnadelic (shawn@moz-u5o3kk.res.rr.com)
[20:09:27] <steveklabnik> krzysz00: parts of alloc are pretty high priority
[20:09:27] <fzzy> has anyone gotten rust-sdl2 (by angrylawyer) to compile? i cant  get it  to compile with any rust version
[20:09:37] <geofft> sprocket: http://www.rust-lang.org/install.html 
[20:09:39] <steveklabnik> but os dev will be on nightly for a while, if only due to things like inline asm
[20:10:01] <krzysz00> (It would be nice if) there was a "1.0-nightly", which is like 1.0, but with unstable features on.
[20:10:02] *** Joins: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net)
[20:10:30] <steveklabnik> you can build one of those yourself!
[20:10:33] <geofft> someone could easily build one. I think it's intentional that rust-lang.org won't advertise it 
[20:10:34] <krzysz00> steveklabnik: True. Inline asm will definately be a while
[20:11:19] <GBGamer> fzzy: what's your issue?
[20:11:25] <krzysz00> Last time I tried to build from source, my LLVM spat errors at me. Probbably an issue on my end though.
[20:11:31] *** chmanchester is now known as chmanchester|afk
[20:12:05] *** Joins: dso (dso@moz-3v1n2h.consolidated.net)
[20:12:20] <krzysz00> I'm "cross-compiling" lib* anaway, so we might as well build the compiler.
[20:12:52] *** Quits: lucian (lucian@moz-2c3pda.cable.virginm.net) (Ping timeout: 121 seconds)
[20:13:09] *** Quits: zzmp (zzmp@moz-5p1.h2b.247.173.IP) (Connection closed)
[20:13:35] *** Joins: zzmp (zzmp@moz-d4rqdv.12ul.lrlq.5500.2604.IP)
[20:13:45] *** Quits: andre (andre@moz-rnd.3qv.76.201.IP) (Quit: leaving)
[20:13:53] <GBGamer> It's working for me
[20:13:55] <sprocket> so where does the installer put the docs?
[20:14:28] <geofft> my machine seems to have them at /usr/local/share/doc/rust 
[20:14:47] *** Parts: krzysz00 (krzys@moz-959vup.dorm.utexas.edu) ()
[20:14:49] <fzzy> GBGamer: which rust version you use
[20:15:40] <GBGamer> 1.0.0 nightly (00978a987 2015-04-18)
[20:15:46] *** Joins: vairav (vairav@moz-pkkcjo.modeln.com)
[20:15:48] *** Joins: cacaca (Mibbit@moz-aua.g0i.51.193.IP)
[20:16:12] <fzzy> GBGamer: on linux?
[20:16:13] <sprocket> geoff: that's it thanks
[20:16:17] <sprocket> bye for now
[20:16:30] <sprocket> if I come back it will probably be under the handle kidvegas
[20:16:32] <GBGamer> yup
[20:16:32] <sprocket> cheers, thanks
[20:16:33] <geofft> have fun offline! 
[20:16:40] *** Quits: sprocket (Mibbit@moz-1mb.6sm.0.198.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:16:55] *** Joins: frankmcsherry (frankmcsher@moz-faa086.adsl.alicedsl.de)
[20:16:57] *** Quits: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:18:04] <GBGamer> It also works on the latest nightly
[20:18:14] <GBGamer> what's your error?
[20:18:22] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[20:18:24] <fzzy> mm wait sec
[20:18:26] *** Joins: Hannibal_Smith (nico@moz-ucg29b.retail.telecomitalia.it)
[20:18:55] *** Quits: buzugu (baptiste@moz-5il26q.rev.sfr.net) (Client exited)
[20:18:58] <insaneinside> Why does `std::mem` have `min_align_of` but not `pref_align_of`?
[20:19:20] <XMPPwocky> isn't that just align_of
[20:19:38] <insaneinside> http://doc.rust-lang.org/nightly/std/ops/trait.Drop.html?search=align
[20:19:50] <insaneinside> also look at the docs for `min_align_of`
[20:20:05] <XMPPwocky> insaneinside: http://doc.rust-lang.org/src/core/mem.rs.html#111
[20:20:57] <insaneinside> so I need to read the source code to learn this.  hooray.
[20:21:56] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[20:22:43] <fzzy> GBGamer: nevermind... it compiles after i updated to latest nightly
[20:22:48] *** Joins: _ixti_ (ixti@moz-i3d.dae.119.188.IP)
[20:22:52] <GBGamer> fzzy: col
[20:22:54] <GBGamer> *cool
[20:22:56] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (Quit: leaving)
[20:23:00] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[20:23:00] *** ChanServ sets mode: +o erickt
[20:23:16] <XMPPwocky> "I'm looking forward to seeing the major security-critical libraries being rewritten in Rust, even if they are then often called from C. Especially OpenSSL/LibreSSL, which is a mess inside, has way too much legacy code, and too many ways to turn encryption off, log keys, or weaken checks."
[20:23:19] *** Joins: claudiu (claudiu@moz-gqds22.0ekj.kp93.010d.2620.IP)
[20:23:36] <insaneinside> XMPPwocky: source of quote?
[20:23:39] <XMPPwocky> <blink><marquee> rust does not prevent logic errors </marquee></blink>
[20:23:48] <XMPPwocky> https://news.ycombinator.com/item?id=9435744
[20:24:05] <XMPPwocky> i  don't know how hn even works or i'd respond
[20:24:29] *** Parts: dso (dso@moz-3v1n2h.consolidated.net) ("Konversation terminated!")
[20:24:52] *** Quits: ixti (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[20:25:57] *** Joins: basicdays (basicdays@moz-vreeoj.cable.rcn.com)
[20:26:25] <hoverbear> XMPPwocky: I'm not sure HN actually works at all.
[20:26:28] <rkruppe> Proof that you can be as careful as you want in your advocacy, someone will still find a way to over-sell
[20:27:53] <XMPPwocky> what's really interesting is that every flaw in openssl named there isn't helped much or at all by rust
[20:28:09] <rkruppe> Yeah, they're all poor design
[20:28:12] * VShell notes that nothing fully prevents logic errors. if it did, we'd have a computer that can magically guess what you want.
[20:28:14] <insaneinside> hrmmm: http://www.quorumlanguage.com/evidence.php they may have Science, but Margins can go to hell.
[20:28:16] <reem> “mess inside”
[20:28:28] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[20:29:03] *** Quits: jjthrash (jjthrash@moz-gsigbq.res.rr.com) (Quit: Leaving...)
[20:29:52] * hugod wonders why there is no `impl<T> AsRef<T> for T`
[20:30:26] <reem> hugod: Coherence, it would conflict with impl<T, U: AsRef<T>> AsRef<T> for &U { }
[20:30:32] <reem> since &U could be T
[20:30:44] <hugod> reem: ah, thanks
[20:30:55] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[20:31:04] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Connection closed)
[20:31:23] *** Joins: skade (skade@moz-6athcr.pools.vodafone-ip.de)
[20:32:40] <reem> hugod: You might notice that Borrow is the same trait, this is so it can have the impl<T> Borrow<T> for T impl.
[20:32:41] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[20:32:58] <reem> so AsRef and Borrow might be combinable in the future
[20:33:12] <ebfull> specialization?
[20:33:12] <steveklabnik> they mean different things though
[20:33:28] <steveklabnik> see here: https://github.com/rust-lang/rust/issues/24163
[20:33:49] *** Quits: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de) (Connection closed)
[20:33:56] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:34:17] *** Joins: alex3 (alex@moz-s9a.qrc.242.157.IP)
[20:34:38] <reem> steveklabnik: Interesting. IMO since the rules for Borrow can’t be enforced by the compiler anyway, I’m not sure if it would be worth keeping both around if we could have both impls. 
[20:34:48] <reem> (on one trait)
[20:35:24] *** Quits: dschatzberg (dschatz@moz-nk1clf.bu.edu) (Quit: Leaving)
[20:35:24] *** bentley|away is now known as bentley
[20:35:29] <hugod> It looks like I should just use Borrow then - I just want a function that works for Vec<SomeT> and Vec<&SomeT>
[20:36:08] *** Quits: dfinninger (dfinninger@moz-fe6.5n7.235.207.IP) (Connection closed)
[20:36:09] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[20:36:09] *** Quits: agarie (agarie@moz-3eg.b1m.32.177.IP) (Quit: Leaving...)
[20:36:31] *** Joins: sfusco1 (Adium@moz-97aes3.fios.verizon.net)
[20:36:36] <XMPPwocky> TIL you can have an inherent impl on types defined in submodules
[20:36:47] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[20:36:48] *** Quits: sfusco (Adium@moz-io3.np5.78.208.IP) (Ping timeout: 121 seconds)
[20:36:58] <insaneinside> XMPPwocky: "inherent"?
[20:36:59] <XMPPwocky> rusti: mod wat { pub struct Foo; } impl wat::Foo { fn why(&self) {} }
[20:37:00] -playbot- ()
[20:37:26] <XMPPwocky> and you can have one inside the mod too
[20:37:38] <insaneinside> ...and they don't conflict??
[20:37:39] *** Quits: drewm1980 (drewm1980@moz-b5ce5a.hujf.dasj.1812.2a02.IP) (Ping timeout: 121 seconds)
[20:37:45] *** Joins: lucian (lucian@moz-2c3pda.cable.virginm.net)
[20:37:53] <hoverbear> rusti: mod wat { pub struct Foo; impl wat::Foo { fn why(self) {} } } impl wat::Foo { fn why(&self) {} }
[20:37:53] -playbot- <anon>:9:40: 9:48 error: failed to resolve. Use of undeclared type or module `wat`
[20:37:54] -playbot- <anon>:9         mod wat { pub struct Foo; impl wat::Foo { fn why(self) {} } } impl wat::Foo { fn why(&self) {} }
[20:37:54] -playbot- output truncated; full output at: http://bit.ly/1OlPxuv
[20:38:05] <hoverbear> rusti: mod wat { pub struct Foo; impl Foo { fn why(self) {} } } impl wat::Foo { fn why(&self) {} }
[20:38:06] <XMPPwocky> hoverbear: one "wat" too many
[20:38:07] -playbot- ()
[20:38:15] <XMPPwocky> ... wait, what the hell
[20:38:17] <hoverbear> Oh dear, no error.
[20:38:19] <XMPPwocky> is that a bug
[20:38:27] <hoverbear> XMPPwocky: Are you going to file it?
[20:38:30] <XMPPwocky> i thought it was a feature that was poorly documented
[20:38:34] *** Joins: Fiveside (fiveside@moz-t2eatg.vsp.com)
[20:38:36] <XMPPwocky> whaaat
[20:38:37] *** Quits: fabianvf_ (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[20:38:44] <XMPPwocky> what hapens if you call it
[20:39:14] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[20:39:20] <XMPPwocky>  http://is.gd/mSVtSR
[20:40:00] <XMPPwocky> well at least *that* bit makes sense
[20:40:32] *** Joins: Guest67_ (textual@moz-og7.cn8.251.116.IP)
[20:41:28] <hoverbear> XMPPwocky: http://is.gd/eMjrps
[20:42:57] *** Joins: chronode (chronode@moz-oddj4e.ga.comcast.net)
[20:43:19] <hoverbear> XMPPwocky: That is all sorts of confusing
[20:43:37] *** Joins: yesimon (simon@moz-qqr.bma.173.69.IP)
[20:43:39] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[20:43:47] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[20:43:51] *** Joins: polyfractal (polyfractal@moz-dgo.lt5.43.69.IP)
[20:44:05] *** chmanchester|afk is now known as chmanchester
[20:44:05] <yesimon> How do I parse scientific notation string to float?
[20:44:25] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[20:44:41] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[20:44:48] <bluss> .parse() can do it in some cases
[20:44:59] <bluss> playbot: "1.1e2".parse::<f32>()
[20:45:00] -playbot- Ok(110)
[20:45:03] <fzzy> GBGamer: have you gotten sdl_image, mixer, ttf ... to work too? i cant get sdl_image to compile
[20:45:52] <fzzy> actually nvm
[20:46:09] *** ahal is now known as ahal|afk
[20:46:33] *** Quits: khades (Thunderbird@moz-u45.3vk.74.212.IP) (Client exited)
[20:46:43] *** Joins: khades (Thunderbird@moz-u45.3vk.74.212.IP)
[20:46:56] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[20:47:13] <hoverbear> XMPPwocky: I dunno, is it a bug?
[20:47:17] <XMPPwocky> hoverbear: i think so
[20:47:22] <XMPPwocky> http://is.gd/paL7Ur
[20:47:25] <hoverbear> XMPPwocky: Are you going to open an issue?
[20:47:29] <XMPPwocky> i don't think rust is supposed to have function overloading
[20:47:38] <XMPPwocky> not that i necessarily have an issue...
[20:47:41] <XMPPwocky> hoverbear: you can
[20:47:42] <hoverbear> XMPPwocky: Pretty sure it isn't.
[20:47:53] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[20:47:59] <insaneinside> er.  But does function overloading work?
[20:48:06] <hoverbear> XMPPwocky: Only looks like it complains if they have the same signature
[20:48:14] <bluss> trait multidispatch is similar to overloading
[20:48:20] <insaneinside> I mean, "it's not a feature, it's a bug" sounds pretty lame.
[20:48:28] <bluss> you can impl YourType::from(X) for multiple types X
[20:48:30] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[20:48:41] <hoverbear> XMPPwocky: Doesn't work: http://is.gd/Sr8jbd ... Works: http://is.gd/eMjrps
[20:48:46] *** Quits: mahdi (mahdi@moz-ipf.n3s.129.78.IP) (Quit: Leaving)
[20:49:09] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Connection closed)
[20:49:53] <yesimon> playbot: "3.6359104024971537e-14".parse::<f64>()
[20:49:55] -playbot- Ok(0)
[20:50:39] <hoverbear> "3.6359104024971537e-1".parse::<f64>()
[20:50:45] <hoverbear> playbot: "3.6359104024971537e-1".parse::<f64>()
[20:50:46] -playbot- Ok(0.363591)
[20:50:58] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[20:51:05] <bluss> playbot: print!("{:.16}", "3.6359104024971537e-14".parse::<f64>().unwrap())
[20:51:05] <simukis> print rounds to 6 decimal places by default
[20:51:06] -playbot- 0.0000000000000364()
[20:51:35] <insaneinside> ehh.  Six significant figures would be better...
[20:51:51] <simukis> eh who cares, ain’t native speaker 😉
[20:51:58] <yesimon> Ah thanks, that was confusing. Sigfigs would be nice...
[20:52:07] <hoverbear> simukis: Sig figs and decimals aren't the same :)
[20:52:08] <rkruppe> Even so, parsing and formatting is inaccurate
[20:52:14] *** Joins: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com)
[20:52:24] <bluss> playbot: print!("{:.19e}", "3.6359104024971537e-14".parse::<f64>().unwrap())
[20:52:25] -playbot- 3.6359104024971542479e-14()
[20:52:31] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[20:52:34] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[20:52:41] <rkruppe> lifthrasiir has a PR that fixes the formatting, and I'm working on the parsing
[20:52:47] <bluss> nice
[20:53:17] <simukis> that’s Yurume on IRC :)
[20:53:33] <rkruppe> I knew it was a different nick, but I couldn't recall which
[20:53:57] <simukis> rkruppe: there’s always rustaceans.org to help with memory issues :)
[20:54:03] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Ping timeout: 121 seconds)
[20:54:06] <rkruppe> Right, that's a thing
[20:54:13] <rkruppe> Now if only I could remember *that* ;)
[20:54:33] *** Joins: drewm1980 (drewm1980@moz-b5ce5a.hujf.dasj.1812.2a02.IP)
[20:54:49] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (A TLS packet with unexpected length was received.)
[20:55:04] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[20:55:14] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[20:55:54] *** Quits: palodequeso (quassel@moz-ebjt83.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[20:56:33] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[20:57:08] *** Quits: tadh (quassel@moz-88tk3f.res.rr.com) (Ping timeout: 121 seconds)
[20:58:25] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[20:58:41] *** Joins: ytain_ (ytain@moz-ge9fgi.dsl.teksavvy.com)
[20:59:01] *** Quits: gingermusketeer (gingermuske@moz-81ef7b.compute.amazonaws.com) (Connection closed)
[20:59:07] *** Joins: gingermusketeer (gingermuske@moz-t9ngvg.compute.amazonaws.com)
[20:59:46] *** Quits: edbond (edbond@moz-8st.7gv.108.109.IP) (Ping timeout: 121 seconds)
[21:00:14] *** Quits: ytain (ytain@moz-aope4o.dsl.teksavvy.com) (Connection closed)
[21:00:31] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[21:01:12] *** Quits: forgottenone (forgottenon@moz-7c3.s8g.45.92.IP) (Quit: Konversation terminated!)
[21:01:19] *** Quits: alex3 (alex@moz-s9a.qrc.242.157.IP) (Ping timeout: 121 seconds)
[21:02:23] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[21:02:26] <insaneinside> Is there something in the standard library that allows "iterator recursion", e.g. branching into a sub-iterator?
[21:03:04] <hoverbear> insaneinside: Like chain?
[21:03:04] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[21:03:29] <hoverbear> insaneinside: Or do you mean like an iterator of iterators?
[21:03:33] <Gliptic> insaneinside, flat_map?
[21:03:58] *** Joins: RCIX (RCIX@moz-vnmep7.ph.cox.net)
[21:04:53] <cmr> WindowsBunny: it was a mis-tab, sorry.
[21:05:04] *** Quits: twipeD (wipeD@moz-hnda1k.dip0.t-ipconnect.de) (Connection closed)
[21:05:23] *** Quits: jwatt (roslea@jwatt.irc.users.mozilla.org) (Ping timeout: 121 seconds)
[21:06:06] *** Quits: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com) (Ping timeout: 121 seconds)
[21:07:08] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:07:55] *** Quits: slomo (slomo@moz-p8m0g2.net) (Quit: Ex-Chat)
[21:08:00] *** Joins: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com)
[21:08:45] *** Quits: drewm1980 (drewm1980@moz-b5ce5a.hujf.dasj.1812.2a02.IP) (Ping timeout: 121 seconds)
[21:09:57] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Client exited)
[21:10:07] *** Joins: fabiand (fabiand@moz-hf9gac.dip0.t-ipconnect.de)
[21:10:22] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[21:11:14] *** Quits: zzmp (zzmp@moz-d4rqdv.12ul.lrlq.5500.2604.IP) (Connection closed)
[21:12:19] *** Quits: skade (skade@moz-6athcr.pools.vodafone-ip.de) (Quit: Textual IRC Client: www.textualapp.com)
[21:13:17] <geofft> how do I include an example in a cargo package that is, itself, a library? 
[21:14:04] *** Quits: hjr3 (hradtke@moz-dmp.av4.169.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:14:19] *** Joins: chuckr (Mibbit@moz-gvi.h8h.107.131.IP)
[21:15:36] *** Joins: buzugu (baptiste@moz-5il26q.rev.sfr.net)
[21:15:43] *** Joins: tyoverby (tyoverby@moz-fo2liv.cs.washington.edu)
[21:15:55] *** Quits: kgrandon (Adium@moz-idvg57.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[21:16:06] <tyoverby> Is there a name for the concept of "don't ever let this object Drop"?
[21:16:08] *** Joins: Johannes_ (johannes@moz-ufvp1b.nttpc.ne.jp)
[21:16:09] <geofft> or, alternatively, a single cargo project that includes multiple libray crates, one of which uses the other 
[21:16:20] <tyoverby> I find that when wrapping C APIs, they don't fit into RAII that well
[21:16:28] *** Joins: zzmp (zzmp@moz-d4rqdv.12ul.lrlq.5500.2604.IP)
[21:17:25] *** Joins: XrXr (Mibbit@moz-rsi.1lh.49.70.IP)
[21:17:43] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[21:17:56] <geofft> tyoverby: returning a &'static comes to mind, but maybe I don't understand what you're asking yet 
[21:18:04] *** Joins: amphibulus (Mibbit@moz-l5d.men.211.46.IP)
[21:18:14] <XMPPwocky> sounds like something that linear types would help
[21:18:18] <geofft> are you going for, make sure code doesn't let this go out of scope without passing it to some function to destroy it, or storing it somewhere? 
[21:18:33] <tyoverby> geofft: yeah, that's pretty accurate 
[21:18:43] <XrXr> Hello, I'm trying to set the exit code of my program, but I can't because std::env::set_exit_status is unstable. Am I out of luck?
[21:18:45] *** Joins: asQuirre_ (asQuirreL@moz-ro1qqu.ox.ac.uk)
[21:18:52] <dwrensha> tyoverby: arena allocation?
[21:18:56] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[21:18:56] <kalail> hmmmm, not much documentation for Process?
[21:18:57] <tyoverby> like, dropping a "Body" is illegal unless you call "Space.remove(body)"
[21:18:58] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[21:18:59] <kalail> vs threads*
[21:19:11] <XMPPwocky> XrXr: you can call libc's exit function
[21:19:22] <XrXr> alright.
[21:19:29] <talchas> tyoverby: well, one way to do it is to make the drop function call whatever ffi free thing is necessary
[21:19:31] <tyoverby> so I'd like to have the compiler prevent you from dropping it at all and have Space.remove "drop" it
[21:19:34] <talchas> (this dosen't always work easily)
[21:19:59] <tyoverby> talchas: yeah, the problem is that for that solution to work, you need shared mutable state
[21:20:01] *** Joins: kard (-@moz-3ptu76.dip0.t-ipconnect.de)
[21:20:24] <chuckr> on Windows is gcc or lld used to link? 
[21:20:27] <tyoverby> because you need to have a mutable reference to the "parent" in order to remove it 
[21:20:28] <geofft> you _can_ do shared mutable state, you just need to do so with appropriate locking or similar :) 
[21:20:48] <tyoverby> geofft: with a physics engine, locking is not an option :(
[21:20:49] *** Quits: fabiand (fabiand@moz-hf9gac.dip0.t-ipconnect.de) (Quit: Verlassend)
[21:21:04] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:21:15] <tyoverby> XMPPwocky: I'll look into linear types
[21:21:32] *** Quits: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk) (Ping timeout: 121 seconds)
[21:21:44] <geofft> "or similar" -- if you know that you're not crossing threads or something, you can just `unsafe {}` it 
[21:21:47] <XrXr> @XMPPwocky, libc's exit is also unstable...
[21:21:53] <geofft> (and that there are no reentrant calls) 
[21:21:55] <XMPPwocky> XrXr: ... really? woops.
[21:22:07] <new_one> is there an built in identity function? f x -> x
[21:22:08] <steveklabnik> XMPPwocky: XrXr we were supposed to stabilizing some kind of exit soon
[21:22:08] <geofft> XrXr: XMPPwocky: un_safe_, not unstable, right? 
[21:22:16] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[21:22:17] *** ChanServ sets mode: +o nrc
[21:22:17] <tyoverby> geofft, iterator invalidation is still a concern
[21:22:23] <XrXr> http://doc.rust-lang.org/1.0.0-beta.2/libc/funcs/c95/stdlib/fn.exit.html
[21:22:36] <frankmcsherry> ok, here is a problem with the "just use generics" argument:
[21:22:38] <steveklabnik> XrXr: http://doc.rust-lang.org/1.0.0-beta.2/std/process/fn.exit.html <-
[21:22:42] *** Quits: yesimon (simon@moz-qqr.bma.173.69.IP) (Connection closed)
[21:22:43] <frankmcsherry> "error: incorrect number of type parameters given for this method:"
[21:22:44] *** Joins: yesimon (simon@moz-qqr.bma.173.69.IP)
[21:22:45] *** Quits: Ankhers (user@moz-t6s1p1.CYLAB.CMU.EDU) (Ping timeout: 121 seconds)
[21:22:47] <XrXr> nice!
[21:22:49] <XrXr> thanks
[21:22:51] <geofft> steveklabnik++ 
[21:22:58] <frankmcsherry> "self.group_by_trace::<_,_,_,_,_,_,Vec<DifferentialShard<_,_,_>>," (continues)
[21:23:05] *** Joins: mkpankov (mkpankov@moz-s17.70f.16.195.IP)
[21:23:13] <amphibulus> Help me pleeez :) http://doc.rust-lang.org/1.0.0-beta.2/std/f32/fn.to_str_hex.html - "use format! instead". How i can do that? ;(
[21:23:25] <frankmcsherry> "VectorCollectionTrace<G::Timestamp,_>,VectorCollectionTrace<G::Timestamp,_>, _>" (ends)
[21:23:29] <steveklabnik> amphibulus: http://doc.rust-lang.org/1.0.0-beta.2/std/fmt/ <-
[21:23:44] <steveklabnik> amphibulus: specifically http://doc.rust-lang.org/1.0.0-beta.2/std/fmt/#formatting-traits
[21:23:47] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Connection closed)
[21:23:56] *** Quits: tyoverby (tyoverby@moz-fo2liv.cs.washington.edu) (Quit: leaving)
[21:24:16] *** Quits: lucian (lucian@moz-2c3pda.cable.virginm.net) (A TLS packet with unexpected length was received.)
[21:24:37] *** Joins: lucian (lucian@moz-2c3pda.cable.virginm.net)
[21:24:51] <amphibulus> No hex for f32 there.
[21:24:52] *** Quits: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP) (Ping timeout: 121 seconds)
[21:25:07] *** Joins: andresv (textual@moz-je2arp.wireless.calpoly.edu)
[21:25:09] *** Quits: XrXr (Mibbit@moz-rsi.1lh.49.70.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:25:27] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[21:25:28] <amphibulus> core::fmt::LowerHex` is not implemented for the type `f32`
[21:25:36] <steveklabnik> weird
[21:25:45] <amphibulus> Or i do it wrong? :)
[21:25:52] <steveklabnik> no, i assumed LowerHex would work
[21:25:57] <rkruppe> amphibulus: Out of curiosity, what do you need base 16 formatting for?
[21:26:01] <andresv> how to implement fmt::Display trait for enums? I have pseudocode version here: http://is.gd/pKTUSi
[21:26:13] *** Parts: rlr (rlr@moz-csl.qq6.185.208.IP) (".")
[21:26:44] <jshs> andresv: http://is.gd/Sr7u8V
[21:26:44] *** Quits: mkpankov (mkpankov@moz-s17.70f.16.195.IP) (Connection closed)
[21:26:49] *** Joins: mkpankov (mkpankov@moz-o69.tt8.174.46.IP)
[21:27:45] * rkruppe wonders whether rustc should add a warning when an ident pattern matches a variant name
[21:27:55] <andresv> jshs: thanks
[21:28:01] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (Ping timeout: 121 seconds)
[21:28:14] <amphibulus> rust-bencode use deprecated this to_str_hex
[21:28:39] *** Quits: lucian (lucian@moz-2c3pda.cable.virginm.net) (Ping timeout: 121 seconds)
[21:28:40] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Quit: ChatZilla 0.9.91.1 [Firefox 40.0a1/20150401085108])
[21:28:44] *** Quits: essem2 (Thunderbird@moz-f9p.4ol.7.74.IP) (Client exited)
[21:28:55] <WindowsBunny> chuckr: We definitely do not use lld
[21:29:12] *** Quits: worfox (worfox@moz-col7c9.9996.a0qj.41d0.2001.IP) (Ping timeout: 121 seconds)
[21:29:26] *** Joins: worfox (worfox@moz-oq3f5i.cc)
[21:29:50] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[21:30:00] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[21:30:02] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[21:30:06] <rkruppe> amphibulus: I can't find anything about bencode supporting floats, does rust-bencode add that unilaterally?
[21:30:22] <rkruppe> I'm asking because I thought float formatting in bases other than 16 is completely useless
[21:30:50] <WindowsBunny> chuckr: We invoke gcc, and then gcc invokes ld for us
[21:31:18] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (A TLS packet with unexpected length was received.)
[21:31:25] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[21:31:32] *** Quits: figaro (Mibbit@moz-i7cb3r.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:31:39] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[21:31:55] *** Quits: tno (tomas@moz-kp4fjo.7pm2.so41.08a0.2001.IP) (Ping timeout: 121 seconds)
[21:32:38] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:32:46] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:32:49] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[21:33:26] *** Joins: mkpankov` (mkpankov@moz-8p5.dee.149.83.IP)
[21:33:36] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[21:34:20] <fzzy> is there library like physfs for rust?
[21:34:51] <fzzy> ie. being able to read from .zips etc. like it was a folder?
[21:35:36] *** Joins: woowe (Mibbit@moz-d03.l02.145.12.IP)
[21:35:49] *** Quits: mkpankov (mkpankov@moz-o69.tt8.174.46.IP) (Ping timeout: 121 seconds)
[21:35:53] *** Joins: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net)
[21:36:02] *** Quits: amphibulus (Mibbit@moz-l5d.men.211.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:36:03] <woowe> hey guys how would I convert a C char ** into rust syntax?
[21:36:37] <geofft> woowe: the syntax equivalent is a *mut *mut libc::c_char 
[21:37:11] *** Joins: ekiwi (kevin@moz-a2becv.halifax.rwth-aachen.de)
[21:37:34] <geofft> but that's probably not the type you want to end up with, ultimately 
[21:37:45] <woowe> geofft: that is really weird lol xD, wouldn't have guessed that. Thank you
[21:37:54] <apoelstra> is rust-serde not compiling right now?
[21:38:00] <woowe> I am just trying the whole c ffi thing right now
[21:38:01] <o11c> or &[&str] or Vec<String> for higher-level versions
[21:38:03] <apoelstra> something about a change in std::num?
[21:38:31] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[21:38:37] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:38:37] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:38:59] <woowe> Would Vec<String> be passable to C?
[21:39:13] <geofft> right, &[&[u8]] is the closest immediate Rust equivalent 
[21:39:14] *** Quits: seancorfield (uid45586@moz-avmrbi.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[21:39:31] *** Quits: ekiwi (kevin@moz-a2becv.halifax.rwth-aachen.de) (Client exited)
[21:39:48] <geofft> Vec yes, String not directly -- C expects null-terminated character arrays 
[21:39:54] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[21:40:10] <woowe> Would it then be Vec<libc::CString>?
[21:40:31] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[21:40:31] <geofft> well, so one thing here is that Rust cares about ownership, C doesn't (directly) 
[21:40:36] <geofft> (it does care, it just doesn't tell you how it cares) 
[21:40:38] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:40:53] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:40:53] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:40:57] <geofft> so there's https://doc.rust-lang.org/std/ffi/struct.CString.html for an object that owns its bytes 
[21:41:04] <chuckr> WindowsBunny: I couldn't get -C link-args="--out-implib" to work
[21:41:05] <geofft> and https://doc.rust-lang.org/std/ffi/struct.CStr.html for something more like a slice / reference 
[21:41:17] <chuckr> WindowsBunny: note: gcc: error: unrecognized command line option '--out-implib'
[21:41:19] <geofft> the other thing is that String/str in Rust are UTF-8 strings, guaranteed to be well-formed UTF-8 
[21:41:28] <geofft> and (IIRC) allowed to contain NUL bytes 
[21:41:37] *** bentley is now known as bentley|away
[21:41:44] <geofft> C strings are just piles of bytes, no guarantee on well-formedness, cannot contain NUL, must end with NUL 
[21:41:55] <woowe> ahhhh
[21:41:59] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[21:42:08] <geofft> so because of those differences, the conversion process isn't quite straightfward 
[21:42:16] <geofft> and you have to think about what you mean by the conversion. 
[21:42:34] <geofft> for instance, if you're reading a string out of a C API like `getenv` that just hands you a pointer that's valid now but might stop being valid in the future 
[21:42:51] <geofft> then you probably want to copy it into a string you own. 
[21:42:52] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[21:43:14] <OtterCoder> What am I doing wrong here? I thought that Vec<_> implements chained iterators? http://is.gd/mIU2I2
[21:43:30] <woowe> so you probably want to copy values that you receive from a C api?
[21:43:42] <geofft> if you have an API like `asprintf` that allocates and then needs to be freed, you can claim ownership of the bytes, but you have to make sure to call C `free` when you're done 
[21:43:44] *** Joins: proc (proc@moz-11t9cg.dip0.t-ipconnect.de)
[21:43:46] <woowe> and it is probably safe to pass a pointer from rust to C?
[21:43:46] *** Quits: btobolaski (btobolaski@moz-ltbh80.va.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:43:46] <chuckr> WindowsBunny: rustc -C link-args="--out-implib" lib.rs 
[21:43:49] <chuckr> WindowsBunny: is my command line
[21:43:56] *** Quits: andresv (textual@moz-je2arp.wireless.calpoly.edu) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:44:04] <geofft> depends on the API :) 
[21:44:08] <woowe> Lol
[21:44:23] <woowe> okay okay, I am learning a ton right now
[21:44:44] <geofft> do you have a specific C library/API in mind? 
[21:44:50] <woowe> So do I just want to stay with all of the libc types?
[21:45:02] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[21:45:07] <woowe> I am trying to make a rust wrapper around the mikrotik C API
[21:45:17] *** Quits: Riastradh (riastradh@moz-vjb.r8r.42.192.IP) (Ping timeout: 121 seconds)
[21:45:17] *** Joins: mcanders (carter@moz-so1.g9o.171.216.IP)
[21:45:24] <woowe> namely, this one https://github.com/haakonnessjoen/librouteros-api/blob/master/librouteros.h
[21:45:28] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[21:45:57] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:45:58] *** Quits: mcanders (carter@moz-so1.g9o.171.216.IP) (Client exited)
[21:46:19] <WindowsBunny> chuckr: Well you just have to figure out how to convince gcc somehow
[21:46:23] <WindowsBunny> I don't use gcc
[21:46:27] <woowe> I was going to just make a full port of it to rust, but in the time frame I have. I thought it would be too much
[21:46:39] *** Joins: molokdotc (molokdotc@moz-kjf.mdl.255.187.IP)
[21:46:45] <geofft> yeah, looking at http://wiki.mikrotik.com/wiki/Manual:API 
[21:46:54] <geofft> it sorta seems like porting to Rust might actually be easier 
[21:46:56] <molokdotc> how can i contribute to rust community?
[21:47:05] <geofft> 'cause they have a nice example in pure Python 
[21:47:10] <chuckr> WindowsBunny: k, thanks!
[21:47:14] *** Quits: Johannes_ (johannes@moz-ufvp1b.nttpc.ne.jp) (Connection closed)
[21:47:22] <woowe> omg are you serious???!!!
[21:47:24] *** Joins: akiss (akiss@moz-l61h32.pool.digikabel.hu)
[21:47:41] <geofft> assuming I'm not getting two APIs confused with each other 
[21:47:43] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[21:47:46] <woowe> this is a breakthrough for me geofft lol
[21:48:13] <geofft> it looks like the API is entirely over a TCP socket 
[21:48:20] *** Quits: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net) (Quit: Leaving)
[21:48:49] <woowe> yeah, so does this mean porting from python to rust is easier than c to rust?
[21:49:43] *** Quits: Adityab (aditya@moz-otola7.dyn.telefonica.de) (Quit: Konversation terminated!)
[21:49:59] *** Joins: jadbaires (jadrian@moz-2rsfti.dsl.telepac.pt)
[21:50:05] <Guest67_> is there any way to mark a static as some data for a test so i don't keep warning me about it? or should i just disable the dead code warning for that static
[21:50:17] *** Guest67_ is now known as BageDevimo
[21:50:34] <geofft> does marking the item with #[cfg(test)] work? 
[21:50:37] *** Joins: dlc (dlc@moz-ijetde.res.rr.com)
[21:50:58] <BageDevimo> Indeed it does, thanks geofft.
[21:51:42] *** Joins: Guest74 (textual@moz-strslk.mycingular.net)
[21:51:47] <BageDevimo> Is there a better way to do this: static SINGULAR_TO_PLURAL_TESTS : [(&'static str, &'static str); 86] 
[21:51:50] *** Quits: eibwen (eibwen@moz-dhk8m2.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:52:32] <BageDevimo> that doesn't involve me having to specify the number of elements, etc. i suppose i could just 'let' it in the actual function block as a Vec<..>?
[21:52:53] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (A TLS packet with unexpected length was received.)
[21:52:59] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[21:53:10] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[21:53:18] *** Joins: areski (areski@moz-prr0dt.user.ono.com)
[21:53:30] *** Joins: cengizIO (textual@moz-jju.ckp.250.151.IP)
[21:53:31] <kimundi> BageDevimo: You could usea static slice
[21:54:00] <kimundi> static FOO: &'static [(&'static str, &'static str)] = &[ ... ]
[21:54:08] *** Quits: errordeveloper (ilya@moz-fmp.00e.200.90.IP) (Ping timeout: 121 seconds)
[21:54:44] <BageDevimo> Oh, shit. I didn't know I could do that.
[21:54:48] <BageDevimo> sorry, swearing.
[21:54:49] <BageDevimo> thanks
[21:56:32] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[21:56:36] *** Parts: cengizIO (textual@moz-jju.ckp.250.151.IP) ("Textual IRC Client: www.textualapp.com")
[21:56:40] *** Joins: Guest_ (textual@moz-rtn.fg7.77.192.IP)
[21:57:25] <chuckr> WindowsBunny: I got rustc to drop an import lib, I was misunderstanding the linker args
[21:57:34] <FreeFull> acrichto: Can you help? I'm having trouble with rustc linking the final executable for sortix. Having rustc produce an .a and linking it myself works fine.
[21:57:44] <WindowsBunny> chuckr: yay
[21:57:44] *** Quits: mkpankov` (mkpankov@moz-8p5.dee.149.83.IP) (Connection closed)
[21:57:48] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:57:51] *** Joins: mkpankov (mkpankov@moz-u7i.0jj.23.84.IP)
[21:57:51] *** Joins: sprang (sprang@moz-bb96om.6d5c.910g.0470.2001.IP)
[21:57:54] *** Quits: giucam_ (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[21:57:59] <chuckr> WindowsBunny: rustc -C link-args="-Wl,--out-implib,hello.lib" lib.rs
[21:58:00] *** rkruppe_ is now known as rkruppe
[21:58:06] <chuckr> thank you for the help
[21:58:07] <dpc_> FreeFull: Error message?
[21:58:16] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Connection closed)
[21:58:23] <FreeFull> dpc_: https://dpaste.de/7Yxo/raw
[21:58:41] <jxf> Are there any minimal examples of Rust programs which can be shown to be memory-safe and syntactically valid, but which won't compile in Rust because the compiler can't verify it?
[21:59:15] <steveklabnik> jxf: see https://github.com/rust-lang/rust/issues/6393
[21:59:41] <jxf> steveklabnik: Great, thanks!
[21:59:42] *** Joins: rprichard (rprichard@moz-qkai33.en8f.d045.0009.2601.IP)
[21:59:55] <acrichto> FreeFull: hm where are those symbols defined?
[21:59:57] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[22:00:01] *** Joins: andresv (textual@moz-je2arp.wireless.calpoly.edu)
[22:00:03] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[22:00:05] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[22:00:23] *** Quits: andresv (textual@moz-je2arp.wireless.calpoly.edu) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:00:51] *** Quits: frankmcsherry (frankmcsher@moz-faa086.adsl.alicedsl.de) (Connection closed)
[22:00:53] <dpc_> FreeFull: It seems to me like some more libraries needs to be linked with. How do you link that it works exactly?
[22:01:03] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[22:01:10] <FreeFull> acrichto: I'd assume in libc or potentially libgcc. rustc is passing -nodefaultlibs
[22:01:53] *** Quits: niax (niax@moz-eqoqc5.niax.co.uk) (Ping timeout: 121 seconds)
[22:01:54] <FreeFull> I tried adding -lc but that didn't work out, it was missing pthread_mutex_lock
[22:02:21] *** Quits: n1ax (niax@moz-656mqm.bgbs.r2sr.41d0.2001.IP) (Ping timeout: 121 seconds)
[22:02:21] *** Joins: cfcosta (cfcosta@moz-v22.12u.106.187.IP)
[22:02:38] <FreeFull> The command for manually linking that works is   x86_64-sortix-gcc libmain.a -o main
[22:02:49] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[22:02:49] *** Joins: Rusky1 (russell@moz-pob0l8.slkc.qwest.net)
[22:02:49] <FreeFull> With the lib crate-type
[22:02:58] <acrichto> FreeFull: try passing -v 
[22:03:01] <acrichto> and see how it invokes the linker
[22:03:03] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[22:03:07] <acrichto> that should give you all the libs it's passing down
[22:03:10] <dpc_> FreeFull: Can you try "x86_64-sortix-gcc libmain.a -nodefaultlibs -o main" ?
[22:03:15] <cfcosta> acrichto: hey, thanks for the blog post! I'm porting a small C lib for a small project, and that post helped me a lot :D
[22:03:25] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[22:03:26] *** Quits: Rusky1 (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[22:03:41] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[22:03:53] <acrichto> cfcosta: awesome! I'm excited to see how that turns out :)
[22:03:57] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[22:04:10] *** Joins: lov2cod (Adium@moz-9of.is2.39.8.IP)
[22:04:11] *** Quits: lov2cod (Adium@moz-9of.is2.39.8.IP) (Connection closed)
[22:04:12] *** Joins: niax (niax@moz-eqoqc5.niax.co.uk)
[22:04:13] <dpc_> FreeFull: What exactly are you doing, btw? I've seen sortix on hackernews but I was unaware it's Rust related.
[22:04:14] <cfcosta> acrichto: a suggestion: it'd be awesome to have some of the guys from Skylight to do a small guide on how to use ffi with ruby/rust.
[22:04:15] *** Joins: n1ax (niax@moz-eqoqc5.niax.co.uk)
[22:04:19] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[22:04:23] *** Joins: jwatt (roslea@jwatt.irc.users.mozilla.org)
[22:04:54] <acrichto> cfcosta: I hear wycats did a presentation at railsconf recently and he wrote a lib for that which did some more advanced (and ruby-specific) FFI boundary stuff
[22:05:05] <FreeFull> acrichto: -lm -lc -lpthread -lgcc
[22:05:15] *** Quits: woowe (Mibbit@moz-d03.l02.145.12.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:15] *** Joins: tav_ (tav@moz-fs0s4r.range31-52.btcentralplus.com)
[22:05:17] <acrichto> FreeFull: you may want to try `-lc -lpthread` in that case
[22:05:19] <OtterCoder> How do I dump a map into a string?
[22:05:20] <acrichto> (to the rust compiler)
[22:05:32] <FreeFull> Ok
[22:05:45] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:05:45] <FreeFull> dpc_: It's not rust related
[22:05:53] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:05:57] <OtterCoder> Do I have to collect a map into a vec before I can print it?
[22:06:03] <FreeFull> dpc_: But I am trying to compile Rust executables for it. I've managed Hello World so far
[22:06:08] <acrichto> OtterCoder: map => string should be ok with .to_string()
[22:06:16] <acrichto> OtterCoder: and you should also be able to print a map just with `println!("{}", map)`
[22:06:16] <FreeFull> acrichto: Thanks, I'll try it
[22:07:04] *** Quits: jadbaires (jadrian@moz-2rsfti.dsl.telepac.pt) (Ping timeout: 121 seconds)
[22:07:04] <OtterCoder> acrichto: println is complaining about expansion.
[22:07:06] <cfcosta> acrichto: oh, cool. The videos are not up yet, but you guys should put it on the blog as soon as it is :D
[22:07:49] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (Ping timeout: 121 seconds)
[22:07:52] <cfcosta> acrichto: I like the idea about having the blog as an entrypoint to what happens in the language, not only for news
[22:08:16] *** Quits: niax (niax@moz-eqoqc5.niax.co.uk) (Ping timeout: 121 seconds)
[22:08:19] <FreeFull> acrichto: Hmm, I might have missed something, now it's complaining about missing sched_yield
[22:08:23] *** Quits: n1ax (niax@moz-eqoqc5.niax.co.uk) (Ping timeout: 121 seconds)
[22:08:26] <acrichto> OtterCoder: do you have a gist I could peek at?
[22:08:35] <acrichto> FreeFull: that may either be in -lrt or -lgcc (I foret which)
[22:08:40] *** Quits: cxzz (Mibbit@moz-4m2.3qr.48.208.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:08:43] <acrichto> FreeFull: you may also want --gc-sections depending on what you're doing
[22:08:46] *** Quits: yesimon (simon@moz-qqr.bma.173.69.IP) (Ping timeout: 121 seconds)
[22:08:52] <FreeFull> acrichto: Rust is already passing that
[22:08:56] <acrichto> cfcosta: hehe yeah we're trying to diversify the blog a bit :)
[22:08:59] <acrichto> FreeFull: right!
[22:09:35] <OtterCoder> acrichto: Here you go: http://is.gd/57egPT
[22:09:59] <acrichto> OtterCoder: oh that kind of map! Yeah an iterator will have to be collected into a vector before printing
[22:10:19] <cfcosta> acrichto: cool! another idea: what about job posting? Many of my friends are interested in working fulltime with Rust, but tbh its still kinda hard to find companies that are interested.
[22:10:24] *** Joins: alex3 (alex@moz-s9a.qrc.242.157.IP)
[22:10:29] <OtterCoder> acrichto: Ah, sorry, terminology. Thanks!
[22:10:45] <acrichto> cfcosta: I think there was a Rust job board running around awhile ago? not sure where it went though
[22:10:59] *** Joins: orangeshark (erik@moz-vuio7k.44tj.56ot.0306.2602.IP)
[22:12:06] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[22:12:46] *** Joins: lov2cod (Adium@moz-9of.is2.39.8.IP)
[22:12:47] *** Quits: lov2cod (Adium@moz-9of.is2.39.8.IP) (Connection closed)
[22:13:22] *** Quits: vairav (vairav@moz-pkkcjo.modeln.com) (Client exited)
[22:13:24] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[22:13:24] *** ChanServ sets mode: +o nrc
[22:13:28] <alex3> is there an easy way to print out a vec of u8 as binary without having to loop through the entire vec?
[22:13:29] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:14:18] <alex3> or is looping through it the best way?
[22:14:19] *** Joins: santiago (santiago@moz-bvoob6.irvnca.sbcglobal.net)
[22:14:32] <mbrubeck> well, technically any time you print a vec you're going to loop through it.  Or someone is, anyway
[22:14:46] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[22:14:47] *** Joins: lov2cod (Adium@moz-9of.is2.39.8.IP)
[22:14:47] *** Quits: lov2cod (Adium@moz-9of.is2.39.8.IP) (Connection closed)
[22:14:52] *** Quits: erz_ (erz@moz-n2p94l.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:15:16] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:15:36] <mbrubeck> Do people think it would be reasonable to `impl<T> fmt::Binary for Vec<T> where T: fmt::Binary`?
[22:15:37] <FreeFull> alex3: Write to stdout
[22:15:56] *** Joins: tynopex (Mibbit@moz-ikvsjo.cable.rogers.com)
[22:15:57] <alex3> all right, I'll just loop through it
[22:15:58] *** Joins: quibbit (Mibbit@moz-gur296.abo.wanadoo.fr)
[22:16:13] *** Joins: Guest18 (textual@moz-gur296.abo.wanadoo.fr)
[22:16:26] *** Quits: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[22:16:38] *** Joins: erz (erz@moz-n2p94l.broadband.corbina.ru)
[22:16:45] <FreeFull> alex3: std::io::stdout().write_all(&vec).unwrap()
[22:16:58] *** Guest18 is now known as hokkos
[22:17:05] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:17:08] *** Quits: quibbit (Mibbit@moz-gur296.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:17:09] <alex3> FreeFull: that won't write out teh binary numbers contained in my vec will it?
[22:17:36] <hokkos> Hi, cargo build gives me "SSL peer certificate or SSH remote key was not OK", any idea ?
[22:17:58] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[22:18:34] *** Joins: choplin (choplin@moz-18bc1o.t6mc.g9m6.001a.240d.IP)
[22:18:35] <FreeFull> alex3: Oh, as binary
[22:18:38] <FreeFull> Nevermind then
[22:18:47] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[22:18:50] <FreeFull> alex3: I think you'll just have to loop
[22:18:57] *** Quits: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net) (Ping timeout: 121 seconds)
[22:19:15] <alex3> yea
[22:19:15] *** Quits: Hannibal_Smith (nico@moz-ucg29b.retail.telecomitalia.it) (Quit: Leaving)
[22:19:18] <alex3> oh well
[22:19:35] *** Quits: choplin (choplin@moz-18bc1o.t6mc.g9m6.001a.240d.IP) (Connection closed)
[22:20:30] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[22:20:44] *** Joins: niax (niax@moz-eqoqc5.niax.co.uk)
[22:20:44] *** Joins: Savago (Savago@moz-28o.4t3.247.50.IP)
[22:21:00] *** Joins: Sgeo (Sgeo@moz-mo8ath.dyn.optonline.net)
[22:21:31] *** Joins: n1ax (niax@moz-eqoqc5.niax.co.uk)
[22:21:38] <Sgeo> Is it weird that my main interest in Rust is that I don't trust myself not to use globals and to handle errors correctly?
[22:21:42] *** Joins: jbcurtin (jbcurtin@moz-lskisb.LosAngeles1.Level3.net)
[22:21:50] <Sgeo> Rather than any of the low-level stuff that Rust aims to be good at?
[22:22:15] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:22:21] *** Joins: ekiwi (kevin@moz-a2becv.halifax.rwth-aachen.de)
[22:22:25] <dzyp> don't think so
[22:22:33] <dzyp> i think a lot of people are attracted to greater safety
[22:22:56] <tynopex> I'm sure it has been discussed before, but I'm wondering why the default symbol search when in a submodule is :: (crate top) rather than self::
[22:23:08] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[22:23:18] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:23:29] <tynopex> I find myself bit by this as I refactor pieces into submodules and need to go at self:: everywhere
[22:23:38] <cacaca> Do you know how to convert a string into a &[u8] without have borrow problems ?
[22:23:51] <sillesta> how do you fail from a #[test] method?
[22:23:54] *** Quits: basro_ (basro@moz-h0f.6ff.225.190.IP) (Ping timeout: 121 seconds)
[22:24:13] * Sgeo isn't actually sure what Haskell's error situation is
[22:24:22] <Sgeo> Is it just 'Anything goes' in IO?
[22:24:44] *** Quits: nicoch (nicoch@moz-g02d7k.be) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:24:54] <talchas> so there's some use of Either as a monad, which is where Result+try comes from
[22:25:14] <tynopex> silesta: https://play.rust-lang.org/?code=fn%20main()%20%7B%0A%20%20%20%20%23%5Btest%5D%0A%20%20%20%20%23%5Bshould_panic%5D%0A%20%20%20%20fn%20it_works()%20%7B%0A%20%20%20%20%20%20%20%20assert!(false)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%7D
[22:25:25] <talchas> there's also at least one variety of exceptions
[22:25:36] <tynopex> sorry, http://is.gd/TCx7DQ
[22:25:54] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[22:25:59] *** Quits: Kroisse (Kroisse@moz-t75tk5.krois.se) (Quit: Good bye :))
[22:26:09] <tynopex> use attribute if you expect failure, and/or use assert/assert_eq to test for failure
[22:26:14] *** Quits: akiss (akiss@moz-l61h32.pool.digikabel.hu) (Ping timeout: 121 seconds)
[22:26:34] *** Joins: _Y_ (chatzilla@moz-ctahl6.isp.telekom.rs)
[22:26:48] <WindowsBunny> acrichto: http://www.weloverustlang.com/ ?
[22:27:06] <FreeFull> acrichto: I have no idea where the sched_yield symbol is coming from
[22:27:13] <OtterCoder> So, from what I gather, recursion is not good idiomatic Rust, yes?
[22:27:33] <acrichto> cfcosta: ^ (WindowsBunny's message)
[22:27:41] <WindowsBunny> Unfortunately that site is pretty dead
[22:27:41] <Sgeo> Is Rust's current error idioms fragile? If I have a library Foo, that uses library Bar, and Bar gives BarError's, and Foo has a FooError enum that has a BarError() constructor, and I have a client C that matches on FooErrors, won't C break if Foo decides it wants to use Baz library which gives BazErrors, even though that should be an implementation detail?
[22:27:41] <rkruppe> OtterCoder: For a shallow tree or something like that, it's okay
[22:27:44] <_Y_> @OtterCode: I believe it's not, because Rust lacks tail optimization
[22:27:46] <alex3> is there a [..-1] to get every element but the last in a slice?
[22:27:48] <WindowsBunny> Basically just me and some random other person
[22:27:52] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:27:58] *** Joins: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[22:27:59] <rkruppe> But no TCO, so don't use it to replace loops
[22:27:59] <alex3> [..-1] doesn't seem to work
[22:28:09] <FreeFull> acrichto: https://dpaste.de/J4od/raw Am I missing something in this output?
[22:28:10] *** Quits: asQuirre_ (asQuirreL@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:28:12] <_Y_> *tail call optimization
[22:28:45] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:28:49] <OtterCoder> rkruppe: _Y_: Gotcha. I think I can live with mostly iterators...
[22:28:49] *** bentley|away is now known as bentley
[22:29:05] <acrichto> FreeFull: is libc/libm statically linked?
[22:29:11] <reem> Sgeo: Yes, but I wouldn’t say that’s fragile. If you expose a type directly from a dependency, you now have a “public” dependency.
[22:29:12] <FreeFull> alex3: The way slices implement indexing doesn't do that
[22:29:20] <scott> alex3: you have to do a[..a.len()-1]
[22:29:22] *** bentley is now known as bentley|away
[22:29:23] <alex3> ugh
[22:29:26] <alex3> ok
[22:29:26] <reem> I struggle to see how it could work where that wasn’t the case
[22:29:30] <alex3> I can do that
[22:29:40] *** Joins: arBmind1 (Andreas@moz-l25oke.adsl.alicedsl.de)
[22:29:59] <Sgeo> reem, what's the recommended thing to do?
[22:30:01] <alex3> seems like it'd be easier to implement that as syntactic sugar
[22:30:20] <Sgeo> Prevent comprehensive matches on error enums?
[22:30:29] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[22:30:30] *** Quits: arBmind (Andreas@moz-32aubh.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[22:30:36] <reem> Sgeo: It’s not really a practical problem since nobody does that
[22:31:03] *** Quits: Guest74 (textual@moz-strslk.mycingular.net) (Ping timeout: 121 seconds)
[22:31:04] <reem> Sgeo: libraries outside of std have not solved this yet
[22:31:11] <cacaca> do you have any idea to convert a String into a &[u8] ?
[22:31:16] <Sgeo> :/
[22:31:24] <WindowsBunny> cacaca: yes
[22:31:29] <reem> Sgeo: std usually just uses wrapper types and whatnot to prevent you from depending on the internals, but you don’t really want to do this unless you have serious stability guarantees
[22:31:32] *** Quits: sprang (sprang@moz-bb96om.6d5c.910g.0470.2001.IP) (Ping timeout: 121 seconds)
[22:31:51] *** Joins: lov2cod (Adium@moz-9of.is2.39.8.IP)
[22:31:54] <scott> cacaca: .as_bytes()
[22:32:00] *** Quits: Guest39 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Ping timeout: 121 seconds)
[22:32:02] <freebroccolo> OtterCoder: if you really need recursion, you can use https://github.com/epsilonz/tailrec.rs which is stack-safe
[22:32:04] <FreeFull> acrichto: I think everything is statically linked
[22:32:06] <cacaca> Sorry for the twice question, 
[22:32:10] <FreeFull> acrichto: I'll ask
[22:32:19] <acrichto> FreeFull: in that case the --start-group/--end-group can be important
[22:32:37] <acrichto> FreeFull: e.g. it indicates a circular dependence between libc/pthread
[22:32:40] *** Quits: _petr (petr@moz-2pi.7q8.248.178.IP) (Ping timeout: 121 seconds)
[22:32:44] *** Quits: Douman (Douman@moz-07e1oo.dynamic.mts-nn.ru) (Quit: )
[22:32:49] <cacaca> scott: yes, but that return a &[u8], but I have some issues with the borrow, 
[22:32:51] <acrichto> FreeFull: unfortunately there's no great way to tell the compiler to pass those kinds of arguments
[22:32:52] <OtterCoder> freebroccolo: Ooh, thanks!
[22:33:01] <acrichto> FreeFull: but one possibeility would be `-lc -lpthread -lc`
[22:33:06] <FreeFull> acrichto: I'll try that
[22:33:08] <freebroccolo> OtterCoder: the docs link is broken I just noticed, but you can see examples in the test folder
[22:33:43] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[22:33:46] <FreeFull> acrichto: The OS author confirmed there is a circular dependence
[22:33:59] <FreeFull> acrichto: libm too
[22:34:04] *** Joins: yesimon (simon@moz-htvp8u.ma.comcast.net)
[22:34:14] <acrichto> FreeFull: this is where a custom target spec helps b/c you can pass those arguments yourself
[22:34:26] <FreeFull> acrichto: Yeah, I am using a custom target spec
[22:34:33] *** Quits: dzyp (hiatt@moz-ofiasr.static.qwest.net) (Ping timeout: 121 seconds)
[22:34:50] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[22:35:11] <acrichto> FreeFull: is that injecting -lc and -lpthread?
[22:35:26] *** Quits: mkpankov (mkpankov@moz-u7i.0jj.23.84.IP) (Connection closed)
[22:35:30] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[22:35:50] *** Joins: Guest74 (textual@moz-strslk.mycingular.net)
[22:36:26] <FreeFull> acrichto: Yeah
[22:36:41] <acrichto> FreeFull: ah then yeah just adding --start-group/--end-group should be fine
[22:36:52] <OtterCoder> Sorry, lots of questions as I'm getting a feel for Rust. Does "for x in y" guarantee order?
[22:36:59] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[22:37:15] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Connection closed)
[22:37:32] <FreeFull> acrichto: --start-group and --end-group are linker arguments though, not gcc
[22:37:38] *** Joins: mib_b550ir (Mibbit@moz-comrgv.abo.bbox.fr)
[22:37:44] <rkruppe> OtterCoder: It does whatever the iterator does
[22:37:49] <mib_b550ir> Hi everyone !
[22:37:53] <acrichto> FreeFull: -Wl,--start-group and -Wl,--end-group
[22:37:55] <rkruppe> The usual iterators over collections go in the order you'd expect
[22:37:58] <FreeFull> Thanks
[22:38:07] <mib_b550ir> Could anyone help me answer this question ? http://stackoverflow.com/questions/29858662/rust-lifetime-error-for-returned-value-of-a-function
[22:38:13] <mib_b550ir> thanks
[22:38:19] <OtterCoder> rkruppe: Interesting. Is that in the spec?
[22:38:45] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[22:39:00] *** Quits: jshs (jshs@moz-btk83h.dip0.t-ipconnect.de) (Client exited)
[22:39:05] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:39:07] <rkruppe> OtterCoder: What part? For loops just call .next() repeatedly, and of course what that means (and whether there even is such a thing as "order") depends on the iterator
[22:39:10] <FreeFull> acrichto: Ok, how about this error now?: main.0.rs:(.text._ZN4main10__rust_abiE+0x51): undefined reference to `puts'
[22:39:21] <freebroccolo> OtterCoder: I don't think there are any actual guarantees about order… I haven't seen anything about it in the docs anyway
[22:39:21] *** Quits: Guest_ (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:39:24] <acrichto> FreeFull: that's defined in libc, right?
[22:39:24] *** bentley|away is now known as bentley
[22:39:29] <FreeFull> Yes
[22:39:39] *** Joins: c0170_ (c0170@moz-4stj9o.cable.virginm.net)
[22:39:43] <OtterCoder> rkruppe: Right, sorry. This is a bit of a paradigm shift. 
[22:39:46] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[22:40:03] <FreeFull> acrichto: Do I need to put something on my extern { } block?
[22:40:30] <acrichto> FreeFull: hm nah if libc is being linked in anyway you shouldn't need a declaration, what's the full error message?
[22:40:37] *** bentley is now known as bentley|away
[22:41:11] <FreeFull> acrichto: https://dpaste.de/4sJj/raw
[22:42:06] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[22:42:06] *** Joins: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP)
[22:42:11] <acrichto> FreeFull: oh -lc/-lpthread need to be at the end
[22:42:13] <acrichto> not at the start
[22:42:17] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:42:18] <mbrubeck> OtterCoder: `for` loops are a little underdefined in the reference right now, but they are definitely intended as sugar for calling iter.next() in a loop.  (I believe in much earlier versions of Rust they were actually defined in that way in the manual.)
[22:42:18] *** Quits: Tarmashirin (Tarmashirin@moz-93d.c6u.199.117.IP) (Connection closed)
[22:42:40] *** Joins: hjr3 (hradtke@moz-dmp.av4.169.69.IP)
[22:43:09] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[22:43:25] <OtterCoder> mbrubeck: Alright. So, when you need to guarantee order, do you need to collect into a vec and then run a sort on it?
[22:43:42] <bluss> mbrubeck: from previous discussion it's intentional that for loops trait check for Iterator / IntoIterator
[22:43:55] <bluss> mbrubeck: there is while let for other use cases of .next() methods not from Iterator
[22:44:08] <FreeFull> acrichto: I'll try that
[22:44:16] *** Joins: sprang (sprang@moz-26ncq3.4c7e.910g.0470.2001.IP)
[22:44:19] <mbrubeck> OtterCoder: What type of iterator do you have?
[22:44:29] <FreeFull> acrichto: It worked"
[22:44:29] <FreeFull> !
[22:44:34] <acrichto> FreeFull: \o/
[22:44:52] <mbrubeck> OtterCoder: The for loop will loop over elements in the same order the iterator yields them; that is guaranteed.
[22:45:04] *** Joins: lucian (lucian@moz-2c3pda.cable.virginm.net)
[22:45:06] <OtterCoder> mbrubeck: I'm mostly asking in the general case. 
[22:45:13] <OtterCoder> mbrubeck: Alright.
[22:45:28] <mbrubeck> e.g. `for x in 0..10 { print!("{}", x) }` will always print 0123456789
[22:45:41] <bluss> OtterCoder: so it depends on which collection you iterate
[22:45:58] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[22:46:32] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[22:46:37] *** Quits: areski (areski@moz-prr0dt.user.ono.com) (Ping timeout: 121 seconds)
[22:46:51] *** Quits: tynopex (Mibbit@moz-ikvsjo.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:47:49] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[22:48:38] *** Joins: Temur (Tarmashirin@moz-93d.c6u.199.117.IP)
[22:49:00] <niconii> OtterCoder: iterating over an array/vec is similarly guaranteed to yield in whatever order the elements are in
[22:49:14] <niconii> playbot: for x in [4, 77, 13, -6].iter() { print!("{} ", x) }
[22:49:16] -playbot- 4 77 13 -6 ()
[22:49:36] *** Quits: qrlpx (smuxi@moz-n7t.3nb.211.95.IP) (Ping timeout: 121 seconds)
[22:49:48] <niconii> (don't mind the (), it's just that playbot wants to print whatever's returned here, which is nothing)
[22:50:34] *** Quits: jwatt (roslea@jwatt.irc.users.mozilla.org) (Ping timeout: 121 seconds)
[22:50:36] *** Joins: errordeveloper (ilya@moz-fmp.00e.200.90.IP)
[22:51:10] <bluss> here's an example of arbitrary order, HashSet
[22:51:15] <bluss> playbot: use std::collections::HashSet; let hs: HashSet<_> = (1..6).collect(); hs
[22:51:17] *** Quits: buzugu (baptiste@moz-5il26q.rev.sfr.net) (Client exited)
[22:51:17] -playbot- {4, 5, 2, 1, 3}
[22:51:20] <FreeFull> acrichto: Do you know if the libc crate only works with glibc, or will work with other libcs too?
[22:51:51] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Ping timeout: 121 seconds)
[22:52:02] *** Quits: lov2cod (Adium@moz-9of.is2.39.8.IP) (Ping timeout: 121 seconds)
[22:52:02] *** Joins: fabianvf (fabianvf@moz-j12.dim.197.216.IP)
[22:52:04] <alex3> error: the trait `core::marker::Sized` is not implemented for the type `[collections::vec::Vec<u8>]`
[22:52:05] <alex3> wtf?
[22:52:07] <FreeFull> bluss: I think the order will actually change each time too
[22:52:12] <acrichto> FreeFull: I think the best way to think of libc is that it is a binding to the platform that it's built for, so if it's built against glibc it may provide the glibc-specific funcitons, but if built against musl it won't expose those functions, so in that sense the burden of portability is not on liblibc but instead crates which use liblibc
[22:52:17] *** Quits: Defaultti (Defaultti@moz-bmdn13.kapsi.fi) (Quit: Quitting.)
[22:52:20] <FreeFull> bluss: Each time the hashset is created, that is
[22:52:23] *** Joins: qrlpx (smuxi@moz-n7t.3nb.211.95.IP)
[22:52:36] *** Quits: Temur (Tarmashirin@moz-93d.c6u.199.117.IP) (Quit: Leaving)
[22:52:36] <FreeFull> acrichto: Ah
[22:52:38] <acrichto> FreeFull: but, for example, the standard library works jsut fine when compiled against musl: https://github.com/rust-lang/rust/pull/24777
[22:52:39] <Skyler> alex3: what are you trying to do? do you have any code?
[22:52:55] *** Joins: arty (Mibbit@moz-ineiim.il.comcast.net)
[22:53:00] <alex3> Skyler: one sec
[22:53:13] *** Joins: lov2cod (Adium@moz-9utvl5.frokca.sbcglobal.net)
[22:53:22] <bluss> FreeFull: yes. I like to make the distinction between arbitrary and random order quite clear, but here due to how the hash seeding works, each hashset has effectively a new random order of the same elements..
[22:53:22] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[22:53:23] <FreeFull> acrichto: So if I manage to compile the standard library and everything it depends on, I can have normal Rust code work too?
[22:53:25] <heftig> hm, does the book mention how variable bindings are shadowed (e.g. "let x = 4; ...; let x = 5;" with or w/o nesting blocks)? i expected it in 5.1. but did not see it
[22:53:29] *** Quits: fabianvf (fabianvf@moz-j12.dim.197.216.IP) (Connection closed)
[22:53:30] *** Joins: Temur (Tarmashirin@moz-93d.c6u.199.117.IP)
[22:53:37] <alex3> Skyler: http://is.gd/0Qbnj8
[22:53:39] <FreeFull> This is a custom libc, not musl
[22:53:46] <alex3> requires rustc-serialize
[22:53:52] *** Quits: srh (User@moz-80e.38o.254.50.IP) (Quit: Leaving)
[22:54:11] <acrichto> FreeFull: not necessarily, the standard library doesn't exhaustively use liblibc, so there may be apis exposed from liblibc that aren't available in other c libraries which external crates are using
[22:54:47] <FreeFull> acrichto: I'll see how far I can get
[22:54:50] *** Joins: lov2cod1 (Adium@moz-5vusn6.u583.gjp6.0119.2620.IP)
[22:54:50] *** Quits: errordeveloper (ilya@moz-fmp.00e.200.90.IP) (Ping timeout: 121 seconds)
[22:54:50] <brson> this is probably a relatively easy bug for compiler hackers, preventing duplicate associated items https://github.com/rust-lang/rust/issues/23969
[22:54:53] <FreeFull> For now what I've got is nice
[22:56:25] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[22:56:32] <Skyler> alex3 looking into it
[22:56:41] *** Joins: stjahns (stjahns@moz-163098.wireless.telus.com)
[22:56:42] *** Joins: buzugu (baptiste@moz-5il26q.rev.sfr.net)
[22:56:46] *** Quits: buzugu (baptiste@moz-5il26q.rev.sfr.net) (Client exited)
[22:56:53] <FreeFull> acrichto: I'll probably change the Hello World I have to not use  .as_ptr() so it doesn't depend on libcore
[22:57:08] *** alex3 is now known as alex
[22:57:15] *** Quits: lov2cod (Adium@moz-9utvl5.frokca.sbcglobal.net) (Ping timeout: 121 seconds)
[22:57:16] *** Quits: Guest74 (textual@moz-strslk.mycingular.net) (Ping timeout: 121 seconds)
[22:57:17] *** Joins: Defaultti (Defaultti@moz-bmdn13.kapsi.fi)
[22:57:47] *** Quits: Porkepix (Porkepix@moz-71m.3nd.202.89.IP) (Quit: My laptop has gone to sleep. ZZZzzz…)
[22:58:02] *** Quits: Temur (Tarmashirin@moz-93d.c6u.199.117.IP) (Ping timeout: 121 seconds)
[22:58:33] *** Quits: sprang (sprang@moz-26ncq3.4c7e.910g.0470.2001.IP) (Ping timeout: 121 seconds)
[22:58:39] *** Quits: brandonw (brandonw@moz-36sv6k.ma.charter.com) (Ping timeout: 121 seconds)
[22:58:41] <FreeFull> Oh, libcore declares the sized lang itemas well
[22:59:18] *** Joins: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net)
[22:59:33] *** Quits: blank_name (blank_name@moz-sct.ivp.36.50.IP) (Quit: leaving)
[23:00:18] *** Quits: Racquetball (namestolenw@moz-dnlovt.cpe.twtelecom.net) (Quit: leaving)
[23:00:43] *** Quits: stjahns (stjahns@moz-163098.wireless.telus.com) (Ping timeout: 121 seconds)
[23:00:49] *** Joins: brandonw (brandonw@moz-36sv6k.ma.charter.com)
[23:01:16] *** Quits: hokkos (textual@moz-gur296.abo.wanadoo.fr) (Quit: Textual IRC Client: www.textualapp.com)
[23:01:20] <bluss> libcore declares a lot of stuff so that you don't have to :)
[23:01:27] <FreeFull> Yeah
[23:01:31] *** Quits: lov2cod1 (Adium@moz-5vusn6.u583.gjp6.0119.2620.IP) (Connection closed)
[23:01:43] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[23:02:21] <Skyler> alex3: as a start, I think you'll need to annotate the type of `key` on line 15 (Vec<Vec<u8>>)
[23:02:24] *** Joins: bombless (_@moz-odk.piv.41.59.IP)
[23:02:41] <Skyler> at least, I'm getting complaints about that on nightly..
[23:02:50] <alex> Skyler: I'm on beta
[23:03:38] <alex> also, my complaints are line 17
[23:03:46] <alex> src/main.rs:21         for text2 in encoded_ciphertexts[index + 1..encoded_ciphertexts.len()] {
[23:04:00] *** Joins: rmgk (ragnar@moz-diaoju.dyn.telefonica.de)
[23:04:01] *** Quits: BageDevimo (textual@moz-og7.cn8.251.116.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:04:06] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[23:04:39] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[23:05:17] *** Joins: Guest67_ (textual@moz-og7.cn8.251.116.IP)
[23:05:20] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:06:20] *** Joins: kgrandon (Adium@moz-idvg57.2rkg.9kg1.0101.2620.IP)
[23:06:27] <Skyler> alex: oh.. what about if you convert the slice to an iterator? i.e. `for (...) in encoded_ciphertexts[.....].iter() { ... }`
[23:06:35] *** Quits: alonlevy (alon@moz-p48.q13.159.94.IP) (Ping timeout: 121 seconds)
[23:07:08] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:07:12] *** Quits: rmgk_ (ragnar@moz-0svug6.dyn.telefonica.de) (Ping timeout: 121 seconds)
[23:07:50] *** Joins: marsel (user@moz-rrv.pek.234.188.IP)
[23:07:51] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:07:53] *** Joins: Kroisse (Kroisse@moz-t75tk5.krois.se)
[23:07:56] <alex> that seems to work
[23:08:02] <alex> I thought that would have been implicit though in for loops
[23:08:41] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (Ping timeout: 121 seconds)
[23:08:59] <rkruppe> alex: There's IntoIterator so you can write "for x in slice", that's right
[23:09:05] <Skyler> alex: you can also loop over the reference: `for (...) in &encoded_ciphertexts[.....] { ... }`
[23:09:31] <geofft> ok, so, I have a macro I want to expand to an attribute #[foo=stringify!($bar)] 
[23:09:36] <geofft> where $bar is a parameter of the macro 
[23:09:36] <rkruppe> But I think the issue here is that encoded_ciphertexts[...] yields a [T], i.e. an unsized value. Is that the error message?
[23:09:39] <geofft> is there a way to make this work? 
[23:09:54] <rkruppe> If so, just add a & in front of the slicing
[23:10:07] <bluss> slicing syntax is &foo[a..b] in general, with that &
[23:10:13] <mbrubeck> `for x in slice.iter()` is the same as `for x in &slice`, if `slice: [T]`
[23:10:18] <talchas> alex: yeah, ideally it would complain that [Vec<u8>] doesn't impl IntoIterator (because it needs to be &[T])
[23:10:42] <talchas> but I'm guessing it logically does let temp = $for_input; as the first thing
[23:10:54] <talchas> and that's invalid for a DST
[23:10:58] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:11:23] <rkruppe> Yes, that's the core issue and people should be taught that rather than something about IntoIterator
[23:11:28] *** Quits: brontron4k (Mibbit@moz-18sjb5.ph.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:11:39] *** Quits: Guest67_ (textual@moz-og7.cn8.251.116.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:11:48] <FreeFull> alex: It should work if you do  for text2 in &encoded_ciphertexts[index + 1..encoded_ciphertexts.len()] {
[23:11:49] <rkruppe> The error message can be improved, but talking about IntoIterator only solves a particular instance of the problem
[23:11:53] <FreeFull> alex: note the &
[23:12:30] <bluss> &foo[a..foo.len()] can be abbreviated &foo[a..]
[23:12:37] *** Quits: reed (reed@tech.monkey) (RecvQ exceeded)
[23:12:40] <FreeFull> Yeah, what bluss said too
[23:12:44] *** Joins: choplin (choplin@moz-6brpqa.t6mc.g9m6.001a.240d.IP)
[23:13:03] <bluss> information overload
[23:13:11] *** Joins: reed (reed@tech.monkey)
[23:13:13] <alex> bluss: ah, it used to be len - 1
[23:13:20] <alex> and then I realized it didn't really matter
[23:13:28] <bluss> alex: aha, yeah there is no sugar for that
[23:13:40] *** Quits: _Y_ (chatzilla@moz-ctahl6.isp.telekom.rs) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.1/20150402191859])
[23:13:47] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[23:13:48] *** Joins: brontron4k (Mibbit@moz-18sjb5.ph.cox.net)
[23:13:57] <Skyler> geofft: can you share code? I think I may have an idea of why you can't do that
[23:14:30] *** Joins: Guest67_ (textual@moz-og7.cn8.251.116.IP)
[23:14:32] *** Joins: vairav (vairav@moz-pkkcjo.modeln.com)
[23:15:03] *** Quits: DerisiveLogic (smuxi@moz-1jqqlg.biz.rr.com) (Ping timeout: 121 seconds)
[23:15:04] *** Quits: kazimuth (james@moz-h7l.35b.189.18.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:15:40] <geofft> Skyler: http://is.gd/RZgFhI 
[23:17:10] *** Joins: DerisiveLogic (smuxi@moz-5t5.9md.103.24.IP)
[23:17:18] *** Joins: __ixti__ (ixti@moz-i3d.dae.119.188.IP)
[23:17:24] *** Quits: mib_b550ir (Mibbit@moz-comrgv.abo.bbox.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:17:25] *** Joins: Racquetball (namestolenw@moz-uolvut.res.rr.com)
[23:17:37] <Skyler> I guess the obvious basic issue is that you can't have macros inside attributes
[23:18:27] <FreeFull> acrichto: Any way I can make rustc consider this tuple to be unix for the purposes of #[cfg(unix)]?
[23:18:40] *** Quits: zzmp (zzmp@moz-d4rqdv.12ul.lrlq.5500.2604.IP) (Connection closed)
[23:19:04] <acrichto> FreeFull: the custom target spec just needs to not say that it's windows I think
[23:19:12] <geofft> Skyler: yeah. and I can't indirect through another macro, because it's an AST-based macro system, not a text-based one like C :) 
[23:19:43] <Skyler> geofft: there is a really hacky solution though, one sec
[23:20:06] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[23:20:13] <geofft> oh? 
[23:20:13] *** Joins: lov2cod (Adium@moz-9of.is2.39.8.IP)
[23:20:36] <FreeFull> acrichto: Ah, ok
[23:20:36] <geofft> my current best option involves refactoring to use concat_idents!, which is gated, so it seems like a hacky workaround would be better 
[23:20:48] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:20:49] <Skyler> that was my suggestion ;)
[23:21:34] <Skyler> well, my hacky solution was to reproduce something like concat_idents!, but that requires a syntax ext
[23:21:42] <Skyler> which of course are also gated
[23:21:54] <geofft> yeah, I'd rather not write a compiler plugin if I can help it. 
[23:22:04] *** Quits: Guest67_ (textual@moz-og7.cn8.251.116.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:22:04] <FreeFull> acrichto: Trying to compile liblibc with this target tuple gives me lots of "liblibc/lib.rs:129:22: 129:46 error: unresolved import `funcs::posix88::mman::*`. Could not find `posix88` in `funcs`"-like errors
[23:22:13] *** Joins: Guest67_ (textual@moz-og7.cn8.251.116.IP)
[23:22:19] *** Quits: jdm (jdm@moz-vmfnmv.ckpj.s0pt.0450.2001.IP) (Quit: )
[23:22:26] <acrichto> FreeFull: there may be a bunch of target_os errors when building it
[23:22:28] <mkomitee> anyone have a moment to take a look at some code I'm trying to get working? 
[23:22:37] <acrichto> FreeFull: e.g. just missing moduls b/c they're cfg'd out
[23:23:03] <FreeFull> Mhmm, I won't be trying to get it to work now then
[23:23:42] <mkomitee> I"m trying to return a BufReader<T> from a function, where T is an object that implements the Read trait.
[23:24:48] *** Quits: kmcguire (kmcguire@moz-c955nf.res.rr.com) (Ping timeout: 121 seconds)
[23:24:56] <mkomitee> I've been able to accept an argument before using trait constraints, but I can't figure out how to return one which isn't based on an argument I accept.
[23:25:04] *** Quits: ekiwi (kevin@moz-a2becv.halifax.rwth-aachen.de) (Client exited)
[23:25:14] <cmr> you have to write out the actual type.
[23:25:17] <mkomitee> I get an error indicating that it expects T to be a concrete type.
[23:25:26] *** Quits: choplin (choplin@moz-6brpqa.t6mc.g9m6.001a.240d.IP) (Connection closed)
[23:25:39] <mkomitee> The code is https://github.com/mkomitee/wc.rs/blob/master/repro.rs
[23:25:49] <cmr> yes, it does need to be a concrete type.
[23:26:03] <cmr> yeah you can't do that
[23:26:13] <mkomitee> the function is open_arg. My objective is to accept a string, if the string is "-" return BufReader<Stdin>, and if it's anything else, return a BufReader<File>
[23:26:16] <cmr> you'll probably want a trait object there.
[23:26:21] <cmr> ie, Box<Read>
[23:27:27] <geofft> oh, wait, you can't even use a macro as the name of an item??? 
[23:27:54] <cmr> geofft: a macro invocation? no.
[23:27:55] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:28:30] <cmr> the current macro system is rather peculiar.
[23:28:34] <geofft> :-( 
[23:29:24] <geofft> ok, so not only is fn concat_idents!($var, _thing) {} not a good idea because concat_idents, it won't even work :( 
[23:29:27] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[23:29:32] <geofft> is there a workaround? (good or bad..) 
[23:29:59] *** Joins: zzmp (zzmp@moz-5p1.h2b.247.173.IP)
[23:30:00] <Skyler> geofft: I made this, but it's highly temperamental https://github.com/SkylerLipthay/interpolate_idents
[23:30:26] <Skyler> that is, bad
[23:31:08] *** Joins: zcourts (zcourts@moz-7ms809.cable.virginm.net)
[23:31:09] <geofft> bah, I could go learn how compiler plugins work. 
[23:31:15] <mkomitee> so I can return a Box<Read> instead, and then I'll need to unbox it in the caller to wrap it in a BufReader?
[23:31:24] <geofft> what access are you given? can I make weird changes in compiler behavior, or just manipulate the AST? 
[23:31:50] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[23:32:10] <geofft> (like, can I do the equivalent of #[export_name] directly?) 
[23:32:42] *** Joins: Johannes_ (johannes@moz-ufvp1b.nttpc.ne.jp)
[23:33:07] <bluss> mkomitee: there is no good way to unbox a trait object. I think you should probably wrap it in a buffer before you cast it to Box<Read>
[23:33:54] <mkomitee> I haven't done anything w/ boxes yet, so I'm not sure what I need to do.
[23:34:36] <bluss> the use here is to add the boxing as an indirection to unify two distinct types you have
[23:34:41] *** Joins: brson (brson@moz-n4g.7vl.56.172.IP)
[23:34:41] *** ChanServ sets mode: +ao brson brson
[23:35:06] <mkomitee> So I end up with a Box<Read> which contains either a BufReader<Stdin> or BufReader<Read>
[23:35:19] <mkomitee> how do I actually use the wrapped BufReader in the caller?
[23:35:36] <bluss> just call its methods on it
[23:35:45] <mkomitee> oh.
[23:36:36] *** Quits: Fiveside (fiveside@moz-t2eatg.vsp.com) (Quit: WeeChat 1.1.1)
[23:36:41] <bluss> Stdin is already buffered
[23:37:00] *** Quits: kgrandon (Adium@moz-idvg57.2rkg.9kg1.0101.2620.IP) (Quit: Leaving.)
[23:37:06] <mkomitee> Yep. I know. But I want to be able to pass Stdin and File objects around as though they're the same.
[23:37:13] <mkomitee> so I've been wrapping both w/ BufReader.
[23:37:42] <bluss> you can wrap one but not the other and wrap them in Box<Read>
[23:37:55] *** Quits: santiago (santiago@moz-bvoob6.irvnca.sbcglobal.net) (Quit: Computer has gone to sleep.)
[23:38:08] <bluss> but if you want Box<BufRead> then you have to put both into BufReader like that
[23:38:36] <mkomitee> I didn't (still dont) know how to use Box like that.
[23:38:44] *** Quits: Johannes_ (johannes@moz-ufvp1b.nttpc.ne.jp) (Ping timeout: 121 seconds)
[23:39:04] <bluss> Box::new(stdin()) as Box<Read>
[23:39:15] <bluss> you can cast Box<T> into Box<Read> if T: Read
[23:39:17] <bluss> and so on
[23:39:34] <mkomitee> I've now got a Box<Read> where the Read is a BufReader and I'm getting the error Box<std::io::Read> does not implement any method in scope named read_until.
[23:39:47] <mkomitee> That's awesome, I
[23:40:09] <bluss> then you need Box<BufRead> instead
[23:40:11] <mkomitee> I'll stop wrapping Stdin in a Box once I can get something done w/ a Box :)
[23:40:44] *** Quits: Savago (Savago@moz-28o.4t3.247.50.IP) (Client exited)
[23:41:00] <bluss> I was just suggesting it would be more efficient to put the BufReader inside the box than outside
[23:41:20] *** Joins: Savago (Savago@moz-28o.4t3.247.50.IP)
[23:41:22] <bluss> but maybe that's not even true
[23:41:38] *** Joins: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net)
[23:41:47] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[23:42:02] <mkomitee> Even if it's the same perf, it makes more sense to Box<BufRead> that way I don't have to unnecessarily wrap Stdin in a BufReader.
[23:42:41] <bluss> well it turns out you can't avoid that
[23:42:51] <bluss> because Stdin doesn't impl the BufRead trait
[23:43:16] <cmr> eugh
[23:43:35] <FreeFull> StdinLock does impl BufRead
[23:43:50] <mkomitee> excellent. I think I got it.
[23:43:56] *** Quits: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net) (Quit: Leaving)
[23:43:57] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[23:44:09] <FreeFull> But you want to let StdinLock go out of scope as soon as possible
[23:44:52] *** Quits: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:44:52] <mkomitee> I'm checking to see how I can get a StdinLock :)
[23:45:16] <bluss> putting that inside a box is not a good idea either
[23:45:23] <bluss> unless it's for a short time
[23:45:23] *** Joins: geomyidae_ (uid214@moz-n22p0h.charlton.irccloud.com)
[23:45:36] <mkomitee> 2 questions.
[23:45:49] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[23:45:50] <mkomitee> 1) How do I get an instance of StdinLock, and 2) why is it not a good idea?
[23:46:06] <bluss> 1) is .lock()
[23:46:30] <bluss> 2) it holds a lock as long as that stdinlock value is alive
[23:46:47] *** Quits: mbudde (mbudde@moz-v8g.lim.109.2.IP) (Ping timeout: 121 seconds)
[23:46:48] <scott> as long as you have a StdinLock, no other part of the program may read from stdin
[23:46:54] *** Quits: Guest67_ (textual@moz-og7.cn8.251.116.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:46:58] <mkomitee> It'll go out of scope once I've read all of the data.
[23:47:07] *** Quits: housl (housl@moz-qnjt4k.ut.comcast.net) (Quit: WeeChat 1.1.1)
[23:47:09] <bluss> maybe it's ok
[23:47:26] <mkomitee> But now I have ownership issues.
[23:47:42] <bluss> StdinLock is also borrowed from the stdin value so you'll have borrowing issues
[23:47:54] <mkomitee> yep.
[23:47:58] <bluss> hehe
[23:48:15] <mkomitee> stdin() goes out of scope, and I return the lock().
[23:48:26] <bluss> can't do that
[23:48:28] <mkomitee> Yep.
[23:48:35] *** Joins: dylan (dylan@moz-k5u.d0d.43.100.IP)
[23:48:46] <mkomitee> The whole point is for me to return it. I guess i'll just keep wrapping stdin() in a BufReader.
[23:48:58] *** dylan is now known as Guest62909
[23:49:42] *** Joins: slashus2 (slashus2___@moz-evfg9e.res.rr.com)
[23:50:02] <mkomitee> so let me know if this is correct. If I have an object which I wrap in a box and cast to a boxxed trait, I'll be able to call any methods on the box that are implemented for that trait, but nothing else, even if it's implemented for the struct I initially boxed?
[23:50:10] <mkomitee> s/object/struct
[23:50:25] <bluss> right. you erase the original type
[23:50:26] <mkomitee> s/struct/instance of a type
[23:50:36] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[23:50:43] <mkomitee> can I cast it back later, or is it completely gone?
[23:50:55] <bluss> can't cast it back
[23:50:58] <mkomitee> K.
[23:51:06] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Client exited)
[23:51:17] <bluss> we have a limited downcasting solution but it's tied to a trait of its own (Any / Box<Any>)
[23:51:37] <mkomitee> Thank you for all the help / explanations.
[23:51:41] <mkomitee> I really appreciate it.
[23:51:59] <bluss> well I hope it's not too confusing
[23:52:10] <mkomitee> It makes a lot of sense actually.
[23:52:33] <mkomitee> I'm going to be pushing for adoption of rust at my firm. I hope to use it anywhere that we currently end up using c or c++.
[23:52:49] <mbrubeck> awesome!
[23:53:11] <mkomitee> The ability to effectively write c extensions for perl/python/etc in a systems language that can offer memory safety is just absolutely fantastic.
[23:53:33] *** Joins: ajitk (ajit@moz-6ht.i8n.51.106.IP)
[23:53:43] *** Quits: Savago (Savago@moz-28o.4t3.247.50.IP) (Client exited)
[23:53:43] *** Quits: kard (-@moz-3ptu76.dip0.t-ipconnect.de) (Connection closed)
[23:53:46] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[23:53:57] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[23:54:19] *** Joins: choplin (choplin@moz-h2ls1j.t6mc.g9m6.001a.240d.IP)
[23:54:31] *** Quits: lov2cod (Adium@moz-9of.is2.39.8.IP) (Ping timeout: 121 seconds)
[23:55:11] *** Joins: Guest67_ (textual@moz-og7.cn8.251.116.IP)
[23:56:34] *** Joins: zcourts (zcourts@moz-7ms809.cable.virginm.net)
[23:56:40] *** Joins: pcwalton (pcwalton@moz-vst.p2i.254.50.IP)
[23:56:41] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:56:52] *** Quits: Diamond (dick@moz-s67uin.ok.cox.net) (Connection closed)
[23:57:48] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[23:57:49] <FreeFull> mkomitee: You still have to be careful inside any unsafe block, but yeah
[23:58:57] *** Quits: chronode (chronode@moz-oddj4e.ga.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:59:05] <mkomitee> Absolutely.
[23:59:15] <mkomitee> Today's blog post couldn't have come out at a better time.
[23:59:52] <mkomitee> BTW, if anyone's interested, I updated repro.rs in that github repository to show what I ended up with.
