[00:04:13] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:24:19] *** Quits: arielb1 (Ariel@moz-ovd.f7o.66.109.IP) (Connection closed)
[00:27:21] *** Quits: brson (brson@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[00:37:44] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[01:09:00] *** kimundi is now known as zz_kimundi
[01:22:53] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[02:18:12] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:37:24] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[02:42:23] *** Joins: kvsari (kvsari@moz-fgsnv9.bbtec.net)
[02:51:41] *** Parts: kvsari (kvsari@moz-fgsnv9.bbtec.net) ()
[02:54:22] *** Quits: zz_kimundi (kimundi@moz-o5192b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:55:34] *** Joins: zz_kimundi (kimundi@moz-vprdic.dip0.t-ipconnect.de)
[02:55:35] *** zz_kimundi is now known as kimundi
[03:09:39] *** Joins: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net)
[03:39:19] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:56:18] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[04:00:17] *** Joins: brson (brson@moz-4pq.28j.56.172.IP)
[04:00:17] *** ChanServ sets mode: +qo brson brson
[04:52:37] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[05:05:29] <bkoropoff> I assume replacing __morestack with guard probes will require llvm changes.  Anyone have any pointers to what needs to happen?
[05:14:42] <klutzy> bkoropoff: https://github.com/rust-lang/llvm/pull/21
[05:15:20] <bkoropoff> thanks
[05:29:56] *** Quits: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net) (Client exited)
[06:15:46] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[06:24:16] *** Quits: brson (brson@moz-4pq.28j.56.172.IP) (Ping timeout: 121 seconds)
[06:30:09] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[06:38:12] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[07:10:45] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[07:43:24] *** Joins: doener (doener@moz-eku96m.hsi08.unitymediagroup.de)
[08:06:53] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[08:08:12] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[08:16:02] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:49:15] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[08:49:58] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[09:17:24] *** Joins: klutzy (not@moz-0t8.piq.68.115.IP)
[10:08:59] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[10:36:29] *** Joins: klutzy (not@moz-0t8.piq.68.115.IP)
[11:03:04] *** Joins: arielb1 (Ariel@moz-7ip.m8n.66.109.IP)
[11:18:45] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[11:19:59] *** Quits: arielb1 (Ariel@moz-7ip.m8n.66.109.IP) (Ping timeout: 121 seconds)
[11:20:22] *** Joins: arielb1 (Ariel@moz-7ip.m8n.66.109.IP)
[11:23:44] *** Joins: pcercuei (paul@moz-peo3to.dip0.t-ipconnect.de)
[11:24:03] <pcercuei> hi
[11:24:45] <pcercuei> how can I build rustc with a LLVM toolchain that has a custom name, e.g. 'mipsel-foo-linux-gnu' instead of 'mipsel-unknown-linux-gnu'?
[11:25:17] <pcercuei> is there a way to fallback to set a "fallback to mipsel-unknown-linux-gnu in the config file, without having to provide a JSON file?
[11:25:36] <pcercuei> is there a way to set a "fallback" to mipsel-unknown-linux-gnu in the config file, without having to provide a JSON file?
[11:31:12] <cmr> pcercuei: maybe but not really?
[11:31:18] <cmr> pcercuei: what exactly is your situation?
[11:32:56] <pcercuei> I have a LLVM+clang toolchain that targets 'mipsel-gcw0-linux-uclibc'
[11:33:05] <pcercuei> and I want to build rustc for that
[11:33:25] <cmr> Ahhhh the gcw0, that is exciting! I one sitting on a shelf that I haven't gotten around to porting Rust to yet...
[11:33:35] <pcercuei> nice!
[11:33:46] <cmr> pcercuei: CC=mispel-gcw0-linux-uclibc ./configure  && make
[11:33:48] <cmr> should do the trick
[11:34:01] <pcercuei> so I don't have to pass --target?
[11:34:08] <cmr> Oh, that too...
[11:34:11] <cmr> crap
[11:34:17] <cmr> You'll just need to outright add a port I think.
[11:34:26] <cmr> It should be pretty easy though.
[11:34:53] <cmr> Copy mipsel-unknown-linux-gnu.mk to mipsel-gcw0-linux-uclibc.mk in /mk/cfg
[11:34:57] <cmr> Edit a few of the strings in there
[11:35:37] <pcercuei> the thing is, the LLVM toolchain is generated by Buildroot; and I would like to add the option to build rustc in Buildroot as well
[11:35:46] <cmr> then, in /src/librustc_back/target, do the same with mipsel_unknown_linux_gnu.rs, and add to the list of targets around line 350 in mod.rs
[11:38:26] <cmr> pcercuei: I think the easiest thing to do will be to add the gcw0 as a supported platform in Rust.
[11:38:28] <pcercuei> ok, I'll try that first
[11:39:02] <cmr> It's totally possible to build a standard rustc and use a target specification file, though.
[11:39:05] <pcercuei> yes, but I don't want to support only the gcw0, but all Buildroot-based toolchains
[11:39:13] <pcercuei> maybe I'll just do some sed trickery :)
[11:39:50] <cmr> I'm not familiar enough with Buildroot to offer comments on that.
[11:40:53] <pcercuei> hmm yes, so I could build for mipsel-unknown-linux-gnu and install a custom JSON for mipsel-gcw0-linux-uclibc; but in that case is it possible to default to mipsel-gcw0-linux-uclibc?
[11:41:11] <pcercuei> so that I don't have to specify it everytime on rustc's command line
[11:41:20] <cmr> No, and in general you always need to provide a --target if you're not compiling for the host.
[11:42:01] <pcercuei> ok
[11:44:13] <cmr> It's not as bad as it sounds if you're using cargo
[11:44:34] <cmr> I'm not quite sure how well using mipsel-unknown-linux-gnu will work in practice, given that you need to link against uclibc
[11:45:37] <cmr> but it seems like you'd just add support for mipsel-unknown-linux-uclibc
[11:52:56] <pcercuei> first things first, http://crapouillou.net/~paul/nobackup/0001-mk-Allow-to-set-the-prefix-of-LLVM-tools-with-CFG_LL.patch
[11:53:25] <pcercuei> Buildroot's LLVM tools are named mipsel-<name>-linux-uclibc-llvm-*
[12:12:07] <pcercuei> "Rust is ready to roll."
[12:17:02] <pcercuei> http://pastebin.com/raw.php?i=3MH1eY6p
[12:17:05] <pcercuei> dammit...
[12:17:54] <pcercuei> I don't know why it tries to link with my host's $(CC)
[13:24:31] <pcercuei> ok, I can cross-compile Rust programs now
[13:35:51] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[15:26:15] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[15:40:01] <pcercuei> warning: dropping unsupported crate type `dylib` for target `mipsel-gcw0-linux-uclibc`
[15:40:07] <pcercuei> I have lots of these when building rustc
[15:51:57] *** Quits: doener (doener@moz-eku96m.hsi08.unitymediagroup.de) (Quit: leaving)
[16:15:54] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[16:16:02] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[16:32:42] *** Quits: pcercuei (paul@moz-peo3to.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[17:08:31] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[17:45:35] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:45:36] *** ChanServ sets mode: +qo brson brson
[20:57:42] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:18:39] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: Lost terminal)
[22:18:49] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[22:18:49] *** ChanServ sets mode: +qo brson brson
[22:57:46] *** Quits: arielb1 (Ariel@moz-7ip.m8n.66.109.IP) (Quit: Ex-Chat)
[23:06:23] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:27:23] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
