[00:00:28] <brendanc> don't know why it's ignoring the branch, same slave used 'auto' on the last run.
[00:00:44] <brendanc> I do see that the last scheduled run on mac3 is the same got_revision
[00:00:57] <brson> dbaupp: on third inspection, the new rng does ignore RUST_SEED
[00:01:29] <brson> dbaupp: but that's fine for now. I'm going to make a bunch of changes here
[00:02:04] <nmatsakis> graydon: doesn't build?
[00:02:34] <dbaupp> brson: ok... I can get it to read RUST_SEED in the rust code itself, if that's wanted
[00:02:59] <brendanc> graydon: are you sure you set the branch when you hit force build?
[00:03:21] <graydon> yeah. I enter "auto" for branch and "<some-rev>" for the revision
[00:03:24] <brendanc> if you forget, it uses master. Then since the revision you requested isn't there, it uses what it already has
[00:03:28] <nmatsakis> graydon: (reads backscroll) ah, I may have forgotten to list exports in the def file. 
[00:03:32] <graydon> always. it tends to behave even worse when I avoid it.
[00:04:14] <brson> dbaupp: I prefer to leave it out until somebody wants it
[00:04:19] <brendanc> possibly it ignores branch when you specify the revision
[00:04:50] <dbaupp> brson: that's fine by me
[00:05:10] <brendanc> so no difference on your end between 1100 and 1101?
[00:05:35] <strcat> nmatsakis: https://github.com/mozilla/rust/pull/6282 is this test okay for the new borrowck? I'm not entirely sure if the &mut borrows go away right away there
[00:05:58] <graydon> brendanc: nope, same invocation
[00:06:30] *** Quits: dbaupp (Thunderbir@moz-65648600.lns20.syd6.internode.on.net) (Ping timeout)
[00:06:45] *** Joins: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP)
[00:06:53] <nmatsakis> strcat: I expect that would still compile, if that's what you're asking
[00:06:58] <strcat> yeah
[00:08:27] *** Quits: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[00:08:31] *** Quits: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP) (Ping timeout)
[00:09:32] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[00:09:49] <nmatsakis> strcat: btw the non_owned and mutable stuff looks pretty good. I was wondering if a better name for non_owned would be aliased.
[00:09:53] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[00:10:19] <nmatsakis> since that's what it means, really. there may be aliases the compiler doesn't know about.
[00:11:40] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:13:27] <strcat> naming things is hard ;p
[00:13:49] <brendanc> welp, I'm mystefied about why it fetched the wrong branch in 1100
[00:13:59] <strcat> nmatsakis: aliased is definitely a better word than 'shared'
[00:14:09] <graydon> brendanc: ok. appreciate you looking at it!
[00:14:29] <graydon> gosh
[00:14:48] <graydon> I put a little example #[bench] routine in the docs
[00:14:59] <graydon> non-opt, 65932 ns/iteration
[00:15:06] <graydon> opt, 14 ns/iteration
[00:15:25] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[00:15:34] <strcat> graydon: is bors paused atm?
[00:15:40] <graydon> vec.foldl(0, |a, b| *a + *b)
[00:15:42] <graydon> strcat: yes
[00:16:07] <graydon> I guess I should restart it. nmatsakis: you concur the code is buggy, I should let bors continue?
[00:16:07] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:16:19] <graydon> I was kinda waiting for ... I really want nmatsakis' code to land :(
[00:16:30] <graydon> anything I can do to help!
[00:17:14] <nmatsakis> graydon: I just pushed a fix
[00:17:16] <nmatsakis> I think
[00:17:16] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[00:17:22] <nmatsakis> I can go fire up my mac and test there perhaps
[00:17:34] <graydon> ok. to the same pull req? or ..
[00:17:35] <nmatsakis> forgot all about rustrt.def.in, like a bad dream.
[00:17:41] <nmatsakis> yes, same PR.
[00:17:50] <brendanc> I will say, looking at the git step source code, that setting clobberOnFailure in rust_git should keep the build from doing the wrong revision.
[00:17:52] <graydon> it tends to work better if you close and reopen. bors gets confused about which one is the head.
[00:18:00] <nmatsakis> graydon: oh, ok, I can do that.
[00:18:27] <nmatsakis> graydon: I also removed some of that debugging code that you didn't land before :) I forgot it would just sneak back in from my branch
[00:18:52] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[00:18:55] <brendanc> clobberOnFailure should make git clone from scratch in the case where it can't check out the asked-for revision
[00:19:03] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[00:19:09] <graydon> would be nice if it did!
[00:19:15] <graydon> oh. you mean I am not setting it?
[00:19:16] <steven_is_false> Does Rust offer any support for a concurrency mechanism similar to Haskell's MVars? Instead of a stack of messages sent to a thread, I want to overwrite old, and stale messages.
[00:19:26] <brendanc> graydon: I don't see it set
[00:19:33] <graydon> brendanc: ok. I'll add that.
[00:19:43] <brendanc> argh, I'm wrong
[00:19:49] <brendanc> sorry, reading the wrong bit
[00:20:02] <graydon> yeah, I thought I had that set
[00:20:26] <steven_is_false> I figured that using the port, and channel system is basically using the wrong tool for the job even if it works.
[00:20:50] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[00:20:55] <graydon> steven_is_false: we have a kind of atomically reference counted shared variable (ARCs) that might be more appealing
[00:22:28] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[00:23:48] <nmatsakis> graydon: ok I close and reissued the PR
[00:24:12] <aatch> steven_is_false, I don't know about MVars, is it just the one message at the time?
[00:24:13] <graydon> cool. r+ and p=9999
[00:24:30] <aatch> p -> priority?
[00:24:54] <graydon> I'm going to try re-running bors then
[00:24:56] <graydon> aatch: yeah
[00:25:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:25:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1408a2a3d to 14bd5fd6e: 02http://git.io/N3iJvQ
[00:25:35] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:25:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:25:37] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/UK0RUw
[00:25:37] <ghrust> 13rust/06auto 140ef4e86 15Niko Matsakis: Replace NOTE with FIXME
[00:25:37] <ghrust> 13rust/06auto 142e4790c 15Niko Matsakis: Merge remote-tracking branch 'mozilla/incoming' into issue-5910-dyna-freeze
[00:25:37] <ghrust> 13rust/06auto 148b32bde 15Niko Matsakis: add rust_take_task_borrow_list and rust_set_task_borrow_list to rustrt.def.in
[00:25:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:25:54] <steven_is_false> graydon: ARCS may be more what I want.
[00:25:58] <brendanc> do you know, are the failures generally a mismatch between revision and got_revision, or is that just this one case?
[00:26:52] <brendanc> could hack around this particular error with a second git build step of full, clobber, with a doStepIf that checks whether revision=got_revision
[00:27:10] <graydon> nmatsakis: this is going to break your heart but the linux one failed 'make check' due to a FIXME without issue number in regionck.rs
[00:27:37] <nmatsakis> graydon: :) you know what, I can't believe it, but I probably forgot to run a final `make check` locally!
[00:27:50] * nmatsakis sighs
[00:27:51] <graydon> brendanc: no, generally they're that weird phenomenon of buildbot not noticing the state of 'auto' and/or assigning it to the 'try' branch
[00:28:15] <nmatsakis> graydon: best part is that it DOES have an issue # :)
[00:28:16] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[00:28:35] <nmatsakis> (just not on that line)
[00:28:52] <Thad> brson: thanks for verify that Libuv issue.  Referenced to #6270
[00:29:27] <graydon> nmatsakis: an appropriate time to shake your fist at tidy
[00:29:29] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:29:39] <steven_is_false> Okay, how does this sound as a simple idea. I have an ARC<Update> variable continuously updated by the simulator thread, and the render thread continuously reads from the variable.
[00:29:47] * nmatsakis shakes fist at tidy
[00:29:51] <Thad> brson: err... https://github.com/mozilla/rust/issues/6253
[00:30:22] <bblum> steven_is_false: look at RWARC
[00:30:22] <steven_is_false> Should I make an abstraction over the ARC so that I could add some kind of caching if I need to? 
[00:30:30] <strcat> graydon: heh, a few whitespace errors decided to sneak in since the gitattributes was added ;p
[00:30:36] <bblum> it is a version of ARC that allows mutable interiors and provides automatic locking
[00:30:42] * strcat wishes the sample pre-commit hook was on by default
[00:31:49] <steven_is_false> Just for completeness sake, shouldn't there be a RARC, and a WARC  types too?
[00:32:05] <strcat> plain ARC is read-only
[00:32:15] <strcat> if you can't read there's not much point in writing :)
[00:32:17] *** Quits: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP) (Ping timeout)
[00:32:26] <steven_is_false> NVM, I think I get the system. You use RWReadMode, and RWriteMode for what I want
[00:32:36] <bblum> well
[00:32:41] <strcat> I named the reference counted ones Rc and RcMut
[00:32:47] <strcat> should probably pick a consistent style for both
[00:32:52] <bblum> you don't need RWReadMode and RWWriteMode unless you want to be downgrading
[00:32:53] <strcat> (the task-local ones)
[00:32:55] *** Joins: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP)
[00:33:02] <bblum> you just use rwarc.read() and rwarc.write()
[00:33:26] <bblum> strcat: what's the deal with RcMut? isn't that just... an @mut T?
[00:33:39] <strcat> bblum: yes but it won't use the gc
[00:33:56] <brendanc> graydon:         elif self.retryFetch:
[00:33:56] <brendanc>             d = self._fetch(None)
[00:33:57] <brendanc>         elif self.clobberOnFailure:
[00:33:57] <brendanc>             d = self.clobber()
[00:34:06] <strcat> cycles can be prevented because it will use #[non_owned] and #[mutable] and will require T: Owned or T: Const
[00:34:07] <brendanc> retryFetch overrides clobber
[00:34:15] <graydon> oh :(
[00:34:30] <bblum> strcat: hmm okay
[00:34:51] <bblum> strcat: i can see this being useful, if rust grows an effect system, in code that forbids GC
[00:34:55] <strcat> the ARC stuff needs #[mutable] too to be safe
[00:35:04] <bblum> it does?
[00:35:06] *** Quits: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP) (Ping timeout)
[00:35:16] <bblum> ARC doesn't need to be mutable. RWARC does.
[00:35:20] <strcat> atm you can probably put an ARC in an ARC
[00:35:26] <strcat> bblum: yeah, that's what I mean
[00:35:36] <strcat> ARC is immutable so you can't make it cyclical
[00:35:43] <bblum> atm you can't put an ARC in an ARC but you should be able to
[00:36:05] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[00:36:21] <graydon> nmatsakis: you're re-filing again?
[00:36:28] <graydon> (i.e. I should stop it?)
[00:36:48] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:37:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:37:17] <nmatsakis> graydon: yes, in fact I already did so
[00:37:23] <graydon> k
[00:37:27] <nmatsakis> though I didn't mark it r+ yet
[00:37:27] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:37:30] *** Joins: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP)
[00:37:46] *** strcat1 is now known as strcat
[00:37:47] <nmatsakis> ok, did that.
[00:37:51] <graydon> close-and-reopen?
[00:37:51] *** Joins: johnmurray (jmurray@B6A8787C.1781649A.A0D3DFE2.IP)
[00:37:54] *** Quits: johnmurray (jmurray@B6A8787C.1781649A.A0D3DFE2.IP) (Quit: johnmurray)
[00:38:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:38:18] <graydon> nmatsakis: sorry. I didn't write bors to be smart enough to know how to handle a mid-landing refresh of a branch.
[00:38:33] <nmatsakis> graydon: :) ok
[00:38:44] <strcat> graydon: what does it do if you delete an r+ comment?
[00:38:55] <strcat> I thought it would decide it wasn't approved
[00:39:01] * strcat remembers doing it once
[00:39:08] <graydon> yes
[00:39:22] <graydon> it's ok with revisions so long as you make them _before_ it starts the landing (i.e. before it's made the merge node)
[00:39:24] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[00:39:30] <strcat> ah
[00:39:33] <strcat> rusti: core::run::run_program("ps", [~"ax"]);
[00:39:35] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ShOH
[00:39:36] <graydon> if you revise after it makes a merge node, I think it's likely to ignore your revisions
[00:39:57] <graydon> (and if you revise incoming after it makes the merge node, it will invalidate the merge node and restart it)
[00:39:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[00:40:11] <aatch> strcat, nice
[00:41:22] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:41:25] <strcat> rusti: core::run::run_program("ps", [~"ax"]);
[00:41:27] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/YAOL
[00:42:09] <strcat> I've got it pretty stripped down now ;p
[00:42:19] <strcat> rusti: core::run::run_program("ls", [~"/dev"]);
[00:42:20] <rusti> kmsg
[00:42:20] <rusti> mqueue
[00:42:20] <rusti> random
[00:42:20] <rusti> urandom
[00:42:23] <strcat> rusti: core::run::run_program("ls", [~"/sys"]);
[00:43:10] <strcat> rustc still wants 128MiB of ram though
[00:43:27] <strcat> but it could easily fit on my arm server now...
[00:45:31] <graydon> nmatsakis: new one incoming?
[00:45:37] <graydon> er, poor choice of words..
[00:45:42] <graydon> "on the way"?
[00:45:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[00:46:56] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:49:11] <nmatsakis> graydon: yes, I opened one on master by accident
[00:51:20] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[00:51:27] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[00:51:59] *** Quits: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net) (Quit: Leaving)
[00:52:07] <graydon> nmatsakis: (just checking to make sure; you're not waiting on me presently, right? I'm waiting on you)
[00:52:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:52:15] <graydon> deadlock-avoidance protocols!
[00:52:28] <strcat> rusti: core::run::run_program("ps", [~"ax"]);
[00:52:29] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/MjTX
[00:53:02] <nmatsakis> graydon: https://github.com/mozilla/rust/pull/6286
[00:53:10] <nmatsakis> graydon: the r+ is from a prior PR, not sure if that matters :)
[00:53:22] <strcat> rusti: core::run::run_program("free", [~"-m"]);
[00:53:23] <rusti>              total       used       free     shared    buffers     cached
[00:53:23] <rusti> Mem:           242        188         54          0          9        124
[00:53:23] <rusti> -/+ buffers/cache:         53        188
[00:53:23] <rusti> Swap:            0          0          0
[00:53:29] *** Quits: snearch (snearch@moz-378AA4FC.pool.mediaways.net) (Quit: Verlassend)
[00:53:41] <strcat> too much! ;p
[00:53:48] <graydon> here goes!
[00:54:24] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:54:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14eb6ea88 to 14bd5fd6e: 02http://git.io/N3iJvQ
[00:54:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:54:26] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:54:26] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/mXVelA
[00:54:26] <ghrust> 13rust/06auto 140ef4e86 15Niko Matsakis: Replace NOTE with FIXME
[00:54:26] <ghrust> 13rust/06auto 142e4790c 15Niko Matsakis: Merge remote-tracking branch 'mozilla/incoming' into issue-5910-dyna-freeze
[00:54:26] <ghrust> 13rust/06auto 148b32bde 15Niko Matsakis: add rust_take_task_borrow_list and rust_set_task_borrow_list to rustrt.def.in
[00:54:28] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:55:36] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[00:55:41] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[00:56:04] *** Quits: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP) (Ping timeout)
[00:56:34] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[00:58:53] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[00:59:38] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[00:59:47] <steven_is_false> Why isn't there a shortcut method for rwarc.read (|x| *x) ?
[01:00:26] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[01:00:28] <aatch> steven_is_false, because it would require a Copy bound on the type
[01:00:39] <steven_is_false> aatch: Oh, I get that.
[01:00:48] <strcat> Clone now
[01:01:04] <aatch> strcat, goddamn changes making wrong all the time
[01:01:14] <aatch> making me wrong*
[01:01:17] <strcat> well Copy is still around but it's not very generic ;p
[01:01:48] <steven_is_false> I'm not sure RWriteMode is what I want.
[01:02:13] <steven_is_false> I want something similar to Port, and Chan but for RWARC.
[01:02:21] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:03:09] <aatch> steven_is_false, so briefly explain MVars to me?
[01:03:32] <steven_is_false> aatch: An MVar is basically RWARC <Option <T>>
[01:04:05] <steven_is_false> aatch: And whenever something is read, a None is set back in.
[01:04:12] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[01:04:34] <steven_is_false> aatch: As well when there is nothing in, a read call blocks waiting for a new value.
[01:05:47] <aatch> Hmm, might be able to make a Rust version of that that doesn't have the overhead of ARC.
[01:06:04] <aatch> Since you wouldn't be sharing the data
[01:06:27] <aatch> (I assume)
[01:07:14] <steven_is_false> aatch: I don't have too much experience with concurrency.
[01:07:28] <steven_is_false> aatch: So unfortunately I can't give you that much info.
[01:07:37] <strcat> aatch: unless T is a specific primitive type, it still needs a lock
[01:07:43] <aatch> steven_is_false, it's fine. You gave me enough.
[01:07:48] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Connection reset by peer)
[01:07:50] <strcat> and it needs refcounting if it's not global
[01:07:54] <nmatsakis> hmm, my local test run encountered some odd failures in ebml::tests::test_option_int and flatpipes::test::test_serializing_memory_stream
[01:08:02] <nmatsakis> graydon: brson: pcwalton: ^^ ring any bells?
[01:08:14] <steven_is_false> Because Haskell is a garbage collected language I think they'd want to reduce sharing right? That could explain why MVars are used there.
[01:08:14] <aatch> strcat, well how do channels do it?
[01:08:28] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130430204233])
[01:08:30] <aatch> Or are they still reference counted?
[01:08:34] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[01:08:38] <strcat> aatch: if they're not owned I assume they're refcounted
[01:08:47] <strcat> aren't there owned ones?
[01:09:07] <aatch> I thought they were owned
[01:09:10] <strcat> if you just have a single producer and a single consumer it probably doesn't need refcounting
[01:09:12] <aatch> since they are sendable
[01:09:25] <strcat> well I mean actually "owned"
[01:09:30] <strcat> ARCs aren't "owned" but they're Owned
[01:09:33] <strcat> it's a misleading trait name
[01:09:41] <aatch> strcat, it is...
[01:09:42] <strcat> should just be Send again imo
[01:10:02] <strcat> at least iirc it was Send before.... unless Send was separate
[01:10:29] <brson> nmatsakis: yes
[01:10:44] <brson> nmatsakis: I have been bisecting it all day
[01:10:53] <brson> i686 only failure
[01:11:00] <nmatsakis> brson: oh, joy. I thought I saw something similar in your status report
[01:11:06] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:11:14] <brson> maybe we should consider changing Owned back to Send or adding a `trait Send: Owned`
[01:11:16] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[01:11:20] <aatch> strcat, I think Send was separate
[01:11:24] <brson> it seems people mostly don't like Owned
[01:11:37] <strcat> brson: well I don't like Owned because things like ARC aren't owned, but they're Owned :)
[01:11:49] <strcat> it really means 'thread-safe enough that it can be sent'
[01:12:03] <brson> in that context
[01:12:03] <strcat> and Owned doesn't mean 'managed' because & aren't Owned
[01:12:40] <strcat> non-managed*
[01:12:52] <steven_is_false> Just curious would a hypothetically RARC paired with a WARC be open to possible optimizations?
[01:13:12] <steven_is_false> Over just two RWARCS pointing to the same spot?
[01:13:24] <aatch> steven_is_false, not really
[01:13:35] <steven_is_false> aatch: Fair enough.
[01:13:49] <aatch> what would the optimizations be? Both need to check for the same locks
[01:14:10] <steven_is_false> aatch: I actually don't need the locking functionality really.
[01:14:20] <steven_is_false> aatch: I just need atomic reads, and writes
[01:14:54] <strcat> so you need locking
[01:15:09] <strcat> unless it's a really primitive type where there are hardware atomic operations
[01:15:26] <strcat> the writer has to block the reader until it's done
[01:15:30] <aatch> strcat, but the locking can be more behind-the-scenes in this case
[01:15:32] <steven_is_false> strcat: Atomic reads, and writes, can be implemented using locking but I thought they can be sped up more then the general case.
[01:15:58] <strcat> the reader blocks the writer and the writer blocks the reader
[01:16:11] <cmr> strcat: did you try courgette? It's what chrome uses
[01:16:12] <steven_is_false> strcat: yes.
[01:16:12] <strcat> you can have parallel reads but then you need an atomic reader count or something
[01:16:36] <steven_is_false> Anyways, this is too much microoptimization.
[01:16:49] <strcat> cmr: nope but that looks awesome
[01:17:07] <aatch> steven_is_false, I was thinking about it in terms of a partner to pipes.
[01:17:49] <steven_is_false> aatch: You mean RARC, and WARC?
[01:18:08] <aatch> steven_is_false, probably not those names.
[01:18:19] <steven_is_false> aatch: Well sure!
[01:18:44] <strcat> cmr: looks like it would need to be integrated with the package manager more though
[01:18:49] <aatch> But the idea of "sending" a value to a task where the previous value is just overwritten
[01:18:52] <strcat> afaict it wouldn't just run on the uncompressed .tar
[01:19:01] <cmr> no
[01:19:09] <cmr> it does weird, scary things.
[01:19:20] <strcat> can it run on a tarball containing various binaries?
[01:19:38] <cmr> Hm
[01:19:50] <steven_is_false> aatch: I think in general Rust probable needs a bigger concurrency library. Of course, Rust is only in 0.6.
[01:19:53] <strcat> seems to rely on being able to disassemble a specific binary
[01:20:07] <cmr> Supposedly, yes.
[01:20:12] <cmr> I've never tried it though
[01:20:29] <aatch> steven_is_false, out of interest, what data would you put into this hypothetical MVar?
[01:21:19] <steven_is_false> aatch: One of the things, I could do would have the current state of the users keyboard in an RWARC, or an MVar.
[01:21:35] <steven_is_false> aatch: But for that specific use case I think Port, and Chan are better
[01:21:50] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[01:23:17] <aatch> it would be nice to have C++-style atomic types. Where you can wrap most things in an Atomic<> template and the compiler will generate atomic code for it.
[01:23:30] <aatch> (only PODs though)
[01:23:49] <brson> nmatsakis: oh, actually i have a pull request up to work around that problem
[01:23:55] <brson> (i was bisecting something else!)
[01:24:10] <brson> nmatsakis: https://github.com/mozilla/rust/pull/6276
[01:24:34] <steven_is_false> aatch:  so fn createAtomic <T : POD> (T) -> Atomic <T> ?
[01:24:57] <strcat> http://en.cppreference.com/w/cpp/atomic
[01:25:01] <aatch> steven_is_false, well C++ is more like Atomic<POD> my_var
[01:25:16] <aatch> if the struct is too big, it will use locks to get concurrency
[01:25:29] <aatch> Atomic types are built into the language
[01:25:42] <brson> rust takes so long to build that by the time one of my 4 workspaces has built I don't remember what i was doing
[01:26:07] <steven_is_false> So, does LLVM have built in stuff for things like that, or is it not exposed to that kind of information?
[01:26:18] <aatch> steven_is_false, it has atomic instructions
[01:26:20] <strcat> steven_is_false: they kind of do. it's lower level than the C++11 stuff
[01:26:37] <steven_is_false> Well cool.
[01:26:48] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[01:27:51] <aatch> The advantage of having atomic types built-in though, at least partially, is being able to intercept calls to Load and Store to make them atomic
[01:28:02] <nmatsakis> brson: that's ... creepy
[01:28:30] <strcat> nmatsakis: fn main { loop {} } is creepy too
[01:28:34] <strcat> with -O
[01:28:35] <brson> nmatsakis: yeah :( i felt bad about not fixing it
[01:29:12] <nmatsakis> brson: do we suspect...LLVM bug? our bug? no idea?
[01:29:31] <aatch> brson, W T F?
[01:29:56] <brson> nmatsakis: i don't know. i think it started after demuting std::serialize
[01:30:19] <strcat> oh the loop {} thing is fixed.
[01:30:32] <aatch> strcat, what did it used to do?
[01:30:44] <strcat> it would optimize out the body of rust_main
[01:30:47] <strcat> to undefined
[01:30:53] <strcat> and then it would fall off main and start the scheduler infinitely
[01:30:56] <strcat> until it went oom
[01:30:56] <pcwalton> I always preferred Send to Owned
[01:30:58] <pcwalton> just saying :)
[01:32:17] <steven_is_false> So I don't know whether I should use core::pipes, or core::comm. As I understand it. core::pipes should be much faster, unless I'm just reimplementing core::comm.
[01:32:34] <pcwalton> I wouldn't say "much" faster
[01:32:36] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Ping timeout)
[01:32:49] <pcwalton> IIRC eholk's measurements showed a very minor difference
[01:32:50] *** Joins: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP)
[01:33:38] <steven_is_false> pcwalton: Okay, I wonder what the worst case situations, and the best case situations are. When do pipes give a real difference, and when does it not matter?
[01:33:41] <brson> core::pipes is just plumbing
[01:33:46] <brson> unless you are on < 0.6
[01:33:55] <pcwalton> RFC: close the tree until the new borrow check lands
[01:34:22] <brson> by that i mean, use core::comm, avert eyes from core::pipes
[01:34:39] <steven_is_false> So I'd only use core::pipes if I wanted to make my own abstract type with special charateristics? Like it's a low level primitive.
[01:35:15] <brson> steven_is_false: yes, and even then you would want to use the `proto!` macro. core::pipes is essentially just the runtime for the pipes compiler (proto!)
[01:35:17] <strcat> pcwalton: I think the only thing that will conflict is my #[non_owned] change because we both fixed the same unneeded mutable warning ;p
[01:35:42] <steven_is_false> brson: Yes, I meant using the proto! macro.
[01:36:36] <steven_is_false> Thanks for the help people.
[01:36:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:37:07] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[01:37:19] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:37:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:37:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:37:37] *** strcat1 is now known as strcat
[01:37:49] <steven_is_false> I wonder, we have N*Xs, and boxen, would *en work for a plural that looks better than people?
[01:39:10] <cmr> bstrie: ping
[01:39:28] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:39:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:42:41] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[01:43:04] *** Joins: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP)
[01:45:56] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:46:25] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:48:28] *** Joins: brendan (brendaneic@moz-E443CF1A.sub-70-197-3.myvzw.com)
[01:48:53] *** Joins: june0cho (june0cho@5AB4884B.FCC4549.14D5B978.IP)
[01:50:52] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[01:51:14] *** kimundi is now known as zz_kimundi
[01:52:16] *** Quits: posco (oscarboyki@636AC086.5999CED5.71743E61.IP) (Quit: posco)
[01:52:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:52:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/mXVelA
[01:52:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:52:48] <pcwalton> is that the borrow checker?
[01:52:52] <graydon> yes
[01:52:55] <pcwalton> \o/
[01:52:59] <pcwalton> thanks to nmatsakis 
[01:53:16] <graydon> all \o/ hoorays
[01:53:37] <graydon> turning bors back on
[01:53:46] <brson> nice work nmatsakis
[01:53:50] <brson> time to rebase
[01:54:01] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:55:20] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[01:55:37] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[01:55:37] *** ChanServ sets mode: +qo graydon graydon
[01:55:50] <nmatsakis> yay :)
[01:55:55] <nmatsakis> don't say nice work till you try it...
[01:56:00] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[01:56:13] <pcwalton> I will soon
[01:56:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:56:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/zDfqIw
[01:56:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:58:11] <nmatsakis> I already thought of one minor error, have to make a note of it ...
[01:58:12] <nmatsakis> :)
[01:59:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:59:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/zDfqIw
[01:59:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:59:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:59:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/73ptOA
[01:59:14] <ghrust> 13rust/06auto 1424cda9f 15Alex Crichton: Remove pub from core::{unicode,cmath,stackwalk,rt}
[01:59:14] <ghrust> 13rust/06auto 144b6864f 15bors: auto merge of #6226 : alexcrichton/rust/issue-6199, r=brson...
[01:59:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:02:34] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[02:04:47] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[02:04:56] *** Joins: sdh_ (sdh@BCD0EF3B.8A554927.FD6A0EFF.IP)
[02:06:50] *** Quits: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP) (Ping timeout)
[02:07:28] *** Joins: jga (asdf@307B153A.7179CBA0.B5524284.IP)
[02:07:32] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:08:31] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[02:11:13] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[02:11:17] <jga> hi, joined just to tell you don't forget to tag e-easy bugs
[02:12:02] *** Quits: brendan (brendaneic@moz-E443CF1A.sub-70-197-3.myvzw.com) (Quit: brendan)
[02:13:22] <aatch> jga, fair point, though many current issues aren't that easy (depending on your definition of easy)
[02:13:24] *** Joins: isaac (Mibbit@moz-F5F497CA.dyn.grandenetworks.net)
[02:15:18] <jga> #6279 for example, just bugs that get you to know rust without needing deep knowledge, I learnt of that one because of mailing list
[02:15:44] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[02:16:17] <cantsin> guys, rusti is broken, right? i just did "float::fmin(5.0, 1.0)" and it broke. (from latest git as of yesterday or so)
[02:16:32] <cmr> cantsin: rusti has been broken for a long time
[02:16:38] <pcwalton> I think it's busted
[02:17:25] <aatch> cantsin, it's completely broke
[02:17:41] <strcat> heh, yesterday->today delta is 17MiB
[02:17:53] <aatch> You can't even do an literal expression
[02:18:05] <cantsin> thanks. alright. looking to see if there are any e-easy bugs with rusti can try to tackle.
[02:18:27] <cantsin> or is it hopeless? :P
[02:18:39] <cmr> cantsin: rusti could /really/ use a testsuite
[02:18:42] <aatch> cantsin, unfortunately it needs to be working before those bugs are even able to be seen
[02:18:46] <cmr> there's an open bug for that somewhere
[02:19:07] <aatch> I think somebody (or somebodies) is working on getting rusti to a more working state
[02:20:03] <aatch> rusti> leaked memory in rust main loop (1 objects) // After typing `1`, which to be fair, did work.
[02:20:15] <cmr> in 0.6 or incoming?
[02:20:32] <cmr> https://github.com/mozilla/rust/issues/5469
[02:20:45] *** Quits: catpig (catpig@moz-D49D45E6.dip0.t-ipconnect.de) (Quit: Verlassend)
[02:20:48] <aatch> cmr, for me, incoming
[02:20:57] <aatch> fairly recent (like 2-3 days tops)
[02:21:23] <cmr> hey there it is!
[02:21:27] <cmr> but then it coredumps
[02:21:56] <thomaslee> When's the best time to catch catamorphism on this channel?
[02:23:03] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[02:25:12] <cantsin> regarding rusti crashes, what's the best way to figure out what the error is? RUST_LOG=rusti doesn't seem to give me much
[02:25:31] <Luqman> thomaslee: working hours pacific time probably
[02:27:15] *** zz_kimundi is now known as kimundi
[02:27:15] <thomaslee> cheers
[02:27:58] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:28:42] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[02:29:52] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[02:29:52] *** Parts: jga (asdf@307B153A.7179CBA0.B5524284.IP) ()
[02:30:30] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[02:33:13] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[02:33:24] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[02:33:25] *** Joins: dbaupp (Thunderbir@7C548FD6.D5A1DCF.37681C44.IP)
[02:35:36] *** Quits: akashj87 (akash@310638EE.D26252D3.35E3DDC8.IP) (Quit: Leaving)
[02:36:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:36:44] *** Joins: an0nymous (an0nymous@moz-A6B0CE4.tx.res.rr.com)
[02:37:06] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:39:22] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[02:39:25] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[02:39:32] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[02:39:38] *** Quits: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP) (Quit: jeff)
[02:40:28] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[02:40:34] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[02:42:25] *** Quits: james4k (james@moz-BCA9EE34.io) (Quit: WeeChat 0.3.8)
[02:42:41] *** Joins: james4k (james@moz-726FE3EE.com)
[02:45:36] *** Quits: kimundi (kimundi@moz-C95FB01C.dip0.t-ipconnect.de) (Ping timeout)
[02:45:48] *** Quits: isaac (Mibbit@moz-F5F497CA.dyn.grandenetworks.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:48:51] *** Joins: kimundi (kimundi@moz-C10786E8.dip0.t-ipconnect.de)
[02:50:08] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[02:51:47] *** Quits: DanC (connolly@1BF57F76.56AB27A3.6F26FCB4.IP) (Ping timeout)
[02:52:07] *** kimundi is now known as zz_kimundi
[02:52:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:55:58] *** Quits: dbaupp (Thunderbir@7C548FD6.D5A1DCF.37681C44.IP) (Ping timeout)
[02:57:30] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[03:02:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:02:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/73ptOA
[03:02:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:04:00] *** Quits: int3__ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[03:05:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:05:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:05:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/mlVw0g
[03:05:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:05:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:05:12] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/LtyX8A
[03:05:12] <ghrust> 13rust/06auto 1461ce628 15Brian Anderson: Move flate from core to std
[03:05:12] <ghrust> 13rust/06auto 147f42433 15bors: auto merge of #6205 : brson/rust/flate, r=brson...
[03:05:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:05:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:05:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147f42433 to 144b6864f: 02http://git.io/N3iJvQ
[03:05:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:06:12] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[03:07:54] *** Joins: DanC (connolly@moz-BEA079AC.kumc.edu)
[03:13:35] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:14:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:14:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147fda03f to 144b6864f: 02http://git.io/N3iJvQ
[03:14:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:14:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:14:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eyjtFg
[03:14:10] <ghrust> 13rust/06auto 14de80712 15Brian Anderson: Move core::run tests of process killing into standalone run-pass tests...
[03:14:10] <ghrust> 13rust/06auto 14d2f0235 15bors: auto merge of #6228 : brson/rust/run-destroy, r=brson...
[03:14:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:17:12] <bjz> pcwalton: hoya
[03:17:24] <pcwalton> bjz: hi
[03:17:38] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:18:02] <bjz> pcwalton: I renamed FuzzyEq to ApproxEq and moved it to core::cmp last night. I hope that's ok
[03:18:15] <pcwalton> sounds good, I never liked the name FuzzyEq
[03:18:16] <pcwalton> it's a Geckoism
[03:18:22] <bjz> pcwalton: I was going to get you to review it, but somebody r+sed it
[03:18:30] *** Joins: brson (brson@E02A6CDD.75598729.B6A3AE99.IP)
[03:18:31] *** ChanServ sets mode: +o brson
[03:19:05] <bjz> pcwalton: oh really?
[03:19:16] <pcwalton> yeah
[03:19:40] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[03:21:06] <bjz> pcwalton: oh, and I also added assert_fuzzy_eq!
[03:21:12] <pcwalton> sounds good
[03:21:15] <bjz> which might be useful
[03:21:45] <bjz> woops *assert_approx_eq
[03:21:56] <bjz> heh
[03:22:09] <pcwalton> the error messages from the new borrow checker are so much nicer
[03:22:13] <pcwalton> although I already found one mistake
[03:22:20] <pcwalton> it says "second borrow" when it means "first borrow"
[03:22:44] <bjz> pcwalton: and just to be annoying, it brought up another use case for that proposal you had: https://github.com/mozilla/rust/blob/incoming/src/libcore/num/f64.rs#L243
[03:23:24] <bjz> :P
[03:24:28] * bjz wonders whether #[deriving(ApproxEq)] would ever work, seeing as it relies on a constant
[03:24:45] <strcat> new borrowck \o/
[03:24:52] * strcat can make a burst trie now :)
[03:28:12] <bjz> pcwalton: is there a way to access these constants? http://en.cppreference.com/w/c/numeric/math/FP_categories
[03:29:21] <pcwalton> bjz: they're just the return value of fpclassify(), aren't they?
[03:29:21] <strcat> bjz: add them in libc
[03:29:30] <bjz> pcwalton: yup
[03:29:41] <bjz> apparently they're implementation-specific
[03:29:42] <pcwalton> yeah, I don't know what their values are
[03:29:49] <pcwalton> since they're macros you can't really portably access them
[03:29:55] <bjz> eh
[03:29:58] <bjz> :(
[03:30:16] <strcat> doesn't rust grab sizes from compiling something in C? seems like they can be accessed the same way
[03:30:27] <bjz> dunno what the underlying implementation looks like
[03:30:28] <pcwalton> they could
[03:30:47] <bjz> maybe I could just do it without fpclassify
[03:31:31] <bjz> do you reckon it'd be better to switch to using the C predicates for isNaN and isinf etc?
[03:31:54] <pcwalton> those are pretty simple predicates, I think...
[03:31:58] <pcwalton> x == x is isNaN
[03:31:59] <pcwalton> I think
[03:32:02] <pcwalton> err
[03:32:03] <pcwalton> x != x
[03:32:06] <bjz> x != x
[03:32:08] <bjz> yup
[03:32:14] <bjz> that's what I have now
[03:32:16] <pcwalton> that's probably the simplest
[03:32:39] <bjz> okies
[03:33:58] <strcat> http://ix.io/5vU math.h
[03:34:01] <strcat> it's built-in to clang/gcc
[03:34:09] <strcat> would be interesting to look at what they do for all of those
[03:34:17] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[03:34:23] * cantsin crawls out of rusti code. yuck.
[03:34:46] <cantsin> i'm guessing here but i think a proper fix would be to make the AST sendable (e.g., though channels?)
[03:35:20] <cantsin> i also found an email thread that no one seemed to respond to about rusti
[03:35:25] <pcwalton> that's a lot of work
[03:35:26] <cantsin> rusti definitely needs more love :/
[03:35:36] <pcwalton> the only way to make it work would be to use flatpipes...
[03:36:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:36:13] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:36:23] <cantsin> looking flatpipes up. hrm.
[03:36:26] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:36:27] <strcat1> bjz: http://ix.io/5vV mathinlines.h ;p
[03:36:29] *** strcat1 is now known as strcat
[03:36:41] <strcat> mathinline.h *
[03:36:42] <pcwalton> I think one could make it work with flatpipes, since the AST is generally Encodable
[03:36:47] <strcat> part of glibc
[03:36:58] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[03:37:40] <cantsin> pcwalton: thanks, that's helpful. i'm going to respond to that email thread and offer assistance. seems like others are already working on this problem but i have no idea how far along they are.
[03:37:49] <pcwalton> ok, cool
[03:38:36] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:39:43] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[03:39:58] <Erik> bjz: The approx_eq_eps function implementation is ... not ideal
[03:40:19] <bjz> Erik: ok, how would you improve it?
[03:40:24] <Erik> It thinks everything less than 1e-6 is "equal", and quits being "fuzzy" around 1e9
[03:40:27] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Ping timeout)
[03:40:32] <Erik> (*self - *other).abs() < *approx_epsilon * max(abs(*self), abs(*other))
[03:40:46] *** Quits: DanC (connolly@moz-BEA079AC.kumc.edu) (Ping timeout)
[03:40:55] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[03:41:03] *** Quits: june0cho (june0cho@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[03:41:05] <Erik> with *approx_epsilon ~100 times the machine epsilon
[03:41:33] <Erik> 2^-52 * 100 for double, 2^-23*100 for f32
[03:42:15] <Diablo-D3> MACHINE EPSILON
[03:42:20] <Diablo-D3> I totally need to name a band that
[03:42:30] <bjz> 2.0e-100?
[03:42:40] <bjz> oh wait
[03:42:41] <bjz> no
[03:42:46] <Erik> bjz: 100 times 2^-52
[03:42:57] <Erik> https://en.wikipedia.org/wiki/Machine_epsilon
[03:42:57] <bjz> yup
[03:42:58] <bjz> :P
[03:43:25] <Erik> Diablo: We have an invasive weed called Myrtle Spurge. I think it would be a great band name
[03:43:45] <Diablo-D3> Erik: lol
[03:45:31] <Jeaye> "Invasive weed" is good enough already.
[03:46:55] <brson> if we changed Owned to Send what would #[non_owned] be?
[03:47:11] <strcat> brson: #[task_local]
[03:47:20] <strcat> or #[no_send], I guess
[03:47:25] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[03:49:35] <bjz> Erik: any idea how I would do 2^-52 * 100 without having to calculate it each time?
[03:49:37] <strcat> Const is kind of a bad name too but I can't think of a better one.
[03:49:42] <bjz> Er
[03:49:48] <strcat> afaik it really means "can't be statically frozen"
[03:50:04] <strcat> so @mut, RcMut, Cell
[03:50:04] <bjz> Erik: seeing as we don't have constexprs?
[03:50:21] <Erik> bjz: 2.2204460492503130808472633361816e-14
[03:50:33] <Erik> with a comment on where it came from?
[03:50:44] <bjz> cool, good idea
[03:50:50] <Erik> The "100" is picked out of thin air
[03:50:51] <brson> we still have Durable too
[03:51:02] <bjz> Erik: errm
[03:51:10] <Erik> bjz it might be better to go with 64 or 128
[03:51:38] <bjz> Erik: so why are we doing it this way again?
[03:51:42] <Erik> It's not completely random - a machine op will typically be accurate, except in the last place
[03:51:57] <Erik> So errors tend to accumulate in units of the least significant bit
[03:52:17] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[03:52:36] <Erik> 100 * one unit in the least significant bit allows "a lot" of 1 unit errors, but still scales with the number's magnitude
[03:52:57] <Erik> The basic reason is that float works perfectly well - and can be very accurate - below 10e-6
[03:53:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:53:15] <Erik> And you may need fuzziness for floats about 10e+9
[03:53:23] <Erik> s/about/above/
[03:54:28] <strcat> ugh, I really miss the bug tracker search :(
[03:56:43] <bjz> Erik: so why not just do 10e+9?
[03:57:20] <bjz> sorry, just trying to understand
[03:57:24] <Erik> Bjz: 10e9 for what?
[03:57:47] <bjz> you're more than welcome to do a pull request
[03:58:03] <bjz> in fact I'd very much appreciate it
[03:58:14] <Erik> Right now, if a number is larger than about 10e9, 10e-6 is smaller than one unit in the least significant bit
[03:58:19] <Erik> bjz: will do
[03:58:20] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[03:58:26] <bjz> thanks so much
[03:58:35] <Erik> But can't do it until tomorrow night, at the earliest
[03:58:40] <bjz> np
[03:58:42] *** Joins: DanC (connolly@moz-BEA079AC.kumc.edu)
[03:58:55] <bjz> thanks for checking my stuff though
[03:58:58] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[03:59:00] <Erik> no problem
[03:59:05] <bjz> I do the best I can, but I need help
[03:59:26] <Erik> Yeah, I definitely can't help with the borrow checker, so I help out where I can :-)
[04:00:09] <bjz> neither can I, so I work on library design :)
[04:00:30] <bjz> interesting: http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html
[04:01:11] <Erik> Thanks, I'll give that a look later
[04:01:22] <strcat> brson: https://github.com/mozilla/rust/pull/6292 r?
[04:01:37] <Erik> Got to head offline, 'night all. Or morning, good depending on where you live.
[04:01:44] <bjz> night!
[04:03:23] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[04:04:55] <strcat> no more unsafe needed for any of the maps :)
[04:07:05] <pcwalton> sweet
[04:07:07] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[04:07:35] <strcat> and find_mut is very usable now
[04:08:15] <strcat> the implementation hit the same problem as users of it ;p
[04:09:11] <doomlord> speaking of find... anyone seen the tool (for clojure i think) where you give an input and output in a language's literal syntaax, and it tells you the function that does that
[04:09:34] <strcat> http://www.haskell.org/hoogle/
[04:09:44] <doomlord> thats similar too
[04:09:59] *** Joins: dbaupp (Thunderbir@7C548FD6.D5A1DCF.37681C44.IP)
[04:10:18] *** Quits: thiez (thiez@moz-BF669398.student.utwente.nl) (Ping timeout)
[04:10:54] <strcat> I think I might be able to write find_mut without tail recursion for treemap... not that it matters much
[04:10:58] <strcat> couldn't before
[04:12:18] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[04:12:40] <acrichto> strcat: r? https://github.com/mozilla/rust/pull/6236 you seem to have written most of those in the first place anyway
[04:13:19] *** Quits: DanC (connolly@moz-BEA079AC.kumc.edu) (Client exited)
[04:17:26] <strcat> acrichto: btw we could have a MapUtil trait defining the wrapper ones (as a workaround for not having default methods)
[04:17:52] <strcat> just with impl MapUtil for Map { ... }
[04:17:54] <acrichto> oh that's a good point, I'll try adding that once that one goes through
[04:18:18] <acrichto> I thought it had to be something like impl<K, V, M:Map<K, V>> MapUtil for M {} ?
[04:18:35] <strcat> yeah
[04:18:48] <strcat> it might not work because of the bounds, not sure
[04:19:10] <acrichto> I've had trouble with those in the past, but I'll take a stab
[04:19:50] <aatch> I officially hate libtool
[04:19:54] *** Joins: june0cho (june0cho@5AB4884B.FCC4549.14D5B978.IP)
[04:20:01] <strcat> aatch: I do too :)
[04:20:30] <aatch> "Lets take a fairly simple concept and fuck it up. Why? Because we're goddamn GNU and we're nuts"
[04:20:34] <strcat> and linker scripts. and autotools. and m4. and pkg-config.
[04:21:07] <steven_is_false> Hey, pkg-config is fairly simple to use.
[04:21:43] <strcat> yeah but a sane library links/compiles the same way on every OS
[04:21:54] <steven_is_false> Fair enough.
[04:22:16] <strcat> not everything can be sqlite I guess ;p
[04:22:41] <aatch> I'm ok with autoconf, mostly
[04:22:48] <strcat> pkg-config usually adds a bunch of libs you only sometimes need too
[04:22:55] <strcat> -Wl,--as-needed pretty much exists because of it
[04:23:04] *** Quits: dbaupp (Thunderbir@7C548FD6.D5A1DCF.37681C44.IP) (Ping timeout)
[04:23:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:23:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/eyjtFg
[04:23:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:23:22] <aatch> FINALLY!
[04:23:37] <aatch> I got my PHP extension to link against the library I'm wrapping
[04:24:12] <strcat> aatch: autoconf is pretty terrible though
[04:24:23] <strcat> 99% of it is workarounds for broken C/C++ compilers
[04:24:38] <strcat> might as well just use a sane compiler.
[04:25:04] <strcat> gcc, clang, icc don't need any of the workarounds
[04:25:11] <aatch> Yeah, I'm tempted to drop it for the thing I'm working on at work and just do what rust has and have a hand-written configure script
[04:25:14] <aatch> It
[04:25:50] <aatch> It's not like it helped with the "ld is different on OSX and Linux" problem I had
[04:26:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:26:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/c9kwEw
[04:26:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:26:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:26:12] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/E-I_rw
[04:26:12] <strcat> aatch: well I think you can use gold/bfd on OS X ;p
[04:26:12] <ghrust> 13rust/06auto 147c14a03 15Alex Crichton: Add pop() and swap() to the Map trait
[04:26:12] <ghrust> 13rust/06auto 14acc2f6e 15bors: auto merge of #6236 : alexcrichton/rust/more-map-methods, r=thestinger...
[04:26:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:26:16] <strcat> just not there by default
[04:26:34] <aatch> strcat, I just ended up using the compiler to link
[04:26:36] <strcat> hopefully lld can end that for rust
[04:26:49] <strcat> can just have a linker ship with rust on every platform
[04:26:52] <strcat> same flags everywhere.
[04:27:15] <strcat> http://lld.llvm.org/
[04:27:42] <strcat> (well one day I hope rust can use the system LLVM anyway ;p)
[04:27:52] <strcat> if it's new enough
[04:28:18] <aatch> lld seems to have been at the same stage of development for the entire time I've known about it
[04:28:24] <steven_is_false> Strange, so in http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html it is mentioned that W. Kahan proposed presubstitution instead of trap handlers. This is basically conditions right?
[04:28:47] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Ping timeout)
[04:28:57] <strcat> aatch: I'm happy that libc++ is mature now...
[04:28:59] <aatch> presubstitution?
[04:29:08] <strcat> clang/libc++ is an 100% complete C++11 implementation 
[04:29:25] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[04:29:27] <aatch> strcat, nice
[04:29:27] <strcat> libstdc++ doesn't even have regex or threads
[04:29:53] <aatch> lack of regex is fairly meh-worthy, but no threads? Eep
[04:30:03] <strcat> aatch: well no C++11 threads
[04:30:07] <steven_is_false> aatch: AFAIK, one would do something like save_state (); presubstite (ZERO_DIV, 1);  y = sin (x)/x; restore_state ();
[04:30:09] <aatch> Thats like one of the big C++11 things
[04:30:09] <strcat> and it's a really nice API
[04:30:29] <aatch> Along with type inference and lambdas
[04:30:41] <aatch> "type inference"
[04:31:04] * strcat likes static_assert a lot
[04:31:07] <strcat> since you can put it everywhere
[04:31:16] <strcat> inside a templated struct to add restrictions, etc.
[04:31:43] <Sodel_the_V> .quit
[04:31:45] <strcat> essentially like trait bounds in rust, manually ;p
[04:31:45] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[04:32:14] <steven_is_false> Oh know! Sodel_the_V must have wandered into a dark area!
[04:34:29] <steven_is_false> Oops, I meant no not know.
[04:35:42] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:35:55] <pcwalton> nmatsakis: borrow recording isn't working for me
[04:36:07] <pcwalton> it just says "borrowed" despite the fact that optimization is off and I uncommented DEBUG_BORROW
[04:36:10] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:36:16] <pcwalton> it's when compiling stage2 core if that helps
[04:36:24] *** strcat1 is now known as strcat
[04:36:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:37:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:40:07] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:40:40] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[04:40:50] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[04:55:30] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[04:58:22] *** Quits: igl (igl@moz-FDC3B0AE.adsl.alicedsl.de) (Ping timeout)
[04:58:35] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[04:59:30] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[04:59:40] *** Joins: igl (igl@moz-4EA55111.adsl.alicedsl.de)
[04:59:56] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:00:27] <strcat> acrichto: aw my least favourite test failed
[05:00:35] <strcat> acrichto: there's a stupid test using the Map trait :(
[05:01:04] *** Joins: Cromulent (Cromulent@moz-5111C23B.cable.virginmedia.com)
[05:02:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:02:10] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14acc2f6e to 14d2f0235: 02http://git.io/N3iJvQ
[05:02:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:02:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:02:12] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QELPNg
[05:02:12] <ghrust> 13rust/06auto 143d526d1 15Daniel Micay: add task-local reference counted smart pointers...
[05:02:12] <ghrust> 13rust/06auto 14bf748e5 15bors: auto merge of #6241 : thestinger/rust/rc, r=pcwalton...
[05:02:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:04:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:04:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:05:44] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:06:15] *** Joins: cc (cc@moz-9962C9F4.rev.numericable.fr)
[05:06:24] *** Quits: arete (arete@moz-CC2E6F16.new.xen.prgmr.com) (Ping timeout)
[05:08:56] *** Joins: arete (arete@moz-CC2E6F16.new.xen.prgmr.com)
[05:09:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:09:37] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:11:48] *** Quits: sp3d (a@moz-17CB39F1.fidnet.com) (Ping timeout)
[05:12:40] <acrichto> strcat: oh arg I thought I had updated that
[05:17:08] *** Joins: Api (Mibbit@moz-8C235B50.residential.rdsnet.ro)
[05:17:24] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[05:17:47] <acrichto> strcat: just updated the pull request
[05:21:03] <strcat> acrichto: hmm, I don't see the new commit at https://github.com/mozilla/rust/pull/6236
[05:21:12] <strcat> (or a rebase)
[05:21:37] *** Quits: cc (cc@moz-9962C9F4.rev.numericable.fr) (Quit: cc)
[05:22:23] <acrichto> oh hmm I got the branches mixed up, should be there now
[05:22:43] <strcat> there we go :)
[05:22:49] <strcat> acrichto: I've had a dozen pull requests fail on that test ;p
[05:23:13] <acrichto> I can imagine... it should probably just define its own Map trait and do that in the test
[05:25:04] <strcat> or we could just get rid of it
[05:25:12] <strcat> iterator.rs is even more parameterized
[05:25:31] <strcat> (and exposes bugs in generics not caught by that test ;p)
[05:26:50] <bjz> rusti: fn test() -> int { static A: int = 1; A } test()
[05:26:52] <rusti> 1
[05:31:24] <Api> Hey, is there any video on the internet which shows you how to install (better said make) the Rust compiler? One of my friends does not understands my instructions,nor the ones from the main page :(
[05:32:43] <ssbr> Api: send your friend a shell script that runs all the installation steps :p
[05:33:12] <ssbr> it's just three commands. "./configure && make && sudo make install"
[05:33:15] <ssbr> same as any unix program
[05:33:55] <ssbr> (or maybe six: wget ... && tar xf rust-* && cd rust-* && ...)
[05:34:09] <ssbr> (replace * with whatever it is)
[05:34:20] <brson> Api: i don't think there is a video. it would be a nice thing to point people to
[05:34:29] <Api> Thank you :D. that might work
[05:34:49] <Api> By the way, I might make a video because a lot of people had this problem
[05:36:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:36:25] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:36:30] <Api> Yep, worked
[05:36:32] <Api> thanks again
[05:36:48] *** zz_kimundi is now known as kimundi
[05:41:20] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[05:47:02] <doomlord> are rust macros considered 'hygenic'
[05:49:55] *** Quits: Cromulent (Cromulent@moz-5111C23B.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[05:50:16] <thomaslee> doomlord lol define 'hygenic'? :)
[05:51:34] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:52:02] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Ping timeout)
[05:52:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:53:44] <Api> Hygienic macros are macros whose expansion is guaranteed not to cause the accidental capture of identifiers,as far as I know?
[05:54:26] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[05:54:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:54:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:55:03] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[05:56:09] *** Quits: philix (philix@moz-451739D3.user.veloxzone.com.br) (Quit: philix)
[05:56:42] <Api> Doomlord, you should read this post: http://paul-rusts.tumblr.com/post/9748321615/macros-in-rust
[05:57:12] <thomaslee> haha my ignorance is showing :)
[06:05:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:05:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/QELPNg
[06:05:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:07:27] *** Joins: xazax (Mibbit@6655692F.3B222813.3F580572.IP)
[06:08:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:08:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kuO1Qg
[06:08:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:11:40] *** Joins: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP)
[06:11:41] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[06:16:12] *** Joins: jensnockert (jensnocker@moz-152B7DE6.mobileonline.telia.com)
[06:19:38] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: computer sleeping)
[06:21:56] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[06:22:39] <doomlord> they're less destructive than C macros because they work on the AST, at least?
[06:23:38] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[06:24:23] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[06:24:36] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:26:27] <strcat> doomlord: afaik jclements plans on implementing hygiene
[06:26:45] <strcat> and they have scope now
[06:30:39] <acrichto> strcat: no luck on something like MapUtil, I'm getting things like https://gist.github.com/alexcrichton/5530606
[06:30:52] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[06:31:15] <strcat> acrichto: doesn't that just mean you have to remove the hashmap impl?
[06:31:34] <acrichto> it's not on hashmap any more, that's the MapUtil and HashSet 'insert' functions colliding
[06:31:39] <acrichto> I'm not even sure how that's happening...
[06:31:44] <strcat> ah. that's weird
[06:36:05] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[06:36:34] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:36:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:38:22] *** Quits: jensnockert (jensnocker@moz-152B7DE6.mobileonline.telia.com) (Input/output error)
[06:38:49] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[06:39:04] <ssbr> ugh
[06:39:30] <ssbr> so apparently dwarf can't possibly encode the expansion information of macros?
[06:39:46] <ssbr> I wonder how one would write a decent macro-aware debugger for rust. From scratch?
[06:40:39] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:41:09] *** Joins: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP)
[06:50:20] *** Quits: xazax (Mibbit@6655692F.3B222813.3F580572.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:51:59] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:52:13] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[06:53:22] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[06:53:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:56:55] *** Quits: brson (brson@E02A6CDD.75598729.B6A3AE99.IP) (Quit: leaving)
[06:59:50] <Ralith> ssbr: why do you say it can't possibly encode that?
[07:00:00] <Ralith> what would 'encoding' it entail to you?
[07:02:04] <ssbr> Ralith: there's no way to write it that gdb understands
[07:02:17] <Ralith> that doesn't really answer my question
[07:02:19] <ssbr> and there's no way to write it that any reader of dwarf metadata understands
[07:02:46] <ssbr> Ralith: there's no mechanism for specifying that parts of the AST were generated from a macro, AIUI
[07:02:53] <ssbr> I don't see what's unclear about it :(
[07:03:36] <Ralith> ssbr: clang does fine with cpp, iirc.
[07:03:55] <ssbr> one would ideally want information in the debug data that lets you see "foo!(a, bar!())" and expand that to "mod a {bar!()}" and then to "mod a{static a : uint = 3;}"
[07:04:07] <ssbr> Ralith: in what way?
[07:04:16] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[07:04:39] <Ralith> ssbr: in the 'generates good debug info for code involving macros' way
[07:04:43] <Ralith> I may be misremembering; experiment
[07:05:42] <ssbr> I will.
[07:14:46] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[07:14:53] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[07:17:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:17:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/lOR_7A
[07:17:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:17:45] *** Quits: sdh_ (sdh@BCD0EF3B.8A554927.FD6A0EFF.IP) (Ping timeout)
[07:18:08] *** Joins: Palmik (palmik@moz-8E37FC85.vpn.muni.cz)
[07:19:09] *** Joins: sdh_ (sdh@BCD0EF3B.8A554927.FD6A0EFF.IP)
[07:19:59] *** Joins: sp3d (a@moz-17CB39F1.fidnet.com)
[07:20:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:20:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kzLzlg
[07:20:10] <ghrust> 13rust/06auto 14cb918e1 15Jeong YunWon: Allow non-literal static range pattern for match arms...
[07:20:10] <ghrust> 13rust/06auto 147b2020f 15bors: auto merge of #6245 : youknowone/rust/match-range-static, r=graydon...
[07:20:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:20:13] *** Joins: jensnockert (jensnocker@moz-5807D9D3.wireless.lu.se)
[07:21:24] *** Joins: wunki (wunki@moz-7300E3D6.ip.prioritytelecom.net)
[07:22:42] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Input/output error)
[07:24:33] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:26:40] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[07:30:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:35:54] *** Joins: pyrac (pyrac@19E86D0A.73C89388.AD05C589.IP)
[07:36:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:37:37] *** Quits: heftig (heftig@moz-3074EE02.dip0.t-ipconnect.de) (Ping timeout)
[07:39:20] *** Joins: heftig (heftig@moz-ED63EB3D.dip0.t-ipconnect.de)
[07:43:24] *** Quits: rroels (rroels@moz-57D4C308.vub.ac.be) (Quit: WeeChat 0.3.8)
[07:46:41] *** Joins: boggle (boggle@moz-4E2FA529.dip0.t-ipconnect.de)
[07:48:45] <bjz> jensnockert: beep
[07:52:27] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:52:33] *** Quits: flipcoder (flipcoder@moz-EE3A28B2.dhcp.rvsd.ca.charter.com) (Client exited)
[07:55:50] <bjz> jensnockert: could you check this for me? https://gist.github.com/bjz/ea210efe72b82134c4f2
[07:56:32] <jensnockert> Of course! But I have a presentation in 20 minutes, so I'll do it after that.
[07:56:37] <bjz> yikes
[07:56:41] <bjz> good luck sir!
[07:56:57] <jensnockert> Nah, it will be fine.
[07:57:07] <bjz> oh, I mean, break a leg!
[07:57:26] <aatch> bjz, that's awfully violent of you
[07:57:33] <bjz> *snap*
[07:58:02] <bjz> aatch: but it's jensnockert that's gonna do the leg-breaking, not I
[07:58:14] <aatch> bjz, fair enough
[07:58:35] * jensnockert hugs aatch and bjz.
[07:58:53] * aatch squirms
[07:59:10] <bjz> x]
[08:00:08] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:00:21] *** Quits: jensnockert (jensnocker@moz-5807D9D3.wireless.lu.se) (Input/output error)
[08:09:36] *** Joins: jensnockert (jensnocker@moz-5807D9D3.wireless.lu.se)
[08:10:30] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[08:11:02] *** Quits: boggle (boggle@moz-4E2FA529.dip0.t-ipconnect.de) (Ping timeout)
[08:11:27] <ssbr> blargh. Is there a way to do something like "Base | (Case(c) if pred(c)) => foo()" in a pattern match?
[08:12:09] <aatch> ssbr, nope sorry
[08:12:26] <ssbr> Might that ever exist, or am I being silly for some reason or another?
[08:12:45] <ssbr> also thanks :)
[08:13:08] <aatch> ssbr, I'm not sure. I don't see immediately why it wouldn't, from a technical perspective
[08:13:18] *** Joins: boggle (boggle@moz-5FED67F0.dip0.t-ipconnect.de)
[08:13:35] <aatch> but it could over-complicate the grammar or compiler or something without much return
[08:14:33] <ssbr> That makes sense. I dunno, assertions in pattern matches get in the way of the elegance of the algorithm. But since rust already allows for those at the top level, I guess that's already somewhat a non-issue
[08:14:34] <bjz> you'll just have to do: Base => foo(), Case(c) if pred(c) => foo().... :(
[08:14:50] *** Quits: sdh_ (sdh@BCD0EF3B.8A554927.FD6A0EFF.IP) (Quit: Konversation terminated!)
[08:14:52] <ssbr> bjz: yeah, I'm not really sure what good code should look like
[08:14:59] *** Joins: sdh_ (sdh@8557E3E0.AAC4A127.9105FBCF.IP)
[08:15:18] <ssbr> currently I have it copy-pasted. I could write a stack closure inside the function and reuse that
[08:15:19] *** Parts: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Killing koopas in another castle)
[08:15:36] <ssbr> I'll probably do so if I end up needing more cases where this happens (likely)
[08:16:57] <bjz> ssbr: `Base => foo(), Case(c) if pred(c) => foo()` is more readable anyway
[08:17:16] <bjz> ssbr: plus it basically short-circuits anyway
[08:17:20] *** Joins: dbaupp (Thunderbir@moz-69CA0BDA.lns20.syd6.internode.on.net)
[08:18:32] <ssbr> I don't even know what the code should be. One possibility is: Any | Case(_) if sp > input.len() => break; Any => foo(); Case(c) if c == input[sp] => foo(); Case(_) => break
[08:18:43] <ssbr> that's if I unwrap all the ifs to be at the level of the pattern match
[08:19:45] <ssbr> currently it's Any => if sp > input.len() ... Case(c) => if sp > input.len() && c == input[sp] ...
[08:19:55] <ssbr> It isn't really important
[08:20:34] <aatch> ssbr, remember that you can do #[deriving(Eq)] on enums and just use regular ifs if it's a simple case
[08:20:48] <dbaupp> aatch: https://github.com/huonw/rust/commit/565e946b344d65e7318163c52481046f9dfb6e0e
[08:21:09] <ssbr> aatch: nah, I'm dispatching on half a dozen things
[08:21:40] <dbaupp> aatch: `writef!(io::stdout(), "%<4>d %<3>d %{0}<2>d", 23i, 10i, 7i);` prints `113 101 10111`
[08:21:54] *** Quits: sdh_ (sdh@8557E3E0.AAC4A127.9105FBCF.IP) (Ping timeout)
[08:22:04] <aatch> dbaupp, :D
[08:22:14] <ssbr_> aatch: http://codepad.org/Vg6H7B4x
[08:22:45] <dbaupp> aatch: I tried to do a pull request to Aatch/rust/new-fmt, but github wouldn't let me :(
[08:23:11] <aatch> dbaupp, I'll just pull from your repo locally
[08:23:12] <ssbr_> it's a pretty literal transcription of code in C right now, I guess.
[08:23:20] <dbaupp> aatch: yup sure
[08:24:08] <dbaupp> aatch: my goal (but I'm happy to change) is to have as much logic as possible in core::fmt, and just have writef call the functions and construct the AST
[08:24:16] <dbaupp> is that reasonable?
[08:24:28] <aatch> dbaupp, yep
[08:25:24] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:25:45] <dbaupp> ssbr: is the copy required to compile?
[08:26:07] <aatch> Especially since I think there we a few comments in fmt.rs along the lines of "move more of this logic into core::unstable::extfmt
[08:26:09] *** Quits: jgilbert (jgilbert@moz-E7782931.hsd1.ca.comcast.net) (Ping timeout)
[08:26:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:26:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/kzLzlg
[08:26:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:26:34] <dbaupp> aatch: yep
[08:26:54] <dbaupp> I was thinking having a static list of structs of "specifier specifiers"
[08:27:10] <dbaupp> (like I've got in the top of printf)
[08:27:36] <dbaupp> which included functions to valid the num-arg, and the width/precision arguments etc.
[08:27:41] <dbaupp> *validate
[08:27:46] <ssbr> dbaupp: yes, although I forget the exact error message
[08:27:50] <dbaupp> so that errors get caught at compile time
[08:28:08] <ssbr> I wanted it to copy anyway, I just assume Rust didn't know that I wanted that. Or something.
[08:28:10] <aatch> dbaupp, makes sense
[08:28:12] <ssbr> it's a small thing.
[08:28:42] <dbaupp> ssbr: ok :)
[08:29:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:29:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OtogkA
[08:29:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:29:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:29:12] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/1FTQVg
[08:29:12] <ghrust> 13rust/06auto 1458c0df2 15Daniel Micay: add #[non_owned] and #[mutable] attributes
[08:29:12] <ghrust> 13rust/06auto 1466842c8 15Daniel Micay: mark Cell as non-Const with #[mutable]
[08:29:12] <ghrust> 13rust/06auto 14bc52224 15Daniel Micay: factor out the has_attr checks
[08:29:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:30:55] <ssbr> is there a shorter way of writing "let mut x = 0; foo(&mut x)"?
[08:31:10] <aatch> ssbr, &mut 0 ?
[08:31:15] <aatch> rusti: &mut 1
[08:31:17] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/TUJX
[08:31:33] <aatch> ssbr, nope
[08:31:43] <ssbr_> haha, OK. :)
[08:31:43] <aatch> but that actually makes sense
[08:32:01] <bjz> ssbr: I find that's a common pattern actually
[08:32:19] <aatch> rusti: &5
[08:32:21] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SIJE
[08:32:27] <ssbr_> it does? I thought that "foo(&0)" allocated a space for 0 on the stack. One would assume that "&mut 0" would allocate mutable space on the stack
[08:32:31] <bjz> ssbr: been trying to figure out wheter there's a better way for a while now
[08:32:40] <ssbr_> oh what
[08:32:49] <ssbr_> I must've been reading outdated/misleading things then
[08:33:14] <dbaupp> rusti: println(fmt!("%?", &5))
[08:33:15] <rusti> &5
[08:33:57] <aatch> rusti: println(fmt!("%?", &mut 5))
[08:33:59] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SEGa
[08:34:00] <ssbr_> or, I guess I misinterpreted chapter 3 of http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[08:34:27] <ssbr_> rusti: let foo = &5; *foo
[08:34:28] <rusti> 5
[08:34:32] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:34:36] <ssbr_> so I can do that, but I can't do bar(&5) ?
[08:35:08] <dbaupp> rusti: fn f(a: &int) { println(fmt!("%?", a)) } f(&5)
[08:35:12] <ssbr_> oh, I see, no, you had rusti return &5
[08:35:18] <ssbr_> which is wrong
[08:36:00] <ssbr_> anyway yeah, since &5 says "allocate space for an int and give me a pointer to that space", I woulda sorta figured that "&mut 5" would say "allocate mutable space for an int and give me a mutable pointer to that space", or whatever
[08:36:15] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:36:28] <ssbr_> dbaupp: what did you do?!~
[08:37:19] <dbaupp> ssbr_: whoops
[08:38:02] *** Quits: dbaupp (Thunderbir@moz-69CA0BDA.lns20.syd6.internode.on.net) (Quit: dbaupp)
[08:39:24] <ssbr_> haha, yikes :(
[08:40:00] *** Joins: dbaupp (Thunderbir@moz-69CA0BDA.lns20.syd6.internode.on.net)
[08:40:14] <aatch> dbaupp, there was already a write_repr? That makes life easier!
[08:40:43] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[08:40:48] <sanxiyn> r? https://github.com/mozilla/rust/pull/6297
[08:41:25] <dbaupp> aatch: yeah, I did some digging and turned it up
[08:41:42] <dbaupp> (I didn't have to dig very far :P )
[08:41:54] <sanxiyn> (This makes a static variable lint_table so that one can refer to it somewhere else)
[08:42:20] *** Joins: sdh_ (sdh@8557E3E0.AAC4A127.9105FBCF.IP)
[08:42:26] <sanxiyn> &'static [(&'static str, LintSpec)] // This works!
[08:44:04] <aatch> dbaupp, any reason to not use to_str_bytes_common()?
[08:44:42] <aatch> (or to_str_common())
[08:44:56] <dbaupp> aatch: for which?
[08:45:06] <aatch> number conversion.
[08:45:28] <dbaupp> oh, probably not, other than the to_str_radix were easier
[08:45:43] <aatch> dbaupp, though that would be the reason lol
[08:45:49] <dbaupp> do the to_str_common traits work better?
[08:46:27] <aatch> dbaupp, dunno, but I'm fairly sure the current system uses it for the number conversion.
[08:47:27] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[08:47:59] <dbaupp> aatch: also, other thoughts I had... how do we do %e? %g? %X? (and what about %n?)
[08:48:30] <aatch> dbaupp, what are they, I assume %e is exponential?
[08:48:40] <aatch> so 10e10 style
[08:48:53] <dbaupp> also, do we want writef! to return the number of characters/bytes written?
[08:49:06] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[08:49:14] *** Joins: fabiand (fabiand@moz-53800E1C.adsl.alicedsl.de)
[08:49:22] <aatch> dbaupp, hmm, probably a good idea to
[08:49:30] <dbaupp> aatch: yes, %e is that, %g chooses between %f and %e depending on the size of the argument (I think), and %X is capitilised hex
[08:49:45] <dbaupp> (why is capitalised so hard to spell? :P )
[08:50:05] <dbaupp> and %n puts the current number of bytes written into the (pointer) argument at that position
[08:50:34] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:50:40] <aatch> dbaupp, well we could make them flags. so %ef would be 1.431e-4 format
[08:50:44] <dbaupp> aatch: we could do %e and %g via newtype structs
[08:50:46] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[08:51:27] <dbaupp> i.e. writef!(stdout, "%f", FloatE(x)) == printf("%e", x)
[08:51:42] <dbaupp> aatch: hm
[08:51:46] <dbaupp> aatch: that might work
[08:52:19] <aatch> dbaupp, one issue is that with precision and width in there is becomes '%e[1].[10]f'
[08:52:29] <aatch> which may be a little too non-obvious
[08:52:31] <dbaupp> aatch: it would require more logic though
[08:53:09] <aatch> dbaupp, I like your newtype struct idea though
[08:53:15] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:53:17] <dbaupp> aatch: ah, yes... would it be possible to have flags in any order i.e. %[1].[10]ef is also valid (but %[1]e.[10]f isn't)
[08:53:51] <dbaupp> rusti: println(~"ss"+"br: I'm not dead yet")
[08:53:52] <rusti> ssbr: I'm not dead yet
[08:54:17] <sanxiyn> rusti: println("rusti: 1")
[08:54:18] <rusti> rusti: 1
[08:54:35] <dbaupp> aatch: would that the newtype struct thing be too heavyweight?
[08:54:49] <dbaupp> sanxiyn: rusti ignores itself... ;(
[08:54:58] <sanxiyn> Yeah, as it should
[08:55:09] <aatch> dbaupp, I'm not sure. I don't think there should be any overhead
[08:55:19] <dbaupp> aatch: I meant for programmers
[08:55:39] <aatch> dbaupp, oh right. I guess so
[08:55:56] <aatch> I'll look into arbitrary order flags.
[08:55:57] <dbaupp> aatch: anyway... I'm going to be bad and do that eating thing again :P bbl
[08:56:09] <ssbr> dbaupp: heh :)
[08:56:11] *** Joins: z0w0 (zack@moz-69F8D0D5.lnse3.cha.bigpond.net.au)
[08:56:12] <aatch> I'm thinking of making the whole parser a little more flexible
[08:56:19] <kimundi> ssbr: ping
[08:58:21] <ssbr_> kimundi: pong
[08:58:23] <ssbr_> also yuck
[08:58:24] *** Quits: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com) (Ping timeout)
[08:58:39] <ssbr_> the difference between "let ~x = a;" and "let x = *a;" is confusing
[08:58:57] <kimundi> ssbr: Would it make sense to think of the 'match shortest', 'match longest', 'match pcre' as different re engines?
[08:58:59] <aatch> ssbr_, ah. That.
[08:59:10] <ssbr_> consider this code: http://bpaste.net/show/GIGoFncGXHw87JsZCsEM/
[08:59:20] <ssbr_> it works if you replace "let ~x = a" with "let x = *a"
[08:59:24] <ssbr_> because of reasons, I guess
[09:00:22] <ssbr_> and similar things to this, where I want to copy the value pointed to by an owned pointer without taking ownership, but rust isn't getting me, or something
[09:00:43] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:00:44] <ssbr_> kimundi: mmmm
[09:01:07] <ssbr_> kimundi: it certainly would make sense, from an API perspective, I suppose.
[09:01:15] *** Quits: dbaupp (Thunderbir@moz-69CA0BDA.lns20.syd6.internode.on.net) (Ping timeout)
[09:01:29] <ssbr_> behind the scenes I think I just replace the way threads are sorted, for the Thompson style approach
[09:01:56] <ssbr_> oh wait, simpler than that even. I just don't care at all about thread ordering.
[09:02:00] <kimundi> ssbr: thinking of sth like re!("re", re::Shortest, [re::Dotall, re::Multiline])
[09:02:03] <ssbr_> (if I'm doing shortest/longest)
[09:02:55] <kimundi> so, regular expression, optional engine, optional flags
[09:03:15] <ssbr_> kimundi: well, is there a reason it can't be an option, so that it's re!("re", [re::Dotall, re::Multiline, re::MatchType(re::Shortest)]_ ?
[09:03:30] <ssbr_> I'd assume even selection of engine would end up being an option
[09:03:39] <ssbr_> so if you want backtracking search you specify that in the options maybe
[09:03:55] <ssbr_> unless it's desirable to separate the options sent to e.g. the compiler vs to whatever this is
[09:04:06] <ssbr_> parser/compiler/etc.
[09:04:18] <kimundi> Mainly thinking of being able to plugin an own engine for runtime
[09:04:35] *** Joins: dbaupp (Thunderbir@moz-A13D933B.lns20.syd6.internode.on.net)
[09:04:44] <bjz> jensnockert: pop
[09:04:53] <ssbr_> kimundi: there's so many different places to plug yourself, is a thing
[09:05:24] <ssbr_> string -> lexed string -> AST -> bytecode -> result
[09:05:32] <ssbr_> one might want to insert themselves at any one of the arrows
[09:05:35] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[09:05:58] <ssbr_> although if you insert yourself at AST -> bytecode, you almost certainly want to replace the interpreter as well
[09:06:22] <ssbr_> I guess there's even a bytecode -> bytecode peephole optimization step possibly, but who cares about that
[09:06:48] *** Quits: Api (Mibbit@moz-8C235B50.residential.rdsnet.ro) (Quit: http://www.mibbit.com ajax IRC Client)
[09:06:51] <ssbr_> but yes, plugging engines is good
[09:06:53] <aatch> ssbr_, not many people, but they are obnoxious about it.
[09:07:25] <kimundi> ssbr_: He, I guess you have thougt about that jore than I :-) 
[09:07:43] <ssbr_> kimundi: I really haven't thought about it much
[09:07:47] <sanxiyn> ssbr: Regular expression?
[09:07:48] <ssbr_> I know what I want, but not what I'd do to get it
[09:07:51] <ssbr_> sanxiyn: yep
[09:08:20] <ssbr_> like for example, I know I want to be able to insert myself after lexing so that I can disable features of regexps, for a regexp web app
[09:09:08] <ssbr_> right now, this can't happen at compile-time though, which is a little weird as far as the API goes
[09:09:11] <ssbr_> hmm
[09:09:34] <ssbr_> kimundi: what I was going to do for now, anyway, was define public functions for every step of the pipeline, but not give the main regexp function any way to customize
[09:09:43] <ssbr_> kimundi: which is to say, I was gonna punt the issue and not care about it
[09:09:51] <ssbr_> so don't think I've thought about it much :P
[09:10:20] <kimundi> ssbr_: So the way I imagined it is each Engine would implement a trait that describes an api for runtime compilation of an re.
[09:11:33] <ssbr_> kimundi: that sounds reasonable
[09:12:07] <kimundi> ssbr_: The build in engines would simply be special cased in the re! macro to optionelly do the work at compiletime
[09:12:15] <ssbr_> I don't know traits that way. I'm thinking it'd have two methods, one from RegexAST -> T, and one from (T, str) -> Result
[09:12:20] <ssbr_> that well*
[09:12:28] <ssbr_> where T is some engine-specific internal representation
[09:12:41] <ssbr_> kimundi: that sounds reasonable to me
[09:13:20] <ssbr_> at least until we can do dynamic loading and stuff like that, I don't think we can do any better, can we?
[09:13:32] <kimundi> ssbr_: T would just be Self in a trait
[09:13:47] <ssbr_> kimundi: oh, of course, that makes sense
[09:15:11] *** Joins: berak (chatzilla@90C28A03.4742BCFA.1A5CC7E5.IP)
[09:15:15] <kimundi> ssbr_: compile(RegexAst) -> Self
[09:15:57] * sanxiyn looked at PyPy's regular expression engine which is quite cool
[09:16:11] <sanxiyn> It beats CPython by using JIT
[09:16:52] <ssbr_> it's also, shockingly, even harder to read than Python's regexp implementation
[09:17:02] <ssbr_> which is well known for being impossible to read
[09:17:11] <kimundi> And fn match(&self, input : &str) -> RegexMatch or sth
[09:17:26] <jdm> ssbr_: so the dwarf 4 spec contains references to macro expansion
[09:17:30] <sanxiyn> ssbr: Is sre that hard to read?
[09:17:55] <jdm> ssbr_: see section 6.3
[09:17:57] <sanxiyn> (I know using preprocessor macro to be generic to byte/char is hurting CPython)
[09:18:00] *** Parts: berak (chatzilla@90C28A03.4742BCFA.1A5CC7E5.IP) ()
[09:18:26] <ssbr_> sanxiyn: I didn't try that hard, honestly :P
[09:18:36] <jdm> that being said, I have no idea whether gdb understands it, or whether LLVM produces it
[09:18:43] <ssbr_> it's not impossible. One person I know took it upon himself to fix it up.
[09:18:54] <ssbr_> and is writing the replacement re module for python 3.4 or 3.5 or something
[09:19:07] <sanxiyn> ssbr: Very cool
[09:19:20] <ssbr_> What should I be doing here? I don't actually understand what the error means, so just adding "copy" is ridiculous: http://bpaste.net/show/lIxcgpUi9OILnLoaWX5Z/
[09:20:02] <jdm> also section 7.22
[09:20:11] <ssbr_> the variant Repeat is `Repeat(bool, uint, Option<uint>, ~Regex)`, so `sub` should be of type "Regex", so I don't understand why rust would give me flak for using it
[09:20:56] *** Quits: dbaupp (Thunderbir@moz-A13D933B.lns20.syd6.internode.on.net) (Ping timeout)
[09:20:56] <nmatsakis> ssbr_: you are probably not using borowing correctly
[09:20:56] <ssbr_> surely sub is data on the stack that I own?
[09:20:59] <aatch> What is the type of _compile?
[09:21:03] <nmatsakis> ssbr_: in general.
[09:21:14] <sanxiyn> Hm I never used ~pat
[09:21:26] <nmatsakis> ssbr_: the type of _compile() is (I assume): _compile(Re, bytecode)
[09:21:27] <ssbr_> aatch: fn _compile(regex: ast::Regex, bytecode: &mut ~[vm::Bytecode]) -> ()
[09:21:41] <nmatsakis> ssbr_: but it should be fn_compile(regex: &ast::Regex, bytecode: &mut...)
[09:21:52] <nmatsakis> ssbr_: because you don't need to own the regex, just use it.
[09:22:12] <nmatsakis> ssbr_: the error it's giving you is because you are giving away the regex sub to _compile,
[09:22:16] <nmatsakis> ssbr_: but you're doing so in a loop,
[09:22:22] <ssbr_> nmatsakis: OK, there's something in rust I'm not getting, then
[09:22:22] <nmatsakis> ssbr_: so you'd wind up giving it away multiple times, which is an error
[09:22:26] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[09:22:34] <nmatsakis> ssbr_: in general, ~ values are "owned', meaning that they move from place to place
[09:22:43] <ssbr_> I assumed that non-pointer values in rust had the same semantics as C: you pass by value (copy), and it's fine to use them that way
[09:22:43] <nmatsakis> ssbr_: this is for many reasons, but among them that they are expensive to copy
[09:22:49] <nmatsakis> ssbr_: they do, and it is
[09:22:51] <sanxiyn> nmatsakis: I think ssbr's point is that sub is not ~ at all
[09:22:55] <ssbr_> nmatsakis: but not here
[09:23:02] <nmatsakis> ssbr_: what is the type ast::Regex?
[09:23:07] <nmatsakis> ssbr_: it probably contains ~[] pointers, for example
[09:23:14] <sanxiyn> Ah right
[09:23:15] <ssbr_> ahhhhhhhhhh
[09:23:16] <ssbr_> yes, it does
[09:23:18] <ssbr_> that makes sense
[09:23:23] <kimundi> ssbr_: Taking it by something different than & means moving it
[09:23:35] <aatch> therefore, not trivially copyable
[09:23:38] <nmatsakis> ssbr_: what you probably want is: ast::Repeat(greedy, min, None, ~ref sub)
[09:23:38] <sanxiyn> ssbr: Type's kind? (owned, etc.) is determined by type's entire contents
[09:23:51] <ssbr_> nmatsakis: what's ~ref ?
[09:23:57] <nmatsakis> ssbr_: well, ~P is a pattern
[09:24:09] <nmatsakis> ssbr_: but one kind of pattern is `ref x`---that is a borrowed binding
[09:24:16] <nmatsakis> ssbr_: basically the pattern equivalent of &x
[09:24:20] <nmatsakis> that is, taking the address
[09:24:28] <nmatsakis> the thing is that `&P` is a pattern for matching a borrowed pointer
[09:24:36] *** Joins: dbaupp (Thunderbir@moz-C577CE44.lns20.syd6.internode.on.net)
[09:24:36] <nmatsakis> anyway, you could write `~ref sub`
[09:24:39] <ssbr_> OK, so let ref x = y is the same as let x = &y?
[09:24:45] <nmatsakis> or else write `sub` and then write `&**sub` to borow it
[09:24:50] <bjz> sanxiyn: how does one create a denormalized floating point number?
[09:24:58] <nmatsakis> ssbr_: yes, though I think there are some outstanding bugs preventing `let ref x = y` from working
[09:25:01] <nmatsakis> ssbr_: but it shuld be the same
[09:25:36] <nmatsakis> ssbr_: oops, sorry, I meant either "~ref sub" or else "ref sub"/"&**sub"
[09:25:52] <nmatsakis> ssbr_: you always need a ref, because otherwise it will attempt to move the Regex out of its container
[09:26:00] <ssbr_> right
[09:26:00] <nmatsakis> ssbr_: that is, otherwise it's a by-move binding
[09:26:09] <ssbr_> OK, that's neat
[09:26:21] <ssbr_> and importantly, it means I don't need to own the regex I'm compiling
[09:26:43] <nmatsakis> yes
[09:26:53] <ssbr_> I think I understand :)
[09:27:01] <ssbr_> thank you
[09:27:04] <nmatsakis> np
[09:27:11] <aatch> I generally find that if I'm writing something that takes a ~, I'm doing something wrong
[09:27:15] <bjz> sanxiyn: I'm trying to unit test this: https://gist.github.com/bjz/ea210efe72b82134c4f2
[09:27:26] <aatch> With a few exceptions
[09:27:30] <bjz> sanxiyn: dunnp if I have it correct
[09:27:32] <sanxiyn> bjz: I think you get that by raising to large negative power
[09:27:33] <bjz> *dunno
[09:27:33] <nmatsakis> aatch: yes, typically, unless you plan to send it to another task or something like that
[09:27:57] <nmatsakis> (or store it into a field, maybe)
[09:28:00] <sanxiyn> bjz: That is, slightly above floating point's max exponent
[09:28:01] <sanxiyn> Dinner
[09:28:08] <bjz> ok
[09:28:17] <nmatsakis> hmm pcwalton had problems with the new borrow recording...
[09:28:22] <aatch> nmatsakis, the one case I have so far, is that I needed to return a new string which /could/ be the original string
[09:28:38] <nmatsakis> aatch: ah, yes, returning ~ pointers happens more frequently, particularly ~str and ~[]
[09:28:56] <nmatsakis> aatch: since you can't return a string or vec on the stack
[09:29:04] <aatch> so the function was fn (~str) -> ~str
[09:29:44] <aatch> I've yet to use @ either.
[09:29:56] <aatch> Except for @Writer, but that wasn't really a choice
[09:30:12] *** Joins: rroels (rroels@moz-57D4C308.vub.ac.be)
[09:30:40] <pepijndevos> You know what would be amazing? Rust on the LEGO EV3
[09:31:06] <bjz> :P
[09:33:40] <thiez> nice, did the compiler get better since yesterday?
[09:33:47] <aatch> thiez, yes
[09:34:14] <ssbr_> What would be amazing: rustc --dtypes
[09:34:23] <thiez> it just produced a faster binary :D
[09:34:25] <aatch> --dtypes?
[09:35:05] <ssbr_> aatch: the ocaml compiler has a -dtypes option which spits out a file with type information for every variable in the source code
[09:35:09] <ssbr_> which IDEs/editors can use
[09:35:23] <aatch> ssbr_, I think there is an issue similar to that.
[09:35:39] <ssbr_> it's more important in ocaml than rust, since in ocaml functions don't need type annotations
[09:35:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:36:09] <ssbr_> aatch: if you could help me find it I'd appreciate it
[09:36:28] <ssbr_> reproducing the dtypes format, or the format from some other thing, would mean less effort getting editors to understand the compiler output
[09:36:43] <ssbr_> so I would like to leave a comment in that case
[09:37:17] <aatch> Ah! Where'd the issue search go!
[09:37:19] <ssbr_> didn't there used to be a way to search github issue trackers? Or am I imagining things?
[09:37:23] <ssbr_> OK, not just me
[09:38:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:38:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/1FTQVg
[09:38:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:39:01] <ssbr_> the search at the top sorta works if you use advanced search and then specify @mozilla
[09:39:12] <kimundi> The issue got merged with the search at the top in the last 24h it seems
[09:39:21] <ssbr_> merged poorly ;____;
[09:39:37] <kimundi> which is horrible, still
[09:39:49] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[09:40:59] <aatch> ssbr_, https://github.com/mozilla/rust/issues/558 is what I was thinking of.
[09:41:08] <aatch> Which might be a little further than I though.
[09:41:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:41:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FpAacA
[09:41:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:41:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:41:13] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tVXAMw
[09:41:13] <ghrust> 13rust/06auto 1444c1e46 15Alex Crichton: Improve lifetimes on foldl/foldr and lift the Copy requirement
[09:41:13] <ghrust> 13rust/06auto 148edf3c7 15bors: auto merge of #6254 : alexcrichton/rust/issues-5311-4490-better-foldl, r=graydon...
[09:41:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:42:51] <rroels> anyone here with some experience with rust-core-foundation ? I've been playing with it, but am running into internal compiler errors when trying to use a dictionary
[09:43:00] <rroels> I have a small snippet to demonstrate:
[09:43:02] <rroels> http://pastebin.com/qyQYAwWJ
[09:43:15] <rroels> (I'm a total rust noob, don't shoot me :(  )
[09:43:57] <aatch> rroels, ICE's are ICE's they shouldn't happen no matter what
[09:44:13] <aatch> (either it works or you get an error explaining why it didn't)
[09:44:41] *** Quits: jensnockert (jensnocker@moz-5807D9D3.wireless.lu.se) (Input/output error)
[09:45:01] <rroels> I also noticed that the error changed since the updates yesterday (there was always an error though)
[09:45:11] <rroels> should I file an issue then? or a bug report?
[09:45:52] <aatch> rroels, actually, it's all in unsafe code (though that's still not an excuse)
[09:46:00] <aatch> rroels, if there isn't something similar
[09:46:09] <aatch> try search the old message too btw
[09:46:36] <aatch> rroels, also, you don't have to put type declarations on most expressions
[09:48:54] <ssbr_> aatch: sorry, I got pulled away
[09:48:57] <ssbr_> yeah, that's a little different
[09:49:09] <ssbr_> I guess I'll file a --dtypes feature request and let that sit
[09:51:21] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Quit: Lost terminal)
[09:52:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:52:19] *** Quits: dbaupp (Thunderbir@moz-C577CE44.lns20.syd6.internode.on.net) (Ping timeout)
[09:54:20] *** Joins: dbaupp (Thunderbir@moz-83943269.lns20.syd6.internode.on.net)
[09:54:53] <dbaupp> aatch: back... any fmt insights?
[09:55:25] <aatch> dbaupp, um, I making it so the order is a lot more flexible?
[09:56:06] <dbaupp> aatch: nice
[09:56:20] <ssbr_> heh, "ssbr opened this issue in a few seconds"
[09:57:00] <thiez> import issues from __future__;
[09:57:01] <dbaupp> ssbr_: you'll poke holes in the fabric of space and time if you keep time-travelling so much ;P
[09:57:15] <thiez> surely we have enough issues in the present...
[09:57:35] <ssbr_> my system clock is malfunctioning
[09:57:37] <dbaupp> bjz: did you work out the denormal thing? https://blogs.oracle.com/d/entry/subnormal_numbers
[09:58:02] <ssbr_> although how a malfunction in my system clock could lead my computer to travel through spacetime is another matter
[10:01:40] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[10:01:58] <bjz> dbaupp: cheers
[10:02:23] <bjz> dbaupp: yeah just waiting for things to compile :[
[10:03:11] <dbaupp> bjz: that's a common activity with rustc... :(
[10:03:16] <bjz> aye
[10:03:24] <aatch> oh god the waiting.
[10:04:05] <bjz> Good god!
[10:05:54] <dbaupp> aatch: did we come to a resolution on newtype structs vs flags?
[10:06:23] <aatch> dbaupp, uh, I don't thing so.
[10:06:29] <dbaupp> I'm happy with either... although the former seems more type-safe.
[10:07:45] <aatch> dbaupp, fair enough.
[10:07:48] <sanxiyn> dbaupp: Indeed, generating successive 2^(-n) is a good way to get one
[10:08:15] <dbaupp> in an extremely scientific study, %f occurs about 800,000 times on github, and %e and %g about 4e5 ad 3e5 respectively
[10:08:36] <dbaupp> so they shouldn't be relegated to horrible syntax, I think
[10:08:49] <dbaupp> so I'm leaning towards flags at the moment?
[10:09:14] <aatch> btw, the change I've just made, will allow this: "%<3>={2}20.5d"
[10:09:25] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[10:09:25] <aatch> (I think, I'm writing tests for it)
[10:10:05] <dbaupp> aatch: oooh, flexible ordering!
[10:11:26] <aatch> at the very least, I don't seem to have broken anything.
[10:11:31] <aatch> All the tests still pass
[10:18:02] <aatch> dbaupp, so my one test that tests '%<2>#{3} 20.5a' works :D
[10:19:18] <dbaupp> aatch: that's a long format spec...
[10:19:24] <dbaupp> :D
[10:19:56] <aatch> dbaupp, it does mean that you can intermix flags though.
[10:20:09] <aatch> in that example, '#' and ' ' are flags
[10:20:16] <dbaupp> yup
[10:20:37] <dbaupp> which means that `%{4}10.3ef` isn't so bad
[10:21:11] * bjz is super excited about core::fmt
[10:21:21] <aatch> dbaupp, yeah, I realized that the only reason you couldn't have any order you wanted (to some extent) was because I was too lazy to make the change
[10:21:40] <dbaupp> hahaha... laziness is a good excuse ;D
[10:21:46] <aatch> you still have to have width.prec though
[10:22:08] <dbaupp> aatch: yup, that makes sense, and it would be good to keep like that, I guess
[10:24:09] * lucian likes pep 3101
[10:26:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:26:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148edf3c7 to 14bdb52e5: 02http://git.io/N3iJvQ
[10:26:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:26:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:26:13] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZJuZyg
[10:26:13] <ghrust> 13rust/06auto 1424de5bb 15Brian Anderson: core: Remove a call to `breakpoint` from a test...
[10:26:13] <ghrust> 13rust/06auto 144023f54 15bors: auto merge of #6255 : brson/rust/nobreakpoint, r=graydon...
[10:26:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:26:16] <aatch> Goddamit. None of my fail tests actually tested anything
[10:26:21] <dbaupp> lucian: fwiw, we support "%{1}d %{0}s" to index the args
[10:27:17] <ssbr> Python uses the syntax %(x)d for something similar
[10:27:17] <dbaupp> lucian: and e.g. '%[1].[2]f' to retrieve the width and precision from the arguments
[10:27:23] <lucian> dbaupp: that looks nice. I also like "{0:0.2f}".format(math.pi)
[10:27:35] <lucian> yeah, that looks alright
[10:27:54] <ssbr> (uses? used to use? whatever)
[10:28:44] <lucian> ssbr: still does, % hasn't been removed yet
[10:28:53] <dbaupp> ssbr: looks like that syntax is '%(key)d' % {'key': 10}
[10:29:04] <ssbr> dbaupp: Right.
[10:29:21] <lucian> the alternative is "{key}".format(key=10)
[10:29:57] <dbaupp> lucian: yeah, that might actually be possible
[10:30:29] <bjz> dbaupp: huzzah, the tests pass
[10:30:48] <bjz> dbaupp: thankya for da linke
[10:32:38] <dbaupp> bjz: np :D
[10:33:07] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[10:34:15] <dbaupp> aatch: also, python uses < ^ > for left/centre/right alignment, which is nice than printf
[10:34:33] <dbaupp> so maybe the num arg should be in ()?
[10:34:57] <aatch> dbaupp, sure.
[10:35:10] <dbaupp> and... another thing, how do we specify a fill character other than ' ' or '0'?
[10:35:13] <aatch> I'll just get these tests working again, now that they actually do something
[10:35:26] <aatch> dbaupp, currently you don't?
[10:35:30] <dbaupp> and, what about formatting as '1,000,000' or '1.000.000'?
[10:35:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:35:51] <Ralith> is the goal here to provide a familiar tool to users coming from C(++), or to produce a formatting DSL desirable in its own right?
[10:36:00] <aatch> dbaupp, well the standard is "'"
[10:36:02] <dbaupp> aatch: yep, I know, that was general 'ask-the-world' question :P
[10:36:17] <aatch> Ralith, a bit of both
[10:36:18] <dbaupp> (the fill cahracter one)
[10:36:36] <Ralith> aatch: I would expect the pursuit of either to impair pursuit of the other.
[10:37:02] <Ralith> if it doesn't behave like printf, C(++) users will get unhappy surprises, and if it does, well, it's not that good.
[10:37:10] <aatch> The parser is intended to be flexible enough to handle pretty much and printf-style formatting string
[10:37:12] <dbaupp> aatch: maybe a combination of flags and newtype structs would be useful
[10:37:29] <Ralith> oh, this is meta-level?
[10:37:45] <dbaupp> Ralith: partly
[10:37:57] <aatch> dbaupp, well if we make 'e' and 'g' sugar for the newtype structs.
[10:37:58] <dbaupp> we're also actually implementing a formatting language
[10:38:39] <aatch> and the newtype structs are generic (so FormatE<T>(T)) then I can't imagine it being too much of a hassle
[10:40:06] <dbaupp> aatch: hm... so you mean seeing an 'e' flag will make writef! wrap the appropriate argument in FormatE() and just let the type system handle any errors?
[10:40:25] <aatch> dbaupp, yep
[10:41:52] *** Quits: dbaupp (Thunderbir@moz-83943269.lns20.syd6.internode.on.net) (Ping timeout)
[10:42:09] *** Joins: dbaupp (Thunderbir@moz-4579FE41.lns20.syd6.internode.on.net)
[10:43:56] *** Quits: dbaupp (Thunderbir@moz-4579FE41.lns20.syd6.internode.on.net) (Ping timeout)
[10:44:17] *** Joins: dbaupp (Thunderbir@moz-73B53246.lns20.syd6.internode.on.net)
[10:44:21] <dbaupp> aatch: I'm not sure how we can embody that logic in to core::fmt, rather than in ext::writef... hm...
[10:45:02] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[10:45:03] <aatch> dbaupp, I think it might have to be in ext::writef
[10:45:15] <dbaupp> maybe a function flags -> Option<~str> that returns the (name of the) newtype struct/function to call
[10:45:36] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[10:45:55] <dbaupp> actually, yeah, that's reasonable (ignoring the almost-stringly-typed nature of it)
[10:47:14] <kimundi> aatch: "%<2>#{3} 20.5a", how does it differentiate that from "%<2>#{3}" followed by a regular string 20.5a?
[10:47:35] <kimundi> Or similar situations
[10:47:51] <aatch> kimundi, it does not, but "%<2>#{3}" by itself is not a valid specifier
[10:48:07] <dbaupp> kimundi: it doesn't try to make decisions like that... it's greedy so will parse for as long as it can
[10:48:09] <aatch> since it does not end in a conversion spec
[10:48:21] <dbaupp> (actually, what aatch said)
[10:49:19] <kimundi> Basically I'm asking if you have though of a way to 'stop' the greedy parser prematurley. Or is it structured in a way where d format string is never a prefix of another?
[10:49:41] <kimundi> "where a format string"*
[10:49:47] <dbaupp> kimundi: the latter
[10:49:49] <aatch> kimundi, its about as ambiguous as regular printf
[10:49:55] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[10:49:59] <aatch> repeated flags aren't allowed
[10:50:21] <aatch> and it bails out if it looks like it's going to parse a certain field for a second time
[10:51:12] <aatch> (by not allowed, it just tries to match it as a conversion specifier then stops)
[10:51:55] <kimundi> Maybe I just don't know enough of the format grammar you've worked out. Just from seeing snippets here and there I'm wondering...
[10:52:39] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:52:44] <aatch> kimundi, there is a grammar in a comment here: https://gist.github.com/Aatch/fb94960ab770c7df5718
[10:52:56] <aatch> It's not actually what it accepts anymore, but pretty close
[10:53:13] <kimundi> thx, will look
[10:53:14] <aatch> (basically just the ordering and a few other details)
[10:54:38] * aatch has to find the source of an infinite loop. Wheeee
[10:55:06] <kimundi> aatch: So flags and identifiers are freeform?
[10:55:21] <aatch> kimundi, they are pre-defined
[10:55:30] <aatch> but otherwise, yes
[10:57:01] <aatch> huh, looks like guards on patterns are a little broken
[10:57:33] <kimundi> Okay, then my question is how can you differentiate between "%sd" identifier 'd' with flag 's' and "%sd" identifer s followed by trailing 'd'
[10:57:51] <kimundi> In general that is
[10:57:55] <aatch> kimundi, well if 's' is a valid flag, we can't
[10:58:38] *** Quits: dbaupp (Thunderbir@moz-73B53246.lns20.syd6.internode.on.net) (Ping timeout)
[10:58:42] <kimundi> SO, that'S the problem I've been talking about. You need a way to allow it or elses you can't combine the format identifers with arbitray text
[10:58:51] *** Joins: dbaupp (Thunderbir@moz-77C61022.lns20.syd6.internode.on.net)
[10:58:54] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[10:59:27] <aatch> kimundi, but we don't have an overlap between our flags and identifiers
[10:59:34] <aatch> which is the only time it comes up.
[11:00:06] <aatch> There is a defined set of flags and conversion specs.
[11:00:14] <kimundi> aatch: I though users could define custom ones? If there is no overlap then it's not a problem, yeah
[11:00:26] <bjz> ILyoan: dingdong
[11:00:44] <aatch> kimundi, they cannot in the sense of changing what writef! takes
[11:00:44] <kimundi> If not, and there is no overlap, that is.
[11:01:13] <aatch> They can define custom formattings, by implementing the appropriate traits
[11:01:25] <kimundi> Okay. So it would only be a problem with reusing the data structures for somethinf homebrew?
[11:01:36] <aatch> kimundi, yes.
[11:01:57] <kimundi> Okay then. :) Nevermind me, just wanted to be sure
[11:01:58] <aatch> I thought of that and the documentation recommends to not have an overlap
[11:02:14] <bjz> yay, there is documentation!
[11:02:17] *** Quits: dbaupp (Thunderbir@moz-77C61022.lns20.syd6.internode.on.net) (Ping timeout)
[11:02:25] <aatch> bjz, I'm big on documentation.
[11:02:53] <aatch> "The two sets should be disjoint, but this isn't enforced." is the exact sentence in the doc comment
[11:02:56] <kimundi> aatch: Maybe it should be enforced that the two sets are disjoint, instead of just recommended. 
[11:02:57] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[11:03:06] <aatch> kimundi, I don't see why
[11:03:26] <kimundi> Because if they aren't, this problem cropts up?
[11:03:33] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[11:03:34] <aatch> kimundi, only in user code.
[11:03:45] <bjz> fmt is meant to be quick
[11:03:47] <aatch> And it's not as if they weren't warned.
[11:04:04] <aatch> bjz, to be fair, the parsing in fmt! is at compile time
[11:04:10] <bjz> ohh
[11:04:12] <bjz> nice!
[11:04:21] <aatch> bjz, just like it is now
[11:04:27] <bjz> with the user defined traits :O
[11:04:35] <bjz> ?
[11:04:40] <aatch> Yeah, we just call the methods
[11:04:45] <bjz> wowee
[11:04:49] <bjz> that's great
[11:04:58] <aatch> The typechecker does most of the hard work
[11:05:04] <aatch> and better than we ever could
[11:05:09] <bjz> yeah
[11:05:35] <aatch> 1 red test to go!
[11:05:38] <bjz> aatch: when does the patch land?
[11:05:39] <kimundi> Sure, not arguing about that. It just seems like an arbitrary hole in the system to left open, even if in actual use it's not a problem. No gotchs and all etc. :)
[11:05:49] *** Joins: dbaupp (Thunderbir@moz-A6373D21.lns20.syd6.internode.on.net)
[11:05:53] <bjz> :P
[11:05:59] <dbaupp> aatch: it probably means that the error messages aren't as helpful, though :(
[11:06:07] <aatch> dbaupp, true
[11:06:23] <bjz> aatch: are you going to add printf! and printlnf?
[11:06:44] <kimundi> aatch: will the new fmt! also support anything else than string literals? That is, have a fallback to runtime parsing.
[11:06:49] <aatch> bjz, we're actually having writef! as the base, which takes a io::Writer
[11:06:57] <aatch> kimundi, currently compile-time only
[11:06:59] <bjz> aatch: noice
[11:06:59] <dbaupp> bjz: we'd (approximately) planned for fmt! and printf! as well as writef!
[11:07:31] <aatch> Not entirely sure how to handle it at runtime.
[11:07:35] <dbaupp> kimundi: we're trying to have most of the logic in core (rather than in the syntax extension) so that there could feasibly a run-time printf to call
[11:08:05] <kimundi> I wonder how hard it is two have that distinction in the macro code, it would also bee needed for the regular expression macros.#
[11:08:26] <aatch> kimundi, you can check to see if the expression is a string literal
[11:08:26] <dbaupp> kimundi: `fn rt_printf(Writer, str, &[&Format])`
[11:08:59] <aatch> dbaupp, well, that would be rt_writef, but close enough :P
[11:09:09] <dbaupp> aatch: pssh, names! :P
[11:09:13] <bjz> dbaupp aatch: I really like that approach. moving stuff out of the compiler that is. hopefully we can do the same with numeric evaluation.
[11:09:56] <bjz> dbaupp aatch: ie. operations - add/sub/mul etc
[11:10:05] <dbaupp> bjz: I have this feeling that it ends up locking a lot of features to the rustc (rather than an alternate rust implementation)
[11:10:28] <bjz> dbaupp: which?
[11:10:36] <dbaupp> bjz: I don't particularly care about this, but I'm sure other might
[11:10:45] <dbaupp> bjz: a hypothetical "gcc-rust"
[11:10:57] <bjz> dbaupp: moving stuff to core?
[11:11:06] <bjz> dbaupp: or keeping it in rustc?
[11:11:11] <aatch> dbaupp, I'm not bothered by it, but I prefer to keep things separated.
[11:11:12] <dbaupp> bjz: yeah, putting compiler-y stuff in core
[11:11:44] <dbaupp> (e.g. moving the intrinsics definitions into core, which has other negatives too)
[11:11:59] <bjz> dbaupp: that is true
[11:12:03] <dbaupp> (this hasn't happened yet though)
[11:12:55] <june0cho> exit
[11:12:56] <june0cho> q
[11:12:59] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[11:12:59] *** Quits: june0cho (june0cho@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[11:13:02] <bjz> dbaupp: I just cry when I see this: fn sub(&self, other: &f64) -> f64 { *self - *other }
[11:13:07] <bjz> haha fail
[11:13:12] <bjz> :)
[11:13:24] <dbaupp> bjz: I mainly laugh at the ridiculousness :P
[11:14:00] <kimundi> dbaupp: But couldn't it also imprve things? The more is part of the library of the compiler you want to write, the less do you have to implement in the new compiler itself. Of course things like locking to llvm due to direct instrinsiccalls are bad for that...
[11:14:42] <dbaupp> kimundi: actually, yeah, that's another way to look at it
[11:14:43] <kimundi> bjz: Better than "I'm the wrong type!".to_str()
[11:15:34] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[11:17:48] *** Quits: dbaupp (Thunderbir@moz-A6373D21.lns20.syd6.internode.on.net) (Quit: dbaupp)
[11:18:09] <kimundi> #[test] fn fmt_test() {... fail!("Didn't get expected parse result. Expected End, got %?", a) ...}
[11:18:18] <kimundi> ^ This could lead to some chicken-egg problem :D
[11:19:12] <bjz> kimundi: the whole compiler is a chicken and egg problem
[11:19:16] <bjz> :)
[11:19:51] <kimundi> true, but over time :D
[11:19:55] *** Joins: dbaupp (Thunderbir@moz-A6373D21.lns20.syd6.internode.on.net)
[11:21:15] <kimundi> The problem with that test is that it will only run with the thing it tests part of the fail!() invokation, wich is a bit more problematic.
[11:21:39] <kimundi> ANd highly confusing, as I know of own expirience :D
[11:22:27] <kimundi> Replacing rusts number-string conversion functions lead to the one or other infinite recursion...
[11:22:57] <kimundi> "which does it crash just becuase I add debug output??? .... oh."
[11:23:37] <aatch> kimundi, What are you talking about?
[11:24:31] <kimundi> aatch: Mostly rambling with bad grammar, but also being a bit cautios about having a call to fmt!() in a test that tests the formating framework :)
[11:24:49] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[11:24:54] <aatch> kimundi, only a problem if it fails though
[11:24:57] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[11:26:08] <kimundi> aatch: Well yeah. The moment it wants to fail with a usefull error message, it instead migh fail with a stackoverflow/oom error due to infinte recursion.
[11:26:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[11:26:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ZJuZyg
[11:26:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[11:26:57] <kimundi> Chanches are slim that you hit the same codepath each time, but it could happen in theory. But not worth taking special precaution unless in very special cases I think.
[11:29:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[11:29:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QMOF_Q
[11:29:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[11:29:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[11:29:12] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/Fdk8UA
[11:29:12] <ghrust> 13rust/06auto 14b20eb97 15Huon Wilson: libsyntax: extend generic deriving code to handle almost all possible traits....
[11:29:12] <ghrust> 13rust/06auto 141cf2108 15Huon Wilson: libsyntax: convert #[deriving(IterBytes)] to generic deriving
[11:29:12] <ghrust> 13rust/06auto 145e1d6c2 15Huon Wilson: libsyntax: add #[deriving(Rand, ToStr)]....
[11:29:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[11:29:39] * aatch would really like to know what decides if a repo can be sent a pull-req
[11:30:43] *** Quits: dbaupp (Thunderbir@moz-A6373D21.lns20.syd6.internode.on.net) (Ping timeout)
[11:32:28] *** Joins: dbaupp (Thunderbir@moz-17172119.lns20.syd6.internode.on.net)
[11:32:55] * dbaupp crosses fingers
[11:33:15] <aatch> dbaupp, I jsut figured out why you couldn't send me a pull request, nor me to you
[11:33:28] <dbaupp> (the last time I had a #[deriving]-related pull request, it took about 6 reviews... :( )
[11:33:31] <dbaupp> aatch: oh?
[11:33:34] <aatch> I think
[11:33:42] <aatch> Try enabling issues
[11:34:09] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[11:34:16] <dbaupp> aatch: done
[11:34:28] <aatch> nope dammit.
[11:34:39] <dbaupp> aatch: :(
[11:35:08] <dbaupp> this is strange
[11:36:04] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:37:32] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[11:37:42] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[11:40:12] <aatch> dbaupp, oh well, you should just be able to pull my changes
[11:40:34] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[11:41:34] <dbaupp> aatch: still on new-fmt, right?
[11:41:41] <aatch> dbaupp, yep
[11:41:44] <aatch> makes like easier
[11:41:51] <bjz> would somebody like to review this? https://github.com/mozilla/rust/pull/6301
[11:42:04] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[11:42:07] <aatch> bjz, lol, just opened that email
[11:42:13] <bjz> :)
[11:42:57] <aatch> bjz, why did you change log to ln?
[11:43:10] <bjz> natural logarithm
[11:43:27] <aatch> I though the accepted defaults were log, ln ang lg for bases 10, e and 2 respectively
[11:43:39] <aatch> s/ang/and
[11:43:40] <bjz> http://en.wikipedia.org/wiki/Natural_logarithm
[11:43:49] <engla> log is ambiguous
[11:44:04] <bjz> log is for arbritrary bases
[11:44:21] <bjz> well, as I have it in my pull
[11:45:04] <bjz> the good thing is that it takes a parameter, which reduces ambiguity
[11:45:06] <aatch> bjz, oh right, I missed that
[11:45:31] <bjz> sorry if it wasn't clear
[11:45:39] <aatch> seemed like a bit of an arbitrary change.
[11:45:46] <aatch> No, it was me.
[11:45:58] <bjz> I added doc-comments to the methods too, so that might help
[11:45:59] <aatch> There is clearly a line saying you added Exponetial::log
[11:46:13] <aatch> Which I didn't read
[11:46:33] <bjz> np :)
[11:47:09] <bjz> I was getting annoyed at the free-standing `logarithm` functions in the float files
[11:47:28] *** Joins: jaen1 (jaen@moz-F2462BBE.play-internet.pl)
[11:48:13] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[11:48:18] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[11:48:22] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[11:49:16] <aatch> I'm not sure if I have the authority to approve requests, and I don't want to test it in case it turns out the bors thinks I do, but Graydon doesn't
[11:49:38] *** Quits: kripton (kripton-mo@moz-B2051A72.kripserver.net) (Ping timeout)
[11:50:04] *** Joins: kripton (kripton-mo@moz-B2051A72.kripserver.net)
[11:50:05] <bjz> aatch: np, thanks for the review though
[11:50:11] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[11:50:21] <bjz> aatch: I added a clarification on the log->ln rename
[11:50:56] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[11:51:19] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[11:51:24] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:51:52] <dbaupp> aatch: http://stackoverflow.com/questions/14034504/change-base-repo-for-github-pull-requests
[11:52:06] *** Quits: kripton (kripton-mo@moz-B2051A72.kripserver.net) (Ping timeout)
[11:52:09] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[11:52:36] <dbaupp> not exactly the same, but I guess the answer applies
[11:52:43] <aatch> dbaupp, yeah
[11:52:47] <aatch> That kinda sucks
[11:52:58] <dbaupp> actually, the second answer might work...
[11:53:08] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[11:53:11] <aatch> Since there are like ancient abandoned repos on the list...
[11:53:47] <dbaupp> aatch: yeah, it does
[11:54:28] *** kimundi is now known as zz_kimundi
[11:54:31] <dbaupp> aatch: https://github.com/Aatch/rust/pull/1
[11:54:34] <aatch> dbaupp, the second thing worked though!
[11:55:52] <dbaupp> aatch: url munging is always the best solution ;D
[11:56:22] <aatch> I can send you a pull request, though I rebased recently, so it's like 15 commits
[11:56:36] <dbaupp> aatch: I've already pulled your changes
[11:56:37] <dbaupp> :)
[11:56:45] <aatch> dbaupp, nevermind then
[11:57:26] *** Quits: sdh_ (sdh@8557E3E0.AAC4A127.9105FBCF.IP) (Quit: Konversation terminated!)
[11:59:19] *** Quits: dbaupp (Thunderbir@moz-17172119.lns20.syd6.internode.on.net) (Ping timeout)
[11:59:34] *** Joins: trapni (trapni@moz-6A0EA166.dawanda.com)
[12:00:42] *** Joins: kripton (kripton-mo@moz-B2051A72.kripserver.net)
[12:01:16] *** Joins: dbaupp (Thunderbir@moz-43C7FB05.lns20.syd6.internode.on.net)
[12:03:02] *** Quits: dbaupp (Thunderbir@moz-43C7FB05.lns20.syd6.internode.on.net) (Ping timeout)
[12:03:54] *** Joins: jfredett (jfredett@moz-7EEB1182.mycingular.net)
[12:06:22] *** Joins: dbaupp (Thunderbir@moz-E50DDBB8.lns20.syd6.internode.on.net)
[12:07:14] <aatch> dbaupp, the parsing changes seem good to you?
[12:08:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:08:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ca9db38 to 144023f54: 02http://git.io/N3iJvQ
[12:08:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:08:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:08:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pP6Pyg
[12:08:14] <ghrust> 13rust/06auto 141cbf0a8 15Felix S. Klock II: Step one for 'proper' pub condition: support pub keyword in form.
[12:08:14] <ghrust> 13rust/06auto 14154f3b0 15bors: auto merge of #6271 : pnkfelix/rust/issue6009-condition-pub-priv-variants, r=graydon...
[12:08:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:11:13] *** Quits: kripton (kripton-mo@moz-B2051A72.kripserver.net) (Ping timeout)
[12:12:09] <bstrie> cmr: pong
[12:13:07] <dbaupp> aatch: yup
[12:13:37] <aatch> dbaupp, cool. I'm gonna head to bed in that case
[12:13:45] *** Quits: jfredett (jfredett@moz-7EEB1182.mycingular.net) (Ping timeout)
[12:14:32] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[12:14:57] <dbaupp> aatch: g'night... I probably should do the same
[12:15:09] <bjz> night!
[12:18:03] *** Joins: kripton (kripton-mo@moz-B2051A72.kripserver.net)
[12:19:45] *** Quits: kripton (kripton-mo@moz-B2051A72.kripserver.net) (Ping timeout)
[12:20:45] * bstrie wonders if erick and erickt are equivalent
[12:26:00] <indutny> hey people
[12:26:02] <indutny> new day - new bug :)
[12:26:03] <indutny> cannot borrow `*self` as mutable more than once at at a time
[12:26:17] *** Quits: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP) (Quit: victorporof)
[12:26:29] <bstrie> indutny: I think that might be by design?
[12:26:40] <indutny> yeah, it might be
[12:26:42] *** Quits: dbaupp (Thunderbir@moz-E50DDBB8.lns20.syd6.internode.on.net) (Ping timeout)
[12:26:44] <indutny> I'm just kidding a bit
[12:26:44] <indutny> https://gist.github.com/indutny/c8f02bfe2a64b7c28213#file-1-rs-L134
[12:26:44] * aatch is supposed to be going to bed...
[12:27:30] <indutny> should it really be borrowed there?
[12:27:49] <indutny> ah, and second borrow of `*self` as mutable occurs here
[12:27:54] *** Joins: leal (Mibbit@moz-76C139F2.public.wayport.net)
[12:27:55] <indutny> occurs on line 128
[12:28:06] *** Quits: Palmik (palmik@moz-8E37FC85.vpn.muni.cz) (Ping timeout)
[12:28:32] <aatch> indutny, ah, I think I know the fix
[12:28:33] <bstrie> why does it need to be find_mut rather than find?
[12:28:45] <indutny> bstrie: because it modifies it
[12:28:55] <indutny> and iter::push requires &mut self
[12:29:05] <indutny> thinking about realloc of ~[]
[12:29:07] <aatch> do `let _ = target;` before self.end
[12:29:10] <indutny> s/thinking/think/
[12:29:17] <indutny> aatch :)
[12:29:20] <bstrie> indutny: are you using a really recent rust build? there's a whole new borrow check pass that fixes a lot of problems
[12:29:37] <indutny> aatch: doesn't work
[12:29:47] <indutny> bstrie: well, I built it this morning
[12:29:50] <aatch> indutny, it doesn't? Aww.
[12:29:57] <indutny> it might be worth rebuilding it
[12:30:02] <indutny> but
[12:30:03] *** Joins: dbaupp (Thunderbir@moz-166B79F7.lns20.syd6.internode.on.net)
[12:30:04] <indutny> aatch: I got idea
[12:30:22] <indutny> yeah
[12:30:39] <indutny> wrapping iit in {  } fixes problem
[12:30:52] <aatch> indutny, that was gonna be my next suggestion.
[12:30:53] <indutny> so, basically self is borrowed for the lifetime of target
[12:31:16] <indutny> can I limit its lifetime in any better way?
[12:31:40] <aatch> indutny, not really, no.
[12:31:43] <indutny> ah, I think I know it
[12:32:03] <indutny> I can avoid defining target variable at all
[12:32:24] *** Joins: Palmik (palmik@moz-DADC71F0.pks.muni.cz)
[12:32:38] *** aatch is now known as aatch|bed
[12:32:59] <indutny> yeah, it works
[12:33:01] <indutny> ok, thank you!
[12:33:21] <ssbr_> egh, how do I convert a char to a length-1 string containing that char? I don't see anything in core::{str,char}
[12:33:36] *** Quits: dbaupp (Thunderbir@moz-166B79F7.lns20.syd6.internode.on.net) (Ping timeout)
[12:34:05] <leal> can anyone help with the syntax for supplying multiple traits for a type parameter? eg.. fn Foo<T: Ord, ToStr> (Bar: T)
[12:34:10] <Diablo-D3> hrm
[12:34:16] <Diablo-D3> so I can make unsafe pointers in rust, right?
[12:34:24] <indutny> leal: try fn Foo<T: Ord+Str>...
[12:34:32] <Diablo-D3> and then convert them to safe pointers, right?
[12:34:34] <pnkfelix> ssbr: str::from_char ?
[12:34:35] <leal> thanks!
[12:34:38] <bstrie> Diablo-D3: yes. iirc you can make them anywhere, but you can only deref them in unsafe blocks
[12:34:41] <pnkfelix> ssbr_: ^
[12:34:45] <indutny> leal: it might be wrong, so please try and let me know :)
[12:34:47] <Diablo-D3> well what Im wondering is this
[12:34:49] <ssbr_> pnkfelix: Oh right, derp
[12:34:49] <indutny> I'm curious too :)
[12:34:57] <bstrie> Diablo-D3: you can convert them to safe pointers in unsafe blocks, but I'm not sure how wise that is :)
[12:35:00] <Diablo-D3> does rust have a type that once it becomes non-null it cant ever become null again?
[12:35:07] <ssbr_> I was ctrl+fing for something that did char->str, of course it'd be [char]->str
[12:35:25] <engla> well there is no null in safe pointers
[12:36:00] <leal> indutny: the compiler took it :)
[12:36:04] <indutny> great
[12:36:05] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:36:05] <indutny> :)
[12:36:15] <Diablo-D3> so all I have to do is safely convert the pointer and Im fine from there on?
[12:36:54] <bstrie> Diablo-D3: I... think so, but I'm not sure where to look for an example of this
[12:37:30] <bstrie> Diablo-D3: why do you want to convert an unsafe pointer to a safe pointer?
[12:37:42] *** Joins: dbaupp (Thunderbir@moz-6CC26418.lns20.syd7.internode.on.net)
[12:37:57] <ssbr_> oh, from_char even
[12:38:00] <Diablo-D3> bstrie: oh, just looking at an article about D
[12:38:06] <ssbr_> apparently I just suck at ctrl+f everywhere all the time :(
[12:38:08] <ssbr_> also reading
[12:38:19] <Diablo-D3> D apparently has a pointer type that can be initalized as NULL but can never be set to NULL again
[12:39:22] <bstrie> Diablo-D3: with the exception of strings and vectors, safe pointers are just represented as a single ordinary C-like pointer at runtime, so you really shouldn't have to worry about it for any reason other than c interop
[12:40:26] <bstrie> Diablo-D3: can I get a link to the article?
[12:40:55] *** bhearsum|afk is now known as bhearsum
[12:41:20] <Diablo-D3> https://davesdprogramming.wordpress.com/2013/05/06/low-lock-singletons/
[12:41:35] <bjz> pnkfelix: can you review PRs?
[12:41:59] <pnkfelix> bjz: yes, but I'm a little busy trying to finish some things before I go off on PTO
[12:42:09] <pnkfelix> bjz: high priority?
[12:42:09] <bjz> okies, np
[12:42:15] <Diablo-D3> actually I think I misunderstood
[12:42:19] <bjz> not specifically
[12:42:22] <Diablo-D3> hes just talking about double checked locks
[12:42:38] <bjz> pnkfelix: concerns floats, that's why I asked you
[12:42:45] <Diablo-D3> this is why reading when you just get up is bad
[12:46:29] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:47:23] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[12:47:36] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[12:49:43] *** Quits: leal (Mibbit@moz-76C139F2.public.wayport.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:51:50] *** Quits: dbaupp (Thunderbir@moz-6CC26418.lns20.syd7.internode.on.net) (Ping timeout)
[12:52:04] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:55:17] *** Joins: dbaupp (Thunderbir@moz-9024A6B1.lns20.syd6.internode.on.net)
[13:00:39] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[13:03:19] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[13:05:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:05:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/pP6Pyg
[13:05:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:06:09] *** Joins: Api (Mibbit@moz-41C80E35.residential.rdsnet.ro)
[13:08:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:08:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OeewBg
[13:08:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:08:21] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:08:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/flLx8A
[13:08:21] <ghrust> 13rust/06auto 143cafe90 15Brian Anderson: std: Workaround bustage on incoming. #6122
[13:08:21] <ghrust> 13rust/06auto 1438a6a7a 15bors: auto merge of #6276 : brson/rust/issue-6122, r=graydon
[13:08:21] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:11:13] *** Quits: dbaupp (Thunderbir@moz-9024A6B1.lns20.syd6.internode.on.net) (Ping timeout)
[13:13:28] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[13:13:30] *** Joins: Blub\w (wry@moz-8365B534.wireless.dyn.drei.com)
[13:13:43] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Quit: Lost terminal)
[13:14:21] <indutny> so another question
[13:14:43] <indutny> I've a mutable borrowed pointer to struct
[13:14:50] <indutny> and SmallIntMap inside it
[13:15:07] <indutny> and I want to create another struct with pointer to first one struct
[13:15:14] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[13:15:18] <indutny> and pointer to mutable small map's item
[13:15:20] <indutny> s/item/value
[13:15:23] *** Joins: berak (chatzilla@A9016A70.4742BCFA.1A5CC7E5.IP)
[13:16:11] <indutny> so it seems to be logical that map's value lifetime is shorter than it's parent's struct
[13:16:15] <indutny> 's
[13:16:22] <indutny> but compiler chokes on it
[13:16:30] <indutny> cannot borrow `*(*self).blocks` as mutable more than once at at a time
[13:22:21] <indutny> anyone? :)
[13:23:32] *** Joins: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP)
[13:23:39] * Api is thinking at a solution, hang on
[13:24:04] <indutny> ah, ok
[13:24:06] <indutny> thank you
[13:25:48] *** Joins: sammykim (sammykim__@48AEBDE2.ACF655DA.97B9B372.IP)
[13:25:53] <sammykim> Hi
[13:26:18] <indutny> hi
[13:28:04] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[13:28:17] <Api> Tried the same thing but with lin
[13:28:25] <Api> Failed as well
[13:29:01] <indutny> heh
[13:29:05] <indutny> tell me about that
[13:30:45] <Api> Okay I give up :(
[13:31:12] <Api> But this made me curious tough 
[13:31:53] <Api> I'll try again later with my mentor b-) 
[13:33:44] <sammykim> r? 
[13:34:02] <sammykim> r? #6297
[13:34:08] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[13:34:37] <sammykim> Do you guys know how to ask reviewer to reivew my pull request?
[13:34:42] *** Quits: RMF (RMF@moz-BBAAC65A.dsl.telepac.pt) (Quit: Computer has gone to sleep.)
[13:34:44] <sammykim> that's r something.
[13:35:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:36:49] <bjz> sammykim: most are asleep atm
[13:37:34] <sammykim> Just I am curious how to ask them. I might ask them tmr :)
[13:37:40] <sammykim> bjz: Thanks
[13:38:37] <sammykim> I forgot how to do that :(
[13:40:53] <bstrie> sammykim: if you just submit it to the queue then someone will come along and read it eventually, but if you want a specific person to read it you can say "r? @whoever"
[13:40:59] *** Quits: cdidd (cdidd@moz-4FB24AF0.broadband.corbina.ru) (Ping timeout)
[13:41:00] *** Joins: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net)
[13:42:11] <sammykim> bstrie: I see . thx a lot :)
[13:43:15] *** Parts: sammykim (sammykim__@48AEBDE2.ACF655DA.97B9B372.IP) (Leaving)
[13:44:21] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[13:45:20] *** Joins: RMF (RMF@moz-BBAAC65A.dsl.telepac.pt)
[13:45:21] *** Parts: Api (Mibbit@moz-41C80E35.residential.rdsnet.ro) ()
[13:45:58] *** Quits: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com) (Client exited)
[13:45:58] *** Joins: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP)
[13:47:34] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[13:49:38] *** Quits: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com) (Quit: bleibig)
[13:51:57] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[13:52:23] *** Quits: jaen1 (jaen@moz-F2462BBE.play-internet.pl) (Quit: WeeChat 0.4.0)
[13:52:34] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[13:52:45] <bjz> Erik: did you see this? https://github.com/mozilla/rust/pull/6296
[13:54:03] <ssbr_> man, I'm not really sure the right way to handle owned strings and vectors. Today I learned that if I have MyVariant(~foo), and I want to operate on it borrowing foo, then I can do things like MyVariant(~ref foo) => ...
[13:54:25] <ssbr_> but what do I do if I have MyVariant(~str) ? AFAIK all I can get from that is a &~str, but is that really useful?
[13:54:41] <ssbr_> (without moving ownership, I mean)
[13:57:58] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[13:58:56] <cyndis> why wouldn't it be useful
[13:59:45] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[13:59:52] <Erik> bjz: Are you always online? :-)
[13:59:59] <Erik> Yes, I just saw it
[14:00:06] <bjz> Erik: nope
[14:00:09] <Erik> No time to review right now
[14:00:18] <Erik> just checking email before work
[14:00:59] <Erik> I'll look it over tonight, and post comments.
[14:01:34] <cyndis> ssbr_: you can still give *x (where x: &~str) to functions that expect &str
[14:02:16] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:03:00] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Quit: ~ Trillian - www.trillian.im ~)
[14:03:28] <cyndis> bjz: did the forbidding of impls on typedefs go through? i was trying to get lmath to compile on incoming and had to comment out them
[14:03:46] <bjz> cyndis: fraid so
[14:03:51] <cyndis> okay
[14:04:01] <bjz> been trying to find a work-around with modules
[14:04:05] <cyndis> well, fixing the actual problem is better
[14:04:14] <bjz> yeah
[14:04:31] <bjz> it was ugly to begin with
[14:04:34] <cyndis> yes
[14:04:58] <cyndis> i'm now blocked on the *_assign operators missing on stuff
[14:05:31] <cyndis> and some other stuff in rsmc itself :)
[14:06:06] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[14:06:10] *** Quits: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[14:06:10] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[14:06:11] *** Joins: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com)
[14:06:17] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[14:06:17] *** Quits: Aj (afernandez@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[14:06:17] *** Quits: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[14:06:18] *** Joins: Aj (afernandez@moz-DB4A9C19.scl3.mozilla.com)
[14:06:18] *** Joins: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com)
[14:06:23] <cyndis> like how to calculate block lighting using neighbouring block data
[14:06:27] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[14:06:46] <cyndis> which is problematic because i can't read the neighbours while iterating through the block data..
[14:09:39] *** Joins: nath (Mibbit@moz-D61E82F6.hsd1.in.comcast.net)
[14:09:42] <lucian> ssbr: related to that ref vs & in matches confuses me. perhaps rust needs another sigil
[14:10:12] <ssbr> cyndis: wouldn't that take ownership, though?
[14:10:40] <nath> http://stackoverflow.com/questions/16421033/lazy-sequence-generation-in-rust - I'm trying to figure out how to do something like lazy sequences in Rust.
[14:10:48] <ssbr> what do I do if I want to have &str ?
[14:10:52] <nath> I'd greatly appreciate a good answer
[14:12:21] <cyndis> ssbr: no
[14:13:00] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[14:13:46] <cyndis> the ~str will be automatically sliced into a &str
[14:14:30] <ssbr> cyndis: when does it get sliced into a &str?
[14:14:36] <ssbr> when I dereference a &~str?
[14:14:47] <cyndis> when you call a function that takes a &str with a ~str parameter
[14:15:07] <cyndis> dereferencing the &~str gets you a temporary ~str
[14:15:12] <cyndis> it is quite complicated..
[14:15:36] <cyndis> you cannot actually move the ~str out
[14:15:57] <ssbr> is there any way to specifically ask to see a ~str as a &str so that I don't have to think about it getting automatically sliced or not?
[14:15:58] <thiez> but you could edit the ~str, right?
[14:15:59] *** Joins: akashj87 (akash@7606EB88.33D70F06.35E3DDC8.IP)
[14:16:02] <cyndis> because you cannot move out of dereferences
[14:16:22] <cyndis> str has a bunch of methods to slice it
[14:16:42] <thiez> it would be confusing to deref &~str
[14:16:46] <ssbr> ugh, I don't understand that
[14:17:08] <ssbr> if I do "let Foo(a) = bar" where bar is a Foo(~str), then surely I've moved the str out of bar into a?
[14:17:13] <ssbr> so then it's too late, it's already moved
[14:17:18] <cyndis> yes
[14:18:02] <ssbr> What do I do instead, to get a &str?
[14:18:26] <thiez> there is a to_slice I think
[14:18:35] <ssbr> thiez: but it's already too late as soon as I have a ~str
[14:18:43] <ssbr> I don't want to move it in the first place
[14:19:06] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:19:07] <cyndis> you cannot get a slice using ref
[14:19:12] <bjz> cyndis: I have another branch
[14:19:16] <cyndis> so you cannot get it in a pattern match
[14:19:22] <bjz> cyndis: on lmath
[14:19:29] <cyndis> bjz: the 0.6 branch?
[14:19:51] <bjz> cyndis: no, for fixing it
[14:19:53] <ssbr> cyndis: so it's impossible to deal with owned strings inside variants, tuples, and tuple-structs without "consuming" the variant/tuple/tuple-struct?
[14:19:57] <cyndis> bjz: ah, ok
[14:20:52] <ssbr> if I'm pattern matching against a borrowed variant/tuple/tuple-strict, I can't move an owned string out of it
[14:20:58] <ssbr> is there no way to do anything with it?
[14:21:03] <cyndis> no, you can get a reference to the owned string
[14:21:08] <cyndis> and can actually use that without moving it
[14:21:20] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[14:21:23] <cyndis> this should be simplified by the dynamic sized value changes
[14:21:23] <ssbr> cyndis: how?
[14:21:48] <cyndis> let mut x = ~"foo"; match x { ref mut x => { *x = ~"bar" } }; io::println(x);
[14:21:52] <cyndis> prints bar
[14:22:01] <ssbr> oh right, ref without ~
[14:22:03] <bjz> cyndis: right this second I'm fixing it to use the ApproxEq trait I pushed last night
[14:22:07] <ssbr> man, I knew I was forgetting something
[14:22:25] <cyndis> bjz: ah
[14:22:39] <cyndis> how is ApproxEq related to FuzzyEq?
[14:22:44] <cyndis> replaces it?
[14:23:26] *** Joins: jviereck (Adium@moz-65020B49.ethz.ch)
[14:25:19] <thiez> cyndis: https://github.com/mozilla/rust/pull/6263
[14:25:43] <cyndis> ah, should have checked that
[14:26:03] <cyndis> i did make lmath use std::cmp::FuzzyEq yesterday :p
[14:26:15] <bjz> haha
[14:26:16] <thiez> now there are suggestions to add a RelativeEq, but I think they'll end up changing ApproxEq a little
[14:26:40] <ssbr_> cyndis: based on our conversation I thought maybe this would work, but apparently not: http://bpaste.net/show/oM7796FSFTJUl7EJEF4v/
[14:26:50] <ssbr_> LLVM assertion failure instead :(
[14:27:07] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:27:24] <bjz> thiez: I commented on ILyoan's pull, he hasn't got back to me yet though: https://github.com/mozilla/rust/pull/6296
[14:27:26] <cyndis> try match, afaik there's some problems with let
[14:27:38] <thiez> ssbr: what exactly are you trying to do?
[14:27:57] <ssbr_> thiez: handle an enum which has owned pointers, when I don't own it
[14:28:00] <ssbr_> er
[14:28:01] <ssbr_> owned strings
[14:28:31] <thiez> 'handle' it how?
[14:28:37] <ssbr_> OK that worked
[14:28:56] <thiez> match is your friend
[14:29:11] <ssbr_> match for infalsifiable patterns is kinda dumb :(
[14:29:19] <ssbr_> but woo, it did work
[14:29:30] <ssbr_> thiez: "handle" as in, be able to perform computations based on the string values
[14:29:35] <cyndis> yeah, i think let and match are separate codepaths at the moment, so..
[14:29:37] <cyndis> there's problems
[14:29:41] <ssbr_> but I didn't know how to get the string values without moving the string
[14:29:51] <ssbr_> which wouldn't work because I don't own the enum
[14:29:55] <ssbr_> I have a borrowed pointer
[14:30:48] <ssbr_> apparently the answer is: match using `ref`, and then dereference the resulting pointer to get a "temporary" ~str that somehow works even though that means there's two ~str that are owned by two people that point to the same value
[14:30:49] <ssbr_> or something
[14:30:52] <ssbr_> I don't understand at all
[14:31:08] <thiez> I'm amazed you can deref that &~str tbh
[14:31:23] <cyndis> i can't claim to *really* understand it either
[14:31:29] <cyndis> i just seem to know it somehow :)
[14:31:42] <thiez> can you paste your current code? I want to prod it with a stick
[14:31:51] <ssbr_> thiez: the current code I'm _actually_ working on?
[14:31:55] <thiez> the one that works with 'match' :)
[14:32:00] <thiez> no, just the small example will do
[14:32:18] *** Quits: nath (Mibbit@moz-D61E82F6.hsd1.in.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:32:44] <ssbr_> thiez: here's the code that I wrote based on cyndis's suggestions: http://bpaste.net/show/HGCHFUc1vhmG0MLNe99d/
[14:33:07] <ssbr_> in it I clearly get two owned strings that are the same string
[14:33:11] <ssbr_> it's absurd and makes no sense to me
[14:33:36] <ssbr_> errrrrrrr
[14:33:43] <ssbr_> wait no I don't clearly. I wrote from_slice
[14:33:50] <ssbr_> maybe I actually get a &&str secretly somehow
[14:34:09] <cyndis> from_slice takes a &str and the ~str gets implicitly sliced into one
[14:34:38] <cyndis> so c becomes a copy of b
[14:35:05] *** Quits: jviereck (Adium@moz-65020B49.ethz.ch) (Quit: Leaving.)
[14:35:20] <ssbr_> why can't I just say something like "match &MyStruct(s : &str) => ..."
[14:35:29] <ssbr_> that would have the same effect, surely?
[14:35:44] <ssbr_> is there some convenient thing I'm missing? this can't be the right way to do things
[14:36:03] <cyndis> i think it is, for now
[14:36:09] <thiez> I think you can just do 'match a { &MyStruct(ref b) => b.slice(0,b.len()) }'
[14:36:19] <cyndis> though i don't really see the problem
[14:36:23] <thiez> that should return a slice of the complete string
[14:36:38] <thiez> It is very inconvenient that rusti isn't here :D
[14:36:41] <ssbr_> mmmmf
[14:36:53] <ssbr_> when do I stop being able to use traits?
[14:37:22] <ssbr_> like, uh, you're calling a method on a &~str. could I call one on a ~&~str?
[14:37:51] <thiez> I don't think so, but do try :p
[14:38:16] <ssbr_> I don't get it :(
[14:38:46] <ssbr_> cyndis: the problem is that this is really trivial for the normal types
[14:38:54] <thiez> do not try to understand rust, that is impossible. Instead realize the truth, there is no spoon :p
[14:39:01] <cyndis> yes, str and [] are known to be evil
[14:39:11] <ssbr_> got a ~i8 and need a &i8? no problem, match against ~ref x
[14:39:13] <ssbr_> it's brilliant
[14:39:16] <cyndis> thankfully there's nmatsakis' proposal to make them easier
[14:39:22] <thiez> hopefully that'll end onze we get Sized
[14:39:31] <thiez> once*
[14:39:32] <benh> it's an i8, just copy it :v
[14:39:40] <ssbr_> benh: I was using it as an example!
[14:39:54] <ssbr_> I want to copy this string, too, but it's pretty convoluted
[14:39:57] <ssbr_> to do that
[14:41:19] <thiez> it is not
[14:41:26] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:41:28] <cyndis> well, actually, you can do (**a).clone()
[14:41:35] <cyndis> looking at that code :P
[14:41:45] <cyndis> since it's a struct
[14:41:45] <ssbr_> you know what's weird?
[14:42:00] * nmatsakis doesn't quite know what question is being debated
[14:42:12] <nmatsakis> typically a.clone() would work just fine?
[14:42:14] <ssbr_> I can do match Foo(ref s) => ~"abc" + *s; but I can't do Foo(s) => ~"abc" + s
[14:42:41] <ssbr_> or if I can't do it, the compiler is waiting until some later time to say it isn't valid either (still fixing errors)
[14:42:42] <nmatsakis> ssbr_: yes, that's a side-effect of a couple of interacting features, some of which are under debate
[14:42:57] <ssbr_> nmatsakis: but don't they mean the same thing?
[14:43:02] <nmatsakis> no.
[14:43:11] <ssbr_> OK, in what way are they different?
[14:43:15] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[14:43:26] <nmatsakis> well, for one thing, when you have an overloaded operator,
[14:43:33] <thiez> it's like passing a **p in C where it expects *p :D
[14:43:35] <nmatsakis> x + y is equivalent to => (&x).OP(&y)
[14:43:50] <nmatsakis> in this case, OP = add()
[14:44:12] <nmatsakis> and in the pattern, Foo(ref s) says "borrow the s from the thing I am matching"
[14:44:17] <johnmurray> Hey, I'm working on a simple crate, and I'm trying to get the #[path] attribute to work, but perhaps I'm using it incorrectly. Every time I try to compile I get errors. Can someone take a look: https://github.com/JohnMurray/string-match/blob/master/string_match.rc
[14:44:19] <nmatsakis> so in the first version, there is no move ultimately
[14:44:28] <nmatsakis> whereas in the second version, `s` is moved out of of the thing being matched
[14:44:31] <nmatsakis> (and then borrowed in the call)
[14:44:40] <benh> Is that better than OP(&x, &y) or does it just predate static trait functions?
[14:45:02] * benh idly wonders about symmetry
[14:45:07] <ssbr_> nmatsakis: so when I do *x, whether or not a move is performed there depends on what I do with the result (if I borrow it, no move)?
[14:46:14] <cyndis> it cannot be moved, since you cannot move out of a dereference
[14:47:17] <ssbr_> I guess that's to keep the analysis of moves simple?
[14:47:21] <nmatsakis> ssbr_: yes, consider: 'let y = &*x'---> no move
[14:47:25] <ssbr_> or maybe just to make the rules simple
[14:47:28] <ssbr_> (for humans too)
[14:47:31] <nmatsakis> it's not the keep the rules simple, it's to keep them coherent :)
[14:47:51] <nmatsakis> benh: I would like to change it to OP(&x,  &y)
[14:47:55] <ssbr_> it would not be internally consistent to be able to move out of a dereference?
[14:47:55] <nmatsakis> benh: I just opened an RFC on this today
[14:48:11] <nmatsakis> ssbr_: oh, we should support that too, but not when the *x is inside an &
[14:48:19] <nmatsakis> ssbr_: in other words, that is the *meaning of `&`*
[14:48:21] <nmatsakis> is that it does not move
[14:48:27] <nmatsakis> it's the distinction between lvalues and rvalues
[14:48:31] <ssbr_> nmatsakis: right
[14:48:32] <nmatsakis> that we inherit from C, basically
[14:48:34] <ssbr_> uh, not as right
[14:48:41] <ssbr_> in that I don't know anything about lvalues or rvalues
[14:48:48] <nmatsakis> well, lvalue means "value with an address"
[14:48:53] <ssbr_> the confusion I had was that I thought *x would be immediately translated to a move
[14:49:03] *** Quits: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP) (Ping timeout)
[14:49:06] <ssbr_> regardless of what you do with it
[14:49:14] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:49:15] <thiez> ssbr_: it's okay as long as you don't assign it to anything :D
[14:49:16] <nmatsakis> right, and it is a move, but only if you use it in an "rvalue" context, meaning one that is not borrowing it
[14:49:37] <cyndis> johnmurray: take the semicolon off the attribute line
[14:49:43] <nmatsakis> ssbr_: consider also *x = 5, this does not move out of *x
[14:49:54] <nmatsakis> ssbr_: that's where the name lvalue comes from, it's on the left-hand-side of an assignment
[14:50:04] <ssbr_> that was where I'd heard it before
[14:50:09] <nmatsakis> ssbr_: but sometimes lvalues appear in other places, such as after an `&`
[14:50:16] <ssbr_> but you're saying in rust, "lvalue" means "we care about its address specifically"
[14:50:29] <johnmurray> cyndis: Thanks! One problem down. Now to get it to finish compiling (just hangs) lol.
[14:50:31] <nmatsakis> what's a bit surprising is that we make overloaded operators lvalues---it works out better that way tho
[14:50:41] <cyndis> johnmurray: :)
[14:50:45] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[14:51:05] <cyndis> johnmurray: compiles fine on my machine with about latest incoming
[14:51:22] <johnmurray> hmm hangs on 0.6
[14:51:30] <johnmurray> does nothing actually
[14:51:31] <ssbr_> nmatsakis: hmmm, this is useful
[14:51:43] <johnmurray> cyndis: guess I'll grab a newer version
[14:51:52] <ssbr_> thank you
[14:52:04] <ssbr_> I'll see if I can apply this knowledge in debugging my nonsensical code writings
[14:55:55] <ssbr_> I can! yikes
[14:56:39] <ssbr_> I'm now better at crushing errors related to me not borrowing when I should <_<
[14:57:13] <nmatsakis> ssbr_: cool :)
[14:57:29] <nmatsakis> ssbr_: ping me if you run into more questions, I'm always on IRC (as you may have noticed), but not necessarily monitoring it at any given moment :)
[14:57:44] <ssbr_> nmatsakis: I don't want to bug only you!
[14:58:10] <EXetoC> you made some borrowck progress not long ago, right?
[14:58:10] <ssbr_> but yeah, I'm noticing that it's indeed a mistake to ever take ownership of a thing unless you really really mean it
[14:58:20] <nmatsakis> ssbr_: so far np :) it's very useful to me to understand what people find confusing
[14:58:36] <nmatsakis> EXetoC: yes, we landed a big patch yesterday that should hopefully improve user experience substantially
[14:58:39] <ssbr_> nmatsakis: well, apparently you're fixing the thing I find really confusing with that size stuff
[14:58:44] <nmatsakis> not to mention being..um...sound
[14:58:50] <EXetoC> great
[14:58:53] <nmatsakis> (or I should say "closer to sound", plenty of bugs left)
[14:59:12] <nmatsakis> soundness is really one of those asymptotic properties :)
[14:59:41] <nmatsakis> anyway, I believe that the logic the code is intended to express is now sound, whereas before it was not.
[14:59:50] <nmatsakis> ssbr_: you mean Sized types like ~[T]?
[15:00:05] <nmatsakis> yes, I hope we can smooth out that wrinkle very soon, though it will prob not be me who will do the coding
[15:00:12] <ssbr_> nmatsakis: I mean the whole discussion you missed was me being confused as to how to go from a ~[T] to a &[T]
[15:00:16] <ssbr_> and a ~str to a &str
[15:00:32] <ssbr_> apparently I guess I just need to A) not move it, B) assign it to something of type &[T]/&str
[15:00:36] <ssbr_> and then I get what I want?
[15:01:03] *** Joins: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com)
[15:01:09] <ssbr_> so the efforts are mostly w.r.t. A), since I can't declare the type of a variable in a pattern match to be &[T]/&str
[15:01:35] <ssbr_> so I do things like matching against ref x, and then dereferencing x to assign to something of type &[T]/&str
[15:01:39] <ssbr_> I think that's the right approach?
[15:02:00] <nmatsakis> yes, right
[15:02:13] <cyndis> note that if you have a struct Thing(~str), you can get the ~str out just be dereferencing the struct itself
[15:02:18] <nmatsakis> this in particular I do think is confusing
[15:02:26] <nmatsakis> (not what cyndis said per se)
[15:02:46] <nmatsakis> (just the fact that you must treat ~[] a bit differently than other ~T to get a &[])
[15:03:06] *** Quits: z0w0 (zack@moz-69F8D0D5.lnse3.cha.bigpond.net.au) (Quit: Leaving.)
[15:03:37] <ssbr_> I'm generally disturbed by vecs and strings. I don't think it's very honest to give them pointer sigils :(
[15:03:44] <friggle> I assume the Sized proposal will be discussed in the meeting today?
[15:04:41] <nmatsakis> friggle: I presume so
[15:07:35] <bjz> cyndis: eh I have lifetime errors now
[15:08:30] <cyndis> bjz: :(
[15:08:56] <cyndis> need to recompile rustc to get the ApproxEq change
[15:10:04] <bjz> cyndis: here is the branch: https://github.com/bjz/lmath-rs/tree/remove-numeric
[15:10:18] <cyndis> yes, just checkout'ed it
[15:10:33] <bjz> the tests don't compile though
[15:13:51] *** Quits: wunki (wunki@moz-7300E3D6.ip.prioritytelecom.net) (Ping timeout)
[15:13:57] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[15:14:11] <thiez> so, what does this one mean: error: mismatched types: expected `'a` but found `'b` (expected type parameter but found type parameter)
[15:15:09] <nmatsakis> thiez: there is a horrible bug that REALLY REALLY ought to be fixed 
[15:15:25] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Client exited)
[15:15:27] <nmatsakis> thiez: in that the compiler always prints `'a` and `'b` to refer to "the first declared type parameter" and the "second declared type parameter" in the current scope
[15:15:42] * nmatsakis contemplates fixing that *right now*...
[15:15:50] <nmatsakis> thiez: does that help?
[15:15:57] <nmatsakis> thiez: if not, gist the fn in question
[15:16:24] <thiez> I'm doing something dirty with Ports and Chans
[15:16:29] <nmatsakis> thiez: it's one of those relatively simple but rather annoying bugs to fix, so it hasn't happened yet...
[15:17:42] <thiez> ah, now that I know what the compiler is trying to tell me my mistake was obvious
[15:18:18] *** Quits: pyrac (pyrac@19E86D0A.73C89388.AD05C589.IP) (Ping timeout)
[15:21:56] *** Quits: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Client exited)
[15:22:40] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:23:31] *** Joins: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[15:25:36] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Quit: Lost terminal)
[15:29:11] *** Quits: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) (Ping timeout)
[15:31:48] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[15:34:43] *** Quits: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP) (Ping timeout)
[15:35:10] *** Joins: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP)
[15:35:42] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[15:42:39] <thiez> well, that took way longer than it should have, but yay, it seems I have some kind of worker tasks
[15:47:45] *** Joins: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se)
[15:49:28] *** Quits: trapni (trapni@moz-6A0EA166.dawanda.com) (Quit: Leaving)
[15:53:07] *** Parts: berak (chatzilla@A9016A70.4742BCFA.1A5CC7E5.IP) ()
[15:53:31] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:53:39] *** Quits: fabiand (fabiand@moz-53800E1C.adsl.alicedsl.de) (Quit: Verlassend)
[15:56:17] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:57:41] *** Joins: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com)
[15:58:53] *** Joins: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP)
[15:58:53] *** ChanServ sets mode: +qo graydon graydon
[16:01:00] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:02:30] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:02:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/flLx8A
[16:02:30] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:03:32] <graydon> grr vidyo giving me grief. rebooting.
[16:03:38] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Connection reset by peer)
[16:05:28] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:05:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IRlGjg
[16:05:28] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:06:38] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[16:07:01] *** Joins: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP)
[16:07:02] *** ChanServ sets mode: +qo graydon graydon
[16:07:08] <graydon> hrmph!
[16:07:16] <graydon> vidyo is steadfastly refusing to function
[16:07:31] <bjz> is that what you use for the meetings?
[16:07:55] <graydon> yeah
[16:07:59] <bjz> :(
[16:08:28] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:10:19] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[16:11:18] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:11:28] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[16:11:50] <jack> seth mentioned yesterday when he had problems that it worked when he launched the desktop part first i think
[16:11:55] <jack> but wouldn't if he went web first
[16:13:21] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[16:14:54] <nmatsakis> graydon: what's up?
[16:14:55] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[16:14:55] *** ChanServ sets mode: +o brson
[16:14:59] <nmatsakis> graydon: anything we can do
[16:15:03] <nmatsakis> graydon: (or fallback to the phone?)
[16:15:09] <graydon> trying...
[16:15:14] <graydon> I'd say start without me
[16:15:17] <graydon> I have no agenda items today
[16:15:22] <graydon> (except congrats!)
[16:15:22] <nmatsakis> graydon: as it happens, everybody is late today :)
[16:15:38] <jld> So, there was mail about vidyo not working if you use v.mozilla.com, and that you have to "right click" on something to launch a local application.
[16:15:44] <jld> This does not appear to exist on the Linux port.
[16:16:40] <friggle> are you not all contractually obliged to use webrtc ;)
[16:17:02] <nmatsakis> https://etherpad.mozilla.org/Meeting-weekly-2013-05-07
[16:17:39] <graydon> friggle: I'd be into it, but no
[16:19:02] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:19:03] *** ChanServ sets mode: +o dherman
[16:19:06] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:21:07] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[16:21:35] *** zz_kimundi is now known as kimundi
[16:23:52] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[16:24:02] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: rcirc on GNU Emacs 24.2.1)
[16:31:14] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:32:04] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[16:35:19] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:35:58] <indutny> hey people
[16:36:02] <indutny> good morning US :)
[16:36:07] <indutny> so I've a question
[16:36:32] <indutny> how can I make struct contain two borrowed pointers: one for another struct and one for field in that another struct
[16:36:46] <indutny> forgot to mention
[16:36:49] <indutny> both pointers are mutable
[16:37:17] <indutny> (note: in reality latter of them is a pointer to mutable hashmap's value with hashmap stored inside first struct)
[16:37:28] <indutny> (so looking it up isn't a solution)
[16:39:29] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[16:40:11] <jack> indutny: i'm pretty sure you can't have two mutable aliases to the same memory
[16:41:10] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[16:43:07] *** Quits: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net) (Connection reset by peer)
[16:43:26] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:43:29] *** Joins: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net)
[16:43:48] *** Quits: boggle (boggle@moz-5FED67F0.dip0.t-ipconnect.de) (Quit: boggle)
[16:45:03] *** Joins: cc (cc@moz-9962C9F4.rev.numericable.fr)
[16:46:05] <indutny> but those objects have exactly the same lifetime
[16:46:28] <indutny> because first object is an owner of second object
[16:47:04] *** Joins: eholk (eholk@moz-4E33D4F.wavecable.com)
[16:47:47] *** Quits: eholk (eholk@moz-4E33D4F.wavecable.com) (Quit: eholk)
[16:51:41] <kimundi> indutny: The rule is that a mutable reference is allways the only usable to an object to prevent unsound behavior
[16:51:53] <EXetoC> can task failure messages be suppressed?
[16:53:05] <kimundi> EXetoC: Currently the messages just get directly passed to the c++ runtime, after wich magic happens. But I was told that there it gets printed out, and then unwinding starts
[16:54:01] <kimundi> EXetoC: Unless I'm missing something major in the c++ sources, (which I don't understand), nothing is able to interject those messages.
[16:54:30] <kimundi> But something should. :)
[16:54:57] <EXetoC> yeah. will probably be possible some time
[16:55:01] <indutny> kimundi: ok, I'll figure it out
[16:58:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:59:18] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[16:59:58] <kimundi> rusti: /* sing for me! */ println(str::repeat("la ", 5u))
[16:59:59] <rusti> la la la la la
[17:00:14] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[17:00:53] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[17:01:43] <bjz> :)
[17:01:54] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:01:54] *** ChanServ sets mode: +o pcwalton
[17:02:18] <bjz> pcwalton: r? https://github.com/mozilla/rust/pull/6301
[17:02:45] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[17:02:51] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:03:23] <EXetoC> I'm trying to make sure that assertions fail on certain input, so these task failure messages can be confusing
[17:03:48] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:03:57] <nmatsakis> pcwalton: you mentioned that you weren't seeing the borrow messages?
[17:04:02] <bjz> I scared him off :)
[17:04:40] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:04:40] *** ChanServ sets mode: +o pcwalton
[17:04:53] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:05:06] <friggle> did the meeting run out of time?
[17:05:07] <indutny> ok, did it in another way :)
[17:05:54] <bjz> pcwalton: interesting PR too: https://github.com/mozilla/rust/pull/6296
[17:06:35] <bjz> pcwalton: apparently FuzzyEq was buggy for big numbers
[17:07:16] <EXetoC> *inputs
[17:08:02] <EXetoC> whatever, it's barely an issue. later!
[17:08:16] *** kimundi is now known as zz_kimundi
[17:08:25] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[17:08:27] *** Joins: thelivingded (thelivingd@3F425D5D.187F07D0.274BF680.IP)
[17:10:15] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[17:10:21] <brson> nmatsakis: Do you still think we can get rid of Durable?
[17:10:33] <nmatsakis> brson: I thought we renamed it to 'static?
[17:10:44] <nmatsakis> brson: did you mean get rid of 'static?
[17:10:44] <brson> the Durable trait still exists
[17:10:44] *** Joins: mschifer (Adium@43CB6079.66715431.D25A875A.IP)
[17:10:50] <strcat> nmatsakis: https://github.com/mozilla/rust/pull/6305 r?
[17:10:54] <nmatsakis> oh, then ... yes? I am not sure what it's being used for
[17:11:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:11:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/O4Qu2w
[17:11:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:11:30] <brson> nmatsakis: only TLS
[17:11:42] <nmatsakis> brson: do they use Durable and 'static?
[17:11:47] <nmatsakis> or just Durable?
[17:12:01] <nmatsakis> pcwalton: oh, was it you who found the ~fn -> &fn leak?
[17:12:05] <brson> just Durable
[17:12:22] <nmatsakis> brson: interesting. well, I think we can remove it, should be using 'static...
[17:12:27] <brson> ok
[17:12:36] <brson> I also think we should rename Const and Owned
[17:12:38] <nmatsakis> brson: ...if you run into trouble lemme know and I'll poke at it. I'm in the mode of doing small fixes
[17:12:42] <nmatsakis> rename Const to what?
[17:12:45] <brson> Imm
[17:12:50] <brson> or Immutable
[17:13:00] <nmatsakis> oh, ok. I don't care much, any of those names are fine by me.
[17:13:02] <strcat> brson: statically freezable things are const though
[17:13:04] <nmatsakis> oooh, I just realized
[17:13:12] <nmatsakis> if we snapshot, we ... should be able to remove const
[17:13:27] <brson> strcat: are you saying that Immutable is a bad name then?
[17:13:27] <nmatsakis> or maybe even without one, worth a try. :)
[17:13:31] <strcat> brson: yeah
[17:13:41] <strcat> I don't know a good name :)
[17:13:44] <brson> strcat: I don't understand the difference between static freezable and immutable
[17:14:02] <brson> actually, i don't know what 'statically freezable' means
[17:14:04] <nmatsakis> strcat: I think immutable is an ok name for that? they are immutable, after all (at least for the scope of the type)
[17:14:10] <nmatsakis> I also don't know what that means :)
[17:14:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:14:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Y0NNeg
[17:14:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:14:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:14:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tCgJpw
[17:14:14] <ghrust> 13rust/06auto 1444c1e46 15Alex Crichton: Improve lifetimes on foldl/foldr and lift the Copy requirement
[17:14:14] <ghrust> 13rust/06auto 1419d2ba3 15bors: auto merge of #6254 : alexcrichton/rust/issues-5311-4490-better-foldl, r=graydon...
[17:14:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:14:17] <strcat> brson: like 'let mut xs = ~[1, 2, 3]; let xs = xs; /* freeze */'
[17:14:18] <nmatsakis> but I presume it means "borrowed as &T"
[17:14:35] <strcat> anything where mutability is determined by ownership is Const
[17:15:13] <strcat> if only there was a shorter word for InheritedMutability ;p
[17:15:17] <nmatsakis> I see, so you're saying immutable is a bad name because it's only immutable if it's in an immutable location?
[17:15:20] <strcat> yeah
[17:15:48] *** Joins: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:16:04] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[17:16:18] *** Quits: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP) (Quit: jeff)
[17:16:26] <strcat> well, inherited mutability or immutable - but immutable things essentially inherit mutability (they just don't offer a way to use it)
[17:16:31] <brson> Freeze then?
[17:16:43] <brson> Copy, Send, Freeze
[17:16:50] <nmatsakis> that works for me
[17:16:55] <brson> <strike>Durable</strike>
[17:17:12] <strcat> brson: yeah, Freeze is okay
[17:17:19] <strcat> I like it better than Const
[17:17:22] <brson> Owned and Const are both *only* used for concurrency
[17:17:42] <strcat> brson: Const is also usable as a way to prevent cycles in reference counted things
[17:17:53] <strcat> they need *either* an Owned bound or a Const bound
[17:17:57] <pcwalton> I think the kinds are basically just for concurrency and a little bit of memory management
[17:18:04] <pcwalton> Haskell and the MLs don't have such a thing
[17:18:06] <brson> except Copy
[17:18:20] <strcat> Copy should really mean implicitly copyable
[17:18:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:18:34] <pcwalton> I want to get rid of Copy still
[17:18:50] <strcat> pcwalton: well I think it should stay, but allow you to do implicit copies
[17:18:51] <nmatsakis> pcwalton: did you have new thoughts in that direction?
[17:18:53] <strcat> it can mean POD
[17:18:59] <strcat> no destructors
[17:19:17] <brson> we do nee a POD kind
[17:19:19] <pcwalton> nmatsakis: well, I wanted to make clone an associated fn instead of a method.
[17:19:23] <brson> or, there is code that needs POD
[17:19:32] <pcwalton> because of autoderef
[17:19:40] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:19:48] <strcat> hmm, I guess @ gets in the way
[17:20:02] <strcat> but you can get rid of that with Copy + Owned
[17:20:28] *** Joins: thomaslee_ (thomaslee@moz-6C3931E3.static.twtelecom.net)
[17:23:52] <nmatsakis> graydon: brson: did either of you plan to (or already) move minutes to wiki?
[17:24:20] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:24:39] <graydon> I did not. happy to do so.
[17:25:04] <brson> graydon can do it
[17:25:11] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:26:24] <nmatsakis> jclements: regarding #493 (mods within fns)---
[17:26:32] <nmatsakis> jclements: I've decided to defer to your judgement in all things macro---
[17:26:42] <jclements> urg. frightening
[17:26:51] <nmatsakis> jclements: does that mean we should close this issue as "WONTFIX" (or perhaps repurpose it to "remove mods from fns")?
[17:27:08] <jclements> nmatsakis: looking...
[17:27:19] <strcat> what about extern blocks in fns? is that the same thing?
[17:28:18] <nmatsakis> extern blocks are not modules, but I have no idea how they would interact with hygiene
[17:28:39] <nmatsakis> I don't really get why mods and hygiene interact, tbh, but I believe they do.
[17:29:02] <nmatsakis> actually, given the way that we resolve paths now,
[17:29:07] <nmatsakis> I think a module in a function could never be referenced?
[17:29:22] <nmatsakis> pcwalton: all paths are relative to either the crate (use statement) or the current module (fn body), right?
[17:29:42] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[17:30:22] <nmatsakis> strcat: regarding your push---
[17:30:34] <jclements> nmatsakis: thinking.
[17:30:36] <nmatsakis> strcat: hmm, never mind.
[17:30:52] <nmatsakis> jclements: (make sure to note what I wrote a few lines above regarding path resolution, if you didn't already)
[17:31:21] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Ping timeout)
[17:31:50] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:32:35] <pcwalton> nmatsakis: yes
[17:33:24] *** Quits: thelivingded (thelivingd@3F425D5D.187F07D0.274BF680.IP) (Ping timeout)
[17:33:24] *** Joins: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP)
[17:34:22] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[17:34:29] *** Joins: pepijndevos_ (pepijndevo@moz-3B3842BD.speed.planet.nl)
[17:34:39] <graydon> nmatsakis: updated wiki
[17:34:45] <pepijndevos_> <3 rust
[17:34:48] *** Joins: FluffySauce (textual@moz-E5BC5F6F.sea.popcap.com)
[17:36:08] <friggle> graydon: don't you have the date wrong on your new meeting wiki page?
[17:36:25] <graydon> \o/
[17:36:35] <graydon> um
[17:37:13] <graydon> fixed?
[17:37:24] <friggle> yup
[17:44:12] <jclements> nmatsakis: okay, I think this problem is solved from both ends. I'll add a few lines to the bug.
[17:44:31] <nmatsakis> jclements: cool.
[17:44:47] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[17:45:05] <acrichto> with the new borrowck rules, why can't you invoke any method on a &mut field when you have a &self method? https://gist.github.com/alexcrichton/5534561
[17:45:45] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:45:47] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[17:46:29] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:47:27] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Input/output error)
[17:47:33] *** Joins: bnicholson_ (bnicholson@2557E599.66715431.D25A875A.IP)
[17:47:51] <nmatsakis> acrichto: you need an &mut self method
[17:47:55] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[17:47:58] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:47:58] *** ChanServ sets mode: +o pcwalton
[17:48:00] <nmatsakis> acrichto: the reason is that you must have a unique receiver
[17:48:28] <nmatsakis> acrichto: basically, to use an &mut pointer, it must be the only pointer to the thing it points at
[17:48:32] <strcat> acrichto: you can copy that & so you can make aliases of the &mut
[17:48:35] <nmatsakis> acrichto: if that &mut pointer is within an & pointer, the & could be aliased
[17:48:49] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[17:48:58] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[17:49:36] <acrichto> oh I see, that makes sense, thanks!
[17:50:11] <nmatsakis> need to get a FAQ going, so we can point to it from within error messages, as we've talked about...
[17:50:17] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[17:50:32] <acrichto> nmatsakis: something super helpful would be some example code where if the check wasn't in place would produce unsound behavior
[17:50:38] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[17:50:48] <nmatsakis> acrichto: yes, exactly, that's the kind of thing I wanted to put in the FAQ
[17:50:53] <nmatsakis> acrichto: so as to help persuade people the check servds a purpose :)
[17:51:21] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[17:51:21] *** ChanServ sets mode: +o pcwalton
[17:51:32] <bstrie> has anyone seen erickt? I have a question about a bug he's filed
[17:53:15] <nmatsakis> bstrie: can you remind me the bug# you pointed me at yesterday and asked for details?
[17:53:20] *** Quits: akashj87 (akash@7606EB88.33D70F06.35E3DDC8.IP) (Quit: Leaving)
[17:54:57] <indutny> haha
[17:55:03] <indutny> wanna see rustc -O eating all available memory?
[17:55:11] <indutny> I can give you an example
[17:55:50] <indutny> its pretty simple actually
[17:56:03] <indutny> one file "a.rs" contains: "mod b" and "b.rs" contains "mod a"
[17:56:27] <thiez> it doesn't eat memory without -O?
[17:56:46] <indutny> one sec
[17:56:53] <indutny> it definitely does
[17:57:05] <indutny> but I just realized that my project has no circular references
[17:57:09] <indutny> s/references/includes/
[17:57:24] <indutny> ah
[17:57:33] <jdm> is it just me, or is it impossible to search a github project's issues now?
[17:57:34] <indutny> it was module, that was importing itself
[17:57:41] <jdm> this makes bug triage significantly more difficult for me
[17:58:01] <strcat> jdm: they removed the issue tracker search
[17:58:02] <strcat> but...
[17:58:10] <strcat> you can use the search box at the top and then click 'issues' in the results
[17:58:14] <johnmurray> I'm trying to compile this file: https://github.com/JohnMurray/string-match/blob/master/string_match.rc but rustic just seems to hang. Let it run for an hour and it just peaked the CPU to 100% and never finished or output any messages. 
[17:58:16] <strcat> there's just no useful completion anymore :(
[17:58:24] <johnmurray> Any thoughts for seeing what's going on?
[17:58:27] <jdm> how delightful!
[17:58:57] <indutny> johnmurray: its including itslef
[17:59:01] <indutny> exactly what I've just experienced
[17:59:04] <indutny> remove last line
[17:59:09] <indutny> ah wait
[17:59:30] <johnmurray> oh so it doesn't realize that I'm trying to load a separate file?
[17:59:37] <ssbr_> OK, what could possibly be up here? http://bpaste.net/show/jvKXXWHdn9QN7ouIid65/
[17:59:45] <johnmurray> well no.. because it complains without the path definition that it can't find the module
[18:00:04] <thiez> johnmurray: might be, try renaming src/string_match.rs to something else
[18:00:07] <ssbr_> It's saying not all control paths return a value, but the function is just as shown there -- there is only one path, and it returns a value
[18:00:22] <indutny> ssbr_: missing return?
[18:00:32] <ssbr_> oh damn it
[18:00:33] <ssbr_> semicolon
[18:00:38] * ssbr_ derps
[18:00:57] <ssbr_> I guess that'll only bite me once though
[18:01:02] <lucian> ssbr_: heh
[18:01:14] <johnmurray> indutny: nope still hangs
[18:01:17] <thiez> ssbr_: if you truly believe that you're in for some disappointment ;)
[18:01:18] <lucian> i guess this may turn up to be a small flaw in the language eventually
[18:01:32] <ssbr_> thiez: rather, I'll only be baffled by it once
[18:01:42] <lucian> ssbr_: i've found it doesn't happen very ofte
[18:01:44] <ssbr_> I'm OK with being like "oh oops, forgot to hit backspace an extra time" every once in a while
[18:01:47] <thiez> I always forget when I program rust, and I always remember when I'm programming *any* other language :D
[18:02:09] *** zz_kimundi is now known as kimundi
[18:02:14] <cyndis> johnmurray: try running under strace
[18:02:23] *** Quits: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP) (Ping timeout)
[18:02:51] <thiez> johnmurray: If I may ask, why do you have a mod string_match in string_match?
[18:02:55] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[18:03:03] <thiez> (the .rs version)
[18:03:04] *** Joins: fairfieldt (chatzilla@F0DA239E.246E5E69.4AE11518.IP)
[18:03:13] <johnmurray> cyndis: such as "rustic -Z trace string_match.rc" ?
[18:03:22] <thiez> string_match::string_match seems kind of annoying to type
[18:03:26] <johnmurray> thiez: no reason. I should really remove it, but it doesn't work regardless
[18:03:40] <FluffySauce> hm so I'm using a build from incoming with the new borrow checker but I still can't seem to figure out how to handle multiple borrows: http://pastebin.com/s7qzpfrj
[18:03:43] <johnmurray> thiez: agreed
[18:04:39] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[18:04:41] <cyndis> johnmurray: no, "strace rustc string_match.rc". though i guess that only applies if you're on linux
[18:04:57] <cyndis> it's a tool that will show if it hangs on a syscall
[18:05:12] <johnmurray> I'm on Mac. Don't have strace on my system by default but I can look for it
[18:05:16] <johnmurray> not sure if it runs on Mac
[18:05:24] <otters> dtrace
[18:06:24] <johnmurray> otters: thanks. I'll have to play with it. All it said is no probes specified. But I don't know much about dtrace so I'll have to mess with it.
[18:06:37] <otters> me neither
[18:09:24] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[18:10:15] <indutny> ok, another question about module system :)
[18:10:30] <johnmurray> so if I run dtruss on mac, it just loops on this error: read_nocancel(0x3, "\0", 0x1000)                 = -1 Err#21
[18:10:38] <indutny> can I implement trait in B.rs for struct declared in A.rs
[18:10:39] <indutny> ?
[18:10:53] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[18:11:02] <indutny> johnmurray: can you profile it?
[18:11:08] <indutny> using Activity Monitor
[18:11:10] <indutny> or Instruments.app
[18:11:21] <johnmurray> to get at what in particular?
[18:11:37] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Input/output error)
[18:11:37] *** Quits: bnicholson_ (bnicholson@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[18:12:26] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[18:12:41] *** Joins: echristo (echristo@CFC3C6C3.D6CCE4AE.77834EAA.IP)
[18:13:10] <johnmurray> indutny: From war I can see on instruments.app, it'll just give me CPU and Memory usage and other performance stats.
[18:13:45] <indutny> there is "Time Profiler" instrument
[18:13:59] <johnmurray> to tell me how long it takes?
[18:14:08] <indutny> no
[18:14:23] <indutny> to tell you what is running on your cpu
[18:14:47] <thiez> indutny: as I recall you can implement a trait either in the module where the trait is declared, or in the module where the struct is declared
[18:14:49] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[18:14:57] <indutny> well
[18:15:02] <indutny> trait is declared in B.rs too
[18:15:13] <indutny> but I can't see method outside A and B
[18:15:18] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[18:15:20] <indutny> like, I use methods declared in A
[18:15:26] <thiez> is it 'pub'? :)
[18:15:27] <indutny> but methods in B are invisible to me
[18:15:32] <indutny> yes
[18:15:39] <indutny> both trait
[18:15:40] <indutny> method
[18:15:42] <indutny> and impl method
[18:16:28] <thiez> odd. Tried 'use'ing B::{traitname}
[18:16:31] <thiez> ?
[18:16:34] <johnmurray> indutny: Interesting, it's stuck on task::spawn::spawn_raw_oldsched::make_child_wrapper::anon_expr_fn_1653
[18:16:52] <indutny> ok, now I've no idea what that could mean :)
[18:16:57] <indutny> but it seems that its running a block
[18:17:08] <indutny> somewhere inside make_child_wrapper?
[18:17:10] <indutny> not sure
[18:17:22] <indutny> can you gist stack trace?
[18:17:50] <johnmurray> sure, diving deeper it's in io::read_whole_file
[18:19:15] <indutny> ah
[18:19:18] <indutny> well
[18:19:26] <indutny> are you looking at bottom-up call stack?
[18:20:02] <indutny> seems like its reading file and it never ends
[18:20:49] <indutny> and read_nocancel(...) = -21 you've seen in dtruss
[18:20:59] <indutny> is EISDIR
[18:21:04] <indutny> so rust was trying to read directory
[18:21:13] <johnmurray> hmm interesting.
[18:21:15] <indutny> yeah
[18:21:22] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[18:21:28] <indutny> ah, I know what
[18:21:33] *** Quits: pepijndevos_ (pepijndevo@moz-3B3842BD.speed.planet.nl) (Quit: got away safely)
[18:21:34] <indutny> you've #[path="src"]
[18:21:35] <indutny> right?
[18:21:38] <johnmurray> yeah
[18:21:44] <indutny> replace it with #[path="src/your_thing.rs"]
[18:21:49] <indutny> and then: mod your_thing;
[18:21:49] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[18:21:58] <johnmurray> okay, let me try
[18:22:23] <johnmurray> indutny: Worked!
[18:22:25] <indutny> haha
[18:22:29] <indutny> hooray
[18:22:46] <johnmurray> very behavior but thank you very much!
[18:22:54] <johnmurray> very odd*
[18:23:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:23:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/tCgJpw
[18:23:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:24:34] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:25:40] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[18:26:05] <thiez> okay, one of you going to post a bug about that? :D
[18:26:20] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:26:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/lBx3IQ
[18:26:20] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:26:21] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:26:21] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/45hsvQ
[18:26:21] <ghrust> 13rust/06auto 145b0bb76 15Brian Anderson: rt: Move win32_require out of the rust_kernel type...
[18:26:22] <ghrust> 13rust/06auto 141252064 15Brian Anderson: rt: Eliminate the dependency on rust_kernel from rust_rng
[18:26:22] <ghrust> 13rust/06auto 1433c40b9 15Brian Anderson: core::rt: Add a test that rng works with new tasks
[18:26:22] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[18:26:22] *** ChanServ sets mode: +o pcwalton
[18:26:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:26:24] <indutny> thiez: I've fixed it :)
[18:26:26] <indutny> let me try it
[18:27:09] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[18:28:18] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[18:29:04] *** Joins: blitter (blitter@moz-7C98731E.dyn.centurytel.net)
[18:29:39] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[18:31:33] <pepijndevos> How far of is Rust for generic ARM targets?
[18:33:12] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[18:34:51] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[18:35:17] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:35:18] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14aa173b8 to 1419d2ba3: 02http://git.io/N3iJvQ
[18:35:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:35:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:35:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ee88pg
[18:35:18] <ghrust> 13rust/06auto 144f436a8 15Brian Anderson: Enable test for #3707
[18:35:18] <ghrust> 13rust/06auto 145063928 15bors: auto merge of #6290 : brson/rust/issue-3707, r=thestinger...
[18:35:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:35:22] <strcat> jdm: btw I contacted github reporting the fact that there's no longer a way to search for just open bugs
[18:35:37] <strcat> really annoying :(
[18:35:45] <Luqman> pepijndevos: there is a pull request currently for linux arm in addition to android
[18:35:54] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: Leaving)
[18:35:58] <thiez> strcat: they'll never find your report between all their closed bugs
[18:36:08] <pepijndevos> Luqman: yay!
[18:36:08] <strcat> :D
[18:36:14] <graydon> and repos named "search"
[18:36:56] <strcat> sad that auto-complete is useless now but it was never very good
[18:37:01] <strcat> always used to show closed bugs
[18:37:01] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[18:37:36] *** Quits: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) (Ping timeout)
[18:37:56] <Jeaye> haha
[18:38:50] <strcat> graydon: their fuzzy matching is kind of ridiculously bad.
[18:40:26] <strcat> 'arc' matches the 'mozilla/rust' repo
[18:40:57] <strcat> s*a*fe concu*r*rent pra*c*tical language
[18:40:59] <strcat> yay.
[18:41:59] <strcat> as long as they add a filter for open bugs I'll be content though ;p
[18:42:02] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[18:45:06] *** Joins: boggle (boggle@moz-5FED67F0.dip0.t-ipconnect.de)
[18:47:09] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[18:47:38] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[18:47:43] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[18:48:45] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[18:50:16] <steven_is_false> I was looking at the possibility of testing out gold as a linker.
[18:50:29] <steven_is_false> But it doesn't work.
[18:50:32] <graydon> maybe lld or mclinker?
[18:50:38] <Luqman> steven_is_false: with rustc?
[18:50:45] * pcwalton embarks on removing modes from the language entirely
[18:50:52] <pcwalton> no longer parsing 'em
[18:50:53] <steven_is_false> Luqman: Yes, I was testing it out.
[18:51:33] <steven_is_false> Okay, so this is strange. Not even --linker ld works.
[18:51:40] <nmatsakis> pcwalton: whatever happened to your mut patch?
[18:51:42] <pcwalton> nmatsakis: are you OK with removing &const from the language?
[18:51:48] <pcwalton> nmatsakis: bors is working on it
[18:51:55] <nmatsakis> pcwalton: yes, I am, I was thinking of embarking on it myself
[18:51:58] <nmatsakis> (const)
[18:52:03] <Luqman> steven_is_false: oh right, so rust doesn't directly use ld
[18:52:04] <pcwalton> ok, if you'd like to do it feel free
[18:52:04] <strcat> steven_is_false: because rust uses gcc to link
[18:52:06] <strcat> not ld
[18:52:08] <Luqman> but clang or gcc
[18:52:09] <pcwalton> I'll move it to the bottom of my priority list
[18:52:11] <benh> Besides binary operators: Is there a general stance on whether a function in a trait ought to be a method or an associated function? Does the distinction feel like something "semantic" to anyone or should just every function taking the implementing trait as a parameter be a method?
[18:52:35] <nmatsakis> benh: I don't have a hard and fast rule, but I think there are some cases that feel more like fns...
[18:52:36] <steven_is_false> strcat: Yes using --linker gcc appears to work.
[18:52:46] <nmatsakis> benh: if none of the arguments is "primary" in some sense
[18:52:59] <strcat> steven_is_false: or --linker clang
[18:53:07] <nmatsakis> benh: but I guess it's mostly a matter of taste.
[18:53:19] <steven_is_false> strcat: Yes --linker clang works well.
[18:53:34] <Luqman> steven_is_false: https://github.com/mozilla/rust/issues/1300
[18:53:40] <graydon> brson: there are failures on incoming. I guess x86-isms?
[18:53:43] <graydon> flatpipes bugs
[18:53:45] <graydon> anyways
[18:54:03] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[18:54:04] <graydon> and one on ebml. I don't know what that's about.
[18:54:10] *** Joins: thou (thou@moz-A5259F33.hlrn.qwest.net)
[18:54:12] <graydon> not valgrind uncleanness though! \o/
[18:54:56] <strcat> --link-args doesn't seem to mix with --linker
[18:55:14] <steven_is_false> Does it make sense to do something like --linker clang --link-args -O4 ?
[18:55:38] <strcat> no
[18:55:38] <brson> graydon: I have a patch in for it
[18:55:46] <brson> building on incoming-full now
[18:55:48] <strcat> steven_is_false: lto won't work unless the compiler outputs lto data
[18:56:04] <steven_is_false> strcat: And there has been no work in that area?
[18:56:11] <strcat> don't think so.
[18:56:22] <Jeaye> brson: Is this relating to the Linux ICE on latest incoming?
[18:56:23] <graydon> great
[18:56:34] <indutny> is there any way to build rust fast? :)
[18:56:36] <Luqman> strcat: mix how so?
[18:56:38] <strcat> making the compiler output AST versions of every single function like it does with #[inline] would be LTO
[18:56:38] <indutny> when only one file changed
[18:56:49] <strcat> Luqman: well --link-args doesn't seem to work if you use --linker
[18:56:50] <graydon> brson: you were asking about maybe setting bors to run x86 and/or V on auto. still interested?
[18:56:52] <Jeaye> indutny: Break your build into multiple crates.
[18:57:00] <indutny> Jeaye: that's rustc
[18:57:07] <indutny> I just want to avoid building all stages
[18:57:21] <Jeaye> ahh
[18:57:21] <indutny> especially, considering that I changed only io.rs
[18:57:41] <graydon> build stage0 targets only
[18:57:53] <strcat> oh nvm it does
[18:58:00] <indutny> graydon: can you explain it a bit?
[18:58:04] <Luqman> strcat: --linker gcc --link-args "sdfa" fails for me with "gcc: No such file or directory" so it seems to work 
[18:58:11] <thomaslee_> hey folks -- is catamorphism around today?
[18:58:17] <Jeaye> steven_is_false: -O4?
[18:58:27] <graydon> thomaslee_: no, he's travelling
[18:58:28] <strcat> Jeaye: clang treats it as an alias for -O3 -flto
[18:58:37] <strcat> which won't be any different than not passing any args
[18:58:38] <Jeaye> strcat: Ahh
[18:58:47] <brson> Jeaye: no it isn't. is there an issue open?
[18:58:58] <strcat> -flto won't do anything unless the object files you hand to it were compiled with LTO
[18:59:02] <indutny> graydon: forgot "please"
[18:59:05] <strcat> or you can give it to the .c/.cc files directly
[18:59:12] <indutny> :)
[18:59:18] <thomaslee_> graydon: ah, thanks
[18:59:21] <brson> when I am testing core/std I use NO_REBUILD=1 to avoid rebuilding everything
[18:59:27] <brson> not sure if that helps
[18:59:30] <graydon> indutny: make x86_64-unknown-linux-gnu/stage0/lib/libcore.so or such
[18:59:43] <indutny> ah
[18:59:43] <brson> graydon: yes to doing full builds on auto
[18:59:44] <indutny> thanks
[18:59:48] <indutny> brb
[18:59:51] <Jeaye> brson: not sure yet, I only noticed it last night on thestinger's rust-incoming-git (daily build of Rust for Arch Linux) and then reverted to my old install since I needed to get work done.
[18:59:57] <Jeaye> I'll check again tonight.
[19:00:00] <brson> graydon: still fighting a lot of fires
[19:00:15] <brson> so it would help to not let them get through the bots
[19:00:33] <graydon> brson: cycle time is about 2h15 with x86 and V. so it'll mean we can only land ~10 changes a day (until we get it going faster).
[19:00:34] <brson> although our integration velocity is already pretty slow
[19:00:39] <graydon> I think that's the main thing
[19:00:39] <brson> yepp
[19:00:48] <brson> maybe we can split the x86_64/x86 bots in two
[19:00:53] <brson> parallelize
[19:00:54] <graydon> that's possible
[19:01:06] <graydon> we can also make subsets run on separate machines
[19:01:10] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[19:01:14] <graydon> i.e. each machine runs 10% of the testsuite
[19:01:23] <graydon> it's not the _build_ step that takes forever
[19:01:47] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[19:02:22] <graydon> (well, gosh, that does appear to be taking 1h; that's impressive! what is going on there?)
[19:02:38] <graydon> we're not, say, running host rustc under valgrind when building target or something, are we?
[19:02:54] <thomaslee_> I'm trying to figure out https://github.com/mozilla/rust/issues/4202 -- near as I can tell, the "pub use sub_foo::Foo" here https://gist.github.com/thomaslee/5522568 is causing rustc to think Foo is a module inside bar.rs.
[19:03:08] <strcat> graydon: it does
[19:03:16] <brson> graydon: we should not be valgrinding the compiler itself, no
[19:03:40] <brson> not that it couldn't have accidentally started
[19:03:54] <graydon> "should not" meaning "you think the makefiles do not try to do that" or "you think they do and we should stop"?
[19:03:59] <thomaslee_> Am thinking the metadata generated for foo.rs might be wrong (assuming that's where the type info for a crate is stored), but I'm not sure how to check that -- any suggestions where I can find that code and/or easily poke around in a crate's metadata?
[19:04:17] <brson> graydon: i think the makefiles do not try to do that
[19:04:26] <brson> there is a flag for it though
[19:04:35] <brson> so the machinery is there
[19:04:45] *** Joins: mschifer1 (Adium@2557E599.66715431.D25A875A.IP)
[19:05:28] <strcat> ah it's VALGRIND_COMPILE that turns it on
[19:05:55] *** Quits: mschifer (Adium@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[19:06:19] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[19:06:36] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[19:10:17] *** Quits: FluffySauce (textual@moz-E5BC5F6F.sea.popcap.com) (Quit: Computer has gone to sleep.)
[19:10:26] *** Quits: cc (cc@moz-9962C9F4.rev.numericable.fr) (Quit: cc)
[19:12:27] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[19:14:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:18:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:20:07] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:20:34] <nmatsakis> pcwalton: did you ever see proper borrowing errors?
[19:22:18] *** Joins: int3_ (int3_@9A375198.26321F00.F7721B25.IP)
[19:23:17] *** Quits: thou (thou@moz-A5259F33.hlrn.qwest.net) (Ping timeout)
[19:24:09] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[19:24:28] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[19:24:52] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[19:24:52] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[19:25:11] *** Quits: Dessimat0r (Dessimat0r@18379F6A.A5F62A94.8DDCAE07.IP) (Ping timeout)
[19:25:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:25:41] *** Quits: froystig (froystig@4AB93A85.352137A1.BCED17D.IP) (Quit: leaving)
[19:27:54] *** Joins: thou (thou@EE92CF04.29EB3C4A.AAF55CDA.IP)
[19:28:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[19:30:08] <pcwalton> nmatsakis: I didn't get the dynamic borrow check thing to work yet
[19:30:18] <pcwalton> but I figured out what was causing the problem and fixed it
[19:30:21] <nmatsakis> pcwalton: huh, ok. And you're building unoptimized?
[19:30:25] <pcwalton> "the dynamic borrow check thing" == recording
[19:30:26] <pcwalton> yeah
[19:30:28] <pcwalton> unoptimized
[19:30:31] <nmatsakis> pcwalton: also DEBUG_BORROWS should not be needed
[19:30:33] <pcwalton> I couldn't tell what the problem was
[19:30:35] <pcwalton> right
[19:30:37] <nmatsakis> pcwalton: if I checked it in set to true, that is wrong
[19:30:38] <pcwalton> I figured that out
[19:30:42] <pcwalton> you didn't
[19:30:44] <nmatsakis> ok
[19:30:53] <nmatsakis> pcwalton: this is on mac, right?
[19:30:56] <pcwalton> yes
[19:30:57] <nmatsakis> i'll give it a try on my mac
[19:31:04] <nmatsakis> maybe there's something arch-specific happening
[19:31:17] <nmatsakis> pcwalton: did you try on the tests in run-fail?
[19:31:20] <pcwalton> no
[19:31:34] <nmatsakis> ok, if you get a chance, I'd be curious to know how they fare
[19:31:41] <nmatsakis> borrowck-wg-*
[19:33:08] *** Quits: thou (thou@EE92CF04.29EB3C4A.AAF55CDA.IP) (Input/output error)
[19:34:53] *** Joins: fabiand (fabiand@moz-53800E1C.adsl.alicedsl.de)
[19:35:46] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[19:35:54] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[19:38:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:38:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ee88pg
[19:38:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:40:41] *** Joins: catpig (catpig@moz-9AC8F33A.dip0.t-ipconnect.de)
[19:41:25] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:41:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/eunYQw
[19:41:25] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:41:51] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[19:44:28] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:44:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/eunYQw
[19:44:28] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:45:11] <steven_is_false> Should there be a way to get dependencies of a crate from rustc?
[19:46:03] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[19:47:54] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[19:49:39] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[19:51:44] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[19:51:45] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: dylukes)
[19:55:32] <nmatsakis> brson: we should probably try for another snapshot soon. Is the procedure still the same?
[19:55:41] *** Quits: boggle (boggle@moz-5FED67F0.dip0.t-ipconnect.de) (Quit: boggle)
[19:55:42] <nmatsakis> (or have any changed been documented on the wiki?)
[19:55:57] <nmatsakis> there is a fair amount of stage0-specific stuff due to borrowck changes
[19:57:34] *** Joins: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP)
[19:58:52] *** Joins: cc (cc@moz-9962C9F4.rev.numericable.fr)
[20:03:24] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:05:30] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[20:05:36] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:05:52] *** Joins: boggle (boggle@moz-5FED67F0.dip0.t-ipconnect.de)
[20:08:31] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[20:09:17] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[20:09:59] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Quit: Tschuss!)
[20:10:21] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[20:11:05] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[20:11:18] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[20:14:51] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Input/output error)
[20:15:45] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[20:17:19] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[20:17:24] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[20:17:32] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[20:18:08] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[20:19:33] <bstrie> nmatsakis: ah, I see that you just found that bug. thanks for the update
[20:20:21] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[20:21:35] *** Joins: froystig (froystig@4AB93A85.352137A1.BCED17D.IP)
[20:21:49] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[20:22:51] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Input/output error)
[20:24:33] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[20:26:25] <indutny> so how does error!() works?
[20:26:29] <indutny> s/works/work/
[20:27:01] *** Quits: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net) (Client exited)
[20:27:31] *** Joins: pyrac (pyrac@moz-516480D0.w92-156.abo.wanadoo.fr)
[20:27:54] <indutny> I mena
[20:28:00] <indutny> I mean, it doesn't output anything
[20:28:07] <indutny> at least if followed by fail!()
[20:28:46] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[20:31:27] <kimundi> indutny: error!(), warn!() etc are logging staments. The output is only visible if you run the executable with an environment variable set
[20:32:44] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[20:33:46] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[20:36:25] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[20:42:31] <brson> nmatsakis: procedure is the same
[20:42:44] <nmatsakis> brson: ok, so push to snap-stage3, then scour output
[20:44:32] <brson> nmatsakis: the tarball names are all reported on the buildbot status page now, so no need to hunt through the logs
[20:45:29] <nmatsakis> brson: ok.
[20:47:03] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[20:52:26] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[20:52:37] *** Quits: fabiand (fabiand@moz-53800E1C.adsl.alicedsl.de) (Quit: Verlassend)
[20:52:42] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[20:53:13] *** Quits: Palmik (palmik@moz-DADC71F0.pks.muni.cz) (Quit: Lost terminal)
[20:54:03] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[20:55:24] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[20:56:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:56:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/AoE6ZA
[20:56:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:58:32] *** Joins: mib_mnkruh (Mibbit@1E2CFD5E.62B90F59.94EBC1AE.IP)
[20:59:04] *** Quits: mib_mnkruh (Mibbit@1E2CFD5E.62B90F59.94EBC1AE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:59:07] <indutny> kimundi: what env should I set?
[20:59:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:59:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/GD_2fw
[20:59:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:59:17] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:59:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gC-8KQ
[20:59:18] <ghrust> 13rust/06auto 14dfe608d 15Youngsoo Son: renamed tests
[20:59:18] <ghrust> 13rust/06auto 1445ae340 15bors: auto merge of #6294 : sonwow/rust/renamed-test, r=thestinger...
[20:59:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:59:18] *** Quits: int3_ (int3_@9A375198.26321F00.F7721B25.IP) (Client exited)
[21:00:29] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[21:00:37] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[21:00:43] *** Quits: mschifer1 (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[21:03:19] <kimundi> indutny, http://static.rust-lang.org/doc/rust.html#logging-system
[21:03:26] <indutny> ah, thank you
[21:03:35] *** Quits: Blub\w (wry@moz-8365B534.wireless.dyn.drei.com) (Quit: nn)
[21:05:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:05:37] <indutny> ok, who should I choose as a reviewer?
[21:05:44] <indutny> I've simple PR
[21:05:47] <brson> is 'static the only type parameter bounds that is a region?
[21:05:56] <strcat> Jon Rohan
[21:05:58] <strcat>  
[21:06:00] <strcat> 4:10 PM (53 minutes ago)
[21:06:01] <strcat>   
[21:06:03] <strcat> to me
[21:06:05] <strcat> Hi Daniel,
[21:06:07] <strcat> Thanks for your feedback! We're always working to improve GitHub and we consider every suggestion we receive. I've added your idea about the open/closed filters to the Feature Request List for the team to see.
[21:06:18] <kimundi> indutny, just put it up and let it wait there till someone looked at it
[21:06:26] * strcat is sure that's an automated response ;p
[21:06:31] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[21:06:55] <indutny> kimundi: ok
[21:07:06] <indutny> just in case, its there https://github.com/mozilla/rust/pull/6311
[21:07:39] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:07:52] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[21:09:37] <kimundi> indutny: Hm, you could put that error message just in the fail itself.
[21:09:50] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[21:10:05] <indutny> kimundi: I can, but it'll be inconsistent with the rest of the file. Are you sure?
[21:10:34] <kimundi> oh, if it's done that way in the rest of the file leave it
[21:12:16] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Quit: Leaving)
[21:14:22] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[21:16:33] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:17:57] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[21:21:08] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[21:22:26] *** kimundi is now known as zz_kimundi
[21:23:00] *** zz_kimundi is now known as kimundi
[21:23:12] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[21:23:40] *** Joins: enticeing (user@40584768.29B601FE.5037098C.IP)
[21:23:54] <enticeing> i think i'm doing something bad, i'm getting an illegal anonymous lifetime error
[21:24:11] <indutny> you probably need to add named lifetime
[21:24:19] <indutny> enticeing: can you post some code samples which are failing for you?
[21:24:53] <strcat> rusti: 1212121
[21:24:55] <rusti> 1212121
[21:24:57] *** Joins: mib_zp2yw2 (Mibbit@7755C8A3.75ED7979.D21A74F2.IP)
[21:25:18] <indutny> strcat: ?
[21:25:22] <enticeing> http://ix.io/5wl/ line 24, i think i shouldn't be using &
[21:25:30] <enticeing> but i'm not quite sure what to use
[21:25:36] <indutny> rusti: io::read_whole_file(&Path("/tmp"))
[21:25:39] <indutny> and its gone
[21:25:41] <rusti> timed out after 5 seconds
[21:25:44] <indutny> :)
[21:26:00] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[21:26:07] <nmatsakis> do we have a coding standard for how to name static constants? <-- (brson, graydon, pcwalton, tjc)?
[21:26:17] <pcwalton> ALL_CAPS
[21:26:19] <pcwalton> that's what I do
[21:26:28] <indutny> nmatsakis: that want work
[21:26:31] <indutny> or
[21:26:32] <indutny> oh
[21:26:33] <indutny> sorry
[21:26:34] <indutny> wrong nick
[21:26:43] <indutny> also
[21:26:44] <indutny> bad grammar
[21:26:49] <indutny> enticeing: you need another pointer
[21:27:00] <indutny> ah
[21:27:01] <indutny> no
[21:27:01] <indutny> sorry
[21:27:03] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[21:27:07] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[21:27:26] <indutny> just do struct<'self> Group { , conn: &'self Connection }
[21:27:28] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[21:27:31] <indutny> and
[21:27:35] <nmatsakis> pcwalton: ok. it seems a bit...forceful.
[21:27:39] <indutny> impl<'self> Group<'self>
[21:27:42] <Jeaye> nmatsakis: Agreed.
[21:27:46] <enticeing> and what does that do?
[21:27:47] <nmatsakis> pcwalton: particularly since enum variants are global constants.
[21:27:52] <Jeaye> Title case it!
[21:28:02] <Jeaye> Foo_Bar_Spam
[21:28:57] <strcat> afaik the conventions are just the pep8 ones
[21:29:02] <indutny> enticeing: http://static.rust-lang.org/doc/0.6/tutorial-borrowed-ptr.html#named-lifetimes
[21:29:05] <strcat> extended a bit
[21:29:25] <strcat> variable_name, function_name, method_name, TypeName, VariantName, STATIC_NAME
[21:29:30] <strcat> would be nice to enforce it.
[21:29:43] <indutny> enticeing: basically, as far as I understand it it'll tell compiler that Group structure is going to live not longer than connection inside it
[21:30:02] <nmatsakis> strcat: it just seems ... inconssntent to me. Since in the case of e.g. None, the variant is also a STATIC_NAME
[21:30:16] <enticeing> error: expected ident, found '<'
[21:30:21] <enticeing> should i stick it somewhere else?
[21:30:33] <strcat> nmatsakis: well I only find it inconsistent for C-like enums
[21:30:33] <Jeaye> Also, why switch to SomethingLikeThis when you were already using something_like_this?
[21:30:40] <Jeaye> That's inconsistent.
[21:30:41] <strcat> nmatsakis: None is basically a unit struct type
[21:30:51] <nmatsakis> I guess I find myself doing static tables
[21:30:57] <Jeaye> So it should be Something_Like_This.
[21:31:02] <nmatsakis> e.g., static BuiltinBounds: &[] = [ ... ];
[21:31:09] <nmatsakis> Jeaye: true but that is... just not done :)
[21:31:13] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[21:31:13] <Jeaye> :(
[21:31:23] <nmatsakis> and somehow static BUILTIN_BOUNDS: &[...] = [...]
[21:31:29] <nmatsakis> feels like a lot.
[21:31:40] <Jeaye> Win32 API and D3D here we come!
[21:31:42] <nmatsakis> but if everybody likes it, I'll go along.
[21:31:45] <strcat> nmatsakis: I wouldn't mind if we didn't uppercase statics
[21:31:45] <indutny> enticeing: how did you do it?
[21:31:49] <Jeaye> Hold caps when you type.
[21:31:54] <strcat> I just follow the existing conventions everywhere.
[21:31:58] <enticeing> `struct<'self> Group`
[21:32:03] <strcat> in C++ I never use uppercase variables/types/functions/methods
[21:32:05] <strcat> all lowercase
[21:32:09] <strcat> because the stdlib/boost do it that way
[21:32:09] <indutny> oh
[21:32:11] <Jeaye> strcat: Aye.
[21:32:11] <indutny> my bad
[21:32:16] <indutny> enticeing: struct Group<'self>
[21:32:17] <indutny> sorry
[21:32:19] <graydon> huh
[21:32:37] <enticeing> still getting an illegal anonymous lifetime...
[21:32:37] <graydon> incoming-quick-linux does its compile step in 20 minutes
[21:32:44] <graydon> incoming-full-linux takes 70 minutes
[21:32:48] <Jeaye> Jeeze.
[21:32:51] <enticeing> http://ix.io/5wn
[21:33:01] <Jeaye> graydon: job count?
[21:33:04] <strcat> and in C(++) uppercase is the only way to distinguish macros from non-macros ;p
[21:33:21] *** Joins: UA (BillyBobYe@moz-C86983EF.range109-148.btcentralplus.com)
[21:33:23] <UA> <UA> Hi there! Anyone bored and looking for something to pass the time? Check out www.ultimateassassins.org or alternatively this for a helpful hand with it http://ultimateassassins.org/toolbar.html, anyone who joins will receive 10,000 in game, speak in the shoutbox. Good day!
[21:33:23] <UA> <UA> I will happy to answer any questions you have about the game :)
[21:33:24] <graydon> that's more than double, which is .. weird. it's building 2 toolchains, but only 2. 32bit code runs that much slower?
[21:33:26] <nmatsakis> strcat: in principle I agree, when in Rome and all that, but in this case I get to influence the conventions :)
[21:33:44] <Jeaye> Nice copy paste.
[21:33:46] <strcat> nmatsakis: yeah, I just don't really have a strong opinion on it ;p
[21:33:58] <strcat> even in js/haskell land I'm happy to do sillyMixedCaseFunctions
[21:34:03] <Jeaye> Can we kick him, graydon, nmatsakis?
[21:34:15] <Jeaye> And ban?
[21:34:29] * graydon never knows how. some arcane IRC command..
[21:34:36] *** kimundi is now known as zz_kimundi
[21:34:41] <UA> I mean no harm
[21:35:00] <enticeing> UA: regardless, that's a little less than relevant here
[21:35:10] <UA> I apologise
[21:35:12] * nmatsakis doesn't know how either. :)
[21:35:22] <EXetoC> copying your own messages. spam alert
[21:35:39] <UA> I am sorry EXetoC
[21:35:39] <jclements> I love the sound my IRC client makes when someone gets kicked :)
[21:35:40] <EXetoC> how about automating it :p
[21:35:56] <Jeaye> /mode +b #rust *!*@moz-C86983EF.range109-148.btcentralplus.com
[21:36:00] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[21:36:12] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[21:36:20] <strcat> or just /ban *!*@moz-C86983EF.range109-148.btcentralplus.com in most clients
[21:36:26] <Jeaye> Yup
[21:36:31] *** graydon sets mode: +b #rust!*@*
[21:36:34] <strcat> lol
[21:36:39] <Jeaye> haha
[21:36:43] <enticeing> err
[21:36:49] <strcat> I guess the channel has separate +q.
[21:36:49] <fairfieldt> :-)
[21:36:56] <Jeaye> /mode #rust +b *!*@moz-C86983EF.range109-148.btcentralplus.com
[21:37:04] <UA> Hi guys
[21:37:07] <Jeaye> That's why //ban is so helpful
[21:37:12] *** Joins: FluffySauce (textual@moz-E5BC5F6F.sea.popcap.com)
[21:37:14] <graydon> guh, what did i even do?
[21:37:18] <strcat> graydon: ban everyone
[21:37:20] <strcat> :D
[21:37:22] <graydon> seriously?
[21:37:24] <benh> really?
[21:37:24] <strcat> yep
[21:37:26] *** Parts: benh (ben@moz-4A0366D2.org) ()
[21:37:26] *** Joins: benh (ben@moz-4A0366D2.org)
[21:37:29] <strcat> graydon: /mode -b *
[21:37:31] <nmatsakis> I ... cannot believe that this is the syntax one must use.
[21:37:31] <graydon> weird. hopefully it didn't work!
[21:37:31] <strcat> should fix it
[21:37:39] <benh> I don't think that's right
[21:37:42] <UA> www.ultimateassassins.org anyone?
[21:37:43] <strcat> graydon: apparently it didn't work
[21:37:49] <brendanc> you have to kick after the ban
[21:37:50] <strcat> graydon: oh
[21:37:54] <strcat> you banned people called #rust
[21:38:00] *** pcwalton sets mode: +b *!*@moz-C86983EF.range109-148.btcentralplus.com
[21:38:00] *** UA was kicked by pcwalton (pcwalton)
[21:38:08] <graydon> dude I just copied the command you wrote!
[21:38:08] <strcat> 17:36:14         -- | [#rust] #rust!*@* banned by graydon (graydon) on Tue, 07 May 2013 17:34:59
[21:38:20] <graydon> or that Jeaye wrote I suppose
[21:38:23] <Jeaye> I did.
[21:38:27] <graydon> :)
[21:38:31] <Jeaye> Had it swapped, trying to be portable. My mistake.
[21:38:34] <graydon> 20 years of IRC you'd think I would learn something
[21:38:39] <strcat> anyway no one can be called #rust
[21:38:39] <Jeaye> Some clients don't have /ban
[21:38:44] * brendanc has /kickban
[21:38:44] <strcat> I wonder why it even lets you do that
[21:38:53] <fairfieldt> hmmm /nick #rust
[21:38:58] <indutny> enticeing: you forgot to add 'self to `conn`
[21:39:01] <indutny> should be
[21:39:04] <indutny> conn: &'self Connection
[21:39:25] <enticeing> rargh
[21:39:28] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[21:39:39] <indutny> yeah
[21:39:56] *** Joins: SiegeLord (siege@moz-56D7E78.bstnma.fios.verizon.net)
[21:41:36] <indutny> enticeing: is it working now?
[21:41:44] <enticeing> so far 
[21:44:30] <strcat> pcwalton: so do you think the drop flag is going to go away? in favour of tracking it statically
[21:44:44] <pcwalton> strcat: yes
[21:44:46] <pcwalton> I would like to do that
[21:44:49] *** Quits: enticeing (user@40584768.29B601FE.5037098C.IP) (Client exited)
[21:44:53] <pcwalton> need to talk to nmatsakis about precisely how that is to be done
[21:45:01] <pcwalton> I think it would be a big performance improvement
[21:45:45] <nmatsakis> didn't erickt remove use of vecs_implicitly_copyable?
[21:45:55] <strcat> nmatsakis: still around
[21:46:00] <nmatsakis> :( :(
[21:46:13] <nmatsakis> I remember he had some heroic PR...
[21:46:31] <strcat> killing modes? or maybe that was acrichto 
[21:46:44] <nmatsakis> no, removing uses of vecs_implicitly_copyable
[21:46:47] <nmatsakis> but I guess not from everywhere
[21:47:49] <graydon> I think erick has been attacking it repeatedly
[21:48:24] <graydon> but it doesn't stick. gets almost-there and then doesn't manage to flip the forbid-switch, so then we re-acquire dependence on it
[21:48:48] <nmatsakis> egads.
[21:48:56] <nmatsakis> ok.
[21:53:24] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[21:56:32] *** Quits: mib_zp2yw2 (Mibbit@7755C8A3.75ED7979.D21A74F2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:00:16] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[22:03:28] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[22:03:58] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:05:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:05:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/gC-8KQ
[22:05:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:08:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:08:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Gkt7_Q
[22:08:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:08:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:08:13] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/dZnEWg
[22:08:13] <ghrust> 13rust/06auto 14db38ab9 15Young-il Choi: mk: rt.mk regression patch for mingw32 after #6176
[22:08:13] <ghrust> 13rust/06auto 14930908a 15Young-il Choi: mk: target.mk host.mk fix for duplicated rules of mingw32 after #6235
[22:08:13] <ghrust> 13rust/06auto 143a34e93 15bors: auto merge of #6295 : yichoi/rust/pull-mingw32, r=brson...
[22:08:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:11:19] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[22:13:31] *** Quits: RMF (RMF@moz-BBAAC65A.dsl.telepac.pt) (Connection reset by peer)
[22:13:54] <indutny> is there a safe way to make @Struct => @mut Struct
[22:14:00] <indutny> or just mutable in any other way?
[22:14:10] <indutny> or should I allocate it as @mut?
[22:14:15] <pcwalton> allocate it as @mut if you can
[22:14:15] <strcat> allocate it as @mut
[22:14:38] <indutny> I can but its FILE_reader() in io.rs
[22:14:49] <indutny> ah, who cares
[22:14:50] <indutny> :)
[22:16:07] <indutny> thank you anyway
[22:16:11] <indutny> and another question
[22:16:16] <indutny> how can I convert @mut to &mut
[22:16:29] <pcwalton> indutny: it coerces
[22:16:37] <indutny> well, it seems to be failing for me
[22:16:43] <indutny> at least when invoking method
[22:16:52] <indutny>     fn read_whole_stream(&mut self) -> ~[u8];
[22:16:59] <indutny> failed to find an implementation of trait io::Reader for @mut io::Reader
[22:17:30] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[22:17:31] <indutny> any idea?
[22:18:04] <pcwalton> it's because @mut io::Reader is not a Reader
[22:18:11] <pcwalton> io.rs is extremely misdesigned
[22:19:01] <pcwalton> you have to use @Reader I think....
[22:19:08] <indutny> well
[22:19:17] <indutny> the thing is that I want to make Reader trait usable outside io.rs
[22:19:31] <pcwalton> oh, you need to put mutable fields in it?
[22:19:32] <indutny> and also remove `mut` fields from structs in io.rs
[22:19:38] <pcwalton> I've already done that in my branch
[22:19:42] <indutny> pcwalton: huh?
[22:19:54] <indutny> pcwalton: have you replaced `self` with `mut self`?
[22:19:57] <pcwalton> I have a branch with a PR that removes mutable fields from structs in io.rs and everywhere else
[22:19:57] <pcwalton> yes
[22:19:58] <indutny> in all methods
[22:20:01] <pcwalton> well
[22:20:02] <indutny> haha
[22:20:03] <indutny> :)
[22:20:06] <pcwalton> in some methods
[22:20:10] <indutny> well, yeah
[22:20:12] <pcwalton> I've used @mut self fields elsewhere
[22:20:15] <indutny> there's eof(), tell() and probably others
[22:20:20] <indutny> oh
[22:20:24] <indutny> why?
[22:20:26] <pcwalton> rt::io has much better traits
[22:20:34] <pcwalton> because in some cases it was too much work
[22:20:39] <pcwalton> and we're going to delete io.rs anyway
[22:20:56] <indutny> oh
[22:21:12] <indutny> ok, that's good anyway
[22:21:17] <indutny> can I take a look at your patches?
[22:21:31] <pcwalton> they're in the pull request called "demuting"
[22:21:42] <pcwalton> I have everything working but the libcore/libstd/libsyntax/librustc tests
[22:22:00] <indutny> haha
[22:22:09] <indutny> so you're basically half-there
[22:22:20] <indutny> let me know if I can help oyu
[22:22:22] <indutny> s/oyu/you.
[22:22:24] <pcwalton> it also removes mutable fields from the language entirely
[22:22:31] <thomaslee_> is there anything in the rust toolchain to dump out crate metadata in some readable format atm?
[22:22:36] <pcwalton> rustc --ls
[22:22:41] <pcwalton> it's incomplete but sorta works
[22:23:04] <indutny> pcwalton: can't find your pull request
[22:23:21] <indutny> https://github.com/mozilla/rust/pull/6232
[22:23:22] <indutny> ah
[22:23:24] <indutny> here it is
[22:24:01] <strcat> I guess it's easier now than the new borrowck landed too
[22:24:07] <indutny> @mut uint
[22:24:10] <indutny> argh
[22:24:23] <indutny> that's not exactly what I was thinking about
[22:24:38] <pcwalton> if you want to refactor it feel free
[22:24:42] <pcwalton> however io.rs will be deleted
[22:24:43] <indutny> I made read() and others read(&mut self)
[22:24:44] <thomaslee_> cheers pcwalton -- I don't have access to my rust install atm, but does it include things like exports etc.? Trying to get to the bottom of #4202. It's assigned to catamorphism, but apparently he's traveling. :)
[22:24:53] *** Quits: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Quit: Leaving)
[22:24:53] <pcwalton> indutny: the traits in rt::io already did that
[22:24:55] <indutny> pcwalton: well, no reason to refactor code that'll be removed :)
[22:24:59] <pcwalton> thomaslee_: it doesn't include exports
[22:25:08] <thomaslee_> ah curses
[22:25:13] <indutny> pcwalton: what's rt:: ?
[22:25:16] <seth> random question: is there an existing rust equivalent to libclang? something that lets you walk the AST and inspect rust code?
[22:25:30] <pcwalton> seth: you can use libsyntax
[22:25:34] <indutny> and where is io there
[22:25:50] <pcwalton> indutny: libcore/rt/io/mod.rs has some new traits
[22:26:11] <indutny> ah
[22:26:12] <indutny> great
[22:26:14] <indutny> thank you
[22:26:26] <indutny> so, rt is some sort of experimental APIs
[22:26:31] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[22:26:35] *** Joins: mschifer1 (Adium@2557E599.66715431.D25A875A.IP)
[22:26:39] <pcwalton> it's the new scheduler
[22:26:46] <seth> pcwalton: cool!
[22:27:17] <engla> rt::io traits look much saner. reusable traits need to be small
[22:29:06] <indutny> oh
[22:29:16] <indutny> nice
[22:30:01] <thomaslee_> pcwalton: is there any other way to get at that export info? think I'm going to need to get at it -- happy to build it if need be. Would it be appropriate for me to add that info to the rustc --ls output if it comes to that?
[22:30:14] <pcwalton> you have to read the metadata
[22:30:17] <pcwalton> it's undocumented
[22:30:19] <indutny> still I think that using your own backend would be a good idea :)
[22:30:23] * indutny dislikes LLVM a bit
[22:30:38] <indutny> as well as many other "general" things
[22:30:57] <pcwalton> but the code is librustc/metadata/encoder.rs and librustc/metadata/decoder.rs
[22:33:21] *** Quits: jeff (jeff@69765D56.D8FB3E69.FCBF9AFD.IP) (Quit: jeff)
[22:35:08] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[22:38:20] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:39:18] <thomaslee_> cool thanks!
[22:43:41] *** Quits: boggle (boggle@moz-5FED67F0.dip0.t-ipconnect.de) (Quit: boggle)
[22:44:28] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:45:41] <EXetoC> "IMHO virtual memory was designed among other things to avoid piecing together segmented memory blocks by hand" this D thread seems to be about Rust and Go, so maybe this is related to stack switching
[22:46:08] <pcwalton> walter bright is very opposed to segmented stacks in all forms
[22:46:10] <EXetoC> just curious. I have only a basic idea of what it might be
[22:46:20] <pcwalton> he's right about everything but address space
[22:46:31] <pcwalton> when it comes to address space he just says "32 bit is irrelevant"
[22:46:39] <pcwalton> which is correct unless you care about mobile
[22:46:42] <pcwalton> which, unfortunately, we do :)
[22:46:51] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Client exited)
[22:47:02] <pcwalton> (it's not even clear that he's correct on desktops -- x32 on Linux is an interesting move)
[22:49:12] <EXetoC> oh
[22:50:13] <pcwalton> I do think we should turn segmented stacks off on 64 bit (but not the overflow checks)
[22:50:22] <pcwalton> walter is right
[22:50:26] <pcwalton> on 64 bit
[22:50:41] *** Joins: RMF (RMF@moz-BBAAC65A.dsl.telepac.pt)
[22:50:58] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[22:53:31] <EXetoC> will the user have a choice when it comes to overflow checks?
[22:54:22] <pcwalton> stack overflow? I dunno
[22:54:28] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[22:54:29] *** Joins: johnmurray (jmurray@9BFBD378.1781649A.A0D3DFE2.IP)
[22:54:32] *** Quits: johnmurray (jmurray@9BFBD378.1781649A.A0D3DFE2.IP) (Quit: johnmurray)
[22:54:36] <pcwalton> they don't seem to make much of a difference in any performance measurements I've tried
[22:54:37] <pcwalton> even pathological ones
[22:54:40] <pcwalton> like ackermann
[22:54:42] <pcwalton> it's like 2% or something
[22:55:36] <EXetoC> oh right. few people will care then
[22:56:07] *** Joins: cdidd (cdidd@moz-8884680.broadband.corbina.ru)
[22:58:09] *** aatch|bed is now known as aatch
[22:59:20] <aatch> EXetoC, but the ones that do will be incredibly obnoxious about it...
[22:59:57] <EXetoC> right :p
[23:00:16] <pcwalton> we could probably add some kind of flag
[23:01:01] <aatch> Them: "2%! Do you know what I could do with 2% more computing power?!", Me: "Be a 2% more effective arsehole?"
[23:01:11] <strcat> I don't think stack overflow checks need to be a flag
[23:01:21] <pcwalton> an attribute or something
[23:01:24] <strcat> that's part of memory safety, and it's a small enough cost that linux distros enable it for C
[23:01:35] <strcat> -fstack-protector
[23:01:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:02:02] * aatch didn't even think turning it off would be a thing.
[23:02:21] *** Quits: zz_kimundi (kimundi@moz-C10786E8.dip0.t-ipconnect.de) (Ping timeout)
[23:02:35] <strcat> imo we could just teach the compiler to mark lots of functions with the absolute stack size they need and bubble it up
[23:02:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:02:49] <strcat> pure rust ones
[23:02:51] *** Quits: pyrac (pyrac@moz-516480D0.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[23:02:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:02:58] *** ChanServ sets mode: +o dherman
[23:03:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:03:21] <strcat> only place that falls down is recursive ones, but I don't think that's pervasive
[23:04:48] <aatch> strcat, how would you mark it though? since LLVM would optimize out redundant stack allocation, or am I thinking of the wrong thing?
[23:05:26] <strcat> LLVM should be able to do it itself, -fstack-protector exists for clang too
[23:06:08] <aatch> strcat, eh, not exactly my area of expertise so I shall defer
[23:07:17] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[23:08:48] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[23:09:16] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[23:09:38] <pcwalton> 56 errors in one window, 99 errors in the other
[23:09:39] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:09:45] *** Joins: zz_kimundi (kimundi@moz-DAD78822.dip0.t-ipconnect.de)
[23:09:53] * pcwalton loves language changes and refactoring
[23:10:10] *** zz_kimundi is now known as kimundi
[23:11:12] <graydon> pcwalton: which change is this?
[23:11:18] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:11:19] <pcwalton> de-muting and a big servo refactor
[23:11:25] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:11:30] <pcwalton> work on one while I wait for the other to compiler
[23:11:31] <pcwalton> compile
[23:13:28] <graydon> fun
[23:13:36] <aatch> "If you got code problems, I feel bad for you son; I got 99 problems but segfaults ain't one"
[23:13:59] <pcwalton> I gotta say, borrow check errors are *way* more fun than segfaults
[23:15:39] *** Quits: FluffySauce (textual@moz-E5BC5F6F.sea.popcap.com) (Quit: Textual IRC Client: www.textualapp.com)
[23:16:17] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[23:17:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:17:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/dZnEWg
[23:17:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:18:05] <jld> Parse errors are the most fun of all, because they're so fast. >_>
[23:18:42] *** Quits: Diablo-D3 (diablo@moz-F06B3F31.port.east.myfairpoint.net) (Quit: This computer has gone to sleep)
[23:19:18] <pcwalton> yeah, we need to fix the speed of the compiler
[23:19:24] <pcwalton> the parser uses ~"string" everywhere
[23:19:27] <pcwalton> it allocates like crazy
[23:19:27] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[23:19:40] <pcwalton> that could be an easy fix if someone wants to do it
[23:19:45] <aatch> pcwalton, fortunately that should be fixable now
[23:19:48] <pcwalton> yes
[23:20:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:20:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kInz2g
[23:20:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:20:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:20:12] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/zfmxcQ
[23:20:12] <ghrust> 13rust/06auto 149b09dce 15Brendan Zabarauskas: Switch to using 'ln' for the natural logarithm and 'log' for arbitrary base logarithms
[23:20:12] <ghrust> 13rust/06auto 1406c5e7f 15Brendan Zabarauskas: Implement exp_m1 and ln_1p as methods for Float...
[23:20:12] <ghrust> 13rust/06auto 14314b485 15Brendan Zabarauskas: Fix order of methods
[23:20:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:21:05] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:21:31] <thomaslee_> pcwalton: what would be involved? literally replacing all the ~""s?
[23:21:38] <pcwalton> thomaslee_: yup
[23:21:42] <pcwalton> fairly easy task
[23:22:48] <thomaslee_> I might be able to do that while I wait for my metadata fiddling to compile.
[23:22:52] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[23:25:51] <jdm> metadata fiddling?
[23:25:54] <jclements> brson: ping
[23:26:31] <aatch> https://github.com/mozilla/rust/pull/6259 r+?
[23:29:10] <brson> jclements: pong
[23:29:29] <jclements> are modules ending with _testing automatically assumed to be test modues by the testing harness?
[23:29:53] <brson> jclements: no
[23:32:53] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:39:23] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:42:41] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:43:43] * pcwalton is so tired of "mutable variables cannot be implicitly captured"
[23:45:58] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[23:46:00] <thomaslee_> jdm: I'm trying to get to the bottom of #4202 -- investigation so far has led me to believe the exported trait may have been tagged as a module in the metadata. Trying to compare the known bad case to a good one.
[23:46:17] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[23:46:21] <thomaslee_> but apparently no easy way to look at exports -- so I need to fight with that.
[23:46:30] <thomaslee_> ergo metadata fiddling :)
[23:47:12] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[23:48:32] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:48:39] *** Joins: wilmoore (wilmoore@moz-BDA77E4A.public.wayport.net)
[23:48:56] *** Quits: echristo (echristo@CFC3C6C3.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:50:37] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[23:51:07] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:51:33] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:54:08] *** mschifer1 is now known as mschifer
[23:55:04] *** Quits: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Jesse)
[23:56:09] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[23:56:24] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[23:57:10] *** Joins: int3_ (int3_@moz-98676091.subnet-248.amherst.edu)
[23:57:34] *** Joins: Diablo-D3 (diablo@moz-F06B3F31.port.east.myfairpoint.net)
[23:57:37] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:58:52] *** Quits: int3_ (int3_@moz-98676091.subnet-248.amherst.edu) (Ping timeout)
[23:59:17] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
