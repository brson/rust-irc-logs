[00:01:05] *** Joins: kemurphy_ (Mibbit@92AB82D7.E41D1164.61CD561F.IP)
[00:01:10] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[00:01:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/s0XFhg
[00:01:10] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[00:01:31] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Ping timeout)
[00:02:57] <strcat> that's not bad
[00:03:12] <strcat> the time to serve ten serial hello world requests is 6s
[00:03:16] <strcat> lets try concurrently...
[00:03:22] <kemurphy_> strcat: when you were talking about "glue" up there, do you mean the c++ stuff in rt/ that looks like it's supposed to match up?
[00:03:40] <kemurphy_> (i'm looking at rust_opaque_box and BoxHeaderRepr specifically)
[00:03:44] <strcat> kemurphy_: by glue I mean code generated by trans
[00:03:52] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Connection reset by peer)
[00:03:57] <strcat> take glue, drop glue
[00:04:01] <strcat> and also duplicate in uniq.rs
[00:04:13] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[00:04:14] <strcat> and the code that implements ~fn
[00:04:20] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[00:04:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/A4EUeQ
[00:04:20] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[00:04:22] <strcat> basically, any code generated by trans that's not explicitly written
[00:04:25] <strcat> is glue
[00:04:46] <kemurphy_> ah, got it
[00:05:20] <kemurphy_> where does that all happen? i've been reading through trans/base.rs and trans/closure.rs
[00:05:43] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[00:06:27] *** kimundi is now known as zz_kimundi
[00:07:10] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:07:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/A4EUeQ
[00:07:10] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:07:11] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[00:07:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rWwAKQ
[00:07:11] <ghrust> 13rust/06auto 146b6c7c9 15Daniel Micay: vec: remove BaseIter implementation...
[00:07:11] <ghrust> 13rust/06auto 14a28e03e 15bors: auto merge of #7274 : thestinger/rust/size_hint, r=huonw...
[00:07:12] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[00:07:28] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:07:47] *** Joins: BitPuffin_ (quassel@moz-49828767.cust.tele2.se)
[00:07:59] <strcat> kemurphy_: trans/glue.rs
[00:08:05] <strcat> kemurphy_: and trans/uniq.rs
[00:13:43] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[00:14:53] <strcat> /bin/sh: 1: /home/ubuntu/src/rust-buildbot/slave/auto-linux-32-nopt/build/obj/llvm/i686-unknown-linux-gnu/Release+Asserts/bin/llvm-mc: not found
[00:14:55] <strcat> make: *** [rt/i686-unknown-linux-gnu/stage0/arch/i386/_context.o] Error 127
[00:14:57] <strcat> what?
[00:15:33] <strcat> stupid builders...
[00:15:44] <brson> bstrie: have you considered unifying r/rust's 'developer' and 'contributor' flair into just one? the 'us vs. them' distinction this makes has always made me a little uneasy. 'official Rust developer' doesn't really mean much either - I think it's a euphamism for 'moco employee' but then erickt has the developer flair
[00:16:08] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:16:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a28e03e to 140739c6b: 02http://git.io/N3iJvQ
[00:16:08] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:16:10] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:16:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/72_YzA
[00:16:10] <ghrust> 13rust/06auto 1430d7559 15Alex Crichton: Expand the deriving(ToStr) implementation
[00:16:10] <ghrust> 13rust/06auto 14fc83d82 15bors: auto merge of #7204 : alexcrichton/rust/deriving-to-string, r=pcwalton...
[00:16:10] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:16:15] <Eridius> how much does one have to contribute to get contributor flair?
[00:16:34] <strcat> why does bors hate me so
[00:16:41] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[00:18:05] <strcat> linux4 bot... hm
[00:18:10] <strcat> maybe I should force a clean-llvm build
[00:18:28] <strcat> I guess you can't really force a specific builder to run on a specific buildslave
[00:18:42] *** Quits: BitPuffin (isak@moz-49828767.cust.tele2.se) (Quit: WeeChat 0.4.1)
[00:18:59] <strcat> http://buildbot.rust-lang.org/builders/auto-win-32-opt/builds/37 and this build won't stop
[00:19:00] * strcat sighs
[00:19:40] <brson> Eridius: I think you just have to have a commit?
[00:21:05] <Eridius> brson: oh, well, I have a few commits at this point
[00:21:19] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[00:21:54] <brson> Eridius: you should claim your flair!
[00:22:05] *** Quits: BitPuffin_ (quassel@moz-49828767.cust.tele2.se) (Ping timeout)
[00:22:21] <Eridius> brson: hmm, sidebar says "contributed code to the rust compiler". I've only contributed to the standard libraries
[00:22:35] <strcat> same thing ;p
[00:22:58] <brson> Eridius: it should be reworded
[00:23:12] <brson> the intent is to spread the love I'm sure
[00:23:21] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[00:23:23] <brson> flair for everyone who contributes
[00:24:50] <aatch> I should claim my flair then.
[00:24:55] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[00:26:02] *** sam113101 is now known as sam113101_afk
[00:26:45] <kemurphy_> strcat: so, trans_crate in base.rs is the entry point for that whole phase then?
[00:27:54] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[00:29:08] <aatch> kemurphy_, correct
[00:30:05] <aatch> kemurphy_, if you're wandering around trans, I can probably help some. I've recently been doing refactoring in that area.
[00:30:31] *** Quits: roo (Mibbit@moz-2D4AC215.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:32:50] <rubber-duck> it seems #[deriving(Clone, Eq)] is broken for types that have borrowed pointer members https://gist.github.com/rubber-duck/5843227
[00:33:15] <strcat> rubber-duck: Clone isn't implemented for &str or &[]
[00:33:18] <bjz> brson: I just worry about me sounding like I am an 'official voice'
[00:33:25] <strcat> rubber-duck: does it work with &'self int ?
[00:33:27] <bjz> brson: re. the flair :P
[00:33:34] <strcat> &str/&[] aren't actually borrowed ptrs, they're slices
[00:33:38] *** Joins: dave (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:33:50] <strcat> any recommendations for a web server benchmark tool able to POST data?
[00:34:11] <strcat> doesn't seem like ab can POST
[00:34:14] <rubber-duck> strcat, yup, so it doesn't work for slices
[00:34:36] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[00:35:18] <Jeaye> enums don't have Eq by default?
[00:35:24] <bytbox> there isn't a nice syntax for initializing a HashMap, right?
[00:35:53] <rubber-duck> bytbox, use macros :P
[00:35:59] <Jeaye> rubber-duck: HashMap::new::<T1, T2>()
[00:36:05] <bytbox> rubber-duck: that requires /learning/ stuff!
[00:36:12] * bytbox now has an excuse to use macros
[00:36:21] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[00:36:59] <rubber-duck> Jeaye, I think he meant initializing in the sense of HashMap literal syntax
[00:37:15] <brson> does anybody know why the 'tenxer' service hooks are turned on for the rust repo?
[00:37:24] <bjz> any ideas about this lifetime issue? https://gist.github.com/bjz/1541e6a9df047555eff7
[00:37:35] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:37:47] <Jeaye> rusti: enum T { T1, T2 } let t = T1; t
[00:37:48] -rusti- T1
[00:38:16] <Jeaye> rusti: enum T { T1, T2 } let t = T1; if t == T1 { print("T1"); }
[00:38:17] -rusti- <anon>:9:42: 9:49 error: binary operation == cannot be applied to type `main::T`
[00:38:17] -rusti- <anon>:9          enum T { T1, T2 } let t = T1; if t == T1 { print("T1"); }
[00:38:17] -rusti-                                                    ^~~~~~~
[00:38:17] -rusti- error: aborting due to previous error
[00:38:17] -rusti- application terminated with error code 101
[00:38:20] <strcat> oh
[00:38:23] <strcat> ab can post things
[00:38:41] <Jeaye> Why don't enums allow comparison?
[00:38:53] <bjz> rusti: #[deriving(Eq)] enum T { T1, T2 } let t = T1; if t == T1 { print("T1"); }
[00:38:53] -rusti- <anon>:9:58: 9:65 error: binary operation == cannot be applied to type `main::T`
[00:38:53] -rusti- <anon>:9          #[deriving(Eq)] enum T { T1, T2 } let t = T1; if t == T1 { print("T1"); }
[00:38:53] -rusti-                                                                    ^~~~~~~
[00:38:54] -rusti- error: aborting due to previous error
[00:38:54] -rusti- application terminated with error code 101
[00:39:05] <bjz> :S
[00:39:12] *** Joins: roo (Mibbit@moz-53E5DD7B.dynamic.ip.windstream.net)
[00:39:46] <bjz> Jeaye: might be because the attribute is in the function
[00:40:01] <bjz> Jeaye: but deriving(Eq) should work
[00:40:03] <Jeaye> I'll try adding the attr in my code.
[00:40:04] <Jeaye> mmk
[00:40:24] <bjz> Jeaye: the issue is if a member in the function doesn't impl equality
[00:40:31] <bjz> *meber of the enum
[00:40:35] <bjz> *member
[00:40:37] <SiegeLord> rusti: enum T { #[deriving(Eq)]; T1, T2 } let t = T1; if t == T1 { print("T1"); }
[00:40:37] -rusti- <anon>:9:33: 9:34 error: expected ident, found `;`
[00:40:37] <bjz> ><
[00:40:37] -rusti- <anon>:9          enum T { #[deriving(Eq)]; T1, T2 } let t = T1; if t == T1 { print("T1"); }
[00:40:37] -rusti-                                           ^
[00:40:37] -rusti- application terminated with error code 101
[00:40:43] <Jeaye> bjz: Adding the attr works. :)
[00:40:45] <Jeaye> Thanks.
[00:40:55] <bjz> :)
[00:41:13] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[00:41:15] <strcat> Requests per second:    3.03 [#/sec] (mean)
[00:41:29] <strcat> serially
[00:41:31] <strcat> not bad.
[00:41:38] * strcat wishes rustc was faster though
[00:42:23] <rubber-duck> strcat, is implementing clone on slices just a matter of implementing Clone for &str like it's implemented for ~str - or does it require custom code generated by deriving ?
[00:43:00] <strcat> rubber-duck: it just needs to be impl'ed for &str and &[T]
[00:43:05] <strcat> like it's implemented for &T
[00:43:17] <rubber-duck> strcat, that sounds trivial :|
[00:43:21] <strcat> it is
[00:43:43] <rubber-duck> ok will try to get it working :P
[00:45:17] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[00:47:40] <kemurphy_> aatch: i'm currently just trying to understand the whole glue mechanism and where exchange allocations happen
[00:48:11] <aatch> kemurphy_, well glue is actually unrelated to the actual allocation.
[00:48:19] <aatch> There's a call to a lang item
[00:48:28] <aatch> so look for something like `lang_call` I think.
[00:48:39] <kemurphy_> aatch, right
[00:48:51] <aatch> Also, it's an expression, so trans/expr.rs is a good place to look too
[00:48:55] <kemurphy_> two separate objectives
[00:49:25] <kemurphy_> aatch: yeah it seems the two functions i care about right now are trans_unary_datum and closure::trans_expr_fn
[00:49:52] <kemurphy_> looks like malloc_raw_dyn causes a glue emission?
[00:49:55] * aatch has literally touched every part of trans now
[00:50:36] <aatch> kemurphy_, yep, for the tydesc glue.
[00:50:59] *** Quits: RMF (RMF@moz-8C13D5A2.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[00:51:52] <kemurphy_> aatch: so, my next step is to figure out what i would have to add in the glue emission stuff if i wanted to differentiate between normal exchange allocations and ~fns
[00:52:37] <aatch> kemurphy_, hmm. We can (or should) be able to always differentiate between the two at compile time.
[00:52:38] <rubber-duck> how do I rebuild only the std lib when I make I change - I hope I don't need to run full make on every change :|
[00:52:57] <aatch> rubber-duck, you can just use rustc to build it manually
[00:53:21] <aatch> rustc -O -o libstd src/libstd/core.rc
[00:53:54] <aatch> Assuming you just want to make sure it compiles
[00:54:09] <rubber-duck> aatch, nice thanks !
[00:54:30] <dbaupp> rubber-duck: `make check-stage2-std NO_REBUILD=1` will also build & run the tests
[00:55:07] <dbaupp> (without a full make)
[00:55:13] <kemurphy_> aatch: the overall goal is to cut away the useless bits in the box header for exchange allocations, but i'm told that ~fns use the header
[00:55:26] *** Joins: RMF (RMF@moz-8C13D5A2.dsl.telepac.pt)
[00:55:36] <aatch> kemurphy_, correct.
[00:56:37] <kemurphy_> aatch: so i guess i'm trying to figure out what glue makes assumptions about the presence of a header
[00:58:07] <aatch> if you look at closure::make_closure_glue, it does
[01:00:50] <kemurphy_> ok, so at least there's an idea of what to look for i guess
[01:01:10] <kemurphy_> should i be concerned with any of make_take_glue and friends?
[01:01:10] <aatch> kemurphy_, also, it allocates the box here: closure.rs:217
[01:01:22] <aatch> kemurphy_, you'll probably have to be aware of it.
[01:01:33] <aatch> but I'm not sure how much you'll have to dive into
[01:02:14] *** Quits: roo (Mibbit@moz-53E5DD7B.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:02:23] <kemurphy_> the closure-only stuff seems easy to find and split away, i just don't know what i should be looking for with bits that could either take just an owned ptr or a ~fn
[01:02:54] <aatch> kemurphy_, the best way is to try something and see what breaks.
[01:03:36] <kemurphy_> ~fn looks like it already generates its own glue, so maybe any other glue that gets used by exchange stuff never gets a ~fn?
[01:03:53] <kemurphy_> aatch: a tried and true method indeed :)
[01:04:28] <aatch> kemurphy_, I generally find that rustc is too big to try and make changes like that atomically.
[01:05:33] *** Quits: dave (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave)
[01:06:49] <kemurphy_> hm, so wait, do i want to just reduce the size of the box header for exchange allocations (say, just a tydesc or a tydesc/refcount pair), or do i want to unbox it entirely?
[01:07:13] <kemurphy_> (is that even a thing i could do)
[01:07:38] <aatch> Well you don't need a refcount for ~
[01:07:53] <kemurphy_> right, the point was more that even just cutting away prev/next would be useful
[01:08:18] <aatch> kemurphy_, but that inteferes with the annihilator
[01:09:59] *** Quits: threecreepio (jdp@moz-DB2D70E9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[01:10:04] <kemurphy_> does the annihilator even need to concern itself with ~ptrs that don't contain managed boxes?
[01:10:21] * kemurphy_ is not sure how the whole system works
[01:10:38] <aatch> kemurphy_, it does not
[01:10:57] <aatch> the major issue at the moment is that ~ and @ share a representation
[01:11:33] <kemurphy_> ah, i see
[01:11:46] <aatch> They do not need to.
[01:11:57] <aatch> ~-ptrs don't need a header *at all*
[01:12:10] <aatch> since we know everything about them statically.
[01:12:14] <aatch> or they're trait objects.
[01:12:26] <aatch> but trait objects are a completely different beast
[01:13:04] <kemurphy_> so ~ needs to go through a totally separate path then, it seems like
[01:13:15] <kemurphy_> since malloc_raw_dyn wants to throw a header on everything
[01:13:38] <aatch> kemurphy_, correct.
[01:13:54] <kemurphy_> (or, special case malloc_raw_dyn to not wrap anything on the exchange heap...?)
[01:14:08] <aatch> you could, if you're feeling adventurous, refactor the allocation handling so it's more sane in general
[01:14:26] <aatch> kemurphy_, I'm reluctant to allow special-casing, as there is so much already
[01:14:43] <kemurphy_> maybe the right thing to do is make the header a property of objects living in a certain heap, rather than objects of a certain type?
[01:15:10] <aatch> kemurphy_, makes sense.
[01:15:20] *** sam113101_afk is now known as sam113101
[01:15:38] <aatch> As long as everything still works at the end, there's no problem with changing the abstraction.
[01:16:57] <kemurphy_> i am, in fact, feeling adventurous, but i should probably head to bed since i am currently in GMT and need to be up in like 5 hours
[01:17:18] * kemurphy_ not a clever man etc
[01:17:24] <aatch> kemurphy_, heh. I'm almost exactly opposite you
[01:17:31] <aatch> +1200 GMT
[01:17:52] <kemurphy_> aatch: ah, i was +800 a week ago
[01:17:57] <kemurphy_> my body has no idea what to do
[01:18:07] <aatch> jet lag is fun!
[01:18:08] <kemurphy_> in 2 days i will be back in -500
[01:19:00] <kemurphy_> yeah, i think jet lag got to me this week, it was supposed to be full of sightseeing in london but i've been too bogged down to really enjoy it :/
[01:19:06] <kemurphy_> oh well i guess
[01:19:24] <kemurphy_> anyway thanks for the insight, i'll poke at it more tomorrow
[01:20:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:20:33] *** Quits: kemurphy_ (Mibbit@92AB82D7.E41D1164.61CD561F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:23:36] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:30:54] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[01:31:34] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Ping timeout)
[01:32:44] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Ping timeout)
[01:37:22] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (Ping timeout)
[01:37:43] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[01:39:42] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[01:42:05] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[01:43:11] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[01:45:04] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[01:46:21] *** Quits: illissius (illissius@moz-19397A63.catv.broadband.hu) (Quit: )
[01:46:50] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Ping timeout)
[01:47:23] *** Joins: peripatetic (Mibbit@moz-B5928FE2.hsd1.wa.comcast.net)
[01:48:19] <aatch> strcat, I've almost got a #[no_drop_flag] implemented
[01:50:05] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[01:52:06] <strcat> aatch: nice
[01:52:31] <aatch> the hardest bit was trying to get the ast::item for the struct so I could get the attributes
[01:52:48] <strcat> aatch: there's a shortcut for that ;p
[01:53:03] <aatch> strcat, I know, it was just a mission to find...
[01:53:11] <strcat> aatch: has_attr in ty.rs
[01:53:30] <strcat> // Determine whether an item is annotated with an attribute
[01:53:31] <strcat> pub fn has_attr(tcx: ctxt, did: def_id, attr: &str) -> bool {
[01:54:21] * dbaupp dislikes how inefficient attributes are
[01:55:36] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[01:55:51] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (No route to host)
[01:56:28] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[01:57:02] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[01:57:27] <aatch> strcat, https://gist.github.com/Aatch/5843416
[01:57:33] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[01:57:42] <aatch> It decided to re-order the files, so the .rs file is second
[01:57:50] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[01:58:50] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[01:59:02] <dbaupp> aatch: nice!
[01:59:37] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[02:00:38] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[02:02:17] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[02:05:42] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[02:07:28] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[02:16:06] <aatch> Well that was easy...
[02:16:28] <bblum> borssss
[02:16:34] <bblum> take my fixed pr so i can submit 2 more of them
[02:17:02] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[02:19:08] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[02:19:38] *** Joins: vcl (chatzilla@1137E56D.76F9E272.DA40C4B3.IP)
[02:20:50] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:21:23] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:22:17] *** Joins: roo (Mibbit@moz-59BD009B.dynamic.ip.windstream.net)
[02:23:31] <acrichto> r? https://github.com/mozilla/rust/pull/7113
[02:24:49] <aatch> acrichto, done
[02:24:58] <acrichto> aatch: thanks!
[02:25:09] <bblum> acrichto: if someone r'ed you in the past i think you should be able to r=them yourself
[02:25:16] *** Quits: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com) (Connection reset by peer)
[02:25:22] <acrichto> don't you have to be on the reveiwers list for that?
[02:25:26] <strcat> yes
[02:25:27] <bblum> as long ags you're on the reviewers list
[02:25:29] <bblum> i guess if you aren't
[02:25:33] <acrichto> I don't think I am
[02:25:48] *** Joins: z0w0 (zack@moz-DD233ABD.lnse4.woo.bigpond.net.au)
[02:26:42] <aatch> strcat, so adding no_drop_flag to Rc<T> seems to do the trick
[02:26:59] <strcat> aatch: and a check in the destructor to make sure it's not null?
[02:27:17] <aatch> in the Rc<T> destructor?
[02:27:25] <strcat> yes because it's going to run it multiple times, right?
[02:27:34] <strcat> if you move from it
[02:27:40] <strcat> add a test ;p
[02:27:52] <aatch> strcat, Oh yeah, I meant more for the rest of the codegen.
[02:27:56] <strcat> ah
[02:28:00] <aatch> like not having an extra byte tacked on the end
[02:28:10] <strcat> :)
[02:28:29] <aatch> I haven't changed the code in the library yet.
[02:28:42] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Quit: leaving)
[02:28:50] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[02:28:55] <aatch> I also need to add a run-pass test, for the size.
[02:32:43] *** Quits: roo (Mibbit@moz-59BD009B.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:33:49] <strcat> aatch: should add a test to make sure it zeroes on a move too
[02:37:46] <aatch> strcat, so something like `let a = Foo { ... }; let b = a;` should zero `a` when it moves to b?
[02:37:57] <strcat> aatch: yes 
[02:38:05] <strcat> and call the destructor twice
[02:38:41] <strcat> that's how C++ does it, but instead of zeroing the whole thing you can choose a field to zero (since you implement the move constructor)
[02:38:48] <strcat> but.... it'd be nice just to have a basic one at least
[02:38:51] <strcat> zeroing the whole thing
[02:39:28] <aatch> Ok, so I made it print out the value of a stored int on destruction, set it to 1, I got `1`, then `0`.
[02:39:30] <aatch> expected?
[02:39:32] <strcat> can't believe how slow these python web servers are
[02:39:44] <strcat> aatch: yep
[02:40:13] <strcat> aatch: if you make 5 copies, 4 should be 0
[02:40:18] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[02:40:31] <strcat> the first one should be 1 because destructors run in rev order
[02:40:40] <strcat> anyway don't have to test it that thoroughly... just if you want ;p
[02:40:43] <aatch> strcat, good, works as expected (I did 3 and 2 were 0)
[02:40:51] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[02:41:11] <aatch> strcat, I'm a little bit in "what did I miss" mode. I didn't expect it to be this easy...
[02:42:25] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[02:42:26] *** Joins: MaikKlein (maik@moz-E6D51931.dip0.t-ipconnect.de)
[02:44:05] <dbaupp> strcat: does Rc working properly mean that we can go through and convert rustc to use it?
[02:44:12] <aatch> This will make brson happy too
[02:44:40] <dbaupp> (does Rc support e.g. Rc<(float, Rc<int>)>?)
[02:45:27] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[02:46:12] <MaikKlein> is tjc's audio talk already online somewhere?
[02:47:05] <strcat> dbaupp: yes
[02:47:12] <strcat> dbaupp: we really need a pointer trait to overload * though
[02:47:25] <strcat> but I don't want sugar for dynamic borrows
[02:47:29] <aatch> strcat, it'll make atomic option especially nice, since I already have null-checks
[02:47:29] <dbaupp> strcat: oh, right, yeah, and borrowing to &.
[02:48:02] <strcat> aatch: yeah and hopefully nmatsakis/pcwalton make it obsolete with their drop work but.... it's needed in the meantime
[02:48:11] <strcat> aatch: do you think you could make it smart enough to allow
[02:48:15] *** Joins: mitch (mitch@moz-CF8BEBEF.dia.static.qwest.net)
[02:48:15] <strcat> like
[02:48:23] <strcat> #[drop_flag(list, of, fields, to zero)]
[02:48:46] <strcat> #[drop_flag(ptr)] struct Foo { ptr: *int, foo: uint }
[02:49:08] * strcat shrugs
[02:49:10] *** mitch is now known as IRCMonkey15235
[02:49:28] <strcat> anyway not that important
[02:49:31] <strcat> would just make it more useful
[02:49:42] <aatch> I could, but it would be somewhat more difficult.
[02:50:06] <strcat> aatch: it'd be nice though
[02:50:08] <strcat> for example 
[02:50:32] <strcat> struct Vector { data: *u8, length: uint, capacity: uint }
[02:50:35] <strcat> you only want data zeroed
[02:50:41] <strcat> and you can just call free(self.data)
[02:51:56] <aatch> strcat, yeah, but I'd want to make it work better with the regular drop, since that's just #[drop_flag(drop_flag_field)] implicitly
[02:52:26] <strcat> aatch: well we could get rid of the regular drop
[02:52:35] <strcat> and not have an implicit field
[02:52:46] <strcat> or not
[02:52:50] <strcat> ;p
[02:53:09] <strcat> anyway just something to think about.
[02:53:17] <dbaupp> one could imagine `struct Foo { bar, #[drop_flag] baz, #[drop_flag] qux }` might be ok?
[02:53:28] <aatch> dbaupp, nope
[02:53:33] <aatch> attributes on items
[02:53:41] <aatch> fields != items
[02:53:45] *** Joins: sankha93 (Instantbir@5CEDC1FA.1AFF5256.CA052C06.IP)
[02:53:46] <dbaupp> aatch: pretty sure attributes work on fields too
[02:53:51] <aatch> dbaupp, you sure?
[02:53:55] <acrichto> aatch: you can have attributes on struct fields
[02:53:59] * dbaupp has dug around in syntax a lot
[02:54:03] <aatch> since when?
[02:54:13] <acrichto> ast.rs:1063
[02:54:19] <strcat> oh that'd be nice.
[02:54:27] <strcat> better than #[no_drop_flag] actually
[02:54:37] <strcat> if you could just tag a field as #[drop_flag]
[02:54:53] <strcat> or more than 1
[02:55:38] <aatch> I might just leave it at what I have now for the moment.
[02:55:51] <strcat> yeah it's fine. it's good enough for smart ptrs atm
[02:55:58] <strcat> just not for other more fancy types
[02:56:10] <strcat> better than the situation right now
[02:57:00] <IRCMonkey15235> Hey guys I was wondering if you could explain why this code DOES compile: https://gist.github.com/mitchdzugan/5843574
[02:57:08] <aatch> It probably wouldn't be too hard to add, but I'd want to make sure it doesn't cause any surprises.
[02:57:16] <IRCMonkey15235> specifically why Im able to call the unsafe function from a safe function
[02:57:17] <aatch> I'm worried enough about this.
[02:57:50] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[02:58:20] <aatch> Uh, what safe function, calling which unsafe one?
[02:58:28] <Eridius> aatch: the test at the bottom calls unsafe_close()
[02:58:30] <Eridius> without an unsafe block
[02:58:44] <aatch> Oh right. 
[02:58:47] <aatch> That's a bug
[02:59:05] <IRCMonkey15235> yeah sorry line 34 calling line 23
[02:59:16] <aatch> the unsafe checker doesn't seem to consider unsafe methods unsafe...
[02:59:39] <IRCMonkey15235> Ahh ok, do you know if its known, or should I file a bug report
[03:00:00] <aatch> I'm pretty it's known, but doing a search to confirm won't hurt
[03:00:16] <IRCMonkey15235> ok will do, thanks guys!
[03:00:31] <dbaupp> IRCMonkey15235: what version of rust?
[03:00:46] <IRCMonkey15235> 0.6
[03:01:29] <dbaupp> rusti: struct A; impl A { unsafe fn foo(&self) {} } A.foo()
[03:01:29] -rusti- <anon>:9:54: 10:5 error: invocation of unsafe method requires unsafe function or block
[03:01:31] -rusti- <anon>:9          struct A; impl A { unsafe fn foo(&self) {} } A.foo()
[03:01:31] -rusti- <anon>:10     };
[03:01:31] -rusti- error: aborting due to previous error
[03:01:31] -rusti- application terminated with error code 101
[03:01:45] <dbaupp> IRCMonkey15235: I believe it's been fixed since 0.6 was released
[03:01:52] <Eridius> yeah the unsafe checker was rewritten, no?
[03:02:02] <dbaupp> Eridius: yeah
[03:02:14] <aatch> one week to the release. maybe.
[03:02:14] *** Quits: zz_kimundi (kimundi@moz-3B0D7C12.dip0.t-ipconnect.de) (Ping timeout)
[03:02:45] <IRCMonkey15235> ahhh ok, thanks guys, just wanted to make sure I wasn't misunderstanding the unsafe keyword
[03:03:08] <MaikKlein> can I tell pretty print to actually format my file instead of just printing it?
[03:03:15] <mark_edward> aatch: could you make that reddit post/blog post about why the generated IR is larger than it should be?
[03:03:35] <aatch> mark_edward, sure.
[03:03:36] <mark_edward> you mentioned it in a Reddit post a while ago, and I've been awaiting it eagerly!
[03:03:55] <mark_edward> thanks, i look forward to it!
[03:03:58] <aatch> a while ago being a few hours ago?
[03:04:09] <peripatetic> Hello all, I am having some trouble understanding how sibling modules work in 0.6. Specifically I am having a problem with a module that exports a struct implementing a trait defined in a sibling module.  I am getting an error that says the trait is not in scope.  I have distilled my problem into this simple gist https://gist.github.com/eli-frey/5843594
[03:04:10] <aatch> Or have I mentioned it more than once...?
[03:04:23] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[03:04:28] <MaikKlein> not sure what --pretty [TYPE] means
[03:04:28] <aatch> peripatetic, ok, did you build from a recent master?
[03:04:42] <peripatetic> No I am using the stable release
[03:04:48] <peripatetic> for some value of stable
[03:04:56] <aatch> peripatetic, ok, I strongly suggest building from the current master
[03:05:05] <dbaupp> MaikKlein: rustc will not compile the code, it just does some "preprocessing" and prints out the result
[03:05:07] <acrichto> MaikKlein: try out the different types, you'll find out pretty quickly what each one means. You'll have to manually redirect from stdout to something though to overwrite the previous file
[03:05:12] *** Joins: zz_kimundi (kimundi@moz-F117C49A.dip0.t-ipconnect.de)
[03:05:12] <dbaupp> MaikKlein: e.g. expanding macros
[03:05:17] *** Parts: IRCMonkey15235 (mitch@moz-CF8BEBEF.dia.static.qwest.net) (WeeChat 0.4.1)
[03:05:29] <aatch> master is pretty stable and there have been a huge amount of changes since the 0.6 release
[03:05:35] *** zz_kimundi is now known as kimundi
[03:05:40] <dbaupp> MaikKlein: (be careful about overwriting though, since it generates invalid/uncompilable code often.)
[03:05:49] <peripatetic> aatch: oh good, I will try that then, thanks
[03:05:52] <MaikKlein> dbaupp, oh ok
[03:05:55] <aatch> I doubt that any code you write for 0.6 will compile with 0.7
[03:06:17] <dbaupp> aatch: backwards compatibility \o/
[03:06:23] <mark_edward> aatch: oh wow, i thought it was days ago... but the reddit timestamp says 2 hours... could've sworn it was weeks ago
[03:06:35] <acrichto> peripatetic: I think you need a crate-relative path instead of a module-relative path, so you'll need to use implement::a_trait::Trait instead
[03:06:37] <aatch> mark_edward, lol. It's fine.
[03:07:07] <acrichto> peripatetic: or self::a_trait::Trait
[03:07:08] <MaikKlein> should I implement sth like rust test.rs --pretty save, so it actually saves the output to the file directly?
[03:07:38] <dbaupp> peripatetic: putting `use self::a_trait;`  at the top of implement.rs would also probably work.
[03:08:11] <acrichto> MaikKlein: I think one problem with the pretty printer is that it's rarely used currently, so it's not certain that it's a good thing to always have. Also if you can specify save, you should in theory also be able to specify which type of pretty printing to save and where to save it (default the sensible pretty print and default the current input file)
[03:08:52] <peripatetic> dbaupp: is declaring sibling modules not the way to go, should I always prefer use self::some_module
[03:09:22] <peripatetic> dbaupp: as aposed to mod some_module
[03:09:29] <dbaupp> peripatetic: you need both
[03:09:48] *** Joins: Aetherspawn (Aetherspaw@moz-8811D9F0.static.tpgi.com.au)
[03:10:02] <dbaupp> peripatetic: `mod foo` just tells rustc "I'd like this submodule", `use self::foo` brings the name `foo` into scope
[03:11:02] <peripatetic> dbaupp: interesting.  I am getting no name resolution errors in implement.rs, the error comes up in main.rc when I try to call the method trait_fn
[03:11:14] <MaikKlein> hm can I query the output of rustc directly? like let s = query("rustc filename.rs --pretty"); ?
[03:11:42] <dbaupp> MaikKlein: if you write a 'query' function that does what you want, yes.
[03:12:02] <acrichto> MaikKlein: the std::run module has lots of stuff to run external processes and capture their output
[03:12:14] <dbaupp> peripatetic: oh, you also need Trait to be in scope whenever you use methods from it
[03:12:17] <MaikKlein> thanks I'll look into it
[03:12:25] *** Quits: sankha93 (Instantbir@5CEDC1FA.1AFF5256.CA052C06.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[03:12:36] <dbaupp> peripatetic: i.e. `use implement::a_trait::Trait;` at the top of main.rc
[03:14:12] <peripatetic> dbaupp: ah! that's the ticket
[03:15:06] <peripatetic> dbaupp: adding use self::a_trait to the the top of implement.rs gave me a name resolion error, but your last suggestion solves the issue
[03:18:32] <MaikKlein> in ProcessOutput there is "output: ~[u8]," what does this mean, are those chars?
[03:18:36] <MaikKlein> or why is it u8
[03:18:44] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[03:19:00] <peripatetic> maikKlien: that's a vector of bytes
[03:19:28] <strcat> u8 is a byte (unsigned, 8-bit)
[03:19:59] <MaikKlein> there was sth from::bytes::to_str right?
[03:20:22] <dbaupp> MaikKlein: str::from_bytes
[03:21:57] <MaikKlein> rusti: str::from_bytes(10);
[03:22:00] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QSER
[03:22:25] <MaikKlein> rusti: std::str::from_bytes(10);
[03:22:26] -rusti- <anon>:9:30: 9:32 error: mismatched types: expected `&[u8]` but found `<VI0>` (expected vector but found integral variable)
[03:22:26] -rusti- <anon>:9          std::str::from_bytes(10);
[03:22:26] -rusti-                                        ^~
[03:22:26] -rusti- error: aborting due to previous error
[03:22:26] -rusti- application terminated with error code 101
[03:22:50] <MaikKlein> ah nice
[03:22:50] <MaikKlein> thanks
[03:23:46] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[03:23:57] <dbaupp> rusti: (bytes!("foobar"), std::str::from_bytes(bytes!("foobar")))
[03:23:58] -rusti- (&[102, 111, 111, 98, 97, 114], ~"foobar")
[03:24:28] <strcat> oh nice
[03:27:08] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:27:45] <aatch> Bah, I refactored and missed a `!`, so /only/ things marked #[no_drop_flag] would have drop flags
[03:27:49] <MaikKlein> we have a fileinput but not a fileoutput? http://static.rust-lang.org/doc/extra/fileinput.html
[03:27:52] <aatch> isn't that magnificent...
[03:27:57] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[03:28:59] <strcat> meh, so each thread can only do 3 req/s
[03:29:13] <strcat> and if I make the container memory limit 128MiB...
[03:29:13] <dbaupp> MaikKlein: what would fileoutput do?
[03:29:28] <MaikKlein> dbaupp, to save a file?
[03:29:29] <strcat> with a gig you only get 8 :(
[03:29:37] <MaikKlein> dbaupp, how would I do that?
[03:29:40] <dbaupp> MaikKlein: std::io::file_writer
[03:29:59] <dbaupp> MaikKlein: fileinput is designed for reading from several files in a chain
[03:30:13] <strcat> oh well 24req/s is going to be more than enough for the near future ;p
[03:30:21] <MaikKlein> dbaupp, ah I looked in the wrong place thanks
[03:30:29] * strcat wonders how much blame can be placed on python though
[03:31:05] *** Joins: steveklabnik (steveklabn@7FDB90C9.F989CC7B.62DB355F.IP)
[03:31:13] *** Joins: bytbox (s@moz-2E27684C.student.umd.edu)
[03:34:01] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[03:39:02] <peripatetic> Now I am having a naming conflict.  Seems if I have a second module that implements a_trait, I cannot use both in the same namespace.  The last one to be `use`ed overrides all the previous ones.  Here's my updated gist https://gist.github.com/eli-frey/5843594
[03:39:48] <MaikKlein> rusti: let w = std::io::Writer;
[03:39:48] -rusti- <anon>:9:17: 9:32 error: unresolved name `std::io::Writer`.
[03:39:48] -rusti- <anon>:9          let w = std::io::Writer;
[03:39:48] -rusti-                           ^~~~~~~~~~~~~~~
[03:39:48] -rusti- error: aborting due to previous error
[03:39:49] -rusti- application terminated with error code 101
[03:39:55] <peripatetic> also_implement i overriding implement' trait_fn method in main.rc
[03:40:39] <peripatetic> apologies for the dropped 's'es, my keyboard is wonky
[03:40:53] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[03:41:32] <MaikKlein> can someone tell me how I create a Writer? http://static.rust-lang.org/doc/std/io.html#implementation-of-writer-for-wrapperw-c-where-w-writer-c It is really confusing there is no real Writer struct and it seems that it implements on a trait
[03:42:19] <strcat> Writer is a trait
[03:42:40] <strcat> the old I/O stuff is really bad and doesn't use traits sanely
[03:42:48] *** Joins: heftig_ (heftig@moz-9C5216F6.dip0.t-ipconnect.de)
[03:42:59] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[03:43:10] *** Quits: heftig (heftig@moz-DDC44F26.dip0.t-ipconnect.de) (Ping timeout)
[03:44:16] <MaikKlein> how does this work "Implementation of Writer for @Writer"
[03:44:42] <MaikKlein> i am super confused right now
[03:45:32] <Eridius> MaikKlein: it means any @Writer is also a Writer
[03:45:45] <Eridius> so you can wrap a Writer in a @-box and still use it as a Writer
[03:45:49] <peripatetic> is there some way I am missing to export implemented traits?  I feel this would be the best sollution to my problem.  I have tried doing `pub use self::a_trait::Trait`, but to no avail.
[03:46:12] <strcat> peripatetic: an implementation of a trait is public if the trait/type are public
[03:47:59] <MaikKlein> ok I am too stupid, how do I create a simple writer that creates me a file and writes to it?
[03:48:42] <MaikKlein> I probably have to use "with_str_writer"?
[03:49:02] <peripatetic> strcat: hmm, well my structs and traits are public.
[03:49:11] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[03:49:13] <strcat> peripatetic: the trait has to be in scope to use it
[03:49:44] <MaikKlein> ah nvm I found sth
[03:50:08] *** Joins: cdidd (cdidd@A88661A.4F80CCBA.62D8163C.IP)
[03:51:15] *** Joins: roo (Mibbit@moz-E33FDFC9.dynamic.ip.windstream.net)
[03:52:13] <peripatetic> strcat: I have updated my gist to reflect what I think you mean.  In main.rc I `mod a_trait` and I `use a_trait::Trait`.  This too is not working.  Have I misunderstood?
[03:53:05] <strcat> peripatetic: you shouldn't have 'mod' twice for the same file
[03:53:11] <strcat> each time you use 'mod', you make a new module
[03:53:21] <peripatetic> ah
[03:53:23] <strcat> mod foo; in two files makes 2 unrelated modules
[03:53:53] <peripatetic> strcat: so if I `mod foo` in the top of my crate, it is available in all other modules?
[03:53:58] <strcat> yes
[03:54:08] <strcat> they just have to 'use' it
[03:54:12] <strcat> use foo;
[03:54:14] <strcat> I think
[03:54:24] <peripatetic> strcat: oh great, that makes much sense, thanks.
[03:54:34] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:54:54] <roo> does the pub qualifier make any difference for external modules?
[03:55:30] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[03:55:35] <strcat> roo: it makes them public, yes
[03:55:45] <strcat> afaik it works...
[03:55:49] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[03:56:04] <strcat> I don't know what you mean by external though
[03:56:04] *** Quits: vcl (chatzilla@1137E56D.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130511120803])
[03:56:12] <strcat> all 'mod' statements make a module inside the current crate
[03:56:27] <strcat> if they aren't pub, the module is an internal implementation detail of the crate
[03:56:39] <strcat> if they are pub, they're exposed as public modules
[03:56:39] *** Joins: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP)
[03:56:40] <roo> well i meant outside of the current file, not external as in crate external
[03:56:42] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:56:47] <strcat> roo: yes it works
[03:56:54] <strcat> the stdlib is a bunch of pub mods
[03:57:33] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[03:58:19] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[03:58:29] <steven_is_false> What happened to the fold functions in the latest Rust revision?
[03:58:43] <strcat> steven_is_false: fold is implemented on Iterator
[03:59:01] <steven_is_false> So I have to do [1, 2, 3].iter.foldl ?
[03:59:11] <strcat> iter(), yes
[03:59:18] <strcat> until there's an Iterable trait
[03:59:26] <steven_is_false> strcat: Thanks.
[03:59:35] <strcat> rusti: let xs = [1, 2, 3, 4, 5, 6]; xs.iter().fold(0, |a, b| a + *b)
[03:59:36] -rusti- 21
[03:59:43] <strcat> rusti: let xs = [1, 2, 3, 4, 5, 6]; xs.iter().skip(2).fold(0, |a, b| a + *b)
[03:59:44] -rusti- 18
[04:00:51] *** Joins: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP)
[04:01:27] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[04:01:27] *** ChanServ sets mode: +o brson
[04:03:35] <steven_is_false> What prevents an Iterable trait from being made?
[04:03:59] <Eridius> woot, I have contributor flair now
[04:04:01] <Eridius> I feel special
[04:04:08] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[04:04:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/72_YzA
[04:04:08] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[04:04:13] *** Joins: infynyxx (infynyxx@moz-9281C4E9.hfc.comcastbusiness.net)
[04:04:21] <strcat> steven_is_false: maybe nothing
[04:04:25] <strcat> haven't tried to implement it
[04:05:12] <Eridius> strcat: if .iter() is provided through an Iterable trait, presumably it has to return a boxed Iterator instead of a concrete implementation? Or can individual implementations actually return the appropriate concrete impl instead of returning a general Iterator?
[04:05:15] <MaikKlein> yeah got pretty printing working
[04:05:17] <MaikKlein> :)
[04:05:21] <strcat> Eridius: no, not boxed
[04:05:28] *** Quits: steveklabnik (steveklabn@7FDB90C9.F989CC7B.62DB355F.IP) (Ping timeout)
[04:05:29] <Eridius> e.g. trait Iterable { fn iter() -> Iterator; } ... can I have impl Iterable { fn iter() -> MyIterator; } ?
[04:05:30] <MaikKlein> so that it saves the output
[04:05:42] <strcat> Eridius: won't look like that
[04:05:46] <Eridius> strcat: then what?
[04:05:53] <aatch> trait Iterable { fn iter() -> Self; } // Or close to it
[04:05:57] <Eridius> o_O
[04:05:59] <strcat> trait Iterable<A, T: Iterator<A>> { fn iter(&self) -> T }
[04:06:09] <Eridius> strcat: ahh
[04:06:10] <strcat> but we don't implement bounds on trait parameters yet
[04:06:13] <strcat> so it can't be done yet.
[04:06:19] <strcat> missing feature
[04:06:23] <goffrie> since #7214 landed, #6717, #7153, #7208 should be closed, no? :)
[04:06:39] <strcat> goffrie: sec
[04:06:51] <goffrie> all the testcases now compile successfully for me
[04:07:11] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[04:07:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/6YmDfQ
[04:07:11] <ghrust> 13rust/06auto 146b6c7c9 15Daniel Micay: vec: remove BaseIter implementation...
[04:07:11] <ghrust> 13rust/06auto 14a97eb72 15bors: auto merge of #7274 : thestinger/rust/size_hint, r=huonw...
[04:07:11] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[04:07:15] <steven_is_false> So it will be a while before Iterable is implemented then?
[04:07:35] <strcat> goffrie: closed
[04:07:38] <strcat> steven_is_false: maybe
[04:07:41] <strcat> traits need to be finished
[04:07:55] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[04:08:10] <strcat> default methods just got finished *enough* that I was able to add a size hint default method (well, we'll see if it passes)
[04:08:11] <goffrie> yay
[04:08:39] <aatch> There are still some bugs with default methods
[04:08:53] <steven_is_false> Ugh, SDL 1.2 is really terrible to work with.
[04:09:08] <strcat> so use sdl2 ;p
[04:09:13] <aatch> (hence why they are behind a lint flag at the moment)
[04:09:37] <strcat> aatch: sure, but there are plenty of bugs with everything in rust
[04:10:04] <strcat> traits are pretty broken as a whole
[04:10:04] <strcat> default methods are a lot more solid now than even our method resolution
[04:10:05] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[04:10:17] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:10:25] *** sam113101 is now known as sam113101_afk
[04:10:32] <strcat> rusti: 4
[04:10:33] -rusti- 4
[04:10:41] <strcat> rusti: how did you not get disconnected? ;\
[04:10:41] -rusti- <anon>:9:41: 9:42 error: unknown start of token: 63
[04:10:41] -rusti- <anon>:9          how did you not get disconnected? ;\
[04:10:42] -rusti-                                                   ^
[04:10:42] -rusti- application terminated with error code 101
[04:11:29] *** sam113101_afk is now known as sam113101
[04:13:49] <Eridius> strcat: disconnected? you quit, you didn't lag out
[04:14:20] <strcat> well it started up the lag counter... I guess sending was succeeding but recv wasn't
[04:22:08] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:24:40] <aatch> https://github.com/mozilla/rust/pull/7317
[04:26:28] *** Joins: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com)
[04:27:31] <strcat> aatch: it shouldn't actually zero it during drop
[04:27:37] <strcat> aatch: needs to zero it during take (move)
[04:28:18] <aatch> See, I knew i missed something...
[04:28:35] <strcat> since you can let a = b; and pass a somewhere
[04:28:43] <strcat> and b shouldn't be dropped
[04:29:32] <strcat> so I found http://cdnjs.com/ and thought "great! cloudflare is already hosting all of these things"
[04:29:34] <strcat> but...
[04:29:38] <strcat> it's all horribly out of date :(
[04:29:49] <strcat> ace v0.2.0
[04:30:01] <strcat> https://github.com/ajaxorg/ace/tags :|
[04:30:03] <aatch> strcat, so zero /after/ take?
[04:30:11] <strcat> aatch: well, during take?
[04:30:24] <strcat> aatch: moving from it should zero it, drop doesn't need to zero it
[04:31:25] <dbaupp> strcat: they seem to imply that you can submit a new one https://github.com/cdnjs/cdnjs
[04:31:46] <strcat> oh
[04:32:37] <aatch> so it actually should zero on move anyway?
[04:32:44] <Aetherspawn> how does _morestack work
[04:32:47] <Aetherspawn> is it a llvm thing or a rust thing
[04:32:56] <aatch> Aetherspawn, segmented stacks thing
[04:33:09] <Aetherspawn> thanks!@
[04:33:13] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:33:18] <dbaupp> Aetherspawn: https://github.com/cdnjs/cdnjs
[04:33:24] <dbaupp> Aetherspawn: http://llvm.org/releases/3.2/docs/SegmentedStacks.html
[04:33:28] <aatch> heh
[04:33:29] <dbaupp> (sorry, wrong clipboard)
[04:33:58] <aatch> bblum, you need to comment on the commit for approving...
[04:34:31] <Aetherspawn> looks heavy..
[04:34:35] <Aetherspawn> is it a performance kill?
[04:34:44] <aatch> Aetherspawn, not really
[04:34:59] <Aetherspawn> does it run on bare metal
[04:35:02] <Aetherspawn> :P
[04:35:02] <aatch> not any more than a stack canary anyway
[04:35:02] <strcat> oh wtf is failed again
[04:35:16] <strcat> aatch: if you set RUST_MIN_STACK=5000000
[04:35:29] <strcat> it is a much bigger hit than a canary or guard page
[04:35:35] <strcat> it's the same as -fstack-protector-all
[04:35:55] <Aetherspawn> strcat please explain im curious
[04:35:59] <strcat> 1-5% for most code, ~10% for simple recursive stuff
[04:36:08] <strcat> it adds a stack space check before every function call
[04:36:20] <strcat> to stop stack overflows
[04:36:26] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:36:35] <strcat> http://buildbot.rust-lang.org/builders/auto-win-32-nopt/builds/56/steps/test/logs/stdio weird
[04:36:37] <strcat> passes here
[04:36:42] <Aetherspawn> is it inlined out of tailcalls and optimized out of inlines?
[04:36:51] <aatch> Aetherspawn, yes
[04:37:09] <dbaupp> strcat: it's because of the windows fast-check
[04:37:09] <aatch> maybe not tailcalls
[04:37:11] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:37:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a97eb72 to 14fc83d82: 02http://git.io/N3iJvQ
[04:37:11] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:37:16] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[04:37:17] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/cOggmg
[04:37:17] <ghrust> 13rust/06auto 14f22de5c 15Ben Blum: Add rules for assert, fail, and deriving to vim syntax file. Also highlight the mod path in "use module;" properly.
[04:37:17] <ghrust> 13rust/06auto 14e680df1 15Ben Blum: Parse and typecheck (not kindcheck) bounds on trait paths.
[04:37:17] <ghrust> 13rust/06auto 1433058ff 15Ben Blum: Add tests for not-kind-checked trait bounds.
[04:37:18] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[04:37:20] <dbaupp> strcat: you need ::std::vec::each (or `use std;`)
[04:37:21] <strcat> dbaupp: why can't it find std::vec?
[04:37:23] <strcat> oh
[04:37:43] <strcat> or I can just xfail-fast it
[04:38:02] <dbaupp> yeah, but it's equally much typing to put `use std;` at the top
[04:38:07] <bstrie> ugh the bors queue
[04:38:10] <dbaupp> less even.
[04:38:27] * strcat is very annoyed
[04:38:56] <dbaupp> strcat: you can probably run check-fast locally
[04:39:34] <strcat> yeah but now I have to wait 3 hours and rebase again
[04:39:52] <Aetherspawn> oh wow
[04:39:53] <dbaupp> oh, right :(
[04:39:58] <Aetherspawn> __morestack is interestingly recursive
[04:40:07] <Aetherspawn> its absolutely awesome how it works.
[04:40:31] <Aetherspawn> I can just imagine getting unlucky though and having an iteration on a stack boundary
[04:40:41] <Aetherspawn> and paying like 10,000% runtime for it..
[04:41:09] <strcat> Aetherspawn: it will be optional
[04:41:16] <strcat> well, it is optional
[04:41:27] <strcat> you can put #[fixed_stack_segment] on main
[04:41:28] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[04:41:38] <strcat> but in the future it should be optional per-task
[04:42:00] <strcat> the checks are still there but it allocates a big stack (2MiB) up-front
[04:42:16] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:43:41] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[04:43:44] *** Joins: rjbailey (jake@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[04:43:50] <strcat> when bors went haywire I manually merged 8 of the doc pull requests as 1 pull request that went through try so...
[04:43:59] <strcat> the fact that the queue is so full is sad
[04:45:24] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[04:46:26] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (Ping timeout)
[04:47:01] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[04:47:05] <MaikKlein> i implemented rustc file.rs --format 
[04:47:28] <MaikKlein> should I just make a PR?
[04:48:05] <strcat> format?
[04:48:36] <MaikKlein> it's just pretty print, just that it saves the output to the current or to a different file
[04:48:48] <steven_is_false> MaikKlein: Like gofmt?
[04:48:55] <MaikKlein> ?
[04:49:35] <steven_is_false> I was wondering if it was like the gofmt tool. It seems to be sort of like the gofmt tool.
[04:49:56] <MaikKlein> yeah it probably is
[04:50:42] <MaikKlein> now I can add support in my editor , when I press ctrl+s that it automatically formats my rust file. 
[04:51:00] <MaikKlein> which is a feature that I like to have
[04:52:13] <dbaupp> aatch: I think we're getting the tail end of that storm now
[04:52:29] <dbaupp> (mostly rain though... not much wind.)
[04:53:00] <aatch> dbaupp, heh, well Wellington is pretty windy to start with.
[04:56:41] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[05:13:04] <dbaupp> strcat: bblum's PR failed
[05:13:11] *** sam113101 is now known as sam113101_afk
[05:13:12] *** Quits: MaikKlein (maik@moz-E6D51931.dip0.t-ipconnect.de) (Ping timeout)
[05:13:13] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:13:13] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iAgqBw
[05:13:13] <ghrust> 13rust/06auto 148545569 15Daniel Micay: vec: remove BaseIter implementation...
[05:13:14] <ghrust> 13rust/06auto 1492810f4 15bors: auto merge of #7274 : thestinger/rust/size_hint, r=huonw...
[05:13:14] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:14:34] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:16:04] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[05:16:37] *** sam113101_afk is now known as sam113101
[05:18:28] *** Joins: MaikKlein (maik@moz-E6D51931.dip0.t-ipconnect.de)
[05:19:36] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[05:20:13] *** Quits: MaikKlein (maik@moz-E6D51931.dip0.t-ipconnect.de) (Ping timeout)
[05:20:49] <aatch> rusti: let a = "1234"; a.char_at_reverse(0)
[05:20:50] -rusti- '1'
[05:20:58] <aatch> rusti: let a = "1234"; a.char_at_reverse(1)
[05:20:59] -rusti- '1'
[05:21:02] <aatch> rusti: let a = "1234"; a.char_at_reverse(2)
[05:21:03] -rusti- '2'
[05:21:06] <aatch> rusti: let a = "1234"; a.char_at_reverse(3)
[05:21:07] -rusti- '3'
[05:21:13] <aatch> rusti: let a = "1234"; a.char_at_reverse(4)
[05:21:14] -rusti- '4'
[05:21:22] <aatch> That doesn't seem right..
[05:21:32] <dbaupp> aatch: the first one?
[05:21:47] <aatch> ok, so it's badly named.
[05:21:51] <bjz> rusti: let a = "1234"; a.char_at_reverse(5)
[05:21:52] -rusti- '\x00'
[05:21:58] <bjz> rusti: let a = "1234"; a.char_at_reverse(6)
[05:21:59] -rusti- rust: task failed at 'index out of bounds: the len is 5 but the index is 5', /build/rust-git/src/rust/src/libstd/str.rs:1651
[05:21:59] -rusti- rust: domain main @0x21531b0 root task failed
[05:21:59] -rusti- application terminated with error code 101
[05:22:07] <dbaupp> \o/ bugs
[05:22:07] <aatch> I thought it would be from the end of the string
[05:22:25] <bjz> rusti: let a = "1234"; a.char_at_reverse(-1)
[05:22:25] -rusti- rust: task failed at 'index out of bounds: the len is 5 but the index is -2', /build/rust-git/src/rust/src/libstd/str.rs:1651
[05:22:25] -rusti- rust: domain main @0x25341b0 root task failed
[05:22:26] -rusti- application terminated with error code 101
[05:22:28] <dbaupp> it's meant to be the character behind the given byte index
[05:22:41] <aatch> rusti: let a = "1234"; a.char_at_reverse(a.len())
[05:22:42] -rusti- '4'
[05:22:54] <aatch> That's what I want though.
[05:23:05] <aatch> (The last character)
[05:23:08] <aatch> for a peek function
[05:23:15] <dbaupp> right
[05:23:32] <bjz> yay peek \o/
[05:23:49] <aatch> I must admit, it's nice being able to implement traits straight onto primitive types.
[05:23:53] <aatch> "primitive"
[05:24:00] <aatch> ~str in this case
[05:24:01] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[05:24:02] <dbaupp> yeah
[05:24:39] <dbaupp> (it's mildly annoying not being able to do `impl ~str { ... }` in std though. :( )
[05:24:53] *** Quits: bytbox (s@moz-2E27684C.student.umd.edu) (Ping timeout)
[05:25:38] <strcat> brson: http://i.imgur.com/qo3jyOB.png got this thing working btw :), just need to talk to graydon and figure out how to deploy it
[05:26:26] * strcat is guessing it can just be a web-service-in-a-vm
[05:26:36] <bjz> YAY!
[05:26:39] <strcat> needs a lot of memory though, ideally
[05:26:54] <bjz> paste.rust-lang.org?
[05:27:00] <strcat> since 1GiB of memory means 8 concurrent requests at 128MiB limit
[05:27:18] <strcat> bjz: or [sandbox|play|playpen].rust-lang.org
[05:28:23] <bjz> strcat: what is your statusbar?
[05:28:45] <strcat> bjz: oh it's just vimperator
[05:28:52] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[05:28:53] <bjz> ah
[05:28:59] <strcat> noticeably sketchy since firefox21 came out though :(
[05:29:13] * strcat might have to switch back to pentadactyl
[05:29:16] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[05:29:21] <strcat> assuming that still works
[05:29:31] * bjz is on 23a2
[05:29:37] <strcat> heh
[05:29:38] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[05:29:38] <dbaupp> strcat: not running firefox nightlies? how dare you work on a mozilla project!?! ;P
[05:29:47] <strcat> dbaupp: I can't, my addons will break :(
[05:29:57] * dbaupp was joking :)
[05:30:01] * strcat knows ;p
[05:30:15] <strcat> mostly vimperator (or pentadactyl, I don't care which)
[05:30:22] <strcat> they got really screwed by E4X removal
[05:30:31] <bjz> E4X?
[05:30:44] <strcat> weird xml in js support firefox had (no other browser did)
[05:30:49] <strcat> https://en.wikipedia.org/wiki/ECMAScript_for_XML
[05:30:52] <strcat> they used it heavily
[05:31:17] <strcat> it killed development for months + lots of stuff is still broken
[05:31:38] <dbaupp> that seems like a really useful feature...
[05:31:49] <dbaupp> (since, you know, javascript interacts with html/xml a lot.)
[05:31:57] <strcat> I don't think it took them long to actually port, but the looming dread of having the feature they depended on yanked away scared away all the contributors
[05:32:05] <bjz> weird
[05:32:11] <strcat> dbaupp: well, I guess the idea is that most people use json now
[05:32:28] <strcat> but afaik firefox itself uses a lot of xml so vimperator/pentadactyl do
[05:32:33] <dbaupp> strcat: I guess so
[05:32:36] <bjz> is lots of ff still xsl?
[05:32:42] <strcat> bjz: dunno
[05:32:52] <bjz> that stuff is weird
[05:32:59] <bjz> logic in xml
[05:33:00] <strcat> vimperator switched to this terrible preprocessor hack 
[05:33:04] <bjz> oh the humanity
[05:33:16] <strcat> and pentadactyl was switched to encoding xml as arrays/strings - it's really ugly
[05:33:27] <bjz> heh
[05:33:29] <strcat> thousands of nested arrays
[05:33:41] * strcat hopes they used some script to port it
[05:33:47] <Aetherspawn> firefox on windows is dumpster right now
[05:33:48] <Aetherspawn> sorrry :(
[05:34:31] * Aetherspawn wonders if he'll get !kb'd for saying that in a mozilla channel
[05:34:37] * strcat is happy with firefox
[05:34:44] <Aetherspawn> on linux its great
[05:34:49] <strcat> just not happy that they removed something an addon I care about depended on ;p
[05:34:53] <Aetherspawn> but something on windows makes it fat. it locks up really frequently.
[05:35:10] <strcat> another test fail :(
[05:35:30] <strcat> great, I broke the doc comment
[05:37:13] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:37:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1492810f4 to 14fc83d82: 02http://git.io/N3iJvQ
[05:37:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:37:14] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:37:14] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/nukx9A
[05:37:14] <ghrust> 13rust/06auto 143c2f442 15Alex Crichton: Rename all files with the 'rc' extension
[05:37:14] <ghrust> 13rust/06auto 1428825e7 15Alex Crichton: Add the `warnings` lint attribute
[05:37:14] <ghrust> 13rust/06auto 14c127a97 15Alex Crichton: Deny common lints by default for lib{std,extra}
[05:37:16] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:37:38] <Eridius> we're losing .rc now?
[05:37:48] <dbaupp> Eridius: it's had no effect for ages
[05:37:58] <dbaupp> Eridius: so that is just a formality
[05:39:47] *** Quits: rjbailey (jake@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Quit: Leaving)
[05:40:07] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:41:03] *** Joins: rjbailey (jake@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[05:41:36] <strcat> bjz: was simple to do too, I just hate web stuff ;p
[05:42:04] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[05:43:00] <strcat> https://gist.github.com/thestinger/5843928 since I already made the important part... (the sandbox)
[05:43:21] <brson> strcat: that web-based rusti looks great
[05:43:46] <aatch> Urgh. So I can define a generic default method, I just can't call it...
[05:43:51] <brson> we should redesign the web site sometime
[05:43:57] <strcat> ;)
[05:44:06] * aatch nominates bjz
[05:44:09] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[05:44:20] <dbaupp> aatch: who needs to call methods anyway?
[05:44:20] <bjz> :)
[05:44:38] <aatch> I tries to get the type of self, which is apparently unimplemented
[05:44:48] <bjz> if you need any help with design, i might be able to assist
[05:45:07] <bjz> I'm not great at the web programming though
[05:45:23] <strcat> web programming means finding libs to do what you want :D
[05:45:40] <strcat> ace (text editor widget) even have a rust mode
[05:45:41] <bjz> yeah, mainly I can't be bothered with that stuff
[05:45:44] <strcat> s/have/has/
[05:45:48] <bjz> :P
[05:45:55] <dbaupp> strcat: really? who implemented it?
[05:46:18] <strcat> https://github.com/ajaxorg/ace/blob/master/lib/ace/mode/rust_highlight_rules.js
[05:46:26] <strcat> https://github.com/ajaxorg/ace/blob/master/lib/ace/mode/rust.js
[05:46:40] <strcat> dunno who that is
[05:46:47] <brson> i don't think there's much programming to do, hopefully. I'm happy with the approach of serving the static home page and delegating everything else to other services
[05:47:09] <brson> obviously, the rust interpreter involves a lot of programming
[05:47:11] <bjz> personally I think the current design scheme on rust-lang.org is very good, but the layout and content could be tuned, and the typography cleaned up
[05:47:29] <bjz> I'm not a fan of the recent doc design changes though
[05:47:30] <dbaupp> strcat: heh, well, pcwalton seems to be involved in it, so he's a reasonable candidate (e.g. http://pcwalton.blogspot.com.au/2010/11/syntax-highlighting-specification.html)
[05:47:33] <brson> i would like it to say less
[05:47:47] <bjz> brson: agreed
[05:47:53] <dbaupp> bjz: (they are better than it was, though?)
[05:48:15] <brson> i think the new doc style is more readable by adding visual separation to sections, but agree the style of all our assets need to be tuned and brought inline
[05:48:25] <strcat> needs to be smaller
[05:48:27] <strcat> the font
[05:48:29] <strcat> it's huuuuuuuuge
[05:48:50] <bjz> brson: I agree, the old heirachy was completely messed up, and the new design has broken it up
[05:49:08] <bjz> brson: heirachy in the typography sense
[05:49:12] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:49:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c1be353 to 14fc83d82: 02http://git.io/N3iJvQ
[05:49:12] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:49:14] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:49:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/IReRnQ
[05:49:15] <ghrust> 13rust/06auto 1407de40d 15Daniel Micay: vec: remove BaseIter implementation...
[05:49:15] <ghrust> 13rust/06auto 14f60c01f 15bors: auto merge of #7274 : thestinger/rust/size_hint, r=huonw...
[05:49:15] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:49:17] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[05:49:18] <strcat> huh
[05:50:25] <dbaupp> strcat: acrichto's pr failed too
[05:50:26] <bjz> brson: but the colours are a little distracting, I have a feeling rust should probably stick to a very simple, muted palette, with great typography.
[05:50:43] <acrichto> legitimately though
[05:50:47] <bjz> strcat: yes, the line length is crazy too, hard to read
[05:51:05] <acrichto> r? https://github.com/mozilla/rust/pull/7113
[05:51:08] <dbaupp> acrichto: yeah, that one is going to be hard to land... making everything an error :S
[05:51:22] <strcat> "Helvetica Neue",Helvetica,sans-serif
[05:51:26] <strcat> and we need a proper font
[05:51:28] <acrichto> dbaupp: hopefully it won't make future things too hard to land :(
[05:51:31] <strcat> with @font-face I guess
[05:52:11] <dbaupp> acrichto: well, it'll stop people just leaving unused imports scattered through the codebase
[05:52:15] <dbaupp> (which is good.)
[05:52:16] <bjz> strcat: don't want to go with something crappy from font-squirrel though :/
[05:52:26] <strcat> bjz: sure, a good open-source font
[05:52:29] *** Quits: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[05:52:34] <strcat> inconsolata, droid sans mono or whatever for the code
[05:52:44] <strcat> some nice sans-serif font for the text
[05:52:49] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[05:53:00] <bjz> strcat: I can do some font searching if you like
[05:53:08] <strcat> https://www.google.com/fonts/
[05:53:13] <strcat> all those are FOSS ones
[05:53:37] <acrichto> dbaupp: actually turns out windows had a few failures as well, could you re-r+ ?
[05:53:38] * strcat is terrible at picking styling/font stuff though
[05:53:44] <bjz> most are pretty crappy though :(
[05:53:52] <strcat> bjz: yeah but most fonts are crappy :)
[05:53:54] <bjz> and poor hinting support
[05:54:04] <bjz> the good ones arent :)
[05:54:07] <dbaupp> acrichto: done
[05:54:10] <acrichto> dbaupp: thanks!
[05:54:20] <strcat> bjz: yeah most have bad hinting, there are very few FOSS fonts with good hinting
[05:54:23] * aatch would really like bounds on trait parameters at the moment
[05:54:33] <strcat> the DejaVu family has *great* hinting + unicode coverage
[05:54:35] <dbaupp> aatch: for default methods?
[05:54:46] <bjz> helvetica for the body copy seems to look good on the website, but probably need to fall back to arial
[05:54:55] <strcat> droid [sans|mono|serif] are what android uses
[05:55:08] <dbaupp> spam? http://www.reddit.com/r/rust/comments/1gwa2q/rust_alpha_keys_giveaway_livestream/
[05:55:08] <bjz> strcat: but that's a google font :P
[05:55:09] <strcat> bjz: or just serve arimo ourselves
[05:55:20] <strcat> bjz: yeah it's a google font but it's an open-source/free font
[05:55:26] <bjz> strcat: plus droid is a haphazard mix of stuff
[05:55:44] <strcat> arimo is just another arial clone (for chromeos/android)
[05:55:56] <bjz> bjz: and arial is a helvetica clone
[05:56:08] <strcat> bjz: yeah but it'd be nice to have one we can serve with @font-face
[05:56:10] <bjz> *strcat
[05:56:15] <strcat> for a cross-platform uniform look
[05:56:33] <aatch> dbaupp, no, just for traits
[05:56:36] <bjz> strcat: they are pretty indistiguishable on screen
[05:56:58] <strcat> bjz: true
[05:57:08] <strcat> but arimo is the only one we could serve with @font-face
[05:57:10] <strcat> the others are non-free
[05:57:21] <bjz> strcat: why do you need @font-face?
[05:57:30] <bjz> strcat: for body copy?
[05:57:31] <strcat> bjz: because not everyone has these fonts
[05:57:40] <strcat> android/linux don't usually have helvetica/arial
[05:58:29] *** Joins: dcolish (dcolish@1DB472A5.BE69FB10.416A0103.IP)
[05:58:55] <bjz> strcat: well we'd have the best fallback for helvetica/arial that is installed on most linux machines. is that arimo?
[05:58:56] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[05:59:01] <aatch> Oh well, at least I can still use extension traits.
[05:59:12] <strcat> bjz: there isn't really one that's usually installed
[05:59:22] <Luqman> strcat: i wonder if we could use tagged pointers to indicate the drop flag
[05:59:25] <strcat> arimo is probably just on chromeos and android
[05:59:33] <bjz> ugh
[05:59:34] <strcat> Luqman: well zeroing the pointer is enough
[05:59:55] <strcat> usually at least
[05:59:58] * strcat can't think of special cases
[06:00:05] <strcat> I guess just enums?
[06:00:18] <bjz> strcat: what on earth does the web look like from linux?
[06:00:31] <strcat> bjz: well depends on the fonts you install ;p
[06:00:36] <aatch> bjz, on some sites, terrible
[06:00:40] <strcat> you can install metric compatible clones of various fonts
[06:00:44] <bjz> *facepalm*
[06:01:32] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[06:01:41] *** Quits: rajul (quassel@A2DDF553.812B5995.2051BA92.IP) (Ping timeout)
[06:01:44] *** Joins: rajul (quassel@A2DDF553.812B5995.2051BA92.IP)
[06:01:46] <strcat> you pretty much have to use @font-face or you can only support OS X and windows ;p
[06:01:48] <bjz> aatch: can you test for helvetica/arial/arimo, then fallback to arimo @font-face?
[06:02:01] <aatch> No idea
[06:02:05] <strcat> bjz: not sure if browsers will load the font before falling back
[06:02:13] <strcat> sec]
[06:02:18] <bjz> then we choose a header font
[06:02:25] <dcolish> way more people here than freenode!
[06:02:41] <bjz> dcolish: yep, that's why we reccomend it
[06:02:43] <aatch> There's #rust on freenode?
[06:02:55] <strcat> shouldn't be called #rust on freenode ;p, should be ##rust
[06:03:00] <bjz> yep
[06:03:03] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[06:03:06] <strcat> single # ones are for official channels
[06:03:22] <bjz> agreed
[06:03:53] * strcat wishes this was faster
[06:04:03] <strcat> 3 requests per second for each thread is awful :(
[06:04:06] <strcat> just for hello-world
[06:04:23] <dbaupp> strcat: make rustc faster?
[06:04:26] <strcat> yep
[06:04:30] <strcat> pretty much the only option :D
[06:04:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:04:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:05:33] <dbaupp> I wonder if you could have the std & extra crates with metadata decompressed and on a ramdisk
[06:05:49] <dbaupp> (since that seems to be a large part of compilation time for small files.)
[06:06:11] <strcat> I could put the root on a ramdisk
[06:06:34] *** Joins: Blei (philipp@moz-650B9C6A.cust.bluewin.ch)
[06:06:35] <strcat> /home/strcat/projects/rust/src/test/run-pass/const-vec-of-fns.rs:18:4: 18:7 error: unresolved import (maybe you meant `std::*`?)
[06:06:37] <strcat> /home/strcat/projects/rust/src/test/run-pass/const-vec-of-fns.rs:18 use std;
[06:06:37] *** Joins: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP)
[06:06:40] <strcat> dbaupp: pretty sure it's going to fail again
[06:06:42] <strcat> ;\
[06:06:46] <dbaupp> gah?
[06:06:47] <dbaupp> :(
[06:06:48] <bjz> strcat: personally I think it's pretty awesome that Processing comissioned their own typeface, but I have a feeling that's well out of our budget :)
[06:07:29] * dbaupp clearly doesn't understand Rust's import system well enough
[06:09:00] <strcat> rusti: 2
[06:09:00] -rusti- 2
[06:09:00] -rusti- 71684KiB
[06:09:07] <strcat> he uses even more memory than before
[06:09:20] <strcat> rusti: 2 + 2
[06:09:21] -rusti- 4
[06:09:21] -rusti- 71776KiB
[06:09:29] <strcat> rusti: ~[1, ..10000];
[06:09:29] -rusti- ()
[06:09:29] -rusti- 71768KiB
[06:09:32] <strcat> rusti: ~[1, ..100000];
[06:09:33] -rusti- ()
[06:09:33] -rusti- 73772KiB
[06:09:36] <strcat> rusti: ~[1, ..1000000];
[06:09:36] -rusti- ()
[06:09:36] -rusti- 73756KiB
[06:09:40] <strcat> rusti: ~[1, ..10000000];
[06:09:40] -rusti- ()
[06:09:40] -rusti- 83308KiB
[06:09:43] <strcat> rusti: ~[1, ..100000000];
[06:09:44] -rusti- application terminated abnormally with signal 9 (Killed)
[06:09:44] -rusti- 131072KiB
[06:10:11] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[06:10:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f60c01f to 14fc83d82: 02http://git.io/N3iJvQ
[06:10:11] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[06:10:15] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:10:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/XT9Y8w
[06:10:15] <ghrust> 13rust/06auto 14d2e9912 15Daniel Micay: vec: remove BaseIter implementation...
[06:10:15] <ghrust> 13rust/06auto 143b126e4 15bors: auto merge of #7274 : thestinger/rust/size_hint, r=huonw...
[06:10:15] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:10:27] <strcat> for once bors does the right thing
[06:11:06] <aatch> I almost have a bare-bones parser combinator
[06:11:15] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[06:12:16] <dbaupp> aatch: using @fn?
[06:12:25] <aatch> dbaupp, nope, using traits
[06:12:29] <dbaupp> oh, neat
[06:13:17] <aatch> Parsec's GenParser type-thing (been a while since I did haskell) maps quite well to a GenParser trait
[06:13:41] *** Joins: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP)
[06:14:00] <aatch> I have a Fail parser and a CharParser now
[06:14:04] <dcolish> are owned closures recommended over managed in the same way that owned pointers are perferred over managed?
[06:14:07] <strcat> pleaaaaaase land
[06:14:13] <aatch> so you can parse exactly 1 character
[06:14:20] <dbaupp> aatch: or fail
[06:14:26] <aatch> dbaupp, yes lol
[06:14:44] <dbaupp> that's exactly what I've been looking for!
[06:14:55] <strcat> dcolish: stack allocation and stack closures should be what you use most of the time
[06:14:55] <strcat> using ~ and @ outside of a data structure should be very rare
[06:15:53] <aatch> Now I have to figure out how to map the `bind` operator to Rust code
[06:16:30] <dcolish> strcat: makes sense, i am mostly curious
[06:16:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:16:45] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:16:51] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:16:53] <dbaupp> aatch: it's tricky, if you need type parameters
[06:17:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:17:07] * dbaupp wants higher kinded types
[06:17:22] <strcat> dcolish: but yeah, you are better off with ~ than @ if it's enough
[06:17:58] <strcat> semantically, T, &T, &mut T, ~T, @T are all nice
[06:18:04] <strcat> @mut T is a pain from the dynamic failures
[06:19:00] <aatch> Man I have long parameter lists...
[06:19:07] <aatch> impl<T,S,A,B,L:GenParser<T,S,A>,R:GenParser<T,S,B>>
[06:19:16] <strcat> if performance isn't an issue there's no reason to avoid @
[06:19:28] <strcat> aatch: heh
[06:19:42] <dcolish> when is performance not an issue?
[06:20:09] <aatch> when you're writing something that is bounded by, for example, io
[06:20:42] <strcat> there are times when shared ownership is a good thing - if a persistent data structure actually happens to save you a lot of memory usage, for one thing
[06:20:47] <aatch> or where maintainability and simplicity trump performance.
[06:21:12] <aatch> (assuming that using @ would be simpler in some cases)
[06:21:33] <dcolish> afaict ~ vs @ doesnt really simplify the code that much
[06:21:37] <doomlord> having both in one language should be good... 
[06:22:23] <strcat> dcolish: well if you don't have a situation where shared ownership seems like an easy solution, ~ will be just as easy to use
[06:22:32] <strcat> if not easier, because it's not immutable
[06:23:02] <strcat> but sometimes it's hard to make something use a clear ownership tree
[06:23:08] <dcolish> borrowed pointers seem like one way to share ownership?
[06:23:15] <doomlord> @ is always immutable, bugs with @mut ?
[06:23:22] <bjz> aatch: wish we had associated items :(
[06:23:31] <strcat> dcolish: well borrowed pointers don't share ownership, they just let you share references to the object
[06:23:37] <bjz> aatch: that would help with the param lists
[06:23:38] <strcat> the object has to outlive the borrowed pointers
[06:24:04] <strcat> doomlord: @mut can fail dynamically from borrowing
[06:24:05] <aatch> bjz, yes.
[06:24:09] <bjz> aatch: what do the letters stand for?
[06:24:25] <aatch> Token, State, <Some Type>
[06:24:26] <strcat> doomlord: so it should pretty much be avoided unless it's absolutely the only sane way to do something
[06:24:35] <strcat> both from a robustness and performance POV
[06:24:43] <aatch> the A and B are just arbitrary types
[06:24:43] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Client exited)
[06:24:54] <aatch> "return" types from the parsers
[06:25:00] <strcat> if you can pass it everywhere by-value, you won't get borrow failures, but you can still have other weird mutability issues
[06:25:05] <doomlord> i think i need to work through an example to understand exactly why, does the borrowing confuse lifetime or tracing?
[06:25:10] <strcat> like being able to mutate keys in a map externally, breaking the map
[06:25:14] <strcat> doomlord: borrowed pointers are unmanaged
[06:25:15] <aatch> (though the actual return type is Either<ParseError,A>)
[06:25:22] <strcat> doomlord: and anyway, it's not about gc
[06:25:26] <strcat> doomlord: it's about shared ownership
[06:25:30] <strcat> RcMut has dynamic failures too
[06:25:40] <strcat> shared ownership -> mutability isn't inherited
[06:25:49] <strcat> so either it's a) always mutable (@mut, RcMut) or b) immutable
[06:25:51] <bjz> aatch: eh, shame you have T taken up
[06:26:05] <strcat> if it's always mutable, freezing has to be done dynamically
[06:26:10] <strcat> and freezing *is* required to make &/&mut safe
[06:26:32] <doomlord> freezing happens as a matter of course with ~T, right?
[06:26:40] <bjz> aatch: I'm really looking forward to looking at it
[06:26:41] <strcat> doomlord: entirely statically
[06:26:51] <strcat> doomlord: with anything owned, it's entirely a static check
[06:27:04] <strcat> owner immutable or a borrow is active -> frozen
[06:27:21] <aatch> We know exactly every place a ~ can be potentially read, written to or freed.
[06:27:21] <strcat> the only dynamic checks/failures are with shared, mutable boxes (RcMut and @mut)
[06:27:28] <bjz> aatch: we'll have to get an XML parser going :)
[06:27:39] <strcat> bjz: believe me you don't want to
[06:27:40] <bjz> aatch: then we can parse the gl spec
[06:27:43] <strcat> validating xml parsing isn't fun ;p
[06:27:55] <doomlord> if you couldn''t borrow@,would that fix it
[06:28:02] <bjz> strcat: oh well, at least just one for the gl spec
[06:28:06] <aatch> bjz, one thing at a time, I'm having trouble implementing something simple like chain.
[06:28:13] <strcat> doomlord: if you couldn't borrow from @mut, it wouldn't have dynamic failures *from borrows*
[06:28:14] <bjz> dang
[06:28:30] <strcat> doomlord: shared mutable things fundamentally lead to dynamic failures
[06:28:35] <bjz> aatch: like the monadic HOF?
[06:28:42] <strcat> doomlord: an @mut container will have iterator invalidation
[06:28:44] <bjz> aatch: like in result/option?
[06:28:56] <strcat> either it a) does dynamic freezing when an iterator is checked out or b) invalidates iterators
[06:29:01] <strcat> another example
[06:29:05] <aatch> bjz, well, in monadic terms, I'm trying to implement bind
[06:29:08] <strcat> you have HashMap<@mut K, V>
[06:29:10] <aatch> (>>=)
[06:29:13] <strcat> that means the keys can be mutated externally
[06:29:23] <bjz> aatch: we need HOTs :)
[06:29:24] <strcat> so an external @mut handle can break the hash table integrity
[06:29:30] <doomlord> i dont have all the details of the cases here, but it sounds like there are things it might be better for the language to disallow ?
[06:29:37] <strcat> doomlord: they can't be disallowed
[06:29:51] <strcat> doomlord: shared mutable ownership == dynamic mutability related failures
[06:29:53] <strcat> in any language
[06:30:02] <Eridius> strcat: Hash should not be implemented on @mut anything :/
[06:30:04] <strcat> want to solve those dynamic failures? no shared mutable ownership
[06:30:15] <Eridius> is IterBytes implemented on <T: IterBytes> @T or somesuch?
[06:30:17] <dbaupp> aatch: it might be easier to implement fmap and join?
[06:30:19] * dbaupp doesn't know
[06:30:25] <bjz> aatch: parsec uses bind doesn't it
[06:30:27] <strcat> Eridius: don't think so but someone could make an @mut type and implement it
[06:30:32] <aatch> dbaupp, I have no idea...
[06:30:35] <strcat> Eridius: I'm sure the compiler does that
[06:30:36] <Eridius> strcat: they deserve what they get then
[06:30:38] <dbaupp> bjz: parsec is a monad, so yes
[06:30:43] <strcat> Eridius: sure ;p
[06:30:47] <bjz> (I think I remember seeing it in the source)
[06:31:00] <bjz> dbaupp: yup
[06:31:20] <strcat> doomlord: mutable, shared container -> iterate over it, mutate it through another handle -> failure or memory unsafety, depending on the language
[06:31:21] <doomlord> does the compiler warn about these cases perhaps.. 
[06:31:27] <strcat> doomlord: it can't
[06:31:28] <aatch> I'm just trying to get something like p1 >> p2 to do something sane.
[06:31:35] <strcat> doomlord: it can warn about a tiny subset of them
[06:31:42] <strcat> but the ones it can warn about are obvious cases
[06:31:53] <bjz> aatch: what do you mean by sane?
[06:32:02] <strcat> if you use @mut/RcMut, you're going to be haunted by the possibility of dynamic failures - just like you are in other languages
[06:32:04] <bjz> aatch: what are you having difficulty with?
[06:32:06] <doomlord> how about a compiler switch for uber-safe mode which dissallows them..
[06:32:19] <strcat> doomlord: it's "safe", it's just a fail!()
[06:32:39] <strcat> doomlord: I have an issue about suggesting removing sugar for dynamic borrowing and moving it to methods
[06:32:52] <strcat> but @mut alone can lead to other failures
[06:33:00] <strcat> not really something you can fix
[06:33:31] <strcat> it also means you can't see whether a function mutates stuff from the signature
[06:33:34] <steven_is_false> doomlord: You mean a warn mutable managed memory flag?
[06:33:40] <strcat> if any parameter is non-Const
[06:33:53] <strcat> steven_is_false: well, a warning about any non-Const type I guess
[06:33:56] <strcat> Cell, RcMut, @mut
[06:34:09] <strcat> but there are other ways to do that kind of error
[06:34:25] <aatch> bjz, basically, an ident parser would be something like `letter >> Repeat::one_or_more(alpha_num)`, it would be nice if that parser returned an array of character, including the first one
[06:35:03] <strcat> aatch: spirit lets you choose either building an AST or running closures as you go
[06:35:07] <strcat> and you can choose the AST representation
[06:35:20] <strcat> (well you could also do both if you were insane ;p)
[06:35:52] <aatch> strcat, heh. I haven't quite figured out all the details yet.
[06:36:11] <bblum> dbaupp: of course it did
[06:36:13] <strcat> aatch: http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/tutorials/mini_xml___asts_.html not sure if that will be comprehensible if you don't know C++/spirit already ;p
[06:36:21] <strcat> (probably not!)
[06:36:35] <bblum> argh what the second one failed too
[06:36:53] <bblum> oh sheesh
[06:37:15] * strcat had a really stupid error
[06:37:24] <strcat> tried to fix something with a use statement, accidentally put it above the docstring
[06:37:31] <strcat> what kind of run-pass test has a docstring? ;p
[06:37:36] <bblum> i swear these didn't fail on friday
[06:39:06] <strcat> aatch: heh
[06:39:19] <strcat> Counter::new(0, 1).take_while(|&x| x < 1000).fold(0, |a, b| a + b)
[06:39:29] <strcat> constant folds to i64 499500
[06:39:41] * strcat is impressed
[06:39:44] <strcat> it works for < 100000 too
[06:39:55] <strcat> and with new(2, 5) or other steps
[06:39:57] <strcat> not for floats.
[06:40:01] <dbaupp> strcat: presumably it works for any upperbound
[06:40:06] <strcat> I guess LLVM knows about integer ranges
[06:40:15] <strcat> or at least, loops like that
[06:40:31] <aatch> strcat, yep. SCCP
[06:40:44] <aatch> Sparse Conditional Constant Propogation
[06:41:40] <strcat> very cool :)
[06:41:55] <bblum> strcat: james miller is you?
[06:41:57] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[06:41:58] <bblum> or who?
[06:42:00] <aatch> if you have a branch that succeeds relative to some constant, it tracks the information and collects the constraints
[06:42:02] <aatch> bblum, aye
[06:42:07] <strcat> bblum: that's aatch 
[06:42:14] <bjz> eevee: ping
[06:42:15] * strcat is daniel micay
[06:42:39] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[06:42:45] <bblum> aatch: you r= p=10 my pr just for the priority? or what?
[06:43:16] <aatch> bblum, oh, well the p=10 was to try and get it through faster. the r= itself was because you didn't do it properly :P
[06:43:17] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[06:43:21] <aatch> you have to comment on the commit.
[06:43:28] <strcat> bblum: I think it's probably going to conflict with the one I have pending atm :(
[06:43:35] <bblum> aatch: oh really?
[06:43:40] <bblum> i always wondered about that
[06:43:43] <bblum> im bad at PR apparently
[06:43:49] <aatch> bblum, yes, which is why bors didn't see it for over 4 hours
[06:43:50] * dbaupp thinks almost all PRs conflict with strcat's current one
[06:43:50] <bblum> i've managed to screw it up in like all different possible ways
[06:43:56] <bblum> sigh :P
[06:44:03] <bjz> bblum: don't blame yourself
[06:44:12] <strcat> bblum: well, I managed to make bors lose his mind yesterday :p
[06:44:26] * strcat isn't quite sure how
[06:44:55] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[06:45:05] <bjz> bblum: it's a UI problem :)
[06:45:11] <bblum> bjz: hmm
[06:45:23] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[06:45:49] <bjz> bblum: but not one that is in dire need of a fix, just need to have the knowledge
[06:45:49] <strcat> if we actually had nefarious people open PRs, the current system would be bad
[06:46:04] <strcat> lets say I commented on an evil commit
[06:46:13] <strcat> they could then *edit my comment* to r+ since it's in their repo ;\
[06:46:17] * strcat hates github sometimes
[06:46:39] <dbaupp> strcat: really?
[06:46:41] <dbaupp> :S
[06:46:43] <strcat> dbaupp: yep
[06:46:58] <bjz> bblum: it's like when people push on doors that they should pull, it's not because they're stupid, it's because of poor design.
[06:47:16] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:47:16] <ghrust> 01[13rust01] 15bblum created 06trait-bounds (+10 new commits): 02http://git.io/EGzm2A
[06:47:16] <ghrust> 13rust/06trait-bounds 14f22de5c 15Ben Blum: Add rules for assert, fail, and deriving to vim syntax file. Also highlight the mod path in "use module;" properly.
[06:47:16] <ghrust> 13rust/06trait-bounds 14e680df1 15Ben Blum: Parse and typecheck (not kindcheck) bounds on trait paths.
[06:47:17] <bjz> bblum: :)
[06:47:18] <ghrust> 13rust/06trait-bounds 1433058ff 15Ben Blum: Add tests for not-kind-checked trait bounds.
[06:47:19] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:47:30] <strcat> solution: rotating doors where people try to rotate them the wrong way instead
[06:47:35] <bblum> whoooops
[06:47:53] <bblum> git push my *other* origin
[06:48:26] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:48:26] <ghrust> 01[13rust01] 15bblum 04deleted 06trait-bounds at 140672f4b: 02http://git.io/oUvqwA
[06:48:26] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:48:34] <aatch> This is why I have upstream as a read-only remote
[06:48:36] <dbaupp> strcat: have you told graydon about that huge hole?
[06:48:45] <strcat> dbaupp: yes but he may have been tired and didn't see
[06:48:51] <strcat> or missed the msg
[06:48:53] * strcat doesn't remember
[06:49:00] <aatch> I can just use git@github.com:... if I really need to push to mozilla/rust
[06:49:01] <mark_edward> rusti: use std::iterator::*; Counter::new(0, 1).take_while(|&x| x < 1000).fold(0, |a, b| a + b)
[06:49:01] <dbaupp> aatch: is there a nice way to do that other than setting the push-url to something invalid?
[06:49:05] -rusti- 499500
[06:49:05] -rusti- 116012KiB
[06:49:16] <strcat> bblum: if you set 'push = matching' it will refuse to push to a branch with a non-matching name or create a branch without requesting it with -u
[06:49:21] <bjz> bblum: yeah, I'd reccomend readonlyfying upstream
[06:49:46] <strcat> or push = simple
[06:49:50] <bblum> bjz: what's the incantation for that?
[06:49:52] * strcat forgets the difference
[06:49:56] <mark_edward> is 116012KiB the memory rusti used for the operation I sent it?
[06:50:09] <strcat> mark_edward: the peak usage, yes - I accidentally left it enabled
[06:50:25] <mark_edward> isn't that crazy for such a simple thingamjigger?
[06:50:25] <bjz> bblum: can't remember :P
[06:50:33] <strcat> mark_edward: yep, rustc sucks
[06:50:43] <strcat> it's the max usage including the compiler's peak
[06:51:00] <Blei> question: how do i write an impl for a struct with a declared lifetime?
[06:51:05] <strcat> and it includes the linker it spawns in that
[06:51:06] <mark_edward> :-( I like rustc...  I just wish he had better traits...
[06:51:12] <Blei> impl Foo { .. } => illegal anonymous lifetime
[06:51:14] <Blei> but
[06:51:19] <mark_edward> Aw, i forgot the linking and compiling
[06:51:26] <Blei> imp Foo<'self> { .. } => illegal lifetime 'self'
[06:51:37] <strcat> mark_edward: it's capped at 128MiB so that's cutting it pretty close ;[
[06:51:42] <mark_edward> oh ok
[06:51:50] <dbaupp> Blei: impl<'self> Foo<'self>
[06:51:58] <Blei> dbaupp: aah, thanks!
[06:52:21] * dbaupp thinks it's silly that 'self is still treated specially
[06:52:22] <strcat> rusti: let xs = ~[1, ..1000000000];
[06:52:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/NAhi
[06:52:32] <strcat> rusti: let xs = ~[1, ..10000000];
[06:52:32] -rusti- <anon>:9:13: 9:15 warning: unused variable: `xs` [-W unused-variable (default)]
[06:52:33] -rusti- <anon>:9          let xs = ~[1, ..10000000];
[06:52:33] -rusti-                       ^~
[06:52:33] -rusti- ()
[06:52:35] <strcat> rusti: let xs = ~[1, ..100000000];
[06:52:36] -rusti- <anon>:9:13: 9:15 warning: unused variable: `xs` [-W unused-variable (default)]
[06:52:36] -rusti- <anon>:9          let xs = ~[1, ..100000000];
[06:52:36] -rusti-                       ^~
[06:52:38] -rusti- application terminated abnormally with signal 9 (Killed)
[06:52:51] <strcat> [41963.638001] Memory cgroup out of memory: Kill process 15837 (out) score 1014 or sacrifice child
[06:52:52] <strcat> [41963.638003] Killed process 15837 (out) total-vm:888136kB, anon-rss:130876kB, file-rss:1696kB
[06:52:54] <strcat> there it goes
[06:52:56] <mark_edward> Blei: something like this?
[06:53:06] <mark_edward> rusti: struct Point {x:int,y:int} impl Point { fn x_mut<'r>(&'r mut self) -> &'r mut int {&'r mut self.x } } let p: &mut Point = &mut Point {x:1,y:1}; let x = p.x_mut(); (*x) += 4; let r: int = *x; r
[06:53:07] -rusti- 5
[06:53:27] <Blei> mark_edward: well it's rather like this:
[06:53:58] <Blei> rusti: struct Foo<'self> { a: &'self int } impl<'self> Foo<'self> { fn foo(&self) {} }
[06:53:59] -rusti- ()
[06:54:18] <mark_edward> what does that even mean?
[06:54:39] <mark_edward> declaring a struct with a lifetime... isn't the lifetime determined by use?
[06:54:57] <Blei> that you have a burrowed pointer inside the struct whose lifetime is parameter 'self
[06:55:04] <mark_edward> ah i see
[06:55:09] <Blei> you can't have undeclaredd borrowed pointers in structs
[06:55:45] <mark_edward> are you sure you want them to have the same lifetime?
[06:56:00] <mark_edward> what if the member's lifetime is longer? i dunno how the compiler deals with this
[06:56:12] <Blei> to be honest, i'm not sure either :)
[06:56:29] <dbaupp> mark_edward: lifetimes aren't fixed like that
[06:56:56] <dbaupp> mark_edward: so you can borrow a pointer that has a shorter lifetime than the lifetime you are borrowing from
[06:57:02] <dbaupp> mark_edward: it just can't be longer
[06:57:08] <aatch> mark_edward, lifetimes are assertions that something will life for /at least/ a certain time.
[06:57:12] <mark_edward> so the parameter is setting  a minimum bound on the lifetime referred too?
[06:57:21] <aatch> s/life/live
[06:57:21] <dbaupp> *the lifetime of the object you are borrowing from
[06:57:28] <dbaupp> mark_edward: yes
[06:57:37] <mark_edward> ah, that makes sense
[06:58:03] <dbaupp> (it's basically saying "instances of this struct are valid for at most the lifetime of `a`")
[06:58:23] <aatch> Hah! thought so. Parsec's bind just returns the last thing.
[06:58:32] <mark_edward> or the other way around, "a is valid for at least the lifetime of the instance"?
[07:00:01] <dbaupp> aatch: returns the second thing after passing the first thing into the second parser*, right?
[07:00:09] <dbaupp> *(function returning a parser)
[07:00:17] <aatch> dbaupp, yep
[07:01:10] <strcat> whoa
[07:01:18] <strcat> ace even has a vim mode with text object support
[07:01:20] <dbaupp> mark_edward: yes, that works too, but normally the struct is constructed "around" whatever `a` points to, so lifetimes flowing from a to the struct is possibly a more natural way to look at it
[07:01:21] * strcat is impressed
[07:01:40] *** Quits: rajul (quassel@A2DDF553.812B5995.2051BA92.IP) (Client exited)
[07:01:43] <mark_edward> ah i see, that does make more sense in this case.
[07:01:43] <strcat> no undo trees though, I guess
[07:02:13] <bjz> aatch: solved it?
[07:02:36] <aatch> bjz, yep, I thought that Parsec did something that it did not
[07:02:43] <bjz> ahh
[07:03:08] <bjz> aatch: is it just like Parser1 + Parser2 + Parser3?
[07:03:15] <dbaupp> mark_edward: although from the PoV of something consuming the struct, it wants to know that the struct being valid means the inner pointer is valid (which is exactly what the lifetime says, and what your other rephrasing says)
[07:04:01] <aatch> bjz, what is?
[07:04:15] <bjz> bind?
[07:04:23] <aatch> bjz, oh, yeah.
[07:04:27] <bjz> in parsec?
[07:04:43] <aatch> With the result of the parser that makes being whatever the last thing returns
[07:05:00] <bjz> I thought that was what it was
[07:05:29] <bjz> are you going to use `>>`?
[07:05:43] <aatch> bjz, planning to
[07:06:08] <bjz> not sure how all the precedence stuff plays with it
[07:07:29] <dbaupp> bjz: precedence or associativity?
[07:07:42] <bjz> precedence
[07:07:55] <dbaupp> oh, what other operations would one use with a parser?
[07:07:57] <bjz> ahh : http://static.rust-lang.org/doc/rust.html#operator-precedence
[07:08:16] <bjz> if you were going to use overloads
[07:08:23] <aatch> dbaupp, well I was planning on using |
[07:08:28] <aatch> for alternation
[07:08:38] <dbaupp> aatch: ah, right
[07:08:56] <dbaupp> like <|> and so on.
[07:09:22] <aatch> dbaupp, yep, just within the limits of Rust
[07:09:38] <strcat> dbaupp: looks like it is going to pass
[07:09:43] <dbaupp> strcat: \o/
[07:09:47] <dbaupp> strcat: finally!
[07:09:49] <strcat> both windows bots and a mac bot passed
[07:09:53] <bjz> unfortunately | is a really high precedence, so you'd have to use parens
[07:10:07] <strcat> the ones that matter since I tested on linux ;p
[07:10:13] <dbaupp> rusti: 15 >> 1 | 2
[07:10:14] -rusti- 7
[07:10:18] <bjz> if you were doing more overloads
[07:11:13] <eevee> bjz: pong
[07:11:19] <aatch> rusti: 7 | 4 | 1
[07:11:19] -rusti- 7
[07:11:51] <dbaupp> bjz: fwiw, Haskell's >>=/>> and <|> require parens to use together anyway
[07:11:54] <bjz> eevee: whatever happened to tinsel?
[07:12:07] <bjz> eevee: abandoned?
[07:12:47] <bjz> eevee: looking for something to parse xml
[07:12:49] *** Joins: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com)
[07:12:58] <bjz> recoiling in horror at the C apis
[07:13:13] <strcat> just give up and use libxml2
[07:13:35] <strcat> it's the least bad
[07:14:04] <bjz> strcat: eevee had a repo, tinsel that was going to be a libxml2 wrapper
[07:14:08] <strcat> people who write nice libraries apparently aren't the group of people who like xml :)
[07:14:16] <bjz> :)
[07:14:19] <bjz> fff xml
[07:14:28] <aatch> Fuck XML
[07:14:28] <eevee> bjz: it didn't get very far at all; i discovered libxml2 was huge and nigh impenetrable
[07:14:32] <strcat> libxml2 has outstandingly bad docs though
[07:14:35] <bjz> :(
[07:14:44] <strcat> eevee: well, the trick is to just use the tiny streaming API
[07:14:48] <strcat> and ignore all the tree crud
[07:15:19] <bjz> strcat: I just want to get the structure
[07:15:23] <bjz> the data
[07:15:23] <strcat> heh
[07:15:34] <aatch> I have trait impl declaration that almost hits the 100-char limit...
[07:15:41] <strcat> bjz: well, what's the structure of the xml you want to parse?
[07:15:48] <bjz> http://www.opengl.org/discussion_boards/showthread.php/181927-New-XML-based-API-Registry-released?p=1251775
[07:15:59] <aatch> Man, never have I so appreciated Haskell's type inference.
[07:16:13] <aatch> (and I wasn't exactly ungrateful before)
[07:16:20] <dbaupp> aatch: yeah... writing out the huge signatures is horrible :(
[07:16:29] <aatch> impl<T,S,A,B,L:GenParser<T,S,A>,R:GenParser<T,S,B>> GenParser<T,S,B> for Sequence<L,R>
[07:16:47] <bjz> strcat: I want to convert the data to my rust loader
[07:17:05] <bjz> aatch: and the haskell signature? :P
[07:17:07] <eevee> strcat: i didn't even know there's a streaming API, or that it's smaller or better, or etc.  and yeah the docs are /horrible/.  which made me possibly not the right person to write a wrapper lib  :)
[07:17:13] <strcat> bjz: http://www.xmlsoft.org/html/libxml-SAX2.html
[07:17:40] <aatch> To be fair, it's not exactly concise either.
[07:17:42] <aatch> GenParser tok st a -> (a -> GenParser tok st b) -> GenParser tok st b
[07:17:49] <strcat> you just make a context and it calls your callbacks when it finds the start/end/text bits
[07:17:58] <strcat> I usually use that
[07:18:00] <bjz> strcat: ah
[07:18:04] * strcat never needs an actual tree
[07:18:11] <strcat> at least not yet ;p
[07:18:18] <bjz> well, that's why we have rust ;)
[07:18:20] <strcat> bjz: xml is annoying as hell though
[07:18:43] <bjz> I know, wish they could have done it in a better format
[07:18:52] <strcat> bjz: http://ix.io/6kC
[07:18:56] <strcat> simple, right?
[07:19:20] <bjz> multiply by several thousand
[07:19:24] <strcat> it has 4 text nodes
[07:19:32] <strcat> the newlines and indents count as individual text nodes
[07:19:40] <strcat> err, 5 text nodes*
[07:19:43] <strcat> forgot that there's one at the end
[07:19:46] * strcat sighs
[07:20:01] <strcat> and it feeds you text nodes in chunks
[07:20:15] <strcat> arbitrary sized chunks.
[07:20:21] <bjz> are you talking about xml, or libxml2?
[07:20:27] <strcat> libxml2
[07:20:32] <bjz> ok
[07:20:35] <strcat> but also xml (there are 5 text nodes regardless of the parser)
[07:21:04] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[07:21:15] <strcat> that's why indented html looks a bit different - the newlines/indents count as a text node, and html considers any text node like that to be a single space
[07:21:50] * strcat finds it all very weird/horrible :D
[07:22:03] <bjz> so weird
[07:22:22] <bjz> ahh look, they have a readme: https://cvs.khronos.org/svn/repos/ogl/trunk/doc/registry/public/api/readme.pdf
[07:23:03] * dbaupp has debugged '</foo><foo>' vs '</foo> <foo>' way too many times
[07:24:25] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[07:24:41] <strcat> hurry up bors
[07:25:03] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[07:25:14] <strcat> anyway the end of internal iterators (in the stdlib) is near
[07:25:31] <dbaupp> \o/
[07:26:17] *** Quits: rubber-duck (rubber-duc@moz-F5E2ABA9.dsl.iskon.hr) (Ping timeout)
[07:27:43] <Blei> "error: value may contain borrowed pointers"
[07:27:47] <Blei> why do you hate me so, rustc
[07:28:06] <aatch> Blei, oh that.
[07:28:16] <aatch> I ran into that during my first refactoring.
[07:28:23] <aatch> I cheated.
[07:28:42] <aatch> moved a *() into the closure
[07:29:06] <Blei> what does it even mean?
[07:29:44] <aatch> Blei, you can't get borrowed pointers into heap closures.
[07:30:03] <aatch> because they copy/move the environment (I think)
[07:30:11] *** Quits: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:30:55] <Blei> but, this isn't a heap closure..
[07:30:59] <Blei> wait, maybe it is
[07:31:08] <dbaupp> aatch: a heap closure's environment needs to live at least as long as the closure itself, which precludes any & except for &'static
[07:31:16] <aatch> dbaupp, yep
[07:31:26] <Blei> it totally is...
[07:31:29] <aatch> Which is annoying.
[07:31:42] <aatch> Blei, the ast visitor?
[07:31:43] <Blei> let's see if i can fix that
[07:31:52] <Blei> the ast visitor is ok, i think
[07:32:02] <aatch> Blei, no, the ast visitor sucks
[07:32:22] <Blei> oh, yeah, it's borked as well
[07:32:28] <aatch> Though it can now be re-written as a trait
[07:32:32] <Blei> let's see if i can fix that as well XD
[07:32:33] <aatch> with default methods.
[07:34:34] *** Quits: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: anri)
[07:36:39] <aatch> Heh, there are some odd things when working with certain types.
[07:36:49] <aatch> like `Err(e) => Err(e)`
[07:37:22] <aatch> Basically just so it re-does the type, but that variant doesn't actually depends on the type.
[07:38:23] <dbaupp> aatch: heh
[07:38:26] <dbaupp> `None => None` looks even sillier
[07:38:45] *** Quits: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[07:41:26] <Blei> front::config is so weird
[07:41:55] <Blei> there's all these Context objects and they are actually never used and can be replaced with a static function call
[07:43:18] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[07:43:45] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:44:17] <strcat> dbaupp: could probably be .map
[07:44:25] <strcat> or .map_consume
[07:44:43] <strcat> option module needs work :[
[07:44:43] <dbaupp> strcat: yeah, normally, although there are cases when neither work
[07:45:11] <dbaupp> (i.e. when you want to return in the Some arm.)
[07:45:26] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[07:45:51] <lkuper> oh man oh man default methods *bounces up and down*
[07:47:18] <Blei> oh, it _is_ used
[07:47:19] <Blei> hrrm
[07:47:24] <Blei> this is so ugly
[07:48:07] <strcat> lkuper: the first use in the stdlib is about to land too ;p
[07:48:18] <strcat> I think some things are still broken with them
[07:48:27] <strcat> generic type bounds on the method itself, possibly inline
[07:48:49] <aatch> generics with default methods are kinda broken.
[07:48:50] <lkuper> strcat: yeah, I'm just glad they're less broken
[07:49:02] <aatch> but sully has a few fixes already
[07:49:08] <strcat> aatch: seems to be fine if the generic part isn't on the default method
[07:49:12] <dbaupp> Blei: if you're touching rustc::front... it'd be awesome if config.rs could move to syntax :D
[07:49:25] <strcat> aatch: anyway only way to find/fix them is to use them *everywhere*, obviously
[07:49:27] <strcat> :D
[07:49:53] <Blei> strcat: ok, will see what i can do
[07:50:08] <Blei> fixing all these @fn will be tedious
[07:50:33] <dbaupp> Blei: (that said, I'm not sure config.rs fits in syntax.)
[07:50:45] *** Joins: nano (nano@moz-972880B.superkabel.de)
[07:51:16] <Blei> oh, sorry, wrong nick
[07:51:45] <Blei> dbaupp: well, i'll see if i manage to fix the other stuff first
[07:52:01] <brson> dbaupp: furthermore, config probably makes sense as a syntax extension
[07:52:32] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:52:55] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[07:53:05] <dbaupp> brson: that's true. (it'll require conditionally enabling/disabling them some syntax extensions, since some consumers of the ast will want it macro-expanded but with all config items, e.g. rustdoc.)
[07:53:07] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:53:13] <dbaupp> s/them //
[07:53:49] <dbaupp> hm, this could actually get very tricky, if macros can be conditionally defined.
[07:56:31] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[07:57:16] <strcat> ugh
[07:57:28] * strcat needs css help ;p
[07:57:52] <strcat> I have a div inside another div with resize: both.... how do I make it resize with the parent?
[07:58:42] <dbaupp> strcat: width: 100%; height: 100%; ?
[07:58:48] <aatch> strcat, you need a percentage size
[07:59:00] <strcat> oh perfect
[07:59:02] <strcat> \o/
[08:00:03] <dbaupp> strcat: just linux-64-opt-vg to go!
[08:01:12] *** Joins: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr)
[08:02:41] <strcat> heh
[08:02:50] <strcat> percentage height/width broke the editor widget
[08:03:07] <strcat> until I force resize it and hit enter
[08:05:23] <strcat> maybe I should start it with a width/height and then remove them...
[08:08:04] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[08:08:35] <strcat> yay
[08:08:37] <strcat> passed
[08:10:10] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[08:10:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/XT9Y8w
[08:10:10] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[08:10:37] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[08:13:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:13:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/tkIJGA
[08:13:08] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:14:03] <brson> how's bors doing?
[08:14:56] <strcat> fine now, graydon reverted the change that made it go insane
[08:15:21] <strcat> https://github.com/mozilla/rust/issues/7293
[08:16:09] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[08:16:09] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/GXz13A
[08:16:09] <ghrust> 13rust/06auto 145d5311d 15Michael Woerister: Added overview of the debuginfo module at the beginning of debuginfo.rs.
[08:16:09] <ghrust> 13rust/06auto 14f1bd3e7 15Michael Woerister: Fixed compiler warnings about unnecessary string allocations in debuginfo.rs
[08:16:09] <ghrust> 13rust/06auto 14290d353 15Michael Woerister: Reordered debuginfo.rs and commented public fns
[08:16:12] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[08:17:45] <dbaupp> strcat: bors only has 9 PRs to go
[08:17:50] <dbaupp> (so much orange ;P )
[08:18:09] <strcat> landing 7 (or 8?) of the doc ones at once helped :)
[08:18:50] <dbaupp> yep
[08:18:56] <dbaupp> and also landing a huge patch that conflicts with most of them
[08:19:37] <strcat> aw, I broke the hashmap iterator one
[08:19:41] <strcat> I think I'll rebase that myself
[08:19:47] <strcat> or just add a commit
[08:19:54] <strcat> rebasing other people's commits might be bad form ;p
[08:19:55] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[08:21:06] <strcat> heh, a use statement broke it
[08:22:09] <dbaupp> sigh... isrustfastyet is useless now
[08:22:30] <bblum> if you have "None => None" you shoulda been writing with option.map or option.map_consume
[08:22:38] <bblum> what's wrong with the ast visitor?
[08:23:26] <dbaupp> bblum: doesn't work if you want to use `return` in (what would be) the Some arm
[08:23:50] <strcat> heh I broke it
[08:24:39] <bblum> dbaupp: oh hm
[08:25:08] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[08:25:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147244225 to 143b126e4: 02http://git.io/N3iJvQ
[08:25:08] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[08:25:10] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:25:10] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/IdolGg
[08:25:10] <ghrust> 13rust/06auto 14f43d712 15Fedor Indutny: libc: support functions from sys/mman.h...
[08:25:10] <ghrust> 13rust/06auto 14d42ddcc 15Fedor Indutny: libc: add POSIX-compatible sysconf consts...
[08:25:10] <ghrust> 13rust/06auto 145a038ba 15Fedor Indutny: libc: (u)int => c_(u)int for consts
[08:25:12] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:26:16] <bblum> o m g
[08:26:25] <bblum> my PR bitrotted again
[08:26:28] <bblum> this thing is doomed
[08:26:46] <dbaupp> `llvm-mc: not found`
[08:26:48] <aatch> doooooOOOooooOOooom
[08:26:51] <dbaupp> just needs a retry, right?
[08:27:12] <dbaupp> bblum: it's presumably [].each being removed
[08:27:27] <strcat> bblum: my fault ;p
[08:27:33] <strcat> https://github.com/mozilla/rust/pull/7319 I saved this one!
[08:27:47] * strcat needs it to remove BaseIter, etc.
[08:27:49] <strcat> :[
[08:28:16] <bblum> this is a merge conflict that git could merge if it didn't care about diff context  at all
[08:28:46] <strcat> bblum: I think it only cares if it's a directly neighbouring line
[08:29:41] <bblum> it is, in both cases
[08:29:44] <bblum> but never the same line
[08:30:21] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Quit: leaving)
[08:30:27] <aatch> Argh.
[08:31:08] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[08:31:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145955b2a to 143b126e4: 02http://git.io/N3iJvQ
[08:31:08] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[08:31:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:31:08] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/Rb2D-w
[08:31:08] <ghrust> 13rust/06auto 14080d498 15blake2-ppc: std::hashmap: Implement external iterator for HashMap and HashSet
[08:31:08] <ghrust> 13rust/06auto 143af1d20 15blake2-ppc: std::hashmap: Add test_iterate for HashSet
[08:31:08] <ghrust> 13rust/06auto 14f045210 15blake2-ppc: std::hashmap: Use .iter() instead of .each and similar
[08:31:11] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:31:28] * strcat likes git-diff
[08:31:35] <strcat> you can replace regular 'diff' with it
[08:31:37] <bblum> i feel like i'm on the wrong end of a big-reader lock here
[08:31:54] <strcat> git diff --no-index --color-words untracked_file untracked_file2
[08:31:59] * strcat has an alias
[08:33:06] <aatch> Sorry for the massive example, but could somebody help me figure out how to fix this error: https://gist.github.com/Aatch/5844293
[08:33:13] <strcat> oh bors is ignoring this pull now
[08:33:22] <aatch> Line 152
[08:34:21] <strcat> aatch: what if you give the types manually?
[08:34:52] <aatch> strcat, what do you mean? As in `: Type<Blah, Blah>`?
[08:34:59] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:35:01] <strcat> aatch: ::<Left, Right>
[08:35:06] <strcat> on the static method
[08:35:54] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[08:36:24] <aatch> I get an error on line 156
[08:36:28] <aatch> same thing though
[08:37:01] <strcat> aatch: perhaps just horrible type inference :(
[08:37:07] <aatch> maybe
[08:37:08] * strcat ran into this a lot with Iterator
[08:37:15] <strcat> but you have more complex types
[08:37:25] <bblum> this experience is not making a positive contribution to making me feel like bors is an improvement over pushing straight to incoming
[08:37:37] <bblum> intellectually i know why it is obviously better
[08:37:56] <strcat> bblum: it's buildbot's fault ;p
[08:38:00] <strcat> it used to take 20 mins
[08:38:01] <strcat> atm it takes 3 hours
[08:38:20] <strcat> it's much better when it doesn't just do 8 builds a day ;\
[08:38:31] <bblum> 8 builds a day?
[08:38:38] <strcat> bblum: the slowest one is taking 2-5 hours
[08:38:45] <strcat> on passing ones
[08:38:53] <strcat> depending on whether it lands on real hardware or EC2
[08:39:19] <dbaupp> aatch: what happens if you just put types on everything (i.e. s, o, and so)?
[08:39:20] <strcat> nag graydon about it on monday ;p
[08:39:43] <strcat> aatch: for Iterator we had to add dummy type parameters to everything
[08:39:45] <strcat> if you have
[08:39:54] <strcat> <A, B: Foo<A>>
[08:39:59] <strcat> and return a struct Foo<B>
[08:40:03] <strcat> it can't re-infer A
[08:40:10] <strcat> so you have to add a dummy A parameter
[08:40:21] <strcat> type inference currently sucks.
[08:40:25] <aatch> strcat, that might be it.
[08:40:42] <bblum> can i just be like "there is no way this is architecture-dependent; please run it on all thingies, but abort all the slower ones as soon as the fastest one finishes OK"
[08:40:46] <bblum> or is that a slippery slope
[08:41:33] <strcat> bblum: if we had more real builders it would at least be twice at fast
[08:42:03] <strcat> the EC2 ones are evil :(
[08:42:27] <bblum> what arches do we need
[08:44:05] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[08:44:30] <bblum> http://www.buttercupfestival.com/2-114.htm
[08:44:41] *** Quits: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr) (Quit: pyrac)
[08:45:40] *** Joins: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP)
[08:47:46] <aatch> Finally, got it.
[08:48:11] <aatch> Now to figure out how to not need `let mut so : Sequence<char, (), char, char, Match<(), char>, Match<(), char>> = Sequence::new(s, o);`
[08:52:44] <bblum> the green spans on the yellow warnings are pretty distracting
[09:01:50] <aatch> Huh, there's no to_str() impl for chars...
[09:03:01] *** Quits: rjbailey (jake@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[09:05:34] *** Quits: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com) (Ping timeout)
[09:06:17] *** Quits: roo (Mibbit@moz-E33FDFC9.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:06:18] *** Joins: roo2 (Mibbit@moz-F4F6CCCC.dynamic.ip.windstream.net)
[09:10:10] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:10:10] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1449d6b33 to 143b126e4: 02http://git.io/N3iJvQ
[09:10:10] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:10:11] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:10:11] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/fpu21w
[09:10:11] <ghrust> 13rust/06auto 145a641cb 15Ben Blum: Add rules for assert, fail, and deriving to vim syntax file. Also highlight the mod path in "use module;" properly.
[09:10:11] <ghrust> 13rust/06auto 14cd87a01 15Ben Blum: Fix error messages in test cases, since fns/traits now pretty-print with a bounds list
[09:10:12] <ghrust> 13rust/06auto 1441fc2b2 15Ben Blum: Parse and typecheck (not kindcheck) bounds on trait paths.
[09:10:14] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:11:28] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:12:54] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:16:19] <strcat> bblum: also, need to manually stop the old builds
[09:16:20] <strcat> from failed ones
[09:16:23] <strcat> or it'll take forever ;[
[09:16:36] <strcat> bblum: http://buildbot.rust-lang.org/console?branch=auto&refresh=15 notice the old ones are still going
[09:16:38] * strcat sighs
[09:17:17] *** Quits: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[09:19:09] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:19:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14feeff12 to 143b126e4: 02http://git.io/N3iJvQ
[09:19:09] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:19:10] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[09:19:10] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/gA-eYA
[09:19:10] <ghrust> 13rust/06auto 14080d498 15blake2-ppc: std::hashmap: Implement external iterator for HashMap and HashSet
[09:19:10] <ghrust> 13rust/06auto 143af1d20 15blake2-ppc: std::hashmap: Add test_iterate for HashSet
[09:19:10] <ghrust> 13rust/06auto 14f045210 15blake2-ppc: std::hashmap: Use .iter() instead of .each and similar
[09:19:12] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[09:19:22] <strcat> one of the builders is broken
[09:19:34] <strcat> http://buildbot.rust-lang.org/builders/auto-linux-32-opt/builds/68 linux4
[09:20:08] <strcat> yep consistently broken
[09:20:28] * strcat shoots it
[09:22:54] <roo2> is there a rustc option to output what libraries it's linking to?
[09:23:10] <strcat> -Z print-link-args
[09:23:13] <aatch> roo2, you can get the linker flags with -Z print-link-args
[09:23:20] <roo2> thanks
[09:26:20] *** Joins: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de)
[09:27:21] *** Quits: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de) (Quit: Leaving.)
[09:29:19] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[09:33:41] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[09:34:54] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[09:38:00] *** Joins: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:38:38] *** Joins: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP)
[09:39:12] *** Joins: spider-mario (spidermari@moz-B8FA2FF4.rev.sfr.net)
[09:39:56] *** sam113101 is now known as sam113101_afk
[09:40:25] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[09:40:30] *** sam113101_afk is now known as sam113101
[09:41:09] *** Quits: roo2 (Mibbit@moz-F4F6CCCC.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:42:51] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[09:43:06] *** Joins: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de)
[09:44:51] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[09:44:55] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[09:45:18] *** Joins: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr)
[09:45:44] *** Quits: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de) (Quit: Leaving.)
[09:46:28] *** Joins: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de)
[09:46:45] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[09:46:53] *** Joins: roo (Mibbit@moz-86D73DFE.dynamic.ip.windstream.net)
[09:47:18] *** Quits: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de) (Quit: Leaving.)
[09:48:12] *** Quits: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[09:49:19] <Blei> do default methods have a notion of a super-trait
[09:49:42] <Blei> i.e. is it possible to call the default method from an overridden method
[09:50:53] <strcat> no
[09:51:14] <Blei> too bad
[09:51:21] <Blei> that would be convenient
[09:51:45] *** Quits: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr) (Quit: pyrac)
[09:55:27] *** Quits: devbug_ (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[09:59:55] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[10:02:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[10:03:19] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[10:03:52] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Ping timeout)
[10:05:09] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[10:05:20] *** Joins: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de)
[10:05:23] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[10:05:39] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[10:08:03] <doomlord> sounds like something you can get around by breaking methods up
[10:09:15] <cmr> that would be convenient
[10:09:28] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[10:10:11] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[10:10:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b55c442 to 143b126e4: 02http://git.io/N3iJvQ
[10:10:11] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[10:10:13] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[10:10:13] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/LbYUBw
[10:10:13] <ghrust> 13rust/06auto 145a641cb 15Ben Blum: Add rules for assert, fail, and deriving to vim syntax file. Also highlight the mod path in "use module;" properly.
[10:10:13] <ghrust> 13rust/06auto 14cd87a01 15Ben Blum: Fix error messages in test cases, since fns/traits now pretty-print with a bounds list
[10:10:14] <ghrust> 13rust/06auto 1441fc2b2 15Ben Blum: Parse and typecheck (not kindcheck) bounds on trait paths.
[10:10:16] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[10:11:03] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[10:11:19] <Blei> doomlord: that's what i'm doing now
[10:11:39] <Blei> trait Foo { fn foo() { default_foo() } } fn default_foo() { ... }
[10:11:51] <Blei> it's just annoying to do by hand
[10:12:54] <Blei> cmr: thanks for the bench yesterday. what did you change in the second version?
[10:13:00] <Blei> (the "more accurate" one)
[10:14:03] <cmr> Blei: I ran timing separate from memory profiling and did busy-loop profiling (rather than sleeping for 5ms between polls)
[10:14:28] <Blei> ah, ok
[10:18:46] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[10:23:49] *** Quits: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:26:38] *** Joins: illissius (illissius@moz-19397A63.catv.broadband.hu)
[10:29:46] *** Quits: roo (Mibbit@moz-86D73DFE.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:30:38] *** Joins: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de)
[10:35:57] <Blei> is this a known issue?
[10:36:02] <Blei> rusti: trait Foo { fn foo(@self) { bar(self as @Foo); } } fn bar(_b: @Foo) { }
[10:36:02] -rusti- <anon>:9:41: 9:53 error: failed to find an implementation of trait @main::Foo for Self
[10:36:02] -rusti- <anon>:9          trait Foo { fn foo(@self) { bar(self as @Foo); } } fn bar(_b: @Foo) { }
[10:36:02] -rusti-                                                   ^~~~~~~~~~~~
[10:36:03] -rusti- error: aborting due to previous error
[10:36:03] -rusti- application terminated with error code 101
[10:36:41] <cmr> rusti: trait Foo { fn foo(@self) { bar(@self as @Foo); } } fn bar(_b: @Foo) { } 
[10:36:42] -rusti- <anon>:9:41: 9:54 error: failed to find an implementation of trait @main::Foo for @Self
[10:36:42] -rusti- <anon>:9          trait Foo { fn foo(@self) { bar(@self as @Foo); } } fn bar(_b: @Foo) { } 
[10:36:42] -rusti-                                                   ^~~~~~~~~~~~~
[10:36:42] -rusti- error: aborting due to previous error
[10:36:43] -rusti- application terminated with error code 101
[10:36:56] <doener> rusti: trait Foo { fn foo(@self) { bar(*self as @Foo); } } fn bar(_b: @Foo) { }
[10:36:56] -rusti- <anon>:9:41: 9:54 error: can only cast an @-pointer to an @-object, not a self
[10:36:56] -rusti- <anon>:9          trait Foo { fn foo(@self) { bar(*self as @Foo); } } fn bar(_b: @Foo) { }
[10:36:56] -rusti-                                                   ^~~~~~~~~~~~~
[10:36:56] -rusti- error: aborting due to previous error
[10:36:57] -rusti- application terminated with error code 101
[10:37:20] <cmr> "@-pointer to an @-object, not a self" heh
[10:38:46] <Aetherspawn> you know what'd be cool
[10:38:55] <Aetherspawn> if rusti output color to IRC the same way it would to console on error
[10:39:22] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Client exited)
[10:45:18] <cmr> Aetherspawn: almost finished a basic terminfo entry for IRC that will allow that
[10:45:33] <doener> task failed at 'borrowed' -- not again :-/
[10:46:14] <Aetherspawn> cmr, you're always one step ahead of me!
[10:47:36] <cmr> Aetherspawn: You know windows, right?
[10:48:09] <cmr> https://github.com/mozilla/rust/issues/2807 would be nice to have :)
[10:48:10] *** Quits: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:48:44] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[10:48:49] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[10:48:52] <cmr> When I went through and did the terminfo refactor I made the interface windows-api compatible, but I didn't actually fill in an implementation
[10:49:21] <cmr> https://github.com/mozilla/rust/blob/master/src/libextra/term.rs#L120
[10:49:25] <Aetherspawn> Ooh, I could do that maybe
[10:49:28] <Aetherspawn> lemme take a look
[10:49:52] <Aetherspawn> pfft, that's easy.
[10:50:10] <doener> famous last words
[10:55:09] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[10:55:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14371a35e to 143b126e4: 02http://git.io/N3iJvQ
[10:55:09] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[10:56:54] <Aetherspawn> cmr, are we okay with standard escape sequences for coloring
[10:57:00] <Aetherspawn> winapi supports only like a handful of colors
[10:57:05] <cmr> Aetherspawn: yup
[10:57:20] <cmr> extra::term is ANSI-colors only
[10:58:27] <Aetherspawn> bugger-that. Win32 can't support color in the same way, so it'll have to be B&W
[10:58:47] *** Joins: threecreepio (jdp@moz-DB2D70E9.cust.bredbandsbolaget.se)
[10:58:54] <cmr> well rustc only uses red green and yellow
[10:59:09] <Aetherspawn> u8 implies 255 color arguments
[10:59:17] <Aetherspawn> *256
[10:59:18] <cmr> It's a u8 because there's nothing smaller
[10:59:30] <cmr> The only valid colors are the 16 static at the top of term.rs
[10:59:32] <dbaupp> cmr: it could be an enum
[10:59:41] <Aetherspawn> Oh, sec, I'll see if I can translate those
[11:00:04] <cmr> if you have to hack the bright colors by using bold or something that's fine
[11:00:08] <dbaupp> Aetherspawn: even if you can't support everything, it should be a "best effort" support.
[11:00:10] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[11:00:33] <Aetherspawn> I think windows has the same number of colors
[11:00:41] <Aetherspawn> let me see if they are the same ones
[11:02:00] <Aetherspawn> eh, magenta would need to be purple and bright magenta would need to be magenta
[11:02:41] <Aetherspawn> cyan would have to be barrier-reef-like color and bright cyan would be traditional cyan :S
[11:03:03] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[11:04:31] *** Joins: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de)
[11:05:55] *** Quits: Blei (philipp@moz-650B9C6A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[11:09:31] <cmr> rusti: enum Foo {A(~str), B(int) } std::sys::size_of::<Foo>()
[11:09:32] -rusti- 16
[11:10:04] <cmr> rusti: enum Foo {B(int) } std::sys::size_of::<Foo>()
[11:10:06] -rusti- 8
[11:10:13] <cmr> rusti: enum Foo {B(int), C(u8) } std::sys::size_of::<Foo>()
[11:10:14] -rusti- 16
[11:10:44] <cmr> rusti: #[packed] enum Foo {B(int), C(u8) } std::sys::size_of::<Foo>()
[11:10:45] -rusti- 16
[11:11:47] <dbaupp> cmr: #[packed] doesn't work on enums
[11:11:54] <cmr> dbaupp: I noticed :p
[11:11:57] <dbaupp> and attributes don't seem to work inside blocks
[11:12:09] <cmr> ah
[11:12:29] <dbaupp> rusti: #[packed] struct Foo { a: u8, b: u16 } std::sys::size_of::<Foo>()
[11:12:30] -rusti- 3
[11:12:35] <dbaupp> hm, maybe they do
[11:13:02] <dbaupp> rusti: #[deriving(Zero)] struct Foo { a: u8, b: u16 } Zero::<Foo>()
[11:13:02] -rusti- <anon>:9:56: 9:67 error: unresolved name `Zero`.
[11:13:02] -rusti- <anon>:9          #[deriving(Zero)] struct Foo { a: u8, b: u16 } Zero::<Foo>()
[11:13:02] -rusti-                                                                  ^~~~~~~~~~~
[11:13:02] -rusti- error: aborting due to previous error
[11:13:03] -rusti- application terminated with error code 101
[11:13:10] <dbaupp> rusti: #[deriving(Zero)] struct Foo { a: u8, b: u16 } std::num::Zero::<Foo>()
[11:13:10] -rusti- <anon>:9:56: 9:77 error: unresolved name `std::num::Zero`.
[11:13:11] -rusti- <anon>:9          #[deriving(Zero)] struct Foo { a: u8, b: u16 } std::num::Zero::<Foo>()
[11:13:11] -rusti-                                                                  ^~~~~~~~~~~~~~~~~~~~~
[11:13:12] -rusti- error: aborting due to previous error
[11:13:13] -rusti- application terminated with error code 101
[11:13:27] <dbaupp> rusti: #[deriving(Rand)] struct Foo { a: u8, b: u16 } std::rand::random::<Foo>()
[11:13:28] -rusti- <anon>:9:56: 9:80 error: failed to find an implementation of trait std::rand::Rand for main::Foo
[11:13:28] -rusti- <anon>:9          #[deriving(Rand)] struct Foo { a: u8, b: u16 } std::rand::random::<Foo>()
[11:13:28] -rusti-                                                                  ^~~~~~~~~~~~~~~~~~~~~~~~
[11:13:28] -rusti- application terminated with error code 101
[11:13:35] <dbaupp> that^ should work
[11:13:54] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[11:14:01] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[11:14:30] <cmr> Aetherspawn: so mirc color codes are nothing like ansi colors and I've gotten sick of writing a terminfo cap to translate.
[11:14:35] <cmr> if you want to do it, http://www.mirc.com/colors.html
[11:14:42] <cmr> just need a conditional for every color pair :)
[11:15:12] <cmr> %?%p1%{0}%=%t%'1'%e%p1%{1}%=%t%'0'....
[11:20:13] <Aetherspawn> eew lol
[11:20:25] <cmr> yeah
[11:20:36] <Aetherspawn> what's the deal with the "setaf" stuff under the linux term color stuff
[11:21:00] <cmr> setaf is the name of the terminfo capability for setting ansi foreground
[11:21:06] <Aetherspawn> is there an easy way to gen the ANSI color codes
[11:21:10] <cmr> no
[11:21:17] <Aetherspawn> lol, knew there wouldn't be.
[11:21:23] <Aetherspawn> Bit shifting and trial & error to the rescue!
[11:21:48] <cmr> The color codes are color_black and stuff at the top of the file though
[11:26:09] <MaikKlein> before I want to make a PR, I now added a function to format the source code https://gist.github.com/MaikKlein/5844679 . It is used like rustc file.rs --format (it formats file.rs with normal). I used process output because I didn't want to change pretty_print yet (didn't know if someone is working on it). Do you think --format is a good idea?
[11:26:12] *** Joins: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com)
[11:28:08] <cmr> MaikKlein: So --format is just a shorthand for --pretty normal?
[11:28:16] *** Joins: roo (Mibbit@moz-15DA9EF0.dynamic.ip.windstream.net)
[11:28:21] <MaikKlein> it also changes the file
[11:28:26] <cmr> ah
[11:28:44] <roo> what does the info!() macro do?
[11:28:51] <doener> :!
[11:28:54] <doener> oops
[11:29:03] <cmr> roo: it logs with log level 3
[11:29:15] <cmr> http://static.rust-lang.org/doc/rust.html#logging-system
[11:29:21] <MaikKlein> so I could easily add sth to sublime , that when I press ctr+s or sth it formats my file with rustc file.rs --format
[11:29:41] <cmr> MaikKlein: seems useful to me
[11:30:05] <MaikKlein> btw I used copy *path. I can't avoid the copying here right?
[11:30:43] <cmr> MaikKlein: I don't think you need the copy
[11:30:49] <dbaupp> MaikKlein: not yet
[11:31:04] <cmr> Why do you take &~str and not ~str?
[11:31:16] <engla> didn't know about the rustc pretty printer. It doesn't look suitable for consumption though, the result is not pretty
[11:31:24] <dbaupp> (run::process_output really should take <S: Str> &[S], rather than &[~str])
[11:32:21] <engla> (oh, it's mostly mangling macro definiton and macro uses)
[11:32:31] <doener> MaikKlein: let tmp = ~[*path, ~"--pretty"]; process_output("rustc", tmp); tmp.pop(); ... PosixPath { ..., components: tmp };
[11:32:37] <doener> MaikKlein: but that's ugly 
[11:32:44] <dbaupp> MaikKlein: also, you should use `let path = Path(*path);`
[11:33:10] <dbaupp> MaikKlein: that let's rust handle the internal/cross-platform representation of file paths
[11:33:25] <robert> Does rust provide a way to specify default values for struct fields? I have a struct with several fields some of which are 'required', others are 'optional' and I'd like to avoid having to use 'MyStruct { opt1 : None, opt2 : None ... }' when constructing new instances.
[11:33:51] <dbaupp> robert: you can create a static method that creates a struct with the defaults filled in
[11:33:54] <cmr> robert: MyStruct { foo: bar, ..MyStruct::default() }
[11:33:58] <MaikKlein> dbaupp, ah ok thanks
[11:34:34] <dbaupp> robert: `impl MyStruct { fn default(foo: uint, bar: float) -> MySruct { MyStruct { opt1: None, opt2: None, foo: foo, bar: bar } } }`
[11:35:25] <robert> dbaupp: Thought that might be the approach.  Next q - does rust support named args to functions or anything similar?
[11:35:32] <dbaupp> no
[11:35:39] <MaikKlein> cmr, .head gives me a &~ and I am a little bit confused why I get &~. I mean it's a pointer to a pointer. 
[11:35:41] <cmr> not yet, at least
[11:36:54] <dbaupp> MaikKlein: [].head gives a reference to the first element in memory, i.e. it's literally a pointer to that cell, which in this case contains a ~str, so you get & ~str
[11:37:31] <MaikKlein> ah
[11:38:01] <MaikKlein> otherwise it would move the value out of my vector right?
[11:38:41] <doener> right
[11:39:09] <doener> and it can't auto-slice, because that's just a special case for vec and str, but the method is generic
[11:39:09] *** Quits: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com) (Ping timeout)
[11:39:33] <dbaupp> (you can force it to slice by hand, though)
[11:41:03] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[11:41:29] <MaikKlein> doener, where did you find "Path(*path)" static.rust-lang.org/doc/std/path.html
[11:41:56] <doener> MaikKlein: I didn't, that was dbaupp 
[11:42:14] <dbaupp> MaikKlein: by looking at the source
[11:42:18] <cmr> It's a typedef iirc, which aren't documented right now iirc
[11:42:20] <MaikKlein> ups
[11:42:26] <dbaupp> (the documentation basically sucks.)
[11:42:55] <dbaupp> cmr: I actually think that instance is a `pub use Path = PosixPath` (i.e. renaming a function)
[11:42:58] <dbaupp> not that it matters
[11:42:59] <MaikKlein> yeah that's what confused me I found "Implementation for Path" not not really a Path
[11:43:01] <MaikKlein> ah
[11:43:02] <MaikKlein> ok
[11:43:10] *** Quits: roo (Mibbit@moz-15DA9EF0.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:43:18] <cmr> ah
[11:43:47] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[11:43:58] * dbaupp thinks cmr should hurry up and fix rustdoc before 0.7
[11:43:58] <dbaupp> ;P
[11:44:26] <cmr> dbaupp: that's my goal
[11:44:30] <cmr> not sure I can reach it though :p
[11:44:49] <dbaupp> you've got a week (I think?)... tonnes of time!
[11:45:32] <cmr> There was a trans refactor I wanted to do too but meh
[11:45:51] <cmr> trans is a lot of work
[11:47:28] *** Joins: rubber-duck (rubber-duc@moz-BE44FCC1.dsl.iskon.hr)
[11:48:15] <rubber-duck> https://gist.github.com/rubber-duck/5844737  -- isn't this a little ambiguous ? 
[11:48:39] <rubber-duck> i don't think methods should be allowed with same name as members
[11:49:26] <dbaupp> rubber-duck: to call the member, you use (f.foo)()
[11:49:35] <dbaupp> (even if there is no foo method)
[11:50:15] <dbaupp> rusti: struct A { foo: ~fn() } let a = A { foo: || println("hi") }; a.foo()
[11:50:16] -rusti- <anon>:9:70: 10:5 error: type `main::A` does not implement any method in scope named `foo`
[11:50:16] -rusti- <anon>:9          struct A { foo: ~fn() } let a = A { foo: || println("hi") }; a.foo()
[11:50:16] -rusti- <anon>:10     };
[11:50:16] -rusti- error: aborting due to previous error
[11:50:17] -rusti- application terminated with error code 101
[11:50:17] <rubber-duck> dbaupp, I see - so f.foo() is explicitly method invocation syntax
[11:50:20] <dbaupp> rusti: struct A { foo: ~fn() } let a = A { foo: || println("hi") }; (a.foo)()
[11:50:21] -rusti- hi
[11:50:21] -rusti- ()
[11:50:25] <dbaupp> rubber-duck: yes
[11:51:37] *** Joins: BitPuffi1 (isak@moz-49828767.cust.tele2.se)
[11:52:09] <rubber-duck> dbaupp, how would you get method pointer then :|
[11:52:24] <rubber-duck> dbaupp, nvm
[11:52:32] <rubber-duck> dbaupp, I'm retarded
[11:52:42] <engla> you can't get a method pointer at the moment
[11:52:48] *** Quits: BitPuffi1 (isak@moz-49828767.cust.tele2.se) (Quit: WeeChat 0.4.1)
[11:53:06] <rubber-duck> engla, well method pointer is just a function pointer + self bound
[11:53:20] <rubber-duck> so it should be Foo::foo + instance
[11:53:22] <engla> yeah
[11:53:50] <dbaupp> the only way to get a "method pointer" is `let f = |arg1,arg2,..| a.foo(args1,arg2,...);`
[11:54:03] <dbaupp> (at the moment, at least.)
[11:55:15] <MaikKlein> I have pulled rust from the official master. How can I easily make a PR? I mean I now have to add all those changes to my forked rust folder right?
[11:56:09] <cmr> MaikKlein: did you fork the repo on github?
[11:56:52] <MaikKlein> cmr, I made the changes in the official repo :(
[11:57:25] <cmr> That isn't a problem, can work aroudn that, but do you have a fork?
[11:57:36] <MaikKlein> yeah
[11:57:44] <cmr> Do you have a clone of that fork on your local machine?
[11:57:54] <MaikKlein> yes
[11:58:47] <cmr> Alright, so wherever you made the changes, do "git status", and do a "git add" for all the files you changed
[11:59:04] <cmr> Then "git commit", and fill in the message you want
[12:00:10] <MaikKlein> done
[12:00:35] <cmr> Now cd to the clone of your fork, and do "git remote add other_rust /path/to/other/repo"
[12:00:46] <MaikKlein> ah nice
[12:00:57] <MaikKlein> thanks
[12:01:02] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[12:01:05] <MaikKlein> I probably should read a git tutorial
[12:01:07] <cmr> Then you should be able to "git fetch other_rust", pull from it, and push to your real repo
[12:01:19] <MaikKlein> yeah thanks
[12:01:39] *** Joins: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de)
[12:01:49] <Aetherspawn> Time to pull and build, woot woot.
[12:02:03] <Aetherspawn> What's the worst that could happen? hrnng.
[12:02:07] <dbaupp> MaikKlein: (normally one would name the mozilla/rust one `upstream` and your own fork `origin`, but there's no need to do so.)
[12:08:26] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Connection reset by peer)
[12:08:40] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[12:09:52] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[12:10:58] <cmr> Mind looking over http://cmr.github.io/blog/2013/06/23/how-i-got-started-with-rust/ before I post it on reddit and embarass myself?
[12:11:15] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[12:12:19] <hoelzro> is there a document in place for showcasing examples of Rust on rust-lang.org?
[12:12:23] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Connection reset by peer)
[12:12:33] <hoelzro> I'd like to add some examples, but I'm not sure if they belong in the manual itself
[12:12:39] <cmr> I don't think so
[12:12:42] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[12:12:54] <cmr> I've been thinking that a `Rust by Example` type thing would be really really useful
[12:13:00] <hoelzro> I was thinking it'd be nice to have a "Rust cookbook" and link to it from the manual
[12:13:00] <cmr> hoelzro: drop it on the wiki for now I guess
[12:13:02] <MaikKlein> cmr, looks good
[12:13:27] <hoelzro> cmr: the examples? or the idea?
[12:13:34] <cmr> hoelzro: the examples
[12:13:38] <hoelzro> ok
[12:14:13] <hoelzro> what's the typical error idiom in Rust? returning Result<something, error> and handling via match?
[12:14:18] <cmr> Yes
[12:14:27] <cmr> or Option<something> for simple cases
[12:14:29] <hoelzro> I finished my program, but I need to add error handling =/
[12:14:48] <dbaupp> cmr: "There are instructions for building Rust over at [the<newline>wiki](...", misformatting?
[12:14:50] <hoelzro> is there a pattern matching syntax for if?
[12:15:23] <cmr> hoelzro: no, but there are helper methods on Result, is_err() and is_ok()
[12:15:24] <dbaupp> hoelzro: what do you mean?
[12:15:29] <hoelzro> oh, I see
[12:15:34] <hoelzro> hang on, I'll type up an example
[12:15:42] *** Quits: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:15:59] <cmr> dbaupp: annoying, I'd have thought the newline wouldn't matter
[12:16:39] <dbaupp> hoelzro: (normally actually using `match` is better than calling .is_(err,ok) since these are often followed by a call to .unwrap or .unwrap_err (or whatever they are called))
[12:17:27] <dbaupp> cmr: it's probably because the next line starts indented by > 4 spaces (?)
[12:17:36] <dbaupp> err, >= 4 spaces
[12:17:44] <cmr> dbaupp: ah, probably. silly vim
[12:17:58] <Aetherspawn> a learnyouarust wouldn't go astray
[12:17:58] <Aetherspawn> xD
[12:18:20] <dbaupp> cmr: looks good though :)
[12:18:41] <dbaupp> Aetherspawn: especially if it had the pictures :D
[12:18:52] <Aetherspawn> oooh :O pictures.
[12:18:55] <Aetherspawn> the best part.
[12:19:16] <Aetherspawn> makes us all pretend we're recursively thinking madmen
[12:19:58] <MaikKlein> cmr, your wiki link doesn't seem right
[12:20:04] <MaikKlein> wiki]
[12:20:20] <cmr> MaikKlein: already fixed, waiting for github pages to pick up the change
[12:20:39] <cmr> there, should be better
[12:21:36] <MaikKlein> hm mine are updating instantly
[12:21:54] <cmr> sometimes mine does, sometimes it takes a few minutes
[12:22:32] <hoelzro> wrt error handling, compare before.rs vs after.rs: https://gist.github.com/hoelzro/5844832
[12:22:38] *** Joins: berak (chatzilla@715C2670.5291F4C0.16E13E53.IP)
[12:22:59] *** Parts: berak (chatzilla@715C2670.5291F4C0.16E13E53.IP) ()
[12:23:42] <dbaupp> hoelzro: what does init_trace return?
[12:24:24] <MaikKlein> hoelzro, this doesn't really compile , does it?
[12:24:53] <cmr> hoelzro: you can do match init_trace(child_pid) { x@Err(err) => return x, _ => ()}, I think
[12:24:59] <MaikKlein> afaik you can't do Err(err) => return result
[12:25:11] <dbaupp> MaikKlein: why not?
[12:25:15] <MaikKlein> oh wait
[12:25:17] <MaikKlein> I am stupid nvm
[12:25:31] <MaikKlein> I forgot that here is Result and Option
[12:25:36] <MaikKlein> there*
[12:26:07] <hoelzro> dbaupp: Result<(), int>
[12:26:25] <cmr> hoelzro: you forgot the int in the fn signature
[12:26:30] <hoelzro> that (admittedly incomplete) example feels clumsy
[12:26:33] <hoelzro> cmr: ah, so I did
[12:26:41] <hoelzro> still, the clumsiness is present =)
[12:26:42] <dbaupp> hoelzro: what about Option<int> ?
[12:26:53] <hoelzro> dbaupp: int is the error code, though
[12:26:54] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Ping timeout)
[12:27:05] <dbaupp> hoelzro: yeah... that's "fine"
[12:27:11] <hoelzro> using Some(value) for the error state seems counterintuitive
[12:27:13] <dbaupp> there's no rule saying that None = error
[12:27:21] <dbaupp> I guess...
[12:27:47] <dbaupp> you could define `enum TraceResult { Ok, ErrorCode(int) }`
[12:28:18] <hoelzro> hmm
[12:28:23] <hoelzro> that's probably for the best
[12:28:32] <dbaupp> (in any case, since you are just passing the error on, using `if result.is_err() { return result; }` is probably more sensible)
[12:28:38] <hoelzro> ok, cool
[12:30:28] <indutny> cmr: hoya
[12:30:32] <cmr> indutny: hullo
[12:30:34] <indutny> cmr: it seems that my PR is failing on linux
[12:30:51] <indutny> what do you think about adding sub-modes `common` and `arch` to libc::consts
[12:30:53] <dbaupp> indutny: it looks like you need more #[cfg]'s
[12:30:57] <indutny> as we already have for lib::types
[12:31:18] <indutny> dbaupp: noâ€¦ that's another thing, I just need some consts that are shareable between different platforms
[12:31:20] <dbaupp> (since the errors appear to be duplicated `mod`s, possibly?)
[12:31:22] <indutny> i.e. x64/mips
[12:31:39] <indutny> dbaupp: right, because we've cfg's for all this mods
[12:31:41] <cmr> indutny: seems fine to me
[12:31:50] <indutny> ok, good
[12:31:51] <indutny> I'll do it
[12:32:12] <indutny> thanks
[12:32:32] <cmr> /home/rustbuild/src/rust-buildbot/slave/auto-linux-64-opt/build/src/libstd/libc.rs:1315:8: 1332:9 error: duplicate definition of type `extra`
[12:32:34] <cmr> /home/rustbuild/src/rust-buildbot/slave/auto-linux-64-opt/build/src/libstd/libc.rs:1315         pub mod extra {
[12:32:36] <cmr> that's a bad error
[12:33:17] <indutny> well, I was just talking about it
[12:33:19] <indutny> :)
[12:33:38] <indutny> adding arch and common subnamespaces will fix it
[12:33:51] <cmr> no, I mean the error message itself
[12:33:55] <cmr> extra isn't a type
[12:33:58] <indutny> ah
[12:34:02] <indutny> so it shouldn't be a error?
[12:34:04] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:34:13] <cmr> it should be an error, the message should be different
[12:34:20] <indutny> rusti: mod extra { struct S } mod extra { struct P }
[12:34:20] -rusti- <anon>:9:30: 9:31 error: expected `{`, `(`, or `;` after struct name but found `}`
[12:34:20] -rusti- <anon>:9          mod extra { struct S } mod extra { struct P }
[12:34:20] -rusti-                                        ^
[12:34:20] -rusti- application terminated with error code 101
[12:34:32] <indutny> rusti: mod extra { struct S; } mod extra { struct P; }
[12:34:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VXEi
[12:34:43] <indutny> yeah
[12:34:56] <indutny> btw, why can't one extend `mod` with new definitions?
[12:35:01] <indutny> it sounds completely reasonable to me
[12:35:12] <indutny> especially, if they're in one file
[12:35:33] <indutny> you might have some platform-specific stuff in mod
[12:35:40] <indutny> and some common stuff for all platforms
[12:35:51] <indutny> separating them is not always a good idae
[12:35:53] <indutny> s/idae/idea/
[12:36:28] <engla> you'll need a plan how to handle annotations on the mod blocks
[12:37:10] <engla> they would probably just apply on the first mention of mod extra?
[12:37:14] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[12:37:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 143b968dc to 143b126e4: 02http://git.io/N3iJvQ
[12:37:14] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[12:37:16] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[12:37:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/a3RG0w
[12:37:17] <ghrust> 13rust/06auto 1491362bd 15Huon Wilson: extra: Add a testcase for #7256.
[12:37:17] <ghrust> 13rust/06auto 142b581c1 15bors: auto merge of #7258 : huonw/rust/7256, r=bstrie
[12:37:18] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[12:37:56] <cmr> engla: I'd imagine it just takes the union
[12:38:43] <cmr> After doing any #[ignore] or #[cfg]
[12:41:41] <kemurphy> could someone explain the different kinds of glue to me? like, what does it mean to take, drop, free, or visit something
[12:42:59] <cmr> kemurphy: not sure, but afaik take is refcount bump, drop is refcount drop, free frees the allocated memory. not sure about visit
[12:43:11] <cmr> drop also calls destructors
[12:43:44] <kemurphy> cmr, in the case where refcount = 0 or something gets moved out, you mean?
[12:44:04] <cmr> kemurphy: yeah
[12:44:29] <illissius> anyone else having trouble with configure? fails at git submodule update for libuv
[12:44:29] <cmr> I'm not 100% about those though...
[12:44:34] <kemurphy> gotcha, that helps. thanks :)
[12:45:20] <kemurphy> eh, i think it's close enough for what i'm concerned with right now, and your explanation matches what i'm reading at least
[12:45:26] <kemurphy> (in the code, i mean)
[12:46:47] * kemurphy guessing that visit has something to do with the annihilator
[12:48:26] <kimundi> indutny: You can put the platform specific stuff into a submodule and reexport that
[12:48:52] <indutny> kimundi: yes, that's what I'm going to do
[12:49:03] <indutny> kimundi: still it feels a bit worse
[12:49:09] <indutny> than just merging two modules
[12:52:33] <kemurphy> in what cases does glue get called on unique boxes?
[12:53:26] <kemurphy> take and drop look like they're doing... copying and destruction, for unique stuff
[12:54:46] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[12:57:09] <illissius> anyway, I'm getting this:
[12:57:12] *** Joins: Blei (philipp@moz-650B9C6A.cust.bluewin.ch)
[12:57:12] <illissius> configure: git: submodule update
[12:57:14] <illissius> fatal: Needed a single revision
[12:57:15] <illissius> Unable to find current revision in submodule path 'src/libuv'
[12:57:17] <illissius> anyone have a clue?
[12:59:00] <Thad> illissius: what is the output if you do "which git" ? and "git --version" ?
[12:59:33] <illissius> /usr/bin/git, 1.8.3.1
[12:59:36] <dbaupp> illissius: (seems to work for me...)
[12:59:42] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bb2m)
[12:59:57] <cmr> works for me too
[13:00:02] <illissius> :d
[13:01:01] <Thad> illissius: how did you clone the Rust git repo ? do you remember ?  maybe the path is screwed up a bit ?
[13:01:27] *** Joins: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP)
[13:01:49] <illissius> interesting
[13:01:57] <illissius> I wiped and re-cloned and now it's saying
[13:02:00] <illissius> fatal: unable to access 'https://github.com/brson/libuv.git/': Problem with the SSL CA cert (path? access rights?)
[13:02:01] <illissius> Clone of 'https://github.com/brson/libuv.git' into submodule path 'src/libuv' failed
[13:02:13] <illissius> which is at least a more helpful error message
[13:02:43] <Thad> illissius: git clone git://github.com/mozilla/rust.git
[13:02:50] <Thad> not https:
[13:03:04] <illissius> right, that's what I did
[13:03:04] <cmr> https works fine for me
[13:03:10] <Thad> on Windows or Linux or what ?
[13:03:15] <illissius> the https error is coming from configure
[13:03:18] <illissius> linux
[13:03:20] <kemurphy> what's the story with tvec?
[13:03:21] <cmr> illissius: do you not have a local set of certs?
[13:04:37] <illissius> cmr: I have no idea.
[13:05:06] <illissius> fwiw, I just did perl -pi -e 's/https/git/g' .gitmodules, and it seems that made it happy
[13:05:32] <illissius> (or at least it's still at submodule update and hasn't errored out yet)
[13:05:45] *** Quits: sankha93 (Instantbir@7FDB90C9.F989CC7B.62DB355F.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[13:06:43] <MaikKlein> ok my first PR https://github.com/mozilla/rust/pull/7324
[13:06:45] <illissius> cmr: I figure if I didn't have certs then https wouldn't work in general? because I haven't any problems other than this
[13:06:51] <illissius> *haven't had
[13:06:55] <cmr> illissius: yeah
[13:09:31] <dbaupp> MaikKlein: does `rustc --format foo.rs` work correctly?
[13:09:59] <dbaupp> MaikKlein: also, it should respect `-o`, that is `rustc --format foo.rs -o bar.rs` should write to bar.rs, not foo.rs
[13:10:05] <MaikKlein> dbaupp, no does this need to work?
[13:10:13] <dbaupp> MaikKlein: which?
[13:10:44] <MaikKlein> dbaupp, it only works like rustc file.rs --format atm
[13:10:59] <indutny> so...
[13:10:59] <dbaupp> MaikKlein: that is definitely incorrect
[13:11:05] <MaikKlein> ok
[13:11:10] <cmr> Actually I'm not sure this pull request is worth pulling.
[13:11:11] <MaikKlein> I'll have a look
[13:11:12] <indutny> how can I reexport declarations from one module to another?
[13:11:23] <cmr> It should probably be a subcommand of "rust'
[13:11:26] <indutny> say I've mod A { mod B { â€¦ } mod C { } }
[13:11:27] <cmr> So like "rust format ..."
[13:11:32] <indutny> and I want to reexport contents of B and C in A
[13:11:42] <indutny> ?
[13:12:00] <cmr> indutny: pub use B::*/pub use C::*, I think
[13:12:18] <indutny> aaaah
[13:12:21] <indutny> at top of A
[13:12:22] <indutny> thanks
[13:12:38] <MaikKlein> cmr, you mean like rust format file1.rs file2.rs ?
[13:12:42] <dbaupp> MaikKlein: you can use the --ls argument as an example, https://github.com/MaikKlein/rust/blob/727f2db01ae7e16ce9ff91dbf7944a23f35266fc/src/librustc/rustc.rc#L298
[13:13:08] <dbaupp> MaikKlein: (also, yes, `rust fmt foo.rs bar.rs` would probably be better.)
[13:13:16] <illissius> in the meantime configure completed successfully. wonder why .gitmodules uses https? doesn't really matter though, it works now, and presumably other people don't have whatever freak circumstance was making it fail for me
[13:13:22] <MaikKlein> okay thanks for the feedback
[13:14:02] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[13:14:10] <dbaupp> illissius: yeah, strange... I have https and it works fine
[13:16:01] *** Joins: holli (Mibbit@moz-2A665AD5.pools.arcor-ip.net)
[13:17:22] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130617145905])
[13:17:45] <MaikKlein> https also works fine for me
[13:18:17] <holli> i was watching the GPN13 talk about Rust today. Looking at the homepage i figure the standard library is very small. Are there plans to extend it? Is there a place like CPAN to share your modules?
[13:18:43] <holli> oh and what the heck is an "unstable sort"?
[13:18:55] <cmr> holli: there used to be cargo-central, but cargo was torn out and reincarnated as rustpkg, which doesn't have a central repo yet.
[13:19:02] <cmr> hopefully will by 0.7 release
[13:19:18] <cmr> holli: unstable sort means if you sort it twice, it might not be the same order
[13:19:30] <cmr> https://en.wikipedia.org/wiki/Sorting_algorithm#Stability
[13:19:33] <MaikKlein> no unstable means
[13:19:47] <MaikKlein> that the input order will not be the same
[13:20:36] <dbaupp> holli: stable sort means that equal things stay in the same order
[13:20:58] <dbaupp> holli: (and unstable sort is "no guarantee of a stable sort")
[13:20:59] <cmr> I don't think what I said was inaccurate but it certainly wasn't very clear
[13:21:31] <doener> "equal" meaning "equal in terms of the comparison function"
[13:21:42] <dbaupp> holli: e.g. [3a,2,1,3b].sort() = [1,2,3a,3b] (for stable) = [1,2,3b,3a] (for unstable)
[13:22:22] <dbaupp> holli: in any case, the plan is for an extensive standard library, and a good package management system
[13:23:09] <holli> good. because a language without it is doomed to fail :)
[13:23:25] <holli> well, except for javascript
[13:23:32] <cmr> javascript has npm
[13:23:44] <cmr> C and C++ have no package manager
[13:24:48] *** Quits: Aetherspawn (Aetherspaw@moz-8811D9F0.static.tpgi.com.au) (Quit: Leaving)
[13:26:39] <holli> yes, but they have the unique "high level close to the metal" functionality and were the first to do so, right?
[13:27:15] <holli> forgive me if i sound foolish or so but i come from Perl ^^
[13:27:30] <cmr> algol came before C
[13:27:51] <cmr> although it's not all that "close to the metal"
[13:28:13] <MaikKlein> if I do "rust format file1 file2" where should I put my format function?
[13:28:30] <MaikKlein> in rust.rc?
[13:28:31] <cmr> MaikKlein: src/librust
[13:28:56] <cmr> MaikKlein: use "help" as an example.
[13:29:09] <MaikKlein> yes I am nearly finished
[13:29:40] <MaikKlein> I just added it in librust/rust.rs now 
[13:30:31] *** Quits: z0w0 (zack@moz-DD233ABD.lnse4.woo.bigpond.net.au) (Client exited)
[13:33:11] <holli> mmh. the guy in the talk said the rust compiler would be bootstrapped from C. the tutorial says otherwise (bootstrapped by itself). 
[13:33:48] <cmr> It was bootstrapped with ocaml
[13:33:51] <cmr> now it is self hosting.
[13:34:25] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[13:34:42] <dbaupp> holli: (the runtime is currently/temporarily written in C++ though)
[13:35:17] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[13:37:15] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[13:37:38] <holli> installing mingw..
[13:38:01] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[13:39:20] *** Joins: artagnon (uid7560@moz-A588D045.irccloud.com)
[13:39:29] <artagnon> What is this 'self thing I see everywhere?
[13:39:41] <cmr> artagnon: named lifetime. http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html#named-lifetimes
[13:40:00] <artagnon> Thanks.
[13:40:07] *** Parts: artagnon (uid7560@moz-A588D045.irccloud.com) ()
[13:40:08] <cmr> artagnon: it's a lifetime that lives as long as the current object, I think.
[13:40:36] *** Joins: doomlord1 (walter@moz-6651F8D4.range86-145.btcentralplus.com)
[13:41:07] <dbaupp> cmr: well, he left quickly
[13:41:24] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[13:41:33] <robert> What did 'vec.eachi' get replaced with recently?
[13:42:01] <cmr> robert: see "breaking changes", http://cmr.github.io/blog/2013/06/22/this-week-in-rust/
[13:42:08] <dbaupp> robert: vec.iter().enumerate().advance
[13:42:26] * dbaupp wants the `for` changes to happen soon
[13:42:51] <engla> I saw strcat trying to land my pull but the test fail on some kind of tempfile test in std::os :-((
[13:43:00] <engla> this seems tricky
[13:43:13] <dbaupp> cmr: (the .each change landed a few hours ago, btw.)
[13:43:18] <cmr> oh good
[13:43:28] <dbaupp> engla: does it pass locally?
[13:43:55] <holli> the mingw environment is only needed for development?
[13:43:59] <engla> didn't test strcat's rebase
[13:44:50] <engla> there is just no connection between the two pieces of code, well at least not as far as I can see
[13:44:57] <robert> cmr: Thanks. Do you know where I can find the background discussion for the iterator changes?
[13:45:19] <dbaupp> robert: there's a whole pile scattered on the mailing list
[13:45:21] <dbaupp> ... sec
[13:45:23] <cmr> https://mail.mozilla.org/pipermail/rust-dev/2013-June/004364.html
[13:45:28] <cmr> https://mail.mozilla.org/pipermail/rust-dev/2013-June/004465.html
[13:45:33] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[13:45:34] <cmr> http://www.reddit.com/r/rust/comments/1gag3t/list_comprehensions_in_rust_iterator/
[13:45:46] <cmr> those are the major ones I think
[13:46:46] <dbaupp> robert: that first mailing list one is "official", the second one is more of an proposal (not sure if that's the direction that rust is going)
[13:46:56] <Blei> holli: iirc rustc uses the mingw linker (or even gcc?) to link
[13:48:37] <robert> dbaupp: vec.find() got removed as well, though rfind() is still there.
[13:49:07] <engla> there is a find for iterators
[13:49:10] <dbaupp> robert: yes, the behaviour of find can easily be replaced by the new iterators (vec.iter().find(..) is a drop-in)
[13:49:32] <dbaupp> robert: but rfind() returns indices from the start of the vec, so vec.rev_iter().find() isn't quite the same
[13:49:46] <dbaupp> (it would return indices from the end.)
[13:50:27] <dbaupp> *drop-in replacement
[13:50:30] <cmr> Blei: it does use gcc
[13:52:00] <MaikKlein> how can I only compile rust? and with rust I mean librust/rust.rs? 
[13:52:25] <engla> rfind doesn't return indices?
[13:52:31] <engla> nont that I can see
[13:52:41] <dbaupp> engla: doesn't it return Option<uint> ?
[13:52:55] <engla> it returns Option<T>
[13:53:13] <robert> dbaupp: In http://static.rust-lang.org/doc/std/iterator.html#trait-iteratorutil I see find_() but not find().  
[13:53:16] <dbaupp> hm, maybe I'm misinformed
[13:53:23] <dbaupp> robert: find_ is the correct one
[13:53:25] <engla> you are thinking of rposition
[13:53:32] <dbaupp> engla: ah, right, yes
[13:53:38] * dbaupp is embarrassed
[13:54:00] <engla> yes it's a major embarassment :-)
[13:54:15] <dbaupp> robert: (there are bugs with method resolution (#5898) so a lot of the methods in iterator have a trailing underscore)
[13:54:27] *** Joins: roo (Mibbit@moz-8B2D06A2.dynamic.ip.windstream.net)
[13:54:31] <engla> as is my spelling
[13:54:50] <robert> Ah. I looked at those and thought that they were intended to be 'internal' helpers.
[13:55:39] <dbaupp> robert: yeah, it's ugly and annoying :(
[13:55:40] <cmr> that would be a leading underscore wouldn't it?
[13:55:50] <cmr> rust has real privacy anyway
[13:55:57] <dbaupp> engla: I guess .rfind can be removed then...
[13:56:47] <dbaupp> robert: (it seems that vec.rev_iter().find is in fact a drop-in replacement for .rfind)
[13:56:48] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[13:57:15] *** Joins: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com)
[13:58:21] <roo> how do i convert from ~[char] to ~str?
[13:58:29] <cmr> roo: str::from_chars
[13:58:40] <MaikKlein> is there a way to only compile the frontend of rustc? the thing that you can access via "rust" in the terminal
[13:58:43] <cmr> rusti: str::from_chars(~['a', 'b', 'c'])
[13:58:45] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HAdh
[13:58:51] <cmr> rusti: std::str::from_chars(~['a', 'b', 'c'])
[13:58:52] -rusti- <anon>:9:30: 9:46 warning: unnecessary allocation, the sigil can be removed [-W unnecessary-allocation (default)]
[13:58:52] -rusti- <anon>:9          std::str::from_chars(~['a', 'b', 'c'])
[13:58:52] -rusti-                                        ^~~~~~~~~~~~~~~~
[13:58:52] -rusti- ~"abc"
[13:59:17] <cmr> MaikKlein: if 'make' builds more than "rust", it means other things needed to be recompiled anyway
[13:59:27] <cmr> MaikKlein: you could try just a "rustc rust.rc"?
[13:59:48] <roo> ghah, i was searching the doc for ~[char] instead of &[char], no wonder
[14:00:07] <MaikKlein> cmr, oh I thought make always recompiles everything
[14:01:15] <engla> the basic rule in make is that it only remakes a product if that file is older than the sources of it
[14:01:54] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[14:01:54] <doener> hm, why would "use foo::bar::*;" be unresolved?
[14:02:10] <cmr> doener: is foo or bar don't exist?
[14:02:34] <cmr> rusti: use foo::bar::*;
[14:02:36] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GLQI
[14:02:44] <cmr> rusti: mod foo{} use foo::bar::*;
[14:02:45] -rusti- <anon>:9:19: 9:35 error: `use` and `extern mod` declarations must precede items
[14:02:45] -rusti- <anon>:9          mod foo{} use foo::bar::*;
[14:02:45] -rusti-                             ^~~~~~~~~~~~~~~~
[14:02:45] -rusti- error: aborting due to previous error
[14:02:45] -rusti- application terminated with error code 101
[14:02:45] <doener> well, it's "use middle::trans::common::*;" in this case, even copied it from another file to make sure there's no typo in there
[14:02:55] *** Quits: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com) (Ping timeout)
[14:02:56] <cmr> rusti: use foo::bar::*; mod foo{}
[14:02:57] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EWcj
[14:03:21] <holli> what's the *ix command for seting a environment variable (here CFG_PYTHON)?
[14:03:34] <cmr> holli: CFG_PYTHON=foo ...
[14:03:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:03:47] <cmr> or, export CFG_PYTHON=foo
[14:03:57] <cmr> (this is a shell thing)
[14:04:10] <cmr> doener: is middle in scope? does it need to be rustc::middle?
[14:04:38] <doener> this is in rustc::middle::trans::block
[14:05:05] <doener> using "use middle::trans::common::{tons,of,things,here};" works
[14:05:12] <cmr> weird
[14:05:21] <cmr> maybe a bug with *?
[14:05:21] <dbaupp> doener: recursive * imports explode
[14:05:23] <dbaupp> sec
[14:05:35] <doener> almost thought so
[14:06:08] * doener will get nightmares of forward declarations tonight
[14:06:16] <dbaupp> doener: https://github.com/mozilla/rust/issues/3352
[14:07:10] <holli> strange. i made "export CFG_PYTHON=..." and "echo $CFG_PYTHON" prints what i set it to, but the configure script still complains :/
[14:07:28] <dbaupp> holli: have you got python installed?
[14:07:43] <cmr> holli: is python in your PATH?
[14:07:52] <holli> sure. I'm not that dumb :)
[14:07:52] <cmr> holli: I needed to add C:\Python27 to my PATH
[14:08:04] <cmr> or, in mingw, /c/Python27
[14:08:06] <dbaupp> holli: (sorry, just checking :) )
[14:08:40] <doener> holli: what's the value for CFG_PYTHON that you set?
[14:09:11] *** Joins: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr)
[14:10:15] <doener> if there's a space in there, I guess that might fail. I think are some quotes missing
[14:10:25] <Blei> holli: this should work: $CFG_PYTHON --version
[14:10:43] * dbaupp loves how planet.mozilla.org currently has a huge gif at the top
[14:10:47] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:13:29] <holli> ah putting python on the path. that was it 
[14:14:03] <holli> ./configure is running. time for a coffee.
[14:14:21] *** Quits: roo (Mibbit@moz-8B2D06A2.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:14:22] <holli> on second thought. beer :)
[14:15:16] *** Quits: infynyxx (infynyxx@moz-9281C4E9.hfc.comcastbusiness.net) (Client exited)
[14:15:36] *** Joins: infynyxx (infynyxx@moz-9281C4E9.hfc.comcastbusiness.net)
[14:17:05] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[14:17:16] *** Quits: infynyxx (infynyxx@moz-9281C4E9.hfc.comcastbusiness.net) (Ping timeout)
[14:18:57] <Thad> holli: there's a step by step for building on Windows now: https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[14:19:21] <holli> i know i am following it atm.
[14:19:54] <Thad> holli: if you follow it directly, you should not have to worry about Python on the path.  The install takes care of that.
[14:20:16] <holli> yeah, i had python installed already.
[14:20:16] <Thad> holli: glad that it's useful.
[14:20:50] <Thad> holli: I wrote that up, so if you run into issues, just let me know.
[14:20:56] <cmr> Thad: it is very useful :)
[14:21:32] <Thad> cmr: yup
[14:22:30] <holli> it's fine. maybe adding a sentence like "If you already have one of the prereqs installed, like python or Perl, make sure the PATH environment variable is set so the configure script can find it".
[14:22:44] <holli> or somethinf like that
[14:23:22] <rubber-duck> are there any alternative compiler (community) efforts ATM ?
[14:23:30] <cmr> rubber-duck: no
[14:23:39] <cmr> rubber-duck: the language isn't defined yet
[14:23:57] <dbaupp> rubber-duck: the language is currently specified as "what rustc accepts"
[14:24:16] <rubber-duck> a lot of languages are defined that way :)
[14:24:25] <dbaupp> (+ quite a few planned additions/removals)
[14:25:35] <holli> bummer. no regular expressions.
[14:25:40] *** Quits: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de) (Ping timeout)
[14:25:55] <cmr> ssbr was working on them
[14:26:04] <cmr> Compile-time regular expressions, at that
[14:26:07] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Ping timeout)
[14:26:16] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Ping timeout)
[14:28:12] <holli> well, accepting regex as input is a bad idea anyways
[14:28:49] *** Joins: Aetherspawn (Aetherspaw@moz-8811D9F0.static.tpgi.com.au)
[14:29:42] <Thad> holli: added your note directly inline with Downloading and building Rust.  Thanks!
[14:30:36] <cmr> https://github.com/mozilla/rust/wiki/Lib-re
[14:30:38] <cmr> there it is
[14:30:49] <holli> i'm here to serve.
[14:32:33] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[14:33:24] <holli> is there a list of keywords? i could create a syntax highlighting file for Notepad++.
[14:33:37] <cmr> in the manual
[14:33:46] <cmr> http://static.rust-lang.org/doc/rust.html#keywords
[14:33:53] <cmr> You could also use the vim syntax file as reference
[14:33:58] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[14:34:13] <cmr> https://github.com/mozilla/rust/blob/master/src/etc/vim/after/syntax/rust.vim
[14:34:36] <cmr> oops wrong one
[14:34:41] <cmr> https://github.com/mozilla/rust/blob/master/src/etc/vim/syntax/rust.vim
[14:35:22] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[14:35:38] <engla> I don't think drop and log are keywords still
[14:35:51] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[14:36:07] <holli> k, i'll see what i can do.
[14:36:22] <doener> holli:  https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/token.rs#L445
[14:36:22] *** Joins: infynyxx (infynyxx@moz-9281C4E9.hfc.comcastbusiness.net)
[14:36:49] <doener> 35 - 68 are the keywords
[14:37:01] <kimundi> holli: Oouh, synax highlining for npp would be awesome :)
[14:37:31] <doener> 68 ("be") is reserved but not actually used.
[14:42:21] <cmr> rusti: fn foo<T: Copy+Const>(x: &T) -> T { copy *x }
[14:42:21] -rusti- ()
[14:42:29] <cmr> rusti: fn foo<T: Copy>(x: &T) -> T { copy *x }
[14:42:30] -rusti- ()
[14:42:34] <cmr> rusti: fn foo<T: Copy>(x: &T) -> T { copy x }
[14:42:35] -rusti- <anon>:9:39: 9:45 error: mismatched types: expected `T` but found `&T` (expected type parameter but found &-ptr)
[14:42:35] -rusti- <anon>:9          fn foo<T: Copy>(x: &T) -> T { copy x }
[14:42:35] -rusti-                                                 ^~~~~~
[14:42:35] -rusti- error: aborting due to previous error
[14:42:35] -rusti- application terminated with error code 101
[14:42:38] <cmr> mmm
[14:42:59] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:43:35] *** Joins: lucian_ (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:43:35] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Connection reset by peer)
[14:43:39] <Thad> holli: actually PSPad would be a better effort for Windows Rust users, IMHO.  Check out it's Settings -> Highlighters Settings.
[14:43:58] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[14:44:04] <cmr> I have never heard of pspad but I use notepad++ all the time
[14:44:16] <Thad> cmr: ?!!? What ?  omg
[14:45:07] <Thad> Why do folks use the lowest common denominator for Tools ?  Why ? Why ? Why ? lololol
[14:45:18] <cmr> I'm quite pleased with notepad++...
[14:45:44] <doener> I think you broke Thad
[14:45:55] <Thad> cmr: me too.  but use the right tool for the job. :)
[14:46:11] <cmr> Thad: and that tool is vim, and not windows :p
[14:46:15] <Thad> cmr: maybe you are, on second thought.
[14:46:18] <Blei> cmr++
[14:46:51] <Thad> cmr: I meant, a Programmers Notepad, which supports compilers, projects, ftp, etc.
[14:46:56] <engla> cmr: About naming of tuple structs, one defining thing of 'struct' is ABI compatiblity with C structs.. if that doesn't apply, it's a good reason to not name it struct.
[14:47:01] <cmr> Thad: notepad++ supports that stuff
[14:47:14] <cmr> engla: tuple structs will be ABI compatible when I'm done my refactor
[14:47:25] <doomlord> i like the fact that rust is more grepable
[14:47:45] <doomlord> better support for simple light tools..
[14:47:52] <cmr> doomlord: yup, it's awesome
[14:48:09] <engla> ok cmr, just my thought about one way to guide the decision
[14:48:19] <cmr> engla: appreciated :)
[14:48:22] <Thad> cmr: really ?  k.  is it mostly from the plugins you added ?  Maybe I should spend some time with NP++
[14:48:27] <engla> doomlord: do you mean 'fn functionname'? I've noticed that too
[14:48:31] *** Joins: z0w0 (zack@moz-DD233ABD.lnse4.woo.bigpond.net.au)
[14:48:33] <holli> oh dear i did not want to start an editor war
[14:48:44] <Thad> you did not.  it's a preference.
[14:49:01] <Thad> we all are adults in here. (thankfully)
[14:49:11] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[14:49:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/a3RG0w
[14:49:11] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[14:49:14] <doomlord> yup. exactly that. want to see all the function definitons in a file? grep fn. etc
[14:50:07] *** Joins: Lucian88 (Mibbit@moz-9B5D9253.residential.rdsnet.ro)
[14:50:58] *** Parts: Lucian88 (Mibbit@moz-9B5D9253.residential.rdsnet.ro) ()
[14:51:33] <holli> xkcd:303
[14:51:40] <holli> mmh doesnt work
[14:51:53] <holli> http://xkcd.com/303/
[14:51:56] <doomlord> several eccentric ideas going through my head now to try and improve the abliity to type while on a trainer. i'm sure i'm going to break something if i try them out
[14:52:02] <holli> im starting to see why this is funny :)
[14:52:04] <doomlord> oops wrong channel
[14:52:07] <doomlord> #bicycling
[14:52:10] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:52:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KAGn6A
[14:52:10] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:52:59] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Ping timeout)
[14:53:06] *** Joins: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de)
[14:53:51] <cmr> Should Interner be moved from syntax to extra? It seems a lot more generically useful
[14:54:12] <cmr> (I'm cleaning it up to not use @)
[14:54:24] <rubber-duck> shouldn't str::CharEq be in char::CharEq ?
[14:54:35] <cmr> rubber-duck: probably
[14:55:10] *** Quits: timot (timot@96CD51CC.D7290CF.898DC978.IP) (Ping timeout)
[14:55:11] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[14:55:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KAGn6A
[14:55:11] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[14:55:13] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[14:55:13] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/duswew
[14:55:13] <ghrust> 13rust/06auto 1431b4b53 15Luqman Aden: librustc: Don't allow enum struct variants to shadow structs.
[14:55:13] <ghrust> 13rust/06auto 1441e90f2 15Luqman Aden: Add test for duplicate definitions of structs and enum struct variants.
[14:55:13] <ghrust> 13rust/06auto 14c17ff80 15bors: auto merge of #7267 : luqmana/rust/issue-5792, r=cmr...
[14:55:15] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[14:55:38] <Blei> cmr: https://github.com/mozilla/servo/issues/282
[14:56:11] <cmr> Blei: oh, hell, I don't want to do all the work to make a proper interner
[14:56:35] <Blei> you could start a proper interner by putting the current one in extra :3
[14:56:52] <cmr> Ok :)
[14:57:33] <cmr> The only thing that might be difficult is the syntax interner has a "gensym" method which adds a string to the internal vector but *not* the map from string to index
[14:57:36] <Blei> i don't know what the devs think about that, but i would welcome it (shorter rustc compile)
[14:58:36] <SiegeLord> I had a great idea last night... what if you could call functions from extern mod's at compile time
[14:58:42] <Blei> oh, it's in libsyntax. nvm, i don't care either way XD
[14:59:11] <cmr> SiegeLord: what? how would that work?
[14:59:37] <SiegeLord> Well, since it's an extern mod... all you have to do is dlopen it and call the function
[14:59:51] <rubber-duck> SiegeLord, :)
[15:00:23] <cmr> You mean for extending the compiler?
[15:00:41] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[15:00:52] <SiegeLord> Probably could use the same mechanism for syntax extensions too, although I was thinking more of CTFE
[15:01:04] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[15:01:06] *** Quits: infynyxx (infynyxx@moz-9281C4E9.hfc.comcastbusiness.net) (Client exited)
[15:01:14] <rubber-duck> I think he means something like D compile time evaluation
[15:01:25] <cmr> Already planned for extensions. Not possible with CTFE because extern mods can be swapped out at runtime
[15:01:29] <cmr> Or, before runtime
[15:01:36] <cmr> (syntax extensions that is)
[15:01:54] <Blei> hmm, that would make compiling stuff for which you don't have the sources very risky
[15:02:11] <Blei> *compiling stuff using a library for which
[15:02:35] <rubber-duck> yep, you're basically executing some random code
[15:02:49] <Blei> static c: int = evil_lib::double(1); // ooops, executes rm -rf /
[15:03:03] <SiegeLord> Let's not have compiled shared libraries then :P
[15:03:07] <rubber-duck> Blei, hopefully you don't compile as a super user then
[15:03:10] <SiegeLord> It's always an issue
[15:04:18] <Blei> SiegeLord: but this is only compilation, people won't assume that bad stuff can happen
[15:04:20] <MaikKlein> ok format is now nearly finished, it now looks like rust format file1 file2
[15:04:24] <Blei> but i agree, it's the same risk in the end
[15:04:34] *** Quits: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[15:05:20] <SiegeLord> I don't think it's a problem... it'll come up in the same fashion with loadable syntax extensions
[15:05:40] <SiegeLord> Unless syntax extensions are sandboxed somehow
[15:05:42] <rubber-duck> Blei, maybe the compiler can run the CTFE in a separate task with low privileges
[15:05:49] <rubber-duck> *separate process
[15:06:10] <rubber-duck> ie. process level sandboxing
[15:07:23] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[15:07:29] <rubber-duck> and then you give the privileges explicitly trough compiler arguments - so if you need your extension to read filesystem you specify it to compiler 
[15:07:52] <rubber-duck> no surprises there :)
[15:08:21] <MaikKlein> how do you think I should handle the error lets say I do rust format file1 file2 ... file 10. But one path to a file is not correct or can't be formatted. Should I just abort and no file gets formatted or should I just skip the file an still format the other files?
[15:09:13] <rubber-duck> MaikKlein, is the operation revertible ?
[15:09:26] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Ping timeout)
[15:10:11] <SiegeLord> MaikKlein: Sounds like a good candidate for a command line switch
[15:10:22] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[15:10:40] <SiegeLord> Early error by default, ignore non-existing files as an option
[15:10:45] <MaikKlein> rubber-duck, it's not really revertible
[15:10:49] <MaikKlein> ah
[15:10:49] <MaikKlein> ok
[15:11:03] <cmr> SiegeLord: I don't think the problem is security vuln, I think the problem is extern mod is dynamic linking, inlining/ctfe is incompatible with it
[15:12:04] <cmr> (It can be static linking but usually won't be)
[15:12:07] <holli> iÃ„m getting a bunc of unused imports warnings while compiling rust
[15:12:12] <cmr> holli: that is normal
[15:12:16] <cmr> holli: if you want, fix them :)
[15:12:41] <MaikKlein> SiegeLord, so I should do sth like rust format force file1 file2 ?
[15:13:03] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:13:07] *** Joins: jpochyla (jpochyla@moz-DDB6BA4E.broadband9.iol.cz)
[15:13:08] <holli> this is my first go on something else than Perl, Python or C#. please bear with me 
[15:13:10] <cmr> MaikKlein: I would use --keep-going or --ignore-missing, but yeah, something like that
[15:13:18] <SiegeLord> MaikKlein: Personally, I'd prefer it to error on non-existing files by default
[15:13:59] <MaikKlein> okay will do
[15:14:04] <SiegeLord> cmr: I imagine the CTFE functions would need to be annotated anyway, since you need a shim to call arbitrary functions via dlopen
[15:15:06] <cmr> SiegeLord: Well, once the effect system lands (if ever), CTFE will be "trivially" possible.
[15:15:22] <SiegeLord> I like "trivially" ;)
[15:15:41] <cmr> it will be easy to know what can be ctfe'd, not so easy to actually do so :p
[15:15:50] *** Joins: webber46 (webber46@moz-98D2F3C5.cust.bredband2.com)
[15:15:58] <MaikKlein> btw what happens if I move a value out of a vector like args.iter().advance |p| { let a = *p}
[15:16:19] <engla> you can't, you can just copy
[15:16:22] <cmr> rusti: let x = ~[1, 2, 3]; let y = x[1]; x
[15:16:24] -rusti- <anon>:9:33: 9:34 warning: unused variable: `y` [-W unused-variable (default)]
[15:16:24] -rusti- <anon>:9          let x = ~[1, 2, 3]; let y = x[1]; x
[15:16:24] -rusti-                                           ^
[15:16:24] -rusti- ~[1, 2, 3]
[15:16:34] <cmr> rusti: let x = ~[~1, ~2, ~3]; let y = x[1]; x
[15:16:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SMTQ
[15:16:42] *** Joins: dafdg (dan@moz-8762F234.pool.ukrtel.net)
[15:18:52] <MaikKlein> do we have a continue?
[15:18:58] <cmr> Yes, "loop;"
[15:19:26] <MaikKlein> thank
[15:19:29] <MaikKlein> thanks*
[15:19:43] <cmr> indutny: gave your mman PR a little boost :)
[15:20:02] *** Joins: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de)
[15:21:52] *** Quits: dafdg (dan@moz-8762F234.pool.ukrtel.net) (Quit: )
[15:23:51] *** Quits: lucian_ (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[15:24:49] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:27:01] *** Quits: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de) (Ping timeout)
[15:27:54] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[15:34:52] <holli> great. the hello world example does not compile
[15:35:00] <cmr> The one from the front page?
[15:35:15] <holli> tutorial
[15:35:35] <cmr> Did you compile from master?
[15:35:37] *** Joins: timot (timot@moz-4FD5CB64.cust.telenor.se)
[15:35:40] <holli> unresolved name io::println
[15:35:46] <cmr> Yeah use http://static.rust-lang.org/doc/tutorial.html#introduction not the 0.6 docs
[15:36:20] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Quit: Leaving.)
[15:36:52] <holli> that does it
[15:36:59] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[15:40:48] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:41:01] *** Joins: roo (Mibbit@moz-54BC732.dynamic.ip.windstream.net)
[15:41:35] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Ping timeout)
[15:44:26] <cmr> Is there a bloom filter or similar existential hashmap in extra?
[15:44:50] <cmr> I don't really want a bloom filter
[15:45:01] *** Joins: artagnon (uid7560@moz-A588D045.irccloud.com)
[15:45:12] <artagnon> Hi, can someone let me know what's wrong with my patch? https://gist.github.com/artagnon/5845460
[15:45:15] <cmr> Oh, wait, nevermind
[15:45:32] <doener> artagnon: what's the error you get?
[15:45:37] <artagnon> Last line.
[15:45:46] <doener> oh, missed that
[15:45:51] <artagnon> type `&hashmap::HashSet<'a>` does not implement any method in scope named `each`
[15:45:57] <artagnon> Why isn't the dispatch working?
[15:46:16] <doener> is the trait in scope?
[15:46:36] <cmr> Isn't there already a PR for map/set iterators?
[15:46:42] <cmr> engla: didn't you write one?
[15:46:44] <doener> trait methods are only available if the trait is in scope
[15:46:53] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:46:59] *** Quits: jviereck (Adium@moz-2A29B589.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:47:05] <artagnon> It's a "pub trait" in container.rs.
[15:47:05] <engla> yes
[15:47:09] <artagnon> It should be in scope, no?
[15:47:10] <engla> https://github.com/mozilla/rust/pull/7319
[15:47:16] <engla> strcat tried to land it
[15:47:37] <doener> artagnon: only if there's a "use" statement for it, but it seems there is...
[15:47:40] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[15:47:45] <engla> it failed on an unrelated test
[15:48:17] <cmr> artagnon: `each` shouldn't be a method in them, they should implement `Iterator`
[15:48:38] <artagnon> That's engla's patch: he did it right.
[15:48:50] <artagnon> I was just toying around: I want to know why this doesn't work.
[15:48:56] <cmr> Ah, ok.
[15:49:25] <engla> you need to use BaseIter for HashSet::each
[15:49:38] <doener> artagnon: d'oh, no, it's not in scope in to_str.rs
[15:49:48] <artagnon> Oh?
[15:49:50] <engla> set implements baseiter, map doesn't.. BaseIter is going to die soon
[15:49:56] <artagnon> Damn.
[15:49:57] <doener> artagnon: you'll need a "use container::Set" there
[15:50:19] <artagnon> doener: Thanks :D
[15:50:19] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[15:50:44] *** Joins: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de)
[15:50:45] <artagnon> Hopefully, I'll submit something useful one of these days.
[15:50:57] <artagnon> Until then, back to bumbling around.
[15:51:40] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[15:51:47] <engla> I don't understand rust tests
[15:52:38] <cmr> artagnon: https://github.com/mozilla/rust/issues/7322 ? :D
[15:53:12] <artagnon> Yeah, looks like something I can attempt.  Thanks.
[15:54:24] <Blei> bleh, removing free glue doesn't make a difference
[15:54:33] <Blei> neither compile time nor binary sizes
[15:55:05] <cmr> Blei: so title the PR "cleanup" :p
[15:55:11] <Blei> librustc is like 1s faster and 300k smaller (of 25m)
[15:55:33] <cmr> that's not insignificant for small programs
[15:55:49] *** Quits: tedh (tedh@moz-CE9B2F5A.cinci.res.rr.com) (Ping timeout)
[15:55:51] <cmr> Especially with rust on micros, no?
[15:55:53] <Blei> true.. let's test something smaller
[15:57:51] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[15:58:47] <doener> Blei: what did you change exactly? Merged free into drop?
[15:59:22] <Blei> doener: yeah
[15:59:42] <MaikKlein> rusti: ~[1,2,3,4,5].shift();
[15:59:42] -rusti- <anon>:9:10: 9:30 error: type `[<VI4>, .. 5]` does not implement any method in scope named `shift`
[15:59:42] -rusti- <anon>:9          ~[1,2,3,4,5].shift();
[15:59:43] -rusti-                    ^~~~~~~~~~~~~~~~~~~~
[15:59:43] -rusti- error: aborting due to previous error
[15:59:43] -rusti- application terminated with error code 101
[16:00:06] <doener> hm, 300k sounds like a lot to me then. I would have expected only very few different free functions. Did inlining survive?
[16:00:35] <cmr> MaikKlein: precedence, ~ applies to the result of the method call.
[16:00:43] <MaikKlein> rusti: let mut v = ~[1,2,3,4,5]; v.shift();
[16:00:44] <cmr> rusti: let x = ~[1, 2, 3, 4, 5]; x.shift();
[16:00:44] -rusti- ()
[16:00:45] -rusti- <anon>:9:35: 9:36 error: cannot borrow immutable local variable as mutable
[16:00:45] -rusti- <anon>:9          let x = ~[1, 2, 3, 4, 5]; x.shift();
[16:00:45] -rusti-                                             ^
[16:00:46] -rusti- error: aborting due to previous error
[16:00:46] -rusti- application terminated with error code 101
[16:00:46] <Blei> doener: i didn't check in detail yet
[16:00:57] <cmr> Aw, beat me too it, and I was wrong :p
[16:00:57] <Blei> but it's not slower, so it can't be too bad
[16:00:57] <MaikKlein> rusti: let mut v = ~[1,2,3,4,5]; v.shift(); x
[16:00:57] -rusti- <anon>:9:46: 9:47 error: unresolved name `x`. Did you mean `v`?
[16:00:58] -rusti- <anon>:9          let mut v = ~[1,2,3,4,5]; v.shift(); x
[16:00:58] -rusti-                                                        ^
[16:00:58] -rusti- error: aborting due to previous error
[16:00:58] -rusti- application terminated with error code 101
[16:01:01] *** Parts: artagnon (uid7560@moz-A588D045.irccloud.com) ()
[16:01:02] <MaikKlein> rusti: let mut v = ~[1,2,3,4,5]; v.shift(); v
[16:01:03] -rusti- ~[2, 3, 4, 5]
[16:01:18] <MaikKlein> cmr, ok thanks
[16:02:36] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Ping timeout)
[16:03:22] <MaikKlein> rusti: let mut v = ~[1,2,3,4,5]; v.shift(); v
[16:03:23] -rusti- ~[2, 3, 4, 5]
[16:03:46] <MaikKlein> rusti: let mut v = ~[1,2,3,4,5]; v.shift(); v.unshift(); v
[16:03:46] -rusti- <anon>:9:46: 9:58 error: this function takes 1 parameter but 0 parameters were supplied
[16:03:46] -rusti- <anon>:9          let mut v = ~[1,2,3,4,5]; v.shift(); v.unshift(); v
[16:03:46] -rusti-                                                        ^~~~~~~~~~~~
[16:03:46] -rusti- error: aborting due to previous error
[16:03:47] -rusti- application terminated with error code 101
[16:04:04] *** Quits: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Lost terminal)
[16:04:12] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:07:22] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[16:07:51] <cmr> Not only was the interner in libsyntax wildly inefficient, it was unsafe!
[16:08:07] <cmr> In that it could dynamically fail
[16:08:25] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[16:08:30] *** Joins: tedh (tedh@moz-CE9B2F5A.cinci.res.rr.com)
[16:08:48] <doener> cmr: how?
[16:08:59] *** Joins: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com)
[16:09:23] <cmr> doener: get() didn't check that the passed index was smaller than the length of the internal vector before indexing the internal vector
[16:09:34] <cmr> it returned T instead of Option<T> and failed the task if it failed
[16:09:42] <doener> right
[16:11:00] <doener> though the caller wouldn't be able to do much more than failing anyway, just probably with a more meaningful error message
[16:11:24] <cmr> yeah
[16:12:04] <cmr> Plus it burdens them with error checking
[16:12:06] <SiegeLord> rusti: struct A{a:int, b:int} let a = A{a:1, b:2}; let b = A{..a};
[16:12:06] -rusti- <anon>:9:62: 9:63 error: expected `;` but found `{`
[16:12:07] -rusti- <anon>:9          struct A{a:int, b:int} let a = A{a:1, b:2}; let b = A{..a};
[16:12:07] -rusti-                                                                        ^
[16:12:07] -rusti- application terminated with error code 101
[16:12:54] <cmr> SiegeLord: maybe it expects at least one field?
[16:13:04] <cmr> I wonder if there are soundness holes with that...
[16:13:06] <SiegeLord> rusti: struct A{a:int, b:int} let a = A{a:1, b:2}; let b = A{a:1,..a};
[16:13:07] -rusti- <anon>:9:57: 9:58 warning: unused variable: `b` [-W unused-variable (default)]
[16:13:07] -rusti- <anon>:9          struct A{a:int, b:int} let a = A{a:1, b:2}; let b = A{a:1,..a};
[16:13:07] -rusti-                                                                   ^
[16:13:08] -rusti- ()
[16:13:09] <cmr> bblum: ^ might want to look into it?
[16:13:21] <SiegeLord> What kind of feature is this anyway...
[16:13:40] <cmr> bblum: I'm thinking it could copy the fields without proper borrow checking or something
[16:13:42] *** Quits: roo (Mibbit@moz-54BC732.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:13:47] <SiegeLord> I only discovered it while reading http://brson.github.io/archaea
[16:13:54] <cmr> SiegeLord: lets you fill in struct fields from a default
[16:14:12] <SiegeLord> rusti: struct A{a:int, b:int} let a = A{a:1, b:2}; let b = A{,..a};
[16:14:13] -rusti- <anon>:9:62: 9:63 error: expected `;` but found `{`
[16:14:13] -rusti- <anon>:9          struct A{a:int, b:int} let a = A{a:1, b:2}; let b = A{,..a};
[16:14:13] -rusti-                                                                        ^
[16:14:13] -rusti- application terminated with error code 101
[16:14:26] <cmr> It's used a lot in like syntax::visit, you fill in the things you want to explicitly handle and the rest are filled in with the default visitors
[16:14:26] <SiegeLord> Hmm
[16:16:16] *** Joins: roo (Mibbit@moz-33F840EB.ip.windstream.net)
[16:17:05] <SiegeLord> rusti: let a = {b:5};
[16:17:05] -rusti- <anon>:9:19: 9:20 error: expected `;` or `}` after expression but found `:`
[16:17:06] -rusti- <anon>:9          let a = {b:5};
[16:17:06] -rusti-                             ^
[16:17:06] -rusti- application terminated with error code 101
[16:19:05] <Blei> SiegeLord: old code, these were called records and were statically typed
[16:19:17] <Blei> *structurally typed
[16:19:28] <SiegeLord> Interesting
[16:20:01] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[16:20:07] <cmr> Is it possible to use the Index trait and return a &'self? I'm getting "foo.rs:6:4: 8:5 error: method `index` has an incompatible type: lifetime mismatch
[16:20:09] <cmr> "
[16:20:27] <MaikKlein> rusti: let v = ~[1,2,3,4,5]; v.shift(); v
[16:20:28] -rusti- <anon>:9:31: 9:32 error: cannot borrow immutable local variable as mutable
[16:20:28] -rusti- <anon>:9          let v = ~[1,2,3,4,5]; v.shift(); v
[16:20:28] -rusti-                                         ^
[16:20:28] -rusti- error: aborting due to previous error
[16:20:28] -rusti- application terminated with error code 101
[16:20:46] <cmr> Actually nevermind it was because I was using &'self self
[16:21:17] *** Quits: holli (Mibbit@moz-2A665AD5.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:21:27] <MaikKlein> rusti: let mut v = [1,2,3,4,5]; v.shift(); v
[16:21:28] -rusti- <anon>:9:34: 9:44 error: type `[<VI4>, .. 5]` does not implement any method in scope named `shift`
[16:21:28] -rusti- <anon>:9          let mut v = [1,2,3,4,5]; v.shift(); v
[16:21:28] -rusti-                                            ^~~~~~~~~~
[16:21:28] -rusti- error: aborting due to previous error
[16:21:28] -rusti- application terminated with error code 101
[16:21:31] <MaikKlein> hm
[16:21:45] <MaikKlein> there is no shift for []?
[16:21:57] <MaikKlein> only for ~[]?
[16:21:57] <Blei> MaikKlein: [] can't change size
[16:22:08] <cmr> MaikKlein: [, ..n] is statically-sized, on the stack
[16:22:12] <MaikKlein> ok
[16:22:32] *** Joins: mr_boo (Mibbit@77AA2328.6758C5B4.DFAB1F33.IP)
[16:22:38] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Client exited)
[16:22:48] <cmr> https://gist.github.com/cmr/3b134d099604c00a41f0
[16:22:53] <MaikKlein> rusti: [1,2,3,4].to_boxed();
[16:22:53] -rusti- <anon>:9:9: 9:30 error: type `[<VI3>, .. 4]` does not implement any method in scope named `to_boxed`
[16:22:53] -rusti- <anon>:9          [1,2,3,4].to_boxed();
[16:22:53] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~
[16:22:54] -rusti- error: aborting due to previous error
[16:22:54] -rusti- application terminated with error code 101
[16:23:11] <cmr> Reason I want this is I want the interner to return a reference to the value, rather than having to copy.
[16:23:19] <cmr> MaikKlein: to_owned()
[16:23:20] <MaikKlein> rusti: [1,2,3,4].to_owned();
[16:23:21] -rusti- ()
[16:23:33] <MaikKlein> rusti: let v = [1,2,3,4].to_owned(); v
[16:23:34] -rusti- ~[1, 2, 3, 4]
[16:23:37] <MaikKlein> ah ok nice
[16:23:39] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[16:24:01] <Blei> cmr: try setting the lifetime on the method instead
[16:24:03] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[16:24:14] <cmr> Blei: like fn index<'self>?
[16:24:17] <Blei> yeah
[16:24:27] <Blei> but don't call it 'self, rustc will shout at you
[16:24:43] <cmr> I want it to be the 'self lifetime though :\
[16:25:11] <Blei> it is the self lifetime, but the 'self lifetime name only works in certain situations apparently
[16:25:12] <engla> whatever you do, rust won't allow the type to differ from the trait though?
[16:25:14] <Blei> might be a bug
[16:25:19] <Blei> afaiu
[16:25:22] <cmr> huh
[16:25:36] <cmr> engla: well, the Index trait is parameterized by return type
[16:25:42] <cmr> which is why I figured it'd be possible
[16:25:51] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[16:25:53] <Blei> ah, wait a moment
[16:26:04] <cmr> Blei: but with that I get 
[16:26:06] <cmr> foo.rs:5:17: 5:22 error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[16:26:07] <Blei> you have to have fn index(&'self self, ...
[16:26:08] <cmr> foo.rs:5 impl Index<uint, &uint> for foo {
[16:26:10] <cmr>                           ^~~~~
[16:26:15] <Blei> hmm
[16:26:17] <Blei> i see
[16:26:19] <cmr> But when I do that I can't use Index
[16:26:27] <cmr> So is it just a no-go?
[16:27:34] *** Joins: whidgle (Mibbit@moz-E9FFB401.tomtelnet.ru)
[16:28:14] *** Parts: whidgle (Mibbit@moz-E9FFB401.tomtelnet.ru) ()
[16:28:18] <MaikKlein> so if I do "rust format --force file1 file2" it also has to work with  "rust format file1 file2 --force" 
[16:28:25] <indutny> r+ will only cause it to fail
[16:28:36] <cmr> MaikKlein: yes
[16:28:47] <cmr> MaikKlein: well, not necesarily
[16:28:55] <indutny> cmr: have you received my messages?
[16:28:58] <indutny> this PR doesn't work yet
[16:29:00] <cmr> MaikKlein: options usually don't go at the end... disallowing them wouldn't be the end of the world
[16:29:08] <indutny> brb
[16:29:22] <cmr> indutny: I do not think so?
[16:30:52] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:31:04] <Blei> cmr: looks like a bug to me
[16:31:55] <Blei> and i have a fun error message
[16:32:14] <Blei> https://gist.github.com/cmr/3b134d099604c00a41f0#comment-850588
[16:32:32] <cmr> Yeah, I saw that too
[16:32:59] <cmr> I don't see an issue for it, do you?
[16:33:24] <Blei> no
[16:33:47] <MaikKlein> rusit: let mut v= ~[1,2,3,4,5]; v.reverse();
[16:33:58] <MaikKlein> rusti: let mut v= ~[1,2,3,4,5]; v.reverse();
[16:33:59] -rusti- <anon>:9:34: 9:46 error: type `~[<VI4>]` does not implement any method in scope named `reverse`
[16:33:59] -rusti- <anon>:9          let mut v= ~[1,2,3,4,5]; v.reverse();
[16:33:59] -rusti-                                            ^~~~~~~~~~~~
[16:33:59] -rusti- error: aborting due to previous error
[16:33:59] -rusti- application terminated with error code 101
[16:34:22] <MaikKlein> rusti: let mut v= ~[1,2,3,4,5]; reverse(v);
[16:34:23] -rusti- <anon>:9:34: 9:41 error: unresolved name `reverse`.
[16:34:23] -rusti- <anon>:9          let mut v= ~[1,2,3,4,5]; reverse(v);
[16:34:23] -rusti-                                            ^~~~~~~
[16:34:23] -rusti- error: aborting due to previous error
[16:34:23] -rusti- application terminated with error code 101
[16:34:27] <cmr> rusti: let v = ~[1, 2, 3, 4, 5]; v.rev_iter().collect::<~[int]>()
[16:34:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MBRO
[16:34:38] <MaikKlein> rusti: let mut v= ~[1,2,3,4,5]; std::vec::reverse(v);
[16:34:38] -rusti- ()
[16:35:00] <MaikKlein> rusti: let mut v= ~[1,2,3,4,5]; std::vec::reverse(v)  
[16:35:01] -rusti- ()
[16:35:18] <MaikKlein> rusti: let mut v= ~[1,2,3,4,5]; v= std::vec::reverse(v); v  
[16:35:19] -rusti- <anon>:9:37: 9:58 error: mismatched types: expected `~[<VI4>]` but found `()` (expected vector but found ())
[16:35:19] -rusti- <anon>:9          let mut v= ~[1,2,3,4,5]; v= std::vec::reverse(v); v  
[16:35:19] -rusti-                                               ^~~~~~~~~~~~~~~~~~~~~
[16:35:19] -rusti- error: aborting due to previous error
[16:35:19] -rusti- application terminated with error code 101
[16:35:26] <cmr> rusti: let mut v= ~[1,2,3,4,5]; std::vec::reverse(v); v
[16:35:27] -rusti- ~[5, 4, 3, 2, 1]
[16:35:35] <MaikKlein> ah ok
[16:36:02] <mr_boo> rusti: 1
[16:36:03] -rusti- 1
[16:36:14] <cmr> MaikKlein: http://static.rust-lang.org/doc/extra/getopts.html
[16:36:33] <MaikKlein> rusti: let mut v= ~[1,2,3,4,5]; std::vec::reverse(v); v.shift(); std::vec::reverse(v); v
[16:36:34] -rusti- ~[1, 2, 3, 4]
[16:36:48] <MaikKlein> this seems not efficient at all :D
[16:37:01] <cmr> rusti: let mut v = ~[1, 2, 3, 4, 5]; v.unshift(); v
[16:37:02] -rusti- <anon>:9:39: 9:51 error: this function takes 1 parameter but 0 parameters were supplied
[16:37:02] -rusti- <anon>:9          let mut v = ~[1, 2, 3, 4, 5]; v.unshift(); v
[16:37:02] -rusti-                                                 ^~~~~~~~~~~~
[16:37:02] -rusti- error: aborting due to previous error
[16:37:02] -rusti- application terminated with error code 101
[16:37:07] <cmr> rusti: let mut v = ~[1, 2, 3, 4, 5]; v.unshift(1); v
[16:37:08] -rusti- ~[1, 1, 2, 3, 4, 5]
[16:37:13] <cmr> oh heh
[16:37:17] <cmr> rusti: let mut v = ~[1, 2, 3, 4, 5]; v.pop(); v
[16:37:18] -rusti- ~[1, 2, 3, 4]
[16:37:26] <mr_boo> rusti: "i love you guys, good by"
[16:37:27] -rusti- "i love you guys, good by"
[16:37:53] *** Quits: mr_boo (Mibbit@77AA2328.6758C5B4.DFAB1F33.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:38:00] <MaikKlein> ah right pop was a stack, oh man :D
[16:38:52] *** Joins: nano (nano@moz-972880B.superkabel.de)
[16:39:25] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:39:34] <engla> hm vec and deque don't have the same interface
[16:39:57] <MaikKlein> whats the best way to get the last element? like vec.head()? is it vec.reverse().head()?
[16:40:48] <engla> should be v.last()
[16:40:50] <MaikKlein> ah there was no method reverse
[16:40:54] <MaikKlein> hm really?
[16:41:19] <MaikKlein> oh 
[16:41:21] <MaikKlein> thanks
[16:41:44] <engla> yeah
[16:41:51] <engla> rusti: let v = ~[1,23
[16:41:51] -rusti- <anon>:10:4: 10:5 error: incorrect close delimiter: `}`
[16:41:51] -rusti- <anon>:10     };
[16:41:51] -rusti-               ^
[16:41:51] -rusti- application terminated with error code 101
[16:41:58] <engla> rusti: let v = ~[1,2,3,4]; *v.last()
[16:41:58] -rusti- 4
[16:42:27] <engla> rusti: let v: ~[int] = ~[]; v.last()
[16:42:28] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BLfY
[16:42:41] <engla> rusti: let v: ~[int] = ~[]; *v.last()
[16:42:42] -rusti- rust: task failed at 'last: empty vector', /build/rust-git/src/rust/src/libstd/vec.rs:262
[16:42:42] -rusti- rust: domain main @0x1fb61b0 root task failed
[16:42:42] -rusti- application terminated with error code 101
[16:43:41] <jpochyla> hi, im playing with operator overriding for some sample Point struct. i have Mul working for Point * Point, but cannot get Point * float working
[16:43:47] <jpochyla> fails to compile with error: conflicting implementations for a trait
[16:44:53] <jpochyla> is there any way to do this? it puzzels me why does rustc think its conflicting, Mul<Point, float> and Mul<Point, Point> are two different traits, no?
[16:45:09] <engla> it does conflict, to work around it right now
[16:45:45] <engla> you need to use a trait,    impl<T: PointMultiply> Mul<Point, T> for Point
[16:46:26] <engla> so it's a further indirection in traits, but of course that's resolved statically 
[16:46:52] <engla> ah by the way the traits should be  Mul<T, Point>
[16:47:08] <engla> the first parameter is the rhs
[16:47:31] <jpochyla> ah it gets inferred from the fn type?
[16:48:03] <engla> the format is   impl Mul<Rhs, Result> for Lhs
[16:48:14] <engla> Lhs * Rhs -> Result
[16:49:37] <jpochyla> yup so i have impl Mul<Point, Point> for Point... for p*p, and <float, Point> for p*f
[16:49:59] <engla> yes
[16:50:06] <jpochyla> actually what would happen if i'd define Mul<Point, Point> for float?
[16:50:06] *** Quits: z0w0 (zack@moz-DD233ABD.lnse4.woo.bigpond.net.au) (Client exited)
[16:50:17] <engla> I don't know
[16:50:36] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[16:50:51] <jpochyla> gonna try :)
[16:50:54] <jpochyla> thanks a lot!
[16:51:25] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[16:51:53] *** Joins: nano (nano@moz-972880B.superkabel.de)
[16:53:52] <MaikKlein> does this look okay? https://gist.github.com/MaikKlein/5845680
[16:54:21] <MaikKlein> i probably should make static strings
[16:55:10] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:55:24] <jpochyla> btw is there any reason why are Mul::mul arguments typed as &?
[16:55:32] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[16:59:38] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:01:01] <Blei> so, i tried compiling differenth libs (librust, librustdoc librustc) with and without free glue
[17:02:01] <Blei> verdict: time difference seems to be small to non-existing (i.e. drowned in noise), size of no-free binaries is consistently 1% to 2% smaller than with free
[17:02:37] *** Joins: artagnon (uid7560@moz-A588D045.irccloud.com)
[17:02:49] <artagnon> cmr: Thanks; https://github.com/mozilla/rust/pull/7325
[17:03:02] <artagnon> That's hopefully a good fix.
[17:03:28] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Quit: Leaving)
[17:05:31] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Ping timeout)
[17:08:10] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Ping timeout)
[17:08:27] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[17:09:05] *** Quits: timot (timot@moz-4FD5CB64.cust.telenor.se) (Ping timeout)
[17:11:26] <doener> artagnon: had a small nit. Not sure about the NoError value. Could be replaced by using an Option<NamespaceError> for duplicate_type, but that might be overkill
[17:12:08] <artagnon> Yeah, Option would work too.
[17:12:31] <artagnon> I share the sentiment though: it's probably an overkill.
[17:13:10] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[17:13:40] <doener> but it's great to see that commit message, your involvement with git is quite obvious :-)
[17:13:59] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:14:32] <artagnon> Thank you :)
[17:18:19] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[17:18:47] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[17:20:13] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[17:22:05] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[17:26:29] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Connection reset by peer)
[17:26:37] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[17:27:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[17:32:32] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:32:47] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:32:54] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[17:33:14] <artagnon> Regression from 0.6: duplicate structs are reported as duplicate values, not duplicate types.
[17:34:10] <MaikKlein> how can I tell git again that I want to delete all my local changes so that I am in sync with the current master?
[17:34:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:34:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/duswew
[17:34:11] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:34:42] <doener> MaikKlein: git fetch origin; git reset --hard origin/master
[17:35:32] <MaikKlein> doener, ah nice thanks
[17:36:42] <artagnon> Tip: use a prompt to tell you immediately when your local has diverged from upstream (there's an excellent one in git.git).
[17:36:55] <acrichto> r? https://github.com/mozilla/rust/pull/7113
[17:37:09] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[17:37:09] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/w7AZuw
[17:37:09] <ghrust> 13rust/06auto 14ea5f66a 15Fedor Indutny: libc: support functions from sys/mman.h...
[17:37:09] <ghrust> 13rust/06auto 14a89b719 15Fedor Indutny: libc: add POSIX-compatible sysconf consts...
[17:37:09] <ghrust> 13rust/06auto 143763eb8 15Fedor Indutny: libc: (u)int => c_(u)int for consts
[17:37:11] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[17:38:16] <doomlord> thinking out loud ... what ways might there be of improving c++/rust interop (i know C is much more feasible)
[17:39:22] <doomlord> thinking of manually rolled vtables in C ... how about a tool to generate views of trait objects in c++
[17:39:38] <doomlord> or vica versa ... generate a trait-object that is a 'view' of a C++ class
[17:40:15] <doomlord> would one just run into too many difficulties with conflicting memory models 
[17:42:22] *** Parts: artagnon (uid7560@moz-A588D045.irccloud.com) ()
[17:44:20] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[17:46:08] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[17:46:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ff78972 to 14c17ff80: 02http://git.io/N3iJvQ
[17:46:09] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[17:49:21] *** Joins: fabiand (fabiand@B06E58AA.B55F2281.3601B52B.IP)
[17:49:22] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[17:49:55] <bblum> cmr: what am i looking for?
[17:49:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:51:06] <indutny> cmr: it works? :)
[17:51:09] <indutny> surprise :)
[17:52:07] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[17:53:19] <indutny> strange, I can't see those commits in auto...
[17:53:28] <indutny> ah, because they failed :P
[17:53:36] *** Quits: Aetherspawn (Aetherspaw@moz-8811D9F0.static.tpgi.com.au) (Quit: Leaving)
[17:53:54] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[17:53:55] <bblum> asldk;jhaf;sdlkfjas;ldkfja;sldkfja;sdlkfja;sdlkfja;sldkga;dfkjh
[17:53:58] <bblum> patch bitrotted AGAIN
[17:57:37] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[17:59:48] *** Joins: holli (Mibbit@moz-2A665AD5.pools.arcor-ip.net)
[17:59:58] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[18:00:06] <doomlord> there's a question... would there be a standard way of creating mangled rust function names for acess from c
[18:00:11] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:00:26] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[18:01:00] <doomlord> does it do anything like that at the minute
[18:01:12] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[18:01:18] <doomlord> i suppose not everything would be c callable
[18:01:33] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[18:02:15] <holli> grinding tru the tutorial. i find the closure example unneccerary convoluted. it should read like http://pastebin.com/hxzS23Ym imho
[18:02:27] <holli> *unneccesary
[18:03:20] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:04:51] <bblum> oh, actually, i suspect this one is my fault
[18:05:10] <doener> holli: I guess the point is to show that the local captured_var is indeed captured and available when the closure is called from the other function
[18:07:27] <holli> good point. but most likely someone reading this already knows the concept of a closure. this example mixes in a function declaration. for me as a total noob (rust-wise) it took me a while to separate the two.
[18:08:03] <doener> might be worthwhile to split it into two example.
[18:08:18] <holli> that would fix it :)
[18:08:23] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Ping timeout)
[18:09:38] <cmr> bblum: If ..foo in struct initialization leaves copies of borrowed/@ things
[18:09:47] <bblum> cmr: hmm
[18:10:03] <cmr> I don't know the correct way to handle it or if rust is doing it safely, but I have a feeling it's probably wrong :p
[18:10:45] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[18:11:49] <holli> i really do like the match syntax. it's almost Perl6-ish
[18:12:18] <cmr> holli: afaik it was ripped from haskell or ml.. but I don't know any of the languages in/around that, so I can't say for sure ;p
[18:12:54] <holli> afaik Perl6 borrows some ideas from haskell
[18:15:03] <MaikKlein> does anyone know if I can remove all changed files that are not authored by me? https://github.com/mozilla/rust/pull/7324/files or do I have to make a new PR
[18:15:10] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[18:15:17] <MaikKlein> ?
[18:15:33] <cmr> MaikKlein: somehow you accidentally pulled in extra commits
[18:15:37] <holli> my git-fu sucks :)
[18:15:38] <cmr> MaikKlein: Close the pull request
[18:16:01] <indutny> cmr: I've decided to choose another way :P
[18:16:09] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[18:16:10] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[18:16:10] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d728f5d to 14c17ff80: 02http://git.io/N3iJvQ
[18:16:10] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[18:16:13] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:16:14] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/OjWCIg
[18:16:14] <ghrust> 13rust/06auto 14080d498 15blake2-ppc: std::hashmap: Implement external iterator for HashMap and HashSet
[18:16:14] <ghrust> 13rust/06auto 143af1d20 15blake2-ppc: std::hashmap: Add test_iterate for HashSet
[18:16:14] <ghrust> 13rust/06auto 14f045210 15blake2-ppc: std::hashmap: Use .iter() instead of .each and similar
[18:16:14] *** Joins: mib_t2ji5d (Mibbit@77AA2328.6758C5B4.DFAB1F33.IP)
[18:16:17] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:16:37] <cmr> Do a "git pull mozilla master", (or use upstream instead of master, whichever one you use to designate the mozilla/rust repository) before you do the PR
[18:17:37] <doener> cmr: that would only add more commits, not drop any
[18:17:55] <indutny> cmr: see last commits in https://github.com/mozilla/rust/pull/7257
[18:18:13] <cmr> indutny: does it actually compile on your machine?
[18:18:21] <indutny> I've only osx...
[18:18:28] <cmr> ah
[18:18:28] <indutny> but I can try building it in cloud
[18:18:29] <indutny> one sec
[18:18:45] <strcat> make a new branch from master and 'git cherry-pick' your commit
[18:18:45] <cmr> libstd is the first thing that builds, so it should be fast to fail
[18:19:25] *** Joins: artagnon (uid7560@moz-A588D045.irccloud.com)
[18:19:27] <indutny> yep
[18:19:50] <artagnon> cmr: Thanks for the suggestion.  What is 'static exactly?  The named lifetime thing?
[18:20:07] <cmr> artagnon: It's data placed in the read-only section of the binary
[18:20:15] <cmr> But yes, it is a named lifetime
[18:20:26] <artagnon> Could it be 'foo as well?
[18:20:31] <strcat> 'static is special, it's the longest lifetime
[18:20:32] <indutny> cmr: do you think it'll be hard to fix that annoying bug
[18:20:35] <artagnon> Ah.
[18:20:40] <indutny> with same-named methods in traits
[18:20:41] <strcat> 'static means it exists for the entire lifetime of the program
[18:20:50] <cmr> indutny: with Index? no idea, and haven't looked into it yet
[18:20:55] <artagnon> I just need it to be file-static no?
[18:20:59] <indutny> cmr: Index?
[18:20:59] <MaikKlein> yeah I don't know I messed something up
[18:21:02] <artagnon> Like a static variable in C.
[18:21:05] <artagnon> How do I get that?
[18:21:17] <cmr> indutny: I don't know what you're asking if you're not talking about Index
[18:21:47] <bblum> cmr: there is a bug somewhere but i haven't yet figured out what it is
[18:21:49] <strcat> artagnon: don't know what you mean
[18:21:52] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (Ping timeout)
[18:21:54] <artagnon> Oh, never mind: it's not visible to anything else anyway.
[18:21:56] <strcat> artagnon: stuff is private by default
[18:22:03] <artagnon> Right, my bad.
[18:22:04] <indutny> rusti: trait X { fn push(&self); } let mut a = ~[]; a.push(1)
[18:22:05] -rusti- ()
[18:22:15] <indutny> well, not exactly this
[18:22:15] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[18:22:31] <indutny> but sometimes it think that I want to call push from X trait
[18:22:53] <strcat> it's a known issue, method resolve is really broken
[18:22:58] <strcat> don't think it would be hard to fix
[18:23:41] <bblum> cmr: 
[18:23:44] <bblum> rusti: use extra::arc::*; struct A { y: ARC<int>, x: ARC<int> } impl Drop for A { fn finalize(&self) { println(fmt!("x=%?,y=%?", self.x.get(), self.y.get())); } } let a = A { y: ARC(1), x: ARC(2) }; let _b = A { y: ARC(3), ..a };
[18:23:45] -rusti- x=&2,y=&3
[18:23:45] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[18:23:52] <cmr> bblum: Hah, called it!
[18:23:57] <bblum> nice one
[18:24:08] <bblum> i'll file it
[18:24:46] <cmr> I have a feeling any fix for it is going to break libsyntax
[18:24:51] <cmr> especially the AST visistor
[18:24:51] <artagnon> Is this fine? http://pastie.org/8072697
[18:24:54] *** Quits: mib_t2ji5d (Mibbit@77AA2328.6758C5B4.DFAB1F33.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:24:59] <cmr> artagnon: yup
[18:25:09] <artagnon> Thanks; will push.
[18:25:11] <Blei> i tried cleaning up those visitors somewhat
[18:25:19] <Blei> well, a related one, ast_fold
[18:25:21] *** Joins: jcp (user@moz-E150F49F.cpe.net.cable.rogers.com)
[18:25:24] <Blei> and hit a bug in default methods
[18:25:54] *** Parts: artagnon (uid7560@moz-A588D045.irccloud.com) ()
[18:27:13] *** Quits: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com) (Ping timeout)
[18:29:25] <strcat> oh well, vec is a hell of a lot cleaner now
[18:29:32] <strcat> really need a new for loop
[18:30:30] <bblum> cmr: 7327
[18:31:57] <strcat> huh, I don't understand how there are still .each calls around
[18:32:10] <strcat> on vecs
[18:32:24] <strcat>         for [Less, Equal, Greater].each |&o| {
[18:32:25] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[18:32:27] <strcat> in libstd/cmp.rs
[18:32:34] *** Quits: jcp (user@moz-E150F49F.cpe.net.cable.rogers.com) (Quit: rcirc on GNU Emacs 24.3.1)
[18:33:04] *** Joins: jcp (user@moz-E150F49F.cpe.net.cable.rogers.com)
[18:34:05] *** Quits: jcp (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[18:34:45] <strcat> rust isn't running those tests
[18:35:06] <strcat> great
[18:35:33] <thiez> what would happen if there were instances of .each in #[should_fail] tests?
[18:35:42] <strcat> it won't compile
[18:35:49] <strcat> #[should_fail] catches failure, not compile errors
[18:35:53] <thiez> ok, nice
[18:36:01] *** Quits: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de) (Ping timeout)
[18:36:04] <jpochyla> is there please any summary about these for/each/iterator changes? im lost in whats getting deprecated and whats the idiomatic way to do things now
[18:36:37] <strcat> use std::iterator, everything else will go away and 'for' will be switched to use std::iterator::Iterator
[18:36:59] <strcat> there are methods like .iter()/.mut_iter() to get one
[18:37:19] <strcat> I'll write something before 0.7 is released
[18:37:43] <cmr> strcat: New `for` really needs to get pushed out before 0.6
[18:37:45] <cmr> *7
[18:37:55] <strcat> well I don't see that happening ;p
[18:38:07] <strcat> pcwalton has a whole chain of things he needs to rebase/land
[18:38:13] <cmr> Awh
[18:38:28] <Blei> oh noez, my intrinsic changes threw an assertion on windows
[18:38:38] <Blei> well, that sucks
[18:38:49] <jpochyla> great, thanks a lot
[18:39:01] <cmr> I really think graydon should nix some of the auto bots... it's not possible to land everything that needs to land with cycles taking so long
[18:39:10] *** Quits: roo (Mibbit@moz-33F840EB.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:39:15] <cmr> And the "correct" fix, fixing trans, is going to be slow
[18:39:15] <strcat> cmr: can fix it by turning off the EC2 ones again
[18:39:28] <strcat> we need more real hardware
[18:40:10] *** Joins: zslayton (Mibbit@moz-14AA87A9.nyc.res.rr.com)
[18:42:27] <strcat> Blei: I don't think it was your fault
[18:42:30] <strcat> the bot is just broken
[18:42:39] <strcat> well
[18:42:44] <strcat> maybe it was your fault
[18:42:45] <strcat> ;p
[18:43:02] <cmr> Oh right
[18:43:14] <Blei> it probably was my fault
[18:43:24] <Blei> but i'm surprised it works everywhere else
[18:43:43] <cmr> strcat: is it posible to use the Index trait and return a &'self? I am rewriting the string interner and making it more generic but would like to return a borrowed reference to the value, rather than copying the value.
[18:43:51] <strcat> cmr: don't use Index
[18:43:55] <strcat> it's going to be removed
[18:43:58] <strcat> it's crap
[18:44:06] <cmr> Good to know!
[18:44:14] <strcat> we should just remove it ASAP
[18:44:22] <strcat> to save pain later
[18:44:22] *** Quits: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr) (Quit: pyrac)
[18:44:22] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:44:29] <cmr> I'll r+ that PR :p
[18:44:46] <strcat> needs to be replaced with a proper one
[18:44:51] <strcat> or rather, a proper 3-4
[18:46:02] *** Joins: timot (timot@moz-7A0CF85F.cust.telenor.se)
[18:50:17] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[18:50:39] *** Quits: jpochyla (jpochyla@moz-DDB6BA4E.broadband9.iol.cz) (Ping timeout)
[18:50:50] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[18:51:10] <holli> can someone explain to me the rationale behind the closure syntax being let c = |arg| expr; instead of let c = fn (arg) block?
[18:52:08] <doener> holli: one thing would be that it looks nicer with do/for syntax
[18:52:10] <tcsc> why would it be the second?
[18:52:27] <doener> holli: another might be parse ambiguity, though I'm just guessing here
[18:52:29] <holli> because a closer is just a function
[18:52:37] <holli> *closure
[18:52:48] <doener> well, a function + some environment
[18:53:21] <holli> well if it is a parse ambiguity, the parser is crap
[18:53:46] <tcsc> ambiguous is a quality of the grammar, not of the parser
[18:53:57] <holli> taken
[18:54:15] <zslayton> I'm trying to play with the Stats trait in libextra/stats.rs as a way of getting my feet wet. I'm stuck though, since that trait is only implemented for [f64] and declaring a new vector on the stack always gives it a type of [f64 .. <number of elements>]
[18:54:55] <zslayton> How can I do something like "let data = [5f64, 24f64, 6f64, 0.5f64, 1.5f64];" without getting the number of elements to be part of the type?
[18:55:34] <tcsc> zslayton: let data = ~[5f64, 24f64, 6f64, 0.5f64, 1.5f64];
[18:55:51] *** Quits: timot (timot@moz-7A0CF85F.cust.telenor.se) (Ping timeout)
[18:56:12] <zslayton> Unfortunately, that produces ~[f64], and the compiler tells me that Stats isn't implemented for ~[f64] 
[18:56:27] <tcsc> what is it implemented for?
[18:56:29] <zslayton> (And that I can't dereference a vector to make it [f64], which makes sense.)
[18:56:42] <zslayton> Only for [f64], not for ~[f64]
[18:56:57] <Blei> [f64] doesn't really exist
[18:57:18] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:57:18] <Blei> either it's a fixed sized vector, or one of &[] ~[] @[]
[18:57:39] <Blei> in this case &[]
[18:58:02] <zslayton> That's what I had been thinking, thanks.
[18:58:13] <zslayton> So I guess the trait hasn't really been used
[18:58:24] <Blei> rusti: use extra::stats::Stats; let a = [1.0, 2.0]; a.mean()
[18:58:25] -rusti- 1.5
[18:58:51] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[18:58:59] <strcat> it would be really neat to make all of the code samples in the tutorial, etc. actual editable/executable blocks
[18:59:13] <strcat> would need a whole bunch of ram for the rustc sandbox atm though
[18:59:25] <strcat> stupid rustc starts off at 70MiB and quickly climbs...
[18:59:44] <cmr> Or... rust interpreter in js!
[18:59:54] <strcat> rustc in js? good luck ;p
[19:00:01] <cmr> Compile rustc and llvm with asm.js
[19:00:05] <Blei> emscripten to the rescue
[19:00:06] <cmr> sounds like a great idea
[19:00:25] <strcat> cmr: you realize how big it'll be? ;p
[19:00:37] <strcat> every visitor to the web page would have a 200MiB dl
[19:00:38] <Blei> sounds like hundreds of megabytes of js code
[19:00:50] <cmr> at least
[19:00:55] <cmr> probably more
[19:00:57] <strcat> I don't think any browser will actually allow that
[19:01:16] <thiez> a web-based version of our cute bot rusti might help
[19:01:17] <tcsc> are ~T and @T guaranteed to be the same size as *T?
[19:01:22] *** Joins: alffff (alffff@moz-B073F446.cust.dsl.teletu.it)
[19:01:22] <strcat> thiez: I made one
[19:01:28] <strcat> thiez: just needs to be deployed to rust-lang.org
[19:01:41] <thiez> engage, warp 9?
[19:01:41] <cmr> tcsc: I don't think anything is /guaranteed/
[19:01:42] <holli> well somebody ported a linux kernel to javascript...
[19:01:57] <cmr> holli: correction: an emulator that ran the linux kernel
[19:02:13] <holli> i tried to compile perl on it. didnt work :D
[19:02:14] <tcsc> cmr: hm. is it reasonably likely to stay true?
[19:02:16] <strcat> holli: the linux kernel is tiny though
[19:02:22] <strcat> rustc is a monster
[19:02:38] <strcat> tiny as in how big it is without drivers + the amount of memory it needs
[19:02:50] <tcsc> i think i remember llvm not compiling with emscripten
[19:02:57] <holli> it included shell and a c compiler
[19:03:00] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[19:03:03] <strcat> holli: tcc and a tiny shell
[19:03:04] <cmr> rusti: use a = std::sys::size_of; (a::<*int>(), a::<~int>(), a::<@int>())
[19:03:06] -rusti- (8, 8, 8)
[19:03:15] <strcat> holli: tcc just translates right to assembly, it's tiny/simple
[19:03:27] <strcat> doesn't optimize, so it doesn't have to build an intermediate form
[19:03:31] *** Quits: alffff (alffff@moz-B073F446.cust.dsl.teletu.it) (Quit: )
[19:03:54] <tcsc> someone clearly needs to write tllc
[19:04:26] <strcat> thiez: http://i.imgur.com/TiFSA1B.png :)
[19:04:40] *** Quits: rubber-duck (rubber-duc@moz-BE44FCC1.dsl.iskon.hr) (Ping timeout)
[19:04:53] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[19:05:11] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[19:07:03] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[19:09:26] <thiez> strcat: nice, much cleaner than pm'ing rusti :p
[19:10:03] <dcolish> I'm pretty confused why the second branch of this match returns () rather than the fn, https://gist.github.com/dcolish/5846147
[19:10:24] <cmr> dcolish: you want || { println("Hello" }
[19:11:27] <goffrie> strcat: is that a vi mode for firefox?
[19:11:34] <dcolish> well yes, but why does an inner fn not also work if they are both able to be passed as &fn()
[19:11:49] <cmr> dcolish: can you do `return bar`?
[19:12:39] <dcolish> ah that works a little better, the types are off but it does actually try to return something
[19:12:41] <engla> dcolish: fn doesn't create an object
[19:13:04] <dcolish> so fn has type ()
[19:13:08] <dcolish> similar to let?
[19:13:41] <cmr> It's not an expression
[19:13:46] <dcolish> also i was looking for the docs on fmt! to see if there's a way to print the type of an object
[19:13:58] <dcolish> hmm, i thought everything was an expressoin
[19:14:15] <tcsc> bah, why does extra::arena use the gc :(
[19:15:19] <cmr> tcsc: afaik it didn't even work until someone fixed it the past week
[19:15:26] <cmr> tcsc: it's probably old code, feel free to rewrite it
[19:15:49] <strcat> dcolish: yes it's vimperator
[19:16:13] <cmr> dcolish: http://static.rust-lang.org/doc/rust.html#statements
[19:16:34] <goffrie> strcat: did you mean me? :) also cool!
[19:16:41] <strcat> goffrie: err, yes
[19:16:48] <zslayton> I'm trying to pass a stack vector of f64 to a function that expects a parameter that implements Stats. http://pastebin.com/H1pxVkVU
[19:16:52] * dcolish was really confused
[19:17:27] <dcolish> cmr: ok that's really helpful, thanks!
[19:17:39] <zslayton> The error I get tells me that there's no impl for [f64 .. 5], only for [f64]
[19:18:19] <zslayton> (Or rather, I know there's an impl for &'self [f64] from reading the source)
[19:18:27] <cmr> dcolish: fmt! isn't really documented atm, because rustdoc is incapable, but there are comments in the source. https://github.com/mozilla/rust/blob/master/src/libstd/unstable/extfmt.rs#L11
[19:18:41] <heftig_> zslayton: use (data : &T) ?
[19:18:42] <zslayton> How should I rewrite that function header so that what I'm passing it meets its expectations?
[19:19:19] <cmr> zslayton: It's not impl'd for [f64], it's impl'd for &[f64]
[19:19:25] <cmr> but with the named lifetime 'self
[19:20:12] <zslayton> heftig_: error: mismatched types: expected `&<V3>` but found `[f64, .. 5]` (expected &-ptr but found vector)
[19:20:17] *** Joins: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de)
[19:20:29] <heftig_> also call it using &data, i guess
[19:20:31] <zslayton> cmr: Is this something that shouldn't be attempted until I have a thorough understanding of lifetimes?
[19:21:49] <zslayton> heftig_: That got me back to the original error, unfortunately.
[19:21:54] <cmr> zslayton: should be fine
[19:22:15] *** heftig_ is now known as heftig
[19:22:22] *** Joins: rjbailey (jake@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[19:22:26] * cmr takes a look
[19:22:34] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[19:23:07] <Blei> zslayton: print_stats(&data)
[19:23:13] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[19:23:20] <Blei> oh, ok
[19:24:10] <thiez> odd, I get a 'borrowed pointer must be valid for the static lifetime...' on a ~str value ><
[19:24:17] <zslayton> Blei: error: failed to find an implementation of trait extra::stats::Stats for &[f64, .. 5]
[19:24:32] <Blei> ah, i see
[19:24:58] <cmr> zslayton: https://gist.github.com/cmr/5846193
[19:25:34] <cmr> TYhere should be a printf!(...) macro that just expands to println(fmt!(...))
[19:25:35] <indutny> for some reason it take so long to build llvm in the cloud...
[19:25:46] <indutny> probably I've not enough memory for it
[19:25:50] <indutny> and it swaps out...
[19:26:10] <cmr> indutny: do you need it tested on linux? I can do it
[19:26:18] <Blei> zslayton: or alternatively: print_stats(data.slice(0, data.len()))
[19:26:21] <indutny> yeah, it'd be better this way :)
[19:26:24] <indutny> if its not that hard
[19:26:27] <indutny> for you
[19:26:47] <zslayton> cmr: That worked!
[19:26:55] <cmr> zslayton: I know, I made sure of it first :p
[19:26:58] <Blei> zslayton: sorry the differences between fixed length vectors and slices and @/~ vectors are not obvious
[19:27:27] <zslayton> Why is
[19:27:31] <cmr> zslayton: The reason is Stats is implemented for &[f64], so you need to pass it a slice.
[19:27:44] <cmr> (&[] is a slice)
[19:28:18] <zslayton> let data = [1f64, 2f64]; func(&data) different from let data = &[1f64, 2f64]; func(data);
[19:28:35] <zslayton> cmr: Thanks, I'll keep an eye for that going forward.
[19:29:02] <cmr> zslayton: &data is a borrowed pointer to a fixed-length vector, &[1f64, 2] is a slice
[19:29:28] <cmr> (you only need to type-annotate the first element, for the rest to be infered)
[19:29:55] <zslayton> cmr: Huh. Figures I'd run up against something corner-casey in my first program :P
[19:30:05] <zslayton> cmr: (Oh, duh. Thanks, that's really helpful.)
[19:30:05] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[19:30:36] <cmr> zslayton: If you're interested in numeric computing, we could probably use a lot of contributions in that area.
[19:30:53] *** Quits: Blei (philipp@moz-650B9C6A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[19:30:54] *** sam113101 is now known as sam113101_afk
[19:30:57] <cmr> Especially rewriting extra::bigint with either gmp bindings or something that's actually competitive performance-wise
[19:30:57] *** Quits: rjbailey (jake@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[19:32:06] *** sam113101_afk is now known as sam113101
[19:32:38] <zslayton> cmr: It's not a forte of mine per se, but I'd be happy to take a look once I get up to speed.
[19:32:54] * strcat has gmp bindings
[19:33:01] <zslayton> cmr: I just happened to see the "We could probably rewrite this more generally..." comment in stats and thought that'd be a good place to try my hand.
[19:33:03] <strcat> but gmp is LGPL
[19:33:08] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:33:13] <cmr> strcat: ah, pita
[19:33:39] <cmr> zslayton: Yeah, definitely
[19:34:11] *** Joins: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr)
[19:34:13] <MaikKlein> alexcrichton?
[19:34:18] <cmr> acrichto: ^
[19:34:35] <MaikKlein> thanks
[19:34:35] <cmr> indutny: compiles here!
[19:34:41] <indutny> great! :)
[19:34:41] <cmr> indutny: want me to r+?
[19:34:42] <indutny> finally
[19:34:47] <indutny> well, if you want to ;)
[19:34:49] <indutny> hehe
[19:34:51] <indutny> sure
[19:35:36] <MaikKlein> acrichto, I couldn't completely follow what you meant with io::Writer
[19:37:28] *** Quits: Defiler (wilson@moz-5531C57F.wb78.net) (Ping timeout)
[19:37:30] *** Quits: fabiand (fabiand@B06E58AA.B55F2281.3601B52B.IP) (Quit: Verlassend)
[19:43:26] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[19:45:05] <cmr> holy shit I can't believe that worked the first time
[19:45:09] <cmr> This is truly a milestone
[19:45:11] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[19:45:20] <MaikKlein> ?
[19:45:25] <cmr> https://gist.github.com/cmr/5846269 :D
[19:45:27] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[19:45:33] <cmr> strcat: mind reviewing that quickly?
[19:45:46] <cmr> Mostly the Interner trait
[19:48:50] <cmr> I don't think it should include find_equiv
[19:48:57] <cmr> Too specific
[19:49:46] *** Joins: doomlord_ (walter@moz-6651F8D4.range86-145.btcentralplus.com)
[19:50:29] *** Parts: doomlord1 (walter@moz-6651F8D4.range86-145.btcentralplus.com) (Leaving)
[19:52:24] *** Joins: Defiler (wilson@moz-5531C57F.wb78.net)
[19:53:20] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Ping timeout)
[19:54:51] *** Quits: MaikKlein (maik@moz-1DE1C7D5.dip0.t-ipconnect.de) (Ping timeout)
[19:57:48] <cmr> https://gist.github.com/cmr/4fb4b604a167920229cb I feel like that should work
[19:57:56] <cmr> but you need to use a type annotation an Interner::new()
[19:58:11] <cmr> Or, in this case, Foo::new()
[19:58:43] <strcat> cmr: why does it need Copy?
[19:58:49] <Lovot> Hi
[19:58:52] <cmr> In my second gist?
[19:58:59] <cmr> Or Interner
[19:59:10] <strcat> Interner
[19:59:28] <cmr> strcat: not sure tbh, mostly pulled it from the old one in libsyntax
[19:59:35] <cmr> SimpleInterner copies into its internal vec
[19:59:38] <indutny> em...
[19:59:40] <indutny> a bit stupid question
[19:59:40] *** Joins: it (it@moz-C885C25B.mit.edu)
[19:59:44] *** it is now known as itdaniher
[19:59:46] <indutny> is llvm saving scratch registers?
[19:59:49] <cmr> I can't imagine any other interner doing much different
[19:59:52] <strcat> cmr: at least for strings it should be done differently
[19:59:53] <indutny> i.e. r15
[20:00:07] <indutny> because right now it seems like it doesn't
[20:00:16] <cmr> strcat: Clone?
[20:00:31] <strcat> well I mean for strings it shouldn't have an internal array
[20:00:34] <cmr> ah
[20:00:40] <cmr> Why?
[20:00:51] <strcat> because it can just make one gigantic string
[20:00:54] <cmr> How else would it be done
[20:00:54] <strcat> and use slices into it
[20:00:57] <cmr> oh
[20:01:24] <strcat> assuming you're optimizing for reads and not inserts
[20:01:24] <cmr> I can do that in a StringInterner
[20:01:26] <cmr> good idea
[20:01:58] <cmr> A good assumption, for interners I think
[20:02:11] <indutny> ohâ€¦ it might be garbage collector...
[20:02:13] <strcat> cmr: it shouldn't use Copy/Clone though
[20:02:17] <strcat>  pub fn intern(&self, val: &T) -> uint {
[20:02:18] <indutny> godâ€¦ not this, please
[20:02:24] <strcat> if this needs ownership, it should take T
[20:02:24] <itdaniher> anyone familiar with building rust-sdl on the master branch of rust?
[20:02:30] <strcat> so you can avoid the copy if you have one you can move
[20:02:44] <strcat> and prefill should use Iterator<T>
[20:02:46] <strcat> so it won't need copy
[20:03:08] <itdaniher> I ran into an issue with a foldl error as per the log at http://itdaniher.com/p?EsRD.
[20:03:11] <indutny> so any llvm aware guy here?
[20:03:16] <indutny> strcat: I remember you was working on GC
[20:03:18] <itdaniher> error on github at https://github.com/brson/rust-sdl/issues/66
[20:03:30] <indutny> strcat: is there any way to disable it?
[20:03:32] <indutny> just to test
[20:03:35] <strcat> indutny: I wasn't
[20:03:39] <indutny> oh
[20:03:44] <indutny> I wonder who was...
[20:03:47] <strcat> gradon
[20:03:50] <strcat> graydon*
[20:04:13] <cmr> itdaniher: it probably needs another update
[20:04:18] <indutny> strcat: thanks
[20:05:47] *** Joins: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP)
[20:05:56] <cmr> strcat: I don't think it needs ownership
[20:06:03] *** Quits: tedh (tedh@moz-CE9B2F5A.cinci.res.rr.com) (Client exited)
[20:06:07] <strcat> cmr: shouldn't have a copy then
[20:06:09] <itdaniher> cmr: is there a non-bisect way of tracking down what broke it? don't have a fast enough computer to do a bunch of partial recompiles.
[20:06:16] <cmr> strcat: shold store a reference?
[20:06:19] <strcat> cmr: if you're making a copy, it needs ownership
[20:06:29] <strcat> it should be exposed in the signature instead of doing a copy
[20:06:37] <strcat> in signature -> can avoid copies in some cases
[20:06:40] <dcolish> is there a version of println that operates on the trait Str?
[20:06:41] <strcat> not in signature -> forced to always copy
[20:06:56] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[20:07:02] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[20:07:21] *** Quits: heftig (heftig@moz-9C5216F6.dip0.t-ipconnect.de) (Ping timeout)
[20:07:56] <cmr> itdaniher: it was probably strcat's vec cleanup. I think you want .iter().scan(...)
[20:07:59] <cmr> http://static.rust-lang.org/doc/std/iterator.html#struct-scaniterator
[20:08:02] <cmr> not sure
[20:08:19] <strcat> you want fold
[20:08:38] <itdaniher> strcat: vs foldl?
[20:08:50] <strcat> on an iterator, it's just called fold
[20:09:22] <Lovot> This is sort of a noobish  question, but does anyone know of any good windowing libraries that work with rust?
[20:09:54] <cmr> Lovot: there's glfw
[20:10:13] <cmr> Lovot: and sdl. if they don't do what you want, the answer is probably "no"
[20:10:34] <Lovot> cmr: thanks!
[20:10:42] <indutny> heh
[20:10:44] <indutny> my fault
[20:10:50] <indutny> forgot that r13-r15 are callee-save registers
[20:10:57] *** Quits: jga (asdf@C6DDBF98.79F9C1CA.B5524284.IP) (Ping timeout)
[20:11:00] <Lovot> cmr: I really appreciate the help
[20:11:04] <cmr> Lovot: np
[20:11:25] <strcat> rusti: let xs = [1, 2, 3, 4, 9, 11, -5, 2, 4]; xs.iter().fold(0, |a, b| a + *b)
[20:11:26] -rusti- 31
[20:11:48] <strcat> rusti: let xs = [1, 2, 3, 4, 9, 11, -5, 2, 4]; xs.iter().skip_while(|&x| *x < 9(.fold(0, |a, b| a + *b)
[20:11:48] -rusti- <anon>:10:4: 10:5 error: incorrect close delimiter: `}`
[20:11:49] -rusti- <anon>:10     };
[20:11:49] -rusti-               ^
[20:11:49] -rusti- application terminated with error code 101
[20:11:52] <strcat> rusti: let xs = [1, 2, 3, 4, 9, 11, -5, 2, 4]; xs.iter().skip_while(|&x| *x < 9).fold(0, |a, b| a + *b)
[20:11:53] -rusti- 21
[20:12:08] *** Quits: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net) (Ping timeout)
[20:12:45] <itdaniher> strcat: with my naive attempt to solve the problems...
[20:12:52] <itdaniher> ~/projects/cee/soc/rust-sdl Â± git diff | pasteMe
[20:12:52] <itdaniher> http://itdaniher.com/p?qhMH
[20:12:52] <itdaniher> ~/projects/cee/soc/rust-sdl Â± make 2>&1 | pasteMe
[20:12:52] <itdaniher> http://itdaniher.com/p?vbkW
[20:13:08] <strcat> you need to get an iterator
[20:13:11] <strcat> vectors don't have a fold method
[20:13:29] <cmr> So states.iter().fold
[20:14:28] <cmr> strcat: actually you're right it does need ownership, duh
[20:15:39] *** Joins: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[20:17:02] *** Quits: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP) (Quit: Bye)
[20:17:03] *** Joins: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP)
[20:17:26] *** Quits: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP) (Quit: Bye)
[20:17:28] <itdaniher> strcat: cmr: fixed it, thanks! I'll issue a pull request on the rust-sdl project.
[20:17:31] *** Joins: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP)
[20:17:37] <cmr> strcat: https://gist.github.com/cmr/5846269 better?
[20:17:41] *** Quits: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP) (Quit: Bye)
[20:17:44] *** Joins: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP)
[20:17:50] *** Quits: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP) (Quit: xLII)
[20:17:56] <cmr> Oops, forgot to update the gist
[20:18:09] <cmr> Or, write the file before I updated :p
[20:18:16] *** Joins: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP)
[20:18:54] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[20:19:21] <dcolish> is it bad to return owned pointers like here? https://gist.github.com/5846382
[20:19:27] <cmr> It ices though... error: internal compiler error: ty::Region#subst(): Reference to self region when given substs with no self region: substs(self_r=None, self_ty=Some('b), tps=['a])
[20:19:30] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[20:19:32] <dcolish> i cant get it to work with borrowed pointers
[20:19:54] <cmr> dcolish: No, and you can't return a borrowed pointer to a new vec.
[20:20:00] <cmr> Slice, actually.
[20:20:44] <dcolish> ok so when i return that owned ptr, ownership will be given to the assignment in the calling scope?
[20:21:16] <cmr> to whatever used it in the caller, yes.
[20:21:30] <dcolish> right, it could have been an argument to an fn
[20:21:53] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Ping timeout)
[20:22:50] <itdaniher> cmr: strcat: https://github.com/brson/rust-sdl/pull/67
[20:25:24] <dcolish> if i say fn foo<T:Str> (el: &T), should I be able to call el.to_str()? I think traits are confusing me a bit
[20:25:34] <cmr> dcolish: No, you want the ToStr trait
[20:25:40] <dcolish> ah
[20:25:59] <cmr> http://static.rust-lang.org/doc/std/str.html#trait-str
[20:26:01] <dcolish> welp, thats just too obvious
[20:28:06] *** Joins: jga (asdf@C6DDBF98.79F9C1CA.B5524284.IP)
[20:32:15] *** Quits: pyrac (pyrac@moz-9180E00E.w86-201.abo.wanadoo.fr) (Quit: pyrac)
[20:32:38] *** Joins: heftig (heftig@moz-9C5216F6.dip0.t-ipconnect.de)
[20:33:03] *** Joins: jpochyla (jpochyla@moz-8D99AE5D.broadband18.iol.cz)
[20:37:08] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[20:38:38] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:39:47] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[20:42:11] <cmr> strcat: filed the ice as https://github.com/mozilla/rust/issues/7331, kinda funky.
[20:43:19] <indutny> hm.. why this
[20:43:20] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:43:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/OjWCIg
[20:43:20] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:43:23] <indutny> rusti: trait XP {} trait YP {} trait X { fn p(&self); } trait Y { fn p(&self); } impl<P: XP> X for P { fn p(&self) {} } impl<P: YP> Y for P { fn p(&self) {} } struct S; impl XP for S {} let s = S; s.p();
[20:43:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HEgY
[20:43:48] <engla> yay it landed
[20:43:53] <indutny> type `S` does not implement any method in scope named `p`
[20:43:55] <strcat> indutny: method resolve is broken
[20:43:58] <strcat> it's reported already
[20:43:59] <indutny> oh
[20:44:01] <engla> strcat: thanks for landing it
[20:44:02] <indutny> ok
[20:44:04] <strcat> engla: np
[20:44:09] <indutny> I was trying to show another bug, actually :P
[20:45:17] *** Quits: xLII (xLII@EB48FE4C.3EE9CB41.81CDC09E.IP) (Ping timeout)
[20:46:16] <indutny> where is `ty` declared?
[20:46:23] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:46:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/UP-z2g
[20:46:23] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:46:23] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[20:46:24] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/cJasYA
[20:46:24] <ghrust> 13rust/06auto 14fcf3617 15Ben Blum: Add rules for assert, fail, and deriving to vim syntax file. Also highlight the mod path in "use module;" properly.
[20:46:24] <ghrust> 13rust/06auto 14394f455 15Ben Blum: Fix error messages in test cases, since fns/traits now pretty-print with a bounds list
[20:46:24] <ghrust> 13rust/06auto 14ce857e3 15Ben Blum: Parse and typecheck (not kindcheck) bounds on trait paths.
[20:46:26] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[20:46:32] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[20:46:32] *** ChanServ sets mode: +o brson
[20:46:50] <brson> cmr: great blog post today. I'm going to splat that link in a few places
[20:46:54] <doener> indutny: which one?
[20:46:58] <indutny> ah
[20:47:00] <indutny> well
[20:47:01] <cmr> brson: splat?
[20:47:04] <indutny> rustc::middle::ty
[20:47:12] <cmr> strcat: Do iterators handle the case where you can only iterate over something once?
[20:47:16] <cmr> Any iterator
[20:47:19] <indutny> or
[20:47:20] *** Quits: jga (asdf@C6DDBF98.79F9C1CA.B5524284.IP) (Ping timeout)
[20:47:20] <doener> indutny: that's a module. src/librustc/middle/ty.rs
[20:47:21] <indutny> is it a namespace?
[20:47:24] <indutny> ah, nice
[20:47:28] <cmr> It seems, with IteratorUtil exposing len_, it's not accounted for
[20:47:34] <strcat> cmr: hm?
[20:47:44] <strcat> you can only iterate over them once - that's right
[20:47:51] <brson> cmr: "paste"?
[20:48:00] <itdaniher> how do I specify rust crates / *.rc files manually as arguments to `rust build'?
[20:48:10] <cmr> brson: oh, "in a few places". I thought you said "in a few minutes"
[20:48:18] <strcat> lots of iterators could implement Clone though
[20:48:20] <strcat> most
[20:48:25] <engla> it must be this link  http://cmr.github.io/blog/2013/06/23/how-i-got-started-with-rust/
[20:48:27] <cmr> strcat: so len_ consumes the iterator?
[20:48:30] <strcat> cmr: yes
[20:48:52] <strcat> it's O(n), it's just a shortcut for a common thing you want to do
[20:49:41] <cmr> strcat: right, but I feel like, most of the time, you want to use an iterator that it is possible to (maybe) reset and reuse
[20:49:56] <strcat> cmr: it doesn't make sense for the Iterator abstraction
[20:49:58] <cmr> not sure what's running through my head right now is coherent :p
[20:50:12] <strcat> you can just copy the iterator if you want two
[20:50:23] <strcat> a vector iterator will be 2 pointers, copying it is cheap
[20:50:27] <cmr> The case I'm thinking of is like if someone makes an Iterator over a socket..
[20:50:55] <cmr> so .next() is a blocking operation, and irrevocable
[20:50:55] <brson> maybe the wiki should have a more prominent page about getting involved
[20:51:03] <brson> this has come up a few times recently
[20:51:16] <cmr> brson: Yup. Especially the "give me low hanging fruit" prompted me to write it
[20:51:21] <strcat> brson: or the site
[20:51:34] <strcat> github wikis handle navigation very poorly and don't have search
[20:51:36] <strcat> or a good index
[20:52:12] <cmr> strcat: Meh, I'll formulate my concerns in a more articulate manner sometime else
[20:53:06] <cmr> strcat: You suggested an Iterator for prefill, but I want to take the len_ of an Iterator to reserve enough space and then iterate over it
[20:53:13] <cmr> Although maybe that's what size_hint is?
[20:53:14] <strcat> cmr: there's size_hint
[20:53:15] * cmr looks for it
[20:53:22] <strcat> cmr: it gives a lower bound and an upper bound
[20:53:25] <strcat> you want the lower want
[20:53:26] *** Joins: jga (asdf@C6DDBF98.79F9C1CA.B5524284.IP)
[20:53:28] <strcat> lower bound*
[20:53:32] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[20:53:45] <steven_is_false> Would it make sense for rustc -o foo bar.o to link the bar.o object file to a final executable?
[20:53:56] <strcat> let (lower, _) = iter.size_hint(); let xs = vec::with_capacity(lower.get_or_zero())
[20:54:17] <cmr> "The common use case for the estimate is pre-allocating space to store the results."
[20:54:26] * cmr feels bad for not seeing it now
[20:54:31] <strcat> cmr: I just added it
[20:54:35] <strcat> like... yesterday
[20:54:39] <strcat> first default method in the codebase
[20:54:40] <strcat> ;p
[20:54:42] <cmr> heh
[20:54:56] <strcat> sully got them working well enough for that
[20:56:07] <strcat> when we make Iterable, we can have default methods for things like hold
[20:56:08] <strcat> fold*
[20:58:44] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[21:00:08] <cmr> Hm, is there any way for `prefill` to be a default method? With https://gist.github.com/cmr/5846269 I get:
[21:00:13] <cmr> interner.rs:25:17: 25:30 error: cannot determine a type for this bounded type parameter: unconstrained type
[21:00:16] <cmr> interner.rs:25         let in = Interner::new();
[21:00:34] <cmr> I had tried Self::new() earlier but that didn't work either
[21:00:36] <strcat> they don't work very well with generics
[21:01:03] <cmr> Oh, maybe in: Self
[21:01:13] <cmr> yup
[21:01:16] <cmr> and an ICE :p
[21:01:21] <strcat> cmr: also you probably want the U type bound on the method
[21:01:22] <strcat> not the impl
[21:01:30] <strcat> fn foo<U: Foo>(&self) { ... }
[21:01:39] <strcat> but I don't think type bounds work on default methods yet
[21:01:42] <strcat> on a normal method it would
[21:02:30] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:03:35] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Quit: leaving)
[21:03:46] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Quit: victorporof)
[21:03:53] <cmr> rust: task failed at 'index out of bounds: the len is 0 but the index is 0', /home/cmr/hacking/rust/src/librustc/middle/subst.rs:58
[21:03:56] <cmr> bah
[21:04:06] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[21:04:06] *** ChanServ sets mode: +o brson
[21:04:08] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Quit: brson)
[21:06:17] <strcat> cmr: rustc <3
[21:06:22] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[21:07:43] <indutny> rusti:   trait P { } trait PHelper { fn push(&self, v: u64); } impl<A: P> PHelper for A { fn push(&self, _: u64) { } } let mut x : ~[u8] = ~[]; x.push(1);
[21:07:44] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/bZHJ
[21:07:55] <indutny> ok, here it goes
[21:08:49] <cmr> indutny: you can just do "impl PHelper for P"
[21:08:58] <indutny> huh, really?
[21:09:00] <cmr> mhm
[21:09:09] <indutny> rusti:   trait P { } trait PHelper { fn push(&self, v: u64); } impl PHelper for P { fn push(&self, _: u64) { } } let mut x : ~[u8] = ~[]; x.push(1);
[21:09:10] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/NRFa
[21:09:16] <indutny> no
[21:09:17] <indutny> I can't
[21:09:26] <cmr> oh P is a trait
[21:09:29] <cmr> nevermind
[21:09:29] <indutny> yes
[21:09:32] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Ping timeout)
[21:09:38] <cmr> (sorry :p)
[21:09:42] <indutny> so basically it tries to use P from PHelper
[21:09:43] <indutny> err
[21:09:46] <indutny> push from PHelper
[21:09:52] <indutny> where should definitely be push from vec
[21:10:11] <indutny> I wonder why error happens in vtable
[21:10:13] <indutny> not in method.rs
[21:11:13] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[21:12:29] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[21:14:24] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130617145905])
[21:20:41] <kemurphy> strcat: do you know what causes glue to run on ~ pointers? looks like take and drop involve a copy and a free, which kinda confuses me
[21:21:05] <strcat> drop should just be a free
[21:21:12] <strcat> take should copy the ptr and zero the source
[21:21:13] <strcat> afaik
[21:21:18] <cmr> kemurphy: ownership change, ie, move
[21:21:23] <strcat> and trans/uniq.rs handles actual copies
[21:21:50] <strcat> http://strcat.zapto.org:8000/ <- evalbot demo
[21:22:39] <kemurphy> ah, i must have misread, it looked to me like a deep copy was happening
[21:22:55] <kemurphy> if drop does the free, then what's the free glue do?
[21:22:57] <kemurphy> also, visit?
[21:23:16] <strcat> I think the drop glue just calls the free glue
[21:23:23] <strcat> it's all a mess
[21:23:29] <strcat> worst bit of rustc
[21:23:33] <strcat> generates invalid IR
[21:23:35] <strcat> ;\
[21:23:41] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[21:23:45] <kemurphy> ah, i see :/
[21:24:23] <kemurphy> what causes the different kinds of glue to be invoked?
[21:24:29] <cmr> strcat: now highlight the line and column(s) where errors occur and have a tooltip with the error message ;P
[21:24:38] <strcat> kemurphy: glue drop is how destructors are implemented
[21:24:50] <strcat> cmr: pfft, that sounds like more than a trivial bit of work :D
[21:25:07] <cmr> Diagnostics need a json outputter
[21:25:28] <cmr> actually that shouldn't be too hard I think...
[21:25:29] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[21:25:32] <strcat> hm?
[21:25:37] <strcat> oh
[21:25:39] <strcat> you mean for rustc
[21:25:41] <cmr> yeah
[21:25:51] <strcat> well the problem is that rustc is running in a container along with the program
[21:25:57] <strcat> so I can't really distinguish their output
[21:26:02] <strcat> I could wrap them I guess
[21:26:29] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:27:06] *** Quits: holli (Mibbit@moz-2A665AD5.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:27:18] <cmr> or write "-----RUSTC OUTPUT ENDS-----" :p
[21:29:02] *** Joins: josh (josh@moz-2798B279.public.wayport.net)
[21:29:52] <josh> I'm trying to iterate over rust strings that can contain 0-width charactesr, using a loop and str.char_at
[21:30:18] <josh> whenever I hit a 0-width char the program asserst because of "assert!((w != 0u));" in str.rs
[21:30:26] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[21:30:33] <josh> how can I safely iterate through a string and avoid that assertion?
[21:31:11] <kimundi> josh: What exactly is a 0-width character?
[21:31:45] <josh> whaterver causes utf8_char_width in str.rs to return 0u
[21:32:02] <josh> so this, for example: if byte < 192u { return 0u; }
[21:32:09] <kimundi> ouh, that would be an invalid one then, I guess
[21:32:11] <Eridius> a 0-width character is an invalid character
[21:32:13] <Eridius> you have a bad string
[21:32:27] <cmr> josh: Rust strings are defined to be valid utf-8
[21:32:39] <cmr> If it's not valid utf-8, you don't have a string
[21:32:40] <kimundi> seeing how the valid range is 1-4 bytes for a utf8 encoded codepoint
[21:32:48] <strcat> strings are not implement right though
[21:32:54] <strcat> many holes allowing in invalid utf-8
[21:33:59] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[21:34:00] <josh> I'm getting my string from reading a line in a file
[21:34:17] <josh> how would one reasonably protect themselves from this assertion?
[21:34:20] <strcat> josh: lots of the io/string code is incorrect
[21:34:25] <strcat> you shouldn't be able to make an invalid string
[21:34:34] <strcat> if it's not utf-8, use [u8]
[21:34:36] <cmr> You'd want to use an ~[u8] rather than a str
[21:34:37] <josh> at least not this way, I'd think
[21:34:54] <josh> should I file a but about something here?
[21:35:37] <cmr> josh: it's really "raindrop in the ocean" by now, but nobody cleans up the io code because it's all being tossed out when the new runtime arrives..
[21:36:23] <josh> thanks for the info
[21:36:31] *** Quits: josh (josh@moz-2798B279.public.wayport.net) (Quit: josh)
[21:37:03] <indutny> I just wonder
[21:37:09] <indutny> what does "tys" name mean?
[21:37:15] <indutny> similar?
[21:37:28] <cmr> types?
[21:38:09] <indutny> em...
[21:38:21] <indutny>     fn tys(&self, a: ty::t, b: ty::t) -> cres<ty::t> {
[21:38:26] <indutny> types?
[21:38:39] <indutny> it looks like checking if they have the same subtype
[21:38:44] <indutny> and returning it
[21:38:57] <cmr> good luck deciphering it :p
[21:39:02] <cmr> if you figure it out you should leave a comment
[21:39:19] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[21:39:22] <strcat> bblum: failed again :(
[21:39:40] *** Quits: jga (asdf@C6DDBF98.79F9C1CA.B5524284.IP) (Ping timeout)
[21:40:08] <bblum> i can't say i'm surprised
[21:40:11] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[21:40:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c1e8b59 to 14cb58b19: 02http://git.io/N3iJvQ
[21:40:12] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[21:40:16] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[21:40:16] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/LN9f9A
[21:40:16] <ghrust> 13rust/06auto 1447ad560 15Alex Crichton: Rename all files with the 'rc' extension
[21:40:16] <ghrust> 13rust/06auto 14468d9a3 15Alex Crichton: Add the `warnings` lint attribute
[21:40:16] <ghrust> 13rust/06auto 14c964390 15Alex Crichton: Deny common lints by default for lib{std,extra}
[21:40:18] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[21:40:32] <indutny> :)
[21:40:35] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[21:40:43] <indutny> cmr: it seems to be very important code, btw
[21:40:45] <bblum> oh they failed pretty-print
[21:40:59] <bblum> that means i'm getting there
[21:43:06] *** Joins: josh (josh@9219ADAB.F74F8F08.14D1B0B.IP)
[21:44:32] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[21:44:54] *** Quits: josh (josh@9219ADAB.F74F8F08.14D1B0B.IP) (Quit: josh)
[21:45:04] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[21:45:08] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[21:45:12] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[21:49:14] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:49:14] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/nHI88Q
[21:49:14] <ghrust> 13rust/06auto 147d40fad 15Fedor Indutny: libc: support functions from sys/mman.h...
[21:49:14] <ghrust> 13rust/06auto 1484ba4bf 15Fedor Indutny: libc: add POSIX-compatible sysconf consts...
[21:49:14] <ghrust> 13rust/06auto 14398cc46 15Fedor Indutny: libc: (u)int => c_(u)int for consts
[21:49:16] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:49:20] <indutny> oh
[21:49:21] <indutny> finally
[21:49:30] <indutny> this tys() thing makes me cry
[21:49:33] <indutny> and kittens die
[21:49:49] <indutny> it seems that trait's impl abstract type doesn't have any type bounds
[21:49:54] <indutny> and probably that's correct
[21:50:02] <indutny> because I'm not aware of terminology
[21:50:22] <indutny> its just trait dependencies that rust isn't taking in account
[21:51:02] <indutny> ah
[21:51:09] <indutny> there're no such information here :P
[21:51:09] <indutny> nice
[21:52:00] <indutny> I think as a possible solution
[21:52:05] <indutny> I might just add filtering
[21:52:12] <indutny> when collecting candidates
[21:52:36] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[21:53:19] <illissius> bah. why is software so complicated all the time
[21:54:45] <cmr> illissius: because people are bad at writing it :p
[21:54:58] *** Joins: josh (josh@9219ADAB.F74F8F08.14D1B0B.IP)
[21:55:35] <indutny> :)
[21:55:36] *** Quits: igl1 (igl@moz-3485F8C3.adsl.alicedsl.de) (Ping timeout)
[21:55:39] <indutny> say it to graydon
[21:55:47] <indutny> no offense
[21:55:54] <kemurphy> strcat: any idea what's up with tvec and why it seems to handle allocation separately?
[21:55:54] <indutny> but it seems that he have terrible sense of beauty
[21:55:57] <indutny> when it comes to naming
[21:56:03] <strcat> kemurphy: tvec is some old weird thing
[21:56:07] <strcat> don't know if it's still used
[21:56:49] *** Joins: igl (igl@moz-1C2169A4.adsl.alicedsl.de)
[21:57:20] <kemurphy> strcat: it appears to be
[21:57:26] <strcat> where is it used?
[21:57:27] <kemurphy> strcat: there are calls to tvec::trans_uniq_or_managed_vstore in expr
[21:57:37] <kemurphy> and a few others
[21:57:50] <kemurphy> also some references in glue and base
[21:58:01] <strcat> should be ripped out
[21:58:29] <kemurphy> cool, that makes life a little easier
[21:58:37] *** Joins: jga (asdf@D8473366.7B844B5A.C9AB4801.IP)
[22:01:02] <indutny> strcat: sorry, I know I asked it before
[22:01:09] <indutny> but how can I recompile rust at the last stage
[22:01:16] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:01:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147c643ee to 14cb58b19: 02http://git.io/N3iJvQ
[22:01:16] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:01:16] <indutny> skipping all previous stuff
[22:01:17] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[22:01:17] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/FE-4Zw
[22:01:17] <ghrust> 13rust/06auto 14fcf3617 15Ben Blum: Add rules for assert, fail, and deriving to vim syntax file. Also highlight the mod path in "use module;" properly.
[22:01:17] <ghrust> 13rust/06auto 14394f455 15Ben Blum: Fix error messages in test cases, since fns/traits now pretty-print with a bounds list
[22:01:18] <ghrust> 13rust/06auto 14ce857e3 15Ben Blum: Parse and typecheck (not kindcheck) bounds on trait paths.
[22:01:20] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[22:01:37] <strcat> indutny: dunno, make the-stage-you-want NO_REBUILD=1 ?
[22:01:46] <bblum> i put xfail-pretty on the pretty tests that failed >_>
[22:01:50] <indutny> thanks!
[22:01:53] <bblum> i will deal with that later'
[22:01:55] <bblum> not on the weekend. :x
[22:03:01] <indutny> oh noes
[22:03:04] <indutny> it doesn't work :(
[22:03:08] <indutny> any other suggestions?
[22:03:14] <indutny> I just want to do a quick patch and test it
[22:03:21] <indutny> without 15 minutes build
[22:04:36] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[22:04:53] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[22:04:53] *** ChanServ sets mode: +o brson
[22:05:05] <strcat> indutny: make check-stage1 ?
[22:05:42] <indutny> hm...
[22:05:45] <indutny> it still starts with stage0
[22:06:04] <cmr> indutny: then you changed something that requires a rebuild.
[22:06:14] <indutny> definitely yes
[22:06:19] <indutny> but can't I just recompile it on last stage?
[22:06:28] <indutny> its just some extra debugging in rustc::middle
[22:06:56] <cmr> Why is doing the last stage any different than doing the first? :)
[22:07:04] <cmr> You can run the intermediate compiler
[22:07:10] <indutny> oh, really?
[22:07:20] <indutny> :)
[22:07:21] <cmr> it's in $arch/stage0/bin/rustc
[22:07:26] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[22:08:26] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Quit: WeeChat 0.4.2-dev)
[22:09:04] <kemurphy> strcat: i'm gonna try to rip out tvec, what does ast::expr_vstore represent?
[22:09:21] <strcat> don't know, vector storage type?
[22:09:22] *** Quits: josh (josh@9219ADAB.F74F8F08.14D1B0B.IP) (Quit: josh)
[22:09:38] <cmr> Maybe [, ..n]?
[22:10:10] <cmr> Nope, vectore storage type is right
[22:10:20] <cmr> (see print_vstore and print_expr_vstore)
[22:13:24] <kemurphy> yeah, tvec::trans_uniq_or_managed_vstore handles all the ast::expr_vstore cases in trans_rvalue_datum_unadjusted
[22:13:36] <kemurphy> i'm not sure what else would go in its place
[22:16:43] <indutny> please_check_that_trait_methods_are_implemented
[22:16:45] <indutny> hahahahaha
[22:17:49] <Jeaye> rusti: let x: Option<int> = None; println(fmt!("%? %?", sys::size_of::<int>(), sys::size_of(x)));
[22:17:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RKTA
[22:18:38] <Jeaye> rusti: use std::sys; let x: Option<int> = None; println(fmt!("%? %?", sys::size_of::<int>(), sys::size_of(x)));
[22:18:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FJVM
[22:19:19] <Jeaye> rusti: use std::sys; println(fmt!("%? %?", sys::size_of::<int>(), sys::size_of::<Option<int>>()));
[22:19:20] -rusti- 8 16
[22:19:20] -rusti- ()
[22:19:43] *** Quits: jpochyla (jpochyla@moz-8D99AE5D.broadband18.iol.cz) (Ping timeout)
[22:19:45] <acrichto> r? https://github.com/mozilla/rust/pull/7113
[22:19:54] <Jeaye> So Option is not a valid option for saving memory. :|
[22:20:01] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:20:10] <strcat> acrichto: r+
[22:20:13] <strcat> Jeaye: what do you mean?
[22:20:15] <acrichto> strcat: woo thanks
[22:20:26] <strcat> Option<int> is strictly more information than int
[22:20:37] <strcat> there aren't any spare bits in int to use
[22:21:00] <strcat> rusti: std::sys::size_of::<~(int, int)>()
[22:21:01] -rusti- 8
[22:21:05] <strcat> rusti: std::sys::size_of::<Option<~(int, int)>>()
[22:21:06] -rusti- 8
[22:21:13] <strcat> the only special case is non-nullable pointers
[22:21:29] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[22:21:38] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[22:21:43] <Jeaye> strcat: I want a block of 500*500*500 objects that may or may not contain other objects. I was hoping to save some memory by having the objects that aren't holding other objects smaller than those that do.
[22:22:00] <strcat> Jeaye: how big are the objects?
[22:22:22] <Jeaye> 16 bytes
[22:22:24] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[22:22:34] <Jeaye> It's 2GB of data right now. 
[22:22:35] <strcat> and what percentage are going to be not there?
[22:22:48] <Jeaye> Half, or more.
[22:23:03] <strcat> well if it's only half that aren't going to be there I don't see how you'd be able to save memory
[22:23:11] <Jeaye> A sparse 3D grid, if you will.
[22:23:16] <strcat> not very sparse ;p
[22:23:21] <Jeaye> heh
[22:23:24] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[22:23:54] <strcat> if the objects were huge, you could save memory with Option<~T>
[22:23:58] <strcat> but they're too small for that
[22:24:07] <strcat> if it was really sparse you could use a map instead of an array
[22:24:16] <strcat> but not sparse enough
[22:24:18] <strcat> ;[
[22:24:50] <Jeaye> I've been struggling with how to design this for about a week, a a number of failed attempts. >.<
[22:25:00] <Tad> Rust looks hard
[22:25:40] <Jeaye> Tad: Rust is a crooked hammer multitool. Building houses is hard.
[22:26:07] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[22:26:19] <tcsc> what exactly is the reason for an api using @~str? what's the practical difference between it and @str?
[22:26:24] <thiez> Jeaye: you could probably cheat with some unsafe code and some creativity
[22:26:26] <Tad> Jeaye, I wonder if rust can automate that
[22:26:42] <strcat> thiez: don't really think so
[22:26:51] <strcat> if it was possible with unsafe code, I don't see why safe code couldn't work
[22:27:04] <tcsc> coming from c++, @~str looks like std::shared_ptr<std::unique_ptr<std::string>>
[22:27:13] <enix> Is there some way to call a static method on a trait if in a generic function?
[22:27:24] <Jeaye> tcsc: It is, basically.
[22:27:30] <strcat> Jeaye: no, it's not
[22:27:34] <Jeaye> Oh?
[22:27:36] <strcat> it's like std::shared_ptr<std::string>
[22:27:43] <strcat> ~str is like std::string
[22:27:45] <strcat> ~[] is like std::vector
[22:27:48] <tcsc> what's @str?
[22:27:55] <Jeaye> Oh, yes. Because std::string is unique itself.
[22:28:01] <strcat> tcsc: like std::string but with shared ownership
[22:28:03] <Jeaye> Its internal data.
[22:28:07] <strcat> no API should have @~str
[22:28:07] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[22:28:28] <Jeaye> enix: I believe traits don't support static methods right now.
[22:28:29] <tcsc> it's in json some
[22:28:37] <strcat> well it shouldn't be
[22:29:04] <tcsc> i see
[22:29:15] <engla> strcat: I'm working on the monadic bind for iterators, some questions about what it should be named..  First, do we want the flatten operation or the flatten + map operation?  I think the latter is easier to understand. Secondly the question is what should it be called, chain_map is my suggestion but could be bind, concat_map, flat_map?
[22:29:25] <engla> strcat: and the code is here for context http://paste.debian.net/plain/12200
[22:29:39] <enix> ah, ok
[22:30:37] <strcat> engla: I think python calls that 'product', btw (but that's not what we should call it ;p)
[22:30:45] <strcat> oh wait no
[22:31:52] <strcat> engla: chain_map sounds fine though
[22:34:30] <engla> ok
[22:35:36] <strcat> the end of old_iter
[22:35:52] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[22:38:46] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:39:01] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[22:39:09] <strcat> /home/strcat/projects/rust/src/libsyntax/ext/pipes/pipec.rs:396:56: 396:57 error: mismatched types: expected `&fn(&ast::TyParam) -> bool` but found `&fn(&ast::TyParam) -> bool`
[22:39:14] <strcat> wat
[22:40:25] <sp3d> that's the best kind of compiler error
[22:40:56] <Jeaye> The kind that tells you the fix.
[22:40:56] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[22:41:00] <sp3d> maybe lifetimes aren't compatible?
[22:41:06] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[22:47:06] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[22:48:21] <xenocons> strcat: offtopic, can you recommend a xplatform disassembler lib
[22:48:39] <strcat> dunno, does gdb have a lib?
[22:51:38] <cmr> xenocons: llvm's mc :p
[22:51:53] <xenocons> hm
[22:52:02] <xenocons> ill check out the llvm one
[22:52:12] <xenocons> was looking into libdasm, but may only be nix
[22:52:15] <cmr> They might not actually have a disassembler yet.
[22:52:46] <xenocons> hmm
[22:52:54] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:53:00] <xenocons> there are so many to choose from
[22:53:17] <cmr> nope they do it seems
[22:53:20] <cmr> http://llvm.org/docs/doxygen/html/classllvm_1_1MCDisassembler.html
[22:53:35] <ruediger> strcat: no, but it has a "machine interface" (info "(gdb) GDB/MI")
[22:53:52] <xenocons> cmr: this looks interesting
[22:54:38] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[22:54:53] <xenocons> source compiles are a problem though having llvm as a dep
[22:55:14] <xenocons> but not too bad (at least at home, where llvm compilers properly, heh)
[22:55:27] <cmr> xenocons: well I imagine you can usually depend on the system llvm
[22:55:28] <xenocons> compiles*
[22:55:55] <xenocons> cmr: yeah, and i dont vision people other than me using my tools, but i like the 0 dependency thing
[22:56:03] <xenocons> (hence was looking at libdasm)
[22:56:08] <xenocons> but this is kinda offtopic, so ill stop
[22:56:43] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[22:56:59] *** Joins: mib_v8k4pw (Mibbit@moz-C42E3CCF.dyn.optonline.net)
[22:58:08] <xenocons> llvm-mc looks so cool :( heh!
[22:59:08] <brson> I concentrated newbie ideas here: https://github.com/mozilla/rust/wiki/Note-guide-for-new-contributors
[22:59:19] <brson> And linked it from the wiki home https://github.com/mozilla/rust/wiki
[22:59:49] <xenocons> nice!
[22:59:58] <brson> Needs a better path to that page from rust-lang.org though ...
[23:00:20] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[23:00:23] <brson> contributions to the wiki page for new contributors welcome
[23:00:24] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:01:00] *** Quits: mib_v8k4pw (Mibbit@moz-C42E3CCF.dyn.optonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:01:25] *** Quits: webber46 (webber46@moz-98D2F3C5.cust.bredband2.com) (Quit: webber46)
[23:06:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:13:01] *** Joins: enticeing (user@1983AA36.E4834407.EAAB5301.IP)
[23:13:51] <enticeing> i have a c function that takes a string as a pointer to a c_uint, what's the easiest way to give that a rust string?
[23:14:17] <bblum> YES
[23:14:19] <bblum> i got my PR in.
[23:14:39] <strcat> bblum: just wait for the power surge
[23:14:40] <bblum> oh wait, it's still testing
[23:14:52] <bblum> it just merged ok, which is old news
[23:16:36] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:17:58] <strcat> so close to no more old_iter
[23:19:53] *** Joins: tav (tav@moz-5ED3AF3C.range86-152.btcentralplus.com)
[23:25:15] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[23:26:16] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[23:28:25] *** Joins: jpochyla (jpochyla@moz-8D99AE5D.broadband18.iol.cz)
[23:28:30] <dcolish> Would I use uv_iotask as 'use extra::uv_iotask'? it doesnt seem to be found under that or 'std::iotask'
[23:29:19] <yichoi> 
[23:29:20] <enticeing> it should be use extra::uv_iotask
[23:30:18] *** Quits: jpochyla (jpochyla@moz-8D99AE5D.broadband18.iol.cz) (Ping timeout)
[23:30:23] <dcolish> hmm i built off master a few days ago and its not finding it. i get this instead https://gist.github.com/dcolish/5846918
[23:32:04] <enticeing> you need `extern mod extra;`
[23:32:09] <enticeing> it's in the first error message
[23:32:59] <steven_is_false> I know the variable for debugging is something similar to RUSTLOG does anyone remebber what it is?
[23:33:41] <steven_is_false> Ah, RUST_LOG
[23:37:09] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[23:37:15] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[23:37:52] <strcat> rusti: let mut set = extra::treemap::TreeSet::new(); set.insert(5); set.insert(6); let xs: ~[int] = set.iter().collect(); xs
[23:37:56] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RcRL
[23:38:16] <strcat> rusti: let mut set = extra::treemap::TreeSet::new(); set.insert(5); set.insert(6); let xs: ~[int] = set.iter().transform(|&x| x).collect(); xs
[23:38:20] -rusti- ~[5, 6]
[23:38:31] *** aatch|gone is now known as aatch
[23:38:38] <strcat> aatch: \o
[23:38:52] <dcolish> enticeing: oh i thought that was an issue with the extra lib or something
[23:39:00] <aatch> strcat, 'eyo
[23:39:32] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[23:40:43] <strcat> aatch: still need to fix the take glue thing for the drop flag one
[23:40:53] <strcat> pcwalton didn't see my comment I guess
[23:41:03] <aatch> strcat, I know. I was going to do it. Didn't expect pcwalton to approve it.
[23:41:18] *** Joins: int3_ (int3_@moz-C0E38A24.dsl.static.sonic.net)
[23:41:43] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Ping timeout)
[23:42:23] <aatch> I don't think there's any major code that will be affected by it though, since I only changed AtomicOption and Rc
[23:42:49] <strcat> yeah and I don't think I have a test case in rc that will catch it
[23:43:07] <aatch> Well it shouldn't matter for the smart pointers, right?
[23:43:13] <strcat> need something like 'let x = Rc::new(5); let y = x; /* x should be zero, so the destructor knows not to run */'
[23:43:15] <strcat> aatch: it does matter
[23:43:29] <strcat> aatch: oh, maybe moving already zeroes the source
[23:43:33] <strcat> don't know
[23:43:39] <strcat> aatch: anyway, should rm the zeroing in drop glue
[23:43:50] <strcat> drop glue only runs once for a *variable*
[23:43:57] <strcat> the issue is that moves act as shallow copies
[23:44:49] <strcat> now time for stdtest to fail and ruin this all
[23:44:58] <aatch> strcat, all what?
[23:45:04] <strcat> removing old_iter
[23:45:12] <aatch> Ah, so close!
[23:45:16] <strcat> [old_iter 43f78b5] remove old_iter
[23:45:17] <strcat>  22 files changed, 120 insertions(+), 549 deletions(-)
[23:45:22] <aatch> :D
[23:45:24] <strcat> then I have some more each methods to rm
[23:45:37] <enticeing> aatch: i'm having trouble getting strings into a format that ncurses likes
[23:46:33] <aatch> enticeing, ok. (I don't know anything about ncurses)
[23:46:56] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[23:47:06] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[23:47:53] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[23:48:40] <enticeing> well, it wants a string as *uint, or something along those lines
[23:48:50] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[23:49:35] <aatch> enticeing, ok, is this an ncurses foreign fn?
[23:49:41] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[23:50:26] *** Quits: spider-mario (spidermari@moz-B8FA2FF4.rev.sfr.net) (Input/output error)
[23:54:08] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[23:56:09] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[23:56:49] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[23:57:16] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (Ping timeout)
[23:59:02] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Quit: Leaving)
[23:59:03] <enticeing> aatch: it is
[23:59:12] <aatch> enticeing, ok, which one?
