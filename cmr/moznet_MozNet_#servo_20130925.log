[00:00:09] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: mccr8)
[00:00:19] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[00:01:43] *** Quits: Jayflux (Jason@moz-F0033527.as13285.net) (Quit: Leaving)
[00:02:28] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[00:06:55] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:11:07] <pcwalton> tikue_: no
[00:11:07] <pcwalton> t
[00:11:15] <pcwalton> they're a 3,000 line patch
[00:11:22] <tikue_> oh wow
[00:11:52] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[00:14:11] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:19:00] *** Quits: exobit_ (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:20:13] <pcwalton> the first "kung_fu_death_grip" member will land in servo
[00:20:15] <pcwalton> temporarily
[00:27:20] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[00:30:26] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Connection reset by peer)
[00:30:27] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[00:32:03] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:34:30] <kmc> the "don't crash or hang on exit" patches are looking good again, on top of (some version of) pcwalton's CPU rendering patches
[00:34:37] <pcwalton> awesome
[00:34:46] <kmc> there's still a rare crash from destroying textures on the wrong OS thread
[00:35:02] <kmc> but it's no longer wrapped up with the Azure X drawtarget stuff, so I think we can address that separately
[00:35:05] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:35:13] <kmc> the downside is that we can't just call glXMakeCurrent because we don't have X state
[00:37:14] *** Quits: alp (alp@moz-D1CEC204.com) (Ping timeout)
[00:37:31] *** Joins: alp (alp@moz-D1CEC204.com)
[00:39:56] *** Joins: Guest__ (foo@moz-90D1B547.nycmny.fios.verizon.net)
[00:41:26] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:41:42] *** Joins: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net)
[00:42:16] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[00:43:03] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:46:52] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[00:48:27] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:57:15] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[01:02:13] *** kimundi is now known as zz_kimundi
[01:03:36] *** Quits: Adityab (Adityab@moz-1FD7C491.adsl.alicedsl.de) (Quit: Adityab)
[01:07:09] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[01:08:24] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[01:13:02] *** Quits: dbaron (dbaron@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[01:13:04] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:15:51] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:18:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:19:33] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[01:21:29] *** Joins: dzbarsky (Adium@76587571.D5562F02.B5C6E82B.IP)
[01:22:14] *** Quits: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP) (Ping timeout)
[01:22:20] *** Joins: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP)
[01:23:25] *** Quits: dzbarsky (Adium@76587571.D5562F02.B5C6E82B.IP) (Ping timeout)
[01:23:30] *** dzbarsky1 is now known as dzbarsky
[01:28:48] <pcwalton> the asm is starting to look a lot better
[01:28:58] <pcwalton> working on the cross crate struct inlining problem
[01:31:28] *** Quits: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[01:33:56] *** Joins: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP)
[01:34:39] *** Quits: dzbarsky (Adium@E5216EFC.D5562F02.B5C6E82B.IP) (Ping timeout)
[01:36:38] *** Quits: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP) (Ping timeout)
[01:37:05] *** bz_dinner is now known as bz
[01:37:23] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[01:37:24] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:38:05] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[01:38:47] *** Joins: dzbarsky (Adium@E5216EFC.D5562F02.B5C6E82B.IP)
[01:44:01] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:44:03] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[01:44:57] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[01:50:06] *** Joins: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP)
[01:50:20] *** Quits: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP) (Max SendQ exceeded)
[01:50:31] *** Joins: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP)
[01:50:45] *** Quits: dzbarsky1 (Adium@E5216EFC.D5562F02.B5C6E82B.IP) (Max SendQ exceeded)
[01:50:50] *** Quits: dzbarsky (Adium@E5216EFC.D5562F02.B5C6E82B.IP) (Ping timeout)
[01:51:23] *** Joins: dzbarsky (Adium@76587571.D5562F02.B5C6E82B.IP)
[01:53:49] *** Joins: dbaron (dbaron@moz-C566053C.dsl.dynamic.sonic.net)
[01:54:01] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:54:56] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[01:57:54] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:57:54] *** ChanServ sets mode: +o brson
[02:11:58] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[02:12:51] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[02:19:29] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Client exited)
[02:19:49] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[02:21:39] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Ping timeout)
[02:21:54] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[02:22:15] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[02:26:37] *** Quits: dzbarsky (Adium@76587571.D5562F02.B5C6E82B.IP) (Connection reset by peer)
[02:26:42] *** Joins: dzbarsky1 (Adium@76587571.D5562F02.B5C6E82B.IP)
[02:30:01] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:30:01] *** ChanServ sets mode: +qo dherman dherman
[02:33:00] *** Joins: dzbarsky (Adium@E5216EFC.D5562F02.B5C6E82B.IP)
[02:33:46] *** Quits: dzbarsky1 (Adium@76587571.D5562F02.B5C6E82B.IP) (Ping timeout)
[02:34:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:36:44] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:36:44] *** ChanServ sets mode: +qo dherman dherman
[02:37:31] *** Quits: zz_kimundi (kimundi@moz-C01E77F7.dip0.t-ipconnect.de) (Ping timeout)
[02:39:21] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[02:39:22] *** ChanServ sets mode: +o jdm
[02:39:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:41:17] *** Joins: zz_kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[02:41:19] *** zz_kimundi is now known as kimundi
[02:43:07] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[02:43:58] *** Quits: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[03:00:26] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:00:58] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:05:30] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:06:21] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:10:46] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:13:26] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[03:18:57] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:20:12] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:23:20] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:31:51] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:32:57] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:38:45] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[03:39:15] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:44:40] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:45:34] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:59:41] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:00:23] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:01:33] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[04:03:16] *** Quits: annevk (annevk@moz-451D5EF9.nyc.res.rr.com) (Input/output error)
[04:03:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:03:32] *** ChanServ sets mode: +qo dherman dherman
[04:06:06] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:08:47] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:17:27] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:18:22] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:24:45] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[04:25:18] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[04:25:18] <ghservo> [13servo] 15jdm closed issue #956: Shadowing a Window property on the global object yields undefined  02http://git.io/8-zTvw
[04:25:18] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[04:35:11] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:46:43] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[04:48:16] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:48:27] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:51:13] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:52:34] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:55:29] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[04:56:23] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:57:08] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:58:24] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[05:02:57] *** bz is now known as bz_sleep
[05:12:08] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[05:19:30] *** Joins: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net)
[05:24:35] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:30:49] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:30:54] *** Quits: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[05:31:13] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:31:30] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[05:33:18] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[05:34:01] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:35:03] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:36:53] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:38:19] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:40:17] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:41:02] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:44:49] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:44:55] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[05:45:37] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[05:45:39] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:58:54] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:59:37] *** Quits: dbaron (dbaron@moz-C566053C.dsl.dynamic.sonic.net) (Ping timeout)
[06:04:29] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[06:04:49] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[06:08:59] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[06:10:14] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[06:12:20] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[06:14:09] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[06:18:43] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[06:20:42] *** Joins: Ms2ger (Ms2ger@moz-9F30495E.ugent.be)
[06:20:48] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[06:23:11] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[06:23:11] *** ChanServ sets mode: +o jdm
[06:24:43] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[06:25:31] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[06:26:08] *** Joins: joshua_ (joshua@moz-45967CBE.emarhavil.com)
[06:40:27] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[07:01:22] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[07:02:45] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[07:04:23] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[07:12:52] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[07:16:43] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[07:18:28] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[07:23:05] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[07:29:49] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[07:32:08] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[07:33:04] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[07:33:12] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[07:33:13] <ghservo> [13rust-css] 15ryanhc opened pull request #36: Derive Clone for CSSTextDecoration (06master...06master)  02http://git.io/D4TsJg
[07:33:13] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[07:36:54] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[07:36:54] <ghservo> [13servo] 15ryanhc opened pull request #978: Cache font-style and text-decoration to speed up can_merge_with_box() (06master...06renderbox-cache)  02http://git.io/YpCSDA
[07:36:54] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[08:00:27] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[08:03:22] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[08:03:53] *** Joins: annevk (annevk@moz-451D5EF9.nyc.res.rr.com)
[08:05:44] *** Quits: annevk (annevk@moz-451D5EF9.nyc.res.rr.com) (Ping timeout)
[08:10:53] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Connection reset by peer)
[08:11:44] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[08:23:53] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[09:10:28] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[09:11:20] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[09:11:28] *** Quits: victorporof (victorporo@8AB918FF.D4B9BCD.9B1E38F4.IP) (Quit: victorporof)
[09:12:36] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Client exited)
[09:12:56] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[09:14:47] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Ping timeout)
[09:19:23] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[09:28:22] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:43:11] *** Joins: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se)
[09:46:28] *** Quits: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se) (Ping timeout)
[09:48:00] *** Joins: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se)
[09:54:48] *** Joins: victorporof (victorporo@77FE7E86.477C3F8E.79933D60.IP)
[09:59:43] *** Quits: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se) (Ping timeout)
[10:05:08] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[10:09:24] *** Joins: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se)
[10:28:45] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[10:29:05] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[10:33:39] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[10:38:39] *** Quits: Guest__ (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[10:46:28] *** Quits: Ms2ger (Ms2ger@moz-9F30495E.ugent.be) (Quit: bbl)
[11:03:16] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:05:40] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[11:05:44] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:07:35] *** Joins: mib_6yjons (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:08:25] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[11:08:29] *** Joins: saneyuki (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:08:54] *** Quits: mib_6yjons (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[11:17:27] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[11:19:14] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[11:19:41] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[12:02:34] *** Joins: victorporof_ (victorporo@77FE7E86.477C3F8E.79933D60.IP)
[12:03:37] *** Quits: victorporof (victorporo@77FE7E86.477C3F8E.79933D60.IP) (Ping timeout)
[12:05:26] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[12:19:00] *** Quits: dzbarsky (Adium@E5216EFC.D5562F02.B5C6E82B.IP) (Quit: Leaving.)
[12:20:55] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[12:26:45] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[12:50:58] *** Joins: annevk (annevk@moz-451D5EF9.nyc.res.rr.com)
[13:03:47] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-rc2)
[13:13:19] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[13:15:08] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Ping timeout)
[13:20:17] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[13:21:34] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[13:22:56] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[13:35:23] *** Joins: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net)
[13:35:43] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[13:35:43] *** ChanServ sets mode: +o jdm
[13:40:59] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[13:46:20] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:48:39] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:48:47] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[13:49:21] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[13:49:21] <ghservo> [13rust-css] 15metajack closed pull request #36: Derive Clone for CSSTextDecoration (06master...06master)  02http://git.io/D4TsJg
[13:49:21] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[13:49:21] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[13:49:21] <ghservo> 01[13rust-css01] 15metajack pushed 2 new commits to 06master: 02http://git.io/hjclrg
[13:49:21] <ghservo> 13rust-css/06master 14772bb2f 15Ryan Choi: Derive Clone for CSSTextDecoration
[13:49:21] <ghservo> 13rust-css/06master 146d44ce5 15Jack Moffitt: Merge pull request #36 from ryanhc/master...
[13:49:22] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[13:54:40] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[13:54:40] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/Wz8MSw
[13:54:40] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:54:42] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[13:54:42] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/-wSHjg
[13:54:42] <ghservo> 13servo/06auto 149a3a6f2 15Ryan Choi: Cache font-style and text-decoration to speed up can_merge_with_box()
[13:54:42] <ghservo> 13servo/06auto 14e79b7e3 15bors-servo: auto merge of #978 : ryanhc/servo/renderbox-cache, r=metajack
[13:54:43] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:59:03] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[14:00:12] *** Joins: dzbarsky (Adium@76587571.D5562F02.B5C6E82B.IP)
[14:00:57] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[14:01:14] *** Quits: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com) (Client exited)
[14:01:57] *** Joins: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com)
[14:02:01] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: Leaving)
[14:02:06] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[14:02:45] *** Joins: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be)
[14:05:44] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[14:13:23] *** Quits: dzbarsky (Adium@76587571.D5562F02.B5C6E82B.IP) (Quit: Leaving.)
[14:14:49] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Ping timeout)
[14:15:56] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[14:25:34] *** Quits: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se) (Ping timeout)
[14:27:52] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[14:28:00] *** Joins: dzbarsky (Adium@moz-C18D887D.wireless-pennnet.upenn.edu)
[14:31:32] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[14:37:55] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[14:38:33] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Quit: not allowed here any more)
[14:39:46] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[14:45:52] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Input/output error)
[14:46:40] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Quit: Leaving.)
[14:47:43] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[14:55:11] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[14:55:23] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[14:59:01] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[15:00:07] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:01:22] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: Leaving)
[15:01:25] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[15:01:32] *** Quits: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com) (Client exited)
[15:01:57] *** Joins: emi (rarity@moz-9FE842F.cpe.net.cable.rogers.com)
[15:06:24] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[15:07:28] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:14:54] *** bz_sleep is now known as bz
[15:15:55] *** Joins: dbaron (dbaron@moz-C566053C.dsl.dynamic.sonic.net)
[15:16:44] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[15:18:13] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[15:19:58] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[15:22:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:25:27] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[15:26:54] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[15:26:54] *** ChanServ sets mode: +o jdm
[15:28:55] *** Joins: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com)
[15:29:21] *** Quits: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com) (Max SendQ exceeded)
[15:30:33] *** Joins: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com)
[15:43:15] *** Quits: dzbarsky (Adium@moz-C18D887D.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[15:53:03] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[16:06:15] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[16:06:15] <ghservo> [13servo] 15luisbg closed issue #971: Compositor Tasks should only set states when there has been a state change.   02http://git.io/K1zXwQ
[16:06:15] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:09:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:13:43] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[16:25:01] *** jdm is now known as jdm|f00ding
[16:30:18] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[16:41:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:43:07] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[16:52:54] *** Joins: dzbarsky (Adium@moz-5D3A8D3F.wlan.wireless-pennnet.upenn.edu)
[16:59:28] *** Quits: saneyuki (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:01:45] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:09:29] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:09:29] *** ChanServ sets mode: +o pcwalton
[17:12:56] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:17:15] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[17:19:46] <pcwalton> we need to replace netsurf css soon
[17:19:51] <pcwalton> is what I've gotten out of this exercise :)
[17:20:08] *** Quits: dzbarsky (Adium@moz-5D3A8D3F.wlan.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[17:20:14] <pcwalton> I'm amazed I've gotten within 16% of Gecko with how inefficient our stack of CSS abstraction layers is
[17:22:55] *** Joins: dzbarsky (Adium@moz-5D3A8D3F.wlan.wireless-pennnet.upenn.edu)
[17:24:14] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:25:41] *** Joins: eholk (eholk@D555BD42.7EDA02CF.51B6877.IP)
[17:25:51] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[17:26:11] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[17:27:42] *** Quits: Guest (textual@moz-E06F46F0.corp.bitshelter.com) (Ping timeout)
[17:28:55] <pcwalton> ok, down to 13% slower than Gecko
[17:29:24] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:30:23] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[17:30:25] <SimonSapin> pcwalton: help welcome :)
[17:30:44] <pcwalton> sorry, don't mean to rush you :)
[17:31:10] <jgraham> How close is it it to WeBlinKit or Presto?
[17:31:16] <pcwalton> I haven't measured.
[17:31:17] * jgraham is just curious :)
[17:31:44] <SimonSapin> pcwalton: what are you measuring?
[17:32:03] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[17:32:43] *** Quits: eholk (eholk@D555BD42.7EDA02CF.51B6877.IP) (Ping timeout)
[17:33:18] <pcwalton> I'm measuring the 3 reflow passes in Servo vs. Gecko nsIFrame::Reflow() for https://gist.github.com/pcwalton/6695691
[17:34:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:34:41] <jgraham> Hmm, probably not easy to measure without code modifiactions
[17:35:13] <pcwalton> well, I think those two are fairly comparable
[17:35:20] <pcwalton> Reflow's goal is the same goal as our 3 traversals
[17:35:44] <pcwalton> I still have this nagging feeling that guess_width() is not optimal... that it is doing work that later passes also do
[17:35:48] <pcwalton> Gecko has caching for min/pref width
[17:35:56] <pcwalton> and has nsHTMLReflowMetrics
[17:35:58] <pcwalton> to cache stuff
[17:36:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:38:08] *** jdm|f00ding is now known as jdm
[17:38:26] <pcwalton> oops, I forgot another microoptimization
[17:46:11] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[17:49:26] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:51:53] <lbergstrom> your "micro" optimizations seem to each give 2-5x speedups :-)
[17:52:12] <pcwalton> they're all very stupid optimizations
[17:52:35] <pcwalton> at this point I think we will beat Gecko once we have gotten rid of netsurfcss
[17:53:28] <pcwalton> most of the asm is silly conversions between netsurfcss and rust-css
[17:53:43] <pcwalton> it would help a lot if we cached the css -> Au conversion
[17:54:57] <pcwalton> SimonSapin: can we make the CSS store either app-units, font-size-relative things, or percentage?
[17:55:09] <pcwalton> IOW don't convert between things like Px and Au every time, just store Au
[17:56:12] <SimonSapin> pcwalton: yes, and we should. https://github.com/mozilla/servo/blob/master/src/components/script/style/properties/common_types.rs#L123
[17:56:18] <pcwalton> ok, cool
[17:56:24] <pcwalton> that will help reflow a lot
[17:56:51] <SimonSapin> even font-relative things are resolved in the style system
[17:57:03] <pcwalton> oh, nice
[17:57:19] <SimonSapin> the computed value of lengths (excluding percentages) is in au
[17:57:40] <SimonSapin> some properties also accept layout-based percentages 
[17:57:42] <SimonSapin> some 'auto'
[17:58:41] <SimonSapin> some percentages do not depend on layout and are resolved in computed value, eg. font-size (same as em)
[17:58:43] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:58:43] *** ChanServ sets mode: +o brson
[17:59:11] *** Quits: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[18:00:28] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[18:02:27] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:02:46] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:02:46] *** ChanServ sets mode: +o tjc
[18:02:50] *** Joins: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net)
[18:03:08] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[18:03:08] *** ChanServ sets mode: +o pcwalton
[18:08:36] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:09:05] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[18:09:05] *** ChanServ sets mode: +o pcwalton
[18:13:39] *** Quits: dbaron (dbaron@moz-C566053C.dsl.dynamic.sonic.net) (Ping timeout)
[18:17:21] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[18:17:28] <pcwalton> ok, we're 2.2X slower than WebKit
[18:17:36] <pcwalton> most of it is rust-css again
[18:17:51] <luisbg> hopefully I will have time today to work a bit more in Servo, work keeping me busy lately
[18:17:54] <luisbg> pcwalton, o/
[18:18:15] <tjc> jack: r? https://github.com/mozilla/rust/pull/9498
[18:18:17] <pcwalton> hi
[18:22:33] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:26:17] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:31:56] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[18:33:05] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:33:05] *** ChanServ sets mode: +o pcwalton
[18:38:25] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Client exited)
[18:43:11] *** Joins: dbaron (dbaron@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:47:12] *** Quits: dzbarsky (Adium@moz-5D3A8D3F.wlan.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[18:47:26] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Client exited)
[18:47:47] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[18:47:51] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[18:48:03] *** Joins: Jayflux (Jason@moz-48F1F69.as13285.net)
[18:49:43] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Ping timeout)
[18:51:36] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[18:52:39] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[18:55:13] *** Quits: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[18:55:56] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:56:33] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[18:59:44] *** Joins: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu)
[19:02:25] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:17:46] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:19:54] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[19:24:22] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[19:30:21] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[19:31:03] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:31:30] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[19:32:36] *** Quits: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be) (Ping timeout)
[19:35:57] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[19:36:49] *** Joins: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be)
[19:37:29] *** Joins: dherman (dherman@moz-7B0110AD.mv.mozilla.com)
[19:37:29] *** ChanServ sets mode: +qo dherman dherman
[19:38:09] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[19:42:17] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[19:44:11] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[19:44:11] *** ChanServ sets mode: +qo dherman dherman
[19:44:16] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:44:43] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:44:48] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:46:51] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:46:51] *** ChanServ sets mode: +o tjc
[19:52:31] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[19:57:47] <pcwalton> down to 8% slower than Gecko
[19:58:26] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[20:00:59] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[20:00:59] *** ChanServ sets mode: +o pcwalton
[20:01:58] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:10:52] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:12:39] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:12:39] *** ChanServ sets mode: +o tjc
[20:17:38] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:19:03] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:19:57] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:21:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:21:52] *** Joins: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:23:49] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[20:26:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:28:30] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:29:13] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[20:29:13] *** ChanServ sets mode: +o pcwalton
[20:36:06] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[20:37:20] *** Quits: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: jet)
[20:39:52] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:40:39] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[20:42:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:45:34] *** bz is now known as bz_dinner
[20:50:09] *** Joins: bholley (anonymous@89BA202A.3778D849.1D6E592A.IP)
[20:51:35] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:51:35] *** ChanServ sets mode: +o tjc
[20:57:18] *** Joins: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:00:43] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:01:43] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:02:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:07:58] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:10:59] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[21:11:41] <tjc> jack: #9498 landed, so you should be unblocked now for rustpkg work
[21:11:49] <tjc> let me know if anything else is blocking you :-)
[21:14:41] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:15:00] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:19:10] <jack> tjc: just saw that. good work :)
[21:19:19] <jack> i'll try and wire up the makefiles now
[21:19:34] *** Quits: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[21:19:47] <jack> how are rustpkg test and c libs coming?
[21:20:03] <tjc> jack: Not very far right now -- I'm working on this test suite issue
[21:20:09] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:20:17] <tjc> a few of the tests got xfailed because they were relying on time stamps, so I'm getting rid of that altogether
[21:20:29] <tjc> but, the fix mysteriously worked on Mac, but on the Linux bots, resulted in not-enough-rebuilding
[21:20:43] <tjc> which seems to be due to not registering workcache dependencies for files in the build directory; only for installed binaries
[21:20:47] <tjc> so, I'm working on that
[21:20:54] <tjc> rustpkg test should be quick, though
[21:27:52] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[21:30:09] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[21:30:31] *** Joins: haxney (dan@moz-424CB7EB.cs.brown.edu)
[21:31:32] *** Quits: annevk (annevk@moz-451D5EF9.nyc.res.rr.com) (Input/output error)
[21:32:34] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[21:32:40] *** Joins: annevk_ (annevk@moz-451D5EF9.nyc.res.rr.com)
[21:33:45] <haxney> I am looking to parallelize the CSS parser as part of a semester-long project for my multiprocessor synchronization class. I'm new to Rust and Servo and have some questions about how the CSS part works.
[21:34:10] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: I feel so disconnected now	)
[21:34:20] <kmc> woo!
[21:34:23] <kmc> welcome haxney!!
[21:34:35] <kmc> right now we use rust-netsurfcss for CSS parsing and selector matching
[21:34:36] <jack> haxney: SimonSapin has currently rewritten the css parser (rust-cssparser) repo
[21:34:36] <haxney> Looking at Servo's source, there are two different CSS libraries, one which seems to wrap libcss from the netsurf project, and the other which is in pure Rust
[21:34:41] <cmr> haxney: the CSS part is currently being rewritten by SimonSapin
[21:34:52] <jack> It's not parallelized at all right now, but that's definitely the place to experiment from.
[21:34:54] <Ms2ger> haxney, just two? :)
[21:35:00] <kmc> it's a wrapper on a C library and unsuitably slow, so we're going to move to the pure Rust version eventually
[21:35:09] <kmc> so yes talk to SimonSapin about this project for sure :)
[21:35:16] <tikue_> haxney: keep saying things like that and you'll make many friends around here :P
[21:35:23] <haxney> :)
[21:35:48] <haxney> so what is the status between the two parsers? I'm not able to build all of Servo on the school machines, since they lack the correct version of autotools
[21:36:13] <kmc> rust-cssparser is unused currently
[21:36:15] <haxney> but I was able to create a simple test of the pure-rust version
[21:36:21] <kmc> but we still build it to make sure it doesn't bitrot
[21:36:29] <kmc> (Rust code rots at an incredible rate, or should I say it rusts...)
[21:36:40] <haxney> kmc: lol
[21:36:53] <SimonSapin> Hi haxney 
[21:37:06] <haxney> I found that out the hard way when I tried to build rust-cssparser and found that std:iterator had been changed to std:iter
[21:37:09] <SimonSapin> are you interested in just parsing, or also selector matching and the rest of CSS?
[21:37:33] <Luqman> haxney: the qualcomm zoomm parallel browser paper is interesting and somewhat related
[21:37:43] <Luqman> http://dl.acm.org/citation.cfm?id=2442543
[21:37:51] <haxney> well, since I only barely know rust at this point, my plan was to proceed incrementally, first parallelizing the parsing part, then perhaps building from there
[21:38:04] <SimonSapin> haxney: the safest bet is to build Rust from the commit pointed by Servoâ€™s src/compiler/rust submodule
[21:38:11] <haxney> I don't really know how long the stuff will take, so I'm planning on doing things incrementally
[21:38:18] <kmc> haxney: between Servo and rust-cssparser / rust-netsurfcss there's also this 'rust-css' library, which was meant to provide a consistent API to several CSS implementations, but we seem to think it's unwanted abstraction at this point, so it will probably go away
[21:38:40] <kmc> haxney, SimonSapin: you can just build Servo and then run the rustc it used
[21:39:15] * kmc $ PATH=~/proj/servo/servo/build/x86_64-unknown-linux-gnu/src/compiler/rust/x86_64-unknown-linux-gnu/stage2/bin:$PATH rustc --version
[21:39:35] <SimonSapin> the stuff in src/components/script/style (that uses rust-cssparser) will replace rust-css eventually
[21:41:07] <tikue_> haxney: out of curiosity, what led to your interest in rust? i'm always interested to see where people are coming from
[21:41:22] <SimonSapin> haxney: tokenization is not parallelizable as far as I know, because CSS is not self-synchronizing. (If you jump to the middle of the stream you donâ€™t know if youâ€™re in a comment or a quoted string.)
[21:41:35] <haxney> tikue_: I think I first heard about it on r/programming, and started doing some investigation from there
[21:41:35] *** Joins: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net)
[21:41:56] <SimonSapin> but after that there is definitely some opportunities to parse stuff in parallel
[21:41:58] <tikue_> awesome :) yeah the programming subreddits are generally giving good press to rust
[21:42:08] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:42:14] <SimonSapin> as well is pipelining stuff
[21:42:39] <haxney> kmc: building servo is problematic for me, since the university computers do not have the correct version of autotools, and I'd rather not try to install it manually, if I can avoid doing so.
[21:43:00] <haxney> kmc: My impression is that I should be able to test just the CSS parts without the rest of servo
[21:43:17] <SimonSapin> but youâ€™d really need to measure how much paralellism is indeed faster (rather than spending all your time sending small messages)
[21:43:30] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:43:33] <SimonSapin> and thatâ€™s hard to do as long as the integration with servo is moving, or not even done yet
[21:43:46] <tikue_> imo make friends with the university's sysadmins
[21:44:05] <kmc> a generally useful thing to do
[21:44:07] <haxney> SimonSapin: Could tokenization be done speculatively? CSS "probably" isn't commented with curly braces that much, so guessing that any curly braces you see are genuine block delimiters is "probably" going to be accurate most of the time
[21:44:22] <kmc> but I think you can just grab the appropriate ancient autotools tarball and put it in your PATH
[21:44:28] <kmc> I did this at one point; it wasn't too scary
[21:44:42] <SimonSapin> haxney: you can play with rust-cssparser without servo, but IMO the parallelism is not in rust-cssparser itself but how you use it
[21:45:13] <SimonSapin> speculatively, maybe
[21:45:16] <haxney> SimonSapin: true.
[21:45:40] <SimonSapin> but itâ€™s not rare to comment rules with brackets to "disable" them
[21:45:56] <haxney> SimonSapin: my initial thought was to try to take advantage of the fact that CSS is naturally broken up into bite-sized chunks and have those be parsed independently
[21:46:26] <SimonSapin> but Iâ€™m a bit sceptical of speculative stuff as long as I donâ€™t see a plan to make things correct when the guess is wrong
[21:46:34] <haxney> SimonSapin: ah, good point. I assume minifiers would get rid of that in (some) sites in the wild. it would be a profiling question.
[21:46:52] <SimonSapin> yes, tokenization is mostly linear, but you can parse each rule or declaration independently
[21:47:08] <SimonSapin> not everybody uses minifiers
[21:47:28] <haxney> SimonSapin: At any rate, my idea was to have a sequential tokenizer build up rule blocks and then push them to a work queue which is being monitored by a bunch of worker tasks
[21:47:38] <kmc> SimonSapin: do I recall correctly that you have one pass that produces a tree of curly-brace-grouped stuff, and another pass to actually parse individual attributes?
[21:48:04] <haxney> kmc: From a relatively brief look at rust-cssparser, that seems to be what is going on.
[21:48:29] <SimonSapin> this loop could be a parallel map: https://github.com/mozilla/servo/blob/c2461886059ff6fdd04f5a2d5d1a7913882b87b0/src/components/script/style/stylesheets.rs#L44
[21:48:48] <haxney> kmc: So my thinking was to put a bit in the middle of those two passes to have the parsing be done in worker tasks
[21:50:22] <SimonSapin> what you get out of parse_stylesheet_rules() is basically "@foo tokens { tokens }" or "tokens { tokens }", and the body of the loop parsers the tokens
[21:50:44] <haxney> SimonSapin: that was basically my idea. Do you have any sense of what the bottlenecks are in the code? If most of the time is spent in the lexer, then parallelizing the parsing doesn't buy you much
[21:50:51] <tikue_> SimonSapin: does rust have a parallel map
[21:50:55] <cmr> tikue_: not anymore.
[21:51:03] <SimonSapin> no idea of the bottlenecks
[21:51:09] *** Quits: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:51:16] <cmr> tasks aren't really that great for it, and we have no support for forkjoin parallelism
[21:51:33] <tikue_> cmr: why aren't tasks great for it?
[21:51:52] <SimonSapin> I still need to write the selector matching stuff and integrate with the rest of Servo before I can usefully run any of this :/
[21:51:55] <haxney> cmr: could it be done with a task pool and a concurrent queue?
[21:52:11] <cmr> tikue_: you either need to write a pool or live with the overhead of spawning tasks.
[21:52:26] <tikue_> cmr: but isn't the overhead of tasks supposed to be minimal?
[21:52:30] <tikue_> in theory at least
[21:52:33] <cmr> tikue_: in theory
[21:52:55] <tikue_> using a thread pool imo is very non-rustic
[21:52:56] <SimonSapin> haxney: there is a bunch of interesting stuff to do eventually, but to be honest itâ€™s a bit premature right now :/
[21:52:58] <cmr> it stresses the scheduler a bit though. we used to have it in extra::par, but it was removed because it was poorly written.
[21:53:10] <cmr> (and didn't work well, and was super slow)
[21:53:30] <tikue_> cmr: i mean i think forkjoin parallelism would definitely be good to have as well. but i think people should in general not have to think about the overhead of tasks when writing rust code
[21:53:33] <tikue_> (again, in theory)
[21:54:02] <cmr> tikue_: well usually it's fine, but not when you're spawning a few hundred or thousand tasks and waiting for them to processor your vector.
[21:54:29] <tikue_> cmr: for example, though, stackless python can handle upwards of 100,000 threadlets or whatever they're called over there
[21:54:34] <tikue_> cmr: rust should aim for a similar number
[21:54:44] <tikue_> cmr: but i agree that when you have something that large it's time to think about forkjoin
[21:55:25] <SimonSapin> haxney: Iâ€™m trying to get this to run at all before thinking about performance or parallelism
[21:55:50] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[21:56:01] *** Quits: bholley (anonymous@89BA202A.3778D849.1D6E592A.IP) (Quit: bholley)
[21:56:19] <haxney> SimonSapin: I understand. At least for the purposes of my project, if I get a negative result, that's fine too (as long as I can say something interesting about parallelism)
[21:56:59] <cmr> tikue: that's a nice ideal, I agree. we're just not there yet.
[21:58:36] <haxney> One of the first things I would need to do is to benchmark rust-cssparser to see what the speed of the lexer vs. parser is. For that, I would need a body of at least semi-"realistic" CSS. Does anyone know of a good bunch of test CSS, or should I start going to open source projects and grabbing their CSS for rust-cssparser to chew on?
[21:59:45] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:02:15] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[22:02:23] <tikue_> jack: tuples are immutable
[22:02:28] <tikue_> jack: that's why let mut (a, b) doesn't make sense
[22:02:31] <tikue_> (i think)
[22:02:40] <cmr> The way I see it, the mut would distribute.
[22:03:06] <Luqman> cmr: it used to distribute
[22:03:28] <cmr> Luqman: right, and I think it should again, now that we have parens to disambiguate.
[22:03:34] <SimonSapin> haxney: rust-cssparser doesnâ€™t know about selectors or individual properties
[22:03:40] <Luqman> but we wanted to move to a more fine grained control. let (mut foo, bar) = (1, 2)
[22:03:47] <haxney> SimonSapin: what do you mean?
[22:03:50] <cmr> I don't see why we can't have both.
[22:04:50] <SimonSapin> haxney: See https://github.com/mozilla-servo/rust-cssparser/blob/66786712edaea27deea484960864201b7cc88708/ast.rs#L70 The "prelude" and body of rules, and the value of declarations are "component values" 
[22:05:10] <SimonSapin> which are tokens, blocks or functions
[22:05:14] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[22:05:43] <tikue_> cmr: can you do let mut Foo { a, b } = Foo { a: 1, b : 2};
[22:05:50] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:05:54] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[22:06:06] <SimonSapin> Servoâ€™s parse_stylesheet() (which uses rust-cssparser) is closer to a "full" parser: https://github.com/mozilla/servo/blob/c2461886059ff6fdd04f5a2d5d1a7913882b87b0/src/components/script/style/stylesheets.rs#L34
[22:06:12] <cmr> tikue_: no idea, I never use struct destructuring.
[22:06:31] <tikue_> cmr: really? i use it quite often. but anyway it doesn't work
[22:06:48] <tikue_> cmr: either `let mut foo` works with all destructuring or none
[22:06:57] <tikue_> imo
[22:06:57] <cmr> tikue_: I think it should work with al.
[22:07:03] <SimonSapin> there, style rules have parsed selectors and declaration values are a big enum with a different type for each CSS property
[22:07:39] <haxney> SimonSapin: ah, so it just parses to "string:string", without any understanding of what thay might mean?
[22:07:45] <tikue_> cmr: yeah I think it could just desugar to let Foo { mut a: a, mut b: b } etc but I think it's useful
[22:09:16] <SimonSapin> haxney:  kind of. The name of a declaration is indeed a string, but the value is a list of tokens
[22:09:23] <SimonSapin> not just a string
[22:09:42] <haxney> SimonSapin: got it. so that would need to be parsed further. That is the part which could be parallelized, then
[22:09:52] <SimonSapin> yes
[22:10:00] <haxney> SimonSapin: assuming the lexer is just serial
[22:11:26] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:13:13] <SimonSapin> the tokenizer could also be in a separated task
[22:13:30] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[22:13:49] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[22:14:23] *** Joins: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu)
[22:14:27] <haxney> SimonSapin: so does rust-cssparser do much beyond just lexing?
[22:14:38] *** Quits: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu) (Max SendQ exceeded)
[22:14:47] *** Joins: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu)
[22:15:34] <haxney> SimonSapin: my first milestone is to compare the performance of just lexing vs. lexing+parsing to see how much Amdahl will screw us over
[22:15:47] <SimonSapin> not a lot. Grouping blocks/functions and handling nesting is technically not part of lexing, but is done by the same code
[22:16:37] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:17:04] <SimonSapin> this gives you a stream of "component value" trees
[22:17:13] <haxney> SimonSapin: true. That was a little confusing when I was first reading through the code. Makes sense to do it the way it currently is, though
[22:17:36] <SimonSapin> then parser.rs has stuff to chop that into a stream of rules, or declarations
[22:17:49] <SimonSapin> but thatâ€™s not much. parser.rs is quite small as you can see
[22:19:22] <SimonSapin> color.rs is fairly independent. It could be in a separate package
[22:19:54] <haxney> SimonSapin: Is there existing Rust code which can do the rule parsing? If so, how much work would it be to retrofit onto rust-cssparser?
[22:19:58] <SimonSapin> I should write up some documentation on all thatâ€¦
[22:20:30] <SimonSapin> see src/components/script/style in Servo
[22:21:20] <SimonSapin> what do you mean by retrofit?
[22:21:59] <haxney> well, if rust-cssparser can only get to a list of component value trees, what would it take to get it to go the rest of the way?
[22:22:09] <haxney> or is that possible now?
[22:22:10] <SimonSapin> src/components/script/style is new code based on rust-cssparser that is not actually used in Servo yet.
[22:22:38] <SimonSapin> that new code does that
[22:23:10] <haxney> oh, great! So it is capable of taking a CSS file and parsing it all the way to the point at which it can run selectors against it?
[22:24:01] <SimonSapin> this split exists because while rust-cssparser could be used outside of Servo, the rest (eg. data structure that represents a parsed selector) depends heavily on Servo choices (eg. how to do selector matching fast)
[22:24:25] <SimonSapin> the parser and cascade are there, but I still need to write selector matching code
[22:24:33] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:24:56] <SimonSapin> but you should be able to run parse_stylesheet() and benchmark a "complete" CSS parser
[22:25:00] <haxney> got it. I guess I'll have to bite the bullet and install autotools and servo
[22:25:33] <SimonSapin> that same code started outside of Servo: https://github.com/SimonSapin/servo-style
[22:25:41] <SimonSapin> it hasnâ€™t diverged much yet
[22:25:51] <jack> haxney: You could probably do a local install of autoconf213. if that's what you're missing.
[22:25:57] <jack> (it's needed for spidermonkey)
[22:26:54] <haxney> jack: Yeah, I saw that. Kind of a bummer. We only get 512 MB of space in /home/<user>, so I wouldn't be able to put much there
[22:27:01] <kmc> I think you can just build it in some directory and then add it to $PATH
[22:27:18] <kmc> or at least you can configure and install it with a prefix in your homedir
[22:27:37] <kmc> haxney: you should use this as an excuse to ask for more quota :)
[22:27:53] <haxney> kmc: true :)
[22:28:03] <kmc> btw my servo build directory is 2.1 GB
[22:28:38] *** Quits: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net) (Quit: eatkinson)
[22:28:49] <kmc> biggest culprit: rust+llvm, followed by spidermonkey, followed by nss
[22:28:50] <haxney> lol, I don't know if they would give me that much space ;) plus, it is on NFS, so it would probably be slow as balls
[22:29:14] <haxney> It's hard being on the bleeding edge :)
[22:29:19] <kmc> heh yep
[22:29:29] <SimonSapin> haxney: try https://github.com/SimonSapin/servo-style maybe
[22:30:03] <haxney> SimonSapin: looking at it now
[22:31:25] <kmc> rustc bootstraps so there are several copies of the whole toolchain in there
[22:31:27] <haxney> Could it be made rustpkg-able?
[22:32:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:32:20] <SimonSapin> maybe
[22:32:35] <jack> haxney: yes, i'm working on that right now in fact.
[22:32:55] <SimonSapin> though that repo is kind of abandoned now that itâ€™s moved into Servoâ€™s src/components/script/style
[22:33:15] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: mccr8)
[22:33:30] <haxney> SimonSapin: which one should I use?
[22:34:10] *** Joins: jdm (jdm@EE8B569C.C68510DC.D0446090.IP)
[22:34:10] *** ChanServ sets mode: +o jdm
[22:34:57] <haxney> Should I revert Rust to the version pointed to by Servo? rust-cssparser fails to build with "error: unresolved name `u32::from_str_radix`"
[22:35:25] <kmc> yes
[22:35:30] <SimonSapin> haxney: try servo-style if you canâ€™t build servo for some reason
[22:35:34] <jack> haxney: that's the easist way to make progress is to use servo's rust commit.
[22:35:38] <SimonSapin> but future work is happening in servo
[22:35:55] <kmc> there's a ton of churn in the language and libraries, so I wouldn't count on being able to build with any version other than the one we use
[22:37:07] <haxney> kmc: yeah, I occasionally look at "this week in Rust" and the scale of changes are pretty dramatic
[22:37:13] <SimonSapin> bed time for me. Have fun :)
[22:37:34] <haxney> SimonSapin: thanks for the help! I'll work off of the standalone repo for now, since that will be easier to do
[22:39:14] <haxney> jack: what's your status on rustpkg-izing servo-style? Do you think I should be using your branch instead?
[22:39:46] * tikue_ doesn't understand rustpkg at all
[22:40:29] <jack> haxney: i'm not doing servo-style right now, but rust-cssparser. servo0style is part of the script crate, which rustpkg can't compile yet.
[22:40:57] <haxney> jack: I see. Should I use your rust-cssparser then?
[22:41:02] <jack> tikue: did you read the tutorial?
[22:41:14] <jack> haxney: if you can wait a bit i can port that one quick.
[22:42:16] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:42:24] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:42:44] <cmr> tikue_: (note that rustpkg is broken right now for remotes, so *following* the tutorial doesn't fully work)
[22:43:03] <haxney> jack: no rush. I'm probably not going to be doing too much more on this for a couple days. I have to do the other work for the class!
[22:43:33] <tikue_> cmr, jack: I tried the other day. The main problem was the instrusctions' ambiguities regarding the order in which rustpkg and git interact
[22:43:44] <tikue_> i had a git repo already, and wanted to convert the project to rustpkg
[22:43:52] <tikue_> and I couldn't figure out the order of, say, rustpkg install, rustpkg build
[22:44:42] <jack> you probably didn't have your package in a workspace.
[22:44:50] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:44:50] *** ChanServ sets mode: +qo dherman dherman
[22:44:52] <jack> you can't build from CWD currently unless CWD isin a workspace.
[22:45:05] <tikue_> also, it's unclear to me if you should have one workspace for multiple projects, or one for each. rustpkg tutorial said both are acceptable, but i think it should choose one way to encourage
[22:45:17] <tikue_> jack: so you need to do rustpkg init first?
[22:45:27] <jack> rustpkg init creates a workspace
[22:45:32] <jack> mkdir -p workspace/src also does
[22:45:46] <tikue_> jack: the workspace doesn't need to be called workspace does it?
[22:45:57] <tikue_> for example, i'd prefer my workspace's name to be the git repo name
[22:46:02] <tikue_> or am i thinking about this all wrong?
[22:46:05] <jack> so mkdir -p workspace/src && cd workspace/src && git clone https://github.com/tikue/foo.git && rustpkg install foo
[22:46:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:46:31] <jack> no. a workspace is any directory with "src" in it.
[22:46:49] <jack> it will get bin/lib and rustpkg_db.json added to it during build
[22:46:51] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:47:11] <tikue_> right now my git projects are basically repo/src/main.rs
[22:47:19] <jack> for most libs, they will be packaged at hte root of the repo. glfw-rs is an exmple where the git repo itself is a workspace.
[22:47:27] <tikue_> with rustpkg it becomes repo/src/repo/main.rs right?
[22:47:32] <jack> tikue: yeah, in that case you'd want repo/src/repo/main.rs
[22:47:41] <jack> or else repo/main.rs
[22:47:51] <tikue_> ok
[22:47:51] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[22:47:57] <jack> the latter is preferred i think
[22:48:00] <jack> *
[22:48:06] <jack> * preferred by _me_ :)
[22:48:12] <tikue_> the latter being repo/main.rs?
[22:48:16] <jack> yes
[22:48:27] <tikue_> i don't understand how that'd work
[22:48:36] <tikue_> there needs to be src/ right
[22:49:45] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Ping timeout)
[22:50:02] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:51:17] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:51:53] <jack> the workspace has a src directory.
[22:51:59] <jack> teh rust compiler doesn't care about src at all.
[22:52:08] <tikue_> ok
[22:52:20] <jack> I find that it helps understand the design if you think about how rustpkg needs to find some library.
[22:52:30] <jack> If you have a library "foo", where does it look for foo?
[22:52:35] *** Quits: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:52:52] <tikue_> jack: in lib.rs right?
[22:52:59] <jack> where does it get lib.rs?
[22:53:00] *** Joins: mccr8 (mccr8@moz-5FEA0C74.dsl.dynamic.sonic.net)
[22:53:11] <tikue_> from src/repo/ ?
[22:53:21] <jack> it will search the RUST_PATH
[22:53:26] <jack> which is a list of workspaces
[22:53:32] <tikue_> ah i see
[22:53:48] <jack> i thinkt eh tricky bit is that it's not a list of package directories
[22:53:50] <jack> like in python
[22:53:59] *** Joins: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:54:02] <jack> it's a list of workspaces, which are collections of packages.
[22:54:04] *** Joins: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP)
[22:54:35] <tikue_> jack: the other thing i'm unsure about (and this isn't related directly to rustpkg) is how to use rustpkg to build 
[22:54:35] <jack> i'm writing up a use cases guide right now
[22:54:45] <tikue_> so i previously had one file, echoserver.rs
[22:54:47] <jack> to build what? your own lib? an external lib?
[22:54:50] <tikue_> which had my functions and main()
[22:54:55] <tikue_> now i want it to be lib.rs and main.rs
[22:55:03] <tikue_> and i want to move the functions into lib.rs and simply have main() in main.rs
[22:55:05] <jack> when servo is rustpkged up, this is how it works for building servo:
[22:55:13] <jack> mkdir servo
[22:55:15] <jack> cd servo
[22:55:17] <jack> rustpkg init
[22:55:22] <jack> rustpkg install github.com/mozilla/servo
[22:55:28] <jack> </end>
[22:55:54] <jack> for your own library, it will eventually work like this:
[22:56:00] <jack> cd my-lib
[22:56:02] <jack> rustpkg build
[22:56:06] <jack> </end>
[22:56:21] <jack> but right now that doesn't work in the case that my-lib is not already inside a workspace.
[22:56:33] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:56:42] <jack> (it needs a destination workspace to do the build in)
[22:56:52] <lbergstrom> eatkinson: nice writeup on layout! and my apologies if my work on inline iframes kills your parallel layout branch :-)
[22:58:02] <tikue_> how do i build with rustc when there are two files? :x
[22:58:05] <eatkinson> lbergstrom: no worries. it's been bit rotting for a while now so something else has probably broken it already
[22:59:18] <dbaupp> tikue_: rustc on the crate root?
[22:59:39] <dbaupp> tikue_: i.e. foo.rs and bar.rs where foo contains `mod bar` => `rustc foo.rs`?
[22:59:52] <tikue_> dbaupp: it says `can't find crate for `lib`` when i try that
[22:59:58] <tikue_> oh nvm
[23:00:03] <tikue_> probably don't want the extern in front of mod lib
[23:00:03] <lbergstrom> eatkinson: if you want me to look at / help support it, I'd be happy to do so. I had to learn enough about layout to choke a camel while trying to get inline iframes working anyway. and sooner is better than later to get something for pcwalton to evaluate, since he's driving servo layout very close to gecko perf right now
[23:00:25] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:01:19] * jdm looks sidelong at lbergstrom
[23:01:33] <lbergstrom> I think he got us to within 8% of gecko at last report
[23:01:38] <jdm> one anonymous phone call to PETA later...
[23:01:38] <tikue_> lbergstrom: omg rly
[23:02:25] <lbergstrom> jdm: no camels were harmed in the production of this week's upcoming inline iframe PR
[23:02:55] <lbergstrom> tikue_: yeah, he's been optimizing all sorts of crazy debug info, bad abstractions, etc. that were killing our perf in layout. 
[23:03:03] <jdm> you just now possess the ability to choke them
[23:03:04] <tikue_> that's great :) can't wait til that patch lands
[23:03:08] <jdm> if it becomes necessary
[23:03:10] <jdm> very wise
[23:03:13] <tikue_> jdm++
[23:03:28] <tikue_> wow, so skills, such camel
[23:03:40] <tikue_> "with great power comes great responsibility" -dad
[23:03:49] <eatkinson> lbergstrom: all the code is in my branch if you want to take a look, but it's pretty ancient and currently throws a nasty runtime error 
[23:04:13] <eatkinson> lbergstrom, pcwalton: i'd be interested to hear about the "bubble" widths issue that's been mentioned a few times wrt performance
[23:04:26] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:04:26] *** ChanServ sets mode: +o tjc
[23:04:58] *** Quits: Jayflux (Jason@moz-48F1F69.as13285.net) (Quit: Leaving)
[23:07:07] *** Quits: annevk_ (annevk@moz-451D5EF9.nyc.res.rr.com) (Input/output error)
[23:07:22] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:07:53] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[23:07:57] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:09:02] <lbergstrom> eatkinson: I'll take a look after I land the iframe stuff. I might @ you for the review, as I have touched a lot of stuff along the way. No rush on the review, though
[23:10:19] *** Quits: haxney (dan@moz-424CB7EB.cs.brown.edu) (Quit: homework :()
[23:11:25] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:11:57] <tikue_> jack: ping
[23:13:08] <tikue_> when I do `rustpkg install repo` it says "note: Couldn't infer any crates to build. Try naming a crate `main.rs`, `lib.rs`â€¦` but I do have two files named main.rs and lib.rs
[23:15:15] *** Joins: tjc (tjc@moz-7B0110AD.mv.mozilla.com)
[23:15:15] *** ChanServ sets mode: +o tjc
[23:15:16] *** Quits: jdm (jdm@EE8B569C.C68510DC.D0446090.IP) (Quit: Lost terminal)
[23:15:45] <jack> what rustpkg are you using?
[23:15:53] <jack> one from rust master? or servo ?
[23:16:12] <jack> where are you running rustpkg from? what is your RUST_PATH?
[23:17:25] <tikue_> jack: rust master i believe
[23:17:33] <tikue_> i don't have a rust path set
[23:18:32] <jack> then you need to run rustpkg from the workspace dir
[23:18:38] <jack> I think.
[23:19:34] <kmc> eatkinson: thanks for writing up https://github.com/mozilla/servo/wiki/Layout-Overview ; I'm reading it now
[23:20:14] <kmc> you mentioned that "Parallel selector matching is sort of a beast unto itself"; do you have thoughts on how that would work and whether it would be easy or hard?
[23:20:47] <tikue_> jack: i'm running it from inside my workspace, in src/
[23:20:53] <kmc> my naive view is that we would combine the stylesheets into some kind of immutable lookup structure which could then be traversed in parallel without any trouble
[23:24:30] *** Quits: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[23:31:33] *** Quits: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[23:31:45] <tikue_> jack: got it to work! i had to be in the <workspace>/ not <workspace>/src/
[23:32:31] *** Joins: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu)
[23:35:43] *** Joins: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP)
[23:41:02] <eatkinson> kmc: my understanding is that a lot of people have tried it, with varying results. SimonSapin probably knows a lot more than I do
[23:50:53] *** Quits: dzbarsky (Adium@moz-AD3C68AA.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[23:52:12] <kmc> okay
[23:52:28] *** Quits: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[23:52:48] *** Joins: haxney (dan@moz-424CB7EB.cs.brown.edu)
[23:53:56] <haxney> on the topic of parallel CSS parsers, does anyone know of a good repository of "realistic" sample CSS files? I want to run some benchmarks.
[23:54:03] *** bz_dinner is now known as bz
[23:55:02] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[23:56:06] <fabrice> haxney: the web is full of realistic css ;)
[23:56:48] <haxney> fabrice: Of course :), but do you know of a (preferably OSS) repository of "representative" css files that I could use to test?
[23:57:33] <haxney> I could always just download bootstrap and a few other CSS frameworks, but I'd just like to check to see if someone has already done that
[23:57:34] <kmc> you could start with twitter bootstrap
[23:57:39] <kmc> yeah
[23:58:47] <haxney> kmc: alright, I'll do that then. My first step is to run some benchmarks to see whether parallelization will buy us anything, or if Amdahl's wrath will destroy all our hard work
