[00:00:19] *** Quits: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com) (Connection reset by peer)
[00:00:37] *** Joins: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com)
[00:00:49] <sinistersnare> yeah me too, mindcat_, luckily, being a high schooler leaves me a lot of free time!
[00:00:54] <sinistersnare> college next year might hurt though
[00:01:21] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[00:01:22] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:01:37] <jroweboy> sinistersnare: you can always be a bad student like me and code during your stats class :p
[00:01:51] <sinistersnare> i do that! i hate my stats class!
[00:01:54] <bvssvni> jroweboy: don't do that, stats are hard
[00:02:00] <mindcat_> sinistersnare: but I am didn't learn anythings from school, because I didn't
[00:02:27] <bvssvni> ;)
[00:02:27] <aatch> stats is the most useful maths you'll hate
[00:02:36] <bvssvni> yeah
[00:02:42] <jroweboy> bvssvni: Every question feels like a trick question :/ I think the class would be much easier if they would ask direct questions 
[00:02:47] <mindcat_> sinistersnare: I am NEET now
[00:03:00] <sinistersnare> aatch, i think that every day
[00:03:03] *** Joins: leowoe (Leo@moz-8A007533.dip0.t-ipconnect.de)
[00:03:14] <aatch> Stats is actually really interesting when you actually know it properly.
[00:03:17] <sinistersnare> but like "USE THE T SCORE TO MAKE INFERENCSE ABOUT THE POPULATION AND STOP BEING STUPID"
[00:03:31] <sinistersnare> yeah, its really backwards
[00:04:04] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:04:05] <aatch> Most of stats is just answering the question: "does this data mean anything?"
[00:04:07] <jroweboy> sinistersnare: We just started learning t scores. As in right now we started on t scores :S I don't even see what the point is
[00:04:28] <aatch> Student's T-test?
[00:04:34] <meyer> I've used stuff I learned in stats quite a bit in real-world programming
[00:04:40] <sinistersnare> its all such a pain!
[00:04:54] <sinistersnare> meyer, i see the real world implications. doesnt mean i have to like it :=\
[00:05:03] <jroweboy> aatch: Yes actually. I have no clue what that is though. The professor is showing us the "t table"
[00:05:06] <huon> aatch: half of stats... the other half is "what does it mean" :P
[00:05:11] <bvssvni> stats get very interesting when you compose stuff
[00:05:18] <aatch> There are several statistics-based data structures
[00:05:23] <aatch> like Bloom filters
[00:05:44] <huon> well, probability theory-based :P
[00:06:16] <aatch> huon, true.
[00:06:36] <bvssvni> most of classical physics is based on stats
[00:06:38] <jroweboy> Speaking of stats, what is a good way to load a file as a [u8]? (As much as I'm loving stats...)
[00:06:40] <sinistersnare> the only class i hate more is music theory. as a percussionist, my ear is so bad 
[00:06:53] <huon> jroweboy: File::open(...).read_to_end()
[00:07:06] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[00:07:07] <jroweboy> that's it o.o? Well I totally over thought this one
[00:07:23] <aatch> But understanding statistics is helpful in general. Being able to properly understand presented statistics is very helpful
[00:07:26] <meyer> Empathy's IRC inserts smiley faces into all the code snippets people paste
[00:08:06] <sinistersnare> meyer, its the new thing, "fun coding"
[00:08:09] <bvssvni> aatch: gives you more confidence :D
[00:08:16] <meyer> (disabled) 
[00:08:22] <sinistersnare> (...)
[00:08:34] <meyer> (no fun allowed)
[00:09:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:11:48] <huon> jroweboy: you may have to unwrap the IoResult File::open returns
[00:12:30] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:13:37] <jroweboy> right, I have loaded files previously, I just forgot that a &str and &[u8] are interchangable (for the most part correct?)
[00:13:54] *** kimundi is now known as zz_kimundi
[00:14:13] *** Joins: Florob (Florob@moz-39532932.de)
[00:14:20] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[00:14:21] *** zz_kimundi is now known as kimundi
[00:14:24] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:14:24] *** ChanServ sets mode: +ao brson brson
[00:14:29] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Client exited)
[00:14:30] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:15:01] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:16:24] *** Parts: brihat (bdsatish@moz-5EC00491.dhcp.inet.fi) ()
[00:17:14] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[00:18:36] <FreeFull> jroweboy: &str is guaranteed to be a valid UTF-8 string
[00:18:37] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[00:20:37] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[00:20:44] *** Joins: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[00:20:47] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:20:47] *** ChanServ sets mode: +ao dherman dherman
[00:21:42] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:22:19] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[00:24:19] *** Quits: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net) (Ping timeout)
[00:26:32] *** Quits: gimpf (gimpf@moz-BBD748EE.adsl.highway.telekom.at) (Quit: Leaving.)
[00:26:50] <sinistersnare> wait...did compilation just finish? yes!
[00:27:17] <sinistersnare> yes!
[00:27:30] <ChrisMorgan> sinistersnare: enjoy your day ☺
[00:27:32] <FreeFull> I just use nightlies compiled by others
[00:27:38] <sinistersnare> ....theres already an update though! nooooooo
[00:27:53] *** Joins: alisdair (textual@moz-C336018C.dia.static.qwest.net)
[00:28:07] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:28:08] <jroweboy> sinistersnare: If you are on Ubuntu you can add a rust-nightly ppa
[00:28:08] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:28:10] <huon> pull requests land every hour, on a good day :P
[00:28:26] <sinistersnare> jroweboy, i tried that, but its faster this way
[00:28:50] <FreeFull> Just sit content with not having the very newest version, unless the very newest version contains some change you want
[00:28:51] <mcpherrin> Starting around line 100, there's these four parse_ functions that awkwardly pass around an iterator: https://github.com/mcpherrinm/rust-regex-derivatives/blob/master/regex.rs
[00:28:55] <jroweboy> sinistersnare: how slow is your download speed then?
[00:28:58] <mcpherrin> Does anybody have suggestions on how tha code might be cleaner?
[00:29:25] <sinistersnare> jroweboy, not bad, but if it updates twice a day, thats not fast enough :p
[00:29:26] <huon> mcpherrin: use &mut CharIter<'a> to mutate in place?
[00:29:44] <huon> sinistersnare: you don't need every change instantenously
[00:29:50] <sinistersnare> i was having a problem with a library being updated, but rust-nightly wasnt updated yet
[00:29:57] <huon> ... you'll spend half your time building Rust that way
[00:30:01] <sinistersnare> it will be updated tonight, but i wanted to code now...
[00:30:05] <mcpherrin> huon: hmm yeah could be nicer
[00:30:45] <huon> mcpherrin: also https://github.com/mcpherrinm/rust-regex-derivatives/blob/master/regex.rs#L143 will fail at the end of a string
[00:31:00] *** Quits: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP) (Ping timeout)
[00:31:01] <mcpherrin> huon: I know, there's a bunch of ways this can fail :)
[00:31:06] <huon> (maybe that's ok? ... in any case using `.expect("error message")` would be nicer)
[00:31:07] *** Joins: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP)
[00:31:12] <huon> oh, ok
[00:31:26] <mcpherrin> huon: I'm trying to keep the code size down for clarity; will make it more robust later
[00:31:40] <huon> sure
[00:31:49] <mcpherrin> "slide compatible" code if you will
[00:32:01] <huon> just make the font smaller :P
[00:32:07] * huon puts all of librustc on a slide
[00:32:23] <mcpherrin> :p
[00:32:42] <huon> with syntax highlighting it should be fine
[00:32:50] <mcpherrin> one pixel per character
[00:32:52] <ChrisMorgan> huon: 95728 lines of code.
[00:33:02] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:33:02] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:33:13] *** Joins: penguins916 (Mibbit@moz-1EBF1EAD.olin.edu)
[00:33:27] <mcpherrin> anyways maybe I'll switch to a single &mut iterator on my train ride to the rust meetup
[00:34:28] <ChrisMorgan> find librustc -name '*.rs' | wc -c: total of 3503105 characters.
[00:34:44] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[00:35:11] *** Joins: brihat (bdsatish@moz-5EC00491.dhcp.inet.fi)
[00:35:19] <ChrisMorgan> 1920*1080 = 2073600, so at one pixel per character (including whitespace) you'll need greater than 1080p…
[00:35:40] <cmr> strip out whitespace!
[00:35:42] <jroweboy> ChrisMorgan: Finally a use for 4k monitors
[00:35:47] <FreeFull> ChrisMorgan: 1080p means that you have 1080 vertical lines
[00:35:54] <FreeFull> It technically doesn't specify the width
[00:36:08] *** Quits: alisdair (textual@moz-C336018C.dia.static.qwest.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:36:40] <ChrisMorgan> A gzipped tarball of librustc is only 772197 bytes, plenty small enough to fit on a screen.
[00:36:42] <FreeFull> I know, pedantic and not helpful =P
[00:37:08] *** Joins: alisdair (textual@moz-C336018C.dia.static.qwest.net)
[00:37:14] *** Quits: echristo (echristo@3246441A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:37:15] <FreeFull> ChrisMorgan: That would just fit on 1024x768
[00:37:25] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[00:37:28] <ChrisMorgan> tar --lzma → 574668
[00:37:33] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[00:37:38] <FreeFull> What about .xz?
[00:38:11] <ChrisMorgan> FreeFull: xz == lzma
[00:38:21] <FreeFull> Ah
[00:38:37] <ChrisMorgan> For tar, -J, --xz and --lzma are equivalent.
[00:38:47] <strcat> ChrisMorgan: LZMA2 to be precise
[00:39:06] <ChrisMorgan> Indeed, not that it makes any difference for most things.
[00:39:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:39:10] <strcat> ChrisMorgan: anyway those tar switches are silly ;p
[00:39:13] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[00:39:17] *** Joins: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net)
[00:39:22] * ChrisMorgan wonders why
[00:39:24] <strcat> tar acf foo.tar.xz foo
[00:39:28] <strcat> tar xf foo.tar.xz
[00:39:36] *** Quits: mmmonk (mmmonk@moz-F145F0FF.xlshosting.net) (Ping timeout)
[00:39:36] *** Quits: thiez (thiez@moz-BF669398.student.utwente.nl) (Ping timeout)
[00:39:38] <strcat> compression flags aren't needed with either GNU tar or bsdtar
[00:39:49] <FreeFull> tar isn't as bad as dd
[00:39:56] <strcat> just need to know 2 cmds ;p
[00:39:58] *** Quits: enand (erik@67F9F6F9.5AF75EBF.841A3ED3.IP) (Ping timeout)
[00:40:03] <strcat> and a third if you want to list contents
[00:40:05] *** Quits: dlat (dlat@moz-6CE1A4.sickos.org) (Ping timeout)
[00:40:07] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[00:40:08] *** Joins: dlat (dlat@moz-6CE1A4.sickos.org)
[00:40:13] *** Quits: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP) (Ping timeout)
[00:40:22] *** Quits: bharadwaj (uid11995@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[00:40:34] *** Quits: alisdair (textual@moz-C336018C.dia.static.qwest.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:40:44] *** Joins: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP)
[00:40:55] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:41:12] * ChrisMorgan used dd to extend his Ubuntu/Debian loop disk image from 1GB to 2GB on his Android tablet
[00:41:18] <strcat> bsdtar is the best though ;)
[00:41:25] *** Quits: IanCormac841 (User@EBD26470.2A8D8854.67DFF8B4.IP) (Ping timeout)
[00:41:35] *** Joins: IanCormac84 (User@1FAF0ED2.2A8D8854.67DFF8B4.IP)
[00:41:44] <companion_cube> error: cannot borrow immutable dereference of & pointer as mutable
[00:41:45] <strcat> ChrisMorgan: meh, fallocate command is best for that
[00:41:54] *** Quits: Rym (y@7E7DE7A.DD7E53BE.8772DA20.IP) (Ping timeout)
[00:41:54] <strcat> ChrisMorgan: growing files creates fragmentation ;p
[00:42:07] <companion_cube> how can I borrow a ~[foobar] with a mutable & ?
[00:42:25] <companion_cube> (context: a recursive algo using a stack)
[00:42:27] <strcat> although if it's on the sdcard then it doesn't matter anyway because I guess it's fat
[00:42:30] <ChrisMorgan> companion_cube: just to clarify the error, you're trying to take &mut x from a &x, which can't be done.
[00:43:16] <companion_cube> can i write    f(&mut foo)    if foo : ~[foobar]    and f : fn(&mut ~[foobar]) ?
[00:43:46] <ChrisMorgan> companion_cube: typically you want &mut [T] rather than &mut ~[T].
[00:43:51] <strcat> ChrisMorgan: http://libarchive.org/ <3
[00:43:59] <companion_cube> oh, it works!
[00:44:11] <companion_cube> ChrisMorgan: I can't because the borrowing function may push things on the stack
[00:44:27] <ChrisMorgan> Yep, that's a case where you do need &mut ~[T].
[00:44:29] <companion_cube> http://vrac.cedeela.fr/lambda.rs  it works anyway!
[00:44:35] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[00:44:37] <companion_cube> (it's a lambda calculus interpreter)
[00:44:51] <FreeFull> rusti: let mut x : ~[u8] = ~[3,4]; x.borrow_mut()[1] = 0; x
[00:44:54] <ChrisMorgan> @? ☹
[00:44:54] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (Ping timeout)
[00:44:58] *** Joins: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP)
[00:44:59] -rusti- timeout triggered!
[00:45:01] <ChrisMorgan> companion_cube: avoid @ like the plague.
[00:45:02] <FreeFull> rusti: let mut x : ~[u8] = ~[3,4]; x.borrow_mut()[1] = 0; x
[00:45:07] -rusti- timeout triggered!
[00:45:14] <companion_cube> hmmm, it kind of works actually...  I have to check things
[00:45:23] <companion_cube> ChrisMorgan: I know, it's getting deprecated
[00:45:24] <ChrisMorgan> companion_cube: if you need such semantics, use Rc instead.
[00:45:32] <companion_cube> ok
[00:45:34] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[00:45:34] <FreeFull> rusti: let mut x : ~[u8] = ~[3,4]; x.borrow_mut()[1] = 0; x
[00:45:43] -rusti- timeout triggered!
[00:45:45] <FreeFull> Dammit rusti
[00:45:53] <ChrisMorgan> Also prefer `enum Term` to `enum term`.
[00:46:29] <strcat> FreeFull: my laptop is busy ;p
[00:46:55] <FreeFull> strcat: Compiling rustc? =P
[00:47:13] <strcat> no
[00:47:34] <strcat> I have four VMs running though to test something
[00:47:40] <ChrisMorgan> companion_cube: in evalrec, the lieftime isn't necessary. Explicit lifetimes are only necessary for linking things together, especially for return values.
[00:47:45] *** kimundi is now known as zz_kimundi
[00:47:51] <ChrisMorgan> s/lieftime/lifetime 'r/
[00:48:02] <companion_cube> I've removed it, thansk
[00:48:11] <companion_cube> working on translating it to Rc<>
[00:49:01] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[00:49:24] *** Joins: enand (erik@67F9F6F9.5AF75EBF.841A3ED3.IP)
[00:49:24] <ChrisMorgan> type Env rather than type env, too. (CamelCase for types and variants, snake_case for others.)
[00:49:55] *** Parts: jroweboy (jrowe7@AB363EF2.5C78C1C8.71765F8E.IP) ()
[00:49:58] <companion_cube> is there a macro for making lots of Rc::new?
[00:51:10] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[00:51:18] *** Joins: alisdair (textual@72413E92.540AD73.EDFBF83F.IP)
[00:51:34] *** Joins: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP)
[00:51:36] *** Quits: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP) (Client exited)
[00:53:37] <huon> rusti: macro_rules! such_rc { ($($e: expr),*) => { [$(std::rc::Rc::new($e)),*] } } such_rc!(1, 2, 3, 4)
[00:53:39] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[00:53:42] -rusti- pastebinned 8 lines of output: http://sprunge.us/HJCc
[00:53:53] <huon> rusti: macro_rules! such_rc { ($($e: expr),*) => { [$(std::rc::Rc::new($e)),*] } } such_rc!(1, 2, 3, 4).to_owned()
[00:53:54] -rusti- <anon>:11:105: 11:106 error: unexpected token: `.`
[00:53:54] -rusti- <anon>:11         macro_rules! such_rc { ($($e: expr),*) => { [$(std::rc::Rc::new($e)),*] } } such_rc!(1, 2, 3, 4).to_owned()
[00:53:54] -rusti-                                                                                                                   ^
[00:53:54] -rusti- application terminated with error code 101
[00:54:01] <huon> rusti: macro_rules! such_rc { ($($e: expr),*) => { [$(std::rc::Rc::new($e)),*] } } (such_rc!(1, 2, 3, 4).to_owned())
[00:54:02] -rusti- pastebinned 8 lines of output: http://sprunge.us/Acgb
[00:54:09] <huon> bah
[00:54:12] <huon> something like that
[00:54:23] <ChrisMorgan> Is it intended that one be able to write box(RC) expr?
[00:55:09] <huon> I don't believe the full sort of box is worked out, but `box(Rc) 1` would theoretically work in future, yes
[00:55:14] *** Quits: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net) (Ping timeout)
[00:55:18] <huon> something like it, at least
[00:56:03] <companion_cube> I may have missed something, but rust seems to want *foo.borrow() instead of just *foo
[00:56:08] <companion_cube> when foo is a Rc<foobar>
[00:56:15] *** Quits: alisdair (textual@72413E92.540AD73.EDFBF83F.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:56:17] <ChrisMorgan> rusti: println!("{:?}", box(GC) 2);
[00:56:19] *** Joins: alisdair (textual@72413E92.540AD73.EDFBF83F.IP)
[00:56:24] -rusti- timeout triggered!
[00:56:28] <ChrisMorgan> rusti: println!("{:?}", box(GC) 2);
[00:56:34] -rusti- timeout triggered!
[00:56:44] <ChrisMorgan> strcat: rusti is timing out a *lot* of the time here…
[00:56:46] <ChrisMorgan> rusti: println!("{:?}", box(GC) 2);
[00:56:48] -rusti- std::gc::Gc<int>{ptr: @2, marker: std::kinds::marker::NoSend}
[00:56:49] -rusti- ()
[00:57:24] <ChrisMorgan> strcat: did you see my suggestion of falling back to {:?} if you get a "failed to find an implementation of trait std::fmt::Show for X" error?
[00:58:13] *** Quits: alisdair (textual@72413E92.540AD73.EDFBF83F.IP) (Ping timeout)
[00:58:28] <huon> companion_cube: older versions of Rust don't have overloadable deref
[00:58:35] <huon> ChrisMorgan: sounds annoying to implement :P
[00:58:49] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (Ping timeout)
[00:58:49] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[00:58:49] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[00:58:49] *** Quits: halosghost (halosghost@moz-A41005D9.org) (Ping timeout)
[00:58:53] <companion_cube> ok, so it's fixed in more recent versions, I guess
[00:59:00] <huon> yeah, like 12 hours ago
[00:59:03] <huon> or something
[00:59:04] <companion_cube> otherwise Rc would be very ugly to use
[00:59:04] <companion_cube> :D
[00:59:09] * huon isn't a clock
[00:59:09] <ChrisMorgan> companion_cube: it was.
[00:59:43] <ChrisMorgan> Is rusti's code available?
[00:59:56] <huon> https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[01:00:10] <huon> well, I guess it's jsut an || rustc ... invocation
[01:00:18] <huon> maybe
[01:00:24] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[01:00:51] <penguins916> Hey all, quick noob question: Rust doesn't support generics/template specialization or function overloading of any kind right? I keep getting errors like: "conflicting implementations for trait"
[01:01:03] *** Quits: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP) (Ping timeout)
[01:01:19] <Havvy> Conflicting implementations for trait mean that a trait is being implemented twice.
[01:01:21] <ChrisMorgan> Correct.
[01:01:29] <ChrisMorgan> penguins916: https://github.com/mozilla/rust/issues/7059
[01:02:00] <sinistersnare> what function from time can get me the amount of seconds (or nanos ) since the epoch?
[01:02:20] <sinistersnare> oh
[01:02:28] <sinistersnare> precise_time_ns i guses
[01:03:01] <penguins916> ok. Good to know. Thanks Havvy and ChrisMorgan! 
[01:03:36] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[01:03:48] *** Quits: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca) (Connection reset by peer)
[01:04:25] *** Joins: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca)
[01:04:52] *** Joins: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP)
[01:05:09] <companion_cube> http://vrac.cedeela.fr/lambda.rs  I gave up on Rc, it's too painful with 0.9
[01:05:27] <ChrisMorgan> companion_cube: that's why you use master!
[01:06:01] <companion_cube> I'd have to find how to package a git repo for my distribution...
[01:06:27] <sinistersnare> whats your distro, companion_cube ?
[01:06:36] <companion_cube> gentoo
[01:07:04] <sinistersnare> i thought gentoo users considered packaging a challenge!
[01:07:14] <sinistersnare> suprised there is no rust package
[01:07:15] <ChrisMorgan> companion_cube: can't you just clone the repository, ./configure [--prefix=/opt/rust] && make && make install?
[01:07:16] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[01:07:18] <companion_cube> hmmm it may be available actually, if I enable some flag
[01:07:27] <strcat> ChrisMorgan: it's timing out because my laptop is busy
[01:07:35] * ChrisMorgan presumed that would be it
[01:07:39] <strcat> and it runs at low priority
[01:08:06] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:08:29] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:09:16] <strcat> rusti: 2
[01:09:20] -rusti- 2
[01:09:22] <companion_cube> sinistersnare: there is, but it provides rust 0.9
[01:09:27] <strcat> rusti: 2 + 2
[01:09:28] -rusti- 4
[01:09:31] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:09:33] <companion_cube> (and maybe rust master if I can find how to enable it)
[01:09:46] <companion_cube> anyway, i'm glad I could write this small interpreter
[01:09:47] <strcat> ChrisMorgan: the root is less than 500MiB but I really don't have enough memory to put that as a tmpfs
[01:10:13] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:10:23] <sinistersnare> companion_cube, sounds fun
[01:10:23] <ChrisMorgan> companion_cube: you're not willing to build it yourself?
[01:10:54] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[01:11:01] <companion_cube> i'd rather not, especially given gentoo should be able to build it (it had to even for 0.9)
[01:11:17] <FreeFull> rusti: let mut x : ~[u8] = ~[3,4]; x.borrow_mut()[1] = 0; x
[01:11:18] -rusti- pastebinned 11 lines of output: http://sprunge.us/GSSd
[01:11:33] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Connection reset by peer)
[01:11:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[01:11:53] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[01:11:56] <j3rky> companion_cube: i'm running Gentoo, too, and i'm pretty happy with grabbing master from git
[01:12:13] <companion_cube> j3rky: is it possible with the standard rust overlay?
[01:12:35] <j3rky> companion_cube: i have not tried the overlay. it's not an official overlay, but third party, i think
[01:12:51] <j3rky> but i think the overlay is pretty current as well
[01:12:53] *** Joins: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net)
[01:12:57] <j3rky> master is still gonna be more up to date though
[01:13:10] <j3rky> getting it up and running is super easy
[01:13:37] <j3rky> just follow the instructions on the Rust tutorial page. i've had no problems compiling/installing rust. went smooth like butter.
[01:14:37] <j3rky> when it's all done, it puts the compiler into /usr/local/sbin
[01:14:50] *** Joins: calatalee (Mibbit@moz-4B4DE3E7.dsl.teksavvy.com)
[01:15:00] <j3rky> there are no other files generated, except in your local git repository, so it's pretty clean
[01:15:01] *** Quits: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP) (Ping timeout)
[01:15:08] <calatalee> is librp
[01:15:24] <calatalee> is libprim still in the works
[01:15:24] *** Joins: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP)
[01:15:40] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Client exited)
[01:17:20] <calatalee> or is it dead, I am thinking about doing some bare metal ARM projects with rust
[01:17:44] <calatalee> after seeing neykov's armboot
[01:18:21] <companion_cube> ok, it looks like it works with the overlay
[01:18:29] <companion_cube> just enabling the "**" keyword for rust
[01:18:31] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[01:18:38] <companion_cube> good!
[01:20:27] *** Quits: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) (Quit: meyer)
[01:21:11] *** Quits: calatalee (Mibbit@moz-4B4DE3E7.dsl.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[01:21:19] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[01:21:30] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[01:21:42] *** Quits: Lovot (root@moz-64ED673A.knology.net) (Ping timeout)
[01:22:07] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[01:22:45] *** Quits: untwisted (untwisted@moz-EA89F9D9.hsd1.fl.comcast.net) (Client exited)
[01:22:49] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[01:22:58] *** Joins: Lovot (root@moz-64ED673A.knology.net)
[01:23:01] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[01:23:45] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[01:24:11] *** Quits: q66 (q66@moz-58A11F6A.range86-156.btcentralplus.com) (Ping timeout)
[01:25:13] *** Quits: lahwran (lahwran@lahwran.net) (Quit: ZNC - http://znc.in)
[01:26:01] *** Joins: lahwran (lahwran@lahwran.net)
[01:26:02] *** Quits: lahwran (lahwran@lahwran.net) (Input/output error)
[01:26:15] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[01:26:45] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[01:26:59] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:27:54] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:28:45] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:29:10] *** Joins: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br)
[01:29:24] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[01:29:29] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[01:29:32] *** Quits: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[01:29:48] *** Joins: lahwran (lahwran@lahwran.net)
[01:31:40] *** Quits: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net) (Ping timeout)
[01:33:12] *** Joins: sellout (Adium@moz-EE794C0C.hlrn.qwest.net)
[01:33:21] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[01:33:24] *** Quits: mpiechotka (mpiechotka@moz-CF1931C2.dynamic.mnet-online.de) (Quit: mpiechotka)
[01:33:36] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:34:20] *** Quits: IanCormac84 (User@1FAF0ED2.2A8D8854.67DFF8B4.IP) (Ping timeout)
[01:34:21] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[01:34:31] *** Joins: IanCormac84 (User@E48E67C3.64D641E5.67DFF8B4.IP)
[01:35:12] <dougxxx> anyone here played with atom? Idly messing around trying to make some syntax highlighting work for rust.
[01:35:24] <dougxxx> (it's not going very well. :P)
[01:36:49] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[01:37:25] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[01:38:15] *** Joins: Rym (y@53AB2835.7AD968F9.51C6DE68.IP)
[01:39:05] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[01:41:14] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[01:41:58] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[01:42:00] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:42:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:42:17] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[01:42:20] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:42:32] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[01:42:37] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:43:04] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[01:43:26] *** Joins: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:44:27] <quux00> How is one supposed to share a std::sync::atomics type, such as AtomicBool, between tasks?  I am unable to find a way to do it.
[01:45:38] <quux00> They don't implement clone and they are not copyable.
[01:46:06] *** Joins: dylukes (dylukes@248B55A4.F8D26944.F04EE89E.IP)
[01:46:08] <quux00> The only way I can think to do it is wrap it in an Arc, but then it's pointless to use a Atomic type.  Ideas?
[01:46:35] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:47:02] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[01:47:07] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[01:47:24] <ChrisMorgan> dougxxx: https://github.com/zargony/atom-language-rust
[01:47:32] <dougxxx> ah! yay~
[01:47:34] <ChrisMorgan> dougxxx: www.reddit.com/r/rust/comments/1ztahv/rust_language_support_in_atom/
[01:47:40] <dougxxx> ^___^ 
[01:47:44] <ChrisMorgan> http://www.reddit.com/r/rust/comments/1ztahv/rust_language_support_in_atom/
[01:47:50] <dougxxx> I was busy trying to do that myself, and failing. :)
[01:48:05] *** Joins: halosghost (halosghost@moz-A41005D9.org)
[01:48:11] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[01:48:22] *** Quits: IanCormac84 (User@E48E67C3.64D641E5.67DFF8B4.IP) (Ping timeout)
[01:48:26] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:49:32] *** Joins: IanCormac84 (User@EE22D31D.64D641E5.67DFF8B4.IP)
[01:49:33] <aatch> quux00, you're supposed to access it via some sort of pointer.
[01:49:50] <kmc> the std lib has a lot of "static mut" atomics
[01:49:50] <quux00> As in an unsafe pointer?
[01:49:52] <aatch> if you cloned it, you'd get a new value, in a new place.
[01:49:58] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[01:50:09] <kmc> basically I don't think there's a nice safe user-level interface to those things
[01:50:09] <aatch> quux00, not necessarily.
[01:50:12] <dougxxx> right, on to a real question: why don't statically linked crates remember the libraries they were linked against?
[01:50:20] <quux00> I was hoping clone() on atomics would act like clone on Arc
[01:50:23] <aatch> acrichto, ^^
[01:50:34] <aatch> quux00, no, the atomic types are lowest level here.
[01:50:37] <dougxxx> It's really annoying having to #[link] in the application to a crate that has dependencies.
[01:50:38] <strcat> quux00: if you need to be able to share it as a refcounted ptr, use Arc
[01:50:49] *** Quits: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP) (Ping timeout)
[01:50:55] <aatch> thin wrappers over the underlying atomic operations.
[01:50:56] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[01:50:56] *** Joins: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP)
[01:51:37] <quux00> Arcs use mutes and locks, so they don't sound like CAS operations, so I wanted an Atomic.
[01:51:47] <kmc> quux00: well where do you want the atomic boolean to be allocated?
[01:51:48] <quux00> s/mutes/mutexes/
[01:51:51] <kmc> statically? use "static mut"
[01:51:57] *** Quits: leowoe (Leo@moz-8A007533.dip0.t-ipconnect.de) (Quit: Leaving.)
[01:51:59] <quux00> shared between two tasks
[01:52:00] <kmc> dynamically? who is responsible for deleting it? is it refcounted or uniquely owned?
[01:52:06] <kmc> "shared by two tasks" is not a location in memory
[01:52:09] <acrichto> dougxxx: a static library is just a collection of object files, so there's no way to encode dylib dependencies
[01:52:20] <quux00> I tried static mut, but I get an error: function calls in constants are limited to struct and enum constructors
[01:52:23] <strcat> quux00: Arc doesn't use a mutex or rwlock
[01:52:25] <dougxxx> Can I use a macro somehow to work around it?
[01:52:29] <strcat> that's MutexArc/RWArc
[01:52:33] <quux00> when I try: static mut ab: AtomicBool = AtomicBool::new(false);
[01:52:36] *** Quits: sunfish (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[01:52:45] <dougxxx> It's *really annoying* having to put the link tags in every application that uses a crate.
[01:52:45] <aatch> quux00, oh, use INIT_ATOMIC_BOOL
[01:52:56] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[01:52:58] <kmc> quux00: for this low level stuff the best bet is to grep to see how libstd itself uses it
[01:53:06] <quux00> OK.  I'll look into that.
[01:53:10] <aatch> That's what the constants are there for.
[01:54:18] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[01:54:22] <kmc> don't know if people here have seen it, but http://sebastiansylvan.com/2012/12/01/garbage-collection-thoughts/ has some interesting ideas that are quite relevant to Rust; also it's good marketing for the language :)
[01:55:08] <kmc> huh this article is quite old, I heard about it today and assumed it was new :)
[01:55:12] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[01:55:41] *** Quits: IanCormac84 (User@EE22D31D.64D641E5.67DFF8B4.IP) (Ping timeout)
[01:55:42] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[01:55:49] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[01:56:25] <aatch> kmc, hmm, does Dec 2012 pre-date the region system we have now?
[01:56:34] *** Joins: IanCormac84 (User@EEA893D.2A8D8854.67DFF8B4.IP)
[01:56:39] *** Joins: jroweboy (jrowe7@D931AEC7.B8CF4085.71765F8E.IP)
[01:56:48] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[01:57:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[01:57:40] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[01:58:16] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[02:00:08] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[02:01:04] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[02:02:12] *** Joins: Erik_ (Erik_S@moz-6691E309.hlrn.qwest.net)
[02:03:04] <aatch> Hmm, looks like it does, more or less, pre-date the current incarnation of the region/borrowing system.
[02:03:37] *** Joins: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br)
[02:04:22] <quux00> strcat: sorry, just noticed your comment about Arc's - I have a question on that.
[02:04:50] <quux00> Arc's are for immutable state, but the point of an Atomic (like AtomicBool) is to allow me to change it as needed
[02:04:56] <quux00> so would an Arc work here?
[02:05:10] <aatch> quux00, no
[02:05:27] <quux00> OK. Didn't think so.  
[02:05:27] *** Joins: IanCormac841 (User@EF4358DD.2A8D8854.67DFF8B4.IP)
[02:05:39] <quux00> So is the only way to share an Atomic via a static mut?
[02:05:40] *** Quits: IanCormac84 (User@EEA893D.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:05:49] <aatch> Arc is intended for when you need to share a large, immutable, datastructure.
[02:05:50] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:05:58] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[02:06:02] <quux00> Right.
[02:06:08] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:06:08] <aatch> quux00, not necessarily, but by itself, yes.
[02:06:25] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[02:06:25] <quux00> OK. 
[02:06:39] <quux00> When I try it as a static the compiler says I have to wrap calls to it in unsafe blocks.
[02:06:42] <aatch> the atomic types are mostly intended as building blocks for other concurrent data structures.
[02:06:55] <aatch> quux00, that's because it's considered unsafe to access static muts
[02:07:02] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:07:10] <strcat> aatch: Arc will work for this soon
[02:07:13] <strcat> when it switches to Share
[02:07:15] <aatch> the compiler has no knowledge of the atomic types (beyond them existing)
[02:07:16] *** Joins: alisdair (textual@24DAD211.3AC3B53F.7CD5C64F.IP)
[02:07:21] <strcat> but if you can use a global you might as well
[02:07:53] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:08:21] <quux00> OK.  That's what I'll do.  Just seems like there should be a better way than setting a "global".  Maybe the future Arc will solve that.
[02:08:30] *** Quits: dylukes (dylukes@248B55A4.F8D26944.F04EE89E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:08:38] <aatch> strcat, Share instead of Freeze, I assume?
[02:08:57] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:09:00] <aatch> quux00, Arc would work, but wouldn't be better.
[02:09:13] <kmc> do we not have RWArc anymore?
[02:09:20] <aatch> if you're sharing a single atomic boolean like that.
[02:09:23] <aatch> kmc, we do.
[02:10:02] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[02:10:10] *** Quits: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[02:10:33] <strcat> aatch: yes
[02:10:35] <kmc> but I guess that would defeat the atomicity
[02:10:40] <strcat> kmc: we still have MutexArc and RWArc
[02:10:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:10:52] <strcat> but those use a mutex and rwlock
[02:10:56] <kmc> quux00: I think you should start by establishing how/where you want this atomic boolean to be allocated
[02:10:56] <aatch> quux00, the issue is that the data has to live somewhere, you can have your AtomicBool live in global storage, or on the heap, but you can't "just" share it.
[02:11:02] <kmc> and there will be a way (safe or unsafe) to make that happen
[02:11:10] <strcat> and they currently don't use a fast mutex in any case
[02:11:17] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:11:29] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:11:53] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[02:11:53] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:11:56] <quux00> I haven't look at their impl in Rust, but the whole point of Atomics in other langs is to share it and avoid mutexes/locks as much as possible.
[02:12:11] <kmc> yes, but you still need to allocate them somewhere
[02:12:11] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:12:15] <aatch> quux00, yes, but they still need to live somewhere
[02:12:19] <kmc> in C you might have a global atomic variable, or it might be in some struct
[02:12:22] <kmc> or just malloced by itself
[02:12:25] <strcat> Arc doesn't require a lock and will let you put Share stuff inside it when the changes to that are done
[02:12:33] <kmc> but it lives somewhere in the address space of both threads
[02:12:34] <strcat> or you can use a global
[02:12:36] <strcat> either works
[02:12:40] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[02:12:47] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[02:12:56] <kmc> or you can use Arc<uint> and unsafely cast a &uint to a &mut AtomicBool
[02:13:01] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[02:13:13] <strcat> I'm waiting for the Share change to happen before submitting a concurrent hash table, because that way it can work both inside/output of an Arc
[02:13:35] <kmc> or better yet, a &'t uint to a &'t mut AtomicBool; maybe that's actually memory-safe
[02:13:40] <strcat> Arc<ShardMap<K, V>> would have fine-grained locking + you can share it between threads easily
[02:13:45] <bvssvni> anyone got the stream for meetup working?
[02:13:51] <strcat> and atomics would work in it too
[02:13:54] <strcat> since they'd be Share
[02:13:55] <aatch> strcat, do you know the status of Share btw?
[02:14:05] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[02:14:20] *** Sorella_ is now known as Sorella
[02:14:42] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[02:14:45] <bvssvni> https://air.mozilla.org/rust-meetup-march-2014/
[02:14:55] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:15:13] *** Quits: halosghost (halosghost@moz-A41005D9.org) (Ping timeout)
[02:15:20] <kmc> quux00: so there's no lock or refcounting to access the inside of the Arc, but you still need to refcount when Arcs are created (by clone) or dropped, and that's because somebody has to manage the memory that actually holds your boolean
[02:15:36] *** Joins: halosghost (halosghost@moz-A41005D9.org)
[02:15:54] <strcat> no overhead that ~ doesn't have though beyond the allocation being larger
[02:16:35] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:16:36] <strcat> since you only pay when you add a new owner
[02:16:57] <strcat> so if the # isn't dynamic, you don't actually pay for refcounts
[02:16:57] <quux00> OK. Yeah, I'm good with storing them in Arcs.  I just want to avoid mutexes, so that seems like a good soln if the Arcs will support it in the future.
[02:17:06] *** Quits: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[02:17:22] <aatch> quux00, still, what *are* you using it for?
[02:17:50] <bollu_> Question: how to I recieve an enum variant if I don't care about it's arguments? 
[02:18:03] <aatch> Variant(..) I think
[02:18:04] <quux00> Right now, I'm mostly playing around with the language.  But I'd like to explore lock free data structures in the future.
[02:18:12] <strcat> atomics and mutexes with very small lock scopes aren't really incredibly different - a good mutex would just reduce to a few cmpxchg attempts before futex
[02:18:33] <aatch> quux00, well, you'd store the atomic inside the datastructure in that case.
[02:18:40] <strcat> which will be 1 attempt if the lock scope is only a few instructions in nearly every case
[02:18:43] <strcat> just do whatever is easiest
[02:18:50] <strcat> channels, shared data, or whatever
[02:18:58] * strcat shrugs
[02:19:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:19:13] <kmc> not all platforms have something like futex do they?
[02:19:20] <bollu_> http://rust-sfml.org/doc/rsfml/window/event/enum.Event.html I want to recieve the Resized event by using match, but Idon't care about x and y. what's the syntax?
[02:19:23] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[02:19:27] <strcat> kmc: they'll still spin on cmpxchg first
[02:19:30] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[02:19:32] <strcat> kmc: afaik
[02:19:33] <bollu_> width and height, not x and y
[02:19:46] <strcat> kmc: windows has fairly efficient locks too (if you use CriticalSection)
[02:20:01] <strcat> (don't use windows mutexes, they're kernel objects shared between processes ;p)
[02:20:14] *** Quits: goffrie (goffrie@moz-C2CB54DA.dsl.ncf.ca) (Ping timeout)
[02:20:19] *** Joins: goffrie (goffrie@moz-4C457620.dsl.ncf.ca)
[02:20:30] <strcat> dunno about freebsd and OS X
[02:20:37] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[02:20:52] *** Parts: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) ()
[02:21:00] <bascule> Win32: we have at least two APIs for everything, because we assuredly got the first one wrong
[02:21:10] <strcat> but using atomics instead of channels or pre-made shared data structures sounds like a quick way to get a bunch of races ;p
[02:21:18] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:21:22] <kmc> bascule: *cough* read() recv() recvfrom() recvmsg()
[02:21:25] <strcat> bascule: POSIX has the separation too, it's just called pshared
[02:21:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:21:36] <strcat> kmc: windows has that too ;)
[02:21:40] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[02:21:40] <kmc> that's my point...
[02:21:40] <strcat> kmc: but it also has another socket API
[02:21:50] <strcat> and another socket API
[02:21:56] * strcat shrugs
[02:22:02] *** Quits: goffrie (goffrie@moz-4C457620.dsl.ncf.ca) (Ping timeout)
[02:22:03] <kmc> or how about Linux adding a flags argument to *every* syscall that returns a fd, just so you can set CLOEXEC atomically
[02:22:15] <bascule> my favorite part of Win32 are the APIs that need to deal with 64-bit values so they have you pass two 32-bit params
[02:22:22] <kmc> which should be the f'ing default but UNIX is bad... anyway
[02:22:27] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Quit: Leaving...)
[02:22:32] <strcat> kmc: yeah POSIX has a lock of horrible ideas.
[02:22:36] <strcat> POSIX locks are especially bad
[02:22:41] *** Quits: Rym (y@53AB2835.7AD968F9.51C6DE68.IP) (Ping timeout)
[02:22:47] <strcat> pthreads have a ridiculously huge API for no reason ;s
[02:22:51] <bascule> how about those SysV semaphores?
[02:22:51] <strcat> over 100 functions
[02:23:03] <strcat> bascule: well if you actually need IPC....
[02:23:09] <strcat> don't use them within a process, just make a semaphore
[02:23:10] * Havvy wonders if somebody will write a mainstream OS in Rust.
[02:23:12] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Quit: )
[02:23:22] <bollu_> aatch: thanks! the {..} worked :)
[02:23:26] <bascule> strcat: it's really cool when things don't clean them up properly so you have to go in and remove them manually
[02:23:42] <strcat>  http://sprunge.us/DbZU I've just been using that ;p
[02:23:46] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:23:52] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[02:23:59] <bascule> Havvy: maybe Julia Evans will rock it out
[02:24:08] <tcsc> Havvy: has anybody even written a mainstream OS in c++?
[02:24:12] <aatch> Havvy, unlikely. Not necessarily because of Rust, but because making an OS is hard, and making it mainstream much, much harder
[02:24:27] <strcat> tcsc: if haiku counts as mainstream
[02:24:34] <tcsc> not really
[02:24:38] <bascule> lol Haiku
[02:24:42] <tcsc> but i guess it's close enough
[02:24:42] <aatch> I mean, BSD has a hard enough time staying in the public consciousness
[02:25:20] *** Joins: goffrie (goffrie@moz-1A16243B.dsl.ncf.ca)
[02:25:24] <kmc> aren't parts of OS X in C++?
[02:25:29] * bascule uses BSD :O
[02:25:36] <bascule> pfsense yo
[02:25:42] <kmc> I mean a large part of the GNU/Linux OS is in C++, if an "OS" is not just a kernel but a gui toolkit, etc.
[02:25:44] <strcat> tcsc: iirc it has firefox2 ;p
[02:25:45] *** Quits: IanCormac841 (User@EF4358DD.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:25:57] <tcsc> kmc: iokit is iirc, so drivers are/can be.
[02:26:02] <strcat> kmc: there's not really a lot of C++ in the core linux system
[02:26:02] <sinistersnare> what is the syntax equivalent for 'public static final' from java in rust? i want global immutable WIDTH and HEIGHT variables
[02:26:22] <aatch> sinistersnare, just `static` in the global scope
[02:26:29] *** Joins: IanCormac84 (User@112891FE.64D641E5.67DFF8B4.IP)
[02:26:29] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[02:26:29] <sinistersnare> aatch, ok thanks
[02:26:34] <kmc> I guess GTK is C natively
[02:26:36] <aatch> more accurately, `static WIDTH : uint = ...`
[02:26:38] <kmc> and Qt is C++ but less popular
[02:26:42] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[02:26:54] <strcat> kmc: qt is way more popular by users of applications
[02:27:07] <strcat> linux is a small share in total ;p
[02:27:09] <tcsc> qt isn't an os...
[02:27:18] <tcsc> by any stretch.
[02:27:30] <strcat> no one is saying qt is an os
[02:27:30] <kmc> but it's one component of what one might call an operating system
[02:27:36] <tcsc> oh
[02:27:38] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[02:27:38] <strcat> kmc: I wouldn't say so
[02:27:41] <tcsc> i misunderstood then
[02:27:47] <kmc> but arguing about what the term "operating system" means is not likely to be interesting
[02:27:57] <sinistersnare> do i put that under the use statements?
[02:28:00] <aatch> kmc, try telling Richard Stallman that.
[02:28:00] <bollu_> kmc: emacs? ;)
[02:28:09] <sinistersnare> compiler says it wants an item, not a let expression
[02:28:10] <Havvy> The GUI toolkit is part of userland.
[02:28:26] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[02:28:28] <aatch> sinistersnare, it's just `static IDENT : Ty = val;`
[02:28:33] <aatch> no lets.
[02:28:38] <kmc> Havvy: the public Win32 API is also implemented in userland
[02:28:45] <sinistersnare> i thought i did
[02:28:52] <aatch> exokernels
[02:29:15] <sinistersnare> https://gist.github.com/sinistersnare/0a30e02c84a442e3c0ca
[02:29:31] <strcat> kmc: for example if I use musl instead of glibc or clang instead of gcc, am I using a different OS? ;p
[02:29:38] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[02:29:43] <aatch> sinistersnare, why do you have the ' there?
[02:29:51] <sinistersnare> yes
[02:30:04] <aatch> sinistersnare, yes is not an answer to that question
[02:30:15] <aatch> sinistersnare, that quote shouldn't be there.
[02:30:29] * strcat would say the OS is whatever you need to get to the point where you can run nethack ;)
[02:30:31] <sinistersnare> oh
[02:30:35] <strcat> and if it can't, it's clearly not an OS
[02:30:41] <bascule> strcat: lolol
[02:30:50] <sinistersnare> :) now time to fix the rest of the errors
[02:30:54] <aatch> strcat, clearly DOOM is the tipping point.
[02:31:38] <Havvy> strcat:  So computers that don't have terminal output don't have OSes?
[02:31:46] <sinistersnare> thanks aatch :)
[02:31:53] *** Joins: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP)
[02:31:53] *** ChanServ sets mode: +o huon
[02:32:06] <aatch> Havvy, output over the network.
[02:32:08] *** Quits: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP) (Connection reset by peer)
[02:32:21] <aatch> if the OS doesn't *support* anything like that, then it's not an OS
[02:32:35] <strcat> Havvy: if I can't play nethack over a serial port, it's too embarrassing to call it an OS ;p
[02:33:13] *** Quits: jadbaires (jadrian@moz-A37AC89A.dsl.telepac.pt) (Quit: Konversation terminated!)
[02:33:19] <brehaut> haha
[02:33:24] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[02:33:39] <Havvy> Has DST made it into the language yet?
[02:34:35] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:34:36] <dougxxx> hm, after pulling, -> unresolved import (maybe you meant `video::*`?)
[02:34:37] <dougxxx> ?
[02:34:47] <dougxxx> use blah now has to be use blah:*?
[02:35:12] <kmc> "use foo::bar" brings into scope bar; "use foo::bar::*" brings in everything defined in the module bar
[02:35:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:35:41] <bascule> Havvy: I think people are still bikeshedding syntax
[02:35:48] <aatch> Havvy, the design hasn't even been finalised yet.
[02:35:50] <aatch> Give it time
[02:35:55] <brehaut> now i want to write a zmachine in rust
[02:36:15] <Havvy> Okay.
[02:36:59] *** Quits: IanCormac84 (User@112891FE.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:37:59] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:37:59] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:38:06] *** Joins: IanCormac84 (User@E34F9E67.2A8D8854.67DFF8B4.IP)
[02:38:47] *** Joins: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[02:39:19] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[02:39:35] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[02:40:06] <dougxxx> hm, that's odd. Ok, so the rust-sdl doesn't compile anymore because it does: "use get_error", where get_error is in sdl.rs.
[02:40:19] <dougxxx> So fixing all the references to be use sdl::get_error fixes it
[02:40:24] <dougxxx> ...but why did that work before? O_o
[02:41:10] <bollu_> are member functions  Snake_Case or snake_case?
[02:41:42] <bollu_> hm, seems to be snake_case
[02:41:58] <FreeFull> dougxxx: Could be that it's still supposed to work but got broken
[02:42:03] <tcsc> i've always thought Snake_Case was the ugliest naming convention
[02:42:36] <strcat> bollu_: we follow the same rules as PEP8 but with 100 as the max column width
[02:42:36] <dougxxx> how would use f ever work, if f is a different module? 
[02:42:42] <Havvy> tcsc:  No. SnAkE_CaSe is.
[02:42:50] <tcsc> Havvy: ugliest that people actually use
[02:42:53] <FreeFull> eSAC_eKANS
[02:42:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[02:43:04] <andrewd18> Hungarian Snake_Case
[02:43:08] <dougxxx> sorry, if f is *in* a different module
[02:43:09] * Havvy throws a pokeball at the eKANS.
[02:43:10] *** Joins: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[02:43:22] <strcat> bollu_: so function_name, method_name, variable_name, CONSTANT_NAME, TypeName, VariantName
[02:43:26] <strcat> and TraitName
[02:43:38] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[02:43:59] <bollu_> strcat: and of course, module_name right?
[02:44:04] <strcat> if it was actually enforced, a few parsing hacks could be removed
[02:44:31] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[02:44:40] <o11c> it's sometimes annoying that enum TypeName { TypeName }  instead of enum TypeName { CONSTANT_NAME }
[02:44:46] <strcat> I don't think foo::<a> would be necessary if all types had to be TypeName and no expressions could be (constants couldn't start with caps either though)
[02:45:05] <strcat> and you'd make i18n break ;)
[02:45:05] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[02:45:08] <strcat> so meh
[02:45:20] <Havvy> How'd that make i18n break?
[02:45:22] <o11c> strcat: post-lexing, you can look at the whole symbol and except constants ...
[02:45:39] <strcat> Havvy: no all languages have lower/upper case
[02:46:00] <Havvy> Ah. Right.
[02:46:02] <o11c> but everybody is supposed to write code in English
[02:46:12] <o11c> seriously, don't use non-ascii variable names
[02:46:17] <Havvy> But not everybody does.
[02:46:19] <strcat> o11c: I agree, but you won't convince everyone of that
[02:46:22] <o11c> for that matter, don't use non-ascii comments
[02:46:32] <strcat> I use non-ascii comments
[02:46:35] <tcsc> it's not like you have foreign language versions of keywords
[02:46:35] <strcat> they're still english
[02:46:56] <o11c> just needs some better stats
[02:47:17] <strcat> o11c: rust source is defined as UTF-8 so I don't see a reason not to use it ;p
[02:47:24] <o11c> "I am 90% certain that this comment is in a language otehr than English. Aborting."
[02:47:45] <bollu_> o11c: so, I suppose you do not approve of this? https://github.com/bollu/equinox/blob/master/src/engine/math.rs#L207
[02:47:50] <strcat> ofc it's not a great idea to use a language that's as portable imo
[02:48:04] <strcat> but using non-ascii unicode in comments is fine
[02:48:32] <o11c> bollu_: point, there are non-ascii characteres still useful for English
[02:48:35] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:48:45] <o11c> it just makes the fingerprint harder
[02:49:07] *** Quits: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[02:49:19] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[02:49:37] * strcat doesn't see a point in making people write code in english
[02:49:59] *** Quits: penguins916 (Mibbit@moz-1EBF1EAD.olin.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[02:50:12] <bollu_> strcat: I'd say uniformity is the reason. and 'cause english is the (2nd?) most spoken language in the world.
[02:50:24] <strcat> if someone doesn't want their project to be as accessible internationally, that's their choice - they could be a company in france developing proprietary software, and it makes it harder to outsource the work ;)
[02:50:28] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:50:45] <YourBestFriend> I wish people outside of IT would care about that
[02:50:47] <bvssvni> it works! https://air.mozilla.org/rust-meetup-march-2014/
[02:50:57] <strcat> bollu_: english is probably the most spoken language in the world considering that nearly all indians know it... unless you mean 'preferred language' then I don't know
[02:50:58] <YourBestFriend> languages are harmful, there's no need to have many of them
[02:51:16] <bollu_> strcat: idk, I think chinese is #1
[02:51:23] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[02:51:23] <bollu_> strcat: I'm not sure though.
[02:51:32] <strcat> bollu_: but many people in china read/write in english, whether or not they speak it
[02:51:36] <strcat> and most indians read/write/speak it
[02:51:38] <bvssvni> english is most wide spread second language
[02:51:44] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:52:04] <bollu_> strcat: and India has around 26 languages or so, so none of the languages are "dominant". English is spoken pretty much everywhere in India, so I guess you're right.
[02:52:19] <bollu_> bvssvni: yeah, true.
[02:52:23] *** Joins: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br)
[02:53:03] * strcat just knows english and french ;p
[02:53:14] *** Joins: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP)
[02:53:14] *** ChanServ sets mode: +o huon
[02:53:31] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[02:54:01] *** Quits: IanCormac84 (User@E34F9E67.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:54:22] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:54:29] <bollu_> come to think of it, I seem to know an absurd number of languages (partially at least...)
[02:54:43] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[02:55:05] *** Joins: IanCormac84 (User@6EEA47FA.2A8D8854.67DFF8B4.IP)
[02:55:05] <bollu_> bvssvni: what's the discussion about (during the rust meetup) ? 
[02:55:35] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[02:56:27] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:56:33] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[02:56:49] <o11c> strcat: obiously you've never had to deal with hundreds of thousands of lines of code documented only in Japanese
[02:57:32] <bollu_> o11c: that's impressive. what codebase was it?
[02:58:09] <o11c> well to be fair, it was only just over 100 kLoC: https://github.com/themanaworld/tmwa
[02:58:13] <strcat> o11c: but once you've learned japanese, think of the job security
[02:58:17] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:59:45] *** Joins: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt)
[02:59:48] <bollu_> o11c: where's the japanese? :D
[03:00:04] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:00:38] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:00:38] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:01:06] <huon> surprise it's an erickt
[03:01:16] <huon> ( https://air.mozilla.org/rust-meetup-march-2014/ has started)
[03:02:04] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[03:02:23] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[03:02:29] <cgaebel> is there an NYC rust community?
[03:02:40] <cgaebel> (prob the wrong time to ask about that, actually)
[03:02:51] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:03:24] <huon> cgaebel: ask the mailing list?
[03:03:24] <sinistersnare> there should be a DC rust community :)
[03:03:34] <andrewd18> huon: have a SD link? I can't seem to get the SD channel and my bandwidth is awful
[03:03:44] <huon> andrewd18: SD?
[03:03:51] <andrewd18> huon: Low Bandwidth
[03:03:52] <cgaebel> sinistersnare: that's a little far for me...
[03:04:04] <sinistersnare> cgaebel, YOU WILL MAKE THE DRIVE!
[03:04:08] <sinistersnare> jk, why not both?
[03:04:09] <huon> andrewd18: oh... if the link on that page doesn't work, I've got no idea :(
[03:04:17] <cgaebel> dude I live in nyc, no freakin' way I'm gonna own a car.
[03:04:25] <bollu_> lol. 
[03:04:49] <sinistersnare> good point
[03:04:56] *** Joins: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:05:02] *** Parts: brehaut (andrew@6D85C12E.2F6BE07D.613E47D1.IP) ()
[03:05:15] <bollu_> holy crap the tabs!
[03:05:50] <huon> bollu_: I currently have 175 open :P
[03:06:15] <erickt> meetup is live! https://air.mozilla.org/rust-meetup-march-2014/
[03:06:32] <erickt> let me know if you have any questions
[03:06:33] *** Quits: IanCormac84 (User@6EEA47FA.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:06:56] <andrewd18> erickt: what's the low bandwidth link for those of us watching streams on potatoes?
[03:07:21] *** Joins: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP)
[03:07:22] *** Quits: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP) (Client exited)
[03:07:31] <sinistersnare> is rust-dev the only mailing list? i want to send out an email asking for DC people
[03:07:33] <erickt> andrewd18: that's an impressive potato you've go there
[03:07:35] <huon> sinistersnare: yes
[03:07:42] <ChrisMorgan> huon: 234!
[03:07:50] <sinistersnare> is it ok if i send an email asking for people that exist in the DC area?
[03:07:51] <erickt> sinistersnare: but feel free to email the list to connect to DC people
[03:08:00] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[03:08:01] <sinistersnare> ok :) awesome
[03:08:08] <huon> ChrisMorgan:
[03:08:08] <huon> 22670150051024339208842996793945853659618105149432332891909162781453188496185286163298606516694886905607365190190959563064612945338703694136857684356961467817193275159683377314353662443780840896397239708288581036699483832395636246310971241224996315914676173236435465798388095261168098119711919219177465172417531870533071210963890951079600651352649259865692984172459046697905169775036847325733034393600000000000000000000000000000000000000000000000000
[03:08:16] *** Joins: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[03:08:20] <sinistersnare> ill send the email to rust-dev@mozilla.org right?
[03:08:27] *** Joins: IanCormac84 (User@4B7128BD.64D641E5.67DFF8B4.IP)
[03:08:30] <sinistersnare> yes, ok thanks :)
[03:08:31] * ChrisMorgan would never be able to use Chrome seriously
[03:08:38] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[03:08:39] * huon <3 tree-style tabs
[03:08:48] <bollu_> wait, I've read this article
[03:08:51] <strcat> ChrisMorgan: you can disable process sandboxing...
[03:09:05] <bollu_> huon: what tree-style tabs?
[03:09:06] <huon> strcat: the main problem I have is the tabs getting really small
[03:09:11] <ChrisMorgan> strcat: no tab scrolling. You just end up with tabs 4px wide.
[03:09:15] <huon> so I can't tell what's what
[03:09:17] <strcat> ChrisMorgan: ah
[03:09:29] <andrewd18> erickt: Yes, it was easier to install Linux on here than it was on my dead badger. However, I'm not seeing the Mar2014 meetup in SD when I click the link to the low bandwidth page (https://air.mozilla.org/channels/AirMoSD/)
[03:09:30] <erickt> andrewd18: well, after a fierce googling for potato video players, I think your best bet may be to wait until after the presentation, there should be a video you can buffer up
[03:09:34] <strcat> I used to use tab groups via vimperator but meh
[03:09:42] <strcat> I got tired of sites draining my battery like mad
[03:09:42] <andrewd18> erickt: Ok, ty.
[03:09:43] <huon> bollu_: https://addons.mozilla.org/en-US/firefox/addon/tree-style-tab/?src=ss
[03:09:45] <bollu_> http://jvns.ca/blog/2014/03/12/the-rust-os-story/ 
[03:09:45] <strcat> with all of their polling
[03:10:05] <bollu_> huon: hm, interesting
[03:10:13] <ChrisMorgan> http://jvns.ca/big.php?q=%3Cscript%3Ealert%28%22xss%22%29%3C/script%3E
[03:10:13] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[03:10:31] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[03:10:33] <bollu_> low bandwidth link: https://air.mozilla.org/san-francisco-152-sd-live-feed/
[03:10:49] <erickt> andrewd18: try https://air.mozilla.org/san-francisco-152-sd-live-feed/
[03:10:50] <strcat> ChrisMorgan: doesn't work here ;s
[03:10:52] <andrewd18> HUZZAH
[03:10:58] <sinistersnare> is the meetup happening right now?
[03:10:58] <bollu_> :)
[03:11:00] <andrewd18> bollu_: erickt: tyvm
[03:11:04] <erickt> sinistersnare: it is!
[03:11:09] <sinistersnare>  as in its 11 o clock here and i should be asleep but watching it anyways? awesome
[03:11:18] <strcat> ChrisMorgan: <title> <script>alert("xss")</script></title> - does that work in ffx?
[03:11:19] <bollu_> question: how do I boot an OS even I write a bootloader?
[03:11:25] * strcat would be surprised ;p
[03:11:34] <strcat> ah nvm I see
[03:11:36] <bollu_> do I have to pop it into a USB drive an mount from it or something?
[03:11:37] <ChrisMorgan> strcat: ?
[03:11:50] <bollu_> cause I'm interested to try this out....
[03:11:55] <erickt> strcat: you're on camera!
[03:11:59] <strcat> ChrisMorgan: it doesn't show me an alert in chromium ;\
[03:11:59] <erickt> ish
[03:12:04] <mcpherrin> bollu_: Well your bootloader can load it from somewhere.  If you're loading it an emulator, you can usually point the emulator in a fle
[03:12:05] <strcat> ChrisMorgan: not sure why
[03:12:09] <mcpherrin> bollu_: *at a file
[03:12:17] <sinistersnare> who is speaking right now?
[03:12:22] <erickt> julia evans
[03:12:25] <sinistersnare> cool
[03:12:27] <huon> strcat: you're famous :P
[03:12:29] <sinistersnare> thats the post i read, yes
[03:12:29] <bollu_> mcpherrin: without an emulator?
[03:12:35] <erickt> sinistersnare: http://jvns.ca/
[03:12:45] <huon> oh, erickt is faster at talking to strcat
[03:12:45] <bollu_> huon:  :)
[03:13:04] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[03:13:13] <mcpherrin> bollu_: Then you have to load it from somewhere your BIOS can load from.  A hard drive, a thumbdrive, a floppy disk, or the network
[03:13:24] <ChrisMorgan> Little known fact: you can actually use just the <title> element
[03:13:29] <mcpherrin> I tend to use the network
[03:13:34] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[03:13:38] <strcat> ChrisMorgan: well you don't need most of the elements anyway ;p
[03:13:43] <strcat> especially closing tags...
[03:13:43] <bollu_> mcpherrin: if I use a thumbdrive, how does it know the location of the bootloader?
[03:13:45] <strcat> stupid html5 ;)
[03:13:45] <ChrisMorgan> Indeed.
[03:13:55] *** Quits: eibwen (kvirc@moz-FBADA4B7.dip0.t-ipconnect.de) (Ping timeout)
[03:13:58] <strcat> although it was like that before
[03:14:05] <strcat> but there are a lot more hacks now
[03:14:06] <mcpherrin> bollu_: starts at byte 0!
[03:14:18] <strcat> ChrisMorgan: I like that they added entity name typos
[03:14:23] <mcpherrin> bollu_: http://en.wikipedia.org/wiki/Master_boot_record
[03:14:25] <strcat> missing semicolon, etc.
[03:14:27] <bollu_> mcpherrin: how do I write to a thumb drive with that precision? -_^
[03:14:40] <bollu_> mcpherrin: and how does the MBR relate to this?
[03:14:48] <mcpherrin> bollu_: the MBR holds a wee bit 'o code
[03:14:55] <mcpherrin> bollu_: that code has to know how to find the rest of the code on the disk
[03:15:21] <mcpherrin> On linux, you'd maybe use 'dd' to write an image you create to a disk
[03:15:32] <mcpherrin> or open /dev/sda1 and write bytes to the right place
[03:15:41] <bollu_> mcpherrin: now, I meant, how do I *write* the bootloader into the first 512 bytes?
[03:15:45] <bollu_> mcpherrin: ah
[03:15:57] <mcpherrin> I'd use `dd`
[03:16:07] <bollu_> mcpherrin: the open /dev/sda* is interesting.
[03:16:15] * strcat hates dd
[03:16:22] <mcpherrin> strcat: haha, whatever, it works :P
[03:16:29] <strcat> I always forget to use pv and then I have to keep sending it signals to see how far it is
[03:16:41] <mcpherrin> strcat: haha, it's okay if you're just writing 512 bytes :)
[03:17:37] <strcat> mcpherrin: meh, I dislike the UNIX-style no output if nothing went wrong ;)
[03:17:45] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[03:17:55] <mcpherrin> strcat: yeah, it's not something I'd want to rely on :)
[03:18:06] <bollu_> strcat: so... I open the /dev/sda* and wb into it? o_O it seems a little risky... 
[03:18:18] <mcpherrin> bollu_: it is risky!
[03:18:21] <bollu_> strcat: if I mess up does it screw up the thumb drive?
[03:18:26] <strcat> mcpherrin: http://ix.io/b4V you can tell I like being spammed with text from a snippet of my aliases ;p
[03:18:30] <mcpherrin> Well you can write something less screwy
[03:18:37] <strcat> more -v!
[03:18:55] <strcat> with nmap I am not even happy with -vvv, need debug output on ;s
[03:18:58] <mcpherrin> except cat -v
[03:19:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:19:32] <strcat> nmap -sP '192.168.1.*' -vvv # still not going to tell you what's going on as it happens
[03:19:37] * strcat shrugs
[03:19:45] <bollu_> what's cling?
[03:19:54] <strcat> bollu_: C++ JIT/interpreter
[03:19:56] <mcpherrin> cling is a c++ interpreter
[03:20:02] <bollu_> strcat: ah.
[03:20:15] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[03:20:23] <mcpherrin> strcat: The problem is when your shit ends up going too slow 'cause it's bottlenecking on writing terminal output :P
[03:20:45] <strcat> mcpherrin: meh, in xterm maybe
[03:20:45] <mcpherrin> strcat: less of a problem if you don't use 9600 baud serial links a lot :P
[03:20:49] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[03:20:49] <strcat> but urxvt and vte skip scroll
[03:21:23] <mcpherrin> yeah skip scroll is essential but that data still has to get to your emulator :)
[03:21:23] <strcat> mcpherrin: well even in xterm it slows stuff down significantly ;)
[03:21:29] <strcat> true
[03:21:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:21:40] <strcat> mcpherrin: I can always just do \rm -r
[03:21:44] <strcat> if I don't want output...
[03:22:32] <bollu_> strcat: what shell do you use?
[03:22:35] <strcat> alias ls='ls -A' is essentially though because dotfiles suck
[03:22:35] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[03:22:44] <strcat> bollu_: zsh
[03:22:56] <strcat> https://github.com/thestinger/dotfiles ;p
[03:23:04] <ChrisMorgan> BTW, strcat: Chrome developer tools shows a console message, "The XSS Auditor refused to execute a script in 'http://jvns.ca/big.php?q=%3Cscript%3Ealert(%22xss%22)%3C/script%3E' because its source code was found within the request. The auditor was enabled as the server sent neither an 'X-XSS-Protection' nor 'Content-Security-Policy' header."
[03:23:09] <ChrisMorgan> I suspected it might be that.
[03:23:12] <bollu_> strcat: ty :)
[03:23:22] <strcat> ChrisMorgan: ah
[03:23:42] <bollu_> strcat: no zshrc?
[03:23:45] <strcat> ChrisMorgan: noscript would likely block it in firefox (and I mean in allow-by-default mode - it has XSS/clickjacking protection)
[03:23:47] <strcat> bollu_: that's in .config
[03:24:17] <strcat> instead of 5 zsh files in ~ I have 1
[03:24:19] <strcat> ;p
[03:24:29] <bollu_> strcat: zshrc?
[03:24:35] <strcat> if only it put stuff in the proper place by default
[03:24:36] <strcat> bollu_: zshenv
[03:24:41] <bollu_> strcat: damn, I meant, why not use oh_my_zsh?
[03:24:43] <strcat> zshrc only runs on interactive shells
[03:24:46] <strcat> bollu_: slow
[03:24:51] <Earnestly> bollu_: Because omz is horrible
[03:24:56] <Earnestly> And should never be used, ever
[03:25:04] * strcat shrugs
[03:25:21] <bollu_> now I feel bad :(
[03:25:23] * ChrisMorgan wants to know why
[03:25:27] <Earnestly> Oh-my-Zsh: Reimplementing zsh with zsh poorly
[03:25:39] <bollu_> hmm, opinion on fish-shell then?
[03:25:40] <Earnestly> Most of the time it's not even zsh, but sh syntax
[03:25:47] <bollu_> I tend to flip between the two
[03:26:00] * ChrisMorgan uses zsh + omz but only because he never got round to scrapping it after trying it
[03:26:07] * FreeFull uses fish
[03:26:08] <strcat> bollu_: fish is better out-of-the-box than zsh
[03:26:13] * sinistersnare likes omz and zsh :)
[03:26:16] <strcat> but zsh is much better with 5 mins of configuration
[03:26:17] <Earnestly> Then there's grml.  A 3000 line zshrc which makes sure you don't switch OSs...
[03:26:17] <sinistersnare> i got you ChrisMorgan 
[03:26:23] <bollu_> strcat: I sense a "but" in that sentence ;)
[03:26:30] * brendanc tried omz and went back to regular zsh in 2 days
[03:26:44] <brendanc> way too slow
[03:26:55] <strcat> bollu_: fish has nice menu complete by default for example, in zsh it takes a few lines to turn on menu complete, LS_COLORS for completion, etc.
[03:27:11] *** Quits: untitaker (untitaker@moz-351DCF1C.adsl.highway.telekom.at) (Ping timeout)
[03:27:18] <strcat> but zsh has better completion files
[03:27:20] <brendanc> but I have a fairly long zshrc already, so omz wasn't that interesting on top of it
[03:27:46] <brendanc> love tab completing remote files with rsync/scp :)
[03:27:55] <bollu_> strcat: ah, I see.
[03:28:00] <strcat> I use some software with sane defaults like i3 ;p
[03:28:03] <Earnestly> bollu_: (fwiw, I haven't looked into fish at all, so no opinion here :P)
[03:28:09] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[03:28:14] <strcat> brendanc: I prefer just using sftp or sshfs
[03:28:37] <brendanc> I use those too, but sometimes you just want to grab a file
[03:28:44] <bollu_> strcat: how is malloc pronounced?
[03:28:57] <cgaebel> mal-loc
[03:28:59] <erickt> bollu_: you mal-lock
[03:29:00] <strcat> alloc with a yummy mmmm sound in front?
[03:29:08] <dougxxx> haha~
[03:29:12] * ChrisMorgan uses i3 also
[03:29:13] <sinistersnare> the way he says it is how 
[03:29:24] <bollu_> sinistersnare: good to know
[03:29:25] <Earnestly> I always say, `ma-lock` :/
[03:29:28] <bollu_> ^^
[03:29:31] <bollu_> yeah, me too
[03:29:50] <sinistersnare> :)
[03:29:52] <cgaebel> wow such efficient malloc
[03:29:57] <strcat> what about mmap
[03:30:00] <cgaebel> zero fragmentation, very fast
[03:30:00] <ChrisMorgan> Earnestly: "ma" is ambiguous
[03:30:01] <cgaebel> wow
[03:30:03] <sinistersnare> easiest when they are the same
[03:30:07] <strcat> how do you pronounce that? ;p
[03:30:15] <huon> strcat: mmmmmmmmmmmmmmm-app
[03:30:18] <Earnestly> ChrisMorgan: Ma as in Mallice
[03:30:27] <ChrisMorgan> s/mallice/malice/?
[03:30:27] <Earnestly> s/ll/l
[03:30:30] <strcat> huon: I say memmap ;p
[03:30:36] <Earnestly> ChrisMorgan: Too slow! :P
[03:30:42] <ChrisMorgan> Earnestly: how lazy of you, dropping the trailing slash.
[03:30:42] <huon> strcat: same, but that's boring :P
[03:30:46] <Earnestly> heh
[03:30:51] <bollu_> strcat: yep
[03:31:02] <jroweboy> Sorry to interrupt this excellent conversation, but what is this error all about? https://gist.github.com/jroweboy/9541653 I've successfully iterated over this same vector elsewhere in the code, but in this one spot I cant
[03:31:16] <Earnestly> Allocoa is how you allocate memory in Hawaii
[03:31:16] <sinistersnare> im definietly pronouncing it mmmmmmmmap from now on
[03:31:26] <huon> jroweboy: routes.iter()
[03:31:27] <sinistersnare> i love c words :)
[03:31:40] <strcat> would you like to buy a vowel?
[03:31:52] <bollu_> so memmove would be mmmove?
[03:31:57] * jroweboy feels embarrassed
[03:32:02] <Earnestly> strcat: Its nt the nix wy
[03:32:06] <brendanc> muhmap
[03:32:07] <jroweboy> that was far too easy :S
[03:32:10] <strcat> http://en.cppreference.com/w/cpp/thread C++11 threads, http://en.cppreference.com/w/c/thread C version based on the C++11 standard
[03:32:27] <huon> jroweboy: don't worry.. the error messages are horrible
[03:32:53] <bollu_> strcat: how hard would it be to write a "modern" shell in rust?
[03:32:58] <strcat> they obviously think C programmers are allergic to vowels
[03:33:01] <strcat> bollu_: well, what's modern?
[03:33:08] <strcat> ipython's qt console is what I think of as modern
[03:33:23] <bollu_> strcat: proper shell scripting, colors, 
[03:33:30] <strcat> shell scripting is dumb ;)
[03:33:51] <strcat> you'd be better of using visual basic 6 :(
[03:33:54] <strcat> off*
[03:34:37] *** Joins: untitaker (untitaker@moz-E333EC7E.adsl.highway.telekom.at)
[03:34:50] <strcat> bollu_: a modern shell has no escape codes and horrible cursor/drawing stuff ;)
[03:34:59] <Earnestly> bollu_: https://github.com/chrisdone/hell
[03:35:02] <strcat> so by definition it also has to be a terminal
[03:35:23] * ChrisMorgan replaces http://jvns.ca/big.php?q=Foo with the valid HTML5 URI data:text/html,<!DOCTYPE%20html><style>@import%20url(http://fonts.googleapis.com/css?family=Open+Sans);head,title{display:block;font:50px%20Open%20Sans,serif;text-align:center;color:%23333;}</style><title>Foo</title>
[03:35:43] <bollu_> Earnestly: ooh, nice
[03:35:51] <sinistersnare> what a great presentation :)
[03:35:54] <Earnestly> bollu_: It's actually surprisingly functional
[03:36:08] <bollu_> Earnestly: brilliant pun :)
[03:36:12] <Earnestly> :p
[03:36:13] <WalrusPony> Why does 'static have that single quote?
[03:36:30] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[03:36:30] <bollu_> actually, good question - how /would/ he free?
[03:36:31] <ChrisMorgan> WalrusPony: it's a lifetime
[03:36:42] <jroweboy> WalrusPony: To make you have to hit the delete key whenever sublime auto inserts a matching ' :p
[03:36:50] <WalrusPony> ChrisMorgan: Where can I read more on lifetimes and what the single quote means?
[03:36:58] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[03:37:27] <bollu_> jroweboy: a fellow sublime text user!
[03:37:37] <sinistersnare> wooohooo subText
[03:37:37] <ChrisMorgan> *Surely* Sublime Text allows more fine rules than that. In Vim, for example, I made it so that delimitMate (a plugin which does such insertion) handles single quotes intelligently.
[03:37:56] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[03:37:58] <jroweboy> WalrusPony: This is probably the most useful link for me while learning http://static.rust-lang.org/doc/master/index.html On this page there is a link to the lifetimes guide
[03:38:08] <bollu_> ChrisMorgan: it does, but no one has updates the rust package
[03:38:17] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:38:22] <Earnestly> ChrisMorgan: https://medium.com/p/433852f4b4d1
[03:38:24] <bollu_> ChrisMorgan: I think I'll take a crack at it during April (after my exams)
[03:38:33] * ChrisMorgan doesn't like such automatic delimiter insertion in general
[03:38:52] <aatch> I like it for '(', '{' and '[', most of the time.
[03:39:01] <aatch> since it's rare I don't need the closing brace.
[03:39:15] <aatch> Although, the system needs to handle me typing it anyway
[03:39:18] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[03:39:32] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[03:40:15] <huon> erickt: is volume of the question-mic low?
[03:40:15] <bollu_> ChrisMorgan: have you checkout out neovim?
[03:40:29] <ChrisMorgan> bollu_: not seriously
[03:40:32] <erickt> huon: was it? or was brson just quiet?
[03:40:48] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:40:49] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:40:49] *** Quits: IanCormac84 (User@4B7128BD.64D641E5.67DFF8B4.IP) (Ping timeout)
[03:40:52] <sinistersnare> who is speaking now?
[03:40:55] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:40:55] <huon> erickt: all of the questions were fairly quiet
[03:40:58] <huon> sinistersnare: pcwalton
[03:41:00] <mcpherrin> Patric Walton
[03:41:02] <sinistersnare> fun!
[03:41:07] *** Joins: IanCormac84 (User@439B1D41.2A8D8854.67DFF8B4.IP)
[03:41:18] <erickt> huon: ok, I'll grab that mike
[03:42:30] <bollu_> is that vim?
[03:42:43] <ChrisMorgan> Earnestly: I find the title of that article a little weird. "Why Atom Can’t Replace Vim"? And then it goes on to talk about something *completely* different. (Sure, it has a passing relevance, but not much.)
[03:43:02] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:43:32] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[03:43:40] <Earnestly> ChrisMorgan: Titles for these kinds of things are usually pretty bad
[03:43:49] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:44:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:44:17] <bollu_> wasn't the language incredibly volatile? how did they write 100kloc?
[03:44:53] <huon> bollu_: s/was/is/
[03:45:03] <huon> I'd guess they used their keyboards
[03:45:08] <bollu_> :)
[03:45:17] <bollu_> I mean, they would have to rewrite large parts of it...
[03:45:19] <erickt> huon: let me know if it's still quiet
[03:45:25] <huon> they spend weeks doing rust upgrades, yeah
[03:45:31] <strcat> bollu_: afaik servo still lags more than a month behind
[03:45:44] <strcat> bollu_: and does stuff like sharing @ between tasks apparently ;p
[03:45:46] * ChrisMorgan wonders why no one has attempted a serious terminal-based web browser with serious stylesheet support. Atom can't replace Vim unless it can run in a terminal.
[03:45:47] <sinistersnare> yeah look at the use statements
[03:45:50] <sinistersnare> all std::
[03:45:53] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[03:46:00] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[03:46:20] <huon> the rand ones become just `use rand...` on master :P
[03:46:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:46:33] *** Quits: zz_kimundi (kimundi@moz-F815AD2B.dip0.t-ipconnect.de) (Ping timeout)
[03:46:33] <Earnestly> ChrisMorgan: Because no one has needed it
[03:46:36] <sinistersnare> exactly!
[03:46:37] <huon> strcat: apparently most of the @'s are now replaced by Js<T>
[03:46:39] <strcat> ChrisMorgan: atom can't replace vim because it's not FOSS and they've said it won't be :P
[03:46:46] <strcat> (and it won't be free as in beer either)
[03:46:47] <ChrisMorgan> strcat: well, that too
[03:46:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:46:56] <andrewd18> I'm amused that this is already devolving into a mini IRC code review
[03:47:38] <bollu_> xD
[03:47:47] * ChrisMorgan hasn't seen a terminal browser with JS support either
[03:47:57] <strcat> ChrisMorgan: and I don't really like the idea of using an editor where google can run js and look at anything I do
[03:48:07] <strcat> it runs google analytics by default ;)
[03:48:15] <ChrisMorgan> :-/
[03:48:17] <Earnestly> ChrisMorgan: atom is another bad emacs clone
[03:48:26] <strcat> doesn't really seem like an emacs clone
[03:48:29] <Earnestly> All editors are mostly bad emacs clones
[03:48:33] <huon> #rust-flames is that way ->
[03:48:37] <ChrisMorgan> Earnestly: Vim?
[03:48:42] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:48:52] <erickt> pcwalton's blog post: http://pcwalton.github.io/blog/2014/02/25/revamped-parallel-layout-in-servo/
[03:49:16] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[03:49:48] <akhosrav> ChrisMorgan: emacs is a bad vim clone obviously
[03:49:57] <Earnestly> strcat: By clone, I mean, they have a lot of functions that do things, then they get bound to keys.  So if you want a key to delete a word, and delete a sentence, you need two keys.  They don't follow the motion/verb model of vim, and most that try, are really just the latter in disguise :P
[03:50:03] *** Joins: zz_kimundi (kimundi@moz-262F3D8F.dip0.t-ipconnect.de)
[03:50:15] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[03:50:22] *** zz_kimundi is now known as kimundi
[03:50:26] <huon> rusti: enum Editor { Atom, Emacs, Vim } Atom == Emacs.clone()
[03:50:29] <Earnestly> strcat: Basically, many new editors are either a clone of emacs or vim, but worse.  (prettier though)
[03:50:30] -rusti- pastebinned 14 lines of output: http://sprunge.us/JYHM
[03:50:40] <huon> nope, sorry, not a clone :P
[03:50:50] <ChrisMorgan> huon: you forgot to derive Clone.
[03:50:52] <strcat> Earnestly: but you can use modal bindings in emacs and they actually do a pretty good job of it
[03:50:57] <strcat> vi(m) modes in other editors are awful
[03:51:04] <ChrisMorgan> All Vim clones are bad Vim clones, too. Which is kinda funny, given Vim was a clone of Vi…
[03:51:06] <huon> ChrisMorgan: you can't just derive clone for an editor
[03:51:12] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[03:51:12] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[03:51:15] <bollu_> Earnestly: sublime text has a pretty nice vim emulation mode 
[03:51:17] <Earnestly> strcat: evil-mode is quite excellent yeah
[03:51:18] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[03:51:19] <huon> that would be *crazy*
[03:51:22] <Earnestly> bollu_: Nope
[03:51:22] <mcpherrin> strcat: Evil mode in Emacs is the best editor
[03:51:22] <ChrisMorgan> huon: then you should have defined it. Careful of the max IRC line length
[03:51:23] <strcat> ChrisMorgan: evil is not bad
[03:51:32] * ChrisMorgan hasn't used evil
[03:51:32] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[03:51:36] <strcat> bollu_: the sublime text vim mode is not really very good ;p
[03:51:42] <strcat> missing too much
[03:51:57] <bollu_> strcat: not the deault one
[03:51:58] <bstrie> let's just rewrite vim in rust
[03:52:08] <bstrie> who volunteers
[03:52:11] <bollu_> strcat: people have written packages for vim emulation which are pretty nice
[03:52:19] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[03:52:25] <huon> bstrie I heard this guy "kibwen" on reddit volunteering
[03:52:25] <bstrie> vimulation
[03:52:34] *** Joins: jaredly (Mibbit@moz-C4E51CD4.hsd1.ut.comcast.net)
[03:52:53] <bstrie> huon: nah I know that guy, he talks bug but he's always trying to pass the real work off on some poor sap
[03:52:58] <mcpherrin> bstrie: I want to rewrite vim in rust >:D
[03:53:01] <bstrie> s/bug/big
[03:53:01] <strcat> write something saner than vim
[03:53:06] <bollu_> ^^ this
[03:53:10] <mcpherrin> Actually I want emacs but with the vim ui
[03:53:18] <mcpherrin> I like emacs design
[03:53:24] <mcpherrin> but I finger-memory vim
[03:53:27] <sinistersnare> when is western time do these usually end? i must sleep soon...
[03:53:27] <Earnestly> mcpherrin: evil-mode is not far off in that regard
[03:53:32] <aatch> Write a text editor in Rust, anything good should take from several source.
[03:53:37] <Earnestly> comint-run ❤
[03:53:39] <aatch> sources*
[03:53:40] * strcat doesn't like the design of either but is happy using vim and would be happy with evil mode
[03:53:41] <huon> bstrie: pathetic! do you know if he hangs out in #rust at all? we should tell him to do some work
[03:53:47] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:53:59] <mcpherrin> Unfortunately I don't need a new editor enough to get it done
[03:54:05] <ChrisMorgan> "Vim-like text editor" is on my list of things to do in Rust, but it's at #4 or so so it'll never happen with certainty > 0.97.
[03:54:19] <mcpherrin> ChrisMorgan: yeah, exactly :P
[03:54:20] <bollu_> I can't get used to the whole modal thing
[03:54:29] <mcpherrin> vim doesn't have modes
[03:54:31] <mcpherrin> that's a lie
[03:54:35] <mcpherrin> ;)
[03:54:38] <jaredly> How close are we to getting fork/join paralellism? Just read http://smallcultfollowing.com/babysteps/blog/2013/06/11/data-parallelism-in-rust/ but couldn't find anything more...
[03:54:48] <aatch> Am I correct in saying that mod items can only be private or public?
[03:55:07] *** Quits: IanCormac84 (User@439B1D41.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:55:14] <Earnestly> vim is a great text editor, only lacking a decent operating system
[03:55:34] <mcpherrin> Earnestly: If I write an editor, it'll definitely be capable of being its own userspace ;)
[03:55:36] <huon> aatch: aren't they the only privacies anyone can be?
[03:55:37] *** Joins: IanCormac84 (User@AEEE81F5.64D641E5.67DFF8B4.IP)
[03:55:46] <Earnestly> mcpherrin: \o/
[03:55:51] <bollu_> Earnestly: that taunt is the other way around right?
[03:55:52] <huon> jaredly: work is progressing on the Share kind
[03:55:54] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[03:56:00] <mcpherrin> PID1 is your editor-server
[03:56:11] <aatch> huon, yes, but there's also "Inherited"
[03:56:13] <Earnestly> bollu_: Yes
[03:56:20] <jroweboy> Woo! my web framework now has pluggable routers, so you aren't limited to using my regex based one :) It was good practice to learn how to make Traits and stuff in Rust
[03:56:24] <huon> aatch: oh, I see... you mean at the AST level?
[03:56:30] <aatch> huon, correct
[03:56:32] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[03:56:41] <jaredly> huon: cool! Is it on the list for 1.0?
[03:56:41] <huon> aatch: check the parser?
[03:57:02] <huon> jaredly: https://github.com/mozilla/rust/issues/11781 yes
[03:57:05] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:57:09] <aatch> More accurately, mod items with Inherited should be treated the same as Private, I think.
[03:57:16] <huon> I guess so
[03:57:39] <huon> there's th public_items and exported_items things from one of the compiler passes that tell you for sure
[03:57:59] <aatch> huon, fixing a rustdoc bug, I hope
[03:58:12] <aatch> https://github.com/mozilla/rust/issues/12801 related to re-exports
[03:58:21] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[03:58:40] *** Quits: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP) (Quit: ...)
[03:59:16] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[03:59:24] <huon> aatch: I see
[03:59:34] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:59:40] <huon> aatch: (do you know about `-Z ast-json`, btw?)
[03:59:42] <aatch> I made *a* fix, just making sure I haven't broken other things
[03:59:58] <bollu_> reddit uses floats? 
[04:00:00] <bollu_> TIL
[04:00:07] <huon> bollu_: the sidebar, presumably
[04:00:10] <sinistersnare> bad reddit! bad!
[04:00:23] <strcat> or send reddit patches, it's open-source ;p
[04:00:32] <bollu_> huon: ah
[04:00:35] <sinistersnare> what is a good alternative to floats?
[04:00:37] <bollu_> strcat: good point :)
[04:00:46] <sinistersnare> as a non web dev who understands a little
[04:00:59] <bollu_> strcat: fish-shell is pretty fast. Just installed it right now for fun
[04:01:02] <strcat> sinistersnare: it's actually easier to not use absolute positions and floats
[04:01:12] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[04:01:20] <sinistersnare> interesting, well then time to fix reddit
[04:01:20] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[04:01:22] <strcat> sinistersnare: they're hacks and pretty much immediately break the ability to scale to different screen sizes well...
[04:02:42] <bollu_> didn't jQuery introduce selectors, which was then picked up by HTML5?
[04:03:00] <sinistersnare> who is this now?
[04:03:07] <strcat> bollu_: no, css selectors were what the jquery syntax is based on
[04:03:07] <sinistersnare> oh cool
[04:03:11] <sinistersnare> this is fun!
[04:03:14] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[04:03:22] <bollu_> strcat: ah, I see
[04:03:26] <bollu_> and how do you get the bottom bar?
[04:03:33] <strcat> bollu_: there is a *javascript* API for that now (querySelector, querySelectorAll)
[04:03:35] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[04:03:41] <strcat> (don't say HTML5!  ;p)
[04:04:01] <aatch> DOM API Level... 3 I think, maybe 4
[04:04:03] <bollu_> strcat: yep, but there wasn't one before :) eh HTML5/CSS3/JS(I don't know the version)
[04:04:04] <aatch> I can't remember
[04:04:17] <sinistersnare> achriton uses zsh!
[04:04:32] <aatch> zsh is master shell
[04:04:33] <bollu_> ah, that's tmux isn't it?
[04:04:38] <strcat> bollu_: well these things are all really separate standards
[04:04:43] <strcat> they're not part of ecmascript
[04:04:45] <erickt> woah debugging works!
[04:04:53] <strcat> there are no doubt 100 of these web standards or more
[04:05:11] <aatch> strcat, depends, do you count each level as a new standard?
[04:05:11] <strcat> erickt: yeah it works very well since last summer
[04:05:27] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[04:05:27] *** Quits: IanCormac84 (User@AEEE81F5.64D641E5.67DFF8B4.IP) (Ping timeout)
[04:05:40] <erickt> I've only been using it for backtraces. years of my life wasted
[04:05:55] *** Joins: IanCormac84 (User@535D9A9A.2A8D8854.67DFF8B4.IP)
[04:06:18] <bollu_> strcat: how up to date is the lldb in the AUR?
[04:06:33] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[04:06:50] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[04:07:27] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[04:08:32] <strcat> bollu_: you don't really want to use lldb on arch
[04:08:41] <strcat> gdb is still better ;s
[04:08:52] <o11c> lldb on linux in general sucks (as of 3.3)
[04:09:08] <strcat> gdb has saner commands imo anyway
[04:09:14] <o11c> ugh, yeah
[04:09:15] <strcat> lldb takes 2-3 steps for what gdb can do in 1
[04:09:32] <o11c> lldb's whole "have to use different commands to break on a function vs a file:line, even though they can never overlap"
[04:09:41] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[04:09:59] <o11c> if lldb wanted to replace gdb, it should have maintained interface compatibility like clang did
[04:10:04] <bollu_> whoa, the logging backtrace thing is awesome >_>
[04:10:52] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[04:11:01] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[04:11:01] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[04:11:30] *** Quits: IanCormac84 (User@535D9A9A.2A8D8854.67DFF8B4.IP) (Ping timeout)
[04:11:34] <huon> (the env var is changing to RUST_BACKTRACE=1 soon, fwiw)
[04:11:40] <strcat> o11c: or made a better interface :)
[04:11:45] <andrewd18> huon: yay less typing
[04:11:57] <strcat> o11c: I don't see the point in a sidegrade ;p
[04:12:03] *** Joins: IanCormac84 (User@7CC28D56.2A8D8854.67DFF8B4.IP)
[04:12:05] <o11c> strcat: matching interface
[04:12:16] <strcat> sure, either matching or better enough that it's compelling
[04:12:17] <o11c> because people have invested *decades* of habits in gdb
[04:12:41] <o11c> different is bad ... match first, then add. Never remove.
[04:13:05] <huon> lucky we're not in a IRC channel for a completely new and different programming language /s
[04:13:07] <bollu_> o11c: I personally still hate gdb. I used to use Visual C++ so I'm spoilt :(
[04:13:28] <jroweboy> is there a guide somewhere on how to debug rust code? All I know is to set a breakpoint on rust_fail and then view the stack trace from there :)
[04:13:48] <o11c> the only real thing I didn't like about gdb was before the implemented the 'skip' command
[04:13:50] <huon> jroweboy: https://air.mozilla.org/rust-meetup-march-2014/ acrichto is currently talking about it
[04:13:58] <o11c> everything else is details
[04:14:04] <kmc> i'm writing code which looks like (after macro expansion)  match (match f() { None => return, Some(x) => x }) { ... }
[04:14:09] <erickt> noo rust-ci.org is down
[04:14:19] <erickt> hansjorg: ping
[04:14:33] <kmc> kind of questionable but with the macro it's really nice!
[04:14:40] <ChrisMorgan> erickt: it wasn't written in Rust.
[04:14:52] <kmc> match-in-match-scrutinee is almost never something humans should write, but it comes up a fair bit in generated code for whatever reason
[04:14:54] <huon> kmc: there were/are instances of things like `if match x { ... } { ... }` in librustc :P
[04:15:01] <kmc> heh
[04:15:05] *** Joins: philix (philix@moz-7BFF4EEE.user.veloxzone.com.br)
[04:15:07] *** Quits: alisdair (textual@24DAD211.3AC3B53F.7CD5C64F.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:15:08] <jroweboy> huon: I'll have to watch the vod of this after its over. It looks interesting!
[04:15:10] * huon took far too long to work out what the trailing { ... } was doing
[04:15:11] <ChrisMorgan> kmc: `let tmp = match f() { ... } match tmp { ... }`
[04:15:17] <erickt> ChrisMorgan: apparently. I for one know rust never fails
[04:15:29] <kmc> ChrisMorgan: yes, that's how I would write it as a human, but the macro to do that is much uglier to use
[04:15:29] <ChrisMorgan> rusti: fail!()
[04:15:30] -rusti- pastebinned 8 lines of output: http://sprunge.us/SOZf
[04:15:37] <erickt> nooo
[04:15:39] <bollu_> I've found that C++'s stdlib gives a lot of false positives for memory leaks...
[04:15:47] <huon> so does Rust
[04:15:59] <huon> need the suppressions file
[04:16:01] <o11c> bollu_: you probably need a bigger suppressions file
[04:16:05] <kmc> allowing return inside match really threw me off the first time I saw it... because other languages with pattern matching I've used don't have early-return
[04:16:06] <huon> erickt: (it's quiet...)
[04:16:15] <kmc> except for possibly first-class continuations ;P
[04:16:16] <erickt> k
[04:16:38] <mcpherrin> so who on IRC is at this meetup
[04:16:47] <erickt> me!
[04:17:12] <erickt> mcpherrin: I think it's just us two, I don't see anyone else on their laptops
[04:17:14] <mcpherrin> there's not too many other people with laptops out :P
[04:17:16] <mcpherrin> haha yeah
[04:17:25] <erickt> which is good!
[04:17:28] <mcpherrin> I am trying to build servo!
[04:17:31] <sinistersnare> im in your hearts
[04:17:41] <mcpherrin> pcwalton got me all excited for parallelization of things
[04:17:45] <erickt> hehe
[04:18:25] <nstdloop> Can I pass the same closure to two different functions?
[04:18:30] <nstdloop> Or is that just not doable.
[04:18:56] <bollu_> is there a nice way to debug parallel programs in GDB?
[04:19:01] <bollu_> it gets confusing really fast
[04:19:21] <o11c> bollu_: there are options for multi-thread and multi-process debugging in gdb
[04:19:32] *** Parts: jroweboy (jrowe7@D931AEC7.B8CF4085.71765F8E.IP) ()
[04:19:51] *** Quits: jaredly (Mibbit@moz-C4E51CD4.hsd1.ut.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:19:52] <bollu_> o11c: ah, I'll have to look into that then
[04:20:05] *** Joins: rumpler (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[04:20:28] <sinistersnare> soo..... does anyone know how i can become acrichto?
[04:20:31] <bollu_> erickt: what time is it?
[04:20:37] <huon> sinistersnare = acrichto.clone();
[04:20:46] <sinistersnare> i feel the power!
[04:20:51] * huon hopes sinistersnare is mutable
[04:21:03] <sinistersnare> im a teenager, were pretty impressionable :p
[04:21:14] <bollu_> xD
[04:21:31] <sinistersnare> that was fun!
[04:21:32] *** Joins: cschneid (cschneid@moz-12E33685.hlrn.qwest.net)
[04:21:45] <sinistersnare> and my game of pong / learning rust is going well
[04:21:47] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[04:22:00] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:22:16] <sinistersnare> using rust-sfml, its pretty nice! thanks so much for everyones help today, and yesterday, and if anyone sees acrichto, tell him hes cool
[04:22:33] *** sinistersnare is now known as sinsnare|zzZZZz
[04:22:34] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[04:22:47] *** bollu_ is now known as bollu|studying
[04:24:33] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:24:58] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[04:27:37] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[04:28:53] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:30:42] <kmc> mcpherrin: yesss contribute to servo
[04:31:30] *** Quits: rumpler (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:31:53] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:32:08] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[04:32:16] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[04:32:47] *** Quits: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP) (Ping timeout)
[04:33:39] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[04:34:29] *** Joins: mib_pio8bi (Mibbit@moz-607E556.static.dsl.dodo.com.au)
[04:34:43] <sinsnare|zzZZZz> while i procrastinate sleep: did i hear something about some docathon?
[04:35:07] <mib_pio8bi> How do I convert a &@T to &T?
[04:35:28] <FreeFull> @ doesn't even exist anymore
[04:35:53] <o11c> rusti: fn foo(x: &||) { (*x)(); } fn bar(x: &||) { (*x)(); }    let baz = || { println!("hello"); }; foo(&baz); bar(&baz); // nstdloop 
[04:35:54] -rusti- hello
[04:35:54] -rusti- hello
[04:35:54] -rusti- ()
[04:35:55] <mib_pio8bi> Huh? The ast is full of them
[04:36:15] <FreeFull> Which version of Rust is this?
[04:36:32] <mib_pio8bi> maybe a week a go
[04:36:52] <Yurume> FreeFull: technically it is not gone, it is almost prohibited by the default set of lints though.
[04:36:53] *** Quits: rgomes (rgomes@moz-C03C5B02.dsl.eclipse.net.uk) (Quit: Konversation terminated!)
[04:37:08] <Yurume> e.g. https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L28
[04:37:11] *** Joins: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP)
[04:37:25] <FreeFull> Yurume: I think it's behind a feature flag, for now, but will be completely gone soon
[04:37:30] <Yurume> yes
[04:37:54] *** Quits: jaras2 (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[04:37:54] <mib_pio8bi> Do you have any idea how to convert &@T to &T?
[04:37:59] <kmc> &*x
[04:38:00] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[04:38:13] <kmc> or &**x maybe
[04:38:17] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[04:38:18] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[04:38:18] <mib_pio8bi> oh right
[04:38:20] <Yurume> &*x, or for patterns, &@ref x?
[04:38:22] <mib_pio8bi> and that wont clone?
[04:38:25] <kmc> nope
[04:38:32] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[04:38:36] <mib_pio8bi> ok ty
[04:38:57] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[04:39:01] *** Quits: claudiu_ (claudiu@6C906E9F.9ECAA4DB.BCDD830B.IP) (Ping timeout)
[04:39:05] <kmc> only POD types even have implicit clones
[04:39:33] <mib_pio8bi> Oh right, good to know
[04:41:04] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[04:43:02] *** Joins: oxum (anonymous@D85EBD45.2A61EB73.520CDC98.IP)
[04:43:45] <ChrisMorgan> *copy*, not *clone*.
[04:44:45] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[04:46:13] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[04:49:17] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:49:17] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[04:51:09] <FreeFull> Yay, I wrote an SDL program that makes the screen grey
[04:51:23] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[04:52:55] *** Quits: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk) (Quit: WeeChat 0.3.7)
[04:53:16] *** Joins: philix_ (felipe@moz-7BFF4EEE.user.veloxzone.com.br)
[04:53:20] *** Quits: mib_pio8bi (Mibbit@moz-607E556.static.dsl.dodo.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[04:54:55] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:56:21] *** Quits: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt) (Ping timeout)
[04:58:12] *** Joins: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net)
[04:58:23] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[04:58:31] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[05:00:03] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:00:08] *** Joins: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk)
[05:00:13] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[05:00:30] *** Quits: philix (philix@moz-7BFF4EEE.user.veloxzone.com.br) (Quit: philix)
[05:00:46] <o11c> SDL1.2 or good SDL?
[05:01:34] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[05:01:34] *** ChanServ sets mode: +o jack
[05:02:14] *** Quits: heftig (heftig@moz-A1C2AAAA.dip0.t-ipconnect.de) (Ping timeout)
[05:03:52] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:08:33] *** Joins: philix__ (felipe@moz-7BFF4EEE.user.veloxzone.com.br)
[05:11:05] <FreeFull> o11c: 1.2
[05:11:12] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[05:11:51] *** Joins: cceckman (cceckman@moz-135DFDD5.bootp.virginia.edu)
[05:12:03] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[05:12:11] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[05:12:30] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[05:12:56] <FreeFull> It'd be nice to have some web page that lists rust libraries
[05:13:35] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:13:56] *** Joins: heftig (heftig@moz-E758CD18.dip0.t-ipconnect.de)
[05:14:27] <ChrisMorgan> FreeFull: rust-ci.org does that (but is down just now, hansjorg?)
[05:16:12] <cceckman> Any advice on attributes on match arms? Trying to ignore an unused arm, but can't quite find where to place the allow.
[05:17:55] <huon> cceckman: not possible
[05:18:23] <FreeFull> o11c: The SDL2.0 bindings for Rust don't seem to work yet
[05:18:32] <huon> cceckman: ... if you have an unused arm shouldn't it not be there?
[05:18:47] <dougxxx> FreeFull: they don't?
[05:18:56] <dougxxx> I was using them this morning
[05:19:02] <pnkfelix> cceckman: there's a PR where someone wants to add that, I think: https://github.com/mozilla/rust/pull/12812
[05:19:04] <dougxxx> they don't compile on HEAD at the moment, but they totally work.
[05:19:08] <cceckman> It's unused because the *current* code doesn't exercise it- want it in for future versions (compatibility)
[05:19:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:19:30] <cceckman> huon: It's for a setting that currently there's not a place to change, but want to keep the code in. May need to just comment it out.
[05:19:36] <FreeFull> dougxxx: Ah
[05:19:45] <pnkfelix> cceckman: but even with that PR, ..., well, who knows, maybe that would indeed fix your issue
[05:19:57] <FreeFull> dougxxx: How do they compare to the SDL1.2 bindings, in terms of completeness?
[05:20:50] <rdgawdzi> I guess this is my last attempt at help. I've spent all day figuring out why my binaries cannot change --version after a successful build. I tried: 1) doing ./configure, removing x86*, doing make. 2) make clean, make all 3) doing make without -j* 4) Making a build dir, doing ../configure and make
[05:21:07] <dougxxx> ah... they seem pretty complete to me. I guess I haven't been using anything particularly obscure and I'm using SDL_Image by hand, but uh..
[05:21:13] <dougxxx> was they anything specific you were missing?
[05:21:20] <cceckman> pnkfelix: A more general take, yes, but similar. I'm specifically looking at #allow, but #cfg
[05:21:22] <FreeFull> No, was just curious
[05:21:36] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:22:03] *** Quits: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[05:23:12] *** Quits: philix_ (felipe@moz-7BFF4EEE.user.veloxzone.com.br) (Quit: leaving)
[05:23:12] *** Quits: philix__ (felipe@moz-7BFF4EEE.user.veloxzone.com.br) (Quit: leaving)
[05:23:29] <dougxxx> patching the standard repo with something like https://github.com/shadowmint/rust-sdl2/commit/a3a6f89661ea717ae26948a3951bd155da75b3c8 should get you up and running.
[05:23:50] <huon> cceckman: ah, i see
[05:23:53] <dougxxx> (my branch is divergent, because I only care about static linking)
[05:24:24] <huon> cceckman: #[cfg] would work for your purposes too (although it's effectively just a comment that ensures that the code will remain parseable)
[05:24:50] *** Joins: philix (felipe@moz-7BFF4EEE.user.veloxzone.com.br)
[05:26:32] <cceckman> huon: Maybe? Would have to change things around a bit. Comment works for now. :-P
[05:27:29] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[05:27:31] <nstdloop> o11c: Thanks, but now rust won't do an implicit coercion from a function to a closure. It will convert from fn -> closure but not from &fn -> &closure.
[05:28:13] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[05:29:09] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[05:29:30] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[05:29:32] <nstdloop> o11c: And using an explicit cast fails with "non-scalar cast"
[05:30:29] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[05:30:52] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:30:56] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[05:32:36] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[05:32:45] *** Quits: bollu|studying (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Client exited)
[05:34:10] <meyer> Since rust doesn't do tail-call optimization, the proper way to re-order arguments at the start of a function is to shadow them, right? (as opposed to mutating) As in, "let (a, b) = if a < b { (b, a) } else { (a, b) };"
[05:34:47] <dougxxx> huh, can you not import a macro from a crate?
[05:34:51] <Yurume> it's guaranteed TCO which is unsupported, but yes.
[05:35:04] <Yurume> dougxxx: #[macro_export].
[05:35:11] <huon> LLVM can probably optimise `fn foo(x: int, y: int) { if x < y { return foo(y, x); } .... }` to the equivalent
[05:35:14] <meyer> Is there a way to tell if the compiler will optimize a specific case without looking at the IR or ASM?
[05:35:18] <huon> nope
[05:35:24] <huon> --emit ir or --emit asm
[05:35:28] <huon> are your best bets
[05:35:48] <meyer> It might be useful to have a "warn if not optimizated" attribute or something
[05:35:54] <dougxxx> I've done that, my dummy crate: https://gist.github.com/shadowmint/9542616 create compiles fine, but I can't seem to import the macro.
[05:36:10] <meyer> Or just a --verbose that mentions any TCO
[05:36:17] <huon> how does one classify/detect when somethings been "optimised"?
[05:37:11] <dougxxx> use junk; trace!(..) -> error: macro undefined: 'trace'
[05:37:15] <huon> meyer: http://article.gmane.org/gmane.comp.compilers.llvm.devel/70998 is basically what you want, I think
[05:37:17] <Yurume> dougxxx: #[phase(syntax)] use junk;
[05:37:22] <dougxxx> O_o
[05:37:28] <huon> it has to go on the extern crate
[05:37:32] <dougxxx> what does phase do?
[05:37:33] <Yurume> dougxxx: you'll need #[feature(phase)]; in the crate that uses it
[05:37:41] <huon> importing/exporting macros is highly experimental
[05:37:51] <huon> and there's no namespacing or anything
[05:38:17] <mindcat_> :quit
[05:38:20] *** Quits: mindcat_ (mindcat@45814CCF.B1E12A5D.57E3C596.IP) (Quit: leaving)
[05:38:28] *** Quits: bvssvni (Mibbit@moz-E289BB64.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[05:38:41] <meyer> huon: Yeah, that's basically what I want. Specifically, though, for things that it will sometimes but not always do, that you really care about, it might be nice to have it throw a warning when it doesn't apply a specific optimization, if you ask.
[05:38:58] <Yurume> dougxxx: macros are very different from other things (functions, to name a few) and needs a special care to support it. to the end, there are multiple "phases" of the compilation and #[phase] enables the first (syntactic) phase. it is highly experimental though so expect possible breakages.
[05:39:41] <dougxxx> hm, doesn't work at all for me. 
[05:39:47] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[05:39:52] <huon> dougxxx: what version of Rust?
[05:40:05] <dougxxx> I pulled and build head about 2 hours ago?
[05:40:16] <huon> ok (just wondering if you were using 0.9)
[05:40:17] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[05:40:26] <dougxxx> Doing it right yeah? -> https://gist.github.com/shadowmint/9542616
[05:40:47] <huon> dougxxx: the phase goes on the `extern crate`
[05:40:48] <dougxxx> eh, macro stuff is experimental anyway, I should probably not use it.
[05:40:50] <huon> not the use
[05:41:03] <huon> theoretically that `use` there will upset the compiler anyway
[05:41:39] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:41:43] <Yurume> oops
[05:41:58] <Yurume> yes, it's #[phase(syntax)] extern crate junk; (sorry!)
[05:42:06] <Yurume> I mentally fixed that :S
[05:43:29] <dougxxx> mm... nope.
[05:43:36] <dougxxx> Still doesn't like my macro
[05:44:32] <huon> dougxxx: you have it #[cfg(test)]
[05:44:38] <huon> i.e. only imported with --test
[05:44:50] <huon> (including the macro)
[05:45:00] <dougxxx> O_o, I'm compiling with --test tho
[05:45:37] <homa_rano> is there a way for a struct to contain a borrowed pointer?
[05:45:47] <huon> dougxxx: oh
[05:45:51] *** Quits: valentin (Thunderbir@34F4ACDA.7F69ED53.FAF22AF7.IP) (Ping timeout)
[05:46:03] <huon> homa_rano: `struct A<'b> { x: &'b int }
[05:46:04] <huon> `
[05:46:39] <homa_rano> huon: ah, there's some syntax I haven't tried yet :P
[05:46:45] <dougxxx> hm, maybe I am doing somethign weird; without --test I'm getting unresolved import (maybe you meant `junk::*`?)
[05:47:17] <pnkfelix> huon: your ~[T] lint works at smaller scopes than just the crate scope, right?
[05:47:25] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:48:44] <pnkfelix> huon: if so, I suspect it will indeed be good for pcwalton's devecing work.  (that is, I don't think he's going to have devecing ready soon enough to make such a lint pointless)
[05:49:19] <huon> pnkfelix: yes (it's so widely used in most crates that I just put it on the whole crate)
[05:50:21] <huon> awesome
[05:50:41] *** Joins: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:50:51] <huon> erickt: ping
[05:52:56] *** Quits: erickt (etryzelaar@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[05:55:10] *** Joins: mib_35y9no (Mibbit@moz-3213C615.wavecable.com)
[05:55:16] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[05:56:07] <mib_35y9no> So, is this a bug?
[05:56:41] <mib_35y9no> https://gist.github.com/DarkLinkXXXX/cedc3e8b6bb87f971c44
[05:57:09] <huon> mib_35y9no: yep
[05:57:15] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[05:57:16] <huon> (it's already been filed, though)
[05:57:25] <mib_35y9no> All right.
[05:57:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:57:42] <huon> https://github.com/mozilla/rust/issues/4264
[05:57:50] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Input/output error)
[05:57:52] <huon> well, https://github.com/mozilla/rust/issues/7754
[05:57:57] <huon> as ChrisMorgan points out
[05:58:20] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[05:58:59] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[05:59:12] *** Joins: benjamin_ (benjamin@moz-5606BC65.dip0.t-ipconnect.de)
[06:00:09] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[06:00:17] <dougxxx> (ah, got it working, seems you cant use a crate if you import macros from it~)
[06:00:29] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[06:00:46] <mib_35y9no> Rust is still a very evolving language, so I can see why this would take the back-burner. It doesn't really an important purpose other than seeing how stuff works if you can't figure it out on your own.
[06:02:01] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[06:02:53] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[06:03:14] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[06:03:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[06:03:35] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[06:04:30] <ChrisMorgan> dougxxx: there's phase(syntax) and another phase, can't remember it's name. Comma separate them and it'll be available in both.
[06:04:52] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:04:55] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[06:05:02] <huon> mib_35y9no: it is a useful tool, and the limitation of the various `--pretty` modes are annoying :(
[06:05:12] * huon <3 pretty expanded... except when it doesn't work
[06:05:14] <huon> ChrisMorgan: link
[06:05:18] *** Joins: kvanb (kvanb@79F9EA6C.C5C3C293.1611EE05.IP)
[06:05:48] <ChrisMorgan> huon: dunno
[06:06:01] <mib_35y9no> huon: True. All in due time I suppose.
[06:06:25] <huon> ChrisMorgan: I meant, the other phase is `link`
[06:06:26] <ChrisMorgan> http://static.rust-lang.org/doc/master/guide-macros.html still doesn't cover loadable syntax extensions ☹
[06:06:32] * huon pokes sfackler
[06:06:39] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Quit: leaving)
[06:06:40] <hansjorg> erick, ChrisMorgan: rust-ci is back up. hosting provider did some maintenance
[06:06:56] <ChrisMorgan> Good ☺
[06:07:00] *** Joins: mib_k9x9j7 (Mibbit@moz-607E556.static.dsl.dodo.com.au)
[06:07:03] <huon> mib_35y9no: theoretically it's a fixable bug :)
[06:07:12] * huon might experiment today sometime
[06:07:15] <huon> or maybe tomorrow
[06:08:11] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[06:08:22] <mib_35y9no> huon: Oh. I was just thinking it'd be a pain to have rewrite it to keep working. I'm suppose it was in working order at one point.
[06:08:27] <mib_35y9no> *assuming
[06:08:34] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[06:11:56] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[06:12:38] <Kroisse> Is there any plans to support properties (like C# or Python) in Rust?
[06:12:57] <Yurume> hansjorg: does the manual build trigger in travis (not rust-ci) affect the build status in rust-ci?
[06:13:26] <meyer> Kroisse: Properties, as in getters and setters not accessed as functions?
[06:13:29] *** Quits: Erik_ (Erik_S@moz-6691E309.hlrn.qwest.net) (Connection reset by peer)
[06:13:48] <Yurume> field-like functions, in the other words.
[06:13:57] <Kroisse> meyer: yes it is
[06:14:18] <bjz> Kroisse: they would be cool imo, but they are contensious
[06:14:23] <meyer> (I have no idea, by the way. Sorry, I was just clarifying)
[06:14:26] <Yurume> at the very least it would be an RFC item
[06:14:37] <Yurume> and will cause shitload of discussions ;)
[06:14:50] <bjz> Kroisse: I highly doubt it would make it for 1.0
[06:15:31] <meyer> Is a new package manager expected to be in 1.0? It seems pretty important for wider adoption.
[06:16:09] <Yurume> D-like ad hoc rewriting (e.g. foo.bar without a field bar is rewritten to foo.bar()) might be possible, but that has a broader impact on the coding convention
[06:16:46] <Yurume> Tango, AFAIK, used very strange way to print a newline: Cout.newline;
[06:16:51] <hansjorg> yurume: no, rust-ci shows the result of the last build it triggered (and the "live" status on the project page)
[06:16:51] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[06:17:00] <bjz> Yurume: ugh, that concerns me tbh
[06:17:10] <mib_35y9no> That pretty printer... how do I get it to modify the original file?
[06:17:34] <homa_rano> is there a version of range() that goes backwards?
[06:17:37] <Yurume> hansjorg: can it be changed? I'd expected the latest build will appear in rust-ci, hmm.
[06:17:42] <Yurume> homa_rano: search for range_rev.
[06:17:50] <Yurume> ah oops
[06:17:55] <Yurume> range_step, sorry.
[06:18:11] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[06:18:27] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[06:18:41] <bjz> homa_rano: range_rev is right
[06:18:58] <Yurume> bjz: isn't that replaced? hmm..
[06:19:02] <bjz> hm
[06:19:20] <Yurume> std::iter does not have that
[06:19:25] <aatch_> possibly range().rev(), I think range implements DoubleEndedIterator
[06:19:42] <homa_rano> range_step worked
[06:19:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:19:45] <Yurume> aatch_: range(0, 10).rev() starts with 9, counter-intuitively :(
[06:20:01] <bjz> yeah :/
[06:20:02] <Yurume> would start*
[06:20:08] <Yurume> (I haven't really tested it)
[06:20:11] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[06:20:14] <aatch_> it would
[06:20:16] <hansjorg> Yurume: sure, I'll have a look at it
[06:20:22] <Yurume> hansjorg: thank you!
[06:20:27] <homa_rano> range().rev() works better, thanks!
[06:20:32] <bjz> rusti: range(0, 10).rev().to_owned_vec()
[06:20:35] -rusti- [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
[06:20:40] <bjz> yeah
[06:21:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:21:40] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[06:21:43] <Yurume> rusti: std::iter::range_step_inclusive(247u8, 255, 5).rev().to_owned_vec()
[06:21:45] -rusti- pastebinned 11 lines of output: http://sprunge.us/XVAU
[06:21:53] <hansjorg> Yurume: I guess the reason for doing it like it is now was to make it clear when it was changes in rust that broke the build
[06:21:56] <Yurume> aha, clever.
[06:22:49] *** Quits: philix (felipe@moz-7BFF4EEE.user.veloxzone.com.br) (Ping timeout)
[06:23:00] <Yurume> hansjorg: I guessed the user (that is, the user that sees the badge) would rather want to check if the most recent version of library supports the most recent rust-nightly build. both uses are legitimate, though.
[06:23:24] <homa_rano> is there a uint::max(a,b) function that I'm bad at finding?
[06:23:40] <Yurume> homa_rano: it's std::cmp::max/min.
[06:23:41] <Kroisse> bjz: Well, at least isn't it decided to introduce or rejected yet?
[06:23:53] *** Joins: bakibour (luesebrink@moz-45916A55.dip0.t-ipconnect.de)
[06:23:56] <bakibour> Greetings
[06:23:57] <Kroisse> the property syntax, I mean
[06:24:15] <bjz> Kroisse: no, it hasn't
[06:24:24] <homa_rano> Yurume: thanks
[06:24:26] <bakibour> I do assume that it is not possible to have trait bounds on structs (as the compiler stated in an error message).
[06:24:44] <hansjorg> I'll see if I can change it to something where you'll get both
[06:24:47] <bakibour> Is there any way to achive a similar behaviour, eg by constructing the struct through a function?
[06:25:10] <bjz> bakibour: no it is not
[06:25:29] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[06:25:39] <bakibour> bjz: A function can have trait bounds though and have a return type that is constraint that way.
[06:25:47] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:25:49] <bjz> you could do that, yes
[06:26:01] <bjz> was answeing the first question
[06:26:05] <bakibour> Ah ok :)
[06:26:29] <bakibour> bjz: Btw i just ran into the problem you stated the day before yesterday.
[06:26:36] <bakibour> With the unboxed closures :)
[06:26:42] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Quit: Bye)
[06:26:50] <bakibour> I am trying to fiddle a bit to get around that now.
[06:26:51] <bjz> ah yes
[06:27:06] <bjz> you can use `extern "Rust" fn`
[06:27:12] <bakibour> Oh?
[06:27:16] <bjz> but then you need to use a named fn
[06:27:27] <bakibour> I guess that is ok.
[06:27:39] <bakibour> Ah no it is not.
[06:27:40] <bakibour> Sec
[06:28:05] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[06:28:05] <bakibour> Problem is that i have to return a closure from my composing functions.
[06:28:14] <bakibour> Which happen to capture the parsers.
[06:28:35] <Yurume> for now you have to use an owned trait object.
[06:28:47] <bakibour> So the idea was as kimundi proposed to use some construct like the good old function objects in pre lambda C++.
[06:28:58] <bjz> yeah
[06:29:00] <bjz> :(
[06:29:18] <bjz> it's a pain
[06:29:26] <bjz> hopefully it will be fixed by 1.0
[06:29:37] <bakibour> I am just not sure if it is all worth the hassle, noone else seems to think so also, otherwise there would be a composable parser already i guess.
[06:29:57] <Yurume> uh, wait, composable parser? 
[06:30:32] <Yurume> did you mean to make a composable parser?
[06:30:36] <bakibour> Yurume: Yes like in parsec.
[06:30:36] <Yurume> (if that were possible)
[06:30:45] *** Joins: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr)
[06:30:51] <bakibour> Or boost spirit etc etc
[06:31:01] <pnkfelix> usually called "parser combinator(s)", right?
[06:31:05] <Yurume> yes
[06:31:07] <bakibour> Yes sorry
[06:31:49] <kmc> it's hard in a language like Rust or C++ where allocation is explicit, including allocation of closures
[06:31:52] <bakibour> I think it can be done it will just not be really pretty :)
[06:32:15] <kmc> I don't really have a handle on how Boost.Spirit works... it's one of the most terrifying libraries I've ever come across
[06:32:20] <Yurume> in the hard and possibly inefficient way ;)
[06:32:23] <bakibour> kmc: In C++ you can do that with function objects id wager.
[06:32:52] <bakibour> It will be a mess on the trait and object level though i fear.
[06:33:12] <bakibour> I thought to have a OrParser struct for example and save the other parsers there.
[06:33:24] <bakibour> Which is why i asked if you can have bound traits somehow for structs.
[06:33:35] <bakibour> Er trait boundaries?
[06:33:45] <bakibour> Still need to get the lingo right.
[06:33:52] <kmc> trait bounds, probably
[06:34:13] *** Joins: edwardw (edwardw@CBC31673.351D1665.B9C6B12A.IP)
[06:34:13] <bakibour> But then you will have to do a lot of extending if you want to add new stuff.
[06:34:23] <kmc> and yeah, there's a difference in that Rust lambdas always erase the environment type, whereas a C++ lambda's type includes its free variables (in some anonymous subclass of std::function)
[06:34:43] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[06:35:00] <kmc> so you can't store anonymous functions "by value" in Rust structs, as far as I can tell
[06:35:03] <pnkfelix> bakibour: if you haven't already seen it, there is related discussion here: http://www.reddit.com/r/rust/comments/1xdudv/another_failed_attempt_at_parser_combinators/
[06:35:16] <bakibour> Oh :)
[06:35:28] <kmc> getting a C++-style lambda implementation would also improve the performance of higher-order functions
[06:36:04] <bakibour> Hm would you say it is worth to persue this problem?
[06:36:09] *** Joins: jackneill (jackneill@moz-5AD26CED.pool.digikabel.hu)
[06:36:10] <bakibour> Or wait it out?
[06:37:03] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[06:37:14] <Yurume> I think you need to wait for the necessary feature for now.
[06:37:50] <Yurume> the resulting implementation in the current Rust wouldn't bring the advantages of parser combinators anyway.
[06:38:29] <bakibour> Yes that is what i feel also, plus once you have the necessary features you would like to rewrite it anyway.
[06:38:52] <bakibour> I think i will have a look at some other place for now, for a problem that is.
[06:39:29] <bakibour> I seem to have a talent to pick problems that are hard to get right :)
[06:39:42] <dougxxx> how do you do the opposite of #[cfg(test)]?
[06:39:49] <dougxxx> ah, wait. nm. not(test). I get it.
[06:40:30] *** Joins: ofeldt (ofeldt@moz-1D0ABFF0.dip0.t-ipconnect.de)
[06:41:25] *** Quits: ofeldt- (ofeldt@moz-4B9A8C81.dip0.t-ipconnect.de) (Ping timeout)
[06:42:27] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[06:43:34] <bakibour> How do you do something like an interface type in Rust? Or existential types in Haskell. Or would i have to build something like heterogenous structures (eg List)?
[06:43:57] <Yurume> traits are superset of interfaces.
[06:44:29] <bakibour> I thought traits are not types.
[06:44:30] <pnkfelix> bakibour: trait objects
[06:44:37] <pnkfelix> bakibour: Trait is not a type
[06:44:42] <pnkfelix> bakibour: but ~Trait is a type
[06:44:50] <pnkfelix> bakibour: as is &Trait, etc
[06:44:52] <bakibour> Ah ok
[06:45:25] <pnkfelix> bakibour: if you look at niko's code from the reddit comments on that post I linked
[06:45:27] <Yurume> bakibour: for existential types, I guess trait objects are very similar to them (in the sense that the existential types *lose* the information about the original type)
[06:45:30] <pnkfelix> bakibour: you'll see an example
[06:45:42] <bakibour> I guess i should just finish reading the tutorial :)
[06:45:42] <pnkfelix> bakibour: https://github.com/nikomatsakis/typing-haskell-in-rust/blob/master/src/parse.rs#L23
[06:46:25] <bakibour> Thanks
[06:46:30] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[06:46:44] <sfackler> huon: sup?
[06:46:50] <Yurume> bakibour: so that `fn foo<T:Bar>(x: T) -> T` is like `foo :: Bar t => t -> t`, and `fn foo(x: ~T) -> ~T` is like `foo :: forall t. Bar t => t -> t`.
[06:47:10] <huon> sfackler: docs for exportable syntax extensions
[06:47:11] <Yurume> that's my best analogy with Haskell, I'm not sure this is right
[06:47:15] <bakibour> Aye
[06:47:17] <sfackler> oh, yeah
[06:47:20] *** Quits: huon (Thunderbir@7DB26CEE.D5A1DCF.37681C44.IP) (Quit: huon)
[06:47:30] <sfackler> seems like a topic for sunday's doc sprint!
[06:47:34] <bakibour> I still need to wrap my head around some of the concepts :)
[06:49:31] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[06:49:52] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[06:52:19] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[06:53:20] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[06:57:20] <strcat> Yurume: I don't really think range(0, 10).rev() starting with 9 is counter-intuitive
[06:57:28] <strcat> it's saying you want that range, and then you're reversing it
[06:57:49] <strcat> it's no more confusing than range(0, 10) without reverse ;p
[06:57:55] <Yurume> strcat: [a, b) and [a, b] is common, (a, b] is not common. that's mostly why I'm saying "counter-intuitive".
[06:58:03] <strcat> Yurume: but it's not (a, b]
[06:58:08] <strcat> it's [a, b)
[06:58:51] <Yurume> yes, which is much more confusing (range_step(0, 11, 3).rev() would, if that were possible, give 9 6 3 0 instead of--say--10 7 4 1 anyway).
[06:58:56] <strcat> rusti: let mut xs = range(0, 10); (xs.next(), xs.next())
[06:58:57] -rusti- (Some(0), Some(1))
[06:59:01] <strcat> rusti: let mut xs = range(0, 10); (xs.next(), xs.next(), xs.next_back())
[06:59:02] -rusti- (Some(0), Some(1), Some(9))
[06:59:07] * strcat shrugs
[06:59:47] *** Joins: fabiand (fabiand@moz-545B3120.adsl.alicedsl.de)
[07:00:14] <strcat> I don't think it's any more/less confusing than &[1, 2, 3].iter().rev() not including 4 ;p
[07:03:02] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[07:03:19] <pnkfelix> Yurume: you can always resort to iter::range_inclusive
[07:03:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:03:30] <pnkfelix> Yurume: if you want to make things super explicit
[07:03:53] <Yurume> pnkfelix: yeah, I would do that if I really need it
[07:04:48] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[07:04:49] <pnkfelix> Yurume: anyway, if you read https://github.com/mozilla/rust/issues/5270 you'll see a pretty solid argument for strcat's point, IMO.
[07:05:09] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:07:03] *** Quits: rntz (rntz@moz-E7065CE4.cmdnnj.fios.verizon.net) (Ping timeout)
[07:08:57] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:09:36] *** Quits: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP) (Ping timeout)
[07:10:29] *** Joins: rntz (rntz@moz-E7065CE4.cmdnnj.fios.verizon.net)
[07:10:38] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[07:11:25] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[07:11:51] *** Joins: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP)
[07:13:03] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[07:16:28] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:16:34] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[07:18:01] <meyer> Does it make sense for vec! to be in std::macros and not std::vec_ng / std::vec? 
[07:19:13] <meyer> I guess it is consistent with select, and really println! and format! too.
[07:19:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:21:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[07:21:18] <meyer> But it does seem a bit weird to group all these unrelated macros together. I'd think most people would go to vec/fmt/comm before macros 
[07:21:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[07:21:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:23:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[07:23:22] <FreeFull> meyer: Rust doesn't support proper macro importing yet
[07:23:41] <meyer> As in, I can't "use" a macro?
[07:23:43] <FreeFull> So they have to be in one place, or they won't be in scope
[07:24:14] <meyer> Alright.
[07:25:45] *** Quits: FreeFull (freefull@moz-A3210B4C.ppp.as43234.net) (Quit: )
[07:27:33] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[07:28:11] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[07:28:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[07:29:31] *** Joins: paupau (posttext@moz-3F7DB997.hsd1.ca.comcast.net)
[07:32:23] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[07:33:32] *** Joins: nkoep (nik@moz-84FBC066.pool.mediaways.net)
[07:35:20] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[07:36:14] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:37:32] <strcat> meyer: well there's #[macro_escape]
[07:37:36] <dougxxx> mm... well, actually importing macros inside a crate to itself works pretty much fine. 
[07:37:44] <dougxxx> It's just between crates that's a bit dubious
[07:37:45] <strcat> meyer: but it's really easy to accidentally let a private macro escape
[07:37:52] <strcat> it's much easier to define the public macros in one place
[07:37:55] <strcat> because it applies at a module level
[07:38:32] <strcat> I think it actually works pretty well now - at least you *can* export them from a crate
[07:38:37] <strcat> for a long, long time you couldn't
[07:38:52] <strcat> so only libstd could export macros since they'd all just get hard-wired into the compiler
[07:38:58] <meyer> Mhm
[07:39:46] <dougxxx> yeah; I'm actually vaguely curious how that works; as a code block inside the .rlib?
[07:40:39] <dougxxx> (how can you get compile time errors for imported macros otherwise?)
[07:40:53] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[07:41:53] <meyer> Oh huh. I wasn't even thinking about compiled libraries / crates. The issue makes more sense now.
[07:42:25] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[07:42:40] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[07:43:15] *** flaper87|afk is now known as flaper87
[07:43:24] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:44:47] *** Quits: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com) (Input/output error)
[07:45:09] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:45:47] *** Quits: oxum (anonymous@D85EBD45.2A61EB73.520CDC98.IP) (Quit: ...)
[07:46:23] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[07:48:32] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:49:56] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:50:33] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:53:14] *** Quits: paupau (posttext@moz-3F7DB997.hsd1.ca.comcast.net) (Quit: out)
[08:02:24] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:02:25] *** ChanServ sets mode: +o huon
[08:04:00] <huon> rusti: println /*hi*/ !("foo")
[08:04:01] -rusti- foo
[08:04:01] -rusti- ()
[08:04:35] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[08:06:58] *** Quits: kvanb (kvanb@79F9EA6C.C5C3C293.1611EE05.IP) (Ping timeout)
[08:07:03] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[08:07:15] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[08:07:28] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:08:29] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:11:02] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[08:11:03] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:11:27] *** Quits: edwardw (edwardw@CBC31673.351D1665.B9C6B12A.IP) (Ping timeout)
[08:11:38] *** Joins: marianoguerra (marianogue@moz-E338D65C.dip0.t-ipconnect.de)
[08:11:47] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[08:17:38] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:19:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:19:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:19:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:20:18] *** Joins: twi (Adium@1003EE9C.E815CABE.77D54CE0.IP)
[08:20:21] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[08:21:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[08:21:24] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:21:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:21:41] *** Joins: philix (felipe@moz-7BFF4EEE.user.veloxzone.com.br)
[08:22:29] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[08:23:27] *** Joins: kvanb (kvanb@moz-21D819A7.lnse5.lon.bigpond.net.au)
[08:23:42] *** Quits: philix (felipe@moz-7BFF4EEE.user.veloxzone.com.br) (Ping timeout)
[08:23:55] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:24:57] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[08:24:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:25:41] *** Joins: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP)
[08:26:01] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[08:28:56] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[08:33:56] *** Quits: mib_k9x9j7 (Mibbit@moz-607E556.static.dsl.dodo.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[08:34:32] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:35:04] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[08:37:34] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:38:05] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[08:39:57] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:49] *** Joins: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be)
[08:43:38] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:44:14] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:45:52] *** Quits: nkoep (nik@moz-84FBC066.pool.mediaways.net) (Client exited)
[08:46:03] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:48:22] *** Joins: Ferreus (ferreus@moz-30FCBB63.dip0.t-ipconnect.de)
[08:48:42] *** Joins: valentin (Thunderbir@87C1F78E.1DE10CA8.D8E68FF6.IP)
[08:48:49] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[08:51:42] *** Joins: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za)
[08:54:40] *** Joins: mpiechotka (mpiechotka@moz-D9096804.dynamic.mnet-online.de)
[08:59:37] <meyer> Is there a way to explicitly un-borrow something?
[08:59:50] <meyer> If, in the same block, I borrow something as immutable, finish using it, then want to borrow it again as mutable
[09:00:10] <meyer> rustc won't let me.
[09:00:23] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Quit: Leaving...)
[09:00:30] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[09:00:41] <huon> meyer: use a new {} block
[09:01:33] <meyer> That works
[09:01:35] <meyer> But
[09:01:51] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[09:02:00] <meyer> Is kinda ugly. There's no "release" or "unlet" to get rid of a binding earlier than the end of a block?
[09:02:30] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:05:14] <huon> nope
[09:07:02] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[09:08:23] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[09:09:37] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:09:44] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[09:09:48] *** Joins: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr)
[09:12:01] *** Joins: H3g3m0n (Mibbit@moz-AE17C55F.static.tpgi.com.au)
[09:12:02] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[09:12:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:12:23] *** Quits: mpiechotka (mpiechotka@moz-D9096804.dynamic.mnet-online.de) (Ping timeout)
[09:12:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:13:04] <H3g3m0n> Is there a way to give tasks a name? I noticed that the segfault output mentions one: "task '<unnamed>' failed at 'receiving on a closed channel'"
[09:13:55] *** pmoore|away is now known as pmoore
[09:14:21] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[09:14:27] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:14:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:16:28] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[09:17:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:18:15] <bakibour> Does Rust have units for time yet?
[09:18:27] <huon> H3g3m0n: http://static.rust-lang.org/doc/master/std/task/struct.TaskBuilder.html#method.named
[09:18:53] <huon> rusti: std::task::task().named("hi").spawn(proc() fail!())
[09:18:55] -rusti- task 'hi' failed at 'explicit failure', <anon>:11
[09:18:55] -rusti- ()
[09:19:06] <huon> bakibour: we don't have a proper time library at all, so no
[09:19:14] <bakibour> Ok
[09:19:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:19:59] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[09:19:59] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:21:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:21:52] <eddyb> bakibour: you can probably get something nice going with newtypes
[09:22:07] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[09:22:32] <bakibour> eddyb: Aye, just wanted to omit the NIH pattern ;)
[09:23:05] <bakibour> Though i was rather thinking about enums and conversions on them.
[09:23:08] <eddyb> bakibour: we have a libtime, contributions are welcome ;)
[09:23:15] <bakibour> Oh
[09:23:45] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[09:24:14] <eddyb> it probably does something like Date from Java or JS, AFAICT
[09:24:31] <huon> eddyb: our current libtime?
[09:24:35] <eddyb> yeah
[09:24:40] <huon> it does nothing of the sort
[09:24:48] <eddyb> I skimmed through it
[09:25:09] <huon> it's a crappy wrapper around various C apis
[09:25:10] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[09:25:29] <huon> with the peculiar `Tm` object
[09:25:38] <eddyb> right, I wasn't looking close enough
[09:25:54] <huon> http://static.rust-lang.org/doc/master/time/fn.tzset.html huh
[09:25:55] <eddyb> harder to write something ourselves, but it would definitely be cleaner
[09:26:02] <eddyb> timezone_set :P
[09:26:09] <eddyb> or set_timezone
[09:26:26] <eddyb> wait, why no arguments?
[09:26:27] <huon> eddyb: yeah.. I know what the name means... but what does it do
[09:26:30] <huon> yeah, exactly
[09:26:39] <eddyb> rustrt::rust_tzset();
[09:26:44] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[09:26:46] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[09:26:54] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[09:27:07] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[09:27:55] <eddyb> huon: I think it initializes a default timezone or something
[09:28:05] <eddyb> http://linux.die.net/man/3/tzset
[09:28:20] <eddyb> "The tzset() function initializes the tzname variable from the TZ environment variable"
[09:28:32] <eddyb> that would be useful to have in a doc comment
[09:29:57] <huon> or, just not bother, since the whole libtime needs to be redone anyway :)
[09:30:36] <bakibour> hehe
[09:33:46] *** Joins: mpiechotka (mpiechotka@moz-D9096804.dynamic.mnet-online.de)
[09:34:27] <meyer> Can a crate get its own crate hash / id at runtime?
[09:34:42] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:34:55] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[09:35:12] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[09:35:59] *** Joins: gimpf (gimpf@moz-8B1B352C.adsl.highway.telekom.at)
[09:37:42] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[09:42:51] *** Joins: ebalint (ebalint@moz-BFA5E762.inf.u-szeged.hu)
[09:44:03] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[09:44:50] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:46:36] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:47:00] *** Quits: mpiechotka (mpiechotka@moz-D9096804.dynamic.mnet-online.de) (Quit: mpiechotka)
[09:49:57] *** Quits: kvanb (kvanb@moz-21D819A7.lnse5.lon.bigpond.net.au) (Ping timeout)
[09:50:26] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[09:51:19] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[09:52:30] *** Joins: kvanb (kvanb@moz-373A87EB.lnse7.lon.bigpond.net.au)
[09:53:24] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[09:55:31] *** Quits: W0rmDr1nk (wormdrink@moz-89570CE2.access.mtnbusiness.co.za) (Ping timeout)
[09:56:44] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:58:16] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:58:59] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[09:59:35] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:00:07] *** Quits: twi (Adium@1003EE9C.E815CABE.77D54CE0.IP) (Quit: Leaving.)
[10:06:20] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (services.mozilla.org (Too many invalid passwords))
[10:06:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[10:06:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[10:07:13] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[10:09:31] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[10:12:07] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[10:12:29] *** Joins: tulloch (tulloch@378D81E8.C44FFC3B.A973A616.IP)
[10:12:33] *** Quits: kimundi (kimundi@moz-262F3D8F.dip0.t-ipconnect.de) (Ping timeout)
[10:13:30] *** Joins: skade (skade@moz-747AD1A6.web.vodafone.de)
[10:14:54] *** Quits: skade (skade@moz-747AD1A6.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:16:08] *** Quits: tulloch (tulloch@378D81E8.C44FFC3B.A973A616.IP) (Ping timeout)
[10:17:03] *** Joins: patpat (patpat@C8F4F0EE.7FC6F41F.98F3E2B5.IP)
[10:17:22] *** Joins: skade (skade@moz-747AD1A6.web.vodafone.de)
[10:18:36] *** Joins: kimundi (kimundi@moz-61CF2AFF.dip0.t-ipconnect.de)
[10:18:39] <bakibour> Is there anything LinQ like for Rust?
[10:18:45] *** Quits: skade (skade@moz-747AD1A6.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:19:17] *** Joins: skade (skade@moz-747AD1A6.web.vodafone.de)
[10:19:30] <eddyb> "LinQ, a Japanese girl group"
[10:19:35] <bakibour> :)
[10:19:36] <Yoric> I don't think there is.
[10:19:38] <eddyb> "Language Integrated Query (LINQ), a Microsoft .NET Framework component"
[10:19:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:19:43] <Yoric> But it shouldn't be too hard to build.
[10:20:06] <bakibour> Aye
[10:20:11] <eddyb> maybe we should use this exact example as a motivator against messing with capitalization
[10:20:16] <jakob> linq rocks.
[10:20:17] <jakob> Just sayin
[10:20:26] <bakibour> :)
[10:20:32] <eddyb> bakibour: you can do a lot of the same thing with iterators
[10:20:50] <bakibour> That was where my question aimed at ill have a closer look at the iterators then.
[10:20:59] <bakibour> Maybe some traits added there will do the magic.
[10:21:05] <eddyb> the examples on the wikipedia page for LINQ are a subset of what iterators can do
[10:21:18] <sigma> Would rust even need any language features? It might be implementable with some traits and a macro
[10:21:24] <bakibour> linq has a lot of stuff like casting and sorting etc.
[10:21:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:21:41] <eddyb> LINQ seems to work on collections and not streams which is inefficient
[10:21:44] <bakibour> sigma: That was what i had in mind also, linq is implemented with extension methods.
[10:21:59] <bakibour> eddyb: That is what IObservable is for.
[10:22:17] <bakibour> linq operates on IEnumerable
[10:22:31] *** Joins: philix (felipe@moz-7BFF4EEE.user.veloxzone.com.br)
[10:22:41] <eddyb> pretty sure "casting" is a map
[10:22:44] <bakibour> Reactive Extensions add similar extensions though for IObservable
[10:22:47] <eddyb> (the map operation)
[10:22:48] <bakibour> eddyb: Yes
[10:22:56] <huon> LINQ is a superset of what Rust's iterators are, aiui
[10:23:10] <bakibour> Is there something like accumulate also?
[10:23:12] <eddyb> huon: I was talking about the examples
[10:23:15] <eddyb> bakibour: folding?
[10:23:20] <bakibour> Ah ok
[10:23:28] <huon> (specifically, .fold)
[10:23:45] <bakibour> Cool, sorry that i ask all these dumb questions, it is just so much to read :)
[10:23:54] <jakob> eddyb: plinq handles streams I think
[10:24:04] <bakibour> And i am not one of those guys who can read everything sequentially :)
[10:24:27] *** Quits: philix (felipe@moz-7BFF4EEE.user.veloxzone.com.br) (Ping timeout)
[10:24:27] <sigma> the rust terminology doesn't line up with c# either, it uses the math's inspired names in a lot of cases
[10:24:32] <eddyb> play with iterators and come back with suggestions for things can that be seriously improved
[10:24:34] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[10:24:43] <eddyb> sigma: they are closer to Haskell than anything else
[10:24:57] <eddyb> (at a first look, that is)
[10:25:05] <huon> sigma: it == Rust, or c$?
[10:25:05] <sigma> yup, it makes it very accessible to me, not sure how others find it :)
[10:25:08] <huon> *C#
[10:25:25] <sigma> huon: rust
[10:25:40] <huon> yup
[10:25:51] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[10:25:54] * huon prefers the maths-names
[10:26:04] *** bakibour is now known as bourbaki
[10:26:08] <bourbaki> huon: like this ;)
[10:26:08] <huon> heh
[10:26:45] <huon> all we now is functors, monads, categories etc.
[10:27:06] <eddyb> now?
[10:27:44] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:28:05] <huon> Friday 14 March  10:27:57 UTC 2014
[10:28:20] <eddyb> huh
[10:28:44] <huon> you asked for the time
[10:28:48] <bourbaki> Heh
[10:28:49] <jakob> Rust is still kinda scary to me :/
[10:28:52] <jakob> syntax is odd
[10:29:03] <jakob> Perhaps Im just young and foolish and don't understand it too well
[10:29:13] <eddyb> huon: you said "now"
[10:29:19] <sigma> C++'s abuse of names gets really irritating
[10:29:22] <eddyb> and it doesn't fit in AFAICT
[10:29:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[10:29:37] <Ms2ger> jakob, odd how? It's mostly fairly standard C/Java-ish, no?
[10:29:39] <huon> eddyb: whaddya mean?
[10:29:48] <eddyb> "all we now is functors, monads, categories etc."
[10:29:52] <huon> oh
[10:29:54] <sigma> huon: you wrote now instead of know
[10:29:54] <jakob> Ms2ger: sometimes it gets really symbol heavy, and it can be a tad confusing
[10:29:56] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[10:29:59] * huon accidentally a word
[10:30:03] <huon> *all we need now
[10:30:11] * huon understands the confusion
[10:30:26] <sigma> ahh, caught up
[10:30:29] <eddyb> jakob: you need patience, young padawan
[10:30:33] <huon> jakob: the symbol heavy-ness is improving (with the removal of @) :)
[10:30:42] * eddyb does more
[10:30:54] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[10:31:06] <huon> but yeah, I imagine the really pointer-y pieces of code look completely alien to a beginner
[10:31:10] <eddyb> for some reason mass refactoring isn't boring
[10:31:11] <sigma> so, any news on the HKT front? :)
[10:31:19] <eddyb> sigma: want to implement it?
[10:31:37] <sigma> I wish I understood the details that well ^^
[10:31:39] <huon> jakob: with a bit/lot of practice it becomes second nature, though
[10:31:56] <huon> sigma: no developments that I know of
[10:32:02] <eddyb> sigma: we're discussing the various options we have
[10:32:08] <jakob> huon: also the rapid syntax change and lack of a stupid mans tutorial / ide plugin hurts.
[10:32:17] <huon> jakob: yup :)
[10:32:18] <eddyb> I stick with my alien cyborg cyclops spiders aka <*>
[10:32:27] * huon vomits
[10:32:29] <huon> :P
[10:32:31] <bourbaki> One thing i am not sure yet if i like is that there are a lot of squigglies for all the pointer types.
[10:32:37] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[10:32:41] <sigma> I like <*>
[10:32:47] <Ms2ger> ~?
[10:32:51] <huon> bourbaki: only & and ~ now
[10:32:51] <sigma> but that might be stockholm syndrome
[10:32:54] <eddyb> sigma: instead of * -> *
[10:32:54] <huon> (well, * too)
[10:32:59] <bourbaki> And @ ?
[10:33:03] <huon> removed
[10:33:04] <bourbaki> That got replaced though right?
[10:33:09] <jakob> :C
[10:33:31] <huon> (the compiler needs a special attribute to accept any @ pointers)
[10:33:44] <jakob> I really *want* to like rust :P
[10:33:48] <jakob> I just get scared by it too much
[10:33:50] <eddyb> everyone using @ outside of the compiler is going to get burned
[10:33:51] <bourbaki> I would prefer something like owned_ptr<...>
[10:33:59] <jakob> It lacks the simplicity of things like Go
[10:34:09] <huon> jakob: have you seen http://rustforrubyists.com/ btw?
[10:34:13] <eddyb> yeah but Go lacks so mcuh everything else :P
[10:34:16] <eddyb> *much
[10:34:19] <bourbaki> :)
[10:34:20] <jakob> eddyb: heh
[10:34:26] *** kimundi is now known as zz_kimundi
[10:34:33] <huon> bourbaki: Uniq<T>
[10:34:33] <jakob> huon: would be good if I was confident in ruby :3
[10:34:34] <bourbaki> Rust just has so many concepts i think.
[10:34:44] <bourbaki> huon: Oh that is valid syntax?
[10:34:45] <huon> jakob: you don't need ruby knowledge?
[10:34:52] <eddyb> bourbaki: why would it not be valid syntax?
[10:34:54] <huon> s/?/!/
[10:34:59] <jakob> huon: also, I thought it was println!()
[10:35:01] <eddyb> bourbaki: it's GenericType<TypeParam> :P
[10:35:16] <bourbaki> Ah nice
[10:35:29] <eddyb> thought you played with generics
[10:35:37] <huon> jakob: RfR is basically "Rust for people who have used dynamic-languages"
[10:35:42] <huon> e.g. Python etc.
[10:35:53] <jakob> huon: mhm, but isn't println meant to be println! because its an "extension"
[10:35:55] <eddyb> a library Uniq would not have (right now) a moving out dereference
[10:36:02] *** zz_kimundi is now known as kimundi
[10:36:06] <huon> jakob: where are you seeing the println! ?
[10:36:09] <eddyb> but you can always make a method for it
[10:36:12] <huon> (well, the `println`)
[10:36:20] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Connection reset by peer)
[10:36:23] <eddyb> huon: 0.9 rust for rubyists
[10:36:45] <jakob> test.rs:2:5: 2:12 error: unresolved name `println`.
[10:36:49] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[10:36:54] <Ke> I guess it's time for 0.10 shortly
[10:36:54] <huon> oh, yeah... RfR is for the 0.9 release
[10:36:56] <huon> not master
[10:37:02] <bourbaki> So ~T <=> Uniq<T> ?
[10:37:10] <jakob> So why this sudden addition of !(?)
[10:37:11] <huon> and println was removed from the prelude after that relase
[10:37:11] <eddyb> bourbaki: if you implement the latter
[10:37:21] <huon> (the println function)
[10:37:22] <jakob> Why remove such a basic function 
[10:37:23] <jakob> :s
[10:37:25] <huon> leaving just the macro
[10:37:29] <bourbaki> Ah ok :) i thought it was somewhere already.
[10:37:29] <huon> println!() is correct
[10:37:42] <jakob> huon: that seems unnessaserally complicated
[10:37:51] <huon> jakob: why?
[10:37:54] <bourbaki> Since you solded me for my *style* i think it is not a good idea to add stuff like that then.
[10:38:00] <huon> println!("foo {}", "bar")
[10:38:02] <jakob> huon: because it was a function, then it got removed?
[10:38:03] <bourbaki> Cause it makes code to others unreadable again.
[10:38:14] <eddyb> bourbaki: you'd have to obey the rules
[10:38:16] <jakob> huon: why not leave it as a function, rather than this weirder ! stuff
[10:38:18] <huon> jakob: with an easy replacement
[10:38:24] <huon> jakob: formatted printing
[10:38:26] <bourbaki> I guess it is just something to get used to.
[10:38:35] <eddyb> bourbaki: you can't get code merged that doesn't conform to the rust style
[10:38:46] <bourbaki> I just learned to not like single character operators or whatever over the years :)
[10:38:47] <eddyb> bourbaki: but it might create a lot of bloat... you can try replacing all the ~T in the entire compiler and see how it ends up looking
[10:38:50] <huon> rusti: println!("foo {} {}", 1, "bar")
[10:38:50] -rusti- foo 1 bar
[10:38:50] -rusti- ()
[10:38:54] <huon> jakob: ^
[10:39:01] <huon> can't do that as nicely with the function directly
[10:39:27] <bourbaki> eddyb: Yeah i see what you are saying, i had a look at the List example again.
[10:39:30] <jakob> huon: no? printf("foo %d %s\n", 1, "bar")
[10:39:32] <bourbaki> And it would loook crap there.
[10:39:32] *** Joins: mrzombie (Mibbit@moz-2FE82A80.soundnetworking.com)
[10:39:39] <huon> bourbaki: yeah, that `+` operator is very devious :P
[10:39:40] <huon> jakob: that's not Rust ;)
[10:39:51] <jakob> huon: does rust not allow arbitary arguments?
[10:39:56] <huon> println!() gives compile time verified formatting
[10:40:03] <huon> i.e. type and memory safe printing
[10:40:07] <jakob> riiihgt
[10:40:09] <jakob> okay 
[10:40:10] <huon> unlike C's printf
[10:40:13] <eddyb> bourbaki: 817 occurrences of ~
[10:40:14] <kimundi> And Rust has not variadic functions
[10:40:14] <jakob> so ! indicates a macro?
[10:40:20] <kimundi> yes
[10:40:20] <huon> yeah, exactly
[10:40:26] <eddyb> bourbaki: only 511 of those aren't ~"foo"
[10:40:27] <jakob> Right im slowly getting there.
[10:40:29] <kimundi> rusti: line!()
[10:40:29] -rusti- 11
[10:40:38] <kimundi> rusti: file!()
[10:40:38] -rusti- <anon>
[10:40:41] <jakob> Shouldnt that be 1?
[10:40:45] <bourbaki> eddyb: I think it just is something that is easy to get used to.
[10:40:46] <mrzombie> Hi, I'm being curious about Rust - I wondered if there's anything built for code completion yet?
[10:40:50] <eddyb> jakob: it's wrapped
[10:40:54] <jakob> eddyb: gotcha
[10:41:07] <jakob> eddyb: virtualized box somewhere right? IO removed too?
[10:41:11] <kimundi> jakob: rusti wraps the line you send it in this: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[10:41:22] <eddyb> playpen is in a sandbox
[10:41:27] <eddyb> s/in//
[10:41:34] <huon> running inside a linux containers sandbox
[10:41:51] <bourbaki> Something like light table would be awesome for Rust.
[10:41:55] <huon> i.e. it has a filesystem etc. but no external access (other than by stderr/stdout)
[10:42:02] <jakob> huon: fair game
[10:42:06] *** Joins: flan3002 (flan3002@ADE308B1.8B38C502.16E13E53.IP)
[10:42:17] <jakob> I am waiting till intellij gets a plugin before I commit 100% to rust
[10:42:17] <jakob> :(
[10:42:30] <eddyb> jakob: doubt that's going to happen
[10:42:37] <huon> ... in the near future
[10:42:37] <eddyb> Java IDE with Rust support?
[10:42:40] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:42:56] <eddyb> emacs/vim will probably be the first ones to get support
[10:43:06] <huon> eddyb: past tense
[10:43:09] <huon> right?
[10:43:09] <sigma> I've finally excised the last IDE from any of my dev environments.
[10:43:10] <mrzombie> I'd be content with code completion in emacs :P
[10:43:13] <jakob> eddyb: intellij is not just a Java IDE :|
[10:43:18] <eddyb> huon: right, I wasn't sure
[10:43:24] <tiffany> mrzombi: I don't think there is, the syntax moves too quickly for it to exist right now without a central completion daemon based on the compiler source
[10:43:38] <eddyb> huon: but none of them have fully typed support AFAIK
[10:43:43] <jakob> And anyway, intellij is landing a c++ / c ide soon. Shouldn't be a huge leap to rust
[10:43:47] <huon> and the compiler is architectured all wrong for code completion
[10:43:57] <eddyb> huon: not *that* wrong
[10:43:58] <huon> since it kinda just grew on itself without that being a goal
[10:44:00] <bourbaki> How so?
[10:44:09] <huon> no possible way to support partial input
[10:44:16] <huon> e.g. fn foo() { x.b<tab>
[10:44:18] <huon> no completions
[10:44:23] *** Quits: JanC_ (janc@moz-2AC80CF3.dsl.scarlet.be) (Ping timeout)
[10:44:24] <bourbaki> Ah
[10:44:28] <huon> (at least, no accurate completions)
[10:44:48] <mrzombie> So ctags or nothing at least for now?
[10:44:51] <jakob> Im not a vim/emacs monkey :( this saddens me
[10:44:55] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[10:45:02] <tiffany> there is a ctags file sitting in the source tree
[10:45:03] <bourbaki> I am using Sublime
[10:45:04] <huon> people are working on support for various editors
[10:45:09] <eddyb> jakob: I am considering kdevelop support
[10:45:12] <mrzombie> jakob: Monkey? :P
[10:45:13] <eddyb> and that's a serious C/C++ IDE
[10:45:16] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:45:33] <eddyb> compared to, idk, IntelliJ or IDEA
[10:45:34] <jakob> eddyb: again, jetbrains are releasing a full C/C++ ide.
[10:45:38] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:45:42] <eddyb> wait, no, those are almost the same thing
[10:45:56] <huon> e.g. there's highlighting support for various editors in the main repo, and people have e.g. atom and sublime plugins elsewhere, iirc
[10:46:06] <eddyb> jakob: but that would be a different IDE, not IntelliJ with C/C++ support, wouldn't it?
[10:46:17] *** pmoore is now known as pmoore|away
[10:46:23] <jakob> eddyb: its built on the same platform though, just like all their other products are
[10:46:25] <eddyb> huon: that could be solved by the changes pauls wants to make - the error handling stuff in the parser
[10:46:32] <bourbaki> I would rather like to see some original IDE like that light table thingy.
[10:46:33] <eddyb> jakob: ah, ok, that makes more sense
[10:46:42] <eddyb> bourbaki: you can start working on one ;)
[10:46:47] <bourbaki> I might.
[10:46:49] <jakob> eddyb: intellij is more than a "java" ide, its a full platofrm for developing environments :P
[10:46:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[10:47:00] <eddyb> bourbaki: and use OpenGL :P
[10:47:03] <jakob> eddyb: it just happens to be written in java originally
[10:47:07] <bourbaki> That would be the idea yes.
[10:47:21] <bourbaki> It would make use of stuff like window tiling etc.
[10:47:26] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:47:29] <bourbaki> So no mouse and clicky support shit.
[10:47:37] <mrzombie> :P Well thanks for the info guys, have a good day! Also, nice meeting you.
[10:47:39] *** Quits: mrzombie (Mibbit@moz-2FE82A80.soundnetworking.com) (Quit: http://www.mibbit.com ajax IRC Client)
[10:47:41] *** Joins: JanC_ (janc@moz-2AC80CF3.dsl.scarlet.be)
[10:47:51] <eddyb> bourbaki: "shit"?
[10:47:54] <bourbaki> :)
[10:48:01] <kimundi> Virtual Reality Rust IDE!
[10:48:11] <bourbaki> It is hard to build a propper windowing system.
[10:48:20] <bourbaki> And since i do not want to admit it i just say shit ;)
[10:48:46] <bourbaki> Look at the Light Table video it has a lot of cool features, like showing you documentation inline etc.
[10:49:04] <bourbaki> Or a canvas where you can sort your code to group functions etc.
[10:49:07] <sigma> just make it a tiling windowing system, that's as proper as any other windowing system :)
[10:49:11] <huon> eddyb: not really... you still have to have support for partial ASTs in the rest of the compiler
[10:49:32] <eddyb> huon: do you?
[10:49:48] <huon> eddyb: sure
[10:50:02] <eddyb> you have the last "sane" state
[10:50:07] <huon> how do you get `foo.bar(<tab>` to work ?
[10:50:11] <eddyb> you can extract all the information you need from there
[10:50:31] <huon> i.e. complete local variables that have a type that can be passed as the first arg to bar
[10:50:43] <eddyb> look in the local variables?
[10:50:43] *** pmoore|away is now known as pmoore
[10:51:01] <huon> you have to represent the incomplete foo.bar call somehow
[10:51:04] <eddyb> do you really want it to work if someone adds a local variable while it's in that foo.bar( state?
[10:51:13] <huon> in the AST
[10:51:15] <bourbaki> One thing that would be cool and unique for Rust would be if you could render the lifetime of an object into the source code somehow.
[10:51:20] <huon> so that the compiler can do type checking, etc etc.
[10:51:23] *** Joins: alonlevy (alon@DC91EFCF.8A195D58.5F7FEA02.IP)
[10:51:31] <bourbaki> Like in git branches or somesuch.
[10:51:37] <huon> to work out what exactly `.bar` is
[10:51:48] <eddyb> huon: the compiler doesn't have to do that
[10:51:51] *** Quits: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se) (Ping timeout)
[10:51:52] <eddyb> you have all the information
[10:51:59] <eddyb> the IDE is in an infinite type checking mode
[10:52:04] <huon> huh?
[10:52:19] <eddyb> how well do you know the internals of the type checker?
[10:52:50] <huon> assuming the parser magically handles last-good-states etc, how does an IDE use librustc to find the type of the first argument to the incomplete .bar call?
[10:53:00] <flan3002> Just wondering, what would ownership in e.g. a graph look like?
[10:53:06] <huon> flan3002: tree
[10:53:16] <huon> with references making it a DAG
[10:53:26] <eddyb> huon: it looks up the candidates
[10:53:38] <eddyb> via middle::typeck::check::method
[10:53:58] <eddyb> you don't need more than the callee and the method name
[10:54:05] <huon> how does it know the callee?
[10:54:10] <flan3002> huon: DAG?
[10:54:14] <eddyb> because it was previously type checked?
[10:54:16] <huon> flan3002: directed acyclic graph
[10:54:36] <eddyb> even if inference fails, you can still do this
[10:54:36] <pnkfelix> flan3002: if you want to represent general graphs (including e.g. cycles)
[10:54:54] <huon> flan3002: Oh, I think I misinterpreted your question...
[10:54:57] <huon> never mind me
[10:55:01] <pnkfelix> flan3002: then you have a variety of options, but the main one I've used is an vector that owns all the nodes
[10:55:03] <eddyb> why? because method lookup looks at everything that implements the method
[10:55:16] <huon> eddyb: that's not precise
[10:55:28] <eddyb> so you can show a list of possible types the callee might have and the signature of the method for each of them
[10:55:30] <pnkfelix> flan3002: and then using uint indices to index into that vector for the edges
[10:55:35] <huon> that can nearly be done with a purely AST based checker
[10:55:44] <eddyb> huh? how
[10:55:47] <flan3002> pnkfelix: That sounds more complex than in other languages...
[10:55:54] <huon> find all the thigns with a method 'bar'
[10:55:55] <eddyb> huon: oh, I see your confusion
[10:55:57] <huon> and list them
[10:56:00] <pnkfelix> flan3002: so that the graph itself owns the node and edge data
[10:56:10] <eddyb> huon: you can have partial type inference
[10:56:12] <pnkfelix> flan3002: it depends on your POV
[10:56:29] <eddyb> so you have a Vec<_>, then it could show methods for Vec<T> and Vec<int>
[10:56:48] <eddyb> if you pick the Vec<int> method, that should cause next type checking to infer it's Vec<int>
[10:56:51] <huon> eddyb: you still need to be able to pass a reasonable (subset) of the AST to the type-checkier
[10:56:52] <huon> (checker
[10:56:57] <huon> s/(/*/
[10:57:02] <eddyb> why?
[10:57:15] <eddyb> type checking isn't a closed process
[10:57:20] <huon> because the typechecker takes the AST as input?
[10:57:28] <huon> how else does it know anything about the source?
[10:57:57] <eddyb> it's an open process (modulo minor design stiffness)
[10:58:06] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:58:20] <eddyb> you can do partial parsing yourself and then control type checking to get information
[10:58:27] <flan3002> pnkfelix: Well, in C++/Java I'd simply use a pointer/reference to other nodes, indirectly imposing a graph structure. In C++/Java it can be done with one 'struct'/'class', while in Rust I seem to need to wire it together with another struct.
[10:58:42] <eddyb> huon: keep in mind that partial parsing wouldn't be that sane
[10:58:42] <huon> eddyb: do you really think that's feasible with the current design of librustc?
[10:58:47] <pnkfelix> flan3002: but in Java you'd be relying on the GC to collect the nodes, right?
[10:58:49] <eddyb> huon: you need partial additive parsing
[10:59:10] <bourbaki> laters
[10:59:10] <huon> eddyb: you'd also need to be able to handle syntax errors elsewhere in a file
[10:59:11] <pnkfelix> flan3002: you asked about ownership.  That sort of gets at the heart of the problem here.
[10:59:13] *** Quits: bourbaki (luesebrink@moz-45916A55.dip0.t-ipconnect.de) (Quit: leaving)
[10:59:19] <flan3002> pnkfelix: Yeah, somehow... And that one knows all nodes as well. You got a point there.
[10:59:23] <eddyb> huon: that you do by restricting things to a function
[10:59:29] <kimundi> flan3002: Correct, In Rust you need to explicitly enable the pointer/reference compiler magic that java/C++ uses by default.
[10:59:31] <huon> eddyb: and you need all the information from resolve, right?
[10:59:43] <kimundi> By using something like Rc or Gc smartpointers
[10:59:55] <eddyb> huon: if the function signature doesn't change, but its contents do, you can run all the passes on just the contents of that function
[10:59:57] *** Quits: alonlevy (alon@DC91EFCF.8A195D58.5F7FEA02.IP) (Ping timeout)
[11:00:05] <eddyb> do I really need to demo this :P?
[11:00:08] <huon> eddyb: yes
[11:00:13] <pnkfelix> flan3002: the numeric indices don't actually need to *look* like numbers in the bulk of one's code
[11:00:14] <eddyb> I have it all in my head...
[11:00:17] <kimundi> eddyb: Please do :)
[11:00:19] <eddyb> huon: but DST, HKT and VG!
[11:00:32] <huon> I won't believe that librustc is appropriately designed for a sane completion deamon until I actually see it
[11:00:47] <huon> eddyb: only 1 of those is a definite ;)
[11:00:49] <kimundi> eddyb: ... Then again, this can wait. ;)
[11:00:53] <pnkfelix> flan3002: you bascially can wrap them up in newtype'd structs (i.e. wrapper structs of a single field) and then make methods that make them look like proper data, rather than just integers
[11:00:55] *** Quits: skade (skade@moz-747AD1A6.web.vodafone.de) (Ping timeout)
[11:01:00] <eddyb> huon: resolve seems closed but you should be able to restrict it to a single path
[11:01:03] <flan3002> pnkfelix: Sure, I wasn't thinking that, it just seemed more work than in C++/Java, but the same amount of work is done.
[11:01:12] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[11:01:25] *** Joins: skade (skade@moz-747AD1A6.web.vodafone.de)
[11:01:27] <eddyb> huon: in general, you need nicer APIs. with the current "public fields everywhere" model, you can do it, albeit a bit hacky
[11:01:27] <flan3002> pnkfelix: *sigh* newtype'd?
[11:01:36] <kimundi> flan3002: just a wrapper type
[11:01:41] <eddyb> huon: there is no need for a massive redesign, just tiny things here and there
[11:01:43] <pnkfelix> flan3002: its the local jargon, don't blame me
[11:01:48] <huon> eddyb: sure sure... show me
[11:01:50] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:01:57] <kimundi> flan3002: like struct Foo(int) or struct Bar { data: uint }
[11:02:10] <flan3002> Ok.
[11:02:15] <eddyb> huon: do you agree that you only need to redo things *within* a function? from parsing to macro expansion etc.
[11:02:18] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[11:02:36] <pnkfelix> flan3002: if you look at src/librustc/middle/graph.rs you can see an example of such a graph API
[11:02:38] <kimundi> flan3002: called that way because of functional programming jargon we took :P
[11:02:50] <kimundi> type Foo = int; // type alias
[11:02:55] <flan3002> pnkfelix: I'll do that, thanks!
[11:03:04] <kimundi> struct Foo(int); // new type
[11:03:13] <huon> eddyb: if the only edit since the last run was inside that function, yes
[11:03:23] <flan3002> Yeah, I knew what a type alias, but not about newtype...
[11:03:38] <flan3002> *Yeah, I knew what a type alias is, but not about newtype...
[11:03:48] *** Quits: japaric (japaric@AF44BDDE.31BF4ADA.BFC118EE.IP) (Ping timeout)
[11:04:23] *** Quits: IanCormac84 (User@7CC28D56.2A8D8854.67DFF8B4.IP) (Ping timeout)
[11:04:37] *** Quits: dagle (dagle@moz-B17C4A95.cust.tele2.se) (Quit: WeeChat 0.4.3)
[11:04:39] <huon> eddyb: now, what about say, `foo().<tab>` where `foo<T: Trait>() -> T`
[11:04:59] <kimundi> flan3002: sure, just wanted to show you how the name came to be :)
[11:05:11] <flan3002> Is /*! ... */ just short for putting /// on every line?
[11:05:17] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[11:05:23] <huon> flan3002: for putting `//!` on every line
[11:05:34] <flan3002> What does //! do?
[11:05:40] *** Joins: japaric (japaric@C45EB916.55B992BD.5C7588CA.IP)
[11:05:51] <huon>  /*! and //! attach to the parent, /** and /// attach to the next item
[11:05:53] <pnkfelix> `//!` and `///` are the same, I think
[11:05:56] *** Joins: IanCormac84 (User@AAA0EE9A.64D641E5.67DFF8B4.IP)
[11:06:00] <pnkfelix> doh
[11:06:03] <pnkfelix> I guess I am wrong.  :)
[11:06:44] <flan3002> huon: So, in src/librustc/middle/graph.rs //! would attach to what?
[11:06:50] <pnkfelix> flan3002: (but they *do* both represent doc-comments.  Its just a matter of what their target is, as huon said)
[11:06:51] <flan3002> At the top level.
[11:07:15] <kimundi> flan3002: /// and //***/ are sugar for a #[doc = "..."] attribute, and //! and /*!*/ are sugar for a #![doc="..."]; attribute
[11:07:26] <pnkfelix> flan3002: so that is an inner doc comment, so it applies to the graph module itself.
[11:07:26] <huon> flan3002: the module
[11:07:49] *** Joins: angdev (uid7041@moz-E77DEB21.irccloud.com)
[11:07:50] <huon> flan3002: http://static.rust-lang.org/doc/master/rustc/middle/graph/index.html
[11:08:30] <kimundi> mod parent { /*! doc for parent */ /** doc for child */ mod child {} }
[11:09:20] <flan3002> And the same (! for parent) applies to #![attributes]?
[11:09:32] <kimundi> yes
[11:09:35] <eddyb> huon: well, it would at least show trait methods in scope that are implemented for any type
[11:09:47] *** Quits: JanC_ (janc@moz-2AC80CF3.dsl.scarlet.be) (Ping timeout)
[11:10:14] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[11:10:22] *** Joins: JanC_ (janc@moz-2AC80CF3.dsl.scarlet.be)
[11:10:35] <eddyb> huon: then, it could probably peek at all the bounds that "touch" that inference variable
[11:10:59] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[11:11:08] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[11:11:18] * flan3002 decided to browse the rustc source more often.
[11:11:27] <eddyb> huon: hmm, this is a choice between bound validation and inference
[11:11:42] *** Quits: skade (skade@moz-747AD1A6.web.vodafone.de) (Ping timeout)
[11:11:56] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:12:00] <huon> eddyb: what about `let x = foo(); x.<tab>; info_that_fixes_xs_type(x);`?
[11:12:09] <eddyb> huon: so you would need your own code for tracking possible satisfiable bounds
[11:12:09] *** Joins: skade (skade@moz-747AD1A6.web.vodafone.de)
[11:12:11] <huon> the partial parsing couldn't just truncate
[11:12:40] <huon> eddyb: sounds like librustc isn't usable as a completion daemon if you need to be keeping explicit track of type bounds yourself ;)
[11:12:54] <eddyb> rustc doesn't do bound inference
[11:12:59] <eddyb> because we don't have that in the language
[11:13:17] <eddyb> huon: with no state where you have something like let x = foo(); info_that_fixes_xs_type(x);?
[11:13:37] <eddyb> *completely parseable state
[11:14:00] *** Quits: skade (skade@moz-747AD1A6.web.vodafone.de) (Ping timeout)
[11:14:23] <eddyb> let x = foo(); x; info_that_fixes_xs_type(x); // that would be enough to infer the type of x
[11:14:44] *** Joins: eibwen (kvirc@moz-AC96660A.dip0.t-ipconnect.de)
[11:15:11] <eddyb> you can fix things like semicolons, based on heuristics, to get as much information as you can
[11:15:14] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:15:41] <kimundi> argh, is github slow for anyone else?
[11:16:03] <eddyb> so if I have that snippet on 3 lines, and the middle line has just `x`, that can be safely considered `x;`
[11:16:20] <eddyb> huon: I have an excuse for bailing this (fun) discussion though :D
[11:16:37] <huon> kimundi: not particularly
[11:16:46] <eddyb> kimundi: timing out a lot lately
[11:16:52] <eddyb> on fetches and pushes
[11:17:11] <kimundi> eddyb: that sounds like my situation
[11:17:26] <eddyb> huon: if we don't reduce memory usage and time-till-typeck-completes, it ain't gonna work for librustc. and what good is an IDE that can't be used to develop the compiler :P?
[11:17:29] <kimundi> maybe europe server troubles
[11:17:55] <eddyb> that would explain why nobody else has issues
[11:19:01] *** Joins: alonlevy (alon@5A09EA02.A54BD69F.77BEDD39.IP)
[11:19:20] <eddyb> huon: one of the thoughts I have about this is to keep most of the context on the disk, with an LRU cache, for large projects
[11:19:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:19:36] <eddyb> kdevelop uses enough RAM as it is
[11:20:02] <jensnockert> mmap all the things.
[11:20:09] <eddyb> jensnockert: yupp
[11:20:30] <eddyb> I wonder how feasible OpenGL is in general, when it comes to massive amounts of text
[11:21:03] <eddyb> but, for example, colors can be done in a shader
[11:21:04] <tiffany> I have experience with opengl and using text rendering libraries
[11:21:15] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:21:38] <eddyb> so if you use textures, you only need one bit per pixel
[11:21:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:21:53] <eddyb> and you can store the highlighting data in a range tree or something similar
[11:22:00] <tiffany> you need more than one bit per pixel
[11:22:05] <tiffany> because of antialiasing
[11:22:19] <eddyb> *sigh*
[11:22:31] <eddyb> tiffany: can't antialiasing be moved in the shader or something like that?
[11:22:47] <tiffany> what would the shader do?
[11:22:56] <eddyb> or is font antialiasing more efficient/better looking than general AA methods?
[11:23:01] <tiffany> I don't think computing antialiasing for font shaping curves is something very shaderable
[11:23:07] <kimundi> question at people familiar with the pretty printer: If change print_type() to emit "_" instead of a failure for TyInfer, do I need to adjust some other function as well? (Like, is there something like read_type or so)
[11:23:10] <tiffany> at the very least, it's not as easy as just rendering into a texture with cairo
[11:23:18] <eddyb> kimundi: hehe. nope
[11:23:24] <doomlord_> i would guess hardware gpu antialiasing beats cpu algorithms
[11:23:38] <eddyb> kimundi: "read_type" would be the parser's "parse_type"
[11:23:40] *** Quits: H3g3m0n (Mibbit@moz-AE17C55F.static.tpgi.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:23:45] <jensnockert> doomlord_: Hardware AA is notoriously bad.
[11:23:59] <doomlord_> quality or performance
[11:24:01] <eddyb> doomlord_: but only if you have all the information you need
[11:24:07] <doomlord_> quality:performance tradeoff
[11:24:31] *** Joins: lunaryorn (lunaryorn@moz-1732FDD4.dynamic.mnet-online.de)
[11:24:32] <eddyb> so large textures is the way to go?
[11:24:35] <doomlord_> ok for text.. its not so dynamic, fair enough
[11:24:37] <huon> kimundi: don't think so
[11:24:37] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:24:39] <kimundi> just render pixelated fonts and FSAA the IDE :P
[11:24:58] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[11:25:15] <eddyb> would you have to use one texture per line to avoid massive blitting action?
[11:25:18] <tiffany> it seems like the best solution is to have each line be a texture and generate them as you scroll
[11:25:35] <eddyb> tiffany: LRU?
[11:25:41] <tiffany> what's LRU?
[11:25:46] <doomlord_> least-recently-used
[11:25:47] <eddyb> least recently used
[11:26:01] <huon> least!recently!used
[11:26:10] <eddyb> imagine - every time you press enter at the start of a huge file, memmoving everything down
[11:26:12] <eddyb> NOPE
[11:26:21] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[11:26:31] <huon> eddyb: sounds like a ring buffer ;P
[11:26:34] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[11:26:51] *** Joins: mye (mye@moz-5578CD59.superkabel.de)
[11:26:53] <kimundi> I assume modeling fonts with vertices is a insane idea?
[11:27:04] <eddyb> kimundi: hmm
[11:27:13] <eddyb> I have a more insane idea
[11:27:22] <eddyb> oh dear this is genius
[11:27:40] <tiffany> using opengl for such a task feels so wrong
[11:27:40] <jensnockert> doomlord_: Quality is bad, unfortunately.
[11:27:47] *** Joins: mib_bml0tq (Mibbit@moz-45EFA215.ejsafra.com)
[11:27:50] <eddyb> so take the unicode "blocks" or whatever they're called, that are used in your project
[11:27:56] <eddyb> most of the time it's going to be just ASCII
[11:27:59] *** Quits: mib_bml0tq (Mibbit@moz-45EFA215.ejsafra.com) (Quit: http://www.mibbit.com ajax IRC Client)
[11:28:01] *** Quits: alonlevy (alon@5A09EA02.A54BD69F.77BEDD39.IP) (Ping timeout)
[11:28:11] <doomlord_> ok fair enough, text is a special case.
[11:28:26] <doomlord_> text thats' going to be at predictable onscreen pixel sizes..
[11:28:32] <doomlord_> & alignments
[11:28:38] <kimundi> tiffany: Eh, not using OGL ultimately has to solve the same things.
[11:28:43] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[11:28:52] <eddyb> and then generate a shader (from the current font (seetings)?) for the set of unicode "blocks" being used
[11:29:01] <pnkfelix> kimundi: BTW I wasn't trying to give you a hard time in that PR.  I mostly put the note there so that other people would not spend time checking if they should do `@bors: retry`
[11:29:06] <eddyb> having just one font texture and taking from that should be efficient
[11:29:22] <kimundi> pnkfelix: Oh, don't worry I didn't take it like that :)
[11:29:33] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[11:29:43] <eddyb> then you can encode 8bit or 16bit codepoints in a texture
[11:29:44] <kimundi> Just trying to fix it right now
[11:29:57] <eddyb> one byte per character instead of one bit per pixel
[11:30:00] <eddyb> and you get antialiasing
[11:30:52] <kimundi> eddyb: you mean, hardcode the glyph rendering into the shader?
[11:31:03] <tiffany> eddyb: you would also have to encode layout information
[11:31:11] <eddyb> monospace
[11:31:23] <doomlord_> tilemap shader ?
[11:31:24] <tiffany> do you want to always enforce monospace though?
[11:31:32] <eddyb> tiffany: or just optimize for it
[11:31:36] <tiffany> what about inline documentation?
[11:31:53] <eddyb> that's small compared to the code
[11:31:58] <eddyb> you want custom fonts for it anyways
[11:32:04] <eddyb> different shapes and sizes
[11:32:13] <doomlord_> if you have predictable character heights, perhaps a possible variation on tilemap would be an index per (1xY) tiles
[11:32:34] <eddyb> but with the code, you mainly have monospace of one font size
[11:32:40] <tiffany> I'm guessing you don't care much for non-latin scripts as well
[11:32:43] <huon> what about double width characters :P
[11:32:51] <eddyb> tiffany: see what I wrote above
[11:33:02] <eddyb> tiffany: you pick the unicode subset that fits the entirety of the codebase
[11:33:15] <eddyb> tiffany: *dynamically*
[11:33:35] <tiffany> well I mean, other scripts would require special cases in your code, which at this point would be assuming LTR monospace
[11:33:42] <tiffany> scripts like arabic don't play well with that
[11:33:53] <eddyb> code doesn't work with RTL
[11:34:03] <eddyb> I don't see how it could
[11:34:10] <huon> eddyb: why not?
[11:34:22] <tiffany> I feel as though new editors should not be so western-centric
[11:34:36] <huon> at the very least one could just render english RTL and it would work "fine"
[11:34:46] *** Quits: benjamin_ (benjamin@moz-5606BC65.dip0.t-ipconnect.de) (Ping timeout)
[11:34:51] <tiffany> I guess my feelings about editors, languages, and the interaction between the two are somewhat controversial
[11:34:57] <eddyb> there's a lot of magic involved with RTL
[11:35:02] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[11:35:10] <huon> eddyb: there's a lot involved with LTR too ;P
[11:35:19] <eddyb> I don't see how you could both parse and read it
[11:35:36] <eddyb> it either makes sense to you, or to a parser
[11:35:49] <huon> why, it's the same order on the disk
[11:36:07] <huon> things the human reads first and the parser reads first are always earlier in the file
[11:36:20] <eddyb> I guess I should've placed 3 things in there
[11:36:30] <eddyb> parser, renderer and human: pick at most two
[11:36:51] <eddyb> the other(s) need(s) a lot of magic
[11:36:54] *** Quits: Ferreus (ferreus@moz-30FCBB63.dip0.t-ipconnect.de) (Ping timeout)
[11:37:04] <huon> eh
[11:37:09] <eddyb> btw, it's actually ridiculously fast to search for non-7-bit codepoints
[11:37:22] *** Joins: tulloch (tulloch@DEA47ABC.E5A71B08.143B383.IP)
[11:37:27] <huon> b & 0x80 != 0
[11:37:35] <eddyb> 0x80808080 ;)
[11:37:45] <huon> if you feel like unrolling it, yeah
[11:37:51] <eddyb> you can probably go further with SSE
[11:38:14] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[11:38:42] <eddyb> RTL is > 7bit so it doesn't fit in this optimization
[11:38:57] <eddyb> hmm... 7 bit + "bold" can fit in one byte
[11:39:56] <glaebhoerl> nmatsakis: ping
[11:40:06] <eddyb> I have a syntax highlighter converter from kate syntax files to JS, I can port that to Rust and test my current optimization idea
[11:40:17] <eddyb> you can hardcode constants in the shader so that's cool
[11:40:42] <kimundi> since when can you not put a extern crate in a function?
[11:40:52] <eddyb> has it ever worked?
[11:41:13] *** Quits: tulloch (tulloch@DEA47ABC.E5A71B08.143B383.IP) (Ping timeout)
[11:41:14] <kimundi> dunno, don'T see why it shouldn't work
[11:41:17] <eddyb> mainly because it needs a module path
[11:41:20] <kimundi> its just a module
[11:41:25] <eddyb> for various technicalities
[11:41:37] <kimundi> but a function is a module?
[11:41:41] <eddyb> almost
[11:42:11] <eddyb> you can do main::Struct or main::Module
[11:42:15] <eddyb> *can't
[11:42:25] <eddyb> even though that's the path that shows up in various places
[11:42:44] <eddyb> kimundi: if you actually fix all the assumptions related to "extern crate" in librustc... maybe we can allow them in functions
[11:43:08] <kimundi> Dunno enough about the internals for that
[11:43:12] *** Joins: tulloch (tulloch@DEA47ABC.E5A71B08.143B383.IP)
[11:43:20] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[11:43:42] <glaebhoerl> huon: is this fixed? https://github.com/mozilla/rust/issues/6675 strcat closed it, but I don't understand the comment
[11:43:47] <kimundi> Just trying to update my lazy init static code snippet to deref, and notice that it becomes impossible to write without manually importing libsync
[11:43:50] <eddyb> kimundi: grep is your friend
[11:44:42] *** pmoore is now known as pmoore|lunch
[11:45:03] <kimundi> eddyb: But, _What_ to grep for? :P
[11:45:08] <eddyb> ExternCrate
[11:45:22] <eddyb> or ItemExternCrate
[11:45:49] <eddyb> alternatively, just allow it and see what breaks
[11:46:26] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:46:28] <kimundi> where is Deref defined btw?
[11:46:35] <eddyb> ops and prelude
[11:46:42] <glaebhoerl> hm, seems it's fixed in 0.9, though not the way I expected (but possibly I was misexpecting)
[11:46:44] <kimundi> ah, great
[11:48:02] *** Joins: oberstet (quassel@moz-BD8278CC.dynamic.mnet-online.de)
[11:48:09] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:49:28] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[11:49:56] * glaebhoerl is very slightly saddened because he wanted to try fixing it
[11:50:35] <kimundi> eddyb: Hm, I see autoderef != autocoercion... seems I can't reduce assert_eq!(NUMBER.get(), &6); to assert_eq!(NUMBER, &6); after all
[11:50:50] <eddyb> .eq() will work though
[11:50:55] <kimundi> yeah
[11:51:04] <huon> glaebhoerl: the old for loop took a closure which set a special variable for a `return` inside it, to allow `fn foo() { for ... { return } }` to return from `foo` not just for's closure
[11:51:25] <eddyb> kimundi: dunno what you should do... maybe *NUMBER?
[11:51:38] <eddyb> kimundi: since assert_eq take a reference of that
[11:51:49] <huon> glaebhoerl: i.e. something like `let should_return = false; for { ... /* return rewritten to 'should_return = true; break' */ } if should_return { return }`
[11:51:52] *** Joins: Ferreus (ferreus@moz-4CDBB29.dip0.t-ipconnect.de)
[11:52:26] <glaebhoerl> ah i see
[11:52:33] <huon> glaebhoerl: and this variable interacted with very break poorly... but removing the old for loop completely removed that hack
[11:52:37] <kimundi> eddyb: haha, I just realized what a workaround I just wrote. Look at where I put the Deref impl: https://gist.github.com/Kimundi/8782487
[11:53:13] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[11:53:14] <kimundi> assert_eq!(*NUMBER, 6); works
[11:53:26] <huon> s/very break/break very/
[11:53:38] <eddyb> kimundi: oh dear
[11:53:51] *** jorendorff_away is now known as jorendorff
[11:53:54] *** Quits: patpat (patpat@C8F4F0EE.7FC6F41F.98F3E2B5.IP) (Ping timeout)
[11:53:59] <eddyb> kimundi: can't you just replace get with Deref?
[11:54:03] <huon> kimundi: should nest it inside the transmute expression :P
[11:54:19] <kimundi> eddyb: aaand I've found a way to segfault the testrunner
[11:54:20] <bollu> is it uID or UID or Uid or UId according to rust type naming conventions? (unique ID)
[11:54:27] <huon> kimundi: also... isn't that deref unsafe?
[11:54:37] <eddyb> bollu: one of the latter two
[11:54:43] <bollu> eddyb: good to know
[11:54:48] <eddyb> UniqId for sure
[11:54:50] <kimundi> huon: ... right I forgot
[11:54:58] <kimundi> that would explain the segfault
[11:55:00] <bollu> eddyb: hm, okay. 
[11:55:03] <eddyb> bollu: though I might have seen Uuid, so it varies
[11:55:18] <huon> Json
[11:55:20] <huon> Uuid
[11:55:22] <huon> Arc
[11:55:22] <eddyb> acronyms tend to get that "meh" look to them
[11:55:27] <eddyb> Http
[11:55:28] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[11:55:32] <bollu> xD
[11:55:42] <eddyb> Meh I should say
[11:55:55] <bollu> anyone have problems with irssi inside tmux?
[11:55:57] <glaebhoerl> huon: fwiw I was expecting that break inside return would be considered illegal as return would "cancel" the loop context, and the return-expr would not see any loop to break out of, but the actual behavior, where break cancels the return, also makes sense (it's just like if you write `return { return 2; 1 }`, which will return 2)
[11:56:02] <glaebhoerl> if that was comprehensible
[11:56:14] *** Quits: tulloch (tulloch@DEA47ABC.E5A71B08.143B383.IP) (Ping timeout)
[11:56:27] <huon> glaebhoerl: yeah, that would've been a reasonable solution too
[11:56:47] <huon> (well, I guess we still have an ill defined `return break`, so it still applies)
[11:56:52] * whitequark now realizes why exactly ocaml doesn't have any control flow statements
[11:56:55] <huon> rusti: loop { return break }
[11:56:56] -rusti- ()
[11:56:59] *** Joins: tulloch (tulloch@DEA47ABC.E5A71B08.143B383.IP)
[11:57:05] *** Joins: dranov (dranov@50CDF985.DCDEFE79.FB866788.IP)
[11:57:07] <huon> (that broke)
[11:57:14] <huon> break'd?
[11:57:24] <glaebhoerl> huon: how is it ill-defined / what should it do?
[11:57:40] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[11:57:53] <huon> glaebhoerl: your point about `return` cancelling the loop could still apply
[11:58:00] <bollu> how interchangable are rust data structures?
[11:58:19] <bollu> as in, how much of code will I have to rewrite to go from say vector to RingBuf?
[11:58:27] <bollu> I imagine not much
[11:58:46] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[11:58:46] <eddyb> .iter().collect()
[11:58:48] <kimundi> hm, imo return break; should always break. The expr gets evaluated first before return can start returning
[11:58:50] <huon> bollu: depends what part of the APIs you're using
[11:58:59] <eddyb> oh, replacing it... heh
[11:59:09] <huon> kimundi: yeah, I agree
[11:59:10] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[11:59:12] <huon> oh, actually
[11:59:14] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:59:15] <bollu> huon: most likely the .iter() and insertion/deletion
[11:59:33] <huon> `return match foo { A => break, B => 1, C => 2 }` seems like it might be (semi) useful
[11:59:45] <eddyb> s/semi/very
[11:59:46] <kimundi> eddyb: I replaced get() with deref, but this gives me another problem
[11:59:52] <huon> eddyb: not very
[12:00:03] <eddyb> huon: I use return inside return in a few places
[12:00:05] <huon> eddyb: if it were illegal, fixing it is just moving the `return`s inside
[12:00:06] <kimundi> eddyb: assert_eq!(VEC.as_slice(), &[1, 2, 3]); will fail to compile because VEC does not live long enough
[12:00:09] <eddyb> and it creates compact code
[12:00:10] <glaebhoerl> huon: I still don't get what the problem with the current behavior of `loop { return break }` is :)
[12:00:22] <kimundi> eddyb: In other words, I'd need a deref with a 'static lifetime
[12:00:34] <huon> glaebhoerl: your original comment about it
[12:00:43] <eddyb> kimundi: use a &'static EmptyStruct
[12:00:47] <huon> "I was expecting that break inside return would be considered illegal"
[12:00:59] <huon> we currently consider it legal
[12:00:59] <glaebhoerl> my original comment is also a valid way it could work, yes
[12:01:07] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:01:08] <glaebhoerl> but why is the current way invalid?
[12:01:12] <huon> I was just saying that I don't think anyone has explicitly thought about it
[12:01:30] <huon> the current behaviour has just happened, without a definite decision
[12:01:32] *** Quits: tulloch (tulloch@DEA47ABC.E5A71B08.143B383.IP) (Quit: leaving)
[12:01:37] <huon> ... but I'm quite happy with the way it is
[12:01:37] <glaebhoerl> OK
[12:01:41] <eddyb> kimundi: right now you use struct $n;
[12:01:41] * huon was just exploring
[12:01:57] <glaebhoerl> ok.. I basically agree then :)
[12:02:24] <glaebhoerl> (I thought there was some actual problem with it I wasn't seeing, apart from the history (not) behind it)
[12:02:35] <eddyb> kimundi: you should use struct concat_idents!($n, __S); static $n: concat_idents!($n, __S)  = concat_idents!($n, __S);
[12:02:50] <eddyb> though I somehow doubt macros in types work :(
[12:02:55] <whitequark> wait, concat_idents! works now?
[12:03:09] <kimundi> eddyb: I'm doing the struct trick because otherwise i polute the module namespace with additional symbols. I need a workind concat_idents! or a gen_symb! to work around that
[12:03:11] <huon> whitequark: it's always worked
[12:03:18] <whitequark> huon: I don't think so
[12:03:18] <huon> but it only works in very specific contexts
[12:03:30] <eddyb> s/specific/non-hygienic
[12:03:35] <eddyb> items aren't hygienic
[12:03:36] <whitequark> hm
[12:03:39] <huon> the places where it work/doesn't work hasn't changed since hygiene was implemented 6 months ago
[12:03:58] <whitequark> can I use it in function names?
[12:04:03] <huon> and hygiene only reduced the number of instances that worked
[12:04:04] <huon> nope
[12:04:10] <huon> just item and expression contexts
[12:04:13] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[12:04:20] <huon> (since that's the only places you can call macros)
[12:04:23] <whitequark> that sucks
[12:04:23] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[12:04:48] <eddyb> kimundi: mkay, another idea: struct $n {__contents__: ()} static $n: $n = $n {__contents__: ()};
[12:04:50] <huon> so anyway, eddyb's use as a type doesn't work
[12:05:27] <eddyb> kimundi: that's basically what an unit struct does
[12:05:39] <eddyb> (but now it's always 'static)
[12:06:13] *** Quits: mye (mye@moz-5578CD59.superkabel.de) (Quit: mye)
[12:07:18] <kimundi> eddyb: That works, thanks
[12:07:27] <kimundi> Silly seperate namespaces
[12:07:44] <eddyb> kimundi: btw, I just realized that what you did is (almost) exactly how C function statics work
[12:07:49] <bollu> I'm tempted to name the game handling part carmack. please give me a better name
[12:08:17] *** pmoore|lunch is now known as pmoore|away
[12:08:24] <eddyb> garmack
[12:08:41] <kimundi> eddyb: yeah, a static mut inside a function is the same thing
[12:08:45] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[12:08:48] *** Joins: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt)
[12:08:52] <eddyb> kimundi: I mean, the lazy initialization
[12:08:54] <bollu> eddyb: funny
[12:08:54] *** Quits: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt) (Quit: Konversation terminated!)
[12:09:36] <kimundi> Okay, up to date working version: https://gist.github.com/Kimundi/8782487
[12:09:42] *** Joins: mindcat_ (mindcat@45814CCF.B1E12A5D.57E3C596.IP)
[12:09:43] <eddyb> kimundi: it has a non-obvious (minor) cost in C, which you made explicit ;)
[12:09:58] <kimundi> C is threadsafe? I doubth that :P
[12:10:10] <mindcat_> where is the getopts?
[12:10:29] <eddyb> kimundi: hmm, not sure if it's atomic or not... I could check
[12:10:36] <mindcat_> what happens extra::getopts
[12:10:42] <kimundi> mindcat_: has its own crate now. extern crate getopts
[12:10:52] <mindcat_> kimundi: ohh
[12:10:59] <kimundi> mindcat_: see here: http://static.rust-lang.org/doc/master/index.html
[12:11:08] <glaebhoerl> gah, the workweek minutes are so long
[12:11:11] <huon> mindcat_: for the moment the answer to "where is module ...::foo" is almost always "moved to the new foo crate"
[12:11:18] <huon> glaebhoerl: yeah :(
[12:11:19] *** Joins: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net)
[12:11:19] <glaebhoerl> i am serially intimidated to read them
[12:11:24] <glaebhoerl> but i will have my revenge
[12:11:31] <mindcat_> huon: alright..
[12:11:40] <huon> it'd be nice if they were separate pages...
[12:12:06] *** Quits: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[12:12:09] <eddyb> " error: initializer element is not a compile-time constant" huh?
[12:12:23] <eddyb> did... did the game rules change?
[12:12:25] <kimundi> Apropos workweek minutes: somewhere there is a code example similar to my lazy static one, but with a life-after-main cleanup routine. Need to find that one
[12:12:39] <huon> kimundi: of course C is threadsafe, a language that is one of the most widely used over the last 40 years wouldn't be wildly unsafe by design, right?
[12:12:46] <huon> ;P
[12:12:59] * kimundi slaps huon 
[12:12:59] <eddyb> what's wrong with this? void foo() {static int *x = malloc(4);}
[12:12:59] *** pmoore|away is now known as pmoore
[12:13:01] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[12:13:04] <eddyb> am I using the wrong keyword?
[12:13:16] <glaebhoerl> kimundi: ...how would that work? (I mean what kind of available primitive can you hook into to even access life after main?)
[12:13:22] <bollu> #[allow(non_camel_case_types)] <- that's a thing?
[12:13:26] <huon> eddyb: yes, using static for a local variable :P
[12:13:31] <huon> "local"
[12:13:43] <kimundi> glaebhoerl: rt::at_exit(proc() {...}) or so
[12:13:47] <eddyb> huon: function-level lazily initialized static
[12:13:50] <glaebhoerl> ah ok
[12:13:58] <eddyb> huon: I know those exist :S
[12:14:01] <glaebhoerl> eddyb: aren't you just missing casts?
[12:14:04] <glaebhoerl> or are they implicit in C
[12:14:06] * huon was just joking about `static` being bad style generally
[12:14:13] <huon> glaebhoerl: void* -> T* is implicit
[12:14:19] <eddyb> glaebhoerl: see the error above. and yeah, C is implicit
[12:14:23] <glaebhoerl> oh how wrong :(
[12:14:34] <glaebhoerl> what about T* -> void*?
[12:14:38] <huon> yeah
[12:14:43] <huon> implicit
[12:14:53] <glaebhoerl> ok, at least they don't get it _precisely_ backwards :)
[12:15:07] <kimundi> Does anyone know how I can build a mutex-based flipflop? :P threadsafe transition from uninit->init and threadsafe transition from init-> uninit
[12:15:16] <eddyb> hah, so C doesn't have lazy function statics
[12:15:18] <eddyb> C++ does
[12:15:26] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[12:15:30] <huon> (it's actually recommended to not cast the result of malloc in C, unlike C++ which requires it)
[12:15:45] <eddyb> huon: it's like inference!
[12:15:49] <eddyb> (but they got none)
[12:15:54] * glaebhoerl hasn't coded in plain C much
[12:16:07] <eddyb> %0 = load atomic i8* bitcast (i64* @guard variable for foo()::x to i8*) acquire, align 1
[12:16:14] <eddyb> kimundi: it's thread-safe
[12:16:18] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[12:16:30] <kimundi> eddyb: how do you know?
[12:16:35] <eddyb> "atomic"
[12:16:50] <kimundi> C or C++ ?
[12:16:57] <huon> kimundi: LLVM IR
[12:17:13] <kimundi> huon: ?
[12:17:24] <eddyb> what I just pasted is IR
[12:17:26] <kimundi> That doesn'T answer the question :P
[12:17:30] <eddyb> echo -e '#include <stdlib.h>\nvoid foo() {static int *x = (int*)malloc(4);}' | clang -S -emit-llvm -o /dev/stdout -x c++ - | c++filt | less
[12:17:35] <eddyb> if you want to play along
[12:17:47] <huon> kimundi: oh, I thought you were asking what language eddyb's snippet was
[12:17:50] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[12:18:00] <kimundi> okay, so its the result of a c++ compiler?
[12:18:04] <eddyb> yupp
[12:18:07] <eddyb> %1 = call i32 @__cxa_guard_acquire(i64* @guard variable for foo()::x)
[12:18:23] <eddyb> oh, so that's what cxa_guard is for. mkay
[12:18:32] <bollu> eddyb: interesting. 
[12:18:57] <kimundi> thats what I wanted to know. C++ I much more likely to believe that they define that as atomic than C. But besides, what IR is being emitted != what the standard demands.
[12:19:18] <kimundi> Or not demands
[12:19:20] <eddyb> so it does a cheap atomic load. if it's not intialized, it locks. if that succeeds, it means it really can be initialized
[12:19:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:19:32] *** Quits: flan3002 (flan3002@ADE308B1.8B38C502.16E13E53.IP) (Ping timeout)
[12:19:57] <eddyb> s/can/has to/
[12:20:21] <eddyb> I'm guessing Once is slightly cheaper, because of inlining and whatnot
[12:21:31] <mindcat_> rusti: ~[1,2,3,4].tail()
[12:21:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:21:32] -rusti- pastebinned 16 lines of output: http://sprunge.us/EQCY
[12:22:02] <mindcat_> rusti: println!(~[1,2,3,4].tail());
[12:22:03] -rusti- <anon>:11:18: 11:35 error: format argument must be a string literal.
[12:22:03] -rusti- <anon>:11         println!(~[1,2,3,4].tail());
[12:22:03] -rusti-                            ^~~~~~~~~~~~~~~~~
[12:22:03] -rusti- error: aborting due to previous error
[12:22:03] -rusti- application terminated with error code 101
[12:22:06] <kimundi> mindcat_: that parses as ~([1,2,3,4].tail())
[12:22:21] <kimundi> rusti: (~[1,2,3,4]).tail()
[12:22:22] -rusti- pastebinned 16 lines of output: http://sprunge.us/MKFi
[12:22:27] <mindcat_> rusti: ~([1,2,3,4].tail())
[12:22:28] -rusti- pastebinned 16 lines of output: http://sprunge.us/OSQP
[12:22:33] <kimundi> rusti: (~[1,2,3,4]).tail().to_owned()
[12:22:35] -rusti- [2, 3, 4]
[12:22:41] <mindcat_> kimundi: right
[12:23:25] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[12:24:59] <bollu> Btree = balanced tree right?
[12:25:04] *** Joins: asmyers (quassel@F39AC551.9A737B8F.FAA4474F.IP)
[12:25:16] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Ping timeout)
[12:25:42] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[12:27:21] *** Quits: japaric (japaric@C45EB916.55B992BD.5C7588CA.IP) (Ping timeout)
[12:27:52] *** Joins: japaric (japaric@D71AE9C7.FD3D1332.95AFB88D.IP)
[12:28:26] <mindcat_> rusti: static a : ~str = " a b c d e ".trim().to_owned();a
[12:28:27] -rusti- <anon>:11:27: 11:58 error: constant contains unimplemented expression type
[12:28:27] -rusti- <anon>:11         static a : ~str = " a b c d e ".trim().to_owned();a
[12:28:27] -rusti-                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[12:28:27] -rusti- error: aborting due to previous error
[12:28:27] -rusti- application terminated with error code 101
[12:29:20] <mindcat_> :S
[12:29:54] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Connection reset by peer)
[12:30:37] <kimundi> mindcat_: a static is a compiletime constant. YOu can't use any heap allocation or arbitrary function calls to initialize it, only simple expressions that can be evaluated at compiletime
[12:30:51] <kimundi> mindcat_: I wrote https://gist.github.com/Kimundi/8782487 to get around that
[12:31:47] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[12:31:55] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[12:33:05] <bollu> doomlord_: ping
[12:33:28] <doomlord_> hiu
[12:34:43] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[12:35:02] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[12:35:13] <bollu> doomlord_: was wondering where the sweet spot on the (fully-object-oriented <---> fully-component-based) is
[12:35:45] <doomlord_> i couldn't tell you for sure, but one metric is the number of instances vs the number of types
[12:36:29] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:37:30] *** jorendorff is now known as jorendorff_away
[12:37:48] * mindcat_ when ping doomlord, going dig doomlord.
[12:37:56] <bollu> doomlord_: hmm. that ratio should be high yes?
[12:38:34] <doomlord_> more types than instances -> OO.  more instances than types -> flat lists of specific types . somewhere in the middle .. components
[12:38:46] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Ping timeout)
[12:39:04] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[12:39:38] <doomlord_> OO with special cases for the most commonly instanced types works 
[12:39:48] <bollu> doomlord_: okay. I'll probably have a go at it, and then get back to you
[12:40:32] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[12:41:06] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[12:41:39] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[12:42:18] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[12:42:31] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[12:42:49] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:44:42] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[12:45:37] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[12:46:35] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[12:47:11] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:47:53] <doomlord_> anyone know off hand if "resolve::struct Module" contains references to the symbols defined in it - flicking through the source, it appears to me it describes the module graph only , not entirely sure though...
[12:48:10] *** Joins: mye (mye@moz-5578CD59.superkabel.de)
[12:48:51] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:49:01] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[12:50:32] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[12:51:16] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[12:51:51] *** Quits: dranov (dranov@50CDF985.DCDEFE79.FB866788.IP) (Ping timeout)
[12:52:36] <bollu> I'm implementing the double buffering needed for carmack's ideas. any changes to be done? https://gist.github.com/1adda65228738c24f366
[12:53:16] <WalrusPony> dafuq
[12:53:19] <WalrusPony> >error: use of undeclared module `std::ops`
[12:54:49] <kimundi> WalrusPony: where are you seeing that error?
[12:55:01] <WalrusPony> kimundi: Trying to use a Trait in a generic
[12:55:10] <bollu> so.... no changes? >_<;
[12:55:17] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[12:55:17] <WalrusPony> If I do ::std instead of just std, then it somehow works
[12:55:31] <kimundi> WalrusPony: AH, so its in a expression
[12:55:40] <kimundi> WalrusPony: Thats expected behavior.
[12:55:59] <WalrusPony> So I have to fully specify a module path from the :: root
[12:56:08] <kimundi> WalrusPony: module paths in "use" statements work differently than module paths everywhere else
[12:56:23] *** Quits: lunaryorn (lunaryorn@moz-1732FDD4.dynamic.mnet-online.de) (Quit: Textual IRC Client: www.textualapp.com)
[12:56:24] <WalrusPony> I see....
[12:56:30] <WalrusPony> Thanks kimundi
[12:56:45] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:56:46] *** Joins: lunaryorn (lunaryorn@moz-1732FDD4.dynamic.mnet-online.de)
[12:56:48] <WalrusPony> It would be nice if the error diagnostic for that was a little more helpful
[12:56:53] <kimundi> WalrusPony: You don't need to specify the full path with :: btw, you just need to import the right thing
[12:56:54] *** Quits: lunaryorn (lunaryorn@moz-1732FDD4.dynamic.mnet-online.de) (Quit: )
[12:56:57] <WalrusPony> Like saying "did you mean to do ... ? "
[12:57:01] <kimundi> yeah
[12:57:04] <doomlord_> i suppose you  could make a DoubleBuffer<T> 
[12:57:10] <kimundi> file a bug with that suggestion! :)
[12:57:27] <bollu> doomlord_: there's a type? will check
[12:57:27] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Ping timeout)
[12:57:37] <bollu> doomlord_: ah you meant generalize this solution
[12:57:40] <doomlord_> i dont think there's an existing one but you could make  it :) 
[12:57:56] <bollu> doomlord_: hm, will do
[12:58:12] <bollu> doomlord_: do you see any other interesting applications of double buffering?
[12:58:25] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[12:58:25] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[12:58:35] <doomlord_> double buffering has been used for many things :)
[12:58:53] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[12:58:55] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[12:58:55] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[12:58:56] <doomlord_> if you had ints in the type system you could generalize a N-Buffer 
[12:59:00] <kimundi> Is there a way to have a uninit static mut?
[12:59:09] <eddyb> not really :(
[12:59:24] <bollu> doomlord_: eh, I'm not sure if that's useful. could take a crack at it
[12:59:25] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[12:59:25] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[12:59:32] <eddyb> you can't call uninit() - but in the future I think we'll allow intrinsics in statics
[12:59:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:59:51] <eddyb> kimundi: you want to remove the allocation?
[12:59:55] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[12:59:55] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:00:02] <kimundi> eddyb: ideally, yeah
[13:00:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:00:07] <eddyb> kimundi: and get even closer to what C++ does :P?
[13:00:11] <kimundi> yup
[13:00:15] <doomlord_> bollu i was going to suggest making simulations:[SimulationState,..2] but you'd get checks on indexing every time you access it, i think
[13:00:27] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:00:27] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:00:35] <eddyb> kimundi: rewrite intrinsics as per latest discussion
[13:00:39] <eddyb> and then it will work
[13:00:53] <bollu> eddyb: any way to have non bounds-checked arrays?
[13:00:55] <doomlord_> ( font:int;   fn flip(..) { self.int^=1; } .. but it doesn't know int is < size of the array
[13:00:57] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[13:01:02] <eddyb> bollu: unsafe_get
[13:01:08] <kimundi> eddyb: mainly I want to support a way to deallocate the static again though, but I'm not confident enough to start mucking around with lockign primitives yet :)
[13:01:16] <bollu> eddyb: think it would work for an N-buffer?
[13:01:21] <eddyb> kimundi: Once is a locking primitive :P
[13:01:26] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:01:26] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:01:27] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:01:33] <kimundi> eddyb: Right, I meant more low level than that
[13:01:36] <eddyb> bollu: why do you need to get rid of bound checks?
[13:01:48] <kimundi> eddyb: The atomic flip flop scenario I spoke of
[13:01:53] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[13:01:56] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:01:56] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:01:57] <bollu> eddyb: this will be running every frame... 
[13:02:02] <bollu> eddyb: in case I generalize it
[13:02:08] <eddyb> bollu: what is "this"?
[13:02:15] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:02:15] *** ChanServ sets mode: +o jdm
[13:02:21] <eddyb> iterators don't do bounds checks, fyi
[13:02:26] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:02:26] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:02:30] <bollu> eddyb: a generalization of a double buffer - https://gist.github.com/bollu/1adda65228738c24f366
[13:02:45] <eddyb> what operation do you need to remove bound checks from?
[13:02:56] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:02:56] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:02:59] <eddyb> you indentation is broken btw
[13:03:01] <bollu> eddyb: if I require an N buffer, I'll have a ~[] of N elements
[13:03:04] <bollu> eddyb: yep, I know
[13:03:12] <eddyb> and you have "return" in your code
[13:03:16] <bollu> I don't want it to array check every time I access [i]
[13:03:21] <eddyb> need a lint against non-early returns :P
[13:03:26] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:03:26] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:03:28] <eddyb> bollu: why do you index?
[13:03:32] <bollu> eddyb: match without returns seem to have weird effects
[13:03:37] <bollu> eddyb: not indexing right now
[13:03:42] <bollu> eddyb: I would if I generalized it
[13:03:56] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:03:56] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:04:02] <eddyb> bollu: why?
[13:04:09] <eddyb> do you really need random access?
[13:04:09] <bollu> eddyb: ah "why" - how else would you random access something?
[13:04:26] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[13:04:26] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[13:04:27] <eddyb> random access is bad in general
[13:04:35] <bollu> eddyb: for the simplest and (I think) fastest implementation - yes
[13:04:37] <eddyb> tripping over caches and whatnot
[13:04:42] <bollu> doomlord_: care to weigh in?
[13:04:55] <eddyb> bollu: what do you use random access for?
[13:05:15] <bollu> eddyb: elem[N] n= current active element of the N-buffer
[13:05:20] *** jdm sets mode: +b reyre!*@*
[13:05:30] <eddyb> you used the wrong capitalizations
[13:05:30] <bollu> 0 < n < len(arr)
[13:05:38] <eddyb> and we don't have len(...)
[13:05:41] <bollu> eddyb: :) don't nitpick
[13:05:41] <doomlord_> i suppose they could be owned pointers and you could swap the pointers
[13:05:44] <bollu> 0 <= n
[13:05:55] <eddyb> bollu: I have zero context. I have to nitpick to understand
[13:06:01] <eddyb> doomlord_: you can swap anything
[13:06:07] <eddyb> std::mem::swap
[13:06:10] <bollu> eddyb: ever used double buffering? 
[13:06:16] <doomlord_> struct Buffer<T> {   front:~T,  back:~T }
[13:06:28] <doomlord_> struct DoubleBuffer<T> {   front:~T,  back:~T } ^
[13:06:29] <eddyb> bollu: I don't see where you need random access in double buffering
[13:06:33] <bollu> doomlord_: won't work for a generalized solution would it?
[13:06:41] <eddyb> generalized over what?
[13:06:46] <bollu> eddyb: now, remove "double" and repalce with "n"
[13:06:48] <bollu> replace*
[13:06:53] <eddyb> oh
[13:06:56] <eddyb> bollu: ring buffer
[13:06:59] <eddyb> obviously
[13:07:04] <bollu> eddyb: not quite
[13:07:07] <doomlord_> might aswell just do double buffering
[13:07:20] <bollu> eddyb: unless our definitions of ring buffer vary
[13:07:45] <bollu> http://www.dspguide.com/ch28/2.htm <- my definition of a ring buffer
[13:07:48] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[13:08:07] <eddyb> what is that site, even?
[13:08:28] <eddyb> it's easier to search on wikipedia for me than on google
[13:08:35] <eddyb> https://en.wikipedia.org/wiki/Ring_buffer
[13:08:52] <eddyb> bollu: how big are each of your N elements?
[13:09:02] <bollu> eddyb: idk, I first encountered ring buffers when implementing feedback. hence the website
[13:09:03] <eddyb> in case a ring buffer is the wrong generalization for this
[13:09:11] <bollu> eddyb: depends.
[13:09:25] <bollu> eddyb: maybe coefficients (float), maybe large structs
[13:09:36] <bollu> eddyb: I'm not sure - I just want to generalize it for fun
[13:09:39] <eddyb> how is that related to double-buffering
[13:09:51] *** Joins: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt)
[13:09:54] <eddyb> I think you're generalizing over the wrong thing here
[13:10:03] <eddyb> a double buffer is a couple of buffers
[13:10:09] <eddyb> you are talking about things that aren't buffers
[13:10:15] <eddyb> hence it's not a double buffer anymore
[13:10:35] <bollu> eddyb: a double buffered system is a 2 things which repeatedly swap
[13:10:51] *** Quits: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt) (Quit: Konversation terminated!)
[13:10:57] <eddyb> s/things/buffers/
[13:10:58] <bollu> an N buffered system would be similar to a modulo arithmetic system, where you access elements as array[k % N]
[13:11:08] <eddyb> bollu: that's the definition of a ring buffer
[13:11:12] <bollu> where k is incremented every time you "flip"
[13:11:16] * pnkfelix thinks a pipeline would be the natural generalization of a double-buffer, where the discarded product is fed back into the beginning again
[13:11:17] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[13:11:48] <eddyb> bollu: how can you say k % N and not think "ring buffer" (while claiming to know what the latter is) :P?
[13:11:49] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[13:12:05] <kimundi> huon: Hm, do we have any special rules against reposts on the rust subreddit? I'd like to post my updated lazily initialized statics gist
[13:12:20] <eddyb> kimundi: just make it a Deref demo ;)
[13:12:21] <pnkfelix> (but the pipeline generalization only makes sense if you can break up the construction into > 2 stages that can all be run in parallel)
[13:12:31] <bollu> eddyb: the interface of Rust's ring buffer seems to represent something else http://static.rust-lang.org/doc/master/collections/ringbuf/struct.RingBuf.html
[13:12:47] <bollu> it seems to a far more generalized container
[13:13:08] <doomlord_> in resolve - anyone know off hand how to get from a string -> Ident ->    search possible DefId's that use that ident.. (scratching an itch here r.e. error messages/module paths)
[13:13:11] <darnuria> humm How I can define an empty vector like this: last([]) with type information?
[13:13:17] *** Joins: benjamin_ (benjamin@moz-5606BC65.dip0.t-ipconnect.de)
[13:13:18] <eddyb> can't
[13:13:33] <bollu> eddyb: so... back to the original question: how do I random access? :)
[13:13:49] <eddyb> bollu: v[i % v.len()] will not bound check
[13:14:20] <bollu> eddyb: and that affects the ring buffer how?
[13:14:37] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[13:14:42] <eddyb> *sigh*
[13:15:01] <eddyb> bollu: okay, so, let's not use RingBuf because that abstracts away the circularity
[13:15:05] <darnuria> rusti: assert!(last([]) == None);
[13:15:06] -rusti- pastebinned 7 lines of output: http://sprunge.us/hcRF
[13:15:39] <eddyb> bollu: use a Vec<T> and just wrap the access in a check for >= v.len() (and do a modulo if so)
[13:15:51] <kimundi> darnuria: fixed sized vector or owned vector?
[13:15:55] <eddyb> bollu: that will remove the bound check
[13:16:08] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[13:16:11] <darnuria> kimundi: fixed size &[char] for exemple.
[13:16:12] <bollu> eddyb: fine. thanks!
[13:16:46] <kimundi> darnuria: thats not fixed sized
[13:16:52] <kimundi> darnuria: thats a slice :P
[13:16:53] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[13:17:10] <darnuria> kimundi: Oh thanks :O
[13:17:29] <eddyb> bollu: RingBuf is a ring buffer that can grow, which is the extra feature you may not want
[13:17:55] <darnuria> kimundi: I just need to write a test without binding it to a variable like this     let empty: &[char] = [];
[13:18:00] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:18:00] <eddyb> bollu: and your head/tail are identical, which isn't an invariant maintained by RingBuf
[13:18:04] <kimundi> darnuria: anyway, explicit type annotation ot make something like last(&[]) work is going to be verbose
[13:18:06] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:18:44] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[13:18:44] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[13:18:47] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:18:48] <eddyb> darnuria: you can have a helper function
[13:18:53] <darnuria> kimundi: No problem that's just for testing purpose. I help a guy to translate 99problem in OCaml/lisp to rust :)
[13:18:56] *** Joins: Sorella_ (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:18:58] <bollu> eddyb: ah, I see. 
[13:19:05] <eddyb> fn empty<T>() -> [T, ..0] {[]}
[13:19:14] <eddyb> and then use empty::<char>() instead of []
[13:19:48] <darnuria> eddyb: Oh nice... thing.
[13:19:53] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[13:19:55] <kimundi> darnuria: theoretically it could be last(&[]: &[char]), but we don't support that syntax yet. You can do what what eddyb writes to get a empty fixed sized vector.
[13:19:56] <bollu> eddyb: that's sweet
[13:19:58] <kimundi> wait, idea
[13:20:09] <kimundi> rusti: ['?', ..0]
[13:20:10] -rusti- pastebinned 8 lines of output: http://sprunge.us/fOSB
[13:20:12] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[13:20:24] *** Quits: IanCormac84 (User@AAA0EE9A.64D641E5.67DFF8B4.IP) (Ping timeout)
[13:20:31] <kimundi> darnuria: okay that works too
[13:20:42] *** Joins: IanCormac84 (User@BA60D8C3.2A8D8854.67DFF8B4.IP)
[13:20:43] <eddyb> huh
[13:20:43] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[13:20:51] <eddyb> kimundi: crazy =))
[13:21:19] <bollu> kimundi: explaination? :)
[13:21:28] <eddyb> bollu: 0 repeats of '?'
[13:21:36] <bollu> eddyb: ah.
[13:21:38] <eddyb> the char value doesn't matter since it's repeated 0 times
[13:21:55] <eddyb> bollu: I spent some time fixing your style https://gist.github.com/eddyb/5ed0d1b6674ca865080b
[13:22:08] <kimundi> rusti: [''', ..0]
[13:22:09] -rusti- <anon>:11:11: 11:12 error: character constant must be escaped: \'
[13:22:09] -rusti- <anon>:11         [''', ..0]
[13:22:09] -rusti-                     ^
[13:22:09] -rusti- application terminated with error code 101
[13:22:17] <kimundi> darn, that used to work
[13:22:18] <bollu> eddyb: eddyb : thanks!
[13:22:25] <kimundi> rusti: ['"', ..0]
[13:22:25] -rusti- pastebinned 8 lines of output: http://sprunge.us/EQXb
[13:22:31] <eddyb> bollu: that's pretty much the official Rust look, if you want to contribute and whatnot, you will need to get used to it ;)
[13:22:51] <bollu> eddyb: gotcha :)
[13:23:12] <bollu> eddyb: looks good? https://gist.github.com/1adda65228738c24f366
[13:23:32] <bollu> eddyb: whoops, indentation
[13:23:34] <bollu> one sec
[13:23:41] <eddyb> still having 8-space tabs :P
[13:23:52] <bollu> eddyb: should be better now
[13:23:52] <eddyb> bollu: btw, if the types are small, you can swap them
[13:24:00] <bollu> eddyb: (a, b) = (b, a) thing?
[13:24:05] <eddyb> swapping two Vec<T> is cheaper than matching over a different variable
[13:24:19] <eddyb> bollu: mem::swap(&mut self.a, &mut self.b)
[13:24:31] <bollu> eddyb: holy crap. that's badass
[13:24:42] <eddyb> told you "swap" ten minutes ago :P
[13:24:50] <bollu> eddyb: I tend to not listen ;)
[13:24:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:25:13] <Ms2ger> bollu, that's not nice to people trying to help you ;)
[13:25:15] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[13:25:40] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[13:26:18] <bollu> Ms2ger: xD true 
[13:26:51] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:27:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[13:28:08] <bollu> eddyb: https://gist.github.com/bollu/1adda65228738c24f366 
[13:28:13] <bollu> eddyb: thanks for the help BTW
[13:28:24] *** Quits: asmyers (quassel@F39AC551.9A737B8F.FAA4474F.IP) (Ping timeout)
[13:29:43] <eddyb> bollu: much better :D
[13:30:08] *** Joins: flabbergaster (Mibbit@F21C3615.D1E7F08A.7EB1DE21.IP)
[13:30:20] <bollu> eddyb: thanks :)
[13:30:31] *** Quits: benjamin_ (benjamin@moz-5606BC65.dip0.t-ipconnect.de) (Client exited)
[13:32:29] *** Joins: asmyers (quassel@F39AC551.9A737B8F.FAA4474F.IP)
[13:32:41] *** Quits: angdev (uid7041@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[13:35:53] *** Quits: flabbergaster (Mibbit@F21C3615.D1E7F08A.7EB1DE21.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:36:46] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[13:38:14] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[13:41:01] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[13:41:02] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[13:41:17] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[13:43:20] *** Joins: mno2 (mno2@moz-3506EAC7.singnet.com.sg)
[13:44:25] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[13:44:29] *** Quits: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[13:44:43] *** Joins: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br)
[13:45:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:45:12] *** Quits: pepper_chico (pepper_chi@moz-E15D42C8.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[13:45:40] *** Joins: Florob (Florob@moz-39532932.de)
[13:46:05] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[13:46:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:47:25] *** Quits: IanCormac84 (User@BA60D8C3.2A8D8854.67DFF8B4.IP) (Ping timeout)
[13:47:25] *** Joins: IanCormac841 (User@FEC7AA1E.64D641E5.67DFF8B4.IP)
[13:47:53] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:48:42] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[13:48:54] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[13:49:03] *** Joins: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP)
[13:49:16] *** Quits: IanCormac841 (User@FEC7AA1E.64D641E5.67DFF8B4.IP) (Ping timeout)
[13:49:34] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:50:55] *** Quits: sellout (Adium@moz-EE794C0C.hlrn.qwest.net) (Quit: Leaving.)
[13:51:31] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[13:51:40] *** Quits: urbanserj (urbanserj@3E28BD5F.398BF19F.86BD9C9E.IP) (Quit: Leaving)
[13:51:42] *** Joins: tgkokk (tgkokk@moz-313711E.home.otenet.gr)
[13:52:16] *** Joins: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP)
[13:52:21] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[13:56:36] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[13:56:52] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[13:57:13] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[13:57:47] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[13:59:02] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[14:03:21] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[14:03:44] *** Quits: tgkokk (tgkokk@moz-313711E.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:03:58] <mindcat_> how can I define... a static string variable?
[14:04:19] <darnuria> In rust we must say a function prototype or a function signature?
[14:04:31] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[14:04:48] <mindcat_> rustilite: static abc : &str = ""; fn main() {}
[14:04:48] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[14:05:01] <mindcat_> rusti: static abc : &str = "";
[14:05:02] -rusti- <anon>:11:22: 11:26 error: missing lifetime specifier
[14:05:02] -rusti- <anon>:11         static abc : &str = "";
[14:05:02] -rusti-                                ^~~~
[14:05:02] -rusti- error: aborting due to previous error
[14:05:02] -rusti- application terminated with error code 101
[14:05:10] <pczarn> rusti: static abc : &'static str = ""; fn main() {}
[14:05:11] -rusti- pastebinned 7 lines of output: http://sprunge.us/UaMe
[14:05:28] <kimundi> darnuria: You mean terminology?
[14:05:43] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[14:05:44] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[14:05:51] <kimundi> darnuria: Whether it is called prototype of signature?
[14:05:56] <kimundi> or*
[14:06:04] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[14:06:13] <mindcat_> pczarn: oh thanks
[14:06:34] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[14:06:40] <kimundi> Signature is the one we use afaik. At least, I can't remember prototype being used.
[14:06:45] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[14:06:55] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[14:07:02] *** Joins: mib_qw3nw7 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[14:07:22] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[14:08:22] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[14:08:46] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[14:08:53] <pczarn> LLVM uses 'signature'. Example of an error: "Calling a function with a bad signature"
[14:08:55] <darnuria> kimundi: Yep.
[14:09:21] *** Quits: mib_qw3nw7 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:09:42] <darnuria> kimundi: I now that in C we prefers to just `prototype` but in Rust I dont know what is the best term
[14:10:42] <abinader> do we have something similar to Qt's signals/slots mechanism in Rust?
[14:10:50] <kimundi> darnuria: We definitely don't use "prototype", so I'd say "Signature" is the correct term. Its certainly what I use all the time
[14:11:32] <pczarn> darnuria: Language FAQ 0.16 "Why aren't function signatures inferred?"
[14:11:49] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[14:11:59] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:12:12] <Florob> prototype in C is also a bit special, because a function does not have to have one. Depending on your definition of "signature" it still has a signature, that is not enforced by the compiler, though
[14:12:44] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[14:12:51] <darnuria> Thanks for explanation. That clear now :)
[14:13:24] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[14:13:26] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[14:13:33] *** jorendorff_away is now known as jorendorff
[14:13:47] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[14:14:09] *** jdm sets mode: -b reyre!*@*
[14:14:28] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[14:14:38] *** Joins: dschatzberg (dschatzber@moz-E2680405.bu.edu)
[14:15:21] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[14:15:36] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[14:16:03] *** Joins: toqueteos (Mibbit@moz-B9CC0C90.red-88-10-31.dynamicip.rima-tde.net)
[14:16:04] <dschatzberg> Hi all, does rusts memory safety also extend to safety of arbitrary resources (such as file descriptors)?
[14:16:18] *** Quits: cschneid (cschneid@moz-12E33685.hlrn.qwest.net) (Client exited)
[14:16:22] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[14:16:31] <pczarn> darnuria: I guess we couldn't say that a lambda expression has a prototype rather than signature. C doesn't have anonymous function expressions.
[14:16:49] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[14:16:53] <toqueteos> hi guys, does old "rustc -c" do the same as "rustc --emit=obj" ? i'm trying to compile rustboot in rust0.9
[14:17:40] *** Joins: tgkokk (tgkokk@moz-313711E.home.otenet.gr)
[14:18:00] <kimundi> dschatzberg: What do you mean with "safety for arbitrary resources"?
[14:18:55] <dschatzberg> kimundi: With memory I can allocate it and have an owning reference which will free when it goes out of scope. I can then pass non-owning references and have static checks to ensure that the owning reference outlives all non-owning references. This is just for memory, can I use the same mechanism to manage something like a file descriptor
[14:19:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:19:21] <whitequark> RAII, yes
[14:19:26] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[14:19:34] <kimundi> yes
[14:19:35] <dschatzberg> RAII doesn't guarantee that it outlives all references
[14:19:52] <kimundi> dschatzberg: you can combine it
[14:19:54] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[14:20:00] <darnuria> pczarn: Thanks :) In my situation. I deal with function. so it's ok
[14:20:40] <pczarn> toqueteos: Yes
[14:20:47] <dschatzberg> kimundi: You mean have an object that wraps a file descriptor and heap allocate it to get the safety property?
[14:20:57] <kimundi> dschatzberg: Rusts ownership and lifetime system is what allows owned memory allocations and references to them work safely, not otherway round :)
[14:21:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:21:36] <dschatzberg> but can I create an owning reference to a file descriptor (not to memory which holds a file descriptor) and also a non-owning reference to a file descriptor and get the same static safety checks?
[14:22:15] <kimundi> dschatzberg: You can write types that have the same moving-and-not-outliving-references semantic to them without needing to do anything with memory
[14:22:29] <toqueteos> pczarn: thanks mate!
[14:22:40] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[14:22:41] <dschatzberg> kimundi: but moving can only be done once?
[14:22:51] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[14:22:53] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[14:23:16] <jdsanders> is there way to make a type or function in a module visible to only other modules in the same crate?
[14:23:18] <kimundi> dschatzberg: There is only one way a moving type moves in Rust, so I guess the answer is yes. :)
[14:23:23] <pnkfelix> dschatzberg: have you looked at what the existing IO subsystem does to manage File descriptors?
[14:23:30] <jdsanders> for instance sibling modules that want to use each other's types
[14:23:34] <dschatzberg> pnkfelix: no, I haven't
[14:23:50] <pnkfelix> dschatzberg: I ask because I wonder if that could possibly help resolve your questions of how this could be done.
[14:24:17] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[14:24:24] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[14:24:40] <pnkfelix> dschatzberg: but its possible that it might just confuse things further
[14:24:45] <pczarn> toqueteos: check out wbthomason/ironkernel and #rust-osdev channel
[14:24:50] *** Joins: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de)
[14:24:53] <dschatzberg> kimundi: with memory you can take many references, not just move ownership
[14:25:30] <toqueteos> pczarn yeah i saw that one on the forks list but i'm (trying) to follow this: http://jvns.ca/blog/2014/03/12/the-rust-os-story/
[14:25:38] <pnkfelix> dschatzberg: your use of the phrase "with memory" is confusing me
[14:25:45] <kimundi> dschatzberg: Rusts ownership semantics are independent from memory.
[14:26:03] <toqueteos> thanks anyway
[14:26:06] <pnkfelix> dschatzberg: do you mean that to mean "malloc'ed memory", e.g. memory acquired via something like `~T` (or `@T`) ?
[14:26:11] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Ping timeout)
[14:26:12] <dschatzberg> pnkfelix: yes
[14:26:28] <pnkfelix> dschatzberg: because you can create borrowed references to stack-allocated values as well
[14:26:46] <dschatzberg> thats fine but it all concerns references to memory
[14:26:56] <pnkfelix> dschatzberg: as kimundi says, ownership and borrowing are somewhat independent of the question of where the backing store is located
[14:27:37] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[14:27:43] <pnkfelix> dschatzberg: by keeping a file descriptor in a non-copyable value, one ensures that it will obey move semantics
[14:27:57] <pnkfelix> dschatzberg: and then you can create references to that value, and share those references
[14:28:08] <dschatzberg> pnkfelix: I want to be able to make non-owning copies of it and be guaranteed that it outlives the owning copy
[14:28:29] <kimundi> dschatzberg: That is possible
[14:28:31] <pnkfelix> dschatzberg: okay, but then to manage that you need some way to track when it *should* die
[14:28:32] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[14:28:39] <pnkfelix> dschatzberg: which is what the current libnative IO library does
[14:28:44] <dschatzberg> pnkfelix: it should die when the owning copy dies
[14:28:46] <pnkfelix> dschatzberg: by maintaining an Atomic Reference count
[14:28:48] <kimundi> dschatzberg: We offer all tools to manually build a &'a reference without the pointer part
[14:28:50] *** Quits: motley (motley@672D2CB5.46EA8228.BB273CC6.IP) (Quit: leaving)
[14:29:04] <dschatzberg> kimundi: can you point me at any docs for that?
[14:29:06] <pnkfelix> dschatzberg: you just said you want to "guarantee that it outlives the owning copy"
[14:29:11] *** Joins: motley (motley@672D2CB5.46EA8228.BB273CC6.IP)
[14:29:19] <dschatzberg> pnkfelix: guarantee statically, just like with malloced memory
[14:29:21] <pnkfelix> dschatzberg: did you mean guarantee that it *doesn't* outlive the owner?
[14:29:28] <darnuria> [Cl
[14:29:44] *** Quits: motley (motley@672D2CB5.46EA8228.BB273CC6.IP) (Quit: leaving)
[14:29:44] <darnuria> sorry. wrong Tmux pane :)
[14:30:04] <dschatzberg> pnkfelix: I'd like to get the same semantics as with ~ and &, if the compiler can't determine that ~ outlives & then its an error (as far as I understand)
[14:30:28] <kimundi> dschatzberg: Don't know about docs, sadly, but it amounts to defining a few zero-sized struct fields with special marker types that inform the compiler how if should behave: http://static.rust-lang.org/doc/master/std/kinds/marker/index.html
[14:30:41] <pczarn> toqueteos: `--emit=obj` should work even though it can't generate proper position dependent binary. The global _GLOBAL_OFFSET_TABLE_ in runtime.asm is a simple workaround
[14:30:57] <pnkfelix> dschatzberg: but this is more general than ~
[14:31:02] *** Joins: motley (motley@672D2CB5.46EA8228.BB273CC6.IP)
[14:31:10] <pnkfelix> dschatzberg: the property you describe also holds for values that have not been allocated via ~
[14:31:25] <pnkfelix> dschatzberg: (and are just owned on the stack)
[14:31:43] <dschatzberg> pnkfelix: sure, I just restricted the problem a bit to see if I could get similar semantics with resources that aren't memory
[14:31:55] <pnkfelix> dschatzberg: anyway, I believe the tools you need are present
[14:32:02] <pnkfelix> dschatzberg: (as kimundi said)
[14:32:03] <dschatzberg> kimundi: thanks, I'm looking through that
[14:32:05] <kimundi> dschatzberg: For example, a struct which contains the NoPod marker type becomes a moving type, and with one of the lifetime variance markes you can make it generic over a lifetime that behaves like the lifetime in a reference
[14:32:44] *** Joins: dagle (dagle@moz-B17C4A95.cust.tele2.se)
[14:33:27] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[14:33:56] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[14:33:57] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:34:37] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[14:34:38] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:34:55] <kimundi> You then define a OwnedHandle and HandleReference<'a> using these markers, and define a .get_ref(&'a self) -> HandleReference<'a> method on OwnedHandle
[14:35:34] <kimundi> it looks and behaves like a reference, but the HandleReference doesn't have to actually store a & pointer
[14:35:40] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[14:35:44] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[14:35:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:35:58] <dschatzberg> kimundi: Yes that sounds like what I'm looking for
[14:38:38] *** Joins: amesee (bzlandfill@moz-8EA0A3C4.nwrknj.fios.verizon.net)
[14:38:53] *** Joins: jaras2 (Janus@1CDC5701.A48867D7.52E4E107.IP)
[14:38:58] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Ping timeout)
[14:39:47] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:40:02] *** Quits: jaras2 (Janus@1CDC5701.A48867D7.52E4E107.IP) (Quit: Leaving)
[14:40:43] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[14:42:20] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[14:47:57] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:48:39] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:49:17] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[14:49:18] *** Quits: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de) (Quit: Leaving)
[14:49:25] <krdln> When we will be able to dereference newtypes again?
[14:49:31] <eddyb> krdln: never
[14:49:47] <eddyb> impl Deref/DerefMut to overload unary *
[14:50:05] <krdln> oh, i heard once that it is temporary till autoderef lands
[14:50:19] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:50:24] <eddyb> (and get automatic dereference, so you can call self.foo() where foo is a method on the type you wrap)
[14:50:34] <eddyb> krdln: autoderef landed. and it uses the same Deref/DerefMut
[14:50:39] <krdln> ah, so for each newtype i have to just impl deref, yes?
[14:50:51] <eddyb> yes. we may add deriving for this, not sure
[14:50:54] <krdln> (i know that it landed, and becouse of that, i ask)
[14:51:11] <krdln> i was willing to ask about deriving :)
[14:51:24] <eddyb> you actually get a form of subtyping wrt fields and methods
[14:51:42] *** Joins: jadbaires (jadrian@9A1DFBE1.4BF4CBDB.6119BA41.IP)
[14:51:43] <eddyb> so you can create single inheritance chains with it (just don't abuse it for that)
[14:51:55] <eddyb> (prototypal I should say)
[14:52:10] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:52:49] <krdln> oh, never thought of that usecase
[14:53:27] <eddyb> kimundi came up with it
[14:56:10] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[14:56:50] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[14:57:37] *** pmoore is now known as pmoore|tea-break
[14:57:37] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[14:58:13] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[14:59:16] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[14:59:16] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[15:00:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:45] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[15:00:57] *** Quits: toqueteos (Mibbit@moz-B9CC0C90.red-88-10-31.dynamicip.rima-tde.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:01:20] *** Joins: dotfelix (dotfelix@84D9BDFC.9853E308.DE15C958.IP)
[15:01:45] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[15:03:11] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[15:04:08] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:04:20] *** Joins: Soarez (Soarez@2CC54C74.962BAB29.F7A44A1B.IP)
[15:04:29] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:04:36] <jdsanders> is uint always the same size as c_ulong?
[15:05:18] <Ms2ger> No
[15:05:26] *** Parts: Soarez (Soarez@2CC54C74.962BAB29.F7A44A1B.IP) ()
[15:05:29] <Ms2ger> uint == uintptr_t
[15:05:39] <jdsanders> gotcha
[15:05:41] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[15:05:43] <jdsanders> thanks
[15:06:19] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:06:29] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[15:07:31] <krdln> eddyb: deref returns borrowed pointer, but * returns lvalue, right?
[15:07:39] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[15:07:49] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[15:07:53] <eddyb> krdln: *x becomes *x.deref()
[15:08:23] *** Joins: skade (skade@moz-BE972F0.web.vodafone.de)
[15:08:44] <jdsanders> Ms2ger: I'm not too familiar with the compiler, any pointers to where the built-in types are defined?
[15:08:57] <Ms2ger> Me neither :)
[15:09:18] <jdsanders> haha ok
[15:09:51] *** Quits: tgkokk (tgkokk@moz-313711E.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:10:20] <eddyb> jdsanders: multiple places
[15:11:01] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[15:11:31] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[15:11:33] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[15:11:57] <mindcat_> rusti: ~["natier","I","like","tail"].tail().connect(" ").to_owner()
[15:11:58] -rusti- pastebinned 11 lines of output: http://sprunge.us/SPeD
[15:12:14] <mindcat_> rusti: ~["natier","I","like","tail"].tail().connect(" ")
[15:12:15] -rusti- I like tail
[15:12:46] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[15:13:15] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[15:13:23] <krdln> isn't it parsed as ~(["natier","I","like","tail"].tail().connect(" "))?
[15:13:32] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[15:13:34] <krdln> rusti: ~(["natier","I","like","tail"].tail().connect(" "))
[15:13:35] -rusti- I like tail
[15:13:47] <krdln> rusti: ["natier","I","like","tail"].tail().connect(" ")
[15:13:47] -rusti- I like tail
[15:14:06] <mindcat_> well, IDE should have some helper can confirm that variable type
[15:14:18] *** Joins: Preyer (orasimus@moz-FA10A1CD.fi)
[15:14:18] *** Joins: tgkokk (tgkokk@moz-313711E.home.otenet.gr)
[15:14:35] <mindcat_> avoid mistake and waste less times
[15:14:39] <Ms2ger> rusti: println!("{}", ~["natier","I","like","tail"].tail().connect(" "))
[15:14:40] -rusti- I like tail
[15:14:40] -rusti- ()
[15:14:46] <Ms2ger> rusti: println!("{}", ~(["natier","I","like","tail"].tail().connect(" ")))
[15:14:47] -rusti- I like tail
[15:14:47] -rusti- ()
[15:14:48] <Ms2ger> Bah
[15:14:53] <krdln> rusti should print {:?}, {} loses too much details
[15:15:05] <Ms2ger> rusti: println!("{:?}", ~["natier","I","like","tail"].tail().connect(" "))
[15:15:05] <Kroisse> {:?} instead
[15:15:05] -rusti- ~~"I like tail"
[15:15:06] -rusti- ()
[15:15:27] <mindcat_> double owner pointer XD
[15:15:38] *** pmoore|tea-break is now known as pmoore
[15:16:01] *** Parts: amesee (bzlandfill@moz-8EA0A3C4.nwrknj.fios.verizon.net) ()
[15:16:02] <krdln> yup :D one from connect and one you provided :)
[15:16:03] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[15:16:22] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[15:16:37] <mindcat_> rusti: println!("{:?}", ["natier","I","like","tail"].tail().connect(" "))
[15:16:38] -rusti- ~"I like tail"
[15:16:39] -rusti- ()
[15:16:48] <jakob> lol
[15:17:04] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[15:17:06] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[15:17:07] *** Parts: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) ()
[15:17:23] <mindcat_> I was think it will convert and lost the I gave owner pointer one
[15:17:33] <jakob> why is rusti here but not in the release
[15:17:41] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Quit: bbl)
[15:17:42] <mindcat_> rusti: println!("{:?}", (~["natier","I","like","tail"]).tail().connect(" "))
[15:17:43] -rusti- ~"I like tail"
[15:17:43] -rusti- ()
[15:17:53] <mindcat_> alright.
[15:18:01] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:18:40] <krdln> mindcat_: that should warn about unnecessary allocation, imo
[15:18:50] <kimundi> jakob: the rusti executable was something different than the rusti irc bot here
[15:19:02] <jakob> Is string not a type?
[15:19:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:19:14] <kimundi> jakob: str is not curently a type
[15:19:23] <jakob> :s
[15:19:24] <kimundi> jakob: In the future, it will be a unsized type most likely
[15:19:31] <jakob> odd
[15:19:38] <kimundi> just very lowlevel
[15:20:03] <jakob> well something that prides itself on having a high level syntax not supporting a native string type is a bit odd
[15:20:28] <kimundi> str == "a unknown-at-compiletime number of bytes that encode valid utf8"
[15:20:36] <kimundi> (unboxed)
[15:20:49] <dotfelix> jakob: string is not native
[15:20:52] <kimundi> jakob: waht do you mean?
[15:21:04] <jakob> kimundi: I dont do low level stuff, Im just speaking out of idiocy 
[15:21:31] <huon> jakob: Rust does support a native string type
[15:21:31] <jakob> Im really terrible at this whole side of programming.
[15:21:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:21:35] <huon> ... 2 in fact
[15:21:39] <dotfelix> string is a list of characters
[15:21:42] <kimundi> jakob: I didn't mean that kind of low level
[15:22:06] <jakob> okay okay, how do I convert an int into a string. and back again. Thats my question
[15:22:13] <huon> http://static.rust-lang.org/doc/master/complement-cheatsheet.html
[15:22:26] <jakob> Danke
[15:22:39] *** Joins: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se)
[15:22:49] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[15:22:51] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[15:23:06] <kimundi> jakob: Converting a int to a string means allocating the memory of the string at runtime, so you want a owned string, `~str`
[15:23:08] <jakob> Why the || in example 2.1
[15:23:26] *** Quits: dotfelix (dotfelix@84D9BDFC.9853E308.DE15C958.IP) (Quit: )
[15:23:36] <kimundi> jakob: || EXPRESSION is our closure literal
[15:23:44] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[15:23:52] <kimundi> rusti: let f = || 5; f()
[15:23:53] -rusti- 5
[15:24:04] <jakob> anon functions?
[15:24:04] <tedh_> would it make sense for rfcs to require a test suite?  seems like it could help concretize the proposals
[15:24:05] <kimundi> rusti: let f = |x| 5 + x; f(10)
[15:24:05] -rusti- 15
[15:24:48] <kimundi> jakob: Basically yes, but we use the exact name stack closure because we also have two other kinds of callable types
[15:24:55] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[15:25:19] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[15:25:23] <dagle> Gtk bindings for rust? ktvoelkers bindings are the best?
[15:25:26] <kimundi> jakob: Namely bare functions (function pointers) with type `fn(..Args) -> T` and only-once-callable procedures, `proc(..Args) -> T`
[15:25:40] <jakob> proc?
[15:25:42] <jakob> Not seen that before
[15:25:47] <kimundi> tedh_: Hard to write tests for something unimplemented I guess
[15:25:59] <kimundi> jakob: Its used for things like spawning a task
[15:26:56] <kimundi> jakob: A proc is another kind of closure than ||, the exact difference lies in the way thy capture variables
[15:27:04] <jakob> rust-lang.org doesn't seem to be resolving properly
[15:27:36] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Ping timeout)
[15:27:44] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[15:27:56] <tedh_> it just seems like some things would be easier to talk about and try different approaches if you could play with actually code (even though it wouldn't really work yet)
[15:27:59] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[15:28:15] <WalrusPony> kimundi: With an owned string, is the string data allocated in the same block as the string structure?
[15:28:21] <tedh_> also like test driven design
[15:29:54] <tedh_> eventually we could have machinery to run the rfc test suite when the rfc moves to the implemented state
[15:30:09] <tedh_> which would keep rfcs from becoming stale or wrong
[15:30:28] <kimundi> WalrusPony: A ~str is currently *{size:uint, capacity:uint, data: ..u8 }, that is everything is stored inline to the heap allocaion
[15:30:29] <doomlord_>     let Resolver { def_map, export_map2, trait_map, last_private,
[15:30:29] <doomlord_>                    external_exports, .. } = resolver; <<< that's destructuring assignment ? but i thought struct members need to be mentioned by name; .. so i guess it defaults to extract field names
[15:31:19] <edwardw> I'm confused. There's no `insert` for HahsMap?
[15:31:32] <kimundi> WalrusPony: But there are changes to the type system planned that will cause strings to be reimplemented in the library, at which point it will be {*u8, size} or {*u8, size, capacity} depending on wether its a growable string or not
[15:31:46] *** Quits: skade (skade@moz-BE972F0.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:31:51] *** Quits: Ferreus (ferreus@moz-4CDBB29.dip0.t-ipconnect.de) (Ping timeout)
[15:31:55] <kimundi> edwardw: Probably need to import the trait that provides it
[15:33:22] <WalrusPony> kimundi: How exactly will growable strings be exposed in the API?
[15:33:27] <edwardw> kimundi: MutEntries that is
[15:33:30] <edwardw> ty
[15:34:11] <WalrusPony> kimundi: Would there be a separate class specifically for growable strings?
[15:34:25] <WalrusPony> or type rather
[15:34:28] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[15:34:47] <Florob> edwardw, kimundi, No, last I checked there legitimately is not such function. I've been using .swap() which is close enough.
[15:35:25] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[15:35:59] <edwardw> Florob: or find_or_insert :)
[15:36:20] <mrmonday> error: the type of this value must be known in this context <= how do I figure out what this is refering to? it gives about 5 lines of code but doesn't specify :S
[15:36:46] <Florob> edwardw, longer name ;)
[15:36:56] <edwardw> Florob: there's insert after all, in trait std::container::MutableMap
[15:37:35] *** Joins: mindcat__ (mindcat@F32E3B11.297EFC2A.57E3C596.IP)
[15:37:56] <edwardw> it uses swap() internally, lol
[15:38:05] *** Quits: mindcat_ (mindcat@45814CCF.B1E12A5D.57E3C596.IP) (Ping timeout)
[15:38:29] *** Quits: mindcat (mindcat@45814CCF.B1E12A5D.57E3C596.IP) (Ping timeout)
[15:38:31] *** Quits: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP) (Ping timeout)
[15:38:38] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[15:39:20] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[15:39:30] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[15:39:54] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:39:57] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[15:41:06] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[15:41:44] <pnkfelix> tedh_: I played with the idea of trying to make a reference model of the language in a tool like PLT Redex
[15:41:57] *** Joins: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP)
[15:42:03] <pnkfelix> tedh_: and then trying to encourage RFC authors to illustrate their idea by extending the model accordingly
[15:42:07] *** Quits: mye (mye@moz-5578CD59.superkabel.de) (Quit: mye)
[15:42:08] <pnkfelix> tedh_: but its a lot of work
[15:42:25] <pnkfelix> tedh_: of somewhat-questionable value
[15:42:32] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[15:42:32] *** Quits: tgkokk (tgkokk@moz-313711E.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:42:47] <pnkfelix> tedh_: since I don't expect many people to be able to stomach *reading* a Redex model, let alone hack on one.
[15:43:03] <tedh_> thats probably more than i was thinking of
[15:43:10] *** Joins: Rym (y@E67DB8CF.AC909212.51C6DE68.IP)
[15:43:26] *** Joins: icebattle (wayne@8A14A542.EBE2EE2B.C7CEC4ED.IP)
[15:43:37] *** Quits: valentin (Thunderbir@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:43:37] *** Joins: tgkokk (tgkokk@moz-313711E.home.otenet.gr)
[15:43:40] *** Joins: bourbaki (chatzilla@moz-45916A55.dip0.t-ipconnect.de)
[15:43:46] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[15:43:48] <bourbaki> Hohoho
[15:44:46] <tedh_> maybe example suite would be a better description
[15:44:56] <kimundi> WalrusPony: Growable strings would be a seperate type, yeah
[15:45:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:45:24] <kimundi> WalrusPony: like Vec<T> today which is already replacing growable vectors
[15:45:30] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[15:46:58] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:47:22] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[15:47:30] <tedh_> maybe i just wish the rfcs that i have seen so far had more and more complete code samples
[15:47:41] <jakob> Can you compile rust without a stdlib?
[15:48:04] <kimundi> jakob: You can write Rust code that does not use or link to the std lib
[15:48:09] <jakob> o.O
[15:48:21] <kimundi> jakob: People are writing OS kernels in Rust already ;)
[15:48:23] <krdln> jakob: #[no_std]; at the begining
[15:48:25] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:48:56] *** Quits: tgkokk (tgkokk@moz-313711E.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:49:29] <kimundi> It means you have to define a lot of functionality manually of course
[15:49:52] *** Quits: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP) (Client exited)
[15:50:12] *** Joins: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP)
[15:50:38] *** Joins: jviereck (Adium@moz-403F3970.ethz.ch)
[15:50:53] <jakob> kimundi: im no where near that good :(
[15:51:15] <kimundi> Eh, apparnetly its not that hard
[15:51:38] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[15:51:56] <jakob> :| says you
[15:52:25] <kimundi> jakob: http://jvns.ca/blog/2014/03/12/the-rust-os-story/
[15:52:38] <bourbaki> oO
[15:52:41] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Ping timeout)
[15:52:42] <bourbaki> Rust OS?
[15:52:54] <kimundi> bourbaki: toy kernels
[15:52:58] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:53:02] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[15:53:06] <j3rky> kimundi: can i write libraries with no_std that are then usable by libraries depending on stdlib?
[15:53:13] <kimundi> No one has written something big yet
[15:53:28] <kimundi> j3rky: That should work, yes.
[15:53:32] <bourbaki> Ah that is why some ppl here were talking about vga the other day :)
[15:53:40] <bourbaki> I felt like in the 80's again
[15:53:42] <kimundi> bourbaki: hehe, yeah
[15:54:12] *** Joins: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP)
[15:54:20] <j3rky> kimundi: i guess if i dont have any dependencies to std, then nothing would be compiled in anyway, or is there any inherent cost when no_std is ommitted?
[15:54:30] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[15:54:31] <jakob> how do you rewrite stuff that is std
[15:54:34] *** Quits: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP) (Quit: Leaving.)
[15:54:35] <kimundi> j3rky: No cost
[15:54:49] <kimundi> jakob: Look at the std source, copy paste and modify ;)
[15:55:20] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:55:32] <kimundi> we are trying to make parts of the std lib usable for kernels in general, but we're not there yet
[15:55:37] <jakob> hm
[15:55:39] <jakob> ok
[15:55:43] <jakob> Still not good enough
[15:55:59] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:56:00] <kimundi> "good enough"?
[15:56:15] <jakob> yea im not good enough to do toy kernels
[15:56:36] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[15:56:40] *** Joins: thewonderidiot (mstewart@FAFE6CB6.8FBF3E66.60E22FEA.IP)
[15:59:00] <bourbaki> How can i get rid of this lifetime error ? https://gist.github.com/b0urb4k1/9526793
[15:59:19] <bourbaki> I have no idea where i should place the (whats the thingy 'a called?)
[15:59:35] <bourbaki> Lifetime specifier?
[16:00:00] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Ping timeout)
[16:00:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:00:55] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[16:01:03] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[16:02:08] <Yurume> bourbaki, 'a = a lifetime parameter (as T in <T> is called a type parameter).
[16:02:23] <bourbaki> Ah ok thanks.
[16:02:47] <Yurume> Directory(~str, ~[CT]) is missing a lifetime/type parameter for CT
[16:03:02] <Yurume> do what the compiler says :)
[16:03:57] <bourbaki> I updated the gist
[16:04:09] <bourbaki> Yes but when i add it i get errors also
[16:04:22] <bourbaki> ~'a seems to be a synonym that has been removed
[16:04:31] <bourbaki> ~['a CT] doesnt work either.
[16:04:32] <Yurume> uh, ~ cannot have a lifetime
[16:04:48] <bourbaki> Well then why does the compiler ask for one :)?
[16:05:01] <pnkfelix> bourbaki: wait, why aren't you providing the type argument to CT ?
[16:05:01] <Yurume> bourbaki, I meant `Directory(~str, ~[CT<'a,T>])`
[16:05:05] *** Quits: mno2 (mno2@moz-3506EAC7.singnet.com.sg) (Quit: mno2)
[16:05:08] <bourbaki> AH!
[16:05:16] <bourbaki> pnkfelix: Thats the error...
[16:05:26] <bourbaki> Man i feel so dumb ...
[16:05:40] <Yurume> look at the error message again, it exactly says which line is problematic
[16:06:08] <bourbaki> I was confused cause the ^ pointed at the start
[16:06:34] <bourbaki> But type arguments should have been the thingy i should have read properly :)
[16:06:57] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[16:07:02] <Yurume> rustc, while not being generous, is kind enough to try to give the best error message (not always but in many cases) :)
[16:07:24] <bourbaki> Yeah its pretty good.
[16:07:44] <bourbaki> I just should read them better and i need to get used to them.
[16:07:45] <Yurume> if you think the error message is not helpful or cryptic, then it *is* a bug (though might not be of the highest priority)
[16:08:08] *** kimundi is now known as zz_kimundi
[16:08:12] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[16:08:16] *** Joins: onelson (owen@moz-DD666EC5.laika.com)
[16:08:26] <Yurume> I guess the error message also had something like this: ^~~~~~~ ?
[16:08:33] <bourbaki> I just wonder how you would highlight the error?
[16:08:40] <Yurume> (which gives the exact portion in the line)
[16:08:41] <bourbaki> Yes it had
[16:08:48] <bourbaki> SEc
[16:08:55] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[16:09:06] <bourbaki> The website is quite solow
[16:09:09] <bourbaki> slow
[16:09:18] *** Joins: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP)
[16:09:29] <bourbaki> Updated
[16:09:43] *** zz_kimundi is now known as kimundi
[16:09:47] <Yurume> static.rust-lang.org/doc is slow because it loads the biggy (uncompressed!) search index whenever it got updated
[16:10:06] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[16:10:06] <bourbaki> Nah i mean http://www.compileonline.com :)
[16:10:06] <Yurume> bourbaki, again, it says you are missing type parameters.
[16:10:11] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:10:12] <Yurume> ah
[16:10:26] <bourbaki> Yes, i just updated the error message because you asked if there were some squgglies
[16:10:34] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[16:10:46] <bourbaki> I assume they are showing from where to where the error occurs?
[16:10:52] <Yurume> right
[16:10:58] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[16:11:05] <Yurume> better than giving just the line number out
[16:11:18] <bourbaki> Totally
[16:12:44] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[16:14:15] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[16:14:34] <bourbaki> Oh ... enum values are scoped to the parent?
[16:15:29] <sfackler> yep
[16:15:49] *** kimundi is now known as zz_kimundi
[16:15:51] <sfackler> C/C++ (before enum class) style rathern than Java style
[16:16:25] <bourbaki> Is there any reason why this is the case?
[16:16:52] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Ping timeout)
[16:17:31] *** zz_kimundi is now known as kimundi
[16:19:32] *** kimundi is now known as zz_kimundi
[16:20:10] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:20:10] *** ChanServ sets mode: +ao dherman dherman
[16:20:18] *** Joins: dotfelix (dotfelix@84D9BDFC.9853E308.DE15C958.IP)
[16:20:26] *** Quits: marianoguerra (marianogue@moz-E338D65C.dip0.t-ipconnect.de) (Ping timeout)
[16:20:48] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[16:21:00] *** Quits: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net) (Ping timeout)
[16:21:09] <ebalint> hi! I would like to cross compile a helloWorld with rustc to armhf. Last time I used rustc hello.rs --target=arm-unknown-linux-gnueabihf --linker=arm-linux-gnueabihf-gcc, but now the recent build doesn't recognize --linker option. But without this option I got the following error:  linking with `cc` failed: exit code: 1. It is trying to link with the x86_64 ld. How can i force it to use the arm-linux-gnueabihf-gcc linker? Thank you!
[16:21:14] *** zz_kimundi is now known as kimundi
[16:21:20] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[16:22:10] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[16:22:47] *** Joins: twi (Adium@752B0356.FC95818.5EFB9497.IP)
[16:22:58] *** Quits: twi (Adium@752B0356.FC95818.5EFB9497.IP) (Max SendQ exceeded)
[16:23:05] *** Joins: twi (Adium@752B0356.FC95818.5EFB9497.IP)
[16:23:09] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Ping timeout)
[16:23:15] <kimundi> yay, partial typehint landed
[16:23:20] <kimundi> type hints*
[16:23:59] <pnkfelix> ebalint: look at the options in `rustc -C help`
[16:24:00] <bourbaki> kimundi: Whats it good for?
[16:24:12] <bourbaki> kimundi: The stuff you discussed earlier with ed ?
[16:24:19] <pnkfelix> ebalint: in particular I think you want `rustc -C linker=val`
[16:24:40] <kimundi> bourbaki: let x: Vec<_> = foo(); // tell the compiler it should be a Vec<T>, but infer the T
[16:24:45] *** Joins: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be)
[16:24:49] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[16:25:02] <bourbaki> Ah
[16:25:03] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[16:25:07] <kimundi> let x: _ = foo(); would be equivalent to let x = foo();
[16:25:08] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[16:25:11] *** Joins: sellout (Adium@D76D9638.B3FAD41.E7673F62.IP)
[16:25:15] <bourbaki> Aye, that is pretty nice.
[16:25:42] <pnkfelix> bourbaki: you asked about enum varaint scoping. You can see discussion here: https://github.com/mozilla/rust/issues/10090 
[16:26:02] *** Joins: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net)
[16:26:15] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[16:26:34] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[16:27:14] <bourbaki> pub enum mod Sigil { << this is current syntax?
[16:27:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[16:27:33] <pnkfelix> bourbaki: no
[16:27:39] <whitequark> I don't think it ever got merged
[16:27:41] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[16:27:44] <pnkfelix> bourbaki: it was proposed hypothetical future syntax
[16:27:48] <bourbaki> Ah i see
[16:28:00] <bourbaki> Well it is a bit like enum classes in C++
[16:28:25] <bourbaki> Imho the argument that other languages do it this way is a bit shallow :)
[16:28:54] *** Joins: valentin (Thunderbir@9694AAA.E2EA453A.FAF22AF7.IP)
[16:29:05] <bourbaki> Is there any disadvantage to just wrap it in a mod?
[16:29:18] <bourbaki> Cause that is what i inteded to do.
[16:29:22] <bourbaki> +n
[16:29:26] <pnkfelix> Imho the argument that the macro-based solution is bad because of weaknesses in rustdoc weak
[16:29:54] <pnkfelix> sed -e s/in rustdoc weak/in rustdoc is a weak argument/`
[16:30:08] <bourbaki> I think that using mod is not too bad.
[16:30:14] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[16:30:26] <bourbaki> Because it would give you a proper place to add from and to enum / string functions.
[16:30:31] <bourbaki> And realated stuff.
[16:30:36] *** Quits: valentin (Thunderbir@9694AAA.E2EA453A.FAF22AF7.IP) (Ping timeout)
[16:30:38] <bourbaki> ... meh related
[16:30:40] *** Joins: valentin (Thunderbir@9694AAA.E2EA453A.FAF22AF7.IP)
[16:30:40] <pnkfelix> bourbaki: I see no problme with wrapping it in a mod.  If you read the issue I linked, it shows how to do that.  And it would be easy to make a macro that captures the pattern
[16:31:01] <bourbaki> Aye
[16:31:03] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:31:15] <bourbaki> I read the link just wanted to know if there is any problem with that.
[16:31:24] <bourbaki> As in it is not very Rusty.
[16:31:34] <bourbaki> Having a lot of mods that is and all.
[16:32:04] <ebalint> pnkfelix: Thank you, I will try it.
[16:32:05] <pnkfelix> bourbaki: I think the main problem with making a separate module is that it might cause the generated documentation to be more fragmented than you desired
[16:32:06] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[16:32:19] <pnkfelix> bourbaki: but as I implied above, I see this as reflecting a weakness in rustdoc, not in the Rust language.
[16:32:48] <bourbaki> Ah, now i get it sorry.
[16:32:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:32:58] <pnkfelix> bourbaki: no need to apologize
[16:33:54] *** Quits: twi (Adium@752B0356.FC95818.5EFB9497.IP) (Quit: Leaving.)
[16:33:55] <bourbaki> When i add namespaces for enums i get frowned upon at work :)
[16:34:02] <bourbaki> in C++ that is
[16:34:02] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[16:34:11] *** Joins: echristo (echristo@3246441A.D6CCE4AE.77834EAA.IP)
[16:34:49] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[16:37:13] *** Joins: skade (skade@moz-A04BC22E.adsl.inetia.pl)
[16:38:13] *** Quits: fabiand (fabiand@moz-545B3120.adsl.alicedsl.de) (Quit: Verlassend)
[16:38:18] *** pmoore is now known as pmoore|mtg
[16:38:22] <sfackler> pnkfelix: niko's comment here is still an issue for the macro approach: https://github.com/mozilla/rust/issues/10090#issuecomment-29797533
[16:38:36] <nstdloop> Where do I get the test crate for benchmarking?
[16:38:45] <nstdloop> extern mod test doesn't work :(
[16:38:47] <sfackler> extern crate test;
[16:38:47] <pnkfelix> sfackler: eh, pass another name into the macro
[16:39:05] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Client exited)
[16:39:07] <pnkfelix> sfackler: (okay, I admit, its hacky)
[16:39:10] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[16:39:10] <nstdloop> sfackler: That gives me a syntax error
[16:39:23] <nstdloop> Says it should be "mod"
[16:39:28] <nstdloop> I'm running 0.9 if that matters
[16:39:47] <pnkfelix> was the test crate factored out back in 0.9 ?
[16:39:48] <sfackler> oh, it's in either std::test or extra::test I think
[16:40:02] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:40:07] <pnkfelix> nstdloop: yeah extra::test I'm pretty sure. So do `extern crate extra;`
[16:40:12] <pnkfelix> or whoops, `extern mod extra;`
[16:40:18] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[16:40:32] <sp3d> wow, "as *_ as *()" is going to be way nicer to type than what I was doing before :D
[16:41:09] <nstdloop> pnkfelix: Thanks!
[16:41:17] <nstdloop> Does #[cfg(bench)] not work?
[16:41:50] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[16:42:14] <sfackler> benchmarks are always compiled into tests
[16:42:21] <sfackler> you'll want to use #[cfg(test)] instead
[16:42:59] <kimundi> sp3d: Heh, question is will that infer properly?
[16:43:07] <nstdloop> sfackler: Thanks.
[16:43:33] <nstdloop> It seems to me that benchmarking is pretty "off". It tells me something takes 40k ns per iter +- 20k ns
[16:43:41] <nstdloop> Which is a 50% margin of error
[16:43:54] <nstdloop> Or 400k +- 200k
[16:44:26] *** Quits: dotfelix (dotfelix@84D9BDFC.9853E308.DE15C958.IP) (Quit: )
[16:44:56] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[16:46:44] <ebalint> pnkfelix: I got the following error: std.rs:(.text+0xa9adc): undefined reference to `_Unwind_GetIP' and std.rs:(.text+0xa9ae0): undefined reference to `_Unwind_FindEnclosingFunction'
[16:46:59] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[16:47:06] *** Joins: nkoep (nik@moz-84FBC066.pool.mediaways.net)
[16:47:17] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[16:47:20] *** Quits: valentin (Thunderbir@9694AAA.E2EA453A.FAF22AF7.IP) (Ping timeout)
[16:48:26] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[16:49:10] *** Joins: dotfelix (dotfelix@84D9BDFC.9853E308.DE15C958.IP)
[16:49:12] *** Quits: nkoep (nik@moz-84FBC066.pool.mediaways.net) (Ping timeout)
[16:49:18] *** Joins: nkoep (nik@moz-DF807B9A.pool.mediaways.net)
[16:49:56] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[16:50:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[16:50:56] <acrichto> ebalint: interesting! those symbols are normally found in libgcc, and there's currently some special logic for android, but it sounds like there should be some special logic for linux+arm
[16:52:51] <ebalint> acrichto: The cross compiling works with the rust that's in servo. Was there any workaround?
[16:53:49] <acrichto> ebalint: that code was added recently, so servo likely is using an older rust without backtraces
[16:54:07] *** Quits: Kxepal832 (Miranda@moz-7AD032F4.pppoe.mtu-net.ru) (Ping timeout)
[16:54:34] <ebalint> acrichto: thank you for your answer!
[16:55:06] <ebalint> acrichto: do you know when there will be a fix for this?
[16:55:18] *** Joins: tgkokk (tgkokk@moz-313711E.home.otenet.gr)
[16:55:25] *** Quits: tgkokk (tgkokk@moz-313711E.home.otenet.gr) (Input/output error)
[16:55:25] <acrichto> ebalint: I'll put one together now
[16:55:41] <acrichto> ebalint: where did you get your arm toolchain from?
[16:55:46] *** Joins: tgkokk (tgkokk@moz-313711E.home.otenet.gr)
[16:56:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:56:02] *** Quits: dotfelix (dotfelix@84D9BDFC.9853E308.DE15C958.IP) (Quit: )
[16:56:55] <ebalint> acrichto: I have ubuntu 12.04 and i downloaded it with sudo apt-get install. The version is: arm-linux-gnueabihf-gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
[16:58:45] *** Joins: Kxepal (Miranda@moz-6EBC5369.pppoe.mtu-net.ru)
[16:59:07] <acrichto> ebalint: did you have to add something to sources.list, I can't seem to find that package
[16:59:33] <acrichto> oh nvmd
[16:59:34] <acrichto> found it
[16:59:49] *** Quits: sellout (Adium@D76D9638.B3FAD41.E7673F62.IP) (Ping timeout)
[17:00:14] *** Quits: jviereck (Adium@moz-403F3970.ethz.ch) (Quit: Leaving.)
[17:00:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:01:29] *** Joins: sellout (Adium@D76D9638.B3FAD41.E7673F62.IP)
[17:02:29] <nstdloop> rusti: 1e10 as u64
[17:02:29] -rusti- 10000000000
[17:02:33] <nstdloop> rusti: 1e20 as u64
[17:02:34] -rusti- 18446744073709551615
[17:02:41] <nstdloop> rusti: 1e15 as u64
[17:02:41] -rusti- 1000000000000000
[17:02:56] <bourbaki> There is no Either type yet?
[17:03:26] <nstdloop> bourbaki: Result. It's Either by a different name.
[17:04:06] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:04:09] <bourbaki> Hm ... well i guess ill roll my own then, Result would not expose what i want to build.
[17:04:29] <nstdloop> bourbaki: What do you have in mind?
[17:04:34] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Ping timeout)
[17:04:46] <bourbaki> I want to write a small directory structure.
[17:04:51] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[17:05:00] <bourbaki> But i just wanted to write a function that adds an element.
[17:05:15] <bourbaki> And i saw that i have no way to make sure you pass a directory as the first parameter.
[17:05:17] *** pmoore|mtg is now known as pmoore
[17:05:23] <bourbaki> Im using Enums for this.
[17:05:33] *** Joins: Kruppe (user@moz-7B566345.dynamic.uwaterloo.ca)
[17:05:38] <nstdloop> Right. So you want the ability to return an Error?
[17:05:52] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[17:05:59] <bourbaki> No sec
[17:06:06] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[17:06:10] <bourbaki> https://gist.github.com/b0urb4k1/9526793
[17:06:44] <bourbaki> I wanted to use phantom types to be able to discern if its a directory or an entry.
[17:07:00] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:07:02] <nstdloop> Ahh. Clever.
[17:07:12] <bourbaki> But then the recursive structure would only be able to accumulate directories in the list.
[17:07:25] <bourbaki> So i thought if i use either it can be either an entry or a directory.
[17:07:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[17:08:06] <bourbaki> Rust gives you so much choices on how to do things :)
[17:08:14] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Max SendQ exceeded)
[17:08:15] <nstdloop> So you want to actually use Either as an either this or that instead of as a either an error or a value.
[17:08:18] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[17:08:25] <bourbaki> Yep
[17:08:37] <bourbaki> It is either a dirctory or entry from line 2 and 4
[17:08:39] <bourbaki> er 3
[17:09:05] <bourbaki> Well ... i think it wont work either ... not sure yet.
[17:09:29] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[17:09:34] <bourbaki> I think this is something that will not work without dependent types.
[17:09:50] <nstdloop> I'm always on the watch to see what Rust's type system can and can't do yet
[17:09:51] <bourbaki> If i put in an either type the type wont change anyway.
[17:09:52] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[17:10:44] <nstdloop> Mm... Ya you'd have to be able to specify the constructor in the type signature
[17:11:33] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:11:40] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[17:12:11] *** Joins: bourbaki_ (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de)
[17:12:25] *** Quits: bourbaki (chatzilla@moz-45916A55.dip0.t-ipconnect.de) (Ping timeout)
[17:12:38] *** bourbaki_ is now known as bourbaki
[17:12:48] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[17:12:51] <nstdloop> I can't tell if rust is bad at codegen or if llvm is really really good at optimizations. My --opt-level=3 code runs orders of magnitude faster in some cases.
[17:13:08] *** Joins: hoverbear (hoverbear@726D908C.44E18222.E74D50F2.IP)
[17:13:15] <whitequark> LLVM can be quite amazing
[17:13:25] <nstdloop> rusti: 10e16 as u64
[17:13:25] -rusti- 100000000000000000
[17:13:35] *** Joins: Savago (Savago@4C8C0E71.E820043D.D4C04133.IP)
[17:13:35] <nstdloop> whitequark: Apparently.
[17:13:57] <Ms2ger> 10e16u64?
[17:14:21] <nstdloop> Ms2ger: I was just making sure to myself that 10e16 = 1e17 and I wasn't going crazy.
[17:14:23] *** Joins: Ferreus (ferreus@moz-3AF3AEF1.lsn.wtnet.de)
[17:14:23] *** Quits: Ferreus (ferreus@moz-3AF3AEF1.lsn.wtnet.de) (Quit: Ferreus)
[17:14:27] *** Joins: Ferreus (ferreus@moz-3AF3AEF1.lsn.wtnet.de)
[17:14:40] <o11c> nstdloop: you're going crazy
[17:14:54] <o11c> so (true and false) becomes false
[17:14:58] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:15:13] <nstdloop> rusti: 1e17 == 1e16
[17:15:14] -rusti- false
[17:15:24] <nstdloop> rusti: 1e17u64 == 1e16u64
[17:15:24] -rusti- <anon>:11:13: 11:16 error: expected one of `;`, `}` but found `u64`
[17:15:24] -rusti- <anon>:11         1e17u64 == 1e16u64
[17:15:24] -rusti-                       ^~~
[17:15:25] -rusti- application terminated with error code 101
[17:15:34] <nstdloop> rusti: 1e17 as u64 == 10e16 as u64
[17:15:35] -rusti- true
[17:17:23] *** jdm is now known as jdm|meeting
[17:17:27] *** Quits: tgkokk (tgkokk@moz-313711E.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:21:18] *** Joins: wilfred (uid159@moz-5F4AA75A.irccloud.com)
[17:21:33] <mindcat__> Rusky: 
[17:21:37] <mindcat__> rusti:
[17:21:53] <mindcat__> rusti: 1e16uint
[17:21:54] -rusti- <anon>:11:13: 11:17 error: expected one of `;`, `}` but found `uint`
[17:21:54] -rusti- <anon>:11         1e16uint
[17:21:54] -rusti-                       ^~~~
[17:21:54] -rusti- application terminated with error code 101
[17:22:00] <mindcat__> rusti: 1e16u
[17:22:00] -rusti- <anon>:11:13: 11:14 error: expected one of `;`, `}` but found `u`
[17:22:00] -rusti- <anon>:11         1e16u
[17:22:00] -rusti-                       ^
[17:22:00] -rusti- application terminated with error code 101
[17:22:04] <mindcat__> rusti: 1e16
[17:22:05] -rusti- 10000000000000000
[17:22:40] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[17:22:52] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[17:22:54] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[17:23:02] <mindcat__> 0x8000
[17:23:04] <bascule>  13_4__8__ 9_11__12_  13_4__ 8_9__11_    13_ 4_8_   11__12_ 13_ 4_ 
[17:23:07] <bascule> 4|  8_9__11|  12_ 13\4|_ 8_9|  11_ 12\  4/ 8\\ 9\ 11/ 12/ 13| 4| 8|
[17:23:10] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[17:23:10] <bascule> 8| 9|_  12| 13|_4) 8|| 9|11| 12| 13| 4|/ 8_ 9\11\ 12V 13/| 4| 8| 9|
[17:23:13] <bascule> 9|  11_12| 13|  4_ 8< 9| 11|12| 13|_4| 8/ 9__11_ 12\| 13| 4|8_|9_|11_|
[17:23:16] <bascule> 11|_12|   4|_8| 9\_11\_12__13|_4__8_/9_/   12\13_\4_| 8(9_|11_|12_)
[17:23:19] <bascule>                                         
[17:23:25] <mindcat__> lol
[17:23:45] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:23:45] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Ping timeout)
[17:24:14] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[17:24:29] <YourBestFriend> that guy
[17:24:32] <YourBestFriend> likes fridays
[17:25:07] <kimundi> rusti: let t="We meet again, bascule";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.len())))}if true{return}
[17:25:08] -rusti- 50<51W52e53 54m55e56e57t58 59a60g61a62i63n50,51 52b53a54s55c56u57l58e59>60 61 62 63^50_51_52^
[17:25:09] -rusti- 53 54                      55 56\57 58 59(60o61o62)63\50_51_52_53_54_55_56_
[17:25:09] -rusti- 57 58                      59 60 61 62 63(50_51_52)53\54 55 56 57 58 59 60 61)62\63/50\
[17:25:09] -rusti- 51 52                      53 54 55 56 57 58 59 60 61|62|63-50-51-52-53w54 55|
[17:25:11] -rusti- 56 57                      58 59 60 61 62 63 50 51 52|53|54 55 56 57 58 59|60|
[17:26:18] <Earnestly> kimundi: I'd give you a pie today, if I could
[17:26:25] <phil> whats going on in here
[17:26:37] <phil> my irc client is puking rainbows
[17:26:52] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[17:27:05] <kimundi> Earnestly: Darn it, why didn't we invent teleporters yet
[17:27:24] <kimundi> I could really go for some pie right now
[17:27:39] <bourbaki> Is rusti a cow?
[17:27:41] <Earnestly> Well, we sort of have, but you cannot subsist on just photons :(
[17:27:47] <Earnestly> kimundi: What is today?
[17:27:56] <Earnestly> It's a special day
[17:27:59] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:28:02] *** Joins: flan3002 (flan3002@moz-4090ED07.dip0.t-ipconnect.de)
[17:28:06] <Earnestly> Match 14th
[17:28:43] <bourbaki> Towel day?
[17:28:46] <Earnestly> March even*… match… damnit Rust
[17:28:51] <kimundi> rusti: let t="Happy π day!";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.len())))}if true{return}
[17:28:52] -rusti- 50<51H52a53p54p55y56 57π58 59d60a61y62!63>50 51 52 53^54_55_56^
[17:28:52] -rusti- 57 58             59 60\61 62 63(50o51o52)53\54_55_56_57_58_59_60_
[17:28:52] -rusti- 61 62             63 50 51 52 53(54_55_56)57\58 59 60 61 62 63 50 51)52\53/54\
[17:28:52] -rusti- 55 56             57 58 59 60 61 62 63 50 51|52|53-54-55-56-57w58 59|
[17:28:55] -rusti- 60 61             62 63 50 51 52 53 54 55 56|57|58 59 60 61 62 63|50|
[17:28:57] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:28:58] <kimundi> whoops
[17:29:03] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[17:29:12] <kimundi> And that is the reason why properunicode support is important
[17:29:20] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:29:24] <bourbaki> :)
[17:29:44] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[17:29:45] <Earnestly> Your misuse of unicode gave the cow a labotomy
[17:30:32] <bourbaki> hehe
[17:30:36] *** Joins: gregburd (uid3997@moz-E77DEB21.irccloud.com)
[17:30:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:31:34] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[17:31:47] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[17:31:47] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:32:48] <gregburd> "unresolved import 'PersistentMap'" in https://github.com/michaelwoerister/rs-persistent-datastructures hamt.rs implementation... any help?  I'm guessing that was renamed something (or removed?)
[17:33:04] <kimundi> bascule: You missed your perfect chance to spam a giant ASCII art "PIDAY"
[17:33:51] <kimundi> gregburd: likely lives in libcollections now
[17:34:21] <o11c> rusti: let t="Happy π day!";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.char_len())))}if true{return}
[17:34:21] -rusti- 50<51H52a53p54p55y56 57π58 59d60a61y62!63>50 51 52 53^54_55_56^
[17:34:22] -rusti- 57 58            59 60\61 62 63(50o51o52)53\54_55_56_57_58_59_60_
[17:34:22] -rusti- 61 62            63 50 51 52 53(54_55_56)57\58 59 60 61 62 63 50 51)52\53/54\
[17:34:22] -rusti- 55 56            57 58 59 60 61 62 63 50 51|52|53-54-55-56-57w58 59|
[17:34:24] -rusti- 60 61            62 63 50 51 52 53 54 55 56|57|58 59 60 61 62 63|50|
[17:34:28] <bascule> kimundi: :O
[17:34:29] <o11c> kimundi: ftfy
[17:34:41] <gregburd> btw, I'm new to rust (and trying hard to come up to speed as it's very interesting) so where would I find libcollections?
[17:35:01] <kimundi> o11c: ;D
[17:35:07] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[17:35:09] <pnkfelix> what are you kids up to in here
[17:35:25] <bascule>  13_4__8_ 9__11_ 12__13__    9_ 11__   13_4__ 8_ 9_ 
[17:35:25] <bascule> 4|  8_ 9\11_ 12_|  4_ 8\  9/ 11\12\ 13\ 4/ 8/ 9| 11| 12|
[17:35:28] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[17:35:28] <bascule> 8| 9|_11) 12| 13|| 4| 8| 9|11/ 12_ 13\\ 4V 8/9| 11| 12| 13|
[17:35:31] <bascule> 9|  11_12_/13| 4|| 8|9_| 11/ 12_13__ 4\8| 9| 11|_12|_13|_4|
[17:35:34] <o11c> combo breaker!
[17:35:34] <bascule> 11|_12|  13|4__8_|9__11__12/_13/   8\_9\_11| 12(_13|_4|_8)
[17:35:37] <bascule>                                  
[17:35:46] <bourbaki> How does Rust resolve namespaces?
[17:35:51] <kimundi> bascule: You tried :P
[17:36:08] <o11c> bourbaki: think of how every other language does it, then think the opposite
[17:36:14] <bourbaki> Heh
[17:36:33] <darnuria> Nice :d
[17:36:35] <Preyer> let x = from_str::<int>("123"); <- what is wrong?
[17:36:36] <gregburd> found https://github.com/mozilla/rust/tree/master/src/libcollections but no mention of PersistentMap AFAIcan-tell
[17:36:40] <kimundi> bourbaki: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[17:36:49] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Quit: Leaving)
[17:37:07] <kimundi> rusti: let x = from_str::<int>("123"); x
[17:37:08] -rusti- Some(123)
[17:37:09] <pnkfelix> phil: and I don't even get to see rainbows: https://gist.github.com/pnkfelix/9552766
[17:37:16] <kimundi> Preyer: Nothing as far as I can see
[17:37:16] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[17:37:41] <kimundi> pnkfelix: That is a sad chat log :(
[17:37:58] <bourbaki> Just to clarify when i use xxx:: it is always relative to my current position and if i want to use something from like std i need to use ::std if i am already nested in a namspace?
[17:38:07] <Preyer> mm okay thanks, I'll look elsewhere
[17:38:16] <bstrie> bascule: tell me that you've been planning for this day for months
[17:38:21] <acrichto> ebalint: https://github.com/mozilla/rust/pull/12893
[17:38:26] <phil> pnkfelix: haha damn
[17:38:34] <bascule> bstrie: unfortunately not, kimundi pointed it out
[17:39:20] <Armavica> hello there, I'm currently try to solve in Rust a set of small problems known as 
[17:39:37] <Armavica> oups, enter was too early
[17:39:56] *** Quits: StarLight (StarLight@moz-44AB33E3.dynamic.avangarddsl.ru) (Ping timeout)
[17:40:02] <kimundi> bourbaki: xxx:: in anything else than "use" is relative to what is locally visible, which is determined by "use" imports and local definitions. ::xxx:: is relative to the crate root, in which "std" is a implicit top level "extern crate std" declaration
[17:40:07] <gregburd> hmmm... still can't find PersistentMap after looking within all of the rust source code...
[17:40:14] <ebalint> acrichto: thank you, I'll try it!
[17:40:16] <pnkfelix> gregburd: where did you see a reference to a PersistentMap ?
[17:40:21] <bourbaki> Ok thanks
[17:40:29] <Armavica> so, known as the 99 * Problems, here's my attempt https://github.com/Armavica/99-Problems-Rust
[17:40:36] <pnkfelix> gregburd: oh I see in that repo up there
[17:40:41] <gregburd> trying to fix this https://github.com/michaelwoerister/rs-persistent-datastructures/blob/master/hamt.rs#L36
[17:40:45] <Armavica> i'd be very glad to hear your comments if you have any
[17:41:11] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[17:41:47] <pnkfelix> gregburd: it is in the same repo
[17:41:56] <bstrie> Armavica: if those problems are intended for functional languages like lisp, then I think their rust solutions might not be as elegant as you hope :)
[17:41:58] <pnkfelix> gregburd: look here: https://github.com/michaelwoerister/rs-persistent-datastructures/blob/master/lib.rs#L48
[17:42:06] <bascule> gregburd: ohai, you're one of the Erjang people right? ;)
[17:42:17] <gregburd> yep
[17:42:25] <bascule> nice
[17:42:38] <gregburd> and I have to facepalm for that last mistake... grep is your friend
[17:43:28] *** Joins: mgottschlag (quassel@moz-D9018E99.cust.bluewin.ch)
[17:43:38] *** Quits: Rym (y@E67DB8CF.AC909212.51C6DE68.IP) (Ping timeout)
[17:43:59] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Quit: leaving)
[17:44:10] *** Joins: StarLight (StarLight@moz-A3237B0B.pppoe.avangarddsl.ru)
[17:44:31] *** Joins: leowoe (Leo@moz-9517672.dip0.t-ipconnect.de)
[17:44:38] <nstdloop> bstrie: Rust has plenty of nice functional features.
[17:45:06] <darnuria> bstrie: No we can reuse "problem" for making them in rust.
[17:45:23] <darnuria> bascule: like "get the last argument of a vector"
[17:45:39] <darnuria> sorry bascule -> bstrie 
[17:45:55] <darnuria> It's général to programming not only functionnal.
[17:47:00] <bstrie> making a big deal out of getting the last argument to a vector is very, very functional :P
[17:47:00] *** jdm|meeting is now known as jdm
[17:47:17] <bascule> lololol
[17:48:22] <bstrie> Armavica: these problems look like you have a firm grasp of rust. have you written something in rust before?
[17:49:24] <Armavica> bstrie: well, thank you :) but no, this is my first introduction to the langage
[17:49:40] * bascule wishes there were a programming problems site for Rust
[17:49:46] <bascule> those are so helpful for learning new languages
[17:49:58] <bascule> and by that I mean one that lets you enter code into your browser and tracks your progress
[17:50:08] <bascule> like 4clojure
[17:50:18] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[17:50:35] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[17:50:55] <gregburd> another question, "expected '{' or 'mod'" resulting from https://github.com/michaelwoerister/rs-persistent-datastructures/blob/master/lib.rs#L30
[17:51:06] <bourbaki> Why dont function like push etc return the vector?
[17:51:14] <bourbaki> functions
[17:51:15] <pnkfelix> gregburd: what version of Rust are you using?
[17:51:18] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:51:33] <gregburd> 0.9
[17:51:54] <pnkfelix> gregburd: it looks to me like the repo you are referencing is using a more recent (development) version, built from the Rust development repo's master branch
[17:52:10] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:52:20] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[17:52:32] <bstrie> bourbaki: they are likely modifying the vector in-place
[17:52:33] <gregburd> so much for brew, I'm happy to build rust myself... if I have too :)
[17:52:50] <bourbaki> bstrie: Still
[17:54:05] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Quit: leaving)
[17:54:56] *** Joins: shor (Mibbit@637BF566.D97D653E.172227A7.IP)
[17:55:16] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[17:55:35] *** Quits: shor (Mibbit@637BF566.D97D653E.172227A7.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:55:36] <bourbaki> Then i could save some lines in line 9 https://gist.github.com/b0urb4k1/9526793
[17:56:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:56:27] *** Joins: nstdloop_ (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[17:58:38] *** Quits: esummers____ (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[17:58:41] <pnkfelix> bourbaki: there is vec::append_one
[17:58:52] <bourbaki> checking
[17:59:22] <bourbaki> Thanks :)
[17:59:55] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[18:00:59] *** jorendorff is now known as jorendorff_away
[18:02:49] <jdm> is there a way to disable the unused result warning for particular methods?
[18:03:04] <jdm> ie. make ignoring a method's return value not trigger the warning?
[18:03:24] <kimundi> bourbaki: However I'm removing append and append_one as soon as I get the chanche. ;)
[18:04:02] <kimundi> bourbaki: (I'm trying to replace the functionality they offer with a macro though - let v = fupdate!(x->push(y)) or so)
[18:06:05] *** jorendorff_away is now known as jorendorff
[18:06:37] <Tari> jdm: let _ = foo();
[18:06:46] <jdm> Tari: I mean without changing any callers
[18:07:09] <kimundi> #[allow(unused_result)] somewhere?
[18:07:31] *** Quits: murph (murph@moz-A933BAE1.oracle.com) (Client exited)
[18:07:34] <Tari> that probably also only works on callers
[18:07:43] *** Joins: murph (murph@moz-A933BAE1.oracle.com)
[18:07:48] <bourbaki> kimundi: ok why?
[18:08:20] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[18:08:37] *** Joins: skade_ (skade@moz-A04BC22E.adsl.inetia.pl)
[18:09:05] *** Quits: skade (skade@moz-A04BC22E.adsl.inetia.pl) (Connection reset by peer)
[18:09:08] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[18:09:51] <bourbaki> Are macros exposed in mods (unlinke macros and namespaces in c++)?
[18:10:08] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[18:10:17] *** Joins: adridu59 (Mibbit@moz-9BAC9171.rev.numericable.fr)
[18:10:45] <sfackler> bourbaki: macro namespacing is weird
[18:11:06] <bourbaki> Well that would lead to my next question then, is there an udef?
[18:11:09] <bourbaki> er undef
[18:11:18] *** Joins: dherman_ (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:11:31] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[18:11:32] *** dherman_ is now known as dherman
[18:11:33] <sfackler> a macro definition is placed in the innermost namespace that *doens't* contain a #[macro_escape] attribute
[18:11:33] *** Parts: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[18:11:48] <sfackler> undef?
[18:11:56] <bourbaki> Well like in C++
[18:11:58] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[18:12:05] <sfackler> macro definitions also need to appear lexically before their use
[18:12:21] <sfackler> oh, like #undef FOO or whatever
[18:12:21] <bourbaki> http://gcc.gnu.org/onlinedocs/cpp/Undefining-and-Redefining-Macros.html
[18:12:27] <bourbaki> Yes
[18:12:41] <sfackler> not that I'm aware of
[18:12:47] <o11c> what *I* want  to know is if there's an ifdef
[18:12:58] <canhtak> hi rust dev's. There is a way to create a std::vec_ng::Vec from a raw buffer?
[18:12:59] <bourbaki> Just asking, cause i think that macros globally scoped eventually will lead to some problem :)
[18:13:02] <sfackler> o11c: #[cfg()]?
[18:13:12] <o11c> sfackler: no, ifdef for a macro
[18:13:14] <canhtak> i can do this Vec::from_slice(vec::raw::from_buf_raw(raw_buf, size)); but i'm not sure it's the right way to do.
[18:13:25] <sfackler> bourbaki: they aren't necessarily globally scoped
[18:13:31] <adridu59> acrichto: are you willing to consider Hoedown again?
[18:13:34] <bourbaki> Oh ok
[18:13:37] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Quit: Ex-Chat)
[18:13:45] <sfackler> rusti: mod foo { macro_rules! foo(() => ()) } foo!()
[18:13:46] -rusti- <anon>:11:48: 11:51 error: macro undefined: 'foo'
[18:13:46] -rusti- <anon>:11         mod foo { macro_rules! foo(() => ()) } foo!()
[18:13:46] -rusti-                                                          ^~~
[18:13:46] -rusti- error: aborting due to previous error
[18:13:46] -rusti- application terminated with error code 101
[18:13:56] <sfackler> rusti: #[macro_escape] mod foo { macro_rules! foo(() => ()) } foo!()
[18:13:56] <kimundi> bourbaki: Reason for removal: They are redunant, restricted ways to do the same
[18:13:56] -rusti- <anon>:1:1: 1:1 error: unexpected token: `<eof>`
[18:13:56] -rusti- <anon>:1 #[feature(globs, macro_rules, struct_variant, simd, asm)];
[18:13:56] -rusti-          ^
[18:13:57] -rusti- application terminated with error code 101
[18:14:26] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[18:14:39] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[18:15:19] <bourbaki> Is there a way to make my function keep getting enums as params and use refs ? https://gist.github.com/b0urb4k1/9526793 (line 9)
[18:15:37] <kimundi> bourbaki: Rust supports mutation through &mut pointers, and while mutating by functionally replacing a valuer with a new one works too, supporting both at the same time just leads to much API duplication.
[18:15:41] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:15:57] <bourbaki> kimundi: Sounds reasonable.
[18:16:08] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[18:16:25] <acrichto> adridu59: yeah, the ``` vs ~~~ bug seems legit
[18:17:15] <adridu59> acrichto: cool; hoedown just have api name changes otherwise it's drop-in
[18:17:20] <adridu59> has
[18:18:09] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[18:18:10] <kimundi> append_one() is literally implemented by {let mut tmp = arg; tmp.push(elem); return tmp} anyway, which is a simple syntax transformation to get somthing that works with &mut mutation to look like functional updating, so it seems logical to express it as a macro in my opinion. Of course, whether it will get accepted in libstd is another story, but append/append_one will likely go either way.
[18:18:45] *** Joins: mpiechotka (mpiechotka@moz-D9096804.dynamic.mnet-online.de)
[18:18:51] <acrichto> adridu59: seems reasonable
[18:19:21] <kimundi> bourbaki: could you explain "getting enums as params and use refs"
[18:19:26] <kimundi> ?
[18:19:36] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[18:19:44] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:19:53] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[18:20:12] <bourbaki> kimundi: Yes let me update the gist sec
[18:20:51] <bourbaki> Updated
[18:21:12] <bourbaki> Now since i use the pattern match to get the inner members of the Node
[18:21:29] <bourbaki> I can not return the first parameter, the one i pudated.
[18:21:32] <bourbaki> er updated
[18:21:35] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[18:22:03] *** Joins: FreeFull (freefull@moz-A3210B4C.ppp.as43234.net)
[18:22:07] <bourbaki> Before i just retrieved a new Directory (Haskellish).
[18:22:41] <bourbaki> I think what i would like to have is some kind of swap on the inner list.
[18:22:50] <bourbaki> keeping the ref
[18:23:06] <kimundi> I'm still unsure what the probelm is exactly
[18:23:23] <bourbaki> Well the match "unpacks" the data inside the enum
[18:23:49] <bourbaki> I modify the stuff in the enum, in my case the list of nodes, by adding the new entry.
[18:23:55] <kimundi> bourbaki: Right, but in this case you should get "attempt to move out of reference errors"
[18:23:58] <bourbaki> Er nm ...
[18:24:16] <bourbaki> The list in there is modified
[18:24:20] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:24:29] <bourbaki> So i just return node
[18:24:47] <bourbaki> Not building a new instance.
[18:24:55] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[18:25:24] <bourbaki> Like so
[18:26:08] <kimundi> Okay, two things that might help you: 1.) We have std::mem::swap(), which you can use to swap two values. 2) You can put binding modifiers before pastern bindings (like `name` and `list` there) to get reference or mutable references instead.
[18:26:54] <kimundi> Directory(name, list) => attempts to bind by value, which will not work if you match on a reference to a moving type like in your case
[18:26:59] <bourbaki> Updated the gist again with a new error on partially moved values
[18:27:16] *** Quits: Kruppe (user@moz-7B566345.dynamic.uwaterloo.ca) (Ping timeout)
[18:27:19] <kimundi> Directory(ref name, ref list) => will create bindings to references of the values, which will work if you match on a reference
[18:27:43] <kimundi> bourbaki: Right, okay
[18:28:03] <kimundi> bourbaki: This is part of Rusts ownership model.
[18:28:16] <bourbaki> Er sec sorry
[18:28:17] <bourbaki> Wait
[18:28:25] <bourbaki> I did not update that stuff properly yet
[18:28:35] *** Quits: mindcat__ (mindcat@F32E3B11.297EFC2A.57E3C596.IP) (Quit: Lost terminal)
[18:28:43] <bourbaki> I always have to copy it to that website, give me a min :)
[18:28:46] *** Quits: sellout (Adium@D76D9638.B3FAD41.E7673F62.IP) (Quit: Leaving.)
[18:28:55] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[18:29:21] <bourbaki> I think i broke the website :)
[18:30:14] <bourbaki> I will just try out some more things, dont want to keep you of the important work all day :)
[18:30:30] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:30:32] <kimundi> Eh, I keep myself out of important work anyway
[18:30:37] <bourbaki> Hehe
[18:30:56] <bourbaki> I added & to the params and the return type now
[18:31:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:31:15] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[18:31:37] <bourbaki> I really need to setup a virtual box for rust ..., that website is crap :(
[18:33:05] <kimundi> bourbaki: Do you want this code to be idiomatic Rust code, or functionalish ? Cause this gets easier if you use mutation. :)
[18:33:22] <bourbaki> I am not yet sure.
[18:33:31] <bourbaki> I want to find a good middle ground.
[18:33:52] <kimundi> both would work, but both include replacing append_one with .push() anyway I think
[18:34:10] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[18:34:17] <bourbaki> I had that earlier, just did so cause it was there :)
[18:34:29] *** Joins: tgkokk (tgkokk@moz-313711E.home.otenet.gr)
[18:34:50] <bourbaki> I will call it a day though, first thing tomorrow will be setting up a box
[18:35:08] <kimundi> bourbaki: Generally, this kind of code only works if you take things by value
[18:35:10] <bourbaki> Will Debian do?
[18:35:35] <bourbaki> Yeah, i thought there was some clever way to make it work with refs.
[18:35:38] <kimundi> bourbaki: I know that ubuntu and arch have nightly packages
[18:35:58] <bourbaki> I would love arch but i think im too much of a lx noob to get it running :)
[18:35:59] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Quit: leaving)
[18:36:26] <bourbaki> And its one of the distros that will give you a lot of rtfm answers ;)
[18:36:36] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:37:02] *** Joins: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr)
[18:37:46] *** Joins: q66 (q66@moz-F33530F2.range109-145.btcentralplus.com)
[18:38:32] <kimundi> bourbaki: Getting it running is surprisingly easy now. If your goal is just a vm for compiling and testing rust, it can be done in a afternoon or so. But just installing a lightweight ubuntu distro still beats that.
[18:38:33] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:38:36] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[18:38:54] <bourbaki> Yep
[18:39:06] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Max SendQ exceeded)
[18:39:10] <bourbaki> I think i will pick an ubuntu then.
[18:39:26] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[18:39:33] <bourbaki> I just hope that the host stuff works now in virtual box
[18:39:55] <kimundi> bourbaki: The link for the nighly package: https://launchpad.net/~hansjorg/+archive/rust
[18:40:02] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:40:25] <bourbaki> Thank you
[18:41:01] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[18:42:24] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[18:42:51] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[18:42:58] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[18:43:42] *** Quits: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP) (Ping timeout)
[18:43:50] *** Joins: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP)
[18:44:12] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[18:44:43] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[18:44:50] *** Quits: tgkokk (tgkokk@moz-313711E.home.otenet.gr) (Quit: Textual IRC Client: www.textualapp.com)
[18:45:30] *** Quits: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP) (Ping timeout)
[18:45:32] *** Quits: flan3002 (flan3002@moz-4090ED07.dip0.t-ipconnect.de) (Ping timeout)
[18:46:25] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[18:47:03] *** Quits: bourbaki (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[18:49:23] *** Joins: philix (felipe@moz-49826C81.user.veloxzone.com.br)
[18:50:38] *** Quits: skade_ (skade@moz-A04BC22E.adsl.inetia.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:50:43] *** pmoore is now known as pmoore|away
[18:52:35] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[18:52:39] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:53:34] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:54:00] *** Joins: skade (skade@moz-A04BC22E.adsl.inetia.pl)
[18:54:22] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:54:22] *** ChanServ sets mode: +o tjc
[18:54:49] *** Joins: flan3002 (flan3002@moz-4090ED07.dip0.t-ipconnect.de)
[18:54:57] *** Quits: dschatzberg (dschatzber@moz-E2680405.bu.edu) (Input/output error)
[18:55:20] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Ping timeout)
[18:55:49] *** sinsnare|zzZZZz is now known as sinistersnare
[18:55:50] *** Joins: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP)
[18:56:02] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[18:56:51] *** Quits: skade (skade@moz-A04BC22E.adsl.inetia.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:56:54] *** Joins: willingc (willingc@moz-48549B49.san.res.rr.com)
[18:57:37] *** Quits: flan3002 (flan3002@moz-4090ED07.dip0.t-ipconnect.de) (Ping timeout)
[19:00:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:04:19] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:04:54] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[19:05:01] <brianm> 0.9 or master? :-)
[19:06:15] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[19:06:20] *** Quits: adridu59 (Mibbit@moz-9BAC9171.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:08:05] <kmc> the result of StrSlice::char_len() isn't cached, right?
[19:08:09] <kmc> i kind of thing it should be, at least for ~str
[19:08:25] <kmc> is there a standard solution, or should I make my own ~str + uint struct
[19:08:44] <kmc> brianm: depends what you're doing with Rust, but in general I would say use master
[19:09:15] <kmc> for Servo we upgrade to master every few months and then spend a week or two getting everything to compile again :)
[19:09:31] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[19:11:31] *** glaebhoer1 is now known as glaebhoerl
[19:11:53] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[19:12:16] <nstdloop_> Do I have to make impl's public or are they automatically exported with the struct?
[19:12:38] <strcat> kmc: I don't think it should be cached
[19:12:39] <kmc> you make the individual fn's public
[19:12:42] <strcat> imo it's not a very useful measurement
[19:12:51] <kmc> strcat: it is very useful for what I'm doing at the moment
[19:12:53] <strcat> it's not the string's width in user-perceived characters or anything
[19:12:57] <strcat> kmc: which is what? :)
[19:13:01] <kmc> HTML5 tokenizer
[19:13:11] <kmc> which is explicitly a state machine consuming Unicode codepoints
[19:13:15] <kmc> I understand that codepoints ≠ characters ≠ width on the screen
[19:13:21] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:13:21] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:13:23] <strcat> kmc: wouldn't it be faster to use ~[char]?
[19:13:28] <strcat> or does mem usage matter more
[19:13:35] *** Joins: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se)
[19:13:36] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[19:13:41] *** Quits: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se) (Quit: tq)
[19:13:50] <kmc> I haven't profiled but from now I assume that the network layer is handing us chunks of ~str and we want to process them without copying (until output)
[19:13:53] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[19:13:57] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[19:14:00] <kmc> in the common case the page is coming off the wire already in UTF-8
[19:14:14] <strcat> well it gives you chunks of ~[u8] and it would take a pass over all of it to turn it into ~str
[19:14:21] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[19:14:46] <strcat> kmc: how far do you need to peek ahead?
[19:14:48] <kmc> isn't there a function to consume a ~[u8], check it for UTF-8, and output a ~str without copying?
[19:14:56] <kmc> strcat: 10 characters or so
[19:14:59] <strcat> kmc: yes, but that's a whole pass over it
[19:15:01] <kmc> sure
[19:15:18] <kmc> but it's something which happens outside the tokenizer, regardless
[19:15:27] <kmc> for now I don't want to intimately entangle the character decoder and the tokenizer
[19:16:02] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:16:22] <kmc> I want to write the simplest thing which is locally free of wasteful effort, and then profile it
[19:16:43] <glaebhoerl> "Disallow taking the address of a non-mut static value unless it is Freeze"
[19:16:47] <glaebhoerl> can someone explain me the sense of this?
[19:17:07] <strcat> dunno
[19:17:35] <strcat> well
[19:17:43] <strcat> I guess that allows you to put non-Freeze types in static
[19:17:46] <glaebhoerl> let's say `static FOO: Option<Cell<int>> = None; let r = &FOO;` why is this bad? or is this not what it's talking about?
[19:17:51] <strcat> even though they may have methods that are going to try to mutate them
[19:18:03] <strcat> glaebhoerl: because Cell has &self methods allowing you to mutate it
[19:18:06] <strcat> it'd be memory unsafe
[19:18:22] <glaebhoerl> yeah, but you don't have a Cell, only a None :)
[19:18:25] <strcat> so I guess it's just a clever way of allowing non-Freeze types in statics without breaking memory safety
[19:18:33] <strcat> glaebhoerl: the compiler isn't infinitely smart
[19:18:44] <strcat> the rules need to be simple or errors are impossible to understand too
[19:18:48] <glaebhoerl> or is this also reversing the earlier policy that the *initializer* of an immutable static can't contain non-Freeze or destructors?
[19:18:55] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[19:18:58] *** Joins: mib_57pyr9 (Mibbit@B922295F.FC82A6FF.73529401.IP)
[19:19:03] <strcat> dunno
[19:19:34] * kmc -> afk
[19:19:41] *** Quits: mib_57pyr9 (Mibbit@B922295F.FC82A6FF.73529401.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:19:47] <strcat> kmc: I'd like to have an iterator method allowing a peekable buffer
[19:20:04] <strcat> so you could do something like decode ~[u8] -> Iterator<char> and peek into a buffer
[19:20:26] <strcat> afaik you'd probably want that for magical incremental rendering some day anyway
[19:20:37] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[19:21:17] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[19:21:39] <strcat> although I guess it can be in many encodings so that's non-trivial ;p
[19:21:48] <strcat> and the stdlib way wouldn't be enough
[19:22:39] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[19:23:29] *** Joins: flan3002 (flan3002@moz-4090ED07.dip0.t-ipconnect.de)
[19:24:17] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Input/output error)
[19:24:37] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[19:25:09] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[19:25:28] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[19:25:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[19:26:20] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[19:27:39] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:27:51] *** Quits: wilfred (uid159@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[19:29:45] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[19:32:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:33:25] *** Joins: marianoguerra (marianogue@moz-184D29F5.dip0.t-ipconnect.de)
[19:34:01] <flan3002> How can I match a char when I actually read a byte? In match stdin.read_byte() { Ok('\\') => ... } I want to match the u8 that corresponds to the Ascii of '\\'...
[19:34:24] <Ms2ger> '\\' as u8
[19:35:08] <bvssvni> it's already u8
[19:35:19] <Ms2ger> Nope
[19:35:25] <flan3002> expected  `,` but found `as`
[19:35:29] *** Joins: mye (mye@moz-3E4EFFAB.dip0.t-ipconnect.de)
[19:35:30] <Ms2ger> '\\' is char, which is 32 bits
[19:35:30] <Earnestly> flan3002: Hold on.  Are you matching bytes, or the string "//"?
[19:35:35] <Earnestly> Or \\* even
[19:35:35] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Ping timeout)
[19:35:51] <bvssvni> Ms2ger: http://static.rust-lang.org/doc/master/std/io/trait.Reader.html#method.read_byte
[19:36:05] <Ms2ger> Yes
[19:36:22] <bvssvni> ah
[19:36:23] <bvssvni> sorry
[19:36:26] <Ms2ger> :)
[19:36:38] <flan3002> Earnestly: matching against 'Ok('\\')'
[19:36:42] <sfackler> flan3002: nmatch stdin.read_byte().map(|b| b as char) { ... } should work
[19:37:04] <Ms2ger> sfackler, "work" for values that don't include non-ascii vytes :)
[19:37:08] <Ms2ger> bytes
[19:37:50] <sfackler> I think you can use escapes in char literals
[19:38:00] <sfackler> '\u0000' or something
[19:38:01] *** Quits: leowoe (Leo@moz-9517672.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:38:15] <flan3002> sfackler: Okay, thanks!
[19:38:18] <kimundi> can also try "static SLASH_BYTE: u8 = '//' as u8;" ... Ok(SLASH_BYTE)
[19:38:25] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[19:38:28] <Ms2ger> \\, not //
[19:38:40] <Ms2ger> But yes, that would have been my next suggestion
[19:38:46] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[19:38:51] <brianm> should I still generally work against master, or is 0.9 reasonable?
[19:38:58] <strcat> master
[19:39:08] <Ms2ger> master
[19:39:16] <brianm> okay :-)
[19:39:20] *** Joins: alonlevy (alon@546A964A.A5C48CE0.9E22F775.IP)
[19:39:20] <bvssvni> brianm: there are many breaking changes :P
[19:39:35] <brianm> master won't build for me, freaks on libuv and llvm
[19:39:36] *** Quits: willingc (willingc@moz-48549B49.san.res.rr.com) (Quit: Leaving...)
[19:40:15] <kimundi> brianm: hm, could you explain more about what you're doing
[19:40:26] <brianm> checkoued our master
[19:40:28] <brianm> running configure
[19:40:33] <brianm> will paste results, one sec
[19:40:36] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[19:41:26] <brianm> hah, second time it works
[19:41:46] *** Joins: skade (skade@6EE6290F.419529BC.F58CE5CF.IP)
[19:41:59] <brianm> first time I tried, it got upset saying the hashes for libuv and llvm were not trees or such
[19:42:06] <brianm> ran configure again, no complaints, have amakefile
[19:42:36] <kmc> oh dear, ~str::shift_char() copies the remainder of the string
[19:43:05] <brianm> trying to repro
[19:43:14] <kmc> I mean it sort of has to, but still, ugh
[19:43:19] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[19:43:39] <strcat> kmc: you'd want a ring buffer for that
[19:43:46] <strcat> but we don't have a string wrapper around ring buffers
[19:43:48] <mrmonday> error: failed to find an implementation of trait fmt::Show for std::io::net::ip::IpAddr <= why might I get this error? I have both fmt::Show and std::io::net::ip imported, and there's an implementation of Show in the latter
[19:43:54] <kmc> gotta go for real now
[19:43:56] <mrmonday> is there anything obvious I might have missed?
[19:43:58] <strcat> kmc: imo, the ideal would be strings as a generic type wrapping a random-access container
[19:44:03] <strcat> so a rope, vector or ring buf
[19:44:10] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[19:44:14] <strcat> and you could use the appropriate underlying type
[19:44:19] *** Quits: skade (skade@6EE6290F.419529BC.F58CE5CF.IP) (Ping timeout)
[19:45:11] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[19:45:18] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[19:45:35] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[19:45:36] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[19:45:40] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:46:47] <sfackler> mrmonday: seems to work for me:
[19:46:51] <sfackler> rusti: use std::fmt::Show; fn foo<T: Show>(_: Option<T>) {} fn main() { foo(None::<::std::io::net::ip::IpAddr>); }
[19:46:51] -rusti- pastebinned 7 lines of output: http://sprunge.us/ijiH
[19:46:52] <bvssvni> mrmonday: that's weird
[19:47:08] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[19:47:21] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:48:05] <bvssvni> rusti: use std::fmt::Show; fn foo<T: Show>(_: Option<T>) {} foo(None::<:td::io::net::ip::IpAddr>)
[19:48:05] -rusti- <anon>:11:73: 11:74 error: expected type, found token COLON
[19:48:05] -rusti- <anon>:11         use std::fmt::Show; fn foo<T: Show>(_: Option<T>) {} foo(None::<:td::io::net::ip::IpAddr>)
[19:48:05] -rusti-                                                                                   ^
[19:48:05] -rusti- application terminated with error code 101
[19:48:06] <mrmonday> I've been getting a ton of weird errors, been trying to work around it. The above is the latest :>
[19:48:10] *** Joins: skade (skade@6EE6290F.419529BC.F58CE5CF.IP)
[19:49:00] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[19:49:00] *** Quits: skade (skade@6EE6290F.419529BC.F58CE5CF.IP) (Connection reset by peer)
[19:49:07] *** Joins: skade_ (skade@6EE6290F.419529BC.F58CE5CF.IP)
[19:49:26] <mrmonday> pretty sure there's a compiler bug in there somewhere, I don't have time to track it down right now though
[19:49:26] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[19:49:34] <myname> error code 101 would be a great name for a course
[19:50:35] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[19:50:56] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[19:51:34] *** Quits: tmh (e@180B7532.123B3C13.AA32EE5B.IP) (Ping timeout)
[19:51:38] <bvssvni> rusti: fn foo<T: std::fmt::Show>(_: Option<T>) {} foo(None::<std::io::net::ip::IpAddr>)
[19:51:38] -rusti- ()
[19:52:12] <bvssvni> it gave wrong error message None::<:td::io::net::ip::IpAddr> (std misspelled)
[19:52:52] <bvssvni> careful with those colons
[19:53:18] <olsonjeffery> anyone have any idea on this build error ? https://gist.githubusercontent.com/olsonjeffery/9555484/raw/af3e5c47aeffa5160f2e1474113b8d05d1fde56d/spew
[19:53:34] <olsonjeffery> it's because of linking to SDL2 on a mac.. you usually have to use the framework
[19:53:36] <myname> careful with those paamayim nekudotayim
[19:53:45] <olsonjeffery> so im curious where it is that is causing the compiler to insert -lSDL2
[19:54:03] <olsonjeffery> this is in the final linking of my bin .. all of the inputs (including rust-sdl2) are rlibs
[19:55:51] <bvssvni> myname: which language is that?
[19:55:57] <sfackler> php
[19:56:13] <myname> bvssvni: that's php's token name for ::
[19:56:21] *** Joins: tmh (e@180B7532.123B3C13.AA32EE5B.IP)
[19:56:26] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[19:57:54] <bvssvni> :D
[19:57:56] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:58:03] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:59:08] *** Joins: claudiu_ (claudiu@moz-33191099.thefacebook.com)
[19:59:08] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Connection reset by peer)
[19:59:12] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[20:00:16] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:01:13] *** Joins: sellout (Adium@moz-EE794C0C.hlrn.qwest.net)
[20:01:19] *** Quits: claudiu_ (claudiu@moz-33191099.thefacebook.com) (Connection reset by peer)
[20:01:20] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[20:01:48] *** Joins: mr_pants (Mibbit@4176886A.394FC55A.2862F179.IP)
[20:02:02] <brianm> cherso
[20:02:08] <brianm> mistell
[20:02:22] *** Quits: tmh (e@180B7532.123B3C13.AA32EE5B.IP) (Client exited)
[20:02:35] <rdgawdzi> So say I build rust using make. Is the stage2 binary supposed to have a different version from the original make I did when I forked it? It should, right?
[20:02:39] *** Joins: philix_ (felipe@moz-49826C81.user.veloxzone.com.br)
[20:02:51] *** Joins: lawrence (lawrence@moz-BA195892.wireless.utoronto.ca)
[20:03:11] <rdgawdzi> Is there any reason for a stage2 binary not to be updated if a make build was successful? I am working on the libsyntax portion of rustc.
[20:03:41] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:04:24] *** Joins: tmh (e@180B7532.123B3C13.AA32EE5B.IP)
[20:04:41] *** Quits: lawrence (lawrence@moz-BA195892.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:04:58] *** Joins: leowoe (Leo@moz-9517672.dip0.t-ipconnect.de)
[20:05:06] <bvssvni> rdgawdzi: maybe ask in #rust-internals
[20:05:40] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[20:06:25] *** Joins: claudiu_ (claudiu@moz-33191099.thefacebook.com)
[20:06:25] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Connection reset by peer)
[20:08:12] *** Joins: huseby (huseby@moz-9D57B0ED.dhcp.embarqhsd.net)
[20:08:38] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[20:09:11] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[20:09:24] *** Joins: lawrence (lawrence@moz-BA195892.wireless.utoronto.ca)
[20:10:09] *** Quits: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[20:10:38] *** Joins: mib_3do5j0 (Mibbit@F4489DB3.9747582C.3464FAC3.IP)
[20:10:53] <mib_3do5j0> Hi there!
[20:11:41] <mib_3do5j0> Now that std::vec has been deprecated, what should vec::from_buf() be changed to?
[20:12:55] *** Quits: philix_ (felipe@moz-49826C81.user.veloxzone.com.br) (Quit: leaving)
[20:13:23] <strcat> mib_3do5j0: Vec doesn't have an equivalent yet
[20:13:23] <eddyb> mib_3do5j0: Vec::from_bug
[20:13:28] <eddyb> *from_buf
[20:13:34] *** Joins: philix_ (felipe@moz-49826C81.user.veloxzone.com.br)
[20:13:50] <eddyb> vec:: -> Vec:: (in general, not everything is moved over)
[20:14:02] <darnuria> There is a #[no_main] directive in rust?
[20:14:42] <eddyb> there is a #[no_start] (previously #[no_uv]) though I'm not sure that landed yet
[20:14:47] <mib_3do5j0> Is it planned to eventually add from_buf() to Vec? Or has it intentionally been omitted?
[20:15:01] <eddyb> mib_3do5j0: yes/no
[20:15:14] <mib_3do5j0> Thanks :)
[20:15:17] <kmc> what's the behavior of #[no_start]?
[20:15:41] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[20:15:54] *** Quits: alonlevy (alon@546A964A.A5C48CE0.9E22F775.IP) (Ping timeout)
[20:15:59] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:16:16] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[20:16:24] <eddyb> kmc: removes the built-in #[start]
[20:16:31] *** Joins: alonlevy (alon@546A964A.A5C48CE0.9E22F775.IP)
[20:16:31] <kmc> and which behavior do you want darnuria 
[20:16:43] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:16:50] <darnuria> I am just writing exercices in rust and a test-suite.
[20:16:53] <kmc> eddyb: ok, but defining your own #[start] also does that, right? and when would you want neither, for an exe crate?
[20:17:05] <mcpherrin> eddyb: so is #[no_start] the old #[no_main]? I'm confused.
[20:17:17] <kmc> darnuria: what I mean is, what do you want to accomplish with #[no_start]
[20:17:19] <darnuria> The goal is to have some exercices and a test-suite for testing the exercice solution.
[20:17:21] *** jorendorff is now known as jorendorff_away
[20:17:32] <eddyb> kmc: which used to call something (a bit more complicated than) green::start(main) and now should be native::start(main)
[20:17:33] <kmc> darnuria: ok, do you want them to be in the same crate or separate?
[20:17:40] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:17:43] *** Quits: tmh (e@180B7532.123B3C13.AA32EE5B.IP) (Ping timeout)
[20:17:45] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:17:56] <eddyb> mcpherrin: no_uv -> no_start. I'm not aware of a no_main
[20:17:57] <darnuria> maybe separate with a test module and a solution one.
[20:17:59] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[20:18:04] <darnuria> and a third with the responses.
[20:18:12] <kmc> darnuria: or they can be in separate modules in the same crate; that's probably easiest
[20:18:19] <eddyb> so where would you need no_main?
[20:18:21] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:18:26] <mcpherrin> eddyb: https://github.com/mozilla/rust/pull/8279
[20:18:46] <darnuria> kmc: Yep I think thats the best way.
[20:18:55] <kmc> ok
[20:19:00] <darnuria> kmc: And compiling with --output-lib?
[20:19:08] <darnuria> with --test
[20:19:25] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:19:32] <eddyb> you can't make a test lib
[20:19:39] <kmc> if your exercises and your test program are in the same crate then it's an executable crate, not a library crate
[20:19:43] <eddyb> --test produces an implicit executable
[20:19:51] <eddyb> with its own main function and stuff
[20:19:58] <kmc> the tutorial describes how modules and crates work, if you're not familiar
[20:20:05] <eddyb> mcpherrin: huh that code is still alive... doesn't seem useful though
[20:20:17] <eddyb> mcpherrin: I mean, that's pre-native stuff
[20:20:17] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[20:20:17] *** Joins: tmh (e@180B7532.123B3C13.AA32EE5B.IP)
[20:20:27] <eddyb> mcpherrin: so the PR description is invalid
[20:20:42] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:20:48] <kmc> darnuria: basically you only need multiple crates when you want to compile with separate rustc invocations, e.g. to build a library as a .so file and then an executable which links to that library
[20:21:07] <kmc> within a single crate you can still have multiple modules across multiple files
[20:21:07] <darnuria> Ok. I see.
[20:21:24] <darnuria> that's the goal ;)
[20:21:27] <kmc> cool
[20:21:59] *** Quits: tmh (e@180B7532.123B3C13.AA32EE5B.IP) (Client exited)
[20:22:01] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[20:22:18] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[20:22:19] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[20:22:24] <darnuria> In fact we want to make exercices for learning rust, and the main problem is to handle the progression of the user.
[20:22:40] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[20:22:44] <kmc> what I want at the moment is a type which owns a ~str but presents a slice of that str, with the same interface as &str
[20:22:56] <darnuria> how we can provide test-driven-exercices for the user. And also provide solution for testing etc...
[20:23:04] *** Quits: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP) (Client exited)
[20:23:15] <darnuria> (I make it with Armavica)
[20:23:26] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[20:23:38] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[20:23:38] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Ping timeout)
[20:23:41] *** jorendorff_away is now known as jorendorff
[20:24:05] *** Quits: bascule (bascule@moz-3D395603.compute-1.amazonaws.com) (Ping timeout)
[20:24:14] *** Quits: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[20:24:16] *** Quits: tedh_ (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[20:24:18] *** Quits: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org) (Ping timeout)
[20:24:19] *** Joins: bascule (bascule@45E9F3E3.40FF3E4A.20B27E10.IP)
[20:24:24] <kmc> it seems like it should be permissible to make a struct that holds a  ~str and also a &str pointing to it, but I don't know how without unsafe code
[20:24:27] *** Quits: oldmanstan (glesica@moz-CA910636.net) (Ping timeout)
[20:24:29] *** Quits: wting (wting@E31B3884.E538DA90.20F09BA6.IP) (Ping timeout)
[20:24:34] *** Quits: skade_ (skade@6EE6290F.419529BC.F58CE5CF.IP) (Ping timeout)
[20:24:35] *** Joins: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org)
[20:24:43] *** Quits: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP) (Ping timeout)
[20:24:43] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[20:24:45] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[20:24:53] *** Quits: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP) (Ping timeout)
[20:24:57] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[20:24:58] *** Quits: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP) (Ping timeout)
[20:25:02] *** Quits: Frippe (Frippe@8CFC6FA4.DDEDB70D.F3459CEF.IP) (Ping timeout)
[20:25:10] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[20:25:13] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:25:18] *** Quits: ekiara (emk@moz-9B1940E9.tech.co.ke) (Ping timeout)
[20:25:18] *** Joins: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP)
[20:25:19] *** Quits: claudiu_ (claudiu@moz-33191099.thefacebook.com) (Ping timeout)
[20:25:19] *** Quits: sinistersnare (sinistersn@moz-7E48AC93.washdc.fios.verizon.net) (Ping timeout)
[20:25:20] *** Quits: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP) (Input/output error)
[20:25:22] <sfackler> kmc: ~str field would have be be permanantly frozen
[20:25:24] *** Quits: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) (Ping timeout)
[20:25:24] *** Quits: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk) (Ping timeout)
[20:25:27] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[20:25:34] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[20:25:34] <kmc> I mean as long as the struct exists, the ~str exists and so the reference is valid... but I don't know how to express that using lifetimes
[20:25:36] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[20:25:37] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Ping timeout)
[20:25:37] <kmc> hmm, good point
[20:25:45] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Ping timeout)
[20:25:47] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[20:25:49] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[20:25:50] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[20:25:52] *** Joins: nmatsaki1 (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[20:26:00] *** Joins: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP)
[20:26:03] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[20:26:09] *** Quits: Db (Db@moz-6F9AA8AA.me) (Ping timeout)
[20:26:14] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Quit: No Ping reply in 180 seconds.)
[20:26:15] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[20:26:21] *** Quits: oal (oal@26029749.1D466084.2CFD4520.IP) (Ping timeout)
[20:26:27] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[20:26:31] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[20:26:33] *** Joins: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[20:26:39] *** Joins: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP)
[20:26:39] *** Quits: mgottschlag (quassel@moz-D9018E99.cust.bluewin.ch) (Ping timeout)
[20:26:45] *** Quits: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se) (Ping timeout)
[20:26:47] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[20:26:51] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[20:27:02] <kmc> I could manually store (start, end) indices but that seems pretty ugly
[20:27:02] *** Joins: kkris (kkris@A3AA235B.6C5E2088.F4DE8378.IP)
[20:27:03] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[20:27:04] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[20:27:05] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[20:27:09] *** Quits: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net) (Ping timeout)
[20:27:12] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[20:27:12] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[20:27:14] <kmc> I'd rather have a little unsafe code hidden away in a module, if it's simple enough
[20:27:18] <kmc> so I think I'll try that
[20:27:20] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[20:27:20] *** ChanServ sets mode: +o jack
[20:27:32] *** Joins: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP)
[20:27:36] <kmc> also wtf is going on with the network here
[20:27:43] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[20:27:45] *** Joins: oldmanstan (glesica@moz-CA910636.net)
[20:27:54] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[20:28:06] *** Quits: asmyers (quassel@F39AC551.9A737B8F.FAA4474F.IP) (Ping timeout)
[20:28:09] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[20:28:14] *** Quits: philix_ (felipe@moz-49826C81.user.veloxzone.com.br) (Quit: leaving)
[20:28:17] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[20:28:20] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[20:28:27] *** Joins: Frippe (Frippe@8CFC6FA4.DDEDB70D.F3459CEF.IP)
[20:28:37] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[20:28:52] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:28:56] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[20:28:57] *** Joins: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP)
[20:29:09] *** Joins: oal (oal@26029749.1D466084.2CFD4520.IP)
[20:29:24] *** Joins: Db (Db@moz-6F9AA8AA.me)
[20:29:24] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Connection reset by peer)
[20:29:36] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:29:56] *** Joins: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se)
[20:30:47] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[20:31:52] *** Quits: alonlevy (alon@546A964A.A5C48CE0.9E22F775.IP) (Ping timeout)
[20:32:02] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[20:32:30] *** Quits: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP) (Ping timeout)
[20:32:41] *** Joins: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP)
[20:32:59] <kmc> sfackler: as long as I prevent mutation of the ~str, I can use uninit and transmute to make a &str and expose it, right?
[20:33:23] <sfackler> I think so
[20:33:48] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:33:48] *** ChanServ sets mode: +o tjc
[20:33:58] <kmc> any clever way to make mutating the ~str (even within my module) a compiler error?
[20:34:22] <Ms2ger> Any reason #[inline(alwyas)] isn't an error?
[20:34:27] <eddyb> kmc: newtype?
[20:34:33] <doomlord_> http://www.reddit.com/r/rust/comments/20fi8h/1st_attempt_did_you_mean_module_path_searching/ <<< tried to get this error message i want working, got part of what i want working
[20:34:52] *** Joins: chridou (Mibbit@moz-5969906.dip0.t-ipconnect.de)
[20:35:05] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[20:35:12] <sfackler> Ms2ger: The part of rustc that deals with inline isn't doing enough sanity checking
[20:35:49] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:36:10] <eddyb> kmc: struct Frozen<T> {priv data: T} impl Frozen<T> {fn new(data: T) -> Frozen<T>{Frozen {data: data}}}impl<T> Deref<T> for Frozen<T> {fn deref<'a>(&'a self) -> &'a T {&self.data}}
[20:36:17] <eddyb> kmc: is that what you want?
[20:36:22] <kmc> maybe
[20:36:45] <kmc> but it seems a bit superfluous to introduce that type just to define another small wrapper
[20:36:49] <kmc> unless it's already in the stdlib
[20:37:06] <kmc> sfackler: hm but what about  let x = { let y = OwningStringSlice::new(); y.slice };
[20:37:09] <eddyb> it's not... but look how tiny it is
[20:37:26] <kmc> if the field has just type &str then this will be allowed?
[20:37:34] <kmc> so I think I'm back to needing a lifetime parameter exposed to the user :/
[20:37:44] <eddyb> wait, what?
[20:37:54] <eddyb> kmc: why would that be allowed?
[20:38:07] <kmc> hm
[20:38:30] <eddyb> do you want more semantically than Frozen<~str>?
[20:38:51] <kmc> <@kmc> what I want at the moment is a type which owns a ~str but presents a slice of that str, with the same interface as &str
[20:38:56] <eddyb> which happens to be what Rc<str> would do, btw
[20:39:20] <eddyb> ~Frozen<str> would also work
[20:39:23] <eddyb> (under DST)
[20:39:32] <eddyb> kmc: hmm, why do you want that?
[20:40:01] <eddyb> understanding usage is key to understanding what the user actually wants, even when they can't properly express it
[20:40:19] <eddyb> (though I doubt it's the case here, it kinda only works with newbies)
[20:40:22] <kmc> a tokenizer which operates on a vector of ~str buffers without copying until necessary
[20:40:39] <kmc> I might have consumed only part of one of those ~strs
[20:40:43] <eddyb> "without copying until necessary" == CoW
[20:40:47] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[20:40:55] <kmc> I'm never writing to the ~strs....
[20:41:13] <kmc> I'm just looking at different slices of them as I consume characters
[20:41:18] <eddyb> so what do you want that you can't get with just ~str?
[20:41:20] <kmc> (and maybe un-consume them)
[20:41:26] *** Quits: marianoguerra (marianogue@moz-184D29F5.dip0.t-ipconnect.de) (Ping timeout)
[20:41:30] <eddyb> have you considered an iterator?
[20:41:32] <kmc> eddyb: ~str::shift_char() copies the entire rest of the character into a new allocation
[20:41:46] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[20:42:12] <eddyb> kmc: slices are inefficient btw
[20:42:31] <eddyb> (when used like that)
[20:42:38] <eddyb> because you have to increase the pointer and decrease the length
[20:42:41] <kmc> eddyb: yes but I think it would have the same problem;  struct Tokenizer { bufs: ~[~str], iter: MyIter<'what_lifetime_do_i_use_here> }
[20:42:54] <kmc> okay
[20:42:57] <eddyb> 'self ;)
[20:43:03] <eddyb> which doesn't work yet
[20:43:03] <kmc> does that actually work?
[20:43:07] <kmc> right
[20:43:17] <strcat> kmc: could always just store a byte index
[20:43:24] <kmc> maybe I should give up on doing this at a high level and store an index
[20:43:25] <kmc> right
[20:43:33] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[20:43:35] <eddyb> could the tokenizer work on a &'a str instead?
[20:43:36] <kmc> then I pay for a bounds check on every read
[20:43:37] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:43:38] <strcat> kmc: or have the tokenizer store a slice/iterator
[20:43:55] <strcat> and no ~str
[20:43:56] <kmc> eddyb: I think that will be less convenient for the input source but I'm not sure
[20:44:07] <eddyb> struct Tokenizer<'a> { bufs: &'a [&'a str], iter: Chars<'a> }
[20:44:07] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:44:13] *** Quits: oberstet (quassel@moz-BD8278CC.dynamic.mnet-online.de) (Client exited)
[20:44:19] <eddyb> kmc: you can even swap the iterator when it's depleted, with a new one
[20:44:26] <eddyb> and stuff like that
[20:44:32] <eddyb> (without a perf hit)
[20:44:32] <kmc> I want a design where the user pushes data into the tokenizer, rather than the tokenizer asking for more data
[20:45:11] <eddyb> and you don't want a state machine?
[20:45:11] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[20:45:26] <eddyb> actually, you can still make a state machine like this
[20:45:45] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[20:46:00] <kmc> eddyb: the tokenizer is a state machine
[20:46:07] <kmc> so what do you mean by that
[20:46:09] <eddyb> kmc: and you want to buffer the data that you couldn't work with?
[20:46:13] <kmc> yes
[20:46:17] <eddyb> I'm not exactly sure what the data flow is, yet
[20:46:19] *** Joins: skade (skade@6EE6290F.419529BC.F58CE5CF.IP)
[20:46:19] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:46:26] <kmc> let me sketch out the API
[20:46:29] <eddyb> kmc: you could have two types
[20:46:30] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:46:41] <eddyb> one used to actually use the iterator internally
[20:46:58] <eddyb> wrapping a &'a Tokenizer and a Chars<'a>
[20:47:22] <kmc> actually you can just look here https://github.com/kmcallister/html5/blob/master/tokenizer/mod.rs
[20:47:34] <kmc> I'm trying to get rid of the shift_char on line 118
[20:47:37] *** Joins: tmh (e@180B7532.123B3C13.AA32EE5B.IP)
[20:48:13] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:48:20] <eddyb> kmc: yeah, I've figured it out
[20:48:28] <eddyb> kmc: use a byte index in the tokenizer itself
[20:48:45] <kmc> yep
[20:48:56] <kmc> that's the unsatisfying solution I'm trying to avoid
[20:49:06] <kmc> but I should probably just accept it
[20:49:08] <eddyb> kmc: then what I said above, wrapping the tokenizer and an iterator created using that byte index (or maybe without the tokenizer)
[20:49:11] *** Quits: lawrence (lawrence@moz-BA195892.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:49:35] <eddyb> in a structure that has the internal machinery that uses get_char & friends
[20:49:46] <eddyb> kmc: you only pay once, when you create the iterator
[20:50:00] <kmc> only pay what?
[20:50:12] <eddyb> for the byte index
[20:50:22] <eddyb> weren't you thinking of overhead?
[20:51:04] *** Joins: leeks (Mibbit@moz-362CDC0.fttp.sta.comporium.net)
[20:51:23] <kmc> the bounds check? yeah but I can just profile later and see if it matters
[20:51:35] <kmc> I don't think I can avoid it though
[20:51:51] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:51:51] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:51:51] <eddyb> there wouldn't be a bounds check on every access
[20:52:07] <eddyb> kmc: just every time you start a parse cycle. how often is data pushed to you?
[20:52:19] <mcpherrin> eugh, pwn2own are all use-after-free, out of bounds reads, and heap overflows
[20:52:27] <mcpherrin> we need Rust browsers already
[20:52:34] <eddyb> mcpherrin: #servo
[20:52:36] <leeks> Am I doing something wrong or is this a bug? error: mismatched types: expected `~str` but found a `~`-box pattern arg_matching.rs:6        
[20:52:40] <leeks>  ~"yes" => println!("Yay"),
[20:52:41] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:52:53] <mcpherrin> eddyb: yep :-)
[20:52:56] <kmc> mcpherrin: no, C is fine, we just need to ban anyone who ever makes a mistake from writing code </troll>
[20:52:56] <eddyb> leeks: oh, I wasn't aware that was removed already
[20:53:09] <eddyb> leeks: match on slices not ~str
[20:53:14] <kmc> mcpherrin: you should contribute to Servo!
[20:53:37] *** Quits: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP) (Ping timeout)
[20:53:39] <kmc> eddyb: ah so you want the iterator to live on the stack of run()?
[20:53:42] <mcpherrin> kmc: I was talking to pcwalton last night about servo; sounds like there's some neat stuff going on.  Maybe I will :)
[20:53:48] <kmc> that could possibly work
[20:53:50] <eddyb> kmc: yup
[20:53:59] <sfackler> huon: ping
[20:54:04] <eddyb> also, states:: makes me a bit sad
[20:54:16] <leeks> eddyb: I'll give a go. Thanks. Haven't done anything with slices yet.
[20:54:18] <eddyb> kmc: but yay for a pretty readable state machine :D
[20:54:25] *** Joins: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP)
[20:54:31] <eddyb> leeks: match my_string.as_slice() {...}
[20:54:33] <kmc> sometimes run() will exit before it's processed all the input, but then I just reassign the byte index and recreate the iterator next time
[20:54:39] <kmc> eddyb: thanks :)
[20:54:48] <kmc> eddyb: out of curiosity what do you dislike about states::
[20:54:57] <eddyb> kmc: extra verbosity
[20:55:11] <eddyb> a bit hard to match when skimming the code
[20:55:16] <kmc> I didn't want to import them unqualified because there's like 70 of them
[20:55:28] <eddyb> hehe this is what we need globs for
[20:55:30] *** Joins: jviereck (Adium@moz-B0DD26CE.dynamic.hispeed.ch)
[20:55:46] <eddyb> kmc: you don't need "to " btw
[20:55:49] <kmc> and the macros take care of most cases, just not the match patterns, which are all on their own line anyway
[20:55:53] <mcpherrin> kmc: Maybe I'll write an xterm port of servo ;p
[20:55:57] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Client exited)
[20:56:10] <kmc> well, glob imports exist, but I don't want to pollute the namespace
[20:56:12] *** Quits: tmh (e@180B7532.123B3C13.AA32EE5B.IP) (Client exited)
[20:56:14] <kmc> i dunno, maybe it would be fine
[20:56:16] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[20:56:17] *** Joins: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu)
[20:56:19] <kmc> eddyb: don't need how so?
[20:56:29] <eddyb> kmc: just put that case at the end
[20:56:39] <eddyb> here https://github.com/kmcallister/html5/blob/master/tokenizer/mod.rs#L250-L277
[20:57:03] <kmc> eh that makes the DSL syntax less uniform
[20:57:06] *** Quits: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net) (Ping timeout)
[20:57:14] <kmc> I want it to be command args...; command args...
[20:57:25] <kmc> I guess you can consider every state to be a command
[20:57:26] <kmc> but *shrug*
[20:57:31] <kmc> I'll keep it in mind
[20:57:45] <kmc> thanks for all the ideas about the iterator problem
[20:57:47] <eddyb> it's just me being crazy :P
[20:58:06] *** Joins: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net)
[20:58:10] <kmc> I'm not sure I actually want to implement Iterator, because I need things like lookahead and consuming multiple chars at once maybe
[20:58:11] *** Joins: tmh (e@180B7532.123B3C13.AA32EE5B.IP)
[20:58:14] *** Quits: int3_ (int3_@moz-F9C0ECEB.subnet-224.amherst.edu) (Ping timeout)
[20:58:21] <kmc> but I could make my own iterator-like struct with that API
[20:58:37] <kmc> by the way HTML5 syntax is absurdly complicated :(
[20:58:54] <eddyb> kmc: an iterator is a pair of start/end pointers
[20:58:58] <strcat> kmc: everything is optional!!11!
[20:58:59] *** Quits: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP) (Quit: Leaving)
[20:59:01] <strcat> kmc: ;p
[20:59:09] <kmc> this is the easy part; the tree builder is much more complex and also modifies bits of the tokenizer state
[20:59:24] <eddyb> kmc: so looping through an iterator, copying things out, that should be optimized to a memcpy
[20:59:27] <sfackler> huon: unping
[20:59:35] <leeks> eddyb: Thank you very much. Got me up and going :)
[20:59:37] <eddyb> kmc: unless you work with bytes -> chars -> bytes which might not work
[20:59:52] <kmc> also for speed I might convert some of these states to their own loop which only returns on a state transition
[20:59:54] <eddyb> (if we could put macros in match arms, I would have the entire thing just be a macro invocation and just DSL it)
[21:00:05] <kmc> eddyb: i know right? i spent so long trying to make that work :(
[21:00:16] <kmc> tempted to write a procedural macro
[21:00:24] <eddyb> just make macros better!
[21:00:26] <eddyb> I know how ;)
[21:00:40] <kmc> mcpherrin: do you want to make macros better
[21:00:48] <mcpherrin> kmc: yes :p
[21:00:50] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:01:02] <eddyb> make everything on-demand instead of the kinda contextual item/stmt/expr distinction that we have now
[21:01:04] *** Quits: Savago (Savago@4C8C0E71.E820043D.D4C04133.IP) (Quit: Savago)
[21:01:11] <eddyb> we don't need statement macros, AFAIK
[21:01:19] *** Quits: tmh (e@180B7532.123B3C13.AA32EE5B.IP) (Client exited)
[21:01:21] <eddyb> but we need type, match arms, etc.
[21:01:22] *** Quits: Sorella_ (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[21:01:32] <eddyb> and we can have all of them for macro_rules
[21:01:50] <eddyb> (oh, also ident macros so you can do fn concat_idents!(foo, bar)(){})
[21:02:02] <sfackler> eddyb: the nontrivial part is adjusting the parser, not adjusting the macro system
[21:02:04] <eddyb> kmc: that's what I did in the PNG decoder and the inflate thing, hot lops inside the state machine, consuming more than one byte
[21:02:10] <eddyb> sfackler: the parser is fine :)
[21:02:20] <eddyb> the macros are broken
[21:02:27] <pauls> eddyb: a concatenation special form would make more sense. Easier, and I don't think there's any other reason for identifier macros.
[21:02:38] <sfackler> the parser needs to be able to parse a macro invocation in the place of any AST node
[21:02:45] <eddyb> pauls: don't be anti-future-proof
[21:02:59] <eddyb> sfackler: oooh, you mean the AST doesn't support it
[21:03:00] *** Quits: chridou (Mibbit@moz-5969906.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[21:03:05] <sfackler> yeah
[21:03:20] <eddyb> that makes more sense and could be fixable. hmm
[21:03:27] <pauls> eddyb: I've been waiting for the future; the future has stubbornly refused to show itself.
[21:03:30] <sfackler> Right now there are ExprMac and ItemMac variants
[21:03:46] <eddyb> now that I think of it, Ident macros would kinda hurt the AST
[21:03:48] *** Joins: tmh (e@180B7532.123B3C13.AA32EE5B.IP)
[21:03:54] <pauls> eddyb: yeah.
[21:04:12] <eddyb> we need an AST generic over a HKT
[21:04:21] <kmc> :O
[21:05:05] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[21:05:23] <eddyb> ast<<T> T>>::Ident would be our Ident
[21:05:41] *** Joins: chridou (chatzilla@moz-5969906.dip0.t-ipconnect.de)
[21:05:57] <eddyb> ast<MaybeMacro>::Ident would be an enum with Macro(...) or NotMacro(Ident)
[21:06:21] <eddyb> librustc wouldn't have to care much for the MaybeMacro stuff
[21:06:37] <eddyb> but it's hard to do folding with different types... *meeeh*
[21:06:44] <kmc> maybe I can make OwningStrSlice safe by exporting only  fn slice(&'a self) -> &'a str
[21:06:54] <eddyb> bitfields in pointers meh
[21:07:00] <eddyb> s/meh/pls
[21:08:05] <eddyb> like, if the SyntaxContext has LSB set, it's a macro invocation and (Name << 32 | SyntaxContext) & !1 is a pointer to its body
[21:08:19] <pauls> D :
[21:08:23] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[21:08:24] <leeks> what is a hkt? i keep seeing it
[21:08:38] <eddyb> pauls: okay, so ident macros are dead in my world, thanks
[21:08:55] <eddyb> match arm macros? hmm
[21:09:07] <eddyb> now I wish match arms would be simple expressions
[21:09:17] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Quit: WeeChat 0.4.3)
[21:09:27] <eddyb> (for very twisted reasons)
[21:09:31] <eddyb> leeks: higher kinded type
[21:10:08] <glaebhoerl> leeks: i.o.w. generic types. HashMap, [], Vec, Option, Result, etc. are higher-kinded types
[21:10:54] <eddyb> well, <T> [T]
[21:11:09] <glaebhoerl> "HKT" refers to being able to abstract over generic types themselves, not just fully-instantiated types (so a type parameter might be HashMap itself, and not HashMap<int, ~str> for example)
[21:11:16] <eddyb> [_] is almost ambiguous
[21:11:46] <seanmonstar> is it possible to declare a more "specific" impl that should be used instead of a more generic one?
[21:11:52] <eddyb> nope
[21:11:54] <glaebhoerl> eddyb: [_, ..N] to be more correct about it
[21:12:00] <eddyb> glaebhoerl: why?
[21:12:06] <eddyb> [T] is a type under DST
[21:12:09] <seanmonstar> like, all fmt::Show auto impl ToStr, but what if i wanted ToStr to be different?
[21:12:09] <leeks> awesome, i think i get it. Thanks guys
[21:12:21] <glaebhoerl> (I wasn't assuming DST)
[21:12:22] <eddyb> seanmonstar: than Show?
[21:12:26] <seanmonstar> eddyb: yea
[21:12:38] <eddyb> seanmonstar: and you want to keep the two of them?
[21:12:48] <eddyb> seanmonstar: usually the solution is to change the Show implementation ;)
[21:12:58] <eddyb> glaebhoerl: DST is definite, unlike HKT or VG
[21:13:03] <seanmonstar> eddyb: yea, i'd use Show for debugging, and to_str for printing to a file or something
[21:13:05] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:13:05] *** ChanServ sets mode: +ao brson brson
[21:13:18] <seanmonstar> but this is really just a super simple example i chose, so dont pick over the semantics of Show vs ToStr :D
[21:13:24] <eddyb> seanmonstar: *sigh* this is why we need to keep {:?} around in one form or another
[21:13:31] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:13:37] <eddyb> Show is not really for debugging
[21:13:50] <seanmonstar> thats not what im interested in
[21:14:30] <strcat> seanmonstar: Show and ToStr are intended to be the same
[21:14:46] <strcat> if you want another form of printing you're free to implement it side-by-side
[21:14:53] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[21:15:10] <seanmonstar> :/
[21:15:11] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[21:15:23] <strcat> eddyb: I don't think {:?} is useful now
[21:15:33] <strcat> eddyb: too many things use Vec, HashMap, etc.
[21:15:34] <eddyb> yeah, I mean, something like DebugShow
[21:15:39] <strcat> but why?
[21:15:49] <strcat> I don't see why everyone wants every possible thing to use a trait
[21:15:49] <seanmonstar> my real situation is i've made `impl<T: Encodable> ToJson for T`. makes all encodables auto-impl ToJson. but what if i wanted to customize the ToJson of a struct... i cant?
[21:15:52] <eddyb> because sometimes I want to peek at things without a debugger
[21:16:01] <eddyb> strcat: because uniformity
[21:16:04] <eddyb> and deriving
[21:16:27] <eddyb> seanmonstar: you customize the Encodable of your struct ;)
[21:16:29] <strcat> you aren't going to want a bunch of debug code being expanded/built as part of the lib
[21:16:34] <strcat> so the stdlib isn't going to have DebugShow impls
[21:16:36] <eddyb> strcat: hmm
[21:16:39] <strcat> so you won't be able to derive it
[21:16:53] <eddyb> maybe a different crate which includes libstd impls?
[21:17:03] <strcat> why not just use Show?
[21:17:05] <eddyb> idk hard issue
[21:17:11] <strcat> DebugShow isn't going to always print what you need for debugging either...
[21:17:14] <eddyb> strcat: because it doesn't give you all the details
[21:17:21] <seanmonstar> as for Show vs ToStr, they seemed like to_repr() vs to_str() for me
[21:17:21] <strcat> neither does any implementation of DebugShow
[21:17:23] <eddyb> I guess we should just push for lldb
[21:17:27] <strcat> it will never give you everything you could ever want
[21:17:27] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:17:33] <eddyb> and make that amazing for rust debug
[21:17:33] <strcat> yes, that's what debuggers + debugger scripts are for
[21:17:48] <strcat> seanmonstar: well they're not
[21:17:54] <strcat> seanmonstar: you misunderstood what they are
[21:17:54] <eddyb> seanmonstar: no, to_repr is {:?}
[21:18:01] <eddyb> which we kinda want to burn down
[21:18:11] <strcat> it's burning itself down
[21:18:14] <eddyb> hehe
[21:18:21] *** Quits: leeks (Mibbit@moz-362CDC0.fttp.sta.comporium.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:18:21] <eddyb> seanmonstar: it's derived similarily so it doesn't omit information
[21:18:24] <seanmonstar> i fail to understand why you'd have both Show and ToStr 
[21:18:31] <eddyb> because ToStr is ancient
[21:18:44] <eddyb> we might remove it at one point (didn't we want to?)
[21:18:52] <strcat> it's there for compatibility
[21:19:07] <strcat> it can be removed but that's work
[21:19:14] <eddyb> maybe we should deprecate it and measure the damage?
[21:19:15] <strcat> there's endless work to do
[21:19:19] <seanmonstar> ah. could the docs say "stop using ToStr, use Show"
[21:19:53] <strcat> eddyb: well you could just make a generic to_str function
[21:19:58] <strcat> but ~str is going to go away so...
[21:20:23] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[21:20:41] <seanmonstar> also, i've been searching the intertubes for a few days, and can't find a coherent explanation of how ~[] is becoming vec_ng, or what even ng is
[21:20:51] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[21:20:52] <eddyb> nextgen
[21:20:52] *** Joins: maxli1 (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[21:20:53] <seanmonstar> next gen?
[21:21:03] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[21:21:08] <eddyb> ~[T] is being removed
[21:21:16] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[21:21:21] <eddyb> because it will mean ~([T]) under DST (parens for emphasis)
[21:21:31] <seanmonstar> all usage of brackets for lists being removed?
[21:21:38] <eddyb> nope
[21:21:44] <seanmonstar> just owned ones?
[21:22:00] <strcat> [1, 2, 3] is certainly 'owned' too
[21:22:04] <eddyb> I actually wanted vec![...] for the macro but nobody did the 10 line fix for allowing it
[21:22:08] <eddyb> s/owned/~/
[21:22:28] <glaebhoerl> eddyb: hm actually I have that in a branch
[21:22:35] <eddyb> glaebhoerl: push push push
[21:22:37] <eddyb> PR pls :D
[21:22:47] <glaebhoerl> ok :)
[21:23:05] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[21:23:09] <eddyb> pauls: oh, right, the main one I wanted was type macros. and that shouldn't bloat the AST too much
[21:23:17] *** Joins: marianoguerra (marianogue@moz-184D29F5.dip0.t-ipconnect.de)
[21:23:24] <glaebhoerl> I was deterred by not being sure how well-received it would be + it takes 2 hours to bootstrap + wasn't sure how to modify the tests
[21:23:38] <seanmonstar> was there a blog post or rfc regarding ~[T] -> Vec<T>?
[21:23:49] <eddyb> glaebhoerl: two hours? why would you do that?
[21:23:50] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[21:23:53] <glaebhoerl> eddyb: you tell me: what kind of tests should I add? see huon's tests here: https://github.com/huonw/rust/commit/dac8b3c6f5c404fa3ffedbef34f5359a2c6b7c56
[21:24:00] <strcat> seanmonstar: yes, this is ongoing for 6+ months
[21:24:11] <glaebhoerl> eddyb: do what? build and test the code I wrote?
[21:24:17] <strcat> there are several mailing list threads, several blog posts, several issues
[21:24:31] <seanmonstar> strcat: yea, ive been lurking for a couple months, and seen it slowly progress, but i've missed the beginning, so i dont know the why
[21:24:56] <eddyb> glaebhoerl: it takes less than 30min to build stage1 and play a bit with it
[21:25:33] <glaebhoerl> eddyb: yeah but isn't there this policy that you need to build + run all tests before submitting? :)
[21:25:35] <eddyb> glaebhoerl: also, duplicate this test src/test/run-pass/macro-with-braces-in-expr-position.rs and wait for someone to tell you about compile-fail tests
[21:26:05] <eddyb> glaebhoerl: if you are sure you didn't break anything, building rustc is enough
[21:26:17] <eddyb> or just libsyntax. travis tells you the simple stuff
[21:26:26] <eddyb> glaebhoerl: the policy is there to not waste bors time
[21:26:37] <eddyb> and/or reviewers' time
[21:26:52] *** Quits: echristo (echristo@3246441A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[21:26:56] <eddyb> I can't technically build stdtest on this machine anymore, for example
[21:27:18] <glaebhoerl> I see. TIL :)
[21:27:21] *** Quits: flan3002 (flan3002@moz-4090ED07.dip0.t-ipconnect.de) (Quit: Lost terminal)
[21:27:28] <eddyb> barely building librustc peaking at 1.5GB
[21:27:43] <glaebhoerl> is a vec! macro something that already exists?
[21:27:47] <eddyb> glaebhoerl: yes
[21:27:55] <eddyb> glaebhoerl: once you allow [...] it should just work
[21:28:12] <eddyb> https://github.com/mozilla/rust/pull/12735 this wass mostly done by stopping the librustc build immediately after lints
[21:28:44] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[21:30:47] *** Quits: jackneill (jackneill@moz-5AD26CED.pool.digikabel.hu) (Ping timeout)
[21:31:06] *** Havvy is now known as Havvy|shower
[21:31:39] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:32:10] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[21:32:28] *** Joins: tomh- (uid501@moz-E77DEB21.irccloud.com)
[21:32:52] <nstdloop_> rust's module system has me lost
[21:33:00] *** nstdloop_ is now known as nstdloop
[21:33:14] <mcpherrin> welcome to the confused party!
[21:33:44] <sfackler> nstdloop: what's up?
[21:33:57] <nstdloop> I've written a file, common.rs, and in it put a mod common { .. }
[21:34:07] <nstdloop> How do I compile this
[21:34:17] <sfackler> what do you want to end up with?
[21:34:24] <strcat> nstdloop: mod foo { /* contents */ } defines a module inline in that file
[21:34:37] <nstdloop> I want to be able to do extern mod common; then import things from that in other files
[21:34:39] <strcat> nstdloop: mod foo; is equivalent to mod foo { /* contents of foo.rs */ }
[21:34:52] <nstdloop> strcat: Ah.
[21:34:56] <strcat> nstdloop: just use 'mod common;'
[21:35:27] <strcat> extern crate is for including a library you're going to link against
[21:35:37] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:35:37] <strcat> not a module that's part of the current library/executable
[21:37:48] <nstdloop> Now I've got "circular modules: common.rs ->common.rsmod common;"
[21:38:09] <strcat> I don't know what you're doing
[21:38:15] <strcat> you can't include common as a module inside itself
[21:38:16] <eddyb> don't put "mod common;" in "common.rs"
[21:38:32] <nstdloop> I have a file common.rs. I would like to include things from it in other files.
[21:38:35] <eddyb> put "mod common;" in another file
[21:38:39] <strcat> mod foo { /* module contents */ } defines a module
[21:38:49] <strcat> rusti: mod foo { pub fn bar() {} } foo::bar()
[21:38:49] <eddyb> (but just one other file, not more than one)
[21:38:51] -rusti- ()
[21:39:04] <strcat> that mod statement actually defines the module
[21:39:11] <nstdloop> eddyb: I can't use common in more than one file?
[21:39:14] <strcat> if you leave off the block and use mod foo; it loads it from a file instead
[21:39:27] <strcat> nstdloop: you shouldn't include it via mod in multiple files
[21:39:34] <strcat> you should include it with a single mod statement
[21:39:53] <strcat> look at an example like one of the libraries provided by rust itself
[21:40:02] <nstdloop> Basically I'm doing project euler problems in rust and I have some common functions that I don't want to have to write and test over and over like "primes_upto" or something like that
[21:40:17] <nstdloop> I would like to be able to get those functions after writing them in one place
[21:40:20] <strcat> nstdloop: sounds like you want a crate, not a module
[21:40:37] <strcat> unless you want to recompile them for every project euler solution, or compile every project euler solution at the same time
[21:40:40] <strcat> whenever you change one
[21:40:48] <nstdloop> that sounds bad
[21:40:51] <nstdloop> how do I do THAT?
[21:41:03] <strcat> well you should probably do it as a module first to learn how modules work
[21:41:09] <strcat> before taking the extra step of doing separate compilation
[21:41:23] <mcpherrin> For project-euler sized code does seperate compilation really matter?
[21:41:40] <strcat> mcpherrin: no, but the organization won't make much sense otherwise
[21:41:50] <mcpherrin> I wrote mine as one big module of useful functions with small driver programs for each problem
[21:41:54] <glaebhoerl> eddyb: do/don't the delimiters when using the macro need to match the ones in its declaration?
[21:42:15] *** Quits: mib_3do5j0 (Mibbit@F4489DB3.9747582C.3464FAC3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:42:31] <strcat> mcpherrin: project euler problems don't involve much programming anyway, was just trying to suggest the 'proper' way of doing it since they're using it to learn
[21:42:33] *** Joins: ChrisOei_ (ChrisOei@moz-53A9266A.blurb.com)
[21:42:47] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Connection reset by peer)
[21:42:48] <nstdloop> Ok I got it. I don't out anything special in common.rs and then just do mod common; in the file I'd like to use it in
[21:42:58] <eddyb> glaebhoerl: there isn't delimiters in the declaration :P
[21:43:08] <strcat> nstdloop: yes, and that includes it as mod common { contents of file }
[21:43:35] <nstdloop> Ah. That would be bad if I put it in many files because it would recompile every time.
[21:43:36] <nstdloop> Right?
[21:43:58] <strcat> if you care about that, you wouldn't normally want to do it
[21:44:03] <strcat> but as mcpherrin said it's not going to be a lot of code
[21:44:13] <strcat> mcpherrin: you'd use extern crate common;
[21:44:15] <strcat> er
[21:44:17] <glaebhoerl> eddyb: https://github.com/huonw/rust/commit/dac8b3c6f5c404fa3ffedbef34f5359a2c6b7c56#diff-b3163bdc48d40e843b861febb1978bceR15 this here has macro_rules! spawn { }
[21:44:18] <strcat> nstdloop: *
[21:44:23] <nstdloop> Yes.
[21:44:27] <nstdloop> What's the right way to do it?
[21:44:29] <glaebhoerl> while libstd/macros.rs has macro_rules! vec( ... )
[21:44:38] <eddyb> glaebhoerl: it doesn't matter
[21:44:38] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[21:44:48] <eddyb> I don't know why we allow both
[21:44:54] <glaebhoerl> ok. I thought it wasn't an accident that spawn is both declared and used with { }
[21:45:00] *** Quits: joone (joone@E10A1781.2160464A.A34EC3BB.IP) (Ping timeout)
[21:45:16] <nstdloop> strcat: I'm on 0.9, so extern crate ... gives me a syntax error.
[21:45:20] <strcat> extern mod then
[21:45:22] <glaebhoerl> fwiw, I think they *should* have to match, but the fact that they don't makes my job easier atm :)
[21:45:27] <nstdloop> strcat: Is there a difference?
[21:45:41] <strcat> between extern crate and extern mod? no, it was just renamed
[21:45:45] <eddyb> glaebhoerl: you might be able to define the macro using [...]
[21:45:53] <eddyb> glaebhoerl: since macro_rules is a macro itself ;)
[21:45:56] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[21:46:02] <nstdloop> Now it says "can't find crate for common"
[21:46:07] *** Joins: joone (joone@moz-C0B99C91.jf.intel.com)
[21:46:09] <strcat> nstdloop: because you need to compile it
[21:46:15] <nstdloop> so how do I compile it as a crate?
[21:46:15] <strcat> put #[crate_id = "common"]; in common.rs
[21:46:18] <strcat> and compile it with rustc
[21:46:21] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:46:23] *** Quits: nkoep (nik@moz-DF807B9A.pool.mediaways.net) (Quit: Leaving)
[21:46:48] <strcat> and then you can compile against it (you'll need to pass -L . when compiling against it so make rustc search for crates in the current dir)
[21:47:13] <strcat> anyway the difference between mod and extern mod is that extern mod links against a library rather than compiling it as part of the current crate
[21:47:29] <nstdloop> strcat: rustc can't find it itself by looking for common.rs?
[21:47:36] <strcat> don't know what you mean
[21:47:41] <strcat> rustc common.rs will work
[21:48:03] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[21:48:16] <strcat> when you're including it in another crate via extern mod, it's not looking for source code
[21:48:24] <eddyb> *extern crate
[21:48:32] <nstdloop> eddyb: 0.9 here :(
[21:48:39] <eddyb> why?
[21:48:51] <eddyb> there is only one valid excuse, are you in that class?
[21:48:57] <nstdloop> eddyb: I don't have the patience/memory to compile by source
[21:49:02] <nstdloop> from*
[21:49:04] <eddyb> what distro?
[21:49:09] <nstdloop> OS X
[21:49:12] <nstdloop> Currently using brew
[21:49:16] <nstdloop> to manage it
[21:49:21] <eddyb> hmpf, do we have nightlies for that?
[21:49:26] <olsonjeffery> hi i asked about this earlier and got no response: im geting this build error on OSX.. https://gist.githubusercontent.com/olsonjeffery/9555484/raw/af3e5c47aeffa5160f2e1474113b8d05d1fde56d/spew
[21:49:38] <olsonjeffery> had this code working previously w/ rustpkg.. but i switched to rust-mk and its choking on the linking
[21:49:47] <eddyb> nstdloop: you can do what I told someone else to do... it's a hack but it gets you a week old build
[21:49:54] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:49:57] <strcat> olsonjeffery: there's no libSDL2.so in your library search paths
[21:50:03] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:50:03] <nstdloop> strcat: I have to pass this as a compile-time option? I can't put this in the file somehow?
[21:50:09] <nstdloop> compiler*
[21:50:28] <olsonjeffery> look like rust is inserting the -lSDL2 instruction, which is wrong for my osx setup, where it should be using framework
[21:50:41] <nstdloop> eddyb: what is it?
[21:50:45] <strcat> olsonjeffery: it does that based on the metadata you put in the file
[21:51:10] <strcat> nstdloop: no, you can't put it in the file
[21:51:16] <strcat> nstdloop: you're making a library
[21:51:33] <strcat> if it was in your configured library search path, it'd find it
[21:51:55] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[21:51:56] <nstdloop> strcat: I mean in the file I would like to import common from. There's no #[] I can put in the file so I don't have to remember where it is when I compile?
[21:52:07] <eddyb> nstdloop: get the source, ./configure; make ./x86_64-unknown-linux-gnu/stage1/lib/stamp.{syntax,green}
[21:52:07] *** Quits: skade (skade@6EE6290F.419529BC.F58CE5CF.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:52:20] <nstdloop> eddyb: What does that do?
[21:52:29] <eddyb> nstdloop: that will build a minimal set of libraries that the snapshot compiler can use
[21:52:36] <strcat> nstdloop: no, because it's not meant for a library to have the location hard-coded
[21:52:55] <eddyb> nstdloop: you can keep adding to that syntax,green list, in case you need more bundled crates (like rand)
[21:53:05] <strcat> you would use build system (like a simple Makefile) to automate rebuilding when you touch something
[21:53:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:53:21] <eddyb> nstdloop: the excutable is in ./x86_64-unknown-linux-gnu/stage0/bin/rustc
[21:53:22] <nstdloop> strcat: Ok. I guess that makes sense.
[21:53:32] <eddyb> nstdloop: keep in mind this is for x64 linux, you should adjust for OSX
[21:53:38] <strcat> rustc only builds a single crate, it doesn't have multi-crate capabilities
[21:53:38] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:53:40] <nstdloop> eddyb: I might give that a try.
[21:53:53] <eddyb> nstdloop: (there is one build dir like that created by ./configure, you should be able to find it)
[21:54:04] <eddyb> and it shouldn't build LLVM, AFAIK
[21:54:33] <nstdloop> eddyb: How much RAM should I have free to just build from source?
[21:55:23] <eddyb> 300
[21:55:34] <eddyb> (MB, not spartans)
[21:55:45] <nstdloop> haha ok I can probably spare that for a few hours
[21:55:55] <nstdloop> I'll give that a try and try the hack if it doesn't work
[21:56:00] <eddyb> it only takes 10 minutes
[21:56:04] <eddyb> oh, the hack takes that
[21:56:11] <nstdloop> ah
[21:56:14] <eddyb> building the compiler takes 1.5GB
[21:56:31] <nstdloop> That's a bunch
[21:56:41] <nstdloop> It's worth a try
[21:56:57] <eddyb> nstdloop: if you're patient, you can even manually type in all the crates you need and not get past 100MB of usage - since you don't really need libsyntax, it just has nice dependencies
[21:57:04] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[21:57:18] <eddyb> and -j4 works, now that we have a lot of crates ;)
[21:57:27] <nstdloop> eddyb: I have more ram then patience :)
[21:57:33] <nstdloop> -k4?
[21:57:37] <nstdloop> -j4*
[21:57:53] <eddyb> 4 parallel jobs
[21:57:58] <eddyb> (a make flag)
[21:58:07] <nstdloop> ah
[21:58:08] <eddyb> 4 is a nice number that works on most modern machines
[21:58:21] <nstdloop> eddyb: When do I pass that?
[21:58:47] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[21:58:51] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[21:58:59] <eddyb> nstdloop: to make
[21:59:21] <eddyb> nstdloop: really, don't bother building a full compiler if you don't have the time/RAM
[21:59:41] <eddyb> nstdloop: the hack is just a small part of building the compiler, it's not a different route
[21:59:47] <nstdloop> I have to leave my computer alone for the next few hours anyway, so I might as well try.
[21:59:52] <eddyb> ahh okay
[22:00:21] <nstdloop> eddyb: Any other useful make flags?
[22:00:35] <eddyb> not really... you can pass variables to it
[22:00:43] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:00:50] <nstdloop> ok, here goes then
[22:00:56] <eddyb> like, I do RUSTFLAGS="-Z time-passes" to see progress
[22:01:01] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:10] *** Havvy|shower is now known as Havvy
[22:01:12] <eddyb> and I know how much RAM it uses when compiling librustc, at each pass
[22:01:59] <nstdloop> That's good to know
[22:03:56] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Quit: Leaving...)
[22:04:07] *** Quits: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP) (Ping timeout)
[22:04:40] *** Joins: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP)
[22:04:51] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Quit: Leaving...)
[22:05:42] *** Quits: bvssvni (Mibbit@moz-E289BB64.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:50] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[22:06:46] *** Quits: chridou (chatzilla@moz-5969906.dip0.t-ipconnect.de) (Client exited)
[22:08:51] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Quit: )
[22:08:59] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:09:21] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:11:04] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:12:01] *** Quits: Munchor (munchor@moz-8CFC84AD.yourvserver.net) (Ping timeout)
[22:12:38] *** Joins: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP)
[22:13:16] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:13:28] <kmc> it's kind of annoying that foo is still borrowed inside  match foo.f() { _ => { ... } }
[22:14:06] <kmc> at least for  fn f(&'t self) -> &'t T
[22:14:19] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[22:14:39] <kmc> is this one of those places where the heuristic nature of lifetime inference surfaces?
[22:14:39] <bvssvni> is there any practical reason for this?
[22:14:51] <kmc> practical reason why it's still borrowed, or practical reason to want it not to be?
[22:15:06] <bvssvni> the first, practical reason why it's borrowed
[22:15:43] <kmc> I don't know, but maybe nmatsaki1 does :)
[22:16:08] <bvssvni> oh, do we have clones of him now :)
[22:16:44] <glaebhoerl> only shallow ones unfortunately
[22:18:04] <kmc> I think perfect lifetime inference is undecidable, but it would be cool if we had a heuristic to get this case right
[22:18:48] <eddyb> glaebhoerl: no, moves
[22:18:49] <strcat> kmc: it's control-flow aware but not in that case
[22:18:54] <eddyb> glaebhoerl: the original is dead
[22:18:58] <strcat> kmc: it's not really inference-related
[22:19:04] <strcat> it's borrowck
[22:19:16] <kmc> hmm
[22:19:21] <eddyb> kmc: the issue is "borrow scopes are not always lexical" or something like that
[22:19:26] <glaebhoerl> eddyb: oh. but IRC only enforces linearity dynamically
[22:19:29] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[22:19:59] <kmc> so /msg NickServ ghost is a dynamic borrow failure? :)
[22:20:01] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Quit: nano)
[22:20:36] <eddyb> kmc: no, that's drop(util::replace(&mut old, self))
[22:20:41] <eddyb> wait, no, that's regain
[22:20:53] <eddyb> ghost is like the old Cell's take
[22:20:58] *** Quits: q66 (q66@moz-F33530F2.range109-145.btcentralplus.com) (Ping timeout)
[22:23:02] *** Joins: q66 (q66@moz-F33530F2.range109-145.btcentralplus.com)
[22:24:22] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:25:08] * glaebhoerl finally got through the workweek minutes
[22:25:08] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[22:25:10] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:25:31] *** Joins: sinistersnare (sinistersn@moz-7E48AC93.washdc.fios.verizon.net)
[22:26:38] *** Joins: mawuli (mawuli@moz-EF4254B1.com.gh)
[22:26:43] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[22:28:25] <kmc> eddyb: can you elaborate on "borrow scopes are not always lexical"
[22:28:35] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:28:35] *** ChanServ sets mode: +ao dherman dherman
[22:29:46] *** Quits: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp) (Ping timeout)
[22:29:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[22:30:04] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[22:30:16] <eddyb> kmc: it's just the issue name so you can search for it
[22:30:32] <eddyb> kmc: sorry for being ambiguous
[22:32:04] <kmc> ah ok
[22:32:22] *** Quits: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:32:26] *** Joins: enos (jkingyens@moz-BACC7AE0.dsl.pltn13.sbcglobal.net)
[22:32:55] <eibwen> what algorithm is zlib's `uncompress` function?
[22:33:21] <kmc> i believe it's called DEFLATE
[22:33:23] <mcpherrin> zlib is DEFLATE
[22:33:28] <eibwen> k
[22:33:36] <eibwen> thanks
[22:33:42] <mcpherrin> and DEFLATE is LZ/huffman
[22:33:44] <eddyb> uncompress sounds like gzip though
[22:33:54] <eddyb> (or gunzip)
[22:34:02] <eddyb> which is really just a thin wrapper around DEFLATE
[22:34:14] <eibwen> I guess that's what the module flate does?
[22:34:20] <kmc> zlib stream is a header, a DEFLATE stream, and a checksum https://www.ietf.org/rfc/rfc1950.txt
[22:34:32] <eddyb> eibwen: those functions aren't from zlib AFAIK
[22:34:46] <eddyb> eibwen: i.e. flate does DEFLATE through a different library
[22:34:58] <eibwen> well, it should do the same, no?
[22:35:00] <kmc> but gzip is a different format around DEFLATE, with more information
[22:35:22] <kmc> PNG contains a zlib stream which means it has two different kinds of checksums, with different endianness to o_O
[22:35:26] <kmc> too*
[22:35:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:35:51] *** Joins: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk)
[22:36:14] <eddyb> kmc: yupp
[22:36:17] *** Quits: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:36:27] *** Quits: jviereck (Adium@moz-B0DD26CE.dynamic.hispeed.ch) (Quit: Leaving.)
[22:36:28] <eddyb> I didn't implement checksums in my PNG decoder yet
[22:36:42] <eddyb> you don't *really* need them
[22:36:59] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[22:37:42] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[22:38:09] <homa_rano> how is a &[T] slice represented? pointer and range struct?
[22:38:21] <strcat> (ptr, len)
[22:38:30] *** Quits: mye (mye@moz-3E4EFFAB.dip0.t-ipconnect.de) (Quit: mye)
[22:38:39] <strcat> Vec<T> is (ptr, len, cap)
[22:38:47] <strcat> (the order I'm giving isn't right, just the fields)
[22:39:06] <homa_rano> but ~[T] is a pointer to {len data} struct, right?
[22:39:14] <strcat> homa_rano: ~[T] is deprecated
[22:39:22] <eddyb> and semi-broken in design
[22:39:33] *** Joins: int3_ (int3_@moz-13C8D70.ri.ri.cox.net)
[22:39:37] <homa_rano> interesting, what's the future of owned vectors?
[22:39:48] <strcat> homa_rano: Vec<T> replaces the current ~[T]
[22:39:50] <eddyb> ~[T] will be removed shortly
[22:40:26] <eddyb> and then nmatsakis' tears poured into nrc's DST will make its ashes reborn into a new ~[T]
[22:40:40] <eddyb> (oh dear there's a few kinds of wrong in that sentence)
[22:40:51] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[22:40:55] <Havvy> We need @horse_rust just for that statement.
[22:41:11] <olsonjeffery> wooo got my rust-sdl2 project building for the first time in weeks
[22:41:12] <eddyb> we have that though, AFAIK
[22:41:22] <Havvy> Oh, we do.
[22:41:23] <olsonjeffery> first i got lazy, then rustpkg went away, and then i got distracted
[22:41:31] <eddyb> https://twitter.com/horse_rust
[22:41:49] <eddyb> "Writing a test for the identity function. How did it come to this?" haha that sounds familiar
[22:41:57] <olsonjeffery> \o/
[22:42:17] <eddyb> and the rtabort quotes
[22:42:33] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[22:42:55] <eddyb> "Casting 'Arcane Sight' reveals an overwhelming aura of Transmutation magic."
[22:42:55] *** Joins: newguy (Mibbit@moz-5D4DE9ED.hsd1.va.comcast.net)
[22:43:13] <newguy> is it busy? i have a non rust related question
[22:43:14] <eddyb> oh the deja vu's I can't handle this X_X
[22:43:31] <eddyb> newguy: "it" is not here
[22:43:40] <newguy> lol
[22:43:59] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[22:44:01] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:44:03] *** Joins: Florob (Florob@moz-39532932.de)
[22:44:05] <kmc> just ask, we'll help if we can quickly
[22:44:11] <newguy> where do you guys install your dev tools, frameworks, etc? in the home directory or some folder you put everything in?
[22:44:17] <newguy> just curious
[22:44:22] <strcat> I prefer to help slowly
[22:44:26] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[22:44:31] *** Joins: arielb1 (eran@moz-9CB2889B.red.bezeqint.net)
[22:44:35] <strcat> newguy: I install everything with my system's package manager
[22:44:47] <newguy> strcat: like pip?
[22:44:50] <strcat> no
[22:44:54] <kmc> python-stdeb is nice
[22:45:03] <eddyb> and then my github clones and whatnot go into ~/Projects
[22:45:03] <strcat> the system's package manager, not a language-specific one that's also broken like pip
[22:45:03] <kmc> turns any PyPI package into a .deb
[22:45:05] <strcat> ;p
[22:45:18] <newguy> oh ok
[22:45:22] <strcat> yeah we have stuff like that for cabal, cpan, etc.
[22:45:34] <kmc> when I have to build something outside the OS package manager, I try to put it in its own --prefix= and add it to $PATH, but sometimes I get lazy and do --prefix=~/local
[22:45:40] <Earnestly> strcat: I'd go utterly nuts trying to install anything haskell without cabal :I
[22:45:43] <newguy> the systems package manager handles which directory to put everything in right?
[22:45:50] <strcat> but python packages are usually 2 or 4 lines of build code + the name/version
[22:45:50] <eddyb> --prefix=/usr 4evar
[22:46:01] <mcpherrin> --prefix=~/local/app and my PATH has ~/local/*/bin in it
[22:46:11] <kmc> also I work on Servo, which builds its own copy of rustc, so I use that for everything Rust
[22:46:12] <eddyb> "the hard part is convincing people to put the { in the right place" hehehe
[22:46:20] <kmc> too confusing keeping two versions of the language in my head at once
[22:46:46] <mcpherrin> kmc: clearly we should just put Servo into the rust standard library so it tracks master ;)
[22:46:55] <newguy> if i use pip install, does that install in my working dir or in some other dir that pip handles?
[22:47:04] <strcat> newguy: pip isn't a system pkg manager
[22:47:16] <strcat> it doesn't handle non-python deps
[22:47:19] <Havvy> newguy:  Globally by default.
[22:47:24] <Havvy> You want virtualenv.
[22:47:28] <Havvy> Which ships with pipi.
[22:47:31] <kmc> (also, regarding "you guys", we're not all guys here. I know it's often meant in a gender-neutral way but it's not always received that way. just a friendly reminder :)
[22:47:32] <Havvy> *pip
[22:47:32] <strcat> and it can't cleanly uninstall
[22:47:45] <strcat> I definitely wouldn't use pip outside a workspace
[22:47:50] <eddyb> kmc: peeps
[22:47:56] <strcat> but even then, I'd only be doing that if I needed out-of-date libs ;p
[22:47:56] <eddyb> kmc: rustaceeans
[22:47:59] <kmc> rustacians
[22:48:00] <kmc> haha efb
[22:48:05] <kmc> plus you spelled it right ;P
[22:48:21] <newguy> Havvy: thanks
[22:48:22] <kmc> no, neither of us did
[22:48:28] <mcpherrin> Rustaceans.
[22:48:36] <newguy> Havvy: are there any downfalls to installing globally?
[22:48:42] <eddyb> *sigh* I always have issues with double e's
[22:48:46] <bvssvni> rust-ace-ans
[22:48:57] <huon> glaebhoerl: that spawn macro is used with {} because that's exactly what that commit is adding and needs to be testing
[22:48:59] <eddyb> not rust-a-cee-ans?
[22:49:05] <strcat> newguy: installing globally without using a pkg manager is not a great idea
[22:49:05] <Havvy> newguy:  Project A wants vN of library X and Project B wants version N2 of library X.
[22:49:14] <eddyb> that's how I'd pronounce it (maybe completely wrong)
[22:49:18] <strcat> you'll have untracked files lying around without any dep handling or sane way to remove them ;p
[22:49:21] <Havvy> If installing globally, you cannot work on both projects on the same computer.
[22:49:23] <mcpherrin> Rustacean is pronounced like crustacean
[22:49:31] <Earnestly> Without the ^c
[22:49:41] <strcat> local workspaces are nice because you can just wipe them
[22:49:52] <strcat> when the language-specific package manager screws up as it is bound to do
[22:50:06] <mcpherrin> http://www.merriam-webster.com/audio.php?file=crusta02&word=crustacean&text=\ˌkrəs-ˈtā-shən\
[22:50:09] <newguy> Havvy: im a bit confused, when you say package manager, you mean an OS package manager, not pip right?
[22:50:15] <strcat> (can't satisfy deps or something due to versioned requirements)
[22:50:15] <Earnestly> strcat: But, but, haskell cabal hell. :I
[22:50:21] <SiegeLord> Ideally, the build system will have an uninstall target
[22:50:22] *** Joins: int3__ (int3_@moz-13C8D70.ri.ri.cox.net)
[22:50:26] <strcat> cabal packages auto-convert very well to system packages
[22:50:47] <strcat> arch-haskell auto-converts at least 200 cabal packages with only a dozen needing 1-2 line patches
[22:50:53] <Earnestly> strcat: It's not that they do or don't, it's the deeeepppendencies hell *dies*
[22:50:53] <Havvy> newguy:  I've not used the word package manager.
[22:50:53] <mcpherrin>  Ideally uninstalling is rm -rf some directory :-)
[22:51:01] *** Quits: int3_ (int3_@moz-13C8D70.ri.ri.cox.net) (Ping timeout)
[22:51:04] <Earnestly> strcat: So far only nix seems to manage this
[22:51:09] <SiegeLord> If it's not make uninstall, it's not an uninstall target :P
[22:51:12] * mcpherrin doesn't like unix filesystem layouts
[22:51:12] <strcat> Earnestly: sure, I would never dare to use cabal to install globally
[22:51:16] <Earnestly> strcat: Otherwise you need almost an army to maintainer
[22:51:20] <Earnestly> strcat: Quite
[22:51:20] <Havvy> mcpherrin:  Ideally uninstalling is actually `rm -r ./some-dir`
[22:51:33] <Earnestly> s/to/of s/maintainer/&s
[22:51:36] <mcpherrin> Havvy: I use -f out of anger, not necessity
[22:51:47] <Earnestly> lol
[22:51:48] <newguy> Havvy: sorry for pestering, im a noob
[22:51:55] <strcat> mcpherrin: uninstalling doesn't work that way on windows, it leaves data littered around everywhere ;p
[22:52:06] <mcpherrin> strcat: I didn't say I like windows either
[22:52:12] <strcat> mcpherrin: ideally uninstalling uses a pkg manager so it removes the deps and doesn't need to duplicate them for each pkg
[22:52:16] <strcat> mcpherrin: well, look at nix/nixos
[22:52:18] <strcat> that's ideal.
[22:52:22] <Earnestly> strcat: wine, wineprefixes, rm -rf, problem solved D;
[22:52:31] <mcpherrin> Nixos is as close to good as I've seen
[22:52:45] <strcat> that way you have sharing of deps as much as possible, but with zero conflicts
[22:52:51] <Earnestly> strcat: (I've been thinking about pkgbuild2nix, but I'm not very good at thinking.)
[22:53:11] <newguy> Havvy: If i were to install something like Django using pip, would you suggest doing it per project?
[22:53:19] <strcat> newguy: absolutely
[22:53:21] *** Quits: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net) (Connection reset by peer)
[22:53:21] *** Quits: arielb1 (eran@moz-9CB2889B.red.bezeqint.net) (Ping timeout)
[22:53:24] <Havvy> Definitely
[22:53:30] *** Quits: leowoe (Leo@moz-9517672.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:53:31] <strcat> using a language-specific package manager for global installs is a really, really bad idea
[22:53:35] <Earnestly> Indupidiid... I can't spell it
[22:53:35] <strcat> they shouldn't even support it ;p
[22:53:43] <newguy> i see
[22:53:49] <Havvy> strcat:  npm doesn't. :D
[22:54:14] <strcat> Havvy: well +1 for npm then, but -1 for it still being a language specific pkg manager ;)
[22:54:41] *** Joins: brendan (brendaneic@moz-F75AEEB2.public.wayport.net)
[22:55:11] <Havvy> strcat:  Well, uninstallation is `rm -r node_modules/package-name`
[22:55:20] <strcat> Havvy: it doesn't share deps?
[22:55:38] *** Joins: int3_ (int3_@moz-13C8D70.ri.ri.cox.net)
[22:55:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[22:55:51] <strcat> + what about deps on C and C++ libs
[22:56:06] <strcat> I bet those projects just bundle old insecure versions + rebuild every time
[22:56:17] <strcat> it's a broken, silly idea ;p
[22:56:41] <Havvy> Most of them don't have deps on C and C++ libs.
[22:56:49] *** Quits: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net) (Ping timeout)
[22:56:49] *** Quits: int3__ (int3_@moz-13C8D70.ri.ri.cox.net) (Ping timeout)
[22:57:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:57:02] *** Joins: int3__ (int3_@moz-13C8D70.ri.ri.cox.net)
[22:57:06] <bvssvni> it would be nice to have a standard file format for library dependencies, to put in the repository
[22:57:33] *** Joins: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net)
[22:57:41] <strcat> bvssvni: the file format isn't really the issue
[22:57:44] <strcat> that's a red herring
[22:57:52] <strcat> a .rpm from one rpm distro won't work in another
[22:58:02] *** Joins: matematikaadit (adit@9EE93488.3BEB2EDC.5C21B1A7.IP)
[22:58:25] *** Quits: int3_ (int3_@moz-13C8D70.ri.ri.cox.net) (Ping timeout)
[22:58:34] <bvssvni> I mean, either one fetches the code and build it
[22:58:35] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[22:58:42] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[22:58:46] <bvssvni> or it is installed in a shared folder on the machine
[22:58:58] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[22:59:01] <strcat> not really
[22:59:08] <strcat> nix lets you have per-user package installations
[22:59:26] <strcat> and you can have N versions of a library side-by-side with no conflicts
[23:00:00] <mcpherrin> strcat: Can Nix deal with dependencies installed by another user (or "the sysadmin")?
[23:00:03] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[23:00:05] <mcpherrin> ie, more than one package store
[23:00:05] <strcat> there's such a thing as a source package
[23:00:12] <strcat> mcpherrin: yes
[23:00:14] <Earnestly> mcpherrin: Yep
[23:00:23] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[23:00:37] <mcpherrin> That's one big downside I have with traditional packages --hard for users to add their own without dragging everything else into their personal copy
[23:00:46] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[23:00:51] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[23:00:54] <strcat> mcpherrin: well, zero install also knows how to install system packages via packagekit
[23:00:58] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[23:01:04] <strcat> (or just depend on them if they're there)
[23:01:06] *** Joins: alonlevy (alon@2CD54432.57968636.E9C721AF.IP)
[23:01:07] <strcat> although they might go away ;)
[23:01:22] <Earnestly> With nix, you basically just write a configuration, what packages you need, their configurations (if exposed) and just hit go.  Nix can even build a VM with said packages so you can test it before deploying as well
[23:01:39] *** Joins: int3_ (int3_@moz-13C8D70.ri.ri.cox.net)
[23:01:54] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:01:59] <strcat> mcpherrin: it solves the age old firefox update while firefox is running -> firefox can't close cleanly issue ;p
[23:02:06] <erickt> I think I've been waiting about 5 years for nix to take over the world
[23:02:11] <strcat> since the new version is installed side-by-side and you don't need to rm the old one
[23:02:16] <Earnestly> erickt: :(
[23:02:20] *** Quits: int3__ (int3_@moz-13C8D70.ri.ri.cox.net) (Ping timeout)
[23:02:22] <kmc> likewise
[23:02:25] <strcat> erickt: they used a terrible init system before though ;)
[23:02:34] <Earnestly> Oh snap, indeed
[23:02:39] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[23:02:44] *** Joins: mno2 (mno2@moz-3506EAC7.singnet.com.sg)
[23:04:03] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:04:29] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[23:04:45] <Havvy> erick:  I have a Nix VM.
[23:04:50] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:04:55] <Havvy> And it seemed stable enough to use for dev work.
[23:05:06] <Havvy> (Or am I wrong about that?)
[23:05:11] <strcat> Havvy: it's more than stable enough
[23:05:16] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:05:17] <eddyb> strcat: did they switch to systemd?
[23:05:21] <strcat> eddyb: yes
[23:05:27] <o11c> the thing I don't like about nix is that you can't install it on an existing system without mucking with everything
[23:05:31] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[23:05:35] <eddyb> strcat: I guess they have fancy config versioning for that?
[23:05:40] <strcat> I would trust it more on a server than a distro where upgrading a service wipes out the old version
[23:05:42] <strcat> eddyb: yes
[23:05:45] <eddyb> since it's all directories and paths
[23:05:47] <eddyb> sweeet
[23:05:50] <eddyb> s/paths/files
[23:05:52] <eddyb> (and links)
[23:06:05] <strcat> well
[23:06:13] <strcat> kind of
[23:06:27] <mcpherrin> Amazon's internal build/package thing reminds me a lot of Nix
[23:06:35] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:06:57] *** Quits: newguy (Mibbit@moz-5D4DE9ED.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:07:07] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[23:08:00] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Quit: WeeChat 0.4.4-dev)
[23:08:17] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[23:08:37] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:09:56] <strcat> eddyb: I just can't really take a distro seriously when there are race conditions everywhere ;), but that's fixed now
[23:10:07] <strcat> for example, relying on udev-settle is a joke
[23:10:17] *** Quits: mib_35y9no (Mibbit@moz-3213C615.wavecable.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:10:17] <strcat> debian, ubuntu, etc. don't have true hotplugging yet
[23:10:20] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[23:10:23] <Earnestly> They will soon
[23:10:26] <strcat> they just drain the event queue and assume no more new events will come
[23:10:43] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[23:10:46] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof_)
[23:11:00] <erickt> Havvy: neat
[23:11:18] <strcat> also assume the gpu driver is ready when starting the display manager, or that a network interface is ready when starting up networking, etc. ;p
[23:11:33] <erickt> o11c: hrm, last I played with nix it claimed to be installable on an existing system. I know I've used it on osx
[23:11:43] <strcat> luckily it's slow enough to not hit the races most of the time, or at least not fatal ones
[23:12:17] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:14:04] *** Joins: mib_1kwqoj (Mibbit@moz-3213C615.wavecable.com)
[23:14:27] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[23:15:05] <o11c> erickt: it's *possible*, it's just not *polite*
[23:15:22] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[23:15:26] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:15:26] <mib_1kwqoj> Why does this caues "expected `,` but found `{`"? https://gist.github.com/DarkLinkXXXX/3ad40352ef2ee37529ac
[23:15:45] *** Quits: int3_ (int3_@moz-13C8D70.ri.ri.cox.net) (Client exited)
[23:15:54] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:15:54] *** ChanServ sets mode: +ao brson brson
[23:16:08] *** Joins: int3_ (int3_@moz-13C8D70.ri.ri.cox.net)
[23:16:15] <strcat> mib_1kwqoj: where does it point to
[23:16:17] <o11c> mib_1kwqoj: Point{x: 2, y: 4}
[23:16:21] <bvssvni> mib_1kwqoj: what is the error?
[23:16:26] <mib_1kwqoj> On line 19 particularly. Forgot that part.
[23:16:59] <o11c> mib_1kwqoj: you can't construct a struct without giving the field names
[23:17:49] <mib_1kwqoj> o11c: I did.
[23:17:56] *** Quits: int3_ (int3_@moz-13C8D70.ri.ri.cox.net) (Ping timeout)
[23:19:02] <Earnestly> erickt: Barring the libc and it's version, you can basically install any distro within another distro given their package manager can be built and bootstrapped
[23:20:14] <Earnestly> Because all Linux distros are essentially the same
[23:20:17] <kmc> you can deal with differing libc versions too
[23:20:22] <kmc> with chroots or probably other ways
[23:21:29] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Ping timeout)
[23:22:22] <kmc> you can even install Debian/arm in a chroot on a Debian/amd64 system, then use binfmt_misc to make those binaries run in qemu but talk to the native kernel
[23:22:32] <kmc> and schroot can set this up in like 2 simple commands
[23:23:05] <Earnestly> Yeah, the setup can get quite tricky though, as you're saying
[23:23:16] <o11c> I really ought to do something like that someday ... I haven't done anything more complicated than an i686 chroot on an amd64 host
[23:23:20] <kmc> well, no, I said that schroot will do it for you :)
[23:23:24] <o11c> I don't think I've even done an x32 chroot yet
[23:23:26] <Earnestly> D:
[23:23:33] <o11c> schroot is awesome though
[23:23:58] <kmc> it's way easier than building a cross-compile toolchain, and nearly as fast, or at least fast enough
[23:24:00] <o11c> just, for some purposes, you might want to disable the default bindings for ${HOME} and /etc/passwd
[23:24:15] <kmc> which purposes are those?
[23:24:33] <o11c> (install gentoo in a chroot; the second time you enter, it barfs because the 'portage' user no longer exists)
[23:24:35] *** Quits: Ferreus (ferreus@moz-3AF3AEF1.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[23:24:42] <kmc> heh
[23:25:03] <o11c> and you don't want ~ bound if you're using a chroot for paranoia
[23:25:05] <kmc> the qemulated chroots also give you all your native CPUs and RAM without idling any
[23:25:07] *** Quits: mib_1kwqoj (Mibbit@moz-3213C615.wavecable.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:25:18] <strcat> o11c: you don't want just a chroot if you're paranoid anyway ;p
[23:25:22] <Earnestly> I wouldn't use a^
[23:25:26] <kmc> yep
[23:25:44] <strcat> at the very least you want what chromium does
[23:25:48] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[23:25:48] <kmc> on Linux you need to use chroot + namespaces + cgroups together in some awfully complicated way
[23:25:52] <kmc> I guess that's what Docker abstracts
[23:25:55] <strcat> kmc: it's not complicated
[23:26:03] <strcat> kmc: docker isn't for sandboxing, it's not very good at it
[23:26:11] <kmc> ok
[23:26:20] <mcpherrin> How does docker compare with lxc?
[23:26:27] <mcpherrin> same deal?
[23:26:29] <strcat> mcpherrin: yes
[23:26:37] <Earnestly> docker is just a much nicer ui
[23:26:46] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[23:26:47] <strcat> mcpherrin: docker just has more UX and tooling stuff built around it
[23:27:00] <mcpherrin> Okay, that's kinda what I figured but haven't used docker.
[23:27:01] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[23:27:09] <kmc> FreeBSD jails are pretty cool too I hear
[23:27:13] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[23:27:20] <strcat> kmc: they are, but seccomp makes it much better on linux ;)
[23:27:21] <Earnestly> And nspawn is somewhere inbetween lxc and docker
[23:27:22] <mcpherrin> containers are nice for fault isolation
[23:27:32] <mcpherrin> less so for proper sandboxing
[23:27:35] <strcat> we build arch packages in simple containers with nspawn
[23:27:42] *** flaper87 is now known as flaper87|afk
[23:27:43] <strcat> just to avoid accidentally depending on the host
[23:27:55] <o11c> I find it ironic that BSD is the one who goes on and on about security and jails
[23:28:02] <strcat> and to avoid a typo screwing something up on the host ;p
[23:28:07] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[23:28:08] <o11c> but in the end, systemd can't support BSD due to insufficient jailing
[23:28:19] <strcat> o11c: well that's one part of it
[23:28:36] <eddyb> the other part is the linux APIs
[23:28:38] <strcat> the bsds develop everything in one repo anyway, it's closely tied together
[23:28:47] <kmc> all this container / virtualization stuff feels like working around the fact that operating systems failed to deliver on any of their stated goals :/
[23:28:52] <strcat> look at openssh - non-openbsd openssh is a separate project
[23:29:08] <strcat> (in fact, openssh has the best sandboxing *on linux* ;p)
[23:29:17] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:29:28] <strcat> although I'm sure the openbsd people will probably add an equivalent to seccomp at some point
[23:29:29] <Earnestly> Interesting
[23:29:30] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[23:29:37] <Earnestly> strcat: Always playing catchup
[23:29:42] <strcat> they added kernel-mode setting + equivalents to the linux drm/dri stuff
[23:29:46] <kmc> for much of the world, Linux and libc is just a legacy compatibility layer between a hypervisor and a language runtime
[23:29:49] <strcat> so they could use non-root X too
[23:30:05] <Earnestly> We should get rootless X soon with logind 
[23:30:06] * strcat has non-root X atm ;)
[23:30:09] <strcat> Earnestly: we do
[23:30:11] <Earnestly> strcat: How?
[23:30:12] <eddyb> X?
[23:30:14] <strcat> X11
[23:30:16] <Earnestly> strcat: I mean, how did you do it
[23:30:18] <eddyb> deprecate that stuff
[23:30:19] <Earnestly> eddyb: (Xorg)
[23:30:21] <strcat> Earnestly: install xorg from git
[23:30:24] <eddyb> wayland all the way
[23:30:28] <Earnestly> strcat: Ohrly?  hmm
[23:30:30] <Earnestly> Will do
[23:30:33] <strcat> Earnestly: weston in the arch repos already works as non-root
[23:30:35] *** Quits: hoverbear (hoverbear@726D908C.44E18222.E74D50F2.IP) (Quit: Taking a nap.)
[23:30:38] <strcat> don't need weston-launch suid binary anymore
[23:30:40] <o11c> I thought rootless X worked for a long time?
[23:30:45] <strcat> o11c: it worked *in theory*
[23:30:47] <Earnestly> strcat: Lovely
[23:30:50] <o11c> ah
[23:30:55] <strcat> o11c: you had to give inappropriate permissions on devices to make it work
[23:30:58] <eddyb> kmc: that's what linux emulation in a new OS should do
[23:31:07] <Earnestly> o11c: Most of the hacks also involved just given Xorg* all the caps, which is basically the same as root anyway
[23:31:10] <eddyb> kmc: and allow wine to run to get windows "emulation"
[23:31:25] <strcat> o11c: atm, rootless X11 works on openbsd (just started working) and linux with systemd
[23:31:26] <Earnestly> strcat: But, how?  I mean, so you get xorg-server from git, then what?  It just works?
[23:31:38] *** Quits: brendan (brendaneic@moz-F75AEEB2.public.wayport.net) (Quit: brendan)
[23:31:42] <strcat> Earnestly: just make it non-suid, it works
[23:31:45] <eddyb> kmc: everything else should have properly designed APIs and allow future expansion yada yada yada
[23:32:02] <Earnestly> strcat: You don't have any issues with uaccess on input devices and such?
[23:32:05] <strcat> Earnestly: or just try weston right now instead of weston-launc
[23:32:10] <Earnestly> strcat: Hmm
[23:32:12] <strcat> Earnestly: no, they've fixed it in git
[23:32:20] <Earnestly> strcat: (which git are we talking about?)
[23:32:24] <strcat> xorg git
[23:32:24] <kmc> the distinction between user account and root is not important on a typical desktop *nix machine, though
[23:32:26] <Earnestly> Okay
[23:32:40] <kmc> if you can run X as its own user that's something
[23:32:49] <strcat> kmc: it's pretty important because there are many vulnerabilities in a root process not there in a user process, whether or not your user account means everything to you
[23:32:53] <eddyb> kmc: stop caring about X :P
[23:32:53] <Earnestly> strcat: Wow, in weston atm
[23:32:58] <Earnestly> strcat: :O, awesome
[23:33:01] <strcat> Earnestly: yep
[23:33:02] <eddyb> X is... dead
[23:33:05] <kmc> er, weren't we just talking about X?
[23:33:09] <kmc> strcat: how do you mean
[23:33:12] <mcpherrin> WAYLAAAAAAAAAND
[23:33:20] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:33:22] <Earnestly> Well back to X
[23:33:26] <eddyb> heh
[23:34:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:34:14] <Earnestly> strcat: Did you have to rebuild any of the DDX stuff?
[23:34:20] <strcat> Earnestly: I rebuilt everything so...
[23:34:23] <strcat> I don't know
[23:34:24] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[23:34:28] <eddyb> after the CCC presentation... I feel so dangerously insane not switching away from X :P
[23:34:30] <kmc> strcat: another reason is that at some point I'm going to run sudo in a shell belonging to my user in an xterm belonging to my user
[23:34:30] <strcat> I recommend not bothering to do it
[23:34:39] <strcat> kmc: yes sudo is broken, switch to a VT ;)
[23:34:41] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[23:34:54] <eddyb> my sudo doesn't ask for password
[23:34:56] <strcat> kmc: I like application sandboxing though ;P
[23:35:01] <kmc> strcat: I said "typical desktop *nix machine", that's not what people do typically
[23:35:04] <Earnestly> strcat: I'll find out then, I've just build intel's ddx from git
[23:35:05] <eddyb> and the root password is dumb compared to my user password
[23:35:08] <Earnestly> built*
[23:35:10] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:35:22] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[23:35:23] <strcat> kmc: if it's a multi-user machine the dumb non-admin users are least quarantined off
[23:35:36] <Earnestly> strcat: Wait, sudo is broken?
[23:35:41] <strcat> Earnestly: from a security POV
[23:35:47] <Earnestly> strcat: how so?
[23:35:47] *** Joins: brendan (brendaneic@moz-F75AEEB2.public.wayport.net)
[23:35:48] <strcat> anyway, sudo is setuid and has vulnerabilities
[23:35:51] *** Quits: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP) (Ping timeout)
[23:35:53] <strcat> so it's pointless to install it
[23:36:04] <strcat> Earnestly: it's broken *when used for root access*
[23:36:10] <Earnestly> strcat: What's your alternative?
[23:36:10] <strcat> but it's not a well written setuid binary regardless
[23:36:15] <kmc> it's not just the vulnerabilities, it's also that you can't securely go from an untrusted shell to a trusted shell
[23:36:26] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[23:36:28] <kmc> the untrusted shell might give you a fake sudo or just record your password
[23:36:33] <kmc> same for the xterm, etc.
[23:36:37] <eddyb> so zypper is the package manager in suse
[23:36:39] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[23:36:43] <strcat> kmc: well the sudo-for-root use case is pretty broken
[23:36:45] <kmc> also maybe we should wind down the off-topic convo? shrug
[23:36:46] <strcat> kmc: but it's not really what it's for
[23:36:47] <eddyb> I made an alias, sypper, so I don't have to type "sudo"
[23:36:51] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[23:37:29] *** Quits: brendan (brendaneic@moz-F75AEEB2.public.wayport.net) (Quit: brendan)
[23:37:31] <eddyb> I'm super easy to hack, if you can guess my user password (or have a linux/GNU 0day)
[23:37:37] *** Joins: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP)
[23:37:38] <strcat> kmc: the sane use case is something like db-reader user, able to read from the db, and you give people access to the user via sudo
[23:37:45] <strcat> kmc: and you can take away access because they don't have the pw
[23:37:53] <strcat> kmc: but it's not really necessary in 99% of cases
[23:38:00] <strcat> and I find it really weird how desktop distros use it
[23:38:22] * kmc would chat about this more in #rust-offtopic
[23:38:36] <strcat> if no one is currently asking for help here it doesn't really matter ;p
[23:39:03] <kmc> strcat: some people lurk to learn more about Rust; they'll get annoyed and leave
[23:39:12] * strcat shrugs
[23:39:20] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:39:23] *** Joins: brendan (brendaneic@moz-F75AEEB2.public.wayport.net)
[23:39:36] <strcat> I think these tangential security things are related as rust lives in that realm
[23:39:45] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[23:40:12] <strcat> rust-seccomp actually still builds
[23:40:17] <strcat> incredible
[23:40:26] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[23:40:49] *** Quits: bvssvni (Mibbit@moz-E289BB64.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[23:41:29] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[23:41:37] <strcat> kmc: https://github.com/thestinger/rust-seccomp/blob/master/example.rs that's my favourite part of this stuff ;)
[23:42:06] <strcat> kmc: write to stderr there -> process killed (well technically it will just block the syscall and send a signal atm because it's ACT_TRAP)
[23:42:17] *** Joins: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr)
[23:42:24] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[23:42:29] <strcat> I need to autogenerate the syscall definitions as constants so I don't need to write numbers...
[23:42:41] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:43:08] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[23:43:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:44:39] <strcat> kmc: makes me a bit sad that rust needs dozens of syscalls just to get to your main function atm ;\
[23:44:49] <strcat> and lots of that is fairly dynamic
[23:45:37] <strcat> although you can still use a fork-based sandbox
[23:45:40] <kmc> fun fact: Servo has 60 shared libraries and an rpath with 50 entries, so the dynamic linker does several thousand stat() calls at startup
[23:46:20] <FreeFull> kmc: That sounds slow
[23:46:27] *** Quits: marianoguerra (marianogue@moz-184D29F5.dip0.t-ipconnect.de) (Ping timeout)
[23:46:43] <kmc> I'm surprised that it only takes like 20 ms
[23:46:50] <kmc> but yeah, it's something we should fix at some point
[23:47:14] <strcat> chrome's sandbox on windows and OS X still has full access to the entire NT kernel surface area ;p
[23:47:30] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[23:47:31] <strcat> s/NT/
[23:47:41] <strcat> (you can tell I wrote the beginning after ;s)
[23:47:47] <FreeFull> strcat: So if there is a bug in NT, you're still exploited?
[23:47:51] <strcat> FreeFull: yes
[23:48:04] <strcat> on linux (thus, chromeos) it's quite good
[23:48:06] <FreeFull> Now, how would the OS X sandbox have access to the Windows NT kernel area? =P
[23:48:18] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Ping timeout)
[23:48:30] <kmc> aiui a lot of Linux sandboxing stuff was contributed by CrOS
[23:48:33] <strcat> the windows sandbox uses the isolation stuff designed for IE + the token stuff
[23:48:42] <strcat> kmc: afaik seccomp-bpf is the work of google
[23:48:46] <strcat> as is the original terrible seccomp
[23:49:09] <strcat> anyway the chromium sandbox is basically...
[23:49:19] <FreeFull> I use Firefox, which I don't think has a secure sandbox
[23:49:20] <kmc> i thought seccomp mode 1 was introduced for pure compute, SETI@home type stuff, which is pretty much the only thing it's good for
[23:49:34] <strcat> empty chroot + process namespace (it sees itself as pid1) + network namespace (only has a loopback, and not shared with the system) + seccomp blacklist
[23:49:37] *** Joins: pzol_ (pzol@86821BC.DEB41A6D.AADC76B.IP)
[23:49:46] <strcat> the renderer process is *very* locked down with seccomp, other processes not so much
[23:49:53] <strcat> but the renderer is where js/css/html and everything is
[23:50:02] <strcat> FreeFull: firefox doesn't have sandboxing, it needs multi-process first
[23:50:17] <mcpherrin> multiprocess has landed!
[23:50:20] <strcat> kmc: yeah but it's really hard to even use it for that
[23:50:30] <strcat> mcpherrin: process per site instance? or UX/content separation
[23:50:42] <kmc> strcat: why?
[23:50:45] <mcpherrin> ux/content
[23:50:46] <FreeFull> strcat: You probably want a second sandbox outside the browser too
[23:50:55] <kmc> sandboxception
[23:51:11] <strcat> FreeFull: sure, apparmor or just an application sandbox, but it's not incredibly important
[23:51:15] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[23:51:43] <strcat> if they can get out of the renderer sandbox, they can attack a huge kernel surface area
[23:52:00] <strcat> there's pretty much no doubt that various US government organizations have local root exploits
[23:52:06] <strcat> they are common enough
[23:52:11] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[23:52:15] <mcpherrin> strcat: vupen always seems to have one when you need one, so yes.
[23:52:16] <strcat> (and what if one of those employees sells it?)
[23:52:20] <FreeFull> Best thing to do is to use a browser such as Arachne
[23:52:27] <FreeFull> Which they won't have an exploit for =P
[23:52:39] <strcat> anyway that's why the chrome sandbox on windows isn't very impressive
[23:52:56] <strcat> the NT kernel attack surface is enormous - even if you're messing around with all the security tokens and isolation levels
[23:53:04] *** Joins: Savago_ (Savago@moz-679D1D3C.hsd1.ca.comcast.net)
[23:53:20] <mcpherrin> FreeFull: pretty sure obscurity won't help -- I bet somebody skilled can quickly find an exploit :P
[23:53:57] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[23:53:57] *** Savago_ is now known as Savago
[23:53:58] <phil> mcpherrin: it sure provides a nice sense of false security though
[23:54:24] <FreeFull> mcpherrin: Maybe
[23:54:26] *** Quits: Savago (Savago@moz-679D1D3C.hsd1.ca.comcast.net) (Quit: Savago)
[23:54:29] <mcpherrin> Well, you're safe from off-the-shelf malware, which is something enough for most people
[23:54:38] *** Joins: Savago (Savago@moz-679D1D3C.hsd1.ca.comcast.net)
[23:54:41] <strcat> anyway you'll notice chromium on linux has a tiny little chrome-sandbox suid binary to chroot + process/network namespace
[23:54:43] <FreeFull> It doesn't support javascript, and only does an old version of CSS
[23:54:54] <FreeFull> And runs on DOS =P
[23:54:55] <strcat> if and when CLONE_NEWUSER finally matures, it won't need suid (but it's not a big deal)
[23:55:01] <strcat> makes development inconvenient
[23:55:12] <strcat> since a buildbot won't be root, I think they just reuse the same chrome-sandbox on their builders
[23:55:24] <mcpherrin> FreeFull: it's old-school C++ -- we hadn't even discovered how to exploit printf back then
[23:55:36] <mcpherrin> FreeFull: I almost want to take exploiting it as a challenge now
[23:56:06] <FreeFull> You probably wouldn't be storing your sensitive files or anything under DOS
[23:56:31] <FreeFull> And Arachne doesn't have the newest, shiniest SSL
[23:56:33] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[23:56:52] <strcat> kmc: and I can complain about green threads being incompatible with sandboxing ;p
[23:57:02] <strcat> since you need all that complex epoll stuff exposed
[23:57:51] <strcat> you really, really just want read/write to specific pipes that are passed in, and exit_group - *maybe* something else
[23:58:29] <strcat> FreeFull: shumway also needs to mature and actually work
[23:58:50] <FreeFull> strcat: Arachne doesn't do HTML5 either
[23:58:57] <strcat> I mean for ffx
[23:58:58] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[23:59:15] <strcat> because the NPAPI flash is a big opaque blob, so it can't have sandboxing added to it
[23:59:30] *** kimundi is now known as zz_kimundi
