[00:03:11] *** Joins: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net)
[00:25:22] <kmc> yep
[00:25:44] <kmc> most popular / govt-approved algorithms are also quite difficult to implement critically
[00:26:12] <kmc> such as AES (timing side channels), (EC)DSA (imperfect randomness is fatal), etc 
[00:30:02] <Tobba> I wonder if that's intentional
[00:31:04] *** Quits: brson (brson@moz-iu7.mao.34.45.IP) (Quit: leaving)
[00:45:36] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[01:16:17] <kmc> more than one person has alleged it, in the case of DSA
[01:25:28] *** Joins: Lurkin2 (Lurkin@moz-p4efgs.mpls.qwest.net)
[01:28:05] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:29:04] *** Quits: Lurkin3 (Lurkin@moz-p4efgs.mpls.qwest.net) (Ping timeout: 121 seconds)
[01:34:36] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[02:00:16] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[02:05:55] *** Quits: atomic (atomic@moz-th81f8.headstrong.de) (Ping timeout: 121 seconds)
[02:29:22] *** Joins: brson (brson@moz-iu7.mao.34.45.IP)
[02:37:33] *** Quits: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net) (Quit: leaving)
[03:23:21] *** Joins: atomic (atomic@moz-u4o.568.77.185.IP)
[03:24:00] *** Quits: brson (brson@moz-iu7.mao.34.45.IP) (Ping timeout: 121 seconds)
[03:26:09] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[04:01:23] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[05:02:57] *** Quits: Lurkin2 (Lurkin@moz-p4efgs.mpls.qwest.net) (Connection closed)
[05:20:59] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[05:27:21] *** Quits: atomic (atomic@moz-u4o.568.77.185.IP) (Connection closed)
[05:27:33] *** Joins: atomic (atomic@moz-hse8i7.blue.kundencontroller.de)
[06:15:20] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[06:15:47] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[06:16:45] *** Quits: atomic (atomic@moz-hse8i7.blue.kundencontroller.de) (Connection closed)
[06:23:08] <eternaleye> cmr: Ooooh, thanks!
[07:17:42] <eternaleye> Ooh, the mimpid register might make the GNU folks happy
[07:18:11] <eternaleye> >> The 16-bit Source field is used to describe the origin of the processor design and is divided into two categories: open-source repos and proprietary implementations. Values 0x0001–0x7FFE are reserved for open-source projects, while values 0x8001–0xFFFE are reserved for closed-source im- plementations.
[07:20:21] <eternaleye> Oooh, and mhartid's definition has an explicit note about risc-v being carefully agnostic as to platform topology discovery
[07:31:34] *** Quits: bascule (bascule@moz-1u4.6er.243.162.IP) (Quit: leaving)
[07:31:37] *** Joins: bascule (bascule@moz-1u4.6er.243.162.IP)
[07:31:55] <eternaleye> Oh, neat, and traps are now a vector, with one entry for each privilege level *the trap could initiate in*
[07:50:21] <Ilari> Also, Environment call trap from U is bounced via M (yes, granted, transferring it to S is one instruction)?
[07:54:15] <Ilari> (Environment Call trap from U is likely actually handled by S on implementations that do have S)
[07:59:45] <eternaleye> Ilari: Sure, though that's less of a problem than you'd think (even ignoring the M/S single-instruction delegation fastpath)
[07:59:46] <eternaleye> Ilari: Since Linux - on systems that support hypervisors-as-supervisors (which the RISC-V CSR privileges do permit) - just runs the whole kernel in hypervisor (or here, machine) mode
[07:59:47] <eternaleye> Ilari: ARM virtualization is an exception because using the hypervisor as the supervisor doesn't really work, so it installs a miniscule hcall bouncer.
[08:02:46] <eternaleye> Hm, Mbbid might work really well for RISC-V-based GPGPU engines
[08:03:20] <eternaleye> Something like four Hwacha coprocessors hooked up to an Mbbid RV64IA core
[08:03:43] <eternaleye> And then a bunch of those set up like the AMD GCN architecture
[08:48:56] <eternaleye> kmc: Ah, seems they dropped the orthogonal (user, supervisor) permissions on PTEs
[08:49:13] <eternaleye> kmc: see pp. 52-53
[08:49:49] <eternaleye> kmc: Now it encodes permissions in the "type" field of the leaf PTEs, and p. 53 has a table mapping values of that to "effective" permissions
[08:50:50] <eternaleye> kmc: Note that it *does* have "supervisor read, user rx" and "supervisor rw, user rwx" variants
[09:18:21] <Ilari> Yeah, kinda might make some sense to bounce it via M, because implementation always has M, but it may not have S.
[09:19:19] <Ilari> (The possibilities are M, MU, MSU and MHSU)
[09:37:01] <eternaleye> Yup
[09:37:16] <eternaleye> I'm actually looking at implementing my L4-ish OS similarly
[09:37:59] <eternaleye> A "barebones" one that only uses M and only runs U, and then a few "segregated" versions that run in the different sub-levels or support running higher-leveled children in addition to direct U
[09:40:46] <eternaleye> And "direct U" would be more like the "host" Linux system in KVM, rather than Xen "dom0", because it'd have one less level of indirection in actual execution than the virtualized hosts
[09:41:08] <eternaleye> The reason to run "barebones" rather than one that supports multiple S or H is less branching in the hot path
[09:41:38] <eternaleye> If you don't need those features (and with a cap-based L4, you likely won't...) then you might as well skip the cost
[09:42:10] <eternaleye> I also want to support live microkernel up-conversion between those (adding features only), which would make it even less of a concern.
[09:44:22] <eternaleye> ...might also permit downconversion iff the state of the removed feature is currently empty, like dropping multi-H if nothing is running at that level, and multi-S similarly.
[12:26:19] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[15:48:17] *** Joins: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net)
[16:29:26] <Ilari> What could be useful use for trying to develop attacks with formal methods: Trying to attack the heck out of various TLS 1.3 candidates and variants.
[16:34:53] *** Quits: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net) (Quit: leaving)
[17:05:04] <kmc> that sounds like fun
[17:05:08] <kmc> where should i start looking
[17:06:14] <Ilari> TLS 1.3 draft?
[17:09:41] <Ilari> Then there is the "DH-based" proposal, which I feel is too much of a mess to even properly evaluate.
[17:12:41] <kmc> what do you think are the most suspect parts of the TLS 1.3 protocol?
[17:14:37] <Ilari> Well, as the draft is now, interaction with lower TLS versions and dealing with imperfections in various primitives, I think. However, with some of the proposed stuff, the whole thing is such mess that there could be pretty much anything anywhere.
[17:15:53] <kmc> :/
[17:15:58] <kmc> why are they making a mess of TLS once again
[17:16:06] <kmc> I thought 1.3 was supposed to be a cleanup and simplification...
[17:18:13] <Ilari> kmc: Well, 1.3 (as of now) is a MAJOR change. And the draft isn't that much IMO of a mess. It is some proposals that are messy.
[17:20:33] <Ilari> kmc: Also, the various ways to add "0-RTT"...
[17:21:10] <kmc> oh, i didn't know they're going for that
[17:21:13] <kmc> interesting
[17:28:09] <Ilari> Most of the things I don't like are either not going far enough, or fairly small details.
[17:28:28] <Ilari> (Or some messy proposals)
[17:33:56] *** Joins: atomic (atomic@moz-u4m4lu.rev.poneytelecom.eu)
[17:45:41] <kmc> klutzy: how do you feel about using existing C implementations of certain primitives in suruga?
[17:46:42] <kmc> particularly AES, due to timing side channels and widespread hw support
[17:57:02] <Ilari> I have called the handshake serialization "smack-trap".
[18:18:00] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[19:13:41] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[19:14:29] *** Joins: apoelstra (username@moz-pvbasl.net)
[19:16:41] <apoelstra> hi guys, has the API or behaviour of Hmac changed at all in the last 3 months
[19:17:06] <apoelstra> i have some old code that i've finally got compiling (was not since like nov..) and i'm having hmac mismatches in my unit tests
[19:18:28] <Ilari> What library?
[19:22:09] <apoelstra> rust-bitcoin
[19:22:24] <apoelstra> oh, rust-crypto
[19:22:42] <apoelstra> i didn't realize this chan was more general that that
[19:22:58] <cmr> this channel almost never discusses the rust-crypto library
[19:29:07] <apoelstra> oh, i found the bug in my code, i had a bitcount somewhere where i meant to have a bytecount
[20:06:30] <Ilari> Okay, now that one Git repo I have has 200,003 files. :-)
[20:38:48] <Ilari> Apparently there are three subtly different versions of HMAC, with differing security.
[20:52:02] <Ilari> I think one recommends too short keylengths... I don't know what the difference between the other two is...
[20:54:11] *** Quits: geofft (geofft@moz-vfphq1.mit.edu) (Connection closed)
[20:59:13] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[21:01:36] <Ilari> kmc: Featurewise there isn't that many new features in TLS 1.3... 0-RTT, 1-RTT full handshake, dropping non-AEAD and non-DHE, certificate encryption. That's about all.
[21:02:09] <kmc> 0-RTT is a resumption handshake of some kind?
[21:03:33] <Ilari> I presume it only needs having connected to server recently enough, even if not resuming. But I don't think many know what the heck it is actually...
[21:04:02] <kmc> sounds like fun
[21:05:07] <Ilari> I presume it will be keyed by DH result with cached server key, resumption (premaster) secret or PSK key depending on the situation... But I don't think many have even thought about keying the thing.
[21:07:30] <Ilari> Or at least I haven't seen anyone else post any insightful keying analysis...
[21:31:13] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[21:43:05] <kmc> it would be great if Servo could ship with support for only TLS 1.2+
[21:43:17] <kmc> that might be feasible if it ships in a new product that exists alongside Firefox
[21:43:21] <kmc> which is also what Microsoft's doing
[21:43:32] <kmc> of course, Mozilla has no strong brand *except* Firefox
[21:47:01] <kmc> could be a bad idea though
[21:47:20] <kmc> an attacker can easily trick a user into "downgrading" to Firefox
[21:47:51] <kmc> and when that happens you lose not only the new TLS stack but also memory-safe language guarantees generally
[21:49:35] <Ilari> Hmm... At least Chrome has warning about obsolete crypto... But the Chrome does some odd stuff with crypto, like their SHA-1 deprecation, which just seems strange to me.
[21:49:40] <kmc> why?
[21:53:45] <Ilari> E.g. if one has Feb 2015...Feb2017 SHA-1 cert, Chrome (42+) treats it as pretty much invalid (whereas Nov2014...Nov2016 would be OK). Firefox (version?) would just treat the first as Feb2015...Dec2016 cert.
[21:55:45] <Ilari> Difficult to say which is cryptowise better: Firefox lacks fallbacks for most sites, and is planning to disable RC4 for most (IETF consensus of RC4 in TLS is "unfit for any purpose").
[22:03:01] <Ilari> Then there are still one or few valid RSA1024 CA keys...
[22:31:10] <Ilari> And I would think those are much worse threat currently than SHA-1 certs...
[22:50:34] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[23:21:24] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[23:35:16] <klutzy> kmc: yep! in the short term, I'm considering rust-openssl for the aes part. it's a little bit sad since suruga was initially result of yak-shaving :p
[23:36:11] <klutzy> (or whatever with better impl)
[23:57:55] *** Quits: Asandari (Asandari@moz-emp96u.cable.teksavvy.com) (Ping timeout: 121 seconds)
