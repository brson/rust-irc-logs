[00:02:08] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:03:08] *** Quits: dinfuehr (dinfuehr@moz-s7mqcv.highway.telekom.at) (Ping timeout: 121 seconds)
[00:03:11] *** Joins: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net)
[00:03:12] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[00:03:17] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Quit: Konversation terminated!)
[00:03:23] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[00:03:48] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[00:03:50] *** Quits: maximih (maximih@moz-16tklc.k49b.su5n.2002.2001.IP) (Ping timeout: 121 seconds)
[00:03:51] *** Quits: xificurC_ (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[00:05:15] *** Joins: vidot_j__ (vidot_j@moz-3guc0b.abo.wanadoo.fr)
[00:05:18] *** Joins: Luqman (laden@moz-bjmiqc.csclub.uwaterloo.ca)
[00:05:58] *** Quits: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net) (Quit: Leaving.)
[00:06:40] *** Quits: tomprogrammer (thomas@moz-1gbtah.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[00:06:48] *** Quits: dawehner (quassel@moz-jms.k95.62.64.IP) (Ping timeout: 121 seconds)
[00:07:23] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[00:07:34] *** Quits: rick68 (Mibbit@moz-4d3ral.HINET-IP.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:07:36] *** Quits: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[00:08:31] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[00:09:31] *** Quits: geri (Mibbit@moz-u9v2ul.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[00:09:45] *** Quits: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net) (Ping timeout: 121 seconds)
[00:09:50] *** Quits: newbie (eibwen@moz-t09e97.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[00:10:20] <reem> Diggsey: you mean that they can be shadowed?
[00:10:32] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[00:10:37] *** Quits: Cortexz (Mibbit@moz-17l716.access.telenet.be) (Quit: http://www.mibbit.com ajax IRC Client)
[00:10:41] <Diggsey> no, I can seemingly refer to lifetimes outside a macro from within the macro
[00:10:54] <Diggsey> I have an example, one sec
[00:11:25] *** Joins: Cortexz (Mibbit@moz-17l716.access.telenet.be)
[00:11:31] *** Quits: nercury (nercury@moz-ngr949.static.zebra.lt) (Client exited)
[00:12:37] <Diggsey> reem: http://is.gd/fVsKUN
[00:13:00] <reem> ah.. that I‚Äôm not sure about
[00:13:10] <Diggsey> because it's really useful :P
[00:13:53] <reem> macro hygiene is a bit of a wash right now
[00:14:15] <cmr> Diggsey: yeah, that's a bug.
[00:14:17] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:14:39] *** Joins: AngelOfSolLab (Mibbit@moz-qki201.ad.rit.edu)
[00:15:04] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[00:15:32] <Diggsey> cmr: I guess as long as a "lifetime" token is added to macros before the bug is fixed I'll still be able to get this to work by passing in the lifetime separately
[00:16:52] *** Quits: Cortexz (Mibbit@moz-17l716.access.telenet.be) (Quit: http://www.mibbit.com ajax IRC Client)
[00:17:22] *** Quits: vidot_j__ (vidot_j@moz-3guc0b.abo.wanadoo.fr) (Connection closed)
[00:17:58] <AngelOfSolLab> What would be the best way to loop through every pair of elements in a vec?  I came up with this, but I think there might be a better way I don't know about: http://is.gd/BTpbYh
[00:18:10] *** Joins: wikkit (Mibbit@moz-eef.83e.23.84.IP)
[00:19:01] <cmr> AngelOfSolLab: http://bluss.github.io/rust-itertools/doc/itertools/trait.Itertools.html#method.cartesian_product
[00:19:26] *** Quits: tyrion-mx (tyrion@moz-th44la.torservers.net) (Quit: Leaving)
[00:19:39] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[00:20:28] *** Quits: wikkit (Mibbit@moz-eef.83e.23.84.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:20:50] *** Joins: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net)
[00:20:51] <AngelOfSolLab> cmr: That would work if I had different vecs, but I am trying to iterate through one vec and avoid duplicates ie (element 1, element 2) is the same as (element 2, element 1)
[00:20:55] *** Joins: mib_o6y47z (Mibbit@moz-eef.83e.23.84.IP)
[00:21:20] <cmr> AngelOfSolLab: ok, so you don't actually want every pair :)
[00:21:45] <AngelOfSolLab> Just the differenet pairs, my bad.
[00:22:01] *** Quits: mib_o6y47z (Mibbit@moz-eef.83e.23.84.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:22:57] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[00:23:07] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[00:23:41] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:23:51] *** Quits: srh (User@moz-2uv3jo.q9f2.utp8.0306.2602.IP) (Quit: Leaving)
[00:24:13] *** Joins: larhat1 (Adium@moz-tb1ulb.cable.virginm.net)
[00:24:29] <Diggsey> where is the code that handles macros? Github search is failing miserably :(
[00:24:40] *** Parts: talchas (user@moz-8ubbgk.ca.comcast.net) ("ERC Version 5.3 (IRC client for Emacs)")
[00:24:43] *** Joins: talchas (user@moz-8ubbgk.ca.comcast.net)
[00:24:55] <whipsch> macro_rules.rs in libsyntax i believe
[00:25:00] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[00:25:00] <whipsch> under a directory named tt, i'll check
[00:25:01] <cmr> Diggsey: libsyntax/ext
[00:25:06] <whipsch> yeah
[00:25:12] <Diggsey> ty
[00:25:15] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[00:25:20] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[00:25:45] <adrn> AngelOfSolLab: how about this http://is.gd/tvmsVl
[00:26:11] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Quit: )
[00:26:19] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[00:27:37] <aji> is there any way to do something like,
[00:27:43] *** Joins: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net)
[00:27:57] <aji> impl<A, B> Foo for A where A: From<B>, B: Foo
[00:29:02] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:29:14] *** Quits: }ls{ (uhelp@moz-f4ea1i.dip0.t-ipconnect.de) (Quit: User terminated by real life interrupt)
[00:29:19] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[00:29:23] <aji> concrete use case examples could Rand or Default for Foo
[00:29:49] <aji> could be*
[00:30:13] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[00:30:22] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[00:31:04] *** Quits: brson (brson@moz-iu7.mao.34.45.IP) (Quit: leaving)
[00:33:39] *** Joins: yuja (yuja@moz-tvn458.pikara.ne.jp)
[00:34:24] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:35:14] *** Joins: jeffasinger (jeff@moz-u5nog7.res.rr.com)
[00:35:18] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[00:35:35] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[00:36:27] <Selemur> Is it possible to generically implement a (generic) struct?
[00:37:07] <Diggsey> yes, that would be the most common way to implement it:
[00:37:14] <Diggsey> impl<T> Struct<T> { ... }
[00:37:33] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[00:37:35] *** Quits: dpc_ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[00:37:37] <Selemur> ah, I was missing the first <T>
[00:37:39] <Selemur> thanks
[00:37:49] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[00:38:20] *** Joins: wooowe (Mibbit@moz-499ogh.wi.charter.com)
[00:38:34] <patrickod> I'm having yet another unresolved import error, this time w/ the num crate. 
[00:38:40] <wooowe> Hey guys, what does the 'move' keyword mean?
[00:38:53] <patrickod> specifically I'm trying to use num::traits::FromPrimitive, which rustc doesn't know where to find. 
[00:38:53] *** Joins: choplin (choplin@moz-hkulcc.t6mc.g9m6.001a.240d.IP)
[00:39:06] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[00:39:25] <Selemur> wooowe: a move closure takes ownership of its environment
[00:39:27] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[00:39:36] <bluss> AngelOfSolLab: my try, well it's the same as adrn http://is.gd/gBgosZ
[00:39:37] <Selemur> instead of just referencing it
[00:39:49] *** Quits: jeffasinger (jeff@moz-u5nog7.res.rr.com) (Client exited)
[00:39:50] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[00:39:58] <Selemur> move |args| {do_stuff_with_not_arg}
[00:39:59] <wooowe> Selemur: Oh, awesome, thanks!
[00:40:15] *** Joins: Feyn (Feyn@moz-b9v.4n2.115.42.IP)
[00:40:16] <patrickod> the code / docs indicate that num::traits::FromPrimitive is public and should be accessible w/ a use
[00:41:37] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[00:41:45] <patrickod> rust suggests "self::num::traits" instead, but unsure of the importance of this in diagnosing the issue
[00:41:46] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[00:42:55] *** Quits: choplin (choplin@moz-hkulcc.t6mc.g9m6.001a.240d.IP) (Ping timeout: 121 seconds)
[00:43:11] <mindtree> patrickod: it should just be exposed at `num::FromPrimitive`
[00:43:30] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[00:43:52] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:44:15] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Client exited)
[00:44:47] <patrickod> mindtree: same issue w/ unresolved input 
[00:45:03] <patrickod> which is very confusing. I've added an extern crate num; above it 
[00:45:08] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[00:45:36] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[00:46:15] <mindtree> patrickod: the `extern crate num` is in your crate root, yes?
[00:46:51] <patrickod> ah no. it wasn't in src/lib.rs
[00:46:55] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[00:47:08] <patrickod> is lib.rs always the root even for non-library crates
[00:47:09] <patrickod> ?
[00:47:18] <mindtree> patrickod: yep
[00:47:43] <patrickod> ah ok. 
[00:47:54] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[00:49:10] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:49:50] <wooowe> so how would I reference 'self' in  a closure
[00:50:12] *** Joins: glandium (glandium@moz-8d53n2.ocn.ne.jp)
[00:50:21] <wooowe> or lamda, I don't know what rust calls them
[00:50:21] *** Joins: dawehner (quassel@moz-jms.k95.62.64.IP)
[00:50:28] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[00:51:16] <mindtree> wooowe: it really depends on what you're doing with the closure
[00:51:24] *** Joins: laumann (sailfish@moz-n9e72h.0.fullrate.dk)
[00:51:39] <reem> you can‚Äôt currently reference the closure itself from within a closure
[00:51:46] <reem> so it is impossible to write purely recursive closures
[00:51:57] <wooowe> awwww
[00:52:21] <mindtree> oh, I thought you meant a `self` being captured by the closure
[00:52:35] <wooowe> welp, better scratch that then
[00:52:44] <wooowe> sorrry for the confusion mindtree
[00:52:53] <mindtree> all good, my bad :)
[00:53:03] <wooowe> thanks reem
[00:53:15] <wooowe> is there any plans to implement that?
[00:53:23] <reem> wooowe: One thing you can do to get around it is to just create a type and implement Fn/FnMut/FnOnce for it, like so: https://github.com/reem/rust-event/blob/master/src/lib.rs#L54-L68
[00:53:45] <reem> wooowe: however implementing Fn/FnMut/FnOnce requires the unboxed_closures feature gate, so isn‚Äôt accessible on stable rust
[00:53:53] *** Joins: slnpacifist (Mibbit@moz-ba6.no6.243.77.IP)
[00:54:01] <reem> wooowe: there will probably be a way to do it at some point in the future
[00:54:30] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[00:54:31] <wooowe> Awesome, speaking of the future, when is rust 1.0 planned to be released?
[00:54:40] <mindtree> 5 days !!!
[00:54:40] <whipsch> wooowe: just get the address of the closure, and asm! jmp to it
[00:54:42] <whipsch> simple!
[00:55:18] <wooowe> lol whipsch, gonna do that right now!
[00:55:35] <wooowe> wow, 5 days, this is going to be grand
[00:55:41] *** Quits: laumann (sailfish@moz-n9e72h.0.fullrate.dk) (Quit: IRC for Sailfish 0.9)
[00:56:11] <Dabo> wooowe, you could do something like closure1 = |self_closure, x, y| self_closure(...) and then closure2 = |x, y| closure1(closure1, x, y)
[00:56:11] *** Joins: playjax (chatzilla@moz-aod6up.optusnet.com.au)
[00:57:18] <bluss> so basically using a combinator
[00:57:26] *** Joins: ixti (ixti@moz-21k.dae.119.188.IP)
[00:58:03] *** Quits: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net) (Quit: Leaving.)
[00:58:21] <slnpacifist> Hi everyone! Is there an easy way to install beta and nightly version of rust so that both of them are usable and the don't iterfere each other?
[00:58:33] <Dabo> slnpacifist, check out multirust
[00:58:40] <Dabo> https://github.com/brson/multirust
[00:58:56] <slnpacifist> Dabo, thank you
[00:59:51] *** Joins: dinfuehr (dinfuehr@moz-s7mqcv.highway.telekom.at)
[01:00:14] *** Quits: iiixtiii (ixti@moz-21k.dae.119.188.IP) (Ping timeout: 121 seconds)
[01:02:58] <TankC> bstrie, Thanks for the clarification
[01:04:00] *** Quits: dinfuehr (dinfuehr@moz-s7mqcv.highway.telekom.at) (Ping timeout: 121 seconds)
[01:04:33] *** Joins: sellsword (Mibbit@moz-9fugsd.ca.comcast.net)
[01:05:06] *** Quits: sellsword (Mibbit@moz-9fugsd.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:05:13] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[01:05:27] *** Joins: raph (raph@moz-o75.fg7.77.192.IP)
[01:06:00] *** Quits: slnpacifist (Mibbit@moz-ba6.no6.243.77.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:06:26] *** Joins: sin8h (Adium@moz-f0u.cn5.51.106.IP)
[01:08:08] *** Quits: Izacht13 (Izacht13@moz-gee645.atsnmeam.ccmaine.net) (Quit: Leaving)
[01:08:29] *** Joins: zcourts (zcourts@moz-7ms809.cable.virginm.net)
[01:09:15] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[01:10:12] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[01:10:32] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[01:11:02] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[01:11:04] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[01:11:15] *** Joins: mib_7lzare (Mibbit@moz-juv.9o3.252.72.IP)
[01:11:43] *** Quits: larhat1 (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[01:12:04] *** Quits: griff (griff@moz-bf2.sbd.199.62.IP) (Client exited)
[01:12:06] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[01:12:50] <Diggsey> what's the easiest way to get a new lifetime specifier, representing the current scope?
[01:13:00] <reem> Diggsey: no :P
[01:13:11] <Mutabah> Diggsey: Lifetime specifers dont' apply to within blocks
[01:13:11] <Diggsey> :(
[01:13:17] *** Quits: mib_7lzare (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:13:19] *** Quits: mib_2wwidb (Mibbit@moz-05i3a1.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[01:13:20] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[01:13:29] <Mutabah> Diggsey: They're just for within structs/enums and in prototypes
[01:13:39] <reem> Diggsey: what are you actually trying to do?
[01:14:07] *** Joins: chc4 (chc4@moz-mjph4c.ma.comcast.net)
[01:14:19] <Diggsey> I just need any lifetime specifier that is shorter than 'static and encompassing a line of code
[01:14:29] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[01:14:34] <Mutabah> Diggsey: What do you need it for?
[01:14:34] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[01:14:40] <Diggsey> basically I have a value which has 'static lifetime
[01:14:46] *** Joins: bombless (_@moz-qji.piv.41.59.IP)
[01:14:55] <Diggsey> except in reality it has a shorter lifetime, but unsafe code is hiding that
[01:14:59] <reem> elaborate on ‚Äúhas ‚Äòstatic lifetime‚Äù
[01:15:06] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[01:15:19] <Diggsey> well it's generic, but it might be a &'static u32
[01:15:30] <Mutabah> Diggsey: Soo... what, you're converting a raw pointer to a &-ptr?
[01:15:39] *** Joins: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net)
[01:15:43] <reem> so it fulfills the ‚Äòstatic bound or has a lifetime parameter of ‚Äòstatic?
[01:16:03] <Diggsey> yeah, and I need to ensure that the callback I call never sees the static bound
[01:16:35] <reem> have the callback receive something without a ‚Äòstatic bound
[01:16:55] <reem> e.g. F: Fn(T), without a T: ‚Äòstatic anywhere, or a F: for<‚Äòa> Fn(T<‚Äòa>) instead of T<‚Äòstatic>
[01:17:06] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[01:17:21] <reem> so then even if you pass something which is concretely ‚Äòstatic, the callback will only be able to use it according to its bounds
[01:18:11] <Diggsey> even if I use for<'a> Fn(&'a T)
[01:18:31] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Ping timeout: 121 seconds)
[01:18:31] <Diggsey> it would infer 'a to be static
[01:19:03] <reem> no
[01:19:25] <reem> I mean, it won‚Äôt
[01:19:27] <reem> it can‚Äôt
[01:19:28] <Mutabah> Diggsey: Type and lifetime checks happen before generics are expanded
[01:19:28] *** Quits: Porkepix (Porkepix@moz-il9u9l.abo.wanadoo.fr) (Connection closed)
[01:19:53] *** Joins: Porkepix (Porkepix@moz-il9u9l.abo.wanadoo.fr)
[01:21:06] <Diggsey> ok, well if there's definitely no way to exploit it then that works :P
[01:21:10] <Diggsey> ty
[01:21:40] *** Joins: Cortexz (Mibbit@moz-17l716.access.telenet.be)
[01:21:41] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[01:22:21] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[01:22:39] *** Joins: jflash (Mibbit@moz-eimsel.fios.verizon.net)
[01:22:55] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[01:22:57] <aatch> Monomorphisation is simply an implementation detail (well, sort-of, it's possible to write code that only works if you assume that monomorphisation happens)
[01:23:16] *** Quits: sin8h (Adium@moz-f0u.cn5.51.106.IP) (Quit: Leaving.)
[01:23:26] *** Joins: nstoddard_ (nstoddard@moz-ce50ao.dhcp.embarqhsd.net)
[01:23:27] <Cortexz> Heya guys, why do i have to install so much stuff with apt-get just to build something in rust? In go i didnt have install anything. Is rust going to change this in the future?
[01:23:28] <aatch> We actually erase all the lifetime parameters when doing code generation.
[01:23:47] *** Quits: nstoddard (nstoddard@moz-ce50ao.dhcp.embarqhsd.net) (Ping timeout: 121 seconds)
[01:23:52] *** nstoddard_ is now known as nstoddard
[01:24:26] <graphman> Where did u see that you need to install a lot to build smthing in rust ?
[01:24:48] <talchas> Cortexz: I'm /guessing/ this is because it installed build-essential for linkers and such?
[01:24:49] <aatch> Cortexz, well `go` has an entire toolchain in it's distribution. So it's not like go gets away with not having those programs.
[01:24:59] <talchas> while go has massive NIH and reimplemented everything
[01:25:14] <aatch> Cortexz, it just forces you to have duplicates of everything.
[01:25:17] <Cortexz> i had to install - pkg-config, gcc, openssl, build-essentials and something else,, just so i could build the iron framework
[01:25:19] *** Joins: sin8h (Adium@moz-f0u.cn5.51.106.IP)
[01:25:28] *** Joins: Lurkin2 (Lurkin@moz-p4efgs.mpls.qwest.net)
[01:25:56] <Diggsey> Cortexz: the iron framework will have its own dependencies over and above what rust itself requires
[01:25:58] <Mutabah> Cortexz: build-essentials contains most of that, and is the debian development environment
[01:25:59] <aatch> Cortexz, well build-essentials is required for building pretty much anything, Rust or otherwise. Iron uses openssl for https support.
[01:26:03] *** Quits: sin8h (Adium@moz-f0u.cn5.51.106.IP) (Quit: Leaving.)
[01:26:13] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[01:26:19] <reem> Good news is now you have enough to build 99% of rust crates
[01:26:22] <graphman> Cortexz : and all this packages are the must have on a linux dist :D
[01:27:12] <talchas> well, openssl or openssl-dev aren't quite, but are expected for an https-supporting library, rust or go or otherwise
[01:27:20] <aatch> I almost always need most of those tools. So much so that I just add them to the list of packages when doing a fresh ArchLinux install.
[01:27:24] <Cortexz> hmmm k,, im new to compiling,, i wonder how you can build on windows then.
[01:27:56] <Cortexz> if you need all these tools
[01:27:58] <graphman> Cortexz on windows you will need some dll 
[01:28:04] <Cortexz> ah k
[01:28:05] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:28:11] <Diggsey> well, I'm slightly skeptical that this bound will compile: `F: for<'a> FnOnce(<T as WithLifetime<'a>>::Result) -> R`
[01:28:37] <reem> Diggsey: what is WithLifetime?
[01:28:38] <aatch> Diggsey, why?
[01:29:04] *** Quits: Lurkin3 (Lurkin@moz-p4efgs.mpls.qwest.net) (Ping timeout: 121 seconds)
[01:29:07] <jflash> hey guys, i just got into rust and want to get off on the right foot, can someone help me make this small stack implementation idiomatic? https://gist.github.com/JohnAmican/ed9cbfc2d6a66d655552
[01:29:15] <reem> Diggsey: just pass an &‚Äôa T
[01:29:25] <Diggsey> reem: That wouldn't work
[01:29:38] <reem> Diggsey: can you elaborate?
[01:29:54] <Diggsey> WithLifetime lets me do HKT (at least to 2nd order) on lifetimes
[01:30:31] <reem> say a lot more
[01:30:48] <Diggsey> eg. I could have "&'a Struct<'a>"
[01:31:02] *** Joins: JFlash_ (textual@moz-eimsel.fios.verizon.net)
[01:31:13] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[01:31:14] <Diggsey> and then WithLifetime<'b>::Result could convert that to &'b Struct<'b>
[01:31:19] <bluss> jflash: looks good. fn peek should probably use signature  fn peek(&self) -> Option<&T> though
[01:31:21] <talchas> jflash: peek should be &self -> Option<&T>
[01:31:33] *** Quits: JFlash_ (textual@moz-eimsel.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:32:03] *** Joins: vidot_j__ (vidot_j@moz-3guc0b.abo.wanadoo.fr)
[01:32:35] <bluss> jflash: and fn new() should probably create an empty stack like most collections do with new
[01:32:45] <aatch> jflash, also, `new` probably shouldn't take a value. Since you're currently preventing the creation of an empty stack
[01:32:50] *** Joins: __yulin__ (chatzilla@moz-gjt6ht.dynamic-ip.hinet.net)
[01:32:52] <aatch> Dammit bluss 
[01:32:52] *** Joins: huddler (Mibbit@moz-7en4n8.members.linode.com)
[01:33:16] <talchas> for pop() you can probably either do self.top = (*top).prev, or with a temp
[01:33:23] <bluss> hehe so rusties agree
[01:33:33] <Cortexz> If you compile something in rust that requires openssl, and you remove openssl from the machine afterwards. will the compiled pogram still work?
[01:33:44] <talchas> since the branches wind up doing nothing
[01:34:03] <talchas> (and I think you can just do top.prev)
[01:34:05] <aatch> Cortexz, probably not, since it probably links to openssl dynamically.
[01:34:11] *** Joins: elbow_jason (elbow@moz-mb9.cmg.30.50.IP)
[01:34:36] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[01:34:48] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[01:34:54] <aatch> jflash, oh, returning a value from `pop` would be good.
[01:34:55] <talchas> I suppose it's more common for pop() to return the value (or an Option here) too
[01:35:15] <jflash> thanks aatch, bluss and talchas, ill give those things a shot
[01:35:53] <Cortexz> @aatch Hmmm that's pretty annoying... because then you have to install all these programs on each production server
[01:36:48] <cmr> Cortexz: or you could link statically.
[01:36:59] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[01:37:01] *** Joins: derek_c (derek@moz-irsfji.cit.cornell.edu)
[01:38:51] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[01:39:53] <c74d> Cortexz: it's completely normal to need to install dependencies of software (on servers or not); normally one's package manager does that for one, but I guess most/all Rust software isn't packaged for most package managers.
[01:39:55] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[01:40:07] <c74d> (yet)
[01:40:09] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[01:40:20] <graphman> Cortexz : if you link statically it's like if you put all the needed dll/.so/.a in the executable :)
[01:40:32] <graphman> Correct me if im wrong 
[01:40:46] <cmr> It's also possible to distribute the shared dependencies with the application.
[01:40:57] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[01:40:59] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Client exited)
[01:41:05] <cmr> (this is common practice on windows and osx, and with proprietary applications on linux)
[01:41:27] <talchas> and note that on servers and such you would only need openssl and maybe one or two other libs
[01:41:41] <talchas> not build-essential and such
[01:41:45] <graphman> cmd yop . thx to apt and others packages manager for installing all the dependencies 
[01:42:16] <c74d> ‚Äúcmd yop . thx‚Äù?
[01:42:47] <graphman> "cmr yop."*
[01:43:27] <c74d> ‚Ä¶I still don't understand that, but okay.
[01:43:49] <graphman> was just saying "yeah" to cmr then i started a new sentence :D 
[01:44:12] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[01:45:00] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[01:45:25] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[01:45:56] *** Quits: graphman (Mibbit@moz-lq868o.insa-toulouse.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[01:46:26] *** Joins: wei2912 (wei2912@moz-gqk.krr.156.175.IP)
[01:47:15] *** Quits: LRN1 (LRN@moz-63ipbh.nationalcablenetworks.ru) (Connection closed)
[01:48:49] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[01:49:13] *** Joins: thelink2012 (Mibbit@moz-ra3.o3h.183.179.IP)
[01:49:27] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[01:50:25] <thelink2012> why this macro doesn't expand very well? http://is.gd/O8AtyB
[01:50:33] <thelink2012> I tought this expansion syntax was valid?
[01:51:09] *** Joins: stjahns (stjahns@moz-mph.65k.228.207.IP)
[01:51:51] <aatch> thelink2012, statement/expression macros are only allowed to expand to a single thing
[01:52:22] <aatch> thelink2012, so the easiest thing to do is to wrap the RHS of the expansion in braces so it's a single block.
[01:53:02] <thelink2012> aatch: Thanks!! That made it work :)
[01:54:38] <aatch> thelink2012, yeah. it's because with an expression macro, things like `let a = foo!()` need to work. If `foo!` expanded to multiple AST nodes, how do we interpret that?
[01:54:41] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[01:55:44] <aatch> In theory, statement macros could be allowed to be expand to multiple nodes, but given the whole "wrap it in a block" workaround, it's hardly worth it.
[01:55:56] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[01:56:03] <thelink2012> I forgot I was expanding into multiples printlns, poor single line
[01:57:59] *** Quits: carlcolglazier (uid64399@moz-118bsh.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[01:58:33] *** Joins: jdm (jdm@moz-4vu.06r.98.75.IP)
[01:58:33] *** ChanServ sets mode: +o jdm
[01:58:43] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[01:58:53] <Diggsey> is it possible to define a struct within a macro which won't interfere with/be accessible from other code, or other expansions of the same macro?
[01:59:12] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[01:59:34] *** Quits: stjahns (stjahns@moz-mph.65k.228.207.IP) (Connection closed)
[01:59:56] *** Joins: stjahns (stjahns@moz-mph.65k.228.207.IP)
[02:00:00] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:00:01] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[02:00:16] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[02:00:22] <aatch> Diggsey, I'm pretty sure each expansion is it's own context for names.
[02:00:45] *** Quits: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com) (Quit: bye bye!)
[02:00:47] *** Joins: dinfuehr (dinfuehr@moz-s7mqcv.highway.telekom.at)
[02:01:00] <Diggsey> aatch: hmm. I tested and I seemed to be able to access types from outside the macro - 1sec
[02:01:22] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[02:01:32] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[02:02:27] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[02:02:56] <Diggsey> http://is.gd/WdIPIQ
[02:03:02] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[02:03:28] <Diggsey> aatch: I can access `Ty` from main
[02:03:47] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[02:03:50] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[02:03:58] *** Quits: stjahns (stjahns@moz-mph.65k.228.207.IP) (Ping timeout: 121 seconds)
[02:04:02] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:04:37] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[02:04:41] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[02:04:53] *** Quits: dinfuehr (dinfuehr@moz-s7mqcv.highway.telekom.at) (Ping timeout: 121 seconds)
[02:05:15] <aatch> Diggsey, huh, apparently items don't have hygiene.
[02:05:21] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:05:45] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[02:05:54] <Diggsey> aatch: I can't use "concat_ident!" to generate a unique name either, because it can't be used in place of an "ident"
[02:05:55] *** Quits: atomic (atomic@moz-th81f8.headstrong.de) (Ping timeout: 121 seconds)
[02:05:59] *** Quits: Cortexz (Mibbit@moz-17l716.access.telenet.be) (Quit: http://www.mibbit.com ajax IRC Client)
[02:06:01] <Diggsey> *concat_idents
[02:06:15] <Diggsey> surely there's a workaround? :/
[02:07:00] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[02:08:20] *** Joins: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com)
[02:08:23] <FreeFull> I don't think there is one
[02:08:36] *** Joins: cmtptr (corey@moz-csd.obd.59.71.IP)
[02:08:44] <thelink2012> Maybe if you should encapsulate the content in a module named by one of the macro parameters?
[02:08:57] <thelink2012> Maybe you should*
[02:09:05] <cmtptr> how do I get a &'static str out of a *const libc::c_char?
[02:09:13] *** Quits: abique (abique@moz-alq0r9.ko9f.54u1.0e35.2a01.IP) (Quit: Leaving)
[02:09:20] <cmtptr> or something
[02:09:23] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:09:41] <Mutabah> cmtptr: convert to a slice, then use from_utf8 to get a &str
[02:09:45] <cmtptr> better question: how do I turn a *const libc::c_char into something better-suited for safe code
[02:09:58] *** Quits: AngelOfSolLab (Mibbit@moz-qki201.ad.rit.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[02:10:02] <Mutabah> cmtptr: I think the ffi module has a nice way of doing that (via CStr)
[02:10:10] <Diggsey> thelink2012: it's important that it generate as static variable with the "ident" passed in, so I can't use that for the module name
[02:10:12] <cmtptr> ah, I'll take a look.  thanks
[02:10:26] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[02:11:25] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[02:13:54] <Diggsey> thelink2012: Oh, apparantly you can have a module and a struct share the same name...
[02:14:43] *** Quits: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[02:14:46] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:15:01] *** Joins: kimundi_ (kimundi@moz-r46dj7.dip0.t-ipconnect.de)
[02:15:11] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[02:15:24] <kvsari> Hi, can I get curl-sys to use curl 7.42.0-1 instead of 7.39.1-DEV when building? I'm having trouble with OpenSSL headers not matching.
[02:15:39] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[02:16:11] <aatch> Woo, addition, subtraction and multiplication routines done!
[02:16:19] <aatch> Now on to division...
[02:16:39] *** Quits: detsak (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[02:16:58] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[02:17:52] *** Quits: kimundi (kimundi@moz-a3om2j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:17:52] *** kimundi_ is now known as kimundi
[02:18:48] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:19:09] *** Quits: nstoddard (nstoddard@moz-ce50ao.dhcp.embarqhsd.net) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.2/20150415140819])
[02:19:44] *** Quits: lemavri (lemavri@moz-42ek1g.baf.movistar.cl) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[02:19:57] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[02:20:06] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:22:33] *** Joins: casho (Mibbit@moz-gmv.bar.196.189.IP)
[02:22:40] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[02:23:05] <AngelOfSol> bluss: I submitted a PR to itertools, mind taking a look?
[02:23:17] *** Quits: mib_88249y (Mibbit@moz-i7cb3r.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:24:08] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:24:34] *** Quits: casho (Mibbit@moz-gmv.bar.196.189.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:25:04] *** Quits: derek_c (derek@moz-irsfji.cit.cornell.edu) (Ping timeout: 121 seconds)
[02:25:07] *** Joins: rmgk (ragnar@moz-fluuvi.dyn.telefonica.de)
[02:25:16] *** Quits: wooowe (Mibbit@moz-499ogh.wi.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:25:27] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:26:44] *** Joins: mib_z5ky3u (Mibbit@moz-g3d.ik0.127.96.IP)
[02:26:55] *** Quits: mib_z5ky3u (Mibbit@moz-g3d.ik0.127.96.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:28:03] <zzmp> Taking a vector and calling into_boxed_slice means that the boxed vector still has memory allocated for its length, along with its elements. Is there a way to box a dynamically sized element and forget its length?
[02:28:26] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[02:28:32] *** Quits: rmgk_ (ragnar@moz-rtqdl3.dyn.telefonica.de) (Ping timeout: 121 seconds)
[02:28:45] <XMPPwocky> the length needs to be stored somewhere...
[02:29:22] *** Joins: brson (brson@moz-iu7.mao.34.45.IP)
[02:29:22] *** ChanServ sets mode: +ao brson brson
[02:29:24] *** Joins: dpc_ (dpc@moz-t6gr4b.ca.comcast.net)
[02:29:29] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:29:31] <kvsari> Working now. Never mind, forgot to install 'make'.
[02:32:52] <Diggsey> is there a way to place a bound on an associated type, eg. say it can only be filled by types which are Copy?
[02:33:23] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[02:33:28] <XMPPwocky> Diggsey: where clause?
[02:33:35] *** Joins: derek_c (derek@moz-irsfji.cit.cornell.edu)
[02:34:00] <mindtree> Diggsey: type MyType: Copy;
[02:34:06] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[02:34:28] <Diggsey> XMPPwocky: where Self::Result: Copy?
[02:34:35] <Sgeo> Can you make trait objects for arbitrary where clauses? Maybe by making a trait and blanket impl for it?
[02:34:36] <Diggsey> (Result is the associated type)
[02:34:45] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:35:19] <bstrie> is it technically wrong to call Rust's `()` type "void" when explaining Rust to C programmers
[02:35:22] *** Joins: aravindavk (aravinda@moz-t6o.rvv.171.122.IP)
[02:35:31] *** Quits: Guest22 (textual@moz-v8ufgd.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[02:35:31] <thelink2012> How'd a proceed to do something like { let fun = |a| { ... }; b1.set_callback(fun); b2.set_callback(fun); } assuming set_callback takes ownership of the closure. I cannot clone a closure or anything... so hmmm... how'd I get around it if I want b1 and b2 to behave the same way?
[02:36:10] <Diggsey> hmm type Result : Copy; seems to compile, but doesn't enforce the bound
[02:36:38] <zzmp> XMPPwocky but what if I want to store the length as a constant so it is compiled in?
[02:36:43] <thelink2012> Sgeo: Yes, in fact there is some in std::marker for instance such as Send.
[02:36:48] <bstrie> Diggsey: can you file a bug for that?
[02:36:56] *** Joins: lyc (lyc@moz-2oa.us4.25.175.IP)
[02:36:57] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Ping timeout: 121 seconds)
[02:37:07] <bstrie> Diggsey: at the very least it shouldn't accept it if it's not doing anything
[02:37:18] <Diggsey> bstrie: yeah, just let me make sure
[02:37:33] *** Quits: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net) (Quit: leaving)
[02:38:18] <Sgeo> Is there any software that isn't potentially life threatening?
[02:38:31] <Sgeo> I mean, if a bug causes emails to fail to be read, some emails can be important
[02:38:33] <Diggsey> bstrie: oh no, it does enforce it
[02:38:36] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[02:38:50] <Diggsey> my bad
[02:38:56] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:39:56] <bstrie> Sgeo: there's nothing that isn't potentially life-threatening, given enough imagination
[02:39:56] <Sgeo> Wrong channel
[02:40:13] *** Joins: oceanwhit (christianwh@moz-d046r2.res.rr.com)
[02:40:28] *** Joins: choplin (choplin@moz-hkulcc.t6mc.g9m6.001a.240d.IP)
[02:40:34] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Quit: Leaving.)
[02:40:39] *** Joins: Dave (DaveGomez@moz-se6.g01.146.186.IP)
[02:40:53] *** Joins: if_e1se (uid16886@moz-js7dlj.uxbridge.irccloud.com)
[02:40:56] <aji> bstrie: i've seen *mut () and such used where void* would be used in C
[02:41:00] *** Quits: lyc (lyc@moz-2oa.us4.25.175.IP) (Ping timeout: 121 seconds)
[02:41:13] <mindtree> aji: ewww
[02:41:54] <Diggsey> bstrie: unless you're in a universe where there's no life to start with..
[02:42:15] <mindtree> Diggsey: no life, no compilation :-p
[02:42:32] <Dave> Hello, I'm trying to install racer using the rust installation method from Hombrew but I can't find the Rust src directory to se the RUST_SRC_PATH Racer is asking me to export in my rc file. Does anyone knows where can I find that directory?
[02:42:34] <bstrie> what if computers successfully extinguish all life
[02:42:38] <bstrie> then they can compile all they want
[02:42:47] <bstrie> while not threatening anybody!
[02:43:07] <Diggsey> excellent plan
[02:43:22] *** Quits: dustinm` (dustinm@moz-es6jb7.ip-167-114-152.net) (Ping timeout: 121 seconds)
[02:43:25] <bstrie> Dave: is it just looking for rustc's install directory? I'm not familiar with racer
[02:44:30] *** Quits: choplin (choplin@moz-hkulcc.t6mc.g9m6.001a.240d.IP) (Ping timeout: 121 seconds)
[02:44:35] <aji> mindtree: it was somewhere in std, i'll have to see if i can find it again
[02:44:39] <Dave> bstrie, I don't know, it asks for the .../rust/src/ directory, but I don't have such directory inside the Hombrew/Rust installation
[02:44:46] <thelink2012> Dave: You need to get Rust source code. For instance http://www.rust-lang.org/install.html clicking in the last button (rustc-1.0.0-beta.4-src.tar.gz)
[02:45:03] *** Quits: playjax (chatzilla@moz-aod6up.optusnet.com.au) (Ping timeout: 121 seconds)
[02:45:16] <mindtree> aji: sounds strange, especially seeing as we actually have a libc::c_void type
[02:45:24] <Dave> thelink2012, I see, so I have to add manually
[02:45:33] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:45:35] <Dave> gonna try it
[02:45:43] *** Joins: Guest22 (textual@moz-v8ufgd.fibertel.com.ar)
[02:46:45] *** Joins: lyc (lyc@moz-jft.nr8.226.207.IP)
[02:46:50] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[02:47:11] *** Quits: proc (proc@moz-3fapej.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[02:48:16] <huddler> The enum variant seems vary common . Can be replaced the purpose of enum variant by struct-like enum ? so,why create this.
[02:48:18] *** Joins: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[02:48:35] <aji> ah, mindtree, found it
[02:48:38] <aji> http://doc.rust-lang.org/std/raw/struct.TraitObject.html
[02:49:09] <bombless> playbot: impl () { }
[02:49:10] -playbot- <anon>:9:9: 9:20 error: no base type found for inherent implementation; implement a trait or new type instead [E0118]
[02:49:10] -playbot- <anon>:9         impl () { }
[02:49:10] -playbot- output truncated; full output at: http://bit.ly/1JXL5yY
[02:49:35] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:50:19] *** Joins: lemavri (lemavri@moz-42ek1g.baf.movistar.cl)
[02:50:48] *** Joins: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP)
[02:50:54] *** Quits: lemavri (lemavri@moz-42ek1g.baf.movistar.cl) (Quit: Textual IRC Client: www.textualapp.com)
[02:52:09] <crazysim> I‚Äôm trying to put a [u8] into something that takes a std::io::Read but I can‚Äôt figure out how to tell Rust that the trait *is* implemented. The array comes from include_bytes!().Any ideas? "error: the trait `std::io::Read` is not implemented for the type `&[u8; 9546]"
[02:52:50] *** Quits: erz (erz@moz-n26c5c.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[02:52:51] <Dave> it worked, thanks!
[02:53:04] <Diggsey> crazysim: That's different from a &[u8]
[02:53:04] <geofft> crazysim: &[u8] and &[u8; N] aren't the same type, you may need to suggest to Rust to convert it to a &[u8] 
[02:53:26] <crazysim> geofft: Ah, I guessed that was the case. 
[02:53:57] <Diggsey> also, you should be aware that it will use 10kb of stack space if you have that lying around :P
[02:53:59] *** Parts: cmtptr (corey@moz-csd.obd.59.71.IP) ()
[02:54:12] <crazysim> eh, it‚Äôs just me fooling around. 
[02:54:28] <crazysim> for testing
[02:54:46] <crazysim> some projects seem to use include_bytes! while some seem to just use the fs to read
[02:55:03] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[02:55:04] <crazysim> i‚Äôm not sure how the xml-rs tests are converting that though. 
[02:56:01] <Dave> thelink2012, it worked, thanks!
[02:56:07] *** Quits: Guest22 (textual@moz-v8ufgd.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[02:56:21] <geofft> playbot: let x: Box<std::io::Read> = Box::new(b"hello"); 
[02:56:22] -playbot- <anon>:9:37: 9:55 error: the trait `std::io::Read` is not implemented for the type `&[u8; 5]` [E0277]
[02:56:22] -playbot- <anon>:9         let x: Box<std::io::Read> = Box::new(b"hello"); 
[02:56:22] -playbot- output truncated; full output at: http://bit.ly/1JXLIbH
[02:56:27] <geofft> playbot: let x: Box<std::io::Read> = Box::new(b"hello" as &[u8]); 
[02:56:28] -playbot- ()
[02:56:33] <geofft> crazysim: ^^ 
[02:56:54] <crazysim> üëç
[02:57:04] <thelink2012> Dave: Great! Have fun :)
[02:58:47] <prattmic> Is there a way to specify a default value at array declaration?  I want to make this shorter: let mut buf: [u8; 4] = [0, 0, 0, 0];
[02:59:02] <Diggsey> prattmic: [0; 4]
[02:59:05] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[02:59:17] <Diggsey> or alternatively:
[02:59:27] <crazysim> that did it. I think taking a &[u8] in the arguments like what xml-rs‚Äôs tests are doing in a function casted that. Thanks.
[02:59:30] <Diggsey> let mut buf = [0u8; 4] and omit the type altogether
[02:59:41] <prattmic> Diggsey: great! thanks!
[03:00:07] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[03:00:28] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[03:01:00] *** Joins: mdinger (mdinger@moz-bvk2f4.9bf5.ppaa.0306.2602.IP)
[03:01:15] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[03:01:23] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[03:02:01] *** Joins: tunnuz (tunnuz@moz-qotoi1.optusnet.com.au)
[03:02:09] <tunnuz> Hey there
[03:02:11] *** Joins: srh (User@moz-g3qqf4.public.wayport.net)
[03:02:50] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[03:03:02] *** Joins: chuckguy (Mibbit@moz-oqn1os.users.condointernet.net)
[03:03:09] <mdinger> I was reading the associated types rfc and it states defining 2 add traits such as `impl Add<int, int> for int { ... }` and `impl Add<Complex, Complex> for int { ... }` then you would receive an error about conflicting implementations. I just tried it though and it works: http://is.gd/2okKJL .
[03:03:11] <mdinger> why?
[03:03:58] *** Joins: colinsurprenant (colin@moz-jr5.isa.222.192.IP)
[03:04:01] <chuckguy> is there a faster way to rebuild rustc than just running 'make'? 
[03:04:12] <tunnuz> How costly is a move in Rust?
[03:04:38] <mdinger> i expected i would need to use associated types to do it
[03:04:47] <reem> tunnuz: there are a lot of factors in play there
[03:04:59] <reem> tunnuz: sorry, I misread your quesiton
[03:05:08] <reem> I thought you said ‚Äúa move to rust‚Äù not ‚Äúa move in rust‚Äù
[03:05:10] <tunnuz> for instance, when I match stuff, should I always match against a ref?
[03:05:14] <reem> tunnuz: moves in rust are shallow memcpys
[03:05:30] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Ping timeout: 121 seconds)
[03:05:32] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[03:05:33] <reem> tunnuz: you almost never need to worry about this, just use what is most appropriate from a semantic perspective
[03:05:44] *** Quits: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net) (Connection closed)
[03:06:01] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[03:06:06] <tunnuz> I come from a C++ background, so, for instance, I'd try to use references as much as possible
[03:06:16] <tunnuz> rather than copies or moves
[03:06:38] <tunnuz> (now in C++ with move semantics there are even more things to worry about, or less, depending on what you're doing)
[03:06:46] <det> tunnuz, a Rust move is always a memcpy
[03:07:03] <woboats> `impl<F> Foo for F: AsRawFd` & `impl Foo for Path` are not incoherent. This is because `AsRawFd` is implicitly bound to `Sized`, right?
[03:07:05] <tunnuz> so what's the difference between a move and a copy?
[03:07:12] <thelink2012> Since you cannot have side effects in a move (i.e. you don't impl it by yourself) I guess rustc is able to do much more optimizations about it
[03:07:15] <tunnuz> from the performance standpoint, it's the same right?
[03:07:31] <mindtree> tunnuz: when `move`ing, the original owner no longer has ownership
[03:07:39] <tunnuz> yes yes, but apart from that
[03:07:45] <tunnuz> for instance
[03:07:52] <tunnuz> let's make an example
[03:08:00] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[03:08:16] <minot2> let's make an example! /me raises pitchforks
[03:08:31] <tunnuz> I am trying to use operator overloading to build algebraic expressions that I can reason about
[03:08:54] <tunnuz> so when I add stuff, I need to output different things depending on the type of the stuff I am adding
[03:09:09] <tunnuz> for instance, if I add a constant to a sum, I'd like to modify the sum in place, rather than create a new sum with the constant in it
[03:09:35] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[03:09:45] <tunnuz> but when I match, I can match against a reference to my arguments, or against the arguments themselves (which yields a move)
[03:10:03] <tunnuz> ideally, if I want to modify stuff in place, I need to use references
[03:10:13] <tunnuz> would you suggest to just use moves and let rust optimize?
[03:11:36] <pylos> geofft: in the above example, &[u8; 5] is a fixed sized array and &[u8] is an immutable slice of that array?
[03:11:49] *** Quits: oceanwhit (christianwh@moz-d046r2.res.rr.com) (Ping timeout: 121 seconds)
[03:12:06] *** Quits: adrn (Adrian@moz-o8r38e.or.comcast.net) (Quit: leaving)
[03:13:36] <reem> tunnuz: the only difference between a move and a copy of a Copy type is that a copy of a Copy type does not mark the old destination as unusable to the borrow checker
[03:13:45] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[03:13:56] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[03:14:02] <reem> tunnuz: just let rust optimize, 99.99% of the time it doesn‚Äôt matter
[03:14:09] <reem> there are almost always better things to optimize
[03:14:31] <mindtree> tunnuz: if you're really concerned, you can always output the LLVM IR and check what rustc does
[03:14:38] <tunnuz> ok
[03:14:48] <mindtree> check what gets optimised*
[03:14:55] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[03:15:11] <talchas> well, in a Copy type I don't think you can generate a "move" - what would otherwise be a move is still allowed to access the old location, since it's still logically valid
[03:16:04] <aatch> Having spent a while recently looking at the asm output from rustc, I can attest that it's difficult to out-perform the compiler without significant amounts of work.
[03:16:17] *** Quits: dawehner (quassel@moz-jms.k95.62.64.IP) (Ping timeout: 121 seconds)
[03:16:18] *** Joins: Flying_Squirrel (Mibbit@moz-6q1slp.abo.wanadoo.fr)
[03:16:45] *** Joins: dustinm` (dustinm@moz-1c1j82.fu2o.sj0n.5300.2607.IP)
[03:16:58] <aatch> Like I realised that the only way I could write faster assembly was if I wrote the entire function in assembly.
[03:17:08] <mindtree> it would be nice if there was a gaurantee rustc could make about optimising away moves
[03:17:23] *** Quits: jflash (Mibbit@moz-eimsel.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:17:35] <aatch> mindtree, what do you mean?
[03:17:51] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Quit: Lost terminal)
[03:17:56] *** Joins: alephlambda (alephlambda@moz-bv0.ile.111.199.IP)
[03:18:56] <woboats> When is a trait definition implicitly bound by another trait?
[03:19:02] *** Quits: alephlambda (alephlambda@moz-bv0.ile.111.199.IP) (Quit: leaving)
[03:19:14] *** Parts: Flying_Squirrel (Mibbit@moz-6q1slp.abo.wanadoo.fr) ()
[03:19:16] <mindtree> aatch: if something is `moved`, then there should be no need to even do a memcpy right?
[03:19:18] <aatch> woboats, never?
[03:19:20] <blaenk> never, afaik
[03:19:21] *** Quits: lyc (lyc@moz-jft.nr8.226.207.IP) (Connection closed)
[03:19:32] <woboats> That's what I thought
[03:19:36] <blaenk> for it to be implicitly bound would be like in Go no? what do they call it, structural typing? idr
[03:19:39] <woboats> But I'm very confused about how two traits don't incohere.
[03:19:41] <aatch> mindtree, only if it doesn't actually need to be moved in the first place.
[03:19:45] *** Quits: jxv (jxv@moz-2celrt.res.rr.com) (Quit: BYE)
[03:19:49] *** Joins: jxv (jxv@moz-2celrt.res.rr.com)
[03:19:53] <woboats> Err two impls, I mean
[03:20:04] <aatch> woboats, example?
[03:20:22] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[03:20:23] <woboats> the specific case that has surprised me: `impl<F> Foo for F where F: AsRawFd` and `impl Foo for Path`
[03:20:29] <aatch> mindtree, if I move from a stack location onto the heap, I need to copy some bytes
[03:20:35] <woboats> I thought this was because `AsRawFd` required `Sized`, but it doesn't.
[03:21:16] <aatch> woboats, wait, that *doesn't* complain at you?
[03:21:21] <woboats> http://is.gd/FmZc8W
[03:21:21] <reem> that should definitely error
[03:21:22] <woboats> Yeah
[03:21:33] <woboats> PathBuf will but Path doesn't
[03:21:39] <woboats> I was very surprised
[03:21:46] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[03:21:47] <reem> ooh it‚Äôs because you defined Foo
[03:21:48] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[03:21:58] <woboats> Why does that matter?
[03:22:04] <reem> actually I‚Äôm gonna let aatch take this one since I am not 100% on if this actually should work or not
[03:22:18] <reem> unless they also don‚Äôt know :P
[03:22:20] *** Quits: dpc_ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[03:22:28] <woboats> I'mma just say, I very much like that these don't incohere.
[03:22:30] <mindtree> aatch: right, but that would be the `box`ing (or dynamic allocation) that would require the bytes to be copied, not the `move` itself right?
[03:22:41] <reem> mindtree: the allocation is separate from the copy
[03:22:54] <aatch> mindtree, what if I move into a vector?
[03:23:05] <aatch> Or even into a stack-allocated structure?
[03:23:20] <mindtree> aatch: ahh, of course
[03:23:21] *** Joins: atomic (atomic@moz-u4o.568.77.185.IP)
[03:23:36] <talchas> reem: given that pathbuf does conflict, I don't think it's orphan-check knowledge
[03:24:00] *** Quits: brson (brson@moz-iu7.mao.34.45.IP) (Ping timeout: 121 seconds)
[03:24:15] <talchas> (which I think they meant to get rid of because negative reasoning like that makes non-implementation an API guarantee wrt stability)
[03:24:18] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[03:24:24] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[03:24:48] <woboats> talchas, right, orphan rules being different from what I thought was my first guess.
[03:24:55] <woboats> & then PathBuf didn't work.
[03:25:07] <reem> ooh it‚Äôs because there is an implicit F: Sized bound
[03:25:18] <reem> and Path: !Sized, so F: Sized and Path cannot conflict
[03:25:25] <woboats> Oooh, the implicit Sized is in the type parameter
[03:25:27] <woboats> Not in the trait impl
[03:25:33] <reem> precisely
[03:25:45] *** Joins: choplin (choplin@moz-hkulcc.t6mc.g9m6.001a.240d.IP)
[03:25:53] <woboats> That 'makes sense'
[03:26:09] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[03:26:10] *** ChanServ sets mode: +ao brson brson
[03:26:33] <woboats> Coherence rules are very complicated.
[03:26:37] <blaenk> yeah
[03:26:44] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[03:26:49] *** Quits: Dave (DaveGomez@moz-se6.g01.146.186.IP) (Quit: This computer has gone to sleep)
[03:27:32] <woboats> I really think a way to express that traits are mutually exclusive is really needed to avoid it being a situation where blanket impls cohere with other impls only under weird corner-case situations.
[03:28:04] <tunnuz> also, can I overload the += -= ... operators in Rust?
[03:28:08] <blaenk> what was the point again with method-level `where Self: Sized` on a trait method? I vaguely remember it's so that you don't have to make the entire trait : Sized, right?
[03:28:11] <talchas> I suspect the main question is whether it's better to do that or just make specialization
[03:28:14] <aatch> tunnuz, not at the moment.
[03:28:18] <talchas> since they're pretty similar
[03:28:19] <tunnuz> ok thanks
[03:28:20] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[03:28:44] <woboats> blaenk, yes, so that the trait is still object safe
[03:28:45] <aatch> blaenk, it's so you can have methods that would otherwise make the trait not-object-safe
[03:28:46] <talchas> blaenk: yeah, otherwise non-object-safe fns cause the trait to not be object safe
[03:28:56] *** Quits: thelink2012 (Mibbit@moz-ra3.o3h.183.179.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:28:57] *** Joins: alephlambda (alephlambda@moz-bv0.ile.111.199.IP)
[03:29:29] <alephlambda> Hi, does Rust support shared mutable references? I'm trying to do something like this: http://pastebin.com/ftMNhmak 
[03:29:29] <aatch> I mean, you can work around it by using an extension trait, but `Self: Sized` is nice from an API point of view.
[03:29:59] <blaenk> so you couldn't implement a trait with a method like that on a ?Sized, like str, right?
[03:30:02] <aatch> alephlambda, Cell only allows internal mutability, not sharing.
[03:30:08] <reem> blaenk: yes
[03:30:14] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[03:30:19] <blaenk> yes you cannot?
[03:30:26] <reem> blaenk: you could
[03:30:30] <blaenk> ah okay, how?
[03:30:36] <reem> blaenk: that method is just not applicable
[03:30:46] <woboats> blaenk, you could but it wouldn't be callable
[03:30:49] <blaenk> right but how would you write that out, empty method body? or it would be as if that method didn't even exist?
[03:30:51] <mdinger> i asked about associated types mainly because the rfc states mainly 2 reasons to use them. one seems to be invalid.
[03:30:53] <blaenk> ohh it just wouldn't be callable? ok
[03:30:54] <reem> blaenk: I‚Äôm not sure if that allows you to not write the method definition at all, but you could just panic! since it‚Äôs never callable
[03:31:03] <alephlambda> aatch: Is there a right struct you could point me to?
[03:31:03] <blaenk> so you could actually implement it, but then you wouldn't actually be able to call it
[03:31:10] *** Joins: oceanwhit (christianwh@moz-d046r2.res.rr.com)
[03:31:20] <reem> you‚Äôd be able to call it if you had T: Trait + Sized, but then you couldn‚Äôt instantiate T with e.g. str
[03:31:28] <blaenk> yeah I was mainly wondering about writing the definition, how it accounted for the T: ?Sized, yet the method definition says where Self: Sized
[03:31:32] <aatch> alephlambda, well first, why do you want shared references? Rust deliberately makes it hard to have them.
[03:31:36] <woboats> Can you bound Self on a method arbitrarily, or only by Sized?
[03:31:43] <reem> arbitrarily
[03:31:45] <alephlambda> aatch: Yeah, that's what I'm going for.
[03:32:01] <aatch> alephlambda, ???
[03:32:06] <talchas> hmm, it seems like it just requires you to impl it, but it will error if you try as well
[03:32:32] <blaenk> talchas: regarding my question? see that's what was confusing me
[03:32:38] <alephlambda> aatch: Oh sorry, missed the first few words you typed. This is just an exercise. The last time I worked with Rust was 0.10 or so.
[03:32:59] <blaenk> how you would be able to impl such a trait for e.g. str, how you would handle that method. so effectively you wouldn't be able to impl it on str?
[03:33:02] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[03:33:07] <talchas> alephlambda: if you want that, you generally want Rc<Cell<foo>>
[03:33:12] <talchas> blaenk: yeah
[03:33:19] <aatch> alephlambda, well "shared reference" is just "&"
[03:33:21] <talchas> it's mostly there for trait objects
[03:33:23] <blaenk> ah okay, cool
[03:33:32] <woboats> blaenk, the idea is that you could have some methods that don't require it, and some that do
[03:33:35] <blaenk> aleph wants shared mutable references
[03:33:37] <talchas> and apparently really only there for trait objects atm
[03:33:43] <woboats> So that method would be callable only on implementations for Sized types
[03:33:45] <mindtree> alephlambda: will the data be shared across threads?
[03:33:49] <aatch> alephlambda, it's shared *mutable* reference that needs some extra work.
[03:34:16] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[03:34:23] *** Quits: gingermusketeer (gingermuske@moz-961jk7.compute.amazonaws.com) (Connection closed)
[03:34:23] <mindtree> alephlambda: i'm with aatch on this though, avoid if at all possible :)
[03:34:28] <blaenk> aleph did say shared mutable references from the beginning
[03:34:30] *** Joins: gingermusketeer (gingermuske@moz-b0977j.compute.amazonaws.com)
[03:34:31] <aatch> alephlambda, since you need to have a shared reference (or shared ownership a la Rc), then internal mutability.
[03:34:33] <alephlambda> mindtree: Gotcha. No, though. No threads.
[03:34:45] *** Quits: OtterCoder (quassel@moz-lij.rme.199.67.IP) (Ping timeout: 121 seconds)
[03:34:59] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[03:35:01] <blaenk> woboats: yeah, what I was wondering was, since it's flexible in that way, what would actually happen if you did impl it for a T: ?Sized, how you would even write the definition of such a method where Self: Sized
[03:35:02] *** Quits: dr4yyee (dr4yyee@moz-bgv9e9.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:35:03] <alephlambda> aatch: Yeah. I'll try what talchas said
[03:35:07] <alephlambda> Thanks!
[03:35:15] <blaenk> that is, would you leave it with an empty body? or would you not even include it at all in the impl? etc
[03:36:47] <aatch> blaenk, I don't think you could. I think bounds on Self on methods pretty much require a default impl. Even if it's not an explicit requirement.
[03:37:06] <blaenk> ohh okay
[03:37:26] <aatch> blaenk, you can always make the default impl `unimplemented!()` though.
[03:38:02] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[03:39:01] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[03:39:16] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[03:39:21] <blaenk> yeah you can't impl such a trait for e.g. str like I was expecting, it seems: http://is.gd/V597Nk
[03:40:08] <blaenk> so where Self: Sized is more specifically a convenience where you're assuming the trait: Sized, but you don't want to do that so it remains object safe, and you put wher Self: Sized on the methods that you would otherwise have put on an extension trait, right?
[03:40:19] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[03:40:34] <talchas> blaenk: well, that one works if you remove the where clause (???), but if you make the function dst-unsafe, it'll fail
[03:40:35] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[03:41:03] <talchas> http://is.gd/EpCcld vs http://is.gd/2VvncV
[03:41:04] <blaenk> yeah but the where clause is what I'm looking into specifically
[03:41:18] <blaenk> ohh I see what you mean
[03:41:19] <aatch> blaenk, the best example is `Iterator` where many of the methods take self-by-value.
[03:41:32] <geofft> pylos: [u8; 5] is a fixed-size array. &[u8; 5] is a reference (pointer) to it. &[u8] is a slice (structure containing pointer and length). 
[03:41:38] <blaenk> aatch: ahh
[03:41:47] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[03:42:05] <geofft> &[u8; 5] means, at compile time I know this points to 5 elements. &[u8] means, the slice tells me both what the pointer is and how many elements are there. 
[03:42:10] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[03:42:16] <woboats> blaenk, it depends on the details.
[03:42:30] <woboats> blaenk, you have to be able to implement it in a way that matches the types of the function signature.
[03:42:51] <woboats> blaenk, but panic!()ing in the body does that because then return is unreachable
[03:42:51] <blaenk> yeah, I thought that included the same where clauses, but talchas just showed me that's not necessary
[03:43:04] <blaenk> so you can omit the where clause on the impl, didn't know that
[03:43:22] *** Quits: jdm (jdm@moz-4vu.06r.98.75.IP) (Quit: )
[03:43:23] <woboats> right
[03:43:24] <woboats> http://is.gd/XTdAJi
[03:43:33] <talchas> yeah, I'm not convinced my first link /should/ compile
[03:43:37] <talchas> but it does
[03:43:41] <blaenk> lolo
[03:43:51] <blaenk> </rust>
[03:44:11] <blaenk> cc brson TWiR quote of the week
[03:44:21] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[03:44:32] <woboats> I feel like most languages though one'd be saying "I'm not convinced it should run, but it does"
[03:44:36] *** Joins: tiago3 (tiago@moz-o57a2g.dsl.telepac.pt)
[03:44:37] <pylos> geofft: thanks
[03:45:11] <alephlambda> aatch, talchas, mindtree: So, Rc<Cell<foo>> worked. Uses a shared reference to the cell also worked. However, I got a compile error that I'm not too certain about: http://pastebin.com/3Hszg8pA and the error http://pastebin.com/cTg6dqPm
[03:45:19] <blaenk> I don't know, it's always surprising in rust for me because of how strict it is
[03:45:42] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[03:46:00] <alephlambda> It seems that the order of x, a, and b shouldn't matter.
[03:46:32] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[03:46:32] <blaenk> heh yeah
[03:46:41] <blaenk> lol
[03:47:07] <alephlambda> Uh..so, bug?
[03:47:15] <blaenk> not sure, I haven't used Cell much
[03:47:25] *** Quits: tiago2 (tiago@moz-heb2nr.dsl.telepac.pt) (Ping timeout: 121 seconds)
[03:48:30] *** Quits: oceanwhit (christianwh@moz-d046r2.res.rr.com) (Ping timeout: 121 seconds)
[03:48:58] <talchas> alephlambda: no, that's WAI
[03:49:04] *** Joins: Yeti (Mibbit@moz-cb9mg6.ST.HMC.Edu)
[03:49:25] <alephlambda> talchas: WAI?
[03:49:27] <talchas> when you do that, the objects are destroyed in reverse order of their let statements
[03:49:33] <alephlambda> Ah, okay.
[03:49:42] <blaenk> ohhh :)
[03:49:52] <blaenk> WAI = RAII with a lisp
[03:50:01] <talchas> no, working as intended :P
[03:50:06] <blaenk> haha
[03:50:20] <talchas> so if you do the let x last, the Vec drop() calls might read from x, and that would be a bug
[03:50:27] <alephlambda> haha okay. thanks. that makes sense.
[03:50:42] <alephlambda> Is there a reason the compiler can't rearrange obvious ones cases like that one?
[03:50:51] <blaenk> eh
[03:50:55] <alephlambda> (Like, does it rapidly become undecidable?)
[03:51:04] <alephlambda> (Many fun things do.)
[03:51:12] <talchas> (if you need mutually recursive stuff, you can do let (x, y) = (Cell::new(), Whatever::new()), and then they're required to not have relevant Drop impls or something)
[03:51:17] *** Quits: yuja (yuja@moz-tvn458.pikara.ne.jp) (Ping timeout: 121 seconds)
[03:51:31] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Ping timeout: 121 seconds)
[03:51:36] <alephlambda> talchas: ah okay, I'll keep that in mind.
[03:51:49] <Yeti> Howdy, I'm trying to write a function that returns a vector, but the compiler tells me it's finding "()" instead of a vector. Here's a playpen of the function http://is.gd/Yso70D
[03:52:10] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:52:14] <talchas> Yeti: you've said the function is returning ()
[03:52:18] <talchas> (by not saying anything about it)
[03:52:20] <alephlambda> blaenk: One last question, is it better to use shared references like &Cell or to use Rc::new(Cell::new(value))?
[03:52:41] <talchas> you need fn get_renderables(&self) -> Vec<Box<Renderable>> {
[03:52:44] <Yeti> talchas thanks i'm an idiot ahah i forgot you have to tell it what it's returning not just in the initial declaration, thank you
[03:52:49] <Yeti> perfect
[03:53:08] <Dabo> alephlambda, &Cell is more efficient, but won't work for as many things at all as Rc 
[03:53:21] <alephlambda> Dabo: Is one more thread safe than the other?
[03:53:32] <talchas> (I /think/ you'll immediately run into an issue with lifetimes due to &self as Renderable, but I'm not certain)
[03:53:33] <blaenk> neither is thread safe lol
[03:53:38] <blaenk> maybe &Cell but idk
[03:53:41] <blaenk> Rc definitely not, it's not Sync
[03:53:46] <blaenk> you'd need Arc for that
[03:53:52] <Dabo> alephlambda, Rc isn't thread-safe, Arc is the thread-safe equivalent of Rc
[03:54:04] <Dabo> alephlambda, but if something isn't threadsafe rust will tell you about it
[03:54:07] <talchas> even that's not thread safe iirc
[03:54:09] *** Quits: arBmind1 (Andreas@moz-1il8vu.adsl.alicedsl.de) (Quit: Leaving.)
[03:54:12] <alephlambda> Dabo: I've noticed :P
[03:54:14] <talchas> which is why Cell isn't Send/Sync
[03:54:17] <blaenk> yeah
[03:54:23] <blaenk> so even if you stick it in an Arc you wouldn't be safe
[03:54:29] <blaenk> you'd need a mutex prolly
[03:54:30] *** Joins: dpc_ (dpc@moz-t6gr4b.ca.comcast.net)
[03:54:34] *** Quits: srh (User@moz-g3qqf4.public.wayport.net) (Ping timeout: 121 seconds)
[03:54:35] <talchas> if you need threadsafety, it's Mutex time
[03:54:51] <blaenk> which defeats the point of using a cell afaik
[03:54:55] <blaenk> in that case just use Arc<Mutex<T>>
[03:55:01] <talchas> a Mutex basically is a Cell
[03:55:05] <blaenk> oo
[03:55:13] <talchas> (or RWLock or Atomic*, etc)
[03:55:19] <blaenk> but I mean, what's the point of doing Arc<Mutex<Cell<T>>> over just arc mutex t
[03:55:27] <talchas> yeah, that's silly
[03:55:33] <talchas> like Box<Box<etc>> is silly
[03:55:36] <blaenk> lol
[03:55:51] <blaenk> if all else fails though try RefCell<Rc<Cell<UnsafeCell<T>>>>
[03:55:59] <alephlambda> haha
[03:56:13] *** Quits: mdinger (mdinger@moz-bvk2f4.9bf5.ppaa.0306.2602.IP) (Quit: Leaving)
[03:56:32] <bstrie> not enough angle brackets, can we get an AsRef somewhere in there
[03:56:44] <Dabo> RefCell<Rc<&Arc<Mutex<Box<UnsafeCell<T>>>>>>
[03:56:50] <blaenk> dat &Arc
[03:56:58] <whipsch> :$
[03:57:27] <whipsch> at least you could just newtype it
[03:57:29] <whipsch> i guess
[03:57:33] *** Joins: erdos (wil@moz-t7o.e25.111.199.IP)
[03:57:34] <Mutabah> Dabo: Real example - LazyStatic<RwLock< SparseVec<Box<Filesystem>> >> (I'll go look for somethign worse)
[03:57:42] <blaenk> lol
[03:58:00] <blaenk> nice to know my GNU/rust filesystem is thread-safe though
[03:58:22] <talchas> though that one ought to be statically initializable to remove LazyStatic
[03:58:34] <talchas> (unless you need it to start with >0 filesystems ofc)
[03:59:02] <talchas> (it isn't atm due to lack of ctfe or macro priv access)
[03:59:46] *** Quits: derek_c (derek@moz-irsfji.cit.cornell.edu) (Ping timeout: 121 seconds)
[03:59:56] <Dabo> sync::Arc<sync::RwLock<collections::HashMap<String, Vec<sync::Arc<Box<Fn(Event)>>>>> is the best from my code Mutabah 
[04:00:22] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[04:00:54] *** Joins: BageDev (BageDevimo@moz-og7.cn8.251.116.IP)
[04:00:56] <Mutabah> Dabo: Yeah, my best is four... that said, some of those are newtypes
[04:01:07] <Dabo> xD
[04:01:19] <Mutabah> LazyMutex<SparseVec< Arc<Mutex<WindowGroup>>>> = LazyStatic<Mutex< Vec<Option<...
[04:01:23] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[04:01:24] <BageDev> Morning gang, how can I get myself a proper backtrace? LLDB says "error: invalid thread"
[04:01:35] <blaenk> RUST_BACKTRACE=1 yourprogram
[04:01:37] <Mutabah> BageDev: 'RUST_BACKTRACE=1'
[04:01:39] <Dabo> Mutabah, in that Box<Fn(Event)> is actually a newtype, but it looks nicer without'
[04:01:41] <BageDev> thanks :)
[04:01:50] <blaenk> proly need debug info
[04:01:50] <talchas> (also gdb should Just Work)
[04:02:08] <huon> shep-home: I changed benchmarks so that they get run as tests
[04:02:09] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[04:02:12] <talchas> (I expect lldb is supposed to work, but I haven't used it)
[04:02:20] <huon> shep-home: but I don't think it should make them always run
[04:02:29] *** Parts: alephlambda (alephlambda@moz-bv0.ile.111.199.IP) ()
[04:02:31] <aatch> Problem with using C code as reference for this: I'm not sure which parts are supposed to overflow and which aren't.
[04:02:32] *** Joins: alephlambda (alephlambda@moz-bv0.ile.111.199.IP)
[04:02:47] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[04:02:51] <Diggsey> are top level items public by default?
[04:03:00] <aatch> Diggsey, nope.
[04:03:10] <blaenk> nothing is public by default afaik
[04:03:11] <aatch> Diggsey, nothing is public-by-default.
[04:03:41] <Diggsey> hmm, am getting error: private type in exported type signature
[04:04:00] <aatch> Diggsey, is this a trait?
[04:04:10] <blaenk> it means you have a public signature that references a private type, so how would the user be able to use that
[04:04:11] <aatch> Diggsey, because they get treated a little, oddly.
[04:04:13] <alephlambda> Thanks for helping with my questions! 
[04:04:24] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[04:04:26] <lahwran> hey folks, any suggestions for how to deal with .map() when the function can return an Err()? that is, if I do .map(|x| { function_that_returns_result(&ctx, x) }), how do I make sure that there are no Errs in the resulting iterator?
[04:04:27] <Diggsey> aatch: Yes it is
[04:04:29] <blaenk> imagine fn somefun() -> SomePrivateType; how would the user be able to use the result of somefun
[04:04:33] <Diggsey> what do you mean by "oddly"?
[04:04:54] <lahwran> is there any convenience function for finding Errs in an iterator, or similar?
[04:05:12] <lahwran> alternately, can one exit early from a map()?
[04:05:32] <blaenk> lahwran: one thing you can do (of many) is to use .and_then and have the function convert to an option
[04:05:41] *** Quits: alephlambda (alephlambda@moz-bv0.ile.111.199.IP) (Quit: leaving)
[04:05:47] <lahwran> I definitely want to abort on Err
[04:05:48] <blaenk> the err's would be ignored, but you made it sound liek that's what you wnated
[04:05:59] <blaenk> well then you can do .ok().expect("blah") or whatever
[04:05:59] <lahwran> no, I want to aggregate them and turn them into one big Err
[04:06:04] <blaenk> oh
[04:06:08] <aatch> Diggsey, the rules are slightly too conservative. Some cases with bounds or similar.
[04:06:13] <blaenk> well then you should probably map them into a list of results instead
[04:06:14] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Ping timeout: 121 seconds)
[04:06:15] *** Quits: erdos (wil@moz-t7o.e25.111.199.IP) (Quit: leaving)
[04:06:19] <lahwran> what is .ok().expect() again
[04:06:20] *** Joins: oceanwhit (christianwh@moz-d046r2.res.rr.com)
[04:06:24] <blaenk> or have a separate collection that you push the errs onto
[04:06:43] <blaenk> it converts to an option, then expect unwraps it and if it can't it panics with the message, iirc
[04:06:59] <Mutabah> Yep
[04:07:11] <lahwran> why not just .unwrap()
[04:07:16] <lahwran> that will use the original message
[04:07:22] <lahwran> which seems like the sensible thing to do
[04:07:24] <blaenk> becuase you said you want to collect one big error lol
[04:07:29] <blaenk> if you use unwrap it'd abort on the first one
[04:07:34] <Diggsey> aatch: annoyingly it's coming from a macro expansion, but passing --pretty=expanded causes compilation to succeed :S
[04:07:35] <blaenk> so you shouldn't use ok().expect() either
[04:07:38] <lahwran> how is that different if I do ... yeah
[04:07:41] *** Joins: Guest (textual@moz-rtn.fg7.77.192.IP)
[04:07:42] <lahwran> okay, so that won't work
[04:07:53] <blaenk> I was responding to the bits and pieces of your situation you were giving me at a time
[04:07:56] <lahwran> lol
[04:08:03] <lahwran> let me say the whole thing again
[04:08:08] <aatch> Diggsey, well that's because --pretty=expanded just expands the source, it doesn't get any further.
[04:08:19] <talchas> lahwran: so, the issue I think is that if you think it through, there's no way for the type of Iterator to really do that
[04:08:32] <Diggsey> aatch: but it doesn't output anything?
[04:08:46] *** Quits: new_one (new_one@moz-suj.lcf.15.50.IP) (Quit: WeeChat 1.1.1)
[04:08:52] <talchas> because you'd ideally want an iterator whose next() returns Result<T, Err>, but that's impossible
[04:08:54] <blaenk> you can have map match on the result, if it's Ok, then return its contents. if it's Err, push the err onto a separate collection and then return None
[04:09:11] <aatch> Diggsey, huh? --pretty=expanded should dump the expanded source to stdout.
[04:09:13] <talchas> you /could/ do a collect_results that returns Result<Vec<T>, Err>, reasonably
[04:09:28] <lahwran> what I want is like, tryiter!() where it turns an iterator of Result<T, E> into an iterator of T, and then the wrapping iterator will return if there are any Errs
[04:09:29] <blaenk> yeah, there are many things you can do, depends on how you want to do it
[04:09:44] <talchas> lahwran: that would require a nonlocal return though
[04:10:07] <lahwran> that's how try! works though
[04:10:21] <lahwran> oooh wait I see
[04:10:28] <lahwran> okay, that'd have to be trycollect!()
[04:10:40] <talchas> yeah
[04:10:46] <aatch> lahwran, one question though, how do you intend to "combine errors"?
[04:10:55] <lahwran> I dunno :p
[04:11:03] <lahwran> I hadn't thought that far and was hoping someone else had.
[04:11:04] <talchas> well, that's why you'd want to return on the first error
[04:11:11] <Diggsey> aatch: oh lol, I still had the "-o" option so it was dumping the output to the .exe file -.-
[04:11:12] <blaenk> another thing you can do is map the iter to the result of the fn, so a Result, you'd have a stream of Results then, and you could use partition() to split it into Ok's and Err's
[04:11:12] <aatch> lahwran, I'd say that's the thing to figure out first.
[04:11:19] <lahwran> alright. I'll just take the first one
[04:11:48] <talchas> well, it depends on your situation if that's what you want
[04:12:08] <talchas> since iterators are lazy
[04:12:47] <talchas> (if that is what you want, itertools's fold_results would probably help you write collect_results)
[04:13:47] *** Joins: rbranson (rbranson@moz-oeg7f0.ca.comcast.net)
[04:14:04] *** Joins: diegogub (Mibbit@moz-rtcmo6.telecom.net.ar)
[04:15:11] <Twinklebear> hey all, is there a way to change the for loop step? It seems like range step is gone? Or better yet is there a way to take an iterator in chunks of 3 items at a time?
[04:15:27] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[04:15:41] <Mutabah> Twinklebear: There is Range::step, but I think that's unstable?
[04:15:51] <mindtree> Twinklebear: is the iterator over a slice?
[04:15:57] <Mutabah> playbot: (0..10).step(2).collect::<Vec<_>>()
[04:15:58] -playbot- <anon>:9:17: 9:24 error: type `core::ops::Range<_>` does not implement any method in scope named `step`
[04:15:58] -playbot- <anon>:9         (0..10).step(2).collect::<Vec<_>>()
[04:15:58] -playbot- output truncated; full output at: http://bit.ly/1dUMSHS
[04:16:05] <whipsch> step_by
[04:16:06] <Twinklebear> mindtree, over a Vec
[04:16:09] <Mutabah> playbot: (0..10).step_by(2).collect::<Vec<_>>()
[04:16:10] <mindtree> Twinklebear: if so, slice provides `.chunks(3)`
[04:16:10] -playbot- <anon>:9:17: 9:27 error: use of unstable library feature 'step_by': recent addition
[04:16:10] -playbot- <anon>:9         (0..10).step_by(2).collect::<Vec<_>>()
[04:16:10] -playbot- output truncated; full output at: http://bit.ly/1R50pLY
[04:16:14] <Mutabah> whipsch: Yeah
[04:16:21] <mindtree> Twinklebear: yeah you can use the chunks iterator then
[04:16:29] *** Quits: Pieter (Mibbit@moz-7bjs3j.ftth.telfortglasvezel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[04:16:39] <mindtree> Twinklebear: http://doc.rust-lang.org/std/primitive.slice.html#method.chunks
[04:16:51] <mindtree> Twinklebear: (Vec will auto deref to slice)
[04:17:02] *** Quits: tunnuz (tunnuz@moz-qotoi1.optusnet.com.au) (Ping timeout: 121 seconds)
[04:17:11] <Twinklebear> cool, chunks looks great
[04:17:41] <Diggsey> aatch: Are you not allowed to use a non-public type as an associated type of a public trait?
[04:17:44] *** Quits: orangeshark (erik@moz-us1b8u.44tj.56ot.0306.2602.IP) (Ping timeout: 121 seconds)
[04:18:22] <aatch> Diggsey, dunno.
[04:18:25] <eddyb> Diggsey: nope
[04:18:32] *** Quits: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de) (Ping timeout: 121 seconds)
[04:18:51] <eddyb> no private types get exported, period
[04:18:53] <Diggsey> it should be allowed if you're implementing the trait for a non-public type :/
[04:18:57] *** Quits: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com) (Ping timeout: 121 seconds)
[04:19:04] <eddyb> oh
[04:19:08] <Diggsey> since then it needn't be exported
[04:19:23] <eddyb> may be a bug?
[04:19:29] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[04:20:13] <talchas> Diggsey: that seems to work
[04:20:27] <diegogub> helloo, why sync_data in files is so slow in rust? I'm trying to write simple program to do kind of append only log. And sync_data is very slow. Anyone with same issue?
[04:20:38] <blaenk> reem: we don't get the `or_insert` methods for free with typemap's entry?
[04:20:39] <Diggsey> talchas: Yeah, it must be slightly more complicated than that - trying to come up with a simpler example
[04:20:57] <talchas> ( http://is.gd/sjPRKP works)
[04:21:19] *** Joins: diego (Mibbit@moz-69p.i83.83.201.IP)
[04:21:20] <blaenk> reem: oh yeah I see we have to implement it separately :(
[04:21:24] <diegogub> here is the example: https://gist.github.com/diegogub/51737e7e02ae56c135b1
[04:21:35] *** Joins: dellavg (dellavg@moz-9lesb5.retail.telecomitalia.it)
[04:21:44] <talchas> diegogub: on linux I think sync_data is fdatasync, and that often is pretty slow
[04:21:51] <blaenk> reem: we need this https://github.com/chris-morgan/anymap/blob/master/src/lib.rs#L218 I'll take a shot at it
[04:22:10] <talchas> (common filesystem mount options make it sync more than just the file, and even writing one file to disk is slow by cpu standards)
[04:23:55] <diegogub> @talchas I know it's slow, but I did some test with C and Go, and it was much faster. I'm reall new to rust, may be I'm doing something wrong. or how sync_data is implemented in rust
[04:24:10] <talchas> diegogub: comparing it to fdatasync?
[04:24:29] <diegogub> I would have to try that..
[04:24:43] <talchas> if you're comparing it to fflush, then you should use flush in rust
[04:25:00] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[04:25:08] *** Quits: cjwelborn (cjwelborn@moz-np6hed.al.charter.com) (Quit: sys.exit(1))
[04:25:27] *** Joins: forgottenone (forgottenon@moz-j3l.lq5.40.176.IP)
[04:26:02] <Twinklebear> ah hm, now i run into another issue. Is there a way to help the compiler see that a closure won't outlive the current function, so it's ok to borrow local variables and not move?
[04:26:03] *** Joins: sfalcon (textual@moz-qtd94t.customer.broadstripe.net)
[04:26:04] <diegogub> talchas: I think you are right..
[04:26:15] <reem> blaenk: +1 to a PR
[04:26:24] <blaenk> ok, can you get my old one in, imma build off of that
[04:26:26] *** Joins: derek_c (derek@moz-samgps.cit.cornell.edu)
[04:26:37] <talchas> yeah, fflush just passes it off to the OS, fdatasync asks the OS to write it to disk and wait, and disk is really slow
[04:27:23] *** Joins: orangeshark (erik@moz-sbcuv5.44tj.56ot.0306.2602.IP)
[04:27:43] *** Quits: diego (Mibbit@moz-69p.i83.83.201.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:27:52] *** Joins: ipetkov (ipetkov@moz-0a7r6g.host.ucla.edu)
[04:28:08] <bstrie> Twinklebear: the compiler is pretty good about inferring when it doesn't need to move
[04:28:43] <bstrie> Twinklebear: and even if for some reason you're forced to use a moving closure, you can still technically move in references to your stack values
[04:28:52] *** Quits: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[04:29:08] <bstrie> Twinklebear: can you give an example of where the compiler is inferring incorrectly?
[04:29:42] <Twinklebear> bstrie: http://is.gd/kxY3jj is what I'm struggling with
[04:30:01] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[04:30:16] <Twinklebear> the triangles refer to the mesh so they can get their positions/etc and are owned by the BVH, which is in turn owned by the Mesh storing the data referenced by the triangles
[04:30:21] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[04:30:22] <talchas> diegogub: (though there's also the gotcha that File doesn't do buffering, and FILE* does, so if you see slowness when writing a few bytes at a time, you might want to try BufWriter)
[04:30:35] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (Connection closed)
[04:31:49] *** Quits: rbranson (rbranson@moz-oeg7f0.ca.comcast.net) (Quit: Computer has gone to sleep.)
[04:32:06] *** Quits: bombless (_@moz-qji.piv.41.59.IP) (Ping timeout: 121 seconds)
[04:32:25] <Twinklebear> bstrie, I'll see about putting together a self-contained example as well
[04:33:02] *** Quits: huddler (Mibbit@moz-7en4n8.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:33:18] <Diggsey> am I correct in thinking that this should work: http://is.gd/d4nQVu
[04:33:54] <talchas> Twinklebear: what is the exact error you're getting from that code?
[04:33:56] *** Quits: colinsurprenant (colin@moz-jr5.isa.222.192.IP) (Client exited)
[04:33:58] *** Joins: thlst (thelost@moz-22b.88a.35.177.IP)
[04:34:23] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[04:34:45] <talchas> oh, I think I see
[04:34:47] <diegogub> talchas: thanks, I think in other languages what sync means, is flushing data. that was my error. 
[04:34:48] <Twinklebear> talchas, added to the end: http://is.gd/N9ujcb
[04:34:56] *** Joins: Ralith_ (ralith@moz-tiaj7p.customer.broadstripe.net)
[04:34:58] <talchas> I'm guessing Triangle contains a pointer to the Mesh?
[04:34:58] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[04:35:10] <Twinklebear> right
[04:35:14] *** Joins: pgonda (peter@moz-otulp7.ma.comcast.net)
[04:35:22] *** Quits: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net) (Ping timeout: 121 seconds)
[04:35:42] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[04:35:56] <talchas> the pointing to the closure is a bad error message one way or the other
[04:36:05] <talchas> (whether it's technically correct or not)
[04:36:43] <talchas> you can't in general have struct Foo<'a> { please_point_to_container: &'a Foo }
[04:36:52] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:36:54] *** Quits: oceanwhit (christianwh@moz-d046r2.res.rr.com) (Ping timeout: 121 seconds)
[04:37:50] <talchas> and if you instead have Option/Vec/etc<&'a Foo>, then you can't move your container
[04:37:51] *** Joins: rbranson (rbranson@moz-oeg7f0.ca.comcast.net)
[04:38:06] <talchas> because you have a reference to it that will be invalidated
[04:38:56] <talchas> (even if the return of Mesh will probably be implemented by writing to its final stack location or something, so that the pointer wouldn't /actually/ change, it's still illegal)
[04:39:14] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[04:39:25] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[04:39:27] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[04:39:44] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[04:39:47] *** Quits: rbranson (rbranson@moz-oeg7f0.ca.comcast.net) (Connection closed)
[04:39:57] <Twinklebear> hm what would you suggest? having all the triangles store the position/normal/texcoord will give a lot of memory bloat
[04:40:16] *** Joins: rbranson (rbranson@moz-ga0.9o0.201.199.IP)
[04:40:24] <Twinklebear> they would be stored in boxes so moving things shouldn't be an issue though (I think)
[04:40:51] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[04:40:58] *** Quits: lutter (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net) (Ping timeout: 121 seconds)
[04:41:31] *** Quits: chuckguy (Mibbit@moz-oqn1os.users.condointernet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:42:24] <thlst> lots of boxes aren't good btw
[04:42:44] <Twinklebear> only the mesh would be in a box, not the triangles 
[04:43:14] <thlst> okay then
[04:43:33] *** Joins: lutter (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net)
[04:43:49] <Twinklebear> er not the triangles each in their own box i mean
[04:44:18] *** Quits: rbranson (rbranson@moz-ga0.9o0.201.199.IP) (Ping timeout: 121 seconds)
[04:44:27] <thlst> you could use weak reference
[04:44:42] <thlst> so that moving things is legal
[04:44:59] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[04:45:37] <blaenk> reem: yeee I did it
[04:45:56] *** Quits: sfalcon (textual@moz-qtd94t.customer.broadstripe.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[04:46:08] <reem> blaenk: can you rebase your fix PR?
[04:46:10] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[04:46:16] <blaenk> reem: ok
[04:46:18] <Twinklebear> ah thlst you mean have the triangles store weak references to the Mesh?
[04:46:24] <blaenk> reem: you mean include my fix pr in this one?
[04:46:33] *** Joins: avikpal (avikpal@moz-2bf.ep4.194.117.IP)
[04:46:35] <thlst> twinklebear: yes
[04:46:48] <talchas> yeah, you could do obnoxious crap like having Rc<Cell<Mesh>> and triangles having Weak<Cell<Mesh>>
[04:47:08] <talchas> (or RefCell)
[04:47:50] <Twinklebear> well, the triangles don't need to change the mesh's value
[04:47:56] <talchas> it might be easier for your other code to take Meshes as arguments rather than Triangles, depending
[04:48:02] <Twinklebear> they really just need references to the vec's it holds
[04:48:20] <Twinklebear> talchas, right the other code will only care about the Mesh, the triangles are internal to it and its BVH
[04:48:28] <thlst> and you aren't gonna change the meshes
[04:48:31] <blaenk> hey reem I'm wondering about this
[04:48:43] <thlst> but the compiler doesn't like references moving here and there
[04:49:01] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[04:49:09] <thlst> and suddenly the resource just leave
[04:49:13] <reem> blaenk: just rebase your fix PR on top of master
[04:49:16] <reem> I added travis changes
[04:49:17] <blaenk> ah will do
[04:49:23] <talchas> you might be able to write things such that you give BVH the data Vecs and Triangle Vec, rather than having the Triangles have pointers
[04:49:33] <blaenk> reem: I mean I'm wondering about this
[04:49:35] <blaenk> https://github.com/reem/rust-typemap/blob/master/src/lib.rs#L185
[04:49:42] <blaenk> K doesn't have a Key bound there, but it does on the impl
[04:49:47] <blaenk> want me to add it to the struct def?
[04:49:54] <blaenk> probably doesn't matter
[04:49:55] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Quit: AHHHHH BEES)
[04:50:00] <talchas> such that all the BVH functions take an extra &Mesh that has to correspond to the Triangles it holds
[04:50:01] <blaenk> but I'm wondering if you just missed that or what
[04:50:29] <blaenk> personally I prefer to have the bounds everywhere if they must apply everywhere, to avoid the scenario in which you construct the type but you can't use the implementation cause the constraints dont match
[04:50:41] <blaenk> but in this case it's probably not possible for that to occur, in any case, wondering if you want met o add it
[04:50:43] <talchas> (and if you gave it anything but &self, you'd get bad data, which is unfortunate, but probably nicer than Rc+RefCell)
[04:51:00] *** Quits: Yeti (Mibbit@moz-cb9mg6.ST.HMC.Edu) (Quit: http://www.mibbit.com ajax IRC Client)
[04:51:37] <Mutabah> Is there any way of returning an "internal" type (i.e. one defined within the body of the function)
[04:51:58] <thlst> mutabah: how so?
[04:52:22] <Mutabah> Just want to avoid polluting my namespace with an error enum only used for one method
[04:52:59] <thlst> if you define a type inside a function, it can't be returned
[04:53:15] <thlst> you mean, using this as the function type return?
[04:53:25] <Mutabah> Yeah, thought that was the case
[04:53:34] <thlst> nah, you can't
[04:53:53] <blaenk> reem? eh w/e will just leave that
[04:53:58] <blaenk> not a big deal
[04:54:29] <thlst> mutabah: but rather than this, you could use Result as returning some kind of log
[04:54:43] *** Quits: pgonda (peter@moz-otulp7.ma.comcast.net) (Ping timeout: 121 seconds)
[04:54:46] <reem> blaenk: I usually just avoid most struct bounds
[04:54:50] <blaenk> ah okay
[04:54:53] <blaenk> will leave it then
[04:54:55] <reem> well, sometimes
[04:55:00] <reem> I dunno, here it doesn‚Äôt matter
[04:55:01] <Mutabah> thlst: You mean, returning a Result<T,String>?
[04:55:03] <blaenk> yeah it doesn't
[04:55:11] <blaenk> was just wondering if you did mean to and was an oversight to get it for you
[04:55:21] <Mutabah> thlst: (Current code is Result<(),MountError>
[04:55:33] <blaenk> I personally always add it cause I hate the situation where you construct a T and you're wondering why some method isn't available
[04:55:39] <blaenk> but agreed in this case I don't think it's even possible for that to happen
[04:55:55] <thlst> mutabah: the problem here is about the MountError then, right?
[04:56:08] <Mutabah> thlst: It's a neatness thing, and yes
[04:56:50] <thlst> mutabah: I don't see any problem with it... I mean, you need to use such system of error
[04:57:17] <Mutabah> thlst: *shrug* Wanted to avoid polluting the module's namespace
[04:57:26] *** Joins: kazimuth (james@moz-n85.696.189.18.IP)
[04:57:34] <blaenk> reem rebased, going through travis atm https://github.com/reem/rust-typemap/pull/30
[04:57:48] <thlst> mutabah: put this inside of some namespace
[04:57:53] <thlst> I guess
[04:58:03] <thlst> another namespace
[04:58:10] <thlst> inside of this one
[04:58:35] <Twinklebear> oh actually thlst, talchas what would you think about just having all the triangles keep an Arc to the positions/normals/texcoords vecs?
[04:58:50] <blaenk> reem: both are passing
[04:58:53] <blaenk> will leave you to it
[04:58:58] <Twinklebear> The Mesh itself doesn't actually care about those vecs beyond that its triangles need them, so why have it hold on to them?
[04:59:35] <reem> blaenk: now you need to rebase #31 on top of master, because I merged #30
[04:59:58] <blaenk> will do
[05:00:12] <blaenk> thought git handled that automatically though
[05:00:22] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[05:00:47] <blaenk> there
[05:01:00] <thlst> talchas: have you tried to pass the .clone() of the mash instead of just a reference?
[05:01:10] *** Quits: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[05:02:07] <talchas> Twinklebear: yeah, that sort of thing would work
[05:02:32] <talchas> if the BVH is also private you might be better off just passing it into all the BVH functions
[05:02:32] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[05:02:55] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[05:02:57] *** Quits: Lurkin2 (Lurkin@moz-p4efgs.mpls.qwest.net) (Connection closed)
[05:02:59] <Twinklebear> passing the normals/texcoords and such? 
[05:03:00] <talchas> because that will both make things slightly simpler and cut the size of Triangle roughly in half
[05:03:02] <talchas> yeah
[05:03:06] *** Quits: Guest (textual@moz-rtn.fg7.77.192.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[05:03:16] <talchas> (presumably making a MeshData struct or something so it looks nicer)
[05:03:20] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[05:03:24] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[05:03:34] <Twinklebear> ah so I'd like the BVH to be generic on any type that can report its bounds, so I can build a BVH over instances of objects in my scene as well as on individual meshes
[05:03:52] <talchas> ah
[05:04:27] <Twinklebear> for example a single mesh may appear many times, so an Instance is made for each of those with bounds in world space, while the mesh referred to by all the instances have an internal BVH on the triangles
[05:04:35] <talchas> (I suppose you might be able to make it so that the bounds trait takes a context parameter that is then passed in or something)
[05:05:46] <Twinklebear> hmm, yea I'll have to think if there's something better to do, an extra 3 pointers isn't too painful for now
[05:05:51] <blaenk> reem you there? wait up on merging
[05:05:54] <blaenk> gonna add one more test
[05:06:07] <reem> blaenk: I merged #30, will wait on #31
[05:06:11] <blaenk> ok
[05:06:37] <blaenk> reem: there, I'll leave you to it
[05:06:59] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Ping timeout: 121 seconds)
[05:08:11] <blaenk> talchas re: file buffering you talked about
[05:08:16] <blaenk> that File doesn't have any, so use BufWriter
[05:08:46] <blaenk> if you have some big string of text that you want to write to a file, I should definitely use that right
[05:09:09] *** Joins: yuja (yuja@moz-tvn458.pikara.ne.jp)
[05:09:46] <talchas> buffering is more useful if you're writing tiny bits often
[05:09:53] <blaenk> ahh okay
[05:09:59] *** Quits: gmk (Mibbit@moz-0hpfv1.dynamic.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:09:59] *** Quits: dellavg (dellavg@moz-9lesb5.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[05:10:19] <blaenk> well I guess it depends on how File implements Write
[05:10:48] <blaenk> seems like it tries to write the entire buffer in one call
[05:10:55] <talchas> yeah, that's fine
[05:10:56] <diegogub> blaenk: what I wanted is to commit safe to disk.
[05:11:03] <blaenk> ah okay
[05:11:31] *** Quits: jxv (jxv@moz-2celrt.res.rr.com) (Quit: BYE)
[05:11:40] *** Quits: aravindavk (aravinda@moz-t6o.rvv.171.122.IP) (Quit: Konversation terminated!)
[05:12:54] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[05:13:16] *** Quits: noam (noam@moz-6kn.6at.57.213.IP) (Ping timeout: 121 seconds)
[05:16:26] *** Quits: avikpal (avikpal@moz-2bf.ep4.194.117.IP) (Ping timeout: 121 seconds)
[05:17:18] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[05:18:28] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[05:19:51] *** Joins: kjsebastian (kjsebastian@moz-ue8.apm.161.202.IP)
[05:20:04] *** Quits: orangeshark (erik@moz-sbcuv5.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[05:20:59] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[05:21:39] *** Parts: thlst (thelost@moz-22b.88a.35.177.IP) ()
[05:21:58] <kjsebastian> Could someone tell me why I can call &str methods like trim() on a String? Going through the rust book on guessing game example. I did not see an implementation of trim() on a String in the docs
[05:22:11] <blaenk> because of the Deref trait
[05:22:16] <Twinklebear> a very complex mesh rendered :P http://i.imgur.com/ywvfNrS.jpg thanks for the help everyone!
[05:22:20] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[05:22:32] <blaenk> kjsebastian: String implemetns Deref for &str http://doc.rust-lang.org/std/ops/trait.Deref.html
[05:22:34] <WindowsBunny> kjsebastian: If Foo impls Deref<Bar>, then you can invoke the methods of Bar on a Foo
[05:22:44] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Connection closed)
[05:22:46] *** Quits: dpc_ (dpc@moz-t6gr4b.ca.comcast.net) (Connection closed)
[05:24:04] <kjsebastian> blaenk: got it. thanks! Traits are new for me. They are kind of like interfaces in Java?
[05:24:10] <blaenk> yeah, kind of
[05:24:15] *** Joins: mahdi (mahdi@moz-1m5.q2v.244.151.IP)
[05:24:23] <blaenk> keep reading the book, it'll cover them
[05:24:41] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[05:24:48] <kjsebastian> OK!!
[05:25:40] *** Quits: Kurufu (Kurufu@moz-pvv8b5.res.rr.com) (Ping timeout: 121 seconds)
[05:25:41] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[05:27:21] *** Quits: atomic (atomic@moz-u4o.568.77.185.IP) (Connection closed)
[05:27:33] *** Joins: atomic (atomic@moz-hse8i7.blue.kundencontroller.de)
[05:27:33] <bstrie> Twinklebear: beautiful :) is this a raytracer?
[05:27:43] *** Joins: Kurufu (Kurufu@moz-pvv8b5.res.rr.com)
[05:27:55] <Twinklebear> bstrie, yep, my "learning Rust project" has been to port a C++ path tracer I wrote for a class over
[05:28:17] *** Quits: mahdi (mahdi@moz-1m5.q2v.244.151.IP) (Ping timeout: 121 seconds)
[05:28:27] <bstrie> Twinklebear: there are several other rust raytracers floating around, if you wanted to compare approaches
[05:28:49] <bstrie> it is a relatively popular first rust project :)
[05:29:04] <Twinklebear> hehe cool! which other ones have you seen around? I haven't done much digging
[05:29:13] <Twinklebear> ray tracing is a very fun project
[05:29:26] <bstrie> Twinklebear: https://www.google.com/search?q=rust+raytracer
[05:29:32] <Twinklebear> haha :P
[05:29:37] <bstrie> there's like 12 there
[05:29:44] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[05:29:50] <bstrie> can't guarantee any will compile with rust 1.0 though...
[05:29:54] *** Quits: yuja (yuja@moz-tvn458.pikara.ne.jp) (Ping timeout: 121 seconds)
[05:30:53] *** Quits: Jesse (jruderman@moz-pqc1f5.ca.comcast.net) (Client exited)
[05:31:00] <bstrie> Twinklebear: https://github.com/gyng/rust-raytracer looks like it has a lot of commits and is tracking nightly, though I have no idea as to the quality of the code
[05:31:01] <Twinklebear> i hope to get this compiling on 1.0
[05:31:30] *** Joins: oceanwhit (christianwh@moz-d046r2.res.rr.com)
[05:31:51] <Twinklebear> yea i saw that one, it looks pretty nice. It looks like just Whitted though (eg. no global illumination) unless they haven't updated their images
[05:32:03] <Twinklebear> although they do have soft shadows which look nice
[05:32:20] *** Quits: Diggsey (diggsey@moz-le02si.dsl.pipex.com) (Ping timeout: 121 seconds)
[05:33:22] *** Joins: mahdi (mahdi@moz-1m5.q2v.244.151.IP)
[05:34:28] <Twinklebear> oh they're workign on photon mapping, awesome
[05:34:57] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[05:36:12] *** Joins: zcourts (zcourts@moz-7ms809.cable.virginm.net)
[05:37:36] *** Joins: arjun_ (arjun@moz-b38.meo.76.171.IP)
[05:38:04] <BageDev> Anyone here know why regex::Regex, is giving me the trait `for<'r,'r> core::ops::FnOnce<(&'r regex::re::Captures<'r>,)>` is not implemented for the type `regex::re::Regex` 
[05:38:28] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[05:38:32] <blaenk> need some code
[05:38:59] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[05:39:21] <BageDev> blaenk: I'll see if I can make up an example to figure out what i'm doing wrong, more concisely.
[05:39:32] <BageDev> It's literally just the line: test.replace_all(&test_string, replacement);
[05:39:36] <pyon> Is there any way to get the type of an expression?
[05:39:42] <pyon> Something like a static typeof operator.
[05:39:45] <BageDev> effectively like this: for regexp_tuple in config.rules.iter() {
[05:39:46] <BageDev>     let (ref test, ref replacement) = *regexp_tuple;
[05:39:46] <BageDev>     // println!("testing {} against {}", test, test_string);
[05:39:46] <BageDev>     if test.is_match(&test_string) {
[05:39:46] *** BageDev was kicked by fripp.mozilla.org (Channel flood triggered (limit is 5 lines in 3 secs))
[05:39:50] <blaenk> haha
[05:39:52] <blaenk> ez
[05:39:56] *** Joins: BageDev (BageDevimo@moz-og7.cn8.251.116.IP)
[05:40:00] <BageDev> Woops, sorry!
[05:40:17] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[05:40:25] <BageDev> I didn't think it'd convert newlines actual new messages. I'll gist.
[05:41:04] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[05:42:20] <BageDev> Any way to use crates on play.rust-lang.org?
[05:43:23] <BageDev> Something like this:
[05:43:24] <BageDev> https://gist.github.com/bagedevimo/f3e4eb065bb4edf29838
[05:43:36] <bstrie> pyon: if you just want to know the type of an expression yourself, you can trick the compiler into telling you what it's inferring by doing `let x: () = some_expression;`
[05:44:03] <pyon> ah!
[05:44:11] <Mutabah> Why does Result not have an 'expect' method?
[05:44:19] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[05:44:45] <pyon> What I really want is the size, as in `std::mem::size_of::<type>()`, but the type might be kinda complicated.
[05:45:09] <pyon> Oh, never mind. size_of_val
[05:45:13] <bstrie> Mutabah: dunno, in the meantime you should be able to do `ok().expect()` instead
[05:45:14] <pyon> Thanks, anyway!
[05:45:25] <Mutabah> bstrie: That loses the error information
[05:45:34] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[05:45:43] <talchas> BageDev: if replacement is a regex, that doesn't look like it implements Replacer
[05:45:45] <Mutabah> bstrie: I wanted a .unwrap() that also puts a user-specified message in
[05:45:56] <bstrie> Mutabah: no reason we couldn't add one
[05:46:32] <BageDev> talchas: Maybe I found a docs issue then? http://doc.rust-lang.org/regex/regex/index.html#example:-replacement-with-named-capture-groups
[05:46:43] <bstrie> BageDev: using the regex from crates.io?
[05:46:51] <BageDev> yeah.
[05:46:57] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[05:47:08] <BageDev> from Cargo.toml:[dependencies]
[05:47:08] <BageDev> regex = "*"
[05:47:16] <talchas> BageDev: it's not suggesting to use a Regex as the argument to replace_all
[05:47:22] <talchas> that example is a string
[05:47:34] <BageDev> oh, shit. it is too. why would the replacement be a regex. duh. Thanks!
[05:49:16] *** Quits: murz (murz@moz-nr2kro.wa.comcast.net) (Quit: Be back later ...)
[05:49:36] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[05:50:41] *** Quits: arjun_ (arjun@moz-b38.meo.76.171.IP) (Ping timeout: 121 seconds)
[05:51:53] *** Quits: ipetkov (ipetkov@moz-0a7r6g.host.ucla.edu) (Client exited)
[05:53:34] *** Quits: mahdi (mahdi@moz-1m5.q2v.244.151.IP) (Ping timeout: 121 seconds)
[05:54:41] *** Joins: mahdi (mahdi@moz-1m5.q2v.244.151.IP)
[05:54:53] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[05:55:41] *** Joins: Douman (Douman@moz-3ei4gt.dynamic.mts-nn.ru)
[05:56:10] *** Quits: d_rezzer (chatzilla@moz-t0fmuj.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[05:57:17] <BageDev> talchas: The thing is giving me the exact same error, but now not implented on String, instead of Regex
[05:57:25] *** Joins: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net)
[05:59:02] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[06:00:18] *** Joins: siddhartharao17 (uid57287@moz-opec5r.charlton.irccloud.com)
[06:01:23] <talchas> BageDev: it does need a str, does it fail for that too?
[06:01:42] <talchas> (well, &str, so &replacement, like the test string stuff)
[06:02:41] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:03:38] <BageDev> talchas: Well, it seems like it works fine if I give it a &'static str, but breaks if I go &replacement
[06:03:41] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[06:04:08] *** Joins: griff (griff@moz-bf2.sbd.199.62.IP)
[06:04:52] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[06:05:02] <BageDev> type coercion was just playing weird me, I fixed it.
[06:05:38] <Guest44> Hey guys, I'm doing a presentation on Rust, and looking for some performance comparisons with C++, Go, etc. However, everything I find seems either vague, or incorrect, or contradictory. I'm lost. What do you advise?
[06:06:16] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[06:06:37] <whipsch> if you want a blanket statement, runtime performance is usually on par with c/++
[06:06:44] <whipsch> compilation time is still rather slow, however
[06:07:04] <Guest44> compilation time I won't bring up, I think it's irrelevant
[06:07:35] <raph> Guest44: it's a complicated subject and there are no easy answers.
[06:07:47] *** Quits: kjsebastian (kjsebastian@moz-ue8.apm.161.202.IP) (Quit: )
[06:07:48] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[06:07:48] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Ping timeout: 121 seconds)
[06:08:13] *** Joins: kjsebastian (kjsebastian@moz-ue8.apm.161.202.IP)
[06:08:22] <Guest44> the problem is, I'm gonna be doing this presentation, emphasizing performance and safety. If I don't bring this up, people are gonna go and do "go vs. rust speed" in Google, and find these bullshit things that show how their quicksort was faster in Go than in Rust
[06:08:26] <Guest44> and that won't help my cause
[06:08:27] <raph> But what whipsch said is a good start; in the hands of a skilled programmer using tools such as profiling, you can usually get pretty close to C/C++ performance
[06:08:39] <bstrie> Guest44: what's more useful is to see what penalties your programming language imposes. C, C++, and Rust all impose very few penalties, so theoretically the only thing keeping their programs from any given speed is the skill of the author
[06:08:54] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[06:08:57] <raph> it's also true that the speed of go is very good
[06:09:07] <bstrie> Guest44: go imposes mandatory garbage collection, and it also imposes a stack model that makes calling into C very very slow
[06:09:19] *** Joins: frankmcsherry (frankmcsher@moz-87vov1.dyn.telefonica.de)
[06:09:25] <raph> it also depends on how you define speed
[06:09:46] <Guest44> so I need to answer these before people ask them
[06:10:17] <raph> if you define it as worst-case execution time (basically latency) then not having gc is a major win
[06:10:36] *** Quits: derek_c (derek@moz-samgps.cit.cornell.edu) (Ping timeout: 121 seconds)
[06:10:45] <raph> that's an appropriate definition for many use cases (robotics control, for example), but is extremely not the way most people run benchmarks
[06:10:59] <Guest44> can I mention that there is memory control of enough granularity that'd allow to achieve C speeds?
[06:11:19] <bstrie> Guest44: generally we regard anything less than C speed as a bug, yes
[06:11:36] <bstrie> modulo C compilers taking advantage of undefined behavior
[06:12:07] <bstrie> Guest44: rust should also be faster than C and C++ in several areas, once the compiler matures
[06:12:17] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[06:12:23] <Guest44> bstrie thanks so much for your input, this is super helpful
[06:12:36] <Guest44> raph thank you too!
[06:12:45] <bstrie> Guest44: modern C++ uses constructs that provide some of the same safety guarantees as rust, but impose a runtime cost that rust doesn't need to pay
[06:13:06] <Guest44> bstrie you talking about shared_ptr and such?
[06:13:21] <bstrie> Guest44: likewise, rust's ownership tracking mechanism means it has built-in knowledge of aliasing information, which means that we can easily and automatically mark variables as being "restrict" in a C sense
[06:13:22] <raph> it's also really easy to incur performance regressions in C++, there are so many gotchas in the language
[06:13:31] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[06:13:43] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:13:49] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[06:13:50] <Guest44> the crowd in my company is more of Python/Go/Node.js crowd, so I don't worry so much about C++/C comparisons
[06:14:02] <raph> ah, right
[06:14:05] <bstrie> Guest44: then just tell them the language is as fast as C :P
[06:14:38] *** Quits: oceanwhit (christianwh@moz-d046r2.res.rr.com) (Ping timeout: 121 seconds)
[06:14:51] <Guest44> bstrie and when they say "my factorial function in Go was faster than my factorial function in Rust"?
[06:15:04] <bstrie> Guest44: what's useful as well is that you can write programs in rust that pretend to be C from the outside, so that you can call those programs from python/go/node
[06:15:18] *** Joins: abasdfa (Mibbit@moz-lq5ta4.fl.comcast.net)
[06:15:19] <bstrie> Guest44: tell them their comparison is wrong :P
[06:15:20] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[06:15:26] <Mutabah> Yep :)
[06:15:45] <Mutabah> They may have compiled with optimisations off
[06:15:47] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[06:15:59] <bstrie> Guest44: in any comparison where the go and rust implementations are equivalent (i.e. both using the same size integers and stuff), if rust doesn't come out on top then that's a major perf bug and will be corrected
[06:16:00] *** Quits: abasdfa (Mibbit@moz-lq5ta4.fl.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:16:03] *** Joins: kempchee (Mibbit@moz-lq5ta4.fl.comcast.net)
[06:16:32] *** Joins: derek_c (derek@moz-samgps.cit.cornell.edu)
[06:16:35] <raph> Guest44: the other dimension is how _easy_ it is to write performance code
[06:16:42] *** Quits: james4k_ (james@moz-e6no8q.consolidated.net) (Ping timeout: 121 seconds)
[06:16:43] <kempchee> is it ok to ask beginner questions in here?
[06:16:45] *** Quits: atomic (atomic@moz-hse8i7.blue.kundencontroller.de) (Connection closed)
[06:16:45] <raph> this is trickier than the question of absolute performance
[06:16:46] <Guest44> raph: totally, and that part is well covered :))
[06:16:54] <Mutabah> kempchee: yes
[06:17:02] <bstrie> Guest44: there's also more subtle stuff to take into account. rust strings honor unicode, so some languages will beat rust in unfair comparisons because they adhere to ascii-only by default
[06:17:19] <Guest44> bstrie that's fantastic. Are you related to the Rust project? Can I use that quote in my presentation?
[06:17:24] <raph> in my experience, rust's idioms support performant, yet high level, code amazingly well
[06:17:31] <bstrie> Guest44: I can give a more eloquent quote if I know the context :P
[06:17:33] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[06:17:40] <Guest44> bstrie the part where Go > Rust performance is considered a bug
[06:17:42] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[06:17:53] <kempchee> I'm trying to understand the "impl Type1 + Type2" syntax
[06:18:04] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[06:18:04] <raph> a major example is iterators, which often give you collection-like behavior without any of the cost of allocating the collection
[06:18:09] <Mutabah> raph: Much of that is because of unsafe (e.g. there's no safe way to break the utf-8 of a str, so str can assume it's always valid)
[06:18:39] <Mutabah> kempchee: Those aren't types there, it's collectively a "trait object"
[06:18:53] <Mutabah> kempchee: (don't worry, it's a relatively new feature)
[06:19:07] <raph> of course, you _can_ write that in any language, but in rust it's natural and easy
[06:19:08] <Mutabah> kempchee: I presume the first is SomeTrait, and the second is Send/Sync ?
[06:19:13] <bstrie> Guest44: I wouldn't use that quote directly, because we don't actually measure ourselves against go. our competitor is C++
[06:19:20] <kempchee> yes
[06:19:26] <kempchee> second is send
[06:19:31] <raph> Guest: when is your presentation?
[06:19:41] <Guest44> bstrie I see
[06:19:44] <Guest44> raph wednesday
[06:19:54] <bstrie> Guest44: rust considers any performance regression relative to C++ to be a bug
[06:20:03] <bstrie> Guest44: then your audience just has to know that go is slower than C++ :P
[06:20:15] <Guest44> :)) cool
[06:20:23] <raph> I hope to write up some of my experiences writing a markdown parser, but sadly the chance it'll be ready by wednesday is slim
[06:20:29] <whipsch> as an aside, i think it's so cool that that's actually an accurate thing to say for rust
[06:20:33] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[06:20:43] <Guest44> bstrie that's a killer
[06:20:56] <kempchee> So what is the significance of the "Send" part?
[06:21:12] <kempchee> furthermore, what does "
[06:21:28] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[06:21:28] <kempchee> "trait Something: A+B+C" mean?
[06:22:00] <Mutabah> kempchee: That syntax means that to implement the trait Something, your type also needs to implent A, B, and C
[06:22:25] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[06:22:25] <Mutabah> kempchee: For "Send", I suggest reading the rust book, which covers it
[06:22:32] <bstrie> Guest44: not that I'm not a rust core team member, just a longstanding volunteer :P
[06:22:48] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[06:24:00] <raph> lemme benchmark my parser against blackfriday, which is one in go...
[06:24:40] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[06:24:58] *** Quits: zzing (textual@moz-jucm1n.cpe.distributel.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[06:26:07] <bstrie> Guest44: if you want a less handwavy quote, we actually seek to make our output to LLVM match what clang generates so that we can make sure we benefit from the same backend optimizations that clang does
[06:26:52] <Guest44> thanks bstrie, this helps so much
[06:27:36] <Guest44> hopefully I'll be able to contribute to the number of people that will try a Hello World in Rust on Wednesday
[06:27:56] <bstrie> Guest44: feel free to show us your slides before you give the presentation :) we can check them for correctness
[06:28:15] <aatch> Woo, finally managed to get my division routine working.
[06:28:34] <pyon> I can the difference of two *T's, just like in C++, right?
[06:28:42] <pyon> Or *mut T's.
[06:28:48] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[06:28:55] <Guest44> thanks bstrie!
[06:28:58] <Mutabah> pyon: Please restate
[06:29:08] <eddyb> aatch: what you conquering?
[06:29:27] <eddyb> Mutabah: pointer distance
[06:29:38] <Mutabah> eddyb: Thought so, just wanted to make sure
[06:29:58] <Sgeo> I understand mutability less and less
[06:29:59] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[06:30:23] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Connection closed)
[06:30:24] <Sgeo> If I have an immutable binding to a &mut, I can mutate through the &mut, but if I have a & to that &mut, I can't
[06:30:25] <aatch> eddyb, multiple-precision arithmetic.
[06:30:34] <aatch> eddyb, division is *hard*
[06:30:40] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[06:30:47] <XMPPwocky> Sgeo: which makes sense
[06:30:51] <eddyb> Sgeo: because & can be shared
[06:30:56] *** Quits: mahdi (mahdi@moz-1m5.q2v.244.151.IP) (Ping timeout: 121 seconds)
[06:31:05] <Mutabah> Should I name my kernel's version of OsStr "OsStr" (which is a little odd), or "ByteStr" (which better shows what it will be used for)
[06:31:07] <pyon> Mutabah: In C++, if I have two pointers (or, more generally, random-access iterators), I can do `std::distance(first, last)`, which gives a result of the appropriate iterator difference type (usually, `std::ptrdiff_t`).
[06:31:09] <Sgeo> So then why is the mutation through immutable binding allowed? Why not make it consistent?
[06:31:13] <Mutabah> Sgeo: &mut would be better named &uniq
[06:31:27] <pyon> Mutabah: I was wondering what the Rust analogue of this would be.
[06:31:37] <Mutabah> Sgeo: Ah, yes, you mean "let a: &mut T"
[06:31:40] <eddyb> Sgeo: because you can't share bindings
[06:31:47] *** Joins: twipeD (wipeD@moz-044kin.dip0.t-ipconnect.de)
[06:31:52] <Mutabah> Sgeo: as eddyb said, and it's more erganomic
[06:32:01] <eddyb> Sgeo: and it would just be redundant noise
[06:32:13] <Mutabah> pyon: You can cast both to usize, and take the difference
[06:32:28] <Mutabah> pyon: It's kinda undefined unless they do point into the same object
[06:32:33] *** Joins: mcanders (carter@moz-1hn.g9o.171.216.IP)
[06:32:33] <eddyb> and divide by sizeof T
[06:32:35] <pyon> Ah!
[06:32:40] *** Joins: arjun_ (arjun@moz-b38.meo.76.171.IP)
[06:32:41] <pyon> eddyb: Yeah.
[06:32:54] <eddyb> we should have a method to do this
[06:33:10] <eddyb> casting to usize is very bad
[06:33:17] <Mutabah> It is
[06:33:18] <raph> Guest44: so I just benchmarked my markdown parser against blackfriday, and it comes in at 147ms vs 210ms
[06:33:32] *** Joins: dellavg (dellavg@moz-9lesb5.retail.telecomitalia.it)
[06:33:50] <pyon> eddyb: Explicitly inserting calls to `std::mem::size_of` is something best avoided as well. It seems to me, at least.
[06:33:51] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[06:33:56] <raph> I think this is pretty typical
[06:34:01] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[06:34:11] <eddyb> Mutabah: also, not undefined, casting to usize clears obligations on the values
[06:34:19] <mcanders> does hash_map::entry::or_insert(x) evaluate x before knowing if there is an entry?
[06:34:43] <Mutabah> eddyb: Normal caveats about differencing two distinct pointers (e.g. one on the heap, one 'static)
[06:34:43] <raph> but it doesn't actually _prove_ anything, it might be possible to make the go code faster, and it's just one application
[06:34:43] <eddyb> mcanders: yes, no lazy eval in Rust
[06:35:07] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[06:35:16] <mcanders> eddyb: i guess thats what or_insert_with is for
[06:35:17] *** Quits: slashus2 (slashus2___@moz-dj7anc.res.rr.com) (Connection closed)
[06:35:17] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[06:35:19] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[06:35:29] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Connection closed)
[06:35:53] *** Joins: ptalbot (ptalbot@moz-h7l0dh.dyn.as47377.net)
[06:36:57] *** Joins: o_pax (o_pax@moz-esa.d1m.2.176.IP)
[06:37:07] <eddyb> casting to usize can lead to ASLR layout leakage
[06:37:31] <talchas> Mutabah: you should make your kernel use utf-8, not-null-terminated strings only :P (what, interop with filesystems from other OSes? pshh)
[06:37:42] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Quit: Leaving)
[06:37:49] *** Quits: o_pax (o_pax@moz-esa.d1m.2.176.IP) (Client exited)
[06:38:20] *** Quits: arjun_ (arjun@moz-b38.meo.76.171.IP) (Quit: Leaving)
[06:39:09] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (Ping timeout: 121 seconds)
[06:39:17] *** Joins: mahdi (mahdi@moz-1m5.q2v.244.151.IP)
[06:40:21] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[06:40:54] *** Joins: avikpal (avikpal@moz-a7b.6u9.79.112.IP)
[06:41:13] *** Quits: ytain (ytain@moz-pr2.aip.175.108.IP) (Connection closed)
[06:43:12] *** Joins: druzac (druzac@moz-hn17us.vc.shawcable.net)
[06:44:09] *** Parts: demilux (demilux@moz-73qa6c.wa.comcast.net) ("Leaving...")
[06:44:19] *** Joins: flavius (flavius@moz-pik2l3.tmpp.le52.8388.2a02.IP)
[06:44:20] *** Joins: demilux (demilux@moz-73qa6c.wa.comcast.net)
[06:44:28] *** Quits: demilux (demilux@moz-73qa6c.wa.comcast.net) (Quit: Leaving...)
[06:44:34] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[06:45:40] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[06:46:31] *** Quits: avikpal (avikpal@moz-a7b.6u9.79.112.IP) (Ping timeout: 121 seconds)
[06:47:11] <scode> Is there currently any high level documentation of std::io (in its up-to-date incarnation)?
[06:49:17] *** Joins: tunnuz (tunnuz@moz-qotoi1.optusnet.com.au)
[06:49:21] *** Quits: frankmcsherry (frankmcsher@moz-87vov1.dyn.telefonica.de) (Connection closed)
[06:49:42] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[06:50:57] <bstrie> scode: in terms of things like "what steps do I take to read from stdin?"
[06:52:01] *** Quits: diegogub (Mibbit@moz-rtcmo6.telecom.net.ar) (Quit: http://www.mibbit.com ajax IRC Client)
[06:52:01] *** Joins: avikpal (avikpal@moz-15l.os6.226.117.IP)
[06:52:03] <scode> I was thinking slightly less basic than that; overall abstractions, intended idioms, etc.
[06:52:48] *** Quits: DemonOne (Avi@moz-3ji606.cablep.bezeqint.net) (Ping timeout: 121 seconds)
[06:53:16] <flavius> Hi
[06:53:19] *** Joins: kvssoft (Mibbit@moz-bbcqf5.jhv.up.ee)
[06:53:36] <flavius> While running cargo test, I get warning: function is never used: `main`, #[warn(dead_code)] on by default. Is there any clean solution to this?
[06:53:52] *** Quits: avikpal (avikpal@moz-15l.os6.226.117.IP) (Connection closed)
[06:54:53] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[06:55:10] *** Quits: derek_c (derek@moz-samgps.cit.cornell.edu) (Ping timeout: 121 seconds)
[06:55:19] *** Joins: nwin (textual@moz-thtps8.pools.vodafone-ip.de)
[06:56:00] *** Quits: mahdi (mahdi@moz-1m5.q2v.244.151.IP) (Ping timeout: 121 seconds)
[06:56:15] <Guest44> Guys, is there any scenario under which a Rust program would leak memory?
[06:56:30] <Guest44> if it didn't make any external calls
[06:56:59] *** Joins: theEXIT (Mibbit@moz-u18.6kp.164.67.IP)
[06:57:06] <whipsch> rc cycles
[06:57:09] *** Joins: derek_c (derek@moz-samgps.cit.cornell.edu)
[06:57:16] <Guest44> yeah, makes sense
[06:57:31] <Guest44> hmm
[06:58:38] <Dabo> flavius, put #[cfg(not(test))] before fn main()
[06:58:55] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[06:59:34] <flavius> Dabo: yeah but the last comment on the issue 12327 on github says it's not a clean solution
[06:59:39] <Dabo> flavius, one conventional way of doing it is to just put everything that can be tested in the lib.rs instead of main.rs, then use #![cfg(not(test))] on main.rs to not compile it at all for tests
[06:59:56] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[07:00:17] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[07:00:18] <flavius> Dabo: yeah, I have two crates, one for the binary, and one for the actual library
[07:00:27] *** Joins: avikpal (avikpal@moz-15l.os6.226.117.IP)
[07:00:30] <Dabo> flavius, why not just have it with one crate with main.rs/lib.rs?
[07:00:41] <druzac> is there a macro to fail a test? assert doesn‚Äôt cut it because of threading
[07:00:41] <kempchee> another basic question:  if I have a trait, what would it mean to impl the trait without specifying a type
[07:00:44] <Dabo> just wondering
[07:00:47] <kempchee> so "struct Type"
[07:01:07] <Mutabah> talchas: Filesystem interop, everywhere else it's unicpde
[07:01:11] <kempchee> "trait Something" and then "impl Something{}"
[07:01:12] <Mutabah> *unicode
[07:01:15] <whipsch> Mutabah: nice encoding error :)
[07:01:49] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Connection closed)
[07:01:57] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[07:02:06] *** Joins: alonlevy (alon@moz-p48.q13.159.94.IP)
[07:03:21] <flavius> Dabo: because there will be different interfaces, the CLI (main.rs) one is just one of them
[07:03:52] <Dabo> flavius, ah, ok
[07:04:09] <Dabo> besides cfg not test, I don't think there's currently another solution
[07:04:19] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[07:04:28] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[07:04:59] <Dabo> #[cfg_attr(test, allow(dead_code))] xD
[07:05:18] <Dabo> that would fix having to annotate the imports as well
[07:05:35] <flavius> Dabo: so the issue raised at https://github.com/rust-lang/rust/issues/12327#issuecomment-92096240 is valid?
[07:05:42] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[07:05:57] <Dabo> flavius, yes
[07:06:18] *** Joins: jviereck (Adium@moz-r772na.dclient.hispeed.ch)
[07:06:24] <Dabo> If you import something and only use it in main(), then have #[cfg(not(test))] on main, you will also need #[cfg(not(test))] on all of those imports
[07:06:29] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[07:06:44] <Dabo> #[cfg_attr(test, allow(dead_code))] wouldn't require any annotations on imports, but it isn't exactly clean either
[07:07:16] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[07:07:40] <flavius> Dabo: why do you consider it not clean?
[07:07:45] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (Quit: Leaving)
[07:08:13] <Dabo> flavius, just looks a bit verbose, but I guess there isn't really anything inherently not clean about it
[07:08:30] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Ping timeout: 121 seconds)
[07:08:40] *** Joins: o_pax (o_pax@moz-esa.d1m.2.176.IP)
[07:09:02] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[07:09:06] *** Quits: dellavg (dellavg@moz-9lesb5.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[07:09:08] *** Quits: tkellen (tkellen@moz-f5ji1n.vt.comcast.net) (Client exited)
[07:09:21] <flavius> Dabo: so, if there would be a way to group imports, then in theory I would only need one #[cfg(not(test))] for that block
[07:09:44] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[07:10:28] <Dabo> flavius, I don't think there is a way to group imports in such a way besides putting them in their own submodule, and that might be a bit pointless - but if you could, yes
[07:11:50] <flavius> Ok, I will just use #[cfg(not(test))] on main, since it works, and as soon problems will arise, I'll know how to fix it. Thanks Dabo 
[07:12:28] <Dabo> no problem
[07:13:51] *** Quits: avikpal (avikpal@moz-15l.os6.226.117.IP) (Connection closed)
[07:14:27] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:14:43] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[07:15:19] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[07:15:42] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[07:18:37] <flavius> I must say, I'm impressed how rust forces me to test the right thing from the beginning and do TDD properly
[07:18:51] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[07:19:08] <flavius> By making doing the wrong thing very costly upfront
[07:19:30] *** Quits: kvssoft (Mibbit@moz-bbcqf5.jhv.up.ee) (Quit: http://www.mibbit.com ajax IRC Client)
[07:19:38] *** Joins: mib_hco52c (Mibbit@moz-7en4n8.members.linode.com)
[07:19:53] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[07:19:59] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[07:20:26] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[07:20:46] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[07:21:00] <bstrie> steveklabnik: googled "rust pointers", first result is http://doc.rust-lang.org/guide-pointers.html , and the redirect is a dead link. are there more manual redirect pages like this?
[07:21:10] *** Quits: Guest44 (textual@moz-8vrlkj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[07:21:47] *** Joins: KLP (KLP@moz-qdcjho.res.rr.com)
[07:22:55] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[07:24:01] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[07:25:27] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[07:25:33] <Lilly> I saw this thread and started thinking http://www.reddit.com/r/rust/comments/35gzw3/how_to_get_this_function_to_work/
[07:25:43] <Lilly> Does it even make sense to box a referencve?
[07:26:04] *** Joins: frankmcsherry (frankmcsher@moz-87vov1.dyn.telefonica.de)
[07:26:27] *** Joins: skade (skade@moz-m9ib3m.pools.vodafone-ip.de)
[07:26:34] <Mutabah> Lilly: not usually
[07:26:46] <Mutabah> Actually, strike that, practically never
[07:27:02] <kimundi> at least not on its own
[07:27:06] <Lilly> doesn't a box need to own it contents?
[07:27:15] <pyon> Is there any way to say "initialize to undefined data"?
[07:27:24] <kimundi> Lilly: Thats not the issue
[07:27:33] <pyon> Basically, I want to create an array of 8191 usizes, but I don't want to bother zeroing it out.
[07:27:42] <kimundi> Lilly: references are also just owned data
[07:27:49] <Lilly> kimundi: oh
[07:27:56] <bstrie> pyon: http://doc.rust-lang.org/std/mem/fn.uninitialized.html might be what you want
[07:27:57] <kimundi> pyon: there is mem::uninitialized() or so
[07:28:02] <pyon> ah ty!
[07:28:37] <pyon> Why is this unsafe even for Copy types?
[07:28:53] <kimundi> Lilly: Box<T> owns the T, &T does not own the T. For Box<&T>, Box owns the &T which in turn does not own the T
[07:29:06] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Ping timeout: 121 seconds)
[07:29:23] <bstrie> pyon: you can have destructors on Copy types
[07:29:26] *** Quits: ptalbot (ptalbot@moz-h7l0dh.dyn.as47377.net) (Ping timeout: 121 seconds)
[07:29:30] <pyon> Oh.
[07:29:30] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[07:29:37] <kimundi> pyon: Because not every possible bit pattern of a Copy type is neccessarly valid. For example &T is Copy, but you surely don't want a random pointer value
[07:29:46] <kimundi> bstrie: Erm, no :)
[07:30:18] <pyon> Ok, the case for &T makes sense.
[07:30:19] <kimundi> types with destructors not being Copy is not a thing that ever stopped happening :)
[07:30:20] *** Quits: BageDev (BageDevimo@moz-og7.cn8.251.116.IP) (Quit: Textual IRC Client: www.textualapp.com)
[07:30:36] <bstrie> pyon: nm, I'm wrong, you can't impl drop for copy types
[07:30:49] <bstrie> "error: the trait `Copy` may not be implemented for this type; the type has a destructor"
[07:30:57] *** Joins: avikpal (avikpal@moz-15l.os6.226.117.IP)
[07:31:05] <bstrie> ah, kimundi beat me to beating myself :P
[07:31:10] <Lilly> Wait, I can't have destructors for i32??????? trash language /s
[07:31:10] <pyon> :.P
[07:31:14] <kimundi> ^^
[07:31:19] <pyon> Lilly: lol
[07:31:24] <bstrie> Lilly: garbage, I'm going back to ATS
[07:31:34] *** Quits: bascule (bascule@moz-1u4.6er.243.162.IP) (Quit: leaving)
[07:31:37] *** Joins: bascule (bascule@moz-1u4.6er.243.162.IP)
[07:31:44] *** Joins: lordblackfox (lordblackfo@moz-ic2.cp7.87.212.IP)
[07:33:03] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Quit: Konversation terminated!)
[07:34:04] *** Joins: drewm1980 (drewm1980@moz-ulk26p.hujf.dasj.1812.2a02.IP)
[07:35:39] <drewm1980> Good morning! Is there a klabnik in the house? 
[07:35:55] *** Joins: tmtwd (Mibbit@moz-0kkm5n.cable.rogers.com)
[07:36:24] <tmtwd> hi
[07:36:32] <kimundi> drewm1980: do you mean steveklabnik ?
[07:36:54] *** Joins: tsurai (tsurai@moz-po4afh.versanet.de)
[07:36:58] <drewm1980> kimundi: and none other :)  Maybe he's more likely to see the ping if I use his full handle?
[07:37:01] <tomaka> it's obviously jack klabnik
[07:37:04] <kimundi> tmtwd: hi
[07:37:25] *** Joins: vosen (vosen@moz-mtm1g4.dynamic.chello.pl)
[07:37:55] *** Joins: murz (murz@moz-nr2kro.wa.comcast.net)
[07:38:44] *** Quits: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca) (Quit: Leaving)
[07:39:32] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[07:40:09] <tsurai> is it intended that to_string and to_owned do not have the same behavior for str ?
[07:41:57] *** Quits: murz (murz@moz-nr2kro.wa.comcast.net) (Ping timeout: 121 seconds)
[07:42:42] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Quit: Leaving)
[07:43:17] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[07:43:41] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[07:43:58] *** Joins: rumpler (Mibbit@moz-fhfe0d.boa.fiberby.dk)
[07:44:05] <pyon> What's the most efficient way to iterate the bits of a usize?
[07:44:07] <kimundi> tsurai: its not really intended, but no better solution has been found for now
[07:44:10] *** Quits: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net) (Connection closed)
[07:44:31] *** Joins: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net)
[07:44:43] *** Joins: idbfs (Mibbit@moz-cd74ls.vc.shawcable.net)
[07:45:06] *** Quits: rumpler (Mibbit@moz-fhfe0d.boa.fiberby.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[07:45:08] <tsurai> I thought that it has the same behavior. But I just found out that it doesn't
[07:45:37] *** Joins: tmtwd_ (tmtwd@moz-pfn.boa.226.99.IP)
[07:45:39] <tsurai> just used it in a C wrapper and ended up in a completly different memory area
[07:45:49] <tmtwd_> is this the official rust channel?
[07:45:56] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[07:46:00] <tsurai> yes it is
[07:46:14] *** Quits: tmtwd (Mibbit@moz-0kkm5n.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[07:46:32] *** Parts: tmtwd_ (tmtwd@moz-pfn.boa.226.99.IP) ("Leaving")
[07:46:39] *** Joins: tmtwd_ (tmtwd@moz-pfn.boa.226.99.IP)
[07:46:55] *** Quits: tmtwd_ (tmtwd@moz-pfn.boa.226.99.IP) (Quit: Leaving)
[07:47:07] *** Joins: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com)
[07:47:10] <tmtwd> ok
[07:47:12] <idbfs> is it possible to concatenate &'static str variables at compile time? I'd like to use std::concat! but that only takes str literals.
[07:47:30] *** Joins: wldcordeiro (wldcordeiro@moz-dvco7o.hmj8.a2nn.0007.2601.IP)
[07:48:33] *** Quits: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net) (Ping timeout: 121 seconds)
[07:48:38] *** Quits: avikpal (avikpal@moz-15l.os6.226.117.IP) (Ping timeout: 121 seconds)
[07:48:42] <kimundi> idbfs: not possible
[07:48:44] <WindowsBunny> idbfs: a variable by definition is not at compile time
[07:49:08] *** Quits: alonlevy (alon@moz-p48.q13.159.94.IP) (Ping timeout: 121 seconds)
[07:49:26] <drewm1980> idbfs: Are you trying to do something fancy that can require more effort?
[07:49:33] <Mutabah> !ice
[07:49:34] <rustbot> The solid form of water, and also the Internal Compiler Error. EVERY ICE IS A BUG (even with an incorrect code). Please report any ICE according to: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports
[07:49:41] <drewm1980> idbfs: or are you just wishing you could stick string literals next to each other like in C or something?
[07:49:48] <Dabo> WindowsBunny, well, if it's &'static the compiler should know what it is at compile time
[07:49:51] <Dabo> afaik
[07:49:53] <bstrie> tsurai: .to_string only exists on str so that it can be used from generic code that expects a type that implements ToString
[07:50:01] <tmtwd> so reference pointers are for values stored in the stack and boxed pointers are for values stored on the heap?
[07:50:11] <bstrie> tsurai: you should use .to_owned if all you care about is getting a String from a str
[07:50:13] <Dabo> well, I guess not, because of logic
[07:50:20] <Mutabah> tmtwd: ... Kinda
[07:50:28] <Mutabah> tmtwd: &-ptr is a general borrow
[07:50:33] <WindowsBunny> Dabo: only if you have const foo: &'static str
[07:50:34] <pyon> tmtwd: Reference pointers are for anything you don't own.
[07:50:38] <Mutabah> tmtwd: Box is an owned pointer (where the data is on the heap)
[07:50:46] <pyon> tmtwd: Regardless of where it's stored.
[07:50:51] <WindowsBunny> Dabo: then theoretically rust can analyze two consts at compile time to concatenate them
[07:50:51] <bstrie> tsurai: in the future rust may have some form of type specialization that allows .to_string on &str to be the same as .to_owned
[07:50:56] <tmtwd> i see
[07:51:12] <WindowsBunny> bstrie: there's also .into()
[07:51:17] <kimundi> tmtwd: its not as binary as that. reference pointers can point anywhere, including stack, heap, etc. Box pointers put the thing they point at on the heap, but thats not really important or them to function
[07:51:19] *** Quits: tunnuz (tunnuz@moz-qotoi1.optusnet.com.au) (Quit: Leaving)
[07:51:45] <pyon> Is there any concise way to do this in Rust? *ptr++
[07:51:49] <Dabo> WindowsBunny, true, but that could blow up space fast I would think, like if a library function used a match and could return a huge number of different strings
[07:51:55] <bstrie> WindowsBunny: look, I'm trying to keep things simple :P
[07:51:56] <WindowsBunny> rusti: let s: String = "hi".into(); s
[07:51:58] -playbot- "hi"
[07:52:01] <WindowsBunny> :D
[07:52:01] <Mutabah> pyon: Not really
[07:52:09] <Mutabah> pyon: That's a C readability wart
[07:52:11] <WindowsBunny> bstrie: This is Rust, nothing is simple
[07:52:14] <kimundi> pyon: um, is that *(ptr++) or (*ptr)++ ?
[07:52:17] <Mutabah> pyon: You could make a wrapper that does it
[07:52:21] <bstrie> WindowsBunny: lots of things are simple in rust, just not strings...
[07:52:23] <Mutabah> kimundi: It's the former
[07:52:35] <WindowsBunny> bstrie: strings are hard
[07:53:06] <WindowsBunny> bstrie: blame humans for creating a history full of hundreds of languages with a bazillion symbols and rules
[07:53:06] <Dabo> pyon, there really isn't - what would you use that for?
[07:53:12] <kimundi> pyon: *ptr.offset(1)
[07:53:24] <pyon> kimundi: That would be *++ptr
[07:53:25] <Mutabah> kimundi: Nope
[07:53:34] <kimundi> arg, right silly C
[07:53:38] <kimundi> nevermind then
[07:53:38] <Mutabah> kimundi: Welcome to C land, where there's pre/post increment and odd operator ordering
[07:53:39] <WindowsBunny> um
[07:53:55] <WindowsBunny> *{let t=ptr;ptr.offset(1);t} ???
[07:53:59] <pyon> Dabo: I'm making a runtime system for a functional language, and right now I'm making the garbage collector.
[07:54:08] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[07:54:13] <kimundi> pyon: *{let tmp = ptr; ptr = ptr.offset(1); tmp }
[07:54:21] <pyon> Dabo: I want to adjust the pointers to objects that have been moved in the heap.
[07:54:23] <WindowsBunny> kimundi: I beat you to it :D
[07:54:28] <WindowsBunny> kimundi: I demand a cookie
[07:54:42] * Mutabah hands WindowsBunny a cookieclicker
[07:54:47] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[07:54:51] <pyon> Mmm.
[07:54:52] <kimundi> WindowsBunny: Have half a cookie, yours has bugs in it :P
[07:54:54] *** Joins: albertofem (albertofem@moz-03pmou.staticIP.rima-tde.net)
[07:54:59] <WindowsBunny> kimundi: orite
[07:55:01] <tmtwd> pyon: what is a runtime system?
[07:55:05] <WindowsBunny> kimundi: Gotta mutate ptr Q_Q
[07:55:23] * WindowsBunny throws the half a cookie in kimundi's face and goes off to grouch
[07:55:23] <kimundi> My original offset() use had that bug as well though
[07:55:39] <kimundi> :D
[07:55:51] <frankmcsherry> should upgrade rustbot to run lints of code snippets it sees
[07:55:56] <frankmcsherry> on*
[07:55:57] <drewm1980> pyon: and WindowsBunny: why is a temp necessary in those snippets?
[07:56:02] <pyon> tmtwd: A program, typically written in a low-level language, that provides basic services like memory management, green thread scheduling, etc. to programs written in a higher-level language.
[07:56:08] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[07:56:08] *** Joins: mib_5xm2ox (Mibbit@moz-03pmou.staticIP.rima-tde.net)
[07:56:09] <WindowsBunny> drewm1980: because it needs to deref the old value
[07:56:11] <pyon> drewm1980: Yes.
[07:56:32] *** Quits: albertofem (albertofem@moz-03pmou.staticIP.rima-tde.net) (Quit: )
[07:56:38] <bstrie> drewm1980: it's trying to transliterate a very specific pattern from C code
[07:56:41] *** Quits: mib_5xm2ox (Mibbit@moz-03pmou.staticIP.rima-tde.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:57:16] <frankmcsherry> does *{ ptr = ptr.offset(1); ptr.offset(-1) } combine the "best" of both worlds? :)
[07:57:32] <kimundi> frankmcsherry: brrrrr
[07:57:48] <pyon> frankmcsherry: I doubt it. :-p
[07:58:34] <kimundi> tmtwd: for example, the Java virtual machine is a runtime
[07:58:42] <drewm1980> pyon: and WindowsBunny thanks; I am still learning to juggle in my head which values are copied and which are moved...
[07:58:51] <tmtwd> I see
[07:58:59] <drewm1980> so pointers are always cloned implicitly, like integers...
[07:59:13] <bstrie> hey everyone, I just realized: if anyone ever criticizes rust for having `Vec` instead of `Vector`, just tell them that rust was being conscientious to people doing physics simulations who want to use the name `Vector` themselves :P
[07:59:17] <WindowsBunny> drewm1980: raw pointers impl Copy
[07:59:26] <kimundi> drewm1980: err, not exactly
[07:59:33] <pyon> bstrie: I never understood why C++ calls vector what it calls vector. :-)
[07:59:39] *** Joins: albertofem (textual@moz-03pmou.staticIP.rima-tde.net)
[07:59:40] <WindowsBunny> drewm1980: clone is never called implicitly
[07:59:43] <bstrie> pyon: and now we're stuck with it!
[07:59:50] <pyon> Plus Vec is shorter anyway. Shorter is good for common stuff. :-)
[07:59:51] <bstrie> pyon: just like "string"
[07:59:57] <pyon> Yep.
[08:00:01] <WindowsBunny> drewm1980: What happens with Copy, is the type is moved, but the original is not destroyed
[08:00:14] <WindowsBunny> drewm1980: and moving/copying is just a memcpy effectively
[08:00:39] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[08:01:15] <albertofem> hi everyone
[08:01:27] <drewm1980> so is Copy fo memcpy-able types, and Clone, for stuff that requires a deep copy, but provides logic for it?
[08:01:36] <drewm1980> for
[08:01:37] <ville> pyon: however such naming convention from the standard library sets the presedence for the rest of the eco system possibly
[08:01:50] <WindowsBunny> drewm1980: Copy: Clone, so anything that is copyable is also cloneable
[08:01:56] <kimundi> drewm1980: things are never implicitly _cloned_ in Rust, since clone() is just a library function and might do expensive things. WHat happens implicitly is shallow copies of the bits of a value from one memory location to another. These shallow copyies either result in a "logical copy" if the type is Copy, like integer or references are, or in a "logical move" if the types is not Copy, like for Boxes or vectors
[08:02:04] <bstrie> albertofem: hello
[08:02:21] <WindowsBunny> kimundi: a move is just a copy where the original can no longer be accessed
[08:02:21] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[08:02:23] <pyon> WindowsBunny: Oh, so that's been fixed? I still remember when basic types had to manually implement Clone.
[08:02:40] <WindowsBunny> pyon: Oh, you still have to implement Clone yourself
[08:02:49] <WindowsBunny> pyon: It's just that Copy requires Clone to be implemented :D
[08:02:52] <pyon> Ah!
[08:02:57] *** Quits: idbfs (Mibbit@moz-cd74ls.vc.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:03:01] <WindowsBunny> pyon: Unless you are a fixed size array
[08:03:05] <WindowsBunny> in which case you are Copy but not Clone
[08:03:09] <WindowsBunny> and can cause the compiler to ICE
[08:03:13] <bstrie> pyon: but you can do #[derive(Copy, Clone)] and it's fine
[08:03:25] <WindowsBunny> bstrie: Unless you have a fixed size array :D
[08:03:27] <pyon> Ah, okay!
[08:03:42] <drewm1980> WindowsBunny: in most places where a "logical move" happens, is the compiler optimizing out the memcpy?
[08:03:42] *** Joins: ptalbot (ptalbot@moz-h7l0dh.dyn.as47377.net)
[08:03:53] <kimundi> drewm1980: probably
[08:03:58] <WindowsBunny> drewm1980: llvm is typically very good at optimizing out moves and copies wherever feasible
[08:04:06] <drewm1980> WindowsBunny: er, at least if we're talking about stuff in one stack frame?
[08:04:10] <SneakySnake> I made a macro for that https://github.com/crumblingstatue/crusty-chip/blob/master/src/lib.rs#L52
[08:04:11] <aatch> drewm1980, there won't be a memcpy if there doesn't need to be one, most of the time.
[08:04:19] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Quit: Lost terminal)
[08:04:22] <WindowsBunny> drewm1980: just remember to enable optimizations
[08:04:40] <kimundi> drewm1980: YOu'D have to check explicitly, llvm does a lot of magic, but usuually if a place where such a optimization would make sense seems obvious to you, the compiler probably thinks so as well
[08:04:43] <bstrie> WindowsBunny: not sure what you mean, it works fine to derive copy and clone on a struct containing a fixed-size array
[08:04:49] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[08:04:55] <WindowsBunny> bstrie: Unless the array is above a certain size
[08:05:13] <WindowsBunny> bstrie: Since the Clone impls are done in the library for arrays up to a specific size only
[08:05:17] <aatch> drewm1980, if you're just shuffling between variables in a function, then I'd be surprised to see an unnecessary copy.
[08:05:20] <bstrie> WindowsBunny: ah, well we just won't talk about that :P
[08:05:23] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[08:05:24] <SneakySnake> It's silly, I wish we had integer parameterization
[08:05:32] <aatch> SneakySnake, we're almost there.
[08:05:34] <WindowsBunny> bstrie: It bites me in winapi all the time :D
[08:05:35] <bstrie> SneakySnake: feel free to propose the RFC
[08:05:41] <SneakySnake> I'm not that smart
[08:05:44] <drewm1980> thanks guys; don't need more info on those optimizations; "don't worry about it yet" is a good answer :)
[08:05:47] <kimundi> bstrie: That already happened :P
[08:05:49] * WindowsBunny proposes that Rust stops sucking and just has all the features he wants
[08:05:52] <bstrie> WindowsBunny: just figure out what specific sizes you want and we'll add them in as special cases :)
[08:05:58] <WindowsBunny> :|
[08:06:01] <bstrie> kimundi: where is it?
[08:06:07] <aatch> Special case all the things!
[08:06:12] * WindowsBunny stabs bstrie's eyes out with a wooden spoon
[08:06:24] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[08:06:58] *** Quits: nicoo (nico@moz-1v2b7a.citronna.de) (Ping timeout: 121 seconds)
[08:07:16] <kimundi> bstrie: https://github.com/rust-lang/rfcs/pull/884
[08:07:38] *** Joins: avikpal (avikpal@moz-15l.os6.226.117.IP)
[08:08:14] *** Quits: o_pax (o_pax@moz-esa.d1m.2.176.IP) (Client exited)
[08:08:38] <bstrie> aatch: is this rfc what you mean when you say we're almost there? ^
[08:09:01] <Manishearth> We should just make all types work as values and vice versa
[08:09:11] <Manishearth> free HKT, free int params
[08:09:16] <Manishearth> everything free
[08:09:26] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Ping timeout: 121 seconds)
[08:09:29] <Manishearth> and then we'll be Javascript just like Mozilla wanted us to be in the first place
[08:09:35] <kimundi> xD
[08:09:37] <bstrie> Manishearth: think of the poor grammar!
[08:10:13] <bstrie> the type/expression distinction is all that's keeping us from falling apart at the seams
[08:10:24] <albertofem> what is the best guide out there about the borrow checker?
[08:10:32] <bstrie> albertofem: how much do you want to know
[08:10:46] <bstrie> albertofem: do you want to know how it operates on a deep technical level?
[08:11:28] <albertofem> user level should be enough
[08:11:58] <bstrie> albertofem: have you read http://doc.rust-lang.org/nightly/book/references-and-borrowing.html ?
[08:12:14] <drewm1980> bstrie: Aw crap, now I want to know how the borrow checker works on a deep technical level :)
[08:12:15] <Manishearth> bstrie: let x = String; x.prototype.magic = |x|x+1 ; 
[08:12:53] <bstrie> drewm1980: see the readme at https://github.com/rust-lang/rust/tree/master/src/librustc_borrowck/borrowck , good luck :)
[08:12:59] <Manishearth> lol
[08:13:02] <albertofem> @bstrie yes
[08:13:23] <drewm1980> bstrie: lol I'm not sure if I want to ~learn it; I just want to ~know it :)
[08:13:24] *** Quits: dustinm` (dustinm@moz-1c1j82.fu2o.sj0n.5300.2607.IP) (Ping timeout: 121 seconds)
[08:13:39] <drewm1980> bstrie: thanks for the link though; I go read :)
[08:14:14] <bstrie> albertofem: I'm sure there are other references floating around, but not sure how up-to-date they are. what questions do you still have?
[08:15:52] <albertofem> "cannot borrow immutable borrowed content xxx as mutable"
[08:15:59] *** Joins: andresv (textual@moz-kvanfr.dyn.estpak.ee)
[08:16:05] <albertofem> I can't seem to find much info about this error on the internet
[08:16:05] *** Quits: siddhartharao17 (uid57287@moz-opec5r.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[08:16:58] <myname> albertofem: you camnot grant write access if you don't have it
[08:18:48] <bstrie> albertofem: when the compiler gives you that error message, does it also print an error code? they look like [E00234]
[08:19:19] *** Quits: andresv (textual@moz-kvanfr.dyn.estpak.ee) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[08:19:25] <albertofem> nope
[08:20:21] <bstrie> albertofem: what it means is that you have a reference to some value, and you're trying to hand out a mutable reference to that same value, which isn't allowed
[08:20:28] <bstrie> albertofem: if you have some code we can explain what's wrong
[08:22:47] *** Joins: areski (areski@moz-adq529.user.ono.com)
[08:22:57] <albertofem> just a sec
[08:23:57] *** Quits: kazimuth (james@moz-n85.696.189.18.IP) (Quit: Textual IRC Client: www.textualapp.com)
[08:25:08] *** Joins: alonlevy (alon@moz-4jqdpb.telavivmakers.org)
[08:25:19] *** Joins: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk)
[08:25:35] <albertofem> I think I got it now
[08:26:01] <albertofem> i need to pass a mutable reference instead of a reference, right?
[08:26:30] <bstrie> albertofem: if you have a mutable reference then you can hand out a mutable reference, yes
[08:27:25] <albertofem> oh yes, compiling now :)
[08:27:50] *** Joins: o_pax (o_pax@moz-esa.d1m.2.176.IP)
[08:29:13] *** Joins: Ms2ger (Ms2ger@moz-2md1ol.isp.belgacom.be)
[08:31:04] *** Joins: dustinm` (dustinm@moz-es6jb7.ip-167-114-152.net)
[08:31:10] <albertofem> thx for the help
[08:31:50] <albertofem> just one more question about the print! macro
[08:32:08] <albertofem> it doesn't seem to flush properly to stdout
[08:32:28] <albertofem> or at least not like the println! macro does
[08:33:05] *** Quits: derek_c (derek@moz-samgps.cit.cornell.edu) (Ping timeout: 121 seconds)
[08:33:21] <kimundi> albertofem: stdout in general tends to only flush automatically on newlines. This isn't even Rust specific
[08:34:22] *** Joins: lian (lian@moz-cdh.mk5.71.223.IP)
[08:35:04] <Dabo> albertofem, you can manually flush std::io::stdout() if you want to afaik
[08:35:12] <Dabo> io::stdout().flush() I *think*
[08:35:35] <albertofem> i thought so, then I guess i should flush explicitly
[08:35:43] *** Parts: lian (lian@moz-cdh.mk5.71.223.IP) ()
[08:37:05] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[08:37:16] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[08:39:35] *** Quits: mcanders (carter@moz-1hn.g9o.171.216.IP) (Ping timeout: 121 seconds)
[08:41:53] *** Quits: kempchee (Mibbit@moz-lq5ta4.fl.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:42:40] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:43:38] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[08:45:29] *** Quits: o_pax (o_pax@moz-esa.d1m.2.176.IP) (Client exited)
[08:46:22] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:46:24] *** Quits: turtil (turtil@moz-8am.857.98.121.IP) (Ping timeout: 121 seconds)
[08:47:03] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[08:49:06] *** Joins: p1start (p1start@moz-nftjhe.org)
[08:50:14] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[08:50:47] *** Joins: bombless (_@moz-uag.piv.41.59.IP)
[08:52:12] <fredy> hello all o/, I am wondering if there is any difference between test1 and test2 return types in http://is.gd/UeH8G3 thx
[08:52:45] *** Quits: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[08:53:02] *** Joins: newbie (eibwen@moz-co6gee.dip0.t-ipconnect.de)
[08:53:14] *** Joins: }ls{ (uhelp@moz-89dgcv.dip0.t-ipconnect.de)
[08:54:42] <Mutabah> fredy: yes, there is
[08:54:48] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[08:55:11] <Mutabah> fredy: The first returns Self (i.e. the type that is implementing the trait)
[08:55:29] *** Joins: eddyb_ (eddyb@moz-9pm.kjd.26.188.IP)
[08:55:30] <Mutabah> fredy: While the second can return any implementer of rthe trait (and is not very useful, and might not compile, not sure)
[08:55:52] *** Quits: skade (skade@moz-m9ib3m.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[08:56:17] <fredy> oh now I got it... thx Mutabah
[08:57:34] <drewm1980> I am reading http://doc.rust-lang.org/nightly/book/trait-objects.html
[08:57:47] <drewm1980> and have a question for steveklabnik or anyone else.
[08:58:02] *** Quits: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk) (Ping timeout: 121 seconds)
[08:58:13] <drewm1980> Basically, is it the role of the function definer,
[08:58:28] <drewm1980> or the function caller, to choose between static vs. dynamic dispatch?
[08:59:12] *** Joins: maximih (maximih@moz-bmkp9s.k49b.su5n.2002.2001.IP)
[08:59:34] <pyon> drewm1980: Definer IIUC.
[08:59:59] <pyon> drewm1980: Because the definer specifies either a bound generic or a trait object as the argument.
[09:00:10] *** Joins: turtil (turtil@moz-98pgrn.orcon.net.nz)
[09:00:36] *** Joins: sonder (chatzilla@moz-nt8r49.idi.ntnu.no)
[09:00:42] <drewm1980> pyon: but the book is also giving an example where the Zcaller can pass either a concrete type(?) or cast first to a trait object...
[09:00:49] *** Joins: derek_c (derek@moz-samgps.cit.cornell.edu)
[09:00:56] <aatch> Bit of both, actually. The definer can prevent static dispatch, but the caller can pass a value that ends up doing dynamic dispatch.
[09:01:35] <pyon> Anyway, static dispatch is the correct solution most of the time, it seems to me.
[09:01:43] <bluss> for example you can pass in an &mut FnMut()  trait object where F: FnMut() is expected
[09:01:51] <aatch> Kind of like statically-dispatching to dynamic dispatch.
[09:02:03] <drewm1980> but it looks like pointers can get coerced into trait objects, resulting in dynamic dispatch...
[09:02:17] *** Quits: wldcordeiro (wldcordeiro@moz-dvco7o.hmj8.a2nn.0007.2601.IP) (Ping timeout: 121 seconds)
[09:02:48] *** Quits: niconii (nicole@moz-5gqgia.frgo.qwest.net) (Quit: leaving)
[09:03:06] <pyon> If "Foo: Bar", then a "&Foo" is certainly a "&Bar". Ditto for s/&/&mut/g
[09:03:07] *** Joins: skade (skade@moz-m9ib3m.pools.vodafone-ip.de)
[09:03:38] <pyon> And Boxes as well.
[09:03:40] *** Joins: Johannes (Johannes@moz-ufvp1b.nttpc.ne.jp)
[09:03:48] <drewm1980> so in the docs where do_something is called on a string,
[09:03:54] <kagami> Hi. Is it possible to somehow fix it: http://is.gd/rF5YC8 ? I don't want to create intermediate values. As you can see, it *can't* be error here, I'm just using pure result of one function in another.
[09:03:58] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Connection closed)
[09:03:59] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[09:04:14] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[09:04:17] <kagami> intermediate variables*
[09:04:19] *** Joins: daxhuiberts (textual@moz-vo5n7t.chello.nl)
[09:04:21] *** Joins: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at)
[09:04:23] <drewm1980> the caller passed in a reference, which got coerced to the trait object (rather than a reference to the concrete type), resulting in dynamic dispatch.
[09:05:44] <pyon> Is there any way to make this code more idiomatic? "adjust" in particular annoys me a lot: https://github.com/eduardoleon/pyon/blob/master/plum/memory.rs
[09:05:52] *** Quits: albertofem (textual@moz-03pmou.staticIP.rima-tde.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[09:07:16] *** Joins: albertofem (textual@moz-03pmou.staticIP.rima-tde.net)
[09:07:34] <pyon> That `obj = obj.offset(1)` makes me thing something could be done with iterators instead.
[09:07:39] <drewm1980> So if you are writing a call to some function you haven't carefully read the docs for, and you want to stick to static dispatch by default,
[09:07:58] <WindowsBunny> pyon: You're using raw unsafe pointers, that's simply not idiomatic
[09:07:59] <tmtwd> what is the difference between structs and enums?
[09:08:10] <drewm1980> you should always first try passing in the value, since if you pass a reference, it might result in dynamic dispatch?
[09:08:23] *** Quits: dinfuehr (dinfuehr@moz-dmodq0.highway.telekom.at) (Ping timeout: 121 seconds)
[09:08:44] <bluss> drewm1980: there is no uncertainity
[09:08:46] <drewm1980> tmtwd: structs contain all othe stuff in them at once.
[09:08:49] <bluss> drewm1980: function signature will tell
[09:08:53] <pyon> WindowsBunny: Well, I think I have good reasons for writing unsafe code.
[09:08:58] <drewm1980> tmtwd: enums hold just one of them at a time.
[09:09:04] <WindowsBunny> drewm1980: A function either takes a trait object or a generic type parameter
[09:09:22] <WindowsBunny> drewm1980: So it's not up to the caller to choose
[09:09:24] <duesenfranz_> tmtwd: since you seem to have a lot of questions... have you read the book? http://doc.rust-lang.org/book/ :)
[09:09:36] *** Joins: Nextra (Nextra@moz-t2qpq6.ewe-ip-backbone.de)
[09:09:42] <pyon> WindowsBunny: At least, I see no way how I could rewrite "compact" as safe code, without loss of efficiency.
[09:09:46] <WindowsBunny> drewm1980: That said, if they take a generic type parameter, technically a trait object still satisfies that
[09:09:47] <tmtwd> duesenfranz_, I am reading the book now
[09:09:52] <bluss> WindowsBunny: when a trait object impls the trait in question, then the caller can choose
[09:10:00] <duesenfranz_> tmtwd: :) nice!
[09:10:17] <drewm1980> WindowsBunny: Right, I'm just trying to figure out the best practice for callers to avoid accidental dynamic dispatch.
[09:10:18] <WindowsBunny> in which case, so long as you don't cast a pointer to the object to a trait object, then it'll do static dispatch
[09:10:31] <WindowsBunny> drewm1980: don't accidentally do an explicit cast to a trait object :|
[09:10:44] <daxhuiberts> Hi, I'm trying to get the first element of a vector or return a default value. I'm trying something like `vec![1].first().unwrap_or_default()`, but that doesn't work because first() is an operation on slice and I'm not able to get it working.
[09:11:05] *** Quits: avikpal (avikpal@moz-15l.os6.226.117.IP) (Connection closed)
[09:11:07] *** Joins: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP)
[09:11:11] *** Quits: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com) (Quit: Leaving)
[09:11:13] <duesenfranz_> daxhuiberts: vec![1].get(0). ...
[09:11:18] <Mutabah> daxhuiberts: vec.get(0).unwrap_or()...
[09:11:18] <duesenfranz_> get returns an option
[09:11:19] <WindowsBunny> drewm1980: So never cast it to &SomeTrait or Box<SomeTrait>
[09:11:19] <drewm1980> WindowsBunny: avoiding the explicit cast is easy; I'm thinking of coercion...
[09:11:28] <daxhuiberts> I mean, first() returns an Option<&T> instead of an Option<T> which un.. Ah thanks!
[09:11:43] <bluss> daxhuiberts: .get() returns Option<&T> as well
[09:12:05] <duesenfranz_> axhuiberts: but there would be get_mut
[09:12:08] <WindowsBunny> drewm1980: Are there cases where a generic type parameter can coerce your object to a trait object?
[09:12:21] <duesenfranz_> axhuiberts: which would return Option<&mut T>
[09:12:28] *** Joins: csoriano (csoriano@moz-g6rkdc.net.upcbroadband.cz)
[09:12:29] *** Joins: v21 (vee@moz-lhp.bqs.204.223.IP)
[09:12:35] <Lilly> Hello! Anyone good with rustc-serialize? I'm trying to use #[derive(RustcDecodable, RustcEncodable)] with json but I get an error
[09:12:48] <Lilly> src\main.rs:57:10: 57:24 error: the trait `rustc_serialize::serialize::Decodable` is not implemented for the type `rustc_serialize::json::Json` [E0277]
[09:13:04] <daxhuiberts> Ah yes. Alternatively, is there a way to go from Option<&T> to Option<T>?
[09:13:22] <Mutabah> daxhuiberts: .cloned()? (dunno if that exists on Option)
[09:13:25] <aatch> WindowsBunny, as far as I'm aware, coercion is actually slightly broken with bounded generics. Coercions that *should* happen (like deref coercions) won't actually happen.
[09:13:28] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[09:13:32] <Mutabah> daxhuiberts: Or, .map(|x| *x)
[09:13:34] <drewm1980> WindowsBunny: in the example in the book, it looks like the caller passed in a string, typed an extra & to pass it by reference, and dynamic dispatch happened without an explicit cast.
[09:13:43] *** Quits: choplin (choplin@moz-hkulcc.t6mc.g9m6.001a.240d.IP) (Connection closed)
[09:13:55] <WindowsBunny> drewm1980: which example?
[09:14:12] <drewm1980> https://play.rust-lang.org/?code=trait%20Foo%20%7B%20fn%20method(%26self)%20-%3E%20String%3B%20%7D%0Aimpl%20Foo%20for%20u8%20%7B%20fn%20method(%26self)%20-%3E%20String%20%7B%20format!(%22u8%3A%20%7B%7D%22%2C%20*self)%20%7D%20%7D%0Aimpl%20Foo%20for%20String%20%7B%20fn%20method(%26self)%20-%3E%20String%20%7B%20format!(%22string%3A%20%7B%7D%22%2C%20*self)%20%7D%20%7D%0A%0Afn%20do_something(x%3A%20%2
[09:14:13] <drewm1980> 6Foo)%20%7B%0A%20%20%20%20x.method()%3B%0A%7D%0A%0Afn%20main()%20%7B%0A%20%20%20%20let%20x%20%3D%20%22Hello%22.to_string()%3B%0A%20%20%20%20do_something(%26x)%3B%0A%7D%0A
[09:14:17] <aatch> drewm1980, coercion will only happen if it's actually required.
[09:14:20] <Mutabah> drewm1980: use the share link
[09:14:21] <drewm1980> aw jeez...
[09:14:37] <drewm1980> http://is.gd/lREz9x
[09:14:37] <flavius> Is there any way of marking TODOs in the documentation?
[09:14:57] <WindowsBunny> drewm1980: That function takes a trait object, not a type parameter
[09:14:58] <aatch> flavius, not built into the language, no.
[09:15:08] <WindowsBunny> drewm1980: Therefore that function will _always_ use dynamic dispatch
[09:15:08] *** Quits: ptalbot (ptalbot@moz-h7l0dh.dyn.as47377.net) (Ping timeout: 121 seconds)
[09:15:12] *** Quits: turtil (turtil@moz-98pgrn.orcon.net.nz) (Ping timeout: 121 seconds)
[09:15:25] <daxhuiberts> Mutabah: |x|*x won't because cannot move out of borrowed content, I'll try do something wit clone.
[09:15:46] <duesenfranz_> daxhuiberts: .map(|x| x.clone()) ?
[09:16:16] <aatch> daxhuiberts, the only way to code from `Option<&T> -> Option<T>` is with a clone (or a copy, if T:Copy, but the clone is more general).
[09:16:33] <Mutabah> daxhuiberts: However, you can do .unwrap_or(&value)
[09:16:50] <Mutabah> where value is a constant (... I think?)
[09:16:55] *** Joins: nedp (nedp@moz-vg6vvt.bigpond.net.au)
[09:17:05] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[09:17:28] <duesenfranz_> where value must live at least as long as the option, i think
[09:17:33] <Mutabah> playbot: (None).unwrap_or(&1)
[09:17:34] -playbot- 1
[09:17:49] <aatch> duesenfranz_, constants are special though.
[09:21:22] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[09:22:51] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[09:23:01] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[09:23:18] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[09:24:42] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[09:25:05] *** Joins: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com)
[09:26:15] *** Joins: umit (umit@moz-51i.nqs.45.92.IP)
[09:26:29] <filsmick> what's the recommended way of using and_then, or_else and friends to replace match when you're returning from using this match?
[09:26:41] *** Joins: murz (murz@moz-nr2kro.wa.comcast.net)
[09:26:52] <Ms2ger> "Don't"
[09:27:12] <filsmick> "Alright"
[09:27:26] <drewm1980> http://is.gd/1cXA44
[09:27:28] <filsmick> it's just that my current construct doesn't feel right
[09:27:58] <drewm1980> WindowsBunny: I commented the heck out of that example.  Could you or someone glance at my comments and tell me if my understanding is correct?
[09:28:03] <filsmick> may I show it? https://gist.github.com/anonymous/c78bd0caa607c3874c1e
[09:28:26] *** Joins: pgonda (peter@moz-otulp7.ma.comcast.net)
[09:28:48] <WindowsBunny> "wrapper function with dynamic dispatch that does static dispatch internally?"
[09:28:56] <WindowsBunny> drewm1980: It simply does dynamic dispatch
[09:29:04] *** Joins: turtil (turtil@moz-98pgrn.orcon.net.nz)
[09:29:44] <WindowsBunny> drewm1980: But other than that, seems fine
[09:29:48] * WindowsBunny sneezes on drewm1980
[09:29:52] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[09:30:07] <drewm1980> WindowsBunny: right, do_something does dynamic dispatch... ohh I see what I wrote is inconsistent
[09:30:13] *** Joins: ainieco (ainieco@moz-571.ksd.162.188.IP)
[09:30:16] <ainieco> hello
[09:30:16] *** Joins: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net)
[09:30:18] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[09:30:20] <filsmick> hello!
[09:30:21] <ainieco> how to check if file exists in rust?
[09:30:21] *** Joins: jviereck1 (Adium@moz-r772na.dclient.hispeed.ch)
[09:30:22] *** Quits: jviereck (Adium@moz-r772na.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[09:30:39] <Lilly> Hello! Anyone good with rustc-serialize? I'm trying to use #[derive(RustcDecodable, RustcEncodable)] with json but I get an error
[09:30:40] <Lilly> src\main.rs:57:10: 57:24 error: the trait `rustc_serialize::serialize::Decodable` is not implemented for the type `rustc_serialize::json::Json` [E0277]
[09:30:42] <drewm1980> WindowsBunny: http://is.gd/1cXA44
[09:30:43] *** Quits: murz (murz@moz-nr2kro.wa.comcast.net) (Ping timeout: 121 seconds)
[09:30:47] <Lilly> Sorry, re-post
[09:30:55] <Lilly> but idk what's wrong
[09:30:58] *** Quits: kjsebastian (kjsebastian@moz-ue8.apm.161.202.IP) (Connection closed)
[09:31:02] <WindowsBunny> drewm1980: Identical to last link
[09:31:17] *** Joins: o_pax (o_pax@moz-esa.d1m.2.176.IP)
[09:31:30] <drewm1980> WindowsBunny: http://is.gd/Q3mwpb
[09:31:40] <filsmick> ainieco: http://doc.rust-lang.org/std/fs/trait.PathExt.html#tymethod.exists
[09:31:41] *** Quits: derek_c (derek@moz-samgps.cit.cornell.edu) (Ping timeout: 121 seconds)
[09:31:56] *** Quits: KLP (KLP@moz-qdcjho.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[09:32:06] <filsmick> ainieco: do you need a little example?
[09:32:10] <WindowsBunny> drewm1980: k
[09:32:45] *** Quits: pgonda (peter@moz-otulp7.ma.comcast.net) (Ping timeout: 121 seconds)
[09:32:57] <ainieco> filsmick: thanks, Path::new(str).exists() should work probably
[09:33:03] <Mutabah> Lilly: It appears that Decodable isn't implemented on Json
[09:33:07] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[09:33:10] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[09:33:26] <Lilly> Mutabah: but... why
[09:33:44] <Lilly> Mutabah: the examples use it like that
[09:33:46] *** Joins: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com)
[09:34:14] *** Joins: arBmind (Andreas@moz-1il8vu.adsl.alicedsl.de)
[09:34:18] <Mutabah> Lilly: Which examples?
[09:34:24] <Lilly> http://doc.rust-lang.org/rustc-serialize/rustc_serialize/json/index.html
[09:34:36] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[09:35:00] <Mutabah> Lilly: I don't see those deriving Decodable on something containing a Json
[09:35:16] <Lilly> wait...
[09:35:21] *** Quits: mark_edward (mark@moz-dg4mrp.in.comcast.net) (Ping timeout: 121 seconds)
[09:35:32] <filsmick> ainieco: no it won't
[09:35:43] <filsmick> ainieco: you need to import std::fs::PathExt
[09:35:54] *** Joins: mark_edward (mark@moz-dg4mrp.in.comcast.net)
[09:35:57] <filsmick> aidanhs: and use the `path_ext` feature
[09:36:07] <filsmick> woops wrong user sorry
[09:36:32] <ainieco> filsmick: got it, thank you
[09:36:38] <filsmick> ainieco: here's a complete example https://gist.github.com/anonymous/ab5164e82798eb3a4f3e
[09:36:49] <drewm1980> WindowsBunny: So is my understanding correct based on my corrected comments?
[09:36:52] <ainieco> filsmick: thanks! :)
[09:36:52] <Lilly> Mutabah: dang i thought i was free to use BTreeMap<String, json::Json>
[09:36:55] <filsmick> ainieco: :-
[09:37:04] <WindowsBunny> drewm1980: probably
[09:37:04] *** Quits: jalcine (jacky@moz-7ghsj4.jalcine.me) (Connection closed)
[09:37:10] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[09:37:13] <drewm1980> WindowsBunny: Thanks!
[09:37:17] *** Quits: Johannes (Johannes@moz-ufvp1b.nttpc.ne.jp) (Connection closed)
[09:37:31] <WindowsBunny> drewm1980: At least, it's correct enough for now
[09:37:43] <WindowsBunny> drewm1980: You'll have to make more subtle adjustments later as you learn more :D
[09:37:46] *** Joins: jalcine (jacky@moz-7ghsj4.jalcine.me)
[09:38:06] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[09:39:15] *** Quits: maximih (maximih@moz-bmkp9s.k49b.su5n.2002.2001.IP) (A TLS packet with unexpected length was received.)
[09:39:43] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[09:40:15] <drewm1980> WindowsBunny: Well if I said anything in there that made you cringe, let me know :)
[09:40:28] <WindowsBunny> drewm1980: You said cringe, which made me cringe
[09:40:29] <drewm1980> because that is probably something should read up more on.
[09:40:56] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[09:41:43] <drewm1980> where fn cringe() {observe_that_drewm1980_is_a_noob}
[09:41:46] <filsmick> is there a way to use try!() with various Err types, without making an error enum just for the function using it?
[09:42:07] *** Quits: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net) (Quit: Leaving.)
[09:42:37] *** Quits: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com) (Quit: Leaving)
[09:42:51] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[09:43:34] *** Quits: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu) (Quit: Remember to close the door when you're done!)
[09:43:38] *** Joins: tomprogrammer (thomas@moz-n6uo55.tr5r.qept.4dd0.2001.IP)
[09:43:45] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[09:43:47] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[09:44:23] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[09:44:50] *** Joins: p1start (p1start@moz-nftjhe.org)
[09:44:56] <ainieco> how to parse file name out of "http://example.com/image.png"? i'd like to get "image.png" out of it
[09:45:27] <Mutabah> ainieco: .rsplit?
[09:45:36] <rkruppe> filsmick: If one of the error types implements From<T> for all other error types, you can just use try!(). If not, what should the return type be?
[09:46:07] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[09:46:41] <rkruppe> ainieco: Make it a Path and use file_name()
[09:46:58] <Mutabah> rkruppe: Dunno how that will work with the URI format
[09:47:06] <rkruppe> Oh, wait, it's an URI, yeah
[09:47:21] <Mutabah> ainieco: .rsplit is possibly the easiest
[09:47:31] <ainieco> Mutabah: ok, thanks. would be cool to have something like rkruppe suggested tho
[09:47:37] <rkruppe> Isn't there an URL parsing crate somewhere? May be overkill...
[09:47:43] <Mutabah> ainieco: There may be a URL parsing crate
[09:48:57] *** Joins: avikpal (avikpal@moz-q5f.3gs.227.117.IP)
[09:48:59] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[09:49:49] <ainieco> Mutabah: https://github.com/servo/rust-url yeah, but rsplit is indeed easiest
[09:52:07] *** Joins: Gabriel_7 (Gabriel@moz-50rknb.mtgr.92aj.0e35.2a01.IP)
[09:56:07] <drewm1980> Is there a way to leave the choice between static vs. dynamic binding up to the compiler? (I think no)
[09:56:09] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[09:56:30] <drewm1980> sorry, binding -> dispatch
[09:56:59] *** Joins: debuuu (debu@moz-thlvnr.dyn.telefonica.de)
[09:57:40] <drewm1980> It seems to me like maybe static vs. dynamic dispatch could be something more like a hint to the compiler, rather than baked into the syntax...
[09:57:43] *** Joins: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk)
[09:58:11] <flavius> Can someone help me with the creational method here https://gist.github.com/flavius/e15aedb7fabe7abd44c1#file-hypergraph-rs-L88 ? I have tried various things, every time I solve a problem, a new one arises, and I suspect I am doing something which is basically wrong - but I don't know what
[09:58:12] <drewm1980> ... i.e. something along the lines of the choice whether to inline or not.
[09:58:23] <rkruppe> drewm1980: No, static vs dynamic dispatch has some deep ramifications for what can be done. In all but the simplest cases, neither is a superset of the other
[09:58:33] <pyon> Is there anything like unsafely cloning a &mut [T] ?
[09:59:47] <bluss> pyon: you shouldn't do anything that's unsafe :) use `unsafe` blocks to do stuff you know is *safe*
[10:00:14] <bluss> pyon: but what do you mean, you can create new mut slices as you want with std::slice::from_raw_parts_mut
[10:00:32] <pyon> Mmm.
[10:00:48] <bstrie> pyon: cloning a &mut is almost certainly UB, don't do that
[10:01:16] <pyon> I'm already using lots of unsafe code anyway.
[10:01:38] <bstrie> just because you're using unsafe code doesn't mean being cavalier about invoking UB...
[10:02:17] <rkruppe> Though if you can guarantee there will be no aliasing, as split_at_mut does, it can be safe (as in, needs unsafe{} only because the compiler can't verify it)
[10:02:23] *** Joins: nercury (nercury@moz-ngr949.static.zebra.lt)
[10:02:29] <pyon> What I can guarantee is that T: Copy.
[10:02:34] <pyon> Because T is actually usize.
[10:02:44] <pyon> I'm basically manipulating giant arrays of usize.
[10:02:55] <pyon> An I need to move slices between places.
[10:03:21] *** Quits: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com) (Ping timeout: 121 seconds)
[10:03:39] <rkruppe> T being Copy is not enough. All mutable aliasing is UB, regardless of what's aliased
[10:04:13] <duesenfranz_> pyon: and if you really want to copy it, I think you have to copy it to the heap?
[10:04:31] <WindowsBunny> drewm1980: The nicest thing to do is to simply take generic type parameters wherever and whenever possible, so the caller can take advantage of static dispatch whenever possible
[10:04:50] <rkruppe> In what ways do you "move slices between places"? Copy some (large chunks of) usizes around within one big array?
[10:05:06] <drewm1980> WindowsBunny: and rkruppe, got it.
[10:05:10] *** Quits: Douman (Douman@moz-3ei4gt.dynamic.mts-nn.ru) (Ping timeout: 121 seconds)
[10:05:11] <pyon> rkruppe: Yep.
[10:05:15] *** Quits: daxhuiberts (textual@moz-vo5n7t.chello.nl) (Quit: Textual IRC Client: www.textualapp.com)
[10:05:16] <flavius> since when is copying the same as moving?
[10:05:20] <pyon> This is what I currently have: https://github.com/eduardoleon/pyon/blob/master/plum/memory.rs . Sadly, it reads like transliterated C. I'd love to know how to make it more idiomatic.
[10:05:38] <drewm1980> Now I'm pondering if someone's going to make a higher level version of Rust that targets Rust...
[10:06:02] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Quit: leaving)
[10:06:04] <drewm1980> but hides some subset of {ownership, mutability, dispatch type}
[10:06:06] <pyon> But...! Without hurting efficiency. I don't want runtime bounds-checking.
[10:06:29] <Manishearth> drewm1980: I'm considering doing the opposite
[10:06:42] <Manishearth> drewm1980: writing a compiler in Rust, for a language *like* Rust with way less features
[10:06:49] <rkruppe> pyon: Then just take *mut pointers and use ptr::copy() as you already do? Why do you want/need &mut pointers?
[10:06:59] <kimundi> flavius: not sure what you are asking, but a "logical" move and a "logical" copy are both a shallow copy underneath
[10:07:10] <Manishearth> (Rust syntax, Rust ownership semantics, just none of the complex features like assoc types, etc
[10:07:18] <pyon> rkruppe: The line `obj = obj.offset(1)` screams "I want to use an iterator here!"
[10:07:33] <pyon> line 56
[10:07:37] <bstrie> flavius: what error are you getting?
[10:07:39] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[10:07:53] <VShell> drewm1980: I don't think you can hide ownership/mutability and call it a "higher level Rust".
[10:07:59] <flavius> bstrie: I have added it at the bottom in a comment
[10:08:23] <rkruppe> drewm1980: Please use Rust long enough to understand all the subtle ways these things interact. Removing or "hiding" (which basically means removing all but one option on that axis) any one of them has deeper ramifications than you may appreciate
[10:08:37] *** Quits: zyphrus (David@moz-1a4.urk.98.101.IP) (Ping timeout: 121 seconds)
[10:08:49] <rkruppe> That said, I also played with the thought of creating a Rust variant.
[10:09:41] <rkruppe> pyon: I see. But I think the misleading pretense of safety that &mut [usize] would give outweighs the benefit of using iterators
[10:09:53] <pyon> Ah!
[10:10:04] *** Quits: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk) (Ping timeout: 121 seconds)
[10:10:15] *** Quits: druzac (druzac@moz-hn17us.vc.shawcable.net) (Ping timeout: 121 seconds)
[10:10:19] <drewm1980> rkruppe: I've been using rust casually for about half a year now.
[10:11:14] <drewm1980> rkruppe: what was your variant going to look like?
[10:11:22] <rkruppe> drewm1980: And I don't mean to diminish that or question your credentials (I don't think I have a lot more under my belt). I'm just saying language design is tricky.
[10:12:28] <WindowsBunny> I have no credentials :D
[10:12:31] <drewm1980> rkruppe: yeah, np.  and I agree :)
[10:12:44] *** Joins: pczarn (piotr@moz-9un7t9.izacom.pl)
[10:12:48] <bstrie> pyon: it's not really unidiomatic to use offsets like that, they're how iterators are implemented anyway https://github.com/rust-lang/rust/blob/master/src/libcore/slice.rs#L137
[10:12:58] <pyon> Checking.
[10:13:07] <bstrie> pyon: sometimes you just gotta do pointer arithmetic :P
[10:13:12] <pyon> :-O
[10:14:37] *** Quits: o_pax (o_pax@moz-esa.d1m.2.176.IP) (Client exited)
[10:14:53] <bstrie> pyon: you could conceivably implement Iterator for your own object and then shove all the pointer gunk behind the scenes, but it's up to you. might not be worth it if you're only doing it in this once place
[10:16:02] <pyon> I don't think I'll be iterating much, outside of the garbage collector. :-P
[10:17:20] <rkruppe> drewm1980: I'd like significant indentation (think Python) but am unsure how to best integrate that with the pervasive blocks-as-expressions. More sugar for types like Rc/Gc/Cell/RefCell that are rightfully avoided in most Rust code but rather wordy when they are needed. A while back I'd have said more implicit conversions, but this has been getting better. So, mostly superficial stuff.
[10:18:47] <rkruppe> More interesting to me would be designing a "scripting language" that is about as convenient (and potentially inefficient, ha!) as Python and friends, but with enough ownership and aliasing control to talk to Rust APIs in their native language rather than through the C ABI
[10:19:26] <flavius> bstrie: haha, you used the g-word
[10:19:27] <drewm1980> rkruppe: that second was more along the lines I was thinking...
[10:19:53] <WindowsBunny> rkruppe: So something that can be loaded at runtime easily, and rebuilt at runtime as well
[10:19:59] <drewm1980> I know lots of programmers who will probably not get over rust's learning curve.
[10:20:22] <drewm1980> but I want them to still fit into the same ecosystem somehow...
[10:20:23] <WindowsBunny> rkruppe: I would kill for a good scripting language that integrates nicely into Rust
[10:20:32] <WindowsBunny> rkruppe: Please don't ask me to kill anyone
[10:20:39] <VShell> I'd kill for a good scripting language, full stop. :P
[10:21:07] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[10:21:10] <rkruppe> drewm1980: Any specific thoughts on how to achieve that? Other than making all types /implicitly/ the equivalent of Gc<T> and offering syntax like !T for by-value/owned stuff, I don't see a lot of potential to simplify
[10:21:28] <pyon> WindowsBunny: Sadly, Rust's memory and thread model makes it tricky to implement garbage collection across multiple threads.
[10:21:36] <drewm1980> Anyone know if there is some ~good reason supercompilation never caught on?
[10:21:41] <bstrie> flavius: `self` in there is `&mut` and when you're doing `Rc::new(self);` you're trying to store a reference, but your struct isn't defined that way
[10:21:45] <pyon> WindowsBunny: Or, rather, it is just as tricky in C and C++, but Rust exposes that trickiness.
[10:22:35] <bstrie> drewm1980: takes too much time, probably
[10:22:43] <bstrie> drewm1980: rather, too much time for not enough benefit
[10:22:44] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[10:22:44] <WindowsBunny> pyon: Stop giving excuses and implement it already >:(
[10:23:02] <pyon> I'm doing just that!
[10:23:10] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[10:23:11] *** Quits: jacwodjo (jacwodjo@moz-5bq.k90.254.5.IP) (Ping timeout: 121 seconds)
[10:23:55] <rkruppe> Re: supercompilation, half the literature is about optimizing only short basic blocks, the other half is quite recent and still takes a lot of time to basically only /match/ the performance of casual C programs
[10:24:18] <rkruppe> At least that's my impression from skimming half a dozen abstracts and reading two papers in depth
[10:24:30] *** Joins: genbattle (genbattle@moz-ikj3l8.xtra.co.nz)
[10:24:45] <albertofem> i need some help with lifetime issues
[10:24:53] <albertofem> what am I doing wrong in this piece of code? http://is.gd/CNEEG6
[10:25:08] *** Joins: jacwodjo (jacwodjo@moz-5bq.k90.254.5.IP)
[10:25:09] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[10:25:12] <albertofem> "cannot infer an appropriate lifetime for autoref due to conflicting requirements"
[10:25:14] <WindowsBunny> albertofem: All the parts which you are not doing right :D
[10:25:39] <albertofem> indeed :P
[10:25:48] <bstrie> albertofem: there's no such thing as a 'static String, as Strings are always heap-allocated (at runtime), so they can't be in static memory
[10:25:52] <Mutabah> albertofem: You're returning a 'static
[10:26:03] *** Joins: grncdr1 (Adium@moz-m1g.e47.90.95.IP)
[10:26:43] <Mutabah> albertofem: http://is.gd/GckJ0W
[10:26:45] <drewm1980> rkruppe: Yeah, I wonder if supercompilation could be used more for allowing simpler language design, rather than trying to optimize code that is already very explicit about how stuff is implemented.
[10:26:51] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Ping timeout: 121 seconds)
[10:27:10] *** Quits: genbattle (genbattle@moz-ikj3l8.xtra.co.nz) (Quit: Leaving)
[10:27:33] <Mutabah> albertofem: (two changes there, the first is to put a lifetime param on the function, saying that it returns a borrow of the input. Second is to remove the useless .to_string())
[10:27:35] <bstrie> drewm1980: trying to make compilers smarter is a losing battle, the tide of history is turning towards languages that are more explicit about optimization opportunities :P
[10:27:38] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[10:27:41] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[10:27:43] <flavius> bstrie: I don't understand what you're getting at. I need the parent to own the newly created node indirectly, through the Box
[10:27:47] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Connection closed)
[10:27:48] *** Joins: larhat2 (Adium@moz-vlo5br.cable.virginm.net)
[10:28:02] <rkruppe> drewm1980: A cooler, and more immediate, alternative is Souper (by John Regehr et al.) which finds missed optimizations of LLVM IR so that they can manually be added to LLVM
[10:28:26] <drewm1980> rkruppe: These are not really concrete suggestions, but it just feels like a lot of programming effort goes into telling the compiler what is known at compile time, but that is by definition known by the compiler at compile time.
[10:28:57] *** Quits: bombless (_@moz-uag.piv.41.59.IP) (Ping timeout: 121 seconds)
[10:29:21] <rkruppe> bstrie: I half agree. Two important optimizations are memory layout (cache) and when to allocate and how to reuse these optimizations. Inferring the first at compile time can only be done heuristically, and the second needs at least linear types and APIs that are allocation conscious
[10:29:26] *** Quits: theEXIT (Mibbit@moz-u18.6kp.164.67.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:29:35] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[10:29:35] <rkruppe> *reuse the allocations
[10:29:47] <cgaebel> what happened to viewing the source in rustdoc?
[10:30:06] <pyon> rkruppe: Here's an optimization I came up with a while ago. Identify which data structures in your program are purely functional (immutable, typically heavily linked, with tiny nodes), then "glue" the tiny nodes into fatter ones. It's a generalization of linked list unrolling. Write your code as in ML, it will perform as in Rust.
[10:30:14] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[10:30:30] <rkruppe> cgaebel: When? My build from yesterday still has the src links
[10:30:41] <cgaebel> http://doc.rust-lang.org/arena/struct.TypedArena.html the fns don't have src links
[10:30:47] <pyon> An advantage of this is that the tags of several enums can be put in the same place.
[10:30:58] <cgaebel> and I see none at http://doc.rust-lang.org/std/primitive.slice.html#method.binary_search
[10:31:06] *** Joins: o_pax (o_pax@moz-esa.d1m.2.176.IP)
[10:32:10] <bstrie> flavius: Rc::new(self) is going to create Rc<&mut Graph>, where you seem to wan an Rc<Graph>
[10:32:11] <rkruppe> cgaebel: Odd. Seems it's only on methods, and my local build actually lacks them too. Maybe someone thought they're clutter?
[10:32:14] <albertofem> Mutabah thanks, that makes sense, now let's see If I can make this compile
[10:32:23] *** Joins: bombless (_@moz-uag.piv.41.59.IP)
[10:32:41] <bstrie> cgaebel: there's a [src] link up top, at least
[10:32:53] <cgaebel> bstrie: not for primitive.slice.html
[10:33:08] <rkruppe> pyon: You still can't reuse allocations, you only merge them, but in ML or other GCd languages allocating is already fast (tracing may be slow, but that doesn't change anything)
[10:33:14] <drewm1980> rkruppe: and bstrie Thanks for the new stuff to think about. I gotta go eat something.  Good "night"!
[10:33:26] <bstrie> cgaebel: no idea, likely a bug
[10:33:29] <bstrie> file it!
[10:33:32] <richo> does anyone remember where that blog post about the code that still blames to graydon is?
[10:33:41] <bstrie> richo: by whom?
[10:33:52] *** Quits: larhat2 (Adium@moz-vlo5br.cable.virginm.net) (Ping timeout: 121 seconds)
[10:33:53] <pyon> rkruppe: Yeah, it doesn't reduce memory usage - in fact it increases it. But better it gives better locality of reference.
[10:33:57] <richo> I want to say by graydon, but I just went through the archives and couldn't find it
[10:34:00] <pyon> s/But better/But/
[10:34:07] <cgaebel> bstrie: k.
[10:34:52] <rkruppe> pyon: It heuristically maybe improves locality of reference. Does it do anything about when type A is embedded in type B? Normally that's another pointer to chase
[10:34:56] <bstrie> flavius: perhaps try Rc::new(*self)
[10:35:11] <rkruppe> Also generally improving memory usage = making locality worse
[10:35:40] <rkruppe> Note that some GCs already compact the heap such that nodes referring to each other are adjacent
[10:35:41] <richo> for completeess, it was on his blog and I didn't look hard enough http://graydon2.dreamwidth.org/195706.html
[10:35:47] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[10:35:51] <rkruppe> pyon: So you're up against some tough competition
[10:35:55] <pyon> rkruppe: The way I conceived it, I'd "flatten" all indirection away until objects are a certain size.
[10:36:08] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[10:36:15] <pyon> A size that's friendly to the garbage collector.
[10:36:28] <rkruppe> pyon: So what do you do about sharing? Duplicate the data?
[10:36:43] <Manishearth> Btw, yesterday Clippy and my other lints got published! Add them to your rustc invocation!
[10:36:47] <bstrie> flavius: you might also need to slap #[derive(Clone)] on there and then Rc::new(self.clone())
[10:36:50] <pyon> rkruppe: Yes, exactly. That's why it requires immutability - so that duplication doesn't matter.
[10:37:24] <pyon> rkruppe: Mutability forces logical objects to correspond to physical objects in memory. With immutability, there doesn't have to be a 1-to-1 correspondence.
[10:37:37] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[10:37:49] *** Quits: pczarn (piotr@moz-9un7t9.izacom.pl) (Quit: WeeChat 1.1.1)
[10:37:50] <rkruppe> I know, I know, it just seems so obvious that I think there must be a reason it hasn't been tried (successfully) before
[10:38:05] <pyon> dunno
[10:38:27] <pyon> It can bloat the code for pattern matching.
[10:38:37] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[10:38:47] *** Joins: zonyitoo (zonyitoo@moz-vhe.mkm.8.147.IP)
[10:38:59] <cgaebel> Manishearth: is clippy on crates.io?
[10:39:00] <pyon> Because you're turning matches with 2 or 3 branches... into matches with 80+ branches. (To make the most use of the tag space)
[10:39:01] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[10:39:09] <pyon> enum* tag space
[10:39:16] <Manishearth> cgaebel: yes
[10:39:32] <cgaebel> Manishearth: \o/ the readme instructions point to the git repo
[10:39:45] *** Quits: zonyitoo (zonyitoo@moz-vhe.mkm.8.147.IP) (Client exited)
[10:40:11] <Manishearth> cgaebel: fixed
[10:40:11] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Ping timeout: 121 seconds)
[10:40:20] <cgaebel> Manishearth: :)
[10:40:28] <Manishearth> adorn, clippy, tenacious, and extensible are now all on Crates
[10:40:32] <Manishearth> humpty will go up soon
[10:40:38] <Manishearth> though it's not yet ready for prime time)
[10:40:47] <cgaebel> is that where you sit on walls?
[10:40:59] <Manishearth> haha
[10:41:07] <Manishearth> it protects types from being dropped
[10:41:13] <Manishearth> in a sense, linear types for rust
[10:41:23] <cgaebel> ah. cool!
[10:41:29] <Manishearth> https://github.com/Manishearth/humpty_dumpty
[10:41:32] <rkruppe> Protects from not being dropped, surely?
[10:41:40] <Manishearth> it's needed for https://github.com/Munksgaard/rust-sessions
[10:41:47] <Manishearth> rkruppe: ...ish
[10:41:53] <Manishearth> rkruppe: no implicit drop
[10:42:08] <Manishearth> you must explicitly move it out via .close()
[10:42:16] *** Quits: folsen (folsen@moz-t79.l31.101.46.IP) (A TLS packet with unexpected length was received.)
[10:42:24] <rkruppe> Oh, right. Linear instead of affine
[10:42:28] <filsmick> rkruppe: "If one of the error types implements From<T> for all other error types, you can just use try!(). If not, what should the return type be?"
[10:42:32] <Manishearth> rkruppe: rust-sessions uses session types to get thread safety magics
[10:42:37] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[10:42:40] <cgaebel> Manishearth: why is the crates.io package called rust-clippy? shouldn't it just be clippy?
[10:42:44] <filsmick> can you provide an example?
[10:43:08] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[10:43:09] <Manishearth> cgaebel: oops, right
[10:43:23] <WindowsBunny> I'm in favor of shooting anyone who puts crates on crates.io with -rs or -rust or rust- in the name
[10:43:24] *** Joins: Lollo (bla@moz-qm932l.retail.telecomitalia.it)
[10:43:29] *** Quits: turtil (turtil@moz-98pgrn.orcon.net.nz) (Connection closed)
[10:43:39] *** Joins: turtil (turtil@moz-98pgrn.orcon.net.nz)
[10:43:45] <Manishearth> rkruppe: rust-sessions uses session types to get thread safety magicks. The idea is that a "charged" channel shouldn't be dropped until you receive it enough that itscharge runs out
[10:43:46] <WindowsBunny> I'm okay with them in the github name, just not on crates.io
[10:43:53] *** Parts: Lollo (bla@moz-qm932l.retail.telecomitalia.it) ()
[10:43:58] <Manishearth> charge is a term I made up on the spot and is encoded in the type system
[10:44:40] <Manishearth> because the actual thing is all hard to explain and there's a paper on it but the papers in progress and not yet public :p
[10:44:43] <Manishearth> WindowsBunny: https://crates.io/crates/compiletest_rs
[10:44:46] <Manishearth> but that had to be done
[10:44:50] <Manishearth> `compiletest` is reserved
[10:45:01] *** Joins: daze (daze@moz-tc29eq.static.zebra.lt)
[10:45:15] * WindowsBunny shoots Manishearth
[10:45:51] <WindowsBunny> holy shit
[10:46:11] <rkruppe> filsmick: http://is.gd/ayFa1z
[10:46:15] <WindowsBunny> I think brson's integration tests are... really messing with downloading statistics
[10:46:44] <Manishearth> haha
[10:46:50] <filsmick> rkruppe: ohh, thanks. Can I use Box<Error> to achieve this?
[10:47:02] <WindowsBunny> Manishearth: average day, 50 downloads, integration tests run, 2401 downloads Q_Q
[10:47:05] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Ping timeout: 121 seconds)
[10:47:06] <Manishearth> yeah, the `servo` crate was downloaded many times on May
[10:48:02] <bluss> WindowsBunny: yup
[10:48:40] <rkruppe> filsmick: It seems so, there's an impl<'a, E: Error + 'a> From<E> for Box<Error + 'a>
[10:49:07] <filsmick> rkruppe: yes, I saw it so I thought it may work. Once I get the Box<Error>, though, can I match on its concrete type?
[10:49:33] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[10:50:13] <rkruppe> filsmick: You could use downcast_ref from std::any, but no, not conveniently. If you need to distinguish the error cases, it's probably easiest to create your own error enum
[10:50:14] <bstrie> WindowsBunny: there's plenty of packages with tiny numbers of downloads, brson's tests would be downloading all packages equally
[10:50:16] *** Joins: sayan (sayan@moz-ip8.595.51.106.IP)
[10:51:20] <filsmick> mmh, okay, but that's a bit verbose. Is it possible, with today's Rust, to create an enum for all possible errors?
[10:51:20] <WindowsBunny> bstrie: I just happen to have a lot of packages depending on my package, if you know what I mean ;)
[10:51:59] <bluss> bstrie: it doesn't cache dependencies downloaded though
[10:52:20] <bstrie> weird
[10:52:29] <bstrie> shouldn't cargo just be doing that by default
[10:52:42] <bluss> every crate is tested in its own sandbox
[10:52:53] <bstrie> welp
[10:53:24] <rkruppe> filsmick: As in all types everywhere that implement Error? No. You can go the trait object route and lose access to the concrete type (barring the also-verbose downcast_ref), or you can list the four or five types that can actually occur.
[10:53:31] <bluss> brson said something like "it's cool that it only costs a couple of bucks to build 4000 crates" so I guess it's cool
[10:53:52] <filsmick> rkruppe: I guess the best way is to list those :)
[10:53:55] <bluss> don't know what the service is called
[10:53:56] <filsmick> rkruppe: thank you
[10:54:39] *** Joins: jherms (jherms@moz-o8d.9ba.189.46.IP)
[10:54:54] <bluss> WindowsBunny: which package is yours with the thousands of fake downloads?
[10:54:58] <bluss> well "fake"
[10:55:08] <WindowsBunny> bluss: winapi
[10:55:27] <WindowsBunny> bluss: Because I happen to have 420 -sys crates depending on it
[10:56:36] <bluss> WindowsBunny: you're destined to top the most downloaded list then 
[10:56:54] <bluss> oh no, libc gets 2000 downloads per test run. Highest amplification factor wins
[10:56:56] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[10:57:20] <WindowsBunny> bluss: Most of that is because winapi depends on libc
[10:57:34] <WindowsBunny> If I can remove my libc dependence, I can strip libc of most of its downloads >:D
[10:57:44] <WindowsBunny> well, future downloads anyway
[10:57:44] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[10:57:46] <bluss> and then you win! right?
[10:57:50] *** Joins: greister (towler@moz-frq.0ag.199.27.IP)
[10:58:01] <WindowsBunny> I'm still nowhere near #10 though
[10:58:02] *** Joins: TheLemonMan (lemonboy@moz-il0u53.50-151.net24.it)
[10:58:08] <WindowsBunny> openssl-sys has way more than winapi
[10:58:29] <WindowsBunny> mainly because its just used a lot
[10:59:16] *** Joins: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net)
[10:59:32] *** Joins: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com)
[10:59:37] *** Joins: quiggle (Mibbit@moz-v7f.689.249.92.IP)
[10:59:47] <bstrie> we can probably do something to remedy this
[11:00:17] <bstrie> it would be nice if people could use popularity as sort of an actual metric of popularity, even if it's inherently gameable
[11:00:56] <WindowsBunny> bstrie: Once I release the version of winapi that builds on linux onto crates.io, I can have people depend on it unconditionally
[11:01:08] <WindowsBunny> thus resulting in downloads for platforms where it doesn't matter >:D
[11:02:23] <bstrie> let me rephrase that: we shall acknowledge that popularity is gameable, but let's at least not game it ourselves accidentally
[11:02:24] *** Joins: towler1 (root@moz-3ara2k.88.16clouds.com)
[11:02:42] *** Quits: towler1 (root@moz-3ara2k.88.16clouds.com) (Quit: WeeChat 0.3.8)
[11:02:45] <WindowsBunny> You mean intentionally?
[11:02:49] <Titi_Alone> Can I use an HashMap (or maybe an other type) the opposite way (by example: http://is.gd/ImxK8b) ?
[11:03:04] *** Joins: Douman (Douman@moz-3ei4gt.dynamic.mts-nn.ru)
[11:03:08] <bstrie> Titi_Alone: you mean a MapHash?
[11:03:22] <Titi_Alone> bstrie: http://doc.rust-lang.org/1.0.0-beta.4/std/collections/struct.HashMap.html
[11:03:39] *** Joins: towler1 (root@moz-3ara2k.88.16clouds.com)
[11:03:55] *** Quits: greister (towler@moz-frq.0ag.199.27.IP) (Quit: Leaving)
[11:03:57] <quiggle> Titi_Alone: I think you need to manually insert the value as key as well and then it will work
[11:04:00] <bstrie> Titi_Alone: why not just change the order of the arguments to .insert ?
[11:04:38] <Titi_Alone> bstrie: I need to use it in both directions left to right and right to left.
[11:04:47] <quiggle> Titi_Alone: otherwise you can't guarantee that the value will be unique and in that case your query makes no sense
[11:05:20] *** Quits: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP) (Client exited)
[11:05:37] <bstrie> Titi_Alone: then I recommend what quiggle says
[11:06:03] <Titi_Alone> So I need to create two HashMaps?
[11:06:07] <bstrie> Titi_Alone: if you don't want two entries in the same hashmap for whatever reason, then use two hashmaps and swap the inserts on the second hashmap
[11:06:32] <quiggle> you don't HAVE to have two hashmaps, it is perfectly doable with one
[11:07:02] <bstrie> Titi_Alone: you can either do `hash1.insert("foo", "bar"); hash1.insert("bar", "foo");` or you can do `hash1.insert("foo", "bar"); hash2.insert("bar", "foo");`
[11:07:22] <bstrie> Titi_Alone: in the latter case you just need to remember to check both when retrieving
[11:07:56] <Titi_Alone> Okay, thanks
[11:08:22] *** Joins: kjsebastian (kjsebastian@moz-97588b.singnet.com.sg)
[11:08:34] *** Quits: quiggle (Mibbit@moz-v7f.689.249.92.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:09:02] <bstrie> Titi_Alone: technically want you want is called a bidirectional map http://en.wikipedia.org/wiki/Bidirectional_map
[11:09:34] <Titi_Alone> bstrie: There is no type to do that in Rust?
[11:10:03] *** Quits: Takronix (Takronix@moz-nm15k0.hr.cox.net) (Quit: Nettalk6 - www.ntalk.de)
[11:10:07] *** Quits: csherratt (colin@moz-357qdq.cable.teksavvy.com) (Ping timeout: 121 seconds)
[11:10:12] <bstrie> Titi_Alone: not that I know of, you could ask gankro when he's on
[11:10:28] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Ping timeout: 121 seconds)
[11:10:41] <bombless> Hmm Vec<(K, V)>?
[11:10:41] <bstrie> Titi_Alone: in the meantime it's easy enough to do it manually with two hashmaps
[11:11:19] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[11:11:40] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[11:12:03] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[11:12:06] <Manishearth> Anyone know any situations where https://github.com/Manishearth/rust-adorn would be useful
[11:12:07] <bstrie> jesus christ, the documentation on boost's bimap is literally an entire book
[11:12:09] <Manishearth> ?
[11:12:18] <Manishearth> want to figure out how to extend it
[11:12:23] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[11:12:26] <bstrie> are all boost collections this over-documented
[11:12:38] <Manishearth> there is no such thing as overdocumentation
[11:12:53] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Connection closed)
[11:13:00] <bstrie> Manishearth: http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/index.html#bimap.preface
[11:13:10] <bstrie> Manishearth: that is for ONE DATA STRUCTURE
[11:13:21] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[11:13:31] <bstrie> Manishearth: which is to say, one data structure that is *literally* two hashmaps glued together
[11:13:53] <bstrie> there's nothing goofy here, no auto-balancing red-black-green heap tries
[11:13:54] <Manishearth> .... I stand corrected
[11:14:10] <Manishearth> for a moment there I thought you'd given me a broken link and it had redirected me to boost doc's TOC
[11:14:25] <Manishearth> turns out that that TOC is for that one data structure
[11:14:26] <Manishearth> huh
[11:15:13] <Manishearth> steveklabnik: if you ever do that^ to rust docs, I will unleash a virus wiping emojis from the Interwebs
[11:15:17] <Manishearth> you have been warned :p
[11:15:29] *** Joins: murz (murz@moz-nr2kro.wa.comcast.net)
[11:15:47] <Manishearth> bstrie: holy cow that entire thing is mostly handwritten, too. Not autogenerated
[11:15:48] <Manishearth> wha
[11:16:07] <bombless> If you say "Python-style decorators" I'll doubt that... but "Python-style function decorators", maybe, I don't know :)
[11:16:10] <bstrie> Manishearth: there are colorful diagrams
[11:16:27] <bstrie> Manishearth: this ain't no graphviz shit, these have gradients and everything
[11:16:54] <Manishearth> bombless: python-style class decorators don't make sense in Rust :)
[11:17:23] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[11:17:35] <Manishearth> I intend to add method and tait method decorators too, but it's a tad complicated (and I'm lazy. Mostly the laziness)
[11:18:00] <bombless> Manishearth: I hope we can return some kind of closure here. Hope up coming DST features can help us.
[11:18:16] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Quit: )
[11:18:22] <Manishearth> bombless: why return a closure?
[11:18:26] <Manishearth> that's not how decorators work
[11:18:37] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[11:19:04] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[11:19:05] <bombless> Hmm so I might misunderstood Python decorators, I don't use Python anyway.
[11:19:31] *** Quits: murz (murz@moz-nr2kro.wa.comcast.net) (Ping timeout: 121 seconds)
[11:20:05] <bstrie> nobody understands python decorators
[11:20:13] <Manishearth> haha
[11:20:28] <Titi_Alone> How to declare an HashMap for the static lifetime? (http://is.gd/U4P96k)
[11:20:39] <Manishearth> Titi_Alone: use lazy_static
[11:20:55] <bombless> like, nobody understands quantum theory?
[11:20:56] <Titi_Alone> Manishearth: What is it?
[11:21:01] <Manishearth> you need to know them enough to be able to copy them from library docs (argparse, mach, flask, etc) and hope you never have to define them yourself
[11:21:18] <Manishearth> Titi_Alone: lets you define statics with an initialization clause, which will be run the first itme you try to access them
[11:21:35] <Manishearth> Titi_Alone: the problem with regular statics is that you can't just allocate a hashmap as a static
[11:22:32] <Titi_Alone> Manisheart: Where can I find the documentation about it?
[11:22:39] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[11:25:01] <bstrie> Manishearth: will the incoming `const fn` stuff remove the need for lazy_static! ?
[11:25:38] <kimundi> bstrie: no
[11:26:09] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[11:26:19] *** Joins: LRN (LRN@moz-63ipbh.nationalcablenetworks.ru)
[11:26:32] <kimundi> bstrie: to fully replace lazy_static's usecase "const fn" would have been take so far that it would just be a "fn" again
[11:26:34] <Ms2ger> bstrie, python decorators aren't all that complex :)
[11:27:15] *** Quits: LRN (LRN@moz-63ipbh.nationalcablenetworks.ru) (Connection closed)
[11:27:22] *** Joins: LRN (LRN@moz-63ipbh.nationalcablenetworks.ru)
[11:27:41] <bstrie> Ms2ger: yeah yeah, I know, but they're one of those features that I still have to look up every time I use it
[11:27:51] <Mutabah> bstrie: It will, however, remove most uses of it (i.e. initialising to an empty collection)
[11:28:04] *** Joins: naufraghi (Mibbit@moz-7kg3pd.41-151.net24.it)
[11:28:07] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Ping timeout: 121 seconds)
[11:28:19] <bstrie> I still consider removing most lazy_statics to be a win
[11:28:45] <bstrie> Manishearth: I don't know if this is as useful in rust as it would be in python, since the decorating function needs to know the function signature of the incoming function
[11:28:47] <Mutabah> bstrie: Yep
[11:29:01] <kimundi> Titi_Alone: https://crates.io/crates/lazy_static
[11:29:16] *** Joins: tkellen (tkellen@moz-f5ji1n.vt.comcast.net)
[11:29:17] <Titi_Alone> kimundi: Thanks
[11:29:22] *** Quits: fmtq` (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[11:30:57] *** Joins: fmtq_ (fmtq@moz-d08itp.tpgi.com.au)
[11:31:35] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[11:32:44] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[11:33:53] *** Joins: erz (erz@moz-n26c5c.broadband.corbina.ru)
[11:35:28] *** Quits: naufraghi (Mibbit@moz-7kg3pd.41-151.net24.it) (Quit: http://www.mibbit.com ajax IRC Client)
[11:35:56] *** Quits: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net) (Client exited)
[11:36:01] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[11:37:03] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[11:37:14] *** Joins: d_rezzer (chatzilla@moz-t0fmuj.hfc.comcastbusiness.net)
[11:37:16] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.2-rc1)
[11:37:18] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[11:38:18] *** Joins: Jackneill (Jackneill@moz-nh2r1k.pool.digikabel.hu)
[11:39:53] *** Quits: mib_hco52c (Mibbit@moz-7en4n8.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[11:41:01] *** Quits: mindtree (Mitch@moz-2lb.efi.240.116.IP) (Ping timeout: 121 seconds)
[11:41:09] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[11:41:52] *** Quits: tomprogrammer (thomas@moz-n6uo55.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[11:45:12] *** Joins: Raven67854 (Raven67854@moz-8fl3ql.unassigned.ntelos.net)
[11:45:31] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[11:46:31] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.2/20150415140819])
[11:46:45] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[11:49:55] *** Quits: grncdr1 (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[11:50:04] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[11:50:18] *** Joins: nicoo (nico@moz-1v2b7a.citronna.de)
[11:51:04] *** Quits: avikpal (avikpal@moz-q5f.3gs.227.117.IP) (Ping timeout: 121 seconds)
[11:52:45] *** Joins: Pavel (Pavel@moz-a8qgi0.lidos.cz)
[11:53:06] <Pavel> Rust PRAGUE meeting @ Release Day 15.5. https://www.reddit.com/r/rust/comments/33gu8s/prague_rust_10_meetup/
[11:53:44] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[11:55:05] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[11:55:06] <flavius> bstrie: I can't get it to work, could you help me? Currently I have https://gist.github.com/flavius/e15aedb7fabe7abd44c1#file-hypergraph-rs-L88
[11:55:54] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[11:56:24] *** Joins: avikpal (avikpal@moz-q5f.3gs.227.117.IP)
[11:56:34] <ainieco> how can i make borrow checker happy? https://gist.github.com/anonymous/a512292ea4e28028601c don't understand why does it complain if i'm cloning thing
[11:56:57] <flavius> bstrie: I don't think I want to clone something, I want to store the new node in the vector of the parent, completely giving up the ownership
[11:57:45] <ainieco> is it a borrowck bug?
[11:58:20] *** Quits: vidot_j__ (vidot_j@moz-3guc0b.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[11:59:31] <flavius> ainieco: I haven't looked at it, but most probably it's not
[11:59:33] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[12:00:26] <ainieco> flavius: i haven't looked at your face but most probably it's ugly
[12:01:12] <flavius> kids
[12:01:45] *** Joins: avikpal_ (avikpal@moz-q5f.3gs.227.117.IP)
[12:01:51] *** Quits: o_pax (o_pax@moz-esa.d1m.2.176.IP) (Client exited)
[12:02:15] <Ms2ger> ainieco, please make sure to read the code of conduct
[12:02:16] <kimundi> ainieco: you are cloning the return value of HashMap'S get(), which is a reference, so I'm guessing you are cloning a reference there
[12:02:22] <Tobba> ainieco: ~borrow checker~, do something like let bar = { let foo = self.bars.get(&1); foo.clone() };
[12:02:31] <Tobba> alternatively what kimundi said
[12:02:40] *** Quits: Flaeme (sid36625@moz-d1rnkr.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[12:02:54] <Tobba> actually, you can't clone references, you just get a clone of the referenced object
[12:03:03] <Ms2ger> You can clone references
[12:03:13] *** Quits: avikpal (avikpal@moz-q5f.3gs.227.117.IP) (Connection closed)
[12:03:24] <kimundi> references are Copy, per definition that means they are also CLone :)
[12:03:35] <Ms2ger> rusti: let x = 7; let y = &x; let z: &i32 = (&y).clone();
[12:03:36] -playbot- ()
[12:03:57] <bstrie> flavius: let me take another look
[12:04:11] <Tobba> Ms2ger: oh yeah, but that doesn't apply here
[12:04:14] <WindowsBunny> Ms2ger: Are you sure that's actually calling clone on the &?
[12:04:26] <ainieco> Tobba: yeah, already did that(cloned "bars"), but that's nasty
[12:04:26] <Ms2ger> No, I haven't looked at the specific example
[12:04:37] <Ms2ger> Just replying to "you can't clone references"
[12:05:05] <Tobba> ainieco: you don't have to do that, borrowck is going nuts and thinks a temporary value lives too long
[12:05:14] <WindowsBunny> rusti: let x = 5; Clone::clone(&&x)
[12:05:15] -playbot- <anon>:9:35: 9:36 error: `x` does not live long enough
[12:05:15] -playbot- <anon>:9         let x = 5; Clone::clone(&&x)
[12:05:15] -playbot- output truncated; full output at: http://bit.ly/1JzD6od
[12:05:21] <Tobba> just leave the reference to the value inside bars inside of its own scope before cloning it
[12:05:26] <WindowsBunny> rusti: let x = 5; Clone::clone(&&x);
[12:05:27] -playbot- ()
[12:05:38] <Tobba> rusti: let x = 5; Clone::clone(&&x)
[12:05:39] -playbot- <anon>:9:35: 9:36 error: `x` does not live long enough
[12:05:40] -playbot- <anon>:9         let x = 5; Clone::clone(&&x)
[12:05:40] -playbot- output truncated; full output at: http://bit.ly/1JzD6od
[12:05:45] <WindowsBunny> Yep, UFCS confirms that references can be cloned
[12:05:57] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[12:05:59] <WindowsBunny> meanwhile Tobba copies my previous mistake exactly o_0
[12:06:08] <Tobba> I didn't notice that
[12:06:09] <Tobba> hah
[12:06:28] <kimundi> ainieco: ah, the actual issue is the lack of nonlexical lifetimes. your "bar" contains areference, which causes self to be borrowed for the scope of f(), which means it conflicts with ther attempt to borrow mutably for self.g()
[12:06:44] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[12:06:59] <WindowsBunny> remember, if you call .clone() on a &T, you'll clone the T, not the &
[12:07:09] <WindowsBunny> You need Clone::clone(&&T) :D
[12:07:32] *** Joins: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com)
[12:08:02] *** Quits: tomaka (Pierre@moz-8lbrro.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[12:08:37] <kimundi> ainieco: You have two options. 1) Rewrite your code to become uglier until the "bar" borrow ends before the attempt to do self.g(), or 2) Look for alternative methods on HashMAps API that help you. Your code is a known problematic operation, and special APIs got developed for it. Look for .entry()
[12:09:05] <Ms2ger> Holy diagnostics batman: https://github.com/rust-lang/rust/commit/30f88c841b92819cb5d246b73d564300a3081fae
[12:09:13] <bstrie> flavius: in the line `self.contained_nodes.push(Box::new(new_node))` , `new_node` contains a reference to `self` via the Rc. you can't create cycles like that
[12:09:24] <Tobba> Ms2ger: is that all one error diagnostic?
[12:09:29] <Ms2ger> Yep
[12:09:34] <Tobba> jesus christ
[12:09:58] <WindowsBunny> ah Rust
[12:10:03] <kimundi> ainieco: Actually, here is a fix for your code: http://is.gd/6M74Wk It works nicely because your key/values are copyable types.
[12:10:12] <WindowsBunny> Tobba: You know, if we had detailed explanations like that for every error
[12:10:17] <Tobba> either that description is way more verbose than it has to be or the error is too vague
[12:10:22] <WindowsBunny> Tobba: Then Rust might actually be not so hard :D
[12:10:38] *** Quits: sprog (Sprog@moz-u3bo4c.lv.cox.net) (Ping timeout: 121 seconds)
[12:10:42] <Tobba> idk i prefer my error descriptions fitting in my terminal buffer
[12:10:52] <WindowsBunny> and that doesn't?
[12:10:58] <flavius> bstrie: hm, when you say it like that, it makes me think that what I really need is a reference-counted self, used across the code
[12:10:59] <WindowsBunny> What kind of tiny terminal are you using?
[12:11:03] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:11:09] <Tobba> of course it does, but that wasn't really my point
[12:11:20] <bstrie> flavius: I could be wrong, I've never used Weak before, but I feel like this is doing something you don't want
[12:11:24] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[12:11:39] <Ms2ger> Tobba, I don't think those long descriptions are printed by default
[12:11:46] <Tobba> they're not yeah
[12:11:57] <bombless> Hmm is there PageDown and PageUp for such long description?
[12:11:58] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[12:12:11] <ainieco> Tobba: doesn't work - https://gist.github.com/anonymous/73294978d2db48c4a989 . kimundi thank you for fix! doesn't look really bad, guess have to live with it until that special API is developed
[12:12:18] <WindowsBunny> When we add IDE integration, with clickable errors
[12:12:18] <bombless> it's a rustc --explain I think
[12:12:19] <Tobba> but if I typed --explain E0271 I'd expect a description of exactly what causes the error
[12:12:21] <flavius> bstrie: yeah, my intuition tells me the same, but I'm even less experienced in rust than you are. Have you read the documentation, perhaps it makes you see what I really need in rust terms?
[12:12:25] <ainieco> kimundi: curious what RFC is that?
[12:12:26] <Tobba> not the damn rust book
[12:12:27] <WindowsBunny> you need to be able to click on the error codes in the error list
[12:12:33] *** Joins: pgonda (peter@moz-otulp7.ma.comcast.net)
[12:12:37] <kimundi> ainieco: It _is_ already developed, its the .entry() stuff :)
[12:12:38] <WindowsBunny> and have it automatically open the proper --explain thing
[12:12:41] <Tobba> it's still pretty awesome though
[12:12:47] <ainieco> kimundi: ah, cool :)
[12:12:52] *** Joins: tomaka (Pierre@moz-8lbrro.abo.wanadoo.fr)
[12:13:30] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[12:13:41] *** Quits: avikpal_ (avikpal@moz-q5f.3gs.227.117.IP) (Ping timeout: 121 seconds)
[12:14:08] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[12:14:21] *** Quits: jviereck1 (Adium@moz-r772na.dclient.hispeed.ch) (Quit: Leaving.)
[12:14:42] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[12:16:47] *** Joins: avikpal (avikpal@moz-q5f.3gs.227.117.IP)
[12:18:01] *** Joins: v212 (vee@moz-lhp.bqs.204.223.IP)
[12:18:10] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Ping timeout: 121 seconds)
[12:19:01] *** Joins: v213 (vee@moz-lhp.bqs.204.223.IP)
[12:19:27] <pyon> What is the memory layout of a [T] ?
[12:19:36] <pyon> Not a [T; n].
[12:20:10] <Ms2ger> [T] doesn't have a layout, per se
[12:20:40] *** Joins: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com)
[12:20:44] <pyon> What about a Box<[T]>, then?
[12:20:45] <Ms2ger> I guess you could say "some number of T's, stored consecutively in memory"
[12:20:59] <Ms2ger> Box<[T]> is (ptr, length)
[12:21:05] <pyon> Ah.
[12:21:19] *** Quits: v21 (vee@moz-lhp.bqs.204.223.IP) (Ping timeout: 121 seconds)
[12:21:41] <bluss> you can coerce a Box<[T; N]> to Box<[T]>. So the data at the end of the pointer has the same layout
[12:22:01] <Mutabah> pyon: The actual Box is two pointer-sized values (one being the poniter, the other being the element count)
[12:22:11] <pyon> Do custom pointer types (e.g., Rc, Arc) support this kind of thing?
[12:22:18] <Ms2ger> In 1.1, yes
[12:22:18] <pyon> Or does it only work for intrinsics?
[12:22:19] *** Quits: v212 (vee@moz-lhp.bqs.204.223.IP) (Ping timeout: 121 seconds)
[12:22:19] <Mutabah> pyon: But behind that pointer, it's 'n' T instances in a row
[12:22:24] <bstrie> flavius: I confess that I really don't understand what you want to do here
[12:22:27] <pyon> Ah.
[12:22:31] <bluss> Ms2ger: maybe not so soon
[12:22:39] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[12:22:40] <aatch> pyon, so [T] is an unsized version of [T;n], so it's the same data. Specifically, converting from a sized type to an unsized type stores the information lost at compile in a second word.
[12:22:41] <Ms2ger> In 1.1 nightly? :)
[12:22:42] <bluss> Ms2ger: I mean, it's not merged yet?
[12:22:48] <bluss> Ms2ger: or is it?
[12:22:49] <Ms2ger> I'm pretty sure it is
[12:23:00] <pyon> aatch: Ah!
[12:23:19] <bluss> Ms2ger: https://github.com/rust-lang/rust/pull/24619 
[12:23:27] <bluss> looks like it's still waiting
[12:23:30] <flavius> bstrie: it's quite simple, a node (the graph struct) can have children, all of which are stored in contained_nodes, and each node has an optional reference to its parent
[12:23:31] *** Joins: v212 (vee@moz-lhp.bqs.204.223.IP)
[12:23:40] *** Quits: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[12:23:59] <Ms2ger> Huh
[12:24:18] <flavius> bstrie: new_contained_node() is supposed to create a new node, attach itself to the parent's list of nodes, and set its own parent
[12:24:30] <Ms2ger> Oh, I was thinking of #24737
[12:24:33] <Ms2ger> Nevermind me :)
[12:24:40] <ainieco> kimundi: i wonder why .entry() expects K and not &K like .get()?
[12:24:50] *** Quits: Gabriel_7 (Gabriel@moz-50rknb.mtgr.92aj.0e35.2a01.IP) (Ping timeout: 121 seconds)
[12:25:05] <bstrie> bluss: how the heck did https://github.com/rust-lang/rust/pull/24737 land if the DST coercions thing hasn't yet
[12:25:32] <flavius> bstrie: only the parent should own its children at all times. does it make sense?
[12:25:35] <Ms2ger> ainieco, it may need to create a new entry
[12:25:42] <bluss> bstrie: DST coercions work with simple structs I guess, but not with Rc.
[12:25:56] <ainieco> Ms2ger: ah, makes sense, thanks
[12:25:59] *** Joins: geri (Mibbit@moz-si0249.highway.telekom.at)
[12:26:01] <geri> hi
[12:26:04] *** Quits: untitaker (untitaker@moz-jbfa5n.highway.telekom.at) (Ping timeout: 121 seconds)
[12:26:09] <flavius> geri: hallo
[12:26:10] *** Quits: nercury (nercury@moz-ngr949.static.zebra.lt) (Client exited)
[12:26:15] <Ms2ger> 'afternoon
[12:26:20] <geri> morning!
[12:26:20] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:26:45] <geri> are there green threads in rust?
[12:26:46] <bluss> bstrie: Refcell is just an already supported cast from RefCell<[T; N]> to RefCell<[T]> then
[12:26:50] *** Quits: v213 (vee@moz-lhp.bqs.204.223.IP) (Ping timeout: 121 seconds)
[12:27:00] <bluss> bstrie: while Rc.. needs something that's harder to do..
[12:27:00] *** Joins: nercury (nercury@moz-ngr949.static.zebra.lt)
[12:27:34] <Ms2ger> geri, no
[12:27:51] <geri> Ms2ger: just os threads?
[12:28:20] <Ms2ger> Yep
[12:28:23] *** Joins: grncdr1 (Adium@moz-m1g.e47.90.95.IP)
[12:28:38] *** Joins: untitaker (untitaker@moz-1ck6kd.highway.telekom.at)
[12:28:42] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Ping timeout: 121 seconds)
[12:29:23] <kimundi> bstrie: Rc needs some internal magic to have the alignment work out
[12:29:47] <ainieco> geri: while ago rust had it but not anymore, they decided to throw it away because those green threads weren't so green in reality IIRC
[12:29:47] <geri> Ms2ger: and you start it via thread::scoped?
[12:30:12] <Mutabah> geri: scoped, or one of the other thread constructors
[12:30:29] *** Joins: victor (Mibbit@moz-fgundf.dynamic.ziggo.nl)
[12:30:30] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[12:31:00] <bombless> scoped is feature-gated now, you need thread::spawn in general
[12:31:01] *** Quits: pgonda (peter@moz-otulp7.ma.comcast.net) (Ping timeout: 121 seconds)
[12:31:06] <Mutabah> geri: scoped, or spawn. Scoped is designed to allow safe paralellisim
[12:31:07] <geri> ainieco: is it not possible bc there is no runtime/
[12:31:08] <geri> ?
[12:31:33] <Mutabah> geri: They placed a huge complexity on the IO stack, and FFI made the stack system complex
[12:31:36] <geri> os threads are provided by the operating system... if rust doesnt have a runtime how can you have green threads...not possible?
[12:31:48] <bstrie> flavius: another problem that I foresee is that you're trying to hand ownership of new_node to self, *and* you're trying to return new_node from the function
[12:31:59] <bombless> Removed green thread so we decided runtime is not needed, lol.
[12:32:03] <kimundi> geri: You can have a library for greenthreads untop of OS threads - thats what the old runtime did, basically
[12:32:13] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[12:32:20] <geri> kimundi: as i understand...rust doesnt have a runtime now?
[12:32:29] <Mutabah> geri: None
[12:32:32] <kimundi> yes, because its no longer needed
[12:32:33] <flavius> bstrie: yeah, I guess I will return a reference to it, it's not a problem
[12:32:38] <Mutabah> geri: (well, as much as C++ has really)
[12:33:02] <geri> Mutabah: c++ doesnt have green threads in their standard lib
[12:33:13] <Mutabah> geri: neither does rust
[12:33:13] <WindowsBunny> Does Rust still have its own entry point that initializes a few things before it calls your loop?
[12:33:14] <geri> i guess google has some extensions...
[12:33:24] <Mutabah> WindowsBunny: Unless you opt-out, yes
[12:33:26] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[12:33:27] *** Joins: harrisonclarke (harrisoncla@moz-sf43bu.eastlink.ca)
[12:33:33] <geri> for providing green threads in c++
[12:33:42] <WindowsBunny> Mutabah: Mkay, so we do still have a bit of a runtime then in the C/C++ sense
[12:34:03] <Mutabah> WindowsBunny: Still, it's not a lot
[12:34:03] *** Quits: harrisonclarke (harrisoncla@moz-sf43bu.eastlink.ca) (Connection closed)
[12:34:19] <Mutabah> WindowsBunny: and can be opted out
[12:34:20] <bombless> crt/rrt, lol
[12:34:21] *** Quits: tkellen (tkellen@moz-f5ji1n.vt.comcast.net) (Client exited)
[12:34:31] <WindowsBunny> msvrrt
[12:34:45] <Mutabah> Oh my, MS Visual Rust
[12:34:47] <bombless> libr
[12:34:56] <bombless> R++
[12:34:57] <geri> how does rust allocate memory on the heap if there is no runtime?
[12:35:11] <Mutabah> geri: malloc (well, jemalloc)
[12:35:21] <Mutabah> geri: As said, it has as much "runtime" as C++
[12:35:22] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[12:35:23] <WindowsBunny> and jemalloc is just some C allocator
[12:35:25] <SneakySnake> Don't C++ implementations also have their own entry point that does static initialization before it calls main? Or are we talking about something different?
[12:35:41] <WindowsBunny> jemalloc relies on the C runtime for its static variables I guess
[12:35:41] <geri> Mutabah: ah ok that makes sense
[12:35:43] <aatch> SneakySnake, that's technically handled by glibc
[12:35:44] <Mutabah> SneakySnake: :/ C++ uses C's main, but that's not the true entrypoint, libc does some init before that
[12:35:44] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[12:35:47] <WindowsBunny> SneakySnake: Yes
[12:35:56] <bombless> No runtime means something a helloworld also need.
[12:36:01] <WindowsBunny> SneakySnake: C/C++ typically share the runtime
[12:36:13] <geri> WindowsBunny: share with?
[12:36:23] <benh> each other!
[12:36:24] <WindowsBunny> geri: with each other
[12:36:26] <Mutabah> WindowsBunny: C++'s exception handling is different
[12:36:27] <geri> ok
[12:36:45] <geri> WindowsBunny: C runtime doesnt include new, delete....
[12:37:10] <Mutabah> Point is - Rust code can run next to no external code
[12:37:13] <bombless> Hmm at least MSVC use SEH to handle exception so it doesn't need extra overhead.
[12:37:25] <WindowsBunny> there is no difference in the microsoft CRT between pure C and C++
[12:37:31] <Mutabah> bombless: (going OT) SEH is higher overhead than Dwarf
[12:37:56] <Mutabah> (oh, you meant compared to the CRT, yeah)
[12:38:05] <WindowsBunny> new and stuff are just library stuff on top of the CRT
[12:38:19] <bombless> Mutabah: Hmm just inserting a pointer to a linked list (sort of) is no much overhead anyway.
[12:38:22] <WindowsBunny> or are part of the CRT always
[12:38:51] *** Joins: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com)
[12:38:57] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[12:39:27] <WindowsBunny> and as long as your C is compiled correctly with SEH support (as it is by default with msvc), then C++ exceptions can unwind through C fine
[12:39:39] <WindowsBunny> although its a dumb idea because stuff won't be cleaned up
[12:39:41] <aatch> don't new and delete just call methods? Either on the class or a standard library function?
[12:39:46] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[12:39:54] <WindowsBunny> aatch: yep
[12:40:34] <WindowsBunny> The Microsoft CRT is implemented in C++ anyway
[12:40:47] <victor> Hi! [Please tell me if this is not the place to ask:] I was reading about monads and saw that in Haskell the monad Maybe looks a lot like Option<T>. I was wondering then, is Option<T> a monad?
[12:40:53] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[12:41:01] <geri> http://is.gd/2Kge2P ... shouldnt that thread::spawn print stuff?
[12:41:13] <aatch> victor, yes. Option<T> is pretty much exactly Maybe a
[12:41:40] <WindowsBunny> geri: You need to sleep after the loop
[12:41:48] <bombless> victor: You can check this LOL http://is.gd/j1F17R 
[12:41:49] <WindowsBunny> geri: Rust does _not_ block on all threads to end
[12:41:52] <aatch> victor, we just don't have the features that makes working with monads as nice as Haskell.
[12:41:52] <bombless> by aji
[12:41:53] <victor> aatch: I then have a bit of trouble understanding how >>= works for Option<T>
[12:42:05] <WindowsBunny> geri: So the process exits before the threads have a chance to print anything
[12:42:09] <FreeFull> victor: >>= is the .and_then(...) method
[12:42:10] <geri> could i create a counter to wait for?
[12:42:11] *** Joins: Gabriel_7 (Gabriel@moz-50rknb.mtgr.92aj.0e35.2a01.IP)
[12:42:17] <WindowsBunny> geri: You could!
[12:42:59] <WindowsBunny> geri: You could also store the JoinHandle's you get from spawn, and then join on them all
[12:43:07] <Mutabah> What's happening with the new scoped API (the closure-based one?)
[12:43:07] <WindowsBunny> Which is the correct way to do it
[12:43:07] <FreeFull> I wish playbot had some means of showing types
[12:43:08] <victor> FreeFull: You hit exactly where I wanted to go :) Isn't .and_then too restricted to represent the >>= ?
[12:43:13] <geri> i set a counter to the number of threads...each thread decrements that counter.... and wait for the counter to be 0...
[12:43:18] <geri> WindowsBunny: 
[12:43:23] <Ms2ger> victor, no
[12:43:31] *** Quits: nedp (nedp@moz-vg6vvt.bigpond.net.au) (Connection closed)
[12:43:32] <WindowsBunny> geri: JoinHandle::join()
[12:43:33] <Mutabah> geri: You could, but it's a touch messy (you'd need an AtomicUint)
[12:43:38] *** Quits: zzmp (zzmp@moz-4ds.959.14.76.IP) (Quit: )
[12:43:39] <Mutabah> geri: join is better
[12:43:41] <Ms2ger> victor, and_then is exactly >>=
[12:43:47] <geri> Mutabah: true :D
[12:43:53] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[12:43:58] <WindowsBunny> Mutabah: Plus an Arc to share it
[12:44:04] <Mutabah> WindowsBunny: Global
[12:44:07] <WindowsBunny> ew
[12:44:08] <Mutabah> s/Global/static/
[12:44:17] <Mutabah> well... yeah
[12:44:21] <WindowsBunny> global state is bad
[12:44:26] <Mutabah> that it is
[12:44:29] <FreeFull> victor: Rust is missing some stuff to make a Monad trait right now
[12:44:31] *** Quits: grncdr1 (Adium@moz-m1g.e47.90.95.IP) (Ping timeout: 121 seconds)
[12:44:33] <ainieco> kimundi: sorry for annoying you with this but can i somehow get rid of "clone()" here? http://is.gd/AdyrZ9 and return &64? 
[12:44:34] <victor> Ms2ger, FreeFull : As far as I understand, the second argument of >>= should be a function taking a -> m b
[12:44:36] <ainieco> kimundi: most obvious thing doesn't really work - http://is.gd/Qw4YLD
[12:44:40] <victor> ahhhhhhh
[12:44:43] <victor> d'uhhh
[12:44:45] <victor> :D
[12:44:51] <victor> it is the same "m"
[12:45:02] <Mutabah> ainieco: u64 is Copy, so jsut *bar.get() will work
[12:45:08] <FreeFull> Yes, the m stays the same (Maybe/Option)
[12:45:11] <victor> I thought that the second argument of >>= could somehow produce a new monad
[12:45:13] <Ms2ger> Yeah, so FnOnce(T) -> Option<U>
[12:45:19] <Ms2ger> No
[12:45:21] <victor> :D
[12:45:28] <victor> thanks a lot!
[12:45:33] <ainieco> Mutabah: what if i have Vec instead of u64?
[12:45:46] <Ms2ger> Np
[12:45:50] <FreeFull> victor: By the way, when looking at the list monad, join will make a lot more sense than >>=
[12:45:50] <Mutabah> ainieco: Well, if you want to return by value, you'll need to clone
[12:45:59] <bluss> ainieco: replace .get() with .into_mut()
[12:46:28] <ainieco> Mutabah: i don't want to: "get rid of "clone()" here? http://is.gd/AdyrZ9 and return &64?" 
[12:46:29] <flavius> Is there eactually a mailing list for getting help? Not forum, the good old mailing list, for old geeky hackers
[12:46:31] <ainieco> bluss: let me try
[12:46:48] <bluss> ainieco: but the simplest way should be to use the or_insert/or_insert_with API
[12:46:49] <Mutabah> ainieco: Yeah, bluss's solution works too (and allows returning a &-ptr)
[12:46:54] <ainieco> bluss: awesome, thank you!
[12:47:15] <bluss> ainieco: self.bars.entry(1).or_insert_with(g)
[12:47:16] <victor> FreeFull: wouldn't it be nice to have a Monad trait then and maybe even the >>= operator in rust?
[12:47:32] <Ms2ger> We can't right now
[12:47:34] <Mutabah> victor: no.
[12:47:46] <ainieco> bluss: great, thanks once again :)
[12:47:47] <aatch> victor, it would. But Rust doesn't have the ability to express the Monad trait.
[12:47:51] <Ms2ger> And I hope we'll never get a >>= syntax
[12:47:53] <bstrie> flavius: cutting the gordian knot https://gist.github.com/bstrie/5d7f4bed1b28cb49e8a9
[12:47:58] <Mutabah> Ms2ger: amen
[12:48:06] <bluss> ainieco: now you've solved it with match, so you know how or_insert works, so you can go ahead and use that instead..
[12:48:17] <Mutabah> >>= is on-par with C++'s use of >> for IO
[12:48:29] <bstrie> flavius: honestly, making graph structures is about the absolutely worst thing you can attempt to wrestle into rust's type system :P
[12:48:45] <Mutabah> and if it's to make rust look like haskel, then it's on-par with using CPP to make C look like pascal
[12:48:48] <ainieco> bluss: yup, already switched it to or_insert_with
[12:49:03] <FreeFull> Mutabah: We might get do syntax though
[12:49:04] <bstrie> I will fork the language before I let us introduce cryptic operators
[12:49:08] <bstrie> for anything
[12:49:08] <Ms2ger> #define PROCEDURE
[12:49:09] *** Joins: sphinxo (Mibbit@moz-1072lv.dsl.as9105.com)
[12:49:10] <victor> aatch: are HKT required for that?
[12:49:12] <FreeFull> The keyword is currently unused
[12:49:16] <aatch> victor, yep
[12:49:23] <flavius> bstrie: thanks a lot from the bottom of my heart, I'll read it carefully. Well, then it's a great way as a first learning project :D
[12:49:52] <aatch> victor, currently you can only express types of kind * or * -> *
[12:49:52] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[12:50:00] <bstrie> flavius: the diff will be useful https://gist.github.com/bstrie/5d7f4bed1b28cb49e8a9/revisions
[12:50:02] *** Joins: starandtina (Mibbit@moz-348.7ua.71.125.IP)
[12:50:07] <FreeFull> aatch: Wouldn't * -> * be enough?
[12:50:08] <aatch> victor, no (* -> *) -> *
[12:50:13] <flavius> bstrie: sure
[12:50:19] *** Quits: starandtina (Mibbit@moz-348.7ua.71.125.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:50:40] <sphinxo> Should I use an array or an enumerated type to store registers for my vm?
[12:50:57] <aatch> FreeFull, no, dropping down a level. * == value, * -> * == function, higher-kinded types are like higher-order functions.
[12:51:01] <Mutabah> sphinxo: They're orthoginal?
[12:51:13] <bstrie> flavius: note that you'll need unsafe code to actually follow those parent pointers
[12:51:21] <Mutabah> sphinxo: Use an array for the GPRs at least
[12:51:24] *** Quits: Pavel (Pavel@moz-a8qgi0.lidos.cz) (Quit: Leaving)
[12:51:39] <flavius> bstrie: why is that?
[12:52:00] <FreeFull> aatch: Ah, the Monad trait itself would generate a (* -> *) -> * type
[12:52:06] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[12:52:11] <bstrie> flavius: because my changes there are to store unsafe pointers directly
[12:52:12] <FreeFull> Because of trait objects
[12:52:15] <geri> WindowsBunny: http://is.gd/R1hxU6
[12:52:21] <geri> what type returns join() ?
[12:52:30] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[12:52:39] <bstrie> flavius: creating and storing unsafe pointers is safe, but dereferencing them isn't. you'll need to be careful
[12:52:41] <WindowsBunny> join doesn't return anything
[12:52:42] <Mutabah> geri: thread::spawn() returns a type that has a .join() method
[12:52:44] *** Quits: sonder (chatzilla@moz-nt8r49.idi.ntnu.no) (Connection closed)
[12:52:54] <WindowsBunny> except a Result
[12:53:00] <sphinxo> What are gprs? Mutabah 
[12:53:04] *** Quits: Kurufu (Kurufu@moz-pvv8b5.res.rr.com) (Ping timeout: 121 seconds)
[12:53:09] <geri> let _ = child.join();
[12:53:13] <bluss> geri: you should join the threads only after all are spawned
[12:53:13] <geri> what type is that?
[12:53:14] <WindowsBunny> geri: Result<T> where T is whatever the closure you pass to spawn() returns
[12:53:17] <FreeFull> geri: If you put something into _ it will be dropped straight away
[12:53:21] <bstrie> flavius: if you want, you can wait for someone who actually knows what they're doing wrt to graphs to be online, like gankro
[12:53:27] <FreeFull> And what bluss said
[12:53:30] <geri> bluss: that what i did?
[12:53:34] <victor> FreeFull, aatch: as far as I can tell, the problem is that we cannot constrain the return type of bind to be of the same generic type as the monad itself, right?
[12:53:51] <Mutabah> geri: You're joining in the loop
[12:53:54] <bluss> geri: no, you join them in sequence. The threads never get to run in parallel
[12:54:05] <flavius> bstrie: thanks a lot again for all the help
[12:54:05] <Mutabah> geri: And, Look at the docs, they describe what join does
[12:54:07] <bluss> geri: store the JoinHandles in a vec
[12:54:24] <Mutabah> geri: http://doc.rust-lang.org/std/thread/struct.JoinHandle.html
[12:54:52] <FreeFull> victor: We just cannot create a trait that's generic over a generic container (without a hack that also allows wrong implementations/usage)
[12:54:58] <WindowsBunny> geri: http://is.gd/S9wNbc
[12:54:59] <WindowsBunny> :D
[12:55:06] *** Joins: Kurufu (Kurufu@moz-pvv8b5.res.rr.com)
[12:55:37] <bstrie> flavius: if you want, you can read the stdlib's implementation of a doubly-linked list, which also uses unsafe pointers as parent pointers https://github.com/rust-lang/rust/blob/master/src/libcollections/linked_list.rs
[12:55:39] <victor> FreeFull, aatch: basically that's where my initial confusion with why Option<T> was a monad was :) If the return type of the bind could have been any monad (not necessarily Option), then we could have expressed it (although this No-nad wouldn't have been very useful)
[12:56:14] <flavius> bstrie: of course I want, now that I know where to look :)
[12:56:32] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[12:56:33] <victor> Thanks! Ok.. can I haz HKT, pleaazzzzeee
[12:56:34] <victor> ?
[12:56:46] <FreeFull> victor: It is planned to be added at some point after 1.0
[12:57:20] <FreeFull> victor: Of course, we'll get functors and applicative functors too, then
[12:57:39] <bluss> here's someone's messy htk hack http://www.reddit.com/r/rust/comments/31g0qd/higherkinded_type_trait/
[12:57:52] <bluss> messy because of rust's lack of support, of course
[12:58:04] <geri> WindowsBunny: can you do it in a simpler way like that? http://is.gd/2fVfm5
[12:58:36] <WindowsBunny> geri: collect is more idiomatic
[12:58:42] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Quit: Leaving...)
[12:58:45] <victor> bluss: interesting, thanks!
[12:58:52] <bluss> geri: either way you like is fine, though
[12:58:53] <victor> FreeFull: yay! :D 
[12:58:59] *** Joins: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de)
[12:59:10] <bluss> geri: just use snake case variable names x_x
[13:00:01] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Ping timeout: 121 seconds)
[13:00:14] <geri> bluss: http://is.gd/mBqNvl
[13:00:20] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[13:00:29] <geri> WindowsBunny: 
[13:00:47] <WindowsBunny> unwrap it
[13:00:50] <WindowsBunny> because its a Result
[13:00:55] <WindowsBunny> and you should handle it somehow
[13:01:13] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[13:02:13] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[13:02:37] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:04:17] *** Joins: murz (murz@moz-nr2kro.wa.comcast.net)
[13:05:08] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[13:05:35] <geri> WindowsBunny: fn join(self) -> Result<T>
[13:06:10] <WindowsBunny> yes
[13:06:14] <WindowsBunny> unwrap that Result
[13:06:15] <bombless> And if the Err doesn't do Debug just .ok().unwrap(), lol.
[13:06:34] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[13:06:42] *** Quits: sphinxo (Mibbit@moz-1072lv.dsl.as9105.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:06:49] <geri> will i need to check Err?
[13:06:50] <geri> for
[13:06:57] <ainieco> does anyone know by chance how can i connect "clicked" signal to image widget using https://github.com/rust-gnome/gtk ?
[13:06:59] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[13:07:33] <WindowsBunny> geri: unwrap saves you the effort of checking
[13:07:51] <WindowsBunny> geri: You should only check manually if you want to do something special
[13:08:02] <bluss> .unwrap() will propagate a panic from the child thread to the whole program
[13:08:19] *** Quits: murz (murz@moz-nr2kro.wa.comcast.net) (Ping timeout: 121 seconds)
[13:08:56] *** Quits: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[13:09:50] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[13:10:00] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[13:10:45] *** Joins: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com)
[13:10:48] <flavius> bstrie: there was an out of bounds access, I fixed it
[13:11:24] *** Joins: Hannibal_Smith (nico@moz-hacth9.retail.telecomitalia.it)
[13:11:49] <geri> what does unwrap exactly?
[13:12:03] <geri> .unwrap() will propagate a panic from the child thread to the whole program ?
[13:12:06] <geri> thats all?
[13:12:10] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[13:12:46] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[13:12:57] <FreeFull> geri: .unwrap() just panics on None/Err(e)
[13:13:08] <FreeFull> And returns the value from Some(x)/Ok(x)
[13:16:17] *** Joins: ytain (ytain@moz-pr2.aip.175.108.IP)
[13:16:28] *** Quits: nercury (nercury@moz-ngr949.static.zebra.lt) (Client exited)
[13:16:39] *** Joins: tyrion-mx (tyrion@moz-ib8bp9.us.unmetered.com)
[13:17:20] <bombless> https://github.com/rust-gnome/gtk/#windows I just noticed that they suggest using mingw-w64 for their gkt+ binding... I doubt if it works.
[13:17:55] <bombless> Oh no so it was gkoz who added those lines... hmm...
[13:18:44] *** Joins: yuja (yuja@moz-dl4pq2.so-net.ne.jp)
[13:18:46] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Ping timeout: 121 seconds)
[13:19:21] <bombless> s/gkt+/gtk+
[13:22:02] <bstrie> flavius: oh right, I forgot to do -1 didn't I :P
[13:23:00] <flavius> bstrie: no problem, the idea behind the changes is clear
[13:23:11] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[13:23:29] *** Joins: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca)
[13:23:59] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[13:26:29] <filsmick> is it possible to us `as` on a module?
[13:26:29] <geri> any idea why that results in a timeout? http://is.gd/YkqC9H
[13:26:31] *** Joins: sundjango (sundjango@moz-jil.32a.41.176.IP)
[13:27:46] *** Joins: veqz (veqz@moz-nvr8g6.209.getinternet.no)
[13:28:08] <Mutabah> filsmick: I beleive so
[13:28:27] <filsmick> Mutabah: just tried, doesn't work
[13:28:39] <filsmick> https://gist.github.com/anonymous/5b9c1fff2adf830f6678
[13:28:57] <filsmick> and can I rename a trait I `use`?
[13:29:26] *** Quits: sundjango (sundjango@moz-jil.32a.41.176.IP) (Connection closed)
[13:29:48] <Mutabah> filsmick: Oh, there, use supports 'as' to rename the item
[13:29:50] <Mutabah> mod does not
[13:29:57] <Mutabah> filsmick: what are you trying to do there?
[13:29:57] <filsmick> nice, thanks!
[13:30:00] <bluss> geri: you have to insert drop(tx) to get rid of the remaining transfer end
[13:30:14] <Mutabah> filsmick: Load from a different filename?
[13:30:32] <filsmick> Mutabah: make the distinction because the specific error module of my submodule and std::error clear
[13:30:45] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[13:30:46] <filsmick> but actually, it's not needed
[13:30:46] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[13:31:42] <filsmick> can closures use type inference for the parameters when they are declared, then used later?
[13:32:00] <Mutabah> filsmick: Closures infer argument types, yes
[13:32:04] *** Joins: Melancholia (Mibbit@moz-f9d.scc.251.41.IP)
[13:32:06] <filsmick> Mutabah: nice
[13:32:24] *** Quits: kjsebastian (kjsebastian@moz-97588b.singnet.com.sg) (Ping timeout: 121 seconds)
[13:33:43] <filsmick> I guess it's bad practice to have a String inside an error enum variant?
[13:34:03] <Ms2ger> Why?
[13:34:30] <filsmick> One could use an enum to replace the string
[13:34:34] <filsmick> no?
[13:35:28] *** Joins: nercury (nercury@moz-ngr949.static.zebra.lt)
[13:35:54] *** Joins: kjsebastian (kjsebastian@moz-97588b.singnet.com.sg)
[13:36:52] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[13:37:13] <geri> bluss: where?
[13:37:25] *** Quits: Raven67854 (Raven67854@moz-8fl3ql.unassigned.ntelos.net) (Ping timeout: 121 seconds)
[13:37:47] <geri> bluss: http://is.gd/0xLfQC
[13:37:55] <geri> shouldnt it be printing thread 0 to 2
[13:37:56] <geri> ?
[13:38:19] <geri> thread 2 finished, thread 1 finished, thread 0 finished
[13:39:03] <bluss> geri: that looks good
[13:39:06] *** Joins: meh (meh@moz-2vi7cf.42-151.net24.it)
[13:39:15] <bluss> geri: well you're only waiting on the send, not waiting on the println
[13:39:25] <bluss> put the send after the message and you'll see it
[13:39:34] *** Joins: harrisonclarke (harrisoncla@moz-mh0.9rm.212.173.IP)
[13:40:08] *** Quits: skade (skade@moz-m9ib3m.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[13:40:21] <tomaka> the order in which the threads are executed is undefined
[13:40:53] <tomaka> the playbot caches the result, so if you click on "Run" multiple times you always see the same result
[13:40:59] <tomaka> but with a real machine, you will get a random result
[13:42:32] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[13:43:52] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[13:43:55] *** Joins: skade (skade@moz-m9ib3m.pools.vodafone-ip.de)
[13:44:50] *** Joins: new_one (new_one@moz-suj.lcf.15.50.IP)
[13:44:56] <geri> bluss: bad system call? :D http://is.gd/lPvU48
[13:45:30] *** Quits: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[13:46:55] <cmr> I guess the playpen doesn't expose nano/usleep
[13:47:00] *** Joins: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com)
[13:47:25] <geri> msleep 
[13:47:30] *** Joins: o_pax (o_pax@moz-mscm03.hsi.kabel-badenwuerttemberg.de)
[13:47:57] *** Quits: bombless (_@moz-uag.piv.41.59.IP) (Quit: Leaving)
[13:48:01] <Fenhl> hello, is there a way to do this? http://is.gd/8w3r4N
[13:48:05] <cmr> only nanosleep
[13:48:26] <Mutabah> Fenhl: I do not believe negative bounds have been implemented
[13:48:47] <filsmick> is it possible to display the type of a value at compile time?
[13:48:53] *** Joins: trigen (MSX@moz-n1jovl.speed.planet.nl)
[13:48:55] <Fenhl> Mutabah: so it's something that will be possible in the future?
[13:49:08] *** Joins: BlaXpirit (blaxpirit@moz-gndla7.pool.ukrtel.net)
[13:49:11] <Mutabah> filsmick: Force an error on it?
[13:49:23] <cmr> filsmick: let _: () = expr;
[13:49:26] <Mutabah> Fenhl: I don't know, possibly?
[13:49:28] <Ms2ger> Or let () = expr;
[13:49:34] <filsmick> Mutabah, cmr : nice!
[13:49:36] <filsmick> thanks
[13:50:06] <Fenhl> Mutabah: the problem I'm having is that I want a blanket implementation for converting from Array<T> to Array<U>, but core already defines Array<T> to Array<T>
[13:50:34] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[13:50:38] <Fenhl> Mutabah: so when you remove the nyi negative bound it complains about conflicting implementations
[13:50:40] <Mutabah> Fenhl: I see that
[13:50:45] *** Quits: turtil (turtil@moz-98pgrn.orcon.net.nz) (Ping timeout: 121 seconds)
[13:51:07] *** Joins: Raven67854 (Raven67854@moz-8fl3ql.unassigned.ntelos.net)
[13:52:02] <filsmick> your solution to display the type works great, thanks :)
[13:54:32] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[13:54:41] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[13:56:22] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[13:57:56] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.2-rc1)
[13:57:59] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[13:58:37] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[13:58:39] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[13:59:22] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[13:59:31] *** Quits: d356 (d@moz-go99rq.res.bhn.net) (Client exited)
[13:59:32] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[14:01:24] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Ping timeout: 121 seconds)
[14:01:26] *** Joins: detsak (darren@moz-804egb.dyn.optonline.net)
[14:01:52] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[14:02:10] *** Joins: dr4yyee (dr4yyee@moz-b0r79i.dip0.t-ipconnect.de)
[14:02:39] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Connection closed)
[14:02:55] *** Quits: Feyn (Feyn@moz-b9v.4n2.115.42.IP) (Quit: Leaving)
[14:02:55] *** Joins: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk)
[14:03:10] *** Quits: BlaXpirit (blaxpirit@moz-gndla7.pool.ukrtel.net) (Quit: Quit Konversation)
[14:03:11] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[14:03:24] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[14:03:29] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[14:03:35] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[14:03:49] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[14:03:51] *** Quits: tomaka (Pierre@moz-8lbrro.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[14:04:28] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[14:04:58] *** Quits: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[14:05:00] *** Joins: fabianvf (fabianvf@moz-onn.3sq.102.66.IP)
[14:08:39] *** Quits: geri (Mibbit@moz-si0249.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[14:08:58] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[14:09:04] <nathan7> I'm curious why IntoIterator has an associated `Item` type, if it needs to be equal to the Item of the associated Iterator
[14:09:58] *** Joins: jxv (jxv@moz-2celrt.res.rr.com)
[14:10:19] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[14:11:51] *** Joins: Rym (y@moz-o80acm.range86-189.btcentralplus.com)
[14:11:52] *** Joins: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com)
[14:12:41] *** Quits: Rym_ (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[14:12:48] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Connection closed)
[14:12:56] <bluss> nathan7: purely convenience
[14:12:58] *** Joins: d356 (d@moz-t0p0bc.res.bhn.net)
[14:13:06] *** Joins: jviereck (Adium@moz-r772na.dclient.hispeed.ch)
[14:13:12] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[14:14:12] <eddyb> bluss: why not I::Iter::Item?
[14:14:21] <eddyb> though that is not implemented...
[14:14:50] *** Joins: mkpankov (user@moz-gqa.dee.149.83.IP)
[14:14:55] *** Quits: d356 (d@moz-t0p0bc.res.bhn.net) (Client exited)
[14:15:00] <bluss> T: IntoIterator<Item=i32> is convenient
[14:15:26] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Ping timeout: 121 seconds)
[14:15:46] <mkpankov> I think I already asked this, but why in `let numbers: Vec<_> = (0..10).collect();` we need the `: Vec<_>` part?
[14:15:50] *** Quits: fabianvf (fabianvf@moz-onn.3sq.102.66.IP) (Connection closed)
[14:15:54] <nathan7> sure, but can we please not fucking stabilise that
[14:15:55] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[14:16:17] *** Quits: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk) (Ping timeout: 121 seconds)
[14:16:22] <cmr> nathan7: too late.
[14:16:29] <cmr> also, why not?
[14:16:44] *** Quits: fmtq_ (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[14:17:14] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[14:17:18] *** Quits: victor (Mibbit@moz-fgundf.dynamic.ziggo.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:17:29] *** Joins: andreyv (andrey@moz-m13.7c1.234.85.IP)
[14:17:34] <mkpankov> I mean I know it won't compile w/o it, it just seems there's no other way a sequence of 0..10 could be collected. it can't be collected into VecMap or anythin else
[14:17:48] <bluss> mkpankov: hashset, linkedlist, etc
[14:17:51] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[14:18:00] <bluss> mkpankov: and any custom implementors of FromIterator
[14:18:03] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[14:18:23] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[14:18:30] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[14:18:38] <mkpankov> bluss: ah, cool, now it fits! :)
[14:18:44] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[14:19:30] *** Joins: fmtq_ (fmtq@moz-d08itp.tpgi.com.au)
[14:19:36] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[14:20:33] <bluss> nathan7: this PR added it https://github.com/rust-lang/rust/pull/22313
[14:20:36] *** Quits: zcourts (zcourts@moz-7ms809.cable.virginm.net) (Client exited)
[14:21:21] *** Joins: tomaka (Pierre@moz-8lbrro.abo.wanadoo.fr)
[14:21:30] <bluss> mkpankov: you could get creative and abuse fromiterator, say implement Sum(i32)
[14:21:38] <bluss> to collect to a sum.
[14:21:56] *** Quits: harrisonclarke (harrisoncla@moz-mh0.9rm.212.173.IP) (Connection closed)
[14:22:00] <mkpankov> bluss: interesting
[14:22:02] <andreyv> How do I get all starting positions of a certain substring in a String?
[14:22:16] <Mutabah> andreyv: Why do you want indexes into a string?
[14:22:30] *** Joins: JKWright (JKWright@moz-k04m95.res.rr.com)
[14:22:32] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[14:22:45] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[14:23:50] *** Joins: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp)
[14:23:54] <cmr> andreyv: the stdlib doesn't expose an algorithm for that. might be able to do it with regex, but you probably want to implement it yourself (it's not really a well-defined operation when unicode is involved)
[14:24:10] <flavius> If I have an Option<const *Foo>, how can I create a new Option<&Foo> from it? What I have so far is this, but I don't know how to proceed: Some(ref x) => { let points_at = unsafe { *x };
[14:24:10] <bluss> does this do it? Unstable though. http://doc.rust-lang.org/std/primitive.str.html#method.match_indices
[14:24:38] <cmr> bluss: that's only disjoint matches, not all matches.
[14:24:43] *** Quits: wei2912 (wei2912@moz-gqk.krr.156.175.IP) (Quit: Lost terminal)
[14:24:44] <Mutabah> flavius: .map(|x| unsafe { &*x })
[14:24:59] <bluss> yeah. Using .find repeatedly would find all substring starts
[14:25:08] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[14:25:18] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[14:25:22] <cmr> yuck :) there are linear time algorithms for this.
[14:25:34] <mkpankov> does CString::new() allocate?
[14:25:44] <Mutabah> mkpankov: afaik no
[14:25:54] <Mutabah> mkpankov: (like Vec::new(), it uses a zero allocation)
[14:25:58] <cmr> mkpankov: possibly, if it needs to grow the vec.
[14:26:19] <cmr> Mutabah: that's not actually the type signature, it takes an Into<Vec<u8>> and does it in-place.
[14:26:24] <bluss> cmr: hm, is there a big difference?
[14:26:27] <Mutabah> cmr: Oh, does it?
[14:26:31] <andreyv> I don't need KMP for this, I just want some equivalent of C++'s std::string::find(str, start_pos) :)
[14:26:36] <Mutabah> cmr: I just guessed :)
[14:26:36] <mkpankov> so if it has extra byte to write '\0' to, it won't allocate?
[14:26:47] <cmr> mkpankov: yes.
[14:27:08] <Mutabah> andreyv: Could you do your algorithm without needing string indexes (instead using slices?)
[14:27:08] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[14:27:09] <bluss> cmr: oh I guess the "aa" in "aaaaa" case isn't linear with that approach yes
[14:27:19] <flavius> Mutabah: I'm sorry, whose map method are you referring to? 
[14:27:21] <mkpankov> nice
[14:27:26] <Mutabah> flavius: Option defines a map method
[14:27:32] <mkpankov> would be cool to see some type system distinction for functions that guaranteed to not allocate
[14:27:36] <mkpankov> *are
[14:27:37] <cmr> andreyv: ok, just use .find() then.
[14:27:43] <cmr> andreyv: that's not what you asked for though.
[14:27:52] *** Quits: fyolnish (fyolnish@moz-ehtogo.so-net.ne.jp) (Ping timeout: 121 seconds)
[14:28:04] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[14:28:18] <flavius> Mutabah: oh and you imply skipping the match altogether, I see
[14:28:37] <andreyv> My problem is that I, of course, searched for "find" in http://doc.rust-lang.org/1.0.0-beta.4/std/string/struct.String.html and found nothing
[14:28:46] <Manishearth> bstrie: The decorating function will have the same signature as the incoming fn , plus a T:Fn(same signature)
[14:28:48] <cmr> It's a method on slices, not the String type.
[14:28:51] *** Quits: Rym (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[14:28:51] <cmr> Use the doc search.
[14:28:56] <Manishearth> check out the #[make_decorator] annotation in adorn
[14:29:04] <Manishearth> (the fn-sugar test uses it)
[14:29:17] <cmr> (and String can deref into a slice)
[14:29:30] <Mutabah> cmr: It derefs into str...
[14:29:33] <Manishearth> I have a WIP to add string arguments to the decorator, so you can decorate with extra parameters, but those just get tacked on
[14:29:45] <Mutabah> cmr: Oh, yeah, str = string slice, how could I forget
[14:30:04] <mkpankov> btw, in a typical case like `let s = "abc".to_string(); let cs = CString::new(s);`, will there be room for nul byte? I think String allocates "just enough" space using a size hint
[14:30:27] *** Joins: cdidd_ (cdidd@moz-qm9ere.broadband.corbina.ru)
[14:30:55] <cmr> playbot: "abc".to_string().capacity()
[14:30:57] -playbot- 3
[14:31:00] <cmr> mkpankov: no.
[14:31:08] *** Quits: yuja (yuja@moz-dl4pq2.so-net.ne.jp) (Ping timeout: 121 seconds)
[14:31:40] *** Joins: srjek (srjek@moz-8k7gm6.ece.uic.edu)
[14:31:53] <mkpankov> cmr: what about `let s = "abc";` ?
[14:32:03] <cmr> mkpankov: there's no difference with that.
[14:32:21] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[14:32:27] <bluss> to do it well you need to set capacity manually
[14:32:28] *** Quits: cdidd (cdidd@moz-h9b2qq.broadband.corbina.ru) (Ping timeout: 121 seconds)
[14:32:42] <bluss> to avoid reallocation
[14:32:46] *** Quits: Kurufu (Kurufu@moz-pvv8b5.res.rr.com) (Ping timeout: 121 seconds)
[14:32:52] <mkpankov> I've been thinking about how string literals have to be stored with null byte in the image, maybe
[14:33:07] <mkpankov> in C, they are
[14:33:14] <Ms2ger> We're not C :)
[14:33:30] <mkpankov> Ms2ger: well sure, but we're compatible in many ways
[14:33:37] <cmr> not in that way.
[14:33:43] <mkpankov> we use same ELF executable format on Linux
[14:33:50] <andreyv> cmr: After obtaining the first index, should I use something like &s[pos+1..s.len()].find(...) to obtain the next occurrence?
[14:34:28] <Ms2ger> andreyv, (that slice can be written as s[pos + 1..])
[14:34:33] <cmr> andreyv: you can leave off the s.len(), and to find all occurences you need to scan from each index in the string.
[14:34:49] *** Joins: Kurufu (Kurufu@moz-pvv8b5.res.rr.com)
[14:35:02] <cmr> andreyv: that's not unicode-safe though, characters usually aren't 1 byte wide.
[14:35:02] <andreyv> cmr: I think I only need to start from pos+1, where pos is the last occurrence found
[14:35:15] <cmr> andreyv: no, consider finding "aaa" in "aaaaaaaa"
[14:35:41] <bluss> cmr: but last occurrence is at 0, so you search again at 1
[14:35:46] <bluss> cmr: it's correct for that cas
[14:35:48] <cmr> oh I see what you mean.
[14:35:51] <cmr> yes
[14:36:16] *** Quits: albertofem (textual@moz-03pmou.staticIP.rima-tde.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[14:36:20] <andreyv> Wait a minute... are you saying that indices do not correspond to Unicode characters, but rather bytes?
[14:36:29] <cmr> correct, as stated on the docs :)
[14:36:43] <cmr> (and it would be codepoints, not characters, my bad)
[14:36:51] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[14:37:47] <Ms2ger> Unicode's bad ;)
[14:38:30] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Connection closed)
[14:39:30] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[14:41:01] <andreyv> Well, this is weird
[14:41:22] <mkpankov> hehe, seems you people are wrong about presence of null byte in static strings: http://i.imgur.com/u8AjLt7.png
[14:41:40] <Mutabah> mkpankov: That could be luck
[14:41:53] <bluss> andreyv: well, tradeoffs. We need efficient strings
[14:41:59] <Mutabah> mkpankov: Point to the code that actually inserts a nul byte, then maybe we'll talk.
[14:42:11] <Mutabah> mkpankov: But even if LLVM goes and puts one there, it's not defined by the rust "standard"
[14:42:28] *** Quits: jherms (jherms@moz-o8d.9ba.189.46.IP) (A TLS packet with unexpected length was received.)
[14:42:38] <andreyv> bluss: So that an offset obtained from one operation can be passed and directly used by another operation without traversing the string, correct?
[14:42:41] <mkpankov> Mutabah: sure it's not, it's buried deep in the toolchain probably
[14:43:02] <mkpankov> ok, so I don't want to depend on this behavior, ok
[14:43:21] <bluss> andreyv: yes
[14:45:00] <mkpankov> Mutabah: yep, it was luck
[14:45:18] <mkpankov> Mutabah: simply adding second string literal broke it :)
[14:46:30] *** Joins: sigma1 (sigma@moz-llrbra.range86-135.btcentralplus.com)
[14:46:30] *** Quits: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com) (Connection reset by peer)
[14:46:34] *** Joins: kYem (Mibbit@moz-3804mt.as13285.net)
[14:46:42] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[14:46:53] <mkpankov> okay, going further about this: is there a way to ensure static strings have space for null byte as if I wanted to avoid reallocation when passing them to C?
[14:46:57] *** Joins: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at)
[14:47:09] <cmr> Just write "foo\0"
[14:47:41] <mkpankov> cmr: and something less obtrusive?
[14:47:50] <cmr> There is not.
[14:48:05] <mkpankov> ok, thanks
[14:48:39] <Manishearth> mkpankov: we use them as direct bytestrings in Servo
[14:49:03] <mkpankov> Manishearth: meaning how?
[14:49:22] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[14:49:26] <andreyv> cmr: It appears that to make it Unicode-safe I would need to use "pos + s.char_at(pos).len_utf8()" instead of "pos + 1"
[14:49:32] <mkpankov> you don't construct CStrings out of them?
[14:49:44] *** Quits: dinfuehr (dinfuehr@moz-d815du.highway.telekom.at) (Connection closed)
[14:49:53] <Manishearth> playbot: b"abc\0"
[14:49:54] -playbot- [97, 98, 99, 0]
[14:49:57] <Manishearth> mkpankov: ^
[14:49:58] <mkpankov> andreyv: blame Unicode :)
[14:50:06] <Manishearth> whenever we need to interop with C++ stuff
[14:50:32] *** Quits: sigma1 (sigma@moz-llrbra.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[14:50:33] <Manishearth> mkpankov: you can easily write a macro that generates a String-y struct from a static that acts like a static string from the Rust POV, but is internally a null terminated string
[14:50:44] *** Joins: dawehner (quassel@moz-84r.uga.249.209.IP)
[14:50:52] <Manishearth> obviously, it would be able to provide &str and &String s on demand
[14:51:05] <mkpankov> Manishearth: ah, might be better than what cmr initially suggested (just "abc\0"), to not have any possible problems with UTF-8
[14:51:07] <Manishearth> you might not even need a macro
[14:51:10] <Manishearth> yeah
[14:51:11] *** cdidd_ is now known as cdidd
[14:51:22] <mkpankov> cool
[14:51:45] <andreyv> OK, one last question: Suppose the question was "count the number of certain substrings in a string", is there a better solution than iterative .find()?
[14:52:05] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[14:52:53] <frewsxcv> there are algorithms that are tailored towards finding substrings. KMP is one of them
[14:53:05] *** Joins: murz (murz@moz-nr2kro.wa.comcast.net)
[14:53:26] <andreyv> Yes, of course :) I mean a more "Rust" way of doing the same thing
[14:53:49] <andreyv> (the trivial algorithm)
[14:53:49] *** Quits: murz (murz@moz-nr2kro.wa.comcast.net) (Connection closed)
[14:54:00] <mkpankov> is there a way to do this error handling less verbose? https://github.com/mkpankov/rexdump/blob/master/src/main.rs#L237
[14:54:06] *** Joins: murz (murz@moz-nr2kro.wa.comcast.net)
[14:54:20] <mkpankov> w/o a macro I mean
[14:55:17] *** Joins: Rym (y@moz-o80acm.range86-189.btcentralplus.com)
[14:55:34] <mkpankov> I keep thinking there could be something involving ".or()" but can't wrap my head around it
[14:55:44] *** Joins: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net)
[14:56:06] <Titi_Alone> I have trouble using lazy_static: http://is.gd/82J3zt
[14:56:21] *** Joins: tsurai_ (tsurai@moz-obvkue.versanet.de)
[14:56:28] <frewsxcv> mkpankov: for starters https://gist.github.com/frewsxcv/6dfd6d98dfec99f6da0b
[14:56:56] <Manishearth> Titi_Alone: it won't work on the playpen
[14:57:00] <mkpankov> frewsxcv: :) it's a start
[14:57:05] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[14:57:12] <Mutabah> Titi_Alone: You need to import the lazy_static crate
[14:57:13] <Manishearth> that looks correct to me though
[14:57:15] <Mutabah> Titi_Alone: See the readme
[14:57:20] <Titi_Alone> Manishearth: Of course, but it don't work at all
[14:57:26] <Manishearth> Titi_Alone: what does it do?
[14:57:38] <Titi_Alone> Mutabah: I've imported it
[14:57:53] <Mutabah> Titi_Alone: With #[macro_use]?
[14:57:56] <Manishearth> Titi_Alone: can I get a paste of the error message?
[14:58:25] <frewsxcv> mkpankov: .unwrap_or_else / .or_else / etc. won't really work because they use closures, and you wouldn't be able to use a `return` from within the closure to exit the outer function
[14:58:27] <Manishearth> Titi_Alone: https://github.com/Kimundi/lazy-static.rs#example
[14:58:31] <Titi_Alone> Mutabah: Yes
[14:58:44] <Manishearth> Titi_Alone: so what goes wrong?
[14:58:47] <Titi_Alone> Manishearth: http://pastebin.com/i11TmvwY
[14:58:53] <Manishearth> thx
[14:59:22] *** Quits: tsurai (tsurai@moz-po4afh.versanet.de) (Ping timeout: 121 seconds)
[14:59:25] <Titi_Alone> (I import the crate on the file "lib.rs"
[14:59:30] <Mutabah> Titi_Alone: You're passing an enum constructor where an enum is expected
[14:59:42] *** Joins: snowfrog (Mibbit@moz-i4t6nv.dynamic.kabel-deutschland.de)
[14:59:44] *** Quits: Rym (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[14:59:53] <Manishearth> Titi_Alone: Output is a function
[15:00:01] <Manishearth> Output(somestring) is an Argument
[15:00:06] <mkpankov> frewsxcv: yes, and I end up with different types for different match arms in any case. so it seems there's nothing a lot better
[15:00:09] <kimundi> Titi_Alone: So, this is not really an issue with lazy_static, you just have a type error in your own code :)
[15:00:10] <Manishearth> all enum variants are also functions
[15:00:44] *** Joins: Sprog (Sprog@moz-u3bo4c.lv.cox.net)
[15:00:56] <Titi_Alone> It works now, thank everybody
[15:01:03] <mkpankov> frewsxcv: speaking of different types, I don't get why your variant compiles. type for Ok is Fd, but for Err it's ()
[15:01:12] *** Joins: hjr3 (hradtke@moz-e235ok.fios.verizon.net)
[15:01:20] <mkpankov> is it return that is special-cased?
[15:02:05] <frewsxcv> mkpankov: because of the `return`. upon reaching a `return`, rust exits the function with that value
[15:02:13] *** Quits: tsurai_ (tsurai@moz-obvkue.versanet.de) (Quit: Leaving)
[15:02:22] <mkpankov> so it is special-cased
[15:02:36] <frewsxcv> so it won't try to assign the () to fd
[15:02:43] <mkpankov> ok, makes sense
[15:03:21] <mkpankov> (I just wonder how the type system represents this. looks like a loophole to a noob like me)
[15:03:48] *** Joins: Rym (y@moz-o80acm.range86-189.btcentralplus.com)
[15:04:27] *** Joins: sigma (sigma@moz-a5u.m43.48.37.IP)
[15:04:30] *** Joins: lyc (lyc@moz-2oa.us4.25.175.IP)
[15:05:16] <kimundi> mkpankov: unreachable code in functions basically gets a special type that is compatible with any other type. This is why you can do, eg, let x: String = return 5;
[15:05:34] <kimundi> with "return 5" being an expression with an unreachable value
[15:05:52] <kimundi> playbot: let x: String = return;
[15:06:04] <mkpankov> poor playbot :)
[15:06:13] <kimundi> playbot: let x: String = { println!("Test"); return };
[15:06:14] -playbot- Test
[15:06:24] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[15:06:44] <raph> traditionally in type theory this is represented as a lattice. I'm not sure if it's the same in Rust
[15:07:07] <kimundi> its either considered the button or top type, I can never remember which is which
[15:07:09] <raph> With the "unreachable" value being represented by "top"
[15:07:43] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[15:07:47] <mkpankov> let x: String = return; make_me_an_error
[15:07:52] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[15:07:59] <mkpankov> playbot: let x: String = return; make_me_an_error
[15:08:00] -playbot- <anon>:9:33: 9:49 error: unresolved name `make_me_an_error`
[15:08:00] -playbot- <anon>:9         let x: String = return; make_me_an_error
[15:08:00] -playbot- output truncated; full output at: http://bit.ly/1J2qfNm
[15:08:06] *** Joins: lipkab (the_new_lip@moz-qt0i13.biatv.hu)
[15:08:16] <andreyv> Well... I actually have one more question :) How to make a two- (three-, four-, ...) dimensional array that can't be stored on stack? Vector of vectors is probably unacceptable.
[15:08:17] <cmr> raph: rust indeed uses a lattice.
[15:08:23] <cmr> but we use bottom
[15:08:24] <mkpankov> wow
[15:08:33] *** Quits: lyc (lyc@moz-2oa.us4.25.175.IP) (Ping timeout: 121 seconds)
[15:08:33] <cmr> it's a subtype of every type.
[15:08:40] <Manishearth> raph: well, ! is called the "bottom" type, so I assume someone was thinking of lattices whilst designng this
[15:08:47] <mkpankov> so it's possible to return from the middle of expression evaluation
[15:08:54] <raph> cmr: ah, okay, my memory on this was a bit‚Ä¶ rusty
[15:08:55] *** Joins: alex_ (alex@moz-ab8ivq.bb.dnainternet.fi)
[15:09:11] <mkpankov> (meaning show({return;}) won't execute show
[15:09:13] <cmr> mkpankov: I'm always a fan of Vec<Foo> with explicit dimension computation
[15:09:37] <Manishearth> cmr: strangely enough the type system doesn't let you create multiple bottom types (eg nullary enums are not treated as a bottom type even though they are)
[15:09:40] <frewsxcv> cmr: that message is for andreyv not mkpankov 
[15:09:55] *** Joins: lyc (lyc@moz-jft.nr8.226.207.IP)
[15:10:02] <cmr> oh, indeed it is.
[15:10:16] <frewsxcv> mkpankov: would C do the same thing?
[15:10:16] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[15:10:22] <cmr> Manishearth: the only other types which induce subtyping involves lifetimes.
[15:10:35] <Manishearth> cmr: ?
[15:10:43] <mkpankov> frewsxcv: well you can't embed a statement to the expression in C, and return is a statement there
[15:10:48] <Manishearth> I meant that enum foo{} is not a true bottom type
[15:11:00] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:11:01] <cmr> of course it isn't, it doesn't have a subtype relation with any other type
[15:11:09] <cmr> (except for actual-bottom)
[15:11:12] <andreyv> cmr: So, use a Vec<T> and do v[i*SIZE + j] ?
[15:11:15] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[15:11:19] <cmr> andreyv: yeah
[15:11:24] <Manishearth> cmr: yeah, but it has the exact same semantics as actual-bottom
[15:11:32] *** Joins: frankmcs_ (frankmcsher@moz-5tq57f.dyn.telefonica.de)
[15:11:42] <Manishearth> we could technically make ! a lang item that's just annotated on a nullary enum
[15:11:44] <cmr> Manishearth: why would the complication be worth it?
[15:11:49] <Manishearth> cmr: no reason
[15:12:00] *** bvssvni_ is now known as bvssvni
[15:12:03] <mkpankov> why does returning from the middle of expression look so insane to me?
[15:12:05] <Manishearth> cmr: not saying we *should*
[15:12:10] <Manishearth> just noting it :P
[15:12:21] <mkpankov> am I too used to C? :P
[15:12:23] <Ms2ger> mkpankov, probably because you're not used to it :)
[15:12:52] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[15:12:56] *** Joins: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net)
[15:12:57] <meh> how can I get a #[repr(C)] enum from an i32?
[15:13:02] *** Quits: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net) (Ping timeout: 121 seconds)
[15:13:37] <flavius> I have a struct for which I need to implement the equality operation (from what I understand, it's the PartialEq trait). I do not care about the data inside this struct, two structs are equal if they have the same address. When I try to implement it, I get the error: error: the trait `core::cmp::PartialEq<hypergraph::Graph>` is not implemented for the type `&hypergraph::Graph` - since I'm using
[15:13:39] <flavius> the struct as a reference. How to fix this?
[15:14:07] *** Quits: v212 (vee@moz-lhp.bqs.204.223.IP) (Ping timeout: 121 seconds)
[15:14:11] <mkpankov> speaking of C, in the GNU extension that allows last expression of the block to be the block result, semantics are probably the same
[15:14:17] *** Quits: frankmcsherry (frankmcsher@moz-87vov1.dyn.telefonica.de) (Ping timeout: 121 seconds)
[15:14:56] <Manishearth> flavius: probably because you're actually equating a graph with an &graph
[15:15:07] <Manishearth> or perhaps you go tthe partialeq impl wrong
[15:15:15] <Manishearth> I think partialeq takes &self
[15:15:27] <Manishearth> perhaps the other arg should also be &graph? (not sure)
[15:15:31] <Manishearth> need to se your impl
[15:16:52] *** Quits: TheLemonMan (lemonboy@moz-il0u53.50-151.net24.it) (Quit: "It's now safe to turn off your computer.")
[15:18:27] *** Quits: hjr3 (hradtke@moz-e235ok.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[15:18:30] *** Quits: kYem (Mibbit@moz-3804mt.as13285.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:20:39] *** Joins: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net)
[15:21:21] <andreyv> cmr: Actually vec![[0; 32]; 32]; seems to work, which is perfect for my needs
[15:21:26] <flavius> Manishearth: the troubling line is 175: https://gist.github.com/flavius/e15aedb7fabe7abd44c1
[15:22:24] <flavius> Manishearth: oh sorry, it should be working correctly, the test code is wrong
[15:22:32] *** Quits: alex_ (alex@moz-ab8ivq.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[15:23:21] <flavius> The [src] link does not work https://doc.rust-lang.org/std/macro.assert_eq!.html
[15:23:41] <andreyv> Thanks to everyone for the answers
[15:24:06] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[15:26:24] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[15:26:56] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Connection closed)
[15:26:59] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[15:27:02] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Connection closed)
[15:27:28] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[15:29:44] *** Joins: logan_e (logan_e@moz-ltn.qg3.218.73.IP)
[15:31:30] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[15:32:14] *** Joins: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net)
[15:32:27] *** Quits: nercury (nercury@moz-ngr949.static.zebra.lt) (Client exited)
[15:33:07] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:34:00] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Connection closed)
[15:34:09] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[15:34:14] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[15:34:18] *** Joins: thlst (thelost@moz-22b.88a.35.177.IP)
[15:34:42] *** Joins: mjewkes (mjewkes@moz-uur7pt.eastlink.ca)
[15:34:49] <thlst> If closures map onto ref, ref mut and move, then why is FnOnce not called FnMove?
[15:35:12] *** Joins: mohawk (Mibbit@moz-6ba4m3.cpe.distributel.net)
[15:35:35] *** Quits: mohawk (Mibbit@moz-6ba4m3.cpe.distributel.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:35:41] <raph> thlst: discussion here: https://internals.rust-lang.org/t/renaming-fnonce-to-fnmove/1754
[15:35:57] <thlst> thanks raph
[15:36:02] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:36:16] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[15:37:00] *** Quits: sigma (sigma@moz-a5u.m43.48.37.IP) (Ping timeout: 121 seconds)
[15:37:38] *** Joins: JFlash (textual@moz-eimsel.fios.verizon.net)
[15:38:16] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[15:38:18] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[15:41:32] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[15:43:37] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[15:45:32] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[15:47:11] *** Parts: thlst (thelost@moz-22b.88a.35.177.IP) ()
[15:48:17] *** Joins: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net)
[15:49:17] *** Joins: v212 (vee@moz-lhp.bqs.204.223.IP)
[15:50:41] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[15:50:51] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Connection closed)
[15:51:23] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[15:53:10] *** Quits: areski (areski@moz-adq529.user.ono.com) (Ping timeout: 121 seconds)
[15:53:12] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Connection closed)
[15:53:18] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[15:53:55] *** Joins: geri (Mibbit@moz-si0249.highway.telekom.at)
[15:54:04] *** Quits: JKWright (JKWright@moz-k04m95.res.rr.com) (Quit: Be back later ...)
[15:54:26] *** Joins: nercury (nercury@moz-ngr949.static.zebra.lt)
[15:56:26] <mkpankov> are there any posts on Rust usage in Servo? meaning, what makes Servo different from conventional engines so far - performance/multithreading support/anything else?..
[15:56:52] <flavius> mkpankov: the use of a safe programming language
[15:57:20] *** Quits: Douman (Douman@moz-3ei4gt.dynamic.mts-nn.ru) (Ping timeout: 121 seconds)
[15:57:22] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[15:57:37] <flavius> I get the error " error: cannot borrow `g` as immutable because it is also borrowed as mutable " and I don't know how to fix it, the code is at https://gist.github.com/flavius/e15aedb7fabe7abd44c1#file-hypergraph-rs-L174
[15:58:02] <mkpankov> flavius: well that's good, but I don't think it's gonna penetrate the mental defense of other safe PL programmers (like, Java)
[15:58:23] <apoelstra> carllerche: in eventual, you have a couple of transmutes from &ptr to &mut ptr ... it looks like the lib compiles if you remove these transmute and then change a ton of functions to &mut self from &self
[15:58:31] <apoelstra> do you recall why this wasn't done in the first place?
[15:58:35] <mkpankov> (I'm not suggesting writing browser engine in Java, I just want cool examples of Rust usage)
[15:59:05] <flavius> mkpankov: penetrating java was not part of your question :D
[15:59:21] <mkpankov> flavius: Java, Ruby, C++ - you name it
[15:59:24] <Ms2ger> mkpankov, maybe https://github.com/larsbergstrom/papers/blob/master/icfp15-servo-submitted.pdf can interest you
[15:59:40] <flavius> mkpankov: nowhere did you mention penetration
[16:01:04] <mkpankov> Ms2ger: cool, what I was looking for!
[16:01:06] *** Joins: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com)
[16:01:46] *** Quits: lordblackfox (lordblackfo@moz-ic2.cp7.87.212.IP) (Ping timeout: 121 seconds)
[16:02:14] <mkpankov> speaking of that article, I'm greatly impressed by the timings
[16:02:24] <mkpankov> like Reddit rendering is 5 times faster than Gecko
[16:02:32] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[16:02:38] *** Quits: mjewkes (mjewkes@moz-uur7pt.eastlink.ca) (Connection closed)
[16:02:45] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[16:04:28] *** Joins: Diggsey (diggsey@moz-c3no8o.dsl.pipex.com)
[16:05:38] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[16:05:50] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[16:06:39] <apoelstra> is there a way i can get an &mut from an Rc?
[16:06:41] <myname> how comes there is that much C in servom
[16:06:59] *** Quits: dawehner (quassel@moz-84r.uga.249.209.IP) (Ping timeout: 121 seconds)
[16:07:00] <apoelstra> oh with a refcell i guess .. gross
[16:07:07] *** Quits: mtsr (mtsr@moz-5r1gp7.yourbnc.co.uk) (Ping timeout: 121 seconds)
[16:07:12] *** Quits: datalus (Andrew@moz-28gbmi.res.rr.com) (Quit: leaving)
[16:07:29] <mbrubeck> mkpankov: https://blog.mozilla.org/research/2014/08/26/javascript-servos-only-garbage-collector/ is a little old but covers a really key way that Servo uses Rust.
[16:08:12] *** Joins: datalus (Andrew@moz-28gbmi.res.rr.com)
[16:08:32] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Quit: WeeChat 1.1.1)
[16:08:40] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[16:08:40] <mbrubeck> flavius: I think you'll need to split new_contained_node into two functions
[16:09:05] <mbrubeck> one that takes `&mut self`, creates the new node, and returns an ID of some sort
[16:09:10] <Derecho> listwords
[16:09:12] *** Quits: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net) (Connection closed)
[16:09:13] <Derecho> whoops. sorry.
[16:09:17] <mbrubeck> and another that takes `&self` and an ID, and returns a reference to the child graph.
[16:09:44] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[16:09:47] <Fenhl> is `multirust update nightly` taking unusually long for anyone else today?
[16:10:05] <mbrubeck> (The ID could be an index into self.contained_nodes if that's stable, or you could change that to a hashmap with unique keys or something.)
[16:10:10] <flavius> mbrubeck: would one of these two functions call the other? i.e. would the "client code" remain BC?
[16:10:42] <mbrubeck> flavius: No -- you'd have to change the client code.
[16:10:59] <flavius> mbrubeck: that (sorry for the language) sucks
[16:11:05] *** Quits: k1000 (k1000@moz-bodlln.ip-198-50-149.net) (Ping timeout: 121 seconds)
[16:11:09] <mbrubeck> flavius: If you have a function from `&mut self` that return `&Graph`
[16:11:12] *** Quits: lyc (lyc@moz-jft.nr8.226.207.IP) (Connection closed)
[16:11:14] <flavius> two lines of code for doing one thing (logistically)
[16:11:25] <mbrubeck> then `self` remains borrowed as long as the returned &Graph exists
[16:11:30] <mbrubeck> flavius: Yeah. :(
[16:11:37] <mbrubeck> flavius: Trying to think if there's a better way to solve this...
[16:11:40] *** Quits: jviereck (Adium@moz-r772na.dclient.hispeed.ch) (Quit: Leaving.)
[16:11:47] <mkpankov> mbrubeck: thanks
[16:11:52] *** Joins: oleh_ts (oleh@moz-9ht.9eg.78.93.IP)
[16:12:01] *** Joins: c0170 (c0170@moz-dev.ffi.127.79.IP)
[16:12:37] <flavius> my enthusiasm for rust when it comes to isomorphic data structures starts to decrease...
[16:12:50] <mbrubeck> flavius: I wish there were a way for functions like this to borrow `&mut self` temporarily, then "downgrade" the borrow to `&self`
[16:13:06] <mbrubeck> flavius: Graphs and Borrowck are ancient adversaries. :)
[16:13:33] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[16:14:13] *** Joins: csherratt (textual@moz-357qdq.cable.teksavvy.com)
[16:14:16] *** Joins: k1000 (k1000@moz-bodlln.ip-198-50-149.net)
[16:14:21] *** Quits: lipkab (the_new_lip@moz-qt0i13.biatv.hu) (Connection closed)
[16:14:26] <mbrubeck> flavius: So, another solution is to make contained_nodes "interior mutable" using RefCell.... That gives up some static safety, though. :/
[16:14:50] <flavius> rust should put these kind of problems on top 10 priorities, as graph database start to gain momentum, it would be a great place for rust to pick up as well, for all those new start-ups
[16:15:18] *** Quits: debuuu (debu@moz-thlvnr.dyn.telefonica.de) (Ping timeout: 121 seconds)
[16:15:26] <mbrubeck> flavius: Yeah -- you're the second person in the past couple weeks I've seen with an identical problem.
[16:15:43] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[16:16:18] *** Joins: lyc (lyc@moz-2oa.us4.25.175.IP)
[16:16:52] <mbrubeck> flavius: Using references for a function like this is going to be problemantic in other ways, I think.
[16:16:55] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[16:17:04] <mbrubeck> Even if you detangle the lifetimes by splitting this into two functions...
[16:17:15] *** Quits: kvsari (kvsari@moz-fgsnv9.bbtec.net) (Connection closed)
[16:17:24] <mbrubeck> You can't add a second node while holding onto the first node's reference.
[16:17:25] <flavius> you mean because it's returning a reference?
[16:17:48] <mbrubeck> Yeah -- you can't move or mutate the graph while the child borrow exists, and for good reason.
[16:18:17] *** Joins: thelink2012 (Mibbit@moz-ra3.o3h.183.179.IP)
[16:18:31] <mbrubeck> So it really might be better to hold onto the child notes using some other key.  Or make them Rc instead of box, and return Rc<Graph>.
[16:18:34] <flavius> I could just return Option(position)
[16:19:00] <mbrubeck> Yeah, position works as long as you don't remove or re-order nodes.
[16:19:10] <flavius> it's not really that important what the return type is, as long it signals failure or success
[16:19:41] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:19:48] <mbrubeck> Right now you're returning &Graph
[16:19:54] <flavius> I know
[16:20:19] *** Quits: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP) (Ping timeout: 121 seconds)
[16:20:21] *** Quits: lyc (lyc@moz-2oa.us4.25.175.IP) (Ping timeout: 121 seconds)
[16:21:04] <frankmcs_> did someone say graphs!?!
[16:21:07] <mbrubeck> You could just change that to Rc<Graph> and change the list to Vec<Rc<Graph>>
[16:21:29] <mbrubeck> There's also https://www.reddit.com/r/rust/comments/319dfg/tutorial_on_graphs_in_rust/ :)
[16:21:52] * mbrubeck -> working in the garden
[16:22:00] <flavius> thanks for the feedback mbrubeck 
[16:22:14] <Ms2ger> mbrubeck, plenty of gardening to be done on Servo too ;)
[16:22:16] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[16:22:32] <frankmcs_> I usually just maintain graph identifiers and indices on the side. the only downside I can see vs Rc is that you don't get immediate clean-up, but just about everything else gets easier.
[16:22:47] *** Joins: lyc (lyc@moz-2oa.us4.25.175.IP)
[16:23:02] *** Quits: lyc (lyc@moz-2oa.us4.25.175.IP) (Connection closed)
[16:23:38] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[16:26:21] *** Quits: sayan (sayan@moz-ip8.595.51.106.IP) (Ping timeout: 121 seconds)
[16:26:35] *** Quits: Hannibal_Smith (nico@moz-hacth9.retail.telecomitalia.it) (Quit: Leaving)
[16:27:52] *** Joins: ebel (rory@moz-0lehdb.m4r4.nqcu.0470.2001.IP)
[16:27:56] <JFlash> im not seeing anything in the docs about having match statements w/ branches that have multiple lines, is it discouraged? possible?
[16:28:07] <JFlash> sorry, total noob here
[16:28:10] <Ms2ger> Perfectly fine
[16:28:47] <flavius> JFlash: => { ... }
[16:29:20] *** Quits: nercury (nercury@moz-ngr949.static.zebra.lt) (Client exited)
[16:30:15] *** Joins: zhoeon (fc@moz-cuhqb2.cable.teksavvy.com)
[16:30:19] <JFlash> doesn't that introduce another scope?
[16:30:34] <Ms2ger> Yes, is that an issue?
[16:30:47] *** Quits: aldeka (quassel@moz-qqf.of6.243.162.IP) (Connection closed)
[16:30:47] *** Joins: aldeka (quassel@moz-qqf.of6.243.162.IP)
[16:31:00] *** Quits: Ms2ger (Ms2ger@moz-2md1ol.isp.belgacom.be) (Quit: bbl)
[16:31:23] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[16:31:57] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[16:32:01] *** Quits: aldeka (quassel@moz-qqf.of6.243.162.IP) (Connection closed)
[16:32:02] *** Joins: aldeka (quassel@moz-qqf.of6.243.162.IP)
[16:32:03] <zhoeon> Hi could someone explain what is the performance cost of running a c library like OpenGL Rust? I haven't Rust yet I considering it. I currently use Go but c calls are expensive.
[16:32:20] *** Joins: oberstet (quassel@moz-rh5de1.dynamic.mnet-online.de)
[16:32:21] *** Joins: chc4 (chc4@moz-mjph4c.ma.comcast.net)
[16:32:22] *** Quits: oberstet (quassel@moz-rh5de1.dynamic.mnet-online.de) (Connection closed)
[16:32:35] *** Joins: lyc (lyc@moz-2oa.us4.25.175.IP)
[16:33:55] <Diggsey> The call itself shouldn't be expensive at all
[16:33:55] *** Joins: mnemnion (mnemnion@moz-kf3boi.ca.comcast.net)
[16:33:57] <meh> zhoeon, virtually none
[16:34:07] <flavius> zhoeon: compared to go, rust is meant to be reusable from C (C calls rust) and vice-versa. Even if it's not extremely performant as of now, we should expect improvement over time
[16:34:31] *** Joins: Douman (Douman@moz-3ei4gt.dynamic.mts-nn.ru)
[16:34:41] <flavius> zhoeon: rust also has the advantage of using llvm, which brings a lot of benefits
[16:34:41] <zhoeon> Ok thank you.
[16:34:43] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[16:34:45] <Diggsey> but things like strings are represented slightly differently between C and Rust, so you'd have to convert (which should still be relatively fast)
[16:34:53] *** Quits: blank_name (blank_name@moz-hks8er.gdrpmi.sbcglobal.net) (Quit: leaving)
[16:34:57] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[16:35:00] *** Quits: __yulin__ (chatzilla@moz-gjt6ht.dynamic-ip.hinet.net) (Quit: ChatZilla 0.9.91.1 [Firefox 37.0.2/20150420225811])
[16:35:12] <zhoeon> I read an OpenGL library which used c types native.
[16:35:29] <zhoeon> Rust library*
[16:36:20] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[16:36:39] *** Quits: lyc (lyc@moz-2oa.us4.25.175.IP) (Ping timeout: 121 seconds)
[16:37:02] *** Joins: lyc (lyc@moz-jft.nr8.226.207.IP)
[16:37:17] *** Joins: alexggordon (alexggordon@moz-slt.b6v.251.159.IP)
[16:37:40] *** Quits: snowfrog (Mibbit@moz-i4t6nv.dynamic.kabel-deutschland.de) (Quit: http://www.mibbit.com ajax IRC Client)
[16:39:16] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[16:41:46] *** Joins: noam (noam@moz-6kn.6at.57.213.IP)
[16:42:02] *** Quits: lyc (lyc@moz-jft.nr8.226.207.IP) (Connection closed)
[16:45:43] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[16:47:02] *** Joins: Uther (Thunderbird@moz-gssp49.fbx.proxad.net)
[16:47:26] *** Joins: uorbe001 (uorbe001@moz-fu0ivl.clientes.euskaltel.es)
[16:47:34] *** Joins: panicbit (panicbit@moz-r4ks4s.dip0.t-ipconnect.de)
[16:47:37] *** Quits: v212 (vee@moz-lhp.bqs.204.223.IP) (Ping timeout: 121 seconds)
[16:48:32] *** Joins: mtsr (mtsr@moz-5r1gp7.yourbnc.co.uk)
[16:49:44] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[16:50:39] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[16:50:52] <Twinklebear> should Cargo be packaging the target directory when building my package? I've placed target/ in the ignore list but it doesn't seem to care
[16:51:28] <uorbe001> So, I had this code working but it broke with a recent update on the nightly builds. I‚Äôm trying to parse a block using syntax::parse::parser::Parser, I used to be able to parse it fine, but now I get an error saying the block is ‚Äúan interpolated block‚Äù. How am I supposed to parse an ‚Äúinterpolated block‚Äù? 
[16:51:30] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[16:51:42] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[16:51:47] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[16:52:18] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[16:52:35] *** Quits: Melancholia (Mibbit@moz-f9d.scc.251.41.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:53:02] <flavius> Twinklebear: cargo new already puts target/ in .gitignore, why did you need to do that again in the first place?
[16:53:23] *** Quits: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se) (Ping timeout: 121 seconds)
[16:53:28] <Twinklebear> I'm not sure why honestly. The cargo package behavior changed and it now seems ot be packaging up the target directory though
[16:54:22] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[16:54:33] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[16:54:39] <Twinklebear> was target always supposed to be published and I never payed attention?
[16:54:47] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[16:55:07] <Twinklebear> hm seems like it was in some older crates too
[16:56:44] <JFlash> Ms2ger: I don't know, probably not, I'm just trying to get a simple stack implementation working... it works as it is now http://is.gd/tFc8Xn but I wanted `pop` to return the popped value and just cannot get it to work... this is basically where im at now: http://is.gd/2sCuy9
[16:56:48] <mkpankov> Twinklebear: what do you mean by 'packaging'?
[16:56:58] <Twinklebear> mkpankov, when you run cargo package
[16:57:22] <mkpankov> Twinklebear: oh? is that a recent addition? my version doesn't have it documented
[16:57:24] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[16:57:40] <Twinklebear> here's the behavior change I'm referring to: https://github.com/rust-lang/cargo/pull/1584#issuecomment-100490350
[16:57:41] *** Joins: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP)
[16:57:42] <JFlash> if anyone has any insight that'd be great :)
[16:57:47] *** Quits: skade (skade@moz-m9ib3m.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[16:58:13] <mkpankov> Twinklebear: ah, nevermind, command is available even though it's not documented
[16:58:24] *** Joins: niconii (nicole@moz-5gqgia.frgo.qwest.net)
[16:58:43] <Twinklebear> ooh sorry you meant the package command itself, usually it would just run before when you do a `cargo publish`
[16:59:29] <mkpankov> Twinklebear: cargo publish isn't documented either :)
[16:59:32] *** Quits: oleh_ts (oleh@moz-9ht.9eg.78.93.IP) (Quit: Lost terminal)
[16:59:59] <Twinklebear> mkpankov, http://doc.crates.io/crates-io.html is where I learned about it
[17:01:27] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[17:01:36] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:02:43] <flavius> Who's nrc - Nick Cameron? He is using almost the same language as I would do in his document https://github.com/nrc/r4cppp/tree/master/graphs. Does he join this channel?
[17:03:37] *** Joins: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP)
[17:04:25] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[17:05:39] *** Joins: jeffasinger (jeff@moz-u5nog7.res.rr.com)
[17:05:43] *** Quits: jeffasinger (jeff@moz-u5nog7.res.rr.com) (Client exited)
[17:05:47] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[17:06:07] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[17:07:03] *** Joins: victor (Mibbit@moz-fgundf.dynamic.ziggo.nl)
[17:08:29] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Quit: )
[17:08:51] *** Joins: degorov (Mibbit@moz-vgj.itt.14.176.IP)
[17:08:57] *** Quits: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP) (Client exited)
[17:09:57] *** Quits: avikpal (avikpal@moz-q5f.3gs.227.117.IP) (Connection closed)
[17:11:11] <kimundi> flavius: nrc is one of the core Rust developers - he's infrequently online in #rust-internals
[17:11:23] *** Quits: mkpankov (user@moz-gqa.dee.149.83.IP) (Ping timeout: 121 seconds)
[17:11:56] *** Quits: kjsebastian (kjsebastian@moz-97588b.singnet.com.sg) (Ping timeout: 121 seconds)
[17:12:22] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[17:13:05] <Titi_Alone> I've an error while using gcc crate: "   Compiling snappy-rs v0.1.0 (file:///C:/Users/Titouan/Documents/Informatique/P
[17:13:06] <Titi_Alone> rogrammation/Mozilla/Rust/personal_projects/snappy-rs)
[17:13:06] <Titi_Alone> build.rs:1:1: 1:18 error: found staticlib `gcc` instead of rlib or dylib
[17:13:06] <Titi_Alone> build.rs:1 extern crate gcc;
[17:13:06] *** Titi_Alone was kicked by fripp.mozilla.org (Channel flood triggered (limit is 5 lines in 3 secs))
[17:13:24] *** Joins: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net)
[17:13:37] *** Joins: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk)
[17:15:21] *** Joins: mib_i4ukj6 (Mibbit@moz-2j0ear.mi.comcast.net)
[17:15:53] *** Quits: mib_i4ukj6 (Mibbit@moz-2j0ear.mi.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:16:31] *** Joins: fabianvf (fabianvf@moz-onn.3sq.102.66.IP)
[17:18:48] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[17:19:03] <niconii> Titi_Alone: you've gotta use pastebin or similar for that, you can't paste lots of lines in here at once
[17:19:52] *** Quits: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk) (Ping timeout: 121 seconds)
[17:20:05] <Titi_Alone> http://pastebin.com/s994j245
[17:20:29] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[17:20:31] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[17:20:33] *** Quits: fabianvf (fabianvf@moz-onn.3sq.102.66.IP) (Ping timeout: 121 seconds)
[17:20:55] *** Joins: jeffasinger (jeff@moz-u5nog7.res.rr.com)
[17:21:11] *** Joins: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net)
[17:23:41] *** Joins: kmcguire (kmcguire@moz-bbqf14.res.bhn.net)
[17:24:32] *** Joins: sayan (sayan@moz-ip8.595.51.106.IP)
[17:24:47] *** Quits: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net) (Quit: Leaving.)
[17:27:11] *** Quits: jeffasinger (jeff@moz-u5nog7.res.rr.com) (Client exited)
[17:27:58] *** Joins: kmcguire_ (kmcguire@moz-bbqf14.res.bhn.net)
[17:27:58] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Connection closed)
[17:28:09] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[17:29:07] <carllerche> apoelstra: I don't recall off hand. I'm out atm. Could you file an issue pointing to the code?
[17:29:08] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[17:30:26] *** Quits: kmcguire (kmcguire@moz-bbqf14.res.bhn.net) (Ping timeout: 121 seconds)
[17:31:34] *** Joins: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu)
[17:31:44] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[17:31:57] *** Joins: dawehner (quassel@moz-jms.k95.62.64.IP)
[17:32:20] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Ping timeout: 121 seconds)
[17:32:49] *** Joins: skade (skade@moz-m9ib3m.pools.vodafone-ip.de)
[17:33:39] <Rym> Anyone got an example of defining a `macro_rules` within a `macro_rules`? Or is that forbidden these days?
[17:33:56] *** Joins: atomic (atomic@moz-u4m4lu.rev.poneytelecom.eu)
[17:35:41] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[17:36:26] *** Quits: alexggordon (alexggordon@moz-slt.b6v.251.159.IP) (Ping timeout: 121 seconds)
[17:36:57] <Rym> Actually, nevermind, I don't think I can meet my needs without breaking hygiene.
[17:37:45] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[17:39:59] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[17:40:35] *** Joins: jeffasinger (jeff@moz-u5nog7.res.rr.com)
[17:40:49] *** Quits: eddyb (eddyb@moz-9pm.kjd.26.188.IP) (Connection closed)
[17:41:00] *** Quits: uorbe001 (uorbe001@moz-fu0ivl.clientes.euskaltel.es) (Client exited)
[17:41:11] *** Quits: JFlash (textual@moz-eimsel.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[17:41:18] *** Joins: rumpler (Mibbit@moz-i7cb3r.fios.verizon.net)
[17:42:26] *** Joins: lyc (lyc@moz-2oa.us4.25.175.IP)
[17:42:43] *** Joins: tomprogrammer (thomas@moz-lglg1b.tr5r.qept.4dd0.2001.IP)
[17:42:44] *** Quits: rmdashrf (rmdashrf@moz-n1r.cr0.54.128.IP) (Quit: WeeChat 0.4.2)
[17:43:12] *** Joins: ascarter (ascarter@moz-705hf8.wa.comcast.net)
[17:45:56] *** Joins: demilux (demilux@moz-73qa6c.wa.comcast.net)
[17:46:30] *** Quits: lyc (lyc@moz-2oa.us4.25.175.IP) (Ping timeout: 121 seconds)
[17:46:50] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[17:47:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[17:49:01] *** Joins: mahdi (mahdi@moz-j3v.506.244.151.IP)
[17:49:07] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[17:51:15] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[17:51:23] *** Joins: tormoz (geov@moz-3q6.afp.124.178.IP)
[17:53:57] *** Quits: Slava_I (slava@moz-a7c.n0g.135.88.IP) (Connection closed)
[17:54:14] *** Joins: dellavg (dellavg@moz-9lesb5.retail.telecomitalia.it)
[17:55:54] <Twinklebear> got the Rust logo rendering :D http://i.imgur.com/NnpPWc4.jpg
[17:56:51] *** Quits: Uther (Thunderbird@moz-gssp49.fbx.proxad.net) (Client exited)
[17:57:57] <FreeFull> Awesome
[17:58:01] <tilpner> Twinklebear - Is the source online?
[17:58:13] <Twinklebear> tilpner, yep yep: https://github.com/Twinklebear/tray_rust
[17:58:20] <FreeFull> Twinklebear: Looks like it needs a lot more render time to be smooth
[17:58:26] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Quit: )
[17:58:34] <Twinklebear> yea, that's just 512spp 
[17:58:38] *** Joins: Uther (Thunderbird@moz-gssp49.fbx.proxad.net)
[17:58:48] <dwrensha> Funny error message: http://is.gd/Ia0NYj  "`core::marker::Sized` is not implemented for the type `Foo + Sized`"
[17:58:51] <tilpner> How long did it take to render?
[17:58:58] *** Joins: Slava_I (slava@moz-a7c.n0g.135.88.IP)
[17:59:02] <Twinklebear> hope to add support for some nice glossy metal (or MERL) materials and render a high quality one for the Rust 1.0 release 
[17:59:02] <dwrensha> I'm not sure that I understand what's going on there
[17:59:15] *** Quits: tormoz (geov@moz-3q6.afp.124.178.IP) (Quit: No Ping reply in 180 seconds.)
[17:59:18] <Twinklebear> tilpner, ~6min
[17:59:56] *** Joins: ileach (Mibbit@moz-jlkjke.liwest.at)
[18:00:14] <tilpner> Twinklebear - (One last question till I shut up) Is this already bidirectional, or still "naive"?
[18:00:27] *** Joins: tormoz (geov@moz-3q6.afp.124.178.IP)
[18:00:44] *** Quits: frankmcs_ (frankmcsher@moz-5tq57f.dyn.telefonica.de) (Connection closed)
[18:00:49] <Twinklebear> tilpner, it's standard path tracing (eg. with explicit light sampling) so not bidirectional but not totally naive path tracing
[18:00:56] *** Joins: debuuu (debu@moz-thlvnr.dyn.telefonica.de)
[18:01:04] <tilpner> I see, thanks.
[18:01:38] <Twinklebear> sure :D
[18:01:50] <Twinklebear> I might look in to bidirectional later
[18:01:57] *** Quits: degorov (Mibbit@moz-vgj.itt.14.176.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:02:55] <tilpner> Well, I figured since you were porting tray... why not.
[18:03:16] *** Quits: jeffasinger (jeff@moz-u5nog7.res.rr.com) (Client exited)
[18:03:56] <thelink2012> How do I let other_slice = [1, 2, 3].append(4) without a Vec?
[18:03:59] *** Joins: solreaper (Mibbit@moz-mfpu5o.wa.comcast.net)
[18:04:26] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[18:04:33] <thelink2012> Notice I don't mutate [1, 2, 3] I create another slice after the append
[18:04:41] <Twinklebear> yep yep, although I think there's some bugs in tray's path or bidirectional renderers
[18:05:13] <Murarth> thelink2012: You can't. Dynamic allocation is required and Vec is what performs that dynamic allocation.
[18:05:13] *** Quits: jalcine (jacky@moz-7ghsj4.jalcine.me) (Quit: ZNC - http://znc.in)
[18:05:22] *** Joins: glen (Mibbit@moz-orc2oj.res.bhn.net)
[18:05:50] <glen> Hey, was is casting disallowed in the arms of match expressions?
[18:05:53] <thelink2012> Murarth: Alright then
[18:06:17] <tilpner> Does a 4kB tuple struct still gain something‚Ñ¢ from #[simd]? (Referring to f64x64 from simdty)
[18:06:32] *** Quits: detsak (darren@moz-804egb.dyn.optonline.net) (Quit: WeeChat 1.1.1)
[18:06:47] <Tari> oh hi Twinklebear (we talked Rust at the SoC picnic a few weeks ago)
[18:07:03] <Twinklebear> oh hey! how's it goin?
[18:07:08] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[18:07:35] <Tari> I'm thinking I should do some programming today
[18:07:38] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[18:07:41] <AngelOfSol> bluss: I saw your comments, but I'm unsure how to fix stuff and have it be in the pull request.  Do I just update my branch with the changes?  Still getting used to github.
[18:07:54] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[18:08:14] *** Joins: james4k_ (james@moz-e6no8q.consolidated.net)
[18:09:15] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[18:10:48] *** Quits: skade (skade@moz-m9ib3m.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[18:11:17] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[18:11:24] *** Joins: mkpankov (Mibbit@moz-17a.u5t.23.84.IP)
[18:11:42] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[18:12:11] <steveklabnik> AngelOfSol: yes, generally speaking, if you update a branch, the PR changes with it
[18:12:42] <steveklabnik> AngelOfSol: another common thing you'll see is people asking you to 'squash' a PR, i wrote a little blog post about it http://blog.steveklabnik.com/posts/2012-11-08-how-to-squash-commits-in-a-github-pull-request
[18:12:49] <mkpankov> been thinking about what movement of values means. is it always something like `memmove` or we can optimize it in some cases?
[18:13:08] <steveklabnik> mkpankov: conceptually, it's always a memcpy
[18:13:14] <steveklabnik> but, in theory, we can elide that in some cases
[18:13:18] <apoelstra> carllerche: sure https://github.com/carllerche/eventual/issues/21
[18:13:19] <AngelOfSol> Thanks steveklabnik!  First time actually contributing to something.
[18:13:24] <mkpankov> like when old and new names are on the same stack frame?
[18:13:31] <AngelOfSol> Squashing merges all the commits to one commit I'm guessing?
[18:13:35] <mkpankov> (it ought to be noop in that case I believe)
[18:13:39] <thelink2012> steveklabnik: hmm https://github.com/rust-lang/rust/issues/25236 even the last comment ('>' works but '>>' doesn't, which is very like a C++03 bug) is an invalid complain?
[18:13:41] *** Joins: CustosLimen (CustosLimen@moz-nb664a.mtnbusiness.co.za)
[18:13:42] <steveklabnik> AngelOfSol: no worries, it's always hard at the start. let me know if you ever need anything with regards to this stuff, i've been doing it a long time
[18:13:48] <steveklabnik> AngelOfSol: yes, that's what it does
[18:13:59] <steveklabnik> mkpankov: yes, iirc that's the case
[18:14:22] <mkpankov> cool
[18:15:00] <steveklabnik> thelink2012: you're right, that aspect does feel like a C++03 issue. tbh, i'm not 100% sure, but I can tell you that we named it 'macro_rules' because the macro system has lots of flaws
[18:15:08] <steveklabnik> and we plan on eventually introducing a better one
[18:15:10] <tilpner> reem - ping
[18:15:16] <steveklabnik> that is, macro_rules instead of macro
[18:16:33] *** Quits: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net) (Ping timeout: 121 seconds)
[18:16:37] *** Quits: glen (Mibbit@moz-orc2oj.res.bhn.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:17:08] *** Joins: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com)
[18:17:59] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[18:18:00] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[18:18:00] *** ChanServ sets mode: +o erickt
[18:19:13] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[18:20:36] <thelink2012> steveklabnik: Thanks, I've edited my comments with more details since it's now the main point of the issue
[18:20:46] <thelink2012> my comment*
[18:20:47] *** Quits: mkpankov (Mibbit@moz-17a.u5t.23.84.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:22:26] *** Joins: chromatome (chromatome@moz-2eks30.mc.videotron.ca)
[18:22:31] <steveklabnik> :)
[18:22:36] *** Joins: nercury (nercury@moz-8h0btl.static.zebra.lt)
[18:22:57] <tmtwd> does rust infer types if you do not declare them?
[18:23:16] <tmtwd> ie let mut str = String::new();
[18:23:42] <steveklabnik> yes
[18:23:50] <steveklabnik> you must declare types in function type signatures
[18:23:57] <steveklabnik> however, str is a built-in type
[18:24:03] <steveklabnik> so let mut str may or may not give you an error
[18:24:12] * steveklabnik uses 's' for simple string variables
[18:24:26] <chromatome> Is it best practice to just declare the type always then?
[18:24:43] <steveklabnik> nope, you should usually leave them off
[18:24:49] *** Quits: nercury (nercury@moz-8h0btl.static.zebra.lt) (Client exited)
[18:24:57] <nathan7> steveklabnik: evidently we should've done it the other way rond
[18:24:59] <steveklabnik> excess type annotations make code harder to read, as it's noise
[18:25:08] <nathan7> steveklabnik: we take macro_rules! when we have a macro system that totally rules
[18:25:45] <steveklabnik> hahah :)
[18:26:05] <chromatome> Is there any plans for something similar to gofmt for rust? Rustfmt would be so loverly.
[18:26:20] <nathan7> I'm coming back to NYC soon, hopefully I'll be able to attend more Rust meetupness this time
[18:27:21] *** Joins: jshs (jshs@moz-abmm4d.dip0.t-ipconnect.de)
[18:27:31] *** Joins: skade (skade@moz-m9ib3m.pools.vodafone-ip.de)
[18:28:36] *** Quits: niconii (nicole@moz-5gqgia.frgo.qwest.net) (Connection closed)
[18:29:00] <tmtwd> how do I access the Cargo.toml file?
[18:29:00] *** Joins: niconii (nicole@moz-5gqgia.frgo.qwest.net)
[18:29:09] <tmtwd> do I have to install Cargo?
[18:29:38] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[18:30:12] <steveklabnik> chromatome: not yet
[18:30:18] <steveklabnik> nathan7: woo, soon as in before friday?
[18:30:19] <chromatome> You need to have cargo installed, then you can make a new project with `cargo new project_name`
[18:30:24] <steveklabnik> tmtwd: what do you mean by 'access'?
[18:30:36] <chromatome> steveklabnik: If/when that comes about, it should be called oxidize haha
[18:30:47] <steveklabnik> there's already a project named oxidize
[18:30:51] <cn> i managed to get the base functionality of my first little program working and now i feel empty inside 
[18:30:59] <nathan7> steveklabnik: no, showing up June 1st
[18:31:01] *** Joins: zacts (user@moz-qrtjuh.nm.comcast.net)
[18:31:03] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[18:31:11] *** Quits: nwin (textual@moz-thtps8.pools.vodafone-ip.de) (Quit: Textual IRC Client: www.textualapp.com)
[18:31:12] <nathan7> steveklabnik: and disappearing July 31st
[18:31:23] <nathan7> steveklabnik: (and briefly disappearing for nodeconf and CascadiaJS)
[18:31:31] <steveklabnik> ah
[18:32:08] <steveklabnik> we haven't had many meetups
[18:32:09] *** Joins: jviereck (Adium@moz-r772na.dclient.hispeed.ch)
[18:32:11] <steveklabnik> i've been slacking
[18:33:12] *** Quits: geri (Mibbit@moz-si0249.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[18:33:30] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[18:33:49] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[18:33:55] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (A TLS packet with unexpected length was received.)
[18:34:38] *** Joins: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl)
[18:34:38] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[18:35:04] *** Joins: jeffasinger (jeff@moz-u5nog7.res.rr.com)
[18:35:31] *** Joins: TheLemonMan (lemonboy@moz-il0u53.50-151.net24.it)
[18:35:58] *** Joins: jophish (jophish@moz-epocft.broadband.tesco.net)
[18:37:35] <tmtwd> nvm
[18:38:32] *** Joins: RachBach (Mibbit@moz-1k2vn0.eastlink.ca)
[18:38:33] *** Joins: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net)
[18:38:55] *** Quits: Titi_Alone (Thunderbird@moz-m4mn3h.rev.sfr.net) (Client exited)
[18:39:17] *** Joins: peacememories (peacememori@moz-03ni57.dynamic.surfer.at)
[18:39:38] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[18:39:50] <flavius> Would someone like to give me feedback on an isomorphic data structure in rust? (my first real code in rust beyond a few lines of code). https://gist.github.com/flavius/e15aedb7fabe7abd44c1 What I don't like is the use of unsafe. Speed is not a priority, having idiomatic, clean and safe code, is.
[18:39:50] <thelink2012> steveklabnik: Should I keep the old issue striked out to keep eddyb's comment in context or just scratch it out? #25236
[18:39:51] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[18:40:01] *** Quits: thelink2012 (Mibbit@moz-ra3.o3h.183.179.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:40:14] *** Joins: thelink2012 (Mibbit@moz-ra3.o3h.183.179.IP)
[18:40:16] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[18:41:16] <tmtwd> I guess & in rust is different than in c
[18:41:26] <Havvy> Yes.
[18:41:31] <tmtwd> in the sense that in rust it is a reference
[18:41:35] <Havvy> & in C is the addressof operator. & in Rust is the borrow operator.
[18:41:40] <tmtwd> and in c it is the addressof
[18:41:59] <jn> it sort of is "addressof" in rust, too
[18:42:00] <tmtwd> Havvy, or reference?
[18:42:09] <Havvy> tmtwd:  It creates a reference.
[18:42:29] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[18:42:38] <Havvy> jn:  Sure, but that's only incidental.
[18:42:38] <jn> but you can also take addresses of anonymous, temporary values
[18:42:47] <jn> Havvy: i don't think so
[18:42:52] <steveklabnik> thiagopnts: hmm. we don't have a norm here. maybe a second issue would be easiest? close this one and just make a new one?
[18:43:42] *** Joins: mvyskocil (mvyskocil@moz-tmeimb.net.upcbroadband.cz)
[18:43:42] *** Quits: ainieco (ainieco@moz-571.ksd.162.188.IP) (Quit: leaving)
[18:44:05] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (A TLS packet with unexpected length was received.)
[18:44:23] <tmtwd> anyone know where I can find the source code for library functions like cmp?
[18:44:24] *** Joins: plhk_ (polachok@moz-nda.p7n.125.206.IP)
[18:45:10] <thelink2012> steveklabnik: Okay I'll close this one and open another one
[18:46:20] *** Quits: griff (griff@moz-bf2.sbd.199.62.IP) (Client exited)
[18:47:04] <steveklabnik> tmtwd: i often do a 'git grep "fn cmp"' in cases like that
[18:47:06] <steveklabnik> when i want to find something
[18:47:25] <tmtwd> useful tip
[18:47:34] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[18:47:45] <tmtwd> steveklabnik, so you have the repo on your desktop?
[18:48:09] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[18:48:36] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (A TLS packet with unexpected length was received.)
[18:49:58] *** Quits: jeffasinger (jeff@moz-u5nog7.res.rr.com) (Client exited)
[18:50:41] <steveklabnik> yes
[18:50:42] *** Quits: sayan (sayan@moz-ip8.595.51.106.IP) (Ping timeout: 121 seconds)
[18:50:53] <steveklabnik> but my day job is working on rust, so i may be unusual :)
[18:51:09] <steveklabnik> you can click the 'src' link at the upper right top of the page if you have the docs for a function open too
[18:51:25] <steveklabnik> so
[18:51:26] <steveklabnik> http://doc.rust-lang.org/nightly/std/iter/order/fn.cmp.html
[18:51:31] <steveklabnik> links to http://doc.rust-lang.org/nightly/src/core/iter.rs.html#3055-3071
[18:51:34] <steveklabnik> in the upper right
[18:51:52] *** Joins: emilk (emilk@moz-eossn5.cust.bredbandsbolaget.se)
[18:51:58] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[18:52:19] *** Quits: pauls (pauls@moz-e5p333.ccs.neu.edu) (Ping timeout: 121 seconds)
[18:52:26] <emilk> I'm having problems making a recursive struct - can somebody please take a look? http://is.gd/ytoPtF
[18:53:03] *** Joins: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net)
[18:53:32] <plhk_> http://doc.rust-lang.org/nightly/book/mutability.html in the last example, isn't it supposed to be let point = ... ?
[18:54:00] *** Joins: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp)
[18:54:19] <jshs> tmtwd: note that there are multiple `cmp` -- the one steveklabnik showed is in std::iter::order, but there is also std::cmp::Ord::cmp
[18:54:27] <tilpner> tmtwd - It's just 7.3MB, and it can be really useful for reference if you don't have an internet connection. :)
[18:54:30] <steveklabnik> plhk_: yes! would you like to send a PR?
[18:54:45] *** Joins: pauls (pauls@moz-e5p333.ccs.neu.edu)
[18:54:46] *** Joins: JFlash (textual@moz-eimsel.fios.verizon.net)
[18:55:07] <tmtwd> doesn't the namespace get 'crowded' with too many cmps? or are they generic or something?
[18:55:10] <steveklabnik> emilk: Copy is only implemented for arrays up to length 32
[18:55:21] <emilk> why do I need copying at all?
[18:55:46] <steveklabnik> you're initializing it using synatx that copies
[18:55:53] <steveklabnik> where the erorr is thrown
[18:56:07] <steveklabnik> oh, and my 'up to 32' thing was misleading, i apologize
[18:56:07] *** Quits: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net) (Connection closed)
[18:56:12] <emilk> oh... how do I initialize it without copies then?
[18:56:14] <steveklabnik> it's Box<Trie> which doesn't
[18:56:26] <steveklabnik> though the array doesn't as well, that just wasn't the issue
[18:56:53] *** Joins: defyrlt (user@moz-u6g.e4f.217.91.IP)
[18:57:06] <steveklabnik> uhh to put in an array, i'm not 100% sure. if it was a vec you can do map and collect
[18:57:16] <steveklabnik> but i forget if collect can collect into a fixed-size array
[18:57:26] <steveklabnik> fixed-size arryas are kinda awkward in current rust
[18:57:47] *** Quits: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP) (A TLS packet with unexpected length was received.)
[18:57:51] *** Joins: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP)
[18:58:04] <emilk> hum
[18:58:23] <jshs> tmtwd: Ord is a trait, so every type implementing Ord can define their own `cmp`
[18:58:26] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[18:58:39] <emilk> well I guess Vec will have to do, but it will be one level of indirection more than should be needed
[18:58:59] *** Quits: skade (skade@moz-m9ib3m.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[18:58:59] *** Joins: frankmcsherry (frankmcsher@moz-5tq57f.dyn.telefonica.de)
[19:00:00] <tmtwd> I see - traits are similar to class types in haskell
[19:01:17] *** Joins: skade (skade@moz-dfbomb.dip0.t-ipconnect.de)
[19:01:18] <FreeFull> Yeah, they're really close to typeclasses
[19:01:29] <tmtwd> how come the projects part of the book only has one project?!
[19:01:45] *** Parts: ileach (Mibbit@moz-jlkjke.liwest.at) ()
[19:02:04] *** Joins: tmerr (tmerr@moz-uqbbrm.net.t-com.hr)
[19:02:39] <steveklabnik> tmtwd: because i'm currently writing more ;)
[19:02:48] <tmtwd> okay
[19:02:50] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[19:02:50] <steveklabnik> i expect there to be three or four by the end of the week
[19:03:01] <steveklabnik> and i'll be adding more as time goes on
[19:03:02] <tmtwd> didn'd mean to be 'trolly'
[19:03:04] <tmtwd> cool
[19:03:15] <steveklabnik> it's all good :)
[19:03:24] <tmtwd> steveklabnik, this is to coincide with release of 1.0?
[19:03:32] <steveklabnik> yeah, trying to get as much in as possible before 1.0
[19:03:43] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Ping timeout: 121 seconds)
[19:03:57] <steveklabnik> speaking of which, brb, gotta go heads down on this backport stuff
[19:04:02] <Fenhl> I'm updating some old code, what happened to std::num::FromPrimitive?
[19:04:12] <tmtwd> steveklabnik I will be doing those projects, I will let you know of bugs
[19:04:17] <steveklabnik> thanks :)
[19:05:02] *** Quits: pyon (pyon@moz-v9d.mdl.7.179.IP) (Ping timeout: 121 seconds)
[19:05:14] *** Joins: pyon (pyon@moz-v9d.mdl.7.179.IP)
[19:05:55] <emilk> any tips on how to go about iterating ower a trie then? http://is.gd/bTOV4D
[19:06:20] <emilk> I guess recursion would be another way to go, but I feel a loop should be doable
[19:06:28] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[19:06:43] *** Joins: jazzz (Mibbit@moz-7hfo21.eastlink.ca)
[19:07:37] *** Joins: andresv (textual@moz-rq7fak.cable.starman.ee)
[19:08:08] *** Quits: ascarter (ascarter@moz-705hf8.wa.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[19:08:11] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[19:08:11] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[19:08:22] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[19:08:35] *** Quits: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net) (Ping timeout: 121 seconds)
[19:08:47] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Quit: Ex-Chat)
[19:08:49] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[19:08:49] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[19:08:50] *** Joins: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net)
[19:09:20] *** Joins: spider-mario (spidermario@moz-u27.v23.161.37.IP)
[19:09:28] <Blub\w> is there a way to create a static/const ffi::CString?
[19:09:37] *** Joins: dstrbad (dstrbad@moz-ugi4m9.dsl.iskon.hr)
[19:10:05] *** Quits: dstrbad (dstrbad@moz-ugi4m9.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[19:10:17] *** Quits: tmerr (tmerr@moz-uqbbrm.net.t-com.hr) (Ping timeout: 121 seconds)
[19:10:26] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[19:10:29] <frankmcsherry> emilk: I think the use of unwrap is probably wrong. 
[19:10:49] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[19:10:53] <frankmcsherry> it pops open an option and gives you ownership of what is inside, but it looks like you are then just dropping it at the end of the scope.
[19:11:00] <XMPPwocky> Blub\w: not safely iirc
[19:11:23] *** Joins: actual (Mibbit@moz-vavbv0.ct.comcast.net)
[19:11:36] <frankmcsherry> maybe rather than unwrap, something like as_ref or as_mut, to get a reference to the contents of the option without taking ownership
[19:12:07] <emilk> frankmcsherry: what I want, in effect, is a pointer to the current Trie. That line should update the pointer to the next trie
[19:12:17] *** Joins: motiejus (Mibbit@moz-pl6gqp.speed.planet.nl)
[19:12:19] <emilk> oh
[19:12:26] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[19:12:48] <emilk> unwrap takes ownership... I should read the docs for Options I see =)
[19:12:49] <emilk> thanks!
[19:12:50] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[19:13:00] *** Joins: tmerr (tmerr@moz-uqbbrm.net.t-com.hr)
[19:13:07] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[19:13:20] <apoelstra> are there any rust-crypto devs here? has the behaviour of Hmac changed in the last few months?
[19:13:49] <Fenhl> and NumCast is gone too? How am I supposed to write code that is generic over the primitive number types now?
[19:14:09] <jshs> Fenhl: num crate
[19:14:12] <panicbit> apoelstra: I'd ask in #rust-crypto
[19:14:19] <apoelstra> thx panicbit 
[19:14:22] <panicbit> np
[19:14:49] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[19:15:11] <filsmick> can I force the move of just *one* value into a closure without using `move` and hence moving all the other values?
[19:15:21] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[19:15:24] <talchas> Blub\w: you can do "whatever\x00" I think, and then .as_ptr() or something it
[19:15:35] <talchas> which isn't a CString, but is a C string
[19:15:56] *** Quits: pyon (pyon@moz-v9d.mdl.7.179.IP) (Quit: I have irrefutable proof that D < 0. It follows trivially from 2D > 3D, which is obviously true.)
[19:16:23] *** Joins: dalarmmst (dalarmmst@moz-mb21j4.bredband.comhem.se)
[19:17:01] <victor> Is there any effort planned to make librustc amenable for tooling support (code formatting, syntax highlighting, code completion)?
[19:17:33] *** Joins: agjacome_ (agjacome@moz-acoq63.dynamic.jazztel.es)
[19:18:07] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Connection closed)
[19:18:07] <talchas> I believe it has a formatter already, and I assume racer (completion) also links to it
[19:18:09] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[19:18:24] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[19:18:56] <thelink2012> victor: libsyntax is available
[19:18:58] *** Joins: khades (khades@moz-s8b.3vk.74.212.IP)
[19:19:10] *** Quits: zacts (user@moz-qrtjuh.nm.comcast.net) (Quit: ERC (IRC client for Emacs 24.5.1))
[19:19:11] *** Quits: agjacome (agjacome@moz-6073ot.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[19:19:14] *** Joins: pyon (pyon@moz-v9d.mdl.7.179.IP)
[19:19:33] *** Quits: khades (khades@moz-s8b.3vk.74.212.IP) (Quit: leaving)
[19:19:39] <Fenhl> jshs: thanks. Is there a way to continue using #[derive(FromPrimitive)] with this?
[19:20:13] *** Joins: khades (khades@moz-s8b.3vk.74.212.IP)
[19:20:48] <victor> thanks! :)
[19:21:08] <motiejus> good day! I am trying to call an external C API. There is a C function (http://pgl.yoyo.org/luai/i/luaL_newstate) which returns a pointer to a struct which I`ll use later. How do I declare it in my 'extern' block? Non-compiling 4-line attempt: https://pastebin.mozilla.org/8833026
[19:21:38] <jshs> Fenhl: there's also num-macros
[19:21:47] <jshs> yeah, looks like it add deriving support
[19:21:51] <jshs> adds*
[19:22:04] *** Quits: chromatome (chromatome@moz-2eks30.mc.videotron.ca) (Connection closed)
[19:22:05] <jshs> I guess it needs nightly though
[19:22:25] *** Joins: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net)
[19:23:14] <panicbit> mitsuhiko: You could either use "*mut c_void" or declare something like "enum lua_State {}" and then use "*mut lua_State" as return type.
[19:23:15] *** Quits: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl) (Quit: Leaving)
[19:23:23] <talchas> motiejus: assuming you don't want to try to reproduce the struct to access its fields directly, you can just do yeah what panicbit said
[19:23:46] <talchas> if you need to acces its fields directly, you can just reproduce the C struct and #[repr(C)] it
[19:23:51] *** Quits: thiblahute (tsaunier@moz-68f5rr.rev.sfr.net) (Ping timeout: 121 seconds)
[19:23:52] *** Quits: mvyskocil (mvyskocil@moz-tmeimb.net.upcbroadband.cz) (Ping timeout: 121 seconds)
[19:24:11] <motiejus> panicbit: thanks, I`ll try declaring my struct, since I don't need the fields -- just the data type
[19:24:14] <talchas> (but this one is opaque, so you should use enum lua_State{} or such)
[19:24:46] *** Quits: if_e1se (uid16886@moz-js7dlj.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[19:24:46] <jshs> Fenhl: oh, the `enum_primitive` crate seems to work with stable, but uses a macro instead of an attribute
[19:25:39] <motiejus> panicbit: it compiles, thanks! Moving on. :-)
[19:25:44] <panicbit> :P
[19:26:09] *** Joins: khades1 (Thunderbird@moz-s8b.3vk.74.212.IP)
[19:26:59] *** Joins: druzac (druzac@moz-hn17us.vc.shawcable.net)
[19:27:00] *** Joins: griff (griff@moz-bf2.sbd.199.62.IP)
[19:27:02] <pyon> vec.set_len() doesn't do anything to the underlying capacity, right?
[19:27:15] <Fenhl> jshs: this project is on nightly so num-macros should be optimal. Thanks!
[19:27:16] <cmr> pyon: correct.
[19:27:20] *** Quits: khades1 (Thunderbird@moz-s8b.3vk.74.212.IP) (Connection closed)
[19:27:44] <panicbit> motiejus: An alternative is to use "type lua_State = *mut c_void"
[19:27:55] <pyon> playbot: let mut vec: Vec<usize> = Vec::with_capacity(8); vec.set_len(16); (vec.len(), vec.capacity())
[19:27:56] -playbot- <anon>:9:58: 9:73 error: invocation of unsafe method requires unsafe function or block [E0133]
[19:27:57] -playbot- <anon>:9         let mut vec: Vec<usize> = Vec::with_capacity(8); vec.set_len(16); (vec.len(), vec.capacity())
[19:27:57] -playbot- output truncated; full output at: http://bit.ly/1Qzfm81
[19:28:09] <pyon> playbot: let mut vec: Vec<usize> = Vec::with_capacity(8); unsafe { vec.set_len(16) } (vec.len(), vec.capacity())
[19:28:10] -playbot- (16, 8)
[19:28:15] <panicbit> motiejus: Which is a bit nicer to read because it hides the pointer
[19:28:25] <tmerr> google is failing me. with cargo, is it possible to have different build configurations, for example one that would run main1.rs and another that would run main2.rs?
[19:28:34] <tmerr> i have some tests that need to be run manually.
[19:29:16] *** Quits: james4k_ (james@moz-e6no8q.consolidated.net) (Ping timeout: 121 seconds)
[19:29:23] *** Joins: james4k_ (james@moz-e6no8q.consolidated.net)
[19:29:38] *** Quits: veddan (viktor@moz-5nvcbb.cust6.csbnet.se) (Connection closed)
[19:29:58] <tilpner> tmerr - You can use examples. etc $ cargo run --example 01 to run <root>/examples/01.rs
[19:30:25] <tilpner> But I suppose you could use multiple [[bin]] targets...
[19:31:47] *** Quits: wc (wc@moz-ub8cet.rocks) (Quit: leaving)
[19:32:20] *** Quits: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net) (Connection closed)
[19:32:47] *** Quits: khades (khades@moz-s8b.3vk.74.212.IP) (Quit: leaving)
[19:32:52] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[19:33:20] <victor> talchas: You mentioned there is already a code formatter for Rust. Do you happen to remember the name of the project
[19:33:21] <victor> ?
[19:33:33] <tilpner> rustfmt?
[19:33:52] *** Quits: tetsuharu (tetsuharu@moz-fmjbd6.ucom.ne.jp) (Quit: )
[19:34:18] *** Quits: defyrlt (user@moz-u6g.e4f.217.91.IP) (Ping timeout: 121 seconds)
[19:34:25] <tilpner> https://github.com/{nrc,sp0,ahmedcharles}/rustfmt
[19:34:48] <victor> tilpner: thanks! :) it was my first search result in duckduckgo, but for some reason I ignored it because it was highlighted in a weird way and I thought it was an ad :D
[19:34:48] *** Joins: w4ffles (textual@moz-34v1r4.res.rr.com)
[19:34:50] <panicbit> forkfest
[19:34:50] *** Joins: wc (wc@moz-ub8cet.rocks)
[19:34:54] *** Quits: zeiris (zeiris@moz-8jbmam.letter.agency) (Ping timeout: 121 seconds)
[19:34:56] <tilpner> Oh, sp0s is actually named rust-style now.
[19:35:09] *** Joins: defyrlt (user@moz-u6g.e4f.217.91.IP)
[19:35:11] *** Joins: zeiris (zeiris@moz-8jbmam.letter.agency)
[19:35:15] *** Quits: mahdi (mahdi@moz-j3v.506.244.151.IP) (Ping timeout: 121 seconds)
[19:35:28] <Fenhl> jshs: I get error: use of undeclared trait name `std::num::FromPrimitive`
[19:35:38] <apoelstra> exciting news everyone: rust-bitcoin builds and all tests pass, as of a minute ago
[19:35:41] <tilpner> victor - The DDG detailed results are pretty neat, but I've never seen them use ads. :)
[19:35:43] <Fenhl> I never even referenced that anywhere.
[19:35:44] <apoelstra> i don't think it had compiled since november :P
[19:36:25] <bluss> pyon: don't set len beyond capacity, that's not going to end well hehe
[19:36:33] *** Joins: skade_ (skade@moz-m9ib3m.pools.vodafone-ip.de)
[19:36:42] <pyon> bluss: Ah, of course. I just wanted to know if there was an internal check.
[19:37:07] *** Joins: mahdi (mahdi@moz-j3v.506.244.151.IP)
[19:37:11] <badboy> steveklabnik: regarding the reference and macro, should I only change the example ?
[19:37:23] *** Joins: jalcine (jacky@moz-7ghsj4.jalcine.me)
[19:37:23] *** Joins: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net)
[19:37:27] <bluss> pyon: it's nice with vec that you can set basic things like that, it's basically naked to manipulation from external code
[19:37:37] <pyon> Yep. :-)
[19:37:41] <jshs> Fenhl: I don't use it, so I can't tell immediately where the problem is. where does that error pop up?
[19:37:57] <XMPPwocky> bluss: ideally i'd like them to be public unsafe fields
[19:38:18] *** Quits: defyrlt (user@moz-u6g.e4f.217.91.IP) (A TLS packet with unexpected length was received.)
[19:38:52] *** Quits: skade (skade@moz-dfbomb.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[19:39:07] *** Quits: druzac (druzac@moz-hn17us.vc.shawcable.net) (Ping timeout: 121 seconds)
[19:39:16] <bluss> XMPPwocky: that's interesting. I suppose what we have now is still a small bit of encapsulation though
[19:39:40] <jshs> Fenhl: mh, it could be that you have to use `derive(NumFromPrimitive)`
[19:39:52] <Fenhl> let me try that
[19:40:35] *** Joins: AngelofSolLab (Mibbit@moz-efko6e.ad.rit.edu)
[19:41:12] *** Joins: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se)
[19:42:17] <AngelofSolLab> Is there anyway to borrow 2 mutable references out of a Vec, given I know that both the indices are in fact different and in range? (unsafe is fine)
[19:42:26] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[19:42:49] <frankmcsherry> AngelofSolLab: split_at_mut should give you a start
[19:43:08] *** Joins: bitonic (bitonic@moz-rh04lf.31-151.libero.it)
[19:44:15] *** Quits: andresv (textual@moz-rq7fak.cable.starman.ee) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[19:44:18] <tilpner> (or .get_unchecked_mut, I think)
[19:44:50] <AngelofSolLab> tilpner I'm pretty sure that just disable bounds checking.
[19:46:17] <AngelofSolLab> frankmcsherry: That looks like I can use it, thanks!.
[19:46:18] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[19:46:22] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[19:48:05] <motiejus> I have an empty enum (enum lua_State {}) hiding a pointer; I want to make it static. rustc complains about a syntax error, since I don't assign it a value (there is nothing I can assign to it, since it's empty, right?). Can I assign something to an empty mut enum pointer? cc  panicbit
[19:48:06] *** Joins: LysanderAkili (LysanderAki@moz-e2h9er.co.comcast.net)
[19:48:13] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (A TLS packet with unexpected length was received.)
[19:48:46] <XMPPwocky> motiejus: yes. 0 as *mut _
[19:48:49] <XMPPwocky> er
[19:48:50] <XMPPwocky> yeah
[19:48:53] <tilpner> AngelofSolLab - Oh, yes indeed. :/
[19:48:55] <panicbit> But... why...
[19:49:04] *** Joins: derek_c (derek@moz-eg2lms.cit.cornell.edu)
[19:49:04] <motiejus> background: I am rewriting this in C: https://github.com/Motiejus/makelua/blob/master/mk_lua.c
[19:49:07] *** Quits: mahdi (mahdi@moz-j3v.506.244.151.IP) (Quit: Leaving)
[19:49:08] <LysanderAkili> could somebody explain to me what {:?}  means? 
[19:49:27] *** Joins: SIGILL (SIGILL@moz-jj9us9.pascalj.de)
[19:49:29] *** Joins: Drek (Mibbit@moz-qdblt2.dip0.t-ipconnect.de)
[19:49:30] <motiejus> and GNU Make API does not have a "state" variable, where I could make it thread safe
[19:49:32] <panicbit> motiejus: I see
[19:49:39] <XMPPwocky> LysanderAkili: somebody with weird hair, a pointy chin, and sticking their tongue out
[19:49:47] <AngelofSolLab> LysanderAkil: Its format for the debug trait
[19:49:49] <XMPPwocky> LysanderAkili: no,but it actually invokes Debug, instead of String
[19:49:51] <LysanderAkili> xd
[19:49:55] <panicbit> motiejus: What XMPPwocky said would probably work
[19:49:58] <XMPPwocky> there are a few other formatting things you can use
[19:50:04] <XMPPwocky> like {:x} which gives you hex
[19:50:15] <Drek> Hi why is rust named rust?
[19:50:21] <panicbit> motiejus: You might be able to get away with Option<lua_State> as well
[19:50:28] <LysanderAkili> ah okay.
[19:50:29] <panicbit> motiejus: (assigning None)
[19:50:37] <LysanderAkili> hex address would be useful
[19:50:40] <motiejus> panicbit: I`ll try that. I understand your question.. but I would really love a suggestion on how to avoid that static pointer. :-)
[19:50:51] <panicbit> motiejus: Sorry, I meant "Option<*mut lua_State>"
[19:50:57] <XMPPwocky> Drek: after a fungus
[19:51:02] <Amaranth> So is the list of implementations on http://doc.rust-lang.org/std/fmt/trait.Debug.html just every type in the standard library?
[19:51:08] *** Quits: tmerr (tmerr@moz-uqbbrm.net.t-com.hr) (Ping timeout: 121 seconds)
[19:51:13] <XMPPwocky> Amaranth: not quite
[19:51:15] <XMPPwocky> most of them, though
[19:51:46] <Amaranth> Seems like it'd be a bug to not have Debug implemented
[19:52:14] *** Quits: forgottenone (forgottenon@moz-j3l.lq5.40.176.IP) (Quit: Konversation terminated!)
[19:52:47] <panicbit> motiejus: You could just pass a lua_State to every function instead using a static state
[19:52:54] <motiejus> "static L: *mut lua_State = 0 as *mut u;" causes: error: the trait `core::marker::Sync` is not implemented for the type `*mut lua_State`
[19:53:05] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[19:53:14] <motiejus> lua_State must persist between the callback invocations
[19:53:38] <motiejus> i.e. in the same invocation of Make, you want your Lua state to persist
[19:53:46] *** Joins: tmerr (tmerr@moz-uqbbrm.net.t-com.hr)
[19:54:06] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[19:54:07] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[19:55:14] <panicbit> motiejus: I don't quite get that but you could have a struct which represents your make invocation. This struct would then own the lua state.
[19:55:15] <talchas> you can do unsafe impl Sync for *mut lua_State; I think
[19:55:24] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[19:55:38] <talchas> (or if not, you can do struct State(*mut lua_State); unsafe impl Sync for State;)
[19:55:44] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Client exited)
[19:56:17] <motiejus> panicbit: but that struct will still be static, right?
[19:56:41] <panicbit> motiejus: No... I still don't know why you need a static thing...
[19:56:47] <panicbit> motiejus: I'm sorry
[19:57:01] *** Quits: trigen (MSX@moz-n1jovl.speed.planet.nl) (Connection closed)
[19:57:12] <talchas> if make doesn't support a context object, you're going to need a static for your state
[19:57:44] <panicbit> motiejus: You could, however, certainly create a static instance of that struct
[19:57:44] <motiejus> panicbit: see https://github.com/Motiejus/makelua/blob/master/mk_lua.c#L18 : where could L come from otherwise?
[19:57:46] <talchas> panicbit: this is a .so loaded and called by make
[19:57:52] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Connection closed)
[19:58:09] <motiejus> I think I like Option better -- it gives a clear indication whether the state was initialized
[19:58:12] <panicbit> that makes sense then
[19:58:13] *** Quits: zeiris (zeiris@moz-8jbmam.letter.agency) (Ping timeout: 121 seconds)
[19:58:47] *** Joins: kazimuth (james@moz-7tn.eum.111.18.IP)
[19:58:57] <panicbit> motiejus: Yup, I'd recommend that.
[19:59:18] <talchas> now, if neither make nor lua do threadsafety, you can (Static)Mutex the pointer
[19:59:38] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:00:08] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[20:00:59] *** Quits: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[20:01:47] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Quit: leaving)
[20:01:59] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[20:02:50] *** Quits: kazimuth (james@moz-7tn.eum.111.18.IP) (Ping timeout: 121 seconds)
[20:03:13] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[20:03:18] <motiejus> talchas: there are no threads in make so it's fine. And in case of `make -j`, interesting things can happen if it just forks. However, I hope it reinitializes the state.. I`ll check
[20:03:21] <motiejus> great question.
[20:03:35] *** Joins: kerrick (kerrick@moz-fub7j7.hfc.comcastbusiness.net)
[20:04:55] *** Quits: twipeD (wipeD@moz-044kin.dip0.t-ipconnect.de) (Connection closed)
[20:05:02] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[20:05:28] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[20:06:02] *** Quits: Jackneill (Jackneill@moz-nh2r1k.pool.digikabel.hu) (Ping timeout: 121 seconds)
[20:06:16] *** Quits: bitonic (bitonic@moz-rh04lf.31-151.libero.it) (Connection closed)
[20:07:07] <thelink2012> does Rc perform dynamic allocation internally?
[20:07:16] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:07:21] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[20:07:25] <bluss> yes
[20:07:51] <bluss> it makes one allocation for both thee value ("payload") and the reference counters
[20:07:56] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[20:08:00] *** Quits: actual (Mibbit@moz-vavbv0.ct.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:09:08] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[20:09:09] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[20:09:09] <bluss> each Rc<T> is an always non null pointer to that allocation
[20:09:19] *** Joins: zeiris (zeiris@moz-8jbmam.letter.agency)
[20:09:31] <apoelstra> are there any jsonrpc libraries for rust?
[20:09:43] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Connection closed)
[20:10:17] <apoelstra> also there was an iron tutorial posted here earlier, does anyone recall the link?
[20:11:31] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:11:37] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[20:11:56] <panicbit> playbot: static foo: &'static Fn(i32) -> i32 = & move |n| n+1;
[20:11:57] -playbot- error: internal compiler error: no type for node 66: local n (id=66) in fcx 0x7ff0b1feef78
[20:11:58] -playbot- note: the compiler unexpectedly panicked. this is a bug.
[20:11:58] -playbot- output truncated; full output at: http://bit.ly/1zUFPsw
[20:11:59] *** Quits: Porkepix (Porkepix@moz-il9u9l.abo.wanadoo.fr) (Quit: My laptop has gone to sleep. ZZZzzz‚Ä¶)
[20:12:04] <badboy> apoelstra: https://github.com/iron/byexample/blob/master/chapters/hello.md ?
[20:12:13] <apoelstra> thx badboy 
[20:12:18] <apoelstra> and who was it asking for feedback on it?
[20:12:21] <badboy> you're welcome
[20:12:24] *** Joins: areski (areski@moz-adq529.user.ono.com)
[20:12:32] <apoelstra> i'm gonna use it to learn iron, i should maybe give some feedback..
[20:12:33] <badboy> probably the one who wrote it :D
[20:12:38] <apoelstra> ah, yes :P
[20:12:59] <badboy> that would mean it's reem 
[20:13:13] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[20:14:08] *** Quits: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net) (Connection closed)
[20:14:22] *** Joins: druzac (druzac@moz-hn17us.vc.shawcable.net)
[20:14:33] *** Joins: asQuirreL (asQuirreL@moz-ro1qqu.ox.ac.uk)
[20:14:33] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:14:36] *** Joins: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com)
[20:15:58] *** Quits: griff (griff@moz-bf2.sbd.199.62.IP) (Client exited)
[20:16:09] *** Quits: RachBach (Mibbit@moz-1k2vn0.eastlink.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[20:16:22] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[20:16:37] <apoelstra> ok, the deps aren't compiling right now
[20:16:42] <apoelstra> also can i use iron without an openssl dep?
[20:16:49] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[20:17:13] <reem> apoelstra: not right now, since hyper uses it non-optionally iirc
[20:17:39] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[20:17:49] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:17:50] *** rkruppe_ is now known as rkruppe
[20:18:04] *** Quits: zhoeon (fc@moz-cuhqb2.cable.teksavvy.com) (Ping timeout: 121 seconds)
[20:18:20] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[20:18:31] *** Quits: druzac (druzac@moz-hn17us.vc.shawcable.net) (Ping timeout: 121 seconds)
[20:19:09] *** Joins: Dylan16807 (dylan@moz-62uibl.cntmoh.sbcglobal.net)
[20:19:14] <apoelstra> hmm, ok, that makes me uncomfortable, even if i avoid actually using it anywhere..
[20:19:15] <frankmcsherry> reem: I liked that write-up!
[20:19:19] *** Joins: DodoFXP (Mibbit@moz-dpn.d6o.26.2.IP)
[20:19:36] *** Quits: rustbot (havvy@moz-u0e4io.net) (Quit: Gaining !crate command.)
[20:19:48] <DodoFXP> Hey guys!
[20:19:50] <reem> apoelstra: if you don‚Äôt use https it‚Äôs not used, you could add a cargo feature to hyper to disable it entirely but it just hasn‚Äôt been done
[20:20:01] <reem> frankmcsherry: thanks :) more to come
[20:20:08] <apoelstra> reem: ok, cool, i will maybe learn how to do that :)
[20:22:18] *** Parts: DodoFXP (Mibbit@moz-dpn.d6o.26.2.IP) ()
[20:22:26] *** Joins: rustbot (havvy@moz-u0e4io.net)
[20:23:39] <motiejus> so I went back to the Option<*mut lua_State>, and it complains about not having core::marker::Sync trait implemented. I think understand why it complains, but core/marker/trait.Sync.html is woodoo/unhelpful at this point
[20:23:48] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[20:24:02] <motiejus> talchas: you suggested a solution, but that gives a syntax error. :-)
[20:24:18] <thelink2012> Why do one need to implement `!Send`? I tought just not implementing `Send` in the first place would make it `!Send`? Talking about `impl<T> !marker::Send for Rc<T> {}`
[20:24:52] <thelink2012> in rc.rs
[20:24:56] <motiejus> "impl Sync for Option<*mut lua_State>;" gives: error: expected one of `+`, `::`, `where`, or `{`, found `;`. Clearly something is missing there.
[20:25:26] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[20:25:28] <badboy> yes, the {} is missing
[20:26:37] <motiejus> badboy: is this for me? if so, the error is: "error: the impl does not reference any types defined in this crate; only traits defined in the current crate can be implemented for arbitrary types [E0117]". Which I think I remember reading in the manual today.
[20:26:37] *** Joins: _habnabit (habnabit@carlotta.habnabit.org)
[20:26:39] <frankmcsherry> you know you have pattern matching bad when you type "let index - 1 = vec.len();"
[20:26:57] <emilk> how do I read a file line by line?
[20:27:07] <badboy> motiejus: ah, yeah, didn't read the full conversation, only your last line
[20:27:09] *** Quits: pauls (pauls@moz-e5p333.ccs.neu.edu) (Ping timeout: 121 seconds)
[20:27:16] <emilk> I am really trying to follow https://doc.rust-lang.org/std/io/ but I'm failing :(
[20:27:20] <frewsxcv> is there a way to find out what version of llvm rust was compiled with?
[20:28:26] <bluss> emilk: std::fs has the File doc
[20:28:31] *** Joins: ytain_ (ytain@moz-a9t.bqj.91.23.IP)
[20:28:54] <bluss> emilk: put the File inside a BufReader, so that implements the lines() iterator, should be the simplest way
[20:29:24] <emilk> http://is.gd/z9YSa2 - error: type `std::io::buffered::BufReader<std::fs::File>` does not implement any method in scope named `lines`
[20:29:27] <frewsxcv> emilk: https://doc.rust-lang.org/std/io/struct.Lines.html
[20:29:40] *** Quits: JFlash (textual@moz-eimsel.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[20:29:43] <bluss> emilk: you need to `use` the traits you need
[20:29:52] <bluss> unfortunately
[20:29:52] <emilk> use std::io::Lines ?
[20:29:58] *** Joins: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP)
[20:30:00] <bluss> the trait is BufRead
[20:30:12] <frewsxcv> rather, https://doc.rust-lang.org/std/io/trait.BufRead.html#method.lines
[20:30:19] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[20:30:36] <bluss> well
[20:30:37] <frewsxcv> use std::io::BufRead;
[20:30:42] *** Quits: aldeka (quassel@moz-qqf.of6.243.162.IP) (Connection closed)
[20:30:43] *** Joins: aldeka (quassel@moz-qqf.of6.243.162.IP)
[20:31:02] *** Quits: ytain (ytain@moz-pr2.aip.175.108.IP) (Ping timeout: 121 seconds)
[20:31:10] <bluss> emilk: there is a way to tell. The **BufReader** struct is this. http://doc.rust-lang.org/std/io/struct.BufReader.html   Its method .lines() is listed under the BufRead trait
[20:31:17] <emilk> bluss: ok, it works now... but how would I know to use BufRead? I tried to use Lines
[20:31:24] <emilk> ok
[20:31:33] *** Joins: pauls (pauls@moz-e5p333.ccs.neu.edu)
[20:31:38] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[20:31:43] <bluss> yeah it's all there for BufReader
[20:31:49] <bluss> its inherent methods and its trait impls
[20:31:50] <emilk> so that's how I should read that...
[20:31:53] <bluss> yeah
[20:31:59] *** Joins: jws (jsalter@moz-q98cl6.cable.virginm.net)
[20:32:03] <bluss> methods, trait implementations
[20:32:04] <emilk> thanks!
[20:32:10] *** Quits: csherratt (textual@moz-357qdq.cable.teksavvy.com) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[20:32:25] *** Joins: SerialVelocity_ (SerialVeloc@moz-t4qdj0.threembb.co.uk)
[20:32:25] *** Quits: aldeka (quassel@moz-qqf.of6.243.162.IP) (Connection closed)
[20:32:26] *** Joins: aldeka (quassel@moz-qqf.of6.243.162.IP)
[20:32:35] * frewsxcv opens a relevant PR https://github.com/rust-lang/rust/pull/25280
[20:32:54] *** Joins: lov2cod (Adium@moz-l2rco1.sdt7.vfco.0306.2602.IP)
[20:33:07] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[20:33:16] <bluss> nice
[20:33:30] <simias> tests are unstable?
[20:33:36] <bluss> test crate is
[20:33:56] <simias> that's annoying
[20:34:20] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[20:34:30] <simias> there's no way to work around that?
[20:34:57] <bluss> don't think so. You can still test, but not bench
[20:35:00] *** Joins: lov2cod1 (Adium@moz-dq03ns.u583.gjp6.0119.2620.IP)
[20:35:33] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Ping timeout: 121 seconds)
[20:35:49] <motiejus> I`m still stuck on "static L: Option<*mut lua_State> = None;" erroring: "the trait `core::marker::Sync` is not implemented for the type `*mut lua_State` [E0277]"  (ping talchas panicbit)
[20:36:53] *** eddyb_ is now known as eddyb
[20:36:56] *** Quits: lov2cod (Adium@moz-l2rco1.sdt7.vfco.0306.2602.IP) (Ping timeout: 121 seconds)
[20:37:10] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[20:38:01] <simias> okay
[20:38:44] <emilk> can one get an utf8 array slice from a string?
[20:38:57] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:38:58] <tilpner> .as_bytes()?
[20:39:27] <motiejus> there seems to be a solution: http://stackoverflow.com/questions/28116147/static-struct-with-raw-pointer-gives-coremarkersync-is-not-implemented, but it violates this: http://stackoverflow.com/questions/25413201/how-do-i-implement-a-trait-i-dont-own-for-a-type-i-dont-own-in-rust
[20:39:30] <emilk> sorry, from 'str' I mean
[20:39:46] <tilpner> emilk - http://doc.rust-lang.org/nightly/std/primitive.str.html#method.as_bytes ?
[20:39:56] *** Quits: Ralith_ (ralith@moz-tiaj7p.customer.broadstripe.net) (Ping timeout: 121 seconds)
[20:40:08] <tilpner> (Or what is a "utf8 array slice" to you?)
[20:40:22] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[20:40:30] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[20:40:31] <emilk> sorry
[20:40:45] <emilk> I was at https://doc.rust-lang.org/std/str/index.html
[20:40:48] <emilk> no as_bytes there
[20:41:29] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[20:41:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[20:41:48] *** rkruppe_ is now known as rkruppe
[20:42:00] <thelink2012> I think this should be somewhat improved, When you search for str in the box you get into a link that doesn't show the str methods
[20:42:18] *** Joins: Brochacho_ (alberto@moz-b2ovno.cable.rcn.com)
[20:42:20] <thelink2012> Actually nevermind
[20:42:27] <panicbit> motiejus: Yeah, it's a litte bit ridiculous but I came up with this: http://is.gd/0QSCUt
[20:42:33] *** Quits: Rym (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[20:43:20] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[20:43:34] *** Quits: james4k_ (james@moz-e6no8q.consolidated.net) (Connection closed)
[20:44:09] <motiejus> panicbit: impressive. I`ll try that.
[20:44:23] <panicbit> motiejus: But it's obviously unsafe
[20:44:32] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[20:44:43] <panicbit> motiejus: So if your kitten starts to smoke just run
[20:45:07] <panicbit> (things might explode)
[20:45:31] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[20:45:45] *** Joins: james4k_ (james@moz-e6no8q.consolidated.net)
[20:45:52] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[20:46:20] * tilpner is thoroughly confused by the - vs _ naming conventions of crates on crates.io.
[20:46:49] *** Joins: druzac (druzac@moz-pq2483.vc.shawcable.net)
[20:46:57] <Tari> prefer -
[20:47:06] <Tari> since cargo handles that sanely now
[20:47:21] <motiejus> panicbit: now how can I create an instance of "struct ThreadSafe<T>(T)" with my mut *lua_State ?
[20:47:38] <Tari> package foo-bar is crate foo_bar, but that wasn't always the case
[20:47:41] *** Quits: umit (umit@moz-51i.nqs.45.92.IP) (Connection closed)
[20:47:45] <motiejus> since this struct does not have members, tutorial is not very helpful. :-)
[20:47:46] <panicbit> motiejus: ThreadSafe(myLuaState)
[20:47:51] <Tari> so ones with underscores probably predate that change
[20:48:16] <tilpner> Tari - I'm not currently naming one, just trying to use them. num_cpus, conduit-mime-types, etc., everything seems inconsistent. :)
[20:48:29] <motiejus> it compiles! :-)
[20:48:30] <motiejus> thanks!
[20:48:35] <panicbit> motiejus: And to get it out of there: let ThreadSafe(myLuaState) = myThreadSafeLuaState 
[20:48:40] <Tari> tilpner: you should be able to use _ everywhere
[20:48:54] <tilpner> Tari - In the Cargo.toml too?
[20:48:57] <Tari> extern crate conduit_mime_types;
[20:49:05] <Tari> use '-' in Cargo.toml
[20:49:07] *** Joins: alexggordon (alexggordon@moz-slt.b6v.251.159.IP)
[20:49:11] *** Quits: tmerr (tmerr@moz-uqbbrm.net.t-com.hr) (Ping timeout: 121 seconds)
[20:49:15] *** Quits: andreyv (andrey@moz-m13.7c1.234.85.IP) (Client exited)
[20:49:19] <Tari> in code, dashes should be underscores
[20:49:32] <tilpner> Yes, just tried replacing them. Still needs - in Cargo.toml.
[20:49:36] *** Quits: Gabriel_7 (Gabriel@moz-50rknb.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[20:49:39] *** Joins: kgrandon (Adium@moz-ilv.ukc.122.2.IP)
[20:51:07] *** Quits: jophish (jophish@moz-epocft.broadband.tesco.net) (Connection closed)
[20:51:12] *** Joins: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl)
[20:51:13] <motiejus> I start to understand what makes Rust good -- it makes it hard to write nasty programs with shared state, mutable global variables, etc.
[20:51:21] <motiejus> I actually appreciate the number of workarounds required to make this thing work
[20:51:30] <Havvy> shared *mutable* state.
[20:51:58] <motiejus> Havvy: yep. :-)
[20:52:06] <Diggsey> motiejus: don't worry - it gets easier, and you'll start to see the "workarounds" as actually being better code in their own right ;)
[20:52:15] *** Joins: takluyver (takluyver@moz-h28p3u.dynamic.fusionbroadband.com)
[20:52:51] <motiejus> Diggsey: I hope it doesn't get any better, since it's a good indication that what I`m trying to do is wrong
[20:53:14] <motiejus> but yeah, I guess one can get used to it
[20:53:24] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[20:53:31] <_habnabit> it seems there are no official ARM rust binaries; do i have to build it myself from source, or does rust not support ARM at all yet?
[20:53:41] *** Joins: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr)
[20:53:59] <motiejus> I guess this will inevitably happen when I`ll work with more libraries written in C.
[20:54:11] *** Quits: geofft (geofft@moz-vfphq1.mit.edu) (Connection closed)
[20:54:32] *** Joins: geofft (geofft@moz-vfphq1.mit.edu)
[20:54:36] *** Quits: jud (jud@moz-6p3qn8.res.rr.com) (Quit: Leaving)
[20:54:49] *** Joins: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk)
[20:55:06] *** Quits: skade_ (skade@moz-m9ib3m.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:55:07] *** Joins: minot2 (kkus@moz-baj4jj.74.srtnet.com)
[20:55:42] <takluyver> I'm using beta4: str.split_whitespace() doesn't seem to be there, and it refuses to use str.words() as it's an unstable feature. What should I be doing? (Apologies if this is the wrong place for  beginner questions)
[20:55:48] <panicbit> motiejus: Does make issue something like an init call to your .so?
[20:55:58] *** Joins: jud (jud@moz-6p3qn8.res.rr.com)
[20:56:11] <genbattle> _habnabit, you have to build it from source. You'll have to build a cross-compiler first.
[20:56:15] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[20:56:30] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[20:56:37] <motiejus> panicbit: yep, that's the 'mk_lua_gmk_setup': https://github.com/Motiejus/makelua/blob/master/mk_lua.c#L38
[20:56:45] <_habnabit> genbattle, i see. a cross compiler is required? i.e. i can't build from source on the target ARM device?
[20:57:03] *** Quits: lov2cod1 (Adium@moz-dq03ns.u583.gjp6.0119.2620.IP) (Ping timeout: 121 seconds)
[20:57:03] <panicbit> motiejus: Awesome. That makes everything way easier I guess.
[20:57:13] <motiejus> panicbit: why?
[20:57:25] *** Quits: alexggordon (alexggordon@moz-slt.b6v.251.159.IP) (Ping timeout: 121 seconds)
[20:57:28] <genbattle> The rust compiler is written on rust, so unless you can obtain an arm bootstrap compiler, you need to cross-compile
[20:57:38] <_habnabit> genbattle, okay
[20:57:54] <_habnabit> a cross-compiling i will go
[20:58:11] <motiejus> in a good API, I would expect gnu make to give me a void** as an argument to store my own state, and pass it in invocations
[20:58:30] <panicbit> motiejus: It's a little hard to explain but I'll try to draft the hole thing for you
[20:58:48] <panicbit> motiejus: (It will also be safer than the current ThreadSafe(Ö) approach)
[20:58:58] <motiejus> panicbit: I`m really curious now!
[20:59:10] <genbattle> _habnabit, the build script has a parameter that you can give a triple for the arches you want it to build cross-libs for (rustc allows cross compiling by default, but needs a separate stdlib built for each architecture)
[20:59:11] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[20:59:15] <AngelofSolLab> where can i find the differences between beta 3 and beta 4, also will my code break if I update?
[21:00:04] *** Quits: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk) (Ping timeout: 121 seconds)
[21:00:04] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[21:00:37] *** Joins: rbranson (rbranson@moz-oeg7f0.ca.comcast.net)
[21:01:31] *** Joins: Takronix (Takronix@moz-nm15k0.hr.cox.net)
[21:01:41] <genbattle> _habnabit, to cross-compile the rust compiler itself may be more complicated than just cross-compiling your typical rust app, because you'll need to have the rustc for your target arch available for linking
[21:01:42] <bluss> AngelofSolLab: maybe there is no good summary apart from looking in git. There were only few changes, but some breaking changes I'm sure
[21:01:49] *** Quits: qwerty_nor (Thunderbird@moz-vuo.d5a.248.5.IP) (Ping timeout: 121 seconds)
[21:02:13] *** Quits: kmcguire_ (kmcguire@moz-bbqf14.res.bhn.net) (Ping timeout: 121 seconds)
[21:02:23] <niconii> AngelofSolLab: code breaking should be fairly rare if you're on beta
[21:02:24] <geofft> AngelofSolLab: `git log --grep breaking a21ffcf..903cdfe` (beta 3 to beta 4) finds only one breaking change 
[21:02:32] <frankmcsherry> bluss: I like how making mem::forget safe wasn't technically a breaking change, because the compiler ICE'd when you tried to look at its signature anyhow. :)
[21:02:32] <geofft> "What does this break?  Basically, code that implements `Drop` and is using `T:Copy` for one of its type parameters and is relying on the Drop Check rule not applying to it." 
[21:02:45] *** Joins: Rym (y@moz-o80acm.range86-189.btcentralplus.com)
[21:02:48] <genbattle> _habnabit, it might be worth asking in #rust-internal, I've reached the extent of my knowledge on cross-compiling in Rust :)
[21:02:48] <geofft> (dc814726) 
[21:02:51] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[21:02:56] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[21:02:57] *** Joins: essem2 (Thunderbird@moz-l86scb.sd.cox.net)
[21:03:07] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:03:08] <panicbit> motiejus: Aw that sucks. To use any of the sync primitives a typ has to implement Send (which *mut doesn't)
[21:03:09] <_habnabit> genbattle, okay. i think i might've found the right flags to --configure, but if i have trouble, i'll ask in there
[21:03:49] <bluss> frankmcsherry: it's like someone is looking out for the rust project. The god of ICEs
[21:03:57] <panicbit> motiejus: I thought I could get away with "static LUA: Option<Mutex<*mut lua_State>> = None;"
[21:04:00] *** Joins: Gabriel_7 (Gabriel@moz-gjd65s.mtgr.92aj.0e35.2a01.IP)
[21:04:22] <motiejus> mhm..
[21:04:30] <panicbit> motiejus: It's not possible to initialize that Mtex without an init function
[21:04:39] *** Quits: rbranson (rbranson@moz-oeg7f0.ca.comcast.net) (Ping timeout: 121 seconds)
[21:04:43] <panicbit> motiejus: That's why an init function is useful
[21:04:49] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Connection closed)
[21:04:50] <motiejus> well, I have init function, so we can use it
[21:05:05] <motiejus> ah, I see what you mean
[21:05:10] *** Quits: kkus (kkus@moz-fj2.o46.234.165.IP) (Connection closed)
[21:05:11] <motiejus> you wanted less code
[21:05:18] <panicbit> motiejus: Sure, but I still don't know how one should handle a *mut in a static context
[21:05:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:05:39] <panicbit> motiejus: in a safe manner that is
[21:05:51] *** rkruppe_ is now known as rkruppe
[21:06:50] *** Quits: TheLemonMan (lemonboy@moz-il0u53.50-151.net24.it) (Quit: "It's now safe to turn off your computer.")
[21:06:59] *** Quits: frankmcsherry (frankmcsher@moz-5tq57f.dyn.telefonica.de) (Connection closed)
[21:07:07] *** Quits: Rym (y@moz-o80acm.range86-189.btcentralplus.com) (Ping timeout: 121 seconds)
[21:07:07] *** Joins: rbranson (rbranson@moz-ga0.9o0.201.199.IP)
[21:07:26] <panicbit> motiejus: Hah! AtomicPtr sounds good!
[21:07:42] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (Quit: Leaving)
[21:08:40] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:08:43] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[21:08:55] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:09:51] *** Joins: dfinning_ (dfinninger@moz-6a9v7n.res.rr.com)
[21:10:09] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[21:10:12] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[21:10:24] *** Joins: dfinnin__ (dfinninger@moz-6a9v7n.res.rr.com)
[21:10:26] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[21:11:17] *** Joins: grncdr (Adium@moz-m1g.e47.90.95.IP)
[21:11:26] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:11:48] *** Quits: zeebo (zeebo@moz-6rqv1a.ut.comcast.net) (Ping timeout: 121 seconds)
[21:11:52] *** Quits: dellavg (dellavg@moz-9lesb5.retail.telecomitalia.it) (Ping timeout: 121 seconds)
[21:12:03] <motiejus> panicbit: FYI, got the state initialization with your ThreadSafe struct to work. :-) going on with the gmk_add_function ...
[21:12:31] <genbattle> _habnabit, II found some information here https://kwantam.github.io/Rust_cross_bootstrapping.html but it's a bit out of a date
[21:12:33] *** Quits: AncientPC (AncientPC@moz-2bvk3b.fios.verizon.net) (Ping timeout: 121 seconds)
[21:12:34] <panicbit> motiejus: Nice. AtomicPtr is not the right thing anyway. Once the ptr is inside that struct it's inaccessible...
[21:13:01] <_habnabit> genbattle, the thing i found and was reading was https://github.com/japaric/ruststrap/blob/master/1-how-to-cross-compile.md
[21:13:02] *** Joins: kmcguire (kmcguire@moz-bbqf14.res.bhn.net)
[21:13:13] *** Quits: Jesse (jruderman@moz-pqc1f5.ca.comcast.net) (Client exited)
[21:13:29] *** Joins: basicdays (basicdays@moz-akm.udc.47.174.IP)
[21:13:53] *** Quits: dfinning_ (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[21:14:19] *** Quits: Brochacho_ (alberto@moz-b2ovno.cable.rcn.com) (Client exited)
[21:14:26] <panicbit> motiejus: I might be able to stack overflow the compiler in 46 strokes but I'm too dumb to work around some of rusts safety facilities :P
[21:14:35] *** Joins: AncientPC (AncientPC@moz-2bvk3b.fios.verizon.net)
[21:14:52] <genbattle> _habnabit, looks good, that should get you to the cross-compiler, but if you still want to compile code natively on your target architecture the process might be a bit more complicated
[21:15:00] <_habnabit> genbattle, okay
[21:15:25] *** Joins: DemonOne (Avi@moz-bhsph0.red.bezeqint.net)
[21:15:42] <motiejus> panicbit: well, you did work around for any practical purposes. :-)
[21:15:46] <motiejus> couldn't have done that myself.
[21:16:03] *** Quits: victor (Mibbit@moz-fgundf.dynamic.ziggo.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[21:16:08] *** Joins: pgonda (peter@moz-s36.0tp.134.75.IP)
[21:16:12] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[21:16:12] <genbattle> _habnabit, rustc includes quite a few C/C++ dependencies, so i'm not sure how you could cross-compile them as part of the build
[21:16:15] *** Joins: tmerr (tmerr@moz-uqbbrm.net.t-com.hr)
[21:17:11] *** Joins: frankmcsherry (frankmcsher@moz-5tq57f.dyn.telefonica.de)
[21:17:20] *** Joins: coryforsyth (coryforsyth@moz-hpsim2.fios.verizon.net)
[21:19:10] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[21:20:12] <panicbit> motiejus: I don't like that solution though. It's so... rusty...
[21:20:44] *** Quits: filsmick (filsmick@moz-tj8j41.abo.wanadoo.fr) (Quit: )
[21:20:49] <motiejus> panicbit: you mean ThreadSafe<T>(T) ?
[21:21:08] *** Quits: frankmcsherry (frankmcsher@moz-5tq57f.dyn.telefonica.de) (Connection closed)
[21:21:10] <panicbit> motiejus: Yup. I'd rather have everything a bit more abstracted and safe by default :P
[21:21:28] *** Quits: dfinnin__ (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[21:22:28] *** Joins: skade (skade@moz-m9ib3m.pools.vodafone-ip.de)
[21:22:29] <panicbit> motiejus: That name is irritating by the way. It suggests that it makes T somehow thread safe, when in fact it does not at all
[21:22:40] *** Quits: jviereck (Adium@moz-r772na.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[21:22:45] <motiejus> I`ll change it to ThreadSafeLie
[21:22:51] *** Quits: Douman (Douman@moz-3ei4gt.dynamic.mts-nn.ru) (Quit: )
[21:22:56] *** Joins: lenstr (lenstr@moz-qbg.vju.25.171.IP)
[21:22:59] <panicbit> motiejus: Haha. The thread safety is a lie :P
[21:23:14] *** Quits: rbranson (rbranson@moz-ga0.9o0.201.199.IP) (Ping timeout: 121 seconds)
[21:23:59] *** Joins: chromatome (chromatome@moz-57l.i64.127.96.IP)
[21:25:43] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[21:26:21] *** Quits: flavius (flavius@moz-pik2l3.tmpp.le52.8388.2a02.IP) (Ping timeout: 121 seconds)
[21:26:28] *** Joins: oceanwhit (christianwh@moz-d046r2.res.rr.com)
[21:26:29] *** Joins: mindtree (Mitch@moz-2lb.efi.240.116.IP)
[21:26:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:26:40] *** rkruppe_ is now known as rkruppe
[21:27:01] *** Quits: Gabriel_7 (Gabriel@moz-gjd65s.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[21:27:03] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[21:27:42] *** Joins: Gabriel_7 (Gabriel@moz-gjd65s.mtgr.92aj.0e35.2a01.IP)
[21:27:57] <panicbit> Macros can emit macros. That's insane.
[21:28:19] <emilk> how do I join an iterator of &str to one string with some delimiter?
[21:28:31] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[21:29:12] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[21:29:32] <bluss> emilk: there's no method for that in libstd. You can use a loop or fold, or a method from my crate itertools.
[21:29:59] *** Joins: errordeveloper (ilya@moz-l8r.m9l.11.94.IP)
[21:30:19] <emilk> fold1 ?
[21:30:23] <bluss> .join()
[21:30:42] <bluss> .fold is probably a simple way using libstd
[21:30:53] <bluss> playbot: "a b c".split(' ').fold(String::new(), |acc, elt| acc + elt)
[21:30:54] -playbot- "abc"
[21:30:59] <bluss> using + for concat
[21:31:07] *** Quits: debuuu (debu@moz-thlvnr.dyn.telefonica.de) (Ping timeout: 121 seconds)
[21:31:13] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[21:31:20] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[21:31:21] <icelesstea> In 1.0.0-beta, is there any other way to get a file size than using libc or len of std::fs::metadata? Doing stat().size on a Path::new(file) seems to not work on 1.0.0.
[21:31:22] <emilk> playbot: "a b c".split(' ').fold(String::new(), |acc, elt| acc + ", " + elt)
[21:31:23] -playbot- ", a, b, c"
[21:31:27] <emilk> that's the issue
[21:31:38] <emilk> playbot: "a b c".split(' ').fold1(String::new(), |acc, elt| acc + ", " + elt)
[21:31:39] -playbot- <anon>:9:28: 9:77 error: type `core::str::Split<'_, char>` does not implement any method in scope named `fold1`
[21:31:40] -playbot- <anon>:9         "a b c".split(' ').fold1(String::new(), |acc, elt| acc + ", " + elt)
[21:31:40] -playbot- output truncated; full output at: http://bit.ly/1Is2yit
[21:31:51] <bluss> ah yeah requires a check for first element then :(
[21:31:55] <bluss> .join(", ") is simpler
[21:32:01] <emilk> but itertools looks awesome
[21:33:03] <bluss> yeah it has a lot of stuff
[21:33:05] *** Quits: spider-mario (spidermario@moz-u27.v23.161.37.IP) (Connection closed)
[21:33:12] *** Quits: newbie (eibwen@moz-co6gee.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:33:35] *** Quits: AngelofSolLab (Mibbit@moz-efko6e.ad.rit.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[21:33:39] *** Quits: ytain_ (ytain@moz-a9t.bqj.91.23.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:33:41] *** Quits: pauls (pauls@moz-e5p333.ccs.neu.edu) (Ping timeout: 121 seconds)
[21:33:54] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[21:33:58] *** Joins: spider-mario (spidermario@moz-u27.v23.161.37.IP)
[21:36:15] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[21:36:27] <SIGILL> I'm just reading the guide and I think the mut in the example is redundant and kind of confusing given the topic: `let mut point = Point { x: 5, y: Cell::new(6) };` at http://doc.rust-lang.org/nightly/book/mutability.html#field-level-mutability
[21:36:36] <steveklabnik> SIGILL: i just accepted a patch to fix that :)
[21:36:41] <steveklabnik> your instinct is correct
[21:36:43] *** Quits: chromatome (chromatome@moz-57l.i64.127.96.IP) (Connection closed)
[21:36:47] *** Quits: basicdays (basicdays@moz-akm.udc.47.174.IP) (Ping timeout: 121 seconds)
[21:37:01] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Connection closed)
[21:37:07] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:38:35] <motiejus> panicbit: I`m off to sleep, pushed my progress to the topic branch.
[21:38:36] *** Quits: tomaka (Pierre@moz-8lbrro.abo.wanadoo.fr) (Connection closed)
[21:38:37] <motiejus> thanks for your help!
[21:39:09] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Client exited)
[21:39:13] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:39:20] <panicbit> motiejus: Np :). Bye
[21:39:20] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Connection closed)
[21:39:26] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:39:39] *** Joins: RCIX (RCIX@moz-g1j13b.2e14.4ep5.fb90.2607.IP)
[21:40:29] <SIGILL> steveklabnik: nice, thanks! great work with the guide, btw. it has come a long way since I last checked
[21:41:13] <steveklabnik> thank you :)
[21:41:36] *** Joins: alexggordon (alexggordon@moz-slt.b6v.251.159.IP)
[21:42:48] *** Quits: pgonda (peter@moz-s36.0tp.134.75.IP) (Ping timeout: 121 seconds)
[21:43:28] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[21:43:37] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Client exited)
[21:43:46] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:44:43] <companion_cube> still no ebook version of rust-book?
[21:45:01] *** Joins: tomaka (Pierre@moz-8lbrro.abo.wanadoo.fr)
[21:45:05] <steveklabnik> nope
[21:45:28] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[21:45:32] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Connection closed)
[21:45:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:45:39] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:45:52] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Client exited)
[21:46:43] *** Quits: motiejus (Mibbit@moz-pl6gqp.speed.planet.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[21:46:55] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:47:14] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[21:47:45] *** Quits: Kxepal (Miranda@moz-hdh74i.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[21:48:25] <RCIX> i feel like I'm missing something here
[21:48:36] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[21:48:41] <RCIX> i have the line
[21:48:42] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Client exited)
[21:48:48] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:48:48] <RCIX> rewrite_regex.replace_all(&source, &&(replace.as_str()));
[21:48:52] <RCIX> using the regex crate
[21:48:56] *** Quits: emilk (emilk@moz-eossn5.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[21:48:59] <RCIX> well ignore the second &
[21:49:03] <companion_cube> steveklabnik: no offline version either? why? :/
[21:49:28] <steveklabnik> companion_cube: nobody has written the patch to build it
[21:49:36] <steveklabnik> but
[21:49:40] <steveklabnik> you should have an offline version installed
[21:49:42] <steveklabnik> the HTML
[21:49:44] <steveklabnik> comes with rust
[21:49:47] <companion_cube> oh
[21:49:48] *** Joins: Kxepal (Miranda@moz-bi9vnd.pppoe.mtu-net.ru)
[21:49:55] *** Joins: LeviM (uid32066@moz-rau9ef.charlton.irccloud.com)
[21:50:00] <RCIX> anyway, i get the error "src\word.rs:152:36: 152:78 error: the trait `for<'r,'r> core::ops::Fn<(&'r regex::re::Captures<'r>,)>` is not implemented for the type `str` [E0277]" but according to regex documentation and source code theres a direct implementation of a trait for str that should satisfy that
[21:50:05] *** Quits: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[21:50:15] <steveklabnik> burntsushi: ^ ?
[21:50:23] <RCIX> ty
[21:50:28] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[21:50:35] <companion_cube> oh I see, the documentation is packaged separately on my distro
[21:50:36] <companion_cube> thnaks
[21:50:40] <talchas> what is the type of replace.as_str()?
[21:50:49] *** Quits: khades (Thunderbird@moz-s8b.3vk.74.212.IP) (Client exited)
[21:50:51] <talchas> if it's &str, I wouldn't expect you to need any &s
[21:50:54] *** Joins: khades (Thunderbird@moz-s8b.3vk.74.212.IP)
[21:50:57] <RCIX> replace is a String
[21:51:00] *** Joins: jviereck (Adium@moz-r772na.dclient.hispeed.ch)
[21:51:06] <LeviM> Do Rust's match statements that are exhaustive with no default clause do bounds checking in the emitted assembly?
[21:51:06] <panicbit> Ok, I might have caused a macro singularity? Macros shouldn't be able to run like forever?
[21:51:23] <RCIX> so im coercing it to a str, which has a trait implementation for Replacer (the type of the relevant argument in that call to replace_all)
[21:51:29] <talchas> yeah
[21:51:30] <RCIX> and then i get that error
[21:51:40] <talchas> I would expect either &replace or replace.as_str() to work
[21:51:46] <talchas> (the latter being unstable)
[21:51:52] <steveklabnik> LeviM: i'm not sure what you mean by 'bounds checking' here, but i don't think so
[21:51:56] <RCIX> yeah i figured id try both
[21:51:57] <RCIX> both fail
[21:51:58] <talchas> the trait failing for str seems a little odd
[21:52:01] *** Joins: claude (Mibbit@moz-tomcd8.dsl.bell.ca)
[21:52:09] <RCIX> I'll put up an issue, i think
[21:52:33] <RCIX> after reproducing in a new project
[21:52:38] <RCIX> so i know its not my codebase
[21:52:42] *** Quits: claude (Mibbit@moz-tomcd8.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[21:53:39] <LeviM> steveklabnik: Ah, I misread something in another article about computed gotos.
[21:54:06] <steveklabnik> gotcha
[21:54:07] <steveklabnik> :)
[21:54:52] <LeviM> I was reading up on common optimizations for interpreted languages.
[21:55:00] <LeviM> Particularly about computed gotos in C.
[21:55:02] *** Quits: jviereck (Adium@moz-r772na.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[21:55:43] <LeviM> Well no, maybe I didn't misunderstand:
[21:55:54] <LeviM> "If no converted case constant expression matches and there is no default label, no part of the switch body is executed."
[21:56:07] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[21:57:30] <LeviM> Ah, so it is converting switch statements into jump tables
[21:58:04] <LeviM> And the C compiler is emitting bounds checking on that, or something. Not sure I quite understand (assembly is not yet one of my strong points)
[21:58:33] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[21:58:45] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[21:59:12] *** Quits: tno (tomas@moz-iskdco.7pm2.so41.08a0.2001.IP) (Quit: Leaving)
[21:59:35] <niconii> in C, sure, but that doesn't really apply to rust
[22:00:55] <niconii> in C, default labels are a catchall in case one of the arms doesn't match, but that only makes a difference because C switches *aren't* guaranteed to be exhaustive, unlike rust matches
[22:01:01] <LeviM> niconii: which is what I was asking about :)
[22:01:10] <niconii> so rust never has to do bounds checking for that
[22:01:27] <LeviM> Since we can have exhaustive checks without defaults.
[22:01:30] *** Joins: pauls (pauls@moz-e5p333.ccs.neu.edu)
[22:02:00] <LeviM> I think I may write a little interpreter in Rust.
[22:02:21] <niconii> or, hmm, at least, it's not possible that the match statement would be skipped entirely
[22:02:47] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[22:02:48] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[22:03:04] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[22:03:42] *** Joins: nedp (nedp@moz-vg6vvt.bigpond.net.au)
[22:05:45] *** Joins: fengshaun (fengshaun@moz-rf0qk5.cable.teksavvy.com)
[22:06:09] *** Quits: lutter (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net) (Ping timeout: 121 seconds)
[22:07:24] *** Joins: lutter (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net)
[22:07:35] <tmtwd>   let y = 32; let x = &y; is this equivalent to int y = 32; int * x = &y;?
[22:07:44] <tmtwd> in C
[22:08:25] <bluss> it's similar
[22:08:50] <LeviM> const int * is closer, isn't it?
[22:09:00] <reem> in terms of what is actually happening yes, in terms of semantics of the pointer no
[22:09:25] <tmtwd> ah it should be let mut y = 32; let mut x = &y;?
[22:09:35] <niconii> let mut y = 32; let x = &mut y;
[22:09:35] <reem> &‚Äôa T has more restrictions than a C *T, mainly the lifetime parameter, and it is immutable
[22:09:52] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[22:09:59] <reem> well &‚Äôa mut T is also not the same as a C *T, since it has the lifetime and it cannot be aliased
[22:10:15] *** Quits: oceanwhit (christianwh@moz-d046r2.res.rr.com) (Ping timeout: 121 seconds)
[22:10:24] *** Joins: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk)
[22:10:29] <niconii> tmtwd: the difference between `let x = &mut y;` and `let mut x = &y;` is
[22:10:46] *** Quits: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl) (Quit: Leaving)
[22:11:03] <niconii> tmtwd: with the former, you can mutate y via x; with the latter, you could make x point at something else
[22:11:05] *** Quits: alexggordon (alexggordon@moz-slt.b6v.251.159.IP) (Ping timeout: 121 seconds)
[22:11:12] <burntsushi> RCIX: any luck on a small reproducible example with your regex problems?
[22:12:05] <RCIX> yep
[22:12:12] <RCIX> got it commited and writing issue
[22:12:26] <burntsushi> RCIX: all right, send me a link when ready. i'll investigate :-)
[22:12:34] <RCIX> burntsushi: ty
[22:12:39] *** Quits: Uther (Thunderbird@moz-gssp49.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:12:40] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[22:13:11] *** Quits: derek_c (derek@moz-eg2lms.cit.cornell.edu) (Ping timeout: 121 seconds)
[22:14:54] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[22:14:56] *** Joins: derek_c (derek@moz-eg2lms.cit.cornell.edu)
[22:15:14] <tmtwd>   let mut z = 58;   let p = &mut z; println!("{}", z); How come this can't compile?
[22:15:49] <niconii> tmtwd: because of borrowing rules; you cannot use z while it's being borrowed, and p is borrowing it by having a reference to it
[22:15:52] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[22:15:59] <tmtwd> I see
[22:16:07] <niconii> tmtwd: (it's the core of what ensures memory safety in rust)
[22:16:25] <tmtwd> niax,  can I explicitly unborrow something in rust?
[22:16:38] <tmtwd> I mean niconii 
[22:16:44] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[22:16:48] <niconii> easiest way is to put it inside a block so p goes out of scope
[22:16:51] <niconii> for instance
[22:17:02] <RCIX> burntsushi, https://github.com/rust-lang/regex/issues/83
[22:17:02] <mindtree> some C bindings I'm working on produce a linker error on the latest rust (both on my machine and travis), despite working fine about a week ago (haven't changed anything in between either) - any ideas?
[22:17:09] <niconii> playbot: let mut z = 58; { let p = &mut z; } println!("{}", z)
[22:17:10] -playbot- 58
[22:17:10] -playbot- ()
[22:17:15] *** Joins: Guest22 (textual@moz-jt9juk.fibertel.com.ar)
[22:17:19] <RCIX> uhhh
[22:17:21] <RCIX> sec
[22:17:28] <niconii> tmtwd: like that ^
[22:17:44] <burntsushi> RCIX: you can't rely on auto deref unfortunately.
[22:17:45] *** Quits: jws (jsalter@moz-q98cl6.cable.virginm.net) (Client exited)
[22:17:55] <burntsushi> if `replace` is a `String`, then `&replace` is a `&String`.
[22:18:05] <burntsushi> RCIX: try `&*replace`.
[22:18:11] *** Joins: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net)
[22:18:11] <tmtwd>   let mut z = 58;  {  let p = &mut z;  *p = 60;  } println!("{}", z);
[22:18:16] <tmtwd> this works quite well
[22:18:23] <tmtwd> it prints 60
[22:18:34] <niconii> by the way, this would have also worked fine:
[22:18:40] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[22:18:44] <niconii> playbot: let mut z = 58; let p = &mut z; println!("{}", *p)
[22:18:45] -playbot- 58
[22:18:46] -playbot- ()
[22:18:59] <niconii> as long as you only access through the reference, there's no problem
[22:19:02] <burntsushi> RCIX: i believe auto deref only kicks in when it is unambiguously the only choice. but in this case, the replacement is overloaded, so the compiler won't auto deref for you.
[22:19:09] <RCIX> burntsushi: i just updated it, sorry
[22:19:18] <tmtwd> niconii, yes I tried that
[22:19:19] <RCIX> explicit as_str also fails and tells me that str
[22:19:22] <RCIX> is not a valid type
[22:19:31] <RCIX> i can try that other one as you recommend yeah
[22:19:33] <burntsushi> RCIX: all right, i'll try your code
[22:19:40] *** Quits: jshs (jshs@moz-abmm4d.dip0.t-ipconnect.de) (Client exited)
[22:19:44] <RCIX> gotta go, will check in a bit
[22:21:18] *** Joins: lyc (lyc@moz-2oa.us4.25.175.IP)
[22:21:20] <burntsushi> RCIX: use `replace.as_str()`
[22:21:25] <burntsushi> instead of `&replace.as_str()`
[22:21:27] <burntsushi> and it works.
[22:21:43] <burntsushi> `replace.as_str()` returns a `&str`, so `&replace.as_str()` is a `&&str`, which doesn't have an impl.
[22:23:04] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[22:23:38] *** Joins: borromakot (Adium@moz-iuh1gg.u9cs.nunl.000d.2601.IP)
[22:24:02] <borromakot> hey all.  I'm trying to figure out the syntax for adding a lifetime using the AsRef/builder pattern. http://is.gd/s9G375
[22:24:03] *** Quits: errordeveloper (ilya@moz-l8r.m9l.11.94.IP) (Ping timeout: 121 seconds)
[22:24:14] <borromakot> I've tried what the compiler recommends but it doesn't work in this case.
[22:24:35] *** Joins: Wild_Cat (Max@moz-fa8mvt.dsl.teksavvy.com)
[22:24:55] *** Quits: heftig (heftig@moz-5r9s0n.archlinux.org) (A TLS packet with unexpected length was received.)
[22:25:01] *** Quits: grncdr (Adium@moz-m1g.e47.90.95.IP) (Quit: Leaving.)
[22:25:02] <borromakot> I just realized that won't build because of the hyper dependency, so I
[22:25:08] <borromakot>  am going to try and pare it down.
[22:25:15] *** bvssvni is now known as bvssvni_
[22:25:21] *** Quits: lyc (lyc@moz-2oa.us4.25.175.IP) (Ping timeout: 121 seconds)
[22:25:37] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Ping timeout: 121 seconds)
[22:25:49] <reem> borromakot: receive an &‚Äôa K in the key method
[22:25:53] *** Joins: heftig (heftig@moz-5r9s0n.archlinux.org)
[22:25:55] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[22:25:59] <reem> that way the str yielded by AsRef will be &‚Äôa str
[22:26:27] <reem> borromakot: that said 34 still won‚Äôt work since you‚Äôre trying to store a reference to a temporary
[22:26:38] <borromakot> here we go http://is.gd/mJAVEq
[22:26:59] *** Quits: csoriano (csoriano@moz-g6rkdc.net.upcbroadband.cz) (Client exited)
[22:28:51] <tmtwd>   let y = 32;  let x = &y;  let v = 42; let x = &v; println!("{}", *x);
[22:28:55] <tmtwd> how come that works?
[22:29:06] <tmtwd> shouldn't x be declared as mutable?
[22:29:09] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:29:15] <borromakot> reem: what has had me confused is this builder pattern tutorial doesn't seem to really make sense.  https://aturon.github.io/ownership/builders.html
[22:29:20] <Sgeo> That second let x is defining a separate variable called x
[22:29:26] <Seldaek> tmtwd: I think you redeclare it there so it shadows the first
[22:29:26] <Sgeo> Not changing the current on e
[22:29:28] <borromakot> the functions take Strings and its just passing them &strs
[22:29:57] *** Joins: qrlpx_ (smuxi@moz-n7t.3nb.211.95.IP)
[22:29:59] <reem> borromakot: it‚Äôs probably just a mistake
[22:30:43] *** Joins: RC9 (RCIX@moz-h72dc3.2e14.4ep5.fb90.2607.IP)
[22:30:59] <tmtwd> let y = 32;  let mut x = &y;  let v = 42; x = &v; then how come this doesn't work?
[22:31:12] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[22:31:13] <tmtwd>  `v` does not live long enough 
[22:31:19] <borromakot> You can probably tell what I'm going for with the example I showed you.  Do you think it would be wise to make all the builder functions take &str and then just .to_string() them and store them in the struct?  It just seems unnecessary because I will never need to modify them in any way.
[22:31:36] <borromakot> or perhaps that is unnecessary.
[22:31:42] <reem> borromakot: receive an &‚Äôa K in the key method
[22:31:47] <reem> like I said earlier ;)
[22:31:51] <borromakot> what is K though?
[22:31:56] *** Quits: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[22:32:09] <borromakot> do you mean S?
[22:32:13] <reem> oh sorry S
[22:32:14] <reem> I meant S
[22:32:26] <RC9> burntsushi: ah ha, i figured it might be something I'm doing but wasnt sure what
[22:32:49] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[22:33:06] <burntsushi> RC9: yeah, we might be able to add an impl for better ergnomics. the standard lib tends to do it.
[22:33:12] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[22:33:17] *** Joins: arBmind1 (Andreas@moz-q3b4dn.adsl.alicedsl.de)
[22:33:20] *** Joins: bmdashw (textual@moz-pqkar6.cm.vtr.net)
[22:33:39] *** Quits: RCIX (RCIX@moz-g1j13b.2e14.4ep5.fb90.2607.IP) (Ping timeout: 121 seconds)
[22:34:18] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Quit: Leaving...)
[22:34:19] *** Quits: arBmind (Andreas@moz-1il8vu.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[22:34:29] <borromakot> okay, I'm doing that now.  I'm getting `trait `core::marker::Sized` is not implemented for the type `str``  What confuses me is that &str is a reference, so it should have a constant size.
[22:35:00] *** Joins: jophish (jophish@moz-epocft.broadband.tesco.net)
[22:35:19] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[22:35:24] <reem> borromakot: S: ?Sized + AsRef<str>
[22:35:36] <reem> borromakot: this is so you can pass an &str directly
[22:35:43] <reem> so S = str
[22:35:58] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[22:36:19] *** Quits: kgrandon (Adium@moz-ilv.ukc.122.2.IP) (Quit: Leaving.)
[22:37:14] *** Joins: pgonda (peter@moz-s36.0tp.134.75.IP)
[22:37:32] <borromakot> interesting.  What is the ?Sized trait doing?  It can't be making the compiler okay with not knowing the size at compile time can it?
[22:37:43] <borromakot> I can google that one actually :D
[22:37:50] *** Joins: yuja (yuja@moz-kvchbl.so-net.ne.jp)
[22:37:55] *** Quits: druzac (druzac@moz-pq2483.vc.shawcable.net) (Ping timeout: 121 seconds)
[22:38:10] <reem> borromakot: it just opts out of the implicit Sized bound on S
[22:38:24] <reem> borromakot: so you can instantiate S on types that don‚Äôt implement Sized, like str, [T], and Path
[22:38:53] <borromakot> ah, that makes sense :D
[22:38:55] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:39:54] *** Quits: veqz (veqz@moz-nvr8g6.209.getinternet.no) (Ping timeout: 121 seconds)
[22:42:01] *** Quits: sad (Mibbit@moz-tpjl46.co.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:42:31] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[22:42:51] *** Quits: jophish (jophish@moz-epocft.broadband.tesco.net) (Connection closed)
[22:43:05] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[22:44:08] <borromakot> http://is.gd/Rnv7kX, I'm confused why the API that is returned does not live long enough.  Every contained reference should live as long as the API itself, at least that is how I'm reading the lifetimes.
[22:45:35] *** Joins: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com)
[22:46:08] *** Quits: skade (skade@moz-m9ib3m.pools.vodafone-ip.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[22:46:23] *** Joins: sad (Mibbit@moz-tpjl46.co.comcast.net)
[22:46:27] <panicbit> borromakot: http://is.gd/mugyGM
[22:47:01] <reem> borromakot: the problem now is that key returns a mutable reference, and that reference points to the temporary returned by API::new, which isn‚Äôt valid for the whole block, just that expression
[22:47:03] <panicbit> borromakot: I sadly can't explain why.
[22:47:04] <borromakot> panicbit: that eliminates one of the huge benfits of the builder pattern.
[22:47:10] <panicbit> Yup
[22:47:32] <reem> borromakot panicbit: My favorite way to solve this problem is with modifiers, cf. http://github.com/reem/rust-modifier
[22:47:53] *** Quits: areski (areski@moz-adq529.user.ono.com) (Ping timeout: 121 seconds)
[22:47:57] <reem> they allow you to define a modification once, then use it with both &mut self -> &mut Self chaining and self -> Self chaining
[22:48:02] <reem> so you don‚Äôt hit this problem
[22:48:34] *** Quits: pgonda (peter@moz-s36.0tp.134.75.IP) (Ping timeout: 121 seconds)
[22:48:36] <borromakot> so https://doc.rust-lang.org/src/std/process.rs.html#133-140
[22:48:46] <borromakot> they do exactly what I'm trying to do here.
[22:49:04] *** Quits: vosen (vosen@moz-mtm1g4.dynamic.chello.pl) (Connection closed)
[22:49:10] <panicbit> borromakot: Except there are no references
[22:49:29] *** Quits: Guest22 (textual@moz-jt9juk.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[22:49:33] *** Joins: pgonda (peter@moz-s36.0tp.134.75.IP)
[22:49:36] *** Joins: turtil (turtil@moz-98pgrn.orcon.net.nz)
[22:50:04] *** Joins: tmerr1 (tmerr@moz-2i93n0.net.t-com.hr)
[22:50:08] <reem> borromakot: you can also just do let mut api = Api::new(..); api.many().builder().methods();
[22:50:34] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[22:50:36] *** Quits: derek_c (derek@moz-eg2lms.cit.cornell.edu) (Ping timeout: 121 seconds)
[22:50:46] <borromakot> oh, I see.  It might all be made simpler by just having the struct use Strings.
[22:50:55] <reem> borromakot: that will not solve this problem, it‚Äôs unrealted
[22:50:57] <panicbit> reem: The important point is that lifetime 'a is kept alive (which is held by the original Api::new struct), right?
[22:51:04] <tmtwd> let y = 32;  let mut x = &y;  let v = 42; x = &v; then how come this doesn't work? the error says that v does not live long enough
[22:51:07] <reem> nope
[22:51:27] <reem> it‚Äôs the same as why let y = &mut vec![1, 2, 3] doesn‚Äôt work
[22:51:31] <reem> actually that does
[22:51:34] <reem> but it‚Äôs a special case
[22:52:06] <borromakot> so panicbit just said that the reason it works for Command is that there are no references on the Command struct.
[22:52:17] <reem> he‚Äôs wrong :P
[22:52:21] <panicbit> :P
[22:52:24] <panicbit> But but...
[22:52:25] <borromakot> oh lol
[22:52:43] *** Quits: tmerr (tmerr@moz-uqbbrm.net.t-com.hr) (Ping timeout: 121 seconds)
[22:52:45] *** Joins: Guest63 (textual@moz-k0bi5k.dip0.t-ipconnect.de)
[22:52:54] <panicbit> Don't listen to people on the internet, except when they tell you :P
[22:53:09] <panicbit> +to
[22:53:11] *** Quits: o_pax (o_pax@moz-mscm03.hsi.kabel-badenwuerttemberg.de) (Client exited)
[22:53:11] <reem> borromakot: the problem is just that API::new returns an owned value, then the chaining method borrows it and tries to return that borrow, which you then try to store without storing the owned value somewhere, so you just have a classic borrow-outside-of-lifetime error
[22:53:23] *** Joins: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net)
[22:53:42] <reem> borromakot: if the chaining method took self by-value and returned API<‚Äòa>, it would work fine, but you then couldn‚Äôt use that method without owning the API
[22:54:13] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[22:54:41] <reem> borromakot: this is the problem that modifiers solves, cf. github.com/reem/rust-modifier
[22:55:18] *** Quits: tomprogrammer (thomas@moz-lglg1b.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[22:55:34] <borromakot> reem: I'm on board with why it doesn't work, I'm just at a loss for why it works for Command.  I'm totally down with using modifiers, I just want to understand.
[22:55:50] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[22:55:53] <reem> borromakot: sure, so Command has the same problem
[22:55:58] <borromakot> so this: pub fn args<S: AsRef<OsStr>>(&mut self, args: &[S]) -> &mut Command {
[22:55:58] <borromakot>  works for them
[22:55:58] *** Joins: lyc (lyc@moz-jft.nr8.226.207.IP)
[22:56:13] <reem> if you tried to do let c = Command::new(..).args(..); you would get the same error
[22:56:23] <reem> the args argument is mostly irrelevant
[22:56:33] *** Quits: peacememories (peacememori@moz-03ni57.dynamic.surfer.at) (Connection closed)
[22:57:47] <borromakot> ohhh I see.  In all of the places I've used it, I've ended the chain with something like .spawn() or .output().
[22:57:51] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[22:57:56] <borromakot> which returns the constructed value.
[22:58:10] <borromakot> **constructed struct
[22:58:41] *** Quits: kaeluka (kaeluka@moz-tn3lqd.cust.bredbandsbolaget.se) (Client exited)
[22:58:43] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[22:58:44] <borromakot> which is why that guide has you using an intermediate struct.
[22:59:01] <borromakot> when I say "used it" I mean used Command::new()
[22:59:08] *** Joins: oceanwhit (christianwh@moz-d046r2.res.rr.com)
[22:59:42] *** Joins: Guest22 (textual@moz-jt9juk.fibertel.com.ar)
[23:00:17] <reem> yup
[23:00:51] <logan_e> Hi, whenever I try to compile the code here: https://github.com/meadowstream/lispy-rust/blob/master/src/main.rs I get an error around the lifetime of `parsedCode`
[23:00:56] <logan_e> I think I understand why this is 
[23:01:00] <logan_e> But I‚Äôm not really sure how to solve the problem
[23:01:17] <logan_e> What‚Äôs the most rust-y way of string substitution and parsing in this instance?
[23:01:32] *** Quits: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP) (Client exited)
[23:01:40] *** Joins: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP)
[23:01:42] *** Quits: emanuelz (emanuelz@moz-vq3.5b3.175.205.IP) (Client exited)
[23:02:49] *** Quits: logan_e (logan_e@moz-ltn.qg3.218.73.IP) (Client exited)
[23:03:30] *** Joins: nollidj (stu@moz-19n55r.sdf.org)
[23:04:22] <raph> logan_e: I think you basically want to return a Vec<String> instead of a Vec<&str>
[23:04:40] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[23:04:58] <raph> the latter would be totally appropriate if the strings in the vector were substrings of the input
[23:05:04] <panicbit> raph: He's gone
[23:05:15] <panicbit> :P
[23:05:37] * raph has confidence he'll read the irc logs
[23:06:02] <raph> but this reminds me of one of the crazier ideas i've ever had in my life
[23:06:22] *** Quits: lenstr (lenstr@moz-qbg.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[23:06:26] <raph> i can share it if there aren't any small children on the channel who might be scared by it
[23:06:42] <borromakot> I'm only 5 man.
[23:06:45] <borromakot> keep it PG
[23:06:46] <panicbit> raph: Slap a NSFW tag on it
[23:06:47] <panicbit> :P
[23:06:48] <borromakot> ;)
[23:06:50] <nollidj> i have a library that essentially consists of a few traits and multiple submodules with implementations of those traits. i'd like to write a test suite for the traits that can be pulled in by tests within each implementing submodule
[23:07:19] *** Joins: o_pax (o_pax@moz-mscm03.hsi.kabel-badenwuerttemberg.de)
[23:07:30] <raph> borromakot: i'm impressed, people are really starting early
[23:07:39] <nollidj> there are a few ways i could consider wiring that together. are there any working examples people are aware of?
[23:08:08] <bmdashw> raph: Maybe I can learn in logen_e‚Äôs stead! Your answer‚Äîis that becaue there isn‚Äôt a contiguous &str that represents the result, so an owned String must be created from the separate parts instead?
[23:08:38] <raph> bmdashw: yes, that's it :)
[23:08:48] <bmdashw> :)
[23:09:19] *** Quits: yuja (yuja@moz-kvchbl.so-net.ne.jp) (Ping timeout: 121 seconds)
[23:09:40] *** Quits: dmac_ (dmac@moz-moa.puk.8.50.IP) (Ping timeout: 121 seconds)
[23:09:42] <raph> bmdashw: this particular case is kinda interesting, because the problem being solved (parsing sexp) doesn't need newly created strings at all
[23:10:02] <raph> he's inserting spaces by regex, then stripping them away by split
[23:10:06] *** Quits: Guest22 (textual@moz-jt9juk.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[23:10:17] <panicbit> Well, he's basically creating owned strings in that method and tries to return references to it
[23:10:19] *** Quits: dr4yyee (dr4yyee@moz-b0r79i.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:10:28] <panicbit> Isn't he?
[23:10:39] <raph> panicbit: yes
[23:10:53] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[23:11:12] *** Joins: dmac_ (dmac@moz-moa.puk.8.50.IP)
[23:11:17] <raph> i'm just saying there are two ways to fix this; return Vec<String>, which lets you do it the way they were trying,
[23:11:39] <pyon> Just wondering... Why can't BTreeMap::entry and HashMap::entry be put in a common trait? The Entry<K,V> type could be an associated type.
[23:11:41] <bmdashw> So alternatively he could search for the parts he needs, and directly return the vec of those &str‚Äôs?
[23:12:09] *** Quits: tmerr1 (tmerr@moz-2i93n0.net.t-com.hr) (Ping timeout: 121 seconds)
[23:12:11] <panicbit> he could have just left off the as_slice()...
[23:12:24] <panicbit> AFAICT
[23:12:29] <raph> or split it into &str references to the original string
[23:13:12] *** Quits: coryforsyth (coryforsyth@moz-hpsim2.fios.verizon.net) (Client exited)
[23:13:27] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[23:13:27] <nollidj> it would be nice to have first-class tests which take type parameters, so that i could instantiate a test suite, set implementing types for the traits being tested, and then run the whole suite, without redeclaring a lot of methods with #[test]
[23:14:00] *** Joins: geomyidae_ (uid214@moz-n22p0h.charlton.irccloud.com)
[23:14:39] *** Quits: munksgaard (munksgaard@moz-mf6fei.rev.sefiber.dk) (Ping timeout: 121 seconds)
[23:14:39] <panicbit> raph: Btw, that looks like a really creepy parse method. Reminds me of http://stackoverflow.com/a/1732454
[23:15:02] <raph> panicbit: i've done it, in python :)
[23:15:05] <panicbit> :X
[23:15:38] <raph> i'm looking for a way to do this with iterators‚Ä¶
[23:15:39] *** Quits: RC9 (RCIX@moz-h72dc3.2e14.4ep5.fb90.2607.IP) (Ping timeout: 121 seconds)
[23:15:44] <raph> i think there might be a simple solution
[23:17:01] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Connection closed)
[23:17:31] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[23:18:01] *** Joins: tmerr1 (tmerr@moz-2i93n0.net.t-com.hr)
[23:18:08] *** Quits: SerialVelocity_ (SerialVeloc@moz-t4qdj0.threembb.co.uk) (Ping timeout: 121 seconds)
[23:19:14] *** Joins: njn (chatzilla@moz-6gdjm4.iinet.net.au)
[23:19:36] *** Quits: essem2 (Thunderbird@moz-l86scb.sd.cox.net) (Client exited)
[23:20:20] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[23:20:33] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[23:20:48] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[23:21:24] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[23:21:24] *** ChanServ sets mode: +o erickt
[23:23:33] *** Quits: JanC__ (janc@moz-k7vuuu.dsl.scarlet.be) (Ping timeout: 121 seconds)
[23:24:22] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[23:24:45] <raph> http://is.gd/MOoIqw is what i came up with
[23:25:50] <panicbit> raph: That is way more awesome :)
[23:25:50] <raph> it's fast and works, but kinda low-level
[23:26:23] <raph> would be really fast if find were replaced by as_bytes().position()
[23:26:39] <raph> (that lets it scans bytes instead of doing utf-8 decoding)
[23:28:12] *** Joins: orangeshark (erik@moz-e7fbaa.44tj.56ot.0306.2602.IP)
[23:28:51] *** Quits: Drek (Mibbit@moz-qdblt2.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[23:28:52] <raph> http://is.gd/B8TrJA is the bytes() version
[23:28:56] *** Joins: Reinhart (wizard@moz-om0204.student.utwente.nl)
[23:29:18] <Dabo> pyon, no reason in particular - there just hasn't been a "has entries" trait created yet
[23:29:29] <Dabo> Both of them do implement Index<thing>
[23:29:31] <raph> probably the fastest sexp tokenizer in the west
[23:29:37] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[23:30:11] <raph> but i probably wouldn't do it quite that way either :)
[23:30:28] <raph> i'd write an iterator that returns an enum of Open, Close, or Token(&str)
[23:31:08] <raph> because, depending on what you're doing, you _probably_ don't need to store this in a Vec
[23:31:12] <raph> anyway, that's not my crazy idea
[23:31:16] <raph> here's my crazy idea
[23:32:07] <raph> you design a new language which is just like rust but with a lot of of the hard stuff stripped out
[23:32:15] *** Quits: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net) (Quit: Leaving.)
[23:32:35] <raph> two things in particular: there are no lifetimes, and there is only one string type
[23:33:01] *** Joins: derek_c (derek@moz-eg2lms.cit.cornell.edu)
[23:33:32] <raph> you mostly implement this language inside an ide
[23:33:47] <raph> (ie there is no production compiler for it)
[23:33:47] <Dabo> why would you want rust without lifetimes .___.
[23:33:53] <raph> i'm getting there :)
[23:34:19] <raph> then, as soon as the programmer types code that checks in _this_ language, another phase goes to work
[23:34:21] <jn> no borrowing, to pick nits
[23:34:52] *** Quits: pavelpenev (quassel@moz-8vs4j7.btc-net.bg) (Ping timeout: 121 seconds)
[23:34:53] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[23:34:53] <raph> it analyzes the program, figures out which string types should be &str, which should be String, etc.
[23:35:21] *** kimundi is now known as zz_kimundi
[23:35:26] <jn> (because lifetimes are the truth, they always exist, they just aren't that visible in other languages)
[23:35:27] <raph> inserting .as_string() and & as needed
[23:35:42] <jn> raph: that's a cool pln
[23:35:47] <raph> and basically offers that as a suggested autocomplete
[23:36:29] *** Joins: JanC__ (janc@moz-kp9cpe.dsl.scarlet.be)
[23:36:35] <raph> obviously this wouldn't be just strings, it would try to decide between by-move and by-ref as well
[23:36:57] <raph> and of course other things like adding let <mut> if you do mutate a var; and adding semicolons
[23:37:17] <raph> i still tend to leave out the semicolon when i write let foo = if predicate { bar } else { baz }
[23:37:30] *** Quits: pgonda (peter@moz-s36.0tp.134.75.IP) (Ping timeout: 121 seconds)
[23:37:32] <mbrubeck> Yeah
[23:37:43] *** Quits: bmdashw (textual@moz-pqkar6.cm.vtr.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[23:37:44] <mbrubeck> especially if the final "}" is several lines away from the `let`
[23:38:02] <raph> and the idea is that the suggested autocomplete _would_ compile
[23:38:06] <raph> as valid rust
[23:39:10] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[23:39:14] <niconii> raph: i'm four years old and you have traumatized me permanently
[23:39:24] <raph> niconii: i do apologize
[23:40:00] *** Quits: njn (chatzilla@moz-6gdjm4.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 40.0a1/20150510155509])
[23:40:06] <raph> it would also add the ! to println! and change {} to {:?} :)
[23:40:25] <Dabo> raph, but {:?} isn't always what you want .-.
[23:40:32] <Dabo> {} is much better in most cases
[23:40:40] *** Joins: pavelpenev (quassel@moz-8vs4j7.btc-net.bg)
[23:40:48] <raph> Dabo: when the type doesn't support Display
[23:40:51] <Dabo> ok
[23:41:23] *** Quits: DemonOne (Avi@moz-bhsph0.red.bezeqint.net) (Ping timeout: 121 seconds)
[23:41:27] <raph> there are tricky bits to this, of course
[23:41:29] <jn> raph: there's a rust plugin for eclipse, i think. would that be a good starting point?
[23:41:40] <raph> jn: yes, it wouldn't be crazy to start there
[23:42:04] <raph> i personally have a pretty strong distaste for eclipse, but that's just me
[23:42:27] <jn> nah, not just you ;)
[23:42:44] *** Joins: frangio (frangio@moz-04sgf8.fibertel.com.ar)
[23:43:12] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[23:44:07] <raph> how much does that plugin actually understand the language?
[23:44:15] <raph> like, does it know the type of every ast node?
[23:44:21] <jn> i don't know
[23:44:33] <raph> when using eclipse for java, it's the Real Thing
[23:46:21] * raph reads http://norvig.com/lispy.html and sees where this whole parsing-using-regex nonsense comes from
[23:46:30] <raph> my idea of course would not save the user from that
[23:46:32] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[23:46:46] *** Joins: emilk (emilk@moz-eossn5.cust.bredbandsbolaget.se)
[23:46:46] *** Joins: DemonOne (Avi@moz-bhsph0.red.bezeqint.net)
[23:46:58] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[23:47:43] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[23:48:00] *** Quits: mindtree (Mitch@moz-2lb.efi.240.116.IP) (Ping timeout: 121 seconds)
[23:48:46] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Connection closed)
[23:48:48] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[23:49:02] *** Joins: mindtree (Mitch@moz-2lb.efi.240.116.IP)
[23:50:53] *** Quits: emilk (emilk@moz-eossn5.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[23:51:48] <frangio> if i construct a struct like `A { x: f(), y: g() }`, is it guaranteed that f() will execute before g()?
[23:52:02] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[23:52:24] * mbrubeck just noticed that the selected tab on https://www.reddit.com/r/rust/new/ is labeled `box` instead of `new` :)
[23:53:15] <mbrubeck> frangio: I believe so, though I don't think it's documented anywhere.
[23:53:20] <panicbit> frangio: Yup
[23:53:31] *** Joins: Wilduck (erik@moz-nm6qk8.mn.comcast.net)
[23:53:46] <mbrubeck> frangio: It would be a breaking change to alter that, so I'm sure it won't change.
[23:53:52] <panicbit> frangio: I had the same question. Someone here came up with some nice "proof by borrowck".
[23:54:28] <borromakot> say I have a bunch of literals, Strings and &str that I want to concatenate into one String.  What is the canonical way of doing so.
[23:54:39] <Wilduck> I‚Äôm hoping to debug a small rust program I wrote. It builds fine with `cargo build` but I‚Äôd like to run with a debugger attached, and can‚Äôt find any documentation on how to do that. Is there a simple command with gdb that I need to invoke?
[23:55:04] <panicbit> borromakot: Probably push everything into one string buf
[23:55:16] <mbrubeck> Wilduck: You can run `gdb target/debug/name_of_my_program`
[23:55:39] <mbrubeck> Wilduck: There are also some handy GDB scripts at http://michaelwoerister.github.io/2015/03/27/rust-xxdb.html
[23:55:39] <borromakot> panicbit: what sort of bothered me is that it doesn't look like I can chain the pushes.
[23:56:02] <borromakot> so it ends up as something like 10 lines of my_var.push_str(string)
[23:56:16] <Wilduck> mbrubeck: Thanks so much! That looks great.
[23:56:21] <panicbit> borromakot: You could use format!
[23:56:38] <panicbit> borromakot: Whoch would result in a long format string though
[23:56:42] <panicbit> which*
[23:56:58] <borromakot> panic: good idea though.  Let me try it out.
[23:57:04] <bluss> allowing chaining .push and .push_str wouldn't have any downsides though
[23:57:42] *** Joins: lov2cod (Adium@moz-g7k4j8.ca.comcast.net)
[23:57:43] <mbrubeck> borromakot: http://doc.rust-lang.org/std/slice/trait.SliceConcatExt.html#method.concat except it's unstable
[23:57:53] *** Joins: coryforsyth (coryforsyth@moz-ju3fri.NATPOOL.NYU.EDU)
[23:57:55] *** Quits: Asandari (Asandari@moz-emp96u.cable.teksavvy.com) (Ping timeout: 121 seconds)
[23:58:03] <bluss> .concat() is not actually unstable. Just the trait, not the method
[23:58:08] <frangio> panicbit: it may have been that something like `A { x: f(z), y: z }` doesn't work if f takes z by value (i.e. moves it out of scope). i had noticed this but i wasn't sure if this was consistent with code generation
[23:58:18] <bluss> (the trait is in the prelude)
[23:58:19] <mbrubeck> oh, it's in the prelude!
[23:58:21] <mbrubeck> cool
[23:58:22] <Dabo> borromakot, format!() or perhaps also using the '+' operator
[23:58:57] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
