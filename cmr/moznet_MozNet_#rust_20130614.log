[00:00:29] <xenocons> ive done a bit of C too, but never bothered with static i dont think
[00:00:40] <bblum> xenocons: static x means it's a compile-time constant, analogous to #define in C
[00:00:45] <bblum> let is what you use for all your variables
[00:00:52] <bblum> let is much more common
[00:00:58] <xenocons> bblum: well, shouldnt let x = 1 be a compile time constant too?
[00:01:04] <Eridius> bblum: #define isn't a constant in C at all, it's a blob of code that gets preprocessed in where referenced
[00:01:06] <aatch> in C, static just means "local to this compilation unit"
[00:01:10] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[00:01:11] <bblum> Eridius: phhhhbt
[00:01:19] <strcat> aatch: one of the things it means. ;p
[00:01:35] <bblum> xenocons: only in the sense of compiler optimizations... i mean more from a syntactic class standpoint
[00:01:40] <Eridius> xenocons: `let x = 1` is no different than `let x = n`. I hope it's obvious why the latter can't be used in an array expression
[00:01:52] <josh> strcat: thx
[00:01:55] <aatch> strcat, in normal C (not C++) that's the main definition.
[00:01:58] <xenocons> Eridius: yes, but in this case let x = 5 is known at compile time right?
[00:02:08] <strcat> aatch: it's still used in local scopes in C
[00:02:15] <strcat> and it has meaning in arrays
[00:02:19] <xenocons> let x = 1; [..x] should be easy for the compiler to work out
[00:02:21] <strcat> int foo[static 5]
[00:02:22] <bblum> xenocons: you couldn't define the formal grammar of rust if you allowed "special case" let-bound variables to be used in const position
[00:02:28] <xenocons> ah
[00:02:33] <xenocons> ok right
[00:02:40] <xenocons> yeah i can see that i think
[00:02:42] <heftig> the optimizer will work it out
[00:02:42] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[00:02:45] *** Joins: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de)
[00:03:06] <aatch> specifically, the pass is called constant propagation.
[00:03:17] <aatch> and we do three different kinds.
[00:04:01] <flu_> rusti: let arr = ~[0,1,2,3]; let x = arr[2]; x
[00:04:01] <heftig> aatch: does the optimizer know which functions are pure?
[00:04:02] -rusti- 2
[00:04:21] <aatch> heftig, kinda.
[00:04:27] <heftig> in the sense that they can be compile-time-evaluated
[00:04:28] <xenocons> does this create a problem when you want to pull 'non constant let bindings' into static bound variables? e.g. let s = ~"my string"; static slen : int = s.len(); probably wont work
[00:04:46] <bblum> true
[00:04:54] <Eridius> xenocons: it definitely won't work
[00:04:56] <aatch> heftig, for simple ones maybe. Though that gets covered by inlining.
[00:05:27] <strcat> heftig: LLVM won't really do compile-time evaluation of much
[00:05:33] <xenocons> ok this makes sense when you think about high performance 
[00:05:44] <xenocons> essentially must 'know' lengthof something at compile time
[00:05:46] *** cadecairos is now known as cade
[00:06:33] <MaikKlein> rusti: static a = 5;
[00:06:34] -rusti- <anon>:10:18: 10:19 error: expected `:` but found `=`
[00:06:34] -rusti- <anon>:10          static a = 5;
[00:06:34] -rusti-                             ^
[00:06:34] -rusti- application terminated with error code 101
[00:06:39] <aatch> LLVM knows about constant propagation, constant folding, dead-code elimination and instruction combining.
[00:06:40] <Eridius> statics need explicit types
[00:06:45] <xenocons> so this brings me back to another question heh, how can i print the length of a string as spaces ;)
[00:06:52] <MaikKlein> rusti: static a : int= 5;
[00:06:53] -rusti- ()
[00:07:08] <xenocons> was trying print(fmt!("\r %s",core::str::from_chars([' ', ..str.len() ])));
[00:07:18] <bblum> there should be a format specifier for that
[00:07:27] <aatch> rusti: let s = "123"; println(" ".repeat(s.len());
[00:07:27] -rusti- <anon>:11:4: 11:5 error: incorrect close delimiter: `}`
[00:07:27] -rusti- <anon>:11     }));
[00:07:27] -rusti-               ^
[00:07:27] -rusti- application terminated with error code 101
[00:07:29] <Eridius> rusti: print(std::str::repeat(" ", "foo".len()))
[00:07:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iYNA
[00:07:32] <MaikKlein> rusti: let s = ~"Hello"; static a : int= s.len(); a 
[00:07:32] <aatch> rusti: let s = "123"; println(" ".repeat(s.len()));
[00:07:33] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CbOa
[00:07:33] -rusti-    
[00:07:33] *** concrete.mozilla.org sets mode: +M 
[00:07:34] -rusti- ()
[00:07:43] <Eridius> ah repeat's dead. probably a method now
[00:07:46] <aatch> rusti: let s = "123"; println("-".repeat(s.len()));
[00:07:47] -rusti- ---
[00:07:47] -rusti- ()
[00:08:06] <MaikKlein> rusti: let s = ~"Hello"; static a : int= s.len(); a 
[00:08:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EUET
[00:08:55] <aatch> Ok, so what this actually mean: "error: value may contain borrowed pointers"
[00:09:03] <aatch> This is from the snapshot compiler
[00:09:24] <MaikKlein> rusti: let s = ~"Hello"; let a : int= s.len(); a 
[00:09:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/NVJF
[00:09:50] <MaikKlein> rusti: let s = ~"Hello"; let a : uint= s.len(); a 
[00:09:51] -rusti- 5
[00:09:56] <MaikKlein> rusti: let s = ~"Hello"; static a : uint= s.len(); a 
[00:09:57] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OFDg
[00:10:06] <MaikKlein> why doesn't this work again?
[00:10:21] <MaikKlein> is static in rust the same as static in java?
[00:10:32] <aatch> MaikKlein, not really.
[00:10:35] <bblum> aatch: you can't send borrowed pointers between tasks
[00:10:54] <strcat> bblum: should be able to send &'static
[00:10:59] <bblum> so you can't put them inside of heap closures
[00:11:03] <aatch> bblum, ahh, so it's because the closure is the wrong type.
[00:11:05] <xenocons> ok
[00:11:07] <bblum> strcat: well, but aatch wasn't trying to do that
[00:11:09] <xenocons> darn =M
[00:11:11] <xenocons> +M
[00:11:16] <aatch> Good to know.
[00:11:25] <MaikKlein> is static like a constexpression in c++?
[00:11:38] <bblum> MaikKlein: yeah but you can't call functions
[00:11:41] <strcat> pcwalton: ping
[00:11:51] <strcat> pcwalton: can you set /mode -f ?
[00:11:58] <strcat> the flood protection thing is really annoying
[00:12:11] <MaikKlein> rusti: let s = "Hello"; static a : uint= s.len(); a 
[00:12:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/fdUN
[00:12:17] <xenocons> i wonder if in the future of rust, some sugar can be developed to chain methods together? such that a().b().c().d() can be sugared to a.b.c.d.run; or something?
[00:12:18] <MaikKlein> ok
[00:12:30] <flu_> rusti: static s = ~"Hello"; static a: uint = s.len(); a
[00:12:30] -rusti- <anon>:10:18: 10:19 error: expected `:` but found `=`
[00:12:30] *** concrete.mozilla.org sets mode: -M 
[00:12:30] -rusti- <anon>:10          static s = ~"Hello"; static a: uint = s.len(); a
[00:12:30] -rusti-                             ^
[00:12:30] -rusti- application terminated with error code 101
[00:12:34] <MaikKlein> so it must be known to compile time
[00:12:38] <aatch> I'm trying to change CrateContext so we don't have the insanity that is having an @mut bool fields in it.
[00:12:41] <flu_> whoa
[00:13:11] <flu_> I guess it can't execute len() at compile time (obviously), so that's an error regardless
[00:13:38] <xenocons> should be able to do len on some stuff at compile time for optimization purposes
[00:13:52] <aatch> xenocons, it'll get optimized down anyway.
[00:13:55] <aatch> seriously.
[00:14:01] <flu_> xenocons: len() could be whatever. it could be a function to send leonard an email :-P
[00:14:02] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[00:14:33] <xenocons> doesn't knowing the length of certain things at compile time also help from a safety perspective (im kinda BSing a bit here)
[00:14:44] <MaikKlein> OMG OMG OMG https://github.com/mozilla/rust/pull/6661  is this already in incoming?
[00:14:54] <strcat> no
[00:14:56] <aatch> MaikKlein, you mean master.
[00:15:06] <xenocons> anyway, i would favour method reduction syntax at some stage
[00:15:22] <aatch> xenocons, it is very unlikely to happen
[00:15:28] <adu> xenocons: reduction?
[00:15:31] <xenocons> :(
[00:15:31] <aatch> since it conflicts with field access syntax
[00:15:33] <adu> what?
[00:15:49] <xenocons> adu: a().b().c() -> a.b.c.run
[00:15:54] <MaikKlein> I am confused is 0.7 now released?
[00:16:07] <strcat> no
[00:16:11] <strcat> incoming is gone
[00:16:18] <MaikKlein> oh
[00:16:35] <xenocons> aatch: yeah hm
[00:16:48] <aatch> if I have a struct with a field a and a method, a what would it call?
[00:16:59] <xenocons> yeah thats tricky
[00:17:05] *** Quits: lmandel (lmandel@CB3EC984.A5F785DE.396E4C6D.IP) (Quit: lmandel)
[00:17:18] <aatch> xenocons, it's not just tricky, it's impossible without introducing all sorts of strange rules.
[00:17:35] <adu> like rubyisms
[00:17:51] <adu> obj!!@@member
[00:18:03] <MaikKlein> oh, so we don't see FFI anytime soon?
[00:18:19] <aatch> MaikKlein, you mean decent FFI?
[00:18:25] <adu> MaikKlein: I was under the impression that you can already do FFI
[00:18:35] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[00:18:40] <strcat> you can
[00:18:43] <adu> http://static.rust-lang.org/doc/tutorial-ffi.html
[00:19:13] <MaikKlein> oh I mean external function pointers
[00:19:39] <adu> MaikKlein: just do the same thing with different stuff in extern {}
[00:19:39] <MaikKlein> thought that was 6661
[00:20:07] <MaikKlein> adu, I only know that bjz was waiting for it https://github.com/bjz/gl-rs
[00:20:22] * adu drools
[00:20:45] <adu> oh, so you're looking for dlsym()
[00:21:03] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[00:21:03] *** ChanServ sets mode: +o dherman
[00:21:09] <bblum> ping anybody who knows about TypeContents, ty.rs, kind.rs
[00:21:30] <strcat> nmatsakis: 
[00:21:38] *** Quits: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP) (Ping timeout)
[00:22:00] <bblum> is there any reason why not to generate TC_OWNED_CLOSURE + TC_OWNED_PTR, to avoid having a "TC_OWNED_CLOSURE" check in fn owned() and fn needs_drop(), for example?
[00:22:02] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[00:22:05] <xenocons> what about method wrappers so that methods can still be used as functions? fn applyMethod(myfn: fn<?>, x:methodType<?>) { return myfn.x(); } heh
[00:22:24] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:22:28] <bblum> if i want to make ~fn:Copy()s copyable, TC_OWNED_CLOSURE will rapidly become... not what it says on the tin
[00:22:36] <strcat> xenocons: methods will be usable as functions
[00:22:40] <flu_> heh.. downside of open source world, "Hey service provider, can you do X?" Service provider: "Go fix the open source library and we will update" - http://meta.stackoverflow.com/questions/184351/support-rust-language-syntax-highlighting-on-stack-overflow
[00:22:53] <xenocons> cool
[00:23:01] <Eridius> flu_: hah
[00:23:01] <graydon> good news is we will get up-to-date doc builds all the time now :)
[00:23:02] *** Joins: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP)
[00:23:13] <xenocons> so we could still 'chain' or methods together in a higher order sense?
[00:23:17] <strcat> flu_: huh. they do syntax highlighting client-side.... ?
[00:23:32] <aatch> graydon, has the website been updated yet?
[00:23:40] <strcat> graydon: still need to update the link ;p
[00:23:56] <flu_> strcat: apparently..? weird
[00:24:10] <strcat> xenocons: yes
[00:24:18] <strcat> T::method(self, a, b, c)
[00:24:19] <graydon> oh, oops
[00:24:30] <xenocons> cool
[00:24:31] <graydon> merged the pull req on that
[00:24:31] <xenocons> hrmm
[00:24:46] <strcat> graydon: is the web site in a private repo?
[00:24:55] *** Joins: koomi (koomi@moz-F77EEF5.pools.arcor-ip.net)
[00:25:11] <graydon> strcat: no. github.com/graydon
[00:25:14] <graydon> er
[00:25:16] <graydon> graydon/rust-www
[00:25:19] <engla> oh the api reference looks much better now
[00:25:19] <strcat> ah
[00:25:24] <graydon> gh-pages branch
[00:25:25] *** Quits: k00mi (koomi@moz-70872261.pools.arcor-ip.net) (Ping timeout)
[00:26:06] <xenocons> anyway, worst case we could fn getFileName(fs:&Path) -> ~str { return fs.to_str(); }
[00:26:13] <xenocons> and just build up compositions using that
[00:26:28] <graydon> aw, gh-pages doesn't republish within 10s of a merge. boo
[00:26:32] <graydon> gotta head out, ttyl
[00:26:37] <strcat> \o
[00:27:20] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:27:49] <xenocons> fn getStringLength(s:~str) -> int { return s.len(); } // but i think we should still be able to use std::str::len(str) anyway i guess?
[00:27:54] <xenocons> oh yeah
[00:28:08] <xenocons> is there a way to specify constraints on return types? such as maxint?
[00:28:33] <xenocons> fn getStringLength(s:~str) -> (int : .. MAX_PATH) { ... 
[00:28:33] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[00:29:04] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[00:29:06] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:29:53] <xenocons> brb
[00:30:04] *** Joins: skchrko__ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[00:30:07] *** Quits: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP) (Connection reset by peer)
[00:30:08] <bblum> ping anyone who knows about closure trans 
[00:30:09] <bblum> sully?
[00:30:14] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[00:30:15] *** Quits: graydon (graydon@moz-9918B407.vc.shawcable.net) (Quit: Leaving.)
[00:30:23] <sully> uh, I knew about closure trans two years ago
[00:30:27] <sully> you can ask me if you want, though
[00:30:35] <bblum> do you know about mk_opaque_closure_ptr
[00:30:54] <sully> it is familiar sounding
[00:31:22] <bblum> i'm trying to figure out if i need to thread BuiltinBounds in the ty_opaque_closure_ptr constructor
[00:32:23] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[00:33:11] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:33:22] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:34:31] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[00:34:48] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[00:35:23] <brson> I figured out how to reproduce the ebml failure under llc!
[00:35:32] <brson> the problem is -disable-fp-elim
[00:35:51] <aatch> what's disable-fp-elim?
[00:35:55] *** Quits: adu (ajr@moz-68CC2A5E.washdc.fios.verizon.net) (Quit: adu)
[00:36:10] <Eridius> disables floating-point elimination?
[00:36:14] <brson> frame-pointer
[00:36:22] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[00:36:55] <brson> we save the stack pointer in each frame so we can chase them in std::stackwalk
[00:37:02] <brson> i wonder if we're even using stackwalk
[00:37:20] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:37:38] <strcat> brson: is that for gc?
[00:37:43] <brson> strcat: yes
[00:38:26] *** Quits: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP) (Quit: carllerche)
[00:39:09] *** Quits: doomlord__ (servitor@moz-E0079CC.range86-145.btcentralplus.com) (Ping timeout)
[00:39:16] *** Quits: doomlord_ (walter@moz-E0079CC.range86-145.btcentralplus.com) (Ping timeout)
[00:39:18] *** Joins: doomlord_ (walter@moz-6651F8D4.range86-145.btcentralplus.com)
[00:39:36] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:39:40] *** Joins: doomlord__ (servitor@moz-6651F8D4.range86-145.btcentralplus.com)
[00:40:00] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[00:40:58] *** Quits: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de) (Ping timeout)
[00:41:07] *** Quits: tav (tav@moz-F726AA0B.range86-166.btcentralplus.com) (Quit: tav)
[00:41:25] <brson> it looks like graydon's gc doesn't use stackwalk. I'm going to remove it and turn on fp-elim
[00:41:46] <Eridius> std::condition appears to be completely undocumented. How do you use it?
[00:42:10] <brson> Eridius: I crib off the test cases
[00:43:08] <aatch> arghahragergle.
[00:43:36] <aatch> stupid heap closures.
[00:43:48] <bblum> i am making them better right now aatch 
[00:43:55] <bblum> unfortunately they will die shortly afterwards
[00:44:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[00:44:44] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[00:45:08] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:45:16] <aatch> bblum, well in order to continue what I'm doing, it looks like I'm going to have to re-write visitor...
[00:45:33] <bblum> wat. entirely?
[00:45:39] <aatch> or signficantly change something else.
[00:45:46] <aatch> well it uses @fn
[00:45:50] <brson> rewrite it without boxes
[00:45:55] <brson> yes please
[00:46:47] <aatch> The things I do in the name of trying to make trans sane
[00:46:49] <brson> oh maybe you are talking about the ast visitor
[00:46:54] <aatch> brson, yes
[00:47:01] * brson was thinking of the reflection visitor
[00:47:09] <Eridius> rusti: do std::str::not_utf8::cond.trap(|x| println(fmt!("%?", x)); ~"foo").in { std::str::from_bytes(bytes!("test", 0xFF)) }
[00:47:09] -rusti- <anon>:10:68: 10:69 error: expected `,` but found `;`
[00:47:09] -rusti- <anon>:10          do std::str::not_utf8::cond.trap(|x| println(fmt!("%?", x)); ~"foo").in { std::str::from_bytes(bytes!("test", 0xFF)) }
[00:47:09] -rusti-                                                                               ^
[00:47:09] -rusti- application terminated with error code 101
[00:47:25] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[00:47:30] <Eridius> rusti: do std::str::not_utf8::cond.trap(|x| { println(fmt!("%?", x)); ~"foo" }).in { std::str::from_bytes(bytes!("test", 0xFF)) }
[00:47:31] -rusti- error: internal compiler error: unexpected failure
[00:47:31] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[00:47:31] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[00:47:31] -rusti- application terminated with error code 101
[00:47:35] <Eridius> woooo!
[00:47:52] <aatch> since I have structure with borrowed pointers, I can't pass it around the visitor...
[00:48:26] <aatch> I might just be naughty and get it in unsafely.
[00:50:36] <flu_> wrap it before you map it! 
[00:53:01] *** Joins: adu (ajr@moz-68CC2A5E.washdc.fios.verizon.net)
[00:53:11] <EXetoC> xenocons: assert?
[00:53:30] <EXetoC> maybe you want something like D's out contract
[00:53:38] <xenocons> EXetoC: meh, more like ada ;)
[00:54:10] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[00:54:54] <xenocons> type mytype is array(1..MAX_PATH) of CHARACTER; 
[00:55:11] <xenocons> then fn f(s:~str) -> mytype { ... }
[00:55:11] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[00:55:20] <xenocons> what behaviour on failure though i wonder
[00:55:39] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:56:33] <flu_> jeez, meta stackoverflow folks are some haters :-P
[00:56:41] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:57:00] <Eridius> what the.. rust-lang's docs are now pointing at doc.rust-lang.org instead of static.rust-lang.org, but doc. doesn't exist
[00:57:43] <strcat> Eridius: loads fine here
[00:57:56] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:58:10] <Eridius> strcat: `dig doc.rust-lang.org` comes up with nothing
[00:58:27] <Eridius> the dns server i'm using may have a cached NXDOMAIN if it's brand new
[00:58:47] <strcat> well it loads here
[00:58:55] <strcat> ;; ANSWER SECTION:
[00:58:57] <strcat> doc.rust-lang.org. 300 IN A 199.59.163.239
[00:59:25] <Eridius> huh, I just ran the exact same dig and it came back with an answer now
[00:59:31] <Eridius> must have just expired
[00:59:46] <Eridius> why do we pop through doc.rust-lang.org anyway, when it just redirects to static.
[00:59:54] <strcat> dunno
[00:59:55] <flu_> would be nice if: both doc and static rust-lang.org had a friendly index page, rather than S3 OMGWTFXML blob :/
[01:01:10] <strcat> Eridius: dig is dead anyway (on linux) ;p
[01:01:12] <strcat> drill!
[01:01:16] <Eridius> drill?
[01:01:27] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[01:01:39] <strcat> Eridius: the modern replacement, since dig became a horror
[01:01:51] <Eridius> never herad of it
[01:02:00] * aatch cries
[01:02:01] <strcat> dig requires almost all of bind since bind10
[01:02:20] <strcat> it's just a python script talking to the lib now
[01:02:50] <aatch> so much refactoring, then BAM, LLVM assertion
[01:02:58] <strcat> Eridius: https://www.nlnetlabs.nl/projects/ldns/
[01:03:02] <flu_> what happened to std::num ? libstd/num.rs is missing on master...
[01:03:21] <aatch> flu_, it's in the num/ folder
[01:03:54] <flu_> aatch: huh, must have moved with the incoming -> master merge
[01:04:31] <Eridius> cmr: are you around?
[01:04:52] <cmr> Eridius: Yes
[01:04:57] <cmr> Perfect timing, just got back :)
[01:05:00] <cmr> What's up?
[01:05:08] <Eridius> cmr: I'm taking a crack at enhancing terminfo::parm
[01:05:18] <Eridius> two jobs: 1) get rid of task failure, and 2) add support for conditionals
[01:05:22] <Eridius> because I want mah colors ;)
[01:05:30] <cmr> There shouldn't be task failure anymore
[01:05:33] <Eridius> anyway, for #1, I'm concerned about the sta and dyn vectors
[01:05:38] <cmr> If there is, I forgot to send in a PR
[01:05:50] <cmr> Oh, the assertions?
[01:05:51] <Eridius> cmr: no? just use %Pa as a cap and pass [] as your static
[01:06:02] <Eridius> no this is indexing into a vector that's too small
[01:06:07] <cmr> Ah
[01:06:21] <cmr> Yeah I should probably check through that.
[01:06:22] <Eridius> although you also do have an assertion if a character constant is malformed, e.g. %'dx, which is bad
[01:06:38] <cmr> ncurses scans the cap string ahead of time to see what it needs
[01:06:42] <cmr> Eridius: I have that fixed locally
[01:06:44] <Eridius> cmr: anyway my thought was to change the sta and dyn from &mut [Param] to &mut ~[Param], which will let it resize the vector as needed
[01:07:10] <Eridius> with the small downside of having to say &mut ~{] if you don't care when calling
[01:07:25] *** Quits: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[01:07:28] <Eridius> alternatively it can just return an error if the vector ends up being too small
[01:07:49] <cmr> extra::term and other libraries are probably going to be the only consumers of the API so it doesn't need to be very convenient.
[01:07:50] <Eridius> although I do wonder at the <=26 check. Passing a larger vector won't hurt anything
[01:08:04] *** Quits: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP) (Quit: josh)
[01:08:12] <xenocons> is .repeat a method in 0.6 release
[01:08:25] *** Joins: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP)
[01:08:26] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[01:08:47] <xenocons> rusti: "\x08".repeat(5)
[01:08:48] -rusti- ~"\x08\x08\x08\x08\x08"
[01:08:50] <Eridius> cmr: seems to me the other assertions could be turned into just error strings as well
[01:08:53] <cmr> It doesn't hurt, but it's invalid and I thought it was a good idea to catch that as a failure.
[01:08:54] *** Quits: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP) (Quit: josh)
[01:09:31] <xenocons> rusti: print("\x08".repeat(5);
[01:09:31] -rusti- <anon>:11:4: 11:5 error: incorrect close delimiter: `}`
[01:09:31] -rusti- <anon>:11     }));
[01:09:31] -rusti-               ^
[01:09:31] <cmr> But generally returning a Result is better than failing the task, so converting them to Err's sounds like a good idea to me :)
[01:09:31] -rusti- application terminated with error code 101
[01:10:01] <xenocons> uh suddenly shell lag
[01:10:08] <Eridius> cmr: another alternative is to define a struct that contains two [Param, ..26] arrays, and require that struct
[01:10:14] *** Quits: adu (ajr@moz-68CC2A5E.washdc.fios.verizon.net) (Quit: adu)
[01:10:32] <xenocons> rusti: print("\x08".repeat(5));
[01:10:33] -rusti- ()
[01:14:12] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:14:26] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:14:39] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:16:37] <dbaupp> xenocons: no .repeat() was str::repeat("foo", 10) in 0.6
[01:16:55] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Ping timeout)
[01:17:34] <aatch> Suprise, suprise, glue is breaking things.
[01:19:20] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:19:24] <xenocons> yup, got it
[01:19:30] <xenocons> ty
[01:20:16] <Eridius> dammit, I can't use `make check-stage1-std NO_REBUILD=1`. I'm getting task failure inside ascii.rs
[01:20:24] <cmr> Eridius: I would be very appreciative if you added conditional expression support. I've been super busy this week and haven't gotten around to it.
[01:20:57] <Eridius> cmr: I'll do my best
[01:21:15] <Eridius> cmr: I think I'm gonna remove the cap.len() check entirely. If I pass an empty capability, just give me an empty response.
[01:21:53] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:22:06] <Eridius> and I'm gonna remove the params.len() check too. The syntax of capability strings prevents accessing any parameters > 9. There's no need to yell at the programmer for providing extra unused parameters
[01:22:17] <Eridius> it's not like it complains if the cap string only uses 2 params and the programmer provies 5
[01:22:55] <Jeaye> What did str::to_bytes become?
[01:23:05] <aatch> Jeaye, "".to_bytes
[01:23:10] <cmr> Eridius: In my perusal of common terminals' cap strings, there aren't any *nested* conditional expressions, so once you have a matched arm, you should be able tos kip to the %;
[01:23:10] <dbaupp> Jeaye: .as_bytes() -> &'self [u8]
[01:23:27] <Jeaye> Ah, as_bytes
[01:23:34] <Jeaye> aatch: Tried that. :P
[01:23:37] <dbaupp> Jeaye: (I think .to_bytes() works too, from IterBytes)
[01:23:38] <Eridius> cmr: good to know. I'd rather do it "correctly", but if that's too complicated I may cheat
[01:23:42] <dbaupp> maybe?
[01:23:45] <Jeaye> rust-buildbot: "foo".to_bytes()
[01:23:48] <Eridius> cmr: this is assuming, of course, that you can even nest conditionals at all
[01:23:50] <Jeaye> rusti: "foo".to_bytes()
[01:23:52] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ETAK
[01:23:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[01:23:56] <Jeaye> rusti: "foo".as_bytes()
[01:23:57] -rusti- &[102, 111, 111]
[01:23:58] <cmr> Eridius: I didn't test to see how ncurses handles it.
[01:24:04] <cmr> It's not mentioned in the spec or any docs
[01:25:45] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:27:21] <Eridius> cmr: what does ncurses do if you don't provide enough parameters?
[01:27:44] <cmr> Eridius: uh, didn't check. tput just uses the empty string as the parameter
[01:27:48] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[01:27:57] <Eridius> `tput setaf` is actually just spitting out the capability string for some reason
[01:27:59] <cmr> The ncurses code is kind of a mess :p
[01:28:08] <pcwalton> down to one failure in reachable, which is due to calling a private method cross-crate
[01:28:12] <pcwalton> grr, I thought we forbade that
[01:28:32] <Eridius> cmr: the manpage on tparm suggests that other implementations use a fixed 9-element vector of parameters, and that it's ok to just use 0's for unused params
[01:28:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:28:48] <cmr> Eridius: It's ncurses/tinfo/lib_tparm.c if you're interested
[01:29:00] <Eridius> cmr: I want to copy the params into a local [Param, ..9] so mutability doesn't actually affect the caller, but I need something to initialize it with
[01:29:04] <xenocons> 1k page faults per second :<
[01:29:09] <xenocons> rather large
[01:29:10] <Eridius> I think Number(0) is the likely candidate
[01:29:20] <cmr> Sure
[01:30:40] <Eridius> yeah ncurses is using 0
[01:30:40] <Jeaye> Hmm, so from str to &[~[u8]] I did have src.map(|x| (*x).as_bytes()) but now str.as_bytes returns &[u8
[01:30:44] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[01:31:01] <Jeaye> &[u8]
[01:31:10] <dbaupp> Jeaye: you can use .to_owned() to get a ~[u8]
[01:31:17] <Jeaye> I know... but. :(
[01:31:26] <Jeaye> I was hoping not to duplicate.
[01:31:27] <aatch> Jeaye, specifically, it gives a &'r [u8], so it lasts for as long as the source string.
[01:31:36] <cmr> Jeaye: well to_bytes copied
[01:31:36] <dbaupp> (but do you really need it, because lifetimes mean that using &[&[u8]] should often work)
[01:31:44] <bblum> huh. actually pretty surprisingly... none of the libraries appear to need to copy stack closures.
[01:31:51] <Jeaye> cmr: And then copy again to get it owned? :|
[01:32:06] <nmatsakis> anyone know why set_memory is cfg(not(stage0))?
[01:32:10] <nmatsakis> strcat: ^
[01:32:11] *** Parts: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP) ()
[01:32:24] <strcat> nmatsakis: because I added the memset intrinsic
[01:32:29] <dbaupp> Jeaye: a lot of stuff from str was destroyed, especially the redundant/allocating methods (where possible)
[01:32:44] <dbaupp> Jeaye: but, no, .to_bytes() did one allocation/copy
[01:32:54] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[01:32:58] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[01:32:58] <dbaupp> it was literally equivalent to .as_bytes().to_owned()
[01:33:06] <nmatsakis> strcat: ok. I guess I could make a stage0 vesion that actually calls memset
[01:33:25] <Jeaye> dbaupp: So it's really the same now, it just looks worse? :P
[01:33:33] <aatch> Jeaye, any time you get a @ or ~ back from a function, that's an allocation.
[01:33:33] <strcat> nmatsakis: or do a snapshot ;p
[01:33:38] <dbaupp> Jeaye: yes
[01:33:40] <dbaupp> aatch: not always
[01:33:43] <aatch> snapshot! snapshot!
[01:33:47] <aatch> dbaupp, true.
[01:33:48] <Jeaye> aatch: No, it could be a move with ~
[01:33:52] *** Quits: koomi (koomi@moz-F77EEF5.pools.arcor-ip.net) (Ping timeout)
[01:33:58] <nmatsakis> strcat: not it!
[01:33:58] <aatch> Ok, but often.
[01:34:21] <dbaupp> aatch: yeah
[01:34:22] <nmatsakis> strcat: oh, you omitted libc::memset! :)
[01:34:28] <strcat> nmatsakis: yeah :p
[01:34:59] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[01:35:10] <dbaupp> Jeaye: it looks worse, but people really should (and can) be avoiding allocations as much as possible, since the region system is so powerful
[01:35:25] <xenocons> hrm os::list_dir_path seemed to finda file that doesnt exist
[01:35:39] <nmatsakis> strcat: I was thinking we could probably make a simple version of python-like generators as a syntax extension
[01:35:43] <xenocons> must be symlink
[01:35:45] <cmr> xenocons: Ah, the case of the phantom dent
[01:35:52] <nmatsakis> strcat: to make it easier to make external iterators
[01:35:58] <cmr> xenocons: Your computer is cursed!
[01:36:08] <xenocons> heh
[01:36:14] <Jeaye> dbaupp: This is an interface Servo gave me; I don't really have a choice. :P
[01:36:17] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[01:36:19] <strcat> nmatsakis: that would be cool
[01:36:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:36:34] <dbaupp> Jeaye: oh, right :( ... change servo?
[01:36:46] <Jeaye> heh
[01:36:55] <aatch> Hmm, what cases normally cause bad signature assertions in LLVM?
[01:36:55] <dbaupp> (that's not entirely a joke)
[01:37:32] <bblum> oh wait i take that back :x
[01:37:50] <nmatsakis> strcat: though it seems like we're missing an easy wait to make a macro/syntax-extension that accepts "Rust grammar plus a new keyword"
[01:38:08] <Jeaye> dbaupp: Yeah, I know. If It's still like that after the next lang update I might just submit a PR. They're a bit behind on the Rust version though, so we'll see what changes.
[01:38:12] <nmatsakis> strcat: just need to make extensible grammars like in polygot (http://www.cs.cornell.edu/Projects/polyglot/)
[01:38:12] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Input/output error)
[01:38:13] <Jeaye> This is for rust-opengles
[01:38:46] <dbaupp> even better to avoid allocations! :)
[01:39:35] <strcat> nmatsakis: or we could add a yield keyword :)
[01:40:57] <Jeaye> Is incoming gone?!
[01:41:05] <nmatsakis> pcwalton: I think I found the origin of those segfaults, though I'm testing my hypothesis now...
[01:41:10] <nmatsakis> Jeaye: yessir.
[01:41:15] <Jeaye> Woo!
[01:41:28] <Jeaye> nmatsakis: Cheers.
[01:41:51] <pcwalton> nmatsakis: ok
[01:41:53] <SiegeLord> Does rustdoc document publically use'd modules?
[01:42:20] <dbaupp> steven_is_false: what version of rustc do you have? (because rusti was recently entirely rewritten)
[01:42:35] <cmr> ohh, that landed?
[01:42:44] <dbaupp> I think so
[01:42:59] *** Quits: moonchrome (moonchrome@moz-13C86C1C.dsl.iskon.hr) (Quit: Leaving)
[01:43:21] <steven_is_false>  dbaupp: I just compiled a bit ago after learning incoming was deleted.
[01:43:34] <dbaupp> steven_is_false: what hash? (rustc -v)
[01:43:55] <steven_is_false> /usr/local/bin/rustc 0.6 (b417bc8 2013-06-13 15:41:34 -0600) host: x86_64-unknown-linux-gnu
[01:43:55] <steven_is_false>  
[01:44:01] <brson> strcat: bisecting fingers 96cd61ad034cc9e88ab6a7845c3480dbc1ea62f3 as the culprit for the crashes in compile-fail tests, which is surprising (maybe I did it wrong)
[01:44:28] <dbaupp> steven_is_false: oh... looks like you have got the new rusti
[01:44:49] <dbaupp> brson: sorry :(
[01:44:53] <strcat> brson: there were more commits in that merge though, I think it's pointing the finger at the whole merge
[01:45:11] * strcat could be wrong
[01:45:26] *** Quits: eholk (eholk@moz-F2365EC7.uconnect.utah.edu) (Quit: eholk)
[01:45:45] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:46:15] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:47:01] <dbaupp> brson: cc80652e4a627378a36b50fab9e72349129cb56a is the merge commit
[01:47:48] * strcat is guessing that it's a bug in handling of self
[01:49:15] <dbaupp> all the new methods in that commmit take either &self or &mut self except for 'as_bytes_with_null_consume'
[01:49:40] <aatch> It works!
[01:49:59] <Jeaye> Ship it!
[01:50:21] <aatch> Well, at the very least stage0 doesn't explode on it.
[01:50:36] <cmr> Eridius: I have a commit on my terminfo branch (github.com/cmr/rust)
[01:50:45] <pcwalton> hmm, so rewriting reachable was a 45 second (16%) improvement in LLVM passes for librustc and a 7 second (35%) regression in LLVM passes for libsyntax
[01:50:47] <pcwalton> overall a nice win
[01:50:50] <pcwalton> the regression is strange
[01:50:52] <pcwalton> also this is -O0
[01:51:12] <aatch> I'm trying to refactor CrateContext.
[01:51:38] <pcwalton> you're brave :)
[01:51:50] <aatch> pcwalton, well I'm doing it in stages.
[01:52:00] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[01:52:09] <nmatsakis> pcwalton: you rewrote reachable how?
[01:52:10] <pcwalton> given those large perf swings based on adjusting whether symbols are Internal or not
[01:52:18] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[01:52:19] <pcwalton> nmatsakis: just to be more accurate about what symbols need to be Inernal
[01:52:20] <pcwalton> Internal
[01:52:25] <nmatsakis> pcwalton: ok.
[01:52:29] <Eridius> cmr: I don't see a terminfo branch. Did you remember to push it?
[01:52:35] <pcwalton> I think it makes sense to write a tool to look at all the symbols exported by libsyntax
[01:52:43] <pcwalton> and to make note of those which are NOT used by librustc
[01:52:48] <cmr> pcwalton: `nm`?
[01:52:49] <pcwalton> likewise, for librustc and consumers of librustc.
[01:52:54] <cmr> Eridius: sorry, just pushed :)
[01:52:56] <aatch> step one is making it be taken as @mut or &mut, so it doesn't need all those mutable heap objects in it.
[01:52:57] <pcwalton> cmr: it would wrap nm
[01:53:01] <cmr> pcwalton: ah
[01:53:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.3.8)
[01:53:26] <nmatsakis> pcwalton: even intra-crate it might be nice, we often have things marked pub that are actually priv
[01:53:27] <pcwalton> unfortunately it's...somewhat stymied by the fact that privacy is still checked in resolve
[01:53:35] <pcwalton> so you have to make a lot more public than you need to
[01:53:36] <Eridius> cmr: nice, I'll rebase my work on top of that
[01:53:44] <nmatsakis> pcwalton: oh, I thought you fixed that? I guess only partially, huh?
[01:54:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:54:20] <Eridius> cmr: although, your impl of %! looks odd to me. Typically non-zero is considered true, but instead you have non-1 considered false
[01:54:25] <Eridius> I don't know what ncurses does though
[01:54:50] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.4.1)
[01:54:50] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:54:58] <cmr> Eridius: 1 is true, 0 is false.
[01:55:05] <Eridius> cmr: 2 is also false in that code
[01:55:12] <cmr> Eridius: The spec explicitly specifies that.
[01:55:15] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:55:29] <Eridius> cmr: I'm reading the terminfo manpage. Is there a real spec hidden somewhere?
[01:55:30] *** Parts: ecr (ereed@2557E599.66715431.D25A875A.IP) ()
[01:55:35] <cmr> Eridius: yes, hang on
[01:55:36] <strcat> posix, I guess
[01:55:40] <cmr> http://pubs.opengroup.org/onlinepubs/7908799/xcurses/terminfo.html
[01:55:56] <cmr> I didn't look to see if susv3 updated it though
[01:56:04] <Eridius> thanks
[01:57:31] <Eridius> cmr: I'm not seeing where the actual parameterized string format is defined
[01:59:38] <cmr> Eridius: hm, maybe I was confusing it with terminfo(5) :(
[02:00:27] <Eridius> cmr: yeah ncurses uses C's interpretation of booleans, which means nonzero is true
[02:01:15] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:01:45] <Eridius> cmr: same with the other logic operations
[02:04:19] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[02:06:32] <brson> dbaupp: reverting the to_owned commit does seem to make make the compile-fail tests complete reliably. I'm going to push this to master
[02:07:02] <dbaupp> brson: that one commit, or the whole merge?
[02:07:15] <brson> just that commit
[02:07:44] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[02:08:07] <dbaupp> cool! :)
[02:09:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.4.1)
[02:09:39] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:09:39] <ghrust> 01[13rust01] 15brson pushed 1 new commit to 06master: 02http://git.io/USQJAQ
[02:09:39] <ghrust> 13rust/06master 147755018 15Brian Anderson: Revert "std: convert {vec,str}::to_owned to methods."...
[02:09:39] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:10:14] <brson> so that's two of the three problems I know about on master. the last is this ebml miscompilation that I think is related to fp elimination
[02:10:25] <brson> not going to figure that out tonight though
[02:12:18] <Eridius> if I want to copy from one &[T] into another &[T], copying only the shorter of the two (basically Go's copy()), is there anything simpler than dst.mut_iter().zip(src.iter()).advance |(a, &b)| { *a = b; }
[02:13:04] <dbaupp> Eridius: probably not yet
[02:13:10] <pcwalton> we should write that
[02:13:11] *** Quits: kimundi (kimundi@moz-EEEA017A.dip0.t-ipconnect.de) (Ping timeout)
[02:13:17] <bstrie> Eridius: write us a go_copy_slice_to_slice() function
[02:13:23] <pcwalton> I think there is a vec::u8:copy_bytes though
[02:13:47] <nmatsakis> strcat: ping
[02:13:59] <strcat> nmatsakis: pong
[02:14:10] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[02:14:14] <nmatsakis> strcat: unless my local code is way out of date, I think the copy_memory intrinsics you added are incorrect
[02:14:15] <aatch> Ok, now I have dynamic freezing errors.
[02:14:38] <nmatsakis> strcat: in particular, the docs say they copy `n` elements but they seem to copy `n` bytes
[02:14:48] <nmatsakis> strcat: the stage0 versions copy elements
[02:14:51] *** Joins: eagen (eagen@moz-92A457CB.hsd1.mn.comcast.net)
[02:14:53] <strcat> hrm, sec
[02:15:01] <nmatsakis> strcat: and the calls to them seem to expect elements :)
[02:15:07] <cmr> nmatsakis: I remember looking at the commit and thinking the same thing but concluded that it was correct.
[02:15:11] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[02:15:11] <strcat> nmatsakis: it's because I moved the logic into the intrinsics
[02:15:17] <strcat> nmatsakis: because they now pass along the alignment to LLVM
[02:15:24] <strcat> nmatsakis: they're parameterized by T
[02:15:26] <nmatsakis> strcat: ah, ok.
[02:15:55] <strcat> it was for micro-optimizing swaps ;p
[02:16:07] <nmatsakis> strcat: yes, I recall.
[02:16:12] *** Joins: kimundi (kimundi@moz-CF22727E.dip0.t-ipconnect.de)
[02:16:36] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[02:17:07] <Eridius> pcwalton: yeah there's a copy for &[u8], but it would be nice to have one for T:Copy
[02:17:20] *** kimundi is now known as zz_kimundi
[02:17:28] <strcat> Clone*
[02:17:33] <Eridius> err yeah
[02:17:34] *** Joins: Guest__ (textual@moz-E64A54F3.nyc.res.rr.com)
[02:18:12] <nmatsakis> strcat: too bad, it would have explained why my code's not working ;)
[02:19:24] *** Quits: Guest__ (textual@moz-E64A54F3.nyc.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:19:35] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[02:20:55] <Eridius> pcwalton: is std::vec::copy<T>() an appropriate name, or do you have a better idea?
[02:22:13] <pcwalton> sounds good to me although copy is currently a keyword
[02:22:25] <Eridius> oh bah
[02:22:26] <pcwalton> (won't be in the future, but it is now)
[02:22:38] <pcwalton> blit()?
[02:22:49] <dbaupp> Eridius: copy_into()
[02:22:49] <dbaupp> ?
[02:23:00] <Eridius> pcwalton: hah. cute, but someone's not gonna find that by searching the page
[02:23:01] <dbaupp> (it should probably be a method, also.)
[02:23:33] <Eridius> dbaupp: I suppose copy_from() could work if it's a method in the MutableVector trait
[02:23:46] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[02:24:09] <strcat> it probably shouldn't just be on vectors
[02:25:33] <Eridius> strcat: a variant that works on iterators might be nice, but won't be much simpler than the current iterator solution
[02:25:58] <strcat> well we need an Iterable trait
[02:26:04] <Eridius> true
[02:26:07] <strcat> I don't think we should add more vec/str methods we'll only end up removing
[02:26:10] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:26:21] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:26:21] <strcat> need default methods to work
[02:26:33] <cmr> sully: how's the work on that coming?
[02:26:55] <sully> moving forward
[02:27:06] <sully> landed a bunch of fixes
[02:27:10] <sully> working on cross crate stuff now
[02:27:28] <cmr> wonderful
[02:29:02] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[02:29:02] *** ChanServ sets mode: +o tjc
[02:31:12] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[02:32:34] *** Quits: CMCL_ (cmcl@moz-8C2E912C.co.uk) (Client exited)
[02:32:47] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[02:33:11] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:33:19] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:33:25] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[02:33:46] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[02:34:20] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[02:35:34] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[02:36:21] <Eridius> why do the standard libraries still use `core` internally?
[02:36:52] <dbaupp> Eridius: for imports? because the snapshot still uses core
[02:37:23] <Eridius> dbaupp: am I going to run into a problem if I `use core::iterator::IteratorUtil`?
[02:37:39] <dbaupp> not in the rust codebase
[02:37:57] <Eridius> so the snapshot will know that?
[02:38:33] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[02:39:11] <dbaupp> I'm not sure I understand... but that's what I've been doing when I need iterators, and nothing's exploded yet
[02:39:17] <Eridius> ok good
[02:39:30] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:39:54] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[02:40:06] <cmr> dbaupp: any idea why the to_owned() commit broke things non-deterministically? Miscompilation maybe?
[02:40:12] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[02:40:46] <dbaupp> cmr: no idea at all, I'm pretty sure I just copied the body of the functions to the methods without any change other than renaming things to `self`
[02:40:54] * dbaupp is confused
[02:41:02] <cmr> so weird :s
[02:41:03] <aatch> what was the break?
[02:41:05] <Eridius> cmr: here's what I have so far on terminfo: https://github.com/kballard/rust/commits/terminfo-parm
[02:41:24] * Eridius will continue working later tonight and tomorrow on doing the actual conditional support
[02:41:49] <dbaupp> aatch: converting {str,vec}::to_owned to methods made something in cfail segfault occasionally
[02:41:51] <cmr> Eridius: you are awesome, thank you :)
[02:42:00] <aatch> dbaupp, weird
[02:42:04] <dbaupp> (I never saw it, so I'm not sure if it was the test or the compiler, or what.)
[02:42:11] <cmr> The "ref mut" trick is neat, I didn't know about that
[02:42:18] <Eridius> cmr: I got tired of losing colors halfway through compilation ;)
[02:42:27] <Eridius> but anyway, I need to head out and meet friends at a bar
[02:42:41] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[02:43:22] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:43:59] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[02:47:02] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:47:28] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[02:49:36] <erickt1> Hey all, is master safe to use? or is it still getting cleaned up?
[02:49:49] <cmr> Initial draft of twir at https://gist.github.com/cmr/a4dd556565a87cdbea85, pitch in if you want something added :)
[02:49:58] <dbaupp> erickt1: both?
[02:50:03] <cmr> (Haven't gone through the week's PRs yet though)
[02:50:07] <erickt1> dbaupp: heh
[02:50:12] <dbaupp> (depending on platform, I guess)
[02:50:29] <erickt1> cmr: I was just going to ping you. Sorry I wasn't around during the day
[02:50:38] <cmr> erickt1: np
[02:50:43] *** Quits: eagen (eagen@moz-92A457CB.hsd1.mn.comcast.net) (Quit: Leaving)
[02:52:10] <erickt1> cmr: can you add something like "if you would like to give a presentation at the next meetup in July, please send erick your proposal and how long you need to put it together"
[02:52:54] <erickt1> cmr: brson took a pic and posted it to the mailing list if you want to include it
[02:53:10] <dbaupp> cmr: a lot (i.e. all the ones that aren't converting to a str, or for interacting with FFI) of the functions in str are now methods
[02:53:24] <dbaupp> (as well as just the ones that are iterators)
[02:54:02] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[02:55:03] <dbaupp> cmr: (also, the incoming-removal has happened)
[02:55:22] <aatch> Wow, fixing dynamic borrow errors is like all the worst parts of regular borrow errors and being punched in the face repeatedly.
[02:55:48] <dbaupp> cmr: (which you mention in Meetings, as under discussion)
[02:56:13] <cmr> dbaupp: I have a whole subsection under "What's cooking in incoming" for it
[02:56:22] <cmr> "`incoming` branch annihilated"
[02:56:30] <dbaupp> cmr: yeah, I just noticed.. heh
[02:58:58] <cmr> erickt1: I don't see the picture anywhere?
[02:59:17] <erickt1> maybe he sent it to just me...
[03:00:23] <dbaupp> strcat: I think iterator.chain is misnamed, and the method of that name should act like >>= (i.e. `fn (self<A>, fn(A) -> Iterator<B>) -> Iterator<B>`), since that's what result.chain and option.chain do
[03:01:22] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:02:42] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[03:03:12] <erickt1> cmr: I sent you a msg
[03:06:49] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:06:57] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:08:41] <steven_is_false> Jeaye: I'm so close to getting q3 working! I had to update a little bit to get it build with the latest master, but now I'm getting a mysterious error creating the window
[03:09:31] <strcat> dbaupp: it's what it does in other languages
[03:09:48] <strcat> dbaupp: the option/result ones are weird
[03:09:56] <dbaupp> strcat: well, then we need to change the other ones to something other than chain
[03:10:27] <aatch> ok, turning on borrow debugging makes this much, much easier.
[03:10:50] *** Joins: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com)
[03:12:42] <dbaupp> strcat: 'bind' ala Haskell?
[03:13:02] <strcat> yesm something like that
[03:13:18] <strcat> but they aren't really bind
[03:16:20] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[03:16:23] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Client exited)
[03:18:59] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[03:19:23] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[03:20:09] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[03:21:32] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[03:21:34] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[03:23:23] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Ping timeout)
[03:26:13] <aatch> Yay, my changes bootstrap!
[03:28:44] <dbaupp> aatch: :D do they check?
[03:28:46] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[03:28:59] <aatch> dbaupp, I'm making sure it does a full compile first.
[03:29:13] <dbaupp> that seems like a reasonable first step
[03:29:43] <aatch> What I meant was that it builds a compiler than can completely build something else.
[03:29:53] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[03:31:09] <aatch> Also - wow, the snapshot is slow compared to the current rustc
[03:31:44] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[03:31:48] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[03:32:01] * dbaupp wants a snapshot
[03:32:22] <aatch> dbaupp, you and me both.
[03:32:34] <aatch> The amount of borrowck workarounds I've had to do.
[03:33:18] <dbaupp> is it still the mac-bots not configuring that
[03:33:25] <dbaupp> 's blocking a snapshot?
[03:33:37] <aatch> dbaupp, partially.
[03:33:51] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[03:33:52] <aatch> there's also a wierd encoding error that only happens occasionally.
[03:34:50] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[03:35:17] <aatch> Or more accurately, always happens on incoming-full, but I can't reproduce it locally...
[03:36:38] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[03:36:53] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:36:57] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[03:38:16] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:38:23] <aatch> Hows this for wierd: there is a path in trans::consts that is only exercised by libsyntax
[03:40:15] <Jeaye> steven_is_false: hmm
[03:40:20] <dbaupp> aatch: nice... what's it doing?
[03:40:50] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:40:57] <Jeaye> steven_is_false: Try pulling master
[03:41:27] <steven_is_false> Jeaye: kay
[03:41:33] <aatch> not sure.
[03:42:26] <Jeaye> steven_is_false: That should solve the lang errors with the latest incoming/master. I'm interested in your glfw errors.
[03:42:57] <steven_is_false> Jeaye: It was really simple.
[03:43:03] *** Joins: sankha93 (Instantbir@42B82B5.B1950BBF.8B6C1D65.IP)
[03:43:05] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[03:43:13] <aatch> looks like it's making a static variable with an expression.
[03:43:19] <steven_is_false> Jeaye: You set a few hard hint requirements my system didn't meet.
[03:43:27] <steven_is_false> Jeaye: That's fine.
[03:43:39] <Jeaye> steven_is_false: For OpenGL version?
[03:44:02] <steven_is_false> Jeaye: Yeah
[03:44:50] <Jeaye> I rely strongly on 3.3 features, but have a 3.2 context and hope very much that the features I want are available as extensions (this is required to support Mac).
[03:45:01] <Jeaye> steven_is_false: What version of OpenGL do you support?
[03:45:47] <steven_is_false> Jeaye: Only 2. something on my laptop but it's fair enough that if q3 doesn't support that.
[03:46:39] <Jeaye> Yeah, that's not going to have what Q^3 needs. Even if it did, Q^3 asks a lot right now, so the perf would be pretty terrible. :(
[03:47:04] <steven_is_false> Jeaye: Yeah this is just a portable laptop
[03:47:58] <aatch> Goddamn I wish I could just rip out all of these @mut's
[03:49:06] *** Joins: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net)
[03:49:11] <aatch> but that requires many, many more changes.
[03:49:23] *** Quits: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse_)
[03:49:56] <Jeaye> steven_is_false: I get ~80fps on my old laptop and my work laptop, but they're both relatively stamed systems. I believe it was bjz that reported only 1fps on his system (also a Mac, surprisingly). :|
[03:50:39] <steven_is_false> Jeaye: Getting things to work portable can be really annoying.
[03:50:50] <Jeaye> Aye.
[03:51:25] <Jeaye> I apologize that you went through all of that configuration and you weren't able to run the application. 
[03:52:04] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:52:54] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[03:53:05] <steven_is_false> Jeaye: It's fair enough that you want to work with a certain API
[03:53:07] <aatch> Argh, full rebuild because of a 1 character typo.
[03:54:25] *** Joins: seth_ (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[03:58:01] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[03:58:02] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[03:58:28] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[03:59:04] <steven_is_false> Jeaye: Mesa 9.0 is released. This is the first version of Mesa to support OpenGL 3.1 and GLSL 1.40 (with the i965 driver only.)
[03:59:29] *** Quits: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com) (Quit: brendan)
[04:01:20] <Jeaye> Yeah, and Mesa support (even if it were there) would not be nearly fast enough for what Q^3 is currently demanding, I bet. 
[04:01:30] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[04:01:30] *** ChanServ sets mode: +o brson
[04:01:34] <steven_is_false> Jeaye: Okay.
[04:02:02] <Jeaye> :(
[04:02:17] <strcat> Jeaye: well.... the intel mesa drivers are faster than the OS X proprietary ones
[04:02:39] <strcat> and comparable to the windows drivers
[04:02:49] <strcat> the other ones don't have enough support to not be terrible
[04:03:11] *** Joins: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP)
[04:03:27] <Jeaye> strcat: I didn't know what.
[04:03:44] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Ping timeout)
[04:03:47] <Jeaye> You're saying a software implementation is faster than a hardware one? (in this case)
[04:03:58] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:04:39] <strcat> Jeaye: mesa isn't just software drivers
[04:04:40] *** Quits: seth_ (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[04:05:12] *** Joins: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP)
[04:05:14] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[04:05:18] <steven_is_false> Kay rebooting.
[04:05:20] <Jeaye> Then I'm completely misinformed, steven_is_false.
[04:05:30] <Jeaye> Mesa support could be entirely sufficient.
[04:05:37] <Jeaye> Thanks, strcat 
[04:05:40] <steven_is_false> I'll try to get it working
[04:05:58] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[04:06:07] <strcat> Jeaye: there are software drivers (swrast, llvmpipe) and then hardware ones (i965, radeon, nouveau, etc.)
[04:06:28] <strcat> the only *good* hardware driver is the intel one though
[04:07:00] <xenocons> drivers, forever a source of agony
[04:07:10] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[04:07:10] *** ChanServ sets mode: +o brson
[04:07:10] * Jeaye has always used proprietary drivers.
[04:07:39] <sp3d> proprietary drivers were always *worse* in my experience--weird compatibility, weird release schedules, weird interfaces+tools
[04:07:55] <sp3d> the performance when they were actually working and compatible wasn't worth all the trouble
[04:09:04] <strcat> well, if you can get by with an integrated gpu you definitely want the intel driver ;p
[04:09:10] <strcat> the ivy bridge gpus aren't too shabby anyway
[04:10:46] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[04:11:48] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[04:14:39] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[04:19:34] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[04:23:04] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:24:10] *** Joins: steven_is_false (trisquel@moz-144077DE.bchsia.telus.net)
[04:24:39] <steven_is_false> Lol, bricked my machine trying to upgrade it.
[04:29:10] <Jeaye> steven_is_false: So your comment on the issue...
[04:29:18] <Jeaye> That's just having to do with glfw errors?
[04:29:44] <steven_is_false> Jeaye: About not being able to run from the out of tree build? That's not just glfw issues.
[04:29:47] <Jeaye> Because it *does* run on out of source builds for me on multiple systems.
[04:30:04] <Jeaye> steven_is_false: What errors do you get?
[04:30:05] <steven_is_false> Jeaye: That's really strange
[04:30:13] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[04:30:13] <steven_is_false> I don't remember right now.
[04:30:16] <Jeaye> Ok
[04:32:13] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[04:34:26] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[04:35:04] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:36:58] *** Joins: moonchrome (moonchrome@moz-8A9F3A10.dsl.iskon.hr)
[04:37:31] *** Joins: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com)
[04:37:39] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[04:39:29] <aatch> Yes, fixed the issue in libsyntax! Apparently the other libraries don't make nearly as heavy use of constants.
[04:40:20] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[04:40:48] <Eridius> rusti: bytes!("\\E")
[04:40:50] -rusti- &[92, 69]
[04:41:01] <Eridius> cmr: I don't suppose you're still around?
[04:46:03] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[04:47:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.4.1)
[04:48:24] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[04:48:55] *** Quits: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com) (Quit: brendan)
[04:54:43] <yichoi> what is the meaning of ": 0" at libc::stat definition of path.rs ?
[04:55:10] *** Quits: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP) (Quit: josh)
[04:57:06] <Luqman> yichoi: the stat struct?
[04:57:17] <yichoi> yes
[04:58:03] <Luqman> it just sets every field to 0
[04:58:29] <yichoi> there is something different like [0, ..3] not  just 0
[04:58:48] <yichoi> seems like char[3]
[04:58:56] <Eridius> yichoi: that's basically what it is
[04:59:46] <yichoi> no need to exact specify size of each element ?
[05:01:23] *** Quits: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net) (Ping timeout)
[05:01:27] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[05:03:20] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[05:03:32] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[05:05:38] *** Joins: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net)
[05:09:49] <bjz> Jeaye: thankfully 10.9 supports OpenGL4
[05:09:59] <Jeaye> :)
[05:10:38] <Luqman> bjz: i saw that glfw 3 was released !
[05:10:49] <bjz> I'm sure there'll be many users who can't upgrade though, because of that
[05:10:58] <bjz> Luqman: aye
[05:11:02] <mcpherrin> Luqman: whoah crazy
[05:11:13] <mcpherrin> glfw is sweet
[05:11:26] <mcpherrin> as is OpenGL 4, finally on mac.
[05:11:44] <bjz> mcpherrin: still not released yet
[05:11:47] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Ping timeout)
[05:12:26] <mcpherrin> bjz: Well, developer preview is out :P
[05:12:42] <mcpherrin> I think? I don't own a mac :)
[05:12:57] * mcpherrin currently using a laptop with hardware opengl 1.4 only :(
[05:12:59] <bjz> it is
[05:13:11] <bjz> ouchie
[05:13:32] <mcpherrin> Old intel integrated :P
[05:13:59] * bjz was waiting for upadated MBPs, will have to wait a little longer
[05:14:04] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[05:14:07] <bjz> mcpherrin: dang
[05:14:17] <mcpherrin> I was hoping for a haswell+retina machine
[05:14:30] <bjz> mcpherrin: they're improving they're integrated a ton aren't they
[05:14:33] <moonchrome> hardware opengl 1.4 - that's not even programmable hardware - that's like 10 years old ?
[05:14:36] <bjz> mcpherrin: yeah, me too
[05:14:59] <bjz> mcpherrin: have to wait a little longer then
[05:15:29] * bjz 's battery is at 60% health and trackpad doesn't work any more
[05:15:34] <mcpherrin> moonchrome: love me some fixed function pipeline!  The hardware is programmable via directX, but bad OpenGL support
[05:15:52] <mcpherrin> I actually have a better computer, but it's a huge thinkpad that's inconvenient to carry around.
[05:16:02] <mcpherrin> Mozilla-issued W520
[05:16:09] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:16:19] <mcpherrin> (that I got to keep when my internship finished)
[05:16:59] <moonchrome> mcpherrin, oh it's opengl 1.4 drivers :), like even 5 year old smartphones probably have programmable hardware would be hard to find a laptop GPU without one :|
[05:18:04] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[05:18:04] *** ChanServ sets mode: +o dherman
[05:23:17] <mcpherrin> moonchrome: pixel shaders only though :P Vertex shaders is done in software in the DirectX driver
[05:23:23] <mcpherrin> lol intel
[05:23:36] <mcpherrin> can't even webgl :P
[05:25:09] <xenocons> ah heh
[05:25:11] <xenocons> heh
[05:25:16] <xenocons> i think i understand borrowed pointers!
[05:25:17] <xenocons> lol
[05:27:22] <xenocons> strangely, the rust for rubyist chapter was the best explanation (simplicity wise)
[05:27:26] <xenocons> and i dont even know ruby
[05:27:32] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[05:27:49] *** Quits: moonchrome (moonchrome@moz-8A9F3A10.dsl.iskon.hr) (Ping timeout)
[05:27:54] *** Quits: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net) (Ping timeout)
[05:28:15] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[05:28:16] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:30:56] <dbaupp> xenocons: cool... now you can go through libsyntax and librustc and convert all the @'s to &'s
[05:30:56] *** zz_kimundi is now known as kimundi
[05:31:13] <aatch> dbaupp, I'm doing that a bit.
[05:31:16] <dbaupp> xenocons: it'll be easy... :P
[05:31:23] <dbaupp> aatch: in trans, right?
[05:31:30] <xenocons> are you trying to trick me into reading trans again 
[05:31:32] <aatch> though brson reverted some changes so now I'm confused.
[05:31:41] <aatch> dbaupp, correct.
[05:32:01] <xenocons> i need to ./configure rust on home pc
[05:32:02] <aatch> I'm not sure why he reverted the global context stuff...
[05:32:04] <xenocons> counting down the hours!
[05:32:42] <dbaupp> xenocons: no. you don't have to read trans... just the rest of the compiler (aatch has got you covered)
[05:32:43] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[05:33:28] <xenocons> hmm, i suppose i can try?
[05:33:39] *** Quits: blitter (blitter@moz-FB45689C.dyn.centurytel.net) (Ping timeout)
[05:34:01] * dbaupp was joking
[05:34:22] <aatch> xenocons, changing @ to & is harder than it seems...
[05:34:35] <aatch> I haven't actually been able to do it all in one go.
[05:34:36] <xenocons> i gathered as much from the ':P'
[05:34:41] <dbaupp> xenocons: it'd be a baptism-by-fire of your new-found knowledge, I think... no reason not to try if you want to :)
[05:34:49] <xenocons> hmm
[05:34:50] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[05:35:04] <xenocons> i think i might pick a more obtainable goal otherwise i might get demotivated half way through
[05:35:37] <xenocons> id like to help with the fopen stuff, but i think i would be lost in a sea of libc which is not an area im knowledable in
[05:35:38] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[05:35:43] <xenocons> knowledgable, spelling too
[05:36:09] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[05:36:29] <dbaupp> if you feel like doing something, you could start chipping away at std::vec, converting functions to methods
[05:36:44] <dbaupp> (this is a very boring task though.)
[05:36:51] <xenocons> oh right, fn turns to method via embedding fn in Imp right?
[05:37:03] <xenocons> i could do that i think
[05:37:09] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[05:37:09] *** ChanServ sets mode: +o dherman
[05:37:28] *** Joins: brson (brson@moz-6A295265.hsd1.ca.comcast.net)
[05:37:28] *** ChanServ sets mode: +o brson
[05:37:50] <dbaupp> yup, e.g. the free standing tail/init functions only be the methods on ImmutableVector
[05:37:50] <xenocons> id like to try out some trait stuff at some stage
[05:38:03] <dbaupp> *should only be
[05:38:11] <xenocons> hmm
[05:38:12] <aatch> Ah, brson, any reason why you reverted the LLVMContext stuff?
[05:38:41] <xenocons> dbaupp: i also want to have a try at composition macros ;)
[05:38:53] <dbaupp> xenocons: function composition?
[05:38:56] <xenocons> yup
[05:39:15] <dbaupp> e..g comp!(f, g)(x), or comp!(f, g, x) or something like that?
[05:39:22] <xenocons> i was reading something just before on rosetta code, i *think* it should be possible to do in rust
[05:39:25] <dbaupp> (that'd be cool)
[05:39:25] <xenocons> yeah
[05:39:49] <xenocons> gotta think it out some more though
[05:41:48] <xenocons> dont know how to make it generic though, but traits may have the answer
[05:41:57] <dbaupp> generic?
[05:42:34] <xenocons> well, i figure that macros in rust (i mean i know) are typechecked, so the compiler needs to be aware of the types in use at compile time
[05:42:37] <aatch> Anybody able to take a look at this: https://github.com/mozilla/rust/pull/7124
[05:42:45] <dbaupp> aatch: \o/
[05:42:58] <dbaupp> (those @mut bool's seemed so silly.)
[05:43:07] <xenocons> ive never actually had to think about implementing function composition before heh
[05:43:23] <xenocons> i figure a struct with pointers in it
[05:43:27] <xenocons> fn pointers
[05:44:02] <xenocons> then call(f,x){f.fn(f,x)} or somesuch
[05:44:57] <aatch> dbaupp, it's because of dropping mutable fields.
[05:45:17] *** Joins: moonchrome (moonchrome@moz-13C86C1C.dsl.iskon.hr)
[05:45:18] <dbaupp> xenocons: couldn't your macro just convert comp!(f, g, x) into f(g(x)), or am I misunderstanding your goal?
[05:45:34] <dbaupp> aatch: I knew the reason... doesn't make it less strange :)
[05:45:54] <xenocons> hm, actually i suppose it could
[05:46:07] <xenocons> ill need to actually try it
[05:46:20] <aatch> dbaupp, yeah. It's nice not having quite so many heap allocations too.
[05:47:25] <xenocons> wonder if you can comp! . comp!
[05:48:12] *** aatch is now known as aatch|gone
[05:48:33] <dbaupp> xenocons: macros are not like functions at all, so probably not
[05:48:36] <xenocons> should be able to do like comp(comp(f,g,x),g',x'); i guess
[05:48:43] <dbaupp> aatch: where's the instruction thing?
[05:48:52] <xenocons> whereby comp(f,g,x) returns a function
[05:49:02] <aatch|gone> instruction thing?
[05:49:11] <dbaupp> xenocons: if f(g(x)) did, yes
[05:49:17] <dbaupp> aatch|gone: the counter?
[05:49:28] <xenocons> hmmm 
[05:49:29] <aatch|gone> the inst_ctxt thing
[05:49:34] <aatch|gone> anyway, gotta go
[05:49:35] <xenocons> might have a play with macros
[05:49:42] *** Quits: aatch|gone (aatch@moz-B437F499.pocketrent.com) (Quit: Leaving)
[05:50:43] <xenocons> fn compose(f,g) { return fn x { return f(g(x)); } } hrm
[05:51:13] <sp3d> the handy thing with function composition is that it always gives the function, i.e. comp(f,g) = \x->f(g(x))
[05:51:25] <sp3d> yeah
[05:53:09] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[05:53:40] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[05:54:29] <dbaupp> xenocons: it might be more flexible if it didn't return a function (due to the semantics of rust), and the user can go `|x| comp!(f, g, x)` if they do want a function.
[05:54:46] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[05:54:55] <xenocons> hmm, yeah that probably makes sense
[05:55:12] <xenocons> ideally we define comp! as an operator, muhaha
[05:55:24] <xenocons> << perhaps!
[05:55:39] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[05:56:31] <xenocons> whats the type sig for a function again? : (&fn) ?
[05:57:20] <sp3d> if the user doesn't want a function why wouldn't they just write f(g(x))?
[05:57:37] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[05:57:38] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:57:54] <dbaupp> sp3d: because comp!(f, g, h, k, x) is nicer than f(g(h(k(x)))), maybe?
[05:58:00] *** Quits: steven_is_false (trisquel@moz-144077DE.bchsia.telus.net) (Quit: Leaving.)
[05:58:02] <sp3d> oh, n-ary
[05:58:04] <dbaupp> (your point is reasonable, though)
[05:58:22] <xenocons> ())((( now we are lisping
[05:58:36] <sp3d> yeah, haskell has '$' which is really great at eliminating some parens when nesting
[05:58:51] <xenocons> yeah and . of course which is great for removing data heh
[05:59:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:59:30] <sp3d> something comp!-like could perhaps perform a similar function but seems like it wouldn't end up terribly idiomatic
[05:59:38] <sp3d> probably worth playing with
[05:59:55] <xenocons> i think worth playing with but im under no assumption that it will be that useful
[06:00:10] <xenocons> what i would like is a way to remove parameters from functions in rust :^)
[06:00:22] <sp3d> yeah, I was missing that it would be variadic and therefore didn't get it at all initially :P
[06:00:52] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[06:01:07] <xenocons> fun though, helps learn the lang a bit
[06:01:11] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[06:01:35] <Eridius> rusti: [bytes!("foo"), "bar".as_bytes()].concat()
[06:01:38] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YRKH
[06:01:44] <Eridius> wtf is with that error
[06:02:02] <xenocons> type ambiguity?
[06:02:10] <doomlord> much prefer f# |> or clojures' -> to haskell's $
[06:02:20] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[06:02:33] <xenocons> doomlord: yeah i have to agree, mostly because it feels very explicit
[06:02:34] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[06:02:34] *** ChanServ sets mode: +o dherman
[06:02:47] <xenocons> (and you can use ||> and and <| etc)
[06:03:16] <doomlord> i have a theory the popularity of OOP is in part down to the fact a.foo(b) approximates a |> foo b
[06:03:23] <dbaupp> . and $ are the one true way ;P
[06:03:38] <dbaupp> Eridius: that error seems really peculiar
[06:04:02] <Eridius> dbaupp: yeah. I have a [&[u8], ..2], so how the heck is str's concat even a candidate?
[06:04:06] <doomlord> stuffing things in classes is extraneous but the ability to reduce nesting helps code readability.. (the abillity to do the latter without classes is nice)
[06:04:18] <dbaupp> rusti: let x: &'static [&[u8]] = [bytes!("foo"), "bar".as_bytes()]; x.concat()
[06:04:19] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/hFiD
[06:04:23] <xenocons> doomlord: probably right, but a |> foo b is so much more readable imo
[06:04:40] <xenocons> also allows you to 'remove' data which makes stuff cleaner
[06:05:17] <doomlord> choice of operator symbol... | unix pipe :)
[06:05:20] <dbaupp> Eridius: ok... it's because str's concat is impl'd for <S: Str> &'self [S]
[06:05:32] <Eridius> dbaupp: but &[u8] isn't Str
[06:05:35] <doomlord> |> differentiates from bitwise or and indicates direction
[06:05:36] <dbaupp> and we meet our good friend #5898 again
[06:05:39] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[06:05:41] <Eridius> bah
[06:05:47] <dbaupp> Eridius: yeah, method resolution sucks :(
[06:05:50] <Eridius> :'(
[06:05:51] <xenocons> doomlord: i like the direction, im not sure why, maybe its because im not mathy
[06:06:02] <dbaupp> Eridius: (i'm very good at breaking your code, sorry :(((( )
[06:06:04] <Eridius> I really wish there was a syntax for explicitly choosing some trait's method
[06:06:18] <Eridius> which would solve teh need to use a whole trait into the current scope when you only want to call a method once
[06:06:32] <xenocons> infact, haskells '.' composition operator is equivilant to F#s <<, but i always find myself using inverse composition, >>
[06:06:32] <dbaupp> Eridius: yes
[06:06:37] <Eridius> sadly vec::concat, for whatever crazy reason, needs &[~[T]]
[06:06:52] *** Joins: steven_is_false (trisquel@moz-144077DE.bchsia.telus.net)
[06:07:02] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[06:07:12] <dbaupp> Eridius: yeah, most of the standard library (vec in particular) is insufficiently generic
[06:07:21] <xenocons> what about connect?
[06:07:22] <doomlord> coming from C++ , i seriously miss '.' as data access, although i understand why haskell does what it does
[06:07:28] <xenocons> is connect <> concat?
[06:07:29] <Eridius> dbaupp: also for some reason the impl of Add is on ~[T] instead of &[t]
[06:07:37] <dbaupp> Eridius: and so the change to use S: Str was an attempt to improve this in str. clearly it was a bad idea :/
[06:07:45] <Eridius> xenocons: connect takes a separator string
[06:07:48] <Eridius> dbaupp: d'oh
[06:07:50] <dbaupp> Eridius: don't know.
[06:07:54] <xenocons> ah
[06:07:56] *** Quits: KindOne (KindOne@moz-60F9A56E.dynamic.ip.windstream.net) (Ping timeout)
[06:08:00] <dbaupp> (about add.)
[06:08:21] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[06:08:25] <Eridius> rusti: bytes!("foo") + bytes!("bar")
[06:08:26] -rusti- <anon>:10:23: 10:24 error: unexpected token: `+`
[06:08:26] -rusti- <anon>:10          bytes!("foo") + bytes!("bar")
[06:08:26] -rusti-                                  ^
[06:08:26] -rusti- application terminated with error code 101
[06:08:26] <xenocons> doomlord: for strut access, i always prefered ->
[06:08:32] <Eridius> o_O
[06:08:51] <dbaupp> rusti: (bytes!("foo")) + bytes!("bar")
[06:08:52] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gAjB
[06:09:00] <xenocons> rusti: [0u8] + [1u8];
[06:09:00] <Eridius> dbaupp: O_o
[06:09:01] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PhgZ
[06:09:04] <Eridius> ah
[06:09:11] <dbaupp> Eridius: macros get parsed as items, by default :(
[06:09:14] <Eridius> :(
[06:09:24] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:09:27] * dbaupp <3 bugs
[06:09:42] <Eridius> rusti: bytes!("foo").to_owned()
[06:09:43] -rusti- <anon>:10:22: 10:23 error: unexpected token: `.`
[06:09:43] -rusti- <anon>:10          bytes!("foo").to_owned()
[06:09:43] -rusti-                                 ^
[06:09:43] -rusti- application terminated with error code 101
[06:09:55] <Eridius> rusti: (bytes!("foo")).to_owned() + (bytes!("bar"))
[06:09:57] -rusti- ~[102, 111, 111, 98, 97, 114]
[06:11:09] <Eridius> rusti: for ["a", "b", "c"].iter().advance |s| { println(s) }
[06:11:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RXGR
[06:11:23] <Eridius> rusti: use std::iterator::IteratorUtil; for ["a", "b", "c"].iter().advance |s| { println(s) }
[06:11:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PRVf
[06:11:27] *** Joins: KindOne (KindOne@5B3DC981.D1A4D0AD.EC6A1518.IP)
[06:11:37] <Eridius> rusti: use std::iterator::IteratorUtil; for ["a", "b", "c"].iter().advance |s| { println(*s) }
[06:11:38] <dbaupp> rusti: use std::iterator::IteratorUtil; for ["a", "b", "c"].iter().advance |s| { println(*s) }
[06:11:39] <steven_is_false> Hey guys what should I name my computer?
[06:11:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ceZZ
[06:11:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HaAR
[06:11:51] <Eridius> there we go. dbaupp, why do I get lifetime errors?
[06:11:56] <dbaupp> grrrr :/
[06:12:06] <xenocons> steven_is_false: call it 'rustbucket' :P
[06:12:06] <dbaupp> rvalues aren't treated properly
[06:12:16] <dbaupp> Eridius: so you need a temporary. :(
[06:12:19] <Eridius> dbaupp: but aren't these &'static?
[06:12:23] <steven_is_false> Last time I used alonzo for my computer's name. I'd like to go with a similar theme.
[06:12:34] <dbaupp> Eridius: I think it's the lifetime of the []
[06:12:36] <Eridius> ooh
[06:12:42] <Eridius> ok so it's my favorite bug again. yay
[06:12:49] <dbaupp> rusti: use std::iterator::IteratorUtil; for (@["a", "b", "c"]).iter().advance |s| { println(*s) }
[06:12:50] -rusti- a
[06:12:50] -rusti- b
[06:12:50] -rusti- c
[06:12:51] -rusti- ()
[06:16:01] <Eridius> I wish there was a variant on &[T].pop that returned an Option<T> instead of failing
[06:16:23] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Connection reset by peer)
[06:16:25] <xenocons> i like the sound of values
[06:16:30] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[06:16:32] <xenocons> better than exceptions
[06:17:26] <dbaupp> Eridius: ~[].pop ?
[06:17:58] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[06:18:02] <Eridius> rusti: (~[]).pop()
[06:18:03] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jiBX
[06:18:17] <Eridius> rusti: (~[]).pop::<u8>()
[06:18:18] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZLhC
[06:18:23] <Eridius> heh
[06:18:30] <Eridius> rusti: let x : ~[u8] = ~[]; x.pop()
[06:18:31] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iQHS
[06:18:37] <Eridius> rusti: let mut x : ~[u8] = ~[]; x.pop()
[06:18:38] -rusti- rust: task failed at 'sorry, cannot vec::pop an empty vector', /build/rust-git/src/rust/src/libstd/vec.rs:609
[06:18:38] -rusti- rust: domain main @0x7f6bcd81f810 root task failed
[06:18:38] -rusti- application terminated with error code 101
[06:18:43] <Eridius> that. I want None instead
[06:20:42] <dbaupp> you could have a utils module, that has all the useful methods that you need :)
[06:21:20] <Eridius> haha
[06:21:57] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[06:22:28] <dbaupp> (that wasn't entirely a joke.)
[06:24:36] *** Quits: steven_is_false (trisquel@moz-144077DE.bchsia.telus.net) (Quit: Leaving.)
[06:33:13] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[06:33:16] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:33:30] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[06:35:18] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[06:36:50] *** Quits: KindOne (KindOne@5B3DC981.D1A4D0AD.EC6A1518.IP) (Ping timeout)
[06:37:06] *** Quits: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP) (Ping timeout)
[06:39:49] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[06:40:15] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[06:40:38] *** Joins: KindOne (KindOne@moz-85B3DB18.dynamic.ip.windstream.net)
[06:40:46] *** Joins: moonchrome_ (moonchrome@moz-CF32A561.dsl.iskon.hr)
[06:41:21] *** Joins: fabiand (fabiand@moz-EBD6E4AA.adsl.alicedsl.de)
[06:41:45] *** Quits: moonchrome (moonchrome@moz-13C86C1C.dsl.iskon.hr) (Ping timeout)
[06:43:15] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:48:02] *** Joins: nano (nano@moz-972880B.superkabel.de)
[06:50:22] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[06:53:03] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[06:53:18] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[06:53:32] <Eridius> rusti: 'c'.to_char()
[06:53:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gAbh
[06:53:55] <Eridius> rusti: std::str::from_char('c')
[06:53:56] -rusti- ~"c"
[06:54:14] <Eridius> rusti: 3i.to_char()
[06:54:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jGWg
[06:54:40] <Eridius> rusti: 3i.to_str()
[06:54:42] -rusti- ~"3"
[06:54:43] <Eridius> silly me
[06:54:46] <Eridius> rusti: 'c'.to_str()
[06:54:47] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/Jffe
[06:55:42] *** Joins: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com)
[06:55:58] <xenocons> Eridius: thats a bit strange
[06:56:06] <xenocons> i would have expected to_str() to work
[06:57:08] *** Quits: KindOne (KindOne@moz-85B3DB18.dynamic.ip.windstream.net) (Ping timeout)
[06:57:08] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[06:58:01] *** Joins: KindOne (KindOne@moz-85B3DB18.dynamic.ip.windstream.net)
[07:01:27] <Eridius> rusti: 0200
[07:01:28] -rusti- 200
[07:01:32] <Eridius> bah no octal
[07:01:39] <Eridius> rusti: 0o200
[07:01:39] -rusti- <anon>:10:10: 10:14 error: expected `;` or `}` after expression but found `o200`
[07:01:40] -rusti- <anon>:10          0o200
[07:01:40] -rusti-                     ^~~~
[07:01:40] -rusti- application terminated with error code 101
[07:02:18] *** Quits: brson (brson@moz-6A295265.hsd1.ca.comcast.net) (Quit: leaving)
[07:02:36] <Jeaye> bjz: ping
[07:02:44] <bjz> pong
[07:03:45] <Jeaye> task failed at 'Could not find a WindowDataMap in thread-local storage.', src/private.rs:93
[07:03:49] <xenocons> rust compiler has colors in linux :&)
[07:03:55] <Jeaye> xenocons: !?!?!?
[07:03:58] <Jeaye> Since when?
[07:04:12] <xenocons> Jeaye: im not sure, but i just see it now! warning is yellow :)
[07:04:13] *** Joins: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP)
[07:04:22] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[07:04:37] <Jeaye> Maybe it just made it in today.
[07:04:47] <xenocons> i pulled incomming yesterdya
[07:05:03] <Jeaye> I pulled 7 hours ago and I'm not seeing it.
[07:05:09] <bjz> Jeaye: when does that get thrown?
[07:05:15] <Jeaye> bjz: When I'm closing.
[07:05:20] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[07:05:30] <Jeaye> After I've set should_close
[07:05:43] <bjz> dang, let me look
[07:05:50] <Eridius> Jeaye, xenocons: I think snapshot shows colors in general, but a newly-built rustc will only show colors if your setaf escape doesn't use conditionals
[07:06:23] <Eridius> it didn't used to work with Ubuntu, but that was fixed recently
[07:06:33] <Eridius> I believe it still requires at least 16 colors in your terminfo though
[07:06:52] <Jeaye> Hmm, I'm running 256 colors in Slackware and I've yet to see colors.
[07:07:11] * Jeaye shrugs.
[07:07:14] <Eridius> Jeaye: what does `infocmp` say on its first line?
[07:07:21] <bjz> Jeaye: when did it happen? was it working before?
[07:07:38] <Jeaye> Eridius: rxvt-256color|rxvt 2.7.9 with xterm 256-colors,
[07:07:50] <Eridius> Jeaye: there was no comment line before that saying what file it came from?
[07:07:56] <xenocons> Jeaye: http://i.imgur.com/JU1GonX.png
[07:07:59] <Jeaye> Ahh, there was a comment line, sorry
[07:08:05] <Jeaye> Eridius: #       Reconstructed via infocmp from file: /usr/share/terminfo/r/rxvt-256color
[07:08:08] * bjz callbacks are annoying sometimes
[07:08:22] <Eridius> Jeaye: what does `tput setaf` say?
[07:08:36] <Jeaye> 1%{8}%<%t3%p1%d%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;%p1%d%;m
[07:08:53] <Jeaye> I use tput for output in my Makefile, so I know it works. :P
[07:09:04] <Eridius> Jeaye: was there a %? at the start?
[07:09:20] <Jeaye> Nope, that's the whole of it.
[07:09:28] <Eridius> oh hey nm, `tput setaf` only starts printing non-parameterized strings once it hist the %p1
[07:09:31] <Eridius> which I guess makes sense
[07:09:40] <Eridius> Jeaye: if you look for the setaf line in `infocmp` that holds the truth
[07:09:43] <Eridius> which should have a %?
[07:09:49] <Eridius> anyway, that's a conditional, and it's not yet supported
[07:10:04] <Jeaye> setaf=\E[%?%p1%{8}%<%t3%p1%d%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;%p1%d%;m,
[07:10:11] <Eridius> yep
[07:10:12] <Jeaye> Yeah, the %? there.
[07:10:25] <Eridius> I'm actually working on the terminfo support right now
[07:10:37] <Jeaye> Cool. Good to know. :)
[07:11:23] *** Quits: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net) (Quit: ZNC - http://znc.in)
[07:11:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:11:44] <ghrust> 01[13rust01] 15alexcrichton pushed 10 new commits to 06try: 02http://git.io/KGGd-g
[07:11:44] <ghrust> 13rust/06try 141a3edec 15Alex Crichton: Revert "Revert "Remove all usage of the global LLVMContextRef""...
[07:11:44] <ghrust> 13rust/06try 14a90fffe 15Alex Crichton: Revert "Revert "Have JIT execution take ownership of the LLVMContextRef""...
[07:11:45] <ghrust> 13rust/06try 14079ffa3 15Alex Crichton: Correctly parse commands for rusti...
[07:11:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:11:50] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[07:14:06] *** Joins: Blub\w (wry@moz-843D98E6.wireless.dyn.drei.com)
[07:15:07] <Eridius> seems to me documentation on the numeric modules is now broken
[07:15:12] <Eridius> doesn't contain any of the macro'd stuff
[07:16:03] <dbaupp> Eridius: maybe rustdoc doesn't expand macros?
[07:16:10] <Eridius> dbaupp: the documentation used to be fine
[07:16:19] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[07:16:30] <Eridius> dbaupp: compare the current http://static.rust-lang.org/doc/std/int.html with the old http://static.rust-lang.org/doc/core/int.html
[07:16:53] <dbaupp> Eridius: the macro'd things are newly-macro'd
[07:17:07] <Eridius> dbaupp: oh? I thought these modules all used a macro to generate them for a while
[07:17:13] <dbaupp> (they used to use a #[merge] attribute that did something... no idea how it worked.)
[07:17:15] <Eridius> although I suppose the core docs haven't been generated for a while either
[07:17:16] <Eridius> ah
[07:17:39] <dbaupp> but, yeah, just checked rustdoc: doesn't expand macros
[07:17:43] <Eridius> :/
[07:17:47] * dbaupp files an issue
[07:17:51] <Eridius> thanks
[07:19:10] *** Joins: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net)
[07:19:15] <dbaupp> Eridius: https://github.com/mozilla/rust/issues/7126
[07:19:42] <Eridius> watched, thanks.
[07:20:19] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[07:21:07] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[07:21:54] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:22:17] <Eridius> man, I love that I can slam a match in the middle of an expression and `return` from the failure case
[07:22:37] <Eridius> stack.push(match foo { Some(x) => x, None => return Err(~"quux") });
[07:28:35] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[07:28:53] <xenocons> bstrie: ty for the vimrc ;)
[07:28:53] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[07:29:12] <bjz> Jeaye: ahh! I think I might know why
[07:29:20] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[07:29:20] <Jeaye> Oh yeah?
[07:29:37] <Jeaye> xenocons: What's in the vimrc?
[07:29:47] <Jeaye> Good things that I'd want? :D
[07:30:50] <xenocons> https://raw.github.com/bstrie/dotfiles/master/.vimrc
[07:31:24] *** Quits: Blub\w (wry@moz-843D98E6.wireless.dyn.drei.com) (Quit: bbl)
[07:32:23] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[07:32:33] <Jeaye> "Map ^j and ^k to next and previous buffer, and ^l and ^h to next and previous tab."
[07:32:36] <Jeaye> I like that. :)
[07:33:39] <xenocons> i havent used too much vim
[07:33:43] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[07:33:48] <xenocons> but ill give it a shot because it seems better for rust than emacs
[07:34:04] <Jeaye> Ahh, it's great. I've been using it for a few years now.
[07:35:10] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[07:35:43] <xenocons> whats a good colorscheme
[07:35:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[07:35:57] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[07:36:53] <xenocons> http://vimcolorschemetest.googlecode.com/svn/html/index-c.html muhaha
[07:37:02] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[07:38:34] <Jeaye> xenocons: I use torte, or a close variant of it
[07:38:36] <Jeaye> :color torte
[07:38:55] <xenocons> too much like some 80s disco
[07:39:05] <Jeaye> heh
[07:39:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:40:57] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:41:24] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[07:41:24] <ghrust> 01[13rust01] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/o5kNvw
[07:41:24] <ghrust> 13rust/06try 147120cd4 15Alex Crichton: Add a missing import
[07:41:24] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[07:41:24] <xenocons> are literals meant to be pink?
[07:41:34] <Jeaye> xenocons: Mine: http://arrownext.com/upload/data/vim.png
[07:41:40] <Jeaye> Not torte, but similar.
[07:41:56] <xenocons> ahh too much!
[07:42:44] <doener> I use http://www.vim.org/scripts/script.php?script_id=2140
[07:43:28] <Jeaye> That's pretty sane.
[07:43:59] *** Joins: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP)
[07:44:19] <xenocons> yeah i like that one
[07:44:21] <Jeaye> I'm one for contrast and dark backgrounds. http://arrownext.com/upload/data/irc.png
[07:44:40] <doener> http://imgur.com/6YTAc1c -- looks like that with rust code
[07:45:40] <xenocons> yeah u have me sold
[07:45:42] <xenocons> doener: im instaling that one
[07:45:54] <Jeaye> :P
[07:46:22] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[07:46:53] <xenocons> yup this looks good
[07:46:57] <xenocons> no offence jea	 :)
[07:47:01] <xenocons> Jeaye: ...*
[07:47:14] *** Joins: berak (chatzilla@DD53E79D.C4D4A1E0.1A5CC7E5.IP)
[07:47:15] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:47:20] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[07:47:24] <xenocons> there is just some weird artifacts in my rust syntax highlighter
[07:47:36] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:47:36] <Jeaye> Probably failed unicode.
[07:47:42] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[07:47:53] <Jeaye> It replaces things like => (matching) with unicode arrows
[07:48:24] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[07:48:30] *** Parts: berak (chatzilla@DD53E79D.C4D4A1E0.1A5CC7E5.IP) ()
[07:49:38] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[07:49:38] *** ChanServ sets mode: +o dherman
[07:49:41] <engla> wow, that's a busy irc client
[07:49:44] <engla> busy interface
[07:49:57] <xenocons> http://i.imgur.com/LjKCFUy.png <-weird 
[07:50:35] <Eridius> http://orbt.io/PeXx.png is my IRC
[07:50:53] <xenocons> nice
[07:51:10] <Eridius> I'm running irssi on my Linode, inside of tmux, and I use mosh to connect to it
[07:51:25] <xenocons> hax :P
[07:51:34] <Eridius> :D
[07:51:45] <Eridius> I wanted a znc for a while, but I finally tried it and decided ZNC's user experience sucks horribly
[07:51:50] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[07:51:51] <engla> the only thing I changed with the irssi interface is the color of the blue bars ^^
[07:51:55] <Eridius> but what I have now lets me get at IRC from any computer, even multiple simultaneously
[07:52:12] <xenocons> k so having screenshots open as images gets really confusing
[07:52:14] <Eridius> the only downside is irssi resizes to fit the smallest attached window
[07:52:43] <xenocons> Eridius: yeah im a screen user (havent tried tmux yet tho)
[07:52:47] <Eridius> tmux > screen
[07:52:52] <doener> xenocons: what's wrong with your vim screenshot?
[07:52:53] <xenocons> whats the diff?
[07:53:02] <xenocons> doener: i dont understand the pink block bits 
[07:53:08] <xenocons> is that normal?
[07:53:11] <Eridius> far far FAR better codebase, vertical splits, cleaner command structure, etc
[07:53:35] <doener> xenocons: trailing whitespace I guess
[07:53:47] <Eridius> vim displays trailing whitespace by default. It's great
[07:53:59] <doener> xenocons: if you're using bstrie's vimrc, that had code for that in it
[07:54:22] <doener> I prefer using listchars for that, instead of color
[07:54:34] <xenocons> ahhh
[07:55:16] *** Joins: deLta30 (quassel@7B977429.6E07E069.9BC5C97C.IP)
[07:57:00] <xenocons> i agree
[07:57:04] <xenocons> colorr is too confrontational
[07:57:33] <doener> set list listchars=listchars=tab:>-,trail:-,precedes:<,extends:>
[07:57:36] <doener> that's why I use
[07:57:39] <doener> s/why/what/
[07:58:01] *** Joins: tav (tav@moz-5ED3AF3C.range86-152.btcentralplus.com)
[07:58:32] *** Quits: cdidd (cdidd@moz-106778E9.broadband.corbina.ru) (Input/output error)
[07:58:50] <xenocons> need to find the origional part
[07:58:50] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[07:59:59] <xenocons> good lord i keep pressing emacs keys
[08:01:52] <xenocons> highlight ExtraWhitespace ctermbg=red guibg=red $
[08:01:54] <xenocons> hm
[08:01:58] <xenocons> not sold on this
[08:02:03] <xenocons> whitespace, who cares?
[08:02:51] <dbaupp> xenocons: `make tidy` does
[08:02:57] <xenocons> ah
[08:04:54] <xenocons> doener: E474: Invalid argument: listchars=listchars=tab:>-,trail:-,precedes:<,extends:>
[08:04:59] <xenocons> btw thanks for helping heh
[08:04:59] <Eridius> dbaupp: I assume `make tidy` is just a linter, it doesn't actually modify the source, right?
[08:05:13] *** Quits: deLta30 (quassel@7B977429.6E07E069.9BC5C97C.IP) (Connection reset by peer)
[08:05:43] *** Quits: moonchrome_ (moonchrome@moz-CF32A561.dsl.iskon.hr) (Quit: Leaving)
[08:06:01] <Eridius> rusti: std::str::from_bytes(~[92, 69, 91, 51, 56, 59, 53, 59, 49, 109])
[08:06:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JVJI
[08:06:21] *** Joins: mib_9obiss (Mibbit@A1793499.EC15082C.D7C984E0.IP)
[08:07:22] <xenocons> ah
[08:07:29] <xenocons> think i got it
[08:09:05] *** Joins: cdidd (cdidd@moz-B516639D.broadband.corbina.ru)
[08:09:29] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[08:09:31] *** Quits: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com) (Quit: brendan)
[08:09:56] <xenocons> looking good now!
[08:10:04] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[08:11:12] <xenocons> i see what that redline is now, 80 col heh
[08:11:15] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[08:12:41] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[08:19:20] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[08:19:36] *** Joins: deLta30 (quassel@FD8E55D6.19EAAE3F.622A08E2.IP)
[08:24:39] <doener> xenocons: oh, oops, doubled listchars=
[08:24:44] <doener> set list listchars=tab:>-,trail:-,precedes:<,extends:>
[08:24:49] <doener> xenocons: that should work
[08:24:59] <Eridius> dbaupp: the rvalue issue is making me miss &str.to_bytes() now :/
[08:25:38] <Eridius> rusti: "foo".bytes_iter().collect()
[08:25:40] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IYAZ
[08:25:54] <Eridius> actually bytes_iter would have the same problem anyway
[08:27:11] <Eridius> rusti: 'a' + 'b'
[08:27:12] -rusti- '\xc3'
[08:27:29] <Eridius> rusti: '0' + 1
[08:27:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eiRL
[08:27:38] <Eridius> rusti: (1 as char) + '0'
[08:27:39] -rusti- '1'
[08:30:10] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[08:30:25] <xenocons> doener: yup got it!
[08:30:28] <xenocons> its looking nice now
[08:30:36] <xenocons> im happy with this
[08:30:39] <xenocons> now to think of something to code :)
[08:30:40] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[08:31:01] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[08:31:25] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[08:32:38] <Eridius> rusti: std::str::from_bytes([92, 69, 91, 51, 49, 53, 59, 49, 109])
[08:32:39] -rusti- ~"\\E[315;1m"
[08:32:56] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:33:11] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[08:34:27] *** Quits: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP) (Ping timeout)
[08:35:21] *** Joins: Blei (philipp@moz-D88CD29.ethz.ch)
[08:36:07] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[08:36:18] <Jesse> i wonder if rust should disallow + on chars
[08:36:43] <Amanieu> char + char doesn't make sense
[08:36:52] <Eridius> char is a numeric datatype
[08:36:54] <Amanieu> chat + int sort of makes sense
[08:36:56] <Eridius> char + char makes sense from that perspective
[08:37:32] <Amanieu> well maybe char shouldn't be a numeric datatype?
[08:37:36] <Eridius> o_O
[08:37:43] <Jesse> it's only as numeric as an enum
[08:37:46] <Eridius> woot, got terminfo conditionals working! https://github.com/kballard/rust/commits/terminfo-parm
[08:37:54] <Eridius> cmr: ^
[08:37:57] <Eridius> I'll submit a PR tomorrow
[08:38:01] <Eridius> right now it's bedtime
[08:38:55] <Jesse> what does (0xD800 as char) mean?
[08:39:10] <Jesse> or (0xFFFF_FFFF as char)?
[08:43:06] <xenocons> hmm
[08:46:24] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:47:39] <Jesse> rusti: let mut a = ~"x"; std::str::push_char(a, 0xD800 as char); a
[08:47:40] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PLWP
[08:47:51] <Jesse> how do i rusti
[08:49:06] <Blei> rusti: let mut a = ~"x"; a.push_char(0xd800 as char); a
[08:49:07] -rusti- ~"x\ud800"
[08:49:21] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[08:49:30] *** Quits: deLta30 (quassel@FD8E55D6.19EAAE3F.622A08E2.IP) (Ping timeout)
[08:49:41] <Jesse> rusti: ~"x\ud800"
[08:49:41] -rusti- ~"x\ud800"
[08:49:53] <Jesse> O_o
[08:50:13] <Jesse> rusti: let mut a = ~"x"; a.push_char(0xffff_ffff as char); a
[08:50:14] -rusti- ~"x\U7fffffff"
[08:50:21] <Jesse> rusti: ~"x\U7fffffff"
[08:50:21] -rusti- ~"x\U7fffffff"
[08:50:28] <Jesse> o_O
[08:51:23] *** Joins: deLta30 (quassel@360E25A5.C7240F89.E7E9D4A8.IP)
[08:53:03] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:54:27] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:54:58] <Jesse> rusti: ~"x\U7FFFFFFF"
[08:55:00] -rusti- ~"x\U7fffffff"
[08:56:27] *** Joins: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de)
[08:59:30] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[08:59:43] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[09:00:35] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[09:00:36] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[09:00:42] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Nisstyre)
[09:01:00] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[09:02:51] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[09:04:23] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:04:43] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:05:09] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:08:03] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[09:08:30] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[09:10:20] *** Quits: mib_9obiss (Mibbit@A1793499.EC15082C.D7C984E0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:10:34] <MaikKlein> bjz_, ping
[09:15:12] <bjz_> MaikKlein: pong
[09:15:44] <MaikKlein> did you see https://github.com/mozilla/rust/pull/6661 ? Was this about External function pointers?
[09:16:14] <bjz_> see that I commented on it :P
[09:16:41] <bjz_> and yes
[09:16:55] <MaikKlein> I mean it's closed now
[09:17:39] <doener> incoming was deleted and that closed all open PRs
[09:17:52] <MaikKlein> ah ok
[09:18:08] <doener> https://mail.mozilla.org/pipermail/rust-dev/2013-June/004476.html
[09:22:54] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:29:04] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[09:37:09] *** Quits: sankha93 (Instantbir@42B82B5.B1950BBF.8B6C1D65.IP) (Ping timeout)
[09:41:37] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Ping timeout)
[09:42:02] *** Joins: sankha93 (Instantbir@70B2ADCB.A5DB5020.8B6C1D65.IP)
[09:43:19] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[09:45:05] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[09:45:34] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[09:45:49] *** Quits: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de) (Ping timeout)
[09:46:03] *** Joins: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de)
[09:53:39] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[09:54:06] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[09:57:03] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[09:57:37] *** Quits: ssbr (ssbr@moz-C9F16F18.dsl.bell.ca) (Ping timeout)
[10:06:41] *** Quits: heftig (heftig@moz-264743B5.dip0.t-ipconnect.de) (Ping timeout)
[10:10:17] *** Joins: heftig (heftig@moz-F165E327.dip0.t-ipconnect.de)
[10:11:41] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[10:12:08] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[10:16:46] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[10:23:03] <doener> rusti: let x = 5; let y: &mut int = &x;
[10:23:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EWAR
[10:23:09] <xenocons> http://i.imgur.com/QlCpeN9.png :3 ive got it how i like it now!
[10:23:20] <doener> rusti: let mut x = 5; let y: &mut int = &x;
[10:23:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LPcL
[10:23:47] <doener> rusti: let mut x = 5; let y: &mut int = &mut x;
[10:23:48] -rusti- ()
[10:25:00] <xenocons> what git command do i use to ensure i have the latest branch? 
[10:25:41] <xenocons> i can write it down this time :)
[10:25:59] <cyndis> git pull --rebase if you're on the correct branch
[10:26:13] <xenocons> ty, i think im in incoming
[10:26:14] <xenocons> or was
[10:26:25] <cyndis> well, incoming isn't the correct branch anymore:)
[10:26:51] <xenocons> hah thats right, what commands do i need to fix it?
[10:26:51] <cyndis> git checkout master to change to master
[10:26:59] <xenocons> ah, so we are in master now?
[10:27:03] *** Quits: Blei (philipp@moz-D88CD29.ethz.ch) (Quit: WeeChat 0.4.1)
[10:27:03] <cyndis> yes
[10:27:14] <xenocons> will i need to do this in a new dir or is it ok to overwrite
[10:27:17] <cyndis> i recommend adding the current git branch to your shell prompt
[10:27:34] <xenocons> this is all new to me, is that some env variable?
[10:27:43] <cyndis> depends on your shell
[10:27:49] <xenocons> (bash)
[10:28:44] <cyndis> you can get the current branch from some file in .git/ so you can add that to your prompt
[10:29:01] <cyndis> my prompt is a ruby script that is run every time the prompt needs to be generated..
[10:29:19] <cyndis> anyway, you don't need a new directory
[10:29:35] <cyndis> if you have changes that would go away, git will complain
[10:29:47] <xenocons> ah, i havent changed anything yet :} 
[10:30:02] <xenocons> Switched to a new branch 'master'
[10:30:21] <cyndis> ah, i guess you originally didn't clone master but incoming?
[10:30:36] <xenocons> correct
[10:30:41] *** Joins: lmandel (lmandel@moz-ABC20CF2.rev.sfr.net)
[10:30:55] <cyndis> well, it should still know to attach it to the correct remote branch. git pull will complain if not.
[10:30:55] <xenocons> i think my assumption was incomming was the bleeding edge where i got to break stuff
[10:31:21] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[10:31:36] <cyndis> yeah, but often you just clone normally and then switch to other branches using checkout :)
[10:31:44] <cyndis> though there isn't really any difference.
[10:31:49] *** Quits: sankha93 (Instantbir@70B2ADCB.A5DB5020.8B6C1D65.IP) (Ping timeout)
[10:32:06] <xenocons> hmm
[10:32:17] <xenocons> so essentially now that i am in master, i should be able to pull && make ?
[10:32:25] <cyndis> yes.
[10:32:32] <xenocons> cool how interesting
[10:32:54] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[10:32:54] <xenocons> hrm
[10:33:00] <xenocons> already up to date
[10:34:05] <cyndis> yeah, because you didn't have the branch already, it's already on the newest commit
[10:34:06] <doener> well, you just created that branch, from an alredy freshly updated origin/master
[10:34:07] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[10:34:14] <MaikKlein> do you think it would be useful to read though http://learnyouahaskell.com/chapters for learning rust, if someone has absolutely no experience in functional languages?
[10:34:19] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[10:34:30] <xenocons> hmm
[10:34:55] <cyndis> (git pull does a git fetch which gets all changes on all branches, but then only applies them on your current branch)
[10:35:09] <xenocons> ah
[10:35:16] <xenocons> strange that my current branch has no updates though?
[10:35:25] <cyndis> well, you just created it :)
[10:35:25] <xenocons> i mean, i got incoming yesterday
[10:35:27] <xenocons> right
[10:35:48] <xenocons> tricky
[10:36:03] <cyndis> well, it now contains whatever the state was when you git pulled last time
[10:36:33] *** Joins: sankha93 (Instantbir@A13A4AC8.A5DB5020.8B6C1D65.IP)
[10:37:08] <xenocons> for i in (update|pull|fetch|refresh|clone|poke|prod) do git $i // sounds like a solution
[10:37:10] <engla> MaikKlein: it's always useful to learn new stuff
[10:37:26] <cyndis> :p
[10:37:46] <EXetoC> engla: yeah?
[10:37:55] <cyndis> the idea is that the git repo just contains a whole bunch of commits, and the branches are just pointers to certain commits.
[10:37:56] <xenocons> i see there is a 'git status' too
[10:38:04] <EXetoC> you might be right on that one
[10:38:22] <xenocons> cyndis: right, and 'branches' each have some hashlike value
[10:38:37] <cyndis> each commit has a hashlike value, and each branch points to one
[10:38:41] <cyndis> well, a hash
[10:38:52] <xenocons> ok
[10:39:50] <cyndis> so when you do git fetch, git downloads new commits. git pull in addition tries to merge the commit the upstream branch points to on top of your current branch commit
[10:39:52] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[10:40:29] <cyndis> git pull --rebase doesn't try to merge but instead rebase (takes the oldest common commit then starts laying commits on top of that)
[10:40:37] <xenocons> hmm
[10:41:31] <xenocons> i think i see
[10:42:09] <xenocons> so i should be doing git fetch within 'master'
[10:42:24] <xenocons> to pull the updates in master that differ from my previous branch (incoming)?
[10:42:46] <cyndis> no, git fetch downloads everything, it doesn't know anything about your local branches
[10:43:32] <cyndis> you just created the master branch based on the upstream master branch, so it should point to the newest commit
[10:44:47] <cyndis> in the future you can do git pull, which will do git fetch to download everything, then if you don't have any local commits, just update the commit the current branch is pointing to to the newest one
[10:45:23] <xenocons> hmm
[10:45:38] <engla> if you have an old clone, just do  "git checkout master; git pull"
[10:46:01] <xenocons> what do i run now to ensure i have the latest commits (all this talk of clones makes me want to watch starwars)
[10:46:39] <cyndis> if your current branch is master, then "git pull"
[10:46:58] <cyndis> well, what engla said
[10:46:59] <xenocons> hrm, 'already up to date'
[10:47:06] <xenocons> so i guess git checkout master
[10:47:06] <cyndis> then it's already up to date :)
[10:47:12] <xenocons> because my previous branch was incoming?
[10:47:28] <xenocons> oh
[10:47:34] <xenocons> ok so git tells me im being stupid nice
[10:47:41] <xenocons> 'already on master'
[10:47:47] <xenocons> i guess ill just try make and see what happens
[10:47:58] <cyndis> when you do `git log`, is the topmost commit 775501?
[10:48:24] <xenocons> commit 7755018074a7802e47ae61f69f5e2b5364a12eb8
[10:48:34] <cyndis> ok. that is the newest.
[10:48:44] <xenocons> interesting, it must have pulled really fast then heh
[10:49:08] <cyndis> well, if you have cloned or pulled in the last 9 hours, you already had the commit on your machine
[10:49:14] <cyndis> or fetched
[10:49:48] <xenocons> i probably should be more careful of what git commands i try to brute force
[10:50:11] <cyndis> well, you can't do git push --force, so you can't break everything :p
[10:50:34] <xenocons> ill avoid using the word force on anything except apt-get heh
[10:50:57] <cyndis> yeah :p
[10:54:35] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[10:54:35] *** ChanServ sets mode: +o dherman
[10:55:30] *** Joins: ssbr (ssbr@moz-2D56B53B.dsl.bell.ca)
[11:01:14] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[11:02:43] *** Quits: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de) (Ping timeout)
[11:07:12] *** Quits: deLta30 (quassel@360E25A5.C7240F89.E7E9D4A8.IP) (Ping timeout)
[11:07:21] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[11:07:25] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[11:07:45] <cmr> Eridius: awesome!
[11:12:44] *** Quits: lmandel (lmandel@moz-ABC20CF2.rev.sfr.net) (Quit: lmandel)
[11:16:07] *** Quits: KindOne (KindOne@moz-85B3DB18.dynamic.ip.windstream.net) (Ping timeout)
[11:19:56] *** Joins: KindOne (KindOne@moz-BF5224B5.dynamic.ip.windstream.net)
[11:20:13] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[11:20:31] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[11:20:55] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[11:21:38] *** kimundi is now known as zz_kimundi
[11:23:05] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[11:23:05] *** ChanServ sets mode: +o dherman
[11:23:45] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[11:23:46] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[11:27:37] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[11:30:03] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:31:44] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[11:32:04] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:32:17] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[11:32:27] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (Ping timeout)
[11:33:07] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[11:38:13] *** Joins: Blei (philipp@moz-E43C912C.ethz.ch)
[11:40:42] *** Joins: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP)
[11:41:08] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[11:44:01] *** Quits: sankha93 (Instantbir@A13A4AC8.A5DB5020.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[11:44:15] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:45:20] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Quit: Leaving)
[11:46:09] <xenocons> rustc 0.6 (7755018 2013-06-13 19:06:47 -0700) latest?
[11:46:24] <xenocons> builds are wayyyyy quicker on linux, and rustc itself seems to run at 5x the speed
[11:47:04] <cyndis> the first thing in the parentheses is the first part of the commit hash and http://github.com/mozilla/rust shows the newest commit hash
[11:47:20] <xenocons> ah
[11:47:30] <xenocons> okay that makes sense, 7755018
[11:49:44] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[11:50:14] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[11:50:14] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[11:50:37] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[11:50:37] *** Quits: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net) (Ping timeout)
[11:51:04] *** Joins: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[11:56:18] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[11:58:57] * xenocons tries to think of something to code
[11:59:13] <xenocons> wanted to write an irc bot, hows the networking stuff looking?
[11:59:46] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[12:02:48] <cyndis> the new io stuff isn't there yet, so not very good
[12:02:59] <cyndis> otoh, an ircbot doesn't require very complicated networking
[12:03:57] <xenocons> true, but i mostly use ircbots to learn the io of a language
[12:04:00] <xenocons> ill wait till its more cemented
[12:04:08] <xenocons> (otherwise ill learn stuff that will change)
[12:04:13] <cyndis> true
[12:05:06] *** zz_kimundi is now known as kimundi
[12:06:55] *** Joins: sankha93 (Instantbir@A13A4AC8.A5DB5020.8B6C1D65.IP)
[12:07:10] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[12:07:49] *** Quits: KindOne (KindOne@moz-BF5224B5.dynamic.ip.windstream.net) (Ping timeout)
[12:09:16] <xenocons> eheh linux rust build seems to have rusti
[12:09:31] <xenocons> so far linux is scoring all the points with me!
[12:09:49] <kimundi> rust rusti != irc rusti :)
[12:10:10] <xenocons> hah
[12:10:21] <xenocons> i expect as much
[12:10:44] <kimundi> rust rustc != rust rusti != irc rusti == rust rustc
[12:10:54] <xenocons> right
[12:11:07] <xenocons> please use <> for representing not in logic statements (jk)
[12:11:12] <kimundi> (we really need another name for either of them :P)
[12:11:20] <xenocons> im looking forward to see a good robust rust repl
[12:11:25] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[12:11:32] <cmr> I'm looking forward to see a good robust rust compiler
[12:11:34] <cmr> :p
[12:11:39] <xenocons> :p
[12:11:43] <xenocons> time time
[12:11:48] * xenocons learns via repl
[12:11:58] *** Joins: KindOne (KindOne@moz-E6FB9F8C.dynamic.ip.windstream.net)
[12:12:08] <cmr> Yeah, I got *really* confused when the repl was telling me something was false when it should have been true
[12:12:16] <xenocons> lol
[12:12:19] <cmr> xenocons: rusti here responds to private message
[12:12:21] <xenocons> thats not good
[12:12:24] <xenocons> cmr: yeh
[12:12:38] <xenocons> i uh... i have a confession, ive used private time with rusti
[12:13:50] <bstrie> xenocons: rusti runs on a 1970s time-sharing mainframe, we'll be sending you a bill
[12:14:13] <xenocons> could you please line item the vimrc of yours i stole?
[12:15:00] *** Quits: KindOne (KindOne@moz-E6FB9F8C.dynamic.ip.windstream.net) (Ping timeout)
[12:16:06] *** Joins: KindOne (KindOne@moz-D89C0AE9.dynamic.ip.windstream.net)
[12:16:52] <bstrie> xenocons: the vimrc is partially a keylogger that intercepts your banking information and sends us a penny every time you change modes while editing a rust file
[12:17:03] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[12:17:13] *** Joins: diegoholiveira (Mibbit@7B982102.30E6B9A4.1E8E695C.IP)
[12:17:14] <xenocons> knew it! when i saw that pathogen#infect i was worried
[12:17:19] <bstrie> haha
[12:17:47] *** Joins: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz)
[12:18:20] <diegoholiveira> hi guys. I'm trying to compile rust on my ubuntu 13.04 and i'm getting this error: make: *** [x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so] Error 137 
[12:18:28] <diegoholiveira> How can I fix it? :/
[12:18:40] *** Quits: KindOne (KindOne@moz-D89C0AE9.dynamic.ip.windstream.net) (Ping timeout)
[12:18:53] <bstrie> I've never seen that error before
[12:19:00] *** Joins: KindTwo (KindOne@moz-14068AE0.dynamic.ip.windstream.net)
[12:19:48] <bstrie> diegoholiveira: is there any other error message?
[12:20:19] <diegoholiveira> bstrie: i don't notice, but i'll log the error on gist, one minute
[12:20:24] <bstrie> is incoming gone?!??!
[12:20:39] <xenocons> bstrie: yup
[12:20:52] <bstrie> hallelujah
[12:20:53] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[12:21:26] *** Quits: KindTwo (KindOne@moz-14068AE0.dynamic.ip.windstream.net) (Ping timeout)
[12:21:49] <diegoholiveira> bstrie: https://gist.github.com/diegoholiveira/87584e523837d274bdb1
[12:22:21] <kimundi> bstrie: incoming died, and the 30+ open PR with it :P
[12:22:58] *** Joins: KindOne (KindOne@moz-2CF6F86F.dynamic.ip.windstream.net)
[12:23:19] <bstrie> kimundi: a necessary sacrifice
[12:23:24] <bstrie> diegoholiveira: are you building 0.6 or master?
[12:23:37] <diegoholiveira> bstrie: master
[12:23:39] <bstrie> because I hear that master is broken right now
[12:23:47] <bstrie> see the chaos mentioned in the channel topic
[12:23:51] <kimundi> diegoholiveira: Try a fresh new clone
[12:24:39] <kimundi> Unless that error is caused by a success ful build than causes a crash later, then its just the fault of the burning tree
[12:25:00] <xenocons> i built master fine
[12:25:06] <xenocons> not 30 mins ago
[12:25:11] <diegoholiveira> bstrie: it is a fresh clone, i did 10 minutes ago. i got an error on 0.6 too, the same error with another .so file
[12:25:18] <cyndis> out of memory?
[12:25:19] <kimundi> okay, then thats not the problem 
[12:25:35] <kimundi> Right, atm you need more than 2.5gb
[12:25:51] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[12:25:52] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (Ping timeout)
[12:26:10] <diegoholiveira> it will be out of memory since i'm doing it on a vm with 512mb :(
[12:26:54] <kimundi> well, you need swap then. And patience
[12:27:20] <diegoholiveira> i'll try to do it on my own machine
[12:27:25] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[12:27:43] <kimundi> with 512+swap it will take at least a few hours.
[12:27:51] <kimundi> would be better, yeah
[12:30:04] <EXetoC> I canceled after about 10 hours on 1gb + swap. that was in a vm though
[12:31:09] *** Joins: eagen (eagen@moz-92A457CB.hsd1.mn.comcast.net)
[12:31:58] *** Quits: eagen (eagen@moz-92A457CB.hsd1.mn.comcast.net) (Quit: Leaving)
[12:32:44] <xenocons> hm nhice https://gist.github.com/swlaschin/5742974
[12:32:48] <xenocons> er, ignore wrong chan
[12:32:51] <xenocons> sorry
[12:33:11] <xenocons> irssi restart has wreaked havoc
[12:33:37] <EXetoC> twice as much ram though, so I'm not sure it's much slower in my case, if at all. either way, good luck!
[12:34:06] *** Quits: fabiand (fabiand@moz-EBD6E4AA.adsl.alicedsl.de) (Quit: Verlassend)
[12:34:33] *** Joins: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP)
[12:35:42] *** Quits: diegoholiveira (Mibbit@7B982102.30E6B9A4.1E8E695C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:38:22] *** Joins: lmandel (lmandel@moz-ABC20CF2.rev.sfr.net)
[12:42:19] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[12:48:46] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[12:49:12] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Ping timeout)
[12:49:59] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[12:50:23] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[12:50:58] <engla> peak resident will be around 2.5GB so you probably need a lot more than that
[12:51:11] <engla> to allow for fragmentation
[12:51:45] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[12:51:55] <engla> there was a fix to reduce memory use slightly, but no snapshot has been taken after that point
[12:54:48] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[12:56:38] *** mindginative is now known as rix
[12:58:10] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[12:58:17] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[13:01:29] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[13:01:35] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Quit: WeeChat 0.4.2-dev)
[13:02:29] *** kimundi is now known as zz_kimundi
[13:02:55] <Yoric> For a second, I thought this was another channel and I misunderstood engla's comment and deduced that we had an application that took 2.5Gb RAM on a Peak phone.
[13:03:01] <Yoric> I was kind of scared :)
[13:03:46] <bstrie> Yoric: well rust runs on android, so compiling rustc on a peak would take 2.5gb :)
[13:04:00] <Yoric> :)
[13:04:14] <bstrie> every time that I try to buy a peak they are sold out
[13:04:19] <bstrie> or rather a keon
[13:04:23] <bstrie> I'm a cheapskate
[13:04:27] * Yoric wonders if there is some swap on these devices.
[13:04:39] <Yoric> Well, I have a Unagi at hand, that's quite sufficient for my needs.
[13:05:35] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[13:07:12] <bstrie> Yoric: let me know if you think fxos would run on my phone: https://en.wikipedia.org/wiki/Samsung_Intensity
[13:07:17] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[13:07:32] <Yoric> bstrie: Truly, you should ask on #b2g.
[13:07:53] *** zz_kimundi is now known as kimundi
[13:07:55] <Yoric> I am not a member of the b2g team, I just happen to sit next door to them :)
[13:08:06] <bstrie> Yoric: I joke, this is a slider dumbphone from the dark era of 2009
[13:08:18] <Yoric> ah :)
[13:08:23] <bstrie> I've never actually owned a phone with a touchscreen, or that could otherwise be called "smart"
[13:08:48] <bstrie> like I said, cheapskate :P
[13:09:12] <bstrie> or perhaps it's just that my net worth is in the negative tens of thousands of dollars
[13:10:49] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[13:10:55] <Yoric> Well, before I was handed out a Unagi for testing, I had managed ~10 years without a cellphone.
[13:11:03] <Yoric> Ah no, only ~5 years.
[13:11:14] <Yoric> I briefly had a cellphone ~6 years ago.
[13:11:40] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:11:52] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:12:10] *** Quits: rix (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz) (Quit: zzZZZ)
[13:15:28] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[13:16:34] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[13:22:04] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[13:22:27] *** Joins: fabiand (fabiand@8A2FE7A0.DC24CC58.16E13E53.IP)
[13:24:58] <bstrie> I don't have a cellphone this week due to a lost charger, and I'm quite enjoying it
[13:29:13] <dbaupp> engla: you should submit your iterator bind/join as a PR
[13:29:17] *** Joins: adu (ajr@moz-68CC2A5E.washdc.fios.verizon.net)
[13:29:36] *** Joins: mib_cmoo2n (Mibbit@6626432D.50610991.5DF0D28E.IP)
[13:30:13] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:30:33] *** Quits: mib_cmoo2n (Mibbit@6626432D.50610991.5DF0D28E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:36:39] *** Joins: Amanieu (amanieu@moz-55446D05.its.manchester.ac.uk)
[13:48:43] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[13:49:31] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[13:52:43] *** Parts: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) ()
[13:53:04] *** Quits: ssbr (ssbr@moz-2D56B53B.dsl.bell.ca) (Client exited)
[13:56:54] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[14:03:06] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:05:16] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[14:07:36] *** Joins: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP)
[14:07:42] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[14:07:42] *** ChanServ sets mode: +o dherman
[14:07:58] <peeves> hey 
[14:08:11] <peeves> can anyone help me out with rust installation on windows machine\
[14:08:13] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[14:08:49] <xenocons> peeves: what problem are you having?
[14:09:36] <peeves> xenocons: as 1st step i am trying to install MinGW
[14:09:50] <peeves> xenocons: in that some error logs are coming in console
[14:10:21] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:10:22] <peeves> xenocons GUI not available
[14:10:23] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[14:10:35] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[14:10:45] <xenocons> hm
[14:10:49] <xenocons> so mingw isnt installing?
[14:10:59] *** pnkfelix1 is now known as pnkfelix
[14:11:00] <peeves> yeah
[14:11:09] <xenocons> are you running 64bit win7?
[14:11:14] <peeves> no 
[14:11:17] <xenocons> what version
[14:11:19] <peeves> on 32 bit win 7
[14:11:21] <xenocons> ok
[14:11:23] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[14:11:27] <xenocons> what download link did you use for mingw
[14:11:39] <peeves> mingw-get.exe: *** ERROR *** http://prdownloads.sourceforge.net/mingw/mingw-get-0.5-mingw32-beta-20120426-1-bin.tar.xz?download:cannot open URL mingw-get.exe: *** ERROR *** Get package: http://prdownloads.sourceforge.net/mingw/mingw-get-0.5-mingw32-beta-20120426-1-bin.tar.xz?download: download failed
[14:11:43] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[14:11:46] <peeves> these are coming in log file
[14:11:49] <xenocons> hmm
[14:11:51] <bstrie> peeves: are you using the netinstaller?
[14:11:58] <peeves> no
[14:12:11] <bstrie> I've never been able to get mingw to work with any version other than netinstall
[14:12:24] <bstrie> but you also have to make sure to get the right version of it that rust needs
[14:12:35] <peeves> xenocons: i m using this link :  http://sourceforge.net/projects/mingw/
[14:12:49] <jed> how are things looking? buildable?
[14:12:55] <peeves> cbstrie : can u provide me some link
[14:13:08] <peeves> jed: didn't got u
[14:13:52] <xenocons> ive never had mingw not install first shot
[14:14:05] *** Quits: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:14:18] *** Quits: sankha93 (Instantbir@A13A4AC8.A5DB5020.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[14:14:47] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[14:14:57] *** Joins: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP)
[14:15:19] <xenocons> (not much help i know)
[14:15:34] <peeves> xenocons: ok
[14:15:55] *** Quits: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:16:16] <xenocons> petantik: can you try manually download those files? wont help much for install purposes, but may hint network connectivity issues
[14:16:41] <Blei> actually it might help...
[14:16:50] <erickt1> nmatsakis: ping
[14:17:00] <xenocons> (i have nfi how it tries to resolve dependncies at install tiem)
[14:17:19] <Blei> http://mingw-users.1079350.n2.nabble.com/Fw-offline-install-td7578366.html
[14:19:04] *** Joins: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP)
[14:19:53] <engla> dbaupp: ok maybe I should submit it as PR. I've got some other combinators on the wishlist too, copyable -> .cycle()  and repeat(x) -> infinite stream of x
[14:20:28] <dbaupp> engla: those sound good
[14:21:10] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Ping timeout)
[14:21:39] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:21:52] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:22:39] *** Joins: spider-mario (spidermari@moz-AC2C1EAE.rev.sfr.net)
[14:23:14] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Ping timeout)
[14:23:19] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[14:23:29] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[14:24:47] *** Quits: KindOne (KindOne@moz-2CF6F86F.dynamic.ip.windstream.net) (Ping timeout)
[14:26:00] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[14:27:23] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[14:27:32] <peeves> no success yet in installing minGw on win 8 32 bit
[14:28:34] *** Quits: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:28:34] <doener> hrm, find_or_insert_with calls cannot nest. But the outer call would only modify the hashmap after the inner call finished, so there should be no problem, right?
[14:28:38] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:29:13] *** Joins: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP)
[14:29:16] *** Joins: KindOne (KindOne@moz-CE092321.dynamic.ip.windstream.net)
[14:30:35] <erickt> doener: unfortunately I don't think you'll be able to use find_or_insert_with in that case
[14:30:57] <erickt> doener: because of how borrow checking works between region pointers
[14:31:01] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[14:31:23] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[14:31:42] *** Quits: fabiand (fabiand@8A2FE7A0.DC24CC58.16E13E53.IP) (Quit: Verlassend)
[14:31:50] <erickt> doener: you should be able to still do `match map.find(&foo) { Some(x) => â€¦, None => map.insert(map.find(â€¦)) }`
[14:33:50] <doener> erickt: shouldn't that be "map.insert(); map.find()"? 
[14:34:01] <erickt> Something like that :)
[14:34:11] <erickt> I wasn't sure exactly what you were doing so I made a guess
[14:34:46] <doener> well, the result of find() as an argument to insert() doesn't make sense to me. Am I missing something?
[14:35:36] *** Quits: KindOne (KindOne@moz-CE092321.dynamic.ip.windstream.net) (Ping timeout)
[14:35:47] <doener> anyway, I get the idea. Was just wondering whether find_or_insert_with could be "tuned" to do what I want
[14:35:52] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[14:35:53] <erickt> doener: no, I just got lazy
[14:36:47] <erickt> doener: do you have an example of what you are trying to do?
[14:37:32] *** Quits: Blei (philipp@moz-E43C912C.ethz.ch) (Quit: WeeChat 0.4.1)
[14:38:43] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[14:38:59] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[14:40:11] *** Joins: KindOne (KindOne@moz-3B528C33.dynamic.ip.windstream.net)
[14:40:36] <doener> erickt: https://github.com/dotdash/rust/commit/bdc5f9dc5c8b3a679fdb22367095d1e5fca0fe66
[14:40:52] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[14:41:13] <doener> erickt: that ends with a runtime borrow check failure, because of indirection recursion
[14:41:57] <doener> s/indirection/indirect/
[14:43:11] *** Quits: peeves (Mibbit@AF45BB7F.849D01E4.A3D1B221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:43:37] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[14:44:06] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[14:44:10] <dbaupp> erickt: do you happen to know when bors'll be turned back on?
[14:45:08] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[14:47:03] *** Joins: joone (joone@E10A1781.2160464A.A34EC3BB.IP)
[14:49:10] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[14:50:20] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Connection reset by peer)
[14:50:36] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[14:50:59] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:51:19] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:55:30] *** Joins: jorendorff (jorendorff@23227100.8B146FD9.67894F1C.IP)
[14:57:41] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[14:57:56] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[14:58:05] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:00:32] <erickt> dbaupp: I don't
[15:00:36] *** Quits: KindOne (KindOne@moz-3B528C33.dynamic.ip.windstream.net) (Ping timeout)
[15:00:41] <doener> ok, there's actually a problem with nesting th calls, as the bucket calculation happens before the callback is run (obviously), and the inner call would invalidate that
[15:01:09] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[15:01:22] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[15:01:39] <erickt> doener: unfortunately I don't see any way of working around that example
[15:02:00] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[15:02:17] <doener> I'll just move the w.write_str call into the match
[15:02:22] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[15:03:09] <doener> that way I can use "s" before it's moved into the map and I avoid the second lookup
[15:04:05] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[15:04:39] *** Joins: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:04:42] *** Joins: KindOne (KindOne@moz-28B36F1A.dynamic.ip.windstream.net)
[15:04:51] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:04:54] *** Quits: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:05:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:05:40] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Connection reset by peer)
[15:05:40] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:06:45] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[15:07:06] *** Joins: fabiand (fabiand@moz-EBD6E4AA.adsl.alicedsl.de)
[15:07:43] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:08:11] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:08:53] *** Quits: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[15:09:26] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Quit: Ex-Chat)
[15:13:35] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[15:14:45] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[15:14:54] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[15:18:14] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Connection reset by peer)
[15:18:14] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:20:31] *** Joins: orshem (orshem@4A7BDF54.6CC9726A.E3D28531.IP)
[15:22:34] *** Joins: Guest_ (textual@34641662.FB4DE631.66C78B76.IP)
[15:22:36] *** Quits: Guest_ (textual@34641662.FB4DE631.66C78B76.IP) (Quit: Guest_)
[15:22:52] *** Joins: Guest_ (textual@34641662.FB4DE631.66C78B76.IP)
[15:23:13] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:28:37] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[15:30:37] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[15:30:48] *** Quits: fabiand (fabiand@moz-EBD6E4AA.adsl.alicedsl.de) (Quit: Verlassend)
[15:30:57] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:31:05] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:31:09] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Connection reset by peer)
[15:34:38] <bstrie> holy crap, updating master closed like 40 issues :P
[15:34:55] *** Joins: eholk (eholk@moz-F2365EC7.uconnect.utah.edu)
[15:35:35] <jed> is master buildable?
[15:35:41] <bstrie> not sure
[15:35:59] <jed> alright
[15:36:14] <SiegeLord> I built it yesterday fine
[15:36:23] <bstrie> jed: I see that brson reverted a whole lot of commits, those likely had to do with the breakage
[15:36:34] <bstrie> SiegeLord: did you run the test suite?
[15:36:41] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[15:36:48] <SiegeLord> Nope
[15:37:24] <SiegeLord> Why does the manual have syntax highlighting, but the normal documentation does not?
[15:38:25] <SiegeLord> And the tutorial too
[15:38:40] <bstrie> no idea
[15:39:02] *** Joins: nano (nano@moz-972880B.superkabel.de)
[15:39:14] *** Joins: berak (chatzilla@moz-DFA3A812.net.de.o2.com)
[15:39:38] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[15:39:41] *** Quits: Amanieu (amanieu@moz-55446D05.its.manchester.ac.uk) (Connection reset by peer)
[15:40:40] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:40:40] <SiegeLord> I guess I don't even know how it's generated... it starts out as an unassuming .md file
[15:41:31] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[15:42:22] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:42:23] <SiegeLord> Oh I see... it's something prep.js does
[15:42:54] *** Quits: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP) (Client exited)
[15:43:03] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:43:06] *** Quits: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[15:43:23] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[15:44:39] <dbaupp> SiegeLord: it's the {.rust} annotations that give the syntax highlighting
[15:45:19] <SiegeLord> You sure?
[15:46:51] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[15:46:52] <SiegeLord> E.g. http://static.rust-lang.org/doc/std/iterator.html#trait-iteratorutil
[15:47:04] <SiegeLord> That has {.rust} but it is not syntax-highlighted
[15:47:30] <SiegeLord> prep.js uses blacklisting to determine what's rust or not
[15:47:48] <SiegeLord> (i.e. it has to be labeled as not rust)
[15:48:31] <dbaupp> hm
[15:48:37] * dbaupp is confused
[15:48:48] <dbaupp> I thought pandoc did the syntax highlighting
[15:49:11] <SiegeLord> It probably doesn't have a rust engine
[15:49:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:49:20] <SiegeLord> Well, at least mine doesn't
[15:49:20] <dbaupp> it does
[15:49:46] <SiegeLord> In that case, the pandoc on the machine that generates the webpages doesn't
[15:50:14] <dbaupp> oh, right, yeah, IIRC that's the case
[15:50:34] <dbaupp> (what version of pandoc do you have? I've got 1.11.)
[15:50:38] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[15:50:46] <SiegeLord> 1.9.4.2
[15:51:01] <SiegeLord> Time to upgrade!
[15:51:13] <SiegeLord> Hopefully it's not hard to compile...
[15:52:16] <orshem> hello rusties
[15:52:29] <orshem> does the & ptr inherit mutability?
[15:52:56] <dbaupp> orshem: nope
[15:53:09] <orshem> dbaupp: good!
[15:53:12] <orshem> thanks
[15:53:44] <orshem> i'm starting to understand borrowing
[15:53:49] <orshem> a bit
[15:57:32] <orshem> is it possible to get fmt to print the type of an enum?
[15:58:11] <dbaupp> what do you mean? more than just what fmt!("%?", foo) does?
[15:58:38] <kimundi> rusti: enum Foo {A, B, C}; A
[15:58:38] *** Joins: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net)
[15:58:40] -rusti- A
[15:58:51] *** Joins: Amanieu (amanieu@moz-7676620D.its.manchester.ac.uk)
[15:59:56] *** Quits: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP) (Quit: Konversation terminated!)
[16:00:14] <orshem> dbaupp: i didn't know about fmt!("%?", foo) :)
[16:00:34] *** Joins: MaikKlein (maik@moz-94281F77.dip0.t-ipconnect.de)
[16:00:37] <dbaupp> %? is really handy :)
[16:03:50] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[16:04:23] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[16:04:23] *** ChanServ sets mode: +qo graydon graydon
[16:05:10] <graydon> how's our chaos coming along?
[16:05:19] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[16:05:41] <dbaupp> graydon: well, std doesn't test because of https://github.com/mozilla/rust/pull/7129
[16:06:15] *** Parts: berak (chatzilla@moz-DFA3A812.net.de.o2.com) ()
[16:06:20] <graydon> ok. considering we're in damage-repair mode, shall I merge that?
[16:06:37] *** Quits: MaikKlein (maik@moz-94281F77.dip0.t-ipconnect.de) (Ping timeout)
[16:06:54] <dbaupp> I'm not complaining, and it is the correct fix
[16:07:21] <dbaupp> (as far as I can tell, especially given it was my patch that was reverted. sorry for breaking things everyone)
[16:08:30] <graydon> np
[16:09:01] <SiegeLord> Sweet, the new pandoc worked
[16:09:09] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:09:09] <ghrust> 01[13rust01] 15graydon pushed 2 new commits to 06master: 02http://git.io/Ki2p3w
[16:09:09] <ghrust> 13rust/06master 14f7e1daa 15Erick Tryzelaar: std: get std::path tests to work again
[16:09:09] <ghrust> 13rust/06master 14eadd83d 15Graydon Hoare: Merge pull request #7129 from erickt/fix-std-path-tests...
[16:09:10] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:09:16] <SiegeLord> Someone should give the website making machine a new version too
[16:10:24] <graydon> what's the canary-failure? brian was tracking that down but .. no dice yet?
[16:10:34] <graydon> SiegeLord: new version of what?
[16:10:39] <dbaupp> SiegeLord: :)
[16:11:05] <orshem> weird. if i chain methods i get  borrow errors, but if separate them into two lines they compile.
[16:11:27] *** Joins: muslimmasry (muslimmasr@92A120C1.B0415692.563BE9DB.IP)
[16:11:28] <dbaupp> graydon: pandoc
[16:11:29] <muslimmasry>  do yahoo,skype,other chat&social communication prog spy4isreal&usa?????????
[16:11:30] <muslimmasry> so they record&analyse everything we type???
[16:11:30] <muslimmasry>  ...do chat prog spy4isreal&usa???????do chat prog spy4isreal&usa???????
[16:11:31] <muslimmasry>  do yahoo,skype,other chat&social communication prog spy4isreal&usa?????????
[16:11:33] <muslimmasry> so they record&analyse everything we type???
[16:11:35] <muslimmasry>  ...do chat prog spy4isreal&usa???????do chat prog spy4isreal&usa???????
[16:11:35] <muslimmasry>  do yahoo,skype,other chat&social communication prog spy4isreal&usa?????????
[16:11:37] <muslimmasry> so they record&analyse everything we type???
[16:11:38] <muslimmasry>  ...do chat prog spy4isreal&usa???????do chat prog spy4isreal&usa???????
[16:12:07] <dbaupp> orshem: do you mean foo().bar().baz()?
[16:12:16] <orshem> dbaupp: yes
[16:12:32] *** graydon sets mode: +b *!muslimmasr@92A120C1.B0415692.563BE9DB.IP
[16:12:33] <dbaupp> yeah, rvalues aren't given a long enough lifetime
[16:12:58] <orshem> that's a bug? i hope
[16:13:03] <dbaupp> (i.e. the return value from foo doesn't live long enough if bar returns a borrowed pointer)
[16:13:10] <dbaupp> yeah, I think so
[16:13:54] *** Quits: muslimmasry (muslimmasr@92A120C1.B0415692.563BE9DB.IP) (User has been banned from Mozilla (abuse))
[16:14:33] <jed> orshem: if you return &'self pointers method chaining like that will work
[16:15:33] <orshem> jed: i returned &'r. is there a difference?
[16:16:08] <orshem> well Option<&'r bla>
[16:16:21] <jed> orshem: 'self is a special lifetime that gives references the same lifetime as their calling object; using 'r would give them all the same immediately-expiring lifetime
[16:17:04] <jed> actually 'r might work
[16:17:09] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Ping timeout)
[16:17:10] <orshem> jed: is there some in depth borrowed pointers tutorial?
[16:17:17] <jed> but i think you would maybe need &'r Option
[16:17:26] <orshem> i keep running into borrow errors all the time
[16:17:31] <dbaupp> rusti: (~"foo").as_bytes().slice(0, 2).to_owned()
[16:17:32] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bZVK
[16:17:38] <jed> orshem: http://smallcultfollowing.com/babysteps/blog/2012/07/17/borrowed-pointer-tutorial/
[16:17:45] <jed> http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[16:17:55] <dbaupp> jed: neither 'self nor 'r work
[16:17:57] <jed> these two are how I learned about borrowed pointers
[16:18:02] <orshem> jed, i've read the second one
[16:18:04] <dbaupp> (without a temporary)
[16:18:12] <orshem> it is not enough
[16:18:19] <orshem> it does not cover the hard cases
[16:18:27] <orshem> tree like objects and such
[16:18:40] <orshem> without cycles, ofc
[16:19:05] <jed> dbaupp: I have a working implementation of a hashmap which can chain insertion calls
[16:19:17] <jed> signature is like this
[16:19:23] <orshem> jed: using only ~ and & ?
[16:19:27] <dbaupp> jed: i.e. new().insert().insert().insert()?
[16:19:39] <jed> ah wait, found the @.
[16:19:48] <dbaupp> yup :)
[16:19:51] <jed> (@mut new()).insert().insert().insert();
[16:20:11] <jed> however i believe it can work with (&'self mut new()).insert().insert()
[16:20:20] <orshem> i really need a tutorial how to use ~ and & together effectively 
[16:21:34] <orshem> can you point me some examples in the rust codebase (or servo) of complex usage of ~ and &?
[16:21:46] <dbaupp> orshem: the chaining borrow errors are a bug, and just need to be worked-around with a temporary 'let tmp = foo(); tmp.bar().baz()'
[16:22:23] <dbaupp> orshem: there this example of &, not sure if it's useful though https://gist.github.com/Aatch/5734372
[16:22:53] <orshem> dbaupp: that's what i did and i'm not knocking the language, it is just very frustrating 
[16:23:21] *** Joins: steven_is_false (trisquel@moz-144077DE.bchsia.telus.net)
[16:23:49] <cmr> bjz_: Anything you'd like announced in TWiR besides that lmath is *actually* working now?
[16:24:57] <steven_is_false> There  was a problem with lmath?
[16:25:06] <orshem> dbaupp: it's good but i'm looking for lifetime chaining meaning from one function to the other. i've a tree and i want all functions that work on it to use the same lifetime 
[16:25:07] <cmr> Yeah, it didn't build and it wasn't usable.
[16:25:14] *** Joins: Kind0ne (Mibbit@moz-D1195F29.hsd1.wa.comcast.net)
[16:25:14] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:25:15] <orshem> well that came out wrong
[16:25:17] <steven_is_false> okay
[16:25:19] <bjz_> cmr: hah, I'm not sure, I'm still hesitant about announcing anything
[16:25:59] <orshem> does the lifetime concept can understand hierarchy?
[16:26:00] <bjz_> cmr: still got lots to do :(
[16:26:12] *** Quits: lmandel (lmandel@moz-ABC20CF2.rev.sfr.net) (Quit: lmandel)
[16:26:15] <dbaupp> orshem: it should just be either `fn method<'a>(&'a self, ...) -> <something with lifetime 'a>` or `'self` if your struct has borrowed pointers
[16:26:35] <dbaupp> orshem: what do you mean by "hierarchy"?
[16:27:24] <bjz_> cmr: I'm currently doing some experimentation to see if I can reduce the code repetion, without making it completely incomprehensible :P
[16:27:39] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[16:27:49] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[16:28:06] <bjz_> cmr: still a WIP though, and it's on a local branch
[16:28:12] *** Quits: Kind0ne (Mibbit@moz-D1195F29.hsd1.wa.comcast.net) (Z:lined (diaf))
[16:28:52] <orshem> if object ~A has life time a and object ~B which is his child has lifetime b
[16:29:02] <orshem> can i model a relationship of lifetime between them?
[16:29:10] <orshem> like b will live as long as a
[16:29:21] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[16:29:26] <engla> no
[16:29:33] <dbaupp> the only thinks that have lifetimes are & pointers
[16:29:34] <orshem> i feel like i'm not coming clear, maybe it's not clear to me
[16:29:45] <dbaupp> (and data structures that contain & pointers)
[16:29:48] <dbaupp> *things
[16:29:48] <kimundi> are you sure?
[16:30:00] <orshem> well i have a tree of ~ objects
[16:30:09] <dbaupp> kimundi: not 100% sure
[16:30:10] <orshem> and a& reference to the root
[16:30:15] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[16:30:29] <orshem> can i go down the tree with the same lifetime?
[16:30:42] <dbaupp> yes, then the children live for the same lifetime as the root
[16:31:03] <orshem> dbaupp: great! that's what i want. and i'm not getting it
[16:31:12] <kimundi> I mean a &T is in a way nothing different than a struct{ptr: *T}, so even if it doesn't work now, I think it should work in general
[16:31:14] <dbaupp> a & borrowed pointer means that the structure is immutable: no-one else can mutate it
[16:31:19] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[16:31:33] <dbaupp> (i.e. neither the current function nor any other function)
[16:31:43] <orshem> i'll try it some more then
[16:32:03] <dbaupp> and so Rust automatically knows that the whole contents of a & pointer lives for at least as long as the lifetime of the & pointer
[16:32:40] <orshem> ok gotta run. thanks for all the help! 
[16:32:49] *** Quits: orshem (orshem@4A7BDF54.6CC9726A.E3D28531.IP) (Quit: Leaving)
[16:33:00] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[16:33:24] *** Joins: eschweic1 (Adium@2557E599.66715431.D25A875A.IP)
[16:33:25] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[16:33:33] *** Joins: sw17ch (sw17ch@moz-DA3743.hfc.comcastbusiness.net)
[16:34:21] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[16:35:14] *** Joins: sdh_ (sdh@4068E35B.E1257291.E435C74A.IP)
[16:35:25] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[16:35:38] *** Quits: eschweic1 (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[16:36:05] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:38:16] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:39:33] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[16:40:58] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:41:49] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[16:42:35] <bstrie> I'm getting make check failures on master (eeee master)
[16:43:13] <steven_is_false> rusti: ||{}
[16:44:17] <dbaupp> bstrie: in std?
[16:44:20] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[16:44:47] <dbaupp> bstrie: and, before or after this merge https://github.com/mozilla/rust/pull/7129 ?
[16:45:27] <bstrie> dbaupp: ah, I'll build anew then
[16:46:44] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[16:46:51] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[16:47:11] *** Parts: steven_is_false (trisquel@moz-144077DE.bchsia.telus.net) ()
[16:48:28] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[16:48:37] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[16:50:34] <kimundi> rusti: (||{}, ())
[16:50:35] -rusti- (, ())
[16:50:47] <kimundi> rusti: (||{}, ||{})
[16:50:48] -rusti- (, )
[16:53:38] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:54:34] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[16:55:08] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[16:56:52] *** Quits: Amanieu (amanieu@moz-7676620D.its.manchester.ac.uk) (Connection reset by peer)
[16:59:12] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[16:59:27] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:59:55] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Ping timeout)
[17:00:29] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[17:00:45] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[17:02:59] <kimundi> Someone here who can tell me what the full memory layout of a {&,@,~}Trait and of a {@,~}[T] is? With that I mean the representation of the smartpointers, and of the stuff interior ptr point at.
[17:03:00] *** Joins: mib_1q2glj (Mibbit@moz-A0E225F0.avcosystems.co.uk)
[17:03:13] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[17:03:54] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[17:04:56] <cmr> kimundi: if/when you get that information, put it on https://github.com/mozilla/rust/wiki/Doc-lowlevel-details please :)
[17:05:46] <kimundi> will try to do that then :)
[17:06:19] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[17:08:14] *** Quits: mib_1q2glj (Mibbit@moz-A0E225F0.avcosystems.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[17:08:41] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:10:10] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[17:11:26] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[17:12:08] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[17:12:08] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Connection reset by peer)
[17:12:40] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:13:21] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:13:35] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[17:14:46] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:14:46] *** ChanServ sets mode: +o pcwalton
[17:15:06] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[17:15:07] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[17:15:09] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:15:10] *** Joins: igl (igl@moz-7DA75B92.adsl.alicedsl.de)
[17:18:44] <bstrie> is vec::from_fn the best way to allocate a zeroed unique vector?
[17:18:54] <bstrie> or is there a function speficically for creating zeroed vectors
[17:19:15] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[17:19:20] <kimundi> rusti: ~[0, .. 15]
[17:19:21] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[17:19:32] <bstrie> kimundi: ah, but my size is unknown at compile time
[17:19:40] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[17:19:48] <kimundi> rusti: let foo = 49; ~[0, .. foo]
[17:19:49] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cFbG
[17:20:04] <bstrie> oh hm, I thought I tried that...
[17:20:16] *** Joins: MaikKlein (maik@moz-94281F77.dip0.t-ipconnect.de)
[17:20:28] <kimundi> what the... thats a dynamic vector, I thought that would work :(
[17:21:02] *** Joins: nano (nano@moz-972880B.superkabel.de)
[17:21:05] <kimundi> oh well, grammar artifact for uniform fixed-size/dynamic vector I guess
[17:22:12] <bstrie> is that a bug?
[17:22:55] <engla> vec::from_elem  is for copyable initialization elements, like 0
[17:25:17] <pcwalton> it's not a bug
[17:25:32] <pcwalton> [foo, ..N] syntax is for constant N only
[17:25:44] <pcwalton> otherwise it'd be complicated to figure out
[17:26:03] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:26:21] <bstrie> gotcha
[17:26:59] <bstrie> engla: I assume there's optimization magic to make `from_elem(x, y)` faster than `from_fn(x, |_| y)` ?
[17:27:15] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:27:15] *** ChanServ sets mode: +o brson
[17:28:25] <pcwalton> engla: it should be the same speed after optimization
[17:28:31] <pcwalton> bstrie: ^
[17:28:34] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[17:29:21] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[17:30:54] <kimundi> Hm, it seems there are more devs on now, so sorry for asking again. Could someone tell me what the full memory layout of a {&,@,~}Trait and of a {@,~}[T] is? With that I mean the representation of the smartpointers, and of the stuff interior ptr point at. Thx in advance :)
[17:32:18] <kimundi> r/smartpointer/fatpointer/
[17:36:08] *** Joins: mib_w04wcp (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:36:11] *** Quits: mib_w04wcp (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: mib_w04wcp)
[17:36:14] <brson> graydon: I still haven't solved the ebml codegen problem
[17:36:24] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:36:31] <graydon> ok
[17:36:36] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Connection reset by peer)
[17:36:45] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[17:36:46] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[17:36:47] <brson> graydon: I think it has to do with disabling frame pointer elimination, but so far I haven't been able to fix it by turning on frame point elimination
[17:36:56] <graydon> huh
[17:37:06] <graydon> gotta step out for a sec, back in a moment
[17:37:36] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[17:38:22] <lahwran> this isn't on topic, but you folks may be amused by how crazy js is: https://gist.github.com/lahwran/d3c682b22ab035308b7f
[17:38:27] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[17:38:32] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:39:04] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[17:39:10] <bblum> who wants to talk to me about noncopyable stack closures
[17:39:14] *** Joins: Blei (Philipp@moz-96D25F7A.cust.bluewin.ch)
[17:40:02] <Blei> any known issues about calling convention on windows?
[17:41:47] *** Joins: steven_is_false (steven@moz-144077DE.bchsia.telus.net)
[17:41:53] <brson> Blei: there are some bugs in ffi struct arguments
[17:43:09] <Blei> hmm, i'm only passing an int though
[17:43:31] <Blei> it's a dynamically looked up function pointer though, if that makes a difference
[17:44:17] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:45:33] <Blei> ah, and now a segfault in glue_drop XD
[17:45:54] <Blei> with stdcall. when using cdecl it just prints an incorrect value
[17:46:47] *** Joins: jez0990 (quassel@moz-3BA8545E.kimsufi.com)
[17:47:43] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[17:49:17] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:49:41] <bstrie> pcwalton: every time that you mention replacing `~` with `new` I get nervous... I'd really like to see a complete big-picture overview of whatever you have in mind
[17:50:23] <pcwalton> bstrie: nmatsakis and I have been talking about "new Foo::init()" "new(gc) Foo::init()"
[17:50:24] <pcwalton> etc
[17:50:51] *** Joins: josh (josh@F6368174.6206BE40.7FC6A66E.IP)
[17:50:56] <pcwalton> one uniform syntax for all allocations supporting custom smart pointers too
[17:51:50] <pcwalton> for one thing it's more consistent and supports custom smart pointers, for another I've found that having allocation be so small means that people allocate *way* too much in rust
[17:52:01] <pcwalton> like people write my_string == ~"foo"
[17:52:06] <pcwalton> without realizing that this allocates
[17:52:10] <pcwalton> my_string == new "foo"
[17:52:15] <pcwalton> now that's obvious
[17:52:18] <kimundi> bstrie: And I'm working on a alternative syntax for it: https://gist.github.com/Kimundi/5744578
[17:53:09] <josh> pcwalton++, that is frustrating
[17:53:29] <josh> allocation is very unclear
[17:53:39] <pcwalton> it's pretty clear once you know it
[17:53:42] <pcwalton> ~ or @ always allocate
[17:53:50] <pcwalton> nothing else does (except || but that's being fixed)
[17:54:05] <pcwalton> but it could be improved I think
[17:54:26] <pcwalton> put another way, I think allocation is clearer in Rust than any other language other than C or C++ but I still think we could do better ;)
[17:54:32] <sp3d> obj-c's whole alloc/init thing is kinda interesting
[17:54:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:55:08] <pcwalton> there's a temptation among rust programmers to just add ~ or @ sigils until the code compiles
[17:55:11] *** Quits: idkfa (idkfa@moz-141F54A4.krasinfo.ru) (Client exited)
[17:55:16] <pcwalton> but this is very bad because you're adding allocations
[17:55:25] <pcwalton> better to seek out alternatives before you add sigils
[17:56:32] *** Joins: jedestep (chatzilla@34641662.FB4DE631.66C78B76.IP)
[17:56:57] <kimundi> pcwalton: I'm just fearing that switch to keywords there leads to java-esque verbosity
[17:57:03] *** Joins: mib_htoq9o (Mibbit@moz-D3D15A0C.vie.surfer.at)
[17:57:18] <pcwalton> we're still far from "public static void main"
[17:57:22] <pcwalton> and we will never get there
[17:57:31] <sp3d> is there a way the compiler/a lint could detect local needless allocations and warn?
[17:57:39] <pcwalton> sp3d: it already does to some degree but it's hard
[17:57:43] <sp3d> globally probably not but... yeah
[17:57:53] *** Joins: koomi (koomi@moz-F77EEF5.pools.arcor-ip.net)
[17:58:04] <pcwalton> in general you shouldn't allocate unless you really mean to
[17:58:34] <pcwalton> in sprocketnes I tried to avoid typing ~ and @ as much as possible, and in Servo too
[17:59:10] <SiegeLord> How would you create an @ allocation? new(@) ?
[17:59:22] <pcwalton> new(gc), new(@), or maybe new@
[17:59:29] <josh> I have a f1.rs file with a couple of "pub fn"s and a #[linkâ€¦, and in the same dir I have a second .rs file, f2.rs, that needs to use things in the f1 file. I can't get the compiler compiling f2 to find the f1 crate.
[17:59:44] <kimundi> The nice thing about 'let foo: ~T = ~42;' compared to 'let foo: Uniq<T> = new 42;' is that you can see at the type that this is a allocation.
[17:59:54] <pcwalton> it'd be
[17:59:58] <pcwalton> let foo: ~T = new 42;
[18:00:15] <pcwalton> the problem is not that
[18:00:20] <kimundi> hmm
[18:00:22] <pcwalton> the problem is when people write foo == ~"hello"
[18:00:23] <pcwalton> or whatever
[18:00:31] <Blei> josh: -L .
[18:01:06] <engla> pcwalton: I thought that problem came from not allowing comparison to &str
[18:01:11] <kimundi> pcwalton: Well people coming from, eg, java might just as well write 'new "hello"'
[18:01:26] <pcwalton> sure, but then it's really obvious what they're doing :)
[18:01:43] <josh> Blei: thanks, that worked
[18:02:14] <kimundi> It think that is a problem that can be managed by education through the tutorial and lint warnings.
[18:02:33] *** Joins: ssbr (ssbr@moz-2D56B53B.dsl.bell.ca)
[18:02:54] <jedestep> the warnings already seem to catch a decent number of unneeded allocations
[18:03:45] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:03:57] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[18:03:59] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:05:05] <SiegeLord> let a = new A::new(); seems weird
[18:05:13] <pcwalton> it'd probably be let a = new A::init()
[18:05:33] *** Quits: jj2baile_ (jon@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[18:05:50] <SiegeLord> It's not really 'init' if it returns a type...
[18:06:09] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[18:06:11] <kimundi> Still weird. The new doesn't construct the thing right of it, it just wraps it in a box :)
[18:06:37] <SiegeLord> Yeah, that's what I was getting at... "new" in my mind is overloaded as a constructor
[18:06:38] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[18:07:28] <engla>  so A::init() returns a value and  new A::init() makes sure that value is allocated in the appropriate box? Could that work with arbitrary functions?
[18:07:40] <Eridius> pcwalton: I'm going to die a little inside if we introduce `new` as a keyword :/
[18:07:56] <MaikKlein> we get a new keyword? 
[18:08:04] <kimundi> engla: It would be the same as ~ A::init() today
[18:08:04] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[18:08:10] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:08:38] <bstrie> pcwalton: if ~ sticks around in types then I'd feel less gross about it
[18:08:47] <bstrie> I just really really like the ~ sigil
[18:09:04] <pcwalton> well, it seems as though everyone dislikes "new"
[18:09:10] <MaikKlein> I also like the ~
[18:09:25] <pcwalton> so maybe we can overload "@" somehow
[18:09:31] <SiegeLord> Re my comments, I'd be more satisfied with "box"
[18:09:35] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[18:09:46] <pcwalton> @gc foo() or something
[18:10:00] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[18:10:47] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[18:11:03] <bstrie> pcwalton: ~ for allocation is one of those things that's just so inadvertently beautiful that people will resist getting rid of it... same for rust's `|| foo` closure syntax, there was someone calling for C++'s capture-clause syntax at the front of rust closures and I just couldn't stand how despoiling it was
[18:11:15] <pcwalton> I think it's pretty guly
[18:11:16] <pcwalton> ugly
[18:11:19] <pcwalton> but that's maybe just me
[18:11:57] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[18:12:31] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[18:12:54] <engla> only ugly when there are 0 arguments
[18:13:16] <bstrie> pcwalton: there are also people like me who get visceral, subconscious negative reactions to looking at C++, and having ~ peppered around reassures my reptile-brain that this is a different language. it's not rational, just emotional
[18:13:34] <kimundi> pcwalton: I'm working on version 2 of my proposal atm... So far I have something like '@Gc foo()' -> 'SmrtPtr::alloc::<Gc>(|| foo())' and '@Arena(bar) foo()' -> 'SmrtPtr::alloc_into::<Arena>(bar, || foo())'
[18:13:36] *** Quits: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu) (Ping timeout)
[18:14:08] <pcwalton> I actually think C++ looks rather beautiful
[18:14:09] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Connection reset by peer)
[18:14:14] <pcwalton> but I may be the only one in the universe who thinks that :)
[18:14:27] <flu_> probably :-P
[18:14:38] <pcwalton> at least looking at WebKit
[18:14:39] <pcwalton> it's quite nice
[18:15:07] <Eridius> haha
[18:15:08] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Quit: victorporof)
[18:15:21] <Eridius> I don't have a problem with C++, but.. I don't want rust to look like C++
[18:15:23] <MaikKlein> so you want to introduce a new keyword for the gc? is this really necessary? Couldn't you just do sth like "use gc {  let a = @Foo; } // now uses gc" , use ref {  let a = @Foo; } // now uses ref counting ". So the user could always decide if he wants a gc or if he wants to do ref counting
[18:15:31] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[18:15:44] <pcwalton> that doesn't interact well with macros among other things
[18:15:48] <kimundi> MaikKlein: Its not just for the Gc, it's for any custom, smartpointer
[18:16:20] <kimundi> MaikKlein: Gc would be a library type like Rc<> or Arc<>
[18:18:19] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[18:19:22] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:19:50] <Blei> heh, this is so weird
[18:20:14] <Blei> the passed arguments to the function pointer don't make a difference. always the same values are received
[18:20:42] <MaikKlein> ah so you want to give the user the power to do custom memory management.
[18:21:48] <bstrie> Blei: it'd be weirder if the received values were 1) tomorrow's winning lotto numbers and 2) the exact date of your death in ISO 8601 format
[18:22:04] <Blei> bstrie: maybe they are!?!
[18:22:11] <bstrie> you'll know by tomorrow!
[18:22:27] <Blei> (or my death, whichever is sooner)
[18:22:36] <bstrie> ofc
[18:23:07] <MaikKlein> haha
[18:25:47] <pcwalton> MaikKlein: yup, it's a requirement for Servo
[18:26:20] <kimundi> Attempts to change you mind aside, I have a syntax question. :) Would this be a ambigious grammar for deciding between static-fn allocation (Gc, Rc) and in-object allocation (Arena)?: <expr> := [ <path '::'> ]'@' <ident> [ '(' <expr> ')' ] <expr>
[18:28:03] *** Quits: koomi (koomi@moz-F77EEF5.pools.arcor-ip.net) (Ping timeout)
[18:28:07] <mitsuhiko> how awesome is that: http://www.reddit.com/r/rust/comments/1gag3t/list_comprehensions_in_rust_iterator/
[18:28:11] <mitsuhiko> does that actually work now?
[18:28:54] <Eridius> mitsuhiko: it should, although it's a far cry from the power of Haskell list comprehensions :
[18:28:55] <bstrie> mitsuhiko: if you're on master, I believe it does
[18:28:57] <Eridius> :(
[18:29:24] <bstrie> Eridius: rust is only a first-order approximation of haskell's expressiveness, there will always be rounding errors
[18:29:32] <MaikKlein> can't you just let the user overload the ~ and @ like let a = mycustomsp::@Foo;
[18:29:40] *** Joins: blitter (blitter@moz-FB45689C.dyn.centurytel.net)
[18:29:46] <Eridius> bstrie: true, although in this case it's not a lack of higher-order types that's the problem
[18:30:27] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Connection reset by peer)
[18:30:46] <steven_is_false> I think the problem with custom user memory types is that we don't have a general, and safe way to represent uninitialized data.
[18:31:17] <bstrie> steven_is_false: is "safe" and "unitialized" a contradiction?
[18:31:37] <steven_is_false> bstrie: Maybe we could find some way to handle it.
[18:31:42] <kimundi> steven_is_false: Well we kinda have a way to ropresent an initialisation for that
[18:31:43] <sp3d> not if you can *only* initialize uninitialized data, I'd think
[18:32:06] <sp3d> (as opposed to reading it)
[18:32:16] <MaikKlein> like always initialize with default values?
[18:32:19] <steven_is_false> Anyways, what's wrong with Gc::new(5)?
[18:32:37] <kimundi> '|| foo()' => safe way to handle the initialisation of memory with the return value of foo()
[18:32:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:32:54] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[18:33:00] <steven_is_false> kimundi: neat
[18:33:37] <Blei> kimundi: how does foo construct its return value?
[18:33:52] <Blei> i don't see how that is different from the current state
[18:33:58] <pcwalton> steven_is_false: the "new" operator (or however we spell it) will handle that
[18:34:09] <pcwalton> that's why we need something like a "new" operator for custom smart pointer types
[18:34:19] <steven_is_false> pcwalton: But why do need a new operator?
[18:34:21] *** Quits: jorendorff (jorendorff@23227100.8B146FD9.67894F1C.IP) (Quit: jorendorff)
[18:34:21] <pcwalton> (and we need custom smart pointer types; it's a requirement for Servo due to JS GC)
[18:34:32] <MaikKlein> just please no $ signs in rust :p
[18:34:38] <pcwalton> because Gc::new(|| Thingy::init()) would be really ugly :)
[18:34:46] <bstrie> MaikKlein: that's guaranteed, $ is strictly reserved for macros
[18:34:48] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:34:54] <MaikKlein> puh
[18:35:15] <steven_is_false> pcwalton: Maybe some kind of nice thunk syntax would work?
[18:35:17] <pcwalton> also I think it would cause compilation speed problems
[18:35:46] <bstrie> feature request: let the euro sign or the yen sign stand-in for $ so that the international audience can use macros
[18:35:56] <pcwalton> also, if people really dislike a "new" operator imagine what would happen if you had to write "Unique::new(||)" instead of new ;)
[18:36:12] <Eridius> bstrie: you only need $ to write macros
[18:36:12] <bstrie> pcwalton: rebellion and forking would happen :P
[18:36:17] <Eridius> you can use them without it
[18:36:43] <Eridius> We should use â˜ƒgc
[18:36:44] <bstrie> Eridius: so what you're saying is that all non-americans are second-class citizens? you make me sick
[18:36:56] <jedestep> how can I address a static function in a trait that takes a generic? right now I'm getting an error saying a type can't be determined
[18:36:58] <steven_is_false> pcwalton: But what do you think about the thunk syntax idea? Also it'd be Gc::new(Thingy::init)
[18:37:06] <Eridius> bstrie: o_O I'm saying writing macros is _far_ less common than using them
[18:37:10] <Eridius> most people aren't going to be writing macros
[18:37:11] <bstrie> :P
[18:37:17] <pcwalton> it's not Gc::new(Thingy::init)
[18:37:21] <pcwalton> because that incurs a move
[18:37:39] <kimundi> steven_is_false: Mostly because there are aditional requirements: 1. A way to construct the value in place 2. Allocate in a global allocator (Rc, Gc) 3. Allocate in a object-based allocator (Arena) 4. (optionally )Handle dynamic sized types
[18:37:41] <Eridius> jedestep: Trait::func::<A,B,C>()
[18:37:41] <steven_is_false> pcwalton: Not Thingy::init(), Thingy::init
[18:37:44] <jedestep> let v: Doc = Formattable::from_string(...); is telling me it can't infer a type, presumably because Formattable takes a parameter
[18:37:50] <jedestep> Eridius: thank you :)
[18:37:53] <steven_is_false> Fair enough
[18:38:16] <olsonjeffery> is there some kind of scope of data structures that'd be "worthy" of going into extra?
[18:38:20] <bstrie> pcwalton: I sure hope you have a concrete plan for all this before 0.7 happens in two weeks... I fear for the schedule otherwise
[18:38:27] <olsonjeffery> i have an RTree that im curious about making a pull req on
[18:38:46] <olsonjeffery> vs having in cargo or what-have-you
[18:38:46] <Eridius> woohoo, I just built rust with terminal colors active the whole time :)
[18:38:51] <Eridius> now to make check
[18:38:56] *** Parts: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) ()
[18:38:58] <steven_is_false> I'm having difficulty building Rust, On the configure stage LLVM doesn't seem to be downloading
[18:39:03] <Eridius> mmyep, line length errors :/
[18:39:03] <bstrie> olsonjeffery: that sounds like it would be a very useful wiki page
[18:39:11] <kimundi> 'let f =|| bar(); ... *ptr = f()' can be optimised to 'let f =|ptr| *ptr = bar(); ... f(ptr)'
[18:39:29] <olsonjeffery> bstrie: what? data structures in rust?
[18:39:45] <jedestep> Eridius: complains about too few type parameters even if I offer as many as required
[18:40:11] <Eridius> jedestep: the trait may be parameterized, the datastructure it's implemented on may be parameterized, and the func may be parameterized
[18:40:19] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[18:40:22] <Eridius> jedestep: you need all parameters.
[18:40:31] <jedestep> Eridius: ah I see what you mean now
[18:40:43] <jedestep> thanks
[18:41:09] <kimundi> jedestep: You have to offer more type params than the function itself wants. You also need to offer the self type as parameter, and any typeparams of the trait itself
[18:41:28] <MaikKlein> let a = °_° Foo
[18:41:54] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[18:41:54] *** ChanServ sets mode: +o pcwalton
[18:41:54] <MaikKlein> oh god I better never create my own language
[18:42:31] <pcwalton> bstrie: so niko and I do have a fairly concrete plan but it sounds like it won't be popular
[18:42:35] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:42:50] <steven_is_false> MaikKlein: I've been thinking there's a need for a good intuitive theorem prover that focuses on consistency over proof.
[18:43:27] <steven_is_false> MaikKlein: Basically, one would write stuff in the type system language, and a proof of consistency would be inferred.
[18:44:02] *** Joins: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:44:02] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[18:44:16] <pcwalton> anyway, the plan was to use new Foo::init() and new(Gc) Foo::init()
[18:44:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:44:42] <steven_is_false> This can be emulated in Coq somewhat like (I forget the exact notation) Definition idea : forsome x, x = 0, forsome y, y = x + 4. my_inference_method.
[18:44:54] <nano> rusti, penis?
[18:44:58] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Input/output error)
[18:46:05] <graydon> nano: *cough* um, not cool
[18:46:44] *** Joins: jeaye (jeaye@moz-A4DD04C2.blinkenshell.org)
[18:47:23] <jeaye> bjz: ping
[18:47:47] <adu> nano: and it doesn't mean that, it's French for chicken
[18:47:50] *** Joins: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com)
[18:48:06] <EXetoC> mmmh, chicken
[18:48:51] *** Quits: MaikKlein (maik@moz-94281F77.dip0.t-ipconnect.de) (Ping timeout)
[18:49:10] <nano> watz
[18:49:15] <nano> ?
[18:49:23] <Eridius> Coq is French for Rooster
[18:49:28] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[18:49:52] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:50:06] <Azdle> Is there some thing wrong with the list module, or am I doing something wrong? I'm getting: error: type `&extra::list::MutList<uint>` does not implement any method in scope named `each`
[18:50:07] * adu is gender blind
[18:50:43] <jeaye> Azdle: Need some iterators?
[18:50:46] <Eridius> Azdle: looks like it's extra::list::each(mylist)
[18:50:48] <Azdle> My code https://gist.github.com/Azdle/5783394 (Line 14)
[18:51:09] <Eridius> Azdle: yeah use extra::list::each(known_primes)
[18:51:25] <Azdle> mmkay Thanks Eridius 
[18:51:28] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[18:51:28] <Eridius> the .each method is apparently only defined on a mutable list
[18:51:36] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[18:51:39] <jeaye> heh
[18:51:52] <Eridius> and by that I mean on a MutList enum
[18:52:01] <Eridius> curiously it appears to have separate enums for List vs MutList
[18:52:12] <Eridius> which is apparently because it uses a @mut ptr internally
[18:52:24] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[18:52:52] <engla> the list module isn't really in sync with current rust practices
[18:53:43] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[18:55:36] <Azdle> Here's a silly question. If I don't want to change the values of the items in the list once they're there, just append new ones do I need a MutList or just a List that is stored in a variable declared mut?
[18:56:13] *** Quits: jedestep (chatzilla@34641662.FB4DE631.66C78B76.IP) (Quit: ChatZilla 0.9.90 [Firefox 19.0/20130215130331])
[18:56:21] *** Quits: josh (josh@F6368174.6206BE40.7FC6A66E.IP) (Quit: josh)
[18:56:55] <engla> you can prepend to a List, but not append
[18:57:04] <Eridius> rusti: use extra::list::*; let mut x = Cons(1i, Nil); match x { Cons(i, ref mut tail) => *tail = Cons(2i, Nil), Nil => fail!("bah") }
[18:57:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AEMZ
[18:57:14] <Eridius> rusti: use extra::list::*; let mut x = Cons(1i, Nil); match x { Cons(i, ref mut tail) => *tail = @Cons(2i, Nil), Nil => fail!("bah") }
[18:57:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CSia
[18:57:18] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[18:57:25] <engla> since it's using @ boxes you need @mut to be able to modify the pointer at the very end to append
[18:57:28] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:57:29] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[18:57:31] <Eridius> rusti: use extra::list::*; let mut x = Cons(1i, @Nil); match x { Cons(i, ref mut tail) => *tail = @Cons(2i, @Nil), Nil => fail!("bah") }
[18:57:32] -rusti- ()
[18:57:35] <Eridius> rusti: use extra::list::*; let mut x = Cons(1i, @Nil); match x { Cons(i, ref mut tail) => *tail = @Cons(2i, @Nil), Nil => fail!("bah") }; x
[18:57:36] -rusti- Cons(1, @Cons(2, @Nil))
[18:57:43] <Eridius> ok so it's really really awkward to append, but it's possible
[18:57:47] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[18:57:58] <Eridius> you have to replace the @-box wholesale
[18:58:02] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[18:58:10] <engla> yeah you have to reconstruct the list
[18:58:19] <Eridius> engla: no see my code I just ran. it modified x
[18:58:21] <Azdle> Oh.
[18:58:22] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:58:29] <Eridius> but yeah, it's really meant for prepending anyway
[18:58:31] * Eridius goes off to a meeting
[18:58:35] <engla> hm
[18:58:36] <Azdle> IS there any advantage to using a list over a vec than?
[18:58:52] <Azdle> (In this case)
[18:59:13] <engla> Azdle: there is extra::deque for some stack/queue uses
[18:59:56] <pcwalton> so there are basically two options: "new"/"new(Gc)" and "~"/"@Gc"
[19:00:19] <pcwalton> it sounds like the community prefers the latter so we can go with that
[19:00:20] <bblum> ~/@Gc significantly better
[19:00:21] <strcat> engla: a vector is fine for a stack
[19:00:34] <bblum> eric and i were just discussing the possibility to parameterize over smart pointer variable
[19:00:47] <engla> strcat: sure
[19:00:54] <bblum> fn foo<T, Allocator>(@Allocator T) ...
[19:02:18] <pcwalton> bblum: I think it Just Works if you treat @Gc T as sugar for Gc<T> per kimundi's proposal and have HKT
[19:02:37] <bblum> yeah
[19:02:38] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[19:02:45] <bblum> let's hurry up and get HKT already ;)
[19:02:48] *** Joins: cscottnet (cscott@moz-2577C94A.net)
[19:03:00] <bblum> fn foo<T, A: Allocator>(@A T), really
[19:03:05] <bblum> that looks pretty slick if you ask me
[19:03:06] *** cscottnet is now known as cscott
[19:03:13] <pcwalton> yeah
[19:03:15] <pcwalton> I like that
[19:03:31] <kimundi> (sorry if I'm being pushy with my proposal btw :| )
[19:03:38] <pcwalton> no worries
[19:03:49] <pcwalton> it's basically the same thing niko and I have been tossing around modulo a couple of minor syntax things
[19:05:47] <bblum> is anybody working on HKT? is there a bug open for it?
[19:05:53] <bblum> i would be willing to take a stab at it maybe
[19:06:07] <kimundi> HKT?
[19:06:12] <bblum> higehr kinded types
[19:06:24] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (Quit: Leaving.)
[19:06:25] <kimundi> ah. I never understood those :P
[19:06:43] *** Joins: koomi (koomi@moz-F77EEF5.pools.arcor-ip.net)
[19:07:35] <kimundi> Someone willing to take a stab at explaining them to me? :P
[19:07:43] *** Quits: Blei (Philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: Blei)
[19:07:46] * kimundi should probably just google it
[19:07:54] <sully> I am interested in being involved in any HKT design
[19:08:14] <bblum> me too
[19:08:43] <Diamond> types treated as values (from a language pov)?
[19:08:53] <pcwalton> kimundi: it's basically where you can have a type parameter that's a generic
[19:09:02] <pcwalton> so right now you couldn't have A:Allocator because you can't write A<T>
[19:09:11] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[19:09:21] <pcwalton> you can't write TYPEPARAMETER<GENERICS>
[19:09:30] <pcwalton> because type parameters can't be generics
[19:09:39] <pcwalton> higher kinded types just means "type parameters can be generics"
[19:10:08] <EXetoC> useful I guess
[19:10:09] <Diamond> ah.
[19:10:26] <kimundi> Ah, okay. That sounds simple sofar :)
[19:10:35] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[19:10:47] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[19:10:51] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[19:11:06] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[19:11:37] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[19:13:19] <cmr> pcwalton: fwiw I also think ~ is beautiful and not non-obvious at all.
[19:15:34] *** Joins: jorendorff (jorendorff@23227100.8B146FD9.67894F1C.IP)
[19:15:34] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[19:15:59] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[19:16:14] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[19:16:18] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[19:16:25] <bblum> i think if we have HKT we can get stuff like Functor and Traversable
[19:16:29] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:16:33] <bblum> which will make our continer libraries a lot shorter
[19:16:49] <bblum> *container
[19:17:05] *** Joins: jj2baile (jon@moz-DCEF6040.csclub.uwaterloo.ca)
[19:17:32] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[19:17:32] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[19:17:44] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[19:18:14] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[19:19:04] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[19:19:11] * ecr misses his Functors
[19:19:16] <bblum> especially so with our foo_consume and foo_ref pattern
[19:19:33] *** Joins: eschweic1 (Adium@2557E599.66715431.D25A875A.IP)
[19:19:33] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[19:21:50] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[19:22:03] *** Quits: brendan (brendaneic@moz-12810D9F.sub-70-211-88.myvzw.com) (Quit: brendan)
[19:23:17] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[19:24:12] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[19:25:37] <kimundi> bblum: oouh, what exactly could HKT solve there?
[19:26:00] <bblum> on each container class you could just implement map_consume and map_ref
[19:26:05] <bblum> and have all other functions be derived
[19:26:14] <bblum> or something like that
[19:26:20] <bblum> maybe the minimal implementation would be a little bigger
[19:27:35] *** Quits: eschweic1 (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[19:28:22] <strcat> bblum: well atm they only have to implement an iterator, a mutable iterator and a consume iterator
[19:28:45] <strcat> + the things specific to the containers like key lookups
[19:28:51] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[19:29:02] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[19:29:37] <strcat> without laziness, I don't think you'll get very far with functors
[19:30:16] *** Joins: tjc (tjc@moz-EBC34FD3.hsd1.wa.comcast.net)
[19:30:16] *** ChanServ sets mode: +o tjc
[19:32:16] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[19:33:25] *** Joins: mib_0i0vrr (Mibbit@2FF31476.BF291B73.633526E8.IP)
[19:33:41] *** Quits: mib_0i0vrr (Mibbit@2FF31476.BF291B73.633526E8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:33:44] <indutny> hey people
[19:33:51] <indutny> what's up with jit in rust's master branch?
[19:33:59] <indutny> also, it seems that you're working in master now?
[19:34:10] <cmr> yup, incoming was mercilessly slaughtered
[19:34:25] <indutny> hehe
[19:34:27] <indutny> good
[19:34:30] <indutny> so what's up with JIT?
[19:34:39] <indutny> can I run my rust programs without compiling?
[19:34:52] <cmr> No, and afaik the JIT is really broken
[19:35:23] <strcat> JIT startup time is slower than AOT compilation
[19:35:28] <strcat> it's not useful
[19:35:36] <kimundi> indutny: Well... JIT is short for 'just in time compiler'... So technically the answer would be no either way ;)
[19:35:44] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[19:35:49] <cmr> someone reported the other day that signum was returning the wrong value with the jit
[19:35:52] <strcat> I guess if you had a really huge program it would be useful
[19:35:55] <indutny> strcat: oh gosh :P
[19:36:08] <strcat> but at least for <10k lines, a JIT isn't useful
[19:36:10] <indutny> kimundi: I know what JIT is
[19:36:27] <indutny> strcat: I believe that rustc is wasting most of the time in static analysis
[19:36:34] <indutny> so yeah, either introduce runtime checks in JIT
[19:36:43] <indutny> which is pretty expensive.. and well
[19:36:43] <kimundi> I know, just messing with ya :P
[19:36:59] <indutny> not really clear how it should work
[19:36:59] <strcat> indutny: that's really not going to happen
[19:37:01] <indutny> kimundi: ok then
[19:37:03] <strcat> it would be a huge effort
[19:37:15] <indutny> strcat: yeah, sounds like a good side project :P
[19:37:19] *** Parts: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP) ()
[19:37:20] <indutny> but I'm working on v8 right now
[19:38:12] <strcat> heh still that auto-encode issue
[19:38:57] <steven_is_false> So to install rust to a local directory, I'll have to do make install destdir=foo prefix=bar right?
[19:39:10] <steven_is_false> Is there a way to set an environment variable so I don't always have to do that?
[19:39:17] <cmr> steven_is_false: ./configure --prefix=... is the only way I knew
[19:39:47] <steven_is_false> cmr: Ahah! That'll work ./configure --prefix=~/.local
[19:39:52] <cmr> yup
[19:39:59] <cmr> A fellow user of ~/.local I see :)
[19:40:06] <steven_is_false> cmr: Yup.
[19:40:09] <Eridius> never heard of that before
[19:40:55] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[19:41:01] <steven_is_false> Eridius: It's the principle of least privileges. You shouldn't install your personal stuff in /usr/local
[19:41:09] *** Quits: jeaye (jeaye@moz-A4DD04C2.blinkenshell.org) (Client exited)
[19:41:15] <steven_is_false> But only in ~/.local or some other directory
[19:41:19] <cmr> also it's better than spewing useless directories in ~
[19:41:44] <steven_is_false> Also use the xdg environment variables
[19:42:31] <Eridius> steven_is_false: I'm the only user of this system, and some badly-behaved software assumes libraries exist only in /usr/lib or /usr/local/lib
[19:42:45] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[19:42:59] <steven_is_false> Eridius: Ahah! But can't you file an issue, and write a patch!
[19:43:03] *** Quits: tjc (tjc@moz-EBC34FD3.hsd1.wa.comcast.net) (Ping timeout)
[19:43:17] <Eridius> steven_is_false: if I had infinite free time, sure
[19:43:29] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[19:43:34] <steven_is_false> Eridius: Fair enough, but do file an issue at least.
[19:43:46] <steven_is_false> Else the problem won't ever be solved.
[19:44:02] <Eridius> not all projects make it easy to even file issues
[19:44:12] *** Joins: tjc (tjc@moz-EBC34FD3.hsd1.wa.comcast.net)
[19:44:12] *** ChanServ sets mode: +o tjc
[19:44:34] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[19:44:54] <steven_is_false> Eridius: I get that. I want to set up a bug report system for my P(X = x) project I'm working on but I have no time for that.
[19:45:50] <cmr> Gitorius doesn't have a simple issue system like github?
[19:46:16] <steven_is_false> cmr: Not sure
[19:46:49] <Eridius> github ftw
[19:47:13] <steven_is_false> Eridius: github Isn't free software
[19:47:15] *** Quits: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[19:47:15] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:47:30] <Eridius> cmr: I need to fix line lengths on my terminfo branch to pass lint, and then `make check`, but aside from that I think it's probably ready to PR. I'd appreciate it if you could give it a once-over first though
[19:47:39] <Eridius> steven_is_false: neither is my OS
[19:47:40] <cmr> Eridius: Already did, +1
[19:47:44] <Eridius> cmr: awesome :)
[19:47:59] <Eridius> I'd like to implement the printf-style modifiers on %d, but I don't think that should hold up everything else
[19:48:12] <cmr> I didn't see anything that used them, so I didn't bother
[19:48:39] <Eridius> heh. there's an example in the terminfo manpage that uses %2d
[19:48:43] <steven_is_false> Eridius: That's a legitimate position to take, as long as you've considered all the issues involved, and made an actual decision.
[19:49:10] <Eridius> steven_is_false: I am strongly in favor of both open source, and closed source. Both have their places
[19:49:32] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[19:50:13] <steven_is_false> Eridius: I was just explaining my motivations, I didn't want to open up an argument.
[19:50:35] <Eridius> I'm not looking to argue either, just stating my position
[19:50:56] <steven_is_false> Eridius: Fair enough
[19:52:16] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[19:55:09] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:57:40] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[19:58:01] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[19:58:05] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[19:58:05] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[19:58:11] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[19:58:26] *** Quits: koomi (koomi@moz-F77EEF5.pools.arcor-ip.net) (Ping timeout)
[20:01:14] *** Quits: adu (ajr@moz-68CC2A5E.washdc.fios.verizon.net) (Quit: adu)
[20:02:46] <benh> Is there any consensus for getting rid of the different doc comment syntaxes now?
[20:03:01] *** Joins: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is)
[20:07:37] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:08:45] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:10:00] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[20:10:08] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[20:10:09] *** ChanServ sets mode: +o brson
[20:11:00] *** Quits: steven_is_false (steven@moz-144077DE.bchsia.telus.net) (Ping timeout)
[20:12:50] *** Quits: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP) (Broken pipe)
[20:14:42] *** Joins: josh (josh@F6368174.6206BE40.7FC6A66E.IP)
[20:17:38] <SiegeLord> So what's the preferred doc comment style?
[20:17:45] <SiegeLord> I saw somewhere that it was ///
[20:17:51] <SiegeLord> Rather than /**
[20:17:56] <kimundi> Prefered is ///
[20:18:07] <SiegeLord> It is buggy right now though, I've noticed
[20:18:12] <SiegeLord> I wonder how easy it is to fix
[20:18:16] <cmr> I usually use /// but /** is nice for long blocks. Also /// dies with the pretty printer.
[20:18:20] <bblum> i was sad last summer when #[doc = " ... "] went away
[20:18:26] <SiegeLord> It eats indentations in code blocks
[20:18:28] <cmr> bblum: it's still there
[20:18:33] <bblum> cmr: well, i mean
[20:18:34] <bblum> you know
[20:19:44] <kimundi> bblum: Is your sadness with it not being an attribute, it not being an string, or it being comments? 
[20:20:05] <kimundi> (where it == docs)
[20:20:32] <bblum> reusing the comment form
[20:20:40] <bblum> i just, you know
[20:20:43] <bblum> minor aesthetics
[20:21:04] <kimundi> People also threw around ## or ###
[20:21:20] <cmr> That would be the worst.
[20:21:38] <kimundi> would work like ///, but obviosly not be an comment, and look closer to an attribute, the thing it sugars to
[20:22:35] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:23:00] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[20:23:08] <strcat> the /// comments look fine to me
[20:23:17] <strcat> they even get syntax highlighted as SpecialComment with the vim support
[20:23:35] <cmr> they also are consistent with doxygen, which is what I'm most familiar with
[20:23:42] <kimundi> rusti: println("## This is a doc comment\nfn foo() {...}\n/// This is a doc comment\nfn foo() {...}");
[20:23:47] -rusti- timeout triggered!
[20:23:52] <kimundi> wut?
[20:23:57] <cmr> rusti: 5
[20:23:59] -rusti- 5
[20:24:08] <strcat> graydon: https://github.com/mozilla/rust/pull/7132 r?
[20:24:10] <kimundi> rusti: println("## This is a doc comment\nfn foo() {...}");
[20:24:11] -rusti- ## This is a doc comment
[20:24:12] -rusti- fn foo() {...}
[20:24:12] -rusti- ()
[20:24:21] <kimundi> rusti: println("/// This is a doc comment\nfn foo() {...}");
[20:24:23] -rusti- /// This is a doc comment
[20:24:23] -rusti- fn foo() {...}
[20:24:23] -rusti- ()
[20:24:42] *** Joins: Orshem (Mibbit@4A7BDF54.6CC9726A.E3D28531.IP)
[20:25:29] <josh> Given this function:
[20:25:30] <josh> pub fn decodeBase64ToBytes(s: ~str) -> ~[u8] {
[20:25:31] <josh>     return s.from_base64();
[20:25:32] <josh> }
[20:25:33] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:25:33] <josh> Why can't the "s" argument be of type "&str"?
[20:25:34] <josh> I get: hex_b64.rs:39:11: 39:27 error: type `&str` does not implement any method in scope named `from_base64`
[20:26:25] <kimundi> josh: Because from_base64() is implemented on ~str rather than &str. Don't ask me why, though :P
[20:26:38] <cmr> probably just an oversight
[20:26:39] <sp3d> legacy, pending fixes, afaik
[20:26:52] <sp3d> it was discussed a bit ago but I don't know if there's a bug/pr/whatever
[20:27:22] * kimundi would just fix it right now if he weren't struggling to stay awake
[20:27:24] <doener> rusti: let x: &str = "8888"; std.from_base64()
[20:27:26] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BVIF
[20:27:31] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[20:27:36] *** Quits: mib_htoq9o (Mibbit@moz-D3D15A0C.vie.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[20:27:39] <doener> rusti: let x: &str = "8888"; x.from_base64()
[20:27:40] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VUTa
[20:28:03] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:28:18] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[20:28:31] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[20:28:31] *** ChanServ sets mode: +o pcwalton
[20:29:20] <SiegeLord> So I'm hacking libsyntax... are there any build system speedup tricks I should know about?
[20:29:41] <doener> rusti: extern mod extra; use extra::base64::FromBase64; let x: &str = "8888"; x.from_base64()
[20:29:42] -rusti- <anon>:10:9: 10:26 error: "extern mod" declarations are not allowed here
[20:29:42] -rusti- <anon>:10          extern mod extra; use extra::base64::FromBase64; let x: &str = "8888"; x.from_base64()
[20:29:42] -rusti-                    ^~~~~~~~~~~~~~~~~
[20:29:42] -rusti- error: aborting due to previous error
[20:29:43] -rusti- application terminated with error code 101
[20:29:45] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Quit: Lost terminal)
[20:29:54] <doener> rusti: use extra::base64::FromBase64; let x: &str = "8888"; x.from_base64()
[20:29:55] -rusti- ~[243, 207, 60]
[20:30:44] <doener> josh: works, was fixed about two weeks ago
[20:31:10] <kimundi> SiegeLord: Please tell me if you hear some :)
[20:31:14] *** Quits: Orshem (Mibbit@4A7BDF54.6CC9726A.E3D28531.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:31:22] <SiegeLord> XD
[20:31:24] <tjc> SiegeLord: you could spend several months redesigning the compiler pipeline :-)
[20:31:35] <tjc> and/or improving our monomorphization in the back-end to produce less code blow-up
[20:31:42] <SiegeLord> Heh
[20:31:53] *** Joins: jeff (jeff@moz-48E617E1.tampfl.fios.verizon.net)
[20:31:59] <SiegeLord> Well, let's hope I fix it in one build cycle!
[20:32:04] <josh> doener: I'm on rust trunk from a day or two ago, odd that the old way still works. Will try the new way now
[20:32:15] <SiegeLord> This really clashes with my printf debugging style :)
[20:32:29] <doener> josh: the impl is for &'self str now, which also works for ~str
[20:32:42] <Eridius> r? https://github.com/mozilla/rust/pull/7133
[20:33:00] <josh> doener: Right, but what I mean is why can I still do: std::base64::ToBase64
[20:33:01] <josh> and use that
[20:33:47] <kimundi> josh: I think legacy reexport might be to blame
[20:33:49] <doener> josh: extra is aliased to std, so that stage0 (which still has core and std) works, too
[20:36:29] <josh> hex_b64.rs:3:0: 3:17 error: can't find crate for `extra`
[20:36:29] <josh> hex_b64.rs:3 extern mod extra;
[20:36:40] <cmr> josh: Are you using 0.6?
[20:36:54] <josh> I'm using trunk
[20:37:03] <josh> from a day ago
[20:37:14] <jedestep> josh: try std
[20:37:25] <cmr> josh: what does rustc -v say?
[20:37:25] <Eridius> what's trunk?
[20:37:29] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:37:32] <josh> std works but then we're back at square one, where FromBase64 is not implemented for &
[20:37:46] <josh> rustc 0.6 (2d28d64 2013-05-17 15:52:25 -0700)
[20:37:50] <jedestep> trunk is what's linked on rust-lang.org, I believe it's 0.6
[20:37:56] <Eridius> 5-17? that's old
[20:37:59] <Eridius> jedestep: that's master
[20:38:05] <Eridius> josh: I think you have master from before we killed incoming
[20:38:11] <josh> that's odd, because I compiled and installed from the latest git sources
[20:38:24] <cmr> Until last night the latest git sources weren't on the master branch
[20:38:28] *** Quits: jeff (jeff@moz-48E617E1.tampfl.fios.verizon.net) (Quit: jeff)
[20:39:13] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[20:39:53] <josh> I've been compiling the master branch, probably before last night, so what you're saying is that I've accidentally been compiling old code?
[20:40:02] <cmr> yup
[20:40:19] <josh> arg
[20:40:37] <engla> master is the integration branch now finally
[20:40:41] <josh> So if I pull again and then compile on master again, *then* I'll actually have the latest?
[20:40:42] <engla> so everything is simple and sane
[20:40:46] <cmr> yup
[20:41:12] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[20:41:45] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[20:41:53] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[20:41:53] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 147120cd4 to 14a036f46: 02http://git.io/k471pw
[20:41:53] <ghrust> 13rust/06try 1417072ae 15Alex Crichton: Revert "Revert "Remove all usage of the global LLVMContextRef""...
[20:41:53] <ghrust> 13rust/06try 1414ca129 15Alex Crichton: Revert "Revert "Have JIT execution take ownership of the LLVMContextRef""...
[20:41:53] <ghrust> 13rust/06try 14d5d38cd 15Alex Crichton: Correctly parse commands for rusti...
[20:41:55] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[20:41:59] <cmr> brson: graydon: nmatsakis: pcwalton: tjc: https://gist.github.com/cmr/a4dd556565a87cdbea85 anything important I've missed?
[20:42:31] <tjc> cmr: reading
[20:43:44] <tjc> cmr: if you like, you can mention that I'm also giving a talk at Open Source Bridge next week, though obviously that one will only be open to conference attendees
[20:43:51] <tjc> http://opensourcebridge.org/sessions/970
[20:43:54] <sully> hm
[20:44:02] <sully> what is going on with maybe_instantiate_inline?
[20:44:14] <bblum> moves.rs is post-typeck, right?
[20:44:26] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[20:45:06] <tjc> bblum: yes
[20:46:32] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[20:47:09] <cmr> tjc: Sure, thanks
[20:47:44] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[20:48:26] <brson> cmr: that's awesome. the claim that the incoming breakage is 'cleaned up' is a little optimistic yet :)
[20:48:48] <cmr> brson: well yes. Posting tomorrow, just trying to get it out of the way as I'll be very busy
[20:48:54] <brson> cmr: servo made a lot of progress this week but I don't think pcwalton has tweeted any new screenshots
[20:48:57] <cmr> I am hopeful :)
[20:49:12] *** Joins: steven_is_false (steven@4728DAC8.6ECAE21.F39A8AA1.IP)
[20:50:44] <kimundi> cmr: When is the mail going out? I have a version 2 of my proposal in progress, but I need a nighs sleep to remove spelling mistakes from it :P
[20:51:01] <cmr> kimundi: Tomorrow around 2200 UTC
[20:51:27] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[20:51:47] <kimundi> uhm. thats how many hours in the future? (damn timezones)
[20:52:02] <cmr> 26 :)
[20:52:25] <sully> wee
[20:52:27] <kimundi> Ah okay. :)
[20:52:32] <sully> have cross crate default methods working
[20:54:23] <strcat> sully: yay!
[20:54:37] <sully> and got polymorphic ones working the other day
[20:54:38] <sully> now
[20:54:44] <kimundi> cmr: I might have a tidy version till then if you care :) (There is no big difference to the current one, just detail work.)
[20:54:45] <sully> polymorphic + cross crate still may not work
[20:54:56] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:55:08] <cmr> kimundi: if you update the gist, I won't have to do anything :)
[20:55:18] <strcat> sully: by polymorphic do you mean any generic type parameters, or just trait objects?
[20:55:35] <sully> the former
[20:55:36] <kimundi> cmr: ... Of course
[20:55:55] <sully> although trait objects for impls that use default methods also work
[20:56:42] <sully> ok, calling a cross crate default method through a type parameter still doesn't work
[20:56:53] <engla> oh so default methods work to some extent?
[20:56:57] <engla> that's nice
[20:58:58] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[20:58:58] <cmr> brson: once the tree is green again a snapshot would be supercool :)
[21:02:16] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[21:02:22] <jedestep> i fully agree :)
[21:04:42] <SiegeLord> Damn... assert_eq does a == b and b == a... which ruins the workabout for comparing static and owned strings :>
[21:04:45] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[21:05:17] <bblum> a snapshot would be brilliant
[21:06:30] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[21:07:08] <sully> oh, oops, polymorphic not as fixed as I had intended
[21:07:13] <erickt> cmr: the sentence about the SF meetup is incomplete
[21:07:35] <cmr> erickt: heh, whoops. must have went to bed without finishing it :)
[21:07:37] <erickt> and brson, would it be alright if cmr uses your image  (if he wants?)
[21:08:05] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[21:08:43] <tikue> does rust have something for scheduling a task at a fixed rate?
[21:09:05] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[21:10:40] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[21:10:56] <erickt> cmr: are you cmrx64 on reddit? If so, have any intuition on why from_elem may be performing slowly?
[21:10:59] <kimundi> tikue: rusts tasks are only descheduled on IO and task-communication.
[21:11:11] <erickt> cmr: regarding this thread: http://www.reddit.com/r/rust/comments/1gbr5g/dynamic_buffer_allocation_for_c_coders/
[21:11:19] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[21:11:34] <cmr> erickt: hi. yes, I actually profiled it and sent in a performance fix for it. It's not slow per se (from_fn is, from_elem isn't any more), but it's slower than a memset.
[21:12:00] <froglegstew> unrelated: is there a way to give structs private fields that they can mutate privately but others can't? (unless the mut the whole thing of course)
[21:12:00] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[21:12:00] <tikue> kimundi: I'm not sure I understand -- I might not have been clear about what I'm asking. I basically want to spawn a task that will call a closure periodically
[21:12:37] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[21:12:53] <Eridius> cmr: regarding your comment, how do you get away with not initializing the buffer?
[21:13:12] <cmr> Eridius: If you just load an image into it for further manipulation, you don't need to zero it.
[21:13:17] <Eridius> ahh
[21:13:18] <erickt> cmr: how odd. I wonder if memset is taking advantage of simd instructions
[21:13:25] <Eridius> I thought you were suggesting some way of having an uninitialized vector
[21:13:38] <cmr> erickt: it uses the llvm intrinsics, which do afaik
[21:13:38] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[21:13:55] <erickt> cheaters
[21:13:57] <kimundi> tikue: Ah, then you might something like 'loop { f(); task::sleep(t) }' where task::sleep() is a propably not existing function to yield the current task for a timespan
[21:14:29] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[21:14:56] <tikue> kimundi: thanks :)
[21:15:39] <cmr> erickt: from_elem previously had like 3 layers of closure calls that weren't being optimized at all, it was terrible.
[21:16:20] <cmr> iirc fixing it got a 7% performance improvement for compiling small programs
[21:16:25] <erickt> cmr: did you file a performance bug about this? Having it be a standard recommendation to tell people to use unsafe operations feels like it's going against what rust is trying to accomplish
[21:17:09] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:18:11] <erickt> we should aim for from_elem to eventually be as fast as memset for types that can support it
[21:19:24] <erickt> I can file the fixme
[21:19:25] <strcat> cmr: should really be comparing to calloc, not memset
[21:20:03] <strcat> for the zeroed ones at least.
[21:20:38] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[21:20:51] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[21:20:51] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Quit: Leaving)
[21:22:47] *** Quits: sw17ch (sw17ch@moz-DA3743.hfc.comcastbusiness.net) (Quit: sw17ch)
[21:23:46] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[21:24:35] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[21:25:57] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Quit: victorporof)
[21:29:21] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[21:29:49] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[21:32:21] <steven_is_false> I wonder if one could implement STM in Rust, and have transactions in an STM task automatically roll back if the task fails?
[21:32:37] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[21:33:41] <steven_is_false> I know Rust tasks don't have shared memory so it should be much more possible than for other languages.
[21:35:36] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[21:36:54] <steven_is_false> In other words something like do stm::atomically |ctx| { ctx.send(pipe, "foo"); etc...
[21:37:19] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[21:37:43] <steven_is_false> And the part inside stm::atomically would be automatically retried if the commit fails.
[21:38:34] <tjc> What's the equivalent of str::each_split_char in the brave new iterator world?
[21:38:46] <strcat> tjc: there split_iter
[21:38:53] <strcat> split_iter(',')
[21:39:18] <tjc> strcat: thanks
[21:39:27] *** Quits: Guest_ (textual@34641662.FB4DE631.66C78B76.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:40:19] <steven_is_false> What should the closure type that stm::atomically takes be?
[21:40:45] <cmr> strcat: is calloc exposed at all right now?
[21:41:03] <cmr> erickt: I did not. https://github.com/cmr/rust/commit/c299230f3d7a43a4307ce317aa41b7e8f361a2e6 was the commit
[21:41:09] <strcat> cmr: not beyond the libc binding
[21:41:27] <strcat> anyway the single biggest perf issue is the useless headers ;p
[21:41:41] <cmr> strcat: did you ever find out what was reading them?
[21:42:06] <strcat> cmr: they're read at runtime to check if there's managed or not
[21:42:08] <strcat> they shouldn't be
[21:42:17] <strcat> it's entirely possible to remove it
[21:42:44] <cmr> that'd be a nice memory win too
[21:42:48] <strcat> I could write a Unique type right now without that ;S
[21:42:56] <strcat> it's harder to fix the existing mess
[21:43:07] <strcat> we could remove ~ and add it back... ;p
[21:43:38] <strcat> anyway I think we just need an intrinsic for malloc/free
[21:43:52] <strcat> if T contains managed stuff, use the local heap ones
[21:44:00] <strcat> otherwise it can just use malloc/free directly
[21:45:18] <SiegeLord> So I found a bug in rustdoc... and I have a fix for it. Should I open an issue with the bug and then submit a pull request fixing it, or just do a pull request?
[21:45:27] <cmr> SiegeLord: just a PR
[21:47:23] <Eridius> submitting a PR creates an issue too
[21:47:39] *** Quits: josh (josh@F6368174.6206BE40.7FC6A66E.IP) (Quit: josh)
[21:47:46] <SiegeLord> The first way creates two ;)
[21:48:04] <Eridius> so what's the status of tree chaos?
[21:48:28] <graydon> stormy
[21:48:37] <graydon> with a side of fireworks
[21:48:42] <steven_is_false> Kay bye
[21:48:46] *** Parts: steven_is_false (steven@4728DAC8.6ECAE21.F39A8AA1.IP) ()
[21:48:52] *** Joins: josh (josh@F6368174.6206BE40.7FC6A66E.IP)
[21:49:25] <graydon> cmr: kimindi => kimundi
[21:49:49] <kimundi> hm?
[21:49:52] <cmr> Nice catch
[21:49:55] <cmr> kimundi: typo in twir
[21:50:06] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Quit: Lost terminal)
[21:50:14] <kimundi> oh, haha :)
[21:50:52] <mleise> hey where is the dude I bashed last time for implementing .iter() on utf-8 strings?
[21:52:02] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[21:52:41] *** Quits: josh (josh@F6368174.6206BE40.7FC6A66E.IP) (Quit: josh)
[21:53:30] *** Joins: josh (josh@F6368174.6206BE40.7FC6A66E.IP)
[21:54:15] <doener> mleise: IIRC that would be dbaupp. Isn't around right now
[21:55:13] <brson> with fp elimination you would expect functions to not push %ebp in the fn prologue right (that is the fp)?
[21:55:25] *** Quits: josh (josh@F6368174.6206BE40.7FC6A66E.IP) (Quit: josh)
[21:56:21] <doener> :-( today is dynamic borrow check failure day for me
[21:56:45] *** Quits: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[21:57:37] <jld> brson: %ebp/%rbp is the frame pointer on x86, yes.
[21:58:13] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[21:59:15] <brson> how do I make rustc emit a .o file?
[21:59:34] <cmr> brson: --save-temps
[21:59:40] <mleise> dbaupp, yes thats the man
[22:00:51] <doener> brson: or -c if you only want the .o 
[22:02:00] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[22:03:38] <brson> thanks
[22:05:21] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[22:06:17] *** kimundi is now known as zz_kimundi
[22:06:26] <bblum> who here knows about liveness
[22:06:49] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:07:21] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:08:51] <aatch> Hey, so is there an ETA on things getting back to normal?
[22:10:17] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[22:11:44] *** Joins: eschweic1 (Adium@2557E599.66715431.D25A875A.IP)
[22:11:44] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[22:12:47] *** Quits: tjc (tjc@moz-EBC34FD3.hsd1.wa.comcast.net) (Ping timeout)
[22:13:11] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: nn)
[22:13:13] *** Joins: dherman (dherman@moz-8DE1CCAB.client.stsn.net)
[22:13:13] *** ChanServ sets mode: +o dherman
[22:13:15] <bblum> pcwalton: ping
[22:14:40] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[22:16:21] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Quit: jedestep)
[22:17:34] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:18:59] <bstrie> aatch: chaos is normalcy. order is the anomaly
[22:20:19] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:20:23] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:22:22] <tikue> has anyone used std::timer::delayed_send? The first argument is an IoTask, and I'm not sure how to go about getting myself one of those
[22:23:01] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Ping timeout)
[22:24:00] *** Joins: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP)
[22:25:01] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[22:26:10] <Eridius> tikue: I assume you mean extra::timer?
[22:26:20] <strcat> cmr: oh and I think trait objects probably *do* use the headers
[22:26:24] *** Quits: dherman (dherman@moz-8DE1CCAB.client.stsn.net) (Quit: dherman)
[22:26:39] <strcat> so the path of least resistance is probably to remove ~ from the language...
[22:27:05] <strcat> it's all too jumbled together right now
[22:27:06] <tikue> Eridius: ah yes
[22:27:11] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[22:27:25] <Eridius> tikue: looks like IoTask is in extra::uv_iotask. I see a function spawn_iotask() that can create one. I don't know anything about it though
[22:27:52] <strcat> or remove ~Trait
[22:28:24] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[22:28:28] <tikue> Eridius: I found an example in servo that does &uv_global_loop::get()
[22:28:49] *** Joins: steven_is_false (steven@moz-144077DE.bchsia.telus.net)
[22:29:13] *** Quits: spider-mario (spidermari@moz-AC2C1EAE.rev.sfr.net) (Input/output error)
[22:29:17] <Eridius> tikue: I'm guessing an IoTask is basically a task that's managed by uv
[22:29:21] <strcat> pcwalton: the box headers seem to be how trait objects are dropped right now - is that right?
[22:29:28] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:29:40] <strcat> seems like that should be moved to the vtable
[22:29:58] <Eridius> tikue: so uv_global_loop::get() returns the global task that has a libuv event loop, whereas uv_iotask::spawn_iotask() presumably starts up a new eventloop in a new task
[22:30:26] <tikue> Eridius: hmm, unfortunately I don't really know which is the best way to go about it :\
[22:30:32] <Eridius> tikue: well what are you doing?
[22:30:46] <tikue> Eridius: I simply want to ping a channel periodically
[22:31:58] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:31:58] <brson> toddaaro, ecr: we should probably implement work stealing soon. I think the shared queue approach is starting to skew the implementation a bit in ways that will need to change with work stealing
[22:32:28] <toddaaro> brson: yes, things are getting a bit weird without it
[22:32:31] <pcwalton> bblum: pong
[22:32:57] <pcwalton> strcat: I thought it was moved to the vtable but maybe not
[22:33:20] <strcat> pcwalton: well I could be wrong, it's hard to understand what trans/glue.rs is trying to do ;p
[22:33:33] <toddaaro> brson: I've been pondering "a design" for the workstealing, primarily to address the IO-connection and provide a way to get "enough" fairness without sacrificing parallelism performance
[22:33:37] <strcat> pcwalton: but it seems the boxes have a tydesc field and it calls a glue fn pointer or something
[22:33:57] <toddaaro> brson ecr : I'll aim to write it up somewhat, so that we can discuss it on Monday or Tuesday
[22:34:34] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[22:34:40] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[22:34:56] <bblum> pcwalton: any reason liveness would treat captured upvars in stack closures differently from captured upvars in heap closures?
[22:35:07] <pcwalton> not that I know
[22:35:30] <strcat> rusti: let x = ~5; x as ~Ord
[22:35:42] <strcat> rusti: let x = ~5; x as ~Ord; 5
[22:35:44] -rusti- 5
[22:35:54] *** Joins: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz)
[22:36:12] <bblum> pcwalton: so, i'm trying to implement moving out of upvars in once functions
[22:36:24] <strcat> rusti: let x = @5; let y = x as @Ord; cast::transmute::<uint>(x)
[22:36:26] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VdKf
[22:36:26] <bblum> and in this test: http://pastebin.mozilla.org/2525282 i get a bunch of liveness errors (capture/use of moved variable x)
[22:36:32] <bblum> but if i change &once fn to ~once fn, it works fine
[22:36:34] <strcat> rusti: let x = @5; let y = x as @Ord; unsafe { cast::transmute::<uint>(x) }
[22:36:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OfiC
[22:36:38] <pcwalton> bblum: I don't know how liveness works really
[22:36:40] <pcwalton> it's niko's thing
[22:36:44] <strcat> rusti: let x = @5; let y = x as @Ord; unsafe { std::cast::transmute::<uint>(x) }
[22:36:45] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HOSK
[22:36:51] <bblum> hrm
[22:36:52] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[22:37:02] <strcat> rusti: let x = @5; let y = x as @Ord; unsafe { let r: uint = std::cast::transmute(x); r }
[22:37:03] -rusti- 140414407475264
[22:37:22] <brson> toddaaro: great. thanks
[22:37:32] <strcat> rusti: let x = @5; let y = x as @Ord; unsafe { let a: uint = std::cast::transmute(x); let b: (uint, uint) = cast::transmute(y); (a, b) }
[22:37:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eKFJ
[22:37:42] <strcat> rusti: let x = @5; let y = x as @Ord; unsafe { let a: uint = std::cast::transmute(x); let b: (uint, uint) = std::cast::transmute(y); (a, b) }
[22:37:43] -rusti- (140444925231168, (6325888, 140444925231168))
[22:38:01] <strcat> ok maybe that isn't where it reads the header, hm
[22:38:20] <brson> toddaaro: i made a few more suggestions on your pull request but it generally looks good. Will merge this weekend
[22:38:22] *** Joins: eagen (eagen@15B176CF.7A99C13A.B7961A98.IP)
[22:38:32] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[22:38:39] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[22:39:41] *** Joins: jaen (jaen@moz-56060390.play-internet.pl)
[22:41:42] *** Joins: muslimmasryqdqwd (muslimmasr@3C032AFF.63CFD391.563BE9DB.IP)
[22:42:10] *** Joins: tjc (tjc@moz-8021B886.public.wayport.net)
[22:42:10] *** ChanServ sets mode: +o tjc
[22:42:27] <muslimmasryqdqwd> Do skype,yahoo other chat and social communication prog work 2 spoil muslims youth and spy 4 isreal&usa???????
[22:42:27] <muslimmasryqdqwd> do they record and analyse every word we type????????????
[22:42:58] <benh> shoo
[22:42:58] <Eridius> well that's some interesting spam right there
[22:43:12] *** brson sets mode: +b *!*uslimmasr@*.63CFD391.563BE9DB.IP
[22:43:18] <brson> hm
[22:43:25] <brson> what's the right command?
[22:43:30] *** muslimmasryqdqwd was kicked by brson (brson)
[22:43:31] <Eridius> no that's it. /kick him too
[22:43:48] <Eridius> brson: you can use /kickban next time
[22:43:51] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[22:44:01] <gavin> he's been glined
[22:44:14] <gavin> he was around earlier though, he may try again
[22:44:24] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[22:44:27] <Eridius> how bizarre
[22:45:02] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[22:45:48] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[22:46:15] <brson> graydon: i'm still not any closer to knowing how to fix incoming than i was this morning
[22:46:16] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[22:46:17] <bblum> come ON rustc
[22:47:18] *** Joins: steven_is_false1 (steven@moz-144077DE.bchsia.telus.net)
[22:47:20] *** Quits: steven_is_false (steven@moz-144077DE.bchsia.telus.net) (Connection reset by peer)
[22:47:22] <graydon> brson: :( sorry to hear
[22:47:30] <brson> how do I make gdb print assembly instrs as I step through them?
[22:47:43] <graydon> display $eip/i
[22:47:49] <brson> thanks
[22:47:50] <graydon> or display /i $eip
[22:47:59] <graydon> never remember which
[22:48:14] <graydon>  /i is a print modifier for a memory address ("as an instruction")
[22:48:25] <graydon> $eip is your instruction pointer ($rip on x64)
[22:48:56] <graydon> display asks to do an x-command (show-an-expression) on each command-prompt
[22:49:27] <graydon> I need to get some food and make an appointment, but when I'm back I'll try to dig in a bit more also
[22:49:54] *** Quits: eschweic1 (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[22:49:54] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[22:50:45] <toddaaro> brson: ok, adding that enum is easy
[22:51:04] <toddaaro> brson: the "task forwarding" is a bit more problematic, all the solutions are actually kind of terrible
[22:51:49] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[22:52:11] <brson> I have found a difference in the assembly between the broken rustc version of the ebml emit_uint function and the working llc version
[22:52:24] <brson> toddaaro: how so?
[22:52:39] <toddaaro> brson: I added a comment on that, I think in the short term we could just forward the platform thread tasks back to a scheduler we create before it, but it seems entirely not scalable, due to the information dependencies we end up with given a lot of pinned tasks
[22:52:41] <aatch> brson, nice.
[22:52:55] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:53:30] <toddaaro> brson: the "use the shared work queue" is overly optimistic, and then the final option I thought of is to have a "dump bucket" of tasks that ended up in bad places is an unfortunate incidence of global state
[22:54:00] *** Quits: sdh_ (sdh@4068E35B.E1257291.E435C74A.IP) (Quit: Konversation terminated!)
[22:54:01] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[22:54:07] <toddaaro> brson: so the "end" answer may be to have a scheduler initialization process that lets them all have forwarding addresses for each other
[22:54:23] <strcat> pcwalton: well, I at least found the source of many of the undef reads from not initializing the header
[22:54:28] <toddaaro> brson: but that makes me worry about the extra handles preventing the system from noticing it is finished
[22:54:35] <toddaaro> brson: (in the case of a cycle)
[22:54:39] <strcat> pcwalton: it's just because it copies the tydesc over when it duplicates
[22:54:43] <strcat> still segfaults though ;p
[22:55:06] * strcat is determined to figure out how to leave it uninit though
[22:55:08] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:55:12] <strcat> after that removing it isn't as hard
[22:56:20] <toddaaro> brson: oh, I guess "pinned tasks" isn't the correct term, more "schedulers that only run pinned tasks" a few lines up
[22:56:56] <brson> toddaaro: it's not scalable because there will be one scheduler that is overloaded with work by virtue of receiving all the forwarded tasks?
[22:58:42] <bblum> pcwalton: do you know about moves.rs?
[22:58:46] <toddaaro> brson: that is a part of it, but I see it more as an information dependency problem, as you have to propogate these extra handles so schedulers can contain them
[22:59:03] *** Quits: tjc (tjc@moz-8021B886.public.wayport.net) (Ping timeout)
[22:59:56] <toddaaro> brson: it is overcomable, but I think it poses a nontrivial challenge to get a clean design, and then as you say there is still the "all the tasks go to one task" issue
[23:00:32] <brson> toddaaro: I don't understand the information dependency thing. this is a fairly niche use case. it's not like most schedulers are operating in this mode
[23:00:40] <toddaaro> brson: this might get back to some discussion we had earlier this week about schedulers structured in some sort of tree, so if we had that structure it would be easy to send to a random sibling scheduler
[23:01:17] <toddaaro> brson: in the restricted servo use case it is pretty trivial - you create a scheduler, then create the platform scheduler passing the first scheduler as a parameter to the second
[23:01:26] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:02:20] <toddaaro> brson: but I don't think that scales past that case well at all - as it means that everytime you create a special scheduler you need another scheduler around as the forward destination, and you want to vary what the forward destinations are so you don't get 10 special schedulers forwarding to 1 normal scheduler
[23:02:57] <toddaaro> brson: so in the short term I think just doing as you suggest and having that trivial case is entirely fine, should work well
[23:03:17] <brson> toddaaro: ok. I understand that
[23:03:19] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[23:03:38] <toddaaro> brson: ok, so we are on the same page. I just want to avoid this as a long term quirk
[23:04:00] *** Joins: tjc (tjc@moz-DA458686.tmodns.net)
[23:04:00] *** ChanServ sets mode: +o tjc
[23:04:07] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[23:04:07] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[23:04:24] <bblum> tjc: do you know how liveness works?
[23:04:38] <brson> somebody help bblum!
[23:04:44] <bblum> :x
[23:04:57] <bblum> the right person to do it is not in today
[23:05:38] <pcwalton> bblum: I don't really know it
[23:06:23] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:06:47] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[23:07:19] *** Quits: eholk (eholk@moz-F2365EC7.uconnect.utah.edu) (Quit: eholk)
[23:07:35] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:08:06] <strcat> well, on the positive side the prev/next fields aren't used
[23:08:12] <strcat> lets see if ref_count is...
[23:08:29] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:09:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:10:10] *** Quits: tjc (tjc@moz-DA458686.tmodns.net) (Ping timeout)
[23:10:46] <bblum> ...oh
[23:10:50] <bblum> these aren't liveness errors.
[23:10:56] <bblum> these are borrowck errors.
[23:11:59] <bblum> the vital clue was the span_note
[23:12:03] <bblum> liveness emits no span_notes
[23:13:00] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[23:13:23] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[23:16:31] <steven_is_false1> alexcrichton on GitHub is who?
[23:16:31] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[23:16:49] *** Quits: eagen (eagen@15B176CF.7A99C13A.B7961A98.IP) (Ping timeout)
[23:17:20] <rpearl> steven_is_false1: acrichto 
[23:18:05] <steven_is_false1> rpearl: I see, he's not logged in right now. I was just going to thank him for https://github.com/alexcrichton/rust/commit/079ffa362fbec884c6397581c5f9898c4aba392e . Thank you for telling me anyways.
[23:18:36] <aatch> steven_is_false1, he's logged in according to me...
[23:18:50] <aatch> acrichto, you awake?
[23:19:02] <steven_is_false1> aatch: Oh, I had a typo then.
[23:21:09] <steven_is_false1> acrichto: Thanks for fixing https://github.com/mozilla/rust/issues/7120
[23:24:26] <strcat> meh
[23:24:31] <strcat> ref_count on exchange allocs is read :(
[23:24:32] <Eridius> is there any syntax in match for having multiple cases (that don't bind variables) running the same statement?
[23:24:33] * strcat needs to find where
[23:24:54] <strcat> Eridius: |
[23:25:36] <Eridius> rusti: match 'c' { 'a' | 'b' => 0i, 'd' | 'c' => 1i, _ => fail!("yarr") }
[23:25:40] -rusti- 1
[23:25:43] <Eridius> cute
[23:25:51] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:26:03] <Eridius> rusti: match Some(1i) { None | Some(a) => a }
[23:26:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cLIG
[23:26:29] <Eridius> rusti: match (1i, 2i) { (a,b) | (b,a) => (a,b) }
[23:26:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/DFjU
[23:26:40] <Eridius> unreachable? nice
[23:26:46] <Eridius> rusti: match (1i, 2i) { (a,2i) | (b,a) => (a,b) }
[23:26:47] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/KDUF
[23:27:03] <Eridius> rusti: match (1i, 2i) { (a,2i) | (_,a) => (a,b) }
[23:27:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OaIA
[23:27:12] <Eridius> rusti: match (1i, 2i) { (a,2i) | (_,a) => a }
[23:27:13] -rusti- 2
[23:27:15] <Eridius> sweet
[23:27:55] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[23:28:27] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Ping timeout)
[23:28:36] <brson> I wonder if it has to do with the difference in mattrs between llc and rustc
[23:29:09] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:29:18] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[23:29:18] *** ChanServ sets mode: +o tjc
[23:31:06] <brson> breakage only seems to happen with mcpu=generic
[23:31:07] *** Quits: mixi (mixi@moz-DBD8904A.org) (Ping timeout)
[23:31:57] <tjc> bblum: Sorry, just saw that. I don't know it very well
[23:33:12] <bblum> tjc: what about moves.rs?
[23:33:32] <tjc> bblum: I think I know moves.rs even less well :-\ might be able to take a stab at specific questions though
[23:33:46] <tjc> Niko isn't in?
[23:33:52] <bblum> nope
[23:34:05] <tjc> well, you could start your weekend early :-D
[23:34:09] * tjc is full of good advice
[23:35:20] <Eridius> rusti: let s = "%s"; fmt!(s, "foo")
[23:35:20] -rusti- <anon>:10:28: 10:29 error: first argument to fmt! must be a string literal.
[23:35:20] -rusti- <anon>:10          let s = "%s"; fmt!(s, "foo")
[23:35:20] -rusti-                                       ^
[23:35:21] -rusti- application terminated with error code 101
[23:35:27] <bblum> tjc: that is a thing that i could do
[23:35:30] <Eridius> do we have a runtime version of fmt!?
[23:36:05] <tjc> Eridius: Well, depends if you count the %? specifier as being "runtime" :-)
[23:36:25] * strcat is very annoyed by this box stuff
[23:36:27] <Eridius> tjc: runtime meaning I can provide the format string at runtime
[23:36:36] <Eridius> hmm, the docs for std still reference core
[23:36:39] <tjc> Eridius: Oh, I see. I don't think so, as it wouldn't be safe
[23:36:51] <Eridius> tjc: well if you can box up the parameters you could make it safe
[23:36:56] <Eridius> because then you have reflection
[23:37:31] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[23:37:47] <strcat> if you pass the parameters as &[&ToStr] or something
[23:37:59] <Eridius> tjc: if we don't have it I'm going to have to basically write my own sprintf restricted to doxXs :/
[23:38:46] <tjc> oh, I see
[23:38:56] <acrichto> steven_is_false1: no problem!
[23:38:57] <tjc> I don't think we have it, given that reflection is kind of recent and boxed-objects working well is even more recent
[23:39:06] <steven_is_false1> acrichto: cool
[23:39:14] <Eridius> :/
[23:39:20] <strcat> tjc: for some interpretation of "well" :)
[23:39:37] *** Joins: sdh_ (sdh@4068E35B.E1257291.E435C74A.IP)
[23:39:37] *** Quits: sdh_ (sdh@4068E35B.E1257291.E435C74A.IP) (Quit: sdh_)
[23:39:38] <tjc> heh
[23:39:39] <tjc> "Better"
[23:40:03] <strcat> it's a mystery to me where this is going wrong
[23:40:16] <strcat> it seems if I don't initialize exchange alloc headers to -1, they somehow get.... realloc'ed as @[]?
[23:40:24] * strcat isn't touching ~[] :|
[23:40:59] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:41:09] <strcat> oh I guess it goes wrong in glue_drop first
[23:41:17] <Eridius> rusti: let x = Foo(3); enum Baz { Foo(int) }; x
[23:41:19] -rusti- Foo(3)
[23:41:22] <Eridius> huh
[23:41:59] <Eridius> rusti: x(); fn x() { println("called"); }
[23:42:01] -rusti- called
[23:42:01] -rusti- ()
[23:42:20] <sully> our compiler is sometimes something else.
[23:42:40] <strcat> that seems fine to me
[23:42:50] <sully> you might wonder, "how does method invocation figure out how many type parameters a method has"
[23:42:54] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Quit: WeeChat 0.4.2-dev)
[23:43:11] <sully> and you might think something like
[23:43:13] <strcat> thanks for nothing debug symbols ;p
[23:43:15] <strcat> ==29159==    by 0x400EA99: call_init (in /usr/lib/ld-2.17.so)
[23:43:17] <strcat> ==29159==    by 0x400EB6B: _dl_init (in /usr/lib/ld-2.17.so)
[23:43:19] <strcat> ==29159==    by 0x40014E9: ??? (in /usr/lib/ld-2.17.so)
[23:43:21] <strcat> ==29159==    by 0x9: ???
[23:43:23] <strcat> ==29159==    by 0x7FEFFFE92: ???
[23:43:25] <strcat> ==29159==    by 0x7FEFFFEBC: ???
[23:43:27] <strcat> ==29159==    by 0x7FEFFFEC2: ???
[23:43:28] <sully> "look up the method info in the methods table, see how many type parameters it has"
[23:43:29] <strcat> ???, yay.
[23:43:32] <sully> and you would be wrong.
[23:43:56] <strcat> kind of amusing that I get a segfault in std::string, as in C++ std::string, from touching exchange allocs
[23:44:26] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[23:44:48] *** Quits: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz) (Quit: zzZZZ)
[23:46:27] *** Quits: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP) (Quit: josh)
[23:47:08] <strcat> stupid glue code
[23:47:36] * strcat thinks this happens from ~ inside @
[23:47:44] <Eridius> rusti: enum Foo { One, ONE }; ONE
[23:47:46] -rusti- ONE
[23:47:53] <Eridius> rusti: enum Foo { One, ONE }; (One, ONE)
[23:47:55] -rusti- (One, ONE)
[23:48:07] <doener> strcat: ref_count is set to -2 for ~ containing @
[23:48:22] <strcat> doener: yeah and -1 for ~ not containing @
[23:48:31] <strcat> but where is it being read for ~ not containing @? that's what I want to know
[23:48:32] <doener> strcat: it's used in vec::reserve and the annihilator
[23:48:35] <sully> ok, woo
[23:48:49] <sully> cross crate polymorphic default functions seem to work
[23:48:58] <strcat> doener: vec::reserve reads ~ headers? (not talking about ~[])
[23:49:30] <strcat> afaik the annihilator is supposed to only be looked at managed ~ and @
[23:49:34] <strcat> not unmanaged ~
[23:49:40] <strcat> looking at*
[23:50:37] <doener> strcat: are you saying that something like ~int gets realloc'ed as @[]?
[23:50:44] <pcwalton> sully: nice
[23:50:57] <strcat> doener: well it causes a crash in @[], but I think it's because the glue_drop is totally screwed
[23:50:58] *** Quits: jorendorff (jorendorff@23227100.8B146FD9.67894F1C.IP) (Quit: jorendorff)
[23:51:04] <strcat> for ~int
[23:51:05] *** Quits: joone (joone@E10A1781.2160464A.A34EC3BB.IP) (Quit: Ex-Chat)
[23:51:05] <strcat> inside @
[23:51:08] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:51:14] <sully> hm, I should test it with trait objects
[23:51:38] <Eridius> rusti: fmt!("%*d", 2, 1)
[23:51:39] -rusti- <anon>:10:14: 10:19 error: internal compiler error: unimplemented conversion not supported in fmt! string
[23:51:39] -rusti- <anon>:10          fmt!("%*d", 2, 1)
[23:51:39] -rusti-                         ^~~~~
[23:51:39] -rusti- application terminated with error code 101
[23:51:44] <Eridius> damn
[23:51:49] <Eridius> I was totally going to abuse that
[23:51:56] <strcat> doener: I'm removing the headers on unmanaged exchange allocs so anything reading them is going to break, I just can't find where they're read
[23:52:12] <strcat> prev/next aren't read, at least
[23:53:10] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:53:10] <ghrust> 01[13rust01] 15brson pushed 1 new commit to 06master: 02http://git.io/lyTueg
[23:53:10] <ghrust> 13rust/06master 1438e0574 15Brian Anderson: xfail run-pass/auto-encode.rs
[23:53:10] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:53:17] * brson gives up
[23:53:18] *** Joins: jga (asdf@875267B6.F8192EC3.B5524284.IP)
[23:53:41] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[23:54:01] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:54:12] <strcat> VALGRIND_COMPILE takes sooooo long
[23:54:15] * strcat wants asan
[23:54:15] <erickt> cmr: wow, from_elem is substantially slower than vec::with_capacity/ptr::set_memory
[23:54:23] <Eridius> :/
[23:54:51] *** Parts: steven_is_false1 (steven@moz-144077DE.bchsia.telus.net) ()
[23:55:15] <Eridius> rusti: -1 as uint
[23:55:16] -rusti- 18446744073709551615
[23:55:40] <erickt> cmr: our bench suite has with_capacity/set_memory taking 367ns per iteration, and from_elem at 15749ns per iteration 
[23:55:51] *** Joins: joone (joone@moz-C50DC051.jf.intel.com)
[23:55:56] <brson> erickt: maybe from_elem could be optimized with a bit of reflection to determine if T is POD
[23:56:11] <strcat> or we could make closures not so awful ;p
[23:56:17] <strcat> C++ lambdas optimize away
[23:56:20] <strcat> ours don't
[23:56:24] <pcwalton> they don't?
[23:56:30] <pcwalton> doesn't SROA optimize them away?
[23:56:31] <strcat> sometimes they do. often they don't
[23:56:38] <pcwalton> that's odd
[23:56:43] <doener> pcwalton: https://github.com/mozilla/rust/issues/6623
[23:56:49] <erickt> brson / cmr: I have a bug report here: https://github.com/mozilla/rust/issues/7136
[23:57:14] <erickt> I'm about to add my test case to it
[23:57:27] <aatch> pcwalton, sroa is weird. Most of the issues I had when doing the optimization work was from it.
[23:57:30] <strcat> pcwalton: C++ lambdas don't have env pointers
[23:57:44] <pcwalton> that shouldn't be a problem though?
[23:58:38] * strcat shrugs
[23:58:56] <pcwalton> so we can't optimize it the same way that C++ does because C++ lambdas are anonymous types
[23:59:01] <pcwalton> i.e. they're dynamically sized
[23:59:06] <pcwalton> ours are not dynamically sized
[23:59:15] <Eridius> I wish we had an easy way to construct structs by zero-initializing fields
[23:59:26] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Input/output error)
