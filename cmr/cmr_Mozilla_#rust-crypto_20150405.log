[00:23:47] <Ilari> Negotiating different parts of TLS ciphersuite is more complicated? Wonder what the heck those TLS stacks are doing, as those seem like orthogonal concerns and there should be internal mapping tables anyway.
[00:44:32] <Tobba> how long does it usually take to establish a TLS connection?
[00:46:06] <lahwran> you know what would be really great? if tls could become more efficient on really low end hardware
[00:46:17] <lahwran> at work we use tls a *lot* on armv5 devices
[00:46:22] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[00:46:33] <lahwran> "tls is cheap" doesn't apply when you don't have a modern cpu :p
[00:47:44] <tiffany> are you stuck with tls, lahwran, or just need encryption?
[00:47:54] <tiffany> because you could try something like curvecp
[00:49:19] <lahwran> not completely stuck, but it would take a lot more convincing to move away from TLS
[00:49:46] <lahwran> we aren't using the public CA system, we're using our own CA and our own CN identifiers, not domain names
[00:50:54] <Ilari> Is g=2 faster than g=1 on low-end hardware, or only if you can throw crazy amounts of vectorization (AVX) around?
[00:51:41] <lahwran> I don't know what g is in that sentence
[00:51:43] <lahwran> generation?
[00:52:01] <Ilari> genus. 
[00:53:24] <lahwran> I don't know what that means, and probably don't know the answer
[00:54:17] <eternaleye> lahwran: What stack are you using?
[00:54:35] <eternaleye> lahwran: I'll note that chacha should probably help out a good bit as compared to AES
[00:55:22] <lahwran> stack as in implementation?
[00:55:32] <lahwran> openssl
[00:55:35] <lahwran> unfortunately
[00:55:36] <lahwran> :<
[00:56:05] <Ilari> Way back when, DJB did g=2 that was faster than Curve25519 at equivalent estimated level, even without optimizing coefficients (because optimized coefficients were computed only years later).
[00:56:09] <lahwran> I wonder how viable it would be for us to switch to libressl - anyone know if that's an improvement in security? I'd expect it to be, but I wouldn't want to just assume it was
[00:56:19] <Ilari> This was optimized for Pentium M.
[00:56:40] <lahwran> eternaleye: I don't know the details of how we're using tls
[00:56:49] <lahwran> I haven't poked to see what ciphers or such things
[00:56:52] <eternaleye> lahwran: Well, it's probably _smaller_, which is a benefit in and of itself for arm...
[00:57:05] <eternaleye> lahwran: Considering how much libressl ripped out wholesale
[00:57:23] <eternaleye> lahwran: Amd you could almost certainly switch - my laptop and a server I maintain are on libressl
[00:57:28] <eternaleye> *and
[00:57:54] <eternaleye> lahwran: And they're full Linux systems, with the laptop running KDE with the works
[00:58:13] <lahwran> "on libressl" as in you just swapped them out?
[00:58:20] <lahwran> is it *that* compatible?
[00:58:31] <eternaleye> lahwran: Required recompiling things (soname changed), but yeah
[00:58:38] <Ilari> Well, adding Curve25519 would make TLS at least a bit more efficient for pretty much all hardware using anything except PSK.
[00:58:42] <lahwran> I think we can recompile things :p
[00:58:43] <eternaleye> lahwran: Exherbo has them both satisfy the virtual/libssl dependency
[00:58:58] <lahwran> exherbo?
[00:59:00] <eternaleye> lahwran: It does rip out compression entirely, which means some things require minor patches
[00:59:07] <eternaleye> lahwran: The distro I use and am a dev for
[00:59:10] <lahwran> ah
[00:59:22] <c74d> lahwran: a Linux distribution, Gentoo-descendent.
[00:59:35] <eternaleye> c74d: Not quite a Gentoo-descendant
[01:00:09] <eternaleye> c74d: Some of its features are gentoo-inspired, but it has a different package format, a different PM, a different set of tools (eclectic instead of eselect, etc)
[01:00:18] <c74d> ah
[01:00:42] <eternaleye> c74d: It's more that it's Paludis-derived, and Paludis started as an alternate PM on Gentoo
[01:00:47] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[01:00:56] <c74d> It uses *a* Gentoo package manager, no? (I forget which, pkgcore orâ€” that.
[01:01:13] <eternaleye> c74d: Paludis has modular package format backends, though
[01:01:37] <eternaleye> c74d: There's an effort to support rubygems directly, for instance
[01:01:44] <eternaleye> c74d: And another to support Hackage
[01:01:55] <eternaleye> c74d: Rather than requiring exheres for them
[01:03:01] <c74d> lahwran: PolarSSL/mbedTLS would be more of an improvement, if perchance a different API is acceptable. (And it's owned by ARM now, which might be good for you.)
[01:07:43] <Ilari> lahwran: I guess the biggest improvement speedwise would be using faster crypto primitives. The ones in TLS aren't quite optimal.
[01:11:08] <lahwran> right, what you said
[01:12:14] <eternaleye> lahwran: That's why I mentioned chacha, which probably will show up in libressl (and openssl) quickly
[01:12:35] <eternaleye> Ilari: IIRC it just needs the codepoints assigned now?
[01:13:26] <Ilari> For key exchage yes.
[01:51:49] *** Quits: brson (brson@moz-ppb.c9m.56.172.IP) (Quit: leaving)
[01:55:50] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:28:52] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[02:42:25] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[03:03:09] *** Quits: tiffany (lymia@moz-6q5ofr.lyrical.lymia.moe) (A TLS packet with unexpected length was received.)
[03:04:22] *** Joins: tiffany (lymia@moz-6q5ofr.lyrical.lymia.moe)
[03:22:13] *** Joins: c74d3 (c74d3a4ebb6@moz-uulq0e.mggc.hibn.4404.2002.IP)
[03:22:47] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[03:33:25] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[03:47:00] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[03:57:10] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[04:03:08] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[04:15:14] *** Joins: brson (brson@moz-ppb.c9m.56.172.IP)
[04:33:26] *** Quits: brson (brson@moz-ppb.c9m.56.172.IP) (Quit: leaving)
[04:42:25] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:42:54] *** Quits: c74d3 (c74d3a4ebb6@moz-uulq0e.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[06:03:00] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[06:31:18] *** Quits: BigE (BigE@moz-4lmh4m.privacyfoundation.ch) (Ping timeout: 121 seconds)
[07:28:53] *** Joins: BigE (BigE@moz-5qtjuh.geoca.st)
[07:50:03] *** Quits: tiffany (lymia@moz-6q5ofr.lyrical.lymia.moe) (A TLS packet with unexpected length was received.)
[08:16:13] *** Joins: tiffany (lymia@moz-6q5ofr.lyrical.lymia.moe)
[11:02:08] *** Quits: BigE (BigE@moz-5qtjuh.geoca.st) (Connection closed)
[11:02:21] *** Joins: BigE (BigE@moz-4lmh4m.privacyfoundation.ch)
[13:06:45] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:33:56] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[16:51:44] *** Quits: tiffany (lymia@moz-6q5ofr.lyrical.lymia.moe) (Quit: ZNC - http://znc.in)
[16:51:52] *** Joins: tiffany (lymia@moz-6q5ofr.lyrical.lymia.moe)
[17:34:33] * bascule upgrades from beta to nightly to get his code to compile o_O
[18:10:10] * Ilari never "upgraded" to beta.
[18:11:04] <bascule> lol
[18:39:16] <Ilari> Well, git thinks the version I have is newer than beta (as opposed to incomparable version). :->
[18:50:55] <bascule> I really wish it were easier to express desire-to-zero
[18:51:31] <bascule> this is a bunch of deserialization code where I have to do a conversion of a secret value in Base64 to bytes
[18:52:43] <bascule> I'm having to make a copy of the actual secret part to sate rustc, or at least if there's a way to do it without copying, I haven't found it
[18:54:34] <bascule> but each time I make a copy of a secret I want to zero out the old copy if possible
[18:54:40] <bascule> or ensure it gets zeroed
[18:54:54] <bascule> that's kind of hard to do right now
[19:03:33] <Ilari> Well, without mutating the buffer, one has to make one copy....
[19:14:17] <Ilari> Or you could have the caller pass buffer to write to.
[19:15:02] <bascule> I could definitely make the from_base64 output mutable
[19:15:25] <bascule> and probably want to, so I can zero it when I'm done
[19:15:50] <bascule> oh hey, if sodiumoxide exposes sodium_memzero I'm set! lol
[19:17:55] <Ilari> Actually I think if it links to some library that exposes it and it doesn't specifically make it private, it can be referenced from outside.
[19:23:36] <Ilari> Hah at the StartSSL OCSP episode. Nobody really should expect WebPKI CAs to care about revocation.
[19:24:57] *** Quits: BigE (BigE@moz-4lmh4m.privacyfoundation.ch) (Quit: Leaving)
[19:28:53] *** Joins: BigE (BigE@moz-d4em5e.de.colt.net)
[19:28:57] <tiffany> ilari: the fun thing was how firefox won't let you visit sites for which the OSCP servers are inaccessible
[19:30:19] <Ilari> You haven't turned OCSP off?
[19:38:11] <Ilari> IIRC, some command line utility I have checks OCSP and actually hardfails... Well, good way to get people to just disable whole certificate validation.
[19:40:10] <tiffany> I wasn't aware you could turn it off, actually
[19:40:22] <tiffany> I can see why it works like that, though
[19:40:44] <tiffany> if someone forges a cert and it gets revoked, and they have mitm, they can block the OSCP servers and still use the forged cert
[19:48:29] <Ilari> Well, OCSP responses can be replayed for a few days in practically all WebPKI deployments.
[19:49:03] <Ilari> Didn't I say no WebPKI CA takes revocation seriously?
[19:49:40] <tiffany> oh
[19:49:45] <tiffany> wow
[19:51:00] <Ilari> There actually is a mechanism in OCSP to ensure fresh replies. But for most OCSP responders, it triggers an error if one tries to use it.
[19:53:31] <Ilari> There actually are CA deployments that take revocation seriously. But certs for those are seriously expensive, much more expensive than EV certs for WebPKI.
[19:56:41] <eternaleye> IMO, the most persistently disappointing thing about the WebPKI landscape is the lack of support for name constraints
[19:57:08] <eternaleye> I mean, they're right there in the spec
[19:57:15] <eternaleye> But nobody can use them
[20:02:24] <Ilari> Also, WebPKI has enormous amount of crap that is truly irrelevant for Web PKI...
[20:04:16] <Ilari> E.g. Having certificate validation problem not known to be in P (or worse, known not to be in P) is not a good thing for a PKI system...
[20:08:01] <bascule> should I try running a CT log internally at Square y/n?
[20:08:15] <bascule> for internally-issued certificates
[20:09:57] <Ilari> And thanks to current state of knowledge with regards to complexity theory, "known not to be in P" means (without advances) "known not to be in PSPACE", i.e. can take super-polynomial memory.
[20:13:57] <bascule> o_O http://venturebeat.com/2015/04/04/gmails-ssl-certificate-for-smtp-appears-to-have-expired/
[20:18:40] <Ilari> *might take super-polynomial memory.
[20:28:39] <Ilari> Well, yet another WebPKI SNAFU.
[20:33:50] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[21:07:54] <Ilari> Also, the design of X.509 is from era before packet switching.
[21:09:20] <tiffany> ITU standards have this awful smell to them
[21:09:32] <tiffany> of being built around telecom
[21:09:42] <tiffany> I tried reading the one for H.264 once
[22:35:13] <Ilari> Also, X.509 has attitude of: If client software ("relying party") rejects some extremely weird certificate that violates standards in all manner of ways, then the client software is faulty.
[22:40:36] <Ilari> The worst stuff isn't found in WebPKI. The worst stuff is found in various "qualified digital signature" contexts.
[22:42:40] <Ilari> Also, reminds me of German digital signature law "compliance solution" seen in one place. Involved Unix pipeline ending in lpr...
[22:58:46] <Ilari> Oh, and then there's X.509 KeyUsage named NonRepuditation (later renamed to ContentCommitment). Nobody really knows what it does...
[23:03:56] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[23:13:29] <Ilari> What features does WebPKI really need?
[23:14:43] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[23:21:36] *** Quits: WindowsBunny (Peter@moz-ubruqj.east.verizon.net) (Quit: Leaving.)
[23:21:57] *** Joins: WindowsBunny (Peter@moz-ubruqj.east.verizon.net)
[23:29:35] <eternaleye> Ilari: Assert ownership of a name, bind a communication channel to a name.
[23:30:09] <eternaleye> Ilari: _possibly_ also include "delegate ownership of related names"
[23:30:21] <eternaleye> oh hey capabilities
[23:30:26] <eternaleye> :/
[23:32:27] <eternaleye> IMO the problem with "fixing webpki" is it retains the presumption that the correct solution is PKI
[23:32:29] <eternaleye> As opposed to attestations, or similar.
[23:33:17] <eternaleye> For instance, all of the name delegation stuff can probably be done with Macaroons in a reasonably clean way, and the leaf-level macaroons could assert the signing key's hash, or the public DH key's hash, or whatever.
[23:33:33] <tiffany> the more horrible things I find out about PKI, the more pissed off I get that we don't just do something like storing public keys in DNS records
[23:33:35] <eternaleye> And that's used to bind the communication channel to the name
[23:33:42] <tiffany> trusting one DNS server seems a lot less harmful than trusting 200 CAs
[23:33:46] <eternaleye> tiffany: That's not much better, sadly
[23:33:59] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:34:06] <eternaleye> tiffany: DANE is a kind of sad implementation of a half-decent core idea
[23:34:15] <eternaleye> tiffany: And much of the problem comes from DNS being DNS
[23:34:56] <eternaleye> tiffany: Also, you're not just trusting one DNS server
[23:35:05] <tiffany> or a p2p DNS replacement, or just straight up derive internet addresses from public keys (cjdns)
[23:35:11] <eternaleye> tiffany: You're trusting the delegation chain up to the root
[23:35:13] <tiffany> yeah, I guess
[23:35:29] <eternaleye> tiffany: Also, cjdns annoys me, because it's basically reinventing HIP
[23:35:35] <tiffany> HIP?
[23:35:41] <eternaleye> tiffany: Host Identity Protocol
[23:35:46] <eternaleye> tiffany: IETF standards-track
[23:35:59] <eternaleye> tiffany: Which the whole cj* stack is basically reinventing blind
[23:37:04] <tiffany> this looks like something that might actually catch on someday
[23:37:05] <eternaleye> tiffany: One implementation's site, has good info and links: http://infrahip.hiit.fi/
[23:37:10] <tiffany> as opposed to cjdns which is pie in the sky
[23:38:45] <tiffany> and HIP keeps the tree-based routing too, looks like
[23:38:59] <tiffany> that is a serious concern for cjdns's scalability
[23:39:08] <tiffany> they have no real numbers that it will be able to scale, just lots of anecdotes
[23:39:42] <tiffany> people claiming their latency is less through cjdns than through general purpose internet, despite being tunneled through it; and that routing is entirely non-geographical, instead based on the key space
[23:40:20] <eternaleye> tiffany: There's currently work on HIPv2 going on
[23:40:22] <eternaleye> tiffany: https://tools.ietf.org/html/draft-ietf-hip-rfc5201-bis
[23:40:36] <eternaleye> tiffany: The initial implementation push exposed some issues, which are being addressed
[23:41:04] <eternaleye> also, another nice thing?
[23:41:12] <eternaleye> Explicitly specifies the state machine.
[23:42:45] <eternaleye> tiffany: But yeah, cj* doesn't impress me much at all, especially when they could instead be helping out with HIPv2 design efforts
[23:42:51] <eternaleye> tiffany: And implementation efforts.
[23:43:22] <tiffany> eternaleye: if it makes you feel any better, there haven't been any commits to cjdns in almost a month, and development has been slow for a while
[23:45:16] <eternaleye> tiffany: Sure, but it's still all a waste IMO, especially with how much noise they made about "wanting to solve the problem"
[23:45:28] <eternaleye> tiffany: And then ignoring a group that was just sitting down and doing so
[23:46:17] <eternaleye> tiffany: Especially when it reinvents so many wheels compared to HIP
[23:46:40] <tiffany> I don't think it's even documented anywhere obvious what crypto cjdns even uses
[23:47:07] <eternaleye> tiffany: Also, cjdns bogarts the entire 0xfc ipv6 address space
[23:47:15] <eternaleye> tiffany: Which is just incredibly rude
[23:47:29] <tiffany> oh
[23:47:32] <eternaleye> tiffany: HIP introduced the ORCHID scheme _explicitly_ to avoid that crap
[23:47:37] <tiffany> I didn't even think they picked a subset of the address space
[23:47:47] <eternaleye> tiffany: https://en.wikipedia.org/wiki/Cjdns#Address_Generation
[23:48:17] <eternaleye> tiffany: They use a hashcash-like technique, of generating keys until one hashes to 0xfc....
[23:48:32] <eternaleye> tiffany: And then use the hash's first 128 bits as the IPv6 address
[23:48:58] <eternaleye> tiffany: So they basically said "yoink!" to a massive fraction of the private address space
[23:49:10] <eternaleye> tiffany: Portions of which are already sub-namespaced, IIRC
[23:50:46] <eternaleye> tiffany: Anyway, cjdns has a nasty habit of tending towards designing in a vacuum
[23:50:59] <eternaleye> tiffany: And on the internet, that really doesn't work out well
[23:51:21] <tiffany> yeah, cjdns seems to want to replace IPv6, which is definitely not going to happen
[23:51:27] <Ilari> Uses 0xfc instead of just squatting some unallocated space (which there are plenty of in IPv6)?
[23:52:13] <eternaleye> Ilari: 0xFC is squatting in space they're not supposed to be using period :/
[23:53:09] <Ilari> FC00::/8 is quite screwed up anyway.
[23:54:24] <eternaleye> Ilari: FC00::/8 shouldn't be, since it's reserved by the IETF :/
[23:54:46] <Ilari> Nope, it isn'.
[23:54:48] <Ilari> *isn't.
[23:54:55] <eternaleye> Ilari: Yes, it is
[23:55:04] <eternaleye> Ilari: FC00::/7 is specced for something
[23:55:17] <eternaleye> Ilari: FD00::/8 inside that has a defined ULA scheme
[23:55:43] <eternaleye> Ilari: FC00::/8 is reserved so far, but is within the FC00::// general ULA section
[23:55:45] <Ilari> FC00::/7 is "Unique Local Unicast". Split into two subregions, FC00::/8 and FD00::/8.
[23:56:08] <eternaleye> *7
[23:56:59] <eternaleye> Ilari: FC00::/8 is reserved. FD00::/8 is the first allocated block in FC00::/7, and FC00::/8 is reserved (as an unallocated block)
[23:58:00] <eternaleye> Ilari: But the misconception that it's free-for-all is problematic _and_ pervasive.
