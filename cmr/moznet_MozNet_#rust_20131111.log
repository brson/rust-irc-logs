[00:01:34] *** jorendorff is now known as jorendorff_away
[00:04:51] *** jorendorff_away is now known as jorendorff
[00:06:16] *** jorendorff is now known as jorendorff_away
[00:07:53] <d3xter> strcat: what about [no_std]?
[00:09:30] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[00:09:35] <strcat> no limitations about linking with that, assuming you aren't using crates
[00:09:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:10:23] <dbaupp> strcat: is the morestack thing linked in statically?
[00:10:27] <d3xter> strcat: oh ok
[00:11:00] <strcat> dbaupp: you can't use segmented stacks with #[no_std]
[00:11:07] <strcat> you have no choice but to compile/link with clang atm
[00:11:35] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[00:12:07] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[00:12:16] <strcat> and there's the pain stemming from rust using an exception personality unique to it
[00:12:34] <strcat> and it assumes foreign functions can throw, since it's not reading the headers and seeing the nothrow annotations
[00:13:04] <strcat> so you end up having to manually edit the IR and mark everything as nounwind ;s
[00:13:18] <dbaupp> yeah, that's what I mean: you neeed #[no_std] + clang to get proper static linking.
[00:13:28] <strcat> well, you can't use rustc's backend at all
[00:13:28] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:13:37] <strcat> with or without static linking
[00:14:12] <strcat> unless you write a new __morestack (the rust one won't be right) and fill in the other symbols it wants
[00:15:59] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[00:17:13] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Connection reset by peer)
[00:17:27] *** Joins: lkuper (lkuper@687721A6.CDD31A0A.51B6877.IP)
[00:17:38] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[00:19:54] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[00:20:15] <ercxx> how do I use Peekable::peek() in a loop?
[00:21:24] <Luqman> ercxx: on a port?
[00:21:52] <ercxx> port? I'm just iterating over a simple string and want to see the next char.
[00:22:10] <Luqman> oh :P
[00:22:52] <dbaupp> ercxx: you need to wrap the iterator into a Peekable, with .peekable()
[00:24:09] <dbaupp> ercxx: and then you can use .peek() on that object (although you can't use an iterator inside its for loop, because of how it's implemented internally; you have to write the manually desugared version: `loop { match it.next() { None => break, Some(x) => { let peeked = it.peek(); ... } }`)
[00:24:27] <ercxx> dbaupp: I did actually wrap it. http://pastebin.mozilla.org/3474656
[00:24:53] <ercxx> I see, so no 'for' loops.
[00:24:59] <ercxx> thanks
[00:25:19] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[00:27:14] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[00:28:32] *** Quits: d3xter (sinz@moz-E9937ECB.adsl.highway.telekom.at) (Quit: WeeChat 0.4.2)
[00:29:51] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[00:30:23] <dbaupp> ercxx: yeah, it's annoying, but the current implementation was the easiest way to get something that worked with the external iterators (you can use `rustc --pretty expanded foo.rs` to see what it desugars to, btw)
[00:30:45] <ercxx> thank you again
[00:35:32] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Ping timeout)
[00:36:52] *** Joins: brendan (brendaneic@45A3491F.A5FB4ABA.FE58E87C.IP)
[00:40:00] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[00:48:46] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[00:48:52] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[00:57:44] *** jorendorff_away is now known as jorendorff
[00:58:59] *** Quits: gamakichi (Mibbit@moz-B234C23B.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:59:41] *** nrc is now known as nrc|afk
[01:00:03] <ercxx> How do I make sure my struct will fulfill `Freeze` ?
[01:00:36] <strcat> don't put non-Freeze things in it (RcMut, Cell, @mut)
[01:01:02] <ercxx> :)
[01:01:05] <ercxx> thanks
[01:01:20] <ercxx> It was RcMut
[01:01:50] <ercxx> or RWArc
[01:03:09] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:06:10] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[01:10:42] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:11:03] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:12:52] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[01:13:46] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[01:18:59] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:20:59] *** jorendorff is now known as jorendorff_away
[01:21:29] *** Joins: claws (Mibbit@19B4F7A4.716DD980.59D37A3.IP)
[01:21:29] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:21:48] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[01:22:49] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:23:36] *** jorendorff_away is now known as jorendorff
[01:23:47] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[01:25:49] *** Quits: claws (Mibbit@19B4F7A4.716DD980.59D37A3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:28:48] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[01:29:51] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[01:30:59] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Quit: leaving)
[01:33:19] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[01:33:54] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[01:42:37] *** Joins: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net)
[01:43:17] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:46:39] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[01:49:09] *** Quits: lkuper (lkuper@687721A6.CDD31A0A.51B6877.IP) (Quit: lkuper)
[01:49:39] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[01:50:29] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:52:16] *** Joins: lkuper (lkuper@687721A6.CDD31A0A.51B6877.IP)
[01:57:01] *** jorendorff is now known as jorendorff_away
[01:57:13] *** Quits: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net) (Quit: maxiepoo)
[01:58:07] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[01:59:30] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[02:00:27] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[02:00:59] *** Joins: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net)
[02:02:14] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[02:10:47] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[02:18:11] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[02:19:07] *** Quits: nkoep (nik@moz-421BEA88.pool.mediaways.net) (Client exited)
[02:19:41] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[02:23:54] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Ping timeout)
[02:24:05] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[02:25:55] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[02:26:04] *** Quits: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net) (Quit: maxiepoo)
[02:26:44] *** Joins: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net)
[02:29:23] *** Quits: sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Client exited)
[02:30:16] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[02:30:18] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[02:31:16] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[02:31:17] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[02:31:31] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:31:50] <ercxx> in something like `fn something(self, c:char){}` does the self actually get copied?
[02:32:31] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[02:33:11] *** Joins: wdeng (Mibbit@E1AD879F.CC98CBF7.C589985.IP)
[02:34:25] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[02:35:09] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:35:13] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:35:52] <strcat> ercxx: by-value (assign, passing) is a shallow memcpy
[02:36:07] <strcat> it's not possible to override it, so it's never anything else
[02:36:17] <ercxx> ok
[02:42:47] *** Joins: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net)
[02:43:09] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Input/output error)
[02:43:52] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[02:45:04] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[02:47:39] *** Quits: lkuper (lkuper@687721A6.CDD31A0A.51B6877.IP) (Quit: lkuper)
[02:47:44] *** Quits: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net) (Client exited)
[02:48:10] *** Joins: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net)
[02:48:37] *** Quits: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net) (Quit: maxiepoo)
[02:49:58] *** Quits: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[02:50:03] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[02:50:11] *** Joins: lkuper (lkuper@687721A6.CDD31A0A.51B6877.IP)
[02:51:42] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[02:55:43] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[02:55:43] *** ChanServ sets mode: +ao dherman dherman
[02:56:42] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[02:56:59] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[02:58:10] *** Joins: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net)
[02:58:25] *** Joins: bigmonachus (sglez@CB1F68BF.21A7D86C.A208C5.IP)
[02:59:24] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[02:59:51] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[03:00:17] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Input/output error)
[03:00:25] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[03:00:46] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:02:28] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[03:03:33] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:04:33] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[03:04:55] *** Joins: p_adams (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com)
[03:05:39] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[03:05:43] *** Quits: maxiepoo (Max@moz-C6A30172.hsd1.il.comcast.net) (Quit: maxiepoo)
[03:06:20] *** Joins: jyyou (jyyou@moz-1A35BF79.cs.nctu.edu.tw)
[03:07:22] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[03:08:16] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:09:43] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[03:09:49] *** Quits: jyyou (jyyou@moz-1A35BF79.cs.nctu.edu.tw) (Quit: leaving)
[03:09:59] *** Joins: jyyou (jyyou@moz-1A35BF79.cs.nctu.edu.tw)
[03:10:06] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:11:38] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[03:11:59] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:13:45] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[03:14:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:15:42] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:17:48] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[03:19:23] *** nrc|afk is now known as nrc
[03:20:58] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[03:21:59] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Client exited)
[03:24:34] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[03:24:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:26:04] *** Quits: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP) (Quit: glinscott)
[03:26:42] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[03:27:42] *** Quits: pnathan (Adium@moz-5EBBDD83.tukw.qwest.net) (Ping timeout)
[03:27:48] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:27:56] *** Joins: pnathan (Adium@moz-5EBBDD83.tukw.qwest.net)
[03:31:23] *** Joins: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP)
[03:33:07] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[03:33:38] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[03:38:12] *** Quits: lkuper (lkuper@687721A6.CDD31A0A.51B6877.IP) (Quit: lkuper)
[03:41:09] *** Quits: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP) (Quit: glinscott)
[03:41:11] *** Quits: brendan (brendaneic@45A3491F.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[03:41:48] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[03:42:58] *** Joins: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP)
[03:43:49] *** Quits: kimundi (kimundi@moz-F6A330D3.dip0.t-ipconnect.de) (Ping timeout)
[03:46:25] *** Joins: brendan (brendaneic@45A3491F.A5FB4ABA.FE58E87C.IP)
[03:46:49] *** Joins: kimundi (kimundi@moz-7464178B.dip0.t-ipconnect.de)
[03:48:17] *** Quits: brendan (brendaneic@45A3491F.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[03:51:37] *** kimundi is now known as zz_kimundi
[03:54:24] *** Joins: icarot (yaaic@moz-BBFD6490.lightspeed.sntcca.sbcglobal.net)
[03:56:58] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[03:58:19] *** zz_kimundi is now known as kimundi
[03:59:15] *** Quits: p_adams (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com) (Quit: WeeChat 0.4.2)
[04:00:10] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[04:00:26] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:03:30] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[04:04:07] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:05:58] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[04:07:27] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[04:09:24] *** Joins: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au)
[04:11:03] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:11:11] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[04:12:32] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:13:38] <o11c> I get an error while building doc/rust.pdf
[04:14:36] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[04:14:41] *** Quits: bigmonachus (sglez@CB1F68BF.21A7D86C.A208C5.IP) (Quit: Leaving)
[04:14:57] <o11c> https://gist.github.com/o11c/7407754
[04:18:26] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:19:52] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:20:27] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[04:22:41] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[04:23:11] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[04:23:32] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[04:23:57] <dbaupp> o11c: can you run `make docs VERBOSE=1`?
[04:25:14] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[04:27:00] *** Joins: user (chatzilla@moz-16F074D1.device.mst.edu)
[04:27:08] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:27:17] *** Parts: user (chatzilla@moz-16F074D1.device.mst.edu) ()
[04:27:17] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[04:27:37] *** Joins: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP)
[04:27:37] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:28:09] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[04:28:09] *** ChanServ sets mode: +ao brson brson
[04:29:03] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[04:29:54] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[04:29:54] *** ChanServ sets mode: +ao dherman dherman
[04:31:19] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[04:31:19] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:31:23] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[04:31:24] *** ChanServ sets mode: +ao brson brson
[04:31:29] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Quit: brson)
[04:31:38] *** Quits: maxiepoo_ (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Quit: Leaving)
[04:32:59] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[04:32:59] *** ChanServ sets mode: +ao brson brson
[04:33:42] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[04:33:47] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[04:33:47] *** ChanServ sets mode: +ao brson brson
[04:33:55] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:34:44] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[04:35:03] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[04:35:03] *** ChanServ sets mode: +ao brson brson
[04:36:51] <sam113101> brson: is everything alright?
[04:39:23] <o11c> dbaupp: edited the gist to add verbose error
[04:40:02] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:41:27] *** Quits: wdeng (Mibbit@E1AD879F.CC98CBF7.C589985.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:41:55] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[04:42:30] <dbaupp> o11c: oh, that's no much help :( ... I've got no idea what that problem could be.
[04:44:34] <brson> sam113101: i'm ok, yeah. you?
[04:44:46] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:46:01] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Connection reset by peer)
[04:46:29] <sam113101> brson: I'm ok too
[04:47:36] *** Joins: bholley (anonymous@moz-FCAF9AAB.hsd1.ca.comcast.net)
[04:49:00] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[04:49:11] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[04:50:33] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[04:51:33] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[04:52:08] *** Joins: mib_xomqyg (Mibbit@moz-64B69F0E.dyn.optonline.net)
[04:53:08] *** Quits: mib_xomqyg (Mibbit@moz-64B69F0E.dyn.optonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:01:28] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[05:01:45] *** Quits: jix (jix@moz-D969BFFC.de) (Ping timeout)
[05:02:29] *** Quits: bholley (anonymous@moz-FCAF9AAB.hsd1.ca.comcast.net) (Quit: bholley)
[05:03:14] *** Joins: gem (nandaja@325F5789.1EF6344.9D59D0D8.IP)
[05:03:55] *** Joins: jix (jix@moz-D969BFFC.de)
[05:07:51] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[05:08:38] *** Quits: canhtak (canhtak@moz-D3FC497D.wl.t.ulaval.ca) (Quit: canhtak)
[05:13:13] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:13:43] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:13:58] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[05:15:16] *** Joins: wycats_ (sid79@moz-5F4AA75A.irccloud.com)
[05:15:21] <wycats_> hey folks
[05:15:22] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[05:15:38] <wycats_> what's the state of the art in using Rust to build dynamic libraries?
[05:15:49] <wycats_> everything I read says "it works, if you know the right incantations and avoid stuff"
[05:15:56] <wycats_> what are the right incantations?
[05:17:11] <SiegeLord> Dynamic libraries usable from languages other than Rust you mean?
[05:17:57] <wycats_> right
[05:18:16] <wycats_> something I can dlopen
[05:18:23] <wycats_> I know about nomangle
[05:18:42] <wycats_> it looks like http://brson.github.io/2013/03/10/embedding-rust-in-ruby/ was the state of the art in March
[05:18:46] <wycats_> but I assume a lot has changed
[05:19:13] <mimcpher> yeah the abi stuff has changed since
[05:19:22] <wycats_> "I/O doesn’t work because core::io (unfortunately, and incorrectly) uses @-boxes" <= has this been fixed? I assume so because of the walking-dead state of @-boxes in general
[05:20:11] <wycats_> (I got a couple days this week to explore using Rust for a project, but it's a dynamic library, so I wanted to bone up before I got started)
[05:20:18] <mimcpher> The new IO stuff is based around the libuv runtime
[05:20:33] <wycats_> yeah... which looks exciting
[05:20:49] <wycats_> we've also been exploring embedding libuv, so rust could kill two birds with one stone
[05:20:52] <wycats_> :P
[05:21:09] <mimcpher> So you still can't easily embed rust code without bringing the whole runtime along for the party
[05:21:13] <mimcpher> and I'm not sure that works
[05:21:29] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[05:22:18] <wycats_> I'
[05:22:30] <wycats_> I'm willing to bring along the runtime, if the runtime itself coulf be embedded
[05:25:29] <wycats_> is there a canonical way to do *that*?
[05:25:36] *** Joins: pseudoku (quassel@F68BFC88.6785D218.520CDC98.IP)
[05:25:53] <mimcpher> Not sure there is.
[05:26:02] <wycats_> hm
[05:26:12] <pseudoku> Is there a once stack closure. I want to capture a owned value inside the closure
[05:26:18] <wycats_> I saw a rust-core project?
[05:26:29] <wycats_> is that too highly experimental to bother with?
[05:26:51] <wycats_> https://github.com/thestinger/rust-core
[05:27:11] <mimcpher> wycats_: It's unofficial, mostly strcat's project
[05:27:47] <wycats_> so I'm out of luck, it sounds like?
[05:27:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:27:54] <wycats_> even if I'm willing to embed the runtime?
[05:27:58] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:28:24] <mimcpher> wycats_: You could probably make it work
[05:28:36] <wycats_> where should I start reading up?
[05:28:43] <SiegeLord> I think it should be possible... the only vague issue is this __morestack thing
[05:28:51] <SiegeLord> I'm not sure how that works (or exactly what that is)
[05:28:59] <SiegeLord> That really is the only new thing that was added since march
[05:29:01] <wycats_> __morestack is going away right?
[05:29:09] <mimcpher> Yeah, but it hasn't yet.
[05:29:11] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[05:29:12] <wycats_> it's a segmented stack thing?
[05:29:13] <wycats_> ah ok
[05:29:14] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:29:59] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[05:30:39] <wycats_> so what are the steps to try?
[05:31:33] <wycats_> or: what can I read to learn them
[05:31:56] <SiegeLord> I'd maybe try reproducing the old tutorial and seeing if it still works
[05:32:02] <SiegeLord> I'm going to try something simple right now too
[05:32:17] <wycats_> :D
[05:32:21] <wycats_> thanks
[05:33:04] <wycats_> so you'd steer clear of things like zero.rs and rust-core? embedding the runtime should be a mostly-supportable thing?
[05:33:13] <wycats_> sorry for asking presumably dumb questions
[05:34:59] <mimcpher> wycats_: Zero.rs isn't needed at all
[05:35:37] <mimcpher> The compiler doesn't require them now if they're unused
[05:36:59] <mimcpher> wycats_: You're certainly welcome to use rust-core, but it's probably a little more unstable than the rest of rust (which isn't saying much)
[05:37:23] <dbaupp> wycats_: in theory it's posible to start the runtime yourself, using (iirc) std::rt::start
[05:38:01] <wycats_> dbaupp: but you'd have to link it in when compiling?
[05:38:22] <wycats_> I'm mostly still in the dark about the pure mechanics of getting everything to compile and be available to dlopen
[05:38:34] <wycats_> that tutorial looks like a good starting point, but old
[05:38:53] <mimcpher> wycats_: To be able to get this to start working, you're going to have to start reading source code probably
[05:39:14] <wycats_> mimcpher: I'm willing, if it's a plausible read and I have a sense of where to go look
[05:39:26] <dbaupp> wycats_: the runtime comes with libstd, so you don't have to do anything special to get it
[05:40:14] *** Joins: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP)
[05:40:52] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[05:43:15] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[05:43:36] <ChrisMorgan> SiegeLord: segmented stacks (and thus __morestack) are not a problem; the new runtime (the only one there is) never did have support for segmented stacks: the decision was that they weren't coming back rather than that they're being removed.
[05:43:47] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[05:44:05] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[05:44:42] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[05:44:44] <dbaupp> (__morestack is still hanging around though: it's current how we stop stackoverflows, __morestack just aborts.)
[05:48:20] <wycats_> so... where should I begin?
[05:48:47] <wycats_> if someone could start me off with a "hello world" dynamic library I'd be eternally grateful
[05:49:30] <mimcpher> Well you should start with getting dynamic loading of code not using the runtime working
[05:49:42] <SiegeLord> Mine currently crashes XD
[05:49:56] *** Quits: icarot (yaaic@moz-BBFD6490.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[05:52:19] <acrichto> wycats_: what kind of 'hello world' are you thinking about
[05:52:37] <acrichto> something which is loadable/runnable from something not rust?
[05:52:40] <wycats_> acrichto: even something simple like a nomangled, externed function that returns a string
[05:52:44] <wycats_> acrichto: right
[05:52:47] <wycats_> something like ^^
[05:52:52] <acrichto> when you say string, do you mean char* or &str ?
[05:52:58] <wycats_> which I can load from a separate C program
[05:52:59] <wycats_> char*
[05:53:23] <acrichto> so right now the biggest reason you can't just auto do that is because the requirement of __morestack (mentioned before)
[05:53:24] <wycats_> I'll take an int too
[05:53:41] <acrichto> what you'd want to do is to compile to LLVM and then compile the llvm with clang 
[05:53:58] <acrichto> something like 'rustc foo.rs --emit-llvm -S' clang foo.ll -c -o foo.o
[05:53:58] <wycats_> say more about the specifics :)
[05:54:01] <wycats_> nice
[05:54:16] <wycats_> that's what I was looking for
[05:54:27] <acrichto> what that does it it emits all the bitcode for foo.rs and then compiles it without the segmented stack headers
[05:54:33] <wycats_> would it be enough to get started to just make __morestack abort?
[05:54:49] <acrichto> __morestack looks at TLS information, which will likely just die very quickly if it's not set up
[05:54:52] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:55:03] <wycats_> acrichto: does it end up getting called in practice?
[05:55:05] <acrichto> it may "just work" by having the symbol defined, but I woudn't rely on that
[05:55:31] <acrichto> each OS thread has a TLS location which is user-defined that the rust runtime uses to inser the current stack limit into
[05:55:41] <acrichto> the prologue of each function will check this limit against the current stack pointer
[05:55:52] <acrichto> so this ends up getting called in practice whenever stack overflow isdetected
[05:56:14] <acrichto> although I think that OS threads by default have the value as 0, which is an "infinite stack", so it may just work to define __morestack as a no-op
[05:56:48] <acrichto> you may not be able to just define it as a function b/c I believe that the stack is misaligned upon entering __morestack, it doesn't follow any calling conventions
[05:57:46] <wycats_> if it never gets entered in practice it may not matter?
[05:58:15] <dbaupp> https://gist.github.com/huonw/24d1a5ac42030ad6c60a almost kinda works, fwiw. (except for the bit where I/O doesn't work, it runs fine.)
[05:58:34] <SiegeLord> Yeah, that's as far as I got too... IO didn't work
[05:58:34] <wycats_> why does IO end up not working?
[05:58:43] <wycats_> in March it was because of use of @
[05:58:48] <wycats_> but presumably that's gone now
[05:58:50] <wycats_> ?
[05:59:02] <dbaupp> it is
[05:59:04] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[05:59:22] <dbaupp> acrichto is likely the foremost expert on this atm.
[05:59:53] <wycats_> good news!
[05:59:56] <wycats_> acrichto is here
[05:59:57] <wycats_> :)
[06:00:18] *** Quits: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP) (Quit: glinscott)
[06:00:47] <acrichto> wycats_: what's the code that you want to run in rust?
[06:01:02] <acrichto> or hm, let me whip up an example
[06:01:05] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[06:01:13] <SiegeLord> acrichto: dbaupp posted an example
[06:01:37] <wycats_> acrichto: the first attempt is going to be a primitive protobuf compiler for a specific protobuf definition that writes to HTTP
[06:01:44] <wycats_> I'm willing to do hacked up HTTP
[06:01:49] <wycats_> (writing directly to the socket)
[06:02:04] <wycats_> I'm planning on porting a couple-hundred line Ruby protobuf library
[06:02:09] <wycats_> that part should be easy
[06:02:13] <dbaupp> acrichto: https://gist.github.com/huonw/24d1a5ac42030ad6c60a for the lazy :P
[06:02:26] <wycats_> (but as you can see, I need IO)
[06:02:53] <wycats_> https://github.com/protobuf-ruby/beefcake/blob/master/lib/beefcake/buffer/encode.rb#L16-L116
[06:02:56] <wycats_> pretty simple stuff
[06:03:29] <acrichto> if you need I/O, right now you  have to bring in libstd/librustuv
[06:03:50] <mimcpher> Or IO through the FFI, of course.
[06:03:51] <wycats_> acrichto: yep
[06:04:03] <mimcpher> I tend to just use C io instead of the rust stuff...
[06:04:04] <wycats_> I'd rather use Rust's IO
[06:04:13] <wycats_> heh
[06:04:19] <wycats_> maybe I shouldn't ;)
[06:04:25] <wycats_> I don't mind embedding
[06:04:33] <wycats_> embedding the stdlib and librustev
[06:04:36] <wycats_> librustuv
[06:04:43] <mimcpher> Well, I know the C calls like the back of my hand; rust stuff keeps changing ;)
[06:04:49] <wycats_> I don't know C as well
[06:05:07] <wycats_> ;)
[06:05:08] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: ZQ)
[06:05:33] <wycats_> in particular, I'm using Rust to try to get some guarantees around segfaults ;)
[06:05:38] <dbaupp> mimcpher: we've even got variadic ffi, so you can go all the way and use straight printf :P
[06:05:40] <wycats_> and if I wrote it in C I'd probably screw myself
[06:06:06] <acrichto> wycats_: right now the story for intermingling C/rust isn't the best when you're starting from C
[06:06:08] <sam113101> can someone remind me why I had to download llvm?
[06:06:14] <acrichto> going from rust to C is a much nicer story right now
[06:06:26] <acrichto> sam113101: we have our own patches in LLVM which are not upstreamed which we need to run
[06:07:02] <dbaupp> sam113101: (more basically, rust uses LLVM as the optimisation/codegen backend.)
[06:07:02] <sam113101> does the rust compiler use llvm has its backend?
[06:07:12] <dbaupp> yes
[06:07:46] <sam113101> dbaupp: how can I see the intermediate representation?
[06:08:04] <wycats_> acrichto: what do I need to add to dbaupp's gist to pull in libstd and librustuv?
[06:08:34] <dbaupp> wycats_: libstd is being pulled in already (std::rt::start working indicates that)
[06:08:46] <dbaupp> sam113101: `rustc --emit-llvm -S`
[06:08:56] <wycats_> dbaupp: ah yes
[06:10:22] <acrichto> hm, I'm getting some interesting things with dynamic loading on osx
[06:10:51] <dbaupp> acrichto: "interesting"?
[06:11:02] <sam113101> dbaupp: thanks
[06:11:02] <acrichto> oh just needed some rpath stuff on osx
[06:11:19] <wycats_> OSX's dynamic loading stuff is eccentric
[06:11:29] <wycats_> it's kind of nice though once you learn it
[06:12:16] <acrichto> wycats_ dbaupp: hm I don't think you can pull in rustuv as an I/O backend, right now that relies on having the CrateMap set up
[06:12:26] <acrichto> crate maps are only generated for executables, not libraries
[06:12:30] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[06:12:34] <Heather> hey
[06:12:40] <Heather> is there something alike isAny
[06:13:23] <mimcpher> Heather: Sorry, not familiar with what that is/should do?
[06:14:02] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[06:14:13] <dbaupp> acrichto: ah, of course.
[06:14:36] <Heather> mimcpher true if one of results satisfy filter condition, not sure how to explain
[06:14:59] <dbaupp> Heather: you mean http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.any ?
[06:15:18] <Heather> dbaupp yes, thanks
[06:15:48] <Heather> dbaupp in this example what type is a ?
[06:16:11] <Heather> dbaupp just was thinking that I must always use ~ or & for arrays )
[06:16:35] <acrichto> wycats_: https://gist.github.com/anonymous/7408714
[06:16:47] <acrichto> wycats_: that'll work on osx, it'll load the runtime all from C
[06:16:47] <mimcpher> Heather: Those are compile-time static arrays
[06:17:04] <dbaupp> Heather: it's the `A` from the definition of the iterator: `trait Iterator<A> { ... }`
[06:17:29] <wycats_> acrichto: interesting
[06:17:31] <mimcpher> You mean what is the type of `a` in let a = [1, 2, 3, 4, 5];?
[06:17:44] <dbaupp> oh
[06:17:48] <wycats_> how would I figure out the crate map on my own if I needed to?
[06:17:49] <dbaupp> acrichto: cool
[06:17:54] <acrichto> wycats_: the magical _rust_crate_map_toplevel symbol is needed to tell libstd where to find libuv
[06:18:43] <dbaupp> Heather: a is [int, ..5] (i.e. a fixed length array of 5 ints), but it automatically coerces to a &[int] when necessary
[06:18:58] <dbaupp> (e.g. the .iter() call is the same as if a was &[int].)
[06:19:17] <wycats_> so the factory() is basically just a simple wrapper around the libuv loop startup?
[06:19:20] *** Joins: Khmar (user@8D107082.DB3E3FE1.657EB0E6.IP)
[06:19:22] <acrichto> wycats_: that's also not really ideal, it would be kinda nice if you could bootstrap the runtime a little easier
[06:19:40] <acrichto> wycats_: factory() is just renaming rustuv::uvio::new_loop() under a known name
[06:19:45] <wycats_> acrichto: right
[06:20:06] <wycats_> because _rust_crate_map_toplevel expects a void *
[06:20:07] <acrichto> wycats_: but the runtime uses that to create new event loops, which in the uv case is the libuv-backed event loop 
[06:20:36] <acrichto> "void factory()" is completely the wrong signature
[06:20:37] <Heather> mimcpher dbaupp I see, thanks
[06:20:40] <acrichto> but it ets the job done
[06:20:59] <wycats_> O_o
[06:20:59] <wycats_> ;)
[06:21:19] <wycats_> what is _rust_crate_map_toplevel in normal code
[06:21:45] <acrichto> it's generated by the compiler and placed into all normal rust executables
[06:21:53] <wycats_> what does it normally look like?
[06:21:54] <acrichto> the crate map is mainly used for initializing logging
[06:22:08] <wycats_> and IO?
[06:22:09] <acrichto> wycats_: https://github.com/mozilla/rust/blob/master/src/libstd/rt/crate_map.rs#L29
[06:22:21] <acrichto> recently I added the event_loop_factory field to it
[06:22:25] <acrichto> in order to make I/O pluggable
[06:23:01] <wycats_> ah
[06:23:06] <wycats_> and thus you were able to use it
[06:23:14] <wycats_> so our entries and children are empty
[06:23:43] <acrichto> yeah entries is a list of modules in the current crate, and children is an array pointing to all linked crates
[06:23:58] <acrichto> that's all used when initializing logging, but if you're starting from C you won't have that ability
[06:24:12] <wycats_> will that cause issues?
[06:24:42] <acrichto> all logging will just be turned off by default
[06:25:05] <dbaupp> acrichto: should https://gist.github.com/huonw/de691424417d72518ab5 work? (essentally the same, except loading factory dynamically)
[06:25:21] <wycats_> acrichto: will that suppress important error information?
[06:25:48] <acrichto> dbaupp: does that not work? I'd expect it to
[06:26:08] <acrichto> wycats_: maybe, we don't really use error! logging that much, but in theory that would all be suppressed when it shouldn't be
[06:26:08] <wycats_> is there a reason to prefer that?
[06:26:09] <dbaupp> hm, `dlsym(factory)` is returning null 
[06:26:19] * dbaupp investigates
[06:26:38] <acrichto> wycats_: why we don't use error! that much?
[06:26:49] <wycats_> no, a reason to prefer dbaupp's version
[06:27:02] <pseudoku> for owned ptrs, is the point where destructor is invoked determined statically or like auto_ptrs in c++, the destructor has to check for null value in the destructor?
[06:27:05] <wycats_> acrichto: I guess I can hope that you don't start using it ;)
[06:27:33] <acrichto> wycats_: using dlsym explicitly works essentially the same as using the dynamic linker implicitly
[06:27:39] <acrichto> at least I think...
[06:27:44] <acrichto> one has a lot more magic than the other lol
[06:27:59] <wycats_> confirm
[06:28:21] <wycats_> there's plenty of magic here already
[06:28:28] <wycats_> but we don't need to get gratuitous ;)
[06:28:39] <Heather> Is there something New / interesting to discover about rust, maybe I miss something
[06:28:51] <dbaupp> ah, oops, forgot to update the library I'm loading, since the hash changed
[06:30:04] <dbaupp> hm, nope, still failing (but the factory is definitely non-NULL now)
[06:30:55] <Heather> dbaupp also is there .contains() ?
[06:31:32] <dbaupp> Heather: is it listed on Iterator?
[06:32:35] *** Quits: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[06:33:01] <Heather> dbaupp here? http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html no
[06:33:09] <wycats_> I'll be messing around with this tomorrow... I have something like 2 days of work time to prove something out
[06:33:15] <acrichto> dbaupp: hm, where's that dying at?
[06:33:27] <wycats_> worst case, I learn something and revisit in a few months
[06:34:04] <Heather> so no .contains?
[06:35:00] <Heather> e.g. I can write C.iter().any( |c| *c == x) but I would like to C.iter().contains( x)
[06:35:52] <mimcpher> Is TTL exposed in the rust udp bindings anywhere?
[06:36:09] <mimcpher> I see it in the ll stuff, but not in io::net::udp
[06:36:10] <acrichto> mimcpher: yes
[06:36:23] <acrichto> time_to_live/multicast_time_to_live
[06:36:23] <dbaupp> acrichto: same error: failing with "I/O not available"
[06:36:47] <dbaupp> acrichto: from the same place too, std::rt::io::stdio::src
[06:36:47] <Heather> may I add contains Iterator function? :)
[06:36:55] <acrichto> dbaupp: hm it may be because you didn't link 'dynlib' so dynlib never learns about your crate map
[06:37:04] <mimcpher> acrichto: heh, I missed it because it wasn't "ttl"
[06:37:39] <dbaupp> acrichto: ah, how am I to fix this?
[06:37:56] <acrichto> dbaupp: I think that you have to link to dynlib via gcc 
[06:38:16] <dbaupp> acrichto: i.e. no dynamic linking with dlsym?
[06:38:28] <acrichto> mimcpher: hm it appears that there aren't nice bindings for it though
[06:38:30] <wycats_> I'm compiling rust master... wheee
[06:38:56] <acrichto> dbaupp: yeah I guess it just doesn't work like that, _rust_crate_map_toplevel is a weak symbol, so if you load the library via dlsym I geuss there's some different machinery that doesn't ever see your version of it
[06:39:08] <mimcpher> I'm already using the FFI to read network traffic, may as well use it to send too :P
[06:39:09] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[06:39:13] <acrichto> mimcpher: one of the next thigns I want to do is to scrutinize our net bindings and improve them beyond demo-status
[06:40:12] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[06:40:19] <pcwalton> pseudoku: it's the latter, but we want to change it to the former
[06:40:23] <pcwalton> I think nmatsakis is working on it
[06:40:44] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Quit: Konversation terminated!)
[06:40:49] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[06:41:53] <wycats_> acrichto: :shipit:
[06:42:23] <pseudoku> pcwalton: i'm finding it difficult to use ~ptrs with stack closures when i chain results and options...is there a way around this that does not involve using Cell?
[06:42:43] <pcwalton> pseudoku: what stack closures?
[06:42:53] <pcwalton> we're generally trying to move away from using stack closures for this reason
[06:42:58] <pseudoku> || {...}
[06:43:04] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:43:07] <pcwalton> which higher order functions are you using them with
[06:43:14] <pcwalton> we're trying to move away from stack closures when RAII will work
[06:43:21] <pseudoku> result::and_then and map
[06:43:39] <pcwalton> oh yeah, there's no real solution for that
[06:44:07] <pcwalton> the solution would be &once fn, I guess
[06:44:55] <acrichto> pcwalton: I'd still be a fan of having &proc and ~proc, but specifying a sigil seems like a real pain
[06:45:10] <acrichto> it's unfortunate that you can't have a once stack closure
[06:46:01] <pseudoku> pcwalton: once fn's are behind feature gate, will they be removed?
[06:46:19] <pcwalton> acrichto: yeah, I'm still holding out hope that we won't need them
[06:46:33] <pcwalton> but maybe option.map and result.map will prove that they're necessary :(
[06:48:16] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[06:48:52] <pseudoku> pcwalton: yeah, also the most preferred way to handle errors currently  is result/option
[06:49:15] <pcwalton> well, you can match on them
[06:49:16] <pcwalton> to avoid that
[06:53:15] <pseudoku> but chaining them is quite ugly, unless macros are used
[06:55:51] <nlminhtl> Does rust have smth like an initialization list in C++?
[06:56:55] <acrichto> pcwalton: btw ~fn() is gone from rustuv now
[06:57:45] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[06:57:53] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[06:58:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[06:58:22] <SiegeLord> nlminhtl: Is that very different from an array literal in Rust?
[06:59:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[06:59:56] *** Joins: fabiand (fabiand@moz-9073C82F.adsl.alicedsl.de)
[07:00:55] *** Joins: eddyb9 (eddy@F488D4E6.124F9E.4A6B528C.IP)
[07:02:25] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[07:02:30] <Heather> how to compare type A
[07:02:39] <eddyb9> with?
[07:02:54] <Heather> with type A...
[07:03:05] <joelteon> true
[07:03:05] <Heather> error: binary operation == cannot be app lied to type `A`
[07:03:27] <Heather> joelteon I mean variable with type A
[07:03:34] <o11c> Heather: did you impl Eq?
[07:03:41] <eddyb9> Heather: implement Eq
[07:03:55] <nlminhtl> SiegeLord: I whant to do something like this one https://gist.github.com/Ignotus/4fd39c8dec7dc27142d4
[07:03:57] <Heather> o11c isn't it already implemented?
[07:04:23] <eddyb9> Heather: did you add #[deriving(Eq)] to A?
[07:04:39] <eddyb9> otherwise, you have to impl Eq for A yourself
[07:04:42] <Heather> eddyb9 ...type a is in std lib
[07:04:50] <nlminhtl> SiegeLord: s/whant/want/g
[07:04:52] <eddyb9> Heather: name it, then
[07:04:59] <Heather> eddyb A
[07:05:21] <eddyb9> there's a type "A" in std? that sounds wrong
[07:05:33] <SiegeLord> nlminhtl: No, that can't be done
[07:05:53] <Heather> eddyb9 well I think everything with no type is type A there
[07:06:15] <eddyb9> Heather: oooh, it's a generic type parameter?
[07:06:16] <Heather> eddyb I can't find myself where from it comes
[07:06:24] <nlminhtl> SiegeLord: so I must tell which class my structure is, mustn't I?
[07:06:30] <eddyb9> that's an entirely different thing
[07:06:54] <Heather> eddyb9 I don't pass it anyhow and it doesn't included ... I just say x: A and it recognize it as known type...
[07:07:18] <Heather> or x: &A
[07:07:24] <eddyb9> Heather: you need to give us more context
[07:07:39] <eddyb9> A has to be defined, it's most likely a generic type param
[07:07:41] <dbaupp> Heather: do you have `fn foo<A>(x: A)` ?
[07:07:48] *** Quits: ercxx (ercan@moz-8383857F.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[07:07:49] <Heather> dbaupp no
[07:08:12] <Heather> dbaupp eddyb9 I start from here https://github.com/mozilla/rust/blob/master/src/libstd/iter.rs#L581
[07:08:12] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[07:08:24] <eddyb9> you can use <A: Eq>, if it's compatible with what you have there, to ensure A can be compared
[07:08:25] <Heather> I see how works any and I want contains
[07:08:30] <SiegeLord> nlminhtl: Yes. Or do something like [(rng.gen(), rng.gen()), ...]
[07:08:32] <eddyb9> iterators are generic
[07:08:34] <Heather> so I want compare A with another A ...
[07:08:57] <eddyb9> Heather: look for A in type params
[07:08:58] <dbaupp> Heather: you ahve to do something like https://github.com/mozilla/rust/blob/master/src/libstd/iter.rs#L883
[07:09:07] <dbaupp> Heather: with a new trait
[07:09:11] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[07:09:36] <eddyb9> most likely, if Iterator itself doesn't require Eq, that'd be backwards incompatible
[07:09:37] <Heather> dbaupp it's min and max for A
[07:09:43] <Heather> dbaupp but there is no Eq for A ?
[07:09:51] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[07:10:00] <eddyb9> Heather: Eq is not required for A
[07:10:10] <dbaupp> Heather: you need a new trait, that acts like that one.
[07:10:18] <Heather> eddyb9 how then I implement contains function ?
[07:10:21] <dbaupp> Heather: i.e. that is just an example of what is necessary
[07:10:40] <eddyb9> don't they have some/every already?
[07:10:59] <Heather> eddyb9 who?
[07:11:03] <dbaupp> Heather: however, strcat has expressed his desire to not have contains unless absolutely necessary, so I' don't think it should be added to std::iter yet (at least, not without talking to him)
[07:11:14] <eddyb9> Heather: iterators
[07:11:21] <eddyb9> contains is trivial using some
[07:11:33] <Heather> dbaupp so it's by design thing
[07:11:38] <dbaupp> eddyb9: (it's called .any)
[07:11:42] <eddyb9> .some(|&a| a == b) or something like that
[07:11:58] <Heather> yes I do it with any
[07:12:01] <eddyb9> dbaupp: riiight. need to get used to different names :P
[07:12:09] <Heather> but most of nowday languages also can do contains
[07:12:22] <dbaupp> Heather: yes, but you can do the same thing in your own code add a trait like OrdIterator (except call it something like EqIterator) with the .contains method
[07:12:36] <dbaupp> s/code add/code. add/
[07:12:44] <Heather> dbaupp like implement second tier std?
[07:13:10] <dbaupp> Heather: kinda, but you only want it for contains, right? so you just need to do one extra trait.
[07:13:15] <Heather> usually I don't like to do it on languages which changes everyday )
[07:13:29] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:13:49] <dbaupp> then why are you using Rust :P
[07:14:01] <eddyb9> dbaupp: can't we have EqIterator in std?
[07:14:18] <Heather> dbaupp I'm not really using, I'm discovering it
[07:14:28] <eddyb9> .index_of would be interesting
[07:14:44] <Heather> but there is filter_map :D
[07:14:44] <dbaupp> eddyb9: .index_of == .find
[07:14:54] <dbaupp> (iirc.)
[07:14:58] <eddyb9> dbaupp: where is that defined?
[07:15:05] <dbaupp> eddyb9: on iterator
[07:15:07] <eddyb9> but I guess find takes a function
[07:15:15] <dbaupp> eddyb9: oh, it takes a closure, yeah
[07:15:34] <eddyb9> find_val and any_val, maybe :P
[07:15:49] <eddyb9> or _eq, I don't know
[07:15:49] <dbaupp> eddyb9: "can't we have EqIterator in std" == ask strcat
[07:15:57] <Heather> most of everything there takes closure
[07:16:17] <eddyb9> stack closures can get inlined, so it's not a perf issue
[07:16:39] <eddyb9> heck, I'd implement those convinience methods with closures :))
[07:17:02] <eddyb9> dbaupp: I might. I also need to figure how to get this allocator thing right
[07:17:51] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[07:17:51] *** ChanServ sets mode: +ao dherman dherman
[07:18:03] <eddyb9> I don't like implementing libc methods calling to rust, that are called from rust
[07:18:57] <eddyb9> yay, this class is over, be back later
[07:19:18] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[07:21:04] *** Quits: eddyb9 (eddy@F488D4E6.124F9E.4A6B528C.IP) (Quit: Leaving)
[07:24:50] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[07:25:10] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[07:25:16] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[07:25:34] *** Joins: brendan (brendaneic@45A3491F.A5FB4ABA.FE58E87C.IP)
[07:25:36] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[07:26:52] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[07:26:58] *** Quits: brendan (brendaneic@45A3491F.A5FB4ABA.FE58E87C.IP) (Quit: brendan)
[07:27:28] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[07:31:30] *** Quits: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP) (Quit: )
[07:33:17] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[07:35:52] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[07:37:18] *** Quits: gem (nandaja@325F5789.1EF6344.9D59D0D8.IP) (Ping timeout)
[07:38:22] *** Joins: alonlevy (alon@C9EC0EF.66334A3F.AB64B967.IP)
[07:39:32] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[07:40:19] *** Joins: gem (nandaja@89711993.3AD3B125.9D59D0D8.IP)
[07:42:49] *** Quits: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au) (Quit: z0w0)
[07:44:51] *** Joins: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au)
[07:52:05] *** Joins: ofeldt (ofeldt@moz-1FA8F819.dip0.t-ipconnect.de)
[07:52:25] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:52:38] *** Joins: Ms2ger (Ms2ger@45E56866.3CF91143.187A1082.IP)
[07:53:06] *** Quits: ofeldt- (ofeldt@moz-4939E0DC.dip0.t-ipconnect.de) (Ping timeout)
[07:55:05] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[07:56:51] *** Quits: gem (nandaja@89711993.3AD3B125.9D59D0D8.IP) (Ping timeout)
[07:57:13] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:57:41] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[07:58:27] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[08:00:14] *** Joins: jdavis (jdavis@moz-1BE8A6A1.hsd1.ca.comcast.net)
[08:01:15] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[08:02:49] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:02:56] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[08:03:58] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:04:21] *** Joins: nkoep (nik@moz-F367B720.pool.mediaways.net)
[08:05:39] <nlminhtl> does rust support anonymous modules? :)
[08:06:28] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[08:07:18] *** Quits: alonlevy (alon@C9EC0EF.66334A3F.AB64B967.IP) (Ping timeout)
[08:07:28] *** pmoore|away is now known as pmoore
[08:08:31] <kimundi> nlminhtl: How would that work?
[08:10:26] <nlminhtl> kimundi: like modules but without a name
[08:11:02] <nlminhtl> kimundi: so I can access to its contents only from its source file
[08:11:12] <kimundi> nlminhtl: Right, but how would you use thta? Where would you need them?
[08:11:51] <kimundi> source files are irrelevant for rusts module system, and isn'tthat what private modules are for?
[08:12:26] <nlminhtl> kimundi: ah, I see, thanks :)
[08:14:18] *** Joins: gem (nandaja@F5171FFE.E8FD8308.B84D4DA2.IP)
[08:14:44] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:17:08] *** Quits: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP) (Quit: pcwalton)
[08:17:42] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:18:04] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[08:20:50] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:21:08] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[08:21:29] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[08:23:00] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:24:39] *** Joins: lenstr (lenstr@8E611ABB.66633156.B69CD7C4.IP)
[08:26:02] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Ping timeout)
[08:26:49] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:28:36] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[08:29:51] *** Quits: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP) (Quit: victorporof)
[08:30:40] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[08:31:53] *** Joins: Ferreus (ferreus@moz-77B684FB.dip0.t-ipconnect.de)
[08:34:04] *** Quits: lenstr (lenstr@8E611ABB.66633156.B69CD7C4.IP) (Ping timeout)
[08:39:41] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[08:41:21] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[08:42:20] *** Joins: lenstr (lenstr@8E611ABB.66633156.B69CD7C4.IP)
[08:47:50] *** pmoore is now known as pmoore|away
[08:50:10] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Ping timeout)
[08:50:29] *** Quits: gem (nandaja@F5171FFE.E8FD8308.B84D4DA2.IP) (Quit: Leaving)
[08:56:04] *** Joins: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net)
[08:56:54] *** pmoore|away is now known as pmoore
[08:57:29] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:58:01] *** flaper87|afk is now known as flaper87
[08:59:01] *** Quits: lenstr (lenstr@8E611ABB.66633156.B69CD7C4.IP) (Ping timeout)
[09:01:18] *** Joins: mib_ttjhrm (Mibbit@moz-4DBD374F.hinet-ip.hinet.net)
[09:02:10] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:02:10] *** ChanServ sets mode: +o pnkfelix
[09:02:26] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Client exited)
[09:03:01] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[09:03:26] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Ping timeout)
[09:03:34] *** Quits: mib_ttjhrm (Mibbit@moz-4DBD374F.hinet-ip.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:03:41] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[09:04:02] *** Quits: JanC (janc@moz-E50FB37E.dsl.scarlet.be) (Ping timeout)
[09:04:24] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:04:24] *** ChanServ sets mode: +o pnkfelix
[09:04:34] *** Joins: JanC (janc@moz-E50FB37E.dsl.scarlet.be)
[09:05:56] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[09:13:26] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Ping timeout)
[09:14:44] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[09:17:33] <tikue> did the enum stuff ever land that lets you create a variant from a uint
[09:17:52] <kimundi> ToPrimitve and FromPrimitive landed, yeah
[09:17:53] <cmr> tikue: yes
[09:18:17] <kimundi> No idea if the syntax extension landed too
[09:20:31] <tikue> cmr: do you know how to use it?
[09:21:25] <tikue> like let's say i have enum Foo { Bar, Baz } and want to construct from 0 and 1, how would I do that?
[09:21:39] *** Joins: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP)
[09:21:39] *** ChanServ sets mode: +ao dherman dherman
[09:21:48] *** Joins: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP)
[09:21:48] *** ChanServ sets mode: +o jdm
[09:21:48] <cmr> tikue: slap a #[deriving(FromPrimitive)] on it.
[09:22:15] *** Quits: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP) (Quit: dherman)
[09:22:21] <tikue> cmr: then what? Foo::from_primitive(0) ?
[09:22:42] <cmr> tikue: FromPrimitive::from_uint(0) etc
[09:22:44] <cmr> http://static.rust-lang.org/doc/master/std/num/trait.FromPrimitive.html
[09:22:51] <tikue> thanks
[09:24:36] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[09:28:00] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[09:31:41] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[09:35:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:36:34] <tikue> if I just want to read an int from stdin, what's the easiest way to do that?
[09:37:10] <tikue> std::rt::io::stdio::stdin() ?
[09:38:18] <cmr> tikue: yeah, BufferedReader::new(stdin()) and then call from_str(stdin.read_line)
[09:38:34] <tikue> ah, great, thanks cmr
[09:39:21] *** Quits: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP) (Ping timeout)
[09:41:01] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:41:07] *** Joins: sigma (sigma@moz-3F4E2473.range86-184.btcentralplus.com)
[09:41:46] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[09:42:05] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[09:42:19] *** Joins: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP)
[09:43:11] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:45:54] <bjz> is there an example of where you'd use a $foo:tt?
[09:46:39] <kimundi> I guess anywhere where you'd just want to pass token trees along to another macro invocation
[09:46:53] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:47:17] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[09:49:29] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Ping timeout)
[09:49:48] <bjz> I want to do something like: macro_rules! wrap_in_mod(($name:ident, $($anything:tt)*) => (pub mod $name { $($anything)* }) wrap_in_mod!(foo, pub struct A<T>; #[cfg(thing)] impl<T> A<T> { ... }) let _ = foo::A::<int>;
[09:50:12] <bjz> that's not the use case, but it's a simplified version
[09:50:44] <bjz> kimundi: oh ok, so it can only be passed to macros
[09:50:59] <kimundi> No idea if this would also work 
[09:51:05] <kimundi> Have you tried it?
[09:51:35] <bjz> yeah I did
[09:51:37] <dbaupp> bjz: yes it can only be passed to macros, but I don't think that's a fundamental restriction, just the parser needs to be updated to work with $tt's.
[09:51:38] <bjz> no dice
[09:51:58] <bjz> I tried $($anything:item)* too
[09:52:01] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[09:52:16] <bjz> dbaupp: ok
[09:52:47] <bjz> dbaupp: also, would it be possible to have a `lifetime` token type?
[09:52:59] <dbaupp> bjz: yes it would be possible
[09:53:03] <dbaupp> (file a bug, I guess)
[09:53:10] <bjz> sure
[09:53:22] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[09:53:46] <bjz> dbaupp: I'm guessing there are lots of things that don't have associated macro variable type thingies
[09:53:51] <dbaupp> yes
[09:54:19] <bjz> I noticed `attrib` (or something) the other day
[09:54:26] *** Quits: sigma (sigma@moz-3F4E2473.range86-184.btcentralplus.com) (Client exited)
[09:54:46] <dbaupp> attr, iirc.
[09:54:51] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[09:54:57] <dbaupp> niko added that for externfn!
[09:55:07] <bjz> heh
[09:55:50] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Quit: Leaving)
[09:55:54] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[09:56:03] <bjz> dbaupp: what would you call a 'macro item type thingy'
[09:56:05] <tikue> is there a way to use the rest of an iterator after zipping it with another iterator?
[09:56:10] <tikue> like, 
[09:56:40] *** Joins: sigma (sigma@moz-3F4E2473.range86-184.btcentralplus.com)
[09:56:44] <dbaupp> bjz: "fragement specifier" apparently
[09:56:54] <bjz> cheers
[09:56:59] <tikue> for _ in range(5) { for (_, i) in range(5).zip(twenty_five_things) { .. } }
[09:57:15] <tikue> i'd assume not since it takes it by value
[09:57:18] <dbaupp> tikue: call .by_ref() to have it passed by refence
[09:57:23] <tikue> ooh thanks dbaupp 
[09:57:32] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[09:57:40] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[09:57:54] <tikue> awesome :)
[09:58:14] <dbaupp> bjz: *fragment, obviously.
[09:58:21] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[09:58:24] <bjz> dbaupp: also, what is the proper name of a 'type parameter list' if you include the lifetimes
[09:59:01] <dbaupp> bjz: don't know
[09:59:09] <dbaupp> bjz: "type parameter list"
[09:59:11] * dbaupp shrugs
[09:59:12] <bjz> heh
[09:59:13] <bjz> :)
[10:00:08] <kimundi> "type and lifetime parameter list" :P
[10:01:44] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[10:04:45] <cmr> "parametricity"
[10:06:23] *** Quits: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP) (Quit: brendan)
[10:08:05] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[10:08:51] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[10:11:14] *** Quits: heftig (heftig@moz-CF590F53.dip0.t-ipconnect.de) (Quit: Quitting)
[10:12:02] <pnkfelix> I like "parametricity", but I suspect "generics" is going to be the more recognizable thing for some people.
[10:12:37] <pnkfelix> or rather, maybe "generic parameters".  Not sure.
[10:14:19] *** Joins: sweet_kid (Upasana@8E420BEB.D06DD960.4A5F0685.IP)
[10:14:44] *** Joins: sweet_kid_ (Upasana@C314BA97.99CE5461.1228A288.IP)
[10:14:55] <bjz> pnkfelix: "static parameters"?
[10:15:23] <bjz> pnkfelix: seeing as they are always given at compile time?
[10:16:05] *** Quits: sweet_kid (Upasana@8E420BEB.D06DD960.4A5F0685.IP) (Ping timeout)
[10:16:52] <pnkfelix> bjz: I dunno, that doesn't sound like something I would recognize if I were already familiar with other languages with parametric polymorphism.  (Java, C#, ML, Haskell…)
[10:17:05] <bjz> yeah
[10:17:11] <bjz> omniparams
[10:17:13] <bjz> :D
[10:17:53] <bjz> pnkfelix: I almost wish lifetimes occupied their own parameter list
[10:20:03] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[10:22:56] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[10:23:03] <kimundi> bjz: Psst... I don't think "intoperlated" is spelled right in issue 10415. ;)
[10:23:38] <dbaupp> kimundi: what are you talking about? :P
[10:23:40] <cmr> hahah
[10:24:24] * kimundi knows he is the last person to talk about spelling mistakes, but anyway...
[10:25:15] <bjz> ak
[10:25:31] * dbaupp is gud at speeling
[10:26:07] <bjz> wait
[10:26:22] <bjz> did somebody change it under me?
[10:26:32] *** Joins: joris (joris@moz-763F6A15.fbx.proxad.net)
[10:26:34] * kimundi points at dbaupp 
[10:26:36] <bjz> it's right!
[10:26:48] * bjz is excellent at spelling
[10:27:04] * bjz leaves it up to his minions to fix it for him
[10:27:16] <bjz> muahahaha
[10:27:20] * dbaupp is not a mere "minion"
[10:27:43] * bjz pats his little spelling minion on the head
[10:28:04] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[10:28:07] <kimundi> You realize that incompetent minions are the number 2 reasons for the downfall of any evil overload, right? ;)
[10:28:21] <Ms2ger> I wish we had overloads, even if they were evil
[10:28:26] <bjz> kimundi: oh, but my minions *are* competant
[10:29:05] <kimundi> Competent backstabbing minions are number 1
[10:29:24] <bjz> this is true
[10:29:31] * kimundi exchanges knowing looks with dbaupp 
[10:30:03] <bjz> kimundi: hobbits are #3?
[10:30:09] <benh> Ms2ger: ahaha
[10:30:55] <bjz> Ms2ger: oh, I think kimundi needs a spelling minion too
[10:31:02] <Ms2ger> bjz, no, no, they're taking the hobbits to Isengard
[10:31:15] <bjz> to Isengard?
[10:31:25] * kimundi slaps Ms2ger 
[10:31:28] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[10:31:29] *** Joins: sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[10:31:36] <bjz> x]
[10:32:18] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Ping timeout)
[10:32:22] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[10:34:32] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:39:18] *** Quits: sweet_kid_ (Upasana@C314BA97.99CE5461.1228A288.IP) (Quit: Leaving)
[10:40:22] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[10:42:42] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:43:09] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Ping timeout)
[10:44:03] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Ping timeout)
[10:44:04] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[10:44:07] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[10:44:37] *** Quits: ofeldt (ofeldt@moz-1FA8F819.dip0.t-ipconnect.de) (Ping timeout)
[10:46:17] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[10:46:30] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[10:48:57] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[10:56:19] *** Joins: ofeldt (ofeldt@moz-3FA92485.dip0.t-ipconnect.de)
[11:00:35] *** pmoore is now known as pmoore|lunch
[11:05:58] *** Joins: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP)
[11:05:58] *** ChanServ sets mode: +ao pcwalton pcwalton
[11:06:50] *** Quits: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP) (Quit: pcwalton)
[11:07:23] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[11:07:50] *** Joins: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP)
[11:07:50] *** ChanServ sets mode: +ao dherman dherman
[11:09:27] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[11:09:41] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:09:43] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[11:09:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:10:05] <strcat> rusti: 2
[11:10:06] -rusti- Bad system call
[11:10:06] -rusti- Bad system call
[11:10:06] -rusti- application terminated with error code 159
[11:10:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[11:11:20] <dbaupp> strcat: is that with acrichto's new IO stuff?
[11:11:29] <strcat> yes that's easily fixed
[11:11:43] <strcat> we'll see if it still deadlocks though
[11:12:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:12:29] <strcat> rusti: 2
[11:12:34] -rusti- timeout triggered!
[11:12:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[11:13:34] *** Quits: StarLight (StarLight@moz-3A24043E.pppoe.avangarddsl.ru) (Ping timeout)
[11:13:56] <dbaupp> I take it that's a yes
[11:15:08] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:16:10] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[11:16:40] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[11:17:03] *** Joins: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP)
[11:17:03] *** ChanServ sets mode: +o jdm
[11:17:53] *** Joins: StarLight (StarLight@moz-C4DC57FA.dynamic.avangarddsl.ru)
[11:18:46] *** Joins: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu)
[11:19:17] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Connection reset by peer)
[11:20:11] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[11:20:11] *** ChanServ sets mode: +ao brson brson
[11:20:24] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:21:12] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:22:04] <tikue> how do you turn on debug! ?
[11:22:17] <Ms2ger> RUST_LOG=<crate name>, I think
[11:22:27] <tikue> ah right, thanks!
[11:23:24] <Ms2ger> Np
[11:24:29] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[11:25:04] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[11:25:04] *** ChanServ sets mode: +ao brson brson
[11:26:20] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[11:29:34] *** Joins: Pac (textual@moz-F616DE87.revip2.asianet.co.th)
[11:31:23] *** Joins: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP)
[11:33:23] *** flaper87 is now known as flaper87|afk
[11:36:32] *** Quits: Pac (textual@moz-F616DE87.revip2.asianet.co.th) (Ping timeout)
[11:50:04] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:51:01] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[11:53:06] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[11:54:56] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[11:55:18] *** Joins: vmx (vmx@moz-4924F1CE.pools.arcor-ip.net)
[11:57:23] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Client exited)
[11:59:33] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[12:00:45] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[12:01:29] *** Quits: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP) (Ping timeout)
[12:01:31] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[12:04:42] *** Joins: eddyb9 (eddy@F488D4E6.124F9E.4A6B528C.IP)
[12:05:41] <eddyb9> I just amuzed myself with an idea:
[12:05:50] *** Joins: avsej (avsej@FDB692B0.F3CC8E63.5C5F5A39.IP)
[12:06:38] <eddyb9> do with_alloca_vec(n) |v: &[int]| {...}
[12:06:47] *** Joins: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP)
[12:07:20] <eddyb9> you can even abuse recursion to do this without any "unsafe" code
[12:07:30] <cmr> eddyb9: Why do you need the closure?
[12:08:33] <cmr> let v: &[int] = alloca(n); would work fine
[12:08:40] <cmr> Ehhh actually no it wouldn't
[12:08:45] <cmr> It wouldn't run destructors
[12:09:01] <cmr> eddyb9: you would need unsafe code.
[12:09:12] <cmr> to run the destructor.
[12:09:14] <cmr> (s)
[12:09:18] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[12:09:26] *** Quits: eddyb9 (eddy@F488D4E6.124F9E.4A6B528C.IP) (Ping timeout)
[12:09:59] <brson> eddyb: that's a neat idea, yeah. how would you do it without unsafe?
[12:11:49] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[12:11:55] <brson> ... and without assembly even
[12:12:11] <cmr> brson: wouldn't need asm, llvm has an alloca instruction
[12:12:57] <brson> llvm's morestack code would need to be modified to work with dynamically sized stack frames
[12:13:06] <cmr> oh, yeah, probably.
[12:13:37] <dbaupp> are we going to continue to use morestack after getting rid of segmented stacks (long term)?
[12:13:44] *** Quits: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP) (Ping timeout)
[12:13:44] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[12:14:15] <brson> it's not clear yet
[12:14:23] <brson> definitely for the immediate future
[12:14:33] *** Quits: Khmar (user@8D107082.DB3E3FE1.657EB0E6.IP) (Ping timeout)
[12:15:01] <brson> there are benifits to getting rid of the function prologue completely, though it causes complexity elsewhere, and closes off one possible solution for task preemption
[12:15:21] <brson> *morestack prologue
[12:15:43] <cmr> brson: complexity where?
[12:16:05] <brson> signal handling
[12:16:58] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[12:17:32] *** Joins: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP)
[12:17:32] *** ChanServ sets mode: +o jdm
[12:19:58] <Ms2ger> Are we getting rid of segmented stacks?
[12:20:06] <cmr> Ms2ger: yes
[12:20:10] <cmr> kinda
[12:20:14] <cmr> they're already gone
[12:20:32] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[12:21:52] *** Quits: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP) (Ping timeout)
[12:22:08] <cmr> fehhh
[12:22:13] <dbaupp> (they were never here, with the new runtime)
[12:23:16] *** Quits: avsej (avsej@FDB692B0.F3CC8E63.5C5F5A39.IP) (Ping timeout)
[12:23:19] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[12:27:26] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[12:30:46] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Ping timeout)
[12:30:57] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:32:48] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:35:16] *** Joins: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com)
[12:37:09] *** Joins: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net)
[12:38:28] *** Joins: kirneh (kirneh@moz-ACBB9422.k955.webspeed.dk)
[12:40:23] *** Joins: avsej (avsej@825136E6.BD1E5C28.5C5F5A39.IP)
[12:41:09] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[12:41:23] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[12:42:38] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[12:43:26] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[12:44:25] *** Joins: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP)
[12:45:22] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[12:45:33] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[12:46:22] *** jorendorff_away is now known as jorendorff
[12:46:26] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[12:47:13] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[12:47:31] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[12:47:34] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[12:52:42] <eddyb> cmr: sorry, phone died
[12:53:02] <eddyb> brson: I was under the impression it would be possible with just recursion - lists are trivial that way, though
[12:53:51] *** Joins: axitkhurana (Adium@8EA4E31C.884A7E32.6AA50C35.IP)
[12:54:13] *** Quits: axitkhurana (Adium@8EA4E31C.884A7E32.6AA50C35.IP) (Quit: Leaving.)
[12:54:18] <strcat> brson: __morestack also doesn't really provide safety as long as we heavily use FFI
[12:54:24] <strcat> fn foo() { let x = ~5; foo() }
[12:54:36] <strcat> it will be calling free/malloc precariously close to the stack boundary
[12:54:38] *** pmoore|lunch is now known as pmoore
[12:54:50] <strcat> assuming we remove fixed_stack_segment, we *need* guard pages...
[12:55:01] <strcat> and __morestack has basically no use anymore afaict
[12:55:19] <strcat> (I'd expect that function to overflow the stack, for sure)
[12:55:28] <eddyb> cmr: [0u8, ..n] should be possible, but it requires language support
[12:55:47] <cmr> eddyb: with the primitives it's fine, but any type with a destructor requires unsafe code.
[12:57:15] *** flaper87|afk is now known as flaper87
[12:57:24] <eddyb> oh, right, the way alloca works is compatible with Rust functions
[12:58:10] <brson> strcat: it seems like we'll need to have a fairly big red zone at the end of the stack just to handle the needs of the standard library, like malloc/free
[12:58:31] <brson> i wonder how big our red zone is now
[12:58:31] <eddyb> can we have inline LLVM assembly? although I don't think it's standardized (like, available in clang)
[12:58:35] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[12:58:40] <strcat> brson: or just C functions doing as much work as rust functions (LLVM?)
[12:59:02] <cmr> eddyb: there was a PR for inline IR at one point
[12:59:04] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[12:59:05] <cmr> not sure if it went through
[12:59:13] <brson> strcat: i don't understand what you mean by that
[12:59:31] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[12:59:34] <eddyb> dbaupp: what was it I was supposed to ask strcat about?
[12:59:43] <brson> red zone is 20k right now
[12:59:48] <brson> that's enough for malloc/free
[12:59:57] <strcat> brson: 20k isn't enough for arbitrary C functions though
[13:00:03] <brson> no it isn't
[13:00:38] <strcat> brson: so, any infinitely recursive function with a prominent FFI call will probably overflow the stack rather than aborting (or both)
[13:00:57] <eddyb> strcat: from what I understand, there's an OrdIterator in std, but not an EqIterator, are there any plans/decisions for it (or against it)?
[13:01:01] <brson> strcat: i'm not disputing that
[13:01:46] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[13:02:05] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[13:08:59] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Quit: Leaving)
[13:09:02] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[13:09:08] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[13:10:36] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Quit: Computer has gone to sleep.)
[13:11:15] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[13:11:39] <ChrisMorgan> OK, let's build this new Rust and (hopefully!) watch rust-http take a conclusive lead over both Node and Go... :-)
[13:13:18] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[13:13:38] *** Quits: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP) (Ping timeout)
[13:14:34] *** Joins: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP)
[13:15:29] <Amaranth> Ooh
[13:16:08] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Quit: Viivan loppu.)
[13:16:20] *** Quits: jvshahid (jvshahid@18CB298B.889FDC10.4EA770CF.IP) (Ping timeout)
[13:22:03] *** Quits: Kingsley (kingsley@BBD66DE2.61F456DA.3655BBF5.IP) (Quit: Leaving.)
[13:22:59] <ChrisMorgan> I'm still waiting for a decent request concurrency speedup (~2× for 2 cores rather than ~1.1–1.3×), but this 60% raw I/O perf increase is certainly a good start :-)
[13:22:59] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[13:23:09] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[13:25:18] <strcat> ChrisMorgan: I'm curious what spawning a thread per request on linux looks like, in comparison
[13:26:08] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[13:27:36] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[13:27:41] * strcat finds google's plan to add cooperatively scheduled pthreads quite interesting
[13:28:37] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[13:30:17] <ChrisMorgan> strcat: you mean spawn request tasks with the SingleThreaded scheduler mode?
[13:30:20] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[13:30:41] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[13:34:03] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[13:35:16] <strcat> ChrisMorgan: no, I mean pthreads directly
[13:35:23] <strcat> and blocking I/O
[13:35:54] <ChrisMorgan> Ah, yes. Give me an interface whereby I can conveniently spawn such things and use blocking I/O and I'll try it!
[13:36:56] <strcat> ChrisMorgan: https://github.com/thestinger/rust-core/blob/master/test/thread.rs ;p, don't have bindings for I/O though
[13:37:13] <ChrisMorgan> strcat: just as well I specified both, isn't it :D
[13:38:31] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[13:38:59] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[13:40:48] * ChrisMorgan wishes he had more time for everything
[13:41:33] *** jorendorff is now known as jorendorff_away
[13:41:36] *** Quits: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[13:42:55] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[13:43:34] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[13:43:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:43:40] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:46:35] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[13:47:08] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[13:49:21] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[13:50:04] *** jorendorff_away is now known as jorendorff
[13:50:14] *** Joins: amro_ (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[13:50:42] *** Quits: amro_ (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[13:54:25] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[13:54:27] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[13:54:32] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[13:54:53] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:56:22] *** Quits: pseudoku (quassel@F68BFC88.6785D218.520CDC98.IP) (Ping timeout)
[13:56:33] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[13:56:44] *** bhearsum is now known as bhearsum|buildduty
[13:58:20] *** Joins: pseudoku (quassel@646DB683.AE78DE90.520CDC98.IP)
[14:03:06] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[14:03:12] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[14:03:18] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[14:03:29] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[14:05:13] <mletterle> Well met rustlandia.
[14:05:49] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:05:52] *** jorendorff is now known as jorendorff_away
[14:10:02] *** Joins: alonlevy (alon@moz-74377C14.bb.netvision.net.il)
[14:10:12] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:16:13] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[14:16:25] <ChrisMorgan> Oh yeah, time to go to bed. Thanks for the reminder, mletterle.
[14:19:47] *** jorendorff_away is now known as jorendorff
[14:19:57] *** Parts: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au) ()
[14:21:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:25:38] *** Joins: Blub\w (wry@moz-7B2008F1.wireless.dyn.drei.com)
[14:26:21] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[14:27:07] *** Parts: Mindless` (mindless@moz-9C38D3B4.net) ()
[14:27:57] *** Joins: Mindless` (mindless@moz-9C38D3B4.net)
[14:28:27] *** Quits: Thiez (thiez@moz-BF669398.student.utwente.nl) (Ping timeout)
[14:28:36] *** Joins: Thiez (thiez@moz-BF669398.student.utwente.nl)
[14:29:02] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[14:29:47] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[14:32:22] *** kimundi is now known as zz_kimundi
[14:37:33] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:37:34] <ChrisMorgan> WHAT? rust-http performance appears to have dropped to about *half* of what it was, instead of getting the 20-30% performance increase I'd expected. And it's getting *worse* for multiple cores, rather than better. :-( acrichto?
[14:39:15] <Seldaek> ChrisMorgan: maybe it's really time to go to bed :)
[14:39:20] <cmr> heh
[14:40:03] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[14:41:09] *** Quits: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP) (Quit: dherman)
[14:42:09] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[14:43:01] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[14:44:36] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Quit: Konversation terminated!)
[14:44:41] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[14:45:50] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[14:46:51] <adridu59> hi people, have you seen that 'Tau' weirdness in the tutorial? http://static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html#borrowing-and-enums
[14:47:57] <ChrisMorgan> adridu59: what do you mean?
[14:48:29] <cmr> ... who made the tutorial use tau instead of pi >_>
[14:48:52] <adridu59> ChrisMorgan: I've never heard of this
[14:48:56] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[14:49:04] <cmr> adridu59: the tutorial explains and links to it, read on.
[14:49:28] <ChrisMorgan> cmr: I took it (right from when I first read it) as poking fun at it.
[14:49:42] <Ms2ger> Hah, tau
[14:49:47] <adridu59> yea I have seen that link, it's just that I don't see what it has to do with Rust
[14:49:57] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[14:50:06] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[14:50:19] <cmr> adridu59: it's just calculating the area
[14:50:25] <adridu59> also I study mathematics and I never used it
[14:51:46] <adridu59> well, don't get me wrong, it's not that I care about it or anything
[14:51:47] <ChrisMorgan> It's fairly clearly an off-topic joke. I find such things make reading documentation great fun.
[14:51:59] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:52:52] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[14:53:07] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[14:53:25] <adridu59> oh ok
[14:53:36] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[14:54:21] <adridu59> I just wanted people's thoughts on it, it looked a bit weird when I first saw it :)
[14:55:43] <sigma> It amused me as I was reading through
[14:56:16] <ChrisMorgan> I was writing documentation earlier today for a play/opera/musical script file format that I have; it involved a sample of poetry and spoken matter, so I had a rabbit beside the otherwise deserted wall of Troy start speaking/singing. Well, why not? That's the fun of such documentation involving examples: you can do crazy things picking arbitrary and completely off-topic things.
[14:56:57] <ChrisMorgan> Python documentation will occasionally include references to Monty Python's Flying Circus. For example, it might speak of a dead parrot.
[14:57:21] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[14:57:30] <adridu59> yea it's like what's on openclassrooms.com, it's a french website for teaching programming
[14:57:52] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:58:05] *** Parts: bhearsum|buildduty (bhearsum@moz-FBAE94.members.linode.com) ()
[14:58:18] <ChrisMorgan> acrichto: BTW, if you want to run rust-http comparison benchmarks at any point, the present code is comparisons/run.py in the rust-http repository. I think it should run on all OS X and Linux systems with Go, Node and Rust, but any can be conveniently disabled if desired. I still need to tie it into Rust's bench framework to have a standalone Rust benchmark.
[14:59:02] <ChrisMorgan> OK, I've waited long enough since observing that I should go to bed, so I can really go to bed now :P
[14:59:37] * Ms2ger kicks ChrisMorgan out
[14:59:57] * ChrisMorgan isn't here to notice that
[15:00:01] <ChrisMorgan> Oh, whoops.
[15:01:41] *** Quits: pseudoku (quassel@646DB683.AE78DE90.520CDC98.IP) (Connection reset by peer)
[15:04:33] *** Joins: pseudoku (quassel@8E9231AD.49D5D946.520CDC98.IP)
[15:05:15] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[15:06:05] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[15:08:39] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Connection reset by peer)
[15:08:44] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[15:13:58] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[15:15:02] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[15:17:08] *** Quits: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP) (Quit: Lost terminal)
[15:17:46] *** Joins: mib_6eoey2 (Mibbit@D18E40E9.D98F8204.F5458954.IP)
[15:18:09] *** Quits: mib_6eoey2 (Mibbit@D18E40E9.D98F8204.F5458954.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:18:46] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:20:47] *** Joins: Savago (Savago@188A36F1.F78A42FA.18DDB669.IP)
[15:21:14] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:22:27] *** Quits: Savago (Savago@188A36F1.F78A42FA.18DDB669.IP) (Ping timeout)
[15:23:39] *** zz_kimundi is now known as kimundi
[15:25:33] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[15:26:53] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:27:24] *** Joins: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP)
[15:27:53] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[15:27:55] *** Joins: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net)
[15:28:05] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[15:28:14] *** Joins: Savago (Savago@188A36F1.F78A42FA.18DDB669.IP)
[15:29:15] *** Quits: pnathan (Adium@moz-5EBBDD83.tukw.qwest.net) (Ping timeout)
[15:29:45] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[15:30:41] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:30:53] *** Quits: Savago (Savago@188A36F1.F78A42FA.18DDB669.IP) (Ping timeout)
[15:38:37] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[15:39:36] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[15:40:36] *** Quits: Kxepal (Miranda@moz-4A23B2B5.pppoe.mtu-net.ru) (Ping timeout)
[15:40:59] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[15:42:02] *** Joins: Savago (Savago@27161FE5.68394D8.18DDB669.IP)
[15:43:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:43:57] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[15:44:09] *** Joins: Kxepal (Miranda@moz-428D43AB.pppoe.mtu-net.ru)
[15:44:55] *** Joins: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP)
[15:45:50] *** Joins: Sorella_ (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP)
[15:46:06] *** Joins: mib_25zwj0 (Mibbit@moz-A483048A.dynamic.qsc.de)
[15:46:35] *** Joins: mib_e99on0 (Mibbit@moz-A483048A.dynamic.qsc.de)
[15:46:46] *** Quits: mib_25zwj0 (Mibbit@moz-A483048A.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[15:49:09] *** Quits: fabiand (fabiand@moz-9073C82F.adsl.alicedsl.de) (Ping timeout)
[15:50:20] *** kimundi is now known as zz_kimundi
[15:53:18] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:54:10] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[15:56:12] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[15:56:45] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[15:57:12] *** zz_kimundi is now known as kimundi
[15:57:14] *** Joins: sweet_kid (Upasana@A70B8495.8CACE31E.388CF16F.IP)
[15:57:32] *** pmoore is now known as pmoore|afk
[16:01:03] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[16:05:14] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[16:05:55] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[16:06:49] *** Joins: fabiand (fabiand@moz-5886F520.adsl.alicedsl.de)
[16:07:03] *** Quits: fabiand (fabiand@moz-5886F520.adsl.alicedsl.de) (Quit: Verlassend)
[16:07:08] *** Joins: fabiand (fabiand@moz-5886F520.adsl.alicedsl.de)
[16:07:20] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:07:33] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[16:09:06] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[16:14:12] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[16:14:31] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[16:15:31] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:17:21] *** pmoore|afk is now known as pmoore
[16:17:30] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[16:18:04] *** kimundi is now known as zz_kimundi
[16:20:14] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[16:22:24] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:22:36] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[16:22:41] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[16:22:46] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[16:22:56] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:23:50] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[16:24:58] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:26:55] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[16:27:50] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:28:10] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[16:28:45] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[16:28:52] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[16:30:07] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[16:30:34] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[16:30:49] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:30:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:31:03] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[16:31:32] <bstrie> I'm reading about covariance vs contravariance, and I don't really understand the point of the distinction
[16:31:43] *** Quits: sigma (sigma@moz-3F4E2473.range86-184.btcentralplus.com) (Quit: Leaving.)
[16:31:49] <bstrie> actually I don't even know in what ways rust really has subtyping
[16:32:06] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[16:32:19] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:32:24] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Computer has gone to sleep)
[16:32:26] <bstrie> but in general I'm still having a hard time grasping it
[16:34:04] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[16:36:14] <wycats_> bstrie: I find that C#'s in vs. out distinction can at least help you get a sense of the use-cases
[16:36:20] *** Quits: Blub\w (wry@moz-7B2008F1.wireless.dyn.drei.com) (Quit: back tomorrow)
[16:36:23] *** Joins: zombie_ (chatzilla@moz-C8F1442C.dynamic.isp.telekom.rs)
[16:36:42] <bstrie> wycats_: I'll look into it, thanks
[16:37:37] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:38:20] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[16:38:38] *** Quits: Savago (Savago@27161FE5.68394D8.18DDB669.IP) (Ping timeout)
[16:40:13] <wycats_> I assume you've read http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science) ?
[16:41:06] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[16:42:29] <bstrie> wycats_: that's what I was going through, and the line "Read-only data types (sources) can be covariant; write-only data types (sinks) can be contravariant. Mutable data types which act as both sources and sinks should be invariant." seems understandable enough, but I'm struggling to internalize the read-only/write-only distinction and how that can be enforced by languages
[16:42:53] <wycats_> this sentence did it for me: "A moment's thought shows that it is safe to substitute a function f instead of a function g if f accepts a more general type of arguments and returns a more specific type than g."
[16:43:09] <wycats_> "In other words, the → type constructor is contravariant in the input type and covariant in the output type"
[16:43:31] <bstrie> wycats_: this was all inspired by one of pcwalton's comments on HN about dart's type system "unify under covariance instead of contravariance like they should" https://news.ycombinator.com/item?id=6682077
[16:43:38] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[16:43:40] <wycats_> bstrie: ah
[16:44:00] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[16:45:20] <bstrie> oh heh, maybe this article will be illuminating https://www.dartlang.org/articles/why-dart-types/
[16:45:29] <wycats_> question: if I have a family of structs whose members are all ints, strings and booleans, what's the best way to write a function that serializes then to JSON (I can design the structs however I want to make this work)
[16:46:47] <bstrie> wycats_: I think #[deriving(Encodable)] on the struct will allow you to use it with our built-in json serializer
[16:46:57] <wycats_> bstrie: dammit, the question was a trick
[16:47:00] <bstrie> haha
[16:47:04] <wycats_> I'm really trying to encode to protobufs
[16:47:05] <bstrie> sorry :P
[16:47:12] <wycats_> but I figured JSON was an easier variant of the question
[16:47:23] <wycats_> IT'S A TRAP
[16:48:09] *** Parts: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP) ()
[16:48:11] <wycats_> so how does that deriving work?
[16:48:14] <wycats_> link to source is fine
[16:48:42] *** flaper87 is now known as flaper87|afk
[16:49:11] <bstrie> it's secretly a syntax extension, so I presume it generates the code at compile time to make the magic happen
[16:49:26] *** Quits: joris (joris@moz-763F6A15.fbx.proxad.net) (Quit: Konversation terminated!)
[16:49:34] <bstrie> I'd guess it automatically writes the methods that satisfy some trait that the json module can then take advantage of
[16:49:38] <bstrie> wycats_: https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/deriving/encodable.rs
[16:50:18] <bstrie> as far as I know, all the deriving attributes are just there to automatically generate impls for traits
[16:50:30] <bstrie> there's no generic way to define them, each deriving thing is hand-written
[16:50:39] *** Joins: bholley (anonymous@moz-BBE3ABD.mv.mozilla.com)
[16:50:51] <wycats_> bstrie: so probably not the right approach for me?
[16:51:02] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:51:03] <bstrie> wycats_: no it might be, if you're just looking to serialize in general
[16:51:08] <bstrie> I don't think that Encodable is json-specific
[16:51:15] <wycats_> ah interesting
[16:51:34] <wycats_> ahhh
[16:51:46] <bstrie> the comment in that file might be helpful
[16:51:56] <wycats_> yeah
[16:51:58] <wycats_> it looks good
[16:52:33] <wycats_> so that means I'd have to write an encode per struct, not per member type
[16:52:45] <bstrie> wycats_: and if it fails to derive for whatever reason, you always have the option to write those impls manually
[16:52:51] <wycats_> yeah of course
[16:54:02] <bstrie> yeah, all the built-in types like ints and strings and booleans *should* already have the proper impls to make them usable with Encodable
[16:54:37] <bstrie> if they don't, that's probably a bug
[16:54:53] <wycats_> How would that work? I need to define how ints are encodable *in protobufs*
[16:55:13] <bstrie> hrm, no idea
[16:55:15] <myname> isn't somethere stated that traits should not end in "able"
[16:55:20] *** Quits: jix (jix@moz-D969BFFC.de) (Client exited)
[16:55:32] <bstrie> myname: encodable was written long before that was a guideline :)
[16:55:36] <wycats_> bstrie: I think I couldn't use the builtin
[16:56:09] <myname> bstrie: why not rename it to Encode?
[16:56:24] <bstrie> wycats_: you might be better off asking someone who knows more about the encodable interface... I *think* that erickt wrote it?
[16:56:44] <erickt> bstrie / wycats_: I did write it
[16:56:56] <wycats_> erickt: should I repeat the question/
[16:57:02] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[16:57:06] <wycats_> also, hi!
[16:57:07] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[16:57:13] <erickt> wycats_: hi! it's in my history, one sec
[16:57:32] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:57:38] *** Joins: mib_j5f8bk (Mibbit@moz-5D96541B.dclient.hispeed.ch)
[16:58:21] *** Quits: mib_j5f8bk (Mibbit@moz-5D96541B.dclient.hispeed.ch) (Quit: http://www.mibbit.com ajax IRC Client)
[16:58:23] <wycats_> :D
[16:58:30] <erickt> wycats_: first off, I believe there's a rust protobuf binding somewhere 
[16:58:43] <wycats_> erickt: I'd be willing to use it, but also want to learn
[16:59:16] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[16:59:23] <erickt> second, the serialization stuff is a little kludgy :( I'm actually experimenting right now with a next generation version
[16:59:31] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:59:33] <erickt> not sure if it'll pan out
[16:59:53] <wycats_> erickt: I'd be interested in general approaches too
[17:00:17] *** Quits: mib_e99on0 (Mibbit@moz-A483048A.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[17:00:27] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[17:00:50] *** flaper87|afk is now known as flaper87
[17:00:52] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[17:01:22] <erickt> wycats_: what's a little tricky with protobuf is that whole code generation bit
[17:01:27] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[17:01:36] <wycats_> I wasn't planning on starting there
[17:01:50] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Client exited)
[17:01:53] <wycats_> I was planning on just doing the work at runtime based on the types
[17:02:03] <erickt> and yeah, you need to write an impl of Encodable per struct
[17:02:52] <wycats_> (the Ruby library I'm porting just keeps a list of all of the fields and their types, iterates over it, and encodes that way)
[17:02:56] <erickt> also, I didn't realize we were avoiding *able trait suffixes
[17:03:11] <erickt> gotcha
[17:03:18] <cmr> erickt: it's in the style guide
[17:03:27] <erickt> ooh it's been updated?
[17:03:32] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[17:03:45] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[17:03:58] <cmr> I didn't realize it was out of date!
[17:04:08] <wycats_> erickt: so my initial thought was "I have types... I can somehow iterate over them"... then I realized I wasn't in Kansas anymore
[17:04:19] <erickt> cmr: it's been months since I last looked at it
[17:04:55] <cmr> "avoid words with suffixes (able, etc). try to use transitive verbs, nouns, and then adjectives in that order"
[17:04:58] <erickt> wycats_: I'd love to be able to just iterate through all the values in a type, but that's a bit tricky
[17:05:17] <erickt> wycats_: the encodable/decodable interface should get you there
[17:05:24] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Computer has gone to sleep)
[17:05:35] <wycats_> I just assumed it was the kind of thing I give up in staticland
[17:06:05] <pseudoku> is it possible to view a single dimensional vec (&[u8]) as a two dimensional array where the rightmost dimension is fixed like &[[u8,..20]]
[17:06:07] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[17:06:18] *** Quits: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu) (Ping timeout)
[17:06:18] <erickt> wycats_: it's actually doable, it just will be much more pleasant to write once we get generators
[17:06:25] <wycats_> :)
[17:06:54] <wycats_> erickt: ideally, what I'd be able to do is write a specialized version of Encodable that I could apply to any kind of struct that took each value along with its type
[17:07:04] <wycats_> I have no idea if that's even remotely like something I can do
[17:08:07] <cmr> pseudoku: sure, with a transmute.
[17:08:20] <pseudoku> cmr: thanks
[17:08:39] <cmr> pseudoku: just gotta make sure the length is a multiple of the inner fixed-length vec's length, and it is safe.
[17:09:12] <erickt> wycats_: that's kind of what I'm doing with serialization version 3. I'm trying to create a `Value` type that encodes all the possible values and passes them as a stream to an encoder/decoder
[17:09:32] <wycats_> neat
[17:10:07] <wycats_> that sounds good actually
[17:10:39] <erickt> I got json.rs converted to using it, but I'm not thrilled with how messy the approach is
[17:10:52] *** Joins: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net)
[17:10:58] <wycats_> I can probably get away with just hacking in the encoding rules directly for now... I only have a few relatively small protobufs
[17:11:12] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:11:27] <wycats_> erickt: how does json.rs work now?
[17:11:43] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[17:11:55] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Computer has gone to sleep)
[17:12:48] <erickt> wycats_: https://gist.github.com/erickt/7416726
[17:13:45] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[17:15:28] <wycats_> this is with your new approach or the current approach?
[17:15:38] <wycats_> or both?
[17:15:48] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[17:15:56] <erickt> thats my new approach
[17:16:27] <wycats_> surprisingly long
[17:16:37] <erickt> yep
[17:16:53] <cmr> Shorter than the existing json by 400 lines
[17:16:53] * wycats_ this stuff looks like what I was expecting / wanting: https://gist.github.com/erickt/7416726#file-json-rs-L1039
[17:16:56] *** Joins: beifeng (Mibbit@BB2A2CE7.3D26E271.601BAF88.IP)
[17:17:21] <erickt> cmr: I think I can get it shorter too :)
[17:17:41] <wycats_> :)
[17:17:50] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[17:17:54] <wycats_> lots of it is a pretty encoder impl too
[17:18:45] <wycats_> this makes sense: https://gist.github.com/erickt/7416726#file-json-rs-L86
[17:18:48] *** Joins: josh (josh@moz-3A704FC8.mpls.qwest.net)
[17:18:52] *** Joins: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP)
[17:19:46] <wycats_> ah and a lot of it is a decoder
[17:20:24] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:20:52] <wycats_> enums in rust are like unions?
[17:21:04] * wycats_ noob
[17:21:12] <wycats_> https://gist.github.com/erickt/7416726#file-json-rs-L849-L856
[17:21:25] <wycats_> i.e. that's saying that the Json type is one of those?
[17:21:29] <wycats_> and then you can pattern match on it?
[17:21:41] <cmr> wycats_: right
[17:21:43] <erickt> wycats_: they are like c enums merged with unions 
[17:21:59] <cmr> erickt: what is serde?
[17:22:24] *** Joins: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu)
[17:22:34] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[17:22:50] <erickt> cmr: it's (ser)ialization (de)serializatio
[17:22:51] <erickt> n
[17:22:55] <cmr> ahh
[17:23:13] *** Quits: jakedust (Jake@moz-9CC82466.dsl.telesp.net.br) (Quit: jakedust)
[17:24:11] <wycats_> so this here is the workhorse? https://gist.github.com/erickt/7416726#file-json-rs-L874
[17:24:25] <wycats_> wait that's decode
[17:24:36] <erickt> yep :)
[17:24:43] <wycats_> this guy: https://gist.github.com/erickt/7416726#file-json-rs-L861
[17:24:44] <erickt> there are a couple workhorses :)
[17:25:29] <erickt> so that's one of the special things my new library can do, where we can convert serde::Value into a generic type like json::Json
[17:25:34] <erickt> the old library could not do that
[17:26:02] <wycats_> neat
[17:26:32] *** Joins: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net)
[17:26:46] <erickt> so line 861 is the manually written encodable, but generally users shouldn't have to do something as complicated as L861
[17:27:15] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[17:27:42] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:27:57] <wycats_> right
[17:28:07] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[17:28:12] <wycats_> I'm trying to figure out how your library is doing the iteration in the first place
[17:28:32] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[17:29:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:29:57] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[17:30:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:31:11] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Computer has gone to sleep)
[17:31:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:32:05] *** Quits: Jesin (Jessin_@moz-5C1F7BD2.res.lehigh.edu) (Quit: Leaving)
[17:34:23] <wycats_> deep magic amirite?
[17:34:42] *** Joins: jakedust (Jake@moz-9CC82466.dsl.telesp.net.br)
[17:35:22] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Ping timeout)
[17:35:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:38:07] <bstrie> erickt is a rusty wizard
[17:38:27] <erickt> ha
[17:38:48] *** Quits: Ferreus (ferreus@moz-77B684FB.dip0.t-ipconnect.de) (Ping timeout)
[17:38:49] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:38:49] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[17:38:59] <erickt> so it's not really `Iterator` iteration yet
[17:39:03] *** Quits: JanC (janc@moz-E50FB37E.dsl.scarlet.be) (Ping timeout)
[17:39:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[17:39:46] <erickt> although it has a pretty similar interface to Iterator, where you do .read() to get a series of Option<Value>s 
[17:39:56] <wycats_> http://farm8.staticflickr.com/7237/7068396099_c13875d6d1_o.jpg
[17:39:59] <wycats_> rusty wizard
[17:40:04] <erickt> haha
[17:40:42] <wycats_> erickt: but how do you get the underlying values in the first place to convert them into Option<Value>?
[17:41:17] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:41:55] <erickt> wycats_: https://gist.github.com/erickt/7416726#file-serde-rs-L151
[17:42:09] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:42:18] *** pmoore is now known as pmoore|shopping
[17:43:15] <wycats_> macro_rules!
[17:43:28] <pauls> Woooooo!
[17:44:07] <erickt> that's the best named construct ever. I always feel so happy when i use it
[17:44:34] <wycats_> what's ty?
[17:45:20] <cmr> wycats_: typename
[17:45:24] <wycats_> ahhhh
[17:45:53] <cmr> so identifiers, but also Foo<'a>, Foo<'a, T> etc
[17:45:58] *** Quits: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net) (Quit: This computer has gone to sleep)
[17:46:22] <wycats_> I'm still not seeing how you're iterating over the members of the struct
[17:46:58] *** Joins: notmatt (notmatt@118CCA77.D1B89392.602E4FC1.IP)
[17:47:25] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[17:47:27] <wycats_> I see how emit gets called now
[17:48:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:48:36] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[17:48:44] <wycats_> I see encode_seq
[17:48:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:49:02] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[17:49:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:49:41] *** Quits: jeyraof_ (uid6796@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[17:49:59] <bjz> erickt: its such a shame we don't have `fun` as well :)
[17:50:18] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:50:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:50:53] <erickt> wycats_: it's manually implemented with https://gist.github.com/erickt/7416726#file-json-rs-L1173
[17:51:22] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Quit: leaving)
[17:51:48] <erickt> wycats_: eventually that's what the syntax extension would generate
[17:52:01] <acrichto> ChrisMorgan: I ran your http benchmarks locally, and I could never get the run.py script to work but when I profiled the rust version it spent 50% of its time just creating BufferedStream instances
[17:52:11] *** Quits: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu) (Ping timeout)
[17:52:26] <erickt> bjz: I agree
[17:52:29] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[17:52:52] <nuts> Hi, I've a new trouble with rust^^
[17:53:14] <nuts> Today I try to built a library (.so) written in rust, and call them in rust
[17:53:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:53:41] <nuts> I've two files, test.rc and test.rs
[17:54:08] <nuts> in test.rs I've only one function call test
[17:54:19] <nuts> She takes no argument and return nothing
[17:54:32] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[17:54:48] <nuts> in test.rc I've juste 2 lines extern mod std; and pub mod test;
[17:54:49] *** Joins: JanC (janc@moz-A6B15A85.dsl.scarlet.be)
[17:55:05] <nuts> I build that with rustc test.rc --lib
[17:55:33] <nuts> (only two wrning about name and version of the lib)
[17:55:33] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[17:55:38] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[17:55:43] <nuts> si now, I make a new file using this lib
[17:56:10] <nuts> In this file I put just extern mod test; and a main function
[17:56:26] <nuts> in the mainfunction I call test function from libtest
[17:56:45] <wycats_> erickt: neat
[17:56:52] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:56:55] <nuts> rustc say to me :  error: unresolved name `test::test`.
[17:57:06] <nuts> what's wrong, in my procedure?
[17:58:06] *** Joins: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP)
[17:59:15] <nuts> I think it's something with test.rc
[17:59:27] <nuts> but I don't now what
[17:59:51] *** Joins: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP)
[17:59:51] *** ChanServ sets mode: +ao dherman dherman
[18:03:48] *** Quits: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net) (Ping timeout)
[18:04:28] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:04:44] *** Joins: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu)
[18:05:05] *** Joins: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net)
[18:05:30] *** Joins: bytbox (s@moz-2D36DB45.wireless.umd.edu)
[18:05:34] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:07:23] <nuts> No idea?
[18:08:12] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:08:31] <cmr> nuts: is the function public?
[18:08:33] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:08:37] *** zz_kimundi is now known as kimundi
[18:08:44] <cmr> nuts: you should be using `test::test::fun_name()`
[18:08:59] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:09:40] *** Quits: avsej (avsej@825136E6.BD1E5C28.5C5F5A39.IP) (Client exited)
[18:09:59] <nuts> yes the function is public
[18:10:13] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[18:10:20] <nuts> oO
[18:10:33] <klutzy> it's quite sad I can't use rustdoc::html::markdown anymore
[18:10:43] <klutzy> (ICE regarding extern mod / struct<'self>)
[18:10:51] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[18:11:10] <klutzy> I was using it to create a rust-related site in rust-http
[18:11:13] <acrichto> klutzy: in the meantime you can copy the file and link to rustdoc, you'll slurp in sundown symbols to link against
[18:11:27] <klutzy> acrichto: yep. but I'm quite lazy :p
[18:11:57] <nuts> cmr: And It's possible to just use test::fun_name()? I think it's an easiest way... but use test; generate an build error
[18:12:11] <nuts> but that works with test::test::
[18:12:11] *** Joins: Savago (Savago@27161FE5.68394D8.18DDB669.IP)
[18:12:14] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[18:12:24] *** Quits: bytbox (s@moz-2D36DB45.wireless.umd.edu) (Ping timeout)
[18:13:15] <klutzy> actually I'm making new rust-kr.org (website for korean rustians) using rust
[18:13:15] <cmr> nuts: you need to `use test::test`
[18:13:17] <klutzy> and rust-http
[18:13:24] <cmr> klutzy: cool!
[18:14:32] <nuts> cmr: thanks, for your precious help :)
[18:16:26] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[18:16:43] <klutzy> cmr: it currently uses templates with {{variable}} syntax like jinja2
[18:16:57] <klutzy> and it parses markdown to webpage like read-only wikis
[18:17:32] <klutzy> I think I can deploy it publicly soon
[18:18:29] *** Quits: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu) (Ping timeout)
[18:19:15] *** flaper87 is now known as flaper87|afk
[18:19:28] <wycats_> erickt: so what would you  suggest I do for now?
[18:19:53] <bstrie> wycats_: you should help him write that new encodable interface :)
[18:20:09] <wycats_> seems like a good medium-term goal ;)
[18:20:16] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[18:20:22] <erickt> wycats_: or even better, work on https://github.com/stepancheg/rust-protobuf :)
[18:20:23] <sfackler> nice! I was thinking about writing a template library
[18:20:36] <wycats_> rust-protobuf seems plausible
[18:21:34] <wycats_> oooh I made the mistake of closing my laptop while compiling rust
[18:21:54] <bstrie> doesn't it resume properly?
[18:22:09] <bstrie> I can ^z rust compilation and resume later fine
[18:22:58] <wycats_> unsure
[18:23:04] <wycats_> it seems to just be chilling there
[18:23:17] <bstrie> is it compiling libstd
[18:23:20] <bstrie> or librustc
[18:23:22] <wycats_> compile_and_link: x86_64-unknown-linux-gnu/stage1/lib/rustc/x86_64-unknown-linux-gnu/lib/librustc.so
[18:23:22] <wycats_> yeah
[18:23:27] <bstrie> those chill for a while
[18:23:27] <wycats_> I bet that's just long :P
[18:23:34] <wycats_> :shipit:
[18:23:37] <wycats_> lunchtime!
[18:23:40] <wycats_> not really
[18:23:42] <wycats_> coffeetime!
[18:23:55] <wycats_> http://xkcd.com/303/ time!
[18:23:55] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:23:55] *** ChanServ sets mode: +o tjc
[18:23:56] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[18:24:35] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[18:27:36] <wycats_> https://github.com/stepancheg/rust-protobuf/blob/master/src/lib/shrug.rs#L135-L141
[18:27:37] <wycats_> O_O
[18:27:54] *** Joins: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu)
[18:28:03] <wycats_> what is the ' prefix in Rust?
[18:28:19] <klutzy> lifetime of variable
[18:28:20] <bstrie> wycats_: it denotes a lifetime
[18:28:32] <wycats_> say more
[18:28:36] <bstrie> 'static is the only "magical" lifetime, and it refers to the entire scope of the program
[18:29:03] <tjc> wow, our documentation on lifetime variables… isn't good
[18:29:12] <wycats_> yeah I was investigating
[18:29:18] <klutzy> when if you return &-pointer, it would make sense only if the pointer is borrowed from other places and not yours
[18:29:46] <cmr> tjc: Now that nmatsakis's patch landed we don't have the 'self mess though :D
[18:29:55] <tjc> cmr: yeah, that's an improvement
[18:29:58] <bstrie> wycats_: basically, the point of lifetime parameters is to make sure that the output of a function lives as long as the inputs do
[18:30:00] <klutzy> so lifetime indicates how the pointer is living
[18:30:26] <tjc> klutzy: No, that would be a "pointer lifestyle" ;-)
[18:30:41] <tjc> a lifetime variable indicates the lexical scope within the program in which the pointer is valid
[18:30:42] <klutzy> :D
[18:30:42] <wycats_> so you need it whenever you're not using borrowed pointers?
[18:30:43] <bstrie> wycats_: it's a static analysis that guarantees e.g. that iterator invalidation can't happen
[18:30:48] *** Joins: mikezaby (mikezaby@moz-3AA26816.home.otenet.gr)
[18:30:52] <sfackler> there is a borrowed pointer tutorial, but I can't seem to get to doc.rust-lang.org :/
[18:30:58] <cmr> wycats_: you only need when you *are* using borrowed pointers.
[18:31:07] <tjc> wycats_: You don't usually need lifetime variables -- usually the compiler infers them for you
[18:31:07] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:31:33] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:31:48] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[18:32:22] <wycats_> so borrowed pointers automatically use a lifetime? (the 'static one?)
[18:32:38] <tjc> wycats_: they automatically use a lifetime, but it's not necessarily 'static
[18:32:41] <bstrie> wycats_: they automatically have a lifetime based on their scope
[18:32:44] <tjc> 'static means the lifetime of the pointer is the entire program
[18:32:56] <tjc> the compiler creates new lifetime variables and associates them with various scopes
[18:33:23] <wycats_> my naive understanding of borrowed pointers was that they exist in order to tell the compiler that you're not planning on retaining the pointer
[18:33:46] <bstrie> lifetime parameters can help the compiler understand how long you want to borrow them for
[18:33:49] <wycats_> so the caller doesn't have to worry about freeing the memory when the stack frame is left
[18:33:56] <wycats_> hm
[18:34:16] <bstrie> wycats_: we really do need to think of a good way to explain this :)
[18:34:37] <wycats_> I can help if I understand it :)
[18:34:40] <tjc> you see, a lifetime is like a burrito
[18:34:45] <bstrie> yes, exactly
[18:34:50] <tjc> my work here is done
[18:35:00] <wycats_> "Rust's borrowed pointers are a general purpose reference type. In contrast with owned boxes, where the holder of an owned box is the owner of the pointed-to memory, borrowed pointers never imply ownership. A pointer can be borrowed to any object, and the compiler verifies that it cannot outlive the lifetime of the object"
[18:35:05] <wycats_> that's what the current docs say
[18:35:07] <bstrie> or imagine that you're eating a burrito while performing an EVA on the international space station
[18:35:08] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[18:35:08] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[18:35:09] <wycats_> that makes sense to me
[18:35:12] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[18:35:15] <wycats_> so where do lifetimes come in?
[18:35:31] <Ms2ger> Let's say you have a struct Foo { bar: Bar }
[18:35:37] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[18:36:01] <Ms2ger> And you have fn quux(foo: Foo) -> &Bar { &foo.bar }
[18:36:07] <Ms2ger> See anything wrong yet? :)
[18:36:55] <wycats_> I am reading the syntax ;)
[18:37:01] <Ms2ger> Heh
[18:37:08] * wycats_ hangs head
[18:37:10] <wycats_> &Bar { &foo.bar }
[18:37:11] <bstrie> wycats_: here's a months-old article from nmatsakis on them: http://smallcultfollowing.com/babysteps/blog/2012/07/19/yet-another-tutorial-on-borrowed-pointers/
[18:37:22] <Ms2ger> &Bar is the return type
[18:37:32] <wycats_> you can return a borrowed pointer?
[18:37:39] <bstrie> wycats_: if you want to be the world's best expert on borrowed pointers, nmatsakis is who you'd want to ask :)
[18:37:41] <wycats_> that is the part I am O_o
[18:37:42] <bstrie> wycats_: you can
[18:37:43] <Ms2ger> Well, that's the issue :)
[18:37:45] <wycats_> O_o
[18:37:46] <bstrie> wycats_: ONLY if you give it a lifetime, though
[18:37:47] <wycats_> what is going on here
[18:37:52] <bstrie> *magic*
[18:37:56] <bstrie> I mean
[18:38:00] <Ms2ger> So you need fn quux(foo: &'a Foo) -> &'a Bar { &foo.bar }
[18:38:00] <bstrie> *computer science*
[18:38:02] <wycats_> I can't grok "return a borrowed pointer" at all
[18:38:02] <nmatsakis> wycats_: you can, but only if you re-borrow it from something that was given to you, basically
[18:38:11] <TeXitoi> hi
[18:38:14] <nmatsakis> wycats_: as Ms2ger wrote
[18:38:14] <bstrie> TeXitoi: hello
[18:38:29] <Ms2ger> Which means that you can use the returned borrowed pointer for as long as the argument
[18:38:36] <nmatsakis> wycats_: except it should be fn quux<'a>(foo: &'a Foo) -> &'a Bar { &foo.bar }
[18:38:43] <Ms2ger> And that, yes
[18:38:43] <TeXitoi> any comment: http://texitoi.eu/~texitoi/k-nucleotide/shootout-meteor-contest.rs
[18:38:44] <wycats_> so the caller of quux is basically getting a borrowed Bar?
[18:39:13] <nmatsakis> wycats_: yes, quux() here transforms a borrowed Foo into a borrowed Bar with the same lifetime
[18:39:18] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[18:39:32] <wycats_> does the caller of quux have to specify an & type?
[18:39:43] <bstrie> TeXitoi: are you improving all the shootout benchmarks?
[18:39:48] <nmatsakis> wycats_: well, they must provide a value of type &Foo
[18:40:00] <wycats_> right
[18:40:03] <TeXitoi> bstrie: this one is laking
[18:40:09] <wycats_> so the caller of quux has a borrowed Foo
[18:40:12] <wycats_> a &Foo
[18:40:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:40:14] <bstrie> TeXitoi: laking?
[18:40:20] <Ms2ger> For example
[18:40:25] <Ms2ger> It could also own the Foo
[18:40:29] <tjc> TeXitoi: If you had submitted this code as a pull request, the first comment I would make as a reviewer is that it should have some comments explaining how the code works :-)
[18:40:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:40:37] <TeXitoi> I try to find some pure rust code to contribute, and shoutoot benchmark seems a good way;)
[18:40:40] <wycats_> and it needs a borrowed member of foo
[18:40:42] *** Joins: twocoat (twocoat@moz-F9806A3F.stny.res.rr.com)
[18:41:03] <TeXitoi> tjc: ok, I'll add that before the pull request ;)
[18:41:13] <wycats_> so quux takes the borrowed Foo and gives back a borrowed member of Foo with the same lifetime as the original borrowed Foo
[18:41:19] <wycats_> confirm/dent
[18:41:21] <wycats_> deny*
[18:41:22] <TeXitoi> bstrie: https://github.com/mozilla/rust/issues/2776
[18:41:46] <Ms2ger> c
[18:42:04] <wycats_> ok it makes sense
[18:42:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:42:21] <wycats_> and 'a is just any name?
[18:42:26] <wycats_> lexically scoped?
[18:42:47] <wycats_> you said the compiler generates lifetime variables automatically... when does that happen?
[18:43:00] <tjc> wycats_: it does that as part of the borrow checker (which runs after the typechecker)
[18:43:39] <bstrie> wycats_: if you never return any borrowed pointers or store them in structs, then the lifetimes are inconsequential and can be inferred
[18:44:07] <wycats_> so you need them, in general, when you have a function that takes a borrowed pointer and returns a member? or will it be inferred in some of those cases too?
[18:44:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:44:37] *** Quits: pseudoku (quassel@8E9231AD.49D5D946.520CDC98.IP) (Client exited)
[18:45:21] *** Joins: zatnosk (zatnosk@moz-FC79AC5.dk.customer.tdc.net)
[18:45:34] <bstrie> wycats_: if you return a member by-value you wouldn't need them
[18:45:54] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[18:45:57] <wycats_> which is fine if copying is nonexistent or cheap
[18:45:57] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:45:57] <bstrie> lifetimes only exist as part of borrowed pointers afaik
[18:46:07] <wycats_> so this is important if you're passing around a tree or something
[18:46:26] <wycats_> if you have a function that takes a borrowed tree and returns a subtree
[18:46:48] <wycats_> you would want the borrowed subtree to be borrowed too (to avoid copying) and you'd use a lifetime on the parent tree?
[18:46:53] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:47:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:48:34] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Quit: Leaving)
[18:48:37] <bstrie> I can't say for sure, I've never written any data structures that use borrowed pointers extensively
[18:48:40] <bstrie> but many people have
[18:49:10] <wycats_> http://farm8.staticflickr.com/7237/7068396099_c13875d6d1_o.jpg
[18:50:15] <twocoat> lol^
[18:50:16] <bstrie> yes I saw that earlier :P
[18:50:17] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[18:50:20] <wycats_> lol
[18:50:45] <wycats_> it was in response to the importance of the lifetime feature but the wizardry required to wield it properly
[18:50:59] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[18:51:05] <wycats_> I think I understand it
[18:51:17] <wycats_> Ms2ger: did my above comments re: trees make sense?
[18:52:47] <Ms2ger> Yes, I think so
[18:52:50] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[18:52:53] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[18:59:25] *** Quits: Savago (Savago@27161FE5.68394D8.18DDB669.IP) (Ping timeout)
[18:59:27] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:59:29] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[18:59:40] *** Quits: alonlevy (alon@moz-74377C14.bb.netvision.net.il) (Ping timeout)
[19:00:19] *** Quits: beifeng (Mibbit@BB2A2CE7.3D26E271.601BAF88.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:00:47] *** Quits: notmatt (notmatt@118CCA77.D1B89392.602E4FC1.IP) (Client exited)
[19:01:05] <wycats_> Ms2ger: ok that makes sense to me
[19:01:40] <wycats_> it's basically going to come up any time you have complex or recursive structures that you're walking
[19:01:49] <wycats_> I would imagine that even a linked list would need lifetimes
[19:01:58] <wycats_> just to get the next node
[19:02:05] <Ms2ger> That sounds plausible
[19:02:28] <wycats_> is the convention to just go with a' b' etc? and use self' ?
[19:02:32] <TeXitoi> wycats_: see src/test/bench/shootout-binarytrees.rs for a borrowed tree
[19:02:38] <wycats_> 'a, 'b, 'c, 'self
[19:02:45] <wycats_> cool
[19:03:43] <wycats_> make install: cfg: no llnextgen found, omitting grammar-verification
[19:04:08] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[19:04:38] <bstrie> wycats_: ignore that, it's ancient
[19:04:46] <wycats_> cool
[19:04:53] <cmr> bstrie: nmatsakis's post is the official tutorial
[19:04:54] <wycats_> so everything should be a'ok?
[19:04:58] <cmr> ie, in the docs
[19:05:08] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:05:09] <bstrie> ah, I had no idea
[19:05:33] <bstrie> wycats_: type "rustc" and see if it worked :P
[19:05:40] <nmatsakis> there was a copy of the tutorial in tree...?
[19:05:46] <nmatsakis> but I really need to make one that's up to date
[19:05:47] <wycats_> I'm recompiling with a different --prefix :P
[19:05:54] <wycats_> give me 3-4 hours :P
[19:05:59] *** Quits: twocoat (twocoat@moz-F9806A3F.stny.res.rr.com) (Client exited)
[19:06:17] <bstrie> wycats_: once you compile llvm once, it doesn't need to recompile
[19:06:21] <bstrie> unless we update our llvm version
[19:06:33] <wycats_> yuno ship binaries?
[19:06:39] <bstrie> wycats_: er, we do...
[19:06:42] <wycats_> I mean for llvm
[19:06:48] <wycats_> for people compiling master
[19:06:52] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[19:06:53] <bstrie> wycats_: in fact, there's a rust binary on your system, it was used to compile rust :P
[19:07:06] <cmr> wycats_: there are nightlies for arch and ubuntu
[19:07:28] <bstrie> wycats_: also, llvm can compile in like five minutes if you compile with -j8
[19:07:35] <bstrie> as opposed to 40 minutes
[19:07:36] <kimundi> We ship llvm snapshot binaries for bootstrap... They just don't get reused for the compilation
[19:07:50] <cmr> also ccache
[19:08:03] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[19:08:06] <bstrie> llvm is too big for ccache :P
[19:08:15] <cmr> eh? no it's not
[19:08:28] <bstrie> it takes like gigs and gigs
[19:08:32] <cmr> so?
[19:08:40] *** Quits: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net) (Quit: jeffdb)
[19:08:40] <bstrie> so I don't want gigs and gigs of cache :)
[19:09:12] <bstrie> you only recompile llvm once in a blue moon, I'd rather not waste the hard drive space
[19:09:26] * cmr recompiles it every PR
[19:09:54] * wycats_ O_O
[19:10:33] <cmr> bstrie: my ccache is only 1.5G
[19:11:12] <kimundi> My cache is the default 1GB, and it'S not even half full?
[19:11:26] <kimundi> I literaly only compile rusts llvm with it...
[19:11:54] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[19:13:00] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:17:36] *** Quits: lerc (quassel@moz-2A8CFEEE.telstraclear.net) (Ping timeout)
[19:23:22] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[19:27:22] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:28:47] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:30:47] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[19:31:48] *** pmoore|shopping is now known as pmoore
[19:35:52] *** Joins: jaredhanson (jaredhanso@moz-8323839A.hfc.comcastbusiness.net)
[19:36:09] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[19:37:32] *** jorendorff is now known as jorendorff_away
[19:38:29] *** jorendorff_away is now known as jorendorff
[19:38:29] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[19:41:16] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[19:43:59] <wycats_> still going!
[19:45:08] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[19:47:08] *** Joins: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net)
[19:47:49] *** Joins: Jesin (Jessin_@moz-C1EBF9B4.dept.lehigh.edu)
[19:48:08] <wycats_> zomg compiled!
[19:48:19] <wycats_> only 45 minutes
[19:48:52] <wycats_> ~/rust/bin/rustc --version -> /home/wycats/rust/bin/rustc 0.9-pre (63cfc99 2013-11-10 16:01:12 -0800)
[19:48:53] <wycats_> woooo
[19:49:04] <wycats_> get this party started
[19:50:06] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[19:50:37] <Ms2ger> wycats_, okay, now it's time to update your tree ;)
[19:50:50] <wycats_> :(
[19:50:59] <wycats_> so how does rustpkg work?
[19:51:08] <wycats_> should I be able to install something like https://github.com/stepancheg/rust-protobuf via it?
[19:51:23] *** Quits: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP) (Quit: Leaving.)
[19:52:18] *** Quits: jaredhanson (jaredhanso@moz-8323839A.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:53:14] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[19:54:19] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[19:54:41] *** Joins: icebattle (icebattle@F8B4BEE4.CF4F0E4E.3ECF35D.IP)
[19:55:04] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[19:55:16] <wycats_> compilation failure: lib/protobuf.rs:4 #[feature(managed_boxes)];
[19:55:21] <wycats_> unknown feature
[19:55:47] *** Quits: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP) (Quit: Leaving.)
[19:58:23] *** Quits: Sorella_ (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP) (Quit: Ex-Chat)
[19:58:27] <TeXitoi> tjc:  http://texitoi.eu/~texitoi/k-nucleotide/shootout-meteor-contest.rs comments added
[19:59:02] <tjc> wycats_: what does rustpkg --version say?
[19:59:21] <wycats_> tjc: I stopped trying to use rustpkg and just tried to compile directly
[19:59:26] <wycats_> I got further by removing that feature line
[19:59:35] <wycats_> now getting an error about fmt! taking the wrong number of args
[19:59:42] <wycats_> hunting for docs for fmt!
[19:59:55] <tjc> wycats_: it sounds like either the profobuf code is out of date, or you have an up-to-date rustc but not an up-to-date rustpkg
[20:00:03] *** Quits: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP) (Quit: victorporof)
[20:00:08] <wycats_> I think the protobuf code is out of dae
[20:00:09] <wycats_> date
[20:00:14] <wycats_> gonna try to bring it up to date
[20:00:14] <Ms2ger> protobuf claims it was last updated 4 days ago
[20:00:21] <wycats_> (with hopeful help from #rust)
[20:00:29] <wycats_> Ms2ger: but probably against 0.8 not master
[20:00:30] <wycats_> c/d
[20:00:33] <tjc> wycats_: Hmm, according to http://hiho.io/rust-ci/, the build of protobuf is passing
[20:00:36] <wycats_> did fmt! change?
[20:00:37] <Ms2ger> " Sync with rust master
[20:00:37] <Ms2ger> Using rust 03f3051
[20:00:42] <wycats_> hmmmm
[20:01:03] <wycats_> rustc --version is rustc 0.9-pre
[20:01:05] <wycats_> just cloned today
[20:01:47] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:02:02] <wycats_> where can I find docs for fmt!
[20:02:07] <Ms2ger> fmt! is dead
[20:02:15] <wycats_> I found http://static.rust-lang.org/doc/master/std/fmt/index.html
[20:02:19] <wycats_> well... fail! uses it
[20:02:24] <wycats_> and this usage is triggering an error
[20:02:39] <Ms2ger> fail! should be using format! by now, I think
[20:02:41] <wycats_> _ => fail!("unknown wire type: {:i}", wire_type as int)
[20:02:48] <Ms2ger> Hrm, that looks right
[20:02:48] <wycats_> maybe I somehow have a bad build?
[20:04:16] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[20:05:13] *** Joins: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr)
[20:05:55] *** Joins: g3orge (g3orge@moz-369F78A7.access.hol.gr)
[20:06:02] *** Quits: mikezaby (mikezaby@moz-3AA26816.home.otenet.gr) (Ping timeout)
[20:06:34] <wycats_> hm I have rust in /usr/bin
[20:06:37] <wycats_> must nuke
[20:06:42] <wycats_> what are "steps to uninstall"?
[20:06:49] <wycats_> it's basically superseding my local rust
[20:07:24] *** Quits: g3orge (g3orge@moz-369F78A7.access.hol.gr) (Quit: leaving)
[20:07:28] *** Joins: g3orge (g3orge@moz-369F78A7.access.hol.gr)
[20:07:32] *** Quits: zatnosk (zatnosk@moz-FC79AC5.dk.customer.tdc.net) (Quit: Computer has gone to sleep)
[20:08:01] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[20:08:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:08:43] *** Quits: icebattle (icebattle@F8B4BEE4.CF4F0E4E.3ECF35D.IP) (Quit: Colloquy for iPad - http://colloquy.mobi)
[20:08:49] <wycats_> make uninstall?
[20:08:54] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[20:09:37] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:09:37] *** ChanServ sets mode: +o pnkfelix
[20:10:03] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[20:11:50] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:11:53] *** Quits: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) (Input/output error)
[20:14:44] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[20:15:42] <wycats_> woo it's working
[20:17:24] *** Quits: Jesin (Jessin_@moz-C1EBF9B4.dept.lehigh.edu) (Connection reset by peer)
[20:17:44] *** Joins: osa1 (omer@moz-63168A82.hsd1.in.comcast.net)
[20:17:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:18:04] *** Joins: heftig (heftig@moz-299C586C.dip0.t-ipconnect.de)
[20:18:09] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:18:13] *** Joins: lerc (quassel@moz-2A8CFEEE.telstraclear.net)
[20:20:46] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:21:59] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:22:46] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[20:23:08] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:25:09] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:27:21] <wycats_> someone should update the github lexer to treat 'lifetimes more sanely
[20:27:35] <cmr> The github lexer is still for like rust 0.1
[20:27:53] <bstrie> wycats_: it takes forever for changes to the github lexer to get upstreamed
[20:27:59] <bstrie> first we have to get them into pygments
[20:28:03] <wycats_> yeah
[20:28:11] <wycats_> start the sausage maker
[20:28:13] <bstrie> then the ruby pygments bindings need to get updated
[20:28:23] <bstrie> then github needs to update their ruby pygments bindings
[20:28:43] <wycats_> the good news is that I now have a protobuf.rs for my .proto file https://gist.github.com/wycats/f5315c7ca96fd47d7d0f#file-foo-rs-L8
[20:28:45] <bstrie> and given that we're gonna need more syntax changes anyway we're just putting it off
[20:29:10] <wycats_> bstrie: just send 'em when you have 'em, no?
[20:29:18] <wycats_> get them used to merging your changes
[20:29:28] <wycats_> Someone should write a Chrome extension that uses highlight.js
[20:29:39] <cmr> wycats_: that someone is you!
[20:29:43] <bstrie> eh, nobody wants to do work on the highlighter when it's just going to change anyway :P
[20:29:54] <wycats_> cmr: it may be!
[20:30:00] <wycats_> I know how to make Chrome extensions, it turns out!
[20:30:07] <wycats_> https://github.com/tildeio/ember-extension
[20:30:08] <wycats_> wheee
[20:30:29] <wycats_> hm... but not Firefox extensions
[20:30:33] * wycats_ dives behind a bush
[20:30:47] <wycats_> (someone else did all the work to make ^^ work on Firefox)
[20:31:46] <wycats_> "Status: Awaiting Preliminary Review Queue position: 98 of 104"
[20:31:47] <wycats_> wheee
[20:33:13] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[20:33:25] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:34:18] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:35:24] <bstrie> wycats_: I'm more inclined to believe that sending constant patches to the pygments folks will just inspire them to tell us to shove off until the language stabilizes :P
[20:36:37] <SiegeLord> Hehe, I made a lexer for scintilla... and then the language changed. I'm waiting for a few more changes to happen before I send another patch
[20:37:04] <SiegeLord> rusti: 0o0
[20:37:06] -rusti- <anon>:9:10: 9:12 error: expected one of `; }` but found `o0`
[20:37:06] -rusti- <anon>:9          0o0
[20:37:06] -rusti-                    ^~
[20:37:06] -rusti- application terminated with error code 101
[20:37:09] <cmr> rusti: version
[20:37:09] <SiegeLord> Ah, right
[20:37:11] -rusti- "rustc 0.8"
[20:37:12] <cmr> yeah
[20:37:27] <cmr> After closure reform, I don't foresee any major syntax changes.
[20:37:37] <bstrie> dst might do it
[20:37:40] <SiegeLord> I'm waiting for /*^
[20:37:49] <bstrie> yes, newattrs too
[20:37:58] <cmr> Ah, are newattrs actually going to be a thing?
[20:38:00] <wycats_> bstrie: that's not how I would run the project, but who knows
[20:38:47] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[20:41:14] *** Joins: lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[20:42:50] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:42:51] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[20:43:37] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:44:00] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[20:45:14] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[20:46:04] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:48:26] *** Quits: cdidd (cdidd@moz-E8BEAB.broadband.corbina.ru) (Ping timeout)
[20:48:29] *** Joins: cdidd (cdidd@moz-4BD645F1.broadband.corbina.ru)
[20:48:59] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[20:51:30] *** Parts: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) ()
[20:52:23] *** Joins: edorian (Mibbit@moz-A483048A.dynamic.qsc.de)
[20:53:00] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[20:56:56] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:57:12] *** Quits: kirneh (kirneh@moz-ACBB9422.k955.webspeed.dk) (Quit: leaving)
[20:57:57] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[20:58:20] <nlminhtl> is the Self identifier exist https://gist.github.com/Ignotus/847797f722c67fa7e841 ?
[20:58:39] *** Quits: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[20:59:37] <cmr> nlminhtl: in the implementation, you need to use the concrete type instead of Self
[20:59:43] <cmr> Self is only allowed in trait declarations.
[20:59:50] <cmr> nmatsakis: is that something that could change?
[21:00:33] <nmatsakis> we could change it
[21:00:36] <cmr> It's quite counterintuitive and asymmetric
[21:00:45] *** Quits: josh (josh@moz-3A704FC8.mpls.qwest.net) (Quit: josh)
[21:00:51] *** Joins: josh (josh@moz-3A704FC8.mpls.qwest.net)
[21:00:53] <nmatsakis> it'd be convenient at times
[21:00:57] *** Joins: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP)
[21:00:57] <nmatsakis> particularly when copy-and-pasting from trait
[21:01:07] <nmatsakis> asymmetric is in the eye of the beholder I guess;
[21:01:12] <nmatsakis> `Self` in a trait is a type parameter
[21:01:18] <nmatsakis> `Self` in an impl'd be more like a type alias
[21:01:34] <nmatsakis> well not "more like", it'd be exactly a type alias
[21:01:36] <nmatsakis> but I'm not opposed
[21:01:58] <mimcpher> I've cursed rustc from copypastaing a Self more than once
[21:02:12] <nmatsakis> yeah, me too
[21:02:13] * nmatsakis admits
[21:02:23] <nlminhtl> cmr: thanks :)
[21:02:35] <mimcpher> though it's not a huge deal when you don't have subtyping
[21:03:18] *** Quits: Jackneill (Jackneill@moz-805F9566.pool.digikabel.hu) (Input/output error)
[21:05:18] <nlminhtl> cmr: another question, why must "mod module_name;" be after "use" commands?
[21:05:49] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[21:05:52] <cmr> nlminhtl: because `mod` would shadow `use`. It's in the order that shadowing happens. I agree it's weird, but there is good reason for it.
[21:05:53] <bstrie> nlminhtl: turn back, if you value your sanity
[21:06:03] <nlminhtl> it looks not very logic, because first of all I must import a module, then try to use them, don't I?
[21:06:17] <cmr> That's not how the compiler looks at it though.
[21:06:32] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[21:06:58] <cmr> It *could* be changed so that the order of mod and use is significant (ie, `mod foo; use foo = bar;`, foo is bar, not the module), but it would add significant complexity.
[21:07:38] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:07:54] *** Joins: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP)
[21:10:30] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[21:12:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:12:33] *** Joins: kirneh (kirneh@moz-ACBB9422.k955.webspeed.dk)
[21:12:43] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:14:24] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[21:14:42] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[21:16:30] *** Joins: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net)
[21:17:08] <edorian> In extra/stats is a note, which says it could be rewritten from f64 to num::Num. Is anyone already working on that? 
[21:17:13] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:17:17] <edorian> Would it make sense to do so?
[21:18:16] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:18:17] *** Quits: yuriks (yuriks@7B62483E.B0933AA2.748B6D8D.IP) (Connection reset by peer)
[21:19:52] *** pmoore is now known as pmoore|away
[21:19:56] <cmr> edorian: I think it would make sense; then it could be used with some hypothetical more precise bignum.
[21:22:42] <eddyb9> FixedFloat<1024> would be interesting to see
[21:22:48] <edorian> ok 
[21:22:59] *** Joins: yuriks (yuriks@21CAA321.88B480FC.748B6D8D.IP)
[21:23:05] <edorian> thanks
[21:23:49] *** Quits: joelteon (bzzt@moz-317E8D0C.io) (Ping timeout)
[21:24:41] *** pmoore|away is now known as pmoore
[21:24:48] <eddyb9> I don't know what metaphor to use... we dream of these fancy upgrades to the type system/syntax, but who will be the hero and implement them?
[21:24:51] *** Quits: josh (josh@moz-3A704FC8.mpls.qwest.net) (Quit: josh)
[21:25:16] *** Quits: bholley (anonymous@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:26:29] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[21:27:44] *** Quits: jakedust (Jake@moz-9CC82466.dsl.telesp.net.br) (Quit: jakedust)
[21:29:15] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:29:16] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[21:29:25] *** Quits: lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[21:29:54] <Jesse> lkuper: https://twitter.com/rufuse/status/399818994569338880 :D
[21:29:59] *** Joins: joelteon (bzzt@moz-317E8D0C.io)
[21:31:23] <SiegeLord> lol
[21:32:10] <SiegeLord> The 666 takes the cake
[21:32:25] *** Quits: Ms2ger (Ms2ger@45E56866.3CF91143.187A1082.IP) (Quit: nn)
[21:32:58] *** Quits: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[21:32:59] *** Quits: fabiand (fabiand@moz-5886F520.adsl.alicedsl.de) (Quit: Verlassend)
[21:34:21] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[21:36:04] <wycats_> https://twitter.com/wycats/status/400013441588424704
[21:36:06] <wycats_> :P
[21:36:41] <bstrie> wycats_: I don't think that's fair, I can think of a dozen languages with weirder syntax :)
[21:37:10] <wycats_> all new languages have weird syntax
[21:37:19] <wycats_> hopefully you're doing something interesting that pays for it
[21:37:47] <eddyb9> I can't see that character on my phone :(
[21:38:00] <wycats_> it's a nuclear (x) symbol
[21:38:29] <eddyb9> hehe
[21:39:03] <cmr> IMO the only thing weird about Rust's syntax is ~ and lifetimes ('a), and that paths need a :: before type parameters.
[21:39:52] *** pmoore is now known as pmoore|away
[21:40:00] <cmr> (Ignoring @ because it's near-irrelevant)
[21:40:18] <eddyb9> (that last one can be solved for most cases, where it's unambiguous)
[21:40:47] <eddyb9> but not without parser hacks, and we all know how lovely those are
[21:41:24] <Jesse> wycats_: i thought that was a reply to https://twitter.com/xlerb/status/400009860064235520 when i read it
[21:42:28] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[21:43:04] <sp3d> speaking of syntax, what's planned w/r/t "::<for Foo>"?
[21:43:30] <cmr> sp3d: it will come
[21:44:01] <sp3d> will 1.0 support "Foo::traitMethod()" or just "Trait::<for Foo>::traitMethod()"?
[21:44:33] *** Quits: vmx (vmx@moz-4924F1CE.pools.arcor-ip.net) (Quit: Leaving)
[21:44:37] <cmr> sp3d: <for Foo> doesn't replace type inference, it just lets you specify the type.
[21:44:49] <cmr> The only way to specify the "for" atm is inference.
[21:46:24] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[21:47:55] <eddyb9> if we don't allow taking the value of function-like type ctors, then I think most (if not all) places ::<> is now used could drop the ::
[21:48:47] <bjz> sp3d: there are some who are deeply opposed to the `Foo::traitMethod()` syntax. It does cause some issues in more complex use cases. See https://github.com/mozilla/rust/issues/8888 and https://github.com/mozilla/rust/issues/6894
[21:48:52] <eddyb9> but some people are almost religious (with good arguments) against going the same path C++ went
[21:50:38] <bjz> eddyb9: do you mean like Trait::foo is fn(...) -> ... ?
[21:50:44] *** Quits: sweet_kid (Upasana@A70B8495.8CACE31E.388CF16F.IP) (Quit: Leaving)
[21:51:18] *** Quits: sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Client exited)
[21:51:32] <bjz> ie. let f: fn(...) -> ... = Trait::foo
[21:52:23] *** Joins: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net)
[21:52:27] *** Joins: sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[21:53:10] <bjz> or say, struct X; impl<..> Apply<..> for X { ... } let f: fn
[21:53:16] <bjz> woops
[21:53:25] <bjz> or say, struct X; impl<..> Apply<..> for X { ... } let f: fn(..) -> .. = X;
[21:53:39] *** Quits: edorian (Mibbit@moz-A483048A.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[21:54:31] *** Quits: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[21:54:33] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:56:19] *** jorendorff is now known as jorendorff_away
[21:56:19] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Broken pipe)
[21:56:40] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:57:19] *** Joins: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:57:19] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Connection reset by peer)
[21:58:17] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:58:30] *** Quits: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[21:58:33] *** Quits: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[21:58:47] <wycats_> Jesse: ha
[21:58:51] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:59:01] <wycats_> Jesse: yeah... honestly, for what Rust is trying to do I'm not too bothered by syntax
[21:59:14] <wycats_> although I wouldn't mind seeing ~ replaced with * (which I heard has been discussed)
[22:00:20] <cmr> wycats_: what about raw pointers?
[22:00:36] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[22:00:36] <wycats_> cmr: UnsafePtr<T> is fine for usafe code
[22:00:38] <Jesse> raw pointers become ☢foo of course
[22:00:44] <wycats_> discourage unsafe code!
[22:01:00] *** jorendorff_away is now known as jorendorff
[22:01:04] <mimcpher> Jesse++
[22:01:05] <cmr> myname: I think Uniq<T> is fine for safe code
[22:01:24] <wycats_> nah ;)
[22:01:29] <wycats_> people should write less unsafe code
[22:01:32] <wycats_> especially over time
[22:01:37] *** Quits: zombie_ (chatzilla@moz-C8F1442C.dynamic.isp.telekom.rs) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131107161719])
[22:01:43] <wycats_> don't waste available ASCII characters on unsafe code
[22:01:46] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[22:01:50] <wycats_> </uninformed-opinion>
[22:01:53] <cmr> ~ should also be discouraged.
[22:01:55] <cmr> Heavily
[22:02:36] <cmr> If your code has a ~T in it, and you're not writing a data structure, it's probably not idiomatic.
[22:03:10] <wycats_> cmr: I agree
[22:03:14] <wycats_> at least, so it seems
[22:03:24] <wycats_> it seems to me that you need ~T for tasks and data structures
[22:03:34] <wycats_> but I see ~ ints all the time in example code
[22:03:37] <wycats_> which seems weird to me
[22:03:39] <cmr> Where?
[22:03:46] <wycats_> dherman: cough
[22:04:05] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Client exited)
[22:04:27] <Jesse> example code that demonstrates how pointers work? or general "here's how you do X in rust" example code?
[22:04:34] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[22:04:58] <wycats_> the former
[22:05:03] <wycats_> but that doesn't really help
[22:05:10] <wycats_> because as a noob I can't really tell the difference
[22:05:19] <wycats_> let x: ~int = ~22;
[22:05:26] <wycats_> move_to(x);
[22:05:31] <wycats_> println!("{:d}", *x); // type error
[22:05:43] <wycats_> I can see why you would use ~int there
[22:06:05] <wycats_> but having examples of ~int in the wild (especially in people's first interactions with Rust) make in non-obvious that it's a somewhat rare feature
[22:06:30] <wycats_> you need ~ for all data structures whose size is not known ahead of time, right?
[22:06:33] <wycats_> even vectors?
[22:06:43] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[22:06:49] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:06:52] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[22:06:55] <Jesse> needs more alloca
[22:06:55] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:06:58] <cmr> No, only for trees and recursive types.
[22:07:16] <wycats_> cmr: say more
[22:07:33] <lkuper> Jesse: good ol' issue 666
[22:07:50] <wycats_> btw: thanks to everyone for not flipping the bozo bit on me yet :)
[22:07:59] <wycats_> this is a very friendly IRC room, as language rooms go
[22:07:59] <dherman> wycats_: sorry, omw out the door
[22:08:07] <wycats_> dherman: don't worry
[22:08:08] <cmr> wycats_: enum List<T> { Nil, Cons(List<T>) }
[22:08:20] <cmr> wycats_: invalid, infinitely sized (because it recursively includes T)
[22:08:21] <lkuper> wycats_: we aim to keep it that way
[22:08:25] <wycats_> cmr: why doesn't it end up being true for vectors?
[22:08:25] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[22:08:32] <cmr> But enum List<T> { Nil, Cons(~List<T>) } is perfectly valid.
[22:08:40] <cmr> wycats_: You can write a vector without ~
[22:08:41] <wycats_> don't stack-allocated things need to know their size ahead of time?
[22:08:49] <cmr> They do, yes.
[22:09:01] <wycats_> so fixed-size vectors only?
[22:09:12] <cmr> You can't write a vector *safely*, even with ~
[22:09:22] <pnkfelix> cmr: ?
[22:09:28] <pnkfelix> cmr: Are we talking about implementing vec
[22:09:31] <cmr> pnkfelix: yes
[22:09:33] <pnkfelix> cmr: Or *using* ~[T] ?
[22:09:46] <cmr> Using ~[T] is entirely different, and it uses a lot of unsafe code in its implementation :P
[22:09:48] <pnkfelix> cmr: I cannot tell from wycats_ questions whether that is what he is asking you
[22:09:57] * erickt proposes renaming the borrow checker to the arg checker. Can anyone think of a clever way to do this? https://gist.github.com/erickt/7421353
[22:10:04] <wycats_> let me try again :)
[22:10:16] <wycats_> if you have a growable vector data structure
[22:10:18] <erickt> it's complaining about reborrowing `&mut D` on line 58
[22:10:21] <wycats_> does it require ~?
[22:10:37] <wycats_> my noobish thinking is yes, since you don't know its size ahead of time
[22:10:42] <cmr> wycats_: No, and it's not possible to implement with just ~
[22:10:44] <cmr> ~T is fixed size.
[22:10:50] <cmr> And the thing it points to is also fixed size
[22:10:55] <wycats_> interesting
[22:11:00] <cmr> (Until we get DST, at least, but that makes things a lot more complex)
[22:11:02] <wycats_> so what do you have to do to point to a growable Array?
[22:11:05] <wycats_> vector*
[22:11:06] <pnkfelix> wycats_: Are you asking about using the builtin ~[T], or implementing a new vector data structure on top of it?
[22:11:24] <cmr> wycats_: Something like https://github.com/thestinger/rust-core/blob/master/core/vec.rs
[22:11:31] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[22:11:52] <pnkfelix> wycats_: (or implementing a new vector data structure *not* on top of ~[T], rather)
[22:11:53] <wycats_> how do you allocate one of those?
[22:11:57] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:12:25] <wycats_> this is a nice small impl :)
[22:12:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:12:29] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:12:29] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[22:12:30] <cmr> wycats_: the type param A is the allocator, rust-core uses that to allocate the memory
[22:12:30] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:12:55] *** Quits: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP) (Quit: dherman)
[22:13:07] <cmr> wycats_: you should answer pnkfelix's questions :P
[22:13:19] <wycats_> cmr: sorry
[22:13:26] <wycats_> pnkfelix: sorry
[22:13:33] <wycats_> pnkfelix: I missed them sandwiched in between other stuff
[22:13:59] <wycats_> pnkfelix: I'm asking generally about what kind of pointer points at a growable vector data structure
[22:14:02] <wycats_> once one is written
[22:14:49] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:15:00] <cmr> wycats_: usually you just use ~[T], which is a growable vector.
[22:15:20] <cmr> But it's *not* like other ~T
[22:15:33] <pnkfelix> wycats_: The problem here is that (some) people are decrying the use of `~`
[22:15:42] *** Joins: Kingsley (kingsley@BBD66DE2.61F456DA.3655BBF5.IP)
[22:16:01] <pnkfelix> wycats_: without always being clear about what kind of T in the `~T` they are talking about
[22:16:01] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:16:09] <pnkfelix> wycats_: which can make these conversations a little hard to follow
[22:16:11] <wycats_> pnkfelix: yes, that is a problem
[22:16:36] <wycats_> pnkfelix: my original question was something like "you need ~ for growable vectors, right" (in response to decrying ~)
[22:16:42] <pnkfelix> (most of us have been guilty of this; I'm not pointing fingers, just trying to point out the problem)
[22:16:48] <cmr> I think it's an important part of Rust's data model where ~ is absolutely required, and where it's just desirable.
[22:17:06] <cmr> s/where/to know where/
[22:17:34] <eddyb9> wycats_: rust-core's Vec (which you were linked to) uses direct heap allocation, no ~
[22:18:10] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[22:18:15] <cmr> s/of Rust/of understanding Rust/
[22:18:32] <wycats_> so what's going on with ~[T]
[22:18:36] <wycats_> which people keep mentioning
[22:18:48] <eddyb9> there's two main ways of doing it
[22:19:07] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[22:19:07] *** ChanServ sets mode: +o tjc
[22:19:18] <eddyb9> either a pointer to a variable-sized allocation on heap, with a two-word header
[22:19:31] <eddyb9> (the way it works right now in rust)
[22:19:35] <cmr> ~[T] is a pointer to https://github.com/mozilla/rust/blob/master/src/libstd/unstable/raw.rs#L24
[22:20:37] <cmr> Where 'data' represents 'alloc' elements of allocated memory, of which 'fill' are valid.
[22:21:07] *** Joins: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net)
[22:21:47] <wycats_> right... so my assumption is that you would need to do this (as opposed to stack-allocate) because of the variable size
[22:21:52] <wycats_> s/is/was/
[22:21:58] <cmr> wycats_: yes.
[22:21:59] <wycats_> I must have gotten something subtle wrong
[22:22:12] <eddyb9> or strcat's proposal, which you can see in Vec - the two words and a pointer to the variable-sized allocation, all 3 words being passed by value (which makes me wonder if there's a problem there, with copying)
[22:22:12] <cmr> It's not using ~ at all, is where you got it wrong :p
[22:22:27] <wycats_> so my original mental model was "you need ~ for variable-sized data structures or when using tasks"
[22:22:34] <cmr> eddyb9: the microbenchmarks say no
[22:22:39] <wycats_> cmr: what is going on
[22:22:44] <wycats_> how is ~[T] not using ~
[22:22:49] <eddyb9> cmr: for?
[22:23:03] * wycats_ is getting slowly more confused
[22:23:08] <cmr> wycats_: Look at the link to raw.rs, do you see a ~ anywhere?
[22:23:09] <eddyb9> wycats_: it is using the same allocation method
[22:23:37] <Leo`> cmr: you mean, when you pass a ~[T], you do a copy of a Vec<T> ?
[22:23:41] <cmr> eddyb9: for the proposed Vec representation (they say that there isn't a problem with copying)
[22:23:45] <kimundi> I think you are making the distinction worse than it is
[22:23:56] <wycats_> cmr: I don't see a ~ but don't you have to allocate Vec<T> with ~?
[22:24:09] <wycats_> you can't stack-allocate Vec<T> can you?
[22:24:14] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:24:21] *** Joins: nejucomo (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:24:34] <eddyb9> ~[T] and Vec are different
[22:24:36] <cmr> wycats_: It actually uses a different allocator than ~
[22:24:46] <cmr> wycats_: the allocator it uses is a language item (configurable0
[22:25:17] <eddyb9> it's the same allocator, isn't it? heap closures use a different one, though, AFAIK
[22:25:20] <wycats_> eddyb9: "cmr> ~[T] is a pointer to https://github.com/mozilla/rust/blob/master/src/libstd/unstable/raw.rs#L24"
[22:25:40] <wycats_> eddyb9: cmr seems to be saying that ~[T] is a pointer to Vec<T>?
[22:25:49] <eddyb9> wycats_: is that named Vec as well? (sorry, can't really open that on the phone)
[22:25:55] <cmr> eddyb9: yes
[22:26:01] <wycats_> pub struct Vec<T>
[22:26:02] <cmr> wycats_: hang on a sec, double checking something
[22:26:10] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[22:26:12] <cmr> Ok, sorry.
[22:26:34] <eddyb9> bah. every time I said Vec I meant the new proposed implementation, in rust-core
[22:26:37] <cmr> wycats_: Yes, it is allocated with ~, but that's just an implementation detail. Type-wise, it's just unsafe code.
[22:27:03] <wycats_> cmr: is it possible to stack-allocate [T]?
[22:27:18] <pnkfelix> wycats_: No.  see e.g. https://github.com/mozilla/rust/issues/6203
[22:27:23] <Leo`> [T] is not a type IIRC
[22:27:32] <eddyb9> only for fixed lengths. not yet for VLA
[22:27:37] <pnkfelix> wycats_: (we don't have alloca )
[22:27:45] <Leo`> ~[T] is not a pointer on [T], it's a type. [T] is not a type 
[22:27:51] <wycats_> ok... so it seems like my original mental model was correct?
[22:27:59] <wycats_> you need ~ for variable-sized data structures?
[22:28:07] <Leo`> I think so
[22:28:15] *** Quits: Kingsley (kingsley@BBD66DE2.61F456DA.3655BBF5.IP) (Ping timeout)
[22:28:27] <pnkfelix> wycats_: that or unsafe *T pointers
[22:28:30] <Leo`> cmr: do you confirm that Vec<T> is passed by-stack when you pass a ~[T] ?
[22:28:34] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:28:39] <eddyb9> cmr: and I meant I think there's a problem with copying Vec (being able to do it in the first place), but I now doubt you can do that
[22:28:40] <cmr> Leo`: no. a pointer to a Vec<T> is passed.
[22:28:43] <wycats_> pnkfelix: makes sense
[22:28:48] <pnkfelix> wycats_: Or I suppose ...
[22:28:53] <Leo`> cmr: oh.
[22:29:05] <wycats_> pnkfelix: so the main use-cases are variable-sized data structures and pointers passed to tasks
[22:29:06] <pnkfelix> wycats_: There may be a way to use arena-based allocation with &'a pointers, not sure
[22:29:12] <Leo`> cmr: but how is the Vec<T> allocated then ?
[22:29:19] <cmr> Leo`: compiler magic
[22:29:20] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[22:29:20] *** ChanServ sets mode: +o tjc
[22:29:26] <Leo`> :]
[22:29:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:30:00] *** Joins: Kingsley (kingsley@BBD66DE2.61F456DA.3655BBF5.IP)
[22:30:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:30:26] <cmr> pnkfelix: How do you implement a variable-sized data structure with ~? Is there something I've been missing this whole time?
[22:30:36] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:30:59] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:31:04] <wycats_> you use ~ to point to the variable-sized structure on the heap, no?
[22:31:16] <pnkfelix> cmr: What?  ~[T] is variable sized. 
[22:31:20] <pnkfelix> lets try this
[22:31:28] <cmr> ~[T] is sure, but it's not a ~T
[22:31:33] <pnkfelix> wycats_: Could you do me a favor and try not saying `~`
[22:31:36] <pnkfelix> wycats_: and instead
[22:31:47] <eddyb9> this is needlessly confusing. good night
[22:31:47] <pnkfelix> wycats_: always say either `~T` or `~[T]` ?
[22:31:54] <wycats_> pnkfelix: absolutely
[22:31:58] <cmr> :p
[22:32:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:32:08] <pnkfelix> I don't know if it will help
[22:32:09] *** Quits: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP) (Quit: Leaving)
[22:32:14] <wycats_> "this is needlessly confusing" :(
[22:32:16] <pnkfelix> but I figure it is worth a shot
[22:32:26] <wycats_> pnkfelix: I probably don't understand the distinction well enough
[22:32:33] <Leo`> taht being said, even if they don't share allocation method, the have in common the fact that they are own
[22:32:36] <Leo`> concerning the borrowing rules
[22:32:38] <cmr> pnkfelix: ~[T] is variable sized, but it's not implemented with ~
[22:32:39] <Leo`> right ?
[22:32:40] <Leo`> that*
[22:32:43] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[22:32:47] <wycats_> ~T is a pointer to T, ~[T] is a pointer to a vector of T?
[22:32:53] <cmr> wycats_: atm yes
[22:33:10] <pnkfelix> cmr: that's why I'm asking wycats_ to stop saying `~` without including a suffix.  Even if he doesn't understand what it means yet.
[22:33:26] <cmr> Mm
[22:33:34] <kimundi> I'm confused by the confusion here :P According to the DST plans, the ~ in ~T for T: Sized and ~[T] is identical, it just has a different memory representation, which just happens to be seen as a seperate Vec type if you want.
[22:33:34] <wycats_> ok... should you use ~T for variable-sized data structures?
[22:33:38] <cmr> I think *I'm* getting confused now
[22:33:56] <cmr> wycats_: It is impossible to use ~T for variable-sized data structures. Do you have an example in mind that you think would work?
[22:34:09] <wycats_> a node in a linked list?
[22:34:18] <cmr> The node is fixed size :)
[22:34:36] <wycats_> my thinking/language are not precise enough
[22:34:43] <pnkfelix> kimundi: TBH I'm just trying to make sense out of the various things I see flying by.
[22:35:11] <cmr> You can implement a linked list with ~T yes, my earlier List<T> example is exactly that.
[22:35:12] <wycats_> I'm not talking about the allocator, I think, but instead the language semantics
[22:35:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:35:34] <wycats_> the allocator seems like it may be an implementation detail?
[22:35:36] <cmr> But each node is still fixed-size, that's exactly why the ~T is needed (otherwise it would be infinitely-sized)
[22:35:37] <wycats_> or not?
[22:35:41] <cmr> wycats_: It is
[22:35:47] <Leo`> I think I agree with wycats_ 
[22:35:54] <kimundi> wycats_: ~ is used to own a value through a handle that has a fixed size. (Usually 1 word)
[22:36:02] *** Joins: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP)
[22:36:03] *** ChanServ sets mode: +ao dherman dherman
[22:36:05] <Leo`> concerning move and borrowing semantics, ~[T] behave just like ~T
[22:36:14] *** Quits: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP) (Quit: dherman)
[22:36:15] <wycats_> Leo`: that's what I was trying to sort out
[22:36:22] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[22:36:22] <wycats_> although the other question seems useful too :)
[22:36:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:36:36] <Leo`> kimundi: with ~[T] you own the vector, even if it has a variable size
[22:36:49] <Leo`> wycats_: yeah
[22:36:54] <kimundi> Leo`: The handle still has a fixed size
[22:37:02] <Leo`> kimundi: well yeah
[22:37:05] <Leo`> but i'm still curious
[22:37:06] <wycats_> what I am trying to work out is: if you start learning Rust you can get away with rarely needing ~T *or* ~[T]... so when does it come up?
[22:37:11] <Leo`> to know how the handle is allocated and passed by
[22:37:22] <wycats_> and it seems like the answer is: "if you need data structures with variable sizes or if you want to use tasks"
[22:37:34] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[22:37:41] <Leo`> huh I don't know I use ~T or ~[T] very often :o
[22:37:41] <pnkfelix> wycats_: When you say "data structures with variable sizes"
[22:37:57] <wycats_> I mean either a growable vector, or a tree, or a linked list
[22:38:01] <pnkfelix> wycats_: do you mean "a data structure to represent an abstract value of dynamically determined size"
[22:38:01] <wycats_> that kind of thing
[22:38:10] <wycats_> pnkfelix: yes, I think so
[22:38:23] <wycats_> as opposed to a struct whose members are all fixed sizes (ints, for example)
[22:38:27] <kimundi> wycats_: ~ is needed for two things exactly: Defining data structures that can contain themself, and pointing to dynamically sized values like a vector on the heap
[22:38:27] <pnkfelix> wycats_: or do you mean "a data structure that will require a continguous block of memory (bytes/words) of dynamically determined size"
[22:38:46] <kimundi> wycats_: Tasks don't even need ~
[22:38:48] <Leo`> (I just noticed channel operators looked like managed boxes with the @ before their nickname)
[22:38:52] <wycats_> pnkfelix: I think I mean both of those things
[22:39:01] <pnkfelix> wycats_: There is a big distinction between them,
[22:39:08] <wycats_> pnkfelix: enlighten me!
[22:39:24] <wycats_> vectors and strings are the latter
[22:39:29] <pnkfelix> wycats_: A linked-list in Lisp is a fixed size enum.  A List-Of-Int of one of: Nil or Cons(Int, List-Of-Int)
[22:39:30] <wycats_> links lists and trees are the form
[22:39:32] <wycats_> right?
[22:39:34] <kimundi> Both usecases: enum List{ Nil, Cons(T, ~List) } and ~[T] :P
[22:39:38] <wycats_> former*
[22:40:31] <pnkfelix> wycats_: So a linked-list is made up of individually allocated nodes, each of predetermined (statically known size: one or two words each).  But the *abstraction* represents a list of indeterminite size.
[22:40:42] <wycats_> right
[22:40:56] <wycats_> but in both cases, the fact that the total size isn't known ahead of time makes stack allocation impossible
[22:41:04] <wycats_> even though the reason for that unknown size is different
[22:41:05] <wycats_> right?
[22:41:14] <cmr> wycats_: stack allocation is possible, though
[22:41:36] <wycats_> possible in theory via alloca?
[22:41:38] <wycats_> or possible in rust?
[22:41:38] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[22:41:46] <cmr> Possible in Rust
[22:41:48] <pnkfelix> wycats_: Well, as a matter of argument, If you recursively build up the list, then you can allocate each node on the stack, I think.  Not that this is a good idea.
[22:41:57] <wycats_> cmr: say more
[22:41:57] <cmr> It requires as unsafe code, to do efficiently.
[22:42:00] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[22:42:06] <cmr> wycats_: I need to run, but I'll come back with working code :)
[22:42:19] <wycats_> cmr: once again, apologies for being obtuse/a noob
[22:42:20] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[22:42:31] *** Joins: abnrngr (user@C31B7093.A9FCDC29.B3C843D.IP)
[22:42:49] <pnkfelix> wycats_: (though to be honest you'd have to use some ugly contiuation-passing-style code to do what I suggest.  It would not be idiomatic rust, and I'm probably going to get yelled at for even mentioning it.)
[22:42:51] <wycats_> pnkfelix: so in principle you can allocate recursive structures on the stack, but you shouldn't?
[22:43:02] *** Joins: bholley (anonymous@moz-BBE3ABD.mv.mozilla.com)
[22:43:05] <wycats_> http://stackoverflow.com/questions/1018853/why-is-alloca-not-considered-good-practice <= similar reasons as this?
[22:44:01] <pnkfelix> wycats_: The alloca issues are different; the technique I was proposing wasn't using alloca.  Anyway, forgot i said anything about it.
[22:44:20] <wycats_> pnkfelix: if I forget, I will probably find myself having this same confusing conversation again :)
[22:44:48] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[22:45:03] <wycats_> pnkfelix: thanks for humoring me
[22:47:04] <kimundi> wycats_: Are there still confusions right now on your side? :)
[22:47:53] <Leo`> kimundi: the only confusion for me is how the Vec<T> (which is just a handle if I understood) is allocated and passed aroung
[22:47:55] <Leo`> around*
[22:48:11] <kimundi> Leo`: Which Vec<T> ?
[22:48:30] <Leo`> the one used by ~[T]
[22:48:35] <kimundi> sec
[22:49:14] <wycats_> kimundi: I think my mental model right now will work
[22:49:17] <wycats_> we'll see
[22:49:23] *** Quits: Kingsley (kingsley@BBD66DE2.61F456DA.3655BBF5.IP) (Quit: Leaving.)
[22:49:37] <wycats_> now I'm having issues importing the generated protobuf files: note: add #[feature(globs)] to the crate attributes to enable
[22:49:42] <wycats_> but it's a generated file
[22:50:02] <Leo`> generated by what ?
[22:50:11] <wycats_> https://github.com/stepancheg/rust-protobuf
[22:50:12] <pnkfelix> Leo`: Have you read this before? http://smallcultfollowing.com/babysteps/blog/2013/04/30/dynamically-sized-types/
[22:50:24] <wycats_> which was synced with rust master 4 days ago
[22:50:30] <pnkfelix> Leo`: If not then it might help fill in some of the blanks.
[22:51:06] <Leo`> wycats_: this is weird. globs have been feature-gated in master quite a long time ago now :o
[22:51:07] <pnkfelix> Leo`: (At least, it might if you already know C++ syntax…)
[22:51:16] <Leo`> okay pnkfelix i'll have a look at it
[22:51:28] <wycats_> can you enable the feature outside of the file that uses it?
[22:51:36] <wycats_> maybe it's expecting that?
[22:51:43] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Input/output error)
[22:51:47] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[22:51:51] <Leo`> wycats_: yeah
[22:51:59] <Leo`> wycats_: all feature enabling must be done at the crate root
[22:52:10] <wycats_> I tried adding #[feature(globs)] to my main.rs
[22:52:26] <Leo`> mh
[22:52:56] <wycats_> my directory structure is libname/{main,client_v1}.rs
[22:53:08] <Leo`> wycats_: add a ; after the #[feature] thing
[22:53:09] <wycats_> where client_v1 is the generated file
[22:53:27] <wycats_> "expected item but found ;"
[22:53:35] <Leo`> huh...
[22:53:47] <Leo`> ...
[22:53:50] <ofeldt> wycats_, what'cha porting?
[22:53:53] <Leo`> mh.
[22:54:09] <wycats_> ofeldt: ?
[22:54:19] <Leo`> maybe this has changed since I compiled master but it works here 
[22:54:26] <Leo`> #[feature(globs)];
[22:54:29] <wycats_> I'm probably just structured wrong
[22:54:41] <ofeldt> wycats_, you said you're porting a ruby gem/lib.
[22:54:48] <wycats_> ofeldt: ah yeah
[22:54:55] <wycats_> ofeldt: skylight's ruby agent
[22:55:02] <wycats_> https://www.skylight.io
[22:55:03] <Leo`> oh wait wycats_ 
[22:55:03] <pnkfelix> Leo`: what does "mh" stand for?
[22:55:10] <wycats_> backwards hm? :p
[22:55:18] <Leo`> place it to the very top of your main file
[22:55:26] <Leo`> pnkfelix: french for hm I guess
[22:55:31] <pnkfelix> alors
[22:55:47] <Leo`> alors quoi ? :p
[22:55:56] <wycats_> on top with a semicolon seems to have worked
[22:56:04] <Leo`> wycats_: yep
[22:56:11] <wycats_> now I need to figure out how to get the protobuf runtime
[22:56:26] *** Quits: g3orge (g3orge@moz-369F78A7.access.hol.gr) (Quit: leaving)
[22:56:32] <Leo`> wycats_: I think #[attribute] without a ; applies to the next item declartion, fn, struct, impl, whatever
[22:56:48] <wycats_> interesting makes sense
[22:56:49] <Leo`> wycats_: #[feature]; is a bit special
[22:56:54] <wycats_> "special"
[22:57:03] <Leo`> there are others like it
[22:57:11] <Leo`> but I mean they are not applied to a particular item
[22:57:15] <Leo`> they are global to the crate
[22:57:23] <Leo`> or at least that's the way I understood it
[22:57:43] <wycats_> where do I put https://github.com/stepancheg/rust-protobuf in my project?
[22:57:54] <wycats_> the generated files use use protobuf
[22:59:28] <Leo`> do you have a compiled lib or something ?
[22:59:37] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:59:45] <Leo`> if this is the case, you must add an "extern mod protobuf" at your crate root
[22:59:47] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:00:13] <wycats_> Leo`: I just have the repo
[23:00:24] *** Joins: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP)
[23:00:25] <Leo`> well let me see
[23:00:43] <wycats_> I've tried rustpkg install github.com/stepancheg/rust-protobuf
[23:00:58] <wycats_> task '<unnamed>' failed at 'Unhandled condition: nonexistent_package: (package_id::PkgId{path: std::path::posix::Path{repr: ~[103u8, 105u8, 116u8, 104u8, 117u8, 98u8, 46u8, 99u8, 111u8, 109u8, 47u8, 115u8, 116u8, 101u8, 112u8, 97u8, 110u8, 99u8, 104u8, 101u8, 103u8, 47u8, 114u8, 117u8, 115u8, 116u8, 45u8, 112u8, 114u8, 111u8, 116u8, 111u8, 98u8, 117u8,
[23:00:58] <wycats_> 102u8], sepidx: Some(21u)}, short_name: ~"rust-protobuf", version: NoVersion}, ~"supplied path for package dir does not exist, and couldn't interpret it as a URL fragment")', /home/wycats/Code/rust/src/libstd/condition.rs:131
[23:01:00] <ofeldt> wycats_, ahh, skylight - monitoring for the fortunate ones ;)
[23:01:03] <wycats_> ^^ result
[23:01:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:01:08] <wycats_> ofeldt: lol
[23:01:14] <wycats_> you mean the fact that it's private beta?
[23:01:18] <ofeldt> yeah ;)
[23:01:31] <wycats_> ofeldt: we're hoping to get out of private beta early next year
[23:01:36] <wycats_> or at least drain the signup queue
[23:01:54] <Leo`> wycats_: if you run rustc lib/protobuf.rs
[23:02:06] <wycats_> carllerche is almost done converting the backend to Storm for stream processing
[23:02:11] <Leo`> it will generate a libprotobuf-blblblbl.dylib
[23:02:15] <Leo`> or .so depending on your OS
[23:02:33] <Leo`> then you just have to extern mod protobuf; in your crate
[23:02:49] <Leo`> +add
[23:02:50] <wycats_> where do I put the .so?
[23:02:56] <Leo`> depends
[23:03:06] <Leo`> I don't remember the default search path
[23:03:11] <Leo`> but you can specify it
[23:03:20] <Leo`> with #[link_args] or something like that
[23:03:39] <wycats_> ofeldt: I up-prioritized investigating Rust for the agent after spending a week fighting with Ruby memory allocation ;)
[23:03:54] <Leo`> wycats_: If you compile your crate with rustpkg, you should place the .so in lib/
[23:03:57] <wycats_> hm
[23:04:14] <wycats_> Leo`: alongside lib/mypkg?
[23:04:20] <Leo`> in <your project>/lib/
[23:04:37] <Leo`> where <your project> is the folder in which you run Rustpkg
[23:04:47] <Leo`> and in which you should have src/yourcode
[23:04:54] <wycats_> so alongside src
[23:05:09] <Leo`> lib/ alongside src/ yep
[23:05:44] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[23:05:44] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:06:04] <wycats_> now I get:
[23:06:04] <wycats_> task '<unnamed>' failed at 'Unhandled condition: nonexistent_package: (package_id::PkgId{path: std::path::posix::Path{repr: ~[112u8, 114u8, 111u8, 116u8, 111u8, 98u8, 117u8, 102u8], sepidx: None}, short_name: ~"protobuf", version: NoVersion}, ~"supplied path for package dir does not exist, and couldn't interpret it as a URL fragment")',
[23:06:04] <wycats_> /home/wycats/Code/rust/src/libstd/condition.rs:131
[23:06:26] <wycats_> after adding the extern mod in my main.rs
[23:06:49] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:07:20] <sfackler> wycats_: it may be https://github.com/mozilla/rust/issues/9482
[23:07:44] <Leo`> wycats_: hum
[23:07:46] <sfackler> try doing "env TMPDIR=<SOME FOLDER ON THE SAME FILESYSTEM> rustpkg build"
[23:07:49] <Leo`> wycats_: well I don't know
[23:08:01] <wycats_> env TMPDIR=`pwd` ...?
[23:08:11] <Leo`> wycats_: what did you write exactly ?
[23:08:12] <sfackler> sure, but it'll fill that directory with a bunch of random folders
[23:08:26] <Leo`> extern mod protobuf; ?
[23:08:39] <wycats_> correct
[23:09:29] <wycats_> https://gist.github.com/165924bcb00c94a62418
[23:10:00] <Leo`> well I don't really know
[23:10:09] <wycats_> hm
[23:10:09] <Leo`> i never used rustpkg with precompiled libraries
[23:10:22] <wycats_> Leo`: should I just move the src dir into lib?
[23:10:22] <Leo`> I only used it when libraries where also compiled by Rustpkg
[23:10:28] <wycats_> or stop using rustpkg?
[23:10:33] <Leo`> and placed in build/something
[23:10:39] <Leo`> wycats_: no, leave the src where it is
[23:10:49] <Leo`> as a workaround, you may add a #[link_args]
[23:10:58] *** Quits: houzi (houzi@moz-4F6A1E26.getinternet.no) (Ping timeout)
[23:11:32] <wycats_> seems like there is also --link-args?
[23:12:00] <Leo`> https://github.com/LeoTestard/RustLex/blob/master/src/rustlex/regex.rs#L57
[23:12:02] <Leo`> see here for example
[23:12:14] <Leo`> you may add any linker flag here like -l or -L
[23:12:57] <ofeldt> wycats_, yeah i'm here because i thought about learning a typed language with bitching type-system. doing ruby for love and living, having had my share of dealing with high-iteration-count, and trying jruby for gaming, i finally came to the conclusion if i want to build something 3d-performant and memory efficent i have "to go deeper" ;)
[23:13:33] <wycats_> ofeldt: personally, I'm very impressed with the memory-safety goals of rust
[23:13:53] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:14:06] <wycats_> Leo`: hm
[23:14:10] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[23:14:16] <wycats_> who works on rustpkg?
[23:14:22] <sfackler> wycats_: tjc
[23:14:27] *** Quits: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net) (Quit: Leaving)
[23:14:29] <wycats_> tjc: you about?
[23:14:56] <tjc> wycats_: yes, what's up?
[23:15:12] <erickt> nmatsakis: ping
[23:15:15] *** Joins: paupau (posttext@moz-3F7DB997.hsd1.ca.comcast.net)
[23:15:22] <wycats_> tjc: just running into some issues using rustpkg to build a project that uses https://github.com/stepancheg/rust-protobuf
[23:15:27] * wycats_ shows his noob badge
[23:16:13] <tjc> wycats_: Ah… unless you've converted that package to use rustpkg, it probably won't build (at least not fully automatically)...
[23:16:24] <wycats_> tjc: I'm willing to do manual :)
[23:16:33] <wycats_> Leo` showed me how to get an .so
[23:16:34] <wycats_> which I did
[23:16:42] <wycats_> and moved it into lib/ alongside my src/
[23:16:48] <wycats_> then did rustpkg build mylib
[23:16:52] <wycats_> and got an error :)
[23:17:17] <wycats_> https://gist.github.com/wycats/165924bcb00c94a62418#file-foo-rs-L6
[23:17:38] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[23:17:38] *** ChanServ sets mode: +o pnkfelix
[23:17:45] <wycats_> task '<unnamed>' failed at 'Unhandled condition: nonexistent_package
[23:17:47] <tjc> wycats_: actually, that's a good point… I don't think rustpkg will work if it finds the library for something in the RUST_PATH but no sources...
[23:17:56] <wycats_> short_name is ~"protobuf"
[23:17:58] <tjc> so I think that's a bug in rustpkg; it should find libraries in the RUST_PATH even when sources are missing
[23:18:10] <tjc> wycats_: if you want to file this as an issue ( https://github.com/mozilla/rust/issues ) that would be great
[23:18:11] <wycats_> tjc: so what should I do?
[23:18:21] <wycats_> tjc: clone the repo into lib/?
[23:18:31] <wycats_> tjc: I can file an issue but I am not entirely sure what the bug is
[23:18:35] *** Quits: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net) (Quit: jeffdb)
[23:18:41] * wycats_ flashes his noob badge again
[23:18:44] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[23:18:44] <tjc> wycats_: the workaround is to manually pass an -L argument into rustc; or put the -L flag into an attribute in the code
[23:18:58] <wycats_> tjc: I'm not calling rustc directly
[23:19:00] <tjc> -L /path/to/protobuf (where that's replacement with wherever you put the protobuf library)
[23:19:05] <tjc> then you can use an attribute in the code
[23:19:23] <tjc> #[link_args = "-L /path/to/protobuf"]
[23:19:35] *** Joins: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net)
[23:19:48] <pnkfelix> bblum: ping
[23:19:50] <wycats_> tjc: https://github.com/mozilla/rust/issues/10430
[23:19:59] *** Joins: tikue (tikue_star@275DC78D.2ACBBF24.689607DE.IP)
[23:20:02] <ofeldt> wycats_, yap. i'm glad you not went c directly ;)
[23:20:06] <tjc> wycats_: Thanks!
[23:20:31] <wycats_> tjc: where do I pass the -L
[23:20:39] <wycats_> does rustpkg build allow link options?
[23:20:47] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[23:21:01] <wycats_> --link-args it looks like
[23:21:05] <tjc> wycats_: you just put it in the source code -- see src/librustuv/uvll.rs for an example (search for "link_args")
[23:21:08] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[23:21:11] <tjc> you don't need to pass a command-line flag at all
[23:21:29] <wycats_> tjc: I want other people to be able to work on this with me :/
[23:21:46] <tjc> wycats_: Yes, that's exactly why we allow putting attributes in the source
[23:22:10] <tjc> there are various places in the rust source code where it's used; you can grep for link_args in the tree to see all of them
[23:22:28] <wycats_> does the -L point to the src/ dir or the root of the package?
[23:23:21] <tjc> it should point to a directory containing the .so file that you want to link with
[23:23:27] <wycats_> ah ok
[23:23:47] <wycats_> but for some reason putting it in package/lib won't work? and that's the bug I filed?
[23:24:32] <tjc> the bug is that you shouldn't have to use link_args; you should be able to just put the workspace in your RUST_PATH even if the sources aren't there
[23:25:57] <wycats_> https://gist.github.com/wycats/7422491
[23:25:58] <wycats_> nada
[23:26:03] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0a1/20131110040205])
[23:26:16] <wycats_> still non-existent package
[23:27:16] *** Joins: sprocket (Mibbit@moz-B234C23B.rev.numericable.fr)
[23:27:28] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[23:27:46] <wycats_> https://gist.github.com/wycats/2a9ff4e0998159b9c33b
[23:29:52] *** Joins: twocoat (twocoat@moz-F9806A3F.stny.res.rr.com)
[23:30:54] <tjc> wycats_: can you do: RUST_LOG=rustc::metadata::csearch,rustc::metadata::loader,rustc::metadata::filesearch immediately followed by your command line...
[23:30:59] <tjc> and gist the results? (it may be a lot of output)
[23:31:18] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[23:31:48] <wycats_> it is not a lot of output
[23:33:04] <wycats_> https://gist.github.com/wycats/3474c1889d1a57af94fe
[23:34:40] <tjc> wycats_: what does rustpkg --version say?
[23:35:12] <wycats_> rustpkg 0.9-pre (63cfc99 2013-11-10 16:01:12 -0800)
[23:35:35] <wycats_> which rustpkg says it's in the location I compiled rust to this morning
[23:35:51] <twocoat> what is rust
[23:36:09] <Leo`> hello twocoat 
[23:36:15] <wycats_> what is going on here
[23:36:18] <tjc> wycats_: hmm, so that should have printed out a lot more output… at one point, we had debug messages disabled by default, but I don't think we do now
[23:36:20] <Leo`> Rust is a very cool programming language :p
[23:36:40] <tjc> acrichto: Do you know if debug! messages should show up with a current build even without configuring with ./configure --enable-debug?
[23:36:55] <acrichto> tjc: they should
[23:36:57] <twocoat> never heard of it.. what is it used for?
[23:36:58] <acrichto> unless you say --disable-debug
[23:37:11] <Leo`> twocoat: it's quite new, and still in development. :)
[23:37:34] <Leo`> it's intended to be used for systems programming, or for quite the same uses as C++, for example
[23:37:35] <wycats_> twocoat: Mozilla is using it to build an experimental browser named Servo
[23:37:35] <tjc> wycats_: Oh, I understand now. This is also a bug in rustpkg -- it should handle this case better, but it tries to do its own package searching first
[23:37:37] <nmatsakis> erickt: pong
[23:37:41] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:37:44] <wycats_> tjc: many bugs
[23:37:47] <tjc> before it calls rustc, so the link_args don't get looked at
[23:37:51] <tjc> Sorry, I just misled you
[23:37:51] <Leo`> but focuses on memory safety and concurrency, among other things
[23:37:58] <wycats_> tjc: no problem
[23:38:08] <tjc> I was thinking that rustpkg would just defer to rustc in this case, but of course, it fails if it can't find a dependency
[23:38:09] <wycats_> tjc: as long as you don't get frustrated and give up, I'm here :)
[23:38:26] <tjc> it deliberately doesn't accept -L as a command-line argument, because it's supposed to obviate the need for that :-)
[23:38:38] <tjc> so, unfortunately I have to recommend just using rustc directly here. Hate to do it, but… 
[23:38:41] <twocoat> nice is Servo in beta yet?
[23:38:48] <erickt> nmatsakis: hey there! I have a hopeless question to ask :) is there any way to write something like this? https://gist.github.com/erickt/7421353? Or do I need to wait until https://github.com/mozilla/rust/issues/6393 is done?
[23:38:49] <tjc> Well, unless you actually want to convert protobuf to build with rustpkg
[23:38:56] <wycats_> twocoat: no... it's still extremely experimental
[23:39:03] <wycats_> tjc: I am willing to do that if you can instruct me
[23:39:08] <wycats_> I will even submit a PR to them
[23:39:09] <erickt> nmatsakis: I'm guessing the answer is none :)
[23:39:31] <tjc> wycats_: that would be great. It looks like protobuf has some shell scripts for building it...
[23:39:46] <Leo`> wycats_: there's nothing more complicatied than building a regular binary crate
[23:39:49] <tjc> so the idea is to take a look at http://static.rust-lang.org/doc/master/tutorial-rustpkg.html and http://static.rust-lang.org/doc/master/rustpkg.html ...
[23:40:11] <Leo`> rustpkg infers your project is a lib my seeing lib.rs in the source folder
[23:40:16] <tjc> and translate whatever the scripts do into rustpkg. I'm not sure how the build actually works, but in the simplest case, it's just a matter of making a main.rs and lib.rs
[23:40:20] <nmatsakis> erickt: ps I haven't had any time for Rust today, so didn't look at that bug you filed yet
[23:40:26] <tjc> I mean, I'm not sure how the build for protobuf works
[23:40:34] <wycats_> tjc: it looks like it's mostly structured correctly already
[23:40:46] <erickt> nmatsakis: no problem, I'm in no rush :)
[23:40:51] <nmatsakis> erickt: well, one option is not to create any refs -- so you *could separate into two matches, still no fun
[23:40:54] <nmatsakis> erickt: 
[23:41:01] <nmatsakis> erickt: let me edit that gist to show you what I mean
[23:41:56] <wycats_> tjc: rustc lib/protobuf.rs is effective at generating the .so
[23:42:00] <wycats_> is that perhaps helpful?
[23:42:27] <nmatsakis> erickt: you know, I might have been mistaken marking that as a dup
[23:42:29] <wycats_> it looks like that's basically all the shell scripts are doing
[23:42:40] <nmatsakis> erickt: it is partially a dup, but the pattern is a bit more complex
[23:43:21] <tjc> wycats_: if you do "rustpkg install protobuf", and your RUST_PATH is set to the top-level directory of protobuf (so, a directory with a src/ subdirectory), what happens?
[23:43:25] <wycats_> I guess rustpkg is looking for a lib.rs?
[23:44:06] <nmatsakis> erickt: in particular, the way that gist is written, the lifetime of the returned value is linked to self, so that will just never type check the way you wrote it, I think, even if we fixed #6393
[23:44:09] <wycats_> nonexistent_package
[23:44:39] <tjc> wycats_: Can you gist the command you're typing and the output?
[23:44:41] <nmatsakis> erickt: I think you want the return type to be Option<Value<'self>>
[23:44:53] <nmatsakis> erickt: not Opton<Value<'a>> -- is that what you meant to write?
[23:45:11] <wycats_> https://gist.github.com/wycats/7b2ba96eed9c59f3475d/raw/c7f9dcfb2777df188503aef461e383910ab80376/gistfile1.txt
[23:46:30] <tjc> wycats_: for that to work, there has to be a directory called src/protobuf
[23:46:37] <tjc> in `pwd`
[23:46:39] <wycats_> right
[23:46:49] <wycats_> so how should I restructure this?
[23:46:50] <erickt> nmatsakis: I'll try that. I was trying to express that the return value of `.read()` may last a shorter lifetime than the Decoder. Maybe it wasn't necessary
[23:47:09] <wycats_> move everything into src/protobuf and rename src/lib/protobuf to src/protobuf/lib.rs?
[23:47:11] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[23:47:30] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[23:47:39] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:47:58] *** Quits: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com) (Quit: Leaving)
[23:48:11] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[23:48:39] <erickt> nmatsakis: heh, changing from `'a` to `'self` trips over https://github.com/mozilla/rust/issues/10391
[23:49:09] <nmatsakis> erickt: d'oh
[23:49:38] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:49:42] <nmatsakis> erickt: I'll see if I can spare a few minutes tonight to fix that, I suspect it's a simple fix :)
[23:49:56] <tjc> wycats_: That would be the simplest way, yeah
[23:50:07] <wycats_> tjc: lemme try it
[23:50:09] <erickt> nmatsakis: thanks!
[23:50:19] <twocoat> so what are you guys using to develop with
[23:50:35] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[23:51:42] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:52:00] <wycats_> tjc: hm... it seems like it's assuming they're all next to each other
[23:52:02] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:53:10] <tjc> wycats_: what error are you getting?
[23:54:24] <wycats_> tjc: I think I got it
[23:54:29] <wycats_> just had to restructure stuff
[23:54:31] <wycats_> nooooo
[23:54:42] <wycats_> need to move the optin for glob imports
[23:55:08] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:55:11] <wycats_> hm no... it's in lib.rs
[23:55:22] <wycats_> but rustpkg isn't picking it up?
[23:56:11] <wycats_> hm it's coming from test.rs
[23:56:14] <wycats_> is test.rs special?
[23:57:30] <wycats_> hm.... no... it was just handled differently before
[23:57:32] <wycats_> I think I got it?
[23:58:03] <tjc> great!
[23:58:23] <wycats_> where did the .so go?
[23:58:39] *** Quits: paupau (posttext@moz-3F7DB997.hsd1.ca.comcast.net) (Ping timeout)
[23:58:52] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:59:07] <wycats_> dammit it still doesn't find protobuf in my other project
[23:59:19] <wycats_> despite rustpkg build having completed without errors in protobuf
[23:59:30] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
