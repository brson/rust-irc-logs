[11:41:00] <Seldaek> cmr: I assume the top level name  key is the crate name?
[11:44:56] <Seldaek> cmr: and the top level mod with empty name represents that crate I assume, but why not have the contents of that mod at the top level instead? 
[11:45:44] <Seldaek> not a huge deal, just curious, I guess that's how the lexer/language sees things that stuff is in a mod "" inside a crate "foo", but I find it more logical to see the crate "foo" as a top level module itself
[11:57:22] <cmr> Seldaek: I wanted to keep all items in a single object as a child of one field
[11:57:46] <cmr> I can change that if you think it'd be better elsewise, i just did it because it was the path of least resistance :p
[12:00:54] <Seldaek> cmr: it's ok I think, if you can guarantee the top level always only contains mods[0] and that's the top level I assumed before
[12:01:04] <Seldaek> i.e. the crate/main mod
[12:01:59] <cmr> yes, that will always be true.
[12:12:19] <Seldaek> cmr: I have a lot of unresolved ids still
[12:12:36] <cmr> Seldaek: those are external references I think
[12:12:47] <cmr> ie, references to libsyntax etc
[12:12:52] <Seldaek> hm ok
[12:12:57] <cmr> I'm not positive :(
[12:13:00] <Seldaek> but those shouldn't be ids I think
[12:13:06] <cmr> No, they shouldn't be.
[12:13:11] <Seldaek> ok 
[12:13:13] <Seldaek> I ignore for now then
[12:13:26] <Seldaek> what's type managed? just @<whatever is in type.value>
[12:13:27] <Seldaek> ?
[12:13:43] <cmr> yes
[12:14:41] <Seldaek> ok cool
[12:14:47] <Seldaek> getting there it seems 
[12:15:11] <cmr> There *should* be enough information to pretty-print type signatures when the definition can't be extracted directly from the source
[12:15:39] <Seldaek> oh I wouldn't try to extract it from the source I think
[12:15:53] <cmr> yeah
[12:15:54] <Seldaek> I always assumed I could reconstruct from your info
[12:15:59] <cmr> Yes, that is my goal
[12:16:09] <cmr> the JSON should have everything needed
[12:19:08] <dbaupp> cmr: fwiw, if there's always going to be one and only one mod at the top level, rustdoc_ng should unwrap it, so that downstream consumers aren't left having to handle the "impossible" case.
[12:48:45] <Seldaek> cmr: couple questions for representation of stuff.. if you show foo::StructA and it uses foo::bar::StructB, would you display it as foo::bar::StructB, StructB or bar::StructB?
[12:49:25] <Seldaek> cmr: I guess for things int he same module we just show their name, and things in completely different moduels we show the fully qualified name?
[12:49:39] <cmr> Seldaek: Yep, that sounds reasonable.
[12:51:43] <Seldaek> cmr: so for things in sub-modules as well fully qualified name?
[12:52:02] <Seldaek> I'm not sure if the language actually lets you refer to things in submodules by their mod-relative name
[12:52:15] <cmr> It does (though not in imports)
[12:52:17] <Seldaek> but I guess fully qualified is more clear anyway
[12:52:33] <cmr> If two given paths have a common prefix, removing that prefix seems sensible to me
[12:54:42] <Seldaek> eh I'm not sure if that's not weird
[12:54:57] <Seldaek> I'll try with FQN always except in same-mod
[12:55:04] <Seldaek> should be easy to tweak anyway
[12:55:07] <cmr> yeah
[12:56:30] <Seldaek> I'm trying to start linking things so it becomes remotely usable (even though there's no css yet)
[12:57:21] <cmr> Usability and a tiny bit of CSS should be enough to land rustdoc_ng in the tree
[12:57:55] <cmr> Seldaek: Oh roadbump
[12:58:13] <cmr> The default doc generator needs to be written in rust in order to be included in rust
[12:58:21] <Seldaek> well the CSS shouldn't take too long but I don't really want to start on it until I have enough markup to make it worthwhile
[12:58:25] <cmr> Actually I'm not sure that's true
[12:58:32] <cmr> rustdoc depends on pandoc
[12:58:37] <cmr> so it'd be fine I think
[12:59:18] <Seldaek> well we could ultimately port it, but frankly it'd be a pain in the ass right now given the lack of ecosystem (templating & co)
[12:59:27] <cmr> yeah
[12:59:51] <Seldaek> and it's fairly easy to run if you have node.. npm install && grunt; done
[13:00:02] <cmr> yup
[14:00:26] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[15:15:36] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[15:37:58] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[15:43:36] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[16:23:38] <Seldaek> cmr: ok I got cross-linking working pretty well now and index pages for modules at last which makes it possible to click through between things
[16:23:50] <cmr> Seldaek: Awesome!
[16:23:59] <cmr> Need a place to host it to post it to reddit? ;)
[16:24:10] <Seldaek> it still looks like crap, I'd rather wait for that
[16:24:18] <cmr> Yeah I agree.
[16:24:23] <cmr> I also meant to bring this up with you:
[16:24:31] <cmr> Uniform Documentation References
[16:24:36] <cmr> (or UDRs)
[16:24:52] <cmr> This is a way for any documentation generator to be able to cross-link to the output of *another* documentation generator.
[16:25:26] <Seldaek> mkay
[16:25:40] <cmr> basically what I'm thinking is crate_url_prefix/version/mod/mod/mod/.../Item#foo
[16:25:43] <Seldaek> google doesn't know about it it seems ;)
[16:25:46] <cmr> Where the fragment could be a method ID or whatever
[16:25:50] <cmr> yeah I made it up just now
[16:25:54] <Seldaek> haha
[16:26:17] <Seldaek> well, yes it's pretty much gonna be like that the url
[16:26:39] <cmr> what I'm saying is *every* documentation generator needs to support UDRs, for cross-crate documentation hyperlinking to work
[16:26:39] <Seldaek> right now I have for example:build/rustdoc_ng/doctree/struct.StructField.html
[16:27:07] <Seldaek> AFAIK I need the type in the URL to avoid conflicts there
[16:27:27] <Seldaek> and well, .html is better for static docs though I guess we could do without
[16:27:53] <cmr> Where would you see conflicts?
[16:28:09] <cmr> And I agree, but not all documentation generators will output html, or even use a web page
[16:28:13] <Seldaek> I don't know, someone here told me multiple things of different types could have the same name in one module
[16:28:24] <cmr> I don't think so?
[16:28:30] <Seldaek> well, maybe I was tired :)
[16:28:30] <cmr> Oh, types and functions can have the same name
[16:28:35] <cmr> so you're right
[16:28:37] <Seldaek> ok
[16:29:43] <Seldaek> how about UDRs as regexes? like you give me type/mod::mod::mod::name(#method perhaps) 
[16:29:56] <Seldaek> and every doc frontend can have their own regex to turn that into a link
[16:30:05] <Seldaek> it's less uniform perhaps :p
[16:30:25] <cmr> that'll probably work
[16:30:30] <Seldaek> but the only option otherwise IMO is to have the doc system rewrite the URLs to its own
[16:30:46] <cmr> unless it natively uses UDRs, yes.
[16:30:57] <cmr> but then it isn't exaclty uniform?
[16:31:02] <Seldaek> as for those not outputing html or using web pages.. do we really need linkability for those?
[16:31:08] <cmr> you can't use that reference to link to a webpage
[16:31:19] <cmr> no, good point, not cross-crate
[16:31:34] <cmr> (as you can see, I literally just came up with it, not very well thought through :p)
[16:32:19] <Seldaek> well what I planned on doing for this frontend thing is that if it sees std:: or extra:: (or any other known crate I suppose), it would cross-link to that crate root url
[16:32:29] <cmr> yes
[16:32:50] <Seldaek> so if in rustdoc_ng's docs you have std::vec somewhere, you'd get a link to rust-lang.org/doc/std/vec/index.html 
[16:32:53] <Seldaek> or something 
[16:33:02] <cmr> but that either assumes 1. they are using the same documentation generator, 2. it accepts the same type of paths that we use for hyperlinking.
[16:33:15] <cmr> 1. isn't really reasonable to assume, 2. is UDRs
[16:33:18] <Seldaek> well, it just assumes that it uses a *known* documentation generator
[16:33:36] <Seldaek> with a unified URL format of some sort
[16:33:41] <Seldaek> I agree if they all use the same it's easier
[16:33:50] <Seldaek> but ultimately if you don't know a thing exists, you can't link to it
[16:33:52] <cmr> then a crate needs to include which documentation generator it uses in its metadata
[16:34:12] <cmr> Which would be possible.
[16:34:14] <Seldaek> ah you'd include the base url in the crate metadata?
[16:34:18] <cmr> In fact, I think that's perfectly reasonable.
[16:34:23] <cmr> yeah
[16:34:41] <Seldaek> ok ok I didn't realize that
[16:34:46] <Seldaek> but that's kinda neat
[16:34:47] <cmr> #[doc(prefix="https://....", type="rustdoc_ng_whatever")];
[16:34:49] <cmr> As a crate attribute
[16:34:51] <cmr> Or something
[16:34:56] <Seldaek> yeah
[16:36:18] <Seldaek> ok well that sounds good but needs to be refined I guess
[16:36:39] <Seldaek> anyway I have to go out drink beers it seems, it's too hot to work in here
[16:36:48] <cmr> ok, cya, enjoy :)
[16:37:33] <Seldaek> thanks, and I guess sunday or monday I'll have time to work on css a bit 
[16:37:53] <Seldaek> then this should become a bit more fun
[16:58:45] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[17:02:09] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[17:09:40] *** Joins: jga (asdf@D782DE9.A1F028E9.B5524284.IP)
[18:01:04] <jga> I don't have enough time to post to the mailing list, but I think pydoc is the best *doc tool out there
[18:01:19] <jga> it setups a server in localhost and serves the content
[18:06:43] <cmr> jga: I've never actually used pydoc before, always used sphinx.
[18:08:56] <cmr> jga: I take it back! I didn't know it was what drove help()
[18:09:29] <cmr> jga: do you think it's the best specifically because of that feature?
[18:10:18] <jga> it would sound weird, but yes, I like having documentation offline and the browsing system is also very good
[18:10:42] <jga> cmr: have you thought on having it offline available?
[18:10:48] <cmr> jga: Certainly.
[18:11:00] <cmr> jga: the current rustdoc generates static html, as will rustdoc_ng
[18:11:13] <cmr> so it will be available offline, even if it doesn't spawn a local http server
[18:11:18] <cmr> (though it easily could)
[18:12:09] <jga> yeah, that's cool
[18:13:39] <jga> I mean, it's probably the simplest doc tool out there, but is the one I feel more confortable with when I need class or module descriptions
[18:16:42] <jga> just keep the good work, I like how you are doing, just that don't have enough time to contribute to rust again at the moment
[18:17:02] <cmr> jga: that's fine. thanks for the feedback :D
[18:18:01] <jga> cmr: thanks you ;)
[20:34:35] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[20:47:35] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[22:07:46] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[23:12:23] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
