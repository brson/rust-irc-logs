[00:00:02] <Eridius> for example, the only way that I know of right now to use vec::bytes::copy_memory() to move bytes around within a ~[u8] requires a vec::const_slice()
[00:00:06] * cmr has never seen &const in the code he's worked with
[00:00:09] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[00:00:20] *** Quits: dbaupp (Thunderbir@5398BEFD.D5A1DCF.37681C44.IP) (Ping timeout)
[00:00:22] <bjz> dbaupp: making progress
[00:00:28] <bjz> oh
[00:00:28] <MaikKlein> rusti: struct Test{mut i: int} impl Test{fn set(&mut self, i: int){self.i = i}} let mut t = Test{i: 1}; t.set(5);
[00:00:29] <bjz> heh
[00:00:30] -rusti- ()
[00:00:45] <MaikKlein> why do I also have to make t mutable in order to call set?
[00:00:54] <Eridius> cmr: vec::bytes::copy_memory(vec::mut_slice(data, 48, 64), vec::const_slice(data, 32, 48), 16)
[00:00:59] <Eridius> that comes from code I wrote just a couple days ago
[00:00:59] <aatch> MaikKlein, because you can't have mutable fields.
[00:01:04] <strcat> MaikKlein: there aren't mutable fields anymore
[00:01:12] <MaikKlein> oh
[00:01:16] <strcat> I guess it still parses but it doesn't do anything
[00:01:35] <strcat> the parser is weird though
[00:01:37] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:01:41] <sfackler> could someone explain what the 'self lifetime is used for wrt impls? e.g. https://github.com/mozilla/rust/blob/incoming/src/libextra/base64.rs#L27
[00:01:44] <aatch> If I remember, pcwalton made it just ignore it
[00:01:48] <strcat> rusti: extern { extern }
[00:01:49] -rusti- foo.rs:8:18: 8:24 error: unexpected token: `extern`
[00:01:49] -rusti- foo.rs:8          extern { extern }
[00:01:49] -rusti-                            ^~~~~~
[00:01:55] <strcat> heh that seems fixed
[00:02:24] <cmr> sfackler: 'self lifetime is for pointers into self, and it's live as long as self is (afaik)
[00:02:51] <strcat> sfackler: it's just a lifetime you can use in the definition of the type you're implementing on
[00:03:03] <strcat> impl<'self> X for T<'self>
[00:03:07] <heftig> externception
[00:03:10] <strcat> impl<'self> X for &'self T
[00:03:12] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[00:03:28] <strcat> I don't think you'll have to call it 'self in the future
[00:03:58] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:04:28] <strcat> you can also do fn foo<'a>(&'a self) -> &'a T for most cases but...
[00:04:33] <strcat> not when you need it as a parameter to the type
[00:05:16] <strcat> like struct Foo<'self> { x: &'self int } ... impl<'self> X for Foo<'self> {}
[00:07:33] <sfackler> i'm a bit confused why it's needed for something like "impl<'self> Foo for &'self str { fn foo(&self) {...} }". Is there some ambiguity that would be caused by just doing "impl Foo for &str {...}"?
[00:08:07] <strcat> sfackler: you have to give a lifetime on borrowed ptrs or slices in a type definition or impl
[00:08:14] <aatch> sfackler, if Foo contains a &-ptr, then you need a lifetime.
[00:08:19] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:09:37] <MaikKlein> okay if there are no mutable fields then this "let a = ~[1,2,3];" is an array and no vector right?
[00:10:01] *** Quits: threecreepio (jdp@moz-DB2D70E9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[00:10:07] <Eridius> it's a vector
[00:10:15] <Eridius> let mut b = a; // now it's mutable!
[00:10:59] <MaikKlein> ok so it's just a read only vector
[00:11:56] <sfackler> okay. last thing, then I guess: is there any reason the FromBase64 impls are defined on ~[u8] and ~str instead of &'self [u8] and &'self str like the ToBase64 impls are? "".from_base64() doesn't compile but "".to_base64() does because of that
[00:13:06] *** Quits: drak3 (drak3@moz-63A002DC.dip0.t-ipconnect.de) (Ping timeout)
[00:13:13] <tjc> without having seen the code, probably because when you're creating a new string, you have to allocate it somewhere...
[00:13:24] <tjc> you can't create a &'self anything without having an &'self something to start from
[00:14:58] <cmr> rusti: "_foo" < "foo"
[00:14:59] -rusti- true
[00:15:26] <sfackler> both to_base64 and from_base64 allocate new ~str and ~[u8] objects respectively
[00:17:31] <MaikKlein> oO
[00:17:38] *** Parts: Dimension_ (Dimension@moz-4CCD79C5.dsl.dynamic.simnet.is) (Leaving)
[00:17:45] <MaikKlein> usti: "ffoo" < "foo"
[00:17:52] <MaikKlein> rusti: "ffoo" < "foo"
[00:17:53] -rusti- true
[00:18:30] <aatch> rusti: ('_' as uint, 'f' as uint)
[00:18:30] -rusti- (95, 102)
[00:18:38] <MaikKlein> rusti: "b" < "a"
[00:18:40] -rusti- false
[00:18:46] <benh> rusti: "ffoo" < "foo" < "oo"
[00:18:48] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BhTR
[00:19:02] <aatch> Lexicographic ordering.
[00:19:06] <cmr> benh: glad I'm not the only one who wants that feature :)
[00:19:13] <MaikKlein> rusti: "ass" < "bass"
[00:19:14] -rusti- true
[00:19:57] <aatch> rusti: "foo" > "fo"
[00:19:58] -rusti- true
[00:20:02] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[00:20:16] <MaikKlein> Rusti: ";" < "&"
[00:20:30] <MaikKlein> rusti: ";" < "&"
[00:20:31] -rusti- false
[00:20:36] <aatch> MaikKlein, it's lexicographic ordering.
[00:20:52] <aatch> Just look up the codepoint values for them.
[00:21:05] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:23:01] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:27:22] <Eridius> tjc: I agree with sfackler. It's clearly why FromBase64 needs to return a ~[u8], but why does it need to be implemented on ~[u8]? It has no need to consume its input
[00:27:40] <tjc>  Eridius: oh, I see. probably just an oversight in that case
[00:28:25] <sfackler> I'll fix it and send a pull request
[00:28:33] <tjc> great, thanks!
[00:28:37] <cmr> Writing C++ again... I appreciate rust all that much more.
[00:29:11] <Eridius> sfackler: while you're poking at base64, would you mind making FromBase64 not barf on newlines?
[00:29:22] <Eridius> since Base64 text is typically split into multiple lines
[00:29:25] <tjc> graydon: ping
[00:29:33] <graydon> tjc: pong
[00:29:39] <sfackler> and just have it ignore them?
[00:29:44] <tjc> graydon: quick question -- we talked a while ago about the rustpkg test runner
[00:29:46] <Eridius> sfackler: yeah
[00:29:50] <graydon> tjc: yup
[00:29:59] <tjc> I was thinking about that and was wondering if it's enough to just have unit tests that use os::set_args to simulate a particular command line
[00:30:01] <sfackler> will do
[00:30:11] <tjc> I thought at first it would need its own test runner, but does it actually?
[00:30:22] <Eridius> sfackler: base64 was typically used in 80-char-wrapped mime messages. the newlines are just nops and should be ignored during parsing
[00:30:39] <Eridius> a lot of base64 libraries today still hard-wrap their output when converting to base64
[00:31:13] <fread2282> oh god mibbit has auto away :(
[00:31:19] <Eridius> actually, it's 76 chars, not 80
[00:31:37] <graydon> tjc: is there an os::set_args? gosh
[00:31:40] <sfackler> it should ignore all whitespace, not just newlines, right?
[00:31:52] <graydon> tjc: um, that would surely race with other unit tests fighting over the args
[00:31:57] <tjc> graydon: Yesâ€¦ is that scary
[00:31:59] <tjc> ?
[00:32:05] <graydon> tjc: unit tests run in parallel
[00:32:06] <tjc> graydon: Yeah, so it would have to use a lock, like the tests that call change_dir
[00:32:08] <strcat> sfackler: python's seems to ignore all whitespace
[00:32:32] <rpearl> what does the rfc say to do :P
[00:32:35] <Eridius> sfackler: should it? Newlines are common in base64. Other whitespace isn't
[00:33:01] <graydon> tjc: we really need to write a test runner that uses workcache properly. i.e. parallel, with subprocesses, caching results. nobody's looked at it in a while.
[00:33:04] <mcpherrin>  Eridius: I ran into spaces often enough
[00:33:05] <mcpherrin>  16   str::from_bytes(vec::filter(filecontent, |&x| x != 0x20 && x != 10)).from_base64()
[00:33:20] <mcpherrin> Is my usual use of base64 in rust
[00:33:22] <Eridius> mcpherrin: oh? ok then. I don't think I have, but I have no real objection to permissiveness
[00:33:23] <graydon> tjc: I am getting kinda tired of putting it off. "let's just do the most expedient and broken thing" winds up layering every more technical debt on top.
[00:33:24] <tjc> graydon: in general or for rustpkg in particular?
[00:33:28] <tjc> sure
[00:33:35] <graydon> tjc: in general. the compiletest driver should use the same thing.
[00:34:03] <graydon> tjc: sorry, this sounds like a tirade on my part. I realize it'll be an investment to get working.
[00:34:06] <tjc> graydon: fair enough. But I'm trying to balance that with my (admittedly self-imposed) schedule that says I should have finished the test runner (and a few other things) 11 days ago...
[00:34:08] * aatch made the mistake of not committing the build that passed before fiddling with the passes.
[00:34:14] <tjc> is it okay to do something simpler in the short term?
[00:35:25] <Eridius> rpearl: seems that MIME's base64 definition says any extra-alphabetic characters should be ignored
[00:35:33] <graydon> tjc: I .. guess. setting args and taking a lock sounds very awkward.
[00:35:45] <graydon> tjc: and aside from that, you'll be reimplementing compiletest anyways
[00:35:51] <Eridius> of course MIME's Base64 also imposes a maximum line length of 76
[00:36:14] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:36:25] <graydon> tjc: note, compiletest is not infinitely large, and much of its logic has to do with interpreting error lines and xfails and such
[00:36:27] <sfackler> rpearl: it looks like it depends heavily on the flavor: https://en.wikipedia.org/wiki/Base64#Implementations_and_history
[00:36:42] <rpearl> yes.
[00:36:47] <rpearl> i was just about to link to that
[00:37:09] <Eridius> of course RFC 3548, which is non-normative memo that tries to unify the Base64 specs, says a decoder must reject any non-alphabetic (meaning encoding alphabet) chars unless you're conforming to another RFC that references 3548 and explicitly allows it
[00:37:23] <Eridius> but 4648 superceedes 3548
[00:37:42] *** Quits: KindOne (KindOne@moz-3E4620C6.dynamic.ip.windstream.net) (Ping timeout)
[00:38:20] *** Quits: fread2282 (Mibbit@moz-CB181B42.dia.static.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:38:24] *** Joins: KindOne (KindOne@moz-3E4620C6.dynamic.ip.windstream.net)
[00:38:33] <sfackler> 4648 says the same thing as 3548
[00:38:40] <Eridius> 4648 also calls for rejecting non-alphabetic chars
[00:39:21] <Eridius> given this, since MIME is a common source of base64, and a lot of base64 encoders follow MIME specs (e.g. 76 char limit), I think we need to accept CR/LF
[00:39:28] <Eridius> but I'm not convinced we should accept anything else
[00:39:30] <cmr> *insert some quote along the lines of "the best thing about standards is there are so many to chose from!"*
[00:39:47] <Eridius> cmr: relevant xkcd: http://xkcd.com/927/
[00:39:50] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:39:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dd76da4 to 145676056: 02http://git.io/N3iJvQ
[00:39:50] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:39:54] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:39:54] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/6MAXpg
[00:39:54] <ghrust> 13rust/06auto 1467283ea 15Tom Lee: Omit unused implicit argument if return type is immediate.
[00:39:54] <ghrust> 13rust/06auto 14cddd274 15Tom Lee: Add _RUST_STAGE0 #ifdefs
[00:39:54] <ghrust> 13rust/06auto 14a85993f 15Tom Lee: Added _RUST_STAGEN guard to rust_call_tydesc_glue
[00:39:57] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:42:33] <graydon> tjc: like, I think actually just a unit test that runs std::run::program_output() and checks the output should be fine
[00:42:53] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:42:57] <tjc> graydon: Okâ€¦ I was trying to avoid running rustpkg as a separate process since I thought it would be slow
[00:43:01] <tjc> but I guess it's a drop in the bucket
[00:43:05] <graydon> tjc: I suspect so
[00:44:11] <sfackler> Eridius: it looks like Ruby has both strict and non-strict versions of encode and decode which seems like a reasonable option
[00:45:22] <tjc> graydon: on a different note; we agreed we were going to change extern mod foo; to be something that allows writing extern mod foo = "bar/foo/quux"; ...
[00:45:42] <tjc> but I was looking at the grammar and noticed the form that already exists that looks like: extern mod foo (uuid = "blahblahblah");
[00:45:53] <tjc> could I just piggyback on that and have a url = "â€¦" attribute or is that too awkward?
[00:46:01] <graydon> id="..."
[00:46:08] <graydon> would be ok for now
[00:46:32] <tjc> ok
[00:46:36] <graydon> leave the bug to introduce the simpler form open. no need to block on it for now.
[00:46:59] <graydon> the package API won't be stable for a little while yet, need to get it working :(
[00:47:06] <tjc> yupyup
[00:49:42] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[00:50:52] <brson> acrichto: when I build your branch on windows i see std fail to build in stage2, but not by killing the canary. Instead I see LLVM fail running the pass manager 'combining redundant instructions'.
[00:51:09] <cmr> strcat: ping
[00:51:10] <brson> acrichto: maybe I shouldn't have tried to combine all these llvm changes into one
[00:51:22] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:51:35] <strcat> cmr: pong
[00:51:41] <brson> we could backtrack and just apply the patches, leaving llvm at the current revision. need to talk to erickt though since it's his pull that upgrades llvm
[00:51:47] <cmr> strcat: what should I do with the existing syscall list in playpen?
[00:51:55] <acrichto> brson: hmm... well in theory this will have to be dealt with at some point, it's just kind of a question of when to deal with it
[00:52:01] <aatch> Hmm, looks like AliasAnalysis is only called on loads and stores
[00:52:17] <brson> acrichto: oh! running again I see the canary failure
[00:52:22] <brson> maybe I can gdb something useful
[00:52:49] <aatch> called /for/ loads and stores rather
[00:52:55] <strcat> aatch: it only cares about those because the stores could invalidate loads and require a deref again, if that's what you mean
[00:53:30] <strcat> cmr: I guess it could just be removed
[00:53:57] <acrichto> brson: I guess there's not really a good summary somewhere of what's changed in llvm between the revisions except for git log
[00:54:16] <aatch> strcat, it's just useful to know for outputting the required metadata
[00:55:49] <strcat> cmr: does getopt let you pass a parameter more than once? I don't remember
[00:56:03] <MaikKlein> wohoo wrote my first macro in rust
[00:56:09] <cmr> strcat: I don't know. Right now I just have -s/--syscalls=open,write,...
[00:56:12] <MaikKlein> super awesome
[00:56:19] <Eridius> MaikKlein: what's it do?
[00:56:32] <MaikKlein> nothing really http://maikklein.github.io/2013/05/29/macros-in-rust/
[00:56:33] <aatch> standard getopt does
[00:56:37] <cmr> (plus --syscalls-file=PATH that reads newline separated names)
[00:56:39] <MaikKlein> but it is still pretty cool
[00:57:00] <strcat> cmr: might make more sense to have '-s read -s write -s stat' if we can
[00:57:04] <strcat> less painful to script
[00:57:19] <MaikKlein> never really wrote any macros in other languages
[00:57:45] <aatch> MaikKlein, lol, try Lisp some time.
[00:57:53] <aatch> Now /they/ have macros
[00:58:00] <Eridius> aatch: non-hygenic ones. Scheme ftw
[00:58:16] <Eridius> lisp has (gensyms) everywhere
[00:58:36] <aatch> Eridius, bah, hygine is for wimps
[00:59:00] <MaikKlein> hm I wonder what would happen if the + operator is not defined for the type in the macro
[00:59:07] <MaikKlein> would the compiler throw an error?
[00:59:09] <strcat> cmr: anyway either is fine, I don't even know which I like more ;p
[00:59:17] <MaikKlein> ahh I just give it a try
[00:59:29] <cmr> strcat: it's not like it can't do both...
[00:59:37] <strcat> cmr: we also need to figure out what to do about device whitelisting
[00:59:41] <jclements> aatch: hope you're joking
[00:59:43] <strcat> that's a bit of a pain
[00:59:55] <aatch> jclements, I am
[00:59:55] <strcat> since it wants the device type + rwm bits
[01:00:03] <Eridius> MaikKlein: I assume it throws an error. what'd it do?
[01:00:07] <MaikKlein> yes 
[01:00:14] <jclements> aatch: okthx :).p
[01:00:16] <strcat> atm urandom read is hardcoded for rust ;p
[01:00:19] <MaikKlein> error: binary operation + cannot be applied to type `Test`
[01:00:27] <MaikKlein> pretty cool
[01:00:48] <aatch> I would use (with-gensyms) or whatever it's called.
[01:00:49] <Eridius> MaikKlein: nice
[01:00:56] <cmr> strcat: maybe giving a path to a device and stat'ing it to get the device number would be nicer than requiring them explicitly?
[01:01:32] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:01:35] <strcat> cmr: not sure, I don't know how common dynamically creating devices with mknod is
[01:01:41] <MaikKlein> we are so lucky that we haven't had Rust 10 years ago or Sky.net would have took over by now.
[01:02:06] <strcat> cmr: I'm fine with using numbers for devices though, it's not as painful as syscalls since they're the same everywhere
[01:02:29] <cmr> right
[01:02:42] <strcat> and my brain has already been damaged to the point where I remember the device codes for null, full, urandom, random types
[01:02:46] <strcat> ;p
[01:02:57] *** Joins: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP)
[01:03:07] <cmr> I was surprised to see a random.c change in the 3.10-rc3 shortlog
[01:03:11] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[01:04:59] <strcat> cmr: it works concurrently now btw, added the silly nested cgroups
[01:05:15] <strcat> just uses pid of the playpen parent process
[01:06:35] <lkuper> MaikKlein: yeah, code generated by Rust macros is statically checked.  it's nice
[01:06:55] *** Quits: MaikKlein (maik@moz-F9DF85DA.dip0.t-ipconnect.de) (Ping timeout)
[01:07:54] <strcat> that's one of my pet peeves with lxc... it locks the root dir
[01:09:02] <aatch> lkuper, well the parser takes a macro, then expands it, which produces a new AST which is inserted at the expansion point.
[01:09:29] <aatch> The actual compiler doesn't know about macros, except to complain that they shouldn't be there
[01:09:45] <aatch> (this is also why you can't expand to multiple items atm)
[01:09:54] <jclements> aatch: ?!
[01:10:21] <aatch> jclements, what?
[01:10:31] <Eridius> aatch: â€½
[01:10:47] <jclements> ohâ€¦ sighâ€¦ I don't know.
[01:10:51] <tjc> the parser is part of the compiler :-)
[01:11:10] <aatch> tjc, hence "actual", as in the bit that does compiling.
[01:11:21] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[01:11:35] <jclements> aatch: you have some strange ideas about what a compiler is.
[01:12:07] <jclements> nvm, nvm, let's stay positive.
[01:13:01] <bjz> arrg
[01:13:02] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:13:17] <bjz> struglling with vector destructuring :(
[01:13:24] <bjz> *struggling
[01:14:53] <lkuper> aatch: I don't think I understand your comment, unless it's to say that the compiler has no way of knowing whether a given AST node is human-generated or macro-generated. 
[01:15:08] <aatch> lkuper, yes
[01:16:17] <acrichto> strcat: have you used external iterators much? I'm having trouble getting the simplest things to compile... https://gist.github.com/alexcrichton/5667324
[01:17:10] <strcat> acrichto: there are really weird type inference bugs
[01:17:34] <acrichto> strcat: awww, they're not very useful right now then :(
[01:18:00] <strcat> acrichto: well they are but... there are things the compiler doesn't like ;p
[01:18:06] <strcat> it can be worked around
[01:18:14] <strcat> take and drop are things it doesn't like without type hints
[01:18:22] <strcat> take_while and drop_while? fine and dandy.
[01:18:27] <bjz> aatch: do you have time to assist with some errors I'm having?
[01:18:30] <acrichto> odd...
[01:18:35] <aatch> bjz, sure
[01:18:50] <aatch> I'm waiting for a build anyway
[01:19:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[01:19:08] <strcat> rusti: let xs = ~[1, 2, 3, 4, 5, 6]; for xs.iter().take_while(|&x| *x < 4).advance |&x| { println(x.to_str()) }
[01:19:09] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[01:19:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SZGd
[01:19:26] <strcat> rusti: use core::iterator::*; let xs = ~[1, 2, 3, 4, 5, 6]; for xs.iter().take_while(|&x| *x < 4).advance |&x| { println(x.to_str()) }
[01:19:28] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EKYS
[01:19:40] <strcat> rusti: use std::iterator::*; let xs = ~[1, 2, 3, 4, 5, 6]; for xs.iter().take_while(|&x| *x < 4).advance |&x| { println(x.to_str()) }
[01:19:41] -rusti- 1
[01:19:42] -rusti- 2
[01:19:42] -rusti- 3
[01:19:42] -rusti- ()
[01:19:50] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:19:51] *** Quits: philix (philix@moz-ACBA4252.user.veloxzone.com.br) (Ping timeout)
[01:19:52] <acrichto> huh
[01:20:06] <strcat> bjz: the () thing is actually going to annoy me ;p
[01:20:19] <cmr> strcat: What should I do on nonexistent syscall? Bail out or keep going but ignore it?
[01:20:21] <brson> what Rust features did we change as a result of feedback from servo?
[01:20:32] <strcat> cmr: probably just fail and exit
[01:20:40] <cmr> strcat: that's what I was thinking too
[01:20:53] <tjc> brson: we added labeled break/loop, though that's a minor one
[01:20:55] <bjz> aatch: https://github.com/bjz/rusp/pull/3
[01:20:56] <brson> I think name resolution probably, though I don't remember the specifices. Some task APIs, the I/O model and FFI were affected.
[01:21:02] <brson> tjc: ah, good thinking!
[01:21:12] <cmr> there's labeled break/loop!?!!?
[01:21:16] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[01:21:20] <bjz> aatch: lots of errors
[01:21:34] *** Joins: philix (philix@moz-A871A8.user.veloxzone.com.br)
[01:21:34] <strcat> cmr: yep. labels have the same syntax as lifetimes
[01:21:55] <cmr> *sweet*
[01:22:11] <tjc> brson: I feel like servo had some effect on how enums, structs, traits, and impls changed over the past 1.5-2 years, but I'm not totally sure
[01:22:20] <bjz> aatch: if you figure anything out, remember you're marked as a collaborator so you can push straight to the branch
[01:22:43] <bjz> aatch: I don't know how understandable it is
[01:22:46] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:23:54] <strcat> cmr: errno has to be one of the worst ideas ever.
[01:24:03] <strcat> especially the functions where you have to set errno = 0 before calling them...
[01:24:42] <cmr> strcat:  sem_timedwait is worse
[01:25:03] <strcat> cmr: well yeah, POSIX
[01:25:11] <strcat> look at 'man hsearch', that's everything wrong with POSIX ;p
[01:25:18] *** Quits: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net) (Client exited)
[01:25:31] <strcat> POSIX hash table: you can only have 1, it has a fixed size, and it's not thread-safe
[01:25:35] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[01:25:42] <cmr> ... well then
[01:25:46] <strcat> the _r ones are GNUisms
[01:26:58] *** Joins: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[01:27:08] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[01:29:56] <Ralith> that's pretty amazingly bad
[01:31:00] <strcat> rusti: extern { fn strfry(x: *mut u8) -> *mut u8 } let mut x = "foo"; strfry(&x[0]); x
[01:31:01] -rusti- foo.rs:8:51: 8:52 error: expected `;` but found `}`
[01:31:01] -rusti- foo.rs:8          extern { fn strfry(x: *mut u8) -> *mut u8 } let mut x = "foo"; strfry(&x[0]); x
[01:31:01] -rusti-                                                             ^
[01:31:07] <strcat> rusti: extern { fn strfry(x: *mut u8) -> *mut u8; } let mut x = "foo"; strfry(&x[0]); x
[01:31:08] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OhQi
[01:31:20] <strcat> rusti: extern { fn strfry(x: *mut u8) -> *mut u8; } let mut x = "foo"; unsafe { strfry(&x[0]) }; x
[01:31:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SZST
[01:31:29] <strcat> rusti: extern { fn strfry(x: *mut u8) -> *mut u8; } let mut x = "foo"; unsafe { strfry(&mut x[0]) }; x
[01:31:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IGfP
[01:31:32] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Quit: Places to go, people to annoy)
[01:31:41] <strcat> rusti: extern { fn strfry(x: *mut u8) -> *mut u8; } let mut x = ~"foo"; unsafe { strfry(&mut x[0]) }; x
[01:31:42] -rusti- ~"ofo"
[01:31:48] <strcat> rusti: extern { fn strfry(x: *mut u8) -> *mut u8; } let mut x = ~"foobar"; unsafe { strfry(&mut x[0]) }; x
[01:31:48] -rusti- ~"brooaf"
[01:31:53] * strcat likes that function ;p
[01:32:05] <bjz> aatch: maybe I should just not attempt to use vector destrucutring :P
[01:32:18] <aatch> bjz, nah, I think I got it.
[01:32:22] <bjz> ooh
[01:33:04] <bjz> aatch: if you have any ideas about how to make things smaller, less ugly, let me know
[01:33:23] <bjz> It is improving though
[01:33:49] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:33:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/6MAXpg
[01:33:49] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:34:45] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:36:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:36:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/85VU1w
[01:36:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:36:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:36:46] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/9_qolA
[01:36:46] <ghrust> 13rust/06auto 14008e6e5 15James Miller: Make AtomicPtr use *mut, instead of ~
[01:36:46] <ghrust> 13rust/06auto 1430b471b 15James Miller: Add AtomicOption type
[01:36:46] <ghrust> 13rust/06auto 14df1814b 15James Miller: Add some documentation
[01:36:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:36:49] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:38:41] <cmr> strcat: so... where is optind set, exactly? :\
[01:39:12] <strcat> cmr: pretty sure it's some evil global
[01:39:16] <cmr> eugh!
[01:39:21] <strcat> not that bad really since argv/argc are global
[01:39:46] <cmr> apparently I was looking at the wrong man page... I /'d for optind but it wasn't there
[01:39:55] <cmr> "man optind" works, though
[01:40:08] <strcat> or 'man 3 getopt'
[01:40:14] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[01:40:32] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Ping timeout)
[01:41:22] <aatch> bjz, and fixed.
[01:41:54] <bjz> aatch: cheers
[01:42:19] <bjz> aatch: I'll fix the merge with master
[01:42:53] <aatch> pattern matching is kinda weird sometimes.
[01:42:59] <aatch> especially around vectors
[01:44:04] <bjz> aatch: did you see dbaupp added a repl?
[01:44:07] <bjz> :)
[01:45:02] <aatch> bjz, I did
[01:45:21] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:46:15] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:46:15] *** Joins: z0w0 (zack@moz-3D293670.lnse1.woo.bigpond.net.au)
[01:46:43] *** Joins: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com)
[01:47:39] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[01:50:34] <cmr> strcat: I'm geting ENOENT when trying to mount proc. Why could that be? I'm running as root, --root=/tmp/sandbox, --user=cmr
[01:50:52] <strcat> cmr: is there a proc dir in the sandbox dir?
[01:51:28] * strcat just makes the sandbox with 'mkdir sandbox && pacstrap -d sandbox base'
[01:51:50] <cmr> oh
[01:51:53] <cmr> heh
[01:52:13] <cmr> Didn't realize I actually needed a system in there. makes sense though :p
[01:52:20] <strcat> cmr: it sort of has to be a full install since it chroots
[01:52:24] <strcat> but it could be pretty minimal
[01:52:24] <cmr> yeah
[01:53:15] <strcat> it just needs to be able to mount /proc and /tmp and setuid to a user that's added inside the chroot
[01:53:25] <strcat> and then a binary inside to run
[01:53:46] <strcat> so I guess you'd need an /etc with the passwd db and a statically linked binary at least
[01:53:48] * strcat isn't sure
[01:55:30] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[01:57:29] *** Quits: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com) (Quit: Instantbird 1.3 -- http://www.instantbird.com)
[01:57:40] *** Joins: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com)
[01:57:48] *** Parts: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) ()
[01:58:32] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:59:42] *** Joins: hjr3 (hradtke@EF9D291C.E5AD9C7C.70288106.IP)
[02:02:00] *** Quits: hjr3 (hradtke@EF9D291C.E5AD9C7C.70288106.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:07:54] *** Joins: snearch_ (snearch@moz-B2303D4D.pool.mediaways.net)
[02:08:40] *** Quits: snearch (snearch@moz-9D325B5D.pool.mediaways.net) (Ping timeout)
[02:10:04] *** Quits: CMCL (cmcl@moz-8C2E912C.co.uk) (Ping timeout)
[02:11:20] *** Joins: CMCL (cmcl@moz-8C2E912C.co.uk)
[02:14:13] *** Quits: CMCL (cmcl@moz-8C2E912C.co.uk) (Ping timeout)
[02:15:44] *** Quits: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP) (Ping timeout)
[02:16:20] *** Joins: CMCL (cmcl@moz-8C2E912C.co.uk)
[02:16:50] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:21:24] *** Joins: Diamond (Mibbit@moz-625C0DAF.ks.ok.cox.net)
[02:30:18] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[02:33:50] <Jeaye> Why does f32::clamp require &f32 for the arguments? o.O
[02:37:57] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[02:39:58] *** Quits: kimundi (kimundi@moz-77E3ACED.dip0.t-ipconnect.de) (Ping timeout)
[02:40:01] *** Joins: Diablo-D3 (diablo@moz-6317EE8A.port.east.myfairpoint.net)
[02:40:19] <cmr> oh, heh. trying to read a file *after* the chroot is a sure way to fail...
[02:40:36] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[02:41:01] *** Quits: Diablo-D3 (diablo@moz-6317EE8A.port.east.myfairpoint.net) (Quit: do coders dream of sheep()?)
[02:42:46] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[02:42:55] *** Joins: kimundi (kimundi@moz-21E92379.dip0.t-ipconnect.de)
[02:43:26] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[02:45:34] *** kimundi is now known as zz_kimundi
[02:45:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:45:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/9_qolA
[02:45:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:48:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:48:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/YCOyhQ
[02:48:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:48:49] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:48:49] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/t8Vc0w
[02:48:49] <ghrust> 13rust/06auto 1423f1a5a 15James Miller: Refactor optimization pass handling....
[02:48:49] <ghrust> 13rust/06auto 1433a05d0 15James Miller: Fix pass creation typo
[02:48:49] <ghrust> 13rust/06auto 1471b146b 15James Miller: Move the initial dead prototype removal pass
[02:48:50] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:52:21] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:52:21] <ghrust> 01[13rust01] 15pcwalton created 06stop-reexporting (+1 new commit): 02http://git.io/MCTfhQ
[02:52:21] <ghrust> 13rust/06stop-reexporting 14863369e 15Patrick Walton: librustc: Only emit visitor glue if it's necessary....
[02:52:21] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:52:25] <pcwalton> noooo
[02:52:36] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:52:37] <ghrust> 01[13rust01] 15pcwalton 04deleted 06stop-reexporting at 14863369e: 02http://git.io/6l3_zQ
[02:52:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:54:06] <pcwalton> 605 files changed, whee
[02:54:13] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[02:57:13] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:57:36] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[02:59:45] *** Quits: snearch_ (snearch@moz-B2303D4D.pool.mediaways.net) (Quit: Verlassend)
[03:00:10] <cmr> strcat: it's kinda weird that the sandbox needs to have execve, since you can't *run* the program you want sandboxed without it. it makes sense, but it leaks a syscall :(
[03:00:27] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[03:00:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:00:47] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140bad137 to 14c8c60f0: 02http://git.io/N3iJvQ
[03:00:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:00:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:00:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/R58N9w
[03:00:47] <ghrust> 13rust/06auto 1456a2e5d 15Junyoung Cho: core::vec is missing methods for mutable slices
[03:00:47] <ghrust> 13rust/06auto 14e0d6486 15bors: auto merge of #6780 : june0cho/rust/issue5984, r=brson...
[03:00:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:01:44] <strcat> cmr: well you could whitelist the specific execve call
[03:01:47] <strcat> you can add checks on params
[03:01:52] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[03:01:59] <cmr> yeah but it's only int comparisons isn't it?
[03:02:10] <strcat> yeah you can just do int comparisons. so you can do a ptr comparison
[03:02:12] <strcat> kinda pointless ;p
[03:02:34] <cmr> oh pointers. right.
[03:02:37] <cmr> anyway, https://github.com/thestinger/playpen/pull/11
[03:03:14] <strcat> cmr: sec, just need to get something to eat and I'll take a look
[03:03:19] <cmr> thanks
[03:04:24] <graydon> uh oh. regression in build time.
[03:04:45] * Jeaye points his finger around
[03:05:01] *** Quits: philix (philix@moz-A871A8.user.veloxzone.com.br) (Ping timeout)
[03:05:16] <cmr> it was https://github.com/mozilla/rust/pull/6707 according to isrustfastyet
[03:05:32] <cmr> but that... doesn't make sense?
[03:05:49] <Jeaye> isrustfastyet?
[03:05:54] <cmr> http://huonw.github.io/isrustfastyet/
[03:06:08] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:06:17] <graydon> yeah
[03:06:24] <graydon> it really does not make sense
[03:06:33] <Eridius> is the build time measuring time for running testcases too? Are those slow tests?
[03:06:40] <Jeaye> woah
[03:06:40] <cmr> Eridius: they are separate
[03:06:42] <Eridius> oh hey, there's two graphs
[03:06:45] * Eridius actually loads the page
[03:06:47] <cmr> yeah :p
[03:06:55] <cmr> it's the data from the buildbots
[03:06:56] *** Joins: philix (philix@moz-44A69ABB.user.veloxzone.com.br)
[03:07:08] <Jeaye> Windows test times are so low. Do we just not have tests for Windows?
[03:07:18] <cmr> "The Windows tests are much faster because it runs a stripped down check-fast testsuite."
[03:07:19] <bjz> no, windows is blazing fast
[03:07:30] <bjz> it's like magic
[03:07:31] <Jeaye> cmr: Woops. :P
[03:07:32] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[03:07:33] <cmr> (win32 process creation is laborious)
[03:07:40] * bjz kids
[03:09:44] <graydon> just linux
[03:09:47] <graydon> makes no sense
[03:09:52] <graydon> maybe the linux bot had a hiccup
[03:10:09] <cmr> a few weeks ago the linux bot time drastically dropped for no reason
[03:10:12] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[03:10:13] <cmr> maybe it's back to normal now ;)
[03:11:08] <graydon> :((
[03:12:43] *** Parts: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) ()
[03:14:10] <Eridius> tests took a lot longer too
[03:15:46] <aatch> graydon, I got a similar error to strcat's pull, any ideas on how to fix it?
[03:15:58] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[03:16:02] <Eridius> what does the builder use to build? Any chance there was a nasty runtime regression and the builder updated between those builds?
[03:16:35] <Eridius> also, curiously, in the test output, the ANSI escapes on the result: line weren't translated by the log parser
[03:16:48] <aatch> nvm, figured it out.
[03:17:11] *** Joins: SimonSapin (simon@moz-99690620.hinet-ip.hinet.net)
[03:17:52] *** Joins: dbaupp (Thunderbir@5398BEFD.D5A1DCF.37681C44.IP)
[03:18:27] *** Quits: Diamond (Mibbit@moz-625C0DAF.ks.ok.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:19:55] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[03:20:10] *** Jesse_ is now known as Jesse
[03:20:24] <Jesse> would rust make it harder to make this mistake? https://bug876382.bugzilla.mozilla.org/attachment.cgi?id=755142
[03:20:44] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[03:21:15] <strcat> cmr: btw looks like you forgot to add the python script to the commit
[03:21:19] <cmr> Jesse: values aren't coercible to bool
[03:21:23] <cmr> strcat: whoops
[03:21:24] <Jesse> i guess it doesn't make any sense to check whether a ptr is null after derefing it
[03:21:40] <cmr> (not implicitly, at least)
[03:21:53] <Jesse> cmr: the problem is checking whether the wrong pointer is null
[03:21:59] <cmr> ah
[03:22:45] <cmr> strcat: pushed
[03:22:55] <strcat> Jesse: ~, &, and @ are never null so... it might be harder to make the mistake because Option is much more explicit
[03:25:39] <Jesse> i guess the outer pointer wouldn't be written as optional in rust, so checking whether it's null would be a compile error
[03:26:14] *** Quits: philix (philix@moz-44A69ABB.user.veloxzone.com.br) (Quit: philix)
[03:26:46] <Jesse> and maybe the equivalent rust code wouldn't have that kind of outparam ;)
[03:27:50] <Eridius> is there any easy way to detect if a library needs recompilation because rust updated?
[03:27:57] <strcat> it does
[03:28:00] <tikue> is there a "get_some_or_fail" method for Option?
[03:28:05] <Eridius> every time I update to latest incoming, I forget to rebuild a dependent crate
[03:28:09] <strcat> tikue: unwrap
[03:28:16] <tikue> thanks
[03:29:42] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[03:29:59] *** Joins: Diamond (Mibbit@moz-625C0DAF.ks.ok.cox.net)
[03:30:31] <caitp> question: how can I implement a method for a struct defined in mod A from mod B
[03:30:59] <Eridius> caitp: make a trait, then implement the trait for that struct
[03:31:19] <Eridius> anyone who wants to use it will need to `use` your trait (or your mod::*), but it'll work
[03:31:25] *** Joins: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:32:13] *** Quits: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:32:44] <caitp> but
[03:33:10] <Eridius> rusti: trait Foo { fn foo() -> ~str; } impl Foo for ~str { fn foo() -> ~str { ~"it worked" } }; (~"foo").foo()
[03:33:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iQEA
[03:33:24] <Eridius> rusti: trait Foo { fn foo(&self) -> ~str; } impl Foo for ~str { fn foo() -> ~str { ~"it worked" } }; (~"foo").foo()
[03:33:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SPAU
[03:33:29] <caitp> this would be a static method, no &self, if I try to call FooMethods::do_foo() it complains
[03:33:33] <Eridius> rusti: trait Foo { fn foo(&self) -> ~str; } impl Foo for ~str { fn foo(&self) -> ~str { ~"it worked" } }; (~"foo").foo()
[03:33:35] -rusti- ~"it worked"
[03:33:51] <Eridius> oh
[03:34:03] *** Joins: jack (jack@2557E599.66715431.D25A875A.IP)
[03:34:04] <dbaupp> caitp: is FooMethods the name of the trait?
[03:34:10] <Eridius> I think you have to say YourTrait::do_foo() but I'm not sure how to tell it which impl to use
[03:34:10] <caitp> or Foo::do_foo() after the FooMethods trait has been implemented for Foo
[03:34:21] <caitp> (Foo is not known about, exactly)
[03:34:34] <strcat> Eridius: either type inference from the return value or Trait::method::<T>()
[03:34:53] <strcat> rusti: let x: int = FromStr::from_str("5"); x
[03:34:55] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ghfL
[03:35:04] <strcat> rusti: let x: Option<int> = FromStr::from_str("5"); x
[03:35:05] -rusti- Some(5)
[03:35:15] <Eridius> strcat: but what if my trait isn't parameterized?
[03:35:15] <strcat> rusti: let x: Option<f32> = FromStr::from_str("5"); x
[03:35:17] -rusti- Some(5)
[03:35:52] <strcat> Eridius: all traits have an implicit type parameter
[03:36:01] <Eridius> trait Foo { fn foo() -> ~str; } impl Foo for ~str { fn foo() -> ~str { ~"string" } } impl Foo for bool { fn foo() -> ~str { ~"bool" } } Foo::foo()
[03:36:09] <Eridius> rusti: trait Foo { fn foo() -> ~str; } impl Foo for ~str { fn foo() -> ~str { ~"string" } } impl Foo for bool { fn foo() -> ~str { ~"bool" } } Foo::foo()
[03:36:10] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/ULFF
[03:36:17] <strcat> cmr: looks good, lemme just test it
[03:36:17] <Eridius> rusti: trait Foo { fn foo() -> ~str; } impl Foo for ~str { fn foo() -> ~str { ~"string" } } impl Foo for bool { fn foo() -> ~str { ~"bool" } } Foo::foo::<~str>()
[03:36:18] -rusti- ~"string"
[03:36:21] <Eridius> rusti: trait Foo { fn foo() -> ~str; } impl Foo for ~str { fn foo() -> ~str { ~"string" } } impl Foo for bool { fn foo() -> ~str { ~"bool" } } Foo::foo::<bool>()
[03:36:22] -rusti- ~"bool"
[03:36:24] <Eridius> strcat: neat
[03:36:37] <strcat> Eridius: it's kind of weird, it collects all the parameters to the end right now
[03:36:39] <strcat> like...
[03:36:39] <cmr> strcat: I did basic testing but nothing thorough
[03:37:05] <strcat> Eridius: if you have a type param on the trait, and 2 on the method
[03:37:14] <strcat> you still put ::<T, U, V> at the end
[03:37:24] <strcat> or or <A, B, C, D> for a static method
[03:37:25] <Eridius> strcat: huh
[03:38:16] <Eridius> trait Foo<T> { fn foo() -> ~str; } impl<T> Foo<T> for ~str { fn foo() -> ~str { ~"
[03:38:31] <Eridius> rusti: trait Foo<T> { fn foo() -> ~str; } impl<T> Foo<T> for ~str { fn foo() -> ~str { ~"string" } } Foo::foo::<bool>()
[03:38:33] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cBMW
[03:38:44] <Eridius> rusti: trait Foo<T> { fn foo() -> ~str; } impl<T> Foo<T> for ~str { fn foo() -> ~str { ~"string" } } Foo::foo::<~str, bool>()
[03:38:45] -rusti- foo.rs:8:103: 8:125 error: failed to find an implementation of trait main::Foo<~str> for bool
[03:38:45] -rusti- foo.rs:8          trait Foo<T> { fn foo() -> ~str; } impl<T> Foo<T> for ~str { fn foo() -> ~str { ~"string" } } Foo::foo::<~str, bool>()
[03:38:45] -rusti-                                                                                                                 ^~~~~~~~~~~~~~~~~~~~~~
[03:38:45] -rusti- note: in expansion of fmt!
[03:38:45] -rusti- foo.rs:7:12: 9:7 note: expansion site
[03:38:57] <Eridius> rusti: trait Foo<T> { fn foo() -> ~str; } impl<T> Foo<T> for ~str { fn foo() -> ~str { ~"string" } } Foo::foo::<bool, ~str>()
[03:38:58] -rusti- ~"string"
[03:39:08] <Eridius> ok, so the type the trait is implemented on is the last param? or are fn params after that?
[03:40:28] <strcat> Eridius: pretty sure it just collects them from left-to-right in the path as you'd expect
[03:40:43] <Eridius> rusti: trait Foo<T> { fn foo<U>() -> ~str; } impl<T> Foo<T> for ~str { fn foo<char>() -> ~str { ~"string" } } Foo::foo::<bool,~str,char>()
[03:40:43] <strcat> so trait types and then method types
[03:40:44] -rusti- ~"string"
[03:41:06] *** Parts: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com) ()
[03:41:06] <Eridius> seems kinda curious, but then again this should be rare to actually type
[03:41:18] *** Joins: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP)
[03:41:18] *** ChanServ sets mode: +o brson
[03:41:42] <cmr> afaik it's slated to be fixed
[03:42:09] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[03:46:22] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[03:47:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[03:54:58] <strcat> cmr: works well :), just going to tweak it a bit
[03:55:03] *** Quits: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[03:59:30] *** Joins: brson (brson@58B3E13.EF2694B5.DFAC6AA7.IP)
[03:59:30] *** ChanServ sets mode: +o brson
[04:00:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:00:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/R58N9w
[04:00:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:00:47] *** Quits: dbaupp (Thunderbir@5398BEFD.D5A1DCF.37681C44.IP) (Ping timeout)
[04:02:41] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:02:52] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[04:03:28] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Quit: Textual IRC Client: http://www.textualapp.com/)
[04:03:41] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:03:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:03:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_tIIqw
[04:03:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:03:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:03:48] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/Z2VhQg
[04:03:48] <ghrust> 13rust/06auto 14d694e28 15James Miller: Refactor optimization pass handling....
[04:03:48] <ghrust> 13rust/06auto 14a5b87d7 15James Miller: Fix pass creation typo
[04:03:48] <ghrust> 13rust/06auto 144988c89 15James Miller: Move the initial dead prototype removal pass
[04:03:49] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:05:37] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[04:05:48] *** Quits: cdidd (cdidd@moz-C14ABA98.broadband.corbina.ru) (Input/output error)
[04:08:35] *** Joins: cdidd (cdidd@moz-DFC788E3.broadband.corbina.ru)
[04:08:43] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:10:41] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:12:22] *** Quits: SimonSapin (simon@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[04:13:08] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[04:13:32] *** Quits: cdidd (cdidd@moz-DFC788E3.broadband.corbina.ru) (Input/output error)
[04:13:59] *** Joins: SimonSapin (simon@moz-99690620.hinet-ip.hinet.net)
[04:15:56] *** Joins: cdidd (cdidd@moz-D63496D7.broadband.corbina.ru)
[04:20:22] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[04:22:52] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[04:32:55] *** Joins: wizeman_ (quassel@moz-9C343656.dyn.user.ono.com)
[04:32:55] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:38:30] <Eridius> can I declare nested functions?
[04:38:48] <Eridius> rusti: fn foo() -> ~str { fn bar() -> ~str { ~"bar" }; bar() } foo()
[04:38:56] <strcat> yes, or closures
[04:39:30] <Eridius> hrm where'd rusti go?
[04:39:46] <strcat> editing it a bit
[04:42:11] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[04:42:17] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:51:32] *** Joins: decisiver (Mibbit@moz-A9845A5E.jax.bellsouth.net)
[04:52:39] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[04:52:44] <decisiver> http://introverted-genius.blogspot.com/
[04:52:51] *** Parts: decisiver (Mibbit@moz-A9845A5E.jax.bellsouth.net) ()
[04:55:08] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[04:55:34] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[04:55:50] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[04:57:03] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:59:33] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:02:17] <tikue> how does one return in a for loop? Is it ret or return?
[05:03:41] <Diamond> return out of the function or just out of the for loop?
[05:03:43] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[05:04:06] *** Quits: cdidd (cdidd@moz-D63496D7.broadband.corbina.ru) (Input/output error)
[05:05:55] <tikue> I've something like: let foo = match bar { for stuff.each | baz | { if good(baz) {baz} }}
[05:06:14] <tikue> I want to assign baz to foo
[05:06:32] *** Joins: cdidd (cdidd@moz-C738D63.broadband.corbina.ru)
[05:06:59] <tikue> so just out of the for loop, not the function
[05:08:24] <Eridius> tikue: for loops don't have a return value. They can't
[05:08:39] <Eridius> trivial example: what happens if the for loop runs out of iteration elements before it wants to return something?
[05:08:45] <Eridius> but you can use a mutable variable
[05:09:00] <tikue> if it runs out it should fail :O)
[05:09:04] <Eridius> let foo = match bar { let mut res = 0; for stuff.each |baz| { if good(baz) { res = baz; break; } }; res }
[05:09:10] <Diamond> or a closure that returns something
[05:09:25] <Eridius> argh, I have a lifetime mismatch error, but it's not actually telling me what the problem is
[05:09:27] <tikue> Got it, thanks
[05:11:49] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[05:11:51] <Eridius> can anyone tell me what's wrong with this: https://gist.github.com/kballard/5668099
[05:12:49] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:15:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:15:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Z2VhQg
[05:15:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:15:54] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:17:03] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[05:17:14] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[05:17:17] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:17:32] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[05:18:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:18:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0x-mZA
[05:18:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:18:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:18:45] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/hUyptA
[05:18:45] <ghrust> 13rust/06auto 145851d32 15Niko Matsakis: Move checking for moves and initialization of local variables and patterns into...
[05:18:45] <ghrust> 13rust/06auto 14329f7a1 15Niko Matsakis: Update docs on the formal basis of the borrow checker.
[05:18:45] <ghrust> 13rust/06auto 14bf1647c 15Niko Matsakis: Reconcile docs and code, adding examples and adding RESTR_CLAIM
[05:18:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:29:19] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Quit: Leaving.)
[05:30:06] <aatch> Yay! pass refactoring in!
[05:33:08] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:33:14] <aatch> Ready for me to completely change!
[05:33:20] *** Quits: blitter (blitter@moz-E761A52F.dyn.centurytel.net) (Ping timeout)
[05:35:35] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[05:36:36] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[05:37:58] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[05:38:57] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[05:42:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:43:13] <aatch> rusti: let mut a = ~[1u32]; a += 2;
[05:43:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eFCC
[05:45:10] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Ping timeout)
[05:52:12] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:57:17] *** Quits: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[05:57:55] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[06:00:54] *** Quits: z0w0 (zack@moz-3D293670.lnse1.woo.bigpond.net.au) (Quit: Leaving.)
[06:02:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[06:04:00] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Ping timeout)
[06:05:31] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[06:05:36] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[06:06:09] *** Joins: xazax (Mibbit@6655692F.3B222813.3F580572.IP)
[06:13:28] *** Parts: Tekk (user@moz-FE1B67B8.ec.res.rr.com) (ERC Version 5.3 (IRC client for Emacs))
[06:18:13] *** Joins: steve (steve@moz-5EF6C37C.socal.res.rr.com)
[06:18:16] *** steve is now known as steveklabnik
[06:18:36] <steveklabnik> what's the easiest way, currently, to iterate through a string, two characters at a time?
[06:24:24] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[06:25:39] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[06:25:58] *** Quits: cdidd (cdidd@moz-C738D63.broadband.corbina.ru) (Input/output error)
[06:31:43] *** Joins: cdidd (cdidd@moz-9832744D.broadband.corbina.ru)
[06:33:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:33:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/hUyptA
[06:33:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:35:15] <thomaslee_> steveklabnik, I'd personally wind up doing something dirty using eachi & a mut ~[char], but then I'm a bad person :)
[06:36:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:36:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1RoI-g
[06:36:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:36:43] <thomaslee_> ah, maybe you could do some magic with vec::mapi + vec::filter + each2?
[06:36:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:36:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZHke5w
[06:36:43] <ghrust> 13rust/06auto 14c49e41c 15Luqman Aden: compiletest: Add #[no_core] to fix check-stage1.
[06:36:43] <ghrust> 13rust/06auto 14149960e 15bors: auto merge of #6789 : luqmana/rust/compiletest-fix, r=thestinger...
[06:36:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:36:51] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[06:37:01] <thomaslee_> let's see ...
[06:39:50] *** Quits: brson (brson@58B3E13.EF2694B5.DFAC6AA7.IP) (Quit: leaving)
[06:40:05] <steveklabnik> yeah, i'm not totally sure
[06:40:39] <steveklabnik> i reverted to a while loop where i counted up by two each time
[06:44:06] <thomaslee_> cool. I can't really see anything nice in libstd that would make that a one-or-two liner ... hrm.
[06:44:34] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[06:44:58] <steveklabnik> yup
[06:45:08] <steveklabnik> i was trying to think, what _should_ be there that'd do that nicely
[06:45:15] <steveklabnik> seems like this kind of thing would come up sorta often-ish
[06:45:46] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[06:46:02] <thomaslee_> sounds like you want something like a `take N` kinda thing
[06:46:16] <steveklabnik> in groups of n, yes
[06:52:07] <TD-Linux> well it's much different because now you don't want elements but substrings
[06:52:44] <TD-Linux> either that or you treat the string more like a buffer and "pop 2" in a while loop
[06:52:52] <TD-Linux> what happens if your string isn't a multiple of 2 long?
[06:53:01] <steveklabnik> in this case, it never will be
[06:53:15] <steveklabnik> i guess
[06:53:25] <steveklabnik> in this case, what i _actually_ want is just to iterate through a vector, two at a tim
[06:53:28] <steveklabnik> e
[06:54:55] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[07:01:04] *** Joins: fabiand (fabiand@moz-F997017D.adsl.alicedsl.de)
[07:02:06] *** Joins: threecreepio (jdp@moz-DB2D70E9.cust.bredbandsbolaget.se)
[07:06:06] *** Joins: tav (tav@moz-F64BC922.range86-145.btcentralplus.com)
[07:06:42] *** Joins: tav_ (tav@moz-F64BC922.range86-145.btcentralplus.com)
[07:06:42] *** Quits: tav (tav@moz-F64BC922.range86-145.btcentralplus.com) (Connection reset by peer)
[07:06:42] *** tav_ is now known as tav
[07:09:17] <thomaslee_> steveklabnik, kinda horrible, but y'know -- https://gist.github.com/thomaslee/5668463 :)
[07:09:49] <thomaslee_> not sure what'd happen if the pair wasn't actually a pair ... *reads vec::slice*
[07:11:05] <thomaslee_> there's probably a better way, but my rust sucks atm hah
[07:11:38] <steveklabnik> neat, thanks!
[07:15:01] <aatch> I almost have implemented the ability to set a custom LLVM pass pipeline
[07:16:06] *** Quits: threecreepio (jdp@moz-DB2D70E9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[07:18:21] *** Quits: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com) (Quit: Lost terminal)
[07:18:27] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[07:26:54] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[07:32:44] *** Joins: berak (chatzilla@6776F79.4742BCFA.1A5CC7E5.IP)
[07:34:53] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[07:34:59] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[07:35:07] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (Ping timeout)
[07:35:12] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[07:35:49] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[07:40:04] *** zz_kimundi is now known as kimundi
[07:41:39] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[07:44:58] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[07:45:00] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[07:45:47] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[07:45:50] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:50:38] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[07:51:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:51:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ZHke5w
[07:51:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:53:22] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[07:53:29] *** Joins: victorporof (victorporo@F0489234.3C60C00D.4A6B528C.IP)
[07:54:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:54:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/xO1tDw
[07:54:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:54:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:54:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lMr20g
[07:54:42] <ghrust> 13rust/06auto 14b4a3fe2 15Graydon Hoare: librustc: drop AST before running LLVM, frees 400mb on a librustc build
[07:54:42] <ghrust> 13rust/06auto 14e3e55c5 15bors: auto merge of #6793 : graydon/rust/drop-ast-before-llvm, r=Aatch
[07:54:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:56:48] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[08:00:25] <bjz> dbaupp: ping
[08:00:37] <dbaupp> bjz: gnop
[08:02:00] <bjz> dbaupp: made some progress: https://github.com/bjz/rusp/pull/3
[08:02:10] <bjz> tests are still failing though
[08:02:20] <dbaupp> woah, so many commits!
[08:02:21] <dbaupp> :)
[08:03:58] <dbaupp> bjz: can I try to fix them?
[08:04:03] <bjz> sure
[08:04:51] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Connection reset by peer)
[08:05:11] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[08:05:23] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[08:05:24] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[08:05:52] *** Joins: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr)
[08:08:13] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[08:09:10] *** Quits: victorporof (victorporo@F0489234.3C60C00D.4A6B528C.IP) (Connection reset by peer)
[08:10:03] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[08:11:56] <Eridius> anyone around who understands 'self?
[08:12:09] <Eridius> I'm getting a lifetime mismatch error, but I can't tell what the actual issue is: https://gist.github.com/kballard/5668099
[08:12:43] <dbaupp> bjz: I fixed it! :)
[08:13:00] <xazax> hi
[08:13:00] <bjz> hooray
[08:13:01] <xazax> http://pastebin.com/xgztmBsA
[08:13:05] <dbaupp> bjz: it was List(~[]) not getting handled as properly
[08:13:09] <dbaupp> s/as //
[08:13:09] <xazax> is it intentional, this code compiles?
[08:13:23] <bjz> dbaupp: thankyou!
[08:13:33] <dbaupp> bjz: I'll push to dev-bjz?
[08:13:40] <xazax> it gives an unused warning to the first variable, and prints 6, but it is a bit surprising for me
[08:13:48] <bjz> dbaupp: yep, then i'll merge
[08:15:20] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:15:34] <dbaupp> bjz: done
[08:15:48] <dbaupp> xazax: it's defining a new 'x'
[08:15:50] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:16:39] <xazax> yeah, but I see this as a potential source of errors and I wonder if it is the intentional behavior
[08:17:23] <xazax> and I guess something similar happen to traits: https://github.com/mozilla/rust/issues/5925
[08:18:06] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[08:18:09] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[08:18:32] <bjz> dbaupp: aatch added some things to the wiki: https://github.com/bjz/rusp/wiki#implementation-notes
[08:18:39] <aatch> optimization passes, take two: https://github.com/mozilla/rust/pull/6799
[08:19:04] <dbaupp> Eridius: https://gist.github.com/huonw/5668745
[08:19:32] <dbaupp> Eridius: I *think* the thing of interest to Rust, is how long the self pointer is valid
[08:19:34] <Eridius> dbaupp: why does &self need a separate lifetime? I thought 'self was the lifetime of self
[08:19:52] <dbaupp> Eridius: I think it's a strange interaction of &[] and lifetimes
[08:19:57] <Eridius> hmm
[08:20:00] <aatch> if/when that lands, you'll be able to provide your own pipeline to LLVM, which should make experimentation easier.
[08:20:01] <Eridius> I wish the error was more helpful
[08:20:02] <dbaupp> since they aren't "real" & pointers
[08:20:09] <dbaupp> Eridius: (I'm not really sure)
[08:20:17] <Eridius> dbaupp: anyway, thanks
[08:20:39] <Eridius> dbaupp: is the 'self in the impl line still necessary?
[08:20:48] *** aatch is now known as aatch|gone
[08:20:56] <dbaupp> Eridius: yes... 
[08:21:02] <dbaupp> it's strange
[08:21:03] <Eridius> dbaupp: what's it doing?
[08:21:20] *** Joins: mib_62s501 (Mibbit@moz-A0E225F0.avcosystems.co.uk)
[08:21:20] <dbaupp> satisfy rustc's whinging?
[08:21:24] <Eridius> lol
[08:21:25] <dbaupp> I don't know
[08:21:55] <dbaupp> ('self seems to work for non-&[] & pointers, which is why I think it's a peculiarity of vectors)
[08:22:02] <Eridius> curious
[08:22:03] <dbaupp> bjz: I see...
[08:22:16] <dbaupp> bjz: I'm not sure I like defn reaching out into the global scope
[08:22:16] <Eridius> anyway, that got me past that particular error
[08:22:46] <dbaupp> bjz: (def f) ... (let (a) (set! f (fn () a)))
[08:22:57] <dbaupp> maybe?
[08:23:33] <dbaupp> (which means that f can be defined in whatever scope and still have the execute-in-a-different-scope behaviour)
[08:27:35] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[08:28:36] *** Quits: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net) (Ping timeout)
[08:28:45] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:28:50] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[08:28:52] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[08:28:52] *** Joins: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net)
[08:29:27] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[08:40:33] *** Joins: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is)
[08:41:39] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:45:39] *** Parts: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is) (Leaving)
[08:46:25] *** Joins: victorporof (victorporo@F0489234.3C60C00D.4A6B528C.IP)
[08:47:57] *** Quits: mib_62s501 (Mibbit@moz-A0E225F0.avcosystems.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[08:51:54] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:54:02] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[08:57:35] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[08:57:49] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[08:59:54] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[09:01:16] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[09:07:07] *** Parts: berak (chatzilla@6776F79.4742BCFA.1A5CC7E5.IP) ()
[09:09:35] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[09:13:15] <doomlord> hi, whats the goal with C interop - could an unsafe subset of rust be 'extern "C"' functions callable from FFI the same as C... i know you had the ability to pass callbacks to Glut/GLFW ...  whats the deal with safe-stack shim in these cases
[09:16:27] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Connection reset by peer)
[09:16:35] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:17:18] *** Quits: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[09:17:46] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[09:18:31] <jaen> woot, rustpkgtest punted with an LLVM assertion? That makes me sad, over an hour of compile for nothing ; /
[09:20:54] *** Quits: victorporof (victorporo@F0489234.3C60C00D.4A6B528C.IP) (Connection reset by peer)
[09:22:42] <dbaupp> jaen: that means that the rest of the tests passed
[09:22:53] <dbaupp> since rustpkg tests run towards the end of make check
[09:23:15] *** Joins: EarlGray (mitra@8E712A0.54C21BA0.9F317420.IP)
[09:25:11] <jaen> At least I assume it's rustpkg, that's what it says exactly - http://ix.io/5Qo
[09:25:41] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[09:26:28] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[09:27:24] <jaen> But if it's that then I need to figure how to fool Arch into packaging that anyway.
[09:31:44] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[09:31:48] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:32:37] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:34:53] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[09:36:22] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:38:11] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[09:38:22] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:47:28] *** Joins: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr)
[09:50:42] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[09:51:48] *** Joins: jensnockert (jensnocker@moz-C91E3C4C.wireless.lu.se)
[09:53:30] *** Quits: jensnockert (jensnocker@moz-C91E3C4C.wireless.lu.se) (Ping timeout)
[09:54:06] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[09:56:21] *** Joins: z0w0 (zack@moz-3D293670.lnse1.woo.bigpond.net.au)
[10:02:28] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[10:07:49] *** Joins: jensnockert (jensnocker@moz-C91E3C4C.wireless.lu.se)
[10:08:50] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[10:12:30] *** Joins: jensnock_ (jensnocker@moz-EF95FD94.astro.lu.se)
[10:13:51] *** Quits: jensnockert (jensnocker@moz-C91E3C4C.wireless.lu.se) (Ping timeout)
[10:18:16] *** Quits: jensnock_ (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[10:19:26] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[10:20:08] <dbaupp> bjz: ping
[10:27:50] <bjz> dbaupp: pongedy
[10:28:21] <dbaupp> bjz: I think I retract my previous suggestion to use ~ rather than @
[10:28:32] <bjz> :)
[10:28:35] <bjz> yeah?
[10:28:50] <bjz> why's that?
[10:28:53] <dbaupp> it means we have to use .clone() too much
[10:29:02] <bjz> mm
[10:29:13] <dbaupp> i.e. cloning the AST to evaluate it
[10:29:30] <dbaupp> (I've got an implementation of calling functions working, btw)
[10:29:42] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[10:32:11] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[10:33:06] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[10:33:20] <nmatsakis> doomlord: basically, yes.
[10:33:37] <nmatsakis> doomlord: I have a pending patch that removes all the stack shimming
[10:33:48] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[10:33:50] <nmatsakis> doomlord: if I can just figure out what the heck is going on with windows
[10:40:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[10:44:48] <dbaupp> bjz: I've also got macros
[10:44:50] <dbaupp> sort of
[10:45:10] <dbaupp> (i guess it doesn't really count if quote doesn't even work.)
[10:50:27] *** Quits: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[10:54:35] *** Joins: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr)
[10:58:45] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[11:04:05] *** kimundi is now known as zz_kimundi
[11:06:45] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[11:13:38] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[11:13:45] *** Joins: drak3 (drak3@moz-447E71B8.dip0.t-ipconnect.de)
[11:15:00] <thiez> what's up with the buildtimes? They seem to be all over the place lately http://huonw.github.io/isrustfastyet/
[11:15:13] <dbaupp> thiez: wooaaaah
[11:15:19] <dbaupp> linux
[11:15:35] <pnkfelix> thiez: I've been wondering about that this morning
[11:16:06] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[11:16:24] <thiez> perhaps the buildbots are also busy with other stuff?
[11:16:35] <dbaupp> thiez: supposedly they are rust-only
[11:16:45] <pnkfelix> thiez: i don't know, I feel like the times on my own machine have regressed significantly in the past week
[11:17:21] <pnkfelix> (I was just about to try making a clone from a week ago and see how lon g it takes to build)
[11:17:34] <thiez> pnkfelix: do let us know :)
[11:17:53] <pnkfelix> dbaupp: is there a way to get log data from earlier than May 23rd on that page?
[11:18:12] <pnkfelix> (maybe I'll just use May 23rd as my reference point...)
[11:18:13] <dbaupp> pnkfelix: um, I can put the sqlite database in the repo?
[11:18:25] <dbaupp> (or extend the history)
[11:18:29] <dbaupp> ?
[11:18:41] <pnkfelix> dbaupp: heh.  I just meant if there was some parameters I could feed into the url
[11:18:49] <dbaupp> pnkfelix: oh, nope
[11:18:51] <pnkfelix> dbaupp: but, duh, its a github.io page
[11:18:59] <thiez> I really think the problem is with the bots, not rust, that one commit in the graph that has a 'normal' time (compared to last week) is one that adds a method to vec
[11:19:10] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[11:19:17] <dbaupp> pnkfelix: well, it's not unreasonable for it to filter the data in javascript
[11:19:24] <dbaupp> but it doesn't do that
[11:19:55] *** Parts: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) ()
[11:20:01] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[11:20:21] <dbaupp> yeah, of commits in the spike, only https://github.com/mozilla/rust/pull/6731 looks like it might affect performance
[11:20:24] *** Joins: vmx (vmx@moz-297A2BBA.pools.arcor-ip.net)
[11:20:33] <dbaupp> but that's the 3rd one after the big jump
[11:20:51] <dbaupp> so it definitely didn't cause it
[11:20:55] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[11:21:12] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[11:22:43] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:23:04] *** Quits: SimonSapin (simon@moz-99690620.hinet-ip.hinet.net) (Quit: dinner time)
[11:23:34] *** Joins: jviereck (Adium@moz-A2DCE0DD.dclient.hispeed.ch)
[11:25:34] *** Quits: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[11:27:29] <thiez> seems like bors is stuck because mac had some exception?
[11:30:21] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[11:35:33] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[11:36:54] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[11:38:30] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[11:41:34] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:42:19] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[11:42:32] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[11:45:21] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Ping timeout)
[11:53:51] *** Joins: pyrac (pyrac@9F71F32A.73C89388.AD05C589.IP)
[11:55:47] *** Quits: jaen (jaen@moz-1EC8DB57.play-internet.pl) (Ping timeout)
[12:00:39] *** Joins: snearch (snearch@moz-B2303D4D.pool.mediaways.net)
[12:04:00] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[12:04:07] <pnkfelix> nmatsakis: what kind of build time are you getting for a from-scratch build on your linux box?
[12:07:19] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Client exited)
[12:11:02] <nmatsakis> pnkfelix: not sure, have to measure.
[12:13:07] <thiez> I really love the 'unnecessary allocation' lint pass
[12:15:41] <jensnockert> Is there an alternative to hashmap::linear_map_with_capacity with stable order?
[12:16:29] <dbaupp> jensnockert: there are a whole pile of trees
[12:17:34] <jensnockert> dbaupp: That's what I get for not checking extra, thanks.
[12:17:43] <jensnockert> Sorry for bothering you.
[12:18:17] *** zz_kimundi is now known as kimundi
[12:18:25] <dbaupp> heh
[12:21:02] <jensnockert> Oh, they don't support ToJson /o\
[12:21:16] <jensnockert> Oh well, to the implementation-mobile I suppose.
[12:21:52] <thiez> oh, there are some pretty major perf regressions in code compiled by rustc
[12:22:05] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[12:23:11] <thiez> I've been keeping the rust raytracer alive and it seems to be taking about twice as long as a week ago
[12:24:59] <thiez> from about 4.7 seconds to 10.8 seconds on my quadcore :(
[12:25:27] <dbaupp> thiez: :O
[12:26:45] <benh> Clearly it has quietly made the scene more sophisticated while you weren't looking.
[12:26:57] <dbaupp> thiez: is that running the ray tracer, or compiling it?
[12:27:22] <thiez> dbaupp: I only measure how long the actual tracing takes
[12:27:52] <thiez> excluding things like compiling, reading the scene file, and writing the output
[12:28:21] <thiez> https://github.com/Thiez/rustray/ <- this
[12:28:53] *** Quits: pyrac (pyrac@9F71F32A.73C89388.AD05C589.IP) (Quit: pyrac)
[12:30:03] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[12:30:35] <dbaupp> thiez: cool! (the requirements in the readme are wrong, btw)
[12:30:55] <dbaupp> it takes 22s to trace on my computer... but I don't have an old rust lying around
[12:31:03] <dbaupp> wait, I do... stage0
[12:32:27] <thiez> if stage0 still uses core and std, you may have to go back 1 commit on rustray
[12:32:49] <thiez> the newest commit switched to the new library names
[12:33:09] <dbaupp> yup, noticed that :)
[12:35:40] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[12:37:52] <dbaupp> hm, can't get stage0 to link in the correct libraries
[12:39:58] <thiez> perhaps we need a make install-stage0
[12:43:34] *** Quits: RMF (RMF@2947BE91.D199CED4.8D19547B.IP) (Ping timeout)
[12:43:51] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:46:29] *** Quits: snearch (snearch@moz-B2303D4D.pool.mediaways.net) (Quit: Verlassend)
[12:47:10] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[12:47:34] *** Joins: RMF (RMF@moz-9FED8AA.dsl.telepac.pt)
[12:47:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:47:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:49:15] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[12:49:45] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[12:51:09] *** Joins: victorporof (victorporo@F0489234.3C60C00D.4A6B528C.IP)
[12:57:11] *** Quits: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[13:00:36] <thiez> anyone know how to kick bors back into action?
[13:03:56] <bstrie> I'm trying to interpret the date given on bors' status page: https://www.wolframalpha.com/input/?i=2013-05-29T12%3A52%3A43.000Z&dataset=
[13:04:28] <bstrie> I think this means that it hasn't updated for almost five years
[13:05:08] <pnkfelix> is that a joke about wolfram alpha?
[13:05:17] <pnkfelix> or are you actually asking a legit question?
[13:05:35] <thiez> '2013-05-29' seems more recent than '5 years ago' :p
[13:05:37] <bstrie> pnkfelix: legit question, but also I'm disappointed that wa can't parse that date foramt
[13:06:37] <thiez> looks like YYYY-MM-DD'T'hh-mm-ss to me
[13:06:48] <bstrie> but I don't know the time zone nor dst status
[13:07:13] <thiez> fair enough, but you can wait until it updates, look at the time, and conclude the time zone :)
[13:07:27] <thiez> or ask graydon
[13:07:36] <bstrie> thiez: I thought you said it was busted!
[13:07:40] <thiez> but that would be the boring way of finding out :D
[13:07:43] <dbaupp> I'm pretty sure it's UTC
[13:07:44] <bstrie> I was presuming it would never update
[13:08:01] <thiez> bstrie: the mac-incoming bot was stuck for some reason
[13:08:12] <thiez> I just told it to rebuild, hoping it'll work
[13:08:14] <bstrie> dbaupp: but also, I don't know if dst means that my time zone is currently any of the following from utc: -4 -5 -6
[13:08:33] <dbaupp> utc is currently 13:06
[13:08:42] <dbaupp> (according to google)
[13:08:51] <bstrie> ok. someone submit a patch to wolfram alpha
[13:13:19] *** Joins: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP)
[13:17:26] *** Joins: Blub\w (wry@moz-145C9195.wireless.dyn.drei.com)
[13:23:12] *** Joins: MaikKlein (Mibbit@moz-FEF1CEA6.dip0.t-ipconnect.de)
[13:25:32] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:28:07] *** Quits: fabiand (fabiand@moz-F997017D.adsl.alicedsl.de) (Ping timeout)
[13:28:26] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[13:30:26] <thiez> why do we call C for things like 'fmin' and 'fmax'?
[13:32:41] *** Joins: fabiand (fabiand@moz-F997017D.adsl.alicedsl.de)
[13:32:59] <bstrie> thiez: where? I figured we were using llvm intrinsics for those
[13:33:56] *** Joins: SimonSapin (simon@5AAE35B2.5EFFC0B8.24454B25.IP)
[13:34:31] <thiez> libstd/num/f32.rs uses libstd/num/cmath.rs which has 'link_name="m",abi="cdecl"' pub extern fmin/fmax
[13:34:52] <engla> I'd guess fmin and so on are not as simple as they seem due to special float values like NaN.
[13:35:33] *** Quits: Diamond (Mibbit@moz-625C0DAF.ks.ok.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:36:14] <thiez> I think they may really be that simple, as the Orderable impl for f32 explicitly checks both arguments for is_NaN() before calling fmin(*self,*other)
[13:36:29] <thiez> (same for fmax)
[13:37:31] <engla> libc docs say fmin only returns NaN if both arguments are.. so yes, the behavior is different
[13:37:48] <thiez> odd :)
[13:38:18] <thiez> still, it would be nice to have these things inlined?
[13:39:41] <engla> searching for fmin => apparently fmin is good for performance? https://github.com/bjz/rust/commit/6cc7107aa6ca78093cb81aed44170099b8fad68a
[13:41:06] <thiez> perhaps the commit text is wrong, as it suggests fmin and fmax are intrinsics
[13:41:36] <engla> yes
[13:48:38] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[13:49:04] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:49:17] <thiez> in glibc fmin appears to be implemented as 'return (islessequal (x, y) || isnan (y)) ? x : y;'
[13:49:38] <thiez> maybe it's really as simple as it looks :)
[13:56:11] *** Quits: MaikKlein (Mibbit@moz-FEF1CEA6.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[13:56:32] <engla> what if llvm can replace it by an intrinstic
[13:57:25] <thiez> it doesn't, I have a callgrind of a program compiled with rustc --opt-level 3
[13:58:08] <thiez> it cantoains 955313929 calls to fmin, the same number to fmax, and 889118992 calls to fminf__c_stack_shim and fmaxf__c_stack_shim :(
[13:58:11] <thiez> contains*
[13:59:37] <thiez> besides, llvm has no intrinsics for fmax and fmin :)
[13:59:38] <dbaupp> bjz: ping
[14:04:57] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:05:29] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:06:51] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[14:09:10] *** Joins: milinda (milinda@311C3DAD.7CFC0820.51B6877.IP)
[14:10:55] *** Quits: victorporof (victorporo@F0489234.3C60C00D.4A6B528C.IP) (Connection reset by peer)
[14:11:13] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[14:11:59] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:14:10] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:14:56] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:20:16] *** Joins: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[14:25:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:26:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:29:54] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:31:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:31:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/lMr20g
[14:31:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:33:59] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:33:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1GKIvA
[14:33:59] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:34:02] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:34:02] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/nSfQAQ
[14:34:02] <ghrust> 13rust/06auto 149ab2921 15Daniel Micay: use the type's alignment for generated memsets
[14:34:02] <ghrust> 13rust/06auto 14844b5cf 15bors: auto merge of #6794 : thestinger/rust/align_zero, r=pcwalton...
[14:34:02] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:38:18] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[14:41:07] <bstrie> has there been a new snapshot since fixing the memory regression?
[14:41:16] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:42:57] <thiez> most recent snapshot appears to be 17th of may
[14:45:38] <bstrie> I'm really impressed at how the bug count has plateaued at ~1280 since introducing the weekly random triage thing
[14:48:22] <thiez> are you suggesting we got worse at finding bugs? :p
[14:48:52] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:49:34] <bstrie> the problem now is that there seems to be a steadily increasing sedimentary layer of bad and stale pull requests
[14:50:30] <jdm> looks like it's a zero sum game
[14:50:43] <bstrie> the only winning move is not to commit
[14:50:47] *** Quits: milinda (milinda@311C3DAD.7CFC0820.51B6877.IP) (Input/output error)
[14:51:16] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:53:42] *** Joins: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP)
[14:54:47] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[14:55:15] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Ping timeout)
[15:00:08] *** Quits: jviereck (Adium@moz-A2DCE0DD.dclient.hispeed.ch) (Quit: Leaving.)
[15:01:19] *** Joins: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net)
[15:01:21] *** cscottnet is now known as cscottnet_away
[15:01:32] *** cscottnet_away is now known as cscottnet
[15:01:41] *** Quits: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP) (Ping timeout)
[15:02:29] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Ping timeout)
[15:02:47] *** cscottnet is now known as cscottnet_away
[15:03:26] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[15:03:38] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[15:03:40] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[15:04:54] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[15:10:43] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:14:45] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:16:12] *** Joins: aruniiird (arun@moz-3DB73AA5.azulsystems.com)
[15:17:15] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:27:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:28:35] <thiez> engla: native Rust implementations of fmin/fmax appear to give a noticeable performance improvement
[15:32:54] *** Joins: pyrac (pyrac@9F71F32A.73C89388.AD05C589.IP)
[15:33:52] *** Joins: sk (sk@EA324BFE.54A580E3.78DD174B.IP)
[15:34:48] *** Quits: pyrac (pyrac@9F71F32A.73C89388.AD05C589.IP) (Ping timeout)
[15:37:10] <engla> that's nice
[15:37:36] <thiez> I suppose in an ideal world we'd be able to inline the C versions
[15:38:48] <thiez> but perfect is the enemy of good so I suppose I'll submit a PR later tonight :p
[15:43:14] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[15:46:22] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[15:46:32] *** Quits: xazax (Mibbit@6655692F.3B222813.3F580572.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:48:22] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[15:48:58] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:48:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/nSfQAQ
[15:48:59] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:49:18] *** kimundi is now known as zz_kimundi
[15:49:26] *** Joins: wgwioc (Mibbit@4E3CB6F6.CC39ED62.A6B143F1.IP)
[15:50:46] *** Quits: sk (sk@EA324BFE.54A580E3.78DD174B.IP) (Quit: Leaving)
[15:51:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:51:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/TZKjjA
[15:51:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:51:49] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:51:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/erzldg
[15:51:49] <ghrust> 13rust/06auto 14b1e7d49 15Steven Fackler: Generalized implementation of FromBase64...
[15:51:49] <ghrust> 13rust/06auto 14a037fa4 15bors: auto merge of #6796 : sfackler/rust/FromBase64-type-fix, r=bstrie...
[15:51:49] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:53:25] <bstrie> oh weird... I guess, in the absence of a priority, bors orders PRs by the date the PR was filed rather than the date the r+ was given
[15:53:42] <strcat> bstrie: yes, oldest PRs first
[15:54:02] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:54:05] <bstrie> good to know
[15:55:15] *** zz_kimundi is now known as kimundi
[15:55:22] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:58:06] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:00:39] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:02:29] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:03:34] <strcat> rusti: 1
[16:03:35] -rusti- 1
[16:03:51] <strcat> rusti: std::run::process_output("rustc", [~"--version"]);
[16:03:52] -rusti- ()
[16:03:55] <strcat> huh.
[16:04:21] <strcat> rusti: str::from_bytes(std::run::process_output("rustc", [~"--version"]).output)
[16:04:22] -rusti- ~"rustc 0.6 (d7e1f08 2013-05-28 13:35:05 -0700)\nhost: x86_64-unknown-linux-gnu\n"
[16:04:23] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:04:48] *** Joins: mib_z6t39e (Mibbit@moz-FD9A8D70.tvc-ip.com)
[16:06:16] *** Joins: MaikKlein (sabayonuse@moz-FEF1CEA6.dip0.t-ipconnect.de)
[16:07:14] <mib_z6t39e> hi, new to rust. one quick question. what does the symbol ' mean, e.g. 'self? saw it in a couple of places but could not get the meaning of it. thanks.
[16:07:32] <erickt> mib_z6t39e: 'foo is a region
[16:07:50] <bstrie> also known as a lifetime
[16:08:01] <strcat> covered in the borrowed ptr tutorial
[16:08:20] <mib_z6t39e> ok. will check the turtorial. thanks.
[16:08:24] <erickt> mib_z6t39e: http://static.rust-lang.org/doc/tutorial.html#borrowed-pointers
[16:09:10] <nmatsakis> erickt: ping
[16:09:30] * bstrie has just now realized that people with mib_ names are using the mibbit client
[16:09:41] <erickt> good morning nmatsakis!
[16:09:49] <MaikKlein> hm
[16:10:12] <MaikKlein> MaikKlein: ping
[16:10:17] <MaikKlein> :(
[16:10:29] <nmatsakis> erickt: I wanted to ask you if you've given any further thought to this matter of making &self "like any other argument"
[16:10:46] <nmatsakis> erickt: or if you've been too busy lately
[16:11:31] <strcat> bstrie: huh, I thought they were all the same person.
[16:11:58] <TD-Linux> iirc mibbit lets you use any username
[16:12:13] <erickt> nmatsakis: I have, but haven't gotten that far. My current progress is trying to clean up some of the messiness with all the expr variants that may or may not be methods. Here's my latest branch: https://github.com/erickt/rust/commits/trans-self20
[16:12:14] <bstrie> I think it gives you a default one though
[16:12:30] *** Joins: mib_78qkcd (Mibbit@moz-D5A1D0F5.members.linode.com)
[16:12:33] <strcat> weechat only peeks at the front of the name to determine the color hash so the mib_ ones are all green ;p
[16:12:33] <mib_78qkcd> yup
[16:12:41] *** Quits: mib_78qkcd (Mibbit@moz-D5A1D0F5.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:13:00] *** Joins: igl1 (igl@moz-6E374773.adsl.alicedsl.de)
[16:13:02] *** Joins: jack (jack@2557E599.66715431.D25A875A.IP)
[16:13:17] *** jdm is now known as jdm|away
[16:13:25] <bstrie> MaikKlein: MaikKlein was looking for you
[16:13:30] <bstrie> thought you ought to know
[16:13:56] *** Quits: igl (igl@moz-469BCB2E.adsl.alicedsl.de) (Ping timeout)
[16:14:34] <erickt> nmatsakis: this whole thing has got me starting on thinking about getting rid of the expr_assign_op, and splitting the expr_binary variant into one variant that are calls to trait methods, and one thats for boolean operations that have no corresponding method
[16:16:02] <nmatsakis> erickt: I don't believe we can do that split. 
[16:16:17] <nmatsakis> erickt: we'd have to rewrite the AST, which we don't (currently) do, and if we were going to do that, I'd ...not want to do it that way
[16:16:24] <MaikKlein> bstrie: ah I just was curious, thanks :p
[16:16:25] <nmatsakis> erickt: however---I agree the current situation is kind of annoying
[16:16:33] <nmatsakis> erickt: and in particular expr_assign_op is a complete mess
[16:16:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:17:16] <nmatsakis> erickt: I had some vague plans to create a kind of "overloadable operator" table that you would always consult,
[16:17:25] <nmatsakis> erickt: but I'm not sur eit'd really be an improvement
[16:17:42] <nmatsakis> erickt: what I meant is: I wanted to try and make it look like we were always invoke methods for expr_binary right up until trans
[16:17:58] <nmatsakis> erickt: but I never thought that through very hard.
[16:19:26] <erickt> nmatsakis: yeah. I was hoping with this branch I could discover and remove some nice redundancies, but so far it hasn't panned out yet
[16:19:49] <nmatsakis> erickt: I've been wanting to do the "move callee id into variants" change, that'd be nice. I kind of hoped that the presence of a callee id might also help
[16:19:56] <nmatsakis> erickt: to remind people that expr_binary etc can be overloaded
[16:20:15] * strcat wonders if rust could use CLONE_VM for tasks and MAP_SHARED for the exchange heap
[16:20:18] <nmatsakis> erickt: you know about the plan for assign_op and overloading?
[16:20:32] <strcat> that would be cool...
[16:20:54] <erickt> nmatsakis: I think those commits are ready to be pushed upstream, I just need to make sure it still builds after my rebase this morning. I'll factor it out into a pull request
[16:21:05] <erickt> nmatsakis: I do not know the plan for assign_op and overloading
[16:23:35] *** Quits: wgwioc (Mibbit@4E3CB6F6.CC39ED62.A6B143F1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:24:50] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[16:24:50] *** ChanServ sets mode: +qo graydon graydon
[16:25:07] <nmatsakis> erickt: basic idea is to add a distinc trait for `+=` and friends
[16:25:20] <nmatsakis> erickt: which would be something like `fn add_eq(&mut self, v: &T)`
[16:25:31] <nmatsakis> erickt: that would make it much more straight-forward to work with `+=` and overloaded operators,
[16:25:44] <nmatsakis> erickt: since it's not syntactic sugar for `x = x + 3` anymore
[16:25:58] <erickt> nmatsakis: ah, that sounds reasonable
[16:26:03] <nmatsakis> erickt: it also makes things like "vec += elt" more efficient
[16:26:18] <strcat> nmatsakis: really need it for bigints too
[16:26:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:26:32] *** Joins: eholk (eholk@moz-34E444EA.uconnect.utah.edu)
[16:28:27] <engla> nmatsakis: wait.. will += be inconsistent with + for vectors?
[16:28:28] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Connection reset by peer)
[16:29:13] <graydon> engla: not inconsistent, just faster
[16:29:21] <graydon> or, well, depends what you mean by "inconsistent"
[16:29:44] <engla> vec += elt would mean vec = vec + elt. Can you add ~[T] + T today?
[16:30:01] <strcat> nmatsakis: I guess we can't do 'a += a' though? without &const
[16:30:04] <graydon> oh, that
[16:30:09] <strcat> nmatsakis: the gmp API takes bin_op(output, input, input2) so that doesn't play well with our aliasing rules without using &const
[16:30:33] <MaikKlein> isn't const and immutable the same thing?
[16:30:41] <graydon> hm. another build-time regression. this time hit everything.
[16:30:47] <strcat> &const means a read-only reference to a potentially mutable thing
[16:30:54] <strcat> & guarantees the object is immutable
[16:30:58] <graydon> the LLVM optimizations change
[16:31:14] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:31:18] <MaikKlein> ah okay thanks
[16:31:46] <nmatsakis> engla: I probably should have written vec += [elt]
[16:31:48] <strcat> nmatsakis: I guess adding something to itself isn't a very compelling use case though ;p
[16:31:52] <strcat> easy to work around
[16:32:08] <nmatsakis> graydon: "hit everything"?
[16:32:20] <graydon> nmatsakis: all 3 platforms
[16:32:25] <pnkfelix> nmatsakis: windows+mac+linux
[16:32:29] <graydon> http://huonw.github.io/isrustfastyet/
[16:32:31] <pnkfelix> nmatsakis: see http://huonw.github.io/isrustfastyet/
[16:32:51] *** Quits: eholk (eholk@moz-34E444EA.uconnect.utah.edu) (Quit: eholk)
[16:32:58] <nmatsakis> graydon: might be my change that moved checking of moves from liveness into borrowck...
[16:33:05] <nmatsakis> graydon: ...I expected some (temporary) perf regression there
[16:33:09] *** Joins: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP)
[16:33:21] <nmatsakis> graydon: ...though that seems higher than I anticipated.
[16:33:24] <pnkfelix> (I've been trying to understand what happened, but I guess Graydon's intuition is better than my lack of knowledge)
[16:33:26] <strcat> graydon: maybe from mergefunctions
[16:33:36] <strcat> graydon: it's not enabled by default, so that could be why - are the binaries smaller now?
[16:33:39] <graydon> nmatsakis: the culprits are identified in the graph, there's no need to speculate which one. just "why" :)
[16:33:50] <graydon> strcat: lemme check
[16:34:06] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[16:34:30] <nmatsakis> graydon: ah, true.
[16:35:33] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Ping timeout)
[16:35:39] <strcat> graydon: I think one day we could have sandboxed tasks which would be cool.
[16:35:51] <strcat> we could make them to processes on linux and use MAP_SHARED for the exchange heap
[16:36:04] <nmatsakis> strcat: it seems like being able to convert ~ to @ would be relevant to that
[16:36:28] <graydon> I wanted to experiment with that someday, but .. 5 years of "just getting the language stable" has interrupted :)
[16:36:31] * strcat is curious about whether CLONE_VM costs anything if you don't write much
[16:37:10] <strcat> graydon: yeah, I've just gotten interested in the sandboxing stuff now thanks to the eval bot ;p
[16:37:39] <graydon> :)
[16:37:39] <strcat> anyway it seems like servo would want the JIT sandboxed that way
[16:38:34] <strcat> my reinvention of lxc is arguably nicer now, at least for the use case of running one process
[16:38:41] <strcat> can't host an OS
[16:38:54] <graydon> early designs of the language had two distinct ways to make something unsafe into something safe: one was to list an auth line in the (central, visible) crate file; one was to put the culprit in a subprocess domain.
[16:39:09] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[16:39:12] <graydon> but we have drifted very far from there, in the meantime
[16:39:58] <erickt> nmatsakis: what do you think about the idea of replacing the compiler-supplied "x + y" support with libstd impls of Add that wrap a call to an intrinsic function?
[16:40:09] *** Quits: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[16:40:15] <strcat> erickt: const exprs
[16:40:26] <erickt> strcat: curses!
[16:40:41] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Quit: Leaving)
[16:41:01] <strcat> although I still think it would be cool to solve that by allowing eval!() ...
[16:41:38] <strcat> problem with C++'s way is that you have no real idea about what you're running at compile-time from looking at the code
[16:42:59] <strcat> rusti: print(str::from_bytes(std::run::process_output("ps", []).output))
[16:43:00] -rusti-   PID TTY          TIME CMD
[16:43:00] -rusti-     1 ?        00:00:00 foo
[16:43:00] -rusti-    14 ?        00:00:00 ps
[16:43:00] -rusti- ()
[16:43:06] <thiez> D has nice compile-time-function-evaluation
[16:43:23] <nmatsakis> erickt: I thought about it, but ... yes, what strcat  said :)
[16:43:25] <thiez> or 'CTFE', as they like to call it :)
[16:43:31] *** Joins: blitter (blitter@moz-E761A52F.dyn.centurytel.net)
[16:43:37] <strcat> heh I wonder where I spawn thirteen processes
[16:43:40] <nmatsakis> erickt: also, we will be generating some *really* inefficient input to LLVM :) but then I guess we do that already
[16:43:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:43:56] <nmatsakis> erickt: but basically what I had thought was to do *almost* that, except that we essentially add another kind of method map entry
[16:44:03] <nmatsakis> erickt: method_intrinsic_op(binary_op)
[16:44:28] <strcat> linux certainly has a lot of syscalls.
[16:44:31] <nmatsakis> erickt: but I'm not sure if this would really work out cleaner
[16:48:28] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:48:54] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[16:50:26] <kimundi> strcat: Could you modify rusti in such a way that it prints "-no output produced-" in case it doesn't print anything else? Could then get rid of both "()"-output and non-responses.
[16:50:35] *** Quits: z0w0 (zack@moz-3D293670.lnse1.woo.bigpond.net.au) (Quit: Leaving.)
[16:50:41] <strcat> kimundi: yes
[16:51:13] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[16:53:23] <strcat> rusti: 5
[16:53:24] -rusti- 5
[16:53:26] <strcat> rusti: 5;
[16:53:37] <erickt> nmatsakis: unfortunately I'm getting pulled into a meeting, back in a bit
[16:53:49] *** Joins: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net)
[16:54:08] *** Joins: jviereck (Adium@moz-D04610E3.dclient.hispeed.ch)
[16:57:05] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:57:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:57:29] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[16:57:44] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[16:57:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:57:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:58:03] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[16:58:26] <strcat> rusti: 5
[16:58:27] -rusti- 5
[16:58:28] <strcat> rusti: 5;
[16:59:51] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:00:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[17:00:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:00:11] <strcat> rusti: 5;
[17:01:49] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:01:49] *** ChanServ sets mode: +o dherman
[17:02:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[17:02:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:02:27] <strcat> rusti: 5 + 5
[17:02:28] -rusti- 10
[17:02:29] <strcat> rusti: 5 + 5;
[17:02:30] * rusti produced no output
[17:02:46] <kimundi> he :)
[17:03:30] *** Joins: Guest (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[17:04:14] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:04:20] *** Quits: drak3 (drak3@moz-447E71B8.dip0.t-ipconnect.de) (Ping timeout)
[17:04:33] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:04:36] <kimundi> rusti: print("foo")
[17:04:37] -rusti- foo
[17:05:36] *** Quits: Blub\w (wry@moz-145C9195.wireless.dyn.drei.com) (Quit: bb)
[17:05:42] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[17:07:18] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[17:08:45] *** Quits: MaikKlein (sabayonuse@moz-FEF1CEA6.dip0.t-ipconnect.de) (Ping timeout)
[17:09:02] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[17:09:21] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:10:40] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:10:41] <strcat> I guess I should be re-raising signals again
[17:10:53] <strcat> rusti: unsafe { libc::abort() }
[17:10:55] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HbJL
[17:11:07] <strcat> rusti: fn foo() { unsafe { libc::abort() } } foo()
[17:11:13] -rusti- timeout triggered!
[17:11:16] <pnkfelix> hmm.  turning on ccache brings the llvm rebuild time from 960 seconds to 126 seconds.  Maybe I'll see about putting up a pull request to integrate ccache into our build (instead of making user hack their path to redirect gcc/clang)
[17:11:25] <strcat> huh.
[17:11:27] <strcat> rusti: fn foo() { unsafe { libc::abort() } } foo()
[17:11:32] -rusti- timeout triggered!
[17:12:18] <strcat> rusti: oh maybe my epoll loop doesn't catch signals
[17:12:18] -rusti- foo.rs:8:12: 8:17 error: expected `;` or `}` after expression but found `maybe`
[17:12:18] -rusti- foo.rs:8          oh maybe my epoll loop doesn't catch signals
[17:12:18] -rusti-                      ^~~~~
[17:12:22] <strcat> ugh
[17:12:35] <Eridius> haha
[17:12:50] *** Joins: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr)
[17:12:51] <nmatsakis> strcat: this is not Applescript
[17:12:58] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:12:58] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/erzldg
[17:12:58] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:13:04] <nmatsakis> strcat: you can't expect some random English sentence to parse.
[17:13:07] <strcat> :D
[17:13:19] <strcat> rusti: std::run::process_status("sh", ~[~"-c", ~"yes > /tmp/foo"])
[17:13:20] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IKGX
[17:13:29] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[17:13:41] <strcat> rusti: std::run::process_status("dash", [~"-c", ~"yes > /tmp/foo"])
[17:13:42] -rusti- rust: task failed at 'failure in dup2(in_fd, 0): Bad file descriptor', /build/rust-incoming-git/src/rust/src/libstd/run.rs:658
[17:13:42] -rusti- rust: domain main @0x1a3c1b0 root task failed
[17:13:42] -rusti- 0
[17:13:45] <strcat> huh
[17:13:52] <strcat> some syscall I didn't whitelist
[17:13:53] <strcat> hm.
[17:14:18] <strcat> or process_status doesn't work :)
[17:14:25] <strcat> rusti: std::run::process_output("dash", [~"-c", ~"yes > /tmp/foo"])
[17:14:28] -rusti- {status: 1, output: ~[], error: ~[]}
[17:15:38] <strcat> huh
[17:15:43] <strcat> we're doing something really terrible
[17:16:18] <strcat> we make 1024 close calls when we fork
[17:16:22] <strcat> syscalls
[17:16:30] <strcat> anyway that's not the problem just terrible ;p
[17:17:37] <graydon> that is terrible
[17:17:42] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:18:39] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[17:18:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:18:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/VwrVqg
[17:18:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:18:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:18:47] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/oGU02Q
[17:18:47] <ghrust> 13rust/06auto 14f171cec 15Alex Crichton: Make missing documentation linting more robust...
[17:18:47] <ghrust> 13rust/06auto 142077b50 15Alex Crichton: Allow doc(hidden) and --test to disable doc linting
[17:18:48] <ghrust> 13rust/06auto 14b366277 15Alex Crichton: Require documentation by default for libstd...
[17:18:50] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:19:22] * strcat doesn't really understand why it fails
[17:19:36] <strcat> rusti: std::run::process_status("true", [])
[17:19:37] -rusti- rust: task failed at 'failure in dup2(in_fd, 0): Bad file descriptor', /build/rust-incoming-git/src/rust/src/libstd/run.rs:658
[17:19:37] -rusti- rust: domain main @0xf441b0 root task failed
[17:19:37] -rusti- 0
[17:21:42] <strcat> graydon: http://ix.io/5QK run::process_output ;p
[17:22:19] <graydon> strcat: interesting!
[17:22:20] <graydon> (awful)
[17:25:00] *** Quits: SimonSapin (simon@5AAE35B2.5EFFC0B8.24454B25.IP) (Quit: Leaving.)
[17:26:55] <pnkfelix> graydon: if a bug has a maturity milestone assigned but no record of ever being nominated and highly suspicious (as in, likely to have been assigned a milestone by the original filer), then I should just remove the milestone marking, right?
[17:27:17] <graydon> pnkfelix: nominate for discussing it
[17:27:34] <graydon> lots showed up through mass-milestone-reassignment, yes. those should get picked off during triage over time.
[17:27:43] <pnkfelix> (then again, the bug in quesiton, Issue 4695, is four months old, so I guess it must have been put on the maturity milestone, probably in your mass-reassingment)
[17:29:57] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:31:07] *** Joins: lkuper_ (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[17:31:20] <bblum> strcat: EBADF means in_fd is not open? maybe an earlier open() needs its return value checked?
[17:31:58] <strcat> bblum: maybe, it does run fine outside of the sandbox I'm using
[17:32:16] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:32:16] <bblum> yeah, that's why i'm betting the root cause is earlier :P
[17:32:22] <strcat> we don't check syscalls well
[17:32:33] <strcat> I might start submitting patches for those
[17:32:36] <strcat> easy to find with seccomp ;p
[17:32:54] <strcat> I can set $SYSCALL to always give $ERRNO
[17:33:19] <mark_edward> Is there any way to freeze an an "@mut T"  value?
[17:35:44] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[17:35:52] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[17:35:52] *** ChanServ sets mode: +o pcwalton
[17:35:57] <strcat> mark_edward: well it's frozen when you borrow a pointer to it
[17:36:04] <strcat> but there isn't a way to permanently freeze it
[17:36:29] <Eridius> strcat: how does that work if you have multiple @mut T's with the same value?
[17:36:50] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:36:50] *** ChanServ sets mode: +o brson
[17:36:54] <mark_edward> ok thanks. for reference, i was forced to  stuff a map into an @mut box
[17:36:59] <mark_edward> by this error: https://github.com/mozilla/rust/issues/5982
[17:37:01] <graydon> strcat:         // close all other fds
[17:37:01] <graydon>         for int::range_rev(getdtablesize() as int - 1, 2) |fd| {
[17:37:01] <graydon>             close(fd as c_int);
[17:37:01] <graydon>         }
[17:37:09] <mark_edward> and i wanted to return a frozen map
[17:37:30] <pcwalton> so my patch has been bitrotting instantly :(
[17:37:32] <Eridius> mark_edward: hah that's my issue
[17:37:55] <Eridius> mark_edward: does it have to be a @ box?
[17:38:03] <graydon> pcwalton: ok, which one?
[17:38:16] <pcwalton> graydon: remove module reexports from the prelude
[17:38:20] *** jdm|away is now known as jdm
[17:38:22] <strcat> graydon: I think the usual way to deal with it is make all the open calls use FD_CLOEXEC
[17:38:22] <pcwalton> I'll try landing it a few more times
[17:38:25] <strcat> maybe there's an alternative
[17:38:45] <graydon> strcat: the point is to disconnect the process from even inherited fds
[17:38:47] <mark_edward> Eridius: as far as i can tell. trying it with an ~mut box didn't seem to work.
[17:38:52] <graydon> (not sure _why_, but I'm pretty sure)
[17:39:03] <Eridius> mark_edward: in the code in that issue, in current incoming, using @ doesn't work either
[17:39:04] <cmr> mark_edward: ~mut doesn't exist
[17:39:05] <graydon> pcwalton: happy to turn off bors for a bit if you want stability-for-landing
[17:39:10] <pcwalton> I'll try a few times
[17:39:15] <Eridius> it works in 0.6, but that's because the borrow checker wasn't doing the right thing with @
[17:39:36] <mark_edward> is the issue fixed in incoming?
[17:39:58] *** Joins: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:40:05] <pcwalton> ah, this problem should really be a FAQ
[17:40:14] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[17:40:22] <pcwalton> 90% of the problems people see with the borrow checker are trying to insert into a hashmap after using find :)
[17:40:27] <enticeing> should i be using #[link_name] or #[link_args] ?
[17:40:28] <pcwalton> anyway, the solution is to use find_or_insert
[17:40:44] <Eridius> mark_edward: not yet. I had to do tweak my code to use `if match map.find_mut(&block) { None => { true } Some(x) => { *x += 1; false } } { map.insert(block, 0); }
[17:40:54] <Eridius> mark_edward: 
[17:41:13] <pcwalton> it's annoying but it's hard to fix
[17:41:17] <graydon> strcat: on linux at least, /proc/<pid>/fd shows the actual fds
[17:41:22] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[17:41:30] <Eridius> pcwalton: my code can't handle find_or_insert because it needs to modify the existing value if there is one
[17:41:33] <strcat> graydon: yeah I guess we should be reading that
[17:41:35] <graydon> strcat: not sure if there's a better way. we should probably make a linux module for grunging stuff out of /proc, it's quite common
[17:41:41] <nmatsakis> Eridius: there's a bug on that, find_or_insert should return &mut
[17:41:49] <nmatsakis> Eridius: *that* at least is easy to fix
[17:42:08] <Eridius> nmatsakis: but how would I distinguish between it returning a found value or returning my newly-inserted value?
[17:42:22] <mark_edward> Okay, thanks for the help Eridiu. i'll use your workaround.
[17:42:23] <jclements> pcwalton: "core" is a temporary synonym for "std", is that right?
[17:42:27] <mark_edward> i really like rust, and can't wait for things like this to be fixed
[17:42:27] <pcwalton> jclements: right
[17:42:31] <jclements> tnx
[17:42:48] <nmatsakis> Eridius: you wouldn't? the most common use cases mutate the value unconditioanlly....
[17:42:48] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:42:55] <Eridius> I actually would prefer something like fn insert_or_modify(&self, z: T, modify: &fn(a: &T) -> T)
[17:43:12] <nmatsakis> what does that do?
[17:43:16] <nmatsakis> you're missing a parameter, I think
[17:43:17] <Eridius> nmatsakis: in my code, the value is a uint, and if it doesn't exist I need to insert 0. I only increment if it already existed
[17:43:27] <Eridius> nmatsakis: err yeah, I forgot the key
[17:43:39] <Eridius> it would insert if it doesn't exist, or modify by calling the block if it does
[17:43:42] <Eridius> anyway, afk
[17:43:47] <strcat> that can be implementing on top of find_or_insert
[17:44:12] <pcwalton> the basic problem, btw, is that the borrow checker doesn't distinguish between the None case of Option and the Some case
[17:44:20] <pcwalton> and treats any Option<T> as possibly containing a pointer to T
[17:44:22] <nmatsakis> (and can't, not really)
[17:44:24] <jaen> Is there any blog post or github issue or anything with reasoning for ~ inheriting mutability of the name and @ having mutability on the value? Cause I'm not sure if it makes sense to me yet.
[17:44:26] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: rcirc on GNU Emacs 24.2.1)
[17:44:40] <strcat> jaen: because @ isn't owned by a variable
[17:44:44] <nmatsakis> (at least not without alias analysis)
[17:44:50] <nmatsakis> jaen: there are blog posts, though they are somewhat old
[17:44:57] <graydon> strcat: actually, just port this to rust: https://code.google.com/p/psutil/
[17:45:00] <strcat> @mut has dynamic failures for freezing
[17:45:15] <pcwalton> nmatsakis: how do you feel about a FAQ for the hashtable issue
[17:45:17] <graydon> wow, I .. really want that :)
[17:45:21] <pcwalton> it's most of the borrow check confusion these days
[17:45:22] <nmatsakis> jaen: http://smallcultfollowing.com/babysteps/blog/2012/07/24/generalizing-inherited-mutability/
[17:45:26] <strcat> graydon: I'd be interested in working on a linux module with /proc, /sys, etc.
[17:45:28] <nmatsakis> pcwalton: sounds like a good idea to me
[17:45:34] <strcat> graydon: cgroups ;p
[17:45:36] <nmatsakis> pcwalton: I wonder if we could even adapt the error message :)
[17:45:45] <pcwalton> oh yeah, that would be great
[17:45:48] <pcwalton> point to the FAQ
[17:45:50] <nmatsakis> pcwalton: "use find_or_insert :)"
[17:45:52] <jaen> strcat: I figured it's something like that, just would have liked to see the thought process behind that to reach enlightement.
[17:45:57] <jaen> nmatsakis: thanks!
[17:46:16] <strcat> jaen: there are other types like std::rc::RcMut that work like @mut too
[17:46:18] <pcwalton> nmatsakis: btw, I had an idea this morning for a stdlib type, InteriorManagedPtr<T>
[17:46:27] *** Joins: steve_ (steve@moz-5EF6C37C.socal.res.rr.com)
[17:46:31] <strcat> and if RWARC was sound it would work that way
[17:46:33] <nmatsakis> pcwalton: I've wanted for a while to organize something where we have a FAQ for common errors, and include links in the error messages
[17:46:34] <pcwalton> which encapsulates a (@T, *U) tuple
[17:46:34] *** steve_ is now known as steveklabnik
[17:46:43] <pcwalton> where U is an interior part of T
[17:46:55] <steveklabnik> brson: around? trying to compile rust-sdl and failing pretty hard
[17:46:58] <pcwalton> and holds the T alive while you get a pointer to U
[17:47:11] <pcwalton> this is a common pattern in servo and today you have to use a closure
[17:47:16] <bblum> strcat: RWARC isn't sound?
[17:47:25] <strcat> bblum: likely no, does it do dynamic freezing?
[17:47:34] <brson> steveklabnik: I am around
[17:47:44] <strcat> bblum: @mut only became sound recently so... ;p
[17:47:53] <nmatsakis> pcwalton: can't you encode this by passing around &@T values?
[17:48:11] <nmatsakis> pcwalton: that is, something like "fn get_interior_pointer<'a>(v: &'a @T) -> &'a U"
[17:48:12] <bblum> strcat: dynamic freezing in what circumstance? that doesn't strike me as something it should do
[17:48:17] <pcwalton> oh
[17:48:21] <pcwalton> yes, even easier ;)
[17:48:22] <strcat> bblum: does it ever give you & or &mut?
[17:48:41] <pcwalton> anyway, I was just going to do a dynamic check that U is indeed inside of T
[17:48:43] <bblum> yes, either
[17:48:45] <nmatsakis> pcwalton: (or of course &'a T -> &'a U, but sometimes you want to keep a copy of the T)
[17:48:48] <pcwalton> by looking at sizeof T
[17:48:53] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:48:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b1d3b76 to 14a037fa4: 02http://git.io/N3iJvQ
[17:48:53] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:48:53] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:48:53] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/UYCB2A
[17:48:53] <ghrust> 13rust/06auto 14329c962 15Patrick Walton: librustc: Redo the unsafe checker and make unsafe methods not callable from safe code
[17:48:54] <ghrust> 13rust/06auto 14a90eade 15Patrick Walton: libsyntax: Make `drop` no longer a keyword
[17:48:54] <ghrust> 13rust/06auto 145ced931 15Patrick Walton: libsyntax: Stop parsing mutable fields
[17:48:54] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[17:48:55] <pcwalton> and then ensuring that it's within the sizeof T
[17:48:56] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:49:00] <strcat> bblum: well then you can grab &mut and then grab & and then another &mut
[17:49:00] <nmatsakis> pcwalton: I see, well, I could imagine that in some cases you'd want something like that,
[17:49:06] <nmatsakis> pcwalton: in particular if the lifetime of the value is not tied to a stack
[17:49:09] <strcat> bblum: since you can have multiple references to the value
[17:49:11] <nmatsakis> pcwalton: tied to a stack frame
[17:49:12] <bblum> strcat: you can't grab another &mut because it has an rwlock inside
[17:49:14] <pcwalton> yeah, but in this case it is
[17:49:17] <pcwalton> for servo it is
[17:49:27] <strcat> bblum: ah well that's the dynamic freezing then :)
[17:49:36] <steveklabnik> brson: cool. i'm on OSX, and i'm getting error: obsolete syntax: obsolete argument mode
[17:49:42] <bblum> uh... i wouldn't call it that, but okay
[17:49:53] <bblum> yes, it would be unsound in a much more severe way if it did not have an rwlock inside
[17:49:57] <strcat> bblum: well... what if you grab them in the same task? does it deadlock?
[17:50:00] <bblum> yeah
[17:50:47] <strcat> bblum: yeah I guess the concurrency safety prevented it from being unsound in the same way as @mut then
[17:51:30] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[17:52:04] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[17:53:50] *** Reisen is now known as Reiser
[17:53:57] <bblum> you scared me for a minute there 
[17:54:29] <bblum> i was like "i designed RWARC for the old borrow checker; did the new one's changes violate some assumption i made?"
[17:54:55] <strcat> well we have bigger problems like 'let' and closures :)
[17:55:32] *** Quits: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net) (Quit: jorendorff)
[17:56:13] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:56:35] *** Quits: Mowah (Mowah@moz-B9D06A8A.cust.bredbandsbolaget.se) (Ping timeout)
[17:57:39] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[17:57:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:57:47] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14212575d to 14a037fa4: 02http://git.io/N3iJvQ
[17:57:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:57:49] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:57:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/C_V15w
[17:57:49] <ghrust> 13rust/06auto 1414d59af 15june0cho: Fix vec::mut_slice
[17:57:49] <ghrust> 13rust/06auto 14562069c 15bors: auto merge of #6800 : june0cho/rust/issue5984, r=pcwalton...
[17:57:49] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:59:32] <bblum> hey, how about instead of adding one-shot closures, we just add two-shot closures?
[17:59:52] <bblum> they might fail on the second call, but at least they can't fail an arbitrary number of times
[18:00:09] <enticeing> has the syntax for name/vers/etc. changed?
[18:00:22] <Eridius> ok I'm back
[18:00:38] <Eridius> strcat: it can't be implemented on top of find_or_insert() unless you can reserve some sentinel value that means "this didn't exist before"
[18:01:05] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:01:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:01:20] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[18:02:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:02:13] *** Joins: Mowah (Mowah@moz-B9D06A8A.cust.bredbandsbolaget.se)
[18:02:14] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:02:43] <strcat> bblum: I have a feeling there are other holes though. there's code that fails and leaves stuff in a destructible but non-well-defined state
[18:02:52] <strcat> so combined with share memory there are bugs
[18:02:54] <strcat> shared*
[18:03:28] <bblum> um, can you elaborate?
[18:03:32] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:03:32] *** ChanServ sets mode: +o brson
[18:04:01] <strcat> bblum: http://ix.io/5QN that one isn't a great example because it needs ownership of the vector
[18:04:21] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:04:33] *** Joins: mib_346jrj (Mibbit@moz-F3A8E3B5.cable.virginmedia.com)
[18:05:05] *** Quits: mib_346jrj (Mibbit@moz-F3A8E3B5.cable.virginmedia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[18:05:10] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[18:05:10] *** ChanServ sets mode: +o pcwalton
[18:05:17] <bblum> strcat: i don't think i understand what the problem is
[18:05:21] <strcat> bblum: we might have code that does this with &mut
[18:05:27] <thiez> Can someone review this one please? It's a fairly small change https://github.com/mozilla/rust/pull/6803
[18:05:36] <strcat> as in swaps in init() temporarily but can fail in between putting a valid value in
[18:06:07] *** Quits: Guest (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:06:33] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:07:02] <bblum> ah, well, such code would be wrong :P
[18:07:09] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:07:10] <cmr> bblum: NaN < NaN
[18:07:14] <cmr> oops
[18:07:29] <strcat> cmr: syscall whitelist works well :)
[18:07:31] <cmr> rusti: f32::NaN < f32::NaN
[18:07:35] -rusti- false
[18:07:51] <cmr> thiez: I would put the x<y branch first.
[18:07:54] <thiez> rusti: let x = f32::NaN; x == x
[18:07:55] -rusti- false
[18:08:20] <thiez> cmr: have to check for NaN first I think
[18:08:21] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:08:44] <cmr> thiez: if either are NaN, if will be false, and the other branches will be taken
[18:08:50] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[18:09:05] *** Joins: samnardoni (samnardoni@moz-3EADE9A3.dab.02.net)
[18:09:08] <cmr> rusti: 3 < f32::NaN
[18:09:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iFgO
[18:09:21] <thiez> rusti: 3f32 < f32::NaN
[18:09:22] -rusti- false
[18:09:22] <cmr> rusti: 3f32 < f32::NaN
[18:09:24] -rusti- false
[18:09:34] <thiez> rusti: f32::NaN < 3f32
[18:09:35] -rusti- false
[18:10:23] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[18:10:25] <strcat> cmr: funny how C++ doesn't have an actually usable binary search in the stdlib.
[18:10:47] <strcat> you get lower_bound and upper_bound which do more work
[18:10:54] <strcat> and equal_range which is even more
[18:11:00] *** Joins: eholk (eholk@moz-34E444EA.uconnect.utah.edu)
[18:11:13] <strcat> and std::binary_search should return an iterator but gives you a crappy bool :(
[18:11:37] <strcat> and std::ifstream is terrible, there's no way to get the reason opening the file failed...
[18:11:44] <strcat> rust doesn't have to do much to compete ;p
[18:11:50] <cmr> Yeah
[18:12:14] <strcat> I guess nowadays you'd just use boost filesystem
[18:13:04] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[18:13:12] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Client exited)
[18:13:51] <strcat> and there's silly bsearch.
[18:14:02] *** otters is now known as joelteon
[18:14:03] <strcat> yay for function pointer parameters with data parameters.
[18:14:07] <strcat> without*
[18:14:17] <Blei> why does lower_bound do more work than necessary?
[18:14:27] <deepdog> Hey guys. I'm trying to build rust/incoming but it fails with no rule for make target 'all' in llvm/x86_64-unknown-linux-gnu/lib/Support
[18:14:37] *** Quits: eevee (eevee@moz-A20C5AE8.evrt.wa.frontiernet.net) (Ping timeout)
[18:14:46] <strcat> Blei: because it doesn't return the first value it finds
[18:14:55] <strcat> Blei: and it doesn't tell you if the value wasn't found
[18:14:59] <Blei> oh, i didn't consider duplicates
[18:15:02] <strcat> {1, 2, 3, 4, 8, 10, 11}
[18:15:05] <enticeing> how do you handle c functions that take a variable number of arguments?
[18:15:06] <strcat> lower_bound 5
[18:15:12] <strcat> will return a ref to 4
[18:15:21] <thiez> cmr: so you would something like 'fmax: if x>=y {x} else if x.is_NaN() {y} else if y.is_NaN() { x } else { y } ?
[18:15:22] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[18:15:26] <strcat> so it walks to the bottom of the range and also forces an extra comparison at the end
[18:16:01] <cmr> thiez: yep. 
[18:16:08] <cmr> thiez: fwiw the glibc implementation is (islessequal (x, y) || isnan (y)) ? x : y;
[18:16:17] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[18:16:17] *** ChanServ sets mode: +o dherman
[18:16:32] <thiez> nice, I'll change it to that
[18:16:56] *** Quits: joelteon (joel@moz-82AAB099.rs) (Quit: bye)
[18:17:19] <strcat> enticeing: you can't
[18:17:22] <strcat> you can wrap them in C
[18:17:26] *** Joins: otters (joel@moz-82AAB099.rs)
[18:17:47] <enticeing> okay, thanks
[18:17:50] *** Joins: eevee (eevee@moz-A20C5AE8.evrt.wa.frontiernet.net)
[18:18:06] <enticeing> i'll just limit it on the rust side then
[18:19:09] <strcat> cmr: it's already much nicer than lxc :)
[18:19:44] <strcat> whitelisting syscalls by name, cli switches, tmpfs is accounted as part of the cgroup limit, doesn't have to lock the container dir
[18:20:03] <deepdog> I've looked in llvm/x86_64-unknown-gnu/lib/Support/Makefile and it's empty.
[18:20:53] <strcat> and it does setgid/setuid/setgid.
[18:20:56] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[18:21:01] <strcat> I guess lxc is almost entirely aimed at hosting OSes
[18:21:41] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:22:39] <kimundi> deepdog: Try recloning, sounds like something went wrong.
[18:23:11] <graydon> huh. weird. putting an extern block with a #[link_name="t"] attribute doesn't seem to induce a -lt argument in the gcc link command line
[18:23:18] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:23:24] <deepdog> kimundi: Thanks I'll try.
[18:23:27] <cmr> thiez: especially in math routines, micro-optimization is good, and branch order matters
[18:23:48] *** otters is now known as joelteon
[18:23:53] <strcat> graydon: yeah it doesn't work anymore
[18:23:57] <strcat> graydon: it was for extern mod only
[18:24:05] * strcat ran into that
[18:24:32] <thiez> cmr: naturally. it's kind of silly, I did actually look at their source to see if fmin and fmax required any special magic besides checking for NaN
[18:24:45] <mark_edward> is there a way to construc tglobal constants
[18:24:49] <graydon> strcat: uh, ok, how do I ask for a library to be linked?
[18:24:58] <strcat> graydon: #[link_name = "-lfoo"]
[18:25:00] <thiez> anyway, it's fixed now
[18:25:05] <graydon> strcat: !
[18:25:11] <graydon> strcat: where?
[18:25:12] <Eridius> strcat: link_args no?
[18:25:13] <strcat> graydon: err
[18:25:18] <strcat> graydon: #[link_args = "-lfoo"]
[18:25:23] <Eridius> graydon: #[link_args = "-lfoo"] extern { ... }
[18:25:27] <strcat> my brain is a bit buggy... ;p
[18:25:30] <graydon> oh gosh
[18:25:37] <graydon> that is .. I do not like that one bit! oh well
[18:25:42] <doener> mark_edward: static c: int = 5;
[18:25:49] <Eridius> graydon: yeah I don't like it either. I miss my extern mod
[18:25:53] <strcat> graydon: well we should make link_name work
[18:26:02] <graydon> yeah
[18:26:27] <mark_edward> doener: can it be done if a function needs to compute them?
[18:26:30] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[18:27:28] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[18:27:32] <doener> mark_edward: AFAIK, no. A macro might work, but I'm not sure
[18:27:48] *** Joins: snearch (snearch@moz-B2303D4D.pool.mediaways.net)
[18:28:00] <mark_edward> ok thanks. i just wanted a vector of paths, that need to be generated by appending numbers to strings
[18:28:18] <mark_edward> it's a lot, so i didn't want to type it out by hand. how would you go about ti?
[18:28:31] *** Quits: KindOne (KindOne@moz-3E4620C6.dynamic.ip.windstream.net) (Client exited)
[18:29:54] <doener> I'd have to read up on macros first, I have no idea whether they're currently capable of supporting that use case
[18:30:21] <mark_edward> ok
[18:31:21] <jclements> mark_edward: if generating the source code requires computation--that is, not just pattern rewriting--it can't be a macro, but must instead be a "syntax extension". There are plans to make those user-implementable, but for the moment that requires baking your code into the compiler.
[18:31:57] <Eridius> rust needs constexpr ;)
[18:32:07] <mark_edward> ^^ That's what I was thinking
[18:32:19] <jclements> pauls: ping
[18:32:41] <strcat> jclements: there's a pull request implementing dlopen for syntax exts
[18:32:53] <strcat> don't think it's really finished though
[18:32:59] <jclements> strcat: looking forward to it.
[18:33:26] <jclements> BTW: 270 is the largest number of people I've seen on #rust. Yay, #rust!
[18:33:38] <steveklabnik> woo
[18:33:43] <jensnockert> Constexpr would be <3.
[18:33:48] <deepdog> kimundi: Seems to be working fine now. Thank you. =)
[18:34:45] <jclements> jensnockert: how do I love constexpr? let me count the ways: 2,1,0,-1,-2â€¦ apologies if that's an old joke.
[18:34:46] <strcat> jensnockert: eval!() to compile/run a fragment would be nice, without venturing into adding stuff to the type system
[18:35:11] <strcat> ofc then you can't really define functions and use them :)
[18:35:45] <jensnockert> strcat: That would possibly be another fine way to solve the 'problem'.
[18:35:50] * jensnockert hugs jclements.
[18:35:57] <jclements> strcat: sure you canâ€¦ those are called "3d functions". No, rust doesn't have them. Yes, everyone agrees that they're a terrible idea â€¦
[18:37:07] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Connection reset by peer)
[18:38:36] *** Quits: Mowah (Mowah@moz-B9D06A8A.cust.bredbandsbolaget.se) (Ping timeout)
[18:39:39] <thomaslee> PSA: if anybody here is going to be in Portland, OR in June for OSBridge, we're trying to find some folks for a local Rust meetup around that time. Tim C's going to be in town to speak about Rust at OSBridge & should be dropping by.
[18:39:55] <steveklabnik> i want to go, my partner is speaking at OSbridge, but i cant make it :(
[18:40:52] <thomaslee> curses! :(
[18:41:28] <steveklabnik> june travel: nyc, singapore, san franciso, washington dc, india, athens
[18:41:36] <steveklabnik> couldn't manage to fit portland in there too
[18:43:27] <thomaslee> geez. I'd skip Portland for that kind of schedule too ;)
[18:43:45] <steveklabnik> i am going to die.
[18:43:50] <steveklabnik> but it'll be fun
[18:44:29] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[18:45:07] <thomaslee> conferences or vacation?
[18:46:17] <steveklabnik> all confs
[18:46:25] <steveklabnik> sfo to get the india visa
[18:47:11] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[18:47:29] *** Joins: KindOne (KindOne@moz-3E4620C6.dynamic.ip.windstream.net)
[18:54:14] *** Joins: MaikKlein (sabayonuse@moz-FEF1CEA6.dip0.t-ipconnect.de)
[18:54:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:55:15] *** Quits: MaikKlein (sabayonuse@moz-FEF1CEA6.dip0.t-ipconnect.de) (Client exited)
[18:57:14] <nmatsakis> is it known that something like "match ~[] { x => {} }" crashes? 
[18:57:23] * nmatsakis hates searching github issues
[18:57:35] <nmatsakis> in any case I am in the process of fixing it...
[18:57:43] <nmatsakis> ...along with let bindings...
[18:58:03] <thiez> rusti: match ~[] { x => {} }
[18:58:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eRWE
[18:58:37] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:58:51] <thiez> rusti: match ~[] { ~[1] => {} }
[18:58:52] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AUNh
[18:59:01] <thiez> meh.
[18:59:08] <strcat> rusti: let x: ~[int] = ~[]; match x { y => () }
[18:59:09] * rusti produced no output
[18:59:20] <strcat> rusti doesn't re-raise signals atm
[18:59:21] <strcat> so...
[18:59:27] <strcat> it could be segfaulting or something
[18:59:29] <strcat> ;p
[19:00:22] <Eridius> strcat: well you also used () instead of {}
[19:00:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:00:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/C_V15w
[19:00:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:00:45] <thiez> rusti: let x: ~[int] = ~[]; match x { y => {} }
[19:00:46] * rusti produced no output
[19:00:53] <thiez> doesn't seem to make a difference.
[19:00:57] <strcat> rusti: fn segfault() { libc::abort() } unsafe { segfault() }
[19:00:59] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WOiQ
[19:01:08] <strcat> rusti: unsafe fn segfault() { libc::abort() } unsafe { segfault() }
[19:01:13] -rusti- timeout triggered!
[19:01:20] <strcat> oh right it times out if a signal causes exit
[19:01:27] <thomaslee> steveklabnik, nice -- well, enjoy!
[19:01:28] <strcat> the epoll loop doesn't check for it
[19:01:31] <strcat> I have such a short-term memory
[19:01:33] <strcat> ;p
[19:05:32] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:06:40] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[19:06:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:06:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uG84UA
[19:06:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:06:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:06:46] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/TqcIjw
[19:06:46] <ghrust> 13rust/06auto 14329c962 15Patrick Walton: librustc: Redo the unsafe checker and make unsafe methods not callable from safe code
[19:06:46] <ghrust> 13rust/06auto 14a90eade 15Patrick Walton: libsyntax: Make `drop` no longer a keyword
[19:06:46] <ghrust> 13rust/06auto 145ced931 15Patrick Walton: libsyntax: Stop parsing mutable fields
[19:06:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:07:13] <brson> steveklabnik: updated rust-sdl
[19:07:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:10:13] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[19:10:30] <acrichto> brson: r? https://github.com/mozilla/rust/pull/6733
[19:10:57] *** Quits: vmx (vmx@moz-297A2BBA.pools.arcor-ip.net) (Quit: Leaving)
[19:11:09] <brson> I do think that the scheduler code violates the new assumtions that &mut arguments are noalias
[19:12:04] <strcat> brson: we reverted that for now btw
[19:12:06] <steveklabnik> brson: awesome
[19:12:14] <steveklabnik> brson: so it compiles with current incoming, then?
[19:12:16] <brson> strcat: why?
[19:12:17] <strcat> brson: it needs to be a bit more clever and check for &const and @mut parameters
[19:12:20] <brson> steveklabnik: yes
[19:12:27] <steveklabnik> brson: <3
[19:12:42] <strcat> rusti: let mut x = 5; let y = &const x; let z = &mut x; *z = 10; y
[19:12:43] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZKFf
[19:12:51] *** Quits: eholk (eholk@moz-34E444EA.uconnect.utah.edu) (Quit: eholk)
[19:12:51] <strcat> rusti: let mut x = 5; let y = &const x; let z = &mut x; *z = 10; *y
[19:12:52] -rusti- 10
[19:13:23] <steveklabnik> hmm, my rust is only a couple of days old, but use of undeclared type name `c_int`
[19:13:28] <strcat> rusti: let x = @mut 5; let z = &mut *x; *z = 10; *y
[19:13:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gJMC
[19:13:36] <strcat> rusti: let x = @mut 5; let z = &mut *x; *z = 10; *x
[19:13:37] -rusti- 10
[19:13:40] <EXetoC> steveklabnik: core -> std, std -> extra
[19:13:51] <EXetoC> the names were changed
[19:13:53] <steveklabnik> right
[19:13:55] <joelteon> strcat: is that supposed to be impossible?
[19:14:02] <steveklabnik> i thought this was past that change though
[19:14:09] <strcat> joelteon: no, but we didn't consider it when adding noalias on &mut
[19:14:21] <steveklabnik> i'll just re-build from incoming
[19:14:25] <strcat> we can still have noalias on &mut parameters but it has to check the types of all the parameters for @mut and &const
[19:14:31] *** Joins: jorendorff (jorendorff@moz-FAB36621.hsd1.tn.comcast.net)
[19:14:42] <strcat> &const is close to deprecated (at least, it's an anti-pattern most of the time) and @mut isn't fast anyway so it's not a big issue
[19:15:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:15:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ee34a66 to 14562069c: 02http://git.io/N3iJvQ
[19:15:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:15:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:15:45] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/0Dtn-Q
[19:15:45] <ghrust> 13rust/06auto 14ff86830 15Alex Crichton: Define rustc's host triple at compile time...
[19:15:45] <ghrust> 13rust/06auto 14ba33472 15Alex Crichton: Un-ignore rusti/rustpkg tests on i686
[19:15:45] <ghrust> 13rust/06auto 14d295709 15bors: auto merge of #6733 : alexcrichton/rust/issue-2400, r=brson...
[19:15:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:15:47] *** Joins: Mowah (Mowah@moz-B9D06A8A.cust.bredbandsbolaget.se)
[19:16:16] <strcat> brson: to violate it, it would have to pass an &mut to a function and also pass the same pointer through another parameter and then modify the value through the &mut
[19:16:35] <graydon> brson: can we close https://github.com/mozilla/rust/issues/4514 in favour of https://github.com/mozilla/rust/issues/4330 ? I think the latter is more what we want..
[19:16:56] <strcat> and LLVM might have optimized with the assumption that the other ptr would be independent of the &mut, so the write wouldn't have to be visible through it
[19:17:04] <strcat> for example...
[19:17:06] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[19:17:06] *** ChanServ sets mode: +o tjc
[19:17:28] <strcat> fn foo(xs: &mut [T], ys: &[T]) { read from ys, output to xs }
[19:17:38] *** Joins: met (Mibbit@moz-CFDAF3CB.ip47.fastwebnet.it)
[19:17:41] <strcat> with noalias, LLVM can vectorize that because it knows writing to xs doesn't touch ys
[19:17:43] <strcat> but...
[19:17:47] <strcat> fn foo(xs: &mut [T], ys: &const [T]) { read from ys, output to xs }
[19:17:55] <strcat> it's not allowed to vectorize that - ys can alias with xs
[19:17:57] <strcat> so that was wrong
[19:20:03] <brson> strcat: the scheduler makes heavy use of thread local data. it creates mutable pointers out of thin air
[19:20:16] <brson> i'm assuming that's the same as passing multiple mutable pointers
[19:20:52] <strcat> brson: well if they alias with the &mut it would probably be bad
[19:21:17] <brson> graydon: yes, I closed it
[19:21:25] <graydon> k, cool
[19:21:51] <strcat> brson: essentially we're telling LLVM that if it writes to the &mut param, no other pointer can see it
[19:22:16] *** Quits: mib_z6t39e (Mibbit@moz-FD9A8D70.tvc-ip.com) (Quit: http://www.mibbit.com ajax IRC Client)
[19:22:24] <strcat> inside the body of the fn
[19:22:28] <thiez> brson: r? https://github.com/mozilla/rust/pull/6803
[19:24:55] *** Quits: jviereck (Adium@moz-D04610E3.dclient.hispeed.ch) (Quit: Leaving.)
[19:25:16] <brson> strcat: I'm not trying to argue against this optimization, just worrying loudly
[19:25:33] *** Joins: snadon (chatzilla@moz-F86CA4D4.mc.videotron.ca)
[19:27:40] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[19:31:06] <pauls> jclements: pong
[19:31:19] <jclements> pauls: hey! question for you.
[19:31:42] <jclements> pauls: a while ago, we discussed quoting of '$' and other "interesting" topics...
[19:32:15] <jclements> pauls: the upshot, afaict, is that currently we can't do macros that expand into macro definitionsâ€¦ or at least not without some surprising contortions.
[19:32:27] <jclements> For instance, here's a macro that expands into a macro def:
[19:33:07] <jclements> pauls: https://gist.github.com/jbclements/5673105
[19:33:40] <jclements> jclements: note that this is basically a very vanilla macro, wrapped in a "macro-thunk"--a macro that takes no args and just produces this macro def (and a call to it, for good measure).
[19:33:42] *** Quits: snearch (snearch@moz-B2303D4D.pool.mediaways.net) (Connection reset by peer)
[19:34:07] <jclements> The error I get back indicates that the macro_rules expansion wants *everything* shaped like $foo inside of the RHS to be a reference to a defined pattern variable.
[19:34:20] <jclements> this pretty much rules out macro_rules inside of macro rules.
[19:34:21] <jclements> BUT!
[19:34:21] <pauls> jclements: yeah.
[19:34:30] <jclements> I see a bunch of ways of fixing this.
[19:34:35] <jclements> The first and simplest is this:
[19:34:55] <jclements> when macro_rules sees an identifier it's not looking for, it shouldn't signal an errorâ€¦it should just leave it alone.
[19:34:56] *** Joins: snearch (snearch@moz-B2303D4D.pool.mediaways.net)
[19:35:18] <strcat> graydon: https://github.com/thestinger/playpen got this thing working nicely now btw, maybe I'll make a web-based frontend for rustc
[19:35:26] <jclements> obviously, this will require a bit of care to deal with the situation where a pattern variable winds up in the expanded code.
[19:35:26] <pauls> I suggest that n copies of `$` should expand to n-1 copies of `$` (provided n > 1)
[19:35:42] <jclements> pauls: I think my solutions are simpler...
[19:36:03] <strcat> graydon: lxc's evil locking was a barrier before
[19:36:06] <graydon> strcat: that's neat!
[19:36:07] <jclements> pauls: in fact, we're going to need funky hygiene here anyway, and here's why:
[19:36:11] <pauls> jclements: I think *my* solution is simpler! / :
[19:37:00] <jclements> Suppose I have a macro definition that inserts the identifier 'x' into the middle of another macro definitionâ€¦ that uses 'x' as a pattern variable. Should this be interpreted as a reference to that pattern variable? No, it shouldn't.
[19:37:03] <graydon> strcat: playpen.rust-lang.org awaits anyone who feels like wiring it up :)
[19:37:27] <jclements> Therefore, in order to figure out whether a pattern-variable-use is connected with a pattern-variable-binding, we're going to have to use the hygiene primitives anyway.
[19:37:43] <jclements> At that point, it's pretty much trivial just to ignore the pattern-vars that you don't have bindings for.
[19:38:07] <pauls> jclements: I don't understand; I don't think that pattern vars ever have a chance with core Rust identifiers.
[19:38:28] <jclements> Dunno what you mean by "have a chance".  Shall I make an example?
[19:38:51] <pauls> jclements: yes, please.
[19:39:04] <jclements> pauls: okay, this is going to hurt my head a bit.....
[19:39:41] *** Quits: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[19:40:55] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[19:41:00] *** Quits: snadon (chatzilla@moz-F86CA4D4.mc.videotron.ca) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130521223249])
[19:41:16] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[19:41:44] <pauls> Anyways, my reasoning for wanting to make people escape `$` is that, if you're writing macro-defining-macros...
[19:41:54] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:42:06] <jclements> pauls: hang on, almost doneâ€¦ got a comment about that, too...
[19:42:38] <pauls> ...you probably will be worrying about what phase corresponds to what substitutions.
[19:43:02] <jclements> pauls: https://gist.github.com/jbclements/5673194
[19:43:08] <pauls> I think that MDMs are going to be less common, and more weird, than higher-order functions.
[19:43:12] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:43:32] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[19:43:37] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[19:43:51] <jclements> pauls: in this example, I don't want the 'x' that comes from the outer substitution to be captured by the inner macro def.
[19:44:35] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[19:44:50] <pauls> jclements: Well, you don't have to worry about it if `$$cuckoo` is just an escape for `$cuckoo` ( :
[19:44:59] <jclements> pauls: sorry, going to lunchâ€¦ :(
[19:45:06] <pauls> ...I don't think you ever want the other behavior.
[19:45:32] <pauls> Because the only purpose of doing that is to break hygiene.
[19:51:14] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:55:07] *** Quits: heftig (heftig@moz-D04F4D4A.dip0.t-ipconnect.de) (Ping timeout)
[19:55:36] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[19:57:01] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[19:57:11] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[20:00:14] *** Joins: heftig (heftig@moz-9E352B4E.dip0.t-ipconnect.de)
[20:01:13] <thiez> rusti: (~"hi")[0]
[20:01:14] -rusti- 104
[20:01:40] *** Parts: mulander (uid1766@moz-C944F5EC.irccloud.com) ()
[20:01:40] <thiez> how come that works? [~&]str does not implement Index?
[20:01:51] <strcat> Index isn't how vectors/strings do indexing
[20:01:55] <strcat> it's a terrible trait ;p
[20:01:58] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:02:35] <thiez> sure, but where is the operator defined?
[20:02:38] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (Quit: Leaving)
[20:02:40] <thiez> or is it compiler 'magic'
[20:02:41] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[20:02:59] <strcat> thiez: magic
[20:03:07] <strcat> thiez: Index isn't powerful enough to represent the same thing
[20:03:17] <graydon> it should probably support Indexing
[20:03:21] <strcat> &v[0], &mut v[0], v[0] (by-value), v[0] = x
[20:03:31] <strcat> we need to split up Index to make it able to do that imo
[20:03:35] <graydon> yeh
[20:03:42] <thiez> wasn't there an issue about that?
[20:03:47] <strcat> thiez: yep, I reported it :)
[20:03:55] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:03:59] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[20:04:30] <graydon> nmatsakis: is https://github.com/mozilla/rust/issues/3548 actually cleanup related, or is it the sort of thing that'll change APIs?
[20:04:56] <strcat> thiez: https://github.com/mozilla/rust/issues/6515 https://github.com/mozilla/rust/issues/5992
[20:05:03] *** Quits: fabiand (fabiand@moz-F997017D.adsl.alicedsl.de) (Ping timeout)
[20:05:22] <nmatsakis> graydon: internal cleanup.
[20:05:38] <nmatsakis> graydon: just two ways to do the same thing right now
[20:05:48] <graydon> oh, ok
[20:06:44] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[20:09:00] <nmatsakis> graydon: I am thinking about this proc/fn thing some more, trying to come up with a write-up of some alternatives.
[20:09:30] <graydon> sure. sorry to sound foot-draggy on the UI; the semantics sound good to me
[20:14:25] <nmatsakis> graydon: it's not a problem, it's kind of an important thing to get right, and I'm not sure I have it right
[20:14:38] <nmatsakis> graydon: bblum has some ideas too
[20:14:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:15:48] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Ping timeout)
[20:18:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:18:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/0Dtn-Q
[20:18:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:20:28] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[20:21:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:21:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/lyCcmw
[20:21:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:21:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:21:44] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/S24lrA
[20:21:44] <ghrust> 13rust/06auto 14b3ca25d 15Patrick Walton: librustc: Redo the unsafe checker and make unsafe methods not callable from safe code
[20:21:44] <ghrust> 13rust/06auto 14a1f4a42 15Patrick Walton: libsyntax: Make `drop` no longer a keyword
[20:21:44] <ghrust> 13rust/06auto 148dcfc93 15Patrick Walton: libsyntax: Stop parsing mutable fields
[20:21:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:21:49] <Eridius> how does one push 0 new commits?
[20:21:57] <cmr> resets auto to incoming
[20:22:05] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[20:22:05] *** ChanServ sets mode: +o dherman
[20:22:38] <Eridius> cmr: is it actually modifying the branch? Because the bot's URL shows it trying to compare the same revision against itself
[20:23:24] <cmr> Yes, it is, but it's a noop because its usually already up to date with incoming
[20:24:56] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[20:25:50] *** Joins: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com)
[20:25:53] *** Parts: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com) ()
[20:26:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:26:44] *** Quits: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com) (Quit: Lost terminal)
[20:30:28] <cmr> Is https://github.com/cmr/terminfo-rs/blob/master/parm.rs sane code?
[20:31:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:31:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14895ebf4 to 14d295709: 02http://git.io/N3iJvQ
[20:31:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:31:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:31:08] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/DsxFmA
[20:31:08] <ghrust> 13rust/06auto 146cc9a26 15Matthijs Hofstra: Replaced calls to external fmin/fmax by a Rust implementation.
[20:31:08] <ghrust> 13rust/06auto 143141acf 15Matthijs Hofstra: Changed to a more efficient implementation.
[20:31:09] <ghrust> 13rust/06auto 1435655a0 15bors: auto merge of #6803 : Thiez/rust/native_fmax_fmin, r=brson...
[20:31:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:32:46] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Ping timeout)
[20:32:57] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[20:32:57] *** ChanServ sets mode: +o tjc
[20:36:54] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[20:40:34] <strcat> jld: btw I don't know if you saw the issue already, but your null optimization for enums could be extended to slices too
[20:40:41] <strcat> and maybe trait objects? don't know if those are already covered
[20:41:27] <strcat> rusti: sys::size_of::<~Ord>()
[20:41:28] -rusti- 16
[20:41:35] <strcat> rusti: sys::size_of::<Option<~Ord>>()
[20:41:35] *** Quits: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[20:41:36] -rusti- 24
[20:42:45] *** Joins: drak3 (drak3@moz-447E71B8.dip0.t-ipconnect.de)
[20:44:56] *** Joins: jviereck (Adium@moz-D04610E3.dclient.hispeed.ch)
[20:45:05] <jld> strcat: I think I left a comment in the code somewhere speculating about that, in fact.
[20:48:03] *** Joins: eholk (eholk@moz-34E444EA.uconnect.utah.edu)
[20:48:35] <jld> strcat: Assuming that (null, 0) isn't a valid zero-length slice.
[20:48:56] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[20:49:05] <benh> rusti: sys::size_of::<Option<Option<Option<Option<Option<bool>>>>>()
[20:49:06] -rusti- foo.rs:8:68: 8:69 error: expected `,` but found `(`
[20:49:06] -rusti- foo.rs:8          sys::size_of::<Option<Option<Option<Option<Option<bool>>>>>()
[20:49:06] -rusti-                                                                              ^
[20:49:19] <benh> grah
[20:49:28] <benh> rusti: sys::size_of::<Option<Option<Option<Option<Option<bool>>>>>>()
[20:49:28] -rusti- 48
[20:49:48] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[20:51:16] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[20:53:45] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[20:53:56] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[20:55:44] <Eridius> why does vec.rs have `use vec`?
[20:56:37] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[20:56:37] *** ChanServ sets mode: +o pcwalton
[20:56:44] <graydon> jesse99: ping
[20:57:03] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[20:57:05] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[20:57:05] *** ChanServ sets mode: +o brson
[20:57:16] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[20:57:32] <jesse99> ya
[20:57:42] <graydon> hey, concerning https://github.com/mozilla/rust/issues/3611
[20:58:22] <graydon> do you still think the interface is confusing? it's been decoupled from task quite a bit and mostly just looks like a holder for a thunk (possibly an async one)
[20:58:31] <jesse99> I'm not going to remember much of that graydon
[20:58:34] <graydon> ok
[20:58:52] <graydon> it seems like a not-very-fixable bug. brson: any feelings on it?
[20:59:02] <jesse99> as I recall I had an expectation of what a future would look like and got confused looking at the rust code
[21:00:35] *** Joins: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is)
[21:03:29] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:03:39] <brson> graydon: I think that bug specifically is probably vague enough to close. Futures and promises in general need to be revisited someday
[21:03:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:03:59] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:04:22] *** Joins: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP)
[21:04:38] <bstrie> brson: are https://github.com/mozilla/rust/issues/3915 and https://github.com/mozilla/rust/issues/4074 still relevant?
[21:04:53] *** Quits: jorendorff (jorendorff@moz-FAB36621.hsd1.tn.comcast.net) (Quit: jorendorff)
[21:05:15] <graydon> brson: ok
[21:05:55] <brson> bstrie: I closed 3915. 4074 is still a problem
[21:06:03] <bstrie> ok
[21:06:40] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:07:00] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[21:07:57] <bstrie> all calls that look like `rustrt::foo()` are calls into the runtime, yeah?
[21:08:32] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:09:14] *** Quits: drak3 (drak3@moz-447E71B8.dip0.t-ipconnect.de) (Quit: leaving)
[21:09:46] <brson> bstrie: yes
[21:11:39] *** Quits: eholk (eholk@moz-34E444EA.uconnect.utah.edu) (Quit: eholk)
[21:12:12] *** Quits: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP) (Quit: Computer has gone to sleep.)
[21:13:04] *** Quits: met (Mibbit@moz-CFDAF3CB.ip47.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[21:13:41] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[21:15:08] *** Joins: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP)
[21:16:47] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:17:53] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (Ping timeout)
[21:20:03] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[21:20:30] *** Quits: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP) (Quit: Computer has gone to sleep.)
[21:22:27] *** Joins: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP)
[21:23:39] *** Quits: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP) (Quit: Computer has gone to sleep.)
[21:23:57] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[21:24:48] *** Joins: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP)
[21:24:52] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:25:02] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[21:25:14] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:26:34] *** lkuper_ is now known as lkuper
[21:28:43] <Eridius> wow, it takes a long time to rebuild even after a simple libstd modification
[21:28:49] <Eridius> is there any way to speed that up?
[21:29:45] <pcwalton> Eridius: CFG_DISABLE_OPTIMIZE=1 can help but there's a big regression
[21:29:51] <pcwalton> should go away after the next snapshot
[21:29:59] <pcwalton> in general yeah the compiler is way too slow
[21:30:09] <brson> Eridius: it depends on what you are rebuilding for. If you just want to test std then you can shortcut the rebuild with NO_REBUILD=1
[21:30:18] <Eridius> brson: what does NO_REBUILD do?
[21:30:21] <strcat> Eridius: if you just changed libstd and want to run the libstd tests, new-enough-rustc std.rc --test --cfg stage2
[21:30:28] <Eridius> and yes, I'm adding a function to libstd. I'm gonna need to write tests next
[21:30:39] <strcat> Eridius: should be fine to just compile it in isolation then
[21:30:41] <Eridius> strcat: thanks
[21:30:52] <strcat> only really need to do the full build when you're editing existing stuff, to check if you broke other code using it
[21:31:19] <strcat> err, I guess it's still core.rc
[21:31:36] <Eridius> what does --cfg stage2 do?
[21:31:51] <strcat> Eridius: sets the stage2 attribute
[21:32:00] <strcat> so it uses #[cfg(stage2)] items
[21:32:12] <Eridius> I don't know what the stages are. What does that do?
[21:32:29] <strcat> Eridius: well it's a self-hosting compiler so the old snapshot has to be able to compile it (stage0)
[21:32:36] <strcat> when you do a full make, it builds itself 3 times
[21:32:43] <Eridius> 3!?
[21:32:47] <strcat> gcc does the same
[21:33:19] <Eridius> I understand 2, but why 3?
[21:33:21] <pnkfelix> Eridius: different parts of the code base are prefixed with #[cfg(stageN)] so that they only get compiled by that particular stage, so that modules can gradually migrate through changes in the compiler's requirements.
[21:33:42] <strcat> the tests are only run in stage2 by default so there's not really a guarantee that they'll even work with --cfg stage0 or --cfg stage1
[21:33:44] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[21:33:48] <pnkfelix> Eridius: because you want to prove to yourself that it hits a fixed-point in the second and third stage
[21:33:50] <strcat> since bors isn't checking that
[21:33:50] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:33:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/DsxFmA
[21:33:50] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:34:02] <strcat> after a snapshot they would ;p
[21:34:14] *** Joins: eholk (eholk@moz-34E444EA.uconnect.utah.edu)
[21:34:33] <Eridius> is there any way to say "trust me my compiler's new enough, only build once" and still do a full build?
[21:34:39] <Eridius> e.g. because I just built incoming earlier that day?
[21:35:16] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:35:26] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[21:36:18] <pnkfelix> Eridius: you could issue the appropriate make commands to tell it that you'd be satisfied with the output from just stage1.  Not sure if that's what you're asking
[21:36:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:36:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qsjYJQ
[21:36:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:36:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:36:44] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/n0Nntg
[21:36:44] <ghrust> 13rust/06auto 14da71b0c 15Patrick Walton: librustc: Redo the unsafe checker and make unsafe methods not callable from safe code
[21:36:44] <ghrust> 13rust/06auto 14a6e2b97 15Patrick Walton: libsyntax: Make `drop` no longer a keyword
[21:36:44] <ghrust> 13rust/06auto 14cd91fb2 15Patrick Walton: libsyntax: Stop parsing mutable fields
[21:36:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:37:16] <lkuper> jclements: is the 'rust run' you're proposing something like 'runghc'?
[21:37:24] <Eridius> I'm assuming that the final result of `make`, e.g. the thing installed with `make install`, is the output of stage2. Is there any way to do a full build, but only of stage2?
[21:37:55] <Eridius> e.g. because I want to install my modified rust onto the system
[21:37:59] <jclements> lkuper: dunnoâ€¦ it's a lot like "racket abc.rkt", though :). Basically, it compiles and runs the given file.
[21:38:08] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:38:09] <Eridius> jclements: that's runghc, no? also `go run`
[21:38:34] <lkuper> jclements: that sounds kinda like runghc, then.
[21:38:36] <jclements> Eridus: sure, I believe you.  We have "rust test" and "rust make", so we're not talking about a big step.
[21:38:46] <jclements> Er, so to speak.
[21:38:55] <Eridius> jclements: by `rust make` do you mean `rust build`?
[21:39:03] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[21:39:04] <Eridius> the nice thing about runghc and go run is they don't actually leave built products on the system
[21:39:17] <Eridius> so you can e.g. have a source file that starts with #!/usr/bin/runghc and have it now be a haskell "script"
[21:39:26] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[21:39:39] <lkuper> jclements: I'm a bit sad about voting down rusti.  I mean, yeas, "the top-level is hopeless", but it's also indispensable!  :)
[21:40:16] <jclements> thing 1: what I asked forâ€¦ is already there. "rust run foo.rs". Yay!
[21:40:35] <jclements> lkuper: I don't see the top level as indispensable, though...
[21:40:55] <strcat> afaik cling originally just hoisted out variables you declared
[21:40:56] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[21:41:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:42:00] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:42:02] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: tgt)
[21:42:56] <pnkfelix> Eridius: I think strcat's advice would put you on the right track: You should figure out how to invoke rustc directly to produce your new copy of rustc
[21:43:38] <pnkfelix> Eridius: you can start by running "make VERBOSE=1" to see the actual commands that make is invoking, and then find the one you want to regenerate new copies of rustc
[21:43:49] *** Quits: jviereck (Adium@moz-D04610E3.dclient.hispeed.ch) (Quit: Leaving.)
[21:43:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:44:24] <Eridius> pnkfelix: hmm. I'm surprised there isn't a solution already in place. Surely there are people here already who want to be able to locally change rust and install a new version on their system
[21:45:50] <pnkfelix> Eridius: well, there are options to tell the build to use a local copy of rust rather than downloading a snapshot; they might do what you want.  I don't know, I haven't used them.
[21:47:45] *** Quits: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP) (Quit: Computer has gone to sleep.)
[21:49:02] <bstrie> Eridius: some of the developers forgo installing altogether and set up elaborate scripts to run only a certain build stage, so that they only have to build stage1
[21:49:12] <Eridius> heh
[21:49:19] <bstrie> I think brson does this, if you want to ask for his setup
[21:49:31] <Eridius> bstrie: maybe later
[21:50:18] <lkuper> Thinking about what I use ghci for, I guess I use it less for actually running code than I do for the built-in commands.  For instance, I use ":t" a lot, to get the type of some expression.  Or ":i" to get info about some library function.
[21:50:21] *** Joins: Ralith (ralith@moz-77D578BD.wireless.sfu.ca)
[21:50:28] <strcat> I only install a daily build of incoming
[21:50:41] <strcat> separate from the builds I do in ~/projects/rust/
[21:50:52] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:51:09] <lkuper> ...which it has autocomplete for.  so ghci serves as sort of a supercharged documentation browser.  it'd be cool to have that for rust one day.
[21:51:10] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[21:51:50] <bstrie> lkuper: yes, I think rusti would be most valuable for interactive documentation
[21:52:01] <bstrie> though a good rustdoc tool might be just as good at that
[21:52:12] <Eridius> vim's haskell mode uses rusti to provide type info about symbols in the current file IIRC
[21:52:13] *** Quits: Ralith (ralith@moz-77D578BD.wireless.sfu.ca) (Ping timeout)
[21:52:26] <bblum> you mean uses ghci
[21:52:28] <lkuper> Eridius: uses ghci, that is?
[21:52:30] <lkuper> :)
[21:52:31] <bblum> if it used rusti i would be impressed
[21:52:34] <Eridius> ...that's what I meant, yes
[21:52:37] <bstrie> rusti is more powerful than I thought
[21:52:47] <bblum> c.c
[21:52:47] <lkuper> what hath we wrought?!
[21:52:57] <Eridius> no wonder rust takes so long to build. It has to embed all of haskell!
[21:53:04] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:53:46] <bstrie> rusti: print(str::from_bytes(std::run::process_output("ghci", []).output))
[21:53:48] * rusti produced no output
[21:53:55] <lkuper> :D
[21:54:23] <strcat> rusti: print(str::from_bytes(std::run::process_output("ghci", []).error))
[21:54:24] -rusti- rust: task failed at 'failure in execvp: No such file or directory', /build/rust-incoming-git/src/rust/src/libstd/run.rs:684
[21:54:24] -rusti- rust: domain main @0x183c1b0 root task failed
[21:54:41] <strcat> huh.
[21:54:45] <bblum> the rusti produced no output message is confusing because my nickcolor script makes its name green whereas the output-messages show up in purple
[21:56:35] * strcat doesn't understand why it happened there at all
[21:56:38] <strcat> rusti: print(str::from_bytes(std::run::process_output("ghci", []).output))
[21:56:39] * rusti produced no output
[21:57:06] <strcat> rusti: print(str::from_bytes(std::run::process_output("ghci", []).status))
[21:57:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HIiQ
[21:57:12] <tjc> heh, from std::num::float:  // FIXME (requires Issue #1433 to fix): replace with mathematical
[21:57:12] <tjc>     // staticants from cmath.
[21:57:14] <tjc> staticants
[21:57:22] <bblum> staticants
[21:57:26] <strcat> rusti: print(std::run::process_output("ghci", []).status)
[21:57:27] <bblum> labeloraries
[21:57:27] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RjXY
[21:57:29] <tjc> Archimedes' staticant
[21:57:35] <tjc> (that's the next comment)
[21:57:50] <strcat> tjc: I can't stop laughing now ;p
[21:57:59] <strcat> search and replace!
[21:58:13] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:58:14] <tjc> search and replace: it's good for your health (since they say laughter is the best medicine)
[21:59:46] <Eridius> hrm, core.rc has 8 test failures. Is that expected?
[22:00:01] <strcat> Eridius: yes you need a dir called tmp in the cwd
[22:00:05] <Eridius> oh
[22:00:09] <steven_is_false> std::run::process_output("ls", ["/usr/bin"])
[22:00:14] *** Quits: samnardoni (samnardoni@moz-3EADE9A3.dab.02.net) (Client exited)
[22:00:17] <Eridius> ok that's much better
[22:01:21] <strcat> rusti: print(str::from_bytes(std::run::process_output("ls", [])))
[22:01:22] <bstrie> back during the const -> static change, I remember people being concerned that it sounded weird to use "static" as a noun. now we have the proper form! and it was staticant forever after
[22:01:22] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HLCd
[22:01:36] <strcat> rusti: print(str::from_bytes(std::run::process_output("ls", []).output))
[22:01:38] -rusti- foo
[22:01:38] -rusti- foo.rs
[22:03:01] <strcat> rusti: print(str::from_bytes(std::run::process_output("mount", []).output))
[22:03:03] -rusti- /dev/sda4 on / type ext4 (ro,relatime,commit=15,data=ordered)
[22:03:03] -rusti- none on /proc type proc (rw,nosuid,nodev,noexec,relatime)
[22:03:03] -rusti- none on /tmp type tmpfs (rw,nosuid,nodev,relatime)
[22:03:03] -rusti- none on /home/rust type tmpfs (rw,nosuid,nodev,relatime)
[22:03:32] <strcat> heh I broke findmnt by not having udev in there
[22:04:20] *** Joins: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP)
[22:05:03] <bblum> compiling the compiler takes sooooo long
[22:05:33] <Eridius> bblum: that's because you need to compile the compiler that compiles the compiler before you can compile the compiler
[22:05:37] <Eridius> ..yo dawg..
[22:05:48] <brson> bblum: make sure you turn optimizations *on*. there's a bug that makes rustc with opts off very slow atm
[22:05:51] <bblum> i mean, even just one stage
[22:05:56] <bblum> brson: where do i look for this?
[22:06:01] <bblum> this is just stage0
[22:06:11] <strcat> they're on by default unless you set some env var
[22:06:14] <strcat> afaik
[22:06:18] <tjc> CFG_DISABLE_OPTIMIZE=1
[22:06:23] <tjc> if you want to disable optimizations
[22:06:29] <brson> or configure --disable-optimize
[22:06:30] <tjc> if it's not set, though, it'll build optimize
[22:06:32] <tjc> yeah
[22:06:56] <tjc> you can tell by looking, after you type ./configure or ../configure, if it says "--enable-optimized" or "--disable-optimized" somewhere 
[22:07:13] <pnkfelix> How broken do we expect 'rustc -Z debug-info' to be?
[22:07:16] <bblum> configure:            LLVM_DBG_OPTS="--enable-optimized"
[22:07:43] <Eridius> hrm, it just occurred to me that adding a new function to libstd probably means I need to file a committer agreement. d'oh
[22:07:45] <pnkfelix> like, Assertion Fails from within LLVM â€” expected, or unexpected?
[22:07:56] *** Quits: ski (Stefan@moz-4BB5E0FF.studat.chalmers.se) (Ping timeout)
[22:08:01] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[22:08:20] *** Quits: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) (Ping timeout)
[22:08:21] <strcat> Eridius: afaik the committee agreement is mostly for people with repo access (I could be wrong)
[22:08:27] <strcat> ee -> er
[22:08:35] <brson> pnkfelix: I think debug info is completely broken
[22:08:35] *** Quits: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) (Ping timeout)
[22:08:38] <Eridius> strcat: oh? the development policy note says any "nontrivial change" requires this
[22:08:43] <bblum> huh, the runtime rebuilds itself on each stage now?
[22:09:02] <pnkfelix> brson: so what does that mean for bugs that are filed against debug-info ?
[22:09:17] <Eridius> although the info on filing a committer's agreement links to a page that suggests this is in order to get commit access to a mozilla repo
[22:09:24] <Eridius> so maybe the development policy note is just wrong?
[22:09:26] <brson> bblum: there's an in progress change to function representation that requires the runtime be built differently in stage0
[22:09:56] <bblum> ah ok
[22:09:57] <brson> pnkfelix: i don't know
[22:10:11] *** Joins: lkuper_ (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[22:10:17] *** Quits: lkuper_ (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Client exited)
[22:10:21] <pnkfelix> brson: okay,  I see Issue 5836 now
[22:10:50] <bstrie> Eridius: random people submit pulls all the time with no problem
[22:10:55] <Eridius> bstrie: ok then
[22:11:51] <lkuper> brson: oh, no, so at the moment we *shouldn't* be using --disable-optimize if we want fast builds?
[22:12:36] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:12:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149e60a1e to 1435655a0: 02http://git.io/N3iJvQ
[22:12:36] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:12:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:12:38] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/c95RBQ
[22:12:38] <ghrust> 13rust/06auto 142b08337 15Felix S. Klock II: Fix #6805: add --enable-ccache configure option to prefix compiler invocations with ccache to attempt to reuse common results, e.g. for LLVM (re)builds.
[22:12:38] <ghrust> 13rust/06auto 14bd30285 15bors: auto merge of #6813 : pnkfelix/rust/fsk-issue-6805-ccache-support, r=catamorphism...
[22:12:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:12:51] <tjc> lkuper: correct, not until a new snapshot lands
[22:12:57] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:12:58] * lkuper sighs exaggeratedly
[22:13:26] <strcat> the next snapshot will also reduce stage0 mem usage by about a gigabyte...
[22:13:39] <tjc> it will also have ponies
[22:13:41] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[22:13:55] *** Quits: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is) (Quit: Leaving)
[22:14:01] *** Joins: ski (Stefan@moz-4BB5E0FF.studat.chalmers.se)
[22:14:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:14:31] <bblum> o_O why is ty::t an opaque unsafe pointer
[22:15:04] <strcat> tjc: http://i.imgur.com/OlIAJGi.png
[22:15:10] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[22:15:17] <tjc> strcat++
[22:16:00] <bstrie> haha
[22:16:18] <jdm> wow
[22:16:20] <strcat> http://terse.tk/ponysay/
[22:16:20] <lkuper> strcat: oh, my.
[22:16:38] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[22:16:42] <strcat> made by an arch user so it's probably only us arch users who know it exists ;p
[22:16:45] <brson> bblum: it was a performance optimization at some point
[22:17:23] <Eridius> strcat: oh my glob. I need that
[22:17:31] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[22:18:19] <strcat> it has like 400 ponies now.
[22:18:43] <lkuper> strcat: you just made a friend of mine very happy with that.  thank you.
[22:18:48] <strcat> lkuper: :)
[22:19:23] <bstrie> rusti: print(str::from_bytes(std::run::process_output("ponysay", ["hola"]).output))
[22:19:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JRAT
[22:19:34] <strcat> bstrie: it's not in there ;p
[22:19:40] <strcat> and it looks really bad outside of a terminal
[22:19:45] <strcat> because it relies on the color
[22:19:47] <bstrie> yeah that was the idea :)
[22:20:13] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:20:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:20:21] *** Joins: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net)
[22:23:13] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:23:27] <tjc> off-topic question: does anyone know offhand how to turn off the "feature" in bash that deletes failed commands from your history?
[22:23:57] <strcat> tjc: shopt -s nohistverify ?
[22:23:59] <strcat> maybe
[22:24:05] * strcat doesn't use bash
[22:24:10] <Eridius> fish ftw
[22:24:36] <tjc> strcat: hmm, that didn't work, but...
[22:24:40] *** Quits: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net) (Ping timeout)
[22:24:42] <tjc> "histverify" appears to be off already
[22:24:52] <tjc> of course, I could just keep suffering in silence
[22:25:39] <bblum> ok, at what point during compilation does a ty_param's kind bounds become known? or are they always known?
[22:25:47] <strcat> tjc: oh maybe HISTCONTROL
[22:26:00] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:26:01] * strcat doesn't really remember how that works
[22:26:05] <tjc> strcat: yeah I tried to mess around with HISTCONTROL but had a fruitless experience
[22:26:06] <bblum> (and more importantly/directly, how do i get them?)
[22:26:48] <jclements> brson: we haven't had a snapshot since the core->std rename, have we?
[22:27:56] <tjc> bblum: the Generics struct in middle::ty seems to capture that information now
[22:28:05] <tjc> if you search for Generics in the code you should be able to find stuff for looking it up
[22:28:14] <lkuper> there seem to be a few things related to the core->std rename that are hanging around waiting for a snapshot to have happened
[22:28:32] <brson> jclements: no
[22:29:01] <strcat> tjc: or maybe there's some horrible PROMPTCOMMAND on your distro
[22:29:46] <tjc> strcat: my "distro" is Mac :P and I don't see a PROMPTCOMMAND in my env
[22:30:09] <strcat> tjc: well use zsh! ;p
[22:30:22] <Eridius> tjc: it's actually PROMPT_COMMAND
[22:30:32] <Eridius> and IIRC it doesn't have to be in your env, it could be a local var to bash
[22:30:40] <tjc> strcat: well, bash has served me for the past 16 years or so, why switch now? :P
[22:30:45] <Eridius> `echo $PROMPT_COMMAND`
[22:30:54] <Eridius> tjc: I used bash right up until recently, but fish is awesome
[22:30:58] <tjc> Eridius: nope, that doesn't seem to exist either
[22:31:02] <Eridius> http://fishshell.com
[22:31:03] <tjc> as in, no PROMPT_COMMAND
[22:31:12] * brendanc loves zsh remote file completion
[22:31:14] <strcat> tjc: tab completion for cli switches with docs? ;)
[22:31:41] <tjc> strcat: Hmm, does that work for any installed program or just a few specific ones?
[22:31:52] <strcat> tjc: well, the ones it has completion files for (lots)
[22:31:59] <tjc> strcat: ah, ok. so not rustc :-)
[22:32:09] <strcat> yeah not rustc until I decide to make one ;p
[22:32:21] <strcat> or someone else
[22:32:28] * strcat knows someone who obsessively makes zsh completion files
[22:32:34] <strcat> just need to make them interested in rust >:)
[22:32:51] <tjc> well, that part should be easy!
[22:33:43] * brendanc did the mercurial zsh completion
[22:35:31] <pnkfelix> tjc: Failed commands are still in my bash history.  And I'm on a Mac.  You want to PrivateMsg to see if we can figure your situation out?
[22:35:48] <tjc> pnkfelix: Sure!
[22:37:54] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[22:38:31] *** Joins: steven_is_false (user@1E3F14AE.29819A33.115CE8E4.IP)
[22:39:04] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[22:40:52] *** Parts: steven_is_false (user@1E3F14AE.29819A33.115CE8E4.IP) (ERC Version 5.3 (IRC client for Emacs))
[22:43:55] <aatch|gone> graydon, mind looking at this: https://github.com/mozilla/rust/pull/6799
[22:44:40] <graydon> aatch|gone: aha, you are here!
[22:44:45] *** aatch|gone is now known as aatch
[22:44:55] <graydon> I was going to ask: do you know why there was a big perf loss when you landed the previous pass?
[22:45:07] <aatch> graydon, nope.
[22:45:10] <aatch> Was there?
[22:45:34] <graydon> there was
[22:45:46] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Ping timeout)
[22:45:51] * strcat thinks it's mergefuncs
[22:45:57] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[22:46:01] <aatch> strcat, but that's only on Aggressive
[22:46:09] <strcat> aatch: ah, nvm then
[22:46:15] <graydon> http://huonw.github.io/isrustfastyet/
[22:46:23] <graydon> oh gosh, and it .. just fell off again, mostly
[22:46:39] * graydon wonders if this was some kind of measurement glitch
[22:47:15] <brendanc> buildslaves doing two jobs at once?
[22:48:06] <graydon> those machines are often doubly-loaded (doing incoming builds)
[22:48:11] <graydon> and they are 8-way anyways
[22:48:12] <graydon> hmm
[22:48:19] <graydon> maybe
[22:49:53] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[22:49:56] <aatch> you know what a cool pass is? instnamer
[22:50:23] <graydon> aatch: is the patch you just asked for r? on .. does it add passes / remove them by name, or replace the whole set of standard passes with the ones you provide on the command line?
[22:50:28] <graydon> the latter behavior seems non-optimal
[22:50:41] <aatch> it just replaces the list atm.
[22:50:49] <aatch> It's hard because ordering matters
[22:50:54] <graydon> eep
[22:51:08] <aatch> and it's perfectly fine to repeat passes
[22:51:11] <strcat> aatch: any idea where clang sticks the -mllvm ones?
[22:51:20] <aatch> No idea.
[22:51:34] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:52:18] <graydon> ok. awesome work, keep it up!
[22:52:23] <strcat> graydon: I guess it could report cpu time and not time...
[22:52:34] <strcat> still not perfect
[22:52:34] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:52:38] <aatch> I am aware that it isn't optimal, but I intended it to be more of a experimentation tool than a way to tune the passes
[22:52:44] <graydon> (next: print the list of passes that are actually used on a given run, like -Z print-linker-args)
[22:53:01] <graydon> strcat: yeah, it should use measure.sh and cgroups
[22:53:04] <graydon> I want it to, anyway
[22:53:04] <aatch> graydon, yeah, I was thinking that, should be pretty easy.
[22:54:28] *** Joins: jeff (jeff@moz-A2645AF4.nycmny.east.verizon.net)
[22:54:57] <strcat> aatch: oh and we should have an --opt-size switch (separate from opt-level)
[22:55:05] <strcat> I'm not sure if that means tagging all fns as optsize
[22:55:12] <strcat> or just passing some bool?
[22:55:24] <aatch> No idea...
[22:56:07] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[22:57:55] <doomlord> when i looked into parallelizing , i made a parallel foreach in c++.. par_foreach(collection, function)... i guess you could build that sort of thing in rust ? and it would look a bit more elegant with the sugar..
[22:58:03] <doomlord> maybe there's already one
[22:58:05] <erickt> Luqman: ping
[22:58:44] <doomlord> for foo.par_map |x| { ..... /* this gets run in parallel across worker threads*/} 
[22:59:33] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Ping timeout)
[23:00:45] <erickt> doomlord: check out libextra/par.rs
[23:00:53] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[23:00:55] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:01:11] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[23:01:12] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[23:01:12] <erickt> doomlord: I'm not sure if it's gotten much attention though
[23:02:11] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[23:02:13] <Luqman> erickt: pong
[23:02:57] <EXetoC> bjz: is the high level glfw interface supposed to use C types?
[23:03:09] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Connection reset by peer)
[23:03:17] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[23:03:27] <doomlord> this sort of thing interests me alot
[23:03:35] <EXetoC> anyway, the recent changes are pretty good imo. more idiomatic etc
[23:03:37] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[23:04:03] <EXetoC> only a couple of ugly identifiers that's all :>
[23:05:17] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[23:06:08] <doomlord> ah libstd/par.rs
[23:07:21] <EXetoC> bjz: actually, the biggest issue might have to do with Rust, because it says i32 instead of c_int for example in the error messages
[23:07:48] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[23:08:34] *** Quits: dylukes (dylukes@47D7FDC7.F727F25D.E8393EEB.IP) (Quit: Computer has gone to sleep.)
[23:09:14] <strcat> ugh completion files are such a pain
[23:10:55] <brson> erickt: your llvm pull request both patches and upgrades llvm to trunk. do we need to upgrade llvm to trunk for the fix to work? I've been trying to merge it but have been running into errors on windows
[23:11:02] <EXetoC> bjz: there's no type difference between VidMode and the functions for example in the C api
[23:11:16] <bjz> EXetoC: I plan to wrap them in structs in the future.
[23:11:33] <bjz> But there are bugs related to matching on them
[23:11:35] <bjz> :(
[23:11:35] *** Joins: ssn (ssn@moz-FB2CDEE1.lightspeed.snjsca.sbcglobal.net)
[23:11:39] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[23:11:52] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[23:12:05] <bjz> https://github.com/mozilla/rust/issues/6538
[23:12:17] <bjz> https://github.com/mozilla/rust/issues/6533
[23:13:40] <aatch> Hmm, interesting, the basicaa pass is actually suprisingly precise.
[23:13:59] <bjz> EXetoC: I had a separate vid mode struct when I had the mid-level wrapper, but I've removed that now so I can probably remove the 'faithful' struct
[23:14:14] <bjz> ie. 'faithful' in terms of naming
[23:14:29] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[23:15:07] <bjz> EXetoC: I agree that we need to move away from using c_ints into the future
[23:15:51] *** Joins: pcwalton (pcwalton@moz-49417AD2.dsl.dynamic.sonic.net)
[23:15:51] *** ChanServ sets mode: +o pcwalton
[23:17:10] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:18:21] *** Joins: MaikKlein (maik@moz-340073FA.dip0.t-ipconnect.de)
[23:18:31] <MaikKlein> .
[23:18:42] *** Quits: snearch (snearch@moz-B2303D4D.pool.mediaways.net) (Quit: Verlassend)
[23:18:45] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[23:19:34] <EXetoC> bjz: yeah ok
[23:19:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:19:43] <bblum> hey graydon, are you interested in the details of the Sized types / once fn / proc discussion?
[23:19:46] <EXetoC> time to hug the pillow. gl&hf! ribbit
[23:19:56] <graydon> bblum: yeah
[23:21:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:21:29] <bblum> i've been turning my gears on it pretty much all of today, trying to get up to speed on and weigh the tradeoffs of the different ways to do it
[23:21:42] <graydon> mhm
[23:21:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:21:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/c95RBQ
[23:21:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:24:31] <bblum> for the Sized proposal, i mostly like it, but part of me also wonders if what will be gained (the ability to call &T functions on unsized types) is worth the tradeoff (not being able to use type parameters in as many situations and/or having to write Sized in a bunch of places)
[23:24:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:24:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DR0rEg
[23:24:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:24:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:24:39] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/QOYRXQ
[23:24:39] <ghrust> 13rust/06auto 14da71b0c 15Patrick Walton: librustc: Redo the unsafe checker and make unsafe methods not callable from safe code
[23:24:39] <ghrust> 13rust/06auto 14a6e2b97 15Patrick Walton: libsyntax: Make `drop` no longer a keyword
[23:24:39] <ghrust> 13rust/06auto 14cd91fb2 15Patrick Walton: libsyntax: Stop parsing mutable fields
[23:24:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:24:47] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:25:14] *** Quits: pcwalton (pcwalton@moz-49417AD2.dsl.dynamic.sonic.net) (Quit: pcwalton)
[23:25:26] <bblum> for the once fn / proc side of the deal, the proposed plans so far seem to be a weird mix of two possible type systems
[23:26:20] <bblum> one where fns, traits, vecs, and strs are all dynamically-sized and can only be used with a pointer outside of them (this way, the Sized proposal makes a lot of sense)
[23:26:59] <bblum> and one where fns, traits, vecs, and strs are statically-sized things "with a pointer inside"
[23:27:09] *** Joins: lkuper (lkuper@290F781E.FFCF2A3B.51B6877.IP)
[23:27:20] <bblum> which reminds me of the old days where the pointer sigil went after the type
[23:27:22] *** Quits: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) (Quit: jrfeenst)
[23:28:30] <graydon> I don't think that's the difference
[23:28:33] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:28:45] <graydon> today, &fn is 2 words; the environment is not owned
[23:28:59] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:29:18] <graydon> I mean, it has to have "a pointer inside"
[23:29:38] <MaikKlein> with an i7 should I do make -j4 or j2? I have an dual core with hyperthreading
[23:29:39] <graydon> whereas ~fn only "has a pointer inside" currently because it's dynamically sized. it also owns its environment.
[23:29:44] <MaikKlein> what do you think will be better?
[23:29:55] <graydon> MaikKlein: 4
[23:30:04] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[23:30:09] <MaikKlein> graydon, thanks
[23:30:10] <graydon> bblum: owning the environment is the salient difference
[23:30:27] <bblum> ah, i sort of think of that as orthogonal
[23:30:44] <bblum> they're all (function pointer, {pointer type} environment packet)
[23:31:06] <graydon> yes, that's how I thought of them too
[23:31:37] <graydon> but niko's argument underlying all this is that &fn is "fundamentally different" from a thing that owns a bunch of values
[23:31:50] <graydon> that ~fn is a lot more like Trait than like &fn, essentially
[23:32:48] <bblum> what i'm trying to avoid is saying that one is "statically sized" just based on which pointer type points to the environment packet
[23:33:03] <bblum> really? i think of ~fn as basically the same as ~Trait, and &fn as basically the same as &Trait
[23:33:35] *** Quits: RMF (RMF@moz-9FED8AA.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[23:33:43] <bblum> the traits just have more than one function pointer
[23:33:45] <graydon> yeah, the reason he thinks this has to do with environment capture
[23:34:09] <nmatsakis> I don't have time to fully participate in this discussion (late here), but I will read logs later perhaps,
[23:34:22] <graydon> an implementation of a trait has a construction point where ownership is handed off of specific variables
[23:34:33] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[23:34:34] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[23:34:36] <graydon> whereas a ~fn just moves-out whatever it happens to use in its environment
[23:34:49] <nmatsakis> but I just want to add that I consider the definition of a copying closure vs borowed closure to be quite different conceptually,
[23:34:53] <nmatsakis> though the use of them is not so different
[23:35:02] <graydon> I believe niko thinks this is too surprising / counterintuitive to the user. especially since the compiler picks whether you mean ~fn or &fn based on inference
[23:35:13] <graydon> from a || foo expression
[23:35:27] <graydon> bblum: did you read http://smallcultfollowing.com/babysteps/blog/2013/05/14/procedures/
[23:35:37] <bblum> yeah, i read all of them
[23:35:45] <graydon> I think it lays out his reasoning on this point. I found it persuasive enough (though I'm reasonably easily persuaded on such things..)
[23:35:54] <graydon> "In general, I would prefer to draw a starker line between copying and by-reference closures"
[23:35:58] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:36:00] <graydon> I don't think it was a "we have to do this" thing
[23:36:26] <bblum> yeah, he invited me to draft proposals of my own :P
[23:36:31] <graydon> more of a "this seems cleaner and lets us avoid writing &fn all over the place anyway" thing
[23:36:41] <graydon> we can write fn instead
[23:37:01] <graydon> but I .. am not too strongly moved by that. and I'm worried about the charge of "rust has N function types"
[23:37:43] <graydon> it's a cheap joke, but one that may well cost another chunk of users. it appears to be more cognitive load.
[23:38:05] <bblum> a big part of the question is in having easy defaults
[23:38:45] <bblum> having to write &fn and/or not being able to promote &fn to &T will confuse some people; having a subtle difference between fn and proc will confuse other people
[23:39:03] <bblum> ah yes, so there was an idea i had about the borrowing/copying thing
[23:39:22] <bblum> which is that it's orthogonal (though often correlated) with whether the environment is on the heap or the stack
[23:39:37] <strcat> tjc: if only I knew how to remove the dashes...
[23:39:42] *** Joins: jack (jack@2557E599.66715431.D25A875A.IP)
[23:39:54] *** Joins: rntz__ (daedalus@moz-7E35218B.cmdnnj.fios.verizon.net)
[23:40:04] <strcat> tjc: http://i.imgur.com/TSnoqkI.png
[23:40:09] * strcat shrugs
[23:40:12] *** Joins: carllerche_ (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[23:40:17] *** Joins: samebcha1e (samuel@moz-7519FE69.net)
[23:40:28] <tjc> strcat: nice! You mean the column of dashes in the middle?
[23:40:38] *** Joins: thiez_ (thiez@moz-BF669398.student.utwente.nl)
[23:40:38] <strcat> tjc: no the dash it puts in front of the lint name
[23:40:39] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[23:40:42] *** Joins: robn` (robn@moz-76B0302C.static.internode.on.net)
[23:40:42] *** Joins: corecode_ (2@moz-BCA4C10D.org)
[23:40:43] *** Joins: mschifer1 (Adium@2557E599.66715431.D25A875A.IP)
[23:40:44] *** Joins: glandium` (glandium@moz-A09032B1.kimsufi.com)
[23:40:44] *** Joins: decoder_ (quassel@moz-D7023D7D.own-hero.net)
[23:40:45] *** Joins: benh_ (ben@moz-4A0366D2.org)
[23:40:45] *** concrete.mozilla.org sets mode: +R 
[23:40:45] *** Quits: MaikKlein (maik@moz-340073FA.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: ski (Stefan@moz-4BB5E0FF.studat.chalmers.se) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: heftig (heftig@moz-9E352B4E.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: Mowah (Mowah@moz-B9D06A8A.cust.bredbandsbolaget.se) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: igl1 (igl@moz-6E374773.adsl.alicedsl.de) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: EarlGray (mitra@8E712A0.54C21BA0.9F317420.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: tav (tav@moz-F64BC922.range86-145.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: cdidd (cdidd@moz-9832744D.broadband.corbina.ru) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: wizeman_ (quassel@moz-9C343656.dyn.user.ono.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: kimundi (kimundi@moz-21E92379.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: CMCL (cmcl@moz-8C2E912C.co.uk) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: cscottnet_away (cscott@moz-2577C94A.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: sawrubh (uid6719@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: gmcabrita (uid4474@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: chadz (uid979@moz-A588D045.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: doomlord (doomlod@moz-A9E19E41.range86-140.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: geomyidae__ (uid214@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: wilfred (uid159@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: nef (andor@moz-B1384951.neferty.in) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: corecode (2@moz-BCA4C10D.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: pcdummy (quassel@moz-CF4CA865.page4me.ch) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: nass (nass@4F314BB3.5408CE6B.B38D1DE0.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: n0vember (n0vember@moz-690FFF9D.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: thiez (thiez@moz-BF669398.student.utwente.nl) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: oal (oal@2602D8B5.799888E6.F7A44A1B.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: arete (arete@moz-CE1DC602.xen.prgmr.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: samebchase (samuel@moz-7519FE69.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: benh (ben@moz-4A0366D2.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: DasIch (dasich@moz-756B08B1.clients.your-server.de) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: jc-denton (nils@moz-C5E8B5EA.ethz.ch) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: rntz_ (daedalus@moz-7E35218B.cmdnnj.fios.verizon.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: disjukr_ (disjukr@D4D5F731.A5F7C7E2.84F431B6.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: prudhvi (prudhvi@moz-154A460A.supr.io) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: mixi (mixi@moz-DBD8904A.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: ion (ion@heh.fi) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: chee (chee@moz-E5A0DD8.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: pascal (pascal@moz-3A678551.pascalj.de) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: IdolfHatler (idolf@moz-4103EACC.pwnies.dk) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: vermeille (vermeille@moz-436628F6.net) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: terje (terje@moz-C0F75C5F.san.res.rr.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:45] *** Quits: companion_cube (simon@moz-F48A362B.cedeela.fr) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: Tad (Tom@moz-2036EE54.kimsufi.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: tristram (tristram@moz-C498CC41.eu) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (concrete.mozilla.org gravel.mozilla.org)
[23:40:46] *** carllerche_ is now known as carllerche
[23:40:57] <tjc> strcat: oh, I see. well, we could just make rustc accept that :-D
[23:40:58] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[23:40:58] *** Joins: ion (ion@heh.fi)
[23:41:01] <strcat> tjc: it's some horrible optspec thing I don't understand ;p
[23:41:08] <aatch> <.<
[23:41:12] <strcat> I'm sure it can be done because 'ip' completes like that
[23:41:12] <tjc> yeah, I can't say I'm encumbered by that knowledge either
[23:41:14] <strcat> ip link set
[23:41:22] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[23:41:26] <strcat> I'm really terrible at reading shell stuff :)
[23:41:33] <strcat> $${}[][&@*^$@% is all I see
[23:41:56] <aatch> strcat, is that perl?
[23:41:58] <aatch> :P
[23:42:04] <strcat> aatch: or J
[23:42:09] <aatch> lol
[23:42:14] *** decoder_ is now known as decoder
[23:42:24] <strcat> I would not be surprised if it was valid J
[23:42:35] <strcat> (($:@(<#[), (=#[), $:@(>#[)) ({~ ?@#)) ^: (1<#)
[23:42:38] <strcat> quicksort in J, apparently
[23:42:56] <aatch> That is pure madness
[23:43:11] <bblum> graydon: i realized that closure capturing is a similar sort of "implicit reference" to what used to be in argument modes and pattern-matching, and if we just make them explicit references (perhaps with a capture clause), there would be no distinction between "the closure owns its environment" and "the closure's environment satisfies Owned"
[23:43:18] <steven_is_false> Hi! I don't have a mac, and I was wondering if someone who does could test if my project at http://gitorious.org/p-x builds correctly on mac systems?
[23:44:34] <bblum> the downside of this would be, e.g., that "let mut x = 0; do something { x++; }" would have to become "let mut x = 0; do something |ref mut x| { (*x)++; }" (some, but not all, of the pain could be mitigated with smart defaults for capture clauses)
[23:45:34] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[23:45:39] *** concrete.mozilla.org sets mode: -R 
[23:45:39] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[23:45:40] *** Joins: pascal (pascal@moz-3A678551.pascalj.de)
[23:46:05] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[23:46:06] *** Joins: nef (andor@moz-B1384951.neferty.in)
[23:46:07] *** Joins: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP)
[23:46:13] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[23:46:16] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[23:46:27] *** Joins: ruediger (quassel@moz-C9B8D8D0.org)
[23:46:29] *** Joins: pcdummy (quassel@moz-CF4CA865.page4me.ch)
[23:46:29] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[23:47:07] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[23:47:39] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[23:47:48] <bjz> dbaupp: yoho
[23:47:58] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[23:48:00] <dbaupp> bjz: I'm back!
[23:48:07] <bjz> dbaupp: you have a PR?
[23:48:11] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[23:48:24] <dbaupp> bjz: on rusp, yes
[23:48:26] *** Joins: oal (oal@2602D8B5.799888E6.F7A44A1B.IP)
[23:48:36] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[23:48:39] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[23:48:40] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[23:48:46] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[23:48:46] *** Joins: chee (chee@moz-E5A0DD8.org)
[23:48:53] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[23:48:55] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[23:48:59] *** Joins: DasIch (dasich@moz-756B08B1.clients.your-server.de)
[23:49:18] <graydon> bblum: capture clauses are more or less how 'bind' used to work. I liked it, nobody else did. but I'm paranoid. I'd be curious to see a worked out example that actually passes the smell test for others.
[23:49:37] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[23:49:41] <bblum> what's bind? must have been something from before last summer
[23:49:43] *** Joins: Tad (Tom@moz-2036EE54.kimsufi.com)
[23:50:00] <graydon> oh, yeah. it was a thing from sather.
[23:50:07] *** Joins: chadz (uid979@moz-A588D045.irccloud.com)
[23:50:07] <graydon> given fn foo(int a, int b)
[23:50:23] <graydon> the expression "bind foo(10, _)" would produce a 1-arg closure
[23:50:26] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[23:50:32] <dbaupp> bjz: it's a bit huge, and I just realised the last commit breaks the tests
[23:50:32] *** Joins: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com)
[23:50:40] <dbaupp> bjz: fixing it now
[23:50:40] <graydon> combined currying and environment "capture" in a way
[23:50:43] *** Joins: ski (Stefan@moz-4BB5E0FF.studat.chalmers.se)
[23:50:44] <graydon> but we didn't have lambda
[23:50:45] <bjz> dbaupp: sure
[23:50:49] <brson> steven_is_false: your project looks very interesting. I'm tempted to try it here (not on mac)
[23:50:51] *** Joins: prudhvi (prudhvi@moz-154A460A.supr.io)
[23:51:00] <graydon> so partly people hated it because they had to write lots of additional helper functions just for the sake of binding them.
[23:51:25] <graydon> and partly, because we had no bind-by-ref so it required everything to be a copying closure
[23:51:28] *** Joins: Mowah (Mowah@moz-B9D06A8A.cust.bredbandsbolaget.se)
[23:51:32] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[23:51:34] *** Joins: vermeille (vermeille@moz-436628F6.net)
[23:51:42] <bblum> ah, some sort of pre-closure way of defining closures
[23:51:47] <graydon> which, well, not so popular. I mean, it was enough to bootstrap rustc! but not much beyond that. nobody liked it.
[23:51:48] <graydon> yeah
[23:51:51] <bjz> aatch: how would JIT with rusp affect the current implementation?
[23:52:00] <dbaupp> bjz: done
[23:52:07] <graydon> (I liked it. nice and clear what you're doing)
[23:52:09] <aatch> bjz, no idea, I haven't looked at the current impl
[23:52:09] *** Joins: zz_kimundi (kimundi@moz-21E92379.dip0.t-ipconnect.de)
[23:52:25] *** zz_kimundi is now known as kimundi
[23:52:33] <bblum> c.c, i can see why nobody liked it
[23:52:38] <bjz> aatch: how would you implement it, not having seen the current impl?
[23:52:45] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Input/output error)
[23:52:49] *** Joins: CMCL (cmcl@moz-8C2E912C.co.uk)
[23:52:50] <bblum> it doesn't seem like that would let you mutate upvars and have the mutations persist
[23:52:57] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[23:53:06] <graydon> there were no upvars
[23:53:07] <strcat> graydon: meh, another big (7MiB) space regression since yesterday
[23:53:14] <graydon> grr
[23:53:23] <bblum> right, you would copy in all the "upvars" by value
[23:53:29] <bjz> aatch: would it generate rust code that is jitted?
[23:53:35] <graydon> strcat: wait, 7mb binary-size?
[23:53:39] <strcat> graydon: yes
[23:53:42] <bjz> aatch: I'm not very familiar with jit
[23:53:46] <brson> steven_is_false: I see 'AttributeError: 'Mesh' object has no attribute 'faces'' on linux using blender 2.63
[23:53:48] <aatch> bjz, I was thinking straight into JIT.
[23:53:59] <bblum> the success of ref-patterns replacing the implicit-reference patterns is what inspires my current proposal :P i just need to figure out some rules for smart defaults
[23:54:04] <bjz> aatch: nice
[23:54:17] <aatch> Or more accurately, straitght into IR that is JIT-ed
[23:54:33] <strcat> graydon: it's not that bad, but it probably means bad codegen
[23:54:43] <bblum> i think i have enough figured out to write a proposal by now, although i'm afraid niko will be like "your way makes this feature impossible, which we need to save"
[23:54:47] <strcat> unless someone added some huge module ;p
[23:54:48] <steven_is_false> brson: That's strange, can you give me the contents of assets.rs in pX-x_assets?
[23:54:51] <bblum> c.c
[23:54:56] *** Joins: geomyidae__ (uid214@moz-C944F5EC.irccloud.com)
[23:54:56] *** Joins: wilfred (uid159@moz-C944F5EC.irccloud.com)
[23:54:59] *** Joins: jihyun (uid7128@moz-D8B63698.irccloud.com)
[23:55:03] <bjz> aatch: I'm guessing we could still leverage the existing parser
[23:55:23] <steven_is_false> brson: Wait, I actually know what problem that is.
[23:55:23] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[23:55:30] *** Joins: mixi (mixi@moz-DBD8904A.org)
[23:55:34] *** Joins: tristram (tristram@moz-C498CC41.eu)
[23:55:40] <aatch> I'm not certain, but it shouldn't be too difficult to maintain references to the relevant bits inside LLVM.
[23:55:43] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[23:56:03] *** Joins: MaikKlein (maik@moz-340073FA.dip0.t-ipconnect.de)
[23:56:23] <bblum> huh. i guess the old 'bind' is just the same as making closures in ML or haskell, since variables in those languages are not assignables
[23:56:43] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[23:56:52] <aatch> In this case, LLVM is just an execution engine, so you can still do things like redefine functions on the fly and similar
[23:56:52] *** Joins: SimonSapin (simon@5AAE35B2.5EFFC0B8.24454B25.IP)
[23:56:57] <bjz> aatch: currently we have an enum of identifiers and values stored in a hash-map
[23:57:13] <strcat> graydon: I guess it has to do with the optimization pass changes
[23:57:25] <strcat> only other thing is alignment for memset
[23:57:31] <bjz> aatch: so the  hashmap is <Ident,Value>
[23:57:45] <aatch> I'd have to look at the LLVM stuff more closely to see if they have a built-in symbol table to leverage
[23:57:56] <steven_is_false> brson: A LONG time ago when I first started this project I was using Blender 2.63 but now I'm using 2.62, and I had to switch the name of a member to .faces. I think the most convenient thing would be for me to upgrade to a later version of Blender, and not support the older version.
[23:58:06] *** Joins: gmcabrita (uid4474@moz-D8B63698.irccloud.com)
[23:58:08] *** Joins: dfsf (Mibbit@moz-F22F1CE3.net.uwaterloo.ca)
[23:58:09] <graydon> strcat: yeah. aatch any chance you could do some before/after poking at your llvm change, performance and binary-size-wise?
[23:58:10] <bjz> aatch: currently the implementation requires lots of runtime checking
[23:58:20] *** Quits: dfsf (Mibbit@moz-F22F1CE3.net.uwaterloo.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[23:58:30] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[23:58:34] *** Quits: eholk (eholk@moz-34E444EA.uconnect.utah.edu) (Quit: eholk)
[23:58:49] <MaikKlein> are tasks the only way to achieve concurrency in rust?
[23:59:11] *** Quits: jeff (jeff@moz-A2645AF4.nycmny.east.verizon.net) (Quit: jeff)
[23:59:13] <steven_is_false> brson: Thank you for helping out with testing. Another alternative might be to preexport the Blender assets to assets.rs files before uploading to the repository.
[23:59:49] *** Joins: nass (nass@4F314BB3.5408CE6B.B38D1DE0.IP)
