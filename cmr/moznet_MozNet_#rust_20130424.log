[00:03:11] *** Joins: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu)
[00:04:13] *** Quits: ghusbands (Mibbit@moz-6D1C0B06.broadband.tesco.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:05:28] *** Joins: btipling (btipling@moz-E36F67E7.hfc.comcastbusiness.net)
[00:07:56] *** Quits: jviereck (Adium@moz-788AC8AF.ethz.ch) (Quit: Leaving.)
[00:11:22] *** Quits: engla (engla@moz-E4A8CEF5.customer.cdi.no) (Ping timeout)
[00:11:47] *** Joins: seth|pto (seth@moz-D840E602.dsl.static.sonic.net)
[00:20:54] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[00:23:01] *** aatch|bed is now known as aatch
[00:24:33] <cuemin> I think I found a bug
[00:24:34] <cuemin> http://pastie.org/7706112
[00:25:04] <cuemin> er, gist with highlighting: https://gist.github.com/dymk/5448608
[00:25:04] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[00:25:23] <cuemin> at least I assume that the crash isn't expected behavior
[00:27:26] <cmr> Doesn't crash on linux, 0.6
[00:27:32] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[00:27:40] <cmr> It crashes before the println?
[00:27:56] <cmr> But *after* the push?
[00:29:09] <cuemin> no, after the println
[00:29:17] <cuemin> println was there to see if it made it out of main
[00:29:30] <cmr> Strange.
[00:29:37] <cuemin> so that makes me think it's a bug in how the mutable vector is being freed
[00:29:40] <cmr> Do you have visual studio / another debugger installed to see where?
[00:29:49] <cuemin> I'll see if I can get a stacktrace
[00:30:01] <cuemin> but yeah, I've got VS
[00:30:23] *** Quits: cuemin (Quemin@44EEE21C.A6E21E6E.5E500FC7.IP) (Connection reset by peer)
[00:30:36] *** Joins: cuemin (Quemin@44EEE21C.A6E21E6E.5E500FC7.IP)
[00:30:42] <cuemin> but yeah, I've got VS
[00:31:05] *** Quits: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu) (Ping timeout)
[00:31:17] <cuemin> Huh, can I get Rust to generate debugging symbols?
[00:31:23] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:31:25] <cmr> rust -Z, I believe
[00:31:41] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[00:31:43] <cmr> -Z debug-info
[00:32:36] <Luqman> ~Traits are known to be quite buggy
[00:32:40] *** Quits: guitsaru (guitsaru@A8985A22.5DF68D0E.4C2245EF.IP) (Client exited)
[00:32:56] *** Quits: bnicholson_ (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:33:09] *** Joins: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com)
[00:33:12] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:33:23] <cuemin> "Binary is not built with debugging information"
[00:33:30] <cuemin> after building with -Z debug-info
[00:34:33] <cuemin> can rustc emit seperate debug symbol info for VS?
[00:34:54] <strcat> doubt it
[00:35:02] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[00:35:06] <strcat> you can use gdb on windows afaik
[00:35:18] *** Quits: btipling (btipling@moz-E36F67E7.hfc.comcastbusiness.net) (Quit: Computer has gone to sleep.)
[00:35:26] <cuemin> indeed I can, I just like my hair not grey ;)
[00:35:35] <doomlord> good general question, what is the status of debuggers with rust.. what can you do/not do
[00:35:46] <strcat> cuemin: just run it in gdb and it will catch the segfault/abort ;p
[00:35:51] <strcat> and then bt full and it's done
[00:36:12] <tiffany> gdb is the only debugger I've really ever used
[00:36:18] <sp3d> "disasm" is also often informative
[00:36:28] <cmr> I tried gdb but it wouldn't print locals etc
[00:36:36] <strcat> cmr: need debug symbols for that
[00:36:43] <cmr> I thought I had debug symbols, maybe not.
[00:36:56] <strcat> and gcc knows how to make it work with full optimization now
[00:37:07] <cuemin> op, yep, segfault
[00:37:09] <strcat> http://gcc.gnu.org/wiki/Var_Tracking_Assignments
[00:37:12] <strcat> dunno if LLVM can do that
[00:37:33] <strcat> heh that wiki page is pretty out-of-date
[00:38:03] <cuemin> oh man I have no idea how to use this program; is there any way I can get it to generate a big ol' dump to submit as a bugreport?
[00:38:16] <strcat> cuemin: just do 'gdb program' and then 'run'
[00:38:30] <strcat> it will catch a segfault, and then you can use 'backtrace' to get a stack trace
[00:38:31] <cuemin> yep, now it's back to the gdb prompt after the segfault
[00:38:39] <cuemin> oh, okay, did that too
[00:38:58] <strcat> bt full in theory shows local vars... if there were debug symbols ;p
[00:39:13] <erickt> woo, progress on getting methods to pass self in as the first argument of a function! rustc is no longer failing, but typeck is complaining about how I'm not passing two arguments to `==`
[00:39:22] <cuemin> heh, built it with -Z debug-info, and there's not a ton to go by still
[00:39:28] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[00:39:31] <cuemin> #6  0x61908016 in task_start_wrapper (a=0x34982c)
[00:39:31] <cuemin>     at c:/bot/slave/dist-win/build/src/rt/rust_task.cpp:162
[00:39:47] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[00:39:58] <strcat> erickt: nice :)
[00:40:11] *** Joins: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu)
[00:40:18] <cuemin> https://github.com/mozilla/rust/blob/master/src/rt/rust_task.cpp#L162
[00:40:19] <strcat> erickt: removing all of the silly duplicate free functions will be nice...
[00:40:28] *** Joins: guitsaru (guitsaru@A8985A22.5DF68D0E.4C2245EF.IP)
[00:40:37] <erickt> strcat: only 242 incorrect type errors to fix to compile libcore
[00:41:26] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:41:30] <cuemin> I suppose I'll hand this off here, seeing as I've got really no idea what to do with it: http://pastie.org/7706174
[00:42:05] <strcat> cuemin: the other stuff is probably in libc/libstdc++
[00:42:27] <Luqman> cuemin: is that for the gist you posted?
[00:42:36] <cuemin> Luqman, yep
[00:43:36] <Luqman> i seem to get a bit more from gdb http://pastebin.mozilla.org/2341852
[00:44:14] <cuemin> probably platform differences? 
[00:44:30] <aatch> erickt, does that mean there you will be able to do: fn thing(a:Type, b:int); let a : Type = Type{}; a.thing(10)
[00:44:48] <cuemin> rustc doesn't seem to do anything different in terms of compiling with debugging symbols on Windows vs not with symbols
[00:45:19] <cuemin> aatch: I swear I've seen something similar done in D
[00:45:19] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[00:45:30] <aatch> cuemin, there is
[00:46:00] <strcat> aatch: no the reverse ;p
[00:46:16] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[00:46:16] *** ChanServ sets mode: +o pcwalton
[00:46:39] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[00:46:42] <erickt> aatch: I'm only hacking up trans, not really the type checker. Theoretically you could do that, but I'm not sure if the type checker could do it
[00:47:22] <aatch> I think it would be a little too much work for typeck
[00:47:24] <strcat> aatch: as in if you can do foo.bar() where foo is a Foo and bar is a method in the non-trait impl, you can also do Foo::bar(foo)
[00:47:39] <strcat> so you'll be able to pass methods directly as &fn
[00:48:01] *** Joins: Bernkastel (suckmy@7F352483.A9B419CB.1C8C8CE9.IP)
[00:48:07] <aatch> D can do it because it already has all the infrastructure in place for function overloading anyway.
[00:48:09] <strcat> maybe it will work for trait methods too. dunno.
[00:48:23] <erickt> Yeah, that's probably where this code will get used
[00:48:47] <strcat> foo(a, Add::add)
[00:49:05] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:50:03] <aatch> That'll be nice for functional constructs
[00:51:37] <cmr> so rust will be getting overloading?
[00:51:52] <strcat> no
[00:51:58] <strcat> not more than already exists
[00:52:18] <strcat> you'll just be able to call methods as functions
[00:52:53] <strcat> there are already static methods in traits which are equivalent to generic functions in haskell
[00:52:55] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[00:53:50] <EXetoC> oh that's what you meant by reverse. interesting
[00:55:00] <EXetoC> will look a little more cluttered though
[00:56:13] <strcat> so you can do 'f(Type::method)' instead of 'f(|x, y, z| x.method(y, z))'
[00:56:44] <strcat> minor thing ;p
[00:57:01] <strcat> but removes any reason to have all these duplicate free functions everywhere in the stdlib
[00:58:47] *** Quits: skinner (skinner@6E211B03.FE8B979F.432EAF84.IP) (Quit: Leaving)
[01:09:41] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[01:10:11] *** Joins: mzabaluev (mzabaluev@moz-F3BF265C.dhcp.inet.fi)
[01:11:16] <mzabaluev> Hi. How do you make an owned value stick around when you pass it by unsafe pointer to an FFI function?
[01:14:44] <pcwalton> mzabaluev: cast::forget
[01:14:59] <brson> mzabaluev: usually if I'm doing something like that I will try to make the unsafe code obey ownership semantics, so when you pass the owned pointer to native code it is owned by native code. then you arrange for the native code to later transfer ownership back to you and everything works out
[01:15:34] *** Quits: heftig (heftig@moz-3032880D.dip0.t-ipconnect.de) (Ping timeout)
[01:16:08] <brson> in that case you transmute the ~ to * in one direction then back the other direction (or just pass ~ pointers to and from the FFI directly - I think that works)
[01:16:12] *** Quits: zz_kimundi (kimundi@moz-9AB87C7C.dip0.t-ipconnect.de) (Ping timeout)
[01:16:20] <mzabaluev> brson: yes, exactly. The native code will pass the pointer to a callback
[01:16:37] <pcwalton> oh yeah, transmute will work too
[01:16:53] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:16:55] * aatch abuses transmute so much
[01:17:41] <mzabaluev> pcwalton: so transmute affects the original slot too?
[01:17:49] <pcwalton> mzabaluev: it uses move semantics
[01:17:53] <pcwalton> so the destructor won't be run
[01:17:59] <mzabaluev> OK
[01:18:40] <aatch> Although, I generally find that borrowed pointers more closely match native semantics
[01:19:23] <mzabaluev> brson: passing owned pointers to the FFI sounds like too much black magic. It should be explicit IMO 
[01:19:34] <pcwalton> mzabaluev: brson: you can't do that.
[01:19:59] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[01:20:02] *** Joins: zz_kimundi (kimundi@moz-9AB87C7C.dip0.t-ipconnect.de)
[01:20:12] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: Eaten by grue.)
[01:20:24] *** Joins: heftig (heftig@moz-3032880D.dip0.t-ipconnect.de)
[01:20:27] * mzabaluev thinks he now grasps the important difference between reinterpret_cast and transmute
[01:20:27] *** zz_kimundi is now known as kimundi
[01:20:45] <pcwalton> I renamed reinterpret_cast to transmute_copy in my no-modes branch
[01:20:56] <aatch> there's a difference?
[01:20:59] <pcwalton> yes
[01:21:01] <cmr> what were modes?
[01:21:06] <pcwalton> transmute doesn't run the destructor
[01:21:10] <pcwalton> you don't wanna know
[01:21:14] <cmr> heh
[01:21:23] <pcwalton> (a feature like C#'s 'ref' parameters)
[01:21:25] <aatch> Misguided.
[01:21:59] <mzabaluev> pcwalton: BTW, does transmute_mut_region also bestow the return pointer's region on the box?
[01:22:15] <aatch> cmr, just know that they were replaced with the current borrowed pointer stuff.
[01:22:37] <cmr> Ok
[01:23:32] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[01:23:40] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[01:24:39] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[01:25:16] <brson> somehow a crash made it to incoming http://buildbot.rust-lang.org/builders/incoming-quick-linux/builds/1292/steps/test/logs/stdio
[01:26:36] <Jeaye> Wasn't me.
[01:29:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:29:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KECB5w
[01:29:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:29:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:29:14] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/ye8IMA
[01:29:14] <ghrust> 13rust/06auto 14c089a17 15Alex Crichton: Improve the unused unsafe block warning to include unsafe blocks in unsafe functions
[01:29:14] <ghrust> 13rust/06auto 144c08a8d 15Alex Crichton: Removing more unnecessary unsafe blocks throughout
[01:29:15] <ghrust> 13rust/06auto 140c2ab66 15Alex Crichton: Fixing some various warnings about unused imports
[01:29:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:32:47] *** Quits: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu) (Ping timeout)
[01:34:02] <pcwalton> yay, rustc-that-does-not-know-what-a-mode-is is bootstrapping
[01:36:56] <EXetoC> fun?
[01:37:28] <pcwalton>  41 files changed, 565 insertions(+), 1086 deletions(-)
[01:37:34] <pcwalton> decent amount of code removed from the compiler
[01:37:38] <erickt> woah
[01:37:56] <EXetoC> great
[01:38:18] <EXetoC> soon it'll just be a thousand lines of self-documenting code
[01:39:02] *** Joins: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com)
[01:39:04] *** Joins: cuemin_ (Quemin@30C25EB7.8F293D07.59A90BC7.IP)
[01:39:33] *** Quits: cuemin (Quemin@44EEE21C.A6E21E6E.5E500FC7.IP) (Ping timeout)
[01:42:48] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[01:44:48] *** Quits: kimundi (kimundi@moz-9AB87C7C.dip0.t-ipconnect.de) (Ping timeout)
[01:44:48] *** Quits: heftig (heftig@moz-3032880D.dip0.t-ipconnect.de) (Ping timeout)
[01:47:03] *** Joins: zz_kimundi (kimundi@moz-9AB87C7C.dip0.t-ipconnect.de)
[01:47:21] *** Joins: heftig (heftig@moz-3032880D.dip0.t-ipconnect.de)
[01:47:27] *** zz_kimundi is now known as kimundi
[01:51:36] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:51:42] *** Joins: bnicholson_ (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:52:46] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[01:57:19] *** Joins: eholk (eholk@moz-D5BE5964.hsd1.in.comcast.net)
[01:57:47] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[01:57:56] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:58:06] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:58:45] <kemurphy> if i have a: &~Foo, and b: &~Foo, does *a == *b check that they are the same owned pointer or does it do a deep comparison?
[01:59:23] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[01:59:38] <brson> kemurphy: deep
[01:59:43] <erickt> kemurphy: it'll do whatever the impl of Eq trait will do for the Foo type
[02:00:48] <kemurphy> is there a way to do the former?
[02:01:17] <erickt> kemurphy: there's ptr::ptr_eq
[02:01:38] <erickt> oh, that's gone now
[02:01:52] <kemurphy> erickt: yeah, i remembered that from like 0.3 but i couldn't find it now
[02:01:53] <erickt> ah, it's ptr::ref_eq
[02:02:12] <kemurphy> erickt: awesome, thanks!
[02:02:18] *** Quits: dew (Instantbir@moz-EBC2DF0B.dhcp.stls.mo.charter.com) (Quit: Instantbird 1.3 -- http://www.instantbird.com)
[02:03:00] <erickt> nmatsakis: ping
[02:03:04] <nmatsakis> erickt: pong
[02:03:11] <erickt> hey there!
[02:03:12] *** Joins: dew (Instantbir@moz-EBC2DF0B.dhcp.stls.mo.charter.com)
[02:03:34] <erickt> so i'm hacking away at getting methods to pass self in as an argument instead of through the environment pointer
[02:03:44] <nmatsakis> oh, cool.
[02:04:50] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[02:05:09] <erickt> is there a handy approach to taking a receiver expression, and modifying it to build a region expression when calling a method with a `&self`argument?
[02:05:31] <nmatsakis> erickt: you should not have to think about that, the adjustments should handle it for you
[02:05:37] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[02:05:51] <nmatsakis> erickt: the type checker inserts "adjustments" in a side table that tell trans to take extra refs etc
[02:06:55] <erickt> maybe I'm going about it in the wrong way, but I was finding myself having to go into typeck to pass in the right fn type to trans
[02:07:41] <erickt> what's the side table that contains those adjustments?
[02:07:48] <nmatsakis> erickt: ah, I see, well, so the fn-type that typeck produces doesn't include the self argument, this is true
[02:08:15] <nmatsakis> erickt: if you call expr::trans_to_datum or some similar method, the adjustments are already considered
[02:08:23] <nmatsakis> the side-table is called adjustments and it is in the tcx
[02:09:13] <nmatsakis> erickt: while I think the fn type probably should include the self argument, I don't think that is needed for this particular patch...but then I'm not elbows deep in it like you are, so maybe I'm missing something
[02:09:20] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[02:09:21] <erickt> I'll look into this
[02:09:42] <nmatsakis> erickt: look into expr::trans_to_datum(), you'll see what I mean about the adjustments
[02:09:54] <nmatsakis> I believe we insert the required adjustments on the self expression already
[02:10:08] <mzabaluev> let callback = *(raw_cb as *~fn());
[02:10:14] <erickt> I originally tried to do this all in trans, but I ran into some difficulty trying to get the self argument into the llvm function declaration
[02:10:43] <nmatsakis> erickt: ah, I see, yes, you'd need to make some annoying modifications here and there to make that work
[02:10:53] <mzabaluev> Does the above unsafe code have move semantics? Does the closure get properly destroyed?
[02:11:24] <nmatsakis> mzabaluev: I believe it is moved out of the *, yes
[02:11:32] <nmatsakis> mzabaluev: meaning that the * is zeroed
[02:11:41] <nmatsakis> mzabaluev: and the destructor for `callback` will run as normal
[02:11:53] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[02:11:55] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[02:12:28] <mzabaluev> thanks
[02:13:05] <nmatsakis> erickt: gotta get to bed, but let's chat tomorrow
[02:13:10] <erickt> kk
[02:13:29] <erickt> although it'll probably be thursday. My day is packed tomorrow :(
[02:14:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:14:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ye8IMA
[02:14:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:16:55] <geomyidae__> Anyone see my remarks about quote!() from yesterday? Does anyone know how to get quote_tokens!( {whatever} ) to work?
[02:21:45] *** Quits: Sorella (queen@D6917206.B46B7936.54BCAB54.IP) (Quit: (quit))
[02:27:09] *** Joins: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu)
[02:28:17] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[02:28:30] <bjz> strcat: ping
[02:28:39] <bjz> strcat: ding
[02:28:42] <bjz> strcat: bing
[02:28:53] *** Quits: mzabaluev (mzabaluev@moz-F3BF265C.dhcp.inet.fi) (Quit: –£—Ö–æ–∂—É —è –æ—Ç –≤–∞—Å)
[02:29:02] <strcat> bjz: pong
[02:29:20] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:29:57] <bjz> strcat: with divide-by zero errors, what would be a good error? atm I have: "quotient with a divisor of zero" and "remainder with a divisor of zero"
[02:30:12] *** Quits: eholk (eholk@moz-D5BE5964.hsd1.in.comcast.net) (Quit: eholk)
[02:30:18] <strcat> bjz: that seems fine
[02:30:23] <bjz> okies
[02:30:52] <bjz> mitsuhiko: ^?
[02:30:59] <bjz> mitsuhiko: thoughts?
[02:31:28] <geomyidae__> what does quotient with a divisor of zero mean?
[02:32:57] <bjz> geomyidae__: you attempted `x / 0`
[02:33:17] <kemurphy> how does one typically implement IterBytes for a custom struct?
[02:33:28] <geomyidae__> oh. I guess I was confused because quotient usually refers to the result, but I see what you're saying.
[02:34:02] <geomyidae__> I took it to mean: "the result of the division had a divisor of zero" rather than "the quotient's divisor was/is zero" or something
[02:34:33] <kemurphy> (or should i be using a TreeSet instead of a LinearSet?)
[02:34:38] <bjz> geomyidae__: what about "attempted quotient with a divisor of zero"
[02:34:53] <geomyidae__> That's more immediately obvious to me, personally.
[02:35:23] <cmr> What's wrong with "attempted to divide by zero", or even just "divide by zero"?
[02:35:50] <cmr> *division, for that last one
[02:36:17] <bjz> cmr: we've changed the name of the operators
[02:36:38] *** Quits: tiffany (kawaii@moz-46D53C9A.dhcp.embarqhsd.net) (Ping timeout)
[02:38:20] <strcat> kemurphy: not sure if it can be derived
[02:38:21] *** Quits: igl (igl@moz-3AEE360F.adsl.alicedsl.de) (Ping timeout)
[02:39:06] *** Joins: igl (igl@moz-EDC0630B.adsl.alicedsl.de)
[02:39:21] <strcat> kemurphy: it just needs to produce a unique byte representation
[02:40:00] <strcat> if it's reversible somehow (you don't have to implement that though), it's a good enough implementation
[02:41:01] <Jeaye> rusti: let foo: ~[int, 3] = ~[0, ..3]; foo
[02:41:02] <rusti> foo.rs:5:23: 5:24 error: expected `]` but found `,`
[02:41:02] <rusti> foo.rs:5          let foo: ~[int, 3] = ~[0, ..3]; foo
[02:41:02] <rusti>                                 ^
[02:41:08] <Jeaye> rusti: let foo: ~[int, ..3] = ~[0, ..3]; foo
[02:41:09] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/KUId
[02:41:17] <Jeaye> What's the syntax for that?
[02:41:23] <strcat> rusti is 0.6
[02:41:24] <Jeaye> To have all elements set to 0?
[02:41:34] <strcat> ~[0, ..10] 
[02:41:45] <Jeaye> So that is proper, for incoming?
[02:41:46] <strcat> Jeaye: you want a dynamic array, right?
[02:41:50] <Jeaye> No, fixed size.
[02:42:09] <strcat> well ~[3, ..5] is interpreted as a dynamic array
[02:42:18] <strcat> need ~([3, ..5])
[02:42:27] <Jeaye> Hmm
[02:42:42] <Jeaye> What significance do they have?
[02:42:44] <Jeaye> ()
[02:43:08] <strcat> none
[02:43:11] <strcat> just a separator
[02:43:20] <Jeaye> hmm, ok.
[02:43:37] <strcat> rusti: let x = [1, ..3]; ~x
[02:43:39] <rusti> ~[1, 1, 1]
[02:43:49] <strcat> rusti: ~([1, ..3])
[02:43:50] <rusti> ~[1, 1, 1]
[02:43:53] <strcat> same thing
[02:44:06] <strcat> at least in incoming, ~[1, ..3] is a dynamic array though
[02:44:08] <Jeaye> Now, by dynamic array you mean: `int foo[2];` vs. `vector<int> foo(2);` ?
[02:44:23] <strcat> well std::array<int, 2> vs std::vector<int> - yeah ;p
[02:44:33] <kemurphy> strcat: hm, owned pointer's values don't change do they? my struct consists of 3 owned pointers so the best thing would be to just dump all 3 pointers to a ~[u8] (though this sounds unsafe, i think)
[02:44:40] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[02:44:52] <strcat> kemurphy: you can treat owned pointers (~T) as value types (T)
[02:44:56] <Jeaye> Gotcha.
[02:44:58] <Jeaye> Thanks.
[02:45:24] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[02:45:44] <strcat> kemurphy: I think you can just #[deriving(IterBytes)]
[02:45:54] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:46:01] <kemurphy> strcat: where would that go?
[02:46:05] <Jeaye> rusti: let foo: ~([int, ..3]) = ~[0, ..3]; foo
[02:46:05] <strcat> kemurphy: above the struct
[02:46:06] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FhjF
[02:46:12] <Jeaye> rusti: let foo: ~([int, ..3]) = ~([0, ..3]); foo
[02:46:13] <rusti> ~[0, 0, 0]
[02:46:16] <strcat> kemurphy: there's deriving for Eq, Ord, TotalEq, TotalOrd, IterBytes, etc.
[02:46:34] <strcat> just implements it for you the default way
[02:47:42] <strcat> I think the implementation it gives for IterBytes is imperfect but... it only matters for preventing a hash table DoS 
[02:47:57] <strcat> anyway can be fixed
[02:48:29] <kemurphy> strcat: doing that gives me error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[02:48:49] <strcat> kemurphy: dunno :(
[02:48:54] <aatch> kemurphy, well that's unrelated.
[02:49:19] <aatch> basically you need throw lifetimes at it until it shuts up
[02:49:19] <kemurphy> aatch: well, sure, but trying to add a lifetime parameter failed to parse
[02:49:31] <kemurphy> well, at least, in the expected way
[02:49:44] <kemurphy> #[deriving(IterBytes<'self>)]
[02:50:17] <aatch> kemurphy, you probably need to put lifetimes on your struct
[02:50:24] <kemurphy> they are already on the struct
[02:50:36] <aatch> Odd.
[02:50:43] *** Joins: igl1 (igl@moz-CEFE17B0.adsl.alicedsl.de)
[02:50:52] *** Quits: igl (igl@moz-EDC0630B.adsl.alicedsl.de) (Ping timeout)
[02:51:08] <aatch> I know that the compiler can get confused about the source of the error sometimes.
[02:51:22] <kemurphy> that's probably what's going on
[02:52:10] *** Quits: Benvie_ (brandon@4EAF34EF.DD136097.D01D599A.IP) (Quit: )
[02:52:11] *** Quits: Benvie1 (Thunderbir@4EAF34EF.DD136097.D01D599A.IP) (Quit: Benvie1)
[02:52:27] <kemurphy> so like, https://gist.github.com/kemurphy/7f6199202cffc8c34bad
[02:53:38] <kemurphy> strcat: i don't want to treat ~T as T because i don't want a deep hash; it'll hash the whole graph and the graph will be changing while it's being built
[02:54:43] *** Joins: Benvie (brandon@4EAF34EF.DD136097.D01D599A.IP)
[02:54:53] <strcat> LinearSet doesn't implement IterBytes so I don't think you'll be able to derive it
[02:55:04] <strcat> kemurphy: well, how will you deal with ~T without treating it as T?
[02:55:23] <aatch> strcat, treat it as *T?
[02:55:43] <strcat> that would probably be a broken hash function
[02:56:11] <kemurphy> strcat: ptr::to_uint seems to fit the bill
[02:56:25] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:56:29] <strcat> but then you have an easy way to hash multiple things to the same value
[02:56:47] <strcat> which kind of defeats the purpose of having SipHash 2-4 implemented for you
[02:57:48] <kemurphy> strcat: i'm not sure i follow? each node owns a different string at the very least, and it's own edge set, and has a borrowed pointer to the graph it belongs to
[02:58:07] <kemurphy> seems like a combination of those 3 pointers is enough to uniquely identify the node
[02:58:50] *** Quits: kimundi (kimundi@moz-9AB87C7C.dip0.t-ipconnect.de) (Ping timeout)
[02:59:17] <kemurphy> i fail to see how that would result in collisions, at least in the same edge set
[02:59:34] <strcat> I guess it can't
[03:00:44] <kemurphy> well, i'll try the to_uint method and see what that gets me then
[03:00:53] <strcat> I'm not really understanding how you're going to do lookups then
[03:02:35] *** Joins: zz_kimundi (kimundi@moz-C50B7F5D.dip0.t-ipconnect.de)
[03:02:52] *** Quits: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu) (Ping timeout)
[03:03:01] *** zz_kimundi is now known as kimundi
[03:03:24] <Thad> has the build-triple of   x86_64-w64-mingw32   landed yet ?  still says unsupported on my end
[03:03:25] *** Joins: btipling (btipling@moz-5413CFA4.hsd1.ca.comcast.net)
[03:03:37] *** Joins: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu)
[03:09:22] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[03:10:03] <geomyidae__> hm, how hard is it to change my git checkout/branch and then rebuild and switch backa nd forth?
[03:11:09] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:11:27] <strcat> geomyidae__: should Just Work if there wasn't an LLVM revision change
[03:11:47] <doomlord>  would there be any sense in adding a 'compile to C' feature to the rust compiler, or is that 'cheating'
[03:11:48] <geomyidae__> strcat: hm, okay. actually, I'm dumb, I can just use a binary release to verify this anyway.
[03:12:11] <strcat> doomlord: why?
[03:12:12] <doomlord> oh you couldn't do all the stack safety i guess for a start
[03:12:34] <doomlord> at the minute can't get it on iOS because the ABI generated for ARM is wrong
[03:12:35] <strcat> I think you can compile C with segmented stacks, but why? :P
[03:13:09] <doomlord> catch all for getting rust onto other platforms. i dont think rust needs to compete with C... C can be symbiotic with high level languages IMO
[03:13:17] <geomyidae__> actually, ergh, does anyone have a x86_64 rustc 0.5 laying around :D
[03:13:30] <cuemin_> hmm, I'm not quite understanding this error. pixel_buffer is a mutable vector, but it says that its finding an immutable one: https://gist.github.com/dymk/5449307
[03:13:42] * geomyidae__ grumbles and remembers he has a server he can shell into
[03:13:43] <cuemin_> do unsafe blocks create a new scope? 'cause then I guess it'd be move semantice
[03:13:47] <cuemin_> *semantics
[03:13:49] *** cuemin_ is now known as cuemin
[03:13:53] <strcat> doomlord: you'd have to use some hack like setjmp/longjmp for unwinding and the result would perform much worse than going through LLVM IR
[03:13:58] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[03:14:37] <strcat> cuemin: yes they're just a block like an empty {}
[03:15:07] <strcat> that's not what the error is from though
[03:15:18] <cuemin> oh
[03:15:21] <strcat> set_len needs an &mut pointer to the ~[] or @[] so it can change the length
[03:15:47] <strcat> a slice doesn't offer a way to change the length - it's just a non-owning view (mutable or immutable)
[03:15:54] <strcat> of elements
[03:16:17] <cuemin> oh, can I force it to be a mutable slice passed instead of a borrowed pointer?
[03:16:29] <strcat> cuemin: you need to pass &mut ~[]
[03:16:34] <strcat> so it can change the length of the ~[]
[03:17:20] <cuemin> I'll flail at the keyboard a bit more then and see if I can get it working
[03:17:20] *** Joins: idkfa (idkfa@moz-141F54A4.krasinfo.ru)
[03:17:24] <strcat> a slice is a uniform view of any subset of any kind of vector
[03:17:42] <strcat> it offers no way to add elements or deal with the length/capacity of a dynamic vector
[03:17:55] <strcat> cuemin: need &mut pixel_buffer
[03:18:24] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (Quit: klapaucius)
[03:18:27] <cuemin> for some reason I was under the impression that that was depricated syntax? huh, TIL
[03:18:34] <cuemin> thanks :P wouldn't have figured to use that
[03:18:47] <strcat> &mut and & are needed to borrow a pointer to it
[03:18:58] <strcat> otherwise you're just getting an implicit conversion from ~ -> & or ~[] -> &[]
[03:19:51] <strcat> ~[] is a dynamic vector, &[] is a view of *any* part of a vector
[03:19:58] <cuemin> ahh
[03:20:10] <strcat> so you need &mut ~[] to do something like letting a length or pushing an element
[03:20:11] <cuemin> so like D slices?
[03:20:21] <strcat> cuemin: maybe, dunno ;p
[03:20:32] <cuemin> heh, sounds kinda like them, so I'll use that mental model
[03:20:35] <strcat> cuemin: &[] is a ptr to somewhere in a vector and a length under the hood
[03:21:00] <strcat> can be a stack-allocated one, a static one, or a dynamic array
[03:21:15] <cuemin> okay; is there a syntax for getting a section of a vector like that with a given length and offset?
[03:21:27] <strcat> .slice(start, end)
[03:21:36] <strcat> gives you a &[]
[03:21:40] <cuemin> that makes sense
[03:21:43] <strcat> and it operates on &[]
[03:21:59] <strcat> can implicitly borrow [], @[] and ~[] as a &[] slice
[03:22:41] <cuemin> ahh the code works, awesome
[03:22:50] <cuemin> wow, I'm surprised that it worked on the first try too
[03:24:01] *** Quits: catpig (catpig@moz-870B453D.dip0.t-ipconnect.de) (Quit: Verlassend)
[03:25:29] <cuemin> strcat, can .slice borrow what its operating on implicitly because the method takes a &self, which is borrowed?
[03:26:02] <cuemin> i assume the sig of .slice is like (&self, start: int, end: int)
[03:26:16] <cuemin> and then -> &[] ofc
[03:26:21] <strcat> cuemin: it's implemented on &[T]
[03:26:43] <strcat> and ~[T] and @[T] coerce to &[T]
[03:26:50] *** Quits: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com) (Client exited)
[03:26:54] <strcat> doesn't really have to do with the self param
[03:27:08] <cuemin> oh
[03:27:42] <cuemin> so ~mut [T] and @mut [T] coerce to &mut [T] then too?
[03:27:54] <strcat> there's no such thing as ~mut
[03:28:19] <strcat> ~T is owned so it acts just like T in regards to mutability (inherits it)
[03:28:32] <strcat> cuemin: but yes @mut coerces to it too
[03:28:36] <cuemin> okay
[03:28:49] <strcat> rusti: let xs = ~[1, 2, 3]; let ys: &[int] = xs; ys
[03:28:52] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/LHSY
[03:29:07] <strcat> rusti: let xs = ~[1, 2, 3]; let ys: &[int] = xs; ys.to_str()
[03:29:08] <rusti> ~"[1, 2, 3]"
[03:29:54] <cuemin> I think that makes sense
[03:32:58] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:38:27] *** Quits: btipling (btipling@moz-5413CFA4.hsd1.ca.comcast.net) (Quit: Computer has gone to sleep.)
[03:38:49] <SiegeLord> Wait, what... what does "to_str" stand for?
[03:39:08] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:39:08] *** ChanServ sets mode: +o brson
[03:39:09] <SiegeLord> Oh, nvm... missed the quotes right there
[03:40:23] <SiegeLord> rusti: let x : ~[int] = [1, 2].to_str();
[03:40:24] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/eSBU
[03:41:02] *** Joins: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com)
[03:43:27] *** Quits: Jesin (Jessin_@moz-91D06E13.cc.lehigh.edu) (Ping timeout)
[03:43:48] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[03:44:13] <aatch> 8 errors to go!
[03:44:26] <geomyidae__> until it hits the next bump and you get the next set of errors
[03:44:37] <aatch> geomyidae__, shh
[03:44:46] <aatch> This is down from ~250 errors
[03:45:00] *** Joins: Guest_ (textual@moz-EBE9F394.bchsia.telus.net)
[03:48:55] *** Joins: igl (igl@moz-21C7E0DA.adsl.alicedsl.de)
[03:49:09] <bjz> SiegeLord: to_str() converts to a string
[03:49:13] *** Quits: igl1 (igl@moz-CEFE17B0.adsl.alicedsl.de) (Ping timeout)
[03:49:25] <bjz> rusti: [1, 2].to_str()
[03:49:26] <rusti> ~"[1, 2]"
[03:49:41] <bjz> rusti: print([1, 2].to_str());
[03:49:42] <rusti> [1, 2]
[03:49:51] <SiegeLord> For some reason I thought it copied a stack allocated array to an owned array
[03:50:00] <bjz> O.o
[03:50:27] <SiegeLord> As I said, didn't see the quotes :P
[03:50:36] <bjz> :P
[03:52:54] <Thad> brson: got my platform.mk edits in place for x86_64-w64-mingw32 ... building against Cygwin... but doesn't seem to like clang and complains that no C++ compiler is around.... yet when enabled for GCC, it sings right through the configure.  Something else I'm missing to build with Clang ?
[03:52:57] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: computer sleeping)
[03:53:25] <Luqman> Sec^: is it not in the PATH?
[03:53:25] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:53:45] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:54:06] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:54:46] <Thad> checking...
[03:55:03] <aatch> Sigh. I really wish we had the new numeric stack right now
[03:55:53] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:55:55] <Thad> Luqman: doesn't show with echo $PATH , yet configure does find clang...just not C++ compiler, weird
[03:57:06] <Luqman> Thad: does clang++.exe work?
[03:57:24] <Thad> Luqman: shows Perl, Curl, Python, Git, Clang, GCC, LD .... all under /usr/bin 
[03:57:36] <geomyidae__> lol, I must just flatly be using quote_tokens correctly, I can't even work it under rust .5
[03:57:38] <Thad> and Rust configure also sees them there as well
[03:58:03] <aatch> Thad, can you do clang++ ?
[03:58:29] <Thad> yes... and it reports -  clang: error: no input files
[03:58:41] <Thad> after doing clang++ on the Cygwin prompt
[03:58:43] <aatch> Well thats me done
[03:58:50] <Thad> lol
[03:59:01] *** Joins: Arelius (bzlandfill@F1AF18CB.59E86C3C.2321E71E.IP)
[03:59:18] <aatch> I figured it might be that cygwin doesn't do clang++, since technically you can just do clang -xc++
[03:59:20] <Arelius> Can I get somebody to double check this for me: https://gist.github.com/Arelius/5449498
[03:59:22] <aatch> I think
[03:59:50] <Thad> configure: error: Selected compiler could not find or parse C++ standard library headers.  Rerun with CC=c-compiler CXX=c++-compiler ./configure ...
[03:59:51] <Thad> configure: error: LLVM
[04:00:23] <aatch> Arelius, you need to add a use in there
[04:00:43] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[04:00:46] <aatch> in fact, you probably shouldn't have the mod in there at all.
[04:00:54] <brson> Thad: is the LLVM configuration that is failing?
[04:01:16] <aatch> Generally you have some top-level module that defines the module layout
[04:01:17] <Thad> you tell me... seems like ti was clang... the line before that says....
[04:01:30] <Thad> checking whether clang works.... no
[04:02:48] <Thad> brson: Here's the last 200 lines  http://pastebin.mozilla.org/2342224
[04:02:51] <brson> thanks
[04:02:58] <Arelius> aatch I do?
[04:03:16] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[04:03:50] <geomyidae__> Anyone around know how to use quote_tokens!() appropriately? I'm trying to find an ex usage...
[04:03:54] <Thad> brson: we're so close to giving Windows users a pleasant experience with Rust... so close.
[04:04:12] <Arelius> I cannot for the life of me figure out how to make use work peoperlly.
[04:04:15] <aatch> Arelius, actually, I'm not sure
[04:04:19] <bjz> Thad: really?
[04:04:28] <aatch> path resolution is a mystery to me
[04:04:47] <Thad> bjz: yes, been working towards that
[04:05:13] <brson> Thad: what is going to be the difference for windows users once your work lands?
[04:05:18] <bjz> Thad: that would be amazing. (not for me, but for working with my windowsian friends)
[04:05:58] <Thad> Cygwin install defaults with Clang / LLVM and Rust configure / make ... JUST WORKS.
[04:06:17] <aatch> Person with authority: should I open an issue about changing the push() method to append()? Or just make the change and submit a pull req?
[04:07:37] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:08:12] <Arelius> ok, a `use gldevice::*;` at the beginning seems to resolve the issue, why do I have to do a use to get the trait impl?
[04:08:38] <brson> Thad: so mingw is not required at all?
[04:09:04] <Thad> brson: nope... well... that's the goal I'm aiming for
[04:09:43] *** Joins: cdidd (cdidd@moz-879A3ED0.broadband.corbina.ru)
[04:09:47] <brson> that's great. cygwin would be a much better experience
[04:10:11] <Thad> it's about 6 checkmarks to click in Cygwin's setup
[04:10:39] <SiegeLord> Why is Cygwin preferred to MinGW?
[04:10:39] <Thad> later... Rust could actually BE one of those checkmarks !
[04:11:03] <Thad> Cygwin is POSIX compliant
[04:12:21] <Thad> anyways...  I can build the i686 version... but when switching over to x86_64 and using Clang.... I get that pastebin output
[04:13:33] <SiegeLord> I don't think all libraries build on Cygwin seamlessly... but as long as the non-Cygwin option remains I'm happy
[04:14:13] <brson> Thad: that error is coming from llvm's configure script here https://github.com/brson/llvm/blob/master/configure#L3480
[04:14:20] <Thad> looking
[04:14:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[04:14:50] <Arelius> I seem to be getting this sort of error a TON: :16 error: failed to resolve import: gldevice::*
[04:14:58] <Arelius> trying to use 'use'
[04:14:59] <Thad> interesting... there's a bit of code reuse in the platform.mk file as well for that part...hmmm
[04:15:20] <aatch> Arelius, what's your build command look like?
[04:15:56] <Arelius> "/Users/indy/dev/guava/dep/bin/rustc -L /Users/indy/dev/guava/dep/SDL/lib -L /Users/indy/dev/guava/dep/rust-opengles src/main.rs -o guava"
[04:16:10] <Thad> brson: OK, thanks... gotta get to bed, I'll look into it more tomorrow night.
[04:16:13] <brson> Thad: perhaps you don't have the std headers for x86_64?
[04:16:33] <Arelius> and render is in src/render/render.rs and gldevice is in src/render/gldevice.rs
[04:16:33] <Thad> brson: yeah, but i've verified I do....well, one verification at least...
[04:17:08] <Thad> brson: also, do you think it matters about having link flags for -lwin64  ???
[04:17:42] <brson> Thad: I'm not sure. Where is -lwin64 used and for what?
[04:17:56] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[04:18:06] *** Quits: bnicholson_ (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[04:18:15] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[04:18:25] <Thad> saw a couple used for Linux cross compiling to Windows.... perhaps libuv needs it ?  dunno... just getting my feet wet this week with that part
[04:18:53] <Thad> (and still learning Make on-the-fly ... lol)
[04:19:49] *** Quits: Guest_ (textual@moz-EBE9F394.bchsia.telus.net) (Quit: Computer has gone to sleep.)
[04:20:09] <Thad> brson: nite !  will work on it more tomorrow
[04:20:42] <brson> Thad: ok! this sounds awesome. good night
[04:22:59] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[04:23:20] <brson> Thad: can I look at your branch?
[04:23:55] <Thad> brson: not yet pushed this week.  we can do that tomorrow however. sure.
[04:24:47] <Thad> brson: nite, gotta go, wife crying, lol.
[04:24:56] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130408165307])
[04:25:22] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:26:52] * geomyidae__ comes back to see people proposing looking at each others' branches. giggity.
[04:28:03] <Arelius> =P
[04:28:15] <Arelius> Is there any good documentation to how 'use' works?
[04:29:39] <cuemin> Lets say that I've got a method "fn foo<T: SomeTrait>() -> T", where SomeTrait defines a static method 'fn new() -> Self'. But, I can't call the static method 'new()' that T has within that method. What's the way around this?
[04:30:03] <cuemin> Arelius: the tutorial's "module" section kinda goes over it, but I'd recommend the manual
[04:30:14] <Arelius> Found it.
[04:31:23] <Arelius> Hmm
[04:31:27] <cuemin> but yeah, it seems like you should be able to call static methods that traits define on a type parameter
[04:31:33] <Arelius> So why does use declerations need to be at the beginning?
[04:32:05] <cuemin> Haha, I asked the exact same question a day or two ago; it has to do with the way the compiler resolves names
[04:32:13] <Arelius> interesting
[04:32:20] <cuemin> IIRC pcwalton can explain it
[04:32:28] <Arelius> Can I still put that atop of local modules
[04:32:42] <cuemin> as long as "use" comes before "mod", it seems to work
[04:32:47] <Arelius> Weird
[04:33:05] <cuemin> That was my initial reaction too :P
[04:34:13] <cuemin> But yeah, anyone know how to call a static method on a type parameter that a trait defines?
[04:34:34] <Arelius> you can't just cal trait::fn()
[04:34:35] <Arelius> ?
[04:34:45] <Arelius> call*
[04:35:06] <cuemin> Error: use of undeclared module 'T'
[04:35:18] <Arelius> also, is there any reason that `mod gldevice` would work but `use gldevice` would now?
[04:35:18] <cuemin> Let me see if I can condense it down into a smaller example
[04:35:21] <Arelius> Hmm
[04:36:03] <cuemin> you can 'use gldevice' without loading the module?
[04:37:03] <bjz> brson: woo https://github.com/mozilla/rust/pull/6041
[04:38:23] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[04:39:49] <cuemin> this is what I'm trying to achieve: https://gist.github.com/dymk/5449654
[04:40:30] <Arelius> I'm trying to load the module
[04:40:34] <Arelius> but I need to put the use first
[04:40:40] <Arelius> so ?
[04:41:00] <cuemin> Arelius, yeah, "use gldevice; mod gldevice" should do it?
[04:41:20] <cuemin> It's backwards, but it works
[04:41:51] <cuemin> at least, in theory it should work
[04:44:43] <cmr> Having to destructure Option<T> everywhere is getting to be tedius and ugly, especially when I know that None will never be returned.
[04:44:53] <cmr> Is there a way to avoid this or do I suck it up?
[04:46:14] <Luqman> cmr: my_option.unwrap()
[04:46:15] <SiegeLord> Option has an unwrap and expect methods
[04:46:35] <brson> bjz: rust's numeric traits are really nice. awesome work
[04:46:42] <cmr> Oh guh
[04:46:55] <bjz> brson: getting there
[04:47:02] <bjz> brson: one step at a time
[04:47:05] <cmr> I was looking at the list at  http://static.rust-lang.org/doc/core/option.html and didn't realize a ton of stuff was hidden under "Implementation for ..."
[04:48:39] <cmr> Are these docs made with rustdoc? I feel like the TOC should be more thorough.
[04:48:55] *** Joins: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP)
[04:49:33] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[04:49:43] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:50:32] <brson> cmr: it's rustdoc. it could be a lot better
[04:51:40] <Arelius> cuemin it doesn't seem to work when doing it from a file in render/render.rs
[04:51:48] <Arelius> but works if that's the file I call rustc on
[04:52:49] <cuemin> Arelius: You might need to set the path to the gldevice module with the annotation(?) #[path="/path/to/gldevice.rs"]
[04:52:58] <Arelius> Also, very weird that your test doesn't work.
[04:53:06] <Arelius> above the use?
[04:53:28] <cuemin> Above the mod: "#[path="../asdf.rs"] mod adsf;"
[04:54:21] <cuemin> https://github.com/mozilla/rust/blob/master/doc/rust.md#modules has code examples a bit down the page
[04:54:47] <Arelius> Just tried it
[04:54:52] <Arelius> problem is that the mod finds it
[04:54:54] <Arelius> the use does not.
[04:55:14] <Arelius> I think might be a bug, I'll put together a minimal repro
[04:55:21] <cuemin> sure
[04:55:35] <cuemin> no promises I'll be able to help; I'm pretty new to the language
[04:57:25] <cuemin> I'm psyched about the prospect of rustpkg being a thing; is that activly under development?
[04:57:59] <cuemin> RubyGems is what made Ruby so managable for me, so a good package manager seems pretty important for a language IMO
[05:01:53] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:05:07] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:07:38] <cuemin> So, anyone have any ideas about how to call a static method on a type parameter?
[05:08:17] <aatch> cuemin, you cant. as far as i know
[05:08:42] *** Joins: dbaupp (Thunderbir@99439820.D5A1DCF.37681C44.IP)
[05:09:14] <cuemin> do you think rust-dev would mind if I made the suggestion to be able to do so?
[05:09:47] <aatch> cuemin, ask about it, there might be a reason.
[05:10:14] <cuemin> okay, but it didn't seem like anyone knew in IRC
[05:12:41] <SiegeLord> Isn't this that associated type thing?
[05:14:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:14:09] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/dxqsnA
[05:14:09] <ghrust> 13rust/06auto 14aef2490 15Brendan Zabarauskas: Implement Signed and Unsigned traits and remove related predicate functions
[05:14:09] <ghrust> 13rust/06auto 14f39152e 15Brendan Zabarauskas: Implement Natural trait...
[05:14:10] <ghrust> 13rust/06auto 14ab8068c 15Brendan Zabarauskas: Improve divide-by-zero error messages
[05:14:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:17:04] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[05:17:53] <Jeaye> cuemin: There's a cheat for it.
[05:18:14] <Jeaye> rusti: i32::to_str(42)
[05:18:15] <rusti> ~"42"
[05:18:27] <Jeaye> rusti: type I = i32; I::to_str(42)
[05:18:29] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ZUBH
[05:18:35] <Jeaye> rusti: use I = i32; I::to_str(42)
[05:18:36] <rusti> foo.rs:5:13: 5:21 error: failed to resolve import: i32
[05:18:36] <rusti> foo.rs:5          use I = i32; I::to_str(42)
[05:18:36] <rusti>                       ^~~~~~~~
[05:18:36] <rusti> error: failed to resolve imports
[05:18:36] <rusti> error: aborting due to 2 previous errors
[05:18:45] <Jeaye> rusti: use I = core::i32; I::to_str(42)
[05:18:47] <rusti> ~"42"
[05:19:09] <Jeaye> rusti: use I = core::i32; let i: I = 42; i
[05:19:11] <rusti> foo.rs:5:35: 5:36 error: found type name used as a variable
[05:19:11] <rusti> foo.rs:5          use I = core::i32; let i: I = 42; i
[05:19:11] <rusti>                                             ^
[05:19:11] <rusti> note: in expansion of fmt!
[05:19:11] <rusti> foo.rs:4:12: 6:7 note: expansion site
[05:19:28] <Jeaye> That doesn't work though. :(
[05:19:30] <cuemin> can I "use I = T", where T is a type parameter inside a function/enum/impl body?
[05:27:44] *** Quits: benh (v@moz-3CC13BD7.pools.arcor-ip.net) (Ping timeout)
[05:28:08] <cuemin> have a good evening, peace
[05:28:12] *** Quits: cuemin (Quemin@30C25EB7.8F293D07.59A90BC7.IP) (Quit: Leaving)
[05:31:54] *** Joins: benh (v@moz-321853A6.pools.arcor-ip.net)
[05:33:24] *** kimundi is now known as zz_kimundi
[05:35:08] *** Quits: benh (v@moz-321853A6.pools.arcor-ip.net) (Ping timeout)
[05:38:36] *** Joins: benh (v@moz-321853A6.pools.arcor-ip.net)
[05:39:09] *** Joins: thou (thou@moz-D1EE62D4.sumnetsol.com)
[05:39:21] *** Quits: thou (thou@moz-D1EE62D4.sumnetsol.com) (Input/output error)
[05:40:29] *** Quits: benh (v@moz-321853A6.pools.arcor-ip.net) (Ping timeout)
[05:41:04] *** Joins: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP)
[05:41:41] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[05:41:41] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[05:43:16] *** Joins: benh (v@moz-321853A6.pools.arcor-ip.net)
[05:43:41] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[05:46:18] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[05:47:03] *** Quits: Bernkastel (suckmy@7F352483.A9B419CB.1C8C8CE9.IP) (Quit: Brain.sys has encountered a problem and needs to close. We are sorry for the inconvenience.)
[05:49:29] <cmr> So... https://gist.github.com/cmr/c61512338c1a18c85932
[05:49:40] <cmr> This seems to be a pretty useless error, as it is giving me the same optino twice?
[05:49:49] <cmr> I assume there is a type difference somewhere, but I can't see it.
[05:50:16] *** Quits: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP) (Ping timeout)
[05:54:15] <cmr> (and then I found position_elem...)
[05:57:42] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[05:57:55] *** Quits: dbaupp (Thunderbir@99439820.D5A1DCF.37681C44.IP) (Ping timeout)
[05:59:05] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[05:59:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:59:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/dxqsnA
[05:59:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:00:02] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[06:02:11] <bjz> brson: cheers!
[06:02:38] <bjz> mitsuhiko: we hath modulo ^
[06:03:10] <bjz> (hopefully it is implemented right :P)
[06:13:17] *** Quits: Arelius (bzlandfill@F1AF18CB.59E86C3C.2321E71E.IP) (Quit: CGI:IRC (Ping timeout))
[06:15:22] *** Quits: int3_ (int3_@moz-2242076.subnet-248.amherst.edu) (Client exited)
[06:17:05] *** Joins: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP)
[06:19:20] *** zz_kimundi is now known as kimundi
[06:26:29] *** Joins: SimonSapin1 (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[06:29:22] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:36:07] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[06:36:54] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Ping timeout)
[06:37:33] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[06:37:42] *** Joins: int3_ (int3_@moz-2242076.subnet-248.amherst.edu)
[06:43:07] *** Joins: fabiand (fabiand@moz-8A070952.adsl.alicedsl.de)
[06:44:05] *** Quits: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se) (Ping timeout)
[06:45:47] *** Quits: blitter (blitter@moz-48397EA8.dyn.centurytel.net) (Ping timeout)
[06:48:31] <kimundi> urg, why did my mail program send my message to the mailing list in each state of complettnes ,_,
[06:50:39] <kimundi> It seems I have ctrl-s out of reflex a few times...
[06:51:32] <aatch> kimundi, don't worry, I <Esc>:w out of reflex
[06:51:46] <aatch> spot the vim user
[06:55:12] *** Quits: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP) (Ping timeout)
[06:58:58] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[07:01:38] <kimundi> :-) 
[07:05:22] *** Joins: trapni (trapni@moz-E801FB69.web.vodafone.de)
[07:11:09] *** Joins: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP)
[07:11:35] *** Quits: trapni (trapni@moz-E801FB69.web.vodafone.de) (Ping timeout)
[07:12:26] *** Joins: trapni (trapni@moz-B2EB8E7C.web.vodafone.de)
[07:15:57] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[07:26:29] *** Joins: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP)
[07:27:39] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[07:28:23] *** kimundi is now known as zz_kimundi
[07:29:12] *** zz_kimundi is now known as kimundi
[07:31:03] <Sodel_the_V> Hi all. Suggestion: since the names of an enum's "branches" effectively defines a type with that name (unless I've accidentally avoided situations where that is not so), why not let enum branches be used as types in e.g. function type signatures?
[07:32:07] <Sodel_the_V> e.g.: enum Foo { Bar, Baz(uint) }; fn quux(my_baz: Baz) ......
[07:34:59] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:36:49] *** Quits: trapni (trapni@moz-B2EB8E7C.web.vodafone.de) (Connection reset by peer)
[07:37:20] <SiegeLord> Sodel_the_V, I know that function arguments must be irrefutable patterns, so this can't possibly satisfy that
[07:37:29] <SiegeLord> I don't know why they are/must be irrefutable though
[07:37:53] <Sodel_the_V> My ignorance is showing. What do you mean by "irrefutable"?
[07:39:27] <mitsuhiko> Sodel_the_V: they are not types :)
[07:39:46] <Sodel_the_V> They are type *cnstructors*
[07:39:48] <mitsuhiko> the enum is a type
[07:39:53] <Sodel_the_V> Yes, I'd forgotten
[07:40:17] <SiegeLord> I'm too much of a noob to give a correct definition of the term :P
[07:41:04] <SiegeLord> I think that does imply that what you wrote does work... iff that enum has only one constructor
[07:41:09] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[07:42:46] <Sodel_the_V> Ahh, that's congruent with other things I've read
[07:43:07] <Sodel_the_V> (Hahaha, I must be tired. That's the only time I use words like "congruent")
[07:44:34] *** Quits: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) (Ping timeout)
[07:45:32] *** Joins: Palmik (palmik@moz-C4A67A2D.pks.muni.cz)
[07:46:29] *** Joins: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP)
[07:46:43] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Ping timeout)
[07:46:59] <Sodel_the_V> Well, my thanks to both SiegeLord and mitsuhiko.
[07:47:11] <Sodel_the_V> I'm off to bed. G'night, all.
[07:47:29] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Devoured by bed sheets)
[07:48:51] <SiegeLord> I guess it doesn't really look like he wanted it to, though
[07:49:01] <SiegeLord> Still need to mention the enum type name
[07:49:42] *** Quits: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP) (Quit: Leaving.)
[07:51:26] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[07:57:44] *** Quits: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP) (Ping timeout)
[07:58:52] *** Joins: Blub\w (wry@moz-65C57DA4.wireless.dyn.drei.com)
[07:59:56] *** Quits: skchrko (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[08:01:10] *** kimundi is now known as zz_kimundi
[08:04:16] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[08:05:19] *** Joins: victorporof (victorporo@42D43E99.BEB908B0.79933D60.IP)
[08:06:39] *** Joins: trapni (trapni@moz-7C7C1909.dawanda.com)
[08:06:46] *** Joins: berak (chatzilla@FA044341.66531EF5.16E13E53.IP)
[08:07:20] *** Joins: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se)
[08:07:41] *** zz_kimundi is now known as kimundi
[08:12:25] *** Joins: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP)
[08:13:56] *** Joins: gits1225 (gits1225@86F9515E.43CEF437.C6104E0F.IP)
[08:16:04] *** Joins: dbaupp (Thunderbir@moz-FDDBF867.lns20.syd6.internode.on.net)
[08:16:15] *** Joins: RagingDave (RagingDave@moz-2754F937.pools.arcor-ip.net)
[08:17:03] *** Quits: dew (Instantbir@moz-EBC2DF0B.dhcp.stls.mo.charter.com) (Quit: Instantbird 1.3 -- http://www.instantbird.com)
[08:18:53] *** Quits: gits1225 (gits1225@86F9515E.43CEF437.C6104E0F.IP) (Quit: /quit)
[08:21:03] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[08:23:45] *** Joins: pnkfelix` (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:23:50] *** Joins: jdm (jdm@941349F4.F58C7D4D.F945DA.IP)
[08:24:15] *** pnkfelix` is now known as pnkfelix|rcirc
[08:28:23] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:33:25] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: bye!)
[08:40:02] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[08:41:46] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[08:41:50] *** Quits: echristo (echristo@moz-95318683.virtual1.co.uk) (Quit: echristo)
[08:48:53] *** Joins: libertas (libertas@moz-9ACC1A3B.rev.vodafone.pt)
[08:49:42] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[08:52:13] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[08:54:56] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:55:37] *** Quits: benh (v@moz-321853A6.pools.arcor-ip.net) (Ping timeout)
[08:59:06] *** Parts: berak (chatzilla@FA044341.66531EF5.16E13E53.IP) ()
[09:04:20] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[09:07:39] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:12:37] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:12:48] *** Joins: pyrac (pyrac@moz-B72E3FAF.w109-222.abo.wanadoo.fr)
[09:12:57] *** Quits: SimonSapin1 (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[09:13:46] *** Joins: echristo (echristo@D0D26911.648B0C34.5EFB9497.IP)
[09:16:29] *** Joins: dew (Instantbir@moz-EBC2DF0B.dhcp.stls.mo.charter.com)
[09:22:31] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[09:27:59] *** Quits: Blub\w (wry@moz-65C57DA4.wireless.dyn.drei.com) (Quit: bb)
[09:30:10] * aatch found an awesome case for associated items.
[09:30:24] <alexrp> ?
[09:30:56] *** Joins: terra (Adium@moz-D293EB03.pool.mediaways.net)
[09:31:07] <aatch> I get given a pointer to a struct in C, this struct is actually just the beginning of some arbitrary struct.
[09:31:19] <aatch> There first element says what type it is.
[09:31:34] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:31:53] <aatch> Associated items could allow me to attach that value to the real type, allowing safe conversion.
[09:32:11] *** Joins: hmax (hmax@moz-15514FA1.yandex.net)
[09:32:11] <aatch> Rather than the unsafe conversion I have at the moment...
[09:33:04] *** Joins: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP)
[09:33:47] *** Joins: darenthis (darenthis@DAC8255A.1ED06B32.9BA20BC9.IP)
[09:35:18] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:35:18] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Connection reset by peer)
[09:35:43] <kimundi> aatch: So instead of n wrapper for n native ptr types, there just needs to be one?
[09:35:44] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[09:35:52] *** Quits: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP) (Ping timeout)
[09:35:59] <aatch> kimundi, that too.
[09:36:09] <kimundi> Sounds useful
[09:36:41] <aatch> kimundi, yup.
[09:37:09] <aatch> In xcb, you get a generic event, which is effectively the header of an event
[09:37:22] <aatch> kinda like an extensible tagged union
[09:37:33] *** Joins: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP)
[09:39:21] *** Quits: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP) (Ping timeout)
[09:50:11] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[09:52:29] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[09:55:04] <kimundi> rusti: stringify!(cond)
[09:55:06] <rusti> "cond"
[09:55:30] <kimundi> rusti: fn foo(v: ~str) {}; foo(stringify!(cond))
[09:55:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/fBYi
[09:55:57] <aatch> rusti: fn foo(v: ~str) {}; foo(~stringify!(cond))
[09:55:59] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/cjWF
[09:56:15] <kimundi> rusti: fn foo(v: ~str) {}; foo(stringify!(cond).to_str())
[09:56:16] <rusti> foo.rs:5:16: 5:18 warning: unused variable: `v`
[09:56:16] <rusti> foo.rs:5          fn foo(v: ~str) {}; foo(stringify!(cond).to_str())
[09:56:16] <rusti>                          ^~
[09:56:16] <rusti> note: in expansion of fmt!
[09:56:16] <rusti> foo.rs:4:12: 6:7 note: expansion site
[09:56:37] <kimundi> rusti: fn foo(v: ~str) -> ~str {v}; foo(stringify!(cond).to_str())
[09:56:38] <rusti> ~"cond"
[09:56:45] <kimundi> rusti: fn foo(v: ~str) -> ~str {v}; foo(stringify!(cond))
[09:56:47] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/NNeR
[09:57:08] <aatch> rusti: fn foo(v: &str) -> ~str {v.to_str()}; foo(stringify!(cond))
[09:57:09] <rusti> ~"cond"
[09:57:34] *** Quits: idkfa (idkfa@moz-141F54A4.krasinfo.ru) (Quit: Cracked by Bill Gilbert)
[10:04:50] *** Joins: spider-mario (spidermari@moz-EE4B8A09.rev.sfr.net)
[10:09:21] *** Quits: dbaupp (Thunderbir@moz-FDDBF867.lns20.syd6.internode.on.net) (Ping timeout)
[10:12:57] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[10:13:05] *** Joins: dbaupp (Thunderbir@moz-75C18FC0.lns20.syd6.internode.on.net)
[10:19:11] *** kimundi is now known as zz_kimundi
[10:19:20] *** Quits: darenthis (darenthis@DAC8255A.1ED06B32.9BA20BC9.IP) (Ping timeout)
[10:19:42] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[10:19:57] *** jdm is now known as jdm|f00d
[10:22:43] *** Quits: terra (Adium@moz-D293EB03.pool.mediaways.net) (Quit: Leaving.)
[10:30:24] *** Joins: benh (i@moz-321853A6.pools.arcor-ip.net)
[10:30:26] *** zz_kimundi is now known as kimundi
[10:30:38] *** Joins: terra (Adium@moz-D293EB03.pool.mediaways.net)
[10:31:35] *** Joins: MrFahrenheit (RageOfThou@moz-CF7139ED.dynamic.telemach.ba)
[10:38:12] *** Quits: dbaupp (Thunderbir@moz-75C18FC0.lns20.syd6.internode.on.net) (Ping timeout)
[10:41:54] *** Joins: dbaupp (Thunderbir@moz-6C181B69.lns20.syd7.internode.on.net)
[10:44:04] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[10:46:24] *** Joins: z0w0 (zack@moz-48AFB40F.lnse4.woo.bigpond.net.au)
[10:49:05] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[10:49:25] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[10:52:57] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[10:54:01] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[11:00:30] *** jdm|f00d is now known as jdm
[11:01:00] *** kimundi is now known as zz_kimundi
[11:06:00] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[11:07:52] *** Quits: dbaupp (Thunderbir@moz-6C181B69.lns20.syd7.internode.on.net) (Ping timeout)
[11:08:39] *** Joins: dbaupp (Thunderbir@moz-C8D1F99C.lns20.syd6.internode.on.net)
[11:11:46] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[11:12:05] *** Quits: terra (Adium@moz-D293EB03.pool.mediaways.net) (Quit: Leaving.)
[11:12:57] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[11:16:17] *** Joins: jfredett (jfredett@moz-EDD670C9.mycingular.net)
[11:17:14] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[11:20:57] *** Quits: benh (i@moz-321853A6.pools.arcor-ip.net) (Ping timeout)
[11:22:02] <kemurphy> is there any way to capture ctrl-c?
[11:25:59] *** Quits: heftig (heftig@moz-3032880D.dip0.t-ipconnect.de) (Ping timeout)
[11:27:21] *** Joins: btipling (btipling@moz-5413CFA4.hsd1.ca.comcast.net)
[11:37:52] *** Joins: mindginative (mindginati@moz-D3DCB8C6.dyn.cust.vf.net.nz)
[11:38:26] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[11:40:10] *** Quits: jfredett (jfredett@moz-EDD670C9.mycingular.net) (Ping timeout)
[11:41:28] *** Joins: heftig (heftig@moz-528CB651.dip0.t-ipconnect.de)
[11:42:47] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[11:43:21] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[11:45:07] *** Joins: idkfa (idkfa@148C5CA6.FAAA17AC.2E171177.IP)
[11:46:04] *** Quits: sp3d (one@moz-17CB39F1.fidnet.com) (Ping timeout)
[11:49:43] *** Joins: sp3d (a@moz-17CB39F1.fidnet.com)
[11:55:18] *** Joins: jfredett (jfredett@moz-EDD670C9.mycingular.net)
[11:58:02] *** Quits: jfredett (jfredett@moz-EDD670C9.mycingular.net) (Ping timeout)
[11:59:19] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[12:00:06] <Seldaek> kemurphy: I guess that sends a signal to the process, but I haven't checked that stuff in depth yet
[12:00:33] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Quit: ZNC - http://znc.in)
[12:00:59] <kemurphy> i didn't find anything related to signal handling in the expected spots (core::os, core::sys) :/
[12:03:51] *** zz_kimundi is now known as kimundi
[12:06:22] <dbaupp> kemurphy: I think that signal handling is unimplemented so far
[12:09:02] *** Quits: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP) (Ping timeout)
[12:11:24] <kemurphy> figured as much, oh well then
[12:12:17] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (Quit: klapaucius)
[12:19:30] *** Joins: igl1 (igl@moz-5FA8D883.adsl.alicedsl.de)
[12:20:05] *** Quits: igl (igl@moz-21C7E0DA.adsl.alicedsl.de) (Ping timeout)
[12:28:31] *** Quits: echristo (echristo@D0D26911.648B0C34.5EFB9497.IP) (Connection reset by peer)
[12:28:38] *** Joins: echristo (echristo@D0D26911.648B0C34.5EFB9497.IP)
[12:29:15] *** Joins: mibitzi (mibitzi@87CAE982.60DF3A09.8395810B.IP)
[12:29:57] <aatch> Woo, I have the worlds most useless window manager!
[12:30:08] <aatch> Written in rust
[12:31:08] <Seldaek> yay
[12:32:14] <aatch> I mean, all it does is catch CreateNotify events and position the window at 100x100 instead of 0x0
[12:33:24] * aatch kept forgetting to flush after requests
[12:35:34] <kimundi> Someone online that knows about the details of how sys::begin_unwind_ and rustrt::rust_upcall_fail work in regard to the memory they use to show the message? Specifically, how the owned strings the get passed in get cleaned up
[12:40:17] *** Quits: mindginative (mindginati@moz-D3DCB8C6.dyn.cust.vf.net.nz) (Quit: zzZZZ)
[12:44:10] *** Joins: hmax_ (hmax@moz-53A94453.yandex.net)
[12:44:14] *** Quits: hmax (hmax@moz-15514FA1.yandex.net) (Ping timeout)
[12:44:20] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[12:48:43] <kimundi> I'm assuming that 'rust_upcall_fail' causes the unwinding, which unwinds 'begin_unwind_', then unwinds 'begin_unwind's inner closure in the call to 'str::as_buf', then unwinds 'str::as_buf' and at this points frees the ~str boxes because they go out of scope once 'begin_unwind' unwinds
[12:51:34] <kimundi> If that's true, then either the failure code is faulty because it doesn't actually take ownership of the strings, or you might just as well pass in an arbitrary slice since it has to live further up the stack frame. Unless this is a restriction to also prevent stuff like borrowed pointer to a @str, wich might get freed out of order, hmm...
[12:53:12] *** Joins: tahseen (tahseen@1EB0780D.9ECDA801.C523362B.IP)
[12:53:16] *** Quits: hmax_ (hmax@moz-53A94453.yandex.net) (Quit: ????? ? ?? ??? (xchat 2.4.5 ??? ??????))
[12:53:30] <nmatsakis> aatch: hey neat :)
[12:54:07] <nmatsakis> kimundi: I don't kno whow it works, but I suspect the use of `~str` is at least partly due for legacy reasons, when ~str was all we had
[12:54:26] *** Joins: mib_wjtmq0 (Mibbit@moz-AAEF01F3.bmo.com)
[12:54:31] *** Quits: mib_wjtmq0 (Mibbit@moz-AAEF01F3.bmo.com) (Quit: mib_wjtmq0)
[12:54:39] <aatch> nmatsakis, yeah, it seems like an interesting project.
[12:54:40] *** Joins: mib_cl30yh (Mibbit@moz-AAEF01F3.bmo.com)
[12:55:18] <aatch> And it's complicated enough to hopefully give the language a workout without the historical baggage in rustc
[12:55:34] *** Quits: mib_cl30yh (Mibbit@moz-AAEF01F3.bmo.com) (Quit: http://www.mibbit.com ajax IRC Client)
[12:55:57] <kimundi> nmatsakis: I got the impression the it should only be possible to fail with a ~str or a &'static str for thread safety, so I'm trying to trace the code path to see where the requirement comes up. Sadly my understanding of the source ends at the point where I enter the c++ runtime :(
[12:56:21] <dbaupp> nmatsakis: do you feel like reviewing https://github.com/mozilla/rust/pull/6036? :)
[12:56:56] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Ping timeout)
[12:57:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:57:27] <nmatsakis> dbaupp: ok
[13:01:38] *** Joins: bent|nothere (chatzilla@F2D29657.F60B0462.67AC9B1.IP)
[13:01:44] <tahseen> I was just looking at the vec.rs (to be sure that it works like an array) and it seems that its filled with unsafe blocks from what looks to be for handling allocation. Curious to why that has be done.
[13:01:45] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[13:01:45] *** ChanServ sets mode: +o dherman
[13:01:47] *** bent|nothere is now known as bent
[13:02:47] *** bent is now known as IRCMonkey23217
[13:07:59] <nmatsakis> dbaupp: r+
[13:09:07] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[13:10:06] *** bhearsum|afk is now known as bhearsum
[13:10:59] <dbaupp> nmatsakis: :) (I just pushed a commit removing the remaining unnecessary deref, which you may have missed)
[13:15:52] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[13:19:40] *** IRCMonkey23217 is now known as bent
[13:22:03] *** Joins: terra (Adium@moz-D293EB03.pool.mediaways.net)
[13:29:14] *** Joins: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net)
[13:32:59] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[13:33:42] <tahseen> so the only way to really do int loop is uint::range ?
[13:34:44] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[13:35:15] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[13:36:11] <jdm> tahseen: you can also use a mutable variable and a do while
[13:36:16] <jdm> er, a while loop
[13:36:42] *** Quits: idkfa (idkfa@148C5CA6.FAAA17AC.2E171177.IP) (Ping timeout)
[13:37:10] <kimundi> or just a loop
[13:37:36] <kimundi> tahseen: The vec loop code uses unsafe code so that it doesn't hit the bound checking overhead
[13:38:39] <kimundi> tahseen: For that reason, If you iterate manually it will be slower then withe the provided function (unless you also use unsafe code)
[13:39:01] <tahseen> kimundi: my question on unsafe was not about loop, it also initializes with unsafe
[13:39:08] *** Joins: Blub\w (wry@moz-D23C1F55.wireless.dyn.drei.com)
[13:39:19] <tahseen> jdm: yeah but it adds another initialization line and put the var out of scope of the loop
[13:39:19] *** Joins: engla (engla@moz-E4A8CEF5.customer.cdi.no)
[13:39:22] <kimundi> hm, which function exactly?
[13:39:56] <jdm> tahseen: sure. I don't see why uint::range isn't acceptable, though.
[13:40:32] <tahseen> jdm: its acceptable :) just confirming that its the recommended way and there isn't any syntatic sugar for it
[13:40:36] <jdm> ah, ok
[13:40:42] <tahseen> kimundi: like reserve at least on 0.6
[13:40:43] <jdm> I read criticism into your words that wasn't htere
[13:41:19] <tahseen> jdm: a little criticize is there honestly as it reads a little wired to start with
[13:42:01] <tahseen> C for, and ruby-seq i in 0..10 I'm visually used to, this will take a little time to get used to
[13:42:52] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[13:43:02] <dbaupp> nmatsakis: I don't think bors has picked up that PR, because of the commit I pushed just as you r+'d it
[13:43:38] <kimundi> tahseen: vec::reserve seems to use unsafe code to get to the actual memory representation of a vector, which has a header with a length and cpacity  field thats not acceswible otherwise.
[13:44:27] <kimundi> tahseen: So, it needs to use unsafe for that, because the operation would not compile otherwise.
[13:44:46] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[13:46:43] <tahseen> also just curious why the change from for range(0, x) {|i| block } was changed to range(0, x) |i| {block} are those explanations somewhere, might be an interesting read
[13:47:26] <tahseen> kimundi: interesting, I haven't yet gotten to traits and OO part of the language, but shouldn't length, capacity be private fields of the vec class or something?
[13:47:58] <kimundi> tahseen: Well vectors are special buildins in rust
[13:48:45] <nmatsakis> dbaupp: ok
[13:49:11] *** Quits: terra (Adium@moz-D293EB03.pool.mediaways.net) (Quit: Leaving.)
[13:49:28] <kimundi> tahseen: It's not possble to get a higher level representation without additional overhead. If a vector where a struct, it would still need to allocate its own memory and use unsafe code to have a dynamic size, so might as well build that in as a primitive
[13:49:31] <aatch> tahseen, I don't know why exactly, but I imagine that the change is so it is more consistent. You are able to do `|a| a+1`, omitting the blocks, since the grammar is closer to being |<var list>| <expr>
[13:50:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:50:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/-xsotA
[13:50:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:50:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:50:13] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/sLgesA
[13:50:13] <ghrust> 13rust/06auto 146c0a7c7 15Huon Wilson: libcore: remove @Rng from rand, and use traits instead....
[13:50:13] <ghrust> 13rust/06auto 147b00921 15Huon Wilson: libcore: convert the Program @-object to be a plain struct + impl....
[13:50:14] <ghrust> 13rust/06auto 144a24f10 15Huon Wilson: libcore: unify `gen_<type>` methods on `rand::RngUtil` into the generic `gen`....
[13:50:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:50:17] <kimundi> tahseen: Also, this way a closure looks more like a function
[13:50:59] <aatch> When given the choice between the two constructs, one isn't really better than the other.
[13:51:25] <tahseen> kimundi: good point though I have only really dabble a bit on closure in ruby so the original syntax was familiar :)
[13:51:28] <aatch> So the one that is more consistent with the rest of language is chosen
[13:51:41] <aatch> tahseen, I have a feeling that is the reason for the old syntax
[13:51:43] <tahseen> aatch: yeah, thats why I was curious why the change given they have chosen one already
[13:51:51] <aatch> possibly the only reason
[13:52:07] <aatch> I know Rust took a lot of design decisions from Ruby, at least early on
[13:52:38] <tahseen> aatch: I will take your word on the consistency, I don't think I was as lazy in any other courses as Compiler :(
[13:53:13] <aatch> tahseen, it's less a technical thing than a stylistic thing.
[13:53:24] <aatch> Though it is easier to parse.
[13:53:42] <tahseen> kimundi: don't know enough to realize why a struct vector would have to manage memory by unsafe to dynamically grow.
[13:54:03] <aatch> since you don't have to make a syntactic distinction between closures and any other type of block
[13:54:13] <kimundi> tahseen: A struct has a fixed length
[13:54:40] <tahseen> so all dynamically sized memory has to be using unsafe?
[13:55:02] <tahseen> I'm guessing a link list can be done with safe because each node is a fixed size struct?
[13:55:28] <kimundi> tahseen: So to, emulate a dynmaic size, you either need a dynamic sizeable primitive (like a vector), or you have to manually allocate a block of memeroy, and store a ptr+len pair in the strauct and use unsafe code to work with it and present it as a safe interfsace
[13:55:37] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[13:56:10] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[13:56:15] <aatch> tahseen, Rust works on the idea that raw pointers are fundamentally unsafe
[13:56:32] <kimundi> tahseen: A linked list would work, but you loose random access, and packed representation for that, and need n pointer indirections
[13:57:14] <aatch> We should be like Lisp.
[13:57:22] <aatch> Everything is a linked list
[13:57:23] <tahseen> kimundi: ohh I know you don't want vector to be on linked list, just trying to understand what is dynamic sized allocation in terms of rust with an example
[13:57:47] <kimundi> tahseen: unsafe in rust is just for things so low level that there is no high lever language representation, it's not bad. Only if it's used for things that don't need it :)
[13:57:52] <tahseen> dynamic allocation is perfectly safe its dynamically sized allocation thats the problem
[13:58:05] <kimundi> yeah
[13:58:22] <tahseen> where as in most languages its considered the same 
[13:58:25] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[13:58:34] <kimundi> well, a dynmaic allocation is also just usinf unsafe code underneathn. everything is
[13:58:52] <aatch> If it could return a null pointer, it is unsafe
[13:58:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:59:06] <aatch> even if in practice is never will
[13:59:11] <tahseen> kimundi: I known there's a lot of unsafe code in any language internals :) but generally given this distinction isn't there arrays/vector don't generally need unsafe so that got me curious
[13:59:12] <aatch> s/is/it
[13:59:47] <aatch> Well vector /usage/ isn't unsafe.
[13:59:47] <strcat> tahseen: dynamic arrays?
[14:00:07] <tahseen> kimundi: yes but that is part of the very core runtime/memory system whereas vec is kind of stdlib
[14:00:12] <strcat> at some point you need to ask the kernel for memory, which is going to be unsafe code
[14:00:17] <tahseen> strcat: yes like arraylist in java
[14:00:32] <strcat> ~[] is the lowest level safe primitive that asks for a block of memory that can be resized
[14:00:32] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[14:00:45] <aatch> tahseen, vec is low level.
[14:00:51] <kimundi> well, a arraylist would be an example of an safe api that uses the array primitive as building block
[14:00:56] <tahseen> strcat: yup now I get it
[14:01:08] <aatch> A `buffer` in Rust is a [u8] of some description
[14:01:14] <aatch> (normally ~[u8])
[14:01:22] <kimundi> anyway, gone for the next hours, bye :)
[14:01:26] <tahseen> kimundi: now that is a good point .. I don't remember whats inside Array.java :)
[14:01:44] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[14:02:32] <pnkfelix> tahseen: Imagine a wrapper around T[] that chooses its size and replaces it when necessary to grow and shrink.
[14:03:17] <tahseen> I still have to think about it a bit but that was really helpful. I kind of just stumbled upon it really
[14:03:59] <tahseen> I was trying to confirm that vec is like array and not a list :)
[14:04:14] <pnkfelix> tahseen: As in, a struct { store: T[]; len: uint; }.  (Typically one does not have store.length == len, because you'll often have some excess capacity so that you don't need to reallocate too often.)
[14:04:25] <strcat> it's a dynamic array with O(1) amortized append, since it has a separate capacity from the length
[14:04:51] <strcat> deque is also a dynamic array but has O(1) prepend too by giving up having it as one contiguous sequence
[14:04:52] <aatch> the separate capacity is nice.
[14:05:08] <tahseen> its the java arraylist really that works for all data type from primitive to object, more uniform in behavior
[14:05:23] <aatch> vec::with_capacity()
[14:05:35] <pnkfelix> tahseen: but the point is that its built on top of Java arrays.  Its not the most fundamental primitve.
[14:05:43] <tahseen> java is rather inconsistent there if you think about it, primitives are only array yet objcts can also have array
[14:05:58] <tahseen> pnkfelix: yeah I realized that when kimundi explained
[14:06:20] <tahseen> I was iterating the fact that vec is more consistent
[14:06:42] <tahseen> there's really no array in safe rust :)
[14:07:26] <strcat> tahseen: vectors/strings are part of the runtime/compiler
[14:07:37] <tahseen> is anyone here today doing the matasano crypto thing?
[14:07:45] <strcat> they're only partially implemented in libcore
[14:07:46] <tahseen> thanks for the explanation though everyone
[14:07:51] <tahseen> aha
[14:08:11] <strcat> there are lots of things that use unsafe blocks that don't need to though
[14:08:22] <strcat> but there are a few that currently don't use them but probably should.
[14:08:24] <strcat> like deque
[14:08:44] <strcat> it's silly for deque to be 2x as big as it could be and zero the unused memory - vec doesn't do that
[14:09:16] *** Joins: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net)
[14:09:32] <strcat> the compiler codebase itself doesn't have a clean separation of the LLVM bindings
[14:09:56] <tahseen> well hopefully my learning curve would be faster moving forward, it would be interesting to have the chance to watch libcore as in stdlib of a language grow and understand that
[14:12:16] *** Joins: aklt (aklt@83B8238.6BE5A349.B330AC0A.IP)
[14:13:58] *** Joins: akashj87 (akash@9504AABD.6A9BF87A.35E3DDC8.IP)
[14:14:30] *** Joins: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com)
[14:16:27] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[14:17:48] *** Quits: btipling (btipling@moz-5413CFA4.hsd1.ca.comcast.net) (Quit: Computer has gone to sleep.)
[14:20:18] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:24:58] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:26:11] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:27:26] *** Joins: Jesin (Jessin_@moz-69174C4C.res.lehigh.edu)
[14:28:41] *** aatch is now known as aatch|bed
[14:28:41] <aatch|bed>  /away
[14:32:53] *** Quits: engla (engla@moz-E4A8CEF5.customer.cdi.no) (Ping timeout)
[14:34:07] *** Quits: seth|pto (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[14:39:48] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:41:22] *** Joins: btipling (btipling@moz-5413CFA4.hsd1.ca.comcast.net)
[14:43:00] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[14:51:15] <tahseen> is there a way to write a range loop without using th index?
[14:51:31] <kimundi> ah, nmatsakis: Who could I best ask for the fail!() stuff?
[14:51:41] <tahseen> if I do for uint::range(0, 4) |i| {}, it gives unused variable error
[14:51:45] <kimundi> tahseen: what do you mean?
[14:51:48] <nmatsakis> kimundi: brson
[14:51:53] <kimundi> okay
[14:52:02] <kimundi> tahseen: replace the i with a _
[14:52:07] <tahseen> kimundi:  I just need to run the loop for x times, but I don't need the current index
[14:52:10] <tahseen> ohh got it
[14:52:25] <kimundi> tahseen: you can alsot do for 4.times { ... }
[14:52:30] <tahseen> lovely
[14:52:37] <pnkfelix> tahseen: in general variable names that start with _ will silence the unused variable warning.
[14:52:43] <tahseen> 4.times thats what I was looking for
[14:52:49] <bblum> hey doods
[14:52:57] <bblum> what do you know about the julia language?
[14:53:29] <bblum> my advisor is having me look over it to educate him how it's different from rust
[14:53:41] <tahseen> now at least the most common range 0..i is much cleaner to read :)
[14:53:58] <bblum> so far i haven't found any sign of julia having pattern matching (even though it does have union types...?) or kinds/typeclasses
[14:54:05] <jdm> bblum: call your advisor lazy and storm out of the room
[14:54:10] <strcat> bblum: it's dynamically typed, I don't think pattern matching would really make sense
[14:54:14] <strcat> maybe it would...
[14:54:27] <strcat> and ofc it uses gc
[14:54:35] <pnkfelix> strcat: Lisps have match libraries, so its not crazy.
[14:54:39] <mcpherrin> strcat: You don't get any static guarantees, but Racket for example has a 'match' construct
[14:54:52] <bblum> strcat: it seems to be both statically and dynamically typed
[14:55:00] <jdm> the best of all worlds
[14:55:04] <bblum> which is weird but it seems like they are pulling it off
[14:55:18] <bblum> well... i dunno
[14:55:21] <bblum> hm
[14:55:36] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[14:55:45] <tahseen> kimundi:  4.times don't work with index?
[14:55:51] <bblum> the other weird thing is "variables don't have types; values have types"
[14:56:12] <kimundi> tahseen: for that you need timesi :)
[14:56:15] <tahseen> ohh got it
[14:56:16] <strcat> bblum: isn't that just standard dynamic typing?
[14:56:20] <tahseen> had both loop :)
[14:56:24] <bblum> strcat: i see, maybe it is
[14:56:33] <bblum> so i think if you tried to use a dynamically-typed variable to, for example, instantiate a statically-typed polymorphic function, it would have to be a runtime failure
[14:57:03] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Quit: Leaving)
[14:59:27] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:00:05] *** Joins: thou (thou@moz-D1EE62D4.sumnetsol.com)
[15:01:27] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[15:02:05] <bblum> haha julia has a 'do' keyword that does exactly the same thing as rust's do keyword
[15:02:37] *** Joins: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP)
[15:05:01] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:05:01] *** ChanServ sets mode: +o dherman
[15:06:03] *** Joins: terra (Adium@moz-23A13192.pool.mediaways.net)
[15:08:15] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:09:11] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: brb)
[15:12:08] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[15:12:47] <kimundi> aww
[15:13:02] *** Quits: jviereck (Adium@C3AC2EF.7EF1EC24.2E8BE335.IP) (No route to host)
[15:13:32] <kimundi> Be glad it doesn't do the same as haskells do ;)
[15:13:45] <bblum> nah, monads are great
[15:13:55] <pnkfelix> or scheme's.
[15:13:58] *** Quits: Jesin (Jessin_@moz-69174C4C.res.lehigh.edu) (Ping timeout)
[15:14:32] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:14:36] <friggle> bblum: I only had a brief look at julia, but I kind of liked it
[15:14:48] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[15:14:51] <bblum> i think i would use it as a scripting language for hacking quick things
[15:15:00] <friggle> same
[15:15:09] <friggle> shame it's got an awful startup time
[15:18:19] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[15:19:08] *** Joins: idkfa (idkfa@1E91E04B.E303FFCA.57CB7914.IP)
[15:20:04] <friggle> I'm anticipating using it for some data processing and graphing soon
[15:20:33] *** Quits: dbaupp (Thunderbir@moz-C8D1F99C.lns20.syd6.internode.on.net) (Ping timeout)
[15:23:31] *** Quits: aklt (aklt@83B8238.6BE5A349.B330AC0A.IP) (Quit: goo)
[15:24:31] *** Joins: dbaupp (Thunderbir@moz-305C187E.lns20.syd6.internode.on.net)
[15:26:11] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[15:32:04] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:35:01] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[15:36:41] *** Quits: idkfa (idkfa@1E91E04B.E303FFCA.57CB7914.IP) (Connection timed out)
[15:37:07] *** Joins: idkfa (idkfa@1E91E04B.E303FFCA.57CB7914.IP)
[15:39:35] <tahseen> who implement the timesi method for indexed for ?
[15:39:52] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[15:40:12] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[15:40:55] <tahseen> I get this error: type `uint` does not implement any method in scope named `timesi`
[15:41:42] <thiez> tahseen: are you sure you don't want to use uint::range(b,e) ?
[15:42:03] *** Quits: btipling (btipling@moz-5413CFA4.hsd1.ca.comcast.net) (Quit: Computer has gone to sleep.)
[15:42:08] <tahseen> well I'm actually using it 
[15:42:33] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[15:42:34] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[15:42:50] <tahseen> at one place I'm using x.times and where indexed uint::range
[15:45:11] <kimundi> tahseen: try 4u.timesi
[15:45:42] <kimundi> there where problems with inference so those methods are just defined on uints  now
[15:46:03] <tahseen> hmm ok
[15:46:12] <strcat> what's timesi? :\
[15:46:27] <tahseen> an indexed version of times 
[15:47:00] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[15:47:02] <tahseen> 0..(n-1) ?
[15:47:13] <thiez> I didn't even know we had timesi :D
[15:47:26] <thiez> in which file is it declared?
[15:47:39] * thiez can't find it in num/int-template
[15:49:08] <thiez> nor in iter.rs
[15:49:29] <Scriptor> apparently it was removed from iter? https://github.com/mozilla/rust/issues/3130
[15:49:51] *** Quits: z0w0 (zack@moz-48AFB40F.lnse4.woo.bigpond.net.au) (Quit: Leaving.)
[15:50:21] <thiez> tahseen: how old is your rust compiler? oO
[15:51:11] <tahseen> 0.6
[15:51:20] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[15:51:22] <tahseen> should I be using the trunk?
[15:51:33] *** Joins: jviereck (Adium@moz-55CFAB6C.ethz.ch)
[15:51:47] <thiez> no that's quite alright, I just wondered why you would try and use timesi when it was removed 6 months ago
[15:52:26] <kimundi> ah, if its gone then its alsp alredy gone in 0.6
[15:53:07] <kimundi> sorry, thought that still exists
[15:53:32] <thiez> earlier today I noticed I still had a rust 0.4 install on my windows box...
[15:53:45] <tahseen> is it recommended to use trunk?
[15:54:17] *** Joins: benh (ben@moz-4A0366D2.org)
[15:54:28] <tahseen> I am just learning it nothing serious
[15:55:24] <thiez> I would recommend it if you run into a bug that has been fixed since 0.6, or if you write build code that you want to use with rust 0.{7,8,9,...}
[15:56:21] <thiez> and if you want to work on the libraries or the compiler, but that is rather obvious
[15:57:10] <kimundi> anyway you need an index, you have to use range
[15:57:37] <kimundi> if you need*
[15:57:59] <tahseen> ok great
[15:58:01] <tahseen> thats how it stands
[15:58:02] *** Joins: FluffySauce (textual@moz-E5BC5F6F.sea.popcap.com)
[15:59:01] <tahseen> damn base 64, wanted to avoid hard coded conditions and its still small but don't think I will understand it in a month
[16:06:45] *** Quits: libertas (libertas@moz-9ACC1A3B.rev.vodafone.pt) (Quit: Lost terminal)
[16:07:26] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[16:07:30] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[16:08:59] *** Quits: terra (Adium@moz-23A13192.pool.mediaways.net) (Quit: Leaving.)
[16:13:09] *** Quits: benh (ben@moz-4A0366D2.org) (Input/output error)
[16:17:37] *** Quits: dbaupp (Thunderbir@moz-305C187E.lns20.syd6.internode.on.net) (Ping timeout)
[16:17:59] <tahseen> is there any math package for min/max functions?
[16:18:14] <strcat> they're in cmp
[16:18:30] *** Joins: dbaupp (Thunderbir@moz-7ADA956.lns20.syd6.internode.on.net)
[16:18:34] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:18:54] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[16:20:25] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:20:37] *** Quits: yawnt (yawnt@A76BD118.60D9823A.3F457047.IP) (Quit: leaving)
[16:21:32] *** Quits: jviereck (Adium@moz-55CFAB6C.ethz.ch) (Ping timeout)
[16:21:38] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:22:04] *** Joins: benh (ben@moz-4A0366D2.org)
[16:22:21] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:23:01] *** Joins: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP)
[16:23:01] *** ChanServ sets mode: +qo graydon graydon
[16:24:18] *** Joins: jviereck (Adium@moz-7E197E93.range86-189.btcentralplus.com)
[16:27:55] *** Quits: trapni (trapni@moz-7C7C1909.dawanda.com) (Quit: Leaving)
[16:30:05] *** Quits: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[16:32:54] *** Joins: Benvie1 (Thunderbir@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:33:05] *** Quits: jviereck (Adium@moz-7E197E93.range86-189.btcentralplus.com) (Quit: Leaving.)
[16:33:47] *** Joins: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP)
[16:35:00] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[16:35:28] <cmr> https://gist.github.com/cmr/c61512338c1a18c85932
[16:35:43] <cmr> What is this error trying to tell me? It's giving the same candidate twice?
[16:38:01] *** Joins: eholk (eholk@moz-29801C4.osl.iu.edu)
[16:38:23] *** Joins: jviereck (Adium@moz-7E197E93.range86-189.btcentralplus.com)
[16:38:36] <graydon> kimundi: ping
[16:38:50] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[16:39:08] *** Quits: dbaupp (Thunderbir@moz-7ADA956.lns20.syd6.internode.on.net) (Ping timeout)
[16:39:27] <kimundi> pong
[16:40:02] <kimundi> graydon: pong
[16:40:02] *** Quits: jviereck (Adium@moz-7E197E93.range86-189.btcentralplus.com) (Quit: Leaving.)
[16:40:04] *** Joins: jviereck (Adium@moz-582E4879.ethz.ch)
[16:40:16] <graydon> kimundi: concerning strconv
[16:40:26] <kimundi> yes?
[16:40:33] <graydon> I just noticed, it replaced the fast uint -> &[] converter with one that always allocates
[16:40:41] <graydon> I think
[16:40:43] <graydon> am I misreading?
[16:41:05] <kimundi> No, that's true. 
[16:41:12] <graydon> ok. so this is problematic. non-allocating number-to-string formatting is actually a performance bottleneck in real testcases :(
[16:41:34] <graydon> I am just doing triage of related bugs and noticed it
[16:41:39] <graydon> it's ok, you did great work with strconv!
[16:41:46] <graydon> but we need to keep a bug open to fix the performance issue
[16:42:00] <graydon> allocating heap boxes on the normal formatting paths has to go away again, at some point
[16:42:30] <kimundi> Hm. I meant to rewrite the conversion function so that it calls an builder instead, but I need to restructure the first part of the function for that
[16:42:40] *** Joins: dbaupp (Thunderbir@moz-94AD9B36.lns20.syd6.internode.on.net)
[16:43:05] <tahseen> I'm passing a ~[u8] to a method as param v : &[u8] but can't use v.push() after 
[16:43:17] <graydon> I know
[16:43:17] <kimundi> Not sure if that would be enough for performance
[16:43:41] <cmr> tahseen: borrowed pointers are immutable, you need to use &mut, I believe
[16:43:57] <tahseen> ohh ho
[16:44:01] <kimundi> graydon: The problem I saw with the old aproach was that it pretty much hardcoded to uint
[16:44:02] <strcat> tahseen: &[T] and &mut [T] are slices into any type of vector, you can't call methods like push
[16:44:08] <strcat> you need &mut ~[T]
[16:44:21] <strcat> push changes the length, &[T] and &mut [T] are a fixed-length view
[16:44:25] <graydon> the way to approach it is to format into a larger-than-maximum-number-of-bytes buffer filled with \0, then take a sub-slice of it when you know the actual size.
[16:44:28] <cmr> ah
[16:44:28] <kimundi> But I realize that a generic replacement is not neccessary as fast.
[16:45:08] <kimundi> graydon: Was that at me or at cmr?
[16:45:12] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[16:45:17] <kimundi> directed at*
[16:45:23] <graydon> kimundi: directed at you, sorry.
[16:45:31] <graydon> it's ok that the current code doesn't do it
[16:45:43] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[16:45:44] <graydon> but we'll need to fix it up eventually
[16:45:51] <graydon> it'll resurface as a performance bottleneck otherwise
[16:46:07] *** Quits: dbaupp (Thunderbir@moz-94AD9B36.lns20.syd6.internode.on.net) (Ping timeout)
[16:46:08] <strcat> well it needs to be able to write out to some arbitrary place
[16:46:17] *** Quits: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com) (Ping timeout)
[16:46:24] <strcat> pcwalton mentioned that he's going to rewrite fmt!
[16:46:36] *** Quits: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com) (Ping timeout)
[16:46:40] <strcat> and part of that is making it write out directly to a stream and not just making ~str
[16:46:43] <kimundi> Hm. The way it is written right now, it can handle everything from floats, ints, uints, and in theory any 1 dimensional number
[16:47:12] <tahseen> strcat: not sure what you mean are you saying that &mut ~[T] has performance issue?
[16:47:16] <graydon> I know
[16:47:19] <strcat> tahseen: no
[16:47:24] <strcat> tahseen: not talking about that
[16:47:26] <graydon> I'm just doing triage, it's ok. I just want to make a note, leave the bug open.
[16:47:30] <kimundi> Can't really allocate a stack vector at the beginning because there is no constant upper bound on the length
[16:47:41] <strcat> you don't need a vector
[16:47:41] <kimundi> Sure, thinking out loud here
[16:47:55] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[16:48:06] *** Joins: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com)
[16:48:17] <strcat> there's a constant upper bound based on the type if it's one of the primitives
[16:48:28] <strcat> but it needs to be able to write directly to a file without a ~str in between too
[16:48:33] <graydon> (it depends if your number-formatting "has to be done" left-to-right or right-to-left)
[16:48:49] <strcat> still a bound known at the start with zfill stuff
[16:48:56] <strcat> zeroes + upper bound on len
[16:49:10] <tahseen> ahh continuation of discussion :)
[16:49:24] <heftig> strcat: is there a trait to use so you can pass both &mut ~[T] and &mut @[T] ?
[16:49:30] *** Joins: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com)
[16:49:37] *** Joins: dbaupp (Thunderbir@moz-A0E23AE.lns20.syd6.internode.on.net)
[16:49:44] <strcat> heftig: no but @[T] and @str might just end up removed
[16:49:51] *** Joins: tiffany (kawaii@moz-46D53C9A.dhcp.embarqhsd.net)
[16:49:56] <strcat> they're pretty pointless
[16:50:02] <heftig> strcat: so you get @~str?
[16:50:19] <strcat> heftig: yes, the extra indirection won't be the bottleneck with @
[16:50:37] <strcat> all of the dynamic freezing that will be required for @mut is going to be the bottleneck
[16:50:43] <kimundi> strcat: The bound might be known, but I don't know how to use that knowledge to preallocate something thats not on the heap, apart from just calling an iterator for each digit.
[16:51:08] <strcat> kimundi: you need to generate them with macros right now
[16:51:12] <strcat> because there aren't associated consts
[16:51:26] <kimundi> Yeah...
[16:51:45] <kimundi> wait, assoziated constants would fix it?
[16:52:05] <strcat> well then you could have [u8, T::foo]
[16:52:06] <strcat> although...
[16:52:13] <strcat> then you're into territory when you need constexpr
[16:52:32] <kimundi> strcat: Well, constants at that place work today, afaik
[16:52:47] <strcat> kimundi: but it needs to be associated with the type if you want it generic
[16:52:58] <kimundi> strcat: Yes
[16:53:03] <strcat> and anyway you can't make std::log10(2) evaluate to a constant so you have to hardcode it
[16:53:07] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[16:53:30] <strcat> base2_digits * std::log10(2) // hardcoded ;p
[16:53:31] <kimundi> strcat: But you could just precalculate thet value, that's not the problem
[16:53:45] <strcat> sure and hardcode all of the base2 digit numbers
[16:54:09] <strcat> and make a different function for each type of number
[16:54:11] <kimundi> hm? just the longest possible one
[16:54:40] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[16:54:43] <strcat> kimundi: if you're just doing the built-in types and not making it work for external ones, there's no point of using generics
[16:54:53] <kimundi> no need for different functions if assoziated consts work
[16:55:27] <kimundi> strcat: The idea was to use it for external ones, but wether its possible is still unknown to me.
[16:55:56] <strcat> just use a macro for now to define impls of a trait
[16:56:51] <strcat> need printf!(file, format, ...) and formatters that write to streams too
[16:57:10] <strcat> I/O and formatting is the bottleneck in a lot of stuff right now ;\
[16:59:04] <strcat> there's a lot of low-hanging fruit right now ;p
[16:59:45] *** Quits: fabiand (fabiand@moz-8A070952.adsl.alicedsl.de) (Quit: Verlassend)
[17:02:54] *** Quits: jviereck (Adium@moz-582E4879.ethz.ch) (Quit: Leaving.)
[17:03:22] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:03:55] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:04:06] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:08:48] <nmatsakis> bblum: I'd be curious to see your summary :)
[17:09:11] <nmatsakis> (comparing julia+rust I mean)
[17:10:23] <bblum> nmatsakis: http://pastebin.com/SUAFQHgn
[17:10:31] *** Joins: engla (engla@moz-E4A8CEF5.customer.cdi.no)
[17:10:54] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[17:11:11] <friggle> though really the julia people are focusing very strongly on replacing R and numpy/scipy. They haven't shown much interest in the rest of the python community
[17:11:33] <bblum> i welcome corrections of the form "your made-up syntax should actually be this" or "you mischaracterised the presence/absence of such-and-such julia feature"
[17:12:05] *** Joins: pizzakingme (Mibbit@56B25F.3956FA55.C71C5C8B.IP)
[17:12:14] <pizzakingme> hello?
[17:12:15] <friggle> bblum: no mention of multiple dispatch?
[17:12:25] *** Quits: pizzakingme (Mibbit@56B25F.3956FA55.C71C5C8B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:13:37] <bblum> friggle: oh, i see
[17:13:42] <graydon> strcat: ping
[17:13:54] <bblum> friggle: i didn't mention it because i figured it's part of the OOP thing in general
[17:13:55] <nmatsakis> bblum: thanks. I want to do a bit more reading into Julia, in particular their support for generic programming has some powerful capabilities as well.
[17:14:08] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[17:14:12] <bblum> friggle: but i suppose a difference is that rust only has single dispatch, right?
[17:14:14] <strcat> graydon: pong
[17:14:42] <graydon> strcat: can you elaborate a bit (at some point, maybe email? I'm terribly overloaded) on what you mean when you mention overloaded literals?
[17:14:49] <friggle> nmatsakis: and their shell constructucts are cute http://docs.julialang.org/en/latest/manual/running-external-programs.html
[17:14:52] <bblum> nmatsakis: julia appears to have frighteningly powerful reflection capability
[17:14:55] <graydon> you mention it with some frequency and I honestly don't _understand_ what you're describing...
[17:16:12] <graydon> "the escaping, quoting, and interpolation behaviors are the same as the shell‚Äôs" haha
[17:16:20] <graydon> call me when you have a definition of _that_!
[17:16:41] <nmatsakis> bblum: yes, I saw them give a talk where they gave this impression of "it can do ANYTHING", which was a good sale's pitch but I had a hard time understanding the system itself
[17:16:47] <strcat> graydon: http://www.haskell.org/tutorial/numbers.html the 10.3 section there explains the bit that's in haskell for numeric literals
[17:17:39] <strcat> graydon: basically, you can implement a conversion from from the generic literal and then it allows inferring the literal to be your type
[17:17:53] <strcat> let x = 5 :: CustomIntegerType
[17:18:00] <friggle> nmatsakis: what's nice about it is that like Rust, it's built with a real usecase in mind. They optimise heavily for that. Also means they don't really prioritise the fact a minimum process size is ~50MiB or so due to the massive amount of JITted code
[17:18:08] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:18:10] <strcat> graydon: and ghc has overloaded string literals as an extension
[17:18:37] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[17:18:47] <graydon> ok. would it require (I assume so) something like 10.4 as well, though?
[17:19:07] <nmatsakis> friggle: I thought it looked very nice! It was just hard for me to get an understanding of its limits
[17:19:39] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[17:19:45] <strcat> graydon: I guess it would need a special trait
[17:19:57] <graydon> special trait? per-module attribute?
[17:20:02] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:20:03] *** ChanServ sets mode: +o pcwalton
[17:20:10] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:20:36] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[17:20:49] <strcat> #[lang = "from_int_literal"] trait FromIntLiteral<Source> { fn from_int_literal(Source x) -> Self; }
[17:20:54] <strcat> something like that
[17:21:13] <strcat> so the compiler would know how to turn int literals into any of the built-ins or a bigint
[17:21:21] <dbaupp> graydon et al: I think bors may have crashed on the most recent pull request (which was mine... sorry :( )
[17:21:27] <strcat> anyway it would be backwards compatible
[17:21:30] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Input/output error)
[17:21:31] <strcat> doesn't have to be done in the near future
[17:21:52] <strcat> from_int_literal(x: Source) * ;p
[17:21:52] <graydon> famous last words!
[17:21:56] * strcat has been writing C++
[17:22:06] <graydon> I think it'd change the meaning of current integer type inference
[17:22:16] <strcat> graydon: well, haskell infers 5 to be Integer by default
[17:22:19] <strcat> unless there's a hint
[17:22:37] <strcat> Integer is a bigint though. but it's the same idea
[17:22:39] <graydon> I mean all the _other_ cases. but anyway, carrying on
[17:22:57] <strcat> graydon: I think the other cases would have to remain hardcoded in the compiler
[17:23:14] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[17:23:29] <graydon> dbaupp: checking
[17:23:30] <strcat> when implementing a custom type you'd need to pick the type of built-in integer you wanted the compiler to hand you
[17:23:55] <pcwalton> I *think* there is no semantic problem with IntLiteral
[17:24:24] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Input/output error)
[17:24:30] <strcat> graydon: ghc added string literal overloading in a backwards compat way ;p
[17:24:42] <strcat> afaik rust could deal with that stuff in the future the same way
[17:24:44] <graydon> ok
[17:24:55] * graydon tries to figure out why buildbot is not reporting what it should be reporting...
[17:25:04] <strcat> "foo" defaults to &str, but it could be possible to overload it and have it coerce with a type hint
[17:25:52] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[17:26:09] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[17:27:02] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:27:47] *** Quits: dbaupp (Thunderbir@moz-A0E23AE.lns20.syd6.internode.on.net) (Ping timeout)
[17:27:47] *** Quits: Benvie1 (Thunderbir@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Benvie1)
[17:27:54] *** Joins: Benvie1 (Thunderbir@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net)
[17:27:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:28:29] <bstrie> < tahseen> kimundi:  I just need to run the loop for x times, but I don't need the current index
[17:28:42] <bstrie> I know that the question's been answered, but I do love that the answer was "for x.times {"
[17:29:35] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[17:29:55] <bstrie> also, to all interested parties, timesi has been gone for a while. use range if you want an index
[17:30:11] <pcwalton> range really needs to be in prelude
[17:30:14] <pcwalton> and needs to be defined over Num
[17:30:22] <bstrie> yes, a generic range would be perfect
[17:30:25] * pcwalton constantly grumbles about that
[17:30:26] <strcat> pcwalton: needs to be defined over an Enumerated trait
[17:30:26] <bstrie> I will go file a bug, actually
[17:30:33] <pcwalton> yeah, or not even Num
[17:30:36] <strcat> pcwalton: anything that's an ordered sequence
[17:30:36] <pcwalton> so you can do
[17:30:42] <pcwalton> for range(EnumVariant1, EnumVariantN)
[17:30:54] <strcat> "aa".to("cc")
[17:30:57] <kimundi> hm, ho about 'for 5u.to(15u)' ? xD
[17:30:57] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: rcirc on GNU Emacs 24.2.1)
[17:31:03] <bstrie> or for range('a', 'z') ... for ascii, at least :P
[17:31:06] <strcat> aa, ab, ac, ad, ... cc
[17:31:11] <kimundi> damn, strcat was faster
[17:31:28] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:31:29] <pcwalton> I think range is a little more pythonic but "to" is cute
[17:31:32] <bstrie> strcat: I proposed a .to method a long time ago, nobody liked it :)
[17:31:47] <bstrie> pcwalton: dammit, nmatsakis didn't like it *because* it was cute :P
[17:31:48] <strcat> pcwalton: well, I like methods
[17:31:58] <strcat> pcwalton: traits in prelude are nicer than functions in prelude
[17:32:06] <strcat> because they don't clutter the namespace and they don't reserve method names
[17:32:08] <friggle> programming is serious business
[17:32:09] <strcat> unless you implement the trait
[17:32:10] <bstrie> I would still back a .to() , because I do like methods
[17:32:12] <tahseen> whats prelude?
[17:32:20] <bstrie> tahseen: things that are imported by default
[17:32:22] <bstrie> like println
[17:32:22] <pcwalton> I don't feel strongly I guess
[17:33:16] <tahseen> do you mean I can just write println instead of io::println or that I don't need to import io; ?
[17:33:17] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:33:26] <pcwalton> tahseen: right, just write println
[17:33:28] <pcwalton> no need for io::
[17:33:38] <bstrie> EVERYBODY keeps sticking the io:: on there
[17:33:38] <strcat> pcwalton: range in python returns a range object, since it's a generator (at least in 3.x)
[17:33:46] <pcwalton> it will eventually stop working
[17:33:49] <strcat> doesn't really make sense as a verb for an internal iterator imo
[17:33:51] <pcwalton> I should just make it stop working
[17:33:52] <cmr> bstrie: EVERY documentation I've seen uses it!
[17:33:57] <tahseen> well the tutorial shows everything with io:: and me being not reading much before jumping to coding :)
[17:34:04] <pcwalton> yeah, it should be updated
[17:34:13] *** Joins: gareth0 (gareth0@moz-449088ED.dynamic.dsl.as9105.com)
[17:34:17] <strcat> >>> x = range(0, 2)
[17:34:19] <strcat> >>> type(x)
[17:34:21] <bstrie> cmr: I have to keep reverting the wikipedia article on rust to not use io::, because everybody seems to think that its omission is an error :)
[17:34:21] <strcat> <class 'range'>
[17:34:23] <doy> io::println will stop working?
[17:34:28] <strcat> pcwalton: range is really a constructor in python
[17:34:35] <bstrie> doy: just do println
[17:34:40] <doy> bstrie: i know
[17:34:47] <strcat> >>> type(range)
[17:34:49] <strcat> <class 'type'>
[17:34:50] <pcwalton> ah
[17:34:52] <pcwalton> so probably it should be
[17:34:56] <pcwalton> for range(0, 5).each ...
[17:35:00] <pcwalton> so it's an iterator
[17:35:03] <strcat> pcwalton: yeah
[17:35:05] <doy> just wondering why the io:: version would not also work
[17:35:05] <bstrie> I agree with strcat that range should return an iterator
[17:35:16] <strcat> pcwalton: need count, range, range_step, etc. as objects in iterator.rs
[17:35:18] <cmr> strcat: only in python 3
[17:35:24] <pcwalton> doy: I want to stop making it work because I don't want prelude to reexport all modules in core
[17:35:28] <bstrie> I tried a looong time ago but I think something was broken back then
[17:35:28] <pcwalton> basically because this doesn't work:
[17:35:29] <strcat> cmr: well that's the latest stable release of the language
[17:35:30] <pcwalton> use io::println;
[17:35:35] <strcat> I don't care about python1.7 ;p
[17:35:38] <pcwalton> because you can't import from a reexport
[17:35:41] <pcwalton> well
[17:35:42] <pcwalton> you can
[17:35:43] <kimundi> strcat: Could you put a @bors: retry on my pull request?
[17:35:50] <strcat> 3.1 was released in 2009
[17:35:51] <doy> pcwalton: ah, okay
[17:35:52] <strcat> kimundi: yeah
[17:36:01] <pcwalton> but you can't import from modules reexported in the prelude due to the way resolve works
[17:36:03] <pcwalton> which is confusing
[17:36:06] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:36:09] <pcwalton> so I'd rather just stop reexporting all the core modules in prelude
[17:36:12] <pcwalton> solving the problem
[17:36:14] <cmr> I know, I'm a bit pissed at the state of migration, but I get paid to do work in 2.7, so..
[17:36:15] <doy> yeah, that makes sense
[17:36:45] <strcat> cmr: well they planned on it taking 5 years so it's not a failure yet
[17:36:49] <bstrie> cmr: soon you can get paid to do work migrating 2.7 to 3.4 :)
[17:36:53] <cmr> heh
[17:36:59] <strcat> they're at year 4 ;p
[17:37:38] <kimundi> pcwalton: Would it be eventually possible to un-import things in the prelude? Thinking of the recent each_char clash between io reader and str str here
[17:37:50] <bstrie> pcwalton: wanted to ask about resolve... one of the constraints that makes it so difficult is that rust allows circular references, right? can you give an example of where rust actually does this?
[17:38:04] <pcwalton> bstrie: rust doesn't allow circular references
[17:38:12] <pcwalton> it does however allow mutually recursive references
[17:38:22] <strcat> pcwalton: would be really nice to have 'import everything but x' like haskell
[17:38:22] <pcwalton> fn f() { g(); } fn g() { f(); }
[17:38:26] <bstrie> ah ok
[17:38:32] <strcat> use prelude::^{foo}
[17:38:40] <strcat> or !{}
[17:39:25] <strcat> it's silly to have a dozen imports in every core module and I can see that would be a recurring problem in other libs
[17:39:41] <tahseen> where do I read about how to use &mut ~var[] ?
[17:39:57] <strcat> tahseen: &mut and & are just borrowed pointers
[17:40:18] <strcat> &mut int and &mut ~[] aren't different concepts
[17:40:24] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[17:40:31] <strcat> they give a mutable reference to the object
[17:40:47] <tahseen> yeah but &[] and mut& ~[] seem to be different?
[17:40:52] <strcat> tahseen: yes
[17:41:11] <strcat> if you have ~T, &T is only a reference to the interior object
[17:41:16] <strcat> &~T is a reference to the box
[17:41:19] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[17:41:20] <strcat> same thing applies to vectors
[17:41:36] <strcat> &[T] and &mut [T] are only a view of the objects inside - you can't alter the array's length/capacity
[17:41:51] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[17:42:03] <strcat> that's a property of the vector, not slices of contained elements
[17:42:59] <bstrie> strcat: do you think that a generic `.to()` method that took any Enumerable would ever be as fast as the current `int::range` for the integer case? i.e. `range(0, 10)` vs `0.to(10)` ?
[17:43:04] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:43:19] <tahseen> ok let me get this straight
[17:43:25] <strcat> bstrie: yes it would be the same
[17:43:41] <strcat> += 1 just becomes .succ() (which is += 1)
[17:44:03] <tahseen> [T] is the vector, can't pass it so borrow with &[T], but then I can't modify it since its a read only variable so I use &mut [T]
[17:44:12] <strcat> and rust's integers are just modular arithmetic so a range can be circular
[17:44:29] <strcat> tahseen: [T] isn't a type
[17:44:45] <tahseen> but &mut [T] is just allowing me to change the elements inside like T[i].field but not the T[] itself ?
[17:44:57] <strcat> there's ~[T], @[T], [T, ..n] and &[T]
[17:45:09] <bstrie> tahseen: if there's no sigil, they "type" has to include the length
[17:45:21] <strcat> ~[T] and @[T] are dynamic arrays (their size can be changed)
[17:45:22] <tahseen> hmm forget about that
[17:45:34] <strcat> &[T] is just a view into an array
[17:45:34] <tahseen> these things are a little hard to remember without much use
[17:45:42] <bstrie> vectors in rust are weird, even though that's for a good reason
[17:45:58] <strcat> they aren't really weird
[17:46:04] <strcat> other languages with arrays have the same concepts
[17:46:06] <bstrie> "special-cased"
[17:46:19] <strcat> yes the syntax is special-cased
[17:46:21] <strcat> the concepts aren't
[17:46:26] <tahseen> its the most common thing (as in array) for a first timer but using them are fairly complex so far as I have seen it
[17:46:42] <tahseen> they will hopefully make sense once I learn them
[17:47:11] <tahseen> the other difficulty is that the variants and simple use cases aren't really compared against one another as examples
[17:47:38] <tahseen> I think the tutorial as it doesn't work for rust, not just for lack of some content 
[17:47:47] <strcat> tahseen: the two variants of actual vectors are fixed-size arrayts and dynamic arrays
[17:48:02] <strcat> &[T] isn't a vector, it's a view into one
[17:48:13] <cmr> It's called a slice, right?
[17:48:15] <bstrie> or slice, in Go terms
[17:48:16] <cmr> Or is that something else
[17:48:23] <tahseen> but rust really has a lot of core things working in a special way that I think requires the tutorial to style itself differently than other languages
[17:48:36] <bstrie> cmr: it used to be called a view, now it's called a slice
[17:48:51] <strcat> a view is what it is in non-technical terms
[17:49:03] *** Joins: josemaria (josemaria@moz-81467268.dyn.user.ono.com)
[17:49:06] <strcat> slice is more of a domain term ;p
[17:49:14] <tahseen> to me it looks like view is more technically accurate
[17:49:21] <tahseen> slice doesn't say anything about read only
[17:49:26] <strcat> it's not read-only
[17:49:30] <strcat> &mut [T] is mutable
[17:49:35] <cmr> It's just fixed-length
[17:49:38] <strcat> but it's a mutable *slice* of a vector
[17:49:49] <strcat> it can't alter the vector by adding/removing elements
[17:49:52] <cmr> Like a standard C array, I think
[17:49:54] <bstrie> to be technically accurate, you'd say `struct { address: int, len: int }` :P
[17:50:09] <tahseen> hmm point taken, the mutability in rust is quite different from most language so I keep mixing thing up
[17:50:46] <strcat> slices don't actually act differently than ~T and &T
[17:50:55] <strcat> if you have &T you can't do anything with the box
[17:51:12] <tahseen> well not really sure in most but at least in java
[17:51:45] <tahseen> ok so what I should have written earlier
[17:51:47] <strcat> [T, ..n] is a fixed-size array like std::array in C++, a C array, etc.
[17:52:05] <strcat> ~[T]/@[T] are a dynamic array, like std::vector in C++, a list in python, etc.
[17:52:41] <tahseen> ~[T] can't be passed since its owned, pass a &T[] but than its completely immutable neither its size or elements right?
[17:52:57] <strcat> tahseen: it can be passed
[17:53:06] <strcat> you can pass owned things around by-value
[17:53:27] <strcat> if they have a destructor the caller is transferring ownership
[17:53:31] <cmr> ~[T] is a value? I thought it was a pointer :S
[17:53:33] <tahseen> mut& T[] then allows me to change its elements like T[i].value so I need mut& ~T[] to actually change it
[17:53:41] <doy> the confusing part here i think is that you can pass a ~[T] to a function that expects either an &[T] or an &~[T]
[17:53:43] *** Joins: blitter (blitter@moz-48397EA8.dyn.centurytel.net)
[17:53:47] <tahseen> strcat: sorry yes my mistake
[17:54:04] <strcat> doy: can't pass it to one expecting &~[T]
[17:54:09] <tahseen> I actually had other usage following the method call so thats why I couldn't even copy it though in case I don't really wanted to
[17:54:12] <strcat> there isn't implicit borrowing like that
[17:54:15] <strcat> need &xs
[17:54:37] <doy> oh right, ignore me
[17:54:57] <doy> not sure what i was thinking of
[17:54:59] <strcat> rusti: let x = ~5; x
[17:55:01] <rusti> ~5
[17:55:02] <strcat> rusti: let x = ~5; *x
[17:55:04] <rusti> 5
[17:55:05] <strcat> rusti: let x = ~5; &x
[17:55:06] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/WceA
[17:55:09] <tahseen> ok so if I have a v = ~[T] how do I pass it as mut& ~[T] whats the syntax for the param ?
[17:55:12] <graydon> grr
[17:55:19] <graydon> buildbot just .. builds completely random stuff way too often
[17:55:22] <strcat> graydon: what exactly do you want to do
[17:55:25] <strcat> tahseen: *
[17:55:36] <graydon> it built 7b0092
[17:55:40] <strcat> do you want to pass a reference to a function that adds elements?
[17:55:44] <graydon> that's _not_ the merge head 
[17:56:26] <graydon> $ git ls-remote origin auto
[17:56:26] <graydon> e26f992d5e199a1ff8c26733650d254d63be066a        refs/heads/auto
[17:56:44] <graydon> (in case anyone is curious about "bors being broken")
[17:56:56] <strcat> rusti: fn f(x: ~int) { println(fmt!("%?", x)) }; let x = ~5; f(x)
[17:56:57] <rusti> ~5
[17:57:04] <graydon> it's buildbot repeatedly not understanding the very simple task of "build the rev that is actually the head of the branch that you are supposed to build"
[17:57:08] <strcat> rusti: fn f(x: &~int) { println(fmt!("%?", x)) }; let x = ~5; f(&x)
[17:57:09] <rusti> &~5
[17:57:20] <strcat> rusti: fn f(x: &int) { println(fmt!("%?", x)) }; let x = ~5; f(&*x)
[17:57:21] <rusti> &5
[17:57:27] <bstrie> perhaps we need a bot to manage bors the same way that bors manages the buildbots. bots all the way down
[17:57:36] <strcat> rusti: fn f(x: & & & &int) { println(fmt!("%?", x)) }; let x = ~5; f(& & & &*x)
[17:57:37] <rusti> &&&&5
[17:57:39] <bstrie> call the new bot "boss"
[17:57:52] <tahseen> strcat: isn't that a deference operator?
[17:57:52] <graydon> we need a version of buildbot that doesn't randomly make up revisions to build, but knows what a git head is and how to read it
[17:57:59] <strcat> tahseen: which, *?
[17:58:06] <strcat> tahseen: yes, it's dereferencing the ~
[17:58:12] <tahseen> strcat: yes
[17:58:20] <tahseen> strcat: I need the reverse
[17:58:32] <strcat> tahseen: don't know what you mean
[17:58:40] <strcat> you can take references with & and &mut
[17:58:57] <tahseen> my parent function has a ~[T], I want to pass to the child/callee function as a mut& ~[T] .. oh think I got it
[17:59:01] <graydon> is ghi working for anyone else today?
[17:59:07] <graydon> or did it decide to stop everywhere?
[17:59:39] <graydon>  I see, they tightened the API
[17:59:55] <tahseen>  32:26 error: found `mut` in ident position
[18:00:05] <strcat> graydon: hub still seems to work, if that uses the API
[18:00:06] <cmr> tahseen: it's &mut, not mut&
[18:00:06] <tahseen> what does this mean, two call to same method 
[18:00:22] <tahseen> oopse
[18:00:34] <graydon> awesome, the new one broke even worse
[18:00:41] <graydon> they updated it but apparently didn't test
[18:01:24] <strcat> graydon: sounds like github! :P
[18:01:46] <strcat> graydon: if you contact them via the web interface they respond quickly
[18:02:05] *** Joins: btipling (btipling@moz-E36F67E7.hfc.comcastbusiness.net)
[18:02:16] <graydon> this is the ghi author
[18:02:19] <strcat> oh
[18:02:39] <strcat> is ghi just a wrapper around the API?
[18:02:43] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[18:03:04] * pcwalton sighs at the reddit comments
[18:03:16] <pcwalton> "I wish Rust had array bounds checking"
[18:03:25] <strcat> pcwalton: which thread?
[18:03:32] <pcwalton> http://www.reddit.com/r/programming/comments/1cy96j/a_taste_of_rust/
[18:03:34] <graydon> apparently ghi cannot be installed the way they recommend anymore
[18:03:36] <pcwalton> that's my favorite comment
[18:03:37] <graydon> good good
[18:03:47] <strcat> graydon: could you use hub instead? dunno how complete it is
[18:03:50] <graydon> no
[18:04:56] *** Joins: bheylin (brianheyli@19ECE74C.9AD43CA9.BEE6354E.IP)
[18:05:02] <strcat> pcwalton: heh the person who responded to my comment there deleted it
[18:05:10] <Jesse> graydon: having both maturity milestones and prediction milestones be "milestones" means a bug can't have both. (so an important bug can't be marked as "i think i'll fix this for 0.7".) should one set become tags instead?
[18:05:22] * strcat has a message about a reply though ;p
[18:05:52] <graydon> Jesse: you can move it back from the 0.7 queue to the appropriate maturity milestone if you're not going to make it in 0.7
[18:06:02] <graydon> I don't think it's likely to be a major source of struggle
[18:06:25] <pcwalton> strcat: the comment that Rust is C++ "untouched" really annoyed me
[18:06:41] <pcwalton> clearly all languages that have more concepts than Go are as complex as C++
[18:06:56] <Jesse> graydon: oh, i didn't realize you could borrow from maturity into prediction. i guess that works until we're close to some maturity milestone.
[18:07:14] <graydon> yeah
[18:07:48] *** Quits: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net) (Quit: jorendorff)
[18:08:43] *** Quits: dew (Instantbir@moz-EBC2DF0B.dhcp.stls.mo.charter.com) (Ping timeout)
[18:09:24] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[18:10:44] <strcat> pcwalton: that comment isn't written by someone who knows C++ anyway
[18:10:51] <spider-mario> ha ha, Go.
[18:11:04] <spider-mario> sorry, that was uncalled for.
[18:11:38] <strcat> people like bashing C++, perl, etc. without realizing that they do a lot right
[18:11:49] <pcwalton> yeah, I've learned that over the years.
[18:12:01] <pcwalton> we liked to bash C++ in the early days until realizing there were a lot of reasons behind its design
[18:12:09] <pcwalton> as we hit the same problems in Rust :)
[18:12:21] <pcwalton> they had backwards compatibility to deal with
[18:12:22] <strcat> they do a great job considering they have backwards compatibility with a language from 1970
[18:12:24] <strcat> ;p
[18:12:40] <spider-mario> the main thing I wish more languages borrowed from C++ is the RAII idiom
[18:12:51] <spider-mario> Rust and Perl do
[18:12:55] <spider-mario> and I‚Äôm glad about that. :)
[18:13:13] <strcat> and a lot of stuff wasn't nearly as well fleshed out when they introduced it
[18:13:19] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[18:13:32] <spider-mario> as for perl, I like how it handles lexical scoping
[18:13:35] <pcwalton> they should have done move semantics earlier and had a linear type system, but linear types weren't really studied well yet
[18:13:47] <spider-mario> it‚Äôs a reason why I usually prefer it over python and ruby
[18:13:50] <benh> I'm not a fan of languages that eschew RAII in favor of this withSomeResource(closure goes here) pattern
[18:13:58] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[18:14:22] <strcat> pcwalton: well move semantics were done earlier by boost - standardizing stuff is just hell :)
[18:14:34] <pcwalton> well, they have to run the dtor unconditionally
[18:14:46] <pcwalton> (we do too but I'd like to fix it)
[18:14:48] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[18:14:52] <pcwalton> before the language ships
[18:14:56] <pcwalton> they can't really change that at this point
[18:15:13] <strcat> pcwalton: well, the C++11 move constructor is responsible for putting the rvalue in a state where calling the destructor is okay
[18:15:21] <pcwalton> right
[18:15:22] <pcwalton> that's perf overhead
[18:15:54] <pcwalton> I'd love it if we could eliminate that perf overhead in Rust
[18:16:17] <pcwalton> we're close, just need to implement the pass that rejects programs that don't have deterministic destruction
[18:16:30] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[18:17:08] * strcat has the fun job of rebuilding 20 haskell packages for ghc 7.6.3
[18:17:16] <strcat> thanks pandoc ;P
[18:17:44] <spider-mario> pandoc is in arch linux‚Äôs official packages, now
[18:17:45] <spider-mario> \o/
[18:17:57] <strcat> spider-mario: yeah I packaged it. ;p
[18:17:59] <spider-mario> still ghc 7.6.2, though
[18:18:03] <spider-mario> thanks a lot. :D
[18:18:06] <strcat> spider-mario: rebuild is in staging :)
[18:18:13] <strcat> https://www.archlinux.org/todo/ghc-763-rebuild/ dunno if that link is public
[18:18:27] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[18:18:28] <spider-mario> whoa, that was quick. thanks. \o/
[18:19:05] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:19:06] *** ChanServ sets mode: +o brson
[18:19:06] *** Joins: dew (Instantbir@moz-EBC2DF0B.dhcp.stls.mo.charter.com)
[18:19:12] *** Quits: SimonSapin (simon@moz-58CD503D.fbx.proxad.net) (Ping timeout)
[18:19:50] * strcat only uses it for rustdoc :P
[18:20:56] *** Quits: FluffySauce (textual@moz-E5BC5F6F.sea.popcap.com) (Quit: Computer has gone to sleep.)
[18:21:33] <bstrie> pcwalton: try to not concern yourself with negative comments from people who've never used this language :)
[18:21:48] <bstrie> my favorite is this gem from #go-nuts: "rust makes me feel sick"
[18:22:03] <pcwalton> heh
[18:22:28] <mcpherrin> bstrie: sick from too much fun on the roller coaster? ;-)
[18:22:47] <bstrie> mcpherrin: let's assume good faith and say yes :D
[18:23:06] <cmr> As a newbie my first impression of rust is "omg so many foreign concepts", especially as I've never studied type systems etc.
[18:24:29] <bstrie> cmr: I can't be sure if that's a compliment or an insult :)
[18:24:49] <SiegeLord> Psh, language details don't matter as much as the ecosystem... I'm glad Rust devs have their priorities straight regardless if I agree with the minor decisions here and there
[18:24:51] <cmr> Neither. It's just a lot to handle. It /seems/ nice, but I haven't found the limits of the language yet.
[18:28:45] *** Joins: graham_king (graham_kin@moz-61791D81.vc.shawcable.net)
[18:29:41] <strcat> I should probably have set up a gpg agent by now
[18:29:48] <strcat> after typing my key passphrase 50 times
[18:30:00] <strcat> ;p
[18:31:40] <graham_king> Where would I find documentation for "times", as in 10.times ?
[18:31:59] <pcwalton> graham_king: I think it's defined on one of the numeric traits
[18:32:02] <kimundi> graham_king: Its a trait in iter
[18:32:13] <kimundi> iter::Times
[18:32:30] <graham_king> Thanks!
[18:32:42] <kimundi> strcat: Seems there are at least two usable things in iter.rs after all ;)
[18:33:03] * strcat is going to kill the rest soon
[18:33:08] <strcat> well, replace :)
[18:33:54] <kimundi> brson: ping
[18:34:27] <brson> kimundi: pong
[18:35:06] <kimundi> brson: nmatsakis said I can ask you about details of the unwinding process?
[18:35:10] *** Joins: eholk_ (eholk@FD6A88D9.7EDA02CF.51B6877.IP)
[18:35:26] <brson> kimundi: yes
[18:35:55] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[18:36:15] <kimundi> I'm trying to understand what exactly happens in the call to sys::begin_unwind in regard to the two owned strings that get passed in
[18:37:29] <brson> kimundi: at the moment the get printed right before unwinding and freed during unwinding
[18:37:45] <kimundi> I see that they get passed as c_char pointers to begin_unwind_, from there to rustrt::rust_upcall‚Ä¶fail, but I'm not sure where and how they get freed
[18:38:03] *** Joins: eholk__ (eholk@FD6A88D9.7EDA02CF.51B6877.IP)
[18:38:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:38:13] *** Quits: eholk_ (eholk@FD6A88D9.7EDA02CF.51B6877.IP) (Connection reset by peer)
[18:38:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/sLgesA
[18:38:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:38:52] <kimundi> brson: So, the c++ coda reads the chars, prints their content, and then unwinding happens, which frees the two ~str on their own when thw two str::as_buf calls unwind?
[18:39:38] <brson> kimundi: yes, the strings remaining owned by the stack while unsafe pointers get passed to the logger. during unwinding the strings get freed as normal
[18:40:02] <kimundi> so, in theory that could be arbitrary slices?
[18:40:13] <kimundi> instead owned strings?
[18:41:00] <kimundi> or is there a way memory could get freed to soon that way
[18:41:05] <strcat> brson: would it be possible to have failure use ~Trait instead of ~str?
[18:41:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:41:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/EygUDQ
[18:41:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:41:21] <strcat> hmm
[18:41:23] <tahseen> tertiary expression?
[18:41:26] <strcat> I guess that's not useful anyway
[18:41:27] <brson> kimundi: it could, but the intent has always been to propagate that exception object to whetever task cares about the result
[18:41:37] <kimundi> tahseen: You can use if as a expression
[18:41:38] <brson> strcat: we've discussed making it an ~Any object
[18:42:50] <kimundi> brson: I was looking into letting it accept either ~str or &'static str and noticed that it doesn't seem to want to own it, so I asked
[18:43:00] *** Quits: Blub\w (wry@moz-D23C1F55.wireless.dyn.drei.com) (Quit: WeeChat 0.4.0)
[18:43:12] <brson> kimundi: understood. it would be nice to be able to fail without allocating
[18:44:00] <brson> which it can now in certain situations, in practice, of course, but conceptually every failure requires a ~str
[18:44:46] <strcat> that seems like it would be part of making rust more embedded friendly too
[18:46:33] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Quit: Leaving.)
[18:46:42] <kimundi> brson: How about this: I make it so that fail uses an Failure trait that consumes the argument, and that provides a c_char ptr for the unwinding function
[18:47:12] <strcat> I don't think a trait would be useful
[18:47:17] <strcat> you'd have to use ~Trait
[18:47:25] <strcat> and then you wouldn't be able to get the object from it
[18:47:32] *** Joins: mib_2r4s8r (Mibbit@22DBF387.5125B28D.3845F3F2.IP)
[18:47:34] <brson> and requires an allocation
[18:47:41] <kimundi> brson: It would be implemented for ~str and &'static initially
[18:47:50] <brson> maybe a Failure enum that contains a few options
[18:47:53] <strcat> C++ exceptions use a class with a 'what' virtual method
[18:48:05] <strcat> but you can catch them as a specific class instead of the base class - no idea how that magic works
[18:48:31] <kimundi> brson: Also for context if you didn't see it, I had made a post to the ML
[18:48:58] <brson> kimundi: I have not seen it yet, no
[18:48:59] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[18:49:09] <strcat> brson: could rust just provide an API like C++ where the task spawning API lets you catch only a specific failure object type?
[18:49:13] *** Quits: mib_2r4s8r (Mibbit@22DBF387.5125B28D.3845F3F2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:49:27] <strcat> don't know how you'd make it generic though
[18:50:45] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[18:51:14] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[18:52:39] <brson> strcat: i guess that would be downcasting from an ~Any, which would need to be possible for ~Any to be useful
[18:53:53] *** Joins: seth (seth@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net)
[18:55:02] <brson> I think we should could start with something less dynamic, vaguely like `enum FailSpec(ExnObject, &'static str, uint, Option<Backtrace>); enum ExnObject { StaticStrExn, UniqueStrExn }`
[18:55:12] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:59:37] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:00:30] *** Quits: eholk__ (eholk@FD6A88D9.7EDA02CF.51B6877.IP) (Quit: eholk__)
[19:01:45] *** Joins: catpig (catpig@moz-5788CCC.dip0.t-ipconnect.de)
[19:02:07] *** Quits: danl (uid11132@moz-D8B63698.irccloud.com) (Quit: Connection closed for inactivity)
[19:02:07] *** Quits: danl_ (uid11132@moz-C944F5EC.irccloud.com) (Quit: Connection closed for inactivity)
[19:06:11] <kimundi> brson: Could this be useful as a steping stone? https://gist.github.com/Kimundi/b40219ba86a8f6d6e782
[19:07:26] <kimundi> At least for solving the 'make fail!() accpt both owned ant static strings' part
[19:09:05] <kimundi> An Exceptiony object could then implement that to initiate failure with what ever additional data it has
[19:09:25] * strcat doesn't really think 'float' is useful
[19:09:41] <strcat> if f32 is enough, it seems like you'd just use f32 on every platform
[19:10:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:12:11] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[19:12:16] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:15:38] <brson> kimundi: yes that looks reasonable
[19:16:00] <kimundi> brson: Great, gonna try to build that in then :)
[19:16:01] *** Joins: jviereck (Adium@3DA8E105.D483D23B.172227A7.IP)
[19:16:03] <Jeaye> strcat: It's sure misleading!
[19:16:11] *** Quits: jviereck (Adium@3DA8E105.D483D23B.172227A7.IP) (Client exited)
[19:16:26] <Jeaye> I ran into some nasty GL bugs, thinking float was 32bits when I was starting off.
[19:16:30] <jack> how do you get a stack trace from a specific assert failure?
[19:16:44] <strcat> jack: you can catch failures with gdb
[19:16:50] <strcat> sec
[19:17:11] <strcat> there's no built-in yet afaik
[19:17:17] *** Quits: pyrac (pyrac@moz-B72E3FAF.w109-222.abo.wanadoo.fr) (Quit: pyrac)
[19:17:23] *** Quits: engla (engla@moz-E4A8CEF5.customer.cdi.no) (Ping timeout)
[19:17:23] <strcat> should be possible to plug something into the unwinding code (if it's not already)
[19:17:30] *** Joins: engla (engla@moz-E4A8CEF5.customer.cdi.no)
[19:18:08] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:18:12] <brson> reliable backtraces on all platforms would be a great contribution
[19:18:28] <brson> some function you can call in core to get a backtrace
[19:19:09] <tahseen> https://github.com/mozilla/rust/blob/master/src/libstd/base64.rs why FromBase64 is unsafe filled got no clue
[19:19:09] <jack> doh
[19:20:05] <kimundi> brson: This would also make the begin_unwind function unnecessary, should I remove it completly?
[19:20:14] <strcat> tahseen: it's not unsafe in incoming
[19:20:26] <strcat> it was a workaround for 'pure' which is gone now
[19:21:18] <kimundi> btw, someone needs to go through that patch that added the uinnecessary unsafe warnings and check if any other unsafe functions got declared as safe
[19:21:27] *** Joins: jviereck (Adium@3DA8E105.D483D23B.172227A7.IP)
[19:21:50] <kimundi> I know I reverted two in str::raw, but there are probably more
[19:22:07] <pcwalton> jclements: https://gist.github.com/pcwalton/5454788
[19:22:07] *** Quits: jviereck (Adium@3DA8E105.D483D23B.172227A7.IP) (Quit: Leaving.)
[19:22:36] <jack> strcat: what do i break on to catch the failure?
[19:23:39] *** Joins: pyrac (pyrac@moz-B72E3FAF.w109-222.abo.wanadoo.fr)
[19:24:32] *** Quits: eholk (eholk@moz-29801C4.osl.iu.edu) (Quit: eholk)
[19:24:38] <brson> kimundi: i would suggest modifying begin_unwind to take an <F: Failure> and continuing to call the function from `fail!` and from the `fail_*` lang items. It also makes sense to me to change the lang items to take `&'static str` instead of *c_char
[19:24:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:24:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:25:03] <strcat> jack: upcall_rust_personality
[19:25:05] <strcat> maybe
[19:25:20] <brson> jack: upcall_rust_fail, or rust_task_fail
[19:25:47] <brson> upcall_rust_personality will only be called after unwinding starts I think
[19:26:46] <kimundi> brson: I just put ::core::sys::Failure::fail_with($msg, file!(), line!()) in the macro definition, but I can also reuse unwind
[19:27:10] <jack> trust_task_fail doesn't work. says it cannot access memory or something
[19:27:23] <kimundi> wait, fail langitems?
[19:27:37] <kimundi> those I didn't know about ._.
[19:28:27] <brson> kimundi: ok, that's fine
[19:28:50] <kimundi> putting that line in the macro?
[19:28:54] *** dherman is now known as dherman-lunch
[19:28:58] <brson> kimundi: yes
[19:29:02] <kimundi> okay
[19:29:16] <brson> kimundi: yes, the compiler generates calls to begin_unwind indirectly through lang items in unstable/lang.rs
[19:29:21] <jack> upcall_rust_fail gets me no stack. so the personality one at least has a stack, even if it's got lots of unwinding.
[19:29:33] <kimundi> ah, there to look
[19:29:48] <strcat> upcall_rust_personality seems to be the one used to start unwinding
[19:29:55] <strcat> so that's what you want to get a stack trace with bt 
[19:30:16] <Luqman> what's the order of upcall_rust_fail, upcall_fail, upcall_rust_personality etc?
[19:30:31] * strcat just looked at the LLVM IR
[19:30:53] <brson> upcall_fail -> rust_upcall_fail -> rust_task_fail -> lots of calls to upcall_rust_personality during unwinding
[19:31:07] <brson> actually, I don't know what 'upcall_fail' is
[19:31:08] <strcat> brson: is it possible those get inlined now?
[19:31:13] <strcat> I don't see them
[19:31:33] <brson> strcat: i'm not sure what you are referring to
[19:31:43] *** Joins: dysoco (dysoco@moz-CC191D68.telecom.net.ar)
[19:31:43] <strcat> upcall_fail, etc.
[19:33:03] <brson> strcat: rust_upcall_fail and rust_task_fail are definitely not inlined. rust_upcall_fail is in rustrt and called by begin_unwind from core
[19:33:28] <dysoco> Is the 0.6 .tar.gz a binary or the sources ?
[19:34:05] <graham_king> dysoco: The sources.
[19:34:16] <dysoco> So I'm better of cloning the Git repo then ?
[19:34:34] <brson> kimundi: maybe we can use a name other than `Failure`. It's a little generic for my tastes. A type that implements this trait is one that can be used as a failure message or exception object
[19:35:10] <graham_king> dysoco: github says "The Rust compiler currently must be built from a tarball", and "tarball" links to 0.6 tar.gz
[19:35:14] <kimundi> FailureInitiator? FaulireMessenger?
[19:35:20] <dysoco> Ah I see
[19:35:21] <graham_king> But this is my first day of Rust, so I don't really know :-)
[19:35:43] <kimundi> graham_king: Just skip it and compile from source :P
[19:36:18] <kimundi> dysoco: ^ from git source I mean
[19:36:24] <dysoco> ah
[19:36:29] <graham_king> thanks kimundi
[19:36:34] <tahseen> https://github.com/mozilla/rust/blob/master/src/libstd/base64.rs why FromBase64 is unsafe filled got no clue
[19:37:00] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[19:37:01] <kimundi> tahseen: As said earlier, in incoming it isn't anymore
[19:37:22] <kimundi> tahseen: If you browse the source, browse the source of incoming :P
[19:37:26] <tahseen> hmm :)
[19:37:28] <tahseen> ok I will
[19:37:46] <tahseen> there's no real trouble running with the incoming is three?
[19:38:17] <strcat> no, in fact incoming is going to go away and become master soon
[19:38:20] <kimundi> No, we're currently valgrind unclean, but thats just a false positive
[19:38:39] <kimundi> ah, right, thank god for that xD
[19:38:52] <dysoco> I guess this is going to take a while to compile?
[19:38:57] <cmr> dysoco: yup
[19:39:01] <kimundi> dysoco: Yup
[19:39:06] <dysoco> aw :(
[19:39:10] <dysoco> I still remember compiling Mozilla
[19:39:11] <dysoco> ugh
[19:39:13] <kimundi> dysoco: Especially llvm
[19:39:18] <strcat> LLVM takes a long time, and then rust takes 15-30 minutes
[19:39:20] <cmr> Mostly llvm :p
[19:39:25] <strcat> and then the tests take another 15-30 minutes
[19:39:30] <dysoco> Can't I just like... get a llvm binary and compile Rust with that ?
[19:39:31] <strcat> if you run make check
[19:39:41] <kimundi> dysoco: Nope, not atm
[19:39:57] <kimundi> dysoco: Some patches rust depends on
[19:40:05] <dysoco> Worst thing about this is that I'll probably just change distro and delete everything next week.
[19:40:13] <dysoco> like all months
[19:40:55] <strcat> well change to one with rust in the official repos ;p
[19:40:56] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[19:41:15] <bstrie> dysoco: indeed, if you switch to arch maybe strcat will be kind enough to set up a daily incoming binary :)
[19:41:45] <dysoco> strcat, Or I can just change to Gentoo and I'd have to compile everything anyways.
[19:41:51] <dysoco> bstrie, eww... Arch.
[19:43:12] <kimundi> rusti: assert!(false)
[19:43:13] <rusti> rust: task failed at 'assertion failed: false', foo.rs:4
[19:43:13] <rusti> rust: domain main @0x23599c0 root task failed
[19:43:25] <kimundi> rusti: fail!()
[19:43:26] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/eeaX
[19:43:38] <kimundi> rusti: fail!(~"foo")
[19:43:39] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/aMAF
[19:43:48] <kimundi> rusti: assert!(false, "foo")
[19:43:49] <rusti> rust: task failed at 'assertion failed: foo', foo.rs:4
[19:43:49] <rusti> rust: domain main @0x16369c0 root task failed
[19:44:43] <friggle> strcat: I didn't time it, but the rust part seemed to take longer for me. More parallelism available in the llvm build
[19:45:10] <strcat> friggle: well LLVM has a dependency tree that lets make -j works
[19:45:12] <strcat> work*
[19:45:21] <tahseen> well off to sleep ... my compact base64 encoding is done if not as performant as the official one. Thanks everyone, had a lot of fun coding this few lines :)
[19:45:57] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Quit: Leaving)
[19:46:03] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[19:46:42] *** Joins: akashj87_ (akash@AD8413D5.7FACFDC5.35E3DDC8.IP)
[19:47:31] <bheylin> i've a compiler crash on a definition: fn index_mut(&mut self, i: uint) -> &'self mut T;
[19:47:48] *** Quits: akashj87 (akash@9504AABD.6A9BF87A.35E3DDC8.IP) (Ping timeout)
[19:47:56] <strcat> bheylin: what's the full code snippet that causes it?
[19:48:18] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:49:08] *** Joins: nestos (nestos@moz-B2376310.home.otenet.gr)
[19:49:30] <bheylin> strcat: https://gist.github.com/brianheylin/5455000
[19:49:38] *** Quits: tahseen (tahseen@1EB0780D.9ECDA801.C523362B.IP) (Quit: Leaving)
[19:49:57] <bheylin> strcat: from the lmath lib of bjz_ 
[19:50:14] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:50:17] <strcat> bheylin: well it should be a proper error message, but it's happening because the code is invalid
[19:50:26] <strcat> needs BaseVec<'self, T>
[19:52:26] *** Quits: jdm (jdm@941349F4.F58C7D4D.F945DA.IP) (Quit: Lost terminal)
[19:53:27] <graham_king> In the Tutorial, the first occurence of the word "tuple" is: "Remember that (float, float) is a tuple of two floats"
[19:53:31] *** Quits: echristo (echristo@D0D26911.648B0C34.5EFB9497.IP) (Quit: echristo)
[19:53:41] <bheylin> strcat: still the same error with BaseVec<'self, T>
[19:53:44] <graham_king> Is there somewhere to file documentation 'bugs'?
[19:54:00] <bstrie> graham_king: I thought that had been fixed
[19:54:09] <strcat> bstrie: but not in master
[19:54:11] <strcat> only in incoming
[19:54:14] <strcat> docs are generated from master
[19:54:19] <graham_king> ah, no worries then
[19:54:59] <kimundi> graham_king: Just fill issues on rusts github page.
[19:55:10] <kimundi> graham_king: If you find something
[19:55:15] <graham_king> will do, thanks
[19:55:20] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[19:55:20] *** ChanServ sets mode: +qo graydon graydon
[19:55:40] <graydon> ugh. the entire ffi tutorial is xfailed
[19:55:48] <kimundi> graham_king: Search first if it already exists, but if you'r unsure better file a duplicate than miss a bug ;)
[19:55:55] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[19:55:58] <strcat> graydon: has to be because they aren't complete snippets
[19:56:13] <strcat> unless there's a way to include lines but not show them in the docs?
[19:56:19] <graydon> there's a mechanism in the docs for including lines and not showing them
[19:56:22] <strcat> oh
[19:56:30] <strcat> graydon: can you install libsnappy on the buildbots?
[19:56:36] <kimundi> strcat: put a # in front
[19:56:46] <graydon> some. maybe.
[19:57:01] <graydon> ideally it should use a library they already have. libc is best. 
[19:57:04] <graydon> since users will copy and paste code
[19:57:06] <graydon> as they read
[19:57:08] <graydon> and try it
[19:57:20] <strcat> graydon: yeah but I wanted a library with non-trivial stuff
[19:57:22] <graydon> (as I was informed at lunch)
[19:57:25] <strcat> libc just has bsearch and qsort
[19:57:41] <graydon> ("when I try copying stuff from your tutorial and running it, it doesn't work" is pretty bad)
[19:57:45] *** Joins: eholk (eholk@moz-BC45841.public.wayport.net)
[19:57:54] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:58:12] <graydon> https://en.wikipedia.org/wiki/C_standard_library has a fair amount
[19:58:26] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[19:58:26] <friggle> strcat: why not zlib?
[19:58:41] <strcat> graydon: I mean with buffers though
[19:58:44] <strcat> and not varargs
[19:59:01] <graydon> memmove?
[19:59:19] <kimundi> rusti: fail!(fmt!(\"left: %? != right: %?\", [1, 2], [3]))
[19:59:19] <strcat> I guess
[19:59:20] <rusti> foo.rs:5:19: 5:20 error: unknown start of token: 92
[19:59:20] <rusti> foo.rs:5          fail!(fmt!(\"left: %? != right: %?\", [1, 2], [3]))
[19:59:20] <rusti>                             ^
[19:59:24] <graydon> asctime?
[19:59:29] <kimundi> rusti: fail!(fmt!("left: %? != right: %?", [1, 2], [3]))
[19:59:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SXLV
[19:59:43] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[20:00:01] <graydon> I'm sorry, don't mean to be too critical; just a bit disappointed. more disappointed in myself for not getting rid of incoming yet, such that master docs aren't updated :(
[20:00:19] <kimundi> rusti: fail!(fmt!("left: %? != right: %?", [1, 2], [3]));
[20:00:20] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FVUI
[20:00:29] *** Quits: idkfa (idkfa@1E91E04B.E303FFCA.57CB7914.IP) (Quit: Leaving)
[20:00:37] <kimundi> rusti: fmt!("left: %? != right: %?", [1, 2], [3])
[20:00:38] <rusti> ~"left: [1, 2] != right: [3]"
[20:00:48] <kimundi> rusti: print(fmt!("left: %? != right: %?", [1, 2], [3]))
[20:00:49] <rusti> left: [1, 2] != right: [3]
[20:01:10] <kimundi> Who here thinks ^ is better than
[20:01:25] <kimundi> rusti: assert_eq([1,2],[3])
[20:01:26] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/NiLI
[20:01:35] <kimundi> rusti: assert_eq!([1,2],[3])
[20:01:36] <rusti> rust: task failed at 'expected: [3], given: [1, 2]', foo.rs:4
[20:01:36] <rusti> rust: domain main @0xc089c0 root task failed
[20:02:06] <strcat> kimundi: yes that's probably better
[20:02:32] <kimundi> maybe I should remove the left and right words too
[20:02:43] <kimundi> rusti: print(fmt!("%? != %?", [1, 2], [3]))
[20:02:44] <rusti> [1, 2] != [3]
[20:03:07] <kimundi> that as failure message in an assert_eq clear enough?
[20:05:03] <kimundi> nah, gonna keep them. seems clearer with them somehow
[20:05:07] *** Quits: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[20:05:13] *** Joins: bent_ (chatzilla@F2D29657.F60B0462.67AC9B1.IP)
[20:05:21] *** bent_ is now known as bent
[20:06:16] *** Quits: dysoco (dysoco@moz-CC191D68.telecom.net.ar) (Client exited)
[20:06:46] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[20:07:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:08:24] <bstrie> graydon: does the triage bot also select from old pull requests? some of these requests are four months old...
[20:08:41] <graydon> some of which requests?
[20:08:58] <graydon> it's not supposed to be including pull reqs. oh, but then I had to switch it to use github.py, so maybe it is..
[20:09:30] <bstrie> graydon: https://github.com/mozilla/rust/pull/4342 and https://github.com/mozilla/rust/pull/4356
[20:09:37] <graydon> it assigned those to you?
[20:10:03] <bstrie> graydon: no, I'm asking if the bot *does* look at those
[20:10:06] <bstrie> because I think it should :)
[20:10:18] <graydon> I think it does if they're the oldest not-updated issues
[20:10:28] <graydon> it'll take a while to get to them though
[20:10:39] <graydon> those pull reqs are lingering because both of us are overloaded :(
[20:10:56] <kimundi> hmmm... writing unit test for correct failure is somewhat ricy ...
[20:11:05] <kimundi> tricky*
[20:11:08] *** Joins: AutomatedTester (automatedt@3EB32A7C.10A53EE3.77834EAA.IP)
[20:11:36] <AutomatedTester> hi, I have a silly question, how does one convert a string to a vector?
[20:12:23] <bstrie> AutomatedTester: try "asdf".to_bytes()
[20:13:23] <AutomatedTester> bstrie: I am trying to get a vector of chars
[20:13:30] <AutomatedTester> and I tried .to_chars()
[20:13:44] *** dherman-lunch is now known as dherman
[20:13:46] <AutomatedTester> but its saying that the method doesnt exist
[20:13:57] <bstrie> AutomatedTester: ah, I see
[20:13:57] <engla> the real way to do it would be to .encode  the str into a particular encoding (but this is not implemented yet I think)
[20:14:07] <bstrie> AutomatedTester: try str::to_chars("asdf")
[20:14:19] <bstrie> AutomatedTester: not all the functions in the libs are converted to methods yet :)
[20:14:38] <AutomatedTester> bstrie: ahhh thats what I wanted!!!
[20:14:45] <bstrie> AutomatedTester: these functions were usually written back before methods existed, even
[20:14:58] <strcat> engla: partially implemented, at least to/from ascii ;P
[20:15:08] <strcat> and to/from utf32
[20:15:10] <bstrie> it should indeed eventually be possible to do "asdf".to_chars()
[20:15:17] <bstrie> in fact, I think I even assigned that bug to myself
[20:16:02] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[20:16:13] <AutomatedTester> bstrie: cool, I didnt realise I needed to use it straight from the module
[20:16:54] *** Joins: CarpNet (alasdair@moz-EF831A5E.cable.virginmedia.com)
[20:16:55] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:17:14] <AutomatedTester> awesome, getting a little further
[20:17:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:18:03] *** Quits: gareth0 (gareth0@moz-449088ED.dynamic.dsl.as9105.com) (Quit: Leaving)
[20:19:38] <bstrie> AutomatedTester: are you, by chance, working on automatic testing for rust code?
[20:19:43] <bstrie> just a wild guess
[20:19:56] <AutomatedTester> bstrie: no :)
[20:20:31] <AutomatedTester> bstrie: in my spare time I am trying to see if I can make a library to drive Firefox
[20:20:48] <AutomatedTester> bstrie: I work on the ATeam on browser automation frameworks
[20:21:02] <AutomatedTester> so seeing if I can port one of the libraries
[20:21:09] <bstrie> sounds neat
[20:21:16] *** Joins: diegoyam_ (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[20:21:42] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[20:23:01] <AutomatedTester> bstrie: is there the idea of interfaces in rust
[20:23:10] <engla> strcat: which one of those is to_bytes?
[20:23:21] <strcat> engla: none
[20:23:25] <engla> it's probably to utf-8 right?
[20:23:27] <bstrie> AutomatedTester: yes, here they are called "traits"
[20:23:32] <AutomatedTester> aha
[20:23:33] <strcat> engla: str is already utf-u
[20:23:35] <strcat> utf-8
[20:23:39] <strcat> to_bytes is basically a no-op
[20:23:55] <engla> fine
[20:24:02] <bstrie> AutomatedTester: they have similarities to both java interfaces and haskell typeclasses, if you're familiar with either
[20:24:07] <strcat> converting from bytes actually has to check for validity though
[20:24:15] <AutomatedTester> bstrie: i know java
[20:24:22] <strcat> and I don't think it does it properly
[20:24:24] <strcat> :(
[20:24:39] <AutomatedTester> bstrie: one of the things I want to do is build a role based system of the lib
[20:25:27] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[20:25:27] *** ChanServ sets mode: +o tjc
[20:25:38] <strcat> AutomatedTester: traits can be used as parametric polymorphism (type classes, static dispatch) or as objects (like java interfaces - using vtables)
[20:25:38] *** Joins: skchrko (sk@61A494B3.BA40E8A.AAC02D62.IP)
[20:25:45] <graydon> github dird
[20:25:47] <graydon> died
[20:26:08] <bstrie> AutomatedTester: the twist on traits over java interfaces is that you can use traits to restrict your generics. so if you have a function where you want to accept all types that implement the "Fooable" interface, you say `fn foo<T: Fooable>(my_foo: T) {`
[20:26:34] <strcat> bstrie: that's not comparable to java generics though
[20:26:42] <strcat> only using them as objects is
[20:27:03] <bstrie> strcat: back when I wrote java I was mystified by generics and refused to use them :P
[20:27:09] <bstrie> this was back in high school, mind you...
[20:29:48] <graham_king> type erasure caused me no end of toruble
[20:30:21] <graham_king> in Java
[20:31:37] <kimundi> strcat: could you give another r+ on the ascii pr? Somehow I introduced a merge error, had to rebase
[20:31:49] <strcat> sec
[20:32:01] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[20:34:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:34:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/EygUDQ
[20:34:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:34:50] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:34:50] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/GypwmQ
[20:34:50] <ghrust> 13rust/06auto 14dd74807 15Marvin L√∂bel: Removed ascii functions from other modules...
[20:34:50] <ghrust> 13rust/06auto 143759b57 15Marvin L√∂bel: Fixed typo... And a billion other things.
[20:34:51] <ghrust> 13rust/06auto 14ee3789b 15bors: auto merge of #6029 : Kimundi/rust/ascii-encoding, r=thestinger...
[20:34:53] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:37:09] *** Joins: echristo (echristo@moz-95318683.virtual1.co.uk)
[20:38:30] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[20:38:37] <kimundi> HM, things I always wonderd: What are those stray comments for I sometimes encounter at the end of source files?
[20:38:54] <kimundi> / Local Variables:
[20:38:54] <kimundi> / mode: rust;
[20:38:54] <kimundi> / fill-column: 78;
[20:38:54] <kimundi> / indent-tabs-mode: nil
[20:38:55] <kimundi> / c-basic-offset: 4
[20:39:02] <kimundi> that stuff
[20:39:26] *** Quits: pyrac (pyrac@moz-B72E3FAF.w109-222.abo.wanadoo.fr) (Quit: pyrac)
[20:39:46] *** Quits: btipling (btipling@moz-E36F67E7.hfc.comcastbusiness.net) (Quit: Computer has gone to sleep.)
[20:40:09] <SiegeLord> I think it's a vim thing
[20:40:43] <friggle> those are emacs commands
[20:40:54] <friggle> the vim equivalents are much more terse :)
[20:40:54] <rpearl> yeah, that's emacs, not vim
[20:41:16] <SiegeLord> I find them annoying regardless of how terse they are :P
[20:42:01] <rpearl> just cause your editor to hide them?
[20:42:31] <kimundi> rpearl: something like that doesn't belong in a source file anyway
[20:42:37] <bstrie> I'm sure there's an emacs command for that... :)
[20:42:38] <rpearl> they yield consistently-indented code from all contributors
[20:42:43] <rpearl> kimundi: why not?
[20:43:13] <kimundi> rpearl: Your editor choice should not cause commits on its own :P
[20:43:24] <rpearl> it does not cause commits on its own.
[20:43:33] <rpearl> i don't understand what you're saying?
[20:43:50] <kimundi> if it modifies the code just for the editor, it does
[20:43:54] <SiegeLord> It sure does... I've seen commits (not in Rust) that are just those configuration comments added to the end of the file
[20:43:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:44:47] <rpearl> kimundi: modelines are directives *for* the editor, added by *request*, not automatically inserted by the editor.
[20:44:52] <strcat> the ones in rust are all old afaik
[20:44:58] <rpearl> now, there may be stupid editor settings which cause said modeline to be emitted
[20:44:58] <kimundi> It's rust source, not ruste+emacs
[20:45:20] <rpearl> it's rust source with comments informing relevant editors how to indent appropriately
[20:45:28] <strcat> I'm sure emacs already detects the filetype from the .rs extension
[20:45:31] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[20:45:40] <strcat> the column limit is out-of-date now anyway
[20:45:43] *** Benvie1 is now known as Benvie_
[20:46:03] <rpearl> i mean i know there are very few rust projects, but for c{,++} it is nice to have a modeline, so that you automatically use the project's preferred style
[20:46:15] <rpearl> ie, tabs-vs-spaces, wrap column, etc
[20:46:23] <rpearl> this is definitely not the same for every project
[20:46:53] <friggle> there should really be a convention for searching parent dirs until a modeline def file is found
[20:47:02] <kimundi> rpearl: I just think that's something that should be one file in projectroot/etc, and not a comment at the end of each source
[20:47:11] <spider-mario> my projects‚Äô preferred style is ‚Äúno modeline‚Äù
[20:47:36] *** Joins: skinner (skinner@6E211B03.FE8B979F.432EAF84.IP)
[20:47:38] <rpearl> and that's fine, congrats?
[20:47:59] <mcpherrin> With bors doing style checks on commits, I think having modelines in files is a lot less important
[20:48:01] <rpearl> i agree that there should be a root modeline, but that's not currently a thing, is it?
[20:48:32] <kimundi> rpearl: thete are emacs mode ftles in rusts etc dir
[20:48:48] <kimundi> there* , files*
[20:49:06] <rpearl> great, but there isn't One True Style, if a project wants something else then... what?
[20:49:21] <pcwalton> graydon: did you see the link I pasted above? it's a list of LL(1) conflicts in the rust grammar
[20:49:34] <graydon> pcwalton: no, where?
[20:49:42] <pcwalton> graydon: https://gist.github.com/pcwalton/5454788
[20:49:51] <pcwalton> a lot of them (maybe all? most?) can go away with refactoring of the grammar
[20:50:20] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[20:50:30] <graydon> yeah, I think there's a lot of replication in there..
[20:50:32] <graydon> how did you get that?
[20:50:53] <pcwalton> converted the ANTLR grammar (minus token regexes) to Yapps2
[20:50:53] <bstrie> that's really cool
[20:51:05] <pcwalton> http://theory.stanford.edu/~amitp/yapps/#yapps2
[20:51:19] <bstrie> pcwalton: you mean refactoring of the formal grammar specification, or actual visible changes to the language itself?
[20:51:25] <pcwalton> the former
[20:51:40] <pcwalton> graydon: bstrie: https://gist.github.com/pcwalton/5455459
[20:51:55] <mcpherrin> Is LL(1) desired?  Seems like LALR(1) would be more practical.  (I've never used ANTLR so I dunno)
[20:52:11] <graydon> ok
[20:52:25] <graydon> mcpherrin: yes, LL(1) is desired
[20:52:28] <pcwalton> mcpherrin: I would love it if we could get both.
[20:52:51] *** Quits: nestos (nestos@moz-B2376310.home.otenet.gr) (Quit: Leaving)
[20:52:53] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[20:52:55] *** Joins: themgt (themgt@moz-12C18812.dhcp.gnvl.sc.charter.com)
[20:53:29] *** Quits: thou (thou@moz-D1EE62D4.sumnetsol.com) (Input/output error)
[20:53:37] *** Parts: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com) (Leaving)
[20:53:54] <bstrie> I don't suppose that one runs any faster at parsing rustc?
[20:54:06] <pcwalton> bstrie: might
[20:54:14] <pcwalton> graydon: also jclements and I had some ideas as to how to simplify the grammar (in particular removing some of the vexing expr 'restrictions')
[20:54:21] <pcwalton> probably without breaking any existing code
[20:54:35] <bstrie> would provide more peace of mind if any of these parsers actually finished parsing it :)
[20:54:36] <graydon> I expect many bits of the formal grammar are vestigial, yes
[20:54:54] <jclements> graydon: pcwalton: in the process of writing that e-mail, I'm struggling with some combination of grammar bugs and compiler bugs‚Ä¶ sorry to delay.
[20:54:56] <graydon> or close enough that tidying up the few cases that require them won't hurt code too much, and should be done
[20:54:59] <brson> pcwalton: r? https://github.com/mozilla/rust/pull/6046
[20:55:02] <pcwalton> heh, no problem
[20:55:18] <pcwalton> it would be nice for marketing to say that we're LL(1) :)
[20:55:43] <pcwalton> even C requires the lexer hack...
[20:56:26] <graydon> it's more than marketing. the more we restrict the grammar (and frontend in general), the easier external tooling will be.
[20:56:38] *** Joins: btipling (btipling@moz-E36F67E7.hfc.comcastbusiness.net)
[20:56:49] *** Quits: echristo (echristo@moz-95318683.virtual1.co.uk) (Ping timeout)
[20:56:49] *** Quits: bheylin (brianheyli@19ECE74C.9AD43CA9.BEE6354E.IP) (Ping timeout)
[20:57:31] *** Parts: graham_king (graham_kin@moz-61791D81.vc.shawcable.net) ()
[20:58:02] *** Joins: echristo (echristo@91BA60CD.BE529D01.5EFB9497.IP)
[20:58:02] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[20:59:22] *** Quits: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com) (Client exited)
[20:59:59] *** Joins: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com)
[21:02:48] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:04:11] *** Quits: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net) (Ping timeout)
[21:05:39] <pcwalton> ugh
[21:05:44] * pcwalton has to hack the pipes compiler again
[21:06:46] <kimundi> where is the deriving stuff defined?
[21:07:03] <kimundi> apparently that uses fail without the macro
[21:07:43] <pcwalton> kimundi: libsyntax/ext/deriving
[21:08:17] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[21:08:17] *** Quits: eholk (eholk@moz-BC45841.public.wayport.net) (Quit: eholk)
[21:08:22] <skinner> Hi #rust, I'm stuck on a "loan...conflicts with prior loan" error in this: https://gist.github.com/skinner/5455558
[21:08:41] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:08:42] <skinner> would appreciate advice about the error and/or overall approach to counting string occurrences
[21:09:19] <strcat> skinner: find_mut gives you an &mut loan, and that's a unique loan
[21:09:26] <strcat> you can't have any other & or &mut loans at the same time
[21:09:27] <pcwalton> skinner: this is a bug in the borrow checker (flow sensitivity)
[21:09:35] <strcat> pcwalton: I don't think so
[21:09:38] <strcat> well
[21:09:40] <pcwalton> yes
[21:09:40] <strcat> that will be a problem too
[21:09:54] <pcwalton> it should treat the "count" reference as no longer live
[21:10:00] <pcwalton> at the point of map.insert.
[21:10:03] <strcat> oh, right
[21:10:39] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:11:11] <skinner> thanks, is there a standard workaround?  am I fighting the idiomatic way to do things?  or should I just wait for the borrowck rewrite to land?
[21:13:04] <strcat> skinner: you're doing the right thing, that case should work
[21:13:29] <strcat> skinner: you can work around it by setting a bool flag
[21:13:46] <strcat> and doing the insert outside the block where the &mut exists - but then the &mut loan might conflict ;p
[21:13:52] <strcat> worth a try
[21:13:52] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:14:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:14:27] <skinner> strcat, pcwalton: Hmmm, will try, thanks for looking at it
[21:14:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[21:14:29] <bstrie> skinner: your code looks very nice, actually
[21:14:37] <strcat> I should add insert_or_update to the map interface
[21:14:45] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[21:15:00] <bstrie> skinner: though you can just use "println" instead of "io::println"
[21:15:04] <strcat> having to do 2 lookups isn't great
[21:15:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:15:47] <skinner> bstrie: thanks
[21:16:19] <skinner> strcat: I was wanting something like that, yeah.  Would it ever make sense to overload [] and have map["foo"] += 1?
[21:16:46] <strcat> skinner: it won't work in the current system
[21:17:02] <bstrie> strcat: would that ever work?
[21:17:20] <bstrie> rather, would it ever work without needing separate "IndexAddAssign", "IndexSubAssign" etc traits
[21:17:21] <strcat> well it might
[21:17:28] <strcat> no
[21:17:39] <bstrie> I guess you could derive those
[21:17:46] <strcat> how do you derive them?
[21:17:52] <pcwalton> I think we managed to make it work, just desugar into IndexAssign that returns a reference
[21:17:58] <strcat> m["foo"] would probably return &
[21:17:58] <pcwalton> make IndexAssign return a mut ref
[21:18:11] <pcwalton> and then the compiler generates the dereference and assignment
[21:18:29] <strcat> and I don't really mind that you're forced to handle the failure case
[21:18:37] <strcat> not that bad of a thing ;p
[21:18:55] <strcat> need more methods for doing efficient manipulations without many lookups though
[21:19:13] <strcat> atm there's just insert_or_replace as insert
[21:19:23] <strcat> need to be able to insert_if_missing, insert_or_update, etc.
[21:20:02] <strcat> a["foo"] = 1 will probably never work
[21:20:16] <strcat> C++ implements it by default-constructing a value for the key "foo"
[21:20:18] <strcat> which is awful
[21:20:32] <bjz> strcat mitsuhiko: https://mail.mozilla.org/pipermail/rust-dev/2013-April/003732.html
[21:20:35] <strcat> unless you just make it fail if the key is missing
[21:20:43] *** bhearsum is now known as bhearsum|afk
[21:21:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:21:06] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:21:08] *** Quits: btipling (btipling@moz-E36F67E7.hfc.comcastbusiness.net) (Quit: Computer has gone to sleep.)
[21:21:23] <skinner> strcat: ah, right, failure case :) good that the compiler make sure that you check, since I just forgot about it
[21:21:38] <strcat> you could just .unwrap()
[21:21:41] <strcat> to ignore it
[21:21:48] <strcat> I like that it's explicit in the caller though...
[21:21:54] <bjz> strcat: https://github.com/mozilla/rust/issues/5992 ?
[21:21:55] <strcat> ofc it's not for vectors ;p
[21:22:17] <strcat> bjz: yeah but that doesn't help for maps
[21:22:29] <bstrie> ah, sad. I'm so fond of foo["bar"] = 1 as a way of creating keys in hashmaps
[21:22:31] <strcat> it helps for bigints
[21:22:53] <strcat> bstrie: python has __setitem__
[21:22:54] *** Joins: thou (thou@moz-D1EE62D4.sumnetsol.com)
[21:23:24] <Ralith> bstrie: it's good to have allocation and assignment be distinct.
[21:23:45] <kimundi> who wrote auto_encode?
[21:23:49] <strcat> .insert() isn't distinct ;p
[21:23:49] *** Quits: Palmik (palmik@moz-C4A67A2D.pks.muni.cz) (Quit: Lost terminal)
[21:23:50] <bstrie> I agree, but scripting languages have spoiled me :)
[21:23:54] <bstrie> kimundi: erickt, maybe?
[21:24:28] <kimundi> ah, nevermind I just realised what I had to do
[21:24:43] <strcat> you would need Index, IndexAssign, IndexAddAssign, etc.
[21:25:01] <strcat> and it won't ever act like vectors
[21:25:13] <strcat> Index gives you a value, & or &mut on a custom type
[21:25:17] <strcat> on a vector, you can get any
[21:25:22] <strcat> a[0]
[21:25:25] <strcat> &a[0]
[21:25:29] <strcat> &mut a[0]
[21:25:32] * erickt perks up
[21:25:33] <strcat> dunno how you'd duplicate that.
[21:25:42] * graydon weeps at the div/mod/quot/rem thread
[21:25:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:25:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/GypwmQ
[21:25:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:25:58] <erickt> kimundi: Yeah, auto_encode is my baby
[21:26:21] <strcat> pcwalton: do you think we could get rid of 'float'? I don't think it has much of a purpose
[21:26:43] <strcat> pcwalton: if the code can use f32, I don't know why you wouldn't want f32
[21:26:50] <bjz> graydon: sorry if I messed thngs up :(
[21:26:55] <pcwalton> strcat: I think I pitched that in the past; graydon mentioned that CPU manufacturers were talking about moving to 128 bit floats
[21:26:56] <erickt> kimundi: It's supposed to get replaced with a deriving-based version whenever we make our next snapshot though
[21:27:06] <pcwalton> and bracing for that possibility is basically why float exists
[21:27:09] <pcwalton> "the native float type"
[21:27:18] <pcwalton> but I wouldn't be sad to see float go away myself
[21:27:29] <graydon> bjz: well, am I understanding correctly, that we want / and % to mean .quot() and .rem(), even though the underlying instructions are called div, fdiv, and fmod?
[21:27:31] <kimundi> erickt: Just got tripped up over the direct call to sys::begin_unwind in line 1104
[21:27:46] <strcat> pcwalton: seems like you just want to ask for the smallest one that fits your purpose - won't it be the fastest?
[21:28:03] <strcat> from my POV uint/int only exist because they're as big as the address space (on any sane arch)
[21:28:18] <strcat> 32-bit ints are still faster for most thinks on x86_64
[21:28:42] <strcat> s/thinks/things/
[21:29:00] <bjz> bjz: yes. well, it works for integer. but now erick has a valid point about it not being a good method name for floats.
[21:29:07] <bjz> * graydon
[21:29:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:29:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HYv-9g
[21:29:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:29:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:29:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fcJr7Q
[21:29:10] <ghrust> 13rust/06auto 14345d5b8 15gareth: Refactor core::run to remove the ProgRepr struct, which was...
[21:29:10] <ghrust> 13rust/06auto 14a784997 15bors: auto merge of #6044 : Dretch/rust/run-remove-progrepr, r=graydon...
[21:29:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:29:25] <strcat> pcwalton: 'float' in C is the 32-bit one, so it's arguably confusing
[21:29:49] <erickt> kimundi: what trouble were you running into?
[21:29:59] <graydon> bjz: what works for integer?
[21:30:01] *** Quits: AutomatedTester (automatedt@3EB32A7C.10A53EE3.77834EAA.IP) (Client exited)
[21:30:02] <bjz> graydon: perhaps we could have div/mod/divf/modf
[21:30:15] <kimundi> erickt: Just shuffling around how twh failure path works
[21:30:19] <bjz> graydon: for floord division/modulo
[21:30:21] <graydon> bjz: the integer instruction you want to issue is called div, right?
[21:30:27] *** Joins: napoleon (Mibbit@D7A971D5.A397BC64.DCEAB2BD.IP)
[21:30:36] <kimundi> erickt: Just had to change the line there
[21:30:48] <strcat> graydon: I think the problem is that floats actually do 'div' for / but integers do 'quot'
[21:30:59] <strcat> div and mod for integers are higher-level operations
[21:31:07] <erickt> kimundi: Okay. Don't put too much effort into auto_encode, it's end is soon
[21:31:18] *** Joins: eholk (eholk@moz-550C89CC.hsd1.in.comcast.net)
[21:31:25] <bjz> graydon: as it shands, the names for our methods currently follow haskell
[21:31:27] <strcat> mod is 'let x = a % b; if x < 0 { x + b } else { x }'
[21:31:38] <strcat> bjz: they don't really
[21:31:45] <strcat> haskell has integer division as a separate thing
[21:31:52] <strcat> there's div and mod - separate from /
[21:31:56] <strcat> afaik
[21:32:02] <bjz> strcat: yeah
[21:32:11] <kimundi> erickt: he, does preventing two string heap allocations count as too much effort? ;)
[21:32:13] <strcat> div, mod, rem and quot to be precise :)
[21:32:16] <bjz> strcat: notice I didn't say operators :P
[21:32:42] <bjz> strcat: what would you think about: div/mod/divf/modf
[21:32:45] <strcat> graydon: python3 has / (fractional division) and // (integer division)
[21:33:04] <kimundi> rusti: 2//3
[21:33:05] <rusti> 2
[21:33:08] <graydon> comments
[21:33:10] <bjz> heh
[21:33:13] <erickt> kimundi: probably :)
[21:33:38] <strcat> >>> 3 / 2
[21:33:40] <strcat> 1.5
[21:33:42] <strcat> >>> 3 // 2
[21:33:44] <strcat> 1
[21:33:49] <strcat> python
[21:34:01] <strcat> Prelude> 3 / 2
[21:34:02] <graydon> bjz strcat: so is the fundamental issue here that floating point does "something more euclidean" and integer units do "something that makes people sad"?
[21:34:02] <strcat> 1.5
[21:34:03] <kimundi> graydon: Aww, killjoy ;)
[21:34:04] <strcat> Prelude> 3 `div` 2
[21:34:06] <strcat> 1
[21:34:08] <strcat> haskell
[21:34:12] <strcat> graydon: yeah
[21:34:17] <strcat> graydon: and there are more issues
[21:34:27] <strcat> integer division can be tdiv, fdiv or cdiv
[21:34:31] <strcat> and you will never make everyone happy
[21:34:34] <graydon> I know
[21:34:46] *** Quits: CarpNet (alasdair@moz-EF831A5E.cable.virginmedia.com) (Client exited)
[21:34:48] <graydon> I just want the symbols % and / to do what the instructions do
[21:34:52] <graydon> is _that_ not even achievable?
[21:34:59] <strcat> graydon: that is - but then what do we call them?
[21:35:05] <graydon> that's what I'm asking
[21:35:08] <bjz> graydon: I would agree
[21:35:12] <strcat> 'div' isn't accurate for ints, 'quot' isn't accurate for floats
[21:35:12] <graydon> float % float and int % int
[21:35:13] <bjz> graydon: http://research.microsoft.com/pubs/151917/divmodnote-letter.pdf
[21:35:20] <strcat> solution: call it the slash operator xD
[21:35:28] <graydon> is there a name we can give both of those that is consistent with "issue the damn instruction"?
[21:35:37] <strcat> graydon: don't think so ;p
[21:35:47] <bjz> graydon: that's why I suggest div/mod/divf/modf
[21:35:48] <graydon> or are the instructions intrinsically doing different things, thereby making users sad if they get the same name?
[21:35:51] <pcwalton> fwiw, I have talked to our codec expert and he says "do not do what they suggest on the mailing list, keep it as it is today"
[21:35:56] <strcat> bjz: but it's one trait
[21:35:57] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:35:58] <pcwalton> since codecs have been brought up
[21:36:06] <graydon> which codec expert?
[21:36:10] <pcwalton> he feels quite strongly, incidentally -- switching to f-division would be "breaking the division operator"
[21:36:12] <pcwalton> tim terriberry
[21:36:18] <graydon> if it's tim terriberry, then I ...
[21:36:18] <graydon> yes
[21:36:24] <graydon> then I will do _whatever he says_ on this :)
[21:36:25] <strcat> clang has good -ftrapv support and it apparently slows down crypto 2-3x
[21:36:28] <strcat> seems like a pretty big deal
[21:36:40] <strcat> gcc's is broken so you can't measure anything accurately ;p
[21:36:55] <bjz> graydon: I feel strongly we should follow C on the operators
[21:36:58] <graydon> pcwalton: so, wait, since I can never keep "f-division" and "t-division" straight in my head, what is tim suggesting?
[21:37:12] <pcwalton> graydon: use the C semantics. keep what we have today. issue a "div" instruction on x86
[21:37:37] <strcat> yeah I don't think anything should change
[21:37:46] <strcat> but the naming is wrong in the current system
[21:37:52] <strcat> of the method
[21:38:04] <graydon> pcwalton: ok, the tricky part of that statement is, as others have pointed out here, the machine instruction for floats is euclidean, and the machine instruction for ints is non
[21:38:12] <pcwalton> graydon: that's fine
[21:38:16] <pcwalton> the inconsistency doesn't matter
[21:38:18] <graydon> pcwalton: which means if we _name them_ based on eucliean-ness, we can't pick the same name
[21:38:19] <pcwalton> IMHO anyway
[21:38:22] <pcwalton> ah, I see
[21:38:25] <pcwalton> I don't care about the names :)
[21:38:34] <bjz> pcwalton: what about renaming quot/rem back to div/modulo and having divf/modf for floored division?
[21:38:53] <strcat> bjz: that sounds good
[21:39:04] <strcat> bjz: and divc/modc :)
[21:39:16] <strcat> I think you should put the c/f as a prefix though, at least that's how I've seen it
[21:39:20] <bjz> the other option is to add 'Op' in front of all the operator traits
[21:39:26] <bjz> OpDiv
[21:39:32] <bjz> OpMod
[21:39:55] <strcat> bjz: just add a docstring that describes it as truncating towards 0 if it's integer division
[21:40:11] <strcat> I think that'd be fine
[21:40:13] <bjz> strcat: I already have one
[21:40:19] <strcat> bjz: oh, perfect :)
[21:40:30] *** Quits: josemaria (josemaria@moz-81467268.dyn.user.ono.com) (Ping timeout)
[21:40:31] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[21:40:37] <bjz> strcat: tried to document it pretty well on my latest PR
[21:40:40] <strcat> bjz: well then I think we should just forget about 'rem' and 'quot'
[21:40:45] <bjz> yeah
[21:40:50] <bjz> bloody haskell
[21:40:51] <bjz> :D
[21:40:55] <strcat> and call them fdiv, cdiv and div (tdiv)
[21:41:05] <cmr> What is the t in tdiv?
[21:41:09] <strcat> truncate
[21:41:11] <cmr> ah
[21:41:13] <bjz> cdiv?
[21:41:16] <strcat> c -> ceil, f -> floor
[21:41:37] <strcat> http://gmplib.org/manual/Integer-Division.html great example of how messed up it is :D
[21:41:49] <cmr> How is truncate different than floor?
[21:41:55] <strcat> cmr: negative numbers
[21:41:58] <cmr> ahhh
[21:41:59] <strcat> -5.5 -> -5
[21:42:01] <cmr> right
[21:42:08] <cmr> who uses negative numbers though? ;)
[21:42:23] <strcat> the same stuff is relevant for rounding too
[21:42:33] <bjz> ok!
[21:42:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:42:44] <bjz> reanaming the operators back! :P
[21:42:48] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[21:42:51] <strcat> you can divide the ties by rounding to -infinity, round to 0 or round to +infinity
[21:42:58] <graydon> fdiv is a little deceptive there
[21:43:08] <graydon> since fdiv is the name of a floating point divide
[21:43:23] <strcat> graydon: floor_div and ceil_div then
[21:43:25] <graydon> (unless fdiv the floating point divide is actually a floor division?)
[21:43:36] <graydon> (as in, what fdiv does on real chips)
[21:43:36] <strcat> graydon: no I don't think it is :)
[21:43:39] <strcat> not sure
[21:43:41] <graydon> yeah, me neither
[21:43:59] <bjz> graydon: that's why I though divf
[21:44:12] <graydon> do we need a ceil_div()?
[21:44:14] <strcat> floor_div or div_floor seems fine
[21:44:25] <strcat> graydon: I think so
[21:44:30] <bjz> graydon: not sure
[21:44:38] <strcat> and round needs 3 variants :p
[21:45:09] <strcat> floats have a rounding mode as a global - kind of scary
[21:45:54] <strcat> graydon: look at 'man fesetround'
[21:45:56] <strcat> scary as hell
[21:46:16] <strcat> who actually came up with this stuff? :P
[21:46:23] *** Quits: RagingDave (RagingDave@moz-2754F937.pools.arcor-ip.net) (Quit: Ex-Chat)
[21:46:25] <strcat>        -1     The rounding mode is not determinable.
[21:46:56] *** Joins: sient (Mibbit@moz-2E076DF2.aruba.fit.edu)
[21:47:26] <graydon> people who never designed languages
[21:48:03] <strcat> I don't really understand how they can have round to 0, round to +inf, round to -inf *and* round to nearest
[21:48:14] <strcat> I always thought the variants of rounding were about how to break the .5 case down
[21:48:21] <graydon> don't forget banker's rule
[21:48:22] <jld> Floating point rounding is... interesting in hardware ways, as I understand it.
[21:48:42] <graydon> and half-even
[21:48:44] <graydon> https://en.wikipedia.org/wiki/Rounding
[21:48:52] <graydon> best to take a deep breath
[21:48:52] <strcat> obviously round(2.5) should just segfault
[21:49:05] <cmr> yup
[21:49:42] <strcat> and this is why using rationals is so much saner ;p
[21:49:52] <strcat> rounding? what's that?
[21:49:59] <benh> strcat: so much more... rational...
[21:50:09] <jld> (But I'm at the office, and my dead-tree copy of the 80387 manual is at home.)
[21:50:16] <sient> Quick question: If I have two structs (struct Data1; struct Data2;) is there a good way to write a function (fn alloc() -> ???) that can return either a Data1 or a Data2?  Or should I just use traits?
[21:50:40] <jld> Either<Data1, Data2>?
[21:50:52] <sient> Ah, arbitrary number of structs
[21:50:58] <strcat> and keeping in mind that Either is just defined as 'enum Either<T, U> { T, U }'
[21:51:05] <strcat> sient: you can make an enum
[21:51:27] *** Quits: napoleon (Mibbit@D7A971D5.A397BC64.DCEAB2BD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:51:29] <sient> I wasn't clear enough; I mean having Data1, Data2, ...DataN
[21:51:37] <strcat> sient: are they known at compile-time?
[21:51:59] <graydon> wait wait
[21:51:59] <strcat> if so, you can use an enum
[21:52:23] <graydon> bjz: this is all about mod vs. rem, right?
[21:52:29] <graydon> not actually direction of div rounding?
[21:52:33] <strcat> graydon: about both
[21:52:37] <graydon> grrr
[21:52:38] <bjz> graydon: just the naming
[21:52:51] <strcat> bjz: oh modolo should still be called rem
[21:53:03] <bjz> graydon: we're not touching the behaviour
[21:53:06] <strcat> or not? ;p
[21:53:12] * strcat is confused now
[21:53:21] <strcat> I regret reading those floating point man pages
[21:53:53] <strcat> seems like floating point + referential transparency is not attainable... I wonder what haskell does
[21:54:01] <strcat> I guess you can't set those ;\
[21:54:05] <bjz> graydon: http://stackoverflow.com/a/339823/679485
[21:54:28] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[21:54:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:55:02] <strcat> I've convinced about having div, div_floor, div_ceil and mod, mod_floor and mod_ceil now
[21:55:13] <sient> strcat: Yea, they are known at compile-time, but it wouldn't be effective to use an enum because each of the DataK's would be defined in a 'ad-hoc' manner, not even in the same module... another way to explain it is in C++ have a function return an abstract class
[21:55:29] <graydon> strcat: what are the unadorned div and mod things?
[21:55:36] <strcat> graydon: truncate (like C)
[21:55:41] <strcat> the ones on the operator traits
[21:55:44] <graydon> except floating point doesn't do that
[21:55:49] <strcat> graydon: which is fine
[21:55:53] <strcat> they'll be called div/mod
[21:56:05] <graydon> so div and mod mean "machine operations"?
[21:56:09] <strcat> the trait can just say "truncates towards 0 for integer division"
[21:56:09] <graydon> "whatever they may be"?
[21:56:34] <strcat> graydon: I think it just needs to be clearly defined as being tdiv for integers
[21:56:53] <strcat> when I made my gmp bindings I actually had to test what it did - I had no idea ;p
[21:57:17] * strcat actually made unit tests to make sure it stays the same as rust's
[21:57:22] <graydon> do we keep the distinction between mod and rem?
[21:57:28] <graydon> (or keep a rem at all?)
[21:57:36] <strcat> graydon: no
[21:57:41] <strcat> rem is just 'mod_floor'
[21:57:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:57:48] <strcat> err
[21:57:52] <strcat> ignore that
[21:57:57] <graydon> no, because people think mod means >= 0
[21:58:04] <strcat> 'mod' in haskell would be mod_floor in rust
[21:58:13] <geomyidae> pcwalton: I only ask because it looks like you worked on the quote -> quote_tokens!() refactor, but would you happen to have some ex usage of that macro/syn-ext anywhere?
[21:58:29] <strcat> geomyidae: let me write this down so I can stop confusing myself :)
[21:58:29] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[21:58:32] <strcat> graydon: *
[21:58:39] <bjz> strcat: I added documwntation on the latest pr: https://github.com/mozilla/rust/pull/6041/files#L4L203
[21:58:56] <doy> sient: you may want a trait
[21:59:29] <bjz> graydon: modulo basically satisfies (D / d) * d + (D % d) == n
[21:59:59] <graydon> bjz: you don't know how my brain works then -- that helps not at all
[22:00:30] <graydon> actually none of these conversations have helped in the slightest
[22:00:38] <bjz> graydon: np. well it means that mod is dependant on how div works
[22:00:40] <graydon> I'm just as confused as when the first post happened months ago
[22:00:46] <bjz> :)
[22:01:06] <sient> doy: yea, but I'm wondering if there a good way to avoid that
[22:01:17] <graydon> https://en.wikipedia.org/wiki/File:Divmod.svg  <-- like, is this supposed to help?
[22:01:26] <graydon> I find it utterly confusing
[22:01:33] <doy> sient: why?
[22:02:52] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[22:03:02] <sient> doy: just evaluating implementation options
[22:03:19] <strcat> graydon: http://ix.io/5ky here
[22:03:22] <bjz> graydon: oh well. I think strcat and I agree that it's probably best to revert the trait names, and have separate, annotated methods for the different indeger divisions
[22:03:58] <graydon> strcat: include "what happens in floating point" in there please?
[22:04:36] <strcat> graydon: seems like it uses the floating point rounding mode which is some horrible global :)
[22:04:36] <graydon> note fmod and fdiv instructions exist
[22:04:49] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:05:08] <graydon> also please define how rounding direction is coupled to negative-ness-of-remainder
[22:05:14] <graydon> if at all
[22:05:19] <strcat> Rounding is used when the exact result of a floating-point operation (or a conversion to floating-point format) would need more digits than there are digits in the significand. IEEE 754 requires correct rounding: that is, the rounded result is as if infinitely precise arithmetic was used to compute the value and then rounded (although in implementation only three extra bits are needed to ensure
[22:05:22] <strcat> this). There are several different rounding schemes (or rounding modes). Historically, truncation was the typical approach. Since the introduction of IEEE 754, the default method (round to nearest, ties to even, sometimes called Banker's Rounding) is more commonly used. 
[22:05:49] <strcat> so yeah I think floats are hopeless
[22:05:54] <strcat> there's a global variable that can be changed
[22:06:46] <strcat> Prelude> divMod 20 (-3)
[22:06:48] <strcat> (-7,-1)
[22:06:49] <strcat> Prelude> quotRem 20 (-3)
[22:06:51] <strcat> (-6,2)
[22:06:53] * strcat is as confused as ever
[22:07:08] <graydon> well, if you ignore rounding; the question I am getting at is: does 1.0 % -5.0 come out positive or negative?
[22:07:18] <graydon> that is, does % mean rem on integers and mod on floats?
[22:07:29] <graydon> that would be alarming and awful
[22:07:35] <graydon> (possibly necessary?)
[22:07:44] *** Quits: spider-mario (spidermari@moz-EE4B8A09.rev.sfr.net) (Input/output error)
[22:07:48] <strcat> graydon: I don't think C has % on floats
[22:08:04] <graydon> I see
[22:08:11] *** Quits: int3_ (int3_@moz-2242076.subnet-248.amherst.edu) (Client exited)
[22:08:12] <graydon> so % should be .rem() and we don't implement .rem() on floats?
[22:08:56] <strcat> graydon: I don't think we choose what we implement on floats, the global state does
[22:08:57] <pcwalton> geomyidae: not sure what you mean
[22:09:10] <strcat> graydon: really no idea what to do about floats
[22:09:31] <strcat> some C library can stick it in a different rounding mode
[22:09:32] <graydon> strcat: we need to consider trait naming with floats in mind, is all I'm getting at
[22:09:44] * erickt wonders if we even need a `%` operator
[22:09:49] * graydon sighs
[22:09:51] *** Quits: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[22:09:54] <erickt> could we just stick with the functions?
[22:10:10] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[22:10:15] <erickt> ack gotta meeting. sorry to comment and run
[22:11:36] *** Quits: victorporof (victorporo@42D43E99.BEB908B0.79933D60.IP) (Quit: victorporof)
[22:12:37] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[22:13:47] *** Joins: btipling (btipling@moz-E36F67E7.hfc.comcastbusiness.net)
[22:14:37] <strcat> graydon: numbers just suck :)
[22:14:55] <bjz> strcat: so when do the stages increment?
[22:15:12] <cmr> Yeah, C doesn't have % on floats
[22:15:17] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[22:15:17] <strcat> bjz: hm?
[22:15:38] <bjz> strcat: or maybe I can let you do the honours of renaming them again
[22:15:59] <bjz> strcat: then you can check my documentation as well
[22:16:04] <strcat> bjz: I'm 90% sure that / should be called Div now
[22:16:09] <strcat> I have no idea what to do about %
[22:16:10] <bjz> yeah
[22:16:23] <bjz> lets just stick with Modulo
[22:16:33] <bjz> back where we started :)
[22:16:38] <catpig> thats the common name i believe
[22:16:51] * bjz sighs
[22:16:56] <strcat> bjz: well lets not touch % yet
[22:17:11] <strcat> needs more thought
[22:17:29] <bjz> :S
[22:18:02] <bjz> ok, well I'm going to do a PR with my current work. Added Fractional, Real and RealExt
[22:19:02] <bjz> strcat: Natural has also become Integer as per https://github.com/mozilla/rust/pull/6041#issuecomment-16919899
[22:19:22] <SiegeLord> Is it not possible to provid a Module function for floats that does the default action, and then the 3 exact ones (c/f/t)?
[22:19:25] <SiegeLord> *Modulo
[22:19:41] *** Joins: eholk_ (eholk@moz-D5BE5964.hsd1.in.comcast.net)
[22:19:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:19:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/fcJr7Q
[22:19:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:20:18] *** Quits: sient (Mibbit@moz-2E076DF2.aruba.fit.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:20:23] <strcat> this is what llvm's frem instruction does
[22:20:25] <strcat> This instruction returns the remainder of a division. The remainder has the same sign as the dividend. This instruction can also take any number of fast-math flags, which are optimization hints to enable otherwise unsafe floating point optimizations:
[22:20:40] <strcat> SiegeLord: there's no control over which rounding frem uses
[22:20:46] <strcat> it uses the rounding mode which is a global
[22:20:57] *** Quits: eholk (eholk@moz-550C89CC.hsd1.in.comcast.net) (Ping timeout)
[22:20:57] *** eholk_ is now known as eholk
[22:21:01] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[22:21:24] <SiegeLord> So we'd have to manually implement floating point division to provide a non-global dependent Modulo function?
[22:21:43] <SiegeLord> Well, all that's needed is manual rounding rather
[22:21:44] <cmr> Or save/restore the fenv
[22:22:08] <strcat> bjz: ok % should remain 'rem'
[22:22:18] <strcat> bjz: LLVM clearly defines it as being rem for both integers and floats
[22:22:26] <strcat> graydon: ^
[22:22:30] <bjz> strcat: ok
[22:22:42] <graydon> ok so % is remainder in all reasonable environments that map it to mean anything for float too
[22:22:45] <graydon> interesting
[22:22:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:22:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FygXHA
[22:22:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:22:47] <bjz> strcat: what of quot_rem?
[22:23:09] <strcat> bjz: well llvm doesn't have that so lets just pretend it doesn't exist for now ;p
[22:23:10] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Quit: Leaving)
[22:23:23] <cmr> And really it's just a single register, a save/restore around floating point stuff woudl work, but I don't think llvm exposes that at all, and it's target specific
[22:23:26] <bjz> strcat: div_rem?
[22:23:42] <strcat> bjz: it doesn't expose any of that and it probably varies per arch (whether it exists or not)
[22:23:51] <strcat> bjz: or do you mean the default div operation? :)
[22:24:06] <bjz> strcat: I mean the combined divrem
[22:24:24] <bjz> strcat: that returns (Self, Self)
[22:24:31] <strcat> bjz: yeah but that's not part of LLVM IR, needs to bind to C
[22:24:40] <strcat> or be done in inline assembly for each arhc
[22:24:42] <strcat> arch*
[22:24:54] <pcwalton> 99 LR(1) errors now
[22:24:55] <bjz> Prelude > 11 `quatRem` (-5)
[22:25:08] <bjz> Prelude> 11 `quatRem` (-5)
[22:25:24] <bjz> doesn't work for me :P
[22:25:30] <strcat> bjz: quotRem
[22:25:33] <strcat> and divMod
[22:25:39] <bjz> Prelude> 11 `quotRem` (-5)
[22:26:15] <bjz> strcat: I get confused because I work with Quat (quaternions) wires get crossed :P
[22:26:33] <strcat> bjz: okay so my suggestion is to leave % as being rem (because LLVM defines it clearly for both ints/floats) but make / called div again
[22:26:47] <bjz> strcat: ok, agreed
[22:26:55] <strcat> and then define floor_div/ceil_div on ints (or div_floor/div_ceil - whatever)
[22:26:56] <bjz> strcat: I mean, what to rename quat_rem too?
[22:27:30] <strcat> bjz: divrem is fine if it actually returns what / and % do
[22:27:38] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[22:27:38] <bjz> ok
[22:28:31] <strcat> bjz: or...
[22:28:33] <strcat> quotrem
[22:28:36] <strcat> quotrem is fine too ;p
[22:28:40] <strcat> if that's what it already is
[22:29:07] <strcat> C calls it 'div' and it returns a struct with 'quot' and 'rem'
[22:30:06] <bjz> strcat: https://gist.github.com/bjz/71e46e52cc83284bd068
[22:30:13] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[22:30:25] <bjz> strcat: I'm guessing we can change that later if needed
[22:31:21] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[22:32:19] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:32:20] <strcat> bjz: I think div_mod/quot_rem needs more thought
[22:32:31] <strcat> div_mod can't do something differently than /
[22:32:49] <strcat> is the difference just the sign on the remainder?
[22:32:57] <bjz> strcat: no
[22:33:10] <strcat> well it can't be called div then ;p
[22:33:16] <bjz> strcat: it satisfies the division rule
[22:33:23] <strcat> bjz: so it's div_floor_mod
[22:34:00] <bjz> strcat: http://research.microsoft.com/pubs/151917/divmodnote-letter.pdf
[22:34:14] <bjz> strcat: relevent section is in 1.1
[22:34:28] <bjz> strcat: I have a unit-test for that
[22:34:28] <strcat> bjz: so then calling the trait Div is problematic
[22:34:38] <strcat> we can't have a method called div that does something different than divmod
[22:35:04] <strcat> if we're going to use 'div_floor' we have to use it consistently
[22:35:21] <strcat> ofc we could leave it as quot
[22:35:22] <bjz> strcat: that's why I think Rem should go back to modulo
[22:35:36] <strcat> bjz: why?
[22:35:41] <strcat> that doesn't fix anything
[22:36:01] <bjz> so div, mod, div_mod and floor_div, floor_mod, and floor_div_mod
[22:36:10] <strcat> bjz: % is always rem though
[22:36:51] <strcat> bjz: it's arguably fine as it is now
[22:36:57] <strcat> Quot and Rem for / and %
[22:37:12] <strcat> floats don't do something sensible for / regardless of what it's called ;p
[22:37:40] <strcat> unless you set the rounding mode each time
[22:37:57] <strcat> but that's probably not thread safe alone
[22:38:01] <kimundi> rusti: core::sys::begin_unwind(~"", ~"", 0);
[22:38:02] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ECKD
[22:38:03] <strcat> you have to make it a critical section
[22:38:21] <strcat> well
[22:38:30] <strcat> and a lock... not feasible ;p
[22:38:31] <kimundi> rusti: core::sys::begin_unwind(~"", ~"", 0)
[22:38:32] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/LFdA
[22:39:20] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[22:40:11] <skinner> Hi again, I added a second hash lookup in an inner block, and borrowck stopped complaining, but now I get a "task .. ran out of stack" error running the compiled program.  Is that my mistake or rustc's?  Updated gist: https://gist.github.com/skinner/5455558
[22:41:22] <pcwalton> skinner: odd, does gdb help?
[22:41:31] <pcwalton> break on rust_task::fail
[22:42:06] <skinner> hmmm, let me take a look
[22:42:12] *** Joins: victorporof (victorporo@42D43E99.BEB908B0.79933D60.IP)
[22:42:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:42:34] <strcat> bjz: *shrug* :P
[22:42:57] <strcat> I don't think there's any sensible conclusion to make... the operations have cases with undef behaviour anyway
[22:43:08] <strcat> they aren't exactly "math"
[22:43:39] <strcat> rusti: -2147483648 % -1
[22:43:41] <rusti> 0
[22:43:46] <strcat> platform dependant
[22:45:00] <strcat> rusti: -2147483648 / -1
[22:45:01] <rusti> 2147483648
[22:45:04] <strcat> rusti: -2147483648 / -1
[22:45:05] <rusti> 2147483648
[22:45:37] *** Quits: eholk (eholk@moz-D5BE5964.hsd1.in.comcast.net) (Quit: eholk)
[22:46:00] <skinner> pcwalton: Okay, I'm inexperienced with both rust and gdb, but I set a breakpoint on rust_task::fail and did a bt, and got a list of thousands of rand::__extensions__::next_2752 stack frames
[22:46:14] <pcwalton> rand::next is infinite looping
[22:46:27] <pcwalton> ... that is bizarre
[22:46:30] <pcwalton> has anyone else seen this?
[22:46:44] <pcwalton> SipHash messed up i guess?
[22:46:48] <strcat> pcwalton: well, look at fn main() { loop {} }
[22:46:54] <strcat> the IR
[22:47:06] <pcwalton> strcat: well, that isn't what that code does
[22:47:13] <strcat> there are weird problems with rust's codegen is what I mean ;p
[22:47:27] <pcwalton> I don't see how that's relevant
[22:47:50] <pcwalton> clearly, hashmaps generally work, the compiler uses tons of them.
[22:48:03] <skinner> rustc is rustc 0.6 (ee3789b 2013-04-24 13:33:29 -0700) that I just built from incoming, platform is fedora 17 x86_64
[22:48:23] <strcat> pcwalton: I thought this was about the rng?
[22:48:36] <strcat> which calls into C doesn't it?
[22:48:37] *** Quits: victorporof (victorporo@42D43E99.BEB908B0.79933D60.IP) (Ping timeout)
[22:48:49] <pcwalton> I thought it didn't
[22:48:50] <pcwalton> but I'm not sure
[22:48:57] <pcwalton> maybe the ISAAC stuff does
[22:49:00] <pcwalton> if we still have it
[22:49:05] <strcat> I think so
[22:49:19] <strcat> well I thought it might be a similar situation to spinning up the scheduler, which can make bad IR 
[22:49:25] <strcat> since it's a call into C
[22:49:39] <strcat> kind of a total guess ;p
[22:50:30] <skinner> Hm, should I file an issue?
[22:50:36] <pcwalton> please do
[22:52:14] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[22:52:31] <pcwalton> 81 errors now
[22:52:45] <skinner> fwiw: at first I just got a segfault, with a rustc from incoming on monday, and I did a git pull and rebuild and got a "task ran out of stack error"
[22:53:36] <doomlord_> how  would rustc go with distributed build tools ... how would the compilation model fit
[22:53:42] <strcat> skinner: are you compiling with optimization?
[22:54:07] <doomlord_> ( i'm just messing with distcc for c++ at the minute and am just curious, i gather rustc probably does a bit more whole program analysis )
[22:54:53] <skinner> not using any flags
[22:55:40] <bjz> would somebody be able to review? https://github.com/mozilla/rust/pull/6048
[22:55:48] <bjz> strcat pcwalton ?
[22:56:08] <pcwalton> bjz: I'll take a look
[22:56:31] <SiegeLord> doomlord_, I think the best you can do right now is to compile separate crates independently
[22:57:13] <pcwalton> and down to 70
[22:58:56] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[22:59:33] *** Joins: mib_sj20xv (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[23:01:13] <mib_sj20xv> is there a way of describing numeric ranges in assignments, smth like let S = [1:10]; /* [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] */ ?
[23:02:28] <strcat> not yet
[23:02:49] <skinner> okay, filed https://github.com/mozilla/rust/issues/6049
[23:03:08] <mib_sj20xv> aha. so basically right now it's just creating a vector and then separately pushing the values in
[23:04:45] <bjz> strcat: https://gist.github.com/bjz/26062a10cced75bdf9be#file-numeric_traits-rs-L166 might be useful for implementing mib_sj20xv's question
[23:05:09] <strcat> bjz: yeah
[23:05:27] <bjz> strcat: like haskell does :D
[23:06:18] *** Joins: terra (Adium@moz-23A13192.pool.mediaways.net)
[23:06:18] *** Quits: terra (Adium@moz-23A13192.pool.mediaways.net) (Quit: terra)
[23:07:08] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[23:08:01] <bjz> pcwalton: ack, just a sec
[23:08:08] <bjz> pcwalton: build error
[23:08:13] <pcwalton> ok
[23:11:30] <bjz> pcwalton: oh wait
[23:11:41] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[23:11:46] <bjz> pcwalton: realised should be fine
[23:12:01] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[23:12:26] *** Joins: int3_ (int3_@moz-432A7121.public.wayport.net)
[23:12:53] <bjz> pcwalton: ie. I'd done something locally after I pushed that made it fail. The PR should still be fine to review
[23:12:58] <pcwalton> ok
[23:13:21] <bjz> jclements: https://github.com/bjz/rust/commit/d4868ee74085c2dc2943ef9407ced2d06e43abf6 :)
[23:13:23] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[23:14:13] *** Quits: thou (thou@moz-D1EE62D4.sumnetsol.com) (Input/output error)
[23:15:47] <pcwalton> graydon: the fact that "loop" means "continue" makes it hard to make the grammar LL(1)
[23:15:53] <pcwalton> I'm trying but it ain't easy
[23:16:07] <graydon> is it really stuck on that?
[23:16:10] <graydon> :(
[23:16:12] <pcwalton> it's not *stuck*.
[23:16:23] <jclements> bjz: thanks! hope this lands soon.
[23:16:35] *** Joins: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu)
[23:16:36] *** Quits: mib_sj20xv (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:16:43] <bjz> jclements: not sure if there are any other cases
[23:16:58] <bjz> jclements: sorry if I caused you any grief
[23:17:15] <jclements> no worries!
[23:17:36] *** Joins: sprocket (Mibbit@moz-F3E910AB.hsd1.mn.comcast.net)
[23:18:46] <jclements> anyone know what's up with this "ran out of stack" error? it's popping up *everywhere*
[23:19:01] <strcat> jclements: infinite recursion?
[23:19:34] <strcat> rusti: fn foo() { let _xs = ~[1, 2, 3]; foo() }; foo()
[23:19:35] <rusti> rust: task 1e20080 ran out of stack
[23:19:35] <rusti> rust: domain main @0x1e1e9c0 root task failed
[23:19:50] <jclements> strcat: no, no, the syntax.rc test cases are now about 50% failing. That is, running "rust test syntax.rc" is giving me 26 failures.
[23:20:24] <strcat> pcwalton: *possibly* fast_ffi related? ^
[23:20:56] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[23:21:01] <pcwalton> I think this started happening after fast ffi?
[23:21:05] *** aatch|bed is now known as aatch
[23:21:05] <pcwalton> but I can try
[23:21:07] <jclements> they must have passed on the build machine, though....
[23:21:37] <graydon> pcwalton: can you take a quick peek at https://github.com/mozilla/rust/issues/2067 , confirm it's closed?
[23:21:55] <pcwalton> graydon: closed
[23:22:13] <graydon> thanks!
[23:24:10] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[23:25:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:26:06] <sprocket> hey, is anyone able to tell me the "proper" way to build a list of numbers that match a condition?
[23:26:22] <sprocket> like, in python, i've got
[23:26:23] <sprocket> nums = [i for i in range(1, 100) if i % 3 == 0]
[23:26:36] <sprocket> in rust, though, i've got
[23:26:39] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[23:26:41] <sprocket> let mut nums:~[int] = ~[];  for int::range(1, 100) |i| {  if i % 3 == 0 {    nums += [i];  } }
[23:26:52] <pcwalton> sprocket: the libraries here are bad
[23:26:56] <pcwalton> we should eventually support
[23:27:11] <pcwalton> let nums = for range(1, 100).filter(|x| x % 3 == 0).to_vec();
[23:27:15] <pcwalton> but that doesn't work today.
[23:27:19] <sprocket> oh ok
[23:27:22] <strcat> pcwalton: it will soon
[23:27:31] <strcat> pcwalton: there's that annoying type inference bug though
[23:27:34] <strcat> not just a lib issue :(
[23:27:39] <pcwalton> oh, really?
[23:27:42] <pcwalton> for numeric type inference?
[23:27:49] <strcat> pcwalton: no
[23:27:57] <strcat> pcwalton: just with generics
[23:28:16] <strcat> pcwalton: https://github.com/mozilla/rust/issues/5801
[23:28:35] <strcat> I don't have an Iterator impl that doesn't use regions so I don't know exactly the cause yet
[23:28:39] <sprocket> thanks for the info
[23:28:43] *** Quits: sprocket (Mibbit@moz-F3E910AB.hsd1.mn.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:29:06] <strcat> pcwalton: in theory you can write x.map(|x| x * 2).zip(y) etc. now though
[23:29:13] <strcat> just fails at inferring so you need temp vars :(
[23:29:19] <pcwalton> ah
[23:32:12] *** Quits: akashj87_ (akash@AD8413D5.7FACFDC5.35E3DDC8.IP) (Connection reset by peer)
[23:32:29] *** Joins: akashj87_ (akash@AD8413D5.7FACFDC5.35E3DDC8.IP)
[23:37:33] *** Quits: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com) (Quit: Leaving)
[23:39:05] <friggle> pcwalton: disappointed you stopped responding to TimmT ;)
[23:39:18] <pcwalton> he posted again, I guess
[23:39:51] <friggle> not entirely sure what he's trying to do, other than be painfully contrarian
[23:39:59] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:40:13] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[23:40:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:41:52] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[23:43:09] <strcat> the operators really suck ;p
[23:43:19] <strcat> foo.a + foo.b
[23:43:27] <strcat> forces them to be moved
[23:43:39] <strcat> can do foo.a.add(&foo.b) ...
[23:43:50] <pcwalton> forces them to be moved?
[23:43:55] *** Quits: themgt (themgt@moz-12C18812.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[23:43:57] <strcat> /home/strcat/projects/rust/src/libcore/iterator.rs:367:22: 367:31 error: moving out of mutable field
[23:43:58] <pcwalton> I thought add took self by &
[23:43:59] <strcat> /home/strcat/projects/rust/src/libcore/iterator.rs:367         self.state +
[23:44:07] <strcat> pcwalton: it does, if you call the method
[23:44:13] <pcwalton> oh, well, that's just a bug
[23:44:33] <strcat> huh weechat ate some of that text
[23:44:33] *** Quits: cdidd (cdidd@moz-879A3ED0.broadband.corbina.ru) (Input/output error)
[23:44:40] <strcat> /home/strcat/projects/rust/src/libcore/iterator.rs:367:22: 367:31 error: moving out of mutable field
[23:44:42] <strcat> /home/strcat/projects/rust/src/libcore/iterator.rs:367         self.state += self.step;
[23:44:44] <strcat>                                                                              ^~~~~~~~~
[23:45:14] <strcat> guess it needs an issue report. don't see anything open
[23:47:07] *** Joins: mindginative (mindginati@moz-D3DCB8C6.dyn.cust.vf.net.nz)
[23:47:14] <strcat> https://github.com/mozilla/rust/issues/6050 there
[23:47:16] *** Joins: victorporof (victorporo@42D43E99.BEB908B0.79933D60.IP)
[23:47:45] <strcat> I ran into before with gmp but I wasn't 100% sure if it was a bug
[23:47:51] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[23:49:24] *** Quits: skinner (skinner@6E211B03.FE8B979F.432EAF84.IP) (Quit: Leaving)
[23:49:49] *** Quits: victorporof (victorporo@42D43E99.BEB908B0.79933D60.IP) (Ping timeout)
[23:50:00] <bjz> pcwalton: argh, just realised I've also broken std::rational
[23:50:22] * bjz cureses himself for not being as thourough with his testing as usual
[23:51:46] <strcat> pcwalton: ok good news, it's from region inference
[23:51:50] <strcat> "good" ;p
[23:52:03] *** Quits: Jesin (Jessin_@moz-60120A2E.cc.lehigh.edu) (Ping timeout)
[23:52:17] <strcat> and a temporary is needed until rvalues can be borrowed as &mut
[23:52:25] <strcat> which I think niko is working on
[23:52:31] <strcat> as part of other stuff
[23:52:33] <jclements> brson:ping
[23:53:10] <strcat>         let mut it = Counter::new(0, 5).take(10);
[23:53:11] <strcat>         let xs = iter_to_vec(|f| it.advance(f));
[23:53:14] <strcat>         assert_eq!(xs, ~[0, 5, 10, 15, 20, 25, 30, 35, 40, 45]);
[23:53:15] <strcat> pcwalton: ^ works
[23:53:21] <pcwalton> nice
[23:54:39] <pcwalton> well, modes make it very hard to be LL(1)
[23:54:45] <pcwalton> down to 28 errors
[23:54:47] <strcat> I was going to add range but .takewhile and .take essentially take care of it
[23:55:24] <pcwalton> we definitely need to forbid "self" as an identifier, I think.
[23:55:30] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Quit: zzzzzzzzzz)
[23:55:36] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[23:56:24] <strcat> anyway iter_to_vec is the new-style internal iterator adaptor
[23:56:34] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[23:56:34] *** ChanServ sets mode: +o tjc
[23:56:34] <strcat> need to make the others like that too, instead of being silly things based on BaseIter
[23:57:05] <strcat> but .to_vec() can work fine on external ones
[23:58:30] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[23:58:57] *** Joins: thou (thou@moz-D1EE62D4.sumnetsol.com)
[23:58:57] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[23:59:11] <strcat> pcwalton: https://github.com/mozilla/rust/pull/6051 r?
[23:59:17] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Input/output error)
[23:59:34] <friggle> pcwalton: that doesn't seem like a big loss, it's just confusing to allow it as an identifier given how rust treats 'self' anyway
[23:59:48] <bjz> strcat: is there a name for combined trunc_fract?
