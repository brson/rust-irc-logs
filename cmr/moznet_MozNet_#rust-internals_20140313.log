[00:04:15] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[00:05:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:05:27] *** flaper87 is now known as flaper87|afk
[00:11:38] *** kimundi is now known as zz_kimundi
[00:13:17] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[00:23:16] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[00:33:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:33:09] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[00:36:52] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[00:36:52] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ec04937 to 144d64441: 02http://git.io/N3iJvQ
[00:36:52] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[00:42:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[00:42:40] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:43:52] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:45:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[00:46:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:47:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:51:01] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[00:54:46] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[00:56:10] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[00:56:10] *** ChanServ sets mode: +o tjc
[00:57:33] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[00:58:07] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[01:00:26] <cmr> cgaebel: yay!
[01:00:58] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[01:01:03] <cgaebel> is there a way for the benchmarks to give confidence intervals instead of just a mean? i.e. your 99th percentile latency is...
[01:02:14] <acrichto> brson: r? https://github.com/mozilla/rust/pull/12791
[01:02:18] <acrichto> (just the last commit)
[01:02:51] <cmr> cgaebel: not right now.
[01:03:05] <cmr> cgaebel: it'd be pretty easy to extend the bencher with it, though
[01:03:19] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[01:03:27] <cgaebel> cmr: alright. I'll see what I can do when I get to that point. thanks.
[01:06:48] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[01:06:48] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14c01051b to 144d64441: 02http://git.io/N3iJvQ
[01:06:48] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[01:06:51] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[01:06:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/M83Skg
[01:06:51] <ghrust> 13rust/06auto 145bdbd21 15Clark Gaebel: Performance-oriented hashtable....
[01:06:51] <ghrust> 13rust/06auto 142eebeb8 15bors: auto merge of #12081 : cgaebel/rust/robinhood-hashing, r=alexcrichton...
[01:06:52] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[01:18:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:20:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:23:02] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[01:24:50] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[01:42:47] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[01:42:47] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 148dc0b3a to 14e3be38b: 02http://git.io/k471pw
[01:42:47] <ghrust> 13rust/06try 14e3be38b 15Alex Crichton: Add basic backtrace functionality...
[01:42:47] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[01:46:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:47:26] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:47:35] *** Joins: lpy (lpy@54AA05A8.F09091A8.1348A864.IP)
[01:52:57] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:54:22] *** Quits: lpy (lpy@54AA05A8.F09091A8.1348A864.IP) (Client exited)
[01:59:02] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[02:01:31] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[02:04:57] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:06:38] <brson> I've told bors to ignore the mac and android bots
[02:07:41] <brson> I'm shutting down the slaves now too
[02:08:35] <brson> i suspect that over the weekend when the mv 'datacenter' moves everything is just going to fall apart anyway though
[02:09:34] *** Quits: esummers__ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[02:09:39] *** Joins: esummers____ (esummers@moz-3B015C90.wi.res.rr.com)
[02:10:27] <cgaebel> does rust have likely/unlikely branch hints?
[02:10:28] <brson> acrichto: ^fyi
[02:11:17] <erickt> cgaebel: I don't believe we do
[02:13:08] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:13:17] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[02:13:32] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[02:14:59] <cgaebel> erickt: much sads. thanks.
[02:15:58] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:16:47] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[02:16:47] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/M83Skg
[02:16:47] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[02:17:23] <strcat> cgaebel: you can make them
[02:17:26] <strcat> via a hack
[02:17:32] <brson> mac, android bots and the bot that sends out triage emails are all shut down for the weekend
[02:17:54] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:17:56] <brson> i'm going to dinner soon, but will come back to clean up any bustage
[02:18:16] <strcat> rusti: extern { #[link_name = "llvm.expect.i8"] fn expect(val: u8, expected_val: u8) -> u8; }
[02:18:16] -rusti- <anon>:11:50: 11:93 warning: code is never used: `expect`, #[warn(dead_code)] on by default
[02:18:16] -rusti- <anon>:11         extern { #[link_name = "llvm.expect.i8"] fn expect(val: u8, expected_val: u8) -> u8; }
[02:18:16] -rusti-                                                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[02:18:17] -rusti- ()
[02:18:20] <strcat> cgaebel: ^
[02:18:40] <strcat> cgaebel: that's __builtin_expect (although that's usually i32/i64 iirc)
[02:20:03] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:21:46] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[02:21:46] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/6quFYg
[02:21:46] <ghrust> 13rust/06auto 14f079c94 15Michael Darakananda: rustc: Remove matching on ~str from the language...
[02:21:46] <ghrust> 13rust/06auto 14a53242a 15bors: auto merge of #12756 : pongad/rust/remove_owned_str_pat, r=alexcrichton...
[02:21:46] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[02:21:49] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[02:21:49] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/nsgFgQ
[02:21:49] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[02:22:32] <cgaebel> strcat: huh. neat. thanks!
[02:22:48] <strcat> cgaebel: you can use all the x86 intrinsics, etc. that way too
[02:22:55] <strcat> wonderful hack, should be feature gated though
[02:22:58] <strcat> I forget if I opened a bug about it
[02:24:17] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:24:20] <cgaebel> hmm that won't let me do [if likely(x > 0) { ... }]
[02:24:37] <cgaebel> can I just cast the x > 0 to an i64, then cast back to a bool after expect?
[02:24:50] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:25:51] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[02:26:52] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:35:49] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:36:08] *** Joins: lpy (lpy@F7AFA3.F09091A8.1348A864.IP)
[02:37:07] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[02:39:10] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[02:41:30] <klutzy> acrichto: on #12762, do you mean the rpass tests should be fixed anyway?
[02:41:56] <acrichto> klutzy: not particularly, failing tests just aren't a reason to introduce subtle bugs
[02:44:23] <klutzy> my pr (without wanky declare-only-once part) fails only on check-fast, it's ok on check-stage2-rpass for example
[02:44:42] <klutzy> so the part can be removed after check-fast is gone
[02:44:42] <strcat> cgaebel: yes, that's how it's done in C
[02:44:53] <acrichto> klutzy: check-fast is going to take awhile to remove
[02:44:57] <strcat> cgaebel: look up how the LIKELY/UNLIKELY macros are usually defined
[02:45:16] <strcat> (can't be a function because the lowest-expect pass runs as a function pass pre-inline)
[02:45:23] <strcat> we could expose expect intrinsics to avoid needing the hack
[02:46:22] <klutzy> acrichto: ugh :'( then I'll fix rpass soon
[02:46:36] <klutzy> I thought check-fast stuff is nearly done
[02:47:08] <acrichto> unsure
[02:47:11] <acrichto> brson would know more
[02:47:38] <cgaebel> strcat: expect intrinsics would be awesome. I'm not going to use it if it can't be a function (well, I guess I could use a macro...)
[02:48:22] <strcat> cgaebel: well you can make if likely!(condition) {}
[02:48:38] <cgaebel> strcat: yeah I guess that makes sense now that I've thought about it for > 2 seconds.
[02:48:48] <strcat> http://sprunge.us/aPWB
[02:49:04] <strcat> for match, you'd just directly use expect
[02:49:16] <strcat> but it's annoying that you'd still need a macro for the unsafe {}
[02:49:26] <strcat> because you can't wrap it in a real function or it stops working
[02:50:46] <strcat> cgaebel: anyway the easy way to verify it works is --emit-llvm -S and see if it outputs branch metadata when lower-expect is run
[02:51:07] <strcat> or check if it changes the asm ;p
[02:51:25] <strcat> mostly just reorders blocks so CPU branch prediction will be correct
[02:51:48] <cgaebel> yeah. that's kinda exactly what I want.
[02:52:00] <strcat> without a hint, it has really basic heuristics
[02:52:02] <cgaebel> rust is my glorified assembler.
[02:52:11] <strcat> 50% chance a branch will be taken as the base
[02:52:25] <strcat> and a high chance that a loop edge will continue running the loop
[02:52:41] <strcat> and comparisons against NULL and -1 are exceptional
[02:52:47] <strcat> afaik that's basically all ;s
[02:52:58] <cgaebel> yeah that is pretty basic. thank god for the high-wizards at intel making a sweet branch predictor.
[02:53:02] <strcat> compilers are way less clever than they get credit for
[02:53:31] <strcat> they're just super thorough ;p
[02:53:41] <cgaebel> I swear I know whether a branch should be taken or not taken like, 90% of the time when I write code.
[02:53:52] <cgaebel> it's silly that annotating it isn't more common. it even helps readability!
[02:53:54] <strcat> cgaebel: LLVM will often get it right
[02:54:01] <strcat> the simple heuristics are pretty good
[02:54:11] <cgaebel> meeeh, idk
[02:54:19] <cgaebel> if len == capacity { ... }
[02:54:22] <cgaebel> is pretty hard to guess at.
[02:54:24] <strcat> yeah, in a vector
[02:54:29] <strcat> 50% chance it will get it right
[02:54:30] <strcat> ;p
[02:54:45] <cgaebel> I can do better, dammit!
[02:54:48] <strcat> cgaebel: we have a #[cold] attribute too
[02:54:57] <cgaebel> it's not THAT cold
[02:54:58] <strcat> cgaebel: any branch calling a #[cold] function is cold
[02:55:05] <cgaebel> I just expect the codegen to happen at the bottom of my function
[02:55:10] <strcat> ah
[02:55:18] <cgaebel> I don't want a whole function for this
[02:55:26] <cgaebel> again, portable assembler ;)
[02:55:49] <cgaebel> + some type safety n' stuff
[03:01:12] <strcat> a CPU can probably be right most of the time just by assuming that a jump up is taken and a jump down isn't
[03:01:50] <strcat> that's all the compiler needs to express what it wants at least ;p
[03:11:16] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[03:14:05] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:16:32] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:18:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:19:34] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[03:25:11] *** Joins: jdm (jdm@moz-E41E4269.dsl.teksavvy.com)
[03:29:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:29:50] *** ChanServ sets mode: +qo brson brson
[03:31:50] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[03:31:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/6quFYg
[03:31:50] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[03:32:02] <brson> gj bors
[03:35:31] *** Joins: hidensoft (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP)
[03:36:27] *** Quits: intuxicated (intuxicate@7269D995.26CEB0C7.3FFBF42F.IP) (Ping timeout)
[03:36:30] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:36:44] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[03:36:44] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/J160lw
[03:36:44] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[03:36:46] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[03:36:46] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/fIJg8w
[03:36:46] <ghrust> 13rust/06auto 14a9f8973 15Alex Crichton: log: Introduce liblog, the old std::logging...
[03:36:46] <ghrust> 13rust/06auto 144b54bba 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[03:36:46] <ghrust> 13rust/06auto 14d4736d5 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[03:36:48] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[03:46:45] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[03:46:45] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/oBrg_g
[03:46:45] <ghrust> 13rust/06auto 14c17235e 15Alex Crichton: std: Rename Chan/Port types and constructor...
[03:46:45] <ghrust> 13rust/06auto 14ddf9a65 15bors: auto merge of #12815 : alexcrichton/rust/chan-rename, r=brson...
[03:46:46] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[03:47:16] *** Quits: zz_kimundi (kimundi@moz-7F0BEAFC.dip0.t-ipconnect.de) (Ping timeout)
[03:51:28] *** Joins: KimmyLeo (KimmyLeo@10931E07.6FD7A518.CB05CF38.IP)
[03:51:30] *** Joins: zz_kimundi (kimundi@moz-F815AD2B.dip0.t-ipconnect.de)
[03:51:32] *** zz_kimundi is now known as kimundi
[03:59:31] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:59:33] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[04:01:08] <cmr> acrichto: ping
[04:02:07] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[04:16:16] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[04:16:22] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:18:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:21:45] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[04:21:45] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/8xT7QA
[04:21:45] <ghrust> 13rust/06auto 14be12c9f 15Erick Tryzelaar: std: allow io::File* structs to be hashable
[04:21:45] <ghrust> 13rust/06auto 14d2cfd54 15Erick Tryzelaar: serialize: make Paths serializable
[04:21:46] <ghrust> 13rust/06auto 1462026fd 15Erick Tryzelaar: syntax: change the #[deriving(Hash)] typaram variable name
[04:21:48] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[04:21:49] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[04:21:49] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ddf9a65 to 14a53242a: 02http://git.io/N3iJvQ
[04:21:49] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[04:37:45] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[04:50:48] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[04:55:34] <pnkfelix> nmatsakis: there's no way you are awake, right?
[04:57:13] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[04:57:13] *** ChanServ sets mode: +o tjc
[04:58:53] <eddyb> pnkfelix: 10 pm... hmm, considering how early he wakes up, he might as well go to sleep before 9-10
[04:58:56] <eddyb> but idk
[04:59:33] <pnkfelix> eddyb: yeah I think that is probably true.  I am only awake because the our new dog woke us up to take him out for a walk
[04:59:49] <pnkfelix> eddyb: (It is almost 6 am here)
[04:59:57] <pnkfelix> I had an insight regarding our grammar for DST.  I will write it up as a blog post.
[05:00:05] <eddyb> revelations!
[05:00:18] <eddyb> exactly 7am here. yay timezones :P
[05:07:06] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[05:09:01] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:16:25] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:16:31] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[05:17:16] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:17:42] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:18:34] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:19:00] *** Quits: jdm (jdm@moz-E41E4269.dsl.teksavvy.com) (Quit: Lost terminal)
[05:28:16] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[05:31:51] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[05:31:51] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/8xT7QA
[05:31:51] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[05:32:46] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[05:32:59] *** vfetwnuncszu is now known as dcrewi
[05:34:32] *** Joins: edwardw (edwardw@B3728BF8.E2F45E91.B9C6B12A.IP)
[05:36:46] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[05:36:46] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/1E1okg
[05:36:46] <ghrust> 13rust/06auto 1465cca4b 15Alex Crichton: rustuv: Fix a use-after-free in TTY failure...
[05:36:46] <ghrust> 13rust/06auto 14792da84 15bors: auto merge of #12823 : alexcrichton/rust/issue-12666, r=pcwalton...
[05:36:47] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[05:38:19] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:41:08] *** Quits: lpy (lpy@F7AFA3.F09091A8.1348A864.IP) (Connection reset by peer)
[05:41:44] *** Joins: lpy (lpy@F7AFA3.F09091A8.1348A864.IP)
[05:42:50] <cmr> anybody seen https://github.com/mozilla/rust/issues/12859 recently?
[05:44:39] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[05:45:09] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:46:53] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[05:50:51] *** Quits: larsberg (sid16141@moz-A42E5B7B.irccloud.com) (Ping timeout)
[05:58:42] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[06:03:42] *** Quits: lpy (lpy@F7AFA3.F09091A8.1348A864.IP) (Ping timeout)
[06:05:27] *** Joins: lpy (lpy@9460CF2E.F09091A8.1348A864.IP)
[06:11:08] *** Joins: larsberg (sid16141@moz-A42E5B7B.irccloud.com)
[06:11:25] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[06:11:30] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:16:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:18:52] <eddyb> github is being bad again
[06:19:23] <eddyb> cmr: r=nmatsakis? https://github.com/mozilla/rust/pull/12610
[06:21:58] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:22:37] <eddyb> or strcat ^^ (I've fixed a small issue. yeah, rebases screwing my borrow -> deref replacements)
[06:28:18] <eddyb> strcat: thanks :D - combo http://buildbot.rust-lang.org/bors/bors.html
[06:29:24] <acrichto> cmr: pong
[06:30:29] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:32:15] <cmr> acrichto: I think https://github.com/mozilla/rust/issues/12859 *might* be a makefile problem, 
[06:32:39] <cmr> acrichto: in that it's not using a cross-gcc or passing -target to clang.
[06:32:59] <cmr> acrichto: this is a regression; so I'm guessing it broke with some of the recent makefile overhauls?
[06:33:33] <acrichto> can you provide steps to reproduce?
[06:33:48] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[06:33:51] <cmr> ./configure --target=i686-pc-mingw32,x86_64-unknown-linux-gnu; make
[06:33:54] <cmr> will add to issue
[06:33:58] *** vfetwnuncszu is now known as dcrewi
[06:34:50] *** Quits: edwardw (edwardw@B3728BF8.E2F45E91.B9C6B12A.IP) (Quit: Leaving...)
[06:35:20] <acrichto> cool
[06:35:33] <cmr> also the toolchain on my system is i486-mingw32-*, so I don't know if that's important... it built before, though.
[06:35:39] <acrichto> I would certainly believe that something has gone awry
[06:35:42] <cmr> strcat: do you know about mingw's i486/i686 differences?
[06:35:59] *** Joins: edwardw (edwardw@4CA3FA20.E1A076E0.4A6948F8.IP)
[06:36:51] <cmr> maybe because I only have mingw-w64 installed...
[06:38:45] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[06:39:29] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[06:39:29] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14e3be38b to 14a96f2b4: 02http://git.io/k471pw
[06:39:29] <ghrust> 13rust/06try 14a96f2b4 15Alex Crichton: Add basic backtrace functionality...
[06:39:29] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[06:39:42] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[06:43:37] <edwardw> backtrace again \o/
[06:46:41] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[06:46:41] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/1E1okg
[06:46:41] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[06:49:49] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[06:50:55] *** Joins: gimpf (gimpf@moz-BBD748EE.adsl.highway.telekom.at)
[06:51:41] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[06:51:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/E7DFNA
[06:51:41] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[06:54:43] <eddyb> 414? how did that not get merged until now?
[07:12:42] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:19:24] *** Quits: edwardw (edwardw@4CA3FA20.E1A076E0.4A6948F8.IP) (Quit: Leaving...)
[07:25:15] <eddyb> nmatsakis: oh dear 11 borrow errors in my minigame
[07:25:35] <eddyb> I should've known "let bat = bat.borrow_mut();" wasn't supposed to work
[08:02:04] *** Quits: lpy (lpy@9460CF2E.F09091A8.1348A864.IP) (Connection reset by peer)
[08:02:46] *** Joins: lpy (lpy@9460CF2E.F09091A8.1348A864.IP)
[08:06:42] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[08:06:42] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/0c5NjQ
[08:06:42] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[08:08:37] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:11:40] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[08:11:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/KwuTLg
[08:11:40] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[08:11:43] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[08:11:44] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/hV8XEA
[08:11:44] <ghrust> 13rust/06auto 14829df69 15Alex Crichton: Add basic backtrace functionality...
[08:11:44] <ghrust> 13rust/06auto 1412b2607 15bors: auto merge of #12602 : alexcrichton/rust/backtrace, r=brson...
[08:11:44] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[08:13:49] *** flaper87|afk is now known as flaper87
[08:15:35] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Connection timed out)
[08:16:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:16:50] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:16:50] *** ChanServ sets mode: +o huon
[08:18:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:19:03] <huon> cmr: ping
[08:19:09] *** Quits: lpy (lpy@9460CF2E.F09091A8.1348A864.IP) (Ping timeout)
[08:19:42] *** Joins: lpy (lpy@41919AC5.F09091A8.1348A864.IP)
[08:23:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[08:26:59] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[08:27:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:29:27] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[08:31:08] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:34:46] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[08:44:38] <flaper87> we should have some stronger rules for commit title / description formatting at some point. We're getting there but commits with titles linger than 100 characters are ugly. Maybe it's just me
[08:44:49] <flaper87> I agree there are exceptions so that probably shouldn't be a strong requirement
[08:45:11] <flaper87> longer*
[08:49:03] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[08:52:48] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[09:05:43] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[09:10:42] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[09:11:08] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[09:11:24] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[09:14:38] *** Joins: zxcdw (r-a@F4A4796.FC390A29.3933CC16.IP)
[09:16:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:16:42] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[09:18:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:21:45] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[09:21:45] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/hV8XEA
[09:21:45] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[09:22:20] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[09:23:10] <eddyb> acrichto: your backtrace PR better not conflict with my deref...
[09:23:21] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[09:23:59] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[09:24:23] <eddyb> it looks fine, crossing fingers
[09:26:42] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[09:26:42] <ghrust> [13rust] 15bors pushed 8 new commits to 06auto: 02http://git.io/4sUjLg
[09:26:42] <ghrust> 13rust/06auto 149fb0cd6 15Eduard Burtescu: Remove Rc's borrow method to avoid conflicts with RefCell's borrow in Rc<RefCell<T>>.
[09:26:42] <ghrust> 13rust/06auto 1453e5d38 15Eduard Burtescu: Implement automatic overloaded dereference....
[09:26:43] <ghrust> 13rust/06auto 1474088b1 15Eduard Burtescu: Introduce a common recursion limit for auto-dereference and monomorphization.
[09:26:45] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[09:27:12] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[09:27:16] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[09:27:33] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:29:14] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[09:33:10] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[09:34:16] *** Joins: lpy_ (lpy@8B40CDAC.F09091A8.1348A864.IP)
[09:34:21] *** Quits: lpy (lpy@41919AC5.F09091A8.1348A864.IP) (Ping timeout)
[09:37:15] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[09:45:55] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[09:50:55] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:00:03] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:03:18] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:06:05] <eddyb> acrichto: OOM http://buildbot.rust-lang.org/builders/auto-win-32-opt/builds/4718/steps/compile/logs/stdio
[10:06:14] <eddyb> or so I think :(
[10:06:32] <eddyb> cmr, huon: ^^ so sad that we gate on that POS windows stuff
[10:07:04] <eddyb> retry? https://github.com/mozilla/rust/pull/12610
[10:11:24] <eddyb> and everyone's sleeping, ofc
[10:11:41] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[10:11:41] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/PZEmjg
[10:11:41] <ghrust> 13rust/06auto 14cb03788 15Alex Crichton: std: Rename Chan/Port types and constructor...
[10:11:41] <ghrust> 13rust/06auto 148a2aa6c 15bors: auto merge of #12815 : alexcrichton/rust/chan-rename, r=brson...
[10:11:41] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[10:11:43] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[10:11:43] <ghrust> [13rust] 15bors 04force-pushed 06auto from 142885468 to 1412b2607: 02http://git.io/N3iJvQ
[10:11:43] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[10:14:53] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:25:20] *** Quits: Blaze_ (tuomino2@moz-785A3407.org.aalto.fi) (Broken pipe)
[10:30:21] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:30:59] *** Quits: KimmyLeo (KimmyLeo@10931E07.6FD7A518.CB05CF38.IP) (Client exited)
[10:31:12] <eddyb> huon: thanks, I saw you talking and wanted to bug you, but checked first :)
[10:37:09] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:37:52] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:46:17] *** Quits: lpy_ (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[10:46:39] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[10:46:39] <ghrust> [13rust] 15bors 04force-pushed 06auto from 148a2aa6c to 1412b2607: 02http://git.io/N3iJvQ
[10:46:39] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[10:46:40] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[10:46:40] <ghrust> [13rust] 15bors pushed 8 new commits to 06auto: 02http://git.io/0xmY1g
[10:46:40] <ghrust> 13rust/06auto 149fb0cd6 15Eduard Burtescu: Remove Rc's borrow method to avoid conflicts with RefCell's borrow in Rc<RefCell<T>>.
[10:46:40] <ghrust> 13rust/06auto 1453e5d38 15Eduard Burtescu: Implement automatic overloaded dereference....
[10:46:40] <ghrust> 13rust/06auto 1474088b1 15Eduard Burtescu: Introduce a common recursion limit for auto-dereference and monomorphization.
[10:46:42] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[10:46:59] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[10:48:18] <eddyb> huon: I wonder if the rune stones for windows are all set correctly
[10:49:23] <eddyb> don't want dem window spirits to fluke again
[10:50:03] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[10:54:34] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:57:46] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:00:46] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:09:56] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:11:37] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:12:23] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Quit: huon)
[11:13:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:13:55] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[11:14:08] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[11:14:08] *** ChanServ sets mode: +o huon
[11:14:08] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[11:16:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:18:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:18:58] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:24:27] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: Ï†Ñ Ïù¥Îßå Í∞ëÎãàÎã§.)
[11:26:42] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:33:50] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:36:09] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:36:37] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[11:36:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 147603084 to 1412b2607: 02http://git.io/N3iJvQ
[11:36:37] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[11:37:43] <kimundi> rustilite: struct _X; let x = _X; x
[11:37:44] -rustilite- <anon>:1:12: 1:15 error: expected item but found `let`
[11:37:44] -rustilite- <anon>:1 struct _X; let x = _X; x
[11:37:44] -rustilite-                     ^~~
[11:37:44] -rustilite- application terminated with error code 101
[11:37:54] <kimundi> rusti: struct _X; let x = _X; x
[11:37:55] -rusti- main::_X
[11:38:11] <huon> oh
[11:38:15] <huon> I have a bug to file
[11:38:23] <huon> thanks for reminding me kimundi
[11:38:24] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:38:34] <kimundi> huon: reminding about what?
[11:38:37] <huon> the bug
[11:38:43] <kimundi> what bug?
[11:39:04] * kimundi is confused
[11:39:05] <eddyb> http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/3815/steps/test/logs/stdio
[11:39:08] <eddyb> *the tutorial*?
[11:39:13] <eddyb> what on earth is going on
[11:39:17] <huon> rusti: mod foo { pub fn bar() {} } match () { foo::bar => {} }
[11:39:18] -rusti- <anon>:11:48: 11:56 error: mismatched types: expected `()` but found an enum or structure pattern
[11:39:18] -rusti- <anon>:11         mod foo { pub fn bar() {} } match () { foo::bar => {} }
[11:39:18] -rusti-                                                          ^~~~~~~~
[11:39:19] -rusti- error: aborting due to previous error
[11:39:19] -rusti- application terminated with error code 101
[11:39:35] <eddyb> "Ownership_escape_hatches_0"
[11:39:36] <huon> rusti: mod foo { pub fn bar() {} } enum Foo { A } match A { foo::bar => {} }
[11:39:36] -rusti- <anon>:11:62: 11:70 error: mismatched types: expected `main::Foo` but found a structure pattern
[11:39:37] -rusti- <anon>:11         mod foo { pub fn bar() {} } enum Foo { A } match A { foo::bar => {} }
[11:39:37] -rusti-                                                                        ^~~~~~~~
[11:39:37] -rusti- error: aborting due to previous error
[11:39:38] -rusti- application terminated with error code 101
[11:39:39] <kimundi> eddyb: The docs are also tested
[11:39:42] <huon> kimundi: ^
[11:39:52] <eddyb> I know that... but I failed in the tutorial :(
[11:40:06] <huon> the error message mentions "struct", and your rusti input had 'struct' in it
[11:40:08] <kimundi> tutorial is part of the docs
[11:40:25] <kimundi> huon: Ah, span error?
[11:40:38] <huon> kimundi: nah, functions aren't structure patterns
[11:41:44] <eddyb> kimundi: I'm not questioning that... it just bums me
[11:41:49] <eddyb> I wonder who added this when
[11:41:52] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[11:41:54] <kimundi> huon: Ah, now I get it. Instead of talking about a struct pattern, it should either just talk about paths in general, or find out why exactly its wrong, right?
[11:42:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:43:42] <huon> https://github.com/mozilla/rust/issues/12863
[11:44:29] <huon> it should say "mismatched types: expected `()` but found a function `fn()`" or something
[11:46:44] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[11:52:50] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:02:55] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:13:21] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[12:16:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:18:53] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:19:18] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:21:06] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:23:08] <eddyb> here we go, 4th round: https://github.com/mozilla/rust/pull/12610
[12:23:16] <eddyb> huon: ^ care to r=nmatsakis :D?
[12:23:51] <eddyb> at least the vec thing seems to be doing fine
[12:24:54] <huon> eddyb: just updating tutorial etc. right?
[12:25:08] <eddyb> yupp, removing a .borrow() call
[12:25:31] <eddyb> rusti: *Rc::new([1, 2]) == [1, 2]
[12:25:32] -rusti- pastebinned 11 lines of output: http://sprunge.us/hjDa
[12:25:36] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[12:25:44] <eddyb> rusti: *::std::rc::Rc::new([1, 2]) == [1, 2]
[12:25:46] -rusti- true
[12:25:53] <eddyb> got scared there for a second :)
[12:29:43] <eddyb> huon: thanks :D. oh wow the win bots are lagging behind :/
[12:29:48] <eddyb> needs more turbo boost
[12:34:47] <flaper87> huon: re 12863, I agree it should say the type it found
[12:34:58] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:46:45] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[12:46:45] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Oby8QQ
[12:46:45] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[12:47:41] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:51:42] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[12:51:42] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/ih8iqg
[12:51:42] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[12:51:55] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:54:28] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:56:02] *** Joins: edwardw (edwardw@1D7F790C.5EE4C3F5.F113998C.IP)
[12:57:56] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Ping timeout)
[12:58:27] *** Joins: mawuli (mawuli@moz-A135DF9D.com.gh)
[12:59:22] *** Quits: mawuli (mawuli@moz-A135DF9D.com.gh) (Quit: Leaving)
[13:01:02] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[13:06:48] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[13:13:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:13:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:16:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:18:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:20:57] <edwardw> What `ItemImpl` becomes in typeck?
[13:21:43] <eddyb> nothing?
[13:22:17] <eddyb> mainly types are special in rustc::middle
[13:22:18] <edwardw> nothing?
[13:23:36] <edwardw> k, let me put it another way. In typeck walk, how do I know I see a `for` part of what was `ItemImpl`?
[13:24:10] <eddyb> it still is an ItemImpl
[13:24:47] <eddyb> the ast type node after the `for` probably gets a type assigned to it
[13:24:47] <edwardw> Oh, def_id -> item then match?
[13:25:23] <eddyb> I think you have to extract the NodeId of the AST type
[13:25:26] <edwardw> k
[13:25:36] <eddyb> also look in middle::ty
[13:25:48] <eddyb> there might be something taking a DefId and returning useful information
[13:25:54] <edwardw> there are `ast::DefId` everywhere in `ty.rs`
[13:25:54] <eddyb> (this stuff is easy to break cross-crate)
[13:27:19] <eddyb> look at the return types
[13:27:49] <edwardw> gotcha
[13:31:07] <pnkfelix> nmatsakis: 
[13:31:09] <pnkfelix> doh
[13:31:10] <pnkfelix> nmatsakis: ping
[13:31:14] <nmatsakis> pnkfelix: yessir
[13:31:24] <pnkfelix> nmatsakis: http://blog.pnkfx.org/blog/2014/03/13/an-insight-regarding-dst-grammar-for-rust/
[13:31:33] <eddyb> nmatsakis: greeen pls http://buildbot.rust-lang.org/console?branch=auto&refresh=15
[13:31:38] <eddyb> this is like the 4th try
[13:32:14] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[13:32:18] <nmatsakis> pnkfelix: interesting, will read, I agree maybe a better marker is out there
[13:32:22] <nmatsakis> sizedorunsized
[13:32:26] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[13:33:03] <eddyb> so trait<*> Functor {...} becomes trait Functor for <*> {...}
[13:33:09] <eddyb> if we reuse that notation
[13:33:27] <pnkfelix> (hmm something went wrong with the web formatting, at least one spot where I wrote <T> it was interpreted as html)
[13:33:50] <nmatsakis> pnkfelix: I don't have this
[13:33:57] <nmatsakis> *hate this
[13:34:07] <eddyb> I don't like trait Foo<unsized Self> because it makes Self look like a type parameter
[13:34:19] <nmatsakis> (which it is, but yeah)
[13:34:19] <eddyb> which it kinda isn't. and I like how it's not exactly like Haskell
[13:34:27] <nmatsakis> it's a privileged one, anyway
[13:34:30] <pnkfelix> eddyb: no, I do not think your hypothesis above is right
[13:34:40] <eddyb> for which one?
[13:34:47] <nmatsakis> I like pnkfelix's `for` idea (as in, "trait Foo for unsized" or "trait Foo for type")
[13:35:06] <pnkfelix> eddyb: well, strictly speaking, we don't have any syntax now that looks like `trait<*> Functor ...`
[13:35:18] <pnkfelix> eddyb: so I don't know what you meant by "Foo becomes Bar"
[13:35:19] <nmatsakis> (also, I have no idea what trait<*> is supposed to be)
[13:35:43] <eddyb> nmatsakis: HKT
[13:35:46] <nmatsakis> oh
[13:35:49] <nmatsakis> I'm just assuming we'll infer kinds :)
[13:35:51] <nmatsakis> maybe I shouldn't be
[13:36:04] <eddyb> I don't think we can
[13:36:09] <eddyb> (at least not easily)
[13:36:27] <nmatsakis> maybe not, I haven't thought about it too hard
[13:36:38] <nmatsakis> I guess it'd be whole crate
[13:37:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:37:58] <eddyb> pnkfelix: haven't finished it, but does it mean we can get rid of the "unsized" keyword?
[13:38:03] <pnkfelix> eddyb: probably
[13:38:20] <pnkfelix> nmatsakis: I think this approach allows to one nice macros too.
[13:38:42] <pnkfelix> nmatsakis: e.g. you can make your macro maximally general, by using `<type T:$BoundsFromMacroInvocation>`
[13:38:54] <pnkfelix> nmatsakis: and then the macro client will pass in Sized, or not, depending on their needs.
[13:39:00] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:39:15] <pnkfelix> sed -e 's/to one nice macros/to have nice composable macros/'
[13:39:17] <eddyb> pnkfelix: \o/ I see a gem very important to me
[13:39:22] <eddyb> the Unsized bound
[13:39:44] <eddyb> being able to restrict a type param to almost only traits
[13:40:03] <eddyb> helps Many, for example
[13:40:05] <nmatsakis> pnkfelix: in a sense, the `type` IS a kind bound
[13:40:10] <nmatsakis> or rather, it could be generalized to a kind bound
[13:40:17] <eddyb> type<*><*, *>
[13:40:22] <pnkfelix> nmatsakis: I think I sort of got at this towards the end,
[13:40:32] <nmatsakis> oh, I didn't all the way to the end :)
[13:40:41] <nmatsakis> ah, I see, const
[13:40:43] <pnkfelix> nmatsakis: though I was thinking of the option of using `const` for the kind of (static) values
[13:40:52] <pnkfelix> nmatsakis: but yes, HKT is another clear kind we might want there
[13:40:55] <nmatsakis> I really want to explore nrc's idea
[13:40:57] <eddyb> (I like the non-currying alien cyborg cyclops spiders)
[13:41:02] <eddyb> nmatsakis: which one?
[13:41:13] <nmatsakis> of an HKT where the kind grammar is not * | K -> K
[13:41:23] <nmatsakis> but rather * | (K,...,K) -> K
[13:41:33] <nmatsakis> in a similar fashoin to the way we do our type grammar
[13:41:42] <pnkfelix> nmatsakis: FX-91 was sort of funky on this point
[13:41:43] <nmatsakis> might solve one of the annoying spots I hadn't quite figured out 
[13:41:44] <eddyb> that's what I was blabbering about ;)
[13:41:59] <eddyb> <K, ..., K> K
[13:42:06] <nmatsakis> pnkfelix: FX-91 had kinds?
[13:42:16] <pnkfelix> nmatsakis: I'd have to double check, but their kind grammar might have been K ::= * | (K, ..., K)
[13:42:24] <pnkfelix> nmatsakis: because I think the `=> *` was implicit
[13:42:35] <nmatsakis> are we talking about lucas and gifford's thing?
[13:42:37] <eddyb> it's also implicit in my case
[13:42:40] <pnkfelix> nmatsakis: I remember being very confused by it when I first read it
[13:42:42] * nmatsakis hopes he got the names right
[13:42:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:42:46] <eddyb> nmatsakis: I don't think we'll have a Scala issue with type lambdas, fwiw
[13:42:49] <pnkfelix> nmatsakis: yeah that's right, gifford et al
[13:42:59] <nmatsakis> huh, ok. clearly I have to re-read that
[13:43:06] * pnkfelix spent many many hours poring over those reference manuals
[13:43:12] <nmatsakis> I just read the arena papers
[13:43:16] <pnkfelix> way more time than actually trying to decipher the Lisp source code.
[13:43:18] <nmatsakis> eddyb: what's implicit?
[13:43:44] <eddyb> so something like <type<*> T>
[13:44:03] <pnkfelix> wow, you really cannot usefully google for "FX 91" today as well as you could back in 2000/2001
[13:44:04] <eddyb> means that T<U> produces a type. there is no "return type"
[13:44:12] <nmatsakis> well, yes there is
[13:44:17] <nmatsakis> it's the keyword "type"
[13:44:22] <eddyb> oh hehe
[13:44:34] <nmatsakis> but I think it'd be
[13:44:35] <nmatsakis> type<type>
[13:44:41] <eddyb> well, previously <T<*>> - maybe there it's implicit?
[13:44:44] <nmatsakis> doesn't C++ do something similar? I have to refresh my memory
[13:44:49] <eddyb> nmatsakis: if we want to be verbose (and clear), yeah
[13:44:59] <pnkfelix> nmatsakis: yeah, okay, the grammar for FX-91 was `K ::= type | effect | (->> K_1 ... K_n)`
[13:44:59] <nmatsakis> yeah it is wordy
[13:45:00] <eddyb> typename<typename> T
[13:45:08] <nmatsakis> pnkfelix: I like this proposal
[13:45:20] <pnkfelix> nmatsakis: I've been going nuts about it all morning
[13:45:36] <eddyb> reminds me of my tuple relevation (in VG)
[13:45:47] <pnkfelix> nmatsakis: it took me like 4 hours to fix my octopress setup
[13:45:55] <pnkfelix> nmatsakis: and then a half hour to actually write the post.  :)
[13:46:03] <nmatsakis> pnkfelix: the interesting question to me is whether you could do GenericType<A,_,C> to yield a type of kind * -> *
[13:46:05] <eddyb> "we have tuples and we can use them!" and since then I've been generating crazy examples
[13:46:19] <nmatsakis> eddyb: ps the new RFC process would be great for variadic generics ;)
[13:46:24] <eddyb> nmatsakis: the issue with that is when you have more than one
[13:46:34] <eddyb> oh yeah I need to make like 3-4 RFCs
[13:46:41] <eddyb> do I have time for at least one? not really
[13:46:49] <eddyb> so what does Result<_, _> do?
[13:46:54] <eddyb> is it Result?
[13:46:57] <nmatsakis> I've had some more thoughts, I was thinking that about a scaled back version of your proposal
[13:47:01] <eddyb> is it <T><U> Result<T, U>
[13:47:04] <nmatsakis> that just includes (1) a Tuple bound,
[13:47:16] <nmatsakis> and (2) the ability to declare a fn like fn(...args:Args) where Args must be a Tuple type
[13:47:25] <nmatsakis> seems to avoid all interactions with HKT
[13:47:28] <nmatsakis> and models fns
[13:47:39] <eddyb> nmatsakis: we just need to drop currying
[13:47:47] <nmatsakis> drop currying?
[13:47:53] <nmatsakis> I mean, that is what HKT is all about.
[13:47:57] <eddyb> we don't have currying anywhere else, not for types and not for functions
[13:48:06] <nmatsakis> it's remarkably less useful without currying
[13:48:10] <eddyb> how so?
[13:48:30] <eddyb> Haskell can't do <..*>
[13:48:32] <pnkfelix> nmatsakis: I'm not sure I agree with that
[13:48:42] <pnkfelix> nmatsakis: but then again, how much HKT'ed code have I written...
[13:48:52] <nmatsakis> I guess it depends on what we mean exactly
[13:48:57] <nmatsakis> one of the big use cases I would like to address is:
[13:49:03] <eddyb> we can have type Append<..A><..B>(..A, ..B);
[13:49:21] <eddyb> or just <..A><..B>(..A, ..B) as a type lambda
[13:49:26] <nmatsakis> being able to have a type parameter like &'_ T
[13:49:37] <nmatsakis> that is, a reference without the region having yet been specified 
[13:49:45] <nmatsakis> this crops up in various places
[13:49:47] <eddyb> so that becomes <'*>?
[13:49:55] <nmatsakis> the kind would be LT -> *
[13:49:58] <nmatsakis> where LT is "lifetime"
[13:50:10] <nmatsakis> presumably that's what you meant but I'm not sure :)
[13:50:10] <kimundi> Is that usage of _ in the type grammar here something like the bind syntax Rust used to have for closures? Just on type level?
[13:50:20] <nmatsakis> yes
[13:50:26] <nmatsakis> I'm not necessarily proposing that syntax
[13:50:29] <eddyb> hmm, so you want currying for lifetimes?
[13:50:43] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[13:50:48] <nmatsakis> no, I wanted currying for all components
[13:50:56] <nmatsakis> because sometimes I want a &'foo _
[13:51:00] <eddyb> though it looks like inference to me
[13:51:02] <nmatsakis> that was one of the things I've been wrestling with
[13:51:10] <nmatsakis> sometimes you want the kind of & to LT -> * -> *
[13:51:13] <nmatsakis> and sometimes * -> LT -> *
[13:51:16] <eddyb> I can't tell without a more concrete example
[13:51:19] <nmatsakis> which is why nrc's proposal is appealing
[13:51:24] <nmatsakis> however,
[13:51:28] <nmatsakis> there is this other issue, 
[13:51:34] <eddyb> the only problem with not currying is some verbosity
[13:51:36] <kimundi> Hm, now I wonder what the difference between currying and sugar for a implicit lambda is
[13:51:37] <nmatsakis> related to bound lifetimes and the proposed unboxed closure traits
[13:51:45] <nmatsakis> kimundi: it's more limited.
[13:51:50] <eddyb> LT -> * -> * would be <'*><*>
[13:51:54] <kimundi> nmatsakis: which one?
[13:51:57] <nmatsakis> kimundi: currying.
[13:52:09] <eddyb> and the other one is <*><'*>
[13:52:12] <nmatsakis> note that what I just wrote is not currying
[13:52:16] <nmatsakis> but closer to an implicit lambda
[13:52:21] <kimundi> nmatsakis: But only because of the "append only" way you can compose them, right?
[13:52:22] <eddyb> but then you can have <'*, *>
[13:52:45] <nmatsakis> I don't have all the requirements and implications "swapped in" to my head, either, so I don't claim to understand the full tradeoffs here. I just have this sense of "type lambdas beware"
[13:52:46] <eddyb> nmatsakis: I really want HKT + default type params & variadic generics to "just work"
[13:53:07] <eddyb> the issue in Scala, AFAIK, is that type lambdas are a complete hack
[13:53:14] <nmatsakis> I guess the question is what that means ("just work")
[13:53:22] <eddyb> <..*>
[13:53:26] <nmatsakis> I don't yet see a need for variadic generics beyond the limited form I proposed,
[13:53:32] <nmatsakis> so i'd like to see more concrete use cases
[13:53:42] <eddyb> does that work for all the examples in my RFC?
[13:53:44] <nmatsakis> (same goes for me and my thoughts :)
[13:53:49] <nmatsakis> there is no RFC
[13:53:52] <nmatsakis> ;)
[13:54:00] <nmatsakis> but I guess you mean your issue...and I don't know
[13:54:19] <eddyb> I hope this isn't what you meant by "I have plans for you" (bugging me about writing an RFC)
[13:54:34] <nmatsakis> it's not clear to me how important it is compose append tuples and so on?
[13:54:58] <nmatsakis> anyway, I have to go look,
[13:55:02] <eddyb> (Head, ..Tail) is like the building block of recursive implementations using tuples
[13:55:20] <eddyb> I figured out how to implement TupleZip, and now I want that to work :P
[13:55:21] *** Quits: edwardw (edwardw@1D7F790C.5EE4C3F5.F113998C.IP) (Ping timeout)
[13:55:25] <eddyb> (requires associated items)
[13:55:45] <eddyb> re: Scala they're like doing {struct S<T> {type X = Foo<A, B, T>;} foo::<S::X>(...)}
[13:55:55] <eddyb> err, I did it wrong
[13:56:14] <eddyb> {struct S {type X<T> = Foo<A, B, T>;} foo::<S::X>(...)}
[13:56:42] <eddyb> when we can have foo::<<T> Foo<A, B, T>>(...)
[13:56:54] <kimundi> I think I get what eddyb is trying to say here earlier, and kinda agree: We don't use currying anywhere else in Rust, we only support explicitly splitting up N arguments into M and N-M arguments with lamdas
[13:56:57] <eddyb> what are the problems with *that*?
[13:57:12] <nmatsakis> kimundi: yes, that is true
[13:57:21] <nmatsakis> unfortunately I've got other things to do and as I said I don't have this all swapped in
[13:57:27] <nmatsakis> I need to go read up on the underlying theory and so on
[13:57:30] <eddyb> buy more RAM
[13:57:33] <eddyb> (I know I have to)
[13:57:52] <eddyb> nmatsakis: http://www.downloadmoreram.com/
[13:57:56] <nmatsakis> ;)
[13:58:15] *** Joins: edwardw (edwardw@EA6A9A16.6707B7A9.D06A5682.IP)
[13:58:36] <eddyb> maybe we're turning too much into C++... I don't know. I just have this need for steering away from things I don't like. maybe I shouldn't do that
[14:00:06] <kimundi> Btw, I find it kinda awesome that I'm starting to really understand HKT and typesystem concerns in general simply because I've read enough discussions about them here :D
[14:00:25] <eddyb> nmatsakis: in case, you know, I never end up writing a RFC about it, http://www.reddit.com/r/rust/comments/20b3dz/virtual_fn_is_a_bad_idea/cg1irqt
[14:00:45] <eddyb> kimundi: same here :P
[14:00:59] <eddyb> I didn't know what HKT was until a couple of months ago
[14:01:09] <eddyb> and I have to bastardize the syntax so I can read what I'm writing
[14:01:42] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[14:01:42] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/MMA4NQ
[14:01:42] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[14:01:55] <kimundi> eddyb: gz, it landed!
[14:03:53] <eddyb> prepare the snapshot!
[14:04:04] <eddyb> I want to start working on P tomorrow
[14:06:41] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[14:06:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/OMQdMQ
[14:06:41] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[14:11:41] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[14:11:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/OMQdMQ
[14:11:41] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[14:11:43] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[14:11:43] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/sSr3Sw
[14:11:43] <ghrust> 13rust/06auto 140d80de0 15Nick Cameron: Update last_span in replace_token
[14:11:43] <ghrust> 13rust/06auto 1405975a4 15bors: auto merge of #12849 : nick29581/rust/doubles, r=alexcrichton
[14:11:44] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[14:12:09] <nmatsakis> pnkfelix: the other thing I like a lot about your `type` proposal,
[14:12:24] <nmatsakis> is that it means we can add new traits that are enabled-by-default
[14:12:30] <nmatsakis> and most code gets them
[14:12:36] <eddyb> ohh, right
[14:12:38] <nmatsakis> though it's not *exactly* backwards compat
[14:12:43] <nmatsakis> in the sense that the requirements still increase
[14:13:01] <pnkfelix> nmatsakis: hmm.  I was about to say "isn't that taking a step backwards from opt-in, which we just agreed upon"
[14:13:17] <pnkfelix> nmatsakis: but I guess the real point of opt-in was that we have been *inferring* whether you are Send, etc
[14:13:28] <pnkfelix> nmatsakis: but with opt-in you must declare it explicitly
[14:13:37] <pnkfelix> nmatsakis: and that is sort of an orthogonal concern to this
[14:14:06] <pnkfelix> nmatsakis: so, yeah.  I guess I agree with you that this could be another plus.  :)
[14:16:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:22:29] <nmatsakis> pnkfelix: yeah but I think in practice the price would be so high we'd never do it 
[14:22:43] <nmatsakis> i.e., every bit of existing code in the stdlib would have to go from <T> to <type T:Sized>
[14:22:46] <nmatsakis> to keep th same reqs
[14:22:54] <nmatsakis> but I guess if we didn't mind breaking backwards compat
[14:23:03] <nmatsakis> we could do it
[14:23:13] <nmatsakis> very unlikely but an ace in our pocket :)
[14:23:19] <nmatsakis> e.g., Rust 1.x -> 2.0
[14:23:30] <pnkfelix> right, I was just about to say "for Rust 3.0"
[14:23:48] <nmatsakis> anyway I think you're on to something
[14:23:52] <nmatsakis> particularly when it combines with HKT
[14:24:00] <nmatsakis> that is, I like the idea of saying, we have this shorthand form
[14:24:03] <nmatsakis> for types with common bounds
[14:24:08] <nmatsakis> and then we have this more explicit form
[14:24:12] <nmatsakis> one wrinkle,
[14:24:25] <nmatsakis> is that if we hvae the Sized trait,
[14:24:29] <nmatsakis> it raises the question on why it's not "opt in"
[14:24:36] <nmatsakis> but I think I would just say: just as it's the default bound,
[14:24:51] <nmatsakis> it defaults to opt in 
[14:24:59] <nmatsakis> which isn't quite accurate,
[14:25:03] <nmatsakis> I guess it'd be accurate if you had to write
[14:25:07] <nmatsakis> type struct Foo { ... }
[14:25:11] <nmatsakis> or kind of accurate
[14:25:21] <eddyb> 74% accurate
[14:25:40] * nmatsakis gets back to what he's supposed to be doing dang it
[14:29:56] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Ping timeout)
[14:30:13] <eddyb> hmm, whom should I bug? acrichto?
[14:30:31] <eddyb> (can you tell I want a snapshot?)
[14:31:21] <tedh_> i doubt you can get a snapshot with the mac bots down
[14:31:51] <eddyb> :(
[14:32:09] <eddyb> wait, linux is down as well? brson pls
[14:32:23] <flaper87> eddyb: just mac and android, AFAIK
[14:33:03] <eddyb> flaper87: http://buildbot.rust-lang.org/buildslaves
[14:33:27] <eddyb> linux1b and linux2b are down
[14:33:29] <flaper87> eddyb: oh oh
[14:33:52] <pnkfelix> nmatsakis: darn it niko, you're going deny my claim that `type struct Foo { ... }` looks nonsensical?
[14:36:44] <nmatsakis> pnkfelix: I will not deny that claim
[14:37:01] <nmatsakis> pnkfelix: I'm happy saying "Sized is so common, we make the it the default and infer whether a type belongs"
[14:37:05] <pnkfelix> nmatsakis: oddly enough after being forced to consider it
[14:37:22] <pnkfelix> nmatsakis: I started to wonder whether `struct type Foo { ... }` is potentially palatable
[14:37:29] <pnkfelix> nmatsakis: but, no, no
[14:38:03] <nmatsakis> pnkfelix: it's really not. we're already being inconsistent about Sized to begin with in the name of general usability, why not continue doing so
[14:42:38] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[14:54:28] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:57:32] *** Quits: hidensoft (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP) (Quit: Leaving)
[14:57:44] *** Joins: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP)
[14:58:42] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[14:59:49] *** Joins: newbie (kvirc@moz-FBADA4B7.dip0.t-ipconnect.de)
[15:00:08] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:22] *** Quits: eibwen (kvirc@moz-48B987C8.dip0.t-ipconnect.de) (Ping timeout)
[15:12:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:13:20] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:14:46] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[15:15:08] *** Joins: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:16:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:17:36] *** Quits: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:18:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:21:50] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[15:21:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/sSr3Sw
[15:21:50] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[15:25:24] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:25:24] *** ChanServ sets mode: +ao dherman dherman
[15:26:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:26:42] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[15:26:42] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/_ozzVQ
[15:26:42] <ghrust> 13rust/06auto 14f568720 15Ian Daniher: enable mutex lowering and hardware floating point on gnueabihf. closes #10482
[15:26:42] <ghrust> 13rust/06auto 146ca5773 15bors: auto merge of #12852 : itdaniher/rust/master, r=alexcrichton...
[15:26:43] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[15:32:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:37:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:40:58] *** newbie is now known as eibwen
[15:42:15] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[15:42:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:43:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[15:43:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:43:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:53:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:58:31] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[15:59:06] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[15:59:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:59:49] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[16:00:36] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:02:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:08:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:10:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:16:22] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:18:24] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:22:39] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:28:18] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[16:36:40] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[16:36:40] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/_ozzVQ
[16:36:40] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[16:37:24] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[16:41:37] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[16:41:37] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/9mDNHA
[16:41:37] <ghrust> 13rust/06auto 14ed2b3a2 15Kiet Tran: Add shift and remove methods for Vec
[16:41:37] <ghrust> 13rust/06auto 149faa2a5 15Kiet Tran: Suggest explicit lifetime parameter on some errors...
[16:41:38] <ghrust> 13rust/06auto 143fbee34 15bors: auto merge of #12238 : ktt3ja/rust/lifetime-error-msg, r=nikomatsakis...
[16:41:40] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[16:51:27] *** Quits: Kxepal (Miranda@moz-E7D8C0DD.pppoe.mtu-net.ru) (Quit: Kxepal)
[16:51:45] *** Joins: Kxepal (Miranda@moz-E7D8C0DD.pppoe.mtu-net.ru)
[16:53:12] *** Joins: Kxepal832 (Miranda@moz-7AD032F4.pppoe.mtu-net.ru)
[16:53:35] *** Quits: Kxepal (Miranda@moz-E7D8C0DD.pppoe.mtu-net.ru) (Ping timeout)
[17:00:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:02:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:05:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:07:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:15:27] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:17:32] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[17:21:37] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[17:28:56] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:28:57] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:35:29] <eddyb> pcwalton: so deref landed, I don't think we can get a snapshot because linux and mac are down
[17:35:36] <pcwalton> cool
[17:35:41] <pcwalton> thanks for the work on that!
[17:35:41] <eddyb> pcwalton: do you have any specific plans for removing @?
[17:36:12] <pcwalton> removing @ from the language? I haven't given it much thought lately but now that Deref is in I guess it'd be pretty straightforward to convert all @s to Rc
[17:36:18] <eddyb> I want to not add Rc at all, unless it's one of those corner cases (just one of them in liveness, who had like 10 unneeded @RefCell)
[17:37:27] <eddyb> it's easier to switch the ast to P<T> (which I should've done some time ago), and make that P<T> an alias for a Rc without a weak refcount and with support for in-place folding (instead of modifying Rc and using that)
[17:37:52] <eddyb> that feels less intrusive and easier to perform mass replacements on than Rc, mixed with legitimate Rc uses
[17:44:12] <eddyb> pcwalton: see how small language item collection is here? http://huonw.github.io/isrustfastyet/mem/
[17:44:30] <pcwalton> sure
[17:44:31] <pcwalton> that works
[17:44:46] <eddyb> that's a full Visitor. and probably less efficient as it could be. imagine noop folding being just as fast
[17:45:14] <eddyb> cfg only removes nodes and it's slow and it's increasing RAM usage. in-place folding would fix both of those things
[17:45:21] <pcwalton> right
[17:46:22] <kimundi> eddyb: At least nightlies will get Deref, so end users can start coding against it already even though there isn't a snapshot yet
[17:46:24] <eddyb> I even figured how to do it efficiently for ~[Item].map(|Item| -> SmallVec<Item>), reusing immediately available memory
[17:46:44] <eddyb> kimundi: yeah, I know... but the compiler is the main place I want to use it in :(
[17:46:49] <kimundi> yeah
[17:47:04] <eddyb> I think the first thing to do after we get a snapshot is to remove the .get method on Ref and RefMut
[17:47:09] <eddyb> and just fix the errors :P
[17:47:26] <kimundi> btw, I have a patch in the works for removing map() on vectors directly, instead using iterators 
[17:48:14] <eddyb> you still need a specific method for in-place map and flat_map. but it's not like you have to implement it in libstd
[17:48:41] <kimundi> but thats waiting on type hints landing, and me starting from scratch because most of what I had became invalidated by the switch from ~[T] to Vec<T> in the compiler ;)
[17:49:13] <kimundi> eddyb: those two are what I'm removing, primary. Why do you think you need them?
[17:49:26] <eddyb> kimundi: those aren't in-place
[17:49:32] <kimundi> ah
[17:49:36] <kimundi> define inplace then
[17:49:51] <eddyb> self[i] = f(self[i])
[17:49:59] <eddyb> might involve some unsafe magic
[17:50:08] <kimundi> for e in vec.mut_iter() { f(e); }
[17:50:27] <kimundi> doesn'T sound very magical to me :P
[17:50:34] <eddyb> kimundi: you need to swap things around
[17:50:38] <kimundi> Unless you're talkign about beng able to change the tyep
[17:50:47] <eddyb> T isn't Pod
[17:50:53] <eddyb> since it contains shared pointers
[17:51:03] <eddyb> I guess init() is fine for the time being
[17:51:06] <nmatsakis> eddyb: this seems like it'd be the topic of an RFC
[17:51:07] * nmatsakis broken record
[17:51:11] <kimundi> hu? I don'T follow
[17:51:11] <eddyb> (failure-wise)
[17:51:27] <eddyb> kimundi: you know what move_iter() does, right?
[17:51:32] <kimundi> yes
[17:51:35] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[17:51:36] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/9mDNHA
[17:51:36] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[17:52:30] <eddyb> at a high level, I want to do for (dst, src) in v.out_iter().zip(v.move_iter()) {*dst = f(*src);}
[17:52:45] <eddyb> move out, pass through folder, put back in
[17:53:04] <eddyb> can't clone because then you lose the value semantics you need for in-place folding
[17:53:15] <eddyb> is .collect::<Vec<_>>() shorter than .to_owned_vec()? they look quite close to me
[17:53:36] <kimundi> eddyb: Well they don't look close anymore once we remove to_owned_vec() :P
[17:54:07] <eddyb> rusti: ("collect::<Vec<_>>".len(), "to_owned_vec()".len())
[17:54:08] -rusti- (17u, 14u)
[17:54:08] <kimundi> let v: Vec<_> = someiter.collect();
[17:54:22] <eddyb> that's probably shorter
[17:54:44] <eddyb> "::<>" were replaced by ": "
[17:54:52] <eddyb> so 15 vs 14. not bad
[17:54:59] <kimundi> rusti: ("collect::<Vec<_>>".len(), "to_owned_vec()".len(), "collect::<~[_]>".len())
[17:54:59] -rusti- (17u, 14u, 15u)
[17:55:56] <kimundi> hehe, roadkill fish: ::<~[_]> 
[17:56:10] <eddyb> okay, so at least I know what I can do in the two hours I have left: clean up my @ removal PR
[17:56:15] <eddyb> and maybe do more in it
[17:56:27] <eddyb> you can never have too many @ kills
[17:56:36] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[17:56:36] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/D9BQiQ
[17:56:36] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[17:56:37] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[17:56:37] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/QfnrMQ
[17:56:37] <ghrust> 13rust/06auto 144a00211 15Piotr Zolnierek: std::unicode: remove unused category tables
[17:56:37] <ghrust> 13rust/06auto 1404170b0 15Piotr Zolnierek: Implement lower, upper case conversion for char
[17:56:37] <ghrust> 13rust/06auto 14dba5625 15Piotr Zolnierek: Remove code duplication...
[17:56:39] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[18:01:01] *** Joins: lkuper (lkuper@moz-F1E67C2A.hsd1.in.comcast.net)
[18:05:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:08:37] <eddyb> github pls. no timeouts
[18:10:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:10:24] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:12:01] <eddyb> rusti: let strcat = ::std::rc::Rc::new(~"foo"); strcat.len()
[18:12:05] -rusti- <anon>:11:50: 11:62 error: type `std::rc::Rc<~str>` does not implement any method in scope named `len`
[18:12:05] -rusti- <anon>:11         let strcat = ::std::rc::Rc::new(~"foo"); strcat.len()
[18:12:05] -rusti-                                                            ^~~~~~~~~~~~
[18:12:05] -rusti- error: aborting due to previous error
[18:12:07] -rusti- application terminated with error code 101
[18:12:19] <eddyb> time to update ;)
[18:13:17] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[18:13:27] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:13:40] <strcat> rusti: let strcat = ::std::rc::Rc::new(~"foo"); strcat.len()
[18:13:40] -rusti- <anon>:11:50: 11:62 error: type `std::rc::Rc<~str>` does not implement any method in scope named `len`
[18:13:41] -rusti- <anon>:11         let strcat = ::std::rc::Rc::new(~"foo"); strcat.len()
[18:13:41] -rusti-                                                            ^~~~~~~~~~~~
[18:13:41] -rusti- error: aborting due to previous error
[18:13:42] -rusti- application terminated with error code 101
[18:13:49] <strcat> eddyb: last nightly still doesn't have that
[18:13:57] <eddyb> oh, nightlies :/
[18:14:05] <eddyb> it's only been a couple hours or so
[18:15:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:17:24] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[18:20:31] <cmr> huon: pong
[18:20:56] <cmr> eddyb: yay it landed!
[18:21:07] <eddyb> :)
[18:21:22] <kimundi> strcat: when do the nightlies usually update, in relative time to now?
[18:21:32] <strcat> dunno
[18:21:43] <strcat> it's in a load average queue
[18:34:41] <eddyb> why am I getting LLVM errors?
[18:34:50] <eddyb> (that's imprecise) /home/eddy/Projects/rust/src/rustllvm/rustllvm.h:55:38: fatal error: llvm/IR/IRPrintingPasses.h: No such file or directory
[18:40:01] <eddyb> what is wrong with this?
[18:40:36] <eddyb> #if LLVM_VERSION_MINOR >= 5
[18:41:02] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Ping timeout)
[18:41:28] <eddyb> wait, I have the file... why is it not picking that up?
[18:43:25] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[18:44:02] <eddyb> *sigh* works without -j2. parallel is hard :(
[18:46:30] <eddyb> no it's not that. still fails, just later
[18:47:17] <eddyb> acrichto: is rust using system LLVM by default now or something?
[18:49:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:51:56] <cmr> no.
[18:52:13] <eddyb> okay, let's see
[18:52:25] <eddyb> ./configure --target=arm-linux-androideabi,x86_64-unknown-linux-gnu --android-cross-path=/opt/ndk_standalone
[18:52:29] <eddyb> maybe this is broken?
[18:53:17] <acrichto> no we're still using our bundled llvm by default
[18:56:52] <strcat> huon: around?
[18:57:10] <eddyb> reverting to x64 only, let's see if that works
[19:02:34] <eddyb> it's not android...
[19:02:48] <cmr> nuke it. clean build.
[19:02:48] <eddyb> I basically can't compile rust :(
[19:02:59] <eddyb> I did make clean and reconfigured 3 times
[19:02:59] <strcat> cmr: you should go do something really tedious for me
[19:03:07] <cmr> strcat: which tedius thing?
[19:03:16] <cmr> I have a long car ride tomorrow :)
[19:03:24] <strcat> cmr: write `fn foo<T: TotalEq>()` and a foo::<T>() call to it by hand out of AST building blocks
[19:03:27] <strcat> ;p
[19:03:31] <strcat> for TotalEq deriving
[19:03:38] * strcat sighs
[19:03:52] <eddyb> hehe
[19:04:02] <eddyb> strcat: should be a method IMO
[19:04:13] <strcat> eddyb: hm/
[19:04:15] <eddyb> so it goes through deref. or maybe not
[19:04:20] <eddyb> *autoderef
[19:04:24] <strcat> eddyb: this will be internal to deriving
[19:04:42] <strcat> anyway I guess it needs
[19:04:58] <strcat> foo<T: TotalEq>(x: &T) {}
[19:05:11] <strcat> and preferably an #[inline(always)] so the debug output is sane...
[19:05:28] <cmr> strcat: wait so what do you want?
[19:05:34] <eddyb> if the actual use is Eq i.e. ==, then I don't think that will work through autoderef
[19:05:42] <eddyb> so it's fine to not test it with autoderef
[19:05:46] <strcat> cmr: TotalEq should just check if each field implements TotalEq and then impl TotalEq
[19:06:07] <strcat> cmr: so instead of equals calls it needs to output static assertions like that
[19:06:11] <strcat> hm
[19:06:42] <cmr> strcat: for #[deriving(TotalEq)] ? Isn't that the same thing the existing deriving infrastructure does for, for example, clone?
[19:06:48] <strcat> cmr: no
[19:06:52] <strcat> cmr: TotalEq won't have a method
[19:07:05] <strcat> TotalEq just means the Eq implementation is total
[19:07:22] <strcat> the method is only around to make deriving(Eq, TotalEq) fail if the fields only implement Eq and not TotalEq
[19:07:36] <strcat> otherwise it's unusable on generic types
[19:07:40] <strcat> and it's easy to get wrong
[19:08:08] <cmr> ah I see now.
[19:08:31] <strcat> I guess we can output one of these verification functions internally in each implementation
[19:10:50] <eddyb> rm -rf x*/llvm
[19:10:59] <eddyb> hoping ccache will do its thing
[19:11:38] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[19:11:38] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/QfnrMQ
[19:11:38] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[19:13:02] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:13:06] <strcat> hm
[19:14:56] <eddyb> whoa, ten cache hits per second
[19:16:36] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[19:16:36] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/7OpU2Q
[19:16:36] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[19:17:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:30:25] <eddyb> cmr: it was a stale LLVM or some such
[19:32:04] <eddyb> acrichto: arm-linux-androideabi isn't ignored
[19:34:44] *** Quits: lkuper (lkuper@moz-F1E67C2A.hsd1.in.comcast.net) (Quit: lkuper)
[19:42:01] <eddyb> I'm still recovering from pnkfelix' changes
[19:45:30] *** Quits: japaric (japaric@A3BB1393.E3ED3AAA.BFC118EE.IP) (Ping timeout)
[19:46:00] *** Joins: japaric (japaric@AF44BDDE.31BF4ADA.BFC118EE.IP)
[19:49:42] <eddyb> why is liveness::ReadKind dead?
[19:49:57] <eddyb> did someone forgot to remove it?
[19:50:08] <eddyb> edwardw: ^^ did you change something in liveness?
[19:50:46] <edwardw> eddyb: I did, removed two `span_err`
[19:51:03] <eddyb> and did that make ReadKind dead?
[19:51:20] <eddyb> i.e. if it weren't pub, would it show a lint?
[19:51:29] <edwardw> I'm not sure, let me check
[19:53:02] <edwardw> it did remove a method which took ReadKind as a parameter
[19:53:13] <edwardw> eddyb: what's the error exactly?
[19:53:47] <eddyb> edwardw: it's fine, it just means I didn't screw up
[19:53:54] <eddyb> next time DCE ;)
[19:53:56] <huon> strcat: yup
[19:54:07] <huon> I am now
[19:55:16] <eddyb> github is taking ages again
[19:55:54] <aatch> Woo, overloaded autoderef landed! :D
[19:57:16] <sfackler> yay!
[19:57:36] <sfackler> death to a.borrow().borrow_mut().get()!
[19:57:57] <aatch> Smart pointer types are now palatable!
[19:58:02] <eddyb> sfackler: snapshot then we remove .get()
[19:58:03] <erickt> yay!
[19:58:14] <eddyb> but we can't get a snapshot atm because linux and mac are dead
[19:58:36] <eddyb> acrichto: any chance non-snapshot bots can be put on snapshot duty? though I guess we don't have any mac ones :(
[20:00:23] <strcat> huon: heeeeeelp ;p
[20:00:37] <strcat> huon: trying to come up with a way to derive TotalEq properly
[20:00:50] <strcat> it doesn't really fit into the existing infrastructure ;(
[20:00:56] <edwardw> there awesome changes landed in a row: backtrace, robin hood and autoderef. hurray!
[20:01:13] <huon> strcat: it has no methods, right?
[20:01:53] <strcat> huon: it will have no methods, atm it has one 
[20:02:04] <strcat> huon: it needs to implement it if and only if each field implements TotalEq
[20:02:16] <strcat> don't know if that's possible
[20:02:47] <huon> strcat: sure it's possible... it may require doing it completely custom though
[20:02:49] <sfackler> strcat: you should be able to do that with something like "fn check<T: TotalOrd>(_: T) {}"
[20:03:08] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:03:09] *** ChanServ sets mode: +qo brson brson
[20:03:10] <sfackler> but that'd cause a type check failure, which may not be what you want?
[20:03:21] <eddyb> sfackler: but where do you do it?
[20:03:25] <eddyb> oh...
[20:03:39] <sfackler> oh, right, there are no methods <_<
[20:03:43] <strcat> sfackler: it shouldn't cause a type ck failure
[20:03:46] <strcat> on generics
[20:03:56] <huon> just create an `impl MyType { fn assert_total_ord() { ... } }`
[20:04:06] <strcat> hm?
[20:04:14] <eddyb> fn __total_eq_test_for_type(x: &Type) {check_total_eq(&x.field); ...}
[20:04:19] <huon> expanding to $(check_total_ord::<FieldType>();)*
[20:04:21] <strcat> I don't quite understand how it's going to work on a generic struct
[20:04:23] <eddyb> strcat: ^^ solution :D
[20:04:36] <huon> eddyb: we already konw the solution :P
[20:04:42] <huon> just implementing it
[20:04:44] <eddyb> but no trait methods
[20:04:46] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:04:58] <eddyb> strcat: on generic structs you usually bind every type param to the trait
[20:05:05] <huon> strcat: `impl<T: TotalEq, U: TotalEq, ...> MyType<T, U> { ... }`
[20:05:07] <eddyb> strcat: you can't really do anything smarter than that
[20:05:12] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:05:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:05:50] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:06:09] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:06:33] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[20:06:37] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[20:06:44] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:09:54] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:09:54] *** ChanServ sets mode: +qo brson brson
[20:10:06] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: leaving)
[20:10:09] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:10:09] *** ChanServ sets mode: +qo brson brson
[20:14:44] *** Quits: edwardw (edwardw@EA6A9A16.6707B7A9.D06A5682.IP) (Quit: Leaving...)
[20:17:26] <eddyb> nmatsakis: time: 22.353 s  compute moves // what do we do there?
[20:17:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[20:17:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:17:58] <eddyb> https://github.com/mozilla/rust/pull/12735 concurrent travis builds, hehe
[20:18:24] <eddyb> pcwalton, nmatsakis: I don't know if I can add much more to that for now, feel free to r+ or at least push to try ^^
[20:18:33] <eddyb> I may have broken rustdoc - or is that the other PR?
[20:19:01] <eddyb> (wait, travis doesn't do a new build on the HEAD? or is it delayed?)
[20:19:10] <eddyb> just removed @RefCell from another module btw. it's getting pretty easy
[20:19:33] <eddyb> pcwalton: thanks, but it seems to have failed :(
[20:19:38] <pcwalton> ok
[20:19:47] <eddyb> oops, just tidy
[20:22:48] <eddyb> and python is so slow :(
[20:22:58] <eddyb> pcwalton: there, fixed that https://github.com/mozilla/rust/pull/12735
[20:23:16] <eddyb> if it gets merged through the night, that would be nice :)
[20:23:39] <eddyb> gtg, gn
[20:26:19] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:26:34] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[20:26:34] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/KOMTkw
[20:26:34] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[20:31:27] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:31:30] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[20:31:30] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/KuVzlg
[20:31:30] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[20:31:31] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[20:31:31] <ghrust> [13rust] 15bors pushed 12 new commits to 06auto: 02https://github.com/mozilla/rust/compare/6ff3c9995e63...6005580c414e
[20:31:31] <ghrust> 13rust/06auto 1496504ec 15Eduard Burtescu: De-@ Session usage.
[20:31:31] <ghrust> 13rust/06auto 14f333f78 15Eduard Burtescu: De-@ ty::ctxt usage.
[20:31:32] <ghrust> 13rust/06auto 141bd9138 15Eduard Burtescu: De-@ tyencode::ctxt and related parts of astencode.
[20:31:34] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[20:41:39] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[20:56:31] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[20:56:31] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/p7-qAA
[20:56:31] <ghrust> 13rust/06auto 142fe9148 15Alex Crichton: log: Introduce liblog, the old std::logging...
[20:56:31] <ghrust> 13rust/06auto 1489fd472 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[20:56:32] <ghrust> 13rust/06auto 14213b6bb 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[20:56:35] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[21:02:03] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[21:03:27] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[21:06:36] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[21:06:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 141337068 to 146ff3c99: 02http://git.io/N3iJvQ
[21:06:36] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[21:06:38] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[21:06:38] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/7dVxEg
[21:06:38] <ghrust> 13rust/06auto 147858065 15Alex Crichton: std: Rename Chan/Port types and constructor...
[21:06:38] <ghrust> 13rust/06auto 14b4d3243 15bors: auto merge of #12815 : alexcrichton/rust/chan-rename, r=brson...
[21:06:38] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[21:12:46] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[21:16:56] <cmr> huon: builds are being transfered.
[21:17:16] <cmr> huon: the old disk was pretty slow. I predict it's going to take an hour or so.
[21:17:59] <cmr> I take that back. 3 hours.
[21:18:05] <cmr> 3 to 6
[21:18:49] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[21:20:25] <aatch> cmr, are you the person that does the windows estimates?
[21:20:55] <cmr> aatch: windows estimates?
[21:21:47] <cmr> aatch: I don't think so, but I also don't know what that means.
[21:23:18] <aatch> cmr, the Windows file transfer estimates are notorious for changing massively in a short amount of time.
[21:23:28] <cmr> oh hah
[21:23:30] <cmr> it was a joke
[21:23:33] <aatch> Often going like 10m -> 1hr -> 1m -> 3 days
[21:23:40] <cmr> no that was just me refining the math.
[21:23:49] <cmr> 1 hour was a rough ballpark, then I did math.
[21:24:05] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:24:05] *** ChanServ sets mode: +qo brson brson
[21:26:58] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:35:14] <acrichto> nmatsakis: ping
[21:35:31] *** Joins: sunfish (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:36:39] <brson> i merged RFC 1 https://github.com/rust-lang/rfcs/blob/master/active/0001-rfc-process.md
[21:38:18] <cmr> \o/
[21:41:45] <huon> cmr: ok
[21:45:12] <ChrisMorgan> brson: where was the several weeks' worth of wrangling? ;-)
[21:46:27] <huon> ChrisMorgan: it was bstrie's fault for being so pathetically meek about the number bikeshed :P
[21:47:33] <ChrisMorgan> brson: how do the unresolved questions fit in with the process?
[21:47:57] * ChrisMorgan had had the general notion that unresolved questions would need to be resolved before an RFC could be accepted
[21:48:20] <brson> ChrisMorgan: not clear on unresolved questions
[21:48:36] <brson> i want the process to be pretty loose though as we adapt
[21:48:52] <ChrisMorgan> Sure.
[21:49:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:52:05] <larsberg> Has anybody seen Rust missing breakpoints under lldb on OSX in new-ish Rusts? https://gist.github.com/larsbergstrom/9537674 It seems to hit it OK in gdb, but gdb seems hit or miss with printing out line numbers...
[21:52:26] <cmr> larsberg: I've seen some people report that breaking on rust_fail *even in gdb* has failed.
[21:53:36] <acrichto> larsberg: hm that's disturbing, can you try breaking on functions lower down in the stack?
[21:53:42] <acrichto> I'm curious if rust_fail is anywhere in the backtrace
[21:53:53] <larsberg> acrichto: sure, I'll give it a try!
[21:53:59] <acrichto> try!(lldb)
[21:54:14] <huon> undefined macro `lldb`
[21:54:18] <larsberg> cmr: on Linux as well? We've gotten used to somewhat flaky debugging there, but Linux has generally been pretty solid for us...
[21:54:25] <cmr> larsberg: unsure.
[21:55:45] <acrichto> larsberg: wait no, it looks like you didn't have a local task available
[21:55:52] <acrichto> so it went straight to abort before rust_fail
[21:56:10] <acrichto> "std::local_data::abort" <- that looks fishy though
[21:56:25] <brson> please file debugging bugs and ping @michaelwoerister
[21:56:53] <brson> ... who is working on LLDB regression testing
[21:57:24] <larsberg> brson: oooh, will do :-) That's motivation for me to make this Servo upgrade easier for someone else to build...
[21:57:31] <acrichto> larsberg: oh wait hm, so you hit a doulbe failure, but yeah you shoud have seen the rust_fail breakpoint hit before the second failure...
[21:57:51] <acrichto> brson: I am excite!
[21:57:57] <larsberg> acrichto: yeah, in gdb, I break on the first failure (the already borrowed)
[21:58:38] <acrichto> larsberg: try breaking on _Unwind_RaiseException
[21:58:45] <acrichto> that should guarantee breaking on the first exception
[21:58:50] <acrichto> and you can see what's back on the stack
[22:01:07] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[22:01:27] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:37] <larsberg> acrichto: hrm, strange, it broke on _Unwind_RaiseException, but the stack is only 5 frames tall (begin_unwind is at the top). 
[22:01:49] <larsberg> I'll try to get some good repros and open a bug...
[22:01:51] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:01:51] *** ChanServ sets mode: +ao dherman dherman
[22:02:30] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:02:30] *** ChanServ sets mode: +qo brson brson
[22:03:09] <acrichto> larsberg: I've seen small stack traces before, it's b/c the return value of the last stack frame is actually outside of the calling function
[22:03:14] <acrichto> (one byte beyond the 'call fail' instruction)
[22:04:38] <kimundi> nmatsakis: ping?
[22:05:01] <kimundi> (huh, why did I put that ? there)
[22:07:02] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:07:56] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:08:23] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:09:05] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:09:05] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:09:25] <huon> acrichto: ping
[22:09:37] <acrichto> huon: pong
[22:09:50] <huon> acrichto: how does one activate the fail!() backtraces?
[22:10:08] <acrichto> RUST_LOG=std::rt::backtrace
[22:10:32] <sfackler> did those merge?!
[22:10:36] <huon> :( not working
[22:10:46] * huon double checks he has a new-enough compiler
[22:11:05] <acrichto> I've found that rustc may not be printing enough
[22:11:10] <acrichto> b/c it swallows output of the sub-task
[22:12:35] <huon> whoops, seems I rebased to upstream/master without pulling first
[22:16:09] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:19:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:21:31] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[22:21:31] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/7dVxEg
[22:21:31] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[22:22:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:24:13] <huon> failure backtraces \o/
[22:24:25] <huon> <3 acrichto
[22:24:37] <acrichto> :D
[22:25:06] <huon> what's the problem with rustc? stderr is captured but not printed?
[22:25:17] * huon has to find an ICE to be able to test
[22:26:22] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Client exited)
[22:26:30] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[22:26:30] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/VeVW-A
[22:26:30] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[22:26:45] <acrichto> huon: yeah stderr is captured, and printed in some cases but not all
[22:26:56] <acrichto> span_fatal does not print stderr, but fail!() prints stderr
[22:27:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:28:07] <huon> ah
[22:29:39] <huon> ah^2: looks like span_bug just calls span_fatal
[22:29:55] <huon> seems like something to fix
[22:30:03] * huon experiments
[22:30:05] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[22:31:32] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[22:31:32] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/VeVW-A
[22:31:32] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[22:31:33] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[22:31:33] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Og_Ixg
[22:31:33] <ghrust> 13rust/06auto 14ac9f7f4 15Alex Crichton: io: Bind to shutdown() for TCP streams...
[22:31:33] <ghrust> 13rust/06auto 1400b633d 15bors: auto merge of #12855 : alexcrichton/rust/shutdown, r=brson...
[22:31:33] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[22:32:08] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:34:45] <flaper87> acrichto: hey, thanks for the reviews in that PR, that's still pretty much WIP, I'm already working on most of the things you mentioned there 
[22:36:11] <nmatsakis> kimundi: pong
[22:38:16] *** kimundi is now known as zz_kimundi
[22:38:23] <acrichto> flaper87: yeah no worries, I was just itching to have safe atomic muts :P
[22:41:22] <flaper87> acrichto: hehehe, I'm working towards that as we speak. After forbidding borrows of static items with unsafe interior I'll work on the atomics thing :D
[22:41:31] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[22:41:31] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/nclimw
[22:41:31] <ghrust> 13rust/06auto 144e880c6 15Huon Wilson: lint: add lint for use of a `~[T]`....
[22:41:31] <ghrust> 13rust/06auto 14424da3f 15Huon Wilson: std: render the vec_ng docs....
[22:41:31] <ghrust> 13rust/06auto 14e96b2e6 15bors: auto merge of #12861 : huonw/rust/lint-owned-vecs, r=thestinger...
[22:41:33] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[22:41:34] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[22:41:34] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1400b633d to 14b4d3243: 02http://git.io/N3iJvQ
[22:41:34] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[22:44:49] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:48:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:51:56] * flaper87 can't believe he actually wrote Unstable<T> in the commit message
[22:52:30] <acrichto> it's just too unsafe!
[22:52:35] <acrichto> even mentioning it must be avoided
[22:53:31] <huon> Unstable<flaper87>
[22:54:19] <flaper87> acrichto: fun part is I found it in some docstrings too T_T :D
[22:54:37] <flaper87> huon: lol, I'm going to take that and change my twitter "name" 
[22:59:46] *** zz_kimundi is now known as kimundi
[23:04:30] <strcat> huon: https://github.com/mozilla/rust/pull/12873 r?
[23:06:58] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[23:07:41] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[23:10:36] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:11:09] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:11:10] *** ChanServ sets mode: +qo brson brson
[23:11:33] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[23:11:33] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/h9AbTg
[23:11:33] <ghrust> 13rust/06auto 14ebbd543 15Alex Crichton: log: Introduce liblog, the old std::logging...
[23:11:33] <ghrust> 13rust/06auto 14f6a15af 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[23:11:33] <ghrust> 13rust/06auto 14ed4190b 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[23:11:35] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[23:13:55] <huon> acrichto: r? https://github.com/mozilla/rust/pull/12874
[23:14:30] <huon> strcat: I'm not really sure :(
[23:15:33] <huon> oh, acrichto commented with what I was thinking
[23:16:59] <ChrisMorgan> acrichto: thanks for the std::comm naming fixes ‚ò∫
[23:17:13] <ChrisMorgan> And for updating the Vim syntax file.
[23:17:50] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[23:18:10] <acrichto> :D
[23:19:30] <acrichto> huon: lgtm, also with a suggestion of brson I think I'll be switching to using RUST_BACKTRACE instead of RUST_LOG, b/c logging is moving out of std anyway
[23:19:42] <acrichto> see https://github.com/alexcrichton/rust/commit/34a21ff42f4c9fb3fe16dcc3605f0cb0384e4f04
[23:19:53] <acrichto> but that hasn't landed yet, so no need to fret just yet
[23:20:01] <huon> phew
[23:20:04] <acrichto> lol
[23:20:05] * huon was about to start fretting
[23:20:24] <acrichto> zomg I just used backtraes to find a bug
[23:20:30] <acrichto> this is awesome
[23:20:58] <flaper87> \o/ for backtraces 
[23:25:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[23:31:36] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[23:31:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14a236c7e to 14b4d3243: 02http://git.io/N3iJvQ
[23:31:36] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[23:31:38] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[23:31:38] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/t7JbIQ
[23:31:38] <ghrust> 13rust/06auto 14ebbd543 15Alex Crichton: log: Introduce liblog, the old std::logging...
[23:31:38] <ghrust> 13rust/06auto 14f6a15af 15Alex Crichton: rustc: Remove compiler support for __log_level()...
[23:31:39] <ghrust> 13rust/06auto 14ed4190b 15Alex Crichton: rustc: Tweak where -lmorestack is on link commands...
[23:31:41] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[23:32:08] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[23:32:47] <cmr> acrichto: backtraces landed?
[23:33:37] <huon> yes
[23:33:43] <cmr> yay
[23:33:50] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:33:56] <cmr> huon: also the builder is running again.
[23:33:58] <cmr> \o/
[23:34:45] <cmr> only 2 hours, not bad.
[23:35:47] * ChrisMorgan is mildly disappointed that stack traces don't seem to be using the debug info symbols
[23:36:08] * ChrisMorgan is, however, distinctly happy to have backtraces at all
[23:37:45] *** flaper87 is now known as flaper87|afk
[23:38:08] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:40:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:43:57] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[23:49:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[23:50:26] <huon> cmr: \o/
[23:50:27] <brson> ChrisMorgan: afaik they *should* use the correct symbols everywhere but on windows
[23:50:44] <ChrisMorgan> brson: what do you mean?
[23:50:57] <brson> ChrisMorgan: what do you?
[23:51:13] <ChrisMorgan> I mean that it's showing the raw symbols, e.g. rt::unwind::begin_unwind::h50abef11d7bf1731naa::v0.0
[23:51:25] <ChrisMorgan> main::h58643cb889e92890faa::v0.0, &c.
[23:51:34] <huon> ChrisMorgan: (not quite raw: it's demangling them)
[23:51:49] <ChrisMorgan> Yeah, I suppose it is doing that much.
[23:51:57] <brson> what would be better?
[23:52:02] <brson> removing the version and hash?
[23:52:30] <huon> it doesn't show the crate from which they come either (I guess it's rare that that would cause confusion though)
[23:52:38] <brson> huon: that's always bugged me
[23:52:42] <ChrisMorgan> Also things like generics aren't filled in (not sure if they can be)
[23:52:45] <brson> we should just include the crate in the symbol name
[23:53:14] <brson> i think generics *should* be. we encode that info in the symbol and can demangle it
[23:53:20] <ChrisMorgan> e.g. for `fn main(){f::<int>();}fn f<T>{fail!()}`, it shows f::hc588adf87719a08fmaa::v0.0 where I would prefer f::<int>
[23:53:28] <brson> hm
[23:53:38] <brson> i see
[23:53:54] <brson> that seems doable. i wonder under what conditions we do put the generics in the symbol
[23:53:56] <cmr> I really don't think we should be lengthening our symbol names. ideally it'd be able to pull a nice, human-readable name from debuginfo.
[23:53:57] <brson> because sometimes wedo
[23:54:06] <strcat> our symbol lookup is really slow
[23:54:13] <cmr> in my ideal world the symbol would just be the hash
[23:54:38] <strcat> I think the hash might be on the wrong end
[23:54:44] <brson> under what situations does slow symbol lookup impact perf?
[23:54:58] <cmr> brson: linking (including dynamic linking at runtime)
[23:55:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:55:21] <brson> is there precident for putting distinguishing info at the front of symbols? i don't think i've seen it - but that seems like something people would be doing if it had a material perf impact
[23:55:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:55:34] <strcat> brson: it makes startup slow
[23:55:38] <strcat> well, warm up
[23:55:41] <strcat> because it binds lazily
[23:55:57] <cmr> we were at one point something like 10-30x slower on windows because of mingw linker badness, so dynamic linker perf isn't just pie-in-the-sky thing
[23:55:59] <strcat> brson: I think linkers compare the end and hash from the end
[23:56:06] <strcat> brson: because C++ namespaces are in front, like ours
[23:56:13] <cmr> (I think changing the relocation type fixed that, can't remember)
[23:56:28] <brson> strcat: so are you saying the hash should be where it is to make linkers happy?
[23:56:59] <strcat> brson: I mean I think it's hurting us atm because it's at the end
[23:57:01] <acrichto> ChrisMorgan: generics used to be filled in, but eddyb's changes to the paths removed that
[23:57:01] <cmr> https://github.com/mozilla/rust/issues/8859
[23:57:11] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[23:57:14] <strcat> but there aren't really enormous rust programs yet
[23:57:17] <strcat> so it doesn't matter much
[23:57:27] <acrichto> huon: we don't quite know crates from just symbol names yeah, especially in static linking (where everything is in one binary)
[23:57:43] <strcat> symbol lookup matters a lot for programs like firefox though
[23:58:16] * ChrisMorgan wonders why one closure has the symbol _ZN2rt4task4Task3run7closureE6314 and another task::bootstrap_green_task::closure
[23:58:21] <larsberg> strcat: you mean nothing enormous other than Servo, which is ~44.2MB statically linked as of this upgrade :-)
[23:58:32] <acrichto> ChrisMorgan: that's fixed by https://github.com/mozilla/rust/pull/12875
[23:58:36] <ChrisMorgan> The latter is in an extern fn, that might make a difference?
[23:58:42] <larsberg> (though certainly not enormous by firefox / Office standards)
[23:59:06] <huon> aren't the hashes unique per-function?
[23:59:16] <strcat> brson: anyway I've just noticed it doing a lot of work before we had proper debugging support and I had to watch it find all the symbols ;p
