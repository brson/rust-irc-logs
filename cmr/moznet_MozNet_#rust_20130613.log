[00:00:08] <nmatsakis> yeah, we could do it that way.
[00:00:09] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[00:00:12] <dbaupp> steven_is_false: .as_bytes() for &[u8] .as_bytes().to_owned() for ~[u8]
[00:00:29] <dbaupp> steven_is_false: .bytes_iter() if you just need to iterate across the bytes
[00:00:32] *** Parts: ecr (ereed@2557E599.66715431.D25A875A.IP) ()
[00:00:33] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:00:34] <steven_is_false> dbaupp: Thanks, I should actually use as_c_str anyways though.
[00:00:39] *** jst_ is now known as jst
[00:00:55] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[00:00:55] *** ChanServ sets mode: +o brson
[00:01:10] <graydon> nmatsakis: the only interface to the dataflowcontext is through the methods, right? so I should just be able to fix those methods?
[00:01:23] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[00:02:08] <steven_is_false> graydon: r+ https://github.com/mozilla/rust/pull/7027 . I made it so it only built on *NIXES because cmr couldn't get Windows to work. Someone else can add Windows support later.
[00:02:19] <nmatsakis> graydon: yes, that is correct, it actualy has a pretty narrow interface I believe
[00:02:29] <xenocons> dbaupp: i went with debian btw, so all my problems are belong 2 u
[00:02:47] <xenocons> is it possible to target windows with linux rustc?
[00:02:54] <xenocons> guessing llvm is capable of that
[00:03:02] <graydon> nmatsakis: I'm curious why you said in the earlier IRC conversation that you thought I'd need to build up the mapping in the gather loans range, rather than just doing it incrementally as we encounter new node ids via those dataflowcontext methods
[00:03:14] <graydon> *gather loans phase
[00:03:42] <dbaupp> xenocons: wow, you actually installed it? heh... http://xkcd.com/478/
[00:04:17] <xenocons> dbaupp: haha
[00:04:31] <dbaupp> xenocons: I think you can cross compile, something like --target=x86_64-win32-mingw or something, I'm not sure
[00:04:37] <xenocons> excellent
[00:04:51] <xenocons> ill be able to test that as most of my code will need to target windows and linux
[00:04:56] <xenocons> else complaints within pentest team
[00:05:16] <xenocons> but first i have to tinker with a million linux things :}
[00:05:36] <graydon> steven_is_false: can you leave the windows bits in place in the module, and just have the module-as-a-whole cfg'ed off on windows?
[00:05:52] <graydon> steven_is_false: that will at least keep them parsing (bitrot-fighting)
[00:05:59] <nmatsakis> graydon: the reason is that we need the full arrays to be visible during the propagation phase,
[00:06:04] <nmatsakis> graydon: the pattern of use for the dataflow context is:
[00:06:12] <nmatsakis> graydon: call add_gen and add_kill as many times as needed,
[00:06:12] <steven_is_false> graydon: Fair, enough.
[00:06:15] <nmatsakis> graydon: invoke propagate,
[00:06:17] <nmatsakis> graydon: then check results.
[00:06:34] <graydon> steven_is_false: leave a comment that it doesn't presently work and needs some love, leave a followup bug? sorry for holding you up, just want it to have the best odds of getting fixed :)
[00:06:36] <nmatsakis> graydon: however, you could keep the code more self-contained by having propagate visit the block it is about to propagate over,
[00:06:43] <nmatsakis> graydon: and add all the requisite node ids into the map,
[00:06:50] <steven_is_false> graydon: Okay.
[00:06:54] *** Joins: tjc (tjc@66D0A465.4F21B31A.AFDFC0EC.IP)
[00:06:54] *** ChanServ sets mode: +o tjc
[00:06:58] <nmatsakis> graydon: or, maybe not propagate, but something in the dataflow code.
[00:07:09] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[00:07:10] *** Quits: tjc (tjc@66D0A465.4F21B31A.AFDFC0EC.IP) (Quit: zzzzzzzzzz)
[00:07:34] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:07:49] <graydon> nmatsakis: still not sure I get it. if the only way to expand the range is by calling add(), and all the add()s happen before propagate, then shouldn't the range be filled-out before propagate?
[00:08:11] <graydon> or does propagate visit nodes that don't otherwise get added?
[00:09:09] <nmatsakis> graydon: yes, it visits all the nodes in the control flow, not all of which genreate or kill bits,
[00:09:15] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[00:09:19] <nmatsakis> graydon: the vast majority just pass bits through
[00:09:39] <nmatsakis> graydon: e.g., consider:
[00:09:57] <nmatsakis> { let x = 3; let y = &x; let z = foo(); ... }
[00:10:02] <nmatsakis> the only "gen" bit is the &x expression
[00:10:11] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[00:10:32] <nmatsakis> but later the user could query any of those expressions and ask "which loans are in scope here?"
[00:10:34] <graydon> ok, but when visiting, it calls apply_*() or each_*(), right?
[00:10:46] <nmatsakis> not during propagate(),
[00:10:54] <graydon> that is, if it asks for a node_id we haven't seen anything about from the add phase, we could just extend past that node with zeroes, no?
[00:10:56] <nmatsakis> those methods are used after propagation to query the results.
[00:11:12] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:11:21] <nmatsakis> the problem is that we allocate the arrays all at once,
[00:11:25] <nmatsakis> I guess if we sacrificed that property,
[00:11:42] <nmatsakis> then propagate could lazilly extend the map
[00:12:07] <nmatsakis> right now, the gen/kill/on_entry sets are never grown, they are allocated right to the necessary size
[00:12:17] <nmatsakis> but yeah we could change that, you're right
[00:12:24] <graydon> hm hm hm
[00:12:43] <nmatsakis> in particular, I guess you'd want to just make `compute_id_range()`
[00:12:46] <nmatsakis> grow the sets as needed
[00:13:21] <nmatsakis> interesting, that could be a ... relatively small patch.
[00:13:29] <graydon> and then call compute_id_range() during propagate?
[00:13:33] <nmatsakis> it already does
[00:13:40] <nmatsakis> I believe
[00:14:12] <nmatsakis> I think nobody computes the indices into the array except by calling that helper
[00:14:28] <graydon> it calls apply_gen_kill...
[00:14:37] <nmatsakis> which calls compute_id_range()
[00:14:45] <graydon> yeah
[00:14:47] <graydon> so above, where I said:
[00:14:50] <nmatsakis> there'd be some &mut self propagation
[00:14:54] <nmatsakis> right now, those are &self methods
[00:14:56] <graydon> "ok, but when visiting, it calls apply_*() or each_*(), right?"
[00:15:04] <graydon> and you said "not during propagate"
[00:15:16] <nmatsakis> ok, I didn't know what you meant by apply_* :)
[00:15:23] <nmatsakis> sorry, I was mistaken.
[00:15:35] <graydon> ah, yeah. it seemed like those were the things that everything funneled into
[00:15:38] <nmatsakis> what I meant was it doesn't call `each_bit_on_entry()` and friends
[00:15:39] <graydon> was just checking if true
[00:15:42] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:15:54] <nmatsakis> yes, that is true.
[00:16:09] <nmatsakis> also, merge_with_entry_se
[00:16:19] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[00:16:22] <nmatsakis> and a few others---
[00:16:26] <nmatsakis> but they *all* call compute_id_range
[00:16:31] <graydon> ok. but those all funnel into ... yeah
[00:16:31] <bblum> brson: i have a mysterious segfault in the c++ runtime; not really sure what to do... wanna see a stack trace?
[00:16:35] <steven_is_false> How can I checkout deleted history in git?
[00:16:39] <brson> bblum: ok
[00:16:42] <graydon> steven_is_false: define "deleted"?
[00:17:09] <steven_is_false> graydon: Like in my pull request where I rebased all the commits into one, and removed the windows code.
[00:17:29] <graydon> it should be in your revlog
[00:17:30] *** Joins: jack1 (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[00:17:33] <steven_is_false> git log
[00:17:36] <graydon> er, reflog
[00:17:36] <steven_is_false> Doh!
[00:17:39] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Ping timeout)
[00:17:46] <graydon> if you type "git reflog"
[00:17:56] <graydon> it'll show you a variety of points-in-the-past that you gave up on
[00:18:04] <graydon> it caches the past few weeks worth I think
[00:18:20] <bblum> brson: came about while tracking down an ICE; at one point when i was binary searching to minimize the test case, it iced and segfaulted as well
[00:18:23] <bblum> here: http://pastebin.mozilla.org/2517436
[00:18:26] <graydon> or maybe like "the last 30 changes" or something?
[00:18:31] <nmatsakis> last 90 days, I think.
[00:18:33] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:18:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/okB_Jg
[00:18:33] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:18:34] <graydon> it's just an undo buffer for destructive changes
[00:18:43] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[00:18:45] <bblum> brson: i believe the "this" pointer is entirely broken; if i "p *this", everything inside is nonsense
[00:18:50] <bblum> but i don't know any more
[00:19:28] <bblum> well hmm... not everything inside is nonsense
[00:20:16] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:20:22] <bblum> http://pastebin.mozilla.org/2517437
[00:21:01] <strcat> graydon: nmatsakis: I think the default is 30 days
[00:21:30] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[00:21:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DhOn_A
[00:21:30] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[00:21:47] <strcat>        --expire=<time>
[00:21:49] <nmatsakis> ok, nm
[00:21:49] <strcat>            Entries older than this time are pruned. Without the option it is taken from configuration gc.reflogExpire, which in turn
[00:21:51] <strcat>            defaults to 90 days.
[00:21:53] <strcat> oh nvm
[00:21:55] <strcat> 30 days is for something else
[00:21:56] <dbaupp> :( merge failed
[00:22:13] <Jeaye> :(
[00:22:18] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[00:22:33] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[00:22:37] <strcat> nmatsakis: ah there are a bunch of things
[00:23:29] *** Quits: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com) (Ping timeout)
[00:24:07] *** Joins: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com)
[00:24:32] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[00:24:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DhOn_A
[00:24:32] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[00:24:53] <strcat> nmatsakis: 90 days for branches, 30 days for unreachable commits, 2 weeks for unreachable objects
[00:24:54] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[00:25:05] <dbaupp> graydon: https://github.com/mozilla/rust/pull/7086 r again? I had to rebase
[00:26:04] *** Quits: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net) (Ping timeout)
[00:26:45] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[00:27:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:27:05] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[00:27:36] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:27:49] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Ping timeout)
[00:28:44] <brson> bblum: agree *this looks bogus
[00:29:02] <brson> bblum: possibly a victim of stack smashing
[00:29:59] <brson> bblum: you could break in the vicinity of upcall_new_stack and see if the stack segment looks sane
[00:30:13] <bblum> hm ok
[00:30:19] <bblum> does that path into the runtime not check the canary?
[00:31:07] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:31:24] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[00:31:32] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[00:31:46] *** Joins: tjc (tjc@moz-E289BB50.pathcom.ca)
[00:31:46] *** ChanServ sets mode: +o tjc
[00:31:53] *** Joins: goffrie (goffrie@moz-5C4201F5.dsl.ncf.ca)
[00:32:43] <brson> bblum: it does check the canary. the canary is pretty small though, so maybe a frame that runs off the end of the stack could have a gap there
[00:32:56] <brson> the runtime can be compiled for debugging by configuring with --disable-optimize-cxx
[00:33:26] *** Quits: Guest__ (textual@moz-E64A54F3.nyc.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:33:31] <bblum> i am afraid to recompile anything because the segfault is already nondeterministic even with just this input file
[00:33:46] <bblum> and didn't come up with other seemingly-isomorphic versions of the input
[00:33:55] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[00:34:05] <Luqman> bblum: there's always cp
[00:34:20] <bblum> Luqman: i was careful; i have a tarball of this and everything
[00:35:38] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[00:36:05] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[00:36:59] <steven_is_false> graydon: Okay, so the Window's code's there, and will keep parsing. I'll make an issue for how it's broken soon. 
[00:37:07] <brson> bblum: it could be related to the #[fast_ffi] attribute on libc::free - there are still some bugs in fast_ffi - but I can't imagine offhand how that would corrupt the task pointer
[00:37:12] <graydon> steven_is_false: cool, thanks. I'll r+ now.
[00:37:43] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[00:37:57] <steven_is_false> graydon: Thanks.
[00:38:09] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:39:03] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[00:40:53] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:42:07] <Eridius> Could I convince someone to take a look at https://github.com/mozilla/rust/issues/6849 ? It seems that rust's stack unwinding doesn't work when linking against libc++ instead of libstdc++
[00:42:16] <nmatsakis> bblum: so when is the AncesorList supposed to be freed?
[00:42:25] <nmatsakis> bblum: I think this is the data structure that is leaking
[00:42:27] <Eridius> and unfortunately, clang that ships with the most recent dev tools (e.g. dev tools for OS X 10.9) links against libc++ by default
[00:42:34] <bblum> nmatsakis: one sec
[00:42:58] *** Quits: true_droid (Adium@5C7A0982.41F4CE1E.C7DB93CC.IP) (Quit: Leaving.)
[00:43:12] <bblum> nmatsakis: fn coalesce() inside fn each_ancestor()
[00:43:24] *** Joins: Guest_ (textual@moz-E64A54F3.nyc.res.rr.com)
[00:43:41] <bblum> in one branch, it does "*list = tmp_list;"; in the other branch, tmp_list is freed
[00:44:05] <bblum> that is how it is freed when a taskgroup in an "intermediate generation" dies...
[00:44:06] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:44:16] <nmatsakis> bblum: thanks
[00:44:40] <bblum> when the "youngest generation" dies, it simply is freed when the TCB is freed, in impl Drop for TCB
[00:45:05] * brson witnesses a crash in jemalloc
[00:45:56] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (Ping timeout)
[00:48:04] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[00:49:12] <Eridius> dbaupp: bah, the removal of str.to_bytes() is now biting me because of borrowck not allowing me to construct an owned value, borrow it, and pass the borrowed value to a function in the same expression
[00:49:20] <bblum> nmatsakis: the deal with that code is that iterate() and coalesce() are corecursive; if iterate() determines that a node in the list is dead, it will return node->next to the coalesce() that called it, which then does the equivalent of "prev = prev->next->next;"
[00:49:23] * Eridius now has to uglify his code to pull the owned value out into its own variable first
[00:49:46] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:49:58] <dbaupp> Eridius: yeah, that behaviour is annoying :( there's a bug about it.
[00:50:26] <Eridius> rusti: let mut v = bytes!("test"); v[0] = 3; v
[00:50:28] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BgIG
[00:50:39] <Eridius> dbaupp: what the heck just happened there?
[00:50:40] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (Connection reset by peer)
[00:50:43] <Eridius> v is mutable
[00:51:02] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[00:51:18] <Eridius> oh wait.. what type does bytes!() return? I was thinking it was a ~[u8], but now I'm not so sure
[00:51:24] <Eridius> rusti: bytes!("foo")
[00:51:25] -rusti- &[102, 111, 111]
[00:51:29] <Eridius> bah ok
[00:51:33] <dbaupp> Eridius: I'm pretty sure it returns &'static [..]
[00:51:45] <dbaupp> rusti: let mut v = bytes!("test").to_owned(); v[0] = 3; v
[00:51:46] -rusti- ~[3, 101, 115, 116]
[00:51:56] *** Parts: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) ()
[00:51:58] <Eridius> yeah that's what I just did in my code
[00:52:19] <Eridius> dbaupp: do you have any clue about the issue I posted above? The inability to catch task failure is getting more and more annoying
[00:52:34] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[00:53:01] <Eridius> the compiler has started throwing this "terminating with uncaught exception of type rust_task*" error when hitting a compile error now
[00:53:12] <dbaupp> Eridius: no clue at all
[00:54:42] <dbaupp> graydon: there was a few changes required after the rebase: https://github.com/mozilla/rust/pull/7086
[00:54:58] <Eridius> what happened to IteratorUtil.take()?
[00:55:07] <dbaupp> take_()
[00:55:37] <Eridius> why?
[00:55:44] <strcat> method resolve bug
[00:55:44] <dbaupp> more bugs, that mean that methods on a trait implemented like impl <T: Foo> FooUtil for T {} make things resolve badly
[00:55:46] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[00:55:47] <brson> Eridius: that error means some rust code threw an exception after the effective 'end' of a task's life
[00:55:53] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:55:57] <brson> there are only a few pieces of code that could do that
[00:56:01] <dbaupp> Eridius: https://github.com/mozilla/rust/issues/5898
[00:56:31] <Eridius> take has been working for me so far. what changed?
[00:56:54] <Eridius> brson: AFAICT the problem is that rust has apparently linked against libc++ instead of libstdc++, and there's some libstdc++-specific code 
[00:56:57] <Eridius> in rust
[00:57:58] <Eridius> specifically librustllvm.dylib is linking against libc++
[00:58:22] <dbaupp> Eridius: the move to using std::iterator more meant that it had to be renamed because it was conflicting with Cell.take(), and so you couldn't use Cells and iterators in the same module
[00:58:23] <brson> Eridius: oh
[00:58:30] <Eridius> dbaupp: damn
[00:59:26] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[01:00:24] *** Quits: Diamond (dick@moz-625C0DAF.ks.ok.cox.net) (Ping timeout)
[01:01:34] *** Joins: Diamond (dick@moz-625C0DAF.ks.ok.cox.net)
[01:02:08] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[01:04:01] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:06:45] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[01:07:12] <SiegeLord> Why does pow take the power by reference?
[01:07:40] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[01:08:10] <strcat> SiegeLord: because it doesn't need ownership
[01:08:14] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[01:08:17] <strcat> and plenty of number types aren't word-sized
[01:08:26] <SiegeLord> Hmm, ok
[01:08:57] <dbaupp> SiegeLord: it's *really* strange, but doing it any other way requires copies :(
[01:09:14] <strcat> it's not really strange
[01:09:18] <strcat> all &T parameters are that way
[01:09:34] *** Quits: nooy (user@moz-2458675D.a146.priv.bahnhof.se) (Ping timeout)
[01:09:47] <dbaupp> strcat: for numerics, it's strange to pass the number by reference
[01:09:50] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[01:09:52] <dbaupp> especially for primitive types
[01:10:00] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[01:10:23] *** Joins: nooy (user@moz-2458675D.a146.priv.bahnhof.se)
[01:10:30] <strcat> why is it strange?
[01:10:42] <tikue> is it possible to borrow a non-lvalue as mutable? if so, what is the syntax? if not, how come?
[01:11:05] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:11:14] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:11:19] <brson> tikue: let foo = &0;
[01:11:19] <strcat> tikue: yes it's possible to borrow an rvalue as &mut now
[01:11:21] <dbaupp> because writing `x.pow(&2.0)` is strange. I can't think of any other language that does that.
[01:11:26] <brson> oh, mut
[01:11:29] <strcat> dbaupp: C++
[01:11:36] <dbaupp> strcat: really?
[01:11:37] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:11:47] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[01:11:55] <strcat> dbaupp: really. every method takes "self" by-reference and every generic function in the C++ stdlib uses a reference when it doesn't need a copy
[01:11:56] <dbaupp> strcat: even for float/double?
[01:12:06] <strcat> dbaupp: generic functions.
[01:12:10] <dbaupp> oh, right, but it doesn't appear in the syntax.
[01:12:12] <Eridius> let foo = &mut 0
[01:12:26] <dbaupp> (I'm specifically talking about numerics here, btw.)
[01:12:29] <strcat> dbaupp: but it's still taking it by reference
[01:12:47] <strcat> dbaupp: okay, but numerics includes big integers, arbitrary precision floats, decimals, rational numbers built on two bigints
[01:12:50] <dbaupp> strcat: the point is having to write x.pow(&2.0) rather than x.pow(2.0)
[01:12:50] <Eridius> if a function that takes a reference is inlined, I assume the reference can typically be optimized out?
[01:12:55] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:12:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1453a32f8 to 1484bed97: 02http://git.io/N3iJvQ
[01:12:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:12:58] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[01:12:58] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/xj9LQA
[01:12:58] <ghrust> 13rust/06auto 14641910d 15Huon Wilson: std: make all strings Equiv-alent to each other, generalise Path.push_many to take any type of string.
[01:12:58] <ghrust> 13rust/06auto 14096f6f5 15Huon Wilson: Use @str instead of @~str in libsyntax and librustc. Fixes #5048....
[01:12:59] <ghrust> 13rust/06auto 14a30ee0d 15Huon Wilson: rustdoc: fix tests for @~str -> @str change.
[01:13:00] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[01:13:01] <strcat> dbaupp: that's a general thing with references in rust
[01:13:07] <strcat> in C++ it auto-refs, in rust it doesn't
[01:13:08] <dbaupp> strcat: (I know, I actually wrote the commit that converted pow to by reference ;) )
[01:13:28] <strcat> so the strange thing isn't taking by-reference or using references with generic numeric functions
[01:13:34] <Eridius> C++'s auto-referencing is weird
[01:13:38] <strcat> the strange thing is that unlike other languages borrowing is explicit
[01:13:50] <strcat> Eridius: well, at least it's predictable
[01:14:00] <strcat> auto-deref on rust methods changes program behaviour and can cause infinite loops
[01:14:17] <Eridius> infinite loops? o_O
[01:14:19] <strcat> yes
[01:14:52] <strcat> implement something like Clone for &T and implement it for T with the &T one
[01:15:01] <strcat> x.clone() where x is &T will infinite loop
[01:15:10] <strcat> it will deref to T before trying &T
[01:15:11] <Eridius> well that's not all that surprising
[01:15:19] <strcat> Eridius: it's pretty damn surprising
[01:15:20] <Eridius> oh wait I misread
[01:15:21] <Eridius> that is surprising
[01:15:30] <strcat> it uses the T implementation before &T for an &T value
[01:15:32] <Eridius> why does it try to deref first? that seems backwards
[01:15:44] <strcat> Eridius: dunno
[01:15:56] <Eridius> is this considered a bug, or is there a reason to keep it this wya?
[01:16:02] <dbaupp> Eridius: yeah, it causes problems with #[deriving]
[01:16:05] <strcat> auto-deref is always a bad thing imo
[01:16:08] <strcat> auto-ref is fine
[01:16:18] <strcat> if it only does 1 ref, at most
[01:16:23] <strcat> for &self, &mut self
[01:16:36] <dbaupp> Eridius: the bug I filed about it got closed :(
[01:16:44] <Eridius> dbaupp: :O
[01:17:03] <dbaupp> Eridius: apparently/hopefully uniform call syntax will solve this
[01:17:09] <strcat> dbaupp: it won't "solve" it
[01:17:22] <strcat> it will allow an ugly workaround
[01:17:25] <strcat> for a language flaw
[01:17:28] <dbaupp> i.e. x.foo() == foo(&x), I think/hope (if fn foo(&self))
[01:17:38] <dbaupp> strcat: eh, same thing ;P
[01:17:43] <strcat> not really the same thing
[01:17:49] <strcat> we aren't the only people who are going to hit this flaw
[01:18:03] <strcat> it's really easy to make it infinite loop...
[01:18:16] <strcat> and really hard to make it call the & version
[01:18:31] <steven_is_false> My +1 to it being annoying
[01:18:34] <strcat> rusti: let x = 5; let y = &x; fmt!("%?", y.clone())
[01:18:36] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SNOh
[01:18:42] <dbaupp> yes... if auto-deref goes, I don't want to have to write (*(*(x.borrow()).method()).method()
[01:18:46] <strcat> rusti: let x = 5i; let y = &x; fmt!("%?", y.clone())
[01:18:47] -rusti- ~"5"
[01:19:02] <brson> --disable-optimize-cxx breaks jemalloc
[01:19:21] <strcat> brson: hrm, really? any idea what that changes?
[01:19:33] <strcat> rusti: let x = 5i; let y = &x; fmt!("%?", y.clone())
[01:19:34] -rusti- ~"5"
[01:19:38] <strcat> rusti: let x = 5i; let y = &x; fmt!("%?", (&y).clone())
[01:19:39] -rusti- ~"&5"
[01:19:40] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[01:19:44] <strcat> anyway that makes no sense
[01:19:44] <brson> strcat: i believe it means '-O0 -g'
[01:19:54] <nmatsakis> strcat: we...might be able to jigger the priorities to fix this problem. I think the current method resolution rules do need a bit of work in any case. but it's harder than you might think :)
[01:20:27] <strcat> brson: strange :(
[01:21:10] *** Quits: RMF (RMF@moz-494A6C28.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[01:21:16] <brson> strcat: https://github.com/mozilla/rust/issues/7093
[01:21:29] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[01:21:55] *** Joins: RMF (RMF@moz-494A6C28.dsl.telepac.pt)
[01:22:14] <brson> oh, no. the ebml bug doesn't repro when llvm is built without optimizations ...
[01:22:15] *** Quits: igl1 (igl@moz-3DA0C609.adsl.alicedsl.de) (Connection reset by peer)
[01:22:18] <brson> that's surprising
[01:22:31] <brson> maybe there's some other mystery here
[01:23:10] <strcat> brson: we generate plenty of IR with undef behaviour
[01:23:12] <strcat> it's not really surprising
[01:23:16] <strcat> the glue_drop code for example
[01:23:33] <brson> strcat: I mean building llvm *itself* without opts
[01:23:38] <strcat> oh. really weird.
[01:24:25] <brson> we should fix that undefined behavior though. that must be a timebomb
[01:25:33] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[01:25:51] <brson> this is going to be another day where I accomplish nothing :(
[01:25:59] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[01:26:12] *** Joins: huhlig-home2 (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[01:26:47] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[01:26:52] <bjz> how does #[macro_escape]; work?
[01:27:28] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[01:27:35] *** Joins: huhlig-home3 (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[01:28:13] <dbaupp> bjz: normally a mod creates a new layer of macro-scoping, macro_escape just skips this step and puts them in (what-would-be) the parent
[01:28:28] *** Quits: huhlig-home2 (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[01:28:35] <bjz> so, how do I use it?
[01:29:06] <bjz> I included the macro module in my root mod, but it can't find them in the other mods
[01:29:45] <dbaupp> rusti: #[macro_rules] mod foo { macro_rules! bar{ () => { 1 } } } mod bar { pub fn f() { bar!() } } bar::f()
[01:29:46] -rusti- <anon>:10:91: 10:94 error: macro undefined: 'bar'
[01:29:46] -rusti- <anon>:10          #[macro_rules] mod foo { macro_rules! bar{ () => { 1 } } } mod bar { pub fn f() { bar!() } } bar::f()
[01:29:46] -rusti-                                                                                                      ^~~
[01:29:46] -rusti- application terminated with error code 101
[01:29:46] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:29:53] <dbaupp> rusti: #[macro_escape] mod foo { macro_rules! bar{ () => { 1 } } } mod bar { pub fn f() { bar!() } } bar::f()
[01:29:54] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iQSU
[01:30:06] <dbaupp> rusti: #[macro_escape] mod foo { macro_rules! bar{ () => { 1 } } } mod bar { pub fn f() -> uint { bar!() } } bar::f()
[01:30:07] -rusti- 1
[01:30:13] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:30:22] <dbaupp> bjz: ^ it doesn't work cross crate though
[01:32:04] <bjz> eh, error: macro undefined: 'zero'
[01:34:52] <dbaupp> has you got mods inside the macro mod, or something? (or vice versa?)
[01:35:36] <graydon> nmatsakis: ping
[01:36:25] <bjz> yeah I worked out I have to include the mod in each files :(
[01:36:29] <bjz> *file
[01:36:45] <seth> hmm.. "cannot borrow immutable dereference of & pointer as mutable". what
[01:36:53] <seth> what's the syntax for a mutable dereference?
[01:37:09] <dbaupp> seth: you need a &mut pointer
[01:37:14] <bblum> huh. the 'make' segfaulted.
[01:37:33] <nmatsakis> graydon: pong.
[01:37:34] <seth> dbaupp: hmm i see. that makes sense
[01:37:54] <graydon> nmatsakis: you were right that &mut is infecting everything that uses dataflow if I do that
[01:38:03] <graydon> but I am ... struggling to contain it
[01:38:05] <seth> dbaupp: no wait, but i have one!
[01:38:16] <dbaupp> seth: code?
[01:38:29] <graydon> not sure I know how to fix these things. they're the classical case of borrowing a substructure mutably without borrowing everything else in self
[01:38:35] <brson> 0.7 already contains the most commits of any rust release so far
[01:38:44] <seth> https://gist.github.com/sfowler/74c7a8fa311294f2cea1
[01:38:47] <dbaupp> brson: how many?
[01:38:49] <seth> dbaupp: ^
[01:39:00] <nmatsakis> graydon: so ... I think it's ok if &mut self infects everything, it might make sense to have two versions of the "compute_range" fn,
[01:39:02] <seth> dbaupp: not the entire method but should be enough
[01:39:06] <nmatsakis> graydon: one that can grow the set and one that cannot
[01:39:12] <brson> dbaupp: we're at 2241 now. the prior record was 0.6 with ~2100
[01:39:15] <nmatsakis> graydon: the latter would be used for "each_gen_bit" and friends
[01:39:21] <seth> dbaupp: my problem is with the call to scanner.scan_for_runs
[01:39:34] <graydon> nmatsakis: huh, ok..
[01:39:42] <nmatsakis> graydon: but I'm honestly not sure it's worth the trouble.
[01:39:50] <dbaupp> seth: I'd guess that ctx needs to be &mut too, maybe
[01:40:03] <graydon> nmatsakis: well, I kinda need to do something here. one way or the other :(
[01:40:48] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[01:40:59] <graydon> I'm currently stuck on fighting borrowck to convince it that borrowing self.dfcx_loans as mutable, for example, does not conflict with borrowing self.all_loans (in check_loans)
[01:41:12] <seth> dbaupp: ahh, yeah, that's gotta be it. and now that i look, the error shows that, it's just that my terminal is too narrow to make it readable.
[01:41:15] <strcat> graydon: pattern matching out with 'let' works
[01:41:21] <graydon> I don't know how to even describe the problem it's giving me. maybe 2 methods will work better. this should all be after the dataflow runs, yes?
[01:41:24] <seth> dbaupp: thanks
[01:41:29] <graydon> strcat: how's that?
[01:41:31] <nmatsakis> graydon: ah, I see. let me look, I think thi smight be because the "@mut" checking is overly aggressive
[01:41:43] <strcat> graydon: let Foo{x: ref x, y: mut ref y} or something
[01:41:47] <dbaupp> seth: np :) (the errors do get fairly wide, heh)
[01:41:51] <strcat> but I guess if it's @mut... you can't really
[01:41:54] <dbaupp> strcat: that probably causes llvm assertions
[01:42:01] <strcat> well, match then
[01:42:28] <nmatsakis> graydon: well, two methods would be nic ein that we could keep the notion that the dataflow results get "frozen" after propagate
[01:42:34] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[01:43:01] <graydon> nmatsakis: each_bit_on_entry called from check_loans should be in the "frozen" phase, yes?
[01:43:20] <nmatsakis> graydon: yes.
[01:43:27] <nmatsakis> graydon: everything called from check_loans
[01:43:51] *** Parts: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP) ()
[01:44:13] <nmatsakis> graydon: I envisioned something like "fn compute_id_range(&mut self, id: uint) { if (id < max_id) grow(); return self.compute_id_range_frozen(id); }"
[01:44:14] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:44:37] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:44:55] <nmatsakis> er, "if id > max_id { grow() }
[01:45:10] <graydon> yeah, pretty much
[01:45:38] <graydon> ok, I'll try that
[01:45:38] <graydon> thanks
[01:47:17] *** Quits: Guest_ (textual@moz-E64A54F3.nyc.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:47:27] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Input/output error)
[01:48:02] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[01:49:04] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[01:49:12] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[01:52:24] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[01:52:37] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[01:53:46] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:54:14] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:57:01] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[01:57:31] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[01:59:01] *** Quits: tjc (tjc@moz-E289BB50.pathcom.ca) (Ping timeout)
[01:59:40] *** Joins: tjc (tjc@moz-E289BB50.pathcom.ca)
[01:59:40] *** ChanServ sets mode: +o tjc
[02:01:26] *** Quits: tjc (tjc@moz-E289BB50.pathcom.ca) (Ping timeout)
[02:01:50] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[02:03:36] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[02:03:46] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[02:03:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/xj9LQA
[02:03:46] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[02:03:52] <dbaupp> \o/
[02:04:15] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:04:21] <aatch> dbaupp, woo!
[02:06:39] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:06:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Zs1Q8Q
[02:06:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:06:54] <graydon> nmatsakis: hey, doubling a few methods into frozen and not-frozen variants seems to at least compile!
[02:07:09] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[02:08:08] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[02:08:47] <nmatsakis> graydon: woohoo
[02:09:15] <graydon> of course, it also crashes in stage1
[02:09:22] <graydon> because I just totally made up the grow() algorithm
[02:09:33] <graydon> baby steps
[02:09:35] <nmatsakis> crashes crashes?
[02:09:37] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:09:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Zs1Q8Q
[02:09:37] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:09:39] <graydon> ICE
[02:09:40] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[02:09:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/20fRFQ
[02:09:40] <ghrust> 13rust/06auto 14786ea3f 15Steven Stewart-Gallus: Prototyped a dynamic library facility interface
[02:09:40] <ghrust> 13rust/06auto 146c45160 15bors: auto merge of #7027 : sstewartgallus/rust/dynamic_lib, r=graydon...
[02:09:41] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[02:09:41] <nmatsakis> oh ok
[02:09:42] <graydon> I'll find it
[02:10:13] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[02:10:19] <graydon> probably one of those gosh darn assert!() thingies I left behind to show me what's what
[02:10:31] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[02:10:58] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[02:11:34] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:12:29] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[02:13:23] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[02:14:56] <dbaupp> does someone want to close https://github.com/mozilla/rust/issues/5048 and https://github.com/mozilla/rust/issues/4526 ?
[02:16:09] <graydon> when iteration completes, does an iterator return true or false?
[02:16:27] <strcat> graydon: false if you broke out
[02:16:29] <strcat> I think...
[02:16:31] <graydon> (IOW is false "done" or "broke"?)
[02:16:33] <strcat> a lot of them get it wrong :)
[02:16:58] <graydon> I think the caller will keep calling me so long as I return true...
[02:17:04] <graydon> so I think I have to return false
[02:17:17] <aatch> true is "finished properly"
[02:17:24] <aatch> I think
[02:17:42] <strcat> graydon: or you could implement an Iterator ;p
[02:17:49] <graydon> not at liberty to do that today
[02:18:54] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Ping timeout)
[02:19:41] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:21:30] <acrichto> graydon: re-r+ https://github.com/mozilla/rust/pull/7070 ?
[02:22:03] <graydon> acrichto: you're on the reviewer list, yes?
[02:22:12] <acrichto> graydon: am I? I didn't think I was
[02:22:16] * graydon checks
[02:23:33] <graydon> oh, hm, not presently. ok, nm.
[02:23:34] *** Quits: zz_kimundi (kimundi@moz-F037B1AB.dip0.t-ipconnect.de) (Ping timeout)
[02:26:42] *** Joins: zz_kimundi (kimundi@moz-B5F060A8.dip0.t-ipconnect.de)
[02:27:03] *** zz_kimundi is now known as kimundi
[02:28:02] <nmatsakis> graydon: false is broke.
[02:28:23] <nmatsakis> graydon: it's the same as the fn you call---
[02:28:30] <nmatsakis> graydon: true says "keep going", false says "do not"
[02:29:06] <graydon> right
[02:30:18] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[02:39:15] <graydon> nmatsakis: seems I have a working-ish fix
[02:39:35] <graydon> let's see if 32bit gc gets happier
[02:39:44] <bjz> Luqman: b;eh :(
[02:40:38] <graydon> gerg, ICE
[02:40:51] <bjz> Gerg!
[02:41:12] <dbaupp> strcat: also, bjz suggested that it'd be nice for `(iter1, iter2).transform(|(a,b)| foo)` `(iter1, iter2, iter3).transform(|(a,b,c)| foo)` to work
[02:41:27] <dbaupp> (presumably, we'd have to have an iter() call on the tuple at the moment)
[02:41:41] <dbaupp> i.e. have tuples as "sugar" for zip
[02:41:53] <bjz> Luqman: I think I'm just multilating lmath again
[02:41:58] <strcat> iter1.zip(iter2).transform(|(a, b)| a + b) isn't much uglier
[02:42:01] <strcat> than
[02:42:09] <strcat> (iter1, iter2).transform(|(a, b)| a + b) isn't much uglier
[02:42:10] <bjz> :/
[02:42:13] <strcat> err
[02:42:17] * strcat forgot to delete the end
[02:42:19] <strcat> ;p
[02:42:21] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:42:36] <dbaupp> no, I agree, but (it1, it2). ... is cleaner
[02:42:40] <strcat> it's not really obvious what Iterator on tuples should do though
[02:42:47] <strcat> feels too clever
[02:42:49] <strcat> to me
[02:43:08] <strcat> I'd rather have one way to do it and have that be what other languages do
[02:43:19] <bjz> dbaupp: I dunno if I suggested that :P
[02:43:38] <dbaupp> bjz: well you gave me the idea ;P
[02:43:47] <bjz> heh
[02:43:50] <bjz> :)
[02:44:10] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[02:44:16] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[02:44:22] <dbaupp> strcat: ok, I'm not that fussed either way :)
[02:45:30] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[02:48:07] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:49:19] <mark_edward> #[crate_type = "lib"]; gives me an error expected item but found `;`
[02:49:28] <mark_edward> what does that mean?
[02:49:43] <aatch> mark_edward, is it in the crate file?
[02:49:48] <mark_edward> yes
[02:50:05] <dbaupp> mark_edward: it needs to be before any extern mods or uses or items.
[02:50:05] <aatch> odd.
[02:50:10] <mark_edward> oh ok
[02:50:55] *** Joins: cstajn (Mibbit@moz-12174CD7.kimsufi.com)
[02:54:56] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[02:55:05] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[02:55:05] *** ChanServ sets mode: +o tjc
[02:55:20] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[02:59:24] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[03:00:18] *** Joins: FreezerburnV (freezerbur@moz-5718C330.bltmmd.fios.verizon.net)
[03:00:24] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[03:00:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/20fRFQ
[03:00:24] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[03:00:57] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[03:01:09] <steven_is_false> Hoorah!
[03:01:09] <steven_is_false>  
[03:03:24] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[03:03:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Tsrmhw
[03:03:25] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[03:03:58] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[03:05:04] <dbaupp> steven_is_false: yay! now we just need someone who knows what they're doing on windows!
[03:05:23] <steven_is_false> dbaupp: yep
[03:08:37] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[03:10:47] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[03:11:05] *** Quits: FreezerburnV (freezerbur@moz-5718C330.bltmmd.fios.verizon.net) (Quit: FreezerburnV)
[03:13:11] <graydon> grr. conservative gc is ... way too conservative, at least when you're allocating heavily.
[03:13:12] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:13:39] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[03:14:23] <mcpherrin> Is there any chance of rust getting a precise GC while still using llvm codegen?
[03:14:35] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[03:14:36] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[03:14:51] <graydon> not likely for on-the-stack roots. the heap will be conservative.
[03:14:54] <graydon> er, precise
[03:14:56] <graydon> eventually
[03:14:57] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[03:15:01] <graydon> not today though
[03:16:00] <steven_is_false> graydon: So people will be able to create numbers on the stack that alias heap pointers, and then cause memory leaks?
[03:16:17] <graydon> steven_is_false: yes.
[03:16:46] <steven_is_false> graydon: That's a shame. It probable doesn't even matter though. Mostly, it just bugs me.
[03:16:52] <graydon> sorry. I can't argue about this right now. we don't have the technology to avoid it right now.
[03:16:54] <strcat> graydon: Go deals with that on x86_64 by shifting the address space iirc
[03:17:01] <graydon> yeah
[03:17:40] <strcat> I don't think they care at all about their 32-bit support though
[03:17:40] <steven_is_false> strcat: That's an amazing trick.
[03:17:41] <graydon> x64 tends not to have a problem with it. or _as much_ of a problem. evidently (as I am now seeing) this version of this gc still has a problem on both.
[03:17:46] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:17:58] <strcat> steven_is_false: still aliases integers but only small integers can be common
[03:18:43] <steven_is_false> strcat: Instead of tagging integers with a tag bit they tag pointers with a tag bit, basically. Like theirs still aliasing but they reduce the chance of it.
[03:18:44] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[03:19:49] <strcat> it's a hack until they have precise gc
[03:20:10] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[03:20:12] <strcat> but it works, for their use cases (their servers are all x86_64)
[03:20:20] <steven_is_false> strcat: Go is getting an LLVM implementation worked on right?
[03:20:31] <strcat> not officially
[03:20:42] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:20:43] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Connection reset by peer)
[03:20:49] <steven_is_false> right
[03:20:52] <strcat> they have a gcc frontend
[03:21:03] <strcat> upstream
[03:21:31] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[03:21:36] <strcat> that's why libgcc got segmented stacks, and then LLVM
[03:21:46] <steven_is_false> So I can only think of 2 compilers on LLVM which want a precise GC: rustc, and GHC.
[03:22:40] *** Joins: sankha93 (Instantbir@441D7581.A5DB5020.8B6C1D65.IP)
[03:22:48] <strcat> steven_is_false: D
[03:23:20] <steven_is_false> strcat: Right. I didn't realize they were aiming for an LLVM implementation as well.
[03:23:39] <sp3d> https://github.com/mozilla/rust/wiki/Doc-crate-hashes
[03:23:41] <strcat> dmd is really bad at codegen
[03:23:53] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[03:24:05] <sp3d> not sure where that should be linked from within the wiki
[03:24:44] <steven_is_false> So, D, rustc, and GHC want precise GC but GHC does it's own thing with respect to GC right? So it's really only two groups who would be working on making LLVM support GC right?
[03:25:31] <strcat> there are lots of other languages on LLVM using gc
[03:25:44] <graydon> LLVM claims to support gc. they just support it very ... inefficiently.
[03:25:50] <graydon> you have to spill everywhere
[03:26:11] <strcat> http://vmkit.llvm.org/
[03:26:36] <steven_is_false> And one pays that penalty everywhere even in tasks that don't use GC right?
[03:27:24] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[03:27:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145fc354e to 146c45160: 02http://git.io/N3iJvQ
[03:27:24] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[03:27:26] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:27:26] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kE3qGA
[03:27:26] <ghrust> 13rust/06auto 140685c65 15Daniel Micay: update jemalloc to 3.4.0
[03:27:26] <ghrust> 13rust/06auto 149963013 15bors: auto merge of #7079 : thestinger/rust/jemalloc, r=graydon...
[03:27:26] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:27:49] <graydon> steven_is_false: no, just things that use @
[03:28:04] <steven_is_false> graydon: Oh well that's a lot better.
[03:28:23] <graydon> but making @ that expensive is not .. something we wanted to do. I dunno, I guess we could go back that way (again) sometime..
[03:28:43] <graydon> I don't really want to change course on GC again just now. we've tried it so many times already :(((((
[03:29:12] <steven_is_false> graydon: The compiler uses GC heavily right? So GC being expensive is bad.
[03:29:28] <graydon> it does, though it mostly does by accident
[03:29:47] <graydon> we didn't have & working nearly well enough during most of its development to base it on &-idioms
[03:29:55] <graydon> if we were writing today it'd be all arenas and &, I think
[03:31:07] <steven_is_false> graydon: okay
[03:31:43] <strcat> a lot of the uses of @ could be converted to extra::rc anyway
[03:31:58] <strcat> they are trivially free of cycles
[03:32:40] <strcat> @ is just really problematic for refcounting because it allows cycles + copies instead of moving
[03:32:43] <aatch> Well I'm seeing how much of @ I can change to &
[03:33:08] <strcat> (anyway we need to get rid of the drop flag for extra::rc to be sane)
[03:33:16] *** Joins: bytbox (s@moz-2E27684C.student.umd.edu)
[03:33:21] <strcat> should just zero the ptr on a move
[03:33:41] <strcat> + we need overloading for pointer-like things
[03:33:59] <strcat> so I don't think it matters if @ becomes really slow, at first
[03:35:05] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[03:35:25] <aatch> Example: in trans, the CrateContext is created at the entry point to trans, then passed down the stack.
[03:35:42] <aatch> it's @-allocated
[03:37:16] *** Quits: RMF (RMF@moz-494A6C28.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[03:37:21] <strcat> graydon: maybe your life would be easier if we just converted @ to Rc wherever possible (we'd need a trait first to make it sane though)
[03:37:26] <strcat> so the gc could land before it was "ready"
[03:38:34] <strcat> because it would be really nice to get rid of the current code bloat from @
[03:38:36] <seth> so can generic parameters in rust be values?
[03:38:43] <seth> or must they be types?
[03:39:02] <strcat> they're type parameters
[03:39:11] <graydon> strcat: possible. what I _think_ is happening is that some particular patterns in the compiler which allocated-like-mad but relied on early release of @
[03:39:25] <graydon> are no longer quite able to sneak past when the conservative gc retains a moderate percentage of them
[03:41:18] <seth> so there is no way for a struct to have a fixed-size vector without hardcoding the vector size?
[03:41:26] <strcat> Rc/RcMut needs to be converted to alloc with ~ anyway, it's wrong atm for T: Const since that can contain @
[03:41:34] <dbaupp> seth: yes :(
[03:41:34] <strcat> but the silly headers make me sad
[03:41:41] <seth> dbaupp: sadface
[03:41:52] <dbaupp> it also means fixed sized vectors are really poorly supported in terms of traits
[03:41:58] <strcat> seth: when we have associated constants that will be possible
[03:42:26] <seth> dbaupp, strcat: thanks. is my best bet to just use dynamically-sized vectors for now until support is more robust?
[03:42:27] <strcat> struct Foo<T> { xs: [int, .. T::some_constant_int] }
[03:42:37] <strcat> seth: probably
[03:42:48] <seth> ok, cool
[03:44:07] <strcat> meh I'll just make malloc/free into intrinsics that call the local ones if managed things are inside
[03:44:08] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:44:20] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:44:29] <strcat> could redo ~ that way too
[03:45:13] *** Quits: nooy (user@moz-2458675D.a146.priv.bahnhof.se) (Client exited)
[03:46:04] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[03:46:59] *** Quits: jack1 (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Quit: Leaving.)
[03:49:54] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[03:50:26] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[03:51:46] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[03:51:53] <strcat> graydon: I get lots of stack canary failures in run-pass/compile-fail now :(
[03:52:03] <strcat> just with incoming
[03:52:06] <graydon> grum
[03:52:10] <strcat> random ones, seemingly
[03:52:11] <seth> hmm
[03:52:14] <graydon> bisect?
[03:52:25] <seth> so do type parameters include the pointer sigils?
[03:52:46] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[03:52:49] <strcat> graydon: it's annoying because it's hard to reproduce
[03:52:58] <strcat> only happens on like 1/10 make checks
[03:52:59] <seth> do i write impl functions that take type parameters as fn f(&self, val: V) or fn f(&self, val: ~V)?
[03:53:34] * strcat guesses it has to do with fast_ffi
[03:53:37] *** Quits: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP) (Quit: lmandel)
[03:54:13] <strcat> seth: generic functions and trait objects aren't the same thing
[03:54:18] <strcat> usually you just want generics
[03:54:35] <strcat> fn foo<T: Ord + Eq>(a: &T) -> int { ... }
[03:54:49] *** Joins: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP)
[03:55:13] <strcat> foo(&5) // T is int, &T is &int - no different than manually writing the specialized version
[03:55:34] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[03:55:56] <seth> ok, that makes sense
[03:56:01] <strcat> trait Foo: Ord + Eq {}; fn bar(x: &Foo) -> int { ... } /* can't use Foo by-value, it's not a known type with a known size */
[03:56:09] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[03:56:53] <seth> just wanted to make sure that using &Foo doesn't introduce an extra level of indirection
[03:57:08] <strcat> seth: &Foo does
[03:57:26] <strcat> trait objects are a pointer to the object + a pointer to the vtable
[03:57:38] <strcat> you don't want trait objects 99% of the time, you want generic functions + type bounds
[03:57:45] <seth> ack, i'm talking about generics. let's forget about traits
[03:58:04] <strcat> well with generic functions + type bounds there's no overhead :)
[03:58:26] <strcat> you could just think of it as substituting the type parameters with the type and compiling that
[03:58:53] <seth> i get that, but if the type is a pointer of some kind, aren't i wrapping it in an extra level of indirection for no reason?
[03:59:49] <strcat> you should very rarely have any ~ or @ parameters
[04:00:09] <strcat> should be by T if you need ownership or by &T or &mut T if you don't (for generics)
[04:00:22] <seth> so if T is a type that should be passed by value, &T does the right thing?
[04:00:45] <strcat> not if it doesn't get inlined
[04:01:45] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:01:48] <strcat> by the time the function is big enough to not be inlined, it's not going to matter how you passed it
[04:02:50] <strcat> pointer deref to something that's for sure in the cpu cache is pretty close to free
[04:02:55] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[04:03:41] <seth> fair enough, i suppose
[04:06:05] <seth> my natural inclination is to not bake anything into the types of the arguments that i don't actually depend on, that's why i ask
[04:06:13] <strcat> graydon: feels like a race condition.
[04:06:53] <strcat> seth: well if you don't need ownership you want &T with a generic type
[04:07:10] <strcat> needless by-ref will get optimized out but clones of complex things won't
[04:07:22] <strcat> same as in C++
[04:07:32] <seth> sounds good
[04:07:48] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[04:08:17] <strcat> and in the future rustc could potentially learn to use a different ABI for &T where T is Const and small
[04:08:40] <strcat> sometimes you already have a reference though
[04:08:50] <strcat> and sometimes having a reference matters semantically
[04:09:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.3.8)
[04:09:08] <strcat> (this is one of the things modes attempted and failed to do ;p)
[04:09:09] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[04:10:10] <seth> heh, gotcha
[04:10:14] <acrichto> graydon: re-r+ https://github.com/mozilla/rust/pull/7070 ?
[04:11:14] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[04:12:26] <dbaupp> acrichto: sorry about breaking it :)
[04:12:45] <acrichto> dbaupp: hehe, no problem, I thought I had built with those changes, but apparently I messed up the git parts...
[04:13:04] <strcat> dbaupp: started chipping away at the easy bits of old_iter ;p
[04:13:15] <dbaupp> strcat: cool!
[04:13:44] <dbaupp> strcat: (that reminds me, we need consuming iterators for vec.)
[04:13:59] <strcat> does self-by-value work yet?
[04:14:12] <graydon> nmatsakis: victory! now I am just using too many gigabytes _elsewhere_
[04:14:19] <graydon> one gigabyte of RSS at a time
[04:14:58] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[04:15:07] <dbaupp> strcat: sort-of; it appears to cause segfaults for ~str though so I'd guess it wouldn't work for ~[] either yet
[04:15:28] *** Quits: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP) (Quit: lmandel)
[04:16:39] <dbaupp> https://github.com/mozilla/rust/pull/7096 r?
[04:16:43] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:21:06] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[04:21:15] <strcat> graydon: https://github.com/mozilla/rust/pull/7078 r?
[04:21:20] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:21:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/kE3qGA
[04:21:20] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:24:19] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:24:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/hH8YbQ
[04:24:20] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:24:20] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[04:24:20] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eCVUCQ
[04:24:20] <ghrust> 13rust/06auto 140c47632 15Alex Crichton: Rewrite rusti
[04:24:20] <ghrust> 13rust/06auto 144ec08d8 15bors: auto merge of #7070 : alexcrichton/rust/rusti++, r=graydon...
[04:24:20] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[04:29:56] <aatch> struct containing pointers (other than `*`) are non-implicitly-copyable, right?
[04:31:04] <steven_is_false> Hi! I'm updating my application to compile with the latest rust, and use the DynamicLibrary stuff I put in std::unstable instead of my personal library I was previously using but now I'm getting an ICE.
[04:31:28] <dbaupp> steven_is_false: what does `::rt::backtrace rustc foo.rs` say?
[04:31:55] <steven_is_false> dbaupp: It's too confusing for me to understand.
[04:32:05] <dbaupp> steven_is_false: can you gist the whole thing?
[04:32:15] <dbaupp> aatch: I thought @ was implicitly copiable
[04:32:24] <dbaupp> (and possibly & without mut)
[04:32:26] <aatch> dbaupp, oh right. what about &?
[04:32:33] <strcat> & is implicitly copyable
[04:32:35] <dbaupp> not sure
[04:32:36] <steven_is_false> dbaupp: Better yet, I'll use pastebin.mozilla.org!
[04:32:37] <strcat> &mut isn't copyable at all
[04:33:48] <steven_is_false> dbaupp: Here it is http://pastebin.mozilla.org/2518200
[04:34:33] <dbaupp> steven_is_false: you possibly need to recompile the dependant crates
[04:35:33] <dbaupp> (loading external crates only works reliably if they were compiled with the compiler being used.)
[04:35:43] <steven_is_false> dbaupp: Dangit, that was it.
[04:39:17] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[04:45:49] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[04:47:42] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:48:59] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[04:49:11] <seth> hmm, so you can't treat a method as a value.. bummer
[04:49:43] <steven_is_false> seth: Just use a closure?
[04:50:03] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[04:50:08] <seth> steven_is_false: sure, but why not just do that automatically?
[04:50:28] <steven_is_false> seth: I'm not sure, maybe there's a corner case?
[04:50:55] <seth> could well be
[04:52:09] <steven_is_false> seth: With the eventual union of functions, and methods one will be able to do Type::method
[04:52:39] <seth> steven_is_false: that's good stuff, although not quite the same thing as self isn't captured
[04:52:52] <seth> (if i understand correctly)
[04:53:27] <steven_is_false> Yes.
[04:54:01] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[04:54:34] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[05:00:59] <bblum> seth: someday you will be able to
[05:01:09] <bblum> write TypeName::method_name
[05:01:15] <bblum> not today but someday
[05:01:20] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:05:34] <seth> argh. so defining a struct field "entries: ~mut [(K, V)]" doesn't work, complaining of obsolete syntax
[05:05:45] *** Joins: magg (magg@C0CBB91B.6A5BD2EF.3D0AE249.IP)
[05:05:47] <seth> "entries: mut ~[(K, V)]" also doesn't work
[05:06:02] <aatch> seth, that's because the mutability is based on the variable holding it.
[05:06:02] <bblum> you have to do entries: ~[(K, V)]
[05:06:06] <bblum> then store the struct in a mutable location
[05:06:10] <bblum> it will inherit
[05:06:12] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[05:06:12] *** ChanServ sets mode: +o brson
[05:06:45] <seth> so you mean whenever i use it, i need to say "let mut my_entries = self.entries" first? (if i need to use it mutably)
[05:07:21] <bblum> yep
[05:08:05] <bblum> the idiom is that the data structure is "dual-mode" -- depending on the storage location, or type of borrowed pointer you have to it, it is either deeply immutable or deeply mutable, rather than a difficult-to-reason-about mix of mutable  and not
[05:08:29] <seth> oh wait.. is declaring self as &mut good enough?
[05:08:40] <bblum> yep
[05:08:50] <seth> ah ok.. that's not so bad then =)
[05:09:37] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[05:11:47] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[05:15:18] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:15:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/eCVUCQ
[05:15:18] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:15:22] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[05:15:35] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[05:16:43] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[05:18:01] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[05:18:20] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[05:18:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/a3lLzQ
[05:18:20] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[05:18:21] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:18:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Ke49ug
[05:18:21] <ghrust> 13rust/06auto 1400ff170 15Young-il Choi: mk: arm support - disable tls of jemalloc on rt.mk
[05:18:21] <ghrust> 13rust/06auto 149355330 15bors: auto merge of #7094 : yichoi/rust/arm_jemalloc, r=thestinger...
[05:18:21] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:18:36] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[05:18:39] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:20:03] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:22:06] <seth> hmm, so how do i control how a closure captures self?
[05:22:06] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[05:22:25] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[05:23:03] <seth> my code uses "|s| self.create_font_group(s)", but create_font_group calls a method with "&self" as the self parameter type, which causes a dynamic failure...
[05:23:57] <aatch> seth, whats the signature of the closure?
[05:24:24] <seth> aatch: fn lookup_or_insert(&mut self, key: &K, f: &fn(&K) -> V) -> V
[05:24:28] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[05:24:51] <aatch> seth, it causes /dynamic/ failure?
[05:24:56] <seth> aatch: yup =(
[05:25:09] <dbaupp> seth: have you got a `@mut ...` in there?
[05:25:22] <aatch> yeah, that's the only thing that causes dynamic failure like that.
[05:25:47] <seth> dbaupp: well, create_font_group takes self as @mut, so yes
[05:26:08] *** Quits: magg (magg@C0CBB91B.6A5BD2EF.3D0AE249.IP) (Quit: magg)
[05:26:08] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[05:26:22] <aatch> hang on, that compiles?
[05:26:32] <seth> yeah
[05:26:40] <seth> i can upload the complete code if you want
[05:26:56] <aatch> that would be good thanks.
[05:27:06] <seth> https://gist.github.com/sfowler/9679ca562b71597ac0f9
[05:27:11] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[05:27:39] <seth> i create the closure at line 136, and the failure happens at line 173
[05:27:52] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Input/output error)
[05:27:55] <seth> "rust: task failed at 'borrowed', /Users/mfowler/Code/servo/src/components/gfx/font_context.rs:173"
[05:28:25] *** Quits: blitter (blitter@moz-FB45689C.dyn.centurytel.net) (Ping timeout)
[05:28:32] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[05:28:50] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Ping timeout)
[05:30:00] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[05:30:16] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:30:21] <aatch> Welp, unexpected brown out
[05:33:04] <seth> aatch: bummer!
[05:33:44] <aatch> yeah, fortunately I save compulsively, and use Vim
[05:33:47] <aatch> so 0 data loss
[05:33:55] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[05:34:44] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[05:35:09] <seth> hehe nice
[05:35:15] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[05:35:46] <aatch> man, this is an incredibly boring process...
[05:36:10] <seth> aatch: what process is that?
[05:36:30] <aatch> refactoring trans to use less @
[05:36:30] <seth> btw, here's what you may have missed:
[05:36:34] <seth> 22:25 seth: https://gist.github.com/sfowler/9679ca562b71597ac0f9
[05:36:35] <seth> 22:25 seth: i create the closure at line 136, and the failure happens at line 173
[05:36:35] <seth> 22:25 seth: "rust: task failed at 'borrowed', /Users/mfowler/Code/servo/src/components/gfx/font_context.rs:173"
[05:37:03] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[05:37:10] <seth> hehe i see
[05:37:29] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[05:38:25] <seth> hmm can't even find trans in core or std.. presumably this is part of rustc?
[05:38:27] <aatch> Ah, I see it now.
[05:38:32] <aatch> seth, correct
[05:38:53] <aatch> Ok, so what happens if you change your @mut's to &mut ?
[05:39:05] <seth> aatch: all of them? =)
[05:39:12] <aatch> in the impl, yes
[05:40:46] <seth> this line now angers the compiler: self.font_groups.lookup_or_insert(style, |s| self.create_font_group(s))
[05:40:57] <seth> it complains that i'm borrowing self as mutable twice there
[05:41:29] <seth> *self actually
[05:43:22] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[05:43:24] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Ping timeout)
[05:43:51] <aatch> seth, which part?
[05:44:23] <seth> it points to each use of 'self' in that line
[05:44:27] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[05:44:40] <seth> i'm thinking i can work around this is create_font_group isn't a method. not sure if there's a better way
[05:44:44] <seth> *if
[05:44:52] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[05:45:24] <aatch> seth, hmm, you're on latest incoming, correct?
[05:45:38] <seth> of rust?
[05:45:43] <seth> doubtful
[05:45:43] <aatch> yes
[05:45:58] <aatch> well when did you last build?
[05:46:08] <seth> i'm on 1b88336
[05:46:17] * aatch doesn't know hashes
[05:46:23] <aatch> does it give you a date?
[05:46:41] *** Joins: kemurphy_ (bzlandfill@moz-D1A61C3D.ap.yournet.ne.jp)
[05:46:56] <Luqman> Date:   Mon May 13 13:25:42 2013 -0700
[05:47:03] <seth> indeed
[05:47:15] <seth> not super up-to-date
[05:47:36] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[05:47:48] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[05:47:48] <kemurphy_> hey folks, i'm trying to play with zero.rs/rustboot a little but having some trouble
[05:47:48] *** ChanServ sets mode: +o brson
[05:48:03] <Luqman> kemurphy_: what's the issue?
[05:48:07] <aatch> seth, a quick check puts that commit as being master
[05:48:13] <aatch> which is way behind.
[05:48:53] <kemurphy_> Luqman: using incoming built a few hours ago, i get:
[05:48:56] <seth> is that responsible for my problem? i figured it was just ineptitude with rust =)
[05:49:09] <aatch> seth, it doesn't help.
[05:49:10] <kemurphy_> rustc -O --target i386-intel-linux --lib -o main.o -c main.rs error: no item found for `sized`
[05:49:23] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:49:29] <aatch> There have been a lot of changes, especially to the borrowchecker
[05:49:57] <aatch> if you build from the incoming branch and try, it might work.
[05:51:03] *** Joins: kemurphy__ (Mibbit@moz-D1A61C3D.ap.yournet.ne.jp)
[05:51:13] <jack> seth: don't try to build from incoming. servo will  keep you busy for hours in syntax changes.
[05:51:19] *** Quits: kemurphy_ (bzlandfill@moz-D1A61C3D.ap.yournet.ne.jp) (Quit: CGI:IRC (EOF))
[05:51:31] <jack> seth: brson is working on porting forward, but it will be a few days I think.
[05:51:34] <aatch> Oh, is this for servo stuff?
[05:51:35] *** kemurphy__ is now known as kemurphy_
[05:51:37] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[05:51:39] <seth> jack: ok, that's good to know
[05:51:43] <seth> aatch: indeed
[05:51:48] <jack> aatch: the font group stuff didn't give it away? :)
[05:52:08] <aatch> jack, it crossed my mind.
[05:52:20] <aatch> but by itself...
[05:52:32] * seth decides to just change the API to avoid the closure
[05:52:40] <seth> seems like the most pragmatic thing for now
[05:53:07] <kemurphy_> any way to tell rustc to be a little more verbose?
[05:53:08] <jack> seth: put a FIXME in perhaps with a comment on of the nice api so we can fix it when we catch up to rust
[05:53:17] <seth> jack: will do
[05:53:37] <jack> kemurphy: depending on what you want to do, not compiling your coe with optimization may make it more verbose
[05:53:43] <Luqman> kemurphy_: ah, a new lang item was added and pcwalton just hasn't updated zero.rs
[05:53:58] <jack> (for example, dynamic borrow checks are more informative in that mode)
[05:54:08] <Luqman> kemurphy_: just add #[lang="sized"] pub trait Sized {} to zero.rs
[05:54:21] <kemurphy_> Luqman: ah, brilliant, figured it was something like that
[05:54:52] <kemurphy_> thanks
[05:56:16] <kemurphy_> as an aside, is Sized empty anyway or is there currently something there?
[05:56:28] <Luqman> yep, it's empty
[05:56:29] <aatch> kemurphy_, it's a kind, so no
[05:57:19] * strcat wonders if default methods work well enough to use for simple simple
[05:57:41] <kemurphy_> ah, right. is that part of the current DST plan?
[05:57:51] <Luqman> strcat: based on the tests recently enabled/updated they seem to work for simple uses at least
[05:58:33] <jack> strcat: i heard someone was working on fixing default methods today
[05:58:40] <strcat> yep, sully 
[05:58:56] <sully> yeah
[05:58:59] <aatch> who is currently getting them to work cross-crate.
[05:59:06] <strcat> ah so not yet
[05:59:22] <jack> sully: yay! i am excited. it will remove a lot of workarounds in servo when they work
[05:59:34] <sully> I submitted a pull request today that fixes a lot of stuff with them
[05:59:44] <sully> but cross crate still totally broken
[06:00:48] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Ping timeout)
[06:03:27] *** Joins: sebcrozet (Mibbit@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[06:04:52] *** Quits: sebcrozet (Mibbit@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[06:05:05] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[06:06:02] *** Quits: kemurphy_ (Mibbit@moz-D1A61C3D.ap.yournet.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[06:09:32] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[06:09:32] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Ke49ug
[06:09:32] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[06:10:07] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[06:10:53] *** Joins: reedlepee (Mibbit@moz-200AE24F.fbx.proxad.net)
[06:11:10] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:11:38] *** Quits: reedlepee (Mibbit@moz-200AE24F.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:12:18] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[06:12:21] *** Joins: brson (brson@moz-6A295265.hsd1.ca.comcast.net)
[06:12:22] *** ChanServ sets mode: +o brson
[06:12:22] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[06:12:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IychJg
[06:12:23] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[06:12:24] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:12:24] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/xe71zw
[06:12:24] <ghrust> 13rust/06auto 14abadece 15Huon Wilson: std: remove the invalid NullTerminatedStr instance for &'static str....
[06:12:24] <ghrust> 13rust/06auto 14e650399 15bors: auto merge of #7096 : huonw/rust/invalid-null-str, r=thestinger...
[06:12:24] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:13:41] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[06:14:10] *** Quits: brson (brson@moz-6A295265.hsd1.ca.comcast.net) (Ping timeout)
[06:14:39] *** Quits: graydon (graydon@moz-9918B407.vc.shawcable.net) (Quit: Leaving.)
[06:17:20] *** Quits: mindginative (mindginati@moz-C1729134.dsl.clear.net.nz) (Quit: zzZZZ)
[06:17:38] *** Joins: mindginative (mindginati@moz-9C555AF3.spmconsultants.co.nz)
[06:17:41] *** Quits: mindginative (mindginati@moz-9C555AF3.spmconsultants.co.nz) (Quit: mindginative)
[06:18:29] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[06:20:13] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:23:08] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[06:23:08] *** ChanServ sets mode: +o brson
[06:23:48] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[06:27:07] *** Quits: sankha93 (Instantbir@441D7581.A5DB5020.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[06:28:52] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Ping timeout)
[06:31:10] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:31:43] *** Joins: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP)
[06:33:39] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[06:34:00] *** Joins: frogmella (Mibbit@4B05D87D.B746DBB3.EBBF132E.IP)
[06:36:03] *** Parts: frogmella (Mibbit@4B05D87D.B746DBB3.EBBF132E.IP) ()
[06:37:42] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[06:42:23] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Ping timeout)
[06:44:14] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[06:44:22] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[06:44:30] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[06:44:30] *** ChanServ sets mode: +o brson
[06:46:57] <sanxiyn> I noticed that I don't get color in diagnostics since updating Rust to the latest version
[06:47:05] <sanxiyn> Does anyone have the same issue?
[06:47:09] <dbaupp> cmr: ^
[06:47:43] <dbaupp> sanxiyn: the terminfo stuff was rewritten, so it's presumably caused by that
[06:48:06] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[06:48:31] <sanxiyn> My $TERM is xterm (which is PuTTY default)
[06:49:20] <sanxiyn> dbaupp: According to libextra/term.rs, color_supported is true only if colors >= 16, but infocmp xterm shows colors = 8
[06:49:21] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[06:49:27] <strcat> sanxiyn: set it to putty-256color
[06:49:38] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[06:49:41] <strcat> sanxiyn: but the terminfo support isn't complete so it might not work anyway
[06:49:41] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[06:49:47] <aatch> straight xterm doesn't actually have color, technically.
[06:49:57] <sanxiyn> Hm
[06:49:59] <dbaupp> strange, I've never seen any colours with rustc...
[06:50:08] <aatch> I see them.
[06:50:24] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[06:50:26] <dbaupp> I'm using urxvt & tmux, $TERM = screen-256color
[06:51:08] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:51:15] <sanxiyn> Can people run "infocmp | grep colors"?
[06:51:35] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[06:52:23] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[06:52:23] *** ChanServ sets mode: +qo graydon graydon
[06:52:38] <aatch> 256
[06:53:11] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:53:16] *** Quits: graydon (graydon@moz-9918B407.vc.shawcable.net) (Quit: Leaving.)
[06:53:22] *** Joins: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP)
[06:56:54] <sanxiyn> strcat: TERM=putty-256color doesn't show color either
[06:57:01] *** Quits: cr (anonymous@moz-B141BCC5.dip0.t-ipconnect.de) (Ping timeout)
[06:57:02] <sanxiyn> (Neither is xterm-256color)
[06:59:40] *** Joins: sankha93 (Instantbir@28C41E5E.44798FA9.8B6C1D65.IP)
[07:00:45] <dbaupp> it's possibly because it now searches for terminfo dbs in /usr/share/terminfo and /lib/terminfo by default (if $TERMINFO and $TERMINFO_DIRS are not defined)
[07:02:10] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[07:04:20] <strcat> dbaupp: it can't parse/handle xterm-256color
[07:04:23] <strcat> needs conditionals
[07:06:24] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:06:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/xe71zw
[07:06:24] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:06:41] <strcat> brson: https://github.com/mozilla/rust/pull/7078 r?
[07:07:42] <sanxiyn> strcat: Ah, so that's why it won't work even with TERM=xterm-256color?
[07:07:45] <sanxiyn> What works then?
[07:07:49] <strcat> sanxiyn: dunno :(
[07:07:57] <sanxiyn> Apparently aatch has one working?
[07:08:01] <strcat> sanxiyn: it really needs to be extended to support conditionals
[07:08:10] <aatch> it might not be any more
[07:08:25] <aatch> I'm not sure if I've updated since the change
[07:08:33] <strcat> if 'tput colors' says >= 16, rustc should be able to deal with it
[07:09:17] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[07:09:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QHGgQQ
[07:09:17] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[07:09:17] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[07:09:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ub8VTA
[07:09:17] <ghrust> 13rust/06auto 145954668 15Brian Anderson: Add some 0.7 release notes
[07:09:17] <ghrust> 13rust/06auto 149a42d8c 15bors: auto merge of #7099 : brson/rust/releasenotes, r=thestinger
[07:09:17] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[07:09:33] <sanxiyn> Release time?
[07:09:38] <sanxiyn> (When will be 0.7?)
[07:09:55] <dbaupp> I'm running through all the terminfo I've got here, and not one of them has any colour so far :(
[07:10:19] <dbaupp> sanxiyn: end of the month, I think
[07:10:30] <strcat> sanxiyn: the milestone says 17 days
[07:12:40] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (Ping timeout)
[07:15:33] <strcat> rusti: aa
[07:15:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RCiL
[07:15:42] <strcat> rusti: let a;
[07:15:43] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/UOCd
[07:16:21] <dbaupp> ok, I get a red 'error' with TERM=rxvt-unicode-256color, and some of them flip the background/foreground, but that's all (this is with both urxvt and gnome-terminal)
[07:16:53] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:17:56] <aatch> Well that's what I have
[07:18:12] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[07:19:18] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[07:20:16] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[07:21:26] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[07:22:01] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[07:24:44] *** aatch is now known as aatch|gone
[07:39:58] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[07:41:07] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[07:43:10] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[07:43:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:43:59] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[07:44:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:51:08] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[07:52:56] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[07:52:56] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[07:57:19] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:57:19] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149a42d8c to 14e650399: 02http://git.io/N3iJvQ
[07:57:19] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:57:22] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:57:22] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/W8mWHg
[07:57:22] <ghrust> 13rust/06auto 143798146 15Daniel Micay: add IteratorUtil to the prelude
[07:57:22] <ghrust> 13rust/06auto 140b69dda 15Daniel Micay: rm ExtendedMutableIter...
[07:57:22] <ghrust> 13rust/06auto 14d168f91 15Daniel Micay: rm MutableIter...
[07:57:23] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:59:30] * strcat hopes that lands
[08:00:01] <strcat> the hard part will be removing vec::each and BaseIter anyway :)
[08:01:05] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[08:02:36] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[08:07:46] *** Joins: fabiand (fabiand@moz-4BC6F387.adsl.alicedsl.de)
[08:08:09] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:09:58] <mark_edward> strcat: love your iterators
[08:10:04] <strcat> mark_edward: :)
[08:10:38] <mark_edward> are these those external iterators I saw in ablog post somewhere?
[08:10:44] <mark_edward> pcwalton i think?
[08:10:48] <strcat> yeah
[08:11:00] <strcat> looks like we're going to mostly or fully replace the internal ones
[08:11:26] <mark_edward> cool. i really like the chaining of functionality/transformations
[08:13:54] *** Joins: Blei (philipp@moz-8419D4C4.ethz.ch)
[08:16:11] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[08:17:39] <orshem> strcat: I saw your post on the ml. I understand the benefits, but I couldn't figure out how the external iterator will work with closures. or why the for keyword is even needed.
[08:18:23] <strcat> it's needed because not having `for` would make the common use case painful
[08:18:47] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[08:18:59] <strcat> let mut it = ...; loop { match it.next() { None => break, Some(x) => { /* loop body */ } }
[08:19:03] <strcat> rather than
[08:19:10] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[08:19:13] <strcat> for ... |x| { }
[08:19:42] <strcat> atm they provide an `advance` adaptor method implementing the current internal iterator protocol
[08:19:46] <strcat> so it takes a closure
[08:19:49] <strcat> but that's far from ideal
[08:20:37] <dbaupp> strcat: do you know if the proposal includes rewriting the pattern in `for it |a, b| { .. }` to `Some((a,b)) => {}` in the match?
[08:20:56] <strcat> dbaupp: well it would be first-class support, wouldn't need to rewrite anything
[08:21:15] <strcat> I talked to nmatsakis about it and we came to the conclusion that we should probably just drop the current `for`
[08:21:19] <orshem> but under the new proposal for won't take a closure, will it?
[08:21:26] <strcat> orshem: yeah, it won't take a closure
[08:21:29] <orshem> it will just look like it
[08:21:36] <dbaupp> strcat: "rewrite". so, yes then?
[08:21:39] <orshem> it sounds confusing
[08:21:48] *** Quits: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com) (Connection reset by peer)
[08:21:56] <strcat> orshem: the current for loop doesn't act like a closure
[08:21:59] <strcat> it has `break` and `return`
[08:22:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[08:22:06] <strcat> and return tries to return from the outer function
[08:22:11] <orshem> but they break from the outer fn
[08:22:14] <orshem> no?
[08:22:15] <strcat> orshem: they try
[08:22:21] <strcat> orshem: they don't necessarily succeed
[08:22:33] <strcat> and therefore borrow checking has to assume they don't work
[08:22:47] <orshem> how other languages handle this? I only know jave and c# with for (;) or foreach
[08:22:54] <strcat> orshem: they rely on the iterator to actually break out of iteration as soon as you do break/return
[08:23:01] <strcat> (our for loops)
[08:23:06] <strcat> C# uses external iterators
[08:23:11] <strcat> python uses external iterators
[08:23:15] <strcat> so do C++ and D
[08:23:46] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[08:23:56] <strcat> looks like java has an external iterator object too
[08:24:09] <orshem> yes and Go also I think
[08:24:18] *** Joins: Blub\w (wry@moz-46498567.wireless.dyn.drei.com)
[08:24:25] <strcat> I don't think go has iterators
[08:24:58] <orshem> strcat: http://code.google.com/p/go-wiki/wiki/Range
[08:25:07] <strcat> yeah that's not an iterator
[08:25:31] <strcat> it's hardcoded syntax for the built-in containers
[08:25:34] <strcat> and it's not an object you can use
[08:25:43] <orshem> i see
[08:26:23] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:26:24] <strcat> haskell just relies on lazy lists and doesn't need iterators
[08:26:55] <strcat> but lazy lists act very much like external iterators
[08:27:22] <orshem> so 'do' will be for closures and 'for' will be repurposed for extrernal iterators?
[08:27:45] <strcat> yes
[08:27:54] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[08:34:15] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:40:05] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Ping timeout)
[08:44:10] *** Quits: ssiloti (steve@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[08:45:22] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[08:45:22] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149b485f9 to 14e650399: 02http://git.io/N3iJvQ
[08:45:22] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[08:45:23] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:45:23] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/KcKvuQ
[08:45:23] <ghrust> 13rust/06auto 143798146 15Daniel Micay: add IteratorUtil to the prelude
[08:45:23] <ghrust> 13rust/06auto 140b69dda 15Daniel Micay: rm ExtendedMutableIter...
[08:45:23] <ghrust> 13rust/06auto 14d168f91 15Daniel Micay: rm MutableIter...
[08:45:23] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:46:11] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[08:52:53] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[08:54:41] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[08:55:57] <orshem> i love strong static typing!
[09:01:45] <orshem> how do I convert u8 to char and why does str[i] return u8?
[09:03:04] *** Joins: ssiloti (steve@moz-4B8C4631.oc.oc.cox.net)
[09:04:04] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[09:04:15] <engla> str is a container for a utf-8 encoded string
[09:04:24] <engla> and it indexes by bytes
[09:04:50] <engla> you can use .char_at to index by char
[09:05:24] <engla> well .char_at is tricky too
[09:05:38] *** Joins: k00mi (koomi@moz-70872261.pools.arcor-ip.net)
[09:06:37] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:06:54] <engla> best to use the iterator instead
[09:07:36] <strcat> neither is really a useful unit most of the time anyway
[09:07:37] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[09:07:49] <strcat> you usually want to index by glyph and we don't have that yet
[09:08:01] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[09:08:35] <orshem> engla: how is char_at tricky?
[09:09:08] <orshem> strcat: for the ascii subset of utf8 I assume char_at should be fine
[09:09:28] <strcat> for the ascii subset of utf8 u8 is fine
[09:09:45] <engla> orshem: it takes a byte index
[09:09:48] <strcat> and you likely don't want to be using str if you know it's ascii
[09:09:55] <engla> orshem: and fails if you hit a continuation byte
[09:10:14] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[09:10:17] <strcat> http://static.rust-lang.org/doc/core/ascii.html
[09:10:17] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:10:41] <kimundi> rusti: "Hello".to_ascii()
[09:10:42] -rusti- &[{chr: 72}, {chr: 101}, {chr: 108}, {chr: 108}, {chr: 111}]
[09:11:02] <engla> there are some operations that makes sense on char iterators or byte iterators
[09:11:07] <engla> for example splitting on '/'
[09:11:45] <strcat> engla: what if there are combining characters for the /? ;p
[09:12:03] <orshem> strcat: nice
[09:13:06] <orshem> ascii looks good enough to me
[09:13:55] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[09:16:41] <orshem> interesting. so long as I have errors in my code rustc will not show me warnings. I assume it's a latter pass.
[09:19:21] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[09:19:29] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[09:20:39] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Quit: Textual IRC Client: http://www.textualapp.com/)
[09:21:08] <orshem> warning: comparison is useless due to type limits
[09:21:19] *** kimundi is now known as zz_kimundi
[09:21:21] <orshem> when comparing two uints in a while loop
[09:21:22] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[09:21:45] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Quit: victorporof)
[09:21:52] <dbaupp> orshem: do you have foo >= 0 or something?
[09:22:11] <orshem> dbaupp: while i >= 0u
[09:22:32] <sanxiyn> orshem: That is always true
[09:22:35] <dbaupp> well, that's always true, so that loop will go forever
[09:23:03] <orshem> oh right. I'm so stupid sometimes
[09:23:07] <orshem> thanks
[09:23:45] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[09:23:51] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[09:24:25] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[09:25:09] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[09:25:21] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[09:25:33] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[09:27:18] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[09:31:23] <dbaupp> what's up with mac??
[09:31:38] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[09:33:22] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[09:33:22] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e804a1c to 14e650399: 02http://git.io/N3iJvQ
[09:33:22] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[09:40:21] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[09:42:39] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[09:43:04] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[09:43:49] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[09:45:55] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[09:49:24] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[09:54:39] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[09:56:24] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[09:59:32] *** Joins: tav (tav@moz-F726AA0B.range86-166.btcentralplus.com)
[10:02:10] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[10:02:21] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[10:02:21] *** ChanServ sets mode: +qo graydon graydon
[10:02:36] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[10:05:37] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Ping timeout)
[10:06:26] *** Quits: heftig (heftig@moz-3D6EBBD3.dip0.t-ipconnect.de) (Ping timeout)
[10:11:16] *** Quits: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP) (Quit: pyrac)
[10:12:39] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[10:14:55] *** Joins: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP)
[10:17:00] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[10:17:55] *** Joins: heftig (heftig@moz-264743B5.dip0.t-ipconnect.de)
[10:18:42] *** Quits: graydon (graydon@moz-9918B407.vc.shawcable.net) (Connection reset by peer)
[10:20:35] *** Quits: sankha93 (Instantbir@28C41E5E.44798FA9.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[10:24:22] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:24:22] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/uIhk2Q
[10:24:22] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:25:32] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[10:27:19] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[10:27:19] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:27:19] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9lHrag
[10:27:19] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:27:20] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:27:20] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/HU11Ew
[10:27:20] <ghrust> 13rust/06auto 14ed7892a 15Daniel Micay: hashmap: remove leftover debug!() logging
[10:27:20] <ghrust> 13rust/06auto 14a198aad 15bors: auto merge of #7100 : thestinger/rust/hashmap, r=pnkfelix...
[10:27:21] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:31:36] *** Parts: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Leaving)
[10:32:44] *** Quits: huhlig-home3 (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Connection reset by peer)
[10:44:27] *** Joins: cr (anonymous@moz-9990782C.dip0.t-ipconnect.de)
[10:50:40] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[10:52:45] *** Joins: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com)
[10:52:49] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[10:56:25] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[10:58:09] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[10:58:26] *** Joins: sockmister (Mibbit@6EB9D10.20CC70E6.92EB3D3E.IP)
[11:00:12] <sockmister> hi guys, a quick question here. could it be possible one day to define new infix operators/fns in rust, or is that out of the question?
[11:02:40] *** Joins: novabyte (Instantbir@moz-D52819E1.mullvad.net)
[11:06:47] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[11:09:00] *** Quits: Blei (philipp@moz-8419D4C4.ethz.ch) (Quit: WeeChat 0.4.1)
[11:11:48] <xenocons> linux up n running
[11:11:50] <xenocons> feels good
[11:11:56] <xenocons> time to get rust
[11:12:01] <EXetoC> yay
[11:13:00] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Ping timeout)
[11:13:26] *** Joins: mib_t9xdlp (Mibbit@moz-A0E225F0.avcosystems.co.uk)
[11:14:01] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[11:14:34] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[11:14:43] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[11:15:27] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[11:16:16] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[11:17:03] <dbaupp> sockmister: I don't think it's entirely out the question. I'm fairly sure it's not on any roadmap though.
[11:17:29] <sockmister> ok, thanks.
[11:18:22] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:18:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/HU11Ew
[11:18:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:21:05] *** Quits: doomlord_ (walter@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[11:21:15] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (Ping timeout)
[11:21:38] *** Quits: doomlord__ (servitor@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[11:21:38] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[11:21:40] *** Joins: doomlord_ (walter@moz-430C0E11.range86-176.btcentralplus.com)
[11:21:59] *** Joins: doomlord__ (servitor@moz-430C0E11.range86-176.btcentralplus.com)
[11:24:23] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[11:27:19] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[11:28:36] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[11:29:05] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[11:36:25] <MaikKlein> has anyone here some experience with go?
[11:39:20] *** Joins: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP)
[11:39:58] *** Joins: Blei (philipp@moz-7077963E.ethz.ch)
[11:41:15] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[11:45:27] *** Quits: sockmister (Mibbit@6EB9D10.20CC70E6.92EB3D3E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:46:16] <xenocons> MaikKlein: i havent but ive seen it on 1 challenge before
[11:47:05] <xenocons> what was the gitcommand to get incomming again
[11:48:05] <MaikKlein> git clone -b incoming url
[11:48:06] <MaikKlein> i think
[11:49:17] <xenocons> ty
[11:49:55] <xenocons> seems to work
[11:54:58] *** Quits: novabyte (Instantbir@moz-D52819E1.mullvad.net) (Ping timeout)
[11:55:54] *** Joins: steveklabnik (steveklabn@9219ADAB.F74F8F08.14D1B0B.IP)
[11:58:11] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[11:59:58] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[12:05:45] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[12:06:19] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[12:06:59] *** Quits: steveklabnik (steveklabn@9219ADAB.F74F8F08.14D1B0B.IP) (Ping timeout)
[12:09:41] <MaikKlein> after doing a lot of research it seems that rust is the only viable language for a game engine (besides c++ ofc)
[12:12:35] <xenocons> cool
[12:14:14] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:16:55] <EXetoC> I guess library support isn't a requirement then, in which case I doubt the fact that there are only two "viable" languages, but yeah Rust should serve you well :>
[12:18:08] <MaikKlein> EXetoC, what do you think would be a viable language?
[12:18:19] <MaikKlein> besides c++ and rust
[12:20:28] <mleise> MaikKlein: q66 will say otherwise, but I think D is similar enough to C++ to write a game engine in it, if you get past the point where you fight the garbage collector.
[12:23:01] <MaikKlein> mleise, yes if you can get around the stop the world garbage collector, then D would also be good alternative. But at least it doesn't look that way because you would loose the whole standard library. And then it would probably better to just use c++. But I haven't looked to closely on D though.
[12:25:57] <mleise> MaikKlein: There is a tendency or change in mind on the way, that it has to be visible to the programmer what functions in the stdlib allocate. People proposed a compiler flag -nogc or annotations @nogc that verify that no GC allocations happen in a function.
[12:27:21] <mleise> There are game developers and developers of real-time audio software that cannot afford the stop the world GC. It becomes more evident that this lock-in was not the best decision.
[12:28:31] <MaikKlein> I also saw a concurrent garbage collection for d 1.0, which could be viable for soft realtime applications 
[12:28:55] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[12:28:58] <MaikKlein> but it seemed more like a research project
[12:29:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[12:29:11] <mleise> Yes it is used in a commercial application that uses D1
[12:29:13] <EXetoC> I haven't had a hard avoiding the GC yet. a couple of tiny allocations might occur in phobos, but I'm just going to ignore those until we get nogc or whatever, since they are so tiny
[12:29:21] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[12:29:22] <mleise> i.e. it works for them
[12:29:47] <mleise> and they provide tech that needs to make decisions within milliseconds
[12:29:58] <MaikKlein> yeah I read that article too
[12:29:58] <EXetoC> but a few people will have stricter requirements, so yeah it does need to improve
[12:30:00] <mleise> albeit they don't allocate much once the program is runnnig
[12:30:58] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[12:31:05] *** Joins: sankha93 (Instantbir@4284F7AC.C0D029E9.8B6C1D65.IP)
[12:31:08] <MaikKlein> but at the moment rust seems like a perfect fit. So I probably stay with rust once it is stable.
[12:31:21] <EXetoC> I've had a few issues with std.container.Array, that's all. I think D for example would be viable, but yeah I'd definitely go with Rust myself
[12:31:27] *** Joins: nano (nano@moz-972880B.superkabel.de)
[12:32:02] <MaikKlein> and bjz is going crazy with opengl stuff
[12:32:08] <EXetoC> there seems to be plenty of other interesting languages, like nimrod for example, but it probably has a smaller community
[12:33:25] <EXetoC> oh, nimrod has a python-ish syntax. I'm switching right away :p
[12:34:51] <EXetoC> a colon and then enter, and then you have your block. amazing innit
[12:34:52] <MaikKlein> never heard of nimrod before but it looks interesting
[12:36:41] <MaikKlein> oh not again a language with $$$$$$
[12:37:07] <EXetoC> yep, noticed that
[12:41:49] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[12:42:04] <EXetoC> MaikKlein: it seems to be short for toString though, and other things, so it's definitely not as silly as in php :>
[12:42:43] <MaikKlein> EXetoC, yeah that seems actually kinda okay
[12:43:13] <MaikKlein> really interesting language thanks I will do some research now
[12:43:54] <xenocons> does rust work with grsec\pax installed =)
[12:44:38] <bstrie> nothing works with grsec installed, isn't that the point?
[12:44:43] <bstrie> the safest computer is a bricked computer
[12:44:52] <xenocons> heh
[12:45:12] <EXetoC> MaikKlein: "x = @[1, 2, 3, 4, 5, 6] # the @ turns the array into a sequence" was it too inspired by similar languages? I wonder. I don't know where the @ comes from
[12:45:41] <bstrie> perl, likely, if sigils change the actual interpretation of the variable
[12:46:12] *** Joins: jaen (jaen@4A42275B.6A94545C.43DC2829.IP)
[12:46:55] <dbaupp> bstrie: I think https://github.com/mozilla/rust/pull/7078 failed because of the transient mac bug
[12:46:58] <MaikKlein> funny that the code probably will also compile in rust :p
[12:48:25] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[12:48:44] <bstrie> dbaupp: looks like it's failed twice now
[12:48:49] *** Quits: sankha93 (Instantbir@4284F7AC.C0D029E9.8B6C1D65.IP) (Ping timeout)
[12:49:03] <bstrie> doesn't sound very transient to me
[12:49:05] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[12:49:14] <dbaupp> bstrie: yeah, both times on mac in rustpkg (it keeps happening to every pull request)
[12:49:33] <bstrie> well I'm not approving it if it's just going to fail :P
[12:49:53] <dbaupp> bstrie: e.g. https://github.com/mozilla/rust/commit/59546689d5c218c89515828f0ecb4021a3fd35d5#commitcomment-3414435
[12:50:29] <mark_edward> it's still supposed to be possible to automatically get Rand with #[deriving(Rand)] right?
[12:50:47] <bstrie> mark_edward: maybe it's deriving(Rng) instead?
[12:51:00] <mark_edward> let me try that
[12:51:08] <dbaupp> mark_edward: it's Rand
[12:51:30] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[12:51:38] <dbaupp> (and yes, it is supposed to be possible. It's not in 0.6, though.)
[12:51:56] *** Quits: jaen (jaen@4A42275B.6A94545C.43DC2829.IP) (Ping timeout)
[12:52:12] <Blei> dbaupp: something similar also happened on linux. i'm actually pretty sure it's a general problem with multithreaded rustc/llvm
[12:52:14] <mark_edward> i get this error 
[12:52:15] <mark_edward> http://pastebin.com/F9dyCc1U
[12:52:31] <bstrie> mark_edward: what version?
[12:52:43] <dbaupp> mark_edward: hm, strange
[12:52:47] <mark_edward> rustc 0.6 (075da9c 2013-06-11 00:22:34 -0700)
[12:52:48] *** Quits: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP) (Quit: pyrac)
[12:52:56] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[12:52:59] <mark_edward> it's an enum, if that helps
[12:53:04] <bstrie> we really need to change trunk to be 0.7a
[12:55:05] <dbaupp> mark_edward: this works for me https://gist.github.com/huonw/6cac9a6afa69f3fe9fd0
[12:55:12] <dbaupp> does that run?
[12:56:08] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (Ping timeout)
[12:56:10] <mark_edward> yes that runs
[12:56:12] <mark_edward> odd...
[12:56:27] <dbaupp> hm... what's your code?
[12:56:50] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[12:56:55] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[12:57:07] *** Quits: mib_t9xdlp (Mibbit@moz-A0E225F0.avcosystems.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[12:57:10] <mark_edward> here: https://gist.github.com/MarkJr94/5773453
[12:57:20] <mark_edward> the main functions is in the .rc
[12:57:25] <mark_edward> a separate file
[12:57:27] *** Quits: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP) (Ping timeout)
[12:57:44] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:58:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:58:23] <dbaupp> works for me :(
[12:59:12] <mark_edward> wtf...
[12:59:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:59:53] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[13:00:06] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:00:43] *** Quits: zz_kimundi (kimundi@moz-B5F060A8.dip0.t-ipconnect.de) (Ping timeout)
[13:01:04] <mark_edward> weird, it's working for me too with the main fn in the same file
[13:01:13] <mark_edward> skipping the crate file
[13:01:43] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:01:53] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[13:02:11] <mark_edward> and then if i try compiling the whole crate, it stops working again
[13:02:13] <mark_edward> i dont get it
[13:02:35] <dbaupp> mark_edward: ok, I can reproduce that by separating the enum defn into a separate mod
[13:02:38] <dbaupp> strange
[13:03:47] <dbaupp> mark_edward: ok, I could fix it by putting `use std;` in the mod with Card
[13:03:53] <mark_edward> any idea what could cause this?
[13:04:03] <mark_edward> oh okay, i'll try that
[13:04:38] <dbaupp> mark_edward: yeah, the Rand deriving instance is probably creating an impl like 'impl std::rand::Rand for Card {}` when it needs to do `impl ::std::rand::Rand for Card {}`
[13:04:47] * dbaupp checks
[13:05:52] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[13:06:19] <dbaupp> okaaay, according to rustc --pretty expanded, it is generating the correct impl. how peculiar
[13:07:17] <mark_edward> what could be the issue then?
[13:07:33] <dbaupp> wait, it's doing other things badly: it's calling 'std::rand::Rand::rand()' rather than '::std::rand::Rand::rand()'
[13:07:38] * dbaupp fixes it
[13:10:27] <mark_edward> prefixing '::' refers to the global namespace, right?
[13:10:33] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[13:10:45] <dbaupp> mark_edward: yeah
[13:11:00] *** Joins: sankha93 (Instantbir@42B82B5.B1950BBF.8B6C1D65.IP)
[13:11:06] <mark_edward> cool. when will it be fixed i incoming? should i try and make an issue?
[13:11:12] <dbaupp> ok, this looks like it's a deeper bug than the Rand code being incorrect
[13:11:16] *** Joins: novabyte (Instantbir@moz-D52819E1.mullvad.net)
[13:11:29] <dbaupp> mark_edward: I'm fixing it now :) so hopefully in a few hours
[13:12:30] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[13:12:52] <mark_edward> Cpp;!
[13:12:56] <mark_edward> *Cool!
[13:13:26] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:13:30] *** Joins: jaen (jaen@4A42275B.6A94545C.43DC2829.IP)
[13:13:35] <dbaupp> it's strange, because #[deriving(Rand)] basically generates 'match rand() % number_of_variants { 0 => .., 1 => .., ... }' with other calls to rand() within each arm, depending on if the variants have any fields (e.g. I and F in my example above). And the rand call in the arms is fine (with the :: prefix), it's just the one in the match! :(
[13:15:35] <mark_edward> little errors like that are bound to pop up in anything as big as Rust
[13:15:45] <mark_edward> it's a wonder we found it before 1.0 ;)
[13:15:52] <mark_edward> (not really)
[13:19:54] *** Joins: zz_kimundi (kimundi@moz-EEEA017A.dip0.t-ipconnect.de)
[13:20:16] *** AutomatedTester is now known as AutomatedTester|W3C
[13:20:19] *** zz_kimundi is now known as kimundi
[13:20:58] <pnkfelix> nmatsakis: I posted an elaborated explanation in the comments for Issue 5723.  Can you confirm my assertion that the borrow-checker should be rejecting the current io.rs implementation of with_bytes_reader ?
[13:22:02] <nmatsakis> pnkfelix: ok
[13:22:06] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[13:23:14] <nmatsakis> pnkfelix: yes, the code should be rejected.
[13:23:27] *** Joins: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP)
[13:23:35] <nmatsakis> pnkfelix: we really need to get & and ~ objects working 
[13:23:41] <pnkfelix> nmatsakis: Is there a bug open for them?
[13:23:59] <pnkfelix> (this strikes me as a pretty nasty hole in borrowck.)
[13:24:07] *** Joins: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP)
[13:24:08] <nmatsakis> pnkfelix: I don't know if there is a bug open for them,
[13:24:12] <nmatsakis> pnkfelix: and yes it's a nasty hole.
[13:24:16] <pnkfelix> nmatsakis: I'll look
[13:24:41] <pnkfelix> nmatsakis: (this strikes me as way-easier to accidentally run into than the recurring closure loophole.)
[13:24:50] <dbaupp> mark_edward: the "fixed" version is compiling... let's see if this works...
[13:25:00] <mark_edward> cool!
[13:25:25] <nmatsakis> pnkfelix: yes.
[13:25:53] <nmatsakis> pnkfelix: the main reason I haven't focused much energy on it is that fixing it is pretty straight-forward, at least with respect to the borrow checker :)
[13:25:54] <erickt> pnkfelix: that's an awesome explanation in 5723 
[13:26:00] <nmatsakis> pnkfelix: actually the bug is not in the borrow checker at all
[13:26:06] <nmatsakis> pnkfelix: but rather the region inferencing code
[13:26:09] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[13:26:14] <nmatsakis> pnkfelix: and the kind checker
[13:26:22] <pnkfelix> nmatsakis: thanks for the confirm.  I was feeling embarrassed about taking so long to grok the issue after we spoke yesterday
[13:26:36] <nmatsakis> maybe I will add that to the bug
[13:26:52] <pnkfelix> nmatsakis: but I realized this morning that this was perhaps subtle enough to warrant this elaboration.  :)
[13:27:25] <nmatsakis> pnkfelix: yeah, it's subtle.
[13:27:40] <nmatsakis> pnkfelix: we should have a FAQ on the matter of closures/traits and their ability to "hide" lifetimes,
[13:27:55] <nmatsakis> pnkfelix: this comes up most often when writing generic functions that try to close over a value T
[13:28:08] <nmatsakis> pnkfelix: in which case we require (currently) a `'static` bound, indicating that T contains no borrowed pointers
[13:28:17] <nmatsakis> pnkfelix: I don't remember why this code is not triggering in this case
[13:28:29] <nmatsakis> pnkfelix: that is to say, we do make some effort to get this right, but there's a bug somewhere.
[13:29:45] <nmatsakis> pnkfelix: the current code is a bit overly simplistic in any case; we should allow type parameters to have an arbitrary lifetime as bound, not just 'static
[13:30:05] <nmatsakis> pnkfelix: but I guess we should get it sound first :)
[13:30:14] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:30:15] <pnkfelix> nmatsakis: well, if the fix is as straight-forward as you say
[13:30:28] <pnkfelix> nmatsakis: maybe I will look into it as another starter project.  
[13:30:45] <nmatsakis> pnkfelix: sure. but I think first thing to do would be to conver tthat API to use &Trait
[13:30:46] *** Joins: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP)
[13:30:48] <pnkfelix> nmatsakis: but it sounds like the & and ~ object limitation is going to be the tough nut
[13:30:49] <nmatsakis> pnkfelix: maybe it works? who knows.
[13:30:56] <nmatsakis> pnkfelix: I am operating somewhat on hearsay here.
[13:31:01] <pnkfelix> nmatsakis: right, I guess the first step is to confirm that its broken.
[13:31:09] <pnkfelix> nmatsakis:  I did see a bug about segfaults with ~objects.
[13:31:16] <pnkfelix> nmatsakis: but nothing concrete about &objects yet
[13:31:21] <pnkfelix> nmatsakis: I'll look into it further.
[13:31:24] <nmatsakis> pnkfelix: I can tell you that the code for handling them looks kind of bogus :)
[13:31:33] <nmatsakis> pnkfelix: I remember reading it into and thinking "waaah? this needs some love"
[13:31:44] <nmatsakis> pnkfelix: but I don't remember why I thought that :)
[13:32:27] *** Quits: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:32:45] <dbaupp> mark_edward: you know how I said it was a deeper bug... I lied... i'd typoed false instead of true for the appropriate 'global' parameter. oops. nice catch, in any case :)
[13:32:48] *** Quits: doomlord_ (walter@moz-430C0E11.range86-176.btcentralplus.com) (Ping timeout)
[13:33:11] <nmatsakis> pnkfelix: I would be excited to help you try to fix such bugs, either with objects or borrow ck
[13:33:11] *** Quits: doomlord__ (servitor@moz-430C0E11.range86-176.btcentralplus.com) (Ping timeout)
[13:33:17] <mark_edward> just good to see fixes!
[13:33:27] *** Joins: doomlord_ (walter@moz-E0079CC.range86-145.btcentralplus.com)
[13:33:40] *** Quits: cstajn (Mibbit@moz-12174CD7.kimsufi.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:33:43] *** Joins: doomlord__ (servitor@moz-E0079CC.range86-145.btcentralplus.com)
[13:34:18] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[13:34:32] *** Quits: sankha93 (Instantbir@42B82B5.B1950BBF.8B6C1D65.IP) (Ping timeout)
[13:35:11] *** Joins: doomlord (doomlod@moz-E0079CC.range86-145.btcentralplus.com)
[13:38:34] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[13:38:58] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[13:39:35] *** Joins: t4nk773 (bzlandfill@6278F41C.98A5D9.13336A93.IP)
[13:42:25] <t4nk773> m
[13:42:34] <EXetoC> z
[13:43:06] <t4nk773> can we discuss about to_bytes fn in str
[13:43:20] <t4nk773> yesterday peeves was discussing about that
[13:43:32] <t4nk773> and i think he' saying something correct
[13:44:13] <t4nk773> may be we should try to  explain this in our documentation
[13:44:41] <erickt> t4nk773:  what about to_bytes?
[13:45:55] <erickt> I wonder if peeves filed that bug to document this case...
[13:46:54] *** Quits: t4nk773 (bzlandfill@6278F41C.98A5D9.13336A93.IP) (Quit: CGI:IRC (EOF))
[13:46:56] *** Joins: peeves (bzlandfill@6278F41C.98A5D9.13336A93.IP)
[13:47:30] <dbaupp> erickt: https://github.com/mozilla/rust/pull/7101 r?
[13:47:34] <dbaupp> mark_edward: ^
[13:47:41] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[13:48:02] <mark_edward> yay!
[13:48:21] <peeves> hi erickt: i am wondering if I should file thHAT BUG OR NOT
[13:49:10] *** Joins: t4nk773 (bzlandfill@6278F41C.98A5D9.13336A93.IP)
[13:49:38] <erickt> peeves: I'll file the bug
[13:50:13] <t4nk773> i am just filing it
[13:51:18] <erickt> dbaupp: looking
[13:51:39] *** Quits: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP) (Ping timeout)
[13:52:13] <peeves> t4nk773: erickt : i should file this bug
[13:52:24] <erickt> dbaupp: r+
[13:52:32] <dbaupp> erickt: thanks :)
[13:53:02] <erickt> peeves / t4nk773: Ok, whomever files this bug please add a "cc @erickt" in it
[13:53:23] <dbaupp> mark_edward: hopefully the fix'll be in incoming in 40 minutes or so (assuming the mac bot feels like cooperating)
[13:53:33] <mark_edward> nice!
[13:54:21] <Blei> peeves, t4nk773: are you the same person?
[13:54:29] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving.)
[13:54:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:54:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jTI-Ww
[13:54:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:54:39] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:54:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lf0YdQ
[13:54:39] <ghrust> 13rust/06auto 145efaa4f 15Huon Wilson: syntax: correct the Rand::rand call to select enum variants in #[deriving(Rand)]....
[13:54:39] <ghrust> 13rust/06auto 1444de183 15bors: auto merge of #7101 : huonw/rust/rand-call, r=erickt...
[13:54:39] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:55:05] <dbaupp> Blei: heh
[13:56:39] *** Joins: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP)
[13:57:22] *** Quits: bytbox (s@moz-2E27684C.student.umd.edu) (Ping timeout)
[13:58:59] *** Quits: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP) (Quit: pyrac)
[13:58:59] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:59:41] *** Joins: Ernbert (bzlandfill@moz-7077963E.ethz.ch)
[14:00:21] *** Parts: Ernbert (bzlandfill@moz-7077963E.ethz.ch) ()
[14:00:21] *** Quits: peeves (bzlandfill@6278F41C.98A5D9.13336A93.IP) (Quit: CGI:IRC)
[14:00:39] *** Quits: t4nk773 (bzlandfill@6278F41C.98A5D9.13336A93.IP) (Quit: CGI:IRC (EOF))
[14:00:48] <Blei> i'm somewhat serious, same time entering, same time leaving, same ip
[14:01:03] <Blei> same writing style
[14:01:16] <dbaupp> I agree
[14:01:16] *** Joins: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:02:05] <bstrie> they could also just be conjoined twins
[14:02:16] *** Joins: jdm (jdm@moz-B1E23509.dsl.teksavvy.com)
[14:03:00] *** Quits: erickt1 (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:04:22] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:04:49] *** Quits: heftig (heftig@moz-264743B5.dip0.t-ipconnect.de) (Quit: Quitting)
[14:06:04] *** Joins: heftig (heftig@moz-264743B5.dip0.t-ipconnect.de)
[14:07:58] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:08:14] *** Joins: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP)
[14:09:12] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:12:16] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (Ping timeout)
[14:12:37] *** cscottnet_away is now known as cscottnet
[14:14:43] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:15:02] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[14:15:15] *** Quits: doomlord (doomlod@moz-E0079CC.range86-145.btcentralplus.com) (Ping timeout)
[14:15:32] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[14:15:44] *** Joins: doomlord (doomlod@moz-E0079CC.range86-145.btcentralplus.com)
[14:17:04] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[14:19:01] *** Joins: Guest (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[14:21:00] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:21:40] <cmr> erickt: ping
[14:21:53] *** Quits: Guest (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:24:06] <erickt> cmr: pong, but just for a sec
[14:24:09] <erickt> then I need to run
[14:24:12] <cmr> erickt: how'd it go last night?
[14:24:15] <erickt> the meetup went great
[14:24:36] <cmr> good to hear! how many showed up?
[14:24:43] <erickt> a ton, I think 18
[14:24:48] <cmr> nice
[14:25:07] <erickt> I got to run though, I can give you more details in an hour or so
[14:25:10] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[14:25:12] <cmr> sure, thanks
[14:26:26] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:32:25] <dbaupp> cmr: are you collecting stories for the next installment of TWiR? :)
[14:32:32] <cmr> dbaupp: yup
[14:32:35] <pnkfelix> acrichto: ping
[14:33:51] <nmatsakis> so if you have some code like `fn foo<T:Copy>(x: T) -> (T,T) { (x, x) }`, this currently has the rather unfortunate property that the fn can be applied to types where it would not type check if you cut-and-paste the fn and replaced T with the concrete type
[14:34:09] <nmatsakis> in particular, foo(~"123") is allowed
[14:34:32] <nmatsakis> sigh. I have a patch about 50% of the way through fixing this, so that T:Copy moves-by-default.
[14:34:53] <nmatsakis> mostly this is a matter of adding copy keywords hither and thither
[14:35:18] <dbaupp> mark_edward: anyway... I continue to be a bad programmer, and that patch failed... so you'll have to wait a bit longer :)
[14:35:19] <nmatsakis> (though not so many as you might think)
[14:35:53] <mark_edward> oh well 
[14:36:10] <dbaupp> they failed for such a silly reason too :(
[14:36:50] <pnkfelix> nmatsakis: hmm
[14:36:59] <pnkfelix> nmatsakis: so is one way of thinking about this
[14:37:01] <nmatsakis> of course, the Copy bound is deprecated.
[14:37:12] <nmatsakis> plan is to go to Clone, which would require foo.clone() calls
[14:37:17] <pnkfelix> nmatsakis: that the `copy`s are inserted automatically for the foo you wrote?
[14:37:30] <pnkfelix> nmatsakis: and I'd have to write them by hand if I wrote the variant that uses ~str ?
[14:37:35] <nmatsakis> pnkfelix: yes, that's right. they are. (and sometimes it inserts them in places they wouldn't otherwise be needed, as an aside)
[14:37:40] <nmatsakis> pnkfelix: right, if you wrote:
[14:37:47] <nmatsakis> fn foo(x: ~str) -> (~str, ~str) { (x, x) }
[14:37:49] <nmatsakis> you'd get an error
[14:37:55] <pnkfelix> nmatsakis: seems like a bug
[14:37:56] <nmatsakis> what winds up happening is that the generic fn is compiled to:
[14:37:57] <pnkfelix> nmatsakis: to copy things
[14:38:02] <nmatsakis> fn foo(x: ~str) -> (~str, ~str) { (copy x, copy x) }
[14:38:05] <nmatsakis> note the extra copy
[14:38:05] <pnkfelix> nmatsakis: without asking for it
[14:38:08] <nmatsakis> you could get awayw with
[14:38:11] <pnkfelix> nmatsakis: but I guess in some cases
[14:38:11] <nmatsakis> fn foo(x: ~str) -> (~str, ~str) { (copy x, x) }
[14:38:17] <pnkfelix> nmatsakis: its what people expect...
[14:38:51] <pnkfelix> nmatsakis: but you say the plan is to require explicit calls to clone() ?
[14:39:01] <nmatsakis> yes
[14:39:03] <nmatsakis> that is the plan,
[14:39:06] <nmatsakis> so this is a step along the way.
[14:39:11] <nmatsakis> the reason this is bugging me is that it means that in trans,
[14:39:17] <pnkfelix> nmatsakis: So why the change in philosophy?
[14:39:17] <nmatsakis> it is insufficient to consider the monomorphized type
[14:39:32] <jed> are explicit calls to copy going to go away in favor of clone()?
[14:39:35] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[14:39:37] <dbaupp> could I get an r on https://github.com/mozilla/rust/pull/7101 ? (it's very short :) ) 
[14:39:38] <nmatsakis> jed: that is the plan.
[14:39:50] <jed> man i keep using stuff that gets deprecated :x
[14:39:50] <nmatsakis> pnkfelix: a couple of reasons... (1) we want to move to explicit traits, and this makes copy customizable,
[14:39:54] <pnkfelix> dbaupp: I'll lookk
[14:40:05] <nmatsakis> jed: we are cutting and cutting =) simpler language here we come!
[14:40:22] *** Quits: jaen (jaen@4A42275B.6A94545C.43DC2829.IP) (Ping timeout)
[14:40:46] <nmatsakis> pnkfelix: (2) at least on my part, I never agreed with this decision in the first place. I believe the goal was not to "burden" generic fns
[14:40:58] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Connection reset by peer)
[14:40:58] <jed> nmatsakis: ultimately I appreciate the changes, new iterators are very cool
[14:41:01] <dbaupp> jed: don't worry, it's not properly deprecated yet... the standard library still uses it extensively
[14:41:18] *** Quits: Blei (philipp@moz-7077963E.ethz.ch) (Quit: WeeChat 0.4.1)
[14:41:24] <dbaupp> pnkfelix: (thanks!)
[14:42:00] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:42:26] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[14:42:26] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1444de183 to 14a198aad: 02http://git.io/N3iJvQ
[14:42:26] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[14:42:28] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[14:42:28] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/ImCtsg
[14:42:28] <ghrust> 13rust/06auto 145efaa4f 15Huon Wilson: syntax: correct the Rand::rand call to select enum variants in #[deriving(Rand)]....
[14:42:28] <ghrust> 13rust/06auto 148b9f913 15Huon Wilson: syntax: revert the uint -> u32 "fix"; make the names/comment match.
[14:42:29] <ghrust> 13rust/06auto 14553c61d 15bors: auto merge of #7101 : huonw/rust/rand-call, r=pnkfelix...
[14:42:31] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[14:44:11] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Quit: victorporof)
[14:44:35] <doener> dbaupp: at least you didn't spend some hours trying to get rid of the Loads/Stores for "nil" returns in functions only to realize that that kills TCO
[14:45:17] <dbaupp> doener: oh :( really?
[14:45:19] <doener> which is my current "bad programmer" achievement
[14:45:47] <doener> dbaupp: yeah, I get nice "ret nullinitializer" now, but no more tailcalls for nil returning functions
[14:46:03] <dbaupp> does clang generate loads/stores for void functions? does it get TCO?
[14:46:09] <doener> or rather, I get tail_calls_ instead of jumps
[14:46:28] * dbaupp doesn't know the details of LLVM IR
[14:46:39] <doener> dbaupp: thing is, rust doesn't use void for nil, but {} (empty type)
[14:47:11] <dbaupp> can we use void?
[14:47:17] <doener> I guess it might work with void, but I have no idea yet if it's possible to use void, and if so, how
[14:47:27] *** Joins: peeves (Mibbit@9B3B64A0.A2BFDAE9.A3D1B221.IP)
[14:47:35] <doener> but that's what I'll try tomorrow
[14:48:09] *** Joins: deLta30 (quassel@C54B2AA2.1B98BFA9.622A08E2.IP)
[14:49:13] <dbaupp> good luck :)
[14:49:17] <doener> dbaupp: yup, void should do: http://llvm.org/docs/CodeGenerator.html#tail-call-optimization -- second bullet point
[14:49:18] *** Quits: peeves (Mibbit@9B3B64A0.A2BFDAE9.A3D1B221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:49:56] *** Parts: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) ()
[14:50:55] *** Joins: wikkit (Mibbit@C64E63A4.299F7FAC.DFAB1F33.IP)
[14:51:26] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[14:51:54] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[14:52:19] *** Joins: berak (chatzilla@50A9AF2B.5291F4C0.16E13E53.IP)
[14:54:06] *** Quits: wikkit (Mibbit@C64E63A4.299F7FAC.DFAB1F33.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:56:17] *** Joins: jaen (jaen@moz-4A6AA9DF.play-internet.pl)
[14:57:56] *** Joins: peeves (Mibbit@9B3B64A0.A2BFDAE9.A3D1B221.IP)
[14:58:24] *** Quits: peeves (Mibbit@9B3B64A0.A2BFDAE9.A3D1B221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:02:01] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (Ping timeout)
[15:02:38] *** Parts: berak (chatzilla@50A9AF2B.5291F4C0.16E13E53.IP) ()
[15:03:18] *** Joins: Guest (textual@34641662.FB4DE631.66C78B76.IP)
[15:16:55] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[15:18:33] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[15:18:47] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[15:21:28] <pnkfelix> so, right now the build has a bunch of warnings; one of which complains about unused imports in std.rc: "use core::{str, unstable};"
[15:21:56] <pnkfelix> but fixing this warning cannot be as simple as removing the offending line
[15:22:20] <pnkfelix> because doing so causes the build to error (e.g. with the calls to fmt! that are peppered elsewhere).
[15:22:54] <pnkfelix> So, what is the appropriate fix?  Is the "unused import" warning wrong?  Or is this an exceptional case that should be dealt with in some other manner?
[15:23:13] <cmr> pnkfelix: is the warning reported in all stages?
[15:23:31] <pnkfelix> cmr: good point, it might only be stage0
[15:23:46] <pnkfelix> cmr: which reminds me, I was wondering why we don't just disable all warnings during the stage0 build ...
[15:24:00] <pnkfelix> (â€¦ i feel like I saw a ticket about this recentlyâ€¦ )
[15:24:18] <cmr> pnkfelix: well usually it's not so bad, the snapshot is just really old by this point
[15:24:54] <pnkfelix> cmr: still, as a matter of principle, it seems silly to have the warnings for stage0, unless one is not intending on proceeding to build stage1
[15:26:40] *** Quits: deLta30 (quassel@C54B2AA2.1B98BFA9.622A08E2.IP) (Connection reset by peer)
[15:27:34] *** Quits: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP) (Ping timeout)
[15:28:27] <nmatsakis> what is the command that tells you what dlls a file will link to?
[15:28:30] <nmatsakis> (in linux)
[15:28:34] <cmr> nmatsakis: ldd
[15:28:41] <nmatsakis> thanks
[15:29:37] <pnkfelix> nmatsakis: is issue 2203 related to 5723 ?  My intuition put me in graydon's camp for 2203
[15:30:00] <pnkfelix> nmatsakis: I was about to try to search the irc logs to see what  your conversation wtih him was like
[15:30:22] <nmatsakis> pnkfelix: 5723 seems to be a subpart of 2203
[15:30:24] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[15:30:32] <nmatsakis> pnkfelix: really they are the same
[15:31:21] <nmatsakis> pnkfelix: probably we ought to close #2203, since it is partially implemented, and just leave #5723 as a bug in the existing impl
[15:31:44] <pnkfelix> but you still say that "let x = 3; let f = @{g: &x};" should be totally legal ?
[15:31:47] <nmatsakis> sure
[15:31:47] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[15:31:51] <nmatsakis> (and it is)
[15:32:07] <pnkfelix> /me head is blown
[15:32:20] <nmatsakis> pnkfelix: you will not be able to deref f.g outside of that function scope
[15:32:28] <pnkfelix> nmatsakis: ah
[15:32:34] <nmatsakis> pnkfelix: there are some important use cases for this, but also it can arise with generic fns
[15:32:39] <pnkfelix> nmatsakis: right, okay, the type of g that is inferred
[15:32:45] <pnkfelix> nmatsakis: will prevent that access.  Right?
[15:32:56] <pnkfelix> nmatsakis: (type of "f.g" that is)
[15:33:14] <nmatsakis> pnkfelix: right, the type will be @&'a int
[15:33:23] <nmatsakis> pnkfelix: or rather @{f: &'a int}
[15:33:28] <nmatsakis> pnkfelix: back in the old days of structural records
[15:33:33] <pnkfelix> nmatsakis: @{g: &'a int}
[15:33:37] <nmatsakis> uh, yes.
[15:33:47] <pnkfelix> nmatsakis: for some 'a
[15:33:53] <pnkfelix> nmatsakis: (existentially bound?)
[15:33:59] <pnkfelix> nmatsakis: no that's not right
[15:34:41] <pnkfelix> nmatsakis: okay, I at least can see how this can be legal now.
[15:35:03] <nmatsakis> pnkfelix: no, not existentially bound. I used `'a` to mean "the lifetime of the enclosing block"
[15:36:11] <pnkfelix> cmr: FYI the warning I was referring to comes up in stages 1 and 2 as well
[15:36:37] <pnkfelix> cmr: so this doesn't seem like something that will fix itself with a new snapshot
[15:38:11] *** Joins: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz)
[15:38:16] *** Quits: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz) (Quit: brb)
[15:38:25] *** Joins: mib_5lj6co (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[15:39:08] <mib_5lj6co> is there an error trait? I'm thinking there should be but can't seem to find it...
[15:39:18] <jed> try Result
[15:39:27] <cmr> mib_5lj6co: what would the error trait do?
[15:39:45] <mib_5lj6co> function for printing, for example?
[15:39:45] <cmr> pnkfelix: unfortunate :( Is the unused-import checker running before macro expansion or something?
[15:40:01] <mib_5lj6co> jed: Result gives half of what I want, haha
[15:40:20] *** Parts: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) ()
[15:40:37] <jed> are you looking for printing to stderr or something similar?
[15:40:45] <jed> or just a to_str for result
[15:40:50] <pnkfelix> cmr:  Maybe.  Not sure.  I had thought it was some weirdness where it might be looking at std.rc (the file) on its own without accounting for the effect those imports have on other files in the crate.
[15:40:57] <mib_5lj6co> just a way to deal with errors in general
[15:41:12] <mib_5lj6co> yes, to_str takes care of that specific case, but may not for other things I happen to want later...
[15:41:31] <cmr> mib_5lj6co: so you want like .what() from C++ exceptions?
[15:41:32] <dbaupp> cmr: macro expansion runs before anything in rustc
[15:41:53] <mib_5lj6co> cmr: not too familiar with C++ but that sounds right
[15:42:09] <mib_5lj6co> I'm probably missing something obvious
[15:42:17] <mib_5lj6co> but say I want to propagate *any* kind of Result
[15:42:24] <mib_5lj6co> etc.
[15:42:38] <kimundi> mib_5lj6co:m There has been notions about adding sth like that, but it's blocked anyway on traitobjects not working correctly everywhere
[15:42:46] <mib_5lj6co> ah
[15:42:53] <mib_5lj6co> all right, thanks for letting me know!
[15:42:55] <mib_5lj6co> thanks all
[15:43:13] <kimundi> That is, something like a generic ~Error traitobject
[15:43:29] <mib_5lj6co> yep, I figured; is there a conceptual reason against it?
[15:43:37] <mib_5lj6co> aside from it being blocked anyway
[15:43:48] <kimundi> Afaik not really
[15:44:03] <mib_5lj6co> ah, too bad :P thanks much!
[15:44:09] <jed> mib_5lj6co: this is similar to the traitobject problem we ran into earlier
[15:44:22] <mib_5lj6co> aaaah
[15:44:31] <mib_5lj6co> thanks :/
[15:45:04] <kimundi> For example fail
[15:45:51] <mib_5lj6co> yeah... that's a little too specific though, I think
[15:45:52] <kimundi> For example fail!() might consume a generic ~Error object, rather than being hardcodod to a string
[15:46:21] <mib_5lj6co> ah, yes, something like that would be great
[15:47:59] <jed> without trait objects, you could do something like 
[15:48:03] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:48:50] <jed> trait Error<T,U> { fn get_ok<T>(...) {...}  fn get_error<U>(...) {...} }
[15:49:17] <mib_5lj6co> yep
[15:49:53] *** Joins: brendan (brendaneic@moz-B4787D27.sub-70-211-65.myvzw.com)
[15:50:52] *** Quits: jdm (jdm@moz-B1E23509.dsl.teksavvy.com) (Ping timeout)
[15:52:47] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (Ping timeout)
[15:56:29] <jed> I don't suppose anyone has implemented float-to-bytestring conversion?
[15:57:09] <SiegeLord> Let's say I have an enum type Type, can I make an impl on &[Type] ?
[15:57:33] <SiegeLord> It's giving me: error: cannot associate methods with a type outside the crate the type is defined in; define and implement a trait or new type instead
[15:57:42] <SiegeLord> It's in the same crate
[15:57:43] <jed> I think it would have to be on &'a [Type]
[15:57:43] <cmr> rusti: 0.0143f.to_str().to_ascii()
[15:57:46] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MZJT
[15:58:19] <heftig> rusti: 0.0143f.to_str().to_ascii().to_owned()
[15:58:20] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/deYZ
[15:58:20] <cmr> rusti: let x = 0.0143f.to_str().to_ascii(); println(fmt!("%?", x));
[15:58:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MVRj
[15:58:24] <SiegeLord> jed: I had to roll my own float-to-byte array implementation (if that's what you meant)
[15:58:47] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[15:59:03] <jed> SiegeLord: yeah that's what I'm looking for, but it looks like cmr (possibly) has the solution
[15:59:20] <Jeaye> rusti: 0.0143f32.to_str().to_ascii()
[15:59:20] <SiegeLord> That's just printing it to string
[15:59:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cBOL
[15:59:33] <jed> :(
[15:59:35] <cmr> What else would a bytestring be?
[15:59:56] <SiegeLord> In C terms, union {float a; char[8] bytes;}
[16:00:11] <jed> yeah, sorry if my terminology was weird 
[16:00:22] <SiegeLord> You can cast::transmute, but I don't know how that works with endiannes
[16:00:29] *** Joins: blitter (blitter@moz-FB45689C.dyn.centurytel.net)
[16:00:30] <dbaupp> pnkfelix: https://github.com/mozilla/rust/pull/7101 r? (third time lucky!)
[16:01:37] <cmr> rusti: 0.01f.bytes()
[16:01:38] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YeCB
[16:01:46] <cmr> oh, heh
[16:02:11] <jed> that bytes function doesn't seem to be present
[16:02:13] <cmr> jed: ToBytes isn't implemented for float/f32/f64, but if it were, that's what you'd use
[16:02:28] <cmr> rusti: std::float::bytes()
[16:02:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jVZf
[16:02:31] <jed> cmr: yeah I've been using ToBytes for converting everything else
[16:02:34] <cmr> guh
[16:02:48] <cmr> it should return the number of bytes used to represented the value
[16:03:25] <SiegeLord> Here's what I'm trying to do: https://gist.github.com/SiegeLord/5774894
[16:03:49] <cmr> rusti: let x: ~[u8] = unsafe { cast::transmute(0.01234f) }; x
[16:03:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LQBB
[16:03:59] <cmr> rusti: use std::cast; let x: ~[u8] = unsafe { cast::transmute(0.01234f) }; x
[16:04:01] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[16:04:08] <cmr> heh
[16:04:25] <cmr> rusti: use std::cast; let x: &[u8] = unsafe { cast::transmute(0.01234f) }; x
[16:04:26] -rusti- <anon>:1:0: 1:0 error: transmute called on types with different sizes: float (64 bits) to &[u8] (128 bits)
[16:04:27] -rusti- <anon>:1 #[allow(unused_variable)];
[16:04:27] -rusti-          ^
[16:04:27] -rusti- application terminated with error code 101
[16:05:07] <cmr> rusti: use std::cast; let x: u64 = unsafe { cast::transmute(0.01234f) }; x.to_bytes(true)
[16:05:08] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OdSh
[16:05:21] <cmr> rusti: use std::{cast,to_bytes}; let x: u64 = unsafe { cast::transmute(0.01234f) }; x.to_bytes(true)
[16:05:22] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YeDT
[16:05:32] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:05:33] * cmr gives up
[16:05:44] <jed> rusti: use std::cast; let x: [u8, ..8] = unsafe { cast::transmute(3.14159f) }; x
[16:05:45] -rusti- [110, 134, 27, 240, 249, 33, 9, 64]
[16:05:59] <cmr> yay!
[16:06:02] <jed> :D
[16:06:10] <cmr> forgot about those
[16:06:34] *** Joins: snearch (snearch@moz-3EE28154.pool.mediaways.net)
[16:07:19] <jed> use std::cast; let x: f64 = unsafe { cast::transmute([110,134,27,240,249,33,9,64]) }; x
[16:07:29] <jed> rusti: use std::cast; let x: f64 = unsafe { cast::transmute([110,134,27,240,249,33,9,64]) }; x
[16:07:30] -rusti- <anon>:1:0: 1:0 error: transmute called on types with different sizes: [int, .. 8] (512 bits) to f64 (64 bits)
[16:07:30] -rusti- <anon>:1 #[allow(unused_variable)];
[16:07:30] -rusti-          ^
[16:07:30] -rusti- application terminated with error code 101
[16:07:48] <jed> rusti: use std::cast; let x: f64 = unsafe { cast::transmute([110,134,27,240,249,33,9,64] as [u8, ..8]) }; x
[16:07:49] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HSKL
[16:08:04] <cmr> you need the u8 suffix on the literals
[16:08:29] <jed> rusti: use std::cast; let x: f64 = unsafe { cast::transmute([110u8,134u8,27u8,240u8,249u8,33u8,9u8,64u8]) }; x
[16:08:30] -rusti- 3.14159
[16:08:38] <jed> woohoo :)
[16:08:42] <engla> you only need u8 on the first of the vec fortunately
[16:08:49] <cmr> engla: oh, neat!
[16:08:51] <engla> rusti: [0u8,1,2,3]
[16:08:52] -rusti- [0, 1, 2, 3]
[16:08:53] <cmr> makes sense
[16:09:15] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[16:09:28] <SiegeLord> rusti: let [u8, .. 2] = [0, 1];
[16:09:28] -rusti- <anon>:10:21: 10:22 error: expected an identifier or `_`
[16:09:29] -rusti- <anon>:10          let [u8, .. 2] = [0, 1];
[16:09:29] -rusti-                                ^
[16:09:29] -rusti- application terminated with error code 101
[16:09:44] <SiegeLord> rusti: let a : [u8, .. 2] = [0, 1];
[16:09:45] -rusti- ()
[16:09:53] *** Joins: sankha93 (Instantbir@42B82B5.B1950BBF.8B6C1D65.IP)
[16:10:19] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[16:10:47] <SiegeLord> rusti: impl ~[int] {}
[16:10:48] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dBZM
[16:10:59] <steven_is_false> Hey, issue https://github.com/mozilla/rust/issues/5688 is starting to annoy me. Where would I start looking to find the cause of the bug.
[16:11:03] *** Quits: jaen (jaen@moz-4A6AA9DF.play-internet.pl) (Ping timeout)
[16:11:29] <engla> rusti: let v = [1,2,3,4]; v[0] + 1u8
[16:11:30] -rusti- 2
[16:11:42] <cmr> steven_is_false: first thing to do would look at the LLVM IR (--emit-llvm -S), I think
[16:11:54] <steven_is_false> cmr: Thanks!
[16:13:04] <SiegeLord> Hmm, I guess I'll have to make a trait
[16:13:19] <dbaupp> steven_is_false: that bug looks similar to https://github.com/mozilla/rust/issues/7012 and aatch and doener have narrowed down the cause
[16:13:43] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:14:09] *** Joins: mib_9tb31u (Mibbit@moz-90635A88.rql.kiev.ua)
[16:14:21] <jed> rusti: let x: ~[u8] = unsafe { cast.transmute(3.14159f) }; x
[16:14:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aUhF
[16:14:34] <steven_is_false> dbaupp: Auto borrowing happens AFTER type checking?
[16:14:49] <jed> rusti: let x: ~[u8] = unsafe { std::cast::transmute(3.14159f) }; x
[16:14:50] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[16:15:12] <cmr> jed: ~[] are pointers, is what the problem is
[16:15:27] *** Quits: mib_9tb31u (Mibbit@moz-90635A88.rql.kiev.ua) (Quit: http://www.mibbit.com ajax IRC Client)
[16:16:05] <dbaupp> rusti: let x: [u8, .. 8] = unsafe { cast.transmute(3.14159f) }; x
[16:16:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bHJI
[16:16:16] <dbaupp> rusti: let x: [u8, .. 8] = unsafe { std::cast::transmute(3.14159f) }; x
[16:16:17] -rusti- [110, 134, 27, 240, 249, 33, 9, 64]
[16:16:20] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Input/output error)
[16:16:44] <Thiez> so I notice in io.rs we have 'impl Reader for @Reader'
[16:16:52] *** Joins: naq (skall@D5C2D2DF.E4265FCD.E481B5B.IP)
[16:17:08] <Thiez> it seems silly that [~@&]Trait would not automatically implement that trait
[16:17:11] *** Quits: brendan (brendaneic@moz-B4787D27.sub-70-211-65.myvzw.com) (Quit: brendan)
[16:17:18] *** Quits: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP) (Ping timeout)
[16:17:35] <Thiez> any particular reason for this?
[16:17:38] <pnkfelix> Thiez: they used to
[16:17:42] <pnkfelix> Thiez: but there's a reason it was removed
[16:17:57] <Thiez> do explain :)
[16:18:35] <pnkfelix> Thiez: (looking)
[16:18:58] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Ping timeout)
[16:19:05] <pnkfelix> Thiez: I think it might have something to do with covariance/contravariance, but I'm not 100% sure about that
[16:19:17] *** Parts: jfb (jfb@C587E14D.D6CCE4AE.77834EAA.IP) (Konversation terminated!)
[16:19:39] <Thiez> I think I've found it in the issues
[16:19:49] <Thiez> looks like 5087
[16:20:08] <pnkfelix> Thiez: perfect
[16:21:04] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[16:21:07] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:21:37] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[16:22:49] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[16:23:16] *** Joins: webber46 (webber46@moz-DC342D45.cust.bredband2.com)
[16:23:27] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:23:47] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:24:13] *** Quits: webber46 (webber46@moz-DC342D45.cust.bredband2.com) (Quit: webber46)
[16:24:27] *** Joins: eholk (eholk@moz-F2365EC7.uconnect.utah.edu)
[16:25:39] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[16:27:06] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:27:16] <heftig> rusti: let x: ~[u8] = unsafe { std::cast::transmute(~[3.14159f64]) }; x
[16:27:17] -rusti- ~[110, 134, 27, 240, 249, 33, 9, 64]
[16:27:44] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[16:29:13] *** Joins: brendan (brendaneic@moz-B4787D27.sub-70-211-65.myvzw.com)
[16:30:40] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[16:30:40] *** ChanServ sets mode: +o tjc
[16:30:42] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:31:13] *** Joins: eschweic1 (Adium@2557E599.66715431.D25A875A.IP)
[16:31:20] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[16:31:20] *** ChanServ sets mode: +qo graydon graydon
[16:31:37] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[16:32:13] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[16:32:20] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[16:32:26] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:34:14] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[16:34:43] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:35:16] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:35:26] *** Quits: mib_5lj6co (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:36:44] *** Joins: josh (josh@F6368174.6206BE40.7FC6A66E.IP)
[16:37:00] *** Quits: brendan (brendaneic@moz-B4787D27.sub-70-211-65.myvzw.com) (Quit: brendan)
[16:37:27] <graydon> #rust-triage for those interested
[16:39:09] *** Quits: duckinator (nick@moz-74B346B5.mostlyincorrect.info) (Ping timeout)
[16:39:09] *** Quits: rocode (rocode@moz-64C1010D.rocode.net) (Ping timeout)
[16:40:26] <kemurphy> hm, what's the recommended way to get around being unable to move out of an @ box?
[16:40:42] <kemurphy> i suppose context is necessary, one moment while i pastebin
[16:40:50] <kimundi> kemurphy: copy the content or don't use one :)
[16:40:58] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[16:40:58] <erickt> kemurphy: you could try using std::Cell
[16:41:11] <kimundi> or borrow a reference to its content
[16:41:50] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:41:51] <kemurphy> http://pastebin.mozilla.org/2520276
[16:41:57] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[16:42:05] <kemurphy> kimundi: unfortunately that's what libsyntax is handing me :/
[16:42:27] <erickt> kemurphy: which line is erroring out?
[16:42:34] <kemurphy> the bad lines are the matches
[16:42:44] <kemurphy> view_item_extern_mod and item_mod
[16:42:45] <erickt> try doinf "item_mod(ref m)
[16:42:50] <erickt> *doing
[16:43:01] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:43:22] <kemurphy> erickt: beautiful, thanks :)
[16:44:41] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[16:45:20] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[16:45:34] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[16:46:55] *** Joins: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP)
[16:47:52] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[16:47:57] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[16:48:16] <kemurphy> oh, hm, is there a way to get libsyntax to preserve the names of identifiers
[16:49:30] * kemurphy 's ultimate goal is to write a tool that parses a rust file and spits out a list of dependencies (libraries or other rust files)
[16:50:48] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[16:53:18] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:53:23] *** Joins: victorporof (victorporo@97CBAC80.9F23B8E6.79933D60.IP)
[16:54:41] <kemurphy> i feel like i should be looking at rustpkg
[16:55:19] <Luqman> kemurphy: do you mean getting a name from an ast::ident?
[16:56:29] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[16:56:29] *** ChanServ sets mode: +o brson
[16:57:49] *** Joins: rocode (rocode@moz-64C1010D.rocode.net)
[16:59:06] <kemurphy> Luqman: yes, though it looks like that's not possible directly; i'm guessing i have to make use of spans somehow?
[16:59:24] <kemurphy> or do those ints on the ident map to some table
[17:00:15] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[17:00:33] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[17:00:37] <Luqman> kemurphy: it is, they're interned so parser.id_to_str(some_ident); works
[17:01:33] *** Joins: duckinator (nick@moz-74B346B5.mostlyincorrect.info)
[17:01:36] <kemurphy> oh, awesome
[17:01:38] <kemurphy> thanks
[17:01:54] <steven_is_false> I just had a cool idea. Could one get performance improvements by sorting memory allocations into buckets depending on the instruction pointer of the caller of the malloc function?
[17:02:36] <cmr> steven_is_false: that's an interesting ide
[17:04:04] <cmr> steven_is_false: http://www.canonware.com/mailman/listinfo/jemalloc-discuss :)
[17:04:38] <steven_is_false> cmr: That'd be an interesting mailing list to follow.
[17:06:03] <steven_is_false> cmr: Thanks
[17:06:18] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:08:42] *** Quits: novabyte (Instantbir@moz-D52819E1.mullvad.net) (Quit: bye bye)
[17:09:12] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:09:48] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[17:10:15] *** Joins: mib_8u895e (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:10:17] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:12:45] <flu_> I thought I saw a commit yesterday that converted a lot of the math functions to use a more general numeric type - what trait was that? having trouble locating the commit
[17:12:47] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:13:20] <flu_> ah, Num
[17:13:24] <flu_> found the commit - nvm
[17:13:59] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[17:14:01] *** Joins: RMF (RMF@moz-F8ED88D1.dsl.telepac.pt)
[17:15:48] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:15:48] *** ChanServ sets mode: +o pcwalton
[17:16:27] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:16:43] <pcwalton> nmatsakis: servo desperately needs the fast-ffi stuff
[17:17:00] <pcwalton> no rush if you have other things but just thought I'd mention
[17:17:04] *** Quits: josh (josh@F6368174.6206BE40.7FC6A66E.IP) (Quit: josh)
[17:17:17] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[17:18:40] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[17:20:24] <steven_is_false> There aren't any bugs were unsafe blocks aren't required to use unsafe methods anymore right?
[17:20:44] <steven_is_false> (I'm just going through the compiler sources and removing all the warnings)
[17:22:40] <steven_is_false> Yep the unsafe block being warned about bug is still there.
[17:23:39] <nmatsakis> pcwalton: ok, yeah, it's next on my list of "rust things to button down" --- though I am really stuck. i've been giving it some time so sit so that hopefully when I revisit I will have some fresh ideas
[17:23:56] <pcwalton> what's the blocker? I forget
[17:24:22] <erickt> brson: ping
[17:24:47] *** Joins: josh (josh@F6368174.6206BE40.7FC6A66E.IP)
[17:26:01] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:26:35] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:27:18] *** Quits: hugod (user@3C2C754E.1742D5AE.CD432688.IP) (Ping timeout)
[17:27:36] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[17:28:04] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[17:28:05] *** ChanServ sets mode: +o pcwalton
[17:28:05] *** Joins: nano (nano@moz-972880B.superkabel.de)
[17:28:46] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[17:29:16] *** Quits: kornholi (kornholi@moz-185F17B0.net) (Ping timeout)
[17:30:54] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[17:31:12] <kemurphy> hm, strange, #[path = "foo/mod.rs"] creates two identical entries in the attrs list
[17:31:17] <kemurphy> is this intended?
[17:32:58] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[17:35:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[17:35:56] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:36:35] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:37:59] * flu_ slowly discovers several of you on stack overflow
[17:38:29] <cmr> are people asking rust questions on so?
[17:38:33] <flu_> mhm
[17:38:37] <cmr> well how about that
[17:38:39] <flu_> I'm grinding rep :-)
[17:39:03] <flu_> cmr: http://stackoverflow.com/questions/tagged/rust
[17:39:56] *** Quits: snearch (snearch@moz-3EE28154.pool.mediaways.net) (Quit: Verlassend)
[17:39:58] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:44:17] <graydon> https://github.com/mozilla/rust/issues/7104 if anyone wants a fun one
[17:44:18] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[17:44:53] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:45:00] *** Quits: eschweic1 (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[17:45:01] <flu_> RFC 4122 ftw
[17:45:13] <flu_> I use UUIDs is so many places, for so many things
[17:45:49] *** Quits: cr (anonymous@moz-9990782C.dip0.t-ipconnect.de) (Quit: cr)
[17:45:56] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[17:46:11] <flu_> whosoever takes it up, please keep an eye on performance. I've had projects before where the UUID generation was a legit bottleneck as the random() part was blocking :-/
[17:47:23] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[17:48:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[17:48:22] *** Joins: sdh_ (sdh@EA2778F.6D08A810.D92E1CF7.IP)
[17:48:24] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:48:25] *** Joins: Blei (Philipp@moz-96D25F7A.cust.bluewin.ch)
[17:48:29] <flu_> graydon: I've not seen the iota construct before. What practical applications does it have?
[17:48:43] *** Quits: victorporof (victorporo@97CBAC80.9F23B8E6.79933D60.IP) (Quit: victorporof)
[17:49:04] <SiegeLord> That damn APL language... introducing "iota" into use :P
[17:49:19] <SiegeLord> Worse than "static" as far as I'm concerned
[17:49:33] *** Joins: hugod (user@BFEB3FC7.1742D5AE.CD432688.IP)
[17:50:27] <steven_is_false> So, I fixed most of the unused import errors, and after make check finishes I'm going to submit a pull request.
[17:50:40] <bstrie> would uuid! generate a different id every time you compile? I don't see how that would be very useful
[17:51:14] <flu_> bstrie: tagged entity creation
[17:51:31] <bstrie> flu_: I have no idea what that means
[17:51:37] <cmr> flu_: at compile time?
[17:51:44] <flu_> ha~!
[17:51:55] <flu_> yeah, not quite as useful as a compile time constant
[17:52:15] <cmr> it's not even constant though, it'd be random.
[17:52:28] <flu_> bstrie: as in creating a message struct that you want to identify later, or some other uniquely identifiable data nugget
[17:52:28] <cmr> I'm all for a uuid!(d3ecaf25-dd16-438c-84c6-cf246a3b32aa), though
[17:53:07] <bstrie> how is that different from a string containing the uiid :P
[17:53:14] <flu_> cmr: random but varying by compiles - I was just thinking of it as any other function call, not something that turned into a constant during compilation
[17:53:27] <cmr> bstrie: Wouldn't need a uuid::from_str(...), it's just generate the structure
[17:54:04] <flu_> do we have a std or extra 'fn uuid() -> UUID' at all currently?
[17:54:15] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:54:41] <cmr> nope
[17:54:56] <flu_> well, that would definitely be useful :-)
[17:55:23] <flu_> the macro to read it from a literal would be some good sugar I suppose
[17:55:55] <flu_> and give you compile time validation, versus a to_str that might fail! if the format was wrong
[17:55:59] <cmr> I'd think type uuid = [u8, ..16]
[17:56:22] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[17:56:38] *** Parts: eschweic (Adium@2557E599.66715431.D25A875A.IP) ()
[17:56:48] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[17:56:49] *** Joins: kornholi (kornholi@moz-185F17B0.net)
[17:57:43] <flu_> the java algorithm for a randomUUID (type 4) is super simple. 16 random bytes, two binary ANDs, two bindary ORs
[17:59:29] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Ping timeout)
[17:59:45] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[18:00:15] <Blei> i'm not sure you'd even call that an algorithm
[18:00:24] <flu_> heheh
[18:00:26] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: zzzzzzzzzz)
[18:00:27] <Blei> it's just random bytes in a certain format
[18:00:31] <flu_> yep
[18:01:15] <Blei> steven_is_false: you wrote the dynamic library loading, right?
[18:01:23] <flu_> and using u32 types, it could be done in a single operation
[18:01:32] <flu_> (the format masking)
[18:01:53] <steven_is_false> Blei: correct
[18:02:36] <steven_is_false> Blei: Is there anything you want to know in particular?
[18:02:40] <Blei> i finally got rust to compile on windows yesterday, so if you want me to test something, now could be a good time :)
[18:03:17] <Blei> oh, i just see it doesn't link when removing the #[cfg..]s
[18:03:31] <steven_is_false> Blei: Oh thanks, cmr was working on making the Windows implementation of it, and ran into the same error on the test bot. 
[18:03:32] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[18:03:51] <Blei> ah, ok. i'll see if i find a fix
[18:04:04] *** Joins: mschifer (Adium@E48845AB.3A9F9BD4.4C2245EF.IP)
[18:04:10] <steven_is_false> Blei: Thanks!
[18:05:09] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[18:06:14] <cmr> Does #[link_name] just plain not work on Windows? I remember someone else not being able to link to kernel32
[18:06:21] <bblum> is there any way to build a test program against a new version of libextra without recompiling libsyntax and librustc
[18:07:06] <cmr> bblum: might be able to just use the existing stage0 rustc?
[18:07:12] <bblum> like, i'm building a stage1 libextra, copying it by hand into x86_64-unknown-linux-gnu/stage1/lib/, but then running stage1 rustc doesn't work anymore
[18:07:24] <cmr> ah
[18:07:31] <steven_is_false> bblum: Does make check-stage1-extra NO_REBUILD=1 work?
[18:07:42] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[18:07:44] <erickt> steven_is_false: yep
[18:07:45] <bblum> steven_is_false: i'm not trying to make check; i'm trying to run a separate program
[18:07:56] <bblum> if it were a #[test] inside of libextra it would be easy
[18:07:56] <erickt> steven_is_false: oh, nevermind
[18:08:08] <bblum> but i'm doing performance profiling
[18:08:45] <steven_is_false> bblum: You could use #[bench]?
[18:09:04] <bblum> what does that do?
[18:09:19] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[18:09:36] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:09:53] <steven_is_false> bblum: Once one compiles a test one can pass --bench in, and get a benchmark of the #[bench] tests
[18:10:04] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[18:10:04] *** ChanServ sets mode: +o pcwalton
[18:10:04] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:10:04] *** ChanServ sets mode: +o brson
[18:10:46] <bblum> steven_is_false: so i put this next to my in-crate test cases and write "#[test] #[bench]" above it?
[18:10:49] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[18:11:12] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[18:11:19] <steven_is_false> bblum: You just need to write #[bench]. I'm not sure what the style for writing benchmarks in the rust compiler is though.
[18:11:24] <bblum> hm
[18:12:01] <steven_is_false> Maybe grep through the compiler sources for #[bench], and see what the style is?
[18:15:39] <kemurphy> i seem to remember there being a post on /r/rust a while back about calling rust from python, and now i can't find it
[18:15:47] <kemurphy> am i imagining things or did that exist
[18:16:18] <steven_is_false> kemurphy: There was one on Ruby
[18:16:32] <kemurphy> steven_is_false: ah, that might be what i'm thinking of
[18:17:57] <steven_is_false> cool
[18:18:48] *** Joins: eschweic1 (Adium@2557E599.66715431.D25A875A.IP)
[18:18:48] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[18:19:22] *** Joins: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de)
[18:20:47] <jed> rusti: let a: f64 = -100 as f64; a.signum()
[18:20:48] -rusti- -1
[18:21:10] <jed> interesting. on my machine float::signum returns 1 always.
[18:21:39] *** Joins: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP)
[18:23:38] <jed> honestly this is a little distressing.
[18:23:59] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[18:24:02] <Blei> ah, found the problem
[18:24:02] <cmr> jed: OS and architecture?
[18:24:23] <jed> OSX mountain lion, x86 64
[18:24:58] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[18:25:55] <cmr> jed: https://gist.github.com/cmr/0749960a86b5c2ceb0e4 can you paste the result of rustc --emit-llvm -S ?
[18:27:04] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Ping timeout)
[18:27:14] <jed> the contents of signum.ll?
[18:27:18] <cmr> yes
[18:29:44] <jed> 1 sec needs pastebin
[18:29:53] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[18:30:00] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:30:36] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[18:30:41] <jed> it's too long :x
[18:31:10] <jed> 37000 lines long 
[18:32:45] <bstrie> jed: just paste them in here
[18:32:55] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[18:33:20] <bblum> toddaaro: https://github.com/mozilla/rust/issues/5074 https://github.com/mozilla/rust/issues/4903
[18:33:37] <bblum> not sure what this actually means but these are the pertinent issues
[18:33:54] *** Joins: mib_9b345m (Mibbit@moz-40B98EB.dsl.teksavvy.com)
[18:34:15] *** Quits: mib_9b345m (Mibbit@moz-40B98EB.dsl.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[18:34:47] <jed> i tried to paste it in here, server bot disconnected me for spam >.>
[18:35:32] <engla> noam: did you write about list comprehensions on the mailing list? You can use macros to reduce repetition and use the iterator "pipelines"
[18:35:59] *** Joins: cpeterson (cpeterson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:36:03] <brson> ecr: https://gist.github.com/brson/5710215
[18:36:43] <cmr> jed: put it on gist?
[18:37:35] <sully> brson: ping
[18:37:42] <toddaaro> ping nmatsakis 
[18:37:54] <toddaaro> nmatsakis: ping
[18:37:59] <toddaaro> whichever is supposed to work
[18:38:11] <nmatsakis> toddaaro: pong.
[18:38:14] <brson> sully: pong
[18:38:26] <toddaaro> nmatsakis: I have a big borrow checker question for you
[18:38:39] <nmatsakis> toddaaro: ok.
[18:38:40] <toddaaro> nmatsakis: so we should dicuss it somehow/somewhere
[18:38:46] <mib_8u895e> quick question -- are ports and channels fairly stable (in terms of being under development/deprecated/etc)? it seems like they are but the tasks and communications tutorial seems to suggest they might be taken away...
[18:39:05] <toddaaro> the core issue is the case where you have a struct, and you match on the struct's contents to decide what to do with the struct
[18:39:10] <sully> brson: I'm looking at https://github.com/mozilla/rust/issues/5157 - is this something that is still planned?
[18:39:28] <toddaaro> but inside the match where you are matching on the structs contents, you can't give it away
[18:39:35] <sully> and is this related to the rewriting the runtime stuff that you are doing now
[18:39:38] <mib_8u895e> http://static.rust-lang.org/doc/tutorial-tasks.html pipes vs comm?
[18:39:39] <jed> cmr: https://gist.github.com/jedestep/5776206
[18:39:47] <nmatsakis> toddaaro: right, do you have an example you're looking at?
[18:39:57] <toddaaro> yea, I have a messy bit of code I can gistify
[18:40:29] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[18:41:04] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[18:41:44] <toddaaro> nmatsakis: https://gist.github.com/toddaaro/5776229
[18:41:45] <brson> sully: I don't plan on making that split now, no, so I closed the issue.
[18:41:49] <sully> ok
[18:42:17] *** Parts: cpeterson (cpeterson@moz-BE33DA21.fw1.sfo1.mozilla.net) ()
[18:42:33] * sully triaging his 10 bugs for the week, which is probably going to involve a bunch of asking you about the bugs
[18:43:18] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:43:39] <sully> in https://github.com/mozilla/rust/issues/1509, what is meant by red zone in the context of rust?
[18:44:04] <cmr> sully: http://en.wikipedia.org/wiki/Red_zone_%28computing%29
[18:45:06] <brson> it's not quite the same as the x86_64 ABI red zone
[18:45:11] <cmr> oh
[18:45:22] <bblum> git rebase, you are the best
[18:45:22] <sully> right, I mean, that is the context I am familiar with, but 20k is ludicrously large for that
[18:45:26] <sully> so
[18:46:50] <cmr> jed: so rust just call the libc's copysign function :\
[18:46:59] <brson> it's an area at the end of the stack segment for running various things that we haven't figured out how to not run in the red zone. the bug explains all the uses of the red zone
[18:47:32] <brson> there's always going to be *some* amount of code that cannot be executed inside the bounds of the stack segment
[18:47:41] <jed> cmr: .................
[18:47:45] <brson> it the minimum, the code for retrieving the next stack segment
[18:47:53] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[18:48:09] <MaikKlein> is the current incoming working?
[18:48:17] <sully> ok, so, it is an extra 20k of space attached to every stack segment
[18:48:22] <brson> yes
[18:48:22] <steven_is_false> I'm confused is the red zone at the top, or bottom of the stack?
[18:48:26] <brson> except on linux
[18:48:31] <jed> cmr: I feel like signum could be implemented in terms of is_positive()
[18:48:31] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[18:48:37] <brson> on linux it's 2k
[18:48:50] <jed> which doesn't seem to have this issue
[18:48:56] <jed> at least fo rme
[18:50:16] <brson> steven_is_false: the stack grows downwards and the red zone is at the low end of the stack
[18:51:06] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[18:51:56] <jed> cmr: this problem seems to be local to rusti
[18:52:23] <cmr> jed: Does the program I pasted not exhibit the problem?
[18:53:00] <jed> cmr: no, it prints -1
[18:53:05] <flu_> lol
[18:53:07] <steven_is_false> brson: Thanks.
[18:54:59] *** Quits: josh (josh@F6368174.6206BE40.7FC6A66E.IP) (Quit: josh)
[18:55:54] *** Quits: mschifer (Adium@E48845AB.3A9F9BD4.4C2245EF.IP) (Quit: Leaving.)
[18:56:52] <jed> however, rustc -Z jit signum.rs will incorrectly print 1
[18:57:20] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[18:57:26] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[18:58:01] <cmr> jed: well, that's comforting at least :)
[18:58:03] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[18:58:14] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[18:58:19] <cmr> I can't reproduce it here, though
[18:58:21] <jed> makes me feel better in knowing that my actual programs can rely on correct values :)
[18:58:55] *** Joins: gareth0 (gareth0@moz-F169ED29.dynamic.dsl.as9105.com)
[18:59:10] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[18:59:12] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:59:47] <jed> it may be specific to this architecture or my gcc installation (since signum is calling copysign)
[19:00:00] <cmr> or the jit could be incorrect
[19:00:19] <jed> that seems pretty likely as well
[19:01:34] *** Joins: moonchrome (moonchrome@moz-8A9F3A10.dsl.iskon.hr)
[19:03:59] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[19:04:00] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[19:04:10] <sully> ok, so, what are the meanings of the different milestones?
[19:04:31] <cmr> sully: beyond https://github.com/mozilla/rust/issues/milestones ?
[19:04:44] <sully> oh, no, I should read that
[19:07:09] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[19:07:33] <Eridius> well crap. I can't build current incoming
[19:07:43] <MaikKlein> Eridius, me neither
[19:07:45] <Eridius> tons and tons of undefined LLVM symbols
[19:07:49] <brson> what is the replacement for str::raw::buf_as_slice?
[19:08:00] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[19:08:31] <MaikKlein> maybe they have updated llvm
[19:08:51] <Eridius> brson: what exactly did that do? I see from_bytes_with_null that returns an &'a str, but it requires null termination
[19:09:10] <brson> Eridius: it converted a null-terminated *u8 into an &str
[19:09:13] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[19:09:13] <Eridius> oh *u8
[19:10:11] <Eridius> brson: according to the commit message the replacement is c_str_to_static_slice
[19:10:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:10:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14553c61d to 14a198aad: 02http://git.io/N3iJvQ
[19:10:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:10:20] <Eridius> but that returns a &'static str
[19:11:16] <brson> Eridius: thanks. I'll transmute the region
[19:11:41] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[19:12:00] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[19:14:28] <bblum> brson: r? https://github.com/mozilla/rust/pull/7107
[19:14:56] <bblum> this is a pull request that probably needs actually looking at the code instead of taking my word for it that it's flawless
[19:17:05] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[19:17:20] <brson> oh, heh
[19:17:40] <brson> i'll go back and give it a closer read
[19:17:56] <bblum> i'm not proud of the last few lines of the "Add a test case for ..." commit
[19:17:56] <Eridius> ok I submitted https://github.com/mozilla/rust/issues/7108 about the inability to build
[19:19:12] <flu_> brson: Do you happen to have described the process you mention in https://github.com/mozilla/rust/issues/2805 someplace on the interwebs? I'm fighting with some 'native dynamic linking' issues myself
[19:19:33] <flu_> if not, I'll blog it up when I work through that this weekend
[19:21:12] *** Joins: nano (nano@moz-972880B.superkabel.de)
[19:21:23] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[19:21:49] *** Joins: lolwat (nano@moz-972880B.superkabel.de)
[19:21:52] *** Quits: lolwat (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[19:22:00] <brson> Eridius: does it work without --enable-clang?
[19:22:05] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[19:22:09] <Eridius> brson: I have no idea. I don't have gcc on this system
[19:22:20] <Eridius> I have a thing called gcc but it's really clang in disguise
[19:23:07] * Eridius tries anyway
[19:23:31] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[19:23:58] *** Quits: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP) (Quit: carllerche)
[19:24:32] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:25:26] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[19:25:31] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[19:25:42] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[19:25:49] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[19:26:33] <brson> flu_: no, but servo statically links to most of its native libraries. a simple example is in rust-mozjs linking to a little library called jsglue.a https://github.com/mozilla-servo/rust-mozjs/blob/master/glue.rs#L50
[19:26:43] <bblum> btw, for the zero people who care about my adventure trying to get quick turnaround on running a benchmark test,
[19:26:59] <flu_> brson: thanks for the link
[19:27:05] <bblum> what i ended up doing was copying sync.rs and arc.rs from libstd to a custom crate of my own, where the main function was the benchmark test itself
[19:27:07] <Eridius> brson: yep, still breaks
[19:27:27] <bblum> and rebuilding that crate each time instead of rebuilding all of libextra. -_-
[19:27:51] <flu_> bblum: did you end up using #[benchmark] ?
[19:27:56] <bblum> flu_: nah
[19:27:57] <bstrie> #[bench]
[19:28:00] <bblum> i did end up using #[main] though
[19:28:11] <flu_> heh, yeah #[bench], sry :-)
[19:28:14] <bblum> because i didn't understand what "main should be defined at the crate level" meant
[19:29:13] <bstrie> is incoming still on fire?
[19:29:30] <strcat> bstrie: fire-ish
[19:29:31] <strcat> why?
[19:29:40] <bstrie> wanted to know if it was safe to review things
[19:29:54] <bstrie> or if they would just bounce
[19:29:56] <flu_> I was interested in what the meaning of #[bench] was exactly - does it run the code a set number of times? one time? etc
[19:30:00] <jed> do you think any fires will be extinguished by tomorrow?
[19:30:03] <strcat> bstrie: they'll land
[19:30:10] <bblum> wat, what is wrong with incoming?
[19:30:25] <strcat> bblum: 32-bit is broken
[19:30:34] <jed> oh just 32 bit
[19:30:38] <strcat> + there are random segfaults, stack canaries killed, etc.
[19:30:42] <strcat> intermittently
[19:30:48] <bblum> oh, the segfault
[19:30:50] <bblum> i ran into that
[19:30:54] <bblum> is someone working on that?
[19:31:00] <strcat> don't think so
[19:31:03] <bblum> :x
[19:31:04] <cmr> brson was looking at it last I knew
[19:31:11] <strcat> brson was working on the 32-bit issue
[19:31:20] <cmr> ah
[19:31:23] *** pcwalton changes topic to 'http://www.rust-lang.orgÂ | ICE to meet you | Tree is CLOSED due to chaos | logs at https://botbot.me/mozilla/rust/ and http://irclog.gr/#browse/irc.mozilla.org/rust'
[19:31:54] <strcat> http://buildbot.rust-lang.org/builders/auto-mac/builds/1703/steps/test/logs/stdio here's one
[19:31:57] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[19:32:02] <strcat> I know I didn't cause that by removing unused traits ;p
[19:32:25] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[19:33:23] <brson> strcat: wow, that's a strange error
[19:33:25] <bblum> i have a gdb stacktrace of the segfault from yesterday if anybody wants it
[19:33:48] <strcat> brson: happened twice with this, and once with your RELEASES.txt update
[19:33:51] <strcat> so it's just lurking there
[19:34:00] <strcat> I can't reproduce on linux, all I get are stack canary clobbers
[19:34:05] <brson> this must be fallout from the change to make llvm threadsafe
[19:34:07] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[19:34:34] <strcat> the stack canary thing is unpredictable/random though
[19:34:36] <bstrie> the consequences of making llvm threadsafe appear to be race conditions
[19:34:46] <strcat> happens on maybe 1/5 make checks I run, during a random test
[19:35:05] * strcat hopes someone else can reproduce that ;p
[19:35:15] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[19:36:29] <brson> so there is the ebml miscompilation, stack canaries, and the llvm lock. *is that all?Z*
[19:37:52] <bstrie> "I hate these github faux-timestamps that just say 'issue filed a year ago'" -> mouses over timestamp to reveal that issue was filed exactly one year ago, to within three hours
[19:38:10] <brson> strcat: what platform are on where you're seeing the canary killed?
[19:38:15] <strcat> x86_64 linux
[19:38:24] <kimundi> bstrie: Lol xD
[19:38:32] <strcat> happens during compile-fail/run-pass/pretty
[19:38:44] <strcat> but that could just be because it's spinning up a lot of processes
[19:39:18] <bstrie> does it only happen when running the test suite in parallel?
[19:39:43] <brson> I'm going to blindly revert the two LLVM commits related to threadsafety in hopes it fixes that lock error. any objections?
[19:39:54] <pcwalton> no objections here.
[19:40:26] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Input/output error)
[19:40:30] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[19:41:25] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[19:43:42] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[19:43:44] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[19:43:44] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:44:35] *** Quits: graydon (graydon@moz-9918B407.vc.shawcable.net) (Quit: Leaving.)
[19:45:14] <brson> we have no ability to turn off bors
[19:45:59] <cmr> go unplug graydon's computer :p
[19:46:09] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[19:46:22] <bstrie> doesn't bors immediately abort if you push to incoming manually?
[19:47:14] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Ping timeout)
[19:48:28] <brson> bstrie: yes
[19:50:06] <MaikKlein> whats the easiest way to debug a segfault?
[19:50:12] <MaikKlein> can valgrind detect this?
[19:50:50] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[19:50:51] *** Quits: fabiand (fabiand@moz-4BC6F387.adsl.alicedsl.de) (Quit: Verlassend)
[19:50:57] <jed> I wouldn't call it 'easy' but gdb is the canonical way
[19:53:43] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[19:54:08] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[19:54:30] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:55:46] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[19:55:46] *** ChanServ sets mode: +o brson
[19:56:36] *** Joins: unbracketed (textual@moz-6EB214F2.lsanca.dsl-w.verizon.net)
[19:58:54] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:59:58] <nmatsakis> pauls: ping
[20:00:05] <nmatsakis> pcwalton: ping
[20:00:14] <pcwalton> nmatsakis: pong
[20:00:23] <sully> hm, is "pub use" still a thing?
[20:00:29] <pauls> nmatsakis: pong, but can't talk much
[20:00:32] * sully trying to figure out https://github.com/mozilla/rust/issues/5693, and it doesn't compile
[20:00:34] <bblum> sully: yeah
[20:00:36] <sully> ok, yes
[20:00:51] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[20:00:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/9YJn2g
[20:00:51] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[20:01:02] <sully> oh, wait, I was running my system rustc
[20:01:10] <sully> sully@anansi:~/src/rust-things/bug-5693$ rustc -v
[20:01:10] <sully> rustc 0.3 (7f3bbd5 2012-07-18 11:01:45 -0700)
[20:01:10] <sully> host: x86_64-unknown-linux-gnu
[20:01:16] <sully> why is that even there.
[20:01:16] <Eridius> eek
[20:01:22] <nmatsakis> pcwalton: so I have this patch that makes type parameters with a copy bound (T:Copy) not implicitly copyable. Right now it seems to cause segfaults (!) but what I wanted to ask you about was, have you done anything in this direction? It seems like a necessary step towards remove copy bounds, and it also would address what I hope to be the last remaining issue with my let bindings patch...
[20:01:36] <pcwalton> nmatsakis: I haven't done that but I was planning to
[20:01:50] <nmatsakis> pauls: nm then, I'll ping you later.
[20:01:52] <pcwalton> i.e. if you can land that, then that would be amazing
[20:01:56] <pcwalton> segfaults are very spooky though
[20:02:03] <nmatsakis> pcwalton: ok well I hope to land it soon.
[20:02:06] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[20:02:34] <pauls> nmatsakis: I can read plenty, but don't wanna type much
[20:02:39] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:04:14] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:04:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/5hTAnw
[20:04:14] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:04:14] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[20:04:14] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/R6lcfA
[20:04:14] <ghrust> 13rust/06auto 143798146 15Daniel Micay: add IteratorUtil to the prelude
[20:04:14] <ghrust> 13rust/06auto 140b69dda 15Daniel Micay: rm ExtendedMutableIter...
[20:04:14] <ghrust> 13rust/06auto 14d168f91 15Daniel Micay: rm MutableIter...
[20:04:15] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[20:05:04] <nmatsakis> pcwalton: I...kind of suspect type_use
[20:05:12] <pcwalton> yeah, that'd make sense
[20:05:14] <nmatsakis> pcwalton: didn't you say you were ripping that out? :)
[20:05:16] <pcwalton> -Z no-monomorphic-collapse to debug
[20:05:20] <pcwalton> no, I don't want to rip it out
[20:05:26] <nmatsakis> oh, I'll try the switch
[20:05:28] <pcwalton> I'm ripping out reachable
[20:05:35] <nmatsakis> oh, reachable, right.
[20:05:53] <pcwalton> I don't want to rip it out to appease FUD about template explosion even though I don't think it's a problem in practice ;)
[20:05:55] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[20:06:07] <nmatsakis> yes yes.
[20:06:14] <nmatsakis> well, I could be wrong anyhow, -Z didn't seem to fix it
[20:06:24] <strcat> brson: 
[20:06:26] <strcat>     [compile-fail] /home/strcat/projects/rust/src/test/compile-fail/bad-const-type.rs
[20:06:27] <pcwalton> you may have to rebuild everything with it
[20:06:28] <strcat>     [compile-fail] /home/strcat/projects/rust/src/test/compile-fail/borrowck-addr-of-upvar.rs
[20:06:31] <strcat> 2 dead stack canaries ;p
[20:06:33] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[20:06:50] <strcat> it's random though, unrelated to those specific test
[20:06:52] <strcat> s
[20:06:58] * strcat could try bisecting...
[20:07:01] <sully> hm; I do not understand the module system.
[20:07:11] <nmatsakis> pcwalton: true, I'm looking at this test auto-encode.rs, that auto encodes a lot of random types. it gets an assertion failure with my patch, despite not using Copy anywhere. but if I remove some of the copies, the asertion failure goes away. it's a very random set. it really *feels* like type_use :)
[20:07:19] <strcat> I have 3 weeks of daily rust builds
[20:07:26] <strcat> don't even need to build anything!
[20:07:28] <brson> poor canaries
[20:07:33] <nmatsakis> pcwalton: it's like, if there is a map, a char, and an int, it fails, but remove any one and things work ok 
[20:07:34] <pcwalton> it could be that type_use is still kicking in
[20:07:40] <strcat> well, assuming I can reproduce this somehow...
[20:07:41] <pcwalton> I think there is a flag to debug all collapses
[20:07:57] <nmatsakis> I'll look at the llvm 
[20:08:00] *** Joins: reyre_ (reyre@86C3727C.33EE9F8A.1139E686.IP)
[20:08:17] *** Quits: moonchrome (moonchrome@moz-8A9F3A10.dsl.iskon.hr) (Ping timeout)
[20:08:26] <strcat> pcwalton: if we can figure out why -mergefunc breaks this, LLVM would help us a lot with it (but I guess type_use speeds up compiles)
[20:08:31] <strcat> breaks things*
[20:08:56] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:09:45] <brson> rusti tests are amazingly slow
[20:10:28] <nmatsakis> pcwalton: oh, of course, if I add in any printfs it works too :)
[20:10:36] <sully> do we have documentation about how modules and exporting are supposed to work?
[20:10:42] <pcwalton> weird
[20:11:06] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[20:11:49] <brson> please nobody r+ anything further
[20:11:51] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[20:11:55] *** Joins: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP)
[20:12:32] <Blei> how can you set the mangled name of an external function again?
[20:12:45] <Blei> of a self-defined external function, even
[20:13:01] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[20:13:19] *** Quits: eschweic1 (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[20:13:43] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[20:14:30] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[20:14:59] *** Joins: carllerche_ (carllerche@EC3FF861.AF2C676F.AED9BA81.IP)
[20:15:19] *** Quits: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP) (Ping timeout)
[20:15:19] *** carllerche_ is now known as carllerche
[20:15:20] <bstrie> Blei: you can tell it not to mangle at all with an attribute
[20:15:27] <bstrie> I think it's #[no_mangle]
[20:15:30] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[20:15:35] <Blei> bstrie: thanks!
[20:15:50] *** Quits: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de) (Ping timeout)
[20:16:21] <kimundi> sully: Any concrete questions about modules?
[20:16:35] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[20:17:00] <kimundi> specific questions, that is
[20:17:03] <sully> the tutorial actually managed to answer a bunch of my questions
[20:17:06] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[20:17:06] *** ChanServ sets mode: +qo graydon graydon
[20:17:54] <graydon> closed due to chaos?!
[20:17:56] <graydon> gosh
[20:18:06] <graydon> shall I turn off bors?
[20:18:14] <bblum> probably
[20:18:27] <bblum> don't want my big rwlock pull request to get rejected
[20:18:39] * sully trying to figure out what is going on with https://github.com/mozilla/rust/issues/5693
[20:19:06] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[20:19:15] <sully> oh, welp
[20:19:32] <Blei> windows, what is going on? GetProcAddress, why have you forsaken me?
[20:19:34] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[20:19:42] <strcat> graydon: well, I really want that iterator one to land ;p
[20:20:24] * strcat doesn't think bors will really make it worse
[20:20:34] <graydon> ok, bors is turned off
[20:20:38] <sully> could somebody who knows how the module stuff and compilation model works take a quick look at https://github.com/mozilla/rust/issues/5693
[20:21:01] <sully> in particular, the bug filed results from confusion about how if you say "mod foo;" two different places in a crate
[20:21:03] *** graydon changes topic to 'http://www.rust-lang.orgÂ | Tree is CLOSED due to chaos / bors is disabled | logs at https://botbot.me/mozilla/rust/ and http://irclog.gr/#browse/irc.mozilla.org/rust'
[20:21:12] <sully> foo.rs will get compiled twice
[20:21:23] <sully> I just want to see if this is working as intended
[20:21:27] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[20:21:43] <strcat> sully: I think so
[20:21:47] <SiegeLord> Hah... chaos!
[20:21:56] <strcat> mod foo; is just like doing mod foo { } but it loads it from a file
[20:22:08] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[20:24:01] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[20:24:55] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:25:28] <sully> ok, so
[20:25:31] <sully> if there is a bug
[20:25:35] <sully> that is a feature request
[20:25:53] *** Joins: moonchrome (moonchrome@moz-13C86C1C.dsl.iskon.hr)
[20:26:01] <sully> and I am like "yeah, that is a credible feature request, but I just don't think it is that important, and wouldn't call it necessary to be 'Production ready'"
[20:26:05] <sully> do I just leave it with no milestone?
[20:26:20] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:26:48] *** Joins: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP)
[20:26:48] *** ChanServ sets mode: +o tjc
[20:27:25] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[20:27:35] *** Quits: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP) (Connection reset by peer)
[20:27:53] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[20:28:16] <graydon> sully: yes
[20:28:40] <graydon> sully: tag it properly, reduce, reproduce, check for dupes, etc.
[20:28:52] <graydon> (fix if you feel like it?)
[20:29:17] <sully> none of mine are really quick fix bugs
[20:29:30] <sully> one of them is a library feature request that I assigned to myself for later in the summer
[20:30:13] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[20:31:42] *** Joins: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP)
[20:31:42] *** ChanServ sets mode: +o tjc
[20:32:17] <bblum> oops
[20:32:20] <bblum> i can put a ~fn in an arc
[20:32:23] <bblum> big time oops
[20:32:51] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Quit: Leaving)
[20:33:44] *** Quits: reyre_ (reyre@86C3727C.33EE9F8A.1139E686.IP) (Client exited)
[20:33:47] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[20:35:31] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[20:36:31] *** Joins: reyre_ (reyre@86C3727C.33EE9F8A.1139E686.IP)
[20:37:09] <strcat> bblum: and you can put @mut in ~fn ;p
[20:37:18] <strcat> it stays Const
[20:37:29] <bblum> grosssss
[20:37:44] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[20:37:44] <bblum> strcat: yeah, next up on my plate is properly checking kind bounds on closures
[20:38:54] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[20:39:20] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[20:39:59] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[20:40:00] <cmr> strcat: btw, for changing the `for` loop semantics, removing the closure would save me a lot of pain and simplify things a lot. lots of weird interactions that are non-obvious with the loop body being a closure, I run into it for most non-trivial loops. most heinous I think is "capture of possibly uninitialized variable".
[20:40:31] <jed> I've also run into a lot of confusing capture errors
[20:40:49] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[20:41:02] <bblum> strcat: ah, wait, i don't seem to be able to do that
[20:41:25] <cmr> it forces me to make things mut and initialize them with a random value where otherwise I wouldn't have to.
[20:41:25] <strcat> put ~fn in it? or keep it Const
[20:41:35] <bblum> capture @mut in it
[20:41:41] <strcat> hrm
[20:41:41] <bblum> nor can i assigned to a captured mutable variable
[20:41:54] * strcat looks for that bug report
[20:42:03] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Quit: Lost terminal)
[20:42:11] <bblum> well, that would just mean my project is to allow this in some cases
[20:42:33] <strcat> bblum: oh it's ~Trait that's unsound, not ~fn
[20:42:39] <bblum> ahhh
[20:42:56] <strcat> well at this with this problem :)
[20:43:23] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[20:43:45] <bblum> strcat: hmm... but if you have a ~Trait, you can't call it with &mut self if it's in an arc
[20:44:13] <strcat> bblum: well I'm thinking it might be a backdoor way to send @
[20:44:27] <bblum> sending @ might be doable
[20:44:35] <bblum> mutating the environment directly probably not
[20:44:38] <bblum> let's find out
[20:44:44] *** Quits: Blei (Philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: Blei)
[20:45:32] <strcat> cmr: well I'm very convinced that `for` should be for internal iterators and `do` can cover the internal iterators fine
[20:45:46] <cmr> strcat: you mean external?
[20:45:47] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[20:45:50] <strcat> err
[20:45:53] <strcat> yes
[20:45:57] <cmr> yes, I agree.
[20:45:57] <strcat> for should be for external* :p
[20:46:08] <bblum> i agree with that pretty much
[20:46:13] <strcat> there won't be any left in the stdlib anyway
[20:46:17] <strcat> (internal iterators)
[20:46:17] <bblum> it would be no tragedy if the for magic iterator protocol went away
[20:46:28] <cmr> Removing the internal iterator magic protocol and replacing it with something explicit would be nice.
[20:46:43] <bblum> i already get silly looks from people when i try to explain it :P
[20:46:51] *** Quits: gareth0 (gareth0@moz-F169ED29.dynamic.dsl.as9105.com) (Ping timeout)
[20:46:54] <strcat> well it's mostly about making every single loop not have to be a closure + the other benefits of external iterators
[20:47:11] *** Quits: reyre_ (reyre@86C3727C.33EE9F8A.1139E686.IP) (Client exited)
[20:47:39] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[20:48:25] <strcat> strcat@thinktank i ~/projects/rust incoming % git grep 'for .*\.each' | wc -l
[20:48:27] <strcat> 931
[20:48:29] <strcat> strcat@thinktank i ~/projects/rust incoming % git grep 'for .*\.advance' | wc -l
[20:48:31] <strcat> 249
[20:48:33] <strcat> lots of work to do ;p
[20:48:50] <cmr> Is there a date (week granularity is fine) planned for the 0.7 release?
[20:49:03] <strcat> the milestone is 16 days from now I think
[20:49:10] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[20:49:11] <bblum> strcat: error: uniquely-owned trait objects must be sendable
[20:49:21] <strcat> bblum: ah, that's good :)
[20:49:27] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:49:29] <SiegeLord> rust doc is giving me grief... whats the environment variable to use to enable logging?
[20:49:29] <strcat> so it's only Const that is a problem
[20:49:43] <strcat> we should probably just require that the objects are Const
[20:49:58] <bblum> strcat: const isn't a problem because of &self vs &mut self
[20:50:02] <cmr> SiegeLord: RUST_LOG
[20:50:18] <SiegeLord> Like RUST_LOG=rustdoc=1 ?
[20:50:26] <bblum> besides, you can't get mutable inner data these days without & or @
[20:50:29] <cmr> probably want RUST_LOG=rustdoc=4
[20:50:33] <cmr> but yes
[20:51:13] *** Joins: carllerche_ (carllerche@EC3FF861.AF2C676F.AED9BA81.IP)
[20:51:15] <SiegeLord> It crashed XD
[20:51:20] <strcat> bblum: Cell is still around
[20:51:28] *** Quits: sankha93 (Instantbir@42B82B5.B1950BBF.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[20:51:28] *** Quits: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP) (Ping timeout)
[20:51:28] *** carllerche_ is now known as carllerche
[20:51:46] <bblum> strcat: hmmm, good call
[20:52:20] <bblum> haha cell.take, gross
[20:52:26] <bblum>  44     pub fn take(&self) -> T {
[20:52:26] <bblum>  45         let this = unsafe { transmute_mut(self) };
[20:52:44] <nmatsakis> pcwalton: that failure turned out to be related to RUST_MIN_STACK somehow. Not sure yet of the details of this is just a 32-bit bug I am running into.
[20:52:50] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[20:52:58] <strcat> bblum: it was obviously unsound too when the field was public
[20:53:04] <strcat> it could still be unsound, I dunno
[20:53:21] *** Joins: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl)
[20:53:26] <bblum> well, it's clear that transmuting &self to &mut self gives you S-M-S
[20:53:48] <bblum> but with the interface it will be hard to exploit without relying on an unlikely race to happen
[20:53:53] <bblum> like, to exploit deterministically
[20:54:24] <strcat> bblum: arc requires Const and it's non-Const anyway
[20:54:24] *** Quits: FrozenCow_ (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[20:54:24] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[20:54:30] <strcat> from #[mutable]
[20:54:30] <bblum> i see
[20:54:46] <bblum> hmm
[20:54:53] <bblum> with_mut_ref looks super fishy
[20:55:04] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:55:11] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[20:55:22] <SiegeLord> Oh wait... rustdoc proper seems to be ok, rust doc fails though.
[20:55:25] <bblum> alright, ok, i think it's fine
[20:55:34] <bblum> i'll focus on my actual job :P
[20:56:08] <strcat> one day maybe I'll understand why I'm getting read errors on pipes in my sandbox
[20:56:31] <strcat> maybe I should be copying to the child's stdin instead of letting it inherit stdin
[20:57:38] <kimundi> SiegeLord: The rust tool is very primitivly written, the problem might be as simple as arguments or env variables not propagating to the rustdoc-process-spawn
[20:58:48] <SiegeLord> kimundi, I don't think it's that simple, I'm not getting the "no arguments passed" error from rust doc
[20:59:02] <SiegeLord> And the log tells me rustdoc's code is run...
[20:59:20] <SiegeLord> Anyway, not too important for now... especially if it's known that "rust" is problematic
[20:59:39] *** Quits: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[20:59:40] <kimundi> hm. return value not preserved?
[20:59:46] <jed> SiegeLord: looking at the source, rust doc directly calls rustdoc so it probably is something like what kimundi suggested
[21:01:01] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:01:10] <graydon> brson: any idea what the tree closure is about?
[21:01:28] <graydon> (and: is now a good time for me to eliminate the master/incoming split and redirect bors to master?)
[21:01:37] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[21:01:39] <bblum> graydon: he's out to lunch but
[21:01:51] <bblum> now would be a decent time; i would have to redo my open pull request but whatever
[21:02:18] <strcat> bblum: I don't think so, bors can still merge to an arbitrary branch even if it wasn't the open you opened it on
[21:02:28] <bblum> oh ok, well, even better
[21:02:36] <Eridius> kill master with fire!
[21:02:50] <bblum> graydon: the tree closure is because something is causing a stack canary smash; as far as causes, i don't know, but brson seemed to hint that it was fallout from some LLVM threadsafety patch
[21:02:54] <bblum> which he indicated he was going to back out
[21:03:05] <graydon> ok
[21:03:17] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[21:03:18] <strcat> wasn't the one* (sigh)
[21:03:36] <Eridius> graydon: incoming also doesn't build anymore for some of us :/
[21:03:43] <graydon> I know
[21:03:44] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:03:55] <graydon> it hasn't for a while
[21:04:00] <Eridius> define "a while"
[21:04:01] <strcat> I don't think it should be relevant to getting rid of master
[21:04:05] <Eridius> because I've been rebuilding at least once a day lately
[21:04:06] <graydon> 32bit specific or something newer?
[21:04:19] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[21:04:31] <Eridius> ?
[21:04:36] <strcat> if people are using master and it's broken, they'll report a bug or maybe even fix it
[21:04:37] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[21:04:45] <strcat> hiding stuff away in incoming doesn't help ;p
[21:04:52] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[21:05:30] <graydon> master's broken presently anyway :(
[21:05:32] <graydon> damn
[21:05:42] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[21:05:57] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[21:06:08] <strcat> graydon: cross-compiling is broken on master
[21:06:13] <strcat> from the jemalloc issue we fixed
[21:08:50] *** Joins: reyre_ (reyre@8201C64E.6A6F5F66.47C41102.IP)
[21:08:57] <strcat>        The dup2() function is not marked obsolescent because it presents a type-safe version of functionality provided  in  a  type-
[21:08:59] <strcat>        unsafe version by fcntl(). It is used in the POSIX Ada binding.
[21:09:00] <strcat> heh
[21:09:05] <strcat> what a weird justification
[21:09:09] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:09:12] *** Quits: hoelzro (hoelzro@moz-937642A5.ro) (Ping timeout)
[21:09:21] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[21:09:21] *** Quits: cade (cadecairos@moz-DB3BF95F.members.linode.com) (Ping timeout)
[21:09:21] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[21:09:28] *** Joins: hoelzro (hoelzro@moz-937642A5.ro)
[21:09:29] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[21:09:35] *** Quits: jroll (jroll@moz-5989BB9E.members.linode.com) (Ping timeout)
[21:09:40] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[21:09:41] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[21:09:41] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[21:09:45] *** Joins: cadecairos (cadecairos@moz-DB3BF95F.members.linode.com)
[21:09:59] *** Joins: reed (reed@tech.monkey)
[21:10:05] *** Joins: jroll (jroll@moz-5989BB9E.members.linode.com)
[21:10:11] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[21:10:26] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:10:40] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[21:11:11] *** Quits: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP) (Ping timeout)
[21:11:21] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:11:47] <bstrie> graydon: nuking master would make all this bustage worthwhile
[21:11:55] *** Quits: doomlord (doomlod@moz-E0079CC.range86-145.btcentralplus.com) (Ping timeout)
[21:11:56] <graydon> ok :)
[21:12:16] *** Joins: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP)
[21:12:16] *** ChanServ sets mode: +o tjc
[21:12:19] <bstrie> graydon: after all, this could be the last time *ever* that the tree is closed!
[21:12:21] <graydon> shall I also upgrade auto to do an all-targets cycle? it'll slow cycle time by 50% or more
[21:12:27] <graydon> bstrie: hah, I wish
[21:12:40] <graydon> I know brian wanted all-targets
[21:12:53] <graydon> with the trailing / best-effort master just doing valgrind in addition
[21:13:13] <cmr> graydon: I feel like there should be two types of r+... one for "This might break things; test everything" and "This probably doesn't break anything; just build and test"
[21:13:21] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[21:13:23] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[21:13:31] <cmr> the second category being what bors does already
[21:13:34] <flu_> cmr: +1 to that. 
[21:13:44] <strcat> would be neat if you could say 'r+ valgrind=1' for something touching unsafe/codegen
[21:13:51] <graydon> cmr: maybe. I'd prefer to get cycle time down. lemme see .. another option is to split (say) linux64 and linux32 and have them run separately
[21:14:05] <graydon> (i.e. in parallel)
[21:14:16] <graydon> rather than doing the all-targets build
[21:14:22] <graydon> maybe I can get that working. might be worth trying.
[21:14:26] <strcat> graydon: that sounds good
[21:14:27] <tjc> strcat: that would be great to submit to the bors issue tracker -- do you have access?
[21:14:32] <strcat> tjc: yes
[21:14:35] <cmr> graydon: Right, I'd like to get cycle time down a lot too, but some changes need more extensive testing before being viable for merge (imo, you guys might disagree)
[21:14:40] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[21:14:41] <ghrust> 01[13rust01] 15brson pushed 2 new commits to 06incoming: 02http://git.io/SCrw1g
[21:14:41] <ghrust> 13rust/06incoming 1419adece 15Brian Anderson: Revert "Have JIT execution take ownership of the LLVMContextRef"...
[21:14:41] <ghrust> 13rust/06incoming 14541c657 15Brian Anderson: Revert "Remove all usage of the global LLVMContextRef"...
[21:14:41] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[21:15:13] <brson> acrichto: ^ I've reverted the LLVM threadsafety changes because we're seeing occasional locking errors in llvm
[21:15:27] <brson> two more catastrophies left to solve
[21:15:40] <brson> *catastrophes
[21:16:06] <acrichto> brson: locking errors? none of the locking should even be enabled
[21:16:23] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[21:16:48] <brson> strcat: do you have a link to one of the logs with the lock failure?
[21:17:12] <graydon> brson: I'm taking this opportunity to delete incoming in favour of master. that work for you?
[21:17:14] <strcat> http://buildbot.rust-lang.org/builders/auto-mac/builds/1703/steps/test/logs/stdio
[21:17:16] <brson> graydon: sure
[21:17:24] <strcat> Assertion failed: (((recursive && acquired) || (acquired == 1)) && "Lock not acquired before release!"), function release, file /Users/rustbuild/src/rust-buildbot/slave/auto-mac/build/src/llvm/include/llvm/Support/Mutex.h, line 117.
[21:17:26] <strcat> Stack dump:
[21:17:28] <strcat> 0. Running pass 'Function Pass Manager' on module 'test_pkg_version.rc'.
[21:17:30] <strcat> time: 0.001 s LLVM passes
[21:17:32] <strcat> /bin/sh: line 1: 46637 Illegal instruction: 4  x86_64-apple-darwin/stage2/test/rustpkgtest-x86_64-apple-darwin --logfile tmp/check-stage2-T-x86_64-apple-darwin-H-x86_64-apple-darwin-rustpkg.log
[21:17:34] <strcat> make: *** [tmp/check-stage2-T-x86_64-apple-darwin-H-x86_64-apple-darwin-rustpkg.ok] Error 132
[21:17:37] <acrichto> argh a stack trace would be nice there
[21:17:42] <graydon> brson: ok. so I'll move master to the push you just made to incoming, and retire incoming. 
[21:17:50] <graydon> from then on in, push to master :)
[21:17:54] <brson> ok
[21:18:15] <bblum> graydon: what do i do with my open PR to incoming?
[21:18:21] <graydon> redirect it
[21:18:22] <brson> strcat: any more leads on the canary problem?
[21:18:30] *** Quits: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP) (Ping timeout)
[21:18:31] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:18:32] <ghrust> 01[13rust01] 15graydon 04deleted 06incoming at 14541c657: 02http://git.io/pj47CA
[21:18:32] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:18:34] <strcat> brson: not yet, it refuses to happen again :(
[21:18:49] <bblum> < ghrust> [rust] graydon deleted incoming at 541c657: http://git.io/pj47CA
[21:18:50] <bblum> truly an historic occasion
[21:18:51] *** Joins: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP)
[21:18:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:18:52] <ghrust> 01[13rust01] 15graydon merged 06incoming into 06master: 02http://git.io/AzcRFg
[21:18:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:19:12] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[21:19:27] * strcat gets to rename his daily build package :)
[21:19:29] <tjc> heh
[21:19:41] <brson> acrichto: also, I'm just assuming reverting those commits will fix. have no actual evidence
[21:19:41] <tjc> someone should update CONTRIBUTING.md
[21:19:41] <sully> hm, I am not sure I am qualified to really figure out what is going on with https://github.com/mozilla/rust/issues/3248
[21:19:57] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[21:20:05] <acrichto> brson: ok, I'll look into it regardless
[21:20:20] <tjc> oic, a bunch of bugs just got closed because of incoming -> master. nice :-)
[21:20:35] <tjc> which means 20 new emails at once
[21:20:35] <tjc> or rather, 38
[21:20:41] <bblum> hmm
[21:20:56] <bblum> looks like brson's comment on my commit stayed when i recreated the pr
[21:20:59] <strcat> finally, no more closing bugs after I write Close #353325
[21:21:04] <Eridius> huh, deleting incoming rather than deleting master? bold move
[21:21:12] <acrichto> oh wow there's only 2 pull requests now
[21:21:31] <strcat> heh my cron job is going to totally break
[21:21:34] <tjc> sully: I'm not sure what the bug is there -- we know macros aren't hygienic
[21:21:34] <sully> ok, so, everybody should start working off of master now?
[21:21:36] <tjc> or rather
[21:21:36] <tjc> I'm not sure what the *surprising* bug is :-)
[21:21:38] <SiegeLord> Too bad issues are not branch specific 8)
[21:21:47] <sully> tjc: yeah, I think I am going to find the hygiene bug and close it as a dupe
[21:22:00] <tjc> good plan
[21:22:08] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[21:22:16] <brson> hm, I need those pull requests to remind me what I was supposed to be working on ...
[21:22:27] <Eridius> huh, did deleting incoming just close all those pull requests because they no longer have a branch to be based on?
[21:22:36] <sully> wait, is there a hygiene bug...
[21:22:49] <kimundi> Farewell, incoming. Join core in that special place in our heart that will never forget you! :)
[21:22:57] *** Joins: dherman (dherman@moz-47111369.rev.sfr.net)
[21:22:57] *** ChanServ sets mode: +o dherman
[21:23:08] <bblum> Eridius: yes
[21:23:18] <bblum> straight-up closed with no opportunity to reopen
[21:23:18] <tjc> Yes, Virginia, there is an incoming
[21:23:28] <kimundi> (Of course, wether we will _miss_ you is another question :P)
[21:23:32] <Eridius> bblum: haha um oops?
[21:23:38] <bblum> at least, i think?
[21:23:51] <bblum> i couldn't find a way to redirect my PR without just reopening it
[21:23:55] <bblum> er, resubmitting it
[21:24:45] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Quit: victorporof)
[21:25:34] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:25:34] <strcat> uh oh
[21:25:39] *** Joins: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP)
[21:25:45] * strcat wonders what bors is going to think about the leftover comments ;p
[21:25:51] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[21:26:19] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[21:26:41] <orshem> I'm having some trouble grasping reference pointers &. can anyone have a look and tell me if want I want is at all possible?
[21:26:55] <orshem> https://gist.github.com/anonymous/5777420
[21:27:33] <kimundi> strcat: I think bors little brain just had a major meltdown due to incoming ceasing to exist. I doubt it has time to think about comments ;)
[21:27:59] <brson> I like not having 30+ pull requestse. we should delete incoming more often
[21:28:08] <cmr> ...lol
[21:28:23] <bblum> nice strategy
[21:28:31] <Eridius> orshem: .get() copies the value
[21:29:10] <kimundi> Eridius: Sure? I tihnk it was changet recently
[21:29:19] <Eridius> kimundi: oh? nevermind then. I'm using the stupid website docs
[21:29:27] <kimundi> Or at least there was talk about it
[21:29:28] <Eridius> I didn't realize option was being changed
[21:29:30] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[21:29:44] <orshem> I'm running incoming from the beginning of this week
[21:30:08] <pcwalton> orshem: I think you are hitting the invariant type parameters issue
[21:30:16] <bblum> orshem: try option.get_ref()
[21:30:28] <pcwalton> the problem arises because you are using Option<T>
[21:30:33] <Eridius> looks like .get() did not change
[21:30:34] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:30:43] <graydon> oh. did we just lose all the PRs?
[21:30:46] <graydon> I bet we did
[21:30:46] <Eridius> graydon: yes
[21:30:49] <graydon> :(
[21:31:00] <Eridius> merge 'em by hand!
[21:31:08] <bblum> we had to lose them someday
[21:31:21] <bblum> or, like, atomically flush the pipeline
[21:31:34] <graydon> gosh
[21:31:52] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[21:32:07] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:32:38] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[21:32:43] *** Quits: naq (skall@D5C2D2DF.E4265FCD.E481B5B.IP) (Quit: reload)
[21:32:46] <pnkfelix> wasn't that hard to open a fresh PR that refers back to the previous one
[21:32:55] <bblum> graydon: i don't see a way to redirect open pull requests to different branches anyway
[21:33:03] <bblum> yeah, and making a new one takes like ten seconds
[21:33:20] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Quit: Leaving)
[21:33:46] <pnkfelix> brson: can you check whether I'm on the wrong track in PR #7114
[21:33:59] <brson> pnkfelix: ok
[21:34:52] <orshem> bblum: thanks. down to one error now: https://gist.github.com/anonymous/5777551. 
[21:35:06] <orshem> how can i tell the compiler that they're all the same lifetime?
[21:35:14] <bblum> orshem: that is not a lifetime error
[21:35:17] <bblum> look closer :P
[21:35:28] <pnkfelix> brson: (My main question is: Are the "interesting" white space characters supposed to be treated as whitespace?  (Which is the problem I was attempting to "solve")  Or was the worry here that one byte in a multi-byte charater would be *misidentified* as whitespace?  (Which I believe I also solved, but could arguably be solved by much easier means, if it was even a problem at all, which I don't think it is for the usage pattern in question, at l
[21:35:56] <orshem> bblum: oh I see. thanks
[21:36:03] <pnkfelix> brson: oh shoot, I'm going to have to rebase this anyway.
[21:36:21] <bblum> orshem: in particular, you already did tell it that they're all the same lifetime by using the same lifetime variable in your function signature
[21:36:29] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:37:07] <HollyRain> who is bors?
[21:37:21] <cmr> HollyRain: Integration test runner and robotic overlord
[21:37:28] <cmr> https://github.com/bors
[21:37:28] <bblum> bors is the man or woman of mystery
[21:37:34] <HollyRain> because into a git comment (https://github.com/mozilla/rust/commit/6c45160f19cff60e8956491eabe9e4704735c0eb) says that is uing Wine for testing. My advise is that use VirtualBox to install Windows there
[21:37:42] <bblum> haha i love the userpic
[21:37:45] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:38:03] <graydon> bors is the #1 committer on this release cycle
[21:38:16] <cmr> HollyRain: steven wanted to use wine for testing so he *wouldn't* have to use windows, or a vm
[21:38:16] <tjc> bors is so productive
[21:38:20] <tjc> bors deserves a raise
[21:38:35] <orshem> bblum: i think i understand. is there such a thing as 'impl ~Node' (instead of 'impl Node')?
[21:38:40] <graydon> maybe I will buy him one of those new mac pros that look like wine coolers
[21:38:45] <kimundi> But bors only comments on code, he never writes code himself :P
[21:38:55] <graydon> comfy new digs to run around in
[21:38:59] <HollyRain> cmr, but wine is an emulator, it's safer to test it directly in Windows
[21:39:17] <graydon> we have, at times, had wine and mingw-cross builds working
[21:39:20] <graydon> it does work pretty well
[21:39:25] <bblum> orshem: that's probably not what you want to do, although you could do i
[21:39:26] <bblum> t
[21:39:27] <cmr> HollyRain: well wine is not an emulator, it's an api translator.
[21:39:27] <graydon> and the benefit is that you can run it under valgrind
[21:39:44] <bblum> orshem: another thing you probably don't want to do, but could do, is take ~self
[21:40:28] <kimundi> Does something like a unsafe slice exist atm? *[u8]
[21:40:35] <orshem> bblum: that almost sounds like zen. what do i want to do but can't ? :)
[21:41:07] <bblum> orshem: well hopefully there's something you want to do and also can
[21:41:24] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[21:41:46] <kimundi> rusti: le s = &[1u8,2,3]; let f: *[u8] = s; s
[21:41:49] -rusti- <anon>:10:12: 10:13 error: expected `;` or `}` after expression but found `s`
[21:41:49] -rusti- <anon>:10          le s = &[1u8,2,3]; let f: *[u8] = s; s
[21:41:49] -rusti-                       ^
[21:41:49] -rusti- application terminated with error code 101
[21:41:56] <bblum> orshem: so, you have a &'r mut ~Node. can you turn that into a &'r mut Node?
[21:41:57] <orshem> all i'm trying is to build a tree made of ~ pointers and traverse it using & pointers without cycles
[21:41:58] <kimundi> rusti: let s = &[1u8,2,3]; let f: *[u8] = s; s
[21:42:00] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CNde
[21:42:27] <Eridius> huh, rust builds just fine on my laptop, which is running a nearly-identical OS and clang as my desktop, where rust has the linker errors
[21:42:48] <cmr> Eridius: did you do a clean build?
[21:42:51] <Eridius> cmr: yes
[21:42:53] <Eridius> many times
[21:42:58] <cmr> odd
[21:43:09] <strcat> oh and rusti is going to break
[21:43:13] <orshem> bblum: i can't use Node since it self reference. i think
[21:43:17] <strcat> oh nvm
[21:43:22] <strcat> replaces will take care of it
[21:43:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:43:44] <ghrust> 01[13rust01] 15graydon pushed 1 new commit to 06master: 02http://git.io/uMto_w
[21:43:44] <ghrust> 13rust/06master 14b417bc8 15Graydon Hoare: Update CONTRIBUTING.md
[21:43:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:44:25] <bblum> could ghrust maybe not join/part the channel each time?
[21:44:34] <strcat> bblum: just filter them ;p
[21:44:49] <bblum> hm
[21:45:02] <bblum> but what if i want to know if ghrust is in the channel so i can make conversation
[21:45:16] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[21:45:20] <strcat> heh
[21:45:38] <mib_8u895e> rusti : println("bye :(")
[21:46:05] <cmr> Github's irc hook can message without join, but that only works if the IRC server doesn't block those
[21:46:15] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:46:27] <bblum> orshem: tell me about this "&mut *self.next.get_ref();" expression; what is its type?
[21:46:52] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:47:52] <strcat> weechat: /filter add ghrust irc.mozilla.#rust nick_ghrust,irc_join,irc_part,irc_quit *
[21:48:58] <orshem> self should be ~Node, next should be Some(~Node) so it should be "&mut *(~Node) == &mut Node"
[21:49:02] <strcat> rusti: 222
[21:49:05] -rusti- 222
[21:49:06] <orshem> bblum: ^
[21:49:13] <orshem> thanks for looking
[21:49:46] <strcat> heh that actually doesn't work like I thought it would
[21:49:51] *** Joins: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP)
[21:49:53] <pcwalton> nmatsakis: idea for borrow check error message improvement: for conflicting borrows say something like "suggest letting VAR go out of scope before EXPR is evaluated"
[21:50:02] <orshem> i have experience with python and java so i'm going from no pointers to 3 and that's kind of confusing
[21:50:03] <bblum> orshem: look at the type signature of get_ref()
[21:50:21] <pcwalton> (why I want to remove one of the pointers) ;)
[21:50:45] <bblum> orshem: the thing it is returning is a &~Node
[21:51:03] *** Joins: Ralith (ralith@moz-3767A14F.wireless.sfu.ca)
[21:51:03] <brson> pnkfelix: I hadn't thought through the implications of those incorrect whitespace calculations, but both your concerns seem valid. I suppose I would be more worried about misidentifying non-whitespace as whitespace since I don't see exotic whitespaces being useful. Your test case is comprehensive, nice.
[21:51:06] <strcat> orshem: you'd be more confused going to 1 pointer where the type system treats them all the same
[21:51:07] <orshem> pcwalton: oh not on my account. I enjoy breaking my head against the keyboard
[21:51:12] <strcat> the number of them is kind of meaningless
[21:52:00] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[21:52:09] <strcat> & are references, ~ are heap allocations - don't need to be thought of by their implementation details
[21:52:31] *** Quits: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP) (Quit: lmandel)
[21:53:01] <orshem> bblum: thanks. you're faster than me. i barely started grepping.
[21:53:02] <Eridius> cmr: the +n channel mode blocks external sends. Removing that from the channel mode would let ghrust message without joining
[21:53:08] <Eridius> but would of course let other people message without joining too
[21:53:14] <bblum> orshem: i should know; i wrote get_ref long ago ;)
[21:53:20] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:53:26] <bblum> at least, i think i did
[21:53:38] <orshem> bblum: :)
[21:53:51] <pnkfelix> brson: okay.  Since I have to update the patch, I'll take that as a feedback+ for now.
[21:54:08] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[21:54:14] <pnkfelix> brson: I'll remove the r? from the description, and post a new r? after I rebase the patch (tomorrow).
[21:54:44] <bblum> hey people who know libsyntax, is expr_do_body() also used for for bodies?
[21:54:45] <sully> hm
[21:54:52] <sully> so, did we lose things when we deleted incoming
[21:54:53] <pcwalton> bblum: I think so but I forget
[21:54:58] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (Quit: Leaving.)
[21:55:03] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[21:55:04] <cmr> sully: all the open PRs were closed
[21:55:07] <bblum> and, more in general, where can closure values be in the ast apart from expr_do_body and expr_fn_block?
[21:55:10] <sully> I went to rebase something I had on incoming to the current master and it didn't go clean
[21:55:26] <bblum> why don't it ever go smooth
[21:55:27] <pcwalton> bblum: I *think* those two places
[21:55:37] <brson> on incoming i see compile-fail/borrowck-loan-rcvr segfault about 1 in 5 runs
[21:56:00] *** Joins: reyre__ (reyre@C94A6B06.98A48E9F.47C41102.IP)
[21:56:02] <brson> in new_stack_fast
[21:56:18] *** Quits: reyre_ (reyre@8201C64E.6A6F5F66.47C41102.IP) (Ping timeout)
[21:56:18] <strcat> brson: just that test?
[21:56:30] <strcat> sounds similar to my stack canary thing at least
[21:56:40] <brson> strcat: so far
[21:56:50] <bblum> pcwalton: what about expr_loop_body? that's just a regular block (for 'loop'), right?
[21:56:52] <strcat> happens to be on totally random tests :(
[21:56:55] <strcat> to me*
[21:56:58] <pcwalton> I think so
[21:57:07] <pcwalton> well, hmm
[21:57:09] <pcwalton> I'm not sure actually
[21:57:09] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:57:15] <bblum> hm, parse seems to emit it for 'for'
[21:57:20] <pcwalton> yeah
[21:57:21] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[21:57:25] <pcwalton> I think that's actually 'for'
[21:57:35] <bblum> gross
[21:58:08] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Quit: Leaving)
[21:58:15] * bblum grabs his toothbrush and dives into parse_sugary_call_expr()
[21:58:18] *** Quits: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP) (Quit: josh)
[21:58:26] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[21:59:50] *** Quits: reyre__ (reyre@C94A6B06.98A48E9F.47C41102.IP) (Ping timeout)
[21:59:52] <Eridius> well. this is curious. yesterday's rust checkout now doesn't build either
[21:59:55] <bblum> wish we had intermediate IRs
[22:00:57] <sully> yeah...
[22:01:18] <bblum> oh i see, "Inner expr is always an expr_fn_block."
[22:01:25] <bblum> good, so i can just visit expr_fn_block after all
[22:01:34] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[22:04:59] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[22:06:07] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:06:21] <bblum> more than a little amused at the code: self.parse_lambda_expr_(|| self.parse_fn_block_decl(), || self.parse_expr())
[22:08:08] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[22:08:39] *** Joins: reyre_ (reyre@DEBED5B4.E646489.47C41102.IP)
[22:10:39] <brson> strcat: seeing lots of random failures in compile-fail
[22:10:51] <strcat> brson: segfaults?
[22:11:06] <bblum> brson: i feel like the diagnostics are what crash the stack
[22:11:11] <bblum> based on my stack trace from yesterday
[22:12:33] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[22:12:54] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[22:13:45] *** Quits: AutomatedTester|W3C (David@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[22:13:45] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[22:13:53] <bblum> oh, i see, so closures and fn-items both have a "fn_decl", but you can get the freevars for either, and for a fn item it will just be no freevars
[22:13:56] <bblum> is that right?
[22:14:20] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[22:16:19] <brson> strcat: yes segfaults
[22:17:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:17:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:17:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:17:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:17:10] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[22:17:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:17:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:17:34] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:17:34] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:18:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:18:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:18:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:18:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:18:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:18:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:18:34] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:18:34] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:18:50] *** Quits: reyre_ (reyre@DEBED5B4.E646489.47C41102.IP) (Client exited)
[22:19:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:19:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:19:04] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:19:04] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:19:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:19:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:19:33] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:19:33] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:20:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:20:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:20:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:20:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:20:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:20:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:20:34] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:20:34] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:20:55] <Eridius> o_O
[22:21:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:21:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:21:04] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:21:04] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:21:04] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[22:21:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:21:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:21:34] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:21:34] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:22:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:22:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:22:04] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:22:04] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:22:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:22:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:22:34] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:22:34] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:22:42] <strcat> ;\
[22:22:59] <jed> ?_?
[22:23:01] *** Joins: joelteon (joel@moz-317E8D0C.io)
[22:23:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:23:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:23:04] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:23:04] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:23:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:23:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:23:34] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:23:34] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:24:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[22:24:03] <brson> strcat: I'm going to bisect
[22:24:04] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:24:04] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:24:05] <tjc> :-3
[22:24:34] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:24:34] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:24:56] *** Quits: Blub\w (wry@moz-46498567.wireless.dyn.drei.com) (Quit: night)
[22:25:00] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[22:25:05] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:25:05] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:25:10] * strcat should move the rust cronjob earlier
[22:25:18] <Eridius> maybe someone should temporarily ban AutomatedTester|AFK?
[22:25:25] <strcat> it now runs at the same time as a build of kde and linux-zen ;\
[22:25:35] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:25:35] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:26:05] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:26:05] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:26:36] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:26:36] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:26:46] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:26:48] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[22:27:06] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:27:06] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:27:36] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:27:36] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:28:06] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:28:06] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:28:10] <graydon> anyone want to remind me what I type to ban automated tester?
[22:28:33] <Amanieu>  /ban if your irc client supports it
[22:28:36] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:28:36] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:28:40] *** Quits: Ralith (ralith@moz-3767A14F.wireless.sfu.ca) (Ping timeout)
[22:29:06] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:29:06] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:29:19] <strcat> graydon: /ban *!*@moz-DB4A9C19.scl3.mozilla.com
[22:29:26] <Eridius> strcat: that'll kill Yoric too
[22:29:32] <Eridius> just ban it by nickname
[22:29:36] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:29:36] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:29:38] <Eridius> AutomatedTester|AFK!*@*
[22:29:46] <strcat> oh is Yoric not having that issue anymore?
[22:29:49] * strcat shrugs
[22:29:50] <Eridius> seems like no
[22:30:03] <Eridius> yoric's been joined continuously for 6 minutes now
[22:30:06] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[22:30:06] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[22:30:08] <strcat> silly irc
[22:30:32] <Eridius> I'm guessing whatever bot powers AutomatedTester|AFK doesn't have any outgoing rate limiting
[22:30:33] *** graydon sets mode: +b AutomatedTester|Afk!*@*
[22:30:39] <graydon> er
[22:30:40] <Eridius> \o/
[22:30:50] <Eridius> ehh, case on AFK. Probably irrelevant
[22:31:00] <graydon> yeah
[22:31:05] <strcat> graydon: it would be nice to turn off the weird rate limiting we have in the channel mode too
[22:31:06] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[22:31:13] <strcat> but I don't really know which part that is
[22:31:15] <graydon> now it appears I can't re-set the mode?
[22:31:16] <graydon> hmm
[22:31:35] <strcat> it sets +M on "spam", but it often happens because of rusti and rusti is identified so it can still talk anyway ;p
[22:31:45] <Eridius> graydon: if another +b doesn't work, it's probably because nicks are case-insensitive I suppose
[22:31:52] <graydon> I guess?
[22:32:05] *** Joins: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com)
[22:32:36] <Eridius> hey look, AutomatedTester is no longer AFK
[22:33:28] <Eridius> ok looks like "Max SendQ exceeded" means the client couldn't keep up with the incoming messages. Which is odd
[22:33:35] <Eridius> (rather than lack of rate limiting on outgoing)
[22:33:51] <strcat> Eridius: yeah it means the server buffer filled
[22:34:18] *** Quits: unbracketed (textual@moz-6EB214F2.lsanca.dsl-w.verizon.net) (Quit: Computer has gone to sleep.)
[22:34:25] <Eridius> strcat: must be a poor client if it can't read fast enough from the socket (either that or a _really_ bad connection)
[22:34:41] <Eridius> huh, AutomatedTester is a ZNC
[22:34:55] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:35:00] <strcat> rusti: 2
[22:35:01] -rusti- 2
[22:35:08] <strcat> rusti: let x = 5; x = 2
[22:35:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TKfB
[22:35:15] <strcat> rusti: let x = \
[22:35:15] -rusti- <anon>:10:17: 10:18 error: unknown start of token: 92
[22:35:15] -rusti- <anon>:10          let x = \
[22:35:15] -rusti-                            ^
[22:35:15] -rusti- application terminated with error code 101
[22:35:17] <strcat> rusti: let x = \
[22:35:17] -rusti- <anon>:10:17: 10:18 error: unknown start of token: 92
[22:35:17] -rusti- <anon>:10          let x = \
[22:35:17] -rusti-                            ^
[22:35:19] -rusti- application terminated with error code 101
[22:35:21] <strcat> rusti: let x = \
[22:35:22] -rusti- <anon>:10:17: 10:18 error: unknown start of token: 92
[22:35:22] -rusti- <anon>:10          let x = \
[22:35:24] -rusti-                            ^
[22:35:26] -rusti- application terminated with error code 101
[22:35:34] <strcat> hmm, that rate limit thing is totally unpredictable ;\
[22:35:43] <jensnockert> graydon: Was there a good reason why https://github.com/mozilla/rust/pull/7090 was closed? Or did it just happen accidentally in the PR-cleanup?
[22:35:52] <strcat> jensnockert: incoming was deleted
[22:36:04] <strcat> it closed everything
[22:36:08] <jensnockert> Ohâ€¦
[22:36:24] <jensnockert> Master replaces it I suppose?
[22:36:26] <strcat> yep
[22:36:51] <jensnockert> And we should just reopen the PRs against master?
[22:36:55] <strcat> jensnockert: yeah
[22:37:03] <jensnockert> strcat: Thanks! <3
[22:37:30] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[22:38:25] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:40:30] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[22:41:32] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[22:44:20] <Eridius> well. after doing a `git clean -xfd` to kill _everything_, including .gitignored stuff, rust builds properly again
[22:45:13] *** Quits: mib_8u895e (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:45:13] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:45:34] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[22:45:36] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:45:46] <moonchrome> Eridius, I had the same thing, I just did a new folder pull of git and it built fine
[22:46:23] <brson> strcat: so far I've gone back to June 3 and haven't yet found a revision that doesn't have this crash. scary
[22:46:47] <brson> oh, git commits aren't in chronological order ...
[22:46:56] <brson> not quite back to june 3 yet
[22:47:13] <Eridius> brson: if you're trying to narrow down a crash, and you have a point where you know it doesn't happen, use `git bisect`
[22:47:24] <brson> Eridius: I'm trying to find the commit where it doesn't happen
[22:47:31] <Eridius> brson: so jump back arbitrarily far
[22:47:46] <Eridius> go back a week if you have to. a bisect will cut down the distance pretty fast
[22:48:46] *** Quits: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP) (Ping timeout)
[22:49:07] *** Joins: carllerche (carllerche@EC3FF861.AF2C676F.AED9BA81.IP)
[22:49:08] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[22:53:30] <brson> upgrading llvm does not fix the ebml miscompilation
[22:53:55] <graydon> grum
[22:54:09] <graydon> brson: what's going on specifically? we're building busted ebml decoding?
[22:55:14] *** Joins: KindOne (KindOne@moz-60F9A56E.dynamic.ip.windstream.net)
[22:55:17] <xenocons> trying to think of a nice way to write on same line within a loop with rust print, was trying print(fmt!("\r %s",data)); but when the previous data.len exceedes the next, there is non-clean overwriting, is there some fflush function in rust
[22:55:30] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[22:55:40] *** Quits: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP) (Quit: zzzzzzzzzz)
[22:55:53] *** Quits: Guest (textual@34641662.FB4DE631.66C78B76.IP) (Quit: Textual IRC Client: www.textualapp.com)
[22:56:33] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[22:56:33] <xenocons> potentially more of a gneral programming Q. 
[22:57:17] <Eridius> huh, I had no idea \r would reset to the beginning of the line instead of acting as a newline
[22:57:51] <brson> graydon: on i686 there is a conditional in the ebml module that fails incorrectly in specific test cases
[22:58:16] *** Joins: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP)
[22:58:17] *** ChanServ sets mode: +o tjc
[22:58:32] <Eridius> xenocons: you could try using extra::terminfo to get the el capability and emitting that after the \r
[22:58:35] <Eridius> el clears to end of line
[22:58:41] <Eridius> see extra::term to see how to use terminfo
[22:58:53] *** Quits: tjc (tjc@D0044737.52EB2194.FE0E8A14.IP) (Quit: zzzzzzzzzz)
[22:58:59] <xenocons> ah, cool, ty will do
[22:59:14] <bblum> ty::t will do
[23:00:13] <graydon> brson: weird. want me to hunt a bit too?
[23:01:07] <brson> graydon: sure! I've been at this for several days now and haven't found it. I have a reduced test case on my ebml branch under run-pass/auto-decode
[23:01:26] <brson> graydon: what I think I know: I can't reproduce the problem by running the optimized .ll through llc
[23:01:37] <brson> which makes me think we are configuring the back end incorrectly
[23:02:00] <graydon> weird
[23:02:14] <xenocons> Eridius: should live in parm.rs?
[23:02:23] <brson> it only happens with code generator optimizations > 0
[23:02:47] <Eridius> xenocons: I believe parm is how you process the capabilities, but I haven't actually used it myself. extra::term shows how to get the fg and bg capabilities, just use the same code
[23:03:00] <bblum> straw poll, which is a better error message: (1) "this closure's environment must satisfy <bounds>" or (2) "destination closure type requires the bounds <bounds>" ?
[23:03:01] <brson> *auto-encode
[23:03:21] <bblum> or (3) supply your own
[23:03:39] <xenocons> ahh, didnt see term.rs was outside of terminfo
[23:03:55] <Eridius> bblum: I think #1, but only because you're most likely to see this when passing your closure to someone else's function, and therefore you dont' have the power to modify the function's bounds
[23:04:26] <bblum> Eridius: yeah, i'm leaning towards #1, but i wanna say something about how it's required by the destination type or whatever
[23:04:31] <flu_> #1 as well, due to Eridius's excellent point
[23:04:40] <bblum> in a sort of "expected: t1, got: t2" fashion
[23:04:42] <Eridius> bblum: or maybe something like "this closure does not satisfy destination closure type's required bounds <bounds>"
[23:04:51] <Eridius> which is more neutral as to which requires changing
[23:05:04] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[23:05:17] <bblum> Eridius: well, this is actually a span_note, which will follow the error "cannot capture variable of type <T>, which does not fulfill <missing-bound>, in a bounded closure"
[23:05:29] <brson> ok, I've found a stable commit for bisecting the canary crash
[23:05:34] <bblum> nice brson
[23:05:47] <xenocons> Eridius: on windows (as i am at work now) fg and bg and reset in term.rs are defined as empty e.g. pub fn fg(&self, color: u8) { } 
[23:06:03] *** aatch|gone is now known as aatch
[23:06:24] <Eridius> xenocons: ugh. I have no idea how windows terminals work
[23:06:41] <Eridius> on any POSIX system, extra::term uses terminfo to get the proper capabilities from the terminfo files
[23:06:42] <xenocons> me too :) (do they even work? this is part of the reason for my linux switch attempt)
[23:07:12] <Eridius> xenocons: I recommend OS X ;)
[23:07:22] *** Joins: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de)
[23:07:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[23:07:26] <xenocons> i tried osx, a dark period in my life
[23:07:41] <xenocons> gui drove me up the wall
[23:07:44] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:07:45] *** Joins: josh (josh@52A1524D.4E7EDEC9.632B8C24.IP)
[23:08:08] <xenocons> not to start OS wars, but if i was going to use a bsd deriv. itd probably be freebsd
[23:08:16] <xenocons> is there anyone using freebsd+rust?
[23:08:52] <sully> oh man
[23:09:07] <sully> the handling of metadata for default methods is hilariously inefficient
[23:10:06] *** Quits: MaikKlein (maik@moz-FFF7BA30.dip0.t-ipconnect.de) (Client exited)
[23:10:28] <xenocons> here is my solution: print(fmt!("\r searching %s \t\t\t",file.to_str())); 
[23:10:32] <xenocons> muhahaha
[23:10:46] <xenocons> (also is reading a file via libc a bit slow or is it just me)
[23:11:00] <aatch> xenocons, it is, because of the slow ffi
[23:11:06] <xenocons> ah
[23:11:08] <aatch> nmatsakis is working on it.
[23:11:15] <xenocons> sweet
[23:11:44] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[23:11:51] <Eridius> xenocons: what happens if you try "\r\027[Kfoo"
[23:11:55] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[23:12:45] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:13:52] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (Ping timeout)
[23:15:10] <Eridius> actually that should have been \033, but he's gone
[23:15:29] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[23:15:57] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[23:16:59] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[23:17:45] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:18:29] * pcwalton is amused by how much rustc is relying on being able to define two methods with the same name
[23:18:59] <graydon> oh?
[23:19:00] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[23:19:09] <xenocons> sorry did someone say something, irssi just froze
[23:19:10] <pcwalton> yeah, it is
[23:19:13] <pcwalton> I'm fixing it
[23:20:03] <Eridius> xenocons: what happens if you print "\r\033[Kfoo"
[23:20:14] <strcat> yay
[23:20:26] <Eridius> \033[K (where \033 is an octal escape; I assume rust supports that) is the terminal escape for xterm-256color that clears to the end of the line
[23:20:27] <strcat> Name                 Old Version                  New Version                  Net Change  Download Size
[23:20:30] <strcat> thestinger/rust-git                               release.0.6.2265.gb417bc8-1  79.84 MiB       26.30 MiB
[23:20:31] <strcat> rust-incoming-git    release.0.6.2235.gdf483e8-1                               -79.68 MiB               
[23:20:33] <Eridius> rusti: bytes!("\033")
[23:20:33] <strcat> bye incoming ;p
[23:20:34] -rusti- <anon>:10:15: 10:16 error: unknown string escape: 48
[23:20:34] -rusti- <anon>:10          bytes!("\033")
[23:20:34] -rusti-                          ^
[23:20:34] -rusti- application terminated with error code 101
[23:20:40] <Eridius> hmm, no octals?
[23:20:44] <xenocons> Eridius: unknown format string 48
[23:20:50] <xenocons> sorry string escape
[23:20:54] <Eridius> rusti: bytes!("\x1b")
[23:20:55] -rusti- &[27]
[23:20:58] <Eridius> xenocons: ok use \x1b
[23:21:05] <Eridius> rusti: bytes!("\e")
[23:21:05] -rusti- <anon>:10:15: 10:16 error: unknown string escape: 101
[23:21:05] -rusti- <anon>:10          bytes!("\e")
[23:21:05] -rusti-                          ^
[23:21:05] -rusti- application terminated with error code 101
[23:21:08] <strcat> \x1e
[23:21:10] <strcat> or whatever it is
[23:21:17] <strcat> x1b *, yeah
[23:21:31] <xenocons> works the same as \r
[23:21:42] <Eridius> xenocons: so the \x1b[K is ignored? bah
[23:21:45] <Eridius> your terminal sucks :P
[23:21:59] <strcat> rusti: 5
[23:22:00] -rusti- 5
[23:22:13] <xenocons> its windows
[23:22:20] <xenocons> it has the worst cli support ever
[23:22:26] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("rustc", [~"-v"]).output))
[23:22:26] -rusti- rustc 0.6 (b417bc8 2013-06-13 15:41:34 -0600)
[23:22:26] -rusti- host: x86_64-unknown-linux-gnu
[23:22:27] -rusti- ()
[23:22:50] <flu_> .... now I have to try something
[23:23:13] <flu_> rusti: print(std::str::from_bytes(std::run::process_output("ls", []).output))
[23:23:14] -rusti- out
[23:23:14] -rusti- ()
[23:23:18] <flu_> ...
[23:23:33] *** cscottnet is now known as cscottnet_away
[23:23:36] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ps", [~"ax"]).output))
[23:23:38] -rusti-   PID TTY      STAT   TIME COMMAND
[23:23:38] -rusti-     1 ?        Ssl    0:00 ./out
[23:23:38] -rusti-    13 ?        R      0:00 ps ax
[23:23:38] -rusti- ()
[23:23:45] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("uname", [~"-a"]).output))
[23:23:47] -rusti- Linux playpen 3.9.5-1-ARCH #1 SMP PREEMPT Sat Jun 8 09:22:45 CEST 2013 x86_64 GNU/Linux
[23:23:47] -rusti- ()
[23:23:50] <Eridius> rusti: print(std::str::from_bytes(std::run::process_output("pwd", []).output))
[23:23:52] -rusti- /home/rust
[23:23:52] -rusti- ()
[23:24:34] <flu_> rusti: print(std::str::from_bytes(std::run::process_output("curl", ["-X", "HEAD", "http://www.dahlgren.so"]).output))
[23:24:38] <Eridius> can we get rust-lang.org's documentation links updated?
[23:24:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HEjd
[23:24:42] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[23:24:52] <strcat> flu_: it doesn't have networking
[23:24:55] <flu_> lolll
[23:24:58] <strcat> https://github.com/thestinger/playpen
[23:25:01] <flu_> strcat: couldn't help but try :-)
[23:25:02] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[23:28:04] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ip", [~"a"]).output))
[23:28:05] -rusti- ()
[23:28:09] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ip", [~"l"]).output))
[23:28:10] -rusti- ()
[23:28:11] *** Quits: cscottnet_away (cscott@moz-2577C94A.net) (Ping timeout)
[23:28:20] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ip", [~"l"]).error))
[23:28:21] -rusti- rust: task failed at 'failure in execvp: No such file or directory', /build/rust-git/src/rust/src/libstd/run.rs:690
[23:28:21] -rusti- rust: domain main @0x7f27e041f810 root task failed
[23:28:21] -rusti- ()
[23:28:25] <strcat> oh
[23:28:26] <strcat> hrm
[23:28:49] <strcat> oh just wasn't installed
[23:28:52] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ip", [~"l"]).output))
[23:28:53] -rusti- ()
[23:28:57] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ip", [~"l"]).error))
[23:28:58] -rusti- ()
[23:29:07] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ip", [~"a"]).output))
[23:29:08] -rusti- ()
[23:29:13] <strcat> heh it doesn't have a loopback
[23:29:18] <strcat> I should probably make one
[23:29:44] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[23:31:49] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[23:34:08] *** Joins: joelteon (joel@moz-317E8D0C.io)
[23:34:37] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[23:35:31] <heftig> strcat: do you protect against forkbombs?
[23:35:50] <flu_> and file creation
[23:36:05] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:36:05] <aatch> read-only fs and resource limits
[23:36:27] <flu_> nice :-)
[23:36:27] <aatch> you'd have to exploit a bug in the kernel to do something malicious
[23:36:43] <heftig> aatch: resource limits via cgroups?
[23:36:51] <aatch> heftig, yep.
[23:37:17] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[23:37:34] *** Joins: adu (ajr@moz-68CC2A5E.washdc.fios.verizon.net)
[23:37:43] <strcat> heftig: well it has an 128MiB memory limit so kind of
[23:38:00] <flu_> ah, and you're using bleeding edge arch, so no CVE-2013-2094 risk 
[23:38:29] <aatch> strcat, you also have the other limits in place though, like how long a process can run for.
[23:38:31] <strcat> flu_: it has a whitelist of system calls anyway
[23:38:35] <bblum> what's the build target for compile-fail tests
[23:38:41] <strcat> yeah it kills the cgroup after a timeout
[23:38:58] <xenocons> is there a way to create a new n string from c char?
[23:39:13] <xenocons> or do you just create a vector then combine\join
[23:39:14] <aatch> rusti: loop { println("a"); }
[23:39:15] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aGAO
[23:39:21] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("dmesg", []).output))
[23:39:21] -rusti- ()
[23:39:25] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("dmesg", []).error))
[23:39:26] -rusti- ()
[23:40:07] <strcat> rusti: fn foo() { loop {} } foo()
[23:40:13] -rusti- timeout triggered!
[23:40:18] <strcat> rusti: fn foo() { foo() } foo()
[23:40:19] -rusti- ()
[23:40:30] <strcat> rusti: fn foo() { do spawn { foo() } } foo()
[23:40:36] -rusti- ()
[23:40:36] -rusti- timeout triggered!
[23:40:39] <strcat> rusti: fn foo() { loop { do spawn { foo() } } } foo()
[23:40:44] -rusti- timeout triggered!
[23:40:52] <strcat> rusti: fn foo() { loop { do spawn { foo() } } } foo()
[23:40:57] -rusti- timeout triggered!
[23:41:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.3.8)
[23:41:58] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("bash", [~"-c", "f() { f | f & }; f"]).output))
[23:42:00] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZGFb
[23:42:08] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("bash", [~"-c", ~"f() { f | f & }; f"]).output))
[23:42:09] -rusti- ()
[23:42:14] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("bash", [~"-c", ~"f() { f | f & }; f"]).error))
[23:42:15] -rusti- ()
[23:42:30] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:42:49] <xenocons> rusti: ['c' as u8,..15].from_bytes()
[23:42:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aDKH
[23:43:14] <strcat> rusti: ~[0, ..1000000]
[23:43:19] -rusti- line longer than 10000 characters, bailing out
[23:43:21] <strcat> rusti: ~[0, ..1000000];
[23:43:22] -rusti- ()
[23:43:24] <strcat> rusti: ~[0, ..10000009];
[23:43:25] -rusti- ()
[23:43:26] <strcat> rusti: ~[0, ..100000000];
[23:43:31] -rusti- timeout triggered!
[23:43:34] <strcat> rusti: ~[0, ..10000000000];
[23:43:35] -rusti- rust: task failed at 'assertion failed: p.is_not_null()', /build/rust-git/src/rust/src/libstd/rt/global_heap.rs:26
[23:43:35] -rusti- rust: domain main @0x7f43c381f810 root task failed
[23:43:35] -rusti- application terminated with error code 101
[23:43:39] <strcat> rusti: ~[0, ..1000000000];
[23:43:39] -rusti- rust: task failed at 'assertion failed: p.is_not_null()', /build/rust-git/src/rust/src/libstd/rt/global_heap.rs:26
[23:43:39] -rusti- rust: domain main @0x7fdbae41f810 root task failed
[23:43:40] -rusti- application terminated with error code 101
[23:43:41] <strcat> rusti: ~[0, ..100000000];
[23:43:47] -rusti- timeout triggered!
[23:43:58] <strcat> hm for some reason instead of the oom killer killing it, it just stalls now
[23:44:03] <xenocons> rusti: ['c' as u8,..15]
[23:44:03] <strcat> when it hits 128MiB
[23:44:03] -rusti- [99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99]
[23:45:19] <xenocons> rusti: ['c',...15]
[23:45:19] -rusti- <anon>:10:14: 10:15 error: unexpected token: `.`
[23:45:19] -rusti- <anon>:10          ['c',...15]
[23:45:20] -rusti-                         ^
[23:45:20] -rusti- application terminated with error code 101
[23:45:24] <xenocons> rusti: ['c',..15]
[23:45:25] -rusti- ['c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c']
[23:45:34] <xenocons> rusti: ['c',..15].from_chars()
[23:45:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/hQbO
[23:45:40] <graydon> anyone seen brson?
[23:45:45] *** Joins: joelteon (joel@moz-317E8D0C.io)
[23:45:55] <xenocons> rusti: (~['c',..15]).from_chars()
[23:45:56] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/DfTM
[23:46:01] <xenocons> mother...
[23:46:07] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[23:46:07] *** ChanServ sets mode: +o brson
[23:46:51] *** Joins: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:47:02] <graydon> brson: auto-decode.rs isn't on that branch; post somewhere?
[23:47:12] <brson> graydon: it's called auto-encode
[23:47:16] <brson> i misspoke
[23:47:19] <strcat> huh, libseccomp 2.1.0 was released
[23:47:39] <graydon> whoops
[23:47:45] <Eridius> cmr: are you actively working on extra::terminfo::parm? I'm really tempted to fix it up to handle conditionals, as well as fix the cases where it can trigger task failure instead of returning Err
[23:48:11] <graydon> brson: and it fails only on 32bit?
[23:48:23] <brson> graydon: yes
[23:49:00] * sully trying to figure out how to make default methods work cross crate
[23:49:07] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:49:29] <xenocons> rusti: (&['c',..15]).from_chars()
[23:49:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SCfc
[23:50:09] <xenocons> rusti: std:;str::from_chars(&['c',..15]);
[23:50:10] -rusti- <anon>:10:12: 10:13 error: expected `;` or `}` after expression but found `:`
[23:50:10] -rusti- <anon>:10          std:;str::from_chars(&['c',..15]);
[23:50:10] -rusti-                       ^
[23:50:10] -rusti- application terminated with error code 101
[23:50:20] <xenocons> ok 
[23:50:34] <strcat> rusti: 5
[23:50:34] <Jesse_> rusti: std::str::from_chars(&['c',..15]);
[23:50:35] -rusti- 5
[23:50:36] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/hSea
[23:51:28] <xenocons> rusti: std::str::from_chars(~['c',..15])
[23:51:29] -rusti- ~"ccccccccccccccc"
[23:51:31] <xenocons> thats a bit weird but ok
[23:51:34] <Jesse_> strcat: can you make it ignore the part after "note: in expansion of fmt!" when deciding whether the error output is too long?
[23:51:44] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[23:51:46] <strcat> I guess
[23:51:49] <Jesse_> rusti: std::str::from_chars(['c',..15]);
[23:51:50] -rusti- ()
[23:52:05] <strcat> I could also make it not nest it in the fmt!
[23:52:26] <Eridius> rusti: std::str::from_chars(['c',..15])
[23:52:28] -rusti- ~"ccccccccccccccc"
[23:52:30] *** Quits: dherman (dherman@moz-47111369.rev.sfr.net) (Quit: dherman)
[23:52:30] <aatch> strcat, now /that/ would be cool.
[23:52:30] <Eridius> xenocons: ^
[23:52:33] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[23:52:45] <flu_> strcat: that would get rid of the insufficient lifetime errors, right?
[23:52:50] <strcat> flu_: no
[23:53:01] <Jesse_> collaborative getting-it-to-compile ftw
[23:53:05] <strcat> it has to be nested in a block
[23:53:24] <flu_> hmm
[23:53:32] <xenocons> Eridius: ah right
[23:54:32] <xenocons> heh 
[23:54:51] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[23:54:52] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[23:54:54] <xenocons> rusti: let x = 2; [1,..x]
[23:54:55] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eJJU
[23:55:01] <steven_is_false> Hoorah! incoming is deleted!
[23:55:10] *** Joins: lmandel (lmandel@CB3EC984.A5F785DE.396E4C6D.IP)
[23:55:29] <xenocons> is there a way to specify a let binding as a const integer
[23:55:44] <flu_> steven_is_false: pfft, that is SOOO 2 hours and 36 minutes ago
[23:55:46] <flu_> :-P
[23:55:51] <josh> If i want to loop 5 times, do I need to manage a counter in a while loop or is there another simpler construct I could use?
[23:56:20] <strcat> rusti: for 4.times { println("foo") }
[23:56:21] -rusti- foo
[23:56:21] -rusti- foo
[23:56:21] -rusti- foo
[23:56:21] -rusti- foo
[23:56:21] -rusti- ()
[23:56:27] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:56:28] <Eridius> xenocons: what do you mean?
[23:56:50] <xenocons> Eridius: at the moment it seems let x = 2; [1,..x] wont work as x isnt a 'const integer' according to the compiler
[23:57:04] <Eridius> rusti: static x : int = 2; [1,..x]
[23:57:05] -rusti- [1, 1]
[23:57:06] <bblum> strcat: hm, if the iterator stuff goes through, that will change to "do 4.times", which actually sounds better imo
[23:57:08] <xenocons> ahhh
[23:57:22] <strcat> bblum: well it can be an external iterator anyway
[23:57:24] <xenocons> i find the differentiation between static x and let x to be a bit confusing
[23:57:37] <Eridius> bblum: do-blocks will drive external iterators? I thought the plan was to make for-blocks learn how to drive them
[23:57:38] <xenocons> im guessing there is a good reason for this though
[23:57:45] <bblum> Eridius: other way around
[23:57:45] <Eridius> bblum: which would leave it as `for 4.times`
[23:57:50] <bblum> you are right
[23:58:07] <strcat> Eridius: well it would be odd
[23:58:36] <Eridius> xenocons: there's nothing special about a let-binding with a constant initializer, which there'd have to be for you to use it in an array expression
[23:58:40] <Eridius> xenocons: but statics must be constant
[23:58:49] <strcat> Eridius: because they return Option
[23:58:55] <strcat> unless Option<()> was special cased
[23:59:18] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[23:59:20] <xenocons> Eridius: its a concept ill have to get familiar with, never have dealt with this 'static' stuff before
[23:59:35] <Eridius> xenocons: what language are you coming from?
[23:59:42] <xenocons> F#
[23:59:52] <Eridius> oh, don't know that one at all
[23:59:54] <xenocons> (and to a lesser extent, SML)
[23:59:56] <flu_> definitely was not expecting that answer
