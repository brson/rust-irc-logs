[00:05:47] <Manishearth> reem: there is no lifetimes chapter :(
[00:06:01] <Manishearth> ah found somethng
[00:06:32] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[00:07:09] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[00:07:26] <Manishearth> reem: try now http://manishearth.github.io/blog/2015/05/03/where-rust-really-shines/
[00:08:58] <reem> Manishearth: In the second paragraph, I’d put a lot of effort into refining a description of exactly what problem you are trying to solve, right now it’s pretty unclear and it’s confusing since it makes me think this is going to be about the compiler instead of rust itself.
[00:09:21] <reem> Sounds straightforward, right? <- delete, it’s less risky to just avoid that
[00:10:54] <Manishearth> okay
[00:11:11] <reem> third paragraph could use splitting up/reorganizing a bit just to make the individual points clearer: I want to make a copy/reference an existing vector provided to me by another API. what would I do in C++? What would I do in Rust? Why?
[00:12:39] <reem> The “I then updated the code everywhere” is where you should really elaborate, because that is the part that sounds arduous to someone new to rust
[00:14:22] <Manishearth> reem: that's the regular stuff you would update when making such a change
[00:14:40] <Manishearth> I don't know how to clarify that, any idea?
[00:15:03] <Manishearth> "This is the sort of change oyu would make to move data around in any language"
[00:15:26] <Manishearth> reem: > What I was trying to do isn't really important, but basically there was a struct which was exposed to an API,
[00:15:29] <reem> Manishearth: You and I know how adding a lifetime affects other code, people not steeped in rust don’t.
[00:15:29] <Manishearth> and I wished to give it access to a list of things known as "attributes", where the list was [a heap-allocated
[00:15:32] <Manishearth> vector](http://doc.rust-lang.org/std/vec/struct.Vec.html).
[00:15:34] <Manishearth> that osund good?
[00:15:53] <Manishearth> reem: yeah , " I updated the code everywhere " doesn't do lifetimes
[00:15:55] <reem> Just cut the “what I was trying to do, … but basically” part
[00:16:23] <Manishearth> There was a struct ... ?
[00:16:30] <Manishearth> sgtm
[00:16:51] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[00:16:58] <reem> just cut everything that doesn’t mean something directly
[00:17:05] <Manishearth> I see
[00:17:46] <reem> An outline would probably help with organization, so it’s clearer to you exactly what points you are trying to make
[00:17:57] <reem> then you can just nail them one by one and you have a great blog post
[00:18:28] <reem> (imo writing a long post without an outline/planning of some kind is like sitting down to write a giant library with no plans, tests, or documentation)
[00:19:56] <Manishearth> I sort of did, but I wasn't really sure what points I wanted to make in the first place :p
[00:20:41] <reem> makes sense
[00:21:03] *** Quits: erickt (erickt@moz-g7qhvc.vlljca.sbcglobal.net) (Ping timeout: 121 seconds)
[00:21:26] <Manishearth> reem: https://github.com/Manishearth/manishearth.github.io/commit/6b70428e1af2b1d57fa19834d28cb6698d0065ef
[00:22:09] <Manishearth> mostly just changed the first few paras
[00:24:36] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:25:13] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[00:27:06] <reem> left some comments on the changes in the beginning
[00:27:19] <Manishearth> cool
[00:27:25] <Manishearth> anything else needs fixing? :)
[00:28:53] <Manishearth> I also want to mention this, but not sure where or how:
[00:30:33] <Manishearth> actually nvm that, won't fit
[00:33:31] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[00:33:33] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[00:33:34] <Manishearth> reem: pblishing now
[00:37:46] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[00:37:55] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[00:46:17] *** Joins: brson (brson@moz-qjbkeh.mtv2.mozilla.com)
[00:46:17] *** ChanServ sets mode: +o brson
[00:49:28] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[00:54:46] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[00:58:01] *** Joins: ELD (textual@moz-tbcsac.co.comcast.net)
[01:06:59] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[01:19:46] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[01:20:30] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:24:01] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[01:38:11] *** Quits: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[01:42:23] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[01:46:11] *** Quits: erz (erz@moz-efrhus.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:46:29] *** Joins: kmcguire_ (kmcguire@moz-c955nf.res.rr.com)
[01:48:49] *** Quits: kmcguire (kmcguire@moz-c955nf.res.rr.com) (Ping timeout: 121 seconds)
[01:49:03] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[01:52:43] *** Quits: jga (jga@moz-tu0.t1q.244.77.IP) (Ping timeout: 121 seconds)
[01:53:11] *** Joins: XuefengWu (Adium@moz-20l.3o0.104.202.IP)
[01:54:55] *** Quits: XuefengWu (Adium@moz-20l.3o0.104.202.IP) (Quit: Leaving.)
[01:56:11] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[01:57:22] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:57:26] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[01:57:28] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[01:59:48] *** Quits: tamird (textual@moz-u20jfv.home.cgocable.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:03:29] *** Joins: chc4 (chc4@moz-mjph4c.ma.comcast.net)
[02:03:35] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Connection closed)
[02:04:23] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[02:07:07] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[02:09:22] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Connection closed)
[02:09:54] *** Joins: tweedle (Mibbit@moz-qlv.k9e.28.168.IP)
[02:10:23] *** Quits: ytain (ytain@moz-hut.ooe.161.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:11:09] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[02:12:59] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[02:14:31] *** Quits: Stebalien (Stebalien@moz-i00.hrk.38.73.IP) (Quit: leaving)
[02:15:27] *** Quits: blank_name (blank_name@moz-204.u7h.36.50.IP) (Quit: leaving)
[02:16:42] *** Joins: blank_name (blank_name@moz-204.u7h.36.50.IP)
[02:16:56] *** Quits: blank_name (blank_name@moz-204.u7h.36.50.IP) (Quit: leaving)
[02:17:10] *** Joins: blank_name (blank_name@moz-204.u7h.36.50.IP)
[02:17:17] *** Joins: SPERGLORD_LAVA (Mibbit@moz-ojt84d.moonshot.fastwebserver.de)
[02:17:40] <SPERGLORD_LAVA> BSTRIE IS A NIGGER LOVER
[02:17:44] <SPERGLORD_LAVA> A FUCKING 
[02:17:46] <SPERGLORD_LAVA> NIGGER
[02:17:47] <SPERGLORD_LAVA> LOVER
[02:17:49] <SPERGLORD_LAVA> EAT A DICK
[02:17:52] <SPERGLORD_LAVA> YOU FIUCING CUCK
[02:17:58] <SPERGLORD_LAVA> FUCKING CUCKOLDS NIGGER LOVER
[02:18:03] <SPERGLORD_LAVA> I KNOW OULOVE NIGGERS
[02:18:07] *** huon sets mode: +b *!*Mibbit@*.moonshot.fastwebserver.de
[02:18:07] *** SPERGLORD_LAVA was kicked by huon (huon)
[02:21:09] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:22:33] <scott> mind if I make !ops work on rustbot (someone just tried it in #rust but it's not defined)? if so, who should be in the list?
[02:24:36] *** Quits: kimundi (kimundi@moz-3muk93.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:25:19] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[02:27:34] *** Joins: zz_kimundi (kimundi@moz-7cq7ea.dip0.t-ipconnect.de)
[02:27:35] *** zz_kimundi is now known as kimundi
[02:32:43] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:33:18] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:33:28] *** Joins: erickt (erickt@moz-g7qhvc.vlljca.sbcglobal.net)
[02:37:20] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[02:42:15] *** Quits: brson (brson@moz-qjbkeh.mtv2.mozilla.com) (Quit: leaving)
[02:42:48] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:52:36] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:54:25] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[02:59:24] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[02:59:50] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[03:03:58] *** Joins: mib_o8q2vy (Mibbit@moz-juv.9o3.252.72.IP)
[03:04:03] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[03:05:28] *** Quits: mib_o8q2vy (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:06:20] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:08:33] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:15:26] *** Quits: tweedle (Mibbit@moz-qlv.k9e.28.168.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:16:28] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[03:18:21] *** Quits: blank_name (blank_name@moz-204.u7h.36.50.IP) (Quit: leaving)
[03:18:39] *** Joins: blank_name (blank_name@moz-204.u7h.36.50.IP)
[03:27:36] *** Joins: semarie (semarie@moz-dbql9s.telostor.ca)
[03:29:52] *** Quits: erickt (erickt@moz-g7qhvc.vlljca.sbcglobal.net) (Ping timeout: 121 seconds)
[03:31:25] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[03:35:25] *** Quits: ELD (textual@moz-tbcsac.co.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:37:09] *** Joins: bkearns (Adium@moz-2l9j31.ca.comcast.net)
[03:39:41] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[03:40:17] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[03:46:17] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:54:05] <Luqman> huon: updated the test to include trait objects too
[03:56:40] *** Joins: tamird (textual@moz-u20jfv.home.cgocable.net)
[03:57:30] *** Joins: pr0c (proc@moz-if0e4v.dip0.t-ipconnect.de)
[03:58:12] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[03:58:35] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:00:49] *** Quits: proc (proc@moz-c2t5u7.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[04:02:44] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:07:13] *** Quits: semarie (semarie@moz-dbql9s.telostor.ca) (Ping timeout: 121 seconds)
[04:08:16] *** Quits: bkearns (Adium@moz-2l9j31.ca.comcast.net) (Quit: Leaving.)
[04:14:04] *** Joins: semarie (semarie@moz-8lcthi.rev.poneytelecom.eu)
[04:14:22] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[04:16:14] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[04:18:54] *** Joins: bkearns (Adium@moz-2l9j31.ca.comcast.net)
[04:23:40] *** Quits: geofft (geofft@moz-vfphq1.mit.edu) (Connection closed)
[04:24:05] <reem> Manishearth: blog post seems successful :)
[04:24:22] *** Quits: achernya (quassel@moz-8tbl8i.6686.inna.4830.2001.IP) (Quit: No Ping reply in 180 seconds.)
[04:26:22] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[04:29:32] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[04:31:15] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[04:31:26] *** Joins: achernya (quassel@moz-8tbl8i.6686.inna.4830.2001.IP)
[04:33:27] *** Joins: geofft (geofft@moz-vfphq1.mit.edu)
[04:41:57] *** Quits: Diggsey (diggsey@moz-46lma2.dsl.pipex.com) (Ping timeout: 121 seconds)
[04:52:20] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[04:52:57] *** Joins: gunther (Mibbit@moz-juv.9o3.252.72.IP)
[04:53:30] *** Quits: gunther (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:56:54] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:57:41] *** Joins: TheDan64 (Daniel@moz-d3g.e79.63.129.IP)
[05:05:48] *** Quits: eddyb (eddyb@moz-mj8.sgj.26.188.IP) (Quit: Bye)
[05:17:24] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:26:02] *** Quits: TheDan64 (Daniel@moz-d3g.e79.63.129.IP) (Quit: Leaving)
[05:32:43] *** Quits: srh (User@moz-k0i14f.q9f2.utp8.0306.2602.IP) (Quit: Leaving)
[05:46:30] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[05:47:26] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Quit: AHHHHH BEES)
[05:51:02] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[06:07:40] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[06:12:52] *** Joins: Skyler (Skyler@moz-dgl2bi.fios.verizon.net)
[06:23:21] *** Joins: Guest63 (textual@moz-ttd.2as.255.109.IP)
[06:27:08] *** Joins: mib_u5xpn7 (Mibbit@moz-juv.9o3.252.72.IP)
[06:27:24] *** Quits: Guest63 (textual@moz-ttd.2as.255.109.IP) (Ping timeout: 121 seconds)
[06:28:07] *** Quits: mib_u5xpn7 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:32:57] *** Quits: samnmax (samnmax@moz-1vk.aq9.27.72.IP) (Ping timeout: 121 seconds)
[06:40:39] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:45:13] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[06:45:17] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:46:20] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[06:48:55] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:04:01] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[07:07:18] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Connection closed)
[07:07:24] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[07:07:45] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Connection closed)
[07:08:15] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[07:27:26] *** Joins: marsel (user@moz-i1v.2qu.180.94.IP)
[07:28:27] *** Joins: japaric (japaric@moz-1j4.n2c.236.190.IP)
[07:28:32] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[07:28:43] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Ping timeout: 121 seconds)
[07:28:55] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[07:29:29] *** Quits: japaric_ (japaric@moz-rkv.mra.232.190.IP) (Ping timeout: 121 seconds)
[07:29:35] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[07:29:57] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[07:33:59] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[07:34:51] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[07:36:33] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:39:22] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:41:51] *** Joins: kushal (kdas@moz-4qgekg.202.sitibroadband.in)
[07:44:24] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[07:47:21] *** Quits: kushal (kdas@moz-4qgekg.202.sitibroadband.in) (Quit: Leaving)
[07:49:54] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[08:00:21] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[08:00:23] *** Quits: Kxepal (Miranda@moz-jbfiec.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[08:02:23] *** Joins: Kxepal (Miranda@moz-383chs.pppoe.mtu-net.ru)
[08:02:28] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Connection closed)
[08:23:06] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[08:23:26] *** Quits: daimrod (daimrod@moz-16pjc3.org) (Ping timeout: 121 seconds)
[08:29:00] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:33:12] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[08:33:32] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[08:34:53] <Manishearth> reem: hah
[08:34:57] <Manishearth> just woke up
[08:35:05] <Manishearth> need to go through all the comments
[08:35:15] * Manishearth watches out for pitchforks
[08:39:18] <huon> oooh, pitchforks, I like pitchforks
[08:39:33] <huon> who're we pitchforking today?
[08:41:08] <Mutabah> huon: Manishearth. Over a completely useless, badly written, and nowhere near correct blog post</jokes>
[08:43:11] <huon> Manishearth: (nice post :) )
[08:44:06] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[08:44:14] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[08:44:37] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[08:46:31] <Manishearth> thanks :)
[08:47:32] <Manishearth> I am happy that the only major complaint about it is shared_ptr, and that was something I had deliberately left out because I didn't want to go there, but I found a way to work it in
[08:50:00] *** Joins: genbattle (genbattle@moz-ikj3l8.xtra.co.nz)
[08:51:53] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[08:56:00] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:20:21] *** Joins: daimrod (daimrod@moz-16pjc3.org)
[09:23:08] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[09:25:46] <Manishearth> acrichto: feedback on the tcp api
[09:25:47] <Manishearth> http://www.reddit.com/r/programming/comments/34obhi/where_rust_really_shines/cqwsvxs?context=3
[09:25:52] <Manishearth> perhaps we could improve it somehow?
[09:27:42] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:37:02] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[09:37:35] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[09:37:38] *** Joins: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com)
[09:45:51] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[09:51:11] <reem> Not a lot of feedback there, mostly just “it’s bad”
[09:53:57] <Manishearth> reem: see below, they compare it with the boost api
[09:54:06] <Manishearth> the issue is that there's no simple string-based API here
[09:55:01] <reem> I think everything is just a little less fluid
[09:55:12] <reem> you could express most of those lines with equivalent lines in rust, the rust lines are just more complicated
[09:56:31] <reem> instead of std::cout << stream.rdbuf() we have io::copy(&mut stream, &mut io::stdout())
[09:57:22] <reem> (which is really not bad)
[09:58:00] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[10:02:11] <bluss> look at the read_all rfc
[10:02:27] <bluss> I think they have a point, something a bit nicer is needed
[10:04:08] <Manishearth> reem: it's still all buffery and bytey
[10:05:05] <reem> I guess? What’s buffery or bytey about io::copy?
[10:05:23] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[10:08:50] *** Joins: jga (jga@moz-lmi.t1q.244.77.IP)
[10:09:34] <bluss> it uses a 64k buffer
[10:09:34] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[10:09:47] <bluss> what is bytey though?
[10:10:51] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Connection closed)
[10:11:12] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[10:13:37] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:15:15] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Ping timeout: 121 seconds)
[10:17:12] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[10:17:18] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:17:23] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Ping timeout: 121 seconds)
[10:17:45] <Manishearth> oh, no bytes
[10:17:45] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[10:18:04] <Manishearth> But I'd like a way to just do stream.getString(); and stream.write(STring)
[10:21:49] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:22:38] *** Quits: genbattle (genbattle@moz-ikj3l8.xtra.co.nz) (Ping timeout: 121 seconds)
[10:37:37] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[10:37:44] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Connection closed)
[10:37:51] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[10:38:02] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[10:38:51] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Connection closed)
[10:39:46] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[10:40:18] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[10:42:44] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[10:43:51] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Ping timeout: 121 seconds)
[10:47:20] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[10:49:07] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:55:19] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:01:31] *** kimundi is now known as zz_kimundi
[11:02:50] *** Quits: pr0c (proc@moz-if0e4v.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[11:09:37] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:10:28] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[11:11:31] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[11:12:43] *** Joins: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com)
[11:21:47] *** Quits: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com) (Ping timeout: 121 seconds)
[11:23:52] *** Joins: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com)
[11:24:46] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[11:26:48] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[11:27:50] *** Joins: eibwen (eibwen@moz-itogl2.dip0.t-ipconnect.de)
[11:29:48] *** Quits: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com) (Quit: leaving)
[11:32:03] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[11:33:13] *** Quits: Skyler (Skyler@moz-dgl2bi.fios.verizon.net) (Client exited)
[11:34:19] <bluss> buildbots seem to be stuck https://github.com/rust-lang/rust/pull/25064
[11:37:17] <Manishearth> bluss: on it
[11:37:33] <Manishearth> bluss: buildslaves down
[11:37:41] <Manishearth> acrichto: buildslaves are down
[11:37:42] <Manishearth> http://buildbot.rust-lang.org/buildslaves
[11:40:31] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[11:44:34] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Ping timeout: 121 seconds)
[11:50:26] *** Joins: ytain (ytain@moz-hut.ooe.161.108.IP)
[11:52:19] *** zz_kimundi is now known as kimundi
[11:54:47] *** Joins: Guest63 (textual@moz-ttd.2as.255.109.IP)
[12:03:22] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[12:04:51] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[12:05:32] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[12:14:27] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[12:23:55] *** Joins: untitaker_ (untitaker@moz-0lslvg.highway.telekom.at)
[12:24:28] *** Quits: untitaker (untitaker@moz-aq8ivn.highway.telekom.at) (Ping timeout: 121 seconds)
[12:31:13] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[12:33:05] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[12:33:06] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[12:34:06] *** Joins: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP)
[12:36:01] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[12:38:27] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[12:39:01] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:39:43] *** Quits: untitaker_ (untitaker@moz-0lslvg.highway.telekom.at) (Quit: ZNC - http://znc.in)
[12:41:15] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[12:41:23] *** Joins: untitaker (untitaker@moz-0lslvg.highway.telekom.at)
[12:42:42] *** Quits: kmcguire_ (kmcguire@moz-c955nf.res.rr.com) (Connection closed)
[12:42:57] *** Joins: rkruppe (chatzilla@moz-03ccga.diu2.0rth.0908.2a02.IP)
[12:42:58] *** Joins: kmcguire_ (kmcguire@moz-c955nf.res.rr.com)
[12:45:24] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Ping timeout: 121 seconds)
[12:47:52] *** Quits: untitaker (untitaker@moz-0lslvg.highway.telekom.at) (Quit: ZNC - http://znc.in)
[12:48:02] *** Joins: untitaker (untitaker@moz-0lslvg.highway.telekom.at)
[12:48:24] <bluss> bots are back and awesome DST changes merging.. hopefully
[12:52:57] *** Quits: untitaker (untitaker@moz-0lslvg.highway.telekom.at) (Quit: ZNC - http://znc.in)
[12:54:38] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:54:39] *** Joins: untitaker (untitaker@moz-0lslvg.highway.telekom.at)
[12:55:25] *** Joins: aepsil0n (eduard@moz-ob9p8k.hsi8.kabel-badenwuerttemberg.de)
[12:55:38] *** Quits: untitaker (untitaker@moz-0lslvg.highway.telekom.at) (Quit: ZNC - http://znc.in)
[12:56:35] *** Joins: untitaker (untitaker@moz-0lslvg.highway.telekom.at)
[12:58:30] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:58:38] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[13:00:50] *** Quits: tamird (textual@moz-u20jfv.home.cgocable.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:01:01] *** Joins: O01eg (o01eg@moz-677s69.jv4h.3egh.2698.2a02.IP)
[13:01:21] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[13:04:14] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[13:05:24] *** kimundi is now known as zz_kimundi
[13:26:26] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[13:26:48] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[13:30:50] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[13:32:27] *** Quits: Kxepal (Miranda@moz-383chs.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[13:32:29] *** Joins: tamird (textual@moz-u20jfv.home.cgocable.net)
[13:42:00] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[13:46:07] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Ping timeout: 121 seconds)
[13:51:29] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[13:51:39] *** Quits: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[13:52:59] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[13:53:48] *** Joins: dinfuehr_ (dinfuehr@moz-3avimr.highway.telekom.at)
[13:53:49] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Connection closed)
[14:00:09] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[14:00:40] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[14:15:54] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[14:25:31] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[14:25:50] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Quit: )
[14:26:51] *** Joins: Diggsey (diggsey@moz-nq516s.dsl.pipex.com)
[14:31:26] <doener> omfg... https://gist.github.com/dotdash/298f91f09baf366e8378
[14:32:09] <cmr> lol
[14:32:51] <doener> derived PartialEq for sty...
[14:35:38] <arielb1> doener: so *that*'s why it's so hot
[14:36:10] <arielb1> I would really prefer to make it a memcmp
[14:36:43] <arielb1> that would require evil hacks through
[14:38:53] <arielb1> but it seems like a nice 10% perf improvement
[14:39:05] <arielb1> if it wasn't so evil
[14:39:10] <arielb1> why can't Rust be more like C
[14:39:46] <arielb1> if this was C I would do it without thinking about it
[14:42:07] <arielb1> maybe add that feature to the compiler
[14:42:13] <arielb1> repr(unique)
[14:42:46] <arielb1> couldn't use it properly without sizeof in generics through
[14:45:17] <arielb1> doener: do you think this can fly?
[14:47:57] *** Joins: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de)
[14:48:11] <arielb1> we would have to stop using Vec<Ty> then
[14:48:23] <arielb1> and Option (in ty_vec and ty_bare_fn)
[14:48:30] <arielb1> I don't think this will be a huge cost tho
[14:50:59] <doener> arielb1: first. I'd like to try to improve the code we generate when deriving things like PartialEq. The xor/jmp mess could also be due to the way we handle matches (lots of incoming blocks for the join block), and maybe something in LLVM could be improving. Gut feeling is that this is resulting from a phi node with tons of incoming blocks that cause the value to be zero
[14:51:37] <arielb1> doener: this also happens for Hash
[14:51:43] <arielb1> that's the annoying part
[14:51:49] <arielb1> actually its even worse - we hash the Substs
[14:51:50] <Manishearth> didn't the disr_value intrinsic land?
[14:51:59] <arielb1> which are interned anyway
[14:52:06] <arielb1> I am going to fix that tho
[14:52:23] <doener> PartialEq should really generate code that goes "if the discriminators don't match, return false, otherwise, do a match for those variants that have substructs"
[14:52:38] <doener> not "do a huge match that llvm can't properly optimize and call it a day" ;-)
[14:53:05] <arielb1> what code PartialEq generates?
[14:53:15] <arielb1> could you --pretty expanded and add it to the gist?
[14:53:41] <Manishearth> doener: https://github.com/rust-lang/rust/pull/20907
[14:53:49] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[14:54:04] <Manishearth> https://github.com/rust-lang/rust/issues/15523
[14:54:18] <doener> Manishearth: I know
[14:55:15] <doener> Manishearth: ever since the intrinsic landed I meant to look into the deriving stuff, but never found the time to actually do so
[14:57:04] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[14:57:23] <doener> arielb1: nope, rustc asserts
[14:57:37] <arielb1> asserts?
[14:57:52] <doener> thread 'rustc' panicked at 'assertion failed: `(left == right)` (left: `1`, right: `3`)', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostics/plugin.rs:150
[14:58:32] <doener> ... when trying to get the expanded code
[14:58:48] <arielb1> stack trace?
[14:59:17] <doener> https://gist.github.com/dotdash/33f63368bb2cc5fdcfb9
[15:03:29] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:08:07] <larsberg> Should I open an issue for a rustc ICE that occurs after printing out error messages? Getting - https://pastebin.mozilla.org/8832262
[15:22:02] <larsberg> Oh, nevermind, this is just related to the still-broken cross compilation issues on OSX with plugins; once it fails once, in subsequent builds you'll get an ICE.
[15:22:42] <Manishearth> doener: wait, *did* the intrinsic land?
[15:23:08] <Manishearth> doener: I take it we want to do:
[15:23:15] <Manishearth> fn eq(self, other)-> bool {
[15:23:17] <doener> Manishearth: yeah, in gh24270
[15:23:17] <[o__o]> Use discriminant_value intrinsic for derive(PartialOrd): https://github.com/rust-lang/rust/pull/24270
[15:23:34] <Manishearth>  if disr(self) != disr(other) { return}
[15:23:36] *** Joins: proc (proc@moz-if0e4v.dip0.t-ipconnect.de)
[15:23:45] <Manishearth>  /* old partialeq contents go here */
[15:23:47] <Manishearth> }
[15:23:48] <Manishearth> right?
[15:23:55] <Manishearth> Or is there a way of refining it further?
[15:24:07] <Manishearth> oh wait we did that too
[15:24:24] <doener> Manishearth: "return false;" but yeah, that's the first step
[15:24:56] <doener> Manishearth: importantly we need the discriminant without the cast that is currently present
[15:25:11] <Manishearth> as in?
[15:25:18] <Manishearth> what would you like to change, basically
[15:25:19] <Manishearth> ?
[15:25:30] <Manishearth> I understand some of the deriving code so I might be able to do it
[15:27:00] <Manishearth> oh, the expr_cast?
[15:27:23] <Manishearth> I don't get what's happening here, hmm
[15:27:33] <doener> Manishearth: https://gist.github.com/dotdash/4e98a455784ccead1b11
[15:28:08] <Manishearth> doener: so isn't that good?
[15:28:27] <doener> Manishearth: new.rs isn't what we have, I manually fixed that up
[15:28:31] <Manishearth> oh
[15:28:34] <Manishearth> so what do we have?
[15:28:34] <doener> Manishearth: it's what we _want_ to generate
[15:28:41] <doener> old.rs and old.s
[15:28:45] <Manishearth> ah
[15:28:57] <Manishearth> so what did https://github.com/rust-lang/rust/pull/24270/files do?
[15:29:24] <Manishearth> I'm not sure if I can find a way to generically use disr all over the place in derive, but I *can* use it for eq and ord
[15:29:35] <doener> nothing for PartialEq, and just a correctness fix for PartialOrd, nothing for performance
[15:29:46] <Manishearth> ah
[15:29:48] <Manishearth> I can do this
[15:30:24] <doener> Manishearth: note that I collapsed the individual match arms into a single arm with multiple patterns
[15:30:24] <Manishearth> doener: I could simply insert an if+return at the top of PEq and POrd
[15:30:35] <Manishearth> k
[15:30:46] <Manishearth> doener: I can't do that
[15:30:53] <doener> Manishearth: without that change, llvm can't get rid of the phi node and still creates a jump table with a number of identical entries :-(
[15:31:08] <Manishearth> I could do the returning thing. I might not fix binary size, but if it returns early we're halfway there
[15:31:14] <doener> well, "a number of" == "all entries are the same"
[15:31:25] <Manishearth> runtime speed wise
[15:32:11] <doener> Manishearth: early return, no casts on the discriminant and the unreachable intrinsic in the _ case already take us a long way
[15:32:36] <Manishearth> no casts on discriminant?
[15:32:55] <Manishearth> where are we casting?
[15:33:20] <doener> Manishearth: https://gist.github.com/dotdash/4e98a455784ccead1b11#file-old-rs-L86
[15:33:41] <Manishearth> what's wrong with as i32?
[15:33:58] <doener> Manishearth: in the given example the discriminant is a i64
[15:34:12] <Manishearth> ah
[15:34:18] <Manishearth> that doesn't sound good
[15:34:33] <doener> there's an issue open to always use i32 for the discriminant
[15:34:46] <doener> so I guess that cast was added in advance or something
[15:34:47] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:34:54] <Manishearth> hm
[15:35:09] <Manishearth> Anyway, I'll add early return. That's easy, and should be a good win
[15:36:12] <doener> Manishearth: https://gist.github.com/dotdash/4e98a455784ccead1b11#file-early-s
[15:36:22] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:36:31] <doener> Manishearth: early return + unreachable
[15:36:50] <Manishearth> I don't know how to do unreachable -- that needs mucking around in the internals
[15:38:16] <Manishearth> early return should be easy
[15:38:53] <doener> Manishearth: ok, and actually without the match structure change, the unreachable gives worse code
[15:39:07] <Manishearth> doener: you good at measuring rustc compile times?
[15:39:19] <Manishearth> I'd like to profile this change
[15:40:10] <doener> I can do some random non-scientific measurements and profiles
[15:40:23] *** Joins: ELD (textual@moz-tbcsac.co.comcast.net)
[15:40:40] <cmr> that's the best kind!
[15:40:41] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:41:07] <Manishearth> doener: awesome. I'll send over a patch in a few hours for you to nonscientifically poke at
[15:41:28] <doener> Manishearth: hm, can you make it not generate match arms for cases without substructs?
[15:42:03] <Manishearth> doener: no
[15:42:06] <Manishearth> that needs huon 
[15:42:25] * doener summons huon 
[15:42:30] <Manishearth> the match is generated by the ext::generic internals
[15:42:38] <Manishearth> I don't understand them well. huon does
[15:42:42] <Manishearth> I think
[15:42:46] <Manishearth> (I believe he wrote that)
[15:42:50] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[15:42:50] *** Quits: achernya (quassel@moz-8tbl8i.6686.inna.4830.2001.IP) (Connection closed)
[15:43:11] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[15:44:56] <Manishearth> Apparently Alfred Aho, who is teaching a class that one of my friends is taking, 
[15:45:06] <Manishearth> termed Rust as  "a language to watch out for"
[15:45:09] *** Joins: achernya (quassel@moz-8tbl8i.6686.inna.4830.2001.IP)
[15:53:15] *** Quits: untitaker (untitaker@moz-0lslvg.highway.telekom.at) (Ping timeout: 121 seconds)
[16:01:26] *** Joins: untitaker (untitaker@moz-0lslvg.highway.telekom.at)
[16:02:11] *** Quits: Guest63 (textual@moz-ttd.2as.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:02:32] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[16:04:46] *** Joins: Stebalien (Stebalien@moz-i00.hrk.38.73.IP)
[16:07:10] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[16:07:28] *** Quits: dinfuehr_ (dinfuehr@moz-3avimr.highway.telekom.at) (Connection closed)
[16:08:25] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:08:34] <Manishearth> doener: okay, what I was planning won't work because the usize is inside
[16:08:47] <Manishearth> sorry, the substructure output is inside the arm
[16:08:48] <Manishearth> hmm
[16:10:11] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[16:11:21] <Manishearth> with some modifications I could add a discriminant_check portion to the API, but that would seem hackish
[16:19:16] <bluss> https://github.com/rust-lang/rust/issues/25069 is a nice pathological case for type checking. How to find out what's really going on? I guess there must be some algorithmic factors
[16:24:04] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[16:26:47] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[16:27:06] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[16:28:04] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[16:32:36] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[16:33:26] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[16:33:29] *** Quits: jga (jga@moz-lmi.t1q.244.77.IP) (Ping timeout: 121 seconds)
[16:34:23] *** Joins: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net)
[16:36:07] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:36:29] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:36:36] *** Quits: ELD (textual@moz-tbcsac.co.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:36:41] *** Joins: ELD (textual@moz-tbcsac.co.comcast.net)
[16:37:00] *** Quits: ELD (textual@moz-tbcsac.co.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:40:19] *** Joins: srh (User@moz-j98h05.q9f2.utp8.0306.2602.IP)
[16:42:30] *** Joins: arielb1 (Ariel@moz-78pi5m.red.bezeqint.net)
[16:44:26] <doener> Manishearth: i.e. you can't do the early return?
[16:44:55] <Manishearth> doener: not without modifying deriving internals
[16:45:09] <Manishearth> well...
[16:45:10] <Manishearth> hm
[16:45:27] <Manishearth> nope
[16:53:05] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[16:55:03] *** Quits: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP) (Ping timeout: 121 seconds)
[16:55:23] *** Joins: squiggy (Mibbit@moz-juv.9o3.252.72.IP)
[17:05:33] <arielb1> the slow inflate.rs is >10kLOC
[17:05:35] <arielb1> when expanded
[17:11:05] *** Joins: Kxepal (Miranda@moz-383chs.pppoe.mtu-net.ru)
[17:12:09] <Manishearth> doener: I'm considering adding a "discriminant_callback" field
[17:12:12] <Manishearth> to MethodDef
[17:13:52] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:16:31] <doener> Manishearth: I'm still trying to get a picture of how this all works in my head
[17:16:46] <Manishearth> heh
[17:17:36] *** Quits: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net) (Connection closed)
[17:18:12] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[17:20:32] *** Quits: squiggy (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:22:19] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Ping timeout: 121 seconds)
[17:24:04] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[17:25:20] <doener> Manishearth: hmm, the interesting case is always the non-matching one, and there's already a case for it in the MethodDef
[17:26:41] <Manishearth> yeah
[17:28:45] *** Joins: japaric_ (japaric@moz-8v5.ipa.42.190.IP)
[17:29:10] *** Joins: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at)
[17:31:34] *** Quits: japaric (japaric@moz-1j4.n2c.236.190.IP) (Ping timeout: 121 seconds)
[17:38:12] *** Joins: ELD (textual@moz-tbcsac.co.comcast.net)
[17:38:55] *** zz_kimundi is now known as kimundi
[17:41:43] <doener> hrm, why is it starting at libcore..?
[17:41:52] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[17:43:46] <doener> wait, in which case are there multiple self arguments?
[17:46:19] *** Quits: ELD (textual@moz-tbcsac.co.comcast.net) (Ping timeout: 121 seconds)
[17:56:00] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Connection closed)
[17:56:53] <doener> oh, it's about the Self type, not literally "self"
[17:58:18] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[18:07:17] *** Quits: tamird (textual@moz-u20jfv.home.cgocable.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:07:39] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[18:09:26] *** Joins: Astrologos (n_i_l@moz-aiq731.access.hol.gr)
[18:14:35] *** Joins: dinfuehr_ (dinfuehr@moz-93v9f9.highway.telekom.at)
[18:17:12] *** Quits: dinfuehr (dinfuehr@moz-3avimr.highway.telekom.at) (Ping timeout: 121 seconds)
[18:21:07] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[18:22:15] <Manishearth> doener: perhaps we should write the PEq expander manually
[18:22:34] <Manishearth> instead of usung generic
[18:25:13] <doener> Manishearth: we want to have the disr check in partialord, too
[18:27:03] <Manishearth> doener: make it manual too :p
[18:27:33] <doener> Manishearth: I'm hoping the thing I'm compiling now works
[18:28:14] <Manishearth> coool
[18:28:16] <Manishearth> patch?
[18:28:49] <arielb1> is datum.ty of trans(bcx, expr) always expr_ty_adjusted(bcx, expr)?
[18:30:07] <Manishearth> doener: the | method in new.rs won't work for situations where the types or variant lengths are different btw
[18:31:08] <doener> Manishearth: yeah, that would need some code to group them intelligently
[18:31:11] <Manishearth> What we can do is sort variants by their contents, and use | for each
[18:31:23] <doener> yeah
[18:33:09] <doener> Manishearth: https://github.com/dotdash/rust/commit/918906df495f0cc71a5cfb3540426291a175a872 -- unfinished and with some hacky condition, but that's my current PoC
[18:33:58] <Manishearth> doener: and that gets us the early return and the | and the unreachable ?
[18:34:07] <doener> no!
[18:34:25] <Manishearth> aw
[18:34:33] <Manishearth> then?
[18:34:44] <doener> just the early return (if/else actually). The unreachable I'll add if this works, the grouping... maybe
[18:34:48] <doener> probably not though
[18:34:58] <doener> at least not today
[18:40:02] <Manishearth> doener: think that perhaps we should do PartialEq and PartialOrd as regular syntexts instead of using generic?
[18:40:13] <Manishearth> Or only using part of generic
[18:40:40] <Luqman> arielb1: um, probably?
[18:41:01] <arielb1> Luqman: I mean, it is also generally equals expr_ty
[18:41:02] *** Joins: sagg (sigg@moz-55rvi2.dclient.hispeed.ch)
[18:41:03] <Luqman> arielb1: actually, maybe not
[18:41:12] <arielb1> except when there are adjustments
[18:41:18] <arielb1> I want to know if there is some gotcha like that
[18:41:39] *** Joins: mib_cfwqbo (Mibbit@moz-juv.9o3.252.72.IP)
[18:42:37] <Luqman> arielb1: expr::apply_adjustments should be where the adjustments happen
[18:42:44] <arielb1> I know
[18:43:05] <Manishearth> what are "adjustments"?
[18:43:16] <arielb1> Manishearth: autoderef,autoref,unsie
[18:43:18] <arielb1> *unsize
[18:43:25] <arielb1> invisible expressions
[18:43:26] <Luqman> Manishearth: coercions basically
[18:44:27] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[18:44:57] <Luqman> Manishearth: for example `fn foo(x: &Trait) {}` if we call foo(&ConcreteObj), we'll store an adjustment for that and later in trans we do what's necessary to put it in the right form
[18:46:02] *** Quits: proc (proc@moz-if0e4v.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[18:46:54] <Manishearth> ah
[18:50:29] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[18:51:30] *** Quits: dinfuehr_ (dinfuehr@moz-93v9f9.highway.telekom.at) (Connection closed)
[18:51:51] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[18:55:32] *** Joins: Guest63 (textual@moz-ttd.2as.255.109.IP)
[18:55:53] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[19:01:41] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[19:02:28] *** Joins: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com)
[19:02:44] *** Quits: mib_cfwqbo (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:04:00] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[19:09:12] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[19:10:36] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[19:11:07] *** Quits: Kxepal (Miranda@moz-383chs.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[19:13:04] *** Joins: TheDan64 (Daniel@moz-d3g.e79.63.129.IP)
[19:17:17] *** Quits: rkruppe (chatzilla@moz-03ccga.diu2.0rth.0908.2a02.IP) (Ping timeout: 121 seconds)
[19:17:21] *** Joins: Kxepal (Miranda@moz-383chs.pppoe.mtu-net.ru)
[19:22:31] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[19:23:15] <doener> Manishearth: needed some fixes, but yeah, better codegen
[19:24:56] <doener> Manishearth: not sure if it's a good idea to ditch the generic stuff there.
[19:25:38] <Manishearth> doener: cool
[19:25:48] <Manishearth> doener: lets get some measurements on this :)
[19:25:52] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[19:29:52] <doener> Manishearth: waiting for stage2 to finish
[19:29:59] *** Quits: sagg (sigg@moz-55rvi2.dclient.hispeed.ch) (A TLS packet with unexpected length was received.)
[19:30:01] * doener needs a faster computer
[19:33:56] *** Quits: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net) (Quit: Screw you guys. I'm going home.)
[19:34:13] <doener> oh, guess this could have been done with a build without llvm assertions... 
[19:34:23] *** Joins: Murarth (Murarth@moz-nah.hnl.166.46.IP)
[19:36:09] *** Joins: ELD (textual@moz-tbcsac.co.comcast.net)
[19:38:37] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[19:39:31] *** Quits: Stebalien (Stebalien@moz-i00.hrk.38.73.IP) (Quit: leaving)
[19:40:17] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[19:45:02] *** Quits: semarie (semarie@moz-8lcthi.rev.poneytelecom.eu) (A TLS packet with unexpected length was received.)
[19:45:23] *** Quits: ELD (textual@moz-tbcsac.co.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:47:07] *** Joins: sigma (sigma@moz-q4lrf9.range86-130.btcentralplus.com)
[19:47:43] *** Quits: nerdopoly (nerdopoly@moz-ouaagf.range86-143.btcentralplus.com) (Ping timeout: 121 seconds)
[19:51:59] *** Joins: rkruppe (chatzilla@moz-1pt6ju.diu2.0rth.0908.2a02.IP)
[19:52:42] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[19:53:47] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[19:57:12] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[20:05:13] *** Quits: rkruppe (chatzilla@moz-1pt6ju.diu2.0rth.0908.2a02.IP) (Ping timeout: 121 seconds)
[20:06:28] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:06:44] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:11:41] *** Quits: sigma (sigma@moz-q4lrf9.range86-130.btcentralplus.com) (Ping timeout: 121 seconds)
[20:15:37] *** Joins: rkruppe (chatzilla@moz-3s78ia.diu2.0rth.0908.2a02.IP)
[20:16:02] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:17:23] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[20:19:29] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[20:29:16] *** Quits: rkruppe (chatzilla@moz-3s78ia.diu2.0rth.0908.2a02.IP) (Ping timeout: 121 seconds)
[20:35:20] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[20:39:52] *** Quits: ytain (ytain@moz-hut.ooe.161.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:46:51] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[20:50:10] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[20:51:23] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[20:58:07] *** Quits: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de) (Quit: Bye)
[20:58:34] *** Quits: Murarth (Murarth@moz-nah.hnl.166.46.IP) (Quit: I have come here to chew bubblegum and kick ass. And I'm all out of bubblegum.)
[20:58:53] *** Joins: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net)
[21:02:11] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[21:07:56] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[21:12:44] *** Quits: srh (User@moz-j98h05.q9f2.utp8.0306.2602.IP) (Quit: Leaving)
[21:15:19] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[21:15:48] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:18:39] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[21:19:04] <doener> Manishearth: oh... I forgot that we have no type information during expansion, so grouping can't work there
[21:21:55] <kmc> off topic, but I wrote a blog post about a neat software tool that should be more widely known: http://mainisusuallyafunction.blogspot.com/2015/05/modeling-garbage-collectors-with-alloy.html
[21:31:11] *** Joins: napoleon (Mibbit@moz-juv.9o3.252.72.IP)
[21:32:19] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:32:50] *** Quits: napoleon (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:33:06] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[21:37:44] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[21:40:57] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[21:45:12] *** Quits: arielb1 (Ariel@moz-78pi5m.red.bezeqint.net) (Quit: Ex-Chat)
[21:45:31] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[21:45:53] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Connection closed)
[21:51:14] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:52:07] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[21:52:14] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Connection closed)
[21:52:15] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[21:52:53] <bstrie> Manishearth: your blog post gave me an idea... what if we had a compiler mode where it just inserted all its own suggestions, compiled again, inserted its own suggestions, compiled again, etc. for some arbitrary depth of compilation?
[21:54:45] <Manishearth> bstrie: Oh, I've wanted that for a while
[21:54:55] <Manishearth> bstrie: my idea was different though
[21:55:27] <Manishearth> bstrie: the idea was to take any error that can be fixed. say, unused_import
[21:55:34] <Manishearth> and when reporting it, report it with a marker
[21:55:44] <Manishearth> when the spanhandler picks up the marker, it knows how to fix each one
[21:55:57] <Manishearth> so an unused_import can just be removed (modulo reformatting)
[21:56:03] <Manishearth> etc etc
[21:56:27] <Manishearth> it was mostly to clean code, but it could be used to fixed-point compile rust programs too
[21:56:53] <Manishearth> If you want to make this happen, I'm in :)
[21:59:02] *** Joins: sigma (sigma@moz-q4lrf9.range86-130.btcentralplus.com)
[22:02:59] <doener> Manishearth: any idea what we could do about joining the match arms?
[22:03:04] *** Quits: sigma (sigma@moz-q4lrf9.range86-130.btcentralplus.com) (Ping timeout: 121 seconds)
[22:03:12] <doener> Manishearth: short of doing it somewhere in _match.rs?
[22:04:32] *** Quits: marsel (user@moz-i1v.2qu.180.94.IP) (Ping timeout: 121 seconds)
[22:08:47] *** Quits: eibwen (eibwen@moz-itogl2.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:09:20] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[22:11:12] *** kimundi is now known as zz_kimundi
[22:11:17] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[22:12:01] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[22:15:08] <Manishearth> doener: no clue
[22:17:53] *** Quits: erz (erz@moz-efrhus.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:19:01] <bstrie> Manishearth: the import warning thing sounds like goimport, which is something that you want to happen automatically (and is also redundant with #[allow])
[22:19:21] <bstrie> Manishearth: I figure that this mode I'm talking about would only happen when you ask it to. like, I introduce a lifetime somewhere, then ask the compiler to make it work
[22:19:30] <bstrie> I wouldn't want the compiler *always* trying to make things work
[22:19:57] <bstrie> cargo make-it-work
[22:20:07] <doener> Manishearth: speed up for compiling libcore and libsyntax seems to be somewhere between 1 and 2%
[22:20:13] <Manishearth> doener: +1
[22:20:17] <Manishearth> that's still good
[22:20:46] <Manishearth> bstrie: sure, but basically there are things that the ocmpiler can try to fix for you. Lifetimes are one, imports are another
[22:21:15] <doener> Manishearth: I suppose I'll have to enter match territory for the remaining problems :-/
[22:22:10] <Manishearth> And if we added an internal API which signals a FixIt enum (FixIt::Import(Span, ItemImport, ..), FixIt::BorrowFn(FnDecl, FnDecl, Span, String), ...) we would have an extendable internal API for doing these things
[22:22:18] <doener> or maybe...
[22:22:36] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:24:48] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[22:24:58] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[22:27:20] <bstrie> Manishearth: imports aren't a problem like they are in go because 1) they're not an error and 2) we don't make you import anything to do debug printing
[22:27:48] <bstrie> and 3) because we have #[allow] anyway
[22:28:25] <Manishearth> bstrie: no I mean that in the future we may have more things for rust to fix
[22:28:30] <Manishearth> my net will cut out for the next 10m
[22:28:54] <bstrie> as your capsule passes around the dark side of the moon?
[22:28:58] <Manishearth> yes
[22:29:03] <bstrie> godspeed
[22:34:59] <kmc> there is no dark side of the moon really
[22:35:02] <kmc> matter of fact it's all dark
[22:35:13] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[22:35:15] *** Joins: arielb1 (Ariel@moz-78pi5m.red.bezeqint.net)
[22:35:22] *** Quits: arielb1 (Ariel@moz-78pi5m.red.bezeqint.net) (Quit: Ex-Chat)
[22:39:41] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[22:40:41] <Manishearth> back
[22:41:21] *** Joins: Skyler (Skyler@moz-dgl2bi.fios.verizon.net)
[22:42:17] <Manishearth> bstrie: So basically my idea was that we modify rustc so that it can emit "fix" messages. These, when caught by whoever (the Session I guess), can be, if the flags are correctly passed, used to edit the code and loop back until things fix themselves
[22:42:31] <Manishearth> The major use case is borrowck  fixes
[22:43:04] <Manishearth> but an alternate use case is imports and other minor fixy thingies
[22:43:38] <Manishearth> for imports and all I had started work on a goimports style thing, but for borrowck we need internal compiler support
[22:43:51] <Manishearth> OR cargo support which parses the output and uses ut
[22:43:52] <Manishearth> *it
[22:44:21] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (A TLS packet with unexpected length was received.)
[22:44:39] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[22:49:25] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (Ping timeout: 121 seconds)
[22:50:18] <Manishearth> but yeah, we can focus on borrowck bugs first
[22:51:20] <doener> Manishearth: hm, this is curious... using "let ret = match ... { ... }; ret" instead of just "match ... { ... }" leads to massively better code for #[derive(Clone)] for the test enum I've been using
[22:51:32] <Manishearth> wha
[22:51:46] <Manishearth> so, did that somehow avoid a move?
[22:52:01] <Manishearth> you mean the asm I assume
[22:52:10] <doener> Manishearth: and by "massively" I mean "so much better it's not even funny" -- https://gist.github.com/dotdash/40538e342372cdfd0131
[22:52:54] <Manishearth> ...what
[22:53:00] <Manishearth> go home llvm, you're drunk
[22:53:02] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[22:53:30] <doener> I'll have to investigate that some other time though... 1am and I need to work tomorrow
[22:54:00] <Manishearth> k
[22:57:08] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (Connection closed)
[22:57:13] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[22:59:49] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[23:00:11] <doener> Manishearth: ok, got curios, and it's SROA that does the necessary optimization, and that most likely only works on allocas, not on sret slots.
[23:00:19] *** Joins: Stebalien (Stebalien@moz-l6q.u0c.245.50.IP)
[23:01:27] <doener> Luqman: ping
[23:02:00] *** Joins: jga (jga@moz-a3p.t1q.244.77.IP)
[23:03:05] <doener> Luqman: gnip, misread what that commit did
[23:03:15] <huon> doener: I'm summoned?
[23:04:40] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[23:04:50] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[23:05:25] <doener> huon: Manishearth and me were looking into improving the codegen for #[derive(...)] and Manishearth said you were required for that ;-)
[23:05:26] <Manishearth> huon: doener's trying to awesomeify #[derive], especially PartialEq and PartialOrd, to use intrinsics and to use better match statements
[23:05:32] <Manishearth> yeah, that
[23:08:50] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[23:12:28] <bluss> huon: op in #rust
[23:12:33] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[23:13:46] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[23:16:51] <doener> Manishearth: yes! Putting an alloca in there and copying it to the out-pointer at the end instead of writing to the out pointer directly gives the improved code
[23:17:10] <doener> Manishearth: that should probably help in other places, too
[23:17:40] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[23:19:00] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:21:17] *** Joins: ELD (textual@moz-tbcsac.co.comcast.net)
[23:21:28] <bluss> doener: your hashmap inlining fix should help with rustc performance too, right?
[23:22:49] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Connection closed)
[23:22:53] <doener> bluss: yes, I don't recall the exact numbers, but for the test case here: https://github.com/rust-lang/rust/issues/25069 -- it reduced the type checking phase from ~15s to ~13s
[23:23:00] <doener> bluss: something in that ballpark
[23:23:08] *** Quits: Guest63 (textual@moz-ttd.2as.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:23:20] <bluss> ok nice
[23:23:33] <bluss> but it's not the only issue :)
[23:24:03] <doener> I just grabbed a random thing to test it
[23:32:02] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[23:36:45] *** Joins: njn (chatzilla@moz-7npk8s.iinet.net.au)
[23:41:57] *** Quits: aepsil0n (eduard@moz-ob9p8k.hsi8.kabel-badenwuerttemberg.de) (Connection closed)
[23:41:59] *** Joins: c74d3 (c74d3a4ebb6@moz-vhi6o8.mggc.hibn.4404.2002.IP)
[23:42:05] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[23:43:21] *** c74d3 is now known as c74d
[23:47:01] *** Joins: aatch (james@moz-ciignl.bmm3.j08e.e000.2406.IP)
[23:48:43] *** Joins: tamird (textual@moz-5g7.ska.226.209.IP)
[23:48:43] *** Quits: tamird (textual@moz-5g7.ska.226.209.IP) (Connection closed)
[23:55:40] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
