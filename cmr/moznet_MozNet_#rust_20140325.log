[00:00:49] *** Joins: carllerche (carllerche@moz-F43E6AFB.hfc.comcastbusiness.net)
[00:01:08] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[00:02:47] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[00:02:56] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[00:03:13] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:03:35] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[00:06:27] *** Quits: eibwen (kvirc@moz-A1C6347E.dip0.t-ipconnect.de) (Ping timeout)
[00:06:27] *** Quits: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[00:06:29] <eddyb> andor, kimundi: keep in mind that modules and types are separated namespaces, so you can have both a typedef and a module
[00:06:56] *** Quits: mib_78e4g3 (Mibbit@moz-7AD9232F.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:06:59] <eddyb> andor, kimundi: you can't have Foo::<T> where Foo is a module, but most of the type you shouldn't need it
[00:08:56] <andor> kimundi: dang... and is it not going to be possible in the future, either?
[00:09:01] <andor> oops, sorry, wrong terminal
[00:09:59] <andor> okay, what the hell... i'm trying to match over a hashmap.find(), where my hashmap is <~str, ~str>
[00:10:43] <andor> if i write Some("foo"), it says it expects a Some(&~str) instead of... the static stuff
[00:10:50] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[00:10:50] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:10:59] <strcat> andor: find gives Option<&V>
[00:11:01] <strcat> V is ~str
[00:11:09] *** Quits: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP) (Ping timeout)
[00:11:10] <andor> if i write Some(&~"foo") it tells me it expects ~str instead of ~-box pattern
[00:11:32] <cmr> you can't match against ~str
[00:11:47] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:11:48] <TheHydroImpulse> Is the `#![feature(phase)]` && `#[phase(syntax)] extern crate foo` staying for the long haul? It seems pretty awkward
[00:11:55] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[00:11:58] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[00:12:06] <andor> whaaat? :( do i just do ifs then?
[00:12:07] <cmr> TheHydroImpulse: probably. why?
[00:12:22] *** Joins: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP)
[00:12:22] <strcat> andor: for now
[00:12:27] <cmr> andor: you can do .map(|x| x.as_slice()) and then match on that...
[00:13:14] <TheHydroImpulse> cmr Just wondering. Trying out the syntax extension stuff and it seems like getting people to write that stuff out is just a little extra noise.
[00:13:20] <TheHydroImpulse> not a huge deal though
[00:13:47] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[00:13:56] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[00:14:13] <steven_is_false> Does anyone have any tips for building Rust quickly? I'll add them to the wiki https://github.com/mozilla/rust/wiki/Note-build-system 
[00:14:30] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[00:14:32] <steven_is_false> First tip, is probably use an SSD which is fast.
[00:14:40] <cmr> --enable-ccache for llvm
[00:14:42] <strcat> steven_is_false: won't make much of a difference
[00:14:49] <cmr> rust is nowehere near disk bound
[00:15:34] <strcat> make -j# where # is the number of cores
[00:15:34] <steven_is_false> cmr strcat Oh, okay. Most of it is spend in LLVM right?
[00:15:36] <cmr> there's really no magic to make the build go fast :\
[00:15:53] <strcat> steven_is_false: if you're building LLVM, rather than doing a second build
[00:16:06] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[00:16:17] <steven_is_false> strcat: No, what I meant is, is that I thought that LLVM was taking most of the compile time.
[00:16:29] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[00:16:41] <strcat> steven_is_false: it does, but you won't be rebuilding LLVM much if you're following master
[00:17:01] <steven_is_false> No I meant the LLVM code in the Rust compiler not building the LLVM code itself
[00:17:17] <strcat> oh
[00:17:24] <andor> cmr: except i have a hashmap, not a vector, and secondly, i only want one of them, not all
[00:17:28] <strcat> yes, in optimized builds 90% is spent in LLVM passes
[00:17:31] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Client exited)
[00:17:33] <cmr> andor: map is a method on Option
[00:17:45] <andor> cmr: ah, okay, cool
[00:17:50] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[00:18:03] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:18:18] <steven_is_false> strcat: Well, at least GCC wasn't picked as the backend. Then we'd spend EVEN MORE time compiling.
[00:18:20] <doy> is there a way to format arbitrary expressions these days
[00:18:22] <strcat> but that takes so long because rustc still isn't great at generating IR, and the libraries aren't written with compile-time in mind
[00:18:23] <tiffany> howcome you can't use an existing version of rustc to build a new rustc?
[00:18:37] <strcat> steven_is_false: yeah, maybe 50% more time ;p
[00:18:44] <cmr> tiffany: it targets a very specific version of rust / stdlib.
[00:18:49] <cmr> tiffany: for stage0
[00:18:52] <strcat> tiffany: you do, that's what the snapshot is
[00:19:04] <tiffany> strcat: I mean the one that's installed on my system
[00:19:07] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[00:19:23] <strcat> tiffany: the specific version requested in snapshots.txt is required
[00:19:28] <strcat> unlikely you have that
[00:20:10] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[00:20:13] <steven_is_false> tiffany: There's an option to do that but it can break the build (--enable-local-rust)
[00:20:31] <tiffany> I'm guessing once we hit 1.0 the compiler will be retargeted for 1.0?
[00:20:49] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Ping timeout)
[00:21:07] <strcat> tiffany: doubt it
[00:21:08] <cmr> probably not tbh
[00:21:13] <strcat> I expect that it will keep following master forever
[00:21:28] <strcat> if a new feature is added, not being able to use it in the stdlib, etc. would be annoying
[00:21:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:22:00] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[00:22:01] <tiffany> I just think it's nice that I can easily build gcc or llvm if I already have a working C++ compiler
[00:22:17] *** Joins: twi (Adium@moz-7814ED81.cust.vodafonedsl.it)
[00:22:17] <cmr> C and C++ are languages which have been around in stable form for decades
[00:22:46] <steven_is_false> tiffany: I can't. The latest Clang requires C++11 features not around in really stable distros.
[00:22:52] <cmr> and you can't compile llvm with a 5 year old compiler
[00:22:54] <tiffany> huh
[00:22:54] <cmr> etc
[00:23:11] <strcat> tiffany: it's not the default though
[00:23:13] <strcat> tiffany: http://gcc.gnu.org/install/build.html
[00:23:16] <strcat> For a native build, the default configuration is to perform a 3-stage bootstrap of the compiler when ‘make’ is invoked. This will build the entire GCC system and ensure that it compiles itself correctly. It can be disabled with the --disable-bootstrap parameter to ‘configure’, but bootstrapping is suggested because the compiler will be tested more completely and could also have better
[00:23:18] <strcat> performance.
[00:23:19] <tiffany> well, I guess it used to be that awy before they switched to C++11?
[00:23:24] <tiffany> oh
[00:24:02] <tiffany> I guess I just have an unattainable ideal then
[00:24:20] <strcat> I think the ideal is that it builds itself
[00:24:59] <strcat> otherwise any old performance/codegen bugs are still an issue
[00:25:21] <doomlord_> whats the closest anyone is to a program written in rust useful to someone other than a rust programmer (servo?)
[00:25:42] *** Quits: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:25:49] <dsrx> sprocketnes?
[00:25:53] <doomlord_> i guess thats an unfair question pre 1.0
[00:25:56] <cmr> doomlord_: http://skylight.io/ perhaps?
[00:26:05] <tiffany> uhh, does the program itself have to count?
[00:26:10] <tiffany> I wrote a program which generates a pretty skybox
[00:26:35] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:26:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:26:40] *** flaper87 is now known as flaper87|afk
[00:26:49] <tiffany> the skybox is saved as 6 enormous png files in the demo for my game engine, which is definitely outside of rust but of doubtful utility to someone other than me
[00:27:06] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:27:07] *** Quits: leowoe (Leo@moz-D5256331.dip0.t-ipconnect.de) (Quit: Leaving.)
[00:27:22] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[00:27:29] *** Joins: richo (richo@D17E0CCC.D34B46.354B30E7.IP)
[00:27:41] <mcpherrin> doomlord_: I use a Rust program to control my lights
[00:27:43] <mcpherrin> :-P
[00:27:57] <mcpherrin> doomlord_: OpenDNS is supposedly using Rust in production
[00:28:05] *** Quits: twi (Adium@moz-7814ED81.cust.vodafonedsl.it) (Quit: Leaving.)
[00:28:06] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[00:28:55] <TheHydroImpulse> doomlord_ I’m using Rust for distributed systems within my company. Still early though
[00:28:56] *** Joins: twi (Adium@moz-7814ED81.cust.vodafonedsl.it)
[00:28:58] <kemurphy> what's the deal with https://github.com/mozilla/rust/pull/13037 (the new attribute syntax)?
[00:29:20] *** Quits: richo (richo@D17E0CCC.D34B46.354B30E7.IP) (Ping timeout)
[00:29:34] <mcpherrin> kemurphy: the old version was way too subtle in how inner vs outer attributes looked
[00:29:39] *** Quits: twi (Adium@moz-7814ED81.cust.vodafonedsl.it) (Quit: Leaving.)
[00:30:01] *** Quits: carllerche (carllerche@moz-F43E6AFB.hfc.comcastbusiness.net) (Quit: carllerche)
[00:30:04] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[00:30:09] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[00:30:21] <kemurphy> so wait, there's now a difference between them?
[00:30:29] <cmr> there always was.
[00:30:37] <kemurphy> i mean, right
[00:30:38] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[00:30:42] <kemurphy> but syntactically
[00:30:45] <mcpherrin> mod foo { ATTRIBUTE mod bar{ ATTR2} }
[00:30:46] <kemurphy> more than a trailing ; anyway
[00:30:59] <mcpherrin> the trailing ; on ATTRIBUTE makes it apply to foo instead of bar
[00:31:07] <kemurphy> right
[00:31:11] <mcpherrin> changed to a leading ! instead
[00:31:14] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[00:31:21] <kemurphy> with no ; ?
[00:31:33] <mcpherrin> yeah no more ; on attributes
[00:31:52] <kemurphy> hm, well okay
[00:31:56] <kemurphy> thanks!
[00:32:09] <andor> i have an ungly monster like this:
[00:32:11] <andor> reader.read_until(0).map(|b| std::str::from_utf8(b.init())).unwrap().expect("Invalid header name string")
[00:32:15] <andor> which yields a &str
[00:32:24] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[00:32:28] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[00:32:32] <andor> but how do i turn that into a ~str? doing clone() on it tells me it doesn't live long enough
[00:32:33] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[00:32:41] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[00:32:48] <kemurphy> .to_owned, maybe?
[00:32:50] <cmr> andor: .to_owned_str()
[00:32:53] <andor> err, to_owned, not clone
[00:32:56] <cmr> err, just to_owned
[00:33:08] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:33:11] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[00:33:15] <cmr> andor: store it in a temporary and call to_owned on that?
[00:33:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[00:33:37] <kemurphy> rustc should really be doing that behind the scenes -- is a fix planned for that?
[00:33:49] <andor> cmr: yeah, that's what i'm trying to factor out
[00:33:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:33:57] <cmr> kemurphy: it should be.
[00:34:06] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[00:34:08] <cmr> most of the usability issues with rvalue lifetimes were fixed.
[00:34:27] <kemurphy> right, that was fantastic
[00:34:33] <kemurphy> istr there were still a few bugs to work out though
[00:34:35] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:34:47] <andor> cmr, did: reader.read_until(0).map(|b| std::str::from_utf8(b.init()).expect("Invalid header name string").to_owned()).unwrap();
[00:34:53] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[00:35:37] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[00:35:48] <SiegeLord> Wait, attributes changed?
[00:35:56] <SiegeLord> To just #![]?
[00:35:58] <cmr> SiegeLord: #![foo] is now supported.
[00:36:02] <cmr> #[foo]; isn't removed yet
[00:36:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:36:19] <SiegeLord> Is that the end variant? I recall something akin to #^[] or w/e
[00:36:23] <SiegeLord> *final variant
[00:36:27] <cmr> as of now, yes.
[00:36:42] <mcpherrin> We should make it configurable at compile-time ;)
[00:36:44] <SiegeLord> And doc comments will stay /*! then
[00:36:49] <cmr> mhm
[00:36:52] <mcpherrin> rustc --attr-sigil=^
[00:37:06] <SiegeLord> Makes my life easier, heh... won't need to change the syntax highlighting XD
[00:37:10] <kemurphy> i will personally miss the trailing semicolon
[00:37:16] <kemurphy> i was probably one of the only people that liked it
[00:37:35] <kemurphy> i would settle for #![foo]; though
[00:37:38] <kemurphy> :P
[00:37:41] <steven_is_false> Hmm, --save-temps doesn't seem to work anymore. What's the latest way to see LLVM output from Rust?
[00:37:49] <mcpherrin> --emit=ir
[00:38:04] <cmr> steven_is_false: -C save-temps
[00:38:09] <steven_is_false> mcpherrin: Thanks! I'll go fix it in https://github.com/mozilla/rust/wiki/Note-seeing-LLVM-output-from-rust as well.
[00:38:12] <cmr> steven_is_false: all options related to codegen + output are now under -C
[00:38:50] <steven_is_false> cmr: I tried -C help before but --emit=ir is what worked.
[00:39:02] <cmr> sure, that emits ir
[00:39:05] *** Joins: hjr3 (hradtke@moz-459DA125.ptld.qwest.net)
[00:39:19] <mcpherrin> well --emit=ir and -C save-temps aren't exactly the same, depends what you want
[00:42:50] *** Quits: azakai (alon@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[00:43:21] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[00:44:22] *** kimundi is now known as zz_kimundi
[00:44:51] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:44:55] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[00:46:18] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[00:46:50] <steven_is_false> When will we get Rust code highlighting for pastebin.mozilla.org?
[00:48:03] <steven_is_false> I'll see if I can get that fixed myself.
[00:48:16] *** Joins: derek_c (derek@moz-8CB566B5.cit.cornell.edu)
[00:48:34] <mcpherrin> steven_is_false: well you could add support to the code and figure out who in mozilla you need to poke
[00:48:39] <mcpherrin> https://github.com/lordelph/pastebin
[00:48:48] *** Quits: Denommus (user@7ACE3361.B4C8460.B9657DD5.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[00:48:50] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:49:19] <steven_is_false> mcpherrin: Thanks!
[00:49:34] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Ping timeout)
[00:49:38] <mcpherrin> there's probably? a bugzilla component for pastebin
[00:49:46] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Ping timeout)
[00:49:56] <mcpherrin> if not assign to somebody random and CC as many important people as it takes to get reassigned properly ;)
[00:50:06] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[00:50:08] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[00:50:08] *** ChanServ sets mode: +o tjc
[00:50:15] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:50:36] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:50:39] <steven_is_false> ;)
[00:50:51] *** ChrisMorgan is now known as ChrisServ
[00:51:06] *** ChrisServ is now known as ChrisMorgan
[00:51:24] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Client exited)
[00:51:50] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Ping timeout)
[00:52:09] *** ChrisMorgan is now known as IRCMonkey38618
[00:52:17] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:53:29] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[00:53:33] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[00:53:48] <steven_is_false> Annoying thing, http://pastebin.mozilla.org/pastebin.tar.gz is a dead link.
[00:53:54] <steven_is_false> Now I can
[00:54:03] <steven_is_false> 't easily tell what version is running
[00:54:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[00:54:44] *** Quits: joone (joone@moz-C0B99C91.jf.intel.com) (Ping timeout)
[00:55:22] <steven_is_false> So it appears pastebin uses GeSHi as it's highlighter http://qbnz.com/highlighter/
[00:55:43] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Ping timeout)
[00:55:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:56:04] *** Joins: joone (joone@moz-8E88FB0F.jf.intel.com)
[00:56:34] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:56:45] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[00:56:51] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[00:57:07] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Client exited)
[00:57:20] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[00:57:30] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[00:57:30] <o11c> steven_is_false: somewhat relevant: https://bugzilla.mozilla.org/show_bug.cgi?id=952469
[00:57:53] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:58:11] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[00:58:13] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:58:24] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[00:58:34] *** Parts: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) ()
[00:59:00] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:59:27] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:00:53] *** Quits: apollow (yellowy432@B668B53A.C253D4DF.4C3B1D9.IP) (Ping timeout)
[01:01:20] <steven_is_false> o11c: That is relevant. Hooray it supports rust.
[01:04:18] *** Joins: espindola (espindola@moz-BB113AD2.cr.net.cable.rogers.com)
[01:05:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:05:16] <steven_is_false> Anyways, I was looking at the LLVM code for hello world (see https://dpaste.de/FCpd#L ) and I have to wonder, why are there declarations for a bunch of primitives?
[01:05:16] *** Quits: espindola (espindola@moz-BB113AD2.cr.net.cable.rogers.com) (Input/output error)
[01:06:36] <strcat> steven_is_false: you mean the intrinsics like bswap?
[01:06:53] <steven_is_false> strcat: yes and memcpy and memset
[01:07:09] <steven_is_false> But those are reasonable. cos sqrt and such seem less so.
[01:07:23] <strcat> steven_is_false: https://github.com/mozilla/rust/issues/11926
[01:07:34] <strcat> steven_is_false: they're never unreasonable to declare
[01:07:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:07:39] <steven_is_false> Fair enough then.
[01:07:40] <strcat> although it would be better to do it lazily
[01:08:19] <aatch> steven_is_false, they get culled during optimization too.
[01:08:31] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140314220517])
[01:09:40] <steven_is_false> strcat: One can't declare an LLVM intrinsic like an external C function in Rust right?
[01:10:22] <o11c> steven_is_false: "." is not a valid character in identifiers ...
[01:10:30] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[01:10:36] <steven_is_false> o11c: #[link(name = "foo")]
[01:10:54] <o11c> ooh
[01:11:24] <aatch> steven_is_false, you can.
[01:11:42] <aatch> I'm pretty sure I've seen people do it.
[01:11:51] <steven_is_false> aatch: Then can't https://github.com/mozilla/rust/issues/11926 be solved by reusing that?
[01:11:59] *** Joins: aurynj (Eon@B3D9F3A9.6EA7AEE4.364694FC.IP)
[01:12:06] <strcat> steven_is_false: you can
[01:12:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:12:38] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:12:44] <aatch> steven_is_false, you can, but emitting lazily is better.
[01:13:11] <aatch> Especially if we start emitting arch-specific intrinsics, which I want to do for some SIMD stuff.
[01:13:13] <steven_is_false> aatch But doesn't Rust automatically handle that for you with declarations?
[01:13:26] <aatch> steven_is_false, no, it'll emit the declarations anyway.
[01:13:33] <aatch> because it saw them.
[01:13:48] <steven_is_false> aatch Should it?
[01:13:49] *** Quits: mye (mye@moz-99055859.dip0.t-ipconnect.de) (Quit: So long, and thanks for all the fish!)
[01:13:52] <aatch> It also adds to the size of whatever library declares them all.
[01:14:11] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[01:14:32] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:15:05] *** Joins: neopara (neopara@B3AA7BA8.D6CCE4AE.77834EAA.IP)
[01:15:39] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[01:15:56] <aatch> steven_is_false, well in a library, if you have `extern { pub fn foo(...); }` then it has to emit the definition because it might get used by another binary
[01:15:57] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:16:23] <aatch> steven_is_false, it's not too hard to emit them lazily, just not high on anybody's list.
[01:16:31] <steven_is_false> aatch Fair enough
[01:16:44] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:17:04] <strcat> the LLVM intrinsics it emits use a hard-coded list
[01:17:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:17:12] <strcat> it just needs to be changed to emit them when they're requested
[01:17:14] <strcat> it would be easy
[01:17:45] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:18:13] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:19:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:19:59] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:20:27] *** eatkinson-away is now known as eatkinson
[01:20:30] <o11c> might be easier to delete them when they have a usecount of 0
[01:20:48] <aatch> o11c, theres an LLVM pass that does that
[01:21:02] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[01:21:11] <aatch> prune-unused-decls or something like that
[01:21:39] *** Quits: onelson (owen@moz-DD666EC5.laika.com) (Quit: Leaving)
[01:21:47] <steven_is_false> So there are two unconditional branches that are generated in the simple hello world program (one at the start and one at the exit)
[01:22:01] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[01:22:26] <aatch> steven_is_false, yes, we have an entry block for allocas
[01:22:55] <steven_is_false> aatch okay
[01:23:27] <aatch> it helps LLVM at codegen time. To be honest, for unoptimized IR, hello world is looking pretty damn good.
[01:23:46] <steven_is_false> aatch: So they are the { and } braces of the allocation?
[01:24:08] <aatch> steven_is_false, I'm not sure what you mean.
[01:24:24] <steven_is_false> aatch You said you generate a sort of block for alloca.
[01:24:48] <steven_is_false> and it sort of sounded like the branches delimit it
[01:25:13] <aatch> steven_is_false, at this level, it's useful to think of code as a series of blocks, you have to jump to move from one block to another.
[01:26:00] <steven_is_false> aatch Right so it's like the { and } in { let x : int; ... }
[01:26:01] <aatch> the thing is, it's easier for us to insert a block at the top of the function, push alloca's into it as we need them during codegen
[01:26:10] *** Quits: diodesign (diodesign@moz-498DA4AB.pepperfish.net) (Ping timeout)
[01:26:10] <aatch> and then link the branches together later.
[01:26:26] <aatch> steven_is_false, kinda, but lower-level
[01:26:35] <steven_is_false> aatch Fair enough
[01:26:41] <Zor> you should probably read the llvm ir reference
[01:26:45] <Zor> if you care about stuff at this level
[01:26:56] <aatch> LLVM IR is pretty much assembly, so a jump is like a goto.
[01:27:08] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[01:27:21] <aatch> But unlike assembly, all blocks have to be jumped into
[01:27:28] <aatch> and out of.
[01:27:30] <steven_is_false> Zor: aatch is talking about a particular kind of compilation scheme not the details of the instruction set being compiled to itself. 
[01:27:58] <Zor> basic blocks are a feature of the ir
[01:28:28] <aatch> so if you have `if cond { ... } else { ... }`, there will be at least 4 blocks.
[01:28:56] <aatch> 1 before the if/else, 1 after and two blocks for the actual Rust-level blocks
[01:29:27] *** Quits: nkoep (nik@moz-225B6993.pool.mediaways.net) (Ping timeout)
[01:29:34] <aatch> both the end of the if block and the end of the else block will have unconditional jumps into the block after it.
[01:29:59] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[01:30:31] <aatch> even though the actual generated assembly will only have 1 unconditional jump
[01:30:35] <steven_is_false> "Each basic block may optionally start with a label"
[01:30:42] <steven_is_false> aatch of course it'll be optimized
[01:31:09] *** Quits: neopara (neopara@B3AA7BA8.D6CCE4AE.77834EAA.IP) (Quit: )
[01:31:26] <andor> can i get some general style comments on this please? https://github.com/andor44/scgi.rs/blob/master/scgi.rs
[01:31:30] *** Quits: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net) (Quit: gas leak)
[01:31:31] *** Quits: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net) (Ping timeout)
[01:31:35] <steven_is_false> anyways I'll believe you that hello world is pretty well optimized
[01:31:47] <aatch> steven_is_false, it's not that it's optimized, it just fairly clean.
[01:31:58] *** Joins: mib_phnbyc (Mibbit@9DE978F7.90DDB0CB.CC1A2609.IP)
[01:32:10] <aatch> We used to output 10x that much IR, much of it useless, not long ago.
[01:32:16] <steven_is_false> I know we have benchmarks for code that should be fast, maybe we should have benchmarks for code that should compile fast?
[01:32:38] <strcat> aatch: we do output *way* more than we should when using -Z lto though, since it uses too much via calls
[01:32:46] <strcat> much better than it used to be
[01:33:06] <strcat> it's down to 400K now, should be ~10K
[01:33:10] <strcat> but before it was 2MiB+
[01:34:00] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[01:34:01] *** Joins: nkoep (nik@moz-92D88814.pool.mediaways.net)
[01:34:08] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[01:34:30] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[01:34:53] *** Quits: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net) (Ping timeout)
[01:35:22] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[01:37:11] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[01:37:17] <aatch> andor, so first thing, instead of using magic numbers, you can do `'c' as u8`
[01:37:28] *** Quits: hjr3 (hradtke@moz-459DA125.ptld.qwest.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:37:45] <andor> aatch: those magic numbers are expected, so they're not-so-magic
[01:38:09] <aatch> Secondly, why do you read through the headers twice!
[01:38:39] <andor> first it's request headers, then it's response
[01:38:53] *** Quits: mib_phnbyc (Mibbit@9DE978F7.90DDB0CB.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:38:57] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:39:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:39:10] <andor> i read the request headers from the scgi client, then the response headers are passed back to the processing, and i send back those
[01:39:54] <steven_is_false> andor: My criticisms are here: https://dpaste.de/3oEK#L6
[01:40:56] <andor> i meant more like rustic idioms, not code formatting, but thanks for the input
[01:41:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:42:32] <aatch> andor, how familiar are you with functional programming?
[01:43:19] <andor> and .expect() doesn't really apply, since it returns an IoResult, which is a Result, that doesn't have expect()
[01:43:30] <andor> aatch: that depends, why
[01:44:16] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:45:17] <aatch> andor, not sure, I had a thought that went nowhere
[01:45:22] *** Quits: IanCormac84 (User@7B004C66.64D641E5.67DFF8B4.IP) (Ping timeout)
[01:45:36] *** Joins: diodesign (diodesign@moz-498DA4AB.pepperfish.net)
[01:45:49] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:46:13] <aatch> Oh, I do have one thing, I'm not sure if you have to to clone the stream when passing it into the proc
[01:46:40] *** Joins: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP)
[01:46:50] <andor> hmm, that's right
[01:47:46] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[01:47:49] <andor> i think what i had in mind is having another channel inside the proc that sends back Some(error) in case of an error, so i can write some things to the stream if an error occurs, and the stream would've been moved into the proc otherwise
[01:48:15] *** Joins: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net)
[01:48:51] *** Joins: mib_c7pmz1 (Mibbit@moz-EE189C4B.dc.dc.cox.net)
[01:49:09] *** Quits: mib_c7pmz1 (Mibbit@moz-EE189C4B.dc.dc.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:50:40] *** Joins: lord (lord@EBD3E2E9.9E48596C.68F5EADC.IP)
[01:51:04] *** Quits: echristo (echristo@CEE37253.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[01:51:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:52:18] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[01:52:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:52:54] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[01:53:07] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[01:53:47] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[01:54:16] *** Quits: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP) (Ping timeout)
[01:54:27] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[01:55:01] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:57:38] *** Joins: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP)
[01:59:38] <steven_is_false> So what are the worst areas of code generation today (in terms of volume of LLVM IR spat out)?
[02:00:01] <strcat> most parts aren't great
[02:00:23] <steven_is_false> strcat: okay
[02:00:33] <strcat> none of it is incredibly awful
[02:00:34] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:00:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:00:54] <strcat> the libraries are a bigger problem than rustc in terms of compile-time and --opt-level=0/--opt-level=1 performance
[02:00:58] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[02:01:20] <steven_is_false> strcat: You mean effort should be focused on splitting them up?
[02:01:26] <strcat> no
[02:01:28] *** Quits: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP) (Ping timeout)
[02:01:48] <aatch> A big issue we have is that we don't really treat LLVM IR as the SSA form it actually is.
[02:02:02] <strcat> aatch: neither does clang
[02:02:15] <strcat> you're meant to use alloca if you have mutable variables
[02:02:20] <steven_is_false> Don't we have a huge advantage because we have linear types?
[02:02:26] <strcat> and even our immutable variables are 'mutable' in that they can be moved from
[02:02:33] <strcat> + you can take addresses of things
[02:02:48] *** Quits: diodesign (diodesign@moz-498DA4AB.pepperfish.net) (Ping timeout)
[02:02:50] <strcat> steven_is_false: no more than C++ has an advantage because it has linear types
[02:02:55] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:03:02] <steven_is_false> fair enough
[02:03:03] <strcat> which is basically none at all
[02:03:14] *** Joins: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP)
[02:03:23] <strcat> we could do move semantics differently (stricter language semantics) and have an advantage over C++ move semantics
[02:03:25] <strcat> atm, we don't
[02:03:37] <steven_is_false> Okay so I don't understand what you meant by the libraries problem
[02:03:49] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:04:51] <dougxxx> hm... what's the different between $($x:ident, $y:ident), * and $($x:ident, $y:ident)* in a macro? (note the ,)
[02:04:53] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[02:06:20] <IRCMonkey38618> dougxxx: first takes `x, y x, y x, y`, second takes `x, y, x, y, x, y`
[02:06:40] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Quit: Leaving...)
[02:08:36] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:09:38] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:09:56] *** Quits: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net) (Quit: Sharp)
[02:10:17] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[02:10:18] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:10:48] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:10:48] <dougxxx> ah~
[02:10:48] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[02:12:27] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:12:31] *** Joins: passcod (passcod@moz-4A92A8E8.passcod.name)
[02:12:44] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[02:12:48] *** Quits: tiffany (lymia@moz-9AFBAEEB.lymia.me.uk) (Ping timeout)
[02:12:56] *** Joins: p1start (rewi@moz-E7F3D014.org)
[02:13:51] <passcod> what does "missing lifetime specifier" mean, exactly?
[02:14:46] *** Joins: tiffany (lymia@moz-9AFBAEEB.lymia.me.uk)
[02:15:28] *** Quits: toshok_ (toshok@8EC99D26.4B7A7726.A2E931B1.IP) (Quit: Computer has gone to sleep.)
[02:16:50] *** Joins: diodesign (diodesign@moz-498DA4AB.pepperfish.net)
[02:17:28] <Eridius> passcod: it means you need a lifetime specifier but didn't provide one
[02:17:35] <Eridius> passcod: can you show the code/full error?
[02:19:24] <passcod> Eridius: https://gist.github.com/passcod/9754095
[02:21:05] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[02:21:12] <Eridius> passcod: a struct can't contain a reference without a lifetime specifier
[02:21:31] <Eridius> so either you need `struct SizeTable(&'static [int])` for only static slices, or `struct SizeTable<'a>(&'a [int])`
[02:21:54] <passcod> great, thanks :)
[02:22:11] *** Quits: aurynj (Eon@B3D9F3A9.6EA7AEE4.364694FC.IP) (Ping timeout)
[02:22:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:22:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[02:24:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:29:01] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[02:29:19] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[02:30:01] *** Parts: passcod (passcod@moz-4A92A8E8.passcod.name) ()
[02:30:05] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[02:30:54] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[02:32:02] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[02:32:40] *** Quits: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net) (Client exited)
[02:33:08] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:33:40] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[02:37:04] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[02:38:04] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[02:38:10] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:38:11] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[02:38:17] *** IRCMonkey38618 is now known as ChrisMorgan
[02:38:36] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[02:42:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:42:28] *** Joins: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net)
[02:43:20] *** Quits: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net) (Client exited)
[02:44:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:46] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[02:45:41] *** eatkinson is now known as eatkinson-away
[02:46:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:46:24] *** Quits: oxum (anonymous@DC665320.FE7DDF00.520CDC98.IP) (Ping timeout)
[02:46:44] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[02:47:42] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:49:28] *** Joins: oxum (anonymous@45F4BE68.6785D218.520CDC98.IP)
[02:49:51] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[02:51:08] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[02:51:26] *** Joins: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net)
[02:52:45] *** Joins: Denommus (user@moz-D91EF312.user.veloxzone.com.br)
[02:52:50] <Denommus> hi
[02:53:38] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[02:53:57] <Denommus> if I have a struct Foo with a field bar (type Bar), and I have a function fn get_bar(foo: &Foo) -> Bar { foo.bar }, is "bar" copied?
[02:55:13] <sfackler> yes
[02:55:22] <sfackler> that'll only compile if Bar is Pod
[02:55:59] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[02:56:49] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:57:05] <Kroisse> if not, Bar should implement Clone trait and use .clone() method
[02:57:06] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[02:57:38] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[02:59:24] <Denommus> Pod?
[02:59:30] <Eridius> Plain Old Data
[02:59:40] <Eridius> http://static.rust-lang.org/doc/master/std/kinds/trait.Pod.html
[03:00:05] <Eridius> basically it's anything that doesn't have a destructor (either explicit, or implicit via containing a ~-ptr)
[03:00:37] <Eridius> although I expect containing a &mut reference also makes it non-Pod, and I'm not sure about non-mut &refs
[03:00:54] <Denommus> so, can I fn get_bar<'a>(foo: &'a Foo) -> &'a Bar { &foo.bar } instead?
[03:01:08] <Eridius> actually, maybe the references aren't an issue. I was thinking borrowck might complain, but a struct with references has a lifetime parameter too
[03:01:16] <Eridius> and an implicit copy should be no different than an explicit one
[03:01:21] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[03:01:23] <Eridius> Denommus: that should work
[03:01:32] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[03:01:35] <Denommus> ok, then I got it right :-D
[03:02:00] *** Quits: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net) (Quit: WeeChat 0.4.3)
[03:02:36] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[03:03:34] <Denommus> also, I never quite got how the "ref" keyword works. If there an equivalent to it on C++? Is there a doc that explains it well?
[03:03:59] <Eridius> the `ref` keyword is part of a pattern
[03:04:06] <Eridius> it modifies how a pattern binding works
[03:04:17] <Eridius> a normal binding binds by-value. `ref` makes it bind by-reference
[03:04:27] <Eridius> sl e.g. `let ref a = b` is the same as `let a = &b`
[03:04:45] <Eridius> but this is useful because you can destructure a value and bind various bits of it
[03:05:06] <Eridius> you can also use `mut`, e.g. `let ref mut a = b` is equivalent to `let a = &mut b`
[03:05:16] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[03:05:16] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:05:21] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[03:05:35] <Eridius> rusti: let x = (1u, 2u); let (a, ref b) = x; println!("a: {}, b: {}", a, b);
[03:05:36] -rusti- a: 1, b: 2
[03:05:36] -rusti- ()
[03:05:40] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[03:05:47] <Eridius> rusti: let x = (1u, 2u); let (a, ref b) = x; println!("a: {:?}, b: {:?}", a, b);
[03:05:48] -rusti- a: 1u, b: &2u
[03:05:48] -rusti- ()
[03:05:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:05:50] <Eridius> Denommus: ^
[03:05:58] <Eridius> note that b is a reference
[03:06:25] <Denommus> got it, thanks
[03:06:28] <Eridius> rusti: let mut x = (1u, 2u); { let (_, ref mut b) = x; *b = 5u; } x
[03:06:28] -rusti- (1, 5)
[03:07:10] <Denommus> so this is quite unique in Rust, since it C++ doesn't have pattern matching, and Haskell doesn't have references in the same way that Rust does
[03:07:18] <Eridius> yeah
[03:07:54] <Eridius> Haskell doesn't typically have mutable data, and things are boxed by default, so there is no need to construct references to fields of a value
[03:08:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:10:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:12:29] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[03:12:43] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:13:11] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[03:13:34] *** Quits: lord (lord@EBD3E2E9.9E48596C.68F5EADC.IP) (Ping timeout)
[03:16:42] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[03:16:42] *** ChanServ sets mode: +o jdm
[03:18:13] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[03:18:53] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:19:11] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[03:19:17] *** Quits: oxum (anonymous@45F4BE68.6785D218.520CDC98.IP) (Quit: ...)
[03:19:22] *** Joins: toshok_ (toshok@moz-96BF2AD6.hsd1.ca.comcast.net)
[03:19:41] *** Joins: mark_edward (mark@moz-E0F1AB04.hsd1.in.comcast.net)
[03:20:11] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[03:20:14] <mark_edward> hey, i've been away from rust for a while where can the things in std::unstable::intrinsics now be found.
[03:20:20] <strcat> std::intrinsics
[03:20:34] <mark_edward> i feel dumb
[03:20:41] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:20:45] <mark_edward> ive been staring at the docs for 20 min now
[03:21:10] <Denommus> that happens
[03:21:39] <strcat> mark_edward: there's search
[03:22:19] <mark_edward> oh yeah, and it's nice too
[03:24:48] *** Quits: Denommus (user@moz-D91EF312.user.veloxzone.com.br) (Quit: going to sleep)
[03:25:31] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[03:27:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:29:35] *** Joins: aurynj (Eon@53E88241.65896F99.364694FC.IP)
[03:29:39] *** Joins: EastByte (EastByte@moz-49503328.ewe-ip-backbone.de)
[03:29:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:30:06] *** Quits: EastByte_ (EastByte@moz-86F67B98.ewe-ip-backbone.de) (Ping timeout)
[03:31:53] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[03:31:55] *** Joins: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com)
[03:32:28] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:32:30] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:32:49] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[03:33:26] *** Quits: untitaker (untitaker@moz-8C7CCA71.adsl.highway.telekom.at) (Ping timeout)
[03:33:28] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[03:34:00] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:34:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:34:10] *** Joins: richo (richo@moz-4CC4D684.perm.iinet.net.au)
[03:35:05] *** Joins: dranov (dranov@10725E3C.94264913.FB866788.IP)
[03:35:54] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:36:06] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[03:36:57] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[03:38:03] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[03:38:14] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[03:39:50] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:39:51] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:41:02] *** Joins: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[03:41:32] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:42:01] *** Joins: untitaker (untitaker@moz-395BEB4E.adsl.highway.telekom.at)
[03:42:11] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[03:45:03] *** Joins: ozten (ozten@moz-87FC77D4.hsd1.wa.comcast.net)
[03:45:24] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[03:49:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:49:20] *** Quits: mindcat (mindcat@37DA2A5.14B01478.F956842C.IP) (Ping timeout)
[03:50:12] *** Quits: zz_kimundi (kimundi@moz-B2FDAD53.dip0.t-ipconnect.de) (Ping timeout)
[03:50:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[03:51:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:51:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:51:45] *** Quits: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:51:46] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:52:53] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[03:53:03] <pingveno> I'm writing a data structure that requires a type with the Int trait. I need to do (1 << value), where value is of the type. How do?
[03:53:12] *** Joins: zz_kimundi (kimundi@moz-116E00E4.dip0.t-ipconnect.de)
[03:53:29] *** zz_kimundi is now known as kimundi
[03:53:31] <aatch> pingveno, there should be a casting function somewhere in std::num
[03:53:47] *** Joins: mindcat (mindcat@8BF3B79.E45688C6.F21FCE99.IP)
[03:54:01] <strcat> aatch: nothing generic that will work for more than built-in integers afaik
[03:54:40] <strcat> unless IntConvertible is still around...
[03:55:10] <pingveno> :(
[03:55:41] <pingveno> And no way to specify that it must be a built-in integer?
[03:55:53] <aatch> pingveno, not really, no
[03:56:12] <aatch> You could add a One bound though and use std::num::one() though
[03:56:31] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[03:57:00] <pingveno> Yeah, I'm figuring out that one.
[03:57:33] <pingveno> Though it then interacts with a uint, so that could be its own hazard.
[03:58:41] <aatch> pingveno, wait, you dont even need that as Int already inherits from One
[03:59:16] <strcat> ah
[03:59:19] <strcat> there's still FromPrimitive
[03:59:21] <strcat> that's the one you want
[03:59:30] <strcat> well, or One
[03:59:31] <strcat> I guess
[03:59:33] <strcat> ;p
[03:59:41] <aatch> std::num::cast also exists
[03:59:51] *** Joins: oxum (anonymous@D93EDA16.A294C6AC.520CDC98.IP)
[03:59:51] * pingveno -> cast
[04:00:05] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[04:00:06] * strcat merged he fixes for rust-gmp
[04:00:12] <strcat> maybe I'll work on it more soon
[04:00:18] <doy> so i'm trying to write some xlib integration stuff, and it appears to be deadlocking inside a call to XNextEvent
[04:00:21] <strcat> needs a ton more work, there are a thousand functions to bind
[04:00:31] <doy> but if i insert some println!() calls, it no longer deadlocks
[04:00:43] <doy> is there something special i need to be doing to work with other event loops, or something
[04:00:49] <strcat> doy: are you supposed to be keeping this on the same thread?
[04:01:16] <strcat> libgreen isn't friendly to libraries making usage of thread-local storage, etc.
[04:01:21] <doy> for the moment, i'm just trying to translate http://paste.tozt.net/2014-03-25iabSyavA-test.c
[04:01:28] <doy> just to see how things would work
[04:01:38] <strcat> doy: which revision of rust do you have?
[04:01:41] <doy> master
[04:01:49] <strcat> yeah but how recent
[04:01:51] <strcat> ;)
[04:02:00] <doy> just pulled like 5 minutes ago
[04:02:05] <strcat> ah
[04:02:08] <strcat> dunno what the problem is then
[04:02:08] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[04:02:15] <doy> same issue with 0.9 though
[04:02:18] <aatch> doy, can you show the code?
[04:02:32] <strcat> doy: libnative is the default now, so there's no other event loop
[04:02:41] <strcat> you could verify by explicitly using libnative
[04:02:48] <doy> http://paste.tozt.net/2014-03-25XYj17seA-main.rs http://paste.tozt.net/2014-03-25o_kibtET-shim.c
[04:02:50] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[04:02:50] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:02:50] <doy> aatch: ^^
[04:04:04] <doy> strace shows it blocking in a call to futex()
[04:05:16] <aatch> doy, and you're *sure* that you're using the most recent version of the compiler?
[04:05:24] <pingveno> Speaking of one(), how do I get the types correct on this: (one() << value)
[04:05:30] <Havvy> cmr:  I'm actually not a new contributor.  ;)
[04:05:36] <strcat> doy: perf trace > strace ;p
[04:05:36] <pingveno> Where value is of type T: Int
[04:05:39] <doy> aatch: i... think so?
[04:05:43] <doy> it's possible i'm screwing something up
[04:05:45] <doy> (:
[04:05:57] <aatch> doy, add #[no_uv] at the top
[04:06:25] <strcat> pingveno: one::<T>()
[04:07:09] <pingveno> Can't say I would have guessed that one :P
[04:07:55] <doy> aatch: "unknown crate attribute" warning
[04:08:05] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:08:06] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:08:34] <aatch> doy, ok, so yeah, you're not using an older compiler
[04:09:28] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[04:09:32] *** Quits: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[04:10:01] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[04:10:14] *** Quits: oxum (anonymous@D93EDA16.A294C6AC.520CDC98.IP) (Quit: Bye..)
[04:10:26] *** Joins: oxum (anonymous@D93EDA16.A294C6AC.520CDC98.IP)
[04:10:31] <aatch> doy, I gotta go sorry
[04:10:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:11:45] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[04:13:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:13:59] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:15:08] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[04:16:37] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[04:18:02] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[04:18:15] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[04:20:04] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[04:20:42] <rchar> in impls, is the type name of the type being implemented on still Self?
[04:20:50] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[04:21:00] <sfackler> no, it's the name of the type
[04:21:43] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[04:21:57] <rchar> what was wrong with Self
[04:22:48] <sfackler> Self is used in the declaration of a trait as a stand in for the type it'll be implemented for
[04:22:59] *** Joins: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net)
[04:23:05] <sfackler> e.g. trait Foo { fn foo() -> Self } impl Foo for int { fn foo() -> int { 10 } }
[04:23:20] <sfackler> there's an open bug to allow Self to be used in impls as well
[04:23:35] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[04:23:38] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[04:23:39] <rchar> I see
[04:23:46] <rchar> thanks
[04:25:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:25:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:26:23] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[04:27:24] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[04:27:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:28:38] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[04:29:56] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[04:30:01] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[04:30:34] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[04:31:06] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[04:31:50] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[04:32:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:33:41] *** Joins: nik_ (nik@moz-E19B3337.pool.mediaways.net)
[04:34:42] *** Quits: nkoep (nik@moz-92D88814.pool.mediaways.net) (Ping timeout)
[04:34:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:36:18] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:36:54] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[04:37:54] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[04:37:58] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[04:38:25] *** Quits: aurynj (Eon@53E88241.65896F99.364694FC.IP) (Ping timeout)
[04:41:17] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[04:42:58] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[04:45:32] *** Quits: derek_c (derek@moz-8CB566B5.cit.cornell.edu) (Ping timeout)
[04:48:03] *** Joins: aurynj (Eon@53E88241.65896F99.364694FC.IP)
[04:51:19] *** Joins: Titof (Mibbit@moz-DF84E0A1.univ-reunion.fr)
[04:52:48] <Titof> hi
[04:52:51] <Titof> Is there a version 0.10 for osx ?
[04:53:31] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[04:53:49] <Eridius> Titof: current numbered version is 0.9
[04:54:02] <Eridius> but unless you have a need to use 0.9 I would suggest using master
[04:54:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:55:26] <Titof> i need the 0.10 pre 
[04:55:55] <Eridius> that's master
[04:55:56] <Havvy> Titof:  Clone mozilla/rust off of Github and build it.
[04:56:20] <Titof> ok thx 
[04:56:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:56:31] *** jorendorff is now known as jorendorff_away
[04:56:56] <sfackler> Titof: if you have homebrew installed, you can also get it with "brew install --HEAD rust"
[04:56:59] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:59:20] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[05:00:20] <Titof> :o thx sfackler 
[05:00:34] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:01:56] *** Joins: lkuper (lkuper@moz-61339218.dyn.optonline.net)
[05:02:27] <zwarich> I wonder how far away Rust is from being sound
[05:03:03] *** Quits: heftig (heftig@moz-19E06ABC.dip0.t-ipconnect.de) (Ping timeout)
[05:04:06] *** Joins: sp3d (sp3d@6361F3B1.19CD1E54.8354FB35.IP)
[05:05:01] *** Joins: heftig (heftig@moz-AA4684.dip0.t-ipconnect.de)
[05:05:33] *** Parts: Titof (Mibbit@moz-DF84E0A1.univ-reunion.fr) ()
[05:09:00] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[05:09:32] *** Joins: nightpool (nightpool@moz-7CAAC068.wi.res.rr.com)
[05:10:19] *** Joins: derek_c (derek@moz-9715B997.cit.cornell.edu)
[05:11:06] <hoverbear> https://github.com/Hoverbear/rust-rosetta/blob/master/src/anagrams.rs#L10 --> type `std::str::Chars<>` does not implement any method in scope named `to_owned_vec`
[05:11:14] <hoverbear> Must be a recent change?
[05:11:40] <sfackler> to_owned_vec was removed. use collect instead
[05:13:40] <hoverbear> sfackler: Thanks. :)
[05:14:04] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[05:15:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:18:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:18:59] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[05:21:03] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:21:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:22:34] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[05:23:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:25:12] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Quit: Bye)
[05:25:53] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[05:29:35] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[05:31:31] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:32:32] *** Joins: edwardw (Mibbit@9EF774F0.49850AF2.29DE6883.IP)
[05:34:57] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[05:35:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:36:00] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[05:36:13] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:36:57] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[05:36:58] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[05:37:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:37:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:37:56] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[05:37:56] *** ChanServ sets mode: +o tjc
[05:38:11] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:38:47] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[05:39:14] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[05:39:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:44:29] <pingveno> Okay, one last question. I'm doing something wrong here: http://pastebin.com/EMKW0TVi
[05:44:31] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[05:45:16] <pingveno> I can't get the line self.i += one(); to type check correctly. Apparently self.i isn't registered as having a type.
[05:46:40] <ChrisMorgan> Go for `self.i = self.i + one()`.
[05:46:47] *** Quits: philix (felipe@moz-79610F94.user.veloxzone.com.br) (Ping timeout)
[05:47:03] <ChrisMorgan> += doesn't work consistently yet.
[05:47:32] <pingveno> Will it do so in the future?
[05:47:59] <Yurume> it is planned.
[05:48:32] <pingveno> Awesome. Including something like an InplaceAdd trait, with Add as a fallback?
[05:48:49] <strcat> Add won't be a fallback
[05:48:56] <pingveno> k
[05:49:05] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:49:06] <pingveno> Sweetness!
[05:49:12] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:49:20] <Yurume> cf. https://github.com/mozilla/rust/issues/5992
[05:53:50] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[05:56:30] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[05:56:33] *** Quits: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi) (Ping timeout)
[05:58:33] <alan_andrade> What tool do we use for highlighting source code in the documentation ?
[05:58:47] *** Joins: benjamin_ (benjamin@moz-852745DE.dip0.t-ipconnect.de)
[05:58:48] <alan_andrade> And where can I get the stylesheets ?
[05:59:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:00:36] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[06:01:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:02:13] *** Joins: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi)
[06:02:29] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Quit: Lost terminal)
[06:02:50] *** Quits: japaric (japaric@E3A27319.2A33E3C8.A936879B.IP) (Ping timeout)
[06:04:13] *** Quits: edwardw (Mibbit@9EF774F0.49850AF2.29DE6883.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:04:53] *** Quits: richo (richo@moz-4CC4D684.perm.iinet.net.au) (Ping timeout)
[06:05:08] *** Quits: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi) (Ping timeout)
[06:05:24] *** Quits: claudiu (claudiu@moz-6F0C4397.thefacebook.com) (Input/output error)
[06:06:32] *** Joins: richo (richo@moz-4CC4D684.perm.iinet.net.au)
[06:07:03] *** Joins: edwardw (edwardw@E761717E.1B2F6624.7F41E82D.IP)
[06:07:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:08:17] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[06:09:41] *** jorendorff_away is now known as jorendorff
[06:09:55] *** Joins: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi)
[06:11:07] *** Quits: lkuper (lkuper@moz-61339218.dyn.optonline.net) (Quit: lkuper)
[06:11:52] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:12:09] *** Quits: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi) (Ping timeout)
[06:12:25] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:13:00] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Connection reset by peer)
[06:13:16] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[06:15:47] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[06:15:57] *** Joins: japaric (japaric@A6AF1FF5.D1A0B378.5C7588CA.IP)
[06:16:35] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[06:16:43] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[06:17:56] *** Quits: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:18:21] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[06:20:05] <ChrisMorgan> alan_andrade: it's libsyntax stuff; stylesheet in src/librustdoc/html/static/main.css
[06:20:39] <alan_andrade> Got it
[06:20:43] <alan_andrade> Thanks : )
[06:20:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:21:02] *** Joins: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi)
[06:21:17] <alan_andrade> I think I need to start writing about what I learn.
[06:21:42] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:21:54] <alan_andrade> I get "rusti" pretty quick
[06:23:09] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[06:23:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:23:25] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:24:05] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:25:28] *** Joins: fabiand (fabiand@moz-BD70BA0E.adsl.alicedsl.de)
[06:28:53] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:30:26] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[06:30:38] *** Quits: japaric (japaric@A6AF1FF5.D1A0B378.5C7588CA.IP) (Ping timeout)
[06:31:01] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[06:32:56] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[06:35:36] *** Joins: japaric (japaric@FCB3637C.59294C36.95AFB88D.IP)
[06:37:32] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[06:38:17] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[06:39:20] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[06:39:31] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[06:41:10] *** Joins: ofeldt- (ofeldt@moz-8A299843.dip0.t-ipconnect.de)
[06:41:28] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[06:42:15] *** Quits: ofeldt (ofeldt@moz-B5600294.dip0.t-ipconnect.de) (Ping timeout)
[06:42:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:43:07] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[06:44:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:46:12] *** Quits: edwardw (edwardw@E761717E.1B2F6624.7F41E82D.IP) (Quit: Leaving...)
[06:47:44] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[06:48:38] *** Quits: heftig (heftig@moz-AA4684.dip0.t-ipconnect.de) (Quit: Quitting)
[06:49:37] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[06:51:21] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[06:53:33] *** Quits: mjrosenb (mjrosenb@moz-22104996.hsd1.pa.comcast.net) (Ping timeout)
[06:54:29] *** Joins: mjrosenb (mjrosenb@moz-22104996.hsd1.pa.comcast.net)
[06:54:47] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[06:55:23] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:55:37] <Yurume> what is the best strategy to test an externally loaded syntax extension?
[06:56:38] <sfackler> Yurume: I just build a test binary with the extension linked in: https://github.com/sfackler/rust-phf/blob/master/src/test.rs
[06:56:47] <sfackler> it doesn't handle error checking though
[06:57:01] <sfackler> I've been meaning to get compiletest to install along with rustc and use that
[06:57:04] <Yurume> yeah, that was my prime concern unfortunately :S
[06:57:45] <sfackler> If you have the rust repo checked out already, just use compiletest
[06:59:47] *** Quits: richo (richo@moz-4CC4D684.perm.iinet.net.au) (Ping timeout)
[07:00:11] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:00:12] <Yurume> sfackler: it is intended to be a separate repository, so compiletest would not be a solution for me
[07:00:40] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[07:00:49] <sfackler> https://github.com/mozilla/rust/issues/12335 if you're feeling motivated
[07:00:51] <sfackler> :P
[07:01:14] <Yurume> oh, thank you for pointing that out!
[07:01:30] <Yurume> rustc --compile-test or similar?
[07:01:41] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[07:02:11] <sfackler> right now it's actually its own executable
[07:02:12] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[07:02:16] <sfackler> compiletest
[07:02:41] <Yurume> I know, but I guess it might make more sense to included it into rustc
[07:02:44] <Yurume> include*
[07:03:05] <sfackler> maybe
[07:03:09] <sfackler> it should at least be renamed
[07:03:26] <Yurume> right now compiletest is limited to simple error cases (no span tests, for example)
[07:03:53] <Yurume> more errors supported, more complex the compiletest would be.
[07:03:57] <sfackler> I think it's the thing that handles all of cfail, so it should work with spans?
[07:04:11] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:04:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:04:33] *** jorendorff is now known as jorendorff_away
[07:05:06] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:05:24] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[07:05:44] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[07:05:44] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[07:05:44] *** ChanServ sets mode: +o tjc
[07:06:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:08:33] *** Quits: aurynj (Eon@53E88241.65896F99.364694FC.IP) (Ping timeout)
[07:09:21] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:10:39] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[07:10:41] *** Quits: oxum (anonymous@D93EDA16.A294C6AC.520CDC98.IP) (Quit: ...)
[07:14:32] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[07:25:15] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[07:25:32] *** Joins: not_gavin (gavin@gavinsharp.com)
[07:26:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:27:39] *** Joins: richard|s_ (mindginati@6EF58C93.2D0B0980.6400445B.IP)
[07:27:59] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:28:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:28:37] *** Quits: not_gavin (gavin@gavinsharp.com) (Connection reset by peer)
[07:28:56] *** Joins: not_gavi1 (gavin@gavinsharp.com)
[07:29:57] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[07:31:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:31:26] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:31:42] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[07:32:02] *** Joins: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP)
[07:32:31] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Client exited)
[07:33:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:33:29] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[07:36:20] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[07:37:21] *** Quits: StarLight (StarLight@moz-D2759C29.dynamic.avangarddsl.ru) (Ping timeout)
[07:37:40] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[07:38:21] *** Quits: derek_c (derek@moz-9715B997.cit.cornell.edu) (Ping timeout)
[07:39:09] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[07:39:30] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[07:39:51] *** pmoore|away is now known as pmoore
[07:40:47] *** pmoore is now known as pmoore|buildduty
[07:41:18] *** Joins: harish (harish@moz-24DD2596.hsd1.ca.comcast.net)
[07:42:15] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[07:42:40] *** Quits: mjrosenb (mjrosenb@moz-22104996.hsd1.pa.comcast.net) (Ping timeout)
[07:42:46] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:43:35] *** Joins: mjrosenb (mjrosenb@moz-22104996.hsd1.pa.comcast.net)
[07:43:49] *** Quits: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:47:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:48:03] *** Joins: oxum (anonymous@45F4BE68.6785D218.520CDC98.IP)
[07:48:15] <alan_andrade> http://alan-andrade.github.io/rust/2014/03/24/echo-server.html
[07:49:06] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:49:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:50:28] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:50:53] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Ping timeout)
[07:50:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:51:23] *** flaper87|afk is now known as flaper87
[07:52:07] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[07:52:11] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:52:21] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[07:55:46] *** Joins: marc_ (uid5324@moz-31ABA2C0.irccloud.com)
[07:55:53] *** Joins: twi (Adium@moz-CF950680.cust.vodafonedsl.it)
[07:58:12] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[07:58:32] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[08:00:01] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[08:03:43] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[08:04:13] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[08:06:04] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[08:09:05] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[08:09:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:10:11] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[08:10:55] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[08:11:27] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:11:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:11:58] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[08:13:10] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[08:14:54] <Ms2ger> OH: "Never underestimate a C programmer's ability to write C code in any language you give them"
[08:17:00] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[08:18:45] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[08:24:22] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:27:40] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:27:40] *** ChanServ sets mode: +o huon
[08:28:49] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[08:31:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:31:51] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[08:33:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:33:41] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[08:35:12] <Ms2ger> Offered without comment: http://blog.plover.com/prog/Java.html
[08:35:21] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[08:35:50] <eddyb> Ms2ger: I really can't tell what direction that is in
[08:36:02] <eddyb> my sarcasm detector is confused
[08:36:51] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[08:37:13] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[08:37:14] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[08:37:28] <huon> Eridius: vector indexing can be done with .get
[08:37:31] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[08:37:46] <huon> Eridius: (and head is just .get(0) / .get_mut(0))
[08:37:52] <o11c> "In Java, you can forget about doing it in the cleanest or the best way, because that is impossible. Whatever you do, however hard you try, the code will come out mediocre, verbose, redundant, and bloated"
[08:38:06] *** Joins: lunaryorn (lunaryorn@moz-B8762B1F.dynamic.mnet-online.de)
[08:38:48] *** Quits: lunaryorn (lunaryorn@moz-B8762B1F.dynamic.mnet-online.de) (Quit: )
[08:38:57] <huon> Eridius: (erm, that was mean to be in #rust-internals... but whatever, you're the same person here and there, afaik)
[08:39:28] <Yurume> I guess the essense is that if one can deal with a seriously bloat language like Java, one can deal with other things? :S
[08:41:32] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[08:42:26] *** Joins: wooya (AndChat255@4BED3CB3.F5F53E8A.2D6DB75E.IP)
[08:44:46] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[08:44:51] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[08:45:00] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[08:45:49] *** Joins: alonlevy (alon@2CD54432.57968636.E9C721AF.IP)
[08:48:11] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Quit: bbl)
[08:48:40] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:51:13] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:51:32] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:52:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:52:54] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:53:01] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[08:54:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:55:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:56:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:57:46] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:57:46] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[08:58:23] *** Joins: eibwen (kvirc@moz-80084333.dip0.t-ipconnect.de)
[09:00:09] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[09:01:17] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[09:01:54] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[09:02:24] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[09:02:48] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[09:04:26] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[09:05:04] <NiccosSystem_> Is there a way to read VarInts from a socket?
[09:05:35] *** Parts: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Leaving...)
[09:05:46] <Yurume> depends on your definition of VarInt, and most likely you need to do it yourself (by `read_byte`).
[09:06:02] <NiccosSystem_> ach..
[09:06:48] <huon> (What's the format of a VarInt?)
[09:07:20] <Yurume> is it one from Protocol Buffers?
[09:07:42] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[09:09:19] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[09:09:43] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[09:11:57] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[09:13:27] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[09:14:07] <darnuria> Just for trying... Who have compiled successfully rust with --enable-clang on debian? I am trying on testing
[09:14:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:14:35] <huon> darnuria: I think I did a while ago
[09:14:39] * huon tries again
[09:15:16] <pczarn> Even when a mod is not used in conditional compilation, it's parsed and added as a dependency, for example `#[cfg(foo)] mod foo;`
[09:15:23] <pczarn> is it a bug?
[09:15:27] <huon> no
[09:15:56] <o11c> darnuria: which exact debian? there have been changes lately
[09:16:26] <huon> pczarn: https://github.com/mozilla/rust/issues/5870
[09:16:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:16:38] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[09:19:10] <huon> darnuria: seems to be working for me on unstable (although I didn't have to compile LLVM just then); what error messages do you get?
[09:19:10] <darnuria> o11c: Debian testing updated this week
[09:20:44] <darnuria> huon: Actually It success. :)
[09:22:17] <huon> darnuria: oh
[09:22:26] <huon> then why ask the question? :)
[09:22:47] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Quit: Leaving.)
[09:23:09] *** Joins: [squiddy] (squiddy@moz-686F69E9.dip0.t-ipconnect.de)
[09:23:56] *** Quits: mojoB (mojoB@moz-A4312114.static.exetel.com.au) (Ping timeout)
[09:24:39] <darnuria> huon: Because it failed for me some week ago :D
[09:26:49] *** Joins: yong (yong@BEEBD356.97476029.757A6F4C.IP)
[09:27:17] *** Quits: wooya (AndChat255@4BED3CB3.F5F53E8A.2D6DB75E.IP) (Client exited)
[09:27:33] *** Joins: mojoB (mojoB@moz-A4312114.static.exetel.com.au)
[09:29:02] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Quit: WeeChat 0.4.3)
[09:29:18] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[09:30:35] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[09:31:27] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[09:31:27] *** Joins: vgeddes (vincent.ge@moz-61A0CA3B.access.mtnbusiness.co.za)
[09:33:13] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[09:35:01] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:36:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:36:06] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[09:37:41] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[09:38:02] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:38:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:38:32] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[09:39:14] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140323030203])
[09:39:47] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[09:40:17] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[09:41:42] *** Joins: Ms2ger (Ms2ger@moz-A26553B6.adsl-dyn.isp.belgacom.be)
[09:41:58] <darnuria> Ok I was too enthusiastic I builded with (just for trying): ./configure --disable-docs --enable-clang --enable-local-rust && make 
[09:42:01] <darnuria> and It failed
[09:42:13] <darnuria> I will test without --enable-local-rus
[09:45:19] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[09:45:55] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[09:48:03] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[09:49:48] *** Joins: jackneill (jackneill@moz-5B5B9AC8.pool.digikabel.hu)
[09:51:49] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:52:45] <NiccosSystem> I had to head off because of class, sorry about that
[09:53:34] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:54:17] *** Quits: jackneill (jackneill@moz-5B5B9AC8.pool.digikabel.hu) (Quit: WeeChat 0.4.3)
[09:55:42] *** Joins: jackneill (jackneill@moz-5B5B9AC8.pool.digikabel.hu)
[09:56:03] <huon> darnuria: --enable-local-rust will rarely work
[09:57:03] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:57:05] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:57:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:58:54] *** Joins: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu)
[10:00:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:00:59] *** Quits: mojoB (mojoB@moz-A4312114.static.exetel.com.au) (Quit: leaving)
[10:01:17] <tfogal> okay I've tracked down my program crashing to this line:
[10:01:19] <tfogal> let mut data: [f32, ..1000*1000*1000] = [0.0, ..1000*1000*1000];
[10:01:25] <tfogal> if i have that in there, my program crashes on entry to main
[10:01:40] <tfogal> I would guess i'm overflowing a heap or something and blowing up my stack thereby
[10:01:42] <tfogal> ?
[10:01:42] *** Quits: oxum (anonymous@45F4BE68.6785D218.520CDC98.IP) (Ping timeout)
[10:01:43] <huon> tfogal: you're trying to put nearly 4GB on the stack
[10:01:50] <tfogal> how can i put that on the heap?
[10:01:53] <huon> ~
[10:02:09] <huon> data: ~[f32, .. size] = ~([0.0, .. size])
[10:02:29] <huon> (the brackets are necessary for the expression, other wise it gets parsed as a ~[T] constructor)
[10:02:54] <tfogal> ahh i was wondering wth was going on ;-)
[10:02:59] <huon> btw, you can normally skip the type hints, i.e. `let data = ~([0.0, ..1000*1000*1000]);` should work
[10:03:08] <tfogal> magic!  seems to work.
[10:03:14] <tfogal> ahh cool
[10:03:15] <huon> (if it's inferring to f64, just write `0f32` (or `0.0f32`))
[10:03:15] * tfogal tries
[10:04:03] <tfogal> neat, actually reading data from netcdf now :-)
[10:04:15] <tfogal> guess all i need to do is write it and my toy program is done
[10:04:18] <huon> \o/
[10:04:37] *** Joins: oxum (anonymous@E548EC34.4CC1D574.520CDC98.IP)
[10:06:01] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Connection reset by peer)
[10:06:01] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Ping timeout)
[10:06:01] *** Joins: ssira_ (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:08:05] <gavinb> Is a module name determined by the filename (foo.rs) or the ‘pub mod foo’ declaration inside it?
[10:09:31] <huon> the declaration inside it?
[10:09:50] <tfogal> both, I think, gavinb.  When I wrapped my "netcdf.rs" code in a 'pub mod netcdf { ... }', then my netcdf::whatever weren't accessible.  dropping the pub mod around it seemed to fix things, but in retrospect i imagine my stuff was netcdf::netcdf::whatever when i had the 'pub mod'
[10:09:58] <eddyb> rusti: pub mod main;
[10:09:58] -rusti- <anon>:10:17: 10:21 error: file not found for module `main`
[10:09:59] -rusti- <anon>:10         pub mod main;
[10:09:59] -rusti-                           ^~~~
[10:09:59] -rusti- application terminated with error code 101
[10:10:03] <eddyb> hmm
[10:10:25] <huon> putting pub mod foo; inside foo.rs doesn't do what you expect
[10:10:32] <eddyb> huon: do we stack overflow for that?
[10:10:36] <gavinb> tfogal: ah ok!
[10:10:38] <huon> eddyb: no it  was caught
[10:10:44] <huon> and fixed a while ago
[10:10:57] <huon> `mod a;` in a.rs was the testcase
[10:11:01] <huon> such brevity
[10:11:25] <huon> gavinb: the name of a module is determined by the `pub mod foo;` statement used to introduce it, i.e. the occurs in a different file
[10:12:06] <huon> gavinb: when seeing a `pub mod foo;` statement, the compiler looks for foo.rs or foo/mod.rs (one can use #[path] to override this search)
[10:12:07] <gavinb> huon: so a module doesn’t name itself per se??
[10:12:24] <gavinb> ah ok, the magic names for resolution.
[10:12:25] <huon> gavinb: yes, the name is determined outside the module
[10:12:33] *** Joins: krebbit (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net)
[10:13:21] <gavinb> And do subdirectories create implicit modules (kinda like Java)?
[10:13:43] <eddyb> you need a mod.rs at every level
[10:13:44] <huon> the crate root (i.e. the file on which you write rustc) is an implicit module, so when someone uses your crate (say `foo`), with a crate file like `pub mod foo { ... }` then any imports from that crate will be from `foo::foo::...`
[10:13:49] <huon> i.e. very stuttery
[10:14:00] <huon> (so one should avoid putting a `pub mod` in the crate root)
[10:14:10] <krebbit> I just pulled the latest rust... make install is giving me:
[10:14:12] <krebbit> make: *** No rule to make target `prepare-everything', needed by `install'.  Stop.
[10:14:18] <huon> gavinb: only via the foo/mod.rs search style
[10:14:24] <huon> krebbit: re-configure
[10:14:28] <gavinb> huon: ok
[10:15:09] <huon> (and if it still fails... well then it's a bug with the recent make changes that landed.)
[10:15:18] <krebbit> huon: I tried that... getting the same result
[10:15:22] <huon> krebbit: file a bug
[10:15:26] <huon> please :)
[10:15:51] <gavinb> huon: so to be more specific: I am writing a native Rust TIFF library. The crate will be called ‘tiff’ and I would like to have modules called ‘reader’ and ‘writer’. Currently I have …/src/tiff.rs along with reader.rs and writer.rs in the same folder. Is that right?
[10:16:14] <gavinb> I got some weird ‘name not found’ problems when trying to use enums etc defined in tiff.rs from reader.rs.
[10:16:28] <huon> gavinb: that's right
[10:16:37] <gavinb> Although that could have also been confounded by an extra ‘pub mod tiff {‘ stuttering.
[10:16:41] <gavinb> huon: cool, ok
[10:17:04] <huon> (although one convention is to call tiff.rs 'lib.rs', no particular need to change though)
[10:17:24] <gavinb> heh I had it lib.rs before and just renamed it - will go back.
[10:17:26] <huon> having a nested module may lead to confusion yes
[10:17:29] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[10:17:50] <huon> and you need to import the variants of an enum too
[10:18:12] <gavinb> huon: yes! what a PITA! So that’s on purpose?
[10:18:34] <huon> theoretically
[10:19:09] <gavinb> huon: so in reader.rs, every single thing from lib.rs has to be in a “use tiff::{foo,baz,bar}” line?
[10:19:16] *** Quits: ssira_ (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[10:19:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:19:24] <gavinb> That’s the only way I could get it to work, but it feels very clumsy.
[10:19:37] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:19:46] <gavinb> I’ve already tripped over the “enum variants are in the module namespace, not nested within the enum type” problem. :/
[10:20:16] <huon> gavinb: only if you have a nested module `tiff`
[10:20:26] <huon> ... without the module it has to be `use {foo,bar,baz}`
[10:20:32] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[10:20:33] *** Joins: Ferreus (ferreus@moz-82C86BB7.dip0.t-ipconnect.de)
[10:20:49] <huon> (or even just using `super::foo()` at the call sites, in direct children)
[10:21:18] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[10:21:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:22:06] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[10:22:12] <gavinb> huon: it shouldn’t be nested
[10:22:20] *** Quits: Ferreus (ferreus@moz-82C86BB7.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.4-dev)
[10:22:22] *** Joins: Ferreus (ferreus@moz-82C86BB7.dip0.t-ipconnect.de)
[10:24:28] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[10:25:35] *** Quits: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com) (Client exited)
[10:27:45] <gavinb> huon: ok so having removed “pub mod tiff { …” from lib.rs, I updated reader.rs to build. But it seems to want “use ByteOrder, xxx, yyy, zzz” or it won’t see any of these things. But if this is being pulled into the ‘tiff’ namespace, they should be visible, surely? What does it mean to not have a module prefix on a ‘use’ statement?
[10:27:54] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Client exited)
[10:28:14] <huon> gavinb: `use` is always from the crate root
[10:28:23] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[10:28:33] <huon> while normal expressions/statements are scoped in the current module
[10:28:50] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[10:29:01] <huon> so `use {ByteOrder, ...};` brings the ByteOrder in the crate root into the scope of the current module
[10:29:40] *** Quits: [squiddy] (squiddy@moz-686F69E9.dip0.t-ipconnect.de) (Quit: Leaving)
[10:29:51] <huon> (You can force a path in an expression to be from the crate root by prefixing it with `::`, e.g. writing `::ByteOrder` works in an expression without the use, although this syntax doesn't work in `match` patterns at all.)
[10:30:47] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[10:32:49] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[10:33:14] <gavinb> huon: “always from the crate root” - that’s was an aha moment right there… :)
[10:33:35] <gavinb> thanks for your patience btw!
[10:34:33] <huon> np
[10:34:34] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[10:34:42] <huon> <3 people using Rust
[10:34:42] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[10:36:19] <gavinb> well I can now kinda sorta parse a header of a TIFF file saved with Photoshop.
[10:36:21] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[10:36:36] <gavinb> Not going to bother trying to parse the XML gunk they stick in there though!
[10:37:06] <huon> kinda-sorta > not-at-all \o/
[10:37:35] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[10:37:54] <gavinb> :)
[10:38:34] <tfogal> sooo a function that takes an unspecified-size vector cannot be passed a vector with a known size?  or am I reading this error message wrong?
[10:39:19] <cmr> Havvy: you are according to my script :P
[10:39:56] <huon> tfogal: you need to pass a [T,..n] directly to a &[T]
[10:39:59] <huon> it auto-borrows
[10:40:03] <cmr> tfogal: arrays ([T, ..n]) can be coerced to slices (&[T]) if that's what you're asking.
[10:40:26] <tfogal> do i need to do the coercion my self?  i.e. with std::cast::transmute?
[10:40:42] *** Joins: [squiddy] (squiddy@moz-686F69E9.dip0.t-ipconnect.de)
[10:40:43] <huon> (i.e. if you have x: ~([f32, .. 1 billion]) to pass to a f(&[f32]), you need to write f(*x))
[10:41:02] <cmr> coercions are automatic
[10:41:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:41:12] <cmr> transmute is an unsafe cast.
[10:41:17] <huon> can do it manually with .as_slice() too
[10:41:32] <huon> (which just uses the automatic coercion internally)
[10:41:54] <huon> (the answer to "should I use transmute" is almost always no :) )
[10:42:20] <tfogal> ahh okay, got it now I think.
[10:42:57] <tfogal> thanks!
[10:43:14] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:43:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:43:33] <Ms2ger> $ git grep transmute | wc -l
[10:43:33] <Ms2ger> 152
[10:44:06] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[10:44:57] <Ms2ger> let unsafe_this: *Node = cast::transmute::<&Node,*Node>(self);
[10:44:58] <Ms2ger> Huh
[10:45:09] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[10:47:52] <huon> Ms2ger: kill it with fire
[10:48:10] <huon> (it can be done safely... just by removing the transmute call, in that instance)
[10:48:35] * huon considers running his `unsafe` listing program on servo
[10:48:50] <Ms2ger> Do you have enough memory? ;)
[10:49:36] <huon> I can filter to just the transmutes, at least :)
[10:51:56] <Ms2ger> impl Drop for Node { fn drop(&mut self) { unsafe { let this: &mut Node = cast::transmute(self);
[10:52:11] <huon> looks unsafe to me
[10:52:25] <huon> :P
[10:52:33] <eddyb> maybe we should make noop transmutes an error?
[10:52:35] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[10:52:35] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:52:49] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[10:52:58] * huon wants to make &T -> *T transmutes an error too (and vice versa)
[10:53:07] <doomlord_> (i know enums are padded out to largest for mutability) , but is it possible to get the size of a variant ,  size_of::<T>() wouldn't work? .. a variant isn't a type is it
[10:53:09] <huon> Ms2ger: it may be a hold-over from when drop took &self
[10:53:17] <Ms2ger> Plausible
[10:53:17] <huon> Ms2ger: oh, or it might be a lifetime thing
[10:53:24] <eddyb> doomlord_: a variant is a value
[10:53:30] <eddyb> doomlord_: which is a function (the constructor)
[10:53:34] *** Quits: pingveno (alevar@moz-544E84DC.cat.pdx.edu) (Ping timeout)
[10:53:37] <huon> looks like a hold-over to me
[10:53:42] <huon> given the lack of lifetimes
[10:53:44] <Ms2ger> Yeah
[10:53:49] <strcat> doomlord_: structs/enums are padded to a multiple of the largest alignment, not necessarily the size
[10:53:56] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[10:54:12] <strcat> doomlord_: variants aren't types
[10:54:18] *** Joins: bunkerman (Mibbit@5A74B1AD.C8DC7926.971E19F6.IP)
[10:54:19] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:54:22] <strcat> the type is the enum, the variants are just constructors of it
[10:54:24] <doomlord_> right i know alignment would come into it aswell
[10:54:26] <Ms2ger> huon, want to write a PR? I don't want to get off my rust-upgrade branch :)
[10:54:41] <strcat> struct Foo(u16, u8) has align 2
[10:54:50] <eddyb> and size 4
[10:54:53] <strcat> struct Bar(Foo, u8)
[10:55:00] <eddyb> strcat: how many places do you know that need padded size?
[10:55:08] <doomlord_> right the alignment makes sense
[10:55:09] <strcat> need to pad to align of largest thing (Foo)
[10:55:20] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[10:55:28] <strcat> eddyb: all over? ;p
[10:55:34] <strcat> it's the offset to that u8
[10:55:47] <eddyb> strcat: I thought it was only arrays/vectors
[10:56:00] <strcat> eddyb: that's one of the reasons why it is needed
[10:56:06] <strcat> doesn't mean it only applies there
[10:56:07] <huon> Ms2ger: yeah, sure
[10:56:18] <strcat> rusti: struct Foo(u16, u8); std::mem::size_of::<Foo>()
[10:56:19] -rusti- 4
[10:56:29] <strcat> rusti: struct Foo(u16, u8); struct Bar(Foo, u8); std::mem::size_of::<Bar>()
[10:56:29] -rusti- 6
[10:56:39] <strcat> Foo has align 2 so Bar is padded to Foo's align
[10:56:45] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Quit: WeeChat 0.4.3)
[10:56:52] <strcat> so that if you have [Bar, Bar], the inner Foo is aligned properly
[10:57:05] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[10:57:16] <eddyb> strcat: it's so sad that ((u16, u8), u8) is two bytes larger than (u16, u8, u8)
[10:57:19] <doomlord_> i suppose it would be unwise to put actual rust enums in blobs because the runtime format is subject to change (for optimization) - but i know you've got some #[..] stuff to make enums exchangeable with C 
[10:57:22] <bunkerman> Is it normal for macro syntax in rust to be structured like the example posted on r/rust, the "rust monad" example. I have been learning rust and read the macro tutorial, but that example is a really hard decipher.
[10:57:24] <strcat> rusti: struct Foo(u16, u8, u16); struct Bar(Foo, u8); std::mem::size_of::<Bar>()
[10:57:25] -rusti- 8
[10:57:27] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[10:57:31] <strcat> rusti: struct Foo(u16, u16, u8); struct Bar(Foo, u8); std::mem::size_of::<Bar>()
[10:57:31] -rusti- 8
[10:57:43] <strcat> eddyb: I guess
[10:57:47] <strcat> eddyb: it's just like C though
[10:57:59] <strcat> rusti: #[packed] struct Foo(u16, u16, u8); #[packed] struct Bar(Foo, u8); std::mem::size_of::<Bar>()
[10:58:00] -rusti- 6
[10:58:01] <eddyb> strcat: especially considering how you may never put that into an array
[10:58:20] <eddyb> #[packed] does more than remove the padding, AFAIK
[10:58:23] <cmr> doomlord_: if you're not loading them back in with a same-version Rust, yeah.
[10:58:24] <huon> bunkerman: you mean this one https://gist.github.com/bvssvni/9674632 ?
[10:58:30] <strcat> eddyb: it just removes padding
[10:58:40] <strcat> it is (GNU) C compatible
[10:58:42] <eddyb> strcat: I mean, the end padding specifically
[10:58:54] <bunkerman> huon: yes
[10:58:56] <strcat> rusti: struct Foo(u16, u16, u8); #[packed] struct Bar(Foo, u8); std::mem::size_of::<Bar>()
[10:58:56] -rusti- 7
[10:59:01] <strcat> eddyb: doesn
[10:59:11] <huon> bunkerman: yeah, that one is doing a lot, so it's pretty complicated
[10:59:12] <strcat> doesn't remove nested padding*
[10:59:23] <eddyb> rusti: #[packed] struct Foo(u8, u32); std::mem::size_of::<Foo>()
[10:59:24] -rusti- 5
[10:59:26] <huon> bunkerman: I guess it could be indented/spaced out a little more
[10:59:30] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[10:59:38] <eddyb> strcat: what I mean is that it removes all alignment padding
[10:59:47] <strcat> eddyb: yeah but not nested padding
[10:59:51] <eddyb> strcat: not only the mostly-only-for-arrays one at the end
[11:00:04] <eddyb> I want alignment, I just don't want wasteful padding
[11:00:05] <strcat> eddyb: ah
[11:00:08] <bvssvni> huon: indented? where?
[11:00:12] <huon> bunkerman: most macros are much simpler (e.g. just taking an expression and an ident, or a list of expressions) because they're not trying to imitate real rust syntax
[11:00:41] *** Joins: pingveno (alevar@moz-544E84DC.cat.pdx.edu)
[11:01:07] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:01:27] <huon> bvssvni: maybe like https://gist.github.com/huonw/9759348
[11:01:40] <huon> to make it more obvious what the macro rules are and what the expansion result is
[11:02:28] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[11:02:34] <bunkerman> huon: I see, the thing I think that gets are the seperator tokens, and all the characters at once, it feels like regex kinda.
[11:02:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:02:48] <bvssvni> huon: thanks, updated the gist
[11:02:59] <bunkerman> I meant to say "what gets me"
[11:03:15] <cmr> bunkerman: well I mean, it kinda *is*
[11:03:28] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:03:30] <cmr> regex pattern matches strings, macro_rules pattern matches trees of tokens
[11:03:43] <cmr> fwiw it really did start simple: https://gist.github.com/huonw/9759348/411eee444d3ad72c8dbcc57ea7302cb040668331
[11:03:47] <cmr> it just grew
[11:04:14] <cmr> (yay versioned gists!)
[11:04:33] <huon> bunkerman: yeah, it does take practice
[11:04:42] <bvssvni> I learned a lot by writing that macro :)
[11:04:43] * cmr can still barely read them, often has to squint
[11:05:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:05:29] <bvssvni> a trick is to start with getting the matching right, and then add the logic afterwards
[11:05:31] <bunkerman> cmr: that i can understand, I am worried now though, I hope writing large macros doesn't get taken to the extreme. 
[11:05:55] <bunkerman> huon: I should build up from smaller examples your right
[11:06:04] <strcat> bunkerman: you can write procedural macros in rust
[11:06:12] <strcat> the type-safe format strings are done that way
[11:06:22] <strcat> as is sfackler's compile-time perfect hashing
[11:06:34] <bvssvni> what?
[11:06:35] <strcat> don't have to stick to the declarative token matching
[11:06:37] <bvssvni> link?
[11:06:51] <strcat> https://github.com/sfackler/rust-phf
[11:07:02] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[11:07:08] <strcat> http://static.rust-lang.org/doc/master/std/fmt/index.html
[11:07:20] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[11:07:46] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:08:03] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[11:09:06] <bunkerman> strcat: I'll check that out, I didn't realize that rust could do such extensive metaprogramming
[11:09:19] <bvssvni> it's awesome
[11:09:26] <strcat> rusti: println!("{} {} {}", 2.5, "foo", 10)
[11:09:27] -rusti- 2.5 foo 10
[11:09:27] -rusti- ()
[11:09:32] <strcat> rusti: println!("{} {} {:x}", 2.5, "foo", 10)
[11:09:32] -rusti- 2.5 foo a
[11:09:32] -rusti- ()
[11:09:35] <strcat> rusti: println!("{} {:x} {:x}", 2.5, "foo", 10)
[11:09:36] -rusti- pastebinned 8 lines of output: http://sprunge.us/jUAO
[11:09:37] <eddyb> it's arbitrary code, but more like generating code than, say, C++ template metaprogramming
[11:10:20] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[11:10:28] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[11:10:50] <eddyb> I hope that the move towards a CFG (thanks, pnkfelix :D) will enable even more powerful tools, working on a semantic representation of the code, rather than a syntactic one
[11:10:58] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[11:12:04] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:12:41] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[11:12:59] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[11:13:02] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[11:13:04] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[11:13:44] *** Quits: bunkerman (Mibbit@5A74B1AD.C8DC7926.971E19F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:14:05] <eddyb> imagine converting regex to not Rust code, not Rust AST, but a typed Rust CFG and feeding that into trans
[11:14:11] *** Quits: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu) (Quit: )
[11:17:25] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:18:00] <cmr> of course that's just the problem.
[11:18:16] <cmr> performing useful, good error reporting on a non-syntactic representation of the program.
[11:18:22] <cmr> that's traditionally why it was opposed.
[11:18:26] <cmr> (in rustc)
[11:18:43] *** Quits: vgeddes (vincent.ge@moz-61A0CA3B.access.mtnbusiness.co.za) (Ping timeout)
[11:20:02] <lessless> hey folks, what's up? :) 
[11:20:21] *** Quits: EastByte (EastByte@moz-49503328.ewe-ip-backbone.de) (Ping timeout)
[11:20:35] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Ping timeout)
[11:20:46] *** Joins: EastByte (EastByte@moz-DAFB302C.ewe-ip-backbone.de)
[11:22:01] *** Joins: jviereck1 (Adium@moz-B9C0530E.ethz.ch)
[11:22:04] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Connection reset by peer)
[11:22:15] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[11:22:21] *** Quits: jviereck1 (Adium@moz-B9C0530E.ethz.ch) (Max SendQ exceeded)
[11:22:27] *** Joins: jviereck (Adium@moz-E8F31DD.ethz.ch)
[11:24:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:24:57] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[11:26:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:26:52] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Ping timeout)
[11:26:53] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[11:28:35] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[11:29:03] <huon> krebbit: thanks (assuming you opened https://github.com/mozilla/rust/issues/13128 )
[11:30:13] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[11:30:23] *** Quits: benjamin_ (benjamin@moz-852745DE.dip0.t-ipconnect.de) (Ping timeout)
[11:30:47] <tfogal> Writer::write() takes a &[u8], but I can't seem to get my slice to coerce into this type ("non-scalar cast" error).  I've been stuffing things into a u8 as a workaround (a C API and *c_void makes this possible), but this seems rather gross.
[11:31:02] *** Quits: gimpf (gimpf@moz-F3893FF0.adsl.highway.telekom.at) (Ping timeout)
[11:31:05] <tfogal> How is one supposed to write a chunk of binary data?
[11:31:07] <huon> tfogal: what are you trying to write?
[11:31:11] <huon> oh
[11:31:24] <tfogal> huon: ~([0f32, ..1000*1000*1000])
[11:31:35] <tfogal> for example
[11:31:45] <huon> there's not an amazingly easy way
[11:32:00] <huon> well... I can't really think of a slightly easy way at all
[11:32:19] <tfogal> It seems like Writer needs overrides for each basic type you'd want to write
[11:32:29] <tfogal> or else some coercion mechanism needs to be in there
[11:32:42] <huon> std::slice::raw::buf_as_slice(v.as_ptr() as *u8, v.len() * std::mem::size_of::<f32>(), |slice| write.write(slice))
[11:33:04] <tfogal> wow
[11:33:05] <huon> assuming you just want to dump the whole vector as raw bytes, not even caring about endianness
[11:33:44] <huon> if you do care about endianness you'll have to loop over the vector writing each one with a method like http://static.rust-lang.org/doc/master/std/io/trait.Writer.html#method.write_le_f32
[11:33:48] <tfogal> yeah, exactly.  we typically just describe endianness/other binary metadata, but write it out as-is native
[11:34:06] <huon> oh, ok
[11:34:32] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[11:34:50] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:36:06] <doomlord_> i bet macros could assist with endian swapping blobs
[11:36:35] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:37:03] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[11:37:14] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:37:26] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[11:38:28] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:38:37] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[11:39:16] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[11:39:17] *** jorendorff_away is now known as jorendorff
[11:41:04] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:42:13] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[11:43:06] <tfogal> woooo an upgrade to -nightly fixed my 'only writing 2gb of data' issue, too :-)
[11:43:10] * tfogal dances
[11:44:24] *** Joins: vgeddes (vincent.ge@moz-61A0CA3B.access.mtnbusiness.co.za)
[11:45:06] <eddyb> tfogal: which issue # was that?
[11:45:10] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[11:45:22] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[11:45:43] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[11:46:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:46:39] *** Quits: jviereck (Adium@moz-E8F31DD.ethz.ch) (Quit: Leaving.)
[11:47:56] *** Joins: gimpf (gimpf@moz-CFB7E1A1.adsl.highway.telekom.at)
[11:48:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:49:30] *** Quits: Ferreus (ferreus@moz-82C86BB7.dip0.t-ipconnect.de) (Ping timeout)
[11:49:48] *** Joins: W0rmDr1nk (wormdrink@5451F9BD.52135167.A77EFE04.IP)
[11:50:10] <cmr> presumably fixed by the libnative switch ... which is troublesome.
[11:50:29] <huon> yay libgreen, yay bugs :/
[11:50:49] <cmr> s/libgreen/rustuv/
[11:51:10] <strcat> s/rustuv/libuv/
[11:51:21] <strcat> some at least
[11:51:29] <cmr> certainly some of the bugs are theirs.
[11:51:42] <cmr> though I doubt "only writing 2GB" is among them
[11:52:11] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[11:53:27] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:54:46] <tfogal> eddyb: i dunno the issue #; I use the rust-nightly package and mine was a couple days old, figured i'd try upgrading before complaining
[11:55:11] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:56:49] <tfogal> To be more specific, rust-nightly from '2014-03-21  19:38:25' was broken and rust-nightly from '2014-03-25  12:40:23' works.
[11:57:04] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[11:57:32] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Quit: Konversation terminated!)
[11:57:55] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[11:59:11] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[11:59:56] *** Quits: kvanb (kvanb@moz-1D7B51F2.lnse4.lon.bigpond.net.au) (Quit: kvanb)
[12:00:26] <SiegeLord> Do we have a join function (convert an iterator of strings to a single string)?
[12:00:37] <cmr> SiegeLord: connect
[12:00:58] <cmr> hah, that's not even on iterators
[12:01:46] <cmr> SiegeLord: a flat_map + collect probably does the job
[12:01:50] <SiegeLord> That's a silly trait right there
[12:02:01] <eddyb> SiegeLord: StrVector?
[12:02:04] <SiegeLord> Yes
[12:02:17] *** Joins: kvanb (kvanb@moz-1D7B51F2.lnse4.lon.bigpond.net.au)
[12:02:19] <eddyb> cmr: with no size hints :(?
[12:02:41] <SiegeLord> Also... I thought we got a unicode to_upper
[12:02:49] <SiegeLord> Was that not merged yet?
[12:03:23] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:03:31] <cmr> we did, http://static.rust-lang.org/doc/master/std/char/fn.to_uppercase.html
[12:03:50] <huon> tfogal: if our hypothesis is correct, running your code with libgreen specifically should fail again (example: http://static.rust-lang.org/doc/master/green/index.html#starting-with-libgreen )
[12:03:56] <SiegeLord> That's... for a single char
[12:04:00] *** Joins: vmx (vmx@moz-2D3D320B.dip0.t-ipconnect.de)
[12:04:18] <cmr> correct; the only unicode value in the stdlib :p
[12:04:48] <SiegeLord> If it's not "abc".to_upper(), it's wrong
[12:05:04] <SiegeLord> You really shouldn't need to write 20-30 character iterator incantation to accomplish that
[12:05:18] <huon> SiegeLord: stuff gets added incrementally
[12:05:34] <huon> e.g. the char casing was added just recently
[12:05:56] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[12:06:09] <huon> the string stuff will happen eventually, but we really need to sort out how we arrange our unicode stuff before going crazy with it
[12:06:17] <SiegeLord> Well, at least that's solvable in principle
[12:06:19] *** Joins: Ferreus (ferreus@moz-798C3119.dip0.t-ipconnect.de)
[12:06:27] <SiegeLord> I wonder how to get connect working on iterators
[12:07:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:08:15] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[12:08:51] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[12:09:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:10:38] *** Joins: vmx_ (vmx@moz-2D3D320B.dip0.t-ipconnect.de)
[12:10:53] *** Quits: vmx (vmx@moz-2D3D320B.dip0.t-ipconnect.de) (Ping timeout)
[12:11:00] <gavinb> I’ve defined this: pub trait SeekableReader: Seek + Reader {}
[12:11:15] <gavinb> And std::io::fs::File implements both Seek and Reader.
[12:11:31] <gavinb> But - when I compile, I get the error: error: failed to find an implementation of trait SeekableReader for std::io::fs::File
[12:11:32] <cmr> gavinb: you need `impl<T: Seek + Reader> SeekableReader for T { }`
[12:11:34] <huon> need an explicit `impl SeekableReader for File {}`
[12:11:44] <huon> well, cmr's one is better
[12:12:37] *** Quits: krebbit (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:12:53] <gavinb> oh, ok - cool. So why isn’t it sufficient that the type implements both traits? Why does it need the extra ‘impl’?
[12:13:01] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:13:05] <cmr> gavinb: because declaring a trait does not implement that trait.
[12:13:25] <cmr> given traits like TotalEq and ExactSize
[12:13:40] <cmr> that just state properties that other implementations of existing traits have
[12:13:49] <cmr> it'd be incredibly wrong to automatically implement traits.
[12:14:11] <cmr> (besides the other obvious "why would it be automatic there but nowhere else" consistency things)
[12:14:18] <gavinb> sure, but in this case, it’s just saying it wants a type that provides the union of two traits.
[12:14:28] <huon> the compiler can't tell that
[12:14:32] <gavinb> there’s no extra impl
[12:14:33] <cmr> that's not what it's saying :p
[12:14:42] <gavinb> heh ok…
[12:14:44] <huon> e.g. trait TotalEq: Eq {} looks the same to the compiler
[12:14:52] <cmr> It's saying there's this trait that can only be implemented for types which also implement Reader and Seek
[12:14:54] <huon> (as your one, modulo the extra supertrait)
[12:15:06] <cmr> not that it *is* implemented for all types which also ...
[12:15:42] <gavinb> Well is this the correct way then to say I want a Reader that also provides the Seek trait?
[12:15:43] <huon> could have #[wrapper] syntax extension that does the impl when written like `#[wrapper] trait SeekableReader: Seek + Reader {}`
[12:15:53] <huon> depends
[12:15:56] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:16:08] <huon> in a generic `fn read_seek<R: Reader + Seek>(...) { ... }` is fine
[12:16:19] *** Joins: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net)
[12:16:24] <huon> for a trait object an explicit union trait is needed
[12:16:28] <huon> (erm, intersection)
[12:17:31] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[12:18:48] <gavinb> hm ok, well given I need this in several places a ‘supertrait’ is justified.
[12:18:58] <gavinb> (it’s a file parser)
[12:21:27] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[12:23:12] *** Joins: sk (sk@35CFDE22.E993C7C3.78DD174B.IP)
[12:24:43] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[12:26:44] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[12:29:09] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Ping timeout)
[12:29:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:29:48] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:29:59] <gavinb> So what’s the best way to get a “bucket of bytes” these days? Vec<u8>? Need storage structure for images.
[12:30:14] *** Joins: basta (basta@moz-BA15A5BB.sfr.lns.abo.bbox.fr)
[12:30:30] <eddyb> gavinb: make sure to use Vec::with_capacity in case you have information about its size
[12:30:35] <huon> gavinb: yes
[12:30:43] <eddyb> gavinb: makes operations much cheaper
[12:31:08] *** Joins: mye (mye@moz-C6E6EB2.dip0.t-ipconnect.de)
[12:31:33] <gavinb> ok well I have used Vec::with_capacity() but I found that I still needed to fill it with a default/empty value first (eg. push(0)).
[12:31:37] *** Joins: reverend_paco (chatzilla@AAAEDC44.E4E25A73.D74CC41D.IP)
[12:31:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:31:49] <eddyb> gavinb: you can get it prefilled
[12:32:07] <eddyb> gavinb: but if you're going to add data sequentially, push is cheaper
[12:32:26] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[12:32:36] <gavinb> So random access is O(1) still right? It’s basically just indexing into an array?
[12:32:46] <eddyb> a vector is an array in memory :)
[12:32:54] *** Joins: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com)
[12:33:10] <eddyb> (just with dynamic length)
[12:33:12] <gavinb> yeah but get() probably does bounds checking. I’m used to a bit more low-evel control...
[12:33:14] <Kroisse> it's equivalent to old ~[T]
[12:33:21] <gavinb> (and no function overheads!)
[12:33:23] <eddyb> gavinb: everything does bounds checking
[12:33:33] <eddyb> it's unsafe otherwise
[12:33:36] <huon> gavinb: default values can be done with Vec::from_fn(length, 0)
[12:33:36] <gavinb> sure
[12:33:39] <huon> erm
[12:33:43] <huon> from_elem(length, 0)
[12:33:44] <eddyb> |_| 0
[12:33:46] <eddyb> or that
[12:34:05] <eddyb> gavinb: function overheads don't exist with optimizations
[12:34:22] <gavinb> I assume I can just annotate with a request to inline?
[12:34:30] <gavinb> for the inner loops that is
[12:34:34] <eddyb> only required cross-crate
[12:34:39] <huon> eddyb: they do exist
[12:34:42] <huon> especially with closures
[12:34:50] <eddyb> huon: I mean, like .get(i)
[12:35:02] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[12:35:07] <eddyb> there's generally less function overhead than in C
[12:35:23] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[12:35:24] <huon> eddyb: oh, right
[12:35:34] <huon> thought you were talking about from_fn
[12:35:37] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[12:35:43] <Kroisse> gavinb: http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/vec.rs.html#607
[12:35:43] <gavinb> eddyb: really? how do you mean?
[12:35:45] <eddyb> huon: that's also optimized pretty well
[12:35:50] <Kroisse> it's already marked as #[inlinie]
[12:36:07] <Kroisse> like others do
[12:36:23] <cmr> gavinb: there's also unsafe indexing method
[12:36:25] <cmr> s
[12:36:25] <huon> (it would almost certainly get inlined without #[inline], fwiw.)
[12:36:32] <eddyb> gavinb: keep in mind that something like let n = ...; let v = Vec::with_capacity(n); for _ in range(0, n) {v.push(0);} should be just as fast as Vec::from_elem(n, 0);
[12:36:59] *** Quits: vmx_ (vmx@moz-2D3D320B.dip0.t-ipconnect.de) (Ping timeout)
[12:36:59] <eddyb> gavinb: because the length and capacity are local, the checks inside the push method should be optimized away
[12:37:00] <gavinb> eddyb: interesting...
[12:37:10] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[12:37:20] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[12:37:24] <eddyb> Rust would be pretty bad if LLVM didn't have all these cool optimizations
[12:37:35] <gavinb> but as_slice() creates a Slice{} every time, so would that also get optimized away for every get() call?
[12:37:43] <gavinb> LLVM FTW! :)
[12:38:18] <eddyb> gavinb: everything temporary should be optimized away
[12:38:29] <huon> gavinb: a Slice {} is basically a Vec without the middle field
[12:38:58] <huon> i.e. it's literally going from (length, capacity, pointer) -> (pointer, length)
[12:39:04] <eddyb> huon: middle? aww it would be nice if &Vec<T> could be transmuted to &&[T] :P
[12:39:16] <huon> eddyb: the arg order is wrong too :P
[12:39:27] <huon> we'd need (pointer, length, capacity)
[12:39:38] <huon> but there's probably no particular reason we couldn't do that
[12:40:13] * eddyb wonders if we could have something generic over slices of any dimension
[12:40:39] <eddyb> Vec<T> = Growable<[T]>
[12:41:01] <eddyb> hah, Growable<Trait>, reallocating on assignment
[12:42:54] *** basta is now known as RustProof
[12:43:32] <gavinb> I’m looking forward to DSTs!
[12:43:49] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[12:46:29] *** Joins: asmyers (quassel@1AED7747.A07F7734.FAA4474F.IP)
[12:46:35] <gavinb> Say I wanted to generate some data into a big buffer in a task, then hand this data back to the main task for display. Best to use Arc?
[12:46:49] <cmr> no
[12:46:51] <cmr> just send the Vec
[12:47:01] <cmr> it's a copy of 3 words (modulo pading)
[12:47:06] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[12:47:23] *** Joins: vmx_ (vmx@moz-2D3D320B.dip0.t-ipconnect.de)
[12:47:31] <eddyb> cmr: there should be no padding
[12:47:38] <gavinb> cmr: whoa - yeah good point! hadn’t thought of that.
[12:47:58] <eddyb> ownership: sending is cheap, cloning is costy
[12:48:21] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[12:48:51] <gavinb> but - the main task has to sit on a recv() to get the sent data, right? Or can I poll it in an event loop? :/
[12:49:04] <gavinb> select() for channels??
[12:49:25] <cmr> you can select on channels (but nothing else): http://static.rust-lang.org/doc/master/std/macros/macro.select.html
[12:49:31] <cmr> it also has the try_recv method
[12:50:13] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[12:50:44] <huon> (fun fact: select is so touchy.)
[12:51:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:51:24] <gavinb> ok, so try_recv() in the event loop.
[12:51:24] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[12:51:40] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[12:51:45] <gavinb> I would normally use a pool of buffers (ref counted) and cycle through them, passing a handle between threads (in C++).
[12:52:00] <gavinb> Trying to do something similar with Rust, but idiomatic!
[12:52:08] <huon> gavinb: that should work, just passing them through channels
[12:52:10] <huon> or streams
[12:52:15] <huon> or whatever we call them these days
[12:52:25] <cmr> still channels!
[12:52:36] <huon> but it used to be stream
[12:52:40] <huon> back in my day
[12:52:49] * huon waves his walking stick
[12:53:03] <gavinb> oh I was so glad to see it was renamed to Sender/Receiver.  I always had to double-check Port vs Channel…
[12:53:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:54:03] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:54:09] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:54:14] <gavinb> huon: Yes, indeedy! I remember when we used to have to create our own channels from left over SYSV pipes! You were lucky if you could get a semaphore to yourself!
[12:54:59] <huon> You had a SYSV pipe? Luxury
[12:55:27] <EKK> :D
[12:55:51] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:57:33] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[12:58:33] <RustProof> When should I use HashMap or Vec<(key, value)> or something else ? 
[13:02:26] <cmr> RustProof: use a HashMap.
[13:02:27] *** Quits: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net) (Client exited)
[13:03:09] <huon> if key is hashable
[13:03:17] *** Joins: jviereck (Adium@moz-ABE94737.ethz.ch)
[13:07:12] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[13:07:19] *** Joins: StarLight (StarLight@moz-D7C19C92.dynamic.avangarddsl.ru)
[13:07:39] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (services.mozilla.org (Too many invalid passwords))
[13:07:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:07:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:08:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:08:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:09:06] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[13:09:22] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:09:22] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:09:44] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[13:09:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:09:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:10:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:10:22] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:10:22] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:11:22] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:11:22] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:11:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:11:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:12:22] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:12:22] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:12:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:12:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:12:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[13:13:06] *** Joins: ganitsu (ganitsu@moz-2D7A6CF8.dialup.adsl.anteldata.net.uy)
[13:13:28] <eddyb> repeating the type name in the even return type of a GADT seems redundant to me
[13:13:39] <eddyb> so... here's something crazy https://gist.github.com/eddyb/8a6a88582976d8bfd840
[13:13:41] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[13:14:54] <SiegeLord> Heh, it's like D's static if (if I undestand it correctly)
[13:14:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:15:03] <eddyb> SiegeLord: does D have ADTs?
[13:15:13] <eddyb> and pattern matching?
[13:15:23] <eddyb> you can already write the constructors in Rust for those
[13:15:30] <eddyb> you just can't pattern match on them
[13:15:39] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:15:42] <SiegeLord> I guess maybe I don't get what that does then
[13:15:49] <eddyb> cmr, huon: I don't like `for T =` as much as I did before I wrote it down
[13:16:00] <cmr> eddyb: I don't understand gadt myself yet
[13:16:04] <eddyb> haha
[13:16:18] <cmr> haven't spent the time to when I have enough brain power to do so
[13:16:25] <eddyb> cmr: all I had to do is convert the type signatures to Rust functions
[13:17:29] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[13:17:30] *** Quits: jviereck (Adium@moz-ABE94737.ethz.ch) (Quit: Leaving.)
[13:17:37] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[13:17:56] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[13:20:41] *** Quits: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie) (Quit: WeeChat 0.4.2)
[13:22:15] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[13:22:53] <eddyb> updated with signatures https://gist.github.com/eddyb/8a6a88582976d8bfd840
[13:23:23] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:23:23] *** ChanServ sets mode: +o jdm
[13:23:50] <eddyb> huon: I think it would have to force that if you have "for T = ...", T won't appear anywhere else in the variant
[13:24:21] *** Quits: mark_edward (mark@moz-E0F1AB04.hsd1.in.comcast.net) (Ping timeout)
[13:25:18] <eddyb> huon: and I like `Times<A, B>(Parser<Tok, A>, Parser<Tok, B>) for T = (A, B)` better than reusing the same `a` name in the Haskell definition (which makes it ambiguous if you don't know the rules)
[13:26:18] <huon> what is T?
[13:26:29] <Ms2ger> A tasty hot or cold beverage
[13:26:42] *** Joins: jviereck (Adium@moz-ABE94737.ethz.ch)
[13:26:51] <eddyb> huon: the T in Parser<Tok, T> in the implied return of each of the variants
[13:26:54] *** Joins: huon1 (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[13:26:55] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[13:26:55] *** Quits: jviereck (Adium@moz-ABE94737.ethz.ch) (Client exited)
[13:27:50] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (NickServ (GHOST command used by huon1))
[13:28:00] *** huon1 is now known as huon
[13:28:24] <huon> eddyb: oh
[13:28:32] <huon> I'm dumb
[13:28:32] <eddyb> your nick is green instead of red
[13:28:42] <eddyb> huon: hmm, depending on the type T has, you get less or more variants
[13:28:47] *** Joins: benjamin_ (benjamin@moz-852745DE.dip0.t-ipconnect.de)
[13:28:55] <huon> yeah
[13:29:01] <eddyb> so exhaustive match checking would be interesting
[13:29:13] <eddyb> how does Haskell enforce exhaustiveness?
[13:29:14] <huon> as in, type-based?
[13:29:17] <eddyb> yeah
[13:29:18] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[13:29:20] <huon> it doesn't, in general
[13:29:22] <huon> iirc
[13:29:28] * huon -> bed
[13:29:34] <eddyb> I guess you can allow matching all of the variants in a generic context
[13:29:36] <Ms2ger> Good night
[13:29:52] <eddyb> and depending on the type, ignore certain variants in trans
[13:30:43] <eddyb> Parser<MyToken, ()> would have 3 variants, Zero, One, and Push
[13:32:35] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[13:32:40] <eddyb> Parser<MyToken, ~[MyToken]> would have Satisfy and Push
[13:32:49] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[13:32:51] <eddyb> huon, cmr, nmatsakis: I want GADTs so bad nao :D:D:D
[13:33:07] <eddyb> they can solve, like, 3 or 4 problems in libsyntax and librustc
[13:34:13] <eddyb> (and they shouldn't be too hard to implement, I'd say just slightly harder than default type params - and working on similar levels)
[13:34:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:34:44] <doomlord_> GADT=? 
[13:34:55] *** Joins: edwardw (edwardw@23A73486.E441A06D.FAED9FFC.IP)
[13:34:57] <eddyb> doomlord_: http://www.haskell.org/haskellwiki/GADT
[13:34:58] <pnkfelix> doomlord_: Generalized Algebraic Data Type
[13:35:09] <eddyb> doomlord_: pro tip: read a -> b -> c as (a, b) -> c
[13:35:22] <eddyb> that's how I finally understood what is what
[13:36:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:36:50] <pnkfelix> doomlord_: its where you can have an enum<T> where each variant gets to produce something more specific than enum<T>.  (i.e. each variant can plug in a more interesting type in for `T`)
[13:37:24] <eddyb> pnkfelix: I guess it's not a bad idea to make the "plug" more specific than just specifying the full type
[13:37:29] <doomlord_> the type can select ?
[13:37:43] <doomlord_> match on types?
[13:37:53] <doomlord_> (allowing match on type information later)
[13:37:59] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[13:38:21] <doomlord_> (by virtue of 'each variant plugging in a more interesting type for T)
[13:38:32] <pnkfelix> doomlord_: you match on enum variants still, but the particular variant then gives you a more specific type info
[13:39:17] <doomlord_> is that like another way of doing C++'s overloading but within the framework of an ADT instead of being adhoc
[13:40:02] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[13:40:10] <eddyb> doomlord_: I know what I would use it for
[13:40:45] <eddyb> to have ident-level macros you'd need enum Ident {IdentName(Name, CrateId), IdentMac(Mac)}
[13:41:03] <pnkfelix> doomlord_: the prototypical example given in research papers is when you are representing expressions in a language
[13:41:32] <eddyb> but Ident is used all over the place *and you don't want it to be larger*
[13:41:45] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:41:50] <eddyb> (Name, CrateId) is one word on x64, for example
[13:42:12] <doomlord_> ah, so the enum itself becomes like a type parameter later ?
[13:42:31] <eddyb> with GADTs, you can have enum Ident<Stage> {IdentName(Name, CrateId), IdentMac(Mac) for Stage = PreExpansion}
[13:42:32] <doomlord_> compiling different codepaths where the variants are more specific
[13:42:42] <pnkfelix> doomlord_: enum Term<a> { Lit(bool) constructs Term<bool>, If(Term<Bool>, Term<a>, Term<a>) constructs Term<a>, ... }
[13:43:02] <pnkfelix> doomlord_: normal ADT's force each variant in an enum Term<a> to all construct Term<a>.
[13:43:07] <doomlord_> i get the impression its not *just* variable size variats, right :)
[13:43:15] <eddyb> doomlord_: and now Ident<SomethingOtherThanPreExpansion> is just as small as before (but this is strictly from an optimization point of view)
[13:43:26] <eddyb> doomlord_: it's a variable number of variants :P
[13:43:39] <doomlord_> ah...
[13:44:34] <pnkfelix> eddyb: variable number of variants?
[13:44:42] <pnkfelix> eddyb: that's not my mental model of GADTs
[13:45:41] <doomlord_> generic variants?
[13:47:13] <eddyb> pnkfelix: that's one of the results in our monomorphization world
[13:47:44] <pnkfelix> eddyb: unless you mean "variable number" in the sense that after plugging in the type for T, you have some subset of the original set of variants available.
[13:47:52] <eddyb> pnkfelix: yupp, that
[13:47:55] <tfogal> huon: apologies for the delay.  if I follow the 'Starting with libgreen' code, then my program immediately dies with 'task '<main>' failed at 'called `Result::unwrap()` on an `Err` value', /build/buildd/rust-nightly-201403250405~6bf3fca~saucy/src/libstd/result.rs:187'.  I don't use unwrap myself, so I guess this is really dying in the std library. :-(
[13:48:10] <eddyb> pnkfelix: I'd use "dynamic" for the other sense you were probably thinking of
[13:48:28] <pnkfelix> eddyb: Okay.  I was thinking "variable number" as in "variadic number of arguments", which usually implies "arbitrarily large"
[13:48:35] <eddyb> aah
[13:49:00] <eddyb> but I said "variable number of variants" how does "variadic arguments" come into that?
[13:49:04] <eddyb> tfogal: run with RUST_BACKTRACE=1
[13:49:23] <pnkfelix> eddyb: typo
[13:50:08] <pnkfelix> eddyb: (point remains, "variable number of _", like many phrases, is open to interpretation)
[13:50:09] <tfogal> eddyb: http://itsapad.appspot.com/872001
[13:50:25] <eddyb> we could also use uninhabited types for a similar effect
[13:50:40] <eddyb> Result<T, !> or Result<T, Void> could be just T
[13:51:41] <eddyb> nmatsakis: and in that case, you can put a type parameter in the variant you want to remove and change that type parameter between () and !/Void
[13:52:54] *** pmoore|buildduty is now known as pmoore|brb
[13:52:59] <eddyb> tfogal: odd
[13:53:10] <eddyb> tfogal: can you gist your code?
[13:53:16] <tfogal> eddyb: sure, sec.
[13:54:49] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[13:54:54] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:55:10] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[13:55:12] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[13:55:13] <tfogal> eddyb: https://gist.github.com/tfogal/9762303.  annoyingly it put my boilerplate wrapper code before the 'real' code, so you have to scroll a bunch.
[13:55:13] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[13:55:29] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[13:55:44] <tfogal> also apologies for my illegible nightmare, just getting started with rust
[13:56:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:56:16] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[13:56:40] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:56:42] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:56:52] *** Quits: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com) (Client exited)
[13:56:52] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:56:58] *** Joins: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com)
[13:57:56] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[13:58:07] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[13:58:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:59:56] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[14:00:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:00:20] *** jorendorff is now known as jorendorff_away
[14:01:57] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[14:02:10] *** Joins: jviereck (Adium@moz-ABE94737.ethz.ch)
[14:02:36] *** Quits: jviereck (Adium@moz-ABE94737.ethz.ch) (Quit: Leaving.)
[14:03:05] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[14:04:01] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Connection timed out)
[14:04:26] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[14:05:17] <eddyb> tfogal: Rust is most readable with 4 space indents, fwiw
[14:05:41] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:05:51] <eddyb> tfogal: does it still fail if you comment out everything after println!("main") in main?
[14:06:02] * strcat likes 2 space indents :(
[14:06:05] <strcat> although I use 4 for rust
[14:06:14] * strcat likes consistency
[14:06:18] <strcat> I use camelCase in js
[14:06:28] <eddyb> yeah, me too
[14:06:34] <eddyb> Rust has... other needs
[14:06:39] <strcat> all_lower_case EXCEPT_FOR_MACROS in C and C++
[14:06:47] *** Joins: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[14:06:54] <eddyb> tfogal: lol how do expect this to work? let mut data = ~([0f32, ..1000*1000*1000]);
[14:06:55] <strcat> I hate libraries breaking the rules of the language itself ;)
[14:07:01] <tfogal> eddyb: i put in a revision of the gist after running it through 'rustc --pretty normal'
[14:07:03] <Ms2ger> eddyb, well, people actually tend to feel like 6-space is most readable, but it turns out that 2-4 is better
[14:07:05] *** Joins: huon_ (huon_@moz-7CC720CF.lns20.syd7.internode.on.net)
[14:07:26] <eddyb> tfogal: pretty is broken
[14:07:26] <tfogal> eddyb: i just need a big buffer to pass to a C function
[14:07:34] <sigma> 6 runs me out of column space way too fast
[14:07:45] <sigma> descriptive names or large indents, pick one.
[14:07:59] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[14:08:13] <eddyb> tfogal: it's much easier to just replace ^((  )+) with \1\1
[14:08:47] *** pmoore|brb is now known as pmoore
[14:08:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:08:52] *** pmoore is now known as pmoore|buildduty
[14:08:56] <eddyb> your editor should highlight the replacements so you can tell whether it did the right thing
[14:09:09] <huon_> tfogal: i think IO will work of you add `extern crate rustuv;` along with the green import (i dont know why the example doesnt have it)
[14:09:19] <huon_> *if
[14:09:31] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:09:33] <tfogal> huon_: okay i'll try that
[14:09:35] <eddyb> huon_: was the crate map removal merged yet?
[14:09:52] <eddyb> rusti: 1000*1000*1000*::std::mem::size_of::<f32>()
[14:09:53] -rusti- 4000000000
[14:09:53] <huon_> eddyb: yes, but very very recently
[14:10:06] *** Joins: afrey71 (Mibbit@7C1A4B76.CD25C771.9510F13D.IP)
[14:10:11] <eddyb> tfogal: that's 4GB you want to allocate right there
[14:10:25] <huon_> eddyb: why do you expect a 4gb allocation to be broken?
[14:10:26] <tfogal> eddyb: ? yep?  I do indeed want to allocate 4GB.  That's how big this array is.
[14:10:32] <eddyb> tfogal: oh okay
[14:10:49] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[14:10:53] <eddyb> huon_: OOM isn't obvious IIRC
[14:10:54] <Ms2ger> Is this on 32bit? :)
[14:11:02] <eddyb> Ms2ger: I sure hope not
[14:11:14] <tfogal> 64bit of course :-)
[14:11:23] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[14:11:26] <eddyb> huon_: someone was creating a huge HashMap and didn't know what was wrong with it
[14:11:29] <Ms2ger> Of course? It could have been 128 ;)
[14:11:33] *** jorendorff_away is now known as jorendorff
[14:11:43] <huon_> eddyb: going oom after allocing only 4gb? ... pathetic :P
[14:11:52] <tfogal> huon_: that 'extern crate rustuv' *seems* to have fixed things... but my output file's md5sum is different.
[14:12:02] <tfogal> no errors reported however, runs to completion
[14:12:06] <eddyb> huon_: I easily OOM at 1.4
[14:12:26] <huon_> tfogal: is it doing the write 2gb thing?
[14:12:46] <eddyb> tfogal: and now you run into "3GB is not representable as a c_int"
[14:12:49] <tfogal> huon_: oh! right, hahah.  i forgot the original impetus.  it is indeed the 2gb error
[14:12:56] <huon_> eddyb: downloadmoreram.com :P
[14:13:24] <tfogal> anyway, this system has 32Gb so 4 seems paltry ;-)
[14:13:38] <eddyb> huon_: allocating that much RAM is usually a design flaw, though
[14:13:48] <eddyb> especially since it's immediatelly written to a file
[14:13:50] <huon_> tfogal: looks like it is indeed libuv being broken (or our driving of libuv). maybe you could file a bug?
[14:14:30] *** Joins: jviereck (Adium@moz-ABE94737.ethz.ch)
[14:14:33] <huon_> eddyb: if youve got a lot of data theres not much you can do but make a big allocation
[14:14:38] <eddyb> tfogal: does it work with libnative?
[14:14:45] <huon_> eddyb: yed
[14:14:47] <tfogal> huon_: be glad to, but I'm not really sure what really went on here.  "old rust couldn't write beyond 2gb; upgrade fixed it; but libuv is still broken."?
[14:14:48] <huon_> yes
[14:14:50] <afrey71> Hi. I'm having trouble with Rc<>, again. Trying to link multiple structs via Rc's is not possible, because a contained Rc makes the thing non-sendable.
[14:14:58] <eddyb> huon_: sure, but it's an antipattern :/
[14:15:01] <afrey71> Any pastebin preference? I'd like to show an example.
[14:15:07] <eddyb> gist
[14:15:14] <huon_> tfogal: "libuv cant write huge files"
[14:15:17] *** Quits: vmx_ (vmx@moz-2D3D320B.dip0.t-ipconnect.de) (Connection timed out)
[14:15:18] <eddyb> (and pick Rust highlighting)
[14:15:28] <tfogal> huon_: okay, will do.  thanks again for the help (eddyb too!)
[14:15:37] <eddyb> tfogal: so the upgrade "fixed" it by switching the default to libnative?
[14:15:41] *** Joins: vmx_ (vmx@moz-2D3D320B.dip0.t-ipconnect.de)
[14:16:04] <tfogal> eddyb: as far as I understand?  From my POV, rust-nightly from the 21st failed, rust-nightly from the 25th worked.
[14:16:07] <huon_> eddyb: antipattern? not really... i guess its generally not recommended but large vectors are pretty useful in scientific calculations
[14:16:13] *** Quits: jviereck (Adium@moz-ABE94737.ethz.ch) (Quit: Leaving.)
[14:16:33] <huon_> eddyb: thats my 99%-sure hypothesis
[14:16:40] <eddyb> huon_: eh, just doing my anti-anti-pattern duty :P
[14:16:41] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[14:16:44] <tfogal> yeah, huon_/eddyb; most of my work involves moving and converting terabytes or petabytes from point A to point B
[14:17:02] <eddyb> tfogal: be sure to always consider iterators
[14:17:28] <eddyb> but PB sounds like serious business so I'll shut up
[14:17:30] <huon_> tfogal: (i guess "libgreen/rustuv cant write huge files" is more accurate as a description)
[14:17:47] <kimundi> afrey71: github gists are usually recommended
[14:17:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:17:59] <tfogal> eddyb: would be nice in the long term.  doesn't work well when interfacing with C libraries, though :-(  Especially because this C library can't read portions of the data, it's all or nothin'
[14:18:07] <tfogal> huon_: okay.
[14:18:30] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[14:18:59] <huon_> tfogal: thanks for filing it (preemptively since im going to bed for real now)
[14:19:03] <strcat> tfogal: many C libraries are easy to turn into iterators
[14:19:13] <tfogal> huon_: np, thanks for the help!
[14:19:18] <strcat> lots have an equivalent to next() for paging over data
[14:19:21] <tfogal> strcat: oh?  doc link?
[14:19:33] <eddyb> we have an iterator guide, I think
[14:19:37] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:19:39] * tfogal googles
[14:19:42] <tfogal> .. but after I file this bug.
[14:19:55] <strcat> tfogal: an iterator is just a type with an Iterator implementation, which is next(&mut self) -> Option<T>
[14:20:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:20:04] <strcat> and then you get all the methods (and for loops)
[14:20:21] <afrey71> Egad, I don't get rust highlighting to work. But here's my test script: https://gist.github.com/anonymous/9762795#file-multi-rc-linking3
[14:20:28] <strcat> if a C library provides some kind of cursor API, you can map it to that
[14:20:28] *** Parts: huon_ (huon_@moz-7CC720CF.lns20.syd7.internode.on.net) ()
[14:21:03] <kimundi> afrey71: You get highlining if you name the gist file something that ends with .rs
[14:21:38] <eddyb> tfogal: I already found the source of the bug
[14:21:46] <eddyb> tfogal: https://github.com/mozilla/rust/blob/master/src/librustuv/uvll.rs#L371-L384
[14:21:46] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[14:21:57] <afrey71> kimundi: heh.. those good old DOS relicts... didn't think of a file name for those... thanks for the hint.
[14:22:16] <eddyb> tfogal: for writing > 2GB at once you need to do multiple uv_write calls in a loop
[14:22:18] <tfogal> eddyb: "as i32"?
[14:22:31] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[14:22:33] <eddyb> tfogal: it casts because the uv API takes a c_int
[14:22:46] <kimundi> afrey71: Yeah, I also don't understand why it doesn't work any other way for gists, despite having a selection box right next to the name field... :P
[14:23:09] <afrey71> I guess my basic question is: Is there any better approach than using an enum and explicitly listing all possible implementations of the trait FooIsh?
[14:23:13] <eddyb> tfogal: it should really do a loop and stop whenever it gets an error
[14:23:20] <tfogal> perhaps a better fix is to have uv take a size_t?  I'm not familiar with uv or what it is, to be honest, and if it can be modified.
[14:23:31] <eddyb> tfogal: it's not ours
[14:23:47] <tfogal> sad face.
[14:23:52] <eddyb> Joyent makes libuv for node.js, and there's a few projects using it outside of that
[14:24:08] <afrey71> Or put another way: Why is Rc<> not sendable?
[14:24:17] <eddyb> afrey71: because it's not thread safe
[14:24:19] <strcat> because it doesn't do atomic refcounting
[14:24:19] *** Joins: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP)
[14:24:21] <strcat> Arc does
[14:24:25] <tfogal> still, it seems desirable that this would loop under the hood.
[14:24:25] <kimundi> afrey71: Rc is not sendable because it does not do threadsafe reference counting
[14:24:31] <strcat> Arc is Rc with atomic refcounting
[14:24:45] <kimundi> afrey71: However, I think your problem is simply the default Send bound on trait objects
[14:24:50] <eddyb> tfogal: I don't know how feasible it is to make uv_write take a size_t
[14:25:34] <kimundi> afrey71: Change all type declarations of ~Fooish to ~FooIsg:
[14:25:43] <tfogal> eddyb: what about if the 4-arg uv_write in uvll.rs did the looping?  sound viable?
[14:25:45] <kimundi> Err, ~FooIsh:
[14:25:49] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:25:54] <kimundi> collon with nothing after it
[14:26:04] <eddyb> tfogal: that's the short-term fix I would propose
[14:26:12] <afrey71> Well, I'm not really using multiple threads, yet...
[14:26:21] <kimundi> ~Trait is a default notation for ~Trait:Send
[14:26:36] <tfogal> okay.  Thanks.  I'll put all this in the report, maybe drum up a patch late tonight
[14:26:54] <kimundi> afrey71: So you're accidentially forcing the requirement of the Send bound into your code.
[14:27:06] <afrey71> kimundi: and ~Trait:  is what?
[14:27:16] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[14:27:20] <kimundi> afrey71: A trait object with no trait bounds
[14:27:30] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[14:27:38] <kimundi> While ~Trait is a trait object with a Send bound, the same as ~Trait:Send
[14:28:01] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[14:28:14] <kimundi> This will/has change soon, ~Trait will mean the same as ~Trait:
[14:28:21] <afrey71> kimundi: I see. Seems to work, thanks.
[14:28:28] <kimundi> But right now you need to explicitly opt-out the Send bound
[14:29:07] <afrey71> Here's the working variant, including proper highlighting: https://gist.github.com/anonymous/9762998   ;-)
[14:29:42] <afrey71> kimundi: thanks a lot.
[14:29:50] <eddyb> tfogal: huh, we use c_int while the libuv headers have unsigned int
[14:30:07] <strcat> same size at least
[14:30:17] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[14:30:24] <eddyb> tfogal: though even then, it still fails at 2GB and not 4GB
[14:30:26] <strcat> eddyb: this is why we need libclang integrated into resolve
[14:31:08] *** Joins: philix (felipe@moz-A8CCC2BC.user.veloxzone.com.br)
[14:31:24] <eddyb> acrichto: oh dear we're doing it so wrong !!! https://github.com/joyent/libuv/blob/master/include/uv.h#L652-L672
[14:31:36] <eddyb> how does our code even work?
[14:31:41] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[14:31:46] <eddyb> this explains why it's not size_t
[14:31:48] <strcat> they change the uv api all the time
[14:31:59] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[14:32:01] <strcat> the rust uv stuff is really old afaik
[14:32:01] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[14:32:03] <eddyb> strcat: so our submodule is outdated?
[14:32:29] <strcat> I think it probably dates back to before rust has borrowed ptrs
[14:32:39] <strcat> unless acrichto rewrote it all
[14:32:48] *** Quits: Rym (y@D8C40AC1.22F14779.51C6DE68.IP) (Ping timeout)
[14:32:50] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[14:33:19] <eddyb> strcat: this is what we compile https://github.com/rust-lang/libuv/blob/800b56fe6af21ffd8e56aee8cf12dd758f5bbdf1/include/uv.h#L642-L667
[14:33:29] <eddyb> same signature as master libuv
[14:35:44] <eddyb> how does it even work?
[14:36:00] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[14:36:04] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[14:36:08] <eddyb> does libuv not care what you actually put in those "buffers"?
[14:36:29] *** Joins: headcrash (j3rky@moz-97180B8B.nc.res.rr.com)
[14:36:48] *** Quits: headcrash (j3rky@moz-97180B8B.nc.res.rr.com) (Quit: Bye)
[14:36:52] *** Joins: headcrash (j3rky@moz-97180B8B.nc.res.rr.com)
[14:37:05] *** Quits: headcrash (j3rky@moz-97180B8B.nc.res.rr.com) (Quit: Bye)
[14:37:11] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[14:37:17] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[14:37:52] <eddyb> strcat: okay, the uv_buf_t structure has size_t, but the function to construct it takes unsigned int
[14:38:25] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:38:55] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[14:39:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:40:31] <eddyb> strcat, tfogal: oh, silly me, we don't use uv_write there
[14:41:11] <eddyb> but uv_fs_write which takes size_t
[14:41:28] <tfogal> okay, https://github.com/mozilla/rust/issues/13130 filed.
[14:41:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:41:53] <eddyb> uv_write is still broken but I think only for sending 2GB over TCP at once :)
[14:42:31] <eddyb> tfogal: sorry for the bad information, the last few paragraphs in the issue description are inacurrate
[14:42:45] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[14:43:09] <tfogal> oh.  damn.  can you comment on it to correct things, then?
[14:43:50] *** Joins: sunfish (chatzilla@13F2CEC5.7672369.D8E68FF6.IP)
[14:46:33] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[14:46:45] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[14:47:38] <Tari> I want to return an owned (fixed-length known at runtime) vector from a function; there isn't any way to do that right now, is there?
[14:48:25] <eddyb> tfogal: you can edit the description, btw. libuv people tell me to update, things have changed
[14:48:38] <strcat> Tari: sure, return a Vec<T>
[14:48:55] <eddyb> Tari: maybe you mean array?
[14:49:00] <tfogal> eddyb: ahh i see the edit now, sorry haven't used github issues much yet.  will do.
[14:49:01] <Tari> yeah, I meant array
[14:49:09] <Tari> I currently have it returning a Vec<T>
[14:49:24] <eddyb> -> [T] under DST might work (via magic), but I wouldn't bet on it
[14:49:32] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[14:49:43] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[14:49:53] *** Joins: Florob (Florob@moz-39532932.de)
[14:51:20] *** Quits: RustProof (basta@moz-BA15A5BB.sfr.lns.abo.bbox.fr) (Quit: Leaving)
[14:51:47] <Tari> btw, was there a reason there isn't an impl of Index for Vec<T>, or was that just an oversight?
[14:52:25] <eddyb> tfogal: oh, our uv_write usage isn't broken uvll::uv_write(req.handle, self.handle, [slice_to_uv_buf(buf)],
[14:52:25] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[14:52:46] <eddyb> tfogal: what changed since our libuv is that uv_fs_write now takes an array of buffers, like uv_write
[14:53:38] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[14:53:55] <strcat> Tari: not an oversight
[14:54:00] <strcat> Tari: Index is going to be removed
[14:54:12] <strcat> we need new indexing traits
[14:54:20] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[14:54:33] <Tari> ok, I thought I recalled seeing something along those lines
[14:54:48] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[14:55:36] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:56:16] <tfogal> eddyb: got it.  libuv is apparently an external in rust?  so the correct fix would be to update it to the latest release and then work through whatever fails to compile?
[14:56:42] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[14:56:54] <eddyb> tfogal: yeah, but we have two patches on top of the older version :/
[14:57:08] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:57:16] <tfogal> eddyb: well if life was simple it wouldn't be any fun, right? ;-)
[14:57:18] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[14:57:21] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:57:51] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:59:03] *** Joins: cschneid_ (cschneid@moz-CA025D57.ip.mcleodusa.net)
[14:59:29] *** Joins: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net)
[14:59:50] *** Quits: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:00:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:01:01] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[15:01:05] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[15:01:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:01:24] *** Quits: sp3d (sp3d@6361F3B1.19CD1E54.8354FB35.IP) (Connection reset by peer)
[15:02:47] *** Joins: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net)
[15:02:49] *** Joins: benjamin_____ (benjamin@moz-78FA3DD4.dip0.t-ipconnect.de)
[15:03:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:03:25] *** Quits: benjamin_ (benjamin@moz-852745DE.dip0.t-ipconnect.de) (Ping timeout)
[15:04:04] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[15:09:04] *** Quits: Ms2ger (Ms2ger@moz-A26553B6.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[15:09:32] *** Joins: dschatzberg (dschatzber@moz-E2680405.bu.edu)
[15:10:36] <eddyb> tfogal, acrichto: I don't think a libuv upgrade will help :(
[15:10:38] <eddyb> [17:02] <saghul> I think we may have a problem on uv_fs_write
[15:10:40] <eddyb> [17:02] <eddyb> wow, no rebase failures, this is too simple
[15:10:41] <eddyb> [17:02] <saghul> if you send 2 buffers of INT_MAX size, when we store the amount of written data it would overflow, I think
[15:10:51] <eddyb> (ignore the middle line, I forgot to remove it)
[15:11:06] *** Quits: reverend_paco (chatzilla@AAAEDC44.E4E25A73.D74CC41D.IP) (Ping timeout)
[15:12:45] *** Quits: twi (Adium@moz-CF950680.cust.vodafonedsl.it) (Ping timeout)
[15:12:45] <eddyb> tfogal: https://github.com/mozilla/rust/issues/13130 everything starting with "from talking" is probably me being wrong. uv_fs_write *may* be buggy is all I know now
[15:12:52] *** Joins: twi (Adium@moz-CF950680.cust.vodafonedsl.it)
[15:13:03] *** Joins: ChrisOei (ChrisOei@moz-B699DF8C.mycingular.net)
[15:14:07] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:17:22] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[15:18:44] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[15:19:01] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[15:19:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:19:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:20:01] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[15:20:57] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Quit: WeeChat 0.4.3)
[15:21:07] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:21:28] *** Quits: ChrisOei (ChrisOei@moz-B699DF8C.mycingular.net) (Connection reset by peer)
[15:22:47] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[15:22:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:23:06] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:23:08] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:23:27] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:24:38] *** Quits: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:25:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:25:09] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:25:49] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[15:26:17] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:28:02] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[15:28:04] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[15:29:05] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[15:29:09] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[15:29:13] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[15:29:33] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[15:30:06] *** abinader is now known as abinader_lunch
[15:30:20] <tfogal> eddyb: task '<main>' failed at 'called `Result::unwrap()` on an `Err` value', /build/buildd/rust-nightly-201403250405~6bf3fca~saucy/src/libstd/result.rs:187
[15:30:23] <tfogal> doh
[15:30:25] <tfogal> eddyb: https://github.com/mozilla/rust/blob/master/src/librustuv/lib.rs#L429
[15:30:27] *** Joins: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net)
[15:30:27] <tfogal> is what i meant
[15:30:34] <tfogal> what's a uvll::uv_buf_len_t?
[15:31:07] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:31:12] <tfogal> aagh, it's size_t... at least on unix.
[15:31:17] <tfogal> foiled again.
[15:31:50] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[15:34:20] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[15:34:36] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[15:34:38] *** Quits: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:34:48] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[15:34:51] *** vfetwnuncszu is now known as dcrewi
[15:35:05] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Ping timeout)
[15:36:10] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:36:45] *** pmoore|buildduty is now known as pmoore|tea
[15:36:57] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[15:38:03] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:39:12] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[15:41:06] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[15:41:06] *** Quits: cschneid_ (cschneid@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[15:42:17] *** pmoore|tea is now known as pmoore|mtg
[15:42:23] *** Quits: toshok_ (toshok@moz-96BF2AD6.hsd1.ca.comcast.net) (Quit: Computer has gone to sleep.)
[15:42:25] *** pmoore|mtg is now known as pmoore|buildduty|mtg
[15:43:51] <eddyb> you know what I don't like about Haskell docs? it doesn't have instance docs
[15:44:01] <eddyb> like, I can't tell what mplus does for Maybe
[15:44:02] *** Joins: bakkdoor (bakkdoor@moz-9B917FB5.osnanet.de)
[15:44:24] <eddyb> mzero is obviously Nothing
[15:44:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:45:32] *** Quits: bakkdoor (bakkdoor@moz-9B917FB5.osnanet.de) (Quit: Linkinus - http://linkinus.com)
[15:45:49] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[15:46:30] <Eridius> huon: yeah I realized that last night while lying in bed.
[15:46:33] *** Quits: afrey71 (Mibbit@7C1A4B76.CD25C771.9510F13D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:46:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:48:31] *** Quits: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com) (Quit: Leaving)
[15:48:57] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[15:49:54] <eddyb> is `liftM2 (,) (parse x []) (parse y [])` not `return (parse x []), (parse y [])`?
[15:51:46] <Eridius> eddyb: it's been a while, but wouldn't `parse` return a monad, and `liftM2 (,)` apply the (,) operator to the value contained in the monad?
[15:52:12] <eddyb> oh, right
[15:52:19] *** Joins: gwty (gwtypc@D9B150D0.BF328863.137C914F.IP)
[15:52:22] * Eridius heads off to work
[15:53:29] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[15:53:53] *** Quits: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP) (Ping timeout)
[15:54:43] *** Quits: Ferreus (ferreus@moz-798C3119.dip0.t-ipconnect.de) (Ping timeout)
[15:55:14] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[15:55:18] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:55:22] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[15:55:45] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[15:55:50] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: skade)
[15:56:10] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:57:50] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:57:56] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[15:58:19] *** Joins: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP)
[15:59:36] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:59:36] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[16:00:04] *** Quits: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP) (Ping timeout)
[16:00:34] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[16:00:57] *** Joins: khodzha1 (khodzha@143C311.A859D9FD.CA6E2165.IP)
[16:01:08] *** Quits: khodzha (khodzha@43058C92.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:01:48] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[16:01:57] *** Quits: Rym (y@D8C40AC1.22F14779.51C6DE68.IP) (Ping timeout)
[16:02:22] *** Joins: hoverbear (hoverbear@moz-7F2DECA5.wireless.uvic.ca)
[16:04:34] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[16:05:09] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[16:06:01] *** Quits: gwty (gwtypc@D9B150D0.BF328863.137C914F.IP) (Ping timeout)
[16:06:22] *** Joins: onelson (owen@moz-DD666EC5.laika.com)
[16:06:50] *** Quits: [squiddy] (squiddy@moz-686F69E9.dip0.t-ipconnect.de) (Quit: Leaving)
[16:08:19] *** Joins: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP)
[16:08:47] <Tari> I'd like to conditionally compile a function (#[cfg(foo)]), and then only call it when that configuration is active
[16:08:49] *** Quits: santiago (santiago@moz-69361A64.socal.res.rr.com) (Ping timeout)
[16:09:14] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[16:09:16] <Tari> I can't apply the #[cfg()] check to a statement ("expected item")
[16:09:16] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:09:20] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Client exited)
[16:09:22] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:09:29] <sfackler> Tari: cfgs can only be applied to items
[16:09:37] <Tari> yes, I got that
[16:09:43] <myname> can't you just make a nop function?
[16:09:48] <sfackler> you can make a second version of the function that's empty and tag it with #[cfg(not(foo))]
[16:09:48] <pczarn> Tari: make an inline fn within a fn
[16:10:06] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[16:10:20] <Tari> a stubbed-out version is what I was considering doing, yeah
[16:10:28] <Tari> just hoped there might be a nicer way to do it
[16:10:30] <kimundi> if cfg!(foo) { ... } works too
[16:10:48] <Tari> ah, that's the sort of thing I was looking for
[16:10:49] <sfackler> there's an RFC to allow cfg on statements as well
[16:10:58] <pczarn> #[cfg()] should work on match arms
[16:11:23] * hoverbear notes that lust-lang.org is not the same as rust-lang.org
[16:11:37] <mbrubeck> not yet, anyway...
[16:12:15] *** pmoore|buildduty|mtg is now known as pmoore|buildduty
[16:12:16] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[16:12:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:12:43] <myname> hoverbear: i expected a language based on moans and found nothing :(
[16:13:42] <hoverbear> myname: while <aroused> do { moan 5.times }
[16:14:16] <o11c> wouldn't it be { 5.times moan } ?
[16:14:46] <hoverbear> o11c: Depends
[16:15:12] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[16:15:12] *** ChanServ sets mode: +o jdm
[16:15:14] <myname> 5.moans
[16:17:36] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[16:18:09] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[16:19:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:20:13] *** Joins: heftig (heftig@moz-33D186ED.unitymedia.biz)
[16:21:24] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[16:21:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:21:40] *** Parts: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP) ()
[16:22:54] *** Quits: sk (sk@35CFDE22.E993C7C3.78DD174B.IP) (Input/output error)
[16:22:55] <hoverbear> Yeah there is no lust language, someone really should make on
[16:23:20] <eddyb> s/make/turn
[16:24:49] *** Quits: W0rmDr1nk (wormdrink@5451F9BD.52135167.A77EFE04.IP) (Ping timeout)
[16:25:45] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[16:26:01] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[16:27:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:28:16] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:28:59] <hoverbear> eddyb: hah
[16:29:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:29:17] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:29:19] *** Quits: motley (motley@672D2CB5.46EA8228.BB273CC6.IP) (Client exited)
[16:29:22] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[16:29:42] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[16:30:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:30:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:30:47] *** Quits: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:30:59] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:31:25] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:31:31] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:31:31] *** Quits: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP) (Ping timeout)
[16:32:13] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[16:32:13] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:33:02] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:33:15] *** Joins: wippler (Mibbit@AC75EC74.A410FA5.CC1A2609.IP)
[16:33:18] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[16:33:33] <hoverbear> Would https://github.com/Hoverbear/rust-rosetta/issues/26 this be affected by https://github.com/mozilla/rust/pull/12772
[16:34:07] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[16:34:17] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:34:30] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:34:43] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[16:34:54] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:35:13] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[16:35:52] *** Joins: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP)
[16:37:20] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[16:37:31] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[16:39:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:39:34] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:39:54] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[16:40:19] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:40:34] *** Joins: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[16:40:36] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[16:41:01] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Quit: Leaving...)
[16:41:01] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[16:41:14] <Veld> I like the new Vec<T>
[16:41:57] *** Joins: carllerche (carllerche@77CEA1B2.767934EB.9B6EB213.IP)
[16:41:58] <eibwen> Veld: why in particular?
[16:43:01] <Veld> hard to say. I expected some confusion with the changes but I had none.
[16:43:16] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[16:43:52] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[16:44:34] <Veld> I just wanted to give some positive feedback, that's all :)
[16:45:38] <Veld> maybe I like it because Vec<T> is similar to std::vector<T> in C++
[16:47:53] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:49:29] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:49:30] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:49:54] *** Quits: carllerche (carllerche@77CEA1B2.767934EB.9B6EB213.IP) (Ping timeout)
[16:50:31] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[16:50:54] *** Quits: wippler (Mibbit@AC75EC74.A410FA5.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:52:03] *** Joins: toshok_ (toshok@8EC99D26.4B7A7726.A2E931B1.IP)
[16:52:19] *** Quits: jph (user@moz-59A755C2.hackworth.be) (Ping timeout)
[16:52:27] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:54:58] *** Quits: marc_ (uid5324@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[16:56:32] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[16:57:17] *** Quits: Kxepal (Miranda@moz-DE055BA8.pppoe.mtu-net.ru) (Ping timeout)
[16:58:51] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[16:59:00] *** jorendorff is now known as jorendorff_away
[16:59:19] *** Joins: hoverbea_ (hoverbear@moz-18618393.cs.uvic.ca)
[17:00:07] *** Quits: hoverbear (hoverbear@moz-7F2DECA5.wireless.uvic.ca) (Ping timeout)
[17:00:53] *** jorendorff_away is now known as jorendorff
[17:01:15] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[17:01:26] *** Joins: alext (Adium@moz-C0639857.albq.qwest.net)
[17:01:56] *** Joins: Kxepal (Miranda@moz-83F7AF52.pppoe.mtu-net.ru)
[17:02:07] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[17:03:09] *** Joins: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net)
[17:03:10] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[17:03:25] *** Quits: harish (harish@moz-24DD2596.hsd1.ca.comcast.net) (Ping timeout)
[17:03:51] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[17:04:03] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[17:04:10] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Max SendQ exceeded)
[17:04:29] *** Joins: farcaller (Mibbit@588BB99D.CCDC71F0.52991848.IP)
[17:04:34] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[17:05:04] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[17:05:16] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[17:05:45] <farcaller> Hi all. Can someone please advice, how can I get visibility on "rust-intristic"::volatile_store from inside mod { ... }? Sample code: https://gist.github.com/farcaller/cab7d2de9dcc5cc5278a
[17:06:10] *** Joins: Ferreus (ferreus@moz-AB5E9900.lsn.wtnet.de)
[17:06:10] <farcaller> Specifically, I want to get rid of lines 8-11 and 40-43
[17:06:56] <eddyb> farcaller: use {volatile_load, volatile_store};
[17:07:21] <kimundi> DOes a top level {} actually work for use and extern rate yet?
[17:07:32] <farcaller> error: unresolved import: there is no `volatile_store` in `???`
[17:07:48] *** Joins: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch)
[17:07:54] <eddyb> farcaller: maybe use clock::{volatile_load, volatile_store};
[17:08:07] <eddyb> farcaller: I can't tell what absolute path clock.rs has
[17:08:19] <farcaller> yes, that works, thanks :)
[17:08:29] <eddyb> so you have clock::clock?
[17:08:45] *** Quits: edwardw (edwardw@23A73486.E441A06D.FAED9FFC.IP) (Ping timeout)
[17:08:48] <farcaller> the file is init_clock.rs, use init_clock::{volatile_load, volatile_store}; works for me
[17:08:54] <eddyb> ah okay
[17:09:19] <eddyb> rusti: static CLKSRCSEL: *mut u32 = 0x400FC10C as *mut u32; unsafe {*CLKSRCSEL}
[17:09:20] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[17:09:22] *** Joins: edwardw (edwardw@23A73486.E441A06D.FAED9FFC.IP)
[17:09:26] <eddyb> farcaller: ^^ that works btw
[17:09:47] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[17:10:03] *** Quits: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:10:19] <kimundi> farcaller: The important thing here is that use paths are global, that is relative to the crate root. So just giving the body of a module without explicit information about its location in the module tree makes it harder to directly determine the right path to use.
[17:10:22] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[17:10:29] <farcaller> eddyb, I tried that, but it's not really working for volatile_load
[17:10:34] <farcaller> eddyb: error: mismatched types: expected `*<generic #8>` but found `*mut u32` (values differ in mutability)
[17:10:37] *** Joins: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[17:10:52] <eddyb> farcaller: then it should be *u32
[17:10:55] *** Joins: paraze_ (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[17:11:02] *** Joins: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP)
[17:11:08] *** Quits: paraze_ (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Quit: Quitte)
[17:11:16] <farcaller> eddyb: well, that breaks volatile_store :)
[17:11:31] <eddyb> farcaller: how?
[17:11:36] <kimundi> farcaller: For comparison, does "use self::clock::{volatile_load, volatile_store};" work?
[17:11:40] <eddyb> farcaller: aaaah
[17:11:44] <farcaller> eddyb: error: mismatched types: expected `*mut <generic #7>` but found `*u32` (values differ in mutability)
[17:11:55] <eddyb> farcaller: that's not good :/
[17:12:51] <farcaller> kimundi: no, not really
[17:13:20] <eddyb> kimundi: more like super::super
[17:13:23] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[17:13:23] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Quit: Leaving)
[17:13:31] *** Joins: rootnode (rootnode@moz-C9D296CA.pools.arcor-ip.net)
[17:13:40] <farcaller> kimundi: I think I need to drop in rust-core at some point
[17:13:55] <kimundi> Hm, okay. Then I simply did not understand where in this file the use line was supposed to go :P
[17:13:55] <Veld> is it possible to iterate over a vector and get the current element and optionally the next on each step? I'm not sure I understand how a peekable iterator is supposed to be used
[17:13:56] <farcaller> but for now all I need is the volatile load & store
[17:14:20] <eddyb> Veld: .peek()
[17:14:25] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[17:14:39] <farcaller> while I'm here I have to say that rust really seems to have an awesome community :-)
[17:14:51] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[17:14:53] <kimundi> Veld: I peekable iterator is basically a one-element buffer. 
[17:15:00] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:15:20] <Veld> I want something like "for x in vec.iter().peekable() { ... }" where x is a tuple containing refs to the current and next element
[17:15:24] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[17:15:45] <eddyb> Veld: that's a window iterator
[17:15:47] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Quit: Ex-Chat)
[17:15:57] <eddyb> Veld: we have one on slices
[17:16:14] <Veld> thanks, i'll look into it
[17:16:18] *** Quits: twi (Adium@moz-CF950680.cust.vodafonedsl.it) (Ping timeout)
[17:16:28] *** Joins: twi (Adium@moz-CF950680.cust.vodafonedsl.it)
[17:20:09] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:20:13] *** Quits: farcaller (Mibbit@588BB99D.CCDC71F0.52991848.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:20:46] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:22:10] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Connection reset by peer)
[17:22:34] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:23:24] *** Quits: rook (rook@moz-DE88DB2D.hfc.comcastbusiness.net) (Ping timeout)
[17:23:52] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[17:26:06] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[17:28:07] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[17:29:02] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:29:14] *** pmoore|buildduty is now known as pmoore|away
[17:29:51] *** abinader_lunch is now known as abinader
[17:30:35] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[17:30:36] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:31:59] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[17:32:47] *** Joins: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com)
[17:33:17] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[17:34:58] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Ping timeout)
[17:35:09] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[17:35:40] *** Joins: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie)
[17:36:03] *** Quits: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net) (Quit: adu)
[17:36:32] *** Joins: azakai (alon@moz-62518563.mtv2.mozilla.com)
[17:38:56] *** Joins: tgkokk (user@moz-88CCC929.home.otenet.gr)
[17:39:39] *** Quits: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch) (Quit: Leaving.)
[17:40:03] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:40:10] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[17:40:31] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[17:40:41] *** Joins: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch)
[17:41:38] *** Joins: rook (rook@moz-DE88DB2D.hfc.comcastbusiness.net)
[17:41:38] *** Quits: tgkokk (user@moz-88CCC929.home.otenet.gr) (Quit: ERC Version 5.3 (IRC client for Emacs))
[17:41:42] *** flaper87 is now known as flaper87|afk
[17:41:57] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:42:07] *** Quits: Florob (Florob@moz-39532932.de) (Max SendQ exceeded)
[17:42:11] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[17:43:19] <Eridius> eibwen: ping
[17:44:18] <Eridius> eibwen: some days ago you asked if the author of rust-lua was here, and you were pointed at me, but never actually said anything to me. Was there something wanted in conjunction with it?
[17:44:32] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[17:44:46] <Eridius> eibwen: since you appear to be idle right now I'm going back to work, but send me a privmsg and let me know if there's something I can help you with, or whatever it is thaty ou wanted
[17:44:48] *** Parts: libfud (libfud@moz-73F272E4.res-cmts.eph2.ptd.net) ()
[17:46:25] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[17:46:39] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[17:46:53] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[17:47:04] *** Joins: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net)
[17:47:10] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[17:47:41] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[17:48:49] *** Joins: schnozzle (Mibbit@6AB4A86B.8D005735.CDF21F84.IP)
[17:49:15] *** Parts: schnozzle (Mibbit@6AB4A86B.8D005735.CDF21F84.IP) ()
[17:50:12] *** Joins: Denommus (user@237F30EB.6FA539A5.AD91B79.IP)
[17:50:18] <Denommus> hi
[17:50:39] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[17:51:17] *** Quits: benjamin_____ (benjamin@moz-78FA3DD4.dip0.t-ipconnect.de) (Ping timeout)
[17:51:29] <Denommus> I'm trying to compile master in Windows, but it has been stuck on "make[1]: Leaving directory '/c/Users/foo/Projects/rust' for a long time, and I noticed that it only generated binaries for stage0
[17:51:32] <Denommus> is this normal?
[17:52:50] <kimundi> Depending on how long the time was, it might be normal
[17:53:06] *** Joins: assur19 (Mibbit@6AB4A86B.8D005735.CDF21F84.IP)
[17:53:44] *** Parts: assur19 (Mibbit@6AB4A86B.8D005735.CDF21F84.IP) ()
[17:54:17] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[17:54:33] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:54:36] *** Joins: fuogo (Mibbit@AC75EC74.A410FA5.CC1A2609.IP)
[17:56:04] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[17:56:29] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[17:56:55] <Denommus> more than one hour
[17:58:10] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[17:58:30] *** Joins: Ferreus_ (ferreus@moz-AB5E9900.lsn.wtnet.de)
[17:58:31] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[17:58:40] *** Quits: fuogo (Mibbit@AC75EC74.A410FA5.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:59:59] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[18:00:13] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[18:00:46] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[18:02:55] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Input/output error)
[18:03:32] *** Joins: p1start (rewi@moz-E7F3D014.org)
[18:03:56] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[18:04:00] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[18:04:17] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[18:04:24] *** Joins: gwty (gwtypc@CCC73E8.41C13BAD.49FF672.IP)
[18:04:28] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[18:05:10] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[18:05:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Quit: leaving)
[18:05:34] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[18:06:03] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[18:06:16] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[18:06:17] *** Joins: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca)
[18:06:35] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[18:07:07] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[18:08:36] *** Quits: heftig (heftig@moz-33D186ED.unitymedia.biz) (Quit: Quitting)
[18:08:53] *** Joins: jng27 (Mibbit@55B0B969.8E42373.30200F38.IP)
[18:09:06] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[18:09:38] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[18:10:56] <jng27> Amateur question ... I'm curious about tail-recursion in Rust. Is it supported now or has there been any progress ? 
[18:10:57] *** Parts: Chris (chsitter@C5C92391.35A75BF5.E8E9A8EF.IP) ()
[18:11:12] <jng27> I found this but it seems stale --> https://mail.mozilla.org/pipermail/rust-dev/2013-April/003557.html
[18:11:16] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[18:11:30] <jng27> (apologies if this has already been answered before here.)
[18:11:36] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[18:11:48] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:12:29] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:12:55] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:13:03] <eddyb> jng27: it's supported to the limits of a language which kinda maybe models real world :P
[18:13:07] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[18:13:07] *** ChanServ sets mode: +o tjc
[18:13:16] <eddyb> jng27: that is, LLVM will try to do TCO, but there's no guarantees
[18:13:28] <eddyb> s/models/model (that entire sentence was bad)
[18:14:01] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[18:14:13] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:16:26] *** Joins: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP)
[18:17:18] *** Joins: claudiu (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[18:17:29] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[18:17:38] <jng27> eddyb: I see. How about mutual recursion without eating stack space ? (I guess I should read the docs on LLVM then ?)
[18:17:52] <eddyb> jng27: sibling calls?
[18:18:12] <eddyb> jng27: it's easier to just test it, each individual case has different requirements
[18:18:26] <eddyb> Tobba: because scripting languages are too mainstream http://gameprogrammingpatterns.com/bytecode.html
[18:18:51] <Tobba> oh boy they're advocating stack based VMs
[18:18:55] <Tobba> the epitome of shit performance
[18:18:57] <eddyb> Tobba: though.... hehe, just thought of something
[18:19:04] <jng27> eddyb: I don't think it would be a sibling call. The function signatures are different. 
[18:19:19] <eddyb> jng27: easier *and* faster to just use loops
[18:19:28] <eddyb> jng27: but test it anyways, I'm curious
[18:19:44] <olsonjeffery> was the weekly meeting time moved? or is it just not done on the etherpad any more?
[18:19:47] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[18:20:23] <eddyb> Tobba: soo... you can use Rust macros to have a DSL that gets transformed into instructions
[18:20:36] <Tobba> heh
[18:20:42] <Tobba> that'd be cool
[18:20:45] <eddyb> but what's the point when you can write code?
[18:20:45] <jng27> eddyb: I realize that the imperative loop solution is faster. I already have a solution that works that way. I'm trying to author a 'multi-paradigm' example to show others how 'paradigm agnostic' Rust might be.
[18:21:07] <eddyb> jng27: best way is to produce a non-trivial infinite loop and see if it stack overflows
[18:21:17] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[18:21:20] <eddyb> s/best/laziest
[18:21:56] <eddyb> Tobba: "Data > code" is wrong
[18:22:09] <eddyb> does that make the entire post invalid :P?
[18:22:19] <Tobba> :v
[18:22:49] <Tobba> at least that bytecode design doesnt add context sensitive variable length instructions
[18:22:52] <eddyb> Rust code is likely to be less buggy and more efficient
[18:22:55] <eddyb> Tobba: haha
[18:23:05] <eddyb> and you can still use a DSL
[18:23:19] <eddyb> heck, you can bundle the game with librustc
[18:23:34] <Tobba> that'd be amazing
[18:23:38] <Tobba> just disallow unsafes
[18:24:04] <jng27> eddyb: I guess having to do this by experiment is fair enough seeing as rust is still pre 1.0
[18:24:26] <jng27> eddyb: thx
[18:24:58] *** Quits: vmx_ (vmx@moz-2D3D320B.dip0.t-ipconnect.de) (Quit: Leaving)
[18:25:01] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[18:25:01] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[18:25:15] <eddyb> jng27: I doubt there will ever be a simple FAQ answer for "Does Rust support TCO?"
[18:26:42] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[18:27:53] <eddyb> Tobba: in a Rust OS, you can have a suid binary that takes Rust code, denies unsafety, restricts API, compiles that and puts it in the kernel modules directory
[18:28:11] *** Quits: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch) (Quit: Leaving.)
[18:28:18] <Tobba> oh god suid
[18:28:29] <Tobba> take cover its gonna blow
[18:28:33] <Tobba> also loop { }
[18:28:53] <eddyb> Tobba: that won't do shit
[18:28:54] <o11c> these days, I'd go with a scripting language that compiles to LLVM
[18:29:11] <eddyb> o11c: and then JIT the bitcode? that's not bad
[18:29:20] <o11c> since I control the ocmpiler, I can make it safe and ensure no infinite loops without checks
[18:29:35] <jng27> eddyb: After reading this it seems mutual TCO recursion is possible --> http://llvm.org/docs/CodeGenerator.html#tail-call-optimization
[18:29:38] <eddyb> Tobba: since it would likely run on its own thread
[18:29:49] <o11c> that said ... the language I'm working on right *now* I'm trying to convert from a classic stack-based with tagged union to a multi-stack-based with no need for tags
[18:29:49] <Tobba> hm, yeah
[18:30:02] <Tobba> in my kernel that would be a deadly blow for one core, but eh
[18:30:04] <jng27> eddyb: TCO definitely works. I have a function that verifies this.
[18:30:08] <Tobba> I could just add a watchdog that kicks it out
[18:30:25] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[18:30:26] <eddyb> jng27: I can break it with one line ;)
[18:30:28] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[18:30:29] *** ChanServ sets mode: +ao brson brson
[18:30:44] <jng27> eddby: What do you mean ?
[18:30:52] <jng27> eddyb: What do you mean ?
[18:30:59] <sfackler> let _s = ~"pwt"; will probably disable TCO
[18:31:02] <eddyb> jng27: let x=~1; at the start of...
[18:31:04] <eddyb> sfackler: dammit
[18:31:22] <eddyb> you can maybe even get away with less extra characters
[18:31:35] <cmr> ~1;
[18:31:36] <sfackler> since destructors will start running in the wrong order if the function is TCO'd
[18:31:49] <eddyb> cmr: that is dead code
[18:32:11] *** Quits: Ferreus_ (ferreus@moz-AB5E9900.lsn.wtnet.de) (Ping timeout)
[18:32:44] *** jorendorff is now known as jorendorff_away
[18:33:16] <jng27> eddyb: Yes. I the pointer stuff in Rust makes any kind of functional programming much more difficult compared with my experience in other functional languages.
[18:33:17] *** Quits: Ferreus (ferreus@moz-AB5E9900.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[18:34:11] <eddyb> jng27: because Rust doesn't GC by default
[18:34:32] <eddyb> that's a massive gain, compared to the loss of unidiomatic TCO :P
[18:34:57] <jng27> eddyb: There are lots of FP lang compilers where you can disable GC completely. That's not really the issue.
[18:35:10] <o11c> in theory, since Rust has lifetimes, it could reorder destructors, right?
[18:35:23] *** jorendorff_away is now known as jorendorff
[18:35:25] <cmr> jng27: it doesn't claim to be a functional language.
[18:35:41] <cmr> o11c: they're defined to run in reverse order of creation.
[18:35:44] <jng27> eddyb: While Rust's design to be 'paradigm agnostic' is quite noble I'm not sure if it's actually implementable and usable. The approach to pointers in Rust is really cool but it might be a design mismatch for functional approaches.
[18:36:05] *** Joins: Savago (Savago@F7A245C3.E820043D.D4C04133.IP)
[18:36:08] <o11c> cmr: but if you really *care* about that, shouldn't you give them lifetimes?
[18:36:12] <cmr> jng27: it's not a functional language. it's no secret that memory safety makes it harder.
[18:36:14] <sfackler> o11c: you wouldn't want to reorder destructors if they're e.g. mutex lock guards
[18:36:21] *** Quits: twi (Adium@moz-CF950680.cust.vodafonedsl.it) (Ping timeout)
[18:36:26] <cmr> o11c: what would the lifetime signify?
[18:36:28] *** Joins: twi (Adium@moz-CF950680.cust.vodafonedsl.it)
[18:36:30] <cmr> all the lifetimes would be the same.
[18:36:35] <jng27> eddyb: Never said it was a secret or that Rust was trying to be a functional language.
[18:36:50] <cmr> *that our
[18:36:53] <o11c> let a ; let b with lifetime b; let c with lifetime of b;
[18:37:00] <o11c> same scope, but still different lifetimes
[18:37:03] <jng27> eddyb: I'm not making a value judgement about Rust. These are just my observations so far.
[18:37:14] <cmr> o11c: no, lifetimes *are* scopes.
[18:37:49] <eddyb> jng27: I don't think you can't disable GC and get TCO from another language where you can't get it in Rust
[18:37:56] <eddyb> jng27: s/can't/can
[18:38:14] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[18:38:23] <eddyb> jng27: I mentioned GC because it removes the need for RAII destruction which ruins TCO
[18:38:42] <cmr> no it doesn't.
[18:38:47] <jng27> eddyb: You can. Many Common Lisp compilers come to mind. They simply optimize the TCO into something like a for loop and use the stack.
[18:38:59] <cmr> with a gc you need explicit .destroy() or similar, to get the same effect.
[18:39:12] <SiegeLord> I wouldn't say it removes the need for it... D has GC and RAII
[18:39:16] <eddyb> cmr: the GC can run during your recursion
[18:39:18] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:39:20] <cmr> using finalizers with a gc is usually a Bad Idea
[18:39:28] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[18:39:29] <SiegeLord> The latter used for non-memory resources
[18:39:30] <cmr> because of how it interacts with liveness
[18:39:46] <eddyb> SiegeLord: I was referring to the TCO context
[18:39:49] <cmr> (eg see .net's resurection algorithm)
[18:39:57] <SiegeLord> Ok
[18:40:18] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[18:40:40] <eddyb> cmr: hmpf, there's a tangential idea I've had: TypedArena could take a &T and return Option<&'a T> if the pointer was found to be allocated within the arena
[18:40:42] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:40:59] <eddyb> cmr: safely upgrading an anonymous pointer
[18:41:08] <eddyb> s/pointer/reference
[18:42:26] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[18:42:32] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:43:16] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[18:44:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:44:41] *** Joins: voxpopuli (fanservice@E0196E03.1E7BACF1.689607DE.IP)
[18:47:16] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[18:50:08] *** Quits: ktos (ktos@moz-947805C3.swidnica.mm.pl) (Ping timeout)
[18:50:36] *** Joins: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch)
[18:51:11] *** Quits: Rym (y@D8C40AC1.22F14779.51C6DE68.IP) (Ping timeout)
[18:51:58] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[18:52:17] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[18:52:31] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[18:52:56] <jng27> eddyb : Maybe a rule of thumb is don't use owned pointers for functional recursive-style programming in Rust ? Managed pointers are probably ok. Performance in other GCed languages not really an issue any more. Depends on the use case of course.
[18:53:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:53:10] <eddyb> jng27: there are no managed pointers :)
[18:53:23] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[18:53:24] <eddyb> jng27: you can freely pass references around, fwiw
[18:53:30] <jng27> http://words.steveklabnik.com/pointers-in-rust-a-guide
[18:53:36] <eddyb> yeah that's old
[18:53:39] <jng27> Ok
[18:53:51] <jng27> eddyb: So no more GC ? 
[18:53:56] <eddyb> jng27: there was never GC
[18:54:19] <eddyb> jng27: only a crappy built-in ref-counted pointer that pretended to be GC
[18:54:34] <jng27> eddyb: http://static.rust-lang.org/doc/0.9/std/gc/struct.Gc.html
[18:54:42] <eddyb> that's 0.9
[18:54:51] <eddyb> but not even in master that's not implemented
[18:55:11] <jng27> eddyb: Still there's enough on the web to cause confusion. 
[18:55:16] <eddyb> before it's actually implemented, you will get a Rc
[18:55:39] <eddyb> and when it's implemented, it will be optional (and I doubt most libraries would touch it at all. Rust is so powerful without it)
[18:55:49] <kimundi> Hm, how likely is it that a final Gc<T> design might implement Drop?
[18:56:02] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[18:56:02] <eddyb> kimundi: highly unlikely from my pov
[18:56:23] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[18:56:39] <jng27> eddyb: So I should ignore the docs and whatever else has been written about GC in Rust ?
[18:57:04] <eddyb> jng27: the docs are placeholders :P
[18:57:16] <eddyb> I think pnkfelix did get a GC working
[18:57:24] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Ping timeout)
[18:57:36] <eddyb> but it increased the memory usage at least 4 times, without using Gc<T> at all
[18:57:46] <eddyb> (just the overhead of supporting a GC)
[18:58:04] <kimundi> jng27: The plan is definitly to support an actual tracing garbage collector in the future with Gc<T> smartpointers. But there is no final design yet.
[18:58:08] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[18:58:17] <eddyb> and that's a lot for the compiler. it means you can't compile Rust without 6GB of *free* RAM
[18:58:39] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:58:41] *** jorendorff is now known as jorendorff_away
[18:58:42] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[18:58:56] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Connection reset by peer)
[18:59:14] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:59:14] *** Joins: ktos (ktos@moz-947805C3.swidnica.mm.pl)
[18:59:28] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[18:59:42] <jng27> kimundi: Thanks, I was getting really confused.
[19:00:00] *** Joins: W0rmDr1nk (wormdrink@moz-B3199488.access.mtnbusiness.co.za)
[19:00:04] *** jorendorff_away is now known as jorendorff
[19:00:14] * eddyb should tune it down a notch
[19:00:14] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:01:00] <jng27> eddyb: To support any kind of practical FP programming paradigm in Rust there would be no way around having GC.
[19:01:08] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[19:01:21] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Client exited)
[19:01:24] <jng27> eddyb: Which is kinda what you were trying to say, I think.
[19:01:24] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[19:01:56] <eddyb> Rust kinda exposes the fact that pure FP doesn't model nicely on computers :P
[19:02:12] <eddyb> reification isn't free, memory isn't free in general
[19:02:33] <jng27> eddyb: It doesn't model nicely on Von Neumann architectures (not computers). ;-P
[19:03:13] <jng27> eddyb: However, take a look at compilers like GHC and SBCL. They have done an incredible job making it work and being incredibly performant.
[19:03:21] *** Quits: fabiand (fabiand@moz-BD70BA0E.adsl.alicedsl.de) (Quit: Verlassend)
[19:03:25] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[19:03:33] *** Quits: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[19:03:39] <steveklabnik> right, but that's also because they can make assumptions about the language
[19:03:44] <steveklabnik> like, 'gc is acceptable'
[19:03:54] <eddyb> jng27: I'm not saying it's not possible to write optimizing compilers for FP
[19:04:19] *** Quits: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch) (Quit: Leaving.)
[19:04:21] <kimundi> jng27: We had the concept of a manged, shared ownership smart pointer in the language for quite some time, it even had its own syntax: @T. But in recent times, it has been deemed to not be special enough to be build in into the language syntax-wise, which is why we are currently in the progress of completely removing the @T syntax, and replacing it with alternatives like Rc<T> or Gc<T>.
[19:04:37] *** Quits: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP) (Ping timeout)
[19:04:37] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[19:04:49] <cmr> (@T wouldn't have helped tco anyway since it has refcount decrements)
[19:04:54] <jng27> steveklabnik: Sure. There are acceptable work arounds for GC pausing. GC is rarely the bottle-neck anymore unless you need real-time performance.
[19:04:55] <kimundi> That is, library defined shared ownership smart pointers.
[19:05:07] <eddyb> jng27: haha no
[19:05:20] <cmr> jng27: and that's the market rust targets
[19:05:22] <eddyb> jng27: try going close to a browser
[19:05:26] <cmr> it's a systems language.
[19:06:10] <eddyb> one of my project was quite impaired by memory bloat associated with using ES6 on top of v8
[19:06:11] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[19:06:16] <jng27> eddyb: I'm not making recommendations or value judgements about Rust in that regard. Just about FP in general because your comment was general.
[19:06:17] <eddyb> *projects
[19:06:47] <kimundi> Gc is useful for many applications, which is why Rust is going to support it.
[19:06:57] <eddyb> jng27: now I want benchmark games on *memory usage* against Haskell
[19:07:15] <jng27> kimundi: Thanks again for clarifying.
[19:07:18] <eddyb> I'm sure it can perform just as well, but can it use just as little memory?
[19:07:43] <kimundi> tracing gc and refcounting+cycle collecting are both two sides of the same problem anyway.
[19:07:47] <cmr> eddyb: less than java: http://benchmarksgame.alioth.debian.org/u64/haskell.php
[19:08:00] <eddyb> cmr: that doesn't say much, does it?
[19:08:02] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[19:08:08] <eddyb> some GC being less bad than the worst GC?
[19:08:22] <cmr> java has a state of the art gc.
[19:08:29] <eddyb> also, how are those graphs supposed to be read?
[19:08:58] <eddyb> they're like shadows of 3D objects projected onto 2D
[19:08:58] <cmr> http://benchmarksgame.alioth.debian.org/u64/benchmark.php?test=all&lang=ghc&lang2=gcc&data=u64
[19:09:09] <cmr> eddyb: scroll down too
[19:09:13] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:09:18] <cmr> eddyb: each bar is a benchmark, it's split into 3 metrics
[19:09:29] <jng27> eddyb: You can't benchmark again Haskell per se. You would have to benchmark again a Haskell compiler and each compiler with different optimization switches.
[19:09:31] <doomlord_> anyone think there's any truth in the claim that a moving GC can optimize cache and defragment?
[19:09:46] <doomlord_> personally , GC scares me
[19:09:57] <cmr> the value is the number you need to multiply ghc's metric by to get the other compiler's
[19:10:01] <cmr> doomlord_: there is.
[19:10:05] <jng27> eddyb: I'm not looking to get into a performance discussion. I think Rust can potentially fill a very interesting niche and I'm curious. That's all :-)
[19:10:44] <eddyb> cmr: so it's better than C GCC in one benchmark? I bet it's optimizing away some of the memory structures because it has more information
[19:10:50] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[19:11:06] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[19:11:07] <doomlord_> i guess GC might sometimes be a size-performance tradeoff (allow garbage to accumulate and deal with it in batches), supposedly with a gc allocation is "free" and you pay later
[19:11:22] <eddyb> doomlord_: ohh but you pay :)
[19:11:23] <cmr> eddyb: and it's no worse than 3x worse in those benchmarks.
[19:11:37] <eddyb> cmr: which is what happens when you add GC to Rust :P
[19:11:40] <doomlord_> for most of my life i've even been suspicious of dynamic allocators :)
[19:11:41] <cmr> doomlord_: it's always a size/performance tradeoff. you also trade latency for throughput.
[19:12:09] <cmr> (with gc's)
[19:12:16] <eddyb> cmr: I wish the benchmarks game was easier to navigate :(
[19:12:25] <kimundi> doomlord_: I'm pretty sure many smart people have put a lot of brain matter into garbage collectors, though that doesn't mean I know about what a given gc optimzes how and with what algorithm. ;)
[19:12:31] <cmr> moving gc's also need a much larger total amount of memory to perform well.
[19:12:37] <eddyb> cmr: so much boilerplate and redundant stuff it's hard to find what you're looking for
[19:12:51] <cmr> eddyb: not particularly?
[19:13:23] <eddyb> okay I found what I wanted to see http://benchmarksgame.alioth.debian.org/u64/program.php?test=revcomp&lang=ghc&id=3
[19:13:33] <jng27> eddyb: Why not add a GC to Rust ? It could be disabled anyway right ?
[19:13:42] <cmr> jng27: we are.
[19:13:46] <cmr> (adding a gc)
[19:13:48] <eddyb> jng27: yupp (disabled by default)
[19:13:55] <cmr> it's pretty interesting imo
[19:13:57] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[19:14:04] <cmr> I don't think the generational hypothesis is going to hold
[19:14:10] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[19:14:11] <cmr> since if you have a temporary you just won't be Gc'ing it.
[19:14:19] <jng27> cmr: I know. kimundi clarified above. I was just asking why eddyb doesn't think it's a good idea.
[19:14:28] <cmr> ah ok
[19:14:36] <eddyb> jng27: it's a bad idea to *use* it
[19:14:44] <eddyb> (in general)
[19:14:44] <jng27> eddyb: Ok.
[19:14:45] *** jorendorff is now known as jorendorff_away
[19:15:07] <jng27> eddyb: I think in some circumstances it would be but not all. Comes down to the particular use case. No ?
[19:15:08] *** Quits: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:15:08] <doomlord_> supposedly Gc can be better than Rc for shared objects, due to processors having to lock shared refcount objects
[19:15:15] <eddyb> cmr: aaaaand it's more obfuscated than an equivalent C implementation, from my first look
[19:15:25] <eddyb> doomlord_: "lock"?
[19:15:28] <cmr> eddyb: maybe if you don't know haskell :p
[19:15:39] <cmr> eddyb: bus locks, cache coherency, atomics etc. isn't cheap.
[19:15:43] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[19:15:56] *** Joins: hoverbear (hoverbear@moz-1001AAD0.eduroam.wireless.uvic.ca)
[19:15:58] <eddyb> GC would be thread-local though, so no atomics
[19:16:02] <cmr> doesn't help that x86 is strongly ordered and gives you free atomics on < uint size
[19:16:08] <doomlord_> use atomic ops on the refcount operation (at the low level , its got to sync between cpus, right? thats what i meant by lock, the one instruction that does it atomically)
[19:16:13] <cmr> *for shared objects*
[19:16:16] *** Quits: hoverbea_ (hoverbear@moz-18618393.cs.uvic.ca) (Ping timeout)
[19:16:22] <eddyb> (in the case of an equivalent Rc)
[19:16:32] <doomlord_> means more data going between cpu caches
[19:16:35] <jng27> eddyb: I see others that have nothing to do with FP at all. What about Folks coming form the Java world or anyone that doesn't care about using pointers. Let's say there projects don't require that low-level of programming. Seems like most of the programmers in the world from what I know.
[19:16:38] *** Joins: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch)
[19:16:40] <eddyb> doomlord_: Rc is not atomic
[19:16:46] <jng27> *their
[19:16:57] <cmr> jng27: probably shouldn't be using rust then
[19:17:02] <doomlord_> i mean for shared objects (sorry, Arc in rust terms)
[19:17:02] <eddyb> jng27: I thought we would send those people to Go :P
[19:17:20] <kimundi> jng27: Sadly I think if you hope to use Rust without caring about pointers, you're at the wrong language :)
[19:17:33] <eddyb> doomlord_: Arc is tighter than Gc, as I assume we'll have task-local GC
[19:17:36] <jng27> kimundi: That's not what I'm saying at all.
[19:17:44] <jng27> eddyb: Sure :-)
[19:17:55] *** Joins: mgottschlag (quassel@moz-E6FBA482.cust.bluewin.ch)
[19:18:00] <kimundi> jng27: Ah, what did you mean then?
[19:18:09] <jng27> cmr: You're probably right.
[19:18:39] <jng27> kimundi: Even Java programmers should care about pointers and memory management. The problem is they often don't !
[19:18:42] <eddyb> jng27: you can provide a DSL on top of Rust that uses Gc for all pointers, but we're not going to optimize specifically for it
[19:18:54] <kimundi> jng27: Indeed.
[19:19:01] <eddyb> and you get something that has no Rusty benefits
[19:19:07] <jng27> kimundi: Same goes for anyone using dynamic scripting languages etc.
[19:19:12] <kimundi> yeah
[19:19:21] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:19:35] <eddyb> cmr: I see mallocBytes and allocaArray :/
[19:19:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:19:45] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:19:59] <eddyb> cmr: yay C pointer arithmethic in Haskell
[19:20:03] <eddyb> what is even the point?
[19:20:05] <doomlord_> let me check again what the right way to do immutable shared resources is going to be , Arc  ? or a main resource manager task with unique ownership, allowing worker tasks to borrow pointers ? it knows it can't evict anything whilst workers are active.
[19:20:06] <jng27> eddyb: That would be really interesting.
[19:20:12] <eddyb> jng27: would?
[19:20:24] <eddyb> jng27: the DSL or pointer arithmetic in Haskell?
[19:20:26] *** Quits: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:20:30] <jng27> eddyb: The DSL.
[19:20:37] <eddyb> ahh
[19:20:46] <jng27> eddyb: You don't need pointer arithmetic in Haskell and likely never will ;-)
[19:20:57] <eddyb> jng27: look at this mess http://benchmarksgame.alioth.debian.org/u64/program.php?test=revcomp&lang=ghc&id=3
[19:21:09] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:21:49] <eddyb> cmr: I opened Java instead of C by accident and it's pretty readable :|
[19:22:14] <eddyb> cmr: it's also a bunch of boilerplate that would be quite short idiomatic Rust code, likely shorter than the Haskell version
[19:22:15] <kimundi> jng27: Anyway, what I wanted to say is, In Rust the ownership and borrowing model is an integral enough part of the language that ignoring it is simply not possible even for trivial code. And once someone has learned how the ownership model works, memory management becomes relatively easy to reason about, as its just using the same semantics.
[19:22:18] <jng27> eddyb: Yes. I mispoke but usually that kind of thing is a sign of another problem.
[19:22:22] * eddyb is slightly confused
[19:23:27] <pingveno> eddyb: Ew, shootout code
[19:23:55] <kimundi> doomlord_: Either would work probably.
[19:23:59] <jng27> eddyb: Thanks for explaining. So an owned pointer means that I would need to copy the data ? Is that what to_owned() does ? (Please excuse my ignorance about Rust).
[19:24:08] <kimundi> doomlord_: But Arc would be the easy go-to solution.
[19:24:25] <pingveno> It seems like a good chunk of Shootout code is horribly non-idiomatic crap.
[19:24:51] <eddyb> cmr: lol, when it uses less memory it's almost 2 times as slow
[19:24:54] <cmr> jng27: "owned pointer" is just an automatically-free'd malloc'd box
[19:24:55] <pingveno> C++'s binary-trees implementation gets special 'crap' status
[19:25:22] <eddyb> cmr: so what is the freaking point of using pointer magic if even that doesn't run as fast as C?
[19:25:27] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:25:27] <doomlord_> and if i have a object graph representing one 'thing'  (like a skeleton or section of level) ...(uniquely owned internally) , its just going to need one Arc pointer at its root, i'm guessing
[19:25:35] <cmr> eddyb: I don't know, ask the author
[19:25:49] <eddyb> cmr: hang on, is C cheating by creating threads?
[19:25:58] <jng27> cmr: Thanks.
[19:26:26] <doomlord_> actual output would just be single ownership being throw back and forth ('fill this buffer with matrices') ('fill this buffer with collision results') 'give it back to me when you're done'
[19:26:47] <cmr> doomlord_: yeah that sounds about right.
[19:26:48] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[19:26:58] *** Joins: hjr3 (hradtke@77CEA1B2.767934EB.9B6EB213.IP)
[19:27:02] <cmr> doomlord_: I feel like the resource manager approach might be cleaner
[19:27:08] <cmr> worth experimenting with
[19:27:14] <jng27> cmr: So does to_owned() re-assign ownership or make a copy ?
[19:27:27] <jng27> (I think it makes a copy)
[19:27:28] <eddyb> jng27: on strings?
[19:27:29] <doomlord_> the immutable resources absolutely suit a resource manager approach
[19:27:29] <cmr> jng27: copy.
[19:27:38] <cmr> (for the types that implement it)
[19:27:47] <cmr> it takes a &[T] or &str and makes a ~[T] or ~str
[19:27:47] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[19:27:54] <jng27> cmr: That's why I'm interested in managed pointers I guess.
[19:28:03] <jng27> Copy hit vs. GC hit.
[19:28:14] <eddyb> jng27: you should be using & though
[19:28:17] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:28:28] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[19:28:29] <kimundi> jng27: .to_owned() is a method implemented on both &[T] and &str to make it easy to get a owned copy of a non owning slice. Inherently, it requires a copy of the data the &str or &[T] points to.
[19:28:35] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[19:28:48] <cmr> jng27: anything that takes ~str or ~[T] is going to be mutating it in some fashion (usually by pushing data onto it or removing data from it)
[19:28:57] <eddyb> jng27: shared ownership is rarely required, compared to borrowed pointers
[19:29:16] <cmr> so you're going to end up with a new copy anyway even if you're gc'd
[19:29:33] <jng27> eddyb: I do when possible. I'm just still learning to read rustc's confusing (only to me because I'm a noob) error messages.
[19:29:44] <eddyb> jng27: we have some bad error messages
[19:30:13] <eddyb> and I found out today that one of them is hard to fix without breaking the new explicit lifetime placement suggestions
[19:30:18] <doomlord_> output buffers, i have prefered to avoid needing the most intuitive implementation where the worker allocates its output.. one can avoid needing to use any sort of threadsafe allocator for this; i prefer some 'main thread' to know in advance how much intermediate workspace is being used, although for sufficiently variable output you might go back to some sort of shared allocator
[19:30:21] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[19:31:56] <jng27> Thanks everyone. I have one more mutually recursive function to implement. Maybe I can post some links here to my Rust code and you can all rip it apart *clears throat* I mean provide constructive criticism ;-)
[19:32:25] <kimundi> Sure :)
[19:32:26] <jng27> j/k I'm sure there will be lots to laugh at when it's done.
[19:33:58] *** Quits: dranov (dranov@10725E3C.94264913.FB866788.IP) (Ping timeout)
[19:34:04] <kimundi> I mean, its not like we know how to write idiomatic Rust yet, either. We just have a more general idea about it. ;)
[19:34:13] <jng27> Must say though. My first experience here and with the Rust community in general has been a nice surprise compared with many others. Thanks again.
[19:34:33] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[19:34:34] * kimundi wonders what shape Rust is going to stabilize on ultimately.
[19:34:55] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:35:02] <kimundi> jng27: Heh, nice to hear.
[19:35:16] <SiegeLord> You should look at libraries that mention they are written in idiomatic Rust
[19:35:33] *** Parts: thilp (thilp@moz-5DFE9AA4.net) ()
[19:35:39] * kimundi has only real experience with the Rust PL community, so every time someone says that he fears other languages more.
[19:36:25] <kimundi> SiegeLord: That doesn't sound very foolproof without additional information ;)
[19:36:36] <SiegeLord> ;)
[19:36:36] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:36:52] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:37:01] *** jorendorff_away is now known as jorendorff
[19:37:05] <kimundi> "This uses idiomatic Rust code" - 2 year old repo full of @ and internal iteration.
[19:37:07] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[19:40:56] <Denommus> well
[19:41:38] <Denommus> it's been 3 hours compiling Rust, with the message hanged on make[1]: Leaving directory '/c/Users/foo/Projects/rust'
[19:41:41] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[19:41:47] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[19:41:54] <Denommus> no binary produced for stage1 at all
[19:41:56] <cmr> Denommus: windows? did you use -j?
[19:42:01] <Denommus> cmr: yes
[19:42:06] <Denommus> cmr: shouldn't I?
[19:42:13] <cmr> Denommus: no, it hangs.
[19:42:23] <Denommus> ... ok, thanks for the info
[19:42:25] *** Quits: hoverbear (hoverbear@moz-1001AAD0.eduroam.wireless.uvic.ca) (Quit: Taking a nap.)
[19:42:27] *** Quits: dschatzberg (dschatzber@moz-E2680405.bu.edu) (Input/output error)
[19:42:29] <cmr> mingw sucks :)
[19:42:46] <Denommus> still better than Visual Studio, I guess
[19:43:10] <doomlord_> i was just thinking what could microsoft do to get me interested in windows again. Microsoft Visual Rust
[19:43:11] <cmr> mingw-w64 has a working make, we're migrating to that Soon
[19:43:40] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[19:44:11] <edwardw> microsoft itself has a unix-ish user land long time ago, still available?
[19:44:12] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:44:30] *** Quits: ganitsu (ganitsu@moz-2D7A6CF8.dialup.adsl.anteldata.net.uy) (Ping timeout)
[19:44:42] <cmr> the DOS one, or the POSIX-compliant one?
[19:44:48] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Client exited)
[19:44:49] <edwardw> the POSIX one
[19:44:51] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:44:58] <cmr> it's still around I belive.
[19:45:00] <cmr> *believe
[19:45:04] <edwardw> k
[19:45:07] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[19:45:14] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:45:21] *** Parts: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) ()
[19:45:30] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:45:39] <cmr> http://brianreiter.org/2011/09/15/sua-deprecated-in-windows-8/ http://technet.microsoft.com/en-us/library/cc754351.aspx
[19:45:53] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[19:46:08] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:46:09] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:46:18] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[19:46:37] <edwardw> yes, but everyone still uses mingw
[19:47:05] <cmr> yup
[19:47:06] *** Joins: Florob (Florob@moz-39532932.de)
[19:47:07] <doomlord_> how many people here are using rust in windows
[19:47:18] <cmr> doomlord_: I *have* used it, but I don't actively.
[19:47:27] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[19:47:29] <cmr> I also used to cross-compile to windows from linux
[19:48:11] <cmr> hasn't been working recently unfortunately.
[19:48:54] *** Quits: gwty (gwtypc@CCC73E8.41C13BAD.49FF672.IP) (Ping timeout)
[19:49:05] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:49:05] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:50:24] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[19:52:33] *** Joins: hoverbear (hoverbear@moz-DD153AE.wireless.uvic.ca)
[19:54:36] *** Quits: jviereck (Adium@moz-FB3F1E3E.dynamic.hispeed.ch) (Quit: Leaving.)
[19:55:02] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[19:55:03] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[19:55:22] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:55:39] *** Joins: ganitsu (ganitsu@moz-3EF18C0B.dialup.adsl.anteldata.net.uy)
[19:56:45] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[19:56:50] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[19:57:47] *** Joins: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca)
[19:58:50] *** Quits: hjr3 (hradtke@77CEA1B2.767934EB.9B6EB213.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:59:44] *** Quits: W0rmDr1nk (wormdrink@moz-B3199488.access.mtnbusiness.co.za) (Ping timeout)
[20:00:03] *** Quits: Rym (y@D8C40AC1.22F14779.51C6DE68.IP) (Ping timeout)
[20:00:55] *** Joins: W0rmDr1nk (wormdrink@moz-B3199488.access.mtnbusiness.co.za)
[20:01:33] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[20:01:44] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[20:01:49] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:01:50] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[20:03:37] *** Joins: zatnosk (zatnosk@3F251686.8BCBE3D0.500EA053.IP)
[20:06:17] *** Quits: ganitsu (ganitsu@moz-3EF18C0B.dialup.adsl.anteldata.net.uy) (Ping timeout)
[20:06:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:06:48] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[20:07:40] *** Quits: mgottschlag (quassel@moz-E6FBA482.cust.bluewin.ch) (Ping timeout)
[20:09:18] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[20:09:39] *** Quits: asmyers (quassel@1AED7747.A07F7734.FAA4474F.IP) (Ping timeout)
[20:10:13] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:10:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:10:54] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[20:11:54] *** Joins: ganitsu (ganitsu@moz-3EF18C0B.dialup.adsl.anteldata.net.uy)
[20:14:19] *** Joins: Denommus` (user@7ACE3361.B4C8460.B9657DD5.IP)
[20:14:27] *** Quits: Denommus (user@237F30EB.6FA539A5.AD91B79.IP) (Ping timeout)
[20:15:49] *** Joins: huddler (Mibbit@moz-703651C7.barak.net.il)
[20:16:53] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Connection reset by peer)
[20:17:29] *** Joins: gwty (gwtypc@CCC73E8.41C13BAD.49FF672.IP)
[20:19:01] *** Quits: Rym (y@D8C40AC1.22F14779.51C6DE68.IP) (Ping timeout)
[20:19:13] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:19:13] *** ChanServ sets mode: +o tjc
[20:19:53] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[20:20:23] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[20:21:25] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[20:23:29] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:25:46] *** Joins: eholk (eholk@4C33E9A6.EC877627.1378615F.IP)
[20:25:50] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[20:26:31] *** Quits: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:27:31] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[20:28:15] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[20:28:15] *** ChanServ sets mode: +o jdm
[20:28:48] *** Quits: edwardw (edwardw@23A73486.E441A06D.FAED9FFC.IP) (Ping timeout)
[20:29:47] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[20:30:04] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Client exited)
[20:30:42] <kmc> I'm getting an "undefined symbol" error on the macro_registrar function trying to load a procedural macro crate using #[phase(syntax)] extern crate macros = "html5-macros";
[20:30:54] <kmc> but the symbol in the error message appears in objdump of the crate .so
[20:31:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:32:37] *** Quits: jackneill (jackneill@moz-5B5B9AC8.pool.digikabel.hu) (Input/output error)
[20:32:58] *** Joins: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:33:04] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[20:33:12] <kmc> hm, it seems the macro registrar has to be at crate root
[20:33:32] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[20:35:18] <kmc> or at least in a pub mod? dunno
[20:35:53] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[20:36:11] *** Joins: leowoe (Leo@moz-A88FE171.dip0.t-ipconnect.de)
[20:38:43] *** Joins: edwardw (Mibbit@6EFA975B.A7655D4F.FAED9FFC.IP)
[20:38:46] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[20:39:19] *** Quits: W0rmDr1nk (wormdrink@moz-B3199488.access.mtnbusiness.co.za) (Ping timeout)
[20:39:43] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[20:39:53] <kmc> yeah the registrar is collected as dead code
[20:40:23] *** Joins: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca)
[20:41:17] *** Quits: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[20:41:50] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:42:05] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:42:18] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[20:43:36] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[20:44:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[20:46:40] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[20:47:08] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[20:48:04] <sfackler> kmc: it has to be public, but the compiler doesn't check :P
[20:48:18] <sfackler> or I guess reachable specifically
[20:48:29] *** Quits: voxpopuli (fanservice@E0196E03.1E7BACF1.689607DE.IP) (Ping timeout)
[20:48:35] <kmc> yeah
[20:48:47] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[20:48:54] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[20:49:03] <kmc> btw, whatever run-time dynamic linking rustc uses to load syntax modules, is that available to rust code generally?
[20:49:54] <sfackler> std::unstable::dynamic_lib
[20:50:02] <sfackler> it's just a wrapper around dlopen
[20:50:58] <kmc> cool
[20:51:22] <kmc> there's no type checking is there?
[20:51:27] <sfackler> nope
[20:51:34] <sfackler> that'd be a fun project though
[20:51:55] <sfackler> it'd probably involve some very painful refactoring in librustc
[20:52:03] <mcpherrin> Are the types encoded into the binary in any way?
[20:52:15] <sfackler> in the metadata
[20:52:15] <mcpherrin> ie, can you at least check the signature is what you expect?
[20:52:25] <sfackler> that's how the compiler type checks when you link against an extern crate
[20:52:38] <mcpherrin> okay, so it is possible to make a dynamic_lib that checks types
[20:52:43] <sfackler> yeah
[20:52:54] <mcpherrin> sounds like a fun project :-)
[20:52:56] *** Denommus` is now known as Denommus
[20:53:04] <sfackler> but doing it with the setup as it is right now would introduce a librustc dependency on libstd D:
[20:53:08] <kimundi> The problem with making dlopen work is not the typechecking, but memory safety, sadly :P
[20:53:21] <sfackler> yeah
[20:53:35] <sfackler> the syntax extension infrastructure cast::forgets the libraries once they're opened
[20:53:37] <kimundi> If you want safe unloading of a loaded crate, that is.
[20:53:54] <mcpherrin> kimundi: oh, unloading seems too hard :p
[20:53:57] <kmc> yeah, it kind of messes with the meaning of &'static
[20:54:19] <sfackler> you'd have to forbid creation of @ boxes, use of task local data, etc
[20:54:34] <kimundi> I actually fond a way to expose a safe interface, but it requires implementing traits manually for each type you want it to support.
[20:54:55] *** Quits: edwardw (Mibbit@6EFA975B.A7655D4F.FAED9FFC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:54:56] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[20:55:01] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:55:58] <sfackler> I guess if you sequestered all use of the library to its own task you'd be okay but that'd limit the utility I'd think
[20:55:59] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:56:01] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[20:56:17] <kimundi> sfackler: Can send &'static between tasks.
[20:56:57] <sfackler> kimundi: &'static isn't even the only issue. Trait objects will blow things up as well
[20:57:13] <kimundi> Anyway, the main problem is indeed &'static. This main problem splits up in two sub problems: &'static data, and static function pointers.
[20:57:33] <kimundi> And static function pointers include functions, trait objects etc
[20:59:06] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:59:28] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:59:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:59:40] <kimundi> I experimented with wrapping each type that has such a direct or hidden dependency to a static lifetime into something that forces a smaller lifetime: If you can wrap any type that has such a hidden dependdency
[20:59:54] <kimundi> whoops, :https://gist.github.com/Kimundi/9771179
[21:00:29] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:00:56] <kimundi> (Once again something where variadic generics, a function trait, HKT and/or associated types would improve the situation...)
[21:01:19] <sfackler> halp <'a, SA, SR, A: Sdo<'a, SA>, R: Sdo<'a, SR>> SdoFn<'a, A, R>
[21:01:26] <kimundi> Yeah, exactly
[21:01:49] <kimundi> Emulating HKT like this gets unreadable _fast_ :P
[21:02:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:02:26] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[21:03:48] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[21:03:56] <doomlord_> perhaps it's possible to instantiate a slice safely within a blob, 
[21:04:06] <doomlord_> ^if the slice has no pointers
[21:04:31] <kimundi> doomlord_: what do you mean with instantiate a slice?
[21:04:57] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[21:04:59] <doomlord_> create a slice, that rust can use safely - a pointer & size, right
[21:05:07] <kmc> ok, next problem: I can't use the same cx: &mut ExtCtxt in two quote_expr!'s because it gets moved into the first one (??)
[21:05:26] *** Joins: dherman (dherman@77CEA1B2.767934EB.9B6EB213.IP)
[21:05:26] *** ChanServ sets mode: +ao dherman dherman
[21:05:31] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[21:05:50] *** Quits: zatnosk (zatnosk@3F251686.8BCBE3D0.500EA053.IP) (Quit: Have a great life!)
[21:05:57] <kimundi> doomlord_: If you can guarantee that the memory is valid for the lifetime 'a, you can safely create a &'a [T] to a slice of it, yeah
[21:05:58] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:06:04] <doomlord_> let myslice:&'..[ SomeType]=   some_blob.get_slice_within::<SomeType>( byte_start, count); /* safe because it asserts its within range
[21:06:08] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:06:36] <doomlord_> this could clean up some of the messy casting / unsafe compromises that i was having to make
[21:07:42] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[21:08:04] <kimundi> doomlord_: Would that blob contain different types?
[21:08:33] <doomlord_> yes
[21:08:44] <doomlord_> a load of arrays of different types back to back
[21:08:46] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:08:57] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Ping timeout)
[21:08:58] <kimundi> interesting
[21:09:11] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[21:09:12] <doomlord_> all immutable
[21:09:27] <doomlord_> the surest way to eliminate fragmentation
[21:09:31] *** Quits: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca) (Connection reset by peer)
[21:09:37] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:09:41] <kimundi> Well if you can check that you can only get &[T] to areas containing T its fine
[21:09:47] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[21:09:56] *** Joins: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca)
[21:10:29] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[21:10:55] <doomlord_> yes: creating the thing can perform validation; so i guess i only need to put the 'unsafe' there, and explain whats going on, and i'm acheiving this in a more rust-friendly way ... (my current implementation basically uses accessor functions that do the offseting - they dont perform validation.. )
[21:11:20] <doomlord_> i dont mind creating another object that points into it. I suppose the 'other object' can take ownership of the blob, infact. 
[21:11:35] <kimundi> yeah
[21:11:44] <kimundi> This sounds all reasonable :)
[21:11:59] <doomlord_> load_world(..) {  .. load the blob;   create slices view , including ptr to the original blob;  return that.. }
[21:12:42] <doomlord_> let me see what the compiler tells me with lifetimes and so on as i implement it ..
[21:13:26] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[21:13:41] <doomlord_> i'm betting macros will handle a potential endianswap no problem
[21:13:48] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:14:14] <kimundi> well it won't work like that directly because slices like all references are rooted in the stack. So moving the blob will prevent you from making slices into it and returning them too, even if the memory location is identical. However, that deosn'T mean this sin'T possible, it just requires a slightly different approach.
[21:15:03] *** Quits: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca) (Ping timeout)
[21:15:27] *** Joins: jfhall (jfhall@moz-B3D0D48E.dhcp.snlo.ca.charter.com)
[21:15:36] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:15:36] *** Quits: dherman (dherman@77CEA1B2.767934EB.9B6EB213.IP) (Quit: dherman)
[21:15:44] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Client exited)
[21:15:47] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[21:16:13] *** Joins: ahunt (ahunt@moz-5E5AB5C8.range86-145.btcentralplus.com)
[21:16:15] *** Joins: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca)
[21:16:58] <Denommus> ok, so I managed to compile Rust in Windows
[21:17:08] <Denommus> is there an automated way to generate a msi?
[21:17:29] <kimundi> For example, you can load the world and keep it on the stack, making everything that uses references into it simply live further down the stack. Or you make the ownership more dynamic, with borrowed slices becoming ref counted handles to the blob exposing access to a slice.
[21:18:21] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[21:19:18] <kmc> is there a pattern for matching the head and tail of &[T] ?
[21:19:41] <huon> kmc: [a, .., b]
[21:19:44] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[21:19:45] <huon> (possibly with ref's
[21:19:47] <huon> )
[21:19:59] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:20:03] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[21:20:15] <Denommus> ,help
[21:22:26] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[21:23:07] <Denommus> .help
[21:23:07] *** Quits: lawrence (lawrence@moz-52D8F6A1.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:23:48] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[21:25:17] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[21:26:13] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[21:26:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:26:46] <jfhall> can someone briefly tell me (or point me to documentation) what stage means in the context of a compiler (e.g. the stage1 compiler)
[21:27:22] <huon> .Denommus: ,need -assistance?
[21:27:39] <aatch> cmr, don't forget the differential in Phabricator
[21:27:41] <kmc> jfhall: the rust compiler is used to compile itself
[21:27:47] <Denommus> huon: I don't remember how to use the bot
[21:27:53] <kmc> the stage0 "snapshot" is a binary downloaded from the internet
[21:27:57] <kmc> that's used to compile stage1
[21:28:01] <kmc> the stage1 compiler is used to compile stage2
[21:28:11] <huon> Denommus: which bot?
[21:28:12] <doomlord_> i sthere reference of all the lang items somewhere ?  i seem to remember there was a way to declare an enum as a specific type eg i32, can't remember how though
[21:28:14] <jfhall> @kmc: why is there a need for a stage2
[21:28:30] <jfhall> @kmc: because we can allow for a more complex language than stage0 can handle?
[21:28:34] <kmc> jfhall: to make sure that the current version of the compiler can still compile itself
[21:28:49] <jfhall> @kmc: ok that makes since
[21:28:52] <kmc> and perhaps to get a compiler whose performance includes the latest optimizations 
[21:29:04] <jfhall> @kmc: thank you
[21:29:13] <kmc> sfackler: how can I get the filename of the module where my procedural macro is being expanded? looks like I can get it from the span and the codemap but is there a less roundabout way, or some example code?
[21:29:17] <kmc> jfhall: np :)
[21:29:21] <Denommus> huon: rust-buildbot?
[21:29:40] <Denommus> jfhall: you don't need @ in IRC. That's a twitter thing
[21:29:41] <cmr> aatch: ah yes
[21:30:10] <sfackler> kmc: file!() will expand to a &'static str with the current file iirc
[21:30:24] <sfackler> there's also line!() col!() and module!()
[21:30:43] <kmc> okay... any way the macro can do it without the macro user needing to include one of those?
[21:30:53] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[21:31:08] <aatch> cmr, goddammit, that discussion was rather.. unproductive.
[21:31:24] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[21:31:27] <sfackler> the codemap is probably the most straightforward way
[21:31:36] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[21:31:36] <sfackler> I'd check out the definition of file!~()
[21:31:45] <cmr> aatch: I'll talk after
[21:31:49] <sfackler> it's in syntax::ext::source_util or something
[21:32:01] <kmc> okay, thanks
[21:32:10] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[21:32:13] <jfhall> Denommus: kmc has @ in his name, so I figured it was necessary
[21:32:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:32:25] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[21:32:25] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:32:48] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[21:33:11] <aatch> jfhall, that just means hes an op
[21:33:15] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:33:23] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[21:33:38] <jfhall> aatch: ah, got it... I never really use irc, thanks for the advice
[21:34:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:34:55] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[21:35:14] *** Quits: goffrie (goffrie@moz-2E1C73A.dsl.ncf.ca) (Ping timeout)
[21:35:15] *** Joins: adonohue (adonohue@moz-FB94486E.thefacebook.com)
[21:35:25] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[21:35:50] *** Joins: goffrie (goffrie@moz-2E1C73A.dsl.ncf.ca)
[21:38:01] *** Quits: Savago (Savago@F7A245C3.E820043D.D4C04133.IP) (Quit: Savago)
[21:38:27] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[21:38:29] *** Quits: nik_ (nik@moz-E19B3337.pool.mediaways.net) (Client exited)
[21:38:35] <kmc> is there a way to get @-patterns back? I really want them for working with the Rust AST
[21:38:53] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[21:38:57] <sfackler> run your own fork of rust with that change reverted :P
[21:39:18] <kmc> :(
[21:39:19] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:39:36] <kmc> so I can't use pattern matching on the AST
[21:39:50] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[21:40:24] <huon> kmc: yeah, you need nested matches now :(
[21:40:42] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Quit: Leaving)
[21:41:33] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Connection reset by peer)
[21:41:37] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:41:39] *** Quits: adonohue (adonohue@moz-FB94486E.thefacebook.com) (Quit: adonohue)
[21:41:46] *** Joins: adonohue (adonohue@moz-FB94486E.thefacebook.com)
[21:42:11] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[21:43:03] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[21:44:07] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[21:44:47] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[21:45:37] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[21:49:30] <whitequark> will that ever be restored?
[21:49:44] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[21:49:54] *** Joins: Ms2ger (Ms2ger@moz-A26553B6.adsl-dyn.isp.belgacom.be)
[21:50:05] <sfackler> @ is going away, so no
[21:50:26] *** Quits: philix (felipe@moz-A8CCC2BC.user.veloxzone.com.br) (Ping timeout)
[21:50:32] *** Joins: philix (felipe@796A2AA4.64EB872B.5670445F.IP)
[21:50:33] <whitequark> well... there's box(Gc) I think?
[21:50:39] <whitequark> will be
[21:51:29] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[21:52:07] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[21:52:53] *** Quits: ganitsu (ganitsu@moz-3EF18C0B.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.1)
[21:54:00] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[21:54:05] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[21:54:07] *** Joins: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP)
[21:54:15] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[21:54:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:54:49] *** Quits: murph (murph@moz-29F9DAC6.oracle.com) (Broken pipe)
[21:54:52] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[21:55:00] *** Joins: murph (murph@moz-29F9DAC6.oracle.com)
[21:55:08] <SiegeLord> So how do alternate delimeters for macros work?
[21:55:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:55:24] <SiegeLord> Is it just anything goes, anywhere, as long as they match?
[21:55:29] <huon> there has been some talk about `box <pattern>` becoming a pattern that can be "overloaded" (possibly via deref)
[21:55:33] <huon> SiegeLord: internally?
[21:55:46] <SiegeLord> No, in terms of usage
[21:55:49] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[21:55:55] <SiegeLord> Do we restrict macros to a specific delimeter?
[21:56:02] <huon> oh, foo!() and foo!{} are what's supported now
[21:56:09] <huon> but there's an (accepted) PR adding foo![]
[21:56:11] <SiegeLord> Well, and []
[21:56:23] <SiegeLord> But you can use any foo! with any pair?
[21:56:31] <kimundi> yes
[21:56:33] <kimundi> right now
[21:56:43] <kimundi> no idea if that will change
[21:57:13] <SiegeLord> I guess I don't need to wait for it to merge then, the rules are predictable enough
[21:57:31] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[21:57:42] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[21:57:46] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[21:58:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:59:45] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[21:59:50] *** Quits: alext (Adium@moz-C0639857.albq.qwest.net) (Ping timeout)
[22:01:43] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:03:22] *** Joins: alexherbo2 (alexherbo2@moz-AB6EB255.ip-91-121-133.eu)
[22:03:49] <kimundi> (Heh, it seems aatch also feels my pain of not having associated items right now :))
[22:04:36] <aatch> kimundi, I just don't want to delay SIMD for a feature that may not ever get implemented.
[22:04:51] *** Quits: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP) (Ping timeout)
[22:05:08] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[22:05:38] <kimundi> aatch: What kinds of API in regard to SIMD would benefit from aI?
[22:05:38] *** Quits: eholk (eholk@4C33E9A6.EC877627.1378615F.IP) (Quit: eholk)
[22:06:03] <aatch> kimundi, intrinsics that take vectors of any length, stuff like that.
[22:06:13] *** Joins: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP)
[22:06:29] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[22:06:55] <kimundi> Ah, so the associated constant/generic over array sizes aspect.
[22:07:13] <kimundi> yeah, makes sense
[22:08:06] *** jorendorff is now known as jorendorff_away
[22:08:17] <aatch> kimundi, it's worse for SIMD though, since 1) they don't coerce to slices and 2) the set of operations is much, much smaller
[22:08:39] <kimundi> yeah
[22:08:57] <aatch> The difference being that user code isn't going to want to be able to take an arbitrary-sized SIMD vector
[22:09:10] <aatch> (most of the time anyway)
[22:09:54] <kimundi> make sense
[22:10:00] <kimundi> makes*
[22:10:14] <aatch> But the intrinsics probably would.
[22:10:45] *** jorendorff_away is now known as jorendorff
[22:11:00] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:11:07] * jensnockert hugs aatch.
[22:11:22] <aatch> jensnockert, thank you.
[22:11:24] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[22:11:36] *** Quits: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP) (Ping timeout)
[22:11:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:11:58] *** Quits: philix (felipe@796A2AA4.64EB872B.5670445F.IP) (Ping timeout)
[22:12:02] <aatch> jensnockert, on a happier note, my branch supports this: `v.xyz = u.wxw`
[22:12:08] <jensnockert> \o/
[22:12:10] <jensnockert> Awesome.
[22:12:25] *** Joins: derek_c (derek@moz-7B451763.cit.cornell.edu)
[22:12:38] <aatch> jensnockert, the IR is (depending on the size of v and w) either 1 or 2 shuffles
[22:12:47] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[22:12:55] <jensnockert> That's as small as it gets.
[22:13:04] <jensnockert> I think?
[22:13:17] <aatch> since I need to extend the smaller vector to size of the larger one to pass to shufflevector
[22:13:30] <jensnockert> Yeah, that was what I thought.
[22:13:50] <aatch> I missed that at first though <.<
[22:13:53] <kimundi> simd would be generally supported, and its up to llvm whether it maps to actual simd instructions or emulation code, correct?
[22:14:16] <aatch> kimundi, correct. LLVM has specific rules for type legalisation too
[22:14:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:14:31] <jensnockert> http://blog.llvm.org/2011/12/llvm-31-vector-changes.html
[22:14:42] <jensnockert> I accidentally just happened to have that on the clipboard.
[22:14:45] *** Joins: santiago (santiago@moz-69361A64.socal.res.rr.com)
[22:14:49] *** Joins: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP)
[22:14:57] <aatch> So you can use something like <f64 x 4> on a platform that only has 128-bit vectors and it'll split it.
[22:15:16] <jensnockert> As long as we never use MMX, I am happy.
[22:16:19] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[22:16:19] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:16:34] *** Quits: adonohue (adonohue@moz-FB94486E.thefacebook.com) (Quit: adonohue)
[22:16:37] *** Quits: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP) (Ping timeout)
[22:16:40] <jensnockert> At least not on OS X…
[22:16:50] <aatch> jensnockert, well LLVM decides that, but seeing the output asm when passing '-C target-cpu=core-avx2' was nice
[22:17:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:18:03] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[22:18:09] <jensnockert> aatch: There's a disable-mmx option in LLVM, so as long as we can pass that, I'm happy. MMX breaks Cocoa.
[22:18:16] <cmr> why?
[22:18:26] <cmr> bad context save/restore?
[22:18:28] *** Joins: IanCormac84 (User@DFDD42CD.64D641E5.67DFF8B4.IP)
[22:18:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:18:34] *** Joins: philix (felipe@moz-E75F4F9.user.veloxzone.com.br)
[22:18:58] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:19:25] <jensnockert> cmr: Yes.
[22:19:34] <cmr> and the bug is *still* present?
[22:19:46] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[22:19:58] <huon> is there a fundamental reason why simd intrinsics couldn't coerce to slices? 
[22:20:02] <jensnockert> cmr: I'm pretty sure it is, but I just checked, LLVM doesn't generate MMX.
[22:20:05] <huon> s/intrinsics/types/
[22:20:22] <jensnockert> cmr: It has specific types for that, different from normal vector types.
[22:20:28] *** Joins: inokid (felix@9CFB575F.AB3AC796.40E092AA.IP)
[22:20:49] *** Quits: Rym (y@D8C40AC1.22F14779.51C6DE68.IP) (Ping timeout)
[22:21:03] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[22:21:10] *** Quits: vgeddes (vincent.ge@moz-61A0CA3B.access.mtnbusiness.co.za) (Ping timeout)
[22:21:15] <jensnockert> Google says someone hit it in mid-2013 at least.
[22:21:33] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:22:23] *** Quits: IanCormac84 (User@DFDD42CD.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:22:52] *** Joins: IanCormac84 (User@86F22D37.64D641E5.67DFF8B4.IP)
[22:22:53] <aatch> huon, not a *fundamental* reason, just doesn't really make sense to me
[22:23:04] <aatch> I see SIMD types more like primitive types
[22:23:14] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:23:19] *** Joins: adonohue (adonohue@moz-FB94486E.thefacebook.com)
[22:23:25] <huon> we could have simd![T, .. n] -> [T, .. n], theoretically, right?
[22:23:28] <jensnockert> cmr: The problem is probably that Foundation or something somewhere is still using x87, and not making sure it is saving / restoring MMX state first.
[22:23:44] <huon> (and that's not entirely non-sensible, even if it's a little peculiar)
[22:24:30] <jensnockert> huon: Not entirely non-sensible no, but then [T, ..n] behaves even less like &[T].
[22:24:38] <aatch> huon, we could, I'm just not sure if it's worth it.
[22:25:42] *** Quits: mye (mye@moz-C6E6EB2.dip0.t-ipconnect.de) (Quit: sleep message)
[22:26:12] <jensnockert> cmr: Technically it is probably not a bug, just unexpected, since nothing else on OS X uses x87.
[22:26:25] *** Quits: IanCormac84 (User@86F22D37.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:26:36] *** Quits: Ms2ger (Ms2ger@moz-A26553B6.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:27:01] *** Quits: adonohue (adonohue@moz-FB94486E.thefacebook.com) (Quit: adonohue)
[22:27:04] *** Quits: gwty (gwtypc@CCC73E8.41C13BAD.49FF672.IP) (Ping timeout)
[22:27:10] <doomlord_> today rust makes up for my casting frustration. moving code around.. without headers, so much easier.
[22:27:13] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[22:27:25] <huon> jensnockert: yeah, but [T, .. n] coerces to &[T] :P
[22:27:38] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[22:27:47] <jensnockert> huon: Yes, but you can't take the address of a SIMD vector.
[22:27:49] *** Joins: IanCormac84 (User@5231088F.64D641E5.67DFF8B4.IP)
[22:28:04] <jensnockert> Usually…
[22:28:15] <huon> jensnockert: SIMD vectors can't exist in memory??
[22:28:18] *** jorendorff is now known as jorendorff_away
[22:28:27] <huon> (of course, they're more useful in registers...)
[22:28:41] <jensnockert> They aren't really a vector then.
[22:29:25] *** jorendorff_away is now known as jorendorff
[22:29:39] *** Joins: cschneid_ (cschneid@moz-CA025D57.ip.mcleodusa.net)
[22:29:58] <jensnockert> They are only scalars when they are in registers, otherwise they are [T, ..n], essentially.
[22:30:09] *** Quits: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Client exited)
[22:31:05] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:31:24] <huon> aatch: also, are types like `simd![Option<(fn(), ~int)>, .. 4]` disallowed under your scheme? (or, at least, do they avoid crashing the compiler?)
[22:31:28] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[22:31:36] *** Quits: cschneid_ (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:33:56] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[22:34:15] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Max SendQ exceeded)
[22:35:30] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:35:36] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[22:35:55] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Max SendQ exceeded)
[22:36:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:36:39] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[22:38:13] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:38:16] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:38:19] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Quit: )
[22:38:29] *** Joins: adonohue (adonohue@moz-FB94486E.thefacebook.com)
[22:38:39] *** Joins: hjr3 (hradtke@77CEA1B2.767934EB.9B6EB213.IP)
[22:39:12] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[22:39:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:39:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:40:03] *** Joins: heftig (heftig@moz-AA4684.dip0.t-ipconnect.de)
[22:41:18] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:42:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:43:13] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:43:48] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[22:43:51] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:43:51] *** ChanServ sets mode: +o tjc
[22:44:40] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:44:43] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[22:45:36] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[22:46:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:46:03] *** Quits: IanCormac84 (User@5231088F.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:46:15] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[22:46:29] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[22:47:03] *** Joins: IanCormac84 (User@5231088F.64D641E5.67DFF8B4.IP)
[22:48:24] *** Quits: leowoe (Leo@moz-A88FE171.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:48:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:48:46] <aatch> huon, they are disallowed
[22:48:59] *** Quits: IanCormac84 (User@5231088F.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:49:01] <aatch> In fact, LLVM only allows integral or floating point types
[22:49:06] <aatch> or pointers to those types
[22:49:31] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:49:39] *** Quits: rootnode (rootnode@moz-C9D296CA.pools.arcor-ip.net) (Ping timeout)
[22:49:40] <huon> simd pointers? you can load them in parallel?
[22:49:49] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:49:52] <aatch> technically, because of the way I implemented it, simd![str,..n] is allowed.
[22:49:53] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[22:50:04] <aatch> but a bare `str` is not, so it fails there
[22:50:26] *** Joins: rootnode (rootnode@moz-E005536D.pools.arcor-ip.net)
[22:50:31] <aatch> huon, yep, it is used to implement scatter/gather functionality.
[22:50:44] *** Joins: andrew-__ (andrew-d_w@86B47CBD.7A62F771.CC0301A2.IP)
[22:51:05] *** jorendorff is now known as jorendorff_away
[22:51:26] <huon> aatch: magical
[22:51:36] <jensnockert> Haswell even has microcode for that.
[22:51:54] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[22:52:12] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[22:52:15] <aatch> I didn't add support for it in my branch because I'm not sure how good an idea it would be.
[22:52:35] <rootnode> hm, make install fails at the moment
[22:52:43] <rootnode>  No rule to make target `prepare-everything', needed by `install'.  Stop.
[22:52:52] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[22:54:00] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[22:54:48] <huon> rootnode: https://github.com/mozilla/rust/pull/13141 fixes it
[22:54:51] *** Joins: rootnode_ (rootnode@moz-E005536D.pools.arcor-ip.net)
[22:54:52] *** Quits: rootnode_ (rootnode@moz-E005536D.pools.arcor-ip.net) (Quit: rootnode_)
[22:55:00] <huon> (and will theoretically land in an hour or so)
[22:55:44] <doomlord_> will simd pointers be unsafe
[22:55:49] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:55:50] <dsrx> is there an RFC for sugar for (*x).foo() ?
[22:55:53] <doomlord_> (gather instruction.)
[22:56:11] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:56:14] <huon> doomlord_: why would they be unsafe?
[22:56:22] *** Quits: andrew-__ (andrew-d_w@86B47CBD.7A62F771.CC0301A2.IP) (Input/output error)
[22:56:23] <sfackler> dsrx: that already exists
[22:56:33] <sfackler> x.foo()
[22:56:34] <huon> at least, `simd![&T, .. 4]` can be perfectly safe
[22:56:35] <doomlord_> isn't the raw instruction like indexing
[22:56:43] *** Joins: andrew-d_w (andrew-d_w@1B837FFB.F046727F.1351F780.IP)
[22:56:44] <dsrx> oh what the..
[22:56:51] <huon> `simd![*T, .. 4]` would presumably be unsafe
[22:56:54] <dsrx> well, today I learned I guess :D
[22:56:56] <rootnode> huon:  thanks
[22:57:12] *** Quits: sunfish (chatzilla@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:57:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:58:02] <doomlord_> http://stackoverflow.com/questions/16193434/avx2-gather-instructions-load-address-calculation << its like array indexing
[22:58:06] *** jorendorff_away is now known as jorendorff
[22:58:21] <huon> doomlord_: yes, but with &T it's fine
[22:58:23] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[22:58:34] *** Quits: inokid (felix@9CFB575F.AB3AC796.40E092AA.IP) (Ping timeout)
[22:58:49] <aatch> huon, yes, but the real utility would be for running through multiple arrays in parallel.
[22:58:58] <aatch> So *T would be used.
[22:59:11] <doomlord_> i'm not even sure its a pointer - its an index , with one pointer
[22:59:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:59:39] <jensnockert> doomlord_: Pointer could be zero, with only an index though.
[23:00:03] <jensnockert> doomlord_: Not that I think anyone would use it that way.
[23:00:04] *** Joins: apollow (yellowy432@moz-DF01490A.lightspeed.sntcca.sbcglobal.net)
[23:00:10] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[23:00:17] <huon> aatch: true enough
[23:00:17] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[23:00:20] <apollow> google, docs, api ain't helping me on this one and i don't have python experiance:
[23:00:28] <apollow> how do you access the first element of a tuple
[23:00:31] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[23:00:35] <doomlord_> .val0()
[23:00:44] <huon> or pattern matching
[23:00:53] <huon> (val0 just uses patterns internally)
[23:01:00] <huon> let (a, _, _, _) = foo();
[23:01:14] <huon> rusti: let (a, _, _) = (1, 2, 3); a
[23:01:15] -rusti- 1
[23:01:22] <apollow> mm
[23:01:27] <huon> rusti: let (a, _, b) = (1, 2, 3); a + b
[23:01:28] -rusti- 4
[23:01:39] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:01:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:01:44] <huon> (the _ is a special "ignore this value" pattern)
[23:01:44] *** Joins: andrew-__ (andrew-d_w@86B47CBD.7A62F771.CC0301A2.IP)
[23:01:57] <apollow> oh i see
[23:02:01] *** Quits: hjr3 (hradtke@77CEA1B2.767934EB.9B6EB213.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:02:07] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[23:02:10] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:02:11] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[23:02:15] <apollow> thanks
[23:02:51] *** Quits: andrew-d_w (andrew-d_w@1B837FFB.F046727F.1351F780.IP) (Ping timeout)
[23:02:51] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[23:03:16] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[23:03:21] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[23:03:51] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:04:14] *** Joins: eholk (eholk@4C33E9A6.EC877627.1378615F.IP)
[23:05:02] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[23:06:08] *** Quits: eholk (eholk@4C33E9A6.EC877627.1378615F.IP) (Ping timeout)
[23:07:16] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[23:07:24] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[23:08:23] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:08:23] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[23:08:41] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[23:10:47] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:11:28] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:12:38] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Client exited)
[23:13:19] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[23:13:59] *** Joins: mye (mye@moz-C6E6EB2.dip0.t-ipconnect.de)
[23:14:06] *** Quits: mye (mye@moz-C6E6EB2.dip0.t-ipconnect.de) (Quit: mye)
[23:14:18] *** Joins: mye (mye@moz-C6E6EB2.dip0.t-ipconnect.de)
[23:14:26] *** jorendorff is now known as jorendorff_away
[23:17:10] *** Joins: eholk (eholk@4C33E9A6.EC877627.1378615F.IP)
[23:18:34] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[23:18:56] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[23:20:13] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[23:21:11] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[23:21:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:21:43] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[23:22:53] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Client exited)
[23:23:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:23:41] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[23:25:26] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[23:26:06] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[23:27:03] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[23:28:02] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:28:49] *** Joins: Savago (Savago@202BED95.35A5082B.B8C5454C.IP)
[23:29:37] *** Quits: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net) (Quit: adu)
[23:30:04] *** Quits: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net) (Ping timeout)
[23:33:07] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[23:33:49] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:34:20] *** Quits: hoverbear (hoverbear@moz-DD153AE.wireless.uvic.ca) (Quit: Taking a nap.)
[23:34:51] *** Joins: sigma1 (sigma@moz-15A267A9.range109-152.btcentralplus.com)
[23:35:22] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[23:35:58] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[23:36:37] *** Quits: sigma1 (sigma@moz-15A267A9.range109-152.btcentralplus.com) (Ping timeout)
[23:36:45] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[23:36:57] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:37:48] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Quit: Lost terminal)
[23:38:01] *** Quits: Denommus (user@7ACE3361.B4C8460.B9657DD5.IP) (Quit: going home)
[23:38:31] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[23:39:07] *** Joins: Florob (Florob@moz-39532932.de)
[23:39:28] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:39:38] *** Quits: twi (Adium@moz-CF950680.cust.vodafonedsl.it) (Quit: Leaving.)
[23:40:19] *** Quits: adonohue (adonohue@moz-FB94486E.thefacebook.com) (Quit: adonohue)
[23:40:29] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[23:41:30] <andor> is it possible to update a hashmap like let mut foo = bar.get(&~"qux"); foo = ....? 
[23:41:49] *** Joins: steven_is_false (user@1E3F14AE.29819A33.115CE8E4.IP)
[23:42:12] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[23:42:42] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[23:42:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:42:57] <sfackler> andor: let foo = bar.find_mut(&~"qux"); *foo = ...; should work
[23:43:03] <sfackler> well
[23:43:07] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:43:11] <sfackler> foo will be an Option, so you'll have to match on that
[23:43:17] <sfackler> but it'll contain an &mut Foo
[23:43:20] <andor> sfackler: been there, done that, cannot assing to immutable defererence foo
[23:43:29] <andor> dereference*
[23:43:51] <sfackler> find_mut returns a mutable reference
[23:43:56] <sfackler> find returns an immutable one
[23:43:57] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[23:43:59] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:44:31] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[23:44:33] <steven_is_false> So I was looking at issue https://github.com/mozilla/rust/issues/10507 and think that I can solve it by changing all the wildcard invocations here https://github.com/mozilla/rust/blob/master/mk/tests.mk#L437 to invoke find from the shell. Would it be okay to debend upon find? Also huon is huonw right?
[23:44:48] *** Quits: ktos (ktos@moz-947805C3.swidnica.mm.pl) (Ping timeout)
[23:45:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:45:10] <aatch> steven_is_false, correct
[23:45:19] <mcpherrin> steven_is_false: does find work on windows?
[23:45:25] <steven_is_false> mcpherrin: Nope.
[23:45:36] *** Joins: ktos (ktos@moz-947805C3.swidnica.mm.pl)
[23:45:38] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:45:49] <steven_is_false> Then I'll have to use this specific hack for GNU make
[23:46:01] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:46:14] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[23:46:14] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[23:46:49] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Quit: Leaving)
[23:46:53] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[23:47:16] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Quit: Leaving)
[23:47:52] *** Quits: mye (mye@moz-C6E6EB2.dip0.t-ipconnect.de) (Quit: sleep message)
[23:47:59] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:48:04] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:48:12] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[23:49:43] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[23:51:52] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[23:52:33] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140324030203])
[23:52:44] <huon> steven_is_false: hi; I think we have an `rwildcard` rule of some sort that finds things recursively
[23:52:55] <steven_is_false> huon: Oh great then!
[23:52:58] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[23:53:09] <huon> steven_is_false: https://github.com/mozilla/rust/blob/3496e93d13590140242f862c905dc2d591d2e2ea/mk/reconfig.mk#L13
[23:53:26] <huon> e.g. https://github.com/mozilla/rust/blob/e6a27424adba041d64d29c4339edc5015536f285/mk/llvm.mk#L17
[23:54:36] *** Quits: Rym (y@D8C40AC1.22F14779.51C6DE68.IP) (Connection reset by peer)
[23:54:51] *** Joins: Rym (y@D8C40AC1.22F14779.51C6DE68.IP)
[23:55:19] *** Quits: eholk (eholk@4C33E9A6.EC877627.1378615F.IP) (Quit: eholk)
[23:55:56] <andor> would it be possible to have a hashmap that has some pair, and then i get a mutable ref out of that, and put that mutable ref in some other hashmap, and see it change in hashmap 1 when i change it in hashmap 2?
[23:56:20] <andor> i'm not even sure that makes sense, i should go to bed
[23:56:22] <strcat> andor: sure
[23:56:35] <strcat> but you won't be able to use the first hashmap
[23:56:39] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[23:56:40] <strcat> while you have the 2nd
[23:56:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:56:47] <andor> won't be able to use in what sense?
[23:56:58] <strcat> rust will prevent you from calling any of the methods
[23:57:10] <andor> :(
[23:57:14] <strcat> so you're only getting one value out that way
[23:57:27] <andor> yeah, i kind of expected that
[23:57:40] <strcat> because of the &mut aliasing guarantees
[23:57:55] <strcat> you can't ever end up in a situation where you can mutate through an &mut and also another way
[23:58:05] <andor> what i wanted was let the query parameters sit in my Headers hashmap, and have a query params hashmap that actually maps the query parameter names to values
[23:58:21] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:58:30] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:58:38] <andor> and the query param hashmap would've just had slices pointing into the first hashmap
[23:58:57] <andor> strcat: what if they're both immutable?
[23:59:05] <strcat> then yes it will work
[23:59:11] <andor> ooh!
[23:59:21] <strcat> although you can't modify the first hashmap while you have borrows into it
[23:59:21] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[23:59:32] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[23:59:35] <strcat> but you can have one hashmap and then make another with a bunch of refs into it
[23:59:38] <andor> not a problem, i don't really want it modified anyway
