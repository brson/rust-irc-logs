[00:00:32] <bstrie> brson: we should have a larger post summarizing the meetups soon
[00:00:41] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[00:00:46] <brson> sure
[00:02:56] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:04:32] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[00:06:53] *** Joins: aatch (james@moz-4tpcve.pd7t.fvcm.e000.2406.IP)
[00:09:25] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[00:11:52] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[00:12:19] *** Joins: acharles_ (acharles@moz-ulbdcn.ca.comcast.net)
[00:12:32] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[00:13:52] *** Quits: acharles (acharles@moz-ldt.et5.188.67.IP) (Ping timeout: 121 seconds)
[00:13:52] *** acharles_ is now known as acharles
[00:16:12] <kmc> bstrie: map + countdown timer
[00:17:33] <bstrie> kmc: hmmmm
[00:20:12] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[00:21:36] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[00:23:38] *** Quits: marsel (user@moz-1gf.bsk.180.94.IP) (Ping timeout: 121 seconds)
[00:27:58] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:28:21] *** Joins: brson (brson@moz-1vj.eev.48.37.IP)
[00:28:21] *** ChanServ sets mode: +o brson
[00:39:22] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Connection closed)
[00:41:15] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[00:49:06] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[00:50:50] <steveklabnik> so, wonderful side effect of rust-highfive
[00:51:01] <steveklabnik> knowing that this is someone's first PR to rust is _really_ valuable i think
[00:52:06] <aturon> steveklabnik: yes, very much so
[00:52:40] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[00:53:03] <tynopex> =D
[00:53:43] <larsberg> On servo (where that code started, under the awesome jdm, before nrc greatly expanded it for Rust), we use that to highly prioritize reviewing and providing feedback ASAP
[00:53:49] <steveklabnik> yeah
[00:55:06] <larsberg> If you get a chance to chat with jdm at some point, definitely do; he is absolutely amazing at cultivating new contributors and kicking the rest of the Servo reviewers in the head while still getting tons of stuff done on his own work. I don't know how he does it all for us :-)
[00:56:04] <aatch> Except that some people are never picked up as contributors.
[00:56:22] <aatch> I'm always given the "Hi new guy!" response. :/
[00:56:42] <aatch> At least I'm well-known enough that people know I'm not new.
[00:56:47] <larsberg> IIRC it had trouble if you didn't have an associated e-mail address in your GH profile, though I'm a little fuzzy about the details.
[00:57:09] *** Quits: cengizIO (textual@moz-b49.92p.188.78.IP) (Quit: Textual IRC Client: www.textualapp.com)
[00:57:13] <larsberg> We've seen that before, too,
[00:57:46] <aatch> I have all the email addresses I use on github. It seems to be a github problem, I investigated and I never turn up in the list in contributors.
[01:00:22] <nrc> aatch: I thought I fixed that? We have a contributor white list specifically to avoid that problem
[01:01:02] <aatch> nrc, oh right, you might have added me to that. It's more a band-aid than a real solution.
[01:01:03] <nrc> I'll double check you're on it, but I thought you were the motivation :-)
[01:01:11] <nrc> oh yeah, totally a hack
[01:01:25] <nrc> but I figure it is just working round a GH bug rather than one of ours
[01:04:02] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:06:28] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Connection closed)
[01:08:33] <nrc> What does //! mean?
[01:08:54] <Mutabah> nrc: "super" doc comment
[01:08:55] <nrc> it's a kind of doc comment, but how is it different to /// ?
[01:09:04] <nrc> Mutabah: what does super mean?
[01:09:04] <Mutabah> nrc: #![doc="..."]
[01:09:15] <Mutabah> Parent, etc. Dunno the real name
[01:09:23] <aatch> nrc, it's a doc comment for the enclosing item.
[01:09:31] <Mutabah> Applies to the current item, not to the next item
[01:10:03] <aatch> Primarily because there's no syntactic object for modules when you're in the module file itself.
[01:11:33] <kmc> anything going on for 1.0 in MontrÃ©al?
[01:11:34] <aatch> And there's no syntax for a crate itself.
[01:11:35] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[01:11:56] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[01:12:17] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[01:12:42] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[01:12:58] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:15:48] *** Quits: brson (brson@moz-1vj.eev.48.37.IP) (Quit: leaving)
[01:16:43] *** Joins: skippydippy (Mibbit@moz-juv.9o3.252.72.IP)
[01:18:10] <nrc> right, get it, thanks!
[01:21:13] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[01:21:28] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[01:21:41] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[01:23:08] *** Quits: skippydippy (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:27:32] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[01:28:31] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[01:29:08] *** Joins: flaper87 (flaper87@moz-fnn.1e9.132.209.IP)
[01:33:20] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[01:36:13] *** Joins: flaper87 (flaper87@moz-fnn.1e9.132.209.IP)
[01:39:59] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[01:47:37] *** Joins: mib_kfqjk7 (Mibbit@moz-juv.9o3.252.72.IP)
[01:49:33] *** Quits: mib_kfqjk7 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:55:38] *** Joins: pachuco (Mibbit@moz-juv.9o3.252.72.IP)
[01:57:12] *** Quits: pachuco (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:08:07] *** Joins: blaenk (blaenkdenum@moz-2focj4.n2pv.fsko.e000.2605.IP)
[02:12:44] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[02:14:49] *** Quits: kimundi (kimundi@moz-ocelec.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:16:02] *** Joins: kimundi (kimundi@moz-hac5t8.dip0.t-ipconnect.de)
[02:16:52] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[02:18:37] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[02:20:17] *** kimundi is now known as zz_kimundi
[02:24:06] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:25:20] *** Quits: tynopex (Mibbit@moz-ikvsjo.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:27:03] *** zz_kimundi is now known as kimundi
[02:27:17] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[02:28:34] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[02:35:13] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:35:16] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:38:03] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[02:39:26] *** Joins: kushal (kdas@moz-r2sm7r.202.sitibroadband.in)
[02:44:57] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:47:57] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[02:48:05] *** Joins: srh (User@moz-tvc5sp.sntcca.sbcglobal.net)
[02:55:54] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[02:55:56] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[02:56:15] *** Joins: c74d (c74d3a4ebb6@moz-gf2p70.mggc.hibn.4404.2002.IP)
[02:57:28] *** Joins: amphibulus (Mibbit@moz-juv.9o3.252.72.IP)
[02:57:53] *** Quits: amphibulus (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:02:24] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[03:03:10] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[03:07:26] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[03:09:04] <erickt> acrichto: filed my "pull ast-map out of syntax" pr: https://github.com/rust-lang/rust/pull/24757
[03:09:25] <huon> erickt: s/own module/own crate/?
[03:09:31] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[03:10:03] <erickt> oops
[03:10:48] <erickt> huon: fixed
[03:10:51] *** Quits: Diggsey (diggsey@moz-fbohmi.dsl.pipex.com) (Ping timeout: 121 seconds)
[03:14:35] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[03:14:56] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[03:15:34] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[03:18:58] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[03:20:24] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[03:21:00] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[03:25:11] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[03:27:35] *** Joins: semarie (semarie@moz-b0t90g.tor-proxy.net.ua)
[03:29:16] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[03:34:10] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[03:43:31] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[03:47:22] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[03:47:43] <geofft> huh, is the implementation of `extern "C"` to emit a new function/symbol that just marshals C ABI into Rust ABI, and calls the original function? 
[03:50:41] <aatch> geofft, yep.
[03:50:58] *** Quits: kushal (kdas@moz-r2sm7r.202.sitibroadband.in) (Ping timeout: 121 seconds)
[03:51:10] <aatch> geofft, though it's pretty common that the wrapper function just gets inlined away.
[03:52:43] <aatch> geofft, or the real function is inlined into the wrapper function, depends on the situation.
[03:58:21] <geofft> aatch: oh, should I try some more optimization levels? 
[03:58:41] <geofft> I'm just playing with `pub extern "C" fn meep(x: i32) -> i32 { 2*x }` 
[03:59:33] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:59:34] <geofft> and it's giving me a .so with two functions, _ZN4meep20h48350272253d93e0eaaE (C ABI, exported as a dynamic symbol) and _ZN4meep10__rust_abiE 
[03:59:35] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[03:59:36] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Connection closed)
[04:00:21] <aatch> geofft, well with optimisations on, I get a single function output.
[04:00:40] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Quit: leaving)
[04:01:24] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:02:56] *** Quits: c74d (c74d3a4ebb6@moz-gf2p70.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[04:03:17] *** c74d3 is now known as c74d
[04:09:56] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:15:16] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[04:23:29] <XMPPwocky> geofft: yeah i have that it's awful
[04:23:36] <XMPPwocky> but optimizations fix it up
[04:24:05] <XMPPwocky> speaking of optimization
[04:24:14] <XMPPwocky> rusti: [0u32][4000000]
[04:24:15] -playbot- <anon>:9:9: 9:24 error: const index-expr is out of bounds
[04:24:15] -playbot- <anon>:9         [0u32][4000000]
[04:24:15] -playbot- output truncated; full output at: http://bit.ly/1Go6X2s
[04:24:17] <XMPPwocky> rusti: [0u32][4000000];
[04:24:19] -playbot- ()
[04:24:24] <XMPPwocky> what's up there
[04:24:39] <XMPPwocky> i figured dead code wouldn't get eliminated if it could panic...
[04:25:27] <WindowsBunny> [0u32] is an array literal
[04:25:41] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:25:41] <XMPPwocky> so?
[04:25:55] <XMPPwocky> i'm pretty sure [0u32] doesn't have 4000000 elements
[04:26:01] <WindowsBunny> oh wait, your second try
[04:26:04] <WindowsBunny> it compiled???
[04:26:14] <XMPPwocky> yeah
[04:26:17] <WindowsBunny> thats... I don't even
[04:26:17] <XMPPwocky> and ran
[04:26:18] <XMPPwocky> without panic
[04:26:19] <XMPPwocky> yepp
[04:26:28] <XMPPwocky> rusti: [0u32][4000000]; "NOTHING TO SEE HERE"
[04:26:30] -playbot- "NOTHING TO SEE HERE"
[04:28:52] <WindowsBunny> XMPPwocky: But if you actually use the value, it errors at compile time about it
[04:29:10] <XMPPwocky> yeah
[04:29:23] <XMPPwocky> and if you "let x = [0u32]; let y = x[40000]" it errors at runtime
[04:29:42] <WindowsBunny> rusti: let x = [0u32][4000000]; "NOTHING TO SEE HERE"
[04:29:43] -playbot- <anon>:9:17: 9:32 error: const index-expr is out of bounds
[04:29:43] -playbot- <anon>:9         let x = [0u32][4000000]; "NOTHING TO SEE HERE"
[04:29:43] -playbot- output truncated; full output at: http://bit.ly/1I2hti0
[04:29:55] <WindowsBunny> rusti: let _ = [0u32][4000000]; "NOTHING TO SEE HERE"
[04:29:56] -playbot- <anon>:9:17: 9:32 error: const index-expr is out of bounds
[04:29:56] -playbot- <anon>:9         let _ = [0u32][4000000]; "NOTHING TO SEE HERE"
[04:29:56] -playbot- output truncated; full output at: http://bit.ly/1Go7xgC
[04:30:23] <WindowsBunny> so its only if it isn't assigned
[04:32:17] <XMPPwocky> what about constructors
[04:32:27] <XMPPwocky> rusti: Some([0u32][400000]);
[04:32:28] -playbot- ()
[04:32:32] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[04:32:35] <WindowsBunny> wat
[04:32:45] <XMPPwocky> does rusti even do DCE
[04:32:47] <WindowsBunny> rusti: drop([0u32][400000]);
[04:32:48] -playbot- <anon>:9:14: 9:28 error: const index-expr is out of bounds
[04:32:48] -playbot- <anon>:9         drop([0u32][400000]);
[04:32:48] -playbot- output truncated; full output at: http://bit.ly/1I2i3fr
[04:32:48] <XMPPwocky> rustc!
[04:33:35] <WindowsBunny> rusti: struct Foo { x: u32 }; Foo { x: [0u32][400000] };
[04:33:36] -playbot- ()
[04:33:39] <XMPPwocky> hmmm
[04:33:42] <WindowsBunny> wow
[04:33:45] <XMPPwocky> rusti: vec![0u32][40000]
[04:33:46] -playbot- output truncated; full output at: http://bit.ly/1Go7WQ6
[04:34:06] <XMPPwocky> yeah that fails even with semicolon
[04:35:13] <WindowsBunny> I think its because that Index isn't built in
[04:35:21] <XMPPwocky> hm yeah
[04:35:21] <WindowsBunny> It's only the built in indexing, which does CTFE
[04:35:43] <XMPPwocky> you can ctfe an index into an array?!?
[04:35:51] <WindowsBunny> yeah
[04:35:54] <WindowsBunny> I think so
[04:35:54] <XMPPwocky> neat
[04:36:10] <WindowsBunny> rusti: const x: u32 = [0u32][0]; x
[04:36:11] -playbot- <anon>:9:9: 9:34 warning: constant `x` should have an upper case name such as `X`, #[warn(non_upper_case_globals)] on by default
[04:36:11] -playbot- <anon>:9         const x: u32 = [0u32][0]; x
[04:36:11] -playbot- output truncated; full output at: http://bit.ly/1I2iu9H
[04:36:22] <WindowsBunny> warning, but valid
[04:36:56] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[04:36:56] <WindowsBunny> XMPPwocky: So now we know its our ctfe that does dead code elimination
[04:37:14] *** Joins: kushal (kdas@moz-r2sm7r.202.sitibroadband.in)
[04:38:59] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[04:40:25] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[04:41:28] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:47:25] *** Joins: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at)
[04:49:11] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[04:51:33] *** Quits: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at) (Ping timeout: 121 seconds)
[04:53:47] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[04:54:38] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[04:55:19] <geofft> oh wow optimizations 
[04:55:38] <carllerche> I'm writing a regex engine. So far it's at least 25x faster than the regex crate :-P
[04:55:40] <geofft> it not only went from two functions to one, it went from this complicated thing with imul and overflow checking 
[04:56:07] <geofft> to two instructions, lea (unchecked) and retq, no touching the stack or any registers other than %edi and %eax 
[04:56:40] <geofft> I guess I knew in theory that unoptimized arithmetic was checked, but seeing this function all but disappear was still surprising :) 
[04:57:15] *** Joins: dpc__ (dpc@moz-t6gr4b.ca.comcast.net)
[04:57:21] *** Quits: srh (User@moz-tvc5sp.sntcca.sbcglobal.net) (Quit: Leaving)
[04:58:28] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[04:58:51] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[04:59:12] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[05:00:28] <reem> carllerche: I remember that previous benchmarks havenâ€™t considered that the regex crate supports full uft8 matching, which accounts for some performance loss
[05:00:41] <huon> http://www.infoworld.com/article/2911532/application-development/mozilla-sets-its-sights-on-rusts-future.html
[05:00:50] <carllerche> reem: mine does too ;)
[05:00:59] <reem> nice :)
[05:01:08] <carllerche> reem: the regex crate emulates an NFA
[05:01:10] <huon> carllerche: do you have exponential time cliffs?
[05:01:31] <carllerche> huon: nah, it's the Thompson DFa
[05:02:54] <carllerche> I've implemented nfa -> dfa -> minimization
[05:03:20] <carllerche> I just got off a 6 hour flight ðŸ˜ƒ
[05:03:34] <huon> nice
[05:03:41] <mcpherrin> Regex derivatives are cool way to do that
[05:03:41] <huon> (the code, not the flight :P )
[05:03:44] <reem> Me too, but I read 300 pages of game of thrones instead :P
[05:03:53] <mcpherrin> You go straight from a regex to a smallish DFA
[05:03:56] <mcpherrin> https://github.com/mcpherrinm/rust-regex-derivatives
[05:04:49] <mcpherrin> (that cod eis mostly useless)
[05:06:18] <carllerche> mcpherrin: hmm this may be what I did. Unsure
[05:06:48] <mcpherrin> the approach using derivatives is kinda weird and largely forgotten
[05:07:44] <carllerche> I'm not sure really since I haven't heard of it. But skimming the Wikipedia page if sounds similar to what I did
[05:12:22] <bstrie> carllerche: is it based on the current regex crate? I know burntsushi always intended to go the full DFA route, but never had time
[05:15:33] <carllerche> bstrie: whatever is on crates.io
[05:20:29] *** Quits: O01eg (o01eg@moz-5p4n4r.pnu9.3egh.2698.2a02.IP) (Client exited)
[05:23:37] <carllerche> Boarding next flight
[05:24:08] <WindowsBunny> me boops carllerche
[05:30:43] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[05:31:05] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[05:35:37] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[05:39:42] <bstrie> how's the rust beta doing on bsd?
[05:39:52] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[05:41:22] <swgillespie> is it possible to implement the Fn trait directly?
[05:43:07] <bstrie> swgillespie: only on nightlies, for now
[05:43:17] <swgillespie> cool!
[05:43:41] <swgillespie> although, I thought i was in #rust, sorry
[05:45:32] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[05:48:43] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:50:02] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:55:10] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:55:48] <bstrie> barosl: how do I actually get to the buildbot page where homu's current tests are running?
[05:56:30] <barosl> bstrie, It is currently not possible
[05:56:51] <bstrie> barosl: okay, how do I get to the buildbot pages at all :)
[05:57:08] <WindowsBunny> http://buildbot.rust-lang.org/
[05:57:09] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[05:57:11] <barosl> I just access the buildbot page manually, http://buildbot.rust-lang.org/
[05:57:21] <bstrie> tx
[05:57:43] <barosl> waterfall and tgrid are the pages that I watch mainly
[05:58:57] <barosl> By the way it is an interesting idea... would that be better to comment on a PR about a link to the buildbot page when starting a build?
[05:59:31] <bstrie> if you're already commenting when starting a build, I think a link would be fine to add in there
[05:59:43] <bstrie> if you're not already commenting then people might think it's too much noise?
[06:00:04] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:00:27] <bstrie> I see the "Testing commit 131b5ac with merge 9d439b4...", if you were talking about throwing a link in there that would be ideal
[06:00:36] <barosl> It does commenting, but before instructing Buildbot
[06:00:53] <barosl> I think it does so because it was bors' behavior
[06:01:35] <barosl> Oh, and it cannot know the exact link when commenting because Buildbot provides it *after* being instructed
[06:01:42] <bstrie> right, I was trying to find the link to buildbot from the PR comments because I remembered bors offering that :P
[06:02:05] <barosl> Really? Uhm
[06:02:06] <bstrie> barosl: what does it mean to leave that "testing" comment, if you haven't yet instructed buildbot?
[06:02:18] <bstrie> barosl: (I could be misremembering, who knows)
[06:02:32] <barosl> It just means that Homu merged the feature branch into the auto branch
[06:02:45] <barosl> Buildbot is informed about this, and starts build internally
[06:03:28] <barosl> Yeah, I remembered correctly. bors also didn't provide a Buildbot link while building (see https://github.com/servo/servo/pull/3890 )
[06:03:40] <barosl> Hmm
[06:04:09] <barosl> So there are two choices, one is commenting twice, the other is commenting only after Buildbot actually starts a build
[06:05:10] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:05:13] <barosl> But the latter won't report the situation when merging is successful, but a build is not started for some reason...
[06:05:44] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[06:06:01] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:13:43] *** Quits: sav (e@moz-qa4.jen.247.37.IP) (Connection closed)
[06:13:45] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[06:13:59] *** Joins: mib_il9vdm (Mibbit@moz-juv.9o3.252.72.IP)
[06:14:09] *** Joins: sav (e@moz-9u3te2.cc)
[06:14:34] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[06:18:34] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:18:39] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:20:24] *** Quits: mib_il9vdm (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:21:20] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[06:23:58] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:25:15] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:27:19] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:29:45] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[06:29:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:31:14] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[06:36:05] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[06:38:12] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[06:39:03] *** Quits: sav (e@moz-9u3te2.cc) (Connection closed)
[06:39:46] *** Joins: sav (e@moz-9u3te2.cc)
[06:41:18] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[06:41:19] *** ChanServ sets mode: +o pnkfelix
[06:41:46] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:42:13] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:42:16] *** Joins: squiddy_ (squiddy@moz-md4.pm3.19.178.IP)
[06:42:19] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[06:49:39] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[06:51:48] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:54:03] <SimonSapin> Can I test if a trait object is of a particular concrete type and if so view it as that type?
[06:54:11] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[06:54:11] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[06:54:46] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[06:54:48] <Mutabah> SimonSapin: The Any trait allows that
[06:55:28] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[06:55:53] <SimonSapin> that doesnâ€™t help for std::error::Error::cause returning Option<&Error>, does it?
[06:56:04] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:57:47] <Mutabah> hmm... don't think so...
[07:00:36] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:01:03] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[07:01:05] *** Joins: mib_x4qc1j (Mibbit@moz-pb4q1q.metu.edu.tr)
[07:02:51] <ChrisMorgan> SimonSapin: for an arbitrary trait, no, the information is not available in any way.
[07:02:59] *** Quits: mib_x4qc1j (Mibbit@moz-pb4q1q.metu.edu.tr) (Quit: http://www.mibbit.com ajax IRC Client)
[07:03:09] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[07:03:43] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[07:07:45] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[07:07:54] <nrc> you could look at the vtable pointer, compare it to known vtable pointers and then transmute
[07:07:59] <nrc> but don't :-)
[07:08:19] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Ping timeout: 121 seconds)
[07:11:03] <SimonSapin> For context, hyper returns an io::Error whose cause() may be an SslError. I want to know if this is an invalid certificate or some other SSL error, but that much detail is not available through just `impl io::Error for SslError`
[07:11:16] <SimonSapin> it use to be through io::Error::details, but thatâ€™s been removed
[07:12:44] <SimonSapin> Perhaps std::error::Error::cause should return Option<&Error + Any> instead of just Option<&Error> ?
[07:14:21] *** Quits: dpc__ (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[07:14:47] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[07:16:32] <SimonSapin> nrc: Trying to imagine if Any could do that. Can generic code be written for any trait object, but only trait objects?
[07:17:21] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[07:18:06] <nrc> I thought there was some talk of Error returning +Any, but maybe it was something else
[07:18:18] <nrc> I remember aturon and reem discussing it here
[07:18:19] <SimonSapin> by the way, Any::downcast_ref contains `let to: TraitObject = transmute(self);`. Is that sound if `self` is not a trait object?
[07:18:50] <nrc> It would give a compile-time error if self is a thin pointer
[07:18:50] <SimonSapin> (only `to.data` is used afterwards)
[07:19:03] <nrc> (I think, not 100& sure about that)
[07:19:15] <reem> SimonSapin: self is always Any there, downcast_ref is an inherent method on the Any type
[07:19:48] <nrc> If you can make self a DST vec some how, you'd be in trouble, but that seems unlikely
[07:20:13] <reem> It's defined in an impl Any block
[07:20:39] <nrc> very unlikely then :-p
[07:21:21] <reem> SimonSapin: I believe the plan is to add down casting to the std Error trait
[07:21:36] <reem> Like how the error crate does it
[07:22:27] <SimonSapin> reem: in the mean time, do you have ideas on how to get SSL error details from hyper?
[07:22:42] <reem> Not off the top of my head (on phone)
[07:23:33] <SimonSapin> What we have so far is quite ugly: io_error.detail() == Some("[UnknownError { library: \"SSL routines\", function: \"SSL3_GET_SERVER_CERTIFICATE\", reason: \"certificate verify failed\" }]"
[07:23:49] <SimonSapin> but even thatâ€™s gone
[07:25:31] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[07:29:12] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[07:29:53] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[07:30:31] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[07:30:35] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[07:30:56] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[07:31:23] *** Joins: erz (erz@moz-83ijfr.broadband.corbina.ru)
[07:32:18] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[07:33:00] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[07:36:17] *** kimundi is now known as zz_kimundi
[07:39:00] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Connection closed)
[07:39:18] *** Quits: blaenk (blaenkdenum@moz-2focj4.n2pv.fsko.e000.2605.IP) (Connection closed)
[07:39:33] *** Joins: blaenk (blaenkdenum@moz-rrtddg.n2pv.fsko.e000.2605.IP)
[07:39:42] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[07:44:42] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[07:45:02] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[07:49:21] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[07:50:11] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[07:50:52] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[07:53:24] *** Joins: Thorn (Thorn@moz-gfo.20c.107.217.IP)
[07:54:07] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[07:54:17] *** Quits: Kxepal (Miranda@moz-2urbaj.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[07:54:34] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[07:54:45] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:56:30] *** Joins: Kxepal (Miranda@moz-tqbvro.pppoe.mtu-net.ru)
[07:58:15] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[07:59:37] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[08:02:35] *** Joins: erz_ (erz@moz-n2p94l.broadband.corbina.ru)
[08:03:58] *** Joins: gen_battle (genbattle@moz-4v0.gkd.16.182.IP)
[08:04:17] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[08:05:41] *** Quits: erz (erz@moz-83ijfr.broadband.corbina.ru) (Ping timeout: 121 seconds)
[08:06:14] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[08:08:18] *** Quits: gen_battle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[08:10:19] *** zz_kimundi is now known as kimundi
[08:11:22] *** Joins: anders (andars@moz-bsldst.sntcca.sbcglobal.net)
[08:14:29] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[08:17:41] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:22:40] *** Joins: laumann (thomas@moz-1i4.hq0.225.130.IP)
[08:34:25] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[08:37:42] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[08:43:40] *** Quits: aatch (james@moz-4tpcve.pd7t.fvcm.e000.2406.IP) (Connection closed)
[08:44:20] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:48:40] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[08:48:54] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[08:49:17] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[08:50:19] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[08:50:43] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[08:52:49] *** Joins: genbattle (genbattle@moz-n5c2kc.xtra.co.nz)
[08:54:53] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[08:55:04] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[08:56:05] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[09:00:15] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[09:00:22] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[09:00:37] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[09:02:30] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[09:06:20] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[09:06:41] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[09:07:21] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:10:44] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:11:36] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[09:14:53] *** Quits: genbattle (genbattle@moz-n5c2kc.xtra.co.nz) (Quit: Leaving)
[09:15:16] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[09:19:24] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[09:23:33] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:23:48] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Connection closed)
[09:25:13] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[09:27:09] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[09:31:37] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:38:24] <simukis> WindowsBunny: ping
[09:38:25] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[09:38:29] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[09:38:34] <simukis> WindowsBunny: can one produce .dll from a .lib?
[09:39:10] * simukis wondering whether emiting `.lib`s instead of `.dll`s is a good idea
[09:41:47] <simukis> as far as I know thereâ€™s nothing .libâ€™s canâ€™t do that .dll can, except hiding API they provide.
[09:43:01] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:46:56] *** kimundi is now known as zz_kimundi
[09:50:47] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[09:53:37] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:56:07] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[10:04:37] *** zz_kimundi is now known as kimundi
[10:09:07] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[10:11:02] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[10:12:08] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[10:12:47] *** Joins: mgottschlag (quassel@moz-np7o20.scc.kit.edu)
[10:16:15] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[10:16:56] *** Joins: imperio (Mibbit@moz-bpl.mgj.88.79.IP)
[10:20:38] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[10:25:51] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:29:31] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[10:29:54] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[10:32:38] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:37:12] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:39:21] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:46:53] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[10:47:10] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[10:50:02] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[10:50:24] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:51:37] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[10:53:53] <imperio> erf
[10:54:07] <imperio> it's already the third time my build is interrupted to prioritize another one
[10:54:12] <imperio> it'll be long ^^'
[10:54:26] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[10:54:47] <imperio> btw, is someone working on pretty printing of rustc --explain on terminals ?
[10:55:03] <simukis> not monitoring queue makes you saner
[10:55:32] <imperio> simukis: sorry but I don't understand
[10:56:18] <simukis> imperio: donâ€™t worry about builds, I say
[10:56:22] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[10:56:31] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[10:56:33] <imperio> oh okay
[10:56:48] <simukis> eventually they will either fail or merge
[10:57:14] <imperio> oh mine will succeed, I didn't touch compiled code
[10:58:28] *** kimundi is now known as zz_kimundi
[10:59:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[11:02:32] *** Quits: imperio (Mibbit@moz-bpl.mgj.88.79.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:10:35] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[11:14:55] <imperio> botbot is still broken
[11:14:55] <imperio> hum...
[11:16:37] *** Joins: bytewise (bytewise@moz-s5g.qas.61.134.IP)
[11:17:00] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[11:18:19] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Connection closed)
[11:19:47] *** Joins: untitaker (untitaker@moz-donca6.highway.telekom.at)
[11:21:07] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[11:22:37] *** Quits: untitaker_ (untitaker@moz-7buc2d.highway.telekom.at) (Ping timeout: 121 seconds)
[11:26:51] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:27:34] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:29:53] *** Joins: ytain (ytain@moz-aope4o.dsl.teksavvy.com)
[11:31:23] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[11:33:11] *** Joins: Tobba (Tobba@moz-65g.7ki.21.217.IP)
[11:40:43] *** Quits: bytewise (bytewise@moz-s5g.qas.61.134.IP) (Quit: Quit)
[11:42:04] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[11:44:21] *** Joins: rkruppe (chatzilla@moz-5umokk.hrz.tu-darmstadt.de)
[11:49:55] *** Quits: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net) (Ping timeout: 121 seconds)
[11:50:14] *** Joins: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net)
[11:51:50] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[11:54:05] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:54:53] *** Joins: eibwen (eibwen@moz-dhk8m2.dip0.t-ipconnect.de)
[12:00:19] *** Quits: mgottschlag (quassel@moz-np7o20.scc.kit.edu) (Ping timeout: 121 seconds)
[12:02:48] *** Quits: Syneh (quassel@moz-948.gp8.139.37.IP) (Connection closed)
[12:02:54] *** Joins: Syneh (quassel@moz-948.gp8.139.37.IP)
[12:03:10] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[12:05:18] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Connection closed)
[12:05:40] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[12:17:04] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[12:17:44] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[12:17:46] *** Joins: imperio (Mibbit@moz-bpl.mgj.88.79.IP)
[12:22:02] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[12:22:11] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[12:26:35] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[12:26:41] *** Joins: Tuba (Tobba@moz-65g.7ki.21.217.IP)
[12:27:13] *** Quits: imperio (Mibbit@moz-bpl.mgj.88.79.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:29:21] *** Quits: Tobba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:29:53] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[12:30:23] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[12:40:11] *** Quits: Tuba (Tobba@moz-65g.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:42:36] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[12:46:47] *** Joins: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at)
[12:47:35] *** Quits: dinfuehr (dinfuehr@moz-o1gbk4.highway.telekom.at) (Connection closed)
[12:48:11] *** Joins: mib_ufilrn (Mibbit@moz-g4v.3nj.196.91.IP)
[12:48:12] *** Quits: mib_ufilrn (Mibbit@moz-g4v.3nj.196.91.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:53:08] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[12:53:27] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[12:56:48] <SimonSapin> Can I up-cast a trait object to a "parent" trait?
[12:57:53] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[12:58:22] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[12:58:39] <aatch> SimonSapin, not safely (if at all), no
[13:00:35] *** Joins: frogainciaxx (Mibbit@moz-juv.9o3.252.72.IP)
[13:05:00] *** Quits: frogainciaxx (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:12:13] *** Quits: rkruppe (chatzilla@moz-5umokk.hrz.tu-darmstadt.de) (Ping timeout: 121 seconds)
[13:14:13] *** Joins: marsel (user@moz-rrv.pek.234.188.IP)
[13:16:12] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[13:17:27] *** Quits: amir (amir@moz-jnohkj.3bcq.01f6.0168.2a02.IP) (Ping timeout: 121 seconds)
[13:17:43] *** Joins: Diggsey (diggsey@moz-fbohmi.dsl.pipex.com)
[13:18:22] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[13:18:30] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[13:19:30] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[13:19:30] *** ChanServ sets mode: +o pnkfelix
[13:21:23] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[13:22:52] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[13:31:44] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[13:32:07] *** Joins: amir (amir@moz-qbf4gg.fiber7.init7.net)
[13:32:39] <ChrisMorgan> SimonSapin: no, nor are the vtables arranged in such a way that this could be made possible without language changes.
[13:33:05] <ChrisMorgan> I believe the changes could be made backwards-compatibly, however.
[13:33:25] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[13:36:39] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[13:39:14] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[13:39:41] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[13:40:15] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[13:40:18] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[13:40:56] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[13:43:43] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[13:52:35] <SimonSapin> ok, thanks
[13:53:38] <SimonSapin> For context: this trait "inherits" from Any but also duplicates all of its code: https://github.com/servo/servo/blob/master/components/devtools/actor.rs
[13:53:43] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:53:45] <SimonSapin> I didnâ€™t find a way to deduplicate the code
[13:59:32] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[14:00:51] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[14:01:43] <aturon> SimonSapin: yes, that's the status quo for providing downcasting in your own traits, sadly
[14:02:07] <SimonSapin> ok, thanks
[14:04:12] *** Quits: laumann (thomas@moz-1i4.hq0.225.130.IP) (Quit: leaving)
[14:04:38] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[14:05:11] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:07:31] <munksgaard> Is it just me or is there a strange discrepancy between rust's librand and crates.io's rand? It seems like the former is missing rand::random
[14:07:51] <huon> librand is std-less
[14:08:05] <huon> and rand::random relies on IO etc., so can't exist in the built-in one
[14:08:46] *** zz_kimundi is now known as kimundi
[14:08:53] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[14:09:20] <munksgaard> huon: Alright, that explains it
[14:12:00] <huon> https://gist.github.com/huonw/dc97ff114ed3951c4318 is a little annoying
[14:12:17] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[14:15:16] *** Joins: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net)
[14:17:08] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:19:16] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[14:20:56] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Connection closed)
[14:22:42] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[14:23:19] *** Quits: marsel (user@moz-rrv.pek.234.188.IP) (Ping timeout: 121 seconds)
[14:23:27] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Ping timeout: 121 seconds)
[14:35:19] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[14:43:24] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[14:44:52] *** Quits: ytain (ytain@moz-aope4o.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[14:49:18] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[14:51:43] <steveklabnik> aturon: if you have a moment, some clarity on https://github.com/rust-lang/rust/issues/24712 would be appreciated :)
[14:53:11] *** Joins: psoots (Mibbit@moz-ivjob8.ptld.qwest.net)
[14:53:17] *** Quits: psoots (Mibbit@moz-ivjob8.ptld.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:53:37] <aturon> steveklabnik: sure thing
[14:53:54] <WindowsBunny> (5:38:35 AM) simukis: WindowsBunny: can one produce .dll from a .lib?
[14:53:57] <WindowsBunny> Not really?
[14:54:52] <WindowsBunny> Well, not directly
[14:56:24] <WindowsBunny> simukis: That's like asking if you can create a .exe from a .lib
[14:56:45] <simukis> â€¦ and since .lib carries all the metadata inside itselfâ€¦
[14:56:56] <WindowsBunny> a .dll and a .exe are both binary formats
[14:57:03] <WindowsBunny> they both have entry points
[14:57:38] <simukis> why this complexity? you want to say .lib ainâ€™t a binary?
[14:57:46] <simukis> well not executable
[14:57:51] <WindowsBunny> a .lib is not a PE binary
[14:58:10] <WindowsBunny> It's just a coff library full of metadata and not linked stuff
[14:58:42] <simukis> hmm, sounds like a superior version of dll ðŸ˜ƒ
[14:59:01] <simukis> anyway, I seeâ€¦
[14:59:03] <WindowsBunny> a .a/.lib is basically a bundle of .o/.obj plus assorted metadata
[14:59:17] <WindowsBunny> a .exe/.dll is a fully linked binary ready for use
[14:59:38] <simukis> hmm, so .dll is not exactly .so equivalent then
[14:59:45] <WindowsBunny> you do not link to a .dll
[14:59:47] <simukis> dylib should totally output .lib then
[14:59:51] <WindowsBunny> you link to a .lib
[14:59:58] <steveklabnik> aturon: ,3
[14:59:59] <steveklabnik> <3
[15:00:11] <WindowsBunny> and then the .lib has stubs that call out to the .dll
[15:00:35] <Zoxc> WindowsBunny: Unless you use some nice thing that can link to dlls
[15:00:39] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[15:00:44] <WindowsBunny> well yeah
[15:01:23] <WindowsBunny> but thats weird
[15:01:55] <WindowsBunny> the .lib/.dll split keeps one side for dev purposes and the other side for distribution
[15:02:30] <WindowsBunny> so you don't have to distribute a dynamic library full of metadata....
[15:02:39] <Zoxc> and then you have a dll with and without debug info =P
[15:02:44] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[15:07:03] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:07:55] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:12:09] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Connection closed)
[15:12:14] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[15:12:43] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[15:14:13] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[15:16:18] *** Quits: globin (globin@moz-isrgf8.de) (Connection closed)
[15:19:58] <seanmonstar> SimonSapin: I'd have to look, but perhaps we can add an Ssl error variant to HttpError
[15:20:04] *** Joins: globin (globin@moz-isrgf8.de)
[15:21:49] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[15:23:11] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[15:25:39] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[15:25:58] <SimonSapin> seanmonstar: oh, the variable is called io_error but I didnâ€™t even look if it was still an io::Error
[15:26:10] <SimonSapin> yeah, if you have a custom error types it could have more info there
[15:27:12] <seanmonstar> SimonSapin: I think that error comes from connect, which currently returns an io error... 
[15:27:50] <seanmonstar> But that method is defined by the NetworkConnector trait, so I could change it to return an HttpError... 
[15:32:35] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:35:41] *** Joins: eerie_ (eerie@moz-joilui.red.bezeqint.net)
[15:36:15] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:37:21] <erickt> Gankro: ping
[15:38:57] <Gankro> erickt: pong
[15:38:58] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[15:40:22] <erickt> Gankro: I was wondering if you knew how the stablization of BitSet was coming along
[15:40:31] <erickt> I'm guessing it won't be in 1.0, right?
[15:40:37] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[15:41:43] <Gankro> erickt: Definitely too late, I think? Easy enough to pull out into a crate, though.
[15:41:54] <erickt> That was my second question :)
[15:42:07] <Gankro> Pulling it out into a crate we can expose more powerful stuff because there's no need to worry about stability
[15:42:23] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[15:42:26] <erickt> I already started the extraction process on the train into work :)
[15:43:15] <bluss> I put a very simple bitset into a crate
[15:43:20] <bluss> because I'm NIH like that
[15:43:33] <Gankro> erickt: Great! Want me to make a repo in contain-rs?
[15:44:01] <erickt> bluss: https://github.com/bluss/fixedbitset? how's it compare with collections::BitSet?
[15:44:14] *** Quits: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP) (Ping timeout: 121 seconds)
[15:44:18] <bluss> it doesn't grow and it's minimal to make petgraph stable
[15:44:25] <erickt> I suppose we should migrate this chat to #rust-libs
[15:44:58] *** Quits: mceier (mceier@moz-fm89sb.dynamic.chello.pl) (A TLS packet with unexpected length was received.)
[15:45:36] <bluss> Gankro: I implemented drain-range for Vec before I discovered the complicated previous PR with lots of discussion. But it uses your idea about how to make it safe and it seems solid
[15:45:44] *** Joins: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP)
[15:46:45] *** Joins: mceier (mceier@moz-fm89sb.dynamic.chello.pl)
[15:48:12] <bstrie> want to see Gankro's writeup on how to make drain_range safe in the face of the scopocalypse
[15:48:20] <Gankro> bluss: Awesome! Chalk one up for the Pre-Poor-Your-Pants pattern!
[15:48:38] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:48:38] <Gankro> *Pre-Poop
[15:49:13] *** Quits: squiddy_ (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[15:49:14] <Gankro> bstrie: Basically just have the iterator's constructor make the Vec leak all of its elements to start
[15:49:24] <Gankro> And have the destructor fix it
[15:49:30] <bstrie> Gankro: that sounds hilarious
[15:49:44] <bluss> I've made an additional invention. You can set the length to start if removing range start..end
[15:49:48] <bluss> "invention"
[15:49:57] <bstrie> Gankro: would this involve using mem::forget to leak? if so, you should *definitely* chime in on the mem::forget safety RFC
[15:49:58] <bluss> eh it's simple and not strange, just brilliant ganko
[15:50:31] <bluss> *Gankro
[15:50:53] <Gankro> bstrie: Nah you just set the len to 0
[15:51:12] <Gankro> But it's only safe because mem::forget is
[15:51:24] <Gankro> Basically the only consequence of leaking is... more leaking!
[15:51:57] <bstrie> Gankro: you should still chime in, because a lot of the arguments in that thread are convinced that Rc is sole culprit for leaks and that forget has a philosophical duty to be marked unsafe
[15:52:23] <bluss> Gankro: I think it's an idea that can help us in other places
[15:53:23] <Gankro> In the case of drain[a..b] it does put the Vec in an *unexpected* state, though
[15:53:39] <Gankro> because it has to leak vec[b..] as well
[15:54:00] <Gankro> Even though drain_range should leave you with [..a] + [b..]
[15:54:04] <bluss> it preserves memory safety
[15:54:46] <Gankro> Yes
[15:55:18] <Gankro> Also like Rc cycles, drain_range(a..b) seems niche
[15:55:22] <Gankro> So not super scary
[15:56:11] <bluss> so users would forget the drain iterator and expect.. what? Of course my draft includes docs for this case (it's unspecified)
[15:56:32] <bluss> in our post-forgetpocalypse world it's necessary to doc these things
[15:57:09] <bluss> we could also document that if you forget the Drain iterator, the vector remains with just the part before the range
[15:58:16] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[15:58:32] <bstrie> Gankro: I've been meaning to ask, in the forget thread you write "As written it seems valid for impl Drop to be regarded as a no-op by a conformant compiler, which is obviously ridiculous." is that really so ridiculous?
[15:58:53] <bstrie> Gankro: which is to say I've been tempted to do such a thing for rustc and see what blows up...
[15:59:53] <rkruppe> bstrie: I'd say it's ridiculous. Rust without Drop is about as pointless as Java (and a dozen other languages) without GC
[16:00:05] <bluss> there are places where guards are used like a "finally" clause and those will blow up
[16:00:09] <rkruppe> Try suggesting a JVM that never collects garbage, see how many people laugh :)
[16:00:31] <bluss> my toy game will forget to reset the terminal, and users will be mad.
[16:00:56] <bstrie> rkruppe: not because I'd say it's something you'd want to use, but because if we truly make no guarantees about destructors running, then it should theoretically not crash (assuming it doesn't run out of file handles, etc.)
[16:01:26] <bstrie> bluss: under the bold new world of safe forget, those shouldn't blow up
[16:01:44] <bluss> bstrie: wrong. I'm not giving the guard to users to play with
[16:01:58] <bluss> if I put a guard value in my scope, I rely on it to be dropped
[16:01:59] <bstrie> hm
[16:02:08] <bstrie> I suppose you're right
[16:02:57] <bluss> bring it back to ownership. The last owner determines if the drop runs or not(?)
[16:04:07] <bstrie> rkruppe: also, the whole point of GC is to emulate infinite memory. a JVM that never collects garbage is perfectly compliant, assuming your heap is large enough :)
[16:04:15] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[16:04:27] *** Joins: sluggoxx (Mibbit@moz-juv.9o3.252.72.IP)
[16:04:31] <rkruppe> Yes, Java without GC should work, assuming enough memory
[16:04:37] <rkruppe> Imperfect comparison
[16:04:58] <rkruppe> As far as the language is concerned, the rule could be: Local variables that haven't been moved from are dropped at the end of the scope
[16:04:58] <bstrie> people do this all the time, in fact. walter bright has a post about how he modified the D compiler's allocator to make `free` a no-op, resulting in doubling its speed
[16:05:11] <rkruppe> I read that, it's a cool trick
[16:05:31] *** Joins: nerdopoly (Mibbit@moz-lm1c50.range86-146.btcentralplus.com)
[16:07:29] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[16:08:47] *** Quits: eerie_ (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[16:09:35] <Gankro> bstrie: It strikes me as a bad-faith implementation
[16:10:16] <bstrie> Gankro: well this is all just to tease out exactly what guarantees we're giving to our users :)
[16:10:39] <bluss> bstrie: yes, it's a good trick
[16:11:01] <bluss> I think owner decides if drop runs is a good rule
[16:11:02] <Gankro> bstrie: also as someone who writes unsafe code, I should still be able to use Guards that I can guarantee will be called if I have full control of the code.
[16:11:27] <Gankro> But as written it's like Rust can be like "nah"
[16:12:00] <Gankro> bstrie: e.g. necessary for handling panics in unsafe code
[16:12:07] <bstrie> Gankro: you have the power to stem the tide of "RAII is dead", you just need to tell people not to transfer ownership of their guards :P
[16:12:19] <Gankro> bstrie: Writing post now
[16:12:51] <bluss> do you think I can PR just drain range for Vec, or is that too little? The RFC specifies only Vec and String
[16:13:44] <bstrie> bluss: no PR too small
[16:14:13] <bluss> sounds good
[16:14:59] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:14:59] <bluss> I guess someone has already taken the single character added/removed prize of PRs
[16:15:20] <bstrie> bluss: it occurs to me that could be interpreted as "no, pr too small". submit the dang PR :)
[16:15:53] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:16:21] <rkruppe> I had a single-char PR the other day
[16:16:23] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[16:16:33] <rkruppe> typo'd "SomeTrait" as "SometTrait"
[16:16:40] <bluss> I'm equipped with the language processing of a midsize human, our circuits figured that out. heuristically
[16:16:58] <bstrie> bluss: not everyone is a native english speaker, I don't presume you are either :P
[16:17:03] <bluss> rkruppe: so you'ree a winner
[16:17:29] <rkruppe> What do I win?
[16:18:06] <bluss> some ridiculous github emoticon to take home
[16:18:21] <rkruppe> That's more than I expected, so I'll take it
[16:19:28] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:20:10] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[16:20:17] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:21:28] <phaylon> is it very wrong for me to think of mem::forget as "infinitely owning write-only storage" in my head? just trying to follow along
[16:21:34] *** Quits: kushal (kdas@moz-r2sm7r.202.sitibroadband.in) (Connection closed)
[16:24:22] <bstrie> phaylon: aiui, typical usage of mem::forget is to first take some unsafe pointer to a thing, then run mem::forget on that thing so that you can do whatever you want with the unsafe pointer without worrying about its data getting freed behind your back
[16:24:55] <phaylon> bstrie: ah, yea, I basically used it for ffi stuff to note "hey Rust, you're no longer responsible for this"
[16:25:05] <phaylon> the recent discussions just seemed to indicate there might be a bigger picture :)
[16:25:43] *** Joins: kushal (kdas@moz-r2sm7r.202.sitibroadband.in)
[16:26:22] <bstrie> the recent discussions are a philosophical battle over whether "safe rust" should *either* permit cycles, *or* permit destructors to pretend that destructors are guaranteed to run in all cases
[16:26:26] <bluss> phaylon: sounds good, it's the same as "cycle of Rc pointers sailing away in the sky" right
[16:27:31] *** Quits: nerdopoly (Mibbit@moz-lm1c50.range86-146.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:28:57] <phaylon> bstrie: that helps, thank you.
[16:29:16] <phaylon> bluss: yea, I assumed so. just not really using complex Rc<> & co much
[16:30:14] <phaylon> honestly, since stuff like Mutex probably won't get inconvenient or something, as a user I'm not too worried. might be lack of experience
[16:30:26] <phaylon> anyway, thanks for the clearups!
[16:31:38] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[16:35:43] *** Quits: sluggoxx (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:37:50] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:40:50] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[16:48:21] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:48:21] *** ChanServ sets mode: +o brson
[16:49:29] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[16:50:47] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[16:51:15] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[16:51:15] *** ChanServ sets mode: +o pcwalton
[16:51:38] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[16:52:16] <simukis> Shouldnâ€™t Rc impl Managed instead of !Send and !Sync, as it is a form of GC?
[16:52:24] <tamird> acrichto could i get another approval on https://github.com/rust-lang/rust/pull/24718?
[16:52:33] <tamird> and a retry on https://github.com/rust-lang/rust/pull/24681 :)
[16:53:13] <rkruppe> simukis: Is Managed still a thing?
[16:53:23] <simukis> thereâ€™s unstable marker.
[16:53:33] <rkruppe> I mean, does it still mean anything?
[16:53:52] <bstrie> what the heck is Managed
[16:53:53] <rkruppe> Anyway, Rc certainly shouldn't be Send or Sync because its refcount operations are not atomic, so having two Rcs to the same thing in different threads is unsafe
[16:54:01] <simukis> yes, it `impl !Send` and `impl !Sync`
[16:54:17] <simukis> (the Managed, I mean)
[16:54:22] <rkruppe> simukis: But nothing else?
[16:54:54] <simukis> not sure
[16:54:56] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[16:55:07] <simukis> seems to have some support in the compiler, still
[16:55:25] <acrichto> tamird: you can indeed!
[16:55:32] <rkruppe> Maybe that was just never removed?
[16:55:53] <rkruppe> I can't imagine what it could possibly (usefully) do with @ gome
[16:58:38] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[17:00:23] <simukis> rkruppe: since this marks objects managed by GC, it might be useful to various embeded interpreters, like python and whatnot
[17:00:45] <simukis> that is, you would mark FFI types as Managed
[17:01:25] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[17:01:40] <rkruppe> But if Managed types don't get any special treatment, embedded interpreters gain nothing from it
[17:01:58] <simukis> thereâ€™s some hints of special support in the compiler
[17:03:21] <simukis> or maybe notâ€¦
[17:03:58] <rkruppe> Unless a good spirit has silently implemented stack maps and an API to access those, and made sure it doesn't bit rot, I'm skeptical that there is anything substantial behind those hints
[17:04:31] <sfackler> acrichto: how do you want to handle debug builder stabilization?
[17:04:55] <acrichto> sfackler: I think it's a prime candidate for "just switching stability tags to #[stable]"
[17:05:06] <sfackler> cool
[17:05:22] <acrichto> in terms of process, I'm less sure
[17:05:33] <acrichto> I think it may be a bit heavyweight to have a whole RFC to stabilize it
[17:05:41] <acrichto> there haven't been many surprises with it along the way
[17:06:01] <acrichto> aturon: thoughts on stabilizing the debug builders? (in terms of process)
[17:06:06] <sfackler> yeah. Maybe just open a PR stabilizing it and seeing if there's any discussion/objection there?
[17:07:03] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:07:05] <sfackler> you did previously mention the field vs entry naming thing
[17:07:19] <acrichto> just a minor nit though, nothing major
[17:07:35] <sfackler> also naming of debug_tuple
[17:07:39] <sfackler> vs debug_tuple_struct
[17:09:08] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[17:09:45] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:09:45] *** ChanServ sets mode: +o pcwalton
[17:11:03] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[17:13:18] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[17:13:38] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[17:14:15] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[17:16:24] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[17:21:20] *** Joins: tcurdt (tcurdt@moz-eufeai.dip0.t-ipconnect.de)
[17:21:36] *** Quits: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net) (Ping timeout: 121 seconds)
[17:23:27] *** Joins: jdm (jdm@moz-vmfnmv.ckpj.s0pt.0450.2001.IP)
[17:24:42] <erickt> acrichto: not sure if this is a big deal or not, but I saw that while collections::BitSet is unstable, it has a bunch of stable methods :)
[17:25:13] <acrichto> erickt: I think that was intentional?
[17:25:20] <acrichto> e.g. the name BitSet was a bit odd
[17:25:27] <acrichto> but the methods all conformed to collections conventions
[17:26:01] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[17:27:05] <erickt> that's what I figured :)
[17:43:20] <sfackler> man i wish we had extensible enums
[17:45:29] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[17:45:47] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Ping timeout: 121 seconds)
[17:49:24] <Manishearth> sfackler: http://github.com/Manishearth/rust-extensible
[17:49:30] <Manishearth> not perfect mind you
[17:55:46] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[17:58:59] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[17:59:18] <erickt> acrichto: Rust once, Run Everywhere? hehe
[17:59:24] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Quit: Leaving)
[17:59:50] <acrichto> erickt: aturon's idea for the title :)
[18:02:20] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[18:03:18] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[18:03:24] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[18:03:47] <XMPPwocky> is it valid to have two aliasing &mut if one of them is unreachable?
[18:04:45] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[18:05:31] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[18:07:49] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[18:09:58] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[18:11:16] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[18:11:30] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Connection closed)
[18:15:21] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[18:16:31] <reem> Iâ€™ve never been as frustrated with bike shedding as with every suggestion that shows how you can write forget for â€˜static dataâ€¦
[18:16:59] <kmc> i'm reading about Spec# and thinking how much nicer it would be in Rust :)
[18:17:27] <kmc> they basically introduce notions of ownership and mutable borrowing in C# in order to allow temporarily breaking data invariants
[18:17:54] *** Quits: johnz133 (johnz133@moz-tqd.4t0.72.208.IP) (Quit: )
[18:18:14] <kmc> what is the equivalent of loop invariants for iterator-based loops?
[18:19:14] <kmc> perhaps, refinements on the return type of next()
[18:19:25] *** Joins: johnz133 (johnz133@moz-tqd.4t0.72.208.IP)
[18:20:27] <larsberg> kmc: there were also two parts to that work - the static annotations the compiler could check (e.g., the non-nullability assertions) and the stuff that required a run through the boogie model checker. All of the ownership stuff was of the latter form, and unfortunately it was pretty slow (days for a few hundred thousand lines of code)
[18:20:54] <kmc> dang
[18:21:19] <larsberg> I funded the Spec# compiler frontend work out of my group a long long time ago and much of our codebase (including the new editor for VS) was written in C# with Spec# comments, which was the "other" mode that the Spec# compiler could run in
[18:21:38] <larsberg> This was also circa-2004, so model checkers and computers are a bit better now :-)
[18:21:48] <kmc> were you using Z3 back then?
[18:22:37] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[18:23:07] <larsberg> kmc: IIRC, boogie used a different model checker under the hood back then; I'd need to check the docs. I didn't look into it too deeply; I was even more managery then than I am today :-)
[18:23:09] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[18:23:13] <kmc> okay
[18:23:14] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[18:25:23] <larsberg> kmc: yeah, I just checked an old boogie and spec# source tree I had "lying around" and it was z3 under the hood
[18:25:33] <kmc> miTLS is 5 kLoC and they report 15 minute verification on a "modern desktop" in 2013
[18:25:39] <kmc> so days for 100 kLoC sounds... still plausible :/
[18:26:22] <simukis> acrichto: isnâ€™t â€œRust code can be called from C with no setup at all.â€œ a bit incorrect? For example if we do not setup runtime, std::env::args() will never work on linux
[18:26:44] <acrichto> simukis: it will "work" in the sense that it just returns an empty array
[18:27:19] <larsberg> kmc: the bigger challenge, IIRC, was (to use modern Rust terminology) that there was no notion of borrowing, so you had to write proof checker assertions any time you were passing off a value to a method in another class. IIRC (again, LONG time ago), ownership was also closely integrated with the class hierarchy.
[18:27:22] <acrichto> there's some stuff that you can opt-in to to "improve the experience" of calling rust
[18:27:31] <acrichto> simukis: e.g. stack overflow detection, guard pages, args, etc
[18:27:35] <acrichto> simukis: but none of it is required
[18:28:14] <simukis> exactly. I, actually, wish there were syscalls to get CLI arguments and environment variables
[18:28:22] <simukis> (on unixes, that is)
[18:28:35] <acrichto> yeah :(
[18:29:22] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (Ping timeout: 121 seconds)
[18:29:33] <kmc> what I'm reading now uses explicit attributes to specify which object-typed fields are and aren't owned
[18:30:14] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[18:30:41] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[18:35:30] <reem> what would be required for closing issues like these? https://github.com/rust-lang/rfcs/issues/842
[18:35:55] <reem> this is currently implemented on crates.io and it is pretty unlikely imo that we will put this in std for a long while
[18:36:21] <simukis> reem: well, if it is on crates.io, then that is good enough reason to close it IMO
[18:36:46] <reem> Iâ€™m generally curious what the criteria for these â€œwishlistâ€ issues are
[18:37:57] <simukis> hmm, currently this is 75% inactionable, because Future is unstable and Timer does not exist anymore
[18:38:20] <simukis> so weâ€™d want to evaluate this when stabilising Future, but we will anyway
[18:38:35] <reem> I doubt weâ€™ll ever stabilize Future
[18:38:40] <simukis> that too
[18:38:44] <reem> it should probably just go away in favor of crates.io solutions
[18:38:47] <bstrie> reem: good question
[18:39:22] <simukis> I doubt thereâ€™s an answer for a general case, though
[18:39:30] <bstrie> reem: it's reasonable that we should have some space for users to say "I think this would be a good idea for the standard library", but I don't know if it makes sense for the rfc repo PR queue to be that place
[18:39:43] <reem> ^ 1000x this
[18:39:44] <bstrie> er, the issue tracker
[18:39:56] <bstrie> which is a bit less onerous than being in the PR queue
[18:40:29] <simukis> bstrie: we use rfcs issue tracker for exactly this purpose
[18:40:34] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:40:34] *** ChanServ sets mode: +o pcwalton
[18:40:37] <bstrie> in the ideal case, someone would just make the lib, put it on crates.io, iterate on it with feedback, get obvious community support, and then petition to have it blessed into std
[18:40:42] <simukis> that is keeping user wishes
[18:40:57] <reem> bstrie: imo that last step is just unnecessary
[18:41:03] <bstrie> but that doesn't address the problem of "this library doesn't exist, hey rust devs implement this please". which is maybe always unactionable anyway
[18:41:38] <reem> itâ€™s almost always unactionable
[18:41:42] <bstrie> reem: it's not the case that the stdlib will never grow. petitions are reasonable, though their expectations should be tempered
[18:41:57] <reem> Of course, Iâ€™m not suggesting we never grow std
[18:42:13] <reem> itâ€™s just that the category of things which are appropriate for std is a very small subset of whatâ€™s appropriate on crates.io
[18:42:24] <reem> for*
[18:43:10] <bstrie> in this particular case, some would argue that concurrency primitives are fundamental enough that it makes sense to standardize them so that downstream consumers can interop more easily
[18:43:39] <erickt> reem: I'm definitely on the land in crates.io in almost every case side
[18:43:46] <erickt> unless there's a really really good reason
[18:43:53] <bstrie> I want serde in the stdlib someday :P
[18:44:23] <bstrie> do not underestimate the value of "standardizing", even if other languages oversell the benefit of batteries-included
[18:44:25] <Gankro> How hard/bad would it be to mark heap::EMPTY as allocated somehow?
[18:44:57] <erickt> maybe! but if all they need to do is add a line to Cargo.toml then it's not a huge priority to me
[18:45:50] <reem> erickt: imo the major reason for moving some sort of serialization to std is that you really want those derives on basically every type, and thatâ€™s basically only feasible if the traits are in std
[18:45:51] <phaylon> a middle ground could be giving cargo the ability to have library collection traits. so you could download a topic specific set of libraries
[18:46:16] <simukis> (Future is hardly a concurrency primitive, it is a convenience abstraction)
[18:47:00] <scott> playbot: (||||42)()()
[18:47:02] -playbot- Global is external, but doesn't have external or weak linkage!
[18:47:02] -playbot- i32 (%closure*)* @_ZN4main12closure.1067E
[18:47:02] -playbot- output truncated; full output at: http://bit.ly/1Dsj5Ms
[18:47:06] <scott> any ideas?
[18:48:00] <simukis> scott: fill an issue
[18:48:07] <erickt> reem: reasonable argument, and I've thought about it a lot
[18:48:10] <scott> looks like some similar issues are filed
[18:48:34] <reem> erickt: Iâ€™m sure :)
[18:49:06] <simukis> scott: well, if you fill a duplicate we will eventually look at it and close
[18:49:16] <simukis> if you donâ€™t we might never know about it for 10 years or something
[18:50:29] <simukis> scott: though, yes, it appears to be a dupe
[18:50:47] <scott> my test case is much smaller, anyway
[18:51:14] <scott> filed as https://github.com/rust-lang/rust/issues/24779
[18:51:57] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[18:53:28] *** Quits: martin_ (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP) (Ping timeout: 121 seconds)
[18:54:30] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[18:54:41] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:55:29] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[18:56:48] <bstrie> phaylon: could be a neat idea. rust profiles
[18:57:25] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[19:00:52] <aturon> acrichto: re: process for stabilization, i think for the time being a PR with core team approval is basically the status quo, this should get more clear if we move to subteams
[19:00:54] *** Joins: eerie_ (eerie@moz-joilui.red.bezeqint.net)
[19:01:36] <reem> aturon: Do you happen to have a working version of the new thread::scoped API?
[19:01:49] <reem> I would like to attempt to port hyper over to use it, as a practical example of the effects
[19:01:58] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[19:02:05] <reem> since hyper also consumed the old API
[19:03:50] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:05:36] <aturon> reem: the code in the RFC works, but will require some transmute magic if you want it to sit on top of spawn (rather than using the internals directly)
[19:05:53] <aturon> reem: i'd be glad to do that once i'm back from lunch :)
[19:06:23] <aturon> reem: i'd also be very curious to see the examples where you're sharing parent thread stacks
[19:06:25] <reem> aturon: That would be awesome. I am also prototyping adding Leak, to see what the practical effects of that are in the compiler + std.
[19:06:34] <aturon> nice!
[19:07:09] <reem> I am taking the approach of requiring Leak for Rc::new, but also providing an unsafe Rc::new_leak which has no bounds, then all operations on existing Rcs have no bounds
[19:07:42] <reem> (same for Arc)
[19:10:02] <bstrie> brson: ping
[19:10:56] <reem> the alternative is to make new have no bounds and have Clone be the operation requiring Leak
[19:11:33] <reem> but that makes it harder to use existing (acyclic) Rc-based code with a non-leak type unsafely
[19:12:38] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[19:13:30] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[19:23:07] *** Joins: aldeka (quassel@moz-qqf.of6.243.162.IP)
[19:24:43] <reem> and you only need to put a Leak bound on Sender::clone, to prevent cyclic channels
[19:24:50] <reem> (e.g. sending a sender)
[19:26:20] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[19:27:51] <reem> Anyone know what might be going on here? Getting a linker error trying to build rust: https://gist.github.com/anonymous/11501d7fb0ffa29749e2
[19:28:13] <reem> rust repo is checked out at /usr/local/src/rust
[19:28:19] <reem> if that helps
[19:30:34] *** Joins: srh (User@moz-80e.38o.254.50.IP)
[19:33:20] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[19:33:59] *** Quits: eerie_ (eerie@moz-joilui.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:36:03] <seanmonstar> reem: however, switching to spawn had allowed the Sentinel to actually restart threads
[19:36:54] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[19:37:03] *** Quits: kushal (kdas@moz-r2sm7r.202.sitibroadband.in) (Ping timeout: 121 seconds)
[19:39:25] <reem> seanmonstar: sure, but thatâ€™s sort of a separate issue
[19:39:45] <reem> seanmonstar: we may end up sticking to spawn in hyper practically, I just want to demonstrate the effects on a real codebase
[19:39:59] *** Quits: tcurdt (tcurdt@moz-eufeai.dip0.t-ipconnect.de) (Quit: Textual IRC Client: www.textualapp.com)
[19:40:13] <reem> Where do I go in the compiler to add a trait as a builtin which can be used in object bounds?
[19:42:49] <simukis> reem: usually recomipiling everything, including llvm, helps
[19:43:07] <reem> simukis: I did a new ./configure and that helped
[19:44:33] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[19:45:01] <GBGamer> I have a question about extern functions that could probably be answered by reading the compiler source, but I'm feeling lazy
[19:45:02] *** Quits: semarie (semarie@moz-b0t90g.tor-proxy.net.ua) (A TLS packet with unexpected length was received.)
[19:45:20] <GBGamer> Does anyone know stuff about the emitted llvm that I could ask?
[19:46:19] <GBGamer> Specifically why there's so much boilerplate around extern "C" functions?
[19:46:45] *** Quits: dustinm (dustinm@moz-9ms.n6q.68.208.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[19:47:03] <GBGamer> Why are there two functions emitted, one being the boilerplate, one being the function?
[19:47:20] <simukis> GBGamer: one uses C calling convention
[19:47:29] <GBGamer> And, if there are two functions emitted, why doesn't rust code call the rust_abi one
[19:47:31] <XMPPwocky> maybe for green thread stuff or something?
[19:47:36] <simukis> and another wraps that C-calling-convention one and translates it to rust ABI
[19:48:01] <GBGamer> well yeah, okay
[19:48:11] <reem> after Iâ€™ve made changes to the compiler internals, how do I trigger a rebuild?
[19:48:12] <GBGamer> But I was more wondering about the giant amount of boilerplate
[19:48:24] <simukis> GBGamer: what exactly?
[19:48:25] <reem> just make -j8 check-stage1-std ignores my changes and builds with the old compiler
[19:48:35] <simukis> reem: you can try removing stamps
[19:48:39] <GBGamer> first it compares %fs:0x70 to %rsp
[19:48:47] <simukis> I think either in $RUSTHOME/tmp/
[19:48:48] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[19:48:59] <simukis> GBGamer: thatâ€™s stack checking
[19:49:11] *** Joins: eerie (eerie@moz-joilui.red.bezeqint.net)
[19:49:14] <GBGamer> Why is it checking the stack?
[19:49:24] *** Joins: dustinm (dustinm@moz-9ms.n6q.68.208.IP)
[19:49:42] <GBGamer> And why are there three possibilities for calling it?
[19:49:52] <simukis> GBGamer: previously rust had dynamically sized stacks. Now it mostly used to detect when stack overflows and print a nice message
[19:50:11] <GBGamer> okay, that makes sense
[19:50:26] <simukis> this would be much smaller with stack probes
[19:50:34] <simukis> but LLVM supports those on windows only
[19:50:52] <GBGamer> Okay, fine, I get that now
[19:51:01] <GBGamer> But why, then, does rust call the C one?
[19:51:10] <reem> aturon: fwiw getting all of std to compile required minimal changes (probably <20 LOC)
[19:51:13] <brson> bstrie: ping
[19:51:15] <brson> bstrie: pong
[19:51:16] <simukis> GBGamer: inlining in action?
[19:51:29] <GBGamer> Oh crap you're totally right
[19:51:33] <GBGamer> haha okay
[19:51:41] <GBGamer> I think I'm starting to get this
[19:52:29] <simukis> Iâ€™m not sure whether you can prevent rustc from inlining the glue
[19:52:36] <simukis> but you can totally drop the stack checks
[19:52:40] *** Quits: eerie (eerie@moz-joilui.red.bezeqint.net) (Connection closed)
[19:52:41] <reem> aturon: Trying to change the compiler too, but that requires adding Leak as a lang item and such, which is going to take me a bit longer.
[19:52:47] * simukis somehow finds himself unable to remember exact attribute
[19:53:04] <GBGamer> Okay, second question
[19:53:08] <simukis> something like in #[no_stack_check] direction
[19:53:23] *** Quits: Thorn (Thorn@moz-gfo.20c.107.217.IP) (Quit: Quit)
[19:53:55] <GBGamer> I'm attempting to emit an i386 obj file, but rustc --emit=obj -C target-cpu=i386 test.rs doesn't work
[19:54:28] <GBGamer> it simply emits an x86-64 elf file
[19:54:43] <GBGamer> (so the obj part works, but not the i386)
[19:55:00] <simukis> I believe target-cpu only restricts instruction set
[19:55:17] <GBGamer> Okay, then how do I target 32-bits?
[19:55:34] <GBGamer> (obviously --target, but I can't actually figure out the target triple :/)
[19:57:51] <simukis> GBGamer: https://github.com/rust-lang/rust/tree/master/src/librustc_back/target
[19:57:58] <simukis> replace underscores with hyphens
[19:58:11] <GBGamer> ah okay, i686
[19:58:19] <GBGamer> thank you thank you thank yo
[19:58:21] <GBGamer> *u
[19:59:36] <simukis> I want --target=help or --target=list
[20:00:19] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Ping timeout: 121 seconds)
[20:00:54] <GBGamer> that would be really nice :)
[20:03:33] *** Joins: ytain (ytain@moz-aope4o.dsl.teksavvy.com)
[20:03:55] <reem> Is it faster to make check-stage1-std under release or debug?
[20:06:48] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[20:18:22] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[20:22:00] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[20:22:56] *** Quits: GBGamer (npm@moz-92sbjt.wa.comcast.net) (Quit: leaving)
[20:23:00] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[20:26:10] *** Joins: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net)
[20:28:28] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[20:29:40] *** Joins: panitaliemom (Mibbit@moz-juv.9o3.252.72.IP)
[20:30:58] *** Quits: panitaliemom (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:34:47] <brson> erp, I forgot we might want to make a beta today. do we want to make a beta?
[20:35:08] <steveklabnik> it might be 
[20:35:10] <steveklabnik> did the backport land?
[20:35:19] <steveklabnik> i haven't done any of the doc backports yet, but that's not important to land
[20:35:45] <brson> hm, we lost the .3 prerelease version on beta. i'll add that
[20:36:04] <brson> it looks like acrichto's beta patch did land
[20:36:13] <brson> acrichto: shall we make a beta today?
[20:36:18] <acrichto> brson: sgtm
[20:37:09] <simukis> you guys really like living dangerously doing releases on the eve of friday
[20:38:27] <steveklabnik> pssh
[20:39:25] <XMPPwocky>  http://is.gd/mSVtSR
[20:39:30] <XMPPwocky> is .... is this intentional behavior
[20:40:09] <reem> XMPPwocky: What would you expect to happen?
[20:40:16] <XMPPwocky> reem: the outer impl to be disallowed
[20:40:17] <rovar> brson, steveklabnik, is there a twitter hashtag regarding the 1.0 release party(s)
[20:40:20] <XMPPwocky> or for both impls to conflict
[20:40:29] <brson> XMPPwocky: it looks pretty crazy to me
[20:40:36] <steveklabnik> no idea, rovar 
[20:40:49] <XMPPwocky> brson: the ability to do the outer impl is sort of neat because you can have, like, "non-friend functions"
[20:41:05] <XMPPwocky> i.e. methods you can call w/o importing a trait, that can't access private thing
[20:41:29] <rovar> steveklabnik, well make something up :)
[20:41:44] <brson> XMPPwocky: yeah, the multiple impls are intentional I think, and I can see how your error makes sense
[20:42:04] <brson> XMPPwocky: eddyb lifted the restrictions on impls in mods. he could say whether that's intentional behavior
[20:42:16] <XMPPwocky> http://is.gd/eMjrps aaand sometimes there's no error
[20:42:26] <rovar> how about #RustLang
[20:42:28] <rovar> :)
[20:42:30] <reem> I just prototyped adding Leak, and thereâ€™s much more code just adding support for another lang item then it actually causes breakage, both in std and in rustc
[20:42:36] <larsberg> Is FromPrimitive no longer implemented for newtypes? e.g., I can't just pub type CFNumberType = u32; and expect to FromPrimitive an i32 into it anymore from another crate?
[20:42:57] *** Joins: chronode (chronode@moz-oddj4e.ga.comcast.net)
[20:43:00] <reem> larsberg: type is just a type alias, so CFNumberType *is* u32
[20:43:15] <reem> e.g. `cfnum as i32` should work fine
[20:43:19] <simukis> you donâ€™t even have to define a module
[20:43:42] <simukis> struct A; impl A { fn hello(){} }; impl A { fn hello () {} }; works just fine
[20:44:19] <XMPPwocky> okay, WHAT
[20:44:25] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[20:44:25] <XMPPwocky> sometimes they'll work
[20:44:33] <larsberg> reem: Hrm, then I wonder what I'm missing. We used to do "let width_value: CFNumber = FromPrimitive::from_i32(size.width).unwrap();" but that's broken as of Apr14 or so saying that FromPrimitive is not implemented on CFNumber.
[20:44:35] <XMPPwocky> if they have different signatures
[20:44:41] *** Joins: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com)
[20:45:02] <simukis> doâ€¦ doâ€¦ we actually have specialisation in Rust?!
[20:45:25] <XMPPwocky> if one takes &self and the other takes self
[20:45:39] <XMPPwocky> if you call it on T, you get the self 
[20:46:01] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[20:46:06] <XMPPwocky> http://is.gd/paL7Ur
[20:46:10] <XMPPwocky> i'm not even mad that's amazing
[20:46:23] * XMPPwocky checks "function overloading" off the list of feature requests
[20:46:25] <bluss> if they're in the same impl block you get "duplicate method"
[20:46:49] <XMPPwocky> hmm
[20:47:09] <bluss> I thought impl blocks in different modules were forbidden now
[20:47:20] <reem> larsberg: FromPrimitive is gone
[20:47:21] <larsberg> reem: no worries; I think I've got it figured out
[20:47:28] <reem> oh, never mind, just unstable
[20:47:49] <reem> cool :)
[20:48:06] * larsberg has had the same experience with trying to find anything about unstable features :-)
[20:49:06] <steveklabnik> larsberg: i started documenting them in their own section of the book
[20:49:09] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Connection closed)
[20:49:13] <steveklabnik> but naturally i've been working on stable stuff first :)
[20:51:25] <larsberg> steveklabnik: Nice! That will definitely help. I had checked http://doc.rust-lang.org/nightly/std/ and unstable stuff doesn't seem to be in there, which seemed weird for nightly docs.
[20:52:08] <XMPPwocky> okay, it only cares about the type of self
[20:52:24] <steveklabnik> unstable stuff in the API documentation is just labeled as such
[20:52:40] <steveklabnik> http://doc.rust-lang.org/nightly/std/iter/trait.Iterator.html#method.sum <- 'unstable'
[20:52:51] <steveklabnik> or, with a better message: http://doc.rust-lang.org/nightly/std/iter/trait.Iterator.html#method.reverse_in_place
[20:54:03] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Ping timeout: 121 seconds)
[20:55:04] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[20:55:43] <larsberg> steveklabnik: then I'm a little surprised http://doc.rust-lang.org/nightly/std/?search=FromPrimitive doesn't return anything? Or has its removal happened? Various metabugs say different things and there are still tests that use it. Hrm.
[20:55:53] <XMPPwocky> i don't actually think this is a bug
[20:55:54] <sfackler> larsberg: it's been removed
[20:55:55] <XMPPwocky> huh, neat
[20:55:57] <sfackler> i think
[20:56:06] <XMPPwocky> it's an interaction between UFCS and other things, i think
[20:56:09] <bluss> larsberg: num crate has taken over a lot of such things
[20:56:26] <XMPPwocky> if impl Foo { fn x(&self) } is considered to actually be a method on &Foo
[20:56:53] <larsberg> sfackler: bluss: Aha, thanks! We're still in the middle of moving Servo to Apr14, so I probably just need to make an older docset corresponding to that :-)
[20:57:56] <steveklabnik> larsberg: pretty sure it was removed
[20:58:17] <steveklabnik> larsberg: acrichto went through and removed almost everything that was deprecated, so maybe that's the issue
[20:58:42] *** Joins: ytain_ (ytain@moz-ge9fgi.dsl.teksavvy.com)
[20:58:55] <larsberg> steveklabnik: This happened after beta1, I take it? Maybe I should build a new snapshot if we're going to keep hitting these.
[20:59:18] <sfackler> yeah
[20:59:26] <larsberg> aha, i see - https://github.com/rust-lang/rust/pull/24636
[20:59:26] <sfackler> there's some more removal after beta2 as well
[20:59:30] *** Parts: chronode (chronode@moz-oddj4e.ga.comcast.net) ("Textual IRC Client: www.textualapp.com")
[20:59:47] <steveklabnik> larsberg: yeah. 
[21:00:14] *** Quits: ytain (ytain@moz-aope4o.dsl.teksavvy.com) (Connection closed)
[21:00:14] <steveklabnik> last time we can do something like this, so might as well
[21:00:16] <bluss> larsberg: only already deprecated items should have been removed
[21:00:31] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[21:00:32] <arielb1> XMPPwocky: UFCS isn't involved
[21:01:06] <arielb1> that's how method lookup works
[21:01:10] <arielb1> and autoderef/autoref
[21:01:32] <arielb1> first you try with 0 autoderefs, then with 0 autoderefs and autoref, then with 1 autoderef, then 1 autoderef and autoref
[21:02:30] <larsberg> I'm surprised we didn't see a warning and remove it already (we try to build warning-clean), unless it got deprecated and removed between our last rustup and today, which I guess is possible since we're only on alpha right now.
[21:04:57] <Aaron> Question... Is there a nice way to use the rust build system to build libstd (and the rest of rt) for an arbitrary target/arch?
[21:07:27] *** Quits: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net) (Ping timeout: 121 seconds)
[21:08:45] *** Joins: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net)
[21:09:38] <acrichto> brson: hm so I thought I had a way of gating target_env, but I was led astray unfortunately
[21:10:08] <acrichto> brson: hm no, I may still have more ideas...
[21:10:59] <brson> acrichto: it's nbd if you can't
[21:11:37] <brson> acrichto: beta build failed! http://buildbot.rust-lang.org/builders/beta-dist-rustc-mac/builds/16/steps/compile/logs/stdio
[21:12:08] <brson> killing the other builds
[21:12:15] <acrichto> whaaaaaaaat
[21:12:30] <steveklabnik> oh nooo
[21:12:43] <acrichto> I swear that whole build passed locally for me
[21:12:48] <acrichto> albeit on linux not on osx
[21:13:30] <brson> i'll see if i can figure out what's wrong on os x
[21:14:02] <acrichto> brson: its should just be s/self.wrapping_neg()/-self/
[21:14:10] <acrichto> er, !self + 1
[21:14:37] <acrichto> brson: ah I guess I didn't rerun the full suite after I rebased out one of felix's PRs
[21:14:40] <acrichto> sorry :(
[21:17:36] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[21:17:43] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[21:17:47] <tamird> acrichto: another approval plz https://github.com/rust-lang/rust/pull/24681 - had to remove one of the changes because the test is still broken
[21:17:57] <GBGamer> Is there a rustc flag similar to -ffreestanding?
[21:18:58] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[21:19:40] <acrichto> GBGamer: they're primarily crate attributes instead of compiler flags, #![no_std] and #![no_builtin]`
[21:20:01] *** Joins: kard (-@moz-3ptu76.dip0.t-ipconnect.de)
[21:20:42] <GBGamer> The issue is that ld says, "undefined reference to `_GLOBAL_OFFSET_TABLE_'
[21:21:24] <GBGamer> whereas with the exact same thing, written in C, with -ffreestanding, there is no issue
[21:22:18] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[21:22:18] *** ChanServ sets mode: +o nrc
[21:22:19] <acrichto> GBGamer: do you know where that referece is coming from?
[21:22:27] <GBGamer> From a function call
[21:23:00] <GBGamer> I assume that the functions calls (_GOT_ + point of function call)
[21:23:17] <GBGamer> versus C, which, with -ffreestanding, just calls (point of function)
[21:23:47] *** Quits: James (quassel@moz-9kp9p2.range86-148.btcentralplus.com) (Connection closed)
[21:24:12] <acrichto> you may just need to turn off PIC or something like that
[21:24:22] <GBGamer> how would I do that?
[21:25:03] <GBGamer> I assume it's an llvm flag
[21:26:16] <acrichto> maybe under -C? not sure unfortunately
[21:26:38] <simukis> -C relocation-model=static/dynamic-no-pic
[21:28:01] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (Ping timeout: 121 seconds)
[21:28:40] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Quit: ChatZilla 0.9.91.1 [Firefox 40.0a1/20150401085108])
[21:29:21] <GBGamer> It says that static-no-pic doesn't exist
[21:29:50] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[21:29:51] <GBGamer> oh though it dynamic-no-pic does work
[21:30:09] <simukis> either `static` or `dynamic-no-pic`
[21:30:18] <GBGamer> yeah, dynamic works :)
[21:30:20] <GBGamer> thank you
[21:30:23] <Luqman> GBGamer: options are: default, static, pic, or dynamic-no-pic
[21:30:33] <GBGamer> thanks luqman
[21:31:18] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (A TLS packet with unexpected length was received.)
[21:32:46] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:32:49] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[21:35:53] *** Joins: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net)
[21:38:37] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:38:37] *** ChanServ sets mode: +o pcwalton
[21:39:54] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[21:40:38] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:40:53] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:40:53] *** ChanServ sets mode: +o pcwalton
[21:41:59] *** Quits: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net) (Ping timeout: 121 seconds)
[21:41:59] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[21:43:44] *** Joins: proc (proc@moz-11t9cg.dip0.t-ipconnect.de)
[21:45:28] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[21:48:27] *** Joins: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net)
[21:50:51] <brson> acrichto: r? https://github.com/rust-lang/rust/pull/24785
[21:51:13] <acrichto> brson: aren't overflow checks turned on for that?
[21:51:27] <acrichto> playbot: -i32::min_value()
[21:51:29] -playbot- -2147483648
[21:51:44] <brson> acrichto: idk, but that's what the calls to wrapping_neg replaced
[21:51:50] *** Quits: eibwen (eibwen@moz-dhk8m2.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:51:58] <acrichto> I thought that was b/c we turned on overflow checks for negation
[21:52:06] <acrichto> hm
[21:52:09] <brson> but did not add wrapping_neg?
[21:52:15] <brson> wouldn't they happen at the same time?
[21:52:18] <acrichto> I'm gonna actually read the PR we left out
[21:52:20] <acrichto> I have no idea
[21:52:31] <reem> This is the entirety of fallout from implementing Leak https://github.com/reem/rust/commit/8f412e8fb4fc91641f4177cac2d0591759f6ac61
[21:52:37] <reem> in both std and the compiler
[21:52:45] <reem> 34 additions, 5 deletions
[21:52:49] <acrichto> brson: no wrapping was implemented separately
[21:52:58] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[21:53:10] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[21:53:13] <reem> (and 50% of that is stage0 noise)
[21:53:17] <acrichto> brson: but !foo + 1 should be fine
[21:53:30] *** Joins: cengizIO (textual@moz-jju.ckp.250.151.IP)
[21:53:34] <brson> ok
[21:54:13] <brson> acrichto: pushed your change
[21:56:34] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[21:56:35] *** Parts: cengizIO (textual@moz-jju.ckp.250.151.IP) ("Textual IRC Client: www.textualapp.com")
[21:57:34] <WindowsBunny> reem: I like that
[21:57:48] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:57:51] *** Joins: sprang (sprang@moz-bb96om.6d5c.910g.0470.2001.IP)
[21:58:00] *** rkruppe_ is now known as rkruppe
[21:58:16] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Connection closed)
[21:58:34] <reem> Hereâ€™s a full impl, including the needed compiler changes to add a lang item for Leak (the majority of the changes): https://github.com/rust-lang/rust/compare/master...reem:leak
[21:58:49] <aturon> reem: there's a safety bug --
[21:58:59] <aturon> you're using new_leak in the channel implementation
[21:59:07] <aturon> but you can create cycles using channels
[21:59:12] <aturon> (have you seen acrichto's example?)
[21:59:23] <reem> aturon: Thatâ€™s why the impls of Clone for Sender and SyncSender require Leak
[21:59:31] <reem> you canâ€™t create a cycle if you canâ€™t clone sender
[21:59:42] *** Joins: rprichard (rprichard@moz-qkai33.en8f.d045.0009.2601.IP)
[21:59:50] <reem> *a lot* of the breakage can be avoided by careful choice of where to put the Leak bounds
[22:01:02] <aturon> reem: gotcha. it'd be interesting to see how much those bounds break crates.io code
[22:01:03] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[22:01:19] <aturon> the code in the distro doesn't use channels as much as it used to
[22:01:20] <reem> I canâ€™t say for sure, but judging by how little needed to change in std and the compilerâ€¦
[22:01:30] <reem> fwiw I rarely see channels in the wild too
[22:01:43] <acrichto> reem: I'm not confident that the fallout here is representative of the fallout on crates.io
[22:01:44] <reem> the sharing primitives are so good and so easy to use that people usually just reach for them directly
[22:02:03] <acrichto> reem: also nearly all the usage of new_leak is introducing unsafe blocks where they weren't necessary before
[22:02:08] <reem> acrichto: We could run one of those â€œtest everythingâ€ builds
[22:02:12] <acrichto> reem: e.g. the biggest impact would be servo here b/c most libs don't use Rc/Arc
[22:02:26] <aturon> reem: yeah, i think trying this on brson's crater tool could be interesting
[22:02:32] <reem> The compiler uses Rc extensively
[22:02:34] <aturon> to really get a sense for the global fallout
[22:02:49] *** Quits: Rusky (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[22:02:49] *** Joins: Rusky1 (russell@moz-pob0l8.slkc.qwest.net)
[22:02:59] <reem> the number 1 thing that will cause breakage is trait objects
[22:03:07] <aturon> reem: yeah, i was just going to raise that point
[22:03:20] <acrichto> reem: right but that is very worrisome
[22:03:26] *** Quits: Rusky1 (russell@moz-pob0l8.slkc.qwest.net) (Quit: Leaving.)
[22:03:27] <acrichto> having to worry about Leak at all is pretty worrisome
[22:03:29] <reem> agreed, it is concerning
[22:03:49] <aturon> reem: is this bootstrapping all the way? if so we should try it on full crates.io
[22:03:57] *** Joins: Rusky (russell@moz-pob0l8.slkc.qwest.net)
[22:04:05] <reem> running make check now, but it passed make check-stage1-std
[22:04:15] <reem> make check appears to be doing fine
[22:04:25] <aturon> ok cool, when it's done can you point brson at the branch?
[22:04:43] <reem> Sure. I can make a WIP PR if thatâ€™s easier?
[22:04:59] <reem> just right out of the gate I can say this will break hyper and iron
[22:05:03] <aturon> brson: your crater tool is indispensable already!
[22:05:21] <aturon> reem: i think a branch is easiest
[22:06:21] <reem> ok, branch is here https://github.com/reem/rust/tree/leak, will post again when make check is done
[22:06:24] <aturon> reem: hm this looks suspect: https://github.com/rust-lang/rust/compare/master...reem:leak#diff-da456bd3af6d94a9693e625ff7303113R376
[22:06:46] <aturon> that probably needs to be limited to Leak types
[22:06:51] <reem> aturon: you must already have an Rc containing a non-Leak type (and necessarily have called new_leak and used unsafe) to call that method
[22:06:56] <reem> (and have it cause problems)
[22:08:02] <reem> I tried an alternative route where Clone was the Leak-requiring operation rather than new, but that causes much more (and very annoying) fallout since thereâ€™s no way to say â€œthis unsafely implements Cloneâ€
[22:10:39] <aturon> reem: ok, makes sense. looks like you didn't have to use new_leak all that much in any case
[22:11:05] <reem> Ya, the changes are minimal, mostly since there is very light use of trait objects
[22:11:57] <aturon> yeah, the trait object thing is probably my biggest worry about the non-defaulted Leak approach, but it also seems harder to gauge
[22:12:52] <reem> Iâ€™d try to implement the ?Leak approach too, but my compiler-fu is pretty weak.
[22:13:19] <reem> aaaahhhh make check failed compiling rustdoc all the way at the end :/
[22:13:25] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[22:13:26] *** ChanServ sets mode: +o nrc
[22:13:39] <aturon> reem: fortunately fixes to rustdoc shouldn't trigger a full rebuild
[22:13:54] <steveklabnik> who knows the android stuff well? https://www.reddit.com/r/programming/comments/33qd8g/rust_once_run_anywhere/cqnnxz6?context=3
[22:14:04] <acrichto> brson: hm ok, so I think that feature gating target_env may be more pain than it's worth, the fundamental problem being that we need to detect the feature is enabled before the first feature gating happens (otherwise everything is stripped), but we don't know the set of features until after the first stripping happens, so we can't actually gate it :(
[22:14:28] <reem> aturon: Thankfully. It was just more fallout from the Leak lang item compiler changes.
[22:14:34] <brson> acrichto: ok, let's not gate it
[22:14:52] *** Quits: erz_ (erz@moz-n2p94l.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[22:15:03] <nrc> if a value which is Copy is mutably borrowed, we used to be able to still use, now it is forbidden, does anyone know if this is deliberate? It seems like a regression to me.
[22:15:06] <nrc> E.g., http://is.gd/nhHGmb
[22:15:14] <nrc> The comments describe the old behviour
[22:16:38] *** Joins: erz (erz@moz-n2p94l.broadband.corbina.ru)
[22:17:03] <nrc> nmatsakis ^
[22:17:18] <seanmonstar> Is there a profile of what the compiler spends it's time on? 
[22:17:29] <steveklabnik> -Z time-passes
[22:17:56] <seanmonstar> I meant function profile
[22:19:04] <nrc> you can run the compiler under a profiler, there is no built in support
[22:19:36] <seanmonstar> Ya, just wondering if someone already did and had a report
[22:19:55] <seanmonstar> Would be useful for those wanting to help compiler performance
[22:19:56] <nrc> I have done it, but didn't save the results
[22:20:32] <nrc> for a decent size run, its several GB of data, so sharing it is not so easy
[22:20:59] <seanmonstar> Oh
[22:21:44] <seanmonstar> I guess I could more quickly profile it compiling hyper... 
[22:23:08] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[22:25:59] *** Quits: Kroisse (Kroisse@moz-t75tk5.krois.se) (Quit: Good bye :))
[22:28:45] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:30:13] <reem> Is there a way to â€œnarrowâ€ run-pass and compile-fail tests e.g. run only the ones that failed last time?
[22:31:05] <rkruppe> reem: If it's a small list, you can manually list them in TESTNAME=...
[22:31:08] <aturon> reem: from `make tips`: "`TESTNAME=...` - Specify the name of tests to run"
[22:31:32] *** Quits: sprang (sprang@moz-bb96om.6d5c.910g.0470.2001.IP) (Ping timeout: 121 seconds)
[22:31:52] <reem> there are just so many..
[22:32:12] <reem> (not failing, just generally speaking there are a lot of tests)
[22:33:43] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[22:34:03] * reem makes docs change in liballoc and watches 40 minutes disappear :(
[22:35:30] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[22:36:25] <aturon> reem: you can use `touch` to backdate the file, e.g. `touch -t 9001010101 src/liballoc/lib.rs`
[22:36:36] * rkruppe is slowly developing a weird mix of hatred and resignation towards the build system
[22:36:44] <reem> aturon: oh, nice
[22:37:13] <aturon> rkruppe: the plus side is that we have a lot of motivation to try to speed up compilation :)
[22:37:42] <reem> The compile time is the number 1 reason I donâ€™t contribute to the compiler/std more
[22:38:06] <bluss> Found an unstable feature that's possible to do in the beta by mistake: slicing slice::Iter using index syntax
[22:39:39] *** Joins: c0170_ (c0170@moz-4stj9o.cable.virginm.net)
[22:39:46] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[22:39:48] <bluss> maybe it's intentional, but I filed an issue
[22:40:31] <rkruppe> aturon: rustc speed is one thing, but the build system could also be smarter about lots of small things
[22:41:06] <brson> bluss: thanks
[22:41:10] * reem would love to be able to use cargo on the individual libraries
[22:41:10] <aturon> bluss: thanks, mind cc'ing me?
[22:41:25] <aturon> rkruppe: i could believe it; i mostly treat it as a black box
[22:41:45] <bluss> aturon: done
[22:41:48] <rkruppe> I really don't *want* to peek into the madness that is a thousand lines of Make
[22:42:11] <rkruppe> But I _do_ want to improve it, before I get used to it and stop complaining about the lost time
[22:42:17] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:43:39] <aturon> rkruppe: brson is our resident expert on the make system, he may be able to help guide you into its depths
[22:44:11] <simukis> bluss: you can use str.slice, even though Pattern it takes is unstable
[22:44:15] *** Joins: sprang (sprang@moz-26ncq3.4c7e.910g.0470.2001.IP)
[22:44:31] <simukis> by passing something that implements Pattern and is stable, such as str
[22:45:18] <brson> acrichto: do you think we call this os x fork deadlock justabug https://github.com/rust-lang/rust/issues/17136
[22:45:39] <acrichto> brson: wrong link?
[22:45:43] <brson> https://github.com/rust-lang/rust/issues/14232
[22:45:58] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[22:46:09] <acrichto> brson: yeah
[22:46:19] <aturon> P-medium?
[22:46:22] <brson> ok
[22:46:29] <reem> Something to consider: Reflect has literally 0 use in todayâ€™s Rust (not a single type is !Reflect), but we still have it, even with all the disadvantages of adding an OIBIT.
[22:47:56] <aturon> reem: i don't think that's a very good comparison. it doesn't make much sense to add a Reflect bound to a trait object, since the whole point is downcasting, and it must already be in the vtable via things like Any
[22:48:34] <reem> aturon: Sure, it just manifests itself in Any supertrait bounds
[22:48:35] <aturon> reem: moreover, this is partly due to the fact that you can bound by Any instead of Reflect for generics
[22:48:50] <aturon> reem: right, i just mean the trait object downside isn't really there
[22:48:53] <reem> Thatâ€™s just syntax, they mean almost the same thing.
[22:49:03] <aturon> right, so i'm saying there aren't zero uses :)
[22:49:13] <aturon> i mean, i also agree that it's not clear whether Reflect is worthwhile
[22:49:13] <reem> zero uses over just Any
[22:49:34] <aturon> but it's also a vastly more localized thing
[22:49:41] <reem> I dunno, it just occurred to me that we already have this low-use oibit
[22:49:57] <reem> aturon: How so?
[22:50:39] <reem> Imo itâ€™s actually worse, since you have to have the entire trait *inherit* from Any, which is much more restrictive than just adding `+ Reflect` to a single trait object.
[22:51:46] <aturon> reem: it's more localized in that it really only affects code that does downcasting, and there it suffices to use inheritance rather than having to mention an extra Reflect bound in every use of trait objects
[22:52:17] *** Quits: Defaultti (Defaultti@moz-bmdn13.kapsi.fi) (Quit: Quitting.)
[22:53:52] *** Quits: srh (User@moz-80e.38o.254.50.IP) (Quit: Leaving)
[22:56:16] <reem> aturon: Well, the only reason you have to this whole â€œinherit from Anyâ€ dance is because we donâ€™t have X + Any trait objects, which would then probably be considered the correct solution, and be very similar to + Leak or + Send, etc.
[22:56:18] <brson> I wonder if there's still value in the P-backcompat-lang tags
[22:56:20] *** Quits: arielb1 (Ariel@moz-mvvk08.red.bezeqint.net) (Ping timeout: 121 seconds)
[22:56:34] <brson> i'm removing them, but they do usually indicate 'sticky' bugs that we want to fix early
[22:57:17] *** Joins: Defaultti (Defaultti@moz-bmdn13.kapsi.fi)
[22:57:29] <aturon> reem: i think that's part of a wider debate about when inheritance is appropriate. i think for traits for which downcasting is an important aspect, inheriting from Any makes good sense, personally.
[22:57:43] <reem> aturon: imo the reason we have this situation is because our design for Any/downcasting is suboptimal, not because itâ€™s â€œmeant" to work that way
[22:58:05] <reem> For instance, we should not have to backwards incompatibly change the Error trait to enable downstream users to add downcasting
[22:58:10] <aturon> reem: i'm not really following -- this is getting pretty far afield from Reflect
[22:58:12] <reem> Box<Error + Any> would be way better
[22:58:22] <aturon> hm, maybe!
[22:58:26] <aturon> i'm not sure
[22:58:33] *** Quits: sprang (sprang@moz-26ncq3.4c7e.910g.0470.2001.IP) (Ping timeout: 121 seconds)
[22:58:50] <aturon> i feel like a large part of the reason you'd be using the Error trait in a trait object setting is for downcasting
[22:58:58] <aturon> so to me it makes sense to bake that in as a default
[22:59:01] <reem> aturon: Basically the reason that Reflect/Any donâ€™t show up in trait objects is because their design is suboptimal, if they worked like other â€œmarkerâ€ traits like Send and Sync it would be exactly the same as with Leak
[22:59:04] <aturon> but it's certainly debatable
[22:59:33] *** Quits: blank_name (blank_name@moz-sct.ivp.36.50.IP) (Quit: leaving)
[22:59:35] <reem> itâ€™s definitely arguable, but I think that generally speaking having trait X: Y { } and Box<X> instead of trait X { } and Box<X + Y> is worse
[22:59:49] <reem> since itâ€™s just strictly less flexible
[23:00:01] <aturon> flexibility is just one axis of design, though
[23:00:10] <reem> Right, but remember when we removed the Send bound from Error?
[23:00:18] <aturon> we've gone back and forth on that one
[23:00:46] <reem> well hopefully what we decided on now and forevermore is the right decision :P
[23:00:52] <aturon> i personally tend to avoid that kind of blanket generalization, i guess; i think the right choice is often context-specific
[23:01:11] <aturon> a downside of not using inheritance, for example,
[23:01:24] <aturon> is that if an API uses Box<X> and then later you realize you wanted X + Y, you're stuck
[23:01:39] <aturon> so if X very often implies Y, inheritance can be a good choice
[23:01:44] <aturon> yes, it trades away some flexbility,
[23:02:00] <aturon> but it also establishes strong defaults and helps avoid mistakes that require breaking changes to fix
[23:02:18] <aturon> hence my feeling that it's a context-specific thing that varies depending on anticipated usage
[23:03:07] <reem> reasonable
[23:03:27] <brson> nrc: i retriaged all the P-backcompat-libs and a few P-backcompat-lang, but I'm worried about losing track of some of these backcompat-lang things
[23:03:56] <blaenk> ChrisMorgan: have you considered accepting reem's solution? I've since then found myself in the exact situation that would benefit from it :/
[23:04:07] <blaenk> I want to have a sync+send anymap and just a clone anymap etc
[23:04:39] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[23:05:04] <nrc> brson: do you think there will be too many p-high issues to keep track of? Or do you think we still need to distinguish libs from lang?
[23:05:20] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:06:38] <brson> nrc: i think i'm reluctant to just set them to P-high if nobody is actively working on them, but I could just set them P-high, yeah. maybe that's best
[23:07:08] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:07:15] <nrc> We did say we wanted all p-high issues to be assigned to someone, so we could go through them all and assign at next week's triage meeting
[23:07:49] <brson> yeah, sounds good
[23:07:49] <brson> gtg
[23:07:50] *** Joins: marsel (user@moz-rrv.pek.234.188.IP)
[23:07:51] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:07:53] *** Joins: Kroisse (Kroisse@moz-t75tk5.krois.se)
[23:08:42] <nrc> which means that is one specific person's responsibility to lose track of the issue, not a shared responsibility :-p
[23:10:58] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:20:48] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:22:19] *** Quits: jdm (jdm@moz-vmfnmv.ckpj.s0pt.0450.2001.IP) (Quit: )
[23:22:29] <GBGamer> could anyone check this out?
[23:23:01] <GBGamer> In core, we have `impl<T: ?Sized> *const T`
[23:23:13] <GBGamer> However, all of the functions are on T: Sized
[23:23:22] <GBGamer> I have no idea how this makes any sense
[23:24:48] *** Quits: kmcguire (kmcguire@moz-c955nf.res.rr.com) (Ping timeout: 121 seconds)
[23:27:55] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:29:27] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[23:31:50] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[23:34:41] *** Joins: brson (brson@moz-n4g.7vl.56.172.IP)
[23:34:41] *** ChanServ sets mode: +o brson
[23:37:11] <aturon> acrichto: i added a docs issue for the IO audit (cc steveklabnik): https://github.com/rust-lang/rust/issues/24795
[23:38:07] <aturon> steveklabnik: this may be another good place to coordinate a joint effort amongst a bunch of people, maybe via a per-type or per-API checklist
[23:41:02] <acrichto> aturon: lgtm
[23:42:34] <acrichto> aturon: hm so on the sockt timeout RFC, do you think it's worth specifying what happens to the extra precision on windows?
[23:42:42] <blaenk> hey reem
[23:42:42] <acrichto> e.g. if you specify nanos but wwindows can't handle it
[23:42:59] <acrichto> aturon: one thing I'd be worried about is if you specify 5 nanos and it gets rounded down to 0, therefore removing the timeout
[23:43:11] <blaenk> how come for typemap insert, you don't have to specify that the K::Value being passed has the same bounds as the typemap expects
[23:43:35] <blaenk> so like sharemap should specify K::Value: Sync + Send for `insert()` no? how is it possible to not do that?
[23:43:57] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[23:44:26] <frewsxcv> can someone remove the ICE tag https://github.com/rust-lang/rust/issues/22638
[23:44:54] <reem> blaenk: errrr, I think the impl block is incorrect
[23:45:03] <reem> Ya, it definitely is.
[23:45:11] <blaenk> is it? but not for that reason right
[23:45:21] <reem> I have to run to dinner, but will be back and tackle this
[23:45:25] <blaenk> ok
[23:45:29] <aturon> acrichto: oh, this is covered in the Duration RFC
[23:45:37] <aturon> acrichto: but could double up in the timeout RFC
[23:45:47] <acrichto> aturon: hm, but the duration rfc recommends truncation, right?
[23:46:06] <aturon> acrichto: i don't think so in this case, let me check
[23:46:39] <aturon> "the Duration's precision is coarsened to milliseconds"
[23:46:49] <aturon> the truncation refers only to u32 millis
[23:47:12] <acrichto> in this case though it means that 5 nanos is "coarsened" to 0 millis
[23:47:13] <aturon> anyway, certainly worth clarifying in the socket timeout RFC -- can you leave a comment, i'm about to run
[23:47:16] <aturon> why?
[23:47:25] <acrichto> oh maybe I don't know what coarsened eans
[23:47:29] <aturon> coarsening is underspecced :)
[23:47:30] <aturon> wycats: ^^
[23:47:50] <wycats> I specifically allow truncation
[23:47:52] <acrichto> wycats: I'm curious, let's say I specify a timeout of 5ns, on windows where it wants millis, what is that rounded to?
[23:47:53] <wycats> in the Duration RFC
[23:47:55] <acrichto> 1ms or 0ms?
[23:48:00] <acrichto> or is it specced as either?
[23:48:30] <wycats> acrichto: you can't actually specify that
[23:48:37] <wycats> it takes millis as u32
[23:49:00] <acrichto> right but I'm wondering if Duration is guaranteeing that the nanos are lopped off
[23:49:02] <acrichto> or rounded up?
[23:49:11] <kmc> steveklabnik: what happened to the advanced macros chapter? is it just gone?
[23:49:11] <acrichto> e.g. I specify to windows I want a 5ns timeout, but the windows api takes u32 millis
[23:49:37] <wycats> the current RFC says it gets truncated down
[23:49:57] <wycats> the spurious wakeup rationale makes me mostly ok with whatever
[23:50:00] <acrichto> wycats: ok thanks! I will add a comment to the socket timeout rfc then
[23:50:08] <wycats> it's hard for me to imagine this mattering
[23:50:12] <acrichto> the problem with socket timeouts is that 0ms == unset the timeout
[23:50:18] <wycats> you ask for 1ms + 1ns and get woken up in 1ms
[23:50:22] <acrichto> so if I set a timeout of 5ns, I'm actually setting the timeout to an infinite timeout
[23:50:23] <wycats> when is this going to matter
[23:50:35] <wycats> acrichto: the truncation guideline was basically a guideline
[23:50:36] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[23:50:41] <wycats> obviously don't do something crazy like that :P
[23:50:46] <kmc> oh, it just got attached to the regular macros chapter, I see
[23:50:47] <acrichto> yeah just want to clarify here
[23:50:52] <wycats> in this case 0 doesn't mean 0
[23:50:54] <acrichto> and make sure it's not totally out of left field
[23:50:56] <wycats> it actually means Infinity
[23:51:03] <acrichto> I'd be fine rounding < 1ms up to 1ms
[23:51:04] <acrichto> on windows
[23:51:06] <wycats> so truncating 1ns to Infinity isn't quite right
[23:51:07] <acrichto> and otherwise truncating
[23:51:11] <wycats> seems ok
[23:51:16] <wycats> rounding up seems ok too
[23:51:46] <wycats> although there is a problem with u64::MAX + 1ns
[23:51:50] <wycats> what does that get rounded up to?
[23:52:05] <wycats> (that was why I truncated down -- not all cases can be rounded up)
[23:53:43] *** Quits: kard (-@moz-3ptu76.dip0.t-ipconnect.de) (Connection closed)
[23:56:40] *** Joins: pcwalton (pcwalton@moz-vst.p2i.254.50.IP)
[23:56:41] *** ChanServ sets mode: +o pcwalton
[23:56:52] *** Quits: Diamond (dick@moz-s67uin.ok.cox.net) (Connection closed)
