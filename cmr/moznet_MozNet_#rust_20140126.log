[00:00:12] <eddyb> I mean, I don't see any issues with it
[00:00:13] <glaebhoerl> eddyb: nah thankfully at least they match :)
[00:00:24] <eddyb> not contents, ref eq
[00:00:44] <eddyb> &D -> &A might use an embedded A::vtable inside D::vtable
[00:01:00] <eddyb> glaebhoerl: in C++, vtables are mixed with data
[00:01:07] <glaebhoerl> eddyb: well if we're doing the earlier scheme where supertrait vtables are embedded in subtrait vtables, then there will be two physical copies
[00:01:25] <eddyb> let's hope nobody tries to use that for anything
[00:01:29] <glaebhoerl> if subtrait vtables hold pointers to supertrait vtables, then there will be two different paths to the same physical copy
[00:01:52] <eddyb> we added TypeId because we couldn't check for reference equality on tydesc, IIRC
[00:02:06] <eddyb> (because you can have two copies in two different crates)
[00:02:32] <eddyb> glaebhoerl: we don't want that, for performance - at least we wouldn't use those pointers to call methods
[00:02:35] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[00:03:12] <eddyb> glaebhoerl: our disconnection between vtables and data saves us
[00:03:32] <eddyb> it's more flexible and less painful
[00:03:38] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Ping timeout)
[00:03:57] <eddyb> now sleep well and don't let scary C++ bite
[00:04:09] <glaebhoerl> eddyb: what did you mean by "in C++, vtables are mixed with data" precisely? vtable *pointers* are stored in-object, unlike Rust
[00:04:16] <glaebhoerl> but I don't think vtables themselves contain data?
[00:04:25] *** Quits: Ferreus (ferreus@moz-3B955C3A.pools.arcor-ip.net) (Ping timeout)
[00:04:46] <glaebhoerl> anyways, good night, we can continue this tomorrow or whenever :)
[00:05:36] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[00:08:13] *** kimundi is now known as zz_kimundi
[00:08:45] <wycats> https://gist.github.com/wycats/ef3aef8dc27bc217bfe2
[00:08:48] <wycats> lolol
[00:10:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:13:31] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[00:18:21] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[00:19:50] *** Quits: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Computer has gone to sleep.)
[00:20:12] *** Joins: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[00:21:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:21:53] *** Quits: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Ping timeout)
[00:23:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[00:25:47] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[00:27:08] *** Joins: Addle (quassel@93529591.BA907378.971E19F6.IP)
[00:28:13] *** Joins: Ferreus (ferreus@moz-34A1B80C.pools.arcor-ip.net)
[00:28:49] *** Quits: Addle (quassel@93529591.BA907378.971E19F6.IP) (Ping timeout)
[00:29:02] *** Quits: elux (peter@moz-34C3066.dsl.bell.ca) (Quit: Leaving...)
[00:29:22] *** Joins: Addle (quassel@93529591.BA907378.971E19F6.IP)
[00:31:34] <mpiechotka> How to pattern match a borrowed vector?
[00:33:28] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[00:34:52] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:35:14] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[00:36:02] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:36:06] <mpiechotka> Ok. ref keyword.
[00:36:26] *** Joins: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[00:36:55] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[00:37:00] <Armavica> mpiechotka: what do you mean, pattern match its elements or the vector as a whole?
[00:38:00] *** Parts: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) ()
[00:38:05] <mpiechotka> Armavica: I had a t: &[T] which I tried to match t {[t1, t2] => {...} ...}. I needed to change it to ref t1 and ref t2 (I was trying with &t1 and &t2).
[00:38:49] <Armavica> oh, I see
[00:39:44] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[00:40:19] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[00:40:29] <Armavica> is there a fundamental reason why ImmutableVector::last returns an Option while MutableVector::mut_last fails on an empty vector?
[00:42:20] <dbaupp> Armavica: because it hasn't been updated yet
[00:42:32] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[00:42:35] <dbaupp> (the behaviour of last was only recently changed: it used to fail)
[00:43:14] <Armavica> ok
[00:43:28] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[00:45:08] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[00:45:12] *** Quits: geomyidae_ (uid214@moz-E77DEB21.irccloud.com) (Ping timeout)
[00:45:36] *** Joins: geomyidae_ (uid214@moz-E77DEB21.irccloud.com)
[00:45:44] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Ping timeout)
[00:46:05] *** Joins: johanh (uid17185@moz-A42E5B7B.irccloud.com)
[00:46:11] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[00:46:13] <comex> for some reason, when I compile this particular program with rustc -Z debug-info, I get a completely empty file in the dSYM
[00:46:22] <comex> er, not empty, but empty of dwarf info
[00:46:30] <comex> for another program it works fine
[00:48:24] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[00:49:54] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Quit: Leaving.)
[00:50:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:50:22] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[00:50:54] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:51:31] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:52:01] <dbaupp> comex: does `-Z extra-debug-info` change anything?
[00:53:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:54:14] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[00:54:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:55:25] *** Quits: nkoep (nik@moz-433CB284.pool.mediaways.net) (Quit: Leaving)
[00:56:19] *** Quits: eibwen (kvirc@moz-6D9D6D14.dip0.t-ipconnect.de) (Ping timeout)
[00:56:55] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[01:00:17] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[01:00:57] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:01:11] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[01:03:03] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[01:03:21] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:04:06] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:04:14] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[01:06:45] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[01:07:32] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[01:08:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:08:37] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[01:09:58] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[01:10:29] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[01:10:42] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[01:11:00] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[01:12:00] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:12:09] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[01:12:11] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[01:12:14] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[01:14:30] *** Quits: Kjelle (karl@moz-58495553.static.spa.siw.siwnet.net) (Quit: )
[01:16:19] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[01:16:50] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:17:58] *** Quits: gwty (gwtypc@1367F163.6A6162CC.8A00C703.IP) (Ping timeout)
[01:19:50] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[01:20:08] *** Quits: Ferreus (ferreus@moz-34A1B80C.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[01:22:29] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Ping timeout)
[01:23:40] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[01:25:22] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Ping timeout)
[01:25:45] <Armavica> just to be sure, vectors cannot be matched against a pattern a la OCaml `elem::rest`, right?
[01:27:41] <dbaupp> rusti: match ~[1,2,3] { [elem, .. rest] => println!("{}, {:?}", elem, rest), [] => println!("empty") }
[01:27:45] -rusti- 1, &[2, 3]
[01:27:45] -rusti- ()
[01:28:06] <dbaupp> rusti: match { let v: ~[int] = ~[]; v } { [elem, .. rest] => println!("{}, {:?}", elem, rest), [] => println!("empty") }
[01:28:07] -rusti- empty
[01:28:07] -rusti- ()
[01:29:25] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[01:29:44] <Armavica> wow
[01:30:08] <Armavica> I missed that in the docs
[01:30:16] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[01:30:30] <dbaupp> our docs don't cover every nook and cranny (yet)
[01:31:05] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[01:32:49] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[01:33:00] <Armavica> then let me remedy that point ;)
[01:37:35] *** Parts: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) ()
[01:37:56] <brson> Armavica: ooh, please do!
[01:38:12] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[01:38:58] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[01:39:20] <Armavica> I only had in mind the .. thing...
[01:39:25] <Armavica> for now ;)
[01:40:26] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:40:26] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:43:35] *** Quits: matthewbot (user@moz-C6814817.ga.at.cox.net) (Client exited)
[01:43:41] *** Parts: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) ()
[01:46:02] *** Joins: derek_c (derek@moz-E25AC88D.cit.cornell.edu)
[01:46:21] *** Quits: mpiechotka (mpiechotka@moz-737FBFDC.dynamic.mnet-online.de) (Ping timeout)
[01:47:07] <derek_c> As as today, running `rustpkg install github.com/steveklabnik/hello` results in this error: http://upl.io/iwhybf
[01:47:17] <derek_c> *as of*
[01:47:36] <steveklabnik> Bummer :(((
[01:47:44] *** Joins: michael_ (uid24415@moz-E77DEB21.irccloud.com)
[01:47:54] <derek_c> is this a known issue, or am I doing something wrong?
[01:48:27] *** Joins: mpiechotka (mpiechotka@moz-7F5D260D.dynamic.mnet-online.de)
[01:48:52] *** Parts: michael_ (uid24415@moz-E77DEB21.irccloud.com) ()
[01:48:54] *** Joins: michael_ (uid24415@moz-E77DEB21.irccloud.com)
[01:48:57] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[01:49:30] <mpiechotka> Is there a way to have inline LLVM assembly (I saw only the 'normal' one via asm!)?
[01:50:06] *** Parts: michael_ (uid24415@moz-E77DEB21.irccloud.com) ()
[01:51:43] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[01:52:29] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[01:53:02] <newguy> hey
[01:53:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:53:40] <dbaupp> mpiechotka: no
[01:53:50] <mpiechotka> dbaupp: Thanks
[01:53:52] <dbaupp> jensnockert did have something like that working a while ago, but it never made it upstream
[01:54:24] <jensnockert> mpiechotka: I have a patch lying around somewhere, but the general answer is no.
[01:54:41] <dbaupp> derek_c: I think if you use `TMPDIR=<some folder on the same device> rustpkg ...` it works
[01:55:06] <dbaupp> e.g. `TMPDIR=~/tmp rustpkg install github.com/steveklabnik/hello` while in your home dir
[01:55:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:55:41] <newguy> dbaupp: do you know how to use Paths to access files in a subdirectory of my current working directory?
[01:56:14] <jensnockert> mpiechotka: https://github.com/jensnockert/rust/tree/inline-ir if you want to check it out / fix it up into something that could actually be merged.
[01:56:24] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:56:38] <newguy> so basically, if i'm given a ~str with a filepath like /subdir/filename.html, how can i go into that subdirectory and open that file?
[01:56:46] <derek_c> dbaupp: I see. it works.  This doesn't seem to be documented though
[01:57:00] <wycats> what does this mean:
[01:57:03] <wycats> https://www.irccloud.com/pastebin/3B6vfeVO
[01:57:06] <derek_c> is the intended behaviour to install the package to RUST_PATH?
[01:58:06] *** Quits: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net) (Quit: Leaving.)
[01:58:47] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[01:59:32] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[01:59:43] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[02:00:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:00:26] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[02:01:14] <dbaupp> newguy: if you don't have the / prefix it should just work
[02:01:27] <Armavica> if I want to fix an issue, do I mention the issue number in the commit message?
[02:01:28] <dbaupp> i.e. Path::new("subdir/filename.html")
[02:01:37] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[02:01:43] <Armavica> or just in the PR text?
[02:01:47] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:02:01] <dbaupp> Armavica: either/both ("fixes #<number>" will mean that Github closes the issue when the PR lands)
[02:02:08] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:02:26] <dbaupp> newguy: you can also prefix a ., to give `Path::new("./subdir/filename.html")`
[02:02:26] <Armavica> ok
[02:02:43] <dbaupp> derek_c: yes, it's a bug (the TMPDIR thing)
[02:02:49] <newguy> dbaupp: thanks
[02:03:29] <Armavica> so I just send a normal PR with "fixes #<number>" inside and that will do it?
[02:03:49] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[02:04:52] <dbaupp> Armavica: should do it, ye
[02:04:53] <dbaupp> s
[02:06:05] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[02:07:42] <Armavica> I think I'll stick to https://github.com/mozilla/rust/wiki/Note-development-policy which says "put the exact phrase "Closes #NN" (with that capitalization) in the commit message"
[02:08:19] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[02:12:29] <derek_c> how do you pass flag to rustc when you do `rustpkg build`?
[02:13:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:14:44] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:14:44] *** ChanServ sets mode: +ao brson brson
[02:15:03] <dbaupp> derek_c: which flag?
[02:15:21] <derek_c> dbaupp: any flag
[02:15:34] <dbaupp> derek_c: rustpkg help build lists some
[02:15:41] *** Joins: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net)
[02:15:49] <derek_c> dbaupp: yeah, I was wondering if I can pass arbitrary flags
[02:15:59] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:17:20] *** Quits: hays (quassel@moz-51C45E29.washdc.east.verizon.net) (Ping timeout)
[02:17:22] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:18:42] *** Joins: hays (quassel@moz-C6F02E4E.washdc.east.verizon.net)
[02:23:22] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:23:28] <skrylar> yaaay i love random malloc errors
[02:23:37] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[02:23:47] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[02:24:27] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[02:25:20] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[02:26:09] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Ping timeout)
[02:26:11] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[02:26:13] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Client exited)
[02:28:21] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[02:29:12] <newguy> i got disconnected right after i typed my message and im not sure if it went through
[02:29:17] <newguy> so i'll type it again
[02:30:07] <newguy> dbaupp: if i'm given a filename like "file.txt", is it possible, only given that filename, to check if it exists in my current directory or subdirectory of my current directory
[02:30:09] <newguy> ?
[02:30:27] <dbaupp> newguy: there's probably a function in std::io::fs
[02:30:38] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:31:29] <dbaupp> newguy:  one of these: https://github.com/mozilla/rust/blob/master/src/libstd/io/fs.rs#L647
[02:31:34] *** Quits: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au) (Ping timeout)
[02:32:02] <newguy> dbaupp: i'll check it out. thanks
[02:32:02] <dbaupp> oh, they're documented here: http://static.rust-lang.org/doc/master/std/path/posix/struct.Path.html
[02:32:09] <dbaupp> (they're just methods on Path)
[02:32:20] <newguy> gotchya
[02:32:21] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:32:46] *** Joins: kvanb (kvanb@moz-C5594194.lnse7.lon.bigpond.net.au)
[02:33:53] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:36:06] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[02:36:26] <comex> dbaupp: i'm back
[02:36:50] <comex> it's actually that debug info never gets generated, but the program that worked was a static executable and so had debug info from libuv
[02:37:21] <comex> and no, extra-debug-info doesn't change anything
[02:38:02] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:39:00] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[02:39:17] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:39:39] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[02:41:31] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:41:54] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[02:42:00] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:42:22] <wycats> dbaupp: did you follow enough of the previous discussion re: rust_try with eddyb to help me debug something?
[02:42:42] <wycats> I must be doing something insane because I  have things working but exceptions aren't actually being caught by rust_try
[02:42:55] <wycats> and the expanded pretty version of the code looks correct
[02:43:40] <wycats> https://gist.github.com/wycats/08f33695e2814e7e4e69
[02:43:44] <wycats> that's the expanded code
[02:43:50] <dbaupp> wycats: I didn't follow much of it, but I can try to help you still :)
[02:43:59] <wycats> and somehow the code on line 20 is bubbling up and crashing the process
[02:44:06] <wycats> failed at 'index out of bounds: the len is 0 but the index is 0', lib.rs:81
[02:44:53] <wycats> this isn't amazingly factored yet... working on getting all my FFI functions to work first
[02:45:00] <wycats> I have a big library and test suite I can mess with
[02:45:13] *** Quits: derek_c (derek@moz-E25AC88D.cit.cornell.edu) (Ping timeout)
[02:45:28] <dbaupp> oh, so you mean rust_try isn't actually catching the failure?
[02:45:34] <wycats> it doesn't seem like it
[02:45:41] <wycats> see ^^
[02:45:54] <wycats> lib.rs:81 is the code that is expanded into line 20 via the macro
[02:46:01] <wycats> I'm kind of baffled
[02:47:21] <dbaupp> I'm afraid I don't understand how our unwinding works
[02:47:36] <dbaupp> ... iirc vadimcn implemented the current approach using libunwind
[02:48:42] <wycats> dbaupp: let me show you code that appears to work correctly
[02:49:09] <wycats> https://gist.github.com/c1f177f507748bf4edd2
[02:49:10] <brson> wycats: you are doing some really scary stuff
[02:49:18] <brson> maybe there's some other solution
[02:49:28] <wycats> https://www.irccloud.com/pastebin/0W4LRRfJ
[02:49:30] <wycats> ^^ output
[02:49:40] <dbaupp> wycats lives life on the edge
[02:49:47] <brson> although I guess catching ffi callback failures is like the one use case for try in rust
[02:50:00] <wycats> brson: I'm currently using Task::run(), which contains a "dear diary" message that seems very scary :P
[02:50:04] <dbaupp> wycats: weird
[02:50:06] <brson> but that use case should really be accounted for in std and not require open coding all this stuff
[02:50:15] <wycats> brson: yes, I agree
[02:50:24] <wycats> brson: I am prototyping stuff I can submit a PR for
[02:50:27] <wycats> then get feedback
[02:50:32] <wycats> then perhaps it will be in std :)
[02:50:49] <wycats> brson: eddyb was pretty unsympathetic to the use case :P
[02:50:50] <dbaupp> maybe the OOB indexing code path is handled by libunwind differently
[02:51:07] <wycats> easy to test in my simple code
[02:51:10] <dbaupp> wycats: can you replace line 81 with just fail!()?
[02:51:20] <dbaupp> or, just replace that code with a oob index, yeah
[02:52:02] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:52:31] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:52:35] <wycats> https://gist.github.com/5c14f4cd351b269f3033
[02:52:45] <wycats> https://www.irccloud.com/pastebin/Mp80TCH1
[02:52:59] <dbaupp> weird
[02:53:15] <wycats> yeah
[02:53:19] <brson> wycats: how does the non-working code fail?
[02:53:32] <wycats> failed at 'index out of bounds: the len is 0 but the index is 0', lib.rs:81
[02:53:37] <wycats> ^^ non-working code failure
[02:53:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:53:51] <brson> wycats: but what happens when the catch doesn't happen?
[02:54:02] <wycats> hm the rake is failing but let me run it directly
[02:54:14] <wycats> [1]    39001 illegal hardware instruction  ruby -I ./build -rbundler/setup -S rspec spec/hello_spec.rb
[02:54:16] <wycats> segv
[02:54:33] <wycats> makes more sense now
[02:54:39] <wycats> I was misinterpreting the error
[02:54:43] <brson> is there any other output on stderr? i'd expect a runtime abort
[02:54:56] <wycats> https://www.irccloud.com/pastebin/nFUHgfLy
[02:54:57] <brson> wycats: i would guess that this code is not running in task context
[02:55:05] <brson> and unwinding probably just doesn't work without a task
[02:55:16] <wycats> you are correct
[02:55:23] <wycats> ok
[02:55:23] <brson> "illegal hardware instruction" is probably just a intrinsic::abort()
[02:55:30] <wycats> time to port more of Task::run()
[02:55:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:55:35] <brson> there *should* be some output before hand in most failure paths
[02:55:45] <wycats> brson: right, there is
[02:55:47] <brson> yeah, you need some kind of way to enter a task in the ffi call
[02:55:50] <wycats> the above "failed at"
[02:55:56] <wycats> brson: Task::run is what I was doing
[02:56:02] <brson> wycats: sorry, i meant in the rtabort path
[02:56:08] <wycats> ah
[02:56:10] <brson> usually a runtime abort will spew a bunch of info
[02:56:18] *** Joins: mib_5q64d2 (Mibbit@moz-86608D2D.clppva.fios.verizon.net)
[02:56:20] <brson> mostly just cute gibberish though
[02:56:25] <brson> irrelevant stuff
[02:56:30] <brson> but also a reason for the abort
[02:56:50] <wycats> the code in Task::run seems involved
[02:56:56] *** Joins: gwty (gwtypc@5E3E4D76.1B0310B2.CF29F6CE.IP)
[02:56:56] <brson> acrichto has some ideas about how to temporary enter a task  from the ffi but probably not implemented yet
[02:57:17] <wycats> maybe I need an unwinder?
[02:57:52] <brson> what we want is something like `FfiTaskContext` that encapsulates a ~Task and has a method like `enter(self, fn) -> Result(FfiTaskContext, ~Any)` to let you catch a failure 
[02:57:56] <wycats> hm I was just porting task.unwinder.try
[02:58:01] <wycats> but I guess I really NEED the task
[02:58:03] <brson> then you carry around that FfiTaskContext through the FFI calls
[02:58:08] <brson> yeah, you have to have a task
[02:58:16] <wycats> what does it mean to "be in a task context"?
[02:58:28] <brson> it means that there's a ~Task pointer in thread-local-storage
[02:58:29] <wycats> how does a Task::new become "the current task"?
[02:58:31] <wycats> aha
[02:58:39] <wycats> so Task::new -> put into ThLS
[02:58:40] <wycats> ?
[02:58:49] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Ping timeout)
[02:59:07] <wycats> Local::put?
[02:59:49] <brson> wycats: Local::put is used to put the task in TLS, yes. Let me take a look for a sec.
[02:59:58] <wycats> yeah I'm looking in run again
[03:01:21] <brson> wycats: native::task::spawn_sibling is the basic code for creating a native task, so what you need will be vaguelly like that
[03:01:29] <brson> minus the thread spawning and a bunch of other stuff
[03:02:47] <brson> wycats: this is the code for running a task inside a new thread: https://github.com/mozilla/rust/blob/master/src/libnative/task.rs#L94
[03:03:28] <wycats> nah, Task::run is the code I'm trying to duplicate :P
[03:03:39] <brson> i don't know about that
[03:03:47] <brson> which Task::run are you looking at?
[03:03:52] <olsonjeffery> saturday night #rust, hoo-boy!
[03:04:04] <wycats> brson: gimme a couple
[03:04:07] <wycats> I'm hunting a path
[03:04:10] <brson> ok
[03:04:46] *** Quits: mib_5q64d2 (Mibbit@moz-86608D2D.clppva.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:05:09] <wycats> progress is occuring
[03:05:13] <wycats> gotta destroy the task
[03:06:27] <wycats> bingo
[03:07:28] <wycats> what is "the box annihilator"?
[03:08:07] <olsonjeffery> can you parametize a variant on an enum w/o parameterizing the enum itself?
[03:08:11] <olsonjeffery> im guessing "no"
[03:08:17] <brson> olsonjeffery: no
[03:08:30] <brson> wycats: it destroys @. you don't need to run it unless you use @
[03:08:35] <wycats> ok seems good
[03:08:50] <wycats> I'm looking at the code here: https://github.com/mozilla/rust/blob/master/src/libstd/rt/task.rs#L123-L174
[03:08:55] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[03:08:56] <wycats> trying to figure out how much of it I need to run
[03:09:18] <olsonjeffery> that WorkQueue that pcwalton linked too is pretty nice
[03:09:30] <olsonjeffery> i want in libextra now!
[03:09:34] <olsonjeffery> to*
[03:09:43] *** Quits: japaric (japaric@17483874.6B340C30.BFC118EE.IP) (Ping timeout)
[03:09:45] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[03:09:51] <wycats> it seems crazy that stuff is getting drop()ed repeatedly?!
[03:10:21] <rdn> so is "extern mod extra" broken for now?
[03:10:25] <brson> wycats: you need to close_outputs if you use I/O. you don't need to run the LocalStorage cleanup if you don't execute code that uses std::local_data, directly or indirectly
[03:10:30] <brson> rdn: it shouldn't be
[03:10:44] <wycats> it seems strange that this stuff isn't broken out into a separate method
[03:10:48] <wycats> task.close() or something
[03:11:07] <brson> wycats: it could be. nobody has needed it yet
[03:11:16] <wycats> until now!
[03:12:45] <wycats> is it important to close the task, as opposed to using it repeatedly on each FFI entry?
[03:12:51] <wycats> aka, what is the reason to destroy the task?
[03:13:18] <rdn> brson, possibly only with rustpkg? "Package rsfml depends on extra, but I don't know how to find it", not sure if local installation failure
[03:13:25] <rdn> rustc worked fine
[03:15:56] <brson> wycats: for FFI purposes I would not run any of the cleanup code unless the task fails, then continue to reuse the task
[03:16:08] <brson> only destroy the task once it is invalidated by failure
[03:16:13] <olsonjeffery> brson: so you were asking about the second blog post i did.. it's going to run on monday.. could you actually review it really quick for any feedback? cmr was the only person who reviewed it, before: https://gist.github.com/olsonjeffery/8627846
[03:16:22] <olsonjeffery> (really, if anyone would review it and provide feedback that'd be great)
[03:17:48] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[03:18:19] <brson> olsonjeffery: yes
[03:19:28] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[03:19:44] *** Joins: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com)
[03:19:46] <brson> rdn: i don't know much about how rustpkg works, and it is likely going to get an overhaul or rewrite soon. if you can just avoid it, then that's what I would recommend, sadly. otherwise you may just have to simply try to debug rustpkg by figuring out what is generating that error
[03:20:18] *** Joins: Chillectual (RJones@moz-E6F82C3A.maine.res.rr.com)
[03:20:35] <olsonjeffery> i had just gotten a handle on rustpkg when i learned it was getting a rewrite.
[03:20:54] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[03:21:31] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:22:00] *** Quits: Chillectual (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[03:22:34] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[03:23:22] *** Quits: gwty (gwtypc@5E3E4D76.1B0310B2.CF29F6CE.IP) (Ping timeout)
[03:24:31] <wycats> brson: continued progress
[03:25:09] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[03:26:51] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Ping timeout)
[03:28:36] *** Joins: dmac (Adium@moz-215DD6A5.hsd1.ca.comcast.net)
[03:31:19] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:32:02] *** Quits: canhtak (canhtak@moz-94ED4C91.wl.t.ulaval.ca) (Quit: canhtak)
[03:32:42] <wycats> brson: local storage optmap.take() is giving me:
[03:32:43] <wycats> fatal runtime error:  assertion failed: !ptr.is_null()
[03:32:52] *** Joins: Chillectual (RJones@moz-E6F82C3A.maine.res.rr.com)
[03:32:59] <wycats> I guess I never created one?
[03:33:01] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:33:12] *** Chillectual is now known as LinearInterpol
[03:33:20] *** Quits: zz_kimundi (kimundi@moz-B18493E2.dip0.t-ipconnect.de) (Ping timeout)
[03:33:39] <jdsanders> Is there a reason that filter's predicate is |&A| while filter_map's function is just |A|?
[03:34:05] <wycats> https://github.com/mozilla/rust/blob/master/src/libstd/rt/task.rs#L48
[03:35:08] <wycats> it seems strange that it just take()s
[03:35:58] <brson> wycats: probably, yes
[03:36:25] <brson> wycats: oh LocalStorage is initialized lazily, you don't need to create one
[03:36:35] <wycats> brson: in which case this code may fail
[03:36:41] <wycats> if your code happens to not need local storage
[03:36:52] *** Joins: zz_kimundi (kimundi@moz-6155981A.dip0.t-ipconnect.de)
[03:36:56] <brson> if your code happens *to need* local storage?
[03:37:15] <brson> not sure what code we're talking about now
[03:37:19] *** zz_kimundi is now known as kimundi
[03:37:39] <wycats> it's in the try block
[03:37:46] <wycats> https://github.com/mozilla/rust/blob/master/src/libstd/rt/task.rs#L161
[03:40:30] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[03:41:02] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:44:18] <brson> olsonjeffery: https://gist.github.com/brson/8627898. My comments are after XXX
[03:45:51] <brson> wycats: it does seem like the dtor is expecting local storage to always be initialized, even though (I think!) it's initialized lazily. that's unfortunate. I wonder what's always creating tls
[03:46:01] <brson> think i'll file a bug about that
[03:46:06] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[03:46:11] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[03:47:25] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[03:47:25] <olsonjeffery> brson: this is pretty valuable feedback, thanks. quite a bit to chew on, there.
[03:47:26] <newguy> does anyone know how to use change_dir()
[03:47:27] <newguy> ?
[03:47:35] * brson bbl dinner
[03:47:37] <brson> olsonjeffery: np
[03:47:50] <brson> wycats: https://github.com/mozilla/rust/issues/11812
[03:49:16] *** Quits: dmac (Adium@moz-215DD6A5.hsd1.ca.comcast.net) (Quit: Leaving.)
[03:49:55] *** Joins: s_justin (s_justin@moz-C86DE820.asm.bellsouth.net)
[03:50:20] <wycats> is there a way to import names into a macro body's scope?
[03:50:38] <wycats> obviously the names are normally looked up where they are expanded
[03:51:13] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[03:51:33] <WebeWizard> newguy, first create a new path from a string, then give that path to change_dir
[03:51:43] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:51:44] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[03:51:52] <WebeWizard> well... i guess you don't have to create a new one from a string...
[03:52:36] <newguy> webewizard: right, but i can't seem to use call the function correctly. cant I just do: println!("{}", os::change_dir(path))?
[03:52:55] <newguy> which will either print true or false
[03:52:57] *** Joins: bt3ze_ (ben@moz-3F0303DA.hsd1.va.comcast.net)
[03:53:01] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[03:53:04] <newguy> but it doesnt compile
[03:53:05] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Connection reset by peer)
[03:53:22] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[03:53:30] <WebeWizard> what is the compile error?
[03:53:55] <newguy>  mismatched types: expected `&std::path::posix::Path` but found `&str` (expected &-ptr but found &str)
[03:54:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:54:22] <WebeWizard> are you giving change_dir a string instead of a path object?
[03:54:37] <newguy> yes
[03:54:44] <WebeWizard> well. that's wrong
[03:54:53] <WebeWizard> first create a new path object from the string
[03:55:08] <newguy> ok, how can i do that?
[03:55:13] <newguy> btw thanks for helping me
[03:55:21] *** Quits: KindOne (KindOne@moz-72E17204.dynamic.ip.windstream.net) (Ping timeout)
[03:55:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:55:54] <skrylar> hooray for tmux
[03:56:11] <skrylar> xorg decided it wanted to suicide for the crime of being asked to show a png file, yet tmux kept the shell oO
[03:56:24] *** Joins: sanxiyn (tinuviel@5DAC0FAD.5592B676.8A051A1C.IP)
[03:56:27] <WebeWizard> newguy, let path = Path::new( "/home/me/workspace/directory/ ");
[03:56:48] <newguy> thanks, ill try it out!
[03:57:11] <lennart> what is the modern syntax for trait objects?
[03:57:25] <sanxiyn> (some sigil) Trait
[03:57:29] <lennart> are we still using @TraitName to designate the type?
[03:57:36] <skrylar> ~SomeTrait
[03:57:37] <lennart> oh it can be any sigil?
[03:57:42] <skrylar> or &SomeTrait
[03:57:43] <sanxiyn> Any
[03:57:46] *** Quits: bt3ze_ (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[03:57:57] <lennart> thanks
[03:58:06] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[03:58:15] <sanxiyn> lennart: http://cosmic.mearie.org/2014/01/periodic-table-of-rust-types/ is a good summary
[03:58:23] <sanxiyn> Look for "Trait" row
[03:58:59] <comex> i literally don't understand how you work on rustc when compiling librustc in debug mode with an optimized compiler takes over 1 minute.
[03:59:19] *** Joins: KindOne (KindOne@moz-7F66E0B5.dynamic.ip.windstream.net)
[03:59:35] <sanxiyn> comex: Answer (for me): do not compile in debug mode, do not compile in optimized mode :(
[03:59:42] <comex> otoh, even with --enable-local-rust on, it seems to be compiling a stage1 rustc with a stage0 rustc, which is not optimized
[03:59:49] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[04:00:02] <comex> that has taken multiple minutes so far
[04:00:02] <sanxiyn> comex: stage0 rustc is optimized, as I understand
[04:00:26] *** Joins: gwty (gwtypc@5E3E4D76.1B0310B2.CF29F6CE.IP)
[04:00:31] <sanxiyn> If you disable optimization, you can get rustc with your change within 10~20 seconds
[04:01:25] <comex> maybe i shouldn't have passed --disable-optimize-llvm --disable-optimize-cxx then
[04:01:31] <comex> but why does it need stage0 at all? i already have rustc :p
[04:01:45] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:02:03] <sanxiyn> comex: The reason is so that everybody works on same environment
[04:02:22] <sanxiyn> comex: If you introduce some syntax not accepted by stage0 rustc (because your rustc has it), it will break for others
[04:02:39] <sanxiyn> comex: Definitely don't disable optimization on LLVM no no no
[04:02:51] <dbaupp> sanxiyn: 10-20 seconds?!
[04:02:51] <sanxiyn> You usually don't debug LLVM
[04:03:03] <dbaupp> it takes me that long to just compile libsyntax without opts
[04:03:14] <comex> well, i wanted to debug LLVM because of aforementioned missing debug info issue
[04:03:15] <sanxiyn> When you do, my modus operandi is to emit LLVM bitcode from rustc, have *separate* debug LLVM build, and debug bitcode on that LLVM
[04:03:22] <comex> well, mentioned way up
[04:03:32] <sanxiyn> dbaupp: If you modify librustc, you don't compile libsyntax :)
[04:03:42] <sanxiyn> comex: Ah...
[04:03:51] <dbaupp> sanxiyn: yes, I just mean that librustc is much larger than libsyntax
[04:04:00] <dbaupp> and takes much longer to compile
[04:04:02] <sanxiyn> comex: I recommend have separate LLVM debug build and always use LLVM release build with rustc
[04:04:04] <wycats> brson, dbaupp: https://gist.github.com/8628259
[04:04:08] <wycats> all tests pass
[04:04:21] <sanxiyn> (I don't know what others do)
[04:04:49] <sanxiyn> Since you can serialize input to LLVM stage, you can do it separately
[04:04:57] <wycats> https://gist.github.com/wycats/8628259
[04:05:00] <dbaupp> wycats: fancy!
[04:05:01] <wycats> updated to add close_task()
[04:05:14] <wycats> need to further update to leave the task in place if nothing fails
[04:05:18] <dbaupp> wycats: so it's basically the Local::put line that fixed it?
[04:05:30] <sanxiyn> afk
[04:05:36] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:05:42] <wycats> c
[04:08:19] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[04:09:04] <newguy> so im trying to use os::change_dir, but im getting a compiler error even though im passing a path object
[04:09:29] <newguy> the error is: mismatched types: expected `&std::path::posix::Path` but found `std::path::posix::Path` (expected &-ptr but found struct std::path::posix::Path)
[04:10:00] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[04:10:13] <o11c> newguy: & it
[04:10:30] <newguy> workeD!
[04:10:34] <newguy> :D sorry noob mistake
[04:10:44] <wycats> dbaupp: I also had to deal with tearing down.
[04:11:06] <wycats> Should probably write some tests using ruby threads
[04:11:07] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[04:11:09] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[04:11:26] <wycats> dbaupp: any progress on the .h dumper supporting non-simple types
[04:11:37] <wycats> IMHO you should just typedef void *
[04:11:59] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[04:12:48] <wycats> Anything nontrivial is not FFI safe but typedefs give you some c compiler help
[04:13:15] <comex> is the .h dumper rust-bindgen?
[04:13:40] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[04:14:04] <wycats> Also, does it work post macro expansion?
[04:15:45] <phil> jeaye: good lord these ncurses keywords... please tell me you didnt translate all of these by hand?
[04:15:58] <phil> sorry not keywords
[04:16:00] <phil> key constants
[04:16:16] <jeaye> vim macros from the C headers, mostly
[04:16:21] <phil> ahh
[04:16:26] <jeaye> As with most of the function bodies.
[04:16:45] <phil> very nice
[04:16:58] <jeaye> Still, it wasn't very fun.
[04:17:01] <jeaye> haha
[04:17:50] <tikue> anyone know if there's been working on a rust caching library?
[04:18:41] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:18:44] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:18:45] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[04:19:38] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:19:55] <phil> yeah i bet
[04:20:05] <phil> why in the hell did the ncurses devs use octal...
[04:20:13] <jeaye> phil: https://github.com/jeaye/ncurses-rs/commits/master?page=2
[04:20:19] <jeaye> I did it alphabetically. heh
[04:20:36] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[04:21:13] <phil> nice
[04:21:36] <phil> oh so
[04:21:49] <phil> i didnt see the WINDOW_impl struct defined anywhere
[04:22:15] <jeaye> It's not.
[04:22:24] <dbaupp> wycats: yes, it is post macro expansion
[04:22:29] <jeaye> It's just a type, phil.
[04:22:35] <dbaupp> wycats: and no, not work on non-simple types
[04:22:59] <phil> oh
[04:23:16] <jeaye> phil: The interface only works in terms of WINDOW and SCREEN which are *WINDOW_impl and *SCREEN_impl, respectively.
[04:23:25] <jeaye> We don't need to know their definitions.
[04:23:48] <phil> oh right
[04:23:57] <phil> because they just get returned from other functions
[04:24:06] <phil> right?
[04:24:33] <jeaye> Because they're opaque pointers. They function simply as handles, so they are never dereferenced by us.
[04:24:40] <phil> ok
[04:24:50] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[04:24:53] *** Quits: s_justin (s_justin@moz-C86DE820.asm.bellsouth.net) (Quit: s_justin)
[04:25:02] <phil> that makes sense
[04:25:15] <jeaye> Saves work, too. :)
[04:25:19] <wycats> dbaupp: seems like the typedef solution would be simple?
[04:25:20] <phil> yeah
[04:25:41] <dbaupp> wycats: doesn't work :P
[04:25:51] <dbaupp> wycats: structs etc. are unboxed
[04:25:56] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[04:26:01] <dbaupp> and so are not pointer sized
[04:26:17] <dbaupp> using that for ~Struct etc. would be ok, I guess.
[04:26:19] <ercxx> How do you modify 'a' in struct x {a: Option<int>} without unwrapping? Does it even make sense?
[04:27:05] <comex> let x{a: Some(ref i)} = ...?
[04:27:11] * comex doesn't actually know if that works
[04:27:15] <comex> ref mut, even
[04:27:38] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Ping timeout)
[04:27:58] <sanxiyn> comex: I don't think you can use refutable pattern in let...
[04:28:06] <sanxiyn> (refutable, since a may be None)
[04:28:11] <wycats> dbaupp: seems insane to return anything other than a raw pointer at this stage in Rust's development
[04:28:25] <comex> match, then
[04:28:26] <wycats> It works for ~ and &
[04:28:31] <ercxx> comex: i meant am I supposed to do `some_x_obj.a = some_x_obj.a.unwrap() + 1`?
[04:28:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:28:55] <wycats> Also should make slice and vec explicit types
[04:29:11] <wycats> Although I keep meaning to pass those across as FFI-friendly structs
[04:29:21] <comex> ercxx: depends what you're trying to do.  you could try .mutate()
[04:29:42] <dbaupp> wycats: probably, but our structs are C compatible so it's not *that* insane :P
[04:29:57] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[04:30:39] *** Joins: derek_c (derek@moz-CE6E60A5.cit.cornell.edu)
[04:30:48] <sanxiyn> ercxx: Yes, basically
[04:31:02] <sanxiyn> (That'd be a method of struct x though)
[04:31:04] *** Quits: mpiechotka (mpiechotka@moz-7F5D260D.dynamic.mnet-online.de) (Ping timeout)
[04:31:21] <LinearInterpol> Are there any good examples of functional reactive programming in Rust?
[04:31:41] <sanxiyn> I don't think so
[04:31:54] <sanxiyn> LinearInterpol: Eh... are there any good example of functional reactive programming at all?
[04:32:00] <LinearInterpol> bahaha.
[04:32:10] <LinearInterpol> You have a point, good sir.
[04:32:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:32:23] <sanxiyn> (Elm, maybe)
[04:33:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:35:17] *** Joins: mib_7npuyk (Mibbit@moz-FE781974.bootp.virginia.edu)
[04:35:31] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[04:35:37] *** Quits: Earnestly (earnest@D966D76B.1ED7F176.BFD1ABFD.IP) (Ping timeout)
[04:35:55] <mib_7npuyk> hi, told to migrate here for a question
[04:36:17] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:37:11] *** Parts: mib_7npuyk (Mibbit@moz-FE781974.bootp.virginia.edu) ()
[04:38:26] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[04:38:45] <WebeWizard> ask away. someone here can probably answer it ( if it's Rust related )
[04:39:36] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[04:40:21] <comex> so, using the stage1 compiler with just --disable-optimize but with llvm optimization on, compiling librustc still takes 6 minutes
[04:40:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:41:00] <sanxiyn> comex: :(
[04:41:08] <sanxiyn> comex: I must have thought of something else. :(
[04:42:05] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:42:09] <comex> and now it's compiling librustc for stage2.
[04:42:17] <sanxiyn> I guess compared to compiler projects in C or C++, the difference is that every change is like change to header files in those projects, instead of source files...
[04:43:20] <comex> well, it would massively help if compilation were parallelized
[04:43:30] <comex> which would come relatively neatly out of making it incremental
[04:44:01] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[04:44:16] <uberj> what does the syntax '*mut T' mean here https://github.com/mozilla/rust/blob/master/src/libextra/dlist.rs#L41 ?
[04:44:25] <sanxiyn> mutable unsafe pointer
[04:44:39] <newguy> for some reason change_dir is not changing directories :(
[04:44:43] <newguy> it's returning false
[04:44:46] <newguy> any ideas why?
[04:44:49] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[04:44:50] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[04:45:00] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[04:45:21] <uberj> sanxiyn: so just like C?
[04:45:23] <wycats> dbaupp: for simple structs yeah
[04:45:35] <sanxiyn> uberj: yes?
[04:45:37] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[04:45:48] <wycats> I want a to_ffi() trait I can use to keep str and vec stable
[04:46:01] <wycats> Hm maybe that's a good across the board trait
[04:46:12] <wycats> To guarantee a degree of stability 
[04:46:21] <uberj> sanxiyn: wait, how could you tell it was unsafe?
[04:46:30] <sanxiyn> I thought str and vec representation are intended to be stable (in the future)
[04:46:31] <uberj> does '*' denote unsafe?
[04:46:37] <sanxiyn> uberj: yes
[04:46:40] <uberj> ah, okay
[04:47:21] <sanxiyn> newguy: Maybe typo in path, or path is not accessible, etc.
[04:47:25] <wycats> I should just start packaging all this in rust-ffi-helpers
[04:49:44] <uberj> sanxiyn: err, how did you know this? did I miss something in the docs?
[04:50:39] <wycats> str and vec are def changing
[04:51:39] <sanxiyn> wycats: I know, but I don't think the plan is not to guarantee representation forever (unlike enum)
[04:51:45] <sanxiyn> changing, but will be fixed in some future
[04:52:25] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[04:53:06] <sanxiyn> uberj: Indeed...
[04:53:08] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[04:53:15] <sanxiyn> People, I can't find documentation on unsafe pointer anywhere. Can someone?
[04:53:31] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[04:53:34] <dbaupp> wycats: you can return ~~[T] etc. to get a stable value size & representation
[04:54:20] <wycats> dbaupp I just plan to make something that has a char* and len
[04:54:20] *** Quits: jarekps (jarekps@moz-B132C0C2.net.pbthawe.eu) (Ping timeout)
[04:54:23] <wycats> And pack it in
[04:54:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:55:12] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[04:56:07] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[04:56:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:57:08] <cmr> sanxiyn: http://static.rust-lang.org/doc/master/rust.html#unsafety, http://static.rust-lang.org/doc/master/rust.html#pointer-types, 
[04:57:10] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[04:57:17] <cmr> sanxiyn: the later more relevant than the first, presumably.
[04:57:53] <sanxiyn> cmr: Only in the reference manual :(
[04:58:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[04:58:51] <cmr> they're so simple, it seems nobody bothered to actually document them besides the manual.
[04:59:14] <sanxiyn> Yeah, but then at least FFI guide probably should have something
[04:59:18] <sanxiyn> I will try to write something up
[04:59:40] *** Quits: mhoye (mhoye@moz-C14EAE67.vs.heavycomputing.ca) (Ping timeout)
[04:59:47] <uberj> if anything, they are the type of pointers most people are familiar with
[04:59:59] <wilson> Has this tutorial been incorporated into something in 0.9/master? http://static.rust-lang.org/doc/0.8/tutorial-borrowed-ptr.html
[05:00:16] <cmr> wilson: renamed.
[05:00:23] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[05:00:33] <cmr> wilson: http://static.rust-lang.org/doc/master/guide-lifetimes.html
[05:00:38] <cmr> wilson: see http://static.rust-lang.org/doc/master/index.html
[05:00:43] <sanxiyn> uberj: Well, yes, but Rust discourages its use
[05:00:53] <sanxiyn> uberj: So I think it's ok if tutorial doesn't mention unsafe pointer at all
[05:01:28] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[05:01:28] <wycats> Is there a way to combine procedural and rule macros (a la with-syntax?)
[05:01:30] <wilson> aha guide-lifetimes.html is what I was looking for, thank you
[05:01:49] <sanxiyn> wycats: What is with-syntax?
[05:02:02] <sanxiyn> You can call procedural macros in rule macros
[05:02:13] <uberj> sanxiyn: what I'm finding is that implementing any interesting data structure requires using unsafe pointers. I think they are worth mentioning
[05:02:17] <wycats> You want the opposite
[05:02:23] <sanxiyn> uberj: It definitely isn't?
[05:02:30] <wycats> Basically clean things up first, then go into rule mode
[05:02:37] <sanxiyn> Many interesting data structures in standard library is not using unsafe pointers
[05:03:04] <wycats> http://docs.racket-lang.org/guide/with-syntax.html
[05:03:10] <uberj> sanxiyn: I find doubly linked lists interesting
[05:03:32] <sanxiyn> uberj: Yes, but you said "any interesting data structure", not "some specific data structure"
[05:03:34] <sanxiyn> So I corrected
[05:03:40] <uberj> fair enough
[05:04:50] <cmr> they can be implemented 100% safely with Rc and Weak, but admittedly those have some unsafe code in their implementation.
[05:04:53] <cmr> but that's the idea.
[05:05:09] <cmr> you write a tiny bit of unsafe code that the other 95% of your code can use safely.
[05:06:09] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[05:06:11] <wycats> as long as you're careful about the interface you expose
[05:06:44] <comex> so there is no way to get type information in macros, right? too early? :)
[05:06:52] <cmr> comex: correct.
[05:06:55] <comex> too bad
[05:07:04] <wycats> it would be impossible :P
[05:07:18] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[05:07:21] <comex> for some definition of impossible :P
[05:07:22] <wycats> is there a way to import variables for use in a bunch of macros definitions?
[05:07:34] <sanxiyn> wycats: ?
[05:07:48] <wycats> obviously names are looked up in the expanded scope
[05:07:49] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[05:07:52] <wycats> not the scope of definition
[05:08:53] <wycats> is there an "optional" in Rust macro rules?
[05:08:56] <wycats> $(xxx)?
[05:08:58] <wycats> ^ no worky
[05:09:02] <wycats> but something like that?
[05:09:24] <sanxiyn> I *think* for A B(optional) you just list both A and A B case
[05:09:51] <wycats> sanxiyn: I'm getting a severe combinatorial explosion here
[05:09:59] <sanxiyn> :(
[05:10:03] <wycats> because of the bug involving (...)+
[05:10:06] <wycats> *
[05:10:40] <wycats> I now have these dimensions: 0 params or N params, return value or void return, and now type params or no type params
[05:10:41] <wycats> 8 rules?
[05:10:43] <wycats> seems O_O
[05:12:01] *** Quits: Kxepal (Miranda@moz-D046FA40.pppoe.mtu-net.ru) (Ping timeout)
[05:12:17] <sanxiyn> wycats: I guess that's why you wanted use procedural macros to clean up before rule macros?
[05:12:25] <wycats> confirm
[05:12:35] <wycats> but in general it's a useful technique
[05:12:37] <wycats> sweet.js does
[05:12:38] <wycats> it*
[05:12:55] <sanxiyn> I find the topic interesting, but I guess I am out of my depth there :(
[05:15:12] *** Joins: Kxepal (Miranda@moz-4FC2B5D7.pppoe.mtu-net.ru)
[05:16:46] <jdsanders> Is there something like a `step` iterator that I'm missing? I'm thinking along the lines of `[1, 2, 3, 4, 5, 6].iter().step(2)` -> 2, 4 6
[05:17:34] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:17:55] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:19:35] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:19:56] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:21:29] <wycats> https://www.irccloud.com/pastebin/LnbUz3w4
[05:21:30] <wycats> O_O
[05:22:26] <sanxiyn> Huh, what is "indent"?
[05:23:18] <wycats> unknown!
[05:23:21] <wycats> what is going on here
[05:23:32] <wycats> this is a macro used inside a macro
[05:23:40] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[05:23:40] <ChrisMorgan> wycats: full code?
[05:24:13] <wycats> https://gist.github.com/wycats/6a91c3f473f35a551d2c#file-macros-rs-L90
[05:24:21] <wycats> https://gist.github.com/wycats/6a91c3f473f35a551d2c#file-macros-rs-L26-L30
[05:25:46] <ChrisMorgan> wycats: in ffi_args you have ty where you meant $ty
[05:26:03] <ChrisMorgan> (Line 28.)
[05:27:16] <wilson> dumb question, shouldn't that be $param:ident ?
[05:27:28] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:27:30] <wycats> didn't fix anything
[05:27:31] <ChrisMorgan> Oh, that too.
[05:27:39] <wycats> zomg indeed
[05:27:42] <wycats> such idiocy
[05:27:52] * ChrisMorgan stopped looking as soon as he saw the first issue with it
[05:28:27] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[05:28:28] <sanxiyn> ChrisMorgan is a compiler with bad QoI :)
[05:28:47] <sanxiyn> (Quality compiler is supposed to report all errors it can :)
[05:29:11] <wycats> is 'a a ty?
[05:29:18] <ChrisMorgan> No, it's a lifetime.
[05:29:36] <wycats> lt?
[05:29:42] <wycats> what's the macro name
[05:29:49] *** Joins: zippity (Mibbit@moz-57F5F60C.hsd1.va.comcast.net)
[05:29:50] <ChrisMorgan> Probably not exposed other than tt which won't work for most places.
[05:29:53] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[05:29:59] <wycats> and is there a type that includes both ty and lifetime?
[05:30:06] <wycats> to represent the contents of <>?
[05:30:13] <cmr> I don't believe there is.
[05:30:51] <sanxiyn> wycats: This is #10413...
[05:30:56] <wycats> sweet
[05:30:57] <wycats> :(
[05:31:10] <sanxiyn> Go add your "me too!" :)
[05:31:24] <ChrisMorgan> wycats: there are various things that you simply can't do with structural macros.
[05:31:37] <ChrisMorgan> wycats: but really, do you *need* it?
[05:31:47] <wycats> these things all seem unphilosophical
[05:31:51] <wycats> and just implementation gaps
[05:32:00] <cmr> they are.
[05:32:04] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:32:06] <wycats> ChrisMorgan: it seems totally reasonable to want to have macros that take function-like structures
[05:32:10] <ChrisMorgan> Yes, mostly.
[05:32:54] <sanxiyn> yeah just gaps in implementation
[05:33:12] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[05:33:26] <wycats> seems good
[05:33:32] <pzol> When comparing string let x = ~"abc"; let y = &"abc";  what's better and why if x.as_slice() == y OR if x == y.to_owned()
[05:33:43] <wycats> is there any solution for abstracting short names used multiple times in macro definitions?
[05:33:47] <ChrisMorgan> wycats: bear in mind that you can now write procedural macros.
[05:34:03] <wycats> ChrisMorgan: yeah, but apparently you can't call into structural macros from procedural macros
[05:34:13] <wycats> so it's quite the dive into the deep end
[05:34:22] <ChrisMorgan> Yep, it would be.
[05:34:31] <sanxiyn> wycats: ident?
[05:34:36] <cmr> pzol: personally I find the first better, but others may disagree.
[05:34:41] <wycats> ident?
[05:35:03] <pzol> cmr any performance differences?
[05:35:04] <sanxiyn> There are five macro fragment specifiers: ident, expr, ty, pat, block
[05:35:12] <cmr> pzol: shouldn't be, compare the IR.
[05:35:18] <pzol> cmr ok, thx
[05:35:55] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:36:37] <wilson> more than that apparently, e.g. stmt https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/tt/macro_parser.rs#L409
[05:36:40] <sfackler> there's also tt
[05:36:41] <wilson> just starting to play with the macros myself
[05:37:04] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[05:37:33] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:37:52] <sanxiyn> Time to update http://static.rust-lang.org/doc/master/guide-macros.html :(
[05:39:00] <zippity> hi- I'm having an issue with inserting a variable into a string in the format! function. So far I have "let response: ~str = format!("___html code___ {} ", count);
[05:39:25] <sanxiyn> zippity: And?
[05:39:49] <zippity> How do I escape the brackets in a string format command?
[05:40:07] <zippity> (I think the problem is that it's mixing up html + rust)
[05:40:07] <ChrisMorgan> With a backslash. e.g. "\\{"
[05:41:12] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:42:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:43:53] <zippity> ChrisMorgan: Thank you!! :)
[05:44:43] <comex> !llvm.dbg.cu = !{!0}
[05:44:46] <comex> er
[05:44:50] <comex> % /usr/src/rust/native/x86_64-apple-darwin/llvm/Release/bin/llvm-dis -o - ugg.bc| grep dbg.cu
[05:44:54] <comex> % llvm-dis-mp-3.4 -o - ugg.bc | grep dbg.cu                                                  
[05:44:56] <comex> !llvm.dbg.cu = !{!0}
[05:44:59] *** Quits: zippity (Mibbit@moz-57F5F60C.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:45:00] <comex> now i'm just bewildered.
[05:45:03] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[05:46:02] <sanxiyn> comex: That's expected?
[05:46:07] <sanxiyn> What is !0?
[05:46:12] <sanxiyn> !0 = metadata !{ ...
[05:46:13] <comex> why is it expected that two versions of llvm-dis output different things? :)
[05:46:35] <comex> from my dumb debugging, it looks like it's not outputting any debug info because llvm.dbg.cu is missing.  which it is, with the corresponding llvm-dis
[05:46:57] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[05:47:04] <sanxiyn> comex: What two versions of llvm-dis?
[05:47:05] <cmr> comex: llvm bitcode isn't stable, is it?
[05:47:13] <cmr> comex: we aren't using stock llvm....
[05:47:21] <sanxiyn> cmr: Not only bitcode, but also text IR syntax is not stable
[05:47:24] <comex> you're not?
[05:47:28] <comex> anyway, the other one is some random version
[05:47:29] <sanxiyn> comex: We aren't
[05:47:35] <cmr> that's what I thought.
[05:47:47] <cmr> comex: we have a fork, and it's synced with upstream only every so often.
[05:47:59] <comex> ok, but that doesn't explain where the debug info is going :)
[05:48:04] <sanxiyn> Also it does not correspond to any release
[05:48:06] <comex> the bc file was generated with rust linking to that version of llvm
[05:48:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:48:43] <cmr> it is quite mysterious
[05:48:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:48:55] <sanxiyn> cmr: What is?
[05:49:31] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[05:49:33] <cmr> sanxiyn: the deubinfo disappearing
[05:50:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:50:34] <wycats> hm let me try asking again: is there a good strategy for writing a library for use in expanded macros?
[05:50:49] <wycats> obvious telling people who want to use the macro to also import a bunch of names into the same scope is not ideal
[05:51:04] *** Joins: schnozzle (Mibbit@moz-2630A790.cpe.net.cable.rogers.com)
[05:51:43] <schnozzle> Can anyone tell me how to handle the case when an open file does not exist?
[05:51:50] <pzol> Why does the first comparison  fail and the second compiles fine?? let hobbit_name = ~"Bilbo Baggins"; if hobbit_name == "Bilbo Baggins" {}; if "Bilbo Baggins" == hobbit_name {}
[05:51:59] <cmr> schnozzle: no such thing, if it's open, it exists.
[05:52:01] <sanxiyn> wycats: Can't you put "use" inside macros?
[05:52:20] <cmr> pzol: because of auto-borrow and how == works.
[05:52:23] <wycats> sanxiyn: yes, but then you need to do it in every single scope
[05:52:25] <cmr> it's a.eq(&b)
[05:52:37] <cmr> a will be auto-borrowed to whatever it needs to be.
[05:52:44] <cmr> but b won't be.
[05:52:45] <schnozzle> I mean if I pass a non-existent path obj to File::open
[05:52:47] <sanxiyn> wycats: Is that a problem? (users don't need to do anything, right?)
[05:52:50] <cmr> or maybe it's the ohter way aruond.
[05:53:00] <wycats> so if I have 5 clauses and each needs the same 5 use statements
[05:53:05] <wycats> I should repeat them 5 times?
[05:53:08] <pzol> cmr :) would be great if that would work both ways 
[05:53:08] <wycats> seems annoying
[05:53:12] <wycats> I guess I can make a macro :P
[05:53:20] <sanxiyn> Hm
[05:53:32] <cmr> pzol: no... I think that even more magic would be awful :)
[05:54:08] <schnozzle> I had this runtime error: task '<unnamed>' failed at 'Unhandled condition: io_error: io::IoError{kind: FileNotFound, desc: "no such file or directory", detail: None}'
[05:54:19] <pzol> cmr depends :) 
[05:54:21] <sanxiyn> wycats: I am not sure how it could be otherwise ("use"-ing names inside macros)
[05:54:51] <schnozzle> I tried to match the result of File:: open with None but I still get this error
[05:55:11] <pzol> cmr: https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-07-30 :D
[05:56:44] <wycats> sanxiyn: use_in_macro foo::bar::baz
[05:57:08] <comex> *right*.
[05:57:11] <wycats> would expand those names first
[05:57:20] <comex> module flag 'Debug Info Version' is not getting set
[05:57:25] <comex> clang sets it, rust does not
[05:57:31] <comex> apparently it did not used to be required
[05:57:38] <sanxiyn> wycats: Eh...?
[05:57:41] <wycats> :P
[05:57:45] <wycats> it's possibel
[05:57:48] <sanxiyn> wycats: Name resolution happens after macro expansion
[05:58:06] <wycats> you would expand, then apply the macro-local names
[05:58:08] <schnozzle> hi, how to handle the case for FileNotFound?
[05:58:48] <sanxiyn> wycats: Can't really visualize how this would work... Some writeup would be good
[05:58:52] <cmr> schnozzle: http://static.rust-lang.org/doc/master/guide-conditions.html
[05:58:53] <wycats> k
[06:00:19] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[06:00:24] <bjustin> if I have a match with a Some(~thing), how do I get &thing?
[06:01:18] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[06:01:19] <comex> Some(ref thing)
[06:01:35] <comex> question: can *anyone* get rustc to output dwarf info on master?
[06:01:37] <ChrisMorgan> Some(~ref thing)
[06:01:46] <comex> i don't see how this would be an OS X problem
[06:01:50] <cmr> comex: we have tests that depend on it.
[06:01:56] <cmr> ... but they don't run on OS X
[06:02:00] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[06:02:04] <comex> i don't know why it would have anytihng to do with OS X though
[06:02:28] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[06:03:14] *** Quits: yuriks (yuriks@EB1C9F80.D509E3A.8E0C6B01.IP) (Quit: leaving)
[06:04:03] *** Quits: sanxiyn (tinuviel@5DAC0FAD.5592B676.8A051A1C.IP) (Ping timeout)
[06:04:21] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[06:04:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[06:05:08] <comex> cmr: are the buildbot builds uploaded anywhere accessible, so i don't have to go rebuild rustc again? :)
[06:05:20] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[06:05:20] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Connection reset by peer)
[06:05:21] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[06:05:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[06:05:56] *** Joins: alonlevy_ (alon@9B741B3A.31F49B3D.AB64B967.IP)
[06:06:01] <cmr> comex: can confirm, debuginfo present on linux.
[06:06:02] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[06:06:03] <cmr> and no
[06:07:06] <bjustin> thanks, Some(~ref thing) is what I needed
[06:07:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[06:07:43] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[06:07:58] *** Joins: jakerr (bluehex@moz-1095CD08.kanagawa.ocn.ne.jp)
[06:08:32] <skrylar> alright; finished binding freetype2
[06:08:38] <skrylar> or at least enough of it for most of the uses of it
[06:09:25] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[06:09:28] *** Quits: schnozzle (Mibbit@moz-2630A790.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:10:07] <wycats> is there a literal way to make a None of a specific type?
[06:10:16] <wycats> or do you need let foo: Option<T> = None
[06:10:18] <dbaupp> None::<foo>
[06:10:23] <wycats> aha
[06:15:25] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[06:16:52] <wycats> https://gist.github.com/wycats/366fc789969f57504631
[06:16:55] <wycats> ffi_fn!
[06:16:55] <wycats> ahhh yeah
[06:17:00] <wycats> there are some minor annoyances
[06:17:12] <wycats> but overall it works pretty seamlessly
[06:17:45] <wycats> the return type is always a T when the return of the ffi_fn! has to return a ~T
[06:18:10] <wycats> because I need to convert that return into a *mut T, and I can't go ~T -> *mut T in a rules-based macro
[06:18:16] <wycats> but that's honestly a rather minor concern
[06:18:20] <wycats> overall this looks awesome
[06:18:41] *** Joins: yuriks (yuriks@EB1C9F80.D509E3A.8E0C6B01.IP)
[06:21:11] <wycats> mmm the Local::exists() check works
[06:21:12] <wycats> fuck yeah
[06:21:39] <wycats> hm I guess one minor issue is that tasks won't ever get deallocated if they get pinned to Ruby threads
[06:21:49] <wycats> maybe it doesn't matter?
[06:21:53] <wycats> they're not huge objects
[06:23:38] *** Quits: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[06:24:43] <comex> oh, I guess "UpgradeDebugInfo" only gets called when reading bitcode, making the whole thing kind of a red herring.  but i think that if you compile with -emit-llvm and then llc, you won't get debug info anywhere
[06:35:42] *** Joins: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP)
[06:36:48] <derek_c> how do you rebuild rustpkg only?
[06:37:07] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[06:37:23] <comex> the *real* culprit...
[06:37:41] <comex> is that OS X dwarfdump claims .debug_info is "empty", and dsymutil ignores it, when it contains DWARF > 2
[06:37:52] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:38:16] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:38:16] *** Quits: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net) (Quit: Leaving.)
[06:38:19] *** Quits: alonlevy_ (alon@9B741B3A.31F49B3D.AB64B967.IP) (Ping timeout)
[06:38:42] <comex> so i checked that the final binary actually lacked debug info and that dwarfdump printed nothing for object files, but i neglected to check whether the object files actually lacked debug info
[06:38:57] *** Joins: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net)
[06:40:25] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[06:40:36] *** Quits: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com) (Quit: Leaving)
[06:41:05] <dbaupp> derek_c: if you only modify rustpkg then `make` will only rebuild rustpkg
[06:41:09] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:41:13] <dbaupp> *modified
[06:41:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:42:12] *** Quits: derek_c (derek@moz-CE6E60A5.cit.cornell.edu) (Ping timeout)
[06:42:27] * comex sigh
[06:43:34] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:44:08] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[06:44:28] *** Joins: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com)
[06:45:11] <dbaupp> comex: btw, https://github.com/mozilla/rust/issues/11352 is probably the bug you're investigating
[06:45:26] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:46:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:47:34] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[06:50:28] *** Joins: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net)
[06:51:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: Leaving...)
[06:53:42] *** Quits: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net) (Quit: Leaving.)
[06:57:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:58:32] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[06:59:28] *** Joins: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP)
[06:59:28] *** Quits: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP) (Client exited)
[06:59:55] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[07:00:13] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[07:02:06] <phil> are we not supposed to use macros yet?
[07:03:49] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[07:07:31] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:07:51] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:07:59] <mcpherrin> phil: eh? macros are pretty well supported
[07:08:16] <phil> well
[07:08:23] <phil> im getting the compiler error when i define my own
[07:08:30] <phil> ive got the feature crate at the top though
[07:08:31] <mcpherrin> I think macro_rules! is behind a feature gate because the syntax for defining a macro might change
[07:08:55] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[07:09:00] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[07:09:41] *** Joins: alonlevy_ (alon@moz-87959726.redhat.com)
[07:09:55] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Input/output error)
[07:10:07] <phil> okay i just did the feature gate wrong
[07:10:09] <phil> so smrt
[07:10:16] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[07:10:29] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[07:10:37] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[07:11:57] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Ping timeout)
[07:12:11] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[07:13:46] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[07:13:54] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:14:58] <Yurume> is there ptr_eq equivalent for std::rc::Rc?
[07:15:35] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:16:10] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:16:15] *** Joins: amir (amir@moz-49060BB9.cust.bluewin.ch)
[07:16:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[07:17:34] <cmr> Yurume: std::borrowed::ref_eq on the .borrow of both of them is a workaround
[07:17:56] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:18:01] <Yurume> hmm, that would work indeed.
[07:18:23] <cmr> that moduled should probably be renamed to std::reference..
[07:18:33] <cmr> std::borrow, sorry.
[07:18:55] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:21:07] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[07:21:34] *** Quits: decode__ (agoforth@moz-37AB61B4.pool.mediaways.net) (Ping timeout)
[07:21:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:24:04] *** Quits: alonlevy_ (alon@moz-87959726.redhat.com) (Ping timeout)
[07:24:38] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[07:25:51] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[07:26:29] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[07:31:42] *** Joins: jdm (jdm@moz-BDD802ED.hfc.comcastbusiness.net)
[07:31:42] *** ChanServ sets mode: +o jdm
[07:32:25] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:33:28] *** Joins: Ms2ger (Ms2ger@moz-EF1E89E8.adsl-dyn.isp.belgacom.be)
[07:34:23] *** Joins: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP)
[07:34:35] *** Quits: yuriks (yuriks@EB1C9F80.D509E3A.8E0C6B01.IP) (Quit: hell, I'll do this now)
[07:36:01] *** Joins: decode__ (agoforth@2EE66022.BCA3F47F.8108A302.IP)
[07:36:16] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:36:17] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:41:46] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[07:42:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:42:53] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[07:44:08] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[07:44:18] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:45:55] *** Parts: jakerr (bluehex@moz-1095CD08.kanagawa.ocn.ne.jp) (Textual IRC Client: www.textualapp.com)
[07:47:06] *** Joins: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp)
[07:47:41] *** Quits: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp) (Quit: Textual IRC Client: www.textualapp.com)
[07:49:33] *** Joins: alonlevy_ (alon@moz-87959726.redhat.com)
[07:49:53] *** Joins: jarekps (jarekps@moz-B132C0C2.net.pbthawe.eu)
[07:52:30] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[07:52:43] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[07:53:50] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[07:54:24] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[07:55:31] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[07:55:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:00:27] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[08:00:27] *** ChanServ sets mode: +ao pcwalton pcwalton
[08:00:30] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[08:00:47] *** Quits: jarekps (jarekps@moz-B132C0C2.net.pbthawe.eu) (Ping timeout)
[08:02:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:04:08] <brson> looking for comments on https://github.com/mozilla/rust/issues/11815
[08:08:46] <Ms2ger> What's wrong with xxx?
[08:09:16] <wycats> seems like the correct solution is to disallow XXX ;)
[08:09:39] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[08:09:56] <wycats> I have one doubt: http://joshua.themarshians.com/go-io.html?utm_source=hootsuite&utm_campaign=hootsuite -- "There has been sufficient hate recently about the missing generics but, to be honest, I haven’t missed them one bit. One of the reasons I haven’t missed them is the use of interfaces in go... This means that your code can be generic in the sense
[08:09:56] <wycats> that the source of the data is irrelevant"
[08:09:59] <wycats> what is going on here
[08:11:18] <eevee> generic in the sense that interface{}
[08:11:20] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[08:12:33] <wycats> when people say "generic" what they mean is things like whether you can make a container that doesn't care about the types of its contents, but still getting typed objects out
[08:13:05] <Ms2ger> That would be pretty rad
[08:13:14] <Ms2ger> But C can't do it, so it's probably impossible
[08:13:28] <wycats> Ms2ger: I'm just somewhat baffled by his use of the term "generic" here
[08:13:37] <wycats> Ms2ger: nice deadpan :P
[08:14:06] <Ms2ger> :)
[08:14:26] <wycats> s/io.Reader/std::Reader/ done
[08:15:12] <wycats> I'm glad he likes the Go interface feature but "we don't need any generics because interfaces let you write generic code" is very O_O
[08:15:33] <eddyb> wycats: it's like removing generics from Rust because we have trait objects
[08:15:35] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[08:15:41] <wycats> eddyb: precisely
[08:15:42] <sp3d> wycats: afaict in the author means "generic types which can be specified at call-sites" by "generics", and "loosely coupled via the use of an interface instead of a specific concrete type" by "generic"
[08:15:45] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[08:15:45] *** ChanServ sets mode: +ao brson brson
[08:15:49] <sp3d> -in
[08:16:38] <wycats> fn is_empty<C: Container>(container: C) { c.is_empty() } <= this you can do with Go interfaces
[08:16:56] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[08:17:54] *** Joins: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net)
[08:18:04] <eddyb> wycats: you mean with container: @Container
[08:18:04] <wycats> fn add<T, S: Set<T>>(set: S, item: T) { set.insert(item) }
[08:18:26] <wycats> this you cannot do with interfaces
[08:18:42] <wycats> eddyb: what is @?
[08:18:42] *** Quits: gwty (gwtypc@5E3E4D76.1B0310B2.CF29F6CE.IP) (Ping timeout)
[08:18:45] <wycats> is that something to do with Rust?
[08:18:48] <wycats> :trollface:
[08:18:52] <eddyb> wycats: oh you don't want to - dammit
[08:19:16] <wycats> eddyb: were you the one helping me with try before you went to bed?
[08:19:25] <wycats> if so, you might be interested in my final solution
[08:19:30] <wycats> oh my god I just said "final solution"
[08:19:34] <wycats> seems very bad bro
[08:19:34] <eddyb> no, I'm a different eddyb
[08:19:35] *** Quits: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net) (Ping timeout)
[08:19:49] <eddyb> that was my evil twin
[08:19:59] <wycats> eddyb: keep in mind, I have been working in the bowels of Rust unsafe code all day
[08:20:04] <wycats> I could have been hallucinating
[08:20:26] <wycats> https://gist.github.com/wycats/366fc789969f57504631#file-such-macros-rs
[08:20:35] <wycats> look at ffi_run!
[08:20:47] *** Joins: mib_cas6an (Mibbit@moz-FE781974.bootp.virginia.edu)
[08:20:53] <wycats> and https://gist.github.com/wycats/366fc789969f57504631#file-such-macros-rs-L90-L99
[08:21:10] *** Quits: luzie (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[08:21:50] <wycats> eddyb: are your tears flowing freely?
[08:22:12] <eddyb> oh, you managed to do it with named fields?
[08:22:48] <eddyb> wycats: good job :P
[08:23:10] <wycats> eddyb: ;)
[08:23:17] <wycats> eddyb: the only sad bits here are:
[08:23:23] <wycats> the return type is something like Trace
[08:23:30] <wycats> but the actual block returns ~Trace
[08:23:39] <wycats> because I have to take the output and prepend *mut
[08:23:39] <mib_cas6an> Anybody free for help with a file reading problem?
[08:23:55] <wycats> another sad bit is
[08:24:00] <wycats> I have to just assume <'a>
[08:24:13] <wycats> and params have to say &'a if they're borrowed
[08:24:18] <wycats> because they get tacked onto the Args struct
[08:24:22] <wycats> which requires explicit lifetimes
[08:24:30] <wycats> none of the lifetimes actually end up mattering in practice
[08:24:51] <wycats> (since the caller is C code, so the "lifetime" of these variables is "until I return to C")
[08:25:20] <wycats> so you end up with ffi_fn!(some_func(foo: &'a str) -> Trace { ~Trace::new() })
[08:25:29] <wycats> which has some weird asymmetries with real Rust code
[08:25:44] <wycats> ^^ that's all the asymmetries in one place
[08:25:55] <wycats> most of the ffi functions aren't quite that strange
[08:27:13] *** Joins: luziie (lucy@moz-CD18B14B.customer.cdi.no)
[08:27:38] <wycats> eddyb: does any of that bring any ideas to mind? any solutions, something I missed?
[08:27:48] <wycats> it's also impossible to represent type parameters in macros
[08:27:57] <wycats> <'a, 'b, T, Q<R>>
[08:28:05] <wycats> ^^ cannot be represented at all
[08:28:23] <eddyb> wycats: you can... uhm
[08:28:41] <eddyb> wycats: match &$ty and replace with &'a $ty
[08:28:41] *** Quits: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net) (Quit: holomorph)
[08:29:01] <wycats> yeah that'll work for that problem
[08:29:03] <wycats> lemme try it
[08:29:11] *** Quits: Ms2ger (Ms2ger@moz-EF1E89E8.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[08:29:11] <wycats> hm no
[08:29:14] <wycats> because
[08:29:34] <wycats> it's really: (&|~)?$ty:ty
[08:29:44] <wycats> and you can't have optional things in macros
[08:29:54] <eddyb> wycats: use *
[08:29:55] <wycats> plus dealing with mut :P
[08:30:00] <wycats> * allows many things
[08:30:14] <eddyb> wycats: it doesn't break anything ;)
[08:30:25] <wycats> so I would have to do &* ~* mut*
[08:30:31] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:30:34] <wycats> and hope that nobody types ~ mut T
[08:30:41] <wycats> ~~T
[08:30:42] <wycats> etc.
[08:30:46] <eddyb> wycats: you mean &(mut)*
[08:31:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:31:11] <wycats> I think the macro system really needs types for syntactic constructs, not tokens
[08:31:19] <wycats> it does this with pat
[08:31:25] <wycats> but there is no "type parameter"
[08:31:33] <wycats> which includes 'a and Q<R>
[08:31:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:31:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:31:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:32:08] <wycats> there is no "type prefix" (~ or & or &'a or & mut or &'a mut or * or *mut)
[08:32:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:32:39] <eddyb> wycats: if you work with procedural macros, you get the nice enums and whatnot
[08:33:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:33:25] <JustAPerson> so after compiling latest rustc git HEAD, I ran `make check` and several tests failed. What should I do now? Related log I believe https://gist.github.com/JustAPerson/0c88a0dc0b7b49749c3c
[08:33:29] <wycats> eddyb: (1) how would you recommend I learn procedural macros (step by step)
[08:33:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:33:48] <wycats> (2) it REALLY is important for procedural macros to be able to set things up and then step into a rule-based macro
[08:34:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:34:17] <eddyb> wycats: oh, yeah, we're missing quasi-quoting macro rules
[08:34:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:34:21] <wycats> https://gist.github.com/jlongster/7923415#file-input-js-L47
[08:34:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:34:34] <wycats> this is a macro generating macros generating macros
[08:34:38] <wycats> using with Syntax :P
[08:34:40] *** Quits: jdm (jdm@moz-BDD802ED.hfc.comcastbusiness.net) (Ping timeout)
[08:34:46] <wycats> https://gist.github.com/jlongster/7923415#file-input-js-L90-L103
[08:34:57] <wycats> generates: https://gist.github.com/jlongster/7923415#file-output-js-L14-L23
[08:35:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:35:28] <eddyb> macros? in JS? bleah
[08:35:35] <wycats> no it's amazing!
[08:35:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:35:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:35:44] <wycats> sweet.js uses a very clever trick
[08:35:53] <eddyb> wycats: Rust macros *are* sweet.js
[08:35:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:35:55] <wycats> it basically uses a quasi-tokenizer for rules
[08:36:08] <eddyb> though maybe it's differently implemented now
[08:36:19] <wycats> eddyb: in sweetjs, you can say < $foo... >
[08:36:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:36:23] <wycats> which is literally just
[08:36:27] <eddyb> I mean, they probably diverged since they were copied in Rust
[08:36:31] <wycats> anything in between the delimiters
[08:36:42] <wycats> $id $params $body
[08:36:49] <kimundi> JustAPerson: Hm, I assume you did ./configure as well?
[08:36:50] <wycats> matches foo(bar, baz, bat) { zomg }
[08:36:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:36:55] <tikue> does `make install` update .vim stuff?
[08:36:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:37:02] <tikue> stupid question :|
[08:37:11] <kimundi> tikue: afaik no
[08:37:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:37:13] <wycats> basically a single $foo matches a "token", which can include any delimiter grouped set of tokens
[08:37:18] <tikue> kimundi: thanks :)
[08:37:22] <kimundi> tikue: have to do that manually
[08:37:32] <eddyb> wycats: have you seen ES6 quasi/template strings?
[08:37:39] <wycats> eddyb: I can see the similarities, but to be blunt, sweet.js is SO MUCH BETTER now
[08:37:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:37:42] <kimundi> wycats: that's the tt macro variable type :P
[08:37:52] <kimundi> $foo:tt
[08:38:03] <wycats> specifically case macros being able to drop into rule macros
[08:38:04] <eddyb> s/macro variable/non-terminal (I think)
[08:38:06] <wycats> is very important
[08:38:08] <kimundi> can only be consumed by macros in turn though
[08:38:17] <eddyb> wycats: we do have quasi-quoting for expressions
[08:38:19] <wycats> kimundi: $foo:tt matches <'a, 'b, C<D>> ?
[08:38:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:38:26] *** Quits: GeorgeH_ (George@moz-FB5F2302.hsd1.nj.comcast.net) (Ping timeout)
[08:38:33] <Yurume> afaik yes. 
[08:38:34] <wycats> eddyb: look at how withSyntax is used in the above example
[08:38:36] <kimundi> wycats: It matches everything, so yes
[08:38:54] <kimundi> (It probably won'T help you though)
[08:38:57] *** Joins: GeorgeH_ (George@moz-FB5F2302.hsd1.nj.comcast.net)
[08:38:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:38:59] <JustAPerson> kimundi: no, I wasn't sure if that was required. I'll try that
[08:39:04] <wycats> also, sweet.js allows "0-or-more" lists, and Rust basically fails constantly on it
[08:39:10] <Yurume> kimundi, I think wycats' question is whether it matches to one token tree delimited by <> or not
[08:39:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:39:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:39:39] <kimundi> Well, that would be a no then
[08:39:46] <Yurume> hmm, I'm not sure about <> though, for [], () or {} it would work
[08:39:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:40:03] <wycats> https://gist.github.com/wycats/495a46eb720be77278da
[08:40:04] <dbaupp> wycats: the failure of 0-or-more is just a bug for Rust
[08:40:14] <wycats> yes, I know
[08:40:16] <dbaupp> (admittedly that doesn't help you right now.)
[08:40:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:40:22] <wycats> everything is limitations of the current rust
[08:40:38] <wycats> I've just accidentally been working for real things with both Sweet.js and Rust macros
[08:40:38] <dbaupp> future rust will be perfect in every way :P
[08:40:47] <wycats> so I am able to really compare them
[08:40:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:40:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:40:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:41:23] * wycats this macro was the one that sold me on mixed procedural and rule-based macros: https://gist.github.com/wycats/4dda1947baf8f05a5d2a
[08:41:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:41:34] <eddyb> wycats: parsing of macro_rules! contents is actually done with macro rules
[08:42:18] <eddyb> wycats: but they're not written as macro rules, but as the parse result of macro rules
[08:42:35] <eddyb> once we fix that, procedural macros will be much easier to use
[08:43:12] <wycats> https://gist.github.com/wycats/4dda1947baf8f05a5d2a#file-output-js <= output
[08:43:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:43:22] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:43:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:43:38] <wycats> letstx $anystr = [makeValue(unwrapSyntax(#{$any}), #{here})];
[08:43:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:44:03] <wycats> that chunk converts this.foo into this.get('foo')
[08:44:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:44:33] <wycats> https://www.irccloud.com/pastebin/5kuyCyjT
[08:44:48] <wycats> I need procedural code to convert the ID into a string
[08:44:51] <wycats> but once I've done that
[08:44:56] *** Quits: mib_cas6an (Mibbit@moz-FE781974.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[08:44:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:45:02] <wycats> I use regular rule-based macros
[08:45:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:45:07] *** Quits: alonlevy_ (alon@moz-87959726.redhat.com) (Ping timeout)
[08:45:07] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:45:21] <wycats> and yes, his API for procedural macros could be better
[08:45:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:46:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:46:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:46:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:46:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:47:00] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[08:47:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:47:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:47:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:48:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:48:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:48:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:48:40] <dbaupp> woah, the implementation of super() is neat
[08:48:44] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[08:48:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:49:07] <wycats> dbaupp: yes, when I #CrackedTheNut I felt like I was in that scene from the Matrix "there is no spoon"
[08:49:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:49:27] <eddyb> I still like traceur-compiler
[08:49:50] <dbaupp> wycats: does `case` include the macro name and rule not include it?
[08:49:52] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:49:53] <wycats> eddyb: I do not 
[08:49:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:50:01] <wycats> dbaupp: right
[08:50:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:50:10] <dbaupp> cool
[08:50:10] <wycats> dbaupp: case lets you replace the entire thing
[08:50:39] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:50:44] *** Quits: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net) (Quit: )
[08:51:01] <wycats> well
[08:51:06] <wycats> it lets you get the syntax element
[08:51:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:51:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:51:18] <eddyb> wycats: I tried to use sweet.js once for something
[08:51:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:51:27] <wycats> which you see I use with the hygienic functions
[08:51:50] <eddyb> turns out ES6 quasy strings work better
[08:51:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:52:02] <wycats> eddyb: those two things do not seem like the same thing P
[08:52:03] <wycats> :P
[08:52:16] <eddyb> wycats: let me show you my usecase
[08:52:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:52:28] <wycats> eddyb: probably for your use-case
[08:52:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:52:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:52:47] <wycats> eddyb: like, I would not parse HTML using sweet.js :P
[08:53:00] <wycats> dbaupp: that super implementation is what I want Rust macros to be able to do :P
[08:53:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:53:23] <wycats> sweet.js made a smart decision to not try to parse ahead of time
[08:53:30] <wycats> and just go with delimited groups of tokens
[08:53:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:54:02] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[08:54:21] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[08:54:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:54:39] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[08:55:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:55:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:55:10] <brson> now soliciting comments on https://github.com/mozilla/rust/pull/11796
[08:55:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:55:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:56:09] <eddyb> wycats: a bit orthogonal and maybe too crazy https://github.com/eddyb/wiREd/blob/master/disasm/x86.js#L428
[08:56:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:56:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:56:22] <dbaupp> brson: I like `
[08:56:27] *** Joins: alonlevy_ (alon@moz-87959726.redhat.com)
[08:56:28] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[08:56:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:56:48] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[08:57:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:57:50] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[08:58:06] *** Joins: marcel_r (chatzilla@37CAED5E.29CC82CF.C33E194F.IP)
[08:58:10] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[08:58:27] *** Quits: lennart (lennart@moz-DE70D6F.stanford.edu) (Ping timeout)
[08:58:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:59:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:59:02] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[08:59:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:59:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:59:51] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Ping timeout)
[09:00:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:00:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:00:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:01:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:01:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:01:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:01:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:01:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:02:08] *** Quits: decode__ (agoforth@2EE66022.BCA3F47F.8108A302.IP) (Ping timeout)
[09:02:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:02:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:02:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:02:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:03:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:03:34] *** Quits: alonlevy_ (alon@moz-87959726.redhat.com) (Ping timeout)
[09:03:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:03:49] *** Joins: agoforth (agoforth@moz-7C3460C.pool.mediaways.net)
[09:04:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:04:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:04:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:04:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:05:12] *** flaper87|afk is now known as flaper87
[09:05:20] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[09:05:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:06:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:06:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:07:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:08:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:08:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:08:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:08:49] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[09:08:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:08:53] <eddyb> wycats, acrichto: I wonder if we should have some sort of "Isolate" feature in the std that allows someone to synchronously "spawn" a task and run some code inside it, without creating a new thread. kinda like a sandbox of sorts
[09:09:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:09:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:09:25] <eddyb> and it would have to be as cheap as possible
[09:09:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:09:31] <acrichto> eddyb: as in a closure?
[09:10:00] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:10:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:10:24] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[09:10:31] <eddyb> acrichto: kinda like task::try, but always on the same thread, so it can be a stack once closure
[09:10:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:10:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:10:44] *** Quits: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP) (Quit: victorporof)
[09:10:45] <acrichto> sounds like a catchable exception?
[09:10:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:10:48] <marcel_r> brson: there are about ten snippets on the tutorial lacking backticks in code-in-comments
[09:11:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:11:39] <eddyb> acrichto: wycats has been reimplementing Task::run sepparately just so he can do this isolation thing
[09:12:05] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[09:12:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:12:21] <acrichto> eddyb: yes, but I have in mind a better abstraction which is much more appropriate
[09:12:26] <eddyb> acrichto: not just a catchable exception, but a different task entirely. use case is FFI from C to Rust
[09:12:42] <eddyb> acrichto: oh, do share :D
[09:12:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:12:46] <acrichto> eddyb: yeah that's the problem I'm trying to solve
[09:13:18] <acrichto> fn run(t: ~Task, ||) -> Result<~Task, ~Any>
[09:13:28] <acrichto> it would only work for native tasks
[09:13:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:13:43] <acrichto> but you would enter into the context of a task, and if you failed it would retur the ~Any
[09:13:54] <eddyb> rt::Task::run looks like a hack that maybe shouldn't be exposed
[09:14:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:14:03] <acrichto> indeed
[09:14:05] <eddyb> acrichto: why only native?
[09:14:14] <acrichto> FFI isn't dealing with green tasks
[09:14:25] <acrichto> you can't "exit and re-enter" a green task
[09:14:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:14:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:14:34] <eddyb> ah, okay
[09:14:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:15:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:15:20] <eddyb> acrichto: for some reason I'd name this "Isolate" rather than "Task"
[09:15:27] <skade> hm, did rustpkg forget that libextra is part of rust? I am getting "Package ... depends on extra, but I don't know how to find it"
[09:15:30] <dbaupp> acrichto, eddyb: I think we have an issue for this
[09:15:30] <dbaupp> sec
[09:15:34] <eddyb> though it hurts thinking about it
[09:15:41] <eddyb> dbaupp: oh, that would be helpful
[09:15:46] <wycats> eddyb: I think the code I wrote mostly does what you're saying
[09:15:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:15:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:15:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:16:13] *** Joins: rca (rcatolino@moz-585FE07D.adsl.proxad.net)
[09:16:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:16:38] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[09:17:06] <dbaupp> meh, can't find it :(
[09:17:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:17:34] <dbaupp> but basically execute a function on the current thread but with a (conceptually) different heap, right?
[09:17:55] <eddyb> acrichto: so here's the workaround for not having stack once closures https://gist.github.com/wycats/366fc789969f57504631#file-such-macros-rs-L28-L61
[09:17:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:18:14] <acrichto> eddyb: I think that's overstating the problem a bit...
[09:18:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:18:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:18:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:18:51] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[09:18:53] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: io2)
[09:18:57] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[09:19:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:19:28] <eddyb> dbaupp: the local heap is one of the things that are task-local
[09:20:11] *** Joins: squiddy (squiddy@moz-954C3009.adsl.alicedsl.de)
[09:20:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:21:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:21:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:21:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:22:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:22:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:22:26] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:22:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:23:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:23:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:23:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:23:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:24:10] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[09:24:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:24:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:24:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:25:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:25:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:26:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:26:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:26:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:27:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:27:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:27:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:27:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:28:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:29:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:30:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:30:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:30:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:31:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:31:41] *** Joins: alonlevy_ (alon@moz-87959726.redhat.com)
[09:32:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:32:31] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[09:32:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:32:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:32:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:33:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:34:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:34:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:34:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:34:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:35:14] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[09:35:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:35:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:35:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:35:55] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[09:36:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:36:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:37:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:38:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:38:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:39:03] *** Joins: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net)
[09:39:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:39:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:39:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:39:40] <wycats> I actually think that what I implemented (without whatever bugs I surely have) is roughly the correct abstraction
[09:39:54] <wycats> I think you want the abstraction in core to return a Result
[09:39:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:40:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:40:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:40:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:40:43] *** Quits: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net) (Ping timeout)
[09:40:46] <wycats> (well, I think we want once fns)
[09:40:51] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Quit: Leaving.)
[09:40:52] <wycats> (but modulo once fns, I think this works out)
[09:41:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:41:54] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[09:41:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:42:30] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[09:42:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:42:36] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[09:43:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:43:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:43:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:43:22] <wycats> basically an API that takes a fn(args: Args) -> T and returns a Result<T, Err>
[09:43:48] <wycats> and you call it with try_fn(fn, args) -> Result<T, Err>
[09:43:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:43:55] <flaper87> wycats: what's the discussion about?
[09:44:02] <wycats> I actually need to go to sleep
[09:44:03] <eddyb> wycats: you mean OnceFn<..Args, Ret> and returns Result<Ret, ~Any>?
[09:44:05] <flaper87> mmh, can we kick alan_andrade for a bit ?
[09:44:07] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:44:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:44:18] <wycats> eddyb: I'm talking about what we have today
[09:44:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:44:24] <wycats> you can layer ^^ on top of that
[09:44:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:44:52] <wycats> it's basically a Rusty version of the low-level c_void* API
[09:44:55] <eddyb> wycats: you have to make it easy to *replace* it with Fn traits
[09:45:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:45:15] <eddyb> flaper87: on freenode we have redirects to ##fix_your_connection for that
[09:45:26] <wycats> eddyb: you can have the fn call the OnceFn
[09:45:39] <wycats> with the args
[09:45:43] <flaper87> eddyb: I know :)
[09:45:48] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:45:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:45:56] <wycats> I don't know enough about how variadic generics will work
[09:46:05] <eddyb> actually, no arguments, I'm silly
[09:46:15] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[09:46:26] <eddyb> since you'd be able to capture the arguments like you originally intended
[09:46:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:47:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:47:27] <wycats> fn call<C: Callable, A>(callable: C, args: A) { callable.call(args) } try_fn(call, once_fn, args)
[09:47:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:47:47] <wycats> I'm just saying that we can wrap all the nasty unsafe stuff you have to do because of the nature of the API
[09:48:01] <wycats> and provide an interface that takes a Rust fn and two Rust objects
[09:48:07] <wycats> rather than three void pointers
[09:48:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:48:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:48:18] <eddyb> wycats: you need indirection btw
[09:48:23] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:48:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:48:31] <wycats> indirection?
[09:48:39] *** Quits: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:48:40] <wycats> how do I keep not going to sleep :P scumbag me
[09:48:40] <eddyb> wycats: ~ is probably the safest thing, as we don't have &my/&move
[09:48:43] <flaper87> where's the deriving macro defined ?
[09:48:50] <wycats> eddyb: ah yeah
[09:48:53] <wycats> I use ~Args
[09:48:55] <eddyb> flaper87: libsyntax::ext::deriving
[09:48:59] <flaper87> eddyb: thanks :)
[09:49:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:49:20] <wycats> I didn't do ~Args for the single-out-pointer case :P
[09:49:24] <wycats> unsure if that was cheating
[09:49:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:49:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:49:42] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:49:43] <wycats> happens to be the right siz
[09:49:46] <wycats> size*
[09:49:47] <eddyb> wycats: technically, with OnceFn<..Args, Ret> you could put ~Args in there
[09:49:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:50:06] <eddyb> wycats: though you do need 3 pointers. or maybe not, if you use generics correctly
[09:50:15] <wycats> eddyb: I'm not 100% sure if we're talking about the same strategy
[09:50:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:50:21] <wycats> do you have any major objection to a try_fn?
[09:50:31] *** Quits: Kxepal (Miranda@moz-4FC2B5D7.pppoe.mtu-net.ru) (Quit: Kxepal)
[09:50:32] <wycats> which basically wraps the current rust_try
[09:50:38] <wycats> but with a typesafe interface?
[09:50:41] <eddyb> well, it shouldn't be anything public
[09:50:52] <wycats> then yes, we disagree
[09:50:55] <wycats> I think it should be public
[09:50:56] *** Joins: Kxepal (Miranda@moz-4FC2B5D7.pppoe.mtu-net.ru)
[09:50:56] <eddyb> wycats: I was talking more about the callable stuff, actually
[09:51:04] <wycats> it's the lowest level interface that can still be safe
[09:51:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:51:25] <wycats> I want something that gives you access to rust_try without needing unsafe block
[09:51:27] <wycats> blocks
[09:51:29] <wycats> (in your code)
[09:51:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:51:43] <eddyb> wycats: don't make it possible to write try/catch with macros
[09:52:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:52:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:52:14] <wycats> the smallest delta I can think of is try_fn<T,U,V>(fn(T,U) -> V, T, U)
[09:52:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:52:23] <wycats> eddyb: you can already
[09:52:47] <wycats> this is actually much more annoying to use for ghetto purposes that a once fn interface
[09:52:50] <eddyb> wycats: you still need indirection to pass it through rust_try
[09:52:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:53:00] <wycats> oh yeah I keep missing the ~
[09:53:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:53:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:53:28] <wycats> try_fn<~T,~U,~V>(fn(~T,~U) -> ~V, ~T, ~U)
[09:53:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:53:32] <wycats> wait
[09:53:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:53:38] <eddyb> wycats: you do realize the two pointers are there to pass a closure, right?
[09:53:39] <wycats> try_fn<T,U,V>(fn(~T,~U) -> ~V, ~T, ~U)
[09:53:41] <wycats> such sleepy
[09:53:49] <wycats> eddyb: I don't really care why they're there
[09:53:59] <wycats> you need them to emulate other things too
[09:54:04] <wycats> like trait+args
[09:54:07] <eddyb> if you want typesafe
[09:54:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:54:20] <wycats> I mean a single pointer is fine too
[09:54:22] <eddyb> finish the llvm! macro
[09:54:25] <wycats> that's what I have
[09:54:28] <wycats> wat
[09:54:32] <wycats> what is going on here
[09:54:38] <eddyb> so it can be implemented in Rust
[09:54:49] <eddyb> rust_try, that is
[09:54:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:54:58] <wycats> seems orthogonal
[09:55:02] <eddyb> maybe
[09:55:10] <eddyb> wycats: you can also make rust_try variadic
[09:55:20] <eddyb> as in, C variadic, passes all arguments forward
[09:55:31] <wycats> I guess the truly minimal interface is try_fn<T,U>(fn(~T) -> ~U, ~T)
[09:55:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:55:43] <wycats> and you can pack multiple things in the T if you want
[09:55:54] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[09:56:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:56:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:56:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:56:17] <eddyb> wycats: yes, and the fn can be generic with a trait bound
[09:56:30] <eddyb> wycats: so you don't need to pack a trait object, just the contents
[09:56:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:56:56] <wycats> why do you need to make it generic?
[09:57:15] <eddyb> wycats: if it's generic, you don't need to pack a function pointer or a closure inside
[09:57:16] <wycats> show me the interface
[09:57:20] <wycats> to try_fn
[09:57:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:57:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:57:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:57:31] <eddyb> isn't try_fn the callback?
[09:57:35] <wycats> eddyb: y u so interesting
[09:57:38] <wycats> must sleep
[09:57:47] <wycats> try_fn takes an fn and an arg
[09:57:54] <wycats> transmutes and passes to rust_try
[09:58:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:58:20] <eddyb> the sane thing to do is to replace the interface with something OnceFn-like, generic if possible
[09:58:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:58:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:58:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:59:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:59:28] <wycats> eddyb: I don't see why that is, but I'm obviously missing something
[09:59:29] <eddyb> wycats: bah I should just get hired by mozilla then push variadic generics harder. sounds easier than littering libstd with .*Fn.*-like traits with fixed arity
[09:59:50] <wycats> it seems strictly less powerful to require a particular combination of func/args
[09:59:53] <wycats> vs. "anything will do"
[09:59:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:59:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:00:04] <wycats> you can obviously build nicer interfaces on top
[10:00:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:00:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:01:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:01:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:01:15] <wycats> anyway I really am going to bed
[10:01:25] <wycats> we can duel it out in a PR or something
[10:01:25] <flaper87> mmh, any idea why this is happening? https://github.com/mozilla/rust/pull/11768/files#r9175165
[10:01:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:01:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:02:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:02:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:02:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:02:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:03:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:03:18] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:03:39] <kimundi> flaper87: Yup
[10:03:54] <flaper87> kimundi: pls, share :D
[10:04:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:04:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:04:56] <kimundi> InvariantType and NoFreeze don't implement clone, which means if deriving(Clone) expands to marker1.clone(), marker2.clone(), autoref ends up finding the nextbest clone impl that fits: &T
[10:05:11] <kimundi> So it creates a reference, and clones that reference
[10:05:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:05:32] <flaper87> kimundi: ah right, that makes sense
[10:05:34] <kimundi> which means you en up with &InvariantType and &Nofreeze
[10:05:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:06:03] <kimundi> bam, confusing type error :)
[10:06:11] <flaper87> kimundi: I was just writing that
[10:06:17] <flaper87> that's an obscure error
[10:06:18] <kimundi> haha
[10:06:20] <flaper87> :D
[10:06:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:06:49] <kimundi> I wonder if it would be possible to write a lint for that
[10:07:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:07:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:07:41] <kimundi> "If the result of a clone call is of type &T, and causes a type error where T is expected, print out a error message that explains that T is missing a Clone iml"
[10:07:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:07:45] <flaper87> kimundi: that'd be interesting. I've never written a lint for rust before but I could give it a try. 
[10:07:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:08:07] <SingingBoyo> sometimes I really wish rust was good for webdev :/
[10:08:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:08:50] <skrylar> SingingBoyo: i don't see why it couldn't be used for that
[10:08:57] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[10:08:58] <skrylar> other than the socket lib isn't done yet
[10:09:00] <skrylar> :/
[10:09:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:09:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:09:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:09:24] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:09:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:09:52] <ChrisMorgan> skrylar: Rust has good *potential* for a web development platform, but the tooling ain't there yet. Neither TcpStream nor rust-http is good enough yet.
[10:10:10] <flaper87> but it will be :)
[10:10:24] *** Quits: doomlord_ (servitor@moz-841308DB.range86-160.btcentralplus.com) (Ping timeout)
[10:10:26] <SingingBoyo> also, no appengine API.  and I'm stuck with appengine.
[10:10:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:10:37] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Ping timeout)
[10:10:41] <flaper87> SingingBoyo: well, that's something different
[10:11:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:11:07] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[10:11:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:12:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:12:32] <SingingBoyo> flaper87: yeah.  Ah well, gives me an excuse to learn go and dart.
[10:12:47] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[10:12:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:12:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:13:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:13:23] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[10:13:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:14:06] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[10:14:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:14:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:14:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:14:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:15:22] <judofyr> I have a field that's ~[~[u8]]. is there a way to get a borrowed pointer to the "inner" element?
[10:15:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:15:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:15:34] <judofyr> &values[0] gives me a &~[u8]
[10:15:40] <judofyr> I'd like a &[u8]
[10:15:42] *** Joins: jackneill (jackneill@moz-E07BD7BD.pool.digikabel.hu)
[10:15:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:16:09] <eddyb> judofyr: values[0].as_slice()
[10:16:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:16:18] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[10:16:43] <judofyr> eddyb: awesome!
[10:16:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:16:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:17:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:17:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:18:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:18:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:18:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:18:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:19:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:20:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:20:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:21:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:21:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:22:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:22:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:22:31] *** Quits: marcel_r (chatzilla@37CAED5E.29CC82CF.C33E194F.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131212173133])
[10:22:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:23:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:23:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:23:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:24:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:24:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:24:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:24:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:25:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:25:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:25:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:26:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:26:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:27:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:27:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:27:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:27:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:28:07] <kimundi> flaper87: https://github.com/mozilla/rust/issues/11818
[10:28:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:28:43] <flaper87> kimundi: awesome +1, are you going to work on that? I could give it a try if you won't
[10:29:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:29:14] <kimundi> flaper87: Seeing how I have no idea how to write lint, and don't have time for it: It'S all yours! :)
[10:29:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:29:45] <flaper87> kimundi: hehe, well, I've no idea how to write lints either :P We'll see
[10:29:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:29:48] <kimundi> (I don't even know if it is possible to write lint working with type errors)
[10:29:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:30:22] <kimundi> I guess it would just be additional checking code in typecheck or so
[10:30:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:31:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:31:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:31:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:31:33] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[10:31:43] <flaper87> kimundi: I wonder if this is something that should actually fixed elsewhere. I mean, if T was autoref'd and then cloned, why shouldn't it autoderef'd too ?
[10:31:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:31:55] <flaper87> I'm most likely missing something but mhh
[10:32:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:33:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:33:32] <kimundi> flaper87: autoderef doesn't work, as that would mean moving out of a reference for some types
[10:33:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:33:39] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:33:47] <flaper87> kimundi: mmh, right!
[10:33:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:33:53] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[10:33:56] <flaper87> I knew I was missing something :/
[10:34:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:34:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:34:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:35:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:35:13] <kimundi> Method dispatch simply tries to resolve method calls starting with the input type, and then adding/removing & until it works. Unless we get rid of auto(de)ref or clone impl on &T, the problem will continue to arise
[10:35:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:36:02] <kimundi> What could work is deriving(Clone) being written in a way that statically requires the Field types to implement Clone
[10:36:06] *** Joins: marianoguerra (marianogue@moz-46CE4B2B.dip0.t-ipconnect.de)
[10:36:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:36:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:36:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:36:29] <kimundi> like, adding assert_clone<T: Clone>(); calls for all field types
[10:36:58] <kimundi> But it seems a lint that catches the problem in gneral would be better for that
[10:36:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:37:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:37:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:37:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:38:09] <flaper87> kimundi: agreed
[10:38:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:38:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:38:47] <flaper87> kimundi: since that's nmatsakis PR, I just used &'static ... in my working copy
[10:38:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:38:53] <flaper87> not planing to push it
[10:39:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:39:13] <kimundi> Oh, that reminds me, I should reference that
[10:39:14] <flaper87> The best fix there would be to implement Clone for all kinds, I guess
[10:39:24] <flaper87> kimundi: :D
[10:39:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:40:00] <kimundi> flaper87: Well, only if that would be sound for that kind - I'm not sure if its the right thing to do for all#
[10:40:11] <kimundi> err, not kinds
[10:40:15] <flaper87> markers
[10:40:16] <kimundi> MarkerTypes
[10:40:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:40:18] <flaper87> :)
[10:40:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:41:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:42:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:42:27] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[10:42:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:42:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:42:52] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:43:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:43:54] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[10:43:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:43:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:44:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:44:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:44:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:45:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:45:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:45:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:46:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:46:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:46:32] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[10:46:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:46:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:47:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:47:26] <Tobba> what affects mangled names?
[10:47:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:47:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:47:59] *** Joins: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp)
[10:48:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:48:29] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[10:48:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:49:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:49:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:49:14] *** Joins: doomlord_ (servitor@moz-841308DB.range86-160.btcentralplus.com)
[10:49:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:49:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:50:08] *** Quits: alonlevy_ (alon@moz-87959726.redhat.com) (Ping timeout)
[10:50:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:50:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:50:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:51:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:51:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:51:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:51:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:52:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:52:44] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[10:52:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:53:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:53:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:53:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:53:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:54:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:54:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:54:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:55:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:55:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:55:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:55:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:56:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:56:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:56:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:56:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:57:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:57:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:58:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:58:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:58:21] *** Joins: eibwen (kvirc@moz-BCBF70B3.dip0.t-ipconnect.de)
[10:58:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:58:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:59:22] *** Joins: jarekps (jarekps@moz-B132C0C2.net.pbthawe.eu)
[10:59:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:59:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:59:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:00:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:00:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:00:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:00:58] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:01:03] *** Quits: jarekps (jarekps@moz-B132C0C2.net.pbthawe.eu) (Ping timeout)
[11:01:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:01:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:01:59] *** Joins: Kambfhase (quassel@moz-1B869C11.travedsl.de)
[11:02:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:02:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:02:10] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[11:02:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:02:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[11:02:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:03:10] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[11:03:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:03:37] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:04:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:04:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:04:15] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[11:04:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:04:39] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:04:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:05:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:05:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:05:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:05:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:06:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:06:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:07:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:07:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:07:18] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[11:07:21] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[11:07:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:08:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:08:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:08:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:08:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:08:56] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[11:09:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:09:25] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[11:09:27] *** Quits: marianoguerra (marianogue@moz-46CE4B2B.dip0.t-ipconnect.de) (Ping timeout)
[11:09:51] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Quit: WeeChat 0.4.3-dev)
[11:09:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:10:12] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[11:10:15] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:10:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:10:44] *** Joins: onix (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[11:11:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:11:35] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[11:11:46] <Tobba> is there any way to override the output filename
[11:11:48] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[11:11:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:12:01] <Tobba> having to add a wildcard mv to this would be extremely dumb
[11:12:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:12:23] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[11:12:25] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[11:12:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:12:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:13:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:13:31] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[11:13:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:13:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:13:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:14:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:15:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:15:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:16:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:16:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:16:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:17:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:17:13] <dbaupp> eddyb: re local heap... I don't see how that's relevant to what I was saying :P
[11:17:22] <eddyb> dbaupp: you said heap
[11:17:23] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Quit: leaving)
[11:17:26] <dbaupp> eddyb: yes
[11:17:31] <eddyb> dbaupp: the only heap that has something to do with tasks is the local heap
[11:17:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:17:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:17:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:17:53] <dbaupp> eddyb: no, the "exchange" heap is task-y too
[11:17:59] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[11:18:01] <eddyb> how so?
[11:18:05] <dbaupp> certain things in it are owned by different tasks
[11:18:05] <eddyb> it's literally malloc/free
[11:18:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:18:23] <dbaupp> the semantics of it
[11:18:28] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[11:18:30] <eddyb> ahh. it doesn't really matter
[11:18:43] <eddyb> whatever holds the pointer, owns it
[11:18:49] <dbaupp> the "local heap" and "exchange heap" are kinda outdated concepts anyway
[11:19:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:19:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:20:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:20:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:20:12] <dbaupp> we just have... things; some of which are Send and some of which aren't
[11:20:15] <Tobba> I never encountered anything other than the exchange heap
[11:20:18] <Tobba> I was wondering what that was all about
[11:20:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:20:57] <eddyb> Tobba: local heap is for @T. it's really stupid
[11:20:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:21:27] <Tobba> ah
[11:21:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:21:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:21:30] <Tobba> yeah thats dumb
[11:21:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:21:48] <eddyb> the box already has a linked list - no idea why there's a heap implementation with chunks, on top of malloc/free
[11:21:56] <Tobba> also whats the proposed name for the part of the standard library that doesnt have platform dependant stuff
[11:22:05] <Tobba> because I'm gonna have to implement parts of std, again
[11:22:08] <eddyb> Tobba: 
[11:22:11] <Tobba> this time for the driver framework
[11:22:12] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[11:22:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:22:28] *** Joins: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net)
[11:22:30] <eddyb> Tobba: you can try to get it into rust-core
[11:22:58] <Tobba> oh right, rust-core
[11:22:58] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:23:03] <Tobba> forgot about that thing
[11:23:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:23:40] <Tobba> though I'd need to strip it a lot
[11:24:06] <dbaupp> ... local heap isn't a thing. @ is its just malloc & free with some headers and registration with the task and weirdo reference counting.
[11:24:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:24:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:24:58] *** Joins: Earnestly (earnest@D966D76B.1ED7F176.BFD1ABFD.IP)
[11:25:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:25:22] <dbaupp> alan_andrade alan_andrade_: your client is connecting and disconnecting a lot; could you check it out?
[11:25:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:25:30] <dbaupp> Tobba: why would you need to strip it a lot?
[11:25:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:26:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:26:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:26:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:26:45] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[11:26:52] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:27:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:27:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:27:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:28:05] *** Joins: alonlevy_ (alon@moz-87959726.redhat.com)
[11:28:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:28:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:29:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:29:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:29:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:30:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:30:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:30:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:30:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:31:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:31:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:31:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:31:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:32:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:32:50] <eddyb> dbaupp: look at LocalHeap
[11:33:04] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[11:33:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:33:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:33:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:33:26] <eddyb> dbaupp: I wish it was just malloc/free + refcount
[11:33:40] <Tobba> dbaupp: rust-core has some OS specific stuff
[11:33:54] <Tobba> its not a lot really
[11:33:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:33:57] <Tobba> but still, I'd need to strip some of it
[11:34:11] <eddyb> Tobba: s/strip/put #[cfg(pthread)] all over the place/
[11:34:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:34:26] <Tobba> os, io, thread, time parts of it
[11:34:27] <Tobba> just to name a few
[11:34:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:34:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:35:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:35:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:35:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:35:47] <Tobba> I could just take libstd and tear some peices out, thats basicaly what rust-core is AFAIK
[11:35:48] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Max SendQ exceeded)
[11:35:53] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[11:35:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:36:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:37:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:37:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:37:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:37:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:38:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:38:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:38:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:39:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:39:10] <dbaupp> eddyb: I still think "local heap" is conceptually out dated... that should really be called AtAllocator or something
[11:39:33] <eddyb> dbaupp: it should really be nothing, just calls to malloc/free
[11:39:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:39:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:39:45] <dbaupp> eddyb: no it doesn't
[11:39:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:39:49] <dbaupp> it does all the header stuff
[11:39:52] *** Joins: kori (kori@moz-6F7B0EA0.dynamic.adsl.gvt.net.br)
[11:39:58] <eddyb> well, and that. but that's nothing, really
[11:40:06] <dbaupp> no it's not
[11:40:08] <eddyb> compared to the nonsense it does now
[11:40:14] <dbaupp> it's why we're removing it :P
[11:40:23] <dbaupp> (among other things)
[11:40:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:40:27] <eddyb> "nothing" implementation-wise
[11:40:35] <eddyb> it doesn't need to allocate chunks and stuff
[11:40:52] *** Quits: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:40:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:40:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:41:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:41:08] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[11:41:09] <eddyb> right now it's a half-assed custom heap on top of the libc heap
[11:41:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:42:18] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Ping timeout)
[11:42:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:42:36] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[11:42:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:43:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:43:30] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[11:43:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:43:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:44:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:44:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:44:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:45:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:45:15] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[11:45:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:45:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:46:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:46:23] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[11:46:36] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[11:46:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:47:17] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:47:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:48:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:48:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:48:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:49:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:49:14] *** Joins: Florob (Florob@moz-39532932.de)
[11:49:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:49:30] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[11:49:58] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:50:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:50:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:50:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:51:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:51:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:51:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:51:40] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[11:52:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:52:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:53:00] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[11:53:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:53:31] *** Joins: leslie (Adium@moz-454B76DB.members.linode.com)
[11:53:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:53:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:54:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:54:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:55:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:55:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:55:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:55:48] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:55:57] *** Joins: gifnksm (gifnksm@moz-2EC7BA37.szoknt01.ap.so-net.ne.jp)
[11:55:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:56:25] *** Quits: leslie (Adium@moz-454B76DB.members.linode.com) (Connection reset by peer)
[11:57:20] <Tobba> ugh
[11:57:32] <Tobba> dead code detection is going off on public functions while exporting an rlib
[11:57:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:57:42] <dbaupp> are they in public modules?
[11:57:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:58:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:58:08] <Tobba> ah right, I had a pub use device::*; in the crate before to reexport the functions
[11:58:15] <Tobba> but the compiler did not approve
[11:58:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:58:38] <Tobba> I forgot I removed that
[11:59:04] *** Quits: kvanb (kvanb@moz-C5594194.lnse7.lon.bigpond.net.au) (Quit: kvanb)
[11:59:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:59:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[11:59:11] * ChrisMorgan loves it when the compiler is right despite his initial firm determination that it's wrong ☺
[11:59:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:59:27] <Tobba> ^ every fucking time
[11:59:34] <Tobba> except when LLVM is fucking out
[11:59:41] *** Joins: leslie (Adium@6A5D6884.8653F9EB.1795BCC4.IP)
[11:59:52] <Tobba> then everyone tells me I'm mad and it turns out its doing some arcane optimization because theres totally noone who would try and do that ever right
[11:59:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:00:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:00:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:00:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:00:43] <Tobba> then everyone tells me its correct behavior for it to do nonsensical things when you dereference constant nulls because its undefined behavior
[12:00:48] <Tobba> I mean fuck
[12:00:51] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:01:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:01:42] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[12:01:51] <dbaupp> Well, it's undefined behaviour... it's allowed to do whatever it wants :P
[12:02:02] <adridu59> hello. can I see what types are Pod from the docs?
[12:02:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:02:23] <Tobba> dbaupp: its really not though
[12:02:36] <Tobba> nulls are undefined behavior in C at least
[12:02:38] <Matthias247> currently only when you use the look at src feature :(
[12:02:41] <Tobba> but yeah
[12:02:50] <dbaupp> Tobba: dereferencing null is undefined behaviour for LLVM, there's no way around it
[12:02:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:03:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:03:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:03:20] <dbaupp> adridu59: nope
[12:03:20] <Tobba> it was when you tried to use a structure statically at address 0 when addrspace was involved and the entire load/store optimizer would break
[12:03:35] <Tobba> null dereferences being undefined is absymal though
[12:03:43] <Tobba> its a memory address like anything else and certain archs even requrie you to do it
[12:03:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:03:56] <dbaupp> LLVM isn't designed to run on those archs
[12:03:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:04:12] <adridu59> dbaupp: so, which are these?
[12:04:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:04:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:04:26] <Tobba> I mean its kinda an ABI thing
[12:04:33] <Tobba> but still
[12:04:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:04:39] <dbaupp> adridu59: primitives, & pointers and * and collections of them
[12:04:45] <Tobba> dbaupp: LLVM has GPU codegens
[12:04:46] <Tobba> those rely on it
[12:04:54] <Tobba> this was an issue in the x86 codegen tho afaik
[12:05:00] <adridu59> dbaupp: primitives are stack allocated types?
[12:05:05] <dbaupp> adridu59: you can call `fn test_pod<T: Pod>(_ : T) {}`
[12:05:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:05:10] <dbaupp> adridu59: no
[12:05:21] <dbaupp> nothing is fundamentally "stack allocated"
[12:05:28] <Tobba> I dont expect the behavior to be what I want, I expect it to make any form of sense
[12:05:28] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[12:05:34] <dbaupp> some things *can* be placed directly on the stack
[12:05:38] <Tobba> in this case it would overflow and it would die in a fire
[12:05:42] <dbaupp> by they don't have to be
[12:05:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:05:53] <Tobba> on that note, any idea why I cant put pub use device::*; in my crate
[12:06:03] <dbaupp> what's the complaint?
[12:06:21] <adridu59> dbaupp: so what are primitive types,
[12:06:22] <adridu59> ?
[12:06:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:06:31] <dbaupp> adridu59: int, uint, f64 etc.
[12:06:53] *** Parts: kori (kori@moz-6F7B0EA0.dynamic.adsl.gvt.net.br) (WeeChat 0.4.2)
[12:06:56] <eddyb> adridu59: the ones that are defined in the compilator yet named
[12:06:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:07:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:07:02] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[12:07:11] <eddyb> bool, integers, floats, and I believe that's it
[12:07:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:07:32] <dbaupp> char
[12:07:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:07:56] <eddyb> dbaupp: riiight. our misnamed unicode codepoint :P
[12:08:15] <adridu59> so anything not dst and not heap alloc, with only one value stored basically
[12:08:16] <Tobba> heh
[12:08:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:08:18] <Matthias247> basically everything that has a fixed size and where you don't need to dereference it in order to access the content
[12:08:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:08:22] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:08:29] <dbaupp> eddyb: it's a primitive no matter what it's called ;)
[12:08:32] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[12:08:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:08:43] <Matthias247> adridu59: no, structs which only contain other POD types (incl. POD structs) are also POD
[12:08:44] <dbaupp> adridu59: dst doesn't really come into it
[12:09:04] <eddyb> adridu59: my definition is better, in that it reflects the magic nature of those types
[12:09:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:09:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:09:08] <dbaupp> Matthias247: we're talking about primitives, not (the more general) Pod
[12:09:14] <Matthias247> fixed size arrays like [u8, 100] are too
[12:09:26] <Matthias247> dbaupp: but he asked about POD in the beginning ;)
[12:09:26] <adridu59> I see
[12:09:31] <adridu59> yea ;)
[12:09:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:09:49] <dbaupp> Matthias247: yes, I know... I was the first to reply to that question :P
[12:10:14] <eddyb> adridu59: when dbaupp said "collections of them", he meant tuples, enums, structures, etc.
[12:10:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:10:27] <Matthias247> dbaupp: no ;)
[12:10:35] <dbaupp> things that aren't Pod: types with destructors, &mut, @ and anything (recursively) containing them
[12:10:36] *** Joins: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP)
[12:10:39] *** Joins: mpiechotka (mpiechotka@moz-7F5D260D.dynamic.mnet-online.de)
[12:10:46] <Tobba> asking again, is there any way to do something like "pub use device::*;" in the crate root?
[12:11:03] <dbaupp> Matthias247: oh, you were sneaky :)
[12:11:15] <dbaupp> I was the first to reply with 'adridu59:' at the start :P
[12:11:16] <adridu59> eddyb: I see
[12:11:28] <eddyb> @ has a destructor though
[12:11:37] <eddyb> it just copies by default instead of moving
[12:11:41] <Matthias247> dbaupp: ok. I will accept that :)
[12:11:47] <Florob> Tobba, If the problem with that is just that it's feature gated, yes.
[12:11:49] <dbaupp> Tobba: you didn't answer my question: what's the complaint?
[12:11:57] <Tobba> it errors
[12:11:59] <Tobba> one sec
[12:12:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:12:09] <dbaupp> eddyb: it's not like other types with destructors
[12:12:12] <Tobba> 6:1: 1:1 error: `use` and `extern mod` declarations must precede items
[12:12:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:12:16] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[12:12:17] <Tobba> its the last line in the crate
[12:12:26] <eddyb> Tobba: isn't it obvious?
[12:12:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:12:32] <Matthias247> then do what it suggests and move it up :)
[12:12:34] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[12:12:34] <eddyb> Tobba: move it up higher
[12:12:48] <adridu59> so, for mutability I would use Gc<Cell<>> (or RefCell) or Rc<Cell<>> ()? And Arc<Cell<>> is instead RWArc<>?
[12:13:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:13:15] <dbaupp> adridu59: try to create an Arc<Cell<>> ;)
[12:13:24] <eddyb> adridu59: Arc<Cell/RefCell> is denied because that would break atomicity - or whatever that property is called
[12:13:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:13:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:13:43] <dbaupp> (well, unless you meant "what would be Arc<CEll<>> is replaced by RWArc<>")
[12:13:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:13:53] <adridu59> Arc<> is more expensive than Rc<> because it has to enforce Atomicity right?
[12:14:02] <eddyb> adridu59: only for refcounting
[12:14:02] <dbaupp> only when cloning
[12:14:06] <Matthias247> Do you need multi-thread access? If no than you should go for Rc instead of Arc
[12:14:14] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[12:14:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:14:23] <dbaupp> Arc is restricted to containing immutable data
[12:14:31] <Tobba> eddyb: wait, shit, I thought it didnt make much sense to have the use statement above the mod that imports the module itself
[12:14:35] <eddyb> adridu59: that is, when you clone or destroy a handle, it needs to do an atomic refcounting operation
[12:14:39] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[12:14:43] <eddyb> Tobba: that's how "use" works
[12:14:54] <adridu59> so RWArc must be used with a semaphore or something?
[12:15:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:15:02] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:15:20] <dbaupp> Tobba: rustc is multiple passes, so you can (e.g.) call functions "before" they are defined, and similarly import/export thigns "before" they are defined
[12:15:28] <dbaupp> adridu59: RWArc uses mutexes internally
[12:15:33] <Matthias247> dbaupp: that's why I use UnsafeArc :-)
[12:15:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:15:54] <dbaupp> adridu59: (MutexArc is probably more efficient, unless you have a lot of readers at once, and only a few writers)
[12:15:54] <adridu59> eddyb: and why when would I need Arc instead of Rc? to prevent data races in specific cases?
[12:15:57] <dbaupp> Matthias247: hm?
[12:16:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:16:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:16:14] <dbaupp> adridu59: to be able to shared immutable memory between tasks
[12:16:15] <dbaupp> *share
[12:16:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:16:35] <bvssvni> is it possible to cast a pointer to trait into Any?
[12:16:47] <eddyb> bvssvni: ~~Trait -> ~Any
[12:16:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:16:56] <eddyb> bvssvni: but that's kinda pointless
[12:16:58] <adridu59> dbaupp: is Arc shared by default?
[12:17:08] <eddyb> adridu59: Arc is *shareable*
[12:17:10] <dbaupp> adridu59: that question doesn't make sense :)
[12:17:13] <eddyb> adridu59: while Rc isn't
[12:17:14] <bvssvni> eddyb: how so?
[12:17:14] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:17:21] <adridu59> dbaupp: so  Rc would risk data races on multithread right?
[12:17:23] <eddyb> bvssvni: what do you actually want?
[12:17:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:17:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:17:33] <dbaupp> adridu59: Arc<T> is Send if T is Send
[12:17:34] <adridu59> dbaupp: right
[12:17:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:17:41] <dbaupp> adridu59: Rc<T> is never Send, even if T is Send
[12:17:42] <eddyb> adridu59: you can't actually use Rc across threads, we have kinds to guard that
[12:17:45] <Matthias247> you can send an ARC type to another task while you can't even send an Rc type
[12:18:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:18:31] <adridu59> but I'm just questioning why Rc's not multithread safe, because of potential data races?
[12:18:50] <dbaupp> adridu59: yes, the reference counting of Rc isn't atomic
[12:18:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:18:58] <adridu59> that's a lot of types BTW, esp. RWArc/MutexArc/UnsafeArc (well UnsafeArc has its point)
[12:19:11] <dbaupp> UnsafeArc should *very* rarely be used in user code...
[12:19:19] <Matthias247> when one thread drains the refcount to 0 and removes it another could still see 1 and try to clone it
[12:19:28] <eddyb> UnsafeArc is used internally by RWArc/MutexArc I think
[12:19:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:19:36] <bvssvni> eddyb: one minute, will create a gist
[12:19:46] <dbaupp> yes, UnsafeArc is just a building block for shared-memory data stuctures
[12:19:52] <adridu59> does Arc use a mutex?
[12:19:55] <dbaupp> eddyb: it's used by Arc too, iirc
[12:19:58] <dbaupp> no
[12:19:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:20:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:20:13] <eddyb> adridu59: Arc is just Rc with atomic increment/decrement
[12:20:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:20:15] <Matthias247> Arc doesn't need a mutex when it contains immutable data. Because nobody can change it
[12:20:28] <eddyb> +Send and requires Freeze
[12:20:32] <adridu59> but how does it guarantee atomicity?
[12:20:38] <dbaupp> it contains data that is guaranteed to be read only when placed in it, so threads can only read: data races require writing.
[12:20:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:21:00] <eddyb> Arc guards against free() races, basically
[12:21:02] <adridu59> but there's a refcount to it?
[12:21:08] <dbaupp> the only atomicity necessary is atomic refcounting
[12:21:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:21:17] <dbaupp> which is done with CPU atomic instructions
[12:21:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:21:21] <adridu59> dbaupp: that's what I was referring to
[12:21:22] <dbaupp> not mutexes
[12:21:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:21:36] <adridu59> dbaupp: I see; so all arches we target support these instructions?
[12:21:44] <eddyb> adridu59: we use LLVM intrinsics
[12:21:53] <dbaupp> adridu59: the older i386 may not, I don't know.
[12:22:02] <adridu59> LLVM can emulate them on older arch?
[12:22:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:22:09] <eddyb> adridu59: doubt it
[12:22:11] <dbaupp> mutexes I guess
[12:22:25] *** Quits: alonlevy_ (alon@moz-87959726.redhat.com) (Ping timeout)
[12:22:26] <adridu59> well yeah I was thinking emulation by mutex
[12:22:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:22:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:22:38] <eddyb> that's a very weird specific usecase
[12:22:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:22:56] <eddyb> I understand using microcontrollers, but not x86 older than i386
[12:23:18] <adridu59> okay all those pointers are a bit more clear in my mind
[12:23:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:23:30] <adridu59> hopefully I can write something decent on them
[12:23:46] <Tobba> I think the worst you should support these days is a pentium
[12:23:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:23:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:24:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:24:19] <Tobba> except for MMX probably, but I cant remember if that was in the first pentiums
[12:24:20] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[12:24:25] *** Quits: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com) (Quit: Leaving)
[12:24:31] *** Joins: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com)
[12:24:34] *** Joins: alonlevy_ (alon@moz-87959726.redhat.com)
[12:24:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:25:04] <bvssvni> eddyb: https://gist.github.com/bvssvni/8631956
[12:25:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:25:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:25:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:25:39] <Tobba> wouldent Rc<> be way better suited for all that
[12:25:48] <dbaupp> adridu59: (btw, the source code of these things is actually fairly readable; it might be interesting to have a look at it, if you want to know details.)
[12:25:57] <eddyb> bvssvni: no highlighting :(
[12:26:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:26:09] <dbaupp> eddyb: fork it and set the language to rust
[12:26:35] <bvssvni> updated
[12:26:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:27:08] <eddyb> bvssvni: right, I see what you want to do
[12:27:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:27:25] <eddyb> bvssvni: for it to ever work at all, you need the information to be inside your trait objects
[12:27:32] <eddyb> bvssvni: so Entity has to inherit Any
[12:27:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:28:00] <bvssvni> eddyb: same error
[12:28:23] <bvssvni> I am trying to understand what is happening
[12:28:31] <eddyb> bvssvni: now, you need to implement the Any*Ext traits for &'a Entity instead of &'a Any
[12:28:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:28:54] <eddyb> bvssvni: because we don't have trait pointer casting and whatnot
[12:29:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:29:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:29:08] <bvssvni> ah
[12:29:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:29:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:30:19] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Quit: No Ping reply in 180 seconds.)
[12:30:55] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[12:31:05] *** Joins: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com)
[12:31:13] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:31:13] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:31:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:31:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:31:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:32:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:32:46] <Tobba> think I'm just being dumb but what are the rules when rustc searches for imports
[12:32:51] <Matthias247> Tobba: the first pentiums were not MMX. Pentium MMX followed a little later
[12:33:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:33:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:33:04] <Tobba> I tried passing -L . to rustc (.rlib is in the same dir as the crate right now)
[12:33:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:33:33] <Matthias247> hmm, half a year ago I thought Pentium 4 would propably be the oldest to support. But now that Intel released Quark, you have to care for Pentium 1 ISA again
[12:33:45] <Tobba> heh
[12:33:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:33:53] <Tobba> well yeah
[12:34:04] <Matthias247> would propably be interesting if Rust runs on Quark
[12:34:14] <Tobba> doable
[12:34:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:34:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:34:23] <Tobba> I wanna get one of those super tiny quark boards
[12:34:26] <Tobba> they're p expensive though iirc
[12:34:32] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[12:34:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:34:49] <Tobba> the Quark X1000 draws 2.2W
[12:34:52] <Tobba> jesus christ
[12:34:57] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[12:34:57] <Matthias247> the arduino-like board is about 65eur
[12:35:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:35:27] <Tobba> though I dunno what voltage it runs at
[12:35:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:35:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:35:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:36:04] <Matthias247> 2.2W is really much. I think a Cortex A7 will be comparable and will draw less
[12:36:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:36:29] <Tobba> it kinda depends on the voltage
[12:36:35] <Tobba> but an USB port will provide you 1.5W
[12:36:41] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[12:36:45] <Matthias247> 2.5 ;)
[12:36:52] <Tobba> wait yes
[12:36:57] <Tobba> how did I mess up that calculation
[12:37:06] <Tobba> eugh
[12:37:10] <eddyb> 5V,  500mA, right?
[12:37:13] <Tobba> yep
[12:37:25] <Tobba> like, seriously I just hit it into calc because I already had it open
[12:37:26] <Tobba> I blame numpad
[12:37:34] <Matthias247> but that's the specification. Good devices do more
[12:37:41] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[12:37:42] <Tobba> well yeah
[12:37:46] <eddyb> Matthias247: and bad ones do less :(
[12:37:50] <Tobba> still though, 2.2W for a 400MHz x86 processor
[12:37:59] <Tobba> I dont even know if it does out of order execution or register renaming
[12:38:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:38:07] <Matthias247> it doesnt
[12:38:12] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[12:38:14] <Tobba> x86 without any of those
[12:38:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:38:20] <Matthias247> even Atom didn't do out-of-order
[12:38:22] <Tobba> dear god
[12:38:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:38:33] <Matthias247> the first atom that does is the new bay-trail
[12:38:37] <Tobba> its probably directly comparable to an ARM core then
[12:38:44] <adridu59> yea they have to compete with ARM
[12:39:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:39:12] <eddyb> all this talk makes me want to look at Mill again
[12:39:16] <Matthias247> but Atom does also get some kind of superfluos now, with Haswells running with < 5W
[12:39:36] <Tobba> Haswells run at <5W?
[12:39:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:39:49] <Tobba> and quark eats 2.2W, ew
[12:40:02] <Tobba> geez intel just scale down itanium or something already and use that
[12:40:16] <Matthias247> yep, the new Haswell NUC was measured as a complete device with < 5W
[12:40:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:40:40] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[12:40:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:40:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:41:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:41:11] <Matthias247> ok, I believe that was at Idle
[12:41:16] <Tobba> ah
[12:41:17] <Tobba> yeah thought so
[12:41:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:41:39] <Tobba> still, you can get some really good efficiency on superscalar cores
[12:42:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:42:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:42:10] <Tobba> considering you get the same performance as if you had out of order and register renaming without actually having to implement all that
[12:42:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:42:29] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[12:42:45] <Tobba> actually sorry, I meant more VLIW
[12:42:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:43:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:43:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:43:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:44:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:44:51] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[12:44:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:45:16] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[12:45:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:45:35] <Matthias247> for performance and power consumption I nowadays simply look at the benchmarks. The hold more truth than discussing about the architecture ;)
[12:45:55] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Quit: No Ping reply in 180 seconds.)
[12:45:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:46:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:46:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:46:25] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[12:46:28] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[12:46:35] <Tobba> also why did intel go with Quark directly
[12:46:43] <Tobba> they had Atom so couldent they get something nucleus related
[12:46:45] <Tobba> I mean geez
[12:46:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:46:57] <Tobba> soon it'll be Intel Gauge Boson
[12:47:13] <Matthias247> afaik they wanted even less power consumption than Atom had
[12:47:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:47:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:47:24] <Tobba> I meant naming wise
[12:47:31] <Matthias247> ah ;)
[12:47:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:47:47] <Tobba> intel seems to fire that department every year anyways considering how inconsistent it is
[12:48:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:48:33] <Matthias247> I'm working at a company which has even more inconsistent naming, so I don't bother :)
[12:48:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:48:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:48:43] <Tobba> hah
[12:48:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:49:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:49:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:49:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:50:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:50:36] *** Joins: mib_lkmzph (Mibbit@moz-BDC342E6.lightspeed.sntcca.sbcglobal.net)
[12:50:37] *** Quits: squiddy (squiddy@moz-954C3009.adsl.alicedsl.de) (Ping timeout)
[12:50:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:51:04] <flaper87> sfackler: around?
[12:51:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:51:29] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[12:51:46] <Florob> Tobba, Some years ago P54C was the only thing they could "fully synthesize" (whatever that means exactly). That's apparently also the reason the the Xeon Phis are in fact P54C, but with "minor additions". Like 64bit registers and huge vector units. Still in-order though.
[12:51:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:52:19] <Tobba> xeon phis are in order?
[12:52:25] <Florob> yes
[12:52:28] <adridu59> how are Gc<> ptrs deferenced? * seems to not work when accessing a struct element
[12:52:28] <Tobba> x86
[12:52:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:52:29] <Tobba> in order
[12:52:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:52:31] <Tobba> KILL IT WITH FIRE
[12:52:39] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:52:43] <dbaupp> adridu59: check the docs
[12:52:53] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[12:52:56] <dbaupp> adridu59: there's probably a .borrow method of some sort
[12:53:01] <Tobba> wait isnt xeon phi one of their supercomputing ship in the same series as knights corner
[12:53:07] <Tobba> oh yep it is
[12:53:09] <Tobba> those are literally GPUs
[12:53:10] <Florob> Tobba, they try to make up for that by having 4 virtual cores per physical core, so you can amortise for the lack of load reordering
[12:53:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:53:20] <Tobba> ah
[12:53:32] <Florob> Doesn't work that well though :/
[12:53:39] <Tobba> one of those chips was literally a GPU with the texture units disabled iirc
[12:53:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:53:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:53:55] <adridu59> dbaupp: Gc::borrow; quite verbose
[12:53:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:54:00] <Tobba> ugh, whats the syntax for importing an rlib?
[12:54:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:54:48] <Tobba> wait, extern mod
[12:55:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:55:36] *** Quits: mib_lkmzph (Mibbit@moz-BDC342E6.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:55:43] <Matthias247> Florob: the strategy at that time was to have a simple core which you can either sell standalone (as Atom products) or in a parallel-array (that was Larrabee which know ended up in the xeon-phi and co things)
[12:55:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:55:55] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: )
[12:56:18] <Tobba> heh, suddenly reminded of netburst
[12:56:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:56:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:56:26] <Tobba> in theory it could scale up to like 10GHz
[12:56:30] <Tobba> in practice the core caught fire way before that
[12:56:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:56:48] <Matthias247> nobody had a real interest about larrabee for raytracing. But now they can at least sell them for supercomputung / gpu computing
[12:57:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:57:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:57:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:57:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:58:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:59:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:59:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:00:10] *** Quits: onix (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[13:00:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:00:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:00:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:00:39] <Tobba> hm
[13:01:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:01:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:01:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:01:46] <Tobba> importing this rlib and getting lots of linker errors, two about crate maps (one for std and I have no_std), and another about it trying to import a method
[13:01:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:02:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:02:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:02:50] <Tobba> or have I missed the point of rlibs entirely and they just describe dynamic linking info? probably actually
[13:02:57] *** Joins: jensnock_ (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com)
[13:03:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:03:15] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[13:03:30] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[13:03:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[13:03:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:03:58] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:04:18] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:04:22] *** Quits: jensnock_ (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[13:04:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:04:44] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[13:04:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:04:56] *** Joins: jensnock_ (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:05:17] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[13:05:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:05:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:05:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:06:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:06:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:06:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:06:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:07:21] *** Joins: jensnockert (jensnocker@moz-2ECF70FB.mobileonline.telia.com)
[13:07:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:07:33] *** Quits: jensnock_ (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[13:08:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:08:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:09:01] <Tobba> this guy has one of the most unstable connections I've seen in a while
[13:09:02] *** Quits: jensnockert (jensnocker@moz-2ECF70FB.mobileonline.telia.com) (Connection reset by peer)
[13:09:02] <Tobba> goddamn
[13:09:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:09:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:09:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:09:42] <eddyb> Tobba: what's worse is that we don't have mods around
[13:10:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:10:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:10:39] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:10:43] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:10:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:10:51] <Tobba> but still, I thought an rlib would basicaly be a dumped pre-analyzed blob of code?
[13:11:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:11:26] <dbaupp> eddyb: we do have them, but they're all private and inaccessible right now
[13:11:30] *** Joins: Kambfhase_ (quassel@moz-4FE2BA40.travedsl.de)
[13:11:38] * dbaupp `pub use acrichto;`
[13:11:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:11:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:12:08] <eddyb> Tobba: rlib is .a with metadata and .bc
[13:12:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:12:16] <Tobba> ah
[13:12:25] <Tobba> wouldent that mean I cant use generics across those?
[13:12:29] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[13:12:41] *** Quits: Kambfhase (quassel@moz-1B869C11.travedsl.de) (Ping timeout)
[13:12:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:13:07] <eddyb> Tobba: metadata has the AST
[13:13:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:13:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:13:16] <Tobba> agh
[13:13:18] <Tobba> ah*
[13:13:18] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[13:13:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:13:30] <Tobba> so an rlib is what I want, but I need to make ld link against the .a inside of the .rlib
[13:13:47] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[13:13:50] <eddyb> Tobba: it is a .a!
[13:13:54] <Tobba> oh
[13:13:57] <Tobba> well then
[13:14:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:14:23] <eddyb> Tobba: I linked a rust .bc for a binary with rust .rlib's via clang
[13:14:24] <Tobba> I was actually just gonna ask if it was an a with bitcode in it or a container format with both
[13:14:29] <Tobba> neat
[13:14:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:14:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:14:36] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[13:14:37] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[13:14:44] <eddyb> well, I had to use llc for .bc -> .o because my system LLVM is older
[13:14:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:15:00] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[13:15:01] <Tobba> time for sorta cheaty DST with this too
[13:15:06] <eddyb> Tobba: .a is just an archive, we stuff .o, metadata and .bc
[13:15:11] <Tobba> (involving casting *self, offsetof and size_of)
[13:15:16] <Tobba> ah
[13:15:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:15:28] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:15:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:15:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:15:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:16:00] <Tobba> interestingly enough that actually worked even though there are unresolved imports
[13:16:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:17:02] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[13:17:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:17:52] <Tobba> and now for the fun part of figuring out a sane build system for all this crap, oh boy
[13:17:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:18:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:18:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:18:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:19:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:19:22] <judofyr> I'm getting a borrow error here: http://pastie.org/private/veoirtuog5ibkmjgj6fl8g - "cannot borrow `a` as mutable more than once at a time" (on line 19)
[13:19:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:19:42] <judofyr> any ideas how to re-structure it?
[13:19:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:19:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:19:56] <judofyr> I want to return a value pointer that's valid until the next time you call the same method
[13:20:06] <judofyr> s/value pointer/pointer/
[13:20:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:21:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:21:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:22:23] *** Joins: victorporof (victorporo@D6D20584.190AF31B.2B3D3D4.IP)
[13:22:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:23:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:23:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:23:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:23:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:24:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:24:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:24:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:25:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:25:39] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:25:48] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[13:26:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:26:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:26:19] *** Joins: squiddy (squiddy@moz-954C3009.adsl.alicedsl.de)
[13:26:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:26:28] *** Quits: heftig (heftig@moz-8FF1C6CF.dip0.t-ipconnect.de) (Quit: Quitting)
[13:26:36] *** Joins: heftig (heftig@moz-8FF1C6CF.dip0.t-ipconnect.de)
[13:26:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:27:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:27:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:27:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:28:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:28:20] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[13:28:20] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[13:28:43] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[13:28:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:29:10] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:29:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:29:37] *** Joins: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[13:30:01] <bachm> what's the plan for enum structs?
[13:30:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:30:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:30:09] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Ping timeout)
[13:30:19] <eddyb> bachm: you mean structural enum variants?
[13:30:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:30:45] <bachm> enums whose variants are structs
[13:30:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:30:56] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[13:31:06] <bachm> the compiler says they are experimental
[13:31:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:31:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:31:25] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[13:31:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:31:33] <bachm> does this mean that they might be removed?
[13:32:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:32:22] <eddyb> bachm: they aren't *structs*, they are structural/have named fields. calling them structs confuses newcomers :(
[13:32:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:33:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:33:48] <flaper87> damn, recompiling this stuff just to add a debug line is painful T_T
[13:33:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:33:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:34:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:34:26] *** Joins: PenguinDad (Mibbit@9ABEC8C3.5F42470D.16E13E53.IP)
[13:34:37] <eddyb> flaper87: go find a good TV series
[13:34:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:35:07] <flaper87> eddyb: LOL! I've a parallel project. And I make sure I compile them one at a time :P
[13:35:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:35:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:35:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:35:52] <dbaupp> bachm: there a some bugs with them, which means they are not ready for general use
[13:36:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:36:01] <dbaupp> I don't think there is any plan to remove them
[13:36:04] * dbaupp hopes they stay
[13:36:09] *** Quits: PenguinDad (Mibbit@9ABEC8C3.5F42470D.16E13E53.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:36:10] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[13:36:28] <bachm> they look useful
[13:36:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:36:47] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[13:36:49] <bachm> just the name is not ideal
[13:37:17] <dbaupp> "struct variant" seems fine to me
[13:37:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:37:33] <dbaupp> although it shouldn't be shortened to either 'struct' or 'variant'
[13:37:40] <eddyb> structural variant?
[13:37:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:37:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:37:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:38:21] <eddyb> dbaupp: I've seen people think struct Bar {...} enum Foo {Bar, Baz} was somehow equivalent to enum Foo {Bar {...}, Baz}
[13:38:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:39:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:39:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:39:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:39:14] <dbaupp> eddyb: yes, it's common
[13:39:21] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[13:39:25] <dbaupp> people do it in Haskell too
[13:39:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:39:59] <glaebhoerl> eddyb, dbaupp: to attempt to clarify what I was rambling about yesterday: we can consider Sub to be a "true subtype" of Super (Sub <: Super) if we can freely substitute Super for Sub in any covariant context (vice versa in a contravariant one). i.e. from any Foo<Sub> where Foo is covariant, we should be able to get Foo<Super>. if the in-memory representation of Sub is valid as-is as an instance of Super, then this is trivial: we can 
[13:40:01] <glaebhoerl> just transmute.
[13:40:13] <dbaupp> and it's not something fundamental to structs: people write `enum Foo { int, f64} etc. too
[13:40:16] * dbaupp reads
[13:40:19] <glaebhoerl> in other words Sub <: Super => Foo<Sub> <: Foo<Super>
[13:40:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:40:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:40:34] <eddyb> glaebhoerl: we have something like that for DST
[13:40:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:40:36] <glaebhoerl> but given `trait C: A + B`, using Sub = &C and Super = &B, this doesn't hold, because to get an &B from &C we have to do a manual fix-up of the vtable pointer
[13:40:56] <eddyb> traits aren't data, you theory doesn't apply to them
[13:40:57] <glaebhoerl> so it's not clear that we can get Foo<&B> from Foo<&C> for any covariant Foo, and in turn that we can consider &C to be a true subtype of &B.
[13:41:03] <eddyb> it does apply to DSTs
[13:41:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:41:34] <eddyb> where Foo<[T, ..N]> can be coerced to Foo<[T]> and Foo<T> to Foo<Trait>, under certain conditions
[13:41:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:41:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:41:43] *** Joins: mib_gw2zlh (Mibbit@moz-BDC342E6.lightspeed.sntcca.sbcglobal.net)
[13:41:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:42:03] <dbaupp> glaebhoerl: the fact that the vtable has to change seems to imply it's impossible for C to be a true subtype of B
[13:42:03] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[13:42:04] *** Joins: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[13:42:06] <eddyb> (though it involves adding dynamic information, like a size or a vtable *outside* of Foo, so I'm not sure it's exactly the same thing)
[13:42:20] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:42:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:42:43] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[13:42:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:43:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:43:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:43:22] *** Quits: hays (quassel@moz-C6F02E4E.washdc.east.verizon.net) (Ping timeout)
[13:43:23] <glaebhoerl> dbaupp: yep (or rather &C of &B because C and B themselves aren't types, but yeah). and that's what I'm sad about. :)
[13:43:24] <dbaupp> eddyb: the subtyping relation glaebhoerl is describing is "is transmute::<X, Y>(some_x_value) always a valid Y?"
[13:43:24] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[13:43:36] <adridu59> if I write HashMap::new(), does it yield a heap ptr?
[13:43:39] <dbaupp> (is that correct?)
[13:43:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:43:48] <eddyb> dbaupp: except traits aren't just data
[13:43:51] <glaebhoerl> dbaupp: yep, basically
[13:43:57] <dbaupp> eddyb: trait objects are
[13:44:03] <dbaupp> adridu59: did you check the source :)
[13:44:08] *** Joins: hays (quassel@moz-BF63D295.washdc.east.verizon.net)
[13:44:11] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[13:44:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:44:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:44:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:44:32] <eddyb> dbaupp: they are data + vtable
[13:44:41] <dbaupp> eddyb: that's "data"
[13:44:48] <adridu59> it has a Vec element in the heap and the rest on the stack?
[13:44:49] <glaebhoerl> eddyb: DSTs are similar in that Foo<Trait> also is not a true subtype of Foo<T>, just an automatic coercion
[13:44:50] <dbaupp> you're introspecting :P
[13:45:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:45:06] *** Quits: mib_gw2zlh (Mibbit@moz-BDC342E6.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:45:21] <dbaupp> adridu59: all it's fields are stored unboxed, but Vec contains a pointer to a heap-allocated block of memory
[13:45:28] <adridu59> so if I want to pass an HashMap to a function I would just use ~hmap?
[13:45:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:45:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:45:38] <dbaupp> erm
[13:45:38] <dbaupp> no
[13:45:42] <eddyb> glaebhoerl: I don't even understand where you're going with this
[13:45:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:45:49] <dbaupp> just `hmap` is perfectly fine
[13:46:10] <dbaupp> you very rarely need to `~` prefix things
[13:46:12] <eddyb> trait multiple inheritance has nothing to do with data
[13:46:18] *** Quits: hays (quassel@moz-BF63D295.washdc.east.verizon.net) (Ping timeout)
[13:46:18] <adridu59> if I want to box it
[13:46:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:46:28] <dbaupp> yes, but why do you want to box it?
[13:46:34] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[13:46:35] <adridu59> in case it's huge
[13:46:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:46:51] <eddyb> adridu59: HashMap has ~[...] inside
[13:46:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:46:55] <eddyb> it's probably a couple pointers
[13:47:00] <dbaupp> the unboxed part of the hashmap is fixed size
[13:47:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:47:02] <dbaupp> eddyb: (it's vec_ng now)
[13:47:14] <eddyb> oh, right
[13:47:21] <adridu59> ~[] is too slow?
[13:47:24] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Client exited)
[13:47:25] <glaebhoerl> eddyb: anyway, so you have `trait C: A + B`. tell me how, given an *arbitrary* generic type `Foo<T>`, where `Foo` is covariant in `T`, you will get from `Foo<&C>` to `Foo<&B>`.
[13:47:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:47:49] <glaebhoerl> that's the practical issue here: can we do that?
[13:47:50] <eddyb> glaebhoerl: you can get from Foo<C> to Foo<B>
[13:47:54] <dbaupp> adridu59: no, vec_ng is faster
[13:48:03] *** Joins: hays (quassel@moz-AC7F642A.washdc.east.verizon.net)
[13:48:04] <dbaupp> eddyb: that's not the question you were asked :P
[13:48:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:48:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:48:14] <eddyb> dbaupp: the question is... ridiculous
[13:48:21] <dbaupp> no it's not
[13:48:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:48:34] <eddyb> wait, no
[13:48:39] <dbaupp> we're talking about trait objects and inheritance; not DST.
[13:48:49] <eddyb> dbaupp: I was going to make an analogy, but DST makes the analogy possible
[13:48:55] <eddyb> *sigh*
[13:48:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:49:03] <dbaupp> they're similar and related, but this subtyping is not fixed by DST
[13:49:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:49:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:49:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:49:53] <dbaupp> adridu59: (by, ~[] is not too slow, I mean "~[] is fast enough, but vec_ng is (much) faster")
[13:50:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:50:29] <eddyb> glaebhoerl: Foo<C> -> Foo<B> has pretty much the same rules as Foo<T> -> Foo<Trait> has, in DST5
[13:50:29] <adridu59> yup
[13:50:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:50:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:50:46] <eddyb> glaebhoerl: which means Foo<&C> -> Foo<&B> might actually sometimes be possible
[13:50:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:51:01] *** Joins: rca_ (rcatolino@moz-D690CDA.adsl.proxad.net)
[13:51:11] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:51:27] <eddyb> though it actually has less limitations
[13:51:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:51:39] *** Quits: rca (rcatolino@moz-585FE07D.adsl.proxad.net) (Ping timeout)
[13:51:39] <glaebhoerl> eddyb: I assume you're familiar with Niko's proposal for single inheritance of structs? If you are, given `struct SB: SA { ... }`, going from `Foo<&SB>` to `Foo<&SA>` *is* always possible, because &Sub is safe to transmute to &Super
[13:51:57] <eddyb> glaebhoerl: I think the question you should be asking is about &Foo<C> and &Foo<B> not Foo<&C> and Foo<&B>
[13:52:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:52:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:52:08] <dbaupp> eddyb: no
[13:52:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:52:24] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: WeeChat 0.3.8)
[13:52:30] <eddyb> that is, "can you reuse a reference to Sub as a reference to Super?"
[13:52:36] <glaebhoerl> eddyb: no, I'm asking whether a trait object of a given trait counts as a subtype of a trait object of one of its supertraits
[13:52:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:53:06] <glaebhoerl> and reaching the saddening conclusion that apparently no
[13:53:14] <eddyb> well, because there's no DST, let's settle on &Foo<&C> -> &Foo<&C>
[13:53:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:53:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:53:23] <dbaupp> we can do it for the first supertrait
[13:53:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:53:34] <dbaupp> single inheritance of trait objects, or something.
[13:53:40] <glaebhoerl> dbaupp: yeah
[13:53:46] <eddyb> I don't like that
[13:53:50] <eddyb> multiple or nothing
[13:53:54] <glaebhoerl> but having to introduce that distinction is also kinda unfortunate
[13:54:01] <glaebhoerl> because it seemed like the whole traits thing had liberated us from it
[13:54:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:54:09] <dbaupp> (and we can do it in general when we have direct access to the trait object)
[13:54:15] <eddyb> glaebhoerl: why do you need subtyping anyway?
[13:54:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:54:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:54:43] <eddyb> Rc<RefCell<C>> -> Rc<RefCell<B>> should be possible under DST
[13:54:47] <dbaupp> glaebhoerl: do you know if Haskell with existentials does any form of subtyping like this?
[13:54:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:55:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:55:23] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[13:55:31] <glaebhoerl> dbaupp: Haskell explicitly doesn't have subtyping at all, which AFAICT is why it doesn't encounter these issues
[13:55:31] <bvssvni> how do I declare an argument as &'a 'static?
[13:55:43] *** Quits: hays (quassel@moz-AC7F642A.washdc.east.verizon.net) (Ping timeout)
[13:55:50] <eddyb> bvssvni: you do know that's impossible, right?
[13:56:02] <eddyb> bvssvni: how could something be 'a and 'static at the same time?
[13:56:02] <bvssvni> eddyb: why?
[13:56:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:56:06] <glaebhoerl> i.e. in Haskell covariance/contravariance of type variables isn't a thing
[13:56:17] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Client exited)
[13:56:40] <dbaupp> glaebhoerl: even for `class Foo a => Bar a`?
[13:56:41] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[13:56:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:56:45] <bvssvni> eddyb: I try to rewrite 'as_ref' for Any as a static function
[13:56:55] <bvssvni> eddyb: to see if I can understand what is going on
[13:57:10] <eddyb> bvssvni: so what does 'static have to do with static functions?
[13:57:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:57:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:57:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:57:29] <dbaupp> (with `forall a. Bar a => a`, or whatever the syntax is.)
[13:57:29] <bvssvni> eddyb: no, but Any is implemented for 'static types
[13:57:43] <eddyb> bvssvni: you mean <T: 'static>?
[13:57:49] <bvssvni> eddyb: yes
[13:57:49] <eddyb> bvssvni: that's a kind, not a lifetime
[13:57:50] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Connection reset by peer)
[13:57:56] *** Joins: hays (quassel@moz-5AECE958.washdc.east.verizon.net)
[13:57:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:58:01] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[13:58:02] <eddyb> which is totally confusing
[13:58:23] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[13:58:23] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Connection reset by peer)
[13:58:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:58:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:58:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:58:45] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[13:58:51] <eddyb> bvssvni: why a static method? the only reason those Ext traits exist is to allow calling generic methods on &Any
[13:59:12] <bvssvni> eddyb: I want to understand how Rust deals with traits in such cases
[13:59:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:59:24] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[13:59:28] <bvssvni> eddyb: learn more about the type system
[13:59:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:59:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[13:59:51] <bvssvni> eddyb: so it can't be written as a static method?
[13:59:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:59:56] <eddyb> bvssvni: it can
[13:59:58] <glaebhoerl> dbaupp: well Haskell doesn't have first class existentials _either_, but using universals instead, you _can_ go from `forall a. Foo a => a` to `forall a. Bar a => a` (here they're in a contravariant position, so the direction is reversed)
[14:00:06] <eddyb> bvssvni: substitute self for Entity
[14:00:21] <eddyb> bvssvni: well, &'a Entity
[14:00:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:00:37] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Ping timeout)
[14:00:51] <bvssvni> eddyb: wow, it worked
[14:00:52] <glaebhoerl> but this is like going from &Sub to &Super in Rust, where they're not embedded in another type
[14:01:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:01:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:01:13] <eddyb> glaebhoerl: do you want the subtyping nonsense in Rust?
[14:01:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:01:30] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[14:01:45] <eddyb> what I'm asking for is the ability to use a trait object as a supertrait
[14:01:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:02:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:02:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:02:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:02:52] <glaebhoerl> if you start talking about `Quux Bar` and `Quux Foo`, or `Quux (forall a. Bar a => a)` and `Quux (forall a. Foo a => a)`, it no longer works because Haskell doesn't have subtyping and covariance as a thing (all type variables are invariant, I guess)
[14:03:01] <bvssvni> eddyb: so is it possible to call TypeId::of with &'a Entity?
[14:03:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:03:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:03:25] <eddyb> bvssvni: you call TypeId::of::<T> with T being the type you want to *get*
[14:03:34] <bvssvni> eddyb: the compiler complains it does not fulfill 'static
[14:03:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:03:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:03:47] <eddyb> bvssvni: gist your code
[14:03:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:03:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:04:06] <eddyb> because I'm not sure where you put <T>, so I can't know where to tell you to add : 'static
[14:04:21] <dbaupp> glaebhoerl: ah, makes sense
[14:04:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:04:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:04:46] <Yurume> error: Package sqlite3 depends on extra, but I don't know how to find it
[14:04:50] <Yurume> what, was that possible? 
[14:05:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:05:13] <bvssvni> eddyb: https://gist.github.com/bvssvni/8633182
[14:05:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:05:57] <bvssvni> eddyb: sorry, forgot paranthesis
[14:06:03] <eddyb> bvssvni: so what you're doing here: TypeId::of::<T>() == TypeId::of::<&'a Entity>
[14:06:07] <eddyb> bvssvni: that's totally bogus
[14:06:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:06:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:06:19] <eddyb> bvssvni: it would work with TypeId::of::<T>() == TypeId::of::<&'static Entity>
[14:06:31] <eddyb> bvssvni: but can you guess for which T that expression would be true?
[14:06:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:06:36] <glaebhoerl> eddyb: we already have subtyping wrt lifetimes, and we'll probably be getting it for structs, so it would be nice to have it for trait objects as well. but anyway, you'll be able to use &SubTrait as &SuperTrait if that's all you want, it's only Foo<&SubTrait> as Foo<&SuperTrait> that seems difficult
[14:06:42] <bvssvni> eddyb: :)
[14:06:46] <bvssvni> eddyb: it works!
[14:06:56] <eddyb> bvssvni: answer to me (hint: the code is wrong)
[14:07:01] *** Joins: Orwin (Adium@E4A6FCF8.AC80DA87.CC73C50D.IP)
[14:07:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:07:27] <eddyb> bvssvni: that just checks that two types are the same. that is, it will only return true for T = &'static Entity
[14:07:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:07:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:07:40] <bvssvni> eddyb: https://gist.github.com/bvssvni/8633182
[14:07:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:08:04] <bvssvni> eddyb: I have problems understanding what is happening here
[14:08:05] <eddyb> bvssvni: that's a static type comparison
[14:08:13] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[14:08:14] <eddyb> bvssvni: there is nothing dynamic about it, and it doesn't use Any
[14:08:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:08:22] <eddyb> well, apart from as_void_ptr which is a noop
[14:08:25] <bvssvni> eddyb: is &'static Entity referring to the type?
[14:08:34] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[14:08:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:08:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:08:57] <eddyb> bvssvni: TypeId::of::<&'static Entity>() is an unique 64bit ID corresponding to &Entity, basically
[14:09:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:09:12] <eddyb> bvssvni: it will only be equal to TypeId::of::<&'static Entity>()
[14:09:17] *** Joins: nical (nico@moz-7EE986F9.fbx.proxad.net)
[14:09:24] <glaebhoerl> dbaupp: (I have the morbid impulse to check out how virtual inheritance works in C++, to see whether that mightn't be relevant... but given that C++ doesn't have variances either, it's probably solving a different problem)
[14:09:32] <bvssvni> eddyb: ah, now I get it
[14:09:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:09:40] <eddyb> bvssvni: which is useless, there's no point in casting &Entity to &&Entity
[14:09:59] <eddyb> glaebhoerl: why do we even want single struct inheritance?
[14:10:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:10:12] <eddyb> single sucks
[14:10:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:10:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:10:45] <bvssvni> eddyb: what do you mean about casting to &&Entity?
[14:10:51] <glaebhoerl> eddyb: well Servo wants it
[14:10:52] <eddyb> bvssvni: your code is broken
[14:10:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:11:04] <eddyb> glaebhoerl: I want to see some serious reasoning
[14:11:05] <glaebhoerl> details were in Niko's blog post, can't immediately recall
[14:11:23] <eddyb> AFAIK, what they want is easy to do with &foo.super
[14:11:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:11:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:11:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:11:50] <bvssvni> eddyb: yeah, it should print out the name
[14:12:14] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[14:12:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:12:16] <eddyb> bvssvni: the original code does something different
[14:12:17] * bvssvni is confused
[14:12:23] <glaebhoerl> eddyb: http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/
[14:12:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:12:41] <eddyb> bvssvni: it calls a virtual Any method https://github.com/mozilla/rust/blob/master/src/libstd/any.rs#L87
[14:12:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:12:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:12:58] <nical> hi there, what would be the workflow to build libextra (without rebuilding all of rustc)?
[14:12:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:13:00] <eddyb> bvssvni: to get the TypeId of the type inside the trait object
[14:13:17] <Orwin> Hi there, im a student, and i have a few question on rust. First: did i HAVE to use unsafe for doubly-linked list?
[14:13:32] <eddyb> Orwin: you can also use Rc/Weak
[14:13:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:14:02] <bvssvni> eddyb: I was wondering how the compiler infers the information
[14:14:03] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[14:14:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:14:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:14:09] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:14:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:14:17] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:14:20] <eddyb> bvssvni: the compiler doesn't infer anything
[14:14:26] <eddyb> bvssvni: it's just regular traits
[14:14:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:14:59] <eddyb> bvssvni: get_type_id called on &Any is a *virtual* call
[14:15:14] <bvssvni> eddyb: ah, so typeid of &'static is not equals to typeid of Player
[14:15:20] *** Joins: Ferreus (ferreus@moz-B91E8273.pools.arcor-ip.net)
[14:15:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:15:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:15:24] <eddyb> bvssvni: forget 'static
[14:15:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:15:45] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[14:15:46] <eddyb> that's just there so lifetimes don't randomize the TypeId's, I think
[14:15:50] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:16:00] <nical> eddyb: Rc uses unsafe
[14:16:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:16:15] <eddyb> nical: internally
[14:16:28] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Connection reset by peer)
[14:16:51] <Orwin> Okay, thanks. Can i use the ncurse lib the same way i use it in C?
[14:16:52] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:17:14] <eddyb> Orwin: you have to write a thin wrapper for it
[14:17:23] <Orwin> Oh, okay
[14:17:25] <eddyb> I think there's a ncurses-rs and rust-term around
[14:17:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:17:28] <Orwin> Thanks a lot
[14:17:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:18:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:18:06] *** Joins: judofyr (judofyr@77444CA6.26D37221.7A561A2D.IP)
[14:18:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:18:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:19:05] <bvssvni> eddyb: what types is not of kind 'static?
[14:19:12] <bvssvni> *are
[14:19:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:19:16] <eddyb> bvssvni: ignore that
[14:19:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:19:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:19:35] <eddyb> bvssvni: that's probably there so it doesn't think &'a T and &'b T are different. ignore it
[14:19:36] <bvssvni> eddyb: well, the code is working now with get_type_id
[14:19:36] *** Quits: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[14:19:41] <eddyb> bvssvni: yes, that's the magic
[14:19:56] <bvssvni> eddyb: but I want to learn about the details :D
[14:20:01] <eddyb> bvssvni: okay, so
[14:20:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:20:32] <eddyb> bvssvni: Any is implemented for all types https://github.com/mozilla/rust/blob/master/src/libstd/any.rs#L48-L63
[14:20:39] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[14:20:59] <eddyb> bvssvni: when you cast &uint to &Any, you now have a trait object &Any, ok?
[14:21:14] <bvssvni> eddyb: ok
[14:21:25] <eddyb> bvssvni: when you call get_type_id on that, it goes through a vtable and indirectly calls the right method, that is, the one for uint
[14:21:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:21:52] <eddyb> bvssvni: &Trait is two pointers, one to the vtable and one to the data
[14:21:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:21:58] <dbaupp> eddyb: re servo and single inheritance: the people working on servo generally know what's what, so if foo.super had a reasonable change of working, I'm sure they'd've tried it
[14:22:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:22:09] <eddyb> "working"?
[14:22:15] <eddyb> dbaupp: how would that not... work?
[14:22:32] <dbaupp> eddyb: they have trait objects
[14:22:41] <dbaupp> &Node where Node is a triat
[14:22:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:22:44] <bvssvni> eddyb: is there somewhere to read more about this?
[14:22:49] <eddyb> I thought the single inheritance was for structs
[14:22:54] <dbaupp> and structs
[14:22:57] <eddyb> where it's noop
[14:22:58] <dbaupp> (raits
[14:23:01] <dbaupp> *traits
[14:23:06] <dbaupp> read the blog post
[14:23:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:23:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:23:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:23:43] *** Parts: Orwin (Adium@E4A6FCF8.AC80DA87.CC73C50D.IP) ()
[14:23:46] <eddyb> dbaupp: remind me to not listen to hearsay *ahemkimundiahem*
[14:23:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:24:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:24:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:24:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:24:38] <dbaupp> glaebhoerl: I know nothing about the inner workings of C++ inheritance... but, as you say, without variances I imagine they've got a different situation
[14:24:55] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[14:25:12] <eddyb> dbaupp: so it's like virtual field access but deterministic?
[14:25:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:25:26] <dbaupp> eddyb: virtual field access is deterministic?
[14:25:35] <dbaupp> it's like virtual field access but static
[14:25:40] <eddyb> that's what I mean
[14:25:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:25:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:25:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:25:50] <eddyb> s/deterministic/statically resolved
[14:25:53] <dbaupp> fixed offset, dispite polymorphism.
[14:25:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:26:02] <dbaupp> *despite
[14:26:30] <eddyb> dbaupp: okay, so they have a header on all implementers of a trait
[14:26:31] *** Quits: judofyr (judofyr@77444CA6.26D37221.7A561A2D.IP) (Connection reset by peer)
[14:26:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:26:39] <eddyb> there has to be a saner way of doing this
[14:26:46] *** Joins: judofyr (judofyr@77444CA6.26D37221.7A561A2D.IP)
[14:27:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:27:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:27:05] <glaebhoerl> where do you see headers?
[14:27:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:27:37] <eddyb> glaebhoerl: NodeFields
[14:27:42] *** Joins: gwty (gwtypc@77155052.CFFB58E3.27560D6E.IP)
[14:27:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:27:59] *** Joins: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net)
[14:28:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:28:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:28:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:29:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:29:21] <glaebhoerl> eddyb: not quite, I think: what that means is that only types which inherit NodeFields are allowed to impl Node
[14:29:34] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[14:29:35] <glaebhoerl> so you know statically that if it impls Node, it must be a substruct of NodeFields
[14:29:45] <eddyb> for me, it looks like an optimized special case of virtual field access, which I don't really want in the general case anyway. hmpf
[14:29:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:30:14] <dbaupp> eddyb: that's exactly what it is
[14:30:23] <glaebhoerl> you can also view virtual field access as a workaround for not having this... :)
[14:30:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:30:55] <eddyb> so how about... virtual field access that you can restrain to fixed positions?
[14:30:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:30:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:31:07] <eddyb> and then it stops being virtual
[14:31:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:31:40] <dbaupp> and what better way to keep things in fixed positions and define a memory layout than... a struct! :P
[14:31:43] <eddyb> we don't really need virtual at all. we could only allow dynamic access if the layout is fixed
[14:31:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:31:59] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[14:32:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:32:14] <eddyb> dbaupp: the difference is that you don't have single inheritance
[14:32:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:32:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:32:29] <eddyb> you have fields in traits with optional fixed layout
[14:33:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:33:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:34:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:34:40] <eddyb> multiple trait inheritance would only work with fixed layout if they overlap
[14:34:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:34:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:35:01] <eddyb> but it would work just fine with flexible layout fields, with or without virtual field access
[14:35:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:35:06] <eddyb> glaebhoerl: any objections?
[14:35:16] <eddyb> (I'm not sure on the syntax yet)
[14:35:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:36:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:36:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:36:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:36:52] <glaebhoerl> eddyb: what's a flexible layout field?
[14:36:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:37:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:37:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:37:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:37:46] <eddyb> glaebhoerl: a named, typed field that you can access through a trait
[14:38:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:38:52] <glaebhoerl> eddyb: if I'm understanding you right, this seems broader in scope than the SI proposal
[14:38:59] <eddyb> glaebhoerl: as opposed to fixed layout, in which that field has to be either at the start of the struct, or immediately after another fixed layout field
[14:38:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:39:07] *** Joins: int3_ (int3_@moz-BA9A8211.public.wayport.net)
[14:39:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:39:35] <eddyb> glaebhoerl: yes, which makes it not as restricted and *restrictive* as single inheritance, while solving the original problem
[14:40:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:40:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:40:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:40:26] <glaebhoerl> eddyb: what's an example of something useful you could do with this and not SI?
[14:40:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:41:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:41:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:41:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:41:53] <eddyb> glaebhoerl: well, everything that has to do with named fields in traits
[14:42:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:42:12] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[14:42:14] *** Quits: nical (nico@moz-7EE986F9.fbx.proxad.net) (Ping timeout)
[14:42:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:43:05] <eddyb> which is akin to multiple inheritance, but without all the problems
[14:43:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:43:39] <glaebhoerl> eddyb: what could you express using it that you couldn't express with the combination of struct single inheritance (for fields with static offsets) and virtual accessor methods (for fields with dynamic offsets)?
[14:43:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:43:56] <glaebhoerl> (or what other advantage would it have)
[14:43:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:44:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:44:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:45:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:45:29] <glaebhoerl> (note these are attempts at understanding, not counterarguments)
[14:46:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:46:09] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[14:46:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:46:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:46:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:47:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:47:21] *** Quits: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com) (Ping timeout)
[14:47:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:47:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:48:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:48:29] <eddyb> glaebhoerl: you don't need to implement accessors with this
[14:48:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:48:58] <eddyb> and it doesn't involve nonsense like *self.mut_field() = value;
[14:49:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:49:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:49:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:49:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:50:08] <glaebhoerl> eddyb: alright, I can see that. is that all (is it purely ergonomic)?
[14:50:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:50:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[14:51:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:51:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:51:13] *** Joins: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP)
[14:51:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:51:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:51:47] <eddyb> glaebhoerl: well, DRY is a nice thing. and it scales better. anyways, I'm just afraid of SI because it's annoying to use in typed languages
[14:51:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:52:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:52:48] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:53:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:53:15] <eddyb> in weakly-or-not-really-typed-at-all languages, you can screw inheritance and implement even typeclasses/traits if you want to
[14:53:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:54:14] <eddyb> something like ActionScript is bad at this, because it has the prototypal SI model of ES but it tries to enforce types
[14:54:14] *** Quits: judofyr (judofyr@77444CA6.26D37221.7A561A2D.IP) (Connection reset by peer)
[14:54:21] *** Quits: alonlevy_ (alon@moz-87959726.redhat.com) (Ping timeout)
[14:54:24] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[14:54:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:54:40] <eddyb> anyways, I'm just rambling now
[14:54:49] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:55:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:55:59] <glaebhoerl> DRY is definitely nice. my concern is that this is brushing up against the idea of a records system (or whatever they're called) (like TRex), or is one outright, which is a highly nontrivial design space from what I know of it
[14:56:08] <glaebhoerl> whereas SI is fairly straightforward and well understood
[14:56:30] <glaebhoerl> but I'd have to be more familiar with the territory and think about it harder to be able to offer specific objections (or their absence)
[14:56:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:56:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:56:58] <eddyb> and I have to learn more type theory :)
[14:57:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:57:24] <glaebhoerl> someone had a proposal very similar to yours (might've even been you?) around the time this SI proposal was discussed, but I can't remember where or what the response was (I might've commented the same thing I did just now, but besides that)
[14:57:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:57:54] <eddyb> glaebhoerl: I somehow doubt the "fixed position fields" was mentioned before (no, it wasn't me)
[14:58:03] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:58:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:58:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:58:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:58:36] <dbaupp> eddyb: why do you doubt it was mentioned before?
[14:58:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:58:37] <glaebhoerl> eddyb: I dunno if fixed position was part of it, but it definitely had the traits with struct fields in em aspect
[14:59:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:59:13] <eddyb> glaebhoerl: though one way to do it is number the fields - like in capn proto or whatever it's called
[14:59:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:59:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[14:59:35] <eddyb> dbaupp: because I'm not the first one to mention fields in traits, and I've seen some of the proposals, I think
[14:59:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[14:59:51] <glaebhoerl> eddyb: btw, what typed languages are your negative experiences with SI from?
[15:00:07] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[15:00:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:00:22] <eddyb> glaebhoerl: I know ActionScript was bad
[15:00:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:00:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:00:56] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:01:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:01:03] <eddyb> Java only has SI as well, but I haven't worked much in it (has way bigger issues)
[15:01:14] <Matthias247> actionscript3? It's basically the same as Java and C#
[15:01:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:02:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:02:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:02:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:02:17] <glaebhoerl> yeah I was going to say, if Java were all I had to go by I would have a negative impression not just of single inheritance, but static types, or programming itself :)
[15:02:18] *** Joins: oberstet (quassel@moz-B7587E6C.dynamic.mnet-online.de)
[15:02:36] *** Joins: gud4nothi (gud4nothin@moz-8174818F.bbtec.net)
[15:02:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:03:18] <glaebhoerl> but I've never tried using an otherwise-non-sucky language with SI in it so I can't really tell if the feature itself has issues
[15:03:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:03:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:03:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:03:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:03:38] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[15:03:39] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[15:04:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:04:52] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:05:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:05:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:05:37] *** Quits: Earnestly (earnest@D966D76B.1ED7F176.BFD1ABFD.IP) (Ping timeout)
[15:06:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:06:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:06:48] *** Joins: jarekps (jarekps@moz-B87F5828.neoplus.adsl.tpnet.pl)
[15:07:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:07:16] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:07:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:08:01] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:08:10] <pzol> why ??? impl Index<(int, int), ~str> for ~str {fn index(&self, index: &(int, int)) -> ~str {~""} }  => error: cannot provide an extension implementation where both trait and type are not defined in this crate
[15:08:11] <pzol>  ??
[15:08:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:08:51] <eddyb> pzol: you need to "own" either the trait or the type
[15:08:55] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[15:08:58] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:09:17] <bvssvni> pzof: because of scope issues
[15:09:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:09:24] <bvssvni> pzol: ^
[15:09:32] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:09:38] <pzol> sooo I can't implement Index on ~str??
[15:09:44] <pzol> ever?
[15:09:48] <eddyb> pzol: no
[15:09:58] <eddyb> pzol: what are you trying to do, anyway?
[15:10:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:10:11] <eddyb> I mean, what are the two indexes for?
[15:10:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:10:45] <pzol> want to do something like let name = ~"Bilbo Baggins"; let first = name[0, 5] 
[15:10:55] <eddyb> pzol: to slice?
[15:11:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:11:08] <pzol> yeah, with []
[15:11:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:11:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:11:31] <eddyb> pzol: first of all, you should implement it on &'a str and return &'a str, so it's not a waste of memory
[15:11:40] <pzol> basicly name.slice(0, 5)
[15:11:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:11:59] <eddyb> pzol: second of all, it's actually a bit sad, but that's how it is now
[15:12:12] <bvssvni> pzol: if you use a tuple struct, you can have 'let first = name[Slice(0, 5)]'
[15:12:18] <eddyb> the reasoning is so you can't have two crates with conflicting implementations
[15:12:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:12:27] <eddyb> bvssvni: would that work? I somehow doubt it
[15:12:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:12:35] *** Joins: sluggo (Mibbit@moz-E02EA2F2.hsi.kabel-badenwuerttemberg.de)
[15:12:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:12:50] <bachm> how do I add one of these # thingies to a crate attribute?
[15:13:03] <bvssvni> if the tuple struct is owned?
[15:13:03] <eddyb> rusti: struct Slice(uint, uint); impl Index<Slice, ~str> for ~str {fn index(&self, index: &Slice)) -> ~str {~""} }
[15:13:07] -rusti- pastebinned 7 lines of output: http://ix.io/a8l
[15:13:14] <bvssvni> bachm: with a ';' at the end
[15:13:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:13:17] <eddyb> rusti: struct Slice(uint, uint); impl Index<Slice, ~str> for ~str {fn index(&self, index: &Slice) -> ~str {~""} }
[15:13:17] -rusti- <anon>:10:35: 10:115 error: cannot provide an extension implementation where both trait and type are not defined in this crate
[15:13:18] -rusti- <anon>:10         struct Slice(uint, uint); impl Index<Slice, ~str> for ~str {fn index(&self, index: &Slice) -> ~str {~""} }
[15:13:18] -rusti-                                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[15:13:18] -rusti- error: aborting due to previous error
[15:13:19] -rusti- application terminated with error code 101
[15:13:29] <eddyb> bvssvni: it doesn't care about type params to the trait
[15:13:38] <bvssvni> eddyb: oh
[15:13:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:13:49] <eddyb> pzol: I think this could be relaxed
[15:13:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:13:50] *** Quits: sluggo (Mibbit@moz-E02EA2F2.hsi.kabel-badenwuerttemberg.de) (Quit: http://www.mibbit.com ajax IRC Client)
[15:14:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:14:04] <eddyb> pzol: btw, right now you would have to use it as name[(0, 5)]
[15:14:09] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[15:14:30] <eddyb> one of my thoughts is to allow a..b as syntax sugar for range(a, b) or range_inclusive(a, b)
[15:14:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:14:37] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:14:41] <eddyb> so you could then do name[a..b] if it were implemented in libstd
[15:14:48] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[15:15:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:15:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:15:10] <eddyb> (but that's unrelated to implementing traits in a different crate)
[15:15:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:15:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:15:59] <pzol> eddyb, that would be great!
[15:16:09] <bvssvni> so it is possible to have Slice(0, 5)[~"Bilbo Baggings"] :)
[15:16:14] <bachm> eddyb that sounds nice
[15:16:18] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:16:26] <bvssvni> haha
[15:16:30] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[15:16:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:16:40] <bachm> and a...b for range_inclusive(a,b)
[15:16:57] <eddyb> bvssvni: so we have the silliness of pointer arithmetic from C
[15:17:07] <eddyb> (where 5[v] == v[5])
[15:17:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:17:12] <eddyb> but it's user-configurable!
[15:17:24] <bvssvni> now in generic version!
[15:17:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:17:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:17:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:18:09] <eddyb> bachm: sounds... decent :)
[15:18:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:18:57] <bvssvni> a..b or a...b
[15:18:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:19:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:19:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:19:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:20:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:20:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:20:21] <pzol> a..b would be awesome!!
[15:20:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:21:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:21:09] <glaebhoerl> there's an issue for this btw :)
[15:21:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:21:55] <glaebhoerl> https://github.com/mozilla/rust/issues/4160
[15:22:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:22:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:22:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:23:05] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:23:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:24:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:24:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:24:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:24:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:25:23] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:25:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:25:49] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:26:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:26:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:26:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:26:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:27:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:28:08] <eddyb> glaebhoerl: interesting https://github.com/mozilla/rust/issues/4160#issuecomment-28909198
[15:28:08] *** Joins: Rui (rui@92E774E7.DCB97FF6.4F142960.IP)
[15:28:46] <eddyb> glaebhoerl: though a..b for range(a, b) is more flexible, and using it for slicing is just a bonus
[15:29:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:29:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:29:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:29:42] *** Quits: leslie (Adium@6A5D6884.8653F9EB.1795BCC4.IP) (Quit: Leaving.)
[15:30:04] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:30:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:30:51] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[15:30:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:31:02] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[15:31:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:31:58] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:32:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:32:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:32:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:32:49] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[15:33:10] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[15:33:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:34:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:34:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:34:50] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[15:34:53] <Yurume> where did TaskBuilder::supervised() go?
[15:35:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:35:46] <dbaupp> Yurume: we don't have a concept of linked failure any more
[15:36:05] <Yurume> so it's default and not switchable, right?
[15:36:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:36:18] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:36:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:37:07] <dbaupp> I think we default to what was 'unlinked'
[15:37:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:37:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:37:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:37:31] <Yurume> hmm
[15:37:35] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:38:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:38:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:38:30] <Yurume> dbaupp, is watched() comparable to the old supervised() then?
[15:38:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:38:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:39:10] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[15:39:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:39:18] <Yurume> since `supervised()` does not propagate the child's failure into the parent (as like `unlinked()`) but it does propagate the parent's failure into the children
[15:39:44] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:39:44] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[15:40:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:40:20] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Client exited)
[15:40:33] <dbaupp> no idea
[15:40:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:40:39] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:40:48] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[15:40:51] <dbaupp> sorry
[15:41:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:41:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:41:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:41:36] <Yurume> I feel the conversion from 0.8 to 0.10-pre (that's what I'm doing right now, I have one final project which is also the biggest) is much harder than that from 0.7 to 0.8
[15:41:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:41:57] <Yurume> thanks to the big breaking changes
[15:42:14] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[15:42:28] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[15:42:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:43:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:43:29] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[15:43:30] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:43:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:43:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:43:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:44:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:44:32] *** Joins: marianoguerra (marianogue@moz-46CE4B2B.dip0.t-ipconnect.de)
[15:44:53] <pzol> eeee is there a fn to convert a string to lowercase?? besides the ascii stuff?
[15:45:20] <Yurume> Unicode toLowerCase() function? that's not yet implemented AFAIK.
[15:45:42] <glaebhoerl> btw anyone (dbaupp, eddyb) have thoughts about / criticism for my ideas wrt closures? https://mail.mozilla.org/pipermail/rust-dev/2014-January/008176.html
[15:45:46] *** Joins: Ms2ger (Ms2ger@moz-EF1E89E8.adsl-dyn.isp.belgacom.be)
[15:45:47] <pzol> Yurume wow... 
[15:45:54] <glaebhoerl> (last paragraph or two is the more interesting part)
[15:46:07] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[15:46:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:46:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:46:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:47:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:47:11] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[15:47:39] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:47:41] <eddyb> glaebhoerl: why do people refuse to use Fn<..Args, Ret>?
[15:47:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:47:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:48:00] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[15:48:00] *** ChanServ sets mode: +ao brson brson
[15:48:25] <eddyb> glaebhoerl: I don't know how I feel about all of this
[15:48:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:48:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:48:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:48:58] <glaebhoerl> eddyb: well I dunno about anyone refusing to use anything :)
[15:49:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:49:21] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:49:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:50:11] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[15:50:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:51:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:51:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:51:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:51:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:52:14] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:52:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:52:42] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[15:52:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:52:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:52:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:53:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:54:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:54:09] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:54:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:54:54] *** Joins: Matrixiumn (zack@moz-1B22AAE2.net)
[15:54:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:55:01] <pzol> hmmm how do you get the unicode length of visible characters?
[15:55:03] <Matrixiumn> Hello, I'm getting /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libstdc++.so when searching for -lstdc++
[15:55:08] <Matrixiumn> when trying to compile rust.
[15:55:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:55:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:55:35] *** Joins: Earnestly (earnest@B2D4FB72.5E5F54DA.30311652.IP)
[15:55:40] <eddyb> Matrixiumn: we're not using libstdc++ anymore, run make clean
[15:55:44] <Yurume> pzol, I think your question is not well-defined, especially due to the ambiguity on what is a character and what is not.
[15:55:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:56:10] <Yurume> tell your use cases and maybe I can help refine your question
[15:56:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:56:31] <pzol> Yurume how to get the length of human visible letters for a string?
[15:56:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:56:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:57:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:57:18] *** Quits: Earnestly (earnest@B2D4FB72.5E5F54DA.30311652.IP) (Ping timeout)
[15:57:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:57:33] <Yurume> pzol, you need to use something like https://github.com/sbillig/rust-grapheme though it is not well maintained.
[15:57:38] *** Joins: Earnestly (earnest@B2D4FB72.5E5F54DA.30311652.IP)
[15:57:45] <pzol> rusti ~"Bär".len()
[15:57:53] <pzol> rusti: ~"Bär".len()
[15:57:55] -rusti- ~4u
[15:58:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:58:04] <pzol> rusti: ~"Bär".char_len()
[15:58:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:58:05] -rusti- ~3u
[15:58:05] <Yurume> that won't work at all.
[15:58:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:58:15] <Yurume> I strongly against the name `char_len`, it is so deceiving.
[15:58:23] <pzol> duh
[15:58:33] <Yurume> it should be `codepoint_len` at least
[15:58:34] <eddyb> it's number_of_codepoints
[15:58:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:59:04] <Ms2ger> codepoints().len() :)
[15:59:10] <Florob> Well, char_len() is in line, with the char type, but indeed I'm not even sure Unicode uses the term "character" for anything…
[15:59:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:59:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[15:59:27] <Florob> Where was that i18n terms RFC...
[15:59:30] <Yurume> Florob, Go uses the term `rune` for this usage ;)
[15:59:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:59:41] <Yurume> that's the grapheme cluster.
[15:59:45] <pzol> I'm pretty sure I don't want to worry about that stuff on a daily basis when working with strings
[15:59:45] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[16:00:04] *** Quits: int3_ (int3_@moz-BA9A8211.public.wayport.net) (Client exited)
[16:00:06] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[16:00:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:00:25] <Yurume> then use `char_len` and think that as an approximation (or rather an upper bound).
[16:00:44] <Ms2ger> pzol, trouble is then your code breaks when Yurume uses it :)
[16:00:45] <eddyb> but it's O(N)
[16:00:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:00:51] *** Joins: mib_61u2u6 (Mibbit@moz-518DA4C.cable.virginm.net)
[16:00:58] <Yurume> approximation doesn't hurt, just do not take it as exact count :)
[16:01:06] *** Joins: int3_ (int3_@9A375198.26321F00.F7721B25.IP)
[16:01:07] <eddyb> pzol: sadly, Unicode doesn't make it easy
[16:01:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:01:32] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:01:46] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[16:01:48] <pzol> no I know ... but most languages live with the limitations and get it right in let's say about 98% of the cases
[16:01:50] <Florob> «There are at least three common definitions of the word "character"» - <http://tools.ietf.org/html/rfc6365>
[16:01:50] <mib_61u2u6> where in the documentation can I find out how to get the size of a vector ?
[16:02:02] <Yurume> mib_61u2u6, len()
[16:02:07] <eddyb> pzol: what do you want to use it for?
[16:02:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:02:26] <eddyb> pzol: because calling char_len() iterates the string, so it's not exactly cheap
[16:02:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:02:51] *** Quits: int3_ (int3_@9A375198.26321F00.F7721B25.IP) (Ping timeout)
[16:02:51] <Yurume> mib_61u2u6, sorry for the current status of documentation, len() is defined in the trait `Container` since a vector is a type of containers.
[16:03:01] <Yurume> i.e. http://static.rust-lang.org/doc/master/std/container/trait.Container.html
[16:03:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:03:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:03:24] <Yurume> and still others (e.g. slice() and mut_slice()) are in the trait ImmutableVector: http://static.rust-lang.org/doc/master/std/vec/trait.ImmutableVector.html
[16:03:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:03:49] <Florob> pzol, what languages are those? In my experience pretty much everyone gets it wrong except for 7-bit ASCII. And if you're arguing 98% of the cases are 7-bit ASCII then Rust's len() method is just fine for you
[16:04:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:04:18] <Yurume> and some others (e.g. push()) are in the trait OwnedVector since they do not work except for ~[T] types: static.rust-lang.org/doc/master/std/vec/trait.OwnedVector.html etc.
[16:04:20] *** Quits: Earnestly (earnest@B2D4FB72.5E5F54DA.30311652.IP) (Ping timeout)
[16:04:24] <pzol> *sigh* :)
[16:04:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:04:46] <eddyb> ES has UCS2 (I think) codepoints - so anything larger than 16 bits is going to use surrogates so it will count as two codepoints
[16:04:57] <Yurume> that is rather unfortunate :)
[16:05:00] <Matrixiumn> eddyb: Hmm, this is weird, just got a new copy of the repo and I get the same error...
[16:05:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:05:24] <mib_61u2u6> @yurume: Thanks.
[16:05:41] <eddyb> Matrixiumn: did you clean up? can you post a log?
[16:05:47] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[16:06:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:06:21] <Matrixiumn> eddyb: Okay, one sec, also, yes I did, I literally rm -rvf'd it and then recloned it.
[16:06:26] <Yurume> mib_61u2u6, the most methods defined to the vectors are available in std::vec traits anyway (except for len() and is_empty()), so reading all those traits might be good for learning.
[16:06:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:07:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:07:07] *** Joins: Earnestly (earnest@moz-A8B5B5EE.dyn.plus.net)
[16:07:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:07:11] <Yurume> separate traits mean separate usages, so that's not bad, but it is not quite obvious from the beginner's perspective unfortunately.
[16:07:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:07:31] <Matrixiumn> eddyb: Also, ./configure does not seem able to detect that this sytem is x86_64 and instead detects it as i686-unknown-linux-gnu
[16:07:32] <Florob> eddyb, If only. UCS2 means everything larger than 16-bit is going to fail gloriously. Surrogates are a UTF-16 thing. (Or at least that is my understanding)
[16:07:48] <eddyb> Matrixiumn: okay, that is bad. which flags did you pass to it?
[16:07:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:07:57] <Matrixiumn> eddyb: ./configure --disable-clang
[16:08:03] <mib_61u2u6> Yurume: Felt kind of stupid not finding that. Was looking for somewhere I'd see a complete list of methods for Vector, didn't find that yet.
[16:08:21] <eddyb> Matrixiumn: does it detect x86_64 without that flag?
[16:08:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:08:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:08:39] <eddyb> Matrixiumn: though I remember --enable-clang being the "break everything" flag
[16:08:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:08:44] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[16:08:55] <Yurume> --half-enable-clang\
[16:09:02] <Matrixiumn> eddyb: Still the same.
[16:09:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:09:20] <eddyb> Matrixiumn: weird. what distro?
[16:09:43] <eddyb> Matrixiumn: gcc -v/clang -v would be interesting to see
[16:09:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:09:58] <Matrixiumn> eddyb: Ubuntu 12.04
[16:10:02] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[16:10:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:10:32] <eddyb> sounds old. though I don't know my ubuntu versions
[16:11:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:11:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:11:15] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:11:21] <Matrixiumn> eddyb: It's an LTS version. :P
[16:11:32] <Matrixiumn> https://gist.github.com/f2681a39273211a02dcb
[16:11:38] *** Quits: marianoguerra (marianogue@moz-46CE4B2B.dip0.t-ipconnect.de) (Ping timeout)
[16:11:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:11:55] <Matrixiumn> Eh
[16:12:01] <Matrixiumn> Oh, ignore the last 2 lines...
[16:12:10] <eddyb> I was about to say 4.7 is old
[16:12:14] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[16:12:17] <eddyb> and then you come to me with 4.6. heh
[16:12:18] *** Joins: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp)
[16:12:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:12:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:12:32] <Matrixiumn> Ahh
[16:12:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:12:42] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[16:12:43] <Matrixiumn> eddyb: But how come I can compile many other things fine?
[16:12:45] <eddyb> but it shouldn't be too old for building Rust - unless it fails inside LLVM or something
[16:12:51] <Matrixiumn> Hmm.
[16:12:55] <eddyb> Matrixiumn: you can compile a lot of things with GCC 2
[16:13:04] <eddyb> doesn't mean it's something sane to do
[16:13:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:13:26] <eddyb> Matrixiumn: can you paste the output of ./configure?
[16:13:43] <Matrixiumn> Okay, running. :)
[16:13:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:14:17] <Matrixiumn> configure: WARNING: LLVM will be built thread-unsafe because atomic builtins are missing
[16:14:22] <Matrixiumn> Well that sounds great.
[16:14:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:14:27] *** Quits: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:14:29] <Matrixiumn> eddyb: configure: WARNING: LLVM will be built thread-unsafe because atomic builtins are missing
[16:14:33] <Matrixiumn> Oh my.
[16:14:34] *** Joins: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp)
[16:14:39] <Matrixiumn> https://gist.github.com/fdc8967a1bdff091e9a4
[16:14:40] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:14:46] <Matrixiumn> There, sorry, was having a mind derp.
[16:14:51] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:15:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:15:26] <Yurume> rusti: std::io::fs::walk_dir(&Path(".")).collect()
[16:15:27] -rusti- <anon>:10:32: 10:36 error: unresolved name `Path`.
[16:15:27] -rusti- <anon>:10         std::io::fs::walk_dir(&Path(".")).collect()
[16:15:27] -rusti-                                          ^~~~
[16:15:27] -rusti- error: aborting due to previous error
[16:15:27] -rusti- application terminated with error code 101
[16:15:32] <Yurume> rusti: std::io::fs::walk_dir(&Path::new(".")).collect()
[16:15:33] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[16:15:33] -rusti- <anon>:10:9: 11:6 error: cannot determine a type for this bounded type parameter: unconstrained type
[16:15:33] -rusti- <anon>:10         std::io::fs::walk_dir(&Path::new(".")).collect()
[16:15:33] -rusti- <anon>:11     };
[16:15:34] -rusti- application terminated with error code 101
[16:15:34] *** concrete.mozilla.org sets mode: +M 
[16:15:36] <eddyb> Matrixiumn: weird, why would it infer these? https://gist.github.com/zackp30/fdc8967a1bdff091e9a4#file--L26-L28
[16:15:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:15:51] <Yurume> rusti: let v: ~[Path] = std::io::fs::walk_dir(&Path::new(".")).collect(); v
[16:15:53] -rusti- ~[std::path::posix::Path{repr: ~[111u8, 117u8, 116u8], sepidx: None}]
[16:16:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:16:14] *** Quits: jakerr (jakerr@moz-1095CD08.kanagawa.ocn.ne.jp) (Ping timeout)
[16:16:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:16:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:16:26] * Yurume always forgets whether walk_dir contains ./.. or not
[16:16:35] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:16:57] <Matrixiumn> Err
[16:16:59] <Yurume> I think list_dir() once returned them, though I was wrong at that time
[16:17:00] <Matrixiumn> eddyb: Hmm, I don't know.
[16:17:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:17:14] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[16:17:39] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:18:13] *** Quits: squiddy (squiddy@moz-954C3009.adsl.alicedsl.de) (Input/output error)
[16:18:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:18:53] *** Quits: Rui (rui@92E774E7.DCB97FF6.4F142960.IP) (Quit: )
[16:18:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:19:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:19:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:20:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:20:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:20:22] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:20:32] *** concrete.mozilla.org sets mode: -M 
[16:20:52] <mib_61u2u6> How do people debug rust programs on Mac OS?
[16:20:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:21:06] <mib_61u2u6> as in interactive debugger?
[16:21:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:21:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:21:37] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:21:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:22:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:22:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:22:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:22:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:23:00] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:23:01] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[16:23:14] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[16:23:18] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[16:23:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:23:33] <Yurume> mib_61u2u6, I think gdb pretty works well with -Z debug-info etc.
[16:23:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:23:45] <eddyb> -Z extra-debug-info, even
[16:23:59] <Yurume> I'm not an OSX user (for now) so I cannot be sure though :)
[16:24:14] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:24:16] <mib_61u2u6> OK. Thanks.
[16:24:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:25:16] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[16:25:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:25:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:25:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:26:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:26:23] <eddyb> mib_61u2u6: any debugger GUI that works for C programs, should be able to use the debug information provided by -Z debug-info / -Z extra-debug-info
[16:26:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:26:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:26:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:27:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:28:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:28:24] <Matrixiumn> :)
[16:28:28] <Matrixiumn> Now it's compiling.
[16:28:28] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:28:34] <Tobba> hm
[16:28:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:28:43] <Tobba> what does the crate map things like _ZN19_rust_crate_map_std1 do
[16:29:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:29:10] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[16:29:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:29:17] <eddyb> Tobba: I think debug output uses it
[16:29:18] <Tobba> they're showing up as undefined symbols and breaking things, I dont think they're actually used though
[16:29:22] <eddyb> Tobba: for RUST_LOG and whatnot
[16:29:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:29:45] <eddyb> Tobba: might contain metadata
[16:29:47] <Tobba> its just the driver loader tries to resolve them anyways and firey death occurs
[16:29:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:30:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:30:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:30:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:30:39] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:30:46] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[16:31:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:31:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:31:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:32:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:32:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:32:42] <Tobba> hm no
[16:32:49] <Tobba> eddyb: linking to the .a directly doesnt seem to work
[16:33:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:33:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:33:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:33:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[16:34:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:34:21] <Tobba> I tried also plopping the .o file out of it and that just got weirder
[16:34:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:35:06] <eddyb> kernel modules should be .so or .o, but I'm not sure now
[16:35:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:35:31] <Tobba> I'm passing -shared
[16:35:33] <Tobba> so .so
[16:35:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:35:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:35:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:35:53] <Tobba> ugh, the .o inside of the rlib is compiled with rusts LLVM, which does segmented stack stuff
[16:35:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:36:26] <Tobba> so I basicaly need to unpack the rlib, compile it with my own llvm then link to that
[16:36:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:36:41] <eddyb> Tobba: why??
[16:36:55] <eddyb> Tobba: when you can run rustc with --emit-llvm?
[16:36:58] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:37:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:37:05] <Tobba> eddyb: need metadata
[16:37:08] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:37:11] <eddyb> Tobba: oh?
[16:37:15] <Tobba> I run rustc against the rlib but I cant link to the rlib
[16:37:26] <eddyb> I'm confused now
[16:37:32] <Tobba> first off that doesnt even work for some reason, and the code rustc's llvm generates wont work
[16:37:46] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:38:00] <Tobba> so basicaly, I need to compile against the rlib, unpack it and grab the .bc file, run llc against that then link to the compiled object
[16:38:18] <eddyb> Tobba: --emit-llvm gives you the .bc directly
[16:38:27] <Tobba> but not the metadata
[16:38:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:38:37] <eddyb> Tobba: OOOH, I see
[16:38:47] <Tobba> I could compile twice, but ugh
[16:38:58] <eddyb> Tobba: so you're recompiling the .o file inside the rlib?
[16:39:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:39:33] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:39:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:39:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:39:48] <Tobba> eddyb: yeah
[16:39:57] <Tobba> ld doesnt even recognize the .o file inside it actually, dunno whats with that
[16:40:13] <Tobba> but even if it would I'd need to recompile it
[16:40:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:40:34] *** Joins: japaric (japaric@77507B2D.42146A62.CBF5D49D.IP)
[16:40:42] <eddyb> Tobba: so what crate do you need as an rlib?
[16:40:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:40:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:40:53] <Tobba> API library for drivers
[16:41:06] <eddyb> riiight
[16:41:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:41:09] <Tobba> it just hides a bunch of really ugly C-ish APIs
[16:41:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:42:03] *** Joins: derek_c (derek@moz-E25AC88D.cit.cornell.edu)
[16:42:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:42:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:42:17] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[16:42:20] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[16:42:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:42:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:43:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:43:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:43:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:44:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:44:43] <bachm> what's the correct syntax? I'm trying to do something like "enum Nums: u16 { ... }"
[16:44:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:44:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:44:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:45:02] <eddyb> bachm: #[repr(u16)] enum ...
[16:45:16] <eddyb> bachm: but that's mainly for FFI
[16:45:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:46:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:46:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:46:12] <Tobba> eddyb: actually, doesnt it output metadata into the bytecode files?
[16:46:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:46:34] <eddyb> Tobba: it outputs a .metadata.o file or something like that, not sure what exactly is going on there
[16:46:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:46:59] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[16:47:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:47:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:47:25] <Tobba> if I can just find a flag for rustc that disables segmented stacks I might be good actually
[16:47:34] <Tobba> I wish rustc didnt rely on its own modified llvm though, its really annoying
[16:47:39] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:47:45] <eddyb> Tobba: you can use that LLVM, btw
[16:47:52] <eddyb> in case your own is not compatible
[16:48:04] <Tobba> in this case rustc's isnt compatible with... sanity basicaly
[16:48:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:48:10] <Tobba> specially for the environment I'm working with
[16:48:16] <Tobba> segmented stacks result in some awfulness
[16:48:18] <eddyb> it's not that.. modified
[16:48:29] <eddyb> Tobba: segmented stacks are disabled by default in LLVM
[16:48:39] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:48:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:48:41] <Tobba> it generates calls to __morestack all over though
[16:48:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:48:51] <eddyb> that is, if you use rust's LLVM to compile ll/bc to .o, it won't generate calls to __morestack
[16:49:00] <eddyb> unless you explicitly ask for it
[16:49:20] <Tobba> any special rustc flag to disable it
[16:49:25] <eddyb> nope
[16:49:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:49:26] <Tobba> because when I compile this rlib it does it by default
[16:49:29] <Tobba> shit
[16:49:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:49:58] <eddyb> Tobba: you might want -mrelocation-model=static btw
[16:49:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:50:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:50:17] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[16:50:18] <eddyb> Tobba: generates cleaner code when you work with anything global
[16:50:20] <Tobba> it generates position independant by default?
[16:50:35] <eddyb> yupp
[16:50:38] <Tobba> ew
[16:50:40] *** Quits: Kxepal (Miranda@moz-4FC2B5D7.pppoe.mtu-net.ru) (Ping timeout)
[16:50:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:51:07] <eddyb> ar + rust's llc + ar should fix rlibs easily, I guess
[16:51:07] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[16:51:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:51:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:51:20] <Tobba> I need to dig up my cross compiled ar
[16:51:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:51:28] <Tobba> this is gonna get very ugly very fast
[16:51:31] <eddyb> ar is... universal
[16:51:41] <Tobba> wait yeah right
[16:51:43] <eddyb> ar: supported targets: elf64-x86-64 elf32-i386 elf32-x86-64 a.out-i386-linux pei-i386 pei-x86-64 elf64-l1om elf64-k1om elf64-little elf64-big elf32-little elf32-big elf64-littleaarch64 elf64-bigaarch64 elf32-littleaarch64 elf32-bigaarch64 elf32-littlearm elf32-bigarm elf64-alpha ecoff-littlealpha elf32-hppa-linux elf32-hppa elf64-hppa-linux elf64-hppa elf64-ia64-little elf64-ia64-big pei-ia64 elf32-m68k a.out-m68k-linux elf32-tradbigmips elf32-
[16:51:44] <eddyb> tradlittlemips ecoff-bigmips ecoff-littlemips elf32-ntradbigmips elf64-tradbigmips elf32-ntradlittlemips elf64-tradlittlemips elf32-powerpc aixcoff-rs6000 elf32-powerpcle ppcboot elf64-powerpc elf64-powerpcle aixcoff64-rs6000 aix5coff64-rs6000 elf32-s390 elf64-s390 elf32-sh-linux elf32-shbig-linux elf32-sparc a.out-sparc-linux elf64-sparc a.out-sunos-big xcoff-powermac mach-o-be mach-o-le mach-o-fat pef pef-xlib sym elf32-spu pe-x86-64 pe-i386 
[16:51:45] <Tobba> mingw should have it
[16:51:45] <eddyb> plugin srec symbolsrec verilog tekhex binary ihex
[16:51:48] <eddyb> o_O
[16:51:58] <eddyb> I wasn't expecting that
[16:52:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:52:03] <Tobba> the fuck
[16:52:08] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[16:52:14] <eddyb> Tobba: though it's really just an archive format
[16:52:18] <Tobba> well yeah
[16:52:21] <Tobba> the second fun part of this
[16:52:31] <Tobba> is that rustc loves to give rlibs non overridable super annoying names
[16:52:33] <eddyb> Tobba: ah, just use llvm-ar
[16:52:37] <Tobba> ah
[16:52:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:52:49] <Tobba> didnt know that was a thing
[16:52:51] <eddyb> remember rustc only has LLVM to work with :P
[16:53:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:53:22] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:53:37] <Tobba> I'll probably end up writing my own linker at some point
[16:53:42] <Tobba> this is gonna get awful
[16:53:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:54:36] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[16:54:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:55:54] <Tobba> I should be able to somewhat abuse argument expansion to get the name of the rlib but ughhh
[16:56:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:56:27] <lexs> how can I initialize a static struct with private fields? I can call the ::new method and not set the fields directly: "field `length` is private"
[16:56:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:56:39] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:56:42] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:57:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:57:42] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[16:57:45] <eddyb> lexs: we don't have CTFE, so you can't do anything
[16:57:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:58:01] *** Quits: mib_61u2u6 (Mibbit@moz-518DA4C.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:58:18] <lexs> eddyb: I figured that, *makes fields public* :)
[16:58:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:59:17] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:59:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[16:59:51] *** Joins: alonlevy_ (alon@moz-EB7C9CF3.telavivmakers.org)
[17:00:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:00:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:00:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:01:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:01:13] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[17:01:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:02:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:03:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:03:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:04:11] *** Joins: ling0322 (Mibbit@63C0AE39.74D66CCE.AAE4EC81.IP)
[17:04:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:04:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:04:25] *** Joins: rustguest (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[17:04:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:04:28] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[17:05:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:05:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:06:09] <ling0322> is there any plan to replace ~str with Str or something else just like Vec<T> to ~[T]?
[17:06:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:06:52] <ling0322> &~str are so strange
[17:06:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:07:25] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[17:07:30] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[17:07:34] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:09:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:09:28] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:09:39] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[17:09:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:10:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:10:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:10:58] <eddyb> ling0322: well, you can implement Str in the library, just like Vec<T> was implemented - we still haven't decided on removing ~[T]
[17:11:05] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[17:11:13] <eddyb> if we do remove ~[T]/~str, DST might bring them back
[17:11:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:12:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:12:04] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:12:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:12:16] <ling0322> :)
[17:12:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:13:02] <eddyb> and then you have fixed-length (at least in the general case) ~[T]/~str + growable Vec<T>/Str
[17:13:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:13:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:13:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:14:07] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:14:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:14:39] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:14:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:15:14] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[17:15:24] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:15:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:15:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:16:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:16:18] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[17:16:20] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[17:16:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:16:54] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[17:17:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:17:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:17:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:17:30] <ling0322> i found that if i want to get an item from HashMap<~str, ~str>, i should create an ~str first, and then reference it to make a &~str, so strange!
[17:17:51] <Ms2ger> An & &str should usually work, no?
[17:17:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:17:59] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[17:18:20] <eddyb> ling0322: that's because we don't have DST yet :(
[17:18:30] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:18:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:18:33] <eddyb> ling0322: actually, nevermind that thought
[17:18:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:19:11] <eddyb> (though it should still be allowed to use a &str to search for something in the hashmap)
[17:19:17] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:19:23] *** Joins: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net)
[17:19:25] <Florob> Ms2ger, Wouldn't that require a HashMap<&str, T>? And I'm not sure one can (easily) have that.
[17:19:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:19:49] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:19:51] * Florob has stumbled over the same problem
[17:19:54] <Tobba> well
[17:20:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:20:02] <eddyb> we should have something like Eq<&str> for ~str
[17:20:03] <Tobba> I think I solved the problem with rustc and now I'm instead having makefile problems
[17:20:07] <Tobba> it never ends this shit
[17:20:32] <Ms2ger> Florob, I don't remember how it works, but I think it did
[17:20:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:21:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:21:36] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[17:21:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:22:24] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:22:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:22:27] <SimonSapin> Note to self: when getting unexplained ICEs after a Rust upgrade, also rebuild dependencies
[17:22:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:22:46] <ling0322> ok
[17:22:50] *** Quits: derek_c (derek@moz-E25AC88D.cit.cornell.edu) (Ping timeout)
[17:23:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:23:12] <eddyb> SimonSapin: self.duly_noted
[17:23:32] *** Quits: grahame (grahame@moz-F6161E0E.members.linode.com) (Quit: apt-get upgrade)
[17:23:41] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:23:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:23:51] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:24:01] *** Joins: derek_c (derek@moz-E25AC88D.cit.cornell.edu)
[17:24:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:24:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:25:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:25:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:25:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:26:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:27:03] *** Quits: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[17:27:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:27:26] *** Joins: ljrmorgan (Mibbit@3A623A93.7C8A287B.DF0EE696.IP)
[17:27:35] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:27:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:27:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:28:12] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[17:28:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:28:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:28:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:29:02] *** Joins: Kxepal (Miranda@moz-8174652F.pppoe.mtu-net.ru)
[17:29:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:29:41] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:30:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:30:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:30:26] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:30:45] *** Quits: mpiechotka (mpiechotka@moz-7F5D260D.dynamic.mnet-online.de) (Ping timeout)
[17:31:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:31:05] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[17:31:44] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:32:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:32:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:33:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:34:07] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:34:12] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:34:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:34:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:35:20] *** Joins: grahame (grahame@moz-F6161E0E.members.linode.com)
[17:35:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:35:29] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:35:39] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:35:53] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[17:36:14] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:36:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:37:11] *** Quits: ling0322 (Mibbit@63C0AE39.74D66CCE.AAE4EC81.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:37:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:37:48] * Ms2ger whacks alan_andrade
[17:38:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:38:02] <eddyb> Ms2ger: use a redirect banhammer pls
[17:38:06] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:38:13] <Tobba> that guy has had his connection failing all day
[17:38:16] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:38:22] <Tobba> I really dont know what could even cause that
[17:38:24] <Ms2ger> Maybe dumitru is around
[17:38:29] *** Quits: Ferreus (ferreus@moz-B91E8273.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[17:38:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:39:31] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:39:56] <mankyKitty> What is the purpose of using '_' in an extern fn declaration? : pub fn foo(_:T) -> T;
[17:40:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:40:35] <eddyb> mankyKitty: _ means "ignore"
[17:40:50] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[17:40:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:40:57] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Quit: moostik)
[17:41:15] <mankyKitty> eddyb: cheers
[17:41:19] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[17:41:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:41:56] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:42:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:42:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:42:27] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[17:42:34] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (No route to host)
[17:42:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:42:47] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[17:43:00] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[17:43:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:43:41] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:44:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:44:19] <Tobba> eddyb: I also realized its probably better for optimization to link the bitcodes directly
[17:44:21] <Tobba> so oh god here we go
[17:44:42] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:44:55] <eddyb> Tobba: yeah, LTO
[17:45:02] <pzol> errr how do you concat two strings??? 
[17:45:12] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[17:45:17] <eddyb> pzol: +
[17:45:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:45:46] <pzol> eddyb duh, thanks
[17:45:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:45:53] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:46:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:46:18] <ljrmorgan> is there a way to implement a trait for another trait rather than for a concrete type?
[17:46:26] <eddyb> ljrmorgan: nope
[17:46:38] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:46:42] <eddyb> ljrmorgan: though you can implement a trait for &Trait or ~Trait etc.
[17:47:09] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:47:10] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:47:17] <ljrmorgan> eddyb: ok, thanks. So would I have to implement my new trait for each of those?
[17:47:23] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:47:52] <ljrmorgan> I'm trying to generalise the idea of contains so that it'll work with both Set<T> and ImmutableEqVec<T>
[17:47:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:48:27] <eddyb> ljrmorgan: you can also implement a trait for any type that implements another trait
[17:48:33] <eddyb> impl<T: Foo> Bar for T
[17:48:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:49:01] <eddyb> (sounds closer to what you want, at least)
[17:49:06] <ljrmorgan> eddyb: I tried to use: impl<T, C: Set<T>> CanCheckContains<T> for C
[17:49:08] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:49:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:49:16] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[17:49:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:49:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:49:51] <eddyb> ljrmorgan: should work
[17:49:52] <ljrmorgan> but that didn't work when I added the specialisation for C: ImmutableEqVec<T>
[17:49:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:49:59] <eddyb> ljrmorgan: ah, so here's the issue
[17:50:27] <ljrmorgan> eddyb: "conflicting implementations for trait"
[17:50:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:50:37] *** Joins: Ferreus (ferreus@moz-B91E8273.pools.arcor-ip.net)
[17:50:40] <eddyb> ljrmorgan: coherence doesn't know there isn't anything implementing both Set<T> and ImmutableEqVec<T>
[17:50:55] <ljrmorgan> yeah, that makes sense
[17:51:02] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:51:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:51:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:51:31] <ljrmorgan> eddyb: So is there any way around that?
[17:51:40] <eddyb> I'm not sure
[17:51:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[17:51:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:52:04] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:52:19] <kvark> I've updated the rust source, built, installed, and now getting error: can't find crate for `std`, whenever I compile an app. Does anyone else see this?
[17:52:21] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:52:23] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:52:29] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:52:41] <ljrmorgan> eddyb: thanks for you help anyway (again!)
[17:53:08] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:53:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:53:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:53:45] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:53:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:54:25] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:54:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:54:57] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:55:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:55:42] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:56:12] *** Joins: lennart (lennart@moz-DE70D6F.stanford.edu)
[17:56:25] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:57:00] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:57:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:57:55] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[17:58:19] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:58:49] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:58:52] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:59:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[17:59:09] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[17:59:12] *** Quits: Kambfhase_ (quassel@moz-4FE2BA40.travedsl.de) (Ping timeout)
[17:59:22] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:59:30] *** Joins: mpiechotka (mpiechotka@moz-7F5D260D.dynamic.mnet-online.de)
[17:59:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[17:59:53] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:00:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:00:28] *** Joins: mhoye (mhoye@moz-C14EAE67.vs.heavycomputing.ca)
[18:00:36] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[18:00:55] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:01:11] *** Joins: Kambfhase (quassel@moz-4FE2BA40.travedsl.de)
[18:01:36] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[18:01:40] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:01:49] <Tobba> why does rustc ignore output filenames with -o though
[18:02:09] <Tobba> its really annoying
[18:02:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:02:30] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[18:02:43] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:02:45] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:02:54] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:03:31] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:04:00] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:04:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:04:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:04:14] <jmgrosen> anyone know what went wrong here? https://gist.github.com/jmgrosen/919b13b37676a20af36e
[18:04:27] <jmgrosen> don't know why `ar` wouldn't be getting any arguments to archive
[18:04:48] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:05:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:05:52] *** Joins: nical (nico@moz-7EE986F9.fbx.proxad.net)
[18:06:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:06:12] <Tobba> oh god the amount of shitty tooling i've had to go thrugh
[18:06:13] <Tobba> through*
[18:06:24] <jmgrosen> hm, this describes it: https://github.com/mozilla/rust/issues/11229 but it should have been fixed by https://github.com/mozilla/rust/pull/10900
[18:06:26] <Tobba> llvm-ar doesnt have any goddamn (documented) way to set where it should put stuff
[18:06:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:06:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:06:37] <Tobba> so now my makefile does something like $(AR) p build/api/$*/lib$*-*.rlib $*.bc >  build/api/$*/$*.bc
[18:06:48] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:06:58] <jmgrosen> oh, that patch only did it for android, not generic arm
[18:07:00] <jmgrosen> argh
[18:07:05] <acrichto> Tobba: I saw you had some questions about rlibs last night, did they get answered?
[18:07:10] <Tobba> yeah
[18:07:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:07:23] <Tobba> okay llvm-ar is corrupting the archive when removing files from it
[18:07:26] <Tobba> good job llvm
[18:07:53] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:07:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:08:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:08:16] <Tobba> actually llvm-ar can still read them, obviously
[18:08:40] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:09:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:09:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:09:13] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Client exited)
[18:09:14] <jmgrosen> alexcrichton: do you know if that error I posted is fixable? it looks like it might be fixed if I add another special case like the one from #10900 but for arm-unknown-linux-gnueabi instead of just android
[18:09:23] <Tobba> also someone give rustc -o - support, that would be amazing
[18:09:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:09:40] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[18:09:47] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[18:09:55] <jmgrosen> acrichto: ^ (sorry, got your nick wrong)
[18:09:58] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:10:28] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:10:30] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:10:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:10:42] <acrichto> jmgrosen: when you're building for android you can't use the system ar tool
[18:11:01] <jmgrosen> acrichto: what about arm-unknown-linux-gnueabi?
[18:11:02] <acrichto> and it should pic it up from android-cross-path as well..
[18:11:05] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[18:11:15] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:11:22] <acrichto> jmgrosen: try building with --ar=<path to ar tool>
[18:11:23] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[18:11:37] <jmgrosen> acrichto: okay
[18:11:37] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[18:11:37] <acrichto> where <path to ar tool> is the android ar tool
[18:11:45] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:11:47] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:11:49] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Client exited)
[18:12:01] <acrichto> Tobba: you're welcome to comment on https://github.com/mozilla/rust/issues/11056
[18:12:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:12:07] <mceier> alan_andrade_: can you do something about alan_andrade ?
[18:12:07] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:12:33] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:13:01] <SiegeLord> What is the difference between Pod and the old Copy?
[18:13:03] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[18:13:03] <jmgrosen> acrichto: "error: Option '--ar=/path/to/arm-none-linux-gnueabi-ar' is not recognized"
[18:13:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:13:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[18:13:52] *** Quits: derek_c (derek@moz-E25AC88D.cit.cornell.edu) (Ping timeout)
[18:14:02] <jmgrosen> I'm not building for android, I'm trying to build for arm-unknown-linux-gnueabi
[18:14:13] <acrichto> jmgrosen: what version of the compiler do you have?
[18:14:21] <Tobba> oh for fucks sake
[18:14:39] <Tobba> if I use the p arg it gets wrangled when piped through cmd, oh windows
[18:14:39] <jmgrosen> acrichto: pulled a couple hours ago
[18:14:48] <acrichto> Tobba: as I asked awhile back, let's keep the language in here a little cleaner
[18:14:56] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[18:15:00] <acrichto> jmgrosen: maybe it's just --ar not --ar= ?
[18:15:05] <Tobba> yeah I've been going through this shit for hours
[18:15:16] <acrichto> Tobba: please, let's keep the language in here clean
[18:15:19] <Tobba> the ballad of misbehaving things never end
[18:15:20] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:15:20] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[18:15:33] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[18:15:34] <jmgrosen> acrichto: now just "error: Option '--ar' is not recognized"
[18:15:41] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:16:16] <acrichto> jmgrosen: are you using rustpkg?
[18:16:19] <glaebhoerl> SiegeLord: afaik nothing
[18:16:30] <glaebhoerl> (but could be wrong)
[18:16:34] <jmgrosen> acrichto: no, I'm trying to build rustc
[18:16:41] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Ping timeout)
[18:16:48] <acrichto> jmgrosen: hm, I'm confused, could you pastebin a full session?
[18:16:54] <SiegeLord> glaebhoerl: I thought Copy was Wrong and Bad and that's why it was removed
[18:17:14] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[18:17:18] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[18:17:32] <SiegeLord> Maybe it was a trait and now its a kind?
[18:17:48] <eddyb> kinds are traits
[18:18:20] <eddyb> though maybe you're referring to the automatic implementation of kinds by the compiler
[18:18:35] <eddyb> rusti: struct Foo; impl Send for Foo {}
[18:18:36] -rusti- <anon>:10:21: 10:41 error: cannot provide an explicit implementation for a builtin kind
[18:18:36] -rusti- <anon>:10         struct Foo; impl Send for Foo {}
[18:18:36] -rusti-                               ^~~~~~~~~~~~~~~~~~~~
[18:18:37] -rusti- error: aborting due to previous error
[18:18:37] -rusti- application terminated with error code 101
[18:18:55] <glaebhoerl> SiegeLord: I think it wasn't wrong and bad, they just wanted to simplify and have one less concept to deal with (Clone vs Copy)
[18:19:00] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[18:19:15] *** Parts: jarekps (jarekps@moz-B87F5828.neoplus.adsl.tpnet.pl) ()
[18:19:26] <glaebhoerl> but then they found a use case (Cell) where Clone wasn't right and they needed Copy/Pod so they added it back
[18:19:29] <glaebhoerl> that's my impression anyways
[18:19:45] <jmgrosen> acrichto: https://gist.github.com/jmgrosen/246d7282e31f9676b427
[18:20:19] <jmgrosen> I also changed CROSS_PREFIX_arm-unknown-linux-gnueabi to arm-none-linux-gnueabi since that's what it is on my system
[18:20:44] <acrichto> jmgrosen: oh I"m sorry I was misunderstanding the error!
[18:20:55] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[18:20:59] <acrichto> I don't understand how that's happening...
[18:21:15] <jmgrosen> alright :/
[18:21:49] *** Joins: Erik_ (Erik_S@moz-E7E31D21.hlrn.qwest.net)
[18:22:01] <Luqman> jmgrosen: oh, the --ar flag is for rustc not configure
[18:22:26] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[18:22:30] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[18:22:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:22:54] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:23:01] <Luqman> jmgrosen: what if you add $(CROSS_PREFIX_arm-unknown-linux-gnueabi)$(AR_arm-unknown-linux-gnueabi) to RUSTC_CROSS_FLAGS_arm-unknown-linux-gnueabi in mk/platform.mk
[18:23:45] <jmgrosen> --ar= that, you mean?
[18:23:48] <Tobba> okay this is the most awful thing I've had to deal with in a while
[18:23:55] <Tobba> does anyone have any idea how to give this thing a damn output directory
[18:24:11] <Luqman> jmgrosen: ah yes
[18:24:17] <Tobba> I cant move the file, I cant change output dir, I cant change working dir and I cant pipe it
[18:24:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[18:24:27] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:24:38] <Tobba> (llvm-ar)
[18:24:41] *** Quits: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) (Quit: jeff_)
[18:25:04] <Luqman> Tobba: are you trying to build llvm?
[18:25:07] <Tobba> nope
[18:25:09] <rustguest> why does rust not like modifying global vars?
[18:25:10] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Client exited)
[18:25:11] <Tobba> trying to use this llvm-ar utility
[18:25:14] <Tobba> which is amazingly bad
[18:25:24] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[18:25:28] <Tobba> it lets you extract files but it puts it in your working dir
[18:25:32] <Tobba> theres nothing that lets you change that behavior
[18:25:34] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[18:26:06] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:26:14] <eddyb> Tobba: are you serious?
[18:26:32] <Tobba> unless I'm miserably failing at documentation reading, yep
[18:27:00] <Tobba> if there somehow is a flag which is blatantly obvious (let me try -o), then hold on let me jump out of a window
[18:27:10] *** Quits: victorporof (victorporo@D6D20584.190AF31B.2B3D3D4.IP) (Quit: victorporof)
[18:27:11] *** Joins: judofyr_ (judofyr@moz-8BB0A10D.nextgentel.com)
[18:27:15] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[18:27:39] <eddyb> Tobba: --help looked like the same mumbo jumbo ar has
[18:27:45] <Tobba> yep
[18:27:52] <Tobba> I googled for how to specify it on ar and didnt get anything relevant
[18:28:18] <Tobba> you can use the p option and pipe it
[18:28:24] <Tobba> but I'm on windows so it pipes it through cmd
[18:28:27] <Tobba> (it doesnt end well)
[18:28:36] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[18:29:07] <Tobba> oh and running a cross compiled GNU make, so I dont have any move command
[18:29:19] <Tobba> and changing the working dir doesnt work, obviously
[18:30:06] <SiegeLord> Let's say a type is non-Send... can I still send it somehow?
[18:30:24] <SiegeLord> (I assume between tasks, not 100% sure what send is)
[18:30:24] <eddyb> SiegeLord: it's... not safe to do so
[18:30:37] <eddyb> though I'm not 100% sure myself
[18:30:46] <SiegeLord> I probably will be able to prove that it is safe
[18:30:53] <SiegeLord> Well, not to the compiler
[18:30:58] <SiegeLord> Not sure...
[18:31:01] <eddyb> SiegeLord: is it Freeze?
[18:31:06] <SiegeLord> It has Cell's in it
[18:31:21] <SiegeLord> Maybe I can clone it?
[18:31:28] <SiegeLord> Is there a clone-send operation?
[18:31:30] <eddyb> SiegeLord: Cell's won't work
[18:31:30] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[18:31:53] <eddyb> SiegeLord: can't you have a Cell-less version that you put in a RWArc?
[18:32:00] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[18:32:08] <eddyb> but that's if you want shared mutability
[18:32:45] *** Quits: ljrmorgan (Mibbit@3A623A93.7C8A287B.DF0EE696.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:33:33] <SiegeLord> Trying to come up with a trait that'll let me mutate types with a Cell and without it
[18:33:57] <SiegeLord> So far, it seemed that I could use a by-value self in simple cases, but it breaks down in complex cases
[18:34:01] *** Joins: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP)
[18:34:07] <glaebhoerl> SiegeLord: clone-send wouldn't be enough because if the original contains borrowed or managed data, likely the clone will as well
[18:34:33] <eddyb> glaebhoerl: can't you guard against that with 'static?
[18:34:50] <SiegeLord> In my case, I just have a ~[Cell<f32]
[18:34:54] *** Quits: heftig (heftig@moz-8FF1C6CF.dip0.t-ipconnect.de) (Quit: Quitting)
[18:34:55] <glaebhoerl> eddyb: Send is basically NonManaged + 'static afaik? or something like that?
[18:34:57] <eddyb> though ~T with T not Freeze - isn't that Send?
[18:35:17] <eddyb> I mean, it doesn't care about Freeze
[18:35:20] <eddyb> because it's owned
[18:35:33] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[18:35:51] <SiegeLord> Oh, am I wrong to begin with?
[18:36:01] <eddyb> rusti: fn is_send<T: Send>(_: T){} is_send(~Cell::new(0))
[18:36:06] *** Joins: heftig (heftig@moz-8FF1C6CF.dip0.t-ipconnect.de)
[18:36:06] -rusti- pastebinned 11 lines of output: http://ix.io/a8x
[18:36:17] <SiegeLord> I just don't want to preclude sending struct Vector{ data: ~[Cell<f32>] }
[18:36:20] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Ping timeout)
[18:36:26] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[18:36:36] <eddyb> rusti: fn is_send<T: Send>(_: T){} is_send(~::std::cell::Cell::new(0))
[18:36:37] -rusti- ()
[18:36:42] <eddyb> SiegeLord: ^^
[18:36:47] <SiegeLord> Oh, so it's all good?
[18:36:48] <eddyb> rusti: fn is_send<T: Send>(_: T){} is_send(~[::std::cell::Cell::new(0)])
[18:36:50] -rusti- ()
[18:37:01] <eddyb> SiegeLord: the only problem is if you put it in Arc
[18:37:08] <SiegeLord> Great... crisis averted
[18:37:14] *** Parts: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) ()
[18:37:16] <eddyb> but if it's owned, it doesn't care
[18:38:06] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[18:38:58] *** Quits: rustguest (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:40:06] <glaebhoerl> SiegeLord: fwiw, why do you want ~[Cell<f32>]?
[18:40:12] <glaebhoerl> doesn't sound amazingly efficient
[18:40:19] <eddyb> glaebhoerl: Cell is 0 cost :P
[18:40:51] <SiegeLord> The hypothesis is that by using interior mutability, I may be able to write more efficient code
[18:40:57] <glaebhoerl> eddyb: yeah I checked/realized that just after I wrote actually :)
[18:41:08] <SiegeLord> Still converting the code to verify though
[18:41:27] *** Joins: derek_c (derek@moz-CE6E60A5.cit.cornell.edu)
[18:41:42] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[18:41:44] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[18:41:52] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[18:42:02] <eddyb> SiegeLord: you have to manage the order of operations yourself, though
[18:42:46] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[18:42:57] *** Quits: alonlevy_ (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[18:43:49] <ercxx> rusti: let mystr = ~"cartman"; println!("{}", mystr == cartman);
[18:43:52] -rusti- pastebinned 9 lines of output: http://ix.io/a8y
[18:44:10] <ercxx> rusti: let mystr = ~"cartman"; println!("{}", mystr == "cartman");
[18:44:11] <pzol> How would you do a case-INSENSITIVE comparison? 
[18:44:13] -rusti- pastebinned 9 lines of output: http://ix.io/a8z
[18:44:36] <ercxx> rusti: let mystr = ~"cartman"; println!("{}", "cartman" == mystr);
[18:44:39] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[18:45:25] <pzol> let mystr = ~"cartman"; println!("{}", mystr.as_slice() == "cartman");
[18:45:33] <eddyb> pzol: using two zipped character iterators and lowercasing both characters in the predicate for "each" or "all" or whatever it's called
[18:45:42] <pzol> rusti: let mystr = ~"cartman"; println!("{}", mystr.as_slice() == "cartman");
[18:45:45] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[18:45:59] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[18:46:14] <pzol> eddyb  oook thanks
[18:46:58] <ercxx> pzol: here the version with 'msytr == "cartman"' gives a type error while '"cartman" == mystr' prints 'true'
[18:47:35] <pzol> ercxx yeah... that's a common problem people stumble upon
[18:47:35] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[18:48:07] <ercxx> is this expected behavior?
[18:48:25] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[18:48:38] <pzol> ercxx from what I reckon yes
[18:48:47] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[18:49:28] <pzol> correct me if I'm wrong, "cartman" == mystr auto-borrows in .eq
[18:49:39] <ercxx> that's a little confusing
[18:49:48] <pzol> ercxx YES! :)
[18:49:59] <eddyb> ercxx: it's an issue with how operators are overloaded right now
[18:50:25] <eddyb> rusti: let mystr = ~"cartman"; mystr == "cartman"
[18:50:25] -rusti- <anon>:10:42: 10:51 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected `~` but found `&'static `)
[18:50:25] -rusti- <anon>:10         let mystr = ~"cartman"; mystr == "cartman"
[18:50:26] -rusti-                                                    ^~~~~~~~~
[18:50:26] -rusti- error: aborting due to previous error
[18:50:26] -rusti- application terminated with error code 101
[18:50:37] <ercxx> eddyb: not supposed to be permanent right?
[18:50:56] <ercxx> eddyb: yeah, I like this version better.
[18:51:06] <eddyb> ercxx: maybe we can do it better
[18:51:07] <pzol> rusti: let mystr = ~"cartman"; ~mystr == "cartman"
[18:51:07] -rusti- <anon>:10:43: 10:52 error: mismatched types: expected `~~str` but found `&'static str` (expected ~-ptr but found &'static str)
[18:51:07] -rusti- <anon>:10         let mystr = ~"cartman"; ~mystr == "cartman"
[18:51:07] -rusti-                                                     ^~~~~~~~~
[18:51:08] -rusti- error: aborting due to previous error
[18:51:08] -rusti- application terminated with error code 101
[18:51:14] <eddyb> rusti: let mystr = ~"cartman"; mystr.as_slice() == "cartman"
[18:51:15] -rusti- true
[18:51:19] <pzol> rusti: let mystr = ~"cartman"; mystr == ~"cartman"
[18:51:20] -rusti- true
[18:51:41] <eddyb> rusti: let mystr = ~"cartman"; mystr.eq("cartman")
[18:51:42] -rusti- <anon>:10:42: 10:51 error: mismatched types: expected `&~str` but found `&'static str` (expected &-ptr but found &'static str)
[18:51:42] -rusti- <anon>:10         let mystr = ~"cartman"; mystr.eq("cartman")
[18:51:42] -rusti-                                                    ^~~~~~~~~
[18:51:42] -rusti- error: aborting due to previous error
[18:51:42] -rusti- application terminated with error code 101
[18:51:48] <eddyb> that's interesting...
[18:51:50] <ercxx> I don't have a problem with using as_slice().
[18:51:57] <eddyb> rusti: let mystr = ~"cartman"; mystr.eq(&&"cartman")
[18:51:58] -rusti- <anon>:10:42: 10:44 error: unexpected token: `&&`
[18:51:59] -rusti- <anon>:10         let mystr = ~"cartman"; mystr.eq(&&"cartman")
[18:51:59] -rusti-                                                    ^~
[18:51:59] -rusti- application terminated with error code 101
[18:52:01] <eddyb> rusti: let mystr = ~"cartman"; mystr.eq(& &"cartman")
[18:52:02] -rusti- <anon>:10:42: 10:54 error: mismatched types: expected `&~str` but found `&&'static str` (str storage differs: expected `~` but found `&'static `)
[18:52:02] -rusti- <anon>:10         let mystr = ~"cartman"; mystr.eq(& &"cartman")
[18:52:02] -rusti-                                                    ^~~~~~~~~~~~
[18:52:02] -rusti- error: aborting due to previous error
[18:52:04] <bytbox> when running #[should_fail] tests, is there a way to not output "task 'x' failed at" messages?
[18:52:04] *** concrete.mozilla.org sets mode: +M 
[18:52:04] -rusti- application terminated with error code 101
[18:52:23] <eddyb> what's +M for?
[18:52:26] <eddyb> bytbox: doubt it
[18:52:29] <Ms2ger> rusti: let mystr = ~"cartman"; "cartman".eq(mystr)
[18:52:30] -rusti- <anon>:10:46: 10:51 error: mismatched types: expected `&&str` but found `~str` (expected &-ptr but found ~str)
[18:52:30] -rusti- <anon>:10         let mystr = ~"cartman"; "cartman".eq(mystr)
[18:52:30] -rusti-                                                        ^~~~~
[18:52:30] -rusti- error: aborting due to previous error
[18:52:30] -rusti- application terminated with error code 101
[18:52:33] <Ms2ger> rusti: let mystr = ~"cartman"; "cartman".eq(&mystr)
[18:52:34] -rusti- <anon>:10:46: 10:52 error: mismatched types: expected `&&str` but found `&~str` (str storage differs: expected `&` but found `~`)
[18:52:34] -rusti- <anon>:10         let mystr = ~"cartman"; "cartman".eq(&mystr)
[18:52:35] -rusti-                                                        ^~~~~~
[18:52:37] -rusti- error: aborting due to previous error
[18:52:37] <Ms2ger> Bah
[18:52:38] -rusti- application terminated with error code 101
[18:52:44] <Ms2ger> eddyb, spam protection
[18:52:51] <eddyb> it's really nasty. I hear "equiv" can be used instead
[18:53:10] <eddyb> Ms2ger: doesn't help us with alan_andrade
[18:57:01] *** concrete.mozilla.org sets mode: -M 
[18:57:18] <SiegeLord> Woohoo... it worked
[18:57:27] <SiegeLord> Although this interior mutability sounds a bit scary
[18:57:56] <rca_> would be nice to be able to implement Eq for T:Str.
[18:59:17] <SiegeLord> Will it ever be possible to overload the + in 1 + my_type?
[18:59:37] <Ms2ger> Perhaps
[18:59:39] *** Quits: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP) (Client exited)
[19:00:41] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[19:03:16] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[19:04:18] *** Joins: pachuco (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[19:05:53] *** Joins: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP)
[19:06:13] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:07:54] *** Parts: alan_andrade_ (uid23020@moz-31ABA2C0.irccloud.com) ()
[19:08:42] <jdsanders> Hey what's the fastest way to run a single test in libstd? Using `make check TESTNAME=` does a whole bunch of compiling…
[19:08:55] <alan_andrade> sorry about my other nick. I had it working with irccloud.
[19:09:26] <pzol> errr how do I convert  an Utf8 char to_lower?
[19:09:48] <eddyb> pzol: you mean an unicode codepoint?
[19:10:01] <eddyb> pzol: you have to use some sort of table
[19:10:18] <eddyb> pzol: there's probably a C library that does everything in unicode. libICU?
[19:11:45] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[19:13:35] <pzol> eddyb thanks, again 
[19:14:33] *** Quits: oberstet (quassel@moz-B7587E6C.dynamic.mnet-online.de) (Client exited)
[19:14:36] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[19:15:54] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[19:16:04] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[19:17:28] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[19:17:32] *** Parts: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) ()
[19:17:34] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[19:17:47] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[19:18:33] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[19:18:53] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[19:19:35] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[19:19:56] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:20:05] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:20:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:20:40] <c-a> jdsanders, something like `make check-stage1-std NO_REBUILD=1 TESTNAME=`
[19:23:38] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[19:23:50] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[19:25:01] <pzol> eddyb what do you think about this one? https://gist.github.com/pzol/8637904
[19:25:06] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[19:25:07] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[19:25:08] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:25:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[19:25:29] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[19:25:38] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[19:25:48] <eddyb> pzol: not sure if zip actually works right if the length differs
[19:25:56] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[19:26:17] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[19:26:23] <eddyb> pzol: that is, you may have to check the length yourself, before comparing the contents
[19:26:48] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:27:04] <eddyb> (I was actually expecting you to have a thin wrapper for libICU or something similar, to do proper unicode case insensitivity)
[19:27:08] <Florob> And that is entirely ignoring the fact that this is broken as hell, and will fail for e.g. Ä
[19:27:14] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[19:27:22] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Ping timeout)
[19:27:56] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[19:28:46] *** Joins: fabiand (fabiand@moz-3814939D.static.hackerspace-bremen.de)
[19:28:55] <Yurume> https://github.com/snrs/sonorous/commit/2ef7a5839ad53e593a16a8ee70b5bce0e8cb8054 it really is a pain in the ass.
[19:29:12] <pzol> eddyb later.... and yes, you do need to check length manually... which brings me to my previous problem of calculating the proper length of a unicode string, duh
[19:29:30] <Yurume> and then I now suffer from the mysterious "bad reloc address 0x4 in section `.data'" :X
[19:30:37] *** Quits: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com) (Ping timeout)
[19:30:50] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[19:31:42] <phil> anyone here know how id pass a null pointer on to a linked C lib?
[19:31:44] <jdsanders> c-a: thanks, yeah, I ended up doing something like that
[19:32:29] <pzol> eddyb would you include libICU in stdlib at some point?
[19:32:56] <eddyb> pzol: I'm not sure. the best thing is to have automatically imported tables and Rust code working on them
[19:33:25] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[19:33:30] <pzol> eddyb that'd be better
[19:33:35] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:33:57] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:34:18] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[19:34:48] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[19:35:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:35:21] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:36:09] <kimundi> pzol, eddyb: Someone wrote some code for that ages ago, maybe it could get updated and made into a PR? https://github.com/sbillig/rust-grapheme
[19:36:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:37:25] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[19:37:34] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[19:37:49] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[19:38:56] *** Quits: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP) (Ping timeout)
[19:39:04] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[19:39:38] <derek_c> how do you rebuild rustpkg only?
[19:40:58] *** Quits: Erik_ (Erik_S@moz-E7E31D21.hlrn.qwest.net) (Ping timeout)
[19:41:38] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:41:57] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:42:40] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[19:43:26] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[19:44:09] *** Joins: jvshahid (jvshahid@moz-86D5F266.nyc.res.rr.com)
[19:44:18] *** Joins: tdc (santegoeds@moz-1B982511.range31-53.btcentralplus.com)
[19:45:58] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[19:46:21] *** Joins: figaro (Mibbit@moz-B50C1EDE.hsd1.va.comcast.net)
[19:46:24] *** Joins: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP)
[19:48:07] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:48:50] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[19:49:01] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: )
[19:50:23] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:50:40] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[19:51:10] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:52:20] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[19:52:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:52:57] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[19:52:58] <pachuco> how do I make the compiler happy in this situation? http://pastebin.com/606NQSzV
[19:53:31] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[19:53:40] <pachuco> it says it finds a &'static rather than 'static
[19:54:25] <FreeFull> pachuco: What happens if you change the 'static to &'static?
[19:54:34] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:54:46] <pachuco> it then says missing lifetime specifier
[19:55:11] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:55:20] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[19:55:45] <derek_c> anyone knows how the rustpkg executable is produced? Looking into librustpkg/lib.rs, the crate type is dylib
[19:55:48] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[19:56:15] *** Quits: jvshahid (jvshahid@moz-86D5F266.nyc.res.rr.com) (Quit: leaving)
[19:56:32] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[19:57:28] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:58:20] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:59:28] *** Joins: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com)
[19:59:55] <pachuco> what I'm trying to do is having struct variants that reference a regular function (not a closure)
[20:00:12] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[20:00:36] *** Joins: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP)
[20:00:48] *** Quits: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:01:14] <SiegeLord> Mwahaha http://www.rust-ci.org/SiegeLord/RustAlgebloat
[20:01:31] <SiegeLord> Now to just add functionality to it... and then it'll be time for HMM!
[20:02:22] *** Quits: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP) (Ping timeout)
[20:02:37] <flaper87> SiegeLord: hehe, I think some of the things you're implementing there could also go into num-rs
[20:03:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:04:06] <SiegeLord> Maybe if num-rs is fixed, then I could consider using it
[20:04:18] <SiegeLord> I don't think it's usable for matrix algebra
[20:04:19] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[20:04:36] <SiegeLord> What's a Zero for a matrix? What's a pi() for a matrix?
[20:04:49] <flaper87> SiegeLord: not yet, I've been working on num-rs today
[20:04:55] <flaper87> SiegeLord: well, PR are welcome :)
[20:05:01] <SiegeLord> Traits are for making generic programming easier, not for codifying mathematical laws
[20:05:04] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:05:06] <eddyb> SiegeLord: Zero is easy
[20:05:06] <flaper87> even opening issues is useful
[20:05:12] <eddyb> pi()... not so much
[20:05:15] <flaper87> that helps keeping track of things to do
[20:05:36] <eddyb> SiegeLord: and One is obviously I
[20:05:50] <SiegeLord> I of what size :P
[20:06:14] <eddyb> I was thinking of types like Mat2
[20:06:39] <SiegeLord> It'd work for those, I guess... but who only uses Mat2's?
[20:06:56] <eddyb> or Mat<N> instead of DMat
[20:07:00] <SiegeLord> That's why I'm even making a library to begin with... too many fixed size matrices
[20:07:03] <eddyb> sadly, Rust only has the latter :(
[20:07:10] *** Quits: mpiechotka (mpiechotka@moz-7F5D260D.dynamic.mnet-online.de) (Ping timeout)
[20:07:35] <SiegeLord> It'll be a long time before that's possible
[20:07:55] <eddyb> SiegeLord: I doubt "long"
[20:07:56] <SiegeLord> How will you express the fact that you can multiply arbitrarily sized matrices as long as their inner dimensions match?
[20:08:08] <SiegeLord> Like a 5x2 matrix by a 2x100
[20:08:17] <eddyb> SiegeLord: come on, that's easy :P
[20:09:06] <SiegeLord> Well, maybe it's not too bad
[20:09:12] <SiegeLord> I'm not interested in waiting :P
[20:09:30] <eddyb> impl<static A: uint, static B: uint, static C: uint> Mul<Mat<B, C>, Mat<A, C>> for Mat<A, B>
[20:09:34] <eddyb> I think I got those right
[20:09:44] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[20:09:51] <SiegeLord> And even then, it's just not the case that you always know sizes at compile time
[20:10:14] <SiegeLord> What good is a numerical trait library if it only works when you do?
[20:10:46] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[20:11:15] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:11:44] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[20:12:19] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Client exited)
[20:12:40] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[20:12:41] <SiegeLord> I kind of wanted to not even restrict myself to 2D matrices too... but I decided that it'll be easier to do vectors and 2D matrices first
[20:13:04] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[20:13:40] <eddyb> Mat<..static N: uint> or something like that
[20:13:51] *** Joins: bt3ze_ (ben@moz-65042F80.dhcp.embarqhsd.net)
[20:13:55] <eddyb> though it becomes hard to do anything with it
[20:13:59] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Connection reset by peer)
[20:14:30] *** Quits: gwty (gwtypc@77155052.CFFB58E3.27560D6E.IP) (Ping timeout)
[20:15:29] *** Joins: gwty (gwtypc@77155052.CFFB58E3.27560D6E.IP)
[20:15:49] *** Quits: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net) (Quit: Leaving.)
[20:15:55] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[20:15:58] *** Joins: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net)
[20:16:04] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:16:27] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:16:44] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:17:25] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[20:18:14] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[20:18:32] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[20:18:42] <Matthias247> can smartpointers actually be down- and upcast? E.g. Rc<Base> -> Rc<Derived> -> Rc<Base> ?
[20:18:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[20:19:11] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[20:19:18] <o11c> Matthias247: rust doesn't have base and derived classes
[20:19:37] <Matthias247> it has in the form of trait objects
[20:20:16] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[20:20:56] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[20:21:36] *** Quits: derek_c (derek@moz-CE6E60A5.cit.cornell.edu) (Quit: Leaving)
[20:21:38] <eddyb> Matthias247: Rc<Trait> is not possible yet
[20:21:47] *** Joins: derek_c (derek@moz-CE6E60A5.cit.cornell.edu)
[20:21:53] *** Parts: figaro (Mibbit@moz-B50C1EDE.hsd1.va.comcast.net) ()
[20:22:23] <Matthias247> eddyb: it's about that DST thing?
[20:22:30] <eddyb> Matthias247: yeah
[20:22:33] <Matthias247> but I guess Rc<~Trait> is possible?
[20:22:41] <eddyb> Matthias247: but you can't cast it at all
[20:22:54] *** Quits: gwty (gwtypc@77155052.CFFB58E3.27560D6E.IP) (Ping timeout)
[20:23:03] <eddyb> under DST, you should be able to cast Rc<RefCell<Trait>> to Rc<RefCell<BaseTrait>>
[20:23:20] <eddyb> Matthias247: I have a Many trait which allows casting to any trait provided by the implementor
[20:23:57] *** Joins: gwty (gwtypc@77155052.CFFB58E3.27560D6E.IP)
[20:24:01] <Matthias247> ok, if this is only possible with DST then I think that's really urgently needed ;)
[20:24:51] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[20:25:26] <Matthias247> where can I find more information about Many?
[20:26:08] <ercxx> why would this give a lifetime error: struct ResultItemIterator { cursor: sqlite3::cursor::Cursor } ?
[20:26:22] <ercxx> `error: wrong number of lifetime parameters: expected 1 but found 0`
[20:26:37] *** Quits: hays (quassel@moz-5AECE958.washdc.east.verizon.net) (Ping timeout)
[20:26:39] <ercxx> for the inner variable
[20:26:59] <eddyb> Matthias247: it's my invention - and it doesn't have a nice interface without DST :/
[20:27:04] *** Joins: mib_44yt7k (Mibbit@795FB2B4.996F3747.DDE5D3F6.IP)
[20:27:27] <eddyb> Matthias247: https://gist.github.com/eddyb/f828f8ce819a5f00d42d#file-many-rs-L55-L84
[20:27:56] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[20:27:56] <mib_44yt7k> Hey I'm having trouble opening a file location passed through GET. Some kind of io error
[20:28:00] *** Joins: hays (quassel@moz-934A3C9.washdc.east.verizon.net)
[20:28:01] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[20:28:32] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[20:28:55] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[20:28:56] <ercxx> mib_44yt7k: what kind of error?
[20:29:50] *** Joins: luzie (lucy@moz-CD18B14B.customer.cdi.no)
[20:30:09] *** Quits: luziie (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[20:31:04] <mib_44yt7k> ercxx: it's an ioError{kind: OtherIoError, desc "bad file descriptor", detail: None}. It's occurring when I try to write the contents of a file to a buffered stream
[20:31:26] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[20:31:26] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[20:31:34] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[20:32:04] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[20:32:18] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:33:36] <Matthias247> eddyb: looks hacky ;)
[20:33:41] <ercxx> can you put up some code a pastebin somewhere?
[20:33:50] <ercxx> mib_44yt7k: pastebin?
[20:34:31] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[20:34:35] *** Quits: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP) (Ping timeout)
[20:34:40] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:35:01] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:35:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:35:43] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[20:35:45] *** Quits: hays (quassel@moz-934A3C9.washdc.east.verizon.net) (Ping timeout)
[20:36:35] <mib_44yt7k> ercxx: yeah here it is, http://pastebin.com/rQLUGzEj
[20:36:37] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[20:36:53] *** Joins: hays (quassel@moz-C1413E58.washdc.east.verizon.net)
[20:37:09] <mib_44yt7k> ercxx: error occurring I think around line 51, but it compiled for me
[20:37:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:38:08] <ercxx> mib_44yt7k: what version of rust are you using?
[20:38:15] <mib_44yt7k> ercxx: .9
[20:38:46] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[20:39:58] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[20:40:02] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[20:40:21] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Quit: Ex-Chat)
[20:40:28] <ercxx> I'm getting way too many errors mostly related to imports.
[20:40:56] <mib_44yt7k> ercxx: Oh wait I think I forgot to include those. Hold on, I'll update that
[20:41:13] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[20:42:30] <mib_44yt7k> ercxx: Sorry about that, http://pastebin.com/T668NPdq
[20:42:41] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[20:42:48] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[20:44:43] *** Joins: jwang (Zealtron@931CA3C.CE6A8161.D5851B94.IP)
[20:45:11] <ercxx> mib_44yt7k: it works here
[20:45:32] <ercxx> what was the problem?
[20:46:36] <Tobba>  failed to find an implementation of trait core::io::Print for [type error]
[20:46:41] <Tobba> not exactly sure whats up with this one
[20:47:00] <mib_44yt7k> ercxx: when I run the program and go to local host 4414 requesting an existing html page (just a basic hello world), that's when it throws the error on the terminal and the page doesn't load
[20:47:07] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Quit: moostik)
[20:47:27] <ercxx> mib_44yt7k: I got a scary looking greetings messages.
[20:47:42] <ercxx> only one message
[20:48:10] <Matthias247> why do you create a file when you want to read one?
[20:48:14] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[20:48:29] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[20:48:32] *** Parts: jwang (Zealtron@931CA3C.CE6A8161.D5851B94.IP) ()
[20:48:36] <Matthias247> you open a file in write-only mode and try to read from it
[20:48:37] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[20:49:03] *** Quits: hays (quassel@moz-C1413E58.washdc.east.verizon.net) (Ping timeout)
[20:49:12] <Matthias247> File::open is probably what you want
[20:49:18] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[20:49:34] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[20:49:34] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[20:49:46] <mib_44yt7k> that looks like it. So that would replace the "File::create" then?
[20:49:57] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: )
[20:50:03] <ercxx> mib_44yt7k: as Matthias247 said : use File::open
[20:50:08] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[20:50:39] *** Joins: andreasvc (andreasvc@moz-29FD4A0A.dynamic.upc.nl)
[20:51:15] *** Joins: hays (quassel@moz-983FED8B.washdc.east.verizon.net)
[20:51:17] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[20:51:49] <mib_44yt7k> So that solves the error in terminal however the html still isn't viewable on the browser
[20:51:49] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[20:52:01] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[20:52:02] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:52:30] *** Joins: blaphmat (Mibbit@moz-3030E602.adsl2.static.versatel.nl)
[20:53:21] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:53:21] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Connection reset by peer)
[20:53:26] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[20:53:47] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Ping timeout)
[20:54:11] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[20:55:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:55:03] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[20:57:12] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[20:57:19] *** Quits: bt3ze_ (ben@moz-65042F80.dhcp.embarqhsd.net) (Client exited)
[20:57:50] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[20:58:01] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[20:58:06] <Matthias247> do you even get the "File found" message?
[20:58:29] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[20:58:34] <mib_44yt7k> Yes
[20:59:19] <Matthias247> hmm, are you sure it's the correct file or an empty one that the ::create before created? :)
[20:59:42] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Ping timeout)
[21:00:10] <Matthias247> I can't believe that filename extraction is correct
[21:00:42] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[21:01:16] *** Quits: yshahin (uid24052@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[21:01:20] *** Joins: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP)
[21:01:28] *** Quits: fabiand (fabiand@moz-3814939D.static.hackerspace-bremen.de) (Quit: Verlassend)
[21:01:38] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[21:02:43] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[21:02:47] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[21:03:18] *** Quits: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP) (Ping timeout)
[21:03:41] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[21:03:52] <apoelstra> is there published code to make rust-http server read request bodies?
[21:03:58] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[21:03:59] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: io2)
[21:04:31] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:04:38] <mib_44yt7k> So it turned out there was an empty file of that name that it was calling. I deleted said file so only mine with the correct name exists, and now we're at a file not found error
[21:05:12] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[21:05:34] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:05:35] *** Joins: Saj (Mibbit@moz-840D0658.netvisao.pt)
[21:05:38] *** Quits: alexherbo2 (alexherbo2@moz-FC10E83F.de) (Quit: WeeChat 0.4.2)
[21:05:41] <Matthias247> you have at least a   too much at the end of the filename :)
[21:06:20] <Matthias247> thats's wrong:  let fname = fileReq.slice(5,index).to_owned();
[21:06:22] <mib_44yt7k> so reduce index by one before opening the file
[21:06:23] *** Quits: Saj (Mibbit@moz-840D0658.netvisao.pt) (Quit: http://www.mibbit.com ajax IRC Client)
[21:06:44] *** Joins: Saj (Sajuuk@moz-840D0658.netvisao.pt)
[21:06:54] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[21:07:13] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[21:10:01] <mib_44yt7k> That fixes it! Thank you so much!
[21:12:02] *** Quits: hays (quassel@moz-983FED8B.washdc.east.verizon.net) (Ping timeout)
[21:13:15] *** Joins: hays (quassel@moz-762EEAA5.washdc.east.verizon.net)
[21:14:04] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[21:14:04] *** Joins: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[21:15:47] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[21:15:50] *** Parts: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) ()
[21:16:03] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:16:05] <marc_> Is rust-http actually getting any love?
[21:16:37] *** Joins: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr)
[21:17:49] *** Joins: justin (justin@moz-6E711304.hsd1.va.comcast.net)
[21:17:53] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[21:17:59] <Matthias247> doesn't make sense to put too much love in it with the current state of the IO APIs
[21:18:38] <mib_44yt7k> Ok, new issue, hopefully simpler
[21:19:17] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[21:20:01] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[21:20:11] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:20:28] <justin> I am having an issue with getting command line params in rust 0.9.  I am getting the error that args has been partially moved
[21:21:00] <kimundi> justin: Code? :)
[21:21:03] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[21:21:55] <justin> I am trying to get two file names
[21:22:26] <justin> let args: ~[~str] = os::args();
[21:22:27] <justin>     if args.len() != 3 {
[21:22:28] <justin>         println!("Usage: {:s} <inputfile> <inputfile>", args[0]); 
[21:22:30] <justin>     } else {
[21:22:31] <justin>         let fname1 = args[1];
[21:22:33] <justin>         let fname2 = args[2];
[21:22:41] *** Joins: synackse (jordyd@moz-E7A9AB16.seg59.ucf.edu)
[21:22:47] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[21:22:47] *** Quits: blaphmat (Mibbit@moz-3030E602.adsl2.static.versatel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[21:22:58] <kimundi> indexing directly like that will move the value out the vector, which will ibvalidate the whole vector afterwards
[21:23:27] <justin> kimnudi: so should I clone?
[21:23:58] <kimundi> For example, yeah. args[n].clone()
[21:24:15] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[21:24:23] *** Joins: ofeldt- (ofeldt@moz-4BB1FEB4.dip0.t-ipconnect.de)
[21:24:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:24:44] <justin> thank you kimundi!
[21:24:59] *** Quits: ofeldt (ofeldt@moz-16F18429.dip0.t-ipconnect.de) (Ping timeout)
[21:25:00] *** Joins: marianoguerra (marianogue@moz-46CE4B2B.dip0.t-ipconnect.de)
[21:25:02] <kimundi> Alternatively, pop each element separately of the vector
[21:26:11] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[21:26:12] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:26:58] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:27:03] *** Joins: mib_3c32td (Mibbit@moz-6485FCD9.dynamic.amis.net)
[21:28:01] <mib_44yt7k> Hey, how do you append a string to a vector of bytes?
[21:28:03] *** Quits: tdc (santegoeds@moz-1B982511.range31-53.btcentralplus.com) (Ping timeout)
[21:28:18] *** Quits: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[21:28:32] *** Quits: judofyr_ (judofyr@moz-8BB0A10D.nextgentel.com) (Client exited)
[21:28:47] <kimundi> mib_44yt7k: byte_vec.push_all(str.as_bytes())
[21:28:48] *** Joins: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP)
[21:28:53] <kimundi> ought to work, I think
[21:29:03] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[21:29:16] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[21:29:26] <kimundi> basically, gets a byte slice from the string, and pushes it to the byte vector
[21:30:09] <kimundi> rusti: let mut byte_vec = ~[]; byte_vec.push_all("123".as_bytes()); byte_vec
[21:30:10] -rusti- ~[49u8, 50u8, 51u8]
[21:30:35] *** Quits: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP) (Ping timeout)
[21:30:45] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[21:30:49] <kimundi> (oh hey, that actually worked on the first try :P)
[21:31:26] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[21:31:47] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[21:32:11] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[21:32:51] *** Quits: mib_3c32td (Mibbit@moz-6485FCD9.dynamic.amis.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:33:42] <Ms2ger> kimundi, achievement unlocked :)
[21:33:42] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[21:35:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:37:22] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:37:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:38:00] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[21:39:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:39:53] <mib_44yt7k> kitmundi: my only issue is that the string should be first, so I need to convert it to an owned vector, which .as_bytes() doesn't do
[21:40:49] <kimundi> mib_44yt7k: just tack a .to_owned() after the as_bytes() call
[21:41:19] <johnsoft> isn't there an into_bytes() method?
[21:41:33] <kimundi> Hm, I gues there is
[21:41:42] <kimundi> rusti: "123".into_bytes()
[21:41:43] -rusti- <anon>:10:9: 11:6 error: type `&'static str` does not implement any method in scope named `into_bytes`
[21:41:43] -rusti- <anon>:10         "123".into_bytes()
[21:41:43] -rusti- <anon>:11     };
[21:41:43] -rusti- error: aborting due to previous error
[21:41:43] -rusti- application terminated with error code 101
[21:42:05] <kimundi> or not :P (At least not imported per default)
[21:42:08] <johnsoft> rusti: (~"123").into_bytes()
[21:42:09] -rusti- ~[49u8, 50u8, 51u8]
[21:42:16] <johnsoft> gotta be owned :)
[21:42:35] <eddyb> ah, yeah, that's just a cast
[21:42:50] <eddyb> rusti: "123".to_bytes()
[21:42:51] -rusti- <anon>:10:9: 11:6 error: type `&'static str` does not implement any method in scope named `to_bytes`
[21:42:51] -rusti- <anon>:10         "123".to_bytes()
[21:42:51] -rusti- <anon>:11     };
[21:42:51] -rusti- error: aborting due to previous error
[21:42:51] -rusti- application terminated with error code 101
[21:43:10] <johnsoft> i'm glad my wandering around libstd finally proved useful
[21:43:12] <eddyb> weird, "to_" should've worked for &T -> ~U 
[21:44:38] <kimundi> Well, afaik the stance is "as_bytes is enough"
[21:45:08] <kimundi> There is a constant battle between having to much and to few convenience functions :P
[21:45:30] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:45:53] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[21:47:16] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[21:50:16] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[21:50:38] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[21:51:42] *** Joins: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr)
[21:52:36] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[21:53:51] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[21:54:33] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Client exited)
[21:54:38] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[21:54:54] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[21:55:44] *** Joins: bt3ze_ (ben@moz-65042F80.dhcp.embarqhsd.net)
[21:55:44] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Connection reset by peer)
[21:56:16] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[21:56:53] *** Quits: bt3ze_ (ben@moz-65042F80.dhcp.embarqhsd.net) (Client exited)
[21:57:21] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[21:57:24] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[21:58:03] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[21:58:08] *** Quits: mib_44yt7k (Mibbit@795FB2B4.996F3747.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:58:56] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:59:05] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Ping timeout)
[21:59:05] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[21:59:30] *** Quits: Kambfhase (quassel@moz-4FE2BA40.travedsl.de) (Client exited)
[21:59:45] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[21:59:45] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[22:00:18] *** Joins: chiiph (chiiph@moz-C76AFF03.com.ar)
[22:00:27] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[22:00:52] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[22:01:23] *** Parts: chiiph (chiiph@moz-C76AFF03.com.ar) (http://quassel-irc.org - Chat comfortably. Anywhere.)
[22:01:27] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[22:01:54] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[22:02:26] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[22:02:53] *** Quits: pachuco (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[22:04:04] <olsonjeffery> acrichto: hey did the issue rustpkg and libnative ever get sorted?
[22:04:14] <olsonjeffery> i have a build of rust from last night and still am getting the error..
[22:05:18] <acrichto> olsonjeffery: I thought it did yeah
[22:05:19] *** Joins: Kjelle (karl@moz-58495553.static.spa.siw.siwnet.net)
[22:05:43] *** Quits: jackneill (jackneill@moz-E07BD7BD.pool.digikabel.hu) (Ping timeout)
[22:05:53] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:05:58] <olsonjeffery> hm.
[22:08:32] *** Quits: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net) (Quit: Leaving)
[22:08:58] *** Joins: igork (Mibbit@moz-7C0490C0.broadband.corbina.ru)
[22:09:17] <olsonjeffery> acrichto: yeah and, interestingly.. my previous hack (putting libnative-*.dylib into ~/lib) isn't working either
[22:09:20] <olsonjeffery> so i wonder if its something else
[22:09:28] *** Joins: awidegreen (awidegreen@102110F6.2545CD3.3688B332.IP)
[22:09:30] *** Joins: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net)
[22:09:50] *** flaper87 is now known as flaper87|afk
[22:10:36] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[22:10:39] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[22:11:12] *** Quits: heftig (heftig@moz-8FF1C6CF.dip0.t-ipconnect.de) (Ping timeout)
[22:12:00] *** Quits: nkoep (nik@moz-5B8BC9B8.pool.mediaways.net) (Quit: Leaving)
[22:12:35] *** Quits: gud4nothi (gud4nothin@moz-8174818F.bbtec.net) (Quit: )
[22:13:41] <olsonjeffery> oh this is obviously something with my install
[22:14:00] <olsonjeffery> i commented out `extern mod native;` and it complained about not being able to find extra.
[22:14:18] <olsonjeffery> maybe its rustpkg
[22:14:19] *** Quits: rca_ (rcatolino@moz-D690CDA.adsl.proxad.net) (Ping timeout)
[22:14:26] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[22:14:52] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Client exited)
[22:15:13] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[22:16:59] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:16:59] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Ping timeout)
[22:17:06] *** Joins: kvanb (kvanb@moz-8905108.lns2.win.bigpond.net.au)
[22:17:28] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[22:18:05] *** Joins: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP)
[22:18:07] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[22:19:22] <jmgrosen> acrichto: I'm back, and it looks like it got past the `ar` problems, but now I'm having a problem when building libuv: https://gist.github.com/jmgrosen/3c4af346aef31ca7a2b2
[22:20:07] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[22:21:30] <acrichto> jmgrosen: hm, I don't think we've had much successfull cross compilations from osx to android yet, I haven't seen that error before though
[22:21:47] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[22:22:01] <jmgrosen> acrichto: alright, I'll mess around with it a bit and see if I can't get it working
[22:23:22] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[22:23:59] *** Joins: canhtak (canhtak@moz-A9D61E16.wl.t.ulaval.ca)
[22:24:07] *** Joins: heftig (heftig@moz-EC787286.dip0.t-ipconnect.de)
[22:25:02] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:25:32] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[22:25:53] <jmgrosen> acrichto: it seems like it's treating gcc as clang and thus giving it clang-specific options
[22:25:53] *** jorendorff_away is now known as jorendorff
[22:26:11] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[22:26:13] <acrichto> jmgrosen: interesting! I wonder if that's part of the libuv build system...
[22:26:39] <jmgrosen> acrichto: actually, maybe not -- it looks more like it thinks it's apple's gcc rather than stock gcc
[22:26:57] <jmgrosen> maybe?
[22:27:03] <jmgrosen> hm
[22:27:04] <jmgrosen> not sure
[22:27:33] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[22:28:52] *** Quits: gwty (gwtypc@77155052.CFFB58E3.27560D6E.IP) (Ping timeout)
[22:29:24] *** Joins: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP)
[22:29:29] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[22:30:55] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[22:31:09] *** Quits: synackse (jordyd@moz-E7A9AB16.seg59.ucf.edu) (Connection reset by peer)
[22:31:20] *** Quits: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP) (Ping timeout)
[22:31:33] *** Joins: synackse (jordyd@moz-AC844A4B.seg44.ucf.edu)
[22:32:08] <derek_c> how do you build only stage 2?
[22:32:59] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:34:13] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[22:36:29] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[22:36:52] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[22:37:38] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[22:38:00] *** Quits: agoforth (agoforth@moz-7C3460C.pool.mediaways.net) (Ping timeout)
[22:38:31] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[22:38:57] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[22:39:23] *** Joins: matthewbot (user@moz-C6814817.ga.at.cox.net)
[22:40:12] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[22:40:53] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[22:41:48] <cmr> derek_c: make stage2-rustc
[22:41:53] <cmr> but that doesn't skip the earlier stages...
[22:42:57] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[22:43:25] <derek_c> cmr: what I'm trying to figure out is, currently after I modify rustpkg and do `make`, it builds it in stage 1 and then in stage 2, which is rather unnecessary.  It'd be nice if I can only build it in stage 2, reusing the stuff in stage 1
[22:43:55] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[22:44:12] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[22:44:41] <Kjelle> I tried to implement AnyRefExt for my trait in order to check type of implementors. But it does not work, has anyone done this?
[22:45:47] <Kjelle> It compiles but the is-function always returns false, except if I check against the trait type
[22:46:11] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[22:46:12] <cmr> Kjelle: you can't implement for traits, do you have a code example?
[22:47:24] <cmr> derek_c: well, why not just use the stage1 rustpkg?
[22:47:26] <jmgrosen> acrichto: okay, got it to compile, but now it's complaining about libtool... time to do some more hunting
[22:48:09] <acrichto> jmgrosen: this is building libuv?
[22:48:14] <jmgrosen> yup
[22:48:36] <jmgrosen> I got the object files, but it's trying to use libtool from Xcode
[22:48:55] <acrichto> :(
[22:49:33] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[22:49:39] <derek_c> cmr: for rustc it's possible, but how do you only build rustpkg for stage 1?
[22:49:58] *** Quits: awidegreen (awidegreen@102110F6.2545CD3.3688B332.IP) (Ping timeout)
[22:50:01] <Kjelle> cmr: https://gist.github.com/KarlZylinski/8640508
[22:50:03] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[22:50:06] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:50:21] <Kjelle> copied the anyrefext code from the implementation for Any
[22:50:29] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[22:50:52] <kimundi> Kjelle: for &'a ~Entity is the problem
[22:50:56] *** Quits: Ms2ger (Ms2ger@moz-EF1E89E8.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:51:04] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[22:51:05] <Kjelle> I has a feeling that was the issue.
[22:51:12] <kimundi> implement for &'a Entity
[22:51:23] <Kjelle> That does not compile : (
[22:51:43] *** Quits: synackse (jordyd@moz-AC844A4B.seg44.ucf.edu) (Ping timeout)
[22:51:52] <kimundi> Kjelle: Your entity does not inherit from Any
[22:51:59] <Kjelle> oh =)
[22:52:01] <kimundi> pub trait Entity: Any { ... }
[22:52:02] <Kjelle> snap!
[22:52:03] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:53:11] <kimundi> Erm, is Player a struct that implements Entity, or is it a trait too?
[22:53:18] *** Quits: skrylar (skrylar@moz-F692F728.austin.res.rr.com) (Quit: leaving)
[22:53:24] <Kjelle> yes it implements entity
[22:53:31] <Kjelle> both enemy and player implements entity
[22:53:37] <kimundi> So its a struct, okay
[22:53:38] <Kjelle> and i store them in a vector as ~Entity
[22:53:43] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[22:53:50] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[22:53:53] <kimundi> Then further down you want is::<Player>, not is::<~Player> :)
[22:54:23] <Kjelle> Yes, now it works! Got past the fail-cases :)
[22:54:25] <Kjelle> Thank you!
[22:54:30] <kimundi> yay :)
[22:54:31] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[22:55:35] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[22:55:37] <Kjelle> I'm new to rust and still a bit confused about everything
[22:55:50] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[22:56:07] <Kjelle> Had no idea traits could inherit stuff, thanks : >
[22:56:08] <aatch> Kjelle, it's fine, Rust is not the easiest language in the world
[22:56:40] <Kjelle> Nah, loving everything about it so far though :)
[22:56:55] <kimundi> And re imlementing Any is also not one of the easiest things to first do in Rust - so its fine :)
[22:57:15] <SiegeLord> I wonder who ends up staying with Rust longer... those with a positive initial reaction, or those with a negative one...
[22:57:21] <apoelstra> hey all, i am seeing "&mut buffer::BufferedStream<std::io::net::tcp::TcpStream>` does not implement any method in scope named `read_line`" but read_line is part of the Buffer trait, which is implemented for buffer::BufferedStream on libstd/io/buffered.rs:328
[22:58:07] <kimundi> apoelstra: Is the Buffer trait imported?
[22:58:10] <aatch> apoelstra, do you have the trait imported?
[22:58:19] <apoelstra> yeah, i have use std::io::{Stream, Reader, Buffer};
[22:58:24] *** Joins: alexherbo21 (alexherbo2@moz-FC10E83F.de)
[22:58:44] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[22:58:47] *** Quits: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[22:58:50] <quux00> Rust newbie here - I need help with this code: https://gist.github.com/quux00/8640562
[22:58:50] *** Quits: alexherbo21 (alexherbo2@moz-FC10E83F.de) (Quit: WeeChat 0.4.2)
[22:58:51] <quux00> Why does the compiler think my "mutvec" is immutable?
[22:59:02] *** Joins: alexherbo2 (alexherbo2@moz-FC10E83F.de)
[22:59:38] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[23:00:07] <apoelstra> quux00: i'd expect the compiler to flag the previous line, newvec is immutable but you assign it to mutvec
[23:00:59] <aatch> apoelstra, nah, that's fine.
[23:01:10] <quux00> Can immutable vectors not be assigned to mutable handles?
[23:01:10] <aatch> Since he does a clone, he owns it
[23:01:31] <aatch> so it moves from newvec to mutvec
[23:01:43] <aatch> (which isn't necessary, but that's irrelevant.
[23:01:55] *** Joins: erickt_ (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[23:02:00] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[23:02:22] *** Quits: marianoguerra (marianogue@moz-46CE4B2B.dip0.t-ipconnect.de) (Ping timeout)
[23:02:37] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Client exited)
[23:02:43] <quux00> I tried "let mut newvec = vec.clone()" and got the same error, so just put it on multiple lines to see where the problem was happening.
[23:02:59] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[23:03:08] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[23:03:23] *** Joins: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[23:03:34] <aatch> quux00, well I don't know what that's happening. However, what you're doing there is generally considered bad practice anyway.
[23:03:43] <aatch> s/what/why/
[23:04:03] <quux00> I'm open to better ways to do it.  Mostly I'm just playing around to learn Rust.
[23:04:09] <aatch> You shouldn't take a slice and immediately copy it, take the owned slice.
[23:04:14] <aatch> owned vector*
[23:04:28] *** Joins: bt3ze_ (ben@moz-65042F80.dhcp.embarqhsd.net)
[23:04:41] <aatch> Since it pushes the choice of whether to copy to the caller.
[23:04:45] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Ping timeout)
[23:05:04] <aatch> It also means less copying and allocation, since you do 2 allocations there.
[23:05:35] <aatch> That also means you can drop the Clone bound on the type
[23:05:50] <quux00> Sorry, not sure how to implement what you just said.  
[23:05:56] <quux00> Could you do a code example?
[23:06:03] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[23:06:03] *** Quits: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Ping timeout)
[23:06:03] <kimundi> and shuffling it with the shuffle function ther would still work btw :
[23:06:12] *** Joins: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[23:06:21] <aatch> kimundi, that too.
[23:06:28] <cmr> derek_c: there's a make target somewhere... not sure what it is off the top of my head
[23:07:07] <aatch> quux00, the signature for shuffle_owned should be `fn shuffle_owned<T>(v: ~[T]) -> ~[T]`
[23:07:35] <quux00> Aah, I see what you mean.  Let me try that.
[23:08:08] <kimundi> rusti: fn foo<T>(v: &mut [T]) {  } fn shuffle_owned<T>(v: ~[T]) -> ~[T] { let mut v = v; foo(v); v } shuffle_owned(~[1u, 2, 3])
[23:08:09] -rusti- <anon>:10:19: 10:20 warning: unused variable: `v`, #[warn(unused_variable)] on by default
[23:08:09] -rusti- <anon>:10         fn foo<T>(v: &mut [T]) {  } fn shuffle_owned<T>(v: ~[T]) -> ~[T] { let mut v = v; foo(v); v } shuffle_owned(~[1u, 2, 3])
[23:08:09] -rusti-                             ^
[23:08:09] -rusti- ~[1u, 2u, 3u]
[23:08:13] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[23:08:16] <aatch> Actually, `fn shuffle_owned<T>(mut v: ~[T]) -> ~[T]` would do better
[23:08:41] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[23:09:08] *** Joins: synackse (jordyd@moz-AC844A4B.seg44.ucf.edu)
[23:09:12] *** Joins: Dre (Mibbit@moz-8BE9FE5F.cpe.pppoe.ca)
[23:09:13] *** Quits: Ferreus (ferreus@moz-B91E8273.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[23:09:15] <kimundi> well, `fn shuffle_owned<T>(mut v: ~[T]) -> ~[T]` and `fn shuffle_owned<T>(v: ~[T]) -> ~[T]` is exactly the same function signature - the prior just shortens the implementation
[23:09:33] <quux00> Yep, beautiful.  Both of those suggestions work. Thanks!
[23:09:52] <aatch> kimundi, yeah, I know makes it easier to understand the code (imo), since you don't have let mut v = v;
[23:10:00] *** Joins: jdsanders1 (Adium@moz-9FDB729E.hlrn.qwest.net)
[23:10:05] *** Quits: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net) (Connection reset by peer)
[23:12:10] <kimundi> aatch: Yeah, but its also confusing at the beginning if one does not yet know what all the mut's where in a function signature mean :)
[23:12:47] *** Quits: Dre (Mibbit@moz-8BE9FE5F.cpe.pppoe.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[23:13:12] <aatch> kimundi, what do you mean `fn foo<T>(mut v: &mut [&mut T]) -> &mut T` is obvious :P
[23:13:31] <kimundi> haha, yeah :P
[23:13:38] <kimundi> wedge a ref mut in there too!
[23:14:00] <kimundi> `fn foo<T>(mut ref mut v: &mut [&mut T]) -> &mut T`
[23:14:06] <aatch> fn foo<T>(ref mut &mut v: &mut [&mut T]) -> &mut T
[23:14:12] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[23:14:22] * aatch doesn't think that works
[23:14:38] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[23:14:45] <kimundi> rusti: fn foo<T>(mut ref mut v: &mut [&mut T]) -> &mut T {}
[23:14:46] <aatch> rusti: fn foo<T>(ref mut &mut v: &mut [&mut T]) -> &mut T { fail!() }
[23:14:49] -rusti- pastebinned 7 lines of output: http://ix.io/a8L
[23:14:49] -rusti- <anon>:10:23: 10:26 error: expected identifier, found path
[23:14:49] -rusti- <anon>:10         fn foo<T>(ref mut &mut v: &mut [&mut T]) -> &mut T { fail!() }
[23:14:49] -rusti-                                 ^~~
[23:14:50] -rusti- application terminated with error code 101
[23:15:02] <kimundi> uhm - you try first! :P
[23:15:13] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[23:15:17] <aatch> rusti: fn foo<T>(ref &mut v: &mut [&mut T]) -> &mut T { fail!() }
[23:15:18] -rusti- <anon>:10:19: 10:22 error: expected identifier, found path
[23:15:18] -rusti- <anon>:10         fn foo<T>(ref &mut v: &mut [&mut T]) -> &mut T { fail!() }
[23:15:18] -rusti-                             ^~~
[23:15:18] -rusti- application terminated with error code 101
[23:15:26] <aatch> Yeah, thought so.
[23:15:35] <kimundi> &mut is not avalid pattern
[23:15:48] <kimundi> In a pattern, & destructures both & and &mut
[23:15:49] <aatch> kimundi, it is, just not for vectors
[23:15:54] <aatch> Oh right
[23:15:58] <aatch> I forgot that.
[23:16:50] <kimundi> The scary thing is that &mut v is still legal - it just parses as &(mut v) xD - or at least, ought to parse as that
[23:17:52] <kimundi> I guess throwing & and ~ pattern destructuring out, and replacing them with a generic deref pattern would improve that somewhat :P
[23:18:20] <kimundi> Anyway, I'm off to bed
[23:18:54] *** Joins: jvrmaia (jvrmaia@3B638C29.261EB871.DF2AC62B.IP)
[23:21:18] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[23:21:25] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[23:22:06] *** Quits: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Ping timeout)
[23:22:40] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[23:23:17] <jmgrosen> acrichto: so gyp seems to be thinking for some things that it's building for OS X... even though it looks like -DOS=linux is being passed
[23:23:24] *** Joins: skrylar (skrylar@moz-F692F728.austin.res.rr.com)
[23:26:34] <mankyKitty> "fn foo(x:libc::c_int, ...);" invalid for an extern {} fn declaration, yes?
[23:27:18] <dbaupp> mankyKitty: no, why?
[23:27:31] <dbaupp> (as in, why would it be invalid?)
[23:27:52] <benh> petition to rename the language so we stop getting people submitting rust-the-game content to our reddit thing :)
[23:28:18] <dbaupp> benh: eurgh, no; get them to rename the game
[23:28:22] <derek_c> Is there a std thing that allows you to copy a directory?
[23:28:43] <mankyKitty> dbaupp: wasn't sure
[23:28:44] <benh> dbaupp: but they have more sales!
[23:29:05] <benh> though they're still pre-release too :D
[23:30:00] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[23:30:03] *** jorendorff is now known as jorendorff_away
[23:30:09] <mankyKitty> dbaupp: stupid enter key, .... wasn't sure of the desired behaviour. 
[23:30:17] *** Joins: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP)
[23:30:47] *** kimundi is now known as zz_kimundi
[23:32:03] *** Quits: lpy (lpy@2D0E5B97.EBF6444D.E99F7FDB.IP) (Ping timeout)
[23:32:05] *** Joins: jeremyjh (jeremy@moz-A74761CA.fttp.sta.comporium.net)
[23:32:30] <mankyKitty> also, git question (sorry ><).. To keep my remote PR update to date after a rebase, I can just push to it yes?
[23:33:05] <benh> git questions are perfectly fine :)
[23:33:18] <benh> Yeah, you can just push to the branch that you made a PR from, and the PR will update
[23:33:35] <benh> You'll probably need to push with -f to make it go through after a rebase
[23:35:40] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:36:03] <mankyKitty> benh: PHEW
[23:36:21] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[23:37:00] *** Quits: amir (amir@moz-49060BB9.cust.bluewin.ch) (Ping timeout)
[23:41:22] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[23:42:18] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[23:42:20] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:42:51] *** Quits: synackse (jordyd@moz-AC844A4B.seg44.ucf.edu) (Ping timeout)
[23:43:08] <Luqman> jmgrosen: you might need to do something similar to this https://github.com/alexcrichton/libuv/pull/2/files
[23:44:01] *** Quits: erickt_ (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[23:44:32] *** Quits: jvrmaia (jvrmaia@3B638C29.261EB871.DF2AC62B.IP) (Client exited)
[23:44:58] *** Joins: jvrmaia (jvrmaia@3B638C29.261EB871.DF2AC62B.IP)
[23:45:03] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[23:45:07] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[23:45:17] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[23:45:51] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[23:46:16] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[23:46:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:46:33] *** ChanServ sets mode: +ao brson brson
[23:46:37] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[23:46:42] *** Quits: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com) (Quit: Leaving)
[23:46:49] *** Joins: jvrmaia_ (jvrmaia@3B638C29.261EB871.DF2AC62B.IP)
[23:46:53] *** Quits: jvrmaia (jvrmaia@3B638C29.261EB871.DF2AC62B.IP) (Ping timeout)
[23:47:03] *** Joins: erickt_ (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[23:47:06] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[23:47:17] *** Quits: bt3ze_ (ben@moz-65042F80.dhcp.embarqhsd.net) (Client exited)
[23:47:23] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[23:47:23] *** ChanServ sets mode: +ao brson brson
[23:47:38] *** Joins: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net)
[23:48:02] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[23:48:26] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[23:49:25] *** Quits: bt3ze (ben@moz-65042F80.dhcp.embarqhsd.net) (Ping timeout)
[23:49:48] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[23:50:57] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Ping timeout)
[23:51:15] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Ping timeout)
[23:51:15] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[23:51:15] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[23:51:22] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[23:51:25] <jmgrosen> Luqman: that's essentially what I did -- I made it use -f make-linux, though (which should accomplish the same thing)
[23:51:28] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Connection reset by peer)
[23:51:49] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[23:51:54] *** Joins: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com)
[23:52:20] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[23:52:51] *** Quits: nical (nico@moz-7EE986F9.fbx.proxad.net) (Ping timeout)
[23:53:32] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[23:53:33] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[23:53:33] *** Joins: Cork (Cork@456A2672.BA574D4D.BB9C2183.IP)
[23:53:34] *** Joins: nomme (nomme@9220B81C.F5690645.B3DDC20A.IP)
[23:55:06] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[23:55:16] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[23:55:23] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[23:58:18] *** Joins: brson_ (brson@moz-BBE3ABD.mv.mozilla.com)
[23:59:03] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[23:59:15] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[23:59:34] *** Quits: brson_ (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[23:59:38] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:59:38] *** ChanServ sets mode: +ao brson brson
