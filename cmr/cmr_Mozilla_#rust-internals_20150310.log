[00:00:17] <bstrie> arrrrrrrrr: this is an example of antagonism, please stop
[00:00:23] <Gankro> eungh not today
[00:00:25] <theme> Gankro, arrrrrrrrr's comment might be reasonable if you read this: https://github.com/rust-lang/rfcs/pull/956#issuecomment-77906756
[00:00:38] <theme> I mean, not seem out-of-context
[00:01:15] <cmr> theme: I think all of those questinos should be answered, especially #2 and #6
[00:01:41] <theme> cmr, a question worth mentioning is a question worth answering
[00:02:03] <theme> But I'm mainly concerned with #5 and #6
[00:02:03] <huon> theme: some people may think those questions aren't worth mentioning ;)
[00:02:25] <huon> (that is to say, cmr apparently thinks that those questions are worth mentioning)
[00:02:30] <theme> at least *someone* should find them worth answering
[00:02:32] *** Joins: swgillespie (swgillespie@moz-eie.3un.220.167.IP)
[00:02:46] <cmr> Without an answer to #2, the RFC is meaningless to me.
[00:03:13] <theme> cmr, do you have an example of many manual cmp impl's?
[00:03:32] <theme> note that #[derive] is not affected
[00:03:52] <cmr> No, and I think the answer to the question is "yes", but it should be addressed by the RFC
[00:04:04] <cmr> You should make the case that the benefit is worth the extra unsafe.
[00:04:14] <theme> ok...
[00:05:39] *** Joins: goffrie (uid69670@moz-1c9019.brockwell.irccloud.com)
[00:05:57] <bstrie> surely we wouldn't just let you derive unsafe traits
[00:06:15] <theme> bstrie, why not?
[00:06:31] <theme> if we can ensure that the derived traits follow the invariants
[00:07:02] <bstrie> maybe. I'm wary of any code generation that involves unsafe
[00:07:05] <bstrie> it's sneaky
[00:07:25] <theme> bstrie, not too hard for comparison, I think
[00:07:48] <cmr> bstrie: the derivation is what makes it safe.
[00:07:57] <bstrie> theme: have you seen the postponed RFC about changing the API for overloading operators?
[00:08:21] <bstrie> the one that gets rid of the traits entirely
[00:08:35] <bstrie> or at least deemphasizes them. can't get rid of them outright for BC
[00:08:53] <theme> bstrie, which one?
[00:08:57] <reem> the ad-hoc overloading one?
[00:09:03] <reem> #[operator="+"]?
[00:09:12] <theme> C++ style?
[00:09:26] <bstrie> that one, yes
[00:09:34] <bstrie> I'm curious if that one would subsume this one
[00:09:41] <bstrie> given that you could make the functions themselves unsafe
[00:09:58] * theme discards that idea
[00:10:22] <bstrie> https://github.com/rust-lang/rfcs/pull/399
[00:11:31] <theme> cmr, edited the PR to mention that only a few `unsafe`s are required
[00:12:02] <theme> bstrie, I see no reason that is better than traits
[00:13:07] <reem> The unsafe comparisons proposal seems short sighted - there will later be a great number of traits with associated semantics and guarantees, and they can't all be unsafe.
[00:13:12] <bstrie> I have no dog in this race, but I think it would make sense to consider that there are people who would like the traits to go away entirely
[00:13:30] <theme> reem, such as?
[00:13:58] <reem> theme: e.g. Monad, Functor, Applicative, Monoid, etc.
[00:13:59] *** Joins: doomlord_mbp (textual@moz-tv67ph.range86-148.btcentralplus.com)
[00:14:09] <theme> reem, oh O_o
[00:14:12] <cmr> reem: Requiring invariants to be held in unsafe code seems damn useful to me, so my line of thinking is, "why not?"
[00:14:19] <reem> Just "other traits with invariants"
[00:14:46] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[00:14:48] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Quit: Leaving...)
[00:15:00] <cmr> there is a philosophy that if the trait doesn't guarantee the invariant, it has no purpose, and I rather agree with that.
[00:15:07] <theme> reem, that said, I don't see how *those* traits could cause memory unsafety
[00:15:10] <reem> cmr: Because we shouldn't just be throwing unsafe at every source of incorrectness
[00:15:17] <reem> unsafe is about memory safety, not program correctness
[00:15:34] <cmr> They can be tied very strongly in some cases.
[00:15:37] <theme> relying on cmp traits' invariants *can* cause memory safety issues
[00:15:47] <theme> like a sort algorithm going out of bounds
[00:16:07] <cmr> It's more of a matter of efficiency tht the invariants can help attain.
[00:16:09] <theme> or a binary search tree doing a null deref
[00:16:23] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[00:16:28] <reem> cmr: In some cases, yes; the tricky thing is deciding where we place the line, and I think moving it over the comparison traits sets a bad precedent for traits with additional guarantees
[00:16:36] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[00:16:54] <reem> theme: IMO those are bugs in the sort algorithm and BST
[00:17:02] * theme realizes that this RFC isn't going to be easily accepted
[00:17:13] <theme> reem, what about inefficiency?
[00:17:14] <reem> We are trying to abuse `unsafe` as a full proof system
[00:17:28] <cmr> reem: unsafe traits, yes.
[00:17:34] <theme> you can't implement, say, FromIterator and put `unsafe` there
[00:17:47] <reem> Without more features, that's a bad plan, IMO.
[00:18:23] <reem> cmr: The problem is that for Send/Sync it works since we have default traits, which are a very basic proof system
[00:18:24] <theme> what features?
[00:19:05] <reem> What we really want to say about the comparison traits is to attach a proof that must either be verified with some proving system or bypassed with `unsafe`
[00:19:12] <theme> btw is this related to the trusted iterator length problem?
[00:19:24] <reem> so either I can write an unsafe implementation or write some form of proof that my implementation is correct
[00:19:27] <cmr> reem: Would you rather actually have proof carrying code, with conditional impls provided that certain invariants truly are held?
[00:19:27] <theme> reem, that proving system is #[derive]
[00:19:51] <reem> cmr: I'm spitballing here, since I've just started thinking about this
[00:19:51] <theme> #[derive] is enough for many cases
[00:19:55] <cmr> I would
[00:19:57] <reem> cmr: There is a reason I use Rust and not Idris
[00:20:19] <reem> I wouldn't mind a proof system if it was manageable
[00:20:50] <theme> reem, does #[derive] qualify?
[00:21:05] <reem> theme: Not in my opinion
[00:21:19] <huon> #[derive] proves a theorem assuming subtheorems
[00:21:44] <huon> i.e. it assumes all the types it contains satisfy the invariants, and hence the #[derive]'d type also satisfies them
[00:21:45] <theme> reem, ^
[00:22:12] <reem> I agree with that statement
[00:22:24] <theme> Adding another commit to the RFC
[00:22:32] <huon> however it is proving a particular theorem, that may not actually be the correct one for the #[derive]'d type
[00:22:40] <theme> Didn't initially expect #[derive] to play such a central role in this RFC
[00:22:55] <theme> huon, those cases are relatively rare
[00:23:03] <huon> although I think the proved theorem is always safe
[00:23:05] <theme> and trying to catch them is unfeasible, right?
[00:23:08] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:23:13] <huon> yes, it is semantically impossible
[00:23:15] <reem> I would classify #[derive] as *a* proof, not as a system for proving.
[00:23:26] <huon> the compiler would have to know exactly what you intend to do
[00:23:30] <theme> reem, that's nitpicking over words
[00:23:35] <reem> No, it's not.
[00:23:50] <reem> #[derive] has one formula for taking subtheorems and proving a particular theorem with them
[00:23:54] <theme> Ok... I claim that the #[derive] *system* is a basic proof system
[00:23:57] <huon> IMO the `impl` is the proof
[00:24:02] <theme> which is *not complete*
[00:24:02] <huon> and #[derive] writes out a proof
[00:24:11] <reem> But if you need to do something else in your implementation, #[derive] is completely orthogonal to proving it correct
[00:24:28] <reem> huon: The impl is the proof of *a* implementation
[00:24:29] <huon> and hence #[derive] is deducing a proof
[00:24:33] <theme> By complete, I mean this: http://en.wikipedia.org/wiki/Completeness_(logic)
[00:24:43] <reem> A derived impl is an implementation whose *correctness* is also "proven"
[00:25:20] <reem> huon: I agree that #[derive] produces a proof, but it's not a system for generally proving things. It just knows a few proofs and can apply them to simple situations.
[00:25:21] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[00:25:31] <huon> for struct Foo; impl SomeTrait for Foo { ... } the theorem is "Foo satisfies the requirements of SomeTrait"
[00:25:37] <theme> reem, 95% of situations are simple
[00:25:37] <huon> and the `impl` is the 'proof' of that
[00:25:48] <theme> just #[derive(PartialEq, Eq)]
[00:25:49] <huon> now the proof may be incorrect
[00:26:14] <huon> but it's still the thing that would go between the "proof." and the "QED." in a mathematical paper :)
[00:26:19] <theme> This RFC is tricky :o
[00:26:56] <reem> huon: We're discussing different theorems then - I mean "Foo satisfies the requirements of SomeTrait, but *also* Foo's implementation of SomeTrait fulfills X, Y, and Z correctness criteria."
[00:27:16] <theme> reem, yes, why not
[00:27:21] <huon> reem: yes, different theorems
[00:27:22] <cmr> The "requirements" of a trait are merely the type signatures of its methods?
[00:27:28] <theme> huon, wait, what?
[00:27:31] <reem> theme: The compiler checks huon's theorem, but not mine.
[00:27:39] <theme> reem, wat
[00:27:44] <huon> cmr: and, implicitly, whatever stated invariants hold
[00:27:45] <theme> I thought it's the other way around
[00:28:00] <reem> theme: The RFC tries to use unsafe to have the compiler (but really the programmer, hence `unsafe`) "check" the second part of my theorem.
[00:28:01] * theme is confused
[00:28:02] <huon> cmr: (i.e. there's an element of "the proof the programmer has written could be wrong")
[00:28:19] <theme> reem, the `unsafe` implies that the proof is not in the computer
[00:28:27] <theme> maybe it's in the programmer's brain
[00:28:30] <reem> cmr: Generally, yes. But not for PartialOrd, Monad, Functor, etc.
[00:28:44] <reem> theme: I get it, but I think it's a bad precedent to require unsafe here.
[00:29:01] <reem> theme: I understand that the presence of `unsafe` implies some additional contract, but I think it's a mis-application with poor ergonomics.
[00:29:09] <theme> reem, how many traits could possibly cause memory problems?
[00:29:34] <theme> reem, as for ergonomics, #[derive] is usually OK
[00:29:41] <reem> theme: Any trait which has an additional semantic invariant
[00:29:48] <theme> reem, such as?
[00:30:09] <reem> theme: Functor, PartialOrd, Eq, Hash
[00:30:24] <theme> functor doesn't sound like a problem
[00:30:28] <theme> wait a sec, Hash?
[00:30:33] <reem> theme: There are laws associated with Functor
[00:30:41] <theme> Hash is interesting
[00:30:42] <reem> theme: And you can write a non-conforming implementation for your type
[00:30:47] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:30:48] <arrrrrrrrr> what's the invariant of Hash?
[00:30:52] <reem> and then I could write some unsafe code that depends on those invariants
[00:30:55] <theme> arrrrrrrrr, hash(x) == hash(x)
[00:31:12] <reem> arrrrrrrrr: I've never really used the trait directly, but I meant that some thing x has to hash to the same thing if hashed twice
[00:31:14] <theme> related to Eq
[00:31:21] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:31:22] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:31:52] <arrrrrrrrr> that's not documented and Hash does not require Eq
[00:32:07] <reem> My major gripe, ergonomics-wise, of this RFC is that I'm not convinced that #[derive] will take care of enough cases
[00:32:28] <scott> arrrrrrrrr: there's no need for it to require Eq. hash results in u64 which impls Eq
[00:32:30] <theme> reem, is it possible to implement a *reasonable* hash table that causes memory problems if the Hash is ill-behaved?
[00:32:42] <reem> arrrrrrrrr: You're right - imagine I'm not talking about the existing Hash trait, just some hypothetical trait Hash { fn hash(&self) -> u64 } or something
[00:32:45] *** Quits: njn (chatzilla@moz-mrqno0.iinet.net.au) (Ping timeout: 121 seconds)
[00:33:24] *** Joins: njn (chatzilla@moz-aij4eh.iinet.net.au)
[00:33:36] <reem> theme: I don't see why not
[00:33:45] <theme> reem, how?
[00:34:01] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Client exited)
[00:34:04] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[00:34:15] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:34:21] <reem> theme: It doesn't matter
[00:34:36] *** Joins: enix (enix@moz-0mgr2v.fios.verizon.net)
[00:35:08] *** Joins: Skyler (Skyler@moz-e93b35.sd.cox.net)
[00:35:13] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:35:18] <reem> theme: The logic here is like this: Trait X provides some additional guarantee Y, unsafe code Z relies on guarantee Y about implementations of X. I come along and implement X for T and my implementation doesn't respect Y. I can use T in Z, and thereby cause bad things to happen.
[00:35:31] <brson> steveklabnik: it looks like the wiki doesn't exist now. i wonder where i should maintain the friend of the tree list
[00:35:35] <reem> The actual contents of X, Y, Z, or T is not really relevant
[00:35:44] <reem> that's the problem we're trying to solve
[00:35:55] <scott> theme: you said Functor doesn't seem like a problem... imagine I do fmap over a vector or a tree and then unsafely zip the original and the resulting structure into a structure of pairs, where the zip assumes the structures have the same shape (because Functor promises they will)
[00:36:18] <scott> theme: if you make a Functor impl that doesn't follow that law, then your unsafe code will go wrong
[00:37:59] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Ping timeout: 121 seconds)
[00:38:37] *** Quits: calc0000 (calc0000@moz-p36.rbp.233.199.IP) (Quit: ZNC - http://znc.in)
[00:38:54] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[00:39:08] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:39:14] *** Joins: calc0000 (calc0000@moz-5tn399.mqd9.h8am.0980.2605.IP)
[00:39:38] *** Joins: mib_uzgh2b (Mibbit@moz-juv.9o3.252.72.IP)
[00:40:03] <nrc> brson, steveklabnik what happened to the wiki?!
[00:40:19] <Yurume> pj wjat
[00:40:20] <Yurume> oh what
[00:40:22] <Manishearth> someone bopped it
[00:40:23] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:40:26] <Yurume> it's gone?!
[00:40:47] <reem> brson: AUTHORS.txt?
[00:41:02] <nrc> Manishearth: who? why?
[00:41:15] <Manishearth> nrc: I don't know. It's 6AM and I'm bored
[00:41:20] <nrc> lol
[00:41:23] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:41:25] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[00:41:25] <nrc> I recommend sleep
[00:41:32] <Manishearth> sleep is for the weak
[00:41:37] <Manishearth> and the human
[00:41:39] <Manishearth> puny humans
[00:42:03] * nrc always had his suspicions about Manishearth
[00:42:14] <Manishearth> Hey, you're a gorilla, right?
[00:42:23] <Manishearth> or whatever that thing on your avatar is
[00:42:47] <Manishearth> Anyway, it's not like I hid the fact that I in fact am a lowercase greek letter
[00:42:51] <huon> nrc: I think steveklabnik did it, because the (lack of) license meant the content was somewhat useless
[00:42:52] *** Joins: theme_ (theme@moz-i3mhhb.asianet.co.th)
[00:42:57] <huon> not sure of the details
[00:43:13] <huon> the content exists in https://github.com/rust-lang/rust-wiki-backup
[00:43:18] <Manishearth> huon: probably should move some of the pages to docs then?
[00:43:39] <theme_> just reconnected
[00:43:48] <theme_> reem, for that hash thing
[00:43:50] <reem> Oh, neat, I never realized github wikis were just git repos.
[00:44:07] <Manishearth> reem: git@github.com:rust-lang/rust.wiki.git
[00:44:12] <reem> theme_: The unsafe code could be unsafe { intrinsics::assume(hash(x) == hash(x)) }
[00:44:18] <huon> Manishearth: can't, due to licenses
[00:44:18] <Manishearth> though the wiki was bopped, so that won't work now
[00:44:21] <Manishearth> Servo's will
[00:44:24] <Manishearth> huon: ?
[00:44:28] <Manishearth> oh
[00:44:41] <theme_> reem, can an untrusted Hash cause inefficiencies?
[00:45:02] <reem> untrusted X is always going to be worse than untrusted Y
[00:45:03] <nrc> huon: thanks for the link
[00:45:11] <theme_> reem, what?
[00:45:20] <reem> wow, typos
[00:45:28] <Manishearth> huon: many pages have very few authors though (eg fott, emacs, etc)
[00:45:29] <reem> untrusted X is always going to be worse than trusted X
[00:45:29] <scott> theme_: did you see what I sent you about Functor?
[00:45:34] <nrc> steveklabnik: I think we should put the wiki back - there's a lot of useful info there
[00:45:38] <huon> Manishearth: i dunno
[00:45:39] * theme_ read logs
[00:46:06] <huon> nrc: the info can still be accessed via https://github.com/rust-lang/rust-wiki-backup
[00:46:16] <theme_> scott, functor does *not* promise the same structure, I think
[00:46:30] <reem> theme_: fmap id == id
[00:46:31] <scott> theme_: it does
[00:46:39] <nrc> huon: yeah but it's a pain, another barrier to entry for new contributors, etc.
[00:46:39] <theme_> O_o
[00:46:49] <reem> theme_: That's the actual "law"
[00:47:00] <reem> if you fmap a noop you get the same exact thing back
[00:47:12] <theme_> scott, and who implements the unsafe zip?
[00:47:15] <bstrie> steveklabnik nrc: the wiki doesn't necessarily need to be removed entirely, but mostly it was just a place info went to die
[00:47:21] <scott> theme_: why does that matter?
[00:47:29] <scott> theme_: anyone does
[00:47:43] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:47:56] <theme_> scott, the one who implements the unsafe zip *must* know about the internal structure of the Functor
[00:48:01] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[00:48:06] <nrc> bstrie: felt like a good place to find all sorts of bits and pieces of useful info
[00:48:14] <theme_> right?
[00:48:20] <nrc> as a Ruat dev, rather than a Rust user
[00:48:40] <reem> theme_: This isn't really relevant.
[00:48:45] <theme_> scott, the zip function must be unsafe any way
[00:48:51] <bstrie> nrc: true, it might make sense only as a place for dev-related info
[00:48:51] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:48:59] <theme_> and the zip function can only ever work on one concrete structure
[00:49:01] <reem> theme_: The code could literally be unsafe { intrinsics::assume(condition) }
[00:49:12] <theme_> reem, that's just stupid
[00:49:13] <scott> theme_: that's not true, you can define a generic zip with Applicative
[00:49:14] <nrc> bstrie: I thought that is what it was :-)
[00:49:20] <theme_> scott, wait what?
[00:49:29] <reem> theme_: That's the equivalent of using an unsafe trait.
[00:49:36] <theme_> scott, but then, you are using Applicative, right?
[00:49:41] <bstrie> nrc: did you not ever check out the 2011-era bikeshed pages that were still lingering around? :P
[00:49:47] <reem> theme_: and Applicative has laws to
[00:49:52] <scott> theme_: yes, but this is getting far from the original issue
[00:49:57] <theme_> reem, and that is begging the question
[00:50:08] <theme_> scott, erm.. ok
[00:50:33] <reem> We've gotten pretty far from the original topic, let's circle back.
[00:50:56] <theme_> ok... can a hash table be slowed down by checking the invariants?
[00:50:59] <reem> The original issue is that we have traits with correctness invariants associated with them
[00:51:07] <reem> and right now we rely on these invariants in unsafe ways without using unsafe
[00:51:14] <brson> how do i make debug! work?
[00:51:15] <theme_> reem, sort of
[00:51:17] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[00:51:25] <scott> not checking is faster than checking basically by definition
[00:51:28] <theme_> reem, and inefficiency
[00:51:32] <reem> and/or you can write an incorrect implementation, causing unsafety without unsafe
[00:51:55] <reem> and the usage sites of these invariants can be slow since they can't rely on them actually being invariants
[00:52:06] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[00:52:10] <theme_> brson, http://doc.rust-lang.org/log/log/index.html#in-executables
[00:52:19] <nrc> brson: RUSTFLAGS='-Cdebug-assertions'
[00:52:50] <theme_> reem, how do you propose to get the efficiency?
[00:53:14] <theme_> I view unsafe cmp as the lesser of evils
[00:53:29] *** Quits: mib_uzgh2b (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:53:40] <scott> a trait without laws is essentially the same as ad hoc overloading as in C++. you're just giving unrelated functions the same name, then
[00:53:50] <reem> theme_: imo the only satisfactory solution that gives full efficiency is to embed a proof system in rust and use that to check the implementations of PartialEq etc.
[00:53:51] <scott> so the laws are pretty important
[00:54:05] <theme_> reem, sounds .... way too complex
[00:54:10] <scott> even though the compiler can't check them
[00:54:24] <reem> theme_: Agreed. A real solution is to just fault the unsafe code.
[00:54:39] <reem> and the fix is to just make it slightly less efficient
[00:54:51] <theme_> reem, btut I want efficiency!
[00:55:28] <scott> in general the more assumptions / compile-time checks you have the more efficient your runtime can be
[00:55:38] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:55:38] <reem> ^
[00:55:48] <scott> e.g. type checking reduces need for runtime checks
[00:56:03] <scott> many NP-complete problems become tractable with a couple assumptions about the data
[00:56:22] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:56:42] <scott> knowing the length of lists lets you eliminate bounds checks
[00:57:06] <scott> the more you know... ;)
[00:57:08] <reem> Knowing the type of everything lets you elide runtime type checks, which happen at every operation in a dynamic language
[00:59:31] *** Quits: theme_ (theme@moz-i3mhhb.asianet.co.th) (Ping timeout: 121 seconds)
[00:59:39] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Ping timeout: 121 seconds)
[01:02:37] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[01:02:37] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[01:02:42] *** Joins: theme_ (theme@moz-i3mhhb.asianet.co.th)
[01:03:18] <theme_> reconnected again -_-
[01:03:49] <theme_> scott, reem, can we just let the programmer check the cmp implementations?
[01:04:21] <reem> theme_: I am not happy with this proposal unless we also get ad-hoc overloading.
[01:04:38] <reem> theme_: Since it makes it impossible to implement these traits for types which don't follow these guarantees
[01:05:01] <reem> theme_: for instance any type with concurrent interior mutability
[01:05:06] <theme_> reem, ok.. so you want Ord and StrictOrd traits?
[01:05:39] <reem> theme_: I want Ord to be strict and non-conforming operators added through ad-hoc overloading
[01:05:40] <theme_> we can make something like `unsafe trait StrictOrd: Ord {}`
[01:05:53] <theme_> I find that pretty reasonable
[01:06:24] <scott> that'd be like Idris's VerifiedFoo without the actual proofs (which we can't do in Rust)
[01:06:24] <theme_> maybe Ord and RelaxedOrd
[01:06:39] <scott> Idris has Functor (with no proof of the law) and VerifiedFunctor (which just adds a proof of the law)
[01:06:44] <theme_> and `unsafe trait Ord: RelaxedOrd`
[01:06:51] <reem> scott: That's basically what I'm thinking
[01:06:59] <reem> except `unsafe` instead of an actual proof
[01:07:04] <theme_> reem, you don't need ad-hoc overloading for that
[01:07:04] <scott> right
[01:07:07] *** Quits: swgillespie (swgillespie@moz-eie.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:07:28] <reem> theme_: True, but non-verified-ord seems useless
[01:07:28] <erickt> aturon: ping
[01:07:43] <theme_> reem, I thought that you said that they are useful
[01:08:06] <theme_> <reem> theme_: Since it makes it impossible to implement these traits for types which don't follow these guarantees
[01:08:26] <reem> if we only allow operators to be added via special traits, yes
[01:08:29] <reem> then we have to keep it
[01:08:34] <theme_> reem, why?
[01:08:42] <reem> but if we allow operators to be added via ad-hoc overloading, there's no reason to have a non-restricted trait
[01:08:47] <theme_> we just make RelaxedOrd special
[01:08:51] <reem> you would never O: RelaxedOrd
[01:08:52] <theme_> and Ord a normal trait
[01:08:56] <scott> reem: your concern is about the operator syntax?
[01:09:02] <theme_> except for #[derive]
[01:09:06] <reem> scott: I have many concerns, but that's one of them :P
[01:09:57] <scott> at least derive(Ord) is still safe even if Ord is an unsafe trait, right?
[01:10:10] <theme_> scott, yes
[01:10:11] <reem> scott: I also dislike the tight coupling of operators to these traits, but that's a different story.
[01:11:27] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:12:00] <brson> acrichto: i'm seeing a problem where rustdoc --test compile failures appear to cause the tests to hang. have you seen this?
[01:12:34] <acrichto> brson: hm, not I have not seen that before
[01:12:41] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Connection closed)
[01:12:52] *** theme_ is now known as theme
[01:12:59] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[01:12:59] *** ChanServ sets mode: +o pcwalton
[01:13:42] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[01:14:10] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[01:15:45] <erickt> eddyb: back
[01:16:16] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[01:16:30] *** Joins: Johannes_ (Johannes@moz-4et8d7.ocn.ne.jp)
[01:18:31] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[01:19:21] *** Quits: bleibig (bleibig@moz-btk.gm4.170.73.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:22:43] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Connection closed)
[01:22:50] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[01:26:25] <theme> Should ExactSizeIterator be unsafe?
[01:27:21] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[01:28:27] <Mutabah> I really don't like the idea of making traits unsafe when they have an easily checkable contract
[01:29:24] <arrrrrrrrr> ExactSizeIterator has to be unsafe
[01:29:57] <Mutabah> Oh?
[01:30:25] <arrrrrrrrr> how are you going to write a fast copy method from ExactSizeIterator if you have to check every time if None was returned?
[01:30:52] <Mutabah> hmmm
[01:30:55] <theme> I'm not sure, but I filed an issue any way
[01:30:56] <theme> https://github.com/rust-lang/rfcs/issues/958
[01:31:13] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[01:33:42] *** Quits: jxv (jxv___@moz-qneod7.pk6i.d98i.030a.2602.IP) (Connection closed)
[01:34:34] *** Quits: Johannes_ (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[01:35:20] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[01:35:26] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:36:34] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Ping timeout: 121 seconds)
[01:36:47] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[01:37:04] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[01:37:55] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[01:38:06] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:40:09] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:40:43] *** Joins: bleibig (bleibig@moz-btk.gm4.170.73.IP)
[01:42:05] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Ping timeout: 121 seconds)
[01:42:18] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[01:53:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[01:55:32] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Connection closed)
[01:58:27] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:00:38] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:02:13] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[02:04:42] *** Quits: tjakubow (tom@moz-783qe0.res.rr.com) (Quit: WeeChat 1.1)
[02:04:58] *** Quits: ^BR (br@moz-egk.dm6.194.78.IP) (Client exited)
[02:06:46] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:07:12] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:07:29] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[02:12:35] *** Joins: Johannes_ (Johannes@moz-4et8d7.ocn.ne.jp)
[02:14:28] <steveklabnik> brson: nrc bstrie i saved a copy, as I mentioned in the ticket: https://github.com/rust-lang/rust-wiki-backup
[02:15:32] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[02:15:41] <steveklabnik> i think it'd be good to find places to hold similar content
[02:15:45] <steveklabnik> but the root of the issue is licensing
[02:15:55] <steveklabnik> so we shouldn't really keep using it
[02:16:10] <steveklabnik> important info deserves a better home
[02:17:45] <nrc> we should make a better home before removing it or making it less accessible - the lack of license just means we can't reuse it right? It doesn't mean we have to remove it
[02:18:49] *** Quits: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[02:21:06] <bstrie> steveklabnik: what are you specifically concerned about regarding licensing?
[02:25:27] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[02:25:55] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[02:31:07] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[02:35:52] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[02:38:15] *** Quits: brson (brson@moz-mj1.c9m.56.172.IP) (Quit: leaving)
[02:38:51] *** nrc is now known as nrc|afk
[02:39:57] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Connection closed)
[02:40:23] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[02:44:25] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Quit: Leaving)
[02:45:08] *** Quits: Rusky (russell@moz-2a17lj.slkc.qwest.net) (Ping timeout: 121 seconds)
[02:45:40] *** Joins: tjakubow (tom@moz-kim.9e3.51.173.IP)
[02:50:28] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:53:30] *** Quits: Diggsey (diggsey@moz-u3erf7.dsl.pipex.com) (Ping timeout: 121 seconds)
[02:57:40] *** Quits: doomlord_mbp (textual@moz-tv67ph.range86-148.btcentralplus.com) (Quit: Textual IRC Client: www.textualapp.com)
[03:00:52] *** Joins: doomlord_mbp (textual@moz-tv67ph.range86-148.btcentralplus.com)
[03:01:00] *** Joins: Rusky (russell@moz-2a17lj.slkc.qwest.net)
[03:04:17] *** Quits: bleibig (bleibig@moz-btk.gm4.170.73.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:06:13] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[03:07:13] *** Joins: bleibig (bleibig@moz-btk.gm4.170.73.IP)
[03:09:06] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:09:41] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[03:11:13] *** Quits: arrrrrrrrr (arrrrrrrrs@moz-qpv06f.dynamic.qsc.de) (Ping timeout: 121 seconds)
[03:13:11] *** Quits: Nekit1234007 (nekit@moz-vfr.64q.51.84.IP) (A TLS packet with unexpected length was received.)
[03:13:14] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[03:15:16] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[03:18:06] *** Quits: Rusky (russell@moz-2a17lj.slkc.qwest.net) (Ping timeout: 121 seconds)
[03:19:04] *** Quits: doomlord_mbp (textual@moz-tv67ph.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[03:19:18] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Ping timeout: 121 seconds)
[03:19:40] *** Joins: Rusky (russell@moz-2a17lj.slkc.qwest.net)
[03:22:22] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[03:28:36] *** Joins: reem (reem@moz-l7hvbh.coob.q2h1.0009.2601.IP)
[03:30:29] <huon> nrc|afk: I suspect moving the wiki to its own repo makes it more accessible (once you know it exists): it can be searched
[03:30:49] <huon> (also, it stops people adding to the dead documents)
[03:31:06] *** Quits: reem (reem@moz-l7hvbh.coob.q2h1.0009.2601.IP) (Connection closed)
[03:32:48] *** Joins: reem (reem@moz-dra582.coob.q2h1.0009.2601.IP)
[03:33:05] *** Quits: reem (reem@moz-dra582.coob.q2h1.0009.2601.IP) (Connection closed)
[03:33:06] *** Joins: reem (reem@moz-dra582.coob.q2h1.0009.2601.IP)
[03:35:35] *** Quits: zxq9 (ceverett@moz-c1f1em.asahi-net.or.jp) (Quit: Konversation terminated!)
[03:38:13] *** Joins: zxq9 (ceverett@moz-c1f1em.asahi-net.or.jp)
[03:38:39] <bstrie> it also kills the google index of the obsolete pages, which is nice
[03:40:24] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[03:42:32] <huon> out of interest, why does bors now strike-out its comments?
[03:44:03] *** Quits: kimundi (kimundi@moz-fjbps4.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:45:10] *** Joins: kimundi (kimundi@moz-j326j4.dip0.t-ipconnect.de)
[03:45:30] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[03:45:30] *** ChanServ sets mode: +o pcwalton
[03:48:46] <Gankro> huon: experiment to de-emphasize them that did the opposite
[03:49:04] <Gankro> huon: next revision I think will make it a quote to grey it out
[03:49:32] *** kimundi is now known as zz_kimundi
[03:49:38] <huon> ok
[03:50:24] *** Quits: reem (reem@moz-dra582.coob.q2h1.0009.2601.IP) (Connection closed)
[03:50:38] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[03:51:23] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[03:53:48] *** Quits: japaric|afk (japaric@moz-6af.asf.237.190.IP) (Ping timeout: 121 seconds)
[03:54:40] *** Joins: bkearns (Adium@moz-1kbdt7.ca.comcast.net)
[03:56:03] <zwarich> ah unsafe traits
[03:56:10] <zwarich> the road to madness is paved with trust in humans
[03:56:37] *** zz_kimundi is now known as kimundi
[03:58:14] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[04:06:14] <Gankro> They should all be unsafe
[04:06:20] <Gankro> It's The Only Way
[04:06:55] <Gankro> unsafe nounwind noabort pure pub trait
[04:07:19] *** sunfish is now known as sunfish-away
[04:08:15] *** Quits: enaqx (enaqx@moz-asgdqm.infomir.com.ua) (Ping timeout: 121 seconds)
[04:09:58] *** Joins: japaric|afk (japaric@moz-6af.asf.237.190.IP)
[04:10:35] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[04:14:54] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[04:17:08] *** Quits: bernard (Mibbit@moz-g6k.oht.161.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:21:10] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[04:23:13] *** Joins: enaqx (enaqx@moz-asgdqm.infomir.com.ua)
[04:23:48] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[04:27:34] *** Joins: semarie (semarie@moz-j81.fe3.128.95.IP)
[04:28:15] * eddyb purifies Gankro through fire
[04:29:03] <eddyb> Gankro: actually, on a more serious note :P
[04:29:25] <eddyb> Gankro: have you seen my mentions of a potential constness system for traits that qualifies impls and bounds?
[04:30:44] <eddyb> Gankro: that avoids the problem of needing a trait with a regular method and one with a const fn method (if one could write the latter) - which isn't really an option for, e.g. all the operator overload traits
[04:31:34] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[04:32:11] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:33:02] <erickt> burntsushi: wow serde's already inadequate! you're doing some fancy things with those tags
[04:33:52] * erickt sighs longingly in specialization's direction
[04:41:23] *** Joins: kushal (kdas@moz-3tt6sl.202.sitibroadband.in)
[04:52:33] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:53:27] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[04:56:03] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[05:05:11] *** Joins: reem (reem@moz-i82lnv.coob.q2h1.0009.2601.IP)
[05:05:35] <reem> Would it be a big deal if some overloading traits were unstable?
[05:05:48] <reem> (to implement only!) Specifically Deref, DerefMut, Borrow, BorrowMut, Index, IndexMut
[05:06:12] <huon> what's the reason?
[05:06:24] <reem> They are major candidates to be extended with HKT
[05:06:52] <huon> it's unclear to me how we can get Deref to work with HKT
[05:06:54] <reem> because they are currently hardcoded to use references
[05:07:05] *** Quits: dcrewi (david@moz-3u3d5k.gyrae.net) (Ping timeout: 121 seconds)
[05:07:08] <huon> since `*foo` is sugar for `*foo.deref()`, i.e. the return value has to be a reference
[05:07:25] <huon> similarly for Index/IndexMut
[05:07:40] <reem> Right
[05:07:51] <reem> Hmm, wait why Index/IndexMut?
[05:08:05] *** Joins: eddyb_ (eddyb@moz-1i0.6n6.26.188.IP)
[05:08:09] <reem> Is foo[i] *foo.index(i)?
[05:08:15] <huon> x[y] is *x.index(y)
[05:08:16] <huon> yes
[05:08:40] <reem> that could actually be *foo.deref().index(i)
[05:08:40] <huon> (it's how &foo[i] gives the address of the element inside the data structure: `&*foo.index(i)`)
[05:09:11] <huon> do you mean *foo.index(i).deref()?
[05:09:41] <reem> yes
[05:10:03] <reem> I guess you can just call that in the implementation of Index
[05:10:13] <huon> not necessarily
[05:10:14] <reem> Borrow/BorrowMut are the main culprits
[05:10:22] <huon> e.g. wouldn't work with std::cell::Ref
[05:10:35] *** Quits: eddyb (eddyb@moz-stt.82i.25.188.IP) (Ping timeout: 121 seconds)
[05:10:40] <huon> so yes, maybe that might be a nice change
[05:10:47] <reem> huon: Yup, you're right. That's the case I was thinking of but I just forgot about it.
[05:10:48] <huon> (Index returns anything Deref)
[05:11:00] <reem> Yup, only Deref can be stable
[05:11:08] <huon> I guess Deref could return anything Deref too
[05:11:16] <huon> turtles...
[05:11:21] <reem> that's just a convenience though, right?
[05:11:27] <reem> or is that meaningfully better?
[05:11:36] <reem> I thought it was better but you convinced me it was unnecessary
[05:11:57] <huon> I'm not sure
[05:12:08] <huon> I'm not even sure if it would be possible to actually do
[05:12:20] <huon> due to the cycle
[05:12:44] <reem> ya, there is no way to end the recursion
[05:12:50] <reem> you'd have to make it an Optional type
[05:13:00] <huon> actually, no it should be fine
[05:13:11] <huon> the base of the recursion is the `&T` impl
[05:13:17] <huon> which would just return itself
[05:13:21] <reem> But then you have to special case the &T impl
[05:13:29] <reem> I guess that's not a big cost to pay at all
[05:13:34] <huon> and the compiler would do the "standard" primitive handling it does
[05:13:39] <huon> (it does it now, in fact)
[05:14:05] <huon> *some_ref will just do the dereference, it won't call .deref()
[05:14:18] <huon> like some_u32 + x won't go via std::ops::Add
[05:15:08] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[05:31:43] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Connection closed)
[05:35:47] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[05:41:30] *** Quits: reem (reem@moz-i82lnv.coob.q2h1.0009.2601.IP) (Connection closed)
[05:42:37] *** Quits: O01eg (o01eg@moz-o2hta1.3od4.4n8f.2698.2a02.IP) (Client exited)
[05:49:32] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[05:50:25] *** Quits: bkearns (Adium@moz-1kbdt7.ca.comcast.net) (Quit: Leaving.)
[05:52:04] <carllerche> huon: i have many times wished Index & IndexRef didn't need to return a ref
[05:52:15] <carllerche> because it prevents being able to "build" the value in the fn
[05:52:19] <carllerche> IndexMut*
[05:53:54] *** nrc|afk is now known as nrc
[05:54:59] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:56:57] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[05:57:14] <huon> carllerche: yes, I totally agree its useful
[05:57:47] <huon> but the current Index are designed to be talking about memory locations, which is why it desugars to `*foo.index(i)`, i.e. with the dereference.
[06:02:06] *** Quits: njn (chatzilla@moz-aij4eh.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0a1/20150309142159])
[06:06:32] <reem> huon: Actually hyper headers are an example where HKT index would be very useful
[06:06:51] <reem> it would give very good ergonomics
[06:07:45] <eddyb_> this is interesting
[06:08:26] <eddyb_> huon, acrichto: did you know attributes weren't parsed on associated types?
[06:08:49] <eddyb_> either that or something else changed around expansion
[06:10:35] *** Quits: enix (enix@moz-0mgr2v.fios.verizon.net) (Ping timeout: 121 seconds)
[06:14:25] *** Joins: vfetwnuncszu (david@moz-3u3d5k.gyrae.net)
[06:14:38] *** vfetwnuncszu is now known as dcrewi
[06:14:50] *** Joins: laumann (laumann@moz-n9e72h.0.fullrate.dk)
[06:14:55] <nrc> eddyb_: do you know if its possible to find where a name was resolved to? - https://botbot.me/mozilla/rustc/2015-03-10/?msg=33773382&page=1
[06:15:54] *** eddyb_ is now known as eddyb
[06:19:34] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[06:24:07] *** Joins: reem (reem@moz-tm6o21.coob.q2h1.0009.2601.IP)
[06:25:18] *** Quits: laumann (laumann@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[06:28:01] *** Quits: reem (reem@moz-tm6o21.coob.q2h1.0009.2601.IP) (Connection closed)
[06:28:28] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[06:31:58] *** Joins: Heavensrevenge (Eric@moz-sn8mv3.abhsia.telus.net)
[06:33:15] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:35:00] *** Quits: japaric|afk (japaric@moz-6af.asf.237.190.IP) (Quit: WeeChat 1.1.1)
[06:36:26] *** Quits: Kxepal (Miranda@moz-ml537c.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[06:38:24] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[06:43:24] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[06:44:27] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[06:46:43] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[06:46:56] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[06:48:23] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[06:48:36] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[06:49:40] <huon> eddyb: in what sense?
[06:49:47] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[06:49:52] <sfackler> ugh, how do I turn on debug logging in rustc?
[06:50:02] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[06:50:12] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[06:51:51] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[06:53:37] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[06:54:29] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[06:55:18] <Yurume> sfackler: RUST_LOG=rustc=4 ?
[06:55:26] <nrc> sfackler: RUSTFLAGS='-Cdebug-assertions'
[06:55:37] <Yurume> ah
[06:56:12] <sfackler> ;jkl;lhjk;lkh
[06:57:00] <eddyb> huon: oh, nvm, they just weren't pretty-printed
[06:57:41] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Ping timeout: 121 seconds)
[06:58:49] *** Quits: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[06:58:59] <eddyb> huon: I rewrote some of that code in my branch and the pretty-printed result looks better now, and it includes attributes on associated types, apparently
[06:59:00] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[07:00:35] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:00:37] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:00:46] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[07:01:05] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[07:02:41] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[07:02:50] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[07:05:07] <eddyb> hahahaha
[07:05:50] <eddyb> there was a good reason for TyBareFn to not use the same logic as everything else
[07:06:07] <eddyb> apparently now I'm visiting patterns inside its FnDecl and that's no bueno
[07:06:36] <eddyb> typeck really wants types for those patterns, but they're not part of the function the fn() type is used in
[07:06:54] *** Joins: enix (enix@moz-0mgr2v.fios.verizon.net)
[07:09:29] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[07:10:02] *** Joins: reem (reem@moz-agetjr.coob.q2h1.0009.2601.IP)
[07:10:38] *** Quits: eddyb (eddyb@moz-1i0.6n6.26.188.IP) (Ping timeout: 121 seconds)
[07:10:47] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[07:13:05] *** Quits: reem (reem@moz-agetjr.coob.q2h1.0009.2601.IP) (Connection closed)
[07:15:22] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[07:15:31] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:15:36] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[07:16:26] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Connection closed)
[07:16:27] *** Joins: bjz_ (bjz@moz-4l6.mjm.52.113.IP)
[07:16:28] *** Joins: eddyb (eddyb@moz-1i0.6n6.26.188.IP)
[07:16:50] *** Quits: bjz_ (bjz@moz-4l6.mjm.52.113.IP) (Connection closed)
[07:18:16] *** Joins: bjz_ (bjz@moz-4l6.mjm.52.113.IP)
[07:18:17] *** Quits: bjz_ (bjz@moz-4l6.mjm.52.113.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:18:38] *** Joins: reem (reem@moz-70e5qe.coob.q2h1.0009.2601.IP)
[07:19:12] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:22:13] *** Joins: eddyb_ (eddyb@moz-1i0.6n6.26.188.IP)
[07:22:21] *** Quits: eddyb (eddyb@moz-1i0.6n6.26.188.IP) (Connection closed)
[07:24:35] *** Quits: untitaker (untitaker@moz-p0ucu9.highway.telekom.at) (Ping timeout: 121 seconds)
[07:27:47] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[07:29:14] *** Quits: reem (reem@moz-70e5qe.coob.q2h1.0009.2601.IP) (Connection closed)
[07:30:14] *** Joins: untitaker (untitaker@moz-8ceamf.highway.telekom.at)
[07:30:56] *** Joins: James (quassel@moz-5qldmp.range109-148.btcentralplus.com)
[07:33:02] *** Joins: eddyb__ (eddyb@moz-1i0.6n6.26.188.IP)
[07:34:18] *** Quits: eddyb_ (eddyb@moz-1i0.6n6.26.188.IP) (Ping timeout: 121 seconds)
[07:36:38] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Connection closed)
[07:36:43] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[07:42:52] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[07:50:47] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[07:50:59] *** Quits: James (quassel@moz-5qldmp.range109-148.btcentralplus.com) (Ping timeout: 121 seconds)
[07:54:26] *** Quits: eddyb__ (eddyb@moz-1i0.6n6.26.188.IP) (Ping timeout: 121 seconds)
[08:06:50] *** Joins: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP)
[08:09:47] *** Quits: Johannes_ (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[08:10:47] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[08:18:27] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:27:18] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:27:23] *** Joins: reem (reem@moz-srsfpf.coob.q2h1.0009.2601.IP)
[08:29:26] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Connection closed)
[08:29:40] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[08:38:52] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[08:41:01] *** Joins: martin_ (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP)
[08:43:48] *** Quits: reem (reem@moz-srsfpf.coob.q2h1.0009.2601.IP) (Connection closed)
[08:43:54] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Connection closed)
[08:44:58] <Tobba|Laptop> are wrappers generated for extern functions now or something
[08:45:37] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Client exited)
[08:47:31] <doener> Tobba|Laptop: rust functions that use a foreign ABI get a wrapper. That has always been the case though (at least for as long as I remember)
[08:47:47] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[08:47:51] <Tobba|Laptop> doener: this is an import
[08:48:00] <Tobba|Laptop> it also somehow prevents itself from getting optimized out
[08:48:19] <doener> Tobba|Laptop: so just a rust function from a different crate?
[08:48:41] <Tobba|Laptop> doener: no, libc imports stuff from libc with an extern block
[08:48:46] *** Joins: Skyler (Skyler@moz-e93b35.sd.cox.net)
[08:48:54] <Tobba|Laptop> this generates a function that both LTO and --gc-sections refuses to kill
[08:48:57] <Tobba|Laptop> so it breaks everything
[08:49:17] <doener> hm, plain FFI shouldn't create wrapper IIRC
[08:50:03] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[08:50:07] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[08:50:44] <Tobba|Laptop> 000031c0 <_ZN5funcs7posix885fcntl4open20hcc473a05b1583282TPaE>:
[08:50:44] <Tobba|Laptop>     31c0:	e9 fc ff ff ff       	jmp    31c1 <_ZN5funcs7posix885fcntl4open20hcc473a05b1583282TPaE+0x1>
[08:50:51] <Tobba|Laptop> well this fucker is a thing
[08:50:58] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[08:51:10] <Tobba|Laptop> and I think it's public for some godforsaken reason
[08:52:45] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[08:54:07] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (Ping timeout: 121 seconds)
[08:58:07] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[09:02:32] *** Joins: Sindriava (textual@moz-jrsnms.fit.cvut.cz)
[09:02:46] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[09:08:00] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[09:08:29] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Connection closed)
[09:14:05] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[09:18:28] *** Joins: munksgaard (munksgaard@moz-fso.hq0.225.130.IP)
[09:20:32] <Mutabah> Question - How is "fn write(&mut MemoryState, addr: u64, val: Value<Self>)" parsed differently to "fn write(&ms: &mut ...)" or "fn write(&mut self, "? Is this a case where rust's parser is not LR(1)?
[09:21:39] <Yurume> Mutabah: it looks ahead up to 3 tokens. https://github.com/rust-lang/rust/blob/621ccf5/src/libsyntax/parse/parser.rs#L4465-L4499
[09:21:48] <Mutabah> ahah, nice
[09:22:03] <Yurume> (that doesn't really mean that the grammar is not LR(1), just that the current parser doesn't try to be strictly LR(1))
[09:22:24] <Yurume> (or LALR(1) or GLR(1) or so...)
[09:22:47] <Mutabah> well.. handling the "&Type" vs "&bind: &Type" case kinda needs a chunk of lookahead
[09:25:23] <Yurume> Mutabah: that again seems to depend on the lookahead. https://github.com/rust-lang/rust/blob/621ccf5/src/libsyntax/parse/parser.rs#L1603-L1646
[09:25:47] <Yurume> honestly I don't fully understand that part, however
[09:26:16] *** Quits: barosl (barosl@moz-7vg.qma.67.220.IP) (Connection closed)
[09:26:38] <Mutabah> I'm tempted to break compat with rustc for my parser and only support self and '<pat>: <type>' arguments (don't allow eliding the pattern)
[09:28:20] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Connection closed)
[09:28:44] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[09:30:21] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[09:31:53] *** Quits: Sindriava (textual@moz-jrsnms.fit.cvut.cz) (Quit: Textual IRC Client: www.textualapp.com)
[09:32:28] *** Joins: laumann (laumann@moz-1f0.hq0.225.130.IP)
[09:34:31] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[09:35:55] *** Joins: Nekit1234007 (nekit@moz-vfr.64q.51.84.IP)
[09:40:56] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[09:41:00] *** Joins: barosl (barosl@moz-7vg.qma.67.220.IP)
[09:41:32] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[09:41:33] *** Joins: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP)
[09:42:00] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Quit: Leaving...)
[09:43:37] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[09:51:00] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[09:52:38] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[09:53:08] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (Connection closed)
[09:53:20] *** Joins: minzh (minzh@moz-97h.bjh.14.103.IP)
[10:05:19] *** Joins: ^BR (br@moz-egk.dm6.194.78.IP)
[10:10:28] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[10:14:57] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[10:19:01] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:22:44] *** Quits: ^BR (br@moz-egk.dm6.194.78.IP) (Client exited)
[10:22:54] *** Joins: ^BR (br@moz-egk.dm6.194.78.IP)
[10:24:07] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[10:24:45] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[10:32:33] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[10:32:37] *** Joins: larhat1 (Adium@moz-8v4.af0.232.213.IP)
[10:35:47] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Ping timeout: 121 seconds)
[10:36:25] *** Quits: minzh (minzh@moz-97h.bjh.14.103.IP) (A TLS packet with unexpected length was received.)
[10:39:22] *** Joins: ytain (ytain@moz-d93rt6.dsl.teksavvy.com)
[10:40:33] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:40:55] *** Quits: kmcguire (kmcguire@moz-c955nf.res.rr.com) (Ping timeout: 121 seconds)
[10:48:31] *** Joins: arrrrrrrrr (arrrrrrrrs@moz-qpv06f.dynamic.qsc.de)
[11:02:15] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[11:04:37] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[11:09:05] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[11:10:41] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[11:11:20] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[11:14:14] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[11:17:11] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[11:33:47] *** Quits: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[11:34:05] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[11:44:30] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[11:48:35] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[11:53:19] *** Joins: Guest63 (textual@moz-6gq.t8s.78.166.IP)
[11:57:15] *** Joins: srh (User@moz-kpck8b.public.wayport.net)
[11:58:48] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[12:03:20] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[12:03:43] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[12:05:16] *** Quits: Guest63 (textual@moz-6gq.t8s.78.166.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:07:50] *** Joins: Diggsey (diggsey@moz-u3erf7.dsl.pipex.com)
[12:14:33] *** Quits: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP) (Ping timeout: 121 seconds)
[12:41:35] *** Joins: eddyb (eddyb@moz-1i0.6n6.26.188.IP)
[12:42:15] *** Joins: Nekit1235007 (nekit@moz-vfr.64q.51.84.IP)
[12:42:37] *** Quits: Nekit1234007 (nekit@moz-vfr.64q.51.84.IP) (Connection closed)
[12:42:40] *** Nekit1235007 is now known as Nekit1234007
[12:52:52] *** Quits: tedh (tedh@moz-ctbj7i.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:52:56] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[12:57:28] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[12:58:21] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[12:58:43] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[13:01:28] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[13:12:04] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[13:19:05] *** Quits: srh (User@moz-kpck8b.public.wayport.net) (Quit: Leaving)
[13:21:06] *** Joins: tedh (tedh@moz-h6co4f.sub-70-194-103.myvzw.com)
[13:29:11] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[13:32:56] *** Quits: enix (enix@moz-0mgr2v.fios.verizon.net) (Ping timeout: 121 seconds)
[13:35:14] *** Joins: amanone (amanone@moz-eh1rje.sk83.bjud.7e00.2a01.IP)
[13:42:01] <munksgaard> eddyb: r? gh23028
[13:42:01] <[o__o]> Add get_attrs_opt: https://github.com/rust-lang/rust/pull/23028
[13:43:30] *** Quits: tedh (tedh@moz-h6co4f.sub-70-194-103.myvzw.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:47:05] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[13:48:53] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[13:51:38] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[13:54:33] <munksgaard> eddyb: Why is bors' comment strikethrough?
[13:59:14] *** Joins: pnkfelix-os (Mibbit@moz-6v5.3nd.202.89.IP)
[13:59:29] <eddyb> munksgaard: barosl was trying to make it clear that it's a bot message, but it wasn't the best way to do so
[13:59:35] *** kimundi is now known as zz_kimundi
[13:59:42] <eddyb> munksgaard: it might be fixed in homu upstream
[14:00:30] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[14:01:54] <Manishearth> munksgaard: ignore that
[14:01:59] <Manishearth> it will be improved
[14:02:39] *** zz_kimundi is now known as kimundi
[14:03:15] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[14:05:30] <eddyb> *sigh*
[14:05:48] <eddyb> nmatsakis: why do we convert every method and associated type in a trait *twice* during collection?
[14:07:22] <Manishearth> THis rfc needs a shepherd
[14:07:23] <Manishearth> https://github.com/rust-lang/rfcs/pull/937
[14:07:58] <munksgaard> eddyb, Manishearth: Roger. Thanks.
[14:08:40] <munksgaard> Manishearth: Didn't pcwalton propose to do it? (He's not here though) 
[14:08:56] <Manishearth> not sure
[14:09:00] <munksgaard> Or was that just the guards portion
[14:09:09] <Manishearth> he commented, doesn't mean he'll shepherd
[14:09:14] <munksgaard> (Which I'm also currently working on a patch for)
[14:09:16] <Manishearth> but each rfc is supposed to get a shepherd
[14:09:22] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[14:09:23] <munksgaard> Okay :)
[14:09:26] <Manishearth> cc nmatsakis huon 
[14:09:39] <Manishearth> munksgaard: any updates on humpty?
[14:11:10] <munksgaard> Manishearth: Still working on it, but I've been distracted for a while by some patches and not being able to build rust on a server of mine
[14:11:44] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[14:12:36] <Manishearth> ah okay
[14:12:47] <Manishearth> munksgaard: why are you building Rust? :p
[14:12:48] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[14:13:02] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[14:13:12] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[14:14:13] <munksgaard> Manishearth: Because it'd be awesome to be able to build it on that server, since it's got loads of RAM and CPUs. 
[14:14:20] <munksgaard> It takes ages on my laptop
[14:14:25] <munksgaard> whenever I want to try something out
[14:14:52] <Manishearth> munksgaard: no, why are you building Rust in the first place? :p
[14:15:15] <Manishearth> but yeah, I know why you'd want to build it on a server
[14:15:23] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:15:35] <Manishearth> I build rollups and stuff on linux boxes in my dept comp room (via ssh)
[14:15:53] <munksgaard> he he, yeah that's exactly what I wanted to do too :)
[14:15:59] <Manishearth> slower, but I can make -j6 there without making my own computer sluggish
[14:16:11] <Manishearth> why isn't it building?
[14:16:13] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[14:16:25] <munksgaard> complaints about GLIBCXX not being found
[14:16:39] <Manishearth> munksgaard: apt-get install g++ gcc g++-4.8 perhaps
[14:16:54] <Manishearth> those should already be installed, but you'd be surprised
[14:17:09] <Manishearth> also, install ccache, and pass --enable-ccache to configure. Will make llvm faster on rebuilds
[14:17:41] <munksgaard> Na, I don't have root, and the gcc version that's installed by default is too old. So I'm using CC, CXX, LD_LIBRARY_PATH and such to set up the right environment, but it's as if it doesn't correctly pick it up
[14:19:07] <munksgaard> Let me see if I can find the error
[14:19:40] *** Quits: pnkfelix-os (Mibbit@moz-6v5.3nd.202.89.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:23:08] <Manishearth> munksgaard: ah
[14:23:27] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:23:31] *** Joins: minzh (minzh@moz-njk.vg0.96.122.IP)
[14:25:26] *** Joins: japaric (japaric@moz-h53.6gb.236.190.IP)
[14:27:58] *** Joins: pnkfelix-os (Mibbit@moz-6v5.3nd.202.89.IP)
[14:35:35] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[14:41:16] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[14:45:48] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[14:48:42] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[14:51:10] <munksgaard> Manishearth: These are the kinds of errors I'm getting: http://pastebin.com/fKPMtvXp
[14:51:52] <Manishearth> munksgaard: probably need to aptget a newer c++
[14:52:03] <Manishearth> but ld library path and all should work too
[14:52:16] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[14:52:17] <Manishearth> downloading the package and unpacking it into the home folder or whatever
[14:53:53] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:53:57] <munksgaard> That's what I've done
[14:54:28] <Manishearth> ah
[14:54:29] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[14:54:33] <Manishearth> or, jsut ge tsudo 
[14:54:33] <munksgaard> ldd on librustc_llvm in the stage0 folder tells me that it cant find libstd-4e7c5e5c.so
[14:54:39] <Manishearth> and wreak havoc
[14:55:01] <munksgaard> But if I set LD_LIBRARY_PATH and call ldd then it reports that it can find it just fine
[14:55:12] <munksgaard> however, even with LD_LIBRARY_PATH set, make wont compile
[14:55:39] <Manishearth> hm
[14:55:51] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[14:55:59] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[14:55:59] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[14:56:06] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[14:56:24] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[14:56:46] *** Joins: rustical (dida@moz-55rvi2.dclient.hispeed.ch)
[15:04:48] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:10:10] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[15:10:10] *** ChanServ sets mode: +o pcwalton
[15:11:28] *** Quits: barosl (barosl@moz-7vg.qma.67.220.IP) (Quit: Leaving)
[15:12:00] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[15:12:19] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[15:13:09] *** Joins: barosl (barosl@moz-7vg.qma.67.220.IP)
[15:13:15] *** Joins: mib_eqalke (Mibbit@moz-juv.9o3.252.72.IP)
[15:14:57] *** Quits: mib_eqalke (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:22:06] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[15:23:08] *** Joins: hugoduncan (user@moz-885.jmo.24.70.IP)
[15:26:21] <munksgaard> Shouldn't setting --enable--llvm-static-stdcpp alleviate that?
[15:26:21] *** Quits: hugod (user@moz-885.jmo.24.70.IP) (Ping timeout: 121 seconds)
[15:26:24] <munksgaard> I doesn't
[15:29:23] *** sunfish-away is now known as sunfish
[15:29:41] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[15:33:44] *** Quits: kushal (kdas@moz-3tt6sl.202.sitibroadband.in) (Quit: Leaving)
[15:34:13] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[15:35:04] *** Joins: ctennis (ctennis@moz-kmepus.bltnin.sbcglobal.net)
[15:35:25] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[15:39:59] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[15:40:44] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[15:43:34] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[15:43:53] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[15:44:16] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[15:46:14] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[15:51:20] <eddyb> playbot: trait Foo { bar!() }
[15:51:21] -playbot- <anon>:14:21: 14:24 error: expected one of `extern`, `fn`, `pub`, `type`, or `unsafe`, found `bar`
[15:51:21] -playbot- <anon>:14         trait Foo { bar!() }
[15:51:21] -playbot- output truncated; full output at: http://bit.ly/1aZNnyS
[15:51:39] <eddyb> aha! so there is no reason to have a MacTraitItem. lovely
[15:52:43] *** Joins: mib_dpc93g (Mibbit@moz-juv.9o3.252.72.IP)
[15:55:08] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[15:59:33] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:59:43] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:00:13] *** Quits: ytain (ytain@moz-d93rt6.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[16:01:05] *** Joins: marsel (user@moz-91h.gkj.180.94.IP)
[16:01:07] <arrrrrrrrr> aturon: are you going to merge gh23071 today?
[16:01:08] <[o__o]> Implement drain RFC: https://github.com/rust-lang/rust/pull/23071
[16:01:43] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[16:05:00] <scott> ooh, someone was asking how to into_iter the second half of a Vec the other day in #rust and I don't think there was a good answer. the new drain API looks like it
[16:05:38] *** Joins: eibwen (eibwen@moz-l622e8.dip0.t-ipconnect.de)
[16:06:38] *** Joins: ytain (ytain@moz-d93rt6.dsl.teksavvy.com)
[16:08:08] *** Quits: mib_dpc93g (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:10:37] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[16:11:00] *** Joins: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP)
[16:11:00] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[16:11:05] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[16:13:42] <doener> eddyb: fat pointers as immediate arguments looking good so far
[16:14:01] <aturon> arrrrrrrrr: sorry, i got a bit behind on my review queue last week; i'll review it today, thanks for the reminder
[16:14:18] <doener> eddyb: though having a cold doesn't exactly make me work/think fast... ;-)
[16:14:40] <Manishearth> aturon: can you also have a look at the if let rfc?
[16:14:45] <Manishearth> needs a shepherd
[16:14:58] <arrrrrrrrr> aturon: why do you have to review it? Gankro already reviewed it and I addressed all his complaints. I'm asking you if you are going to merge it.
[16:15:24] *** Joins: mib_g9nqnt (Mibbit@moz-g6k.oht.161.46.IP)
[16:16:44] <aturon> Manishearth: can you send me a link?
[16:16:49] * eddyb turns doener's heating up to 11
[16:17:05] <eddyb> doener: brownian motion does good for cold neurons :P
[16:17:46] <WindowsBunny> eddyb: All I can think of is handing toilet paper to that guy in the stall in half life and getting the brownian motion achievement now
[16:17:47] <WindowsBunny> thanks
[16:18:07] <eddyb> WindowsBunny: you play some sick games
[16:18:38] *** Quits: munksgaard (munksgaard@moz-fso.hq0.225.130.IP) (Ping timeout: 121 seconds)
[16:18:45] <Manishearth> aturon: https://github.com/rust-lang/rfcs/pull/937
[16:19:08] <doener> this all just reminds me of the brown noise in south park
[16:19:22] <doener> noise? note? something like that
[16:20:25] <aturon> arrrrrrrrr: Gankro asked me to look at it; he's able to merge on his own as well.
[16:20:44] <aturon> arrrrrrrrr: it was my mistake to let the RFC be merged without the details of the trait spelled out,
[16:20:59] <aturon> arrrrrrrrr: and there's some disagreement about what those details should be, as has been voiced on the PR
[16:21:31] <arrrrrrrrr> so another one one my PRs will be stalled for months without actionable input even though this PR implements the RFC by the letter
[16:23:25] <aturon> arrrrrrrrr: i'm not sure what you're talking about, but i have no intention of stalling your PR for months. i just want to reach some consensus on details the RFC left out
[16:25:14] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:25:24] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[16:25:43] <doener> eddyb: guess what, benchmarks are a lot more meaningful if you don't compare a rustc without debug-assertions to one with debug-assertions :-/
[16:26:15] <aturon> arrrrrrrrr: FWIW i think the drain idea is very nice, which is why i helped shepherd the RFC, but i have some concerns about the traits for the ranges
[16:26:37] <doener> eddyb: been chasing swamp gas for almost two hours trying to figure out why my changes made some parts of rustc so much slower
[16:26:40] <arrrrrrrrr> this PR was ready four days ago until people started coming in with "oops, I didn't even read the RFC" and "oops, I merged the RFC even though I didn't like it". And now I'm supposed to do double the work because of your mistakes? I'm not going to do that.
[16:27:50] <WindowsBunny> arrrrrrrrr: Friendly reminder, some people might interpret what you said in a slightly hostile manner
[16:27:53] <eddyb> arrrrrrrrr: which PR?
[16:28:09] <WindowsBunny> eddyb: gh23071
[16:28:09] <[o__o]> Implement drain RFC: https://github.com/rust-lang/rust/pull/23071
[16:28:10] <arrrrrrrrr> WindowsBunny: It's hostile because that's the way I'm being treated too.
[16:28:23] *** Joins: pcwalton (pcwalton@moz-u92.384.6.71.IP)
[16:28:23] *** ChanServ sets mode: +o pcwalton
[16:28:56] <WindowsBunny> arrrrrrrrr: I wouldn't consider the other people to be using a hostile attitude though
[16:29:04] <WindowsBunny> I can understand that you're upset though
[16:29:24] *** Quits: minzh (minzh@moz-njk.vg0.96.122.IP) (A TLS packet with unexpected length was received.)
[16:29:35] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[16:29:42] <arrrrrrrrr> WindowsBunny: right, they are just passive aggressive ignoring my PRs for months and closing my issues with comments that make no sense at all even if you've just read the title of the issue
[16:30:49] <eddyb> arrrrrrrrr: wait, reading that PR it sounds like acrichto is fine with merging it :|
[16:31:02] <eddyb> oh, and pnkfelix wants some tests
[16:31:14] <WindowsBunny> eddyb: Reading comprehension is lacking in the world
[16:31:17] <arrrrrrrrr> I don't care anymore. The RFC has been merged. They can implement it themselves.
[16:31:24] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:31:33] <eddyb> arrrrrrrrr: the was RFC updated, you mean?
[16:31:41] <eddyb> s/was RFC/RFC was/
[16:32:06] <eddyb> WindowsBunny: I could always play the non-native speaker card
[16:32:25] <arrrrrrrrr> eddyb: right, pnkfelix suddenly wants a test that shows that iterators borrow the vector.
[16:32:33] <arrrrrrrrr> that makes sense!
[16:32:51] <eddyb> arrrrrrrrr: we broke stuff like that in the past
[16:32:52] <arrrrrrrrr> eddyb: there was no RFC update. my RFC, the one that this PR implemented, was merged.
[16:33:05] <Gankro> arrrrrrrrr: I didn't fully review it. I backed off when it seemed there were some big open questions on the design
[16:33:25] <aturon> arrrrrrrrr: there's no hostility from my side, as i mentioned above i like the idea and helped shepherd your RFC
[16:33:28] <arrrrrrrrr> Gankro: you mean you failed to even read the very short PR properly
[16:33:36] <Gankro> arrrrrrrrr: What?
[16:33:45] <arrrrrrrrr> very short RFC*
[16:33:47] <eddyb> arrrrrrrrr: I think hashmap iterators weren't contravariant on the lifetime for the longest time
[16:33:59] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[16:34:03] <Gankro> arrrrrrrrr: An RFC isn't a rubber-stamp on a design
[16:34:09] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[16:34:31] <arrrrrrrrr> fine, whatever. I said I don't care anymore so we don't have to talk about it anymore.
[16:34:48] <aturon> arrrrrrrrr: all that said, if the main problem here is that you don't want to take the time to adjust the API, i would be glad to help with the work involved
[16:37:47] *** Quits: ctennis (ctennis@moz-kmepus.bltnin.sbcglobal.net) (Quit: Linkinus - http://linkinus.com)
[16:38:00] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:38:33] *** Joins: ctennis (ctennis@moz-kmepus.bltnin.sbcglobal.net)
[16:40:29] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[16:40:43] <cmr> multirust: a new version of 'nightly' is available. run `multirust update nightly` to install it
[16:40:48] <cmr> <3
[16:42:25] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[16:42:37] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[16:42:53] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[16:49:03] <semarie> Manishearth: about bitrig, it looks like if the make call was done with BSD-make (make program) instead of GNU-make (gmake program)
[16:49:42] <Manishearth> okay
[16:49:49] <Manishearth> semarie: is that a buildbot issue?
[16:49:55] <semarie> yes
[16:50:06] <semarie> the call should be "gmake clean"
[16:50:31] <Manishearth> semarie: https://github.com/rust-lang/rust-buildbot/blob/master/master/master.cfg#L583
[16:50:45] <Manishearth> jsut edit that and ask brson or acrichto for an update
[16:51:32] <acrichto> semarie: yeah if you want to send a PR to rust-buildbot I can merge and update the bots
[16:52:51] <nmatsakis> eddyb: I've noticed we do some crazy duplciate work in collect; I've tried to purge some of it, but some still remains...
[16:52:54] <semarie> acrichto: ok, I clone+patch+PR
[16:53:55] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[16:54:49] <eddyb> nmatsakis: well, I'm working on the macro commit now, that deduplication stuff is done
[16:54:55] <eddyb> if there's more, I won't bother
[16:55:10] <eddyb> nmatsakis: it's mostly showing up as a result of unifying methods
[16:55:24] <eddyb> all methods have a signature. some may have bodies
[16:55:48] <Manishearth> thanks, semarie !
[16:55:52] <nmatsakis> eddyb: nice
[16:55:52] <eddyb> nmatsakis: not sure how old ProvidedMethod/RequiredMethod are, but they're wrong
[16:56:03] <nmatsakis> eddyb: I agree, and they are very old
[16:56:21] <eddyb> common fields is how you prevent writing the same code 5 times
[16:56:24] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Quit: Leaving...)
[16:56:51] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[16:57:00] *** Quits: semarie (semarie@moz-j81.fe3.128.95.IP) (A TLS packet with unexpected length was received.)
[16:57:11] *** Joins: semarie (semarie@moz-4lmh4m.privacyfoundation.ch)
[16:57:11] *** Quits: semarie (semarie@moz-4lmh4m.privacyfoundation.ch) (Z-Lined: [gavin] botnet-20150302 (ID: PO0C3VV3KY))
[16:58:27] *** Joins: semarie (semarie@moz-77894l.abo.wanadoo.fr)
[16:58:29] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[16:58:48] <semarie> acrichto: https://github.com/rust-lang/rust-buildbot/pull/10
[16:59:01] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:59:08] <acrichto> semarie: cool, thanks! will look at soon
[16:59:27] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[17:01:12] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[17:02:00] *** Quits: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP) (Ping timeout: 121 seconds)
[17:10:53] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[17:12:39] *** Quits: awe (awe@moz-vpr.va5.236.104.IP) (Quit: ZNC - http://znc.in)
[17:13:53] <acrichto> WindowsBunny: ping
[17:14:03] *** Joins: awe (awe@moz-vpr.va5.236.104.IP)
[17:14:05] <WindowsBunny> acrichto: pong
[17:14:28] <acrichto> WindowsBunny: so regarding your comment on the std::fs expansion RFC issue, I've generally been pretty curious about symlink support in windows
[17:14:47] <acrichto> for example, we currently do not have lstat implemented, and I'm not super sure how to do it on windows
[17:14:59] <WindowsBunny> There is a way to find out whether something is a reparse point
[17:15:00] <acrichto> additionally, I think that realpath() on windows traverses intermediate symlinks (whereas on unix it does not)
[17:15:07] <WindowsBunny> and where it points to
[17:15:14] <acrichto> is a reparse point the same as a symlink?
[17:15:21] <WindowsBunny> a symlink is a special case of a reparse point
[17:15:36] <acrichto> ah interesting
[17:16:07] <WindowsBunny> There's a lot of crazy NTFS things that don't have any sort of reasonable posix equivalent
[17:16:15] <acrichto> WindowsBunny: FILE_ATTRIBUTE_REPARSE_POINT aha
[17:16:36] <acrichto> WindowsBunny: hm, so along those lines, it may be nice to see what the support for symlinks looks like on windows
[17:16:45] <acrichto> just to make sure we're not being overeager by "unifying it with unix"
[17:17:07] <WindowsBunny> that attribute tells you that something is a reparse point
[17:17:08] <acrichto> but ofc only if you feel motivated :)
[17:17:11] <acrichto> it's not pressing at all
[17:17:20] <WindowsBunny> but to actually get the target involves some DeviceIoControl weirdness
[17:17:24] <WindowsBunny> I'll work on it :P
[17:17:27] <acrichto> whoa
[17:18:09] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:21:20] *** Quits: pcwalton (pcwalton@moz-u92.384.6.71.IP) (Client exited)
[17:23:11] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[17:23:47] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[17:24:43] <simukis> acrichto: I should note that C doesn’t flush its stdout on exit
[17:24:46] <simukis> for all its worth
[17:24:55] <acrichto> simukis: whoa, seriously?
[17:25:15] <simukis> acrichto: at least with a recent glibc on linuxes using printf, it doesn’t.
[17:25:21] *** Joins: O01eg (o01eg@moz-ict.vtv.112.37.IP)
[17:25:25] <acrichto> simukis: hm on osx it does for me
[17:25:30] <eddyb> acrichto: forgetting newlines is a really pain on linux
[17:25:34] <acrichto> https://gist.github.com/5914cdbf5a14f126aa43
[17:25:40] <eddyb> *a real
[17:25:47] <acrichto> simukis: that also prints on unix?
[17:25:50] <eddyb> acrichto: and so confusing for beginners :P
[17:26:35] <simukis> hmm, odd, it did print now.
[17:26:39] * simukis scratches his head
[17:26:50] <eddyb> simukis: \n flushes AFAIK
[17:27:06] <simukis> eddyb: the acrichto’s link does not have \n
[17:27:15] <eddyb> but that's also OSX
[17:27:19] * eddyb shrugs
[17:27:32] <simukis> I compiled it locally, and it printed “a” properly
[17:27:36] * simukis also shrugs
[17:27:46] <acrichto> oh well
[17:28:18] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[17:28:31] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[17:28:55] <cmr> http://stackoverflow.com/a/4201325 has a quote from C99 indicating that it isn't guaranteed.
[17:30:41] <WindowsBunny> yay C!
[17:30:41] *** Joins: Kxepal (Miranda@moz-eodict.pppoe.mtu-net.ru)
[17:30:45] <simukis> acrichto: as at_exit() stands now, would it run on ^C"
[17:30:52] <simukis> s/"$/?/
[17:32:27] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[17:32:52] <acrichto> simukis: I don't believe so
[17:33:09] <acrichto> simukis: b/c ctrl-c raises a signal which if not handled aborts the process
[17:33:39] *** Quits: laumann (laumann@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[17:33:40] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[17:33:40] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[17:33:41] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[17:33:45] <simukis> …and we don’t handle it because it interfers with users’ own signal handling?
[17:34:08] <acrichto> lol there's a lot of reasons we don't install signal handlers :P
[17:34:09] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[17:34:09] *** Joins: dinfuehr_ (dinfuehr@moz-l21rck.highway.telekom.at)
[17:34:11] <acrichto> but yeah that's a big one
[17:34:15] <sfackler> running arbitrary code in a signal handler is also super sketchy
[17:34:48] <acrichto> oh there's no way we would safely let you do that
[17:35:25] <doener> hrm, apparently I'm getting a ByValue Datum out of to_lvalue_datum *confused*
[17:38:03] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[17:39:10] <awe> acrichto: when you get the chance, I did also update https://github.com/rust-lang/rust/pull/23197 with your suggesions.
[17:39:23] <acrichto> awe: aha excellent, thanks!
[17:39:45] <acrichto> awe: feel free to comment on PRs whenever you update them btw, it's the best way to ask for a re-review I think :)
[17:39:50] <acrichto> although IRC is also quite effective
[17:40:02] <simukis> surprised https://github.com/rust-lang/rust/pull/23011 didn’t bitrot to the entropy yet.
[17:40:03] <awe> Yeah, I was going to comment but then checked IRC and saw you were right here anyway.
[17:40:12] *** Joins: sprang (sprang@moz-khvr0j.static-ip.telepacific.net)
[17:40:30] *** Quits: dinfuehr_ (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[17:41:16] <awe> acrichto: Although, you suggested I use Path directly instead of AsPath because of None failing type inference, but it seems from the way the test was written prior to my changes, it already had to do silly stuff because of inference.
[17:41:32] <awe> this was in the original code: let none: Option<&Path> = None; // appease the typechecker
[17:42:09] <acrichto> awe: that may have been for a previous incarnation of the open method, not sure if that's actually required today
[17:42:22] <awe> Let me check that then.
[17:42:33] *** Joins: mr_wibble (Mibbit@moz-juv.9o3.252.72.IP)
[17:43:35] <acrichto> semarie: ok, deployed the bitrig change for buildbot
[17:43:48] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[17:43:48] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[17:43:50] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[17:44:00] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[17:44:16] *** Joins: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at)
[17:44:22] *** Quits: ytain (ytain@moz-d93rt6.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[17:44:38] <awe> acrichto: I can go dig up the issue, but do you know off the top of your head if anything happened with the rename dynamic_lib to dylib?
[17:45:27] *** Joins: ytain (ytain@moz-lio.ur1.175.184.IP)
[17:46:10] <acrichto> awe: a rename?
[17:46:32] <awe> Yeah, I think someone opened an issue about the name being too long and inconsistent with the fact that everything else is shortened.
[17:46:52] <acrichto> hm, no I don't recall much happening on that front
[17:47:00] <acrichto> but we'd definitely want to rework the module if we're going to stabilize it
[17:47:14] <awe> Yeah, it needs a lot of love. I don't think it's really changed much since I've been using Rust.
[17:47:22] *** Joins: rovar (rovar@moz-d89.n7f.126.38.IP)
[17:49:02] <awe> acrichto: So, yup, the hack was no longer necessary, but would be if we used AsPath for open.
[17:49:18] <semarie> acrichto: thanks for bitrig
[17:49:34] <awe> I removed the hack and squashed it with my last commit.
[17:50:27] <awe> acrichto: which I think might've broken your rollup (sorry, I didn't notice that)
[17:51:24] <Manishearth> there's a rollup going on?
[17:51:35] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Quit: So long!)
[17:51:37] <awe> I might be misinterpreting what +r means.
[17:51:42] <awe> r+*
[17:51:49] <Manishearth> ah
[17:51:58] <Manishearth> r+ means that it's reviewed and ready to be tested+merged
[17:52:05] <Manishearth> r+ rollup just gives it very low priority
[17:52:17] <acrichto> awe: oh no worries, but yeah a re-push will require another r+
[17:52:55] <awe> Ah, okay, thanks, Manishearth.
[17:59:21] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:59:21] *** ChanServ sets mode: +o pcwalton
[17:59:51] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[18:00:02] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:00:02] *** ChanServ sets mode: +o pcwalton
[18:01:33] *** Joins: brson (brson@moz-obm.e0n.56.172.IP)
[18:01:34] *** ChanServ sets mode: +o brson
[18:01:50] *** Quits: pnkfelix-os (Mibbit@moz-6v5.3nd.202.89.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:04:27] <nmatsakis> how do I get RUST_LOG now?
[18:04:50] <nmatsakis> do I need some new configure switch?
[18:05:04] *** Joins: avikpal (avikpal@moz-bjs.mde.194.117.IP)
[18:05:10] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[18:05:28] <acrichto> nmatsakis: what do you mean by "get"? (right now you can only set the env var)
[18:05:59] <nmatsakis> acrichto: I mean that RUST_LOG doesn't work
[18:06:04] <nmatsakis> for rustc
[18:06:06] <carllerche> you gotta pull env_logger?
[18:06:12] <carllerche> also, you have to init it somewhere
[18:06:15] <nmatsakis> and I remember somebody saying nrc?) that I need to do
[18:06:19] <nmatsakis> some configure switch
[18:06:30] <carllerche> acrichto: is there a way to enable the env logger in tests?
[18:06:32] <nmatsakis> carllerche: well, I presume somebody else wrote that code for me already in this case :)
[18:06:35] <acrichto> nmatsakis: oh are you getting debug! to print?
[18:06:46] <acrichto> carllerche: unfortunately there's not a great way currently for that
[18:06:51] <acrichto> carllerche: other than init() in each test
[18:06:54] <nmatsakis> acrichto: I'm running `RUST_LOG=... rustc ...` and nothing prints
[18:07:00] <nmatsakis> acrichto: and I am grumpy about it
[18:07:07] <nmatsakis> :)
[18:07:23] <acrichto> nmatsakis: I think debug! is gone-by-default now that it uses the debug-assertions
[18:07:31] <acrichto> nmatsakis: so you may want `-C debug-assertions=on`
[18:07:37] <acrichto> as part of RUSTFLAGS when compiling
[18:07:41] <nmatsakis> oh dear
[18:07:42] <acrichto> or you could use info!
[18:07:42] <nmatsakis> ok
[18:07:45] <cmr> that seems like a really bad default...
[18:08:03] <nmatsakis> it'd be nice to have a nicer (persistent, in particular) configure switch for that, but ok
[18:08:05] <jmesmon> nmatsakis: acrichto cmr: https://github.com/rust-lang/rust/pull/23257
[18:08:15] * jmesmon ran into this yesterday
[18:08:28] <carllerche> acrichto: :(
[18:08:35] <carllerche> it would be nice of test mode has init hooks
[18:08:41] *** Quits: mr_wibble (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:08:43] <nmatsakis> jmesmon: ah beautiful :)
[18:08:54] <acrichto> jmesmon: ah cmr beat me to the punch
[18:08:54] <carllerche> I should file an issue!
[18:09:04] <nmatsakis> jmesmon: now if only we could supply -g :) but I think that fails to build :(
[18:09:10] <carllerche> acrichto: hopefully suggesting init hooks wouldn't require an rfc :P
[18:09:37] <acrichto> carllerche: it depends on how it's implemented, if it requires language changes then it would
[18:09:41] <acrichto> aka new attributes
[18:09:56] <acrichto> carllerche: to me it really underscores the desire for pluggable testing frameworks
[18:10:05] <carllerche> well yes but then attributes need to be pluggable
[18:10:13] <brson> barosl: fyi i feel the strikethrough on bors messages draws even more attention to them, maybe does the opposite of what you were intending
[18:10:15] <carllerche> which, i assume is a post 1.0 feature
[18:11:38] *** Joins: mib_gmxtdg (Mibbit@moz-juv.9o3.252.72.IP)
[18:11:46] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:12:01] *** Quits: tiffany (lymia@moz-5vj.q69.88.23.IP) (Ping timeout: 121 seconds)
[18:12:42] <brson> still working on making undeclared features errors. ran into a strange bug in rustdoc
[18:12:48] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[18:15:48] <arrrrrrrrr> brson: gh23238. it's a oneliner.
[18:15:48] <[o__o]> Add support for target-cpu=native: https://github.com/rust-lang/rust/pull/23238
[18:16:03] <arrrrrrrrr> (not quite one line but morally)
[18:17:44] <doener> arrrrrrrrr: sorry, meant to r+ earlier today, when I had a look at what clang does to compare it. r+'d now
[18:17:55] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[18:17:59] <arrrrrrrrr> doener: copy pasted from llc
[18:18:38] <cmr> nice.
[18:19:32] <eddyb> > we can't know whether the attribute is an inner attribute of the containing item or an outer attribute of the first contained item until we see the semi
[18:19:38] <eddyb> pretty sure that's... no longer the case
[18:19:50] <cmr> yeah that's very out of date now
[18:20:01] <eddyb> but it still parses some outer attributes :(
[18:20:28] <eddyb> because #! requires lookahead, presumably
[18:22:29] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[18:23:14] *** Quits: Heavensrevenge (Eric@moz-sn8mv3.abhsia.telus.net) (Quit: Leaving)
[18:25:22] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[18:26:47] <brson> i'm almost ready to start running some massive cargo tests on taskcluster
[18:26:55] <brson> the first run is going to be nearly 2000 builds
[18:29:04] *** Joins: tjakubo_ (tom@moz-nlkor1.ca.charter.com)
[18:29:16] <arrrrrrrrr> brson: gh23258 I think that's your area
[18:29:17] <[o__o]> configure should only download the parts of the submodules that are necessary for compilation: https://github.com/rust-lang/rust/issues/23258
[18:29:22] <cmr> brson: what machines is it running on?
[18:29:38] <eddyb> brson: that reminds me, my PR enabling mass scale probing of type inference results (e.g. after tentatively removing all integer suffixes) has been waiting for a review
[18:29:39] <arrrrrrrrr> having to download 500mb is really bad if your internet connection is less developed
[18:29:42] <brson> cmr: aws spot instances
[18:29:46] <cmr> nice.
[18:29:49] <eddyb> and pnkfelix left already :(
[18:31:09] *** Joins: njn (chatzilla@moz-i76q70.iinet.net.au)
[18:32:18] <brson> arrrrrrrrr: good idea
[18:33:32] <brson> eddyb: what analysis are you going to do on type inference?
[18:33:32] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[18:36:24] <eddyb> brson: before/after comparisons on resulting types, when removing certain kinds of hints
[18:37:01] <eddyb> I guess without defaults participating in fallbacks, the only straight-forward set is integer suffixes
[18:37:41] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Ping timeout: 121 seconds)
[18:37:58] <eddyb> brson: TBQH, just showing that integer suffixes are largely unneeded would be great use of that infrastructure I built on a whim :P
[18:39:33] *** Joins: huseby (huseby@moz-3oh5i4.linuxprogrammer.org)
[18:41:03] *** Quits: brson (brson@moz-obm.e0n.56.172.IP) (Ping timeout: 121 seconds)
[18:41:11] *** Joins: tiffany (lymia@moz-6q5ofr.lyrical.lymia.moe)
[18:41:32] *** Joins: brson (brson@moz-obm.e0n.56.172.IP)
[18:41:32] *** ChanServ sets mode: +o brson
[18:42:32] *** Quits: mib_gmxtdg (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:44:06] *** Quits: dinfuehr (dinfuehr@moz-l21rck.highway.telekom.at) (Connection closed)
[18:49:07] *** Quits: bvssvni (sven@moz-g5jjd9.bb.online.no) (Ping timeout: 121 seconds)
[18:49:22] *** Joins: bvssvni (sven@moz-g5jjd9.bb.online.no)
[18:53:45] *** cmr changes topic to '<= 21 days to 1.0.0-beta1: http://blog.rust-lang.org/2015/02/13/Final-1.0-timeline.html | http://internals.rust-lang.org/ | https://botbot.me/mozilla/rust-internals | https://buildbot.rust-lang.org/homu/queue/rust | see also #rustc and #rust-libs'
[18:53:51] <cmr> nmatsakis: https://github.com/rust-lang/rust/issues/23259
[18:54:59] *** Quits: sprang (sprang@moz-khvr0j.static-ip.telepacific.net) (Ping timeout: 121 seconds)
[18:56:40] <nmatsakis> cmr: dup of #22077 I think (which I should fix...)
[18:56:45] *** Joins: avikpal_ (avikpal@moz-bjs.mde.194.117.IP)
[18:57:14] <cmr> yup
[18:57:36] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[18:58:05] *** Quits: avikpal (avikpal@moz-bjs.mde.194.117.IP) (Ping timeout: 121 seconds)
[18:58:40] *** Joins: blaphmatx (Mibbit@moz-juv.9o3.252.72.IP)
[18:58:53] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[19:00:26] <kmc> the rust meeting is at 2pm?
[19:00:35] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[19:00:58] <nmatsakis> kmc: yes
[19:01:13] <kmc> thanks
[19:03:39] *** Joins: munksgaard (munksgaard@moz-fso.hq0.225.130.IP)
[19:05:20] *** Joins: James (quassel@moz-5qldmp.range109-148.btcentralplus.com)
[19:05:55] <Manishearth> Btw, has anyone else noticed a slowdown in Rust on linux (at least the linux builders are slower)
[19:06:09] * Manishearth votes we valgrind all the things
[19:08:27] *** Joins: Amaranth (travis@moz-7203lo.cpe.cableone.net)
[19:08:36] *** Joins: aochagavia (Mibbit@moz-jgp6eg.static.ziggozakelijk.nl)
[19:11:19] <aochagavia> I am trying to allow structs and tuples to be first-class constant items (trying to get this kind of things to compile: https://gist.github.com/aochagavia/683581ec93a38373aa56). Anyone here who knows how librustc/middle/check_const.rs works?
[19:11:51] <doener> eddyb: ^^
[19:12:05] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[19:12:44] *** Quits: blaphmatx (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:12:51] *** Joins: eddyb_ (eddyb@moz-76s.sgj.26.188.IP)
[19:13:20] <aochagavia> eddyb: do you know how librustc/middle/check_const.rs works?
[19:13:45] <aochagavia> eddyb_: ^^
[19:14:59] *** Quits: munksgaard (munksgaard@moz-fso.hq0.225.130.IP) (Ping timeout: 121 seconds)
[19:15:21] *** Quits: eddyb (eddyb@moz-1i0.6n6.26.188.IP) (Ping timeout: 121 seconds)
[19:16:36] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[19:18:45] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[19:19:31] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[19:23:52] *** Joins: laumann (laumann@moz-n9e72h.0.fullrate.dk)
[19:28:16] <WindowsBunny> Manishearth: I vote we setup a buildbot to do nightly performance analyzing builds
[19:28:29] <Manishearth> WindowsBunny: I and brson discussed this a bit the other time
[19:28:38] <Manishearth> I want manually triggereabl builds for:
[19:28:43] <Manishearth>  - mac -> droid xcompile
[19:28:46] <WindowsBunny> Manishearth: Something which does the -time-passes things and also analyzes memory usage
[19:28:48] <Manishearth>  - valgrinding all the things
[19:28:53] <Manishearth>  - other analysis
[19:29:06] <Manishearth> but right now we don't have the time to do that
[19:29:15] <Manishearth> I might do it if I get time but I don't know how :P
[19:29:32] <WindowsBunny> Manishearth: I have the memory analysis program for windows if you care :P
[19:29:55] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[19:29:55] *** ChanServ sets mode: +o nrc
[19:29:57] <Manishearth> no, I don't :p
[19:30:21] <WindowsBunny> I need to find other people who share similar views to me
[19:30:25] <WindowsBunny> and assimilate them
[19:31:11] <aochagavia> Anyone here who knows how librustc/middle/check_const.rs works?
[19:31:12] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:31:39] <WindowsBunny> Manishearth: lol @ handing out passwords to buildbot https://github.com/rust-lang/rust-buildbot/pull/10#issuecomment-78115602
[19:31:53] <brson> acrichto: ping
[19:32:19] <Manishearth> WindowsBunny: it's encrypted, you need dhuseby's key to read that
[19:32:20] <kimundi> aochagavia: eddyb_ knows about it, I think
[19:32:35] <aochagavia> eddyb_: ping
[19:32:42] <aochagavia> kimundi: thanks!
[19:33:01] <kimundi> oh, just saw that you already pinged him earlier :P
[19:33:54] <kimundi> brson: wait, 2000 builds? what are you planning ;)
[19:35:41] <brson> kimundi: to test all crates.io packages against rust nightlies to detect language regressions
[19:36:28] *** Quits: ctennis (ctennis@moz-kmepus.bltnin.sbcglobal.net) (Quit: Leaving...)
[19:41:52] <kimundi> brson: niice
[19:42:01] * kimundi should fix his packages then
[19:42:21] <kimundi> brson: is this a one-time thing, or a semi-regular check?
[19:43:07] <aochagavia> is there any standard way of leaving a message for someone? Maybe opening an issue and cc ing?
[19:43:11] <brson> kimundi: around the clock for therest of time
[19:43:24] <kimundi> woha, thats awesome!
[19:43:50] <brson> the goal is to have 0 regressions ever, or to at least know when we are making regressions
[19:43:56] <kimundi> what happend to server costs being a problem? :P
[19:44:08] <brson> it's still a problem!
[19:44:15] <kimundi> heh
[19:44:21] <brson> this infra is being built on aws spot instances though
[19:44:24] <brson> which are much cheaper
[19:44:55] <brson> i'm seeing a 'error: the trait `core::marker::Sized` is not implemented for the type `[u8]` ' error that is not very explanatory
[19:49:20] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[19:49:35] <brson> hm, I think it's because i'm returning an Option<Path>, does that make sense?
[19:49:47] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:49:47] *** ChanServ sets mode: +o pcwalton
[19:51:00] <brson> Path contains OsStr's, not OsStrings...
[19:52:07] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[19:52:48] *** Quits: Amaranth (travis@moz-7203lo.cpe.cableone.net) (Quit: Sleep time...)
[19:53:19] *** Quits: sav (e@moz-9u3te2.cc) (Ping timeout: 121 seconds)
[19:53:25] <WindowsBunny> while PathBuf contains OsString
[19:54:02] <WindowsBunny> brson: Path is equivalent to str and OsStr and [T] basically
[19:54:03] <scott> playbot: fn foo() -> Option<std::path::Path> { unimplemented!() }
[19:54:03] -playbot- <anon>:14:9: 14:65 error: the trait `core::marker::Sized` is not implemented for the type `[u8]` [E0277]
[19:54:04] -playbot- <anon>:14         fn foo() -> Option<std::path::Path> { unimplemented!() }
[19:54:04] -playbot- output truncated; full output at: http://bit.ly/1FGVOZg
[19:54:18] <scott> will it eventually mention Path instead of [u8]?
[19:54:24] <cmr> That error is quite unhelpful...
[19:55:12] <WindowsBunny> Even C++ is better at error messages
[19:55:16] *** hugoduncan is now known as hugod
[19:55:28] <scott> at least since Clang appeared
[19:56:01] <acrichto> brson: pong
[19:56:40] *** Joins: sav (e@moz-9u3te2.cc)
[19:56:58] *** Quits: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU) (Quit: WeeChat 1.0)
[19:57:33] <nrc> It would, in general, be better for error messages to use the alias name rather than the aliased type
[19:57:57] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[19:58:01] <nrc> it shouldn't be too hard to do, but I think because of the way we treat typedefs it is not trivial
[19:58:31] <scott> Clang says something like: `actual type` (aka `aliased type`)
[19:58:33] <scott> that would be nice
[19:58:36] <brson> acrichto: not sure i have questions now. i'm trying to resolve that problem with rpath failing to reletavize paths.
[19:59:05] <brson> acrichto: the new relative_from function doesn't behave the same as the old, but i guess that's on purpose. right now i'm just copying path_relative_from from old_path to rpath module
[19:59:21] <acrichto> brson: yeah that's probably the most reasonable thing to do
[19:59:36] *** Parts: aochagavia (Mibbit@moz-jgp6eg.static.ziggozakelijk.nl) ()
[19:59:44] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[19:59:54] *** Joins: Tobba|Laptop (Tobba@moz-o13d22.bredband.telia.com)
[20:01:01] *** Joins: Amaranth (travis@moz-7203lo.cpe.cableone.net)
[20:03:00] <awe> acrichto: perhaps not surprisingly, I messed up on the Windows stuff for the dylib changes. Should I just commit a fix and let you know or...?
[20:03:04] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[20:03:19] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[20:03:26] <acrichto> awe: I'd recommend amendments to the previous commit and force pushing, and then you can just ping me when they're up
[20:03:28] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:03:38] <awe> acrichto: alright, will do.
[20:04:02] *** Quits: Tobba|Laptop (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[20:06:13] <awe> acrichto: error: type `&ffi::os_str::OsStr` does not implement any method in scope named `as_bytes`
[20:06:16] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[20:06:20] <WindowsBunny> awe: Yep :D
[20:06:21] <awe> acrichto: is there a cross platform way to convert a PathBuf into bytes?
[20:06:29] <WindowsBunny> Why do you need the bytes version?
[20:06:36] <WindowsBunny> what function are you passing it to?
[20:06:37] <acrichto> awe: no (and that's intentional!)
[20:06:59] <WindowsBunny> If you're calling a winapi method, just make sure you use the W version and pass a wide string
[20:07:01] <awe> Well, create_path returns Vec<u8>.
[20:07:05] *** Joins: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU)
[20:07:09] <WindowsBunny> awe: So make it not return that
[20:07:19] <acrichto> ah yes it should return OsString
[20:07:32] <awe> Yeah, I see how that should work.
[20:10:25] <awe> acrichto: I wish there was some indication in the docs of conditional stuff because sometimes I forget that the official docs have many unix-only things.
[20:10:35] <acrichto> I wish so too :(
[20:10:48] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[20:12:38] *** Joins: sigma (sigma@moz-a5u.m43.48.37.IP)
[20:15:46] <eddyb_> uhm, sorry
[20:15:57] <eddyb_> Manishearth: I know how check_const works, I wrote the new parts in it
[20:16:05] <awe> acrichto: what's the idiomatic way to import StrExt? 
[20:16:16] <eddyb_> wait, no, same nick color
[20:16:39] <eddyb_> aww, aochagavia left :(
[20:19:06] <acrichto> awe: use prelude::v1::* if possible
[20:20:58] <awe> acrichto: it seems like StrExt as already explicitly imported which means I really don't understand this error.
[20:21:12] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Quit: Bye)
[20:22:12] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[20:23:01] <awe> Actually, I think I know what it is.
[20:23:02] *** Joins: mortishaxd (Mibbit@moz-juv.9o3.252.72.IP)
[20:26:40] *** Quits: mortishaxd (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:28:42] <kimundi> acrichto: I have a question: I still need to finish the implementation of the string pattern API, and I'm already aware of a few bugs in its current state. However, I'm currently kinda short on time till the end of the month, so I wanted to check if this is a problem, schedule-wise.
[20:29:17] <acrichto> kimundi: is there still much left to be done from an API perspective? e.g. would the upcoming changes be breaking changes?
[20:29:52] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Connection closed)
[20:29:56] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[20:30:31] <kimundi> acrichto: Afaik only missing methods, a few new iterator types belonging to those methods, and making sure the generic impls all match up
[20:31:03] <acrichto> kimundi: ah ok, but I seem to remember that all the methods added would have default implementations, right?
[20:31:35] <awe> acrichto: okay, I updated it with Windows fix.
[20:31:58] <kimundi> acrichto: They would just be additional methods on StrExt, nothing user-implementable.
[20:32:47] <acrichto> kimundi: ah ok, then that should be totally fine in terms of backwards compatibility, so it's also totally fine in terms of scheudling :)
[20:34:19] <kimundi> acrichto: I'm just a bit unsure with the way stability attributes and trait impls interact at the moment - its possible that right now some of the iterator types implement DoubleEndedIterator where they shouldn't
[20:35:12] <kimundi> Its a bit of a wrapper type/macro mess atm
[20:35:32] *** Joins: laumann_ (thomas@moz-n9e72h.0.fullrate.dk)
[20:35:41] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Connection closed)
[20:37:37] <acrichto> kimundi: hm, in that sense we may want to remove those impls sooner rather than later
[20:38:38] <kimundi> acrichto: Okay, I'll try to look into it during this week
[20:39:05] <acrichto> kimundi: thanks! if you run out of time or are running short, feel free to open an issue and aturon or I can take care of it
[20:39:19] <kimundi> acrichto: beta deadline is when again?
[20:39:23] *** Quits: laumann (laumann@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[20:39:39] *** Quits: larhat1 (Adium@moz-8v4.af0.232.213.IP) (Quit: Leaving.)
[20:39:46] *** Quits: avikpal_ (avikpal@moz-bjs.mde.194.117.IP) (Connection closed)
[20:40:02] <acrichto> kimundi: I think early-to-mid april
[20:40:07] <acrichto> I forget the actual date
[20:40:11] <kimundi> okay, thanks
[20:40:21] <acrichto> oh nvmd, March 31
[20:40:42] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[20:41:42] <WindowsBunny> kimundi: You can always look at the topic :P
[20:41:43] *** Joins: aochagavia (Mibbit@moz-jgp6eg.static.ziggozakelijk.nl)
[20:41:47] <aochagavia> eddyb: ping
[20:41:54] <aochagavia> eddyb_: ping
[20:43:29] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[20:46:58] *** Quits: aochagavia (Mibbit@moz-jgp6eg.static.ziggozakelijk.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:47:14] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[20:54:43] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[20:56:10] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:00:04] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[21:00:24] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[21:01:33] <brson> eddyb_: the patch removing all those suffixes is great https://github.com/rust-lang/rust/pull/22994
[21:02:49] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:02:49] *** ChanServ sets mode: +o pcwalton
[21:03:30] *** Quits: semarie (semarie@moz-77894l.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[21:04:56] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[21:08:19] *** Quits: bgamari (bgamari@moz-uvr07v.q402.fm1a.0470.2001.IP) (Ping timeout: 121 seconds)
[21:09:35] <burntsushi> erickt: yeah, the CBOR tags took a few... contortions... to put it mildly. :P
[21:10:03] *** Quits: tjakubo_ (tom@moz-nlkor1.ca.charter.com) (Ping timeout: 121 seconds)
[21:14:53] <bstrie> eddyb_: awesome
[21:15:48] *** Quits: sigma (sigma@moz-a5u.m43.48.37.IP) (Connection closed)
[21:16:49] *** kimundi is now known as zz_kimundi
[21:18:21] <eddyb_> grr
[21:18:30] <eddyb_> why do they join only when I'm afk?
[21:18:49] *** eddyb_ is now known as eddyb
[21:20:16] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[21:20:17] *** ChanServ sets mode: +o pnkfelix
[21:22:51] <imperio> eddyb: I'm here, don't worry. Everything's fine !
[21:23:23] *** Joins: dinfuehr (dinfuehr@moz-6jjoqr.highway.telekom.at)
[21:23:37] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[21:28:11] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:38:29] *** Joins: bgamari (bgamari@moz-uvr07v.q402.fm1a.0470.2001.IP)
[21:45:56] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:46:25] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:47:04] *** Joins: eddyb_ (eddyb@moz-mmq.pug.25.188.IP)
[21:47:29] *** Quits: eddyb (eddyb@moz-76s.sgj.26.188.IP) (Ping timeout: 121 seconds)
[21:49:13] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[21:49:36] *** Quits: Amaranth (travis@moz-7203lo.cpe.cableone.net) (Quit: Sleep time...)
[21:50:44] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[21:53:59] <erickt> burntsushi: you're a brave soul
[21:54:48] <burntsushi> erickt: yeah. the thing with CBOR is that tags are a really important part of the format. makes it extensible. so i was going to support it by hook or by crook.
[21:56:56] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:57:45] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:58:48] <erickt> burntsushi: yeah. well hopefully we'll get specialization soon so we don't need to do some of those hacks
[21:59:03] * erickt makes puppy dog eyes at nmatsakis
[21:59:10] <burntsushi> erickt: i assume specialization is post 1.0?
[21:59:18] <erickt> if it happens at all
[21:59:28] <burntsushi> ah
[21:59:54] <burntsushi> yeah, i'm not sure how i would support tags in the *direct* decoder. my method of madness depends on that intermediate stack.
[22:00:08] <erickt> I think we'll probably get something.
[22:00:23] <erickt> but certainly not before 1.0
[22:00:41] <bstrie> steveklabnik: we do need some kind of wiki-alternative for various information that has nowhere else to live
[22:01:44] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[22:01:50] <steveklabnik> we just talked about this at the meeting
[22:02:07] <steveklabnik> so, we sort of do, but one of the issues is that legally, we can't just copy whatever to other places
[22:02:16] <steveklabnik> i'm interested in clean-room adding whatever we need
[22:02:20] <steveklabnik> in the place that it should go
[22:03:21] *** Quits: laumann_ (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[22:04:56] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[22:06:27] <pnkfelix> nmatsakis: by the way I think you might have slightly misrepresented my RFC 955 as-written
[22:07:30] <nathan7> steveklabnik: the wiki is a git repo, you can preserve history (and thus authorship) while moving things
[22:07:34] <pnkfelix> nmatsakis: in particular it was crafted to *not* require the added semicolons (but at the cost of seeming inconsistency with how we handle if-expr and block-expr in tail position)
[22:08:17] <pnkfelix> nmatsakis: but I suspect our conversation this afternoon may have muddled that distinction (the semicolon business is an alternative design that Ericson2314 was pushing for)
[22:08:19] <steveklabnik> nathan7: brson was the person that talked to mozilla legal, not me
[22:08:45] <nathan7> steveklabnik: just trying to add a piece of information, this is not my dept at all
[22:09:23] <steveklabnik> :)
[22:09:28] <steveklabnik> yeah, thanks
[22:10:26] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[22:10:36] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[22:10:52] <brson> the wiki *can* be licensed correctly
[22:11:43] <brson> but it wasn't
[22:12:40] <brson> maybe somebody should set up an unofficial wiki
[22:13:01] <pnkfelix> brson: Would it be worthwhile to extract the pages whose author history consists solely of people who have signed contributor agreements?
[22:13:09] <pnkfelix> *wiki pages
[22:13:34] <brson> pnkfelix: i'm not sure. there are only a few pages i personally care about
[22:13:40] *** Joins: tedh (tedh@moz-mphdq5.sub-70-194-64.myvzw.com)
[22:13:54] <pnkfelix> brson: The Getting Started page was one I wanted to point someone at today
[22:14:00] <reem> Could we set up a new wiki that is licensed correctly?
[22:14:04] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[22:14:05] <brson> oh, that was a good page
[22:14:11] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[22:16:45] <simukis> what is all this about?
[22:17:50] <reem> I've been thinking that the recent discussion about changes to io::Read actually highlights a major use case of trait objects with non-object-safe traits that is not supported today
[22:18:10] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:20:38] <reem> We'd like to modify the read trait to something like: pub trait Read { fn read<M: MutBuf>(&mut self, buf: &mut M) -> io::Result<usize>; }
[22:21:16] <reem> but we can't because it makes Read object-unsafe because of the generic
[22:21:45] <reem> an alternative design is to have two grades of API, an object-safe API based on slices, and a non-object-safe API based on generics with MutBuf and Buf
[22:22:00] <reem> but the current object safety rules don't support graded APIs like this
[22:22:08] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[22:22:08] <reem> since you can't even have the generic method on the trait
[22:22:17] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:22:17] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[22:22:36] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[22:22:52] <sfackler> reem: you can if you tag it with "where Self: Sized", right?
[22:23:14] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:23:15] <reem> ahh, yes, you can
[22:23:55] <arrrrrrrrr> has there been any talk about owning references? that is, references that take ownership of the thing they reference but don't move the value. you can move out of those references which means that they are like Box<Something> but you don't have to allocate.
[22:23:59] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[22:25:14] <reem> arrrrrrrrr: There has been discussion
[22:25:24] <arrrrrrrrr> would be useful for varargs
[22:25:36] <reem> So you can have &move [T]?
[22:25:39] <reem> or something like it?
[22:25:56] <reem> That was my prompting use case too, but I hacked around it by using tuples + code generation
[22:26:12] <arrrrrrrrr> see https://github.com/rust-lang/rfcs/issues/960
[22:26:12] <reem> see: https://github.com/reem/rust-modifier/blob/master/src/impls.rs
[22:26:16] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:26:24] <arrrrrrrrr> in the untype case you cannot move out of the references
[22:26:27] <arrrrrrrrr> *untyped
[22:26:29] *** Quits: dinfuehr (dinfuehr@moz-6jjoqr.highway.telekom.at) (Connection closed)
[22:26:55] <reem> arrrrrrrrr: This would have to be like closures, right?
[22:26:58] *** Joins: dinfuehr (dinfuehr@moz-6jjoqr.highway.telekom.at)
[22:27:06] <reem> fn f<A: ..i32>(args: A) { .. }
[22:27:28] <arrrrrrrrr> reem: na, that's part of the sugar
[22:27:34] <reem> I see
[22:27:35] <arrrrrrrrr> but it would be implemented that way, yes
[22:27:39] <reem> That feels inconsistent with closures
[22:27:40] <arrrrrrrrr> (probably)
[22:27:41] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (Connection closed)
[22:27:47] <arrrrrrrrr> reem: varargs is about sugar
[22:27:56] *** Joins: jdm (jdm@moz-ak9a3r.ckpj.s0pt.0450.2001.IP)
[22:28:02] <arrrrrrrrr> you can already do all of this with slices, so..
[22:28:38] <reem> the main thing missing is a way to get an Iterator<Item=T> (not &T) on a small set of items without allocating
[22:28:46] <reem> there is no [1, 2, 3].into_iter()
[22:28:57] <arrrrrrrrr> reem: &move [T]
[22:29:27] <reem> Yes
[22:29:39] <reem> Hmm
[22:31:05] *** Quits: dinfuehr (dinfuehr@moz-6jjoqr.highway.telekom.at) (Ping timeout: 121 seconds)
[22:31:28] <doener> eddyb_: hrm, autoref for function args in overloaded calls only works for fat pointers because they happen to be non-immediate
[22:35:41] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:35:41] *** ChanServ sets mode: +o pcwalton
[22:35:44] *** Quits: tedh (tedh@moz-mphdq5.sub-70-194-64.myvzw.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:36:32] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:38:16] <eddyb_> doener: that's the kind of stuff I say we need a datumized trans to get anywhere
[22:38:24] <eddyb_> type-based properties
[22:38:25] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[22:39:46] <eddyb_> pnkfelix, nmatsakis, nrc: can one of you review gh23265 soon-ish? I'm sorry it went that far, apparently we got lots of anti-DRY code laying around
[22:39:47] <[o__o]> Refactor the way methods are stored in ast::ImplItem/TraitItem.: https://github.com/rust-lang/rust/pull/23265
[22:40:09] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[22:42:34] <nrc> oh my
[22:42:43] <nrc> the stats on that diff are nice :-)
[22:43:12] <nrc> I had thought that the we represent methods in the AST is not very nice
[22:44:26] <nrc> Every time I look at the AST I desperately want nested enums/unified structs & enums/refinement types
[22:45:21] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[22:45:30] <eddyb_> nrc: I did mention enums with a common structural part in here, a few days ago
[22:45:39] <nrc> eddyb_+++++++ for getting rid of MethMac - that fills me with pain every time I see it
[22:45:52] <nrc> eddyb_: I saw, was this why?
[22:45:57] <eddyb_> yupp
[22:46:10] <eddyb_> nrc: but now MacImplItem will fulfill that same painful duty :P
[22:46:22] <eddyb_> well, it's less crazy
[22:46:50] <nrc> :-(
[22:47:48] <nrc> I guess it is marginally better
[22:47:59] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[22:48:26] <nrc> I wish we could just encapsulate macros in one place in the AST, rather than having them everywhere
[22:48:32] <nrc> Not sure how that would work....
[22:49:28] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[22:49:33] *** Quits: huseby (huseby@moz-3oh5i4.linuxprogrammer.org) (Client exited)
[22:51:14] <eddyb_> nrc: there's a (theoretical) way to turn off variants using type params
[22:51:34] <imperio> acrichto: nothing to add on the PR ?
[22:51:55] <eddyb_> (putting Void instead of Mac in a variant, where enum Void {})
[22:52:16] <arrrrrrrrr> reem: generics over N would make it possible too
[22:52:16] <eddyb_> (GADTs would offer a similar functionality)
[22:52:44] <eddyb_> nrc: I added the breaking change "log"
[22:52:51] <eddyb_> nrc: I hope I didn't miss anything
[22:52:54] <reem> arrrrrrrrr: Hmm
[22:53:08] <eddyb_> playbot: trait Foo { pub fn foo(&self); }
[22:53:10] -playbot- ()
[22:53:11] <arrrrrrrrr> reem: fn f<N: usize>(x: [T; N]) { }
[22:53:13] <reem> efficiency wise, is there a difference between a struct with 1000 fields all of type T and [T; 1000]?
[22:53:21] <eddyb_> reem: yes
[22:53:27] <arrrrrrrrr> eddyb_: how?
[22:53:36] <eddyb_> reem: the former is O(N), the latter is O(1)
[22:53:42] <eddyb_> if we're talking compilation efficiency
[22:53:45] <reem> Ah
[22:53:49] <reem> I meant runtime
[22:53:49] <imperio> acrichto: oops, never mind, I just saw your comment
[22:53:52] <arrrrrrrrr> eddyb_: I don't think we are ;)
[22:54:09] <eddyb_> reem: well, good luck compiling stuff with thousands of fields
[22:54:21] <arrrrrrrrr> is there an upper bound of tuple fields?
[22:54:36] <arrrrrrrrr> (T, T, ........, T)
[22:55:12] *** Joins: mystor_ (mystor@moz-rrn.r78.15.130.IP)
[22:55:15] <reem> I think this is possible today with type level numbers (possible today) and some code generation
[22:56:35] <arrrrrrrrr> and hoping that it will be optimized
[22:57:52] <reem> in terms of runtime efficiency it should optimize fine
[22:58:19] <eddyb_> awww
[22:58:27] <eddyb_> nrc: libcore doesn't compile :/
[22:58:39] <arrrrrrrrr> libcore? sounds important
[22:58:54] *** Joins: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP)
[22:59:01] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[22:59:20] <eddyb_> well, no, it's not the rebase
[22:59:52] <eddyb_> I don't think I've ever gotten the latest changes to actually compile stage1
[22:59:55] <arrrrrrrrr> brson: you have another assigned pr from me that needs a decision
[23:00:05] *** Joins: tjakubo_ (tom@moz-dia6e2.warp2biz.com)
[23:07:20] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[23:07:26] <reem> arrrrrrrrr: This seems like a promising approach: http://is.gd/LJDcc1
[23:07:49] <reem> I wonder if you can actually define the array types recursively, mirroring the number types
[23:09:20] <arrrrrrrrr> ugh, please no
[23:10:42] <reem> why not?
[23:10:45] <reem> it actually works out rather nicely: http://is.gd/mQoRM5
[23:10:48] <reem> no boxing!
[23:11:19] <reem> ArrayPair<T, ArrayPair<T, ArrayPair<T, ArrayEmpty>>> should have the same repr as (T, T, T)
[23:11:34] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:11:36] <reem> it's just a special case of HLists
[23:12:33] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[23:12:50] <arrrrrrrrr> it works in the way replacing all of your u32 by enum Nat { Next(Box<Nat>), Null } works. but I would not call this "rather nicely"
[23:13:12] <arrrrrrrrr> we already have a nice number system implemented in hardware
[23:13:29] <reem> Except these are a compile-time-only construct
[23:13:39] <brson> arrrrrrrrr: thanks fol letting me know
[23:14:09] <arrrrrrrrr> brson: you could also just click the button once every two days and check your prs.
[23:14:11] <reem> arrrrrrrrr: Also that's a simple implementation, you can create binary type numbers too
[23:14:47] <arrrrrrrrr> reem: just because the generics are turing complete doesn't mean that it's the preferred way to get CTFE ;)
[23:15:05] <eddyb_> nrc: o/ I have a version that goes into testing (pushed)
[23:15:24] <reem> arrrrrrrrr: True - I'd rather have numbers built in, but this is the state of affairs we are in.
[23:15:47] <eddyb_> nrc: I'll do the test moving and the other stuff tomorrow
[23:15:55] <arrrrrrrrr> reem: I'd rather support the existing generics over N rfc than even entertain the thought of putting that system into practice
[23:15:56] <reem> and we can do this today, whereas it could be a long wait for type level numbers
[23:16:25] <nrc> eddyb_: cool, I had a brief look through and it looks good. I want to have a little more of a think about the design, but I'll try and do that today
[23:17:10] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:18:13] <arrrrrrrrr> brson: thanks for r+ing. I actually expected you to just close it after it was open for so long.
[23:23:29] <reem> pnkfelix: ping
[23:23:38] <pnkfelix> reem: pong
[23:23:50] <reem> What's the status of https://github.com/rust-lang/rfcs/pull/873 (type macros RFC)?
[23:24:15] <pnkfelix> reem: I haven't looked at it since I said I would shepherd it
[23:24:34] *** Quits: marsel (user@moz-91h.gkj.180.94.IP) (Ping timeout: 121 seconds)
[23:26:54] <simukis> it makes me wonder whether we couldn't just make macro expansion another pass rather than polluting our AST with *Mac’s
[23:26:56] <reem> pnkfelix: Ok. I'm just curious because it seems like a low-controversy feature and it's blocking me from using https://github.com/epsilonz/shoggoth.rs, which is quite useful.
[23:27:02] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:27:52] <arrrrrrrrr> does fn f(Box<self>) work?
[23:27:58] <pnkfelix> reem: I think nrc is right to ask about hygiene issues
[23:28:04] *** Joins: dinfuehr (dinfuehr@moz-6jjoqr.highway.telekom.at)
[23:28:51] <reem> Agreed. Unfortunately I don't think there's anything that can really be done without expanding macro hygiene generally (you'd want the same rules to apply to type macros and normal macros).
[23:29:03] <arrrrrrrrr> I thought I saw this syntax but apparently not
[23:29:26] <reem> arrrrrrrrr: fn f(self: Box<Self>) works iirc
[23:29:39] <arrrrrrrrr> it does!
[23:30:16] <pnkfelix> reem: I will try to allocate some time to look at it, but to be honest I think there are higher priority things to get done before the beta
[23:30:23] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[23:31:06] <reem> pnkfelix: I figured it's just a priority situation, just wanted to bump a tiny bit :)
[23:31:21] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[23:31:49] <arrrrrrrrr> I take it self: Box<Self> is a special case and there is only this and &self, &mut self?
[23:32:06] <reem> dunno
[23:32:07] *** Quits: dinfuehr (dinfuehr@moz-6jjoqr.highway.telekom.at) (Ping timeout: 121 seconds)
[23:32:10] <reem> probably
[23:32:14] <pnkfelix> arrrrrrrrr: We want to support more cases in the long term
[23:32:33] <pnkfelix> arrrrrrrrr: e.g. arbitrary smart-pointers that point to Self
[23:32:35] <reem> I have asked about self: ArbitraryTypeWhichContainsSelf before
[23:32:43] <pnkfelix> arrrrrrrrr: but its not the current situations
[23:32:44] <arrrrrrrrr> pnkfelix: f(&move self) would be quite interesting
[23:32:56] <arrrrrrrrr> for traits
[23:33:06] <reem> arrrrrrrrr: Only for Self: !Sized
[23:33:18] <reem> arrrrrrrrr: (it's interesting for only unsized types)
[23:33:18] <arrrrrrrrr> you mean Self: Sized
[23:33:32] <arrrrrrrrr> well, not really
[23:33:36] <arrrrrrrrr> it's interesting for both
[23:33:38] <reem> &move self and self appear isomorphic to me, unless self is not sized
[23:33:44] <reem> in which case &move self works and self does't
[23:33:52] <arrrrrrrrr> reem: but you cannot have fn f(self) in a trait
[23:34:02] *** Quits: mceier (mceier@moz-fm89sb.dynamic.chello.pl) (Ping timeout: 121 seconds)
[23:34:08] <arrrrrrrrr> or can you?
[23:34:16] <arrrrrrrrr> you can
[23:34:18] <reem> arrrrrrrrr: Sure, it's just not object safe
[23:34:19] <arrrrrrrrr> huh
[23:34:32] <arrrrrrrrr> reem: well, object safe is the interesting case then
[23:34:41] <arrrrrrrrr> then it's interesting for both
[23:34:46] <reem> arrrrrrrrr: It doesn't work for Self: !Sized, and Trait is not sized
[23:35:01] <arrrrrrrrr> yo, that's why we need &move self
[23:35:03] <reem> so you can't impl Trait for Trait if Trait contains a `self` method, so it's not object safe
[23:35:27] <reem> arrrrrrrrr: Sort of, we could also just teach the compiler to allow by-value self for unsized types and just use a reference under the hood
[23:35:29] <arrrrrrrrr> so that we can consume &move Trait
[23:35:34] <reem> like we do for normal parameters
[23:35:52] <arrrrrrrrr> that would be possible too
[23:36:05] *** Joins: mceier (mceier@moz-fm89sb.dynamic.chello.pl)
[23:36:17] <reem> eddyb_: you around? You have thoughts about this that are interesting.
[23:38:45] <arrrrrrrrr> reem: ugh, no it would not be possible. you still cannot move out of &Trait
[23:38:52] <arrrrrrrrr> so f(self) cannot be called
[23:38:57] <reem> ?
[23:39:11] <reem> We already pass normal parameters by reference under the hood
[23:39:16] <reem> if they're bigger than a pointer
[23:39:31] <reem> I'm suggesting we use the same mechanism for allowing `self` for !Sized types
[23:39:44] <arrrrrrrrr> let x = &String::new() as &Trait; let y = x.f(); // f(self) -> String
[23:39:46] <reem> the language doesn't actually change
[23:39:47] <arrrrrrrrr> ^ not possible
[23:39:54] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[23:40:00] <reem> let x = String::new(); f(x) passes x by reference under the hood
[23:40:09] <arrrrrrrrr> that doesn't really matter
[23:40:17] <reem> I'm saying we use the same opaque mechanism
[23:40:17] *** Quits: bvssvni (sven@moz-g5jjd9.bb.online.no) (Connection closed)
[23:40:31] <arrrrrrrrr> reem: you cannot move out of a &Trait. the implementation is irrelevant here.
[23:40:32] <reem> so it *looks* like I'm passing an unsized type by value
[23:41:00] <reem> urr
[23:41:05] <reem> this gets weird
[23:42:21] <reem> &move self is a clearer solution, even if it means there's never a reason to use `self` instead of &move self
[23:42:32] <reem> hmmm
[23:43:07] <arrrrrrrrr> https://gist.github.com/anonymous/afc1522bb45ab7434de9
[23:43:11] <arrrrrrrrr> part of the RFC I'm writing
[23:43:34] <reem> I'm basically proposing that line 32 gets automatically inserted by the compiler
[23:43:49] <reem> but the implications are nasty, so I don't know if it's actually a good solution
[23:44:05] <arrrrrrrrr> reem: huh, so casting &x to a trait that takes fn(self) now moves out of the x?
[23:44:13] <arrrrrrrrr> because &move x moves out of x
[23:44:29] <reem> you would just call x.string() and the compiler would insert (&move x as &move Trait).string()
[23:44:43] <arrrrrrrrr> reem: but we want object safety
[23:44:53] <arrrrrrrrr> that's the point of line 14
[23:45:02] <reem> Additionally, traits with by-value self are object safe
[23:45:10] <reem> so we just remove that restriction from object safety
[23:45:29] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:45:33] <arrrrrrrrr> reem: how would this work fn g(x: &X) { x as &Trait; }
[23:45:48] <arrrrrrrrr> the caller of g doesn't agree with being moved out of
[23:45:48] <reem> as it does today
[23:46:00] <reem> I'm confused
[23:46:10] *** Quits: rustical (dida@moz-55rvi2.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[23:46:11] <reem> &mut Trait and &Trait do not change
[23:46:13] <arrrrrrrrr> reem: how would this work fn g(x: &X) -> String { (x as &Trait)s.string() }
[23:46:21] <reem> it would not work
[23:46:31] <reem> since x.string() would complain that you can't move out of a &-refernce
[23:46:33] <arrrrrrrrr> reem: well, that's what I want to work with move references
[23:46:51] <reem> I see the problem
[23:47:14] <reem> the magic-`self` solution only works for methods, but it clearly doesn't work for non-self params or non-trait fns
[23:47:18] <reem> non-method fns*
[23:50:26] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[23:51:42] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[23:52:14] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[23:52:55] *** Joins: arrrrrrr1 (arrrrrrrrs@moz-c0r0b0.dynamic.qsc.de)
[23:55:37] *** Quits: arrrrrrrrr (arrrrrrrrs@moz-qpv06f.dynamic.qsc.de) (Ping timeout: 121 seconds)
[23:57:26] <arrrrrrr1> ugh, bandcamp has removed unlimited streaming
[23:58:41] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:59:48] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
