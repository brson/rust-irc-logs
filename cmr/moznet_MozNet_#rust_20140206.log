[00:00:10] *** Quits: halleck (a@moz-99121734.dynamic.mnet-online.de) (Quit: Leaving)
[00:01:26] *** Quits: fyolnish (fyolnish@moz-396C4AA3.uqwimax.jp) (Ping timeout)
[00:02:27] <mib_jsfecs> how do you do share data between tasks now without @ pointers?
[00:02:37] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[00:02:38] *** ChanServ sets mode: +o tjc
[00:02:43] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[00:02:53] <kmc> you could never share @ between tasks
[00:02:55] <kmc> not safely
[00:02:57] <acrichto> the mozilla/rust repo on github had the second highest number of closed issues in 2013, hurray everyone!
[00:03:15] <diverse> acrichto: awesome~! \o/
[00:03:28] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[00:03:53] <kimundi> mib_jsfecs: and @ pointers are still there, in form of the Gc<T>. Only the _syntax_ got removed.
[00:03:57] <kmc> mib_jsfecs: there's Arc / RWArc for cross-task refcounting
[00:04:09] <kmc> they were in extra::arc but I'm not sure where they are now
[00:04:54] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[00:05:41] <diverse> wow, we have such an awesome team and community.
[00:05:54] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[00:05:59] <gfarfl> Jemaclus: I noticed the output file had an extra \0 byte at the end, and traced it back to read_compressed
[00:06:36] <mib_jsfecs> is there a numeric project for rust yet?
[00:07:13] *** Quits: guest1 (Mibbit@98BB3052.8FFBE666.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:08:11] <ChrisMorgan> If one exits with libc::exit, will that unwind and invoke destructors?
[00:08:26] <kmc> don't think so
[00:08:29] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[00:08:56] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[00:09:12] <ChrisMorgan> That was my expectation. Now to test it.
[00:09:17] <kimundi> ChrisMorgan: Nope. It will corrupt the runtime, even.
[00:09:27] <ChrisMorgan> That's what I was concerned about.
[00:10:03] <ChrisMorgan> kimundi: what does that actually *mean*, though?
[00:10:11] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[00:10:24] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[00:11:53] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[00:12:47] *** Quits: hoverbear (hoverbear@moz-30934A12.wireless.uvic.ca) (Quit: Taking a nap.)
[00:14:26] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[00:14:33] *** Quits: mib_jsfecs (Mibbit@moz-E8F56CA6.raytheon.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:14:47] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[00:15:32] <kimundi> ChrisMorgan: No idea, but I rember the rust tool suffering from that problem. basically segfault on exit.
[00:15:57] <chromatic> A bors question: when one build fails, do all of the others get interrupted? I'm  tying to interpret this: https://github.com/mozilla/rust/pull/12006#commitcomment-5276933 so I can fix it.
[00:17:03] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:17:33] <ChrisMorgan> chromatic: yes.
[00:17:45] <ChrisMorgan> (That is, any that are still running are aborted.)
[00:18:13] <ChrisMorgan> chromatic: so http://buildbot.rust-lang.org/builders/auto-win-32-nopt-c/builds/3132/steps/compile/logs/stdio is all you really care about.
[00:18:15] <kmc> kimundi: is that because some atexit() thing runs?
[00:18:54] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[00:19:07] <chromatic> ChrisMorgan, thanks. That suggests the feature guard in that commit still isn't quite right then.
[00:20:12] <chromatic> Is there a better way to write this? I would hate to repeat "use iter::range;", but if that's clearest.... https://github.com/chromatic/rust/commit/3a23a11478e804f8077b75f6e2731b728db442b7
[00:20:36] <ChrisMorgan> chromatic: iter::range is presently only imported for cfg(target_os = "macos") and now you're trying to use it for cfg(windows).
[00:20:43] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[00:20:59] * ChrisMorgan retracts his statement, he was looking at an old version of the file
[00:21:17] <ChrisMorgan> chromatic: cfg(windows) ≠ cfg(target_os = "windows")
[00:21:35] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:23:32] <chromatic> Hm, so should I write instead: #[cfg(target_os) = "macos"]\n#[cfg(windows])\nuse iter::range;
[00:23:37] *** Joins: snerd_ (motk@moz-D21A06DF.members.linode.com)
[00:23:38] *** Quits: snerd_ (motk@moz-D21A06DF.members.linode.com) (Quit: snerd_)
[00:24:09] *** Quits: twi (Adium@moz-9FF4CB47.nsw.adsl.internode.on.net) (Quit: Leaving.)
[00:25:04] <acrichto> chromatic: I'd use #[cfg(target_os = "win32")]
[00:25:22] <acrichto> chromatic: just to keep up the same style with macos, I often use cfg(windows) if there's nothing else in sight
[00:25:47] *** Joins: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP)
[00:26:02] <ChrisMorgan> acrichto: cfg(windows) is what the function that actually uses range() has, so cfg(windows) would be the right thing for the use statement.
[00:26:33] <chromatic> That's what I had at first, and then I had doubts because it looked different from the Mac guard.
[00:26:38] *** Joins: Bewilderforce (Bewilderfo@moz-FD312B3F.ed.shawcable.net)
[00:26:44] <acrichto> well right now they're synonyms so it doesn't really matter too much
[00:27:10] <acrichto> std::os is a little sprawling...
[00:27:18] <Seb> How can I create a pointer from a [u8, ..8]?
[00:27:47] <Seb> from the contents*
[00:27:47] <acrichto> rusti: let a = [0u8, ..8]; println!("{:?}", &a);
[00:27:50] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[00:27:53] *** Quits: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP) (Ping timeout)
[00:28:00] <kimundi> Seb: As in, cast the 8 bytes to a ptr?
[00:28:02] <chromatic> If I leave off the semicolon from both guards, will they both apply to the import?
[00:28:05] <acrichto> oh dear that's not good...
[00:28:08] <Seb> kimundi: Yeah
[00:28:19] <kmc> Seb: there's .as_ptr() on &[u8]
[00:28:32] <acrichto> chromatic: semicolon at the end means that it applies to the enclosing item (in this case std::os), no semicolon means it applies to the next item (in this case the use statement)
[00:28:35] <Jemaclus> gfarfl: ah, interesting
[00:28:36] <Seb> Ah, cool, thanks
[00:28:37] <kmc> rusti: let a = [0u8, ..8]; println!("{:?}", a.as_ptr());
[00:28:40] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[00:28:46] <Jemaclus> gfarfl: is that an error in Rust or is it an error in my code?
[00:28:50] <kmc> rusti is borked or something
[00:29:06] <kimundi> Seb: To clarify, do you want a point _to_ the 8 btyes, or do you want to use the 8 bytes _as_ a pointer?
[00:29:08] <kmc> anyway I think a [u8, ..8] will automatically turn into a &[u8] when needed
[00:29:12] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:29:33] <ChrisMorgan> acrichto: std::os reminds me strongly of Python's os module—they both sprawl quite extensively!
[00:29:37] <Seb> kimundi: I want to use the 8 bytes as a pointer
[00:29:50] <Seb> It's a return val from a C lib
[00:29:50] <kmc> oh weird
[00:29:58] <kmc> cast::transmute_copy then
[00:30:47] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:31:06] <kmc> rusti: let x = [0u8, ..8]; let p: *() = unsafe { std::cast::transmute_copy(&x) }; p
[00:31:08] -rusti- (0x0 as *())
[00:31:09] <kimundi> unsafe { let x: *() = std::cast::transmute([0u8, ..8]); x }
[00:31:46] <kmc> actually I'm not sure why I decided transmute_copy is necessary
[00:31:55] <kmc> depends on whether you want to reuse that [u8, ..8] buffer I guess
[00:31:56] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[00:31:56] *** ChanServ sets mode: +ao dherman dherman
[00:32:18] <kimundi> [u8, ..8] should be POD though
[00:32:47] <kmc> so it will implicitly copy rather than moving?
[00:33:07] *** Quits: tiffnya (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[00:33:12] <kimundi> rusti: let x = [1u8, ..8]; let y = x; (x, y)
[00:33:13] -rusti- ([1u8, 1u8, 1u8, 1u8, 1u8, 1u8, 1u8, 1u8], [1u8, 1u8, 1u8, 1u8, 1u8, 1u8, 1u8, 1u8])
[00:33:17] <kimundi> yes :P
[00:33:47] <kimundi> It does a shallow copy without moving
[00:34:44] <cluelessperson> Do you know how to add flags to a user for oxmin?
[00:36:02] <cluelessperson> oxmin.addflag flag person  or person flag isn't working
[00:37:48] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[00:38:10] *** Quits: brendan (brendaneic@8DFE0F5E.F1D38B1F.1D6E592A.IP) (Quit: brendan)
[00:39:22] *** Quits: squiddy (squiddy@moz-3FE92C83.adsl.alicedsl.de) (Quit: Leaving)
[00:39:26] *** Quits: FrozenCow (FrozenCow@moz-E69F48E.dynamic.upc.nl) (Client exited)
[00:40:02] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:41:25] <_achin> rust! teh best! \o/
[00:41:25] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[00:41:44] <diverse> _achin: 2nd place!
[00:41:55] <diverse> \o/
[00:41:57] <_achin> \o/
[00:42:09] <sfackler> cluelessperson: this is the channel for the Rust programming language, not the Rust video game
[00:42:18] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[00:42:35] *** Quits: lost_in_my_mind (Mibbit@moz-82E5EE96.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:43:11] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:43:31] <diverse> sfackler: how could anyone mistake this #rust for the video game in the irc.mozilla.org server?
[00:43:37] <cluelessperson> sfackler, my bad. lol
[00:43:41] *** kimundi is now known as zz_kimundi
[00:45:12] <diverse> cluelessperson: you are as your name suggests
[00:46:51] <kmc> be nice
[00:47:17] <chromatic> acrichto, thanks for your help. One more try before I beg, borrow, or steal a Windows VM somewhere that I can flail around on.
[00:47:38] *** Joins: ckw (ckw@moz-1A26A9C8.hsd1.or.comcast.net)
[00:47:45] <Jemaclus> I actually went to the #rust video game chatroom on another server. Took me 20 minutes to realize I was in the wrong place... :)
[00:47:46] <tiernjo> I'm getting a "there is something wrong with the compiler" error, how do i run rustc in verbose mode?
[00:48:14] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[00:48:16] <diverse> Jemaclus: was it freenode?
[00:48:31] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:48:32] <Jemaclus> sounds right
[00:48:41] <acrichto> chromatic: yeah I ended up giving in awhile ago and made a windows vm
[00:48:45] <acrichto> it made me sad :(
[00:48:58] <diverse> Jemaclus: That's usually where people go, so I can't blame you.
[00:49:47] *** Joins: ramitos (ramitos@moz-5AC0C94E.netvisao.pt)
[00:49:49] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[00:50:28] <kmc> there is #rustlang on freenode but it's small iirc
[00:50:36] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[00:50:52] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[00:50:57] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[00:51:28] <chromatic> acrichto, I'm sure it won't be so bad, if I can just "apt-get build-essentials" and wait a few hours for it to download MSVC EE. Right?
[00:51:54] <acrichto> chromatic: oh man that's what I should have done, I just have a win32 VM now with mingw and things
[00:52:22] *** Joins: drueck (uid25037@moz-5F4AA75A.irccloud.com)
[00:52:42] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[00:54:40] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[00:54:44] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[00:54:49] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:55:17] *** Quits: Kxepal (Miranda@moz-C2AD231E.pppoe.mtu-net.ru) (Quit: Kxepal)
[00:55:32] *** Joins: Kxepal (Miranda@moz-C2AD231E.pppoe.mtu-net.ru)
[00:56:20] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[00:56:25] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:57:47] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:57:57] <bstrie> Jemaclus: #rust on freenode IS for the programming language :P
[00:58:01] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[00:58:03] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[00:58:16] <Jemaclus> maybe it wasn't freenode then
[00:58:23] <Jemaclus> :)
[00:58:48] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[00:59:05] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:59:20] *** Quits: igork_ (igork@moz-18540A65.broadband.corbina.ru) (Quit: Leaving)
[00:59:26] *** Joins: fyolnish (fyolnish@moz-396C4AA3.uqwimax.jp)
[01:00:25] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[01:00:48] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:00:58] <diverse> bstrie: so that means we have a #rust and #rustlang channel on freenode?
[01:01:08] *** Quits: fyolnish (fyolnish@moz-396C4AA3.uqwimax.jp) (Ping timeout)
[01:01:34] <kmc> i might be wrong also
[01:01:40] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[01:01:41] <kmc> it's been known to happen
[01:01:48] <jasom>  no #rustlang o freenode
[01:02:29] <Eridius> protip: don't `/list rust` on Freenode
[01:02:50] <Eridius> for some reason it doesn't seem to actually limit it to stuff with "rust" in the name
[01:05:16] <diverse> grr, alright, I'll cut cluelessperson some slack. Sorry.
[01:05:34] <bstrie> kmc: we don't tolerate fallible ops. turn in your @
[01:05:47] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[01:07:21] <Eridius> hrm, rustdoc bug: the link to Handle on this page is wrong: http://static.rust-lang.org/doc/master/std/comm/struct.Select.html
[01:07:34] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[01:07:45] <diverse> bstrie: what? He is doing his job.
[01:07:57] <acrichto> Eridius: https://github.com/mozilla/rust/issues/11678
[01:08:00] <Eridius> well, I mean, the real problem is Handle does in fact live at std::comm::select::Handle, but 
[01:08:02] <ChrisMorgan> src/libstd/comm/select.rs has the macro "select". Is it ready to be exported now?
[01:08:05] <Eridius> but it's priv and re-exported
[01:08:11] <Eridius> acrichto: ah hah
[01:08:19] <kmc> i think that was a joke, diverse
[01:08:47] <kmc> :)
[01:10:14] <diverse> kmc: I know it was, I reacted for a different reason.
[01:10:54] <geomyidae_> whomp whomp, the ubuntu PPA is ahead of the arch pkgs :(
[01:10:57] *** Quits: ramitos (ramitos@moz-5AC0C94E.netvisao.pt) (Quit: Textual IRC Client: www.textualapp.com)
[01:11:09] <geomyidae_> The io condition changes, looks like
[01:11:18] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[01:11:49] <SiegeLord> Never handled conditions... now my programs will stop mysteriously failing ;)
[01:12:05] <yuriks> is there a method to clone a vector, appending a new element to it?
[01:12:11] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:12:23] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[01:12:28] <yuriks> I can do to_owned and then shift, but was looking for a direct way
[01:12:30] <geomyidae_> Well, some of the udp stuff went from ->Option to ->Result so that borked enough things
[01:12:51] <yuriks> and then push*
[01:12:54] <diverse> probably borked for a good reason
[01:13:36] <cmr> geomyidae_: arch package is 4 days old at this point :(
[01:13:58] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:13:59] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:14:13] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[01:14:25] <acrichto> chromatic: I've pushed your branch to our 'try' builders on the buildbot
[01:14:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[01:14:43] <acrichto> chromatic: you can check on their progress at http://buildbot.rust-lang.org/grid?branch=try&refresh=15
[01:14:46] *** Quits: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[01:15:10] <acrichto> chromatic: I figure it's a bit more lightweight than waiting for bors
[01:15:15] *** Joins: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net)
[01:15:19] <bvssvni> yuriks: http://static.rust-lang.org/doc/master/std/vec/fn.build.html
[01:15:39] <bvssvni> yuriks: try this
[01:15:42] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:16:19] <yuriks> bvssvni: so in there I iterate through the vector and then push my last element?
[01:16:41] <yuriks> might work, but it's quite long winded, I was just hoping there would be a shorter way
[01:16:42] <bvssvni> yuriks: yeah, I have not tried it myself, thought :P
[01:17:18] <chromatic> acrichto, thanks!
[01:17:50] <diverse> _achin: number 2, woo! \o/
[01:18:02] <bvssvni> yuriks: hmm, it uses something I've never seen before
[01:18:09] <bvssvni> yuriks: a closure within a closure?
[01:18:35] <geomyidae_> thestinger = strcat right? Aren't they usually here?
[01:18:39] <SiegeLord> Oh lol... nvm what I said
[01:18:47] <diverse> geomyidae_: occasionally he shows up
[01:18:51] <SiegeLord> So many unused result warnings >_<
[01:19:37] *** Joins: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net)
[01:19:56] <SiegeLord> The error span for those is very, very wrong in the case of write!
[01:20:31] <_achin> github is now throwing 503's at me.  i blame you guys
[01:20:43] <_achin> you've been closing too many issues! github can't handle it!
[01:20:54] <bvssvni> yuriks: it takes a closure that takes a closure as argument
[01:21:01] <SiegeLord> It seems kind of odd for write! to have warn result on it... it's not like it's a safety issue
[01:21:08] <yuriks> bvssvni: yeah, you then call that closure for element
[01:21:17] <bvssvni> yuriks: that's pretty cool
[01:21:17] <diverse> _achin: it's an issue closing DOS?
[01:21:36] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[01:21:36] *** ChanServ sets mode: +o tjc
[01:21:44] <diverse> _achin: :P
[01:21:54] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[01:22:04] *** Joins: hoverbear (hoverbear@moz-30934A12.wireless.uvic.ca)
[01:23:49] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[01:23:58] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Quit: WeeChat 0.4.2)
[01:23:59] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[01:24:49] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[01:25:30] <yuriks> https://gist.github.com/yuriks/8836818
[01:25:38] <yuriks> I have a feeling I shouldn't be cloning so much stuff here...
[01:25:50] <SiegeLord> I think I'll just do #[allow(unused_must_use)]; Seems cleaner than putting let _ = write!() everywhere
[01:26:04] *** Quits: jadbaires (jadrian@E113B91B.55BF5227.6119BA41.IP) (Quit: Konversation terminated!)
[01:26:11] *** Quits: eibwen (kvirc@moz-15FDF8CC.dip0.t-ipconnect.de) (Ping timeout)
[01:26:11] *** Joins: jadbaires (jadrian@E113B91B.55BF5227.6119BA41.IP)
[01:26:21] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:26:32] *** Joins: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP)
[01:26:57] *** Quits: jadbaires (jadrian@E113B91B.55BF5227.6119BA41.IP) (Quit: Konversation terminated!)
[01:27:01] *** Joins: jadbaires (jadrian@E113B91B.55BF5227.6119BA41.IP)
[01:27:06] <acrichto> chromatic: looks like windows is unhappy: http://buildbot.rust-lang.org/builders/try-win/builds/875/steps/compile/logs/stdio
[01:27:16] <bvssvni> yuriks: maybe using the build method is faster?
[01:27:20] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[01:27:28] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: Jemaclus)
[01:27:32] <geomyidae_> why would a certain trait only be pulled in for one platform?
[01:27:48] <yuriks> bvssvni: I'm more worried about self.clone(). I feel like I don't know how to use self
[01:28:19] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:28:39] <bvssvni> yuriks: is it performance critical code?
[01:28:40] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[01:28:41] *** Quits: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP) (Ping timeout)
[01:29:08] <yuriks> bvssvni: no, but I want to learn how to do this properly
[01:30:06] <bvssvni> yuriks: I find clone() and such scary, but then I think about this happening behind the scene in the languages I am used to
[01:30:10] *** Joins: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net)
[01:30:43] <chromatic> acrichto, that's at least not the 'unknown symbol range' error.
[01:31:10] <ChrisMorgan> geomyidae_: if it's only used on one platform—otherwise you'll get a warning (unused import) for other platforms.
[01:32:26] <bvssvni> yuriks: if the result is allocated on the stack it is still fast
[01:33:42] <bvssvni> yuriks: you might try a borrowed pointer to self, with a life time constraint to the flag
[01:33:50] <yuriks> bvssvni: yeah, I'm exploring that now
[01:34:08] *** Joins: hoverbea_ (hoverbear@moz-30934A12.wireless.uvic.ca)
[01:34:09] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:34:12] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[01:34:55] *** Quits: hoverbear (hoverbear@moz-30934A12.wireless.uvic.ca) (Ping timeout)
[01:37:31] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[01:38:11] <yuriks> uhh, is it just me or is the reference manual lacking any info about some parts of the language?
[01:38:16] <yuriks> It's also missing some syntax
[01:38:34] <bvssvni> yuriks: link?
[01:38:47] <yuriks> http://static.rust-lang.org/doc/master/rust.html#functions
[01:38:49] *** Joins: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net)
[01:38:50] <yuriks> no syntax ^
[01:38:57] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[01:39:06] <yuriks> I also can't find any explanation of lifetime variables. I *sort of* know what they do, but not really
[01:39:41] <kmc> did you see http://static.rust-lang.org/doc/master/guide-lifetimes.html
[01:40:04] <kmc> it gets to lifetime variables in section 8
[01:40:22] <kmc> you can also ask questions here about lifetime vars, of course
[01:40:52] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:41:02] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:41:07] *** Quits: nszceta (hax@moz-E6CA8D6.hsd1.pa.comcast.net) (Input/output error)
[01:41:32] *** Quits: hoverbea_ (hoverbear@moz-30934A12.wireless.uvic.ca) (Quit: Taking a nap.)
[01:41:42] <jasom> I may make a hashmap that uses a fixed size list when under a constant size, and the builtin hash map otherwise
[01:41:54] <yuriks> how do lifetime variables in struct impls work?
[01:42:03] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131206145143])
[01:42:10] <yuriks> it seems to work the same as putting the variables in each fn inside the impl, but I'm not sure
[01:42:14] <jasom> since tree-based maps only seem to win for small numbers of keys
[01:42:58] <yuriks> kmc: I've read that one already, it doesn't go into very much depth however
[01:43:03] <bvssvni> yuriks: a lifetime variable in a struct is a borrowed pointer
[01:43:12] <SiegeLord> So my libraries rely on chaining method calls... does it make sense to handle errors by implementing traits on top of the Result type?
[01:43:19] <bvssvni> yuriks: the borrowed pointer can not live longer than the lifetime
[01:43:44] <yuriks> bvssvni: in a struct *impl*, not in the struct itself
[01:44:02] <chromatic> jasom, that might be an improvement for compilation speed.
[01:44:05] <bvssvni> yuriks: oh
[01:44:27] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:44:30] <kmc> they work the same as anywhere else
[01:44:56] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[01:44:59] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:45:13] <kmc> you can have impl<'r> MyStruct { ... } or you can have impl MyStruct { fn f<'r> ... } or both
[01:45:19] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:45:37] <diverse> bvssvni: struct Blah {x: T} impl Blah { blah_method() { /* blaaaaaaaaaaaaaaaaaaah */ } ... }
[01:45:40] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[01:45:43] <yuriks> but what are the semantics of impl<'r>?
[01:45:53] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:45:56] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:46:06] <diverse> geomyidae_: strcat is here now
[01:46:09] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Connection reset by peer)
[01:46:09] <jasom> chromatic: that's what I was thinking; I generalized trie.rs for strings and it seems to only beet hash for up to about a dozen elements or so
[01:46:09] <kmc> impls can be parametrized on type variables, including lifetimes
[01:46:19] <kmc> I think it's basically the same as putting those parameters on each fn inside
[01:46:20] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[01:46:33] <bvssvni> diverse: struct Blah<T> {x: T} impl<T> Blah<T> { ... }
[01:46:37] <jasom> chromatic: and I know from experience that a simple list should be able to do that
[01:46:43] <chromatic> O(n) > O(1) where n<8, in my experience
[01:46:47] <geomyidae_> >_>
[01:46:50] <diverse> bvssvni: T doesn't have to be generic :P
[01:46:57] <chromatic> Because that 1 > 8/2
[01:46:58] <jasom> chromatic: 8 was the number I was going to use
[01:46:59] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[01:47:02] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:47:15] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:47:36] <geomyidae_> strcat. First thank you. Second, is an update for rust-git incoming on Arch?
[01:47:54] <strcat> geomyidae_: it's not building because it's broken
[01:47:55] <chromatic> When I was optimizing Parrot's hashes, some 2/3 of them had 3 or 4 elements.
[01:47:59] <strcat> i.e. it's broken upstream
[01:48:15] <strcat> it runs a cronjob every day, when it's not broken it works
[01:48:22] *** Joins: mcpherri1 (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[01:48:27] *** Quits: mcpherri1 (mcpherrin@BB4DB59D.2876C283.70845BE5.IP) (Quit: mcpherri1)
[01:48:32] <strcat> /build/rust-git/src/rust/mk/docs.mk:303: *** multiple target patterns.  Stop.
[01:48:34] <strcat> ==> ERROR: A failure occurred in build().
[01:48:40] <strcat> this is in the clean build chroot
[01:48:52] <kmc> yuriks: but you can also use those variables when naming the type you're impl'ing, as bstrie showed
[01:48:57] <kmc> er as bvssvni showed
[01:49:42] <strcat> maybe I need to stop passing --disable-docs in addition to unsetting MAKEFLAGS to avoid -j8
[01:49:59] <yuriks> to be able to express "items that have the same lifetime as the object"?
[01:50:08] *** Joins: guest (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[01:50:08] *** Quits: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net) (Client exited)
[01:50:12] <jasom> chromatic: though the trees aren't a bad alternative; 2x slower than has at 100k elements, 4x faster at 4 elements
[01:50:52] <bvssvni> yuriks: it takes a while for my brain to load generic traits with lifetimes :P
[01:50:59] <kmc> yuriks: impl<T> just introduces a type variable, it doesn't assign it a particular meaning or use
[01:51:16] * ChrisMorgan is disappointed that the domain name http.rs is reserved
[01:51:18] <kmc> you can do impl<T> for Foo<T> { ... } or you can do impl<T> for Foo { ... use T another way here ... } or even not use it at all
[01:51:20] <chromatic> jasom, I wrote the most simplistic loop-through-an-array code I could find, and it ran fast enough for my purposes.
[01:51:25] <yuriks> I grok type type variables pretty well, but lifetime type variables ...
[01:51:37] <kmc> they mostly follow the same rules
[01:51:47] <diverse> ChrisMorgan: wow, really?
[01:51:57] <ChrisMorgan> diverse: yep ☹
[01:52:27] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[01:52:45] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[01:53:02] <bvssvni> ChrisMorgan: https.rs?
[01:53:09] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:53:09] *** ChanServ sets mode: +ao brson brson
[01:53:26] <diverse> bvssvni: as in http://https.rs
[01:53:46] <kmc> yuriks: you can introduce lifetime variables on a struct or a fn or an impl, but the only place where they actually get used is when you write &'t T (or when instantiating another struct / fn / impl)
[01:53:51] <ChrisMorgan> bvssvni: I wanted http.rs for the broad project, subsuming what is currently rust-http. https.rs just isn't the same.
[01:53:53] <diverse> or if you mean the root crate for his http project
[01:53:57] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[01:54:53] <ChrisMorgan> bvssvni: anyway, https.rs is also reserved.
[01:54:59] *** Joins: fyolnish (fyolnish@moz-396C4AA3.uqwimax.jp)
[01:55:01] *** Joins: apoelstra (username@moz-BBEB5B9E.sw.biz.rr.com)
[01:55:16] <diverse> ChrisMorgan: how about rust.https.rs?
[01:55:40] <bvssvni> diverse: *.http.rs belongs to same domain
[01:55:42] <ChrisMorgan> diverse: did you mean rust-http.rs?
[01:55:59] <diverse> bvssvni: ah shoot
[01:56:01] <diverse> ChrisMorgan: sure
[01:56:08] <yuriks> https://gist.github.com/yuriks/8837091
[01:56:13] <yuriks> any more concise way of doing this?
[01:56:38] * ChrisMorgan isn't interested in anything like rust-http.rs; it needs to be short, like seven syllables to pronounce :P
[01:56:42] *** Quits: fyolnish (fyolnish@moz-396C4AA3.uqwimax.jp) (Ping timeout)
[01:56:55] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[01:57:21] <pongad> Would it be possible to change `Stats::min` to `Stats::min_element`?
[01:57:40] <pongad> The name conflicts with `Ord::min`
[01:57:42] <yuriks> well, I have a problem, those methods are supposed to be chained, like so: flag("--banana", "Desc").alias("-b").required().has_option(Required)
[01:58:05] <bvssvni> yuriks: maybe you can skip some returns
[01:58:34] <yuriks> but I want to put them inside a ~[Flag], however at the end of the chain I have a &mut Flag, not a Flag
[01:59:02] <kmc> you could define a macro to make this more concise
[01:59:33] <kmc> yuriks: yeah, none of these functions allocates a Flag, they just mutate an existing Flag
[01:59:48] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[02:00:00] <kmc> what does "fn flag" return?
[02:00:24] <yuriks> I'm trying to emulate the same pattern as used in C++, but in C++ a reference to Foo collapses to a Foo automatically
[02:00:31] <yuriks> kmc: Flag
[02:00:40] *** Quits: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net) (Quit: WeeChat 0.4.2)
[02:00:42] <yuriks> it returns a struct literal
[02:00:46] <Jemaclus> dumb question.. what's &`a?
[02:00:49] <diverse> ChrisMorgan: does your rust-http project use only http/https protocols?
[02:00:52] <kmc> you might want to use ~Flag instead of &mut Flag, passing ownership along this chain
[02:00:55] <pongad> Actually, if T has two methods with the same name, is it possible to tell rustc which one it should use?
[02:00:59] <kmc> Jemaclus: a lifetime variable, assuming you meant &'a instead
[02:01:04] <kmc> http://static.rust-lang.org/doc/master/guide-lifetimes.html see section 8 and beyond
[02:01:11] <Jemaclus> yes, that.
[02:01:19] <ChrisMorgan> diverse: yes. (What else did you have in mind?)
[02:01:38] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[02:01:42] <o11c> pongad: I think you can put the trait name in somewhere
[02:01:46] <kmc> yuriks: I don't think a C++ &Foo really collapses to a Foo automatically, because the former is stored "elsewhere" and the latter is stored "here"
[02:01:53] *** Joins: richo (richo@10726D5F.1B04FC3.5CC412D0.IP)
[02:02:03] <kmc> it's more like, you can create a Foo and implicitly copy it from another Foo somewhere else
[02:02:15] <o11c> yuriks: why not just pass a copy?
[02:02:15] <pongad> o11c: I tried (x as &Trait).metod() but the parser didn't like that :D
[02:02:29] <Jemaclus> kmc: so basically, any vars that have `a before them will expire at the same time, and you can set up multiple lifetimes (`a, `b, `c, etc) to coordinate things..?
[02:02:36] <kmc> it's ' not `
[02:02:40] <yuriks> o11c: it's what I was trying to do at first, but the code came out very convoluted
[02:02:44] <kmc> and yeah, that's sort of the idea
[02:02:48] <kmc> read the lifetime tutorial though
[02:02:49] <o11c> yuriks: though I was actually thinking of not doing it like that
[02:02:58] <yuriks> https://gist.github.com/yuriks/8836818
[02:03:00] <Jemaclus> i meant ' :)
[02:03:14] <o11c> yuriks: I was thinking completely different structs for default; '\0' for no alias, ...
[02:03:22] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[02:03:40] <Jemaclus> kmc: thanks
[02:03:42] <kmc> copying may also slow things down
[02:03:47] <yuriks> o11c: instead of the array?
[02:04:03] <kmc> yuriks: did you try a version with e.g. pub fn alias(~self, name: &str) -> ~Flag
[02:04:10] <yuriks> kmc: I'm changing it to that now
[02:04:13] <kmc> ok
[02:04:27] <yuriks> seems to work fine, but then requires all flags to be ~ allocated, which I feel like shouldn't be needed
[02:04:30] <o11c> yuriks: no, still in the array ... but make it an array of trait
[02:04:54] <kmc> yuriks: it's needed if you want to take whatever falls off the end of that method chain and put it in a datastructure
[02:05:07] <kmc> if it's a &mut Flag then you don't own the value and can't take it
[02:05:23] <yuriks> kmc: I mean, I could do this if I had a local mut variable and just called methods on it, without the chaining. I want to capture the same thing but in a more concise way
[02:05:38] <diverse> ChrisMorgan: I'm trying to think of something
[02:05:40] <yuriks> o11c: I don't get what you mean
[02:06:42] <diverse> ChrisMorgan: alright, how about 'web.rs'?
[02:06:48] <ChrisMorgan> Tooken.
[02:06:59] <diverse> F********!
[02:06:59] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:07:00] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[02:07:06] *** Joins: mib_sxwdmt (Mibbit@5FB4F884.C4F5A14C.DDE5D3F6.IP)
[02:07:07] * ChrisMorgan would have been very surprised if that one hadn't been taken
[02:07:40] <kmc> yuriks: maybe like   fn flag<'a>(flags: &'a mut [Flag]) -> &'a mut Flag { flags.push(Flag::new()); flags.mut_last().unwrap() }
[02:07:43] <bvssvni> yuriks: you can write it a little more concise in a functional style
[02:07:58] * ChrisMorgan is not wedded to the .rs TLD by any means—it would just have been convenient
[02:08:03] *** Quits: onelson (onelson@moz-DD666EC5.laika.com) (Quit: Leaving.)
[02:08:04] <kmc> then you could do   let mut my_flags: ~[Flag] = ~[];  flag(my_flags).foo("--whatever").default("whatever");
[02:08:22] <bvssvni> yuriks: hmm, but that requires similar arguments...
[02:08:38] <yuriks> kmc: hm, kind of a hack, but it could work
[02:08:43] <diverse> ChrisMorgan: http.rust?
[02:08:56] <kmc> I mean if the user of the library is responsible for the storage of Flags, they need to pass that in somehow
[02:09:12] <kmc> such is life without automatic memory management :/
[02:09:20] <yuriks> I'm also thinking of just having the user pass an array of "tags" and the flag function takes them all and constructs the final Flag straight away
[02:09:20] <ChrisMorgan> diverse: fork out the $180,000 and demonstrate that you can run the .rust registry and ICANN *might* let you, in a year or two.
[02:09:22] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[02:09:47] <kmc> could do
[02:09:59] <bvssvni> yuriks: yeah, that's what I thought, except the 'tags' are functions
[02:10:13] <kmc> yuriks: the object you call chaining methods on doesn't need to be the Flag itself; it could hold a &'t mut Flag
[02:10:16] <o11c> yuriks: hm, does rust really not have a way of putting traits in an array without explicit casting? that's annoying ...
[02:10:34] <kmc> yuriks: and in that case you would pass the chaining-method object by value
[02:10:39] <o11c> trait Foo {} struct Bar { x: int, } struct Baz { y: int, } impl Foo for Bar {} impl Foo for Baz {} let foos : ~[~Foo] = ~[~Bar{x: 0}, ~Baz{y: 0}]; foos
[02:10:47] <o11c> that's what I was thinking, but it doesn't work
[02:12:25] <yuriks> o11c: I'm thinking of enum ArgTag { Alias(~str), Required, HasOption(IsRequired), Default(~str), Multiple }; then you do flag([Alias(~"--foo"), Required, Default("bar")])
[02:12:39] *** Quits: richo (richo@10726D5F.1B04FC3.5CC412D0.IP) (Ping timeout)
[02:13:06] *** Quits: guest (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:13:08] <bvssvni> yuriks: or you could just make the members of the struct public, and use struct declaration directly :P
[02:13:26] <yuriks> kmc: "such is life without automatic memory management", but C++ can do it :<
[02:13:31] <diverse> ChrisMorgan: I think using rust-http as the main name would be more practical, you'll just have to put up with a little verboseness
[02:13:33] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[02:13:35] <SiegeLord> I use an array of enums for plot options in my plotting library... seems to work ok, except for the namespace pollution
[02:13:48] <yuriks> bvssvni: I kind of want insurance for extensibility
[02:13:59] <kmc> yuriks: C++ does it by having lots of implicit magic that will bite you
[02:14:00] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:14:17] <yuriks> SiegeLord: hm, there's that too
[02:14:33] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:14:43] <yuriks> SiegeLord: well, people can just use getopt::*; inside the one fn that will do that? *frown*
[02:14:47] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[02:14:47] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[02:14:48] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[02:14:56] <kmc> in C++ you can't just convert a &Foo to a Foo; you can implicitly-construct a new Foo from a &Foo, which *is* a copy, and these implicit things cause a lot of trouble (to the point where major C++ style guides require disabling them on all classes)
[02:15:02] <SiegeLord> A hack until we get keyword arguments (I hope we get them)
[02:15:03] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[02:15:21] <diverse> ChrisMorgan: or rhttp.{rs,org,com,whatever}
[02:15:46] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[02:15:47] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[02:15:49] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Quit: )
[02:15:56] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[02:16:22] <o11c> yuriks: ooh, I think an enum could work ... but still not like that
[02:16:59] <kmc> it's too bad that there's not a way to make those enum values allow either ~str or &'static str without extra boilerplate
[02:17:05] <o11c> yuriks: just let flags = [Option("--foo", 'f')]
[02:17:27] <o11c> kmc: it'll need lifetimes anyway for the captured values
[02:17:44] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[02:17:51] <ChrisMorgan> Eridius: want a cool name for rust-encoding? "encrust". (Not sure whether that'd be a *good* idea or not, but it *is* an idea.)
[02:18:01] <Eridius> ChrisMorgan: hahahah
[02:18:09] <yuriks> ChrisMorgan: *thumbs up*
[02:18:25] <Eridius> ChrisMorgan: I should dust off my old proposal for an iterator-based encodings library and see how it actually performs
[02:18:54] <yuriks> kmc: wait, you mean Rust doesn't allow implicit assignment of values?
[02:19:12] <diverse> ChrisMorgan: hmm, how about rusttp? :P
[02:19:28] <yuriks> I'm pretty sure I've had it to that in the past...
[02:19:43] <kmc> yuriks: some primitive types like int, and structs of them, are implicitly copyable; any other assignment, function arg passing, etc. is a move and not a copy
[02:19:53] <kmc> so there's no analogue of C++'s copy constructors or operator=
[02:20:40] <kmc> and no direct analogue of C++11 move constructors for that matter
[02:21:35] <yuriks> hmm
[02:21:54] <kmc> let mut x = Foo;  x = bar();   // this will call the .drop() method on x, if Foo impl's Drop, and then move the bar() returned value into that location, but there's no bit of code that gets to combine the old and new objects, along the lines of operator=
[02:22:08] <yuriks> oh, look, my PR actually god +r'ed https://github.com/mozilla/rust/pull/12001
[02:22:10] <diverse> ChrisMorgan: come on, rusttp?
[02:22:12] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[02:22:40] <yuriks> kmc: ah, yes, but it does allow usage of value semantics in that sense
[02:22:42] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[02:22:49] *** Joins: hoverbear (hoverbear@moz-30934A12.wireless.uvic.ca)
[02:22:49] <bvssvni> yuriks: grats
[02:22:54] <kmc> sure
[02:22:57] <yuriks> kmc: do the new x and the old one share the same memory?
[02:22:59] <ChrisMorgan> diverse: sounds a little corny, donchathink?
[02:23:15] <ChrisMorgan> diverse: pronunciation?
[02:23:21] <kmc> but for example the above is not allowd if bar() returns &Foo, because you're not allowed to move from a reference, and there's nothing like a copy ctor or operator= to do an implicit copy
[02:23:29] <kmc> if you want an explicit copy you can do x = bar().clone();
[02:23:48] <yuriks> kmc: yeah, I think my main issue is the lack of copy ctor analog
[02:23:52] <strcat> yuriks: moves are still just a shallow copy
[02:23:53] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[02:23:54] <yuriks> operator= is good riddance for all I care
[02:23:56] <ChrisMorgan> diverse: and with capitalisation, Rusttp?
[02:23:57] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[02:24:07] <strcat> yuriks: Clone is the copy ctor analog
[02:24:22] <yuriks> but it's not implicit
[02:24:26] <kmc> or e.g. you can go from &[T] to ~[T] with .into_owned()
[02:24:35] <strcat> yuriks: all types are implicitly shallowly copyable instead
[02:24:38] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[02:24:40] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:24:50] <strcat> like C
[02:25:07] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[02:25:21] <kmc> yuriks: the intent is that the new x and the old one share memory, although I don't know that this is guaranteed in every case
[02:25:22] <yuriks> strcat: but in case the type has a ~ptr, it doesn't get implicit copy or move-from
[02:25:23] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[02:25:28] <diverse> ChrisMorgan: I don't know, I thought it could work. Pronounced as Rust-TP or Rust Transfer Protocol. Perhaps, RustTP with the capitalization?
[02:25:31] <strcat> yuriks: ~T is implicitly shallowly copyable
[02:25:31] <yuriks> so that's the main difference, I guess I simply have to live with that
[02:25:39] <strcat> yuriks: *all* types can do a shallow copy
[02:25:43] <strcat> it can't be disabled or overriden
[02:25:46] <kmc> strcat: isn't it moveable but not copyable?
[02:25:52] <yuriks> strcat: huh, I think I was doing something wrong then
[02:25:55] <strcat> kmc: a move is a shallow copy
[02:25:57] <ChrisMorgan> diverse: part of the problem is that it sounds too much like a protocol, rather than an HTTP library.
[02:25:57] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[02:26:03] <kmc> strcat: yes but not all shallow copies are moves
[02:26:07] <kmc> so saying it's "copyable" is misleading
[02:26:12] <strcat> kmc: not really.
[02:26:17] <yuriks> cause I had to call clone everywhere on an earlier experiment
[02:26:24] <kmc> a move is a shallow copy where you aren't allowed to use the source afterwards
[02:26:25] <pongad> Small question: is < operator a syntax sugar for cmp::lt?
[02:26:34] <strcat> kmc: right, but it's still a shallow copy
[02:26:37] <strcat> move means move of ownership
[02:26:51] <bvssvni> ChrisMorgan: rustio?
[02:26:54] *** Joins: HeroesGrave (Mibbit@moz-18DCFBED.dyn.cust.vf.net.nz)
[02:26:55] <strcat> rust's references are still references despite the fact that there's static checking on top
[02:26:57] <strcat> forbidding many things
[02:27:05] <kmc> strcat: I understand what you're saying but I still think "all values are implicitly copyable" is massively misleading, even if it's true in a specific pedantic sense
[02:27:06] <ChrisMorgan> bvssvni: it's HTTP, not I/O in general
[02:27:14] <yuriks> if I make the self argument just self, does it get implicitly copied in?
[02:27:15] <kmc> they don't act like "implicit copies" in any other language
[02:27:16] <strcat> kmc: I think it's misleading to state otherwise
[02:27:17] *** Joins: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP)
[02:27:21] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[02:27:21] <kmc> yuriks: it gets move din
[02:27:23] <kmc> moved in*
[02:27:25] <strcat> kmc: they work as they do in C
[02:27:34] <strcat> with a static check layered on top to prevent use-after-free, double-free, etc.
[02:27:34] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:27:41] <strcat> not much different than how lifetimes work
[02:27:42] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[02:27:42] *** Joins: killerswan (kevin.cant@moz-AC4CA16D.hfc.comcastbusiness.net)
[02:27:43] <o11c> rusti: struct OptS<'a> { name: &'a str, val: &'a mut int  } enum Flag<'a> { Opt(OptS<'a>) }  let mut val : int = 0; let x : ~[Flag] = ~[Opt(OptS{name: "hello", val: &mut val})]; println!("{:?}", x)
[02:27:44] -rusti- ~[Opt(main::OptS<>{name: "hello", val: &mut 0})]
[02:27:45] -rusti- ()
[02:27:46] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:27:52] <kmc> "they work as they do in C, except there's a completely different set of conditions that must also hold"
[02:27:58] <o11c> yuriks: basically what I was thinking, but wow I don't know rust
[02:27:58] * kmc rolls eyes
[02:28:01] <strcat> 21:28:51      strcat | not much different than how lifetimes work
[02:28:07] <strcat> kmc: no, there's not a completely different set of conditions
[02:28:13] <strcat> transfers of ownership exist as a concept in C
[02:28:14] *** Joins: guest1 (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[02:28:17] <yuriks> kmc: oh! that's exactly what I needed then!
[02:28:22] <strcat> it's just not enforced by the compiler
[02:28:39] <strcat> no different than how rust enforces lifetimes on references
[02:28:44] *** Quits: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net) (Quit: Leaving)
[02:28:56] <yuriks> kmc: I'm used to thinking of it as "this happens, then you must enforce these things on your own", so that way of thinking is actually pretty understandable to me :)
[02:28:57] <strcat> C still has the concept of a pointer lifetime, and reference/iterator invalidation
[02:29:01] <strcat> the compiler doesn't enforce it
[02:29:11] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[02:29:20] <kmc> I understand where you are coming from
[02:29:27] <strcat> &T is still a reference type whether or not it has static checks restricting what you can do with it
[02:29:31] *** Quits: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP) (Ping timeout)
[02:29:31] <strcat> kmc: it's what the tutorial says
[02:29:56] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[02:29:56] <strcat> per the official documentation, these are the semantics
[02:29:58] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:30:15] * strcat shrugs
[02:30:23] <strcat> I don't think it makes sense to pretend moves are some magical thing that's not a copy
[02:30:23] <yuriks> https://gist.github.com/yuriks/8837466
[02:30:28] <yuriks> ok, yeah, this is way better :D
[02:30:32] <strcat> move means move of ownership, not 'move memory'
[02:30:44] <strcat> rusti: let mut x = ~5; let y = x; x = ~10; (x, y)
[02:30:46] -rusti- (~10, ~5)
[02:30:49] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[02:30:52] <kmc> strcat: I didn't say moves aren't copies
[02:30:57] <kmc> but I think I'm done arguing this with you
[02:31:01] * kmc -> afk
[02:31:02] <yuriks> I had actually tried self before, but without the mut, because I still don't know the proper syntax for pointers <_<
[02:31:06] <guest1> What can we use pid (process id's) for?
[02:31:17] <yuriks> guest1: killing them! :D
[02:31:29] <guest1> how?
[02:31:35] <guest1> lol
[02:31:46] <yuriks> that was a (truthful) joke. In what context do you mean?
[02:32:00] <yuriks> o11c: we both don't know Rust! *hug*
[02:32:05] <guest1> That's exactly what I want to do. I want to kill a process based on it's pid
[02:32:17] <yuriks> in Rust?
[02:32:21] <guest1> yes
[02:32:49] <o11c> yuriks: that said, I think my approach is the right one
[02:33:07] <yuriks> guest1: http://static.rust-lang.org/doc/master/std/libc/funcs/posix88/signal/ffi.kill.html
[02:33:13] <o11c> yuriks: the only real difference we be replacing the val with a &'a mut FromStr or something
[02:33:14] <guest1> o11c: sorry for asking the same question again, but ive been scouring the docs for a while. thanks yuriks
[02:33:41] <guest1> yuriks: thank you so much, i've been looking for this for like 2 hours
[02:33:44] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[02:33:52] <kmc> guest1: pids are a UNIX concept, not a Rust concept
[02:33:55] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[02:34:02] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[02:34:04] <kmc> std::libc is a direct import of the C standard library + POSIX system calls
[02:34:13] <yuriks> guest1: Rust has binding for the entire C library, so search how to do stuff in C next time you don't know how to do a system level thing like that
[02:34:13] <o11c> yuriks: oh! I just realized, you don't need default at all!
[02:34:14] <bvssvni> guest1: it gets reexported under std::libc
[02:34:28] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:34:32] <o11c> yuriks: the "default" is just whatever value it had before it was passed!
[02:34:46] *** Quits: HeroesGrave (Mibbit@moz-18DCFBED.dyn.cust.vf.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[02:35:10] <o11c> now, if only somebody who actually know rust could show how to get rid of the double Opt(OptS{}) thing ...
[02:35:22] <strcat> yuriks: well... not the entire C library, just bits of it
[02:35:40] <yuriks> strcat: I think it has most of libc (various versions) and posix, no?
[02:35:46] <strcat> I don't think so
[02:36:01] <strcat> there are something like a hundred pthread functions, does it really have that many?
[02:36:05] <yuriks> o11c: where?
[02:36:15] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[02:36:16] <yuriks> strcat: ow. Now I'm glad I never did pthreads
[02:36:26] <strcat> there are that many functions due to opaque types
[02:36:44] <o11c> struct OptS<'a> { name: &'a str, val: &'a mut int  } enum Flag<'a> { Opt(OptS<'a>) }  let mut val : int = 0; let x : ~[Flag] = ~[Opt(OptS{name: "hello", val: &mut val})]; println!("{:?}", x)
[02:36:48] <strcat> the funny part is that in order to make it fast, on linux they are not actually opaque types
[02:37:25] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[02:37:32] <o11c> strcat: well, they can't actually be opaque since they can be declared by value ...
[02:37:46] <yuriks> o11c: you just typedef that type to a void*
[02:37:52] <strcat> o11c: true, but I think it's intended to not be that way
[02:38:06] <strcat> kind of like how hsearch is intended to be useful
[02:38:09] <o11c> yuriks: how is void* useful? FromStr all the way ...
[02:38:24] <yuriks> o11c: I feel like we're improperly mixing conversations here... haha
[02:38:25] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:39:15] <yuriks> o11c: ah, you're talking about the conversation from yesterday. I decided to do this and then layer that over the raw string library
[02:39:25] <yuriks> smaller sub-goals, etc.
[02:40:46] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[02:40:51] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:41:26] *** Quits: guest1 (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:42:32] *** Quits: gimpf (gimpf@moz-8EE4C1B0.adsl.highway.telekom.at) (Client exited)
[02:43:04] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[02:43:59] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[02:45:07] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[02:45:07] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:45:40] *** Joins: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net)
[02:45:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:46:43] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[02:47:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:51:42] *** Quits: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr) (Ping timeout)
[02:55:41] <pongad> I'm making changes to hashmap.rs and apparently rustc doesn't know what `cmp::rs` is...does anyone know why...?
[02:56:39] <ChrisMorgan> pongad: cmp::rs?
[02:56:47] <ChrisMorgan> What changes are you making?
[02:56:50] <Eridius> pongad: what is cmp::rs?
[02:57:01] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:57:16] <pongad> cmp::max sorry
[02:57:32] <Eridius> pongad: maybe you didn't use std::cmp?
[02:57:33] <pongad> Oh I think it's just cmp is not use'd
[02:57:55] <pongad> If I say  use cmp::{blah, blah}, it cmp itself use'd?
[02:58:04] <ChrisMorgan> No.
[02:58:04] <pongad> is cmp itself*
[02:58:05] <Eridius> no
[02:58:10] <pongad> OHHH, that's why
[02:58:41] <pongad> Thanks all, sorry about my silliness :D
[02:58:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[03:00:12] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:05:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:12:20] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[03:12:42] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:13:05] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:13:35] *** Joins: tjc (tjc@A21075EB.2D024FDB.284344F5.IP)
[03:13:35] *** ChanServ sets mode: +o tjc
[03:13:41] *** Quits: tjc (tjc@A21075EB.2D024FDB.284344F5.IP) (Quit: tjc)
[03:16:06] *** Quits: mib_sxwdmt (Mibbit@5FB4F884.C4F5A14C.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:19:43] *** Quits: zz_kimundi (kimundi@moz-47FBED98.dip0.t-ipconnect.de) (Ping timeout)
[03:19:55] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:21:05] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[03:22:09] *** Joins: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com)
[03:22:49] *** Joins: zz_kimundi (kimundi@moz-388F7F53.dip0.t-ipconnect.de)
[03:23:18] *** zz_kimundi is now known as kimundi
[03:23:26] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[03:23:33] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[03:24:02] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[03:25:38] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[03:26:24] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:28:02] *** Joins: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP)
[03:28:27] <geomyidae_> rust-pcap for the bindings, but for a generic lib I'm making, rather than bindings, is there a convention?
[03:28:49] <geomyidae_> pktutil.rs ?  pktutil? rust-pktutil? or geomyidae you're over thinking it and no one cares.
[03:29:10] <strcat> geomyidae_: I would not make separate bindings if they can both do the same thing
[03:29:37] <geomyidae_> Sorry, rust-pcap are the bindings, the pktutil is extra, separate, only slightly related stuff
[03:29:37] <strcat> just make one unified API and hide that there's a C lib underneath - only expose a separate API if there's a significant performance win
[03:29:39] *** Quits: hoverbear (hoverbear@moz-30934A12.wireless.uvic.ca) (Quit: Taking a nap.)
[03:29:53] <geomyidae_> (there's no explicit dependency between the two, intentionally)
[03:30:02] <strcat> ah
[03:30:10] *** Quits: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP) (Ping timeout)
[03:30:20] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:30:20] *** ChanServ sets mode: +ao dherman dherman
[03:30:26] <strcat> rust-packet + crate_id = "packet"
[03:30:37] <strcat> is what I would do
[03:31:01] * ChrisMorgan laughs at the notion of "only slightly related stuff", having yesterday read the description of the Debian `whois` package, which ends with: "The package also contains mkpasswd, a features-rich front end to the  password encryption function crypt(3)." Wat?
[03:31:26] <strcat> hm, wat? where do they get their whois from?
[03:31:55] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[03:31:56] <strcat> https://github.com/rfc1036/whois I thought this was what everyone used
[03:32:16] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:32:22] <ChrisMorgan> It's just the standard WHOIS (RFC 3912) protocol client. And for some reason *utterly* unknown to me, they scrunched mkpasswd in there too.
[03:32:22] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[03:33:22] <strcat> ChrisMorgan: if it makes you feel better, arch shoves all that stuff that's extracted from tcl into a package called 'expect'
[03:33:38] <strcat> since expect is the well known part of it...
[03:33:42] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[03:33:46] <strcat> but I don't see why debian puts it in an unrelated package
[03:33:51] <strcat> made by a different upstream
[03:33:59] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[03:34:54] <strcat> ChrisMorgan: well, upstream is called 'expect'
[03:34:56] * strcat shrugs
[03:35:09] <strcat> ChrisMorgan: http://sourceforge.net/projects/expect/files/Expect/5.45/ download that and peek in it
[03:35:21] <strcat> I can't explain how it makes any sense
[03:35:32] <mcpherrin> mkpasswd is an example script in expect
[03:35:46] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[03:35:50] <mcpherrin> rather, the expect book
[03:36:07] <mcpherrin> well it's written in `expect` too
[03:36:55] <strcat> for some reason I thought expect was an official part of tcl
[03:37:02] *** Quits: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net) (Ping timeout)
[03:37:16] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[03:37:22] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:37:51] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:38:44] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[03:38:59] <mcpherrin> I've never used tcl except for expect
[03:39:27] <strcat> mcpherrin: I've used tk and had to use some tcl...
[03:39:34] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[03:39:41] <mcpherrin> Actually come to think of it, I hacked on amsn ages ago which was tcl/tk
[03:39:58] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:41:46] *** Quits: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net) (Quit: Leaving.)
[03:42:20] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[03:42:55] <sp3d> I used to work on a web browser in tcl...
[03:43:01] <sp3d> that was a huge mess.
[03:43:35] <mcpherrin> sp3d: which one?
[03:43:53] <strcat> sp3d: can't be worse than xml/js/css ;)
[03:44:06] <sp3d> hv3
[03:44:17] <sp3d> strcat: the rendering engine was written in C
[03:44:41] <strcat> hm, C_uint still uses the host uint size
[03:44:49] <strcat> I guess I will try not to worry about that atm
[03:45:20] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:45:31] <geomyidae_> naming suggestions implemented, thx
[03:45:42] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[03:45:59] *** Joins: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com)
[03:46:05] <mcpherrin> strcat: EVERYONE LOVES XUL
[03:47:18] <strcat> yep, I love when sqlite-manager truncates integers outside the double range to 0
[03:47:25] <herrwolfe45> hi - how would one make a two dimensional array containing immutable byte arrays? I cannot seem to get the syntax correct and haven't found the solution in docs that I've read.
[03:47:29] <strcat> ;)
[03:47:46] <strcat> herrwolfe45: it's fixed-size at compile-time, right?
[03:47:59] <ChrisMorgan> strcat: there.is.only.xul.
[03:48:41] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[03:49:17] <herrwolfe45> it would not be fixed at compile time. 
[03:49:32] <strcat> herrwolfe45: both dimensions are dynamic?
[03:49:37] <herrwolfe45> yes
[03:49:41] <herrwolfe45> splitting a string into chunks
[03:50:09] <strcat> well, then, ~[&[u8]] would work but there's probably a better way
[03:50:10] <herrwolfe45> but splitting them into arrays of bytes, instead an array of strings
[03:50:26] <herrwolfe45> ok thanks strcat 
[03:50:38] <strcat> that'd be a dynamic array of views into the existing strings
[03:51:15] <strcat> goodbye tydesc
[03:52:34] *** Joins: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP)
[03:52:47] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:52:50] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[03:52:54] *** Parts: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) ()
[03:53:13] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:54:59] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:55:24] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[03:55:48] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:58:19] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[04:00:12] <jsonnull> Does libgreen use a thread pool?
[04:00:13] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:00:22] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[04:00:47] <strcat> it uses work stealing
[04:00:54] <strcat> there is a pool of scheduler threads
[04:00:58] <mcpherrin> jsonnull: It uses some number of threads, stealing tasks to run on them
[04:03:19] *** Quits: killerswan (kevin.cant@moz-AC4CA16D.hfc.comcastbusiness.net) (Quit: Leaving)
[04:03:24] *** Parts: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com) (ERC Version 5.3 (IRC client for Emacs))
[04:05:36] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Input/output error)
[04:05:51] *** Quits: shadower (tsedovic@moz-107AD163.redhat.com) (Ping timeout)
[04:06:02] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[04:06:40] *** Joins: shadower (tsedovic@moz-107AD163.redhat.com)
[04:06:50] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[04:07:09] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[04:07:15] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[04:08:08] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[04:09:02] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[04:10:55] *** Joins: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com)
[04:11:20] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[04:13:28] <herrwolfe45> strcat: this seems to be what ended up working ~[&[u8],]. Though, I'm not sure why the extra comma was required. Was it needed to create the dynamically sized vector?
[04:13:45] <strcat> the comma isn't required, not sure what you mean
[04:14:02] <strcat> ~[&[u8]] is a valid type
[04:14:20] <strcat> I don't think a comma inside is valid ;s
[04:14:40] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[04:14:55] <herrwolfe45> ok. I'm sure I've made a mistake somewhere
[04:16:28] <herrwolfe45> when I am declaring the array - I'm using ~[&[0u8],]. This makes me think, I'm somehow seeding it with a single 0 byte? But, the function is set to return ~[&[u8]].
[04:16:30] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[04:16:38] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[04:16:49] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[04:16:59] <strcat> herrwolfe45: ~[&[u8]] is a type
[04:17:19] <strcat> ~[&[0u8]] is a dynamic array of one slice containing a zero byte
[04:17:26] <strcat> the comma is redundant
[04:18:23] <strcat> &[u8] is the type of a slice, &[0] (or &[0u8]) is a 1-element slice
[04:18:29] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[04:18:31] <herrwolfe45> ok - and it seems the usage of 0u8 would be pointless as well
[04:18:49] <herrwolfe45> my goal in using that was to say 
[04:19:02] <herrwolfe45> 'I want this slice to be of type u8'
[04:19:04] <strcat> 0 is a generic literal, so it will infer the type of it
[04:19:17] <strcat> it does fall back to `int` atm if it can't figure out the proper type (may not always do that)
[04:20:36] <herrwolfe45> thanks for your help strcat, I've removed both the comma and the 0u8. The code is working as expected
[04:21:47] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:22:10] *** Quits: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com) (Quit: night!)
[04:24:03] *** Joins: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP)
[04:24:14] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[04:25:02] *** Quits: darthdeu (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Quit: Leaving...)
[04:25:15] <TheHydroImpulse> Is there a more Rust idiomatic way of reserving memory? Or is malloc considered acceptable? 
[04:25:40] <cmr> TheHydroImpulse: reserving memory in what way?
[04:26:03] <strcat> TheHydroImpulse: in all likelihood you want a vector
[04:26:21] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[04:26:36] <strcat> you shouldn't need to call malloc if you're not implementing a vector or smart pointer
[04:26:50] <diverse> strcat: a fixed sized one, right?
[04:26:51] <TheHydroImpulse> cmr I created a Volatile wrapper and the volatile intrinsics require a mutable block of memory. 
[04:27:01] *** Quits: jadbaires (jadrian@E113B91B.55BF5227.6119BA41.IP) (Quit: Konversation terminated!)
[04:27:09] <cmr> TheHydroImpulse: the traditional way is to use ~T but transmute it to *T internally
[04:27:16] <cmr> (and back again to ~T in the destructor, so that it gets freed)
[04:27:21] <strcat> TheHydroImpulse: the volatile intrinsics don't care where the memory is
[04:27:26] <strcat> no dynamic allocation is required to use them
[04:27:32] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[04:27:39] <cmr> ok, then it doesn't matter
[04:27:43] <cmr> just store the value directly
[04:27:45] <strcat> memory allocation would usually defeat the purpose
[04:27:47] <TheHydroImpulse> strcat ahh. Even if we're working non pointer types?
[04:28:03] <strcat> TheHydroImpulse: all values have an address
[04:28:18] <strcat> you can certainly take an &/&mut reference to any value
[04:28:25] <strcat> doesn't need to be a dynamic allocation
[04:28:28] <TheHydroImpulse> car strcat Makes sense. I'll try it out, thanks.
[04:28:57] * strcat isn't sure how volatile_load/store would usually be used
[04:29:07] <strcat> I'm guessing you have some static memory location you call them on
[04:29:54] <TheHydroImpulse> Also, would introducing a Volatile wrapper be accepted in a PR?
[04:30:49] <strcat> dunno
[04:30:59] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:31:05] <strcat> depends on how it works I guess
[04:31:24] <strcat> if it eases the use cases people are using volatile_load/volatile_store for, I think it would be
[04:31:37] <TheHydroImpulse> kk cool. Thanks
[04:31:51] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[04:32:14] <strcat> static mut: Volatile<uint> = /* how do you construct one? not sure how atomics deal with this */;
[04:32:26] <strcat> static mut x: Volatile<uint> = /* how do you construct one? not sure how atomics deal with this */;
[04:32:46] <strcat> are they usually defined in extern blocks?
[04:32:47] * strcat shrugs
[04:33:03] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Client exited)
[04:33:05] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[04:33:05] <strcat> if I'd tried to write a device driver in rust I guess I'd know
[04:33:26] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[04:33:28] <strcat> well, I guess you have a ptr
[04:33:57] <strcat> so you need some way of constructing VolatilePtr<T> statically
[04:34:20] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Client exited)
[04:34:22] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[04:34:40] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:35:03] <TheHydroImpulse> lol. Currently I have the following: `... Volatile<uint> = Volatile::new(5);`. Then fetching through `.as_ptr()`. Still need to think through each use case though.
[04:35:18] <cmr> can't have that in a static
[04:35:24] <strcat> problem is that a method call won't work in statics
[04:35:28] <strcat> (or function call)
[04:35:37] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Client exited)
[04:35:39] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[04:35:46] <TheHydroImpulse> yeah, I'll need to revisit the static situation
[04:36:22] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[04:36:38] *** jorendorff_away is now known as jorendorff
[04:36:43] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[04:38:44] *** Quits: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0/20140127194636])
[04:39:00] *** Quits: an0nymous (an0nymous@moz-F04BA440.tx.res.rr.com) (Quit: Konversation terminated!)
[04:39:34] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[04:40:12] *** Quits: lpy (lpy@FA66696A.6C1907BC.E99F7FDB.IP) (Ping timeout)
[04:41:20] *** Joins: lpy (lpy@CD0DB27D.2153E224.E99F7FDB.IP)
[04:41:51] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[04:42:49] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[04:43:37] <sp3d> rusti: let x: u8; &x as *u8
[04:43:42] -rusti- <anon>:10:21: 10:22 error: use of possibly uninitialized variable: `x`
[04:43:42] -rusti- <anon>:10         let x: u8; &x as *u8
[04:43:42] -rusti-                               ^
[04:43:42] -rusti- error: aborting due to previous error
[04:43:42] -rusti- application terminated with error code 101
[04:43:59] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[04:46:25] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[04:49:54] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[04:51:29] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[04:51:30] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[04:51:58] *** Quits: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP) (Ping timeout)
[04:53:24] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[04:55:47] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[04:55:52] <diverse> strcat: could statics work with macro calls?
[04:56:01] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:56:26] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[04:57:15] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[04:57:28] *** Joins: dmac (dmac@moz-94F55C3.hfc.comcastbusiness.net)
[04:57:29] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Connection reset by peer)
[04:57:54] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[04:58:53] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[04:59:42] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[05:00:10] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[05:01:05] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:01:50] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[05:03:32] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[05:06:59] * diverse feels deserted
[05:07:18] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:08:16] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[05:09:30] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[05:09:39] *** Joins: an0nymous (an0nymous@moz-F04BA440.tx.res.rr.com)
[05:10:57] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:11:17] * skrylar gives diverse a cookie
[05:12:13] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[05:12:37] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:12:39] *** Parts: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) ()
[05:12:54] <diverse> skrylar: would you know if statics could use macros?
[05:13:11] <cmr> diverse: use them for what?
[05:13:20] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Client exited)
[05:14:19] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[05:14:41] <diverse> cmr: here is an example, static test: ~str = format!("{}", "static string");
[05:15:09] <diverse> (btw, that causes ICE)
[05:15:14] <cmr> diverse: you can't have ~str in a static, it requires runtime initialization and destruction
[05:15:22] <cmr> we don't have life-before-or-after main
[05:15:24] *** Joins: derek_c (derek@moz-B784A75D.cit.cornell.edu)
[05:15:46] <diverse> ah
[05:16:01] * diverse facepalms
[05:16:51] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:17:04] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:17:50] *** Quits: aklt (aklt@moz-E66E9BCB.u.parknet.dk) (Quit: leaving)
[05:18:01] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:18:30] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Quit: Lost terminal)
[05:20:50] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[05:20:55] *** Quits: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net) (Client exited)
[05:21:11] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[05:23:25] *** Quits: lpy (lpy@CD0DB27D.2153E224.E99F7FDB.IP) (Ping timeout)
[05:23:59] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[05:24:07] *** Joins: lpy (lpy@CD0DB27D.2153E224.E99F7FDB.IP)
[05:24:31] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[05:25:00] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[05:25:19] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[05:26:08] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:26:24] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[05:26:58] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[05:26:59] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:27:02] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[05:27:03] *** Joins: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net)
[05:27:27] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[05:27:49] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[05:28:41] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[05:28:51] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[05:29:21] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[05:29:50] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:29:58] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[05:31:23] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[05:31:30] *** Quits: sellout (Adium@moz-CF70CF20.hlrn.qwest.net) (Quit: Leaving.)
[05:31:38] *** Joins: reed (reed@tech.monkey)
[05:32:39] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[05:33:36] *** Quits: blank_name (blank_name@75624DB1.E6D3F868.537E532E.IP) (Ping timeout)
[05:35:07] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[05:36:08] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Ping timeout)
[05:36:14] *** Joins: blank_name (blank_name@6D7A111F.7C86004B.6D228269.IP)
[05:36:51] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[05:37:11] *** Joins: sellout (Adium@moz-CF70CF20.hlrn.qwest.net)
[05:38:34] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:39:06] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[05:39:08] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[05:39:14] *** Quits: blank_name (blank_name@6D7A111F.7C86004B.6D228269.IP) (Ping timeout)
[05:40:08] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[05:41:20] * strcat has defeated the evil tydescs!
[05:41:29] <cmr> !
[05:41:38] <cmr> strcat: savior of the new republic
[05:41:41] <strcat> only reflection uses them now
[05:42:01] <strcat> now the fun part - no longer generating tydescs
[05:42:04] <cmr> http://www.youtube.com/watch?v=BjDaPOWdx6s
[05:42:24] <strcat> I did most of the work in previous commits though ;p
[05:42:43] <strcat> 383e3fd13b99827b5dbb107da7433bd0a70dea80, etc.
[05:42:46] <phil> so i need to pass a ***i8 to a C function
[05:43:01] <cmr> phil: fun
[05:43:01] <phil> but i dont know how to initialize that
[05:43:10] <cmr> &&&42 :P
[05:43:15] *** Joins: blank_name (blank_name@9C54A110.964BADD.93A5C78C.IP)
[05:43:21] <strcat> phil: what does it actually want?
[05:43:22] <phil> i do let mut missing: ***i8;
[05:43:34] <strcat> an array of arrays of null-terminated strings?
[05:43:37] *** Quits: derek_c (derek@moz-B784A75D.cit.cornell.edu) (Ping timeout)
[05:43:40] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[05:43:41] <phil> i believe so
[05:43:52] <cmr> that'd just be **i8
[05:43:56] <phil> its XCreateFontSet
[05:44:00] <strcat> cmr: array of *arrays* ;p
[05:44:17] <cmr> oh
[05:44:19] <cmr> yes
[05:44:28] <phil> i dont know why theres the third * either
[05:44:33] <cmr> char ***missing_charset_list_return
[05:44:37] <phil> yeah
[05:44:42] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[05:44:46] <cmr> beautiful
[05:44:58] <strcat> phil: can I suggest using pango? ;p
[05:45:27] <phil> i dont wanna use GTK
[05:45:39] <cmr> pango doesn't need gtk
[05:45:39] <phil> im trying to take dwm and put it into rust
[05:45:45] <cmr> ah
[05:45:58] <phil> its a learning exercise for me
[05:46:06] * strcat shrugs
[05:46:13] *** Quits: blank_name (blank_name@9C54A110.964BADD.93A5C78C.IP) (Ping timeout)
[05:46:21] <strcat> pango gives you scalable fonts, i18n support (RTL text, etc.)
[05:46:27] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[05:46:30] <phil> hmm
[05:46:42] <cmr> also there are patches for dwm + pango iirc
[05:46:46] <strcat> dwm doesn't use it because it has a love for bitmap fonts
[05:46:55] <cmr> http://dwm.suckless.org/patches/pango
[05:47:04] <strcat> if you have a high DPI screen or are not english speaking, you can show yourself out
[05:47:06] <phil> ill look into that
[05:47:06] <strcat> ;p
[05:47:09] <cmr> (aren't search engines wonderful)
[05:47:56] <strcat> hm
[05:48:01] <strcat> now time to actually slay all the tydescs
[05:48:05] <strcat> glue.rs is so weird though
[05:48:30] * strcat sighs
[05:48:43] <strcat> it's so overly generic
[05:49:27] <diverse> strcat: you can do it!
[05:49:46] <strcat> call_tydesc_glue_full is only used for visit glue now
[05:50:19] <strcat> hm
[05:50:22] <strcat> drop_ty is used though
[05:51:46] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[05:52:19] *** Joins: elyzion (elyzion@moz-D4AAE1FD.ap122.ftth.ucom.ne.jp)
[05:52:24] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[05:52:42] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Ping timeout)
[05:54:57] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:54:58] *** ChanServ sets mode: +ao dherman dherman
[05:55:05] <elyzion> Is there any real difference between do spawn {} and spawn(proc() {})? (Just started with rust recently, sorry if this has an obvious answer.)
[05:55:19] *** Quits: lpy (lpy@CD0DB27D.2153E224.E99F7FDB.IP) (Ping timeout)
[05:55:26] <cmr> elyzion: exactly equivalent, but the first doesn't work on master anymore.
[05:55:27] <strcat> elyzion: `do` is gone now
[05:55:29] <cmr> `do` has been removed.
[05:55:54] *** Joins: lpy (lpy@CD0DB27D.2153E224.E99F7FDB.IP)
[05:56:06] <elyzion> cmr: strcat thank you, it's still up on rust-lang page.
[05:56:27] <cmr> elyzion: the snippet on the frontpage is for the most recent release.
[05:56:30] *** Joins: blaenk (blaenk@moz-43A413B6.lsanca.dsl-w.verizon.net)
[05:56:38] <diverse> elyzion: the docs are not always up-to-date
[05:56:42] <elyzion> cmr: figured as much :) thank you.
[05:57:22] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:57:35] <Heather> serialize :(
[05:58:03] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[05:58:47] <strcat> Heather: hm?
[05:58:47] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Connection reset by peer)
[05:58:48] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[05:58:51] <strcat> it became libserialize
[05:59:08] <strcat> cmr: it works!
[05:59:12] <strcat> no more tydescs!
[06:00:13] <Heather> I see...
[06:00:20] <Heather> oh...
[06:00:31] <Heather> they want run whole program in try catch block
[06:00:37] <Heather> and they say it's normal
[06:01:00] <Heather> please give me some technical arguments to explain why they should not do it
[06:01:18] *** Joins: blank_name (blank_name@973FA96D.E6D3F868.537E532E.IP)
[06:02:05] <strcat> ?
[06:02:26] <ChrisMorgan> Heather: well, what does it achieve? Silent failure, that's all. So that you don't know when something went wrong. I would not bother giving technical arguments on such a topic—I would give business arguments: it can do *extremely* expensive damage.
[06:02:32] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[06:03:35] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[06:03:47] <Heather> ChrisMorgan: please join discussion https://github.com/Heather/coreutils/commit/f6c46024e81390678f51bc83227c6736124b9299
[06:04:01] *** Joins: derek_c (derek@moz-96756762.cit.cornell.edu)
[06:04:45] *** Quits: derek_c (derek@moz-96756762.cit.cornell.edu) (Quit: Leaving)
[06:05:07] *** Joins: derek_c (derek@moz-96756762.cit.cornell.edu)
[06:07:01] <ChrisMorgan> Heather: that's not what I would call a global try..catch block. That *is* the correct way to exit there.
[06:07:16] *** Quits: jsonnull (Thunderbir@26F61E6.CFD9471D.494A0F8B.IP) (Quit: jsonnull)
[06:07:19] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Input/output error)
[06:08:10] <Heather> ChrisMorgan: huh?
[06:08:17] <Heather> ChrisMorgan: then explain me why )
[06:08:20] <ChrisMorgan> Heather: I wouldn't call it "crash", but what it's doing is entirely sound.
[06:08:55] <ChrisMorgan> Heather: before actually doing anything, it verifies its command line arguments. If they are not valid, it prints a message to stderr and exits with code 1. What's wrong with that?
[06:09:28] <ChrisMorgan> Oh, you're commenting on the *comment*. Got it.
[06:09:37] * ChrisMorgan is daft
[06:09:38] <Heather> ChrisMorgan: wrong with global try catch !
[06:13:50] <Heather> ChrisMorgan: they want fn main() { task::try( <- and it's terrible... I don't believe that it's acceptable
[06:13:59] * ChrisMorgan will comment
[06:15:37] *** Quits: andrew-d_w (andrew-d_w@moz-E7894907.nat.bb.dnainternet.fi) (Input/output error)
[06:16:17] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[06:16:18] *** Quits: StarLight (StarLight@moz-4B46BF19.pppoe.avangarddsl.ru) (Ping timeout)
[06:16:51] *** Joins: StarLight (StarLight@moz-4B46BF19.pppoe.avangarddsl.ru)
[06:17:18] *** Quits: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net) (Ping timeout)
[06:17:21] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[06:17:59] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Ping timeout)
[06:18:22] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[06:18:28] *** Quits: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com) (Ping timeout)
[06:19:03] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:19:55] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:19:59] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[06:20:02] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[06:20:07] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:20:35] *** Joins: skade (skade@3E753816.E7BADBF1.B0C2132F.IP)
[06:22:04] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:23:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[06:25:17] <geomyidae> one more try tonight. Anyone here with an xbox original or xbox 360 and a linux or mac computer that wants to help me test? Thanks, sorry for the noise otherwise.
[06:25:47] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[06:27:08] <mcpherrin> geomyidae: I'm curious what you're doing, but I don't have one anymore
[06:27:51] <geomyidae> mcpherrin: heard of XBConncet, Xlink Kai, Xbox Spy Arcade tunnel, etc? https://github.com/colemickens/rust-xbtunnel I've written it in Java, and Go, and now Rust.
[06:27:52] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[06:28:04] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[06:28:16] <mcpherrin> geomyidae: I see
[06:29:27] <geomyidae> The logic in this one is much more simplistic though, and I'm doing some weird stuff to avoid the lack of select()
[06:29:50] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[06:30:10] *** Quits: skade (skade@3E753816.E7BADBF1.B0C2132F.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:30:49] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[06:32:13] *** Joins: vertexcl_ (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[06:32:13] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Connection reset by peer)
[06:33:23] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[06:34:25] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[06:34:29] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[06:34:35] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[06:35:01] <mcpherrin> geomyidae: what's special about those vs other tunnelling protocols?
[06:35:21] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[06:35:38] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[06:35:43] <geomyidae> mcpherrin: Not sure what happens if you vpn two networks and try this. They use weird ip addresses (0.0.0.1) and broadcast back and forth to find each other
[06:35:52] <geomyidae> That's basically all it does, idk if you peeked at the code
[06:35:58] <mcpherrin> geomyidae: yeah skimmed it
[06:36:07] <geomyidae> It's slightly more efficient because I KNOW that all I need is the payload and the new mac addresses.
[06:36:15] <mcpherrin> geomyidae: you'd want a level-2 tunnel for sure then
[06:36:27] <geomyidae> The other impl I wrote had nat negotiation though.
[06:36:32] <geomyidae> I've thought about trying to port that lib :)
[06:36:49] <mcpherrin> geomyidae: this is the sort of thing I implement professionally ;)
[06:36:58] <mcpherrin> well, tunneling, networking code, etc :P
[06:37:03] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[06:37:17] <mcpherrin> currently finishing up a Vxlan implementation which would probably work just fine for this sort of thing
[06:37:51] <geomyidae> :O
[06:38:01] <geomyidae> neato!
[06:38:24] <mcpherrin> vxlan takes ethernet frames, crams them into a udp packet, and tunnels
[06:38:32] <geomyidae> perfect
[06:38:38] <Heather> mcpherrin: hi
[06:38:47] <mcpherrin> 'cept my implementation does hundreds of gigabits per second :)
[06:38:49] <mcpherrin> Heather: Hi!
[06:39:09] <geomyidae> mcpherrin: rust impl I assume? I tried 'mcpherrin github' but that didn't help...
[06:39:18] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:39:28] <mcpherrin> geomyidae: oh, closed source, sorry :P
[06:40:08] <geomyidae> Can you answer the first one though? And or tell me who it's for. I'm intensely nosy about everything.
[06:40:21] <geomyidae> Actually, I'm even more curious where you are able to work if you get to play in rust :)
[06:40:52] <mcpherrin> oh, no, not in rust either
[06:41:04] <mcpherrin> it's in some combination of c++ and dedicated hardware :P
[06:41:10] *** jorendorff is now known as jorendorff_away
[06:41:21] <geomyidae> Yeah, as I thought about it a bit more I realized that was probably a silly question given the latter bit of your answer
[06:41:49] <geomyidae> I guess I have no choice but admit D-K effect. I didn't know that was a named protocol.
[06:42:29] <mcpherrin> it's only really useful if you care about interop
[06:42:32] <mcpherrin> and lots of vlans
[06:43:02] <cmr> "ONLY 50 bytes of overhead!"
[06:43:20] <Yurume> for boolean!
[06:43:43] <cmr> mcpherrin: is vxlan as good as their marketing?
[06:44:38] <strcat> cmr: what are you reading? (50 bytes of overhead?)
[06:44:47] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[06:44:48] <cmr> strcat: was some stupid video
[06:44:53] <cmr> http://www.yellow-bricks.com/2012/07/23/understanding-vxlan-and-the-value-prop-in-just-4-minutes/
[06:45:38] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[06:45:45] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[06:45:56] <mcpherrin> cmr: oh my I haven't seen any marketing
[06:46:02] *** Joins: Ferreus (ferreus@moz-7A7F9983.dip0.t-ipconnect.de)
[06:46:34] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:46:40] <mcpherrin> cmr: the video left Arista off the designers :( 
[06:47:06] <strcat> cmr: I thought you were talking about the embedded js nonsense
[06:47:16] <cmr> strcat: which?
[06:47:32] <strcat> sec let me go through my logs from another channel where I was making fun of it
[06:47:51] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[06:49:03] <TheHydroImpulse> cmr Should I put the volatile module in the unstable module within libstd?
[06:49:23] *** Quits: heftig (heftig@moz-48F85AD2.dip0.t-ipconnect.de) (Quit: Quitting)
[06:49:26] <cmr> TheHydroImpulse: I imagine it could probably go in libsync, though I'm not sure.
[06:49:37] <cmr> TheHydroImpulse: but, if it were to go in libstd, that is where it would go.
[06:49:47] <TheHydroImpulse> cmr kk cool. Thanks
[06:50:01] <strcat> cmr: http://www.espruino.com/About http://www.espruino.com/Performance I know irc.mozilla.net is a bad choice of venue to poke fun at js hype, but please read that nonsense and laugh :P
[06:50:20] <strcat>  Espruino is event based, like node.js. This means that you are encouraged to write code that is executed only when something happens (eg. after a period of time, or when a digital input changes state). Not only does this make doing multiple tasks at once very easy, it allows the Espruino interpreter to put the Microcontroller into low power modes automatically - so simple code written in Espruino
[06:50:21] <strcat> can actually be more power efficient than that written in C!
[06:50:23] <mcpherrin> cmr: that video is amusing, thanks for linking it :)
[06:50:29] * strcat thought that's what you were talking about
[06:50:45] <cmr> heh
[06:50:58] <mcpherrin> strcat: oh yeah I definitely want to use up 7 of my 8k of sram with a JS interpreter
[06:51:09] <Heather> why enthusiasm level of rustlang grows so slow compared to what it was on other languages... or it's not...
[06:51:12] <strcat> mcpherrin: it also uses linked lists to represent objects and arrays
[06:51:21] <diverse> strcat: I got a 'wtf' reaction from that.
[06:51:33] <strcat>  Every datatype in Espruino is based on a single 20 byte storage unit
[06:51:35] <strcat> This makes allocation and deallocation very fast for Espruino and avoids memory fragmentation. However, if you allocate a single boolean it will still take up 20 bytes of memory. 
[06:51:37] <strcat> This may seem inefficient, but if you compare this with a naive malloc/free implementation you'll realise that it saves a significant amount of RAM.
[06:51:39] <strcat> yes
[06:51:47] <strcat> representing booleans as 20 byte heap allocations *saves* memory
[06:51:50] <cmr> uh
[06:52:03] <strcat> [true, false, true] is a linked list storing pointers to 20 byte booleans
[06:52:06] <strcat> embedded yo
[06:52:15] * diverse 's mind explodes with wtf'ness
[06:52:34] <cmr> "embedded yo" about sums it up, yeah
[06:52:37] * strcat shrugs
[06:52:42] <cmr> strcat: is this a shipping product?
[06:52:51] <strcat> cmr: dunno, it has examples and everything
[06:52:52] *** Quits: vertexcl_ (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Connection reset by peer)
[06:53:10] <strcat> cmr: https://www.kickstarter.com/projects/gfw/espruino-javascript-for-things
[06:53:10] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[06:53:11] <cmr> it was legitimately kickstarted...
[06:53:16] <strcat> they raised 100k
[06:53:24] <strcat> for linked lists of heap allocated booleans
[06:54:05] <cmr> Their example in " Espruino executes code directly from source" is mindboggling
[06:54:18] <strcat> error: internal compiler error: duplicate LLVM symbol: _ZN27trie..Child$LT$$LP$$RP$$GT$9glue_drop19h74cb9e6c867384d4aBE
[06:54:20] <strcat> ;[
[06:54:22] <strcat> I did something wrong
[06:54:24] <strcat> hm
[06:54:24] <cmr> do they literally execute source, not a bytecode?
[06:54:31] <strcat> cmr: yes
[06:54:38] <strcat> cmr: it's a really slow js interpreter
[06:54:42] <cmr> oh that's the next question
[06:54:54] <mcpherrin> strcat: You know the pebble watch?
[06:54:58] <strcat> I don't know why they aren't just using v8/spidermonkey with the baseline interpreter.... I am sure you don't need the JIT
[06:55:01] <strcat> or hey... lua
[06:55:05] <strcat> or... a compiled language
[06:55:08] * strcat shrugs
[06:55:19] <mcpherrin> pebble wanted to try and run Ruby on the watch
[06:55:28] <mcpherrin> they gave up on that :P
[06:55:33] <cmr> strcat: or, you know, elua, which is actually designed for it
[06:55:38] *** Quits: Bewilderforce (Bewilderfo@moz-FD312B3F.ed.shawcable.net) (Client exited)
[06:56:00] * strcat wonders how he's outputting duplicate symbols...
[06:56:01] * ChrisMorgan wonders what sort of person can state with pride that "x;" executes faster than "                 x;"
[06:56:08] <Eridius> ChrisMorgan: o_O
[06:56:35] * ChrisMorgan wrote code for his calculator where that sort of thing was true, and became quite expert at micro-optimisation
[06:56:47] *** Joins: jsonnull (Thunderbir@26F61E6.CFD9471D.494A0F8B.IP)
[06:57:00] <strcat> cmr:  As Espruino becomes more mature the Linked Lists may be replaced with a Tree structure, but for now it is very useful to be aware of this limitation.
[06:57:05] <strcat> they have a lot to look forward to
[06:57:06] <ChrisMorgan> Eridius: just to be clear, it's the *pride* aspect that I marvel at, because they do seem to be proud of it.
[06:57:10] <strcat> one day, arrays may be represented as trees ;p
[06:57:29] * strcat likes to think of linked data structures everywhere as C disease, but apparently it isn't
[06:57:58] <Eridius> ChrisMorgan: how strange
[06:58:04] <strcat> I guess that's because they haven't implemented typed arrays and it's definitely not clever enough to specialize arrays not used as objects
[06:58:30] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Ping timeout)
[06:58:37] * ChrisMorgan wonders why they don't just go for BASIC and be done with it
[06:58:37] *** Quits: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net) (Ping timeout)
[06:58:50] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:58:59] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[06:59:17] *** Quits: doomlord_ (servitor@moz-858B6E73.range86-148.btcentralplus.com) (Ping timeout)
[06:59:17] <cmr> I don't mind using JS, but that is seriously just the wrong place for it.
[06:59:25] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[06:59:37] *** Joins: doomlord_ (servitor@moz-858B6E73.range86-148.btcentralplus.com)
[06:59:58] <diverse> 20 bytes for a boolean, no, just no.
[07:00:12] <strcat> well, 24/28 bytes
[07:00:15] <strcat> it's a ptr to it
[07:00:18] <strcat> + allocator overhead
[07:00:25] <strcat> I'd say probably 64 bytes
[07:00:47] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[07:01:02] * diverse winces
[07:01:10] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: Leaving.)
[07:01:16] <Eridius> why the hell are they executing JS from source anyway? At the least they should compile it to some form of bytecode and execute that
[07:01:27] <cmr> they should just shell out a few dollars extra for a few hundred megs of ram
[07:01:30] <Eridius> I mean, nobody's going to be typing JS source into one of these things
[07:01:43] <cmr> Eridius: actually being able to type js source into it seems to be a primary goal..
[07:01:47] <mcpherrin> just buy a $120 ARM9 system with a gig of ram
[07:01:48] <Eridius> :/
[07:01:49] <strcat> this gives me hope that I could make a kickstarter for something
[07:01:53] <cmr> seriously 256M of ram is $4
[07:02:09] <mcpherrin> strcat: let's do a kickstarter for a microcontroller powered by rust
[07:02:20] <mcpherrin> with an MIT scratch style programming interface
[07:02:24] <mcpherrin> bam zillions of dollars
[07:02:30] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[07:04:03] <yuriks> why do test seem to randomly fail sometimes, with just a retry needed?
[07:04:07] <yuriks> (on bors)
[07:04:19] <cmr> yuriks: shenanigans
[07:04:31] <yuriks> ah, of course, shenanigans
[07:04:33] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[07:04:49] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[07:05:01] <strcat> hm
[07:05:06] <strcat> why isn't my drop_glues table working
[07:05:08] <strcat> ;\
[07:05:22] *** kimundi is now known as zz_kimundi
[07:07:31] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:07:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:08:35] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[07:09:07] <strcat> heh it recurses
[07:09:08] <strcat> weird
[07:11:06] * strcat sees the problem
[07:11:08] <strcat> ;)
[07:13:18] *** Joins: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[07:13:21] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[07:13:21] *** ChanServ sets mode: +ao dherman dherman
[07:13:35] <diverse> strcat: o/
[07:14:08] <strcat> \o
[07:16:58] *** Quits: jga (asdf@A2FD2A4E.7179CBA0.B5524284.IP) (Connection reset by peer)
[07:18:07] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[07:18:28] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[07:19:36] *** Joins: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr)
[07:19:48] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[07:20:14] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[07:21:49] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:22:54] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[07:23:14] *** Quits: StarLight (StarLight@moz-4B46BF19.pppoe.avangarddsl.ru) (Ping timeout)
[07:24:25] *** Quits: FreeFull (freefull@moz-1883929A.as13285.net) (Quit: )
[07:25:28] *** Quits: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[07:25:51] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[07:26:34] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[07:27:11] *** Joins: StarLight (StarLight@moz-1B7C348A.dynamic.avangarddsl.ru)
[07:28:02] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[07:30:09] *** Joins: vertexcl_ (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[07:30:09] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Connection reset by peer)
[07:30:14] *** Joins: skade (skade@moz-1BD856AA.web.vodafone.de)
[07:31:15] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:31:58] *** Quits: skade (skade@moz-1BD856AA.web.vodafone.de) (Ping timeout)
[07:32:19] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[07:32:19] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[07:32:32] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[07:32:32] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[07:32:40] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:32:41] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:33:06] *** Quits: StarLight (StarLight@moz-1B7C348A.dynamic.avangarddsl.ru) (Ping timeout)
[07:34:17] *** Joins: jga (asdf@92102BBD.141631A6.B5524284.IP)
[07:34:24] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[07:34:27] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[07:34:35] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Client exited)
[07:34:59] *** Joins: StarLight (StarLight@moz-FB3D5B9B.dynamic.avangarddsl.ru)
[07:37:05] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:37:14] *** Quits: vertexcl_ (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Connection reset by peer)
[07:37:35] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[07:37:52] *** Quits: skrylar (skrylar@moz-F692F728.austin.res.rr.com) (Quit: leaving)
[07:38:11] *** Joins: skade (skade@moz-D29DF03A.web.vodafone.de)
[07:38:18] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Client exited)
[07:38:20] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:39:19] *** flaper87|afk is now known as flaper87
[07:39:23] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[07:39:27] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[07:39:36] *** Joins: Rui (rui@A1A18738.6ABE6CAA.4F142960.IP)
[07:40:09] *** Quits: skade (skade@moz-D29DF03A.web.vodafone.de) (Ping timeout)
[07:40:58] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[07:41:24] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[07:43:13] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[07:44:23] *** Joins: jamil_1 (kvirc@A0F2CA99.9C6648A9.3D6CCABD.IP)
[07:45:04] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:46:07] <diverse> Are the macros in Rust hygienic?
[07:46:26] <cmr> diverse: yes, except for bugs.
[07:46:45] <cmr> (of which there are many; I think only `let` is actually hygenic right now)
[07:47:57] <diverse> cmr: gotcha, thanks
[07:49:17] *** Joins: eddyb (eddy@moz-92B95652.residential.rdsnet.ro)
[07:50:22] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:50:27] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:51:25] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[07:51:50] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Client exited)
[07:52:17] *** Joins: skade (skade@moz-B0181848.web.vodafone.de)
[07:53:04] *** Quits: derek_c (derek@moz-96756762.cit.cornell.edu) (Quit: Leaving)
[07:53:05] *** Quits: skade (skade@moz-B0181848.web.vodafone.de) (Connection reset by peer)
[07:53:25] *** Quits: wilson (wilson@moz-5531C57F.wb78.net) (Ping timeout)
[07:53:27] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[07:53:39] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[07:53:40] *** Joins: skade (skade@moz-B0181848.web.vodafone.de)
[07:53:55] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:54:17] *** Quits: skade (skade@moz-B0181848.web.vodafone.de) (Connection reset by peer)
[07:54:50] *** Joins: skade (skade@moz-B0181848.web.vodafone.de)
[07:54:54] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[07:58:29] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[07:58:52] *** pmoore|away is now known as pmoore
[07:59:34] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[08:02:05] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[08:02:20] *** Joins: wilson (wilson@moz-5531C57F.wb78.net)
[08:02:52] *** Quits: skade (skade@moz-B0181848.web.vodafone.de) (Ping timeout)
[08:04:56] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[08:05:23] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[08:05:26] *** Joins: marianoguerra (marianogue@moz-82BB9217.dip0.t-ipconnect.de)
[08:06:11] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:06:33] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[08:06:43] <sammykim> How can I set lifetime in Option?
[08:06:57] <sammykim> e.g ) like  pub fn get_pseudo_element<'a>(&'a self, pseudo_element: PseudoElement) -> Option<<'a> PseudoNode>
[08:07:19] <sammykim> I want to return self.field :-)
[08:07:48] *** Joins: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net)
[08:08:12] <cmr> sammykim: Option<&'a PseudoNode> ?
[08:08:14] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[08:09:16] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[08:09:48] *** Joins: skade (skade@moz-B0181848.web.vodafone.de)
[08:10:45] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[08:10:55] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[08:11:20] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:11:46] *** Quits: skade (skade@moz-B0181848.web.vodafone.de) (Ping timeout)
[08:15:00] *** Joins: skade (skade@moz-9F58E678.web.vodafone.de)
[08:15:51] *** Quits: skade (skade@moz-9F58E678.web.vodafone.de) (Quit: Textual IRC Client: www.textualapp.com)
[08:16:53] *** Quits: dmac (dmac@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[08:18:13] *** Joins: alonlevy (alon@moz-AEE80F52.red.bezeqint.net)
[08:18:40] *** Joins: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com)
[08:19:14] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[08:19:25] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[08:20:24] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[08:21:51] <patpat> hi! what's Rust's stance on function overloading? 
[08:22:09] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[08:22:19] <cmr> patpat: Rust has no function overloading.
[08:22:35] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[08:22:47] <cmr> It is considered a complex cost and understanding burden that will be avoided until it's proven necessary.
[08:22:52] <cmr> *complexity cost
[08:23:26] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[08:23:48] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[08:23:54] <strcat> cmr: it's not going to get function overloading
[08:23:54] <patpat> ah, so there could be a chance that it may be introduced in the future?
[08:24:01] <patpat> oh
[08:24:21] <strcat> cmr: it's against the whole approach to generics and error messages
[08:24:51] <strcat> can't add function overloading without lookups of the method/function depending on the parameter types
[08:24:52] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[08:25:22] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[08:25:25] <cmr> strcat: I agree with the premise, but not the conclusion... I haven't seen any of the core team explicitly state that it will never happen.
[08:25:34] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[08:25:55] <strcat> cmr: pcwalton said there won't be argument dependent lookup
[08:26:06] <cmr> Oh good
[08:26:07] <strcat> function overloading is ADL
[08:26:10] <cmr> yes it is
[08:26:21] <cmr> I don't remember seing him say that.
[08:26:23] * cmr is pleased
[08:26:57] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[08:26:59] *** Joins: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP)
[08:27:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:27:05] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[08:27:33] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:33] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:27:49] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:51] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:27:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Connection reset by peer)
[08:28:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:28:42] *** strcat1 is now known as strcat
[08:28:53] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[08:29:00] <strcat> ugh, this server really needs sasl or client certs
[08:29:17] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[08:29:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:29:52] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:30:08] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[08:30:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:30:39] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[08:31:03] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[08:31:22] <pzol> strcat cmr multi-dispatch instead of overloading?
[08:31:52] <strcat> rust has type classes
[08:31:52] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Client exited)
[08:31:53] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[08:32:11] <strcat> they are generally used for entirely static dispatch via generics
[08:32:11] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[08:32:32] <strcat> or they can be used as interfaces
[08:32:37] <strcat> I don't think there's multiple-dispatch
[08:32:55] <pzol> strcat but I can't do fn foo(x: uint) and a second and fn foo(s: ~str)
[08:32:57] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[08:33:10] <strcat> right, rust doesn't allow that
[08:33:52] <cmr> pzol: instead you'd say fn foo<T>(x: T), or, fn foo<T: SomethingTheTypeMustSatisfyThatYouCareAbout>(x: T)
[08:34:12] <strcat> pzol: if you can't write a generic function for it, then it's not really doing the same thing for both types anyway
[08:34:17] <diverse> generics is your friend
[08:35:01] <pzol> true, but with multi dispatch you could also do variadic args  regardless of generics... 
[08:35:33] <strcat> rust's generics don't have runtime overhead
[08:37:11] <pzol> https://gist.github.com/8840404
[08:37:44] <pzol> you can't doo foo<T: A> and foo<T:B> at the same time
[08:38:07] <cmr> You can't, I didn't claim you could.
[08:38:26] <strcat> pzol: that would require ADL, which rust is not getting
[08:38:32] <strcat> it's function overloading
[08:38:38] <pzol> I know you didn't, just saying, that would be an example of multi-dispatch
[08:38:47] <strcat> I don't think it is ;s
[08:38:58] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[08:39:16] <diverse> perhaps function default values could help?
[08:39:25] <strcat> pzol: what if a type implements both?
[08:39:46] <pzol> strcat I don't see the problem?
[08:40:04] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[08:40:10] <strcat> which does it call
[08:40:57] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[08:41:11] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[08:41:11] <pzol> strcat the fn signatures have to differ let's say foo(s: ~str) and foo(i: uint)
[08:41:33] <strcat> your example has two generic functions
[08:41:39] <strcat> a type can implement both traits
[08:42:23] <strcat> anyway it looks like function overloading to me
[08:42:56] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[08:42:58] <strcat> in C++, function overloading lets you define arbitrary functions with the same name (some can be templated, some can be non-templated) and just looks for a matching one - errors out of it's ambiguous
[08:43:09] <strcat> seems like the same idea
[08:43:13] <pzol> http://programmers.stackexchange.com/questions/125084/multiple-dispatch-vs-function-overloading In statically typed languages, including Java, the biggest difference between dispatch and overloading is that overloading is based on the static type of parameters (i.e. the choice of which method is actually called is decided compile-time), while dispatch is based on the dynamic types (i.e. the decision is made runtime). (Such languages usually don't
[08:43:13] <pzol>  support multiple dispatch.)
[08:43:58] <pzol> also http://c2.com/cgi/wiki?MultipleDispatch
[08:44:36] <strcat> pzol: doesn't seem to be what you're proposing above
[08:44:47] <pzol> strcat that's what I meant ;)
[08:47:55] *** Joins: engstad (quassel@moz-CE9D6055.lsanca.fios.verizon.net)
[08:48:13] <engstad> If I have struct Color(int, int, int), I can make a function that say adds the elements, but how can I make it be a method instead?
[08:48:59] <cmr> engstad: impl Color { fn sum(&self) -> int { let Color(a, b, c) = self; a + b + c } }
[08:49:01] <Yurume> engstad: you mean something like Color(128,128,128).add(&Color(0,0,255))?
[08:49:50] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[08:49:50] <dbaupp> cmr: *self
[08:50:47] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[08:51:14] <cmr> dbaupp: indeed.
[08:51:33] * cmr -> sleep
[08:51:34] <engstad> Okay, now say that it is a 12 dimensional value, so I make struct Color([int, ..12]). In let Color(v) = self; I get the error mismatched types: expected '&Mana' but found an enum or structure pattern.
[08:51:53] <cmr> engstad: *self, as dbaupp said.
[08:52:03] <engstad> Ah! Of course.
[08:52:22] <engstad> Thanks. :-)
[08:52:27] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:52:37] <cmr> should also be able to use `let &Color(v) = self;`
[08:52:51] <diverse> pzol: you think Rust could get compile-time function overloading?
[08:53:54] <pzol> diverse I don't think it's a prio... but it comes in handy, more useful would be optional args with default values
[08:54:27] <pzol> or even keyword args
[08:55:07] <engstad> I would love keyword args!
[08:55:33] *** Joins: rca (rcatolino@moz-312D09C6.adsl.proxad.net)
[08:56:37] <pzol> as in foo(i = 0: uint, j = 1: uint) which can be called either foo(1, 2) or foo(i = 1) or something like that... if I remember right there is an open issue on that matter 
[08:56:45] *** Quits: elyzion (elyzion@moz-D4AAE1FD.ap122.ftth.ucom.ne.jp) (Quit: Lost terminal)
[08:57:03] <engstad> I find myself reimplementing true and false just to make sure ppl don't call the wrong method. 
[08:57:33] <pzol> engstad you're talking about C?
[08:57:51] <engstad> Yepp. (C++).
[08:58:04] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[08:58:57] <strcat> rust's type inference and generic integer/float literals are something to keep in mind
[08:59:16] <engstad> enum RenderMethod { kLines = 0, kSolid = 1 }; kind of thing.
[08:59:22] <diverse> pzol: interesting thought, it's like the default values could be static with the type declaration
[08:59:41] <strcat> if it's just position/keyword based I guess it's not an issue
[08:59:57] <strcat> diverse: they'd need to be unrestricted expressions, not statics
[08:59:57] <diverse> \o/
[09:00:00] <pzol> :)
[09:00:17] <engstad> When you see mesh.Render(obj, true, false, false, true, 0.0, false); you know something is wrong.
[09:00:37] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[09:00:38] <strcat> or it will only work for types without private fields
[09:00:51] *** Quits: Ferreus (ferreus@moz-7A7F9983.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.3-dev)
[09:01:05] <strcat> engstad: foo.bar(true).baz(false).run(a, b) does work fine
[09:01:06] <Yurume> engstad: type-based keyword argument emulation is sometimes better than the actual keyword arguments.
[09:01:31] <engstad> Sure, if you want to implement that for *all* of your code-base. Not worth the effort.
[09:01:33] <strcat> not having keyword arguments just means using method chaining
[09:01:39] <strcat> engstad: it's not a large effort
[09:01:43] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:01:50] *** Joins: jackneill (jackneill@moz-CCD35239.pool.digikabel.hu)
[09:01:56] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[09:01:58] <strcat> rust even have record update syntax for this
[09:02:01] <strcat> s/have/has/
[09:02:24] <engstad> strcat: Can you show me an example?
[09:02:33] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[09:02:36] <Yurume> i.e. mesh.render(obj, RenderOptions { foo: true, ..RenderOptions::default() })
[09:02:37] <strcat> foo { x: 2, ..old }
[09:02:49] <strcat> Yurume: I don't mean like that
[09:02:56] <strcat> I mean combined with method chaining
[09:03:08] <Yurume> ah okay
[09:03:13] <strcat> mesh().foo(true).render()
[09:03:20] <strcat> where foo is defined as doing
[09:04:06] <strcat> fn foo(self) -> Bar { Bar { foo: true, ..self } }
[09:04:21] <Rui> Is the build pattern?
[09:04:21] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[09:04:23] *** Joins: Ferreus (ferreus@moz-7A7F9983.dip0.t-ipconnect.de)
[09:04:24] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:04:25] <Yurume> yes
[09:04:27] <Rui> Is it
[09:04:31] <Yurume> builder pattern? I think
[09:04:41] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:04:52] <Yurume> std::task::TaskBuilder is a classic example
[09:05:01] <Yurume> but it... is somehow flawed.
[09:05:12] <engstad> So, now you pollute the (function) namespace just for the argument nicety? I agree it can be done, but it is clumsy at best.
[09:05:33] <strcat> engstad: at least it's better than optional arguments where if you only want to override the last one, you have to specify them all
[09:05:55] <strcat> like C++ has
[09:06:03] <strcat> maybe it's not as easy as keyword arguments
[09:06:06] <strcat> but it shouldn't be common
[09:06:14] <engstad> Sure. C++ is brain-dead. 
[09:06:17] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Input/output error)
[09:06:29] <strcat> to convince people to add a language feature, you first need to demonstrate that it's making a pattern we like to use easier
[09:06:35] <strcat> and we do not use this pattern much
[09:06:47] *** Joins: claudiu (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[09:07:01] <strcat> so if you want keyword arguments, you need to find cases where they can make APIs nicer
[09:07:11] <strcat> not theoretical APIs, but the ones in the stdlib
[09:07:14] *** Quits: liszt (liszt@moz-A0A4C524.reverse.softlayer.com) (Ping timeout)
[09:08:02] <strcat> I doubt rust is going to pick up more features that aren't directly serving the stdlib/servo
[09:08:07] <engstad> Well, that's going to be hard, because standard API's don't do this kind of stuff.
[09:08:19] <strcat> then what kind of API does?
[09:08:22] <pzol> strcat there's two kinds of people coming to Rust, those from C/C++ which are happy with anything that improves there current situation and there are people coming from Ruby/Pyton whatever which are used to those things 
[09:08:29] <strcat> if it doesn't occur in the 250k lines of rust in the codebase, it's not a common pattern
[09:08:31] <pzol> s/there/their/
[09:08:53] <strcat> you're not going to get far with a proposal if you paint C++ as being horrible
[09:09:14] <strcat> certainly can express a lot of stuff you can't easily do in ruby/python
[09:09:42] <Yurume> engstad: I have a personal project with 12K LoCs in Rust, and while I have some function/method with as many as ten arguments, I haven't had a problem with that since I kept every argument to have different types.
[09:10:36] <engstad> Yurume: Yes, that works fine when they are different types. The problem arrives when you have something with many arguments of the same type.
[09:10:52] <Yurume> I think it is a bad patter to have many arguments of the same type.
[09:10:55] <Yurume> pattern*
[09:11:21] <cmr> engstad: is FRU undesirable here?
[09:11:30] <Yurume> newtypes (struct Mark(int); etc.) are not only useful for differentiating arguments but also for other maintenance.
[09:11:33] <engstad> What is FRU?
[09:11:41] <cmr> Functional Record Update
[09:11:53] <cmr> Options { field1: true, ..defaults() }
[09:12:03] <Yurume> cmr: I think I've mentioned that (and strcat pointed out that the builder pattern is more concise)
[09:12:22] <strcat> record update is nice though
[09:12:27] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:12:29] <strcat> can have a few presets
[09:12:43] <strcat> just looks bad when you've got a function call :P
[09:12:44] <engstad> I think in Rust there's definitely some better options than C++, but there will still be some examples where it can get too much.
[09:12:46] <Yurume> the problem is mostly a syntactic burden with ..defaults() :S
[09:13:24] <cmr> engstad: too much compared to what, exactly?
[09:13:25] <pzol> http://www.informit.com/articles/article.aspx?p=1375308
[09:13:29] <strcat> engstad: is there an example API?
[09:13:52] <engstad> Hold on, I'm trying to see if I can find some examples from the C++ world.
[09:14:23] <strcat> C++03 doesn't have by-value self methods
[09:14:30] <cmr> pzol: this is awesome
[09:15:46] *** Rui is now known as xiongmao86
[09:17:04] * cmr actually goes to sleep
[09:17:44] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[09:18:48] <engstad> Okay, this might be something: http://www.ogre3d.org/docs/api/1.9/classOgre_1_1Camera.html
[09:18:52] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Connection reset by peer)
[09:18:53] *** Joins: p1start1 (rewi@moz-A082F561.adsl.xtra.co.nz)
[09:19:29] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[09:19:31] <strcat> engstad: so you want them to have 100 keyword arguments instead of 100 methods?
[09:19:37] <engstad> So, a Camera has tons and tons of members, and the way the Ogre guys does it is by having a bunch of set()/get() methods on it.
[09:20:49] <strcat> the methods have the benefit of being listed on typing 'object.' with their docstrings
[09:21:01] <strcat> and you can make presets
[09:21:11] <engstad> Well, it isn't bad -- but it is certainly tedious.
[09:21:54] <strcat> so what would you change about the API?
[09:22:05] <engstad> In this particular case?
[09:22:31] *** Joins: liszt (liszt@moz-A0A4C524.reverse.softlayer.com)
[09:22:32] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[09:22:35] *** Quits: p1start1 (rewi@moz-A082F561.adsl.xtra.co.nz) (Quit: Leaving.)
[09:22:39] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[09:22:47] <Heather> how to terminate application
[09:22:57] <strcat> yes, there are like 100 getters/setters for different options and the state is preserved between other calls
[09:23:14] <Yurume> engstad: Camera is inherently complex in this case. I seriously doubt what would be possible with keyword arguments?
[09:23:46] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[09:23:48] <strcat> the fact that you have a stateful option object means you can set options and use it for multiple calls
[09:23:49] <strcat> like
[09:24:03] *** Joins: pilf (pilf@44BF5D7D.B6A69891.5411983D.IP)
[09:24:07] <strcat> let flags = FOO | BAR | BAZ;
[09:24:09] <Yurume> if you want to move all the args specified in Camera to Render, the each definition of Render should be aware of Camera interface, which duplicates the interface. is this an "improvement"?
[09:24:12] <strcat> do_work(a, b, flags)
[09:24:18] <strcat> do_work2(c, flags)
[09:24:30] <strcat> do_work3(d, flags | FOOBAR)
[09:24:36] <engstad> No, no, don't relate Render and Camera.
[09:24:45] <strcat> option builders are similar
[09:25:05] <Yurume> then give a working example. I don't see how your example relates to keyword arguments.
[09:25:05] <engstad> Ask yourself, how much code would you have to write on the caller side, if you wanted to set up a specific camera?
[09:25:09] <Heather> ... is there way to exit from main program thread being in another fn?
[09:25:33] <strcat> let flags = options().foo(5).bar(true).baz(2.5);
[09:25:36] *** Joins: zelda (Mibbit@14664284.4DD0CF6B.2F9DE622.IP)
[09:25:39] <strcat> do_work(a, b, flags)
[09:25:41] <engstad> You create it, and then you have to setXxxx() things over and over again.
[09:25:43] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[09:25:47] <strcat> do_work2(a, flags.foobar(10))
[09:25:50] <Yurume> engstad: a temporary Camera with commonly used arguments suffices.
[09:26:22] <engstad> But do you see an easy way of creating that temporary Camera?
[09:26:29] <strcat> engstad: those two flag examples are why option objects are useful
[09:26:31] <Yurume> if there are many possible combinations of commonly used arguments, use a builder pattern.
[09:27:13] <Yurume> engstad: Camera().with_direction(...).with_fovy(...).
[09:27:28] <strcat> and then you can save it and reuse it for many calls
[09:27:31] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[09:27:38] <strcat> requiring the same set of options, or possibly a base set with one or two added
[09:27:42] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:28:03] <strcat> it's composable that way
[09:28:24] <engstad> Here's the thing. If C++ had keyword arguments, then you'd write: new Camera(dir: myDir, pos: myPos, ...), and if you left out some *important* parameters it would error out, and for those *not* important, it would default it to sane values.
[09:28:32] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[09:28:37] *** Quits: joone (joone@moz-8E88FB0F.jf.intel.com) (Ping timeout)
[09:28:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:28:53] *** Joins: joone (joone@moz-8E88FB0F.jf.intel.com)
[09:28:54] <Yurume> I do think that keyword arguments make sense in the dynamically typed languages, since it is an easy way to get a self-documenting method. for the statically typed language, there are lots of better alternative.
[09:28:58] <Yurume> alternatives.*
[09:29:11] <strcat> Camera(pos: mydir, dir: mypos) vs. Camera().pos(mydir).dir(mypos) is not a huge difference to me
[09:29:24] <strcat> except the former requires a language features
[09:29:29] <strcat> and the latter does not
[09:29:31] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Quit: Bye)
[09:29:44] <engstad> The former also doesn't enforce that you have to set pos and dir (if this is important).
[09:30:02] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[09:30:08] <strcat> engstad: if you *have* to set them, then they're required arguments
[09:30:22] <Yurume> engstad: then it should be the mandatory arguments and they should be typed as much as possible.
[09:30:27] <Yurume> it should have*
[09:30:30] <strcat> rust also has the ability to represent state via linear types
[09:30:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:30:32] <strcat> state transitions
[09:30:44] <strcat> although I think it's wasteful here
[09:30:56] <Yurume> strcat: for the temporary builder object, it might not be that wasteful.
[09:31:11] <strcat> well you could just pass them as non-keyword arguments if there is no default
[09:31:16] *** zz_kimundi is now known as kimundi
[09:31:31] <strcat> encoding them into the type system as required via a NoPod private field just seems a bit excessive
[09:32:02] <arturo> is there a way of doing:   fn some_function<T: Real>(){ T::two_pi(); }
[09:32:04] <Heather> Seldaek: ping
[09:32:11] <Yurume> so we have: impl<P> CameraBuilder<P,HasDir> { ... } impl<D> CameraBuilder<HasPos,D> { ... } impl CameraBuilder<HasPos,HasDir> { ... }
[09:32:50] <strcat> well... if you actually have methods only available when those are set
[09:32:56] <strcat> but other methods still available when they are not
[09:33:02] <strcat> then I could see why you would want it
[09:33:57] <Yurume> I actually have seen various counterexamples that keyword arguments wouldn't work
[09:34:18] <engstad> Interesting. Why wouldn't it?
[09:34:26] <Yurume> the common example is to encode a tri-state enum into two bool arguments. :(
[09:34:31] <strcat> Yurume: anyway it gave me something to think about
[09:35:13] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[09:35:18] <engstad> I'm not sure I follow...
[09:36:46] <Yurume> engstad: for example, think a function f(foo:bool=true, bar:bool=false) where `bar` is only applicable when `foo` is true. this is much worse than f(foo_and_bar:FooAndBar) with enum FooAndBar { FooSetBarSet, FooSetBarUnset, FooUnset }.
[09:37:11] <Seldaek> Heather: ?
[09:37:25] <engstad> Sure, I get that -- but what does that have to do with keyword arguments?
[09:37:38] <Heather> Seldaek: hi, I still don't like global try way )
[09:38:03] <Heather> Seldaek: even if rust runtime runs in global try block.... we will add try block inside try block
[09:38:27] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[09:38:50] <Seldaek> Heather: yes but I don't see another way.. it's not very pretty but it's a common pattern to catch all app errors I think
[09:39:05] <Yurume> engstad: it is a general problem with the large number of arguments, not limited to keyword arguments, but the presence of keyword arguments makes the user easier to write such interface.
[09:39:14] <Heather> Seldaek: another way should be some function that will terminate application
[09:39:20] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[09:40:21] *** Quits: rca (rcatolino@moz-312D09C6.adsl.proxad.net) (Ping timeout)
[09:40:52] <engstad> I don't buy it. If you make a function foo(a : bool, b : bool, ...) and you don't allow a == true and b == true, you have the same exact problem.
[09:40:52] <Heather> Seldaek: How fail! does it?
[09:41:47] <Yurume> engstad: then the interface is bad and should be refactored into an enum.
[09:41:50] <Heather> what ::std::rt::begin_unwind makes?
[09:42:38] <Heather> Seldaek: rtabort ?
[09:42:47] <Heather> Seldaek: there is rtabort!
[09:42:53] <Yurume> engstad: actually, I really hate the OpenGL interface for that reason. :(
[09:43:19] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[09:43:34] <Yurume> C (and surprisingly, C++!) does not have a machinary to avoid accidentally plugging wrong GLenums into params
[09:43:53] <engstad> Yurume: Yes, it should. A tri-state variable shouldn't be represented as bool*bool, in the same way that a 3d vector shouldn't be represented as 2 sets of 2d vectors..
[09:44:29] <pzol> Yurume regarding that builder https://gist.github.com/8841217
[09:44:55] <Yurume> pzol: yes, TaskBuilder should at least look like that...
[09:45:07] <Heather> rusti: rtabort!("Could not unwind stack, error = {}", 1);
[09:45:09] -rusti- <anon>:10:9: 10:16 error: macro undefined: 'rtabort'
[09:45:10] -rusti- <anon>:10         rtabort!("Could not unwind stack, error = {}", 1);
[09:45:10] -rusti-                   ^~~~~~~
[09:45:10] -rusti- error: aborting due to previous error
[09:45:10] -rusti- application terminated with error code 101
[09:45:12] <pzol> only trouble is can I make let mut mp = MyParams::default().foo(1).bar(~"bar"); says that it doens't live long enough
[09:45:46] <pzol> Yurume of course putting MyParams::default() on a separate let solves the issue, but I find it a little less elegant
[09:46:03] <Heather> rusti: rt::rtabort!("Could not unwind stack, error = {}", 1);
[09:46:03] -rusti- <anon>:10:9: 10:20 error: expected macro name without module separators
[09:46:03] -rusti- <anon>:10         rt::rtabort!("Could not unwind stack, error = {}", 1);
[09:46:04] -rusti-                   ^~~~~~~~~~~
[09:46:04] -rusti- error: aborting due to previous error
[09:46:04] <engstad> How good is rustc inlining stuff? E.g., my [int, ..16] array, if I run it through fold, will it expand everything?
[09:46:04] -rusti- application terminated with error code 101
[09:46:54] <Yurume> pzol: ah, that might be a problem (I thought the temporary rvalue resolution have fixed that?), it seems fn foo(mut self, ...) -> MyParams { ... } flawlessly works.
[09:47:02] *** Joins: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP)
[09:47:27] <Yurume> engstad: I'm not sure, but at least it will unroll at --opt-level=3.
[09:47:30] <pzol> Yurume this works: let mut mp = MyParams::default(); mp.foo(1).bar(~"bar"); THIS DOESNT let mut mp = MyParams::default().foo(1).bar(~"bar");
[09:47:56] <Yurume> pzol: personally I don't see the benefit of &mut self in the builder pattern.
[09:48:04] <kimundi> engstad: In general it will happily inline it to the point of being able to constant fold it, as long as nothing funky is going on like dynamic dispatch or so. Of course, you need to compile it with the optimized option
[09:48:15] <Heather> rusti: rt::util::abort("zz", 1);
[09:48:21] -rusti- pastebinned 11 lines of output: http://ix.io/alX
[09:48:30] <pzol> Yurume what do you suggest?
[09:49:05] <Yurume> pzol: see the comments.
[09:49:35] <Yurume> (I've put a comment on that gist)
[09:50:04] <Heather> rusti: unsafe { use intrinsics; intrinsics::abort(); }
[09:50:07] -rusti- pastebinned 8 lines of output: http://ix.io/alY
[09:50:11] *** Quits: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP) (Ping timeout)
[09:50:15] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[09:50:21] <Yurume> std::unstable::intrinsics?
[09:50:30] *** Joins: rca (rcatolino@moz-312D09C6.adsl.proxad.net)
[09:50:56] *** Joins: gimpf (gimpf@moz-104459D9.adsl.highway.telekom.at)
[09:50:57] <Heather> rusti: unsafe { use  std::unstable::intrinsics; intrinsics::abort(); }
[09:51:00] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[09:51:34] <Heather> ...
[09:52:09] <pzol> Yurume Thanks! Awesome!
[09:52:19] <Yurume> rusti: unsafe { use  std::unstable::intrinsics; intrinsics::abort(); } unreachable!();
[09:52:22] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[09:52:25] <Yurume> ah irght
[09:52:26] <Yurume> right
[09:52:33] <Yurume> rusti: unsafe { use  std::unstable::intrinsics; intrinsics::abort(); } 42
[09:52:37] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[09:52:43] *** Quits: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[09:52:46] <Yurume> rusti: unsafe { use  std::unstable::intrinsics; intrinsics::abort(); }; 42u
[09:52:49] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[09:52:50] <Yurume> :(
[09:53:10] <Yurume> I understand why that does not work... but it is a bit annoying.
[09:53:10] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[09:53:37] <Yurume> rusti: unsafe { use  std::unstable::intrinsics; intrinsics::abort() } as uint
[09:53:40] -rusti- pastebinned 7 lines of output: http://ix.io/alZ
[09:53:57] <Yurume> rusti: (unsafe { use  std::unstable::intrinsics; intrinsics::abort() }) as uint
[09:53:59] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[09:54:03] <Yurume> I give up.
[09:54:24] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[09:54:26] <Zr40> rusti: fn x -> () { use std::unstable::intrinsics; intrincics::abort(); } x()
[09:54:26] -rusti- <anon>:10:14: 10:16 error: expected `(` but found `->`
[09:54:26] -rusti- <anon>:10         fn x -> () { use std::unstable::intrinsics; intrincics::abort(); } x()
[09:54:26] -rusti-                        ^~
[09:54:26] -rusti- application terminated with error code 101
[09:54:30] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[09:54:36] <Zr40> rusti: fn x() -> () { use std::unstable::intrinsics; intrincics::abort(); } x()
[09:54:39] -rusti- pastebinned 11 lines of output: http://ix.io/am0
[09:54:57] <Zr40> rusti: fn x() -> () { use std::unstable::intrinsics; intrinsics::abort(); } x()
[09:54:58] -rusti- <anon>:10:55: 10:74 error: call to unsafe function requires unsafe function or block
[09:54:58] -rusti- <anon>:10         fn x() -> () { use std::unstable::intrinsics; intrinsics::abort(); } x()
[09:54:58] -rusti-                                                                 ^~~~~~~~~~~~~~~~~~~
[09:54:59] -rusti- error: aborting due to previous error
[09:55:00] -rusti- application terminated with error code 101
[09:55:15] <Zr40> rusti: fn x() -> () { use std::unstable::intrinsics; unsafe{ intrinsics::abort(); } } x()
[09:55:17] -rusti- application terminated abnormally with signal 4 (Illegal instruction)
[09:55:42] <Heather> 4 ?
[09:55:56] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[09:56:13] <Yurume> wait, is it not a SIGABRT?
[09:56:19] <Yurume> (equals to 6)
[09:56:20] *** Joins: Ms2ger (Ms2ger@moz-884DE569.adsl-dyn.isp.belgacom.be)
[09:56:27] *** Joins: eibwen (kvirc@moz-12E62A8C.dip0.t-ipconnect.de)
[09:56:34] *** Quits: jamil_1 (kvirc@A0F2CA99.9C6648A9.3D6CCABD.IP) (Ping timeout)
[09:57:23] <Heather> rusti: fn x() -> () { use std::unstable::intrinsics; ::std::os::set_exit_status(33); unsafe{ intrinsics::abort(); } } x()
[09:57:25] -rusti- application terminated abnormally with signal 4 (Illegal instruction)
[09:57:39] <Zr40> exit status != signal
[09:57:53] <Heather> Zr40: ...?
[09:58:16] <Yurume> Zr40: but it clearly states the deadly signal.
[09:58:27] <Zr40> Heather: if abort() sends a signal, exit statuses don't matter
[09:58:45] <Yurume> ah, right. it would say something like 132.
[09:59:55] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[10:00:12] <Heather> hm...
[10:00:16] <Yurume> Heather: if you need an exact exit status, I've simply used std::libc::exit() for that purpose. it is not very unsafe if you know what you are doing, but destructors won't be called obviously.
[10:00:38] <Heather> rusti: std::libc::exit()
[10:00:41] -rusti- pastebinned 11 lines of output: http://ix.io/am1
[10:00:45] <Zr40> rusti:: ::std::os::set_exit_status(33);
[10:00:54] <Zr40> rusti: ::std::os::set_exit_status(33);
[10:00:57] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[10:01:14] <Heather> xd
[10:01:17] <Zr40> rusti: ::std::os::set_exit_status(33)
[10:01:18] -rusti- ()
[10:01:18] -rusti- application terminated with error code 33
[10:01:40] <Heather> rusti: ::std::os::set_exit_status(33); ::std::libc::exit(); 45
[10:01:42] -rusti- pastebinned 11 lines of output: http://ix.io/am2
[10:02:03] <Zr40> rusti: ::std::libc::exit(33)
[10:02:08] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[10:02:26] <Zr40> rusti: fn x() -> () { ::std::libc::exit(33) }; x()
[10:02:27] -rusti- <anon>:10:24: 10:45 error: call to unsafe function requires unsafe function or block
[10:02:27] -rusti- <anon>:10         fn x() -> () { ::std::libc::exit(33) }; x()
[10:02:27] -rusti-                                  ^~~~~~~~~~~~~~~~~~~~~
[10:02:27] -rusti- error: aborting due to previous error
[10:02:27] -rusti- application terminated with error code 101
[10:02:35] <Zr40> rusti: fn x() -> () { unsafe { ::std::libc::exit(33) } }; x()
[10:02:36] -rusti- application terminated with error code 33
[10:02:44] <Heather> that!
[10:02:50] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:02:51] <Heather> thanks
[10:03:15] *** Quits: nrc|waitangiday (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:04:28] *** Joins: pepper_chico (pepper_chi@2E27DB8.A156809A.4D7FED01.IP)
[10:05:46] <Seldaek> Heather: sorry quite busy but yes that's a better solution I suppose
[10:11:17] <engstad> Fastest way to replicate a character (or string), a-la Scalas   "R" * 4?
[10:12:01] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[10:12:28] <engstad> ~"R".repeat(4) ?
[10:13:06] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[10:13:13] <dbaupp> engstad: yes, but without the ~
[10:13:21] <dbaupp> rusti: "R".repeat(4)
[10:13:23] -rusti- ~"RRRR"
[10:15:25] <engstad> ;-)
[10:15:33] *** Joins: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP)
[10:20:20] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[10:20:37] <Heather> Seldaek: much better I think :)
[10:24:43] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[10:24:44] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[10:25:52] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:25:58] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[10:26:19] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[10:26:54] <Heather> rusti: ["R", ~"R"]
[10:26:55] -rusti- <anon>:10:15: 10:19 error: mismatched types: expected `&'static str` but found `~str` (str storage differs: expected `&'static ` but found `~`)
[10:26:55] -rusti- <anon>:10         ["R", ~"R"]
[10:26:55] -rusti-                         ^~~~
[10:26:55] -rusti- error: aborting due to previous error
[10:26:55] -rusti- application terminated with error code 101
[10:27:22] <Heather> rusti: ["R", &"R"]
[10:27:23] -rusti- ["R", "R"]
[10:27:23] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[10:27:43] <dbaupp> &"" is exactly the same as ""
[10:27:44] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[10:27:55] <Heather> dbaupp: no, "" is static
[10:28:11] <dbaupp> and &"" isn't?
[10:28:22] <dbaupp> rusti: let x = ""; x
[10:28:23] -rusti- ""
[10:28:26] <dbaupp> rusti: let x = &""; x
[10:28:28] -rusti- ""
[10:28:38] <dbaupp> looks static to me
[10:29:05] <Heather> rusti: let r = "R"; ["R", r]
[10:29:06] -rusti- ["R", "R"]
[10:29:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:29:53] <Heather> how....
[10:29:57] <Heather> it wasn't working
[10:30:36] <dbaupp> rusti: let r = "R"; let s = &"R"; ([&"R", r], [&"R", s], ["R", r], ["R", s], [r, s])
[10:30:38] -rusti- (["R", "R"], ["R", "R"], ["R", "R"], ["R", "R"], ["R", "R"])
[10:30:44] <dbaupp> no difference
[10:30:52] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[10:31:01] <Heather> There is difference!
[10:31:03] <Heather> rusti: version
[10:31:05] -rusti- "rustc 0.10-pre (4cd555d 2014-01-24 03:28:15 -0500)"
[10:31:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:31:26] <dbaupp> Heather: example code?
[10:31:41] *** Quits: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za) (Ping timeout)
[10:31:41] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[10:31:42] <eddyb> dbaupp: try ~"R" instead of "R"
[10:31:48] <Heather> rusti: let me time to try
[10:31:49] -rusti- <anon>:10:16: 10:20 error: expected `;` but found `time`
[10:31:49] -rusti- <anon>:10         let me time to try
[10:31:49] -rusti-                          ^~~~
[10:31:49] -rusti- application terminated with error code 101
[10:31:54] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[10:32:20] <eddyb> dbaupp: &'static str vs &'a str where 'a is the lifetime of a ~str on the stack
[10:32:21] *** Joins: halleck (a@moz-99121734.dynamic.mnet-online.de)
[10:32:23] <dbaupp> eddyb: yeah... that's kinda exactly *not* what we're talking about
[10:32:31] <dbaupp> "" vs. &""
[10:32:47] <dbaupp> of course ~"" will be different
[10:33:05] *** Joins: nkoep (nik@moz-6E487D11.pool.mediaways.net)
[10:33:11] <eddyb> Heather needs a hack because of vector literals' bogus type checking
[10:33:16] <Heather> rusti: fn x(bugs: [&str]) -> () { () }; let bug = "bug"; x(["bug", bug]);
[10:33:16] -rusti- <anon>:10:20: 10:26 error: bare `[]` is not a type
[10:33:16] -rusti- <anon>:10         fn x(bugs: [&str]) -> () { () }; let bug = "bug"; x(["bug", bug]);
[10:33:17] -rusti-                              ^~~~~~
[10:33:17] -rusti- error: aborting due to previous error
[10:33:17] -rusti- application terminated with error code 101
[10:33:24] <eddyb> s/bogus/overly conservative/
[10:33:34] <Heather> rusti: fn x(bugs: &[&str]) -> () { () }; let bug = "bug"; x(["bug", bug]);
[10:33:37] -rusti- pastebinned 10 lines of output: http://ix.io/am4
[10:33:47] <dbaupp> rusti: fn x(bugs: &[&str]) -> () { () }; let bug = "bug"; x(["bug", bug])
[10:33:48] -rusti- <anon>:10:14: 10:18 warning: unused variable: `bugs`, #[warn(unused_variable)] on by default
[10:33:48] -rusti- <anon>:10         fn x(bugs: &[&str]) -> () { () }; let bug = "bug"; x(["bug", bug])
[10:33:49] -rusti-                        ^~~~
[10:33:49] -rusti- ()
[10:34:21] <Heather> and it works?
[10:34:23] <dbaupp> rusti: fn x(a: &str, b: &str) { [a, b]; } x("foo", "bar") 
[10:34:26] -rusti- pastebinned 11 lines of output: http://ix.io/am5
[10:34:40] <dbaupp> ^there?
[10:35:04] <eddyb> I think until some time ago, &"foo" was &'anon "foo" instead of &'static "foo". or the change was the opposite, idk
[10:35:32] <dbaupp> rusti: fn x(a: &str, b: &str) { ["foo", a, b]; } x("foo", "bar") 
[10:35:35] -rusti- pastebinned 16 lines of output: http://ix.io/am6
[10:35:43] <Heather> rusti: fn x(_bugs: &[&str]) -> int { 42 }; let bug = "bug"; x(["bug", bug])
[10:35:45] -rusti- 42
[10:35:59] <Heather> can't understand why it works
[10:36:14] <eddyb> Heather: you do realize bug is &'static str, *just like* "bug"?
[10:36:19] <eddyb> they're identical
[10:36:28] *** Quits: xiongmao86 (rui@A1A18738.6ABE6CAA.4F142960.IP) (Quit: )
[10:36:46] <eddyb> rusti: fn x(_bugs: &[&str]) -> int { 42 }; let bug = ~"bug"; x(["bug", bug.as_slice()])
[10:36:48] -rusti- 42
[10:36:49] <Heather> no! I expect error: mismatched types: expected `&'static str` but found `&str`
[10:36:56] <eddyb> wait, what?
[10:37:06] <eddyb> Heather: they are both 'static
[10:37:18] <eddyb> rusti: fn x(_bugs: &[&str]) -> int { 42 }; let bug = ~"bug"; x([bug.as_slice(), "bug"])
[10:37:20] -rusti- 42
[10:37:26] <eddyb> how come that works?
[10:37:30] <dbaupp> eddyb: clearly Heather has encountered this error somewhere else, and is trying to find an example
[10:37:42] <Heather> dbaupp: right!
[10:37:44] <eddyb> dbaupp: I know because I helped her come up with a hack
[10:37:53] <dbaupp> rusti: fn x(b: &str) { ["foo", b]; } x("bar") 
[10:37:55] -rusti- pastebinned 9 lines of output: http://ix.io/am7
[10:38:01] <eddyb> okay, that's a good one
[10:38:02] <dbaupp> Heather: ^there
[10:38:25] <Heather> seems like light
[10:38:29] <eddyb> rusti: fn x<'a>(a: &'a str) { ["foo", a]; } x("bar") 
[10:38:31] -rusti- pastebinned 9 lines of output: http://ix.io/am8
[10:39:02] <eddyb> rusti: fn x<'a>(a: &'a str) -> [&'a str, ..2] { ["foo", a] } x("bar") 
[10:39:04] -rusti- pastebinned 9 lines of output: http://ix.io/am9
[10:39:16] <dbaupp> lols
[10:39:27] <eddyb> rusti: fn x<'a>(a: &'a str) -> (&'a str, &'a str) { ("foo", a) } x("bar") 
[10:39:28] -rusti- ("foo", "bar")
[10:39:37] <eddyb> dbaupp: vector literals aren't typechecked :(
[10:39:41] <dbaupp> inconsistencies <3
[10:39:51] <dbaupp> eddyb: they definitely are typechecked :P
[10:39:52] <Heather> so &static str is not &str awhile this
[10:40:00] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[10:40:06] <eddyb> dbaupp: "typeck" as in "inference, subtyping etc. etc"
[10:40:24] <eddyb> all elements after the first one have to have the exact same type as the first one
[10:40:37] <eddyb> Heather: this is about vector literals being broken
[10:40:50] <dbaupp> eddyb: yup
[10:40:52] <eddyb> it also causes auto-coercion-to-trait-objects to fail
[10:41:08] <Heather> but it affects usage of such &static str and &str
[10:41:15] <Heather> and when you fix them
[10:41:18] <Heather> you broke them
[10:41:34] <eddyb> Heather: &"foo" having non-'static lifetime was a bug
[10:41:44] <Heather> yes I mean this
[10:41:51] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[10:41:53] <eddyb> we fixed a bug, making your workaround for a worse bug harder
[10:41:54] <Heather> but it was workaround I used
[10:42:03] <eddyb> we had this discussion like two weeks ago :P
[10:42:04] <Heather> right
[10:42:20] <Heather> yes... I'm still waiting for fix
[10:42:35] <Heather> because it caused me to make terrible code changes I want to revert
[10:42:36] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[10:42:52] *** Joins: sk_ (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[10:43:19] <Heather> dbaupp: eddyb: https://github.com/Heather/Mirana/blob/master/src/Mirana/VcsCmd/Git.rs
[10:43:33] <eddyb> I know, but I can't do a million things at once
[10:43:49] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Client exited)
[10:43:51] <Heather> I don't rush )
[10:43:51] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[10:44:08] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Ping timeout)
[10:44:23] <eibwen> how much space does the ~ pointer take? exactly as much as a * ?
[10:44:28] *** Quits: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr) (Ping timeout)
[10:44:29] <eddyb> eibwen: yupp
[10:44:45] <dbaupp> (except for ~Trait)
[10:44:52] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Connection reset by peer)
[10:45:01] <eibwen> dbaupp: ~trait takes sizeof(void*)*2?
[10:45:06] <eibwen> cause vtable?
[10:45:10] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:45:12] <eddyb> the sizes of &T and ~T are the same as *T
[10:45:17] <Heather> Yurume nuget is RIP for pushing for ~month seems like
[10:45:33] <dbaupp> eibwen: yes
[10:45:38] <eddyb> which is one word for a sized T and two for an unsized T
[10:45:57] <eddyb> we might as well start using DST terminology and even implement the darn thing already
[10:46:21] <eibwen> is it safe to cast a (c-)library returned pointer to a ~OpaqueType?
[10:46:32] <eibwen> so rust enforces proper usage?
[10:46:39] <eibwen> 'safe'
[10:46:41] <dbaupp> design has been being perfected for quite a while
[10:46:47] <eibwen> is it safe to do it in an unsafe block?
[10:46:55] <dbaupp> eibwen: no, the destructor of ~ isn't necessarily free
[10:47:16] <dbaupp> (i.e. it may be a different, non-libc 'free')
[10:47:18] <eibwen> right.
[10:47:37] <eddyb> eibwen: you should cast back to ~T and drop, to get the proper behavior
[10:47:51] <eibwen> can I create my own type with the same semantics as ~ (i.e. static checking and coercing to &)?
[10:47:59] <eddyb> not yet
[10:48:09] <dbaupp> eibwen: not automatic coercion to &
[10:48:18] <dbaupp> but yes, you can implement ~ in a library
[10:51:27] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[10:52:20] *** Joins: jamil_1 (kvirc@D2302E0B.7EB4EB0B.3D6CCABD.IP)
[10:52:26] <eibwen> eddyb: what does drop do?
[10:52:52] <eddyb> eibwen: nothing. fn drop<T>(_: T) {} will free its argument
[10:52:56] <eibwen> for some reason the search does not work for the keyword 'drop'
[10:53:57] <dbaupp> yeah
[10:54:04] <dbaupp> there's a few things that just fail in the search js
[10:54:08] <dbaupp> it's *really* weird
[10:54:37] <eibwen> js I guess
[10:55:29] <eibwen> eddyb: you say I should have the user of the lib put my fn create() -> ~Type into drop after using it?
[10:56:09] <eibwen> dbaupp: you say I could implement ~ in a library. for everything or for everything except the coercion into &?
[10:56:38] <eddyb> eibwen: well, drop is helpful if you transmute *T to ~T. just letting ~T go out of scope will free it
[10:57:03] <eddyb> why do you want a custom Uniq? to ensure it can be freed by C? how much control do you have over the C code?
[10:58:20] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:58:51] *** Quits: kvanb (kvanb@moz-499D8E3.vwl9.win.bigpond.net.au) (Ping timeout)
[10:59:11] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[10:59:27] <eibwen> well, I'm looking into that rust-lua library
[10:59:53] <eibwen> which puts some type around the C-pointer to the lua state
[11:00:19] <eibwen> but I thought it should be possible to have a type exactly as Lua* in C
[11:00:31] *** Joins: kvanb (kvanb@moz-9884B768.lnse2.lon.bigpond.net.au)
[11:00:51] <eibwen> which would be neat because you wouldn't have to transmute the unsafe pointer you get in callback functions
[11:00:57] <eibwen> but rather get a &Lua
[11:01:11] <dbaupp> eibwen: you can implement a type that's semantically equivalent to ~
[11:01:20] <eibwen> even the coercing?
[11:01:21] <dbaupp> but not syntactically
[11:01:35] <dbaupp> i.e. you'd need .borrow() and .move_out() methods
[11:01:41] <eibwen> ok
[11:01:42] <eddyb> eibwen: you can use &Lua instead of *Lua
[11:01:45] <dbaupp> to go Ptr<T> -> &T and Ptr<T> -> T
[11:02:02] <eibwen> dbaupp: yea, that'd be good
[11:02:18] <eibwen> except that move_out shouldn't exist for opaque types
[11:02:25] <eibwen> thanks
[11:02:39] <eddyb> otherwise, I'm not sure what *Lua and Uniq/~ have in common
[11:02:43] <dbaupp> eibwen: https://news.ycombinator.com/item?id=7034435
[11:03:00] <dbaupp> is a complete library implementation of ~
[11:03:03] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[11:03:20] *** Joins: lucian_ (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[11:03:27] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[11:03:31] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[11:03:43] *** Joins: dmacvicar (dmacvicar@moz-663A7346.nue.novell.com)
[11:03:48] <eibwen> dbaupp: drop is a magic word?
[11:03:58] <eibwen> also, is coercing planned to be implemented?
[11:04:02] <eddyb> eibwen: nope
[11:04:10] <dbaupp> eibwen: the Drop trait provides destructors
[11:04:17] *** Quits: KindOne (KindOne@moz-CAC01E3C.dynamic.ip.windstream.net) (Ping timeout)
[11:04:20] <eddyb> ds
[11:04:24] <eibwen> eddyb: nope to what?
[11:04:27] <dbaupp> but the word "drop" itself means nothing special to the compiler
[11:04:33] <eddyb> *drop, that is. ignore the swapping
[11:04:46] <eibwen> the Drop is a magic trait?
[11:04:50] <dbaupp> yeah
[11:04:53] <eibwen> ok
[11:04:55] <dbaupp> kinda
[11:04:57] <eddyb> not really magic
[11:05:00] *** Quits: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:05:01] <diverse> builtin
[11:05:11] <eddyb> diverse: nope
[11:05:12] <dbaupp> it's defined in std, but it's registered with the compiler as "this trait is destructors"
[11:05:14] <eddyb> just registered to the compiler as a "lang item"
[11:05:18] <eibwen> magic because it does more than you could achieve with the language itself
[11:05:20] <dbaupp> eddyb: it is very magic
[11:05:31] <dbaupp> lang items are how the compiler does it's magic
[11:05:54] <dbaupp> and saying "it's not magic because the `trait ... {}` item is defined in libstd" is just silly
[11:05:55] <eddyb> eibwen: it is part of the language :P. well, the interface provided by the compiler to the language for functionality
[11:06:16] <eibwen> yea
[11:06:25] *** Quits: pepper_chico (pepper_chi@2E27DB8.A156809A.4D7FED01.IP) (Quit: WeeChat 0.4.1)
[11:06:28] <eibwen> so, did someone answer the coercing question?
[11:06:41] <eddyb> eibwen: planned. hopefully in the next couple of weeks
[11:06:43] <dbaupp> there will be automatic dereference in future
[11:06:55] <eibwen> ah nice
[11:07:01] <eddyb> nmatsakis wanted to assign workloads, but yesterday we just talked about variadic generics
[11:07:12] <dbaupp> but it's not necessarily exactly the same as coercing
[11:07:56] <eibwen> can I impl something for some specific SomeGeneric<SomeType>?
[11:08:04] <dbaupp> yes
[11:08:17] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Client exited)
[11:08:28] *** Joins: KindOne (KindOne@moz-D6A95384.dynamic.ip.windstream.net)
[11:08:28] <dmacvicar> rust-http macro undefined: 'if_ok'
[11:08:31] <eddyb> should be able to, unless something conflicts, like an impl of the same trait for SomeGeneric<T> for all T
[11:08:37] <eddyb> dmacvicar: update
[11:08:39] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[11:08:43] <dmacvicar> update what?
[11:08:50] <eddyb> dmacvicar: your rust
[11:08:59] <eddyb> should be using master
[11:09:09] <eddyb> that macro has been in libstd for a few days, I think
[11:09:29] <dmacvicar> eddyb: I am providing a package of 0.9 for a distro
[11:09:35] <dmacvicar> I wanted to add http
[11:09:39] <dbaupp> dmacvicar: there may be a 0.9 compatible branch
[11:09:51] <dbaupp> but the development branch will definitely not compile with 0.9
[11:10:02] <eddyb> dmacvicar: we won't support stable releases until 1.0
[11:10:06] <dmacvicar> ah there is
[11:10:23] <dmacvicar> eddyb: I understand, and it is fine. I just want to avoid packaging from master
[11:10:28] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Ping timeout)
[11:10:37] <eddyb> dmacvicar: why? 0.9 is too old already
[11:10:57] <eddyb> only a rust-git/rust-nightly package is useful
[11:11:15] <eddyb> dmacvicar: what distro, btw?
[11:11:18] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[11:11:19] <dmacvicar> openSUSE
[11:11:23] <dbaupp> eddyb: 0.9 is not too old
[11:11:26] <eddyb> reminds me I tried to package rust-git for... yeah, I knew it!
[11:11:35] <dmacvicar> I can do a git package, but I would have trouble with the bootstrap
[11:11:35] <dbaupp> you can still do useful work with 0.9
[11:11:53] <dmacvicar> the openSUSE build service supports packages that auto-update from git
[11:12:02] <eddyb> dmacvicar: I managed to do it, but I didn't setup a nightly build script for it
[11:12:03] <dmacvicar> but right now I am commiting the stage0 tars with the package
[11:12:14] <dmacvicar> there is no network in the build service during build
[11:12:28] <dmacvicar> so the package ships the stage0 and uses the local rust flag for the build
[11:12:38] <dmacvicar> if I build from git I assume that would not work
[11:13:01] <eddyb> dmacvicar: you have to get the current snapshot before each build
[11:13:05] <dmacvicar> unless there is another way to get the stage0
[11:13:28] <eddyb> I think src/snapshots.txt has all the information you need
[11:13:43] <dmacvicar> eddyb: sure, but how to get the current snapshot. I can't do it in the package description. I can only replace my sources with a description file to let the build service generate my sources.
[11:13:51] <dmacvicar> for security there is no network available
[11:14:08] <eddyb> dmacvicar: you can have remote paths in .spec
[11:15:09] <eddyb> dmacvicar: and they get downloaded and cached automatically (so if the snapshot address doesn't change - which can take from a few days to a couple weeks - it doesn't download it again)
[11:15:27] <dmacvicar> you are probably talking about Koji
[11:15:39] <eddyb> koji what?
[11:15:58] <dmacvicar> I don't think the build service download your sources even if they are urls
[11:16:03] <dmacvicar> (the openSUSE one)
[11:16:04] <eddyb> the way I wanted to do this: local cron script, modifies the .spec file with the right snapshot address (in case it changed) push it to OBS, trigger a rebuild
[11:16:13] <eddyb> it does, let me show you my .spec
[11:16:39] <dmacvicar> local cron script? ok, that explains it
[11:17:17] <dmacvicar> I guess I can also use the source services locally, and update manually
[11:17:23] <eddyb> I just never got to it because I build my own rustc while working on it. and testing a rust build takes forever
[11:17:40] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[11:17:43] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[11:17:59] *** Quits: blaenk (blaenk@moz-43A413B6.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[11:18:36] <eddyb> dmacvicar: see "Source1" https://build.opensuse.org/package/view_file/home:eddybb:devel:languages:rust/rust-git/rust-git.spec?expand=1
[11:19:14] <dmacvicar> eddyb: I think I remember your name and I copied my package from yours :-)
[11:19:45] <eddyb> if only I had a more powerful computer so testing didn't take hours
[11:20:21] <dmacvicar> ahh you are using the download_files service
[11:20:27] <eddyb> the cron script would just update the snapshot URL and trigger rebuilds
[11:20:30] <dmacvicar> and run it locally
[11:20:39] <eddyb> dmacvicar: it can run remotely
[11:20:52] <eddyb> you only need to run it locally if you're testing locally
[11:21:46] <dmacvicar> I will try your tips. I want to work on the rpm macros so that one can build crates easily
[11:22:31] <eddyb> if only we had a proper package manager. I find things like node-* in distro repos silly
[11:22:41] <eddyb> because of how npm works
[11:23:22] <dmacvicar> you can find the same discussion with gems, jars, eggs, etc
[11:26:25] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[11:26:30] <eddyb> well, yeah, but python for example: I know it isn't as modular as npm
[11:28:06] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[11:28:45] *** Quits: dmacvicar (dmacvicar@moz-663A7346.nue.novell.com) (Ping timeout)
[11:30:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:31:39] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[11:31:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:33:27] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Ping timeout)
[11:35:21] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[11:36:18] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[11:36:22] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[11:37:53] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[11:38:00] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:38:26] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[11:39:20] *** Quits: alonlevy (alon@moz-AEE80F52.red.bezeqint.net) (Ping timeout)
[11:39:50] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[11:40:58] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[11:42:39] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[11:43:26] <eibwen> how can I transmute [u32] to [u8] and retain the same size?
[11:43:43] <eibwen> uhm, &[u32], &[u8]
[11:43:47] <eddyb> eibwen: what is the actual operation you need?
[11:44:15] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:44:38] <eddyb> eibwen: element-wise cast or reinterpreting the u32's as bytes?
[11:44:46] <diverse> he wants &[u32, ..n] to &[u8, ..n]
[11:44:48] <eibwen> reinterpreting
[11:44:51] <eibwen> no
[11:44:53] <eddyb> diverse: nope
[11:45:05] <eibwen> I want &[u32, ..n] to &[u8, ..4*n]
[11:45:09] <eddyb> eibwen: you can use .set_len() to change the length
[11:45:25] <dbaupp> vec::raw::buf_len_as_slice(vec.as_ptr() as *u8, vec.len() * 4, |bytes| { ... })
[11:45:27] <dbaupp> iirc
[11:45:38] <eddyb> or that
[11:48:12] <eibwen> std::vec::raw::from_buf_raw seems more useful
[11:48:54] *** Joins: alonlevy (alon@moz-AEE80F52.red.bezeqint.net)
[11:49:23] <eibwen> ah no, that one creates a ~
[11:50:34] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:51:00] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[11:51:11] <dbaupp> you can also transmute a std::unstable::raw::Slice to &[u8]
[11:51:25] <dbaupp> (where the fields are the ptr and len thing I did just above)
[11:52:03] *** Joins: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP)
[11:52:05] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[11:52:07] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[11:52:07] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[11:52:11] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:52:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[11:54:26] <eibwen> dbaupp: can I stop a ~ from deallocating?
[11:54:48] <dbaupp> eibwen: std::cast::forget will consume a value without running its destructor
[11:54:58] <eibwen> ah, thanks
[12:00:00] *** Quits: zelda (Mibbit@14664284.4DD0CF6B.2F9DE622.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:00:22] *** Quits: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP) (Ping timeout)
[12:02:25] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[12:02:46] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[12:05:51] *** Joins: vmx (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de)
[12:06:11] *** Joins: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP)
[12:08:16] <LRN> i'm looking at http://pzol.github.io/getting_rusty/posts/20140122_destructuring_in_rust/ , and the "let <Type> <Initialization> = <variable>; syntax looks weird. Is that a new thing?
[12:08:57] <dbaupp> no, it's just pattern matching on a struct
[12:09:05] <pnkfelix> LRN: its destructuring a struct instance via pattern matching.  its not new.
[12:09:18] <LRN> ah, ok
[12:09:19] <dbaupp> it's just like `match foo { Foo { x } = > { ... } }`
[12:09:53] <eddyb> <Type> <Initialization> does look weird
[12:10:05] <eddyb> it's probably a misunderstood pattern
[12:10:18] <LRN> so, does it put 1 into 'a', 2 into 'b' or what?
[12:10:37] <LRN> usually when i see "let", i assume variable declaration
[12:10:39] *** Quits: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP) (Quit: brendan)
[12:11:02] <eddyb> LRN: it declares a and b
[12:11:30] <LRN> ok
[12:12:10] *** Quits: vmx (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de) (Ping timeout)
[12:13:40] *** Joins: vmx (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de)
[12:14:16] *** Joins: axitkhurana (Adium@1E9C8213.B82EF728.A26A30FD.IP)
[12:14:19] *** Parts: axitkhurana (Adium@1E9C8213.B82EF728.A26A30FD.IP) ()
[12:15:43] *** Joins: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP)
[12:16:29] *** Quits: alonlevy (alon@moz-AEE80F52.red.bezeqint.net) (Ping timeout)
[12:17:09] <eibwen> dbaupp: now I got this: http://ix.io/ama which is pretty long for something that is essentially a no-op
[12:17:46] <eibwen> do you see room for improvement/making things more rustic?
[12:18:57] <dbaupp> it's not a noop: it's stuff that (in general) is undefined behaviour and will make the optimiser break your code :P
[12:19:19] <dbaupp> isn't from_buf_raw copying it?
[12:19:35] <dbaupp> so... that code is memroy unsafe
[12:20:02] <eibwen> yea, looks like it.. :/
[12:21:30] *** Quits: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP) (Quit: brendan)
[12:21:53] <dbaupp> rusti: fn to_bytes<'a>(x: &'a [u32]) -> &'a [u8] { unsafe {std::cast::transmute(std::unstable::raw::Slice { data: x.as_ptr() as *u8, len: x.len() * 4 })} } println!("{:?}", to_bytes([0xdeadbeef, 0xbadc0ffe]))
[12:21:56] -rusti- pastebinned 15 lines of output: http://ix.io/amb
[12:22:18] <dbaupp> rusti: fn to_bytes<'a>(x: &'a [u32]) -> &'a [u8] { unsafe {std::cast::transmute(std::unstable::raw::Slice { data: x.as_ptr() as *u8, len: x.len() * 4 })} } let tmp = [0xdeadbeef, 0xbadc0ffe]; println!("{:?}", to_bytes(tmp))
[12:22:20] -rusti- &[239u8, 190u8, 173u8, 222u8, 254u8, 15u8, 220u8, 186u8]
[12:22:20] -rusti- ()
[12:22:58] <eibwen> that looks good
[12:23:36] <dbaupp> eibwen: https://gist.github.com/huonw/2d4cf5b8919eab6bbffc in line-broken form
[12:23:50] *** Joins: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[12:23:54] <dbaupp> https://github.com/mozilla/rust/blob/master/src/libstd/unstable/raw.rs#L33
[12:24:00] <dbaupp> for the Slice struct
[12:24:13] <eibwen> thanks
[12:24:22] <eibwen> by the way, is there a function that has the signature fn to_vec<'a,T>(x: &'a T) -> &'a[T]
[12:24:59] <eibwen> which returns a vector consisting of his one element, without allocating anything?
[12:25:26] *** Quits: lpy (lpy@CD0DB27D.2153E224.E99F7FDB.IP) (Ping timeout)
[12:25:49] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Ping timeout)
[12:25:59] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[12:26:41] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:27:25] *** kimundi is now known as zz_kimundi
[12:27:31] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[12:27:35] <dbaupp> no, but you could do a similar technique to write one
[12:28:25] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:28:48] <eibwen> is there a reason why the stdlib doesn't have many unsafe functions? :)
[12:30:03] *** Quits: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Connection reset by peer)
[12:30:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:30:41] *** Joins: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[12:31:28] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:32:03] *** Joins: vmx_ (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de)
[12:32:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:32:44] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:32:59] *** Quits: vmx (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de) (Ping timeout)
[12:33:41] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[12:35:37] <dbaupp> because they're unsafe, and because they're not used much
[12:35:58] <dbaupp> unsafe is very easy to screw up
[12:38:37] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:39:14] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[12:39:32] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[12:39:32] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[12:42:59] *** Joins: andrew-__ (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[12:43:43] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[12:43:46] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:44:19] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[12:49:41] *** Quits: jamil_1 (kvirc@D2302E0B.7EB4EB0B.3D6CCABD.IP) (Ping timeout)
[12:49:49] *** Joins: jdm (jdm@9A315A00.EF4ED636.74119F78.IP)
[12:49:49] *** ChanServ sets mode: +o jdm
[12:53:37] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:55:23] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:57:47] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[12:58:14] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[13:00:09] <doomlord_> heh, the whole point of rust was safety
[13:00:45] <doomlord_> so it would be surprising if there were many unsafe functions in its stdlib
[13:03:38] <apoelstra> :P i can imagine the proliferance of newbie code starting "unsafe fn main() {"..
[13:03:55] <dbaupp> rustilite: unsafe fn main() {}
[13:03:55] -rustilite- <anon>:1:1: 1:20 error: main function expects type: `fn()`: expected impure fn but found unsafe fn
[13:03:56] -rustilite- <anon>:1 unsafe fn main() {}
[13:03:56] -rustilite-          ^~~~~~~~~~~~~~~~~~~
[13:03:56] -rustilite- error: aborting due to previous error
[13:03:56] -rustilite- application terminated with error code 101
[13:04:03] <dbaupp> it's not allowed :P
[13:04:07] <apoelstra> oh, good :)
[13:04:18] <Ms2ger> fn main() { unsafe { ... } }
[13:05:21] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Quit: Leaving.)
[13:08:05] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[13:09:54] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[13:10:19] *** Joins: xitology_ (xi@85437D54.5AFA3E4.CEDFC552.IP)
[13:10:21] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Client exited)
[13:10:24] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[13:16:29] *** zz_kimundi is now known as kimundi
[13:19:24] *** Joins: brendan (brendaneic@moz-F49A1F98.range86-189.btcentralplus.com)
[13:20:03] *** Joins: alonlevy (alon@moz-AEE80F52.red.bezeqint.net)
[13:21:44] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[13:21:53] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[13:22:52] *** Quits: brendan (brendaneic@moz-F49A1F98.range86-189.btcentralplus.com) (Quit: brendan)
[13:23:20] *** Joins: brendan (brendaneic@moz-F49A1F98.range86-189.btcentralplus.com)
[13:25:42] *** Quits: vmx_ (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de) (Connection timed out)
[13:26:26] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[13:27:02] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[13:27:14] <eibwen> rusti: unsafe fn vec_to_bytes<'a,T>(x: &'a [T]) -> &'a [u8] { let slice = unstable::raw::Slice { data: x.as_ptr() as *u8, len: x.len() * mem::size_of<T>() }; cast::transmute(slice) }
[13:27:17] -rusti- pastebinned 32 lines of output: http://ix.io/amh
[13:27:22] *** Joins: vmx_ (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de)
[13:28:04] <eibwen> rusti: unsafe fn vec_to_bytes<'a,T>(x: &'a [T]) -> &'a [u8] { let slice = std::unstable::raw::Slice { data: x.as_ptr() as *u8, len: x.len() * std::mem::size_of<T>() }; std::cast::transmute(slice) }
[13:28:06] -rusti- pastebinned 5 lines of output: http://ix.io/ami
[13:28:30] <eibwen> can someone help me with that error?
[13:28:46] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:29:33] *** Joins: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP)
[13:29:45] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[13:30:04] <dbaupp> eibwen: size_of::<T>()
[13:31:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:31:55] *** Quits: brendan (brendaneic@moz-F49A1F98.range86-189.btcentralplus.com) (Quit: brendan)
[13:33:16] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:33:55] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[13:34:14] *** Quits: gimpf (gimpf@moz-104459D9.adsl.highway.telekom.at) (Client exited)
[13:34:22] *** Joins: gimpf (gimpf@moz-104459D9.adsl.highway.telekom.at)
[13:34:51] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[13:34:51] *** Quits: gimpf (gimpf@moz-104459D9.adsl.highway.telekom.at) (Client exited)
[13:37:36] *** Quits: alonlevy (alon@moz-AEE80F52.red.bezeqint.net) (Ping timeout)
[13:38:58] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[13:39:18] <eibwen> can I mark a function unsafe without making everything inside unsafe?
[13:39:41] <eddyb> eibwen: hmm?
[13:40:06] <eibwen> I seem  to be able to do unsafe stuff in an unsafe function
[13:40:17] <eibwen> without an unsafe blcok, that is
[13:40:56] <eddyb> ahh, that issue
[13:41:00] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[13:41:24] <pnkfelix> eibwen: yeah I think that is by design.  I imagine you could have the pub unsafe fn immediately call out to a priv non-unsafe fn with unsafe blocks inside the priv fn
[13:42:00] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:43:46] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[13:45:18] <dbaupp> we need ununsafe blocks to enforce safety
[13:45:32] <eibwen> like safe{} blocks?
[13:45:49] <dbaupp> yeah, but with a sillier name :P
[13:46:28] <eibwen> can I have something like #[little_endian]?
[13:46:51] <pnkfelix> dbaupp: would the approach I suggested above suffice?  (if so, then we can just abstract it in an ununsafe! macro, no?)
[13:47:11] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:48:46] <SiegeLord> Seems easier to change the rule for unsafe functions
[13:49:09] <pnkfelix> or maybe it wouldn't work, I guess I would need to pass along all the arguments to the inner fn.  That, or use a proc, but I wouldn't be surprised if a proc expression in unsafe fn's is itself unsafe...
[13:49:12] <eibwen> I see no particular reason for unsafe functions to have global unsafety
[13:53:23] <dbaupp> pnkfelix: I guess it would work, modulo the passing args
[13:53:36] <dbaupp> *passing the args
[13:54:27] <pnkfelix> dbaupp: yeah the macro system almost certainly doesn't have enough info from the surrounding context to express this the way I'd like
[13:54:32] <dbaupp> eibwen: there isn't a particular one, but imagine the overwhelmingly common case would be unsafe fn foo() { unsafe { ... } } if had a "safe" interior
[13:54:56] <eibwen> btw, can rustc inline closures?
[13:55:16] <eibwen> like in
[13:55:34] <eibwen> Some(x).map(|x| 2*x)?
[13:57:12] <dbaupp> yes
[13:57:30] <dbaupp> they're mostly a normal function with an implicit extra arg
[13:57:53] <eibwen> like a void *env in C I guess
[13:58:02] <eibwen> (for callbacks)
[13:58:04] <dbaupp> yeah
[13:58:58] <dbaupp> bleh, transmute called on types with different sizes: u32 (32 bits) to std::option::Option<char> (64 bits) :'(
[13:59:06] <dbaupp> so hard to trac down
[13:59:57] <dbaupp> oh, this one was obvious
[13:59:59] * dbaupp phew
[13:59:59] <eibwen> where do you find those?
[14:00:06] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:00:30] *** Quits: apoelstra (username@moz-BBEB5B9E.sw.biz.rr.com) (Quit: to school)
[14:00:45] *** Quits: jdm (jdm@9A315A00.EF4ED636.74119F78.IP) (Quit: Lost terminal)
[14:02:54] <dbaupp> eibwen: what do you mean?
[14:03:23] <eibwen> where is transmute called this wrong way?
[14:03:37] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[14:07:53] <dbaupp> in the code I was refactoring, to remove the transmutes (previously converting u32 -> char); I updated the struct to be using `Option<char>` but forgot to change on of the transmutes that initialised it
[14:07:56] <dbaupp> *one
[14:08:29] <bstrie> wycats: ah! that four-cell table on your sixth slide is a really great way of presenting rust
[14:08:42] <mitsuhiko> is it save to transmute an Option<~whatever> into a *whatever?
[14:08:54] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Ping timeout)
[14:08:56] <mitsuhiko> (is that even possible?)
[14:09:02] <Ms2ger> It'll probably work
[14:09:06] <Ms2ger> It's not safe, though
[14:09:19] <bstrie> mitsuhiko: at runtime Option<~T> is represented as a single pointer, yeah
[14:09:22] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[14:09:33] <bstrie> mitsuhiko: but like all transmutes we don't consider it "safe" by our standards :)
[14:10:14] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[14:10:37] <bstrie> mitsuhiko: however, I'm still not sure if it will *work*... transmute requires the sizes to be the same, and I'm not sure if that check happens at runtime or compile time
[14:10:59] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[14:11:14] <bstrie> if it's at compile time, then transmuting enums just won't make sense since we don't specify what their size will be, in order to let us optimize them better
[14:11:28] <eibwen> bstrie: transmute actually *checks* for sizes? nice
[14:11:47] *** Joins: jamil_1 (kvirc@BE0A575A.E76AECAB.3D6CCABD.IP)
[14:12:53] <bstrie> wycats: ahahaha, objc in the memory unsafe/garbage collected category
[14:13:08] <mitsuhiko> bstrie: well, it seems to work
[14:13:12] <mitsuhiko> just not sure how guaranteed that is
[14:14:28] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[14:14:34] *** Joins: nszceta (hax@62102655.D23DDDCF.37339E3A.IP)
[14:14:59] <bstrie> mitsuhiko: by 1.0 we'll have likely defined some subset of enums whose representations we *do* guarantee
[14:15:06] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[14:15:25] <bstrie> mitsuhiko: like, there's no reason for us to *not* represent Option<~T> as a pointer at runtime, since it's a trivial transformation and it's safe and fast
[14:15:59] <bstrie> mitsuhiko: so yes, you should be wary in general of transmuting enums, but in this case you should be fine :)
[14:16:07] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[14:16:18] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[14:16:19] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:17:23] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[14:17:39] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[14:18:09] *** Quits: jamil_1 (kvirc@BE0A575A.E76AECAB.3D6CCABD.IP) (Ping timeout)
[14:20:19] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[14:21:27] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[14:21:44] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:22:10] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[14:23:18] *** Joins: m-r-r (mrr@moz-F7548D46.rev.sfr.net)
[14:23:54] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[14:24:28] *** Joins: dschatzberg (dschatzber@moz-9384E83C.bu.edu)
[14:27:23] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:27:49] <m-r-r> Hello,
[14:28:26] <m-r-r> I'm trying to write a simple TCP server in Rust
[14:28:33] <m-r-r> Here is my code 
[14:28:56] <m-r-r>  http://pygments.org/demo/237462/
[14:29:06] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:29:29] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[14:29:38] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:29:39] <m-r-r> The compiler prints an error message: error: cannot move out of dereference of & pointer
[14:29:52] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[14:30:17] <m-r-r> It's at line #27, near listener.listen()
[14:31:10] <eddyb> m-r-r: take SocketAddr instead of &SocketAddr
[14:31:52] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:32:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:32:42] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[14:32:53] <m-r-r> eddyb: it's done, but the error is still there :-/ Why should-i not pass the SocketAddr bu reference ?
[14:33:47] <eddyb> m-r-r: maybe I was wrong :/
[14:33:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:34:03] <Zr40> sfackler: you there?
[14:34:27] *** pmoore is now known as pmoore|afk
[14:34:40] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:35:03] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[14:35:23] <eddyb> m-r-r: does this work? https://gist.github.com/eddyb/037823c256a4ee6dc03f
[14:35:24] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[14:36:22] <eddyb> m-r-r: if this is where the error was happening, I guess it needs ownership https://gist.github.com/eddyb/037823c256a4ee6dc03f#file-gistfile1-rs-L25
[14:36:32] <eddyb> that's why I changed it to take self by value
[14:36:50] *** Joins: kostya (kostya@245B4295.D4C8665D.65FC93DD.IP)
[14:36:54] <m-r-r> eddyb: i'm trying your code...
[14:37:10] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[14:38:00] <m-r-r> eddyb: yes, it disapeared ! thanks :-)
[14:39:45] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[14:40:02] *** jorendorff_away is now known as jorendorff
[14:41:37] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[14:41:42] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[14:44:13] *** Quits: vmx_ (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de) (Ping timeout)
[14:44:32] *** Joins: vmx_ (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de)
[14:46:03] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[14:51:31] *** Quits: sellout (Adium@moz-CF70CF20.hlrn.qwest.net) (Quit: Leaving.)
[14:54:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:55:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:55:46] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:58:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:59:38] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[15:02:49] *** Joins: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP)
[15:05:42] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[15:06:07] *** Quits: Ferreus (ferreus@moz-7A7F9983.dip0.t-ipconnect.de) (Ping timeout)
[15:08:34] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Client exited)
[15:08:56] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[15:08:59] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:09:05] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:09:54] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:13:59] *** Joins: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net)
[15:14:17] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[15:14:21] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[15:15:01] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[15:17:07] *** Quits: andrew-__ (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[15:17:30] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[15:20:30] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[15:20:30] *** Quits: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP) (Ping timeout)
[15:20:50] *** Joins: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP)
[15:22:11] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[15:22:14] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:22:30] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[15:23:57] *** Quits: moostik (Icedove@moz-9CCE699F.w81-249.abo.wanadoo.fr) (Ping timeout)
[15:25:16] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[15:26:16] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[15:26:24] *** Joins: derek_c (derek@moz-D8EBE54B.cit.cornell.edu)
[15:27:43] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:27:44] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[15:27:46] *** Joins: moostik (Icedove@moz-13458D93.w81-249.abo.wanadoo.fr)
[15:28:35] *** Joins: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net)
[15:29:25] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:31:23] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[15:32:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:33:51] *** Joins: `cbp (user@C3232618.1AFAEAEA.7C05EB22.IP)
[15:34:12] *** Parts: `cbp (user@C3232618.1AFAEAEA.7C05EB22.IP) (ERC Version 5.3 (IRC client for Emacs))
[15:34:26] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:34:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:34:58] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[15:35:48] *** Joins: jamil_1 (kvirc@64EB6BA1.46409B70.F6DA161.IP)
[15:36:58] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[15:37:48] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[15:38:15] *** pmoore|afk is now known as pmoore
[15:38:32] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[15:40:20] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:40:31] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[15:41:13] *** Joins: espindola (espindola@moz-9F530B29.com)
[15:42:06] *** pmoore is now known as pmoore|brb
[15:42:34] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[15:42:36] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[15:46:48] *** Joins: nooblit (Mibbit@moz-CBA73F0A.dhcp.ftwo.tx.charter.com)
[15:49:58] *** pmoore|brb is now known as pmoore
[15:50:06] *** Quits: derek_c (derek@moz-D8EBE54B.cit.cornell.edu) (Ping timeout)
[15:51:26] *** Quits: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP) (Ping timeout)
[15:51:32] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[15:53:35] <TobiasFar> How LTO friendly are the C libraries one can build with rust? Could a linker remove parts of it that aren't used?
[15:53:47] *** Quits: jamil_1 (kvirc@64EB6BA1.46409B70.F6DA161.IP) (Ping timeout)
[15:54:51] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[15:55:08] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[15:55:08] *** Joins: jamil_1 (kvirc@64EB6BA1.46409B70.F6DA161.IP)
[15:57:47] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:58:40] <bstrie> wycats: I like those slides. will the talk be online somewhere?
[16:00:33] *** Joins: Pac (textual@moz-1DF9CFB3.static.asianet.co.th)
[16:00:53] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:01:03] *** Quits: Pac (textual@moz-1DF9CFB3.static.asianet.co.th) (Quit: Textual IRC Client: www.textualapp.com)
[16:01:49] <nooblit> Ok, I was learning c++ for first time, what is the point of a constructor ? All I see is this http://pastebin.com/krGd9KR3 , Does it offer better Encapsulation ? 
[16:02:15] *** Joins: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP)
[16:02:20] <nooblit> It looks redundant in main... 
[16:02:41] <Tari> in that simple example, it doesn't offer much
[16:02:56] <Tari> if there's internal state that needs to be set up, it's a good place to do so
[16:02:58] *** Joins: erickt (Adium@991D7890.9C346C7F.FAA4474F.IP)
[16:03:33] <bstrie> wycats: my only comment is that, on the slides with both rust and C code, some visual separation between the two would be nice
[16:04:14] <bstrie> TobiasFar: the compiler has its own LTO pass, but it's not on be default. what do you mean by "C libraries that you can build with rust"?
[16:04:20] <nooblit> O it must be because I'm following this http://miburl.com/njUp53 tutorial, maybe he was just trying to keep it simple not to confuse people but, I see what he did, I just don't understand why I would want to use a constructor?
[16:04:49] <bstrie> nooblit: well, this isn't a C++ channel :)
[16:05:00] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[16:05:45] <nooblit> Yeah, sorry bstrie, I only learning C++ so I can learn Rust but I should find a C++ channel for my questions.
[16:05:57] <bstrie> nooblit: wait! you don't need to learn C++ to learn rust
[16:06:10] <bstrie> nooblit: what programming languages do you know?
[16:06:14] <nooblit> None
[16:06:21] <Ms2ger> That's not a lot :)
[16:06:28] <bstrie> nooblit: then I would recommend neither rust nor C++ as your first programming language :)
[16:06:30] <nooblit> lol :)
[16:06:36] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[16:06:36] <SiegeLord> I guess the only way you'd know what not being stabbed feels like is to stab yourself first..
[16:06:37] <TobiasFar> bstrie: well...one can tell rustc to do standard C mangling for some function to have a C API that any C/C++ code can use. Now imagine a rust lib implementing A, B and C and an app linking to the lib just uses A. Could LTO remove the code of B and C, which A doesn't depend on? i hope the idea is clear
[16:07:26] <bstrie> TobiasFar: I don't see any reason why a linker couldn't LTO unused rust code, but I'm not an expert...
[16:07:35] *** Joins: guest (Mibbit@661EECCF.80BB6BFD.DDE5D3F6.IP)
[16:07:49] <TobiasFar> balpert_: ahh..ok
[16:07:59] <guest> does anyone know what this error is saying:
[16:08:00] <guest> error: mismatched types: expected `|fn(i32)|` but found `fn(i32)` (expected extern fn but found i32)
[16:08:02] <TobiasFar> * bstrie
[16:08:10] <Tari> TobiasFar: I think it would work; not sure exactly how rustc handles LTO
[16:08:19] <nooblit> Does Rust have constructors?
[16:08:20] <Tari> but if it's like clang, it just emits bitcode into object files
[16:08:30] <bstrie> Tari: if you're just building a lib for others to use, rustc has nothing to do with LTO
[16:08:41] <TobiasFar> Tari: the LTO wouldn't be done by rust though,
[16:08:51] <Tari> the linker still needs to be LTO-aware, sure
[16:08:53] <bstrie> all it does is make a file with a bunch of symbols. it's up to the linker to remove them if they're unused
[16:09:04] <SiegeLord> That's not really LTO...
[16:09:11] *** Joins: derek_c (derek@moz-98CE89D7.cit.cornell.edu)
[16:09:27] <bstrie> SiegeLord: what is LTO, if not eliding unused code?
[16:09:37] <bstrie> you can't really do any code transformations at that point
[16:09:53] <SiegeLord> LTO is just a funny way of saying don't assemble objects before linking them
[16:09:57] <Tari> gcc/clang -c -flto emits object files with both object code and IR
[16:10:13] <bstrie> interesting
[16:10:17] *** Quits: nooblit (Mibbit@moz-CBA73F0A.dhcp.ftwo.tx.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:10:21] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[16:10:30] <SiegeLord> Rust's rlib's are filled with IR, afaik
[16:10:34] <bstrie> Tari: I'd ask over in #rust-internals to know for sure
[16:10:44] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Client exited)
[16:10:45] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[16:10:48] <guest> what does this mean: error: mismatched types: expected `|fn(i32)|` but found `fn(i32)` (expected extern fn but found i32)
[16:10:51] <bstrie> Tari: or ping acrichto, who knows the most about LTO and linking in rust
[16:10:58] <SiegeLord> But I don't know for sure how to do combined LTO with C libraries
[16:11:01] <bstrie> guest: can we see the code?
[16:11:07] <SiegeLord> It's easy to do LTO in pure rust though
[16:11:15] <guest> bstrie: sure
[16:12:04] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[16:12:06] <guest> bstrie: http://pastebin.com/8iFB7KET
[16:12:09] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[16:12:55] <bstrie> guest: turn `handler: |fn(c_int)|` into `handler: fn(c_int)`
[16:13:11] <TobiasFar> my usecase is just having a C crypto lib, a rust binding + rust lib that implements higher level stuff with the crypto lib and provides a C api. and i don't want the final binary not to include crypto stuff, bindings and stuff, that's never called. but i guess if it's all standard C stuff it should basically work, at least on the level of eliminating unused symbols
[16:13:15] <bstrie> guest: I'm guessing you really don't mean to pass a closure to C?
[16:13:44] <guest> bstrie: what does passing a closure to C mean?
[16:14:03] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:14:09] <bstrie> guest: what is that `signal` function you're calling?
[16:14:28] <dschatzberg> TobiasFar: The final binary should link with the C lib and your lib
[16:14:42] <bstrie> guest: it's a C function, right? can we see its function signature as defined in the C code?
[16:14:47] <guest> right
[16:15:05] <guest> one sec ill try to find it
[16:15:28] <bstrie> guest: when you say `handler: |fn(c_int)|`, what you're saying is "the type of handler is a closure, and that closure accepts a function as its only argument"
[16:15:41] <guest> ohh
[16:15:48] <bstrie> guest: closure types in rust look like |int|->int
[16:15:56] <guest> ok, i dont think i meant to do that
[16:15:57] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Ping timeout)
[16:15:57] <bstrie> or |int| if there's no return value
[16:16:03] <bstrie> or || if there's neither input nor a return value
[16:16:16] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[16:16:18] <guest> gotchya
[16:16:47] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[16:17:09] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[16:18:01] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[16:18:26] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[16:18:27] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[16:19:09] *** Joins: alonlevy (alon@moz-D30DBE36.red.bezeqint.net)
[16:19:28] <guest> bstrie: is there a way to detect Ctrl-C without actually terminating the process?
[16:20:06] <bstrie> guest: that sounds like a property of your shell, I doubt that any program can really listen for ^C
[16:20:07] *** Quits: erickt (Adium@991D7890.9C346C7F.FAA4474F.IP) (Quit: Leaving.)
[16:20:21] <guest> bstrie: ok
[16:20:24] <bstrie> if it's running in the shell, I mean
[16:20:38] <guest> well, the thing is that im trying to create a shell
[16:20:39] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[16:20:45] <bstrie> but maybe, if your program launches its own shell
[16:20:50] <bstrie> well ok then :)
[16:20:59] <guest> and i want to use ctrl-c to destroy the foreground process, not the background process
[16:21:09] <guest> but when i do call ctrl-c, it kills bothh :(
[16:21:18] <guest> so im trying to use the pid to control which process to kill
[16:21:37] <bstrie> guest: hm, I'm not a shell expert, I can't help :)
[16:21:40] <dschatzberg> ctrl-c sends a signal
[16:21:46] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[16:21:46] <dschatzberg> thats the typical implementation
[16:21:52] <guest> so thats why i need to listen for ctrl-c, and when it occurs, i want to use the fn kill to destroy a particular process
[16:22:06] <guest> dschatzberg: but doesnt it also kill the process?
[16:22:24] <dschatzberg> guest: the default signal handler does
[16:22:37] <guest> is there a way to override the default handler?
[16:22:48] <dschatzberg> guest: yes, just like all signals
[16:22:53] <dschatzberg> except 9
[16:23:00] <guest> cool! could you show me how please?
[16:23:04] <guest> or point me to a resource
[16:23:35] *** Quits: kvanb (kvanb@moz-9884B768.lnse2.lon.bigpond.net.au) (Quit: kvanb)
[16:24:05] <dschatzberg> https://stackoverflow.com/questions/4217037/catch-ctrl-c-in-c
[16:24:26] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Client exited)
[16:24:29] <guest> dschatzberg: thanks!
[16:25:35] *** Quits: derek_c (derek@moz-98CE89D7.cit.cornell.edu) (Ping timeout)
[16:28:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:28:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:28:17] *** kimundi is now known as zz_kimundi
[16:28:56] *** Joins: igork (igork@moz-18540A65.broadband.corbina.ru)
[16:29:46] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:29:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:30:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:31:07] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:31:32] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[16:31:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:31:53] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:32:33] <guest> dschatzberg: cuold you take a look at my code snippet?
[16:32:37] *** Quits: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP) (Ping timeout)
[16:32:55] *** Quits: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[16:32:56] <guest> im overriding the default handler, but it isnt acting as expected
[16:33:11] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[16:33:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:33:36] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[16:33:47] <dschatzberg> sure
[16:34:00] <guest> http://pastebin.com/WBH8uXuX
[16:34:42] <guest> the code still kills the process. for ex: when i run ping google.com, it acts as expected, and when i press ctrl-c, with my code, it should just print, but ping should still be outputting right?
[16:34:46] <guest> but it terminates
[16:35:16] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:35:49] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Input/output error)
[16:36:17] <dschatzberg> ok sec
[16:36:34] <guest> k
[16:36:51] <guest> btw this is a small snippet of my program
[16:37:29] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[16:37:44] <dschatzberg> signal will just set the handler, return and then main will terminate
[16:38:01] <dschatzberg> so if you add an infinite loop afterwards then you can test it
[16:38:20] <guest> oh ok
[16:38:21] *** Joins: Ferreus (ferreus@moz-53B82F11.pools.arcor-ip.net)
[16:38:57] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:38:59] *** Quits: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP) (Quit: Read error: Connection reset by peer)
[16:39:00] <dschatzberg> you will have to kill -9 the process fyi
[16:39:26] <guest> what do you mean?
[16:39:44] <dschatzberg> go ahead and test and you will see that you have no way of terminating the process with ctrl-c
[16:39:57] <guest> ok
[16:39:59] *** Quits: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP) (Ping timeout)
[16:40:54] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[16:41:14] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[16:41:58] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[16:42:15] *** Joins: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net)
[16:42:34] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[16:43:11] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:43:15] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:43:44] *** Joins: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP)
[16:46:01] <guest> dschatzberg: even after an infinite loop after it, it still behaves the same
[16:46:12] <guest> wierd huh
[16:46:19] <dschatzberg> if you just run it, then it terminates?
[16:46:23] <dschatzberg> without ctrl c
[16:47:07] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Client exited)
[16:47:17] <guest> i can run my program with the code snippet i have, but when i press ctrl-c it terminates the current process, even though in the handler, all i have is a print statement
[16:47:41] <guest> so in my program, i start a process (ex: ping google.com)
[16:47:52] <guest> it starts outputting the expected output about packets...
[16:47:58] *** Joins: Kxepal832 (Miranda@moz-1E141C63.pppoe.mtu-net.ru)
[16:48:04] <guest> then when i press ctrl-c, it terminates ping
[16:48:12] <guest> even though the handler just has a print statement, 
[16:48:20] <guest> and not a kill statement
[16:48:24] *** Quits: Kxepal (Miranda@moz-C2AD231E.pppoe.mtu-net.ru) (Ping timeout)
[16:48:30] <guest> am i misunderstanding how this works?
[16:48:46] <dschatzberg> does that snippet you linked behave the same way though?
[16:48:54] <guest> yes
[16:49:12] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[16:49:44] <guest> mind you, in my example i just gave, it terminates ping, not my shell program
[16:50:51] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:51:08] <dschatzberg> sec
[16:51:14] <guest> k
[16:51:30] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[16:52:42] <dschatzberg> I just tried the code you pasted earlier adding an infinite loop and it prints instead of dieing when I hit ctrl c
[16:52:54] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[16:52:54] *** ChanServ sets mode: +ao dherman dherman
[16:53:10] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Client exited)
[16:53:29] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[16:53:46] <dschatzberg> http://pastebin.com/KmQERDWc
[16:54:13] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[16:54:17] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:54:37] <guest> dschatzberg: ok, ill debug. thanks for your help!
[16:54:39] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[16:55:13] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:55:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:55:59] <dschatzberg> guest: the interaction is slightly different when you are using child processes which I'm guessing is how your ping is working, but first get just a basic signal handler
[16:56:50] <guest> dschatzberg: exactly, my ping is created as a new process
[16:57:01] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:57:40] <guest> dschatzberg: i should mention that my current signal handler prints out the print statement i have in my handler, but it also terminates the process lol
[16:58:04] <dschatzberg> yeah the child process will catch the signal and run its own handler
[16:58:09] <guest> ahhh
[16:58:20] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:58:24] <dschatzberg> fortunately you can fix it without much work
[16:58:25] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[16:58:47] <guest> so here is where i check the process id, and only kill the process i want by passing the pid into the kill function (http://static.rust-lang.org/doc/master/std/libc/funcs/posix88/signal/ffi.kill.html)
[16:59:38] <guest> that way, the handler will only respond after it checks a pid that i set
[16:59:56] <dschatzberg> well what you want to do is first block SIGINT in your main process, then fork the child process, then set SIGINT to your handler
[17:00:06] *** Quits: Kxepal832 (Miranda@moz-1E141C63.pppoe.mtu-net.ru) (Quit: Kxepal832)
[17:00:11] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[17:00:15] <dschatzberg> child processes inherit signal disposition of their parents, so if you block first then fork, your child will block that signal
[17:00:22] <guest> git it
[17:00:24] *** Joins: Kxepal (Miranda@moz-1E141C63.pppoe.mtu-net.ru)
[17:00:24] <guest> got it
[17:00:41] <guest> thanks again. ill work on it
[17:03:08] *** Joins: mye (mye@moz-7FA8ED48.dip0.t-ipconnect.de)
[17:04:44] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[17:04:52] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[17:05:41] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:06:13] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:06:28] *** Joins: onelson (onelson@moz-DD666EC5.laika.com)
[17:06:45] *** Quits: guest (Mibbit@661EECCF.80BB6BFD.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:06:51] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[17:07:36] *** Joins: apoelstra (username@moz-45D66F9F.public.utexas.edu)
[17:08:01] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[17:08:01] *** ChanServ sets mode: +o tjc
[17:08:18] *** Quits: halleck (a@moz-99121734.dynamic.mnet-online.de) (Quit: Leaving)
[17:09:09] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:09:10] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[17:09:11] *** Quits: kostya (kostya@245B4295.D4C8665D.65FC93DD.IP) (Client exited)
[17:09:16] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[17:09:16] <kuuranne> /w/win 5
[17:09:25] <kuuranne> oops :)
[17:10:32] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[17:13:32] *** Quits: victorporof (victorporo@A25D388F.40CECF1B.35C8D440.IP) (Ping timeout)
[17:14:37] <eibwen> is there a static assert macro?
[17:15:59] <bstrie> eibwen: I think there is...
[17:16:38] <eibwen> oh and is there an issue about mem::size_of::<T> not being a constant expresion to the compiler
[17:16:42] *** Joins: richo (richo@10726D5F.1B04FC3.5CC412D0.IP)
[17:16:54] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Client exited)
[17:16:57] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[17:17:08] <bstrie> eibwen: we've reserved the sizeof keyword for this purpose, but not implemented it yet afaik
[17:17:20] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[17:17:24] <eibwen> that's why sizeof is highlighted red in my editor
[17:17:30] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: This bear's gotta fly.)
[17:17:31] <eibwen> oh :)
[17:17:54] <diverse> heh
[17:20:09] <eibwen> where are the conventions for into, unwrap, etc. documented?
[17:20:29] <diverse> in std
[17:21:21] <diverse> just click in and search
[17:21:38] *** Quits: jamil_1 (kvirc@64EB6BA1.46409B70.F6DA161.IP) (Ping timeout)
[17:21:38] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[17:23:23] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[17:23:40] *** Quits: sk_ (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[17:23:50] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[17:23:58] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:23:59] *** Joins: derek_c (derek@moz-B784A75D.cit.cornell.edu)
[17:25:13] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:25:21] <jasom> Is there a ctags (or even better, cscope) that tracks current rust?
[17:25:25] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Connection reset by peer)
[17:25:37] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[17:26:33] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[17:26:34] <doomlord_> https://github.com/dobkeratops/rustfind << i'll plug this whilst you're asking about that sort of thing, but i haven't updated it in ages
[17:26:43] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Ping timeout)
[17:26:58] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:27:11] <pongad> cmr: Saw your comment on my PR, do you have a second?
[17:27:11] <doomlord_> not ctags but it turns rust source into linked html for navigating source code, it knows more context than ctags
[17:27:35] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[17:27:38] <jasom> hmm, looks like I could build a cscope db out of that
[17:27:48] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[17:28:09] <acrichto> eibwen: you can add #[static_assert] to a static bool and it'll be a compiler error if it's false
[17:28:21] <acrichto> rusti: #[static_assert] static foo: bool = false;
[17:28:23] -rusti- pastebinned 7 lines of output: http://ix.io/amr
[17:28:29] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[17:28:30] *** Joins: catilac (catilac@F648056F.84EA6C01.A4C6EED1.IP)
[17:28:32] <eibwen> ah nice
[17:28:45] <eibwen> semi-nice
[17:28:53] <eibwen> 'code is never used' should be silenced
[17:28:55] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:28:55] *** ChanServ sets mode: +ao brson brson
[17:29:05] <cmr> eibwen: well, it's true..
[17:29:12] <cmr> pongad: sure what's up?
[17:29:12] <eddyb> IMO should be a macro
[17:29:31] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[17:29:40] <eddyb> wait, it can be a macro: procedural macros can generate unique idents
[17:30:11] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[17:30:56] <pongad> cmr: Problem I found with implementing default min/max for `Ord`
[17:31:03] *** Quits: derek_c (derek@moz-B784A75D.cit.cornell.edu) (Quit: Leaving)
[17:31:14] <pongad> cmr: [T] impl Ord if T does, right?
[17:31:36] <pongad> So, [f64] has two min/max's one from Ord and one from Stats
[17:31:52] <pongad> Not quite sure how client code will disambiguate that
[17:32:31] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:32:47] <doomlord_> jasom, i'm not familiar with cscope but i'm open to ideas for extensions , in what this spits out
[17:32:55] <cmr> pongad: you `use` the trait you want the methods from.
[17:33:02] *** Quits: m-r-r (mrr@moz-F7548D46.rev.sfr.net) (Ping timeout)
[17:33:06] <cmr> pongad: methods are only in scope if the trait that defines them are in scope.
[17:33:07] *** Joins: bt3ze (bt3ze@9762A03F.B8CF995A.DDE5D3F6.IP)
[17:33:14] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:33:14] <adridu59> acrichto: I would like to look into #9981, could you give me pointers? https://github.com/mozilla/rust/issues/9981
[17:33:21] *** Quits: bt3ze (bt3ze@9762A03F.B8CF995A.DDE5D3F6.IP) (Quit: )
[17:33:23] <cmr> rusti: ~5
[17:33:24] -rusti- ~5
[17:33:29] <cmr> adridu59: have a pointer :3
[17:33:35] <eibwen> cmr: read is only in scope if Reader is in scope? or only if Reader.read is in scope?
[17:33:43] <cmr> eibwen: Reader
[17:33:45] <diverse> cmr: clever
[17:34:02] <acrichto> adridu59: it may have been fixed, the things in search changed recently and it may be fixed now
[17:34:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:34:08] <eibwen> cmr: what happens if I need both?
[17:34:15] <pongad> ^
[17:34:17] <adridu59> acrichto: try searching for `Eq` or `drop`
[17:34:32] <cmr> eibwen: not a problem that has a solution right now, but UFCS is the eventual solution
[17:34:46] <acrichto> adridu59: ah, hm, there's something wrong in the search index generation
[17:34:46] <eibwen> fancy acronyms
[17:34:48] <cmr> Ord::min(foo, bar), Statis::min(whatever)
[17:34:49] <eibwen> what's UFCS?
[17:34:50] <adridu59> acrichto: sfackler spoke about `sleep` and that one seems to not error anymore through
[17:35:01] <pongad> Unifrom Function Call Syntax
[17:35:01] <acrichto> adridu59: I think that something is in the search index but not in a global parents array or something like that
[17:35:02] <cmr> Uniform (or Universal) Function Call Syntax
[17:35:08] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[17:35:09] <pongad> Borrowed from D, I think?
[17:35:10] <diverse> cmr: oh sweet
[17:35:11] <cmr> The ability to call methods as functions.
[17:35:23] <SiegeLord> D uses the same term for the inverse operation
[17:35:26] <adridu59> acrichto: what part of the rustdoc code is relevant for that?
[17:35:35] <SiegeLord> It's very helpful to use that term in Rust too ;)
[17:35:36] <acrichto> adridu59: at the top of html/render.rs
[17:35:37] <pongad> SiegeLord: Oh right
[17:35:37] *** Joins: mib_b7xhea (Mibbit@moz-4D3A818.bootp.virginia.edu)
[17:35:38] <adridu59> cmr: pointy
[17:35:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:36:17] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[17:36:28] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:36:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:36:48] <adridu59> acrichto: ok
[17:36:53] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:38:37] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[17:39:13] <pzol> if you implement the Default trait, how do you call/use it afterwards?
[17:39:44] *** Quits: assaf__ (assaf@4772CF81.9F1465BE.9E22F775.IP) (Quit: Leaving)
[17:40:16] <cmr> pzol: Default::default()
[17:40:28] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:40:32] *** Joins: robhobbes (Mibbit@FC24D562.62880861.F47F4656.IP)
[17:41:07] <pzol> cmr so for impl Default for MyStuff MyStuff::default() should work, right?
[17:41:15] <cmr> pzol: no
[17:41:23] <cmr> let x: MyStuff = Default::default()
[17:41:28] <pongad> cmr: So, `std::cmp::Ord::min` method should only be in scope if `std::cmp::Ord` is, right?
[17:41:33] <cmr> pongad: yes.
[17:41:48] <cmr> pongad: (but, it's in the prelude, so it's always in scope)
[17:41:54] <pongad> Crud
[17:42:00] <pzol> cmr aaa ok, thanks!
[17:42:08] *** Quits: robhobbes (Mibbit@FC24D562.62880861.F47F4656.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:42:12] <pongad> cmr: Is there a way to force it off scope? :D
[17:42:15] <cmr> but you should be able to `use whatever::Stats` to override it
[17:42:42] <adridu59> is `not_utf8` gone?
[17:42:50] <cmr> adridu59: all conditions are.
[17:42:57] <cmr> pongad: #[no_implicit_prelude]
[17:43:02] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[17:43:09] <cmr> pongad: should disable prelude injection for a given item...
[17:43:15] <pongad> Oh, as in put `use extra::Stats` "closer" than the `use std::cmp::Ord`?
[17:43:21] <cmr> yeah
[17:43:54] <adridu59> cmr: there are quite some issues that got obsoleted then
[17:44:01] <adridu59> cmr: https://github.com/mozilla/rust/issues/9889
[17:44:07] <SiegeLord> I wonder how slow Result chaining is...
[17:44:12] <adridu59> or https://github.com/mozilla/rust/issues/8968
[17:44:50] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[17:46:01] <pongad> cmr: Is this the right usage? It does not seem to work. /// Construct a new summary of a sample set.     #[no_implicit_prelude]     pub fn new(samples: &[f64]) -> Summary {         Summary {             sum: samples.sum(),             min: samples.min(),             max: samples.max(),             mean: samples.mean(),             median: samples.median(),   
[17:46:24] <pongad> cmr: Sorry http://pastebin.com/YiT0Nm9g
[17:46:51] *** Joins: nrc|waitangiday (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:47:46] <cmr> pongad: I think no_implicit_prelude needs to go on a mod
[17:48:31] *** Quits: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP) (Client exited)
[17:48:37] <engstad> Is there an immutable hash-map implementation (or any other like red-black trees)?
[17:48:46] *** Joins: robhobbes (robert@FC24D562.62880861.F47F4656.IP)
[17:48:58] *** nrc|waitangiday is now known as nrc
[17:49:27] <pongad> cmr: Then I just add the necessary use's by hand right?
[17:49:31] <eibwen> rusti: fn f(data: &[i32]) { let mut copy = data.clone(); copy[0] = 1; }
[17:49:32] -rusti- <anon>:10:59: 10:66 error: cannot assign to immutable vec content
[17:49:32] -rusti- <anon>:10         fn f(data: &[i32]) { let mut copy = data.clone(); copy[0] = 1; }
[17:49:32] -rusti-                                                                     ^~~~~~~
[17:49:32] -rusti- error: aborting due to previous error
[17:49:33] -rusti- application terminated with error code 101
[17:49:41] <eibwen> I explicitely made a mutable copy
[17:49:44] <eibwen> why can't I write to it?
[17:50:14] *** Joins: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net)
[17:50:28] <cmr> eibwen: The type signature of clone is fn clone(&self) -> Self
[17:50:33] <cmr> eibwen: Self here is &[i32]
[17:50:40] <cmr> eibwen: so you just copied the slice.
[17:50:47] <cmr> cloned the slice, rather
[17:50:52] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[17:50:53] <cmr> you didn't create a new vector.
[17:51:14] *** Joins: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP)
[17:51:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:51:35] <igork> rusti: fn f(data: &[i32]) { let mut copy = (*data).clone(); copy[0] = 1; } // just curious :)
[17:51:35] -rusti- <anon>:10:46: 10:51 error: type `&[i32]` cannot be dereferenced
[17:51:36] -rusti- <anon>:10         fn f(data: &[i32]) { let mut copy = (*data).clone(); copy[0] = 1; } // just curious :)
[17:51:36] -rusti-                                                        ^~~~~
[17:51:36] -rusti- error: aborting due to previous error
[17:51:36] -rusti- application terminated with error code 101
[17:51:42] *** Joins: astroch (astroch@E12B0876.BB968208.DDE5D3F6.IP)
[17:51:47] <robhobbes> cmr: Is anyone working on rust-mustache currently?
[17:51:48] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[17:51:52] <eibwen> 1) I don't get it. 2) how can I actually copy the vector?
[17:52:02] <cmr> eibwen: .to_owned()
[17:52:33] <cmr> robhobbes: dunno. it's erickt's project. is it out of date?
[17:52:38] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[17:53:07] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:53:10] <robhobbes> cmr: it looks like it hasn't been worked on in a while, but it is 0.9 compliant. I wonder if he'll update it when 0.10 is released
[17:53:24] <cmr> robhobbes: he'll probably update now if you ask :)
[17:53:31] <cmr> robhobbes: (or send a pull request)
[17:53:48] <SiegeLord> Hmm, chaining Results tends to require cloning the error message :/
[17:54:08] <SiegeLord> Is there an escape hatch for 'cannot move out of dereference of & pointer'
[17:54:25] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[17:54:26] <robhobbes> cmr: yeah. I need to learn more about the package manager and stuff. right now if I type make it says "Package mustache depends on std, but I don't know how to find it"
[17:54:39] <robhobbes> cmr: not really sure what that means
[17:54:50] <cmr> robhobbes: it shouldn't be using rustpkg, it has been removed on master :(
[17:55:01] <bvssvni> SiegeLord: it depends, gist?
[17:55:20] *** Joins: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP)
[17:55:25] <robhobbes> cmr: maybe I can figure out how to build it without rustpkg
[17:55:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:56:08] <cmr> robhobbes: should just be rustc lib.rs
[17:56:16] <cmr> robhobbes: it might need a crate_id
[17:56:21] <SiegeLord> bvssvni: https://gist.github.com/SiegeLord/8849273
[17:56:28] <olsonjeffery> cmr: heh, sorry.. so about cargo-lite
[17:56:32] <olsonjeffery> what's up with that?
[17:56:42] <cmr> olsonjeffery: I don't 100% know exactly what it does..
[17:56:49] <cmr> it *should* be searching the PATH?
[17:57:13] *** Joins: rcxdude (rcxdude@moz-394D851.nat.csx.cam.ac.uk)
[17:57:27] <bvssvni> SiegeLord: what is the compiler error? match *self?
[17:57:36] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:58:25] *** Quits: rcxdude (rcxdude@moz-394D851.nat.csx.cam.ac.uk) (Quit: Konversation terminated!)
[17:58:32] *** Joins: rcxdude (rcxdude@moz-394D851.nat.csx.cam.ac.uk)
[17:58:43] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:58:43] *** ChanServ sets mode: +ao dherman dherman
[17:59:18] <olsonjeffery> cmr: hm. putting a symlink to rustc in /usr/bin didn't work
[17:59:34] <eibwen> fn read(data: &[i32]) -> SomeStruct { unsafe { cast::transmute(data) } }
[17:59:36] <eibwen> is this safe?
[17:59:49] <Ms2ger> It says "unsafe"
[17:59:52] *** Quits: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Quit: calvinmetcalf)
[18:00:02] <eibwen> or do I need to call cast::transmute(data).clone() so rust doesn't consider data to be moved out
[18:00:08] <diverse> Ms2ger: lol
[18:00:13] <eibwen> =)
[18:00:15] <bvssvni> SiegeLord: ok, the ~str
[18:00:17] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[18:00:19] <SiegeLord> bvssvni: Line 20
[18:00:33] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:00:33] *** ChanServ sets mode: +ao brson brson
[18:00:56] <bvssvni> SiegeLord: when you call match *self it moves
[18:01:28] <eibwen> oh
[18:01:29] <olsonjeffery> cmr: heh. unhelpful error.. was missing sh
[18:01:31] <eibwen> I wanted to write
[18:01:34] <SiegeLord> I know what happens, I want a workaround
[18:01:37] <cmr> olsonjeffery: oh, heh
[18:01:37] <olsonjeffery> interesting that it choked on rustc and not git or hg
[18:01:41] <bvssvni> SiegeLord: you need an owned pointer, instead of &'l
[18:01:45] <eibwen> fn read(data: &[i32]) -> SomeStruct { unsafe { cast::transmute(*data.as_ptr()) } }
[18:01:48] <rcxdude> Doing println!(format!("")) seems to throw the compiler into an infinite loop. Is this a known issue or should I stick it on github?
[18:01:50] <cmr> olsonjeffery: well it doesn't require that git or hg get imported.
[18:02:01] <cmr> olsonjeffery: it wraps the import in a try/catch that defines a function that tosses an error instead.
[18:02:06] *** Parts: robhobbes (robert@FC24D562.62880861.F47F4656.IP) ()
[18:02:14] <olsonjeffery> cmr: ah you're right
[18:02:24] <rcxdude> a cursory search didn't show anything but I wasn't sure if it was a general issue with macros or that specifically
[18:02:40] <diverse> eibwen: looks good
[18:02:55] <bvssvni> SiegeLord: change to 'trait Doer { fn func1(~self) ... }
[18:03:06] <cmr> olsonjeffery: I'm almost done rewritting cargo-lite btw, but functionality shouldn't change
[18:03:10] <eibwen> diverse: thanks
[18:03:58] <SiegeLord> bvssvni: That's not really a solution
[18:04:27] <bvssvni> SiegeLord: are you using the Result somewhere else?
[18:04:29] <cmr> SiegeLord: the workaround is cloning...
[18:04:36] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:04:36] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:04:40] <SiegeLord> Is Rc what I'm looking for?
[18:04:50] <cmr> SiegeLord: not being able to move out of &T is, like, fundamental to rust's safety
[18:04:57] *** Quits: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net) (Client exited)
[18:04:59] <olsonjeffery> cmr: sweet, i forked it, so ill stay sync'd
[18:05:39] <bvssvni> SiegeLord: if you are chaining and not using it somewhere else, an owned pointer is fine
[18:05:40] <SiegeLord> cmr: So's not aliasing &mut, yet Cell exists :P
[18:06:07] <cmr> SiegeLord: Well I mean, you could use Option<T> and .take
[18:06:29] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[18:06:31] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:06:35] *** Joins: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net)
[18:08:28] <bvssvni> SiegeLord: I do not see the point of using a lifetime constraint here, you don't need to reallocate the str.
[18:09:08] <SiegeLord> Try removing lifetimes and see if it compiles ;)
[18:09:23] <bvssvni> SiegeLord: ok, I'll try
[18:10:10] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[18:10:52] <wycats> bstrie: sadly no
[18:11:08] <wycats> it was not recorded
[18:11:12] <wycats> and yes, re: C code
[18:11:24] *** Joins: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net)
[18:12:15] <pzol> How do I provide a lifetime for an impl? struct Foo<'a> { name: &'a str } \n impl Foo<'a> { fn bar() {} } -> error: use of undeclared lifetime name `'a`
[18:13:02] *** Joins: exobit (foo@moz-37C6BBB2.corp.bitshelter.com)
[18:13:02] <bvssvni> SiegeLord: you are trying to avoid cloning of T?
[18:13:22] <SiegeLord> No, just the error text
[18:13:26] <cmr> pzol: impl<'a> Foo<'a>
[18:13:56] <pzol> cmr thanks :)
[18:14:04] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[18:14:52] *** Quits: astroch (astroch@E12B0876.BB968208.DDE5D3F6.IP) (Connection reset by peer)
[18:15:03] *** Joins: astroch (astroch@E12B0876.BB968208.DDE5D3F6.IP)
[18:15:39] *** Joins: FreeFull (freefull@moz-1883929A.as13285.net)
[18:16:22] <SiegeLord> Well, actually cloning T would defeat the whole point too
[18:16:52] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[18:16:52] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Client exited)
[18:17:12] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:17:16] <pcwalton> are destructors never cross crate inlined???
[18:17:28] <bvssvni> SiegeLord: I think the problem is when .func1 is called
[18:17:38] *** Quits: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net) (Quit: Leaving)
[18:18:03] <pcwalton> yeah, I guess not
[18:18:05] <pcwalton> that's terrible
[18:18:16] <bvssvni> SiegeLord: trying to rewrite it without pointers, and get the same message
[18:18:20] <pongad> cmr: Do you think it's possible to wait till UFCS lands before adding default min/max/clamp methods? Adding it right now is affecting a lot of code and kind of difficult to refactor.
[18:18:26] <diverse> pcwalton: :(
[18:18:59] <cmr> pongad: sure, just open an issue and add a FIXME in Ord
[18:19:22] <bvssvni> SiegeLord: got something that compiles now, will try to add back the pointers
[18:19:47] *** pmoore is now known as pmoore|away
[18:20:26] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Ping timeout)
[18:20:48] <pongad> cmr: K, but now that I think of it, are they even necessary. We already have cmp::min(x,y)
[18:21:03] <bstrie> pcwalton: can we.... fix that?
[18:21:10] <pcwalton> bstrie: we should!
[18:21:20] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[18:21:34] *** Joins: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net)
[18:21:34] <bstrie> pcwalton: I only ask because it seems like destructors are weird in a million ways and I've lost track of how magical they are :P
[18:21:50] <diverse> bstrie: pft, heh
[18:22:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:22:08] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[18:22:14] <bstrie> something about not knowing what receiver type to give them, something about zeroing, something about disallowing early calls to drop
[18:22:24] <bstrie> something about drop flags
[18:22:31] <bstrie> something about unsafe_drop
[18:22:41] <pcwalton> bstrie: 31% of selector matching in servo is spent in Arc::glue_drop
[18:22:45] <pcwalton> or smallvec::glue_drop
[18:22:48] <pcwalton> adding #[inline] didn't fix it
[18:22:53] <pcwalton> I guess we ignore it
[18:24:20] *** Joins: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP)
[18:24:24] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:26:22] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[18:26:35] *** Quits: catilac (catilac@F648056F.84EA6C01.A4C6EED1.IP) (Quit: Linkinus - http://linkinus.com)
[18:28:27] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[18:28:29] <bvssvni> SiegeLord: seems to be a problem when one tries to pass on lifetime when calling func1
[18:28:39] <SiegeLord> Heh
[18:28:48] <SiegeLord> I'll just clone for now and profile it later
[18:28:58] <SiegeLord> Otherwise I'll just stick with fail!'s
[18:29:00] <tiernjo> I keep getting a "lookup_item: id not found: 133000" error since yesterday, both my builds and from a ppa
[18:29:05] <tiernjo> any suggestions
[18:29:09] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[18:29:20] *** Quits: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net) (Client exited)
[18:29:30] *** Joins: alexherbo2 (alexherbo2@moz-33868228.w90-35.abo.wanadoo.fr)
[18:30:29] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[18:30:55] *** Quits: exobit (foo@moz-37C6BBB2.corp.bitshelter.com) (Ping timeout)
[18:31:01] <bvssvni> SiegeLord: one solution might be to not use pointers at all, and inline all the functions
[18:33:34] *** jorendorff is now known as jorendorff_away
[18:34:24] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:34:43] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:34:45] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[18:34:52] *** Joins: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[18:35:02] <SiegeLord> That doesn't really sound related :P
[18:35:12] <SiegeLord> I could have static strings for error messages though, hah
[18:35:16] <bvssvni> SiegeLord: added a comment https://gist.github.com/SiegeLord/8849273
[18:36:03] *** Quits: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net) (Quit: Leaving.)
[18:36:35] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[18:36:49] <bvssvni> SiegeLord: not sure if that will be faster, if T becomes copied
[18:37:21] *** Quits: brendan (brendaneic@9E9221B0.60D98710.CE12DF22.IP) (Quit: brendan)
[18:37:33] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[18:37:37] *** jorendorff_away is now known as jorendorff
[18:37:49] *** Joins: jamil_1|2 (kvirc@EED3479.3C091628.3D6CCABD.IP)
[18:38:05] *** Joins: mreca (mreca@4F8DC321.10591AD7.DDE5D3F6.IP)
[18:39:19] *** Joins: m-r-r (mrr@moz-F7548D46.rev.sfr.net)
[18:39:32] *** Joins: fabiand (fabiand@moz-35FDE3BA.hotelavanti.cz)
[18:40:06] <Zr40> what could cause `extern mod foo; use foo::bar;` to fail with 'error: unresolved import. maybe a missing `extern mod foo`?' ?
[18:41:00] <bvssvni> Zr40: gist?
[18:41:34] *** Joins: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP)
[18:42:45] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[18:43:36] <Zr40> bvssvni: I'm trying to get rust-openssl to compile, so I've replace the first line of https://github.com/sfackler/rust-openssl/blob/master/ssl/mod.rs with https://gist.github.com/zr40/41d78334662c51716b7b
[18:44:36] *** Quits: lucian_ (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:45:11] <Zr40> bvssvni: this is with a fresh rust compiled from master 4 hours ago
[18:46:02] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:46:05] *** Quits: mreca (mreca@4F8DC321.10591AD7.DDE5D3F6.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:46:12] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Quit: Ex-Chat)
[18:46:56] *** Quits: moostik (Icedove@moz-13458D93.w81-249.abo.wanadoo.fr) (Ping timeout)
[18:46:59] <sfackler> Zr40: All of the synchronization stuff was just split out of extra into it's own library. I haven't had a chance to update it yet
[18:47:18] <sfackler> if you have it compiling, feel free to send a PR, or i'll fix it up when I get home tonight
[18:47:46] *** Quits: fabiand (fabiand@moz-35FDE3BA.hotelavanti.cz) (Quit: Verlassend)
[18:48:04] <bvssvni> Zr40: check the lib directory, maybe there is a dependency collision?
[18:48:26] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:48:34] <sfackler> Zr40: you'll want to move the "extern mod sync" to lib.rs
[18:48:54] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[18:48:57] <sfackler> since it otherwise puts the "sync" module inside of the "ssl" module
[18:48:59] <Zr40> sfackler: ah, that's probably it
[18:49:06] *** Quits: vmx_ (vmx@moz-1C9FA1C2.dip0.t-ipconnect.de) (Quit: Leaving)
[18:49:46] *** Quits: astroch (astroch@E12B0876.BB968208.DDE5D3F6.IP) (Ping timeout)
[18:50:38] <Zr40> sfackler: right, that works
[18:51:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:51:41] <Zr40> sfackler: any idea why rust-postgres can't find the phf_map! macro?
[18:52:28] <sfackler> is there a dynamic library version of phf_mac in submodules/rust-phf/build?
[18:52:41] <sfackler> a .so or .dylib depending on your OS
[18:52:46] *** Joins: amir (amir@moz-467F7F30.cust.bluewin.ch)
[18:52:51] <Zr40> yes
[18:53:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:53:30] <sfackler> it should be finding it then, is that directory passed to rustc when it builds libpostgres?
[18:53:43] <sfackler> should have a "-L submodules/rust-phf/build"
[18:53:46] *** Joins: mgottschlag (quassel@moz-7841FD83.cust.bluewin.ch)
[18:54:08] <Zr40> yes, with a trailing /
[18:54:26] <sfackler> hmm, it should be okay then :/
[18:54:33] <sfackler> are you cross compiling or anything like that?
[18:54:55] <Zr40> no
[18:55:26] <sfackler> maybe just do a "make clean clean-deps && ./configure && make"
[18:55:41] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[18:56:10] *** Joins: jdm (jdm@3352147E.CB4C8069.74119F78.IP)
[18:56:10] *** ChanServ sets mode: +o jdm
[18:56:12] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:56:16] <Zr40> no change
[18:56:24] *** Joins: jeffdb (jeffbelg@moz-ABCAA64B.efi.com)
[18:57:11] <sfackler> hmm, could you open an issue on rust-postgres and put the console output of that command on there?
[18:57:19] <Zr40> will do
[18:58:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:58:03] <olsonjeffery> ah, bummer. no current/well-maintained msp430 backend for llvm :/
[18:58:35] <sfackler> Zr40: fyi, rust-postgres will very much not build right now since I haven't finished updating it for the IO API changes
[18:58:39] <olsonjeffery> i was interested in playing with writing rust for that platform (came across it in the microcorruption.com CTF)
[18:59:17] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[18:59:26] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:59:57] *** Joins: rca_ (rcatolino@moz-81882D6F.adsl.proxad.net)
[19:00:10] *** pmoore|away is now known as pmoore
[19:00:14] *** Joins: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[19:00:36] <Tari> I've wanted to try out the MSP430 backend for some of my projects
[19:00:52] <Tari> but can't be bothered to build a clang that will use the correct assembler
[19:01:22] *** Quits: rca (rcatolino@moz-312D09C6.adsl.proxad.net) (Ping timeout)
[19:01:45] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[19:02:14] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[19:02:39] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:02:52] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[19:03:33] <olsonjeffery> Tari: is there an official backend? i just dug around and didn't find anything well-maintained for llvm (all stuff from 2012 or 2010)
[19:03:42] <olsonjeffery> i know gcc has a mature backend for the msp430
[19:03:47] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[19:03:50] *** zz_kimundi is now known as kimundi
[19:03:59] <Zr40> sfackler: heh. Seems the same is going on with rust-http
[19:04:24] <pcwalton> acrichto: enum padding copying fix landed in upstream llvm 
[19:04:34] <acrichto> pcwalton: nice!
[19:04:47] <acrichto> I hope they haven't turned on c++11 just yet
[19:05:04] <Tari> olsonjeffery: the llvm web site mentions MSP430, and mainline clang will happily target it
[19:05:18] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:05:22] <Tari> how good it actually is, I have no idea
[19:05:33] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[19:05:39] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:05:39] *** ChanServ sets mode: +ao brson brson
[19:05:57] <olsonjeffery> Tari: ah, right you are!
[19:06:17] <Tari> I just haven't tried it because clang is not very useful for cross-compiling
[19:06:35] <Tari> it always uses your host's assembler; need to build it configured for the target
[19:07:08] *** Joins: janx (uid16602@moz-A42E5B7B.irccloud.com)
[19:07:19] <Tari> or emit bitcode and push that through llc yourself, but then linking gets hairy
[19:07:19] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[19:09:01] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[19:10:03] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[19:10:24] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:10:39] <olsonjeffery> Tari: that's already part of the embedded rust workflow on other platforms, ive gathered
[19:10:53] <olsonjeffery> i think im gonna get a msp430 smartwatch reference platform my bday, here in a few weeks
[19:11:01] <olsonjeffery> for my bday*
[19:11:19] <olsonjeffery> (the emmitng llvm bitcode and manually running it through llc)
[19:11:51] *** Quits: teosz (teosz@29C55908.B03D64EE.3EA6AAD8.IP) (Quit: Lost terminal)
[19:12:38] <mcpherrin> Tari: I've heard from clang/llvm people msp430 support is barely usable
[19:12:54] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[19:13:15] <Tari> just building something is hard enough, that doesn't suprise me
[19:13:26] *** Joins: heftig (heftig@moz-48F85AD2.dip0.t-ipconnect.de)
[19:13:27] <Tari> you'll have to write your own linker scripts and all that
[19:13:41] <olsonjeffery> mcpherrin: :/
[19:14:02] <olsonjeffery> oh well. it's still a nice instruction set. i guess i can concentrate on brushing up my assembly skills.
[19:14:58] <mcpherrin> I've only ever written assembly for msp430 so I have no idea how compilers do :P
[19:15:14] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:15:14] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Ping timeout)
[19:15:14] *** Quits: Afuna (sid21127@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:15:14] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Ping timeout)
[19:15:14] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Ping timeout)
[19:15:37] *** Joins: johanh (uid17185@moz-A42E5B7B.irccloud.com)
[19:15:54] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:15:54] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[19:16:14] <Tari> gcc's msp430 backend is just fine, as my experience goes with it
[19:16:28] *** Joins: Afuna (sid21127@moz-31ABA2C0.irccloud.com)
[19:16:33] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[19:16:42] *** Joins: tautologico (uid22285@moz-A42E5B7B.irccloud.com)
[19:16:47] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[19:17:00] <Tari> better than, say its RX backend anyway
[19:17:05] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[19:17:52] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[19:17:59] *** Quits: jdm (jdm@3352147E.CB4C8069.74119F78.IP) (Ping timeout)
[19:19:19] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[19:19:39] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[19:19:52] *** Joins: andreypopp_ (andreypopp@moz-7261DC60.net)
[19:20:00] *** Quits: andreypopp_ (andreypopp@moz-7261DC60.net) (Quit: andreypopp_)
[19:20:11] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[19:20:15] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[19:20:31] <Jemaclus> Bout to give up on this LZW thing. So frustrating.
[19:20:31] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[19:21:05] <olsonjeffery> Jemaclus: how's that? fighting with the compiler?
[19:21:05] *** Parts: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) ()
[19:21:14] <olsonjeffery> what language's reference impls are you looking at?
[19:21:16] *** Joins: jdm (jdm@1F05EAB6.1AD9726E.74119F78.IP)
[19:21:17] *** ChanServ sets mode: +o jdm
[19:21:45] <olsonjeffery> (i take it you're the person who posted on /r/reddit about looking at project euler stuff)
[19:22:10] <rcxdude> Jemaclus: I'm looking at that currently. I found one issue in the decode step, but it still doesn't quite work
[19:22:12] <Jemaclus> nah, no compiler frustrations... yeah, I'm the one on reddit :)
[19:22:13] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:22:22] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[19:22:30] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:22:37] <Jemaclus> My problem appears to be that the decompression step isn't properly outputting the last codeword
[19:23:04] <Jemaclus> but i dunno why or how
[19:23:10] <Jemaclus> rcxdude: what's that?
[19:23:46] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[19:23:51] <rcxdude> Jemaclus: I think when there's no key in the dict you should output new_entry, not entry
[19:24:02] *** Quits: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP) (Quit: WeeChat 0.4.3-rc2)
[19:24:07] <Jemaclus> olsonjeffery: I basically went to Rosetta Code and looked at their examples. My string/char-based one works perfectly with their examples, but considering that compression is supposed to be at a byte-level, I'm trying to implement that. I've checked out pseudocode from the wikipedia entries and so on, and I think everything looks right
[19:24:14] <Jemaclus> hmm
[19:24:57] <rcxdude> nah, actually, I don't think that's the issue
[19:25:06] <rcxdude> just checked on a larger input file
[19:25:19] *** Joins: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP)
[19:25:21] *** Quits: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP) (Quit: Earnestly)
[19:25:31] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[19:25:48] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[19:26:43] <Jemaclus> Debugging strings and chars is way easier than debugging bytes... :)
[19:27:29] <bjz> photex: commented on the sax-rs issue
[19:27:49] <dsyang> Hey guys, I'm getting a weird error saying "struct 'BufferedReader' is private on the line "use std::io::buffered::BufferedReader". That's not suppose to happen is it?
[19:28:11] <dsyang> "
[19:28:18] <bjz>  "pongad:	 cmr: K, but now that I think of it, are they even necessary. We already have cmp::min(x,y)" they are useful for specialisation for floats
[19:28:19] <dsyang> (sorry for the unclosed quote :P )
[19:28:43] *** Joins: dmac1 (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[19:28:55] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Ping timeout)
[19:29:02] <bjz> oh, he is gone :P
[19:29:19] *** Joins: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP)
[19:29:47] <Jemaclus> rcxdude: you don't think the entry/new_entry thing is the issue?
[19:29:59] <dsyang> nvm I messed up
[19:31:57] <photex> I'm here
[19:32:02] <photex> just replying 
[19:32:12] <photex> about to head home though! snowing like a madman over here
[19:32:22] <bjz> photex: ack
[19:32:27] <photex> don't want to die on the way home.haha
[19:32:31] <bjz> photex: hot as hell here
[19:32:39] <bjz> at least it will be soon
[19:32:42] <bjz> :P
[19:32:59] <photex> heh
[19:33:03] <photex> it's summer for you right?
[19:33:06] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[19:33:11] <bjz> photex: aye
[19:33:27] <photex> the magic of spheroids in spaaaaaace
[19:33:44] <bjz> photex: had 45C+ a few times last month
[19:33:56] <photex> thats... really hot
[19:33:59] <bjz> acrichto: where are the docs for using green and native threads?
[19:34:15] <photex> ok, replied to your last comment on sax-rs
[19:34:20] <bjz> photex: cheers
[19:34:24] <photex> ttyl
[19:34:24] <bjz> photex: be safe
[19:34:32] <photex> will be online at home later
[19:34:33] <acrichto> bjz: http://static.rust-lang.org/doc/master/guide-runtime.html is some dox, maybe not specific to threading though
[19:35:00] <acrichto> bjz: you have inspired me to go write some more docs
[19:35:11] <bjz> acrichto: looking for the manual initialization stuff
[19:35:25] <acrichto> bjz: look towards the end of the runtiem guide
[19:35:28] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[19:35:59] <bjz> acrichto: ahh, some full hello world like stuff would be cool
[19:36:13] <bjz> acrichto: that's what I was scanning for, sorry :P
[19:36:31] <bjz> acrichto: like in 3.3
[19:36:36] <acrichto> yeah I'm gonna write up some examples in the crate docs for libgreen/libnative
[19:36:47] <bjz> acrichto: I remember you having something on the ML was all
[19:36:52] <bjz> acrichto: ok
[19:37:27] * pcwalton is removing ~[] from libsyntax/librustc at the rate of 325 per hour
[19:37:32] <bjz> acrichto: I want a way to enforce that something is called from the main thread. could I make a trait that's implemented on something in libnative?
[19:37:32] <pcwalton> according to my spreadsheet
[19:37:38] <rcxdude> Jemaclus: I'm not sure where the error is in your code, but reimplementing the decode fixed it
[19:37:45] <bjz> pcwalton: \o/
[19:37:51] <pcwalton> we'll see if I can keep that up :P
[19:38:04] <Jemaclus> rcxdude: yours works? Can you gist it?
[19:38:06] <acrichto> bjz: hm, I don't think there's something we have that will guarantee you're on the main thread
[19:38:22] <pcwalton> actually, 196 per hour
[19:38:24] <bjz> acrichto: it would be good if it were possiblw
[19:38:40] <bjz> acrichto: lots of c libs demand the main thread :(
[19:38:45] <rcxdude> Jemaclus: https://gist.github.com/rcxdude/bfb4dffea4523da5985d
[19:38:56] <acrichto> bjz: it's certainly possible to do it, asserting so is slightly mroe difficult
[19:39:09] <bjz> acrichto: yeah, I can imagine
[19:39:12] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:39:16] <rcxdude> Jemaclus: currently missing the logic for dict overflow
[19:39:18] <Jemaclus> oh.
[19:39:18] <Jemaclus> wow.
[19:39:23] <Jemaclus> yours is like.. way cleaner... than mine.
[19:39:37] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[19:40:03] <bjz> acrichto: even if it was just some sort of native::is_main_thread, that I could chuck into an assertion
[19:40:26] <acrichto> bjz: hm...
[19:40:57] <bjz> acrichto: some sort of type level thing would be even better though
[19:41:04] <bjz> acrichto: <3 static checks
[19:41:42] <Jemaclus> heyo.
[19:41:45] <Jemaclus> it worked.
[19:41:57] <Jemaclus> rcxdude: ok, time to compare what you did vs what I did, and see where I went wrong
[19:42:00] <Jemaclus> rcxdude: thanks so much
[19:42:22] <bjz> acrichto: like, if native::start had some sort of non-sendable MainThread kind of token, that a lib author could impl a trait
[19:42:25] <bjz> on
[19:42:33] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[19:42:35] <acrichto> perhaps yeha
[19:42:54] <rcxdude> Jemaclus: no problem. Was a nice chance to try to figure out rust again (only played with it a little on version 0.6)
[19:42:56] <bjz> acrichto: might be annoying complicating the api just for that though
[19:43:30] <bjz> acrichto: it would be best if it were an empty enum too, so the user could not construct it... perhaps
[19:43:54] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[19:43:56] <rcxdude> Jemaclus: btw, your read_compressed function is broken on master. I'm not sure whether it's a problem with the eof() implementation or not, but it no longer usefully returns true there
[19:43:58] <acrichto> bjz: this kinda stuff could also be done in a lib I think so long as you control startup
[19:44:16] <bjz> acrichto: but then the lib would not be composable with others
[19:44:25] <Jemaclus> rcxdude: hmm. ok, i haven't rebuilt rust in a few weeks, so maybe something changed..?
[19:44:34] <sfackler> Jemaclus: the IO API changed
[19:44:42] <sfackler> eof returns Result<bool, IoError> now
[19:44:42] <Jemaclus> ah.
[19:44:47] <Jemaclus> gotcha.
[19:44:55] <bjz> acrichto: taking over startup is an invasive thing
[19:45:15] <rcxdude> sfackler: it still returns bool I think
[19:45:25] <acrichto> bjz: yeah I suppose so
[19:45:29] <rcxdude> sfackler: the problem is the read function errors out first
[19:45:59] <Jemaclus> docs say it's bool
[19:46:15] <sfackler> er, yeah
[19:46:25] <sfackler> Reader and Writer changed
[19:46:31] <Jemaclus> anyway, it works on my current build, so I'll leave it for now... got bigger fish to fry...
[19:47:29] <bjz> acrichto: writing safety stuff in docs like "must call in main thread" is super distasteful
[19:47:42] <bjz> :(
[19:48:33] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:50:09] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[19:51:17] <Jemaclus> rcxdude: I sorta see why yours works better than mine. Thanks. :)
[19:51:23] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:53:06] *** Quits: alonlevy (alon@moz-D30DBE36.red.bezeqint.net) (Quit: Leaving)
[19:53:11] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:53:46] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[19:54:10] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:54:11] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:55:24] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[19:55:41] <kmc> I've built rust with --enable-debug but «objdump -W x86_64-unknown-linux-gnu/stage2/lib/libstd-3e5aeb83-0.9.so» only shows source file names for .c and .h files
[19:55:50] <kmc> and as a result I can't place breakpoints on specific lines in libstd
[19:55:56] <kmc> is there a known fix?
[19:56:00] <acrichto> kmc: are you on osx around 0.9?
[19:56:22] <kmc> Linux, rust 0.9 (d3b3c66 2014-01-12 19:44:26 -0700)
[19:56:29] <acrichto> hm, debuginfo should work on linux
[19:56:35] <Luqman> kmc: oh, you might need to pass RUSTFLAGS="-Z extra-debug-info" to make
[19:56:38] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:56:53] <Luqman> cause --enable-debug doesn't add that afaik
[19:58:27] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:58:37] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[19:58:52] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[19:59:51] <kmc> -Z extra-debug-info implicitly enables -Z debug-info, right?
[19:59:54] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[20:00:12] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:00:32] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:00:51] <acrichto> kmc: yeah
[20:03:45] *** Joins: halleck (a@moz-99121734.dynamic.mnet-online.de)
[20:04:02] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[20:05:18] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:06:19] *** Joins: vmx (vmx@moz-63AFABAE.pools.arcor-ip.net)
[20:07:27] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[20:08:05] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Client exited)
[20:08:31] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[20:09:01] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[20:09:49] *** Quits: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP) (Quit: Leaving...)
[20:10:01] *** Quits: claudiu (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[20:11:30] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[20:11:58] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[20:12:34] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:13:11] <dsyang> Hey all, I'm running into the error message "error: unresolved enum variant, struct or const `Data`" when trying to use std::comm::Port::try_recv
[20:13:45] <darnuria> Hey all there is a project like a shell in Rust? Just for testing language feature?
[20:14:30] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:15:34] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[20:15:42] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[20:16:29] <kimundi> dsyang: Did you import Data too?
[20:16:38] *** Joins: sigma (sigma@2AE71BC1.DC5B0862.37339E3A.IP)
[20:16:38] *** Quits: mib_b7xhea (Mibbit@moz-4D3A818.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[20:17:54] <dsyang> kimundi: nope, but that fixed it. Thanks!
[20:20:56] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[20:21:28] <dsyang> hm.. is there a reason why std::comm::Port::try_recv() would cause a segfault?
[20:21:31] *** Joins: sprog (Mibbit@moz-3DA5D4DF.dhcp.embarqhsd.net)
[20:21:59] <kmc> it shouldn't... can you get a stack backtrace from gdb?
[20:22:17] <kmc> are you doing anything unusual, such as (for example) running Rust code outside the Rust runtime?
[20:22:42] <dsyang> kmc: no, I'm just trying to write an echo server 
[20:22:59] <dsyang> does rustc compile with debug symbols?
[20:23:06] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[20:23:29] <kmc> to build your code with debug symbols use rustc -Z extra-debug-info
[20:23:54] <kmc> to build rustc itself with debug symbols, ./configure --enable-debug  and then  make RUSTFLAGS="-Z extra-debug-info"
[20:24:03] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[20:24:08] <kmc> i believe :)  still testing that in my own project
[20:24:23] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[20:26:05] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[20:27:00] <dsyang> Here's the stacktrace https://gist.github.com/anonymous/1f14b097e518c85439ea
[20:28:56] <Zr40> how do I identify the git commit rustc is built from?
[20:29:13] <Ms2ger> rusti: rustc --version
[20:29:13] -rusti- <anon>:10:9: 10:14 error: unresolved name `rustc`.
[20:29:13] -rusti- <anon>:10         rustc --version
[20:29:14] -rusti-                   ^~~~~
[20:29:14] -rusti- error: aborting due to previous error
[20:29:14] -rusti- application terminated with error code 101
[20:29:17] <Ms2ger> Er
[20:29:23] <Ms2ger> <.<
[20:29:25] <Ms2ger> >.>
[20:29:36] *** Joins: guest (Mibbit@moz-A07074AD.bootp.virginia.edu)
[20:29:41] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:29:43] <Zr40> rustc --version only reports 'rustc 0.10-pre'
[20:29:52] <guest> how would one convert a string into ascii value representation?
[20:29:53] <Ms2ger> Yeah, I thought that worked
[20:30:02] <Ms2ger> guest, .to_ascii()?
[20:30:04] <Zr40> rusti: version
[20:30:05] -rusti- "rustc 0.10-pre (4cd555d 2014-01-24 03:28:15 -0500)"
[20:30:06] <rcxdude> Zr40: for me it also reports a git commit
[20:30:13] <Zr40> I'd like something like that
[20:32:24] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[20:32:34] <dsyang> the code's that causes the segfault is: https://gist.github.com/8851940
[20:33:19] <Zr40> dsyang: that might be https://github.com/mozilla/rust/issues/10398
[20:33:19] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Connection reset by peer)
[20:34:04] <bstrie> cmr: I'm gonna breach protocol here and nominate myself for qotw: http://www.reddit.com/r/programming/comments/1x66zv/the_rust_repository_closed_the_second_most_number/cf8mhd9
[20:34:39] <dsyang> Zr40: Maybe? I'm not sure I understand the bug though
[20:35:16] <eddyb> is there a way to run iterators to compare them?
[20:36:19] <eddyb> instead of collecting to vectors and comparing those
[20:36:41] <Zr40> dsyang: quick check: does it compile if you replace line 22 with { and line 50 with }?
[20:37:14] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:37:14] *** ChanServ sets mode: +o tjc
[20:37:38] <dsyang> nope. "use of moved value: `exit_in`"
[20:38:07] <Zr40> dsyang: right. That compiles when it should not, if done within a proc
[20:38:58] <dsyang> Zr40: interesting. If you don't mind me asking, why shouldn't it compile? 
[20:40:28] <eddyb> what does zip do when the lengths don't match?
[20:40:37] <sfackler> stops early I think
[20:40:47] <eddyb> so I can't use that for ==
[20:41:27] <sfackler> you can if you compare the lengths first
[20:41:34] <eddyb> lengths of iterators?
[20:41:45] <eddyb> that requires cloning, at least
[20:41:53] <eddyb> *noop cloning
[20:42:00] *** Quits: sprog (Mibbit@moz-3DA5D4DF.dhcp.embarqhsd.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:42:02] <sfackler> oh, I thought you were talking about vectors
[20:42:05] <Zr40> dsyang: for the same reason it doesn't compile without the proc
[20:42:27] <eddyb> sfackler: I want to avoid creating two vectors
[20:42:47] <strcat> eddyb: there is iter::order::eq
[20:43:19] <eddyb> strcat: sweet :D http://static.rust-lang.org/doc/master/std/iter/order/fn.eq.html
[20:43:22] <Zr40> dsyang: it's owned on line 19, and you can only move it once. But you're doing it inside a loop, and that's not once
[20:43:38] *** Quits: rca_ (rcatolino@moz-81882D6F.adsl.proxad.net) (Ping timeout)
[20:43:40] <strcat> eddyb: it's not as generic as it could be
[20:43:42] <strcat> should be fixed
[20:44:00] <eddyb> strcat: ouch
[20:44:06] <eddyb> that might actually be an issue here :(
[20:44:08] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:44:25] <eddyb> I'll just steal the code
[20:44:37] *** Quits: guest (Mibbit@moz-A07074AD.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[20:45:25] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[20:45:53] *** Joins: rca (rcatolino@moz-EF98FF5B.adsl.proxad.net)
[20:46:18] <dsyang> Zr40: Ah, guess I don't really understand ownership yet. I'm assuming that's why moving that line outside of the loop fixes it too.
[20:47:06] *** Quits: tiernjo (tiernjo@moz-21A5F23D.ks.ks.cox.net) (Client exited)
[20:47:22] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[20:47:55] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:48:05] *** Quits: sigma (sigma@2AE71BC1.DC5B0862.37339E3A.IP) (Ping timeout)
[20:48:31] <Zr40> dsyang: http://www.youtube.com/watch?v=gfCtbGiHcg0 is quite enlightening :)
[20:49:14] *** Joins: petantik (oz@moz-20EC2160.net)
[20:49:39] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[20:49:54] <dsyang> Zr40: Thanks! 
[20:50:03] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[20:50:38] <kmc> Luqman: thanks, RUSTFLAGS="-Z extra-debug-info" enables me to place the breakpoint
[20:50:49] <kmc> it's not actually getting hit but I can look into that
[20:51:25] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:53:18] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:53:30] <chromatic> Is there a way to compile a single file for a different platform?
[20:56:57] <strcat> chromatic: crates are the only compilation unit, so as long as it's a crate - yes
[20:57:05] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:57:17] <strcat> via --target for a target triple you built support for
[20:57:18] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[20:57:22] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[20:57:40] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[20:58:22] <chromatic> Hm. I was hoping for something a little simpler than that, like "Can you emit a valid AST for this platform but don't actually build anything?"
[20:58:39] <chromatic> "Simpler" may not be an accurate word.
[20:58:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:59:37] <kimundi> chromatic: you mean conditional compilation?
[21:01:20] <chromatic> I want to compile a single file and have the cfg(windows) guards be true instead of the cfg(linux) guards true, just to see if I have imports correct.
[21:01:30] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:02:04] *** Joins: tryzor (bzlandfill@moz-E0472311.dip0.t-ipconnect.de)
[21:02:05] <chromatic> This may be a big hack, so I can accept the answer "No, there's no reason anyone else in the world would ever want to do that."
[21:02:40] <kimundi> ah, okay. No idea if there is a way to override all necessary cfgs fior that
[21:02:47] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[21:03:06] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[21:03:15] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:03:46] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[21:04:06] <chromatic> I swapped them with a careful Vim macro, but I don't have the win32 consts built so that might be it.
[21:04:19] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[21:04:32] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[21:04:35] *** Joins: pachuco (Mibbit@8AC16118.9FF7733C.DDE5D3F6.IP)
[21:04:37] <Zr40> chromatic: are you linking to any windows libraries?
[21:05:00] <chromatic> No, I'm fiddling with libstd.
[21:05:00] <pachuco> Hi. Beginner learning rust here, any good file IO tuts?
[21:05:02] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[21:05:24] <Tari> pachuco: the docs for std::io will get you up and running with some examples
[21:05:54] <pachuco> Just found it and it looks great, thanks!
[21:06:00] *** Quits: pachuco (Mibbit@8AC16118.9FF7733C.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:07:34] *** Joins: tjc_ (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:07:37] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Ping timeout)
[21:08:12] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[21:10:07] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[21:15:00] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[21:18:56] <chromatic> acrichto, I can take out that lint warning if you want, but it seemed to quiet the build for me.
[21:19:09] <acrichto> chromatic: what warnings were you seeing?
[21:20:26] <chromatic> This was a few days ago. Let me try to repro.
[21:21:05] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:21:28] <cmr> bstrie: the /whole thing/?
[21:21:29] <steveklabnik> wolfwood: ping
[21:21:41] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[21:21:55] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:22:19] <cmr> bahahah
[21:22:22] <cmr> bstrie: recorded :)
[21:22:25] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[21:23:46] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[21:23:49] <newguy> is there a way to get all the directories in the current cwd
[21:23:49] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[21:24:15] <chromatic> acrichto, sort of a good news/bad news situation. Good news: you're not crazy.
[21:24:25] *** Quits: Ms2ger (Ms2ger@moz-884DE569.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:24:35] <acrichto> hurray!
[21:26:33] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[21:26:53] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[21:27:20] <cmr> newguy: so there's http://static.rust-lang.org/doc/master/std/io/fs/fn.readdir.html
[21:27:48] <Eridius> newguy: std::io::fs::readdir()
[21:28:49] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[21:29:22] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:29:27] *** Joins: hoverbear (hoverbear@moz-4D19F06B.wireless.uvic.ca)
[21:30:24] *** Quits: apoelstra (username@moz-45D66F9F.public.utexas.edu) (Ping timeout)
[21:31:21] *** Joins: apoelstra (username@moz-45D66F9F.public.utexas.edu)
[21:31:36] *** Joins: henrikhodne (sid5765@moz-E77DEB21.irccloud.com)
[21:35:07] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[21:35:45] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[21:36:02] *** Quits: onelson (onelson@moz-DD666EC5.laika.com) (Quit: Leaving.)
[21:36:14] *** Joins: klzzvn (Mibbit@moz-C0229DDD.xnet.hr)
[21:36:25] *** Quits: dschatzberg (dschatzber@moz-9384E83C.bu.edu) (Input/output error)
[21:37:11] <klzzvn> how can I print what gl::GetString returns? i know it's a c_uchar type, but how to print it? here is the function declaration
[21:37:12] <klzzvn> https://github.com/bjz/gl-rs/blob/master/src/gl/lib.rs#L1576
[21:37:45] <bjz> klzzvn: you have to convert it to a string
[21:37:55] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[21:38:00] <bjz> umm, dunno if I have an example...
[21:38:12] <klzzvn> bjz: what should i google? :)
[21:38:33] <klzzvn> btw, is that a C type string, terminated with \0? or something "fancier"
[21:38:39] <bjz> first look at the docs for glGetString
[21:38:50] <bjz> I believe it is null terminated
[21:39:03] <bjz> hence you can use str::raw::from_c_str
[21:39:10] <bjz> I think
[21:39:16] *** Quits: vmx (vmx@moz-63AFABAE.pools.arcor-ip.net) (Quit: Leaving)
[21:39:48] <bjz> http://static.rust-lang.org/doc/master/std/str/raw/fn.from_c_str.html
[21:39:51] <klzzvn> let me see... btw2, can I use pointer math on raw pointers? 
[21:40:19] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[21:40:37] <bjz> ugh, it takes an i8
[21:40:40] <bjz> hmm
[21:40:45] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[21:41:16] <klzzvn> error: mismatched types: expected `*i8` but found `u8` (expected *-ptr but found u8)
[21:41:17] <klzzvn> yeah
[21:41:26] <bjz> let me look at my local code 
[21:42:02] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[21:42:27] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[21:42:39] <bjz> ugh, why no str::raw::from_raw_buf?
[21:43:39] <bjz> I think you can just cast it to a *std::libc::c_char
[21:44:13] <bjz> so str::raw::from_c_str(buf as *c_char)
[21:44:36] <bjz> klzzvn: remember to use the correct C types aliases
[21:44:43] <bjz> as good style
[21:44:48] <klzzvn> str::from_byte compiles... but i think it doesn't work :/
[21:44:52] <klzzvn> let me check this other thing
[21:45:44] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:46:29] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[21:48:08] *** Quits: Ferreus (ferreus@moz-53B82F11.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[21:49:04] *** Quits: jackneill (jackneill@moz-CCD35239.pool.digikabel.hu) (Ping timeout)
[21:51:01] *** Quits: tjc_ (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:51:23] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:51:45] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Client exited)
[21:52:02] <klzzvn> no luck... i can get it to work (somewhat) with std::raw::from_buf_len... but then i have to guess to length
[21:52:06] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:52:39] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:52:39] *** ChanServ sets mode: +ao dherman dherman
[21:53:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:53:08] <Eridius> klzzvn: it's a null-terminated string, yes?
[21:53:23] <klzzvn> Eridius: pretty sure it is, yeah
[21:53:36] *** jorendorff is now known as jorendorff_away
[21:53:51] <Eridius> klzzvn: do you want to copy it into a ~str or just create a temporary &str to work with that references the original string's bytes?
[21:54:02] <chromatic> acrichto, feel like one more try on this deglobbing? Just to see how Windows fares?
[21:54:24] <klzzvn> Eridius: i dunno :) probably copy it to a Rust type (~str)
[21:55:11] <Eridius> klzzvn:  unsafe { str::raw::from_c_str(GetString(name) as *std::libc::c_char) }
[21:55:23] *** Quits: jamil_1|2 (kvirc@EED3479.3C091628.3D6CCABD.IP) (Ping timeout)
[21:55:34] *** jorendorff_away is now known as jorendorff
[21:57:26] <acrichto> chromatic: I have pushed to try
[21:57:27] <klzzvn> Eridius: WORKS! now just to figure out how :)
[21:57:30] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:57:57] *** Quits: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net) (Ping timeout)
[21:58:00] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[21:58:00] <klzzvn> Eridius: is this idiomatic way to do it? looks quite... verbose
[21:58:03] <Eridius> klzzvn: which part has you confused? str::raw::from_c_str takes a *c_char (which is the equivalent to C's `char *`), treats it as a NUL-terminated string, and constructs a ~str
[21:58:14] *** Joins: mzabaluev (mzabaluev@moz-A1406910.dhcp.inet.fi)
[21:58:16] <Eridius> klzzvn: your problem is GetString returns the equivalent of `unsigned char *` instead of `char *`
[21:58:22] <Eridius> klzzvn: so we had to cast it to the appropriate type
[21:58:37] <klzzvn> Eridius: yeah, the casting was the problem... 
[21:58:53] <klzzvn> that is, what to cast it to...
[21:58:58] <Eridius> klzzvn: btw, this function will fail!() if the C-string isn't utf-8
[21:59:19] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:00:07] <acrichto> chromatic: http://buildbot.rust-lang.org/builders/try-win/builds/878
[22:00:34] <klzzvn> Eridius: thanks, it makes much more sense now... 
[22:01:06] <klzzvn> coming from Python some things are very unusual :)
[22:01:21] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:01:36] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:01:45] <mzabaluev> Hi. Are there any best practices on wrapping refcounted objects via FFI? It's OK if that's specific to the native runtime, too
[22:02:04] <Eridius> klzzvn: if you want to et Option<~str> back intead, where None means it's not utf-8, you can use `unsafe { std::c_str::CString::new(GetString(name) as *std::libc::c_char, false).as_str().map(|s| s.to_owned()) }
[22:02:08] <Eridius> :D
[22:02:22] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Ping timeout)
[22:02:24] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[22:04:24] <klzzvn> Eridius: yeaaaaah... that wil have to wait a while :) i'd like to push few triangles first, then go on heavier stuff...
[22:04:24] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:04:33] * SingingBoyo is currently in a guest lecture by someone from mozilla labs..
[22:04:35] <mzabaluev> My best idea is to unref in Drop impl, but leave the wrapper object sendable and never actually do any other refcounting on the Rust side, relying on the move semantics for reference integrity
[22:04:52] *** Joins: zwarich (zwarich@A89ECEB1.A86FC3A7.DE9B45B6.IP)
[22:04:59] <Eridius> klzzvn: it looks better if you break it into multiple lines, and use some `use` declarations to shrink those paths
[22:05:04] <SingingBoyo> wonder if i should ask anything about rust...
[22:05:32] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[22:05:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:06:01] *** Joins: espindol_ (espindola@moz-F0FBD3B4.dsl.teksavvy.com)
[22:06:23] <kimundi> mzabaluev: That sounds about right. make a wrapper that is NonPOD, inc refcount of construction and clone, dec on drop
[22:07:17] *** Quits: espindola (espindola@moz-9F530B29.com) (Ping timeout)
[22:07:54] <mzabaluev> kimundi: clone would complicate things, as I want to prevent concurrent usage of the referenced object from multiple tasks
[22:07:58] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[22:09:14] <kimundi> mzabaluev: well, you have the option of only having one Rust handle that is sendable, or multible Rust handles that you make unsendable then.
[22:09:22] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[22:09:48] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[22:10:17] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:10:20] <kimundi> mzabaluev: Could even combine both: have a sendable wrapper without clone, and unsendable wrappers with clone, and allow costless conversion between each other if refcount == 1
[22:10:30] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:10:52] *** Joins: kvanb (kvanb@moz-9884B768.lnse2.lon.bigpond.net.au)
[22:11:34] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[22:11:35] * kimundi now wonders if that is safe, and if yes wether it would work for RUsts Rc type too
[22:11:41] *** Quits: espindol_ (espindola@moz-F0FBD3B4.dsl.teksavvy.com) (Input/output error)
[22:12:01] *** Quits: heftig (heftig@moz-48F85AD2.dip0.t-ipconnect.de) (Ping timeout)
[22:13:26] <mzabaluev> kimundi: unsendable -> sendable sounds like putting the cat back into the bag :) Should that fail if refcount > 1, then?
[22:13:35] *** Quits: klzzvn (Mibbit@moz-C0229DDD.xnet.hr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:14:11] <strcat> mzabaluev: is it mutable or immutable
[22:14:16] <strcat> and does it use atomic refcounting?
[22:14:19] *** Quits: rca (rcatolino@moz-EF98FF5B.adsl.proxad.net) (Ping timeout)
[22:14:25] <mzabaluev> strcat: generally mutable, atomic refcounting
[22:14:31] *** Joins: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net)
[22:14:31] <strcat> mzabaluev: does it use locking or no?
[22:14:54] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[22:14:56] <strcat> if it's actually thread-safe you don't need to worry about making it non-sendable
[22:15:00] <mzabaluev> strcat: refcounting itself is purely atomic ops (on relevant platforms, that is)
[22:15:09] <strcat> mzabaluev: I mean for the mutation part
[22:15:15] *** Joins: espindola (espindola@moz-F0FBD3B4.dsl.teksavvy.com)
[22:15:39] *** Quits: alexherbo2 (alexherbo2@moz-33868228.w90-35.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[22:15:50] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:16:24] <mzabaluev> strcat: the objects are generally thread-unsafe
[22:18:06] <mzabaluev> strcat: I'd like to be able to create an object and hand it off to a task closure. Does it work for non-sendable types as well?
[22:18:13] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[22:18:19] <strcat> mzabaluev: no
[22:18:32] <sp3d> mzabaluev: hi
[22:18:37] <sp3d> working on grust core stuff? :D
[22:18:57] <mzabaluev> sp3d: yes, I'm at it again :)
[22:19:01] <strcat> mzabaluev: you could make a linear version
[22:19:05] <strcat> mzabaluev: as in hide that it's refcounted
[22:19:17] <strcat> mzabaluev: add a destructor, make sure it always has a refcount of 1
[22:19:19] <strcat> and it can be sendable
[22:19:30] <strcat> mzabaluev: then, add an upgrade method taking self by-value and converting to a refcounted type
[22:19:37] *** Quits: espindola (espindola@moz-F0FBD3B4.dsl.teksavvy.com) (Quit: Leaving...)
[22:20:11] <strcat> mzabaluev: and you could add a downgrade method allowing conversion to the sendable owned version returning an Option and using None when the refcount isn't 1
[22:20:29] *** Quits: m-r-r (mrr@moz-F7548D46.rev.sfr.net) (Ping timeout)
[22:20:46] *** Joins: m-r-r (mrr@moz-F7548D46.rev.sfr.net)
[22:20:56] <strcat> the only alternative would be putting a lock on it
[22:21:20] <mzabaluev> strcat: sounds good. Are there conventional names for those upgrade and downgrade methods?
[22:22:01] *** Joins: voxpopuli (fanservice@92255E3E.67A9040F.689607DE.IP)
[22:22:05] <strcat> mzabaluev: into_owned and into_shared, maybe
[22:22:25] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[22:22:28] <strcat> both will take self by-value, but into_owned has to return None if refcount isn't 1
[22:22:46] <mzabaluev> sp3d: BTW, I really dig libnative, it simplifies so many things
[22:23:35] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[22:23:58] *** Joins: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr)
[22:24:35] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[22:24:57] <hoverbear> Will Rust compile and run well on BSDs?
[22:25:05] *** Joins: alyx (alyx@moz-806A0FC7.vmkit.net)
[22:25:18] <alyx> Does Rust have anything like C's dl* stuff?
[22:25:35] *** Joins: heftig (heftig@moz-F8A83F8A.dip0.t-ipconnect.de)
[22:25:49] <strcat> hoverbear: freebsd on x86_64, others no
[22:25:55] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[22:26:13] <strcat> if we had libclang-based FFI support, it'd probably work on all of them without much effort
[22:26:17] <hoverbear> strcat: Ah, mostly was interested in openBSD :(
[22:26:18] <mzabaluev> strcat: thanks for the insight
[22:26:24] <strcat> hoverbear: yeah, not going to work
[22:26:42] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[22:26:46] <hoverbear> strcat: Version issues?
[22:26:50] <strcat> since the FFI stuff is done by hand per-platform via #[cfg(...)] and openbsd/netbsd aren't included
[22:26:58] <strcat> hoverbear: no, just caused by not having automatic handling of FFI
[22:27:02] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:27:03] *** ChanServ sets mode: +o tjc
[22:27:13] <strcat> supporting new platforms or new C libraries requires explicitly adding them
[22:27:24] <hoverbear> strcat: Ah ok, that makes sense.
[22:27:51] <strcat> imo it's the single biggest issue stopping real-world rust usage, it makes using existing libraries too hard
[22:28:21] <strcat> and you end up in the situation where the library ABI varies based on ./configure and wonder what to do...
[22:28:23] *** Quits: mye (mye@moz-7FA8ED48.dip0.t-ipconnect.de) (Quit: mye)
[22:28:35] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[22:29:58] <Eridius> strcat: write a C program to write Rust. That's what I did with Lua
[22:30:17] <strcat> Eridius: :(
[22:31:16] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Connection reset by peer)
[22:31:28] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:31:28] *** ChanServ sets mode: +o tjc
[22:32:24] *** Joins: uva_student (Mibbit@BCAFCC75.C9F034A2.B7830B68.IP)
[22:32:30] *** Quits: mgottschlag (quassel@moz-7841FD83.cust.bluewin.ch) (Ping timeout)
[22:33:04] *** Quits: tryzor (bzlandfill@moz-E0472311.dip0.t-ipconnect.de) (Quit: CGI:IRC (Ping timeout))
[22:33:08] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Connection reset by peer)
[22:33:25] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:33:25] *** ChanServ sets mode: +o tjc
[22:33:46] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:34:18] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[22:34:41] <uva_student> Hey guys, we're writing a server for an undergraduate OS course at UVA, and we had a question about signal interrupts. Right now we found Listener and registered it to an Interrupt, but whenever we hit ^C it kills all child processes - both those in the foreground and those in the background
[22:35:03] <uva_student> We tried using posix88::signal::kill and giving it a specific pid but that still killed everything. Any ideas on how to get an interrupt to stop killing background child processes?
[22:35:31] *** Joins: uva_matt (Mibbit@619AA792.9EA65473.DDE5D3F6.IP)
[22:36:00] *** Joins: io2 (io2@moz-7C3DDBE8.home.otenet.gr)
[22:36:30] <uva_matt> Hi guys, I have a quick (or maybe not quick?) question. I'm using Rust for my OS class (CS 4414 at UVA) and we're working on making a basic shell for our current homework. One thing we have to do is handle interrupts (Ctrl + C) and exit from foreground processes that have been spawned from our shell, but not exit background processes or the shell itself.
[22:36:51] *** Joins: mib_14zig5 (Mibbit@45C4621E.9875BCA6.DDE5D3F6.IP)
[22:37:12] <mzabaluev> uva_matt, uva_student: the background process should block the signal, I think
[22:37:18] <uva_matt> Currently I just created a Listener and registered it to Interrupt, and even without any other code, when I send an interrupt (Ctrl + C) it kills every process that has been spawned from the shell, whether or not it is foreground or background. I'm not sure why it's even doing that since I haven't sent any kill commands yet... Any advice would be great!
[22:37:37] <mzabaluev> SIGINT from the terminal is sent to the entire process group IIRC
[22:38:00] <uva_matt> but there's a way I can create a new process and make it ignore SIGINT (or block it)?
[22:38:04] *** Joins: bitemyapp (callen@95EE74F7.F6EF2525.EE6E63A5.IP)
[22:38:58] *** Joins: Saj (Sajuuk@moz-840D0658.netvisao.pt)
[22:39:09] <marc_> trap
[22:39:41] *** Quits: voxpopuli (fanservice@92255E3E.67A9040F.689607DE.IP) (Ping timeout)
[22:39:56] *** Joins: ofeldt (ofeldt@moz-F73DCD6F.dip0.t-ipconnect.de)
[22:39:57] *** Quits: hoverbear (hoverbear@moz-4D19F06B.wireless.uvic.ca) (Quit: This bear's gotta fly.)
[22:41:08] <mzabaluev> uva_matt: POSIX has sigprocmask and pthread_sigmask, dunno if Rust has higher level wrappers
[22:41:34] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:41:41] <eibwen> I find it hard to work with rust when trying to minimize allocations..
[22:42:37] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[22:42:46] <aatch> eibwen, really? I find it easier.
[22:43:15] <uva_matt> mzabaluev: thanks, I'll check that out
[22:43:15] <eibwen> yea, most examples I've seen use ~ and stuff
[22:43:17] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:43:25] <eibwen> I don't even know how to do static string handling
[22:43:32] <aatch> eibwen, for strings and vectors, yeah.
[22:43:32] <eddyb> eibwen: &str
[22:43:43] <eddyb> or do you mean "on stack"?
[22:43:47] <eibwen> on the stack
[22:43:49] <ChrisMorgan> uva_matt, uva_student: take a look at std::io::signal.
[22:44:11] <eddyb> eibwen: we need VLAs for those
[22:44:19] <eibwen> mhh
[22:44:21] <ChrisMorgan> http://static.rust-lang.org/doc/master/std/io/signal/index.html
[22:44:33] <eibwen> may I ask why? C doesn't need them, no?
[22:44:41] <eibwen> oh  wait
[22:44:45] <eibwen> VLA!=DST
[22:44:47] <eibwen> what's VLA?
[22:44:47] <eddyb> eibwen: if I expose the stacksave/stackrestore LLVM intrinsics, you could get *somewhere* with byte vectors
[22:44:52] <eddyb> eibwen: variable-length arrays
[22:44:58] <eibwen> oh
[22:45:22] <eibwen> I'm not talking about putting some array with length unknown at compile time on the stack
[22:45:24] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:45:36] <uva_student> Yeah, I used a listener from std::io::signal and registered Interrupt
[22:45:48] <eddyb> eibwen: the other choice is FIxedStr<N> which requires constants in generics
[22:45:55] <uva_student> but whether or not I ever call signal::kill it kills everything...
[22:46:06] <uva_student> well all spawned processes anyway
[22:46:47] *** Joins: hoverbear (hoverbear@moz-4D19F06B.wireless.uvic.ca)
[22:46:56] <eddyb> eibwen: if you don't want to be generic over the capacity, it should be relatively easy to create a variable-length fixed-capacity stack string type
[22:47:12] * ChrisMorgan doesn't know precisely how signal handling works with process groups
[22:47:13] <eddyb> LLVM should be able to remove copies of undef values
[22:47:18] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[22:47:40] <mzabaluev> uva_matt: then again, if you develop a shell, blocking SIGINT for any background process perhaps is not the right thing to do. I don't remember exactly what '&' does in Bourne shell, but I'd look at setting an own PGID for the child process
[22:48:23] *** Quits: nszceta (hax@62102655.D23DDDCF.37339E3A.IP) (Input/output error)
[22:49:45] <eibwen> eddyb: I don't find doc in FixedStr
[22:49:51] <eibwen> *of FixedStr
[22:49:59] <eddyb> eibwen: because it's not implementable yet, generically
[22:50:01] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[22:50:05] <eibwen> oh
[22:50:05] <eibwen> k
[22:50:41] <eddyb> what I said is that you can implement FixedStrN for very static values of N
[22:50:52] <eibwen> ohh
[22:51:22] <uva_matt> mzabaluev: Hmm I looked through everything I could find about that, and while I found some functions in libc::funcs::posix88, I couldn't find anything about signal masks. You wouldn't happen to know anything about this in Rust by any chance?
[22:52:07] <uva_matt> ChrisMorgan: mzabaluev: just saw your most recent messages, I'll check that stuff out. Thanks!
[22:53:25] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:53:29] <uva_matt> Yeah ChrisMorgan: I had the same problem as uva_student: , I'm using a Listener (std::io::signal::Listener), but by default it seems like whenever it registers an interrupt, it kills every spawned process besides the shell itself, by default.
[22:54:59] <uva_matt> mzabaluev: I see a getpid() method in Rust's libc, but nothing to set a PID or PGID
[22:55:44] <eibwen> can I make a function that makes its argument unmodifiable as long as its return value is alive?
[22:55:45] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[22:56:46] *** Quits: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Quit: calvinmetcalf)
[22:56:57] *** Quits: apoelstra (username@moz-45D66F9F.public.utexas.edu) (Ping timeout)
[22:57:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:58:00] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[22:58:07] <marc_> Is heap fragmentation an issue with Rust programs? I would assume so..
[22:58:14] <ChrisMorgan> uva_matt: find the appropriate POSIX (or whatever) function and then calling it from Rust code is a cinch.
[22:58:35] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[22:59:40] <uva_matt> ChrisMorgan: Does it have to be in Rust's libc or do you mean even if it's just in C? Sorry if that's a dumb question, don't have a lot of experience with this.
[22:59:44] <mcpherrin> marc_: yeah, though because of rust's better understanding of ownership, it would be theoretically possible to write defragmenting routines
[22:59:56] <ChrisMorgan> uva_matt: just in C
[23:00:00] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[23:00:03] <kimundi> eibwen: you could take immutable references as the arguments and return a type that contains that reference
[23:00:06] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[23:00:07] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[23:00:28] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:00:37] *** Joins: apoelstra (username@moz-45D66F9F.public.utexas.edu)
[23:00:40] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[23:00:42] <ChrisMorgan> uva_matt: Rust's std::libc is just a module wrapping a large number of POSIX/libc functions and types so that they can be trivially called from Rust code.
[23:00:54] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[23:01:14] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[23:01:15] <eibwen> like fn function<'a>(input: &'a I) -> &'a O { ... }
[23:01:24] <eibwen> kimundi: like this? ^
[23:01:37] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:01:37] *** ChanServ sets mode: +ao brson brson
[23:02:10] *** Joins: robhobbes (robert@FC24D562.62880861.F47F4656.IP)
[23:02:11] <kimundi> eibwen: yeah, though the return-references could probably be inside of O
[23:02:13] <uva_matt> ChrisMorgan: I'm looking in the source for libc.rs now to see if i can figure out how to call other POSIX functions. Thanks for your help!
[23:02:45] <eibwen> kimundi: does it work without being inside of O?
[23:02:53] <ChrisMorgan> uva_matt: c.f. http://static.rust-lang.org/doc/master/guide-ffi.html
[23:03:14] <uva_matt> ChrisMorgan: awesome, thanks!
[23:03:26] <kimundi> eibwen: only if I is or contains a O
[23:03:56] <kimundi> eibwen: You'd probably want to write a wrapper that contains both the reference and O otherwise
[23:04:43] <kimundi> struct OWrap<'a> {i:&'a I, o: O}; fn function<'a>(input: &'a I) -> &OWrp<'a>
[23:04:53] <marc_> Is heap compaction on the roadmap?
[23:04:54] <alyx> hi, does Rust have anything like C's dl* functions? (for loading objects at runtime)
[23:04:55] <kimundi> err
[23:05:01] <kimundi> struct OWrap<'a> {i:&'a I, o: O}; fn function<'a>(input: &'a I) -> OWrp<'a>
[23:05:06] <mcpherrin> marc_: No
[23:05:20] *** Quits: jdm (jdm@1F05EAB6.1AD9726E.74119F78.IP) (Ping timeout)
[23:05:22] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[23:05:39] <kimundi> alyx: There are functions for that in libstd, but they are unsafe to use
[23:05:53] <kimundi> no typechecking etc
[23:05:54] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[23:05:59] <alyx> ah
[23:06:06] <marc_> OK, thanks.
[23:06:28] <mcpherrin> marc_: At least not that I know of.  I haven't thought about it before now
[23:06:56] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:07:34] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[23:07:51] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[23:08:40] <geomyidae_> Is nuget having issues? I'm getting a 404 when trying to follow this https://github.com/mozilla/rust/wiki/Doc-how-to-install-an-unofficial-nightly-for-Windows on the last choco install step.
[23:08:47] *** Joins: uzi_mantis (iz@72456C44.6D4462A.DDE5D3F6.IP)
[23:08:57] <marc_> It would be nice to be able to write HTTP based APIs in Rust without having to worry about how long they can run for..
[23:09:07] <robhobbes> so, if I have a variable s of type Option<~str> that is used to call ".chars()" to return Iterator<char> what do I have to do in the current master to have it return the same type of iterator.  If i call "s.iter()" it returns an Iterator<&~str>
[23:09:15] <uzi_mantis> yo guys, i got a general question about tasks in rust
[23:09:17] <marc_> I guess arenas could help with that.
[23:09:42] <mcpherrin> marc_: Arenas and avoiding fragmenty allocation :)
[23:09:56] <mcpherrin> uzi_mantis: that's what we're here for :-)
[23:10:02] <uzi_mantis> awesome!
[23:10:32] <strcat> marc_: memory fragmentation isn't an issue with modern allocators for small allocations (smaller than page size)
[23:10:43] <strcat> marc_: and it's not on issue on 64-bit for large ones
[23:10:47] <ChrisMorgan> marc_: have you evidence that it's a *genuine* problem?
[23:10:53] <strcat> rust won't scale on 32-bit for servers anyway due to not having segmented stacks
[23:11:04] <uzi_mantis> so i'm trying to use tasks to sort of run two processes at the same time, and i'm trying this out: spawn(process_status(stringPath, argVector))
[23:11:20] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[23:11:22] <marc_> ChrisMorgan: nope, it's just question
[23:11:36] <strcat> tcmalloc/jemalloc make heap compaction unnecessary on 64-bit
[23:11:36] <uzi_mantis> it's returning me an error that i'm not sure how to interpret: mismatched types: expected `proc:Send()` but found `std::option::Option<std::io::process::ProcessExit>` (expected fn but found enum std::option::Option)
[23:11:47] <strcat> so we just need to be using either one by default again
[23:11:50] * ChrisMorgan would just assume that it works correctly until proven otherwise
[23:11:59] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[23:12:03] <uzi_mantis> which doesn't entirely make sense to me because i thought spawn simply took a function pointer as a parameter...
[23:12:11] <strcat> ChrisMorgan: memory fragmentation with large allocations is a big issue on 32-bit
[23:12:24] <kimundi> uzi_mantis: well, you're not providing one
[23:12:26] <ChrisMorgan> uzi_mantis: spawn takes a procedure, not a process.
[23:12:31] <robhobbes> how do I get an option<~str> to return a char iterator?
[23:12:45] <mcpherrin> robhobbes: .unwrap().chars()
[23:12:57] <kimundi> .map(|s| s.chars())
[23:13:08] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[23:13:11] * ChrisMorgan was about to say what kimundi said
[23:13:16] <robhobbes> mcpherrin: I'm guessing unwrap is new to master from 0.9?
[23:13:29] <mcpherrin> robhobbes: No, it's been around forever on Options
[23:13:29] <robhobbes> kimundi: so which is it?
[23:13:40] <kimundi> .or(Some("")).map(|s| s.chars())
[23:13:49] <kimundi> robhobbes: which do you want, semantically?
[23:13:51] <uzi_mantis> oh, so it's not working because process_status() in rust returns us a process?
[23:13:51] <ChrisMorgan> robhobbes: unwrap() is basically `match self { Some(x) => x, None => fail!() }`
[23:14:09] <ChrisMorgan> uzi_mantis: spawn is for spawning Rust tasks, not external processes
[23:14:16] <kimundi> rusti: Some(~"foo").or(Some("")).map(|s| s.chars()).to_owned_vec()
[23:14:19] -rusti- pastebinned 8 lines of output: http://ix.io/amH
[23:14:21] <uzi_mantis> that makes sense
[23:14:22] <robhobbes> ChrisMorgan: I'm already matching it first
[23:14:30] <strcat> marc_: rust doesn't really support heap compaction by design, since you'd only be able to do it for garbage collected allocations and only with strict restrictions on what other code ca ndo
[23:14:45] <strcat> and I don't think those strict restrictions will ever be put in place, because gc doesn't have much importance to rust
[23:15:03] <kimundi> rusti: Some(~"foo").map(|s| s.as_slice()).or(Some("")).map(|s| s.chars()).to_owned_vec()
[23:15:03] <strcat> it'd be much less of a systems language if you had to worry about tracing everywhere
[23:15:03] -rusti- <anon>:10:9: 11:6 error: type `std::option::Option<std::str::Chars<>>` does not implement any method in scope named `to_owned_vec`
[23:15:03] -rusti- <anon>:10         Some(~"foo").map(|s| s.as_slice()).or(Some("")).map(|s| s.chars()).to_owned_vec()
[23:15:03] -rusti- <anon>:11     };
[23:15:04] -rusti- error: aborting due to previous error
[23:15:04] -rusti- application terminated with error code 101
[23:15:04] *** Quits: uva_matt (Mibbit@619AA792.9EA65473.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:15:27] <uzi_mantis> is there a decent way you guys know of to help me spawn OS processes in parallel? i was relying on spawn() to help, but i can't find much else that would help other libc stuff
[23:15:30] <ChrisMorgan> robhobbes: given a ~str, Str.chars() is what you want. So then it's just a matter of getting the ~str out of an Option<~str>, which is what the unwrap() does, or the .map() part.
[23:15:39] <kimundi> rusti: Some(~"foo").map(|s| s.as_slice()).unwrap_or("").chars().to_owned_vec()
[23:15:39] <marc_> Thanks for the feedback strcat
[23:15:44] -rusti- pastebinned 11 lines of output: http://ix.io/amJ
[23:16:10] <strcat> marc_: I do think not having compaction is problematic on 32-bit if you use a lot of large vectors, etc.
[23:16:23] <ChrisMorgan> uzi_mantis: I don't think using Process is supposed to block, unless you call .wait(); thus you can spawn multiple processes.
[23:16:30] <strcat> but I don't think rust will really care about 32-bit much
[23:16:39] <strcat> dropping segmented stacks was a big move to not caring about scaling there
[23:16:43] <marc_> I only care about 64-bit anyways
[23:16:50] <patpat> rusti: Some(~"foo").map(|s| s.as_slice()).or(Some("")).map(|s| s.chars()).collect()
[23:16:51] -rusti- <anon>:10:9: 11:6 error: type `std::option::Option<std::str::Chars<>>` does not implement any method in scope named `collect`
[23:16:51] -rusti- <anon>:10         Some(~"foo").map(|s| s.as_slice()).or(Some("")).map(|s| s.chars()).collect()
[23:16:51] -rusti- <anon>:11     };
[23:16:51] -rusti- error: aborting due to previous error
[23:16:51] -rusti- application terminated with error code 101
[23:16:54] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:16:58] <marc_> It was more just a general question
[23:17:02] <strcat> marc_: ah
[23:17:05] <marc_> Thanks for the great answers!
[23:17:09] <mcpherrin> strcat: Well, scaling into having more threads.  It's no the only way to fly :)
[23:17:24] <marc_> A lot of people tend to build webservices in Java for a mix of speed and safety
[23:17:34] <marc_> Then at some point they run into GC issues
[23:17:40] <strcat> marc_: thanks to virtual memory and 64-bit address space, as long as the allocator falls through to mmap/mremap then it won't have fragmentation issues
[23:17:53] <mcpherrin> that's why you buy more RAM, turn off the GC, and just restart processes at the end of trading :)
[23:17:57] <strcat> marc_: because addresses aren't mapped 1:1 and the OS can put stuff anywhere or move it around
[23:18:07] <strcat> marc_: in fact windows 8 and linux can even merge identical pages
[23:18:11] <marc_> Then they realise that an application that pauses while holding a lock is bad
[23:18:17] <marc_> And then you have sadtime
[23:18:46] <strcat> glibc *does* have fragmentation issues even on 64-bit, but we would ideally be defaulting to tcmalloc/jemalloc
[23:19:01] <strcat> or maybe they'll fix glibc and the crappy windows and OS X allocators
[23:19:01] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:19:02] *** ChanServ sets mode: +ao brson brson
[23:19:28] * strcat expects glibc's allocator to get a lot better after vrange lands, but doubts that windows will ever care about fragmentation
[23:19:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:20:06] *** Joins: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[23:20:07] *** Quits: nkoep (nik@moz-6E487D11.pool.mediaways.net) (Quit: Leaving)
[23:20:12] <kimundi> robhobbes: If the Option<~str> is None, do you want to get a char iterator that returns zero chars, or a seperate None value?
[23:20:15] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[23:20:58] <ChrisMorgan> wycats: for http://bit.ly/rust-go-http, I presume you were presenting that as conceptual code?
[23:21:44] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[23:21:52] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[23:22:57] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:23:06] <acrichto> chromatic: want another push to try?
[23:23:10] *** Joins: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP)
[23:23:13] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[23:23:22] <chromatic> acrichto, yes please. I have a good feeling about this one.
[23:23:37] <acrichto> chromatic: pushed
[23:23:59] <ChrisMorgan> wycats: I also hope that you'd never write such completely insecure code (arbitrary path reading/writing) in production!
[23:24:15] <chromatic> Remind me to buy you a beverage of your choice at OSBridge sometime.
[23:24:26] <strcat> marc_: glibc likes to avoid mmap/mremap :(
[23:24:36] <strcat> this is why firefox uses jemalloc even on linux...
[23:24:53] * strcat shrugs
[23:24:53] <wycats> ChrisMorgan: right it's notional
[23:25:06] * ChrisMorgan also presumed that because of the number of errors in it
[23:25:16] *** Quits: lpy (lpy@B3BE13AC.47A0616D.E99F7FDB.IP) (Ping timeout)
[23:25:20] <wycats> Such errors :(
[23:25:42] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[23:25:50] <wycats> ChrisMorgan: I mostly wanted to show that go isn't actually terser or easier to write for the examples people think go is optimized for
[23:26:19] * ChrisMorgan agrees
[23:26:27] <wycats> And maybe make us as a community not just give up entirely on that kind of API
[23:26:32] <wycats> we just need some libraries
[23:26:34] <ChrisMorgan> Rust can be surprisingly concise.
[23:26:37] <apoelstra> kimundi: i just wandered into the channel, but imho None would be more appropriate
[23:27:32] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[23:27:37] <strcat> ChrisMorgan: does rust-http set a unique server flag or anything? I wanted to submit a patch to nmap for it ;p
[23:27:54] <ChrisMorgan> strcat: what do you mean, the Server header?
[23:27:57] <strcat> yes
[23:27:59] <strcat> or just some quirk
[23:28:10] <ChrisMorgan> strcat: no. It's bland HTTP.
[23:28:21] *** Quits: robhobbes (robert@FC24D562.62880861.F47F4656.IP) (Quit: Leaving.)
[23:28:25] <ercxx> strcat: Are you still building dailies for arch?
[23:28:33] <strcat> ercxx: it still tries to build every day.
[23:28:40] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:28:41] <strcat> rust is broken atm, doesn't build in the clean chroot
[23:28:43] <mcpherrin> ChrisMorgan: oh, does rust-http support pipelining or pre-opening the TCP connection?
[23:28:43] <ercxx> 'tries' :)
[23:28:49] <ercxx> I see
[23:28:50] <strcat> well, rust broke
[23:28:56] <mcpherrin> ChrisMorgan: if not, would you accept patches?
[23:28:59] <ChrisMorgan> strcat: if you want to put a Server header in, that's easy—`response.headers.server = Some("Example/1.0")`
[23:29:06] <ercxx> strcat: I didn't know, thank you.
[23:29:24] <strcat> ercxx: I'll try running it again to get the error msg
[23:29:27] *** Quits: amir (amir@moz-467F7F30.cust.bluewin.ch) (Ping timeout)
[23:29:37] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[23:29:54] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[23:30:26] <ercxx> strcat: By the way I was able to run a hello world on android following the docs. So It might be just an extra line, as you said, in your build script.
[23:30:26] <ChrisMorgan> mcpherrin: TCP-level pipelining, yes. Really efficient pipelining (i.e. actually handling a new request as soon as possible rather than when the previous one has finished), not yet (it only became possible when TcpStream.clone() landed a day or two ago).
[23:30:41] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[23:30:48] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[23:30:48] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[23:31:04] <mcpherrin> ChrisMorgan: oh hey I didn't realize it had landed :-)
[23:31:12] <ChrisMorgan> mcpherrin: put another way, it's about as good as any normal thing is, at present, but not yet better. It will be, though.
[23:31:18] *** pmoore is now known as pmoore|away
[23:31:31] <mcpherrin> ChrisMorgan: I'm looking to make some time-sensitive http requests, and having the client re-open a new tcp stream each time would be annoying
[23:31:57] <mcpherrin> (I'm writing a library to control my Phillips hue lamps, and having one light turn off first irks me :)
[23:32:11] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[23:32:16] <ChrisMorgan> mcpherrin: oh, I was thinking of the server when I was saying those things. The client does not have pipelining at all yet.
[23:32:38] <mcpherrin> ChrisMorgan: the perils of having client and server in the same library :-P
[23:32:49] <mcpherrin> Anyways I'm sure I can live with whatever you've got now
[23:33:06] <strcat> ercxx: the build runs in a clean chroot
[23:33:08] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[23:33:11] * ChrisMorgan wants people to hire him for contract work, ideally to do with Rust or rust-http, so that he can justify spending more time working on rust-http
[23:33:16] <strcat> ercxx: I can still build outside of it
[23:33:25] <mcpherrin> it doesn't *really* matter, and I can always just do two requests at the same time
[23:33:42] <strcat> but packages are built in a clean chroot, so they *do* break when a new dependency is added that happens to be on most systems
[23:33:44] <strcat> or whatever it is
[23:33:56] <uzi_mantis> under the impression that processes shouldn't interrupt each other, i'm trying this out: run::Process::new(process, argVector, run::ProcessOptions::new())
[23:34:04] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[23:34:06] *** Quits: igork (igork@moz-18540A65.broadband.corbina.ru) (Quit: Leaving.)
[23:34:09] <ercxx> strcat: Ok
[23:34:10] <uzi_mantis> but, it doesn't seem to be working...
[23:34:22] <strcat> ercxx: trying again so we'll see if I hit it again
[23:34:24] <mzabaluev> strcat: Any stigma to static methods, e.g. Refcounted::from_owned(x) ?
[23:34:38] <strcat> mzabaluev: well a non-static one is preferred
[23:34:59] <strcat> but it's better to use a static one than extend types with unrelated details
[23:35:04] <strcat> in this case I think it's closely related
[23:35:06] <ChrisMorgan> mcpherrin: I'm planning my drastic restructuring of rust-http (current draft name for the entire project: Teepee), and splitting client and server into separate libraries is on the agenda (earlier on I was uncertain, more recently I've decided it's probably a good idea).
[23:35:15] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[23:35:17] <strcat> since either way, you have 1 method or 1 static method on both types
[23:35:26] <mcpherrin> ChrisMorgan: why Teepee?
[23:35:36] <strcat> ercxx: /build/rust-git/src/rust/mk/docs.mk:303: *** multiple target patterns.  Stop.
[23:35:44] <uzi_mantis> oh nvm, it seems like i'm creating a process but not actually running it
[23:36:18] <ChrisMorgan> mcpherrin: it's a name—and rust-http is a little bland. As for the derivation, htTP.
[23:36:21] <mzabaluev> strcat: a linear self-method is more concise, but the self-moving semantic looks quirky to me
[23:36:35] <strcat> mzabaluev: self-moving does work fine
[23:36:40] * strcat shrugs
[23:36:43] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[23:36:44] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[23:36:45] <strcat> mzabaluev: it's an idiom used in the stdlib
[23:36:49] <geomyidae_> So rustc is eventually trying to link against -lpcap with this code: https://github.com/colemickens/rust-pcap But I need it to link against -lwpcap on windows. Is this possible?
[23:36:57] <mzabaluev> strcat: all right then
[23:37:05] <strcat> mzabaluev: PriorityQueue has to_vec and to_sorted_vec doing it
[23:37:07] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[23:37:22] <ChrisMorgan> mcpherrin: there is, with that, the question of spelling—tipi, tepee and teepee are all widely used spellings of the American Indian tent.
[23:37:22] *** Quits: jeffdb (jeffbelg@moz-ABCAA64B.efi.com) (Connection reset by peer)
[23:38:01] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[23:38:23] <geomyidae_> I can't tell what it's inferring the link lib name from.
[23:38:39] <ChrisMorgan> mcpherrin: and the project will be housed at http://teepee.rs/
[23:38:42] *** Quits: Saj (Sajuuk@moz-840D0658.netvisao.pt) (Quit: Leaving)
[23:38:58] <mcpherrin> ChrisMorgan: I can buy that :)
[23:39:06] *** Joins: jeffdb (jeffbelg@moz-ABCAA64B.efi.com)
[23:39:08] * ChrisMorgan was intending to
[23:39:14] <mcpherrin> I'll be honest, I like bland names better ;)
[23:39:21] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: leaving)
[23:39:42] <mcpherrin> unless they're a clever pun disguised as a bland name.
[23:39:50] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[23:39:50] *** ChanServ sets mode: +ao brson brson
[23:39:53] <uzi_mantis> well never mind, run::Process::new() initiates the actual process, no?
[23:39:54] <chromatic> Tee Peers?
[23:40:11] <uzi_mantis> or must i manually command the Processto begin running?
[23:40:29] *** kimundi is now known as zz_kimundi
[23:40:34] <ChrisMorgan> mcpherrin: there are pros and cons both ways. And with the project named teepee, you can still have crates with names like httpc and httpd (dunno whether I *would* or not).
[23:40:52] * ChrisMorgan just needs to read all the .rs TLD T&C thoroughly before getting any .rs domains
[23:41:53] <ChrisMorgan> mcpherrin: http.rs was my initial desire, but it's reserved by the registrar ☹
[23:42:16] <mcpherrin> :-)
[23:42:25] *** Joins: jeffdb1 (jeffbelg@moz-ABCAA64B.efi.com)
[23:42:29] *** Quits: jeffdb (jeffbelg@moz-ABCAA64B.efi.com) (Ping timeout)
[23:42:43] <mcpherrin> httpc.rs / httpd.rs?
[23:42:53] <bjz> r? https://github.com/bjz/sax-rs/pull/13
[23:43:07] <ChrisMorgan> mcpherrin: argh! twice the price! :P
[23:43:49] * geomyidae_ reran the linker with the modified lib name and an extra library path and it built... so I just need to know if there's a macro or something :)
[23:43:49] <ChrisMorgan> mcpherrin: I want it all a unified project, and it won't just be those parts. There are fairly strong similarities with http://spray.io/
[23:43:52] *** Quits: mib_14zig5 (Mibbit@45C4621E.9875BCA6.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:44:04] <strcat> ercxx: alright it's fixed
[23:44:08] <strcat> it'll start working again
[23:44:14] <strcat> thank acrichto 
[23:44:16] <strcat> ;p
[23:44:19] <ercxx> strcat: thank you
[23:44:23] <ercxx> acrichto: thanks 
[23:44:24] *** Quits: hoverbear (hoverbear@moz-4D19F06B.wireless.uvic.ca) (Quit: Taking a nap.)
[23:44:29] <c74d> If Teepee is named for the “TP” in HTTP, would it support other transfer protocols in addition to HTTP?
[23:45:00] <acrichto> ercxx: :D
[23:45:11] <acrichto> ercxx: https://github.com/mozilla/rust/pull/12076
[23:45:16] <o11c> c74d: well, you can transfer things other than hypertext over HTTP ...
[23:45:50] <mcpherrin> I'd just like for everyone to step back a minute and think about the word "hypertext", and how disappointingly infrequently it gets used
[23:46:10] <mcpherrin> If I write an html library for rust, i'm calling it hypertext.rs
[23:46:17] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[23:46:40] <ChrisMorgan> c74d: it's just a name; HTTP and the surrounding protocols (e.g. WebSocket, but not IRC) would be its domain.
[23:46:51] <ercxx> acrichto: that's fast. reminds me of that reddit discussion today about number of closed issues
[23:47:02] *** Quits: uva_student (Mibbit@BCAFCC75.C9F034A2.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:47:05] <acrichto> ercxx: we shall be the champions this year!
[23:48:21] <acrichto> chromatic: http://buildbot.rust-lang.org/builders/try-win/builds/879/steps/compile/logs/stdio <- you're getting closer!
[23:48:54] <mcpherrin> acrichto: Every time a language feature is removed, file a bug for each instance of said feature in rustc.  Close them all when they're removed.  BAM INSTANT VICTORY
[23:49:39] <mcpherrin> Especially if you can automate that process :P
[23:49:43] <acrichto> mcpherrin: Bug #12044, havne't merged comit 8472f24
[23:49:49] <acrichto> mcpherrin: 8472f24, Closes #12044
[23:49:53] <acrichto> \o/
[23:49:57] <chromatic> Hm, thought I fixed that one, but I forgot to delete that line.
[23:50:07] <ercxx> so, what is the best way of using cyclic references at the moment? I'm playing with trees and having hard time passing a reference to 'self' to a child node without using unsafe pointers.
[23:50:21] <mcpherrin> ercxx: Rc and weak pointers
[23:50:26] <acrichto> ercxx: Rc + Weak is a pretty good combination (if you don't want Gc)
[23:50:54] <ercxx> something like Rc::new(self) ?
[23:50:58] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:51:02] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[23:51:12] *** Joins: ecl3ctic_ (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[23:51:23] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:51:29] *** Quits: ecl3ctic_ (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: Leaving)
[23:51:30] <geomyidae_> #[cfg(target_os = "win32")] #[link(name = "wpcap")]
[23:51:30] <geomyidae_> #[cfg(target_os = "linux")] #[link(name = "pcap")] How do I link these attributes together. I want them to apply to the same extern block
[23:51:32] <acrichto> ercxx: yeah, and then .downgrade() -> Weak<T>
[23:51:37] *** Joins: ecl3ctic (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[23:51:43] <acrichto> ercxx: http://static.rust-lang.org/doc/master/std/rc/index.html
[23:52:02] <acrichto> geomyidae_: the solution I've done is to just have empty extern blocks
[23:52:04] <ercxx> acrichto: I looked at that, but then I tried using self again.
[23:52:11] *** Joins: ecl3ctic_ (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[23:52:13] <ercxx> said it was borrowed
[23:52:14] *** Quits: ecl3ctic (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: Leaving)
[23:52:17] *** Quits: ecl3ctic_ (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Connection reset by peer)
[23:52:19] *** Joins: ecl3ctic (ecl3ctic@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[23:52:24] <acrichto> ercxx: oh you'll need to thread Rc through more than that
[23:52:35] *** Quits: io2 (io2@moz-7C3DDBE8.home.otenet.gr) (Ping timeout)
[23:52:35] <acrichto> ercxx: in theory you'd need to take Rc<Self>
[23:52:48] <geomyidae_> acrichto: heh, that appears to work. thanks
[23:52:57] <acrichto> geomyidae_: https://github.com/mozilla/rust/blob/master/src/librustuv/uvll.rs#L675-L691
[23:53:22] <ercxx> acrichto: Any exampls of using Rc with self anywhere that I can learn from?
[23:53:32] <geomyidae_> acrichto: wonderful snippet. thanks
[23:53:47] * geomyidae_ is submitting docs fixes too :)
[23:54:36] <acrichto> ercxx: hm, with self not so much, it generally needs rearchitechting if self can reference self
[23:55:13] <ercxx> acrichto: ok.
[23:55:54] *** Quits: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP) (Quit: Leaving.)
[23:56:34] <geomyidae_> how about #[cfg(windows)] vs #[cfg(target_os="windows")] I think I even saw this come up the other day
[23:56:35] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:56:58] <acrichto> geomyidae_: with nothing else in sight, I prefer cfg(windows), with other target_os cfg's close by, I prefer target_os="win32"
[23:57:22] <eibwen> where can I find docs on those #[cfg(...)]?
[23:57:37] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[23:58:00] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[23:58:08] <acrichto> eibwen: there's a little bit here: http://static.rust-lang.org/doc/master/rust.html#attributes
[23:58:10] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:58:17] <acrichto> eibwen: but that's certainly not complete at all
[23:58:37] *** Quits: halleck (a@moz-99121734.dynamic.mnet-online.de) (Quit: Leaving)
[23:58:50] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:58:52] <eibwen> it says that there is #[cfg(...)], but not what can be placed inside
[23:59:08] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[23:59:20] <acrichto> eibwen: in general, you can say #[cfg(foo, bar, baz)]
[23:59:33] <acrichto> eibwen: and then you say 'rustc --cfg foo --cfg bar lib.rs'
[23:59:44] <eibwen> but there seem to be some standards
[23:59:45] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[23:59:52] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:59:53] <acrichto> eibwen: #[cfg(a, b, c)] == (a && b && c) whereas #[cfg(a)] #[cfg(b)] == (a || b)
