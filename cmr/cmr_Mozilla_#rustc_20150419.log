[00:20:50] *** Joins: p1start (p1start@moz-nftjhe.org)
[00:45:11] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[01:15:03] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[01:19:10] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[01:41:05] *** Quits: aatch (james@moz-rdo.vf5.96.203.IP) (Connection closed)
[01:45:50] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[02:09:17] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[02:13:22] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[02:33:38] *** Quits: kimundi (kimundi@moz-bbai2k.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:34:50] *** Joins: kimundi (kimundi@moz-ope8lo.dip0.t-ipconnect.de)
[02:39:06] *** kimundi is now known as zz_kimundi
[02:46:45] *** zz_kimundi is now known as kimundi
[03:03:28] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[03:07:32] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[03:57:34] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[04:01:36] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[05:45:53] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[05:50:00] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[06:34:44] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[06:35:07] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[06:40:04] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[06:44:06] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[07:00:16] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[07:34:10] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[07:38:18] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[08:08:04] *** Joins: simukis1 (nagisa@moz-8t068g.static.zebra.lt)
[08:09:23] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[08:16:33] *** simukis1 is now known as simukis
[08:23:55] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[08:28:26] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[08:31:18] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[08:32:28] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[09:22:28] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[09:26:36] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[10:16:28] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[10:20:44] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[10:48:34] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[11:10:39] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[11:14:53] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[11:27:42] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[11:51:01] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:04:56] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[12:09:05] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[12:51:02] *** Joins: bombless (_@moz-h37.piv.41.59.IP)
[13:09:53] *** Quits: bombless (_@moz-h37.piv.41.59.IP) (Quit: Leaving)
[13:53:09] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[13:57:21] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[14:36:41] *** kimundi is now known as zz_kimundi
[14:45:28] *** zz_kimundi is now known as kimundi
[14:47:19] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[14:51:33] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[15:25:03] *** Joins: arielb1 (Ariel@moz-r1gm7r.red.bezeqint.net)
[15:25:17] <arielb1> wow ty.rs is so huge
[15:25:23] <arielb1> I can't find anything in it
[15:41:27] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[15:45:31] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[16:35:34] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[16:39:49] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[17:29:44] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[17:34:00] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[18:33:10] *** Joins: brson (brson@moz-b78.mg6.56.172.IP)
[18:33:10] *** ChanServ sets mode: +qo brson brson
[18:43:59] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[18:57:20] *** Quits: brson (brson@moz-b78.mg6.56.172.IP) (Ping timeout: 121 seconds)
[18:58:42] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[19:12:18] *** Joins: brson (brson@moz-232.7vl.56.172.IP)
[19:12:18] *** ChanServ sets mode: +qo brson brson
[19:30:58] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[19:33:36] <arielb1> I think I am going to break ty.rs into smaller files
[19:34:45] *** Quits: brson (brson@moz-232.7vl.56.172.IP) (Quit: leaving)
[19:37:08] <arielb1> I pointed callgrind at rustc
[19:37:11] <arielb1> results:
[19:37:21] <arielb1> 25% of time is spent in selection
[19:37:51] <arielb1> in assemble_candidates_from_impls
[19:38:09] <arielb1> I *am* going to implement superfast reject to fix this
[19:42:30] <arielb1> we're calling skolemize_late_bound_regions *before* fast-reject
[19:42:43] <arielb1> that takes 23% of compilation time
[19:43:27] *** Joins: p1start (p1start@moz-nftjhe.org)
[19:57:54] <arielb1> 23% of no-opt compilation time, I mean
[20:12:18] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[20:14:27] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[20:16:30] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[20:25:15] <arielb1> it seems more like 20% in practice
[20:25:20] <arielb1> but wow
[20:25:38] * arielb1 must run callgrind again to find the new bottleneck
[20:46:12] <simukis> does callgrind even inlined functions?
[20:51:44] <arielb1> simukis: no
[20:51:51] <arielb1> I don't think so, at least
[20:52:03] <arielb1> simukis: it did inline functions
[20:52:08] <arielb1> I run it on optimized rustc
[20:52:17] <arielb1> to do otherwise would be stupid
[21:06:22] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[21:10:40] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[21:14:17] *** Quits: rumpler (Mibbit@moz-b30.tso.126.77.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:19:36] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[21:21:39] <cmr> arielb1: I think what simukis meant is whether code from an inlined function is reported as running in the inlined function or the function that called it.
[21:22:07] <arielb1> cmr: I think it gets accounted to the right function
[21:22:14] <arielb1> but I am looking at cumulatives now
[21:22:27] <arielb1> I can get self-times much easier with perf
[21:23:18] <arielb1> I think I am going to upload a cachegrind
[21:23:22] <arielb1> *callgrind
[21:24:07] <simukis> but rly, wow, two or three speedups of order and working on rustc will become bearable again!
[21:24:20] <arielb1> simukis: 50% is LLVM
[21:24:51] <simukis> yes, if we made the other 50% take a minute instead of 10, it would still be very nice
[21:25:05] <arielb1> coherence seems like it could also use some fast-reject
[21:25:08] <simukis> then we could focus on writing our own optimisation passes and IR
[21:25:30] <arielb1> but it only takes a few percent of compilation time
[21:25:56] <arielb1> 5%, actually
[21:25:59] <arielb1> if I can get rid of i
[21:26:00] <arielb1> *it
[21:26:30] <arielb1> I think my next PR will be to introduce fast_reject to coherence
[21:52:09] <arielb1> after optimization
[21:52:14] <arielb1> 20% is within selection
[21:52:44] <arielb1> 7% is metadata
[21:52:57] <arielb1> another 7% is coherence
[21:53:56] <arielb1> 15% is LLVM passes
[21:55:38] <arielb1> fast_reject takes 3%
[21:56:02] <arielb1> so getting rid of that O(n^2) will give us ~8%
[22:00:33] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[22:04:49] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[22:12:51] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:17:02] <arielb1> I think TyS::eq is missing an inline
[22:17:53] *** Quits: arielb1 (Ariel@moz-r1gm7r.red.bezeqint.net) (Quit: Ex-Chat)
[22:54:54] *** Joins: Rym (y@moz-uso.r81.55.31.IP)
[22:55:53] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[22:55:53] *** ChanServ sets mode: +qo nrc nrc
[22:58:56] *** Quits: Rym (y@moz-uso.r81.55.31.IP) (Ping timeout: 121 seconds)
[23:45:28] *** Joins: aatch (james@moz-4tpcve.pd7t.fvcm.e000.2406.IP)
