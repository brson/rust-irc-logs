[00:07:19] *** Quits: bvssvni (sven@moz-qqolj8.bb.online.no) (Ping timeout: 121 seconds)
[00:07:49] *** Joins: bvssvni (sven@moz-qqolj8.bb.online.no)
[00:15:30] *** Quits: ekidd (ekidd@moz-6t81cn.nh.comcast.net) (Ping timeout: 121 seconds)
[00:15:55] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[00:16:18] <carllerche> bstrie: do you know who was using mio?
[00:17:18] <bstrie> carllerche: I *think* it was one of the startups who presented at the 1.0 meetup. I thought I remembered them mentioning it during their talk
[00:17:24] <bstrie> I could be entirely misremembering though
[00:17:30] <reem> terminal.com probably
[00:17:33] <aturon> yes, it was mentioned, lovingly 
[00:19:34] *** Joins: gsingh93_ (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[00:21:25] <carllerche> bstrie: what's the tl;dr of the blog post (wrt mio)
[00:23:09] <brson> i'm having a hard time motivating myself to write twir
[00:23:45] <carllerche> bstrie: it seems like the blog post is basically sync is easier and go is awesome because it has "lightweight" threading
[00:24:09] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (NickServ (RECOVER command used by Guest49747))
[00:24:09] *** Guest49747 is now known as rovar
[00:24:13] <bstrie> carllerche: I guess the question was "where on this not-a-spectrum does rust fall"
[00:24:22] *** Joins: rovar_ (rovar@moz-6iq.47m.88.38.IP)
[00:24:46] <bstrie> carllerche: I think the *root* concern was that by not having async io in the stdlib, rust's ecosystem will fragment between code that supports async io and code that does not
[00:25:09] <carllerche> bstrie: such as?
[00:25:32] <bstrie> carllerche: I dunno, I didn't say it was a reasonable concern, I just had no way to refute it :P
[00:26:12] <cmr> It's a valid concern. If I'm using ASYNC MAGIC SAUCE 2.5, and hyper exposes mio types, that's inconvenient for me.
[00:26:47] <bstrie> cmr: beyond that though, I think people were concerned that code written with syncness in mind is fundamentally incompatible with asyncness
[00:26:59] <cmr> Yes, that's sometimes true.
[00:27:21] <bstrie> not that two async libs will expose different apis, which is obviously a concern but not until there's actually more than one asio lib
[00:27:37] <cmr> (note: asio refers only to sockets)
[00:27:43] <bstrie> ok
[00:27:57] <cmr> There's nothing Rust can do about that though, not really.
[00:28:22] <cmr> Every environment has to deal with this. Go works around it by being a monoculture. Rust is built around interoperating with other system libraries.
[00:28:25] <carllerche> i don't know, i'm not super worried
[00:28:32] <cmr> Neither am I.
[00:28:38] <bstrie> anyway, I suppose the underlying question is "what percentage of crates.io is unavailable to me if I choose to use mio"
[00:28:49] <carllerche> even if there are multiple async strategies, they can be isolated on different thread(s)
[00:28:53] <cmr> 0%, just shove the sync thing in a thread.
[00:28:59] <carllerche> in fact, I tend to not like mixing event loops for different concerns at all
[00:29:23] <bstrie> hm, yes
[00:29:33] <aatch> Remember, a lot of people aren't aware about how much work systems like Go put in behind the scenes to make their nice async-ness work.
[00:29:38] <carllerche> IMO it is an anti-pattern to put unrelated tasks on the same executor 
[00:29:45] <cmr> carllerche: I agree.
[00:30:09] *** Joins: quibbit (Mibbit@moz-tqkc5a.dyn.telefonica.de)
[00:30:29] *** Quits: quibbit (Mibbit@moz-tqkc5a.dyn.telefonica.de) (Quit: http://www.mibbit.com ajax IRC Client)
[00:30:29] <carllerche> on one hand, i would say that benchmarks would settle the argument, on the other, hello world benchmarks are pretty silly and mostly test the kernel's IO system anyway
[00:30:42] <carllerche> and "real world" benchmarks can't really be compared 
[00:32:31] <aatch> Go basically sacrificed interoptability with non-Go code to get what it has. To the point that the standard library has routines in assembly to do syscalls because switching to the C stack would make it absolutely unusable.
[00:32:56] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[00:33:34] <XMPPwocky> well, isn't that also because they don't require a libc (by design)?
[00:33:44] <carllerche> isn't go moving away from segmented stacks?
[00:34:04] <bstrie> carllerche: on linux, potentially
[00:34:11] <aatch> carllerche, yep, but not to a regular stack either.
[00:34:26] <aatch> So it's not like it solves the problem.
[00:34:47] <cmr> aatch: Doing syscalls "manually" using the actual interface the kernel exposes doesn't really seem like an extreme?
[00:34:55] <bstrie> aatch: are you talking about the switch from growable stacks to relocateable stacks?
[00:35:15] <aatch> cmr, doing that isn't the extreme, it's that they didn't really have a choice.
[00:35:23] <carllerche> i would be interested how a 100 conn concurrency server compares in go vs. sync rust io
[00:35:37] <aatch> bstrie, yep.
[00:36:20] <bstrie> aatch: that already happened, I think they were potentially considering doing away with the scheme entirely on linux. but I can't find a source
[00:36:39] <aatch> bstrie, ah. I don't exactly follow developments in Go.
[00:36:44] <carllerche> i wonder how much overhead a go thread actually saves
[00:37:16] <brson> nrc: does your dst coercion patch #24619 make Box<Trait> work?
[00:37:26] *** Quits: Sho (sho@moz-qnh.np6.168.95.IP) (Quit: Konversation terminated!)
[00:37:50] <nrc> brson: I thought Box<Trait> worked before because of the special casing in the compiler
[00:38:37] <brson> nrc: oh, I meant um, Box<Closure> I think?
[00:38:46] <brson> whatever FnBox is hacking around
[00:39:01] <sfackler> acrichto: you think the android ice was a fluke?
[00:39:12] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[00:39:49] <nrc> brson: I don't think so - I haven't really followed that, but I think it needs some magic around function types and subtyping or something? Rather than changes to the DST stuff
[00:40:03] <nrc> nmatsakis: ^
[00:40:16] <carllerche> bstrie: sequencing operations can also be managed w/ futures (something like github.com/carllerche/eventual)
[00:40:40] <acrichto> sfackler: we generate json metadata of errors in tmp/error-extended/*.json
[00:40:56] <acrichto> sfackler: and I suspect one of those got corrupted
[00:40:59] <aturon> nrc: brson: that needs by-value DST to work, which hasn't been RFC'ed yet
[00:41:13] <nrc> ah, right, that's the missing thing
[00:44:32] *** Quits: gsingh93_ (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[00:49:42] *** Joins: annodomini_ (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[00:49:54] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[00:49:54] *** annodomini_ is now known as annodomini
[00:51:39] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[00:55:55] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[00:56:20] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[00:57:08] *** Quits: Rym (y@moz-2p7.rc2.38.217.IP) (Quit: WeeChat 1.0)
[00:57:11] *** Quits: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP) (Quit: WeeChat 1.1.1)
[00:58:08] <whipsch> brson: i'm assuming you probably want these commits squashed? there's 5 now after i fixed the indentation goof too
[00:59:31] *** Joins: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP)
[00:59:36] <brson> whipsch: it doesn't matter to me
[01:00:15] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[01:00:27] <whipsch> brson: ok, should be all set then
[01:02:15] <brson> whipsch: remind me the #?
[01:02:45] <whipsch> https://github.com/rust-lang/rust-playpen/pull/102 brson 
[01:03:31] <brson> acrichto: how do i deploy playpen?
[01:03:54] <acrichto> brson: git pull
[01:04:00] <acrichto> systemctl restart rust-playpen-web.service
[01:04:08] <acrichto> (that's in the bash history)
[01:04:29] *** Joins: Rym (y@moz-2p7.rc2.38.217.IP)
[01:04:30] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:06:27] <huon> whipsch: that's cool!
[01:06:45] <whipsch> :D thanks
[01:07:02] <whipsch> i want to add support for forking/revisions next
[01:07:44] <whipsch> https://play.rust-lang.org/?gist=b5552ad8232f90e3380b&version=stable
[01:07:46] <whipsch> huzzah
[01:07:46] <brson> whipsch: it's deployed now. thanks
[01:08:04] <huon> hm, I have no idea about this at all, but has someone checked this doesn't violate github ToS (etc.)?
[01:08:22] <brson> huon: i was surprised that it's so easy to create anonymous gists
[01:08:24] <whipsch> huon: i dont believe it does
[01:08:41] <huon> awesome!
[01:08:42] <whipsch> they have it documented that if you use that endpoint without authenticating, it just creates it anonymously
[01:09:08] <whipsch> there is an individual ratelimit it seems
[01:09:14] <whipsch> but that shouldnt effect the playpen as a whole
[01:10:22] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:11:09] <whipsch> does anyone have any input about jquery-like libs to use for cleaning up the playpen js? i mentioned zepto and minified in the PR
[01:11:23] <whipsch> minified seems like it might be a better choice if the extra download size is a major concern
[01:11:47] <whipsch> but i'm not so sure 5KB vs ~30KB is such a huge deal anyway
[01:11:55] <brson> i'd suggest just using jquery since people know it
[01:12:16] <whipsch> right, minified is sorta close but it does have some differences
[01:12:42] <whipsch> and it would be nice to avoid switching in the future if jquery does provide something that would be needed for a new feature that minified does not
[01:13:32] <aatch> brson, eh, most people familiar with javascript *and* Rust probably won't care.
[01:14:21] <huon> whipsch: seems to play badly with run=1: https://play.rust-lang.org/?gist=d6f055c10f46d9bbabbc&version=stable&run=1
[01:14:38] <whipsch> ahhh i didnt realise that was even a feature!
[01:14:53] <whipsch> i'm on it
[01:16:18] <huon> whipsch: also, should it preserve the 'mode' setting like it does for 'version'?
[01:16:53] <whipsch> mode is preserved in localstorage it seems
[01:17:23] <huon> not so useful when linking things to others? :)
[01:17:50] <whipsch> right, it's the ace/vim/emacs editing mode
[01:18:01] <Yurume> woah
[01:18:26] <whipsch> by editing mode i mean keybinds of course
[01:18:55] <huon> oh, yeah, I was thinking of the debug/release mode
[01:19:05] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[01:19:32] *** Joins: brson (brson@moz-ok3.mpe.39.84.IP)
[01:19:32] *** ChanServ sets mode: +o brson
[01:20:09] <whipsch> ah right, that's not exposed as a query parameter currently
[01:20:50] <huon> future enhancement, I guess
[01:21:34] <ChrisMorgan> Frankly, the approach used in the JavaScript of refusing to use globals and passing things round individually is silly, given what it is.
[01:21:54] <ChrisMorgan> One global object, or scattering globals around indiscriminately, would tidy things up a lot.
[01:23:11] <whipsch> yeah, i agree
[01:23:12] <ChrisMorgan> whipsch: such a change as this *needs* the cache-busting parameters in web.html for web.js and web.css to be bumped.
[01:23:57] <whipsch> ChrisMorgan: ah i didn't notice that, thanks
[01:24:22] <whipsch> to be honest i was kinda freaked out at your html at first and i didnt stick around for too long :)
[01:24:24] <ChrisMorgan> Using a library like jQuery is in my opinion unnecessary here; it just needs some other tidying up.
[01:24:48] <ChrisMorgan> whipsch: lots of fun stuff there, like the technique to avoid whitespace nodes between elements…
[01:24:55] <brson> several new inline(always) annotations entered the tree in the last  few weeks
[01:24:59] <brson> these probably should have been just 'inline'
[01:25:26] <ChrisMorgan> *That* evil I will definitely acknowledge as my own. Most of the rest I will claim to merely be following in the tracks of previous authors.
[01:25:38] <ChrisMorgan> Sometimes against my better judgement.
[01:25:41] <whipsch> ChrisMorgan: hehe, i can appreciate it as a technique though
[01:25:45] <whipsch> just never seen it before!
[01:25:46] <brson> oh, one of the prs did get the pushback to change inline(always) to inline
[01:26:37] <ChrisMorgan> whipsch: if you can depend on modern browsers and things like display: flex, you can skip the technique.
[01:27:04] <ChrisMorgan> But when you use things like display: inline-block, you need *some* way of keeping the whitespace out.
[01:28:09] * ChrisMorgan would like to see the playground getting cargo integration
[01:28:38] <Gankro> brson I accepted one that was just inline_alwaysing a function full of debugasserts. Was that a bad call?
[01:30:40] <brson> Gankro: probably. proliferation of inline(always) is pretty punishing on llvm's optimizers so we use it sparingly
[01:31:11] <Gankro> brson: duly noted
[01:31:12] <brson> we used to have lots of them, and there was some point where rustc was just crawling and they were all removed
[01:32:06] <aatch> I proposed changing it to `inline(force)`.
[01:33:46] <Gankro> brson does it do something stupid like inline before any other analysis?
[01:34:22] <aatch> Gankro, nope, but inlining is fairly early in the pipeline.
[01:36:50] <whipsch> brson / huon: https://github.com/rust-lang/rust-playpen/pull/106 r?
[01:37:39] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[01:38:06] *** Quits: brson (brson@moz-ok3.mpe.39.84.IP) (Quit: leaving)
[01:38:19] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[01:38:19] *** ChanServ sets mode: +o brson
[01:38:39] <brson> whipsch: redeployed
[01:38:49] <whipsch> thanks! sorry about that
[01:40:02] <brson> is that broken Arc<raw pointer> example the default when play loads?
[01:40:09] <brson> and if so, why?
[01:40:24] <whipsch> hmmm? should still be a hello world
[01:40:36] <whipsch> likely came from your previous session
[01:40:41] <whipsch> since it uses localstorage
[01:40:42] <cmr> brson: that's your playpen history.
[01:40:47] <brson> huh. when I load play.rlo i see http://is.gd/5CSVne
[01:40:52] <brson> oh
[01:40:57] <brson> can i delete it?
[01:41:00] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[01:41:09] <cmr> ctrl+a backspace?
[01:41:22] <cmr> It's using localstorage, there's probably a browser thing to clear that somewhere..
[01:41:58] <whipsch> localStorage.clear()
[01:42:45] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[01:42:45] *** ChanServ sets mode: +ao erickt erickt
[01:43:30] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[01:44:04] <Yurume> brson: is the compressed URL (i.e. not using gist) still doable for playpen?
[01:44:46] <brson> Yurume: yeah, if you click 'shorten'
[01:45:13] <Yurume> I have a working proof of concept, but that should be probably rebased
[01:45:26] <Yurume> PoC: http://cosmic.mearie.org/2015/01/playpen/
[01:45:37] <Yurume> this particular one uses lzma.js
[01:45:55] <brson> oh, you are referring to something different
[01:45:58] <Yurume> hmm, wait, that was pako (zlib in js)
[01:46:03] <Yurume> brson: yeah
[01:46:21] <ChrisMorgan> brson: if you use Vim mode and wish to clear the editor when the page loads, cG
[01:46:52] <brson> thanks!
[01:47:39] <Yurume> brson: I largely forgot this one until the discussion about the false negative from noscript xss filter from freenode ##rust
[01:48:04] <Yurume> (basically, Rust is similar enough to JavaScript that embedded Rust code triggers XSS filter)
[01:48:52] <XMPPwocky> huh, neat
[01:48:59] <Yurume> I guess gist PR fixes this in another way, but (I think) bstrie said that my PoC may be useful as well
[01:49:22] <Yurume> if you (or ChrisMorgan, perhaps?) are interested in this, I'd like to make a proper PR for that
[01:49:23] <XMPPwocky> is github OK with using ist for that?
[01:49:24] <ChrisMorgan> whipsch: the meta viewport stuff should be bumped from 720 up to about 800 now, too.
[01:49:40] <brson> Yurume: it looks like a good idea to me
[01:49:41] <brson> bbl
[01:49:42] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[01:50:11] <whipsch> ChrisMorgan: eek, ok
[01:50:41] <whipsch> ChrisMorgan: maybe we should collapse the 2 buttons into one share button? with a small dropdown to select the method
[01:50:57] <rovar> weird question: can a boxed trait object be represented by a single object? (it's ptr on the heap)
[01:51:11] <rovar> err ptr to its space on the heap..
[01:51:12] <ChrisMorgan> That’s another thing I need to do, remove the absolute dependency on Ace and allow a textarea; Ace doesn’t work well on mobile browsers.
[01:51:14] <huon> rovar: single object?
[01:51:22] <ChrisMorgan> whipsch: more trouble than it’s worth for now at least.
[01:51:23] <rovar> huon, yea
[01:51:24] <huon> rovar: as in, by a single word?
[01:51:33] <huon> (/single pointer)
[01:52:00] <rovar> basically,  I have a Box<Foo> which I need to store a reference to, and retrieve later
[01:52:09] <rovar> I have 64 bits with which to store said reference
[01:52:14] <huon> Box<Box<Foo>> works
[01:52:21] <rovar> eeck
[01:52:22] <huon> as does &Box<Foo> if you don't need ownership
[01:52:24] <whipsch> ChrisMorgan: probably.
[01:52:41] <huon> there's no way to embed the vtable pointer into the object itself atm
[01:52:48] <rovar> hmm
[01:53:05] <rovar> so I need to be able to store two pointers
[01:53:48] <huon> well, my two suggestions above don't require storing two poiners
[01:53:54] <rovar> yea
[01:53:56] <rovar> this is true
[01:55:01] <rovar> but double heap allocating seems a tad excessive.. and I think I will need to own the item..
[01:55:53] <cmr> You can also use a raw pointer to the Box<Trait> and manage the ownership yourself.
[01:56:40] <rovar> it seems like  let x = boxed::into_raw(my_boxed_foo);  f : Box<Foo> = boxed_from_raw(x); should work
[01:56:53] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[01:57:17] <geofft> that probably destroys the vtable, right? 
[01:57:34] <rovar> cmr, but will from_raw work?   I think it expects a trait, not a trait object
[01:58:59] <huon> rovar: *mut Trait is still a fat pointer
[01:59:42] <rovar> huh
[01:59:47] <geofft> oh right 
[02:00:10] <rovar> which is why from_raw expects to return T : ?Sized
[02:04:11] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[02:04:45] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[02:05:44] *** Joins: tamird (textual@moz-cb8kq7.east.verizon.net)
[02:06:33] *** Quits: zz_kimundi (kimundi@moz-9cad15.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:09:01] *** Joins: zz_kimundi (kimundi@moz-n3m1h7.dip0.t-ipconnect.de)
[02:09:02] *** zz_kimundi is now known as kimundi
[02:11:48] <frewsxcv> i am sorta surprised no one has taken https://crates.io/crates/json yet
[02:12:28] <aatch> That actually reminds me, was there a clean up of empty packages on crates.io at some point?
[02:12:38] <huon> there hasn't been
[02:13:25] <rovar> actually
[02:13:29] <XMPPwocky> win 19
[02:13:46] <rovar> what is the representation of a fat pointer?
[02:13:47] <aatch> Huh, I must be mis-remembering something then. I'm sure I made a package with the intention of putting something in it and never did. I went to delete it since I doubt I'll ever do anything with it.
[02:14:02] <aatch> Either I never made the package, or I deleted it and forgot.
[02:14:03] <rovar> does it look like TraitObject?
[02:14:04] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[02:14:28] <aatch> rovar, a fat pointer is two pointer-sized values, one is a pointer, the other is extra data.
[02:14:59] <rovar> that's what I thought
[02:15:03] <huon> rovar: trait objects look like std::raw::TraitObject
[02:15:12] <rovar> right
[02:15:13] <aatch> rovar, TraitObject is the representation of, well, trait objects.
[02:15:15] <huon> rovar: slice fat pointers look like std::raw::Slice
[02:15:17] <rovar> which is a pair of pointers
[02:15:44] <rovar> I guess I'm just confused by the fact that  *mut Foo is a different size than *mut u64
[02:16:07] <aatch> Basically DST conversion is a loss of compile-time information, that information is stored in the extra word.
[02:16:18] <rovar> I get why
[02:16:37] <rovar> I'm just not sure I like ambiguity for something that looks so obviously like a pointer :)
[02:16:42] <aatch> rovar, well what do you want? Magic? Really slow slices?
[02:16:57] <rovar> I want to be able to store pointers to trait objects in 64 bits :P
[02:17:04] <aatch> rovar, well you can't.
[02:17:19] <rovar> without an additional heap allocation
[02:17:40] <aatch> At least, you can't without a significant amount of extra work.
[02:17:57] <rovar> I'm not too worried about it, I have another layer of indirection at my disposal
[02:18:07] <rovar> really I'm just making sure I'm clear on the concepts
[02:19:25] <manishearth> aatch much prefer if you file an issue a cc me :)
[02:20:00] <manishearth> I am not the god of diagnostics
[02:20:26] <manishearth> I care about them and would like to be
[02:20:30] <aatch> manishearth, not really "issue" material. I just spotted you saying you wanted to improve error messages and have a.. suggestion/idea/thought.
[02:21:10] <manishearth> but until i get time between my intn, servo, and side projects i wont be doing much
[02:21:14] <manishearth> sure!
[02:21:21] <manishearth> *intern
[02:21:55] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[02:22:14] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[02:22:34] <manishearth> aatch what is it?
[02:22:38] <XMPPwocky> i5n?
[02:22:41] <aatch> manishearth, well a typechecker I work with has this concept of "witnesses", and when it displays an error message it uses that information to help explain the error.
[02:23:21] <aatch> manishearth, so you get "Error expected Foo found Bar... here's why I think it should be Foo... here's why I think it's Bar".
[02:24:08] <manishearth> okay
[02:24:10] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[02:24:23] <XMPPwocky> so "conflicting requirements"?
[02:24:27] <manishearth> XMPPwocky: ircing from my phone doesn't always work so well
[02:24:33] *** manishearth is now known as Manishearth
[02:24:39] <XMPPwocky> lifetime errors sort of do that already, though pretty poorly ime
[02:24:54] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[02:25:10] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[02:25:22] <Manishearth> yeah
[02:25:39] <aatch> XMPPwocky, I guess. The aim for this other system was to try and tell a "story" about the error.
[02:25:44] <Manishearth> aatch: could this be integrated somehow?
[02:25:47] <XMPPwocky> hm, interesting
[02:26:03] <Manishearth> I have never looked deeply at typeck or borrowck
[02:27:29] <aatch> Manishearth, I don't see why not. You just record a "witness" each time you see that a value needs some type and/or bound.
[02:27:59] <Manishearth> aatch: this sounds awesome then! :)
[02:28:25] <aatch> Manishearth, hence me bothering you about it :P
[02:28:33] <Manishearth> Note that besides the side issue, there is the typeck-is-too-complicated-for-a-manishearth issue so this is something that would take me a lot of time to get to :P
[02:28:51] <Manishearth> I can help on designing the diagnostics side; as in what could be reported and how
[02:29:45] <Manishearth> and while I intend to really grok the internals of rust someday, that's not going to happen now so most of my diagnostics will either be huge --explains or easy notes for errors that keep coming up on stack overflow
[02:31:19] <aatch> At the very least some way of handling things like "this type doesn't implement that method because of a lack of bounds" properly would be nice (right now that last bit is omitted).
[02:32:04] <aatch> I find that a good number of bad error messages are only bad because of a lack of context.
[02:32:22] <aatch> They're often obvious to experience Rust users, but completely opaque to newer ones.
[02:33:18] <XMPPwocky> yeah, which means feedback from new users is especially important
[02:35:09] <aatch> Yeah, I forget that it's not necessarily obvious that *bounds* actually *increase* how much you can do with a type.
[02:38:48] <aatch> I think the region checker would benefit the most from some error-message TLC though. The borrow checker is actually pretty good for error messages overall.
[02:39:57] <aatch> And while pnkfelix's work was necessary for allowing generic destructors to be safe, it didn't help on that front either.
[02:40:53] *** Joins: clusterfoo (clusterfoo@moz-d970r5.cable.teksavvy.com)
[02:42:21] <Manishearth> aatch: be careful though
[02:42:37] <Manishearth> aatch: note that the way rustc reasons about things is not always the way people reason about things
[02:43:16] <Manishearth> there's an issue on the repo somewhere where an error message talks of a Send bound in the context of the wrong type
[02:43:25] <Manishearth> it is the right type when you look at the inference
[02:43:30] <Manishearth> and the bounds
[02:43:32] <Manishearth> and everything
[02:43:35] <aatch> Manishearth, I know. The problem *I* have is that the way I reason about things is quite close to the way rustc reasons about them. Side-effect of working on the compiler.
[02:43:35] <Manishearth> but otherwise confusing
[02:43:42] <Manishearth> aatch: :D
[02:43:53] <huon> Manishearth: rustc reasoning about things differently to people is precisely one big reason that error messages are confusing
[02:43:58] <Manishearth> yeah
[02:44:13] <huon> i.e. addressing it is always one of the things that is included in fixing diagnostics
[02:44:39] <Manishearth> I'm wondering if a --explain-in-place error which gives "stack traces" of inference and whatnot could help here
[02:44:43] <Manishearth> needs to be designed properly
[02:44:44] <Manishearth> yep
[02:46:37] *** Quits: clusterfoo (clusterfoo@moz-d970r5.cable.teksavvy.com) (Quit: Leaving...)
[02:46:52] *** Joins: steshaw (sid30841@moz-eom82r.uxbridge.irccloud.com)
[02:49:36] <ChrisMorgan> We have cases like “expected T, found ()” where a block has a trailing semicolon where if the type of the last expression in the block was T it would make sense to put a “note: you should probably remove this semicolon”.
[02:49:53] <XMPPwocky> isn't that already done?
[02:50:19] <ChrisMorgan> Oh, we do now. Interesting.
[02:50:28] <ChrisMorgan> Last time I tried it we didn’t.
[02:50:48] <huon> it is slightly inconsistent
[02:51:02] <huon> playbot: fn foo() -> Result<u8, u8> { Ok(1); }
[02:51:03] -playbot- <anon>:9:38: 9:40 error: unable to infer enough type information about `_`; type annotations required [E0282]
[02:51:03] -playbot- <anon>:9         fn foo() -> Result<u8, u8> { Ok(1); }
[02:51:03] -playbot- output truncated; full output at: http://bit.ly/1Gl25gp
[02:51:08] <Manishearth> ChrisMorgan: that's like the first diagnostic I want to fix
[02:51:10] <huon> playbot: fn foo() -> Result<u8, u8> { Ok::<u8, u8>(1); }
[02:51:11] -playbot- <anon>:9:9: 9:56 error: not all control paths return a value [E0269]
[02:51:11] -playbot- <anon>:9         fn foo() -> Result<u8, u8> { Ok::<u8, u8>(1); }
[02:51:11] -playbot- output truncated; full output at: http://bit.ly/1HoDHsN
[02:51:14] <ChrisMorgan> Actually, it only happens on return types.
[02:51:24] <ChrisMorgan> I want it on arbitrary expressions.
[02:52:14] <ChrisMorgan> It happens on E0269 (not all control paths return a value), I want it on E0308 (mismatched types, expected T, found ()).
[02:52:48] <XMPPwocky> a "doesn't return a value" instead of the confusing plural "not all control paths" would be nice too
[02:52:56] <XMPPwocky> that confused me a few times, although technically correct
[02:56:59] *** Joins: shmoo (Mibbit@moz-fnjms3.fios.verizon.net)
[02:59:25] <carllerche> I'm really bad at writing docs
[03:00:51] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[03:10:28] *** Quits: shmoo (Mibbit@moz-fnjms3.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:10:39] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[03:15:32] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:16:09] <huon> acrichto: steveklabnik: it'd be great if we could republish a copy of the docs, or even just manually upload a new copy of http://doc.rust-lang.org/book/the-stack-and-the-heap.html
[03:16:32] <huon> acrichto: steveklabnik: there's been a *lot* of questions (and several issues) filed about the tables being misformatted
[03:18:51] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[03:21:09] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[03:21:34] *** Joins: c74d (c74d3a4ebb6@moz-4kqsd0.mggc.hibn.4404.2002.IP)
[03:21:36] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:26:21] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:32:34] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:34:39] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[03:34:46] *** blaenk_ is now known as blaenk
[03:36:32] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[03:36:52] *** Quits: ytain (ytain@moz-07c3h9.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[03:42:43] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[03:43:45] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:47:09] *** Quits: andreabedini (andreabedin@moz-fpvfar.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:52:02] <acrichto> huon: I'll try to upload a new copy manually
[03:52:06] <acrichto> it should just be that one html file
[03:55:36] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[03:57:14] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Quit: Leaving)
[03:58:07] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[04:00:00] <huon> hey whipsch, if you have a reddit account you should comment on http://www.reddit.com/r/rust/comments/36fuus/gist_sharingloading_support_for_playpen/ to get some sweet sweet karma :)
[04:03:03] <SimonSapin> oops, I just typoed Rust stable as "stale"
[04:03:43] <blaenk> its true though
[04:03:45] <blaenk> stable rust is stale
[04:03:49] <blaenk> need some hourlies
[04:03:57] <blaenk> multirust default hourly
[04:12:46] <SimonSapin> blaenk: I’ve heard the Firefox release team found out they could do 10 releases per day
[04:12:54] <blaenk> lol
[04:14:13] <XMPPwocky> congratulations to everybody on the release of Rust 1.2183391
[04:14:56] <bstrie> does semver allow underscores in version numbers, I wonder
[04:15:09] <bstrie> to make it easier to read when your version number escalates into the millions
[04:16:19] <blaenk> haha
[04:16:55] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:18:59] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:21:07] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:26:39] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:26:55] <Gankro> bstrie: is your stance on unsafe fields the same today as in https://github.com/rust-lang/rfcs/pull/80 ?
[04:30:04] *** Joins: andreabedini (andreabedin@moz-fpvfar.iinet.net.au)
[04:31:27] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[04:32:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:36:48] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[04:38:03] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:38:03] *** ChanServ sets mode: +ao erickt erickt
[04:39:49] *** Quits: kmcguire (kmcguire@moz-9v3.1ni.137.104.IP) (Ping timeout: 121 seconds)
[04:41:49] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[04:46:50] <bstrie> Gankro: back then I mostly filed the rfc to spur discussion about whether or not anyone thought it could be useful
[04:47:29] <bstrie> Gankro: now that we have unsafe impl/unsafe trait maybe it makes sense to think about this again
[04:48:39] <Gankro> bstrie: The example of Vec itself is still material; `len` and `cap` are unsafe to change, strictly speaking
[04:49:04] <Gankro> I'm not convinced it's actually *useful* to be able to state that it's unsafe, though
[04:49:46] <Gankro> Similar to my arch nemesis, Option<NonZero<rawptr>>
[04:50:11] <bstrie> Gankro: you were saying how it's fine to have unsafe-but-marked-safe interfaces as long as those aren't publicly accessible. I'd say that if that's fine, the unsafe fields aren't necessary
[04:50:28] <reem> Gankro: What has Option<Unique<NonZero<*mut T>>> ever done to you?
[04:50:33] <bstrie> i.e. if privacy is going to be the ultimate arbiter of safety anyway, then just make the field private
[04:50:39] <reem> :p
[04:50:51] <Gankro> reem: It makes code more verbose while providing next-to-nothing semantically
[04:51:06] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[04:51:13] <Gankro> reem: (Unique implies NonZero fwiw)
[04:51:15] <blaenk> erickt: awww yee :D
[04:51:31] <erickt> blaenk: I aim to please!
[04:51:34] <blaenk> :)
[04:51:38] <Gankro> bstrie: That's my own (perhaps radical) assertion, though. The community hasn't agreed to my interpretation of unsafe
[04:51:52] <erickt> blaenk: I'm going to modify it a tad though to make it not require an allocation
[04:51:56] <Gankro> Although my interpretation is the only that can *work* today
[04:52:03] <Gankro> because we lack things like unsafe fields
[04:52:04] <blaenk> erickt: sounds good!
[04:52:09] <bstrie> Gankro: if we disagree with your notion of unsafety, then I think that will absolutely require unsafe fields
[04:52:23] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:52:24] <bstrie> Gankro: so first we need to have this philosophical debate
[04:52:44] <Gankro> bstrie: Basically my next 3 months
[04:53:07] <Gankro> inb4 I get unsafe removed from the language as "not useful"
[04:53:18] <bstrie> Gankro: either way, the fundamental guarantee of rust is "if you don't write unsafe code yourself, then it's never your fault if you segfault" remains true
[04:53:30] *** Quits: c74d (c74d3a4ebb6@moz-4kqsd0.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[04:53:38] <Gankro> bstrie: at the crate-level, sure
[04:53:45] <Gankro> maybe the module level
[04:53:57] <Gankro> inter-module, that is
[04:53:59] <bstrie> I presume that if you can touch one file of the crate, you can touch all of them
[04:54:08] <bstrie> but maybe other people want stronger guarantees
[04:54:44] <Gankro> I think a file is a pretty reasonable unsafe-boundary
[04:54:55] <bstrie> Gankro: I'd say the most compelling motivation would from teams of people writing large software that want stronger guarantees where privacy can't save them
[04:55:01] <bstrie> so in other words, ask servo if this feature would help
[04:55:15] *** c74d3 is now known as c74d
[04:55:59] <Manishearth> bstrie: servo is listening :p
[04:56:11] <Gankro> Manishearth: Gotta a position?
[04:56:17] <Manishearth> ?
[04:56:24] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[04:57:17] <bstrie> Manishearth: Gankro's current philosophy is that it's fine to have potentially unsafe functions not marked as unsafe as long as those functions remain private, because rust literally can't enforce anything else
[04:57:42] <bstrie> Manishearth: the question is whether we should add mechanisms where privacy isn't necessary for unsafety enforcement, which seems most valuable for large teams on large projects
[04:58:23] <Gankro> It's not clear to me that having to write `unsafe` more or less in a module is intrinsically useful
[04:58:37] <huon> I think it's fine but not recommended
[04:58:42] <huon> `unsafe` is there to help you
[04:58:43] <Manishearth> I'm not sure I get this
[04:58:47] <reem> I think unsafe fields are most useful for just making the public API look nicer for stuff like Vec
[04:58:49] <Manishearth> But a couple of points
[04:58:59] <reem> since it makes sense to want to set the length
[04:59:10] <Gankro> reem: So you would make Vec's fields to be litterally public?
[04:59:17] <Manishearth>  - Your library is still working according to Rust standards if it uses bad safe functions internally
[04:59:28] <Manishearth>  - Servo uses `unsafe` internally all the time
[04:59:41] <reem> Gankro: I wouldn’t necessarily want it in stable std, but if Vec was some library yes
[04:59:47] <Manishearth>    effort is put into making sure we don't footgun ourselves
[04:59:54] <XMPPwocky> reem: then why make *anything* private?
[05:00:06] <huon> XMPPwocky: semver
[05:00:12] <reem> a vector is going to have a length
[05:00:13] <Manishearth> A fundamental trait of large projects like Servo is that nobody knows everything. Unless you're pcwalton, but sadly we only have one of those
[05:00:37] <Gankro> reem: Not a `Vec<T, Stack<n>>` ;)
[05:00:50] <Manishearth> This means that if I, a DOM contributor, needs to update layout to reflect some changed APIs, I may accidentally use an unsafe function in a way that it was not intended to
[05:00:56] <Manishearth> heck, I might do the same in the DOM
[05:01:05] <reem> Gankro: oh jeez
[05:01:17] <reem> exactly, so not stable std
[05:01:19] <Manishearth> we use unsafe all over the place for internals; we even have lints to help deflect footguns
[05:01:24] <reem> but almost any other library could release a new version for that
[05:01:57] <bstrie> Manishearth: would it be helpful to be able to mark struct fields as unsafe, as an extension of that policy?
[05:02:03] <Manishearth> hmm
[05:02:13] <bstrie> presumably this means reading them is safe, but setting them isn't
[05:02:27] <Manishearth> bstrie: not necessarily
[05:02:35] <bstrie> counterexamples?
[05:02:37] <Manishearth> well okay that sounds like a decent policy
[05:03:21] <Manishearth> no I mean that you may have unsafe abstractions internally. Though in those case those shouldbe of the form that using them requires unsafe {}
[05:03:53] <bstrie> which would be an argument in favor of unsafe fields, then
[05:04:21] <Manishearth> But we should realzie that while Rust tries to restrict unsafe to behavior, not data (i.e. you need `unsafe` at the call site, no data is intrinsically unsafe in itself. For example *mut T is fine to have, just that using it requires unsafe)
[05:04:27] <Manishearth> So
[05:04:51] <kimundi> Imo unsafe fields are required (and be unsafe both to read/write) for proper non-privacy based unsafe abstractions
[05:04:53] <Manishearth> there is a case to be made that an  unsafe field may contain possibly poisoned data too
[05:04:56] <Manishearth> BUT
[05:04:56] <bstrie> Manishearth: setting the field *is* the behavior here
[05:05:03] <Gankro> Manishearth: worth noting that's subtly different: obtaining a value vs setting a value in a particular location
[05:05:20] <Manishearth> bstrie: no I mean that there's a chace that we obtain a value that is poisoned
[05:05:29] <Manishearth> BUT
[05:05:59] <Manishearth> if we make it clear that it is safe to read from unsafe and try to ensure that API authors don't mark poisonable fields as unsafe
[05:06:03] <Gankro> kimundi: Do you think such a thing pulls its weight, though? Is privacy insufficient?
[05:06:07] <Manishearth> (instead keeping them private)
[05:06:12] <Manishearth> we should be fine
[05:07:10] <Manishearth> bstrie: Gankro For a contrived example, imagine that I had some wrapper around a Vec which sometimes puts Vec in unsafe intermediate states
[05:07:10] <kimundi> Gankro: Well if it comes down to it I'd say that its just plain not privacies job to uphold safety - its not wrong to use it for it, but the bigger the project becomes the more error prone that approach becomes
[05:07:20] <bstrie> Gankro: it would be illuminating to actually see the verbosity increase that would result from trying to make some data structures internally-unsafe-consistent
[05:07:33] <Manishearth> +1
[05:07:34] <kimundi> bstrie+
[05:08:17] <bstrie> Gankro: for all I know we might need even *more* mechanisms than just unsafe fields to make this sound, which would influence the decision
[05:08:36] <Manishearth> bstrie: Gankro XMPPwocky FWIW in Servo DOM we mark all fields private on pain of being linted
[05:08:48] <Manishearth> All dom structs are intrinsically #[privatize]
[05:09:15] <Manishearth> We use getters/setters when needed. Usually it's not needed :p
[05:09:16] *** Joins: Rym_ (y@moz-2p7.rc2.38.217.IP)
[05:09:24] <Gankro> bstrie: Mostly it's the pressure to *decrease* the number of locations that are "unsafe", that I find increases the verbosity; people build more complex "zero cost" abstractions to make static guarantees. At some limit this harms understanding of what are often quite simple things. This can lead to errors that are perhaps not "unsafe" but bad nonetheless.
[05:10:07] *** Quits: Rym (y@moz-2p7.rc2.38.217.IP) (Connection closed)
[05:10:24] <bstrie> Gankro: even in the presence of unsafe fields, anyone is free to act as they do today and fail to mark internal functions unsafe. as I said, this doesn't change the fundamental guarantee of rust
[05:10:48] <bstrie> as far as consumers are concerned, there's no difference there
[05:10:56] <Gankro> bstrie: I'm more so arguing for my overarching philosophy of "don't sweat the precise location of unsafety"
[05:11:17] <Gankro> Or SLOUnsafeC
[05:11:32] <bstrie> Gankro: I'm also sympathetic to the notion that adding unsafe annotations to the code is more self-documenting than comments
[05:11:43] <Gankro> bstrie: Not really
[05:11:46] <Gankro> Well sort of
[05:11:53] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Quit: Leaving)
[05:11:56] <Gankro> But *just* marking the field is useless
[05:12:22] <Gankro> You still need to document why it's unsafe and everyone still needs to know the rules around that field
[05:12:24] <bstrie> Gankro: so, I think the dovetails with your idea for TURPL. I suggested you have a chapter where you take a well-known module and make the internal unsafety fully explicit, just for demonstration purposes
[05:12:34] <bstrie> so either way you'd be doing this work
[05:12:35] <Manishearth> TURPL?
[05:12:41] <Manishearth> The Unsafe Rust Programming Language?
[05:12:47] <Gankro> Manishearth: yeah
[05:13:10] *** Joins: redshift_ (redshift@moz-7qg.ain.246.204.IP)
[05:13:33] <Gankro> bstrie: Also the field being unsafe might get washed out a lot of the time in "I'm using the field in an unsafe context anyway"
[05:13:46] <Gankro> e.g. `unsafe { ptr.offset(len); len += 1 }
[05:14:22] <Gankro> Maybe an argument for hyper-granular `unsafe` blocks
[05:15:59] *** Quits: redshift (redshift@moz-c8c.73t.246.204.IP) (Ping timeout: 121 seconds)
[05:16:06] <Manishearth> So one gripe against unsafe fields
[05:16:08] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[05:16:12] <bstrie> there's no question that attempting to enforce internal unsafe consistency would increase verbosity. I'm not going to advocate for it until I see exactly how verbose it is, and also whether we know that unsafe fields actually close all the holes
[05:16:26] <Gankro> bstrie: Manishearth: https://github.com/rust-lang/rust/pull/21973 is kind've a good example of what I'm seeing. I understand HashMap's internals at an ok level. But this new refactor pushes more stuff into types, and I'm finding it a lot harder to grok now.
[05:16:41] <Manishearth> With unsafe funcs generally any invariants or UB will be documented
[05:16:59] <Manishearth> With unsafe fields I fear that people may not look at the internals of the code
[05:17:12] <Manishearth> and assume the inner workings to be logical
[05:17:17] <Manishearth> and cause UB or other problems
[05:17:48] <Manishearth> To be clear, I like unsafe fields, but I can see some ways this could be an unintentional footgun
[05:17:50] <Gankro> I'm used to a more... controlled... environment than Servo, though
[05:17:56] <Manishearth> kinda like transmuting &mut ptrs
[05:18:14] <Manishearth> you don't think that would be a problem, but it's UB
[05:18:26] <XMPPwocky> i think part of the issue with not having unsafe fields is that because it's Rust, you don't just need setters and getters to cover all casese
[05:18:29] <Manishearth> even though it's unsafe {} there's an expectation to how it works
[05:18:38] <Manishearth> agreed
[05:18:49] <XMPPwocky> you need setter, getter by value, shared reference getter, and mutable shared reference getter (if not covered by setter)
[05:19:40] <Manishearth> yes
[05:20:00] <XMPPwocky> i think that a better ability to abstract over that... even just a macro... would make unsafe fields a little less important
[05:21:27] <Manishearth> urgh
[05:21:32] *** Joins: skeuomorf (skeuomorf@moz-k2d.2md.32.197.IP)
[05:21:49] <Manishearth> the RUstacean within me is forbidding me from randomy writing bytes to a buffer across FFI until I know exactly how android uses the buffer
[05:22:36] <Manishearth> Everyone should just switch to rust so I can write code in peace
[05:22:41] <Manishearth> stupid internalzied borrow checker
[05:22:48] <Manishearth> *internalized
[05:23:26] <aatch> Manishearth, I've always had that problem, well a similar one. I have to know what something actually does. Docs are frustratingly vague at times.
[05:23:37] <XMPPwocky> i was messing around with Rust mods for the Source engine
[05:23:48] <XMPPwocky> it's obnoxious because memory management details are undocumented
[05:23:57] <Manishearth> aatch: yeah
[05:24:05] <XMPPwocky> so you just sort of have to hope that your understanding of the reverse-engineered engine internals is correct
[05:24:21] <XMPPwocky> 90%  of everything is global, too, so that's nice
[05:24:22] <Manishearth> but I used to just ignore it (partially because I used to only do personal toy things)
[05:24:30] <XMPPwocky> the stuff that's not global is on the heap, with a global pointer to it :P
[05:24:45] <XMPPwocky> i ended up just putting watchpoints on things to see when it was safe to access them
[05:25:00] <Manishearth> haha
[05:34:30] *** Quits: O01eg (o01eg@moz-ivb.9s5.165.5.IP) (Client exited)
[05:35:03] *** Quits: Diggsey (diggsey@moz-5reor3.dsl.pipex.com) (Ping timeout: 121 seconds)
[05:36:17] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[05:37:16] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:38:04] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[05:39:52] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Ping timeout: 121 seconds)
[05:40:54] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[05:44:16] *** Quits: Rym_ (y@moz-2p7.rc2.38.217.IP) (Ping timeout: 121 seconds)
[05:44:50] <sfackler> acrichto: is the android builder out of disk space or something? why is that json error popping up everywhere
[05:46:03] <acrichto> sfackler: it's related to checking the uniqueness of errors, it looks like the directory is blown away between runs so I can't verify, but it has to do with crates that compile in parallel
[05:46:06] <acrichto> it's reading invalid json
[05:46:17] <acrichto> I'll just make a PR to remove that stuff for now
[05:47:13] *** Quits: nrc (nrc@moz-9luh02.xtra.co.nz) (Ping timeout: 121 seconds)
[05:47:34] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[05:48:09] <acrichto> huon: pushed a fix to the-stack-and-the-heap.html
[05:49:03] <Manishearth> acrichto: btw, about the proposed community subteam, should we start a discussion on what the roles and powers should be, or is the core drafting something?
[05:50:06] <huon> acrichto: awesome!
[05:50:08] <Manishearth> (Are you expecting us to come up with a draft, or should we expect you to? Either is fine, but it should be clear which :P )
[05:50:26] <acrichto> Manishearth: I suspect that this will be discussed soon in an upcoming meeting
[05:50:46] <Manishearth> cool
[05:51:04] <Manishearth> just wanted to make sure we weren't in an invisible deadlock :p
[05:53:15] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[05:54:53] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:58:51] *** Quits: aatch (james@moz-8r6eer.orns.ubhm.e000.2406.IP) (Connection closed)
[05:59:10] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[05:59:39] <skeuomorf> Hey folks, what's the story on std::hash::hash? Is there an issue tracking it (given it's unstable and all)?
[06:01:09] <Manishearth> Gankro: ^
[06:01:14] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[06:02:55] *** Joins: James (quassel@moz-ph8o2f.range86-163.btcentralplus.com)
[06:03:51] *** Quits: achanda_ (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[06:11:08] *** Joins: Rym_ (y@moz-2p7.rc2.38.217.IP)
[06:15:14] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:15:37] *** Quits: Rym_ (y@moz-2p7.rc2.38.217.IP) (Ping timeout: 121 seconds)
[06:15:58] <sfackler> it seems pretty harmless :) http://doc.rust-lang.org/stable/src/core/hash/mod.rs.html#171-175
[06:16:03] *** kimundi is now known as zz_kimundi
[06:16:32] <sfackler> though maybe to the point of not being particularly useful
[06:16:51] <sfackler> especially since the H paramter will need to be manually specified almost all the time
[06:16:52] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[06:25:28] <reem> How do I get a struct to actually be (u16, u32)?
[06:25:36] <reem> (in memory)
[06:25:43] <reem> (with no padding)
[06:26:55] <sfackler> #[repr(packed)] maybe?
[06:27:23] <reem> playbot: #[repr(packed)] struct X(u16, u32); std::mem::size_of::<X>();
[06:27:24] -playbot- ()
[06:27:25] <reem> playbot: #[repr(packed)] struct X(u16, u32); std::mem::size_of::<X>()
[06:27:27] -playbot- 6
[06:27:38] <reem> playbot: #[repr(packed)] struct X(u16, u32); std::mem::align_of::<X>();
[06:27:39] -playbot- ()
[06:27:39] <reem> playbot: #[repr(packed)] struct X(u16, u32); std::mem::align_of::<X>()
[06:27:40] -playbot- 8
[06:27:40] <reem> omg
[06:28:20] <sfackler> though keep in mind that unaligned reads can make CPUs sad
[06:28:30] <reem> So can I transmute directly from &[u8] to &[X] in this situation?
[06:28:40] <reem> if the u8s are (u8, u16)*
[06:28:52] <reem> u16, u32*
[06:31:06] <huon> playbot: #[repr(packed)] struct X(u16, u32); std::mem::min_align_of::<X>()
[06:31:08] -playbot- 1
[06:31:26] <huon> https://github.com/rust-lang/rust/issues/21611
[06:32:09] <huon> reem: ^
[06:32:23] <reem> excellent
[06:36:02] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[06:36:05] <bstrie> huon: what's the status of that bug?
[06:36:29] <huon> "huon forgot about it until now"
[06:36:33] <skeuomorf> sfackler: yupe
[06:36:37] <huon> :/
[06:39:02] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[06:39:15] <bstrie> huon: but I'm unclear on what's being decided on there, is it that we should rename the function and deprecate align_of?
[06:44:00] <doener> acrichto: pong
[06:46:13] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:46:51] <doener> Gankro: IR is expected to break, the BC is expected to be readable by newer versions. Shouldn't really affect us either way. And the biggest change I'm aware of is preparation for the typeless pointer change, adding some type specifications here and there
[06:47:49] <doener> Gankro: e.g. 3.6 also changed !metadata to just !
[06:49:02] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[06:51:42] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[06:54:20] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:54:56] *** Quits: James (quassel@moz-ph8o2f.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[07:01:39] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:05:22] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[07:05:23] *** ChanServ sets mode: +o nrc
[07:09:15] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:09:24] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:10:31] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (A TLS packet with unexpected length was received.)
[07:11:39] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[07:21:54] <bstrie> doener: llvm upgrade?
[07:23:34] <doener> bstrie: acrichto was working on one yesterday
[07:23:50] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[07:24:20] <doener> bstrie: I only learnt about that yesterday evening and went to bed super early, so I have no idea what's the status of that. 
[07:26:49] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[07:30:39] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[07:31:05] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[07:31:06] *** ChanServ sets mode: +ao pnkfelix pnkfelix
[07:32:14] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[07:34:49] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[07:34:59] *** Quits: andreabedini (andreabedin@moz-fpvfar.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:38:09] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[07:45:22] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[07:46:28] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[07:48:10] *** Joins: zmack (zmack@moz-3t9.aat.233.213.IP)
[07:49:35] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[07:50:53] *** Quits: zmack (zmack@moz-3t9.aat.233.213.IP) (Connection closed)
[07:54:09] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[07:54:20] *** Joins: llogiq (andre@moz-4e63or.reverse.dsi.net)
[07:55:09] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Ping timeout: 121 seconds)
[07:58:27] *** Joins: andreabedini (andreabedin@moz-fpvfar.iinet.net.au)
[07:58:30] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:03:04] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[08:03:13] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:08:45] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[08:08:46] <llogiq> Hi folks. I'm writing another lint (see https://github.com/Manishearth/rust-clippy/issues/32 if you're interested), and I want to lookup a method from the type of an arbitrary Expr. My previous futile attempt was to get the Def from the def_map and lookup ids from ctxt.impl_items or ctxt.trait_item_def_ids.
[08:09:24] <llogiq> Can someone point me to a solution how to find methods for the type of an expression?
[08:09:40] *** Joins: killercu_ (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[08:09:47] *** Joins: zmack (zmack@moz-3t9.aat.233.213.IP)
[08:10:15] <llogiq> Namely, I want to match `*x*.len() == 0` if the type of x has an `is_empty(self)` method.
[08:10:31] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[08:10:41] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Connection closed)
[08:10:44] *** Quits: zmack (zmack@moz-3t9.aat.233.213.IP) (Connection closed)
[08:11:01] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[08:12:22] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[08:12:28] *** zz_kimundi is now known as kimundi
[08:12:31] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[08:15:44] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[08:16:53] <aatch> There a reason we don't have an `expect` intrinsic exposed? Just nobody bothered to do it?
[08:17:23] <Manishearth> aatch: expect?
[08:17:27] <Manishearth> oh, static asserts?
[08:17:38] <Manishearth> oh no thats not what you mean
[08:17:38] <aatch> Manishearth, no, branch prediction hints
[08:17:44] <aatch> for likely/unlikely
[08:18:14] <Manishearth> ah nice
[08:18:15] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[08:20:19] <aatch> I've got a branch in my code that has a chance of about 1 in 9 quintillion chance of being taken (on 64-bit), would be nice to tell the compiler that.
[08:20:30] *** Parts: llogiq (andre@moz-4e63or.reverse.dsi.net) ("Verlassend")
[08:20:33] *** Joins: llogiq (andre@moz-4e63or.reverse.dsi.net)
[08:21:30] <aatch> It's about 1 in a billion on 32-bit.
[08:22:42] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[08:22:50] <Manishearth> are there llvm intrinsics for this? doener ?
[08:22:55] <aatch> There are
[08:22:56] <Manishearth> I assume so
[08:22:59] <Manishearth> yeah
[08:23:03] <aatch> And we already use it
[08:23:06] <Manishearth> ah
[08:23:07] <doener> #[cold]
[08:23:08] <aatch> We just don't expose it.
[08:23:47] <aatch> It's amusing that we expose `assume` but not `expect`.
[08:24:01] <doener> ah, no, that's just for functions...
[08:24:29] <doener> I thought it was also mapped to expect for some other things... maybe in a different language...
[08:31:44] *** Joins: zmack (zmack@moz-s8k.mjk.55.92.IP)
[08:32:19] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Quit: leaving)
[08:32:29] *** Quits: killercu_ (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Quit: Bye)
[08:32:29] *** Joins: zmack_ (zmack@moz-3t9.aat.233.213.IP)
[08:32:45] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[08:35:46] *** Quits: zmack (zmack@moz-s8k.mjk.55.92.IP) (Ping timeout: 121 seconds)
[08:41:32] *** Joins: laumann (thomas@moz-33d.hq0.225.130.IP)
[08:42:42] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:42:52] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[08:46:48] *** Joins: aepsil0n (eduard@moz-ob9p8k.hsi8.kabel-badenwuerttemberg.de)
[08:47:29] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[08:49:51] *** Quits: zmack_ (zmack@moz-3t9.aat.233.213.IP) (Connection closed)
[08:50:49] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[08:53:08] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[09:06:22] *** Quits: laumann (thomas@moz-33d.hq0.225.130.IP) (Ping timeout: 121 seconds)
[09:06:26] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[09:07:25] *** Quits: andreabedini (andreabedin@moz-fpvfar.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:07:33] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[09:07:44] *** Joins: laumann (thomas@moz-33d.hq0.225.130.IP)
[09:09:42] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[09:11:49] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[09:14:32] *** Quits: Kxepal832 (Miranda@moz-6got8b.pppoe.mtu-net.ru) (Client exited)
[09:14:33] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[09:14:57] *** Joins: Kxepal (Miranda@moz-6got8b.pppoe.mtu-net.ru)
[09:19:16] *** Quits: njn (chatzilla@moz-e7amqe.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 41.0a1/20150517160022])
[09:19:23] *** Joins: kushal (kdas@moz-pab4mk.202.sitibroadband.in)
[09:21:03] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:23:14] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[09:26:13] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[09:29:43] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[09:30:42] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Connection closed)
[09:31:26] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[09:33:34] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[09:34:10] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[09:36:12] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[09:36:18] *** Quits: Kxepal (Miranda@moz-6got8b.pppoe.mtu-net.ru) (Client exited)
[09:36:45] *** Joins: Kxepal (Miranda@moz-6got8b.pppoe.mtu-net.ru)
[09:38:27] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[09:39:16] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[09:39:50] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:42:35] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[09:46:49] *** Joins: ekidd (ekidd@moz-6t81cn.nh.comcast.net)
[09:52:10] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[09:52:25] *** Joins: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr)
[09:55:39] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[10:03:33] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[10:07:22] <llogiq> Can someone point me in the right direction on how to use rustc::middle functionality to look up a method for a syntax::ast::Expr?
[10:08:16] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:08:23] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[10:10:19] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[10:15:09] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[10:15:11] *** Quits: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr) (Quit: )
[10:17:45] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[10:18:52] *** kimundi is now known as zz_kimundi
[10:22:10] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[10:35:52] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Connection closed)
[10:37:00] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:37:31] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:41:51] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:44:45] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[10:45:40] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:47:43] *** Quits: Rusky (russell@moz-mp2nkm.slkc.qwest.net) (Ping timeout: 121 seconds)
[10:48:18] *** Joins: Rusky (russell@moz-j4j5mk.slkc.qwest.net)
[10:48:58] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[10:50:30] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[10:51:32] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:52:31] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[10:54:45] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:55:39] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:59:07] *** Joins: arielb1 (Ariel@moz-gdroa0.red.bezeqint.net)
[11:01:49] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[11:01:50] *** ChanServ sets mode: +ao pnkfelix pnkfelix
[11:03:31] <llogiq> Again: Can someone point me in the right direction on how to use rustc::middle functionality to look up a method for a syntax::ast::Expr?
[11:04:57] *** zz_kimundi is now known as kimundi
[11:09:31] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[11:16:52] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[11:23:22] *** Quits: laumann (thomas@moz-33d.hq0.225.130.IP) (Ping timeout: 121 seconds)
[11:23:46] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[11:24:23] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[11:29:05] <Skyler> llogiq: I only learned about this magic tonight so I can't help further than link it https://doc.rust-lang.org/nightly/rustc/middle/ty/fn.resolve_expr.html
[11:30:17] *** Joins: Sho (sho@moz-1v7.jte.28.5.IP)
[11:33:14] <llogiq> Skyler: Thanks, but I already have the Def for my Expr. The problem is going from the Def to looking up the method.
[11:36:16] <llogiq> (btw. my code does the same thing except showing the error when the def isn't found in the def_map)
[11:38:53] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[11:39:29] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[11:39:50] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[11:43:02] *** Joins: nickniko_ (nicknikolov@moz-k08.qm9.214.90.IP)
[11:44:00] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[11:50:41] <Skyler> llogiq: have you played around with this? https://doc.rust-lang.org/nightly/rustc/middle/ty/fn.impl_or_trait_item.html
[11:51:21] *** Joins: eddyb (eddyb@moz-qsv.fmm.166.109.IP)
[11:51:41] <Skyler> I have to do this research for myself at some point, but I apologize if I'm unhelpful :P
[11:52:13] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[11:52:38] <llogiq> The problem is that I have the MethodCall, and I can get the self arg out of it, for which I have the DefId. *But* I actually don't want the corresponding method, but want to know if another method (given by name) is available on the same Self.
[11:52:47] *** kimundi is now known as zz_kimundi
[11:53:00] <llogiq> Tbat
[11:53:25] <llogiq> That DefIds are very general and apply to just about everything and the kitchen sink isn't entirely helpful here...
[11:53:46] <eddyb> you need to invoke method lookup
[11:54:03] <llogiq> Hi eddyb - how do I do that?
[11:54:14] <eddyb> which takes the Self type and the method name
[11:54:23] <eddyb> well, where are you doing this from?
[11:54:26] *** Joins: ptalbot (ptalbot@moz-g2mokk.ircam.fr)
[11:55:10] <llogiq> I have an Expr (which has a node of ExprMethodCall), from which I got the args, the first one of which is another Expr that should contain Self.
[11:55:18] <eddyb> no
[11:55:23] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[11:55:33] <eddyb> where in the compiler are you doing things?
[11:55:51] <eddyb> if in typeck, the solution is a couple lines or so
[11:56:10] *** Quits: ekidd (ekidd@moz-6t81cn.nh.comcast.net) (Ping timeout: 121 seconds)
[11:56:16] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[11:56:34] <doener> eddyb: gh25595
[11:56:34] <[o__o]> Don't call drop when taking the address of unsized fields: https://github.com/rust-lang/rust/pull/25595
[11:56:43] <eddyb> after typeck you need access to the typeck crate, at least
[11:57:04] <eddyb> doener: I commented
[11:57:15] <doener> oh!
[11:57:19] <eddyb> unless you updated the PR since
[11:57:44] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[11:58:50] <eddyb> doener: does it fix Rc<Trait>?
[11:59:07] <eddyb> that's probably the issue bluss linked to, I didn't check
[11:59:11] <doener> eddyb: yes, just check
[11:59:12] <doener> ed
[11:59:28] <eddyb> r=me with tests for all of that
[12:01:10] <llogiq> eddyb, can you give me a hint on how to get there?
[12:01:26] <llogiq> (Into the typeck crate, that is)
[12:01:46] *** Quits: tamird (textual@moz-cb8kq7.east.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:02:02] <eddyb> llogiq: only if you tell me where you are
[12:02:14] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[12:02:54] <llogiq> I'm writing a lint to find expressions of the form x.len() == 0 (or != 0 or > 0)  where x also has an .is_empty() method. At least that's the plan...
[12:03:07] <eddyb> so in rustc_lint
[12:03:11] <llogiq> Yep.
[12:03:27] <eddyb> does rustc_lint/lib.rs have extern crate rustc_typeck;?
[12:04:58] <llogiq> eddyb, no, just syntax, rustc and log.
[12:05:41] <llogiq> To clarify, I'm in rust-clippy, not in rustc_lint.
[12:05:52] <eddyb> that's... why I asked
[12:05:53] <llogiq> (As of yet ;-)
[12:06:04] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[12:06:12] <eddyb> add extern crate rustc_typeck as typeck;
[12:06:29] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[12:06:31] <eddyb> typeck::check::method has the method lookup stuff
[12:06:42] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[12:06:53] <eddyb> typeck::check might be private, so you need to fix that in rust-lang/rust
[12:07:15] *** zz_kimundi is now known as kimundi
[12:07:24] <eddyb> I have a PR open but I'm not sure it makes check::method accessible
[12:08:24] <eddyb> it might also want things like a function context
[12:08:38] <eddyb> at least it doesn't write to tcx if you don't invoke writeback
[12:09:13] <llogiq> Ok, eddyb, I think I'll step back from writing that lint just now and come back when your PR lands. ;-)
[12:09:22] <eddyb> it's also going to pick up types only from the function context
[12:09:33] <llogiq> Good to know.
[12:09:38] <eddyb> unless quantheory improved the situation there
[12:09:59] <llogiq> You folks sure move fast. :-)
[12:10:05] <eddyb> I don't think just my PR will help
[12:10:38] <eddyb> and I gtg already
[12:11:07] <llogiq> cu then.
[12:11:11] *** Parts: llogiq (andre@moz-4e63or.reverse.dsi.net) ("Verlassend")
[12:13:08] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[12:14:40] *** Quits: eddyb (eddyb@moz-qsv.fmm.166.109.IP) (Ping timeout: 121 seconds)
[12:18:19] *** Joins: tromey (tromey@moz-m3id6o.hlrn.qwest.net)
[12:20:59] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[12:23:21] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:26:33] <bluss> I discovered why my sick hacks fell flat. Don't put uninit data in an option if the non-null optimization applies :)
[12:27:58] *** Quits: nickniko_ (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[12:28:12] <pnkfelix> quick r? https://github.com/rust-lang/rust/pull/25603
[12:28:52] *** kimundi is now known as zz_kimundi
[12:31:20] *** Quits: Sho (sho@moz-1v7.jte.28.5.IP) (Ping timeout: 121 seconds)
[12:32:45] <doener> done
[12:38:07] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:41:20] *** Joins: Sho (sho@moz-1v7.jte.28.5.IP)
[12:41:59] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[12:42:35] *** Quits: kushal (kdas@moz-pab4mk.202.sitibroadband.in) (Ping timeout: 121 seconds)
[12:42:51] *** Joins: kushal (kdas@moz-pab4mk.202.sitibroadband.in)
[12:43:52] <doener> pnkfelix: should that have p=1?
[12:44:37] <ChrisMorgan> When it’s blocking the bots, definitely.
[12:45:43] *** Joins: Sho_ (sho@moz-1v7.jte.28.5.IP)
[12:47:57] *** Quits: Sho (sho@moz-1v7.jte.28.5.IP) (Ping timeout: 121 seconds)
[12:49:43] *** Joins: rkruppe (chatzilla@moz-0k5kpu.uopk.14d9.41b8.2001.IP)
[12:51:43] <arielb1> how can you read this LLVM assertion
[12:51:48] <arielb1> rustc: /home/ariel/Rust/source.rfc401/src/llvm/include/llvm/Support/Casting.h:237: typename llvm::cast_retty<X, Y*>::ret_type llvm::cast(Y*) [with X = llvm::ConstantInt; Y = llvm::Value; typename llvm::cast_retty<X, Y*>::ret_type = llvm::ConstantInt*]: Assertion `isa<X>(Val) && "cast<Ty>() argument of incompatible type!"' failed.
[12:51:53] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[12:53:08] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[12:56:24] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[12:57:11] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[12:57:26] <arielb1> I think I got it
[12:57:30] <doener> arielb1: you have a ValueRef of type ConstantInt but want to use it in a place where a ConstantInt* is required
[12:57:39] <arielb1> LLVM thinks function pointers are constant
[12:58:09] <arielb1> or something like that
[12:58:18] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[12:58:20] *** zz_kimundi is now known as kimundi
[12:58:40] <doener> arielb1: usually that info on its own isn't that helpful though (or I'm just still bad at reading the assertions myself...). First thing I try is usually to get a backtrace
[12:58:48] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:58:59] <arielb1> doener: I got a backtrace
[12:59:03] <doener> arielb1: if that still doesn't help, I give in and run with RUST_LOG=rustc_trans::trans
[12:59:28] <arielb1> seems like LLVM thinks for some reason that something really-really non-constant is constant
[12:59:35] <arielb1> lhs_datum=Datum((i64:i64 ptrtoint (void ()* @_ZN4main3foo20hc944b3eb054ec6bfsbaE to i64)), usize, RvalueExpr(Rvalue { mode: ByValue }))
[12:59:51] <arielb1> rhs_datum=Datum((i64:i64 0), usize, RvalueExpr(Rvalue { mode: ByValue }))
[13:01:04] <doener> arielb1: could you gist the backtrace?
[13:01:29] * doener should stop using "gist" as a verb like that
[13:01:57] *** Joins: rkruppe_ (chatzilla@moz-0k5kpu.uopk.14d9.41b8.2001.IP)
[13:02:03] <arielb1> I am going down a wrong codepath here
[13:02:17] *** Quits: rkruppe (chatzilla@moz-0k5kpu.uopk.14d9.41b8.2001.IP) (Ping timeout: 121 seconds)
[13:02:22] *** rkruppe_ is now known as rkruppe
[13:02:39] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[13:02:54] *** Joins: nerdopoly (nerdopoly@moz-mv3sf0.range86-177.btcentralplus.com)
[13:03:11] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[13:03:44] *** Joins: ytain (ytain@moz-07c3h9.dsl.teksavvy.com)
[13:03:47] <arielb1> github is annoying me
[13:03:58] <arielb1> http://sprunge.us/WecQ
[13:07:51] <arielb1> I swear rustc is miscompiling itself
[13:08:25] <arielb1> somehow a definitely-non-zero value turns into a null
[13:12:20] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[13:14:58] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[13:17:30] <arielb1> no, that's just debugger brokenness
[13:19:20] *** Joins: eibwen (eibwen@moz-dk7rup.dip0.t-ipconnect.de)
[13:21:24] *** Joins: ekidd (ekidd@moz-6t81cn.nh.comcast.net)
[13:25:50] *** Quits: rovar (rovar@moz-96effg.dyn.optonline.net) (NickServ (RECOVER command used by rovar_))
[13:25:50] *** rovar_ is now known as rovar
[13:26:03] *** Joins: rovar_ (rovar@moz-96effg.dyn.optonline.net)
[13:27:25] <arielb1> doener: how can LLVMIsConstant lie?
[13:28:39] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[13:29:16] <bluss> the valgrind error, Conditional jump or move depends on uninitialised value(s)' in safe code must be a rustc bug right
[13:29:20] <bluss> we don't allow this to happen
[13:29:44] *** Joins: vmx (vmx@moz-58tt7c.dip0.t-ipconnect.de)
[13:31:26] <doener> bluss: or a false positive due to optimizations IIRC
[13:32:02] <bluss> oh ok that's important information
[13:32:25] <doener> bluss: https://github.com/rust-lang/rust/issues/11710
[13:33:07] *** Joins: rkruppe_ (chatzilla@moz-dcncdm.hrz.tu-darmstadt.de)
[13:33:33] <arielb1> what's up with spans in macros
[13:33:37] <arielb1> they are completely mixed up
[13:33:39] <bluss> I was using valgrind to be sure my code was correct. It had this error, but now I've reduced it down to being completely safe rust
[13:33:41] <arielb1> some of the time
[13:33:43] <bluss> and still there
[13:33:43] <bluss> thanks doener 
[13:34:34] *** Quits: rkruppe (chatzilla@moz-0k5kpu.uopk.14d9.41b8.2001.IP) (Ping timeout: 121 seconds)
[13:34:48] *** rkruppe_ is now known as rkruppe
[13:37:09] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[13:37:20] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[13:39:30] *** Quits: nerdopoly (nerdopoly@moz-mv3sf0.range86-177.btcentralplus.com) (Quit: leaving)
[13:45:02] <arielb1> why is ICmp returning a CompareConstantExpr?
[13:45:30] <arielb1> does LLVM have a "constant expr" bit?
[13:45:54] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:48:21] *** Joins: killercu_ (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[13:48:49] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[13:50:04] <bluss> has the cfg nightly flag been realized?
[13:51:33] <doener> arielb1: should probably use LLVMIsAConstantInt instead
[13:52:57] <doener> arielb1: there's a second place where that change should happen
[13:53:32] *** Joins: laumann (thomas@moz-33d.hq0.225.130.IP)
[13:53:52] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[13:56:22] *** Joins: mukilan (mukilan@moz-rp5.2ma.164.122.IP)
[13:57:46] <arielb1> doener: only one place uses this
[13:57:55] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[13:58:26] <arielb1> you mean, is_const should be using LLVMIsAConstantInt?
[13:58:30] *** Joins: gsingh93_ (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[13:59:53] <doener> arielb1: with_cond also uses is_const followed by const_to_uint without checking if it's actually integral. The correct thing to use is const_to_opt_uint
[14:00:10] <arielb1> doener: thanks
[14:00:23] <arielb1> I will remove is_const
[14:00:28] <arielb1> both places it is used have that bug
[14:01:01] <doener> arielb1: https://github.com/dotdash/rust/commit/f572ce62b51156bca851b3fe9ca648021f8ed146
[14:02:32] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:02:32] *** ChanServ sets mode: +ao erickt erickt
[14:03:06] <arielb1> doener: why the check for undef?
[14:05:22] *** Quits: killercu_ (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Quit: Bye)
[14:06:17] *** Quits: rkruppe (chatzilla@moz-dcncdm.hrz.tu-darmstadt.de) (Ping timeout: 121 seconds)
[14:08:17] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[14:08:46] <arielb1> doener: ?
[14:08:46] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[14:09:32] <doener> arielb1: it was there before... basically
[14:09:52] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[14:09:53] *** ChanServ sets mode: +o nrc
[14:09:57] <arielb1> what does const_to_uint return on undef?
[14:10:42] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:12:03] *** Joins: nodwebe__ (nodweber@moz-knt.fgq.178.5.IP)
[14:14:29] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[14:15:13] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[14:16:41] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:17:34] <doener> arielb1: good question.
[14:18:07] <arielb1> I mean, it shouldn't matter, unless it is undefined
[14:19:06] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[14:19:49] <doener> arielb1: I guess it crashed, in which case my change would be invalid
[14:20:05] <arielb1> it didn't
[14:20:13] <arielb1> but I didn't test that case
[14:21:48] <arielb1> doener: do you know?
[14:24:23] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[14:27:29] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[14:27:31] *** rkruppe_ is now known as rkruppe
[14:32:31] *** kimundi is now known as zz_kimundi
[14:32:40] <doener> arielb1: yeah, just tried, it crashes with the same assertion
[14:32:52] <doener> arielb1: UndefValue is a Constant but not a ConstantInt
[14:33:06] <arielb1> const_to_opt_uint does the right thing
[14:33:07] <arielb1> ?
[14:33:17] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[14:33:41] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:33:46] <arielb1> I assume
[14:34:03] <doener> arielb1: yup, so the check for undef is not required with it
[14:34:15] <arielb1> thanks
[14:34:20] <arielb1> I just have to rebase and check
[14:34:27] <arielb1> thanks a lot - that bug was driving me crazy
[14:35:27] <doener> arielb1: https://github.com/dotdash/rust/commit/f8152008937ce377c0f86fab11716a48af4e3e64
[14:37:08] *** zz_kimundi is now known as kimundi
[14:46:07] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[14:46:29] *** Joins: Diggsey (diggsey@moz-d3mqmt.dsl.pipex.com)
[14:49:15] <doener> Manishearth: seems that the bots are hanging? The last build started 7+ hours ago
[14:51:44] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[14:54:31] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:54:37] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[14:58:40] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[14:58:57] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[14:59:58] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[15:01:24] *** Joins: davebettin (davebettin@moz-rnhkmd.bendcable.com)
[15:05:25] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:07:09] *** Quits: laumann (thomas@moz-33d.hq0.225.130.IP) (Ping timeout: 121 seconds)
[15:07:49] *** Joins: erz (erz@moz-8v4.af0.232.213.IP)
[15:08:46] *** Joins: murphm8 (matt@moz-5aa.kvg.164.130.IP)
[15:11:21] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:12:41] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[15:14:15] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:14:59] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:17:13] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:19:52] <Manishearth> doener: looking
[15:19:57] <Manishearth> cc acrichto
[15:20:20] <Manishearth> http://buildbot.rust-lang.org/buildslaves
[15:20:25] <Manishearth> I can't handle that, sorry
[15:26:14] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[15:26:24] *** Parts: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) ("")
[15:27:30] *** Quits: nodwebe__ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[15:27:44] *** Joins: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr)
[15:29:11] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[15:29:49] <mitsuhiko> i should probably ask this here:
[15:29:49] <mitsuhiko> why do associated types not inherit lifetime restrictions?
[15:29:49] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:30:09] <mitsuhiko> eg: T: Float+'a does not work because Float has an associated type that also needs constraining
[15:30:25] <mitsuhiko> lifetime restriction -> lifetime bound
[15:30:33] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[15:31:48] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[15:31:58] *** rkruppe_ is now known as rkruppe
[15:32:11] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:32:11] *** ChanServ sets mode: +ao erickt erickt
[15:33:52] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[15:36:05] <Tobba> mitsuhiko: it wouldn't make any sense to do that, there are situations where the lifetime is either completely different or the lifetime of Self is bounded to that lifetime, not the other way around
[15:36:47] <mitsuhiko> Tobba: it would still be nice for a type to have control over that a bit
[15:36:56] *** Quits: erz (erz@moz-8v4.af0.232.213.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:37:58] *** Joins: VHaravy (Mibbit@moz-penpeo.globalonebel.net)
[15:38:08] <steveklabnik> Manishearth: ping
[15:38:50] <mitsuhiko> actually ignore that, i might misunderstand the problem of this compiler error message
[15:40:13] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[15:40:22] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[15:40:52] *** Parts: VHaravy (Mibbit@moz-penpeo.globalonebel.net) ()
[15:47:02] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:47:02] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:48:07] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[15:48:57] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:49:04] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Connection closed)
[15:49:05] *** Joins: erz (erz@moz-imu.af0.232.213.IP)
[15:51:28] <bluss> is there a way to create an Option<T> that does not use the non-null pointer optimization? I just want the same tagged union as Option<T> but with the separate tag always present
[15:51:43] <bluss> doing so allows storing uninit memory in T without rust touching it
[15:52:16] <bluss> current workaround is enum Foo<T> { Alive(T), Dropped, _Unused }  is there a saner way?
[15:52:43] *** Quits: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr) (Quit: )
[15:53:15] <huseby> I just successfully bootstrapped cargo on Bitrig: https://github.com/dhuseby/cargo-bootstrap
[15:53:20] <Manishearth> steveklabnik: pong
[15:53:30] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[15:53:31] <huseby> because Bitrig uses clang toolchain, cross compiling was just too damn hard
[15:53:43] <steveklabnik> Manishearth: what was wrong with that PR of mine you said needed fixing?
[15:53:44] <huseby> so I wrote a python script to mimic cargo just enough to get a cargo exe built locally
[15:53:53] *** Joins: O01eg (o01eg@moz-vu0gkg.2ci8.3egh.2698.2a02.IP)
[15:54:03] <Manishearth> steveklabnik: uh
[15:54:07] <huseby> then with --local-cargo I was able to compile cargo from source
[15:54:27] <Manishearth> steveklabnik: I think there was a mismatch between an Option and a result in the asserts?
[15:54:40] <steveklabnik> huh
[15:54:42] * Manishearth looks
[15:54:45] <steveklabnik> i ran the doc tests and the tests passed
[15:54:48] <Manishearth> huh
[15:55:12] <steveklabnik> :/
[15:55:21] <steveklabnik> now i worry for my machine, heh :(
[15:55:22] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[15:55:25] <steveklabnik> or what i did wrong
[15:59:25] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[16:02:37] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[16:03:01] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:03:48] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:03:48] *** ChanServ sets mode: +ao erickt erickt
[16:04:36] <Manishearth> steveklabnik: perhaps somehting else changed?
[16:04:36] <erickt> sfackler / burntsushi / kmc: just landed serde with stable rust macros. Perhaps syntex is far enough along to work for you?
[16:04:51] <steveklabnik> maybe
[16:04:53] * steveklabnik shrugs
[16:04:55] <Manishearth> steveklabnik: wait
[16:04:59] <Manishearth> assert_eq!(u32::from_str_radix("A", 16), Some(10));
[16:05:04] <Manishearth>  from_str_radix(src: &str, radix: u32) -> Result<$T, ParseIntError>
[16:05:08] <Manishearth> that's not going to work
[16:05:18] <Manishearth> perhaps you forgot to git add after adding a .ok() or something
[16:05:41] <Manishearth> erickt: :D
[16:17:54] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Ping timeout: 121 seconds)
[16:18:09] <acrichto> doener: hey wanted to ask you about an llvm upgrade, I've heard that 3.7 radically changes pointer types for example (there's only one now), and the upgrade so far is just stuck segfaulting in stage2, so I was wondering if you could help me debug what's going on?
[16:19:34] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[16:23:37] *** Joins: harrisonclarke (harrisoncla@moz-7hfo21.eastlink.ca)
[16:24:01] *** Quits: martin (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP) (Ping timeout: 121 seconds)
[16:24:05] *** bvssvni is now known as bvssvin
[16:24:10] *** bvssvin is now known as bvssvni
[16:30:21] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Quit: leaving)
[16:31:01] <doener> acrichto: sure
[16:31:33] <acrichto> doener: https://github.com/alexcrichton/rust/tree/msvc-llvm-update is the branch I currently have
[16:31:43] <acrichto> it's rebased on my msvc branch, but most of that should be unrelated to the LLVM update
[16:32:03] <acrichto> would probably help to clean it up a bit though...
[16:32:50] <doener> arielb1: are you going to create a PR for the const_to_opt_uint stuff?
[16:33:30] <arielb1> doener: it will go in part of my RFC 401 PR
[16:33:41] <doener> arielb1: ok
[16:34:55] <doener> acrichto: is that based on an older master? I thought we dropped support for llvm < 3.6 (wondering about some ifdefs still being around)
[16:38:04] *** Joins: davebettin_ (davebettin@moz-rnhkmd.bendcable.com)
[16:38:23] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:38:28] <acrichto> doener: ah I added all those in, but I'm not sure what happened there
[16:38:32] <acrichto> I think we still support 3.5 maybe?
[16:38:40] <acrichto> but I think we'd also be fine dropping it
[16:38:47] <acrichto> I think most of the #ifdef was just to support 3.6
[16:40:30] *** Quits: erz (erz@moz-imu.af0.232.213.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:40:46] *** Quits: davebettin (davebettin@moz-rnhkmd.bendcable.com) (Ping timeout: 121 seconds)
[16:41:12] <doener> acrichto: ah, no, the ifdef were changed in a kind of bogus way when support for <3.6 was dropped
[16:41:15] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[16:41:26] <acrichto> ah
[16:42:12] *** Quits: davebettin_ (davebettin@moz-rnhkmd.bendcable.com) (Quit: Leaving)
[16:43:07] <doener> oh, no, haha, I always misread that as dropping <=3.5 (because we use the "assume" intrinsic), but actually I only dropped support for < 3.5... so ignore all I said
[16:44:08] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[16:44:33] *** Joins: davebettin (davebettin@moz-rnhkmd.bendcable.com)
[16:44:44] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[16:45:30] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[16:45:46] *** Quits: davebettin (davebettin@moz-rnhkmd.bendcable.com) (Quit: Leaving)
[16:45:57] *** Joins: davebettin (davebettin@moz-rnhkmd.bendcable.com)
[16:48:24] <arielb1> somebody *broke* debug-assertion builds
[16:48:32] *** bvssvni is now known as bvssvni_
[16:50:25] <arielb1> rustc_lint does abs
[16:50:29] *** Quits: davebettin (davebettin@moz-rnhkmd.bendcable.com) (Ping timeout: 121 seconds)
[16:50:32] <arielb1> it does INT_MIN.abs
[16:51:24] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[16:53:44] <arielb1> what's the right way to do it?
[16:54:53] <arielb1> do we have a nonoverflowing_abs?
[16:55:28] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[16:59:01] *** Joins: erz (erz@moz-imu.af0.232.213.IP)
[17:01:42] *** Joins: rkruppe__ (chatzilla@moz-3nj.rnu.131.95.IP)
[17:01:49] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[17:01:53] *** rkruppe__ is now known as rkruppe
[17:10:46] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[17:11:05] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Connection closed)
[17:14:07] <acrichto> doener: fwiw https://github.com/alexcrichton/rust/tree/update-llvm is the same branch, but just updating LLVM (no msvc stuff), and I've been able to repro the fault there
[17:14:50] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[17:14:56] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[17:16:08] *** Quits: ptalbot (ptalbot@moz-g2mokk.ircam.fr) (Ping timeout: 121 seconds)
[17:19:48] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[17:20:26] <doener> acrichto: ok, thanks!
[17:20:55] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:21:48] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[17:25:48] *** Quits: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[17:26:20] *** Quits: blank_name (blank_name@moz-ekh.i54.183.192.IP) (Quit: leaving)
[17:26:44] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[17:26:47] *** Quits: erz (erz@moz-imu.af0.232.213.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:27:16] *** Joins: blank_name (blank_name@moz-ekh.i54.183.192.IP)
[17:27:20] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[17:27:31] *** Joins: erz (erz@moz-imu.af0.232.213.IP)
[17:27:34] *** Quits: ekidd (ekidd@moz-6t81cn.nh.comcast.net) (Ping timeout: 121 seconds)
[17:29:08] *** Joins: redshift (redshift@moz-c8c.73t.246.204.IP)
[17:29:31] *** Quits: kushal (kdas@moz-pab4mk.202.sitibroadband.in) (Ping timeout: 121 seconds)
[17:30:00] *** Joins: redshift1 (redshift@moz-7qg.ain.246.204.IP)
[17:30:09] *** Quits: erz (erz@moz-imu.af0.232.213.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:32:10] *** Quits: redshift_ (redshift@moz-7qg.ain.246.204.IP) (Ping timeout: 121 seconds)
[17:33:14] *** Quits: redshift (redshift@moz-c8c.73t.246.204.IP) (Ping timeout: 121 seconds)
[17:35:23] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[17:36:18] *** Quits: vmx (vmx@moz-58tt7c.dip0.t-ipconnect.de) (Quit: Leaving)
[17:36:19] <Manishearth> steveklabnik: The author of the reflections-on-rust Reddit post might be writing a blog post by fleshing it out
[17:36:25] <steveklabnik> woot
[17:36:26] <Manishearth> this could be something pretty awesome
[17:36:26] <Manishearth> www.reddit.com/r/rust/comments/36ce52/reflections_on_a_weekend_with_rust/crdmzsj
[17:36:30] <Manishearth> note might
[17:36:37] <steveklabnik> yeah
[17:40:30] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[17:41:27] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[17:41:52] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[17:44:37] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[17:44:37] *** ChanServ sets mode: +ao erickt erickt
[17:46:14] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[17:48:42] *** Joins: erz (erz@moz-8v4.af0.232.213.IP)
[17:52:45] *** Quits: erz (erz@moz-8v4.af0.232.213.IP) (Ping timeout: 121 seconds)
[17:56:18] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[17:57:16] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[17:57:41] *** Quits: Sho_ (sho@moz-1v7.jte.28.5.IP) (A TLS packet with unexpected length was received.)
[17:57:49] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[17:59:05] *** Joins: ConnorDoyle (ConnorDoyle@moz-edrulj.static.monkeybrains.net)
[17:59:25] <arielb1> shouldn't 1.1-beta be a snapshot?
[18:00:03] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[18:00:23] <Manishearth> arielb1: ... no?
[18:00:28] <doener> acrichto: just noticed (finished another PR first) that that branch doesn't build at all due to errors in the C++ wrapper stuff
[18:00:47] <arielb1> I mean, shouldn't we snapshot on every release?
[18:00:53] <acrichto> doener: oh I didn't touch the trigger, so are you sure llvm rebuilt?
[18:01:14] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[18:01:15] *** ChanServ sets mode: +o brson
[18:01:15] *** Quits: mukilan (mukilan@moz-rp5.2ma.164.122.IP) (Ping timeout: 121 seconds)
[18:01:18] <Manishearth> arielb1: we could have 0.13 snapshots if we wanted and the only problem would be parsing / too many cfgs
[18:01:20] <doener> acrichto: the include path for PassManager.h is wrong to begin with
[18:01:34] <acrichto> doener: weird, b/c it built locally... maybe I should do a full clean
[18:03:02] <doener> acrichto: do you have a system-wide LLVM installation?
[18:03:04] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[18:03:08] <doener> acrichto: maybe it picked up a header from that?
[18:03:08] <acrichto> hmm
[18:03:14] <acrichto> so I do
[18:03:15] <acrichto> weird
[18:03:30] <arielb1> Manishearth: before unboxed closures?
[18:04:48] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[18:05:17] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[18:05:23] *** Joins: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de)
[18:05:39] *** Joins: bdero (bran@moz-k0v.7ks.189.18.IP)
[18:06:28] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:06:28] *** ChanServ sets mode: +o pcwalton
[18:06:59] <acrichto> doener: aha now I have build errors, I will fix
[18:07:31] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Quit: Leaving...)
[18:07:59] *** Joins: Sho (sho@moz-1v7.jte.28.5.IP)
[18:08:09] *** Joins: nawns (nawns@moz-cr1412.in.comcast.net)
[18:08:25] *** Quits: ConnorDoyle (ConnorDoyle@moz-edrulj.static.monkeybrains.net) (A TLS packet with unexpected length was received.)
[18:09:01] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[18:09:29] <aturon> arielb1: there was some discussion along these lines, and in particular on the effect on packagers, but I don't recall the final conclusion
[18:09:45] <aturon> acrichto: brson: either of you recall what we determined for snapshot policy?
[18:10:28] <brson> i don't think we've made any new decisions
[18:10:52] <Manishearth> arielb1: like I said, parse errors
[18:11:46] <acrichto> aturon: I believe the conclusion was "stay the course"
[18:11:50] <acrichto> of creating snapshots whenever we neede
[18:11:53] <acrichto> needed*
[18:12:01] *** Quits: jga (jga@moz-3tb.t1q.244.77.IP) (Connection closed)
[18:12:08] <aturon> ok, thanks
[18:12:37] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[18:14:07] <Manishearth> arielb1: but I think we could still have a pretty old snap and be fine
[18:14:41] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[18:15:03] <acrichto> doener: ok pushed a fix
[18:15:10] <acrichto> looks like the pass manager has changed radically now as well
[18:15:14] <pcwalton> who is the best person to ask about debugging compiler plugins?
[18:15:18] <acrichto> but thankfully they kept legacy support1
[18:15:41] <pcwalton> acrichto: any ideas? ^
[18:15:54] <pcwalton> or nmatsakis: ^
[18:16:05] <acrichto> pcwalton: perhaps sfackler, huon, or Manishearth 
[18:16:07] <acrichto> or kmc 
[18:16:12] <pcwalton> ok, cool
[18:17:24] <Manishearth> pcwalton: o/
[18:17:35] <Manishearth> pcwalton: I've never tried tbh
[18:17:46] <Manishearth> I believe you have to debug rustc itself :/
[18:21:37] <doener> acrichto: hm, the jemalloc change in the last commit in the llvm repo is actually broken, compilation aborts
[18:21:46] <doener> acrichto: I wonder why we never hit that before
[18:21:58] <acrichto> doener: how in the world was my build working at all lol
[18:22:03] <doener> acrichto: problem is that the tli entries must be sorted
[18:22:30] <doener> acrichto: the check is guarded by "#ifndef NDEBUG", but still...
[18:22:44] <arielb1> We really should have a buildbot running --enable-debug-assertions --enable-debuginfo --enable-llvm-assertions
[18:23:12] <arielb1> gh25617
[18:23:12] <[o__o]> sepcomp-lib-lto test fails with --enable-llvm-assertions: https://github.com/rust-lang/rust/issues/25617
[18:23:30] <brson> people have landed a lot of extended errors recently
[18:24:04] <doener> acrichto: explains why people were missing the optimization though, I guess
[18:24:18] <acrichto> doener: haha yeah that would indeed explain that!
[18:24:42] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[18:26:03] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:28:15] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[18:28:32] <acrichto> doener: I've pushed a fix for the jemalloc sorting issue (at least in one of the places, the other didn't look sorted), and I'm rebuilding locally (this time with assertions enabled), this'll probably get me a lot farther than I was before, thanks for the help!
[18:29:11] <brson> restarting mac4
[18:29:45] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[18:30:16] <brson> rustc reports the beta version incorrectly...
[18:30:30] <brson> current beta is 'rustc 1.1.0-beta' but it should be 'rustc 1.1.0-beta.1'...
[18:30:44] <doener> acrichto: you're welcome!
[18:31:41] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[18:41:40] *** Joins: brson_ (brson@moz-cfhap5.mtv2.mozilla.com)
[18:41:52] <brson_> 55 new contributors in the last 2 weeks
[18:42:00] <brson_> surely that is a record
[18:42:19] *** Joins: erz (erz@moz-8v4.af0.232.213.IP)
[18:42:37] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[18:42:39] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Connection closed)
[18:44:02] *** Quits: brson_ (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[18:44:10] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[18:44:10] *** ChanServ sets mode: +o brson
[18:45:47] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[18:46:22] *** Quits: erz (erz@moz-8v4.af0.232.213.IP) (Ping timeout: 121 seconds)
[18:46:23] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[18:46:54] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[18:51:11] *** Quits: harrisonclarke (harrisoncla@moz-7hfo21.eastlink.ca) (Connection closed)
[18:51:44] *** Joins: harrisonclarke (harrisoncla@moz-nhv.35b.255.199.IP)
[18:52:00] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:55:20] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:55:37] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Ping timeout: 121 seconds)
[18:55:46] *** Quits: harrisonclarke (harrisoncla@moz-nhv.35b.255.199.IP) (Ping timeout: 121 seconds)
[18:56:01] *** Joins: nrc|afk (nrc@moz-14pjgj.xtra.co.nz)
[18:56:02] *** ChanServ sets mode: +o nrc|afk
[18:56:40] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[18:56:41] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[18:56:52] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[18:57:01] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[18:58:05] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[18:58:43] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[18:59:29] *** Quits: nawns (nawns@moz-cr1412.in.comcast.net) (Client exited)
[19:01:43] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Ping timeout: 121 seconds)
[19:02:24] *** Joins: ConnorDoyle (ConnorDoyle@moz-hud.3ra.116.199.IP)
[19:02:29] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[19:02:53] *** Quits: ConnorDoyle (ConnorDoyle@moz-hud.3ra.116.199.IP) (A TLS packet with unexpected length was received.)
[19:03:39] *** Joins: nawns (nawns@moz-cr1412.in.comcast.net)
[19:04:14] *** Joins: harrisonclarke (harrisoncla@moz-7hfo21.eastlink.ca)
[19:04:21] *** Quits: bdero (bran@moz-k0v.7ks.189.18.IP) (Ping timeout: 121 seconds)
[19:05:46] *** Joins: ConnorDoyle (ConnorDoyle@moz-hud.3ra.116.199.IP)
[19:06:26] *** Joins: bdero (bran@moz-k0v.7ks.189.18.IP)
[19:08:11] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[19:10:58] *** Quits: ConnorDoyle (ConnorDoyle@moz-hud.3ra.116.199.IP) (A TLS packet with unexpected length was received.)
[19:18:05] *** bvssvni_ is now known as bvssvni
[19:19:29] *** Quits: nawns (nawns@moz-cr1412.in.comcast.net) (Client exited)
[19:19:52] <acrichto> brson: r? https://github.com/rust-lang/rust-buildbot/pull/13
[19:20:26] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[19:21:43] <richo> blurgh, I didn't know the buildbot config was public
[19:21:54] <brson> acrichto: r+
[19:26:22] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[19:33:59] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:34:50] *** Joins: joneshf-laptop (joneshf@moz-5q88jj.ucdavis.edu)
[19:47:03] *** Joins: ConnorDoyle (ConnorDoyle@moz-hud.3ra.116.199.IP)
[19:49:22] *** Joins: duesenfranz__ (jona@moz-711djm.tirol.surfer.at)
[19:49:23] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Connection closed)
[19:49:24] *** duesenfranz__ is now known as duesenfranz_
[19:52:36] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[19:53:53] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[19:54:28] *** Quits: bdero (bran@moz-k0v.7ks.189.18.IP) (Ping timeout: 121 seconds)
[19:55:31] <arielb1> could I have another shot at gh24333?
[19:55:32] <[o__o]> Make casts follow the new RFC401: https://github.com/rust-lang/rust/pull/24333
[19:57:10] <arielb1> I rebased and added the 2 new commits
[19:59:33] *** nrc|afk is now known as nrc
[20:00:35] *** Quits: gsingh93_ (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[20:02:23] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:02:38] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Quit: Leaving)
[20:02:41] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[20:04:11] <doener> arielb1: the new ones are at the end?
[20:04:25] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:10:29] <doener> arielb1: any reason why you switch the trans/visit order for the cv == 1 case?
[20:10:29] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[20:10:30] *** ChanServ sets mode: +ao pnkfelix pnkfelix
[20:11:56] <arielb1> doener: to be if -> else
[20:12:04] <arielb1> it should be the same in all cases
[20:13:00] <doener> arielb1: yeah, just wondered if there was a deeper reason for it
[20:13:41] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:14:07] <arielb1> there isn't
[20:14:55] <arielb1> the Arc changes are because nrc/eddyb implemented a draft version of RFC401
[20:15:01] <arielb1> instead of the new version
[20:15:47] <doener> arielb1: why's that extra cast to *mut u8 required? I'm not on top of RFC 401 :-_/
[20:16:04] <arielb1> doener: there are no direct fat pointer -> address casts
[20:16:25] <arielb1> never were
[20:16:39] <doener> arielb1: oh, so that's for Arcs containing DST?
[20:16:46] <arielb1> doener: yes
[20:16:51] <doener> ah, I see, makes sense then
[20:17:09] <arielb1> eddyb/nrc accidentally implemented these when they did the DST coercion work
[20:17:58] <arielb1> the rustc_lint/builtin change was to get my tests to run
[20:20:47] *** Quits: rovar_ (rovar@moz-96effg.dyn.optonline.net) (Ping timeout: 121 seconds)
[20:22:29] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[20:25:49] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[20:25:54] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[20:30:35] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[20:31:27] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[20:34:35] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:35:45] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[20:39:30] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[20:40:09] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:43:59] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[20:44:09] *** Joins: duesenfranz__ (jona@moz-711djm.tirol.surfer.at)
[20:44:11] *** duesenfranz__ is now known as duesenfranz_
[20:45:44] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[20:47:20] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:50:08] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[20:56:49] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:57:06] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:57:15] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[20:57:49] *** Quits: eibwen (eibwen@moz-dk7rup.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[20:58:20] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[20:59:41] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[21:01:39] <acrichto> brson: I have deployed the MSVC buildbot change now, we shouldn't be gating on it but it should be building
[21:02:20] <arielb1> could you add a --enable-debuginfo --enable-debug-assertions --enable-llvm-assertions bot?
[21:03:08] <brson> acrichto: thanks
[21:04:01] *** Quits: tromey (tromey@moz-m3id6o.hlrn.qwest.net) (Quit: ERC (IRC client for Emacs 25.0.50.4))
[21:04:06] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[21:04:06] *** ChanServ sets mode: +ao pnkfelix pnkfelix
[21:04:59] *** Joins: erickt (erickt@moz-pfk.ul4.242.50.IP)
[21:04:59] *** ChanServ sets mode: +ao erickt erickt
[21:05:00] *** Joins: scemin (scemin@moz-fb4rie.securitycompass.com)
[21:07:03] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[21:08:42] *** Quits: scemin (scemin@moz-fb4rie.securitycompass.com) (Client exited)
[21:11:06] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[21:11:21] *** Joins: zmack (zmack@moz-u7v.9uv.25.188.IP)
[21:13:24] *** Quits: zmack (zmack@moz-u7v.9uv.25.188.IP) (Connection closed)
[21:18:21] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[21:21:00] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[21:22:45] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[21:23:38] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[21:23:59] *** Quits: aepsil0n (eduard@moz-ob9p8k.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[21:26:40] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[21:30:18] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[21:30:42] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[21:32:44] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:32:49] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[21:33:02] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[21:33:56] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[21:35:27] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:37:19] *** Quits: harrisonclarke (harrisoncla@moz-7hfo21.eastlink.ca) (Connection closed)
[21:37:51] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[21:39:05] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:40:06] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[21:42:58] *** Quits: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de) (Quit: Bye)
[21:44:43] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:48:33] *** Joins: jdm (jdm@moz-mu9.06r.98.75.IP)
[21:51:25] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[21:51:52] *** Quits: Kxepal (Miranda@moz-6got8b.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[21:52:10] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[21:53:05] *** Joins: kmcguire (kmcguire@moz-bbqf14.res.bhn.net)
[21:53:52] *** Joins: Kxepal (Miranda@moz-ceofkj.pppoe.mtu-net.ru)
[21:55:43] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[21:57:11] <brson> acrichto: tell me how to restart crates.io
[21:57:19] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[21:57:25] <acrichto> brson: ah right
[21:57:39] <acrichto> brson: so first up, clone git@github.com:rust-lang/crates.io
[21:57:55] <acrichto> brson: next, install the heroku toolbelt (sudo apt-get install heroku-toolbelt) 
[21:58:15] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[21:58:37] <acrichto> brson: next, add the heroku remote (git remote add heroku git@heroku.com:crates-io.git
[21:58:46] <acrichto> brson: and then it should be as simple as `heroku restart`
[21:59:23] <acrichto> brson: if you restart now everything should be fine, it'll just delay HTTP requests while it spins back up
[22:01:04] <brson> seems to be working
[22:01:24] <acrichto> \o/
[22:01:25] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[22:04:01] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[22:06:14] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[22:11:19] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:12:05] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[22:12:29] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[22:13:38] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[22:16:07] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[22:19:27] *** Quits: murphm8 (matt@moz-5aa.kvg.164.130.IP) (Client exited)
[22:21:39] *** Joins: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com)
[22:23:26] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Quit: Leaving)
[22:25:05] <burntsushi> erickt: implementing serde interfaces are on my todo list, but i'm knee deep in regex land at the moment. wish i had more time!
[22:25:45] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[22:26:40] <erickt> burntsushi: I meant to use syntex for your regex stuff
[22:27:01] <erickt> for your syntax extensions
[22:27:12] <burntsushi> erickt: i just filed issues for serde in csv, docopt and cbor, so now it's official. :P
[22:27:26] <erickt> woot
[22:27:44] <burntsushi> erickt: ya that would be an interesting exercise! regex has little parsing but tons of code gen.
[22:27:53] <scott> I'm a bit late, but happy 1.0 everyone!
[22:28:00] <burntsushi> happy 1.0!
[22:28:07] <scott> multirust update 1.0.0 # feels good
[22:29:49] <brson> \o/
[22:36:09] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[22:36:36] *** Quits: erickt (erickt@moz-pfk.ul4.242.50.IP) (Ping timeout: 121 seconds)
[22:41:53] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[22:42:38] <acrichto> brson: r? https://github.com/rust-lang/rust/pull/25411
[22:43:06] <Diggsey> is there a dependency graph for all the crates which are part of the compiler?
[22:46:33] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:49:18] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[22:50:31] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[22:52:03] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:52:55] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:52:55] *** ChanServ sets mode: +o pcwalton
[22:53:03] *** Joins: njn (chatzilla@moz-e7amqe.iinet.net.au)
[23:02:19] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[23:02:19] *** ChanServ sets mode: +ao erickt erickt
[23:04:39] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[23:05:07] *** Quits: dcrewi (david@moz-3u3d5k.gyrae.net) (Ping timeout: 121 seconds)
[23:06:25] *** Joins: vfetwnuncszu (david@moz-3u3d5k.gyrae.net)
[23:06:35] *** vfetwnuncszu is now known as dcrewi
[23:06:42] <cmr> Diggsey: I don't think anyone has built one, no.
[23:07:39] *** Joins: jga (jga@moz-3tb.t1q.244.77.IP)
[23:08:27] *** Quits: joneshf-laptop (joneshf@moz-5q88jj.ucdavis.edu) (Connection closed)
[23:08:42] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[23:11:02] *** Quits: Sho (sho@moz-1v7.jte.28.5.IP) (Ping timeout: 121 seconds)
[23:12:04] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[23:14:42] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[23:15:16] *** Quits: jdm (jdm@moz-mu9.06r.98.75.IP) (Quit: )
[23:16:16] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[23:17:21] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[23:19:01] *** kimundi is now known as zz_kimundi
[23:25:06] <cmr> nrc: congrats on landing DST coercions!
[23:25:31] <cmr> (I know, old news, but...)
[23:28:00] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:28:51] *** Joins: andreabedini (andreabedin@moz-2lt49q.unimelb.edu.au)
[23:29:55] <arielb1> nrc: are you working on perf?
[23:31:09] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[23:32:56] <arielb1> AND IT LANDED
[23:33:04] <arielb1> wow
[23:33:10] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[23:33:42] *** Quits: arielb1 (Ariel@moz-gdroa0.red.bezeqint.net) (Quit: Ex-Chat)
[23:40:08] *** Quits: DenSchub (DenSchub@moz-4qh7qk.0b101010.org) (Connection closed)
[23:40:18] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[23:41:20] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[23:41:21] *** Joins: DenSchub (DenSchub@moz-6io4fd.hol4.1ume.2260.2a02.IP)
[23:45:43] *** Joins: ConnorDo_ (ConnorDoyle@moz-hud.3ra.116.199.IP)
[23:48:26] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:48:59] *** Quits: ConnorDoyle (ConnorDoyle@moz-hud.3ra.116.199.IP) (Ping timeout: 121 seconds)
[23:50:31] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[23:50:53] *** Quits: ConnorDo_ (ConnorDoyle@moz-hud.3ra.116.199.IP) (A TLS packet with unexpected length was received.)
[23:52:25] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[23:53:13] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[23:55:26] *** Quits: blank_name (blank_name@moz-ekh.i54.183.192.IP) (Ping timeout: 121 seconds)
[23:57:59] *** Joins: jdm (jdm@moz-um8o9m.dsl.teksavvy.com)
[23:58:41] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
