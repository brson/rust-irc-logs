[00:03:20] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[00:12:17] *** Joins: tamird (textual@moz-5g7.ska.226.209.IP)
[00:13:04] *** Quits: tamird (textual@moz-5g7.ska.226.209.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:13:41] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[00:16:18] *** Joins: tamird (textual@moz-5g7.ska.226.209.IP)
[00:22:29] *** Quits: tamird (textual@moz-5g7.ska.226.209.IP) (Connection closed)
[00:23:19] *** Joins: tamird (textual@moz-5g7.ska.226.209.IP)
[00:23:26] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[00:27:29] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[00:33:11] *** Quits: tamird (textual@moz-5g7.ska.226.209.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:35:49] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[00:38:54] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[00:41:00] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[00:42:57] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[00:48:04] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[00:50:01] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[00:51:55] <aatch> Bahaha, we have ignored tests that still have the old owned-vector syntax in them.
[00:52:41] <Manishearth> aatch: assert!(check_strs(fmt!("%?", ETag(@~["foo".to_string()], @"bar".to_string())),
[00:52:44] <Manishearth> wow
[00:53:12] <aatch> Well that's a blast from the past if there ever was one.
[00:53:43] <aatch> old shared-pointer syntax, old owned-vector syntax, old formatting syntax.
[00:53:57] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:56:30] *** Joins: anders (andars@moz-bsldst.sntcca.sbcglobal.net)
[00:59:13] *** Quits: ELD (textual@moz-tbcsac.co.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:00:32] <WindowsBunny> And we're trying to release 1.0 with that dead code hanging around?
[01:03:48] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[01:04:14] *** Quits: jga (jga@moz-a3p.t1q.244.77.IP) (Ping timeout: 121 seconds)
[01:04:58] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[01:05:03] *** Quits: Stebalien (Stebalien@moz-l6q.u0c.245.50.IP) (Ping timeout: 121 seconds)
[01:06:37] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (Ping timeout: 121 seconds)
[01:08:10] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[01:09:11] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Ping timeout: 121 seconds)
[01:17:20] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[01:22:18] *** Joins: Stebalien (Stebalien@moz-i00.hrk.38.73.IP)
[01:24:30] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[01:26:06] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[01:28:38] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[01:32:04] *** Joins: ELD (textual@moz-tbcsac.co.comcast.net)
[01:38:27] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[01:39:21] <bstrie> WindowsBunny: not exactly a big deal to have ignord tests in the test suite
[01:39:48] <bstrie> at least not from the perspective of backcompat
[01:40:13] *** Quits: bkearns (Adium@moz-2l9j31.ca.comcast.net) (Quit: Leaving.)
[01:41:19] *** Quits: Stebalien (Stebalien@moz-i00.hrk.38.73.IP) (Quit: leaving)
[01:48:06] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:48:39] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Connection closed)
[01:48:43] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:53:59] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[02:00:48] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:11:39] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[02:14:58] <bstrie> doener: does https://github.com/rust-lang/rust/issues/8106 being closed mean that a struct of eight bools is represented in memory as just a byte?
[02:16:24] <aatch> bstrie, I dont think so.
[02:17:33] *** Quits: Astrologos (n_i_l@moz-aiq731.access.hol.gr) (Quit: )
[02:18:02] <kmc> aatch: *and* old reflection-based ? formatter
[02:21:37] <bstrie> aatch: I'm curious what that patch does
[02:22:14] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[02:22:52] <aatch> bstrie, by the looks of it, all it does is just store i1s directly instead of casting to/from i8.
[02:23:38] <aatch> bstrie, presumably the bug doener mentions caused structs to be laid out incorrectly and similar.
[02:23:47] *** Quits: zz_kimundi (kimundi@moz-7cq7ea.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:25:15] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[02:25:49] <bstrie> aatch: what does it mean to store an i1 directly, though?
[02:26:20] *** Joins: zz_kimundi (kimundi@moz-a1uehu.dip0.t-ipconnect.de)
[02:26:22] *** zz_kimundi is now known as kimundi
[02:26:26] <bstrie> aatch: as in, size_of::<bool> is still a byte
[02:27:16] <aatch> bstrie, well yeah. All it means is that we don't have to manually truncate/zext when going from/to memory.
[02:28:03] <aatch> bstrie, it probably helps LLVM a little for alias analysis too.
[02:28:17] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:28:49] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:29:03] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[02:29:19] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[02:31:57] *** Joins: mib_saw431 (Mibbit@moz-juv.9o3.252.72.IP)
[02:32:09] <aatch> bstrie, LLVM allows you to have integers with any bit-width, but the size and alignment are still determined by the target platform.
[02:32:37] <aatch> bstrie, so if the smallest addressable unit is a byte, then anything less than one byte in size will be store as such.
[02:32:47] <aatch> This just means that LLVM can ignore the other bits in the type.
[02:33:18] <bstrie> ok, I See
[02:33:50] <aatch> I've seen LLVM optimize code to use i96 types, which is amusing.
[02:34:59] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[02:37:17] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[02:37:25] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[02:46:09] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[02:52:09] *** Joins: tamird (textual@moz-acsfhc.sub-70-199-98.myvzw.com)
[02:54:02] *** Joins: tamird_ (textual@moz-g4p.0t6.56.172.IP)
[02:55:28] *** Quits: mib_saw431 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:56:58] *** Quits: tamird (textual@moz-acsfhc.sub-70-199-98.myvzw.com) (Ping timeout: 121 seconds)
[03:00:15] *** Quits: tamird_ (textual@moz-g4p.0t6.56.172.IP) (Ping timeout: 121 seconds)
[03:00:17] <bstrie> so, this ICE is only on the playpen, I can't do it locally
[03:00:42] <bstrie> playbot: &2 as *const i32 as *mut _;
[03:00:43] -playbot- <anon>:9:9: 9:35 error: internal compiler error: cat_expr Errd
[03:00:43] -playbot- <anon>:9         &2 as *const i32 as *mut _;
[03:00:43] -playbot- output truncated; full output at: http://bit.ly/1IEhgBZ
[03:04:57] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:05:43] <bstrie> playbot-mini: fn main() { &2 as *const i32 as *mut _; }
[03:05:44] -playbot-mini- <anon>:1:13: 1:39 error: internal compiler error: cat_expr Errd
[03:05:44] -playbot-mini- <anon>:1 fn main() { &2 as *const i32 as *mut _; }
[03:05:44] -playbot-mini- output truncated; full output at: http://bit.ly/1DXRGSN
[03:06:34] *** Joins: viktor (viktor@moz-704qgr.cust6.csbnet.se)
[03:09:08] <bstrie> filed as https://github.com/rust-lang/rust/issues/25086, but I'm concerned about why this can't be reproduced locally
[03:10:07] <viktor> std::rt::unwind::panicking() doesn't get inlined
[03:10:15] <viktor> it just reads one thread-local
[03:10:23] <viktor> locks end spending a lot of time in it
[03:12:28] <aatch> viktor, ah, I see what the problem is.
[03:12:50] <aatch> viktor, because it's not marked inline, it's not marked for cross-crate inlining.
[03:13:16] <aatch> But most of the stuff that reads it is generic, so does get inlined cross-crate (sort of).
[03:15:04] <aatch> viktor, simple fix: mark it #[inline], since it'll normally get inlined anyway.
[03:15:39] <viktor> the problem I'm having is actually that it gets read a lot through a lock
[03:15:56] <viktor> but I guess somewhere along, the chain of inlining is broken
[03:16:03] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[03:16:26] <Eridius> bstrie: did you try it with the beta?
[03:16:35] <aatch> viktor, well if you're using any of the standard library locks, the panicking method won't get inlined into your code.
[03:16:48] <aatch> viktor, since it's in another crate.
[03:17:30] <viktor> ah
[03:17:39] <viktor> I might have been fooled by the std facade
[03:17:41] <aatch> viktor, LLVM doesn't know that it's just reading a thread-local variable, so it can't optimise out anything.
[03:19:16] <bstrie> Eridius: I did not, isn't playpen on nightly?
[03:19:22] <viktor> I guess I'll submit a PR
[03:19:28] <viktor> thanks, aatch
[03:19:30] <Eridius> bstrie: look at the top of play.rust-lang.org. There's a dropdown. It defaults to beta
[03:19:34] <Eridius> and I believe playbot is on beta as well
[03:19:40] <bstrie> aha
[03:23:22] *** Joins: srh (User@moz-ca3u24.q9f2.utp8.0306.2602.IP)
[03:25:26] *** Joins: bkearns (Adium@moz-2l9j31.ca.comcast.net)
[03:26:00] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[03:27:36] *** Joins: semarie (semarie@moz-rbmflj.gtor.org)
[03:30:05] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[03:30:08] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:34:05] *** Quits: c74d (c74d3a4ebb6@moz-vhi6o8.mggc.hibn.4404.2002.IP) (Connection closed)
[03:34:30] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[03:36:32] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:40:32] *** Joins: mib_dxwd41 (Mibbit@moz-juv.9o3.252.72.IP)
[03:41:52] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[03:46:22] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:48:05] *** Quits: TheDan64 (Daniel@moz-d3g.e79.63.129.IP) (Quit: Leaving)
[03:48:22] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[03:54:22] *** Quits: mib_dxwd41 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:01:52] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[04:03:53] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[04:14:50] *** Quits: japaric_ (japaric@moz-8v5.ipa.42.190.IP) (Quit: WeeChat 1.1.1)
[04:23:35] *** Quits: Diggsey (diggsey@moz-nq516s.dsl.pipex.com) (Ping timeout: 121 seconds)
[04:26:45] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[04:27:04] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[04:29:36] *** Quits: kmcguire_ (kmcguire@moz-c955nf.res.rr.com) (Ping timeout: 121 seconds)
[04:30:52] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[04:31:36] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:32:21] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[04:32:28] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:38:28] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[04:41:13] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[04:57:13] *** Quits: srh (User@moz-ca3u24.q9f2.utp8.0306.2602.IP) (Ping timeout: 121 seconds)
[05:00:33] *** Quits: aatch (james@moz-ciignl.bmm3.j08e.e000.2406.IP) (Quit: Leaving)
[05:03:27] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[05:10:16] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:12:55] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[05:14:02] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:18:12] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[05:21:15] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[05:22:11] *** Joins: galen (galen@moz-caprup.dsl-w.verizon.net)
[05:24:30] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:24:32] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[05:25:46] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[05:27:31] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[05:29:17] *** Quits: Rusky (russell@moz-4ggjij.slkc.qwest.net) (Ping timeout: 121 seconds)
[05:31:34] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[05:32:03] *** Joins: Rusky (russell@moz-4ggjij.slkc.qwest.net)
[05:32:08] <reem> a = b evaluating to the old value of a from Pony is inspired
[05:32:23] <reem> that would be an incredible fit for rust, if we could still change that
[05:33:44] *** Joins: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at)
[05:35:41] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[05:37:43] <huon> it's not back compat unfortunately, e.g. `if foo { a = b }` is legal, but would have to be `if foo { a = b; }` if = returned something other than ()
[05:37:51] *** Quits: dinfuehr (dinfuehr@moz-93v9f9.highway.telekom.at) (Ping timeout: 121 seconds)
[05:37:55] <huon> (would be nice, though)
[05:38:23] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[05:38:48] <c74d> Pony?
[05:39:24] <reem> c74d: http://www.reddit.com/r/rust/comments/34rszb/pony_type_and_memory_safe_language/
[05:39:38] <reem> huon: first 2.0 feature :P
[05:40:11] <c74d> Eh, I'd rather go to bed (and many other places) than to Reddit. Thanks, though.
[05:40:19] <reem> wow what if that meant *a = b was mem::replace but just in the language
[05:40:30] <reem> c74d: direct link http://tutorial.ponylang.org/
[05:40:34] <c74d> Oh, thanks.
[05:40:44] <huon> reem: it'd have to be a bit special
[05:40:50] <reem> That was just the post on /r/rust where graydon said some interesting things
[05:40:52] <huon> e.g. let a; a = 2; is valid
[05:41:19] <reem> I think we’d have to tweak let to always have an RHS to make it work
[05:42:23] <huon> I'm much less keen on the feature if we do it like that
[05:43:12] <huon> e.g it would destroy the scratch-stack-space trait object trick
[05:43:40] <huon> (let a; let b; let c = if foo { a = bar(); &a as &Foo } else { b = baz(); &b as &Foo };)
[05:44:45] *** Quits: ELD (textual@moz-tbcsac.co.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:44:55] <reem> neat
[05:45:39] *** Joins: flabbergaster (Mibbit@moz-juv.9o3.252.72.IP)
[05:50:49] *** Quits: flabbergaster (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:54:44] * c74d adds Pony to bookmarks file.
[05:55:32] <reem> pretty similar guarantees to rust, seems like it could be interesting
[06:00:06] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:02:08] *** Joins: chair (Mibbit@moz-0elh7o.nos-oignons.net)
[06:02:28] <chair> bstrie
[06:02:31] <chair> bstrie you dumb nigger
[06:02:37] <chair> bstrie you retarded fucker
[06:02:40] <reem> !ops
[06:02:41] <chair> you fagggot whore
[06:02:45] <chair> stupid motherfucker
[06:02:47] <reem> huon: 
[06:02:49] <chair> I hate you
[06:02:50] <chair> bstrie
[06:02:56] <chair> reem you goodamn retard
[06:03:00] <chair> don't summon huon
[06:03:07] <chair> wtf why did you do that
[06:03:11] <chair> that isnt funny
[06:03:14] <chair> fuck you
[06:03:18] <Gankro> reem: seems more trouble than it's worth. Would make dtor ordering slightly more subtle. And produce very confusing code in the case of `let a = b = c`
[06:03:19] <chair> fuck all of you
[06:03:19] *** huon sets mode: +b *!*Mibbit@moz-0elh7o.nos-oignons.net
[06:03:20] *** chair was kicked by huon (huon)
[06:03:51] <huon> bstrie: do you know why you have a 'fan' club?
[06:03:55] <reem> Gankro: I think if it was a recognized pattern or we generalized it so it could be used to mean mem::replace it would be cool.
[06:04:43] *** Quits: galen (galen@moz-caprup.dsl-w.verizon.net) (Quit: WeeChat 1.1.1)
[06:04:53] <Gankro> reem: precedent in mainstream languages seems important here. If I see a=b=c I have some strong pre-concieved notions on what that does
[06:05:36] <reem> Ya, that was the top comment about the idea on HN, but I just thought it would be so neat for rust, since it works perfectly with ownership.
[06:06:16] <Gankro> How does it work perfectly with ownership?
[06:07:33] <huon> transfers values around instead of losing them
[06:07:34] <reem> Gankro: a = b evaluating to the new value doesn’t work because you would have to clone or something, but evaluating to the old value of a works because you’re just about to move in to that spot, so moving out is fine.
[06:08:19] <reem> *a = *b = *a is mem::swap in safe code
[06:08:33] <Gankro> reem: Ah, I see
[06:08:57] <Gankro> Well you could enable a=b=c for all Copy types (which is the only case where it makes sense anyway)
[06:09:03] <reem> wow, that’s cool - what I first thought was cool sugar actually enables new semantics to be expressed in the language
[06:09:13] <reem> Gankro: it can be for all types, not just Copy types
[06:09:26] <Gankro> reem: Sorry I meant "c-style a=b=c"
[06:09:40] <reem> Ah I see
[06:11:45] <Gankro> reem: Also lets in the classic `if x = y` bug if x and y are bools ;)
[06:12:09] <reem> haha that’s true
[06:12:40] <huon> does anyone know any mods on #rust-gamedev?
[06:14:14] <reem> they are there, they just stay de-oped most of the time
[06:15:21] <huon> yeah, but who?
[06:15:22] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:15:46] <Gankro> They already quit out anyway :/
[06:16:12] *** Joins: folding_chair (Mibbit@moz-29eeuu.puckey.org)
[06:18:33] *** Joins: gw (sid60@moz-p8llle.0j4i.jtu0.0101.2620.IP)
[06:19:56] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[06:20:30] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[06:22:24] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[06:22:24] <folding_chair> Hi I'm from 4chan
[06:22:27] *** huon sets mode: +b *!*Mibbit@moz-29eeuu.puckey.org
[06:22:28] *** folding_chair was kicked by huon (huon)
[06:28:45] *** Joins: montefleury (Mibbit@moz-89l0mv.anonymizer.ccc.de)
[06:34:38] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:34:39] *** Joins: p1start (p1start@moz-nftjhe.org)
[06:35:43] *** Joins: eibwen (eibwen@moz-v4qg3e.dip0.t-ipconnect.de)
[06:35:49] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:36:02] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[06:39:59] *** Quits: eibwen (eibwen@moz-v4qg3e.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[06:40:04] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[06:43:35] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[06:44:10] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Connection closed)
[06:44:13] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:44:38] *** Joins: p1start (p1start@moz-nftjhe.org)
[06:45:09] *** Joins: marsel (user@moz-rh7.06n.234.188.IP)
[06:52:48] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[07:05:48] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[07:09:33] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[07:11:49] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[07:12:00] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:14:05] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:21:55] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[07:22:50] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[07:22:50] *** ChanServ sets mode: +o pnkfelix
[07:25:06] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[07:25:56] *** Quits: njn (chatzilla@moz-7npk8s.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 40.0a1/20150503160042])
[07:30:26] *** Joins: Guest63 (textual@moz-ttd.2as.255.109.IP)
[07:30:51] *** Joins: genbattle (genbattle@moz-ikj3l8.xtra.co.nz)
[07:32:12] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[07:32:13] *** ChanServ sets mode: +o pnkfelix
[07:33:46] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[07:36:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[07:37:33] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[07:40:57] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[07:51:12] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[08:00:13] <doener> bstrie: that means that unless we store a bool in memory, we use the i1 representation, e.g. we passing booleans as function arguments. We used to always zero-extend to i8 and then truncate back to i1 when we had to. To added some overhead to the code and sometimes confused the optimizer. Storing to / loading from memory still happens as i8, because LLVM only properly optimizes stores that cover who
[08:00:19] <doener> le bytes.
[08:00:28] *** Quits: Kxepal (Miranda@moz-383chs.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[08:01:44] <bstrie> doener: I see, I was hopeful that LLVM would perform some magic to make a struct of booleans as efficient as a bitfield :)
[08:02:29] *** Joins: Kxepal (Miranda@moz-ve0drg.pppoe.mtu-net.ru)
[08:03:42] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:04:10] <Mutabah> Where would I look to define an attribute on functions to be checked by a linter?
[08:05:12] <bstrie> Mutabah: https://github.com/Manishearth/rust-tenacious/ probably has some clue
[08:05:26] <bstrie> Mutabah: or you could just ask the lintmaster directly :P
[08:06:37] *** Joins: larhat (Adium@moz-egv.ld6.128.213.IP)
[08:06:44] <Mutabah> :D
[08:08:14] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[08:09:09] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[08:12:22] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[08:12:28] <Manishearth> Mutabah: you don't define the attribute anywhere, you jsut let the lint pick it up
[08:12:39] <Mutabah> Manishearth: Ah, nice
[08:13:06] *** Quits: larhat (Adium@moz-egv.ld6.128.213.IP) (Quit: Leaving.)
[08:14:10] <Manishearth> bstrie: I have two blog posts I wish to write. One on why shared mutability is bad in a single-threaded situation, the other on the different data wrappers in Rust (Box, Rc, the Cells, Arc, Mutex, &ptr, *ptr). Which would you suggest I write?
[08:14:39] <bstrie> first one
[08:14:46] <Manishearth> thanks
[08:15:00] * Manishearth is in a blogpost writing mood these days
[08:15:52] <doener> Manishearth: *sigh* a remaining problem is that we only get better asm, not necessarily better IR, so we're still missing out on some optimizations
[08:16:16] <Manishearth> hmm
[08:17:23] <bstrie> doener: so, for the "non-zeroing" part of bool, does that mean that LLVM will sometimes reuse a whole byte for storage of a bool where the upper seven bits are data from previous values?
[08:17:38] <bstrie> doener: and then could you cast the bool to a u8 and get that junk?
[08:18:30] <huon> no
[08:18:41] <doener> bstrie: when storing them to memory, we still use i8, zero-extending the i1
[08:19:01] <doener> bstrie: and function arguments get the zext flag so they're zero-extended, too
[08:19:13] <bstrie> ok
[08:19:57] *** Joins: laumann (thomas@moz-vj4.hq0.225.130.IP)
[08:21:36] <aatch> Destructors are the only place we have something happening that isn't represented somewhere in the source code, right?
[08:23:02] <bstrie> aatch: autoderef, conversion coercions
[08:23:20] <bstrie> also autoref on methods
[08:23:41] <aatch> bstrie, they're implied by the expressions being coerced/reffed/dereffed
[08:24:04] <bstrie> well destructors are implied by its value going out of scope :)
[08:25:29] <pnkfelix> bstrie: (or being overwritten)
[08:26:28] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:27:01] <aatch> bstrie, I'm thinking more in terms of walking the AST and seeing the operations. Especially with dynamic drop happening. I'm just making sure there isn't any other invisible non-trivial work that can happen in a function.
[08:27:55] <bstrie> pnkfelix: even if you get overwritten, your destructor doesn't run until the end of the scope
[08:28:30] <bstrie> aatch: isn't drop glue represented in the AST?
[08:28:58] <aatch> bstrie, unless things have changed drastically. No.
[08:29:20] <bstrie> ah right, yeah, that seems impossible
[08:29:31] <bstrie> you need typechecking to see where ownership goes
[08:30:19] <aatch> Anyway, I can narrow down my requirements to just when it's an operation dependent on a type parameter that isn't reflected in the bounds.
[08:31:02] <bstrie> is autoderef reflected in the AST?
[08:31:11] <bstrie> + Deref overloads?
[08:33:08] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[08:33:54] <aatch> bstrie, if I assume that all method calls, derefs and borrows *might* use an overloaded Deref, thats ok.
[08:34:33] <bstrie> hm
[08:35:45] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[08:35:46] <bstrie> implicit copies?
[08:36:13] <aatch> I'm trying to figure out how to be smarter about monomorphisation, without it breaking because I missed some case where actually, no, there does need to be a separate instantiation.
[08:37:21] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[08:37:23] <bstrie> something something Sized-ness?
[08:37:28] <aatch> The problem is doing it without being so conservative that you don't actually reduce the number of instances.
[08:37:35] <bstrie> other than that I got nothing
[08:38:43] <aatch> Destructors seem to be the only thing where there's no indication of them in the type parameters and no indication of them in the source itself.
[08:39:10] <bstrie> that's something I've never considered before, that you can't bound on Drop
[08:39:27] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[08:39:27] <bstrie> well, I guess maybe all types implement it
[08:40:32] <arielb1> aatch: associated types
[08:40:42] <aatch> Stupid destructors, making everything more complicated.
[08:40:47] <aatch> arielb1, what about them?
[08:40:58] <arielb1> you also need to note them
[08:41:35] <arielb1> if you have some struct S { not_used: <T>::Assoc, other: u32 }
[08:41:36] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[08:41:38] <arielb1> and other is used
[08:41:48] <arielb1> then the value of not_used is important
[08:41:58] <arielb1> at least its size
[08:42:28] <aatch> arielb1, yes. I know.
[08:43:02] <arielb1> if you want to do a scan-translation, I suppose just do it
[08:43:13] <arielb1> it *would* basically have to be a scan-translation anyway
[08:43:23] <aatch> arielb1, scan-translation?
[08:43:39] <arielb1> I mean, scan the AST like you are translating
[08:43:47] <arielb1> but don't actually translate, just record the methods
[08:44:48] *** Joins: imperio (Mibbit@moz-3nd.aov.119.80.IP)
[08:44:49] <Manishearth> two days left to express your vehement dissent on the governance proposal:P
[08:44:52] <Manishearth> https://github.com/rust-lang/rfcs/pull/1068
[08:46:17] <bstrie> Manishearth: the duration of final comment periods is itself an aspect of the governance proposal! anarchy reigns!!
[08:46:50] <Manishearth> bstrie: clearly the governance proposal had a time travel clause that allowed it to apply retroactively
[08:48:41] <bstrie> okay, so, we can build with musl now
[08:48:50] <bstrie> the question is, should that be our default?
[08:49:21] <bstrie> is musl better than libc, for some value of better? and not just in the sense of static linking?
[08:49:43] <Manishearth> bstrie: got any nice examples for where shared mutability causes problems? Preferably more nuanced ones. If you say iterator invalidation I will segfault you :p
[08:51:17] <aatch> Manishearth, is this Rc<RefCell>> shared mutability or *mut shared mutability?
[08:52:05] <bstrie> Manishearth: a function that takes two &mut points but incorrectly presumes that they're not aliased
[08:52:53] <Manishearth> aatch: *mut I mean
[08:52:59] *** Joins: jga (jga@moz-jg4.t1q.244.77.IP)
[08:53:08] <Manishearth> aatch: or shared_ptr shared mutability
[08:53:16] <Manishearth> bstrie: XOR swap is a good example of that
[08:53:30] <bstrie> that was the example I was trying to think of, yeah
[08:53:40] <Manishearth> I love that example -- came up with it a few months ago ; and it showcases a footgun that's three lines long
[08:53:52] <Manishearth> and *completely* non obvious
[08:54:01] <aatch> Manishearth, well any time you have the ability to invalidate a reference that somebody else might be holding.
[08:54:30] <aatch> Manishearth, of which iterator invalidation is a special case.
[08:54:33] <Manishearth> aatch: so in any complex data structure with more references inside
[08:54:35] <Manishearth> true
[08:55:31] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[08:56:23] <aatch> Manishearth, exactly. There's also when you assume that a given function/method won't change some value, but it does. Not unique to shared mutability, but shared mutability can make the issue more subtle.
[08:56:48] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[08:56:50] <aatch> (applies to Rc<RefCell<T>> style shared mutability too)
[08:57:38] <Manishearth> yeah
[08:57:49] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:58:15] <Manishearth> aatch: well, Rc<RefCell<T>> is an rwlock
[08:58:40] <Manishearth> but yeah, higer level assumptions can be made
[08:58:56] <aatch> Manishearth, yes, but if I write into it, then "release the lock" and someone else writes into unexpectedly...
[08:59:04] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:59:30] <aatch> It's not a segfault-type issue, but can be a cause of bugs.
[09:00:12] <Manishearth> yep
[09:00:45] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[09:00:50] <kimundi> Manishearth: Are you looking for examples of where aliased &mut cause problems?
[09:01:06] <Manishearth> It just occured to me -- we allow mutability so the Haskell crowd must hate us, and we are const by default so the C++ crowd ... yeah ;P
[09:01:09] <Manishearth> kimundi: yep!
[09:02:15] <kimundi> Manishearth: Okay - another example is that you can write transmute with it in the presence of rusts enums, or just tagged unions in general
[09:02:23] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:02:31] <Manishearth> kimundi: oh that one I know
[09:02:37] <kimundi> k :)
[09:02:38] <Manishearth> That's the first one I'll be talking about
[09:02:42] <Manishearth> then iterators
[09:02:51] <Manishearth> then I want more examples, preferably specific ones
[09:02:55] <huon> Manishearth: (RefCell<T> == single threaded RwLock<T>, i.e. no need for the Rc)
[09:03:20] <aatch> &RefCell is a thing you can do
[09:03:46] <aatch> &mut RefCell just seems like trolling.
[09:03:53] *** Quits: Skyler (Skyler@moz-dgl2bi.fios.verizon.net) (Client exited)
[09:04:07] <Manishearth> I mean in general the post will be about how non-rwlocked mutation in  a single threaded but complex codebase is almost as bad as doing so in a threaded one
[09:04:32] <Manishearth> huon: yeah, but you might not always be able to do that, right? 
[09:04:42] <kimundi> Manishearth: Hm, not exactly an problem that gets prevented, but by having the no-alias guarantee allows the compiler to do optimizations like not needing to load the content of a address all the time
[09:04:55] <Manishearth> Rc<RefCell> is shared_ptr<RWLock> I guess
[09:05:08] <kimundi> not sure if thats relevant here though
[09:05:09] <Manishearth> kimundi: right
[09:05:33] <Manishearth> I wonder if that has provided any significant speedups
[09:05:47] <aatch> kimundi, more accurately it can assume that a write through one pointer doesn't affect the value behind a different pointer. Which can also allow it to avoid the writes as well.
[09:06:06] *** Quits: Guest63 (textual@moz-ttd.2as.255.109.IP) (Connection closed)
[09:07:09] <bstrie> I wonder if Rust code that doesn't use `unsafe` is reentrant by default, since it can't change static muts
[09:07:16] <Manishearth> aatch: I assume that's why &mut transmutes cause UB
[09:07:22] <bstrie> do you need unsafe to access TLS?
[09:07:26] <aatch> Manishearth, correct.
[09:07:44] <WindowsBunny> bstrie: statics with atomics can be mutated safely I believe
[09:07:52] <bstrie> ah right
[09:08:07] <aatch> bstrie, and I think that thread-local storage made with the macro is safe to access.
[09:08:31] <Manishearth> aatch: hm. now I kinda want to trigger that :p
[09:09:01] *** Quits: jga (jga@moz-jg4.t1q.244.77.IP) (Connection closed)
[09:09:38] *** Parts: gw (sid60@moz-p8llle.0j4i.jtu0.0101.2620.IP) ("")
[09:10:36] *** Joins: James (quassel@moz-225vcm.range86-148.btcentralplus.com)
[09:10:49] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:19:55] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[09:22:22] <pnkfelix> bstrie: I am talking about cases like this: http://is.gd/6AH04a
[09:24:01] <pnkfelix> bstrie: namely, the value *being* overwritten has to be dropped at the time of the overwrite.
[09:24:30] <pnkfelix> bstrie: (maybe some people define that as an "end of a scope", but I do not...)
[09:25:55] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:30:20] <bstrie> pnkfelix: ah, I was thinking about how you don't get dropped immediately if you reassign via `let`
[09:34:47] <pnkfelix> bstrie: ah yes, I don't see that as reassignment, but rather introducing a new (nested) binding.  :)
[09:36:13] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[09:37:36] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.5.1)
[09:41:16] *** Joins: xilec (Mibbit@moz-g6k.oht.161.46.IP)
[09:42:11] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[09:50:00] *** Quits: erz (erz@moz-efrhus.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:50:06] *** Joins: larhat (Adium@moz-egv.ld6.128.213.IP)
[09:52:00] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[09:56:15] *** Quits: larhat (Adium@moz-egv.ld6.128.213.IP) (Quit: Leaving.)
[09:56:32] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:04:38] <huon> Manishearth: Rc<RefCell> == single threaded Arc<RwLock<>>
[10:08:32] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[10:10:40] *** Quits: xilec (Mibbit@moz-g6k.oht.161.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:20:48] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[10:20:48] <Manishearth> huon: yes
[10:26:36] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[10:26:36] *** ChanServ sets mode: +o pnkfelix
[10:33:33] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Ping timeout: 121 seconds)
[10:34:06] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Quit: )
[10:35:13] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:39:00] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[10:39:00] *** ChanServ sets mode: +o pnkfelix
[10:39:02] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[10:42:38] *** Joins: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP)
[10:43:06] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[10:44:51] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:46:09] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:50:38] *** Quits: James (quassel@moz-225vcm.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[10:50:41] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:52:53] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[10:54:11] *** Quits: genbattle (genbattle@moz-ikj3l8.xtra.co.nz) (Ping timeout: 121 seconds)
[11:02:14] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[11:03:13] *** Joins: larhat1 (Adium@moz-egv.ld6.128.213.IP)
[11:03:27] *** Quits: larhat1 (Adium@moz-egv.ld6.128.213.IP) (Quit: Leaving.)
[11:11:21] <Luqman> doener: that SROA bug :(
[11:12:32] <doener> Luqman: not sure if that's a bug or by design
[11:13:06] <doener> Luqman: it can't just go and try to split the sret slot into its scalar components, that only works for allocas
[11:17:55] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:21:09] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Quit: )
[11:28:14] *** Joins: mindtree (Mitch@moz-l32.ei8.240.116.IP)
[11:32:03] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[11:35:37] *** kimundi is now known as zz_kimundi
[11:39:31] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[11:39:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:40:19] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:40:56] *** Quits: montefleury (Mibbit@moz-89l0mv.anonymizer.ccc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[11:43:57] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[11:44:51] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[11:44:55] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[11:46:49] *** Joins: mib_9t6edr (Mibbit@moz-juv.9o3.252.72.IP)
[11:49:26] *** Quits: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[11:49:29] <Mutabah> How do I tell rustc where a plugin library exists/
[11:49:58] <Mutabah> Does it look for a .rs, or use --extern?
[11:50:01] <cmr> I think it's with -L or --extern
[11:50:12] <cmr> it doesn't look for .rs, it wants a shared library.
[11:50:53] <Mutabah> Ooh, think this might ahve worked
[11:51:24] <Mutabah> cmr: thanks (used -L)
[11:52:24] *** Quits: mib_9t6edr (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:54:46] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[11:58:27] *** Joins: Bira (Bira@moz-sq6.nc4.106.187.IP)
[12:00:13] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:05:47] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[12:10:36] *** zz_kimundi is now known as kimundi
[12:22:35] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[12:24:14] *** Joins: untitaker_ (untitaker@moz-l628jn.highway.telekom.at)
[12:27:09] *** Quits: untitaker (untitaker@moz-0lslvg.highway.telekom.at) (Ping timeout: 121 seconds)
[12:28:43] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:30:02] <Mutabah> If I wanted to visit all calls within a function body, function/trait would I use?
[12:30:05] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[12:30:22] <doener> huh... why do "const" items apparently produce more metadata than "static" items?
[12:34:45] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[12:36:36] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[12:40:21] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:42:33] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:44:42] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[12:48:25] *** Joins: mib_z8cpzm (Mibbit@moz-juv.9o3.252.72.IP)
[12:48:51] *** Quits: mindtree (Mitch@moz-l32.ei8.240.116.IP) (Ping timeout: 121 seconds)
[12:56:38] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[12:59:39] *** Joins: proc (proc@moz-lggecs.dip0.t-ipconnect.de)
[13:01:57] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:03:32] <kimundi> doener: If I had to guess, its because const needs to be inlinable while static just generates a symbol
[13:04:26] <cmr> Mutabah: only way I know is just writing a visitor and walking the AST for the function body
[13:05:08] <doener> kimundi: hmm... I changed format!() to use consts for its arrays instead of statics. Those consts are inside blocks so they should be completely invisible to the outside
[13:05:55] <doener> kimundi: the consts get merged while statics don't, so the size of the generated code is smaller in general, but the metadata grew
[13:06:19] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[13:07:25] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Quit: Leaving)
[13:13:02] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[13:28:03] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[13:30:03] <Mutabah> cmr: :/ thought there might already be such a visitor
[13:30:22] <cmr> Mutabah: for function calls specifically? I don't think so.
[13:32:03] <Mutabah> cmr: Well, a general visitor trait that handled visiting expression nodes
[13:32:38] <cmr> Oh, yeah: http://static.rust-lang.org/doc/master/syntax/visit/trait.Visitor.html
[13:32:53] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:51:28] <Mutabah> *derp*
[13:53:23] *** Joins: mindtree (Mitch@moz-l32.ei8.240.116.IP)
[13:55:32] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[13:55:44] <Zoxc> That has a scary long list of implementors
[13:57:45] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:58:13] *** kimundi is now known as zz_kimundi
[14:01:48] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[14:04:44] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:05:06] *** Joins: chmanchester (Chris@moz-5va5sv.ckpj.s0pt.0450.2001.IP)
[14:07:29] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[14:08:36] *** Quits: chmanchester (Chris@moz-5va5sv.ckpj.s0pt.0450.2001.IP) (Quit: Leaving)
[14:08:50] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[14:13:08] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[14:13:51] *** Joins: chmanchester (sid313@moz-6igabj.0j4i.jtu0.0101.2620.IP)
[14:15:31] *** Joins: Diggsey (diggsey@moz-nq516s.dsl.pipex.com)
[14:18:22] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[14:21:05] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[14:21:05] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[14:21:52] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Ping timeout: 121 seconds)
[14:22:57] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[14:23:25] *** Joins: annodomini (lambda@moz-o15.d8k.142.32.IP)
[14:28:10] *** Joins: srh (User@moz-19lh79.q9f2.utp8.0306.2602.IP)
[14:29:00] *** Joins: jga_ (jga@moz-jg4.t1q.244.77.IP)
[14:30:57] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[14:37:24] *** Quits: jga_ (jga@moz-jg4.t1q.244.77.IP) (Connection closed)
[14:37:43] *** Quits: annodomini (lambda@moz-o15.d8k.142.32.IP) (Client exited)
[14:38:54] *** Joins: ytain (ytain@moz-pr2.aip.175.108.IP)
[14:40:25] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[14:40:32] *** Joins: annodomini (lambda@moz-o15.d8k.142.32.IP)
[14:40:45] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[14:43:40] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:43:43] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[14:45:07] *** Quits: bkearns (Adium@moz-2l9j31.ca.comcast.net) (Quit: Leaving.)
[14:51:44] *** cmr changes topic to '11 days to 1.0.0 http://blog.rust-lang.org/2015/02/13/Final-1.0-timeline.html | https://botbot.me/mozilla/rust-internals | https://buildbot.rust-lang.org/homu/queue/rust | see also #rustc and #rust-libs'
[14:54:24] *** Joins: jga_ (jga@moz-jg4.t1q.244.77.IP)
[14:55:08] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:55:45] *** Quits: laumann (thomas@moz-vj4.hq0.225.130.IP) (Quit: leaving)
[15:04:11] *** Quits: imperio (Mibbit@moz-3nd.aov.119.80.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:04:47] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (A TLS packet with unexpected length was received.)
[15:08:58] *** Joins: japaric (japaric@moz-8v5.ipa.42.190.IP)
[15:11:51] *** Joins: martin (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP)
[15:14:07] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:14:27] *** zz_kimundi is now known as kimundi
[15:14:28] *** Quits: Bira (Bira@moz-sq6.nc4.106.187.IP) (A TLS packet with unexpected length was received.)
[15:24:00] *** Joins: bombless (_@moz-odk.piv.41.59.IP)
[15:30:46] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[15:34:50] *** Quits: annodomini (lambda@moz-o15.d8k.142.32.IP) (Ping timeout: 121 seconds)
[15:35:32] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:37:51] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:42:03] *** Joins: quantheory (quantheory@moz-dsb104.crel.jtvf.0001.2601.IP)
[15:43:12] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[15:48:15] *** Joins: bkearns (Adium@moz-rudtng.static.wiline.com)
[15:49:06] <quantheory> nmatsakis: ping
[15:50:27] <nmatsakis> quantheory: pong
[15:51:26] <quantheory> So, I was looking at #24938, and I was thinking it may be an incentive to do projections for associated constants.
[15:52:43] <quantheory> Right now the issue with associated constants being resolved too late is only within typeck, but I figured that if I try doing something now, it would also help for generic constants in the future.
[15:53:13] <nmatsakis> quantheory: yes, I imagine we'll eventually want to be doing the same thing in both situations
[15:53:56] <quantheory> nmatsakis: OK. I just wanted to check in and see if you were changing anything related for associated types.
[15:54:41] <quantheory> nmatsakis: Unlike with constants it basically works (at least fewer ICEs), but there are some open bugs and things and I didn't know if you were actively doing anything right now.
[15:55:28] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[15:57:27] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:58:53] *** Joins: bombless_ (_@moz-odk.piv.41.59.IP)
[15:59:22] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[15:59:22] *** ChanServ sets mode: +o pcwalton
[15:59:43] <nmatsakis> quantheory: I have actually a (somewhat major) change related to assoc type projection planned (not yet started too much), but should be fairly orthgonal I think to what you are doing -- unfortunately I have to run out now (have to get my daughter from pre-school), but I'd be happy to talk about it with you later. I've also been meaning to writeup a description of my plan but haven't had time yet
[16:00:16] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[16:00:18] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:00:20] <quantheory> nmatsakis: OK. I'll keep in touch.
[16:01:09] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[16:01:43] *** Joins: harrisonclarke (harrisoncla@moz-fsj.smq.68.142.IP)
[16:02:07] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:06:24] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[16:06:55] *** Quits: harrisonclarke (harrisoncla@moz-fsj.smq.68.142.IP) (Connection closed)
[16:07:02] *** Quits: mib_z8cpzm (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:09:02] *** bombless_ is now known as bombless
[16:09:31] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[16:10:04] *** Quits: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP) (Ping timeout: 121 seconds)
[16:10:44] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[16:11:48] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[16:11:56] *** Joins: arielb1 (Ariel@moz-78pi5m.red.bezeqint.net)
[16:12:23] *** Joins: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP)
[16:15:55] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[16:16:04] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[16:17:07] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:17:12] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:20:38] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:21:39] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:22:00] *** Quits: quantheory (quantheory@moz-dsb104.crel.jtvf.0001.2601.IP) (Quit: Leaving)
[16:22:20] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[16:24:02] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[16:24:36] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[16:27:54] *** Quits: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net) (Quit: Alfador is the Entity!)
[16:27:55] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:28:20] *** Joins: Murarth (Murarth@moz-tkj.b85.166.46.IP)
[16:28:22] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[16:31:42] *** Joins: bombless (_@moz-odk.piv.41.59.IP)
[16:32:08] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[16:32:27] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:32:54] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:34:14] *** Joins: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de)
[16:37:41] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[16:38:16] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[16:38:27] *** Quits: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP) (Ping timeout: 121 seconds)
[16:38:42] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:40:53] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[16:52:34] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[16:53:50] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Connection closed)
[16:59:11] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:59:58] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[16:59:58] *** ChanServ sets mode: +o pcwalton
[17:05:52] *** Quits: mindtree (Mitch@moz-l32.ei8.240.116.IP) (Ping timeout: 121 seconds)
[17:06:41] *** Joins: mindtree (Mitch@moz-p8kk6g.iprimus.net.au)
[17:07:28] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[17:07:59] *** Joins: jdm (jdm@moz-6c2k86.ckpj.s0pt.0450.2001.IP)
[17:09:48] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[17:10:37] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Ping timeout: 121 seconds)
[17:10:39] *** Joins: eibwen (eibwen@moz-v4qg3e.dip0.t-ipconnect.de)
[17:11:40] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[17:15:58] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[17:16:43] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[17:22:01] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[17:25:05] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[17:27:04] *** Quits: bombless (_@moz-odk.piv.41.59.IP) (Ping timeout: 121 seconds)
[17:37:01] *** Quits: Murarth (Murarth@moz-tkj.b85.166.46.IP) (Quit: brb, washing the cat)
[17:37:17] *** Joins: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net)
[17:39:52] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[17:48:35] *** Joins: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com)
[18:01:11] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[18:01:14] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[18:03:03] *** Joins: eddyb (Mibbit@moz-6oa.kjd.26.188.IP)
[18:03:08] <eddyb> burntsushi: hi! :D
[18:03:37] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[18:04:12] <eddyb> burntsushi: I'm having some trouble with regexes. the "expansion takes 4 seconds and the resulting code is likely suboptimal" kind of trouble. poke me when you're around
[18:04:21] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[18:06:40] <doener> eddyb: hey, LTNS! How are you?
[18:06:56] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:08:25] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Ping timeout: 121 seconds)
[18:10:39] <Luqman> eddyb: !
[18:11:40] <eddyb> doener: fine, thanks. just a bit more sleep-deprived than usual. school demands most of my attention, will be done with it in another month or so, I promise :)
[18:12:02] *** Joins: Stebalien (Stebalien@moz-pqe.qkj.56.172.IP)
[18:12:45] *** Quits: marsel (user@moz-rh7.06n.234.188.IP) (Ping timeout: 121 seconds)
[18:12:46] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:14:18] <Stebalien> Shouldn't http://goo.gl/AOhj0r talk about str and [T] (slices) instead of strings and vectors?
[18:17:09] *** Quits: rovar (rovar@moz-96effg.dyn.optonline.net) (NickServ (RECOVER command used by rovar_))
[18:17:09] *** rovar_ is now known as rovar
[18:17:22] *** Joins: rovar_ (rovar@moz-96effg.dyn.optonline.net)
[18:17:40] <eddyb> that FAQ is missing "Do you ever need codepoint indexing? NOPE". I have yet to see a single compelling usecase and I bet I'll be waiting for a long while
[18:23:21] *** Joins: brson (brson@moz-l8ebtf.sfo1.mozilla.com)
[18:23:21] *** ChanServ sets mode: +o brson
[18:24:42] <brson> aturon: there's been one regression since last friday's beta, involving the Reflect trait https://internals.rust-lang.org/t/regression-report-beta-2015-05-01-vs-nightly-2015-05-03/1990
[18:24:58] <brson> that will become a 1.1 regression if it isn't backported
[18:25:20] <aturon> brson: thanks. it's planned for backporting. https://internals.rust-lang.org/t/psa-adding-reflect-as-super-trait-for-error/1892
[18:25:46] <aturon> brson: see also https://github.com/rust-lang/rust/pull/24793
[18:26:05] <aturon> acrichto: ^ surprisingly small amount of fallout
[18:26:19] <acrichto> aturon: nice!
[18:28:11] *** Joins: carllerche_ (carllerche@moz-8h4.7g2.246.98.IP)
[18:28:14] *** Quits: carllerche_ (carllerche@moz-8h4.7g2.246.98.IP) (Client exited)
[18:29:59] *** Joins: michalt (uid82910@moz-7jrol4.charlton.irccloud.com)
[18:30:18] *** Joins: marsel (user@moz-rh7.06n.234.188.IP)
[18:31:37] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[18:36:11] <bluss> the tycheck pathologies stem from the new binary ops code. Is it possible to add a shortcut when both terms of the binop are primitives? Or when they are both number literals
[18:36:20] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[18:36:52] <arielb1> bluss: what's the problem anyway?
[18:37:37] <bluss> https://github.com/rust-lang/rust/issues/23977#issuecomment-89035822
[18:37:43] <bluss> and this https://github.com/rust-lang/rust/issues/25069
[18:39:42] <eddyb> doener, Luqman: https://github.com/eddyb/r3/tree/atestat-cnitv-2015 fwiw
[18:40:34] <eddyb> bluss: I'm pretty sure the new binary ops code was designed to replace previous shortcuts. I expect there to be more general improvements that would cut down on the pathological cases
[18:41:12] *** Quits: brson (brson@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[18:41:29] <bluss> I see that niko thinks that too
[18:41:46] <bluss> of course the shortcuts would have to be new and not the old simplifications that didn't hold
[18:41:50] <bluss> anymore
[18:41:56] <doener> eddyb: nice
[18:42:15] <bluss> eddyb: we still know that 1 + 1  can not be overloaded, for example
[18:42:28] <Luqman> eddyb: sweet!
[18:42:31] <eddyb> bluss: ah
[18:42:55] <eddyb> doener: oh dear I just realized that it might end up on reddit. my only hope is that few people will bother to translate the romanian text :D
[18:44:57] <eddyb> I should have mentioned all the bugs discovered during this, but, eh, it was written late at night and whatnot
[18:45:38] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Connection closed)
[18:46:30] <eddyb> which reminds me. acrichto: there's a nasty bug on windows. Command::{spawn,status} (I believe inheriting stdio does it) used on a Rust program (including rustc.exe) ends up in "foo.exe has stopped working"
[18:46:47] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[18:47:23] <eddyb> acrichto: and I'm not sure I can debug it in any way. running gdb --args foo.exe ... results in an immediate successful exit (stdin not inherited?)
[18:47:39] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[18:55:53] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[19:03:50] *** Quits: cdidd (cdidd@moz-llmnnu.broadband.corbina.ru) (A TLS packet with unexpected length was received.)
[19:05:57] *** Joins: tamird (textual@moz-69r.lnk.116.63.IP)
[19:08:01] *** Joins: cdidd (cdidd@moz-7sa7fj.broadband.corbina.ru)
[19:09:06] *** Quits: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[19:10:36] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[19:14:17] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[19:15:47] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[19:16:09] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[19:16:50] *** Quits: Rusky (russell@moz-4ggjij.slkc.qwest.net) (Quit: Leaving.)
[19:17:33] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[19:18:04] *** Joins: Rusky (russell@moz-4ggjij.slkc.qwest.net)
[19:19:28] *** Quits: Rusky (russell@moz-4ggjij.slkc.qwest.net) (Quit: Leaving.)
[19:23:10] *** Quits: proc (proc@moz-lggecs.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[19:25:18] <arielb1> I think I got gh25076
[19:25:19] <[o__o]> cat_expr Errd on "fold": https://github.com/rust-lang/rust/issues/25076
[19:26:51] <bluss> arielb1: what is this syntax??
[19:26:54] <bluss> playbot: <_>::fold(1..10, 0, |x, y| x + y)
[19:26:56] -playbot- 45
[19:27:02] <arielb1> bluss: UFCS
[19:27:08] <eddyb> wait wait wait
[19:27:17] <arielb1> I thought this was method resolution magic being a problem
[19:27:17] <bluss> yeah, but the crazy version of UFCS :))
[19:27:22] <eddyb> does this work only because only a trait providing fold is in scope?
[19:27:41] <eddyb> playbot: trait Foo { fn fold(self); } <_>::fold(1..10, 0, |x, y| x + y)
[19:27:43] -playbot- 45
[19:28:02] <eddyb> playbot: trait Foo { fn fold<T, U>(self, x: T, y: U); } <_>::fold(1..10, 0, |x, y| x + y)
[19:28:03] -playbot- 45
[19:28:06] <eddyb> no way :|
[19:28:31] * eddyb scratches head
[19:28:34] <arielb1> eddyb: I have a more-verbose way
[19:28:51] <eddyb> last I saw that implementation, it wasn't doing any argument-dependent dispatch
[19:29:01] <bluss> <_>:: is a sure way to make anyone scratch their head
[19:29:03] <eddyb> playbot: trait Foo { fn fold<T, U>(self, x: T, y: U); } ({<_>::fold})(1..10, 0, |x, y| x + y)
[19:29:04] -playbot- 45
[19:29:22] <eddyb> am I doing the dummy trait wrong?
[19:29:26] <arielb1> bluss: eddyb: normal unification
[19:29:31] *** Joins: tamird_ (textual@moz-69r.lnk.116.63.IP)
[19:29:32] <arielb1> _ unifies with the first argument
[19:29:35] *** Quits: tamird (textual@moz-69r.lnk.116.63.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:29:48] <eddyb> playbot: trait Foo { fn fold<T, U>(self, _x: T, _y: U) {} } impl<T> Foo for T {} ({<_>::fold})(1..10, 0, |x, y| x + y)
[19:29:49] -playbot- more than 5000 bytes of output; bailing out
[19:29:53] <eddyb> ahahahahaha
[19:29:57] <arielb1> then this becomes <FullRange<u32>>::fold(foo, bar)
[19:30:02] <eddyb> playbot: trait Foo { fn fold<T, U>(self, _x: T, _y: U) {} } impl<T> Foo for T {} <_>::fold(1..10, 0, |x, y| x + y)
[19:30:03] -playbot- more than 5000 bytes of output; bailing out
[19:30:05] <arielb1> which we know how to handle
[19:30:09] <eddyb> arielb1: yeah, no, I was doing it wrong
[19:30:22] <eddyb> it was ignoring my dummy trait because it had no implementations
[19:30:33] <eddyb> I wonder what it could possibly be outputting
[19:30:42] <eddyb> playbot: trait Foo { fn fold<T, U>(self, _x: T, _y: U) {} } impl Foo for () {} <_>::fold(1..10, 0, |x, y| x + y)
[19:30:43] -playbot- more than 5000 bytes of output; bailing out
[19:30:55] <arielb1> eddyb: I think it complains about duplicates
[19:31:25] <eddyb> arielb1: my question was how does it pick the method, btw. there just happens to be only one trait containing fold in scope. which makes it kinda fragile
[19:31:45] <arielb1> eddyb: that's how unannotated UFCS works
[19:31:48] <eddyb> with argument-dependent lookup, you're getting closer to method calls being magic-less
[19:31:53] <arielb1> <Type>::method
[19:32:08] * eddyb giggles
[19:32:31] *** Joins: Rusky (russell@moz-4ggjij.slkc.qwest.net)
[19:32:44] <eddyb> arielb1: was mostly curious whether someone improved it in any way since I wrote it, I guess
[19:33:41] <arielb1> that's the RFC
[19:34:28] *** Quits: Stebalien (Stebalien@moz-pqe.qkj.56.172.IP) (Quit: leaving)
[19:34:50] <bluss> <_>::len(&vec![1,2,3])  tries to call Iterator::len too
[19:36:07] <eddyb> bluss: lol
[19:40:10] *** Quits: mindtree (Mitch@moz-p8kk6g.iprimus.net.au) (Quit: leaving)
[19:42:26] <arielb1> eddyb: how do you create a fat pointer in trans
[19:42:57] <arielb1> what's the representation of a fat pointer in trans?
[19:43:59] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[19:44:22] <eddyb> arielb1: what kind of value?
[19:44:40] <arielb1> I'm trying to make casting of fat pointers work
[19:44:40] <eddyb> arielb1: i.e. there's like 5 not-wrong answers to your question
[19:44:53] <eddyb> arielb1: raw fat pointers?
[19:45:01] <arielb1> eddyb: yes
[19:45:01] *** Quits: semarie (semarie@moz-rbmflj.gtor.org) (A TLS packet with unexpected length was received.)
[19:45:04] <eddyb> arielb1: what's an example of two types?
[19:45:19] <eddyb> but this sounds pretty much like you shouldn't use casting
[19:45:22] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:45:22] *** ChanServ sets mode: +o pcwalton
[19:45:24] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[19:45:25] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[19:45:26] <arielb1> *const Iterator<Item=&u8> -> *const Iterator<Item=&u16>
[19:45:41] <arielb1> eddyb: that
[19:45:42] <eddyb> oh, that
[19:45:51] <eddyb> arielb1: just bitcast
[19:46:02] <arielb1> can this be done in consts?
[19:46:28] <eddyb> which is what the regular *T -> *U cast should be doing
[19:46:41] <eddyb> arielb1: eh. are you in expr or in consts? I assumed the former
[19:46:49] <arielb1> eddyb: casts work in both
[19:46:54] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[19:46:55] <eddyb> no they don't
[19:47:00] <arielb1> they do 
[19:47:07] <eddyb> there's no such thing as a const bitcast
[19:47:14] <arielb1> I mean, Rust casts work in both
[19:47:19] <eddyb> there are const ptrcasts but... oh, I see
[19:47:21] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[19:47:32] <eddyb> the question is which one are you asking about?
[19:47:35] <eddyb> the approach is different
[19:47:45] <arielb1> I need it to work in both places, of course
[19:48:08] <eddyb> in expr, you only need to bitcast the datum value to the expected LLVM type
[19:48:33] <eddyb> (it's still a pointer... so a pointer cast should still work. the current code should work unless it does something dumb)
[19:48:46] <arielb1> what's the representation of fat pointers anyway?
[19:49:08] <eddyb> like I said, it depends. in expr, it's a pointer to a fat pointer
[19:49:41] <arielb1> I'm doing PtrToInt on the same
[19:49:43] <eddyb> in consts, it's a {*T, extra} thing
[19:49:50] <eddyb> wait, what?
[19:50:00] <arielb1> I'm not doing PtrToInt on a fat pointer
[19:50:02] <arielb1> just on thin ones
[19:50:08] <arielb1> of course
[19:50:18] <eddyb> I thought we were talking about *TraitA -> *TraitB
[19:50:25] <arielb1> eddyb: we were talking about that
[19:50:32] *** Joins: brson (brson@moz-l8ebtf.sfo1.mozilla.com)
[19:50:32] *** ChanServ sets mode: +o brson
[19:50:33] <arielb1> also [&TraitA] -> [&TraitB]
[19:50:50] <arielb1> I mean, *const [&TypeA] -> *const [&TypeB]
[19:51:01] *** Quits: tamird_ (textual@moz-69r.lnk.116.63.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:51:04] <arielb1> where we hope TypeA ~ TypeB (this is a raw pointer cast)
[19:51:36] <eddyb> in consts, you need to take the pair apart and reconstruct it, after pointer-casting the first field to match the expected result
[19:51:49] <eddyb> arielb1: also see their respective code for creating a fat pointer in the first place
[19:52:15] <arielb1> consts does something with const_unsized
[19:52:24] <arielb1> then creates a C_struct
[19:52:32] <eddyb> huh, I don't recall const_unsized being a thing
[19:52:48] <arielb1> what's the LLVM type of extra?
[19:52:52] <eddyb> but yes, the C in C_struct means constant
[19:53:20] <eddyb> arielb1: the problem with consts is that they're pretty strict (unless you have undef in them, they're a safe subset of operations)
[19:53:29] <eddyb> (and this is LLVM consts I'm talking about)
[19:53:55] <eddyb> arielb1: you don't cast the extra
[19:54:13] <brson> I'm going to attempt to deploy the new rustup.sh script now, then test that travis still works
[19:54:21] <arielb1> eddyb: what's extra's type?
[19:54:24] <eddyb> you can't... which means you have to disallow *[T] -> *Trait and *Trait -> *[T]
[19:54:35] <arielb1> eddyb: I already disallow that
[19:54:38] <eddyb> perfect
[19:54:43] <arielb1> what's about *Trait -> *SomeOtherTrait ?
[19:54:49] <eddyb> the extra should be the same
[19:55:00] <arielb1> not recommended through ;-)
[19:55:02] <eddyb> wait, no, it's statically typed
[19:55:12] <eddyb> it's a pointer
[19:55:40] <arielb1> so forbid that?
[19:55:45] <arielb1> I think that is fine too
[19:55:45] <eddyb> no
[19:55:56] <eddyb> you can't tell between the type of the extra without getting the leaf unsized type
[19:56:06] <eddyb> then, if it's [T], then it's an usize so you can just reuse it
[19:56:30] <eddyb> (both type would have to be slices, at least at their leaves)
[19:56:44] <arielb1> if its [T] I'm fine
[19:56:57] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[19:57:12] <eddyb> for trait, pointer-cast the extra pointer, too, not just the data pointer
[19:57:34] <eddyb> thankfully this will be over in the future, when pointers will stop being in LLVM
[19:58:02] <eddyb> right now constants are a mess and you can't do a lot of nice optimizations
[19:58:08] <arielb1> cast info to what?
[19:58:42] <eddyb> arielb1: to the type that the same field should have in the resulting type's LLVM type
[19:59:01] <eddyb> that's how almost everything works
[19:59:30] <eddyb> symmetry and hopes
[20:03:04] <arielb1> how do I get that type?
[20:09:43] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[20:09:44] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[20:13:49] <eddyb> arielb1: by looking at how a value of that type would be created
[20:15:56] <arielb1> I have a Ty<'tcx>
[20:16:51] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[20:16:51] *** ChanServ sets mode: +o pnkfelix
[20:17:00] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:18:41] <eddyb> arielb1: do I need to do this step by step? where could a value of type &'static Trait be created?
[20:18:53] <eddyb> (in constants)
[20:19:07] <arielb1> in unsize
[20:19:48] <arielb1> that place uses ty::struct_lockstep_tails
[20:20:03] <eddyb> *constants*
[20:20:35] <arielb1> it does just that
[20:20:43] <eddyb> it's here https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/consts.rs#L322
[20:20:44] <arielb1> it calls expr::unsize_info
[20:21:08] <arielb1> L318 doesn't do anything important, right?
[20:21:55] <arielb1> hey info does always have the same type (Type::vtable_ptr)
[20:22:00] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[20:22:07] <arielb1> I don't need to ptrcast it
[20:22:16] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[20:22:22] <eddyb> you're lucky, that's not exactly something we should be doing :P
[20:23:02] <eddyb> for some reason I thought we weren't ptrcasting to a single type in constants, too, but I guess we were
[20:23:52] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:24:42] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:24:44] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Connection closed)
[20:25:31] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:25:31] *** ChanServ sets mode: +o pcwalton
[20:26:06] <arielb1> just use a bitcast in expr?
[20:28:41] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:29:32] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:29:32] *** ChanServ sets mode: +o pcwalton
[20:29:53] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[20:30:19] <eddyb> arielb1: interesting, this assumes scalars https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/expr.rs#L2030-L2033
[20:30:32] *** Joins: mib_qlysf4 (Mibbit@moz-juv.9o3.252.72.IP)
[20:30:49] <eddyb> arielb1: or this might be hit https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/expr.rs#L1113
[20:31:04] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[20:31:16] <eddyb> arielb1: but if the types are both unsized, it's enough to pointer-cast datum.val
[20:31:56] <eddyb> might want to assert that it's by-ref, I guess
[20:32:16] *** Quits: mib_qlysf4 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:32:17] <eddyb> (it's always, right now, because we don't pass something larger than a pointer by-value around)
[20:32:48] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[20:33:25] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (Ping timeout: 121 seconds)
[20:33:27] <eddyb> doener: why is a pair of scalar SSA values treated better than a single {T, U}-typed value containing the same scalars?
[20:37:03] <doener> eddyb: I can't give you a meaningful answer to that
[20:38:05] <eddyb> doener: is it just "some hand-crafted C++ loops would be 3 times as long if they had to handle such cases, because there's missing abstractions all over the place"?
[20:40:05] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[20:40:46] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[20:41:09] <doener> no idea TBH
[20:42:18] *** Quits: killercup (killercup@moz-gpufip.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:42:25] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[20:43:11] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[20:44:07] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[20:44:36] *** Quits: eddyb (Mibbit@moz-6oa.kjd.26.188.IP) (G-Lined: spam)
[20:46:37] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Connection closed)
[20:46:37] <doener> hu?
[20:47:19] <doener> wth did eddyb do to get G-lined?
[20:47:37] <cmr> spammed, apparently.
[20:48:14] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[20:48:38] *** Joins: larhat (Adium@moz-tb1ulb.cable.virginm.net)
[20:50:57] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[20:51:00] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[20:51:14] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Connection closed)
[20:52:11] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (G-Lined: spam)
[20:55:08] <arielb1> eddyb: thanks
[20:55:15] <arielb1> I get broken function error through
[20:55:20] <arielb1> so I must have done something wrong
[20:55:43] <arielb1> I pushed it
[20:55:43] <arielb1> https://github.com/arielb1/rust/commit/379cef801aabcf37dba686c99f9e6c2e79dc36e1#diff-88ce76a36e25f7f0d19bc4cdd58ee1b8
[20:55:44] <arielb1> nrc
[20:56:54] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[20:56:59] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[20:57:01] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[20:57:01] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[20:57:53] *** Quits: marsel (user@moz-rh7.06n.234.188.IP) (Ping timeout: 121 seconds)
[20:58:00] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:02:06] *** Joins: Tobba (Tobba@moz-qun.0oa.226.188.IP)
[21:02:12] *** Quits: arielb1 (Ariel@moz-78pi5m.red.bezeqint.net) (Quit: Ex-Chat)
[21:04:40] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[21:04:52] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[21:05:19] *** WindowsBunny is now known as cunt
[21:05:23] <cunt> [o__o]: ping
[21:05:23] *** Quits: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com) (G-Lined: spam)
[21:05:32] *** cunt is now known as WindowsBunny
[21:05:42] <XMPPwocky> ...
[21:05:45] <doener> uhm...
[21:05:49] <Tobba> lol
[21:05:50] <WindowsBunny> botbot is ded
[21:06:21] <WindowsBunny> Sorry about the usage of that nick, and sorry if anyone got offended
[21:07:04] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:07:04] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:07:32] <kmc> why was it necessary?
[21:07:40] <kmc> "sorry if anyone got offended" is pretty weak sauce
[21:07:40] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:07:40] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:08:03] <kmc> also nick changes show in every channel ._.
[21:08:19] *** WindowsBunny is now known as WindowsBunnyIsSorry
[21:08:24] <XMPPwocky> kmc: so apparently anybody who says that person's nick gets G-lined for  spam
[21:08:28] <WindowsBunnyIsSorry> kmc: Now my apology is everywhere
[21:08:49] <XMPPwocky> kmc: so now nobody has nice things
[21:08:51] *** Tobba is now known as TobbaDidNothingWrong
[21:10:22] <kmc> lol
[21:10:38] <kmc> i got glined for copypasting a spammer once
[21:12:36] *** Quits: TobbaDidNothingWrong (Tobba@moz-qun.0oa.226.188.IP) (G-Lined: spam)
[21:12:56] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[21:13:03] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:14:08] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[21:14:47] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Connection closed)
[21:14:48] *** Joins: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr)
[21:14:58] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[21:15:14] <imperio> does someone know how I could get the data used by rustdoc before it formats it ?
[21:15:45] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:16:08] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:16:08] *** ChanServ sets mode: +o pcwalton
[21:16:13] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[21:17:25] <XMPPwocky> imperio: what i was told is that rustdoc mixes its parsing up with its output a lot
[21:17:33] <XMPPwocky> there's not really one intermediate stage
[21:17:37] <XMPPwocky> that you could hook into
[21:17:46] <imperio> erf...
[21:17:46] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:17:46] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:17:51] <imperio> that's what I was afraid of
[21:17:58] <XMPPwocky> there's rustc save-analysis
[21:18:00] <cmr> imperio: it can dump json.
[21:18:04] <XMPPwocky> imperio: what are you tryign to do?
[21:18:16] <cmr> rustdoc -w json
[21:18:21] <imperio> gh25033
[21:18:22] <[o__o]> Beginning of more beautiful rustc --explain: https://github.com/rust-lang/rust/pull/25033
[21:18:30] <imperio> oh cool
[21:18:33] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[21:18:36] <WindowsBunnyIsSorry> [o__o]: oh hey, you're back
[21:18:41] <WindowsBunnyIsSorry> [o__o]: Sorry about earlier
[21:18:52] <imperio> WindowsBunnyIsSorry: you broke it again ?
[21:18:57] <imperio> it breaks often...
[21:19:07] <WindowsBunnyIsSorry> imperio: I got it g-lined earlier
[21:19:17] <imperio> g-lined ? What does that mean ?
[21:19:41] <doener> imperio: banned from all servers on the network
[21:19:50] *** Tobba is now known as Scunthrope
[21:19:52] <imperio> XD
[21:20:04] *** Scunthrope is now known as Tobba
[21:20:10] <imperio> XMPPwocky: I'm trying to improve rustc --explain
[21:20:35] <imperio> I did a little test and it seems nice so I want to use rustdoc parsing instead of doing another -useless- one
[21:20:51] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:21:23] *** Quits: erz (erz@moz-efrhus.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:21:51] <imperio> XMPPwocky: However, is that a good idea to usee the json like that ?
[21:21:59] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:21:59] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:22:18] <XMPPwocky> jesus christ people can you stop
[21:22:55] <WindowsBunnyIsSorry> XMPPwocky: I don't think people will stop until mozilla rescinds that g-line rule
[21:23:07] *** Tobba is now known as Scunthrope
[21:24:03] *** Parts: kmc (keegan@moz-gjgn5n.compute.amazonaws.com) ()
[21:24:03] <Scunthrope> well
[21:24:08] <Scunthrope> it's a retarded one
[21:24:22] <Scunthrope> though it was probably left in there by accident
[21:24:34] <WindowsBunnyIsSorry> careful, some people might be offended by the usage of the word "retarded"
[21:25:12] <Scunthrope> I'm just gonna leave my nick like this until I forget about it and ask a question
[21:26:13] <Scunthrope> I assume this works anyways
[21:26:20] <Scunthrope> [o__o]: ping
[21:26:20] *** Quits: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com) (G-Lined: spam)
[21:26:27] <Scunthrope> yeah thats a .* rule alright
[21:26:32] <WindowsBunnyIsSorry> Yep, it works....
[21:26:33] <Scunthrope> (I hope noone actually needs that)
[21:26:42] <WindowsBunnyIsSorry> Well there goes public logging again
[21:26:47] <Scunthrope> excellent
[21:26:48] <Scunthrope> quick, scheme
[21:30:47] *** Quits: shachaf (shachaf@moz-evr8ss.members.linode.com) (Quit: Reconnecting)
[21:30:48] *** Joins: shachaf (shachaf@moz-evr8ss.members.linode.com)
[21:31:11] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[21:31:47] *** Scunthrope is now known as Scunthorpe
[21:32:02] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:32:02] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:32:35] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:32:52] <imperio> is that normal that rustdoc doesn't work if there is an extern crate ? Is there an option to *not* doc an extern crate ?
[21:33:02] <imperio> I didn't find anything about that...
[21:33:08] <cmr> imperio: it should work...
[21:33:21] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:34:34] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (G-Lined: spam)
[21:34:43] *** Quits: michalt (uid82910@moz-7jrol4.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[21:34:46] *** Scunthorpe is now known as Tobba
[21:35:59] <imperio> cmr: actually, this acommand totally fails and ask me to add feature libc (and when I add it, it says it generates invalid json...) : "rustdoc --output-format json src/lib.rs"
[21:36:20] <imperio> that's kinda to work on it with those problems...
[21:37:00] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[21:37:10] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[21:37:11] <sfackler> you probably just need to tell it where the dependencies live
[21:37:42] <imperio> sfackler: on this lib, there none
[21:39:16] <imperio> sfackler: to be very precise, I tried it on : https://github.com/GuillaumeGomez/sysinfo
[21:41:30] *** Quits: larhat (Adium@moz-tb1ulb.cable.virginm.net) (Quit: Leaving.)
[21:43:08] <imperio> cmr: no idea on what's going on ?
[21:43:19] <cmr> imperio: not really, sorry :(
[21:43:32] <imperio> erf... I was hoping I just did a bad command...
[21:43:43] <imperio> I guess I just have to open an issue... :'(
[21:44:41] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:44:45] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:44:45] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (G-Lined: spam)
[21:46:15] *** Joins: eddyb (Mibbit@moz-3lt.hlc.26.188.IP)
[21:46:27] <eddyb> WindowsBunnyIsSorry: can you try fn main() { Command::new("rustc").spawn().unwrap(); }?
[21:46:42] <WindowsBunnyIsSorry> eddyb: sure
[21:46:50] *** Quits: filsmick (filsmick@moz-n9713g.abo.wanadoo.fr) (Quit: )
[21:47:04] *** Quits: srh (User@moz-19lh79.q9f2.utp8.0306.2602.IP) (Quit: Leaving)
[21:47:16] <eddyb> WindowsBunnyIsSorry: I hope you can debug the error on-demand somehow
[21:47:38] * WindowsBunnyIsSorry cargo runs
[21:48:07] <eddyb> WindowsBunnyIsSorry: I actually found it in the event viewer, and it was a segfault, but I didn't see much else of interest there
[21:48:30] <imperio> cmr: gh25108 if you wanna follow the status
[21:48:30] <[o__o]> rustdoc --output-format json command seems broken: https://github.com/rust-lang/rust/issues/25108
[21:48:45] <WindowsBunnyIsSorry> eddyb: no segfaults
[21:48:54] <eddyb> WindowsBunnyIsSorry: it actually works?
[21:49:09] <WindowsBunnyIsSorry> eddyb: http://i.imgur.com/fIDFdet.png
[21:49:11] <WindowsBunnyIsSorry> Seems to
[21:49:22] <eddyb> WindowsBunnyIsSorry: and if you replace spawn with status?
[21:49:29] <brson> only 90 pr's last week https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Amerged+merged%3A2015-04-27..2015-05-01
[21:49:40] <brson> oh, wait that link is wrong
[21:49:51] <brson> 115 https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Amerged+merged%3A2015-04-27..2015-05-04
[21:50:03] <WindowsBunnyIsSorry> eddyb: still fine?
[21:50:04] <eddyb> I'm wondering if the libstd code grabbing stdout is broken in some cases...
[21:50:30] <WindowsBunnyIsSorry> eddyb: and I'm doing this from within msys2
[21:50:37] <eddyb> WindowsBunnyIsSorry: try from cmd.exe
[21:51:04] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[21:51:40] <eddyb> thanks to the bundled linker, I don't need msys anymore
[21:51:55] <WindowsBunnyIsSorry> eddyb: still fine
[21:52:23] <sfackler> imperio: the crate depends on libc. The version that comes with rustc is unstable which is why you're seeing those errors
[21:52:35] <eddyb> WindowsBunnyIsSorry: the main other difference is that I was on windows 7
[21:52:40] <sfackler> either pull it from crates.io or add #![feature(libc)]
[21:52:44] <WindowsBunnyIsSorry> eddyb: And I'm on 8.1
[21:52:47] <WindowsBunnyIsSorry> using x64
[21:53:15] <eddyb> oh, I was using the 32-bit compiler
[21:53:22] <eddyb> for reasons of compatibility
[21:53:23] <imperio> sfackler: I did, just like it's wrote in the issue
[21:53:36] <WindowsBunnyIsSorry> eddyb: Maybe its a 32-bit specific issue, go find out :D
[21:53:47] <WindowsBunnyIsSorry> If it is, I'll just have to verify our definitions
[21:54:03] <eddyb> I wonder if it happens under wine
[21:54:49] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[21:54:49] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[21:56:34] <eddyb> err:seh:setup_exception_record stack overflow 816 bytes in thread 0025 eip 630c19e7 esp 03401000 stack 0x3400000-0x3401000-0x3c00000
[21:56:42] <eddyb> err:seh:setup_exception_record stack overflow 896 bytes in thread 0024 eip 63160a4f esp 00420fb0 stack 0x420000-0x421000-0x620000
[21:56:53] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:57:16] <imperio> sfackler: I hope my answer wasn't too dry...
[21:57:57] <sfackler> nope, I just didn't see that part under the feature errors
[21:58:12] <WindowsBunnyIsSorry> eddyb: :|
[21:58:27] <imperio> oh okay, well don't worry, I did try it, I don't like being frustrated
[22:00:06] *** Joins: skeuomorf (skeuomorf@moz-h8l.u8d.32.197.IP)
[22:01:57] *** Joins: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at)
[22:04:15] <eddyb> acrichto: just confirmed with WindowsBunnyIsSorry that Command::{spawn,status} breaks rust children on windows 7, 8.1 and even in wine
[22:04:17] <eddyb> oh dear
[22:04:32] <eddyb> WindowsBunnyIsSorry: tried running "cmd.exe" under it just to see what happens
[22:04:36] <eddyb> got flooded with "fixme:cmd:WCMD_ReadAndParseLine No command nor handle supplied"
[22:04:50] <sfackler> ha
[22:04:57] <acrichto> eddyb: ?
[22:05:34] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:06:00] *** Quits: dinfuehr (dinfuehr@moz-j5sgb8.highway.telekom.at) (Ping timeout: 121 seconds)
[22:06:18] <eddyb> acrichto: it causes a segfault in the child process
[22:06:27] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:06:37] <eddyb> acrichto: that is, something in libstd is handling the situation incorrectly
[22:06:55] <eddyb> also, something like this produces no output, which is surprising: fn main() { std::process::Command::new("cmd").arg("/c").arg("echo").arg("foo").spawn().unwrap(); }
[22:07:17] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:07:17] *** ChanServ sets mode: +o pcwalton
[22:07:29] <acrichto> eddyb: what version of the compiler are you using?
[22:07:45] <eddyb> rustc 1.1.0-nightly (f9e53c7f2 2015-04-24) (built 2015-04-25)
[22:08:31] <acrichto> you may want to update to the most recent nightly
[22:08:40] <acrichto> there was a bug fixed recently in stdio handling of spawning windows processes
[22:08:45] <acrichto> and this sounds like that bug
[22:09:04] <eddyb> WindowsBunnyIsSorry: you knew nothing about that? tsk tsk :)
[22:09:10] *** Quits: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) (Client exited)
[22:09:46] *** Joins: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net)
[22:10:10] *** Parts: annodomini (lambda@moz-hceqmj.hfc.comcastbusiness.net) ()
[22:10:53] <eddyb> acrichto: thanks, too bad I stuck with that version for https://github.com/eddyb/r3/tree/atestat-cnitv-2015 - updating it would've involved rebuilding all my dependencies in a windows VM and I found out about this issue too late
[22:11:12] <acrichto> :(
[22:11:38] <eddyb> I worked around it by capturing all output and dumping it
[22:11:52] <eddyb> it's not as pretty, but it does the job for the demo
[22:12:01] <eddyb> acrichto: so this was it? https://github.com/rust-lang/rust/pull/24873
[22:12:14] <acrichto> eddyb: yeah
[22:12:48] <eddyb> "ensuring destructors are always run" heh
[22:14:08] *** Joins: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP)
[22:16:42] *** Joins: James (quassel@moz-225vcm.range86-148.btcentralplus.com)
[22:19:42] <eddyb> acrichto: something else... I developed this demo on linux and tested it on windows. someone tried to run it on OSX and there's something odd going on with linking against rustc_driver (or any other rustc crate)
[22:20:13] <eddyb> acrichto: there are some otool -L dumps here, why do stage1 and stage2 show up in a nightly? https://gist.github.com/mitchmindtree/33e071f0eb39a0f8f8a1#comment-1446083
[22:21:37] <eddyb> acrichto: I was hoping it was just a matter of having extra libraries around. maybe otool needs another flag to display the actual resolved path it uses?
[22:22:17] <Eridius> eddyb: huh, I get the same stage1 paths
[22:22:36] <Eridius> eddyb: otool is displaying the paths in the LC_LOAD_DYLIB load commands
[22:22:46] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[22:22:51] <Eridius> you can use `otool -l $(which rustc)` to see the load commands directly
[22:22:57] <eddyb> riiight, but I need the real ones, like what ldd shows on linux
[22:23:05] <eddyb> s/real/final
[22:23:06] <acrichto> eddyb: I think that's normal in terms of those paths showing up, but was that installed by homebrew? (homebrew may be installing the wrong thing?)
[22:23:25] <eddyb> acrichto: no, I believe it was rustup.sh
[22:23:51] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[22:24:29] <Eridius> acrichto: I see the stage1 paths with rustup
[22:24:29] *** Quits: brson (brson@moz-l8ebtf.sfo1.mozilla.com) (Quit: leaving)
[22:24:43] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[22:25:13] <acrichto> weird
[22:25:17] <Eridius> eddyb: you can use `env DYLD_PRINT_LIBRARYS=1 rustc` to ask dyld to print out the libraries that are loaded
[22:25:18] *** Quits: eibwen (eibwen@moz-v4qg3e.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:25:33] <eddyb> Eridius: thanks!
[22:25:52] <Eridius> eddyb: `man dyld` tells you about a bunch of useful env vars
[22:26:46] *** Joins: erz (erz@moz-efrhus.broadband.corbina.ru)
[22:27:45] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[22:30:33] *** Joins: njn (chatzilla@moz-390.dhg.170.124.IP)
[22:32:17] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:32:55] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:33:12] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:34:32] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[22:34:37] *** Quits: eddyb (Mibbit@moz-3lt.hlc.26.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:37:21] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[22:38:20] <acrichto> restarting buildbot
[22:40:50] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Connection closed)
[22:41:05] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[22:41:41] *** Quits: naerbnic (naerbnic@moz-i9o.rs4.199.12.IP) (Client exited)
[22:43:55] *** Joins: mr_fribble (Mibbit@moz-juv.9o3.252.72.IP)
[22:44:53] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:46:22] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:46:41] *** Quits: viktor (viktor@moz-704qgr.cust6.csbnet.se) (Connection closed)
[22:46:42] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[22:48:11] *** Quits: mr_fribble (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:51:26] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:55:08] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[22:57:26] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[22:58:39] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:58:39] *** ChanServ sets mode: +o pcwalton
[23:05:46] *** Joins: ryanhiebert (ryanhiebert@moz-imd.l7c.90.208.IP)
[23:05:47] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[23:06:02] *** Quits: ryanhiebert (ryanhiebert@moz-imd.l7c.90.208.IP) (Quit: Leaving...)
[23:06:05] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[23:07:09] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[23:08:44] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[23:10:31] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[23:10:53] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[23:25:03] <dherman> acrichto: eric rescorla pointed out to me that the cert for doc.crates.io is bad
[23:25:06] <dherman> known?
[23:25:30] <acrichto> dherman: ah well doc.crates.io is hosted on gh-pages, so I guess in that sense it's "known" :P
[23:25:34] <dherman> I think the rust book links to it via https
[23:25:41] <acrichto> oh, that's not good
[23:25:45] <dherman> I guess ^^ is for steveklabnik 
[23:25:48] <acrichto> I will fix, thanks for the heads up!
[23:25:52] <dherman> ah cool, thx
[23:29:19] *** Quits: jga_ (jga@moz-jg4.t1q.244.77.IP) (Ping timeout: 121 seconds)
[23:36:20] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Ping timeout: 121 seconds)
[23:42:53] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[23:45:21] *** Quits: ytain (ytain@moz-pr2.aip.175.108.IP) (Quit: Textual IRC Client: www.textualapp.com)
[23:45:23] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[23:51:42] *** Quits: James (quassel@moz-225vcm.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[23:54:46] *** Joins: ELD (textual@moz-mqboa7.co.comcast.net)
[23:58:16] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[23:58:26] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:59:24] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
