[00:00:12] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:00:15] <pcwalton> because C++ templates aren't appropriate for rust
[00:00:16] <sunfish> pcwalton: ieee754 min/max guarantee you get the non-NaN too
[00:00:19] <strcat> and explicit impls of traits
[00:00:50] <strcat> pcwalton: not saying C++ templates
[00:01:05] <strcat> there are languages with generics + type parameters without type class bounds
[00:01:13] *** Joins: earlzlap (earlz@5B1FE501.78CAA20E.2F043D47.IP)
[00:01:14] *** Quits: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Input/output error)
[00:01:17] <strcat> if the type class bounds don't bring along laws, then I don't see a point
[00:01:24] <strcat> just adds boilerplate
[00:01:26] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[00:01:45] *** Joins: jgashe (Mibbit@19808C3F.C4F5A14C.DDE5D3F6.IP)
[00:01:58] <eddyb> strcat: you can do type recursion with traits :P
[00:02:06] <strcat> if x == x isn't true, == doesn't really provide well-defined behaviour in most generic code
[00:02:11] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[00:02:17] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:02:21] <pcwalton> ok, so what does x < y do if x and y are of type T
[00:02:24] <pcwalton> what function do I call?
[00:02:32] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Ping timeout)
[00:02:35] *** Quits: sruggier (sruggier@moz-B9FB4CF4.cpe.pppoe.ca) (Ping timeout)
[00:02:43] *** Joins: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net)
[00:02:47] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[00:02:55] <strcat> pcwalton: lt on PartialOrd
[00:03:05] <strcat> pcwalton: generic code will mostly require Ord, which inherits from PartialOrd
[00:03:15] <strcat> and requires that PartialOrd be a total ordering impl
[00:03:21] <pcwalton> floats don't implement Ord then?
[00:03:24] <strcat> so floats won't impl Ord, but they'll have the operator overloads
[00:03:27] <strcat> pcwalton: right
[00:03:35] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:03:37] <strcat> and code handling partial ordering can opt-in to using it
[00:03:40] <strcat> but most code doesn't
[00:03:55] <pcwalton> what does sort do?
[00:03:58] <pcwalton> what bounds does sort take?
[00:03:59] <pcwalton> rather
[00:04:17] <strcat> pcwalton: well I think we'll have an Ord one and then perhaps a Float one putting NaN in a consistent place (the start or the end)
[00:04:24] *** Quits: mye (mye@moz-C6E6EB2.dip0.t-ipconnect.de) (Quit: mye)
[00:04:31] <strcat> the default one doesn't put NaN in a consistent place
[00:04:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:04:40] <strcat> so it can break a lot of invariants code will expect
[00:04:42] *** Quits: rootnode (rootnode@moz-E07EECD2.pools.arcor-ip.net) (Connection reset by peer)
[00:04:43] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:04:51] <eddyb> NaN is like a null pointer IMO
[00:04:53] *** Joins: rootnode (rootnode@moz-E07EECD2.pools.arcor-ip.net)
[00:05:23] <eddyb> we pretty much solved the pointer problem. do we want to keep NaNs? why does the standard have to have them :(
[00:05:41] <pcwalton> well, the problem is almost anything can dynamically produce a NaN
[00:05:46] <pcwalton> e.g. 0/0
[00:05:50] <sunfish> eddyb: NaNs have a purpose. if you don't try to coerce them into your integer-oriented generic programming, they're actually quite useful
[00:05:57] <strcat> division, and most of the algorithms like sqrt/sin
[00:06:11] <strcat> sunfish: they have a purpose in some kinds of code
[00:06:18] <eddyb> I understand that hardware implementation are all going to produce NaNs and checking for them is painful
[00:06:22] <strcat> I don't think they have much of a purpose outside of scientific programming...
[00:06:25] *** Quits: lawrence (lawrence@moz-DE2DF17B.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:06:28] <eddyb> it's just... sad
[00:06:38] *** Joins: frogzilla (Mibbit@E87770CF.F746F57.CC1A2609.IP)
[00:06:41] <jgashe> hey I'm a student at University of Virginia working on a problem set for our operating systems class (which uses rust). I've been trying to make an http get request using rust-http (https://github.com/chris-morgan/rust-http) but when i run make all on this repository i get a compile error. has anyone else used rust for http get requests?
[00:06:52] <cmr> isn't that the primary usecase for floats though, consideration-wise?
[00:06:54] <strcat> imo, an idiomatic rust rational or fixed-point type would either fail!() or return Option from something like sqrt
[00:07:06] <strcat> cmr: they're used all the time outside of scientific computing
[00:07:09] <eddyb> jgashe: you have to use a branch of it that builds with your rust. AFAIK you're using 0.9
[00:07:15] <strcat> cmr: and the design rarely makes sense there
[00:07:18] <pcwalton> maybe we should just use the real IEEE 754 total ordering for floats
[00:07:35] <strcat> pcwalton: I tried pushing for that as the default but there was a lot of pushback
[00:07:44] <strcat> I was going to expose the weak ordering with intrinsics
[00:07:49] <pcwalton> well, if < uses partial, and sort uses partial...
[00:07:50] <cmr> strcat: I know, but all of the guarantees they provide are oriented towards scientific computing and precision etc.
[00:07:55] <pcwalton> who's going to use the total ordering anyway? hash tables?
[00:07:59] <cmr> afaict
[00:08:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:08:01] <pcwalton> err, tree maps?
[00:08:03] * cmr hates floats
[00:08:06] <pcwalton> if you're putting floats in your tree maps you're asking for pain anyway :)
[00:08:07] <strcat> pcwalton: sort assumes total ordering atm
[00:08:13] <pcwalton> well, it could be made to not
[00:08:16] <cmr> jgashe: notice the "build: failing" travis sticker.
[00:08:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:08:26] <cmr> jgashe: looks like some types just need to implement Show.
[00:08:33] <strcat> if you give it [NaN, 0.0, 1.0] and [0.0, 1.0, NaN], it won't necessarily give a consistently sorted array
[00:08:45] <eddyb> strcat: so I know you dislike the crazy things you can do with template specialization in C++. check the TupleZip example here https://github.com/mozilla/rust/issues/10124
[00:08:59] *** Joins: lawrence (lawrence@moz-DE2DF17B.wireless.utoronto.ca)
[00:09:02] <strcat> boost has a variadic zip
[00:09:04] <strcat> ;p
[00:09:24] <eddyb> I bet you it's longer
[00:09:32] <strcat> zip(range_a, range_b, range_c) -> tuple<A, B, C>
[00:09:42] <strcat> eddyb: well, C++ templates do have first-class lists and pattern matching
[00:09:45] <pcwalton> strcat: I'm warming up to total ord being slow for floats, if total ord is rarely ever used on them
[00:09:48] <cmr> jgashe: it's the only http lib right now though.
[00:09:49] <strcat> you can write a pretty concise implementation
[00:10:00] <strcat> pcwalton: I don't think the IEEE754 ordering is necessarily slow
[00:10:01] <eddyb> strcat: but C++ tuples are terrible!
[00:10:01] <pcwalton> just merge 'em into Ord
[00:10:09] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[00:10:09] <pcwalton> it may not be slow anyway
[00:10:16] <pcwalton> someone should benchmark it
[00:10:33] *** Quits: capt_redbeard (Adium@moz-4998C3D0.ok.ok.cox.net) (Quit: Leaving.)
[00:10:35] <strcat> pcwalton: if you assume stuff about the representation (which we can, across the platforms we support), then you can cast to integers and use bitwise ops to do a lot of it
[00:10:38] *** Quits: earlzlap (earlz@5B1FE501.78CAA20E.2F043D47.IP) (Ping timeout)
[00:10:45] <o11c> okay, since I/O is all crazy right now:
[00:10:48] <pcwalton> benchmark it ;)
[00:10:52] *** Joins: alexherbo2 (alexherbo2@moz-14A2C8F9.w83-199.abo.wanadoo.fr)
[00:10:56] <pcwalton> in C++ if you like
[00:11:00] <strcat> pcwalton: it's hard to benchmark though
[00:11:01] <o11c> what would I use to check if a file descriptor is readable? I don't see select/poll in std::libc
[00:11:09] <pcwalton> just make huge arrays of floats and sort them
[00:11:16] <pcwalton> in C++
[00:11:17] <o11c> I *don't* want to actually read from it, I have a C library that does that part
[00:11:20] <pcwalton> using custom comparison functions
[00:11:29] <sunfish> or, just decide that you don't care that much about floats as hash keys...
[00:11:31] <strcat> I'll try that
[00:11:32] <cmr> o11c: bind select/poll.
[00:12:07] <strcat> sunfish: well my current plan was to have PartialEq/PartialOrd for the overloads and Eq/Ord for inheriting from them giving the guarantees
[00:12:08] *** Quits: Rym (WUT@39CBEBF9.BF9A5138.8772DA20.IP) (Ping timeout)
[00:12:10] <pcwalton> cool
[00:12:19] *** Quits: lawrence (lawrence@moz-DE2DF17B.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:12:21] <cmr> o11c: note that you need to use libnative if you want file descriptors.
[00:12:23] <strcat> sunfish: previously I wanted to have 2 traits but everyone seemed to hate the required compromises
[00:12:25] <o11c> cmr: huh? where?
[00:12:26] <cmr> because libuv handles aren't going to cut it.
[00:12:30] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[00:12:34] <cmr> o11c: in your own code, with an extern block.
[00:12:35] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[00:12:51] <strcat> the compromise being either
[00:13:10] <strcat> a) Eq/Ord not impl'ed for floats
[00:13:32] <strcat> b) operators that are inconsistent with alternate methods providing a total ordering (cmp, equals)
[00:13:43] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[00:13:52] <strcat> or c) use the total ordering by default for floats
[00:13:53] <eddyb> kmc: "Well, Geoff forwarded me a copy of the DEC message, and I eat my words. I sure would have minded it! Nobody should be allowed to send a message with a header that long, no matter what it is about. "
[00:13:56] <eddyb> kmc: bwahaha thanks
[00:14:07] <strcat> I am starting to like option `a` again.
[00:14:18] * strcat shrugs
[00:14:27] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Ping timeout)
[00:14:30] <sunfish> strcat: I don't fully understand the consequences yet, but `a` does sound promising
[00:14:44] <strcat> there would be wrapper types for floats implementing Eq/Ord with the total ordering
[00:14:49] <kmc> so "a < b" won't work anymore for floats?
[00:14:54] <strcat> kmc: that will work
[00:15:03] <strcat> kmc: but you can't use those operators in generic code that works on floats
[00:15:12] <strcat> because they won't impl Eq/Ord
[00:15:12] <kmc> i see
[00:15:21] <strcat> and something like (f32, f32) can't impl <
[00:15:32] <kmc> so the overloading of < is not purely trait overloading + sugar?
[00:15:47] <strcat> kmc: it's hard-wired for the built-in types, then falls back to the traits
[00:15:50] <kmc> i see
[00:15:51] <strcat> kmc: in generic code, it always uses the traits
[00:15:51] <kmc> thanks
[00:15:55] <sunfish> hrm. it'd still be nice to write generic code that abstracts over f32/f64 and uses <
[00:16:05] <strcat> kmc: you can tell from the codegen because we don't currently inline(always) the small trait impls
[00:16:15] <kmc> *cough* user-defined infix operators
[00:16:17] <strcat> kmc: so a < b on integers/floats outside of generics is efficient, and inside does function calls
[00:16:22] <strcat> (until optimized)
[00:16:48] <strcat> sunfish: yeah, which is why I like having PartialEq/PartialOrd (operators) and traits giving the extra guarantees
[00:16:58] <strcat> but it's complex
[00:16:58] *** Joins: Rym (WUT@AC250667.5D2765E2.51C6DE68.IP)
[00:17:02] <strcat> relative to 2 traits
[00:17:15] <strcat> I think it's simpler to have 4 traits than 2 traits with really weird rules though
[00:17:33] <strcat> you should be able to write code using Eq/Ord and assume basic stuff like x == x is true
[00:17:40] <eddyb> methinks we have the illusion of choice :P
[00:17:42] <strcat> and the operators should Just Work in that generic code
[00:17:59] <strcat> and if you really want to, you can use PartialOrd/PartialEq and still get the operators
[00:18:03] <eddyb> there doesn't seem to be a "right" way. just a few ways that all have problems
[00:18:04] <strcat> so that's why I like having 4
[00:18:14] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Quit: wilmoore)
[00:18:15] <strcat> but it needs inheritance + changed naming
[00:18:20] <strcat> and even the partial ones should have laws
[00:18:30] <eddyb> strcat: what if Eq inherits OpEq<Self, Self> and OpNe<Self, Self>?
[00:18:39] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[00:18:41] <strcat> eddyb: that's the point of PartialEq/PartialOrd
[00:18:42] <eddyb> those being the operators that are not restricted to same types
[00:18:46] <strcat> they are the 'operator' traits
[00:18:51] <strcat> eddyb: I really don't want operator overloads without laws
[00:18:52] <eddyb> err, bool instead of Self for the second one
[00:19:00] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[00:19:02] <strcat> if it doesn't satisfy the trait laws then why is it using the same trait?
[00:19:15] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Ping timeout)
[00:19:22] <eddyb> I mean, partial equality is treated as a generic overload
[00:19:32] <strcat> eddyb: I think it's a separate issue
[00:19:34] <eddyb> total equality has to be between the same types, return bool and have some more rules
[00:19:42] <strcat> total equality can be different types too...
[00:19:49] <strcat> I don't want to take on more than one issue with this
[00:19:54] <eddyb> riiight
[00:20:06] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[00:20:15] <strcat> and atm operator overloading with different types on each side is totally unsatisfactory
[00:20:38] <strcat> you can't make it symmetric like you can in C++
[00:20:40] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[00:20:46] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[00:20:58] <strcat> so I think that needs to be fixed before adding more
[00:21:15] <eddyb> yeah, coherence bit be a bit
[00:21:44] <eddyb> traits with smarter coherence would allow for the latest ES7 proposal in operator overloading :P
[00:22:10] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[00:22:20] <eddyb> I guess with associated items we can move the return type in the trait impl
[00:22:47] <eddyb> welll.... maybe not, because we have inference, unlike other languages
[00:23:11] <eddyb> (for the reference, that ES7 thing is pairing two types with an operator function)
[00:23:22] *** Joins: jdsanders (Adium@D073F53D.C41F93F.96556A09.IP)
[00:23:45] <eddyb> strcat: hmm, would that be total and partial equivalence?
[00:23:56] <eddyb> 4 traits just for equality/equivalence =))
[00:24:11] *** Joins: lawrence (lawrence@moz-DE2DF17B.wireless.utoronto.ca)
[00:24:26] <eddyb> (and two more traits for the actual operator overloads because I want to return a different type than bool)
[00:24:32] *** Quits: twi (Adium@moz-C93256DF.cust.vodafonedsl.it) (Quit: Leaving.)
[00:24:41] <strcat> I don't think we should traits not returning bool
[00:24:43] <strcat> it's too complicated
[00:24:57] <eddyb> I would hide it so that nobody has to bother with them
[00:25:07] <eddyb> you want equality, you get equality
[00:25:10] <strcat> there's no way of hiding it, it shows up in the documentation and implementation
[00:25:20] <eddyb> you want sugar, dig for it and you shall taste sweet
[00:25:43] <strcat> the traits in the stdlib should be for widespread patterns in generic code
[00:25:53] <eddyb> right now I have to write x.eq_(y) and x.lt_(y) while having operator overloads for everything else
[00:25:59] <strcat> if operator overloading is going to abuse traits by not using any laws, it shouldn't be done via traits
[00:26:21] <eddyb> but we don't have any other way of overloading :/
[00:26:30] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[00:26:32] <strcat> so suggest a way of doing it without traits
[00:26:40] <strcat> we used to have that
[00:26:41] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[00:26:45] <eddyb> I mean overloading in general
[00:26:50] <strcat> I know
[00:27:02] <strcat> overloading didn't used to be tied to traits
[00:27:03] *** Joins: nif (nif@F16146EB.9D3722BB.58DC3EE6.IP)
[00:27:32] <strcat> traits are quite silly without laws, because generic code can't actually use them without laws
[00:27:39] <eddyb> you will hate it when people will use macros to create traits using variadic hacks to overload function calls
[00:27:52] <strcat> I don't care what people do in their own code
[00:27:53] *** Joins: fyolnish (fyolnish@moz-5CEE766.uqwimax.jp)
[00:27:56] <strcat> I care about the stdlib being sane
[00:28:10] <eddyb> but it could allow for refutable pattern matching in definitions
[00:28:19] <eddyb> so that's not bad
[00:28:38] <strcat> at that point what is the advantage over C++ templates?
[00:28:52] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[00:28:53] *** Joins: mib_v9vegb (Mibbit@636AC086.5999CED5.71743E61.IP)
[00:28:56] *** Parts: nif (nif@F16146EB.9D3722BB.58DC3EE6.IP) (Konversation terminated!)
[00:28:58] <eddyb> theoretically cheaper type checking :P?
[00:29:10] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Quit: wilmoore)
[00:29:20] <kmc> knowing if your library typechecks before someone tries to use it?
[00:29:22] *** Quits: gsnedders (gsnedders@C95C83A3.84389009.803EA162.IP) (Ping timeout)
[00:29:22] <zwarich> checked interfaces
[00:29:28] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[00:29:30] <SiegeLord> Any instantiation will work
[00:29:30] <eddyb> (it's not cheaper because we zero a zillion bytes)
[00:29:31] <strcat> kmc: he's suggesting changing that
[00:29:35] *** Quits: fyolnish (fyolnish@moz-5CEE766.uqwimax.jp) (Ping timeout)
[00:29:37] *** Quits: mib_v9vegb (Mibbit@636AC086.5999CED5.71743E61.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:29:37] <strcat> afaict
[00:29:41] <eddyb> me? no
[00:30:14] <strcat> so how can you have refutable pattern matching without type errors?
[00:30:38] <eddyb> the problem with refutable is actually runtime errors
[00:30:46] *** Quits: mpiechotka (mpiechotka@moz-FD6AC988.dynamic.mnet-online.de) (Quit: mpiechotka)
[00:30:54] <eddyb> overloading is rather simple, once you have variadic arguments
[00:31:25] <eddyb> fn foo<..Args: ArgsForFoo>(..args: Args) {args.do_foo()}
[00:31:52] <eddyb> and now you can implement that trait for tuples of your argument types. taadaa
[00:32:11] *** Joins: capt_redbeard (Adium@moz-4998C3D0.ok.ok.cox.net)
[00:32:16] <eddyb> refutable pattern matching would have to combine different overloads together, if they have identical argument types
[00:32:22] <strcat> ;\
[00:32:44] <eddyb> I'm thinking fact(0) = 1; fact(n) = fact(n - 1) * n;
[00:32:44] *** Joins: gsnedders (gsnedders@C95C83A3.84389009.803EA162.IP)
[00:32:55] *** Quits: lawrence (lawrence@moz-DE2DF17B.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:33:11] <strcat> well that's irrefutable ;), and makes the definition order matter
[00:33:24] <eddyb> strcat: but each one is refutable!
[00:33:27] <eddyb> that was my point :P
[00:33:49] <eddyb> and it doesn't really play nicely without a type definition like fact(uint) -> uint;
[00:34:04] <eddyb> I guess we just have Haskell with more punctuation at that point
[00:34:47] *** Quits: stevegury (stevegury@636AC086.5999CED5.71743E61.IP) (Quit: stevegury)
[00:34:59] <eddyb> strcat: the latest trick is not in that examples section. I'm not even sure how to do it
[00:35:17] *** Joins: lawrence (lawrence@moz-DE2DF17B.wireless.utoronto.ca)
[00:36:02] <eddyb> but basically, by using ArrayLikeTuple<T> and/or [T, ..N], you can implement map on a fixed-len vector
[00:36:09] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[00:36:27] <eddyb> I know for sure you can map the tuple form
[00:36:53] <eddyb> I guess you keep it in tuple form on the stack and then get &[T] from it... but I actually wanted a [T, ..N]
[00:37:18] *** Quits: jgashe (Mibbit@19808C3F.C4F5A14C.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:38:01] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[00:39:58] *** Quits: ambimorph (amber@moz-B3FBDFCE.hlrn.qwest.net) (Ping timeout)
[00:40:04] *** Quits: lawrence (lawrence@moz-DE2DF17B.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:41:19] *** Quits: untwisted (untwisted@moz-8E42F91A.ucsc.edu) (Ping timeout)
[00:42:58] *** Quits: Jarrett (chatzilla@moz-465FA06E.dhcp.rvsd.ca.charter.com) (Quit: ChatZilla 0.9.88-rdmsoft [XULRunner 1.9.0.17/2009122204])
[00:43:36] *** Quits: frogzilla (Mibbit@E87770CF.F746F57.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:44:25] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[00:45:12] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Ping timeout)
[00:46:15] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[00:46:19] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[00:47:10] *** Quits: echristo (echristo@5CA6DC39.C60FE7DC.4065847B.IP) (Quit: echristo)
[00:47:18] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Input/output error)
[00:47:31] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[00:47:42] *** Joins: justin (justin@moz-2ED67D4E.bootp.virginia.edu)
[00:48:17] *** Quits: capt_redbeard (Adium@moz-4998C3D0.ok.ok.cox.net) (Quit: Leaving.)
[00:49:47] *** Parts: judder (maradukewa@A4DC519F.6379DA33.78E362FE.IP) ()
[00:50:09] <justin> I'm trying to read a binary file into a vector in Rust. I'm trying to use read_bytes. I'm not sure how to handle the errors though.
[00:51:10] <justin> I'm currently using io::result to trap the error, but I don't know what to do on the error. I need to not lose any bytes, and just return a smaller vector than requested
[00:51:35] *** Joins: mpiechotka (mpiechotka@moz-FD6AC988.dynamic.mnet-online.de)
[00:52:00] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:52:01] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:52:34] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:53:31] *** Joins: ChemicalHarm (chemicalha@moz-A9F37238.hsd1.md.comcast.net)
[00:53:47] *** Quits: q66 (q66@moz-A1DC287C.dab.02.net) (Quit: Leaving)
[00:54:03] <cmr> justin: 0.9? read the condition handling guide, it's in "Other Docs" for 0.9
[00:54:20] <cmr> I don't think anyone knew or remembers how to use conditions well...
[00:54:23] *** Joins: twi (Adium@moz-C93256DF.cust.vodafonedsl.it)
[00:54:32] <kmc> conditions are gone from the language
[00:54:34] *** Quits: alexherbo2 (alexherbo2@moz-14A2C8F9.w83-199.abo.wanadoo.fr) (Ping timeout)
[00:54:47] <kmc> and they are whack
[00:54:52] <eddyb> kmc: were they even a language feature?
[00:55:01] <kmc> don't bother learning them, just upgrade if you can
[00:55:10] <kmc> eddyb: there's at least some runtime support for the dynamic scoping nature, no?
[00:55:18] <cmr> nah
[00:55:21] <eddyb> well, runtime, but not compiler
[00:55:22] <cmr> it's just a vector in tls
[00:55:22] <huon> they just used TLD
[00:55:30] <justin> cmr: Yes I'm using 0.9. I read through the condition handling guide, but I'm still confused
[00:55:33] <eddyb> kmc: can't, justin is in a class using 0.9 :(
[00:55:38] <huon> (or, at least, they could be implemented to do that)
[00:56:03] <kmc> oh :/
[00:56:05] *** Quits: twi (Adium@moz-C93256DF.cust.vodafonedsl.it) (Ping timeout)
[00:56:08] <eddyb> master is much more fun. come on, if I can do it, students should be able to
[00:56:20] <eddyb> then again, it's a class. and I can't do class
[00:56:30] * eddyb crawls back into his hole
[00:57:02] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[00:57:09] *** Quits: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: azita)
[00:58:07] <justin> So what would be the approach for doing it in 0.9?
[00:58:20] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[00:58:22] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Quit: brandonson)
[00:58:26] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[00:58:32] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[00:59:34] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[00:59:42] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[01:00:21] <cmr> justin: http://static.rust-lang.org/doc/0.9/std/io/fn.ignore_io_error.html looks potentially usefl
[01:00:59] <cmr> I don't think you'll be able to use read_bytes though :/
[01:00:59] <eddyb> std::io::cut_brake_lines()
[01:01:10] <cmr> you might have to use your own wrapper based on it.
[01:01:38] <eddyb> you need all the speeeeeeed anyways
[01:02:42] *** Quits: Guest (textual@moz-310FD28A.dynamic.caiway.nl) (Quit: Computer has gone to sleep.)
[01:02:44] *** Quits: mpiechotka (mpiechotka@moz-FD6AC988.dynamic.mnet-online.de) (Ping timeout)
[01:03:49] <justin> cmr: Ok, the issue I have is that when an error gets raised, I can capture it but it discards some of the data that has been read
[01:03:58] <cmr> right.
[01:03:59] *** Quits: ChemicalHarm (chemicalha@moz-A9F37238.hsd1.md.comcast.net) (Quit: )
[01:04:05] <cmr> so you need to read one at a time, I think...
[01:04:05] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[01:04:16] <eddyb> justin: you need to use a Master Ball
[01:04:27] <cmr> one being one byte :\
[01:04:28] <eddyb> not sure if 0.9 has that in the std
[01:04:56] *** Joins: fyolnish (fyolnish@moz-1B50A168.uqwimax.jp)
[01:05:01] <cmr> I think read/write need to return (length, Option<IoError>)
[01:05:07] <cmr> to handle partial reads w/errors...
[01:06:07] <justin> cmr: Yes I can read a byte at a time, but I was looking for ways of speeding up the IO
[01:06:40] <justin> cmr: A byte at a time is proving to run particularly slowly
[01:06:44] <eddyb> you can... steal data written into your buffer
[01:06:54] <eddyb> if you happen to know how much there is
[01:07:13] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:07:52] <eddyb> cmr: I just learned firefox can't into text drag the hard way
[01:08:56] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[01:09:03] <cmr> justin: yeah. I don't think there's a good solution right now.
[01:09:18] <justin> cmr: Ok thanks
[01:09:43] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:09:44] <Armavica> please correct me if I'm wrong: mozilla-servo/rust-xlib is outdated because servo, which uses it, does not run on the latest version of Rust, right?
[01:09:56] *** Joins: alexherbo2 (alexherbo2@moz-40E67BE9.w90-3.abo.wanadoo.fr)
[01:10:07] *** botond is now known as botond|email
[01:10:12] <eddyb> if servo still uses it, it will get updated in about a wekk, I would think
[01:10:34] <cmr> you should find aatch's xcb bindings generator and update those...
[01:11:28] <aatch> That generator...
[01:11:42] <aatch> Man, I got sooo many error messages developing that
[01:12:01] <aatch> one error in the script == 12000 compile erros
[01:13:00] <Armavica> aatch: what is the current status? is it usable?
[01:13:08] <aatch> nope
[01:13:17] <aatch> I haven't touched it in a long time
[01:13:38] <cmr> is it generating FFI calls or real rust code?
[01:13:45] <aatch> FFI calls
[01:13:47] <strcat> or be sane and use efl :P
[01:13:56] *** Quits: justin (justin@moz-2ED67D4E.bootp.virginia.edu) (Quit: Konversation terminated!)
[01:13:59] <cmr> shouldn't need much updating then, I'd imagine.
[01:14:23] <eddyb> aatch: same here. I have an ES6 script generating structures and methods for some DAG IR representing expressions and whatnot
[01:14:26] <kmc> Armavica: it's likely, yes.  if you want to update it for us we would be very happy :)
[01:14:37] <eddyb> aatch: I think I once got a few hundred errors just from a tiny change
[01:14:44] <kmc> you could also ask in #servo if somebody has already done that update
[01:14:52] <eddyb> not too mention traceur-compiler itself... that thing is crazy during parsing
[01:14:55] <eddyb> *it will not stop*
[01:15:30] <eddyb> you mess one thing, it will try to parse everything afterwards. combine that with forgetting to close a template string (which is a raw string with interpolation)
[01:15:51] *** Quits: mje113 (uid16557@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[01:16:29] *** Quits: eibwen (kvirc@moz-D4DF209C.dip0.t-ipconnect.de) (Ping timeout)
[01:16:31] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:18:20] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[01:18:29] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:18:45] *** Quits: alexherbo2 (alexherbo2@moz-40E67BE9.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[01:18:46] *** Quits: leowoe (Leo@moz-B4840CF0.dip0.t-ipconnect.de) (Quit: Leaving.)
[01:19:10] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[01:22:45] *** Joins: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[01:23:31] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[01:24:12] *** Joins: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[01:24:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:24:49] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[01:26:14] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:26:25] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:27:10] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[01:27:47] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[01:28:39] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[01:28:54] *** Joins: capt_redbeard (Adium@moz-4998C3D0.ok.ok.cox.net)
[01:29:20] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[01:29:33] <jdsanders> has anyone ever discussed adding `assert_not_eq!` with bi-directional testing and a nice error message like `assert_eq!`?
[01:29:34] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[01:29:55] <eddyb> rusti: assert_ne!(0, 1)
[01:29:55] -rusti- <anon>:10:9: 10:18 error: macro undefined: 'assert_ne'
[01:29:55] -rusti- <anon>:10         assert_ne!(0, 1)
[01:29:55] -rusti-                   ^~~~~~~~~
[01:29:56] -rusti- error: aborting due to previous error
[01:29:56] -rusti- application terminated with error code 101
[01:30:05] <eddyb> ohh. I thought we had something
[01:30:09] *** Quits: josh (josh@moz-244364B2.cable.virginm.net) (Quit: josh)
[01:30:48] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[01:34:34] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[01:36:56] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[01:37:18] *** Quits: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Ping timeout)
[01:37:58] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:40:37] *** Parts: capt_redbeard (Adium@moz-4998C3D0.ok.ok.cox.net) ()
[01:43:22] <dougxxx> humm... you can't namespace macros can you?
[01:43:36] <pcwalton> not yet
[01:43:39] <dougxxx> You've just got to import them into scope correctly?
[01:43:41] <pcwalton> that's part of the reason they're behind a feature gate
[01:43:47] <dougxxx> yeah, fair enough
[01:44:11] <quux00> I've been reading about zerocopy using the Linux sendfile system call.  Has anyone tried to use that (or wrap that) in Rust?
[01:44:36] <eddyb> strcat might know about such magic
[01:45:46] <quux00> OK.  The fn API is pretty straightforward - basically an input filedescriptor and an output filedescriptor, but the output I want to target is a socket.  It's not clear how to get the fd for a TcpSocket in Rust.  Any ideas?
[01:45:53] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:45:54] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[01:46:30] <acrichto> quux00: sadly not right now unless you use libnative
[01:46:35] <eddyb> quux00: that isn't exposed (and for good reason)
[01:47:12] <quux00> OK. Thanks.
[01:47:19] <eddyb> libgreen using libuv. it would have to implement sendfile via the uv API, which I'm not sure supports it...
[01:47:39] <eddyb> acrichto: do we have a general escape hatch for uv worker pools?
[01:47:52] <acrichto> not now, but I owuld like to add it in some form or another
[01:48:15] <eddyb> also async IO :P
[01:48:39] <eddyb> (but we don't really need that, now that we can clone sockets)
[01:49:28] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[01:49:30] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:50:11] <eddyb> acrichto: hmm, can you fully emulate node.js-like async using green tasks?
[01:50:27] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:50:28] <eddyb> I guess that's two worker pool abstractions stacked on top of each other?
[01:51:03] <eddyb> but in Rust, you can handle concurrent requests in different tasks. so it's more like erlang than node.js, I think
[01:53:03] *** Quits: pepper_chico (pepper_chi@moz-220E6D6D.dsl.telesp.net.br) (Ping timeout)
[01:53:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:55:05] *** Joins: twi (Adium@moz-C93256DF.cust.vodafonedsl.it)
[01:55:46] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:56:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:56:46] *** Quits: twi (Adium@moz-C93256DF.cust.vodafonedsl.it) (Ping timeout)
[01:57:27] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[02:00:29] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[02:00:35] *** Joins: pepper_chico (pepper_chi@moz-220E6D6D.dsl.telesp.net.br)
[02:01:25] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:02:23] <strcat> eddyb: libgreen would just do it the naive way
[02:02:27] <strcat> it's not an argument to omit it for libnative
[02:02:30] <alan_andrade> Who's interested in a hacking rust meetup. It differs from the current one in the sense people will code and share knowledge on the run.
[02:02:47] <strcat> if we had high-level memory mapped files, libgreen could just use seeks and reads too
[02:03:06] <eddyb> strcat: I was talking about exposing a file descriptor, but yeah, I agree with you
[02:03:58] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:05:58] *** Joins: Erik_ (Erik_S@moz-6691E309.hlrn.qwest.net)
[02:07:06] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:10:37] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[02:10:58] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:12:40] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[02:13:24] *** Quits: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net) (Quit: Sharp)
[02:13:56] *** Quits: Saj (Sajuuk@moz-840D0658.netvisao.pt) (Quit: Leaving)
[02:14:29] *** Quits: fyolnish (fyolnish@moz-1B50A168.uqwimax.jp) (Client exited)
[02:15:20] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[02:15:41] <jdsanders> hmmm, the compiler is telling me I don't have .is_even on num::bigint::BigUint, but this - http://static.rust-lang.org/doc/master/num/bigint/struct.BigUint.html#method.is_even - suggests that I should
[02:15:56] <jdsanders> "error: type `num::bigint::BigUint` does not implement any method in scope named `is_even`"
[02:16:32] <jdsanders> do I need to use Integer perhaps?
[02:16:37] *** Joins: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[02:16:53] <huon> yes, trait methods are scoped with the traits, so Integer needs to be in scope
[02:17:26] *** Joins: fyolnish (fyolnish@moz-1B50A168.uqwimax.jp)
[02:17:29] <jdsanders> makes sense, is that a recent change?
[02:17:35] <jdsanders> or perhaps it was on prelude before or something...
[02:19:08] *** Quits: fyolnish (fyolnish@moz-1B50A168.uqwimax.jp) (Ping timeout)
[02:20:13] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[02:20:39] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: pcwalton)
[02:21:47] *** Quits: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP) (Ping timeout)
[02:23:26] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[02:25:24] <alan_andrade> What's your favorite? Rusties, Rustaceans, Rustics...
[02:26:31] *** Quits: voxpopuli (fanservice@8C584618.171E5B70.689607DE.IP) (Ping timeout)
[02:26:32] <huon> jdsanders: I think Integer was in the prelude previously
[02:27:19] <jdsanders> huon: thanks
[02:27:24] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[02:27:42] *** Quits: jdsanders (Adium@D073F53D.C41F93F.96556A09.IP) (Quit: Leaving.)
[02:28:28] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[02:29:59] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[02:30:47] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[02:32:19] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[02:33:16] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Ping timeout)
[02:33:26] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[02:33:34] *** Quits: onelson (owen@moz-DD666EC5.laika.com) (Quit: Leaving)
[02:34:20] <rveach> hi, trying to build on windows, after "make" i get "No rule to make target rust/src/compiler-rt/lib/BlocksRuntime/data.c/AUTHORS.txt"
[02:34:34] <rveach> doesn't make sense since data.c is a file not directory...
[02:35:44] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:36:05] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:36:21] <FreeFull> Odd error, might be that something isn't being generated correctly
[02:37:18] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[02:37:57] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[02:38:18] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[02:38:26] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[02:38:44] <rveach> ya, my thoughts too, I just don't know much about reading makefiles
[02:39:28] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[02:39:47] *** Joins: blindrenderer (blindrende@991944C8.B22400E5.217C7FCC.IP)
[02:40:13] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[02:40:59] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[02:41:13] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Ping timeout)
[02:41:26] *** Joins: rveach|2 (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[02:41:34] *** Quits: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Ping timeout)
[02:41:44] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[02:41:57] *** Quits: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org) (Ping timeout)
[02:42:10] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:42:21] *** rveach|2 is now known as rveach
[02:43:36] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[02:43:52] *** Quits: oxum (anonymous@5B2B4DB0.BBE46712.520CDC98.IP) (Quit: ...)
[02:43:52] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:44:00] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[02:45:39] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[02:47:12] <zmike> anyone have any suggestions for this i/o error + backtrace: http://slexy.org/view/s20F2pZIci
[02:48:34] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[02:48:43] <aatch> zmike, it says that io is unavailable, that suggests a problem that needs more than just a backtrace to fix.
[02:48:59] *** Joins: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net)
[02:49:07] <zmike> it claims to be trying to open /dev/urandom
[02:49:46] <huon> you're using a hashmap outside the runtime
[02:50:24] <zmike> hm
[02:50:30] <huon> to do that you need ::new_with_keys, because ::new reads from the task RNG (which seeds itself from /dev/urandom) to generate random keys to be DoS resistant
[02:50:54] <zmike> well if I'm outside the runtime then it seems like I would run into other issues as well
[02:51:06] <huon> not that many
[02:51:22] <zmike> is there a way to detect whether I'm in the runtime?
[02:51:24] <huon> but yeah, e.g. `spawn` won't work
[02:51:29] <huon> not sure
[02:53:12] <zmike> seems a little confusing...can tasks break out of the runtime somehow?
[02:54:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:54:25] <huon> are you passing callbacks into C at all?
[02:54:57] <zmike> I don't think so
[02:55:49] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[02:55:51] *** Joins: twi (Adium@moz-C93256DF.cust.vodafonedsl.it)
[02:55:55] <bollu> default arguments in rust?
[02:56:06] *** Joins: twi1 (Adium@moz-C93256DF.cust.vodafonedsl.it)
[02:56:09] *** Quits: twi (Adium@moz-C93256DF.cust.vodafonedsl.it) (Connection reset by peer)
[02:56:20] <aatch> bollu, don't exist. Somewhat contentious.
[02:56:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:56:39] <bollu> okay. why the contention? parsing difficulty?
[02:56:47] <aatch> Also, (probably) not a backwards compatibility concern.
[02:57:09] <aatch> bollu, just whether or not it's worth it as a feature.
[02:57:13] <huon> https://github.com/mozilla/rust/issues/6973
[02:57:48] *** Quits: twi1 (Adium@moz-C93256DF.cust.vodafonedsl.it) (Ping timeout)
[02:57:57] <bollu> ty
[02:59:07] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[02:59:20] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:00:00] *** Joins: Igor (Mibbit@DB2DB471.ADDD0BC8.576FC204.IP)
[03:00:37] <bollu> can I overload functions?
[03:01:17] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[03:01:45] <Igor> Can I work on rust project?
[03:02:20] <pyon> bollu: In a principled way, using traits.
[03:02:42] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[03:02:46] <bollu> :)
[03:02:51] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[03:03:05] <bollu> pyon: man page?
[03:04:05] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[03:04:05] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[03:04:06] <pyon> bollu: http://static.rust-lang.org/doc/master/tutorial.html#traits
[03:04:18] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:05:01] *** Joins: pheleas_frog (Mibbit@moz-362CDC0.fttp.sta.comporium.net)
[03:05:11] <o11c> bollu: you can't overload functions, but you don't *need* to
[03:05:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:05:44] <o11c> bollu: if you *really* want to, you can put a standalone function that uses a trait bound and forwards to it
[03:06:47] *** Quits: Igor (Mibbit@DB2DB471.ADDD0BC8.576FC204.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:06:48] <pheleas_frog> Hello, I'm having a bit of trouble with timers
[03:06:54] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Quit: WeeChat 0.4.3-dev)
[03:07:28] *** Quits: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) (Quit: Leaving.)
[03:07:39] <pheleas_frog> I'm starting a task on the main thread and the task has a timer
[03:07:41] <bollu> o11c: nvm in that case
[03:07:43] <huon> o11c: no idea who this is, but https://twitter.com/unixrobot/status/440623819007737856 :P
[03:08:14] *** Joins: mib_twigd9 (Mibbit@1AC76789.A607747.FD383126.IP)
[03:08:15] <bollu> okay, another question: C++ typedef is rust's ____ ?
[03:08:34] <bollu> well, C not C++
[03:08:39] <pyon> bollu: type
[03:08:45] <pheleas_frog> The problem is that the task started with native::start never ends.
[03:08:54] <bollu> as in? 
[03:09:06] <o11c> huon: too bad I don't have twitter
[03:09:07] <pyon> bollu: type Foo = Bar;
[03:09:14] <bollu> ah. thanks!
[03:09:33] <pyon> bollu: You can even have generic type synonyms: type Foo<T> = Bar<int, T>;
[03:09:35] <huon> o11c: you can view it without an account.
[03:09:40] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Client exited)
[03:09:48] <bollu> would the effect be similar if I did the Enum trick? Typename(RealType)
[03:09:54] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[03:09:54] <pyon> bollu:  Unlike C++'s typedef. (Although C++11's using can introduce template type synonyms as well.)
[03:09:57] <bollu> well, not trick, but you get the diea :)
[03:09:59] <bollu> idea*
[03:10:05] <pyon> bollu: What enum trick?
[03:10:18] <pyon> bollu: Enums have a completely different use case.
[03:10:28] <bollu> Enum myCustomTypes { intWrapper(int), floatWrapper(f32)...}
[03:10:36] <bollu> can I do the intWrapper(int) thing?
[03:10:53] <bollu> stupid question >_<;
[03:11:01] <pyon> bollu: intWrapper and floatWrapper are themselves not types.
[03:11:23] <bollu> but because you wrap them in an Enum you can use them that way yes?
[03:11:30] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[03:11:39] <bollu> so can I not have a "single" Enum ?
[03:11:44] <pyon> bollu: Ah, sure.
[03:11:49] <tiffany> you might be wanting single-value structs: struct intWrapper(int);
[03:12:12] <bollu> tiffany: I was just exploring possibilites :) but thanks
[03:12:18] <bollu> so, what's the use case?
[03:12:21] <o11c> huon: sure, but I'd reply with one word swapped
[03:12:28] <bollu> for Type v/s single-valued struct?
[03:13:07] <pyon> bollu: A type synonym does not introduce a different type.
[03:13:12] <pyon> bollu: It is simply a name for the same type.
[03:13:19] <tiffany> a type synonym is like a typedef or a #define
[03:13:20] *** Quits: mib_twigd9 (Mibbit@1AC76789.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:13:30] <tiffany> one-value structs and enums are different
[03:13:31] <pyon> bollu: A single-valued, on the other hand, is an actual new type.
[03:13:40] <pyon> single-valued struct*
[03:13:41] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:14:03] <tiffany> if you were to do typedef int *foo; and then pass a foo to a function expecting an int*, it'll implicitly convert
[03:14:07] <bollu> pyon: so I can cast freely between a typedef? (like C++) ?
[03:14:16] <tiffany> that's how it is with type synonyms, but not how it's like with single-value structs
[03:14:23] <pyon> bollu: It is not even a cast.
[03:14:30] <bollu> tiffany: but rust is a little stricter :)
[03:14:40] <bollu> pyon: so it's just an alias?
[03:14:45] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[03:14:55] <pyon> bollu: A typedef does not introduce a new type. You cast between types, not between type names, so if two type names refer to the same type, you do not need to cast between them.
[03:15:12] <bollu> pyon: yeah, so it's aliasing the previous type yes? 
[03:15:20] <lenary> hey guys, using rust 0.9, has select! gone?
[03:15:45] <lenary> (from the 0.9 docs for std::comm say it's there, but i'm getting an odd error)
[03:15:58] *** Quits: claudiu (claudiu@moz-7D1F0258.thefacebook.com) (Input/output error)
[03:16:08] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[03:16:13] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[03:16:15] <pyon> bollu: "type" introduces a type synonym, or alias if you will.
[03:16:26] <lenary> oh, i can't see the right kind of parens/brackets
[03:16:27] <lenary> sorry
[03:17:01] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:17:03] <bollu> and single-valued structs introduce a /new/ type. 
[03:17:11] <bollu> I think I understood the difference. Thanks :)
[03:17:16] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[03:18:20] <lenary> oh, the macro *has* gone
[03:18:23] <lenary> sadface
[03:19:32] <pheleas_frog> Hello
[03:19:40] <bollu> hey
[03:19:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:19:52] <pheleas_frog> So I'm having some troubles with timers
[03:20:04] <pheleas_frog> I have this very simple program http://mibpaste.com/Vttccd
[03:20:12] *** Joins: oxum (anonymous@FB7D6AA5.C071283D.520CDC98.IP)
[03:20:23] <bollu> does rust have variadic templates? 
[03:20:26] <o11c> is there a way, int rust tests, to make the test fail but keep running the task? Or do I have to record the bool for myself to check later?
[03:20:26] <bollu> I saw this : https://github.com/mozilla/rust/issues/10124
[03:20:40] <bollu> so I'm assuming not yet
[03:20:47] <pheleas_frog> But the problem is that if I start the task with native:: start the task never ends
[03:21:05] *** Joins: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net)
[03:21:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:21:40] <Valloric> examples in the std::io module us a bytes!() macro, but I'm having difficulty finding it in the docs
[03:21:48] <Valloric> use*
[03:22:09] <o11c> Valloric: yes, macros don't like to be documented
[03:22:25] <Valloric> o11c: what does that mean :)
[03:22:33] <pheleas_frog> http://pastebin.com/LWf43f1P
[03:23:40] <huon> some macros are documented: http://static.rust-lang.org/doc/master/std/macros/index.html
[03:24:07] <huon> others are not, because they are built into the compiler (some of those are listed here: http://static.rust-lang.org/doc/master/rust.html )
[03:24:26] <huon> in any case, you can see what a macro expands to via `--pretty expanded` on a small source file
[03:24:40] <sfackler> Valloric: bytes! takes a comma separated list of numbers and strings and turns it into a [u8]
[03:24:57] <sfackler> e.g. bytes!("hello, ", "world");
[03:25:09] <huon> rusti: bytes!("foo", 0x10, "bar")
[03:25:10] -rusti- &[102u8, 111u8, 111u8, 16u8, 98u8, 97u8, 114u8]
[03:25:11] <Valloric> sfackler: thanks, it's just what I was looking for
[03:25:16] <bollu> sfackler: does the ! represent that it's a macro? what's the convention?
[03:25:21] <Valloric> huon: thanks as well
[03:25:27] <huon> bollu: it's the syntax for calling a macro
[03:25:28] *** Joins: derek_c (derek@moz-DA4FB9D2.cit.cornell.edu)
[03:25:29] <dougxxx> bollu: yep
[03:25:32] <bollu> ah. ty
[03:25:33] *** Quits: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[03:25:34] <huon> i.e. it's compulsory
[03:26:17] <Valloric> huon: btw, neither of the pages you linked to mention the bytes! macro :)
[03:26:41] <o11c> is there an equivalent of println! for stderr ?
[03:26:52] <huon> Valloric: yes, that is correct
[03:27:05] <huon> (i was just addressing o11c's general point about macros & documentation)
[03:27:05] <Valloric> huon: Rust's a work in progress, I know...
[03:27:25] <Valloric> I'll file a bug for this so it doesn't get lost
[03:27:27] <huon> o11c: other than writeln!(...) or error!(...), no
[03:27:57] <o11c> hm, I wonder how hard it would be to write one ...
[03:28:02] <huon> https://github.com/mozilla/rust/issues/5605
[03:28:07] <Valloric> ha, found #7102
[03:28:11] <huon> o11c: very easy
[03:28:18] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[03:28:27] <huon> Valloric: oh, even better
[03:28:53] <huon> also, https://github.com/mozilla/rust/issues/6444
[03:29:13] <dougxxx> o11c: it's easy. Have a look at https://github.com/mozilla/rust/blob/master/src/libstd/macros.rs
[03:30:03] <dougxxx> 011c: Just don't forget to use macro_escape in your module, eg. https://gist.github.com/shadowmint/9339796
[03:30:14] <huon> a variation of https://github.com/mozilla/rust/blob/master/src/libstd/macros.rs#L305-L313 but using `std::io::stderr` instead of taking the `$dst` parameter
[03:30:15] *** Quits: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Connection reset by peer)
[03:30:21] *** Joins: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[03:30:51] *** Joins: rveach|2 (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[03:30:51] *** Quits: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Connection reset by peer)
[03:32:16] <o11c> would've expected println to be implemented in terms of writeln ...
[03:33:07] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[03:33:28] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[03:33:38] <bollu> Question: why does file::open_mode refer to std::path::posix::Path? (what about Windows?)
[03:34:40] <sfackler> bollu: it uses windows if you compile on windows
[03:35:30] <bollu> Thanks! that makes so much sense.
[03:36:03] *** Quits: pheleas_frog (Mibbit@moz-362CDC0.fttp.sta.comporium.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:36:13] <bollu> so, the official docs (http://static.rust-lang.org/doc/0.9/std/io/fs/struct.File.html) are compiled on a unix box?
[03:36:21] <bollu> are generated*
[03:36:45] *** Quits: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) (Quit: Leaving.)
[03:36:57] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[03:36:59] <huon> yes
[03:37:54] <huon> o11c: println! is commonly used, so it reduces code size to have a single instance of that functionality, rather than duplicating it for every call
[03:38:16] <huon> (LLVM will likely optimise the duplication away, but there's no need for us to throw more code at it.)
[03:38:22] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[03:39:21] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[03:39:39] <bollu> if I invoke an operation on an Option type, what happens?
[03:39:43] <bollu> internally?
[03:39:52] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:40:17] <huon> depends what the operation does
[03:41:02] <dougxxx> ? You can't invoke a function using Option<T> as though it was a T right? You've got to unwrap it.
[03:41:10] <bollu> I think you can
[03:41:21] <bollu> let contents = File::open(&Path::new("foo.txt")).read_to_end();
[03:41:28] <bollu> File::open returns an Option
[03:42:37] <huon> that's because there was an `impl<R: Reader> Reader for Option<R>` in 0.9
[03:42:38] <huon> http://static.rust-lang.org/doc/0.9/std/option/enum.Option.html#method.read
[03:43:02] <rgomes> hello. I hope my question is not toooo off topic. Anyway, here it is:  I'm evaluating alternatives for Javascript on the browser. Long story short, I found Dart http://dartlang.org , which is (optionally) type checked and has several interesting features like interfaces, mixins and reified generics, among others. There's a version of Chromiun which has an embedded Dart VM in it, but you can also generate javascript from Dart and run your stuff 
[03:43:04] <rgomes> in any browser. OK. finally the question: Would Rust be an alternative for this workflow? Would it be possible to write Rust code, convert to Javascript and run on the browser?  Any other ideas?
[03:43:05] <dougxxx> This magic is the thing I don't like about Option.
[03:43:23] <dougxxx> mystiously treats Option<T> as T in some cases.
[03:43:25] <dougxxx> *head shake*
[03:43:38] <bollu> that's awesome in my opinion :)
[03:43:40] <sfackler> dougxxx: agreed
[03:43:50] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[03:43:51] <dougxxx> only awesome if it always works
[03:43:55] <huon> https://github.com/mozilla/rust/blob/0.9/src/libstd/io/option.rs
[03:43:56] <dougxxx> not if it works *sometimes*
[03:44:00] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[03:44:02] <sfackler> it was a kind of weird hack because working with condition-based io was a mess otherwise
[03:44:09] <huon> that impl is removed in master
[03:44:12] <dougxxx> yep, I get it, just saying~
[03:44:37] <bollu> question: how come there's no File::exists or something?
[03:44:55] <huon> rgomes: we use LLVM as a backend, so one could use emscripten to compile Rust code to JS
[03:45:27] <huon> bollu: it's a method on Path
[03:45:31] <dougxxx> similar caveats as using emscripten for anything else I imagine. Good for data processing; bad for io.
[03:45:32] <Valloric> rgomes: if you're targeting the browser, Dart would be a better option
[03:45:38] <bollu> ty
[03:46:13] <rgomes> huon, Valloric: I'm trying to reduce the number of languages to be learned. I would prefer to stick with Rust (only!) at this point.
[03:46:21] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[03:46:43] <Valloric> rgomes: Rust is great for compiled, native programs
[03:47:05] <Valloric> rgomes: Dart targets the browser and also has a nice VM you can run on the server
[03:47:30] <Valloric> rgomes: but is not as fast as Rust and it's not a systems language (you have to use a GC etc)
[03:47:59] <Valloric> rgomes: also, Dart is production-ready, while Rust is still not 1.0
[03:48:00] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[03:48:24] <huon> rgomes: using Rust in the browser is not feasible in the immediate future, so I would not recommend relying on it
[03:48:28] <Valloric> rgomes: you are comparing apples and oranges here though; both Rust and Dart are excellent for their target markets
[03:49:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:49:08] <Valloric> rgomes: but they _are_ different markets, and it sounds you are targeting the browser mostly, so Dart should serve you well here
[03:49:13] <rgomes> Valloric: I'm not intending to write too much code. It's basically only some niceties on the client side. But starting from scratch is always a big deal.
[03:49:28] <cmr> the DOM is basically inexpressible in good rust code.
[03:49:57] <Valloric> rgomes: stick with Dart; trying to run Rust in the browser will be difficult, while Dart makes it trivial
[03:50:13] <dougxxx> rgomes; I know its a bit trite to say; but if you're only writing a bit of javascript, just use javascript.
[03:50:20] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:50:23] <bollu> cmr: I don't think that's true. Xerces is a great general-purpose XML parser in C++. IMHO, rust should make it /easier/
[03:50:25] <Valloric> dougxxx: true that
[03:50:26] <dougxxx> If you're not writing an mega-app, its not worth using a mega framework.
[03:50:26] <rgomes> Valloric: the reason for my question is due to Servo... so I have the impression that Firefox would someday support Rust natively or a VM which understands Rust or something. But I guess it's still something too incipient.
[03:50:26] <cmr> most features rust depends on, being a low-level native-targeting language, ..... not available in the browser.
[03:50:35] <cmr> bollu: what does XML parsing have to do with it?
[03:50:45] *** Joins: stevegury (stevegury@moz-171801E.hsd1.ca.comcast.net)
[03:51:02] <bollu> cmr: If you can parse and construct a DOM tree, what's the problem?
[03:51:03] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[03:51:07] <Valloric> rgomes: I'd find it unlikely that Firefox (or any browser) will ever run Rust client-side; it's just not designed as a web language
[03:51:18] <cmr> bollu: XML "DOM" != the DOM the Web uses.
[03:51:28] <cmr> C++ is much more powerful than rust.
[03:51:29] <Valloric> (nor should it be)
[03:51:33] <cmr> I don't think rust would make it any easier.
[03:51:35] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[03:51:49] <bollu> cmr: wait, what? what's the difference?
[03:51:51] <rgomes> dougxxx: I have javascript. Life is short.
[03:52:04] <Valloric> s/have/hate?
[03:52:13] <dougxxx> rgnomes: haha~ that's a fair call. :)
[03:52:17] <cmr> bollu: XML is a simple tree, the web has tons and tons and tons and tons of other, weird things.
[03:52:26] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[03:52:34] <rgomes> Valloric: OK. Message received. I will go ahead with Dart, then.
[03:52:34] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[03:52:39] <bollu> cmr: like what? the global window object and.., ?
[03:52:42] <o11c> huon: I'm getting this from the macro: warning: unused result which must be used, #[warn(unused_must_use)] on by default
[03:52:57] <rgomes> Valloric, huon, dougxxx: Thanks a lot for your help! :)
[03:52:58] <cmr> take, for example, the fact that certain views are of "live" objects, and others not.
[03:52:58] <o11c> I can't figure out where in the macro to put #[allow(wmu)]
[03:53:14] <cmr> Kepping in mind that you get events and everything else.
[03:53:40] <cmr> I mean it's certainly possible.
[03:53:40] <bollu> cmr: yeah, I see your point. thanks!
[03:53:42] <cmr> servo does it.
[03:53:47] <rgomes> Valloric, dougxxx: yes... s/have/hate/ .... I have JS. And life is short! hahaha
[03:53:49] <cmr> but it's not good rust.
[03:53:52] <cmr> it's generated from webidl :p
[03:53:59] <bollu> xD
[03:54:16] <bollu> Valloric: of YouCompleteMe fame? :D
[03:54:16] * cmr thinks the web is icky.
[03:54:22] <dougxxx> cmr: interesting idea though, I'm vaguely tempted to write a rust-c-v8 bridge just to see what's involved. 
[03:54:28] <Valloric> bollu: one and only!
[03:54:37] <Valloric> :)
[03:54:40] <bollu> thanks for the brilliant plugin :)
[03:54:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:54:49] <o11c> cmr: I do think that sometime in the next couple centuries a better alternative to the web will evolve
[03:54:56] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[03:54:59] <Valloric> bollu: glad you like it!
[03:55:03] *** Joins: dranov (dranov@7D983409.94264913.FB866788.IP)
[03:55:14] <bollu> o11c: people have been saying the same thing about TCP/IP ;)
[03:55:47] <Ralith> bollu: it's called SCTP/IP6
[03:55:48] <Ralith> :p
[03:55:58] <o11c> bollu: and we have SCTP/ ... 
[03:56:04] * Ralith high fives o11c 
[03:56:09] <o11c> (wow my fingers fumbled there)
[03:56:23] <bollu> :) point taken
[03:56:28] <cmr> o11c: I hope so :(
[03:56:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:56:36] *** Joins: twi (Adium@moz-C93256DF.cust.vodafonedsl.it)
[03:56:40] <Ralith> well at least we're on our way to having sctp
[03:56:43] * Ralith eyes microsoft resentfully
[03:56:47] <cmr> dougxxx: go for it!
[03:56:57] <cmr> does OS X ship sctp?
[03:56:58] <huon> o11c: `let _ = ....;` to silence the warning without an attribute
[03:57:00] *** Quits: pepper_chico (pepper_chi@moz-220E6D6D.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[03:57:07] <o11c> I was going to write a transparent UDP tunnel for SCTP, but then I discovered that the DDoS-protected network I was planning on using blocks all UDP anyway
[03:57:39] *** Quits: kimundi (kimundi@moz-C46B8065.dip0.t-ipconnect.de) (Ping timeout)
[03:57:51] <Ralith> cmr: I guess not...
[03:58:01] <bollu> Question: if I have Option<T>, can I extract Some<T> without pattern matching?
[03:58:03] <Ralith> there are a couple userspace sctp impls in the world but they are uniformly terrible
[03:58:16] *** Quits: twi (Adium@moz-C93256DF.cust.vodafonedsl.it) (Ping timeout)
[03:59:03] <o11c> huon: I can't even tell which value it's complaining about ...
[03:59:31] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[03:59:49] <huon> o11c: code?
[04:00:04] <hoverbear> bollu: Try .unwrap() on the option.
[04:00:10] <cmr> dougxxx: also interesting would be rust on emscripten.
[04:00:14] <huon> (almost certainly the return value of whichever std::fmt function you're calling)
[04:00:27] <cmr> dougxxx: I've gotten hello worlds to compile, but getting an emscripten runtime is going to be... not fun.
[04:00:28] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[04:00:29] <hoverbear> bollu: Also .expect("Some error message") is available if you want it to error if it fails.
[04:00:45] <o11c> nevermind, managed to suppress it: let _ = writeln!(dst, $($arg)*);
[04:00:46] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:00:47] <cmr> we also emit some IR that emscripten's backend really doesn't like.
[04:00:53] <bollu> thanks hoverbear
[04:00:56] <dougxxx> cmr: yeah. I bet you could though, using c++ -> invokes rust
[04:00:57] <huon> o11c: ah, yup
[04:01:15] *** Joins: kimundi (kimundi@moz-82D1D1B3.dip0.t-ipconnect.de)
[04:01:25] <o11c> strange how *normal* calls to the ... wait, I've never tried writeln before, only println ...
[04:01:26] <dougxxx> (ie. the existing C++ interop as a bootstrap)
[04:01:38] <cmr> dougxxx: nah, just use rust ffi :P
[04:02:05] <dougxxx> oh yeah~ good point. 
[04:02:12] <hoverbear> bollu: Example usage: https://gist.github.com/anonymous/9340059#file-net-rs-L37
[04:02:25] <bollu> ah. ty
[04:02:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:02:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:04:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:04:40] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[04:05:28] *** kimundi is now known as zz_kimundi
[04:05:33] <bollu> how do I access std::logging::debug ?
[04:06:37] <cmr> bollu: see docs: http://static.rust-lang.org/doc/master/std/logging/index.html
[04:06:39] <huon> std::logging::DEBUG
[04:06:42] <huon> ?
[04:07:09] <bollu> yeah, I was on the page. how do I access the debug! macro?
[04:07:13] *** Joins: mrallen1 (mallen@moz-C58DC039.lightspeed.hstntx.sbcglobal.net)
[04:07:27] <huon> oh; it's in scope by default
[04:07:49] <bollu> thanks
[04:07:52] <huon> rusti: debug!("printed with the appropriate RUST_LOG")
[04:07:52] -rusti- ()
[04:08:00] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[04:08:16] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[04:08:24] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[04:08:43] <Yurume> rusti: use std::os::setenv; setenv("RUST_LOG", "4"); debug!("will this work?")
[04:08:44] -rusti- ()
[04:08:57] <Yurume> (apparantly RUST_LOG is read by `start`...)
[04:09:49] <cmr> yeah see std::rt::env
[04:12:11] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:12:19] <bollu> I should have a setenv call for each module?
[04:12:27] <cmr> no not at all.
[04:12:33] *** zz_kimundi is now known as kimundi
[04:12:37] <cmr> don't do anything besides just calling debug!() :)
[04:12:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:12:49] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:13:15] <bollu> okay :)
[04:13:41] <bollu> it's not logging? >_<
[04:13:47] <bollu> does it write to stdout ?
[04:13:52] <bollu> or someplace else?
[04:13:55] <cmr> run your program with RUST_LOG=debug
[04:14:51] <cmr> the default log level is error.
[04:15:11] <bollu> thanks
[04:15:29] <bollu> yep, thanks
[04:15:34] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[04:15:59] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[04:16:21] <bollu> but.. why is it an environment variable?
[04:16:26] <cmr> what else would it be?
[04:16:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:16:32] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[04:16:49] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:17:04] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[04:17:06] <bollu> a global variable?
[04:17:15] <cmr> how do you set it at runtime?
[04:17:31] <cmr> logging is supposed to be unintrusive and not require code changes.
[04:17:44] <cmr> additionally, you can enable logging  per-module.
[04:17:47] <cmr> not just globally.
[04:18:02] <Yurume> bollu: what OS are you using? setting environment vars varys for platform and shells.
[04:18:10] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:18:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:18:37] *** Quits: Rym (WUT@AC250667.5D2765E2.51C6DE68.IP) (Ping timeout)
[04:18:58] *** Joins: Rym (WUT@AC250667.5D2765E2.51C6DE68.IP)
[04:19:08] <bollu> Yurume: archlinux right now. @cmr: good point I guess? :)
[04:19:23] <Yurume> bollu: then `RUST_LOG=debug ./your_program` will work.
[04:19:42] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[04:19:43] <bollu> yeah I got it working. I was questioning the choice of an environment variable
[04:19:59] <Yurume> choice?
[04:20:29] <bollu> why not a global variable rather than an environment variable
[04:21:00] <Yurume> if it is a global variable you cannot modify it without recompiling
[04:21:14] <bollu> yeah, cmr said that :)
[04:21:20] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Client exited)
[04:21:26] <Yurume> ah, right...
[04:21:57] <Valloric> is there any specific reason why std::iter::Map doesn't implement Clone?
[04:22:17] <cmr> Valloric: closures non-clonable iirc.
[04:22:29] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[04:22:31] *** Quits: dranov (dranov@7D983409.94264913.FB866788.IP) (Ping timeout)
[04:22:38] <Valloric> that makes sense
[04:22:55] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[04:24:04] <Valloric> but it's super annoying that chars() on &str returns a clonable iterator while bytes() doesn't
[04:24:26] <cmr> oh jeez, that is annoying.
[04:24:34] <Valloric> isn't it? ;)
[04:25:32] <Valloric> I'm just porting some code to use ~[u8] instead of ~str because of binary data parsing and deep down in the call chain, I can't clone the iterator
[04:25:48] <Valloric> \me grumbles
[04:25:57] <Valloric> every freaking time...
[04:26:02] <hoverbear> rusti: let [foo, bar] = ["Foo", "Bar"]
[04:26:02] * Valloric grumbles
[04:26:02] -rusti- <anon>:11:5: 11:6 error: expected `;` but found `}`
[04:26:02] -rusti- <anon>:11     };
[04:26:02] -rusti-               ^
[04:26:02] -rusti- application terminated with error code 101
[04:26:43] <huon> https://github.com/mozilla/rust/issues/7784
[04:27:29] <huon> hoverbear: ^
[04:27:40] <huon> rusti: let [foo, bar] = ["Foo", "Bar"];
[04:27:40] -rusti- <anon>:10:13: 10:23 error: refutable pattern in local binding
[04:27:41] -rusti- <anon>:10         let [foo, bar] = ["Foo", "Bar"];
[04:27:41] -rusti-                       ^~~~~~~~~~
[04:27:41] -rusti- error: aborting due to previous error
[04:27:41] -rusti- application terminated with error code 101
[04:28:01] <huon> rusti: match ["Foo", "Bar"] { [foo, bar] => { foo + bar } }
[04:28:02] -rusti- ~"FooBar"
[04:28:46] <bollu> help? https://gist.github.com/66bfa31ab89bfac0cda0
[04:28:56] <bollu> I'm not able to create an empty HashMap
[04:29:38] <huon> bollu: let keyValues = HashMap::<...>::new()
[04:29:40] <sfackler> bollu:  HashMap::<key, Setting>::new();
[04:29:47] <aatch> You shouldn't even need those
[04:29:55] <huon> or just `HashMap::new()` without the type hint
[04:30:00] <aatch> it'll infer
[04:30:23] <pyon> rusti: let hm = HashMap::new(); hm.swap(1, 1)
[04:30:24] -rusti- pastebinned 11 lines of output: http://sprunge.us/IPPZ
[04:31:19] *** Joins: siavashserver (siavash@7DED44E.13DE08ED.82A25C10.IP)
[04:31:24] <pyon> Errr, the containers crate is not used by default by rusti?
[04:31:40] <aatch> rusti: let hm = hashmap::HashMap::new(); hm.insert(~"test", 1u); hm
[04:31:41] -rusti- pastebinned 11 lines of output: http://sprunge.us/VEXF
[04:31:43] <cmr> pyon: well rusti is using a rust version that didn't have containers.
[04:31:48] <cmr> but it's in std::hashmap
[04:31:53] <cmr> HashMap was never in scope by default...
[04:31:53] <pyon> Oh.
[04:31:54] <huon> rusti: version
[04:31:55] -rusti- "rustc 0.10-pre (fbe26af 2014-03-02 17:36:28 -0800)"
[04:31:55] <aatch> rusti: let hm = std::hashmap::HashMap::new(); hm.insert(~"test", 1u); hm
[04:31:56] -rusti- pastebinned 11 lines of output: http://sprunge.us/CGHY
[04:31:56] <bollu> huon: that's impressive
[04:31:58] <huon> cmr: no it's not
[04:32:05] <cmr> was it upgraded/?
[04:32:07] <cmr> rusti: version
[04:32:08] -rusti- "rustc 0.10-pre (fbe26af 2014-03-02 17:36:28 -0800)"
[04:32:12] <cmr> sweeeet
[04:32:13] <huon> yup; <3 libnative
[04:32:14] <cmr> yay libnative.
[04:32:33] <aatch> rusti: extern crate collections; use collections::hashmap; let hm = hashmap::HashMap::new(); hm.insert(~"test", 1u); hm
[04:32:34] -rusti- <anon>:10:9: 10:34 error: "extern crate" declarations are not allowed here
[04:32:34] -rusti- <anon>:10         extern crate collections; use collections::hashmap; let hm = hashmap::HashMap::new(); hm.insert(~"test", 1u); hm
[04:32:34] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~
[04:32:34] -rusti- error: aborting due to previous error
[04:32:34] -rusti- application terminated with error code 101
[04:32:39] <aatch> Oh right...
[04:32:48] <aatch> rusti: use collections::hashmap; let hm = hashmap::HashMap::new(); hm.insert(~"test", 1u); hm
[04:32:48] -rusti- pastebinned 8 lines of output: http://sprunge.us/LUNW
[04:32:57] <aatch> bah, I give up
[04:33:00] <bollu> xD
[04:33:28] <bollu> question: how does it infer? -_^ does it look ahead to where I use it and then stick types to it?
[04:33:42] <cmr> bollu: essentialy, yes.
[04:33:48] <cmr> it uses https://en.wikipedia.org/wiki/Hindley-Milner, specifically.
[04:34:17] <bollu> thanks
[04:35:01] <bollu> I've always wanted to learn semantics 
[04:35:22] <siavashserver> Hi
[04:35:25] <bollu> hey
[04:35:33] *** Quits: stevegury (stevegury@moz-171801E.hsd1.ca.comcast.net) (Quit: stevegury)
[04:36:31] <aatch> Hindley-Milner: for each variable, collect all the bounds for that variable based on usage. At the end, look up all the types that match those bounds. If you have 0 types, you have a contradiction, multiple types, ambiguity and 1 type is the answer.
[04:36:39] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Ping timeout)
[04:37:35] <bollu> aatch: thanks for the explaination :)
[04:37:51] <pyon> aatch: Not exactly "ambiguity", just a type that contains type variables.
[04:38:51] <aatch> pyon, I guess. The point is that it's not a specific type.
[04:39:56] <bollu>  
[04:40:33] *** Quits: oxum (anonymous@FB7D6AA5.C071283D.520CDC98.IP) (Quit: Bye..)
[04:40:56] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[04:40:58] *** Joins: oxum (anonymous@FB7D6AA5.C071283D.520CDC98.IP)
[04:41:21] *** Quits: siavashserver (siavash@7DED44E.13DE08ED.82A25C10.IP) (Quit: Konversation terminated!)
[04:41:33] *** Joins: capt_redbeard (Adium@moz-4998C3D0.ok.ok.cox.net)
[04:42:10] <capt_redbeard> What is the easiest way to cast numbers between its different variants? Such as int to f32?
[04:42:38] <cmr> rusti: let x: int = 42; let y = x as f32; y
[04:42:40] -rusti- 42f32
[04:42:41] <Yurume> as f32.
[04:42:54] <capt_redbeard> I see, thank you!
[04:45:55] *** Joins: stevegury (stevegury@moz-171801E.hsd1.ca.comcast.net)
[04:46:03] *** Quits: rveach|2 (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Ping timeout)
[04:47:05] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[04:47:49] <bollu> rusti: let a = "this better be good".split(' ').collect();
[04:47:50] -rusti- <anon>:10:17: 10:59 error: cannot determine a type for this bounded type parameter: unconstrained type
[04:47:50] -rusti- <anon>:10         let a = "this better be good".split(' ').collect();
[04:47:50] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[04:47:50] -rusti- application terminated with error code 101
[04:47:58] <bollu> why not?
[04:48:42] <huon> rusti: let a: ~[&str] = "this better be good".split(' ').collect(); println!("{}", a);
[04:48:43] -rusti- [this, better, be, good]
[04:48:43] -rusti- ()
[04:48:44] <sfackler> bollu: what type is a?
[04:49:17] <huon> rusti: mod foo { extern crate collections; pub fn f() { let a: collections::HashSet<&str> = "this better be good".split(' ').collect(); println!("{}", a); } } foo::f()
[04:49:19] -rusti- {this, be, better, good}
[04:49:19] -rusti- ()
[04:49:23] <bollu> huon: yep, I got it to work by explicitly defining the type
[04:49:30] <bollu> but I was wondering why it didn't infer
[04:49:31] <huon> rusti: mod foo { extern crate collections; pub fn f() { let a: collections::TreeSet<&str> = "this better be good".split(' ').collect(); println!("{}", a); } } foo::f()
[04:49:32] -rusti- pastebinned 8 lines of output: http://sprunge.us/HWDi
[04:49:35] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[04:49:44] <huon> bollu: because it can't
[04:49:59] <huon> because there are multiple different types that satisfy the return value of .collect()
[04:50:01] <huon> (it's a generic)
[04:50:16] <o11c> generic return type inference is weird
[04:50:28] <bollu> any example of another signature that would match?
[04:50:37] <bollu> I'm curious :]
[04:51:00] <huon> rusti: mod foo { extern crate collections; pub fn f() { let a: collections::PriorityQueue<&str> = "this better be good".split(' ').collect(); println!("{}", a); } } foo::f()
[04:51:01] -rusti- pastebinned 8 lines of output: http://sprunge.us/diUZ
[04:51:11] <huon> rusti: mod foo { extern crate collections; pub fn f() { let a: collections::PriorityQueue<&str> = "this better be good".split(' ').collect(); println!("{}", a.to_vec()); } } foo::f()
[04:51:12] -rusti- [this, good, be, better]
[04:51:12] -rusti- ()
[04:51:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:51:49] <sfackler> or collections::HashSet, or collections::TreeSet, or...
[04:52:00] <bollu> ah, okay. thanks!
[04:52:04] <huon> any thing that implements http://static.rust-lang.org/doc/master/std/iter/trait.FromIterator.html
[04:52:33] <huon> (where &str can satisfy 'A')
[04:52:44] <bollu> how does -> Self make sense? It returns "Self" ?
[04:53:05] <huon> Self is the type on the RHS of `impl Trait for ... { ... }`
[04:53:42] <bollu> ah, thanks
[04:54:01] <aatch> you can't call a method like that on a trait object, by the way
[04:54:08] <hoverbear> What's a nice way to destructure out an array into varaiables? (Say like setting flags based on os::args() )
[04:54:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:54:56] <bollu> how do I iterate over a &mut ~[&str] ?
[04:55:15] <aatch> bollu, call `.iter()`?
[04:55:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:55:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:55:47] <hoverbear> rusti: for x in [1,2,3].iter() { println!("{:?}", x) }
[04:55:48] -rusti- &1
[04:55:48] -rusti- &2
[04:55:48] -rusti- &3
[04:55:48] -rusti- ()
[04:55:53] <hoverbear> bollu ^
[04:55:54] <bollu> aatch: kinda worked
[04:55:56] <bollu> failed to find an implementation of trait std::fmt::Show for &&str
[04:56:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:56:28] <aatch> bollu, because .iter() gives you &T
[04:56:33] <aatch> and T is &str
[04:56:52] <aatch> you can use `&x` in the pattern though
[04:57:14] <bollu> that worked, thanks!
[04:57:21] *** Joins: twi (Adium@moz-C93256DF.cust.vodafonedsl.it)
[04:57:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:57:29] <bollu> so I'm telling it that... I want it to return &str?
[04:57:30] <bollu> or?
[04:57:59] *** Joins: twi1 (Adium@moz-C93256DF.cust.vodafonedsl.it)
[04:58:19] *** Quits: twi (Adium@moz-C93256DF.cust.vodafonedsl.it) (Connection reset by peer)
[04:58:29] <aatch> it's a pattern that destructures a reference, so &x matches &T and binds the T to x
[04:58:38] <sfackler> bollu: it's a pattern. the values coming out of the iterator ahve type &&str, so you're saying you want "s" to be the "&str" part of that
[04:58:38] <aatch> essentially a deference in a pattern.
[04:58:41] <sfackler> roughly
[04:59:41] *** Quits: twi1 (Adium@moz-C93256DF.cust.vodafonedsl.it) (Ping timeout)
[05:01:13] <bollu> thanks. 
[05:01:32] <bollu> T -> &&str, so &T -> &str
[05:01:44] <bollu> if I'm getting it right?
[05:02:00] <bollu> since &(T) -> &(&str) -> &&str
[05:02:13] *** Quits: heftig (heftig@moz-61DF4D47.dip0.t-ipconnect.de) (Ping timeout)
[05:02:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:02:58] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[05:05:17] *** Joins: ziad (ziad@moz-C0318336.hsd1.ca.comcast.net)
[05:05:24] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[05:06:50] <huon> yes (although I don't think writing &&str is actually legal, due to some parser errors)
[05:07:01] <huon> rusti: let _: &&str;
[05:07:02] -rusti- <anon>:10:16: 10:18 error: expected type, found token ANDAND
[05:07:02] -rusti- <anon>:10         let _: &&str;
[05:07:02] -rusti-                          ^~
[05:07:02] -rusti- application terminated with error code 101
[05:09:21] *** Parts: mrallen1 (mallen@moz-C58DC039.lightspeed.hstntx.sbcglobal.net) ()
[05:09:25] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:11:20] <o11c> ugh
[05:11:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:11:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:12:10] <o11c> there's no way to store a Pod string (by value/without allocation), is there ...
[05:12:25] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:12:25] <o11c> maybe impl something for [u8, ..N]
[05:12:37] *** Quits: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) (Quit: Leaving.)
[05:13:06] <hoverbear> Hmmm.... How can I send ICMP packets with Rust? I only see TCP and UDP.
[05:13:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:13:39] <bollu> last question before I'm off to study - how do I index a string to return a char, not a u8?
[05:14:19] <o11c> bollu: that doesn't, in general make sense - you probably want to iterate instead
[05:14:45] <bollu> I want to check if the first character of a string is 'i', 'f', 'b'...
[05:14:49] *** Joins: heftig (heftig@moz-B4B4AC28.dip0.t-ipconnect.de)
[05:14:54] <bollu> I'm writing a simple config file parser
[05:15:02] <bollu> and I'd like to annotate types with the first letter
[05:15:05] <bollu> so, how? :)
[05:16:00] <Yurume> bollu: http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.slice_shift_char
[05:16:09] <Yurume> or, char_at(0) will work
[05:16:22] <bollu> thanks!
[05:16:25] <o11c> bollu: startswith ?
[05:16:33] <Yurume> rusti: "아야".char_at(0)
[05:16:34] -rusti- '\uc544'
[05:16:52] *** Quits: isaacd (quassel@moz-6902374D.dhcp.oxfr.ma.charter.com) (Ping timeout)
[05:16:53] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[05:16:58] <Yurume> o11c: cannot be used with match, unfortunately
[05:17:01] <bollu> rusti: "bFullscreen".char_at(0)
[05:17:01] -rusti- 'b'
[05:17:04] <o11c> "아야".char_at(1)
[05:17:04] <bollu> thanks
[05:17:05] <bollu> :)
[05:17:12] <o11c> rusti: "아야".char_at(1)
[05:17:13] -rusti- task '<main>' failed at 'assertion failed: (w != 0)', /build/rust-git/src/rust/src/libstd/str.rs:2656
[05:17:13] -rusti- application terminated with error code 101
[05:17:23] *** Quits: thesnowdog (doug@8BC5A90F.CDB23781.6F17036B.IP) (Connection reset by peer)
[05:17:24] <Yurume> bad failure message :)
[05:17:37] <bollu> can someone remind me how to typecast again? >_M
[05:17:51] <Yurume> rusti: let a: u32 = 32; a as uint
[05:17:52] -rusti- 32u
[05:17:57] <bollu> string to int?
[05:18:17] <Yurume> rusti: from_str::<uint>("42")
[05:18:18] -rusti- Some(42u)
[05:18:21] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[05:19:26] <bollu> thank you!
[05:19:37] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[05:19:41] <dougxxx> Hm... is it possible to pass a reference around for chained operations without breaking life time scoping? 
[05:19:53] <dougxxx> eg. blah.do1().do2().do3()
[05:20:07] <dougxxx> where the argument is a &Blah
[05:20:21] <huon> dougxxx: what version of rust are you using?
[05:20:26] <huon> bollu: http://static.rust-lang.org/doc/master/complement-cheatsheet.html
[05:20:34] <dougxxx> head
[05:20:37] <Yurume> shouldn't `fn do1<'a>(&'a self) -> &'a Blah { ... }` be sufficient?
[05:20:56] *** Parts: capt_redbeard (Adium@moz-4998C3D0.ok.ok.cox.net) ()
[05:21:05] <bollu> when I do pattern matching, can I write a multi-line statement under a branch?
[05:21:08] <dougxxx> mm... I'm getting the ...does not necessarily outlive the anonymous lifetime #2 defined on the block
[05:21:19] <bollu> "do" pattern matching? is that correct english?
[05:21:36] <huon> bollu: pattern matching with `match`?
[05:21:42] <huon> dougxxx: it
[05:21:49] <huon> 's hard to tell without the details of each method
[05:22:02] <Yurume> rusti: struct A{x:~[int]} impl A{ fn one<'a>(&'a mut self)->&'a mut A{self.push(1);self} fn two<'a>(&'a mut self)->&'a mut A{self.push(2);self} } (A{x:~[]}).one().two()
[05:22:03] -rusti- pastebinned 8 lines of output: http://sprunge.us/LPea
[05:22:18] <huon> breaking it out into a temporary should help though
[05:22:20] <Yurume> rusti: struct A{x:~[int]} impl A{ fn one<'a>(&'a mut self)->&'a mut A{self.x.push(1);self} fn two<'a>(&'a mut self)->&'a mut A{self.x.push(2);self} } (A{x:~[]}).one().two()
[05:22:21] -rusti- pastebinned 16 lines of output: http://sprunge.us/PKXC
[05:22:28] <Yurume> aha...
[05:22:41] <bollu> math match name.char_at(0) {
[05:22:43] <Yurume> yeah, temporary variables would help.
[05:22:53] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:22:53] <bollu> 'i' => ... (multi line stuff)
[05:23:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[05:23:10] <Yurume> bollu: => { ... }
[05:23:17] <bollu> thanks
[05:23:26] <Yurume> in fact, {...} is an expression with multiple "statements" inside
[05:23:41] <Yurume> so you can even do something like this: { let a = ...; let b = ...; f(b) }
[05:23:51] <Yurume> (which is an expression that evaluates to f(b))
[05:25:18] <bollu> huh. that's interesting
[05:25:32] <bollu> https://gist.github.com/bollu/66bfa31ab89bfac0cda0 <- can I write this more idiomatically? (the match mainly)
[05:26:46] <Yurume> isn't that just fine? just take care of the case when `name` is empty.
[05:27:08] <bollu> Yurume: I wasn't sure :)
[05:27:11] <bollu> will do
[05:27:21] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[05:27:39] <bollu> and I /really/ need better names for those functions 
[05:27:42] <Yurume> (thinking about that, slice_shift_char should return Option<(char, &'a str)>) 
[05:28:34] <bollu> when would it fail? when index > strlen ?
[05:28:38] <bollu> or index < 0 too
[05:28:52] <Yurume> index < 0 is impossible, index is `uint`
[05:28:57] <bollu> no, wait, I'm rambling
[05:29:01] <bollu> yep, realized
[05:29:34] <o11c> ugh, /// is not valid for comments?
[05:29:56] <bollu> rusti: valueStr = ~"a"; let value = (valueStr == "true"); value
[05:29:57] -rusti- pastebinned 8 lines of output: http://sprunge.us/ccXV
[05:30:08] <bollu> rusti: let  valueStr = ~"a"; let value = (valueStr == "true"); value
[05:30:08] -rusti- <anon>:10:56: 10:62 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected `~` but found `&'static `)
[05:30:08] -rusti- <anon>:10         let  valueStr = ~"a"; let value = (valueStr == "true"); value
[05:30:09] -rusti-                                                                  ^~~~~~
[05:30:09] -rusti- error: aborting due to previous error
[05:30:09] -rusti- application terminated with error code 101
[05:30:19] <bollu> so, it should be ~"true" ?
[05:30:51] <Valloric> if I have an Option<(int, &u8)> but want to have an Option<(int, u8)>, what's the easiest way to convert?
[05:31:20] <huon> .map(|(i, &b)| (i, b))
[05:31:29] <Yurume> bollu: yes, or more efficiently, valueStr.equiv(&"true").
[05:31:36] <Valloric> huon: that's the best I came up with too
[05:31:47] <bollu> thanks Yurume
[05:31:51] <huon> Yurume, bollu: `"true" == valueStr` works too
[05:31:53] <Valloric> btw, what's with all the ceremony around comparing &T with T?
[05:32:06] <huon> Valloric: ?
[05:32:07] <Yurume> huon: will DST solve that? :S
[05:32:13] <huon> Yurume: don't know
[05:32:16] <huon> possibly
[05:32:17] <Valloric> huon: no auto-deref
[05:32:36] <bollu> rusti: let  valueStr = ~"a"; let value = valueStr.equiv(&"true"); value
[05:32:37] -rusti- pastebinned 7 lines of output: http://sprunge.us/dLFP
[05:32:50] <bollu> nope
[05:32:50] <Valloric> which is weird to me, because the compiler knows &T can't be null, why not deref it for me
[05:33:32] <Valloric> &T == T fails, sadly
[05:33:47] <huon> &T + T doesn't though :P
[05:33:55] <huon> rusti: &1 + 2
[05:33:56] -rusti- pastebinned 35 lines of output: http://sprunge.us/GVLi
[05:34:02] <huon> rusti: &1u + 2
[05:34:03] -rusti- 3u
[05:34:08] <Valloric> huon: that makes no sense... wtf?
[05:34:08] <huon> it's a bug
[05:34:09] <huon> though
[05:34:15] <huon> rusti: &1u == 1u
[05:34:16] -rusti- <anon>:10:16: 10:18 error: mismatched types: expected `&uint` but found `uint` (expected &-ptr but found uint)
[05:34:16] -rusti- <anon>:10         &1u == 1u
[05:34:16] -rusti-                          ^~
[05:34:16] -rusti- error: aborting due to previous error
[05:34:16] -rusti- application terminated with error code 101
[05:34:43] <Valloric> huon: that! freaking deref for me compiler! you work for me!
[05:34:55] <huon> Valloric: is *x == y really that hard? :S
[05:35:26] <bollu> rusti: ~"a".equiv(&"true");
[05:35:27] -rusti- pastebinned 7 lines of output: http://sprunge.us/AWDD
[05:35:36] <Valloric> huon: no, but Option<(int, &u8)> does not match against Some(1, 'b' as u8)
[05:35:50] <bollu> rusti: ~"a".equiv(~"true");
[05:35:50] -rusti- pastebinned 7 lines of output: http://sprunge.us/gEXO
[05:36:01] <bollu> okay, how do I use equiv? -_-
[05:36:14] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[05:36:36] *** Quits: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) (Quit: Leaving.)
[05:37:09] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[05:37:44] <Valloric> rusti: let x: u8 = 10; let y = Some(&x); y == Some('\n' as u8)
[05:37:44] -rusti- <anon>:10:48: 10:64 error: mismatched types: expected `std::option::Option<&u8>` but found `std::option::Option<u8>` (expected &-ptr but found u8)
[05:37:45] -rusti- <anon>:10         let x: u8 = 10; let y = Some(&x); y == Some('\n' as u8)
[05:37:45] -rusti-                                                          ^~~~~~~~~~~~~~~~
[05:37:45] -rusti- error: aborting due to previous error
[05:37:45] -rusti- application terminated with error code 101
[05:37:58] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[05:38:01] <Valloric> huon: _there's_ the annoying part
[05:38:37] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[05:38:56] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[05:39:25] <huon> Valloric: ah, I see
[05:39:36] <huon> rusti: let x: u8 = 10; let y = Some(&x); y == Some(&('\n' as u8))
[05:39:37] -rusti- true
[05:39:59] <huon> (of course, in general, this isn't possible.)
[05:40:06] <Valloric> huon: now give that to assert_eq! and see it fail
[05:40:13] <Valloric> huon: because of the borrow checker
[05:40:54] <Valloric> rusti: let x: u8 = 10; let y = Some(&x); assert_eq!(y, Some(&('\n' as u8)))
[05:40:55] -rusti- pastebinned 14 lines of output: http://sprunge.us/eihd
[05:41:08] <huon> yup
[05:41:13] <o11c> ugh ... this C api is returning a struct that contains utf8: [u8, ..7]
[05:41:31] <o11c> I would like it to be a string, but that would make it non-pod ...
[05:41:32] <Valloric> huon: that's why I call lack of auto-deref here "ceremony"
[05:41:50] <pradeep> Hi all! I'm trying to implement something like the Strategy pattern in Rust? There is a struct `Block` which has different algorithms for `calculate_width` for 6 different cases (Float, Absolute, etc.) which use the same data.
[05:41:51] <Valloric> huon: I'm just dancing in front of the compiler; it knows what &T is and how it relates to T
[05:42:01] <Valloric> huon: and that it can safely compare the two
[05:42:10] <bollu> Valloric: that sentence was hilarious ;)
[05:42:12] <pradeep> I can get it to work by having empty structs for each case Float, Absolute, etc. and implementing a common trait CalculateWidth
[05:42:14] <o11c> and beacuse of that stupid rule about trait methods not being visible ...
[05:42:22] <huon> o11c: if the C api defines it to be [u8, .. 7] it has to be that to match what the C lib is handing back to you
[05:42:47] <pradeep> and then store it in Block. That way we have static dispatch on the calculate_width method. Is there a more idiomatic way of doing this?
[05:42:49] <o11c> huon: right, but I have a second struct with higher-level types. It's still pod though.
[05:42:50] <huon> arbitrarily substituting in ~str or &str is just plain incorrect (completely different representations)
[05:42:58] <huon> ok
[05:43:11] *** Quits: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net) (Quit: Valloric)
[05:43:16] <huon> o11c: trait methods are visible... with the trait in scope.
[05:43:30] <huon> the rule is the opposite of stupid.
[05:43:32] <o11c> but I just now realized I could make my own pod type to represent a single utf-8 character and impl something directly on that
[05:43:32] <Yurume> pradeep: it is a traditional polymorphism problem, and thus there are two ways to do that: struct Foo<Strategy> { ..., strategy: Strategy } vs. struct Foo { ..., strategy: ~StrategyTrait }.
[05:43:44] <o11c> huon: but that means that they have to *know* about the trait
[05:43:47] <huon> also, why is a utf8 character [u8, .. 7]
[05:43:48] <bollu> guys, tangent: if I have a string "(float1, float2"), what's the easiest way to parse it?
[05:44:01] <bollu> parse it into a tuple or something 
[05:44:10] <huon> o11c: if they aren't supposed to know about the trait, what's the purpose of it?
[05:44:13] <pradeep> Yurume: ok. so I'm going for the first one to avoid virtual methods.
[05:44:27] *** Quits: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) (Quit: Leaving.)
[05:44:30] <o11c> huon: because (original) utf-8 is 6 bytes, plus a \0
[05:44:37] <Yurume> bollu: unfortunately, not easy. :( afaik number parsing does not do the partial parsing, so you have to make your own parser.
[05:44:56] <o11c> huon: because trait methods are second-class citizens. *normal* methods can just be called
[05:45:16] <pradeep> Yurume: but Block implements a trait called Flow (this is in Servo) which has a method called as_block(&'a mut self) -> &'a mut Block
[05:45:53] <pradeep> how should I implement that for the new Block<Strategy> struct?
[05:45:53] <o11c> (hm, can't impl on a [] across crates anyway, and *that* rule does make sense at least)
[05:46:30] <bollu> yurume: thanks for the info :) 
[05:46:36] <Yurume> pradeep: I don't think you can avoid the dispatch cost in that case, though I don't know the whole architecture to justify that.
[05:46:39] <o11c> anyway, am I missing a general case for a very short string stored without allocation?
[05:46:45] <huon> o11c: traits are main to represent shared behaviour: if you don't have shared behaviour, you don't need a trait
[05:47:14] <bollu> Yurume: would a representation such as "float1 float2" be easier?
[05:47:20] <Yurume> you may mitigate some cost by moving tight loops (for example) into the trait's default methods
[05:47:34] <huon> o11c: https://github.com/mozilla/rust/issues/4991
[05:47:38] <o11c> huon: shared behavior, maybe, but the caller shouldn't have to care about *who* it's shared by
[05:47:41] <Yurume> bollu: I think so, or anything can be split with `split` method.
[05:47:48] <bollu> thanks!
[05:48:36] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[05:48:48] <huon> o11c: if external things don't care about who shares it, then don't expose it externally via the trait
[05:48:53] *** Quits: nimish (quassel@6CD90D4F.B586C2A4.5F29FBA5.IP) (Connection reset by peer)
[05:48:54] *** Joins: nimish (quassel@6CD90D4F.B586C2A4.5F29FBA5.IP)
[05:49:05] <o11c> huon: in other words - go back to copy-pasting code?
[05:49:38] <huon> o11c: no? you are allowed to call the trait method to implement another method.
[05:49:44] <bollu> can I call split on ~str ?
[05:49:52] <huon> bollu: try it before asking
[05:49:53] <pradeep> Yurume: sure, in that case the dispatch cost is not a problem. It's about getting it to compile. What would the return type be? (When I try it with ... Block<T>, I get an ICE)
[05:50:09] <bollu> huon: I did, it's giving me an error
[05:50:10] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:50:22] <bollu> I'm trying to figure out if it's a string thing or a syntax thing
[05:50:26] <Yurume> pradeep: uh, with an owned trait object you don't need to modify `Block` type itself.
[05:50:27] <huon> bollu: ask the question with the error next time
[05:50:35] <huon> (and we need the error now...)
[05:50:45] <bollu> huon: will do!  error: failed to find an implementation of trait std::str::CharEq for &'static str
[05:50:56] <bollu> let floatPair : ~[&str] = valueStr.split(" ").collect();
[05:51:02] <bollu> where valueStr is of type ~str
[05:51:04] <Yurume> right, give as much errors as possible, that greatly reduces the question-answer loop.
[05:51:05] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[05:51:12] <bollu> okay :)
[05:51:12] <pradeep> Yurume: I'm sorry, I didn't quite understand your explanation...
[05:51:20] * pradeep will be back in 15 mins
[05:51:21] <Yurume> bollu: split_str.
[05:51:44] <Yurume> or change " " to ' '
[05:51:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:51:56] <bollu> Yurume: whoops, that was stupid!
[05:51:59] <bollu> thank you
[05:52:17] <Yurume> there are three kinds of splits around: s.split('/') s.split(|c| c.is_whitespace()) s.split_str("<->")
[05:52:33] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[05:52:37] <hoverbear> How can I get the number of CPUs on a systeM?
[05:53:12] <bollu> split_str seems really nice
[05:53:16] <Yurume> uh, I thought there was `num_cpus` method around, but I cannot find that
[05:53:33] <Yurume> aha, it is in std::rt
[05:53:43] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[05:53:59] <bollu> rt = tuntime?
[05:54:07] <Yurume> hoverbear: std::rt::util::num_cpus.
[05:54:17] <Yurume> don't know why the search does not show that
[05:54:21] <hoverbear> Yurume: Hero!
[05:54:24] <Yurume> bollu: right.
[05:54:27] <huon> Yurume: it's private
[05:54:34] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[05:54:34] *** ChanServ sets mode: +ao brson brson
[05:54:41] <Yurume> huon: ah? is std::rt::util private?
[05:54:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:55:09] <Yurume> aww, huon is right on that
[05:55:33] <Yurume> hoverbear: well, maybe you can copy the code for num_cpus as is and get the same behavior
[05:55:54] <huon> http://stackoverflow.com/questions/22155130/determine-number-of-cores-using-rust
[05:55:57] <Yurume> it is a thin wrapper around rust_get_num_cpus built-in function
[05:56:26] <bollu> what would you need in a .gitignore for rust?
[05:56:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:56:52] <Yurume> huon: I think using default_sched_threads is a bit worrisome since it is actually dependent to the scheduler logics.
[05:57:35] <Yurume> bollu: various. at least you'll have some compiled binaries around, and you'll want to exclude them from git repo.
[05:57:46] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[05:58:29] *** Joins: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it)
[05:58:31] <bollu> Yurume: thanks
[05:59:43] <huon> Yurume: yes, I agree
[06:00:10] *** Quits: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it) (Ping timeout)
[06:01:35] <bollu> bye guys!
[06:01:38] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Quit: Lost terminal)
[06:01:49] *** Quits: blindrenderer (blindrende@991944C8.B22400E5.217C7FCC.IP) (Quit: Leaving)
[06:02:03] *** Joins: blindrenderer (blindrende@991944C8.B22400E5.217C7FCC.IP)
[06:02:49] <hoverbear> Yurume: Maybe. Hm..
[06:03:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:05:33] <hoverbear> Is there a way to search a vector?
[06:07:06] *** Joins: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP)
[06:08:36] <Yurume> depends on the constraint you are assuming to the vector.
[06:08:53] <Yurume> if there is no such constraint (sorted, heapified, etc.) look at the iterator methods.
[06:11:00] <huon> .iter().find(predicate)
[06:12:11] <hoverbear> Oh neat.
[06:12:42] *** Joins: Guest_ (textual@moz-310FD28A.dynamic.caiway.nl)
[06:12:46] <huon> there's .position too, iirc
[06:13:02] <hoverbear> Where do you see find? http://static.rust-lang.org/doc/0.9/std/iter/index.html
[06:13:12] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:14:54] <Yurume> hoverbear: http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.find
[06:15:10] <hoverbear> Oohhh shoot
[06:15:12] <hoverbear> Okay, aweosme
[06:15:14] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[06:15:22] <Yurume> in general, you need to know about a correct trait to find methods
[06:15:28] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[06:15:28] *** ChanServ sets mode: +ao brson brson
[06:15:30] <o11c> ugh
[06:15:51] <o11c> the rust test harness is capturing stdout, but not stderr, for failed tests
[06:15:58] <o11c> stderr is where all the useful error messages go!
[06:16:13] <o11c> fg
[06:16:43] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[06:16:57] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[06:17:37] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[06:23:13] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[06:23:41] *** Quits: Guest_ (textual@moz-310FD28A.dynamic.caiway.nl) (Quit: Computer has gone to sleep.)
[06:25:12] *** Quits: lessless (lessless@moz-F3755E99.emplot.net) (Ping timeout)
[06:25:23] *** Joins: lessless (lessless@923CDFD8.6861EF35.99EEF42B.IP)
[06:25:29] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Ping timeout)
[06:25:41] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[06:25:46] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[06:26:05] *** Joins: maxli (Instantbir@moz-1650391B.hsd1.ca.comcast.net)
[06:26:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:27:25] <pradeep> Yurume: hi.  with an owned trait object you don't need to modify `Block` type itself.
[06:27:47] <pradeep> Could you help me understand what you meant by that?
[06:28:18] <Yurume> isn't that your concern is about modifying `Block` to have a (strategy) type argument?
[06:28:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:28:54] <pradeep> yeah. So I go ahead and make Block have a strategy type argument. How do I make as_block() return the right type?
[06:29:03] <Yurume> maybe I've got confused, the real code (I'm not familiar to Servo) may help 
[06:29:50] <pradeep> https://github.com/mozilla/servo/blob/master/src/components/main/layout/flow.rs#L72 
[06:30:57] <pradeep> And BlockFLow implements Flow, https://github.com/mozilla/servo/blob/master/src/components/main/layout/block.rs#L1448
[06:31:40] <Yurume> pradeep: changing BlockFlow to have type parameters affects everywhere that BlockFlow is used. the only way to avoid this is to wrap BlockFlow in another trait object, which might or might be possible.
[06:32:42] <Yurume> but as you've said that the dispatch cost (for strategy struct, right?) is negligible, you'd better add the owned trait object for strategy trait to BlockFlow
[06:32:42] *** Quits: lessless (lessless@923CDFD8.6861EF35.99EEF42B.IP) (Ping timeout)
[06:33:28] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[06:34:19] <pradeep> no I didn't mean the dispatch cost for strategy struct, I meant for the virtual method as_block()
[06:34:27] <pradeep> sorry if I'm being confusing
[06:34:43] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[06:36:34] <Yurume> then make BlockFlow a trait, rename the original BlockFlow to something like BlockFlow_<Strategy>.
[06:36:37] <Yurume> and*
[06:37:49] <Yurume> everywhere using BlockFlow should be changed to use ~BlockFlow (instead of a plain BlockFlow) then
[06:39:09] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[06:39:09] *** ChanServ sets mode: +ao brson brson
[06:39:28] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[06:39:29] *** Joins: ofeldt (ofeldt@moz-5993F1EF.dip0.t-ipconnect.de)
[06:40:30] *** Quits: ofeldt- (ofeldt@moz-7804B8F1.dip0.t-ipconnect.de) (Ping timeout)
[06:40:38] <pradeep> ok, I think I get what you're saying. Basically, we want to be able to do a reverse cast from Flow to BlockFlow and for that we use a BlockFlow trait. Is that correct?
[06:43:17] *** Quits: maxli (Instantbir@moz-1650391B.hsd1.ca.comcast.net) (Ping timeout)
[06:43:39] *** Joins: maxli (Instantbir@moz-1650391B.hsd1.ca.comcast.net)
[06:46:41] *** Joins: lessless (lessless@moz-F3755E99.emplot.net)
[06:47:40] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[06:48:01] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[06:48:31] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[06:48:55] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[06:48:55] *** ChanServ sets mode: +ao brson brson
[06:49:04] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[06:49:23] <pradeep> Yurume: thanks. I was able to get a Shape and Circle example to work :)
[06:50:05] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[06:52:35] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[06:54:07] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[06:54:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:54:35] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:55:09] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[06:56:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:59:01] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[06:59:05] *** Joins: ski (ski@moz-E5796727.student.chalmers.se)
[06:59:09] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[06:59:13] *** Joins: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it)
[07:00:32] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[07:00:53] *** Quits: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net) (Ping timeout)
[07:00:53] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:00:55] *** Quits: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it) (Ping timeout)
[07:01:43] *** Quits: oxum (anonymous@FB7D6AA5.C071283D.520CDC98.IP) (Quit: ...)
[07:01:45] *** Joins: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP)
[07:03:50] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[07:05:47] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[07:06:50] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[07:07:17] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[07:08:03] <bvssvni> if there any newbie questions I got one half hour!
[07:08:14] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[07:09:09] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Input/output error)
[07:12:54] *** Joins: epall (epall@moz-FA29BBA2.lightspeed.sntcca.sbcglobal.net)
[07:12:58] <kvanb> has anyone made a threaded interpreter in rust
[07:13:11] <kvanb> I can't find anything that's kind of like "labels as values" for C
[07:14:29] *** Quits: maxli (Instantbir@moz-1650391B.hsd1.ca.comcast.net) (Ping timeout)
[07:14:48] <Yurume> I guess it is hard to do in Rust (computed GOTOs, for example?)
[07:14:51] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[07:14:59] <Yurume> the closest alternative would be a function table.
[07:18:57] *** Joins: mgottschlag (quassel@moz-F89A5731.cust.bluewin.ch)
[07:19:14] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[07:20:25] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[07:21:58] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:22:01] *** Quits: FreeFull (freefull@moz-3EB096D2.as13285.net) (Quit: )
[07:22:05] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[07:22:15] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[07:23:54] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[07:24:05] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[07:24:06] *** Quits: mjrosenb (mjrosenb@moz-22104996.hsd1.pa.comcast.net) (Ping timeout)
[07:24:25] <kvanb> hmm
[07:24:35] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[07:25:02] <kvanb> I don't think function tables are as effective
[07:25:10] <kvanb> Rust does have tailcalls, doesn't it?
[07:25:11] <Yurume> I agree on that
[07:25:23] *** Joins: mjrosenb (mjrosenb@moz-22104996.hsd1.pa.comcast.net)
[07:25:25] <Yurume> not guaranteed but in many cases yes.
[07:25:36] <bvssvni> is has? wow
[07:25:38] <kvanb> does it use fastcall by default?
[07:25:40] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[07:25:47] <kvanb> or some calling convention that keeps in registers
[07:26:50] <Yurume> I don't know specifics but there is an LLVM optimization pass for doing that
[07:26:50] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[07:26:55] <Yurume> I think
[07:27:06] <edwardw> rusti: extern crate collections; use collections::HashMap; HashMap::new()
[07:27:07] -rusti- <anon>:10:9: 10:34 error: "extern crate" declarations are not allowed here
[07:27:07] -rusti- <anon>:10         extern crate collections; use collections::HashMap; HashMap::new()
[07:27:07] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~
[07:27:07] -rusti- error: aborting due to previous error
[07:27:07] -rusti- application terminated with error code 101
[07:27:44] <edwardw> rusti: use collections::HashMap; HashMap::new()
[07:27:44] <bvssvni> edwardw: rusti runs inside an expression
[07:27:45] -rusti- pastebinned 8 lines of output: http://sprunge.us/MBRZ
[07:27:55] <edwardw> bvssvni: k
[07:28:07] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[07:29:05] <edwardw> does anyone have trouble to use collections crate lately? rustc told me "use collections::HashMap;" fail to resolve
[07:29:35] <edwardw> even I put a "extern crate collections;" at the top of main file
[07:29:44] <Yurume> rustc -v?
[07:30:00] <edwardw> only "rustc 0.10-pre"
[07:30:09] <Yurume> how did you install the rust nightly?
[07:30:11] <edwardw> it is about a month old iirc
[07:30:19] <edwardw> homwbrew install --HEAD
[07:30:29] <Yurume> then collections was not in its own crate yet
[07:30:36] <Yurume> use std::hashmap::HashMap for a moment.
[07:30:43] <edwardw> ah ok
[07:30:56] *** Quits: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: azita)
[07:31:15] <edwardw> Yurume: worked, thanks
[07:31:37] <kvanb> in C I can do something like this
[07:31:57] <kvanb> dispatch_table[255] = { [1] = &&foo, [5] = &&bar, &&unknown_opcode };
[07:32:13] <kvanb> which would initialize dispatch_table[1] and [5], and the rest to unknown opcode
[07:32:21] <Yurume> kvanb: (note: it is GNU C, to be exact)
[07:32:23] <kvanb> can I do something similar in rust
[07:32:28] <kvanb> its standard in c99!
[07:32:33] <Yurume> wait, what?
[07:32:40] <kvanb> not kidding, blew my mind too
[07:32:41] <kvanb> :)
[07:32:44] *** Joins: jneen (jneen@7DA3DF65.A4ACDD73.AED9BA81.IP)
[07:32:52] <Yurume> initializer syntax is C99 indeed
[07:33:04] <Yurume> but taking a pointer to the label using && is absolutely GNU C :)
[07:33:12] <kvanb> oh, right, yeah thats an extension
[07:33:21] <kvanb> but I was more thinking about the specific initializer part
[07:33:55] <kvanb> specifically being able to specify which parts of the vector to initialize to what, and floodfilling the rest with unknown opcode
[07:35:53] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:35:54] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Quit: Konversation terminated!)
[07:36:34] <Yurume> feature request, maybe?
[07:36:50] <Yurume> (maybe post-1.0)
[07:40:40] <kvanb> rusti: let v : [int, ..5] = [0]
[07:40:41] -rusti- <anon>:11:5: 11:6 error: expected `;` but found `}`
[07:40:41] -rusti- <anon>:11     };
[07:40:41] -rusti-               ^
[07:40:41] -rusti- application terminated with error code 101
[07:40:50] <kvanb> rusti: let v : [int, ..5] = [0];
[07:40:51] -rusti- pastebinned 5 lines of output: http://sprunge.us/UgYI
[07:41:25] <bvssvni> rusti: let v: [int, ..5] = [..0];
[07:41:26] -rusti- <anon>:10:30: 10:32 error: unexpected token: `..`
[07:41:26] -rusti- <anon>:10         let v: [int, ..5] = [..0];
[07:41:26] -rusti-                                        ^~
[07:41:26] -rusti- application terminated with error code 101
[07:41:33] <dougxxx> There some good examples of named lifetime scopes somewhere I can look at? I've been reading http://static.rust-lang.org/doc/master/guide-lifetimes.html, but I dont really understand how you tell span of a lifetime scope. 
[07:41:37] <kvanb> rusti: let v : [int, ..5] = [1, 2, 0, ..3];
[07:41:38] -rusti- <anon>:10:40: 10:42 error: unexpected token: `..`
[07:41:38] -rusti- <anon>:10         let v : [int, ..5] = [1, 2, 0, ..3];
[07:41:38] -rusti-                                                  ^~
[07:41:38] -rusti- application terminated with error code 101
[07:43:12] <kvanb> rusti: let v: [int, ..5] = [..0];
[07:43:12] -rusti- <anon>:10:30: 10:32 error: unexpected token: `..`
[07:43:12] -rusti- <anon>:10         let v: [int, ..5] = [..0];
[07:43:13] -rusti-                                        ^~
[07:43:13] -rusti- application terminated with error code 101
[07:43:18] <kvanb> ?? D:
[07:43:51] <bvssvni> dougxxx: I use some advanced lifetime in this example https://gist.github.com/bvssvni/8970459
[07:45:01] <dougxxx> oo.. interesting.
[07:46:13] *** Quits: stevegury (stevegury@moz-171801E.hsd1.ca.comcast.net) (Quit: stevegury)
[07:47:34] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[07:48:27] <edwardw> https://github.com/mozilla/rust/issues/12679 should the type inference work in this case?
[07:49:10] *** Quits: epall (epall@moz-FA29BBA2.lightspeed.sntcca.sbcglobal.net) (Quit: epall)
[07:49:25] <Yurume> afaik the type inference engine has some caveats so some constraints have to be resolved in one way and not in the other way.
[07:49:45] <kvanb> rusti: let v : [int, ..5] = [1, 2, ..3];
[07:49:45] -rusti- <anon>:10:37: 10:39 error: unexpected token: `..`
[07:49:46] -rusti- <anon>:10         let v : [int, ..5] = [1, 2, ..3];
[07:49:46] -rusti-                                               ^~
[07:49:46] -rusti- application terminated with error code 101
[07:49:49] *** Joins: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[07:49:51] <edwardw> k
[07:49:51] <bvssvni> edwardw: at least it should be able to infer the return type of the closure, not sure about the argument
[07:50:56] <edwardw> bvssvni: it has no trouble with return type, only argument type
[07:51:18] <kvanb> rusti: let v : [int, ..5] = [1,2,3,4,5];
[07:51:19] -rusti- <anon>:10:13: 10:14 warning: unused variable: `v`, #[warn(unused_variable)] on by default
[07:51:19] -rusti- <anon>:10         let v : [int, ..5] = [1,2,3,4,5];
[07:51:19] -rusti-                       ^
[07:51:19] -rusti- ()
[07:51:39] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[07:51:39] <kvanb> \o/
[07:51:48] *** Joins: mindcat (mindcat@33011F67.90785442.291A146C.IP)
[07:52:01] * mindcat aaabbbbccccdddd
[07:52:25] <bvssvni> edwardw: maybe it will with (3u, 3u)?
[07:52:42] <edwardw> let me try
[07:53:01] *** Joins: fabiand (fabiand@moz-9D8A4B0A.adsl.alicedsl.de)
[07:53:19] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[07:53:34] <edwardw> bvssvni: still doesn't work
[07:53:46] <bvssvni> edwardw: what about (3 as u32, 3 as u32)?
[07:53:47] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[07:53:57] <Yurume> (note: it is (3u32, 3u32).)
[07:54:01] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[07:54:01] <edwardw> bvssvni: that's what I tried :)
[07:54:09] <edwardw> (3u32, 3u32)
[07:54:09] <bvssvni> looks like a bug then
[07:54:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:54:49] <bvssvni> according to the function definition it should infer the argument type from the first parameter
[07:55:36] *** Joins: thesnowdog (doug@70C52BD5.CDB23781.6F17036B.IP)
[07:55:43] *** Joins: daschl (Adium@moz-2CD7D03F.wlan.univie.ac.at)
[07:56:06] *** Joins: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it)
[07:56:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:56:55] <bvssvni> also, it should infer it from the HashMap::new
[07:57:33] <edwardw> yep, there are more than one type hint
[07:57:56] <bvssvni> maybe it gets confused by the pointer
[07:58:16] <bvssvni> what about &(3, 3)?
[07:58:34] *** flaper87|afk is now known as flaper87
[07:58:37] *** Joins: oxum (anonymous@5B2B4DB0.BBE46712.520CDC98.IP)
[07:58:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:59:02] <edwardw> that'll violate `find_or_insert_with` signature
[07:59:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:59:17] <bvssvni> edwardw: silly me :P
[08:00:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:00:55] *** Quits: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[08:04:15] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[08:04:58] *** Joins: marianoguerra (marianogue@moz-EF634523.dip0.t-ipconnect.de)
[08:05:27] <kvanb> \o/ posted an issue for the array initializer thing
[08:05:48] <kvanb> now the devs can yell at me.
[08:05:49] * kvanb afk
[08:05:50] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[08:07:07] *** Quits: mgottschlag (quassel@moz-F89A5731.cust.bluewin.ch) (Ping timeout)
[08:07:12] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:11:49] *** pmoore|away is now known as pmoore
[08:18:14] *** Quits: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Ping timeout)
[08:19:53] *** Quits: Rym (WUT@AC250667.5D2765E2.51C6DE68.IP) (Ping timeout)
[08:21:58] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[08:23:38] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[08:24:08] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[08:25:30] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:53] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[08:28:00] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[08:30:34] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[08:31:23] *** jneen is now known as jneen|afk
[08:31:26] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[08:31:27] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[08:31:28] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[08:31:34] *** Quits: alinab (alina@moz-94EAE39D.alinab.org) (Quit: leaving)
[08:32:30] *** Joins: Ferreus (ferreus@moz-7CCF6380.dip0.t-ipconnect.de)
[08:34:03] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[08:37:05] *** flaper87 is now known as flaper87|afk
[08:37:06] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Quit: ZNC - http://znc.in)
[08:38:20] *** flaper87|afk is now known as flaper87
[08:39:15] <mindcat> rusti: 9!
[08:39:19] <mindcat> rusti: 9!
[08:39:24] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[08:39:50] *** flaper87 is now known as flaper87|afk
[08:40:13] *** flaper87|afk is now known as flaper87
[08:40:37] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[08:40:46] <Yurume> mindcat: what are you doing?
[08:41:01] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[08:41:20] <mindcat> Yurume: "9!" == 9 * 8 * 7 * 6 * 5 * 4 * 3 * 2 * 1
[08:41:37] <Yurume> ...and rust does not have a suffix operator.
[08:42:20] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:42:31] *** YourBestFriend is now known as sam113101_afk
[08:42:31] <Yurume> rusti: range(1, 10u).product()
[08:42:31] -rusti- <anon>:10:9: 10:32 error: type `std::iter::Range<uint>` does not implement any method in scope named `product`
[08:42:31] -rusti- <anon>:10         range(1, 10u).product()
[08:42:31] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~
[08:42:31] -rusti- error: aborting due to previous error
[08:42:31] -rusti- application terminated with error code 101
[08:42:44] <Yurume> uh, what?
[08:42:49] *** flaper87 is now known as flaper87|afk
[08:43:04] <Yurume> mindcat: at least the doc has an example of factorial implementation: http://static.rust-lang.org/doc/master/std/iter/trait.MultiplicativeIterator.html#tymethod.product
[08:43:21] <mindcat> Yurume: ok..
[08:43:46] <Yurume> rusti: use std::iter::MultiplicativeIterator; range(1, 10u).product()
[08:43:47] -rusti- 362880u
[08:43:51] <Yurume> now that makes sense.
[08:43:57] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[08:44:11] *** sam113101_afk is now known as YourBestFriend
[08:44:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:44:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:44:47] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Ping timeout)
[08:45:17] *** flaper87|afk is now known as flaper87
[08:45:38] <mindcat> rusti: #[inline] fn fact(x) {match x { 2 > x => 1, _ => x * fact(x - 1)} }; fact(5)
[08:45:38] -rusti- <anon>:10:28: 10:29 error: expected `:` but found `)`
[08:45:38] -rusti- <anon>:10         #[inline] fn fact(x) {match x { 2 > x => 1, _ => x * fact(x - 1)} }; fact(5)
[08:45:38] -rusti-                                      ^
[08:45:39] -rusti- application terminated with error code 101
[08:45:53] <mindcat> rusti: #[inline] fn fact(x : uint) {match x { 2 > x => 1, _ => x * fact(x - 1)} }; fact(5)
[08:45:53] -rusti- <anon>:10:50: 10:51 error: expected `=>` but found `>`
[08:45:53] -rusti- <anon>:10         #[inline] fn fact(x : uint) {match x { 2 > x => 1, _ => x * fact(x - 1)} }; fact(5)
[08:45:53] -rusti-                                                            ^
[08:45:53] -rusti- application terminated with error code 101
[08:46:02] <mindcat> rusti: #[inline] fn fact(x : uint) {match x { (2 > x) => 1, _ => x * fact(x - 1)} }; fact(5)
[08:46:03] -rusti- <anon>:10:51: 10:52 error: expected `,` but found `>`
[08:46:03] -rusti- <anon>:10         #[inline] fn fact(x : uint) {match x { (2 > x) => 1, _ => x * fact(x - 1)} }; fact(5)
[08:46:03] -rusti-                                                             ^
[08:46:03] -rusti- application terminated with error code 101
[08:46:07] <mindcat> lol
[08:46:21] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:46:21] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[08:46:22] <Yurume> mindcat: (note that you can also directly send a message to rusti)
[08:46:44] <mindcat> rusti: #[inline] fn fact(x : uint) {match x { _ if 2 > x => 1, _ => x * fact(x - 1)} }; fact(5)
[08:46:44] -rusti- pastebinned 8 lines of output: http://sprunge.us/CQUM
[08:46:46] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[08:46:56] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Quit: Leaving...)
[08:47:30] <mindcat> rusti: #[inline] fn fact(x : uint) {match x { _ if 2 > x => 1, _ => x * fact(x - 1)} x}; fact(5)
[08:47:31] -rusti- pastebinned 11 lines of output: http://sprunge.us/CiOR
[08:48:12] *** flaper87 is now known as flaper87|afk
[08:49:59] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[08:51:18] *** Quits: blindrenderer (blindrende@991944C8.B22400E5.217C7FCC.IP) (Ping timeout)
[08:51:39] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[08:52:24] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[08:52:32] <mindcat> rusti: #[inline] fn fact(x : uint) -> uint {match x { _ if 2 > x => 1, _ => x * fact(x - 1)} x}; fact(5)
[08:52:33] -rusti- <anon>:10:46: 10:94 error: mismatched types: expected `()` but found `uint` (expected () but found uint)
[08:52:33] -rusti- <anon>:10         #[inline] fn fact(x : uint) -> uint {match x { _ if 2 > x => 1, _ => x * fact(x - 1)} x}; fact(5)
[08:52:33] -rusti-                                                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[08:52:33] -rusti- error: aborting due to previous error
[08:52:34] -rusti- application terminated with error code 101
[08:52:50] <mindcat> rusti: #[inline] fn fact(x : uint) -> uint {match x { _ if 2 > x => 1, _ => x * fact(x - 1)}}; fact(5)
[08:52:51] -rusti- 120u
[08:52:56] <mindcat> XD
[08:53:16] <mindcat> rusti: #[inline] fn fact(x : uint) -> uint {match x { _ if 2 > x => 1, _ => x * fact(x - 1)} x}; fact(2)
[08:53:16] -rusti- <anon>:10:46: 10:94 error: mismatched types: expected `()` but found `uint` (expected () but found uint)
[08:53:16] -rusti- <anon>:10         #[inline] fn fact(x : uint) -> uint {match x { _ if 2 > x => 1, _ => x * fact(x - 1)} x}; fact(2)
[08:53:16] -rusti-                                                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[08:53:16] -rusti- error: aborting due to previous error
[08:53:18] -rusti- application terminated with error code 101
[08:53:21] <mindcat> rusti: #[inline] fn fact(x : uint) -> uint {match x { _ if 2 > x => 1, _ => x * fact(x - 1)}}; fact(2)
[08:53:22] -rusti- 2u
[08:53:30] <Yurume> more idiomatically, fn fact(x: uint) -> uint { if x < 2 { 1 } else { x * fact(x-1) } }
[08:53:58] <Yurume> there is no real reason to use match there
[08:54:12] <mindcat> ok...
[08:54:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:54:54] *** Joins: alexherbo2 (alexherbo2@moz-40E67BE9.w90-3.abo.wanadoo.fr)
[08:54:56] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[08:55:28] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[08:55:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Ping timeout)
[08:56:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:56:44] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[08:57:21] *** Quits: derek_c (derek@moz-DA4FB9D2.cit.cornell.edu) (Quit: Leaving)
[08:57:50] *** Quits: daschl (Adium@moz-2CD7D03F.wlan.univie.ac.at) (Quit: Leaving.)
[08:58:25] *** flaper87|afk is now known as flaper87
[08:59:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:00:12] <pzol> Can I put a trait in a static mut? sthg like static mut current: ~Locale = Indifferent; where Locale is a trait and Indifferent is a struct Indifferent; which implements Locale?
[09:00:59] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[09:01:03] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:01:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:01:36] *** Joins: nkoep (nik@moz-B36F319D.pool.mediaways.net)
[09:01:37] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[09:01:52] *** Joins: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[09:02:24] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[09:03:34] *** Quits: alexherbo2 (alexherbo2@moz-40E67BE9.w90-3.abo.wanadoo.fr) (Ping timeout)
[09:04:12] *** Joins: reima (Instantbir@moz-7A0CAC1A.dip0.t-ipconnect.de)
[09:05:50] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[09:06:42] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[09:07:19] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: Textual IRC Client: www.textualapp.com)
[09:07:32] *** Joins: jkingyens (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[09:08:00] *** jkingyens is now known as enos
[09:08:35] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Quit: Leaving...)
[09:09:18] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[09:09:23] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[09:10:00] *** Joins: peterdn (chatzilla@moz-63996255.as13285.net)
[09:11:04] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[09:16:00] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:18:15] *** Quits: meTaAU (admin@moz-52BDAB21.lns20.per1.internode.on.net) (Quit: Lost terminal)
[09:18:28] <kimundi> pzol: Anything involving heap allocations in statics are always problematic
[09:19:06] <pzol> kimundi what are my options/alternatives?? 
[09:19:25] *** Joins: alexherbo2 (alexherbo2@moz-1299A4B3.w90-3.abo.wanadoo.fr)
[09:19:38] *** Quits: Erik_ (Erik_S@moz-6691E309.hlrn.qwest.net) (Ping timeout)
[09:19:41] <kimundi> well, ideally you should only try to use a "static mut" as the last resort
[09:19:46] <kimundi> What do you need it for?
[09:20:07] <pzol> kimundi I want to store the current locale globally, so that all string formatting functions operate in the context of a locale, with a default "Indifferent"
[09:20:59] <pzol> something like in .net http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture%28v=vs.110%29.aspx
[09:21:11] <pzol> could be task local storage maybe??
[09:21:22] <eddyb> TLD
[09:21:41] <eddyb> see task_local in std
[09:21:55] <kimundi> That doesn't sound nice - global state is generally bad. How about this: THe locale becomes a generic type parameter. Bonus points: Possible to use different local contextes at the same time, no virtual call overhead etc
[09:22:14] <kimundi> With default paramters it wouldn't even be a annotation burden
[09:22:39] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[09:23:35] <pzol> ok thanks for the hints
[09:23:38] <kimundi> Alternatively, if the "global" switchable semantic is necessary, TLD, as eddyb said.
[09:23:54] <pzol> thx
[09:23:57] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[09:24:16] *** Joins: eibwen (kvirc@moz-283702DC.dip0.t-ipconnect.de)
[09:25:03] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[09:25:56] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:26:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:26:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:28:18] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[09:31:42] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[09:31:44] *** Joins: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de)
[09:31:51] *** Quits: nfroidure (nfroidure@moz-658F8A26.w90-18.abo.wanadoo.fr) (Ping timeout)
[09:33:08] *** Joins: redbrain (uid24282@moz-E77DEB21.irccloud.com)
[09:33:16] <redbrain> morning
[09:33:29] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[09:34:03] <eddyb> redbrain: well, noon here, but I just woke up, so SIGMORN 2u2
[09:34:12] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:34:14] <Yurume> redbrain: Europe, maybe?
[09:34:20] <Yurume> cf. https://xkcd.com/now/
[09:34:30] <eddyb> GMT would work
[09:34:38] <redbrain> Yurume: Yeah i live in northern ireland :)
[09:34:52] <redbrain> eddyb: i meant sorry
[09:34:56] <eddyb> hah, was going to say "UK would do"
[09:35:03] <kimundi> 10:30 here - definitly morning ;)
[09:35:05] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:35:17] <Yurume> 18:35, anti-morning here
[09:35:18] <eddyb> redbrain: where's the sorry coming from?
[09:35:42] <redbrain> eddyb: i meant to say that to you but i sent it to Yurume 
[09:35:47] <redbrain> i have to use a web irc at work it sucks
[09:36:01] <Yurume> nick completion failure :p 
[09:36:29] <Yurume> the completion algorithm sometimes do the overly cute things
[09:36:32] <eddyb> redbrain: ahh. it totally worked with Yurume saying "Europe, maybe"
[09:36:33] <Yurume> does*
[09:36:43] <redbrain> Ah yeah :P
[09:36:47] <eddyb> Yurume: we have too many edwards!!
[09:37:04] <eddyb> so ed can complete to 3 nicks or more now :(
[09:37:12] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[09:39:06] <eddyb> I have dillema... this week is supposed to be rust workweek, right? so why did I hear almost nothing from core devs yesterday?
[09:39:22] <eddyb> did I mess up my calendar? is it still weekend? I don't understand :P
[09:39:30] <Yurume> (or weekstart)
[09:39:38] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:39:48] <redbrain> am so happy that rust developers moved the memory allocation code into libstd/rt/ :D
[09:39:48] <eddyb> Yurume: do they hate mondays that much?
[09:39:59] <eddyb> redbrain: from?
[09:40:02] <Yurume> eddyb: I don't know about that
[09:40:13] <eddyb> redbrain: you're talking about the malloc/free wrappers, no?
[09:40:27] <Yurume> exchange_malloc etc?
[09:40:32] <redbrain> eddyb: yes i havent looked at that code for some time maybe a few months and it used to be in some c code
[09:40:44] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:40:47] <eddyb> try half an year for size
[09:41:05] <redbrain> eddyb: lol no way really i feel like i live under a brick
[09:41:20] <eddyb> redbrain: that probably has something to do with the rtio change, maybe
[09:41:55] <eddyb> but I thought that would be just io... wait, no, I remember we had a rustrt library written in C/C++ that we ripped out
[09:42:05] <eddyb> we ended up just linking against libunwind, AFAIK
[09:42:15] <redbrain> eddyb: ah ok it just makes things for the compiler much simpler dont need to worry about c/c++ as much in that way
[09:42:52] <eddyb> your only frontend advantage is making extern "c++" work possibly rather easy
[09:43:10] <eddyb> I still haven't figured a clean way of making clang my IR producing slave
[09:43:39] *** Joins: josh (josh@moz-244364B2.cable.virginm.net)
[09:43:54] <eddyb> it has nice APIs for AST manipulation and whatnot, but I need it to instantiate templates, inline-only functions, etc.
[09:44:34] <eddyb> once we figure that out, it's game over. we beat D at C++ support
[09:45:21] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:45:32] <eddyb> sure, you'd rather just have your entire codebase in Rust. but until we can actually write an OS and everything in it... things like Qt5 should be usable without a million wrappers
[09:45:33] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[09:45:37] <redbrain> eddyb: yeah that would be really nice
[09:46:17] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[09:46:20] <redbrain> i never really liked the idea of D seemed like c#/java but native maybe i dunno just seemed like a funny language no real reason to use it over existing hthings for me
[09:47:37] <eddyb> the syntax feels weird, the generic invocation looks like it is a hack to get rid of the C++ template invocation parsing problem, etc.
[09:48:28] *** Joins: nfroidure (nfroidure@moz-65B09039.w90-18.abo.wanadoo.fr)
[09:48:28] <eddyb> redbrain: let me share with you some of my pain. I just restarted firefox. 1.7GB -> 200MB, with the same tabs open
[09:48:47] <eddyb> I want my chrome where I can kill tabs as I please :(
[09:48:49] <redbrain> eddyb: holy crap
[09:49:15] <Yurume> I have some firefox tabs which crash the browser randomly from the background
[09:49:34] <Yurume> (i.e. not focused but crashes the browser anyway)
[09:49:35] <redbrain> yeah rust really would solve so much i like that it has a barrier for entry to some extent you can just write code like you can with so many languages 
[09:49:46] <eddyb> btw, that was enough to fill my RAM. and compiling rustc takes like 1.2GB, so yeah, I need control over things that use memory
[09:50:07] <redbrain> cant*
[09:50:25] <redbrain> i feel like in rust it rewards those who know what they are doing
[09:50:25] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[09:50:50] <eddyb> it pushes you towards the path of least resistance i.e. idiomatic code? though the errors can also lead you astray :P
[09:51:24] <eddyb> but really, Rust has simple semantics. I can't hold all of C++ in my head. I don't think I ever knew what move stuff did. but I knew in which situation to use them
[09:52:09] <redbrain> yeah at work our trading system is meant to be C++ but its really just C with classes here and there i think its too hard to use all of C++ and make it elegant
[09:52:14] <eddyb> I can tell you everything, maybe even down to precise ABI details (though you can always mix up the order of vtable and data in a trait object. DST will fix that, data first, erased info only after)
[09:53:23] <eddyb> there's no nooks and crannies, it's just neatly (implicitly) defined. once you learn it, you can do anything in it
[09:53:59] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[09:54:12] <eddyb> we can probably hammer the learning curve down, too
[09:54:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:54:43] *** Joins: vgeddes (vincent.ge@moz-CE3C0499.access.mtnbusiness.co.za)
[09:54:48] <eddyb> rewrite the reference manual so it's actually usable and can have Haskell-wiki-like type theory information for people who can read that
[09:55:18] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:55:53] <bvssvni> Rust teaches me programming :P
[09:55:54] <eddyb> add interactive visualizations of the analysis passes' results for,  e.g a lifetime guide
[09:56:28] <eddyb> once you see how it propagates, you can't really get it wrong. the error messages could be better, as always
[09:56:30] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[09:56:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:56:51] <redbrain> yeah i think lifetimes and borrowed pointers will be a hard thing to document i think for me i just had to write code and see what happened
[09:57:23] <eddyb> once you grasp them, they're so easy you can't teach another soul =))
[09:57:41] <eddyb> (or that might just be me with my distorted perceptions :P)
[09:58:03] *** Quits: alexherbo2 (alexherbo2@moz-1299A4B3.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[09:58:05] <redbrain> i think though people comming from managed languages might find it hard but maybe i might be wrong
[09:58:19] *** Joins: alexherbo2 (alexherbo2@moz-1299A4B3.w90-3.abo.wanadoo.fr)
[09:58:25] <eddyb> Rust should totally be a beginners' language
[09:58:39] <eddyb> I mean, we teach C++ (and it's just C with cin/cout) all over the place here
[09:58:56] <eddyb> I bet you I can crash almost every non-trivial program ever
[09:58:58] <bvssvni> just wrote an example for the module system for reddit https://gist.github.com/bvssvni/9343353
[09:59:06] <eddyb> including the ones winning in national contents
[09:59:10] <eddyb> *contests
[09:59:17] *** Joins: RustProof (Mibbit@moz-5A1D68AD.w92-163.abo.wanadoo.fr)
[09:59:18] <kimundi> Yeah, if the decision is between Rust as first language, and C++ as first language, I'd choose Rust
[09:59:30] <redbrain> eddyb: oh cool do you teach at a university?
[09:59:38] <kimundi> But there is something to be said about first learning how hard it is in practice to write C++...
[09:59:43] <eddyb> I meant "we" as in "this dreaded nation"
[09:59:51] <redbrain> eddyb: ah :P
[10:00:04] <eddyb> and highschool, actually
[10:00:16] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[10:00:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:00:39] <eddyb> so we wrote C++ and used str*
[10:00:48] *** Joins: jviereck (Adium@moz-7F99FDDF.ethz.ch)
[10:00:57] <eddyb> and... anyways. let's forget my low quality past
[10:02:03] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[10:02:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:02:09] * bvssvni afk
[10:02:13] *** Quits: jviereck (Adium@moz-7F99FDDF.ethz.ch) (Quit: Leaving.)
[10:02:24] <eddyb> but we ought to stop teaching disregard for safety and "everything goes"
[10:02:34] *** Joins: jviereck (Adium@moz-7F99FDDF.ethz.ch)
[10:03:04] <eddyb> also, bad APIs
[10:03:43] <eddyb> rust isn't perfect, but it sure is superior
[10:03:59] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:04:05] *** Quits: peterdn (chatzilla@moz-63996255.as13285.net) (Ping timeout)
[10:06:30] *** Joins: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP)
[10:07:11] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[10:12:28] *** Quits: jviereck (Adium@moz-7F99FDDF.ethz.ch) (Quit: Leaving.)
[10:12:28] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[10:13:07] <redbrain> eddyb: i agree the code base would make you violently ill that i work on at work
[10:13:56] <eddyb> redbrain: I sure hope it doesn't manage peoples' lives
[10:14:01] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[10:14:04] <eddyb> *people's
[10:14:44] <redbrain> some of the design decisions my god aparently udp is better than anything here so some guy a few years back wrote a socket api that uses udp but to see if packets are sent he wrote a pile of extra code to check that . so in the end he rewrote tcp lol and were fixign this and trying to get rid of it but its a nightmare because its used everywhere
[10:15:27] *** Quits: josh (josh@moz-244364B2.cable.virginm.net) (Quit: josh)
[10:19:50] <RustProof> I am trying to use dynamic libraries to extend a program but it's my first time. I have a segmentation fault when I call what I've loaded (Looks like that https://gist.github.com/Bastacyclop/7ccda55684a215bae933). Any ideas of what I'm doing wrong ?
[10:21:10] * eddyb used counter-opinion https://github.com/mozilla/rust/issues/9912#issuecomment-36609873
[10:21:20] <eddyb> let's see how effective it is
[10:21:52] <eddyb> RustProof: are you passing a structure by value?
[10:22:07] <eddyb> RustProof: that might not work :/
[10:22:39] <eddyb> a few other things... did you check the symbol isn't NULL?
[10:23:30] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[10:23:58] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:24:06] <RustProof> eddyb: Hmm no I thought it was handled by the module, I'll check that
[10:24:27] <RustProof> eddyb: but if it is NULL was does it mean ?
[10:24:50] <eddyb> that it isn't found, in general
[10:24:59] <eddyb> RustProof: what does the DynamicLib give you back?
[10:25:18] <eddyb> it's an Option it means it handled NULL itself
[10:25:26] <RustProof> eddyb: Result
[10:26:00] <eddyb> ahh nevermind me then. still, you could print the pointer value and see if it's not something silly
[10:26:38] <eddyb> RustProof: and see my first comment, about Parameters and passing by value
[10:26:39] *** Joins: josh (josh@moz-203AC8B6.in-addr.btopenworld.com)
[10:27:23] *** Quits: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de) (Ping timeout)
[10:29:33] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[10:31:09] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[10:31:48] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[10:33:16] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:33:33] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[10:34:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[10:35:31] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:36:38] <RustProof> passing by pointer is not helping
[10:36:52] *** Quits: josh (josh@moz-203AC8B6.in-addr.btopenworld.com) (Quit: josh)
[10:37:12] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[10:42:20] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[10:43:38] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[10:44:59] *** Quits: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP) (Ping timeout)
[10:45:39] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[10:46:51] <huon> RustProof: you could run it under valgrind and/or gdb to see where/how it's crashing
[10:47:18] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[10:47:37] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[10:47:57] <RustProof> huon: #0 in ?? and #1 in the init() calling the C init()
[10:49:18] <huon> RustProof: what happens if you just try to call a `void foo(void)` function via dynamic loading?
[10:49:29] <huon> (i.e. is it related to the struct, etc?)
[10:49:36] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[10:50:05] <RustProof> I first tried with void foo(Point) and it worked
[10:50:08] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[10:51:36] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:52:53] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[10:53:13] <huon> RustProof: what about `void foo(Parameters)`?
[10:53:16] <mindcat> any rust i18n library?
[10:53:18] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[10:54:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:55:34] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[10:55:35] <Yurume> mindcat: except for Unicode handling, there are no i18n libraries I know of
[10:55:50] <RustProof> huon: Well I just re- checked void foo(void) and it is not working, maybe i broke something :/
[10:56:03] <mindcat> Yurume: ok..
[10:56:04] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:56:12] <Yurume> there are some Unicode handling libraries for different tasks, e.g. rust-encoding for encoding conversion, rust-grapheme (not up-to-date) for text segmentation etc
[10:56:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:56:57] <huon> RustProof: :(
[10:57:23] <mindcat> Yurume: so it seem I still need gettext
[10:57:33] <Yurume> I think there is rust-gettext
[10:57:36] <Yurume> don't know of its status
[10:57:39] <eddyb> RustProof: you need to valgrind those nasal demons out
[10:57:44] *** Joins: josh (josh@moz-203AC8B6.in-addr.btopenworld.com)
[10:57:47] <mindcat> Yurume: woow
[10:57:52] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[10:57:56] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:58:04] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[10:58:10] <eddyb> also, this image http://www.cs.tau.ac.il/~nachumd/horror.html
[10:58:26] <Yurume> uh, sorry, Github does not show any result for rust-gettext
[10:58:44] <mindcat> Yurume: yes
[10:58:59] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[10:59:42] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:01:44] *** Quits: kvanb (kvanb@5E9D2ECA.B8AECADD.1611EE05.IP) (Ping timeout)
[11:02:10] *** Quits: josh (josh@moz-203AC8B6.in-addr.btopenworld.com) (Quit: josh)
[11:02:44] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[11:02:52] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[11:03:42] <mindcat> and rust-yaml?
[11:03:45] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[11:04:07] <Yurume> I didn't heard of that
[11:04:11] <Yurume> there is rust-toml I think
[11:05:20] <mindcat> no, I must build rust-yaml
[11:05:56] <Yurume> hmm, it seems there is one: https://github.com/Stibbons/rust-yaml but not up to date.
[11:06:07] <Yurume> ah, that wasn't a binding
[11:06:10] <Yurume> nevermind
[11:06:10] <mindcat> yea
[11:06:58] <mindcat> I am try port yaml-cpp
[11:07:12] <mindcat> If I can :D
[11:07:45] <Yurume> if it does not have a C binding, you need to wrap it with a C interface first
[11:08:02] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[11:08:04] <mindcat> https://code.google.com/p/yaml-cpp/source/browse/src/binary.cpp
[11:08:17] <mindcat> I want to port yaml-cpp XD
[11:08:36] <mindcat> or, clone?
[11:08:55] *** Joins: jviereck (Adium@moz-7F99FDDF.ethz.ch)
[11:09:04] <Yurume> depends on your time budget and goal?
[11:09:14] *** Quits: jviereck (Adium@moz-7F99FDDF.ethz.ch) (Max SendQ exceeded)
[11:09:23] <Yurume> rewriting the existing library is better for safety but is also a hard work
[11:09:46] <mindcat> well, I don't have any time limit
[11:10:11] *** Joins: jviereck (Adium@moz-5F2A758D.ethz.ch)
[11:10:23] <mindcat> Yurume: I just try it :D
[11:10:28] <Yurume> making a binding to the existing library is simpler but both the library and FFI may have serious bugs
[11:10:39] <Yurume> and not always directly possible (if it is in C++)
[11:11:13] <Yurume> the working strategy is to make a binding first, and to port if you really want to do that
[11:11:35] *** Joins: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de)
[11:11:37] <Yurume> but if you want, porting can be a great way to learn things (both Rust and library's inner working)
[11:12:09] <mindcat> Yurume: so I am learning :D
[11:13:39] <mindcat> Yurume: here, https://github.com/yaml/libyaml/tree/master/src
[11:13:53] <mindcat> Yurume: it let me think that is not so much hard
[11:15:04] <huon> (theoretically our plain C FFI code doesn't have too many bugs: every Rust program relies on it for allocations, etc.)
[11:15:15] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:15:18] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[11:15:40] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[11:15:48] <Yurume> huon: binding's bug, not Rust FFI's bug.
[11:16:20] <huon> oh, right :0
[11:16:22] <huon> * :)
[11:16:50] <mindcat> ABI is not perfect right?
[11:17:07] <Yurume> mindcat: it's 10K lines worth of C code. I'm sure that the converted Rust code would be in the similar size if not much larger.
[11:17:21] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[11:17:24] <huon> Yurume: larger?
[11:17:34] <Yurume> and some C idioms and architectures and strategies do not work in Rust, you should be prepared of restructuring
[11:17:37] <mindcat> Yurume: take a month, then done it XD
[11:17:49] <Yurume> huon: 2.5x for my project :)
[11:18:12] <huon> mindcat: Yurume was meaning writing a binding definition that's incorrect, rather than any problem with ABI/the compiler
[11:18:15] <huon> Yurume: o_O
[11:18:43] <huon> Yurume: was it a straight transliteration of the C code?
[11:18:53] <Yurume> huon: my original C code was considerably dense, so that explains the code "bloat"
[11:19:31] <Yurume> in turn I finally got the sort of proof for correctness though
[11:19:56] *** Joins: jackneill (jackneill@moz-68FD19F9.pool.digikabel.hu)
[11:20:21] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[11:20:27] <Yurume> huon: https://github.com/lifthrasiir/angolmois/blob/master/angolmois.c vs. https://github.com/lifthrasiir/angolmois-rust/blob/master/angolmois.rs if you are interested
[11:20:28] <RustProof> What's the meaning of 'Syscall param read(buf) points to unaddressable byte(s)' ?
[11:20:51] <Yurume> RustProof: example code? that sounds seriously broken unless you are calling read() directly.
[11:21:31] <RustProof> com from loading a dynamic library
[11:21:41] <Yurume> huon: both have almost direct correspondences, but some needed a great restructuring, and some others are simply bad practices in Rust :p
[11:21:56] <Yurume> uh... COM? in Windows?
[11:22:11] <RustProof> come*
[11:22:16] <huon> Yurume: holy mac[a]ro-ni batman: https://github.com/lifthrasiir/angolmois/blob/master/angolmois.c#L80-L114
[11:23:06] <Yurume> huon: that deserves its own documentation: https://gist.github.com/lifthrasiir/4422136
[11:23:28] *** nical is now known as nical|lunch
[11:24:18] <mindcat> Yurume: damn, I can't read the C++ source code. https://code.google.com/p/yaml-cpp/source/browse/include/yaml-cpp/node/detail/impl.h
[11:24:41] <mindcat> so I have to read here http://www.yaml.org/spec/1.2/spec.html
[11:25:01] <Yurume> good luck, afaik YAML is quite a big spec :S
[11:25:10] <Yurume> (one of the reason I don't like YAML)
[11:25:11] <huon> Yurume: neat
[11:25:50] <huon> Yurume: also, the 800 line `mod util` is just work-arounds for library/compiler deficiencies, so that shouldn't count :P
[11:26:02] *** Quits: Ferreus (ferreus@moz-7CCF6380.dip0.t-ipconnect.de) (Ping timeout)
[11:26:08] <Yurume> huon: yes, 2.5x count does not include them.
[11:26:21] <huon> oh, I guess so
[11:26:28] <huon> and the rust code is nicely commented too
[11:26:37] <Yurume> and lots of comments
[11:26:44] <mindcat> rusti: fn YAML() -> ~str {}
[11:26:45] -rusti- <anon>:10:9: 10:29 error: not all control paths return a value
[11:26:45] -rusti- <anon>:10         fn YAML() -> ~str {}
[11:26:45] -rusti-                   ^~~~~~~~~~~~~~~~~~~~
[11:26:45] -rusti- error: aborting due to previous error
[11:26:45] -rusti- application terminated with error code 101
[11:27:00] <mindcat> rusti: "abcdefg".replace("abc","defg")
[11:27:01] -rusti- ~"defgdefg"
[11:27:39] <mindcat> rusti: fn YAML() -> ~str {"YAML Ain’t Markup Language".replace("YAML",YAML())}; YAML()
[11:27:39] -rusti- task '<main>' has overflowed its stack
[11:27:40] -rusti- application terminated abnormally with signal 4 (Illegal instruction)
[11:27:50] <mindcat> XD overflowed
[11:28:10] <huon> Yurume: is single-file a design goal?
[11:28:13] <Yurume> but note the error message, it segfaults gracefully.
[11:28:18] <eddyb> that's infinite recursion
[11:28:38] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[11:28:56] <Yurume> huon: for the comparison with C code. there is now an (greatly) expanded project from the converted Rust code.
[11:28:57] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:28:58] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[11:29:04] *** Quits: marianoguerra (marianogue@moz-EF634523.dip0.t-ipconnect.de) (Ping timeout)
[11:29:07] <Yurume> huon: i.e. https://github.com/snrs/sonorous/
[11:29:50] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[11:29:53] <huon> Yurume: I guess the Rust code is easier to maintain?
[11:30:13] <Yurume> sure, though my C code was optimized for size (mostly) so that's another factor.
[11:30:13] <mindcat> rusti: fn ab() {ba() }; fn ba() { println!("easy."); ab()}; ba()
[11:30:14] -rusti- more than 10000 lines of output, bailing out
[11:30:20] <mindcat> lol
[11:30:24] <huon> (although I guess the C language is changing rather slower than Rust, and so doesn't require much maintainence anyway.)
[11:30:53] <Yurume> mindcat: you seems to enjoy rusti, but I'd rather suggest using your own copy of rust to experiment with :)
[11:30:58] <huon> Yurume: Github says " C 85.7% " for sonorous :P
[11:31:14] <huon> oh, must be the inline sqlite3
[11:31:18] <Yurume> ah, sqlite3 :p
[11:31:26] <mindcat> Yurume: does rusti have source code?
[11:31:27] <Yurume> it is 12K lines of pure Rust code
[11:31:51] <huon> Yurume: hm?
[11:32:04] <huon> Yurume: https://github.com/snrs/sonorous/tree/master/libs/sqlite3 ?
[11:32:05] <Yurume> not sqlite.
[11:32:16] <Yurume> Sonorous is*
[11:32:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[11:32:32] <Yurume> mindcat: I guess it is based on playpen, https://github.com/thestinger/rust-playpen and https://github.com/thestinger/playpen
[11:32:44] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[11:32:54] *** Joins: stumpart (stumpart@moz-93393D0A.hsd1.ca.comcast.net)
[11:32:55] <Yurume> there is no IRC bot however, and actually I think you can just experiment with rustc.
[11:32:59] <huon> Yurume: oh, ok... that's quite a lot of lines
[11:33:08] <huon> more than I can count on one hand!
[11:33:13] <Yurume> (since it runs on your own computer)
[11:33:21] *** Joins: hhhhhhhhhh (mike@moz-C9C8EDC8.stcatz.ox.ac.uk)
[11:33:59] <Yurume> huon: certainly more than 2^12? :)
[11:34:24] <Yurume> (binary fingers plus the hand orientations)
[11:34:43] <huon> ooh, hand orientations
[11:34:52] <huon> I hand't thought of that one
[11:34:55] <huon> *hadn, heh
[11:36:03] <huon> you can get an extra bit by cross your hands over too
[11:36:10] <Yurume> lol
[11:36:23] <Yurume> but anyway, it was much better than my C++ experience
[11:36:41] <huon> that's why you're still here, I guess? :)
[11:36:55] <Yurume> I've tried the similar project years ago, in C++, and I ended up writing more than 30K lines of C++ mess that does not simply work...
[11:37:18] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:37:48] *** Quits: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de) (Ping timeout)
[11:38:19] *** Joins: leowoe (Leo@moz-CBB8D564.dip0.t-ipconnect.de)
[11:38:45] *** Joins: mno2 (mno2@76ED98CE.BEBC37B7.DA359910.IP)
[11:39:19] <huon> <3 helpful compilers
[11:39:37] <Yurume> to be fair, it compiles but it is hard to debug :p
[11:39:54] <Yurume> and it took tons of code to get things work
[11:40:17] <huon> Well, I mean, the Rust compiler helps you so much you don't need debugging
[11:40:28] <huon> (... much)
[11:40:41] <Yurume> to be fair in that regard, I started with Rust 0.5 and I've ran into lots of compiler bugs :p
[11:40:44] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:40:56] <huon> compiler bugs are the best bugs! \o/
[11:41:02] <Yurume> but it was much easier to get it work than C++
[11:41:17] <huon> also, now that we have exportable macros you should put your lex macro somewhere
[11:41:31] <huon> s/should/could/
[11:41:33] *** Quits: jviereck (Adium@moz-5F2A758D.ethz.ch) (Quit: Leaving.)
[11:41:52] <eddyb> huon: bah, screw conventions, I'm going to stop putting ::new() everywhere
[11:42:00] *** Joins: Ferreus (ferreus@moz-3AB29841.dip0.t-ipconnect.de)
[11:42:04] <huon> drop(eddyb)
[11:42:05] <eddyb> this kind of code has to be fluent
[11:42:12] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[11:42:19] <Yurume> and that gave lots of opportunities to think about architectures and designs (I've written the same code three times, so I do have some insight about that of course, but anyway.)
[11:42:23] <huon> unsafe { libc::free(eddyb) }
[11:42:27] <huon> (etc.)
[11:42:37] <eddyb> and to be fair, Expr::new(x) is more like Expr::from(x)
[11:42:42] <huon> eddyb: but yeah, writing ::new` a lot is annoying if you're constructing things
[11:42:45] <huon> a lot
[11:43:13] <eddyb> huon: I think I'll rename my If variant to IfStmt and make If an overloaded constructor
[11:43:28] <eddyb> so you can do If(cond, stmt) or If(cond, ~[stmts])
[11:43:45] <Yurume> huon: I'm seriously thinking about making lex! a general library which can be somewhat customized, I was asked about some alternative to scanf from time to time and there is still no satisfying answer.
[11:43:57] <eddyb> bleah, there's no [..a, ..b] in rust
[11:44:06] *** Joins: josh (josh@moz-C1D9FC5F.meeting.ietf.org)
[11:44:06] <Yurume> but in the current form it is an ad hoc macro mumbo-jumbo :p
[11:44:14] <eddyb> I don't really care about perf here, just readability and compactness
[11:44:15] <huon> Yurume: your macro is the only thing I know of
[11:44:29] <huon> Yurume: I guess it could be a proper syntax extension like format!() to do parsing
[11:44:32] <Yurume> procedural macros may be much more helpful
[11:44:34] <Yurume> yeah
[11:44:36] <huon> (string parsing)
[11:44:47] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[11:44:49] <huon> you could even reuse the std::fmt format string parser
[11:44:55] *** Joins: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP)
[11:45:10] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[11:45:20] <eddyb> op!("0001001011111111111100L1Rm__", cx|L, Rm|~[If(L, Mov(cx.lr(), cx.pc() + 4i32)), Mov(cx.pc(), Rm)]);
[11:46:00] <eddyb> so this should compile... I miss my _ and $ from ES6... they made for interesting devices
[11:46:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[11:46:44] <eddyb> huon: what's it called when you try to reach perl obfuscation levels of compactness yet keep the code readable?
[11:46:55] <huon> perl
[11:47:03] <eddyb> perl isn't readable
[11:47:13] <eddyb> I mean.. I think Haskell can do a bit better here, at the cost of me not understanding how anything works
[11:47:30] <eddyb> (in my own code)
[11:47:59] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[11:49:41] <huon> also, "obfuscation" and "readable" pretty much don't work in a sentence together at all :P
[11:50:23] <eddyb> compact like an obfuscated perl contest winner yet not obfuscated at all
[11:50:34] <huon> s/ +//
[11:50:58] <huon> "elegant"
[11:51:11] <eddyb> huon: bleah, I have to use method calls, because the types are non-copyable :/
[11:51:22] <huon> assuming compact means just what's needed and no noise
[11:51:35] <eddyb> yeah, elegant works :)
[11:51:37] * huon wonders what method calls and Pod-ness have to do with each other
[11:51:50] <eddyb> the method calls can returning a clone of an Rc
[11:51:58] <eddyb> *can return. while fields would require .clone()
[11:52:09] <eddyb> opt-in last use move would be helpful right about now
[11:52:55] *** Quits: vgeddes (vincent.ge@moz-CE3C0499.access.mtnbusiness.co.za) (Ping timeout)
[11:53:17] <kimundi> eddyb: .move() //trollface
[11:53:55] <eddyb> kimundi: I know, right? fn move(&move self) -> Self {*self}
[11:54:03] <huon> fn move(self) -> Rc<T> { self } ?
[11:54:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:54:24] <huon> we could define `std::move(...)` to make the C++11 programmers feel at ahome
[11:54:35] <eddyb> huon: no, calling a self method would copy
[11:54:43] <huon> eddyb: copy?
[11:54:58] <eddyb> that's why you would call move, in kimundi's trolly scenario
[11:55:01] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[11:55:07] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[11:55:15] <huon> why would self and &move self act any differently?
[11:55:33] <eddyb> (not in actual last use analysis, which I was talking about)
[11:55:53] <eddyb> huon: &move requires ownership. think by-value with @T
[11:56:06] <huon> so does by-val self?
[11:56:14] * huon is so confused
[11:56:22] <eddyb> unless you clone everything that isn't Pod
[11:56:27] <eddyb> by default
[11:56:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:56:38] <eddyb> in a parallel universe. this whole thing was a joke
[11:56:59] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[11:57:18] <kimundi> Hey, afaik &move is considered as a real thing to implement in Rust, for stuff like destructors
[11:57:32] <kimundi> Well, discussed at least
[11:57:46] <eddyb> kimundi: yupp
[11:58:06] <eddyb> that's why I used it... it would override the imaginary clone by default
[11:58:19] <huon> it's seems that it's past joke o'clock here
[11:58:24] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[11:58:39] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[11:58:52] <eddyb> huon: #2amfunneh you mean?
[11:58:55] *** Quits: mno2 (mno2@76ED98CE.BEBC37B7.DA359910.IP) (Quit: mno2)
[11:59:39] <huon> it's only 11pm :P
[11:59:54] <kimundi> 1pm
[12:00:18] <eddyb> where did that subreddit go :/?
[12:00:34] <kimundi> eddyb: hm?
[12:00:39] <eddyb> ahh I was trying even numbers http://www.reddit.com/r/3amjokes/
[12:01:14] * kimundi groans
[12:02:00] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[12:02:14] *** Joins: mno2 (mno2@76ED98CE.BEBC37B7.DA359910.IP)
[12:02:17] *** nical|lunch is now known as nical
[12:02:53] <eddyb> this one deserves some credit http://www.reddit.com/r/3amjokes/comments/1zb653/why_did_the_calculator_run_out_of_money_for/
[12:02:58] <huon> Why did the bicycle fall over?
[12:03:03] <mindcat> why we develop format? can we create a language then compile that format? XD
[12:03:17] <huon> It was two tyred
[12:04:00] *** Joins: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP)
[12:04:10] <kimundi> mindcat: hm? what do you mean?
[12:04:54] <mindcat> kimundi: do you know protobuf?
[12:05:42] <eddyb> huon: it's a bit hard to get all of those, as a non-native. odd words that I may not have encountered in my entire life etc.
[12:05:53] *** Joins: mindcat_ (mindcat@32499D8E.5E589B8A.DBA68950.IP)
[12:06:03] *** Quits: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP) (Ping timeout)
[12:06:16] *** Quits: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP) (Ping timeout)
[12:06:50] *** Quits: mindcat (mindcat@33011F67.90785442.291A146C.IP) (Ping timeout)
[12:07:17] <huon> eddyb: yeah; and many of them rely on pronunciation (e.g. some of them I don't get because my accent is different)
[12:08:51] *** Quits: parcha (quassel@moz-1A772EE6.hsd1.ma.comcast.net) (Ping timeout)
[12:09:07] <eddyb> "I don't want to be o-ba-ma self!" hehe, taht requires "o".equiv("all")
[12:09:12] <kimundi> Seriously - I read through them and most of them are culturally intranslateable
[12:11:04] <huon> http://www.reddit.com/r/3amjokes/top/ seems to be less pronunciation dependent (still doesn't make them cross-culturally funny though)
[12:11:14] <huon> ... they need an #[inline]
[12:11:41] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[12:11:50] <eddyb> RES has "expand all" but it may work with just images
[12:12:37] <eddyb> huon: oh dear I thought this was part of the sidebar http://static.adzrk.net/Advertisers/455c68ab895348e68eee96abf23b2c02.jpg
[12:12:41] <eddyb> and not an actual ad
[12:13:23] *** Joins: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP)
[12:13:28] <huon> eurgh, someone should photoshop away that comma after 'because'
[12:14:01] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[12:14:51] <eddyb> once we get OpenCL support in Rust I'll try to dive into mass-scale image processing again
[12:15:04] *** Quits: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP) (Ping timeout)
[12:15:13] <mindcat_> Rust OpenCL support?
[12:15:19] <eddyb> via LLVM
[12:15:22] <huon> https://github.com/eholk/rust-opencl/
[12:15:39] <huon> oooh, even has docs: http://www.rust-ci.org/eholk/rust-opencl/doc/OpenCL/
[12:15:50] <eddyb> huon: I mean, writing Rust to run on GPUs
[12:15:59] <eddyb> [[[T]]] should come in handy
[12:16:01] *** Joins: mib_iodccm (Mibbit@moz-4CEE94D2.campus.bath.ac.uk)
[12:16:13] <eddyb> DSS = Dynamically Sized Spider
[12:16:14] *** Quits: mib_iodccm (Mibbit@moz-4CEE94D2.campus.bath.ac.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[12:16:30] <huon> ->o<-
[12:16:35] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[12:16:38] <huon> -->O<--
[12:16:53] * huon has run out of dynamic range for his 6-legged spiders
[12:16:55] <eddyb> you can go past that in my IRC client
[12:17:05] <eddyb> 5 lines tall characters
[12:17:17] * mindcat_ 0w0
[12:17:28] <eddyb> (unicode non-printable characters. you put one by mistake in a message *I know*)
[12:17:55] <eddyb> I've started a rather ambitious project last summer, but I didn't get to implement anything other than a dumb directional frame diff
[12:18:06] <eddyb> which is probably 5 lines of code in OpenCV or something
[12:18:20] <huon> rusti: println!("\x10")
[12:18:20] -rusti- 
[12:18:20] -rusti- ()
[12:18:31] <eddyb> that's one of the smaller ones
[12:18:35] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[12:18:39] * huon can't tell
[12:18:58] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:19:02] <eddyb> rusti: println!("{}", 0x10u8 as char)
[12:19:03] -rusti- 
[12:19:03] -rusti- ()
[12:19:12] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[12:19:21] * huon would try more, but doesn't feel like being obnoxious :P
[12:19:38] <eddyb> huon: no need to be!
[12:19:40] <kimundi> hm, my client shows me two codepoint boxes
[12:19:59] *** Quits: stumpart (stumpart@moz-93393D0A.hsd1.ca.comcast.net) (Quit: stumpart)
[12:20:00] <kimundi> but as far as I can see only one should be there?
[12:20:15] <eddyb> rusti: println!("{}", std::iter::range_inclusive(0u8, 255).map(|x| x as char).collect::<~str>())
[12:20:16] -rusti- pastebinned 3 lines of output: http://sprunge.us/jFcV
[12:20:20] <kimundi> rusti: println!("\x10\x10")
[12:20:21] -rusti- 
[12:20:21] -rusti- ()
[12:20:26] *** Quits: leowoe (Leo@moz-CBB8D564.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:20:26] <kimundi> that gives 4, hm...
[12:20:35] <eddyb> kimundi: I see two for each \x10 as well. it's odd
[12:20:43] <eddyb> rusti: print!("{}", std::iter::range_inclusive(0u8, 255).map(|x| x as char).collect::<~str>())
[12:20:44] -rusti- pastebinned 2 lines of output: http://sprunge.us/hCMT
[12:20:46] <eddyb> bah!
[12:21:05] <eddyb> rusti: print!("{}", std::iter::range_inclusive(0u8, 255).map(|x| x as char).filter(|x| x != '\n').collect::<~str>())
[12:21:06] -rusti- pastebinned 9 lines of output: http://sprunge.us/NWBZ
[12:21:08] *** Joins: parcha (quassel@moz-1A772EE6.hsd1.ma.comcast.net)
[12:21:20] <eddyb> rusti: print!("{}", std::iter::range_inclusive(0u8, 255).map(|x| x as char).filter(|&x| x != '\n').collect::<~str>())
[12:21:21] -rusti- pastebinned 1 lines of output: http://sprunge.us/EVPE
[12:21:21] <huon> rusti: print!("{}", std::iter::range_inclusive(0u32, 0xd800).map(|x| std::char::from_u32(x).unwrap()).collect::<~str>())
[12:21:22] -rusti- task '<main>' failed at 'called `Option::unwrap()` on a `None` value', /build/rust-git/src/rust/src/libstd/option.rs:149
[12:21:22] -rusti- application terminated with error code 101
[12:21:26] <eddyb> :(
[12:21:31] <huon> rusti: print!("{}", range(0u32, 0xd800).map(|x| std::char::from_u32(x).unwrap()).collect::<~str>())
[12:21:37] -rusti- line longer than 10000 characters, bailing out
[12:21:45] <huon> rusti: print!("{}", range(0u32, 0x800).map(|x| std::char::from_u32(x).unwrap()).collect::<~str>())
[12:21:46] -rusti- pastebinned 2 lines of output: http://sprunge.us/NQdA
[12:21:49] *** Quits: mixi (mixi@moz-DBD8904A.org) (Input/output error)
[12:21:50] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[12:21:50] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[12:21:58] *** Joins: mixi (mixi@moz-DBD8904A.org)
[12:21:59] <kimundi> haha
[12:22:00] <eddyb> rusti: print!("{}", std::iter::range_inclusive(0u8, 0x40).map(|x| x as char).filter(|&x| x != '\n').collect::<~str>())
[12:22:01] -rusti- 0	
[12:22:01] -rusti-  !"#$%&'()*+,-./0123456789:;<=>?@()
[12:22:11] <eddyb> okay, this is good
[12:22:29] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[12:22:39] <eddyb> rusti: print!("{}", std::iter::range_inclusive(0x70u8, 0xb0).map(|x| x as char).filter(|&x| x != '\n').collect::<~str>())
[12:22:40] -rusti- pqrstuvwxyz{|}~ ¡¢£¤¥¦§¨©ª«¬­®¯°()
[12:22:43] <kimundi> suddenly irc escape codes?
[12:22:58] <eddyb> kimundi: that explains the strikethrough
[12:24:04] <eddyb> kimundi, huon: http://i.imgur.com/xZX6hU8.png
[12:24:19] <kimundi> lol
[12:24:20] <eddyb> it used to be much crazier than that
[12:24:29] <ion> rusti: print!("\x01HELLO\x01")
[12:24:30] -rusti- HELLO()
[12:24:30] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[12:24:49] <eddyb> I see  characters
[12:25:12] <kimundi> I don't
[12:25:23] <eddyb> the ` after 0 in the first line of the rusti notice after your haha
[12:25:41] <eddyb> rusti: print!("\x02HELLO\x02")
[12:25:42] -rusti- HELLO()
[12:25:46] <eddyb> now that's bold :D
[12:25:48] *** Joins: mindcat (mindcat@B66F6703.B0488C42.F956842C.IP)
[12:25:55] <ion> From mine: ti142430  mozilla         --   CTCP reply from rusti: HELLO
[12:25:56] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:26:08] *** Quits: mindcat_ (mindcat@32499D8E.5E589B8A.DBA68950.IP) (Ping timeout)
[12:26:12] <eddyb> ion: haha wat?
[12:26:26] <eddyb> rusti: print!("\x02HELLO\x02\r\nQUIT :")
[12:26:27] -rusti- HELLO
[12:26:27] -rusti- QUIT :()
[12:26:40] <ion> That’s how you construct a CTCP reply. NOTICE foo :\x01HELLO\x01
[12:26:45] <eddyb> okay, so it's escaped
[12:27:00] <eddyb> ion: I think my client required a CTCP request in the first place
[12:27:12] *** Joins: marianoguerra (marianogue@moz-7C85CAA0.dip0.t-ipconnect.de)
[12:27:15] <eddyb> *requires
[12:27:19] <kimundi> yeah, it uses a library that protects agains that - but apparently allows escape codes for styles
[12:27:30] <kimundi> hm, does that mean it can do color?
[12:27:39] <eddyb> maybe. my notice is that yellow
[12:27:56] <eddyb> rusti: print!("\x02\x033HELLO")
[12:27:57] -rusti- 3HELLO()
[12:28:01] <eddyb> \o/
[12:28:08] <kimundi> thats green here :)
[12:28:20] <eddyb> kimundi: that means we can have error styling
[12:28:26] <kimundi> quick, someone write a bascule replacement script to run on friday!
[12:28:29] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[12:28:39] *** Quits: mindcat (mindcat@B66F6703.B0488C42.F956842C.IP) (Ping timeout)
[12:29:20] <ion> rusti: print!("\x0302,07hello")
[12:29:21] -rusti- 02,07hello()
[12:29:38] <Taneb> Does Rust do tail call elimination?
[12:29:48] <kimundi> Taneb: not guaranteed
[12:29:49] <eddyb> Taneb: not by design, LLVM does though
[12:29:51] <huon> rusti: println!("\x01ACTION dances\x01")
[12:29:52] -rusti- ()
[12:29:55] <Taneb> Okay
[12:30:05] <eddyb> \x01 in notices doesn't work here
[12:30:06] <hhhhhhhhhh> i am having trouble getting types to match up in my code (http://ix.io/aVg) - specifically the `minS = Some( *shape )` line
[12:30:21] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[12:30:24] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[12:30:25] <huon> Taneb: LLVM does sibling call optimisation for Rust code: http://llvm.org/docs/CodeGenerator.html#sibling-call-optimization
[12:30:36] <hhhhhhhhhh> "error: cannot move out of dereference of `&`-pointer"
[12:30:47] *** Joins: mindcat (mindcat@F6728681.7EE3DE8.F956842C.IP)
[12:31:03] <eddyb> rusti: print!("{}", "rainbow".chars().enumerate().map(|(i, x)| {let s = ~"\x03"; s.push_str(i.to_str()), s.push_char(x); s}).to_owned_vec().concat())
[12:31:04] -rusti- pastebinned 4 lines of output: http://sprunge.us/dAFA
[12:31:15] <huon> eddyb: the \x01's are delimiters there
[12:31:15] <eddyb> rusti: print!("{}", "rainbow".chars().enumerate().map(|(i, x)| {let s = ~"\x03"; s.push_str(i.to_str()); s.push_char(x); s}).to_owned_vec().concat())
[12:31:16] -rusti- pastebinned 16 lines of output: http://sprunge.us/IVgd
[12:31:32] <eddyb> rusti: print!("{}", "rainbow".chars().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str(i.to_str()); s.push_char(x); s}).to_owned_vec().concat())
[12:31:33] -rusti- 0r1a2i3n4b5o6w()
[12:31:41] <eddyb> *I tried*
[12:31:44] <eddyb> rusti: print!("{}", "rainbow".chars().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str(i.to_str()); s.push_char(x); s}).to_owned_vec().concat()) 
[12:31:45] -rusti- 0r1a2i3n4b5o6w()
[12:31:47] <eddyb> OOPS
[12:31:48] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[12:31:55] <mindcat> what?
[12:32:36] <eddyb> rusti: print!("{}", "rainbow-pretty-please".chars().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x); s}).to_owned_vec().concat()) ""
[12:32:36] -rusti- 0r1a2i3n4b5o6w7-8p9r10e11t12t13y14-15p0l1e2a3s4e""
[12:32:45] <huon> eddyb: it's rainbow for me
[12:32:50] <ion> ditto
[12:32:52] <mindcat> yea
[12:33:01] <mindcat> it is rainbow for me
[12:33:15] <huon> hhhhhhhhhh: you can't move out of a & pointer: it's borrowed and stealing from something you've borrowed is impolite :P
[12:33:16] <eddyb> how do I make something simple that doesn't print anything?
[12:33:23] <eddyb> rusti: print!("{}", "rainbow-pretty-please".chars().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x); s}).to_owned_vec().concat()) return;""
[12:33:24] <huon> ()
[12:33:24] -rusti- pastebinned 8 lines of output: http://sprunge.us/eQPJ
[12:33:33] <eddyb> huon: () prints ()
[12:34:19] <huon> rusti: if true { return }
[12:34:31] <kimundi> rusti: ""
[12:34:32] -rusti- ""
[12:34:36] <hhhhhhhhhh> huon: what would be the correct way to write this code in rust
[12:34:37] <eddyb> huon: thanks :D
[12:34:44] <eddyb> rusti: print!("{}", "rainbow-pretty-please".chars().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x); s}).to_owned_vec().concat()) if true {return}
[12:34:44] -rusti- 0r1a2i3n4b5o6w7-8p9r10e11t12t13y14-15p0l1e2a3s4e
[12:34:47] *** Joins: MP2E (cray@moz-EB1E242D.lv.lv.cox.net)
[12:35:03] <huon> hhhhhhhhhh: have intersection store a &'a Shape
[12:35:07] <eddyb> 4<3
[12:35:10] <huon> and put the reference straight into the option
[12:35:37] <kimundi> eddyb: Now let the rainbow skip white and black, andmake it span the whole text
[12:35:39] <huon> intersection would then become `fn intersection<'a>(&'a self, ...) -> Intersection<'a> { ... }`
[12:35:41] <mindcat> print!("{}", "gauweoguiowabguowenfoiuaewoipfkewohj80gwahi".chars().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x);  s}).to_owned_vec().concat()) if true {return}
[12:35:55] <mindcat> rusti: print!("{}", "gauweoguiowabguowenfoiuaewoipfkewohj80gwahi".chars().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x);  s}).to_owned_vec().concat()) if true {return}
[12:35:56] -rusti- 0g1a2u3w4e5o6g7u8i9o10w11a12b13g14u15o0w1e2n3f4o5i6u7a8e9w10o11i12p13f14k15e0w1o2h3j48506g7w8a9h10i
[12:36:02] <mindcat> XD
[12:36:06] <hhhhhhhhhh> huon: k guess i need to read about lifetimes :d
[12:36:10] <huon> hhhhhhhhhh: (I mean `Option<Intersection<'a>>)
[12:36:10] <Ms2ger> Alright, kids :)
[12:36:12] *** Joins: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de)
[12:36:53] <huon> hhhhhhhhhh: btw, you can write `minS.map(|shape| Intersection { shape: shape, pos: ..., t: ...})` instead of the match at the bottom
[12:37:22] <huon> hhhhhhhhhh: also, unless `Shape` is *huge* (or a trait), I would recommend just storing `~[Shape]`, rather than `~[~Shape]`
[12:37:26] <hhhhhhhhhh> huon: yea i figured i'd done that crappily
[12:37:29] <hhhhhhhhhh> Shape is a trait
[12:37:33] <huon> oh, ok
[12:37:59] <huon> yeah, I'd write `let minS: Option<&'a Shape> = None;`
[12:38:13] <eddyb> rusti: print!("{}", std::iter::count(0, 16).map(|x| x % 16).filter(|&x| x > 1).zip("rainbow-pretty-please".chars()).map(|(i, x)| {let mut s = ~"\x03"; s.push_str(i.to_str()); s.push_char(x); s}).to_owned_vec().concat()) if true {return}
[12:38:19] -rusti- timeout triggered!
[12:38:30] <eddyb> riiight
[12:38:34] <huon> hhhhhhhhhh: and then `minS = Some(*shape)` (theoretically that will auto-borrow to &Shape rather than moving, if `minS` has an explicit type)
[12:38:42] <eddyb> rusti: print!("{}", std::iter::count(0, 16).map(|x| x % 16).filter(|&x| x > 1).zip("rainbow-pretty-please".chars()).map(|(i, x)| {let mut s = ~"\x03"; s.push_str(i.to_str()); s.push_char(x); s}).take(50).to_owned_vec().concat()) if true {return}
[12:38:47] -rusti- timeout triggered!
[12:38:51] <eddyb> waa?
[12:38:59] <huon> hhhhhhhhhh: although you may need `let tmp: &Shape = *shape; minS = Some(tmp)`
[12:39:08] <hhhhhhhhhh> huon: alright thanks
[12:40:16] *** Quits: josh (josh@moz-C1D9FC5F.meeting.ietf.org) (Quit: josh)
[12:40:34] <eddyb> rusti: let mut i = 0; print!("{}", "rainbow-pretty-please".chars().map(|x| {let mut s = ~"\x03"; if i < 2 {i = 2;} s.push_str(i.to_str()); i = (i + 1) % 16; s.push_char(x); s}).take(50).to_owned_vec().concat()) if true {return}
[12:40:35] -rusti- 2r3a4i5n6b7o8w9-10p11r12e13t14t15y2-3p4l5e6a7s8e
[12:40:39] <eddyb> better?
[12:40:47] <kimundi> hehe, nice
[12:41:04] <Ms2ger> What's with the if true {return}?
[12:41:06] *** Joins: josh (josh@moz-C1D9FC5F.meeting.ietf.org)
[12:41:15] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[12:41:18] <kimundi> Ms2ger: prevents the printing of last expression
[12:41:18] <eddyb> Ms2ger: don't print anything after the rainbow
[12:41:18] <huon> Ms2ger: to avoid the () being printed
[12:41:30] <huon> rusti: println!("foo")
[12:41:31] -rusti- foo
[12:41:31] -rusti- ()
[12:41:41] <eddyb> we should make that a fn rainbow(&str) in rusti's script itself
[12:41:44] <Ms2ger> Oh
[12:41:45] <kimundi> let r = { .... if true { return; } }; println!("{:?}", r)
[12:41:51] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[12:41:54] <huon> eddyb: in std::prelude, you mean
[12:41:59] <kimundi> (is what rusti does)
[12:42:11] <eddyb> huon: hehe. first class rainbows
[12:42:16] *** Quits: josh (josh@moz-C1D9FC5F.meeting.ietf.org) (Quit: josh)
[12:42:37] <kimundi> eddyb: Should find a way to obfusicate the code down to a short snippet of code that you an paste in here :P
[12:43:40] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[12:44:15] *** Joins: bellows (Mibbit@725A4E98.DC2FAF07.505684C4.IP)
[12:44:40] *** Quits: bellows (Mibbit@725A4E98.DC2FAF07.505684C4.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:45:24] <huon> kimundi: anything given to rusti that's more than 30 characters is unreadably obfuscated anyway :P
[12:45:42] <kimundi> true
[12:45:51] <mindcat> rusti: ;print!("{}", std::iter::count(0, 32).map(|_| std::rand::rng().gen_range(0,256)).enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x);  s}).to_owned_vec().concat()) if true {return}
[12:45:51] -rusti- pastebinned 9 lines of output: http://sprunge.us/gQGT
[12:46:26] <huon> mindcat: task_rng is *much* better than rng if called in a loop
[12:46:51] <huon> (cf. https://github.com/huonw/rust/commit/c716c3c974a7b12a49850dcfa5396cc210919085 which hasn't landed yet.)
[12:47:06] <hhhhhhhhhh> http://ix.io/aVh - the big match block at the end is crap is there a nicer way to do that
[12:47:31] <mindcat> rusti: ;print!("{}", std::rand::rng().gen_range(0,256)).enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x);  s}).to_owned_vec().concat()) if true {return}
[12:47:32] -rusti- pastebinned 4 lines of output: http://sprunge.us/WLRS
[12:47:59] <huon> hhhhhhhhhh: match (...) { (Some(), Some()) => { ... }, (None, x) => x, (y, None) => y }
[12:48:03] <mindcat> rusti: std::rand::task_rng().gen_vec(10)
[12:48:04] -rusti- <anon>:10:9: 10:42 error: type `std::rand::TaskRng` does not implement any method in scope named `gen_vec`
[12:48:04] -rusti- <anon>:10         std::rand::task_rng().gen_vec(10)
[12:48:04] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[12:48:04] -rusti- error: aborting due to previous error
[12:48:04] -rusti- application terminated with error code 101
[12:48:18] <huon> mindcat: nede to import std::rand::Rng trait
[12:48:26] <mindcat> rusti: use std::rand::Rng; std::rand::task_rng().gen_vec(10)
[12:48:27] -rusti- <anon>:10:29: 10:62 error: cannot determine a type for this bounded type parameter: unconstrained type
[12:48:27] -rusti- <anon>:10         use std::rand::Rng; std::rand::task_rng().gen_vec(10)
[12:48:27] -rusti-                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[12:48:27] -rusti- application terminated with error code 101
[12:48:35] <hhhhhhhhhh> huon: if i do that it complains about copying i1/i2
[12:48:51] <mindcat> rusti: use std::rand::Rng; std::rand::task_rng().gen_vec::<~[u8]>(10)
[12:48:52] -rusti- <anon>:10:29: 10:71 error: failed to find an implementation of trait std::rand::Rand for ~[u8]
[12:48:52] -rusti- <anon>:10         use std::rand::Rng; std::rand::task_rng().gen_vec::<~[u8]>(10)
[12:48:52] -rusti-                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[12:48:52] -rusti- application terminated with error code 101
[12:49:02] <myname> i loke how the arrow always coles from the right and totally messing up with irc
[12:49:04] <mindcat> rusti: use std::rand::Rng; std::rand::task_rng().gen_vec::<(u8)>(10)
[12:49:05] -rusti- ~[106u8, 29u8, 47u8, 50u8, 70u8, 165u8, 239u8, 226u8, 34u8, 219u8]
[12:49:50] *** Joins: peterdn (chatzilla@moz-63996255.as13285.net)
[12:50:01] <mindcat> rusti: use std::rand::Rng;print!("{}", std::rand::task_rng().gen_vec::<(u8)>(10).enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x);  s}).to_owned_vec().concat()) if true {return}
[12:50:01] -rusti- pastebinned 22 lines of output: http://sprunge.us/MWhA
[12:50:10] <huon> hhhhhhhhhh: don't know; anyway, I've gtg... sleep calls. sorry.
[12:50:26] <mindcat> rusti: use std::rand::Rng;print!("{}", std::rand::task_rng().gen_vec::<(u8)>(32).iter().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x);  s}).to_owned_vec().concat()) if true {return}
[12:50:27] -rusti- pastebinned 9 lines of output: http://sprunge.us/QOjU
[12:50:32] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[12:52:16] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[12:52:26] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[12:52:35] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[12:52:49] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[12:54:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:54:47] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[12:56:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:57:22] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[12:58:55] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[12:59:48] *** Joins: mib_oo2thv (Mibbit@moz-CBEA42A5.access.hol.gr)
[12:59:53] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[13:00:04] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:00:14] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[13:00:54] *** Joins: josh (josh@moz-C1D9FC5F.meeting.ietf.org)
[13:01:02] *** jorendorff_away is now known as jorendorff
[13:01:26] *** Parts: mib_oo2thv (Mibbit@moz-CBEA42A5.access.hol.gr) ()
[13:08:26] *** Joins: asmyers (quassel@F7FD79FB.9A737B8F.FAA4474F.IP)
[13:08:39] *** Quits: josh (josh@moz-C1D9FC5F.meeting.ietf.org) (Quit: josh)
[13:09:34] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[13:09:40] *** Joins: jviereck (Adium@moz-5361DC97.ethz.ch)
[13:10:03] <mindcat> rusti: use std::rand::Rng;print!("{}", std::rand::task_rng().gen_vec::<(u8)>(32).iter().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(x as char);  s}).to_owned_vec().concat()) if true {return}
[13:10:04] -rusti- pastebinned 9 lines of output: http://sprunge.us/WTNI
[13:10:27] <mindcat> rusti: use std::rand::Rng;print!("{}", std::rand::task_rng().gen_vec::<(u8)>(32).iter().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(*x as char);  s}).to_owned_vec().concat()) if true {return}
[13:10:28] -rusti- 0123Ò45£6¿7¢89j1011.12x13314150[12´3ô4â56ë7A8X9ý10ó1112^13¼1415
[13:10:30] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[13:10:32] <mindcat> rusti: use std::rand::Rng;print!("{}", std::rand::task_rng().gen_vec::<(u8)>(32).iter().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(*x as char);  s}).to_owned_vec().concat()) if true {return}
[13:10:32] -rusti- 0H1[2ý3ì4â5ò6©7Ï8#9v10¶1112£1314Ä15ê01ä2ç3²49566%7l8²9o10Z11÷12h13ê14³15
[13:10:40] *** Joins: patpat (patpat@D0076E82.7FC6F41F.98F3E2B5.IP)
[13:10:51] <mindcat> rusti: use std::rand::Rng;print!("{}", std::rand::task_rng().gen_vec::<(u8)>(64).iter().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(*x as char);  s}).to_owned_vec().concat()) if true {return}
[13:10:52] -rusti- pastebinned 1 lines of output: http://sprunge.us/DaDW
[13:11:03] <mindcat> rusti: use std::rand::Rng;print!("{}", std::rand::task_rng().gen_vec::<(u8)>(48).iter().enumerate().map(|(i, x)| {let mut s = ~"\x03"; s.push_str((i % 16).to_str()); s.push_char(*x as char);  s}).to_owned_vec().concat()) if true {return}
[13:11:04] -rusti- pastebinned 1 lines of output: http://sprunge.us/jVee
[13:11:33] * mindcat stopped doing that
[13:12:14] <mindcat> 5¼
[13:14:45] *** Joins: ganitsu (ganitsu@moz-E6932C21.dialup.adsl.anteldata.net.uy)
[13:15:30] <kimundi> let t="Hello #rust!";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.len())))}if true{return}
[13:15:35] <kimundi> rusti: let t="Hello #rust!";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.len())))}if true{return}
[13:15:36] -rusti- 50<51H52e53l54l55o56 57#58r59u60s61t62!63>50 51 52 53^54_55_56^
[13:15:36] -rusti- 57 58            59 60\61 62 63(50o51o52)53\54_55_56_57_58_59_60_
[13:15:36] -rusti- 61 62            63 50 51 52 53(54_55_56)57\58 59 60 61 62 63 50 51)52\53/54\
[13:15:36] -rusti- 55 56            57 58 59 60 61 62 63 50 51|52|53-54-55-56-57w58 59|
[13:15:38] -rusti- 60 61            62 63 50 51 52 53 54 55 56|57|58 59 60 61 62 63|50|
[13:16:39] <mindcat> ohhhh
[13:17:29] * huon wonders if he will wake up to a #rust filled with rainbow rusti output
[13:17:33] *** Quits: jviereck (Adium@moz-5361DC97.ethz.ch) (Quit: Leaving.)
[13:17:46] <eddyb> I used to monkeypatch JS' Number to support conversion to sub (₁) and sup (¹)
[13:18:18] <eddyb> I wonder if we should have this in the std
[13:18:40] <eddyb> I know I found like almost every character
[13:19:06] <eddyb> return 'ᵃᵇᶜᵈᵉᶠᵍʰⁱʲᵏˡᵐⁿᵒᵖqʳˢᵗᵘᵛʷˣʸᶻ'[x.charCodeAt()-'a'.charCodeAt()];
[13:19:14] <eddyb> so this supports hex and whatnot
[13:19:34] <eddyb> kimundi: ^^ my question for unicode is... "where'd you put the q?"
[13:19:48] <kimundi> lol
[13:20:03] <huon> no-one was waiting in line for a superscript q
[13:20:38] <eddyb> I just realized. ʳˢᵗᵘ
[13:20:46] <eddyb> ʳᵘˢᵗ
[13:21:03] <eddyb> 4 consecutive latin alphabet letters... that has to mean something
[13:21:22] <jensnockert> abcd
[13:23:04] *** Quits: MP2E (cray@moz-EB1E242D.lv.lv.cox.net) (Quit: brb)
[13:24:54] *** Joins: Guest (textual@moz-D0D2522.host.hu.nl)
[13:26:24] <eddyb> huon: bwahaha http://www.reddit.com/r/photoshopbattles/comments/1uvtvm/a_husky/cem6xy7
[13:28:51] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[13:30:00] *** jorendorff is now known as jorendorff_away
[13:30:34] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Ping timeout)
[13:32:48] <mindcat> rusti: print!("\x85")
[13:32:49] -rusti- ()
[13:33:00] <mindcat> rusti: print!("\x7E")
[13:33:01] -rusti- ~()
[13:33:07] <mindcat> rusti: print!("\xA0")
[13:33:08] -rusti-  ()
[13:33:32] <mindcat> rusti: print!("\x62341")
[13:33:32] -rusti- b341()
[13:33:43] <mindcat> rusti: print!("\U00062341")
[13:33:44] -rusti- 񢍁()
[13:43:07] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[13:43:35] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[13:43:55] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:44:56] *** Quits: hhhhhhhhhh (mike@moz-C9C8EDC8.stcatz.ox.ac.uk) (Quit: WeeChat 0.4.3)
[13:45:14] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[13:46:15] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[13:47:19] *** Joins: pawel (pawel@moz-D381270.dynamic.chello.pl)
[13:47:22] *** Joins: dranov (dranov@C6975356.3C4F00D.E16F0CF5.IP)
[13:47:55] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[13:48:51] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[13:49:00] *** Joins: dschatzberg (dschatzber@moz-B15FAF67.bu.edu)
[13:49:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[13:49:59] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[13:50:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:50:11] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Client exited)
[13:50:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:50:26] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[13:51:22] *** Joins: sk (sk@35CFDE22.E993C7C3.78DD174B.IP)
[13:51:31] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[13:51:47] <RustProof> How can I represent f64 in C ? double ?
[13:52:50] <eddyb> yupp
[13:53:37] *** Joins: jviereck (Adium@moz-5361DC97.ethz.ch)
[13:53:45] <RustProof> I have a struct of f64
[13:54:05] <RustProof> when i give it to the same struct of double in C I don't have the good values
[13:54:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:56:24] *** Quits: alexherbo2 (alexherbo2@moz-1299A4B3.w90-3.abo.wanadoo.fr) (Ping timeout)
[13:56:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:56:57] *** Joins: ambimorph (amber@moz-B3FBDFCE.hlrn.qwest.net)
[13:57:34] *** Joins: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP)
[13:58:13] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[13:59:13] <RustProof> Is struct Foo {...} struct Bar { f: Foo, ... } compatible with C ?
[13:59:24] <eddyb> depends what you put in it
[13:59:29] <RustProof> f64
[13:59:35] <eddyb> no other types?
[13:59:41] <RustProof> structs of f64
[13:59:51] <eddyb> a Rust int is not a C int, that's why I'm asking
[13:59:55] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[14:00:08] <eddyb> are you passing structs by value between C and Rust?
[14:00:13] <RustProof> Yes
[14:00:19] <eddyb> try reference and see if that works
[14:00:43] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[14:00:58] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Quit: huon)
[14:01:20] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[14:01:20] *** ChanServ sets mode: +o huon
[14:02:17] <RustProof> Oh it works
[14:02:20] <RustProof> thanks
[14:02:54] <eddyb> do we have a bug for this yet? I've seen at least three different people have problems with C/Rust and structs by value
[14:03:01] <eddyb> issue I mean
[14:04:27] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[14:04:28] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:04:56] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[14:05:23] <rcxdude> rusti: Some(&'a') == Some(&'a')
[14:05:23] -rusti- true
[14:05:26] <rcxdude> rusti: Some(&'a') == Some(&'b')
[14:05:27] -rusti- false
[14:05:31] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[14:06:20] <rcxdude> rusti: Some(&"asdf".chars().next()) == Some(&'b')
[14:06:21] -rusti- pastebinned 5 lines of output: http://sprunge.us/biIF
[14:06:34] <eddyb> hehe oops. I'm getting errors because I put `foo` inside a doc comment inside an ES6 template string. which is delimited by `
[14:06:48] <rcxdude> rusti: Some(&"asdf".chars().next().unwrap()) == Some(&'b')
[14:06:49] -rusti- false
[14:07:00] <rcxdude> rusti: Some(&"asdf".chars().next().unwrap()) == Some(&'a')
[14:07:01] -rusti- true
[14:07:31] <eddyb> rusti: "asdf".chars().next() == Some(&'a')
[14:07:32] -rusti- pastebinned 5 lines of output: http://sprunge.us/DHVI
[14:07:40] <eddyb> rusti: "asdf".chars().next() == Some('a')
[14:07:41] -rusti- true
[14:07:48] <eddyb> rcxdude: ^^ is this what you want?
[14:08:15] <rcxdude> well, specifically I'm dealing with peek(), so it's Some<&char>
[14:08:19] <eddyb> unwrapping will fail... so Some(x.unwrap()) seems weeird
[14:08:31] <eddyb> rusti: "asdf".chars().peekable().peek() == Some(&'a')
[14:08:32] -rusti- true
[14:08:56] *** Joins: tgkokk (tgkokk@moz-E589AF21.home.otenet.gr)
[14:08:58] <rcxdude> I was wondering if comparing options to references worked like it seemed
[14:09:00] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[14:09:31] <pawel> Hello. Is there something like "once fn()" implemented already? I'm trying to move an owned box out of a closure and all I can find with google is like a year old.
[14:09:52] <eddyb> you can use a proc()
[14:09:59] <eddyb> not sure if it works for your usecase
[14:10:48] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[14:10:50] *** Quits: eibwen (kvirc@moz-283702DC.dip0.t-ipconnect.de) (Ping timeout)
[14:11:26] *** Quits: RustProof (Mibbit@moz-5A1D68AD.w92-163.abo.wanadoo.fr) (Ping timeout)
[14:11:31] <pawel> i'm using Result and
[14:11:36] <pawel> and_then
[14:11:37] <pzol> eddyb can I make this work? local_data_key!(key_current_locale: &'static Locale)  where locale is a trait
[14:11:48] <eddyb> pzol: I think so
[14:11:54] <pawel> and proc given an error "cannot move out of captured outer variable in a heap closure"
[14:12:21] <eddyb> pawel: you'll be limited to &'static T with T implementing Locale, is that enough?
[14:12:26] <eddyb> err, pzol ^^
[14:12:26] <pzol> eddy but then this: local_data::get(key_current_locale, |_opt| &Indifferent) => error: mismatched types: expected `&locale::Locale<no-bounds>` but found `&locale::indifferent::Indifferent` (expected trait locale::Locale but found &-ptr)
[14:12:45] <eddyb> pzol: have to cast it
[14:12:46] <pzol> eddyb I think so
[14:12:48] *** Joins: alexherbo2 (alexherbo2@moz-2B1B8045.w83-199.abo.wanadoo.fr)
[14:13:02] <eddyb> coercion doesn't work for returns
[14:13:06] <kimundi> pawel: We don'T have once stack closures
[14:13:09] <pzol> eddyb how?
[14:13:14] <pawel> can work around it by writing my own "and_then_with" that takes an extra arg, which gets passed to the closure, but that sucks
[14:13:21] <eddyb> pzol: like we always did before auto-coercion?
[14:13:26] <eddyb> &value as &Trait
[14:13:29] *** Joins: josh (josh@514D186.F3BBB17D.144F44FA.IP)
[14:13:35] <pzol> eddyb aaaa right ;)
[14:13:39] <kimundi> pawel: Either that, or using match manually or macro assisted, I'm afraid
[14:13:48] <kimundi> pawel: well, or use the Option dance
[14:14:00] <pawel> Ok, thanks
[14:16:44] *** Quits: jviereck (Adium@moz-5361DC97.ethz.ch) (Quit: Leaving.)
[14:16:45] <pzol> eddyb meh, but this local_data::get(key_current_locale, |_opt| &Indifferent) as &Locale -> error: borrowed value does not live long enough
[14:16:45] <pzol> actually fn current() -> &Locale { local_data::get(key_current_locale, |_opt| &Indifferent) as &Locale }
[14:17:25] <eddyb> pzol: you have to do it inside
[14:17:33] <eddyb> &Indifferent as &Locale
[14:17:44] *** Quits: josh (josh@514D186.F3BBB17D.144F44FA.IP) (Quit: josh)
[14:17:48] <eddyb> assuming you want a trait object in the TLD
[14:17:55] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[14:18:10] <eddyb> pzol: you might have to write a static for that type, if &Unit isn't 'static
[14:18:29] <eddyb> rusti: &'static ()
[14:18:30] -rusti- &()
[14:18:36] <eddyb> rusti: {&()}
[14:18:37] -rusti- &()
[14:18:44] <eddyb> rusti: {let x = &(); x}
[14:18:45] -rusti- pastebinned 15 lines of output: http://sprunge.us/OLUZ
[14:18:49] <eddyb> rusti: {let x = &'static (); x}
[14:18:50] -rusti- pastebinned 15 lines of output: http://sprunge.us/GRNc
[14:18:55] <eddyb> pzol: sorry :(
[14:19:06] *** Joins: mib_mqswdq (Mibbit@6061A60B.E78B7F80.291A146C.IP)
[14:19:18] <pzol> thx ;)
[14:19:52] *** Quits: mib_mqswdq (Mibbit@6061A60B.E78B7F80.291A146C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:20:47] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[14:20:49] *** Joins: josh (josh@514D186.F3BBB17D.144F44FA.IP)
[14:22:03] *** Quits: ambimorph (amber@moz-B3FBDFCE.hlrn.qwest.net) (Ping timeout)
[14:22:58] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[14:23:02] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[14:24:45] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:25:31] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[14:25:59] *** jorendorff_away is now known as jorendorff
[14:27:09] *** Joins: jviereck (Adium@moz-5361DC97.ethz.ch)
[14:27:19] *** Joins: aravindavk (aravinda@12945CE.602E3FBD.C28A6AA4.IP)
[14:27:24] *** Quits: jviereck (Adium@moz-5361DC97.ethz.ch) (Client exited)
[14:29:50] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[14:30:48] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[14:34:16] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[14:37:19] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:37:19] *** ChanServ sets mode: +o jdm
[14:39:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:40:01] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[14:40:08] *** Joins: marwy (user@41303A68.5C2AEEF8.CFA44423.IP)
[14:40:31] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[14:41:36] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:41:52] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:42:43] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:43:01] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:43:27] <pzol> need help with traits https://gist.github.com/9347680 error: type `&Locale<no-bounds>` does not implement any method in scope named `to_upper`
[14:43:27] <pzol> FORGET IT
[14:43:34] * pzol bangs his head against the wall
[14:43:59] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[14:44:50] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[14:45:36] <eddyb> pzol: hahaha
[14:45:49] <eddyb> try using self inside that method :P
[14:46:09] <eddyb> pzol: do you want to implement Turkish support?
[14:46:16] <pzol> eddyb yes! 
[14:46:17] <eddyb> and potentially save lives?
[14:46:20] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[14:46:31] <eddyb> Valloric got to you :))
[14:46:37] <pzol> eddyb yeah! :) that made me laugh :D
[14:47:23] <pzol> I like the boost api http://www.boost.org/doc/libs/1_55_0/libs/locale/doc/html/index.html
[14:47:25] <eddyb> pzol: btw, static trait objects are something I thought of before, I like the design :)
[14:47:46] <eddyb> I think C++11 also includes some locale stuff
[14:47:54] *** pmoore is now known as pmoore|baby-duty
[14:48:00] <pzol> eddyb better task local storage or better static mut ?
[14:48:14] <eddyb> TLD is safer
[14:48:36] <eddyb> but not as cheap, depends how many times you call through it
[14:48:48] <pzol> duh error: mutable static items are not allowed to have destructors
[14:48:57] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:49:12] <pzol> well basicly you call it very often... in every string comparison, formatting etc
[14:49:14] <eddyb> you can definitely cache the trait object, that's what the pretty printer does with the interner
[14:49:35] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[14:49:40] <eddyb> if you have to do more operations with it
[14:49:52] <pzol> I'll start with an instance that you have to pass, to get the basics working first ;)
[14:50:26] <Havvy> Is it possible to use traits as protocols. e.g.   MyTrait.some_method(&some_implementor, rest, of, args)
[14:50:32] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[14:50:54] <eddyb> Havvy: maaaybe. depends what you're doing
[14:50:55] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[14:51:05] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[14:51:54] <Havvy> eddyb:  At the moment, nothing. It's just something that was rattling around in my brain while I was sleeping.
[14:52:04] <eddyb> oh I do that a lot
[14:52:23] <eddyb> I should build a Rube-Goldberg machine in Rust at some point
[14:52:35] <eddyb> with all the features ever
[14:52:46] <kimundi> oooh, that souns nice
[14:54:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:54:23] <tiffany> you mean a rust equivalent of enterprise fizz buzz?
[14:54:46] <tiffany> ( https://github.com/EnterpriseQualityCoding/FizzBuzzEnterpriseEdition )
[14:55:14] <kimundi> eddyb: Requirement: at least 1000 lines that still optimize to the equivalent of println("Hello world")
[14:55:29] <eddyb> println is not optimized
[14:55:46] <eddyb> it keeps half of std and green alive
[14:56:15] <tiffany> I would think that println would just be a thin wrapper over puts, and println! would be where the nasties are
[14:56:16] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:56:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:56:31] <kimundi> eddyb: I meant the end result should be just as fast as calling println, with all the 1000 lines of code before it just calculating the string or so ;)
[14:56:49] <eddyb> rusti: struct I; struct N {v: uint} impl Neg<N> for I {fn neg(&self) -> N {N {v: 1}}} impl Neg<N> for N {fn neg(&self) -> N {N {v: self.v + 1}}} impl Sub<N, uint> for I {fn sub(&self, n: N) -> uint {n.v + 1}} (|-|, |--|, |------------------------------------------|)
[14:56:50] -rusti- pastebinned 4 lines of output: http://sprunge.us/EbIQ
[14:56:55] <eddyb> bah, doesn't work first try
[14:57:08] <eddyb> oops
[14:57:24] <eddyb> rusti: struct I; struct N {v: uint} impl Neg<N> for I {fn neg(&self) -> N {N {v: 1}}} impl Neg<N> for N {fn neg(&self) -> N {N {v: self.v + 1}}} impl Sub<N, uint> for I {fn sub(&self, n: N) -> uint {n.v + 1}} (I-I, I--I, I------------------------------------------I)
[14:57:24] -rusti- pastebinned 5 lines of output: http://sprunge.us/EhfW
[14:57:37] <eddyb> rusti: struct I; struct N {v: uint} impl Neg<N> for I {fn neg(&self) -> N {N {v: 1}}} impl Neg<N> for N {fn neg(&self) -> N {N {v: self.v + 1}}} impl Sub<N, uint> for I {fn sub(&self, n: &N) -> uint {n.v + 1}} (I-I, I--I, I------------------------------------------I)
[14:57:37] -rusti- pastebinned 5 lines of output: http://sprunge.us/IDZZ
[14:58:32] <eddyb> rusti: struct I; struct N {v: uint} impl Neg<N> for I {fn neg(&self) -> N {N {v: 1}}} impl Neg<N> for N {fn neg(&self) -> N {N {v: self.v + 1}}} impl Sub<N, uint> for I {fn sub(&self, n: &N) -> uint {n.v + 1}} (I--I, I------------------------------------------I)
[14:58:32] -rusti- (2u, 42u)
[14:58:38] *** Quits: patpat (patpat@D0076E82.7FC6F41F.98F3E2B5.IP) (Ping timeout)
[14:58:39] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[14:58:41] <eddyb> at least I counted the dashes right
[14:59:07] <eddyb> huon, cmr: do you know that C++ library that let you build segments, squares and even cubes with operator overloads?
[14:59:18] <eddyb> I guess rectangles and cuboids?
[14:59:49] <cmr> never heard of it
[15:00:04] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:16] <eddyb> well, I just implemented some of it
[15:00:31] <eddyb> need a helper trait to make I-I work
[15:01:25] *** Joins: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP)
[15:03:14] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Input/output error)
[15:07:42] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:07:45] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[15:08:03] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:08:21] *** Joins: RustProof (Mibbit@moz-5A1D68AD.w92-163.abo.wanadoo.fr)
[15:09:45] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:10:32] *** Joins: dave1629 (dave@4C807357.D41652FF.DDE5D3F6.IP)
[15:10:39] *** Quits: aravindavk (aravinda@12945CE.602E3FBD.C28A6AA4.IP) (Quit: Leaving)
[15:13:04] <Yurume> eddyb, did you mean: http://www.eelis.net/C++/analogliterals.xhtml
[15:13:47] <eddyb> bah, my version is better
[15:13:49] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[15:14:29] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[15:14:47] <eddyb> I guess it has something to do with -- being considered before -
[15:15:15] *** Joins: patpat (patpat@D0076E82.7FC6F41F.98F3E2B5.IP)
[15:16:50] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[15:17:46] *** Joins: mib_237spc (Mibbit@7BD05047.2E735A23.DDE5D3F6.IP)
[15:17:51] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:18:40] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[15:18:52] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[15:18:59] *** Quits: Guest (textual@moz-D0D2522.host.hu.nl) (Quit: Computer has gone to sleep.)
[15:19:06] <mib_237spc> Hey has anyone put an LRU_Cache inside of a RWArc to share among multiple tasks? It seems to be correct but when I try to access or write to the cash I get lifetime errors
[15:19:30] <eddyb> mib_237spc: how are you using it?
[15:20:27] <mib_237spc> My usage is:
[15:20:37] <mib_237spc> let mut cachecopy: Option<&~[u8]>
[15:20:48] <mib_237spc> cache.read(|state| {
[15:20:50] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[15:21:01] <mib_237spc> cachecopy = state.get(&path_str);
[15:21:06] <mib_237spc> });
[15:21:08] <eddyb> nah you can't do that
[15:21:32] <mib_237spc> Is there a way to access it like this? or is RWArc not the right thing for this
[15:21:34] <eddyb> you have to keep everything inside the read callback
[15:21:45] <mib_237spc> ?
[15:21:51] <eddyb> you can't take it out, that's what the RWArc is for
[15:22:06] <mib_237spc> Oh I get it
[15:22:23] <mib_237spc> Hm okay
[15:22:31] <eddyb> it makes concurrent accesses safe with a rw-lock that requires all reads/writes you be inside a "critical region"
[15:23:11] <mib_237spc> Okay so if I wanted to both read the cache and write to it would I just call it all in one with a cache.write? And have everything inside?
[15:23:54] <eddyb> maybe
[15:24:14] <eddyb> keep in mind that while you have write access to that cache no other task can touch it
[15:24:22] *** Joins: bakkdoor (bakkdoor@moz-A19DB5BD.freefii.com)
[15:24:31] <eddyb> so you might want to not put unnecessary work inside
[15:24:41] <mib_237spc> Essentially I have to read the cache and conditionally add to the cache, yeah that's true but its only a few lines in-between 
[15:25:11] <eddyb> insert-if-not-present or something like that? shouldn't be expensive
[15:25:29] *** Quits: silven (quassel@835652F4.C5105641.B3DDC20A.IP) (Client exited)
[15:25:56] <mib_237spc> Two if else's but I think I may separate it out because Im doing I/O just easier to not block it in case its larger. Thanks
[15:26:36] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[15:28:37] *** Quits: bakkdoor (bakkdoor@moz-A19DB5BD.freefii.com) (Quit: Linkinus - http://linkinus.com)
[15:29:32] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:30:32] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[15:31:12] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[15:31:43] *** Quits: mno2 (mno2@76ED98CE.BEBC37B7.DA359910.IP) (Quit: mno2)
[15:34:45] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[15:36:45] *** Quits: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de) (Ping timeout)
[15:37:03] *** Quits: patpat (patpat@D0076E82.7FC6F41F.98F3E2B5.IP) (Ping timeout)
[15:37:39] *** Quits: Ferreus (ferreus@moz-3AB29841.dip0.t-ipconnect.de) (Ping timeout)
[15:39:20] *** Quits: tgkokk (tgkokk@moz-E589AF21.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:41:18] *** Joins: bakkdoor (bakkdoor@moz-A19DB5BD.freefii.com)
[15:43:27] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:44:47] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:45:09] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:45:57] *** Joins: epall (epall@moz-FA29BBA2.lightspeed.sntcca.sbcglobal.net)
[15:46:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:48:01] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:48:57] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Ping timeout)
[15:49:13] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[15:49:40] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[15:50:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[15:51:35] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[15:52:16] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[15:52:32] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[15:52:35] *** Joins: maxli (maxli@moz-1650391B.hsd1.ca.comcast.net)
[15:53:15] *** Joins: jviereck (Adium@moz-5F2A758D.ethz.ch)
[15:53:29] *** Quits: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP) (Ping timeout)
[15:53:54] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:54:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:55:04] *** Quits: RustProof (Mibbit@moz-5A1D68AD.w92-163.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:55:24] *** Joins: maxli1 (Instantbir@moz-1650391B.hsd1.ca.comcast.net)
[15:56:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:57:33] *** Joins: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de)
[15:57:38] *** Joins: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org)
[15:57:43] *** Joins: jviereck1 (Adium@moz-5F2A758D.ethz.ch)
[15:57:44] *** Quits: jviereck (Adium@moz-5F2A758D.ethz.ch) (Connection reset by peer)
[15:57:51] *** Joins: tgkokk (tgkokk@moz-E589AF21.home.otenet.gr)
[15:57:58] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[15:58:24] <jdsanders> where can I go to see what I need to successfully derive a trait
[15:59:03] <jdsanders> or if it's easier to just tell me directly: if I implement TotalOrd, can I derive Ord, and if I implement TotalEq, can I derive Eq?
[15:59:05] *** Quits: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org) (Quit: Reconnecting)
[15:59:09] *** Joins: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org)
[15:59:21] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[16:00:33] *** pmoore|baby-duty is now known as pmoore
[16:03:13] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[16:04:16] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[16:05:02] *** Quits: jviereck1 (Adium@moz-5F2A758D.ethz.ch) (Quit: Leaving.)
[16:05:24] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[16:05:55] *** Joins: stumpart (stumpart@moz-93393D0A.hsd1.ca.comcast.net)
[16:06:11] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[16:06:13] *** Parts: stumpart (stumpart@moz-93393D0A.hsd1.ca.comcast.net) ()
[16:06:19] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:08:44] *** Quits: mib_237spc (Mibbit@7BD05047.2E735A23.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:08:44] *** Quits: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de) (Ping timeout)
[16:08:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[16:08:54] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:08:55] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[16:08:58] *** Joins: jviereck (Adium@moz-5F2A758D.ethz.ch)
[16:09:22] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[16:11:32] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[16:12:02] *** Quits: epall (epall@moz-FA29BBA2.lightspeed.sntcca.sbcglobal.net) (Quit: epall)
[16:12:42] *** Joins: FreeFull (freefull@moz-6C1DBA16.as13285.net)
[16:13:26] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:14:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:15:07] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:16:24] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[16:20:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:23:28] *** Quits: vincent_ (vincent@92340C0D.F31F2D7D.9510F13D.IP) (Quit: Lost terminal)
[16:24:01] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[16:29:58] *** Quits: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) (Quit: Leaving.)
[16:30:55] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:31:00] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:32:18] *** Quits: maxli1 (Instantbir@moz-1650391B.hsd1.ca.comcast.net) (Ping timeout)
[16:32:20] *** Quits: bakkdoor (bakkdoor@moz-A19DB5BD.freefii.com) (Quit: Leaving...)
[16:32:26] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:32:42] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[16:34:09] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Quit: Ex-Chat)
[16:35:13] *** Quits: maxli (maxli@moz-1650391B.hsd1.ca.comcast.net) (Quit: Leaving.)
[16:35:28] *** Joins: Guest (textual@moz-310FD28A.dynamic.caiway.nl)
[16:36:37] *** Quits: peterdn (chatzilla@moz-63996255.as13285.net) (Ping timeout)
[16:37:32] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:38:35] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[16:39:49] *** Joins: peterdn (chatzilla@moz-63996255.as13285.net)
[16:40:45] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[16:40:57] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[16:41:04] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:43:01] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[16:43:03] *** Quits: FreeFull (freefull@moz-6C1DBA16.as13285.net) (Ping timeout)
[16:43:40] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Ping timeout)
[16:44:08] *** Joins: dangets (dangets@moz-AE07478.bois.qwest.net)
[16:46:24] *** Joins: judder (maradukewa@A4DC519F.6379DA33.78E362FE.IP)
[16:48:07] *** Quits: Kxepal (Miranda@moz-363D0201.pppoe.mtu-net.ru) (Ping timeout)
[16:48:11] *** botond|email is now known as botond
[16:48:51] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[16:49:10] *** Joins: jdsanders (Adium@D073F53D.C41F93F.96556A09.IP)
[16:50:04] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[16:51:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[16:51:59] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[16:52:12] *** Quits: tgkokk (tgkokk@moz-E589AF21.home.otenet.gr) (Input/output error)
[16:52:31] *** Joins: Kxepal (Miranda@moz-510CB007.pppoe.mtu-net.ru)
[16:52:39] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Client exited)
[16:53:31] *** Joins: ambimorph (amber@moz-B3FBDFCE.hlrn.qwest.net)
[16:54:08] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[16:54:13] <Ms2ger> Folks!
[16:54:38] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Bye)
[16:54:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:55:00] <Ms2ger> Is there any way to get a better error message for the case where you call a method on a struct and you forgot to give that method a self argument?
[16:55:11] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[16:55:18] *** Quits: dangets (dangets@moz-AE07478.bois.qwest.net) (Ping timeout)
[16:55:51] *** Joins: nszceta (hax@moz-64256C5D.wireless.pitt.edu)
[16:56:07] *** Joins: arielb1 (Mibbit@moz-256A9B33.cs.tau.ac.il)
[16:56:09] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:56:22] *** Joins: Ferreus (ferreus@moz-259F3F0E.lsn.wtnet.de)
[16:56:29] *** Quits: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP) (Ping timeout)
[16:56:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:56:53] *** Joins: FreeFull (freefull@moz-83D710A6.as13285.net)
[16:56:54] *** Quits: alexherbo2 (alexherbo2@moz-2B1B8045.w83-199.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[16:58:14] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[17:00:21] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[17:00:21] *** ChanServ sets mode: +ao brson brson
[17:00:26] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Quit: Leaving)
[17:00:34] *** Joins: alexherbo2 (alexherbo2@moz-2B1B8045.w83-199.abo.wanadoo.fr)
[17:00:49] *** Quits: FreeFull (freefull@moz-83D710A6.as13285.net) (Ping timeout)
[17:00:49] *** Joins: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP)
[17:02:54] *** Joins: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net)
[17:03:14] *** Quits: alexherbo2 (alexherbo2@moz-2B1B8045.w83-199.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[17:04:22] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[17:04:23] *** ChanServ sets mode: +ao dherman dherman
[17:04:29] *** Quits: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP) (Ping timeout)
[17:04:41] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[17:04:46] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:05:25] *** Joins: dangets (dangets@moz-7E96B961.bois.qwest.net)
[17:05:58] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:06:10] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[17:06:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:07:37] <dangets> is operator overloading based on operator types allowed?
[17:07:52] <dangets> e.g. I have this example https://gist.github.com/dangets/9350711
[17:08:02] <dangets> that I would like to define add for point + point and point + int
[17:08:06] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[17:08:17] <dangets> but am getting duplicate definition error
[17:08:33] *** Joins: astroch (astroch@moz-538474D8.itc.virginia.edu)
[17:08:41] <jensnockert> Should work fine.
[17:09:14] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[17:09:37] <jensnockert> &f32 should be &int, but no idea why you're getting duplicate definition error.
[17:09:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:10:13] <dangets> yeah I just saw that typo and fixed it
[17:10:25] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[17:10:25] <dangets> but attempted recompile fails again...
[17:10:25] <dangets> hmm
[17:11:59] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:12:02] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[17:14:16] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:14:49] *** Parts: jdsanders (Adium@D073F53D.C41F93F.96556A09.IP) ()
[17:15:02] *** Joins: pnkfelix (pnkfelix@F16146EB.9D3722BB.58DC3EE6.IP)
[17:15:28] <jxs> Hi guys, mac people who do you solve this https://github.com/Homebrew/homebrew/issues/13197, just run brew reinstall --HEAD rust every now and then?
[17:15:56] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:16:11] *** Joins: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de)
[17:16:31] <sfackler> jxs: or brew remove rust; brew install --HEAD rust
[17:16:59] *** Joins: hoverbear (hoverbear@moz-9D3C6E8B.wireless.uvic.ca)
[17:17:01] *** Joins: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP)
[17:18:26] <jxs> yeah figured, thanks sfackler 
[17:18:55] *** Joins: ramitos (ramitos@23CC355F.C8CFF01.593B3862.IP)
[17:19:11] *** Quits: hoverbear (hoverbear@moz-9D3C6E8B.wireless.uvic.ca) (Quit: This bear's gotta fly.)
[17:19:56] *** Quits: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net) (Ping timeout)
[17:20:01] *** Joins: onelson (owen@moz-DD666EC5.laika.com)
[17:20:56] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:21:41] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Ping timeout)
[17:22:21] *** Quits: dave1629 (dave@4C807357.D41652FF.DDE5D3F6.IP) (Quit: dave1629)
[17:23:11] *** Quits: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP) (Ping timeout)
[17:23:36] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[17:23:51] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[17:23:56] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[17:24:07] *** Joins: willingc (willingc@moz-48549B49.san.res.rr.com)
[17:24:49] *** Joins: hoverbear (hoverbear@moz-9D3C6E8B.wireless.uvic.ca)
[17:25:16] <hoverbear> \o/ I've merged like 4 PR's into rust-rosetta in the last 24 hours
[17:25:25] *** Joins: maxli (maxli@moz-6F0C4397.thefacebook.com)
[17:25:45] *** Joins: willingc_ (willingc@moz-48549B49.san.res.rr.com)
[17:25:49] *** Quits: willingc (willingc@moz-48549B49.san.res.rr.com) (Ping timeout)
[17:25:52] * jensnockert googles.
[17:25:52] *** Joins: sruggier (sruggier@moz-B9FB4CF4.cpe.pppoe.ca)
[17:26:01] <jensnockert> Oh, cool.
[17:26:07] <jensnockert> Congratulations hoverbear!
[17:26:08] <hoverbear> jensnockert: https://github.com/Hoverbear/rust-rosetta/
[17:27:10] <mindcat> :q
[17:27:11] <mindcat> :q
[17:27:13] <mindcat> :
[17:27:16] *** Quits: mindcat (mindcat@F6728681.7EE3DE8.F956842C.IP) (Quit: leaving)
[17:27:37] *** Quits: fabiand (fabiand@moz-9D8A4B0A.adsl.alicedsl.de) (Ping timeout)
[17:27:44] <hoverbear> mindcat has :q'd out of the building.
[17:27:54] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[17:28:02] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[17:28:03] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[17:28:17] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:28:26] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:29:00] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[17:29:27] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[17:29:49] *** Quits: nszceta (hax@moz-64256C5D.wireless.pitt.edu) (Input/output error)
[17:30:06] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[17:30:18] *** Joins: hacker_s_ (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[17:30:28] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[17:31:02] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Quit: )
[17:35:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:35:39] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:36:31] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Connection reset by peer)
[17:36:50] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:37:55] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[17:37:55] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:38:16] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[17:38:41] *** Quits: StarLight (StarLight@9A0E9778.5DC686ED.F1EF1E39.IP) (Ping timeout)
[17:39:50] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[17:39:59] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:41:27] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[17:42:01] *** Quits: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP) (Ping timeout)
[17:42:12] *** Joins: xitology (xi@moz-8864BD7B.hsd1.il.comcast.net)
[17:42:48] *** Joins: StarLight (StarLight@moz-598C8E4D.dynamic.avangarddsl.ru)
[17:42:54] *** Joins: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP)
[17:43:47] *** Joins: jensnock_ (jensnocker@moz-C4B24C3.customers.ownit.se)
[17:43:57] *** Quits: sruggier (sruggier@moz-B9FB4CF4.cpe.pppoe.ca) (Ping timeout)
[17:45:58] *** Joins: jensnoc__ (jensnocker@moz-33279404.customers.ownit.se)
[17:46:22] *** Quits: jensnock_ (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[17:47:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:47:14] *** Quits: arielb1 (Mibbit@moz-256A9B33.cs.tau.ac.il) (Quit: http://www.mibbit.com ajax IRC Client)
[17:47:34] *** Quits: jensnoc__ (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[17:47:44] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Quit: )
[17:49:47] <pzol> Hmmmm how can I not have a destructor? https://gist.github.com/9351840 error: mutable static items are not allowed to have destructors
[17:50:02] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[17:50:33] <strcat> pzol: use &
[17:50:45] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:51:03] <zmike> acrichto: ping
[17:51:14] *** Quits: stevegury (stevegury@636AC086.5999CED5.71743E61.IP) (Quit: stevegury)
[17:51:23] *** Joins: bakkdoor (bakkdoor@moz-3329154D.osnanet.de)
[17:51:27] <acrichto> zmike: pong
[17:51:27] <pzol> strcat then it wants error: missing lifetime specifier
[17:51:38] *** Quits: bakkdoor (bakkdoor@moz-3329154D.osnanet.de) (Quit: Leaving...)
[17:51:51] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[17:52:06] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[17:52:47] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:53:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:53:34] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[17:53:36] <strcat> pzol: add the lifetime specifier ('static)
[17:55:03] *** Quits: Guest (textual@moz-310FD28A.dynamic.caiway.nl) (Quit: Computer has gone to sleep.)
[17:55:08] *** Quits: dranov (dranov@C6975356.3C4F00D.E16F0CF5.IP) (Ping timeout)
[17:55:12] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:55:53] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[17:56:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:57:32] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[17:57:40] <pzol> strcat static mut current_locale : &'static Locale = &Indifferent as &Locale; -> error: mismatched types: expected `&'static Locale:'static` but found `&Locale<no-bounds>` (expected bounds `'static` but found no bounds)
[17:57:48] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[17:58:29] <strcat> pzol: &Locale isn't a valid &'static Locale is what it's tell you
[17:58:36] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[17:58:53] *** Quits: josh (josh@514D186.F3BBB17D.144F44FA.IP) (Quit: josh)
[17:58:58] <pzol> strcat so how can I make this work?? is it possible at all?
[17:59:01] *** Quits: pawel (pawel@moz-D381270.dynamic.chello.pl) (Quit: Konversation terminated!)
[17:59:31] <strcat> pzol: make it 'static
[17:59:42] <strcat> you can't turn a non-'static thing into a 'static thing
[17:59:47] <strcat> and you're making a non-'static thing
[17:59:58] <pzol> strcat static mut current_locale : &'static Locale = &'static Indifferent as &'static Locale; ??? -> error: can not cast to `&'static Locale:'static` in a constant expression
[18:00:17] <strcat> unimplemented feature then
[18:00:19] <eddyb> pzol: why are you not using TLD?
[18:00:24] <eddyb> pzol: you can do this with TLD
[18:00:44] <pzol> eddyb can't get that working either grrr
[18:00:50] <eddyb> pzol: what's the problem there?
[18:01:02] <strcat> pzol: why not take locale as an argument?
[18:01:03] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[18:01:04] * pzol is preparing gist
[18:01:07] <strcat> I don't think locale should be a global
[18:01:08] *** Joins: awidegre1n (awidegreen@moz-DAF62FE3.dip0.t-ipconnect.de)
[18:01:10] <strcat> it was a mistake in C
[18:01:14] <eddyb> pzol: it creates an anonymous &Indifferent instead of a 'static one
[18:01:22] <strcat> lets say you have a server
[18:01:26] <eddyb> pzol: ?
[18:01:29] <strcat> it interacts with users in different locales
[18:01:35] <strcat> locale should *definitely* not be a global
[18:01:52] <strcat> any function using a locale should just take it as a parameter
[18:01:58] <strcat> keep it simple
[18:02:32] *** Quits: awidegreen (awidegreen@moz-E6DD8F8D.dip0.t-ipconnect.de) (Ping timeout)
[18:02:35] <pzol> strcat that seems reasonable...however I wanted to try something like in C# where you can set a locale per thread
[18:03:06] <strcat> what's the default?
[18:03:08] *** Quits: maxli (maxli@moz-6F0C4397.thefacebook.com) (Quit: Leaving.)
[18:03:16] *** Joins: HollyRain (HollyRain@moz-3B87E6F8.dyn.user.ono.com)
[18:03:16] <eddyb> strcat: C :P
[18:03:20] *** Quits: marianoguerra (marianogue@moz-7C85CAA0.dip0.t-ipconnect.de) (Ping timeout)
[18:03:24] <strcat> doesn't work for rust.
[18:03:33] *** Joins: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu)
[18:03:34] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:03:37] <eddyb> aka 10 Perl errors per package in apt-get
[18:03:39] <strcat> C and C++ locales (two separate things) won't map to anything in rust
[18:03:48] <Jemaclus> What, no syntax highlighting for Rust in Github's Atom editor yet? You slackers...
[18:03:57] <eddyb> us? or GitHub?
[18:04:00] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[18:04:08] <pzol> eddyb https://gist.github.com/9352100
[18:04:09] *** Joins: bakkdoor (bakkdoor@moz-3329154D.osnanet.de)
[18:04:22] <strcat> Jemaclus: why bother? plenty of better editors that aren't proprietary ;p
[18:04:26] <eddyb> strcat: I was making fun of bad defaults, actually
[18:04:29] <Jemaclus> hehe
[18:04:35] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[18:04:36] <pzol> eddyb tld_test.rs:14:46: 14:66 error: borrowed value does not live long enough
[18:04:45] <eddyb> pzol: &'static Indifferent isn't 'static
[18:04:50] <eddyb> we ought to deny that form
[18:04:56] <eddyb> because it looks like it works but it does nothing
[18:04:59] *** Joins: maxli1 (maxli@moz-6F0C4397.thefacebook.com)
[18:05:14] <mindslight> does anyone have experience/opinions on 'cannot call generic method through an object' and 'cannot call a method whose type contains a self-type through an object' ?  http://pastie.org/8862527
[18:05:16] <eddyb> pzol: I think you need to put Indifferent in a static and borrow it from there
[18:05:23] <eddyb> mindslight: you just can't do it
[18:05:24] <pzol> eddyb I think I tried every permutation that came to my mind ... 
[18:05:27] <doomlord_> i've seen something on github about rust/atom
[18:05:34] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[18:05:39] <eddyb> rusti: let x: &'static () = &(); x
[18:05:40] <mindslight> eddyb: seems like just a compiler limitation though
[18:05:43] -rusti- pastebinned 10 lines of output: http://sprunge.us/IHgR
[18:05:51] <strcat> mindslight: doesn't really seem like a compiler limitation to me
[18:05:55] <eddyb> mindslight: nope, it's a type universe limitation
[18:05:59] <strcat> generic methods on traits do work fine
[18:06:04] <strcat> just not via traits as objects
[18:06:06] <mindslight> eddyb: basically i'm looking for any reason i shouldn't open a bug
[18:06:20] <eddyb> mindslight: it's technically impossible to implement without JIT?
[18:06:26] <strcat> mindslight: you shouldn't open a bug because it's correctly giving you an error message for something that's not possible
[18:06:29] <eddyb> or crazy dynamic dispatch like Haskell
[18:06:40] <strcat> unless you have a suggestion on how to implement it in a sane way
[18:06:42] <mindslight> i don't understand why it is not possible
[18:06:42] <pzol> eddyb HA! that worked!
[18:06:49] <eddyb> mindslight: a trait object is erased
[18:06:57] <eddyb> it has a data pointer and a vtable pointer
[18:07:04] <strcat> mindslight: using traits without objects can generate code as needed
[18:07:07] <eddyb> a generic method would need infinite vtable entries
[18:07:09] <strcat> trait objects only have a vtable
[18:07:15] <strcat> they don't know the type of the contained object
[18:07:26] <pzol> eddyb https://gist.github.com/pzol/9352100
[18:07:28] <mindslight> they don't need to know the type of the contained object though
[18:07:32] <strcat> eddyb: well, it would also need to generate them *in advance*
[18:07:43] <strcat> mindslight: yes it does, the generic method knows the type of the contained object
[18:08:01] <eddyb> mindslight: Rust generics are like C++ templates, monomorphized
[18:08:22] <eddyb> I guess what Haskell does is more like Java/JS than C++
[18:08:42] <strcat> rust code knows the sizes of types
[18:08:48] <strcat> and dispatch to methods is static
[18:08:56] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[18:09:01] <strcat> so for those reasons alone, stuff like that isn't possible
[18:09:01] <eddyb> you can rewrite generics methods to take trait objects instead
[18:09:11] <eddyb> and that will work, in certain usecases
[18:09:30] <strcat> or just don't use trait objects in the first place :P
[18:09:45] <eddyb> heck, ~Any/Rc<Any>/RWArc<Any> is top
[18:09:54] <eddyb> or &Any/&mut Any
[18:10:25] <mindslight> hm, i guess i see the immediate problem since type parameters are like templates
[18:10:39] <eddyb> mindslight: btw, there is bug that blocks an automatic implementation of cloning to a trait
[18:10:51] <eddyb> it causes infinite recursion in the compiler
[18:11:23] <mindslight> we don't know the size of T, so calling the method cant happen
[18:11:39] <strcat> mindslight: more than that
[18:11:46] <mindslight> eddyb: you're referring to my second problem ?
[18:11:52] <strcat> mindslight: if it has bounds, then the generic method can call methods from those traits
[18:11:55] <strcat> and that's static dispatch.
[18:11:56] <eddyb> mindslight: yeah, that's not an uncommon pattern
[18:12:00] <mindslight> eddyb: as in, that makes sense to do and will be fixed when that blocking bug is fixed 
[18:12:12] <eddyb> mindslight: ahh, no, the bug is about a workaround
[18:12:22] <mindslight> eddyb: the second one is the less annoying one, given that i can just define a clonet() method that returns the trait
[18:12:50] *** Joins: hoverbea_ (hoverbear@moz-18618393.cs.uvic.ca)
[18:12:57] <eddyb> trait CloneAs<T> {fn clone_as(&self) -> T;} trait Trait: CloneAs<~Trait> {...}
[18:13:24] <eddyb> that would work, except it causes infinite recursion at some stage in the compiler, so you have to implement it for each type that implements Trait
[18:13:36] <eddyb> mindslight: for the first one, what's the concrete usecase?
[18:13:42] *** Quits: bakkdoor (bakkdoor@moz-3329154D.osnanet.de) (Quit: Leaving...)
[18:13:49] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[18:13:50] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[18:13:51] *** Quits: hoverbear (hoverbear@moz-9D3C6E8B.wireless.uvic.ca) (Ping timeout)
[18:13:59] <eddyb> if you really need dynamic polymorphism, it might be a good idea to make f take a trait object instead of being generic
[18:14:34] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[18:14:38] *** Joins: fabiand (fabiand@moz-9D8A4B0A.adsl.alicedsl.de)
[18:14:59] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:15:03] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:15:18] <mindslight> well, i want to have a method like with_c_str().. takes a closure to handle a borrowed pointer, and returns the closure's return
[18:15:26] <mindslight>     fn get<T>(&self, key: &[u8], f: |Option<&[u8]>| -> T) -> Result<T, ~str>;
[18:15:26] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:15:30] <mindslight> in a trait
[18:15:44] <mindslight> with dyanmic dispatch
[18:15:52] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:15:59] <eddyb> mindslight: hmm
[18:16:15] <eddyb> mindslight: you can be safe and use ~Any
[18:16:23] <eddyb> but that requires a heap allocation
[18:16:33] <eddyb> (and a virtual call to retrieve the data)
[18:16:38] <mindslight> the immediate workaround to me is to wrap the ~Trait in a separate struct with its own impl, and do some unsafe casts to/from owning pointers
[18:16:44] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[18:16:46] *** Quits: sk (sk@35CFDE22.E993C7C3.78DD174B.IP) (Ping timeout)
[18:16:48] *** Joins: Guest (textual@moz-310FD28A.dynamic.caiway.nl)
[18:16:54] <eddyb> mindslight: those unsafe casts are really unsafe
[18:16:57] *** Joins: blindrenderer (blindrende@89510894.B22400E5.217C7FCC.IP)
[18:17:14] <mindslight> well, owning pointer so they're all the same size
[18:17:22] <eddyb> but you don't know the type
[18:17:32] <eddyb> so what happens if something fails?
[18:17:43] <mindslight> which is the problem at play here, since the whole reason we can't just call the method is not being able to convey the size
[18:17:46] <eddyb> which destructor does it use? ~()? that will be noop at some point
[18:18:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:18:15] *** Joins: q66 (q66@moz-32555B.dab.02.net)
[18:18:17] <mindslight> there's nothing to fail ? at least i don't think
[18:18:20] <eddyb> if you use ~Any, you have a cost (possibly insignificant) with safety
[18:18:34] <eddyb> mindslight: the compiler still produces landing pads that call destructors
[18:19:23] *** Joins: nszceta (hax@moz-64256C5D.wireless.pitt.edu)
[18:19:25] <eddyb> you could use a ~Opaque trait (that will include the destructor, so you're safe there) and cast to/from ~T
[18:19:30] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[18:19:33] *** Joins: sk (sk@35CFDE22.E993C7C3.78DD174B.IP)
[18:19:45] <eddyb> but you need to guarantee that all implementors of Trait behave nicely
[18:19:46] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Quit: bbl)
[18:19:52] <mindslight> hm, i don't quite see the problem you're saying, but i haven't written the code out
[18:19:57] <eddyb> so your code is generally unsafe
[18:20:03] <eddyb> I'd say just go with Any
[18:20:21] <mindslight> but since i'm just returning exactly what the closure is returning, there *should* be no avenue to fail in between
[18:20:40] <eddyb> imagine what would happen if a custom implementer of Trait changes the return value
[18:21:17] <mindslight> i guess we are talking about unsafe code in every implementer
[18:21:32] <eddyb> even if you use an ~Opaque trait object, that doesn't prevent it from being a different type, just make destructors safe
[18:21:54] *** Joins: Rym (WUT@7001AAD.5D2765E2.51C6DE68.IP)
[18:21:55] <eddyb> mindslight: this can't be that high-perf
[18:22:07] <eddyb> the closure cost call is higher than the Any costs
[18:22:18] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:23:02] <mindslight> sigh, i guess i started down this road because i'd hoped that the closure would be optimzed better
[18:23:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:23:31] <mindslight> i can always just allocate the owned ~[u8]
[18:23:31] <eddyb> there is no big semantic difference between a closure and a trait object btw
[18:24:00] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[18:24:44] <mindslight> well, i guess all of this is leading me to look at the big picture and simply abandon using a Trait for indirection entirely
[18:24:55] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:26:03] <mindslight> which is why i started off bringing it here as a deficiency in traits, as now im looking to implement my own indirection instead of using the built-in language feature
[18:26:11] *** Quits: jviereck (Adium@moz-5F2A758D.ethz.ch) (Quit: Leaving.)
[18:26:22] <eddyb> mindslight: what are the implementers of that trait, anyway?
[18:26:42] *** Quits: maxli1 (maxli@moz-6F0C4397.thefacebook.com) (Quit: Leaving.)
[18:26:47] <eddyb> do you have an amorphous container? is the set of implementers closed or open?
[18:26:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:26:59] <mindslight> only was planning on closed
[18:27:04] <eddyb> use enums then :P
[18:27:11] <mindslight> just wildly different code in between and i liked how it was grouped
[18:27:12] <mindslight> yeah
[18:27:38] *** Joins: FreeFull (freefull@moz-B26FDF24.as13285.net)
[18:28:44] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[18:28:47] <eddyb> (you can't really close the set without making the trait private and manually enforcing it)
[18:29:00] <eddyb> mindslight: I actually have a similar problem with a toy thing of mine, Many
[18:29:31] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[18:29:36] <eddyb> you want its implementation to follow some rules, even if it's unsafe, otherwise it will blow up
[18:29:40] <mindslight> still dont like the feeling of limitations in current rust traits, but i guess a large part of the reason i like rust is enums and pattern matching
[18:30:10] <mindslight> an if i want a better object implementation, i should be using a primarily object-based language
[18:30:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:30:29] *** Quits: HollyRain (HollyRain@moz-3B87E6F8.dyn.user.ono.com) (Quit: bye, bye)
[18:30:47] *** Quits: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu) (Ping timeout)
[18:31:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:31:23] <eddyb> and the implementation of that trait is usually done using a macro, that can enforce safety
[18:31:35] *** Joins: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu)
[18:31:48] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[18:32:27] *** Quits: FreeFull (freefull@moz-B26FDF24.as13285.net) (Ping timeout)
[18:32:30] <eddyb> nmatsakis, pcwalton, strcat, huon, cmr: I just thought of privacy hygene - implement traits using macros that enforce rules. and why am I even pinging all of you?
[18:32:42] <nmatsakis> :)
[18:32:55] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[18:32:57] *** Quits: ziad (ziad@moz-C0318336.hsd1.ca.comcast.net) (Quit: ziad)
[18:33:37] <eddyb> resolution hygene is nice, but privacy hygiene is a safety feature. maybe I should open an issue?
[18:35:10] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[18:36:17] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[18:36:26] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[18:36:26] <mindslight> might that be going down the over-protective route ?
[18:36:29] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Quit: Rusky)
[18:36:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:37:11] *** Joins: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net)
[18:37:14] <mindslight> i guess you just want to prevent mistakes of implementing the trait directly, without ruling out someone doing that who needs something the macro doesnt provide and knows what they're doing
[18:37:19] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[18:38:37] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[18:38:39] *** Joins: josh (josh@moz-244364B2.cable.virginm.net)
[18:38:59] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[18:39:02] <mindslight> eddyb: could your issue be addressed by the common only-export-a-struct pattern ?
[18:39:13] <mindslight> then the trait doesnt have to be public
[18:39:22] <eddyb> that's... smart
[18:40:03] <mindslight> assuming the macro system is hygenic (i havent touched it yet), it should be able to access the non-public trait ?
[18:40:14] <eddyb> mindslight: except you have impl's created by the trait, outside of that module
[18:40:32] <eddyb> no, that's basically the point of privacy hygiene I want :))
[18:40:42] <eddyb> only let and loop labels are hygienic right now
[18:41:14] <mindslight> so identifiers in the macro system are basically textual, without lexical information ?
[18:41:28] <eddyb> those that aren't local variables
[18:41:41] <sfackler> eddyb: having some way of allowing macros to use their defining scope's namespace would be awesome
[18:41:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:42:02] <eddyb> mindslight: it's possible we'll need to redesign macro expansion and resolution if we want to implement hygiene for everything without obliterating performance
[18:42:23] <eddyb> sfackler: I have a bunch of ideas if you're taking notes
[18:42:55] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[18:43:47] <eddyb> sfackler: make cfg-prune part of parsing and expansion
[18:43:50] <mindslight> iirc, r6rs/syntax-case does that sort of general hygiene and isnt un-performant
[18:44:09] *** Joins: sruggier (sruggier@moz-B9FB4CF4.cpe.pppoe.ca)
[18:44:38] *** Quits: reima (Instantbir@moz-7A0CAC1A.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:44:52] <eddyb> sfackler: has the advantage of not causing errors in submodules using gated features, even if the submodules are blocked by cfg directives
[18:45:17] <eddyb> sfackler: once you do that, you can do node ID mapping as part of expansion
[18:45:29] <eddyb> you suddenly have IDs for nodes :)
[18:45:44] <eddyb> I'm pretty sure you can use that to store more efficient renames
[18:46:00] <eddyb> edwardw: ^^
[18:46:03] *** Joins: bharadwaj (uid11995@moz-5F4AA75A.irccloud.com)
[18:46:43] <edwardw> I'm reading
[18:47:16] *** Quits: sruggier (sruggier@moz-B9FB4CF4.cpe.pppoe.ca) (Quit: Leaving.)
[18:47:22] <sfackler> eddyb: keep in mind that std-inject uses feature-gated features, so you'd have to work around that
[18:47:38] *** Joins: kris (kris@moz-50A88E1D.dk.customer.tdc.net)
[18:47:39] <eddyb> sfackler: just move it after feature gating and before expansion
[18:47:49] <wolfwood> is there anything in std like perl's chomp to drop newlines at the end of a string?
[18:47:56] <eddyb> you mean trim?
[18:47:58] <sfackler> wolfwood: trim_right
[18:48:00] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:48:05] <sfackler> but there isn't anything that modifies the string in place
[18:48:09] * sfackler has been meaning to write that
[18:48:27] <wolfwood> that will drop whitespace too?
[18:48:34] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[18:48:46] <sfackler> yep, but there's another method that allows you to configure exactly what you want to drop
[18:48:57] <eddyb> wolfwood: you can do while s.last() == Some('\n') {s.pop();} if you want in-place
[18:49:48] <eddyb> sfackler, edwardw: I think you end up attaching resolution target overrides for identifiers passed to macros, the advantage is that it's just a Node ID (!!) and you only need it when you're actually using macros with those locals (!!)
[18:49:52] <wolfwood> found it now, always pick the wrong traits to look at
[18:50:16] <eddyb> that is moving part of resolution into expansion, though
[18:50:19] *** Joins: nical (nico@moz-52F4D9C3.dsl.ovh.fr)
[18:50:32] *** Joins: mpiechotka (mpiechotka@moz-16B371CA.dynamic.mnet-online.de)
[18:51:00] <wolfwood> eddyb: might just go with that
[18:51:29] <eddyb> sfackler, edwardw: this should work nicely for order-dependent things like type params, lifetime params, arguments, labels, locals, etc.
[18:51:37] <eddyb> *but not items*
[18:52:14] <eddyb> however, you can't really do item hygiene at all now, I don't think
[18:52:55] <eddyb> you might just have to find a way to implement N item level expansions as O(N) instead of (N * M)
[18:52:59] <eddyb> and go with that
[18:53:03] <edwardw> eddyb: but macro arguments are passed as tokens tight now, there's not much parsing before that
[18:53:11] <eddyb> edwardw: yupp
[18:53:21] <edwardw> eddyb: in other words, the parsing of macro arguments are parsed inside macro
[18:53:33] <edwardw> are done*
[18:53:39] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[18:53:48] <eddyb> you'd have to attach overrides for all the kinds of identifier it may be
[18:54:34] *** Joins: colinsurprenant (colin@moz-77696F10.compute-1.amazonaws.com)
[18:54:35] <edwardw> without being parsed, I don't see a way to attach IDs etc. to macro arguments
[18:54:41] <eddyb> basically saying "this came from a specific context and not just the local one"
[18:54:51] <eddyb> edwardw: Idents have a SyntaxContext
[18:55:04] <eddyb> you'd repurpose that
[18:55:19] <wolfwood> eddyb: actually the compiler says there is no pop or last method for ~str
[18:55:19] *** Joins: sruggier (sruggier@moz-B9FB4CF4.cpe.pppoe.ca)
[18:55:37] <eddyb> wolfwood: huh? check the OwnedString trait, maybe I didn't use the right names
[18:55:45] <edwardw> eddyb: I need to check the code, a sec
[18:55:47] *** Joins: tgkokk (tgkokk@moz-E589AF21.home.otenet.gr)
[18:56:00] <eddyb> edwardw: let foo; macro!(foo); would have an ID for the `let foo` declaration, while the foo inside the macro invocation is just an Ident
[18:56:06] *** Quits: kris (kris@moz-50A88E1D.dk.customer.tdc.net) (Ping timeout)
[18:56:27] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[18:56:29] <edwardw> eddyb: correct
[18:56:30] <eddyb> edwardw: however, you can replace the SyntaxContext of that Ident to something that contains the resolution override pointing to the ID of `let foo`
[18:56:39] <eddyb> before expanding the macro
[18:57:00] *** Quits: sruggier (sruggier@moz-B9FB4CF4.cpe.pppoe.ca) (Ping timeout)
[18:57:17] <eddyb> s/to something/with something
[18:57:34] <edwardw> eddyb: that's probably something `fold_tts` already is doing
[18:57:48] <eddyb> except it uses rename chains
[18:57:53] <eddyb> instead of one target ID
[18:58:01] <eddyb> because there are no IDs at that stage
[18:58:13] *** Joins: dave1629 (dave@moz-2D82D658.bootp.virginia.edu)
[18:59:20] <eddyb> edwardw: I'm basically hoping to make a linear operation constant by having more information at an earlier stage
[18:59:34] <edwardw> k
[18:59:48] *** Joins: hhhhhhhhhh (mike@moz-6C356074.stcatz.ox.ac.uk)
[19:00:36] <eddyb> edwardw: you can implement parts of my idea if you want ;)
[19:01:08] <eddyb> all the attribute strings should be interned, to make comparisons (much) cheaper
[19:01:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:01:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[19:02:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:02:16] <eddyb> then cfg can be moved into parsing and expanding, making it cheaper (right now we double the used RAM during the second expansion. it also takes a while)
[19:02:39] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[19:02:58] <edwardw> eddyb: which one :P the other day you also talked about pretending macro being in its own module idea
[19:03:06] <edwardw> that's also interesting
[19:03:10] <eddyb> that's harder
[19:03:19] <eddyb> and it requires all of the changes I've mentioned
[19:03:25] <eddyb> to even attempt it, I'd say
[19:03:49] <eddyb> at least removing everything between expansion and resolution
[19:04:30] <edwardw> enlighten me why it is important
[19:04:39] <edwardw> removing, that is
[19:04:58] <eddyb> well, you want node IDs
[19:05:13] <edwardw> yes
[19:05:32] <eddyb> those are produced by assign_node_ids_and_map_ast
[19:05:41] <eddyb> which right now runs after cfg2
[19:05:51] *** Joins: Kruppe (user@moz-B261351A.dynamic.uwaterloo.ca)
[19:06:01] <edwardw> between expansion and resolution?
[19:06:16] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[19:06:25] <eddyb> expansion -> cfg2 -> assign&map -> resolution
[19:06:31] <edwardw> gotcha
[19:06:45] <eddyb> if you want to assign node IDs in expansion, you need to move cfg2 into expansion itself
[19:07:00] <eddyb> well, parsing the expanded token tree
[19:07:15] <eddyb> so doing it in the parser should be enough
[19:07:50] <edwardw> let me digest that ...
[19:08:29] <eddyb> a #[cfg(foo)] mod bar {...} in a macro is nothing more than tokens, before expanding that macro at every invocation site
[19:08:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:09:15] <edwardw> when you say parsing, aren't all steps (expansion -> cfg2 -> assign&map -> resolution) part of it?
[19:09:31] <eddyb> hehe
[19:09:41] <eddyb> edwardw: haven't you ran rustc with -Z time-passes?
[19:09:52] <eddyb> I use it every time I compile rustc itself, to track progress
[19:10:11] <edwardw> eddyb: plenty! I run that `let` smoke test laterly a lot
[19:10:32] <eddyb> take a look at it for the pass ordering
[19:10:46] <edwardw> hmm, I guess I need to do that
[19:11:29] <eddyb> aww, test harness & prelude injection are also in there
[19:11:41] <eddyb> we may need to move them before expansion
[19:12:24] <eddyb> but... that means mods generated by macros don't have the prelude.... so... yeah
[19:12:27] <bharadwaj> Hi everyone.
[19:12:54] * kimundi wonders why for a simple question o
[19:13:23] <eddyb> sfackler, edwardw: maybe we need to make the prelude part of the resolution. and the test harness should be procedural macro
[19:13:35] <sfackler> maybe
[19:13:37] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[19:13:40] <sfackler> the prelude right now is pretty hacky
[19:13:46] <eddyb> no kiddin'
[19:13:53] * kimundi wonders why for a simple question in the rust subreddit he feels compelled to spend 2+ hours formulating an incredible detailed answer
[19:13:59] <eddyb> kimundi: I feel that
[19:14:04] <bharadwaj> I am a GSoC aspirant and I would like to contribute to Rust.  I was wondering if anyone could give me some pointers to get started...
[19:14:14] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:14:18] <eddyb> sfackler: I don't like folding passes because we waste a lot of memory and take a bunch of time for the simplest of things
[19:14:33] <eddyb> time: 0.484 s   maybe building test harness
[19:14:40] <eddyb> for non-test librustc
[19:14:50] <eddyb> I mean... what the heck?
[19:15:38] <sfackler> haha
[19:15:38] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[19:15:44] <edwardw> lol
[19:15:52] <eddyb> sfackler: it does removal of #[test] items I think
[19:16:00] <eddyb> time: 0.850 s   configuration 2
[19:16:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:16:28] <eddyb> ^^ that's something that can be part of the expansion with 0 aka ZERO (!!) cost
[19:16:34] <eddyb> or parsing during expansion
[19:16:52] <eddyb> if you want more reasons... think of using librustc in an IDE to work on librustc
[19:17:13] <eddyb> you don't want to spend entire seconds doing things you could do for free
[19:17:19] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[19:17:52] <edwardw> eddyb: `make TIME_PASSES=1` nice! never tried this before
[19:18:12] <eddyb> oh I use RUSTFLAGS="-Z time-passes"
[19:18:15] *** Quits: awidegre1n (awidegreen@moz-DAF62FE3.dip0.t-ipconnect.de) (Ping timeout)
[19:18:21] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[19:18:24] <eddyb> didn't know there was a make flag for doing it
[19:18:41] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:18:45] <edwardw> `make tips` leaks the secret
[19:18:57] *** Joins: marianoguerra (marianogue@moz-75E5D23E.dip0.t-ipconnect.de)
[19:19:14] *** Quits: pnkfelix (pnkfelix@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[19:20:07] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[19:20:41] *** Joins: adridu59 (Mibbit@moz-CB54E913.rev.numericable.fr)
[19:20:59] *** Quits: adridu59 (Mibbit@moz-CB54E913.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:21:08] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[19:21:25] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[19:21:38] <utkarsh> why am I getting the "lifetime cannot outlive" error in this? https://gist.github.com/f1f0ea354e01fac99378
[19:21:44] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[19:22:09] <brandonson> this probably changed ages ago, but where did std::run go?
[19:22:15] <Eridius> utkarsh: you didn't put the lifetime parameter on the return value of new()
[19:22:26] <Eridius> utkarsh: that should be -> Bla<'a>
[19:22:27] <Eridius> Blah
[19:23:13] <utkarsh> Eridius, ah, that worked, thanks!
[19:24:52] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[19:26:01] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[19:26:23] <alan_andrade> brandonson: I believe it went to sdt::io::Process
[19:26:29] <alan_andrade> std*
[19:26:35] <Eridius> yes
[19:26:37] *** Quits: dangets (dangets@moz-7E96B961.bois.qwest.net) (Ping timeout)
[19:27:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:30:31] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:31:11] *** Joins: alkino (alkino@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[19:31:22] *** Quits: dave1629 (dave@moz-2D82D658.bootp.virginia.edu) (Quit: dave1629)
[19:31:28] *** Joins: dagnir (chatzilla@A1D3E7F1.DBF4469E.7E8D5209.IP)
[19:31:32] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[19:31:32] *** Parts: dagnir (chatzilla@A1D3E7F1.DBF4469E.7E8D5209.IP) ()
[19:32:06] <kimundi> eddyb: My wall of text: http://www.reddit.com/r/rust/comments/1zincy/how_to_organize_code_in_rust_per_object_or/cfuawzo :P
[19:32:38] <eddyb> CowArc. classy
[19:33:00] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[19:34:07] <pcwalton> 496 type checking errors in de-~[T] for librustc
[19:34:19] <eddyb> gogogo autoderef
[19:34:50] *** Quits: ramitos (ramitos@23CC355F.C8CFF01.593B3862.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:34:58] <eddyb> pcwalton: see the rubber duck thing in #rust-internals. your fault :P
[19:35:39] *** Joins: capt_redbeard (Adium@C9D21CD9.B9038C8E.18422E69.IP)
[19:35:41] <kimundi> pcwalton: In other words, my patch of removing a few problematic methods from OwnedSlice and Vec<T> bitrots with every bit of progress you make ;)
[19:35:58] <kimundi> (Which is alright, bad timing from my side)
[19:36:52] <capt_redbeard> Are there class or static variables for impl in rust? Variables that are accessable in both static and instanced methods, but aren't stored in a struct?
[19:37:09] *** Joins: MP2E (cray@moz-EB1E242D.lv.lv.cox.net)
[19:37:19] *** Quits: cdidd (cdidd@moz-62131E1F.broadband.corbina.ru) (Ping timeout)
[19:37:21] <eddyb> capt_redbeard: no, b ut we want them
[19:37:31] <kimundi> eddyb: we do?
[19:37:31] <eddyb> associated items if you want to search for issues
[19:37:42] *** Joins: adridu59 (Mibbit@moz-CB54E913.rev.numericable.fr)
[19:37:56] <eddyb> kimundi: sounds like associated static items to me
[19:38:02] <adridu59> acrichto: is there any code in particular you'd want to see?
[19:38:03] <eddyb> or associated constants
[19:38:03] <kimundi> assoziated items don't involve variables afaik
[19:38:11] <kimundi> constants - yes
[19:38:20] <eddyb> I guess depends what capt_redbeard meant
[19:38:29] <kimundi> capt_redbeard: What did you mean?
[19:38:29] <acrichto> adridu59: maybe the source of hashmap.rs and also something liek macros.rs
[19:38:32] <kimundi> ;)
[19:38:49] *** Quits: blindrenderer (blindrende@89510894.B22400E5.217C7FCC.IP) (Ping timeout)
[19:38:55] *** Quits: japaric (japaric@8D66AA8D.A8462175.F29ED47E.IP) (Ping timeout)
[19:39:33] *** Joins: fabiand_ (fabiand@moz-9D8A4B0A.adsl.alicedsl.de)
[19:39:57] *** Quits: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu) (Ping timeout)
[19:39:59] *** Quits: josh (josh@moz-244364B2.cable.virginm.net) (Quit: josh)
[19:40:21] *** Quits: fabiand (fabiand@moz-9D8A4B0A.adsl.alicedsl.de) (Ping timeout)
[19:40:44] *** Joins: capt_redbeard1 (Adium@C9D21CD9.B9038C8E.18422E69.IP)
[19:40:48] <capt_redbeard1> I am thinking of it more like in the context of how ruby deals with class variables. I want to have a variable that contains a pointer to another struct, but this pointer is optional (afaik, you can't force a struct to have a certain variable can you?). I want it accessible globally, not something that is instanced.
[19:41:02] *** Quits: capt_redbeard (Adium@C9D21CD9.B9038C8E.18422E69.IP) (Ping timeout)
[19:41:49] <capt_redbeard1> my internet is quite flaky at the moment :(
[19:42:17] *** Joins: capt_redbeard (Adium@A67CCC04.E010653C.18422E69.IP)
[19:43:06] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Quit: Ignore me!!)
[19:43:30] *** Quits: capt_redbeard1 (Adium@C9D21CD9.B9038C8E.18422E69.IP) (Ping timeout)
[19:43:47] *** Joins: japaric (japaric@87E5C324.64CFB2BA.F29ED47E.IP)
[19:43:55] *** Joins: blindrenderer (blindrende@513DE57E.329A1D83.D01D599A.IP)
[19:43:57] *** Joins: cdidd (cdidd@moz-FFDD2070.broadband.corbina.ru)
[19:44:08] <kimundi> capt_redbeard: There are two ways to model that in Rust
[19:44:34] *** Joins: capt_redbeard1 (Adium@159C2971.79B1C0FC.18422E69.IP)
[19:45:39] *** Quits: capt_redbeard (Adium@A67CCC04.E010653C.18422E69.IP) (Ping timeout)
[19:45:51] <kimundi> capt_redbeard: One is to have a mutable global variable - which means you need to ensure threadsafety, initialization and deinitialization manually for it, as otherwise using it is unsafe. You can then restrict the visibility of it to the module of the struct.
[19:45:58] *** Joins: echristo (echristo@3246441A.D6CCE4AE.77834EAA.IP)
[19:46:02] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[19:46:32] <brandonson> is there a way to get the file descriptor for stdin?  Or do I just need to use a constant int?
[19:46:58] *** Quits: nszceta (hax@moz-64256C5D.wireless.pitt.edu) (Connection reset by peer)
[19:46:59] <capt_redbeard1> kimundi: I would like to avoid that hassle if possible xD
[19:47:11] <o11c> brandonson: std::libc::STDIN_FILENO ?
[19:47:31] <brandonson> o11c: looks right, thanks
[19:47:31] <kimundi> capt_redbeard1: The other way would be to have a private field containing something like `Rc<SharedData>`, and then ensure that any new instance of the struct gets initialized by cloning that private handle
[19:48:18] *** pmoore is now known as pmoore|away
[19:48:22] *** Joins: capt_redbeard (Adium@B375EBCF.DF6E5361.18422E69.IP)
[19:48:40] *** Quits: capt_redbeard1 (Adium@159C2971.79B1C0FC.18422E69.IP) (Ping timeout)
[19:48:48] *** Quits: fabiand_ (fabiand@moz-9D8A4B0A.adsl.alicedsl.de) (Ping timeout)
[19:49:01] <capt_redbeard> kimundi: Oh!!! I forgot about Rc<>! That will make this much easier. Thank you!
[19:49:25] <capt_redbeard> (sorry about names keep switching, I keep getting kicked off of the internet and Adium doesn't authenticate my name correctly)
[19:49:28] *** Joins: jdsanders (Adium@D073F53D.C41F93F.96556A09.IP)
[19:49:48] <jdsanders> is there any way to automatically implement a trait on a newtype struct that the underlying type implements?
[19:49:50] *** Quits: capt_redbeard (Adium@B375EBCF.DF6E5361.18422E69.IP) (Connection reset by peer)
[19:49:55] <kimundi> capt_redbeard: Could also maybe combining both in a hybrid way: have shared as a field, with a private mutable static used to keep a value of the handle alive and rediscoverable for new instances
[19:49:57] *** Joins: capt_redbeard (Adium@159C2971.79B1C0FC.18422E69.IP)
[19:50:12] <kimundi> jdsanders: not currently
[19:50:21] <jdsanders> kimundi: any plans for it?
[19:50:30] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:50:41] *** Quits: capt_redbeard (Adium@159C2971.79B1C0FC.18422E69.IP) (Quit: Leaving.)
[19:50:56] *** Joins: capt_redbeard (Adium@C9D21CD9.B9038C8E.18422E69.IP)
[19:51:59] <kimundi> jdsanders: No concrete ones
[19:52:36] *** Quits: capt_redbeard (Adium@C9D21CD9.B9038C8E.18422E69.IP) (Ping timeout)
[19:52:38] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[19:54:26] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[19:54:36] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[19:55:03] *** Quits: stevegury (stevegury@636AC086.5999CED5.71743E61.IP) (Quit: stevegury)
[19:56:26] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[19:59:02] <jdsanders> kimundi: ok cool, thanks
[20:00:34] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Input/output error)
[20:01:31] <adridu59> acrichto: ty!
[20:06:02] *** Parts: jdsanders (Adium@D073F53D.C41F93F.96556A09.IP) ()
[20:06:44] *** Quits: blindrenderer (blindrende@513DE57E.329A1D83.D01D599A.IP) (Ping timeout)
[20:07:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:07:30] *** Quits: Kruppe (user@moz-B261351A.dynamic.uwaterloo.ca) (Ping timeout)
[20:08:07] *** Joins: blindrenderer (blindrende@B323C515.54C85F70.2125B4DC.IP)
[20:08:47] <olsonjeffery> so this "Language to replace C" thread. not sure what's going on.. it starts out as a sort of "rust isn't neccesary when we have a simpler language in go" and then veers into hypotheticals about a runtime-free go.
[20:09:16] <olsonjeffery> the goalpost is in a state of quantum indeterminence that isn't known until you make an argument, at which point the goalpost is revealed to have been moved from wherever you last thought it was!
[20:09:26] <Havvy> Link?
[20:09:29] *** Quits: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net) (Ping timeout)
[20:10:09] <Ms2ger> olsonjeffery, sounds like something better ignored
[20:10:26] <olsonjeffery> oh, i know. that's why im not replying on the thread :P
[20:10:53] *** Quits: ambimorph (amber@moz-B3FBDFCE.hlrn.qwest.net) (Ping timeout)
[20:10:53] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[20:10:57] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[20:11:24] <aatch> olsonjeffery, ugh. Sure, Go *might* work without a runtime. But good luck figuring out how to make Go work without a garbage collector.
[20:11:58] <eddyb> olsonjeffery: so what's the link? gimmie :D
[20:12:08] <eddyb> there's always something to learn from there :P
[20:12:09] <olsonjeffery> https://mail.mozilla.org/pipermail/rust-dev/2014-March/008881.html
[20:12:21] <eddyb> ah, ML? didn't realize, thought HN
[20:12:39] <olsonjeffery> yeah, my bad.
[20:13:09] <olsonjeffery> i feel like that one C++ thread brought out the cranks. some kind of "They dun like C++!" bat signal must have gone off somewhere.
[20:13:13] <olsonjeffery> anyways. ill stop, now.
[20:13:23] *** Joins: ecr (chatzilla@moz-5A94AC46.dhcp4.washington.edu)
[20:13:42] *** Joins: dave1629 (dave@moz-2D82D658.bootp.virginia.edu)
[20:13:53] <olsonjeffery> (although my parting shot will be to say that the final stage of this process is a concern troll thread on the bitc list)
[20:14:05] *** Joins: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[20:14:11] * jensnockert hugs olsonjeffery.
[20:16:03] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:16:08] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[20:16:10] <aatch> I'm not sure what the point of that thread was *supposed* to be. The starting message looks like some cross between trying to start a circle-jerk and bitching about Rust being too hard.
[20:16:24] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[20:16:34] *** Quits: dave1629 (dave@moz-2D82D658.bootp.virginia.edu) (Quit: dave1629)
[20:16:35] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[20:16:37] <jensnockert> Which is an interesting topic, is Rust harder to learn than C?
[20:16:44] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[20:16:45] <Ms2ger> Well
[20:16:51] <aatch> jensnockert, probably. Harder to get wrong though.
[20:16:54] <jensnockert> I don't think so, but I'm not sure.
[20:16:55] <Ms2ger> Learning to write something that compiles?
[20:17:07] <olsonjeffery> that depends: do you prefer segfaults to having to deal with the consequences of safe, deterministic memory?
[20:17:33] <Ms2ger> Or learning to write something that works?
[20:17:41] <aatch> I think the time-to-compentence is about the same. Just that C is more forgiving of incompetence.
[20:17:42] *** Quits: Rym (WUT@7001AAD.5D2765E2.51C6DE68.IP) (Ping timeout)
[20:18:06] <o11c> IMO C has a lot less *things* to learn, but more that you have to be careful about
[20:18:07] <olsonjeffery> come read my new novel, Rustc Is A Harsh Mistress
[20:18:09] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[20:18:21] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[20:18:29] <jensnockert> I never found C forgiving, it is essentially a minefield.
[20:18:55] <Ms2ger> jensnockert, s/C/the C compiler/? :)
[20:19:03] <jensnockert> Not really.
[20:19:14] *** Joins: Rym (WUT@7001AAD.5D2765E2.51C6DE68.IP)
[20:19:14] <jensnockert> Signed overflow…
[20:19:21] <jensnockert> Undefined shifts.
[20:19:26] <o11c> coming from a Java (!) background, I learned C pretty fast ... but some of the crazy details of Rust are still elusive
[20:20:02] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[20:20:03] <jensnockert> We totally should make shifts defined in Rust.
[20:20:15] <jensnockert> Like, so they make sense.
[20:20:36] <jensnockert> Not in the silly x86 oh-lets-take-the-last-n-bits-of-the-shift-amount way.
[20:20:48] <aatch> jensnockert, it's too hard to do without making them slow though.
[20:20:51] *** Quits: colinsurprenant (colin@moz-77696F10.compute-1.amazonaws.com) (Quit: colinsurprenant)
[20:21:26] <o11c> just define the shift operators as taking a uint5_t
[20:21:48] <jensnockert> aatch: We could have unsafe shifts for those few times you want variable shifts that have silly semantics for performance reasons.
[20:21:52] <o11c> that way, they get an error if they use a non-constant of too large a type and don't explicitly cast
[20:21:53] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[20:22:37] * o11c strongly believes that {u,i}{1..64} should all exist, just for the purpose of proofs
[20:22:54] <Ms2ger> Pff
[20:23:01] <mindslight> imho the best way is to have a safe and unsafe integer types, with the same operators
[20:23:02] <aatch> jensnockert, the only two places I've seen shifts use are performance and bitsets (which you use for performance anyway)
[20:23:03] <Ms2ger> Why not {u,i}{0..}?
[20:23:06] *** Joins: colinsurprenant (colin@moz-77696F10.compute-1.amazonaws.com)
[20:23:19] <o11c> u0 does make sense, but i0 is just plain funky
[20:23:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:23:40] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:23:45] <mindslight> then you can write safe code to start, and seeing its a performance problem, switch to one with machine-translatable semantics that have more gotchas
[20:23:48] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[20:24:18] <o11c> it's crazy to require *too* much verbosity for common operations
[20:24:41] *** Quits: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[20:24:45] <jensnockert> Most of the time llvm should be able to remove the 3 cycles or so overhead of the safety.
[20:24:47] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[20:24:59] <o11c> right now I'm porting some unit tests from C to Rust, and the Rust version is 8 lines instead of 3, *plus* a bunch of lines with braces
[20:25:30] <aatch> jensnockert, not really. If you're talking about checked operations, they are much, much slower than unchecked versions.
[20:25:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:26:23] <strcat> jensnockert: you mean with checked overflow? it can *rarely* remove the overhead
[20:26:29] <strcat> and it's far from insignificant
[20:26:43] <jensnockert> strcat: Any time the shift is a constant, the overhead can be removed.
[20:26:47] <strcat> division is usually quite slow, so checked division isn't awful *if it aborts*, but ours unwinds which is awful
[20:26:57] <strcat> jensnockert: sure
[20:27:22] <eddyb> http://copy.sh/v24/ someone needs to add a rust OS to this
[20:27:27] * jensnockert hugs ARM, which at least has sane shifts.
[20:27:41] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:27:59] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[20:28:34] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[20:28:38] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:29:44] *** Joins: fabiand (fabiand@moz-9D8A4B0A.adsl.alicedsl.de)
[20:30:06] *** Quits: stevegury (stevegury@636AC086.5999CED5.71743E61.IP) (Quit: stevegury)
[20:31:14] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:31:40] *** Joins: dangets (dangets@E9B46107.B1FAB695.F2BFF6C6.IP)
[20:33:16] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:34:50] *** Joins: herrwolfe45 (uid26657@moz-E77DEB21.irccloud.com)
[20:35:15] <jensnockert> aatch: The slowest way I can think of doing it is move-to-sse-register, do shift, move back.
[20:36:41] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[20:36:42] *** Quits: ganitsu (ganitsu@moz-E6932C21.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.1)
[20:39:31] *** Quits: Ferreus (ferreus@moz-259F3F0E.lsn.wtnet.de) (Ping timeout)
[20:40:03] *** Quits: nkoep (nik@moz-B36F319D.pool.mediaways.net) (Ping timeout)
[20:40:03] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[20:40:38] *** Joins: nkoep (nik@moz-C44B38C6.pool.mediaways.net)
[20:41:21] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[20:41:44] *** Joins: claudiu (claudiu@moz-7D1F0258.thefacebook.com)
[20:44:11] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[20:45:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:47:10] *** Joins: derek_c (derek@moz-A4716BAD.cit.cornell.edu)
[20:47:36] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[20:48:05] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[20:48:12] <jensnockert> Hm… going via SSE register should take 4 extra cycles.
[20:48:18] <strcat> thunderbird is so ridiculously slow
[20:48:25] <jensnockert> Which means it is 5x as slow, if you were only doing shifts.
[20:48:40] *** Quits: derek_c (derek@moz-A4716BAD.cit.cornell.edu) (Quit: Leaving)
[20:48:52] *** Joins: derek_c (derek@moz-A4716BAD.cit.cornell.edu)
[20:49:54] <hhhhhhhhhh> if i have some constant values that i would like to read inside threads, how should i be passing them to the inner threads
[20:50:09] *** Quits: adridu59 (Mibbit@moz-CB54E913.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[20:50:11] <eddyb> you should be able to capture by copy in a proc
[20:50:17] <eddyb> but they have to be Pods
[20:50:19] <strcat> is it constant at compile-time or you mean it's immutable and created at runtime?
[20:50:20] <hhhhhhhhhh> i don't know rust well enough to explain this properly and you basically need all of my code :d
[20:50:22] *** Quits: hoverbea_ (hoverbear@moz-18618393.cs.uvic.ca) (Quit: Taking a nap.)
[20:50:26] <hhhhhhhhhh> it's immutable
[20:50:32] <eddyb> is it a Pod?
[20:50:37] <hhhhhhhhhh> what is a pod
[20:50:41] <Ms2ger> If we need all your code, put it somewhere? :)
[20:50:42] <herrwolfe45> plain odl data
[20:50:47] <herrwolfe45> old*
[20:50:52] <strcat> herrwolfe45: you can pass it along into the tasks when you spawn them
[20:50:55] <strcat> er
[20:50:56] <strcat> hhhhhhhhhh: *
[20:51:04] <eddyb> hhhhhhhhhh: what type is it? if it's standard, we can tell you what properties it has
[20:51:09] *** Joins: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP)
[20:51:20] <hhhhhhhhhh> eddyb: i have a few
[20:51:25] <hhhhhhhhhh> one is a vector whose elements all impl a trait
[20:51:37] <hhhhhhhhhh> the others are vectors of simple things
[20:52:05] *** Joins: mgottschlag (quassel@moz-F89A5731.cust.bluewin.ch)
[20:52:31] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:52:46] *** Quits: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net) (Ping timeout)
[20:52:46] *** Joins: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net)
[20:52:59] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:53:08] *** Quits: pingveno (alevar@moz-544E84DC.cat.pdx.edu) (Ping timeout)
[20:53:08] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[20:53:10] *** Joins: pingveno (alevar@moz-544E84DC.cat.pdx.edu)
[20:53:19] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Ping timeout)
[20:53:25] <eddyb> hhhhhhhhhh: vectors are not Pods, you'd have to clone them
[20:53:28] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Ping timeout)
[20:53:36] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[20:53:41] <eddyb> hhhhhhhhhh: or put them in Arc/RWArc to use them from multiple tasks at the same time
[20:55:01] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (Ping timeout)
[20:55:58] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[20:55:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:56:06] *** Quits: colinsurprenant (colin@moz-77696F10.compute-1.amazonaws.com) (Ping timeout)
[20:56:40] <hhhhhhhhhh> the exact error i get is: `cannot capture variable of type `worlds::simple::SimpleWorld<>`, which does not fulfill `Send`, in a bounded closure`
[20:56:50] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[20:57:11] <eddyb> hhhhhhhhhh: why doesn't it fulfill Send?
[20:57:19] <eddyb> do you have &T in it?
[20:57:22] <hhhhhhhhhh> this is on something which only has to be an impl of some trait, but has all kinds of lifetime stuff tacked on it
[20:57:48] <eddyb> you can only Send things that don't depend on the stack
[20:58:10] <eddyb> they have to be rootless, that's one way to put it
[20:58:19] <eddyb> "transplantable"
[20:58:24] *** Joins: colinsurprenant (colin@moz-77696F10.compute-1.amazonaws.com)
[20:58:55] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[20:59:07] <hhhhhhhhhh> so i need to make it @/~
[20:59:13] <eddyb> not @
[20:59:27] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[20:59:29] <eddyb> you aren't supposed to use it for one
[20:59:55] <eddyb> and it's not even Send, because it's implemented as Rc
[21:00:07] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[21:00:48] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[21:01:07] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:01:32] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:01:34] <hhhhhhhhhh> i am going to upload my code :d
[21:01:42] <hhhhhhhhhh> i am struggling to get my head around this.. https://dpaste.de/b8Q7
[21:02:05] <hhhhhhhhhh> the offending lines are likely to be: 53-55, 57, 85, 99
[21:02:14] *** Joins: ecr_ (chatzilla@moz-10C88DA7.dyn.cs.washington.edu)
[21:02:26] <eddyb> https://dpaste.de/b8Q7#L18
[21:02:30] <eddyb> we need that definition
[21:02:31] *** Quits: ecr (chatzilla@moz-5A94AC46.dhcp4.washington.edu) (Ping timeout)
[21:02:31] *** Quits: colinsurprenant (colin@moz-77696F10.compute-1.amazonaws.com) (Ping timeout)
[21:02:32] *** ecr_ is now known as ecr
[21:02:55] *** Joins: cacteye (Mibbit@moz-362CDC0.fttp.sta.comporium.net)
[21:03:07] <hhhhhhhhhh> https://dpaste.de/LULw, https://dpaste.de/7xYb
[21:03:30] <eddyb> https://dpaste.de/7xYb#L10
[21:03:39] <eddyb> why is that a (potentially) stack vector?
[21:03:54] <hhhhhhhhhh> https://dpaste.de/kq6e
[21:04:06] *** Quits: jackneill (jackneill@moz-68FD19F9.pool.digikabel.hu) (Ping timeout)
[21:04:23] <hhhhhhhhhh> im going to be completely honest
[21:04:32] <hhhhhhhhhh> because i put symbols in until it compiled
[21:04:32] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[21:04:34] <eddyb> you'll have to replace &T with Arc<T> methinks
[21:04:47] <eddyb> aaaand you have trait objects
[21:04:54] *** Joins: Ferreus (ferreus@moz-259F3F0E.lsn.wtnet.de)
[21:05:01] <eddyb> hhhhhhhhhh: do you want the short version or the long version?
[21:05:16] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:05:17] <hhhhhhhhhh> are they "rewrite" and "rewrite it please"
[21:05:32] <eddyb> the short version is "you're screwed"
[21:05:53] <eddyb> the long version is "wait for DST to enable you to write Arc<Trait>/RWArc<Trait>/CowArc<Trait>"
[21:05:59] *** Joins: dave1629 (dave@F58E267A.87CA334A.DDE5D3F6.IP)
[21:06:12] <eddyb> those are three different kinds of thread-safe shareable pointers
[21:06:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:06:21] <eddyb> you're using &T to share, but that's not thread-safe
[21:06:32] *** Joins: frogzilla (Mibbit@E87770CF.F746F57.CC1A2609.IP)
[21:06:57] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[21:06:59] <eddyb> hhhhhhhhhh: you may get away with SimpleWorld holding Vec<~Shape>
[21:07:19] <eddyb> you can try it out
[21:07:26] <hhhhhhhhhh> could i also replace Shape with an enum
[21:07:36] *** Quits: tgkokk (tgkokk@moz-E589AF21.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:07:37] *** Quits: asmyers (quassel@F7FD79FB.9A737B8F.FAA4474F.IP) (Ping timeout)
[21:07:39] <eddyb> what would the kinds of Shapes be?
[21:07:53] <hhhhhhhhhh> Plane/Sphere/Tri
[21:08:01] <eddyb> use an enum then
[21:09:04] <hhhhhhhhhh> alright. thanks
[21:09:15] <eddyb> not &Enum but Enum
[21:10:01] <eddyb> hhhhhhhhhh: RWArc<Entity> is a better example, if you have very complicated entities
[21:10:05] <hhhhhhhhhh> did i design my way into a stupid hole or is this kind of code going to be something rust will eventually support
[21:10:27] <eddyb> see my earlier comment, smart pointers will be able to hold trait objects soon
[21:10:47] *** Quits: peterdn (chatzilla@moz-63996255.as13285.net) (Ping timeout)
[21:11:14] *** Quits: xitology (xi@moz-8864BD7B.hsd1.il.comcast.net) (Quit: Ex-Chat)
[21:11:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:12:26] *** Joins: kvanb (kvanb@moz-1A7A80B8.lnse4.win.bigpond.net.au)
[21:12:50] *** Joins: hoverbear (hoverbear@moz-51AA3137.wireless.uvic.ca)
[21:13:24] *** Joins: Ferreus_ (ferreus@moz-259F3F0E.lsn.wtnet.de)
[21:13:51] *** Quits: alkino (alkino@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[21:14:29] *** Joins: peterdn (chatzilla@moz-63996255.as13285.net)
[21:16:39] *** Quits: Ferreus (ferreus@moz-259F3F0E.lsn.wtnet.de) (Ping timeout)
[21:16:53] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:16:57] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Ping timeout)
[21:17:18] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[21:17:18] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:17:31] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Quit: Leaving)
[21:18:43] <kmc> I want something like «static mut p: *int = ptr::null();» but function calls aren't allowed in static initializers
[21:19:02] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[21:19:24] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[21:20:01] *** flaper87 is now known as flaper87|afk
[21:20:43] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[21:21:11] <Ms2ger> kmc, 0 as *int?
[21:22:15] <kmc> thanks
[21:23:02] *** Joins: alonlevy (alon@2CD54432.57968636.E9C721AF.IP)
[21:24:17] <cacteye> For some reason when using a timer in a task spawned by native::start the task never exits: https://dpaste.de/SEaQ#L12
[21:24:52] <cacteye> But when I remove the timer the program exits fine
[21:24:57] <Eridius> cacteye: works for me
[21:25:06] <Eridius> cacteye: how old is your rust?
[21:25:11] <cacteye> Master
[21:25:31] <Eridius> I built just a couple hours ago
[21:25:41] <Eridius> what does `rustc --version` say?
[21:26:02] <cacteye> rustc 0.10-pre (fbe26af 2014-03-02 17:36:28 -0800) host: x86_64-unknown-linux-gnu
[21:26:14] *** Quits: hoverbear (hoverbear@moz-51AA3137.wireless.uvic.ca) (Quit: Taking a nap.)
[21:26:32] <Eridius> I see nothing since then that's relevant
[21:26:34] <Eridius> although I am on OS X
[21:26:39] <Eridius> so there is at least a platform difference
[21:26:47] <Eridius> cacteye: maybe run it in the debugger and see where it's hanging?
[21:26:59] <cacteye> ok
[21:27:02] *** Quits: frogzilla (Mibbit@E87770CF.F746F57.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:27:44] <zmike> if I'm writing a rust function which will be called in C that has a param like 'char *', should I write that in rust as Option<*c_char> or just *c_char ?
[21:28:09] <zmike> I had thought Option<*c_char> to account for NULL values
[21:28:13] <strcat> zmike: using Option there is wrong
[21:28:15] <Eridius> * is already nullable
[21:28:21] <zmike> hm\
[21:28:25] <strcat> zmike: *T is a nullable ptr, Option<*T> is doubly nullable so it's bigger
[21:28:30] <zmike> I guess I misunderstood that then
[21:28:33] <zmike> thanks
[21:28:51] *** Quits: peterdn (chatzilla@moz-63996255.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[21:28:56] <strcat> only &/&mut/~ are non-nullable at a compiler level (although some library types may inform the compiler in the future)
[21:30:09] *** Joins: awidegreen (awidegreen@moz-DAF62FE3.dip0.t-ipconnect.de)
[21:30:20] *** Quits: bharadwaj (uid11995@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[21:30:47] *** Quits: marwy (user@41303A68.5C2AEEF8.CFA44423.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[21:30:53] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[21:31:29] <Eridius> cacteye: fundamentally, on linux, sleep() turns into a call to libc::usleep()
[21:31:31] <Eridius> on OS X it's different
[21:32:33] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[21:33:02] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[21:33:03] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:33:04] <strcat> would be nice if we didn't call the obsolete usleep
[21:33:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:33:13] *** Quits: nical (nico@moz-52F4D9C3.dsl.ovh.fr) (Client exited)
[21:33:37] <cacteye> I know
[21:33:40] <strcat> it's not actually part of POSIX anymore at all, and it's incorrect
[21:33:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:33:45] <Eridius> I also find it amusing that on linux, calling sleep() will create a fd-based timer (fds, really?) just to call usleep()
[21:33:49] <Eridius> also EINTR is ignored
[21:33:50] <strcat> since it doesn't tell you how long it slept for
[21:34:16] <strcat> Eridius: it should be using clock_nanosleep/nanosleep
[21:34:31] <cacteye> Eridius: It still doesn't seem to work
[21:34:32] <strcat> w/e, I've given up on that part of rust
[21:35:40] <strcat> you need sleep(absolute_time) and sleep(relative_time) where it handles EINTR and keeps sleeping
[21:35:43] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[21:36:27] <tristram> am I the only one having weird glitches with rust-vim ? like -> and => flicker depending if I’m on the current line
[21:36:28] <strcat> where absolute time would usually be given as a monotonic time
[21:36:40] *** Joins: josh (josh@moz-244364B2.cable.virginm.net)
[21:36:42] <strcat> tristram: disable the conceal stuff
[21:36:45] <strcat> it doesn't work in gvim
[21:36:49] <mcpherrin> https://github.com/lhartikk/ArnoldC welp better give up on rust now
[21:37:23] <MP2E> rofl
[21:37:32] <tristram> strcat: thanks
[21:37:42] <eddyb> mcpherrin: does it have ICE?
[21:37:56] <bvssvni> is this on the esolang wiki?
[21:37:57] *** Quits: teosz (teosz@5F23F990.D75A9DA0.3EA6AAD8.IP) (Ping timeout)
[21:38:26] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[21:39:47] *** Quits: dave1629 (dave@F58E267A.87CA334A.DDE5D3F6.IP) (Quit: dave1629)
[21:40:43] <bvssvni> couldn't find it
[21:40:50] *** Joins: capt_redbeard (Adium@DAAA234A.1A017CA.60C86946.IP)
[21:41:38] *** Quits: capt_redbeard (Adium@DAAA234A.1A017CA.60C86946.IP) (Quit: Leaving.)
[21:43:30] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[21:43:46] *** Quits: dschatzberg (dschatzber@moz-B15FAF67.bu.edu) (Input/output error)
[21:46:54] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:47:11] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Quit: ZNC - http://znc.in)
[21:48:31] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:49:45] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Client exited)
[21:49:47] *** Quits: rootnode (rootnode@moz-E07EECD2.pools.arcor-ip.net) (Ping timeout)
[21:50:07] <brson> strcat: what should be using nanosleep?
[21:50:42] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:50:44] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:50:57] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:50:57] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:51:37] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[21:52:19] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:52:54] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[21:53:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:53:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:53:38] *** Quits: derek_c (derek@moz-A4716BAD.cit.cornell.edu) (Ping timeout)
[21:53:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:53:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:54:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:54:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:54:28] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[21:54:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:54:46] *** Joins: derek_c (derek@moz-55529DC3.cit.cornell.edu)
[21:54:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:54:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:55:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:55:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:55:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:55:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:56:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:56:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:56:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:56:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:57:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:57:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:57:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:57:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:58:07] *** Quits: derek_c (derek@moz-55529DC3.cit.cornell.edu) (Ping timeout)
[21:58:12] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[21:58:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:58:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:58:28] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Client exited)
[21:58:30] *** Joins: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP)
[21:58:30] *** ChanServ sets mode: +ao brson brson
[21:58:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:58:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:59:15] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:59:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:59:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[21:59:43] <Eridius> strcat: conceal works just fine for me in gvim
[21:59:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[21:59:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[22:00:03] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[22:00:03] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[22:00:11] <Eridius> tristram: conceal is always disabled for the current line. It's a vim feature to allow you to actually see the characters you're editing
[22:00:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[22:00:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[22:00:29] <Eridius> brendan: can we get a temp ban on KindOne? He keeps autojoining after being disconnected
[22:00:32] <Eridius> err brson 
[22:00:59] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[22:00:59] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[22:01:11] <Ms2ger> Or jdm
[22:01:14] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[22:01:16] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:24] *** Quits: fabiand (fabiand@moz-9D8A4B0A.adsl.alicedsl.de) (Quit: Verlassend)
[22:01:28] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[22:01:28] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[22:01:58] *** Joins: KindOne (KindOne@CF141454.262456B2.5670445F.IP)
[22:01:58] *** Quits: KindOne (KindOne@CF141454.262456B2.5670445F.IP) (Max SendQ exceeded)
[22:01:59] *** Quits: murph1 (murph@moz-F07B75BF.oracle.com) (Broken pipe)
[22:02:10] *** Joins: murph1 (murph@moz-F07B75BF.oracle.com)
[22:02:12] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[22:02:12] *** jdm sets mode: +b KindOne!*@*
[22:02:39] *** Quits: mpiechotka (mpiechotka@moz-16B371CA.dynamic.mnet-online.de) (Ping timeout)
[22:02:53] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[22:04:26] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Quit: nn)
[22:05:46] <cacteye> Eridius: I still can't seem to get the program to exit when using the timer
[22:06:10] <Eridius> cacteye: well, the linux impl of Timer is different than every other platform. So I guess it's a bug there
[22:06:19] <Eridius> cacteye: you should file an issue, and cc acrichto
[22:06:19] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[22:06:22] <Eridius> (alexchrichton on github)
[22:06:22] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[22:06:37] <cacteye> will do
[22:06:53] <Eridius> cacteye: did you try breaking in the debugger to see where it's hanging? I'm assuming it's either hanging creating the timer, or trying to send the RemoveTimer thingy (whatever that is), because usleep() certain isn't going to hangl ike that
[22:07:31] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Client exited)
[22:08:04] *** Quits: nkoep (nik@moz-C44B38C6.pool.mediaways.net) (Quit: Leaving)
[22:08:10] <tristram> Eridius: ha, ok, never saw a code plugin use it, it’s rather disturbing :)
[22:08:50] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[22:08:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:09:00] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[22:09:04] *** Joins: notmatt_ (notmatt@D6017980.16225D44.47C41102.IP)
[22:09:13] *** Joins: gwty (gwtypc@AA4A5C9C.9ABB23D7.137C914F.IP)
[22:09:26] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[22:09:32] <Eridius> tristram: I first saw it with Haskell
[22:09:54] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Connection reset by peer)
[22:10:19] *** Quits: josh (josh@moz-244364B2.cable.virginm.net) (Quit: josh)
[22:11:20] <tristram> I might have a font bug though
[22:11:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:11:27] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[22:11:53] *** Quits: stevegury (stevegury@636AC086.5999CED5.71743E61.IP) (Client exited)
[22:12:05] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Client exited)
[22:12:24] *** Quits: notmatt_ (notmatt@D6017980.16225D44.47C41102.IP) (Ping timeout)
[22:13:10] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[22:13:23] *** Quits: gwty (gwtypc@AA4A5C9C.9ABB23D7.137C914F.IP) (Ping timeout)
[22:13:26] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[22:14:08] *** Joins: derek_c (derek@moz-A4716BAD.cit.cornell.edu)
[22:14:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:14:43] *** Quits: stevegury (stevegury@636AC086.5999CED5.71743E61.IP) (Client exited)
[22:15:27] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:16:13] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:16:43] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[22:17:25] <strcat> brson: our sleep functions
[22:17:49] *** Joins: gwty (gwtypc@A78A9C.66B0FE5F.2E2F6049.IP)
[22:18:00] <strcat> brson: usleep is broken and was removed from POSIX
[22:18:05] <strcat> you can't handle EINTR
[22:18:23] <strcat> it's not really just an issue with sleep though
[22:18:24] *** Quits: stevegury (stevegury@636AC086.5999CED5.71743E61.IP) (Quit: stevegury)
[22:18:43] <Eridius> I am amused that this issue only affects linux, and that macos/android/freebsd have a separate impl
[22:18:51] <Eridius> (not that I've looked at how that one works)
[22:19:04] <Eridius> ...apparently with usleep() as well. dammit!
[22:19:06] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[22:19:09] <Eridius> >_<
[22:19:18] *** Joins: stevegury (stevegury@636AC086.5999CED5.71743E61.IP)
[22:19:42] *** Quits: Rym (WUT@7001AAD.5D2765E2.51C6DE68.IP) (Ping timeout)
[22:19:43] <Eridius> now I'm curious why linux has a different timer impl. Does it give it more accuracy, better resolution, or does the timer_other impl not work for linux for some reason?
[22:19:46] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[22:20:08] <strcat> linux has timerfd, maybe that's why
[22:20:39] <Eridius> apparently, but what benefit does that provide over the macos impl? Fewer impls is better in general, so there must be some compelling reason
[22:21:09] *** Joins: Rym (WUT@7001AAD.5D2765E2.51C6DE68.IP)
[22:21:10] <strcat> Eridius: timerfd is useful... I don't know how this rust stuff is done though
[22:21:22] <strcat> I completely disagree with the design so you won't see me reporting bugs or improving it
[22:21:27] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[22:21:34] <Eridius> oh?
[22:21:37] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[22:21:54] <Matthias247> timerfd is nice. But probably kqueue is the even nicer design ;)
[22:21:55] <strcat> imo, a correct/useful time library should be written
[22:22:08] <strcat> Matthias247: IOCP is arguably nicer than both
[22:22:26] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:22:27] <strcat> Eridius: libuv determines the lowest common denominator
[22:22:30] *** Joins: jroweboy (Mibbit@moz-C5D211BA.byu.edu)
[22:22:32] <strcat> writing a nice, correct API isn't on the table
[22:22:56] <strcat> unless you want to work on libuv and push for changing how they do stuff
[22:23:02] <strcat> which I am absolutely not interested in
[22:23:05] <Eridius> well in this case we're talking about the libnative impl
[22:23:12] <Eridius> can't do much about libuv
[22:23:12] <strcat> Eridius: the API is determined by libuv
[22:23:27] <strcat> Eridius: the API has to be the same for libnative/libgreen
[22:23:35] <strcat> lowest common denominator makes the rules
[22:23:40] <jroweboy> Uh oh, updating to the latest rust is now giving me "FromStr" trait not found. What happened to it? Is there an link on how to update that?
[22:23:40] <strcat> you wondered why there's an fd
[22:23:58] <Eridius> jroweboy: the FromStr trait was removed from the prelude
[22:24:05] <Eridius> jroweboy: IIRC it's std::from_str::FromStr
[22:24:14] <Eridius> the from_str() function remains, but the trait itself didn't need to be in the prelude
[22:24:23] <jroweboy> oh, so I just need to use std::from_str::FromStr then? Thanks!
[22:24:28] <Eridius> yeah
[22:24:38] <strcat> Eridius: I did report some of this as a bug 3-6 months ago
[22:25:25] <strcat> I'll happily file 20 time/io bugs right now
[22:25:28] <cacteye> Eridius: I did. The the program is hanging when native::start runs bookkeeping::wait_for_other_tasks()
[22:25:30] <strcat> I just don't really see a point
[22:25:58] <Eridius> cacteye: is your program actually printing all the text, and _then_ hanging?
[22:26:02] <Eridius> I assumed it was hanging on the call to sleep()
[22:26:14] <Eridius> cacteye: I assume bookkeeping::wait_for_other_tasks() means it's waiting for any other spawned libnative tasks to terminate
[22:26:23] <cacteye> Eridius: Yes, it does print all the text
[22:26:25] <Eridius> so there must be some outstanding task. But I would not have expected sleep() to cause any tasks to spawn
[22:26:44] <Eridius> cacteye: can you verify that a program that just starts libnative, issues one call to sleep(), and returns, will hang?
[22:27:07] <cacteye> Eridius: It does
[22:27:32] <cacteye> Eridius: The stack trace does show this: 0x0000000000540f36 in io::timer_helper::boot::closure ()
[22:27:44] <cacteye> Eridius: before the bookkeeping
[22:27:51] <Eridius> ok, file that reduced program. I would not expect sleep() to be spawning a libnative task
[22:28:48] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[22:29:23] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:29:57] <strcat> Eridius: https://github.com/mozilla/rust/issues?state=open there, 3 sleep bugs
[22:30:22] <strcat> there's more though
[22:30:29] <Eridius> strcat: does libuv expose nanosecond precision, or would this require a change at that level?
[22:30:52] <Eridius> absolute time sleeping would be nice as well, but yeah, we'd need access to a monotonic clock
[22:31:00] <brson> strcat: is there anything preventing us from switching to nanosleep in our sleep function/
[22:31:12] <strcat> brson: no, but the API needs to change
[22:31:14] *** Quits: Ferreus_ (ferreus@moz-259F3F0E.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[22:31:30] <strcat> but I don't really feel that changing most of this design is on the table
[22:31:43] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:32:07] <strcat> it's very tied to how the libuv implementation is done
[22:32:26] * strcat shrugs
[22:32:38] <brson> strcat: how does the API need to change?
[22:32:49] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:32:56] <strcat> there should be sleep(reltime) (continuing on EINTR) and sleep(abstime)
[22:33:00] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:33:18] <strcat> and then channels should expose pop_timeout (and push_timeout if they're bounded)
[22:33:28] <strcat> I already opened an issue about this a while ago
[22:33:50] <brson> strcat: are either of those changes necessary to switch from usleep to nanosleep?
[22:34:03] <strcat> brson: no
[22:34:11] <strcat> I'd rather just land a correct time library
[22:34:25] <strcat> need both real and monotonic time
[22:34:30] <strcat> nanosecond precision
[22:34:38] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[22:34:46] <brson> strcat: will you switch usleep to nanasleep?
[22:35:26] <strcat> I'll submit a PR adding a time module doing the right thing and switching the existing code to it
[22:35:41] <brson> so no?
[22:37:08] <brson> switching to nanosleep is an easy incremental improvement if nanosleep is the correct syscall
[22:37:26] *** Joins: hoverbear (hoverbear@moz-51AA3137.wireless.uvic.ca)
[22:37:38] *** Quits: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it) (Quit: Leaving.)
[22:37:58] <strcat> brson: it's just as easy to expose sleep(reltime) and sleep(abstime) directly and have the existing code call them
[22:38:07] *** Joins: leowoe (Leo@moz-CBB8D564.dip0.t-ipconnect.de)
[22:38:49] <strcat> anyway w/e
[22:38:53] *** Quits: willingc_ (willingc@moz-48549B49.san.res.rr.com) (Quit: Leaving...)
[22:38:53] *** Joins: eibwen (kvirc@moz-7F98B089.dip0.t-ipconnect.de)
[22:39:26] <zmike> how can I initialize a ~[~str] from a static string as part of a static (global) variable?
[22:39:51] <tristram> I’m somewhat confused with this: https://gist.github.com/Tristramg/9357067 I’m not even sure if it is a pattern matching problem, a trait implementation, parameters lifetime
[22:39:53] <huon> zmike: can't put allocations in statics
[22:39:59] <huon> (i.e. ~)
[22:40:05] <zmike> damn that's what I suspected
[22:40:12] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[22:40:26] <strcat> imo there should be a stub Time type for real time, and perhaps MonotonicTime
[22:40:45] <strcat> they could actually have sleep as a method
[22:40:49] <zmike> related question then
[22:40:52] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[22:40:54] <strcat> maybe just one type
[22:41:04] <zmike> can I initialize it to a null/zero value?
[22:41:06] <pcwalton> I think we should just use SIGALRM
[22:41:17] <pcwalton> alternately, use busy waiting
[22:41:47] <zmike> the ~[~str], that is
[22:42:14] <huon> zmike: Option<~[~str]> initialised to None might work on a recent master
[22:42:32] <zmike> it's not Option<~[~str]> though
[22:42:45] <zmike> it's just ~[~str]
[22:43:14] *** Quits: hacker_s_ (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[22:43:18] <Eridius> zmike: there is no null value for ~[~str]
[22:43:23] <Eridius> Option<~[~str]> is the best you can get
[22:43:31] <zmike> argh
[22:43:48] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:43:51] <huon> why do you need a ~[] itself in a static?
[22:43:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:44:01] <huon> &[&str] doesn't suffice?
[22:44:06] *** Quits: marianoguerra (marianogue@moz-75E5D23E.dip0.t-ipconnect.de) (Ping timeout)
[22:44:11] <zmike> trying to initialize an existing struct
[22:44:15] <zmike> not something I wrote
[22:44:35] <zmike> I can do it another way I guess
[22:45:03] <Eridius> zmike: and the other struct needs to be in a static?
[22:45:09] <zmike> yeah
[22:45:20] <Eridius> can you make that an Option<ThatStruct> instead?
[22:45:24] <Eridius> initialize it the first time you need to access it
[22:45:25] <zmike> that's my plan
[22:45:32] <Eridius> and otherwise just return theStatic.as_ref().unwrap()
[22:45:48] <Eridius> naturally this means wrapping the static in a function
[22:45:53] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[22:45:58] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[22:45:59] <Eridius> especially because a mut static requires unsafe
[22:46:21] <zmike> it's unavoidable
[22:46:58] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[22:47:50] <kimundi> zmike: You could do something like this: https://gist.github.com/Kimundi/8782487
[22:47:57] <kimundi> lazy initialize the value
[22:48:22] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[22:48:39] <zmike> interesting
[22:48:40] <kimundi> (can even get rid of the get() calls when Deref lands)
[22:51:00] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Quit: Leaving...)
[22:51:25] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[22:52:09] <kimundi> Hm, is it memory safe to leak values? (never call their destructor, that is)
[22:52:42] <strcat> no
[22:52:45] <strcat> er
[22:52:48] <strcat> I mean 'it's not unsafe'
[22:53:27] <strcat> I think you can consider memory leaks (unreachable data that's never freed) to be incorrect, but we don't consider that to be unsafe
[22:53:29] <kimundi> I guess if Rc cycles and message passing cycles that leak are not considered memory unsafe, then a static value never getting freed won't be either
[22:53:40] <kimundi> yeah
[22:53:42] <strcat> not unsafe != should be allowed
[22:53:51] <kimundi> definitivly
[22:54:14] <strcat> we could make destructors on statics work, even with #[thread_local]
[22:54:31] <strcat> if we don't want to do that, it should just be disallowed
[22:54:49] <kimundi> but then we get life after main, which is considered undesirable as far as I know?
[22:54:57] <strcat> there is already life before/after main
[22:55:17] <strcat> it's just a privilege restricted to the stdlib
[22:55:21] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[22:55:37] *** Quits: jroweboy (Mibbit@moz-C5D211BA.byu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:56:02] <strcat> it's hard to make it safe, but it could definitely be allowed for unsafe code
[22:56:36] <strcat> if it's not going to be allowed, then imo that should be dogfooded by the stdlib
[22:56:45] *** Joins: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[22:56:52] <strcat> because you should be able to make the same abstractions elsewhere
[22:57:22] <kimundi> yeah
[22:59:10] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[22:59:15] *** Quits: mgottschlag (quassel@moz-F89A5731.cust.bluewin.ch) (Ping timeout)
[22:59:31] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:59:38] *** Joins: enos (jkingyens@moz-E6FB95AC.lightspeed.sntcca.sbcglobal.net)
[22:59:41] <Jemaclus> can I do something like:  let foo: ~str = "a" * 3; // -> ~"aaa"
[22:59:42] <Jemaclus> ?
[22:59:53] <Jemaclus> i mean, maybe not that syntax, but... repeat a string based on a number
[23:00:20] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:00:50] <Jemaclus> let foo: ~str = ~"a".repeat(10);
[23:00:55] <Jemaclus> or something
[23:01:31] <huon> rusti: "a".repeat(10)
[23:01:33] -rusti- ~"aaaaaaaaaa"
[23:01:41] <Jemaclus> oh.
[23:01:46] <Jemaclus> lol
[23:01:49] <Jemaclus> i thought i just made that up
[23:01:50] <Jemaclus> ok
[23:01:50] <Jemaclus> cool
[23:01:51] <Jemaclus> thanks
[23:01:56] *** Joins: marwy (user@41303A68.5C2AEEF8.CFA44423.IP)
[23:02:17] *** Quits: enos (jkingyens@moz-E6FB95AC.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[23:02:19] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Ping timeout)
[23:03:15] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[23:04:04] *** Joins: lawrence (lawrence@moz-931A1591.wireless.utoronto.ca)
[23:04:25] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[23:05:54] *** Joins: enos (jkingyens@moz-F6D5BB14.mycingular.net)
[23:06:25] <tristram> match self.find(foo) { None => (); Some(ref list) => for &(ref n, ref e) in list.iter() {
[23:06:25] <hoverbear> rusti: "Rust is great, ".repeat(3)
[23:06:26] -rusti- ~"Rust is great, Rust is great, Rust is great, "
[23:06:52] <tristram> is this a correct way to do it? so man refs :)
[23:08:07] <kmc> tristram: you could use the 'map' method on Option
[23:08:22] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[23:08:24] *** Quits: rgomes (rgomes@moz-C03C5B02.dsl.eclipse.net.uk) (Client exited)
[23:08:39] *** Joins: bharadwaj (uid11995@moz-5F4AA75A.irccloud.com)
[23:08:53] <kmc> but I think &(ref n, ref e) is correct for iterating a list of pairs, yeah
[23:09:30] <tristram> thanks (bis)
[23:10:09] *** Joins: rgomes (rgomes@moz-C03C5B02.dsl.eclipse.net.uk)
[23:10:29] <Jemaclus> This seems to work well.. Any thoughts welcome: https://raw.github.com/brianseitel/rust-rosetta/master/run_length.rs
[23:12:15] <sp3d> it seems like you should be able to avoid the allocation in `repeat` when doing "output = output + c.to_str().repeat(num);" because you allocate in the +
[23:12:21] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:12:32] <sp3d> if you're going for perf that would be a concern
[23:13:15] <strcat> I think we should remove + for vectors/strings
[23:13:48] <sp3d> do we have a StringBuilder equivalent?
[23:14:00] <strcat> sp3d: strings
[23:14:07] <strcat> strings aren't immutable
[23:14:28] <Havvy> aren't necessarily immutable
[23:14:28] <strcat> a = a + b; is an anti-pattern
[23:14:32] <sp3d> yeah
[23:14:39] <Havvy> a += b; ?
[23:14:51] <EKK> I don't think it's any worse than a.append(b)
[23:14:53] <strcat> a.push(b) (or whatever method is applicable)
[23:14:59] <strcat> EKK: it is *much* worse.
[23:15:05] <EKK> strcat: How so?
[23:15:20] <strcat> because append is an in-place operation
[23:15:27] <strcat> and the actual resizes are an amortized cost
[23:15:28] <EKK> And?
[23:15:41] <strcat> and, it's an in-place operation
[23:15:45] <EKK> And?
[23:15:48] <EKK> is + not?
[23:15:50] <strcat> no
[23:15:54] <EKK> Why not?
[23:16:02] <strcat> because it can't be based on the signature of +
[23:16:04] <Jemaclus> http://and-theeeen.jpg.to/
[23:16:07] <strcat> it takes &T and &T and returns T
[23:16:14] <strcat> it can't work in-place
[23:16:19] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[23:16:36] <strcat> if you do this in a loop, the time complexity is worse
[23:16:57] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[23:17:03] <Havvy> Doesn't everybody already know string concatenation in a loop is bad?
[23:17:03] <strcat> this was also the problem with exposing a 'reserve' method meaning 'reverse exactly N'
[23:17:07] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[23:17:09] <EKK> Havvy: That's not the point
[23:17:14] <strcat> Havvy: string concatenation in a loop isn't bad
[23:17:16] <strcat> if you do it sanely
[23:17:22] <strcat> rust strings != java/python strings
[23:17:23] <Jemaclus> apparently not?
[23:17:24] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[23:17:28] * Jemaclus hides in a corner
[23:17:37] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[23:17:58] <EKK> I'm just curious to why concatenation wouldn't be in-place with non-immutable strings
[23:18:18] <strcat> EKK: by in-place I mean mutating the existing string, not making a new one
[23:18:29] <EKK> strcat: Yeeeees?
[23:18:34] <EKK> That's what I mean too
[23:18:42] <EKK> And why exactly does + have to create a new String?
[23:18:51] <strcat> because the signature is add(&T, &T) -> T
[23:19:04] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[23:19:06] <strcat> by definition, + returns a new value
[23:19:09] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[23:19:11] <strcat> it doesn't mutate the LHS or RHS
[23:19:28] <Jemaclus> fn append(self, rhs: ~str) -> ~str 
[23:19:35] <Jemaclus> seems like that's allocating a new string, too?
[23:19:37] <strcat> Jemaclus: push_str
[23:19:44] <Jemaclus> oh
[23:19:46] <Jemaclus> neato
[23:19:52] <strcat> those append functions can be considered deprecated
[23:20:15] <strcat> I'm not sure if #[allow(lint)] works in librustc, yet now
[23:20:32] <strcat> used to be that -D was passed as a cli flag and it used to override that (may still do it)
[23:20:32] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[23:20:43] <strcat> so we are unable to actually mark stuff as deprecated
[23:20:46] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[23:21:15] <strcat> (may no longer be the case, need to try)
[23:21:38] <strcat> Jemaclus: or extend, with iterators
[23:21:50] <strcat> container.extend(iterator)
[23:22:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[23:22:13] <strcat> it would be nice to have an iterable concept also applying to iterators, it's hard to fit into the type system though
[23:23:00] <kimundi> strcat: How do you feel about changing extend to take an Iterator by value instead of by mutable reference?
[23:23:50] <strcat> kimundi: makes it less useful
[23:24:16] <strcat> you can often mutate stuff that you can't move from
[23:24:21] <strcat> really common with fields
[23:24:28] *** Joins: Tuba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[23:24:29] <kimundi> It would technically be more restrictive, but you have the byref adapter to enable the same thing while stuff like "container.extend(&mut my_iter)" would be reduced to "container.extend(my_iter)"
[23:25:00] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[23:25:04] <strcat> that's true
[23:25:15] <strcat> kimundi: I'm okay with it then
[23:25:21] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:25:29] <kimundi> I wouldn't be surprised if one of the more common things to do with extend is turning a data structure into a move_iter, and then feeding it into another one with extend
[23:25:49] <huon> container.extend(my_pod_iter); for x in my_pod_iter { /* confusion */ }
[23:26:06] <huon> (but then iterating after already "consuming" it is bad practice)
[23:26:21] <kimundi> huon: right, I'd argue that would improve this example ;)
[23:27:08] <strcat> huon: if it was by-value then you'd extend the container by it and *then* iterate over the what you just extended the container by
[23:27:19] <bharadwaj> Hello everyone! I am wondering if this is the right place to discuss GSoC project on Rust..??
[23:27:22] <strcat> vector iterators are Pod
[23:27:46] <huon> strcat: yes, I know. I'm saying that that might not be what one expects
[23:27:51] <kimundi> strcat: Oh, they are?
[23:27:59] <strcat> kimundi: yes, they are just two &
[23:27:59] <huon> (in any case, I'd still be in favour of by-value extend.)
[23:28:07] <strcat> kimundi: well, two * ;)
[23:28:29] * kimundi kinda assumes that all non-trivial types are non-pod per default
[23:28:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:28:39] <strcat> kimundi: they're trivial
[23:28:43] <strcat> they're just two *
[23:28:49] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[23:28:49] <kimundi> I know :)
[23:28:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:28:59] <strcat> I'm curious if the mutable iterator is actually sound
[23:28:59] *** Quits: dangets (dangets@E9B46107.B1FAB695.F2BFF6C6.IP) (Quit: Leaving)
[23:29:01] * strcat looks
[23:29:26] <huon> rusti: let mut v = []; let a =v.mut_iter(); let b = a; let c = a;
[23:29:27] -rusti- pastebinned 6 lines of output: http://sprunge.us/PUXV
[23:29:35] <huon> rusti: let mut v = [0i]; let a =v.mut_iter(); let b = a; let c = a;
[23:29:36] <kimundi> (I'm even thinking about wether it would make sense to abstract that as a "IteratorSlice" type, for implementing custom iterators)
[23:29:36] -rusti- pastebinned 7 lines of output: http://sprunge.us/aEPB
[23:29:39] <strcat> doesn't look sound
[23:29:46] <huon> nope
[23:29:49] <huon> whoops :P
[23:29:54] <strcat> yeah it needs NoPod
[23:30:00] <strcat> I'll send a fix
[23:30:30] <strcat> it's fun that when I wonder 'is it sound?' the answer is usually no
[23:30:32] <strcat> :(
[23:30:54] <strcat> vec/str/slice API is way too big
[23:31:14] <strcat> on the positive side, nmatsakis' awesome marker types made it 2 words
[23:31:21] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:31:44] <kimundi> Need to factor out all the unsafe building blocks into composable safe interfaces
[23:31:56] <huon> (and that change was probably what made it unsound: removing the contained Option<&mut> without making it NonPod)
[23:31:57] <strcat> and delete half the code/APIs ;p
[23:32:08] <strcat> huon: ah right, I didn't even think about that
[23:32:15] <strcat> I just assumed it was always unsound...
[23:32:30] <kimundi> strcat: Which half do you see as unnecessary, roughly?
[23:32:38] <huon> kimundi: the tests :P
[23:32:53] <strcat> first of all, we should split vectors and slices into different modules
[23:33:10] <strcat> we should factor out the slice methods so that they're implemented on both vectors and slices without any code duplication (as there is now)
[23:33:20] <strcat> and seriously, half of these are useless
[23:33:27] <kimundi> huon: Seeing how many there are, and how redundantly they test some things, I think you could actually remove half the code there and still get the same coverage ;D
[23:33:44] <strcat> removing ~[T] will make it a lot better
[23:33:58] <strcat> that representation was complicated so there were a lot of subtle overflow bugs
[23:34:04] <kimundi> yeah
[23:34:26] <kimundi> factoring out the Vec<T>, unifying the common slice parts
[23:34:31] <strcat> it's nice that @str/@[T] are already gone too..
[23:34:34] *** Quits: gwty (gwtypc@A78A9C.66B0FE5F.2E2F6049.IP) (Ping timeout)
[23:34:34] *** Quits: JanC_ (janc@moz-36A807F5.dsl.scarlet.be) (Ping timeout)
[23:34:45] <huon> kimundi: deleting tests is always a little worrying (especially as the plain tests (not benchmarks) are so fast to run anyway)
[23:35:03] <kimundi> huon: I was joking ;)
[23:35:13] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[23:35:31] <kimundi> I don't think there is a problem like "to many tests"
[23:35:36] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:35:56] <huon> aiui, firefox has too many tests, wasting infrastructure time :P
[23:36:08] <huon> (*too many failing tests. :P )
[23:36:25] <strcat> look at sqlite, the main test suite is so enormous that there are smaller subsets to run
[23:36:46] <ChrisMorgan> Has anyone looked at making a MySQL library for Rust?
[23:36:52] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[23:37:05] <kimundi> strcat: I think after DST lands, you'd have to rewrite almost most vector/string related API anyway
[23:37:07] <huon> ChrisMorgan: https://github.com/nutsi/rust-mysql
[23:37:14] <strcat> the sqlite 'smoke test' is way more comprehensive than most projects have with their entire testing
[23:37:18] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:37:19] <Jemaclus> in most languages, you can do something like:  for (i = 0; i < 10; i++) { ... }
[23:37:24] <Jemaclus> what's the best way to do something like that?
[23:37:31] <strcat> for i in range(0, 10) { }
[23:37:39] <Jemaclus> (i.e., more complex than simply a range, like:  for i = 0; i * i < n; i + 2) { .. }
[23:37:42] <Jemaclus> )
[23:37:46] <ChrisMorgan> huon: tut tut, someone hasn't added it to rust-ci.org (or updated it for language changes)
[23:37:50] <huon> Jemaclus: just plain while
[23:37:56] <Jemaclus> hmm
[23:37:58] <Jemaclus> ok then
[23:37:59] <Jemaclus> thanks
[23:38:04] <huon> ChrisMorgan: https://github.com/rust/mysqlmemcheck
[23:38:06] <strcat> there's more than just 'range' anyway
[23:38:14] *** Joins: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it)
[23:38:26] <ChrisMorgan> huon: yes, I found *that* one…
[23:38:34] <strcat> Jemaclus: your example could still use range, assuming you mean i += 2
[23:38:39] <kimundi> strcat: Now I wonder if we should switch everything iterator related that takes &mut T to T
[23:38:51] <Jemaclus> strcat: range_step()?
[23:38:57] <ChrisMorgan> I also spy https://github.com/blackbeam/rust-mysql-simple
[23:39:03] *** Quits: awidegreen (awidegreen@moz-DAF62FE3.dip0.t-ipconnect.de) (Ping timeout)
[23:39:25] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[23:39:42] <huon> Jemaclus: you can save 33% of the work by only checking x such that x % 6 == 1 or 5, btw (assuming you're doing primality testing) :P
[23:39:48] <kimundi> strcat: (or at least both extend and from_iterator to be consistent)
[23:39:55] *** Quits: twi (Adium@moz-9F0310CC.cust.vodafonedsl.it) (Ping timeout)
[23:40:23] <Jemaclus> huon: already knew that.. did that earlier :) Just an example funky for loop..
[23:40:45] <huon> awesome
[23:41:13] <strcat> meh this is a bit sad
[23:41:18] <strcat> code duplication ;P
[23:41:32] <ChrisMorgan> Servo is using a copy of Rust that's almost two months old?
[23:41:45] <kimundi> strcat: For what?
[23:42:07] <strcat> you'll see
[23:43:05] *** Quits: marwy (user@41303A68.5C2AEEF8.CFA44423.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[23:43:11] <huon> Jemaclus: you could use for i in std::iter::count(0, 2).take_while(|&i| i * i < n) { ... }
[23:43:43] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[23:43:50] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[23:43:51] <Jemaclus> cause that's so easy to read... 
[23:44:08] <strcat> it's easier to read than a while loop if you're used to iterators and functional code
[23:44:11] <huon> Jemaclus: you didn't ask for "easy to read" :P
[23:44:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:44:18] <Jemaclus> huon: fair enough :P
[23:44:33] <strcat> Jemaclus: count(0, 2).take_while(|i| i * i < n)
[23:44:35] <huon> it's less mistake prone (e.g. it works properly with `continue` automatically.)
[23:44:37] <strcat> the & isn't necessary
[23:44:37] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[23:44:39] <strcat> er
[23:44:42] <strcat> actually it is
[23:44:49] <strcat> I thought * auto-derefed for some reason :P
[23:44:52] <huon> could be *i**i
[23:45:28] <strcat> rusti: let x = 5; let y = &x; y * x
[23:45:30] -rusti- pastebinned 35 lines of output: http://sprunge.us/ghSY
[23:45:38] <strcat> rusti: let x = 5u; let y = &x; y * x
[23:45:39] -rusti- 25u
[23:45:42] <huon> it's a bug the LHS of * auto-derefs
[23:45:56] *** Joins: alkino (alkino@moz-53CAAA6D.w92-151.abo.wanadoo.fr)
[23:46:10] <Armavica> btw what is the indentation convention when you chain a handful of iterator methods?
[23:46:21] <strcat> Armavica: wrap on the .
[23:46:22] <strcat> so the . line up
[23:46:33] * huon either lines them up on ., or just indents four spaces
[23:46:53] <strcat> I think the usual style in the rust codebase is to align to . or (
[23:46:55] <lenary> i'm trying to use lru_cache with a few tasks, and having errors compiling: https://gist.github.com/lenary/f14e98f18b59aa155905
[23:47:02] <strcat> (well, just inside the opening paren)
[23:47:22] <huon> strcat: yeah, it's just annoying to align to . since my editor doesn't support it automatically :(
[23:47:27] <lenary> all the errors are in with_file_reader(), things like cannot move out of dereference of & pointer
[23:47:39] <lenary> can anyone help?
[23:47:41] <huon> lenary: which lines, etc?
[23:48:16] <lenary> huon: erm, one sec while i translate between my code and this minimal example
[23:49:02] <lenary> error on line 68: cannot move out of dereference of & pointer on  the *path
[23:49:15] *** Joins: JanC_ (janc@moz-730AF229.dsl.scarlet.be)
[23:49:54] <huon> lenary: the LruCache needs ownership of it's keys
[23:49:57] <lenary> error on 44: cannot borrow `*(*self).cache` as mutable more than once at a time` (under all of it)
[23:50:02] <huon> i.e. you need a by-value Path
[23:50:22] <huon> make `path: Path`
[23:50:45] *** Quits: alonlevy (alon@2CD54432.57968636.E9C721AF.IP) (Ping timeout)
[23:50:52] <huon> (can't take an object that moves out from behind a &, because you'd be *stealing* the memory from someone else)
[23:51:02] <lenary> ok, so cloning it should help
[23:51:06] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:51:11] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[23:51:18] <huon> taking `path: Path` would be better...
[23:51:42] <huon> unless you very rarely insert new things into the lru cache
[23:51:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:52:00] <strcat> huon: https://github.com/mozilla/rust/pull/12694 r?
[23:52:06] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[23:52:11] <strcat> waiiiit sec
[23:52:14] <strcat> the docstrings are wrong
[23:52:29] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[23:52:41] <strcat> huon: there
[23:52:47] <huon> strcat: you could extend the macro to support adding a new field
[23:52:50] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[23:52:59] <strcat> huon: I want different docstrings too
[23:53:07] * strcat shrugs
[23:53:11] <huon> yeah, it's a wash
[23:53:17] <huon> and the doc strings is a good point
[23:54:32] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[23:55:04] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:55:19] <huon> lenary: I don't have the time to help with the &mut borrowing right now, sorry
[23:55:55] <lenary> huon: can you point me in a direction as to where i could find some explanation?
[23:57:11] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[23:58:04] * strcat feels a bit bad about opening so much issues
[23:58:18] *** Quits: Siosm (quassel@moz-9911B053.fr) (Client exited)
[23:59:31] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[23:59:33] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
