[00:01:19] <aatch> I also implemented a string interner because I got bored.
[00:01:38] <cmr> Still hung up on the X11 thing? :p
[00:02:11] <aatch> cmr, yep. I've got two weeks holiday and am determined to get something usable out of this.
[00:02:45] <aatch> I'm just stuck at the "what code do I generate?" stage.
[00:04:03] <aatch> Though I'm working through it by hand-implementing some of the protocol and seeing what can be abstracted into common code and what needs to be generated.
[00:05:26] <glaebhoerl> heh, whatever language a .x11 file is in, it's similar enough to Rust that for a while I was like "wait, what the heck is a setof"
[00:05:42] <cmr> heh
[00:06:49] *** Quits: vodik (simon@moz-26C1A9B8.home.cgocable.net) (Ping timeout)
[00:08:55] <aatch> glaebhoerl, it's in my made-up language that the parser is for.
[00:09:14] <glaebhoerl> ah! so not completely accidental
[00:09:31] <aatch> I'm not surprised that it's rust-like though. I didn't try to make it like that, but I also didn't try *not* to.
[00:10:17] <aatch> It's a description language though, so I can get away with stuff that a real programming language couldn't.
[00:12:53] <aatch> cmr, the expression parser in there is a proper operator-precedence parser btw. The only thing it doesn't handle is associativity
[00:15:01] *** Joins: vodik (simon@moz-26C1A9B8.home.cgocable.net)
[00:15:31] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[00:16:21] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[00:16:58] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:16:58] *** ChanServ sets mode: +ao brson brson
[00:20:27] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:20:29] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[00:21:07] <diverse> help here: http://pastebin.com/cCePUTvs
[00:21:40] *** Joins: ofeldt- (ofeldt@moz-1316319F.dip0.t-ipconnect.de)
[00:21:44] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[00:21:44] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[00:22:09] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[00:22:28] *** Quits: ofeldt (ofeldt@moz-D63CF0B9.dip0.t-ipconnect.de) (Ping timeout)
[00:22:33] <aatch> diverse, you need to use rand::random::<T>
[00:22:51] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[00:24:22] <heftig> >> 1
[00:24:23] <diverse> aatch: thanks
[00:24:28] <heftig> meh, still dead
[00:24:50] <aatch> because otherwise it's an amigious parse. `foo<T>(1)` could be `(lt foo (gt T 1))` or `(foo 1)`
[00:25:14] *** Quits: kirneh (kirneh@moz-FA14E0C7.cpe.webspeed.dk) (Quit: Lost terminal)
[00:26:06] <diverse> aatch: what is lt and gt?
[00:26:23] <aatch> diverse, less-than and greater-than
[00:26:38] <aatch> ambigious*
[00:30:56] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[00:31:33] *** Joins: tav (tav@moz-6D839A1A.range109-145.btcentralplus.com)
[00:32:02] <Edwards> All I want for Christmas is Rust support in IntelliJ :|
[00:32:36] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[00:32:40] <cmr> Edwards: is their plugin API documented?
[00:32:49] <Edwards> cmr: Yeah
[00:32:50] <diverse> was there a list of attributes somewhere? I'm trying to disable the error that looks for main().
[00:33:08] <aatch> diverse, what's the error?
[00:33:29] <diverse> 'error: main function not found'
[00:33:33] <cmr> diverse: -W help, but those are lints.
[00:33:39] <cmr> the thing requiring main isn't a lint.
[00:33:42] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Client exited)
[00:33:48] <aatch> If you're trying to make a lib, then either pass --lib, or use #[crate_type=lib] (I think)
[00:33:48] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[00:33:55] <cmr> ="lib"
[00:34:00] <aatch> So close...
[00:34:05] <diverse> gotcha
[00:34:07] * aatch lunches
[00:35:20] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Client exited)
[00:35:44] <bheylin> is there a std code for EOF when using char?
[00:36:04] <cmr> bheylin: ask unicode.
[00:36:07] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[00:36:09] <cmr> EOF is a condition, though.
[00:36:17] <cmr> And anything not using a condition would use Option or Result
[00:36:25] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[00:36:25] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:36:49] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[00:37:58] <bheylin> cmr: by `ask unicode` you mean the unicode module has a predicate for EOF?
[00:38:11] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Connection reset by peer)
[00:38:20] <kimundi> aaaaaarg
[00:38:32] *** Quits: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: klaus)
[00:38:32] <aatch> bheylin, no, more that I don't think there is an EOF code in unicode.
[00:38:36] <kimundi> Finally found the bug in my geometry culling code
[00:38:50] <aatch> kimundi, let me guess, tiny thing?
[00:38:59] <aatch> Like, '-' -> '+'?
[00:39:05] <bheylin> aatch: yea I came to the same conclusion
[00:39:08] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[00:39:10] <cmr> bheylin: I meant check the standard/a list of char codes for EOF
[00:39:27] <kimundi> aatch: had view = Matrix4f.mul(view, view) instead of view = Matrix4f.mul(proj, view) :P
[00:39:58] <kimundi> That is, I multiplied the same matrix with itself instead of with anothe rone
[00:40:19] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:40:19] *** ChanServ sets mode: +ao brson brson
[00:40:33] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[00:40:33] <bheylin> there are two EOF symbols defined in unicode
[00:40:42] <aatch> kimundi, yep, thought so.
[00:40:52] <kimundi> I literally checked every other involved line :P - I even reimplemented code I copy pasted somewhere else based on a Paper that explains how it works xD
[00:40:56] <aatch> Law of programming, harder the bug is to find, easier it is to fix.
[00:41:02] <kimundi> yep
[00:41:18] <cmr> aatch: I have an awful story involving a race condition, libstdc++, and a missing include.
[00:41:27] <kimundi> Now to reverse the zillion debugging mutations I caused by this ...
[00:41:38] <aatch> kimundi, ugh.
[00:41:39] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:42:00] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[00:42:03] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[00:42:34] <aatch> cmr, my one is spending two days on somehthing because my IDE didn't delete files when it sync'd and I'd moved a file but not changed the include elsewhere.
[00:42:42] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[00:42:44] <kimundi> The fact that I'm writing java code here does not help - avoiding excess allocations is hard and ugly :P
[00:42:55] <cmr> Spent a *week* trying to find this weird bug wherin this code would compile just fine, even with clang, yet would get race condition on startup. Couldn't repro in any way. Add an include (I think it was <thread>) and bam, worked. (This was porting some code from Windows)
[00:43:12] <kimundi> cmr: Sounds scary :D
[00:43:15] <cmr> I almost threw my monitor out the window
[00:43:20] <aatch> cmr, yay C++.
[00:43:39] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[00:43:41] <aatch> I found a segfault in HHVM that fixed by adding `mp->` to a line.
[00:44:41] <cmr> heh
[00:44:59] <celeron55> C++ is good at making those kinds of moments
[00:45:27] <aatch> which is why I like Rust requiring `self` for method calls.
[00:45:45] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:45:48] <diverse> http://pastebin.com/2UsFfF3K
[00:46:17] <aatch> This case was a method on `Map` that took a `Map* mp`, so otherMethod() worked, even though it should have been mp->otherMethod()
[00:47:43] <glaebhoerl> why in the eighty-nine unholy hells is it rebuilding librustc when I told it NO_REBUILD=1? :(
[00:48:22] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:48:24] <aatch> diverse, rust doesn't know that `T` is a scalar there.
[00:49:32] <diverse> aatch: do I need to change T to a different trait?
[00:50:05] <aatch> diverse, yes and no. You won't be able to use `as`, but you can use NumCast
[00:50:44] <aatch> Also, you'll want to add another bound for Rand
[00:51:50] <aatch> so random_number<T:Primitive+Rand>(...) is probably what you want
[00:53:20] *** Quits: jessta (jessta@moz-9DDA1270.dyn.iinet.net.au) (Ping timeout)
[00:54:11] <aatch> or random_number<T:Num+NumCast+Rand>(...) if you don't mind the complexity from the NumCast::from call
[00:55:30] <aatch> Writing actually-typesafe generic numeric code is kinda hard.
[00:57:12] <diverse> That's why I am here to learn from you and everyone. :)
[00:57:51] <aatch> diverse, poke around the traits in std::num, you should be able to figure stuff out.
[01:00:34] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[01:03:13] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[01:04:25] *** Quits: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au) (Quit: kvanb)
[01:08:59] <bjz> diverse: haven't tried this, but does this work? https://gist.github.com/bjz/b33d082f80031c9dbdfb
[01:10:45] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[01:11:28] <diverse> bjz: that works thanks. :)
[01:12:04] <bjz> I've a reasonable amount of numeric stuff with cgmath-rs
[01:12:54] <bjz> the numeric traits need a cleanup though - just haven't got my head around how to do it yet
[01:19:51] *** Joins: nee (nee___@moz-ED93F8BB.netcologne.de)
[01:21:03] <glaebhoerl> dumb question, but what do `make check-stage{1,2}` precisely mean?
[01:21:24] <cmr> glaebhoerl: it's the stages of a bootstrapping compiler
[01:22:17] <cmr> it runs the testsuite against the stage1 compiler (built with the snapshot) or stage2 (built with stage1)
[01:22:37] <glaebhoerl> re: bootstrapping, I knew that part, which is why it's a dumb question :)
[01:23:00] <glaebhoerl> hmm
[01:24:22] <glaebhoerl> though it wasn't clear that stage1 is always built by the snapshot (as opposed to e.g. the previous stage2)
[01:24:43] <cmr> I think that's how the order works
[01:25:10] <cmr> I've been known to mess up how exactly snaphost/stage0/1 end up working
[01:25:24] <cmr> but the stage2 definitely isn't used to build stage1
[01:25:30] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:25:41] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Connection reset by peer)
[01:26:11] *** Joins: shammancer (dannick@389973A5.EBE303D0.DC8692D8.IP)
[01:27:00] *** Joins: mark_edward (quassel@moz-E0F1AB04.hsd1.in.comcast.net)
[01:27:45] *** Joins: z0w0 (zack@moz-D4EF1469.lnse2.cha.bigpond.net.au)
[01:28:38] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[01:29:41] <diverse> how could I use '#[allow(dead_code)]' globally?
[01:29:57] <cmr> diverse: like, across all crates?
[01:31:09] <shammancer> Any idea why it is failing on the linking while compiling rust for me?
[01:31:39] <shammancer> http://pastebin.com/SLRqNt8t
[01:32:10] <diverse> cmr: I meant on top of a crate, but I'm also interested for across all crates as well. 
[01:32:14] <cmr> shammancer: do a clean build, and reconfigure.
[01:32:25] <cmr> diverse: well make it a crate attribute for the crate (don't forget the semicolon!)
[01:32:31] <cmr> but there's no way to do it across all crates.
[01:33:09] <shammancer> What do you mean by clean build. I did rerun ./configure before starting.
[01:33:17] <achin> "make clean"
[01:33:33] <shammancer> gotcha thanks
[01:33:53] <cmr> diverse: are you finding problems with it? why do you want to turn it off?
[01:36:22] <diverse> cmr: I just want to disable the warning for all the code writing because I am not using them atm.
[01:36:33] <diverse> *I'm writing
[01:38:23] <diverse> just to see if they compile :)
[01:38:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:39:01] <cmr> diverse: well it's just a warning. if you don't see red squigglies, it compiled :P
[01:39:41] <diverse> you got me there :)
[01:40:26] <SiegeLord> Well, if it makes it hard to see other, more pertinent, warnings, then it could be a bad thing
[01:41:06] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:42:45] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[01:42:49] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:42:50] *** ChanServ sets mode: +ao brson brson
[01:43:05] <diverse> I'm just telling the compiler to hush temporarily, not to say that dead_code warnings are bad, I see their usefulness.
[01:45:54] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:46:57] *** Quits: vodik (simon@moz-26C1A9B8.home.cgocable.net) (Ping timeout)
[01:48:27] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[01:48:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:49:31] <SiegeLord> Can Rust be compiled with mingw-64?
[01:50:08] <cmr> SiegeLord: yes, mingw-w64
[01:50:21] <cmr> diverse: well you can pass -A dead-code to rustc
[01:50:49] <FreeFull> I'd just get a precompiled version though, unless you are changing the compiler's code
[01:51:08] <SiegeLord> Are there precompiled windows nightlies?
[01:51:17] <SiegeLord> And don't you need a linker from somewhere?
[01:51:23] *** Joins: vodik (simon@moz-26C1A9B8.home.cgocable.net)
[01:51:28] <FreeFull> There probably are
[01:51:34] <FreeFull> mingw does come with a linker
[01:51:54] <FreeFull> Otherwise it wouldn't be too useful
[01:52:24] <SiegeLord> Well, the question is then whether mingw-w64's linker and runtime (if it's still used) would be compatible with Rust
[01:52:32] <cmr> SiegeLord: https://botbot.me/mozilla/rust-internals/msg/9075631/
[01:52:35] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[01:52:35] <SiegeLord> As opposed to the official mingw, which is what's actually tested afaik
[01:52:40] <cmr> yes
[01:52:58] <cmr> we're going to stop using "real" mingw since mingw-w64 is better maintained.
[01:53:41] *** Parts: shammancer (dannick@389973A5.EBE303D0.DC8692D8.IP) (Leaving)
[01:53:44] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[01:54:19] <SiegeLord> Ok, mingw-w64 it is then
[01:54:40] <FreeFull> I'm pretty sure rust nightlies for windows do exist
[01:54:42] <cmr> 64-bit windows still isn't fully supported (no unwinding, -O segfaults, according to klutzy)
[01:54:47] <cmr> FreeFull: not thatI knowof
[01:54:57] <FreeFull> Really? Surprising
[01:55:28] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[01:55:35] <SiegeLord> cmr, But I assume I can compile to 32 bits and have things work?
[01:55:40] <cmr> yup
[01:55:53] <SiegeLord> Good enough for me
[01:57:30] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[01:58:05] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[01:58:26] <aatch> Man I wish we had that pointer trait stuff...
[01:59:20] <achin> can i use spawn with a proc that takes more than zero arguments?
[01:59:55] <cmr> achin: no. don't take arguments, just capture them.
[01:59:55] <aatch> achin, no
[02:00:17] <achin> ok
[02:03:04] *** Joins: dwrensha (chatzilla@moz-39B4ACCD.hrbgpa.fios.verizon.net)
[02:04:17] <aatch> Well at least Rust lets me make C-style memory management a bit safer.
[02:05:44] *** Joins: speckle (speckle@moz-AD109A29.hsd1.md.comcast.net)
[02:10:20] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[02:11:52] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[02:14:21] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:14:36] <bjz> aatch: pointer trait stuff?
[02:15:08] <aatch> bjz, for smart-pointers. So you can overload borrow mostly.
[02:15:22] <bjz> ohh
[02:16:14] <aatch> I've got a `Malloc<T>` to help with some common patterns in this code, mostly because I need to re-allocate extra information after the initial struct.
[02:17:38] <diverse> aatch: will that work with 'box'?
[02:17:45] <cmr> yes
[02:17:47] <aatch> diverse, it should.
[02:17:54] <diverse> sweet :)
[02:18:04] <cmr> box's main reason for existence is smart pointers
[02:19:29] <aatch> Man, I love the region system in Rust, I can do stuff like implement realloc and know that nothing will have it's memory yanked from underneath it.
[02:21:56] *** Quits: Ferreus (ferreus@moz-487F6125.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[02:22:06] <diverse> here's a slogan, 'Rust: systems programming in tranquility'
[02:23:44] <aatch> diverse, yep, that works well lol
[02:23:56] <diverse> thank you :)
[02:26:31] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Quit: Leaving)
[02:28:24] <alan_andrade> Whoever is interested in nuking the wiki, this PR https://github.com/mozilla/rust/pull/11123 is the first phase of doing it.
[02:28:33] <alan_andrade> feedback will be appreciated.
[02:29:07] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Connection reset by peer)
[02:29:36] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[02:29:48] *** Quits: nee (nee___@moz-ED93F8BB.netcologne.de) (Quit: Verlassend)
[02:30:51] <achin> alan_andrade: do you have a rendered version hosted somewhere?
[02:31:31] <alan_andrade> no
[02:36:28] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[02:37:06] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[02:37:26] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[02:39:09] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:40:21] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[02:40:43] *** Joins: pyon (user@D883E380.480D3EC1.1C8C8CE9.IP)
[02:40:56] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[02:42:57] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[02:44:22] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:44:45] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[02:44:54] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:46:14] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:46:35] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:47:51] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:48:15] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[02:48:38] *** Quits: moostik (Icedove@moz-6AF08E46.w92-135.abo.wanadoo.fr) (Ping timeout)
[02:49:17] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[02:50:31] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Ping timeout)
[02:51:16] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[02:52:29] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[02:55:00] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:56:18] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[02:56:42] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Input/output error)
[02:58:29] *** sam113101 is now known as sam113101_afk
[03:00:02] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:00:09] *** sam113101_afk is now known as sam113101
[03:00:45] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[03:01:34] <ercxx> what was the param to run the tests in order
[03:02:05] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[03:03:30] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Ping timeout)
[03:04:56] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:05:25] *** Joins: derek_c (derek@5239664E.4BC8CD52.5C3BDEF0.IP)
[03:05:50] <derek_c> is there any documentation that explains what's 'a?
[03:06:09] <cmr> derek_c: the borrowed pointer tutorial.
[03:06:21] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[03:06:24] <cmr> derek_c: it's just an identifier, though, to give borrowed pointers and explicit lifetime.
[03:07:26] <derek_c> cmr: thanks I will look into that
[03:07:51] <derek_c> cmr: have you decided what to work on for your winter break?
[03:08:16] <cmr> derek_c: I sorted my list and am working down it
[03:08:20] <cmr> Although also doing a lot of relaxing
[03:08:28] <cmr> Last semester was very stressful :)
[03:09:11] <derek_c> cmr: yeah it was for me as well. can you give me the link to your list again? just curious
[03:09:20] <cmr> sure, one sec
[03:10:10] <cmr> https://etherpad.mozilla.org/dVXGixuou0
[03:12:08] <derek_c> thanks
[03:14:08] <derek_c> we might also want to get rid of @ from docs since it's deprecated
[03:14:30] <cmr> As in, don't document things with them at all?
[03:14:31] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[03:14:38] <cmr> or just from the documentatino in general
[03:17:18] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[03:18:39] <derek_c> I mean like, currently the tutorials contain many references and code examples that contain @
[03:18:53] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[03:18:57] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[03:18:59] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[03:19:00] *** Joins: tehgeekmeister (tehgeekmei@EA93C762.860C3797.1A968954.IP)
[03:19:21] <derek_c> since it doesn't even compile, I think we shouldn't put it in tutorials
[03:19:22] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:19:40] <cmr> new code adding them isn't accepted (in the docs)
[03:20:39] *** Joins: mr_sticky (Mibbit@31E29694.B078A1D4.753CF837.IP)
[03:21:02] *** Quits: mr_sticky (Mibbit@31E29694.B078A1D4.753CF837.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:21:36] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[03:21:55] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[03:24:21] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[03:28:06] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Connection reset by peer)
[03:32:53] *** kimundi is now known as zz_kimundi
[03:32:56] *** Joins: amey (user@EA8D8655.7575CC79.BE90E62C.IP)
[03:34:06] *** Joins: gkostyanikov (gkostyanik@62942066.3E410295.CA6E2165.IP)
[03:34:32] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[03:35:50] *** Quits: gkostyanikov (gkostyanik@62942066.3E410295.CA6E2165.IP) (Ping timeout)
[03:37:36] <cmr> bjz: what's your address
[03:37:45] <bjz> ^_^
[03:38:10] <bjz> shall I PM you :D
[03:38:19] <cmr> yes!
[03:38:35] <bjz> heh, jk
[03:38:39] <cmr> darn
[03:38:46] <cmr> I would have showed up outside your window
[03:38:48] <cmr> staring
[03:39:00] <cmr> shown?
[03:39:02] <cmr> feh
[03:39:05] <cmr> </humor>
[03:39:06] <bjz> abit hard
[03:39:18] <bjz> I am on the third floor
[03:39:20] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[03:39:29] <cmr> extern mod antigravity;
[03:39:30] <bjz> plus an ocean away
[03:41:08] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[03:42:39] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[03:45:54] *** Quits: amey (user@EA8D8655.7575CC79.BE90E62C.IP) (Client exited)
[03:49:24] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[03:49:30] <ercxx> I need my tests to run in order, I forgot the parameter and I don't see it in unit testing tut.
[03:49:54] *** Quits: zz_kimundi (kimundi@moz-570D84D2.dip0.t-ipconnect.de) (Ping timeout)
[03:49:57] <cmr> ercxx: RUST_TEST_TASKS=1 iirc
[03:50:11] <cmr> yeah
[03:50:11] <ercxx> cmr: thank you
[03:51:53] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[03:52:10] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[03:52:54] <SiegeLord> Hmm... mingw-builds installs mingw in a weird directory...
[03:52:56] *** Joins: zz_kimundi (kimundi@moz-8417F372.dip0.t-ipconnect.de)
[03:53:13] *** zz_kimundi is now known as kimundi
[03:54:37] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[03:55:11] *** Joins: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net)
[03:57:34] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[04:02:15] <ercxx> when I use RUST_TEST_TASKS=1 the order of functions is 2,1,3 and when I don't use it I get 2,3,1
[04:02:50] <ercxx> the numbers are the order the functions appear in the file
[04:03:33] <aatch> ercxx, there is no guaranteed order for tests. At all.
[04:03:40] <ercxx> :)
[04:03:43] <aatch> Each test should be independent.
[04:04:31] <ercxx> I thought I could use test_init, ....., and finally test_finish().
[04:06:15] <bjz> ercxx: couldn't you just make a #[test] fn test_main() ?
[04:06:16] <aatch> ercxx, nope. Each test is run in it's own task. RUST_TEST_TASKS just make it so there's only 1 host thread (I think)
[04:06:37] <bjz> aatch: heh, poor naming
[04:06:42] <ercxx> I am playing with a c wrapper
[04:07:06] <ercxx> It needs a init() and a finish() at the and.
[04:07:24] <aatch> ercxx, why not init() and finish() at the start and end of each test?
[04:07:34] <bjz> can't you just do... yeah, what aatch said
[04:07:35] *** Quits: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net) (Ping timeout)
[04:07:43] <ercxx> finish acted weird
[04:07:50] <ercxx> when called multiple times
[04:07:53] *** Joins: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net)
[04:08:08] <ercxx> I didn't want to find out why
[04:08:47] <ercxx> ` * This function must be the last API function called. It should be called only
[04:08:49] <ercxx> `
[04:08:52] <aatch> ercxx, ok, what happens if you init once and don't `finish`?
[04:09:04] <bjz> ercxx: you might just have to do one test, and have sub functions
[04:09:18] <ercxx> init doesn't run first necessarily
[04:09:18] <bjz> ercxx: some C libs act weird with multiple tasks
[04:09:27] <ercxx> bjz: that makes sense
[04:09:32] <ercxx> the sub function part
[04:09:57] <ercxx> but they wouldn't pretty print in terminal like the other tests
[04:10:01] <bjz> ercxx: it's a pain because you don't get as fine grained info
[04:10:02] <bjz> no
[04:10:23] <aatch> ercxx, the only other option I can think of is driving the test-suite manually.
[04:10:31] <bjz> it's also a pain if you want to run a test on the main thread
[04:10:39] <bjz> which I don't think you can
[04:10:50] <aatch> It's all in libextra, though I haven't really looked.
[04:11:28] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:11:44] <ercxx> I will probably go with sub func route.
[04:11:54] <bjz> ercxx: Rust's test-suite framework isn't beholden to C libs, which I think is a good thing, but it does make some things tricky
[04:12:05] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:12:12] <bjz> does your C lib interact with the main os event loop?
[04:12:48] <ercxx> It's not my lib, it's libupnp. I just wanted to write a wrapper to it so I can play with it in rust.
[04:13:14] <ercxx> And eventually convert it, to rust keeping the api familiar to people who are used to the C version.
[04:14:15] <ercxx> That didn't really answer your question. The answer would be 'nope, no idea what kind of magic it's doing'.
[04:14:43] <speckle> Hello, I have a newbie question - if I wanted to make GUI applications in Rust, would lifting GUI code from the Servo project be the best option? Or at least a viable one.
[04:14:46] *** Quits: dwrensha (chatzilla@moz-39B4ACCD.hrbgpa.fios.verizon.net) (Ping timeout)
[04:15:02] <cmr> speckle: servo doesn't have a GUI
[04:15:10] <aatch> speckle, Servo is just a rendering engine.
[04:15:17] <cmr> it does all its own rendering (it is a render engine after all)
[04:15:31] <aatch> So there's no chrome, which is what you probably want.
[04:15:37] <ercxx> speckle: there are bunch of rust bindings for ui libs on github.
[04:15:42] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[04:16:13] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:16:19] <speckle> Does Servo's engine include rendering things like widgets on the screen, though, or just webpages?
[04:16:33] <aatch> speckle, just webpages.
[04:16:39] <ercxx> speckle: here's gtk stuff https://github.com/search?q=rust+gtk&type=Repositories&ref=searchresults
[04:16:41] <speckle> Ah, thanks!
[04:17:28] <speckle> I now understand the role of a rendering engine, and how it's not enough to create GUI applications.  Thank you very much.
[04:17:38] <cmr> well it is
[04:17:48] <cmr> see any frontend framework
[04:17:59] <cmr> the web is a very powerful platform
[04:18:07] <cmr> servo isn't what you're lookingfor though
[04:19:34] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:22:40] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:24:03] <bjz> speckle: well it's a rendering engine for web stuff, not native UIs. native UIs still have to render to the screen
[04:25:36] <bjz> that's why you want something like GTK, Qt or Cocoa, to handle the rendering of the ui stuff. (and behaviours of things). Unfortunately most GUI frameworks are written in C++ :(
[04:25:59] <bjz> Cocoa would be easier, but it's only for OSX
[04:26:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[04:27:14] <bjz> speckle: http://en.wikipedia.org/wiki/List_of_widget_toolkits
[04:28:15] <speckle> Things don't seem particularly pleasant on the web side either, in my opinion.  It seems like a mess of corner case spaghetti and cross-platform incompatibility
[04:28:16] <bjz> http://en.wikipedia.org/wiki/List_of_widget_toolkits#Based_on_C_.28including_bindings_to_other_languages.29
[04:29:29] <aatch> speckle, web-side isn't too bad.
[04:29:47] <aatch> Depending on what you want to do and what your restrictions are.
[04:31:16] <speckle> What kind of plans does Mozilla have for writing GUIs for its own Rust applications? 
[04:31:22] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[04:31:32] <aatch> speckle, probably none.
[04:32:06] <aatch> Given that it's own rust applications consist of Servo, which is highly experimental, and rustc, which is a command-line tool.
[04:32:25] <aatch> (and some smaller rustc-related applications, like rustdoc)
[04:33:31] <carter> tautologico: btw: thanks for prompting me to look at the FLAME project pages 
[04:33:38] <carter> tautologico: the BLIS lib looks really sweet
[04:33:44] <carter> may use it as a backend for someone of my stuff
[04:33:47] <carter> or borrow some of its code
[04:34:30] <bjz> speckle: always room for a GUI framework written in Rust!
[04:34:43] * bjz chuckles
[04:34:49] *** Quits: Dessimat0r (Dessimat0r@3258E608.E588CE06.9A579328.IP) (Ping timeout)
[04:35:02] <bjz> shouldn't take too long
[04:35:24] <speckle> Looking more closely at Gecko, though, it seems like it *can* render widgets marked up by XUL - so maybe Servo will also gain that functionality in the future.
[04:35:34] <bjz> ugh
[04:35:38] <bjz> xul
[04:36:21] <speckle> is XUL bad?
[04:36:37] <bjz> I'm wondering if mozilla will move more towards that new ui markup language that they have in Firefox OS
[04:37:26] *** Joins: Dessimat0r (Dessimat0r@3258E608.E588CE06.9A579328.IP)
[04:38:08] <slimer> Woot learned something new, I didn't know Firefox OS existed :D
[04:38:52] * aatch hates XML-based formats
[04:38:57] <bjz> yup
[04:39:07] <bjz> sexprs!
[04:39:07] <aatch> Atleast, XML based formats for the sake of it.
[04:39:15] <bjz> yeah
[04:39:42] <speckle> What kind of formats do you like?
[04:39:50] * bjz wonders what folks will think of JSON in the future
[04:39:59] <aatch> speckle, best one for the job, lol.
[04:40:05] <carter> bjz: they'll think "whyyyy"
[04:40:20] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[04:40:28] <carter> JSON is simple… but too simple
[04:41:02] <yichoi> Is there any proposal or reference to call rust library or packages from C ?
[04:41:22] <bjz> yichoi: you can already
[04:41:35] <aatch> However, XML is rarely the best tool for the job. My experience has been that you just move the problem of parsing a file format to the problem of converting from the XML-data to whatever actual datastructure you want.
[04:41:37] <bjz> speckle: the issue is that xml is so bloated and unwieldy
[04:42:02] <bjz> speckle: plus as aatch says it's painful to parse
[04:42:04] <aatch> It's hard to write, hard to read, hard to parse.
[04:42:46] <bjz> yichoi: redbrain.co.uk/crust-calling-rust-from-c/
[04:42:56] <bjz> yichoi: :)
[04:43:20] <bjz> aatch: lots of folks seem to like json these days
[04:43:33] <bjz> I mean speckle
[04:43:51] <bjz> speckle: there is yaml too
[04:43:54] <speckle> Hmm, I thought it would be quite simple to read/write due to its tree structure - certainly not as hard as C++ templates or anything.  Also, there's EXI for compression if you are worried about bloat.
[04:44:24] *** Joins: echristo (echristo@moz-DBB0A5CE.oc.oc.cox.net)
[04:44:43] <bjz> http://yaml.org/
[04:45:42] <yichoi> bjz: thanks. almost same what I imagined
[04:46:01] <bjz> for binary data there is http://kentonv.github.io/capnproto/ (there's a Rust version)
[04:46:26] <aatch> It's mad, XCB have the protocol definitions in XML. But because they have to have arbitrary expressions, this: 'foo*(bar/8)' becomes '<op op="*"><fieldref>foo</fieldref><op op="/"><fieldref>bar</fieldref><value>8</value></op></op>'
[04:46:33] <bjz> I'm having a go at implementing: http://people.csail.mit.edu/rivest/Sexp.txt
[04:46:44] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[04:47:22] <bjz> ocaml has a lib for it apparently: https://realworldocaml.org/v1/en/html/data-serialization-with-s-expressions.html
[04:47:24] <aatch> I'm also not a huge fan of JSON, though it is at least more honest about it's lack of structure.
[04:47:46] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[04:47:56] <eevee> json is nice for being a least common denominator
[04:48:03] <eevee> and reasonably easy to traverse
[04:48:09] <bjz> eevee: yep
[04:48:12] <eevee> atm we basically suck at coming up with new formats
[04:48:28] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[04:48:37] <aatch> XML likes to pretend that it does via those .xsd files, which nobody uses.
[04:48:51] <bjz> and then of course whenever you do somebody pulls out that xkcd comic :)
[04:48:58] <o11c> the worst part about XML is that there is no consistent way handle stuff other than tags
[04:49:25] * bjz never knew about .xsd files
[04:49:34] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:49:34] <o11c> <tag>what<nest>is</nest>this</tag>
[04:50:13] <aatch> The thing is, for simple data, JSON is more than enough, and for complex data you'll probably be better off with something custom.
[04:50:15] <o11c> especially since a lot of times those chunks have whitespace
[04:50:26] <bjz> aatch: yep
[04:50:42] <o11c> though I'd give JSON two thoughts for custom things anyway
[04:52:20] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[04:53:17] <aatch> I'm also talking about formats intended to be, at least mostly, hand-written.
[04:53:36] <aatch> JSON is reasonably good in that space.
[04:54:51] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:55:03] <aatch> Once you start getting to the point where the semantics you need are more complex than just the name of the field, neither XML or JSON are going to cut it any more.
[04:59:21] <o11c> what's the best way to make a string consisting of a character repeated? C++: std::string(N, 'c')
[05:01:52] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:01:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:05:57] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:06:06] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[05:06:38] <tautologico> carter: np
[05:07:20] <carter> tautologico: if nothing else, it gives me an alternative to openblas for my blas bindings, with a slightly more modern api, though i still need to sort out lapack bindings
[05:07:43] <carter> though I think my api ideas may subsume the BLIS lib if i get some details right
[05:07:55] <carter> but may as well have benchmarks keep me honest in the mean time :) 
[05:08:37] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[05:11:09] <diverse> bjz: yaml ftw
[05:11:53] <tautologico> carter: libflame does the higher level stuff (similar to lapack) but I think their approach is mostly to get you using their scheme for expressing algorithms more "directly", and this can even lead to better performance
[05:12:05] <carter> tautologico: agreed
[05:12:17] <carter> so in some respects what i'm doing is in the sprit of FLAME
[05:12:23] <carter> but using fancier types ;)
[05:12:41] <tautologico> I'm curious about trying to express similar ideas in higher level languages like OCaml, maybe rust
[05:12:53] <carter> tautologico: well, i'm trying to finialize doing it in haskell
[05:13:21] <carter> and i think i can do a ghetto version in current rust, and if rust gets HKT and such, i could do a pretty nice version in rust
[05:13:43] <carter> one really really cool think is i have a nice way to talk about locality on different matrix formats
[05:13:51] <carter> and adding new matrix formats in a super light weight way
[05:14:09] <carter> and making blocking easier
[05:14:21] <carter> which i suspect will matter more once i get to gpu stuff
[05:14:34] <carter> if my reading of the PLASMA etc papers is indicative of anything
[05:14:47] *** Joins: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au)
[05:15:23] *** Joins: GeneralMaximus (ankur@7740FA5E.C7B037C1.4C8D5582.IP)
[05:16:29] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:16:35] <tautologico> memory access patterns are very important for gpu performance
[05:16:42] *** Quits: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au) (Ping timeout)
[05:16:59] <tautologico> well, cpu performance as well, considering cache, locality etc
[05:17:04] <carter> yup; :)
[05:17:07] *** Joins: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au)
[05:17:07] <ercxx> what's the easiest way of converting a *char to a ~str? I'm doing CString::new().as_str().unwrap()
[05:17:15] <carter> tautologico: i agree on both counts
[05:17:16] <tautologico> but coalesced access, block shared memory etc on GPUs are crucial
[05:17:37] <dbaupp> ercxx: there's an unsafe function in `std::str::raw`
[05:17:42] <dbaupp> ercxx: (iirc, from_c_str)
[05:17:51] <carter> i'm as yet totally unfamilaar with gpu tooling, but i've some ideas that help with that on CPU, but i suspect they'll make a bigger difference in gpu
[05:17:51] <dbaupp> ercxx: but the CString method does more checks
[05:18:11] <ercxx> It dumps a stacktrace
[05:18:26] <carter> basd on how random / strided acess  on gpu is supposed to be substantially worse than cpu
[05:18:43] <dbaupp> ercxx: what do you mean?
[05:18:53] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Client exited)
[05:18:55] <carter> my near term goal is to make it easy to write high level code that gets within one order of magnitude of the best stuff i can find for a given alg
[05:19:03] <carter> and then figure out how to shave that gap
[05:19:17] <ercxx> I mean if I pass true as the second parameter in CString::new() it complains about a missing pointer when calling free() somewhere.
[05:19:44] *** Quits: GeneralMaximus (ankur@7740FA5E.C7B037C1.4C8D5582.IP) (Ping timeout)
[05:19:54] <ercxx> Which seems to be caused by calling unwrap() on a None, so that seems like my fault :)
[05:20:04] <dbaupp> ercxx: were are you getting the c string from
[05:20:13] <dbaupp> ?
[05:20:14] <dbaupp> *where
[05:20:16] <ercxx> libupnp
[05:20:26] <carter> tautologico: anyways, thanks for the nudge
[05:20:38] <carter> i'll ping you once the allegedl lib  i'm working on is public
[05:20:56] <ercxx> *char UpnpGetServerAddress()
[05:21:09] <dbaupp> ercxx: is it malloced, or is it static?
[05:21:42] <tautologico> carter: I'll definitely want to take a look at it
[05:21:52] *** Joins: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net)
[05:21:53] <carter> i will too if i can time travel
[05:22:02] <ercxx> dbaupp: I'm not a clever person.
[05:22:06] <carter> the initial preview alpha i'm hoping to get out soon will have a lot of wrong things
[05:22:16] <carter> but i'm trying to make it so that the core is "right"
[05:22:38] <ercxx> dbaupp: I didn't write it.
[05:22:42] <carter> though ii'll have to make a few breaking changes during the first year of usage i suspect
[05:22:50] <ercxx> dbaupp: I'm just trying to wrap it in rust.
[05:23:02] <carter> but right now hammering out a few corner cases in the blocking type model
[05:23:47] <dbaupp> ercxx: the second parameter to CString::new indicates if the pointer should be freed by the destructor of the CString or not
[05:24:22] <ercxx> it blows up when it's true.
[05:25:21] <dbaupp> ercxx: so if libupnp allocates memory to return which the user is required to free, that needs to be true; otherwise, it should be false.
[05:25:38] <dbaupp> ercxx: I don't know the details of libupnp, so I can't help beyond that :)
[05:25:59] <ercxx> dbaupp: That's plenty of help. Thank you.
[05:29:38] <o11c> ugh, #[no_implicit_prelude]; is horribly broken
[05:29:57] <o11c> can't even do a for loop
[05:30:47] *** Joins: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au)
[05:30:51] <dbaupp> o11c: in what way?
[05:31:42] <dbaupp> yes, you need to import Some and None
[05:32:03] <dbaupp> (that's more `for` being horribly broken than #[no_implicit_prelude] :P )
[05:33:03] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[05:33:24] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[05:34:47] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Input/output error)
[05:35:51] <o11c> and it's very unexpected that I can't call methods on an object just because I haven't imported the *trait* ...
[05:36:02] *** Quits: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net) (Ping timeout)
[05:36:32] <dbaupp> that's required for coherency, fwiw
[05:36:42] <pyon> o11c: That makes perfect sense - the trait, not the struct, is the one that has the methods.
[05:37:01] *** Joins: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net)
[05:37:13] <dbaupp> if two crates impl a trait with the same method name (e.g. .bar), calling `foo.bar()` needs some way to tell which trait the method comes from
[05:37:40] <dbaupp> which is done by checking the crates in scope (and only working when there is exactly one with that method name)
[05:37:43] <o11c> in other words, if I write my own structs and I want to implement my own traits, there is no way to make it transparent to my callers
[05:37:50] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:38:01] <o11c> they *have* to deal with the fact that the methods are from a trait, not on the struct itself
[05:38:12] *** Quits: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net) (Max SendQ exceeded)
[05:38:22] <o11c> (this is not directly relevant to no_implicit_prelude anymore ...
[05:38:32] <o11c> just that most traits are from the prelude)
[05:38:35] <dbaupp> if there is some common behaviour that is being captured by the traits, isn't that relatively sensible?
[05:38:52] <o11c> no, it's not sensible
[05:38:53] <dbaupp> i.e. the users may also wish to be generic over the traits
[05:39:02] <pyon> o11c: a trait is a lot more like a STL concept (minus the exported typedefs) than an OO class
[05:39:11] <o11c> sure, there are times you might want the trait itself, and then you'd name it
[05:39:27] <o11c> but if you have the object, you should be able to call *all* of the methods implemented on it
[05:39:39] *** Joins: victorporof (victorporo@221F1DFA.9004F55.9B1E38F4.IP)
[05:40:25] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Connection reset by peer)
[05:40:49] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[05:40:56] <dbaupp> it can't work
[05:40:59] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[05:41:10] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[05:42:14] *** Joins: GeneralMaximus (ankur@690C1069.C26265AD.E28C2422.IP)
[05:42:15] <dbaupp> one crate defines a struct and a trait with a method `bar` and impls it for that struct; another crate defines a new trait with that method name and impls it for the struct... now `struct.bar()` doesn't work sanely
[05:42:36] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[05:42:46] <slimer> Hi, does anyone understand what's going on here?
[05:43:58] *** Quits: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au) (Ping timeout)
[05:43:58] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:44:16] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[05:45:08] *** Quits: indirect (indirect@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[05:45:08] *** Quits: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com) (Ping timeout)
[05:45:08] *** Quits: jackinloadup (jackinload@moz-E630552F.compute-1.amazonaws.com) (Ping timeout)
[05:45:17] <slimer> http://imgur.com/vOWkTq3
[05:45:18] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[05:45:35] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[05:45:51] *** Quits: kmc (keegan@moz-2C6EE959.compute-1.amazonaws.com) (Ping timeout)
[05:46:24] *** Quits: mletterle (michael@moz-CD281E3A.compute-1.amazonaws.com) (Ping timeout)
[05:47:00] <slimer> I guess imgur is having problems, another link
[05:47:01] <slimer> http://postimg.org/image/natubuu8p/
[05:47:23] <o11c> slimer: drop the ;
[05:47:24] *** Joins: jackinloadup (jackinload@moz-E630552F.compute-1.amazonaws.com)
[05:47:30] *** Quits: vodik (simon@moz-26C1A9B8.home.cgocable.net) (Ping timeout)
[05:47:36] *** Joins: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au)
[05:47:55] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[05:48:34] *** Joins: indirect (indirect@moz-3589B90B.c.ircrelay.com)
[05:49:05] *** Joins: kmc (keegan@moz-2C6EE959.compute-1.amazonaws.com)
[05:49:06] *** ChanServ sets mode: +o kmc
[05:49:28] <slimer> Can you explain why?
[05:49:57] <slimer> Thanks though :)
[05:50:44] <bjz> slimer: use gist, it's much easier
[05:51:25] <slimer> thx@
[05:51:26] <slimer> thx!*
[05:51:46] <o11c> dbaupp: I don't see any possible ambiguity in this: https://gist.github.com/o11c/8092246
[05:51:54] *** Joins: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net)
[05:52:08] <o11c> dbaupp: sure, there would be one if the method were *provided* by the trait, but it isn't
[05:52:27] <bjz> impl MyStruct { fn get() { ... } }
[05:52:52] <diverse> slimer: because you are using the terminator ';' after the expression in line 81, nothing returns which the fn is expecting.
[05:53:49] <o11c> bjz: right, but MyStruct knows that *other* callers might care about the trait
[05:54:10] <bjz> slimer: in rust, an expression returns if the semicolon is left off
[05:54:30] <bjz> slimer: if you add a semicolon it returns ()
[05:54:57] <dbaupp> o11c: no, but what if there were two traits defining `.get`?
[05:55:02] <bjz> fn foo() {} is just sugar for fn foo() -> () {}
[05:55:11] <bjz> dbaupp: oh yeah, better example
[05:55:36] <o11c> dbaupp: well, only one of them is impl'ed by MyStruct.
[05:55:59] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[05:56:47] <bjz> slimer: you could have `fn foo() -> i32 { 1 }` or `fn foo() -> i32 { return 1; }` but not `fn foo() -> i32 { 1; }` , because `1;` returns `()`
[05:56:54] <dbaupp> o11c: and MyStruct impl'd both traits
[05:57:11] <o11c> dbaupp: I trust the writer of MyStruct not to do something like that
[05:57:27] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[05:58:26] <dbaupp> o11c: why?
[05:59:05] <dbaupp> o11c: (this has concerns cross-crate... e.g. someone else could take your MyStruct and create a new trait with .get in a new crate.)
[05:59:25] <o11c> that impl wouldn't be in the same mod as MyStruct
[06:00:27] <ercxx> so I have a C func that's something like this : func( const char *ip, unsigned short *port), and both the parameters are optional. I can send a std::ptr::null() to the first one but what is the proper way of sending NULL to the second one?
[06:00:44] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[06:00:53] *** Quits: dbaupp (Thunderbir@moz-39159202.pa.nsw.optusnet.com.au) (Ping timeout)
[06:00:57] <Yurume> ercxx: use Option.
[06:01:02] <Yurume> hmm wait,
[06:01:11] <Yurume> sorry, are you doing FFI stuffs?
[06:01:17] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[06:01:18] <ercxx> Yurume: yep
[06:01:34] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[06:01:44] <Yurume> you can use *c_ushort (I think) as well.
[06:02:22] <Yurume> that is, let port = 42; func(ip, cast::transmute(&port)), or when port is NULL, func(ip, ptr::null()).
[06:02:51] <ercxx> It complains when I send ptr::null() for ip.
[06:02:58] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Words do not express thoughts very well.)
[06:03:01] <ercxx> Since it's not expecing a pointer.
[06:03:18] <Yurume> ip should be *c_char as well.
[06:03:44] <Yurume> (and use as_ptr wrapper for converting ~str/&str to null-terminated C string)
[06:05:02] <ercxx> ip is *c_char.
[06:05:10] <ercxx> Is NULL = 0 in C?
[06:05:38] <Yurume> (void*)0, which is a special constant and does or does not equal to integer constant 0.
[06:05:41] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[06:05:46] <bjz> ercxx: what do you mean by 'it complains'?
[06:05:53] <Yurume> (which is another reason to use ptr::null())
[06:06:00] <bjz> ptr::null() is what you should use
[06:06:44] <ercxx> bjz: It says:  error: mismatched types: expected `u16` but found `*<V1>` (expected u16 but found *-ptr)
[06:07:09] <Yurume> ercxx: isn't it `port`?
[06:07:14] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Words do not express thoughts very well.)
[06:07:15] <bjz> fn null<T>() -> *T; is the type signature I believe, so it should be perfectly fin for func(ip: *c_char, port: *c_ushort)
[06:07:25] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[06:07:30] <Yurume> you need to borrow a pointer from the variable which contains u16.
[06:07:47] <ercxx> but port is not a `*`
[06:07:52] <bjz> ercxx: is the type signature *c_char?
[06:07:57] <bjz> for ip?
[06:08:06] <ercxx> nope it's unsigned short 
[06:08:07] <Yurume> hence: let port: u16 = 42; let port_ptr: *u16 = cast::transmute(&port); /* now pass `port_ptr` to `func` */
[06:08:23] <bjz> ercxx: you said, "so I have a C func that's something like this : func( const char *ip, unsigned short *port),"
[06:08:38] <ercxx> I am sorry.
[06:08:42] <ercxx> Typo.
[06:08:46] <bjz> that's extern "C" { fn func(ip: *c_char, port: *c_ushort); }
[06:08:53] <ercxx> It's not a `*`.
[06:08:56] <bjz> oh
[06:08:58] <Yurume> oh
[06:09:05] <bjz> then how can it be optional?
[06:09:28] <ercxx> lemme pastebin it
[06:09:43] <bjz> also paste the thing from the header file
[06:09:44] *** Quits: GeneralMaximus (ankur@690C1069.C26265AD.E28C2422.IP) (Connection reset by peer)
[06:09:58] <ercxx> http://pastebin.com/7bVxAbyL
[06:10:09] <ercxx> that's the header.
[06:10:23] <Yurume> ha, it seems the documentation is wrong
[06:10:34] <bjz> weird
[06:10:36] <ercxx> mine is extern {pub fn UpnpInit(HostIP: *c_char, DestPort: c_ushort) -> c_int;}
[06:10:53] <Yurume> or it is possible that the author intended port 0 to be an "arbitrary free port"
[06:11:02] <bjz> yeah
[06:11:04] <ercxx> Do people send 0 for these situations?
[06:11:06] <ercxx> oh
[06:11:12] <bjz> do you have examples?
[06:11:19] <Yurume> (which is discouraged but possible and some people manages to do so)
[06:11:24] <bjz> or maybe ask the author of the lib
[06:11:27] <ercxx> nope, just started looking at it
[06:11:35] <bjz> or look at the source code of the lib
[06:11:47] <ercxx> I will. Thank you both.
[06:12:03] <bjz> http://stderr.org/doc/libupnp-dev/html/UpnpInit.html
[06:12:14] <bjz> "DestPort - The destination port number to use. 0 will pick an arbitrary free port"
[06:12:43] <bjz> first thing on google for `UpnpInit`
[06:12:43] *** Joins: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au)
[06:13:11] <dbaupp> o11c: (sorry I dropped out) I don't quite understand why being in the same mod is relevant?
[06:13:13] <bjz> another set of docs says it's deprecated
[06:13:15] *** Joins: alonlevy (alon@moz-39E84D11.bb.netvision.net.il)
[06:13:33] <bjz> are you using the latest version of whatever lib this is?
[06:14:02] <ercxx> bjz: It is deprecated.
[06:14:37] <ercxx> But my version has an ifdef block for ipv6 and init2 is in there
[06:15:02] <ercxx> on arch
[06:15:04] <bjz> ok
[06:15:31] *** Joins: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[06:15:43] <ercxx> dbaupp: thanks again
[06:15:48] <Yurume> hmm, it's interesting, I have searched for upnp.h and it says "0 will pick an arbitrary free port" even on the first CVS version committed in 2003.
[06:15:52] <Yurume> http://upnp.cvs.sourceforge.net/viewvc/upnp/libupnp/upnp/inc/upnp.h?view=log
[06:16:11] <ercxx> I'm not a clever man.
[06:18:06] <o11c> dbaupp: that said ... since we're facing that Rust does *not* support this ... perhaps the solution is to add something like "impl transparent MyTrait for MyStruct" that is basically equivalent to "impl MyTrait for MyStruct" + "impl MyStruct" with the same body. Of course, then you have to explain to everyone why you need to do it so verbosely ...
[06:19:16] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[06:19:36] <dbaupp> o11c: I'm not keen; but others might be.
[06:19:37] <o11c> dbaupp: a trait that is impl'ed in the same mod as the struct is (conceptually at least) associated with the struct. A trait that is impl'ed in the same mod as the trait is conceptually a new trait that happens to be implementable for old structs.
[06:19:57] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[06:20:34] <o11c> or, another way of distinguishing them is "impl trait for struct" vs "impl trait for trait"
[06:20:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:20:44] <diverse> ah man, I can't even do this? 'use std::io::{File, buffered::BufferReader};'?
[06:21:17] <o11c> dbaupp: what's stopping people from inserting random methods using "impl struct" anyway?
[06:21:22] <Yurume> use std::io::{File, buffered::{BufferReader, BufferWriter}};
[06:21:26] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[06:21:26] <Yurume> gaaaah
[06:21:27] <o11c> (I mean, methods that conflict with a trait)
[06:21:32] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:21:52] <diverse> Yurume: I don't need BufferWriter though.
[06:22:16] <dbaupp> o11c: you can't write `impl struct { .. }` outside of the current crate
[06:22:26] <dbaupp> s/current crate/crate in which the struct is defined/
[06:22:56] <dbaupp> so being able to see the struct => you can see all non-trait `impl` methods.
[06:23:02] <Yurume> yeah, I thought a natural extension to that (imaginary) syntax looks... miserable.
[06:23:36] <dbaupp> o11c: (by "you can't", I mean the compiler currently disallows it for coherency)
[06:23:51] *** Quits: pyon (user@D883E380.480D3EC1.1C8C8CE9.IP) (Quit: brb)
[06:23:58] *** Joins: pyon (user@D883E380.480D3EC1.1C8C8CE9.IP)
[06:24:45] <dbaupp> o11c: in any case, I agree with your conceptual impl-in-trait-mod impl-in-type-mod distinction (i.e. it's the heuristic that ends up being used), but I don't think we should encode that into the compiler
[06:25:30] <o11c> thus why I suggested "impl transparent" or something
[06:25:49] <diverse> Yurume: doing it your way doesn't work either.
[06:25:55] <dbaupp> o11c: random (heh) example: the impls of std::rand::Rand for the core types are in a separate module to avoid them cluttering up the main module https://github.com/mozilla/rust/blob/master/src/libstd/rand/rand_impls.rs
[06:26:27] <Yurume> diverse: of course, I meant that if your way is possible then my way has no reason to be impossible
[06:26:29] <o11c> with the same compiler-enforced "can't impl transparent from another crate"
[06:26:55] <Yurume> how about using `use std::io::{File, buffered};`?
[06:27:08] <Yurume> (and use buffered::BufferReader when needed)
[06:28:01] *** Quits: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au) (Ping timeout)
[06:31:54] *** Joins: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au)
[06:31:59] *** Joins: zeittunnel (benjamin@moz-370FCEBA.dip0.t-ipconnect.de)
[06:34:41] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[06:34:55] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:34:57] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[06:36:04] <ercxx> I didn't see anything in std::net::ip, how do we get the ip address of a network device? 
[06:36:35] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[06:36:49] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[06:37:13] <olsonjeffery> are there any current macro tutorials out there?
[06:37:30] <ercxx> there's get_host_addresses but that doesn't look like it does what I want.
[06:37:48] <dbaupp> olsonjeffery: other than http://static.rust-lang.org/doc/master/tutorial-macros.html , you mean?
[06:40:33] <olsonjeffery> hm. can you emit modules w/ macro_rules!() ?
[06:40:52] <olsonjeffery> and pass in a fragment of the name in the invocation of the macro..?
[06:40:59] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[06:43:36] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[06:46:48] <Yurume> olsonjeffery: macro_rules! define_foo(() => (mod foo { ... })) define_foo!()
[06:47:52] *** Quits: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au) (Ping timeout)
[06:48:08] <olsonjeffery> nice nice nice nice
[06:48:11] <olsonjeffery> yeah i got it working.
[06:48:20] <bjz> olsonjeffery: macro_rules! define(($name:ident) => (mod $name { ... })) define!(foo)
[06:48:27] <olsonjeffery> im surprised i got this far w/o writing macros. used to write macros all. the. time. in boo
[06:49:17] <bjz> :)
[06:49:19] <olsonjeffery> mapping a sprite tiles in a sprite sheet is pretty tedious
[06:49:31] <olsonjeffery> code gen to the rescue
[06:49:40] <bjz> just wish we could export them
[06:49:46] *** Joins: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au)
[06:50:02] <ercxx> When I try to get the ip number using get_host_addresses("localhost") it gives 127.0.0.1 my hostname also gives 127.0.0.1
[06:50:15] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[06:50:47] <ercxx> but not the ip number assigned to my network adapter
[06:51:55] *** Quits: indirect (indirect@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[06:51:55] *** Quits: carter (carter@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[06:52:51] *** Joins: indirect (indirect@moz-3589B90B.c.ircrelay.com)
[06:52:59] *** Joins: carter (carter@moz-3589B90B.c.ircrelay.com)
[06:53:17] *** Joins: trecer_ (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[06:53:24] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Connection reset by peer)
[06:53:25] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[06:54:29] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:56:55] *** Joins: blank_na1e (blank_name@78B04CD2.66204B68.6D228269.IP)
[06:57:05] <dbaupp> ercxx: you want your external ip address?
[06:57:11] *** Quits: trecer_ (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Connection reset by peer)
[06:57:17] <ercxx> nope, my local 
[06:57:23] *** Joins: trecer_ (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[06:57:28] *** Quits: blank_name (blank_name@3D456DE8.9E887BEB.53C6B850.IP) (Ping timeout)
[06:58:44] <diverse> help http://pastebin.com/Ebv4rrLm
[06:59:39] <dbaupp> diverse: you need type hints on the .collect()
[06:59:45] <dbaupp> diverse: or just use .to_owned_vec
[07:00:11] *** Quits: trecer_ (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Quit: Computer has gone to sleep.)
[07:00:31] <dbaupp> btw, that will fail if `input` is shorter than `line`
[07:00:46] <dbaupp> also, it is doing a byte-wise comparison
[07:01:20] <dbaupp> diverse: are you just trying to count the number of lines equal to `input`?
[07:01:26] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[07:03:26] <diverse> dbaupp: yeah, well the number of occurences of 'input'
[07:03:32] <Kelet> Does anyone use rust-sfml on Windows?
[07:03:38] <Kelet> Or rather has anyone gotten it to work?
[07:04:23] *** Quits: alonlevy (alon@moz-39E84D11.bb.netvision.net.il) (Ping timeout)
[07:04:52] <dbaupp> diverse: including if it occurs multiple times in a line?
[07:05:13] <diverse> dbaupp: correct
[07:06:50] <diverse> if you have a better approach in mind, I'm all ears. :)
[07:07:03] <dbaupp> diverse: `let mut strcount = 0; for line in lines() { strcount += line.split_str(input).len() - 1; }`
[07:08:27] <dbaupp> diverse: or, even, `reader.lines().fold(0, |sum, line| sum + line.split_str(input).len() - 1)`
[07:09:44] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[07:09:59] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:11:53] <dbaupp> or, slightly more efficiently, replace `.split_str().len() - 1` with just `.match_indices(input).len()`
[07:12:21] *** Quits: slimer (Mibbit@moz-DEF859BF.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:12:24] <dbaupp> ( http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.len and http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.match_indices )
[07:14:16] <diverse> dbaupp: I like the 'match_indices' so far :)
[07:17:06] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[07:24:40] *** Joins: Ms2ger (Ms2ger@F98499EB.6D359A20.187A1082.IP)
[07:25:18] *** Quits: dbaupp (Thunderbir@moz-F5D54E8A.pa.nsw.optusnet.com.au) (Ping timeout)
[07:26:32] <olsonjeffery> Kelet: sorry i tried it and gave up pretty quickly.. im glad i did because im really enjoying working w/ rust-sdl2
[07:26:53] <olsonjeffery> iirc i was getting a segfault when running my program
[07:27:03] <olsonjeffery> although im on osx 10.8, so ymmv
[07:29:08] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[07:30:45] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[07:30:53] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[07:31:17] <Kelet> olsonjeffery: Ah. I'm just making a simple game, and I'm not too educated on things like OpenGL, and SDL2 seems to be great if you want to work with OpenGL - otherwise, it's a lot of work to just use SDL renderer.
[07:32:02] <bjz> Kelet: btw, we have #rust-gamedev :)
[07:32:12] <Kelet> Also rust-sdl isn't even SDL2 yet seemingly (although I saw an sdl2 binding for rust somewhere)
[07:32:18] <Kelet> bjz: I'm there :)
[07:32:21] <olsonjeffery> Kelet: AngryLawyer/rust-sdl2
[07:32:26] <bjz> oh cool
[07:33:16] <Kelet> I'm just trying to build the newest Rust on windows b/c apparently rust-sfml uses ~master on rust, no chance to use it with 0.8
[07:33:23] <Kelet> (But I guess that's a recurring theme here for now)
[07:33:45] *** Quits: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au) (Quit: kvanb)
[07:33:51] <olsonjeffery> yeah. another theme "windows is the roughest of the official platforms" in terms of support and overall robustness
[07:34:11] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Ping timeout)
[07:34:17] <Kelet> I'm mostly developing on Linux, but for me Windows isn't one of those "Yeah, I'll add support before the official release" things.
[07:34:29] <Kelet> I have to have it up and running and ensure my project builds there alongside it.
[07:34:42] <Kelet> But maybe with Rust it's better to just wait :/
[07:35:28] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[07:35:52] <olsonjeffery> well it depends on how much pleasure you derive from blazing a new trail. because, yeah. rust is still officially alpha-quality software, for better or worse.
[07:36:55] <Kelet> olsonjeffery: I've spent ~6 months designing aspects of a game I want to program in Rust, and prototyping some things in other languages, I'm very impatient so I'm going to try again. Last time I ran into a lot of issues. I'm OK with handling a fair amount, but it seemed insurmountable to me before.
[07:37:08] <Ms2ger> Nothing wrong with alpha/beta-quality software... Google could take over the email marked with it
[07:37:22] <Kelet> This time, at least Rust seems to build (so far) pretty issue-less on Windows.
[07:37:34] <Kelet> Last time I had to install specific MinGW version, apply a bunch of patches, download a bunch of DLLs.
[07:37:55] <Ms2ger> That doesn't sound fun
[07:38:10] <Ms2ger> Then again, developing on Win doesn't sound fun at all to me :)
[07:38:14] <Kelet> And ultimately it produced an executable that failed on a lot of the test suite.
[07:38:44] <diverse> just develop on Linux and use master for the time being
[07:38:46] *** Joins: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au)
[07:38:49] <Kelet> If I could get rust and rust-sfml to work so I can start coding I'd be pretty happy at this point
[07:39:25] <Kelet> In the meantime I have developed a need to create bindings for ENet for Rust (unless someone else is already doing that?) so I may just work on that.
[07:39:42] <Kelet> A quick google search turned up nothing.
[07:39:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:40:07] *** Joins: prooftechnique (prooftechn@moz-9E820B25.hsd1.nh.comcast.net)
[07:40:10] *** Quits: prooftechnique (prooftechn@moz-9E820B25.hsd1.nh.comcast.net) (Quit: prooftechnique)
[07:41:05] <Kelet> Actually a person named maik in #rust-gamedev put a few messages about it. Anyone seen him around?
[07:47:01] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[07:48:43] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: lag overload)
[07:48:46] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[07:51:30] *** Joins: shammancer (shammancer@389973A5.EBE303D0.DC8692D8.IP)
[07:52:15] <shammancer> Hey guys what do you use to read a line in rust
[07:52:46] <shammancer> std::io::stdin().read_line() however I am getting an error saying it is not defined
[07:53:13] *** Quits: santiago (santiago@moz-F2B734D2.c3-0.sbo-ubr1.sbo.ma.cable.rcn.com) (Ping timeout)
[07:53:26] <klutzy> `use std::io::Buffer`?
[07:54:37] <Yurume> stdin is not buffered, how about using `std::io::buffered::BufferedReader::new(std::io::stdin()).read_line()`? (caution: haven't tested)
[07:55:07] <klutzy> ah right
[07:55:17] <klutzy> let mut stdin = BufferedReader::new(stdin()); from http://static.rust-lang.org/doc/master/std/io/index.html
[07:55:45] <shammancer> I will try that thanks
[07:56:44] <eddyb> Yurume, klutzy: we ought to make things like this less contrived IMO
[07:57:55] *** Joins: mletterle (michael@moz-CD281E3A.compute-1.amazonaws.com)
[07:58:01] <Yurume> eddyb: yeah, stdin() may go to StdReader::new() and new stdin() may return BufferedReader version of StdReader
[07:58:06] <Yurume> (for example)
[07:58:17] <Yurume> not sure it is wise
[07:59:20] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:00:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:00:17] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[08:00:42] <Yurume> hmm, it is unwise, since BufferedReader has no means to un-consume its buffer on drop (not to mention that drop does not imply flush, anyway)
[08:00:54] <Yurume> thread-local stdin? :(
[08:01:01] <eddyb> lol
[08:02:17] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[08:02:22] <shammancer> Hey guys it is telling me that stdin is an unresolved name...
[08:02:36] <Yurume> what version of rustc are you using?
[08:02:58] <Yurume> (rustc -v)
[08:02:58] <eddyb> Yurume: maybe it's just a missing "use"
[08:03:11] <shammancer> let mut stdin = BufferedReader::new(stdin());
[08:03:13] <shammancer> for line in stdin.lines() {
[08:03:15] <shammancer>     print(line);
[08:03:17] <shammancer> }
[08:03:19] <shammancer> woops
[08:03:21] <diverse> doh
[08:03:22] <shammancer> rustc 0.9-pre (d5d5c50 2013-12-20 12:41:33 -0800)
[08:03:31] <shammancer> What do I need to use?
[08:03:32] <Yurume> doh, yeah you need std::io:: for stdin() ;)
[08:03:36] *** Quits: dhedlund (dhedlund@moz-A6C9F88D.ptld.qwest.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131118194756])
[08:04:08] <shammancer> Still unresolved
[08:04:17] <shammancer> let mut stdin = BufferedReader::new(std::io::stdin());
[08:04:39] <Yurume> aren't the error now pointing BufferedReader instead of stdin?
[08:04:55] <Yurume> FYI, it should be std::io::buffered::BufferedReader::new(...).
[08:05:19] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Connection reset by peer)
[08:05:31] <Yurume> (or you can `use std::io::stdin; use std::io::buffered::BufferedReader;` to avoid later typing)
[08:05:42] <diverse> let mut stdin = BufferedReader::new(::std::io::stdin());  <- noticed I put '::' in front of std
[08:06:02] *** Joins: jviereck (Adium@moz-5FBF440D.dip0.t-ipconnect.de)
[08:06:32] <Yurume> if your code is not the main module (i.e. you use stdin etc. in the sepearate module) then follow diverse
[08:06:47] <Yurume> but normally `use` fares better in either cases
[08:06:50] *** Joins: jessta (jessta@moz-9DDA1270.dyn.iinet.net.au)
[08:06:58] <shammancer> let mut stdin = std::io::BufferedReader::new(::std::io::stdin());
[08:07:07] <shammancer> is still giving me problems...
[08:07:39] <Yurume> shammancer: can you post the error message? (use pastebin, e.g. http://pastebin.com/, whenever possible)
[08:08:24] <diverse> shammancer: make it easy on yourself and do: 'use std::io::buffered::BufferedReader; use std::io::stdin;' in the beginning of your crate
[08:08:58] *** Joins: GeneralMaximus (ankur@3D366D3D.FF86B4FD.4654B817.IP)
[08:08:58] <shammancer> is a crate the file or the function...
[08:09:06] <diverse> your file
[08:09:48] <Yurume> diverse: it should be in every module that uses stdio, putting it to the crate main is not sufficient
[08:10:24] <Yurume> (it once used to be like the latter but it has changed since, I think, 0.7?)
[08:11:22] <shammancer> Cool the use thing worked
[08:11:56] <Yurume> great
[08:11:56] <shammancer> just wondering why do I not need a use decleration for println
[08:12:15] *** Joins: dhedlund (dhedlund@moz-A6C9F88D.ptld.qwest.net)
[08:12:19] <Yurume> println is special, it is in the module std::prelude which is treated specially.
[08:12:46] <Yurume> (when I say "specially", it really means that it is automatically `use`d by every module.)
[08:12:53] <shammancer> just for the sake of consistency what could I use. :)
[08:13:30] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[08:13:34] *** Quits: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au) (Quit: kvanb)
[08:16:22] *** Quits: mark_edward (quassel@moz-E0F1AB04.hsd1.in.comcast.net) (Ping timeout)
[08:16:49] <Yurume> shammancer: if you are using stdio in one function, you can also do `use` in front of the function body, which may be useful from time to time
[08:20:07] *** Joins: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au)
[08:20:16] *** Joins: mark_edward (quassel@moz-E0F1AB04.hsd1.in.comcast.net)
[08:20:45] *** Quits: GeneralMaximus (ankur@3D366D3D.FF86B4FD.4654B817.IP) (Ping timeout)
[08:20:51] <shammancer> How can you just read one line from stdin
[08:21:28] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[08:21:34] <shammancer> if you run the for loop it keeps waiting for more input
[08:22:25] *** flaper87|afk is now known as flaper87
[08:23:15] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[08:23:54] <Yurume> shammancer: stdin.read_line()?
[08:24:20] <Yurume> see http://static.rust-lang.org/doc/master/std/io/buffered/struct.BufferedReader.html for more methods.
[08:24:58] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[08:26:18] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[08:27:44] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: )
[08:27:51] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[08:28:09] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:28:37] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[08:28:37] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: jlong)
[08:28:44] <shammancer> NOw I am seeing this... main.rs:43:9: 43:13 error: mismatched types: expected `&str` but found `std::option::Option<~str>` (expected &str but found enum std::option::Option)
[08:28:51] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[08:29:15] <Yurume> shammancer: right, read_line() *may* fail, so you should be prepared for it (or take a risk to ignore it).
[08:29:19] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[08:29:27] <shammancer> ?
[08:30:28] <klutzy> shammancer: .read_line() either returns Some(~"line\n") or None if nothing is present from reader
[08:30:29] <Yurume> shammancer: if you are reading from socket and socket issued an error in the middle of line, then what do you do? :)
[08:30:51] <shammancer> I am not there yet...
[08:31:28] <Yurume> shammancer: if you are interested in getting it work now, use stdin.read_line().expect("read_line failure") then you are set.
[08:31:31] <aatch> shammancer, think of it like Rust forcing you to check null
[08:32:48] <shammancer> So how would I go about doing it properly now?
[08:33:09] <shammancer> if line !=null
[08:33:16] <shammancer> or something like that?
[08:34:36] <Yurume> shammancer: depends on what are you doing; if you're writing a toy program you are fine to ignore that error (i.e. unanimously fails on that error), and `expect` is used for it.
[08:34:40] <aatch> shammancer, no, you'd use one of the methods on Option or a match expression.
[08:35:05] <Yurume> otherwise you will want `match` expression or `unwrap_or` method.
[08:35:44] <shammancer> Anywhere were this is documented?
[08:36:21] <Yurume> shammancer: http://static.rust-lang.org/doc/master/std/option/index.html
[08:36:47] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[08:36:50] <Yurume> the tutorial is a bit vague on `Option`s and `Result`s, since they are technically not a part of the language but the standard library
[08:37:06] <Yurume> but we expect that would be improved in the future
[08:37:08] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Connection reset by peer)
[08:37:29] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[08:39:18] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[08:39:30] <shammancer> Hum...
[08:40:28] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Ping timeout)
[08:40:31] <Yurume> shammancer: just go with stdin.read_line().expect("failed") or stdin.read_line().unwrap(), when you see an unexpected error consult that later. ;)
[08:40:31] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[08:40:49] <shammancer> So you you are destructing the refference in the second part?
[08:40:50] <Yurume> (assuming that you are interested in getting things work)
[08:40:59] <Yurume> what do you mean by the second part?
[08:41:02] <diverse> Yurume: I think he wants the latter...
[08:41:20] <shammancer> /Remove the contained string,
[08:41:22] <Yurume> diverse: I forgot about the latter for a second...
[08:41:27] <diverse> and also convert ~str to &str
[08:41:50] <diverse> based on said error
[08:42:00] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[08:42:18] <Yurume> shammancer: both expect and unwrap fail for None (= on a read error), expect() gives a bit more information on failure.
[08:43:12] <Kelet> There are nightly builds of Rust for Arch. Sweet. I saw you needed 1.5gb of memory to build Rust and my Arch laptop only has 512 (lol)
[08:43:22] <shammancer> hum
[08:44:02] <shammancer> btw what happened to the "rust" command were you could go rust run?
[08:44:14] <diverse> it got removed
[08:44:18] <Yurume> it's gone
[08:44:24] <shammancer> Why?
[08:44:55] <shammancer> just wondering...
[08:45:14] *** Quits: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net) (Quit: Leaving.)
[08:45:25] <diverse> I think due to low maintenance
[08:46:01] <shammancer> fair enough
[08:47:03] *** Parts: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) ()
[08:49:27] <diverse> shammancer: did you get it working?
[08:49:34] <Yurume> shammancer: https://github.com/mozilla/rust/issues/9818
[08:49:46] <shammancer> Yup
[08:50:02] *** Joins: jaen (jaen@moz-D7BF0510.play-internet.pl)
[08:51:17] <shammancer> ok
[08:51:54] <shammancer> What does Some do?
[08:52:07] <shammancer> *Some()
[08:52:34] <Yurume> Some is one kind of value possible for Option (None is another)
[08:53:04] <Yurume> generally Some contains some kind of value which the user normally expects, and None means the absence of such value
[08:53:25] <shammancer> gotcha
[08:54:22] <Yurume> so, for example, you may have `fn exact_divide(x: int, y: int) -> Option<int>` which may return None when y does not divide x (or y is zero, at your option)
[08:55:29] <shammancer> Oh cool
[08:55:35] <shammancer> that could be fun
[08:55:56] <shammancer> can you add more options?
[08:56:20] <Yurume> what do you mean?
[08:56:39] <shammancer> Lets say I want a special option for divide by 0?
[08:56:44] <Yurume> like that, the caller wants to distinguish the case that y does not divie x from the case that y is zero?
[08:57:05] <shammancer> yup
[08:57:05] <Yurume> then you have multiple options,
[08:57:31] <shammancer> ?
[08:57:38] <Yurume> first: Option is not that special
[08:57:47] <shammancer> k
[08:57:59] <Yurume> it's special only because it's very common so it's in the stdlib
[08:58:15] <Yurume> you can make your Option today: enum Option<T> { Some(T), None }
[08:58:31] <diverse> shammancer: you can create your own option, like 'ZeroOption' or something
[08:58:51] <Yurume> consult the tutorial for more infos
[08:58:51] <shammancer> Interesting
[08:59:36] <Yurume> so in this case, you may have: enum ExactDivResult { Quotient(int), NoExactDiv, DivByZero }
[09:00:05] <Yurume> in this case you need to use `match` (or make your own helper methods using `match`).
[09:00:10] <shammancer> And would it be your divide function that sents the resulting option
[09:00:15] <Yurume> right
[09:00:18] <shammancer> sets
[09:00:46] <Yurume> e.g. fn exact_divide(x: int, y: int) -> ExactDivResult { if y == 0 { DivByZero } else if x%y == 0 { Quotient(x/y) } else { NoExactDiv } }
[09:01:43] <shammancer> Ok cool
[09:01:57] <Yurume> the second option is to add a default value for division by zero, which may or may not be useful
[09:02:35] <shammancer> I was thinking of doing the limit if you divide by zero. XD Thanks for taking the time to teach me.
[09:02:42] <shammancer> Best get to bed
[09:02:44] <Yurume> e.g. fn exact_divide(x: int, y: int, on_divbyzero: Option<int>) -> Option<int> { if y == 0 { on_divbyzero } else if x%y == 0 { Some(x/y) } else { None } }
[09:02:46] <Yurume> yeah
[09:02:53] <shammancer> I am asking silly question
[09:03:02] <shammancer> XD
[09:03:06] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:03:06] <Yurume> there are many other strategies available, e.g. conditions, but it's too much for today ;)
[09:03:12] <shammancer> But thanks
[09:03:34] <diverse> I heard they are removing Conditions?
[09:04:32] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[09:04:37] <Yurume> diverse: I think they think of removing conditions *from the I/O system*, but not sure about the condition system itself.
[09:05:34] <Yurume> personally I felt conditions have a non-obvious design and I never had to use conditions so far
[09:05:55] <Yurume> (even after I wrote tons of Rust code)
[09:06:48] <Kelet> How do I point rustpkg to my .a files?
[09:06:58] <Kelet> -L?
[09:10:10] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[09:10:34] <Kelet> I suppose its ld doing the linking here
[09:12:49] *** Quits: jviereck (Adium@moz-5FBF440D.dip0.t-ipconnect.de) (Quit: Leaving.)
[09:14:32] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[09:14:47] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[09:15:13] <aatch> Bah, girlfriend knocked out my internet.
[09:16:40] <Yurume> how?
[09:17:01] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[09:17:12] <aatch> Knocked the power out for the router by accident.
[09:17:21] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[09:18:03] <Yurume> isn't it supposed that the internet is connected via WLAN... wait, now it makes sense. XD
[09:19:02] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[09:19:24] <diverse> it's possible that the gf knock the power out of the access point, if they were using wlan
[09:20:33] <Yurume> for that reason, I have a WLAN router near the ceiling, and then I have a desktop which connection can be tripped up anyway...
[09:20:38] <aatch> well I also use the router as a switch, but diverse it correct.
[09:20:48] <aatch> is*
[09:22:41] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:23:28] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Quit: Words do not express thoughts very well.)
[09:24:51] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[09:29:25] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[09:33:37] <diverse> aatch: have you tried getting your gf to program in rust? :P
[09:34:12] <aatch> diverse, lol, she's not a programmer. She knows a little Java from a uni paper she took, that's about it though.
[09:36:07] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[09:37:55] *** Joins: fabiand (fabiand@moz-C929875C.pool.mediaways.net)
[09:39:44] <aatch> Woo mini expression simplifier! Much nicer expressions to look at now (instead of `0 + (1 * foo)`)
[09:40:09] <diverse> hm?
[09:41:25] <aatch> I have some code that is an AST of an expression, built partially programatically, so I was getting expression like the above, which is perfectly correct, but a little noisy.
[09:42:04] <aatch> It's just cool that implementing it is like 10 lines of code.
[09:42:56] <diverse> is this for rust?
[09:43:14] *** Joins: _omegaga (Mibbit@215918AF.F09091A8.1348A864.IP)
[09:44:21] <Yurume> fn simplify(node: Node) -> Node { match node { Add(v,w) => match (simplify(v),simplify(w)) { (Num(0),x)|(x,Num(0)) => x, (v,w) => Add(v,w) }, ... } }
[09:44:24] <Yurume> something like this?
[09:44:26] <aatch> diverse, no, my own project. Native X11 protocol implementation.
[09:44:53] <aatch> Yurume, pretty much, except that it's a mutating method.
[09:45:37] *** Joins: omegaga_ (omegaga@215918AF.F09091A8.1348A864.IP)
[09:45:52] <aatch> So it recursively calls .simplify() on itself until it stops being able to simplify.
[09:46:21] <Yurume> isn't it inefficient?
[09:46:52] <Yurume> that is, traversing the tree multiple times.
[09:46:54] <aatch> Yurume, probably, but it's not a big deal. I'm not expecting to have large expressions.
[09:47:29] <Yurume> I actually don't know about X11 protocol though, so I generally assume the extreme ;)
[09:47:37] *** Quits: _omegaga (Mibbit@215918AF.F09091A8.1348A864.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:48:16] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[09:48:27] <aatch> Yurume, heh, I can always make it better later if it becomes a problem, I tend to code fairly open-ended.
[09:48:40] <diverse> just for kicks, have you thought about implementing a Wayland protocol? Not saying you have to do it.
[09:48:50] <aatch> diverse, I have thought about it.
[09:48:50] *** Joins: jackneill (jackneill@moz-2E9A628E.pool.digikabel.hu)
[09:49:05] <aatch> I just haven't got around to looking at it properly.
[09:49:14] <Yurume> aatch: right, in fact I'm infamous for performing the Premature Optimization a.k.a. the Root of Evil(tm). :S
[09:50:02] <aatch> Yurume, don't worry, I do it too sometimes. Though I tend to lean more towards interesting-but-unnecessary optimisations.
[09:50:05] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:55:09] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[09:55:57] *** Joins: rca (rcatolino@moz-60C1810D.adsl.proxad.net)
[09:57:27] *** Quits: jessta (jessta@moz-9DDA1270.dyn.iinet.net.au) (Ping timeout)
[09:57:41] *** Quits: omegaga_ (omegaga@215918AF.F09091A8.1348A864.IP) (Client exited)
[10:01:52] *** Joins: jessta (jessta@moz-CBC0411B.dyn.iinet.net.au)
[10:02:50] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[10:02:50] *** Quits: price (price@moz-3AE7229D.mit.edu) (Ping timeout)
[10:02:51] *** Joins: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net)
[10:02:58] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[10:03:02] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[10:03:13] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[10:03:20] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[10:04:05] *** Joins: oberstet (quassel@moz-1CC2ACDC.dynamic.mnet-online.de)
[10:08:20] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[10:08:21] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[10:08:26] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[10:08:26] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[10:08:26] *** ChanServ sets mode: +o acrichto
[10:11:30] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[10:13:14] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[10:13:54] *** Quits: jessta (jessta@moz-CBC0411B.dyn.iinet.net.au) (Ping timeout)
[10:18:18] *** Joins: jessta (jessta@moz-FEFFE342.dyn.iinet.net.au)
[10:20:36] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[10:20:41] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:21:08] *** Quits: thiez (thiez@moz-BF669398.student.utwente.nl) (Quit: leaving)
[10:21:12] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[10:21:45] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[10:25:11] *** Quits: ofeldt- (ofeldt@moz-1316319F.dip0.t-ipconnect.de) (Ping timeout)
[10:27:17] *** Quits: rca (rcatolino@moz-60C1810D.adsl.proxad.net) (Quit: Lost terminal)
[10:27:24] *** Joins: rca (rcatolino@moz-60C1810D.adsl.proxad.net)
[10:29:47] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Quit: Leaving.)
[10:29:55] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[10:40:47] *** Quits: tehgeekmeister (tehgeekmei@EA93C762.860C3797.1A968954.IP) (Quit: Leaving...)
[10:42:04] *** Quits: fabiand (fabiand@moz-C929875C.pool.mediaways.net) (Quit: Verlassend)
[10:45:33] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:49:33] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:01:25] *** Joins: lenstr (lenstr@66C0DC19.121853A2.28B5BA55.IP)
[11:05:38] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[11:07:19] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[11:09:48] *** Joins: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP)
[11:11:51] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:11:54] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:12:41] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[11:13:51] *** Quits: lenstr (lenstr@66C0DC19.121853A2.28B5BA55.IP) (Quit: Leaving...)
[11:14:34] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[11:17:22] *** Joins: ofeldt (ofeldt@moz-3889C8F5.dip0.t-ipconnect.de)
[11:20:36] *** Quits: ofeldt (ofeldt@moz-3889C8F5.dip0.t-ipconnect.de) (Ping timeout)
[11:20:53] *** Quits: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[11:29:05] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[11:29:18] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[11:29:18] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[11:31:24] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[11:31:36] *** Quits: zeittunnel (benjamin@moz-370FCEBA.dip0.t-ipconnect.de) (Ping timeout)
[11:40:21] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[11:42:02] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[11:42:59] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[11:44:42] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[11:47:46] *** Quits: ercxx (ercan@moz-5B55241D.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[11:54:43] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Connection reset by peer)
[11:55:04] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[11:55:05] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net)
[12:10:18] *** Joins: fabiand (fabiand@moz-B9E8C164.adsl.alicedsl.de)
[12:13:21] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[12:16:20] *** Joins: Ferreus (ferreus@moz-F1460B0A.pools.arcor-ip.net)
[12:17:12] <eddyb> do we have a Rust reply to this? http://blog.regehr.org/archives/161
[12:21:04] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[12:22:44] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[12:22:56] <eddyb> oh, this http://www.dreamsongs.com/WorseIsBetter.html
[12:26:02] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[12:26:27] <Ms2ger> Oh hey, jwz
[12:27:20] *** Joins: Rmx (Mibbit@moz-3A9BE3DA.brutele.be)
[12:27:50] *** Quits: Rmx (Mibbit@moz-3A9BE3DA.brutele.be) (Quit: http://www.mibbit.com ajax IRC Client)
[12:31:27] *** Quits: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP) (Ping timeout)
[12:31:49] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[12:32:23] *** Joins: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP)
[12:33:34] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Ping timeout)
[12:38:13] <zq> aren't {i,u}{8,32,64} supposed to be reserved keywords ?
[12:41:31] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:43:16] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[12:45:13] <eddyb> zq: nope
[12:45:24] <eddyb> there's also 16, and uint/int
[12:45:39] <eddyb> I'm actually thinking of moving them into the library
[12:47:49] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[12:48:16] <arrrrrrrrr> what's the fastest way to align things by column in vim? :! column -t works but doesn't keep the indentation
[12:48:44] <Ms2ger> Use emacs
[12:48:45] * Ms2ger ducks
[12:49:12] <arrrrrrrrr> go eat a foot pedal
[12:50:35] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:50:42] <klutzy> arrrrrrrrr: just found this https://github.com/junegunn/vim-easy-align
[12:51:05] <arrrrrrrrr> looks scary
[12:52:50] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:55:32] <dbaupp> eddyb: talk to strcat about moving them into the library
[12:55:59] <dbaupp> eddyb: he'd already thought of the lang_item's thingo, and he may've even experimented with actually implementing it.
[12:56:35] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[13:01:22] *** Joins: GeneralMaximus (ankur@3B7C09F9.3755173.5785B5AF.IP)
[13:03:06] *** Quits: GeneralMaximus (ankur@3B7C09F9.3755173.5785B5AF.IP) (Ping timeout)
[13:04:01] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[13:09:15] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[13:11:07] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:14:02] *** Quits: rca (rcatolino@moz-60C1810D.adsl.proxad.net) (Ping timeout)
[13:14:23] *** Joins: GeneralMaximus (ankur@37A74223.2AA67C17.CEFA97FA.IP)
[13:15:22] *** Joins: rca (rcatolino@moz-60C1810D.adsl.proxad.net)
[13:16:52] *** Joins: zeittunnel (benjamin@moz-370FCEBA.dip0.t-ipconnect.de)
[13:18:27] *** Quits: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au) (Quit: kvanb)
[13:19:26] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[13:21:09] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net) (Ping timeout)
[13:22:05] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Client exited)
[13:25:03] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[13:27:49] *** kimundi is now known as zz_kimundi
[13:27:54] *** Joins: moostik (Icedove@moz-6AF08E46.w92-135.abo.wanadoo.fr)
[13:31:50] *** Quits: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP) (Ping timeout)
[13:31:59] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[13:32:18] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:32:41] *** Joins: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP)
[13:37:00] *** Quits: GeneralMaximus (ankur@37A74223.2AA67C17.CEFA97FA.IP) (Ping timeout)
[13:37:49] *** zz_kimundi is now known as kimundi
[13:40:18] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:41:22] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[13:42:56] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[13:47:33] <zq> eddyb: if they're not keywords, how are they defined?
[13:48:08] *** Quits: moostik (Icedove@moz-6AF08E46.w92-135.abo.wanadoo.fr) (Ping timeout)
[13:48:19] <eddyb> zq: paths with just one identifier
[13:48:34] <eddyb> zq: and I think you can shadow them
[13:48:52] <zq> eddyb: i meant the types themselves
[13:49:10] <zq> eddyb: i saw libstd/num/u32.rs
[13:49:20] <eddyb> zq: those add methods and whatnot
[13:49:36] *** Joins: moostik (Icedove@moz-6AF08E46.w92-135.abo.wanadoo.fr)
[13:49:54] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[13:50:04] <eddyb> the types are defined in the compiler. wherever you use "uint" with nothing else like that in scope, it's the built-in type
[13:50:07] <zq> so where are they defined?
[13:50:42] <eddyb> rustc::middle::resolve, I think
[13:51:39] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net)
[13:53:21] *** Quits: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP) (Ping timeout)
[13:54:12] *** Joins: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP)
[13:54:15] *** Quits: moostik (Icedove@moz-6AF08E46.w92-135.abo.wanadoo.fr) (Ping timeout)
[13:54:49] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[13:54:58] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Ping timeout)
[13:55:19] *** Quits: victorporof (victorporo@221F1DFA.9004F55.9B1E38F4.IP) (Quit: victorporof)
[13:55:24] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[13:58:16] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[13:59:34] *** Quits: tav (tav@moz-6D839A1A.range109-145.btcentralplus.com) (Quit: tav)
[14:02:08] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[14:02:24] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[14:03:27] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net) (Ping timeout)
[14:03:56] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Connection reset by peer)
[14:04:12] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[14:06:17] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net)
[14:18:06] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[14:21:54] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Connection reset by peer)
[14:22:15] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[14:22:36] <bheylin> is it possible to create a &str from a &[char]?
[14:22:55] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[14:23:23] <eddyb> bheylin: http://static.rust-lang.org/doc/master/std/str/fn.from_chars.html
[14:23:50] *** Joins: santiago (santiago@moz-F2B734D2.c3-0.sbo-ubr1.sbo.ma.cable.rcn.com)
[14:23:53] <bheylin> eddyb: that's a ~str, I'm specifically trying to avoid allocations
[14:24:05] <kimundi> you'Re out of luck then
[14:24:29] <kimundi> The data in a str and ~str is utf8 encoded, which is not the same as a char array
[14:24:43] <eddyb> bheylin: every char is 4 bytes
[14:24:48] <kimundi> Only way is to convert it by allocating a new ~str
[14:25:07] <bheylin> ok makes sense 
[14:25:16] <bheylin> i may have to re-think a parser
[14:25:29] <eddyb> you could write your own U32Str if you really needed it (which I doubt)
[14:25:34] <bheylin> i have a file given to the parser as a ~str
[14:25:54] <eddyb> good. you can iterate over its chars
[14:26:10] <bheylin> I was operating under the assumption that converting that ~str to a ~[char] would offer advantages over an ~str iterator<char>
[14:26:27] <eddyb> not really
[14:27:16] <bheylin> Ill take another look at implementing it as ~str as the src and the rest of the parsing fns using slices
[14:29:06] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:29:21] <bheylin> another question about strings
[14:30:02] <bheylin> AFAIK a ~str is also an ImmutableVector if it is contained in an immutable box
[14:30:13] <kimundi> hm?
[14:30:47] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net) (Ping timeout)
[14:30:58] <bheylin> which I would cache the length of the string?
[14:31:16] <kimundi> Only &[T] implements ImmutableVector
[14:31:26] <kimundi> What do you mean?
[14:32:00] <bheylin> if I ask str.len() is the string traversed each time?
[14:32:14] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[14:32:14] <heftig> strings aren't null-terminated
[14:32:21] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[14:32:46] <kimundi> bheylin: on a string, len() retuns the length in bytes, which is a O(1) operation
[14:33:07] <kimundi> bheylin: char_len() returns the length in codepoints, which is a O(n) operation
[14:33:25] <bheylin> ah good to know
[14:33:28] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[14:34:15] <eddyb> bheylin: you want to work with byte positions and characters
[14:34:25] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net)
[14:34:46] <eddyb> bheylin: the character iterators do this and you can do it manually (helper functions on a &str)
[14:35:34] <bheylin> eddyb: I was reading the RapidXML source, and was wondering how to approach the same system in Rust
[14:36:03] <bheylin> which is reading file a string and maintain pointers to slices within that string for each node
[14:36:11] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[14:36:27] <kimundi> well, you can do that
[14:36:30] <bheylin> the only allocations are from a pool of nodes
[14:36:52] <kimundi> read the string, get a ~str. then remember &str slices to parts of it
[14:37:27] <bheylin> a &str is actually a StrSlice trait ?
[14:37:36] <bheylin> which is implemented as a pointer and an offset?
[14:38:01] <eddyb> the StrSlice contains its methods, but yeah
[14:38:29] <kimundi> A &str is a build in type that has the same memory representation and semantic as a &[u8], that ios it is a reference to some elements of a type with an length attached to it
[14:39:00] *** Joins: GeneralMaximus (ankur@D760A76A.A33990DE.1228A288.IP)
[14:39:04] <kimundi> StrSlice is just a trait that provides all useful methods for a &str, because we can't implement them on buildin types directly - which is considered a bug
[14:39:05] *** Quits: GeneralMaximus (ankur@D760A76A.A33990DE.1228A288.IP) (Quit: GeneralMaximus)
[14:40:08] <bheylin> where im a little fuzzy is at what point I need to convert to unicode code points
[14:40:25] <kimundi> for what?
[14:40:30] <bheylin> the actual parsing
[14:40:35] <bheylin> read in ~str
[14:40:43] <bheylin> and then convert to Char iterator
[14:40:48] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[14:40:51] *** Joins: gkostyanikov (gkostyanik@688F9189.A859D9FD.CA6E2165.IP)
[14:40:57] <kimundi> a ~str contains utf8 encoded unicode codepoints, a char is a singular codepoint. there are a tons of ways to extract the latter out of a former :)
[14:41:01] <bheylin> as I need to handle utf-8 chars
[14:41:25] <kimundi> let s = read_file(); for c in s.chars() { ... }
[14:41:54] <bheylin> so then i parse a token
[14:41:58] <bheylin> let's say a list
[14:42:04] *** Ms2ger is now known as Ms2ger|Sheriffduty
[14:42:16] <bheylin> i delimit the list by reading in chars
[14:42:40] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[14:42:41] <bheylin> when I am happy I have a full list, I want to convert the set of chars back to &str
[14:42:53] <kimundi> thats not possible
[14:43:06] <bheylin> and that's where I am right now :)
[14:43:26] <kimundi> You can rember the byte positions where the list starts and ends, and then slice the original string :)
[14:43:40] <bheylin> yea that's where my mind is going
[14:43:42] <bheylin> ok 
[14:43:45] <kimundi> let s = read_file(); for (offset, c) in s.char_indices() { ... }
[14:44:05] <bheylin> ah handy
[14:44:10] <eddyb> do we have a CharPos yet that can be only constructed by a function checking the position?
[14:44:26] *** Joins: GeneralMaximus (ankur@D760A76A.A33990DE.1228A288.IP)
[14:44:34] <eddyb> which can then be used without the overhead of error checking
[14:44:36] <kimundi> eddyb: I'm nor sure if that would work
[14:44:40] *** Parts: GeneralMaximus (ankur@D760A76A.A33990DE.1228A288.IP) (Textual IRC Client: www.textualapp.com)
[14:44:49] <eddyb> kimundi: why wouldn't it?
[14:44:56] <kimundi> eddyb: You need seperate CharPos type for each possible string content
[14:45:00] <bheylin> given that i have the byte indices, how can that be converted to a &str ?
[14:45:08] <eddyb> it's a byte position to the start of a character
[14:45:18] <eddyb> though it won't hold for mutable strings
[14:45:38] <eddyb> bheylin: you just slice the original string between those byte positions
[14:45:47] <kimundi> bheylin: s.slice(start, end), s.slice_from(start), s.slice_to(end)
[14:46:24] <bheylin> cool ok it's coming together
[14:46:31] <bheylin> neurons are growing
[14:46:36] <kimundi> eddyb: So, the CharPos has the byte value 5. What is preventing you from slicing a different string where that is a invalid offset with that CharPos?
[14:47:00] *** Quits: gkostyanikov (gkostyanik@688F9189.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:47:04] <eddyb> kimundi: haha, I'm so silly
[14:47:40] <kimundi> But good idea in principle ;)
[14:47:52] <eddyb> kimundi: what I'm thinking of would end up like a SeekableSlice
[14:48:03] <kimundi> yeah, probably
[14:49:44] <bheylin> thanks for the help guys
[14:49:46] *** Joins: deio (Mibbit@moz-52E9B7D8.dynamic.tstt.net.tt)
[14:49:49] <kimundi> np
[14:49:54] <bheylin> I'm gonan get stuck into slicing and dicing
[14:50:08] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[14:50:13] *** Joins: peterdn (chatzilla@moz-933EC8C2.range86-174.btcentralplus.com)
[14:50:20] *** Quits: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP) (Ping timeout)
[14:50:41] *** Joins: gkostyanikov (gkostyanik@688F9189.A859D9FD.CA6E2165.IP)
[14:51:05] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[14:51:07] *** Joins: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP)
[14:51:58] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[14:52:22] <eddyb> compile_and_link: x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so
[14:52:24] *** Quits: gkostyanikov (gkostyanik@688F9189.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:52:49] <eddyb> I thought LLVM wouldn't finish for another millennia
[14:52:56] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[14:53:13] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[14:55:56] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[14:57:32] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[14:58:44] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[15:01:45] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[15:01:47] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[15:03:06] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[15:03:18] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:04:34] *** Joins: rca_ (rcatolino@moz-97C04DFB.adsl.proxad.net)
[15:04:44] <Mathuin> :D eddyb 
[15:04:58] <Mathuin> I can relate to that, Rust took eons to compile on my machine
[15:05:11] *** Quits: rca (rcatolino@moz-60C1810D.adsl.proxad.net) (Ping timeout)
[15:05:28] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:05:49] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[15:06:15] <eddyb> Mathuin: git pull --rebase parent master didn't say anything about LLVM, I may be doing it wrong
[15:06:44] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[15:09:24] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[15:10:20] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:11:17] <peterdn> hey guys, I'm updating some code from 0.7 -- what has happened to the likes of str::as_c_str and vec::raw::to_ptr?
[15:11:40] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:12:21] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[15:12:22] <kimundi> wheeew... A lot
[15:13:25] *** Quits: sankha93 (Instantbir@4B55603.698FEB19.EFB84E89.IP) (Quit: Gone to save the world!)
[15:15:39] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[15:17:47] *** Quits: z0w0 (zack@moz-D4EF1469.lnse2.cha.bigpond.net.au) (Client exited)
[15:17:48] *** Joins: jviereck (Adium@moz-5FBF440D.dip0.t-ipconnect.de)
[15:18:58] *** Joins: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net)
[15:19:15] <Mathuin> that's the pain with rust
[15:19:44] <Mathuin> until it's stable, porting code will *not* be for the faint of heart
[15:20:41] *** Quits: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net) (Ping timeout)
[15:22:33] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:23:20] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[15:23:38] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[15:25:53] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[15:26:14] *** Quits: socksy (ben@moz-79485C68.range86-184.btcentralplus.com) (Ping timeout)
[15:26:53] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[15:27:40] <cmr> Mathuin: porting code is pretty straightforward.
[15:27:46] <cmr> peterdn: they've been turned into methods.
[15:28:18] <cmr> peterdn: to_ptr is now an as_ptr method, as_c_str is now to_c_str (see http://static.rust-lang.org/doc/master/std/c_str/index.html)
[15:29:03] *** Quits: rca_ (rcatolino@moz-97C04DFB.adsl.proxad.net) (Ping timeout)
[15:29:16] <eddyb> that actually makes sense
[15:29:42] *** Joins: rca (rcatolino@moz-97C04DFB.adsl.proxad.net)
[15:30:00] <eddyb> as_* being just a re-representation while to_* allocating something new
[15:30:38] *** Joins: socksy (ben@moz-AC8D8AC4.range109-154.btcentralplus.com)
[15:34:03] <peterdn> cool, thanks :)
[15:36:29] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:38:37] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:40:40] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[15:45:32] *** Ms2ger|Sheriffduty is now known as Ms2ger
[15:46:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[15:47:02] *** Quits: deio (Mibbit@moz-52E9B7D8.dynamic.tstt.net.tt) (Quit: http://www.mibbit.com ajax IRC Client)
[15:47:30] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:48:42] *** Joins: bkircher (bkircher@moz-B04BAE3E.dip0.t-ipconnect.de)
[15:49:00] *** Parts: wminor (wminor@moz-3CF7AB0B.org) ()
[15:50:37] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[15:50:42] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[15:50:43] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[15:53:07] *** Parts: bkircher (bkircher@moz-B04BAE3E.dip0.t-ipconnect.de) (Leaving...)
[15:53:13] *** Joins: bkircher (bkircher@moz-B04BAE3E.dip0.t-ipconnect.de)
[15:54:16] *** Joins: sixbrx (Mibbit@moz-7A900440.fda.gov)
[15:55:45] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:56:52] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:01:22] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[16:01:26] <sixbrx> Q re using iterators, for anyone. Why do funs using iterators need to accept them as "mut myvar: A" or "mut myvar: &mut A" where A is the generic type param for the iterator.  IE. why is "mut" necessary in front of the variable?
[16:02:43] <cmr> sixbrx: it should be necessary for &mut A, but in the first case it's so you have a mutable binding, making `myvar` mutable. Advancing an iterator mutates it.
[16:03:58] <sixbrx> cmr: OK I can see if it's just a bare variable, just wondering why "myvar: &mut A" is not good enough.  Compiler complains "cannot borrow immutable argument as mutable."
[16:04:29] <cmr> s/should/shouldn't/
[16:04:33] <cmr> Can you post some code?
[16:04:39] <sixbrx> I guessed that :)
[16:04:50] <sixbrx> PS Inside the fn the iter is just driving a for loop
[16:05:40] <sixbrx> cmr: sure just a min..
[16:05:46] <cmr> Oh, that's because for loops use `let mut x = for_loop_expr`
[16:06:33] <sixbrx> cmr: OK so it's an artifact of the way they are expanded?
[16:06:39] <cmr> yes
[16:06:56] <sixbrx> Good enough, thanks
[16:08:05] *** Joins: gwty (gwtypc@785CBECF.F88EC6D1.27560D6E.IP)
[16:15:27] *** Joins: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net)
[16:17:14] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[16:18:06] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: Textual IRC Client: www.textualapp.com)
[16:20:47] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[16:20:49] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:22:20] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:22:29] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[16:22:30] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[16:22:46] <arrrrrrrrr> I want something like this: https://gist.github.com/anonymous/705f05fd622502786636
[16:22:59] <arrrrrrrrr> But the array should only contain one fixed "Type"
[16:23:10] <arrrrrrrrr> so Array([A(1),A(1)]) is ok
[16:23:19] <arrrrrrrrr> but Array([A(1),B(1)]) is not
[16:23:29] <arrrrrrrrr> what's the rigth pattern here?
[16:23:54] <arrrrrrrrr> sorry. A = Long, B = Short
[16:26:17] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[16:27:20] *** Joins: beifeng (Mibbit@98F589EB.A765EABF.C7DB8B78.IP)
[16:28:11] <Mathuin> With this code: http://paste.awesom.eu/Mathuin/eQB&ln, I get the following errors: bf.rs:29:30: 29:34 error: found `enum` in ident position
[16:28:15] <Mathuin> bf.rs:29     let instr = with_capacity<enum Instruction>(prgm.length()); ^~~~
[16:28:16] <Mathuin> bf.rs:29     let instr = with_capacity<enum Instruction>(prgm.length());
[16:28:18] <Mathuin> bf.rs:29:35: 29:46 error: expected `;` but found `Instruction`
[16:28:32] <Mathuin> could you help me sort it out ?
[16:28:44] <arrrrrrrrr> [u8] is not a type
[16:29:03] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[16:29:18] <Mathuin> hmm
[16:29:25] <Mathuin> so, how do I correct this ?
[16:29:42] <arrrrrrrrr> ~[u8]
[16:30:13] <SiegeLord> arrrrrrrrr, I'd make a new enum with LongArray(~[u16]), ShortArray(~[u8]) and then optionally add a method to return the Type by index
[16:30:39] <Mathuin> arrrrrrrrr: it gives the same errors
[16:30:50] <arrrrrrrrr> SiegeLord: Unfortunaletly they can be nested. So Array([Array(...)) is possible.
[16:31:24] <arrrrrrrrr> The depth is bound by 64 but that's still not nice to write out by hand :p
[16:31:39] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[16:31:55] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[16:32:05] <arrrrrrrrr> Mathuin: Replace all [...] by ~[..]
[16:32:20] <arrrrrrrrr> Mathuin: In the second to last line you have to remove the ;
[16:32:44] *** Quits: jviereck (Adium@moz-5FBF440D.dip0.t-ipconnect.de) (Quit: Leaving.)
[16:33:06] <arrrrrrrrr> with_capacity<enum Instruction> makes no sense
[16:33:30] <Mathuin> I used enum because it couldn't recognize Instruction alone
[16:33:32] <eddyb> arrrrrrrrr: smells of C "struct foo"
[16:33:39] <eddyb> Mathuin: that's never going to work
[16:33:45] <eddyb> the problem is that < and > are ambiguous
[16:34:14] <eddyb> with_capacity::<Instruction> is what you want. that's if you really need the type hint
[16:34:36] <Mathuin> yes
[16:34:40] <Mathuin> stupid me
[16:34:48] <Mathuin> s/stupid/silyy
[16:34:52] <Mathuin> silly*
[16:35:18] <cmr> arrrrrrrrr: that'd require datasort refinements, which we unfortunately do not have yet.
[16:35:20] <Mathuin> could you explain why I needed the ~ ?
[16:35:29] <arrrrrrrrr> What's the size of BF?
[16:35:31] <arrrrrrrrr> in Bytes?
[16:35:44] <Mathuin> unknown
[16:35:52] <arrrrrrrrr> exactly. That's not allowed
[16:36:15] <Mathuin> so I use pointers instead ?
[16:36:46] <cmr> Mathuin: There are three "array" types in Rust: [T, ..N] where N is a number, for fixed-size vectors, ~[T], which is growable vector, and &[T] which is a slice (a fixed-length view of memory)
[16:37:24] <Mathuin> the vectors I use don't need to be growable
[16:37:45] <cmr> Then use [u8, ..length] etc
[16:37:50] <Mathuin> but their size is unknown until runtime
[16:38:02] <cmr> ok, so you *do* need a growable vector
[16:38:40] <SiegeLord> Well, strictly speaking he has no need for the capacity field
[16:38:50] <SiegeLord> So he only needs the type which we don't have
[16:38:53] <cmr> that's true
[16:41:02] <Mathuin> how can I iter over a vector from index i ?
[16:41:12] <Mathuin> (I'll need to do that backwards too)
[16:41:26] *** Quits: bkircher (bkircher@moz-B04BAE3E.dip0.t-ipconnect.de) (Client exited)
[16:41:28] <cmr> Mathuin: vec.iter().skip(i)
[16:41:35] <cmr> or you could slice it and iterate over that
[16:42:23] <Mathuin> but I also need the index of the current item
[16:42:36] <Mathuin> so enumerate ?
[16:42:41] <cmr> vec.iter().enumerate().skip(i)
[16:43:12] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:43:22] <arrrrrrrrr> cmr: How expensive is skip for an iter of a ~[T]?
[16:43:38] <cmr> arrrrrrrrr: a single pointer increment
[16:43:47] <Mathuin> so O(1) ?
[16:43:50] <cmr> yes
[16:44:02] <arrrrrrrrr> O(1) can be pretty expensive :p
[16:44:11] <Mathuin> and a slice would be O(1) too ?
[16:44:26] <cmr> vec iterators are really iterators over &[T]
[16:44:36] <cmr> the only iterator that isn't is move_iter
[16:44:55] *** Joins: jviereck (Adium@moz-5FBF440D.dip0.t-ipconnect.de)
[16:46:35] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:47:17] <Ms2ger> Pff, everything is O(1)
[16:47:27] <arrrrrrrrr> this guy gets it :p
[16:47:46] <Ms2ger> The age of the universe doesn't depend on your inputs :)
[16:48:48] <olsonjeffery> just to be clear: should we add rustpkg_db.json to our .gitignore?
[16:48:59] <olsonjeffery> im leaning towards yes...
[16:49:49] <cmr> olsonjeffery: if you're using your repository as a rustpkg workspace, yes.
[16:53:02] *** Joins: jviereck1 (Adium@moz-C1790E1.dip0.t-ipconnect.de)
[16:53:27] *** Quits: jviereck (Adium@moz-5FBF440D.dip0.t-ipconnect.de) (Ping timeout)
[16:53:33] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[16:54:29] <Mathuin> if I do level = match x { ... } can I have a value which won't change the level ?
[16:54:44] <Mathuin> because now I'm reassigning level to level
[16:57:14] *** Joins: doomlord__ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[16:57:25] *** Quits: doomlord__ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Client exited)
[17:00:32] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[17:01:25] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[17:02:04] *** Quits: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net) (Quit: Leaving.)
[17:02:05] *** Quits: jviereck1 (Adium@moz-C1790E1.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:02:18] <arrrrrrrrr> Let's say I have an enum which represents real types (enum Types { Byte, Boolean, Int16, ... }). Now I want to define a method on this enum which unmarshals the concrete type from a std::io::Reader. Is there any way to do something like that? I'm using this enum because I want to have abstract type trees (Struct(Int, Array(Boolean))).
[17:02:24] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[17:03:05] *** Quits: sixbrx (Mibbit@moz-7A900440.fda.gov) (Quit: http://www.mibbit.com ajax IRC Client)
[17:04:30] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Client exited)
[17:04:58] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:05:33] *** Quits: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP) (Ping timeout)
[17:08:32] *** Joins: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net)
[17:08:44] <eddyb> arrrrrrrrr: you can have a non-self method
[17:08:45] <kimundi> arrrrrrrrr: What do you mean with that unmarshalling part exactly?
[17:09:42] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:10:05] <arrrrrrrrr> kimundi: For example: Byte.unmarshal(stream) would simply call stream.read_u8(). That's the simplest case.
[17:10:14] *** Quits: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net) (Ping timeout)
[17:10:14] <arrrrrrrrr> eddyb: I don't understand.
[17:10:25] <eddyb> arrrrrrrrr: ah, I see
[17:10:32] <kimundi> arrrrrrrrr: Thats possible
[17:10:33] *** Joins: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP)
[17:10:55] <kimundi> arrrrrrrrr: just write a method unmarshal on type Types that matches on slef and does the right thing
[17:11:03] <erickt1> arrrrrrrrr: theoretically you could write a raw byte Encoder/Decoder
[17:11:05] <kimundi> matches on self*
[17:11:17] <arrrrrrrrr> kimundi: What what's the return type?
[17:11:23] <cmr> kimundi: that's not going to work
[17:11:23] <eddyb> you'll have to impl Type {fn unmarshal(self, stream) -> Value {match self {Byte=>stream.read_u8...}}
[17:11:37] <eddyb> arrrrrrrrr: you can't return different types depending on the enum's value
[17:11:44] <kimundi> What return type?
[17:11:51] <eddyb> arrrrrrrrr: unless you wrap the result in the enum as well
[17:11:54] * kimundi does not understand
[17:12:03] <cmr> That's not going to work with Type
[17:12:12] <cmr> it'd needed to be Type::unmarshal_byte(...) etc
[17:12:12] <arrrrrrrrr> kimundi: Byte.unmarshal returns the rv of stream.read_u8
[17:12:27] <cmr> Otherwise you're going to need to have dummy contents in the byte.
[17:12:35] <kimundi> Need to have a enum for all values to hold the return value then, or use ~Any :P
[17:13:33] *** Joins: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net)
[17:16:25] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[17:19:12] <erickt1> arrrrrrrrr: I'll whip up a quick binary encoder for you
[17:20:14] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:21:00] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Connection reset by peer)
[17:21:34] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[17:21:40] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:23:26] <arrrrrrrrr> How about this: unmarshal returns a ~Trait which has functions unwrap_u8, unwrap_i16, etc? Sounds slow as fuck, though.
[17:24:16] <kimundi> you just need a TypeValue enum
[17:24:57] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Input/output error)
[17:25:02] <arrrrrrrrr> kimundi: The are countably many types because the can be nested.
[17:25:23] <arrrrrrrrr> Array(Struct(Array(Int),Int)) etc.
[17:25:31] <kimundi> But the ways they are nested is finite
[17:25:46] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:26:45] <arrrrrrrrr> That sounds reasonable. Though my old problem returns:
[17:26:54] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Quit: jesse99)
[17:27:00] <arrrrrrrrr> Array(~[TypeValue])
[17:27:06] <arrrrrrrrr> is not typesafe
[17:27:31] <kimundi> sure it is
[17:28:16] <arrrrrrrrr> Array([Int(1),Byte(1)]) is obviously not represented by a real array
[17:28:16] *** Quits: beifeng (Mibbit@98F589EB.A765EABF.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:30:55] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[17:36:06] <erickt1> arrrrrrrrr: I got to run, but here's the foundation of how to use the Encoder/Decoder framework to work with raw byte strings: https://gist.github.com/erickt/8101298
[17:36:57] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[17:37:01] <erickt1> I only implemented support for uint, u64, u32, but it's not *that* hard to extend it to the rest of the types
[17:37:02] <cmr> arrrrrrrrr: there's no way around that in the type system, using a single variant like that.
[17:38:08] <erickt1> arrrrrrrrr: then you can annotate your enums with `#[deriving(Encodable, Decodable)]` and you can use `let foo: Foo = Decodable::decode(&mut rdr)` to decode into your enum
[17:38:13] <erickt1> and now I must run
[17:39:00] <arrrrrrrrr> erickt1: Thanks I'll take a look
[17:42:32] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[17:43:58] <diverse> is there any reason to keep the .append() methods for strings?
[17:44:37] <olsonjeffery> cmr: so i know there's some tickets pointing out the weirdness of referencing github repos that are rustpkg workspaces.. is there any plan to deal with that or allow specifying specific crates w/i the workspace as part of the extern mod = "github.com/blah" uri?
[17:45:06] <cmr> olsonjeffery: rustpkg is probably going to be redesigned.
[17:45:06] <olsonjeffery> i know that 10470, iirc, deals with inferring the crate name in src/ from the repo name
[17:45:15] <olsonjeffery> aaaagggaaaain?
[17:45:33] <olsonjeffery> (in my Rocky, of Rocky & Bullwinkle, voice)
[17:46:06] <olsonjeffery> just when i was getting my arms around the current design!
[17:46:38] <olsonjeffery> cmr: btw, im flushing out and cleaning up the repo that has most of the code (sans sprite/game logic stuff) from my 2d portaling demo
[17:46:55] <olsonjeffery> i want to do a submission on the mrpas impl and hear ideas for optimization/cleanup
[17:46:59] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:47:27] <olsonjeffery> i have it up on github already, but its still pretty rough.. i need to do a lot of re-org in the crates' layout
[17:47:44] <olsonjeffery> i think the stuff about the effort to "de-stutter" std/extra is useful.
[17:48:03] <olsonjeffery> is the solution to basically re-export everything from the module roots?
[17:48:06] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[17:48:23] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[17:51:24] *** Quits: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net) (Quit: Leaving.)
[17:52:10] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[17:53:01] <diverse> any difference between using '+' and .append() for strings?
[17:53:18] <Ms2ger> One mutates, the other doesn't?
[17:53:21] <kimundi> both are slow :P
[17:53:33] <diverse> kimundi: I said differences ;)
[17:54:17] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[17:54:28] <sfackler> one is a method and one is an operator!
[17:54:32] <sfackler> (/s)
[17:55:06] <kimundi> + would take two string slices, and allocate a new string with the added size of both. a push() only increases the size of the string you push to, which might even be allocation free
[17:56:44] <diverse> ah I see
[17:57:25] <diverse> I guess you couldn't use + for owned strings?
[17:57:50] <diverse> oh wait, nvm
[17:57:55] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[17:58:21] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net) (Ping timeout)
[17:58:34] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net)
[17:59:53] <diverse> okay, so + returns an allocated string, while .append() extends the current string that is allocated? Did I hit the mark?
[18:00:31] <kimundi> yes
[18:01:10] *** Joins: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[18:03:36] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[18:03:38] <SimonSapin> with c a char, is `c as u32 - ('\x7F' as u32 & c as u32) == 0` significantly faster than `c as u32 < 0x80` ?
[18:03:56] <SimonSapin> (this implements .is_ascii())
[18:04:09] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:04:13] <cmr> SimonSapin: they both involve a branch, but I imagine the latter is easier to predict... write a microbenchmark?
[18:04:42] <sfackler> I think the implementation of is_ascii was pulled from some libc
[18:05:17] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[18:06:00] <diverse> kimundi: is there a faster way for string concatenating?
[18:06:40] <kimundi> not really. just .push everythibng - if you know the maximum size beforehand you can reserve that capcity, but thats it
[18:07:12] <o11c> normally is_ascii is implemented as an array lookup, at least for ascii
[18:07:27] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[18:07:32] <o11c> I mean, all char traits, for 8-bit chars
[18:08:19] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[18:08:43] <diverse> kimundi: that's the thing, the more I think about, how do declare the size of a string slice?
[18:08:45] <SimonSapin> diverse: push_str() reserves exponentially larger amounts of memory in order to be amortized O(n) rather than O(n^2) for repeated calls
[18:09:07] <cmr> (append doesn't)
[18:09:18] <SimonSapin> o11c: this is the implementation for the char type, which is roughly u32
[18:09:32] <o11c> I have no clue how that is implemented then
[18:10:18] <kimundi> diverse: what do you mean with declare?
[18:11:28] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[18:12:55] <diverse> like 'let string: &[u8 ..the_length]'? Could I do that? I read that str is an alias for [u8]
[18:13:09] <kimundi> its not an alias
[18:13:22] <kimundi> it just has the same memory representation
[18:14:14] *** Quits: indirect (indirect@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[18:14:14] *** Quits: carter (carter@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[18:14:20] <kimundi> diverse: every string is either allocated as ~str, or is a compiletime constant one
[18:14:32] <kimundi> diverse: ~str have a length and capacity
[18:14:38] <kimundi> just like a ~[T] has
[18:14:46] <o11c> unlike vectors, strings don't have static lengths
[18:14:59] <diverse> ahh
[18:15:33] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[18:15:48] <kimundi> no, strings just don'T have an equivalent for the seperate fixed-sized vector type [T, ..N]
[18:16:00] *** Joins: moostik (Icedove@moz-6AF08E46.w92-135.abo.wanadoo.fr)
[18:17:29] *** Quits: zeittunnel (benjamin@moz-370FCEBA.dip0.t-ipconnect.de) (Ping timeout)
[18:17:44] *** Joins: indirect (indirect@moz-3589B90B.c.ircrelay.com)
[18:17:53] *** Quits: derek_c (derek@5239664E.4BC8CD52.5C3BDEF0.IP) (Input/output error)
[18:17:58] <diverse> is this because of safety reasons?
[18:18:22] <cmr> fixed-length utf8 string doesn't make a lot of sense
[18:18:35] <benh> It's probably more that there's no place to put the ..N in the syntax :D
[18:18:36] <cmr> is the length in codepoints? if so, which codepoint?
[18:18:39] <cmr> etc
[18:18:42] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[18:18:52] *** Joins: carter (carter@moz-3589B90B.c.ircrelay.com)
[18:19:07] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net) (Ping timeout)
[18:20:08] <kimundi> the length needs to be in bytes
[18:20:23] <kimundi> and that is not very useful for utf8 :P
[18:20:25] <diverse> oh I see
[18:21:18] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:21:19] *** Joins: bkircher (bkircher@moz-B04BAE3E.dip0.t-ipconnect.de)
[18:21:32] <benh> I stand by my explanation!
[18:22:29] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[18:22:43] <diverse> benh: heh
[18:22:44] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[18:22:46] <sfackler> benh: str..N would work just fine :P
[18:23:05] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: Textual IRC Client: www.textualapp.com)
[18:23:26] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[18:23:59] *** Joins: eruve (Mibbit@moz-D9C4D6EB.ppp-bb.dion.ne.jp)
[18:24:28] *** Quits: jaen (jaen@moz-D7BF0510.play-internet.pl) (Ping timeout)
[18:24:47] *** Quits: eruve (Mibbit@moz-D9C4D6EB.ppp-bb.dion.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[18:26:01] *** Joins: jaen (jaen@moz-D7BF0510.play-internet.pl)
[18:26:52] <diverse> cmr: by 'codepoint' you mean the bit size?
[18:27:20] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[18:28:20] <kimundi> diverse: codepoint == our char type
[18:28:23] <cmr> diverse: http://www.joelonsoftware.com/articles/Unicode.html
[18:29:55] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net)
[18:30:23] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[18:31:08] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[18:35:29] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:35:40] *** Quits: peterdn (chatzilla@moz-933EC8C2.range86-174.btcentralplus.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[18:37:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[18:38:54] <csherratt> would this be useful to have as part of libextra? https://github.com/csherratt/arc-btree-rs/blob/master/src/btree/lib.rs. It's a btree that has a copy-on-write mode.
[18:39:58] <Edwards> Does Rust allow multiple impls for a single type?
[18:40:04] <cmr> Edwards: yes
[18:40:07] <Edwards> \o/
[18:42:24] <kimundi> what impls?
[18:42:32] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[18:42:36] <kimundi> there are at least three ways to take that question :P
[18:43:13] *** Quits: oberstet (quassel@moz-1CC2ACDC.dynamic.mnet-online.de) (Client exited)
[18:43:14] <Edwards> kimundi: What I meant was, for example, if the standard library defines a type and has an impl that defines several methods, am I able to add methods to that type by defining my own impl
[18:43:28] <cmr> Edwards: well, cross-crate it gets a bit trickier
[18:43:38] <cmr> You need to implement a trait on it to add methods.
[18:43:42] <kimundi> not for the type
[18:43:48] <Edwards> Ah
[18:43:55] <kimundi> you can add methods by defining a trait and impl that for it
[18:43:56] *** Quits: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Quit: leaving)
[18:43:58] *** Joins: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[18:44:20] <cmr> The coherence rules say that "You can only add methods to a type if 1. your crate owns the type, 2. your crate owns the trait you're implementing for the type"
[18:44:56] <Edwards> Is that an or?
[18:44:59] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[18:45:04] <cmr> yeah
[18:45:07] <Edwards> *nod*
[18:48:24] *** Joins: lolwat (nano@moz-ED77243C.superkabel.de)
[18:48:29] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Ping timeout)
[18:49:11] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:49:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:50:17] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[18:51:12] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[18:53:19] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[18:53:21] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[18:53:32] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:54:21] *** Joins: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net)
[18:54:45] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[18:56:42] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[18:56:54] *** Quits: ehsanul (Mibbit@29896722.D02B26E5.A36C57B9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:58:23] *** Joins: victorporof (victorporo@221F1DFA.9004F55.9B1E38F4.IP)
[19:00:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:00:39] *** Joins: Mathuin_ (Mibbit@moz-7B1710C8.rev.sfr.net)
[19:00:59] <Mathuin_> hey
[19:01:30] <Mathuin_> wouldn't it be cool if we had epubs of rust's doc ?
[19:02:00] <SiegeLord> With a proper CSS the webpage wouldn't be so bad
[19:02:03] <cmr> Mathuin_: we do, at least of the reference manual.
[19:04:42] <Mathuin_> now that's interesting
[19:04:55] <Mathuin_> could you give me a link ?
[19:05:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[19:05:24] <cmr> Mathuin_: http://static.rust-lang.org/doc/master/rust.epub
[19:05:30] *** Quits: heftig (heftig@moz-ABF3B79A.dip0.t-ipconnect.de) (Ping timeout)
[19:05:43] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:05:46] *** Joins: heftig (heftig@moz-120967D9.dip0.t-ipconnect.de)
[19:05:47] <cmr> looks like we make one for the tutorial too
[19:05:48] <Mathuin_> is it the last version ?
[19:05:51] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[19:05:55] <cmr> latest yes
[19:06:03] <Mathuin_> cool
[19:06:24] <Mathuin_> 'cause I know we generate the HTML version using pandoc
[19:06:39] <o11c> not anymore
[19:06:55] <cmr> o11c: of the prose doucmentation? yes we do
[19:07:00] <Mathuin_> https://github.com/mozilla/rust/tree/master/doc
[19:07:11] <Mathuin_> the readme says it still uses pandoc
[19:07:57] <o11c> cmr: I thought I heard otherwise ... so that was only for the *code* doc?
[19:08:07] <cmr> o11c: yes, rustdoc itself no longer uses pandoc.
[19:08:10] <Mathuin_> but I don't quite get the need for Node.js
[19:08:29] <SiegeLord> I thought node.js is no longer needed...
[19:08:48] <Mathuin_> the readme isn't clear about that
[19:09:16] <SiegeLord> I can't find a darn msys distro that can configure rust >_<
[19:09:31] <SiegeLord> Sometimes I just want to not have to bother with windows
[19:09:54] <Mathuin_> go for Linux
[19:09:57] <Mathuin_> or BSD
[19:10:16] * Mathuin_ has to go
[19:10:21] <SiegeLord> I already use Linux as my primary OS... but sometimes you have to build on Windows
[19:10:50] <Mathuin_> and that's when you want to kill people with a spoon
[19:10:54] <Mathuin_> :D
[19:11:29] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[19:12:30] <o11c> at least when you're targeting Mac OS X, there's a good operating system hiding if you look deep enough
[19:12:35] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[19:12:43] <Mathuin_> yep
[19:13:07] <Mathuin_> but I can still remember the time I tried to build software on a mac
[19:13:09] <Mathuin_> nightmare
[19:13:16] *** Quits: Mathuin_ (Mibbit@moz-7B1710C8.rev.sfr.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:13:35] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[19:14:26] *** Quits: jaen (jaen@moz-D7BF0510.play-internet.pl) (Ping timeout)
[19:14:56] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[19:15:29] <cmr> SiegeLord: I've succesfully cross-compiled to mingw-w64 before.
[19:15:31] <cmr> from linux
[19:15:32] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[19:15:44] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[19:15:57] <pcwalton> ok, librustc is now de-@mut'd
[19:16:02] <pcwalton> now to get it to bootstrap...
[19:16:10] <cmr> pcwalton: nice!
[19:16:20] <SiegeLord> That seems like a separate source of headaches... either way I need a windows-only golden path for windows only people
[19:17:59] *** Quits: rca (rcatolino@moz-97C04DFB.adsl.proxad.net) (Connection reset by peer)
[19:18:54] *** Joins: rca (rcatolino@moz-97C04DFB.adsl.proxad.net)
[19:19:26] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net) (Ping timeout)
[19:21:42] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[19:22:02] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[19:23:56] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[19:24:26] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[19:24:34] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[19:25:32] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[19:27:18] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[19:28:21] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:29:42] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[19:30:23] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[19:30:33] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:30:56] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[19:31:17] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[19:31:53] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[19:32:45] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[19:34:28] *** Joins: jaen (jaen@moz-443AD16F.play-internet.pl)
[19:34:36] <SiegeLord> Heh, the only MSYS that worked comes with a make that doesn't support the -j switch. Yay for compiling LLVM on a single core
[19:34:47] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[19:35:07] <cmr> Multicore build on windows is super super flakey IME
[19:35:34] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[19:36:42] *** Joins: nejucomo (Adium@E4018AE3.98BFD977.E40C7F8E.IP)
[19:38:23] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[19:39:57] <Ms2ger> GNU make used to deadlock a lot on windows
[19:40:07] <Ms2ger> v4+ reportedly fixes that
[19:40:27] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[19:41:01] <kimundi> wow, we finally got testable crate docs! good job acrichto :D
[19:41:14] <pcwalton> kimundi: yeah, it's awesome!
[19:41:38] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[19:42:13] <SiegeLord> I don't quite get how it works though... does it paste the doc comments inside a #[test] function?
[19:42:50] <kimundi> SiegeLord: It does the same as the doc tests for the tutorial and manual
[19:43:02] <SiegeLord> And what does that do?
[19:43:21] <kimundi> all code blocks that are recognized as rust code will be compiled as a test function
[19:43:45] <kimundi> which might literally just be putting it into a functuion with #[test], I dunno :)
[19:43:48] <SiegeLord> Why do some of the code examples need a main function then?
[19:44:13] <kimundi> which ones?
[19:44:28] <kimundi> and using a main function is not the same as needing one :)
[19:44:55] <SiegeLord> E.g. https://github.com/alexcrichton/rust/commit/9f1739a8e1c45b47fc9605209701567d02195311#diff-495a33d675389a7e08b5426ae969aaedR26
[19:45:44] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Quit: Leaving)
[19:46:05] <kimundi> Hm, either the test harness is smart enough to figure out that it should call the main function if one exists, or it just generates code like "#[test] fn foo_test { fn main() { ... } }" and the function never runs :P
[19:46:18] <kimundi> acrichto: ^ ?
[19:47:07] *** Quits: fabiand (fabiand@moz-B9E8C164.adsl.alicedsl.de) (Ping timeout)
[19:47:20] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net)
[19:49:57] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:50:18] <kimundi> SiegeLord: Found it
[19:50:19] <kimundi> https://github.com/mozilla/rust/pull/11120/files#diff-beabfb1be9404d986c165f4fdd92285cR148
[19:50:37] <kimundi> if it doesn't contain amain function, one is wrapped around it, else it gets reused
[19:50:39] <SiegeLord> Heh... no fn  main then
[19:51:29] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[19:51:34] <kimundi> that also implies that each doc compiled as a seperate crate, so for each one you can test compile failure, like for the standalone unit tests
[19:52:04] <kimundi> hehe, yeah it seems not very robust xD
[19:52:40] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[19:54:17] <pcwalton> bleh, now it's segfaulting
[19:54:27] <pcwalton> thankfully I have over 200 commits so it should bisect well...
[19:54:42] <kimundi> haha
[19:55:24] <eddyb> pcwalton: Rc can't contain @T, even recursively
[19:55:49] <pcwalton> silly
[19:55:52] <eddyb> pcwalton: but there's no restriction on it so it segfaults randomly or triggers asserts - have you added Rc somewhere?
[19:55:57] <pcwalton> oh
[19:56:00] <pcwalton> no, I have not.
[19:56:08] <SiegeLord> I think it should just have a "no_main" feature or something... the simple search will also miss fn start() etc
[19:56:20] <SiegeLord> I.e. ~~~rust,no_main
[19:56:21] <SiegeLord> Or something
[19:56:23] <eddyb> pcwalton: just RefCell? (I assume you had to replace @mut with something)
[19:56:26] <pcwalton> yes.
[19:58:38] <Ms2ger> eddyb, why not?
[19:58:44] <SiegeLord> Also... it'd be super neat if there was a button which you could press to show/hide the # lines
[19:58:59] <SiegeLord> So, if you insisted, you could copy a fully functioning piece of code...
[19:59:04] <SiegeLord> Not sure how that's useful I guess
[19:59:53] <eddyb> Ms2ger: it uses transmute(~value) - the repr changes when value contains something with @ anywhere inside
[20:00:08] <Ms2ger> Right
[20:00:14] <Ms2ger> Why is *that* anyway? :)
[20:00:36] <pcwalton> so that the box annihilator can trace it
[20:00:45] <pcwalton> it can be fixed
[20:00:50] <pcwalton> btw, the repr shouldn't change, that's also silly
[20:01:02] <pcwalton> the box annihilator should just store it in a Boehm-style side table
[20:01:30] <eddyb> there's a special ref-count value for ~@T, RC_UNIQUE somewhere
[20:01:39] <eddyb> also RC_IMMORTAL - not sure if it's used at all
[20:02:16] <eddyb> I had to use it to keep a @T transmuted to &'static T alive
[20:02:31] <bascule> so uhh
[20:02:57] <bascule> how does one do TCP sockets?
[20:03:15] <cmr> bascule: https://github.com/cmr/rust-examples/blob/master/echo_client.rs
[20:03:54] <bascule> cool, thanks
[20:05:57] <pcwalton> oh good, looks like it's bisecting
[20:06:31] <olsonjeffery> std/extra don't have uuid support, correct? if so, is there a blessed/popular package out there?
[20:06:33] <pcwalton> 57 commits to test
[20:06:49] <cmr> olsonjeffery: extra::uuid exists
[20:07:10] <olsonjeffery> sweet.
[20:08:31] *** Quits: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Quit: Leaving)
[20:08:34] *** Joins: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[20:10:08] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[20:10:47] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[20:12:42] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:13:55] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[20:18:16] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[20:18:28] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:20:57] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:21:06] *** Joins: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:21:06] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Connection reset by peer)
[20:21:21] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[20:23:16] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Ping timeout)
[20:24:20] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[20:30:09] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[20:32:15] *** Quits: nejucomo (Adium@E4018AE3.98BFD977.E40C7F8E.IP) (Quit: Leaving.)
[20:32:42] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[20:34:40] *** Quits: victorporof (victorporo@221F1DFA.9004F55.9B1E38F4.IP) (Quit: victorporof)
[20:34:49] *** Joins: pnkfelix (pnkfelix@moz-E934383B.public.wayport.net)
[20:34:49] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:39:03] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Quit: Leaving.)
[20:40:23] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-E7673147.ip-addr.inexio.net) (Quit: arrrrrrrrr)
[20:40:56] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[20:41:03] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Input/output error)
[20:42:27] *** Quits: Ms2ger (Ms2ger@F98499EB.6D359A20.187A1082.IP) (Quit: nn)
[20:42:52] *** Quits: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[20:43:26] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[20:43:57] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[20:46:16] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[20:57:09] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Quit: Computer has gone to sleep.)
[20:57:31] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[20:58:18] <o11c> I've only written one silly file in rust, and I can't *stand* writing languages without traits ...
[20:58:53] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[20:59:16] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[21:03:17] <pcwalton> well, Go has interfaces and Haskell has typeclasses
[21:05:21] <pcwalton> which are pretty similar
[21:06:30] <o11c> neither of which are languages that I'm using ... if I had time I'd learn haskell though
[21:06:55] <Scriptor> PHP has "traits"
[21:07:53] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[21:08:01] *** Joins: steveno (steveno@moz-2B2BE86F.hsd1.pa.comcast.net)
[21:08:50] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[21:11:38] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[21:11:44] *** Quits: lolwat (nano@moz-ED77243C.superkabel.de) (Quit: lolwat)
[21:11:49] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[21:14:38] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[21:15:49] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[21:17:01] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[21:17:22] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[21:20:44] *** Quits: sellout (Adium@moz-FBD7BBE8.phlapa.fios.verizon.net) (Quit: Leaving.)
[21:21:27] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[21:21:36] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[21:21:42] *** Joins: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au)
[21:21:57] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[21:23:40] <pcwalton> segfault fixed -- it was unsafe code :)
[21:23:55] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[21:25:23] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[21:25:29] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[21:25:55] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:26:12] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[21:30:38] <ion> scriptor: It can pick an implementation based on the type of the return value?
[21:30:52] <Scriptor> hah, nope
[21:30:59] <Scriptor> hence the scare-quotes
[21:31:20] <Edwards> PHP has sort of a strange relationship with types anyway
[21:32:09] <Scriptor> Rasmus Lerdorf has a pretty backwards opinion on types
[21:32:12] <o11c> I wouldn't call it a relationship - mere passing acquantance at best
[21:32:45] <cmr> Scriptor: which is?
[21:32:47] <FreeFull> pcwalton: I'd be concerned if it wasn't unsafe code
[21:32:51] <Scriptor> I'm trying to find it
[21:32:54] <pcwalton> F
[21:33:02] <pcwalton> FreeFull: eh, it'd just be another compiler bug :)
[21:33:08] <pcwalton> oh look, another segfault.
[21:33:09] <o11c> "ACQUAINTANCE, n.  A person whom we know well enough to borrow from, but not well enough to lend to."
[21:33:13] <FreeFull> PHP only has some resemblance of types because it has to
[21:33:27] <o11c> best dictionary ever ^
[21:33:32] <FreeFull> pcwalton: There is a lot of unsafe code in the compiler, although not as much as there used to be =P
[21:33:39] <pcwalton> less than 1%
[21:33:53] <FreeFull> 1% is a lot
[21:34:01] <bstrie_vacation> pcwalton: did a little evangelism today https://twitter.com/ID_AA_Carmack/status/414808887238205440
[21:34:01] <pcwalton> compared to C++? nah
[21:34:01] <cmr> far less than 1%
[21:34:16] <cmr> I can only thing of like 3 places where there is unsafe (besides the LLVM bindings)
[21:34:21] <bstrie_vacation> pcwalton: we need to keep an eye on carmack, if he can be convinced to rewrite doom in haskell them he can be convinced to rewrite it in rust :P
[21:34:36] <FreeFull> C++ is mostly unsafe code, true
[21:34:40] <Scriptor> bah, anyway, the gist was that he preferred PHP's method of converting types for you when it thinks you want it
[21:34:40] <pcwalton> rust is on tim sweeney's radar, btw
[21:34:45] <FreeFull> But comparing Rust to C++ is unfair, on both sides
[21:34:47] <Scriptor> since that made it supposedly easier
[21:35:43] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:35:48] *** Joins: bananapeel (nee__@moz-BF117112.netcologne.de)
[21:36:07] <FreeFull> PHP's type system might be worse than Javascript#s
[21:36:19] <bstrie_vacation> it's definitely worse, because it sorta pretends to have one
[21:36:54] <bstrie_vacation> http://www.php.net/manual/en/book.spl-types.php
[21:37:04] <o11c> I think there is a sensible language hiding somewhere behind javascript, trying to get out
[21:37:10] <Edwards> PHP has types in the same way that meth heads sleep: Passing out sometimes, but never really a proper REM cycle, and there's a lot of screaming.
[21:37:57] <cmr> o11c: I quite liked javascript for a while.
[21:38:03] <cmr> I think I'd give typescript a shot
[21:38:12] <FreeFull> o11c: That is the case
[21:38:20] <FreeFull> Not for PHP, though
[21:38:22] <bstrie_vacation> typescript looks really good
[21:38:29] <o11c> I *do* understand the prototype thing
[21:38:40] <o11c> it helped to think of it in terms of navy vessels
[21:38:48] <FreeFull> Javascript is an experiment in going beyond OO
[21:38:55] <bstrie_vacation> like eating a burrito on a submarine?
[21:39:02] <FreeFull> With some unfortunate other things
[21:39:09] <FreeFull> PHP is just this huge adhoc thing
[21:39:47] <eholk> is anyone else having link errors trying to build Rust on OS X 10.9.1?
[21:39:47] <bstrie_vacation> FreeFull: by "Javascript is an experiment in going beyond OO" you mean "Self is an experiment in going beyond Smalltalk" :P
[21:40:06] <cmr> bstrie_vacation: I'm waiting util it's specced out more before I give it a full evaluation
[21:40:17] <cmr> The spec is very light on all the things that could make it truly interesting, IMO ;)
[21:40:24] <bstrie_vacation> cmr: true, I can't stand these unspecified langs
[21:40:25] <cmr> (at least, last I read it)
[21:40:28] <bstrie_vacation> always changing things
[21:40:37] <FreeFull> bstrie_vacation: Yes
[21:40:52] <kimundi> bstrie_vacation: I'm not seeing the word 'rust' anywhere on that twitter thread :P
[21:41:21] <bstrie_vacation> kimundi: perhaps twitter only shows my tweets because I'm logged in. they're at the very bottom for me
[21:43:54] <bstrie_vacation> pcwalton: do you think that 0.9 is blocked on shaving the GC yak? I see some exciting pulls from you in the queue, but I'm not sure how many working days you have left until january
[21:44:18] <pcwalton> bstrie_vacation: I don't think it's blocked on it no
[21:45:29] <bstrie_vacation> sigh. here's to 0.10, then :P
[21:45:39] *** Quits: Kxepal (Miranda@moz-94D630A3.pppoe.mtu-net.ru) (Ping timeout)
[21:47:37] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[21:49:01] *** Joins: Kxepal (Miranda@moz-F5F2E19.pppoe.mtu-net.ru)
[21:49:39] <pcwalton> well, I am going to try to get as much of this done as I can
[21:50:16] <benh> Was it ever decreed whether 1.0 follows 0.9 directly or whether there's room for 0.10 etc?
[21:50:43] <o11c> it will be 0.10, because it's not done yet
[21:51:14] <o11c> also, just to mess with people who still don't know how to compare versions properly
[21:51:35] <Eridius> 0.9.1. 0.9.2. 0.9.3
[21:51:50] <Eridius> or maybe 1.0b1 ;)
[21:51:56] <kimundi> 3, 3.1, 3.14 ...
[21:52:26] <Eridius> 4, 4.6, 4.66, 4.669, 4.6692 ...
[21:52:39] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:52:50] <cmr> what number is that approaching?
[21:53:07] <Eridius> the first Feigenbaum constant
[21:53:22] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[21:54:14] * kimundi punches "what the hell is the Feigenbaum constant" into google
[21:54:21] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[21:54:26] * cmr is too busy playing KSP
[21:54:30] *** Joins: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com)
[21:54:37] <o11c> geez, I just google'd the number and found out what it was
[21:54:42] *** Quits: bkircher (bkircher@moz-B04BAE3E.dip0.t-ipconnect.de) (Quit: Leaving...)
[21:54:58] <o11c> the problem with using a limit as your version number is that your software will stagnate
[21:55:15] <Eridius> kimundi: you need to learn more chaos theory ;)
[21:55:43] <kimundi> Eh, too chaotic
[21:55:47] <Eridius> the first time I wrote a program for my TI-83+ calculator that generated this diagram was very cool: http://en.wikipedia.org/wiki/File:LogisticMap_BifurcationDiagram.png
[21:55:59] <bstrie_vacation> I vote that we should just asymptotically approach 1.0. go from 0.8 to 0.9 to 0.99 to 0.999...
[21:57:23] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[21:57:24] *** Joins: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz)
[21:58:07] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[21:59:56] <kimundi> bstrie_vacation: "The Rust team happily announces the release of version Warp 10, in which we managed to bring down the compiletime of any Rust program down to 0, and thereby solved every computational Problem simultaneously."
[22:00:26] <diverse> rofl
[22:00:32] <Skrylar> i actually haven't found the compile time to be that bad, admittedly i haven't written a huge codebase in it
[22:00:44] <Skrylar> most of the time building rustc was spent on the C++ libs
[22:01:29] <kimundi> "Sadly we also have to announce that this is the last official Rust release, as we obsoleted all need for problem solving"
[22:01:58] *** flaper87 is now known as flaper87|afk
[22:02:11] <pcwalton> the compile time is not that bad except for rustc
[22:03:16] *** Quits: bananapeel (nee__@moz-BF117112.netcologne.de) (Ping timeout)
[22:03:42] <kimundi> Hm, now I'm thinking of this nice shortstory I read once about asking a computer how to reverse entropy
[22:03:47] *** Joins: bananapeel (nee__@moz-BF117112.netcologne.de)
[22:03:55] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[22:04:37] <cmr> The Last Question
[22:04:41] <cmr> by Isaac Asimov
[22:04:51] <kimundi> Ah, its from Asimov: http://www.multivax.com/last_question.html
[22:04:52] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Quit: Computer has gone to sleep.)
[22:05:02] * Skrylar headscratches at rustpkg
[22:05:13] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[22:05:16] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[22:05:17] * kimundi should really get around to read his stories somewhere this decade
[22:05:27] <cmr> Yes, he's very good
[22:05:59] *** Quits: jackneill (jackneill@moz-2E9A628E.pool.digikabel.hu) (Ping timeout)
[22:07:01] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[22:07:04] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[22:07:10] <Skrylar> timesink of the day: try to get glfw-rs working, install glfw to local, run rustpkg... "cannot find glfw3", facepalm
[22:07:34] <bjz> :(
[22:08:00] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[22:08:25] <wycats_> hey guys!
[22:08:38] <pcwalton> hey there
[22:09:09] <wycats_> :D
[22:09:23] <bjz> o/
[22:09:25] <wycats_> I'm starting to work on some intro Rust materials... concepts I'm thinking I want to cover so far: ownership model, stack vs. heap, traits
[22:09:26] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[22:09:52] <bjz> looked at the tute yet?
[22:09:54] <wycats_> the plan is a screencast
[22:09:56] <wycats_> yeah totes
[22:09:58] <wycats_> was thinking about not including tasks in the initial one
[22:10:23] <bjz> ah nice
[22:10:27] <wycats_> ah structs
[22:10:42] <bjz> just remember things are still changing
[22:10:42] <wycats_> the ownership model of course includes T, ~T and borrowing via &T
[22:11:06] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Quit: Leaving.)
[22:11:39] <Skrylar> oh, neat. pandoc has a rust highlighter now
[22:11:46] <cmr> Skrylar: has for a while
[22:11:58] <cmr> wycats_: I don't think ~T belongs in the sectino on the ownership model, but on stack vs heap.
[22:12:06] <wycats_> cmr: they're kind of related
[22:12:19] <wycats_> ownership and stack/heap are overlapping
[22:12:33] <cmr> Non-pod values are just as owned as ~T
[22:12:35] <wycats_> Pods are the remaining piece
[22:12:39] <wycats_> hehe
[22:12:39] <cmr> yeah
[22:12:54] <wycats_> so you would talk about ownership and pods first?
[22:13:08] <wycats_> I'm trying to figure out how to build up a conceptual ladder
[22:13:13] <wycats_> i.e. which concepts are needed first
[22:13:16] <cmr> I think so, it's less surface area to cover than ~T
[22:13:26] <wycats_> the only issue is that strings require ~T
[22:13:32] <cmr> Yeah
[22:13:35] <wycats_> so it's hard to get far practically without bringing in ~t
[22:13:36] <wycats_> ~str
[22:13:55] <cmr> I've found that strings are really hard when designing good intro material.
[22:13:57] <wycats_> so you'd start by talking about ownership and pods?
[22:14:00] <wycats_> cmr: confirm
[22:14:35] <cmr> wycats_: for ownership, I've been thinking that File might be a good example.
[22:14:55] <wycats_> cmr: so for me, ownership feels like the main "concept" you want to learn in Rust
[22:15:08] <wycats_> the fact that values are always owned by one "thing" at a time
[22:15:12] <cmr> It's a resource with a destructor, and one can use strings through it without having to care about the type (for the most part)
[22:15:19] <wycats_> where a thing is either a stack frame or TLS (but you can skip TLS)
[22:16:15] <wycats_> so I guess you talk about ownership
[22:16:25] <wycats_> and maybe about the fact that certain kinds of values can be copied automatically
[22:16:27] <wycats_> like ints
[22:16:30] <wycats_> let x = 1;
[22:16:31] <cmr> yeah
[22:16:33] <wycats_> let y = x;
[22:16:37] <wycats_> this is copied
[22:16:43] <wycats_> and maybe then talk about structs
[22:16:56] <wycats_> and how simple structs can also be copied
[22:17:07] <wycats_> and talk about how copying on the stack is super-fast
[22:17:20] <wycats_> maybe then talk about borrowing?
[22:17:31] <Skrylar> cmr: strings are hell
[22:17:37] <wycats_> i.e. you may not want to have to copy a whole struct just to get some value
[22:17:45] <wycats_> like if I want to compare the distance between points
[22:17:47] <wycats_> I may not want to copy it
[22:17:50] <wycats_> so I can lend it
[22:18:03] <wycats_> hm... but this structure has not given us move
[22:18:04] <wycats_> hmmm
[22:18:07] <diverse> wycats_: perhaps make a special section about strings in more detail after covering ownership.
[22:18:15] <wycats_> I think you want to know about moving before you talk about lending
[22:18:26] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:18:31] <wycats_> so maybe that's where you bring in ~T?
[22:18:33] <wycats_> to say
[22:18:40] <wycats_> ok so I have this Point
[22:18:50] <wycats_> hmmm it's tricky
[22:19:03] <wycats_> I think ~str might ACTUALLY be the natural way to bring up ~T
[22:19:19] <wycats_> say something like
[22:19:28] <wycats_> I can't store a ~str on the stack
[22:19:30] <cmr> The only problem with ~str is that str isn't a type, and I think that will either bring confusion or diffuse the point by explaining DSTs
[22:19:33] <wycats_> because I don't know its size
[22:19:43] <wycats_> ~str for all intents and purposes is ~T
[22:19:58] <wycats_> for noobs for sure
[22:20:31] <diverse> strings are more than meets the eye, I'd say cover it after ~T
[22:20:39] <wycats_> but how do you bring up ~T
[22:20:40] <cmr> Yes, but I've seen confusion by trying to use bare "str" as a type.
[22:20:55] <wycats_> sure... but it's easy enough to explain why bare str doesn't work
[22:21:01] <wycats_> namely: you don't know its size ahead of time
[22:21:11] <cmr> ok, sure.
[22:21:26] <wycats_> you can't have a T if you can't calculate its size at compile time
[22:21:54] <wycats_> the problem with trying to explain ~T first is motivation
[22:21:57] <wycats_> what's the motivation for ~Point
[22:22:02] <wycats_> if you already explained Point
[22:23:21] <diverse> wycats_: read this to give you an idea: http://words.steveklabnik.com/pointers-in-rust-a-guide
[22:23:25] <wycats_> the motivation for ~str is easy
[22:23:28] <Skrylar> hrmm
[22:23:30] <cmr> that's true
[22:23:33] <dbaupp> A large motivation for ~ is recursive data structures
[22:23:40] <wycats_> right, but that's more involved
[22:23:45] <dbaupp> (cf. http://static.rust-lang.org/doc/master/tutorial.html#implementing-a-linked-list )
[22:23:50] <wycats_> you don't want the first 5 minutes to be getting into recursion
[22:24:01] <wycats_> I think ~str and ~[] is an easier intro motivation
[22:24:06] <steveklabnik> diverse: hehe wycats_ and I are friends :)
[22:24:11] <wycats_> steveklabnik: cooonfirm
[22:24:12] <wycats_> hi steveklabnik 
[22:24:17] <steveklabnik> Yay irx cloud
[22:24:20] <steveklabnik> IRC
[22:24:24] <diverse> steveklabnik: ah, very good. :)
[22:24:29] <steveklabnik> It summons me
[22:24:48] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[22:25:05] <wycats_> heh
[22:25:29] <wycats_> so I think having a struct that contains a ~str is probably a good way of getting into the Pod distrinction
[22:25:35] <wycats_> which gets you into moving
[22:25:36] <Skrylar> its also worth keeping in mind that you don't want to put off everything 'hard' for too long
[22:25:44] <Skrylar> too much boringness/theory up front makes the newbs sad
[22:25:55] <wycats_> Skrylar: certainly you can put it off for the duration of a one-hour screencast ;)
[22:26:03] <wycats_> you can bring it up in the next installment
[22:26:13] <Skrylar> sure
[22:26:26] <wycats_> Skrylar: it's less about putting off hard things and more about making sure the conceptual ladder is coherent
[22:26:40] <wycats_> and you don't feel like you're pinging around between a bunch of concepts, none of which you understand well
[22:26:44] <Skrylar> i was just bringing it up because if I recall "Learn You A Haskell For Great Good" has microexamples in the chapters next to the comics
[22:26:44] <cmr> wycats_: actually wait!
[22:26:55] <wycats_> cmr: tellme!
[22:26:56] <cmr> I think vectors might be the perfect example here
[22:26:57] <wycats_> TELLME!
[22:26:59] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[22:27:03] <steveklabnik> :)
[22:27:03] <cmr> struct Mesh { points: ~[Point] }
[22:27:11] <wycats_> cmr: iiiinteresting :)
[22:27:13] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[22:27:14] <wycats_> that is cool
[22:27:29] <wycats_> so Mesh is a non-Pod
[22:27:30] <cmr> then you can lead naturally into borrowing via indexing or iteration.
[22:27:32] <cmr> yup
[22:27:44] <cmr> (to compute some geometric property of it, or something)
[22:27:47] <wycats_> so then you show that if you pass it, it moves
[22:27:49] <cmr> mesh is probably a poor name
[22:27:52] <wycats_> which is definitely not what you wanted
[22:27:53] <wycats_> yeah
[22:27:58] <wycats_> polygon
[22:28:06] <wycats_> struct Polygon { points: ~[Point] }
[22:28:16] <wycats_> hmmm
[22:28:45] <wycats_> it's always hard but fun to work out a plausible conceptual ladder for a hard thing like rust
[22:28:46] <o11c> it would be really nice to just get rid of the special cases of ~[] and ~str
[22:28:51] <wycats_> c
[22:30:00] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[22:30:32] <dbaupp> o11c: they have to be special at some level
[22:31:06] <Skrylar> i thought ~str was 'kind of' a type in Rust
[22:31:21] <cmr> Skrylar: ~str is a type
[22:31:31] <dbaupp> (although we could just define them in the libraries and call them something like Vec and Str... so there's no syntax matching.)
[22:32:08] <Skrylar> dbaupp: isn't vector a native type because they use it instead of arrays?
[22:32:24] <o11c> dbaupp: not really, C++ does 
[22:32:43] <Skrylar> and strings will end up with special treatment anyway, because you will need to type in "foo"
[22:32:57] <o11c> other than a tiny bit of syntactic sugar (the one thing C++ lacks), they should just be library types
[22:33:30] <Skrylar> (objective-c replaces @"string" with [NSString newFromCString:"string"] which is about as close to a non-special type as you can get IIRC)
[22:33:33] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[22:33:43] <diverse> This is why I keep having the feeling 1.0 won't happen anytime soon.
[22:34:02] <cmr> There's already some solid proposals on how to handle this
[22:34:05] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[22:34:28] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:34:32] <Skrylar> as long as utf-8 is handled properly and there isn't nightmarish syntax, i don't particularly care if its internal/lib. :B
[22:35:03] <ziad> diverse: why?
[22:35:09] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[22:37:50] <dbaupp> o11c: No, we really can't have ~str be a ~T with T=str that is essentially identical to (for example) ~int
[22:39:19] <pcwalton> well, DST makes it "sorta" work
[22:39:38] <pcwalton> wycats_: I used HashMap in my stanford talk
[22:39:43] <pcwalton> because it moves and it's a thing that people know about
[22:39:55] <pcwalton> with no sigils or smart pointers or anything
[22:40:14] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[22:40:42] *** Quits: StarLight (StarLight@moz-663A7363.dynamic.avangarddsl.ru) (Ping timeout)
[22:41:04] <wycats_> pcwalton: interesting
[22:41:07] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[22:41:09] <wycats_> you don't need ~HashMap?
[22:41:11] <pcwalton> nope
[22:41:14] <pcwalton> HashMap moves
[22:41:21] <pcwalton> (internally it has a ~[] array)
[22:41:29] <wycats_> neat
[22:41:31] <wycats_> that's perfect
[22:41:43] <wycats_> I'm thinking about using rust-http so that the thing we build actually DOES something
[22:41:54] <wycats_> anyone know if rust-http works well enough for a simple tutorial?
[22:42:05] <cmr> It does
[22:42:09] <wycats_> eeeexcellent
[22:42:16] <cmr> But it's not pleasant to use, it's a low-level HTTP library. Doesn't provide routing etc.
[22:42:35] <cmr> (pleasant compared to, say, sinatra)
[22:42:37] <pcwalton> eh, node.js had raw HTTP hello world on their fromt page
[22:42:39] <pcwalton> front page
[22:42:41] <pcwalton> when they got popular
[22:42:47] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Ping timeout)
[22:42:47] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Ping timeout)
[22:42:59] <cmr> they still do, too!
[22:43:00] <wycats_> the goal isn't for it to be sinatra-like
[22:43:09] <wycats_> just so that after we build some little library
[22:43:13] <wycats_> we can hook it up to something that WORKS
[22:43:19] <cmr> yup
[22:43:21] <wycats_> as opposed to it just being a library that doesn't do anythin
[22:43:25] <cmr> rust-http should be perfect for that
[22:43:31] <wycats_> sweet
[22:43:32] <pcwalton> HashMap + raw http should be enough to build something interesting
[22:43:34] <wycats_> I read some of the examples
[22:43:40] <pcwalton> English<->Japanese dictionary or something
[22:43:48] <wycats_> ooh that's a neat idea
[22:44:05] <wycats_> I definitely want to make sure to cover Pods
[22:44:10] <wycats_> and cover borrowing
[22:44:12] <wycats_> and struct
[22:44:14] <wycats_> structs
[22:44:20] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:44:22] <wycats_> so I don't want to just jump in with HashMap
[22:44:32] <o11c> dbaupp: right, 'str' should be what is now ~str, and there should be a *trait* that non-owned strings also implement
[22:44:37] *** Joins: StarLight (StarLight@moz-F33072.dynamic.avangarddsl.ru)
[22:45:00] <wycats_> maybe we could start with the metadata about the dictionary
[22:45:07] <wycats_> struct Dictionary { words: int }
[22:45:10] <wycats_> something like that
[22:45:13] <diverse> wycats_: you might want to catch all these thoughts in an etherpad session and have others look at it and contribute
[22:45:14] <kimundi> o11c: But then you also nees str_Slice for &str, and then the combinational explosion starts :P
[22:45:22] <wycats_> diverse: yeah perhaps
[22:45:25] <wycats_> just brainstorming first
[22:45:42] <wycats_> yeah there's plenty of combinatorial explosions now
[22:45:56] <wycats_> somehow I managed to avoid learning how <I: ...> works until today
[22:45:58] <wycats_> it made my day
[22:46:16] <wycats_> acrichto told me that using that syntax also avoids virtual dispatch
[22:46:17] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[22:46:19] <o11c> wycats_: it's not combinatorial; there are only a finite number
[22:46:19] <wycats_> which is especially neat
[22:46:37] <wycats_> o11c: just because there's a finite number of combinations doesn't mean it's not combinatorial :P
[22:47:04] <o11c> specifically, you *only* need "owned string" and "string slice", which both implement "string trait"
[22:47:20] <wycats_> yeah I wasn't really talking about this situation
[22:47:25] <o11c> well, I guess a specialized "shared string" might be helpful
[22:47:35] <wycats_> Rust just has a lot of APIs where you need mut_foo owned_foo owned_mut_foo etc.
[22:47:44] <wycats_> or at least, people write libraries like that
[22:50:36] *** Quits: rca (rcatolino@moz-97C04DFB.adsl.proxad.net) (Ping timeout)
[22:50:45] *** Joins: omegaga_ (omegaga_@EA341F17.7392E96F.9282BBCF.IP)
[22:51:45] *** Quits: omegaga_ (omegaga_@EA341F17.7392E96F.9282BBCF.IP) (Connection reset by peer)
[22:52:10] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:53:03] <spider-mario> hm, I feel I’m getting quite a few false positives for the new dead code warning
[22:53:07] <spider-mario> when compiling with --test
[22:53:20] <spider-mario> the thing is, I generate test functions with macros
[22:53:32] <spider-mario> might that be what’s confusing rustc?
[22:54:29] <cmr> spider-mario: probably not. is it marking the test functions dead?
[22:54:50] <spider-mario> no, the functions it uses
[22:55:07] <spider-mario> (I mean the functions they use)
[22:55:15] <cmr> Are the tests actually run when you run the test executable?
[22:55:35] <spider-mario> yes
[22:55:39] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[22:55:42] <cmr> open an issue then, cc @ktt3ja
[22:55:51] <wycats_> fwiw I've been loving the new warning
[22:55:59] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[22:56:00] <spider-mario> oh, I’m actually getting those false positives for non --test builds as well, appearently
[22:56:00] <wycats_> I know unrelated to spider-mario's report
[22:56:09] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[22:56:11] <wycats_> the only issue I ran into with it is generated code
[22:56:19] <wycats_> it yells at me about dead code in generated code
[22:56:24] <wycats_> which is correct of course
[22:56:27] <spider-mario> I wonder if I’m using modules wrong…
[22:56:30] <wycats_> but not much I can/should do about it
[22:56:38] <dbaupp> spider-mario: are you writing a library?
[22:56:42] <wycats_> ahhh modules... gotta include a discussion about that in my tutorial
[22:56:51] <cmr> wycats_: you can put #[allow(dead_code)] on the things you are generating.
[22:57:01] <wycats_> cmr: I'm not the one doing the generating
[22:57:03] <wycats_> stepancheg is
[22:57:14] <spider-mario> dbaupp : no, an executable
[22:57:16] <wycats_> I guess I can edit the files?
[22:57:19] <spider-mario> but spread across several modules
[22:57:27] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[22:57:31] *** Joins: fabiand (fabiand@moz-B9E8C164.adsl.alicedsl.de)
[22:58:54] <dbaupp> spider-mario: weird
[22:59:57] <spider-mario> oh, now I’ve got an ICE
[23:00:10] <spider-mario> task 'rustc' failed at 'assertion failed: bpos == mbc.pos || bpos.to_uint() >= mbc.pos.to_uint() + mbc.bytes', […]/rust/src/libsyntax/codemap.rs:479
[23:00:32] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[23:00:54] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:01:20] <spider-mario> it appears to be related to multibyte support, but non ascii identifiers are experimental
[23:01:35] <spider-mario> I’ve explicitly enabled them in my crate file
[23:02:39] <dbaupp> sounds like you have a different error, and rustc is ICing when it tries to print the span/diagnostics for it
[23:02:54] <spider-mario> oh, how convenient :/
[23:03:06] <spider-mario> thanks for the diagnostic, though
[23:03:08] <cmr> run in gdb and get a backtrace?
[23:03:11] *** Quits: pnkfelix (pnkfelix@moz-E934383B.public.wayport.net) (Quit: rcirc on GNU Emacs 24.3.1)
[23:03:19] <cmr> if you're using extra-debug-info, that also can happen sometimes.
[23:03:41] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[23:04:23] <spider-mario> appearently, since rustc doesn’t really crash (the crash is contained within rust’s runtime), gdb doesn’t know there was a problem
[23:04:42] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:04:42] <cmr> break rust_begin_unwind
[23:05:00] <spider-mario> oh, nice
[23:05:50] <aatch> I wish there was a better way to handle that (there probably is)
[23:06:09] <spider-mario> http://paste.awesom.eu/5d0
[23:06:44] <aatch> Like having the runtime somehow know it's being run under a debugger. That might not be feasible though.
[23:07:26] <cmr> well there's the breakpoint() intrinsic
[23:07:34] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[23:07:36] <cmr> I think that kills the process if it's not caught by a debugger though
[23:08:45] <ninechars> is / can rust's type system be used to reflect the different iterator invalidation semantics of e.g. arrays and lists?
[23:08:50] *** ninechars is now known as glaebhoerl
[23:08:53] <glaebhoerl> (stupid irc)
[23:09:01] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[23:09:35] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[23:11:45] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Input/output error)
[23:12:00] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:12:11] <dbaupp> spider-mario: oh... that looks more problematic :(
[23:13:15] <dbaupp> cmr: (fwiw, breakpoint() does kill the process outside a debugger.)
[23:14:22] <o11c> what does breakpoint() expand to?
[23:15:01] <o11c> you might be able to signal(SIGTRAP, SIG_IGN)
[23:15:57] *** Quits: jaen (jaen@moz-443AD16F.play-internet.pl) (Quit: WeeChat 0.4.2)
[23:16:00] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[23:16:10] <aatch> glaebhoerl, possibly, but I'm not sure.
[23:16:47] <aatch> I think it could for an intrusive list, not for a generic one though.
[23:17:17] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[23:17:22] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:18:04] <speckle> are there any places one should watch for Rust programs in, apart from github?
[23:18:08] <speckle> probably not Sourceforge?
[23:18:16] <Skrylar> hrm
[23:18:27] <Skrylar> my rustpkg from the master repo doesn't seem to be capable of exe/bins
[23:18:44] <aatch> Skrylar, I've noticed that too, seems to be a problem.
[23:19:17] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:20:12] <Skrylar> i guess i'll just pop the rustpkg's out and rename them from lib to mod, so i can run without it
[23:20:23] <cmr> speckle: github is where it's all at afaict
[23:20:34] <speckle> thanks, cmr!
[23:20:46] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[23:20:47] <speckle> looks like github pretty much replaced sourceforge
[23:20:50] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[23:21:17] <Skrylar> is an 'rlib' a special rust thing?
[23:21:21] <Earnestly> Yep, and many more are leaving sourceforge due to all the inappropriate and excessive ad-spam
[23:21:41] <dbaupp> Skrylar: yes
[23:21:52] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:22:23] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:22:31] <dbaupp> Skrylar: it's basically an archive of LLVM bitcode and normal object code, to allow static linking and LLVM's link-time optimisation
[23:22:34] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:22:40] <Skrylar> neat
[23:23:11] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[23:23:12] <speckle> is it practical to interface with the OS without using C, or does pretty much everyone just end up doing C calls in the end?
[23:23:15] <bjz> speckle: pretty much everyone's on github
[23:23:22] <Skrylar> speckle: C calls
[23:23:25] <cmr> speckle: which OS? :)
[23:23:31] <Skrylar> unless you drop to assembly and do syscalls on linux directly
[23:23:33] <cmr> speckle: aatch has pure-Rust linux syscall interface.
[23:24:00] <speckle> cmr, well, the usual ones I guess - Linux and Windows
[23:24:08] <aatch> It's not the *best* implementation, and it only works on 64-bit Linux, but it works.
[23:24:19] <cmr> On Windows you need to do C calls.
[23:24:28] <cmr> There's no stable NT ABI to use.
[23:24:29] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[23:24:37] *** Joins: jaen (jaen@moz-CE2FE7FF.play-internet.pl)
[23:24:56] <speckle> aatch has something like that? awesome! I'll go look at his github, thanks!
[23:25:19] <speckle> But I guess that embedding assembly in Rust is no worse than doing it in C, anyways 
[23:25:21] <aatch> speckle, it's in grease-bench if I recall correctly.
[23:25:48] <speckle> at least it's probably more encapsulated in Rust, I would guess
[23:25:49] <cmr> yeah
[23:25:52] *** Joins: nical (nico@moz-78B2E7FE.w86-211.abo.wanadoo.fr)
[23:25:54] <o11c> aatch: ooh, shiny
[23:25:57] <aatch> And it's likely the code doesn't compile anymore, I haven't updated it in a while.
[23:26:26] *** Quits: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Ping timeout)
[23:26:28] *** Quits: fabiand (fabiand@moz-B9E8C164.adsl.alicedsl.de) (Quit: Verlassend)
[23:27:15] <Skrylar> hrmm. interesitng bug
[23:27:17] <o11c> hm, with inlining, is inline asm with constant parameters as good as inline asm with hard-coded parameters?
[23:27:29] <Skrylar> if i tell rustc to compile a lib crate with --out-dir, it names it "mod-hash-ver.dll"
[23:27:42] <Skrylar> if i tell it -o here.dll, it says "ignoring output name" and then names it correctly
[23:27:57] <aatch> o11c, generally, yes.
[23:27:59] <tiffany> is that library just a wrapper around the syscalls, or does it attempt to implement some of the bits of the C stdlib?
[23:28:28] <dbaupp> tiffany: aatch's library is just inline asm to do the syscalls with the appropriate arguments
[23:28:40] <tiffany> ah
[23:28:40] <dbaupp> (if that's what you're talking about.)
[23:29:02] <aatch> tiffany, it's more an experiment, so it uses cgroups for memory benchmarking, and I decided to do it without using libstd
[23:29:12] <aatch> And also doing the syscalls directly.
[23:29:28] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[23:29:37] * pcwalton can't wait for the libgreen/libnative split
[23:29:50] <tiffany> the idea of having a language whose standard library doesn't rely on the C stdlib is interesting
[23:29:54] <pcwalton> libstd in bare metal/kernel space/runtimeless space would be great
[23:30:11] <aatch> pcwalton, oh yeah.
[23:30:12] <dbaupp> https://github.com/Aatch/grease-bench/blob/master/src/sys/mod.rs fwiw.
[23:30:16] * Skrylar headscratches
[23:30:17] <o11c> socket calls will be annoying though
[23:30:21] <Skrylar> "can't find crate" -> its right there
[23:30:35] <pcwalton> o11c: with the libnative split? just use libnative
[23:30:38] <pcwalton> you'll get socket calls
[23:30:51] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[23:30:58] <dbaupp> Skrylar: you may need -L ., to get rustc to search the current directory for crates
[23:30:59] <pcwalton> libstd will be basically no OS at all I think
[23:30:59] <aatch> I only spent a weekend on that ^ btw, so it's *very* rough around the edges.
[23:32:11] * aatch does strange projects when he's bored
[23:32:23] <dbaupp> aatch: s/strange/awesome/ :)
[23:32:35] <Skrylar> woo
[23:32:45] <Skrylar> two days of "wtfhow?" and i got the glfw windw open xD
[23:32:56] <dbaupp> \o/
[23:33:26] <aatch> My X11 protocol code generator is turning into a mini compiler.
[23:34:12] <bjz> Skrylar: should have asked for help!
[23:34:18] <bjz> :P
[23:34:34] <Skrylar> bjz: I did :)
[23:34:39] <pcwalton> my de-@mut'd librustc just entered stage2...
[23:34:42] <bjz> oh :(
[23:34:48] <speckle> glfw in Rust, Skrylar ? :)
[23:34:50] <aatch> pcwalton, woo!
[23:34:56] <bjz> Skrylar: sorry if I didn't help
[23:34:58] <pcwalton> libsyntax is still full of @mut
[23:35:22] <pcwalton> we really need niko's change to extend borrow scopes to an entire chain of method calls
[23:35:33] <Skrylar> bjz: different stages; the first one was just getting master built, bonking MinGW to get the correct GCC/G++ for the build, then waiting for the build; yesterday it was figuring out how to use Rc<>
[23:35:49] <bjz> Skrylar: ahh
[23:35:59] <aatch> pcwalton, libsyntax needs an overhaul, in my opinion.
[23:36:01] <pcwalton> right now the compiler is really ugly
[23:36:04] <pcwalton> librustdoc does too
[23:36:07] <pcwalton> well
[23:36:11] <pcwalton> it could use a reformat
[23:36:22] <bjz> Skrylar: btw, I'm working on a refactor of glfw that should make the callbacks easier to use
[23:36:32] <Skrylar> glfw or glfw-rs?
[23:36:32] <pcwalton> I think most of the @ in rustc can go away, honestly, outside of the AST
[23:36:39] <pcwalton> there is a whole lot of @ that just doesn't need to exist
[23:36:42] <bjz> Skrylar: glfw-rs
[23:36:56] <bjz> Skrylar: sorry :P
[23:37:07] <pcwalton> especially now that we have multiple lifetime parameters on structs
[23:37:12] <pcwalton> I think the vast majority of @s can vanish
[23:37:13] <Skrylar> yeah .. I was going to use Allegro, but there is no union in rust
[23:37:28] <pcwalton> we need a c_union!
[23:37:31] <bjz> Skrylar: you can wrap unions
[23:37:32] <aatch> pcwalton, I know. From what I can tell, most of the usage of '@' predates the region system.
[23:37:32] <pcwalton> that just takes a size in u8
[23:37:33] <pcwalton> and casts
[23:37:36] <pcwalton> yup
[23:37:41] <pcwalton> we had to use @ to bring up the region system
[23:37:44] <Skrylar> bjz: i'm not too thrilled on hand-writing that boilerplate :)
[23:37:46] <pcwalton> also there are a lot of comments like
[23:37:53] <bjz> Skrylar: macros!
[23:37:59] <Skrylar> bjz: noob \o/
[23:37:59] <pcwalton> // @ is only used here because visit has @fn
[23:38:09] <pcwalton> and that hasn't been true for a while
[23:38:14] <pcwalton> @fn doesn't even exist :)
[23:38:32] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Client exited)
[23:38:35] <benh> Isn't it just a boxed non-closure fn() ptr now? ;)
[23:38:36] <Skrylar> but yeah, also the lack of being able to store function pointers makes ti really weird to do callback systems
[23:38:40] <bjz> pcwalton: hah!
[23:38:44] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[23:38:53] <bjz> pcwalton: gotta love vestigual comments
[23:38:59] <pcwalton> another thing that I was thinking we should do is to consolidate all of the tables into something like Sema
[23:39:10] <bjz> Sema?
[23:39:16] <pcwalton> so there's a big Sema structure that maps node_id to all of the info stored with that node ID
[23:39:17] <pcwalton> and then only *one* table
[23:39:19] <pcwalton> which maps node_id to Sema
[23:39:24] <pcwalton> I think this is what clang does
[23:39:26] <aatch> pcwalton, rustc has the problem that it doesn't look like a compiler that would be written in today's Rust
[23:39:35] <pcwalton> instead of 30 different tables
[23:39:39] <Skrylar> bjz: i've been trying to write a GL-based GUI, vaguely based on Morphic, and have got to look at a few interesting ways to handle controls/event triggers in a rust-y way
[23:39:42] <pcwalton> which map a node ID to random things
[23:40:02] <aatch> pcwalton, more-or-less, though it does semantic analysis at the same time as parsing because of C++.
[23:40:07] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[23:40:14] <bjz> Skrylar: I'm rewriting glfw-rs to use message queues
[23:40:28] <Skrylar> bjz: so basically what allegro does?
[23:40:37] <pcwalton> aatch: interestingly java has the same problem
[23:40:40] <pcwalton> javac looks nothing like idiomatic Java
[23:40:47] <bjz> Skrylar: you don't want clients to have to deal with cans directly
[23:40:54] <bjz> Skrylar: *Chans
[23:40:56] <Skrylar> bjz: allegro has a queue, then you attach sinks to the queue (mouse, keyboard, window) and those drop events in the queue
[23:41:04] <bjz> Skrylar: yeah
[23:41:05] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:41:09] <Skrylar> i really like allegro's
[23:41:17] <bjz> Skrylar: C callbacks are a pain
[23:41:20] <aatch> pcwalton, for the same reason?
[23:41:22] * pcwalton learned C from Allegro way back in the DOS/DJGPP days
[23:41:25] <pcwalton> aatch: presumably :)
[23:41:28] <Skrylar> I considered using chans for GUI notifications, but i'm not sure if i like that
[23:41:44] <bjz> Skrylar: why?
[23:41:57] <bjz> Skrylar: chans allow client code to be concurrent
[23:42:16] <Skrylar> bjz: just because you get the enum problem with events
[23:42:31] <aatch> I'm kinda tempted to try making an alternate implementation of rustc, not as an actually attempt to usurp it, more just to see what it would end up looking like.
[23:42:32] <Skrylar> all the events in the UI system have to be known up front, and clients adding their own events to custom controls requires duct tape
[23:42:32] * FreeFull initally wrote crappy C programs that only did bad text I/O
[23:42:44] <bjz> Skrylar: you could always have multiple chans
[23:42:44] <pcwalton> aatch: if you made it work better than I would just replace rustc with it
[23:42:49] <pcwalton> but it might be easier to do it piecemeal
[23:42:56] <FreeFull> Skrylar: Do you like allegro better than SDL?
[23:42:59] *** Joins: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP)
[23:43:02] <o11c> in my experience total replacements don't work
[23:43:07] <pcwalton> start with trans and work backwards or something
[23:43:16] <o11c> especially since rust isn't even a stable language
[23:43:18] <pcwalton> or rewrite typeck
[23:43:18] <Skrylar> FreeFull: yes, because it just does all the things you probably want from SDL up front, and I like their event queues
[23:43:20] <pcwalton> or something
[23:43:22] *** Joins: ricepuddin (graham@A584E1EF.E6D957F2.39C00A7A.IP)
[23:43:25] <bjz> Skrylar: but ultimately you're going to have to do some kind of switching
[23:43:30] <aatch> pcwalton, it would probably be a limited set anyway. I don't know enough about the bit in the middle to do it properly.
[23:43:31] <pcwalton> o11c: well, Google did gccgo
[23:43:32] <Skrylar> FreeFull: i usually ended up having to also build SDL_mixer and whatnot
[23:43:37] <pcwalton> but gccgo is kind of languishing
[23:43:40] <pcwalton> so it may not be the best example
[23:44:12] <aatch> I can do parsing well and then code-gen, but all the analysis makes my head spin.
[23:44:18] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[23:44:25] <o11c> aatch: cheat
[23:44:26] <bjz> Skrylar: I am considering moving to my own sdl2 wrapper, because glfw doesn't have very good joystick support
[23:44:39] <bjz> Skrylar: but I want to get glfw-rs nice first
[23:45:03] <Skrylar> bjz: what i had been tinkering with was having the GUI be action-based; you make the individual actions for whatever the gui is for, and then you don't really directly interact with the GUI
[23:45:06] *** Joins: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:45:27] <bjz> Skrylar: you can do nice things with traits
[23:45:36] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:45:49] <aatch> I'd be interested to see how much work changing the AST representation would be. Though I might wait for allocator support first.
[23:45:50] <Skrylar> i have an 'actionable' trait that can be used to grab the action's name / description / trigger it
[23:46:06] <FreeFull> I find the experiments in FRP interesting, although it doesn't look mature yet
[23:46:27] <aatch> Since then we can just allocate AST nodes in an arena.
[23:46:30] <bjz> can you make trait objects using Rc<T>? or will that require language support?
[23:46:40] <Skrylar> Rc<~T> works
[23:46:42] <aatch> bjz, needs DST
[23:46:52] <Skrylar> Rc::from_send(action as ~Actionable)
[23:46:55] <aatch> (assuming you mean where T is a trait)
[23:47:14] <bjz> Skrylar: that makes the T owned
[23:47:27] <bjz> Skrylar: and also a double-allocation
[23:47:27] *** Quits: jaen (jaen@moz-CE2FE7FF.play-internet.pl) (Ping timeout)
[23:47:43] <Skrylar> well the action object is held on to by the controller
[23:47:55] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[23:48:09] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[23:48:29] <aatch> Skrylar, if the original action is held onto by the controller, couldn't you use borrowed pointers?
[23:48:45] <Skrylar> aatch: maybe, but those aren't storable
[23:48:48] <pcwalton> ok, bootstrapped, now time to rebase
[23:49:13] <aatch> Skrylar, what do you mean?
[23:49:38] *** Quits: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[23:49:42] <Skrylar> aatch: well in this design, the GUI is a scene graph of rectangles and you put an Actionable on them if they're a button
[23:49:58] <Skrylar> borrowed pointers don't store in a tree
[23:50:32] <bjz> yeah you'd need to thread the lifetimes around
[23:50:54] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:50:56] <aatch> So? Thread the lifetimes around. That's the point.
[23:51:07] <aatch> It what makes Rust so powerful in this case.
[23:51:25] <Skrylar> how do you store the tree in that case
[23:51:31] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[23:52:24] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[23:52:46] <aatch> Hmm, that is an issue. What about using an ActionID value to maps to the action in the controller?
[23:52:49] <Skrylar> if all the controls are known, you can just toss together a big Enum and shove events down a Chan; that's basically what Allegro does
[23:54:45] *** Joins: hacker_sam (hacker_sam@CAF68D88.572E68FD.39C3E352.IP)
[23:54:54] <Skrylar> aatch: you could, but doesn't that put in a table lookup to every event?
[23:55:45] <Skrylar> i'm not actually opposed to the enum method, its a lot easier to maintain; i was just concerned with if someone adds their own control they have to modify the base library to support it
[23:55:47] <aatch> Skrylar, no different to the multiple layers of indirection for Rc
[23:56:17] <bjz> Skrylar: yay, expression problem rears its head again
[23:56:29] <bjz> :P
[23:56:51] <bheylin> anyone know how to merge two &str into one?
[23:56:59] <bjz> yeah, makes sense maybe to use trait objects then
[23:57:03] <bheylin> i see plenty of ways to splice them :)
[23:57:04] <dbaupp> bheylin: `a + b`
[23:57:06] <aatch> bheylin, '+'
[23:57:14] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[23:57:26] <bheylin> where is that defined?
[23:57:46] <dbaupp> bheylin: in Str
[23:57:51] <dbaupp> well, std::str
[23:57:51] <bheylin> Add trait I guess
[23:57:58] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:58:12] <ChrisMorgan> bheylin: but it will necessarily allocate a new string
[23:58:14] <bjz> Skrylar: once we get lang support for user defined memory management thingies, then you'll be able to remove that level of indirction
[23:58:15] <dbaupp> yeah, the only place you can see the impl is http://static.rust-lang.org/doc/master/std/ops/trait.Add.html
[23:58:22] <dbaupp> down the bottom
[23:58:27] <Skrylar> i figured with trait objects it made more sense to the programmer because you're thinking of functions, the buttons read their text/enable state from their actions, and it works kind of like signals/slots
[23:58:39] <Skrylar> and you have the option of tossing events on a Chan from the trigger function
[23:58:44] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:58:56] <bheylin> ah there it is
[23:59:28] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[23:59:34] <Skrylar> and you can make your own morphs by just tossing together a new struct, take the morph trait, and give it its own trigger mechanics for actions
[23:59:44] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
