[00:00:07] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[00:01:53] <achin> are there any functions that will build something like a ~[int, ..64]?  or do i need a literal to construct a value like this?
[00:02:17] <dbaupp> rusti: ~[0, .. 10]
[00:02:18] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[00:02:39] <dbaupp> rusti: let a = 10; std::vec::from_elem(a, 0) // if you have a non-constant
[00:02:41] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[00:03:08] <achin> ah, cool so the first element can be used to initialize the whole thing
[00:03:18] <dbaupp> rusti: let a = 10; std::vec::from_fn(a, |i| ~i) // if you have something that's not copiable, or depends on the index
[00:03:19] -rusti- ~[~0u, ~1u, ~2u, ~3u, ~4u, ~5u, ~6u, ~7u, ~8u, ~9u]
[00:03:19] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[00:04:17] <dbaupp> (notably, the ~[val, .. repeat] syntax is special-cased to give a ~[typeof(val)] vector, not a pointer to a [typeof(val), .. repeat] fixed length vector)
[00:04:41] <dbaupp> writing it as ~([val, .. repeat]) gives the latter
[00:04:42] <achin> in may case, i want a fixed-length vector
[00:04:58] <dbaupp> oh, just drop the ~ :)
[00:05:08] <dbaupp> (unless it's *huge* and you want it off the stack)
[00:05:41] *** Quits: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[00:07:06] <bvssvni> dbaupp: do you mean it is possible to create a virtual vector?
[00:07:27] <achin> dbaupp: great, thanks, question answered!
[00:07:59] *** Quits: mleise (marco@moz-412EACFE.pools.arcor-ip.net) (Ping timeout)
[00:08:04] <dbaupp> bvssvni: what is a virtual vector?
[00:08:07] <achin> in my case, the vector is small, but i tend to box things by default
[00:08:24] <dbaupp> the default should be the other way, in Rust
[00:08:28] <bvssvni> dbaupp: like in Haskell, where there can be lazy evaluated lists
[00:08:38] <FreeFull> rusti: ~[0..10]
[00:08:40] -rusti- pastebinned 6 lines of output: http://ix.io/9FW
[00:08:51] <dbaupp> unboxed unless benchmarking/stack safety tells you that it should be boxed
[00:08:54] <FreeFull> Nope, no ranges
[00:09:08] <FreeFull> rusti: range(1,11).to_vec()
[00:09:10] -rusti- pastebinned 7 lines of output: http://ix.io/9FX
[00:09:15] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[00:09:16] <dbaupp> bvssvni: no
[00:09:16] <achin> dbaupp: i had been using boxes as a mechanism to force me to think about ownership
[00:09:35] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[00:09:38] <dbaupp> achin: unboxed values are still owned (in exactly the same way)
[00:09:49] *** Joins: alonlevy (alon@moz-30492E92.bb.netvision.net.il)
[00:09:50] <dbaupp> well, I guess boxed values always move by default
[00:10:00] <achin> right
[00:10:11] <dbaupp> while unboxed are sometimes Pod and so don't invalidate the source always
[00:10:11] <kimundi> rusts vectors are nothing more than a chunk of memory - there is no additional smartness
[00:10:28] <achin> i'll reconsider, though
[00:10:32] <dbaupp> bvssvni: (you can write a library to give you lazy evalutation, though. E.g. extra::future)
[00:10:38] *** Joins: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com)
[00:10:39] <Matthias247> hmm, should I really get all these dead code warnings for Types and functions which are exported through pub?
[00:10:40] <dbaupp> achin: unboxed values are almost always faster
[00:10:42] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[00:10:48] <dbaupp> Matthias247: are they in a `pub` module?
[00:10:56] <achin> because you don't have to dereference?
[00:11:09] <dbaupp> better cache-locality, don't need to spend the cycles allocating and freeing
[00:11:17] <kimundi> achin: Yes, and because they didn't get allocated on the heap
[00:11:36] <kimundi> achin: The heap part is more important than the derference part ;)
[00:11:38] <Matthias247> dbaupp: they are declared their own file which is included with mod thisfile;
[00:11:52] <dbaupp> Matthias247: are you writing a library?
[00:12:09] <dbaupp> (i.e. do you want them usable outside the current crate?)
[00:12:20] <bstrie> FreeFull: try range(0,10).collect()
[00:12:26] <Matthias247> dbaupp: later on that's the plan. Currently library and application are in the same project/crate to make things easier
[00:12:31] <dbaupp> FreeFull: (or .to_owned_vec())
[00:12:46] <bstrie> oh, you did :P
[00:12:47] <achin> so really the default position (at least for POD) should be unboxed, and if you're worried about extra copies, use borrowed pointers?
[00:12:48] <dbaupp> Matthias247: oh, so the functions aren't being called at all?
[00:12:53] <kimundi> Matthias247: "mod" declares a module - if its not public then you can't access anything inside from the outside
[00:13:04] <dbaupp> achin: no, the default position should be unboxed for all values
[00:13:30] <FreeFull> bstrie: well, 0,11, range doesn't include the last element
[00:13:31] <Matthias247> dbaupp: yes. Currently they are not called. But they are there for later use
[00:13:52] *** Joins: mr_trousers (Mibbit@moz-E034F2A6.cpe.netcabo.pt)
[00:14:00] <dbaupp> Matthias247: well if they aren't called in the current crate and you are building an executable, then rustc can tell that those function will never be called
[00:14:08] <dbaupp> (can't use an executable as a library)
[00:14:11] <dbaupp> so they're dead
[00:14:24] <dbaupp> you can put #[allow(dead_code)] on the module to silence the warnings for now
[00:14:29] <achin> ok, thanks guys.  i learn something everytime i poke my head in here
[00:14:30] <Matthias247> ok, so the behaviour is changed when I compile as a library?
[00:14:35] <dbaupp> yes
[00:14:38] <Matthias247> ok
[00:14:51] <kimundi> achin: You should only very very rarely need to explicitly introduce pointer indirection for optimisation - usually the compiler is already smart enough that that is not something you need to think about
[00:14:53] <dbaupp> but you'll need to have it `pub mod thisfile;` to actually export them as yourcratename::thisfile::some_function
[00:15:14] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[00:15:21] *** Joins: Skrylar_ (Skrylar@moz-F692F728.austin.res.rr.com)
[00:15:57] <Matthias247> C# only warns about dead code for non-public functions. This was what I expected :)\fs26
[00:16:04] <dbaupp> achin: (e.g. File, not ~File; int, not ~int; ~[T] not ~~[T].)
[00:16:13] <dbaupp> Matthias247: if it is in a private module, then it isn't public
[00:16:35] *** Joins: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP)
[00:16:35] *** Quits: Ferreus (ferreus@moz-89E120A5.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[00:16:39] <Matthias247> ok, if I use pub mod then the warnings are gone
[00:16:43] <dbaupp> awesome
[00:16:48] <Matthias247> Even if it's still compiled as an application :)
[00:16:52] <dbaupp> oh, weird
[00:16:56] * dbaupp didn't expect that
[00:17:11] <Matthias247> hehe. Still thanks :)
[00:17:16] <dbaupp> I guess it doesn't treat applications and libraries differently
[00:17:25] <FreeFull> What's the most efficient and pretty way to express factorial in rust?
[00:17:28] <achin> is there a way i can use the concept of ownership (move semantics) without boxes?
[00:17:53] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: )
[00:17:53] <kimundi> achin: Rule of thumb for the start: Have everything unboxed, have every function that takes ownership take by value, have every function that does not need ownership take by reference. Ignore ~ except for strings and vector, and when you need to define a recursive datastructure
[00:17:58] <dbaupp> rusti: let n = 10; range(1, n+1).fold(1, |prod, next| prod*next)
[00:17:59] -rusti- 3628800
[00:18:03] <dbaupp> FreeFull: ^
[00:18:21] <FreeFull> Ah, Rust has folds, nice
[00:18:26] <FreeFull> Only left fold though?
[00:18:30] <dbaupp> achin: (and return unboxed were possible)
[00:18:36] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[00:18:42] <dbaupp> FreeFull: a right fold doesn't make sense for an iterator (without laziness)
[00:18:50] <dbaupp> you just use the reverse iterator
[00:19:02] <FreeFull> That's fine
[00:19:04] <dbaupp> s/you just/though you can just/
[00:19:06] <FreeFull> .reverse(), right?
[00:19:08] <achin> dbaupp: kimundi: ok, got it
[00:19:08] <dbaupp> (where it exists)
[00:19:17] <dbaupp> FreeFull: .invert()
[00:19:34] <dbaupp> (but not all iterators have it defined, since it's impossible in general)
[00:19:53] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:20:43] <bvssvni> rusti: ln(2)
[00:20:45] -rusti- pastebinned 7 lines of output: http://ix.io/9G5
[00:20:59] <bvssvni> rusti: log(2)
[00:21:00] <dbaupp> FreeFull: (in theory that fold optimises nicely, but we don't have super-nice closures so writing a manual `let mut ret = 1; for i in range(...) { ret *= i; } ret` may be slightly faster
[00:21:02] -rusti- pastebinned 7 lines of output: http://ix.io/9G8
[00:21:05] <dbaupp> rusti: std::num::ln(2)
[00:21:07] -rusti- pastebinned 6 lines of output: http://ix.io/9G9
[00:21:16] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[00:21:18] <dbaupp> rusti: std::num::ln(2.0)
[00:21:19] -rusti- 0.69314718f64
[00:22:22] <bvssvni>  rusti: let n = 10.0; range(1.0, n+1.0).fold(0, |prod, next| prod + std::num::ln(next))
[00:23:02] <dbaupp> rusti: let n = 10; range(1, n+1).fold(0.0, |prod, next| prod + std::num::ln(next as f64))
[00:23:03] -rusti- 15.10441257f64
[00:23:04] <kimundi> rusti: let n = 10.0; range(1.0, n+1.0).fold(0, |prod, next| prod + std::num::ln(next))
[00:23:06] -rusti- pastebinned 7 lines of output: http://ix.io/9Gb
[00:23:11] <geomyidae> rusti: fn pp(p: &[u8]) { let p2 = p.map(|&e| if e > 31 && e < 127 { e } else { '.' as u8 }); let s3 = std::str::from_utf8_owned(p2); println!("print ascii-mapped bytes: {:?}", s3); } fn main() { let x = &[104, 101, 108, 112]; pp(x); }
[00:23:11] -rusti- ()
[00:23:24] <bvssvni> haha
[00:23:38] *** Quits: nkoep (nik@moz-7C88E9F4.pool.mediaways.net) (Client exited)
[00:23:48] <geomyidae> rusti: let p1 = &[104, 101, 108, 112]; let p2 = p1.map(|&e| if e > 31 && e < 127 { e } else { '.' as u8 }); let s3 = std::str::from_utf8_owned(p2); println!("print ascii-mapped bytes: {:?}", s3);
[00:23:48] -rusti- print ascii-mapped bytes: ~"help"
[00:23:48] <dbaupp> rusti: fn pp(p: &[u8]) { let p2 = p.map(|&e| if e > 31 && e < 127 { e } else { '.' as u8 }); let s3 = std::str::from_utf8_owned(p2); println!("print ascii-mapped bytes: {:?}", s3); } let x = &[104, 101, 108, 112]; pp(x);
[00:23:49] -rusti- ()
[00:23:49] -rusti- print ascii-mapped bytes: ~"help"
[00:23:49] -rusti- ()
[00:24:05] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[00:24:57] *** Joins: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca)
[00:27:12] <geomyidae> dbaupp: I don't understand the distinction
[00:27:33] <dbaupp> geomyidae: between?
[00:28:08] <geomyidae> why does it work when you don't use  fn main
[00:28:11] <bstrie> what's the trick to running the compiler without installing, with just a symlink?
[00:28:41] <bstrie> just link the stage2 compiler into /usr/local/bin?
[00:28:43] <dbaupp> geomyidae: because that's how rusti works
[00:29:04] <dbaupp> geomyidae: the input line is substituted for $@ in https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[00:29:25] <wilkie> https://gist.github.com/wilkie/157110f8387ecfce021e does anybody know a workaround or whether this could be a syntax bug in it being too liberal?
[00:29:55] <dbaupp> wilkie: it's abug
[00:30:00] <dbaupp> you can import things with `use`
[00:30:02] <bstrie> ok hai wilkie!
[00:30:07] <bstrie> been a while
[00:30:25] <dbaupp> so `use foo;` just at the start of `mod bar` lets you write `foo` without the :: global-path prefix
[00:30:43] <bvssvni> wilkie: I believe Rust follows the idioms of C enums
[00:30:47] <dbaupp> and `use foo::{Foo, X, Y, Z}` lets you write all those things without the `foo::` prefix
[00:31:32] <geomyidae> I'm not sure we're talking about the same thing, I can't make it print "help" when I pass a &[u8] to a function. it seems to work with rusti without fn main, but  I can't make it work locally unless I don't put it in a separate function
[00:31:36] <bvssvni> wilkie: sorry, thought I read something else
[00:32:03] <dbaupp> geomyidae: we are
[00:32:12] <dbaupp> geomyidae: did you look at that script?
[00:32:48] <dbaupp> geomyidae: it's already wrapped in a fn main() {} in that script, so by having a second nested fn main, you're just declaring an inner function called `main` but never calling it
[00:33:03] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:33:04] <kimundi> rusti: fn pp(p: &[u8]) { let p2 = p.map(|&e| if e > 31 && e < 127 { e } else { '.' as u8 }); let s3 = std::str::from_utf8_owned(p2); println!("print ascii-mapped bytes: {:?}", s3); } fn main2() { let x = &[104, 101, 108, 112]; pp(x); } main2();
[00:33:04] -rusti- print ascii-mapped bytes: ~"help"
[00:33:05] -rusti- ()
[00:33:26] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[00:33:30] <dbaupp> geomyidae: that is, rusti is providing the fn main for you
[00:33:42] *** Quits: mr_trousers (Mibbit@moz-E034F2A6.cpe.netcabo.pt) (Quit: http://www.mibbit.com ajax IRC Client)
[00:33:56] <geomyidae> sorry, I'm following that, I must have something slightly different in my code locally. Let me try to make a better test case, I must be over looking something else
[00:34:08] <dbaupp> would you expect `fn main() { fn main() { println("hi") } }` to print `hi`? (locally, not in rusti)
[00:34:24] <geomyidae> kimundi drove that point home, I'm not seeing ~"help" printed locally when I call pp
[00:34:27] <geomyidae> 9sorry)
[00:34:50] <bvssvni> rusti: fn main() {prinln("hi");} main()
[00:34:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:34:52] -rusti- pastebinned 7 lines of output: http://ix.io/9Gc
[00:35:04] <dbaupp> geomyidae: oh... full code?
[00:35:15] <bvssvni> rusti: fn main() {println("hi");} main()
[00:35:15] -rusti- hi
[00:35:16] -rusti- ()
[00:35:58] <wilkie> dbaupp: ah. so then your only trouble would be if mod foo was also defined within bar?
[00:36:48] <dbaupp> wilkie: in that case you don't need any uses to write `foo::X` (rather than `::foo::X`), because `foo` is already in scope in bar
[00:36:55] <dbaupp> (since it is declared in bar)
[00:37:22] <wilkie> if there were two mod foos, one inside bar and one in root namespace
[00:37:23] <dbaupp> wilkie: although, you can still write `use bar::foo::{Foo, X, ...};` or `use self::foo::{Foo, ... }` to import them to use them unqualified
[00:37:39] <wilkie> ah, yes, that would indeed wor
[00:37:40] <wilkie> k
[00:37:44] *** Joins: thpickert (thpickert@moz-CAEDC3FB.dynamic.dsl.tng.de)
[00:37:46] <dbaupp> two foo's isn't a problem
[00:37:58] <kimundi> wilkie: then the use would get shadowed by the local declaration, and you couldn'T access the use-d foo
[00:38:00] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Quit: Leaving.)
[00:38:08] <wilkie> right, it would know which because the use would apply first
[00:38:31] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:38:40] <dbaupp> well
[00:38:43] <dbaupp> I see
[00:38:54] *** Joins: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com)
[00:38:56] * dbaupp misinterpreted
[00:40:11] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[00:40:54] <wilkie> it's indeed a workaround. although the mandatory use of 'use' was not obvious to me. it is strange that I can't explicitly scope it there.
[00:41:16] <wilkie> thanks
[00:41:24] <kimundi> wilkie: Its a bugm you should be able to
[00:41:52] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[00:41:52] <dbaupp> https://github.com/mozilla/rust/issues/6449
[00:42:10] <dbaupp> kimundi: http://stackoverflow.com/questions/20922091/how-do-you-use-parent-module-imports-in-rust if you want some SO rep, btw :)
[00:42:44] <kimundi> Eh, nah. Don't even have a SO account
[00:43:06] <wilkie> dbaupp: ah,didn't see that issue. interesting.
[00:43:35] <dbaupp> kimundi: bleh, now I have to answer it
[00:43:36] <dbaupp> :P
[00:43:56] * dbaupp will do that later if no one else gets to it
[00:44:49] *** Joins: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net)
[00:46:58] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[00:47:07] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:51:43] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[00:53:25] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[00:53:30] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:55:26] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[00:56:37] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[00:58:24] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[01:00:12] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[01:01:20] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[01:05:24] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[01:06:07] *** Joins: TingPing (tingping@moz-1A0DA09.se)
[01:06:56] *** Quits: heftig (heftig@moz-23812B5B.dip0.t-ipconnect.de) (Ping timeout)
[01:07:01] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[01:08:30] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[01:08:31] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[01:09:37] *** Quits: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[01:09:51] *** Joins: logicalparadox (logicalpar@7E906627.EDE60785.5A75A172.IP)
[01:10:10] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[01:10:15] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[01:11:56] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[01:13:00] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:13:09] *** Joins: heftig (heftig@moz-8A43D4F9.dip0.t-ipconnect.de)
[01:13:14] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[01:13:37] *** Parts: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net) ()
[01:15:09] *** Joins: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net)
[01:15:26] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[01:16:44] *** kimundi is now known as zz_kimundi
[01:18:18] <pyon> Can I use a custom error message with failed asserts?
[01:18:28] <pyon> s/with failed asserts/when an assert fails/
[01:20:00] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:21:33] <bstrie> rusti: assert!(false, "oh hai there pyon")
[01:21:34] -rusti- task '<unnamed>' failed at 'oh hai there pyon', out.rs:9
[01:21:34] -rusti- application terminated with error code 101
[01:22:08] <pyon> ty
[01:23:01] <kvark> Back to rustpkg... There seem to be so many projects using it already, and yet my basic issue remains unsolved yet (or did I miss the solution)?
[01:23:20] <pyon> bstrie: Can assert! use a formatted string?
[01:23:49] <pyon> That is, with the string only being formatted if assert fails.
[01:23:57] <kvark> My project depends on rust-freetype, which does not have rustpkg compatible structure. Rustpkg tries to build it and of course is not able to find the sources. Have anyone encountered a similar issue?
[01:23:58] <bstrie> rusti: assert!(false, format!("oh hai there {}", "pyon"))
[01:23:58] -rusti- task '<unnamed>' failed at 'oh hai there pyon', out.rs:9
[01:23:58] -rusti- application terminated with error code 101
[01:24:10] <pyon> Oh, nice!
[01:24:32] <kvark> rusti: assert!(false,"{}","pyon")
[01:24:33] -rusti- task '<unnamed>' failed at 'pyon', out.rs:9
[01:24:33] -rusti- application terminated with error code 101
[01:24:40] <bstrie> oh right
[01:24:43] <bstrie> it's built-in :P
[01:25:16] <kvark> bstrie, are you good with rustpkg?
[01:25:23] <bstrie> NOPE
[01:25:26] <bstrie> sorry :)
[01:25:44] <kvark> how did all these people got it working...
[01:26:00] * kvark back to reading code
[01:26:36] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:26:36] *** ChanServ sets mode: +ao dherman dherman
[01:26:36] *** Parts: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com) (ERC Version 5.3 (IRC client for Emacs))
[01:27:16] <kvark> interesting, https://github.com/alexcrichton/rs-splay uses rustpkg but it doesn't have a "src" folder
[01:27:39] <kvark> alex crichton, are you here?
[01:27:54] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[01:28:31] <bstrie> kvark: that would be achin 
[01:28:33] <bstrie> ersadfsdf
[01:28:36] <bstrie> kvark: that would be acrichto 
[01:28:40] <bstrie> damn you autocorrect
[01:28:48] <SiegeLord> That's how you're supposed to use rustpkg, I believe
[01:29:08] <SiegeLord> The 'src' folder is an compatibility feature
[01:29:32] <kvark> SiegeLord: erm, but what about http://static.rust-lang.org/doc/master/rustpkg.html ? (3. Package structure)
[01:30:04] <kvark> ok, let's put it another way: what is the proper (up to date) doc/info/manual/tutorial on rustpkg?
[01:30:17] <SiegeLord> I'm hardly nonplussed by rustpkg documentation not being accurate
[01:30:25] <kvark> citing "A valid workspace must contain each of the following subdirectories:"...
[01:30:36] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:30:36] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:30:36] <SiegeLord> A repository is not a workspace
[01:30:51] <SiegeLord> Or at least, I was made to believe it wasn't one
[01:31:48] <kvark> SiegeLord: ok, you have a point. So when someone runs "rustpkg install github.com/alexcrichton/rs-splay", it actually creates rs-splay folder inside "current workspace/src"?
[01:32:33] <SiegeLord> It should create this set of nested directories: github.com/alexcrichton/rs-splay
[01:32:43] <SiegeLord> Let me check though...
[01:32:56] <kvark> task '<unnamed>' failed at 'Unhandled condition: nonexistent_package
[01:33:00] <kvark> that's what I get
[01:33:39] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Ping timeout)
[01:33:45] <kvark> clearly, Alex has either not tested it himself, of I'm missing a secret or two here
[01:33:48] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:33:53] <SiegeLord> Well, it installs fine here
[01:34:09] <kvark> doh
[01:34:25] <kvark> "supplied path for package dir does not exist, and couldn't interpret it as a URL fragment"
[01:34:26] <SiegeLord> I just invoked that exact command
[01:34:35] <kvark> from an empty dir?
[01:34:38] <SiegeLord> Yes
[01:35:08] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[01:35:30] <kvark> I'm lost then. Need a rustpkg dev here to explain why it misbehaves
[01:35:32] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:35:39] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[01:35:59] <SiegeLord> I now observe a .rust/lib/x86_64-unknown-linux-gnu/librs-splay-35912436-0.0.so
[01:36:40] <kvark> rustpkg 0.9-pre (ff578b7 2014-01-02 03:32:02 -0800) host: x86_64-unknown-linux-gnu
[01:36:42] <kvark> what is yours?
[01:36:55] *** flaper87 is now known as flaper87|afk
[01:37:03] <SiegeLord> rustpkg 0.9-pre (55d4923 2014-01-04 13:56:48 -0800)
[01:37:05] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[01:37:23] <kvark> syncing up...
[01:37:59] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[01:38:31] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:38:50] *** Quits: espadrine (Thunderbir@moz-3CE5C493.w92-128.abo.wanadoo.fr) (Ping timeout)
[01:38:56] *** Quits: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca) (Quit: canhtak)
[01:39:24] <bstrie> haha, I just realized that python's optional type annotations use the exact same syntax as rust
[01:40:11] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[01:40:56] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:40:59] <bstrie> def haul(item: Haulable, *vargs: PackAnimal) -> Distance:
[01:41:01] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[01:41:20] <bstrie> as long as you ignore python's `def` and trailing colon, that is
[01:41:43] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:42:11] *** Joins: espadrine (Thunderbir@moz-3CE5C493.w92-128.abo.wanadoo.fr)
[01:42:16] <bstrie> I honestly wonder if that's where graydon got it from, or if there's some earlier common ancestor
[01:42:22] <bstrie> maybe some ML
[01:43:09] *** Quits: logicalparadox (logicalpar@7E906627.EDE60785.5A75A172.IP) (Ping timeout)
[01:44:15] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:44:26] <pyon> bstrie: fun test (a: foo, b: bar): baz = ... (* Standard ML *)
[01:44:37] <bstrie> nah, doesn't have the arrow
[01:44:44] <bstrie> that's the most novel thing here IMO
[01:44:50] <pyon> Oh.
[01:44:51] *** Quits: caipre (nplatt@moz-850C853A.strong.csnstores.com) (Quit: leaving)
[01:44:54] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[01:46:02] <dbaupp> bstrie: the arrow appears in Haskell type signatures (foo :: a -> b)
[01:46:09] <pyon> ML uses the arrow as an infix type constructor: if "foo" and "bar" are types, "foo -> bar" is a type as well.
[01:46:14] <bstrie> hm
[01:47:48] <bstrie> dbaupp: what does a haskell function that takes two parameters look like
[01:47:54] <bstrie> its type, rather
[01:47:57] <pyon> a -> b -> c
[01:48:07] <bstrie> then NOPE, not even remotely the same :P
[01:48:29] <pyon> bstrie: Well, actually, there are two possibilities (that are isomorphic): "a -> b -> c" and "(a, b) -> c".
[01:48:45] <pcwalton> I think it's from ocaml but modified to declaration-follows-type.
[01:48:55] <pyon> bstrie: Technically speaking, all functions take a single argument. You may choose between 1. taking the first argument and returning a function of the rest, 2. taking a tuple containing all the arguments.
[01:49:07] <pyon> (That is, in Haskell and ML.)
[01:49:10] <pcwalton> so in ocaml the declaration is written let foo (i:int) : int = … and the function is written int -> int
[01:49:21] <pcwalton> graydon preferred declaration-follows-use so changed the declaration to use -> as well
[01:49:28] <bstrie> well I like what rust does
[01:49:40] <bstrie> much prefer the arrow to ML's colon
[01:49:57] <pcwalton> err, the function *type* is written int -> int.
[01:50:06] <bstrie> good to know though
[01:50:24] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[01:50:29] <bstrie> I'll file that away for my ever-accumulating "evolution of rust" presentation, to be given probably never :)
[01:50:41] <pcwalton> although keep in mind ancient rust used let int x = ...
[01:50:41] <pyon> :-O
[01:50:42] <pcwalton> and no colon
[01:51:08] <bstrie> before my time!
[01:52:04] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[01:53:34] *** Joins: logicalparadox (logicalpar@7E906627.EDE60785.5A75A172.IP)
[01:54:35] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[01:55:33] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[01:56:23] <kvark> acrichto: is your rust-compress focused on practice or education?
[01:56:45] *** Quits: thpickert (thpickert@moz-CAEDC3FB.dynamic.dsl.tng.de) (Client exited)
[01:57:07] <ptc> Has anyone tried building rust-core on Mac OS X with success? I get errors about failing to resolve c_types. 
[01:57:44] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:58:24] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:58:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:59:58] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:00:54] <dbaupp> ptc: it appears to be cfg'd off on any other platforms
[02:00:58] <dbaupp> https://github.com/thestinger/rust-core/blob/master/core/lib.rs#L68
[02:01:29] <ptc> dbaupp: thanks for the find, interesting, I guess I'll try changing that locally
[02:01:33] <dbaupp> I thinks strcat only works on linux (for now) and so hasn't got the hardware to test on any other platforms
[02:01:51] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[02:04:10] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:04:14] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[02:04:21] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[02:08:46] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[02:09:21] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[02:11:00] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[02:11:05] <itdaniher> Is there any way to link the output of rustc --emit-llvm to a rust executable?
[02:11:06] *** Joins: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca)
[02:12:22] *** Joins: jfbk (jfbk@moz-5CDDF4C4.cmdnnj.fios.verizon.net)
[02:12:25] <itdaniher> or rather, into a rust executable
[02:12:44] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[02:12:47] <dbaupp> itdaniher: https://github.com/thestinger/rust-core/#building
[02:12:55] <dbaupp> the clang invocation there
[02:13:05] <itdaniher> oh awesome, thanks
[02:13:16] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[02:13:31] *** Quits: eholk (eholk@moz-799DA9F.lsanca.fios.verizon.net) (Quit: eholk)
[02:13:48] <dbaupp> it might require some -l arguments
[02:13:54] <dbaupp> (if you are using the stdlib)
[02:14:30] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[02:15:33] <itdaniher> hmm
[02:15:35] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[02:15:45] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[02:15:58] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[02:17:33] <bstrie> how do you get at a thing that's inside a Gc or Rc
[02:18:25] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Ping timeout)
[02:19:19] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:19:39] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:20:16] *** Joins: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com)
[02:21:10] <dbaupp> bstrie: .borrow()
[02:21:54] <acrichto> kvark: re rs-splay, I'd just build lib.rs for now (rustpkg usage is a little sketchy still), re rust-compress it was mostly because I wanted to explore how useful rust in terms of speed without breaching into unsafe code, so I would say more educational than practice-wise, although I'm not opposed at all to making things practical
[02:24:47] <bstrie> dbaupp: aha
[02:25:21] <kvark> acrichto: trying out some BWT/Ari/DC compression schemes in Rust was on my list, so now I'm thinking doing it inside the rust-compress project, if you don't mind
[02:26:47] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:27:40] *** Quits: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP) (Quit: brb)
[02:28:16] <kvanb> heh
[02:28:22] <kvanb> I thought someone was impersonating me for a sec
[02:28:23] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[02:28:33] <kvark> lol, I know right?
[02:28:39] <kvanb> lol
[02:30:18] <bstrie> secretly, kvark and kvanb are twins who were separated at birth
[02:30:36] <kvanb> ;_; mine is my name, whats yours
[02:30:36] <bstrie> who would have thought that they would reunite in this most unlikely of places
[02:31:14] <kvark> kvanb is the name? what language is this, I'm curious?
[02:31:51] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[02:32:45] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:34:08] <acrichto> kvark: sure! I'd love to include more things
[02:34:18] <acrichto> I need to get around to put some more stuff in there
[02:34:29] <bstrie> is there a way to only build libextra?
[02:34:33] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:34:58] <kvanb> kyle van berendonck
[02:34:58] <acrichto> rustc src/libextra/lib.rs
[02:35:00] <kvanb> afk
[02:35:14] <bstrie> cool
[02:35:55] <kvark> kvanb: ah I see, well mine is just a nick. I'll think of a way to differentiate better here
[02:35:56] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:36:03] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[02:36:03] <kvanb> I dont come here much :P
[02:36:04] <kvanb> dont try too hard
[02:36:05] <kvanb> afk
[02:36:20] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:36:57] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:36:59] <bstrie> um, under what circumstances is it possible for the `std::gc` module to not be visible
[02:37:17] <bstrie> surely libextra is not no_std
[02:37:32] <bstrie> error: use of undeclared module `std::gc`
[02:37:48] <dbaupp> bstrie: how old is your checkout?
[02:37:55] <bstrie> dbaupp: just checked it out
[02:37:59] <bstrie> and it works in a minimal test case
[02:38:07] <bstrie> I'm working on removing @[T]
[02:38:22] <bstrie> do I have to do ::std or something dumb like that
[02:38:31] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[02:38:33] *** Quits: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[02:38:34] <dbaupp> oh
[02:38:35] <dbaupp> yeah
[02:38:39] <dbaupp> you need `std` in scope
[02:38:40] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:38:43] <bstrie> uuuugh
[02:38:45] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[02:38:48] <dbaupp> either `use std;` ::std or `use std::gc`
[02:39:01] <dbaupp> (or use `std::gc::Gc;` (which I would personally use))
[02:39:02] <bstrie> this is why I don't use modules in rust
[02:39:07] <bstrie> too much bs like this
[02:39:46] *** Joins: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com)
[02:39:48] <bstrie> dbaupp: I'm not interested in making this look very nice, it's just transitory anyway
[02:39:53] <bstrie> ::std it is
[02:40:00] * dbaupp scolds bstrie
[02:40:06] <bstrie> <-- lazy
[02:40:08] *** Joins: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[02:40:18] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[02:41:50] *** Quits: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[02:42:23] <bstrie> in any case, ugly operations should look ugly
[02:42:28] <bstrie> and using gc is an ugly operation :)
[02:43:21] <SiegeLord> It'd be less surprising not to link std by default
[02:43:32] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[02:43:38] <SiegeLord> But I guess that breaks the prelude... and I like the prelude
[02:44:35] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:44:38] <bstrie> the prelude is important
[02:44:39] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[02:44:55] <SiegeLord> Alternatively, stick an extern mod std; in every module
[02:45:09] <SiegeLord> But perhaps that's distasteful as well
[02:45:21] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[02:45:52] <SiegeLord> Lastly... maybe special case on this error. It certainly would have saved me 10 minutes last time I hit it
[02:46:13] *** Joins: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de)
[02:48:40] *** Joins: sellout (Adium@moz-2ECB0660.hlrn.qwest.net)
[02:50:21] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:52:35] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[02:53:46] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:53:46] *** ChanServ sets mode: +ao brson brson
[02:55:22] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:55:55] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:57:12] *** Quits: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[02:57:30] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[02:58:17] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[03:05:03] *** Joins: cheese_cast (Mibbit@moz-EFF17FB1.hsd1.ca.comcast.net)
[03:05:12] *** Joins: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com)
[03:05:25] *** Joins: pepper_chico (pepper_chi@E4B89D8C.3C9EA51F.F546FA5F.IP)
[03:05:56] *** Joins: mindcat (mindcat@5C808A82.6DB8F66B.431667FD.IP)
[03:07:49] *** Joins: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net)
[03:09:37] *** Quits: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[03:11:46] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[03:13:27] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[03:17:03] *** Parts: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net) ()
[03:18:07] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[03:18:15] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[03:19:12] <kvark> SiegeLord, acrichto: I've synced up, and I'm still getting the same error with rustpkg installing rust-compress (for example): https://gist.github.com/kvark/8263876 
[03:21:13] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[03:22:08] <SiegeLord> That gives me an error, but that's a different package ;)
[03:22:18] <kvark> doh
[03:22:41] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:22:53] <SiegeLord> And the reason for that is that rustpkg is currently confused by crate_id's that don't match its auto-inferred crate id
[03:22:54] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[03:22:58] <kvark> I'm getting the same with rs-splay
[03:23:54] *** Joins: fyolnish (fyolnish@moz-3E70A88D.uqwimax.jp)
[03:25:05] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:25:44] <erickt1> jack: ping
[03:25:57] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[03:27:31] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:30:47] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Connection reset by peer)
[03:30:50] *** Joins: Yitro (Yitro@3C366E25.55F0F791.5A112924.IP)
[03:31:18] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:31:56] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[03:31:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:32:04] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[03:33:21] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:35:09] *** Quits: zz_kimundi (kimundi@moz-A0790602.dip0.t-ipconnect.de) (Ping timeout)
[03:35:18] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:35:45] *** Joins: z0w0 (zack@moz-A79E7E7D.lnse4.cha.bigpond.net.au)
[03:36:12] <kvark> SiegeLord: so what's the verdict on rustpkg?
[03:36:48] <SiegeLord> Like the idea itself or the issues you're facing?
[03:36:59] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:37:14] <kvark> issues
[03:37:35] <jack> erickt1: pong
[03:38:22] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[03:38:23] *** Joins: zz_kimundi (kimundi@moz-64655121.dip0.t-ipconnect.de)
[03:38:47] <erickt1> jack: actually nevermind :)
[03:38:47] *** zz_kimundi is now known as kimundi
[03:39:01] <erickt1> just hacking away at rustpkg to get it to work for me
[03:39:33] <SiegeLord> kvark, I have no explanation of why rs-splay isn't working for you... but rust-compress issues is expected
[03:40:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[03:40:10] <erickt1> jack: i want to play around with a couple more things to form an opinion on how to get rustpkg to work the way I think it should :)
[03:40:47] *** Joins: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP)
[03:40:54] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[03:41:06] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:41:48] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[03:45:19] <kvark> jack: 1) how to handle rust dependencies that are not ported to rustpkg (i.e. rust-freetype)?
[03:45:23] *** Quits: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:45:45] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[03:45:47] <kvark> 2) why this doesn't work as expected: https://gist.github.com/kvark/8263876
[03:46:12] <jack> kvark: that is not a workspace. a workspace needs at least a src dir
[03:46:44] *** Quits: payload (Mibbit@moz-82CEFB27.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[03:46:58] <jack> kvark: you can override the install command with pkg.rs, but it's a bit tedious
[03:47:49] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[03:48:30] <pnathan> Question: How stable is Arc? Is it something to rely on at this point?
[03:48:52] <pnathan> (extra::arc)
[03:50:01] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[03:50:13] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[03:50:13] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Connection reset by peer)
[03:51:29] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[03:51:35] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[03:51:39] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[03:52:09] <jack> pnathan: the api or the functionality? we use Arc in servo and i don't think it's going anywhere
[03:52:39] <pnathan> API
[03:53:01] <pnathan> good to know. Thanks, jack. :)
[03:53:05] <kvark> jack: on 2) ok, tried again with "rustpkg init", which created lib, src, bin, build stuff. Same error. Plz see https://gist.github.com/kvark/8263876
[03:53:10] <jack> that i don't know. i don't remember upgrading it syntax wise since march.
[03:53:16] <jack> so it's been like it is for quite a while.
[03:56:34] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[03:56:37] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:57:42] <kvark> jack: was it your answer to 2?
[03:58:23] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[03:58:51] <jack> kvark: the crate_id of that lib doesn't match it's directory, so it's not going to work.
[03:59:06] <jack> i'm not sure why it's failing even to download it though
[03:59:40] <jack> it should at least clone the repo into the workspace
[04:00:40] <kvark> the crate_id is not in the source of rust-compress or rs-splay, AFAIK, so is this the one I pass (github.com/alexcrichton/rust-compress)?
[04:01:21] <jack> kvark: it works fine for me with master rust from yesterday or so
[04:01:40] <kvark> but... I just synced up and built rust...
[04:01:41] <jack> it builds the library as librust-compress v0.0
[04:01:50] <kvark> you can see it with my rustpkg -v output
[04:02:01] <kvark> 0.9-pre (19cff91 2014-01-04 15:21:46 -0800)
[04:02:11] <jack> mine is from the previous day
[04:02:16] <jack> maybe someone broke it?
[04:02:28] <kvark> nope, I had it from Jan 2nd, and it was the same
[04:02:35] <jack> (08321f1 2014-01-03 12:16:48 -0800)
[04:02:45] <kvark> there is something in my environment perhaps, but what?..
[04:02:58] <jack> do you have RUST_PATH set?
[04:03:03] <kvark> nope
[04:03:05] <jack> i'm pretty sure i don't have RUST_PATH set here
[04:03:39] <jack> i did mkdir ws; cd ws; rustpkg init; rustpkg install github.....
[04:03:45] <jfbk> i have a *u8 that I'm currently cast::transmuting to a struct that implements a trait.  any way to cast it just to the trait?  does that even make sense?
[04:04:00] <SiegeLord> kvark, Do you have a directory in build?
[04:04:01] <jack> i'm on a mac
[04:04:13] <SiegeLord> Oh wait, sorry... it's splay
[04:04:18] <SiegeLord> Nvm
[04:04:36] <kvark> I got .rust/build/x86_64-unknown-linux-gnu/src/github.com/alexcrichton/
[04:04:40] <SiegeLord> Oh it just worked for me
[04:04:55] <kvark> and that confuses me even more... I mean, what is my workspace after all: . or .rust?..
[04:05:59] <SiegeLord> I just went to a temporary directory with no .rust anywhere in the parent directories and a clean RUST_PATH
[04:06:03] <jack> that's odd. it should use the workspace you're in. 
[04:06:13] <SiegeLord> rustpkg install github.com/alexcrichton/rust-compress then worked for me
[04:06:33] <kvark> SiegeLord: did it create anything in .rust? Do you have .rust after that?
[04:06:34] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[04:06:38] <jack> but a .rust in a parent would just put stuff higher up. not lower down in .rust
[04:06:53] <jack> .rust is used when there is no workspace at all and the package you are building is in the directory you are in i thought.
[04:07:06] <SiegeLord> kvark, It created a .rust with bin and build and a rustpkg_db.json
[04:07:07] <jack> oh wait. mine has .rust too
[04:07:15] <kvark> hehe
[04:07:40] <SiegeLord> Let's try with rustpkg init
[04:07:59] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[04:08:06] <SiegeLord> That did the same thing... created a .rust
[04:08:46] <kvark> exactly, I don't want this .rust to be created at all, I just want to create/use the workspace in the current dir
[04:08:53] <jack>  that is a little messed up. what are bin,buld for if it's just going to make it's own .rust.
[04:10:03] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[04:10:14] <SiegeLord> Well, if I do RUST_PATH=. rustpkg install ... it installs into the current workspace
[04:10:30] <SiegeLord> Still creates .rust, but it keeps it empty
[04:12:28] <SiegeLord> It doesn't want to install rs-splay with RUST_PATH set though
[04:12:29] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[04:12:56] <kvark> jack: are you a rustpkg developer? what would you advice me? I can dive into the rustpkg code and start fixing it (abandoning/interrupting what I've been doing), but maybe you still have other ideas?
[04:13:28] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:13:44] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[04:14:23] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[04:14:56] <jack> i would not use rustpkg right now unless you want to help fix it. i'm not a rustpkg developer; just submitted a few patches here and htere.
[04:15:10] <SiegeLord> I'd think the first step would be a re-examination of the design... kind of hard to fix things if there's no idea how it should work
[04:15:23] <jack> SiegeLord: well, that's step one of helping to fix it :)
[04:15:30] <SiegeLord> Yes
[04:15:43] <kvark> who is in charge of rustpkg?
[04:16:04] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[04:16:05] *** ChanServ sets mode: +o tjc
[04:16:20] <benh> 05:16 < kvark> who is in charge of rustpkg?
[04:16:20] <benh> 05:16 -!- tjc [tjc@moz-6EB4E533.dsl.tsoft.com] has joined #rust
[04:16:21] <benh> heh!
[04:16:35] <tjc> I'm not in charge of rustpkg anymore :-)
[04:16:42] <kvark> ah
[04:16:48] <benh> but you're the man with the plan, if anyone is
[04:17:11] *** Joins: magg (magg@E8EDE5D3.47C340B3.EB08AFC4.IP)
[04:17:15] <magg> hello
[04:17:38] <tjc> Well, I might or might not have a plan, but it doesn't really matter to anyone else anymore what it is :-)
[04:18:07] <magg> can do something like this in rust: 'c'*3 returns 'ccc' (in python)
[04:18:38] <benh> Not in as many words
[04:19:06] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[04:19:35] <SiegeLord> rusti: "c".repeat(3)
[04:19:38] -rusti- ~"ccc"
[04:19:39] <kvark> tjc: jack: my main question now is whether I can leave rustpkg in good hands and just return to using it when it's done, or I need to actually participate in order for anything to happen
[04:19:45] <benh> huh
[04:20:10] <kvark> I mean, there is huge number of projects that are using it now, and yet the stuff I'm failing on is so basic and foundamental
[04:20:23] <tjc> kvark: jack would be more likely to know the answer to that; I'm not able to work on it as a volunteer (at least not anytime soon), and when I left it wasn't clear who was going to take over ownership of it
[04:20:34] <SiegeLord> It would be useful for the community for somebody(s) to step up and do it
[04:21:28] <magg> cool
[04:21:36] <magg> thanks SiegeLord
[04:22:02] <tjc> SiegeLord: it's a little more complicated than that; somebody has to step up but also have buy-in from the core team and be willing to have an ongoing give-and-take with the core team
[04:22:08] <tjc> unless it's someone who *is* on the core team, of course :-)
[04:22:23] <SiegeLord> There's nothing to buy into if nobody steps up ;)
[04:22:30] <tjc> true!
[04:22:39] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[04:22:39] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[04:22:48] <SiegeLord> I'd suggest stepping up but be realistic and flexible about one's ideas
[04:22:52] <tjc> But, somebody stepping up won't work out either if they just go off in a corner for a few months and follow their own vision
[04:22:57] <tjc> in that case the code likely won't be integrated
[04:22:58] <tjc> yes, I agree
[04:23:06] <SiegeLord> Not every idea is accepted... that's just how it is
[04:23:46] *** Quits: DanR (DanR@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[04:25:24] *** Quits: jfbk (jfbk@moz-5CDDF4C4.cmdnnj.fios.verizon.net) (Quit: )
[04:26:10] <cheese_cast> Could someone explain what each mut signifies in this:    fn foo(mut x: &mut SomeType) { ..... } ?
[04:27:43] <Luqman> cheese_cast: `&mut SomeType` means you have a mutable reference to something of type `SomeType`. i.e. if SomeType is a struct, you can change it's fields
[04:28:02] <Luqman> `mut x` means you can reassign x to some other mutable reference
[04:28:06] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:28:09] *** Quits: philix (philix@moz-4689D536.user.veloxzone.com.br) (Quit: philix)
[04:28:16] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[04:28:41] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[04:29:02] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[04:29:11] <cheese_cast> thank you very much for the clarification. So it is like const-ptr and ptr-to-const in c++?
[04:29:31] <pnathan> Is there something special you have to do to import Extra libraries? I'm attempting to import from extra and it's not resolving (compile command: rustc rustfile.rs —lib). 
[04:29:50] <tjc> pnathan: Do you have `extern mod extra;` at the top of your file?
[04:31:47] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:33:55] <dbaupp> cheese_cast: yes
[04:34:31] <pnathan> tjc: Ha. That fixed it. I tried it before, but I guess I borked the syntax.
[04:34:34] <pnathan> Thanks.
[04:34:44] <tjc> pnathan: great, glad it worked!
[04:36:03] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:37:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:38:23] <pnathan> (I'm updating ancient code and relearning the new, slightly different Rust)
[04:38:40] <pnathan> How do I make an Enum type fulfill Freeze?
[04:38:42] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:39:23] <dbaupp> pnathan: avoid putting non-Freeze things in it
[04:39:35] <dbaupp> (which is literally the only way)
[04:40:19] <dbaupp> examples of things that are non-Freeze: @mut (very recently removed from the language), &mut, (possibly *mut), RefCell
[04:40:27] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[04:40:40] <pnathan> Um. It's a data structure parameterized over T. I can limit (I hope) T to be of trait Freeze
[04:40:50] <dbaupp> yes
[04:41:08] <pnathan> So if that won't limit it, I am going to have to have a head-scratch.
[04:41:27] <dbaupp> it has to be at the point-of-use `impl<T: Freeze> MyEnum<T> { ... }`
[04:41:37] <dbaupp> `enum MyEnum<T: Freeze>` doesn't work
[04:41:40] <magg> rusti: 1.to_str()
[04:41:43] -rusti- pastebinned 37 lines of output: http://ix.io/9Gu
[04:41:46] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[04:41:52] <magg> oops
[04:42:11] <pnathan> dbaupp: Noticed that before I alt-tabbed back in. =)
[04:42:21] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[04:43:29] <pnathan> Thanks, dbaupp.  (This edition of Rust without @-pointers feels different!)
[04:44:05] <cheese_cast> I need to keep up. @ is being taken out completely in 0.9?
[04:44:37] <Luqman> i don't think @ removal will make 0.9
[04:44:53] <Luqman> but @mut is already gone
[04:44:58] <cheese_cast> what about 1.0?
[04:45:28] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: movie)
[04:46:05] <dbaupp> pnathan: better-different?
[04:46:28] <dbaupp> cheese_cast: we will almost certainly have a semi-decent replacement by 1.0
[04:46:40] <dbaupp> cheese_cast: we will not be getting @ back with a sigil though
[04:46:45] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[04:47:08] <dbaupp> std::rc::Rc and std::gc::Gc (although the latter possibly won't be in `std`...)
[04:47:46] <pnathan> dbaupp: Not sure yet. Definitely more verbose. 
[04:47:53] <dbaupp> pnathan: yup
[04:48:09] <dbaupp> pnathan: in theory the .borrow() verbosity will be resolve by pointer traits
[04:48:26] <dbaupp> so that Rc<> and Gc<> etc can act exactly like ~T
[04:48:27] <cheese_cast> is the idea to make garbage collected solutions less convenient to reach for, to encourage use of ~?
[04:48:29] <dbaupp> and &T
[04:48:41] <dbaupp> partly
[04:48:53] <dbaupp> but mainly having less things in the language itself
[04:48:56] <dbaupp> and more in the libraries
[04:49:04] <dbaupp> (since they are far more flexible)
[04:49:17] <magg> rusti: 1 as str
[04:49:19] -rusti- pastebinned 10 lines of output: http://ix.io/9Gv
[04:49:31] <cheese_cast> I'm all for having a small-as-possible core lang
[04:49:54] <dbaupp> rusti: let x: uint = 1; (x.to_str(), 1u.to_str())
[04:49:56] -rusti- (~"1", ~"1")
[04:50:05] <dbaupp> rusti: format!("{}", 1)
[04:50:06] -rusti- ~"1"
[04:50:09] <dbaupp> rusti: println!("{}", 1)
[04:50:10] -rusti- 1
[04:50:10] -rusti- ()
[04:50:19] <magg> thx
[04:52:36] *** Quits: pepper_chico (pepper_chi@E4B89D8C.3C9EA51F.F546FA5F.IP) (Quit: Ex-Chat)
[04:53:26] <pnathan> Does rustc —test do something different with respect to imports?
[04:54:41] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[04:54:43] <dbaupp> maybe? why?
[04:55:10] *** Quits: espadrine (Thunderbir@moz-3CE5C493.w92-128.abo.wanadoo.fr) (Ping timeout)
[04:55:41] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[04:55:42] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[04:55:50] <pnathan> Getting some confusing errors. But the confusion is in me. I may not understand what to ask. :-) More examination is required, more than likely.
[04:56:53] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[04:57:54] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:58:24] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[04:58:51] *** Quits: mindcat (mindcat@5C808A82.6DB8F66B.431667FD.IP) (Quit: leaving)
[04:59:56] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[05:01:27] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[05:01:28] *** Quits: sellout (Adium@moz-2ECB0660.hlrn.qwest.net) (Quit: Leaving.)
[05:02:05] <pnathan> dbaupp: Getting this error. http://pastebin.com/e06zKVY9
[05:02:33] <dbaupp> looks weird
[05:02:40] * dbaupp tries locally
[05:03:05] <dbaupp> huh
[05:03:07] <dbaupp> I get it too
[05:03:10] <dbaupp> oh!
[05:03:16] <dbaupp> Rc::new, not Rc.new
[05:03:28] <pcwalton> Rc::new
[05:03:31] <pcwalton> beaten
[05:03:45] <pnathan> Huh. But the error messages clearly pointed to rc::Rc as the problem.
[05:03:51] <pnathan> It had a ^~~~ and everything
[05:03:56] <pnathan> ;)
[05:03:57] <dbaupp> yeah, it was looking for a Rc *value* in rc
[05:04:09] <dbaupp> to call the hypothetical `new` method on it
[05:04:44] <pnathan> Makes sense.
[05:05:42] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[05:06:26] <pnathan> btw, pcwalton  - I <3 that unit tests are a default language capability.
[05:06:43] <pcwalton> I didn't have much to do with that :)
[05:06:52] <achin> is there a way to disable a #[test] without commenting out the whole thing?
[05:06:58] <magg> mmm how to  convert an ascii value to string representation
[05:07:00] <pcwalton> achin: #[ignore]
[05:07:15] <achin> many thanks
[05:07:32] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[05:07:46] <dbaupp> magg: as in you haev the ascii value of a single character and wish to get a string? (or do you wish to print it?)
[05:08:05] <magg> dbaupp: get a string
[05:08:13] <dbaupp> rusti: println!("{}", 97 as char)
[05:08:15] -rusti- pastebinned 11 lines of output: http://ix.io/9Gw
[05:08:20] <dbaupp> oh
[05:08:28] <dbaupp> rusti: std::str::from_char(97u8 as char)
[05:08:29] -rusti- ~"a"
[05:08:53] <magg> aah
[05:09:38] <dbaupp> `as char` only works on u8's (because they are the only numeric type for which every value corresponds to a valid unicode codepoint)
[05:09:48] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[05:10:03] <magg> thanks a lot. i'll try it out
[05:10:07] <dbaupp> if you have a general number there's `std::char::from_u32` (u32 -> Option<char>)
[05:10:40] *** Joins: sellout (Adium@moz-2ECB0660.hlrn.qwest.net)
[05:13:14] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[05:13:32] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[05:15:03] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[05:15:41] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:17:55] *** Joins: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP)
[05:18:05] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:18:13] *** Quits: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca) (Quit: canhtak)
[05:20:08] *** Joins: bkircher (bkircher@moz-7E192BFF.dip0.t-ipconnect.de)
[05:21:08] *** Quits: bkircher (bkircher@moz-7E192BFF.dip0.t-ipconnect.de) (Quit: Leaving...)
[05:21:29] *** Quits: sellout (Adium@moz-2ECB0660.hlrn.qwest.net) (Quit: Leaving.)
[05:21:32] *** Joins: sanxiyn (tinuviel@EEB7B45F.7A76C8B.4BEB41DB.IP)
[05:23:22] *** Quits: lahwran (lahwran@lahwran.net) (Ping timeout)
[05:24:07] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[05:24:28] *** Joins: lahwran (lahwran@lahwran.net)
[05:25:41] *** Quits: cheese_cast (Mibbit@moz-EFF17FB1.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:26:23] *** Quits: SiegeLord (sl@moz-3B527BD6.bstnma.fios.verizon.net) (Quit: Leaving)
[05:26:28] *** Joins: sellout (Adium@moz-2ECB0660.hlrn.qwest.net)
[05:27:17] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[05:27:42] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:27:46] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[05:30:15] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[05:30:24] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[05:30:44] *** Quits: eco (eco@moz-87840B9D.net) (Ping timeout)
[05:31:16] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Ping timeout)
[05:31:23] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[05:31:37] *** Quits: jason_ (jason@moz-EC85D533.members.linode.com) (Ping timeout)
[05:31:48] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (Ping timeout)
[05:32:05] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[05:32:09] *** Quits: mythmon (mythmon@moz-AD308AD7.members.linode.com) (Ping timeout)
[05:32:28] *** Quits: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com) (Ping timeout)
[05:33:48] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[05:33:53] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[05:34:19] *** Joins: eco (eco@moz-87840B9D.net)
[05:34:21] *** Quits: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP) (Input/output error)
[05:34:22] *** Joins: jason_ (jason@moz-EC85D533.members.linode.com)
[05:34:30] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[05:34:48] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[05:35:09] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[05:36:00] *** Joins: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com)
[05:36:00] *** Joins: mythmon (mythmon@moz-AD308AD7.members.linode.com)
[05:36:03] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:36:15] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[05:36:47] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:37:07] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[05:38:31] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:42:03] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[05:45:11] <pnathan> For recursive data structures (trees, graphs, etc), are enums or structs typically preferred? I liked using Enums (some time ago), but I'm wondering if structs do a better overall job & wind up with simpler types.
[05:46:52] <eevee> well they do different things; sometimes you even need both
[05:47:54] <pnathan> Sure. But I'm trying to get more a handwavy sense of suitability.
[05:47:55] <pnathan> :)
[05:50:10] *** Parts: apoelstra (username@moz-B7040E82.vs.shawcable.net) (WeeChat 0.4.2)
[05:50:14] *** Quits: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com) (Quit: Leaving)
[05:50:56] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:52:15] *** Quits: sanxiyn (tinuviel@EEB7B45F.7A76C8B.4BEB41DB.IP) (Quit: Bye)
[05:53:31] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[05:54:47] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[05:56:10] <Skrylar_> pnathan: structs are for storing a bunch of named data, enums are for storing smaller sets of vaguely related data
[05:56:21] <Skrylar_> they're basically a C union {} 
[05:56:36] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[05:56:56] <Skrylar_> pnathan: in my SDL wrapper I have structures to store the information about a specific event, and the enum stores the event type, so you can match blah { ThisEvent(info) => info.things(); }
[05:56:59] <pnathan> Sure, enums are tagged unions, roughly. :)
[05:57:13] <Skrylar_> yeah, just saw you weren't answered earlier
[05:57:36] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:57:48] *** Joins: mib_6meo0g (Mibbit@moz-BB047FF.hsd1.wa.comcast.net)
[05:57:52] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[05:58:16] <dbaupp> s/roughly/precisely/ (with nicer language support)
[05:58:35] <dbaupp> (including the ability to optimise the layout)
[05:59:06] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:01:26] *** Parts: mib_6meo0g (Mibbit@moz-BB047FF.hsd1.wa.comcast.net) ()
[06:01:58] <Skrylar_> i'm not sure how weird or correct of an API it is, but I saw that there was a .push for vectors and so i made a trait for a binary encoder
[06:02:04] <Skrylar_> .push_blah_thistype()
[06:02:19] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[06:03:03] *** Joins: Soler (Mibbit@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net)
[06:03:27] *** Joins: atnt (Mibbit@moz-BB047FF.hsd1.wa.comcast.net)
[06:04:32] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:04:45] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[06:09:20] *** Joins: bbodi (Mibbit@moz-3A29EF46.pool.digikabel.hu)
[06:09:34] <atnt> hi, can someone help with my sample code?
[06:09:48] <atnt> struct Obj { nums: ~[uint] }                                                                                                                                        impl Obj                                                                          {                                                                                     fn new() -> Obj { return Obj{
[06:10:26] <atnt> sorry
[06:10:39] <atnt> I have this struct: struct Obj { nums: ~[uint] } 
[06:10:53] <magg> how can i validate a null/nil char or string?
[06:11:24] <magg> str == "" doest work
[06:11:26] *** Joins: pda (pda@134B5A09.C82F6435.20F09BA6.IP)
[06:11:31] *** Quits: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au) (Quit: kvanb)
[06:11:40] <atnt> and I'm implementing 2 methods for Obj, one of them is printing the vector, another one is modifying its contents
[06:11:42] <sfackler> either str.is_empty() or "" == str
[06:12:04] <bbodi> Hi all! I need some help. I need to store two pointers to the same object, and the two pointers need to be able to modify the object. They can be on the same thread. I couldn't use Rc or Gc because they hold immutable object. Thanks!
[06:12:12] <magg> sfackler thanks
[06:12:32] <atnt> fn update(&mut self) { self.nums[0] = 0; }
[06:12:45] <atnt> this one has to take mutable self
[06:13:03] <atnt> for the read-only method, &self should be enough
[06:13:07] <pnathan> atnt: try pastebin.com to put your example down for our reference
[06:13:09] <sfackler> bbodi: Rc<RefCell<T>>
[06:13:19] <atnt> ok, just a sec
[06:13:38] <bbodi> sfackler, thanks a lot, I try it!
[06:14:00] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[06:15:30] <atnt> http://pastebin.com/3unRv13H
[06:15:44] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[06:16:42] <atnt> am I just missing &mut self for start() method?
[06:16:54] <Soler> I am getting two errors when trying to run make && make install on my macbook pro
[06:17:12] <bbodi> sfackler: If I want to store my objects as pointers in order to use their addresses and not ther values on parameter passing, should RefCell store a ~T?
[06:18:22] <Soler> error: aborting due to previous error task 'rustc' failed at 'explicit failure', /Users/rustbuild/src/rust-buildbot/slave/snap3-mac/build/src/libsyntax/diagnostic.rs:102 task '<main>' failed at 'explicit failure', /Users/rustbuild/src/rust-buildbot/slave/snap3-mac/build/src/librustc/lib.rs:441 make: *** [x86_64-apple-darwin/stage0/lib/rustc/x86_64-apple-darwi
[06:18:26] <Soler> any ideas?
[06:18:39] <Soler> make: *** [x86_64-apple-darwin/stage0/lib/rustc/x86_64-apple-darwin/lib/librustc.dylib] Error 101
[06:18:52] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:19:37] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[06:20:00] *** Joins: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP)
[06:20:14] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[06:20:36] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[06:21:39] <achin> is it conventional for a function to declare what things it will #use, or should that go at the top of the file (a la python)?
[06:22:35] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:23:30] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[06:27:25] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[06:28:07] *** Quits: pda (pda@134B5A09.C82F6435.20F09BA6.IP) (Quit: WeeChat 0.4.1)
[06:28:26] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[06:30:05] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:32:19] *** Joins: alexmills (Mibbit@moz-8443D38E.static.wa.bigpond.net.au)
[06:33:59] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[06:34:07] *** Joins: pda (pda@134B5A09.C82F6435.20F09BA6.IP)
[06:37:32] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:39:25] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:39:45] *** Joins: cheese_cast (Mibbit@moz-EFF17FB1.hsd1.ca.comcast.net)
[06:40:07] <cheese_cast> I've been working on getting a little BST working tonight, and I have a working(I think!) method, but I'm using an unsafe block due to my misunderstanding of some language parts. If someone could give me some insight on how to avoid this block in insert() I'd appreciate it http://mibpaste.com/93ne0m 
[06:41:19] *** Joins: WebeWizard (Mibbit@moz-7CCD1DAE.ks.ks.cox.net)
[06:41:21] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[06:41:26] <WebeWizard> Evening folks.
[06:43:05] <magg> how to use escape_default
[06:44:16] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:46:40] *** Quits: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP) (Client exited)
[06:47:49] <bbodi> I try to store an RefCell in a Rc, but got this error: instantiating a type parameter with an incompatible type `std::cell::RefCell<view::View>`, which does not fulfill `Freeze`. How can i fulfill Freeze with my struct?
[06:49:25] *** Joins: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP)
[06:51:00] *** Quits: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP) (Client exited)
[06:52:08] *** Joins: borg (raspinudo@moz-EFF17FB1.hsd1.ca.comcast.net)
[06:53:45] *** Quits: cheese_cast (Mibbit@moz-EFF17FB1.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:55:00] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[06:55:01] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[06:55:10] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[06:56:57] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[06:57:28] <pnathan> in your function signature, require Freeze for the function
[06:57:46] <pnathan> fn foo<T: Freeze> (…) { … {
[06:57:53] *** Quits: Yitro (Yitro@3C366E25.55F0F791.5A112924.IP) (Quit: Leaving)
[06:58:15] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:58:17] *** Quits: borg (raspinudo@moz-EFF17FB1.hsd1.ca.comcast.net) (Quit: leaving)
[06:58:29] *** Joins: cheese_cast (raspinudo@moz-EFF17FB1.hsd1.ca.comcast.net)
[07:01:58] *** Joins: sedman (sedman@76701746.26E72807.D970BCC9.IP)
[07:02:46] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[07:03:25] <pnathan> dbaupp: After wandering around for the evening in the post-@ world, I can confidently say that I miss @, badly. 
[07:03:28] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (Client exited)
[07:03:31] <Soler> I am trying to run the Makefile and I am getting a .rust directory not found warning. Anyone have any ideas on this?
[07:03:42] <dbaupp> pnathan: s/miss @/miss the sugar that comes with @/, right?
[07:03:44] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[07:04:14] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Client exited)
[07:04:23] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[07:04:39] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (Connection reset by peer)
[07:05:25] <pnathan> Yes and no. Verbosity isn't really a problem (per se; concision simplifies). I miss the straightforward use of @ as a garbage-collected value. It's arguable that having to write it out increases grasp on the problem, but on the other hand, it's a bit of a pain.
[07:05:50] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:06:11] *** Quits: bbodi (Mibbit@moz-3A29EF46.pool.digikabel.hu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:07:00] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[07:07:13] <pnathan> And I'm not seeing how I'm winning from having to wrap everything I'm doing in a rc/gc/arc container helps me out compared to @. Yes, it allows pluggable things, but ugh, I just want to fool with immutable data structures tonight, and I rarely write giant systems that really start demanding the pluggability and so forth.
[07:07:59] <pnathan> Loosely, it feels like the ceremony of what I'm doing has gone up a notch towards a high ceremony language vs a low ceremony one.
[07:08:19] <pnathan> So maybe that simplifies into "miss the sugar", but I don't think so.
[07:08:50] <pnathan> Or maybe it's Saturday and I wanted to update my code without spending hours on it. ;-)
[07:09:15] <magg> i can't use to to_hex(), can you provide an example?
[07:09:32] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:09:56] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[07:10:09] *** Joins: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au)
[07:10:42] <whitequark> as I understand it, @ was removed in much part due to the fact that it wasn't a good fit for a lot of problems
[07:11:14] <whitequark> for example, if you have a tree where each node keeps a reference to the root (hypothetically), you don't want Gc<>, you want Rc<> or even RcWeak<>
[07:11:42] <pnathan> That is not a good example, Gc is def what I want. 
[07:11:53] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (Quit: WeeChat 0.4.2)
[07:11:59] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[07:12:10] <pnathan> But I grant you that different resource collection strategies are useful.
[07:12:14] <whitequark> but Gc is quite suboptimal there. you don't have arbitrary cycles, you have very specific and well-defined cycles
[07:12:38] <whitequark> Gc comes with a lot of baggage
[07:13:16] <whitequark> by having @ in the core and treating it specially, the language would nudge you to a wrong solution
[07:13:33] <whitequark> I didn't initially like @ removal at all, but I came to understand that it solves more problems than creates
[07:14:06] *** Quits: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au) (Quit: kvanb)
[07:14:45] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[07:15:10] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[07:15:38] *** Joins: derek_c (derek@787705F2.204CE243.DD630FEE.IP)
[07:16:12] <derek_c> can someone tell me what's wrong with this code? http://upl.io/r5xtlr
[07:16:22] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[07:16:29] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[07:16:38] <derek_c> error says `24:30: 24:43 error: wrong number of lifetime parameters: expected 1 but found 0`
[07:17:12] <pnathan> whitequark: what I'm feeling pothered about is that this feels more tedious and difficult than it used to. Not saying it isn't more generally correct or useful.
[07:17:58] <whitequark> pnathan: I agree. I think it is not yet decided whether @ will make a comeback as sugar.
[07:20:08] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[07:22:02] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Quit: Lost terminal)
[07:22:47] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:23:05] <WebeWizard> what's the easiest way to reference a value of a parent thread from its child?
[07:24:17] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[07:24:44] *** Quits: atnt (Mibbit@moz-BB047FF.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:26:15] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[07:28:07] *** Quits: FreeFull (freefull@moz-D0529B9A.as13285.net) (Ping timeout)
[07:29:03] *** Joins: FreeFull (freefull@moz-E277CCC6.as13285.net)
[07:30:12] *** Quits: magg (magg@E8EDE5D3.47C340B3.EB08AFC4.IP) (Quit: magg)
[07:31:58] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[07:33:12] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[07:33:15] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[07:35:12] *** Joins: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[07:35:32] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[07:37:25] *** Quits: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[07:38:25] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:40:09] <dbaupp> WebeWizard: extra::arc::Arc
[07:40:09] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:40:40] <dbaupp> derek_c: json::Encoder takes a lifetime parameter
[07:40:44] <dbaupp> i.e. json::Encoder<'a>
[07:40:56] <derek_c> dbaupp: I figured that one out. thanks ;0
[07:41:11] *** Quits: rwt (rwt@267874A3.DB91A3F2.51B6877.IP) (Quit: Leaving)
[07:42:37] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[07:42:58] <Skrylar_> i saw there was a request for a SIMD library
[07:43:12] <Skrylar_> i looked briefly in to the SIMD commands but it looks like a small nightmare city
[07:43:25] *** Quits: sedman (sedman@76701746.26E72807.D970BCC9.IP) (Ping timeout)
[07:46:21] *** Quits: FreeFull (freefull@moz-E277CCC6.as13285.net) (Ping timeout)
[07:48:43] *** Joins: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au)
[07:48:49] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[07:50:59] *** Joins: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz)
[07:51:36] <csherratt> I wonder if things like opencl are a better approach to simd.
[07:52:10] <Skrylar_> i donno. kind of funny that Commodore already did the whole "lets have a dedicated math chip" stuff
[07:52:24] <Skrylar_> and then it took like 20+ years for IBM/PC to... poorly re-engineer the same architecture
[07:53:38] <Skrylar_> an amiga's CPU did basically nothing but tell the graphics card to batch draw, sound card to pump bits and the math chip to calculate
[07:54:04] *** Quits: cheese_cast (raspinudo@moz-EFF17FB1.hsd1.ca.comcast.net) (Ping timeout)
[07:55:38] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[07:55:47] <pongad> A possibly dumb question: How do I add  method to MutableVector<'a, T>? xD
[07:58:02] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[07:59:04] *** Joins: FreeFull (freefull@moz-7865972B.as13285.net)
[08:01:33] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[08:01:40] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[08:01:52] <csherratt> pongad: do you mean extending the trait?
[08:02:33] <pongad> csherratt: Yeah
[08:03:21] *** Quits: alonlevy (alon@moz-30492E92.bb.netvision.net.il) (Quit: Leaving)
[08:03:23] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[08:04:36] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[08:05:59] <csherratt> if you look on container.rs you can see some examples of extending traits. https://github.com/mozilla/rust/blob/master/src/libstd/condition.rs
[08:06:20] <csherratt> that is not the right link
[08:06:31] <csherratt> https://github.com/mozilla/rust/blob/master/src/libstd/container.rs
[08:06:48] <pongad> Aren't the two the same link? xD
[08:06:58] <pongad> Oh whoops, nevermind
[08:07:02] *** Quits: Soler (Mibbit@moz-93EA8A7.lightspeed.mssnks.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:13:15] *** Quits: FreeFull (freefull@moz-7865972B.as13285.net) (Ping timeout)
[08:13:59] <pongad> csherratt: That worked, thanks!
[08:14:05] *** Joins: gkostyanikov (gkostyanik@99958EFC.3E410295.CA6E2165.IP)
[08:15:30] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[08:16:51] <pongad> Why is    let mut (a, b) = (0, 2);    a syntax error? I'm confused xD
[08:17:17] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[08:17:21] <eddyb> pongad: because (a, b) is a destructuring pattern. what would be mutable?
[08:17:45] <eddyb> pongad: let (mut a, mut b) = (0, 2); makes both a and b mutable
[08:18:02] <pongad> eddyb: Of course, thanks. I'm an idiot :D
[08:18:59] *** Quits: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz) (Ping timeout)
[08:21:08] <dbaupp> eddyb: (i did update irfy, and feel free to keep pestering me :P )
[08:23:43] <eddyb> dbaupp: I guess cmr didn't redo all of them or something. I don't really know right now
[08:24:18] *** Quits: logicalparadox (logicalpar@7E906627.EDE60785.5A75A172.IP) (Client exited)
[08:25:07] <dbaupp> eddyb: he only did the 70 or so after LTO landed
[08:25:28] *** Joins: Ms2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP)
[08:25:37] *** Quits: alexmills (Mibbit@moz-8443D38E.static.wa.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[08:25:44] <dbaupp> maybe I didn't clear it correctly
[08:25:46] * dbaupp checks
[08:27:11] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[08:30:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:35:24] <WebeWizard> how do i give a lambda expression a lifetime specifier?
[08:35:37] <Ms2ger> <'a>|| {}, maybe
[08:36:27] <WebeWizard> no dice
[08:36:54] <WebeWizard> for context, i'm trying to store a lambda function in a struct
[08:36:55] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Computer has gone to sleep.)
[08:37:40] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[08:39:03] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:39:12] <benh> I don't think expressions get lifetime specifiers, only types.
[08:40:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:40:58] *** Joins: ctangent (ctangent@moz-D461B92C.dynamic.ip.windstream.net)
[08:43:16] *** ctangent is now known as swgillespie
[08:43:34] *** Parts: swgillespie (ctangent@moz-D461B92C.dynamic.ip.windstream.net) (Textual IRC Client: www.textualapp.com)
[08:43:41] *** Quits: nrc (ncameron@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:43:59] *** Joins: cloudpirate (Mibbit@moz-51D22A60.dsl.teksavvy.com)
[08:44:25] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[08:44:43] <dbaupp> WebeWizard: `'a ||` is required to store it in a struct
[08:44:55] <dbaupp> <'a> || should be allowed, but it's not
[08:44:58] <dbaupp> bugs \o/
[08:45:08] *** Joins: swgillespie (ctangent@moz-D461B92C.dynamic.ip.windstream.net)
[08:45:59] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[08:46:02] <WebeWizard> dbaupp: says "error: use of undeclared lifetime name 'a"
[08:46:03] <Ms2ger> Bugs? Unpossible!
[08:46:10] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[08:46:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:47:26] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[08:47:34] <benh> rusti: struct S<'a> { f: 'a || } let s = S { f: ||() }; (s.f)(); 
[08:47:41] -rusti- pastebinned 6 lines of output: http://ix.io/9GA
[08:47:49] *** Joins: mindcat (mindcat@5C808A82.6DB8F66B.431667FD.IP)
[08:48:07] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[08:48:44] <benh> eh. guess i'm behind.
[08:49:01] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Computer has gone to sleep.)
[08:49:48] <dbaupp> WebeWizard: https://github.com/mozilla/rust/issues/11211
[08:50:05] <dbaupp> ( https://github.com/mozilla/rust/issues/11210 and https://github.com/mozilla/rust/issues/11209 are relevant too)
[08:50:27] <WebeWizard> thank you so much
[08:50:32] <eddyb> benh: you mean rusti is :P
[08:50:40] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[08:51:01] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[08:52:12] <dbaupp> eddyb: any news on default type parameters?
[08:52:25] <eddyb> dbaupp: waiting on the meeting
[08:53:04] <dbaupp> ah ok
[08:53:16] <dbaupp> this monday, right?
[08:53:25] *** Quits: fyolnish (fyolnish@moz-3E70A88D.uqwimax.jp) (Client exited)
[08:53:41] <eddyb> pffft... there's no stage0 rustpkg but stage1 rustpkg requires the libsyntax/librustc built for stage2-rustc :(
[08:53:48] <eddyb> dbaupp: maybe, I don't know
[08:55:25] *** Joins: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP)
[08:56:16] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[08:57:12] <eddyb> "assinging node ids and indexing ast" is the largest pass name yet, it seems
[08:58:18] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Ping timeout)
[08:59:23] *** Quits: cloudpirate (Mibbit@moz-51D22A60.dsl.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[08:59:25] *** Joins: FreeFull (freefull@moz-9B9341F7.as13285.net)
[08:59:32] *** Joins: jackneill (jackneill@moz-E50979D7.pool.digikabel.hu)
[09:00:33] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[09:01:19] <pongad> What does the compiler mean a method has incompatible types?
[09:02:20] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[09:03:33] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[09:08:21] <eddyb> pongad: it has a different signature than the method in the trait
[09:08:42] *** Quits: swgillespie (ctangent@moz-D461B92C.dynamic.ip.windstream.net) (Ping timeout)
[09:08:45] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[09:08:46] <pongad> eddyb: Oh, I see
[09:09:33] <Skrylar_> woo, i have a shiny msgpack lib 1/3rd done
[09:09:41] <pongad> eddyb: Error doesn't point you to where the trait is though? Or is it just not implemented yet?
[09:10:37] <eddyb> pongad: is it that hard to find the trait?
[09:13:41] <pongad> eddyb: Oh no, once you said it I found it right away. It just seems to me like something the compiler should do eventually
[09:14:11] <eddyb> pongad: it tells you the type difference but it doesn't point at what's different
[09:14:19] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[09:14:30] <pongad> eddyb: Right
[09:14:35] *** Joins: oberstet (quassel@moz-B7267634.dynamic.mnet-online.de)
[09:15:10] <pongad> eddyb: Primarily, I just did not know the error meant xD
[09:18:09] <Ms2ger> (Congratulations, Aussies)
[09:18:30] *** Joins: mgax_ (mgax@moz-B9399889.grep.ro)
[09:18:52] *** Joins: rca (rcatolino@moz-6B6EA2D.adsl.proxad.net)
[09:19:02] *** Quits: mgax_ (mgax@moz-B9399889.grep.ro) (Quit: WeeChat 0.3.8)
[09:19:23] *** Joins: mgax (mgax@moz-B9399889.grep.ro)
[09:20:49] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[09:25:51] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[09:31:14] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:33:14] <pongad> Is it possible to zero-fill a vector? In case you need to temporarily store something?
[09:36:35] *** Joins: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de)
[09:39:45] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:41:38] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[09:43:35] *** Quits: WebeWizard (Mibbit@moz-7CCD1DAE.ks.ks.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:44:12] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[09:45:06] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[09:45:11] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[09:45:28] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[09:46:06] <eddyb> pongad: does vec::from_elem do what you need?
[09:48:19] * Skrylar_ facepalms... why are there a handful of msgpack implementations in rust, but each one implements Encoder, and leaves half of the plugs as failures
[09:48:46] *** Joins: rca_ (rcatolino@moz-F053E700.adsl.proxad.net)
[09:49:25] *** Quits: rca (rcatolino@moz-6B6EA2D.adsl.proxad.net) (Ping timeout)
[09:49:30] *** Joins: ienh (user@moz-F3A1CBB9.lsanca.dsl-w.verizon.net)
[09:52:33] *** Quits: derek_c (derek@787705F2.204CE243.DD630FEE.IP) (Ping timeout)
[09:52:49] <pongad> eddyb: Kind of. I'm trying to implement stable partition. The linear time way of doing it is to put a part of the vector in a temporary vector. But I don't know what to initialize the temporary vector with, because I don't know what T is
[09:53:21] <pongad> eddyb: Does that make any sense? I'm kind of not awake right now xD
[09:53:43] <eddyb> oooh, you need an uninitialized marker
[09:54:07] <eddyb> pongad: do you have a vector of pointers? because there's an efficient way of doing it
[09:54:45] <eddyb> ~[~T] => ~[Option<~T>] doesn't consume any extra space
[09:55:36] <pongad> One second, let me think about this. Rust newbie xD
[09:55:59] <eddyb> otherwise, there is a type of vector with optionally initialized items (a pair of a ~[T] and a bitset, basically). maybe extra::optvec?
[09:57:00] <Skrylar_> welp. knowing that io::Writer existed would have saved me quite a bit of time writing byte encoding by hand earlier. :<
[09:58:01] <pongad> eddyb: I'm thinking whether a n*log(n) in place version is a better idea xD
[09:58:30] *** Quits: z0w0 (zack@moz-A79E7E7D.lnse4.cha.bigpond.net.au) (Ping timeout)
[09:58:30] *** Quits: FreeFull (freefull@moz-9B9341F7.as13285.net) (Connection reset by peer)
[09:59:06] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[09:59:31] *** Quits: Addle (quassel@93529591.BA907378.971E19F6.IP) (Ping timeout)
[10:00:17] *** Joins: FreeFull (freefull@moz-DFC42C84.as13285.net)
[10:00:57] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[10:02:29] *** Quits: FreeFull (freefull@moz-DFC42C84.as13285.net) (Ping timeout)
[10:02:41] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[10:03:20] *** Joins: mleise (marco@moz-48140B99.pools.arcor-ip.net)
[10:03:42] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[10:04:48] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[10:05:49] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[10:08:19] *** Quits: rca_ (rcatolino@moz-F053E700.adsl.proxad.net) (Ping timeout)
[10:09:23] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[10:09:48] *** Joins: z0w0 (zack@moz-A79E7E7D.lnse4.cha.bigpond.net.au)
[10:11:12] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[10:11:16] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:11:22] *** Joins: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za)
[10:24:59] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[10:25:25] *** Joins: thpickert (thpickert@moz-CAEDC3FB.dynamic.dsl.tng.de)
[10:26:17] *** Quits: thpickert (thpickert@moz-CAEDC3FB.dynamic.dsl.tng.de) (Quit: thpickert)
[10:28:20] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[10:29:32] *** Joins: ad (Mibbit@moz-E1FF077C.rev.numericable.fr)
[10:30:07] *** Quits: ad (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[10:30:18] *** Joins: FreeFull (freefull@moz-9794470C.as13285.net)
[10:35:07] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[10:35:24] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[10:35:59] <mleise> Interesting, Rust supports sparse array initializers
[10:36:44] <mleise> rusti: ~[200, ..10, 100, ..20]
[10:36:49] -rusti- pastebinned 6 lines of output: http://ix.io/9GK
[10:36:55] <dbaupp> really?
[10:37:24] <mleise> rusti: ~[0, .. 10]
[10:37:25] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[10:37:33] <mleise> well, half-way, lol
[10:38:13] *** Joins: nkoep (nik@moz-6E359780.pool.mediaways.net)
[10:39:31] <dbaupp> pongad: fwiw, the most efficient way to do that will be using unsafe code to use a vector as backing storage
[10:39:33] <mleise> But that's good enough I guess. We've been discussing this now and then without any strong opinion on the dlang news group and currently the only option (I think) "int[10] arr = [1];" just doesn't initialize the other elements at all.
[10:39:44] *** Quits: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: klaus)
[10:40:07] <dbaupp> pongad: similar to what vec.sort_by does (see the top of the std::vec::merge_sort function)
[10:40:33] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[10:40:46] <dbaupp> mleise: well, Rust doesn't allow uninitialised values (in safe code) so that is more flexible, but not an option for Rust.
[10:42:14] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[10:42:42] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[10:43:39] <mleise> what I said doesn't work in d either, sorry for the false claim. i'll check that again.
[10:46:56] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:47:10] <Skrylar_> dbaupp: that horrible moment when you notice something you worked on all evening has to be half-rewritten :(
[10:48:01] <dbaupp> Skrylar_: oh? :(
[10:48:04] <dbaupp> why?
[10:49:16] <Skrylar_> i wrote a binary encoder for msgpack that outputs to ~[u8]s, and then found that io::Writer does most of the backend
[10:49:33] <Skrylar_> the good news is only about 1/3rd has to be rewritten, because i stacked it up properly 
[10:50:10] <Skrylar_> something that baffles me is the existing msgpack coders don't support enum/structs or options, even though msgpack very much supports storing NULLs and the like
[10:50:27] <Skrylar_> there is even an 'extension' field that can be used to explicitly store None, if you don't want to use null
[10:53:37] *** Quits: gkostyanikov (gkostyanik@99958EFC.3E410295.CA6E2165.IP) (Ping timeout)
[10:55:12] <eddyb> Skrylar_: pullreq them?
[10:55:20] <eddyb> s/them/the best one you can find/
[10:55:22] <dbaupp> I guess no-one's needed that support yet?
[10:55:43] <Skrylar_> eddyb: meh, i already wrote most of one now
[10:56:00] <eddyb> rapid prototyping <3
[10:56:45] <Skrylar_> i just took the spec sheet from msgpack-c, pasted it in to sublime and spent 8 hours hacking it apart until it was this nice 3-tier encoder with traits on top of byte vectors
[10:57:00] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[11:00:00] <dbaupp> Skrylar_: oh, so it's the full spec?
[11:00:21] <kvanb> rusti: ~[0..4]
[11:00:23] -rusti- pastebinned 6 lines of output: http://ix.io/9GL
[11:00:54] <dbaupp> rusti: ~[0, .. 4]
[11:00:55] -rusti- ~[0, 0, 0, 0]
[11:01:05] <kvanb> I was looking for a range like in Haskell
[11:01:37] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[11:01:43] <Ms2ger> range(0, 4)?
[11:02:07] *** Joins: moostik (Icedove@moz-F5DBFF76.w83-202.abo.wanadoo.fr)
[11:02:10] <dbaupp> rusti: std::iter::range_inclusive(0, 4).to_owned_vec()
[11:02:11] -rusti- ~[0, 1, 2, 3, 4]
[11:03:20] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[11:04:14] <Skrylar_> dbaupp: yeah, it does all of the things msgpack supports
[11:04:40] *** Quits: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za) (Ping timeout)
[11:04:43] <Skrylar_> right now i'm just (slowly, ran out of steam) finishing the top level part that you give the types and it auto-picks the smallest storage
[11:06:20] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[11:07:00] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[11:08:21] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[11:12:02] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[11:14:19] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[11:18:30] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[11:21:00] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[11:22:45] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:26:05] *** Joins: derek_c (derek@9CFF4C3F.E9B0596F.C34016C.IP)
[11:28:32] *** Quits: FreeFull (freefull@moz-9794470C.as13285.net) (Quit: Regaining my lost channels)
[11:28:46] *** Joins: FreeFull (freefull@moz-9794470C.as13285.net)
[11:30:11] *** Joins: simendsjo (Mibbit@moz-9859255A.getinternet.no)
[11:31:22] *** Quits: cyndis (cyndis@moz-C4357EA7.kapsi.fi) (Ping timeout)
[11:31:58] *** Joins: sanxiyn (tinuviel@EEB7B45F.7A76C8B.4BEB41DB.IP)
[11:32:07] <sanxiyn> Surprise, surprise, bors queue is empty
[11:32:19] *** Quits: zokier` (zokier@moz-C4357EA7.kapsi.fi) (Ping timeout)
[11:32:34] *** Joins: ofeldt- (ofeldt@moz-AEF28830.dip0.t-ipconnect.de)
[11:33:09] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[11:33:11] *** Joins: benh (ben@moz-4A0366D2.org)
[11:33:48] *** Quits: ofeldt (ofeldt@moz-A4CEA4D4.dip0.t-ipconnect.de) (Ping timeout)
[11:34:40] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[11:35:40] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[11:35:43] *** Joins: zokier` (zokier@moz-C4357EA7.kapsi.fi)
[11:35:46] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:38:48] *** Joins: gwty (gwtypc@63B9D2B2.931C6792.137C914F.IP)
[11:40:34] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[11:40:54] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[11:41:18] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:41:45] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:43:02] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[11:44:37] *** Joins: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP)
[11:47:12] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[11:49:23] *** Quits: gwty (gwtypc@63B9D2B2.931C6792.137C914F.IP) (Client exited)
[11:51:05] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[11:51:50] <adridu59> will the box() syntax be mandatory?
[11:52:48] <dbaupp> in what sense?
[11:53:31] <sanxiyn> As I understand, ~e will change to box e.
[11:53:31] <dbaupp> sanxiyn: submit/review PRs \o/
[11:53:37] <sanxiyn> ~e is pretty rare though
[11:53:51] <adridu59> will you be able to still write let e = ~3; ?
[11:54:02] <sanxiyn> adridu59: My understanding is, no.
[11:54:12] <adridu59> but what is box() all about?
[11:54:36] <adridu59> why are we making it more complicate to declare those?
[11:54:48] <sanxiyn> Declare?
[11:54:48] <adridu59> in terms of syntax
[11:55:16] <Zor> ~ is kind of misleading if you come from any C-like language, fwiw
[11:55:25] <adridu59> sanxiyn: I don't understand why we are adding the `box()` syntax markup
[11:55:56] <sanxiyn> adridu59: box e (default) is same as ~e, but box(something) e is something different
[11:56:08] <sanxiyn> Tricky to put additional information in ~e syntax
[11:56:25] <adridu59> ~e is box(HEAP) no?
[11:56:35] <sanxiyn> yeah, something like that
[11:57:11] <adridu59> Zor: honestly when you look at Rust code and how it is used it stands clear that it isn't the NOT operator
[11:57:13] *** Joins: TisButMe (Mibbit@moz-2B5AC66A.w92-137.abo.wanadoo.fr)
[11:57:18] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:57:38] <adridu59> besides, unlike D, Rust isn't meant as a drop-in replacement for the C-language family
[11:57:51] <sanxiyn> adridu59: D is ?!
[11:58:46] <dbaupp> adridu59: (box defaults to ~ too, so ~e == box(HEAP) e == box e)
[11:58:53] <adridu59> well, kind-of I mean D doesn't really try to improve on C++ syntax, althrough the syntax differs slightly it's pretty much the same
[11:59:09] <dbaupp> `box() e` works too, iirc.
[11:59:27] <adridu59> dbaupp: but why would we have box instead of ~e and Gc<e>?
[11:59:33] <adridu59> or @ fwiw
[11:59:35] *** Quits: derek_c (derek@9CFF4C3F.E9B0596F.C34016C.IP) (Quit: Leaving)
[11:59:43] <dbaupp> i.e. allocate a Gc pointer with Gc<e>?
[11:59:44] <TisButMe> Hey, can someone have a look at this : https://gist.github.com/TisButMe/02adb9f9cd24e47ff9bb . I'm trying to implement an linked-list without using @pointers (as in extra), and using methods instead of functions. When I'm compiling this, I get "type `LinkedList<T>` does not implement any method in scope named `append`", when the method clearly is defined ?
[11:59:51] <adridu59> dbaupp: yes
[12:00:09] <dbaupp> ick
[12:00:24] <dbaupp> that exact syntax is impossible to parse
[12:00:37] <adridu59> I mean these pointers are quite often being, esp. ~ so having a single-char syntax seems really cool to me
[12:00:56] <adridu59> dbaupp: isn't it how it's done currently?
[12:00:57] <dbaupp> but, in general, we want things like `box (vec.emplace_back()) e`
[12:01:01] <adridu59> std::gc::Gc
[12:01:02] <dbaupp> adridu59: no
[12:01:04] <dbaupp> adridu59: Gc::new(...)
[12:01:09] <adridu59> right
[12:01:21] <adridu59> but C++ must have that syntax doesn't it?
[12:01:35] * dbaupp had a need for `box (Gc) box(RefCell) e;` yesterday
[12:02:02] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[12:02:05] <luz> i prefer having just box instead of both
[12:02:19] <dbaupp> it's impossible to put a large fixed-size vector in Gc<RefCell<T>> at the moment
[12:02:43] <adridu59> dbaupp: does box change something other than the syntax?
[12:02:48] <dbaupp> yes
[12:03:16] <dbaupp> box(Gc) foo(); will allocate memory and *then* evaluate foo() into that memory location
[12:03:42] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[12:03:50] <dbaupp> Gc::new(foo()) will evaluate foo() onto the stack and then copy that into Gc::new and allocate memory in there, and then copy the arg into that meory
[12:04:15] <dbaupp> that is, box(Gc) foo() will perform no unnecessary copies
[12:04:43] <adridu59> yeah well `box e` should be acceptable I guess
[12:04:51] *** Joins: mib_4ovpav (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP)
[12:04:51] <dbaupp> (we could achieve a very similar thing with Gc::from_closure(|| -> T) -> Gc<T>, i.e. Gc::from_closure(|| foo()).)
[12:05:04] <luz> has there been more discussion about this than what's on the mailing list?
[12:05:05] <adridu59> esp. box makes it more clear about what it does
[12:05:37] <dbaupp> luz: I imagine the mozilla people have discussed it in person
[12:05:43] * dbaupp doesn't really know
[12:05:43] <adridu59> anything box is on the heap?
[12:05:48] <dbaupp> no
[12:06:16] <dbaupp> box will be generic via traits, so you might hvae a boxer than reserves stack space
[12:06:51] <dbaupp> or, say, `box(RefCell) e;` which just puts it straight into a RefCell (which is just a normal value)
[12:07:02] <Zor> reserving stack space via a trait sounds impossible
[12:07:15] <Zor> since allocas are scoped
[12:07:25] *** Quits: simendsjo (Mibbit@moz-9859255A.getinternet.no) (Quit: http://www.mibbit.com ajax IRC Client)
[12:07:42] <dbaupp> Zor: not necessarily via alloca
[12:08:01] <sanxiyn> dbaupp: By the way, I think ~foo() already avoids copying. box syntax is simply extending that optimization to others.
[12:08:17] <kimundi> Just create a value of the type on the stack uninitialized, then copy the expression value over it
[12:08:27] <dbaupp> e.g. `let x = box (RefCell) e;` is "reserving" stack space
[12:08:33] <dbaupp> sanxiyn: yes, exactly
[12:08:34] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Connection reset by peer)
[12:08:50] <dbaupp> sanxiyn: allowing more things in libraries rather than hard coded into the compiler
[12:09:52] <kimundi> adridu59: ~ should actually be used rarely in good rust code - you only really need it for vectors, strings and recursive data structures
[12:10:07] *** Quits: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[12:10:33] *** Joins: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de)
[12:10:37] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[12:10:39] *** Quits: mib_4ovpav (Mibbit@29369FA4.3EAE7AC0.6DC151A0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:11:11] <sanxiyn> kimundi: Do we plan to change ~ syntax for vectors and strings?
[12:11:21] <dbaupp> sanxiyn: hopefully
[12:11:34] <sanxiyn> I am not sure about that...
[12:11:34] *** Quits: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[12:11:37] <dbaupp> ~[T] -> Vec<T>
[12:11:48] <dbaupp> move ~[] and ~str out of the language
[12:11:58] <kimundi> No idea, but if ~ disappears completely too, then it will likely end up as box "foo" and box [1, 2, 3]
[12:12:13] <sanxiyn> kimundi: I am not sure I like that
[12:12:36] <kimundi> sanxiyn: Me neither - imo ~ should be kept as sugar
[12:12:51] <adridu59> kimundi: is it expensive to use?
[12:12:57] <kimundi> what?
[12:13:04] <dbaupp> adridu59: yes, box is quite expensive
[12:13:10] <sanxiyn> kimundi: You mean, having both box(place) e and ~e?
[12:13:19] <kimundi> sanxiyn: yeah
[12:13:22] *** Joins: Tuba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[12:13:25] <dbaupp> adridu59: it has to allocate and deallocate, and it is bad for cache-locality
[12:13:56] * dbaupp has a feeling that there's a lot of stockholm syndrome with things like ~, @ and `do`
[12:14:02] <sanxiyn> kimundi: Me too... perhaps we should voice our opinions?
[12:14:03] <kimundi> adridu59: box(Heap) is no more expensive than ~ - both might do a malloc and free
[12:14:03] <dbaupp> I've certainly been guilty of it
[12:14:58] <kimundi> dbaupp: Yeah, I certainly have that problem too
[12:14:59] *** Tuba is now known as Tobba
[12:15:04] <adridu59> so I should use &str instead of ~str when possible is that right?
[12:15:18] <sanxiyn> adridu59: I am not sure
[12:15:20] <dbaupp> definitely
[12:15:26] <kimundi> dbaupp: which is why  don'T voice my opinion much - I'm not using the features often enough that I'm scared of changing :P
[12:15:38] <kimundi> adridu59: yes
[12:15:43] <dbaupp> if you don't need to modify or send, you almost certainly don't need ~str
[12:15:58] <kimundi> You can send a &'static str
[12:16:07] <kimundi> aka, compiletime constant string literal
[12:16:10] <dbaupp> kimundi: but you can't read a &'static str from a file :P
[12:16:19] <kimundi> dbaupp: true :P
[12:16:32] *** Joins: espadrine (Thunderbir@moz-BB3A80FC.w90-2.abo.wanadoo.fr)
[12:16:42] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[12:16:54] <adridu59> is &'static str editable?
[12:17:07] <sanxiyn> I don't think so
[12:17:10] <kimundi> not inplace
[12:17:17] <kimundi> its a & after all
[12:17:19] <dbaupp> (to be clear, I was just talking about function arguments; you should *always* take references if you don't need ownership, i.e. &T instead of T or ~T, &str instead of ~str, &[T] instead of ~[T].)
[12:18:09] <adridu59> yea that's was I was thinking
[12:18:59] <sanxiyn> dbaupp: I tried now for quite some time to turn that advice into a lint, still not there...
[12:19:00] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[12:19:28] <sanxiyn> That is, warning about ~T in function argument signature if argument is always borrowed in body
[12:19:34] <dbaupp> sanxiyn: yup, even what you have so far is pretty neat :)
[12:19:46] <sanxiyn> (There is allocation lint but it currently wanrs about ~expr, not ~Type)
[12:20:00] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[12:20:18] <dbaupp> adridu59: If you do need ownership (e.g. putting it into a data structure, or sending it to another task) do take by value/by ~str (rather than copying in the function), because the user might already have a ~str which they can pass to you by value without copying.
[12:20:18] <sanxiyn> It used to warn about ~[] and ~"" but not ~e, so I fixed that
[12:20:46] <kimundi> Anyway, the only gripe I have with box instead of ~ is that it gets so verbose to use it - I'd rather read N ~ per line instead of N words with N additional spaces
[12:21:11] <dbaupp> kimundi: every ~ should look bad
[12:21:29] <sanxiyn> dbaupp: I am not sure. I am ok with having both box(place) e and ~e.
[12:21:37] <dbaupp> I think the thing I will miss most is actually pattern matching through the pointers (assuming we don't keep that)
[12:21:57] <sanxiyn> dbaupp: Eh what?
[12:22:02] <kimundi> dbaupp: Sure, that but that doesn't change the fact if I'm forced to use them, my brain sooner gives up understanding a line thean with sigils :P
[12:22:15] <dbaupp> match *tree_node { Branch(~ref left, value, ~ref right) => { ... } Leaf => { ... } }
[12:22:22] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:22:29] <sanxiyn> dbaupp: We will get rid of that?
[12:22:32] <kimundi> afaik there was talk about adding a box pattern for that
[12:22:43] <kimundi> match *tree_node { Branch(box ref left, value, box ref right) => { ... } Leaf => { ... } }
[12:22:52] <dbaupp> sanxiyn: niko expressed distaste for allowing arbitrary code to execute on a pattern match
[12:23:06] <dbaupp> which is sensible
[12:23:13] <dbaupp> keep it cheap
[12:23:21] <sanxiyn> dbaupp: Yes, but for ~pat it's not arbitrary code
[12:23:24] <dbaupp> hopefully we can find a way around it.
[12:23:24] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[12:23:38] <dbaupp> sanxiyn: if ~ moves into the library it would be
[12:23:40] <sanxiyn> dbaupp: For general Deref trait, sure
[12:23:47] <dbaupp> similar for matching on @'s replacement
[12:23:51] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:24:08] <sanxiyn> dbaupp: We are not really moving ~ to library, are we?
[12:24:13] <dbaupp> don't know
[12:24:20] <dbaupp> it's very possible
[12:24:25] <sanxiyn> I am against getting rid of ~pat
[12:24:33] <dbaupp> and required for allocator support
[12:24:47] <dbaupp> (pcwalton wants allocator support)
[12:26:01] <dbaupp> I guess we could support plain "struct-pointers", something like `struct Foo<T> { #[pointer_pattern_match] x: *T }` then matching like `match foo { box (ref x) => { ... } }` would be able to just do a cheap operation (i.e. struct field access)
[12:26:10] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[12:26:23] <dbaupp> which would cover Rc and Gc and Uniq and so on.
[12:26:31] <sanxiyn> dbaupp: I think the main concern is not to keep pattern matching cheap, but to keep pattern matching side-effect free
[12:26:41] <dbaupp> ah true
[12:26:46] <sanxiyn> Side-effecting in pattern matching severely complicates code generation of partern matching
[12:26:56] <dbaupp> s/cheap/side effect free/ in my last sentence
[12:27:00] <dbaupp> it still holds :P
[12:28:28] <sanxiyn> dbaupp: Now if we had pure... :)
[12:28:40] <dbaupp> but which pure?
[12:28:48] <sanxiyn> Hence smiley
[12:28:58] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:29:48] <pongad> dbaupp: Do you remember me asking you about maybe adding rotate and partition to stdlib?
[12:30:06] <dbaupp> oooh... pure(compile_time) fn foo(...), pure(pattern_matching) fn bar(...), pure(referentially_transparent) fn baz(...), our problems are solved \o/
[12:30:08] <dbaupp> :P
[12:30:12] <dbaupp> pongad: yep
[12:30:23] <pongad> dbaupp: I finally got my VM back. Since it's a new feature, should I ask around first, or do I just open a PR?
[12:30:42] <pongad> dbaupp: (asked strcat, he told me he doesn't have a strong opinion about it either)
[12:30:50] *** Joins: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca)
[12:30:54] <sanxiyn> pongad: I'd just open PR
[12:30:59] *** Joins: mope (moritz@moz-5610235D.dip0.t-ipconnect.de)
[12:31:01] <dbaupp> pongad: if you've already implemented it/feel like implementing it despite the possibility of it being rejected, just open a PR
[12:31:27] *** Joins: gwty (gwtypc@796A19D4.46ED568F.C924875F.IP)
[12:31:32] <sanxiyn> By the way, if one is looking for simple standard library addition to hack on, I recommend (my pet issue :-) #5268
[12:32:09] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[12:32:11] <dbaupp> I think I tried to do that
[12:32:22] <dbaupp> but doing it without Clone was tricky, or something
[12:32:27] * dbaupp can't remember the details
[12:32:32] <pongad> I already have it implemented, though in a separate trait. Should I add it wholesale? Or put it in MutableVec or something?
[12:32:38] <pongad> sanxiyn: Will look into it
[12:32:57] <sanxiyn> pongad: I'd add to existing trait if possible
[12:33:26] <pongad> sanxiyn: C
[12:33:30] <pongad> sanxiyn: K*
[12:33:55] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:34:41] *** Quits: mope (moritz@moz-5610235D.dip0.t-ipconnect.de) (Quit: Verlassend)
[12:35:00] *** Joins: mope (moritz@moz-5610235D.dip0.t-ipconnect.de)
[12:37:20] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[12:40:05] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:40:21] *** Quits: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP) (Client exited)
[12:40:35] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[12:40:37] *** Joins: miblet (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[12:41:44] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[12:42:02] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[12:42:05] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[12:42:14] <sanxiyn> According to GitHub, we decreased open issues by 97 during the last month
[12:42:37] <sanxiyn> If we continue that, we will reach zero issues in 15 months :)
[12:42:42] <dbaupp> :D
[12:42:57] <dbaupp> not in time for the planned release of 1.0 though :/
[12:43:23] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:43:45] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[12:43:45] <FreeFull> sanxiyn: And then, negative issues!
[12:44:17] <dbaupp> "The language is too good" "The compiler has no bugs for me to fix"
[12:44:25] *** Quits: z0w0 (zack@moz-A79E7E7D.lnse4.cha.bigpond.net.au) (Client exited)
[12:44:27] * dbaupp dreams
[12:44:41] <adridu59> it's gonna be boring when there are no more bugs
[12:44:50] <adridu59> besides some are way easier to fix than others
[12:45:03] <adridu59> :p
[12:46:36] <Ms2ger> dbaupp, once that happens, come over to Servo :)
[12:46:47] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[12:47:29] <adridu59> wow servo still has .rc files
[12:47:57] <dbaupp> heh
[12:48:04] <Ms2ger> Dj vu!
[12:48:37] * dbaupp said the same thing to Ms2ger yesterday
[12:48:41] <sanxiyn> Which Rust version does Servo use now?
[12:48:45] <adridu59> Déjà vu?
[12:48:59] <dbaupp> adridu59: ^
[12:49:06] <Ms2ger> sanxiyn, pretty recent, I think
[12:49:10] <dbaupp> sanxiyn: upgrade in progress aiui
[12:49:28] <Ms2ger> Hmm
[12:49:36] <dbaupp> a painful one, based on how long jack's been asking questions of acrichto et al in #rust-internals
[12:49:40] <Ms2ger> I had to rebuild rust in the last few days
[12:49:57] <Ms2ger> But that might actually have been the android downgrade
[12:50:37] <adridu59> downgrade?
[12:50:40] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:50:53] <sanxiyn> GitHub tells me Servo is at Rust 2013-10-28
[12:52:41] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[12:52:48] <Ms2ger>  teporarily rollback of rust(because of uv error, we can not enter int
[12:52:48] <Ms2ger> o amain. io errors are happened)
[12:52:50] <miblet> I downloaded Rust.0.9.20131230 with Nuget and get an error about a procedure entry point not found in libstdc++-6.dll
[12:53:15] <miblet> this is on windows
[12:53:42] <adridu59> Ms2ger: you are using a weird char encoding
[12:53:57] <Ms2ger> I'm copying from github :)
[12:54:08] <sanxiyn> adridu59: Isn't it UTF-8
[12:54:23] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[12:54:26] <miblet> is there a guide somewhere for setting 0.9 pre up on windows?
[12:54:39] <adridu59> should be, I see "?" marks
[12:54:47] <klutzy> miblet: I don't know about nuget, but the error usually means either 1) you have such dll at some dir but is missing in PATH environment variable
[12:55:01] <klutzy> miblet: or 2) you don't have such dll
[12:55:11] * Ms2ger looks what's going on the wire
[12:55:21] <adridu59> wasn't libstdc++ dropped recently?
[12:55:29] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:55:56] <sanxiyn> adridu59: Looks fine to me
[12:56:11] <klutzy> adridu59: recently. I guess it is after 20131230
[12:56:46] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:56:51] <Ms2ger> e2 80 a6
[12:57:04] <dbaupp> klutzy: no, it was before that
[12:57:26] <dbaupp> klutzy: but the compiler uses LLVM, which presumably uses libstdc++ (being C++)
[12:57:41] <adridu59> it's: …
[12:58:06] <adridu59> funny, I'm on Mibbit.com using XP; I can see those that I send
[12:58:06] <Ms2ger> So looks like utf-8
[12:58:26] <sanxiyn> Is --llvm-root broken?
[12:58:54] <sanxiyn> I want to try to build with LLVM 3.4rc3
[13:00:45] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[13:01:18] <miblet> klutzy I have libstdc++-6.dll in the MingW directory, and the PATH points to the directory its in
[13:01:34] <adridu59> sanxiyn: fixed in https://github.com/mozilla/rust/pull/11266
[13:02:08] <sanxiyn> adridu59: Eh... no?
[13:02:19] <sanxiyn> That doesn't make any sense
[13:02:27] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[13:03:21] <sanxiyn> adridu59: That may fix error in configure when you pass --llvm-root, but path you passed to --llvm-root is ignored
[13:03:43] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[13:04:04] <adridu59> oh I didn't try 3.4
[13:04:18] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[13:05:09] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[13:07:05] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[13:10:30] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[13:14:03] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[13:15:12] <sanxiyn> Hm
[13:15:21] <sanxiyn> Forget what I said about LLVM. Must be my mistake.
[13:21:21] *** Quits: sanxiyn (tinuviel@EEB7B45F.7A76C8B.4BEB41DB.IP) (Quit: Bye)
[13:21:59] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[13:22:46] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[13:22:58] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[13:23:26] <pongad> I'm wonder, what time zones are you guys in? :D
[13:25:14] <dbaupp> +1100
[13:26:16] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[13:27:10] <pongad> Solomon Island? I don't know any other place in +11
[13:27:43] <dbaupp> australian eastern daylight savings time
[13:27:53] <dbaupp> so +10 normally :P
[13:28:19] <pongad> Whoops, Australia is a much better guess too xD
[13:28:57] <kimundi> UTC+1
[13:29:14] <pongad> Is there a command for unittesting my changes? ie without building librustc?
[13:29:18] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[13:29:25] <kimundi> which changes to what?
[13:29:34] <pongad> Changes to libstd
[13:29:36] <adridu59> UTC+1
[13:29:53] <kimundi> pongad: you can try make check-stage0-std
[13:30:07] *** Quits: gwty (gwtypc@796A19D4.46ED568F.C924875F.IP) (Client exited)
[13:30:17] <kimundi> pongad: but if that fails with unrelated errors, you need to use make check-stage1-std, which will compile rustc once
[13:30:38] <pongad> kimundi: Thanks a ton
[13:30:41] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: Ex-Chat)
[13:30:57] *** Joins: philix (philix@moz-4689D536.user.veloxzone.com.br)
[13:31:08] <kimundi> check-stage0 only works if the snapshot compiler is compatible with the current rust codebase, if there have been breakign changes you need a fresh build
[13:31:38] <dbaupp> pongad: (what TZ are you?)
[13:31:42] <kimundi> I mean, need to build to at least stage1, taht is
[13:32:50] <pongad> kimundi: Got it
[13:32:50] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[13:33:01] <dbaupp> pongad: you can also use `make check-stage1-std NO_REBUILD=1` which will just compile stdtest and run it
[13:33:04] <dbaupp> no bootstrap at all
[13:33:20] <pongad> dbaupp: I'm in UTC-5. Just flew in, so I can't sleep xD
[13:33:32] <kimundi> but that assumes there already was a successful build before
[13:34:09] <dbaupp> kimundi: or a compatible-enough build before
[13:34:27] <pongad> dbaupp: run `it`. The `it` is the test on stdlib right?
[13:35:06] <kimundi> all make check-... targets will compile and run the test executables
[13:35:34] <pongad> ok
[13:35:36] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[13:39:03] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[13:40:52] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[13:41:07] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[13:42:04] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[13:42:38] <miblet> when is the 0.9 windows installer coming out?
[13:42:47] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[13:44:17] <dbaupp> when 0.9 is released, within the next week or so
[13:44:24] *** Joins: payload (Mibbit@moz-4DA0B54B.dynamic.primacom.net)
[13:44:37] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[13:44:56] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[13:46:15] <payload> hi, i want to put a closure into a struct. but I don't find the syntax: struct Foo<'l> {     bar: &'l || }
[13:46:28] <payload> it keeps on saying missing lifetime specifier
[13:46:57] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[13:48:00] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[13:49:27] <whitequark> I think it's <&'l> ||, but that doesn't work yet
[13:50:49] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[13:50:50] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[13:51:58] <kimundi> payload: try 'a ||
[13:52:01] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[13:52:44] <payload> uh okay
[13:53:53] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[13:53:58] *** Joins: nadirs (Mibbit@moz-F7C0D87C.retail.telecomitalia.it)
[13:55:10] *** Quits: nadirs (Mibbit@moz-F7C0D87C.retail.telecomitalia.it) (Quit: http://www.mibbit.com ajax IRC Client)
[13:55:58] *** Quits: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au) (Quit: kvanb)
[13:57:31] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[13:58:02] *** jorendorff_away is now known as jorendorff
[14:02:51] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[14:04:36] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[14:04:53] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[14:05:07] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[14:05:55] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[14:07:27] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[14:09:41] *** Quits: doy (doy@moz-8F23663C.net) (Ping timeout)
[14:09:41] *** Quits: TingPing (tingping@moz-1A0DA09.se) (Ping timeout)
[14:09:50] *** jorendorff is now known as jorendorff_away
[14:09:55] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Ping timeout)
[14:09:55] *** Quits: hoelzro (hoelzro@moz-937642A5.ro) (Ping timeout)
[14:09:57] *** Quits: ekiara (emk@moz-9B1940E9.tech.co.ke) (Ping timeout)
[14:10:10] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Ping timeout)
[14:10:10] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:10:20] *** Quits: brianloveswords (brianloves@moz-CB223D1E.members.linode.com) (Ping timeout)
[14:10:20] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[14:10:35] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[14:10:44] *** Quits: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com) (Ping timeout)
[14:11:27] *** Quits: AlexMax (alexmax@moz-3D3F5603.funcrusher.net) (Ping timeout)
[14:12:46] <dbaupp> payload: https://github.com/mozilla/rust/issues/11211
[14:12:56] <dbaupp> whitequark: it's `'l ||` and `<'l> ||`
[14:13:10] *** Joins: hoelzro (hoelzro@moz-937642A5.ro)
[14:13:10] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[14:13:18] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[14:13:27] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[14:13:37] *** Joins: brianloveswords (brianloves@moz-CB223D1E.members.linode.com)
[14:13:38] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[14:13:48] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[14:13:55] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[14:14:25] *** Joins: AlexMax (alexmax@moz-3D3F5603.funcrusher.net)
[14:14:33] *** Joins: doy (doy@moz-8F23663C.net)
[14:14:43] *** Joins: TingPing (tingping@moz-1A0DA09.se)
[14:15:42] <pongad> For some reason, when I bring the code over the stdlib, the test fails xD
[14:16:17] <pongad> But when I try to original code again it works...I'm...confused
[14:16:27] *** Joins: Ferreus (ferreus@moz-BC88CB34.pools.arcor-ip.net)
[14:16:41] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:17:27] *** Joins: derek_c (derek@6711C3E1.3B8FFE11.DD630FEE.IP)
[14:17:32] *** Joins: Daspeed (Mibbit@moz-A96FF35D.adsl.xs4all.nl)
[14:18:06] *** Quits: Daspeed (Mibbit@moz-A96FF35D.adsl.xs4all.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:18:14] *** Quits: miblet (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[14:18:23] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[14:20:00] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[14:20:20] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[14:23:06] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:23:40] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[14:26:02] *** Quits: mleise (marco@moz-48140B99.pools.arcor-ip.net) (Ping timeout)
[14:26:19] *** Joins: mleise (marco@moz-48140B99.pools.arcor-ip.net)
[14:27:04] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[14:28:06] <pongad> dbaupp: In case you are interested, PR just got posted :D
[14:28:59] *** Quits: mleise (marco@moz-48140B99.pools.arcor-ip.net) (Ping timeout)
[14:29:32] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:29:59] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Quit: Leaving.)
[14:30:22] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:30:27] *** Joins: Florob (Florob@moz-39532932.de)
[14:31:21] *** Quits: payload (Mibbit@moz-4DA0B54B.dynamic.primacom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:34:19] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[14:34:48] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[14:37:13] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:39:29] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[14:40:12] *** Joins: vmx (vmx@moz-1E7B6EAF.pools.arcor-ip.net)
[14:40:32] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:40:37] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[14:40:37] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[14:41:09] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[14:43:30] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[14:45:19] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[14:45:50] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:48:16] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[14:49:05] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[14:49:09] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[14:49:47] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[14:51:00] *** Joins: flammi (smuxi@2FD3CD91.A932E56.6C126586.IP)
[14:51:47] *** Quits: flammi (smuxi@2FD3CD91.A932E56.6C126586.IP) (Connection reset by peer)
[14:53:12] *** Joins: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[14:53:12] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[14:53:46] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[14:56:20] *** Joins: payload (Mibbit@moz-4DA0B54B.dynamic.primacom.net)
[14:57:06] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[14:59:20] <pongad> What happened to trait copy?
[15:00:03] <bjz> pongad: twas removed
[15:00:11] <bjz> there is now Clone
[15:00:20] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[15:00:25] <pongad> Oh right
[15:00:45] <bjz> but it is different because it is not an automatic 'kind' trait like Copy
[15:00:55] <pongad> It's not?
[15:00:56] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:01:06] <pongad> How do you declare that something is Clone?
[15:01:40] <adridu59> #[deriving(Clone)]?
[15:01:51] <whitequark> or implementing it manually.
[15:02:01] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:02:32] <bjz> pongad: impl Clone for Foo { fn clone(&self) -> Foo { ... } }
[15:03:35] <bjz> but if all the members of your thingy impl Clone, you can also do deriving(Clone)
[15:03:57] <derek_c> did spawn_unlinked get removed?
[15:05:04] <pongad> Oh, that makes so much sense
[15:05:25] <pongad> When I use the Clone trait, I need to write .clone() manually right?
[15:06:05] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:07:30] <dbaupp> pongad: review half of it
[15:07:37] <dbaupp> *I've reviewed
[15:07:55] <dbaupp> pongad: and yes, manual .clone()s
[15:07:57] <dbaupp> derek_c: yes
[15:08:02] <dbaupp> derek_c: it is the default now
[15:08:12] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Quit: 전 이만 갑니다.)
[15:09:09] *** Joins: fyolnish (fyolnish@moz-2026779E.uqwimax.jp)
[15:09:24] *** Quits: payload (Mibbit@moz-4DA0B54B.dynamic.primacom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:09:41] *** Quits: mope (moritz@moz-5610235D.dip0.t-ipconnect.de) (Ping timeout)
[15:10:08] <pongad> dbaupp: Thanks xD
[15:10:09] <derek_c> dbaupp: you mean, spawn() is by default unlinked?
[15:10:09] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:10:40] <Florob> Is there a nice/performant way to get as much of an UTF-8 string as available from a reader?
[15:10:41] <dbaupp> derek_c: yse
[15:11:09] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:11:13] *** Quits: philix (philix@moz-4689D536.user.veloxzone.com.br) (Quit: philix)
[15:11:43] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[15:12:11] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[15:12:46] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:13:11] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[15:16:32] <derek_c> dbaupp: thanks just verified.  So there is only one version of spawn now?
[15:16:44] *** Joins: Crandom (Crandom__@moz-56264BBC.sx)
[15:16:46] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:17:45] <dbaupp> derek_c: yes, there's no longer any linked failure
[15:17:47] <Crandom> is there a way to stop rustc putting crate symbols into output files (such as "_ZN20_rust_crate_map_core17_2e829c2f6b1e0b524v0.0E" and "_ZN23_rust_crate_map_main.rs17_958b5b09b7ddf6774v0.0E")?
[15:18:11] <whitequark> Crandom: no, not really.
[15:18:31] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:18:56] <Crandom> oh well, thanks
[15:19:05] <Crandom> I'll just use `strip` to get rid of them
[15:19:50] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[15:20:52] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[15:20:53] <whitequark> that won't remove the contents though
[15:21:31] <whitequark> you can use --emit-llvm and opt -internalize, but that is somewhat tricky
[15:21:58] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:23:07] <Crandom> i'm already using --emit-llvm (I'm doing freestanding/kernel development), so I'll take a look at that
[15:23:23] *** Quits: ienh (user@moz-F3A1CBB9.lsanca.dsl-w.verizon.net) (Quit: leaving)
[15:23:30] <derek_c> dbaupp: thanks :)
[15:23:44] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:23:53] <whitequark> Crandom: use opt -internalize -internalize-public-api-list=<symbols.
[15:23:55] <whitequark> er
[15:24:01] <whitequark> Crandom: use opt -internalize -internalize-public-api-list=<symbols> -globaldce
[15:24:17] <whitequark> or just -O3 instead of -globaldce
[15:24:21] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:24:31] <Crandom> thanks, I'll try that :)
[15:26:02] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[15:26:28] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[15:27:03] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:28:43] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[15:29:08] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[15:29:30] *** Joins: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de)
[15:31:17] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:33:26] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[15:33:48] <Crandom> whitequark: fantastic, it worked :D
[15:34:58] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:35:22] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[15:36:06] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:37:47] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[15:38:41] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:38:53] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:39:04] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:39:52] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:44:16] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[15:44:46] *** Joins: kud1ing (Mibbit@moz-3BBD1E0D.pools.arcor-ip.net)
[15:45:56] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:45:59] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[15:47:05] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[15:47:19] *** Joins: payload (Mibbit@moz-4DA0B54B.dynamic.primacom.net)
[15:47:25] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[15:47:55] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[15:47:58] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[15:48:18] *** Joins: SiegeLord (sl@moz-3B527BD6.bstnma.fios.verizon.net)
[15:49:14] <payload> hi. is the @ syntax coming back, differently implemented? writing Gc::new or such kind of stuff is overly verbose
[15:49:34] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:49:42] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[15:49:52] *** Joins: DasIch (dasich@moz-5EDA591.de)
[15:50:57] <kimundi> payload: The plan is to have custom smartpointer all use the "box" keyword and use type inference
[15:51:30] <payload> ah okay
[15:51:40] <kimundi> let x = box(Gc) foo; or let x: Gc<Foo> = box foo;
[15:52:49] <SiegeLord> What would be the simplest way to replace newtype dereferencing that was removed?
[15:52:50] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:53:09] *** Quits: kud1ing (Mibbit@moz-3BBD1E0D.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:54:00] <erickt1> jack: hey there! I'm starting to think the crate_id syntax is wrong. It's weird that there's no way to name a crate without specifying a version, and there's a risk that the ':' to separate the crate name and version could confuse specifying a url port 
[15:56:11] <vmx> may anyone have a quick look if that's idiomatic rust? i try to have an enum with vectors. (it's a paste with a total of 25 lines) https://www.friendpaste.com/3LDS6pm9wHfFrpZnJH1ONK
[15:56:14] <jack> there are a specific set of constraints. 1) needs to be a single string. 2) needs to convey origin as well as name. 3) needs to be auto-canonicalized
[15:56:28] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[15:56:32] <jack> erickt1: #1 and #3 are to allow external build tools to easily compute the output file names.
[15:57:03] <jack> #2 is needed for decentralized packaging
[15:57:47] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[15:58:05] <jack> there is a bug where we bikeshedded the syntax for a bit. we specifically wanted it to be a valid HTTP-ish URI without any port and relative.
[15:58:43] <erickt1> jack: I'm with you, but why no port?
[15:58:46] *** Joins: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP)
[15:59:28] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:00:09] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[16:00:18] <jack> I can barely imagine a situation where a port would be required.
[16:00:35] <jack> it didn't come up in our discussions of the syntax.
[16:00:36] <pongad> Does anyone know what this error means? failed to find an implementation of trait std::clone::Clone for [type error] main.rs:53     let (min, max) = minmax(&mut v.iter());
[16:00:48] <mitsuhiko> Isn't the separator between name and id "#"?
[16:00:52] <mitsuhiko> name and version
[16:00:58] <jack> i agree that name without version is a drawback, but it was the best we could come up with.
[16:00:59] *** Joins: mope (moritz@moz-5610235D.dip0.t-ipconnect.de)
[16:01:11] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:01:11] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[16:01:26] <erickt1> jack: well, I just spun up a SimpleHTTPServer to help track down some rustpkg bugs, and it defaults to port 8000 :)
[16:02:09] <klutzy> `#name:` works as I remember
[16:02:22] <klutzy> (name without version)
[16:02:25] <jack> oh yeah, klutzy's probably right
[16:02:28] <erickt1> jack: was space separating out the version considered? That'd be easy to parse since spaces aren't part of proper urls
[16:03:45] <SiegeLord> vmx, Seems reasonable to me
[16:04:06] <erickt1> klutzy: thanks, I'll try that out
[16:04:26] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[16:04:57] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[16:05:07] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:05:18] <vmx> SiegeLord: cheers
[16:05:25] <SiegeLord> Can you not do a pkg_id?ver=...&crate=... syntax? Or is that too hard too hard to parse by 3rd party tools?
[16:05:36] <erickt1> jack: I'm also not sold yet on embedding the origin in the crate id. That feels like it'd get confusing when we take in consideration of forks. I'd rather somehow express the origin in the `extern mod foo = "…"`
[16:05:59] <jack> forks can change the crate_id just fine.
[16:06:21] <erickt1> SiegeLord: not really. we could make crate_id a proper URI
[16:06:32] <SiegeLord> That's what I'm getting at
[16:06:54] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:07:00] <jack> i don't think it's super helpful to pick on any one feature of this in isolation. it's pretty much package (har har) deal. a new design would probably change every piece. i don't know how useful it is to fix these things piecemeal.
[16:07:28] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[16:07:40] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[16:07:40] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[16:08:22] <jack> the location+name thing is because of rustpkg's goal to be decentralized.
[16:08:26] *** Joins: petantik (oz@moz-20EC2160.net)
[16:08:50] <achin> if a fork gains new functionality, it generally also gets a name change.  but if a fork is just used to do development before being merged upstream, it'll have the exact same name (crate_id) as the upstream project
[16:08:50] <jack> though i'll note that Maven works with a similar thing (though they look like domain names not URIs) and forks work pretty well there.
[16:09:06] <erickt1> jack: but I might not want to. Say I have a tracking fork of glfw-rs with patches that haven't landed yet. I want to point my project short term at my github.com/erickt/glfw-rs fork until my patches land. Does that mean I need to change the crate_id in my fork?
[16:09:20] <jack> on clojars for example, the forks all change the name. because clojars won't allow you to upload a duplicately named package.
[16:09:22] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Ping timeout)
[16:09:40] <jack> it hasn't bothered me. it's a minor change to one file to pull in a different fork of a lib.
[16:09:46] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[16:10:18] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:10:25] <jack> in clojure there is a top-level project.clj that defines what external dependencies you have.
[16:10:46] <pongad> In the OrdIterator doc, `assert!(a.iter().min().unwrap() == &1);`, why is there an & in front of 1?
[16:11:28] *** Joins: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com)
[16:11:32] <pongad> unwrap should give an int, not a reference to int, right?
[16:11:56] *** Quits: mope (moritz@moz-5610235D.dip0.t-ipconnect.de) (Quit: Verlassend)
[16:12:13] <dbaupp> unwrap takes Option<T> to T
[16:12:16] <dbaupp> T could be &int
[16:12:28] <erickt1> jack: I agree we need to keep rustpkg decentralized. A rustpkg `extern mod` needs 4 things. The origin repo, the path to the crate, the crate name, and the version
[16:12:43] <SiegeLord> I don't think decentralization is hurt by not having the location inside the crate_id
[16:12:51] <Ms2ger> pongad, vector.iter() iterates over pointers to elements
[16:13:21] <pongad> Oh, that makes so much sense xD
[16:13:22] <jack> the location is used in the crate hash. if you separately, that's a lot more burden on any external tools.
[16:13:25] <pongad> Thanks Ms2ger and dbaupp 
[16:13:38] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[16:13:47] <achin> is the origin repo optional in a crate_id?
[16:13:50] <jack> perhaps we just give up on that and require --crate-file-name and friends.
[16:13:53] <jack> achin: yes
[16:14:07] <SiegeLord> I'm just saying that the repo name should not affect the hash
[16:14:15] <SiegeLord> Well, imo of course
[16:14:22] <jack> it seems like shelling out to rustc to calculate every filename is going to be costly in large projects.
[16:14:34] <jack> perhaps it's not that big of a deal.
[16:14:42] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:14:55] <jack> the repo name has to affect hte hash, otherwise every library with name foo will conflict with each other.
[16:15:08] <jack> we might as well not have the hash if we're going to do that.
[16:15:14] *** Quits: zmike (discomfito@moz-975BC507.hsd1.ct.comcast.net) (Quit: ah. I see.)
[16:15:18] <achin> semantically, what does an origin repo indicate? where to find the canonical version of a library?  
[16:15:19] *** Quits: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[16:15:31] <SiegeLord> Oh right... there's no author anymore
[16:15:50] <jack> achin: when rustpkg runs, it only knows the crate_id of a dependency. so it must use the information there to download and fetch the right revision.
[16:15:54] <SiegeLord> Well, I mean you could stick the author into the crate id :P
[16:16:22] <achin> what about cases when i've already downloaded something (and i don't want rustpkg to download anything for me) ?
[16:16:24] <erickt1> jack: I thought we can load two projects with the same name but with different hashes
[16:16:32] *** Quits: mindcat (mindcat@5C808A82.6DB8F66B.431667FD.IP) (Quit: Lost terminal)
[16:16:33] <jack> SiegeLord: that's effecitvely the same thing as we have now, just not linked to any real-worl endpoint.
[16:16:56] <jack> erickt1: if they have diferent versions, yes.
[16:17:17] <jack> or rather, if they have unique crate hashes.
[16:17:31] <jack> which you get by changing version numbers if the other pieces are all equal
[16:17:32] *** Joins: mpiechotka (mpiechotka@moz-93FEEFE.adsl.inetia.pl)
[16:17:52] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:18:12] <erickt1> I'm not sure if I quite see the problem yet :)
[16:18:30] <SiegeLord> What I'd prefer is #[repo_name("")] extern mod foo = "pkg_id;version;crate_name;"
[16:18:43] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Client exited)
[16:18:58] <mpiechotka> Hi. Can test function be written in more compact way in https://gist.github.com/uzytkownik/8270151 (assuming get_str() and test API is fixed)?
[16:19:18] *** Joins: zmike (discomfito@moz-975BC507.hsd1.ct.comcast.net)
[16:19:38] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:19:39] <SiegeLord> mpiechotka, Maybe s.slice() inside the assert_eq?
[16:19:39] <achin> it seems to me that the whole rustpkg discussion would benefit a lot if rustdevs published a prototypical library and client, and specified all of the relevent crate_ids and extern mods.  i think this would make it easier to outline how things will work in practice for the handful of usecases people are worried about
[16:19:59] <SiegeLord> I disagree
[16:20:13] <SiegeLord> That has been the way things have been done up until now and is the reason why we are in this mess
[16:20:16] <erickt1> jack: I think we have two separate things here. We got crate_ids that are defined in the lib.rs file. We also have a crate reference rustpkg uses to download and install a crate. I'm not sure if they should have the same syntax and semantics
[16:20:56] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[16:21:15] <mpiechotka> SiegeLord: Thanks
[16:21:38] <achin> erickt1: it'd help if we had names for those two different things!
[16:21:57] <jack> erickt1: perhaps not. another thing about that is that a repo might specify extern mod's in several places (lib.rs, test.rs, bench.rs, example files) and you'd like to set the crate_id for those external modules a single time.
[16:21:58] <erickt1> SiegeLord: after this discussion I'm planning on writing up a proposal on how I think we could change rustpkg to at least cover the situations I'm interested in
[16:22:01] <jack> there's a bug open about that
[16:22:18] <SiegeLord> The first step is to identifiy the use cases
[16:22:28] <erickt1> SiegeLord: that's my plan
[16:22:35] <jack> erickt1: it would help just to have a list of the situations you are interested in, so we can factor that stuff into design discussions when they happen.
[16:22:35] <SiegeLord> You're going beyond that... :P
[16:22:54] <SiegeLord> There should not be any design discussion before the use cases are agreed upon
[16:23:02] <jack> i was kind of working on a use cases doc, but kept getting distracted with other things.
[16:23:15] <erickt1> jack: did it end up online?
[16:23:29] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:23:31] <jack> erickt1: no. i'm not sure what state it is in. i'll go look.
[16:23:36] <erickt1> thanks
[16:24:10] <achin> here's one:  what about projects that are published on both github, bitbucket, and http?  what type of create_id would be specified in lib.rs?
[16:24:19] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Quit: Leaving)
[16:24:23] <SiegeLord> Or not published at all :P
[16:24:32] <jack> i can't find it at all
[16:24:36] <erickt1> :(
[16:24:49] <jack> i'll search harder later. it's possible ijust named it weird in my org idr
[16:25:21] <erickt1> jack: were you the one working on getting rustpkg working with servo?
[16:26:42] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[16:27:27] <jack> erickt1: yes. thought we've reverted now back to make.
[16:27:35] <achin> i agree that specifying where to find a crate that i'm dependent on is a different thing then specifying where to find the canonical version of crate is located
[16:27:51] <jack> There was some issue with the android build and i didn't have time to fix it.
[16:27:53] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:28:07] <jack> Also to use rustpkg we lost the parallel build
[16:28:50] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:31:30] <erickt1> here's a little rustpkg example I'm playing around with: https://github.com/erickt/rustpkg-playground
[16:32:09] *** Joins: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de)
[16:32:35] <SiegeLord> I'd take some real projects and use those as examples ;P
[16:33:03] <erickt1> SiegeLord: I'm reducing down what I'm trying to do with rust-zmq and rust-elasticsearch
[16:33:06] <erickt1> and rust-http
[16:33:22] <SiegeLord> Projects with generated files, example programs not meant to be installed, intermediate libraries etc
[16:34:03] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:34:06] <achin> well, you want to maybe start with simple playgrounds first, to make sure they work
[16:34:14] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[16:34:30] <erickt1> SiegeLord: rust-http has generated files, rust-zmq has the example programs. I might change rust-openssl to have two crates
[16:34:39] *** Quits: Kxepal (Miranda@moz-B0CFA8DA.pppoe.mtu-net.ru) (Ping timeout)
[16:34:40] <erickt1> not sure about intermediate libraries at the moment
[16:35:13] <SiegeLord> That kind of a big deal, as that is THE best way of speeding up rust builds
[16:35:42] *** Joins: krdln (Mibbit@moz-C271714F.dynamic.chello.pl)
[16:36:45] <SiegeLord> It's a good litmus test of the system if it can build the rust compiler and its subsystems
[16:37:24] *** Joins: Kxepal (Miranda@moz-DBA12CC2.pppoe.mtu-net.ru)
[16:37:29] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:37:41] *** Quits: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca) (Quit: canhtak)
[16:37:44] <krdln> Hi, i've recently read on reddit about removal of @ from compiler and laguage, but for example here https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs there are lot of @'s. Could somebody explain this to me.
[16:37:59] <Ms2ger> Work is ongoing
[16:38:14] <erickt1> The rust compiler is a different beast. Multi-stage cross compilation is probably out of scope. We could, however, use rustpkg as part of the foundation to do that build system
[16:38:51] <SiegeLord> I don't think that's a good mindset
[16:38:52] <erickt1> krdln: the recent stuff was about removing `@mut`s
[16:38:56] <krdln> oh
[16:39:16] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:39:18] <krdln> I somehow missed the `mut` part :P
[16:39:22] <erickt1> :)
[16:39:37] <SiegeLord> I mean, the answer could be "use pkg.rs" but then extern mod syntax needs to support pkg.rs-built packages
[16:40:10] <luz> @ is being removed too
[16:40:20] <erickt1> SiegeLord: yeah.
[16:41:05] <pongad> For some reason https://gist.github.com/pongad/8270459 is giving a nasty error message, can anyone please help?
[16:41:29] *** Joins: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca)
[16:41:35] *** Joins: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[16:42:04] <derek_c> I'm reading the stdlib and see this: let this = unsafe { cast::transmute_mut(self) };
[16:42:18] <Florob> rusti: let mut a = "a".repeat(64*1024-1); a.push_char('ß'); let mut rdr = std::io::buffered::BufferedReader::new(std::io::mem::MemReader::new(a.into_bytes())); rdr.consume(64*1024-1); rdr.read_char();
[16:42:22] -rusti- pastebinned 22 lines of output: http://ix.io/9H8
[16:42:40] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:42:50] <dmz> why do unused functions now trigger an error? wasn't a warning enough?
[16:42:57] <derek_c> I understand what's the purpose of this. but is there any risk?
[16:44:15] <sfackler> dmz: they still just warn for me
[16:44:58] <dmz> sfackler: I think that was changed very recently, like yesterday or the day before
[16:45:00] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[16:45:36] <luz> warn here as well, on a build from today
[16:46:09] <dmz> luz: interesting...
[16:46:12] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:46:12] <dmz> oh wait
[16:46:13] *** Joins: gwty (gwtypc@B0743F6E.59A8ED01.4654B817.IP)
[16:46:37] <kimundi> derek_c: ANy transmute should have a very good reason to exists, and needs to carefully treaded to not introduce unsafety. In other words, without more context the risk is unknow here :)
[16:46:45] *** Joins: sk (sk@89DF5F97.D147FDE0.33B96495.IP)
[16:46:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[16:47:07] <dmz> luz: sfackler: my fault, it's the rust-compress source that makes them errors
[16:47:12] *** Parts: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com) (ERC Version 5.3 (IRC client for Emacs))
[16:47:23] <swgillespie> derek_c: you're casting an immutable variable to a mutable variable against the wishes of rust, so you're bypassing some compiler safety checks
[16:47:30] <swgillespie> i think
[16:48:37] <derek_c> It's in the implementation of std::comm::Port https://github.com/mozilla/rust/blob/master/src/libstd/comm/mod.rs#L749
[16:49:32] <derek_c> is there a way to have read from a TcpStream in a non-blocking manner?
[16:49:47] <swgillespie> derek_c: That line together with line 808 does some mutation to an immutable struct which is potentially unsafe
[16:50:06] <achin> derek_c: i don't think so; not last i checked
[16:50:06] <swgillespie> and the block starting at line 753
[16:50:07] *** Quits: sk (sk@89DF5F97.D147FDE0.33B96495.IP) (Quit: Leaving)
[16:50:12] <swgillespie> would be my guess
[16:50:12] <vmx> if i have an enum where all possible types implement certain traits, is there an easy way to inherit it instead of re-implementing each of the traits? in my case i have an enum that contains vectors only and i'd like to use their iterator traits
[16:50:15] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[16:50:18] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:50:47] <derek_c> swgillespie: I see
[16:50:53] <derek_c> achin: kk thanks
[16:52:00] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:52:59] <kimundi> vmx: Not really possible atm - you could try to write a method that just returns a &[T] of one of the variants, so that you can call methods on that directly
[16:53:37] <vmx> kimundi: thanks, good idea
[16:54:37] <derek_c> I have a TcpStream.  I want to send something when receiving some client requests, or otherwise just listen for messages on the stream.  However since read from a TcpStream is blocking, I can think of no way to do it.  Any ideas?
[16:55:30] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:56:33] *** kimundi is now known as zz_kimundi
[16:57:15] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:57:52] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[16:58:41] <swgillespie> derek_c: i don't think you can do that using a single thread
[16:58:42] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[16:59:03] <derek_c> swgillespie: but even if I have two threads, how would I do it?  I can't clone TcpStream
[16:59:15] <achin> and TcpStream is not Sendable either
[16:59:38] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:59:48] <erickt1> jack: do you think rustpkg needs to support building things outside of either the current directory, or in the src directory? Should a crate like `src/foo/bar/baz` be disallowed?
[16:59:56] <derek_c> achin: not sure if we are talking about the same thing, but you can send a TcpStream over a channel
[17:00:25] <achin> you can? hmm, why did i think that was not possible
[17:00:46] <derek_c> achin: I thought it wasn't possible too, but it turned out that it can
[17:01:00] <derek_c> maybe it's even clonable... gonna give a try
[17:01:48] <derek_c> nope, not clonable
[17:02:01] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Ping timeout)
[17:02:15] <derek_c> so yeah, is that impossible?
[17:02:45] <achin> another related problem that i found was: you can't seperate the reader from the writer (for example, if you wanted to have 1 task do the blocking reads, and another take do the blocking writes)
[17:03:08] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:03:17] <derek_c> achin: yeah
[17:03:53] *** Quits: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[17:04:33] *** Quits: gwty (gwtypc@B0743F6E.59A8ED01.4654B817.IP) (Ping timeout)
[17:05:58] <achin> if you find solutions (or even a github issue outlining these problems) do let me know!
[17:06:03] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:06:54] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:07:52] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:08:13] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:09:16] <derek_c> achin: just found this: https://github.com/mozilla/rust/issues/11165
[17:09:50] <achin> ah ha!  excellent, that wasn't there last i looked
[17:10:45] * achin subscribes
[17:10:58] <TisButMe> Is there a way to get a ~-pointer from a &-pointer ?
[17:10:59] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:11:06] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[17:11:11] <TisButMe> without cloning
[17:11:18] <mitsuhiko> what's the intended way to use results composably?
[17:11:32] <mitsuhiko> say i am invoking an api that might fail, how do i properly propagate that error or my own one?
[17:11:34] <derek_c> TisButMe: that won't make sense. when you use & you are borrowing. you can't just suddenly own it
[17:11:43] <krdln> Do any of you know if there exist a parser generator for rust? Something like BNFC (http://bnfc.digitalgrammars.com/)?
[17:12:11] <TisButMe> Ok, then is there a way to get a owned pointer to self in a method ?
[17:12:28] <derek_c> achin: subscribed too :)
[17:12:34] <TisButMe> in the context of prepending to linked-list, it'd be useful
[17:12:54] <krdln> TisButMe: There are ~self methods (or they were)
[17:13:13] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:13:31] <derek_c> krdln: was just checking this. do `grep -rI "~self" .` in the Rust repo and you can see lots of them
[17:13:57] *** Joins: gwty (gwtypc@B0743F6E.59A8ED01.4654B817.IP)
[17:14:02] <derek_c> mitsuhiko: are you the guy who wrote Flask?
[17:14:26] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:14:31] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:14:51] <TisButMe> if I do ~self, the compiler tells me there is no method implemented of that name ;(
[17:15:23] <mitsuhiko> derek_c: yes
[17:15:39] <mitsuhiko> TisButMe: i don't think ~self works
[17:16:12] <derek_c> mitsuhiko: for your question, I'm not sure if there is an "intended way". if you do want the error to propagate intact, you would just return a Result as well, with the error being the same type
[17:16:24] <mitsuhiko> derek_c: that does not sound like it would scale well
[17:16:49] <derek_c> mitsuhiko: nope. you might want to look into condition if you want error that propagates
[17:16:58] <mitsuhiko> conditions are deprecated
[17:17:44] <TisButMe> So I can't do a prepend on nodes who own the next one in the list then ?
[17:18:01] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:18:11] <TisButMe> inside a method, at least
[17:18:38] <derek_c> mitsuhiko: yeah I guess error handling is something people are still trying to figure out. I personally like Go's way.  Maybe we should have an Error trait
[17:19:54] <mitsuhiko> was about to propose something like that
[17:20:37] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[17:20:43] <derek_c> mitsuhiko: so, are you so frustrated with Py3 that you decided to switch to Rust? :P
[17:21:25] *** Joins: ptc (Adium@moz-AED5AC84.nyc.biz.rr.com)
[17:21:31] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:21:53] <mitsuhiko> derek_c: i have been paying close attention to rust for the last two years :)
[17:22:27] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:22:28] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[17:22:44] *** Quits: gwty (gwtypc@B0743F6E.59A8ED01.4654B817.IP) (Ping timeout)
[17:23:17] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:24:15] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[17:24:46] <derek_c> mitsuhiko: nice! now I remember reading one of your posts a while ago that mentioned Rust
[17:25:10] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[17:25:22] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[17:25:43] <krdln> TisButMe: something like that works: https://gist.github.com/krdln/8271065 But I can't figure out how to make it without "=". ~mut self is not alowed.
[17:26:28] <ptc> Anyone know anything about rustboot + rust-core and linking with the rust-core .rlib ? Running into some problems with the i386-elf linker not recognizing the rlib file
[17:26:44] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:27:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:27:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:28:29] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:29:12] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:29:38] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:29:50] <mrmonday> is there a reason to_bytes(true) puts an extra byte at the end of a string?
[17:30:35] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:30:40] *** Quits: SiegeLord (sl@moz-3B527BD6.bstnma.fios.verizon.net) (Quit: Leaving)
[17:31:34] *** Joins: sanxiyn (tinuviel@91F6EFAC.7B45F757.6A273BE4.IP)
[17:31:58] *** Joins: tav (tav@moz-A8FFF7BF.range217-44.btcentralplus.com)
[17:32:19] *** Joins: gwty (gwtypc@B0743F6E.59A8ED01.4654B817.IP)
[17:32:45] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:33:03] <mitsuhiko> mrmonday: use x.as_bytes()
[17:34:35] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:36:22] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[17:37:50] <mitsuhiko> mrmonday: or to answer your question: to_bytes is an internal functionality
[17:37:56] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:37:59] <mitsuhiko> don't use it for converting things into bytes for yourself
[17:38:07] *** Quits: ptc (Adium@moz-AED5AC84.nyc.biz.rr.com) (Quit: Leaving.)
[17:38:15] <mitsuhiko> it's used for making things into hashes for instance
[17:39:01] *** Quits: tav (tav@moz-A8FFF7BF.range217-44.btcentralplus.com) (Quit: tav)
[17:40:40] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:40:43] <mrmonday> mitsuhiko: awesome, thank you :)
[17:41:34] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:41:47] *** Quits: vmx (vmx@moz-1E7B6EAF.pools.arcor-ip.net) (Quit: Leaving)
[17:42:21] *** Joins: ptc (Adium@moz-AED5AC84.nyc.biz.rr.com)
[17:42:44] <eevee> as soon as rust is stable enough it needs an IORCC  :)
[17:43:24] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[17:44:32] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:44:46] <krdln> I tried to use * for dereferencing tuple struct with one field, but compiler rejected it. Why this feature was removed. Is there any other way to get inner field expect of matching?
[17:45:26] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[17:45:32] <Ms2ger> Not sure if or why it was removed, but I always thought it was kind of a silly special case
[17:45:38] <Ms2ger> Matching is probably best
[17:45:46] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:46:18] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:46:32] <krdln> I had struct T(~Y), and was really confused, when applying * for T gave me Y, not ~Y as I expected
[17:46:36] <darthdeus> is there any plan for nightly builds on os x? it just took me 40 minutes to recompile again :(
[17:47:15] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Ping timeout)
[17:47:36] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[17:48:20] <krdln> Ms2ger: Is it possible to pattern match for self?
[17:48:30] <derek_c> darthdeus: make it async :)
[17:48:37] <Ms2ger> I would assume so?
[17:49:08] <darthdeus> derek_c: well i guess i should somehow :P since brew forces me to uninstall and then be idle while i recompile, which is kinda sad
[17:49:08] <Ms2ger> So the formal model for rust's type safety is called Patina?
[17:49:10] <Ms2ger> Well done
[17:49:18] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[17:49:40] <krdln> I don't see any examples for doing this..
[17:49:48] <derek_c> krdln: it is
[17:49:49] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:49:56] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[17:50:10] <TisButMe> krdln: thanks
[17:50:30] <Ms2ger> match self {
[17:50:33] <Ms2ger>     ...
[17:50:34] <Ms2ger> }
[17:50:39] <TisButMe> sad that ~mut doesn't wokr
[17:51:20] <derek_c> TisButMe: do `mut foo: ~SomeType`
[17:51:22] <krdln> Ms2ger: yeah, i know that. I was wondering if I could match self in argument of function, as any other argument .
[17:51:30] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:51:52] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:52:07] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[17:52:09] *** Quits: oberstet (quassel@moz-B7267634.dynamic.mnet-online.de) (Connection reset by peer)
[17:52:18] <TisButMe> derek_c, it was in the context of self. Was looking for ~mut self
[17:52:53] <derek_c> TisButMe: doesn't either `~mut self` or `mut ~self` work?
[17:53:05] <krdln> TisButMe: try wrapping ~List in other struct, and then you can make just &mut self for wrapper
[17:53:23] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Ping timeout)
[17:53:24] <krdln> derek_c: unfortunately, both are consuming
[17:53:26] *** Joins: sk (sk@89DF5F97.D147FDE0.33B96495.IP)
[17:53:42] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:53:59] <TisButMe> yeah, that's how dlist.rs in extra does it, but I wanted something simpler
[17:54:05] <derek_c> krdln: I might be missing some context. thought he was just asking for the syntax
[17:55:50] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[17:56:17] <TisButMe> mut ~self works, but then I can't do *self = Cons(x, self), because self is consumed building the Cons
[17:56:53] <TisButMe> So unless you wrap in a struct, as suggested by krdin, you can't do in place prepend
[17:56:59] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:57:15] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[17:57:24] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[17:58:28] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[17:58:28] *** ChanServ sets mode: +o jdm
[18:01:14] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[18:01:14] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:01:34] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[18:05:01] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:07:58] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:08:24] <krdln> Could somebody help me with this code? https://gist.github.com/krdln/8271696
[18:10:34] *** Quits: gwty (gwtypc@B0743F6E.59A8ED01.4654B817.IP) (Ping timeout)
[18:11:06] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Ping timeout)
[18:11:58] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:12:04] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[18:12:08] <jdm> krdln: probably something like let old = *self
[18:12:22] *** Joins: nrc (ncameron@7BE24E90.A5032A01.3CFC199D.IP)
[18:12:28] <jdm> er, **self
[18:12:31] <krdln> jdm: stars for dereferencing 1-tuple structs don't work anymore.
[18:12:39] *** Joins: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net)
[18:12:55] <jdm> krdln: are you sure? I thought we just got rid of auto-dereferencing, not dereferencing entirely
[18:13:01] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:13:13] <krdln> error: single-field tuple-structs can no longer be dereferenced
[18:13:15] *** Joins: gwty (gwtypc@697200D7.798C73B5.F64220F6.IP)
[18:13:23] <jdm> huh
[18:14:19] <krdln> Yup, I was surprised too. And somebody hinted me to use pattern matching.
[18:14:37] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:14:44] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[18:14:45] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:14:49] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:15:08] <jdm> krdln: does &List(old) work?
[18:15:56] <krdln> error: cannot move out of dereference of & pointer
[18:16:33] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:17:53] <sfackler> krdln: prepend is a bit of a pain to do correctly
[18:18:07] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:18:47] <TisButMe> I tried like this https://gist.github.com/TisButMe/8271825 but "type `List` does not implement any method in scope named `prepend`"
[18:18:48] *** Joins: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP)
[18:19:07] <krdln> sfackler: i thought it will be really simple, oneline function.
[18:19:07] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[18:19:27] <TisButMe> I hoped so too :(
[18:19:48] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[18:20:01] <sfackler> krdln: this should work https://gist.github.com/sfackler/8271819
[18:21:14] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:21:55] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[18:22:10] <krdln> TisButMe: Because li is & mut li, not ~ li. ~self methods work only for ~mut T or ~T types.
[18:22:26] <sfackler> krdln: it should work now
[18:22:43] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[18:22:43] *** ChanServ sets mode: +o tjc
[18:22:46] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[18:22:53] *** Quits: derek_c (derek@6711C3E1.3B8FFE11.DD630FEE.IP) (Ping timeout)
[18:23:14] <sfackler> you can probably cut a line off with util::replace
[18:24:17] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:25:11] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[18:25:25] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[18:25:51] <sfackler> there
[18:25:55] <sfackler> https://gist.github.com/sfackler/8271819
[18:26:40] <krdln> sfackler: Thanks, but still, these util functions look like ugly workarounds...
[18:27:12] <steveklabnik> so, concurrency models. i forget, is 1:1 or N:M default now?
[18:27:50] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[18:28:05] <sfackler> krdln: they just abstract the inherent unsafety in doing swaps like that
[18:28:09] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:28:27] <dmz> steveklabnik: (I'm not the right person to answer, but I'll try) it's N:M default now until we get 1:1 working correctly
[18:28:42] <steveklabnik> cool. is that expected for 0.9?
[18:29:05] <dmz> I don't think so
[18:29:20] <steveklabnik> .... that it wont be ready, yes?
[18:29:45] <nrc> krdln: how does a person keep track of these kind of changes - I saw nothing about it on the mailing list, but I don't want to get email notification for every single github comment?
[18:29:51] <dmz> I don't think it's going to be done for 0.9
[18:29:54] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:30:03] <steveklabnik> dmz: thanks, that's what I thought
[18:30:08] <luz> you can turn off email notifications from github
[18:30:11] <steveklabnik> nrc: there was a HUUUUUUUUGE discussion on the ML about this
[18:30:20] <steveklabnik> oh wait
[18:30:25] <steveklabnik> you mean something else, not what i'm talking about, sorry
[18:30:56] <krdln> nrc: I have no idea, I'm not even subscribing ML.
[18:31:22] <dmz> my source of info was the last rust meetup, where steveklabnik also participated btw...
[18:31:46] <steveklabnik> yup, i just wanted to double check
[18:31:53] <steveklabnik> i just woke up, and am hacking on rust for rubyists
[18:31:58] <steveklabnik> gotta get it ready for 0.9
[18:31:59] <nrc> steveklabnik: I meant not using * for single field tuples. But also other things, such as the @mut stuff
[18:32:09] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:32:10] <steveklabnik> nrc: you may want to read the subreddit
[18:32:16] <steveklabnik> or, This Week in Rust
[18:32:19] <steveklabnik> which is also very useful
[18:32:21] <dmz> exactly
[18:32:34] <dmz> thanks cmr
[18:32:36] <steveklabnik> removing @mut was CERTAINLY on reddit
[18:32:36] <nrc> steveklabnik: cool, sounds useful, thanks
[18:32:52] <krdln> steveklabnik: I can almost bet that removal of * wasn't nor on reddit, nor on TWIR
[18:32:59] *** Joins: sk_ (sk@89DF5F97.D147FDE0.33B96495.IP)
[18:33:02] *** Quits: sk_ (sk@89DF5F97.D147FDE0.33B96495.IP) (Connection reset by peer)
[18:33:11] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:33:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:33:18] <alan_andrade> Why is reddit the source of what's going on ?
[18:33:30] <luz> it is?
[18:33:31] <nrc> oh yes, third from the top
[18:33:37] <dmz> does anyone know if we have a function to compare two slices of orderable stuff?
[18:33:39] * nrc bookmarks r/rust
[18:33:42] <alan_andrade> I ask because I don't feel that connected to that website
[18:33:44] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:34:05] <krdln> I thought that TWIR covers all breaking changes.
[18:34:20] <diverse> alan_andrade: TWiR is more of a source of what is going on than reddit
[18:34:50] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[18:35:07] <alan_andrade> @diverse What's that ?
[18:35:26] <diverse> alan_andrade: http://cmr.github.io/
[18:35:27] <luz> this week in rust (http://cmr.github.io/)
[18:35:35] <alan_andrade> ahhhh, got it!
[18:36:05] <luz> :(
[18:36:51] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:37:17] <mitsuhiko> krdln: * is gone?
[18:37:47] <Ms2ger> * as a way to dereference single-variant enums
[18:37:48] <steveklabnik> alan_andrade: it's just one of the earlier communities that popped up
[18:37:50] <Ms2ger> Apparently
[18:37:51] <krdln> mitsuhiko: Yes, meant in context of dereferencing single field tuple structs.
[18:37:54] <dmz> dmz: nevermind, found it: std::cmp::order::*
[18:37:57] <mitsuhiko> aaaah
[18:37:57] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[18:37:58] <steveklabnik> i hate reddit too, but what are you gonna do?
[18:38:10] * mitsuhiko calms down
[18:38:19] <alan_andrade> use it I guess :)
[18:38:35] <mitsuhiko> reddit works well for small communities
[18:38:47] <mitsuhiko> it just gets useless once it grows
[18:38:55] <Ms2ger> But funny pictures!
[18:39:06] <pyon> I have an owned vector of length, say, 10. Can I simultaneously take two mutable slices of the first 5 elements and the last 5 elements, respectively?
[18:39:24] <Ms2ger> I believe yes, but I always forget what it's called
[18:39:31] <TisButMe> So here (https://gist.github.com/sfackler/8271819), you use util::replace to basically extract a ~pointer from a &mut pointer, right ? Wouldn't it be usefull to have a specific util::extract() or something that does this without the useless-in-this-case replacing ?
[18:39:46] *** Quits: sellout (Adium@moz-2ECB0660.hlrn.qwest.net) (Ping timeout)
[18:40:18] <Ms2ger> fn mut_split_at(self, mid: uint) -> (&'a mut [T], &'a mut [T]);
[18:40:23] <Ms2ger> pyon, ^
[18:40:45] <mitsuhiko> TisButMe: replace is just swap
[18:40:51] <pyon> Ms2ger: thanks!
[18:41:04] <Ms2ger> Np
[18:41:18] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[18:41:20] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:41:28] *** Joins: sellout (Adium@moz-2ECB0660.hlrn.qwest.net)
[18:42:32] *** Quits: canhtak (canhtak@moz-7307D7CE.wl.t.ulaval.ca) (Quit: canhtak)
[18:42:37] *** Quits: ptc (Adium@moz-AED5AC84.nyc.biz.rr.com) (Quit: Leaving.)
[18:43:25] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[18:43:31] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[18:43:38] <TisButMe> mitsuhiko: yep, i've looked at the code, but the way it's used in the gist by sfackler is just a way to gain ownership of a &mut thing.
[18:44:46] <TisButMe> If I understood right
[18:44:57] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:45:41] <mitsuhiko> nothing there is owned
[18:45:45] <mitsuhiko> (except new)
[18:45:57] <mitsuhiko> but new is a new box
[18:45:59] *** Joins: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net)
[18:46:19] <mitsuhiko> because it's &mut self you can just override it
[18:46:20] <mitsuhiko> which it does
[18:46:30] <mitsuhiko> you don't need to own it to modify it
[18:46:32] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:47:25] <TisButMe> after the first line, we have new = ~old-value-of-self though, right ?
[18:48:19] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[18:48:21] <krdln> TisButMe: but it's creating new ~box, wrapping old self. Not making & suddenly owned.
[18:48:26] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[18:48:42] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[18:48:51] *** Joins: rca (rcatolino@moz-F053E700.adsl.proxad.net)
[18:48:56] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:49:31] <TisButMe> yeah, I get that but we now have a ~pointer to a place in memory we designated with a &mut pointer though, right ?
[18:50:10] <TisButMe> without any copies happening
[18:50:35] <krdln> TisButMe: I think it's new place of memory, somewhere on heap, not somewhere in self.
[18:52:03] <TisButMe> well, util::replace says there is no copying happening, so we must have the new pointer point to the place self used to point, no ?
[18:52:28] <krdln> TisButMe: copying, no. moving, yes.
[18:52:39] <TisButMe> oh, ok
[18:53:01] <krdln> I'm not perfect in Rust, if I'm not right, please, somebody correct me.
[18:53:36] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[18:53:53] <mpiechotka> Hi. Is it possible to convert closure to C function pointer (or pair function pointer + data pointer)?
[18:54:07] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:54:14] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:54:26] <eddyb> mpiechotka: a closure is a fat pointer, but I'm not sure right now if it's two pointers or three
[18:54:34] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:55:01] <nielsle> I added a pull request. so have to do something, or will it be found automatically? https://github.com/mozilla/rust/pull/11327
[18:55:06] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:55:12] <eddyb> mpiechotka: you can always pass &|Args|->Ret, which is just one pointer (but there's a little extra indirection when calling it)
[18:55:49] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[18:55:59] <mpiechotka> eddyb: Thanks
[18:56:04] <mpiechotka> Let me try
[18:56:18] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[18:57:20] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[18:57:55] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[18:58:11] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[18:58:32] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[18:59:15] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:00:04] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Ping timeout)
[19:00:28] <bstrie> nielsle: it will be found eventually. but if you think it's important that it get in soon, you can pester someone
[19:01:01] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[19:01:08] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[19:01:14] <nielsle> Thanks. Then I will not pester :-)
[19:01:19] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:02:18] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[19:02:42] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[19:02:59] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:03:32] <steveklabnik> is there no convenient 'read a single line from stdin' anymore? seems like read_line went away, just read left
[19:03:50] <TisButMe> use a bufferedReader
[19:03:53] <alan_andrade> read.lines() ?
[19:04:05] <steveklabnik> TisButMe: ah, thanks
[19:04:30] <krdln> sfackler: I've finally understood what the problem was. Thanks again.
[19:06:10] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:08:35] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (No route to host)
[19:09:33] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[19:10:54] *** Quits: TisButMe (Mibbit@moz-2B5AC66A.w92-137.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:10:56] <krdln> I think that (assuming &mut self): *self = foo(self); should be accepted by the compiler, since there is no risk of unsafety here.
[19:11:37] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Ping timeout)
[19:11:41] <eddyb> krdln: yes there is
[19:12:08] <steveklabnik> do we have a chomp?
[19:12:13] *** Joins: TisButMe (Mibbit@moz-2B5AC66A.w92-137.abo.wanadoo.fr)
[19:12:18] <steveklabnik> my BufferedReader is including the newline
[19:12:30] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[19:12:35] <eddyb> steveklabnik: .slice_to(.len()-1)?
[19:12:48] *** Quits: TisButMe (Mibbit@moz-2B5AC66A.w92-137.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:13:13] <krdln> eddyb: i don't see how it could be
[19:13:22] <eddyb> krdln: although... there's an easy way to make it safe. I think. I hope it doesn't break optimizations. basically let tmp = foo(self); *self = tmp; should be memory safe
[19:13:31] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:13:56] <steveklabnik> eddyb: ugh. all i'm trying to do is read an int from stdin, is there something easier?
[19:14:04] *** Joins: tav (tav@moz-A8FFF7BF.range217-44.btcentralplus.com)
[19:14:09] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:14:31] <eddyb> steveklabnik: according to my friend's pain trying to do a hangman game in the console... nope
[19:14:37] <steveklabnik> :/
[19:14:48] <steveklabnik> the old read lines didn tinclude the newline
[19:14:51] <steveklabnik> so convert to int just worked
[19:14:53] <steveklabnik> bummer
[19:14:56] *** Joins: fabiand (fabiand@moz-B75A0C0F.adsl.alicedsl.de)
[19:15:12] <eddyb> krdln: if you return a structure that doesn't fit in a register, what happens is a pointer is passed and creating the structure just writes to the pointer
[19:15:22] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:15:29] <eddyb> steveklabnik: there's a trim but that creates a new owned string AFAIK
[19:15:58] <steveklabnik> https://www.irccloud.com/pastebin/3H6RBta6
[19:16:02] <steveklabnik> ^^^ :/
[19:16:41] <krdln> eddyb: I meant *self = foo(*self).
[19:17:08] <eddyb> krdln: so fn foo(p: &Vec2) -> Vec2 {Vec2 {x: p.x+p.y, y: p.x+p.y}} would give you different p.x and p.y
[19:17:09] <Matthias247> steveklabnik: I think your nothing would then also need a newline :)
[19:17:25] <krdln> eddyb: Somehow `let mut x = complicated_structure(); x = x;` workds
[19:17:29] <steveklabnik> Matthias247: at that point it's gonna fail anyway, so it doesnt matter
[19:17:52] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:17:53] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[19:17:58] <krdln> eddyb: My mistake, I meant foo taking argument by value. and *self = foo(*self)
[19:18:27] <eddyb> krdln: that's safe, if Self doesn't move by default
[19:20:04] <eddyb> krdln: I think the problem is decoupling the parts of an ExprAssign
[19:20:07] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[19:21:08] <eddyb> because lhs = rhs; is evaluated like let lval = lhs; let rval = rhs; lval = rval; do mutable borrows poison entire function scopes? I can't remember
[19:21:19] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[19:22:51] <bjustin> what happened to Either?
[19:23:38] <eddyb> ether took it
[19:23:51] <eddyb> (I totally ruined that pun)
[19:23:58] *** Joins: TisButMe (Mibbit@moz-2B5AC66A.w92-137.abo.wanadoo.fr)
[19:24:01] <rca> bjustin: https://github.com/mozilla/rust/pull/11149
[19:24:14] <krdln> eddyb: unfortunately, I'm not familiar with internals of the compiler. I wonder if making that assignment compile have to cause massive rewrite of borrow checker.
[19:24:44] <eddyb> krdln: it depends. I'm hearing we're getting prolonged lifetimes (without adding locals all over the place)
[19:24:55] *** Quits: StarLight (StarLight@moz-3F3F0E69.dynamic.avangarddsl.ru) (Ping timeout)
[19:25:06] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[19:25:25] <eddyb> cmr: ^^ remember my crazy VBE emulator thing? I had to split every line into its own function and use a thousand locals to make it compile. that might be fixed now :D
[19:25:54] <eddyb> bjustin: it's no more. you should use your enum if you have two variants. Left and Right are so non-descript
[19:26:08] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[19:26:34] <bjustin> thanks
[19:26:47] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[19:27:05] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:27:13] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[19:27:21] <krdln> eddyb: it doesn't compile even in unsafe block, so I don't think it's easy to fix
[19:27:41] <eddyb> krdln: unsafe is for other things. it could be trivial to fix, I don't really know
[19:28:02] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[19:28:09] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:29:07] *** Joins: StarLight (StarLight@moz-7446771B.dynamic.avangarddsl.ru)
[19:30:24] <steveklabnik> bam: https://github.com/steveklabnik/rust_for_rubyists/commit/ae27bcfc349450e3491e420c71f93357fb4c0f6d
[19:32:13] <krdln> eddyb: Do you think that creating in std::util function fn no_idea_for_name<T>(&mut T, |T| -> T) would be useful?
[19:32:40] <eddyb> I think Option<T> has such a method
[19:32:55] <eddyb> krdln: you could actually implement that a method on anything
[19:33:11] <eddyb> x.mutate(|x| x.foo())
[19:33:30] <eddyb> it looks a bit hacky IMO
[19:34:57] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:35:22] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[19:35:30] <krdln> eddyb: I think it's less hacky that current solution to the problem (body of function prepend https://gist.github.com/sfackler/8271819), which additionaly assumes type has some default value
[19:35:57] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:36:13] <eddyb> oooh, that is interesting
[19:36:35] <eddyb> krdln: List moves by default. that's important fact
[19:36:41] *** Quits: jix (jix@moz-D969BFFC.de) (Client exited)
[19:36:46] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[19:36:54] <eddyb> replace looks like a swap with a value
[19:37:38] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[19:38:10] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:38:31] <eddyb> krdln: what you proposed isn't memory-safe
[19:38:59] <TisButMe> is there a function somewhere to check which enum-value is taken by an enum-type ?
[19:39:20] <eddyb> erm, what?
[19:39:31] <eddyb> krdln: (because the assumption, that Self - List in that case - doesn't move by default, is not satisfied)
[19:39:37] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[19:39:44] <TisButMe> yeah, that's not really clear :(
[19:39:49] *** Joins: jix (jix@moz-D969BFFC.de)
[19:39:53] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:40:24] <krdln> TisButMe: as uint?
[19:40:54] <TisButMe> Say we have enum foo{Test, Test2}. If we have a var of type foo, can I check if it's Test or Test2 without using pattern-matching ?
[19:41:07] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[19:41:08] <TisButMe> kindof like is_some or is_none in Option
[19:41:11] <bstrie> TisButMe: nope, that's what pattern matching is for
[19:41:13] *** Joins: matematikaadit (quassel@F3A54075.3F4576F5.907D3F95.IP)
[19:41:18] <eddyb> krdln: you can't move out of the dereference of a &T/&mut T borrowed pointer. so it would have to be an unsafe function. really, the replace trick is the best you can do
[19:41:32] <bstrie> TisButMe: I guess you could compare it for equality with another enum
[19:42:44] <bstrie> nope, looks like you can't compare an enum for equality
[19:42:48] <bstrie> just use pattern matching :P
[19:42:54] <TisButMe> that's sad
[19:43:25] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:43:27] <krdln> TisButMe: Why not #[deriving(Eq)]?
[19:43:32] <eddyb> bstrie: we need non-same-type comparisons
[19:43:45] <TisButMe> Am I the only one to usually stumble upon situation where I kind-of need to use match inside match ?
[19:43:58] <eddyb> nope. but you can nest patterns if you want
[19:44:00] <TisButMe> cause that looks ugly
[19:44:10] <TisButMe> yeah, I know, but I don't like it :)
[19:45:10] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:45:41] <eddyb> TisButMe: wait, do you have values in those variants? or are they C-like?
[19:46:15] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[19:47:03] <eddyb> bstrie: technically, enum Foo {Bar(A), Baz(B)}; fn is_bar(x: &Foo) -> bool {x == Bar} should be close to trivial to derive, if Eq allowed us to compare different types
[19:47:16] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:48:09] <eddyb> bstrie: because you can compare the ctor (which is a function) by reference
[19:48:21] *** jorendorff_away is now known as jorendorff
[19:48:26] <krdln> eddyb: I understand, that I can't move out of &T, but I just don't see unsafety in my case. (Talking about .transmute still). Could you give me example?
[19:48:33] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:48:59] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[19:49:01] <eddyb> krdln: if you fail inside the closure, you get a double-free
[19:49:30] <krdln> eddyb: Now i'm convinced :)
[19:50:16] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:50:18] <eddyb> the cleanup system is getting better, but I doubt it will ever support what you want without some trickery
[19:50:44] *** Quits: sanxiyn (tinuviel@91F6EFAC.7B45F757.6A273BE4.IP) (Ping timeout)
[19:51:28] <eddyb> replacing with Nil does the same thing as moving out of an lvalue (now), i.e. zeroing pointers/drop flags
[19:52:08] <krdln> eddyb: What if the type doesn't have some „Nil”?
[19:52:22] <eddyb> zeroing works :P
[19:52:42] <eddyb> but it's an ugly hack and we're getting rid of it AFAIK
[19:53:37] <krdln> that's good to hear. Thanks for clarifying things to me.
[19:53:51] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[19:53:53] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[19:55:09] <pyon> What exactly do the traits Send and Freeze mean?
[19:55:24] <eddyb> Send means it's safe to move between tasks/threads AFAIK
[19:55:35] <pyon> And Freeze?
[19:55:43] <eddyb> Freeze means deeply immutable *in an immutable slot*
[19:56:14] <eddyb> RefCell/Cell aren't Freeze because they allow mutation from immutable slots
[19:56:40] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[19:57:15] <pyon> Ah.
[19:57:39] <eddyb> @mut T isn't Freeze earlier, but it should gone now/soon
[19:57:48] <eddyb> (yay no more dynamic borrow nonsense in the language)
[19:58:08] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:58:32] * pyon does not use @. :-)
[20:00:37] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:01:48] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Ping timeout)
[20:03:54] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:04:12] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:04:14] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[20:04:54] *** Quits: gwty (gwtypc@697200D7.798C73B5.F64220F6.IP) (Ping timeout)
[20:05:31] *** Quits: nrc (ncameron@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 29.0a1/20131223030203])
[20:05:33] *** Joins: Twisol (Twisol@moz-17948F30.socal.res.rr.com)
[20:06:04] *** Joins: nrc|Christmas (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:06:10] *** nrc|Christmas is now known as nrc
[20:06:27] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:06:28] *** Joins: gwty (gwtypc@79D1FE8E.FCD15B21.137C914F.IP)
[20:07:19] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[20:08:41] <dmz> how do I fix "missing documentation for a module"?
[20:09:35] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[20:09:45] <steveklabnik> write some!
[20:09:47] <steveklabnik> :)
[20:10:15] <dmz> lib.rs:1:1: 1:1 error: missing documentation for a module lib.rs:1 #[crate_id = "compress"];
[20:10:16] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:10:26] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Ping timeout)
[20:10:30] <dmz> where exactly does it expect documentation, and in what format?
[20:10:49] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[20:10:58] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[20:11:57] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:12:17] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:12:42] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[20:13:14] <glaebhoerl> yo. is there any way to make rustc emit all errors it finds while compiling a given crate, instead of only the first?
[20:13:36] <glaebhoerl> (or is that already supposed to happen? in which case the question becomes why it's not)
[20:13:45] <eddyb> glaebhoerl: depends on the kind of error
[20:14:04] <glaebhoerl> eddyb: failed to find implementation of trait errors :)
[20:14:12] <eddyb> some errors are fatal even though they don't need to be, feel free to fix that
[20:14:25] <eddyb> glaebhoerl: you might need to run with -Z time-passes, I don't know where that one is
[20:14:30] <steveklabnik> dmz unsure, I was mostly being a smartass
[20:14:52] <diverse> since a certain someone, loves writing
[20:15:55] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:16:26] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[20:16:59] <glaebhoerl> eddyb: hmm? I don't see how time measurements pertain, so I'm guessing the reason that would be useful is to see which passes exist & precede the error?
[20:17:18] <diverse> dmz: have you tried using doc comments or something?
[20:17:53] <dmz> diverse: I'm hacking rust-compress, and it has this "#[deny(missing_doc)];" in the crate
[20:18:15] <dmz> when compiling it as a lib it goes fine, but when I compile it as executable with --cfg=test it complains about the docs somehow
[20:18:18] <eddyb> glaebhoerl: each pass pretty much exits after printing errors. a fatal should still show you the pass it was in, afterwards
[20:19:01] <glaebhoerl> eddyb: I see, thanks
[20:19:53] *** Quits: matematikaadit (quassel@F3A54075.3F4576F5.907D3F95.IP) (Client exited)
[20:20:09] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:20:17] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[20:20:43] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:20:44] <glaebhoerl> unfortunately (and partly due to my slow hardware) making that change and re-bootstrapping would not be an optimization over just repeatedly saying `make` to iterate over the errors, but noted as a potential future project
[20:22:08] *** Quits: rce (henryhei@moz-4C25427B.cs.helsinki.fi) (Ping timeout)
[20:22:17] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[20:22:17] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[20:22:21] <eddyb> oh, type checking... that should be able to ignore such errors
[20:23:11] <diverse> dmz: does using '///' comments somewhere temporarily help disable the error?
[20:23:12] <pyon> Why can't generic struct parameters have constraints?
[20:23:34] <pyon> pub struct Foo<T : Bar> { ... }
[20:23:43] <eddyb> pyon: you put constraints on functions working with those structures
[20:23:55] <pyon> Ah.
[20:24:17] <diverse> good to know
[20:24:25] <eddyb> and if you hide everything properly, someone can still have the type somewhere but it's useless
[20:24:44] <eddyb> which may not be the best thing ever. I don't know. you would have to repeat the bounds anyway
[20:24:56] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[20:25:02] *** Quits: japaric (japaric@5F207A99.A347E168.F4D5766F.IP) (Ping timeout)
[20:25:23] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:25:23] <eddyb> glaebhoerl: typeck usually can keep going and propagate "type errors" through inference, so it can touch as much code as possible
[20:25:29] *** Joins: rce (henryhei@moz-4C25427B.cs.helsinki.fi)
[20:25:38] *** Joins: magg (magg@5403937D.BE86B7D4.3D0AE249.IP)
[20:26:09] *** Joins: japaric (japaric@5F207A99.A347E168.F4D5766F.IP)
[20:27:56] <magg> what can i use to have a dictionary like data structure?
[20:28:10] <eddyb> glaebhoerl: it's pushing vtables in an array, which is hard (but not impossible) to replace with something less fatal. maybe we should have per-function "fatal"s
[20:28:37] <eddyb> magg: HashTable
[20:28:42] <eddyb> magg: err, HashMap
[20:28:44] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:29:30] <dmz> diverse: trying to add those, unfortunately the error message doesn't say where exactly it's missing :(
[20:29:31] *** Quits: rce (henryhei@moz-4C25427B.cs.helsinki.fi) (Ping timeout)
[20:29:44] <magg> eddyb: i thought rust had only structs, tuples and enums... according to the tutorial
[20:29:56] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[20:30:16] <eddyb> magg: of course. HashMap is a structure
[20:30:31] <magg> eddy cool thanks
[20:30:31] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:31:07] <glaebhoerl> eddyb: dunno anything about the implementation, but it doesn't seem to me like finding the impl for a type+trait provides any information that would be necessary for the type checking to continue (since the signatures of impl fns are just instantiations of the ones in the trait)
[20:31:24] <glaebhoerl> and the evidence/vtable is necessary only for codegen
[20:31:31] *** Joins: depp (depp@500BAFC1.53465674.3C05E6CB.IP)
[20:31:41] <eddyb> glaebhoerl: it has no way to gracefully stop working on the current function
[20:32:29] <eddyb> magg: http://static.rust-lang.org/doc/master/std/hashmap/struct.HashMap.html
[20:32:36] <glaebhoerl> eddyb: couldn't it keep working on the current function while pretending the trait bound was satisfied, even if it wasn't?
[20:32:43] *** Joins: rce (henryhei@moz-4C25427B.cs.helsinki.fi)
[20:32:56] <magg> eddyb: thx, i was looking for that
[20:32:56] <glaebhoerl> (again, from a theoretical perspective, but if you point me to the relevant code I'll look at it :)
[20:33:26] <eddyb> glaebhoerl: src/librustc/middle/typeck/check/vtable.rs:
[20:33:32] <eddyb> err, :154
[20:33:42] *** Quits: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com) (Quit: ZNC - http://znc.sourceforge.net)
[20:33:54] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:34:03] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[20:34:18] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:34:38] *** jorendorff is now known as jorendorff_away
[20:35:06] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[20:35:16] <glaebhoerl> ty
[20:36:46] *** Quits: sk (sk@89DF5F97.D147FDE0.33B96495.IP) (Quit: Leaving)
[20:37:32] <depp> quick question, I want to permute ~[~[f32]] and get ~[&[f32]]... I know permutation.map(|i| data[*i]) is wrong, but I don't know how to fix it
[20:38:08] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:38:17] *** Quits: jackneill (jackneill@moz-E50979D7.pool.digikabel.hu) (Ping timeout)
[20:38:26] <eddyb> depp: data[*i].as_slice(), maybe?
[20:39:21] <krdln> Tried asking before, but with no response. Is there any parser generator for Rust? Sth like BNFC (http://bnfc.digitalgrammars.com/)
[20:39:44] <steveklabnik> krdln: someone had ragel support before
[20:39:47] <steveklabnik> not sure if it's up to date
[20:40:35] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:41:25] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Client exited)
[20:41:42] <depp> eddyb: Thanks, that did it.
[20:41:50] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:41:51] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[20:41:57] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[20:43:39] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Ping timeout)
[20:44:14] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[20:44:28] <krdln> steveklabnik: ragel seems to be little bit too low level and too all-purpose. I just want to try Rust in writing interpreter for a toy language.
[20:45:03] <depp> krdln: Ragel is easier to use than lex-based parsers, IMO
[20:45:42] <mpiechotka> eddyb: It either does not work or I don't know how to use it (the ABI is mismatched as such function is not extern "C")
[20:46:20] <depp> mpiechotka: eddyb signed off
[20:46:44] <krdln> maybe I give it a try, but lex isn't what I'm looking for too
[20:46:56] <depp> krdln: What are you looking for then?
[20:47:07] <mpiechotka> depp: Thanks
[20:47:24] <Matthias247> Why doesn't CString provide a function which returns the raw pointer of the contained string? For the case that I want to send the string trough FFI but don't want to give up the ownership. Unwrap returns the raw pointer but will create a mem leak
[20:47:34] <krdln> something like BNFC :D I give grammar, it gives me parser, that creates elegant rustic enum-based AST
[20:47:57] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:48:01] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[20:48:08] <depp> krdln: yeah, that was the pipe dream of the 60s until people realized it wasn't a good way of writing parsers
[20:48:14] <TisButMe> is there a way to upgrade a &pointer to &mut-pointer ?
[20:48:23] <depp> krdln: something like lex + yacc is what you want
[20:49:10] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[20:49:45] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[20:49:49] <krdln> depp: I know that flexibility is good to have, but sometimes I need just to quickly parse c-like expressions and some additional work is just useless
[20:50:42] <depp> krdln: Using separate lexer + parser is actually less work.  Surprising, I know.  But it's the easiest known way to write a parser.
[20:51:28] <krdln> depp: Thats really surprising, I'll give it a try
[20:51:32] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[20:51:44] <krdln> (if I find ragel backend for rust)
[20:51:54] *** Quits: gwty (gwtypc@79D1FE8E.FCD15B21.137C914F.IP) (Ping timeout)
[20:52:29] <phil_> hey guys quick question about crate_id
[20:52:35] <phil_> (because i cant find any docs)
[20:52:58] <phil_> previously with link you could set uuid and url
[20:53:04] <phil_> any way to do this with crate_id?
[20:53:32] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[20:54:28] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:54:44] <krdln> TisButMe: I don't think so. Where would you need that?
[20:55:08] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[20:55:24] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[20:55:39] *** Joins: wippler (Mibbit@moz-F85E28D0.gae.googleusercontent.com)
[20:56:12] *** Quits: wippler (Mibbit@moz-F85E28D0.gae.googleusercontent.com) (Quit: http://www.mibbit.com ajax IRC Client)
[20:57:17] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[20:57:47] <nrc> what is a transmute call? I see a reference in nmatsakis's blog post, but not in the language reference
[20:57:57] *** Quits: pda (pda@134B5A09.C82F6435.20F09BA6.IP) (Quit: WeeChat 0.4.1)
[20:58:25] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[20:58:41] <ercxx> Florob: ping
[20:58:42] <steveklabnik> nrc: http://static.rust-lang.org/doc/master/std/cast/fn.transmute.html
[20:59:39] <lexs> is it not possible to have a pub extern fn in a non-crate root? I'm getting linker errors, adding a forwarding extern function in the crate root works.
[20:59:41] <nrc> steveklabnik: thanks!
[20:59:44] <steveklabnik> phil_: https://github.com/mozilla/rust/blob/f37b746699c377bce4a983834efe5162081a61dd/src/librustpkg/crate_id.rs
[21:00:00] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:00:20] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[21:00:34] <steveklabnik> phil_: so basically, no.
[21:00:44] <phil_> okay
[21:01:01] <phil_> thanks for the help :)
[21:01:08] <phil_> i had found that about 3 mins ago
[21:01:10] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:01:14] <Florob> ercxx, pong
[21:02:08] <ercxx> I was looking at RustyXML, is there a way of doing a string to Element in there somewhere?
[21:02:23] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[21:02:43] <ercxx> I mean, the whole file?
[21:03:14] <dmz> acrichto: basic BWT is done as promised, your rust-compress got its first PR ;)
[21:03:35] <dmz> (changed my name to dmz to avoid conflict with 'kvanb')
[21:04:06] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:04:22] <Florob> ercxx, choose one. A string, or a whole file? ;)
[21:04:24] <ercxx> Florob: There is. Thank you.
[21:05:00] *** Quits: fabiand (fabiand@moz-B75A0C0F.adsl.alicedsl.de) (Quit: Verlassend)
[21:05:02] <ercxx> Florob: I got it. I was looking at the xmldemo, and tests. There's from_str() in the lib.rs.
[21:05:37] *** Joins: mib_6hzr4o (Mibbit@moz-4DB40168.hsd1.ca.comcast.net)
[21:06:10] *** Joins: alexalex (Mibbit@moz-EBF61071.bredband.comhem.se)
[21:07:23] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:08:50] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[21:13:11] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:13:47] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:15:24] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:17:03] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:18:33] <Matthias247> still trying to get a *i8 from a CString without unwrapping it
[21:19:25] <mpiechotka> How to make it compile and work (https://gist.github.com/uzytkownik/8274049)? I'm not sure why &* does not return mutable pointer.
[21:19:47] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:19:53] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:20:41] <mpiechotka> Ok. Sorry &mut is correct operator
[21:20:51] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:20:51] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:21:24] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[21:21:41] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Client exited)
[21:23:07] *** Joins: gwty (gwtypc@23544240.10600D12.137C914F.IP)
[21:23:24] <krdln> Matthias247: let ptr = unsafe { cstring.with_ref(|ptr| ptr as *u8) } ?
[21:23:59] <Matthias247> krdln: Saw that in the documentation. But 1 need to convert 4 CStrings to *i8 :)
[21:24:13] <Matthias247> Because my C Func takes more than 1 string
[21:24:26] <Matthias247> ok. I could make 4 temp variables
[21:24:44] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:25:29] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:26:24] <krdln> Matthias247: so just cstring.with_ref(|ptr| ptr as *i8), temp variables are unnecessary, I think.
[21:27:37] <Matthias247> I need to call a func which is like func(a: *i8, b: *i8, c: *i8, d: *i8) And the close transformes only one parameter
[21:27:44] <Matthias247> -close +closure
[21:28:28] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:28:36] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[21:29:48] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[21:30:34] <Matthias247> ok, with temporary variables it works. But very verbose
[21:30:51] <Matthias247> let port_cstr = port.to_c_str(); let mut port_addr: *i8 = 0 as *i8; port_cstr.with_ref(|ptr| {port_addr = ptr;});
[21:31:17] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:31:54] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[21:31:56] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:32:30] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[21:33:39] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:34:14] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[21:34:24] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[21:34:39] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[21:34:48] *** Quits: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[21:35:24] *** Quits: pyon (user@BCC41BDF.6C782DF8.1C8C8CE9.IP) (Quit: brb)
[21:35:29] *** Joins: atomical (atomical@moz-7BDC7D9E.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[21:35:54] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[21:35:54] *** ChanServ sets mode: +ao brson brson
[21:37:08] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:37:25] <krdln> Matthias247: Why you need port_addr variable? And sorry, you don't need as *i8, just cstr.with_ref(|x|x)
[21:37:34] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Quit: leaving)
[21:38:05] <Matthias247> krdln: because it's one of the parameters to a C function
[21:38:19] <Matthias247> which wants multiple strings
[21:39:13] <magg> rusti: let x = 20; x as char;
[21:39:15] -rusti- pastebinned 7 lines of output: http://ix.io/9Hq
[21:39:47] <krdln> Matthias247: 4 same strings? I don't get it. And there's no point in initializing it to 0, you can just assign: let port_addr = port_cstr.with_ref(|x|x);
[21:39:57] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[21:40:10] <Matthias247> my first attempt was cfunc(a.to_c_str().unwrap(), b.to_c_str().unwrap, ...). This works, but leaks the memory
[21:40:15] <Matthias247> krdln: of course 4 differnt strings
[21:42:01] <Matthias247> ok, passing 4 times a str.with_ref(|x|x) works. Thanks
[21:42:45] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[21:42:53] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[21:43:05] <Matthias247> although it's quite harder to understand than an imaginative str.get_ptr() :-)
[21:44:42] *** Joins: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[21:45:09] <krdln> Matthias247: You could write a trait and use it :P Or you could try a.with_ref(|aptr| b.with_ref(|bptr| c.with_ref(|cptr| d.with_ref(|dptr| call(aptr, bptr, cptr, dptr)))))
[21:46:08] <Matthias247> krdln: If the compiler could optimize that away :-)
[21:46:16] <krdln> Matthias247. s/.with_ref/.to_c_str().with_ref/ of course. But it's ugly amount of parentheses
[21:46:43] *** Joins: jhasse (jhass_000@moz-AF29DD76.dip0.t-ipconnect.de)
[21:46:49] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[21:47:15] *** Quits: fyolnish (fyolnish@moz-2026779E.uqwimax.jp) (Client exited)
[21:48:41] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[21:48:46] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[21:48:47] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:50:10] <Matthias247> krdln: I even tried to cast the *CString into **i8 and use the dereferenced result. Works too - but even more unsafe :)
[21:50:25] <erickt1> jack: any luck finding your rustpkg doc?
[21:50:37] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[21:50:51] <jhasse> Why is libnative not in /usr/local/lib after `make install`?
[21:51:29] <magg> how to cast an int to char?
[21:51:37] <Ms2ger> as char?
[21:51:43] <krdln> as u8 as char
[21:51:52] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:52:10] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[21:52:11] <erickt1> krdln: ack, doing `cstr.with_ref(|x| x)` is dangerous. It's pretty easy to keep that pointer around after it's been deallocated
[21:52:15] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:52:49] <Matthias247> erick: of course. But that's the case for all the unsafe stuff
[21:53:16] <magg> Ms2ger: as char does not work...
[21:53:18] <Matthias247> oh, it doesn't require unsafe :)
[21:53:32] <Matthias247> then it's even more unsafe :)
[21:53:35] <erickt1> yes, but with unsafe code the only convention helps you stay safe :)
[21:53:59] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:54:04] <erickt1> is there a reason why you can't do `cstr.with_ref(|ptr| cfunc(ptr))`?
[21:54:07] <Twisol> magg: krdln suggested as u8 as char
[21:54:24] <magg> thanks krdln
[21:54:33] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[21:54:33] <Matthias247> erickt1: 4 string parameters
[21:55:58] <jhasse> acrichto, In https://github.com/mozilla/rust/commit/d830fcc6eb5173061888d4b128c0670a49515f58 you've only added libgreen to the install-host target in mk/install.mk (line 160). Is that a bug or why is libnative not needed in /usr/local/lib?
[21:56:23] <erickt1> Matthias247: I understand it's painful to deal with 4 closures. I've just shot myself in the foot accidentally returning a deallocated pointer. Thats why I made CString
[21:56:38] *** Quits: Ms2ger (Ms2ger@125CFB8C.2C129564.3773EA9F.IP) (Quit: nn)
[21:57:19] <depp> FFI is done basically the same way in Haskell
[21:57:28] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:57:32] <erickt1> I suppose we could add `CString.as_ref(&'a self) -> &'a libc::c_char` and rely on the automatic cast from &T to *T
[21:58:55] <Matthias247> erickt1: I see your reason for it :-) But at all the unsafety I have in the C interface I'm not too afraid of handling a few raw pointers :)
[21:59:37] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[21:59:48] <Matthias247> erickt1: This might be an option. I thought myself of something like CString.get_buffer(&'a self) -> *'a libc::c_char. But raw pointers have no lifetime :)
[21:59:48] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[22:00:11] <Matthias247> but if the automatic cast works then I think this would be easy to use and still safe
[22:00:16] <erickt1> Matthias247: I added lifetimes to unsafe pointers but it got rejected :(
[22:00:41] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:00:42] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[22:01:08] <Matthias247> Hmm, I was astonished yesterday that unsafe pointers are also divded in * and *mut. Didn't expect that
[22:01:09] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:02:11] *** Joins: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au)
[22:02:20] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: Leaving...)
[22:02:26] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:03:19] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[22:05:52] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:06:03] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[22:06:13] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[22:06:22] *** Quits: alexalex (Mibbit@moz-EBF61071.bredband.comhem.se) (Ping timeout)
[22:06:33] *** jorendorff_away is now known as jorendorff
[22:07:34] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[22:08:06] *** jorendorff is now known as jorendorff_away
[22:09:08] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:09:10] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[22:10:30] *** Joins: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de)
[22:10:39] <Florob> Is that just me, or is BufferedReader's fill not filling the buffer, unless it's completely empty, strange/a bug?
[22:10:58] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Ping timeout)
[22:11:54] <Florob> s/fill/fill()/
[22:12:17] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[22:12:25] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:14:11] <krdln> magg: remember that casting to u8 will destroy all non-ascii characters
[22:14:50] <magg> krdln: ok, i'll keep that in mind
[22:15:35] <glaebhoerl> Matthias247: why does it make any less sense than * and *const in C?
[22:15:59] <zokier`> rusti, ~[(~"foo", 42u)].head().n0()
[22:16:05] -rusti- pastebinned 7 lines of output: http://ix.io/9Hs
[22:16:08] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:16:35] <zokier`> i still don't understand rust ownership stuff :/
[22:17:54] <krdln> zokier`: it's a known compiler bug, unfortunatelly
[22:18:06] <jhasse> acrichto: I've created a PR: https://github.com/mozilla/rust/pull/11330
[22:18:10] <depp> I'm trying to figure out copy_from()... fn f(output: &mut [f32]) { output.copy_from([1.0]); } doesn't work...
[22:18:30] <Matthias247> glaebhoerl: I thought becausee using * is already only possible in unsafe contexts. However I think const* is not the same as *mut. With a constant C pointer you can't modifier the address while *mut refers to the content.
[22:18:38] <krdln> zokier`: current workaround is to make a temporary
[22:18:39] <jhasse> acrichto: (concerning the question I've asked above)
[22:18:50] *** Quits: jhasse (jhass_000@moz-AF29DD76.dip0.t-ipconnect.de) (Quit: Verlassend)
[22:18:56] <Matthias247> glaebhoerl: C++ const& would be more the equivalent
[22:19:32] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:19:46] <krdln> zakier`: sorry, i've mistaken it with another similiar issue. Forget what i said.
[22:21:36] *** Joins: jhasse (jhass_000@moz-AF29DD76.dip0.t-ipconnect.de)
[22:22:08] <zokier`> rusti, let foo = ~[(~"foo", 42u)]; foo.head.first()
[22:22:10] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:22:10] -rusti- pastebinned 7 lines of output: http://ix.io/9Hu
[22:22:37] <zokier`> damnit
[22:22:41] <zokier`> rusti, let foo = ~[(~"foo", 42u)]; foo.head().first()
[22:22:43] -rusti- ~"foo"
[22:22:46] <zokier`> yay
[22:22:53] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[22:23:03] <thiez> hello everyone, trying to compile master version of rust, I get a 'linking with `cc` failed: exit code: 1, because 'stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd-3e5a.b83-0.9.so: undefined reference to `__pthread_get_minstack'
[22:23:11] <thiez> anyone know what's causing that?
[22:23:18] *** Quits: rca (rcatolino@moz-F053E700.adsl.proxad.net) (Ping timeout)
[22:23:28] <glaebhoerl> Matthias247: OK, I mixed up my C syntax, so: `const T*` then
[22:23:43] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:25:21] <glaebhoerl> Matthias247: anyway, what kind of safety * in Rust should still attempt to enforce, given that it's fundamentally unsafe either way, is a good question. following the same logic you could go as far as to replace it with an untyped `Addr` type...
[22:26:04] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Client exited)
[22:26:57] <Matthias247> glaebhoerl: no problem. I just wondered that yesterday that is there. I'm very new to Rust so I didn't expect it. But it might make sense :)
[22:27:33] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:27:39] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[22:28:00] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:28:57] *** Quits: krdln (Mibbit@moz-C271714F.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[22:29:15] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:29:45] <glaebhoerl> Matthias247: I'm basically saying that I'm not sure if there _is_ a choice which objectively makes the most sense. it more or less comes down to ergonomics.
[22:29:59] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[22:30:06] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[22:31:33] <Matthias247> Other topic: Is a println!("{:?}", myStruct) leading to a crash a user-error or bug?
[22:32:08] <Matthias247> The struct contains C-like enumerations and I'm getting: task '<main>' failed at '20enum value matched no variant14'
[22:32:23] <aatch> Matthias247, user-error
[22:32:37] <aatch> Technically.
[22:33:29] <aatch> Since you have a invalid value for that enum, it's bug *somewhere*
[22:33:46] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:35:01] <Matthias247> Yeah, the value is invalid because it's set from the C side and isn't used at some points. I will try to change that so it will always be something valid
[22:35:42] <Matthias247> However the print could still print some default-value like "" or "Invalid" instead of crashing ;)
[22:35:53] *** Joins: edftwin (edftwin@moz-E43EC1F2.nyc.res.rr.com)
[22:37:51] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[22:38:32] *** Quits: jviereck (Adium@moz-BDE80164.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[22:38:36] *** Joins: mhr (mhr@moz-453998C8.dsl.bell.ca)
[22:39:17] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:39:55] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:40:50] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[22:41:00] *** Quits: Ferreus (ferreus@moz-BC88CB34.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:43:32] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:44:05] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[22:44:41] *** Quits: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:45:43] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[22:48:37] *** Joins: swgillespie (swgillespi@moz-D461B92C.dynamic.ip.windstream.net)
[22:49:18] *** Joins: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net)
[22:49:31] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:50:08] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:50:38] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[22:51:03] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:51:15] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[22:51:22] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[22:52:12] <steveklabnik> thiez: have you compiled rust before?
[22:53:05] *** Quits: edftwin (edftwin@moz-E43EC1F2.nyc.res.rr.com) (Client exited)
[22:53:18] <steveklabnik> zokier`: what do you find confusing about ownership? maybe i can help
[22:54:11] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[22:54:52] <thiez> steveklabnik: I have, but to make sure that wasn't the problem I deleted my build-folder and did a clean compile
[22:54:55] <thiez> same result
[22:55:30] <steveklabnik> if you're all committed up you should try git clean -dfx
[22:55:36] <steveklabnik> this error came up for me too
[22:55:45] <steveklabnik> i had a really old rust and tried to rebuild recently
[22:55:50] <steveklabnik> i had to make clean && git clean -dfx
[22:55:52] <steveklabnik> and then it worked
[22:56:08] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:56:37] <thiez> I shall give that a shot
[22:56:55] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[22:57:06] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[22:57:17] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[22:57:48] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[22:58:20] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[22:59:19] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:00:07] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[23:00:14] <mrmonday> is there a way to specify type constraints without creating another function? something like match but at compile time?
[23:00:24] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[23:00:45] <thiez> mrmonday: could you be more specific? what are you trying to accomplish?
[23:02:53] <mrmonday> say I have enum Foo { Bar(...), Car(...) }, I have a function which takes a type parameter and should function differently depending on  that parameter - there's only one or two lines which will change so it seems excessive to create another function to handle it
[23:03:21] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[23:03:30] <mrmonday> (the type parameter should be either Bar or Car)
[23:04:05] <thiez> as far as I'm aware you cannot have a specific enum instance as a type constraint in a function signiture
[23:04:12] <thiez> you'll have to do the match
[23:04:56] *** Joins: ramitos (ramitos@moz-60679625.socal.res.rr.com)
[23:05:00] <thiez> but if there are only one or two lines that have to change, why not put a match around those?
[23:05:01] <glaebhoerl> mrmonday: http://smallcultfollowing.com/babysteps/blog/2012/08/24/datasort-refinements/
[23:05:02] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Ping timeout)
[23:05:17] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[23:05:19] <glaebhoerl> (iow, not yet, maybe someday)
[23:05:45] <depp> maybe someday => only languages like Coq and Agda have that kind of power
[23:06:25] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[23:06:36] <Matthias247> oh, now I have an internal compiler error :)
[23:07:04] <mrmonday> depp: I'm used to D, which has a very powerful compile time system :<
[23:07:26] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[23:07:33] <mrmonday> glaebhoerl: ack, that's a bit annoying :S Guess I'll push the whole thing to runtime, that's less than ideal though
[23:07:38] <thiez> D is indeed quite nice in that regard :)
[23:08:12] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[23:08:19] <mrmonday> is there a way to get a default value for an enum type? eg in the above I want a Bar, but don't care what it has in it?
[23:08:23] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:08:36] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[23:09:08] <aatch> mrmonday, you can use match foo { Bar(..) => ... } to ignore the fields
[23:09:15] <aatch> That will ignore all the fields.
[23:09:31] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[23:09:33] <aatch> You can use '_' to ignore specific fields.
[23:09:52] <mrmonday> aatch: I'm looking for a way to actually create a value which can be passed to a function
[23:10:11] <mrmonday> rather than to match against one
[23:10:11] <aatch> mrmonday, in that case, no.
[23:10:11] <thiez> so create a value and put some default values in them yourself? :)
[23:10:27] <thiez> what is the point of passing an empty 'Bar' to a function anyway?
[23:10:32] <aatch> Since one rule of rust is that the state should always be consistent.
[23:10:43] <thiez> if the function is going to ignore everything inside, it could create the Bar itself, could it not?
[23:11:00] *** Quits: int3_ (int3_@8AF0804B.B0A7F729.7DD07FFA.IP) (Client exited)
[23:11:02] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Ping timeout)
[23:11:07] <mrmonday> thiez: trying to find a decent way of working around my above problem :<
[23:11:59] <thiez> sounds like you're trying to stuff a square peg in a round hole ;)
[23:12:10] <mrmonday> Ideally I wouldn't have to deal with it at all, I'm working with a terrible C api though :p
[23:12:19] <mitsuhiko> dealing with Map<~str, ~str> is really annoying at the moment :(
[23:12:25] <mitsuhiko> how is one supposed to use .find on it?
[23:12:36] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:12:43] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[23:13:09] *** Quits: dapz (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:13:13] <aatch> mrmonday, if you're passing a pointer to data to be filled you can use std::unstable::intrinsics::uninit().
[23:13:31] <aatch> But you shouldn't be using enum variants for that.
[23:14:21] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[23:14:30] *** Quits: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch) (Ping timeout)
[23:14:52] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[23:15:44] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[23:16:07] *** Joins: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch)
[23:16:10] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[23:17:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[23:17:23] <steveklabnik> mitsuhiko: try this:
[23:17:35] <steveklabnik> https://www.irccloud.com/pastebin/cL6vlhBg
[23:17:42] <steveklabnik> that comment is bad, sorry.
[23:17:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:17:48] <steveklabnik> i put two examples together
[23:17:51] <mitsuhiko> steveklabnik: that's what i'm doing at the moment
[23:17:56] <mitsuhiko> but it feels so wrong
[23:18:01] <steveklabnik> why?
[23:18:04] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[23:18:14] <mitsuhiko> The ::<~str, ~str> is actually inferred
[23:18:32] <mitsuhiko> steveklabnik: because of the &~
[23:18:51] <steveklabnik> ah. yeah, that doesn't feel great
[23:19:00] <kvanb> so
[23:19:20] <kvanb> does anyone know how you model a continuation/graph style thing in LLVM?
[23:19:49] <kvanb> I was thinking just the other day that it's pretty easy to split your program into small continuations and optimize it that way, but its near impossible to generate code for it without just inlining
[23:20:41] *** Quits: TisButMe (Mibbit@moz-2B5AC66A.w92-137.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:21:00] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[23:21:22] <aatch> kvanb, you'd have to make each continuation a function and use the calling convention that allows for guaranteed TCO.
[23:22:03] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[23:22:19] <kvanb> so, say I have a thing like 
[23:22:30] <kvanb> f = A - B - C
[23:22:49] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Ping timeout)
[23:22:57] <kvanb> nevermind, I was thinking about how I'd handle more than 1-deep continuations but realized its not necessary
[23:23:14] *** Joins: maxli (Instantbir@moz-78AD779D.hsd1.ca.comcast.net)
[23:23:19] <mitsuhiko> steveklabnik: it's not super bad, but it feels weird
[23:23:29] <steveklabnik> yeah
[23:23:30] <mpiechotka> How to get the size of vector?
[23:23:39] <mitsuhiko> and because the return value is essentially a Some(&~) it does not work with unwrap_or
[23:23:45] <steveklabnik> mpiechotka: len
[23:23:57] <mpiechotka> steveklabnik: Thanks
[23:24:00] <mitsuhiko> so you can't do d.find(&~"what").unwrap_or(&~"<unknown>")
[23:24:31] <dbaupp> thiez: the __pthread_get_minstack is because you have a different/too old glibc; I think we need to revert https://github.com/mozilla/rust/pull/11284
[23:24:39] <dbaupp> thiez: (sorry for the annoyance :( )
[23:25:03] <thiez> that's no problem at all
[23:25:04] <steveklabnik> rusti: [1,2,3].len()
[23:25:05] -rusti- 3u
[23:25:09] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[23:25:15] <steveklabnik> mpiechotka: ^ :D
[23:25:26] <steveklabnik> i forgot about rusti
[23:25:32] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[23:25:38] <steveklabnik> dbaupp: thiez ahhhhhh yes, that's part of it too
[23:25:46] <mpiechotka> steveklabnik: I've tried to use length, size and search for it in documentation
[23:25:54] <thiez> my previous version is only 2 days old so I'll live :)
[23:26:14] <mitsuhiko> steveklabnik: btw, since i saw you replied to the redis library. I have my own one which is a bit more complete and would love some feedback.
[23:26:23] <thiez> dbaupp: if that's the case I think more people on debian should have my problem
[23:26:25] <mitsuhiko> https://github.com/mitsuhiko/redis-rs/
[23:26:28] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[23:26:39] <steveklabnik> mpiechotka: cool, i'll poke around
[23:27:19] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[23:27:21] <mpiechotka> steveklabnik: Sorry - have you replied to wrong person?
[23:28:10] <steveklabnik> mpiechotka: i just meant i'll check the documentation and see why len() isn't easy to find, thanks for mentioning it
[23:28:23] <mpiechotka> Ok. Thanks
[23:29:59] <kvanb> aatch: do you know if its possible to disable the stack entirely with llvm?
[23:30:18] <depp> GHC has no stack, and can use LLVM
[23:30:20] <dbaupp> thiez: I'm on debian and it compiles fine
[23:30:25] <dbaupp> thiez: in any case, https://github.com/mozilla/rust/pull/11331
[23:30:33] <dbaupp> thiez: (Luqman had the same error yesterday)
[23:30:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:30:52] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[23:32:24] <kvanb> depp: how does it tell it never to use the stack though
[23:32:26] <thiez> dbaupp: nice that a quick fix is coming
[23:32:28] <kvanb> is that part of the calling convention?
[23:32:31] <dbaupp> steveklabnik: the reason is...
[23:32:41] <dbaupp> steveklabnik: https://github.com/mozilla/rust/issues/10114
[23:32:55] <depp> kvanb: I can look into it
[23:32:59] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[23:33:04] <steveklabnik> dbaupp: ahhhhhhhhhhhhhhhhhhhhhhhhhh
[23:33:11] <dbaupp> steveklabnik: .len() comes from a trait (Container) and the fact that built-in types like &[] implement certain traits is only listed on the trait page itself
[23:33:14] <aatch> kvanb, it's probably part of the calling convention.
[23:33:20] <dbaupp> mpiechotka: ^
[23:33:30] <steveklabnik> makes sense
[23:33:37] <dbaupp> it's definitely a bug though
[23:33:45] <kvanb> yes, calling convention does make sense. The docs just don't really say it, that's all.
[23:33:52] <aatch> However, it could require intervention from the linker as well.
[23:33:55] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[23:33:56] * dbaupp favours the solution were we move as much as possible into libraries....
[23:33:57] <aatch> compiling a program is hard.
[23:34:06] <steveklabnik> mitsuhiko: seems neat! (your redis thing)
[23:34:14] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Quit: c-a)
[23:34:25] <dmz> It would be nice to also have macros documented
[23:34:27] <mpiechotka> dbaupp: My guess is that it'd be easier if there was a list of traits for &[a]/~[a]/@[a] (and &str/~str/@str)
[23:34:28] <aatch> Your best bet is to look at the Haskell llvm backend
[23:34:48] <aatch> dmz, the issue there is that they don't exist.
[23:34:55] <aatch> not properly anyway.
[23:35:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: )
[23:35:21] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[23:35:28] <dbaupp> dmz: https://github.com/mozilla/rust/issues/6444
[23:35:30] *** Joins: philix (philix@moz-4689D536.user.veloxzone.com.br)
[23:35:44] <dmz> dbaupp: awesome!
[23:35:46] <aatch> so can't be automatically generated using rustdoc without having them be in every single crate that rustdoc runs on.
[23:36:09] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[23:36:29] <dbaupp> mpiechotka: yes, something like that would be very nice
[23:36:33] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[23:37:09] *** Quits: sellout (Adium@moz-2ECB0660.hlrn.qwest.net) (Ping timeout)
[23:37:33] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[23:37:36] *** zz_kimundi is now known as kimundi
[23:38:27] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[23:38:58] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:40:21] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[23:41:09] <jack> erickt1: no. i didn't find it.
[23:41:15] <mitsuhiko> hmm. is the sha1 support gone from libstd/libextra?
[23:41:37] <mitsuhiko> i mean, i can see it's not there right now, just wondering if it's going to come back
[23:42:47] *** Joins: awidegre1n (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[23:42:55] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:43:03] <dbaupp> mitsuhiko: the core team have decided no crypto implementations in the stdlib
[23:43:05] *** kimundi is now known as zz_kimundi
[23:43:33] <mitsuhiko> i think that's going to be a bit too optimistic
[23:43:35] <dbaupp> bindings to preexisting/preverified libraries are preferred
[23:43:40] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[23:43:52] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[23:44:09] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[23:44:09] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[23:44:44] *** zz_kimundi is now known as kimundi
[23:45:21] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[23:49:11] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[23:49:55] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:50:16] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:50:37] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[23:50:45] <mrmonday> does rust have optional/default parameters? or is Option<> used for that?
[23:50:53] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[23:51:04] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[23:51:07] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[23:51:32] <dmz> mrmonday: fortunately, all parameters are explicit, as far as I'm aware
[23:51:58] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:52:00] <thiez> we don't have optional/default parameters. You could use Option, or pass a struct that holds the arguments, that initializes them with some default
[23:52:07] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:52:12] <kimundi> mrmonday: Rust has neither default nor optional paramters as a seperate concept. Option can be used as a replacement, but we ususally just define a new function
[23:52:17] <thiez> (and yes, I would prefer to have optional and default parameters)
[23:52:33] *** Joins: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP)
[23:52:47] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[23:53:59] <mrmonday> can I overload functions java-style then?
[23:53:59] <depp> How do I return a trait object that doesn't have Send?
[23:54:18] <depp> mrmonday: You can kind of do it with traits.
[23:54:31] <thiez> you can return it just fine, you just can't send it to another task
[23:54:59] <depp> thiez: and what signature should it have?
[23:55:12] <thiez> that depends, what exactly are you trying to do?
[23:55:35] <depp> I have a function that returns a trait object, call it T
[23:55:44] <depp> fn(...) -> ~T
[23:55:44] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[23:56:01] *** Quits: sellout (Adium@moz-76D71F1A.hlrn.qwest.net) (Quit: Leaving.)
[23:56:01] <depp> but my implementation now has Rc<...> in it, so it's not Send any more
[23:56:26] <dbaupp> `~Trait:`
[23:56:43] <dbaupp> ~Trait defaults to `~Trait:Send`, that is, the contained type has to satisfy Send.
[23:57:08] <depp> hm, would be cool if I could have found this in the docs
[23:57:21] *** Quits: gwty (gwtypc@23544240.10600D12.137C914F.IP) (Client exited)
[23:57:22] <dbaupp> yup
[23:57:32] <dbaupp> lots of stuff missing/unclear/incorrect in the manual
[23:57:39] <depp> okay, I see it, it's kind of buried in the middle of a paragraph
[23:58:03] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[23:58:07] *** Quits: gkostyanikov (gkostyanik@2FB2166B.A859D9FD.CA6E2165.IP) (Ping timeout)
[23:59:19] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
