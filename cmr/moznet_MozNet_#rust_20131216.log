[00:01:13] *** Quits: japaric (japaric@7C76557C.60901FDF.95AE23EB.IP) (Quit: WeeChat 0.4.2)
[00:01:20] *** Joins: japaric (japaric@7C76557C.60901FDF.95AE23EB.IP)
[00:05:36] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:07:13] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:07:45] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:08:42] *** Quits: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com) (Ping timeout)
[00:10:42] <wilkie> SiegeLord: yet that wouldn't pull in libstd.so from $RUST_LIBRARY_PATH/a/ which is slightly disappointing to me
[00:12:37] <cmr> SiegeLord: I'm very surprised that that works, actually.
[00:12:59] <jack> I didn't think extern mods were exportable
[00:15:08] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[00:16:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[00:18:12] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[00:18:17] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Input/output error)
[00:18:33] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:18:47] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[00:19:44] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[00:20:35] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[00:21:36] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[00:22:06] <diverse> I guess there is an obvious error in http://static.rust-lang.org/doc/master/std/index.html, it shouldn't say "Module std" on the top left, it should say "Crate std" and same for `extra`
[00:23:13] <diverse> at least for consistency
[00:24:56] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[00:26:36] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[00:28:00] <jack> diverse: modules can contain modules.
[00:28:49] <jack> The top level module is taken as the name of the crate.
[00:29:42] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[00:29:47] <jack> You're right that extern mod foo is not quite correct, because for it to be correct you should be able to specify a submodule, but you can only ever use the top-level module there.
[00:30:13] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[00:30:49] <killerswan> oh, hey
[00:30:59] <killerswan> the valgrind in brew doesn't work on OS X 10.8
[00:31:14] <Jarrett> are there any docs on how non-macro syntax extensions work?
[00:31:19] <jack> killerswan: you probably want to use linux if you want ot use valgrind.
[00:31:30] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[00:31:34] <killerswan> and maybe the memory leak disappears on Linux
[00:31:40] <yichoi> brson: ping
[00:31:47] <jack> Jarrett: not that i know of. you'll have to find one that you know of and go read its source. they have to be implemented in the compiler.
[00:31:55] <Jarrett> ahh okay
[00:32:05] <Jarrett> I wasn't sure if they were compiler plugins or something
[00:32:27] <jack> Jarrett: i think we want to make it pluggable, but it isn't now and it's not on the 1.0 work list.
[00:32:33] <Jarrett> right
[00:36:04] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[00:36:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[00:37:26] <mjiig> does rust have a built in way to handle integer exponentials?
[00:37:46] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[00:39:29] <rntz> how is it that I pass type parameters to a static method of a trait again?
[00:39:45] <rntz> Monoid::unit<V> is complaining about "unresolved name `V`."
[00:39:54] <Jarrett> Monoid::unit::<V>?
[00:39:56] <dbaupp> rntz: unit::<V>
[00:40:26] <Jarrett> I'm not sure why that parses and gives such a weird error
[00:40:54] <rntz> fingertree.rs:25:20: 25:37 error: too many type parameters provided: expected 0, found 1
[00:40:58] <o11c> Jarrett: it doesn't see the > yet probably
[00:41:08] <rntz> complaining about Monoid::unit::<V>()
[00:41:16] <rntz> (V is the type that implements Monoid)
[00:41:17] <Jarrett> is it parsing as Monoid::unit < V > (params), as in less-than and greater-than?
[00:41:24] <o11c> yes
[00:41:55] <dwrensha> rntz: Monoid::<V>::unit ?
[00:41:59] <rntz> hrm, type-annotating the variable seems to work.
[00:42:06] <diverse> jack: okay, I think I get it now, crates operate like pointers for modules. Usually the crate points to the root module.
[00:42:07] <rntz> (the variable that gets the return value)
[00:42:22] <rntz> fingertree.rs:25:23: 25:40 error: the trait referenced by this path has 0 type parameters, but 1 type parameter were supplied
[00:42:31] <rntz> in reference to Monoid::<V>::unit()
[00:42:47] <rntz> okay, maybe I should make a code snippet demonstrating the problem
[00:42:59] <dbaupp> rntz: are you trying to give a type hint for the Self type?
[00:43:22] <rntz> dbaupp: yes
[00:43:33] <dbaupp> ah
[00:43:35] <rntz> 19:41 < rntz> (V is the type that implements Monoid)
[00:43:35] <dbaupp> not possible atm
[00:43:41] <rntz> oh. :/
[00:43:50] <dbaupp> you need `let x: V = ...;`
[00:43:59] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[00:44:06] <dbaupp> in theory we'll have a syntax like `Monoid::<for V>::unit` at some point
[00:44:07] <rntz> yeah, that is what I did
[00:44:27] <dwrensha> or if your method does not return Self, you can add an argument _unused_self : Option<Self>
[00:44:31] <dwrensha> and pass it None::<V>
[00:44:49] <rntz> dwrensha: I think I'd rather just do "let v: V = ... "
[00:44:55] <rntz> that seems much cleaner than cluttering my interface
[00:45:02] <dwrensha> yeah, that's better when it's possible
[00:48:09] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[00:49:19] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[00:51:05] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[00:53:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:56:49] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[00:56:58] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:58:30] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[00:59:01] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[00:59:42] *** Quits: ssbr_ (~ssbr@46FE74EC.C60FE7DC.4065847B.IP) (Ping timeout)
[01:00:30] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[01:00:46] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[01:03:24] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[01:03:39] <diverse> jack: oh wait, nvm
[01:04:12] <diverse> the whole .rs == crate
[01:05:04] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[01:05:16] <jack> the root module of the crate is not explicitly declared.
[01:05:37] <jack> and if you count the submodules, then crates and modules can consist of multiple .rs files
[01:06:10] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Quit: ZNC - http://znc.in)
[01:07:21] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[01:09:13] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[01:10:49] <rntz> is the order of evaluation of arguments to a function in rust defined to be left-to-right?
[01:10:56] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[01:15:51] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[01:18:11] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[01:18:55] *** Quits: mjiig (angus@moz-11B256A4.demon.co.uk) (Quit: leaving)
[01:19:07] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:21:19] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[01:21:34] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[01:24:22] *** nrc is now known as nrc|afk
[01:32:53] <diverse> jack: pm
[01:36:41] *** Quits: june0cho (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:38:55] *** Quits: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP) (Quit: Changing server)
[01:39:28] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:39:53] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:42:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:42:03] *** ChanServ sets mode: +ao brson brson
[01:42:22] <killerswan> regarding the change (in the last two days) of run::process_output
[01:42:31] <killerswan> how do I get stderr for that?
[01:43:37] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[01:43:42] <killerswan> it might just return None, and give me no detail on whether there is a permissions problem, or no executable...
[01:43:47] <geomyidae> I'm clearly struggling with some 'mut' typing issues and I've kinda been stumped for quite a while if anyone might assist. https://github.com/colemickens/pcapfe/blob/master/build_log.txt
[01:44:35] <dbaupp> geomyidae: *T and *mut T are different types
[01:44:56] <dbaupp> pcap_open_live is taking a *mut i8, but eb is a *i8
[01:45:12] <dbaupp> and &maskp should be &mut maskp
[01:45:13] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:45:24] <dbaupp> and netp needs to be &mut netp
[01:45:37] <geomyidae> so am I just this far behind and I have to explicitly say "mut" when I pass them in?
[01:45:54] <dbaupp> if they take *mut, yes
[01:46:00] <dbaupp> if they take plain *, no
[01:46:08] <dbaupp> (same as with & vs. &mut)
[01:46:29] <geomyidae> okay, I guess I'm surprised I got this far
[01:47:57] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[01:48:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:50:42] <brson> yichoi: pong
[01:51:01] <brson> diverse: i don't think anybody is working on 'extern mod', no
[01:51:52] <arrrrrrrrr> tfw your build process doesn't clean up 2gb in /tmp ...
[01:52:01] <geomyidae> okay, I guess I'm surprised I got this far
[01:52:08] * geomyidae grumbles
[01:58:41] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[02:07:27] <gavinb> Anyone versed in cgmath? Trying to figure out how to modify an element within a Mat4<f32>. The mut_cr() method doesn't seem to work/be available.
[02:07:51] <rntz> ... why is &fn non-copyable when you can do (|x| p(x)) to copy p?
[02:08:57] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[02:10:34] <bblum> rntz: if you could copy it, you could pass it as an argument to itself
[02:11:02] <rntz> ah, right, the case of the recurring closure
[02:11:04] <bblum> yea
[02:11:16] <rntz> okay, real question: why does |x| p(x) get around this?
[02:11:21] <yichoi> brson: master branch ebbd30 has passed all android make check 
[02:11:24] <bblum> doing |x|p(x) borrows p which prevents you from calling p while it exists
[02:11:32] <rntz> okay.
[02:11:41] <rntz> why doesn't passing p to a function just borrow it, then?
[02:11:59] <rntz> like, why do I need to write "foo(blah blah, |x| p(x))" instead of "foo(blah blah, p)"?
[02:12:17] <bblum> you mean why doesn't it auto-borrow when it would otherwise need to copy
[02:12:33] <bblum> assuming you mean that, it's just not implemented
[02:12:40] <rntz> ok.
[02:14:11] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:14:45] <bblum> rntz: i think there's still one remaining unsoundness in closures since my hacky fixes on them this summer
[02:14:54] <bblum> but i'm not sure since i can't find the issue that i opened about it
[02:14:57] <bblum> even in the closed issues list
[02:15:26] <bblum> where you could borrow a closure with & (i.e., & &fn()), copy that, and call it through the dereference
[02:16:53] <bblum> oh yeah here it is, #7836
[02:17:23] <rntz> I am less interested in the unsoundness than in why I need to uglify my code that I happen to know uses closures in a sensible way :P
[02:17:49] <bblum> that is surprising :P
[02:21:38] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[02:23:37] <arrrrrrrrr> bblum: given how often people are told to "just use unsafe and raw pointers", I'm not surprised that they complain about having to use ugly code
[02:23:54] <bblum> arrrrrrrrr: people should not be told to just use unsafe and raw pointers :(
[02:23:57] *** nrc|afk is now known as nrc
[02:24:02] <bblum> we should have libraries that do that for them
[02:24:15] <arrrrrrrrr> like weak/strong 
[02:24:26] <arrrrrrrrr> but it wont make it to std according to strcat
[02:24:40] <bblum> that's not really surprising
[02:25:03] <arrrrrrrrr> well, back references are very useful
[02:25:04] <bblum> iiuc, the weak strong pointer idiom is just pushing failure cases to runtime exceptions
[02:25:23] <bblum> and it doesn't do very much good to have a strong type system if your libraries have unpredictable failure cases all over the place
[02:25:34] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:25:37] <dbaupp> https://github.com/mozilla/rust/pull/10926
[02:25:40] <bblum> i mean if you need back references, the entire data structure you are trying to implement should be in the library already
[02:25:48] <dbaupp> (strcat PR to add strong/weak Rc pointers.)
[02:25:52] <dbaupp> *strcat's
[02:26:30] *** Quits: Kxepal (Miranda@moz-99D51CF4.pppoe.mtu-net.ru) (Quit: Kxepal)
[02:26:38] <arrrrrrrrr> bblum: what structure is there in the library that represents a parent <-> children relationship?
[02:28:59] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[02:28:59] *** ChanServ sets mode: +o jdm
[02:30:27] <arrrrrrrrr> line 208 in lang_items.rs:   lets_do_this!{   lol
[02:34:31] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[02:35:10] *** Quits: KindOne (KindOne@moz-ADEEC3B9.dynamic.ip.windstream.net) (Ping timeout)
[02:36:08] *** Joins: KindOne (KindOne@moz-ADEEC3B9.dynamic.ip.windstream.net)
[02:36:36] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:38:46] <bjz> bblum: how do you know about these 'unsoundness' things. will it be possible to verify these safety things mathemagically?
[02:41:51] <bblum> bjz: through the age-old technique of staring at the type system really hard ;)
[02:42:06] <bblum> will it be possible? i dream, one day...
[02:42:09] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[02:42:29] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[02:44:18] <arrrrrrrrr> is there a timeline for 1.0?
[02:45:00] <gavinb> bjz: hey, got time for a cgmath question? :)
[02:45:01] *** Joins: derek_c (derek@moz-ADB3667D.cit.cornell.edu)
[02:46:03] *** Quits: vk (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Ping timeout)
[02:47:21] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[02:47:51] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[02:51:22] <arrrrrrrrr> @cgmath: pub fn ident() -> $Self<$S> { $Self::from_value(one()) }   <--- wtf?
[02:51:37] <arrrrrrrrr> $Self is a vector type
[02:53:44] *** Quits: t25 (manu@moz-5D020DB4.otago.ac.nz) (Quit: t25)
[03:02:03] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[03:04:03] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[03:04:20] *** Joins: t25 (manu@moz-5D020DB4.otago.ac.nz)
[03:05:59] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[03:08:02] <bjz> gavin: yarr
[03:08:12] <bjz> oops
[03:08:30] <bjz> different gavin 
[03:10:13] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[03:10:35] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[03:10:50] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[03:18:18] *** Quits: ktt3ja (ktt3ja@moz-D69B60E4.hsd1.va.comcast.net) (Quit: Leaving)
[03:20:10] <arrrrrrrrr> bjz: (Sphere, Ray)::intersection  you don't handle the case where r.origin is inside the sphere. you assume |r.direction| = 1?
[03:22:16] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[03:22:17] <rntz> what does declaring a mod pub actually do?
[03:23:31] <rntz> I have two files, fingertree.rs and fingerdeque.rs, and fingerdeque.rs wants to use fingertree.rs, but to call its module "tree" rather than "fingertree". and the only way I seem to be able to do this is by saying "use tree = fingertree; pub mod fingertree;" in fingerdeque.rs, but I don't want to make fingertree publicly visible to anything other than fingerdeque.rs.
[03:24:33] <strcat> rntz: if you only want it visible to one module, make it a private sub-module of that module
[03:24:46] <strcat> afaict that seems to work fine now
[03:25:33] <rntz> fingerdeque.rs:1:4: 1:22 error: unresolved import: found `fingertree` in `???` but it is private
[03:25:54] <strcat> so it's a sub-module of that module?
[03:26:29] <rntz> http://dpaste.com/1507013/ this is the code that results in that error
[03:27:09] <rntz> http://dpaste.com/1507014/ and this is the full error log
[03:27:18] <strcat> that's not going to compile afaik
[03:27:19] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[03:27:27] <strcat> error: unnecessary `priv` qualifier
[03:27:36] <strcat> rntz: this is master?
[03:27:39] <strcat> or an old version
[03:27:41] <rntz> no, I am in 0.8
[03:27:51] <rntz> same errors occur without `priv` modifier
[03:27:54] <strcat> well I can't really say what the state of modules was then
[03:28:21] <strcat> rntz: http://ix.io/9nL this works fine now
[03:28:29] <strcat> and foo isn't visible outside of this module
[03:28:54] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:29:20] <rntz> I mean, if I just do "mod fingertree;" and then qualify things with fingertree::, it works
[03:29:29] <rntz> I want to rename it, however, and that seems to cause problems (?!)
[03:29:53] <SiegeLord> Renaming it works fine in master too
[03:32:09] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:34:43] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[03:38:18] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[03:43:28] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[03:43:40] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[03:45:01] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:45:25] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:47:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:48:52] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[03:49:12] <bjz> aatch: ack
[03:49:18] <bjz> oops
[03:49:27] <bjz> arrrrrrrrr: ^
[03:49:41] <bjz> arrrrrrrrr: could you send me a PR with a unit test?
[03:49:57] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[03:50:58] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:51:15] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:51:57] <arrrrrrrrr> bjz: I don't understand? We can go through the code if you want to. It's easy enough.
[03:55:11] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[03:57:36] *** Quits: zz_kimundi_who_cant_talk_atm (kimundi@moz-2DC78921.dip0.t-ipconnect.de) (Ping timeout)
[04:01:27] *** Joins: mindcat (mindcat@3DB84856.C3C73C40.E47F7BFE.IP)
[04:01:32] <mindcat> ok...
[04:03:01] <mindcat> how can I share the "std::io::net::tcp::TcpStream" between tasks?
[04:04:09] <mindcat> and return read somethings
[04:04:41] <arrrrrrrrr> why would you do something like that?
[04:04:48] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[04:05:19] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[04:05:54] <mindcat> arrrrrrrrr: I have two TcpStream, and my program work like a proxy
[04:06:22] <bjz> arrrrrrrrr: sorry, have to head out now, I'll have a look at it later
[04:06:57] <arrrrrrrrr> mindcat: why do you need to put the tcstreams in multiple tasks at once for that?
[04:08:05] <mindcat> arrrrrrrrr: then how can I do a proxy program?
[04:08:30] <arrrrrrrrr> sounds like a task for select
[04:08:52] <ChrisMorgan> acrichto: just ran the rust-http performance comparison again. Looking good—its not scaling quite as well as Go yet but it's getting much, much better, giving the sort of speedups that I expect to see (1→2 70%, 2→4 20%, 4→8 40%. Node is absolutely and definitively left in the dust now.
[04:09:34] <mindcat> arrrrrrrrr: I am writing a ygopro server program
[04:09:56] <ChrisMorgan> (All three start off at about the same performance, but then Node only gets 50% from 1→2, and 5% from 2→4, at which point it plateaus.)
[04:10:15] <mindcat> arrrrrrrrr: but first, I need understand the protocol
[04:10:20] <arrrrrrrrr> mindcat: well, it sounds safe if you can split the tcpstream up in reader and writer and have them in separate tasks
[04:10:53] <mindcat> arrrrrrrrr: split?
[04:10:58] * ChrisMorgan also wants to be able to split the TcpStream into a reader and a writer for rust-http
[04:11:15] <arrrrrrrrr> mindcat: like tcpreader and a tcpwriter
[04:11:26] <mindcat> arrrrrrrrr: yea
[04:11:30] <arrrrrrrrr> to make sure that only one task reads and only one task writes
[04:11:41] <arrrrrrrrr> having two tasks write at once sounds scary
[04:11:51] <mindcat> arrrrrrrrr: yea
[04:12:45] * ChrisMorgan doesn't at present care about reading and writing from different tasks; he just wants to store the reader in a Request object and the writer in a Response object in the same task
[04:13:19] <ChrisMorgan> arrrrrrrrr: Arc will permit you to do what you want, at a performance tradeoff.
[04:13:45] <arrrrrrrrr> what are you talking about right now?
[04:13:50] <arrrrrrrrr> tcpstream?
[04:14:12] <arrrrrrrrr> or parent - children relationships?
[04:15:00] <arrrrrrrrr> ok, extra::arc::Arc looks like the latter
[04:16:39] <ChrisMorgan> (Arc still won't let you do both reading and writing simultaneously.)
[04:16:41] <arrrrrrrrr> "shared immutable state" that's no good unfortunately
[04:17:41] <strcat> there are MutexArc and RWArc
[04:17:41] <ChrisMorgan> acrichto: got any further thoughts on the matter of splitting TcpStream into a reader and a writer? (I'd investigate it further, but with your work on libnative and so forth I'm not sure if there's much point.)
[04:17:41] <arrrrrrrrr> in my case I can easily reconstruct the object from an int but i want to save state in the object so that I don't have to call C functions to retrieve the data
[04:18:17] <mindcat> rusti: "Impossible!"
[04:18:39] <arrrrrrrrr> rusti: "Impossible! please"
[04:18:55] <arrrrrrrrr> it's no good :(
[04:20:00] <ercxx> How do I pass a rust func as a function pointer to C?
[04:20:09] <arrrrrrrrr> extern "C"
[04:20:20] <arrrrrrrrr> extern "C" fn my_func(....
[04:21:02] <ercxx> and pass it to C like `func_that_takes_a_func(my_func)` ?
[04:21:09] <arrrrrrrrr> yeah
[04:21:13] <ercxx> thank you
[04:22:37] <mindcat> so how do python call a rust function? :D
[04:22:49] <arrrrrrrrr> extern "C"
[04:22:54] <arrrrrrrrr> :)
[04:23:03] <ercxx> what would be the signature of the func for the binding? Something like `some_C_func(func: *proc())` ?
[04:23:45] <arrrrrrrrr> ercxx: http://static.rust-lang.org/doc/master/tutorial-ffi.html
[04:23:54] <ercxx> sorry, thanks
[04:24:50] <arrrrrrrrr> that doesn't seem to contain your question actually
[04:25:06] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[04:25:27] <arrrrrrrrr> replace *proc() by extern "C" fn(yada) -> yada
[04:25:36] <ercxx> Seems like the las part gets very close.
[04:25:43] <ercxx> I'll try
[04:26:19] <arrrrrrrrr> btw: for what reason does rust use a different calling convention?
[04:26:35] <eevee> hmm i wish http://static.rust-lang.org/doc/master/std/io/ actually showed or redirected to http://static.rust-lang.org/doc/master/std/io/index.html
[04:27:06] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[04:28:27] <ChrisMorgan> eevee: at present, it's all served directly from S3, which doesn't do that.
[04:29:14] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:29:56] <arrrrrrrrr> are turing machines computer complete? that is, can turing machines compute everything a pc can compute? I'll leave the definition of pc up to you :p
[04:32:36] <ercxx> is there a shorter way of making a *c_char then `"some string".to_c_str().unwrap())` ?
[04:32:51] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[04:33:11] <arrrrrrrrr> with_c_str
[04:34:05] <ercxx> cool, thanks
[04:35:19] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:40:45] <mindcat> I just can't make a TcpStream work for two tasks
[04:40:57] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[04:41:49] <arrrrrrrrr> keywords: forget, transmute, unsafe, raw pointers
[04:41:59] <arrrrrrrrr> but muh, don't do that
[04:42:02] <arrrrrrrrr> *meh
[04:42:53] <mindcat> or where can I use event system?
[04:43:31] <mindcat> well, I don't know everythings
[04:45:10] <arrrrrrrrr> I can't tell you how to do it in a safe way but if ChrisMorgan says that you can't split it up into reader and writer then I'm pretty sure that you aren't supposed to use it in multiple tasks at once
[04:45:15] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[04:46:08] <mindcat>  rusti: "show me the async read/write system."
[04:46:22] <ChrisMorgan> mindcat: there isn't any.
[04:49:31] *** Quits: ercxx (ercan@moz-5B55241D.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[04:51:41] <Jarrett> well I'd love to make a repro for this ICE but I'm well and truly stumped
[04:56:11] <mindcat> ChrisMorgan: so can I play "Coroutine"?
[04:56:46] <ChrisMorgan> mindcat: explain further what you mean by that, exactly?
[04:57:08] <mindcat> ChrisMorgan: http://en.wikipedia.org/wiki/Coroutine
[04:58:06] <ChrisMorgan> mindcat: I'm familiar with the concept; I'm meaning more specifically the model that you're picturing. Multiple tasks with communication links between them?
[04:59:24] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[05:00:29] <mindcat> ChrisMorgan: I am thought wrong, sorry
[05:03:59] <mindcat> I don't have skill to spilt the TcpStream now :(
[05:06:05] <ChrisMorgan> mindcat: it'll require the careful use of unsafe code and needs to be done in the standard library. I could probably get it working myself but acrichto is working in that area at present and so I'm waiting for the dust to settle before discussing it further.
[05:06:44] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:06:57] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:08:40] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[05:10:35] <gavinb> bjz: When using cgmath::Mat4 with rs-opengl, how are you supposed to pass the matrix data to a GL function like matrix_4f ?
[05:10:47] <mindcat> ChrisMorgan: ok, I will write the proxy with python language now :D
[05:11:07] <arrrrrrrrr> mindcat: or simply use go
[05:11:08] <ChrisMorgan> mindcat: that is, unfortunately, the pragmatic approach at present.
[05:11:29] <arrrrrrrrr> Go is perfect for this kind of stuff
[05:12:22] <bjz> gavinb: you could import cgmath::prt::Ptr and use .ptr()
[05:12:36] <ChrisMorgan> arrrrrrrrr: when stable, Rust should be even more perfect than Go for this kind of stuff.
[05:12:42] <mindcat> arrrrrrrrr: I won't stop writing somethings with rust language :)
[05:12:50] <arrrrrrrrr> right now it's far far away from that
[05:13:01] <bjz> gavinb: that basically gets a reference to the first element
[05:13:03] <mindcat> arrrrrrrrr: oh,it is "go"...
[05:13:50] <gavinb> bjz: aha, ok, thanks - didn't notice that module
[05:13:56] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:14:36] <gavinb> bjz: and how about setting the value of a given element? I can't seem to use mut_cr() on a Mat4?
[05:15:15] <bjz> *mat.mut_cr(..) = ...;
[05:15:48] <bjz> I should add docs for that
[05:15:49] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:15:52] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[05:15:54] <bjz> sorry!
[05:16:06] <gavinb> let projection_matrix: Mat4f = Mat4::identity(); projection_matrix.mut_cr(1, 0) = aspect_ratio;
[05:16:22] <gavinb> bjz: don't apologise! You've provided a great library! :)
[05:16:45] <bjz> you need to deref on the lhs
[05:17:07] <bjz> *projection_matrix.mut_cr(1, 0) = aspect_ratio;
[05:17:14] <gavinb> hm: error: type `cgmath::matrix::Mat4<f32>` does not implement any method in scope named `mut_cr`
[05:17:30] *** Joins: vk (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[05:17:33] <bjz> import cgmath::matrix::Matrix
[05:18:08] <gavinb> Oh I only have: use cgmath::matrix::Mat4;
[05:18:24] <bjz> yep :)
[05:18:30] <gavinb> cool, that did the trick!
[05:18:32] <bjz> cgmath::matrix::{Mat4, Matrix};
[05:18:32] <gavinb> thanks dude
[05:18:37] <bjz> np!
[05:20:22] <gavinb> Hm, the ptr() isn't quite happy: error: mismatched types: expected `&[f32]` but found `&f32` (expected vector but found &-ptr)
[05:20:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:21:21] *** Quits: mindcat (mindcat@3DB84856.C3C73C40.E47F7BFE.IP) (Quit: leaving)
[05:21:49] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[05:23:53] *** Quits: sprang (sprang@moz-824FD61F.hsd1.ca.comcast.net) (Quit: sprang)
[05:24:44] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[05:24:58] <acrichto> ChrisMorgan: good to hear about the benchmarks! Out of curiosity, do you know what the bottleneck is right now? Also I have not given much more thought into splitting a reader/writer. I know that it is very possible but I have yet to be convinced that it is the strategy that we wish to take
[05:25:10] <Jarrett> gavinb: what's the type of the value you're calling .ptr() on?
[05:25:46] <ChrisMorgan> acrichto: I haven't profiled it this time.
[05:26:11] <acrichto> ChrisMorgan: if you do see any major bottlenecks in the runtime, please do let me knwo!
[05:26:41] <ChrisMorgan> acrichto: have you any suggestions of alternative techniques for maintaining a port where you wish to be able to read and write simultaneously?
[05:26:46] <gavinb> bjz: It's a parameter Mat4, which is type Mat4f = Mat4<f32>;
[05:27:10] <gavinb> and it just became obvious I should have made that a reference...
[05:27:29] <acrichto> ChrisMorgan: io::select would be a more general solution to solve it, you would select over reading the port and some pipe you own and then you trigger a write by writing to the pipe
[05:28:33] <ChrisMorgan> acrichto: that would of itself require the stream to be accessible across multiple tasks.
[05:29:00] <acrichto> ChrisMorgan: no you'd just need to pass the reading end of the read/write pipe to the task which owns the port
[05:29:07] <ChrisMorgan> (I know I am conflating the two issues at times in these discussions. They're fairly closely related, though they can have quite different practical applications.)
[05:29:16] <Jarrett> hm, there's isn't any way to "expand" or "unpack" a tuple is there? as in, suppose I have a fn foo(a: int, b: int) and I have a tuple t: (int, int); I want to call f with the values in t without having to do "let (a, b) = t; f(a, b);"
[05:29:34] <acrichto> ChrisMorgan: io::select is a general solution, but it may not turn out to be a practical solution, but I would like to pursue it first
[05:29:47] <Jarrett> gavinb: that should work.. I've been playing around with cgmath and used .ptr() on a Mat4<f32> just fine
[05:29:49] <ChrisMorgan> acrichto: that requires feeding it through std::comm rather than using the Stream directly.
[05:30:10] <acrichto> ChrisMorgan: no this is io::select, not comm::select
[05:30:13] <Jarrett> gavinb: what is expecting &[f32] anyway?
[05:30:30] <gavinb> Jarrett: it's gl2::uniform_matrix_4fv
[05:30:35] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[05:32:01] <ChrisMorgan> acrichto: OK, I'm somewhat lost now.
[05:32:03] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[05:32:17] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:32:29] <acrichto> ChrisMorgan: so the fundamental problem is that you cannot simultaneously read and write to a stream, my idea of a solution is io::select which will select over a read on multiple streams
[05:32:45] <acrichto> ChrisMorgan: you can use this io::select function to implement simultaneous reading/writing on a socket
[05:33:30] <ChrisMorgan> Is there a design document describing this io::select?
[05:33:40] * ChrisMorgan can't find anything on GitHub
[05:33:52] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:34:01] <acrichto> ChrisMorgan: sadly no, mostly just in brson's and my heads
[05:34:10] <acrichto> we can't make progress right now due to troubles with libuv
[05:34:15] <Jarrett> gavinb: ah, is that a Rust-ic openGL wrapper? I'm using raw openGL calls which I guess is what .ptr() is meant for
[05:34:44] <gavinb> Jarrett: yes, I'm using rs-opengles
[05:34:47] <ChrisMorgan> Jarrett: embrace using words! s/Rust-ic/Rustic/!
[05:34:50] <arrrrrrrrr> is there an xcb wrapper?
[05:34:53] <Jarrett> haw haw
[05:35:10] <gavinb> Jarrett: it's rustalicious!
[05:35:13] <Jarrett> ;D
[05:36:23] <gavinb> Jarrett: what kind of app are you working on, if I may ask?
[05:36:32] <Jarrett> a toy app :P
[05:36:40] <Jarrett> I'm just getting my feet wet with Rust
[05:37:07] <gavinb> same; I'm writing a particle simulator to explore using Rust for gfx.
[05:37:41] <Jarrett> oooh
[05:37:52] <Jarrett> I should write a gravity simulator like http://www.nowykurier.com/toys/gravity/gravity.html
[05:38:02] <Jarrett> I've been wanting to do one in something that isn't flash :P
[05:38:49] <Jarrett> also there's #rust-gamedev :)
[05:39:02] <ChrisMorgan> acrichto: given the TcpStream is one object, I'm struggling to see how io::select will solve the problem; take an IRC bot, for example, which must be listening constantly (to respond to commands) and which must also write messages occasionally, triggered perhaps by an IRC command, perhaps by a timer, perhaps by external environment. How is that going to work?
[05:39:26] <gavinb> Jarrett: I should pop in
[05:39:43] <gavinb> (not that I'm into games per se; but image processing and graphics and stuff)
[05:39:46] <acrichto> ChrisMorgan: you create an extra pipe with a reader/writer halff and you select() over the read half of the pipe and the tcp connection, when you want to write data you write it on the write end of the pipe
[05:40:27] <ChrisMorgan> acrichto: I presume that would end up less efficient?
[05:40:29] <Jarrett> gavinb: yeah, that kind of stuff is fine
[05:40:43] <acrichto> ChrisMorgan: unclear, I would want a benchmark showing it as such
[05:40:49] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[05:40:49] *** Quits: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[05:41:05] <eevee> i keep accidentally finding things i want to write in rust that require multiple objects to know about one configuration object
[05:41:16] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Ping timeout)
[05:41:30] *** Quits: sam (sam@7711C295.C8C6FF5E.4065847B.IP) (Ping timeout)
[05:41:47] <arrrrrrrrr> eevee: one module that contains mutable statics and reads/writes from them via wrapper functions
[05:42:11] <eevee> arrrrrrrrr: that's pretty gross
[05:42:21] <arrrrrrrrr> that's pretty much the only way
[05:42:30] <arrrrrrrrr> without passing config objects around
[05:43:57] *** Quits: cdidd (cdidd@moz-DAECF479.broadband.corbina.ru) (Ping timeout)
[05:44:05] <eevee> surely servo runs into this sort of thing a lot, with trees everywhere
[05:47:55] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[05:49:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:54:48] <bjz> gavinb: oh
[05:55:07] <arrrrrrrrr> eevee: you can write a nice macro for that :)
[05:55:09] <bjz> gavinb: I was thinking you were wanting a ptr to the beginning
[05:55:21] <bjz> gavinb: the gl functions take *T
[05:55:39] <gavinb> bjz: yeah sorry I didn't explain the Q clearly
[05:56:31] <gavinb> I figured I was missing something obvious though, as cgmath seems aimed squarely at OpenGL
[05:56:53] <bjz> gavinb: what opengl are you using?
[05:57:02] <Yurume> is there any reason that MoveIterator performs O(n) swaps?
[05:57:13] <gavinb> bjz: rust-opengles on Mac
[05:57:23] <gavinb> A fairly recent checkout (last week?)
[06:00:05] <bjz> ah ok. yeah I use gl-rs
[06:00:18] <bjz> rust-opengles has a wrapper over it
[06:00:37] <bjz> cgmath should have ways of interfacing with libs like that
[06:00:59] <bjz> to cast the types as various things
[06:01:25] <sfackler> Yurume: it can't return values in order otherwise
[06:01:27] <gavinb> bjz: oh! I didn't realise there were two flavours of bindings. Why would you use gl-rs over the other?
[06:02:00] <Yurume> sfackler: safely, yes, but aren't built-in iterators like that supposed to be free to use unsafe semantics?
[06:02:04] <bjz> gavinb: servo uses rust-opengles
[06:02:23] <sfackler> Yurume: what unsafe semantics could it use?
[06:02:32] <bjz> gavinb: opengles is a subset of the opengl spec, designed for mobile devices
[06:02:41] <strcat> Yurume: the reverse vector move iterator doesn't need swaps
[06:03:05] <bjz> gavinb: it's really much more manageble than the whole of opengl, but it runs behind the technology curve
[06:03:07] <strcat> the forward one needs it if we aren't going to have drop flags (which is the plan)
[06:03:21] <strcat> if moved from values aren't safe to call a dtor on, you can't do it without swaps
[06:03:33] <gavinb> bjz: yeah I know; I found it oddly but it works just fine on Mac with glfw using gl2::*.
[06:03:35] <Yurume> sfackler: like that, MoveIterator has *T + len (destructured from ~[T] while not deallocating it), it "moves" from transmuted &Ts to the return value, and the iterator has an unsafe dtor which manually frees *T.
[06:03:47] <Yurume> hmm
[06:03:49] <strcat> atm it could avoid swaps and zero out the source instead, but that's depending on an implementation detail that's changing soon
[06:03:51] <bjz> gavinb: gl-rs allows you to have the latest extensions, and to load it nicely so it works on lots of different computers
[06:03:58] <bjz> gavinb: yeah, it does
[06:04:05] <strcat> Yurume: destroying a moved from value would be unsafe
[06:04:09] <strcat> I can think of other ways to write it
[06:04:25] <gavinb> bjz: sounds like I should switch to using gl-rs then...
[06:04:26] <bjz> gavinb: because OSX supports all the opengles2 features
[06:04:28] <strcat> it could store the vector in a way that avoided the vector dtor working
[06:04:31] <strcat> and implement a dtor itself
[06:04:34] <strcat> and keep track of the start
[06:04:48] <strcat> I would like to move to a sane vector representation before hardcoding anything like that
[06:04:51] <bjz> gavinb: well, you don't need to. but be aware servo runs behind master
[06:04:53] <gavinb> bjz: even though I create a 3.2 core context... impressive! :)
[06:05:13] <Yurume> strcat: seems more complicated than what I've imagined. hmm.
[06:05:27] <strcat> well this is actually a good way to do it
[06:05:33] <bjz> gavinb: so opengles might break in the future and it wont be fixed for a while. jeaye had some issues with that
[06:05:35] <strcat> for some reason I didn't think of this before
[06:06:14] <gavinb> bjz: hm I've already found a few issues...
[06:06:14] <bjz> gavinb: I keep gl-rs building on master. it's checked by continuous integration every day
[06:06:21] <Yurume> strcat: is that effectively a partially initialized (i.e. v[start]..v[len-1] are initialized and v[0]..v[start-1] aren't when start>0) vector?
[06:07:11] <gavinb> bjz: nice
[06:07:21] <Yurume> oh wait- I thought you meant to store start in the vector.
[06:08:34] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:09:00] <strcat> Yurume: I'll implement it for the better vector representation and open an issue about it
[06:12:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:14:14] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:16:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:16:29] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:16:51] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:17:51] <dbaupp> strcat: (isn't that vec-move-iterator stuff exactly what you did for deque in rust-core?)
[06:18:08] <strcat> dbaupp: pretty much
[06:18:26] <dbaupp> strcat: and in fact, the move iterator would become a deque itself
[06:18:32] <strcat> I can make that deque more efficient though, several times faster than the libextra one isn't good enough ;p
[06:18:43] <dbaupp> (a read-only one, I guess.)
[06:19:02] <strcat> well, pop-only
[06:19:11] <dbaupp> yeah, that's what I meant :P
[06:19:27] <strcat> it's true that you could just implement it by converting to a deque
[06:19:29] <strcat> heh
[06:19:34] <strcat> not ideal though
[06:19:56] <dbaupp> although that'd be very DRY
[06:21:48] <strcat> yeah I might just do it that way
[06:21:56] <strcat> storing iterators isn't normal
[06:23:40] <strcat> dbaupp: on the other hand, the deque does add overhead.
[06:23:46] <strcat> so nvm
[06:23:58] <dbaupp> how much?
[06:24:25] <strcat>                 self.lo = (self.lo + 1) % self.elts.capacity();
[06:24:27] <strcat> this is a big deal
[06:24:48] <strcat> if I guaranteed the capacity was always a power of 2 this could be bit magic
[06:24:54] <strcat> I'll probably get to that
[06:25:05] <strcat> dbaupp: div/mod are really slow.
[06:25:07] <o11c> strcat: store the capacity as a bitshift ...
[06:25:20] <strcat> o11c: yes, but atm it's not guaranteed to be a power of 2
[06:25:35] <strcat> and there's value in being able to convert vectors to deques without reallocating
[06:26:04] <strcat> for hash tables it's an obvious thing to do
[06:26:13] <strcat> if you don't have a slow hash like SipHash at least...
[06:26:19] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:26:55] <Yurume> strcat: mod is slow, but it's rather inc + cmp + conditional xor.
[06:27:10] <Yurume> (you won't want to use mod in that case anyway)
[06:27:33] <o11c> strcat: hm are there tricks for mod by 3 << N ?
[06:27:59] <dbaupp> strcat: Is "there's value in being able to convert vectors to deques without reallocating" an argument for or against guaranteeing size = 1 << n?
[06:28:02] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[06:28:24] <strcat> o11c: dunno
[06:28:25] <o11c> dbaupp: it means that vector must have the same gaurantees as deque
[06:28:44] <dbaupp> o11c: only if one wants the guarantee of no realloc ever
[06:28:51] <strcat> apparently doubling the size each time is a bad idea though
[06:28:57] * strcat shrugs
[06:29:00] <dbaupp> oh, that answers that.
[06:29:05] <strcat> although I haven't really experienced it in practice
[06:29:20] <strcat> dbaupp: if you only allow powers of 2, you make a lot of cases quite a bit bigger
[06:29:25] <strcat> especially if you have *many* vectors
[06:29:37] <o11c> strcat: thats why I said 1 << or 3 <<
[06:29:43] <dbaupp> strcat: yes, your average over-alloc is like, 1.4, or something.
[06:29:47] <o11c> because I think that's all malloc gives you anyway
[06:30:06] * dbaupp guesses from sqrt(2), although it might be something more logarithmic.
[06:30:47] <strcat> although, a good allocator is able to tell you the allocation size
[06:30:56] <strcat> and that probably renders the point moot...
[06:31:06] <strcat>        int rallocm(void **ptr, size_t *rsize, size_t size, size_t extra, int flags);
[06:31:10] <strcat> jemalloc's alternate API
[06:31:14] <strcat> writes the real size to rsize
[06:31:15] <o11c> I think you'll gain more from making nice with the allocator than with making nice with the integer math
[06:31:28] <strcat> so you could pass a ptr to the capacity
[06:31:30] <strcat> and you're all set
[06:31:55] <strcat> o11c: yeah I'm just not sure if it's worth bikeshedding 1.5x vs 2x growth
[06:32:04] <strcat> if you can just get the allocator to tell you exactly how much it alloc'ed anyway...
[06:32:27] <gavinb> bjz: today's challenge is to rewrite my OpenGL code to use your hidings before my train arrives at the station. Wish me luck...
[06:32:47] <strcat> I wonder how frequent in-place reallocs really are if you're aware of the alloc sizes
[06:33:36] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[06:33:42] <o11c> strcat: I'm going to guess never
[06:34:06] <o11c> because it would be very black magic if you checked if a particular page was mapped or not
[06:34:07] <strcat> o11c: for very large sizes realloc might fall through to mremap instead of mmap + munmap though
[06:34:21] <o11c> ooh, point
[06:34:51] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[06:35:22] <strcat> I don't really know anything about how linux does mmap/munmap/mremap.
[06:35:46] <o11c> yeah, I didn't remember mremap, you do want to call it if you can
[06:35:46] <strcat> beyond that I seem to remember it being log(n) in the worst-case (for allocate or free? I forget) and it uses RCU instead of locking...
[06:37:02] <o11c> if mmap'ed pages are not currently shared (they should not be for malloc), mremap won't have to move any physical memory, just change page tables
[06:37:10] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[06:37:29] <strcat> ah, right
[06:39:52] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[06:43:58] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:49:22] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[06:52:05] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[06:53:24] <eddyb> forget your dish washer: https://www.youtube.com/watch?v=atVSxvbiPg0
[06:56:16] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[06:58:13] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[06:59:38] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[07:00:31] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[07:00:46] *** Quits: sellout (Adium@moz-AE26682A.hlrn.qwest.net) (Ping timeout)
[07:01:23] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[07:01:32] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-3D1B1221.dynamic.qsc.de) (Ping timeout)
[07:05:56] <Jarrett> Ben does the best videos
[07:06:25] <Jarrett> I mean seriously who makes SEMs and LCD displays in their free time
[07:06:26] <Jarrett> this guy
[07:07:18] *** Joins: sellout (Adium@moz-AE26682A.hlrn.qwest.net)
[07:08:21] <killerswan> here's a fun question maybe nobody knows the answer to here
[07:08:46] <killerswan> How do tests in rust decide whether or not to color the output?
[07:09:00] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[07:09:13] <killerswan> And how does rustic (like for errors)?
[07:09:24] <strcat> rustc uses terminfo
[07:09:33] <strcat> there's a native terminfo parser, etc. in libextra
[07:10:14] <dbaupp> tests only colour output when they're running on a single thread
[07:10:15] <sfackler> tests only color output if they're run with a single task iirc
[07:10:38] <killerswan> I've written a program which calls each, and prints its stdout/stderr to stdout
[07:11:04] <killerswan> and the errors, at least, I'd like to read and then write back out in color
[07:11:36] *** Quits: Jarrett (chatzilla@moz-8211AC00.dhcp.nrwl.ca.charter.com) (Ping timeout)
[07:11:39] <killerswan> (and since I'm not goofing around with the strings I read, I presume rustic realizes my program isn't an xterm and gives me no colors)
[07:11:46] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Hibernating, be back soon.)
[07:12:00] <killerswan> s/rustic/rustc/  (f* you auto-correct)
[07:12:27] <ChrisMorgan> (P.S. That's not a good reason for avoiding colour, but none of us have got round to fixing it properly yet.)
[07:13:10] <strcat> the proper way to fix it is only printing in one thread
[07:13:20] <strcat> and queuing up stuff you want to print
[07:13:24] <killerswan> that is re: tests
[07:13:40] <killerswan> you've reminded me of that and I'm fine with leaving that output uncolored
[07:13:50] <killerswan> errors from rustc, though?
[07:14:14] <killerswan> those are colored by default
[07:15:08] *** Quits: thesnowdog (doug@774A27EF.8E46834.6F17036B.IP) (Connection reset by peer)
[07:17:06] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[07:18:12] <ChrisMorgan> strcat: not necessarily; you just need to ensure that things like colour codes get sent all at once—activate, contents, deactivate. Or you just say, hang it all—it's not particularly likely to get messed up, and even if it does, it's not a big deal.
[07:18:50] <strcat> ChrisMorgan: lines shouldn't be getting interleaved
[07:20:13] <ChrisMorgan> Sure; but is it going to cause real trouble if they do? (Of course, someone might try parsing the command's output, but in such circs. I'd be quite happy with saying "run it with RUST_TEST_TASKS=1".)
[07:22:15] <killerswan> considering things like error messages for multiple tests at once, it may happen a lot, actually
[07:22:16] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[07:22:20] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[07:22:58] <killerswan> and having a logger agent of some sort wouldn't be such a bad thing
[07:23:22] <killerswan> (actually I'm surprised there isn't one in the std lib already)
[07:26:44] <killerswan> but back to my vanity question, is there some environment variable I could set to trick rustc into giving me char codes?
[07:27:16] <o11c> TERM=dumb ?
[07:29:26] <eevee> oh no write_line and write_str are gone
[07:32:38] <killerswan> o11c: no...
[07:35:09] <killerswan> hmmm, rustc is a library, though, so I can maybe just call it?
[07:35:18] *** Joins: Liigo (Liigo@B142958A.CF272734.C3C201E8.IP)
[07:35:25] <killerswan> (how to make my program more complex....)
[07:37:55] <killerswan> oh my goodness, I can just call main_args directly
[07:37:59] <killerswan> beautiful
[07:38:14] *** Joins: Jarrett (chatzilla@moz-8211AC00.dhcp.nrwl.ca.charter.com)
[07:38:20] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Client exited)
[07:39:04] *** Quits: Liigo (Liigo@B142958A.CF272734.C3C201E8.IP) (Client exited)
[07:41:09] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[07:41:21] <killerswan> well
[07:41:25] <killerswan> maybe not exactly
[07:46:50] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:47:42] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[07:48:37] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:51:04] <geomyidae> has there been a box 3 vs box(3) discussion?
[07:52:20] <sfackler> iirc box 3 is sugar for box(Unique) 3, or whatever the name for the unique allocator will be
[07:53:07] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[07:53:19] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:54:00] <strcat> sfackler: s/allocator/pointer/
[07:54:04] <strcat> allocators are something else
[07:54:52] <sfackler> isn't the allocator what goes in the optional part of the box syntax though?
[07:54:59] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:55:20] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:55:32] <strcat> sfackler: no, that's not what allocators are
[07:55:37] *** Joins: z0w0 (zack@moz-7B305DFB.lnse1.woo.bigpond.net.au)
[07:55:43] <strcat> if rust ends up calling that an allocator it won't be good, because allocators are something else
[07:55:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[07:56:05] <strcat> various containers and smart pointers could take an allocator parameter
[07:56:13] <strcat> malloc/realloc/free is an example of an allocator
[07:56:44] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:56:47] <killerswan> the librustc::main_args problem: https://gist.github.com/killerswan/7983652
[07:56:47] <strcat> there are many use cases for custom ones, like a cache aligned allocator, specialized pools, etc.
[07:57:29] <killerswan> is there something else I should do to prep librustc besides call its starting function?
[07:57:31] <strcat> anyway rust is very weak in this area and it's easy to get wrong (as proven by C++) so I hope it will be thought out well...
[07:57:45] <strcat> C++ didn't have proper allocators until C++11 ;\
[07:58:07] <strcat> and it's still pretty bad since it conflates allocation with construction, even though placement new exists
[07:58:40] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[07:59:32] <killerswan> (this "error: multiple input filenames provided" is kinda goofy)
[08:01:48] *** Quits: KindOne (KindOne@moz-ADEEC3B9.dynamic.ip.windstream.net) (Ping timeout)
[08:06:03] *** Joins: KindOne (KindOne@moz-AD778EEF.dynamic.ip.windstream.net)
[08:06:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:08:19] <eddyb> sfackler: Rc is not an allocator
[08:08:44] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:08:51] <eddyb> sfackler: however, I've seen arenas mentioned, which *are* allocators - so imagine let x: Rc<int> = box(my_arena) 5;
[08:10:09] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[08:11:21] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[08:11:29] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:12:36] *** flaper87|afk is now known as flaper87
[08:13:41] * strcat is not really happy about rust reserving yet another common word ;\
[08:14:56] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[08:15:43] <eddyb> strcat: and nobody can blame me muhahahaha >:))
[08:16:48] <strcat> time to start calling ~ a unique pointer
[08:16:48] <eddyb> haha, you can actually do this? https://github.com/Hoverbear/rust-rosetta/blob/master/swap.rs#L19
[08:17:28] <strcat> sure
[08:17:41] <strcat> the deref there is basically just a field access
[08:18:15] <eddyb> https://github.com/Hoverbear/rust-rosetta/commit/4d3a98b3dffb488bd3fdd54b203b673696ee8c90#commitcomment-4866522
[08:18:17] <eddyb> heh
[08:19:00] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[08:22:42] <strcat> https://github.com/thestinger/rust-core/commit/d3dafa9825658dfefcd809840d240db268ec7672
[08:23:01] <strcat> the result of calling it box is not being able to call boxes boxes
[08:23:19] <strcat> and anyway, if it's truly as powerful as placement new then box doesn't make much sense
[08:23:25] <strcat> I don't understand why we settled on that
[08:24:00] <strcat> how is constructing some type at an address in-place "boxing"?
[08:24:06] * strcat shrug
[08:24:08] <strcat> s
[08:24:11] *** Joins: Ms2ger (Ms2ger@BB191E51.D97EE64B.F15B0BB3.IP)
[08:24:54] <eddyb> http://rosettacode.org/wiki/Generic_swap it's missing ES6 [a, b] = [b, a];
[08:25:23] <eddyb> and now I wish Rust would let you do (a, b) = (b, a); I should write down my idea for that somewhere
[08:25:35] <strcat> eddyb: why? that doesn't do anything
[08:26:01] <eddyb> strcat: destructuring assignment
[08:26:16] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (NickServ (GHOST command used by strcat1))
[08:26:29] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:27:12] <eddyb> /ns regain should be easier - though forgetting to escape that made it clear it's not supported here :(
[08:27:45] <strcat> eddyb: (x, y) is an expr
[08:28:00] <eddyb> but it's an assignment LHS, it should be a pattern
[08:28:05] <strcat> no
[08:28:10] <strcat> *x.y = foo;
[08:28:26] <strcat> it's 'expr = expr;'
[08:28:40] <eddyb> we don't have proper lvalues in the language :/
[08:28:55] <strcat> we do have proper lvalues afaik
[08:29:08] <eddyb> it's a mess
[08:29:20] <strcat> I haven't seen that
[08:29:31] <strcat> all I know is that destructuring assignment would be ambiguous
[08:29:34] <eddyb> anyways - destructuring assignment would be way more limited than let or match
[08:29:42] <strcat> expressions already appear there
[08:29:56] <eddyb> it should be a pattern of lvalues
[08:30:05] <strcat> and rust doesn't do unbounded lookahead or resolving parser issues via typeck
[08:30:17] <eddyb> *ahem*, converting Expr to Pat :P
[08:30:36] <strcat> anyway back to making a fast move iter
[08:30:37] <eddyb> (*x.a, *x.b) isn't an lvalue, but the two exprs inside are
[08:30:41] <strcat> I'll make my displeasure about box known later ;p
[08:30:56] <eddyb> (assuming lvalues were a proper thing in Rust)
[08:31:00] <strcat> new was a sane name....
[08:31:05] <eddyb> (like they are in C++)
[08:31:11] <strcat> why not just call it 'place'
[08:31:52] <klutzy> eddyb: this? https://github.com/mozilla/rust/issues/10174
[08:34:25] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[08:35:30] <geomyidae> *mut pcap_t; // how do I check this full null? I tried == with ptr::null but that didn't work
[08:35:46] <strcat> ptr::null is a function
[08:35:47] <klutzy> == ptr::mut_null()?
[08:36:14] <geomyidae> oh man, me and mut again.
[08:36:15] <geomyidae> thanks
[08:36:19] <strcat> or just 'as uint == 0'
[08:36:42] <geomyidae> is == ptr::mut_null safe? it seems more idiomatic at least.
[08:37:06] <Jarrett> geomyidae, are you familiar with const in C/C++? :)
[08:37:09] <strcat> neither is more idiomatic or more safe
[08:37:53] <geomyidae> strcat: for ffi, it's unavoidable to some degree, something has to be somewhat idomatic surely? otherwise why have ptr::mut_null(). no?
[08:38:06] <geomyidae> (I do understand their unsafe nature)
[08:38:13] <strcat> mut_null is not unsafe
[08:38:28] <eddyb> creating/casting unsafe pointers isn't unsafe
[08:38:36] <eddyb> dereferencing an unsafe pointer is unsafe
[08:38:41] <geomyidae> Jarrett: I won't say I was any better at handling constness there either
[08:38:44] <Jarrett> oh XD
[08:38:48] <strcat> geomyidae: the stdlib defines plenty of useless functions
[08:39:02] * geomyidae literally laughed
[08:39:03] <geomyidae> I see
[08:39:19] <strcat> imo there's no point in a 'null()' function that's more painful than just asking for what you want in the first place
[08:39:54] <dbaupp> geomyidae: there is `.is_null()`, fwiw
[08:40:03] <Ms2ger> So you'd prefer writing 0 as *Foo every time you want to initialize?
[08:40:19] <dbaupp> strcat: null() is nice because you can use type inference to avoid writing *HugeTypeName
[08:40:24] <strcat> Ms2ger: rather than mut_null::<Foo>? definitely.
[08:40:41] <geomyidae> Ah, I'm finding more and more of those things like that, I also deduced errbuf.as_mut_ptr() too rather than what I'd been previously doing, that I think also went away when I updated rust today :P
[08:40:50] <strcat> dbaupp: sometimes. anyway type inference is a pretty bad thing to rely on for this
[08:40:55] <Ms2ger> strcat, ptr::null() seems to have worked for me
[08:41:12] <strcat> Ms2ger: if you already have the type later one
[08:41:16] <strcat> later on*
[08:42:46] <strcat> I'd rather just have a null literal like C++11
[08:44:31] <strcat> rust's raw pointers really suck.
[08:45:41] <strcat> ptr.offset(5), ptr.offset(-5), ptr = mut_null(), etc. makes me sad ;\
[08:45:48] <strcat> and especially == mut_null()
[08:46:13] <strcat> is_null() is sane at least ;p
[08:48:20] <killerswan> "you'll shoot your eye out!"
[08:54:55] <geomyidae> I think I'm only stuck on one last thing :o fn something(*mut *mut Struct_pcap_pkthdr) I can't figure out the right magic of & ands muts to pass to it
[08:55:16] <strcat> &mut
[08:55:24] <strcat> will coerce to *mut
[08:56:09] <geomyidae> https://raw.github.com/colemickens/pcapfe/master/build_log.txt
[08:56:12] <geomyidae> is what I get
[08:56:16] <Yurume> rusti: let mut v = 42; fn unsafe_write(v: *mut uint) { unsafe {*v = 54;} } unsafe_write(&mut v); v
[08:56:29] <Yurume> rusti, oh, rusti!
[08:56:50] <strcat> I need to teach it to identify
[08:56:51] <strcat> lazy
[08:57:27] <Yurume> anyway, indeed, I was unsure about the coercion from &[mut] T to *[mut] T
[08:58:14] <geomyidae> pcapfe.rs:104:57: 104:77 error: mismatched types: expected `*mut *mut pcap::Struct_pcap_pkthdr` but found `&mut &mut pcap::Struct_pcap_pkthdr` (expected *-ptr but found &-ptr)
[08:58:14] <geomyidae> pcapfe.rs:104                 let result = pcap_next_ex(self.pcap_dev, &mut &mut pkthdr_ptr, &mut pkt_data_ptr);
[08:59:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:59:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[09:00:44] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:00:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[09:00:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:00:55] <dbaupp> geomyidae: you probably need `&mut (&mut ... as *mut struct_pcap_pkthdr)`
[09:01:02] <strcat> Yurume: there you go
[09:01:05] <strcat> rusti: 5 + 5
[09:01:07] -rusti- 10
[09:01:10] <strcat> rusti, "foo"
[09:01:10] -rusti- "foo"
[09:01:12] <dbaupp> geomyidae: the &mut -> *mut coercion is only at the top level
[09:01:17] <dbaupp> rusti; "foo"
[09:01:22] <dbaupp> rusti "foo"
[09:01:30] <Yurume> rusti: let mut v = 42; fn unsafe_write(v: *mut uint) { unsafe {*v = 54;} } unsafe_write(&mut v); v
[09:01:31] -rusti- 54u
[09:01:33] <Yurume> good.
[09:01:39] <strcat> dbaupp: it wants "rusti: " or "rusti, " ;p
[09:01:45] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[09:02:47] * geomyidae blinks
[09:03:48] <strcat> geomyidae: it will coerce &mut to *mut
[09:04:02] <strcat> not (&mut int, int) to (*mut int, int)
[09:04:53] <geomyidae> I think I see. I tried that, got another error, I'll keep futzing. (when I think I do something good, I sync my build_log to github fwiw heh)
[09:06:06] <geomyidae> oops
[09:08:07] *** Joins: ziad (Mibbit@moz-5729CEA7.hsd1.ca.comcast.net)
[09:09:28] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[09:09:59] *** Quits: ziad (Mibbit@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:10:31] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[09:11:30] <ziad> I'm compiling on Mac OS 10.8 and I'm getting the following error: error: ar s x86_64-apple-darwin/stage1/lib/rustc/x86_64-apple-darwin/lib/libstd-04ff901e-0.9-pre.rlib failed with: exit code: 1
[09:11:31] <ziad> note: stdout ---
[09:11:32] <ziad> note: stderr ---
[09:11:33] <ziad> Assertion failed: ((unsigned)Val < Attribute::EndAttrKinds && "Attribute out of range!"), function addAttribute, file Attributes.cpp, line 948.
[09:11:34] <ziad> ar: fatal error in /opt/local/bin/ranlib
[09:11:59] <ziad> Compilation was working fine before, the last rustc version I have was rustc 0.9-pre (898d2c3 2013-12-08 16:06:22 -0800)
[09:13:41] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[09:14:13] <strcat> ziad: strange, that looks like your rust LLVM is out-of-date
[09:14:32] * strcat shrugs
[09:14:51] <ziad> I did a make clean, git pull, and ./configure && make 
[09:14:52] <ziad> same thing
[09:15:06] <ziad> should I be doing anything else?
[09:15:17] <strcat> make clean-llvm will cause LLVM to be built again
[09:15:26] <strcat> may not be the issue
[09:15:41] <strcat> there's a file touched on an LLVM update
[09:15:49] <strcat> and the makefile is supposed to rebuild it, works here
[09:16:16] <ziad> strcat: I suppose it's better to try with a git clone into a fesh directory?
[09:16:33] <strcat> well not really any point, you can tell git to clean the dir
[09:17:10] <ziad> other than git clone? :) I'm not a git expert.
[09:17:17] <ziad> git checkout*
[09:17:34] <ziad> or git rebase?
[09:18:31] <strcat> ziad: git clean -xfd
[09:18:47] <strcat> removes all untracked files, resets everything to pristine state
[09:18:53] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[09:18:54] <Ms2ger> Are you uncompressing something?
[09:19:55] <ziad> strcat: thanks
[09:20:18] <ziad> Ms2ger: nope
[09:20:22] <ziad> not that I'm aware of anyway
[09:21:04] <Ms2ger> Because the only thing I know that'd accept -xfd as an argument is tar :)
[09:22:01] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:23:00] <killerswan> if I wait too long between rebuilds, I end up just going and deleting the arch folder (x86_64-apple-darwin) and carrying on with ./configure
[09:23:20] <ziad> Ms2ger: apparently '-f=force', '-d=remove untracked dirs', etc.
[09:23:36] <ziad> killerswan: I'll try that out
[09:23:42] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[09:24:03] <ziad> git clean -xfd takes care of that
[09:24:07] <strcat> killerswan: not much different than make clean
[09:24:13] <strcat> git clean wipes out *everything* impure ;p
[09:24:22] <ziad> yep
[09:25:29] <killerswan> :D
[09:29:41] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:37:06] *** Quits: vk (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0/20131209204824])
[09:37:32] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[09:38:02] *** Quits: derek_c (derek@moz-ADB3667D.cit.cornell.edu) (Input/output error)
[09:40:22] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:40:36] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[09:42:52] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[09:49:08] *** Joins: rca (rcatolino@14ADCB35.64386949.520D6FA6.IP)
[09:54:58] <yorickpeterse> morning
[10:01:30] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[10:04:06] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[10:05:11] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-3D1B1221.dynamic.qsc.de)
[10:06:39] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[10:06:50] <arrrrrrrrr> test
[10:09:02] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[10:09:35] <arrrrrrrrr> bjz: u ready for awesome code review?
[10:16:38] *** Joins: ezyang (ezyang@moz-2957C5C9.mit.edu)
[10:17:55] <Jarrett> the macros tutorial uses such a weird example
[10:18:18] *** Joins: cdidd (cdidd@moz-DAECF479.broadband.corbina.ru)
[10:18:43] <arrrrrrrrr> is it possible to get the expanded source with rustc?
[10:18:55] <Jarrett> yeah, it's uhhhh --pretty-something?
[10:19:36] <Jarrett> dammit
[10:20:03] <Jarrett> sorry I'm useless :P
[10:20:25] <Jarrett> ah, --pretty expanded
[10:25:03] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[10:25:34] <Jarrett> rustc --pretty expanded source.rs
[10:25:45] <Jarrett> arrrrrrrrr: ^
[10:29:48] <arrrrrrrrr> how do i concat a string and a macro variable  ->> set_$name()
[10:30:14] <dbaupp> concat_idents!(set_, $name)
[10:30:22] <dbaupp> it's highly likely to not work though
[10:30:25] <dbaupp> *highly*
[10:30:28] <Jarrett> :x
[10:30:31] <Jarrett> why so highly
[10:30:36] <strcat> do you really need concat_idents there?
[10:30:42] * strcat shrugs
[10:30:53] <dbaupp> strcat: yes, they're separate tokens
[10:30:58] <arrrrrrrrr> options.rs:11             pub fn concat_idents!(set_, $name)(v: $tpe) {
[10:31:08] <arrrrrrrrr> expected ( but found !
[10:31:10] <dbaupp> arrrrrrrrr: yes, that won't work
[10:31:23] <dbaupp> macros are only allowed in expression or item position
[10:31:29] <dbaupp> so concat_idents! is basically useless
[10:31:35] <Jarrett> ah
[10:31:44] <arrrrrrrrr> well, this sucks
[10:32:01] <dbaupp> rusti: let a_b = 1; macro_rules! foo ( ($name:ident) => ( a_$name ) ) foo!(b)
[10:32:02] -rusti- pastebinned 7 lines of output: http://sprunge.us/ijjF
[10:32:12] <arrrrrrrrr> install C preprocesor please
[10:32:16] <Yurume> in the other words: concat_idents!, if it's properly implemented, should not be a macro at alal.
[10:32:21] <Yurume> at all.*
[10:32:26] <dbaupp> or we just allow macros in more places :)
[10:32:35] <dbaupp> (which would be useful anyway)
[10:32:53] <dbaupp> e.g. methods, enum variants, struct fields, patterns, etc, etc.
[10:33:13] <Yurume> arrrrrrrrr: what are you trying to do?
[10:33:24] <Yurume> macro-generated properties?
[10:33:57] <ezyang> In Rust, if I have let x = ...; ...one use of x...; should I generally expect to be able to inline x? 
[10:34:03] <arrrrrrrrr> option!(int id = 1)
[10:34:05] <arrrrrrrrr>  14 option!(bool yes = true)
[10:34:12] <arrrrrrrrr> global variables with getter and setter
[10:34:46] <strcat> dbaupp: https://github.com/mozilla/rust/pull/10995 r?
[10:34:53] <dbaupp> ezyang: probably
[10:35:03] <strcat> it's totally going to crash on managed ptrs though, I dunno
[10:35:04] <ezyang> OK, I will file a bug then :) 
[10:35:05] <strcat> maybe not
[10:35:31] <dbaupp> ezyang: it really depends on what LLVM feels like doing though
[10:35:42] <ezyang> Nah, this is borrow checker related 
[10:35:47] <dbaupp> oh
[10:36:01] <arrrrrrrrr> I cant even define a variable and a getter right now because they would have the same name 
[10:36:09] <dbaupp> ezyang: oh, is it something like `foo.method_with_mut_self(foo.method())`?
[10:36:26] <dbaupp> arrrrrrrrr: what do you mean?
[10:36:27] <ezyang> no, not really 
[10:36:36] <dbaupp> arrrrrrrrr: you can have fields and methods with the same name
[10:36:44] <arrrrrrrrr> dbaupp: static mut $name ...
[10:36:46] <dbaupp> strcat: (looking now btw.)
[10:36:49] <arrrrrrrrr> pub fn $name ...
[10:36:50] <dbaupp> arrrrrrrrr: oh
[10:37:02] <Jarrett> what the heck does "macro expansion ignores token `,` and any following" mean
[10:37:11] <Yurume> arrrrrrrrr: how about option!(int get_id/set_id = 1) for compensation? ;)
[10:37:14] <dbaupp> arrrrrrrrr: you can pass `option!(int id = 1; get_id, set_id)` as a work around
[10:37:17] <strcat> arrrrrrrrr: https://github.com/thestinger/rust-core/blob/master/macros.rs#L31
[10:37:26] <yorickpeterse> man that nick makes this channel really sound like a bunch of pirates
[10:37:29] <Yurume> hmm, right, ident is still required
[10:37:30] <strcat> dbaupp: yup! it dies.
[10:37:38] <yorickpeterse> "Arrrrrrr rust me matey"
[10:37:40] <dbaupp> strcat: is NonManaged in yet?
[10:37:42] <arrrrrrrrr> Jarrett: add { and }
[10:38:04] <Jarrett> ....?
[10:38:08] <strcat> dbaupp: well, I'm fine with cordoning off all the containers with NonManaged but I'm sure no one else is ;p
[10:38:09] <Yurume> hmm, wait a min...
[10:38:14] <Jarrett> add { and } where?
[10:38:18] <arrrrrrrrr> Jarret => ( { ... } )
[10:38:22] <strcat> let me just add some more transmutes
[10:38:23] <ezyang> https://gist.github.com/ezyang/7985095 
[10:38:28] <strcat> transmutes solve anything right
[10:38:38] <dbaupp> Jarrett: a macro expands to a sequence of tokens, which a parser then parses into the actual AST; if the parser stops before parsing the whole sequence of tokens from the macro then that error is generated
[10:38:44] <ezyang> ^- dbaupp 
[10:39:02] <dbaupp> Jarrett: (since the user presumably doesn't want half their macro body to be silently ignored)
[10:39:09] <dbaupp> strcat: obviously
[10:39:23] <strcat> alright
[10:39:26] <strcat> added a transmute
[10:39:27] <strcat> I think it's fixed
[10:39:44] <dbaupp> ezyang: I guess it's basically smiilar to the foo....(foo....()) example
[10:39:58] <ezyang> I guess. So, not worth reporting? 
[10:40:02] <dbaupp> maybe
[10:40:12] <Yurume> rusti: macro_rules! a(($x:ident) => (a!($x; concat_idents!(get_,$x); concat_idents!(set_,$x))); ($x:ident; $getx:ident; $setx:ident) => (mod $x{fn $getx(){println("getx")}fn $setx(){println("setx")}})) a!(foo) foo::getfoo(); foo::setfoo();
[10:40:14] -rusti- pastebinned 6 lines of output: http://sprunge.us/UAQF
[10:40:20] <bjz> arrrrrrrrr: pmed you
[10:40:23] <dbaupp> ezyang: not sure if it's known to also not work in cases other than method calls
[10:40:29] <Yurume> phew.
[10:41:00] <ezyang> Well, I'm happy ot not report 
[10:41:15] <arrrrrrrrr> bjz: u w0t m8?
[10:41:26] <ezyang> anyway, afk, plane to catch 
[10:42:07] <dbaupp> ezyang: I can't find an issue, so feel free to report if you get time :)
[10:42:19] <dbaupp> strcat: pushed?
[10:42:23] <strcat> dbaupp: yes
[10:42:39] <Jarrett> I'm not.... really sure what I'm doing wrong here. yes this macro is dumb and doesn't really do anything yet besides put its arguments inside an array :P but https://gist.github.com/JarrettBillingsley/7985135
[10:43:10] <arrrrrrrrr> how do i make weechat work nicer with multiple windows?
[10:43:11] <Jarrett> and it complains with the error I mentioned pointing to the comma after the first tuple: "($a, $b), vertex_format_inner!($(($a_rest, $b_rest)),*)"
[10:43:45] <Jarrett> if I'm understanding dbaupp right it's because it parsed the first tuple, and then saw a comma and was like "uh what, this is supposed to be the end of the macro"
[10:44:04] <Jarrett> but it's not fully expanded yet so why is it getting its britches in a bunch
[10:44:34] <dbaupp> Jarrett: yes, it starts by parsing an expression, and ($a, $b) is a complete expression, so it stops there; and then sees that there's more stuff
[10:44:53] <arrrrrrrrr> https://gist.github.com/anonymous/7985165 wow, such macro, much concise
[10:45:26] <dbaupp> arrrrrrrrr: fwiw, you're a bad person if you call set in multiple threads :P
[10:45:31] <Jarrett> hahah
[10:46:14] <dbaupp> arrrrrrrrr: (I'd even defined the setter as `unsafe` to remind you of this; which shouldn't be too ugly, since you'll only be calling it once, right?.)
[10:46:24] <dbaupp> s/deifned/define/
[10:47:13] <arrrrrrrrr> dbaupp: wow, so right, much task safety
[10:47:39] <arrrrrrrrr> I guess I'll remove the setters completely
[10:47:43] <Yurume> or you can switch to thread-local storage (which is somewhat verbose, but is slightly safer.
[10:47:52] <strcat> arrrrrrrrr: getters are still unsafe if you are setting it elsewhere unsafely
[10:47:54] <arrrrrrrrr> and write one function that puts the correct values in there
[10:48:07] <Yurume> "slightly safe", meaning, it has a safe interface but may raise a runtime error.
[10:48:26] <arrrrrrrrr> strcat: how so?
[10:48:28] <Yurume> see std::local_data for that matter.)
[10:48:40] * Yurume manages to close the open parenthesis
[10:48:40] <strcat> arrrrrrrrr: because reading data that's being set is a race
[10:49:15] <arrrrrrrrr> don't worry
[10:49:18] <arrrrrrrrr> i'm totally single task
[10:49:31] <strcat> so why not just use task-local data?
[10:49:39] <arrrrrrrrr> what's that?
[10:49:51] <strcat> see std::local_data as Yurume suggested
[10:50:46] <dbaupp> arrrrrrrrr: http://static.rust-lang.org/doc/master/std/local_data/index.html
[10:50:57] <Jarrett> whyyy does macro expansion happen outside-in
[10:51:14] <arrrrrrrrr> looks good
[10:51:45] <dbaupp> Jarrett: because inside out wouldn't work? (I think)
[10:52:14] <Jarrett> but doesn't this entirely preclude using the results of one macro as the parameter to another?
[10:53:27] <dbaupp> no? the whole macro gets substituted at the appropriate places
[10:53:57] <dbaupp> rusti: macro_rules! foo( ($e:expr) => { $e; $e } ); foo!(println!("hi {}", 1))
[10:54:00] -rusti- pastebinned 7 lines of output: http://sprunge.us/UgCC
[10:54:00] <Jarrett> then why is it whining at me when I do a!(b!()) that "no rules [for a] expect the token '!'"
[10:54:10] <dbaupp> rusti: macro_rules! foo( ($e:expr) => { ( $e; $e ) } ); foo!(println!("hi {}", 1))
[10:54:10] -rusti- pastebinned 6 lines of output: http://sprunge.us/CYZO
[10:54:21] <dbaupp> bleh, stop complaining rusti
[10:54:24] <dbaupp> Jarrett: oh
[10:54:33] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:54:50] <dbaupp> if the expected non-terminal isn't expr or item (or stmt, I guess), then yeah, it won't work :(
[10:54:59] <Jarrett> :I
[10:55:05] *** Joins: skade (skade@moz-395305BA.netcologne.de)
[10:55:12] <Jarrett> maybe macros need "return" types
[10:55:25] <Jarrett> "this is a macro that expands to an expression"
[10:55:42] <Jarrett> I dunno
[10:56:30] <Jarrett> "this is a macro that expands to an identifier" and then it could be used in any identifier context ;)
[10:56:34] <skade> i feel a bit stupid again: mod.rs error: type `&[*cbits::HParser]` does not implement any method in scope named `as_ptr`. Shouldn't &[] _always_ implement as_ptr()?
[10:56:52] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[10:58:14] <dbaupp> skade: what version of rustc
[10:58:15] <dbaupp> ?
[10:58:38] <dbaupp> (I thought I added .as_ptr ~20 hours ago...)
[10:59:00] <dbaupp> Jarrett: file a bgu
[10:59:20] <Yurume> Jarrett: hmm, your example can trivially be converted to a working version (by removing _inner), is there a realistic version there?
[10:59:24] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[10:59:40] <Jarrett> removing _inner from where?
[11:00:06] <Yurume> Jarrett: macro_rules! vertex_format(($(($a: expr, $b: expr)),+) => (~[$(($a, $b)),+)])
[11:00:09] <Yurume> and nothing else
[11:00:12] <skade> dbaupp: ] rustc --version
[11:00:12] <skade> rustc 0.9-pre (1b12dca 2013-12-11 12:56:22 -0800)
[11:00:24] <Jarrett> oh :V
[11:00:38] <dbaupp> skade: too old
[11:01:01] <skade> :D code from last week
[11:01:03] <Yurume> basically, macro_rules! assume some context, and `expr, expr` as in the code `~[expr, expr]` does not consist of a single AST node.
[11:01:08] <dbaupp> skade: either `std::vec::raw::to_ptr(v)` or `&v[0]`, or `v.unsafe_ref(0)`
[11:01:22] <skade> nah, I just compiled current master in parallel
[11:01:38] <Yurume> hence the error: the macro invocation in vertex_format! assumes that vertex_format_inner! should return a *single* expr.
[11:01:41] * dbaupp is mildly confused, but ok
[11:02:26] <Yurume> macros make a somewhat complicated topic, but the principle is simple.
[11:02:29] <Jarrett> ahhhh, okay
[11:03:25] <Yurume> Jarrett: recursive macros certainly work, as in my lex!() macro: https://github.com/snrs/sonorous/blob/master/src/util/lex.rs ;)
[11:04:07] <Jarrett> :o
[11:06:45] <skade> dbaupp: If I am the source of the confusion: I was under the impression that as_ptr() was in longer and should work. I did compile a current rust now, though, so the question is solved. :)
[11:07:21] <dbaupp> skade: yes, I was confused by you having so many different versions of rust :)
[11:07:25] <dbaupp> (two is a big number.)
[11:07:34] <dbaupp> makes sense now
[11:09:57] <Jarrett> I take it Rust doesn't yet have any way to pick apart types at compile time
[11:10:20] <Jarrett> so I can say, see that it's an array of two floats and generate some stuff based on that
[11:11:24] <Yurume> in some cases, you can. generic impl is basically a code generation per each set of type parameters.
[11:12:02] <Jarrett> right, but I mean like in a macro or something. specializing on types
[11:12:18] <Jarrett> cause macros are entirely sytactice..
[11:12:20] <Jarrett> -e
[11:12:39] <Yurume> what's your use case? ;)
[11:12:47] <Jarrett> I guess I can do some/most of what I want with impl :Va
[11:12:50] <Jarrett> oh
[11:13:15] <Yurume> I saw several people working on n-dimensional matrix libraries (for example), who generally share that same problem
[11:14:25] <Jarrett> well I'm doing some openGL stuff and I'd like to be able to take a Rust type and turn it into an openGL "type", so for instance [float, ..2] would have an openGL type of GL_FLOAT and a size of 2
[11:15:23] <Jarrett> except GL_FLOAT is a value that's passed to openGL functions, and not an actual type
[11:15:25] <Yurume> a-ha, yeah, that seriously sucks. :S though I think you may do that for &[float] instead.
[11:15:32] <Jarrett> mmm
[11:16:36] <Yurume> i.e. trait GLType { fn gl_type(&self) -> GLenum; } impl<T:Vector<f32>> GLType for T { fn gl_type(&self) -> GLenum { GL_FLOAT } }
[11:16:47] <Jarrett> riiiiiight
[11:17:37] <Yurume> (or impl GLType for f32 { ... }, which seems a bit better when I think about it now)
[11:18:13] <Jarrett> yeah
[11:18:19] <Jarrett> LET'S TRY THAT
[11:18:37] <Yurume> that seriously breaks down for glVertexAttribPointer though :(
[11:19:05] <Jarrett> how so?
[11:19:25] <Jarrett> (this is exactly what I'm trying to de-boilerplate so your input is appreciated lol)
[11:19:45] <Yurume> if you have a heterogeneous struct with different kinds of data (e.g. vertex coord. + tex coord. + possibly color modulation input)
[11:20:05] <Jarrett> mhm?
[11:20:11] <Yurume> then you need to put the offsets to each datum to glVertexAttribPointer which is PITA
[11:20:25] <Jarrett> oh, I'm gonna be using my macro to *make* that struct :)
[11:20:35] <Jarrett> so I'll have access to the members
[11:20:38] <Yurume> that sounds great! :o
[11:20:47] <Jarrett> haha
[11:21:31] <Yurume> please mind that there is no macro export/import feature right now, so you need some strange way to access them from other crates
[11:21:41] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[11:21:50] <Jarrett> yeah :P
[11:21:53] <Jarrett> I read about that
[11:22:06] <strcat> you can leak them from modules
[11:22:19] <strcat> so you can ship a module with the crate with the macros as a workaround for now
[11:22:48] <Jarrett> but I'm still in "what horrible things can I get the compiler to do that's on par with D hackery" evaluation mode so this is just for fun :P
[11:22:49] <Yurume> strcat: that means the macros are distributed separately from the main crate, which is the strange way
[11:23:08] <strcat> Yurume: sure, it's horrible. but it works ;p
[11:23:34] <strcat> rustpkg doesn't really work yet anyway so people are going to be doing a git clone and having all the files in their tree anyway
[11:23:37] * strcat shrugs
[11:26:43] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[11:27:17] <Jarrett> hm
[11:28:08] <Jarrett> I think this was asked earlier today but it's not possible to do TraitName::<specializationType>::staticFn() is it
[11:29:04] *** Quits: Mowah (Mowah@46054FB7.75886E32.8A4F81EE.IP) (Ping timeout)
[11:29:09] <dbaupp> specializationType == the Self type, right?
[11:29:31] <Jarrett> yyyyyes
[11:29:32] <Jarrett> yes
[11:29:39] <dbaupp> no, not yet (the proposed syntax is `Trait::<for SomeType>::func()`)
[11:29:44] <Jarrett> ah |<
[11:29:53] <Jarrett> well then I have another issue
[11:30:05] <dbaupp> there's various workarounds: if it returns Self, `let x: Type = Trait::func()`
[11:30:13] <Jarrett> if I have a type parameter T and I want to create a variable of type T, how do I initialize it?
[11:30:39] <Jarrett> mhm
[11:30:41] <dbaupp> if it doesn't, modify the function to take `Option<V>`, and then call it like `Trait::func(None::<Type>)`
[11:30:52] <dbaupp> you can't just initialise an arbitrary generic in general
[11:31:02] <Jarrett> sad :<
[11:31:16] <Jarrett> I mean I guess it makes sense
[11:31:32] <dbaupp> yes, `let x: File = <what goes here>`
[11:31:44] <Jarrett> right :P
[11:31:47] <dbaupp> you can write `let x: File;` and assign the variable later
[11:32:07] <Jarrett> maybe if/when we get the Trait::<for SomeType> syntax there can be a Zero trait or something, so we can do Zero::<for T>::zero()
[11:32:16] <dbaupp> there already is one
[11:32:16] <Jarrett> mhm
[11:32:21] <dbaupp> there's also a Default
[11:32:27] <Jarrett> :v
[11:32:43] <Jarrett> well then
[11:32:44] <dbaupp> Zero for numerics, Default for others, is the current convention
[11:32:51] <Jarrett> ahhh
[11:33:37] <Jarrett> well that's just lovely :D
[11:34:00] <dbaupp> (fwiw, type inference often means you don't actually need to give the type hint, i.e. `variable_of_type_t + Zero::zero()` just works.)
[11:34:01] <Jarrett> and now I see what you mean about static trait functions which return Self
[11:34:06] <Jarrett> oh yes
[11:34:12] <Jarrett> I am aware :9
[11:34:15] <dbaupp> not that that is very useful
[11:38:02] *** Quits: pirapira (i@moz-B4551AD5.sakura.ne.jp) (Ping timeout)
[11:39:33] <bvssvni> is there a way to borrow from a vector with pattern matching?
[11:40:13] <bvssvni> http://pastebin.com/LyGtYM0u
[11:40:36] <dbaupp> rusti: let v = [1,2]; match v { [ref a, .. b] => println!("{:?} {:?}", a, b), _ => {} }
[11:40:40] -rusti- failed to pastebin 7 lines of output
[11:40:54] <dbaupp> rusti: let v = [1,2]; match v { [ref a, .. b] => println!("{:?} {:?}", a, b), _ => {} }
[11:40:55] -rusti- failed to pastebin 7 lines of output
[11:40:58] <dbaupp> rusti: let v = [1,2]; match v { [ref a, .. b] => println!("{:?} {:?}", a, b), _ => {} }
[11:40:58] -rusti- failed to pastebin 7 lines of output
[11:41:02] <dbaupp> :'(
[11:41:44] <bvssvni> does rusti read the pastebin?
[11:42:25] <bjz> Jarrett: that area of traits is a kind of sore point that hopefully will get cleared up by 1.0
[11:42:33] <Jarrett> cool cool
[11:43:01] <eddyb> dbaupp: non-exhaustive
[11:43:16] <eddyb> also, what's with that extra space after ..?
[11:43:18] <bjz> Jarrett: there are plans for associated items in traits, but that will probably be post 1.0
[11:43:27] <dbaupp> eddyb: with a _ match, impossible!
[11:43:29] <Jarrett> :)
[11:43:36] <bjz> Jarrett: so you could have type aliases and statics in a trait
[11:43:37] <dbaupp> eddyb: you mean `.. b` rather than `..b`?
[11:43:43] <eddyb> dbaupp: nvm, I didn't see it. and yeah
[11:43:54] <dbaupp> eddyb: because ..b looks ugly :P
[11:44:13] <Jarrett> cool, bjz :D
[11:44:54] <eddyb> dbaupp: find another language then :P
[11:45:02] <cmr> wat
[11:45:13] <eddyb> (because I'm adding more syntax that makes more sense without the space after ..)
[11:45:13] <dbaupp> eddyb: huh?
[11:45:38] <eddyb> .. b is like writing & b IMO :P
[11:45:51] <dbaupp> eddyb: you mean, you're going to *try* to get more syntax merged [...] ;)
[11:46:05] <eddyb> also, try ignoring b. and I think there is something like what you're trying to do, as a method
[11:46:21] <eddyb> rusti: let v = ~[1,2]; match v.as_slice() { [ref a, .. b] => println!("{:?} {:?}", a, b), _ => {} }
[11:46:23] -rusti- &1 &[2]
[11:46:23] -rusti- ()
[11:46:26] <eddyb> :D
[11:46:32] <dbaupp> writing `..b` is like writing `refb` :P
[11:46:34] <eddyb> (you were matching on a fix-length vector)
[11:46:49] <eddyb> rusti: let v = [1,2]; match v { [ref a, .. b] => println!("{:?} {:?}", a, b)}
[11:46:51] -rusti- &1 &[2]
[11:46:51] -rusti- ()
[11:46:53] <dbaupp> bvssvni: ^
[11:47:02] <dbaupp> eddyb: oh, of course
[11:47:05] <eddyb> dbaupp: and _ was unreachable
[11:47:16] <eddyb> I had it the wrong way the first time
[11:47:39] <dbaupp> for some reason [] is (ir)refutable (I can never remember which way this goes...) in a `match`, but not in a `let`.
[11:47:48] <dbaupp> err, s/[]/[T, ..n]/
[11:49:58] <bvssvni> hmm, doesn't work
[11:50:09] <bvssvni> it's because I use an owned pointer
[11:50:16] *** Joins: jurily (jurily@moz-D6478B41.catv.broadband.hu)
[11:50:49] <dbaupp> bvssvni: are you using the `ref` in the match?
[11:51:16] <bvssvni> just a minute, I'll drop it in a pastebin
[11:51:46] <eddyb> bvssvni: do you have .as_slice()?
[11:52:31] <bvssvni> http://pastebin.com/rUuuayCi
[11:53:05] <bvssvni> the struct takes an owned pointer
[11:53:20] <dbaupp> put the Some(Index { ids: data }) after the match
[11:54:22] <dbaupp> so it's just: match data.as_slice() { [] => {}, [ref first, .. rest] => { let mut a = first; for item in rest.iter() { if *item < *a { return None; } a = item } }
[11:54:26] <dbaupp> in the actual match
[11:55:38] <eddyb> you don't need a match there, derp
[11:55:44] <eddyb> (unless it's easier with one)
[11:55:57] <eddyb> dbaupp: there's a method which does splits a slice like this
[11:56:10] <eddyb> *does split
[11:56:22] <dbaupp> eddyb: shift_ref or something
[11:56:32] <bvssvni> it works!
[11:57:11] <bvssvni> http://pastebin.com/0wDvcqFR
[11:57:24] <arrrrrrrrr> anybody else using weechat here?
[11:57:54] <bvssvni> I can also remove the .as_slice()
[11:58:09] <strcat> arrrrrrrrr: yes, why?
[11:58:26] <arrrrrrrrr> how can I make it more useful with multiple windows?
[11:58:31] <dbaupp> bvssvni: fwiw, I think it should also work if you remove the .clone()'s and have < *a rather than < a
[11:58:41] <arrrrrrrrr> let's say I get a pm from someone
[11:58:52] <arrrrrrrrr> i want blink blink not beep beep
[11:59:21] <bvssvni> dbaupp: thanks
[11:59:30] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:00:47] <dbaupp> bvssvni: and it would even work as `for (prev, next) in data.iter().zip(data.iter().skip(1)) { if prev > next { return None; } }` without having to match at all
[12:00:51] *** Quits: jurily (jurily@moz-D6478B41.catv.broadband.hu) (Quit: )
[12:01:19] <dbaupp> (or `for window in data.windows() { if window[0] > window[1] { return None; } }`)
[12:01:29] <dbaupp> err, .windows(2)
[12:01:40] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:03:14] <bvssvni> dbaupp: amazing, 3 lines!
[12:05:54] <bvssvni> hmm
[12:06:20] <Ms2ger> I think I can do it in two ;)
[12:06:22] <bvssvni> how do I construct an empty vector of a type without a 'let'?
[12:06:54] <Ms2ger> if data.windows(2).any(|w| w[0] > w[1]) { return None; } 
[12:07:32] *** Quits: rca (rcatolino@14ADCB35.64386949.520D6FA6.IP) (Ping timeout)
[12:07:36] <bvssvni> anyway, just wrote a test with empty vector
[12:07:40] <dbaupp> Ms2ger: don't even need the return then :P
[12:08:52] <Ms2ger> Well, depends on the rest of the function
[12:09:11] <dbaupp> ` else { Some(...) }`
[12:09:27] <dbaupp> it could be in this case.
[12:11:33] <Jarrett> ugh git and github and authentication ughhh
[12:11:38] <Jarrett> I'll get to it tomorrow bjz :P
[12:11:56] <bjz> Jarrett: wrong channel?
[12:12:07] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[12:12:09] <Jarrett> right channel
[12:12:14] <bvssvni> Ms2ger: cool
[12:12:29] <bjz> Jarrett: we were talking in #rust-gamedev
[12:12:37] <Jarrett> OH
[12:12:38] <Jarrett> oops
[12:13:01] <bjz> Jarrett: we have moved our politics to #rust-offtopic if we confused you :D
[12:13:18] <Ms2ger> Can we also start a #rust-spammers?
[12:13:31] <bjz> yes!
[12:13:53] <eddyb> meme
[12:13:59] <eddyb> as in, me me me
[12:14:00] * ChrisMorgan wins #rust-spammers
[12:14:03] *** Joins: rca (rcatolino@14ADCB35.64386949.520D6FA6.IP)
[12:14:16] <eddyb> ChrisMorgan: pffft, have you seen me debugging?
[12:15:09] *** Quits: z0w0 (zack@moz-7B305DFB.lnse1.woo.bigpond.net.au) (Client exited)
[12:15:17] * Ms2ger covers his eyes
[12:16:32] *** Quits: Jarrett (chatzilla@moz-8211AC00.dhcp.nrwl.ca.charter.com) (Ping timeout)
[12:17:29] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Client exited)
[12:38:42] <zol> I get this error when trying to compile rust from master: http://hastebin.com/mewiqibixo.vhdl , anyone know what might be causing it? 
[12:41:55] <eddyb> lol, vhld
[12:41:57] <eddyb> *dl
[12:42:37] <eddyb> inb4 a subset of rust for hardware development
[12:44:23] <cmr> zol: do a clean build.
[12:45:42] <zol> cmr: Thanks
[12:46:01] <cmr> (and re-run configure)
[12:48:16] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[12:48:54] <strcat> eddyb: http://ix.io/9o6 put this in a .cc file and try compiling it with gcc ;p
[12:49:11] <arrrrrrrrr> atomic compare and swap in rust?
[12:49:45] <cmr> arrrrrrrrr: see std::unstable::atomics
[12:49:59] <eddyb> strcat: please not be a zero day
[12:50:10] <eddyb> haha
[12:50:38] <arrrrrrrrr> what's the meaning of "unstable"?
[12:50:39] <eddyb> strcat: I can't disable swap, so no
[12:50:45] <strcat> eddyb: hm?
[12:50:54] <strcat> it will stop after it goes 1000 deep or something
[12:50:56] <cmr> arrrrrrrrr: not backwards compat.
[12:50:58] <strcat> by default
[12:51:00] <eddyb> I'm pretty sure it will either loop forever or keep increasing in memory use
[12:51:01] <dbaupp> arrrrrrrrr: (be aware that they can cause unhappiness: https://github.com/mozilla/rust/issues/10577 )
[12:51:04] <strcat> eddyb: neither
[12:51:10] <eddyb> strcat: ah. okay :))
[12:51:11] <strcat> eddyb: it will just print a lot ;p
[12:51:26] <strcat> if you make a really good one you can do OOM
[12:52:27] <eddyb> oh dear
[12:52:38] <eddyb> please don't OOM my konsole
[12:52:42] <strcat> there I made a better one
[12:52:49] <strcat> looking at some samples
[12:52:52] <arrrrrrrrr> guess i'll just use an external c function
[12:52:56] <eddyb> fwiw `curl http://ix.io/9o6 | g++ -x c++ -`
[12:53:04] <strcat> arrrrrrrrr: er, why not just use the intrinsics?
[12:53:11] <strcat> unstable means the API may change
[12:53:52] <strcat> eddyb: it's better if you add an array access
[12:53:57] <strcat> er
[12:53:59] <strcat> an array*
[12:54:06] <strcat> or you could just stick another struct in it
[12:54:06] <eddyb> oh, please don't
[12:54:38] <arrrrrrrrr> I don't want to deal with unstable stuff right now. I'll add a comment to replace the C when it's stable.
[12:54:48] <eddyb> strcat: I'm not sure why it doesn't detect infinite recursion
[12:54:51] <cmr> arrrrrrrrr: by writing *any* rust you're dealing with unstable.
[12:54:55] <strcat> arrrrrrrrr: the whole language is 'unstable'
[12:54:59] <eddyb> Foo<T> uses Foo<T>, there is nothing variable there
[12:55:02] <cmr> nothing *is* stable, std::unstable is just a staging zone.
[12:55:18] <arrrrrrrrr> unstable in the sense that it crashes or fails with a compiler error
[12:55:26] <strcat> arrrrrrrrr: not what unstable means in this sense
[12:55:32] <strcat> it means unstable API, as in it may change frequently
[12:55:33] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[12:55:36] <arrrrrrrrr> see dbaupp above
[12:55:48] <strcat> arrrrrrrrr: that's a bug in statics
[12:55:49] <eddyb> those are bugs, unrelated to the "unstable" module
[12:55:51] <strcat> not in atomics.
[12:55:57] <arrrrrrrrr> i'll put it in a static
[12:56:02] <eddyb> >_>
[12:56:12] <strcat> you don't have to use the atomic types with dtors
[12:56:16] <strcat> you can use the intrinsics
[12:56:18] <strcat> they work *fine*
[12:56:26] <strcat> but if you're set on what you want to do already, why ask?
[12:56:49] <arrrrrrrrr> when I asked I didn't know that they might crash my program
[12:56:58] <arrrrrrrrr> the dpaupp posted his link
[12:57:02] <strcat> they won't crash your program
[12:57:07] <arrrrrrrrr> now you tell me that there are other atomics that won't crash
[12:57:16] <arrrrrrrrr> too much info at once
[12:57:56] <eddyb> arrrrrrrrr: the intrinsics are fine (and the wrappers for them)
[12:58:08] <eddyb> arrrrrrrrr: they're equivalent to built-in GCC functions
[12:58:25] <dbaupp> eddyb: the wrapper types are not completely fine, see the issue above; but using the intrinsics is ok.
[12:58:32] <eddyb> wrapper functions, not types
[12:59:01] <strcat> arrrrrrrrr: again, they won't crash your programs
[12:59:07] <strcat> statics of types with dtors are broken
[12:59:12] <strcat> the atomic intrinsics work fine
[12:59:14] <eddyb> because each atomic operation has 3-5 intrinsics
[12:59:26] <strcat> the wrapper types around them work fine too, if you don't put them in a static, because they have a destructor
[12:59:27] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[12:59:32] <strcat> it's not a bug in atomics
[12:59:34] <strcat> it's a bug in statics
[12:59:55] <strcat> if you use 'static x: int' it will work perfectly fine
[13:00:56] <arrrrrrrrr> so this is what I want I guess? pub fn atomic_cxchg(..
[13:01:18] <strcat> the ones in std::unstable::intrinsics
[13:01:21] <arrrrrrrrr> yes
[13:01:24] <strcat> yes
[13:01:36] <arrrrrrrrr> what does acquire ordering mean?
[13:01:48] <eddyb> this is why there are wrapper functions for those :P
[13:02:07] <cmr> it's the memory ordering you want from the atomic op.
[13:02:23] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[13:02:43] <arrrrrrrrr> hmm, I don't know. Guess I'll have to read up on that stuff.
[13:02:50] <strcat> arrrrrrrrr: http://en.cppreference.com/w/cpp/atomic/memory_order
[13:03:03] <strcat> arrrrrrrrr: use sequential consistency if you aren't absolutely sure you can do with less
[13:03:14] <eddyb> the default one is the most conservative and the slowest
[13:03:24] <strcat> atomic == the actual read/write/whatever will not be split
[13:03:29] <eddyb> the fancy ones can be faster, but you need to know what you're doing
[13:03:34] <strcat> but ordering guarantees are separate
[13:04:02] <eddyb> locks will use acquire/release, I would guess
[13:04:09] <arrrrrrrrr> eddyb: so using the default one is fine?
[13:04:14] <eddyb> arrrrrrrrr: yes
[13:04:52] <arrrrrrrrr> the return value is the value that was stored in the variable before the call?
[13:05:13] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[13:05:15] <eddyb> yes
[13:05:23] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[13:05:24] <arrrrrrrrr> great
[13:05:32] <eddyb> arrrrrrrrr: if it's equal to the "original" you provided, the operation succeeded
[13:06:44] <eddyb> (GCC has bool-returning variants, you have to do that manually here)
[13:10:25] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[13:13:08] *** Quits: rca (rcatolino@14ADCB35.64386949.520D6FA6.IP) (Ping timeout)
[13:16:58] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[13:18:53] *** Joins: rca (rcatolino@14ADCB35.64386949.520D6FA6.IP)
[13:25:07] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[13:35:26] <bstrie> I was burning pyres and dancing all weekend, how goes the botnet spam
[13:35:57] <cmr> bstrie: #rust-offtopic, promote it
[13:36:04] <dbaupp> bstrie: we've all perished
[13:36:10] <bstrie> ;(
[13:36:46] <dbaupp> turn that frown upside down
[13:37:16] <bstrie> cmr: I think an offtopic channel is a bridge too far at this point. splitting out new irc channels is often a huge negative. have to have a really good reason
[13:37:31] <cmr> bstrie: politics!
[13:37:44] <bstrie> I said a good reason :P
[13:38:04] <cmr> And I don't really think it's a huge negative to have an offtopic channel.. every large channel I've been in has an offtopic socialization channel.
[13:38:13] <cmr> ##linux, #python, etc.
[13:38:33] <cmr> (the reason was *discussion* of politics, not politics itself)
[13:38:56] <bstrie> the problem there is that the set of people in here who want to be sociable intersects too heavily with the set of people who can actually answer questions
[13:39:07] <bstrie> and people generally don't pay very much attention to more than one irc channel at a time
[13:39:30] * ChrisMorgan doesn't find that last statement to hold for himself.
[13:39:31] <cmr> That is the problem, yes. The S:N suffers.
[13:40:08] * Ms2ger is only in 20 channels
[13:40:10] <bstrie> at least, they don't pay passive attention, which is what a questions-answering channel needs
[13:40:47] <bstrie> cmr: the better solution is to train a new generation of people who want to sit in irc answering questions :)
[13:41:14] <bstrie> then we can safely retreat to our offtopic channel and cultivate our bizarre clique
[13:41:25] <bstrie> as offtopic channels are wont to become
[13:41:50] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[13:42:19] <cmr> well personally I don't care about the socialization, which is why I want to cordon it off :p
[13:42:49] <dbaupp> cmr: #rust-no-cmr
[13:42:54] <cmr> heh
[13:46:56] <bstrie> I think having #rust as a modal channel is fine, where we just fritter away casually until somebody needs something answered
[13:47:12] <bstrie> casual conversation also helps newcomers feel less anxious
[13:47:48] <bstrie> alleviates the "lol is anyone even here" and "omg do I have to be a genius to understand this language" emotions
[13:47:58] *** Quits: clement (clement@moz-D3DDF83F.delafargue.name) (Quit: WeeChat 0.3.2)
[13:48:22] <eddyb> bstrie: yes you do, oh yes you do!
[13:48:29] <ezyang> Does rust have a 'flip' combinator? 
[13:48:45] <ezyang> mostly, I need evaluation order to go in a different direction than normal 
[13:49:04] <eddyb> bstrie: sometimes you have to be a genius to answer questions (like, from people coming from Haskell)
[13:49:11] <arrrrrrrrr> for a function that returns an error or nothing on success, should I use Option or Result?
[13:49:32] <eddyb> Result<(), ~str> works, but it's kinda weird to use
[13:49:37] <cmr> arrrrrrrrr: I find Result<(), ErrEnum> to be better in those cases, but it's an arbitrary choice.
[13:49:53] <ChrisMorgan> Me too. Err makes it very clear what it is that's been returned.
[13:50:00] <eddyb> Ok(()) is... eeeh. maybe we can have sugar for it
[13:50:03] <cmr> ezyang: I can't even fathom why would need to do that!
[13:50:20] <ezyang> dbaupp: I figured out why it doesn't borrow check: has to do with evaluation order 
[13:51:00] <bstrie> ezyang: I don't think evaluation order has any effect? it should only be affected by scope
[13:51:01] <ezyang> So this version borrow-checks: https://gist.github.com/ezyang/7987176 
[13:51:16] <eddyb> usually you swap order when you want to change the evaluation order :P
[13:51:25] <eddyb> the order of statements, that is
[13:51:42] <ezyang> In the old, non-borrow-checking code, we first take a borrow on prev, and then we try to do computation on prev, which of course won't work 
[13:52:02] <ezyang> when it's flipped, we first do the computation, and then we do the borrow, which succeeds. I don't know if we can do something beter. 
[13:52:34] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[13:52:44] <ezyang> *mutable borrow 
[13:53:05] <ezyang> ...does Rust even have well-defined evaluation order for f(expr1, expr2)? 
[13:53:13] <Ms2ger> I'd hope sp
[13:53:14] <Ms2ger> so
[13:53:21] <ezyang> cuz C doesn't ;-) 
[13:53:28] <eddyb> expr1 then expr2, I would think
[13:53:51] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[13:54:05] <eddyb> LLVM can reorder individual operations as long as they don't interact with each-other
[13:54:23] <eddyb> I'm pretty sure ++i %= n; is supposed to always work in C++
[13:54:23] <cmr> I feel like I saw evaluation order in the manual at one point but a ctrlf is fruitless.
[13:54:28] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[13:54:56] <eddyb> C people were hating on me for wanting the same thing in C code. meh
[13:55:08] <arrrrrrrrr> is it possible to define #[feature(macro_rules)] locally somehow?
[13:55:15] <cmr> arrrrrrrrr: no, it's crate-level.
[13:55:16] <eddyb> there's an issue for that
[13:55:28] <eddyb> the next time I deal with radare2 code, it will be radare3 and written in Rust
[14:02:32] <ezyang> ...hmm, I think the current borrow checker is too conservative with &mut 
[14:03:05] <bstrie> ezyang: if you think so, ask nmatsakis if it's intentional
[14:03:08] <eddyb> ezyang: it keeps the borrow for the scope of the thing you borrowed from or something like that
[14:03:45] <ChrisMorgan> There can only be one active mutable borrow at a time. That's a good thing for almost all situations.
[14:04:26] <ezyang> If I have some &mut T on the stack, and I extract out a mutable reference to a field in T, I don't have an invalidation problem if I then mutate the stack slot 
[14:04:44] *** pmoore|away is now known as pmoore
[14:05:34] <ezyang> ugh, I don't know how to articulate this properly 
[14:07:33] <ezyang> ...huh. Is an argument of type &mut T treated differently from a let-binding with type &mut T? 
[14:07:46] <ezyang> it seems like the argument will get some autodereferencing done to it 
[14:10:56] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[14:14:34] <arrrrrrrrr> w-why do macros have to be defined before they can be used? :(
[14:15:52] <achin> it probably makes parsing a lot easier/faster
[14:16:22] <arrrrrrrrr> that's why they didn't allow mixed declaration and code in c89 :p
[14:16:32] <cmr> no, but it's actually a concern with macros.
[14:16:50] <cmr> you need to scan the source twice, fully parsing it both times
[14:17:16] <cmr> (well, not *fully*. one of the times could discard the intermediate AST)
[14:18:05] <achin> "hmm, i don't recognize this syntax.  let me keep going just in case i'll learn what this means in the future, and come back to this"
[14:18:46] <cmr> achin: well, macros require paired delimiters, so it could just ignore the contents.
[14:19:06] *** Joins: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com)
[14:19:29] <achin> sure, it's easy to skip over the parts that you don't understand
[14:19:39] <achin> (i think that's what you meant)
[14:19:46] <cmr> it is, yeah
[14:19:49] <arrrrrrrrr> can I have mutable static strings?
[14:21:04] <arrrrrrrrr> static mut v: ~str = ???
[14:22:11] <ChrisMorgan> arrrrrrrrr: you can't have heap allocations for statics. &'static str is the closest you can have.
[14:22:34] <arrrrrrrrr> damn, got to use Option then
[14:24:18] <eddyb> SendStr will work
[14:24:43] <achin> (btw, i like the new box keyword)
[14:24:44] <eddyb> though I'm not sure it's going to be a good idea to use atomics with an enum
[14:25:04] <eddyb> achin: you're welcome :P
[14:25:40] * eddyb goes back to wasting more time. he should stop doing that. well, brb food
[14:26:14] <achin> i know it's a little bit contentious (for reasons i don't fully understand), but not everyone thinks it's too long or verbose
[14:26:45] <nmatsakis> ezyang: you might be referring to issue #6268 or perhaps issue #10520 -- the latter is much easier to fix than the former
[14:26:45] <achin> (i actually think is helps readability in some cases)
[14:27:11] <ezyang> aww, and I was almost done typing up the bug report :) 
[14:27:15] <ezyang> looking 
[14:28:54] <ezyang> oh, I think this is #6268, but in very different clothes 
[14:29:56] <arrrrrrrrr> what's the opposite of #warn again?
[14:30:06] <cmr> #[allow] ? #[forbid] ?
[14:30:19] <arrrrrrrrr> tnx
[14:30:35] <ezyang> nmatsakis: If you don't mind, I'm going to submit the bug report, and you can decide if it's subsumed by 6268. I think it has a nice set of test-cases. 
[14:31:35] <nmatsakis> ezyang: all right, cc me
[14:32:25] <nmatsakis> ezyang: there is also #6393, also a tricky one to fix
[14:33:02] <arrrrrrrrr> and how do I leak macros again?
[14:33:22] <achin> i am amazed how you guys have these bug numbers so easily at hand
[14:33:38] <eddyb> #[macro_escape] I think
[14:34:08] <eddyb> achin: chrome/firefox address bar can do that :P
[14:34:15] <ezyang> nmatsakis: https://github.com/mozilla/rust/issues/10999 
[14:34:24] <eddyb> ezyang: lucky winner
[14:34:36] <cmr> no, the lucky winner is 55555
[14:34:37] <cmr> 5 5s!
[14:34:50] <achin> eddyb: because they can search github?  or because you've had all of these open so they are in your history already?
[14:34:54] <bstrie> at this rate, we'll hit that bug number within the next 15 years!
[14:35:02] <cmr> achin: history.
[14:35:11] <cmr> (at least for me)
[14:35:30] <bstrie> achin: because historically cmr is responsible for 75% of all bug triage
[14:35:40] <cmr> ohh hey
[14:35:40] <bstrie> makin the rest of us look bad
[14:35:49] <cmr> that reminds me I can bump my triage back up
[14:36:04] <achin> sometimes i wish sites like github had the same semantic search that google has
[14:36:34] <ezyang> Oh sweet, #6393 was the other bug I was going to report 
[14:37:00] <ezyang> well, I guess I'll paste in my test-case 
[14:37:00] *** pmoore is now known as pmoore|afk
[14:39:45] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[14:39:53] <cmr> bstrie: and to be fair, my soul was sucked for like 5 hours a week doing that triage :p
[14:40:17] <arrrrrrrrr> can a module export a name to the global namespace?
[14:40:22] <cmr> arrrrrrrrr: no
[14:42:16] <arrrrrrrrr> how are the manpages coming along? :)
[14:42:22] <cmr> and there isn't a global namespace. unlike C++, you can't define things in a module outside of yourself, and every crate defines its own namespace.
[14:42:28] <cmr> good, just some niggling details left.
[14:42:29] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:42:55] <cmr> probably needs a bunch more work to be mergable, there's a fair bit of duplication in the formatters atm.
[14:44:08] <achin> man pages for what?
[14:44:12] <cmr> achin: rustdoc output
[14:44:27] <nmatsakis> ezyang: pretty sure that's a dup of #6268
[14:44:39] <ezyang> nmatsakis: ok, sgtm 
[14:44:39] <achin> cmr: cool
[14:45:15] <ezyang> These errors are pretty confusing, I wonder if I should write a mini-tutorial of borrow-checker gotchas due to current bugs 
[14:45:47] <achin> i would support that, ezyang !
[14:45:48] <nmatsakis> ezyang: I'd not define that one as a bug.
[14:45:52] <nmatsakis> ezyang: more like a feature request.
[14:46:07] <nmatsakis> ezyang: but that's... perhaps a pointless distinction.
[14:46:25] <eddyb> "current limitation"
[14:46:31] *** pmoore|afk is now known as pmoore
[14:46:34] <arrrrrrrrr> do macros leak recursively?
[14:47:08] <achin> you just want to document what should be possible in the future, but isn't possible now.  else the user might be wondering "am i making a mistake? or am i not understanding what rust can do"
[14:47:20] <ezyang> achin: Yeah, something like that. 
[14:49:00] <nmatsakis> ezyang: anyway I'm in favor of that, I thikn we're in need of a new borrow checker tutorial. I always wanted to take a kind of "cookbook" style or something
[14:49:58] <achin> tyhe current tutorial i think offers some good examples, giving people confidence that they intuitions are correct, at least about the simple cases
[14:50:08] <nmatsakis> though the changes that are coming for closures will introduce some new gotchas, though similar to the current ones
[14:50:18] <nmatsakis> still debating how "smart" I can make it
[14:50:35] <achin> (but it's the non-trivial cases that are harder to think about)
[14:51:37] * ezyang hasn't even touched closures yet 
[14:53:08] <ezyang> wild and baseless speculation: I wonder if you could automatically generate counterexamples for code that fails the borrow check "i.e. here's how to violate memory safety here" 
[14:53:44] <cmr> that'd be very cool.
[14:55:09] <arrrrrrrrr> could you add a macro to getopts that creates multiple flags at once? like optflag("h", "help")
[14:55:45] <cmr> no, since macros can't be exported.
[14:56:30] <arrrrrrrrr> uh, then could you add something to getopts that works like println! and does the above?
[14:56:48] <cmr> println is hard-coded into the parser.
[14:56:59] <arrrrrrrrr> oh
[14:57:30] <cmr> all of the macros are, right now.
[14:58:06] <arrrrrrrrr> namespaced macros when?
[14:58:24] <cmr> eventually :p
[14:59:55] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[15:00:46] *** Quits: JanC (janc@moz-1D908063.dsl.scarlet.be) (Ping timeout)
[15:02:32] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:03:53] <arrrrrrrrr> how can I find out where a vim hi link ends?
[15:06:50] <ChrisMorgan> arrrrrrrrr: e.g. `:hi rustFloat` - "rustFloat xxx links to Float". Is that what you meant?
[15:07:16] <ChrisMorgan> (If that's linked to something else, apply this technique recursively, manually.)
[15:12:03] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[15:13:28] *** Quits: skade (skade@moz-395305BA.netcologne.de) (Connection reset by peer)
[15:15:45] <arrrrrrrrr> thanks
[15:17:16] <arrrrrrrrr> is responsible for the vim files?
[15:24:16] *** Joins: jackneill (jackneill@moz-8A9CB6C.pool.digikabel.hu)
[15:26:52] * ChrisMorgan does almost all of the work on the Vim scripts /me is now going to bed as he should have a couple of hours ago
[15:27:15] <arrrrrrrrr> rustMacro -> Macro is a bad idea
[15:27:47] <ChrisMorgan> Why?
[15:27:58] <arrrrrrrrr> same highlighting as #define in C
[15:28:09] <ChrisMorgan> That's not a problem.
[15:28:13] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[15:28:29] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:28:30] <bstrie> ChrisMorgan: you seem to do this a lot. have you considered migrating longitudinally until your sleep schedule makes sense? :)
[15:29:29] <arrrrrrrrr> ]; at the end of arrays doesn't get the right indentation
[15:30:25] <ChrisMorgan> bstrie: 2:30am is distinctly unusually late. I had just been working on my presentation for this Rust meetup (a little too late) and then just had to do some dishes,
[15:30:25] <ChrisMorgan> and then when I came back I just had to write https://github.com/chris-morgan/ohcount/commit/d6cca3c87511aee67d90b502d97b362a8cbad8f6#commitcomment-4871544, and then arrrrrrrrr was asking about Vim syntax stuff which is my area,
[15:31:45] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[15:32:16] <ChrisMorgan> arrrrrrrrr: the indentation stuff is certainly not perfect, but I haven't had time to write a complete indenter from scratch (at present it's cindent with a small number of cases patched up to behave more like what is desired for Rust—before I came along it was nothing and thus cindent was used verbatim, which had some rather serious problems).
[15:32:33] * ChrisMorgan is now *GENUINELY* going to bed
[15:32:44] * bstrie kicks ChrisMorgan from the channel
[15:33:08] <bstrie> sleep is important :P
[15:33:47] <achin> it's annoying, though
[15:34:03] <bstrie> nah, I do all my best thinking while asleep :)
[15:34:19] <achin> but do you remember it once you wake up?
[15:35:19] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:35:37] <achin> when i'm struggling with a hard technical problem, i sometimes have dreams about solving the problem in my sleep.  i don't actually solve the problem, i just dream that i do.  clearly not the mark of a genius
[15:35:45] <bstrie> haha
[15:35:50] <arrrrrrrrr> lol
[15:37:09] <bstrie> achin: have you tried applying the feynman algorithm?
[15:37:22] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[15:37:30] <achin> what's that?
[15:37:39] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Client exited)
[15:37:46] <bstrie> Step 1) Write down the problem.
[15:37:50] <bstrie> Step 2) Think real hard.
[15:37:54] <bstrie> Step 3) Write down the solution.
[15:37:55] <Ms2ger> 3) Go to the bar
[15:38:05] <achin> ah, yes
[15:38:10] <tgummerer> hi, I'm currently trying to learn rust.  this code http://pastebin.com/E5zYgcDy gives me a compiler error "cannot borrow immutable field as mutable" on line 29 and 33. any idea how I can make it mutable?
[15:38:15] <bstrie> Ms2ger: that can be the Ms2ger algorithm, if you like
[15:38:31] <achin> sometimes i get stuck going from step 1 to step 2
[15:38:33] <bstrie> or rather, Ms2ger's Corollary to the Feynman Algorithm
[15:38:35] <Ms2ger> Nah, I'm not nearly as much into bars as Feynman :)
[15:38:42] <cmr> tgummerer: `mut self`
[15:39:04] <cmr> tgummerer: are you sure you don't want &self in all of those places though? `self` is a by-value move.
[15:40:12] <tgummerer> cmr: ah thanks! no I'm not ;-) still trying to get the hang of all the pointer types.  self is probably enough 
[15:40:26] <cmr> tgummerer: well you won't be able to use the type after you call a method with `self`
[15:42:28] <bstrie> cmr: I am intrigued by the idea of unique types. Only one value of each type at a given time!
[15:42:38] <cmr> oh, heh
[15:42:40] <tgummerer> cmr: ok, thanks a lot for your help.
[15:42:41] <cmr> s/type/value/ :p
[15:44:24] *** Quits: anri (koz@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: anri)
[15:48:12] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:48:12] *** ChanServ sets mode: +o jdm
[15:48:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:49:14] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[15:49:33] *** Quits: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com) (Input/output error)
[15:51:32] <arrrrrrrrr> does "do" still work?
[15:51:51] <Ms2ger> Only with procs
[15:51:58] <arrrrrrrrr> good
[15:53:25] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:53:39] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[16:05:50] *** Quits: cdidd (cdidd@moz-DAECF479.broadband.corbina.ru) (Input/output error)
[16:06:23] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[16:06:24] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[16:08:28] *** Joins: cdidd (cdidd@moz-A33FA5E5.broadband.corbina.ru)
[16:11:32] *** Quits: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP) (Quit: Reconnecting)
[16:13:02] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[16:15:29] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:16:00] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[16:16:13] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[16:16:15] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[16:18:12] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[16:18:23] <arrrrrrrrr> how can I split a file extension from a file name?
[16:18:25] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[16:18:47] <bstrie> arrrrrrrrr: not sure what you mean
[16:19:06] <cmr> arrrrrrrrr: path.extension()
[16:19:25] <bstrie> I can't imagine there's any proper and principled way of doing it. does that handle `.tar.gz` files properly?
[16:19:41] <arrrrrrrrr> oh, right.
[16:19:48] <cmr> the extension is .gz
[16:19:50] <achin> the extention on foo.tar.bz is .gz
[16:19:52] <arrrrrrrrr> na, gz is fine
[16:19:53] <cmr> or, speficially gz
[16:20:10] <bstrie> shrug
[16:20:12] <bstrie> if you say so
[16:21:08] <bstrie> tar doesn't make me manually remove the gz, so it's just a single extension to my eyes
[16:21:43] <bstrie> in any case, filenames can contain periods, and do not necessarily have file extensions
[16:22:06] <bstrie> it's a completely hopeless prospect
[16:22:12] <achin> the extension is generally considered the string after the last dot in a filename (or an empty string is no dot exists)
[16:22:54] <achin> at least as far as programmatic extension splitting functions are concerned
[16:23:07] <arrrrrrrrr> is every string that doesn't contain NUL a valid posix path?
[16:23:25] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[16:24:10] <bstrie> arrrrrrrrr: I'd be surprised if it were that simple
[16:24:11] <achin> a string longer than PATH_MAX is not valid
[16:24:29] <arrrrrrrrr> the docs say path::new only fails if the string contains NUL
[16:24:35] <bstrie> arrrrrrrrr: http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap03.html#tag_03_266 might help
[16:25:34] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:25:57] <bstrie> arrrrrrrrr: note that rust strings are UTF-8, and I have no idea if posix paths are allowed to contain *every* valid unicode point
[16:26:01] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:26:01] *** ChanServ sets mode: +o pnkfelix
[16:27:11] <arrrrrrrrr> well, according to some guy on serverfault every path without NUL is valid
[16:27:36] <bstrie> arrrrrrrrr: every *unicode* string?
[16:28:11] <achin> in practice i suspect there are some limitations
[16:29:01] *** Joins: sankha93 (Instantbir@53FB2E93.922BE1F.EFB84E89.IP)
[16:29:18] <bstrie> arrrrrrrrr: we do have a Path type, to save you from worrying about this sort of thing
[16:29:40] <arrrrrrrrr> bstrie: "A sequence of one or more bytes representing a single graphic symbol or control code.
[16:29:59] <arrrrrrrrr> "This term corresponds to the ISO C standard term multi-byte character, where a single-byte character is a special case of a multi-byte character.
[16:35:07] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[16:36:13] <Yurume> arrrrrrrrr, the definition of valid path is ultimately up to the platform, the OS, the current character encoding and the API level in use.
[16:37:24] <Yurume> e.g. *nix typically expects an 8-bit octet string (the encoding conversion occurs at the higher level) as a path, but Windows expects an UCS-2/UTF-16 string (depending on the version and API level) as a path.
[16:38:37] * achin is having fun creating really odd unicode named directories
[16:39:15] <Yurume> various sets of characters are disallowed in the path depending on the context. *nix command line typically needs a special treatment for paths starting with -, and using control characters in the path would be a fun way to break everything..
[16:39:18] <achin> like ⁄foo
[16:39:48] <Yurume> and in Windows "con" etc. (or "con.exe" etc.) are disallowed in certain APIs but not in some APIs
[16:40:13] <achin> in the case of "con", it's still a valid path, right?  it's just that "con" has special meaning
[16:40:13] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:40:18] <Yurume> similar for non-whitespace-trimmed file names, file names starting with dots, surrogate pairs, etc.
[16:40:56] <Yurume> achin, you can always create a file named con via CreateFile with \\?\-prefixed path.
[16:41:03] <arrrrrrrrr> can a command line argument contain NUL?
[16:41:06] <Yurume> (and many others)
[16:41:20] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[16:41:48] <Yurume> no, and consequently NUL (or U+0000 in Windows) is disallowed in most cases, I think.
[16:41:49] <achin> not on linux, as far as i know (since commanad line args are char*)
[16:42:02] <arrrrrrrrr> very good
[16:43:16] <achin> i wonder if we will ever see a standard common string type that is not null-terminated
[16:44:30] <Yurume> we once had modified UTF-8 for that purpose. :S
[16:45:52] <Ms2ger> achin, ~str? :)
[16:47:33] <achin> yes, rust has nice strings
[16:47:54] <achin> though i wonder why strings in general seem to cause so many problems in language designers
[16:48:07] <arrrrrrrrr> what's the notation for a proc?
[16:48:20] <achin> it seems like no one gets them right the first time.  maybe that's because there is no obvious right way to handle them?
[16:48:46] <eddyb> arrrrrrrrr: poc instead of fn
[16:48:50] <eddyb> *proc
[16:50:03] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[16:50:17] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[16:50:22] <arrrrrrrrr> from_str returns an Option?
[16:50:25] <arrrrrrrrr> that's unfortunate
[16:50:56] <achin> you think it should fail instead?
[16:51:05] <arrrrrrrrr> it should return a Result
[16:51:09] <eddyb> unwrap or expect
[16:51:32] <achin> ah, yeah i guess a Result would make sense too
[16:51:46] <arrrrrrrrr> I'd like to know what went wrong
[16:52:09] <achin> how do you think that info will be helpful?
[16:52:48] <arrrrrrrrr> why wouldn't it? it doesn't return None without having seen a problem
[16:52:58] <eddyb> arrrrrrrrr: you're writing a new FromStr impl?
[16:53:10] <eddyb> or using a builtin one?
[16:53:16] <arrrrrrrrr> builtin
[16:53:33] <achin> (for example, what error message might `let i: int = FromStr("potato")` return that would be usefel beyond "it didn't work")
[16:54:15] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[16:54:25] <arrrrrrrrr> how about "potato is not a valid integer"
[16:54:54] <achin> isn't that implied by "it didn't work" ?
[16:54:56] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[16:55:15] <achin> maybe if you gave it a number that can't fit in an int you'd get a different error message
[16:55:25] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[16:56:20] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[16:58:52] <arrrrrrrrr> is there macro syntax for "0 or 1"?
[16:59:17] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[16:59:17] *** ChanServ sets mode: +ao brson brson
[16:59:19] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Connection reset by peer)
[16:59:27] <arrrrrrrrr> na, makes no sense in my case anyway
[16:59:40] <pnkfelix> arrrrrrrrr: you mean in a pattern?
[16:59:52] <arrrrrrrrr> yeah
[17:00:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:02:59] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[17:03:01] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[17:03:34] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:03:39] <pnkfelix> arrrrrrrrr: It seems natural enough (given that we have * and +) but I do not think we have sugar for it right now.
[17:04:05] <arrrrrrrrr> type shouldn't be a reserved word
[17:04:57] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:06:08] <bstrie> pnkfelix: we do have a pattern for or...
[17:06:35] <adridu59> acrichto: have you seen my comment regarding Path?
[17:07:02] <bstrie> rusti: match 1 { 0 | 1 => "yes", _ => "no" }
[17:07:03] -rusti- "yes"
[17:07:06] <bstrie> pnkfelix arrrrrrrrr ^
[17:07:21] <pnkfelix> bstrie: I thought arrrrrrrrr was asking about macro_rules
[17:07:37] <pnkfelix> bstrie: (when I said "pattern", I meant in the binding patterns of macro_rules definitions)
[17:07:39] <bstrie> ah I see
[17:07:47] <bstrie> you mean having ? in addition to * and +
[17:07:53] <pnkfelix> bstrie: yeah, in essence.
[17:08:00] <bstrie> rather than having an `or` operator in addition to * and + :P
[17:08:18] <pnkfelix> bstrie: An `or` operator would probably be just as usable
[17:08:29] <pnkfelix> or [un]unable
[17:08:36] <pnkfelix> *[un]usabe
[17:08:37] <pnkfelix> sigh
[17:08:42] <bstrie> [un]*usable
[17:08:52] <bstrie> :P
[17:13:00] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[17:14:17] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[17:17:36] <acrichto> adridu59: it just needs a * in front of it
[17:18:36] <adridu59> acrichto: I already tried this before but then it says error: cannot move out of dereference of & pointer
[17:20:09] <acrichto> argh coercion
[17:20:13] <acrichto> adridu59: .as_slice()
[17:20:26] <adridu59> that's what was in my patch :)
[17:20:37] <acrichto> you had a match, I was going for the expect
[17:20:47] <adridu59> yes
[17:21:08] <adridu59> could Path be changed so that it takes by reference?
[17:21:25] <acrichto> sadly not easily
[17:21:33] <acrichto> &str is not really a string by reference, it's a slice
[17:21:37] <acrichto> &T would mean &&str
[17:21:55] <adridu59> I see
[17:22:11] <adridu59> do you think I should use the "optimized" code?
[17:22:34] <acrichto> I mainly think that the tutorials should use idiomatic code
[17:22:38] <adridu59> it doesn't really look idiomatic with the three .next(), or maybe it's just me
[17:22:46] <adridu59> right so I shall keep the current one
[17:22:51] <adridu59> thanks!
[17:24:40] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Connection reset by peer)
[17:26:43] <adridu59> acrichto: PR updated
[17:26:49] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[17:27:05] <adridu59> it's true that a .buffered() method would be nice
[17:27:47] <acrichto> adridu59: Path::new(path.as_slice())
[17:28:28] *** Joins: michaelgreene (michael@DA820AA2.17CD9887.F12515B4.IP)
[17:30:03] *** Quits: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net) (Quit: leaving)
[17:32:13] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[17:32:16] <adridu59> acrichto: I have a few derps here
[17:34:16] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[17:34:42] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[17:34:54] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-3D1B1221.dynamic.qsc.de) (Ping timeout)
[17:35:53] <adridu59> acrichto: error: type `std::path::posix::Path` does not implement any method in scope named `as_slice`
[17:36:15] <acrichto> adridu59: yes, that's the problem, you also don't need to recreate the path
[17:36:29] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[17:37:12] <hoverbear> I wish JS had Match :(
[17:37:13] <adridu59> acrichto: I fixed the dual Path locally it was my derp
[17:38:16] <adridu59> acrichto: alright
[17:38:18] <jvns> how do I set the path for a crate to make the message "error: can't find crate for `core`" go away? I tried #[path = "rust-core"] and #[path = "rust-core/core"], but neither worked
[17:39:42] <bstrie> jvns: sorry, no idea. maybe strcat knows, given that it's his library :P
[17:39:44] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[17:39:53] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[17:41:08] <mark_edward> how can i create a ~str from a charIterator?
[17:41:22] <bstrie> mark_edward: does .to_str() suffice?
[17:42:07] <adridu59> acrichto: PR updated!
[17:43:51] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[17:45:23] <jvns> urggh
[17:47:02] <bstrie> jvns: your username shares a similarity to a character in a fantasy series who is the originator of all wizardry, and it amuses me to imagine this all-powerful figure struggling with compiler errors :P
[17:47:07] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Ping timeout)
[17:47:10] <jvns> bstrie: =)
[17:47:22] <jvns> bstrie: who is the character?
[17:47:36] <Ms2ger> Jack Vns?
[17:48:14] <bstrie> jvns: from https://en.wikipedia.org/wiki/The_First_Law , character's name is Juvens
[17:48:36] <jvns> excellent.
[17:48:49] <bstrie> fairly enjoyable. has a few really good characters
[17:49:49] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:50:27] <jvns> I will add it to my list!
[17:50:46] *** Parts: Caseus (bacon@moz-9F046088.members.linode.com) ()
[17:51:23] <Ms2ger> I'd add it to mine, but I'm not nearly done with Jordan
[17:52:37] <killerswan> for the morning crowd:
[17:52:47] <jvns> what does it meeeeean: "build/obj/main.o:(.data.rel+0x0): undefined reference to `_rust_crate_map_core::_2e829c2f6b1e0b526ed03bc4207a17cb70f266e86a432b76b9243b916706ec71::v0.0'"
[17:53:23] <killerswan> this program which doesn't use @ is swelling in memory about 70 MB / 8 hours: https://github.com/killerswan/meow/blob/2e00f8556e1939a1e0b6f153a6d831ed0af5b057/src/testloop.rs
[17:53:34] <killerswan> (on OS X, at least)
[17:53:40] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:54:46] <killerswan> I suspect there's something in std::fs::stat, std::fs::walk_dir, or std::run::process_output which leaks
[17:55:02] <killerswan> but haven't had time to learn how to debug that
[17:55:43] <jvns> hmm how do --emit-llvm and --lib interact, I wonder
[17:55:45] <acrichto> killerswan: OSX instruments is normally really good about debugging problems like this, you can also run the 'leaks' program on the pid of the running program to get some info
[17:56:12] <killerswan> have to go to work, won't get back to this until this evening, myself
[17:56:16] <killerswan> ttyl!
[17:56:41] <adridu59> acrichto: should be good to go (hopefully)
[17:57:34] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[17:58:00] <adridu59> thanks for the review!
[17:58:04] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:58:17] <eddyb> killerswan: try with #[no_uv]
[17:58:24] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:01:34] <bstrie> "Every language that processes strings as char arrays has to check for '\0'; either internally or by the programmer because they are arrays, and how else is the processor going to know when to stop looking at the characters? and by default every language must at some level process strings as char arrays.  Do you trust a compiler to do that for you?"
[18:01:45] <bstrie> ^ arguments against rust, courtesy of #programming on freenode
[18:02:06] <bstrie> it's actually really funny
[18:03:20] <killerswan> eddyb: it won't run then: "task '<main>' failed at 'Unhandled condition: io_error: io::IoError{kind: IoUnavailable, desc: "unimplemented I/O interface", detail: None}', /Users/kevin/code/rust/src/libstd/condition.rs:131"
[18:03:21] <eholk> bstrie: if only there were some other way to find the length of the string...
[18:03:30] <eholk> maybe one of the interns next summer can figure that out
[18:03:44] <killerswan> acrichto: I couldn't attach with Instruments for some reason
[18:03:55] <eddyb> killerswan: latest master? then there's no easy way to know if it's libuv that's leaking
[18:03:59] <bstrie> "Arrays have to be allocated at the low level with the length of the array of characters to be present, and since strings at the lowest level don't have a length member what do you do? Do you use a series of bytes at the beginning of the char array instead of NULL? That would require much more processing"
[18:04:04] <bstrie> eholk: ^
[18:04:22] <bstrie> eholk: WHAT DO WE DO NOW?!?
[18:04:28] <bstrie> cancel the project
[18:04:29] <bstrie> rust is doomed
[18:04:31] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:04:31] *** ChanServ sets mode: +ao brson brson
[18:04:36] <bstrie> sorry, everyone. gg
[18:04:39] <killerswan> eddyb: latest as of last night, yeah
[18:04:53] <killerswan> 9eb89a6c6e60b0ed84425
[18:04:55] <eddyb> brson: nice timing. we're about to shut everything down
[18:05:12] <bstrie> brson: we've decided to all just program in C89 for the rest of our lives
[18:05:24] <killerswan> (args, if anybody wants to try it, are just a crate named whatever.rs with some tests)
[18:05:37] <killerswan> (e.g. src/demo.rs in the same repo)
[18:05:39] <acrichto> killerswan: I'd recommend leaving it running and using 'leaks', I've found that to be successful before
[18:05:42] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[18:06:02] <sfackler> bstrie: It requires _all_ the processing!
[18:06:08] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:06:08] *** ChanServ sets mode: +ao dherman dherman
[18:06:58] *** Joins: tcreate (tcreate@moz-1A21C25B.olin.edu)
[18:08:42] *** Quits: tcreate (tcreate@moz-1A21C25B.olin.edu) (Ping timeout)
[18:08:47] *** Joins: DeTeam (DeTeam@moz-2B3D845F.dyn.broadband.iskratelecom.ru)
[18:08:52] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:08:53] <brson> eddyb bstrie: ok :(
[18:09:00] *** Quits: kmc (keegan@moz-2C6EE959.compute-1.amazonaws.com) (Quit: leaving)
[18:09:45] *** Joins: kmc (keegan@moz-2C6EE959.compute-1.amazonaws.com)
[18:09:46] *** ChanServ sets mode: +o kmc
[18:10:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[18:12:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:12:05] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[18:13:39] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[18:16:34] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[18:17:32] <jvns> urg clang hates me. "clang -arch i386 ...." says "warning: argument unused during compilation: '-arch i386'"
[18:19:12] *** Joins: nif (nif@moz-C672189A.wireless.oberlin.edu)
[18:20:32] *** Quits: DeTeam (DeTeam@moz-2B3D845F.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[18:21:58] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Connection reset by peer)
[18:22:00] *** Joins: echristo (echristo@A2012DB6.D6CCE4AE.77834EAA.IP)
[18:22:55] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[18:25:36] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[18:27:02] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[18:27:16] <eddyb> jvns: it sounds like you want -march or -m32 or something GCC-specific :P
[18:27:28] <jvns> eddyb: maybe!
[18:27:51] <eddyb> because clang emulates GCC's argument format AFAIK
[18:28:05] <jvns> hmm I don't really understand what clang is doing
[18:28:17] <jvns> it runs ld with "-dynamic-linker /lib/ld-linux.so.2"
[18:28:25] <jvns> I reaaaaly don't want that to be an argument to ld that it is using
[18:30:08] <bstrie> jvns: there's your problem, you probably wanna *statically* link linux
[18:30:15] <bstrie> an honest mistake
[18:30:30] <bstrie> you are writing an OS, right?
[18:30:33] <jvns> yeah
[18:30:35] <jvns> I don't even want linux really
[18:30:38] <bstrie> :)
[18:30:49] <jvns> =(
[18:31:40] <jvns> I'm using the arguments to clang that strcat suggested
[18:34:40] <bstrie> I can't help you, I write jaaavaaaaascriiiiiiiiiipt
[18:35:00] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:35:03] <bstrie> honstly, I don't even know why you bother with linkers
[18:35:21] <bstrie> just compile everything via emscripten, I hear that works wonders
[18:35:46] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[18:35:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:35:55] *** Joins: tcreate (tcreate@66796279.4683C875.9D2C3D3E.IP)
[18:38:09] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Connection reset by peer)
[18:39:50] <carter> bstrie: someone said that?
[18:39:52] *** pmoore is now known as pmoore|afk
[18:40:17] <carter> acrichto: i've been getting great feedbackon that PR :)
[18:41:13] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:41:13] *** ChanServ sets mode: +ao brson brson
[18:41:16] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:41:21] *** Joins: trecer (trecer@AFD0FAA3.8F253A2B.689607DE.IP)
[18:42:55] *** Quits: trecer (trecer@AFD0FAA3.8F253A2B.689607DE.IP) (Quit: Lingo - http://www.lingoirc.com)
[18:43:37] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:43:38] *** Joins: trecer (trecer@AFD0FAA3.8F253A2B.689607DE.IP)
[18:46:47] *** Quits: tcreate (tcreate@66796279.4683C875.9D2C3D3E.IP) (Client exited)
[18:48:18] *** Joins: tcreate (tcreate@66796279.4683C875.9D2C3D3E.IP)
[18:49:50] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[18:50:01] *** Quits: tcreate (tcreate@66796279.4683C875.9D2C3D3E.IP) (Ping timeout)
[18:53:09] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[18:53:23] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[18:54:41] *** Quits: sankha93 (Instantbir@53FB2E93.922BE1F.EFB84E89.IP) (Quit: Gone to save the world!)
[18:55:22] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[18:55:36] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:01:27] *** Joins: g3xzh (g3xzh@moz-7C9A7193.red.bezeqint.net)
[19:02:15] *** Parts: yorickpeterse (yorickpete@moz-85A96365.yorickpeterse.com) (WeeChat 0.4.1)
[19:03:09] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[19:04:34] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Ping timeout)
[19:05:24] *** Quits: heftig (heftig@moz-6D66CA9F.dip0.t-ipconnect.de) (Ping timeout)
[19:06:50] <acrichto> carter: nice work! 
[19:06:52] <acrichto> r+ from me
[19:06:59] <carter> acrichto: woahhhh
[19:07:07] * carter woot
[19:07:14] <carter> so now i have patches in 2 compilers
[19:07:17] <acrichto> thanks for looking into this!
[19:07:30] <carter> acrichto: i have this silly ideas that things should just work™
[19:07:34] <acrichto> you should look out for cmr's next issue of "this week in rust", your name will be on it!
[19:07:51] <carter> oh crap! :)
[19:09:23] <carter> i mean woo
[19:09:41] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[19:09:58] *** Joins: heftig (heftig@moz-B3E7564.dip0.t-ipconnect.de)
[19:12:25] *** Quits: g3xzh (g3xzh@moz-7C9A7193.red.bezeqint.net) (Client exited)
[19:18:21] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[19:19:54] *** Joins: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP)
[19:20:13] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Ping timeout)
[19:22:01] *** Quits: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:23:37] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[19:23:52] <carter> acrichto: should there be an extra newline at the end?
[19:24:09] <acrichto> carter: meh, doesn't matter too much to me
[19:24:23] <carter> i deleted the extra new line 'cause I thought I had intro'd it
[19:25:04] *** Joins: Jarrett (chatzilla@moz-8211AC00.dhcp.nrwl.ca.charter.com)
[19:26:06] <mark_edward> ChrisMorgan, pingo
[19:26:47] <dhedlund> eddyb: the truncate issue still existed in the latest rust-png.  rust source comments suggest the version of rust used by servo was supposed to raise an IoError when opening w/ io::Create, but it doesn't.  it's intended behavior in latest rust since changed to io::Open, as there's also a 'fn create' which explicitly uses the truncate mode
[19:27:53] <Luqman> carter: hmm, does the problem still exist if you use --enable-clang but your `cc` is not the default (clang) ?
[19:28:07] <eddyb> dhedlund: hahahaha
[19:28:26] <eddyb> dhedlund: PEBKAC. or we need a version of that acronym for docs
[19:28:44] <carter> Luqman: the issue having gcc point to gcc, but not having the others point correctly
[19:29:11] <carter> i've not tried all the permuations
[19:29:15] <carter> i'm on a macbook air
[19:30:39] <carter> also i wanted to build with gcc
[19:35:09] <ziad> Ugh, I'm still getting the following error when building on Mac OS 10.8
[19:35:13] <ziad> error: ar s x86_64-apple-darwin/stage1/lib/rustc/x86_64-apple-darwin/lib/libstd-04ff901e-0.9-pre.rlib failed with: exit code: 1
[19:35:13] <ziad> note: stdout ---
[19:35:15] <ziad> note: stderr ---
[19:35:16] <ziad> Assertion failed: ((unsigned)Val < Attribute::EndAttrKinds && "Attribute out of range!"), function addAttribute, file Attributes.cpp, line 948.
[19:35:17] <ziad> ar: fatal error in /opt/local/bin/ranlib
[19:35:18] <ziad> error: aborting due to previous error
[19:35:25] <ziad> I did a git clean -xfd, ./configure && make
[19:35:29] <ziad> issue persists
[19:36:25] <carter> ziad: what do gcc --version, cc --version and g++ --version say?
[19:37:11] <ziad> gcc --version: i686-apple-darwin11-llvm-gcc-4.2
[19:37:27] <ziad> cc --version: Apple LLVM version 4.2 (clang-425.0.28) (based on LLVM 3.2svn)
[19:37:34] <ziad> g++ --version
[19:37:35] <ziad> i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
[19:37:40] <carter> ok
[19:37:48] <carter> ziad: --enable-clang and you should be happy
[19:37:55] <ziad> gotcha
[19:37:56] <ziad> thanks :)
[19:37:59] <carter> ziad i just PR'd a patch to the ./configure cscript to catch thigns
[19:38:02] <carter> *this
[19:38:09] <carter> and warn about it
[19:38:17] <carter> ziad: you have haskell installed don't you? :)
[19:38:37] <carter> or some other lang that needs gcc 
[19:38:38] <ziad> carter: yep !
[19:38:45] <ziad> haskell
[19:38:55] <carter> ziad: considering i wrote those gcc directions for ghc :)
[19:39:10] <carter> i figured any rust curious haskelllers woudl have the same problem as I
[19:39:19] <ziad> hehe
[19:39:20] <carter> so after banging my head
[19:39:27] <ziad> I'm more of a Haskell curious Rustie
[19:39:30] <carter> well
[19:39:32] <ziad> :)
[19:39:51] <carter> --enable clang shoudl work
[19:40:00] <ziad> I usually manually modify the configure file, seems I forgot to do that this time
[19:40:14] <carter> OR, have cc and g++ point to real gcc and real g++
[19:40:22] <ziad> yeah
[19:40:23] <carter> i have wee wrappers in my ~/bin/
[19:40:28] <carter> for cc, gcc, and g++
[19:40:48] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[19:41:12] <carter> ziad: enjoy
[19:41:20] <ziad> thanks!
[19:43:45] <carter>  cat ~/bin/gcc
[19:43:45] <carter> #!/bin/sh
[19:43:46] <carter> gcc-4.8 $@
[19:43:50] <carter> is my gcc wrapper
[19:43:51] <carter> etc
[19:44:55] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[19:45:16] <o11c> carter: "$@"
[19:45:29] <carter> ?
[19:45:49] * o11c is surprised that people still fail to properly quote shell arguments
[19:46:45] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Connection reset by peer)
[19:47:37] *** pmoore|afk is now known as pmoore
[19:48:42] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[19:49:03] <Jarrett> the shell is a weird text macro system with a bunch of silly rules...
[19:51:05] <carter> what happens if i don't do that?
[19:51:17] <carter> i've been able to build compilers just fine with that
[19:51:19] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Client exited)
[19:52:32] <o11c> carter: if any argument ever has spaces, stuff will break
[19:52:48] <carter> so i've been lucky?
[19:52:54] <o11c> I know a lot of software does stuff like '-Dversion="program 1.0"'
[19:53:03] <carter> so i need to do "$@" instead of $@
[19:53:04] <carter> ?
[19:53:17] <o11c> which your script would pass as '-Dversion="program' '1.0"'
[19:53:18] <o11c> right
[19:53:21] <carter> ok
[19:53:25] <carter> well i've bene lucky
[19:53:26] <carter> thanks
[19:53:29] <carter> i'll do that now
[19:54:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[19:55:10] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:57:42] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[19:58:33] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[19:58:43] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Connection reset by peer)
[20:05:21] *** Quits: apoelstra (username@moz-C92A9641.sw.biz.rr.com) (Quit: WeeChat 0.4.2)
[20:06:38] *** Quits: rca (rcatolino@14ADCB35.64386949.520D6FA6.IP) (Ping timeout)
[20:07:37] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Input/output error)
[20:07:50] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[20:09:59] *** Joins: rca (rcatolino@moz-3ED58F2C.adsl.proxad.net)
[20:13:00] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Quit: Leaving.)
[20:15:36] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Connection reset by peer)
[20:22:36] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:22:50] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:22:59] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:26:07] *** Quits: nif (nif@moz-C672189A.wireless.oberlin.edu) (Quit: Konversation terminated!)
[20:27:32] *** Joins: g3xzh (g3xzh@moz-7C9A7193.red.bezeqint.net)
[20:28:38] *** Joins: eholk (eholk@18305C91.D158D03F.6E370BFC.IP)
[20:29:52] <carter> whats the rough roadmpa for HKT stuff? (like associated types and associate data types?)
[20:34:44] *** Quits: g3xzh (g3xzh@moz-7C9A7193.red.bezeqint.net) (Client exited)
[20:35:25] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Quit: Leaving)
[20:36:04] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[20:39:40] <kmc> are associated types part of HKT? seems orthogonal to me
[20:39:58] <carter> maybe so
[20:40:08] <carter> they seem complementary and synergistic though :)
[20:40:15] <sellout> I didn’t realize higher-order types were on the roadmap.
[20:40:24] <carter> i hope they are
[20:40:37] <carter> 'cause… it'll be hard to write what I want to in rust otherwise
[20:41:53] <sellout> Well, I actually have an email I was about to send to nmatsakis (who is apparently the person to talk to about HKT) with some initial questions, and the idea that I’d work on it (but it’d definitely be a spare-time project for me).
[20:43:52] <bstrie> carter: very long-term roadmap. not a 1.0 feature, unless a patch somehow magically materializes
[20:44:07] <carter> bstrie: for associated types?
[20:44:11] <bstrie> HKT
[20:44:13] <carter> oh
[20:44:18] <bstrie> but, also for associated types, as far as I know
[20:44:53] <carter> so would an example of HKT be writing a functor trait?
[20:44:59] <bstrie> I think so
[20:45:00] <carter> or a monad trait?
[20:45:01] <carter> ok
[20:45:12] <sellout> carter: Yep to both.
[20:45:14] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:45:29] <carter> well, parametricity helps make good engineering saner
[20:45:58] <sellout> carter: I need it for my stuff, too. But no promises that my timeframe is any better than “very long-term roadmap. not a 1.0 feature” ;)
[20:46:05] <carter> sellout: whats your stuff?
[20:46:17] <sellout> Well, _need_ is a bit strong :)
[20:46:25] <carter> well :)?
[20:46:50] <sellout> carter: Eh, I have a few things I’m working on. But it’s mostly just because I think like a Haskeller.
[20:47:00] <carter> sellout: me too
[20:47:13] <carter> sellout: i'm about to release my alpha of numerical haskell
[20:47:27] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[20:47:35] <ziad> So are HKTs what is holding back something like `do` in Haskell or `for` in Scala?
[20:47:35] <carter> and rust seems like the only substantially different language worth figureing out how to port the ideas to
[20:47:41] <carter> ziad: nopes
[20:47:49] <ziad> Are there plans for the latter?
[20:47:51] <carter> nb: for in scala has a deisgn problem
[20:48:02] <carter> do is syntax sugar for a Monad Trait
[20:48:06] <carter> or applicative trait etc
[20:48:27] <carter> a monad M has type :: * -> *
[20:48:32] <ziad> What problems does `for` in Scala has that `do` does not?
[20:48:38] <carter> i forget
[20:48:40] <carter> let me google
[20:49:14] *** Quits: eholk (eholk@18305C91.D158D03F.6E370BFC.IP) (Quit: eholk)
[20:49:38] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:49:55] <ziad> Should I open an issue for this then?
[20:50:06] <carter> for which?
[20:50:15] <ziad> Implementing `do` syntax
[20:50:22] <carter> ziad: you can't have that untill you have a monad abstraciton!
[20:50:25] <carter> thats the first step
[20:50:27] <carter> HKT
[20:50:31] <carter> higher kinded traits / types
[20:50:40] <bstrie> no monads in rust 1.0! we already have enough to teach people :P
[20:50:47] <sellout> ziad: And once you have HKT, you can just make a macro for do: http://static.rust-lang.org/doc/master/tutorial-macros.html
[20:51:01] <carter> bstrie: i'm ok with that, just give me functor and applicative
[20:51:05] <ziad> Yeah, that was my question, so HKT is prevengin
[20:51:08] <carter> yes
[20:51:12] *** Joins: g3xzh (g3xzh@moz-7C9A7193.red.bezeqint.net)
[20:51:13] <carter> mind you i'm ignorant
[20:51:13] <ziad> preventing `do` (o are HKTs what is holding back something like `do` in Haskell or `for` in Scala?)
[20:51:20] <carter> yes
[20:51:31] <ziad> sellout: okay, sounds good
[20:51:32] <carter> try writing a monad trait 
[20:51:33] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[20:51:40] <carter> sellout: what sort of libs are you hacking on?
[20:52:10] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[20:52:25] <ziad> The `do` keyword is no longer going to be used in the short term, after removing `do foo() |x| { }`, correct?
[20:52:32] <ziad> Since we don't have do/while loops either.
[20:52:52] <sellout> carter: At the moment, some functional data structure stuff (EG, hash array-mapped tries).
[20:52:53] <bstrie> if rust ever has monads, we'll need to come up with a new name for them
[20:53:01] <cmr> bstrie: we already have monads.
[20:53:05] <cmr> option and result are monads.
[20:53:05] <bstrie> nobody will ever take the word "monad" seriously, thanks to haskell
[20:53:12] <bstrie> cmr: doesn't change my point
[20:53:22] <bstrie> someone come up with a better term
[20:53:31] <ziad> rustoid :P
[20:53:34] <cmr> heh
[20:53:37] <carter> Cooties
[20:53:40] <bstrie> I don't care if it's mathematically accurate, this is about marketing
[20:53:40] <steveklabnik> monads are a fine name
[20:53:42] <carter> algebraic cooties
[20:53:46] <bstrie> steveklabnik: WONG
[20:53:47] <carter> Tubes
[20:53:57] <sellout> bstrie: We can just call them “monoid adjunctions” ;)
[20:54:05] <carter> Cooties Tubes
[20:54:11] <bstrie> steveklabnik: if people get it in their head that rust is just "C++ with macros", we're DOA
[20:54:13] <carter> "fake dynamic variables / configuration threading"
[20:54:16] <bstrie> er
[20:54:18] <bstrie> "
[20:54:22] <bstrie> C++ with monads"
[20:54:28] *** Quits: g3xzh (g3xzh@moz-7C9A7193.red.bezeqint.net) (Ping timeout)
[20:54:34] <bstrie> we already sorta have macros, but it's ok because C also has macros
[20:54:43] <bstrie> so it doesn't scare people away, at least not at first
[20:54:52] <carter> you need to recruite Oleg
[20:54:54] <bstrie> marketing > clarity
[20:54:55] <tiffany> textual replacement hardly qualifies as metaprogramming though
[20:54:56] <carter> g2g
[20:55:11] <sellout> tiffany: The C programmers can find that out in good time.
[20:55:33] <bstrie> tiffany: the C programmers tried to convince me today that rust won't work because it introduces new syntax that C doesn't have
[20:55:42] <carter> parametric polymorphism + monomorphization = yay
[20:55:57] <bstrie> tiffany: also, that rust will fail because it tries to provide compile-time checking for strings, or something
[20:56:05] <bstrie> it's all very confusing
[20:56:29] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:57:55] <tiffany> they do not sound like very good C programmers if they're still so hung up on syntax
[20:58:29] <cmr> bstrie: wait, for srs?
[20:58:59] <tiffany> also, what is compile-time checking for strings even supposed to mean
[20:59:08] <ChrisMorgan> mark_edward: pongo
[20:59:09] <Ms2ger> bstrie, did you, at any point, utter "Are you high?"
[20:59:15] <ChrisMorgan> (pongi?)
[20:59:21] <bstrie> Ms2ger: I did accuse them of trolling, but... poe's law :P
[20:59:53] <bstrie> tiffany cmr Ms2ger https://botbot.me/mozilla/rust/msg/8880549/
[21:00:04] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:00:16] <Ms2ger> Whuh
[21:01:00] <tiffany> did you explain to them how every sane language represents strings
[21:01:22] <sfackler> tiffany: Pascal strings are not Web Scale (tm)
[21:01:23] <bstrie> tiffany: I told them that haskell implements strings as linked lists, they just ignored me :)
[21:01:39] <cmr> well that's not really honest.
[21:01:54] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[21:02:16] <tiffany> even in C I have a string library which uses (length, value) instead of null terminators
[21:02:22] <cmr> so do I
[21:02:36] <cmr> first thing I wrote for that project
[21:02:39] <tiffany> I think these people don't understand that strcat and friends have versions which take a length argument
[21:03:01] <o11c> just ignore them
[21:03:03] <cmr> or they thing that memory unsafety is solvable by directly appling face to keyboard!
[21:03:08] *** Joins: skade (skade@moz-FB98B886.web.vodafone.de)
[21:03:29] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[21:04:30] <jvns> man how did this conversation not go "strings have to end with a \0!" "nope, you could just store the length" "oh yeah true!"
[21:05:00] <bstrie> jvns: read my next quote from that link!
[21:05:16] <tiffany> I'm wondering too jvns
[21:06:35] <Ms2ger> jvns, but what after you take away the length!
[21:07:02] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[21:07:31] <bstrie> Ms2ger: just keep reading from memory until your runtime's NLP engine determines that the string has ended, naturally
[21:07:39] *** Joins: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[21:08:00] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[21:08:14] <benh> I wonder how these people deal with arrays of things where 0 is not a magical sentinel value
[21:08:16] <cmr> Whoever generated those quotes clearly doesn't understand types, or how one can structure ones program to work harmoniously with the system.
[21:08:31] *** Quits: trecer (trecer@AFD0FAA3.8F253A2B.689607DE.IP) (Quit: Computer has gone to sleep.)
[21:08:35] <Ms2ger> Well, if it's C programmers... C doesn't have types
[21:09:06] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[21:09:17] <Eridius> what quotes are these?
[21:09:30] <sfackler> cmr: whoever generated those quotes doesn't understand a lot imo
[21:09:36] <cmr> Eridius: https://botbot.me/mozilla/rust/msg/8880549/
[21:09:38] <cmr> sfackler++
[21:09:41] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[21:09:41] <Eridius> cmr: ah
[21:10:09] <bstrie> Eridius: this morning I educated an old-school C programmer on what is and is not possible for rust to statically analyze
[21:10:12] <Eridius> I'm scared to enter #programming
[21:10:19] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[21:10:32] <Ms2ger> bstrie, well, all interesting static analyses are undecidable...
[21:10:34] <bstrie> did anyone else know that linear types are impossible? someone should probably tell the devs
[21:10:38] <Ms2ger> (Rice's theorem)
[21:10:49] <bstrie> also, that rust must obviously require null checks at runtime
[21:10:59] <bstrie> and that any claim to the contrary is chicanery
[21:11:02] *** Quits: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Ping timeout)
[21:11:20] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[21:11:21] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Quit: eddyb)
[21:11:21] <bstrie> also that *all* string implementations, in all languages, are just null-terminated arrays
[21:11:30] <cmr> someone's been huffing too much disassembler, apparently.
[21:11:31] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[21:11:34] <bstrie> and how is the compiler gonna check that for ya, smart guy?!?
[21:12:16] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[21:13:01] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[21:13:53] <ziad> TLDR: don't trust the compiler.
[21:14:32] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[21:15:11] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[21:16:13] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[21:19:53] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[21:20:01] <cmr> "
[21:20:03] <cmr> These got swept up in the great privatizing of 2013.
[21:20:04] <cmr> ~ sfackler
[21:20:07] <cmr> QOTW right there!
[21:20:15] <cmr> I should actually do a quote of the week, actually.
[21:20:42] <adridu59> seems like we've got a situation with Android http://buildbot.rust-lang.org/builders/auto-mac-32-opt/builds/3009 (acrichto)
[21:21:07] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[21:21:09] *** Quits: skade (skade@moz-FB98B886.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:22:00] <bstrie> hey optimization junkies
[21:22:30] <Ms2ger> Yeah
[21:22:39] <Ms2ger> Here I'm just sad we can't optimize out null checks
[21:22:55] <bstrie> in single-threaded code, is there any theoretical reason that a `let mut foo` that is never actually mutated would be slower than `let foo` ?
[21:22:58] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[21:23:20] <bstrie> I'm not saying I've observed this, just curious
[21:23:23] <cmr> bstrie: we might mark it with something that tells LLVM "this don't change", but I can't imagine LLVM wouldn't be able to figure that out on its own...
[21:23:43] <cmr> wait, certainly not, it's SSA, so it can't change by definition.
[21:23:50] <adridu59> (rust_android_dummy.o) has no symbols what's that?
[21:24:04] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[21:24:28] <o11c> cmr: how is & implemented? alloca a tmp around the call?
[21:24:42] <o11c> because you can't use SSA if you're taking the address
[21:25:43] <cmr> o11c: https://gist.github.com/cmr/cc3ba3728bd04ef2f535
[21:26:18] <cmr> (rustc --emit-llvm -S)
[21:26:56] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[21:26:58] *** Quits: Ms2ger (Ms2ger@BB191E51.D97EE64B.F15B0BB3.IP) (Quit: nn)
[21:27:40] <o11c> ouch, you're always alloca'ing
[21:28:20] <o11c> cmr: that sounds like a great opportunity to make llvm do less work ...
[21:28:42] *** Joins: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP)
[21:28:45] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[21:28:47] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Hibernating, be back soon.)
[21:28:59] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:28:59] *** ChanServ sets mode: +o pnkfelix
[21:29:34] <cmr> o11c: are you sure about that? it's what clang does: https://gist.github.com/cmr/f9352cbfc75b9eb9aa2e
[21:29:45] <cmr> afaik alloca is the only way to get space for locals.
[21:30:30] <o11c> cmr: but you don't actually *need* space except when you take a reference to it ...
[21:30:46] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[21:31:19] <cmr> how else do you make a local?
[21:31:35] <o11c> you just give it a different name in each block
[21:31:48] <o11c> it's %x.1 in the first, block, %x.2 in the second block, etc
[21:31:56] <cmr> now I'm really confused, what are you actually proposing here?
[21:32:37] <o11c> well, first I'll ignore the case when you actually take references, since that is somewhat more complicated
[21:33:47] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Quit: Lost terminal)
[21:34:14] <eholk> does rustdoc still understand `pub mod foo;`?
[21:34:29] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:34:46] <cmr> eholk: what do you mean by "understand"?
[21:35:17] <eholk> cmr: I'm getting a parse error, saying it's expecting a { instead of ;
[21:35:46] <cmr> eholk: rustdoc just runs rustc, does rustc parse it successfully?
[21:35:49] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[21:35:55] <eholk> cmr: yup
[21:35:59] <bstrie> "preg_replace with the /e (eval) flag will do a string replace of the matches into the replacement string, then eval it."
[21:36:04] * bstrie aneurysm
[21:36:15] <cmr> Super weird. Can you file a bug? cc @cmr
[21:36:45] <eholk> cmr: sure. Are you the official maintainer of rustdoc now?
[21:36:54] <cmr> eholk: kinda sorta
[21:38:03] <ziad> Ms2ger: optimize null checks where?
[21:38:26] <ChrisMorgan> bstrie: yes, we all hate PHP.
[21:38:37] <bstrie> ChrisMorgan: get to bed!!!
[21:38:55] <ChrisMorgan> bstrie: but I only got up an hour and a half ago!
[21:38:56] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:39:12] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Client exited)
[21:39:19] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[21:41:26] <eholk> cmr: https://github.com/mozilla/rust/issues/11007
[21:41:29] <bstrie> ChrisMorgan: once a year I reread the fractal of bad design article, and I keep finding new nuggets of insanity to appreciate
[21:41:38] * ChrisMorgan likes that article too
[21:41:44] <bstrie> ChrisMorgan: the author is in this channel :3
[21:42:22] <ChrisMorgan> Hmm, I suppose that's true.
[21:42:25] <cmr> ah eevee wrote that!
[21:43:18] <eevee> i did!
[21:43:28] <cmr> eholk: cannot reproduce; rustdoc version?
[21:43:43] <bstrie> eevee: I hear you hate us right now!!
[21:44:32] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:44:37] <eholk> cmr: master, 4e77c1148f0cf702310e5c2cd85b369100ff8ec6
[21:44:45] <bstrie> eevee: I sure hope you figured out how to iterate over a linked list, or whatever it is you were venting about on twitter
[21:44:51] * cmr upgrades
[21:45:50] *** Joins: sam (sam@7711C295.C8C6FF5E.4065847B.IP)
[21:45:55] <eholk> cmr: actually, my rustdoc may be linking against an old libsyntax or something...
[21:46:09] <cmr> I didn't even realize rust had a twitter community
[21:46:12] <ChrisMorgan> I was reading http://www.secalert.net/2013/12/13/ebay-remote-code-execution/ earlier and saw the "Conclusion: don’t forget to read the manuals and language references :P"—funny how that wasn't the conclusion I came to at all.
[21:46:56] <eevee> i hate computers and plan to take up knitting
[21:47:20] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:47:22] <ChrisMorgan> The web twitter client is so awful for paying attention to a hashtag…
[21:47:31] <cmr> eevee: fwiw extra::dlist has a linked list, with iterators.
[21:47:51] <eevee> there are two classes of problem i keep running into
[21:48:09] <eholk> cmr: i closed the bug, it turns out I wasn't using the rustdoc I thought I was
[21:48:13] <eevee> 1. multiple objects that all want a pointer to some world/config/whatever object
[21:48:35] <eevee> 2. iterating down a tree of ~Node by borrowing
[21:49:08] <eholk> cmr: (or others) is there documentation on pkgid formats somewhere?
[21:49:25] <ChrisMorgan> Ah, this is the type of tweet we want happening—"I’m fighting memory aliasing in C++ today. I want #rustlang so bad right now. *cries*"
[21:49:30] <cmr> eholk: should be in the manual now!
[21:49:31] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:49:45] <eevee> 3. a mostly-immutable structure needs a single "mutable" thing that's only mutable because of its implementation, like a Writer, and either i @mut it or an entire chain of containing structures has to become entirely mutable
[21:50:02] <cmr> eevee: use RefCell, it is designed just for that.
[21:50:18] <bstrie> eevee: @mut is going away, we're making better things for that use case
[21:50:20] <bstrie> less gross things
[21:50:40] <eevee> bstrie: yeah i'm already sad at how much @ i have everywhere, and now my code is too
[21:50:45] <bstrie> cmr: is it still called RefCell, or is it just being renamed to Cell now?
[21:51:10] <bstrie> I forget what pcwalton's plan was...
[21:51:16] <eevee> i saw Rc but that adds a method call and/or temp var anywhere i want to use it
[21:51:19] <cmr> bstrie: Cel is a different type.
[21:51:35] <cmr> eevee: smart pointer sugar is going to fix that, and that's a 1.0 thing.
[21:51:37] <bstrie> cmr: I think we need to synchronize. old Cell is gone, right?
[21:51:38] <eevee> and when i look in the stdlib to see how list/dlist/etc work i always find either raw pointers with transmutes or liberal @
[21:51:43] <cmr> bstrie: yes.
[21:51:47] <cmr> *Cell
[21:51:50] <cmr> It's an open PR
[21:52:02] <bstrie> cmr: and then isn't something else being renamed to Cell once that's done?
[21:52:12] <cmr> bstrie: no.
[21:52:16] <cmr> the open PR is the new Cell.
[21:52:18] <cmr> sec
[21:52:27] <cmr> https://github.com/mozilla/rust/pull/10924
[21:52:30] <bstrie> oh, so it wasn't even implemented yet
[21:52:58] <bstrie> cmr: smart pointer sugar is going to fix both the method call and the temp var issue?
[21:53:10] <cmr> bstrie: wait what's the temp var issue?
[21:53:15] <bstrie> I dunno
[21:53:24] <cmr> eevee: well dlist needs the raw ptrs since it's doubly linked.
[21:53:25] <bstrie> you just said "yeah we'll fix that", so I figured you knew :P
[21:53:37] <cmr> eevee: what's the temp var issue?
[21:54:02] <cmr> that part of the sentence apparently didn't make it to my brain.
[21:54:17] <eevee> cmr: not an "issue" just the only way to work around adding a method call; let val = rc.borrow(); val.whatever()
[21:54:38] <cmr> ah, yes.
[21:54:57] <sfackler> when rvalue lifetimes are fixed you'll be able to do rc.borrow().whatever() which should be a bit better
[21:55:16] <cmr> that will hopefully just be (*rc).borrow(), or maybe even rc.borrow() depending on how auto-deref lands on that one.
[21:55:23] <cmr> erm
[21:55:25] <cmr> s/borrow/whatever
[21:55:26] *** Quits: sellout (Adium@moz-AE26682A.hlrn.qwest.net) (Ping timeout)
[21:55:34] <bstrie> sfackler: have we determined that that's the "fix" we want to make? I thought that nmatsakis was worried that it would be impossible to specify concretely
[21:55:37] <bstrie> or at least difficult
[21:55:50] <sfackler> dunno
[21:55:54] <bstrie> I agree that it looks nice, and I'd love to have it
[21:56:01] <sfackler> "it should live as long as I want it to" :D
[21:56:04] <bstrie> but I don't want to get my hopes up :P
[21:56:57] *** Quits: jackneill (jackneill@moz-8A9CB6C.pool.digikabel.hu) (Ping timeout)
[21:57:02] <bstrie> eevee: so it sounds like the solution to your problems is "hold on we are still changing this shit just wait aaaahhhhhh we promise it will be better"
[21:57:20] <bstrie> which tbf has probably been our line for a while now :)
[21:57:23] <eevee> that's been the solution for like a year and a half haha  :(
[21:57:31] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[21:57:43] *** Joins: sellout (Adium@moz-AE26682A.hlrn.qwest.net)
[21:58:01] <hoverbear> bstrie: Until it says 1.0 on the box it's ok to break things for no reason.
[21:58:13] <hoverbear> This is why I version everything 0.x
[21:58:15] <benh> Why does the new Cell need a Pod kind?
[21:58:15] <cmr> well the amount of badness is at least decreasing.
[21:58:16] <bstrie> hoverbear: that's no consolation for your users!
[21:58:22] <eevee> cmr: true!
[21:58:28] <cmr> benh: who knows, ask pcwalton
[21:58:29] <bstrie> even if we told them explicitly not to use rust :P
[21:58:35] <hoverbear> bstrie: Solution is to use 0.x for everything. :)
[21:58:53] <eevee> but it would be nice if i could actually work on the application code i started in 0.4 days rather than struggling to ever make it compile  :)
[21:59:12] <bstrie> eevee: on the bright side, this gives you plenty of time to figure out the API for a ncurses replacement!
[21:59:19] <bstrie> get to it
[21:59:39] <eevee> yeah that's the thing i was trying to do
[21:59:52] <benh> btw, how does the rust calling convention differ from the C one? (in C terms?)
[22:00:02] <eevee> APIs are hard enough already and now i have to worry about pointers ugh
[22:00:06] <hoverbear> eevee: We need to start using Webpages for terminals I think
[22:00:16] <cmr> benh: it doesn't, ABI-wise... we use LLVM's fastcc calling convention.
[22:00:18] <bstrie> hoverbear: nah, we just need to port ncurses to javascript
[22:00:24] <hoverbear> bstrie: Done already
[22:00:29] <cmr> hoverbear: also done already
[22:00:31] <bstrie> then my work here is done
[22:00:36] <hoverbear> cmr: I know :)
[22:00:38] <benh> cmr: but there's magical extra parameters, right?
[22:00:41] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:00:56] <cmr> benh: yeah, but that doesn't change the ABI (how they're passed)
[22:00:58] <eevee> i was actually kind of lamenting that even if i wrote a sweet roguelike in rust it would never actually work in the obvious accessible form of a web browser
[22:01:06] <eevee> then i found some ticket about an emscripten target...
[22:01:11] <benh> then i probably asked the wrong question :v
[22:01:13] <cmr> There's an unused "environment pointer" so that all callable types have uniform representation.
[22:01:17] <bstrie> eevee: we're working on emscripten now! for very very small programs :)
[22:01:30] <benh> mhm...
[22:01:31] <cmr> (it's unused in regular functions, it's the self ptr in methods, and it's the env ptr in closures)
[22:01:40] <cmr> that will be fixed, though
[22:01:46] <bstrie> eevee: https://gist.github.com/klutzy/7819231
[22:01:47] * cmr adds it to his winter-break todo
[22:02:11] <bstrie> cmr: you may have the power to erase things from the etherpad, but I still expect you to kiss someone at the stroke of midnight
[22:02:14] <benh> How many semesters is this winter-break supposed to last again? :D
[22:02:16] <hoverbear> bstrie: Get it working so I can compile my rust code into ASM.js and never use this terrible language again
[22:02:25] <cmr> bstrie: I'll kiss my mother, how about that?
[22:02:27] <ChrisMorgan> eevee: I came to Rust for the web things (having a moderately clear vision of what I want and Rust being the only suitable language I've found) and while I work on rust-http and then the framework I've been operating on the assumption that by the time I'm ready, emscripten support will also be ready.
[22:02:37] <bstrie> cmr: ...I'll allow it
[22:02:47] <hoverbear> Actually, wait, I like JS.
[22:03:05] <ChrisMorgan> What, as a language?
[22:03:31] <jdm> as a postmodern performance piece
[22:03:33] <bstrie> I like JS as a language too, it's merely endearingly bad rather than eye-clawingly bad
[22:03:39] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:03:50] <benh> cmr: what does 'fluids' mean?
[22:03:50] * cmr doesn't talk or think about JS anymore.
[22:03:55] <bstrie> like, oh cute, equality is messed up
[22:03:57] * bstrie pats JS on the head
[22:03:59] * ChrisMorgan doesn't much like the semantics of JavaScript, though he works in it often enough; no threading, extremely weak typing, &c. &c.—almost as bad as PHP, but not quite
[22:03:59] <bstrie> aren't you cute
[22:04:22] <cmr> benh: some word dherman made up I think :P dynamically scopped variables, https://github.com/mozilla/rust/issues/10602%2
[22:04:29] <cmr> https://github.com/mozilla/rust/issues/10602
[22:04:30] <benh> oh, like conditions? :v
[22:04:37] <dherman> zomg I didn't make it up!
[22:04:38] <benh> oh!
[22:04:43] <cmr> dherman: :P
[22:04:47] <dherman> I told pcwalton that it's the term from scheme but nobody likes it
[22:04:51] <cmr> heh
[22:04:54] <dherman> good heavens is that the term we're using now?
[22:05:03] <cmr> I'm going to use it
[22:05:05] <benh> I just saw it on cmr's todo list
[22:05:05] <cmr> I like it
[22:05:07] <cmr> (fluid)
[22:05:25] <dherman> yuk :)
[22:05:31] <cmr> someone can r- and mamke me change it though
[22:05:38] <eevee> dynamic scoping whoa
[22:05:39] <eevee> yes
[22:05:39] <bstrie> "fluid" would be a good term to replace "monad"
[22:05:41] * cmr likes it because it's short
[22:05:55] *** Joins: bytewise (bytewise@moz-6F896CFA.adsl.alicedsl.de)
[22:05:57] <bblum> what. does rust have dynamic scoping now?
[22:06:04] <cmr> bblum: library type
[22:06:19] * ChrisMorgan doesn't want Rust to *ever* use the term monad
[22:06:25] <cmr> https://github.com/mozilla/rust/issues/10602
[22:06:39] <bstrie> mitsuhiko: is https://github.com/mozilla/rust/issues/10602 what you were requesting for rust, like, a million years ago? it's been so long...
[22:06:49] <benh> ChrisMorgan: :(
[22:06:50] <sfackler> ChrisMorgan: we'll just call them burritos
[22:07:10] <Diamond> rust doesn't have sugar for zipping closures, does it? I'm specifically referring to combining closures need to get c strings
[22:07:12] <bstrie> ChrisMorgan: me neither! high five
[22:07:26] <bstrie> Diamond: we can zip iterators, not sure what you mean by zipping closures
[22:07:45] <benh> What does #[packed] do? Omit padding?
[22:07:54] <cmr> benh: yes.
[22:08:01] <bstrie> sfackler: that violates the five-character guideline, we'll have to call them "burros"
[22:08:42] <sfackler> Brrto
[22:08:48] <ChrisMorgan> Why don't I want Rust to speak of monads? No normal developer understands them, nor do I think they will spend the time to try to understand them—they may already know that they're from that strange world of Haskell and no one understands them. What a pity Rust is like that, clearly it won't be usable; it's all academic and stuff. Better go back to C++.
[22:08:54] <bstrie> quick, someone figure out if there's a unicode burrito
[22:09:02] <bstrie> ChrisMorgan gets it
[22:09:06] <bstrie> it's all about marketing
[22:09:07] <hoverbear> bstrie: I still think we should rename true to truer so it lines up with false.
[22:09:16] *** Joins: lastdev (lastdev@moz-5A47DD8E.dyn.user.ono.com)
[22:09:21] <bstrie> hoverbear: why not `fals` ?
[22:09:26] <cmr> Or why not "true!"
[22:09:31] <hoverbear> btipling: truer is better
[22:09:32] <bstrie> it's not like you even pronounce the e on the end there
[22:09:33] <benh> "true"/"nope"
[22:09:33] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:09:33] <ChrisMorgan> Yes, marketing is exactly it. We've got to be careful about that.
[22:09:40] <cmr> exclaim the truth upon the masses
[22:09:42] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:09:57] <Diamond> well like I have five vars with whom I need to get the c strings of, so it would be nice if rust had sugar to zip all of those CString::with_ref calls and pass the c_chars ptrs into one closure
[22:10:27] <bstrie> Diamond: you could write a macro for that, if you wanted :)
[22:10:36] <Diamond> Ah, so I could.
[22:11:21] <o11c> cmr: this is the kind of code you'd ideally generate: https://gist.github.com/o11c/7995342
[22:11:39] <bstrie> give a programmer syntax, and they will write unmaintainable code for a day. teach a programmer to make their own syntax, and they will write unmaintainable code for a lifetime.
[22:11:54] <bstrie> the tao of macros
[22:11:54] <o11c> cmr: basically, at the beginning of *every* block, you generate phis for every live variable
[22:12:33] <o11c> cmr: in some cases, you can statically prove that there is only one possible value, so I omitted those
[22:12:54] <cmr> Whoever suggested tag collapsing: that's so hard to do right, and require special casing every use of that enum with that attr ever...
[22:13:04] <cmr> o11c: Does LLVM actually handle this better?
[22:13:16] <o11c> cmr: note however that in the while.exit block there is a single-value phi not elimited, since at the time you first refer to it (when codegenning while.cond) you don't know if there will be any breaks
[22:13:29] *** pmoore is now known as pmoore|away
[22:13:38] <o11c> cmr: LLVM *will* attempt to do this for you if you have optimization on
[22:13:52] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:13:59] <cmr> o11c: do you know which optimization pass thatis?
[22:14:19] <o11c> cmr: I think it's SROA? That's the pass that does "everything"
[22:14:20] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[22:14:24] <cmr> heh
[22:14:29] <cmr> SROA does do a lot
[22:14:47] <o11c> but I think it's less work if you tell LLVM what's going on
[22:15:08] <o11c> still, the case where you *do* have references makes this slightly more complicated
[22:15:13] <geomyidae> too bad rust can't magically keep me from shooting myself in the foot in ffi unsafe land
[22:15:46] <cmr> o11c: could you open an issue for this? :)
[22:15:55] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[22:15:55] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:16:10] <bstrie> geomyidae: how would you propose that it do so?
[22:16:15] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[22:16:31] <cmr> bstrie: with magic, preferably while farting rainbows.
[22:16:46] <hoverbear> cmr: Also unicorn piss.
[22:16:52] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[22:16:59] <bstrie> cmr: don't give me that attitude, just this morning someone told me that linear types were impossible :P
[22:17:02] <bstrie> we're rust! we can do anything!!!
[22:17:08] * bstrie boundless optimism
[22:17:47] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[22:17:47] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:18:45] <tiffany> are you using a boundless optimism to get past the optimism checker, bstrie?
[22:18:48] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:18:52] *** Joins: gavinb (gavinb@EDBD35D0.6A81B3E4.2BFAEB23.IP)
[22:18:58] <bstrie> tiffany: that, and I wrap my entire program in unsafe{}
[22:19:02] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:19:20] <bstrie> remember.... boundless optimism :)
[22:20:35] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:21:07] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:22:48] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Client exited)
[22:22:55] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[22:23:16] *** Parts: andreypopp (andreypopp@moz-7261DC60.net) ()
[22:24:23] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:26:08] <geomyidae> Yeah, "magic" was the operative word ;) farting rainbows seems like a happy side effect though
[22:27:41] <o11c> cmr: https://github.com/mozilla/rust/issues/11008
[22:27:59] <bstrie> woo 11,000
[22:28:02] <bstrie> we're coming for you, rails
[22:28:12] * cmr nabbed 11000
[22:28:27] <bstrie> they're at 13341
[22:29:00] <cmr> woo
[22:29:07] <cmr> that's actually pretty crazy
[22:29:13] <bstrie> wycats_: if mozilla/rust passes rails/rails in terms of github issue count, does that mean that github is contractually bound to rewrite their infrastructure in rust?
[22:31:14] <bascule> lololol
[22:31:22] *** Quits: gavinb (gavinb@EDBD35D0.6A81B3E4.2BFAEB23.IP) (Quit: gavinb)
[22:34:25] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:35:03] *** Joins: trecer (trecer@moz-36BEFC79.hsd1.pa.comcast.net)
[22:35:14] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:37:57] <hansjorg> I'm trying to use #[bench] but always end up with 0ns for a function which takes about 150 ms. anybody know what might be wrong?
[22:38:17] <ChrisMorgan> hansjorg: it's not designed to do things longer than 1ms.
[22:38:53] <ChrisMorgan> The current behaviour (instated for a week or so—before that it would do it zero times) is to do one iteration only if it takes longer than 150ms.
[22:39:08] <ChrisMorgan> s/150ms/1ms/
[22:40:32] <hansjorg> ChrisMorgan: ok, that explains it. thanks
[22:50:39] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[22:50:50] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:52:10] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[22:52:12] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[22:52:21] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:52:28] <dbaupp> ChrisMorgan: that's not quite true; my change just made sure that it always ran a non-zero number of times
[22:52:56] <dbaupp> it can still run more than that (since it doubles the number of runs if it hasn't reached some sort of statistical significance.)
[22:53:13] <ChrisMorgan> Oh, OK.
[22:53:24] <ChrisMorgan> Thanks for the clarification.
[22:53:37] *** Quits: lastdev (lastdev@moz-5A47DD8E.dyn.user.ono.com) (Client exited)
[22:53:40] <cmr> dbaupp: hm, is it capped at anything?
[22:53:41] <dbaupp> (the original problem was it started off running zero, and doubling zero is fairly useless.)
[22:53:59] <dbaupp> cmr: it stops if it's run for more than 3 seconds
[22:54:03] <cmr> ok, good.
[22:55:55] <ChrisMorgan> dbaupp: would one time be considered statistically significant? There is a standard deviation of 0, after all.
[22:56:14] <dbaupp> ChrisMorgan: no, sample std-dev isn't defined in that case.
[22:56:28] <dbaupp> (divides by count - 1)
[22:56:38] <ChrisMorgan> Ooh, NaN!
[22:57:10] * ChrisMorgan was slightly joking about a std dev of 0, knowing that it's not fair to reckon such a thing from a sample size of 1
[22:57:20] <ChrisMorgan> So does that suggest it'll run at least twice?
[22:57:35] <ChrisMorgan> (Up to 3 seconds, of course.)
[22:57:39] <dbaupp> well, the *population* std-dev is well defined for a population of 1.
[22:58:02] <dbaupp> the sample std-dev isn't (with a sample of 1)
[22:58:28] <dbaupp> in any case, it doesn't actually use the std-dev
[22:58:35] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[22:59:20] <cmr> TeXitoi: dbaupp: why did the new fasta end up being slower than the C++ version / what was it that adding unsafe would have made faster?
[23:00:16] <dbaupp> ChrisMorgan: it uses the MAD ( http://en.wikipedia.org/wiki/Median_absolute_deviation ) and compares the medians of the full sample with the medians of the sample after removing the top and bottom 5%
[23:00:27] <dbaupp> cmr: don't know
[23:01:32] <dbaupp> hm, I guess that *does* mean that it may run only 1 iteration sometimes
[23:01:34] * dbaupp tries
[23:01:58] *** Quits: rca (rcatolino@moz-3ED58F2C.adsl.proxad.net) (Ping timeout)
[23:05:58] <dbaupp> welp
[23:06:34] <dbaupp> the test runner will *always* run a minimum of 300 iterations
[23:06:39] <ChrisMorgan> … that doesn’t sound good.
[23:06:45] * dbaupp agrees
[23:07:08] <eholk> has anyone managed to use rustpkg to install a github package?
[23:07:38] <ChrisMorgan> hansjorg: maybe you should be glad it didn't run your 150ms test—now it would run it but take 45 seconds.
[23:07:52] <dbaupp> eholk: are you getting something about "not recognised as a URL fragment"?
[23:08:10] * cmr is glad he asked.
[23:08:13] <eholk> dbaupp: yup. I'm adding more debugging output to figure out what's going on
[23:11:47] <dbaupp> eholk: I think the problem is if /tmp is on a different device to the current directory
[23:11:57] <cmr> I thought that was fixed?
[23:12:04] <dbaupp> running with `TMPDIR=~/tmp rustpkg ...` should work
[23:12:15] <dbaupp> ChrisMorgan, cmr https://github.com/mozilla/rust/issues/11010
[23:15:13] <eholk> dbaupp: i think i'm seeing a different issue...
[23:15:25] <dbaupp> eholk: oh :(
[23:17:11] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[23:22:09] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:23:17] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[23:23:33] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Hibernating, be back soon.)
[23:28:20] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[23:31:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:31:23] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[23:31:58] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:33:10] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Client exited)
[23:34:58] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Ping timeout)
[23:36:21] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[23:39:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[23:43:41] *** Joins: gavinb (gavinb@1BAD8D8C.74BBF1EF.9F9CEF11.IP)
[23:47:16] *** Joins: Liothen (liothen@moz-92B99500.org)
[23:49:02] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:49:49] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:53:39] *** Quits: gavinb (gavinb@1BAD8D8C.74BBF1EF.9F9CEF11.IP) (Connection reset by peer)
[23:53:58] <cmr> oi, who's the beige idiot who mucked up my etherpad :(
[23:54:49] <cmr> xales: I blame you!
[23:56:55] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[23:57:08] <dbaupp> cmr: isn't there undo/history?
[23:57:22] <cmr> yeah.
[23:58:09] *** flaper87 is now known as flaper87|afk
[23:58:58] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[23:58:59] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
