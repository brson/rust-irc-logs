[00:00:01] <Johannes> recommended alternative for std::old_io::net::pipe::UnixStream?
[00:00:20] <carllerche> Johannes: there are libs
[00:00:28] <WindowsBunny> like mio
[00:00:35] <carllerche> Johannes: I know mio has support for it, i believe there is a dedicated lib that ported the old code as well though
[00:01:10] <carllerche> Johannes: http://carllerche.github.io/mio/mio/unix/struct.UnixStream.html
[00:01:48] <reem> sfackler wrote a lib for it
[00:01:51] <cmr> huon: updated https://github.com/rust-lang/rust/pull/23848
[00:01:58] <Johannes> carllerche: awesome. thanks!
[00:02:13] <reem> https://github.com/sfackler/rust-unix-socket
[00:02:13] <huon> cmr: 4 days?
[00:02:27] <reem> Johannes: that's the standalone lib ^
[00:02:39] <reem> should you need it
[00:02:44] <carllerche> either way it will be the same... mio has support for socket timeouts on top of UnixStream though :)
[00:02:55] <carllerche> i don't think rust-unix-socket did
[00:03:15] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[00:03:22] <reem> mio's like the only thing with actual support for io timeouts right now
[00:03:51] <carllerche> yeah, I added them because I needed them in skylight
[00:04:13] <Johannes> seems like i only need connect, read and write. it's for the rust-wayland crate.
[00:04:14] <cmr> huon: 31, 1, 2, 3?
[00:05:05] <huon> cmr: what about 30/
[00:05:06] <huon> ?
[00:05:20] <cmr> it's 30 now!
[00:05:35] * cmr doesn't know how dates are supposed to work
[00:05:55] <huon> oh, maybe
[00:06:43] <XMPPwocky> it's time-o-clock!
[00:08:03] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[00:08:16] <carllerche> Johannes: sfackler's crate seems to provide that. It's probably stabler than mio :P though I don't have any plans to change it at the moment. mio's implementation has more features (like more access to socket options)
[00:08:27] <Johannes> mio won't build because of hyphen in a dep's crate/module name...
[00:08:51] <carllerche> Johannes: what version of rust?
[00:09:06] <Johannes> nightly from like 2 days ago
[00:09:10] <carllerche> Johannes: also, version 0.3.0?
[00:09:12] <reem> Johannes: sfackler's lib is probably simpler for you to use, just since mio is a full event loop and a bit more complicated to use
[00:09:42] <carllerche> reem: well, you can use UnixStream in mio w/o any of the event loop stuff
[00:09:43] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[00:09:44] <reem> if you need only basic read/write/connect at least
[00:09:56] <reem> carllerche: Oh can you create a blocking socket?
[00:09:59] <carllerche> mio actually has exactly the same stuff sfackler's crate does
[00:10:01] <carllerche> reem: yep
[00:10:06] <reem> oh, cool
[00:10:13] <carllerche> if it isn't wrapped w/ NonBlock it's a blocking socket
[00:10:28] <reem> Right right
[00:10:57] <carllerche> Johannes: which dep? everything builds here for me
[00:11:05] <Johannes> time, i think
[00:11:24] <carllerche> Johannes: I just pushed 0.3.0 to crates.io 5 minutes ago, so you may have gotten an old version
[00:12:08] <Johannes> mio is 0.3.0. time is 0.1.22. "error: invalid character `-` in crate name: `build-script-build`"
[00:12:27] <Johannes> message after "compiling time v0.1.22" line
[00:12:32] <cmr> Johannes: update your cargo
[00:13:04] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[00:14:55] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[00:31:02] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[00:33:07] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:33:59] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:34:03] <Johannes> How about std::old_io::Writer? The current rust-wayland uses it together UnixStream.. Any replacement within std or do I need to rewrite the code to use sfackler's read/write functions?
[00:34:15] <cmr> Johannes: std::io::Write
[00:35:28] <cmr> Johannes: fyi I have a half-done wayland protocol generator that uses the xml
[00:35:47] <Johannes> cmr: thanks! are those little endian by default?
[00:36:16] <cmr> Johannes: they aren't any-endian, they only take buffers.
[00:36:31] <Johannes> cmr: a generator would be very nice... :)
[00:38:24] <cmr> Johannes: is https://github.com/eyolfson/rust-wayland/ yours? I planned on sending the PR there
[00:38:37] <cmr> (since it has crates.io/crates/wayland...)
[00:40:43] <Johannes> cmr: eyolfson/rust-wayland is the one i'm using. Thinking about forking it and add my updates when i'm done.
[00:41:07] <cmr> ok
[00:41:36] <Johannes> cmr: i've also added some other stuff for callback and egl surface.
[00:42:37] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:43:19] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:46:45] <adu> is Wayland related to X11?
[00:47:01] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:47:06] <cmr> adu: only by history. http://wayland.freedesktop.org/
[00:47:27] *** Quits: bleibig (bleibig@moz-kn8mvj.ca.comcast.net) (Connection closed)
[00:47:32] <klutzy> wayland is rewrite of modern x11 :p
[00:47:43] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[00:47:44] *** Joins: alfred (rndm@moz-fg3.o0i.131.104.IP)
[00:48:03] *** Joins: bleibig (bleibig@moz-kn8mvj.ca.comcast.net)
[00:48:47] <adu> klutzy: so it's like X11-DRI without the socket protocol?
[00:49:39] <klutzy> it still uses unix socket (since it's client-server arch), but yes, it's x11-dri
[00:50:21] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:50:31] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[00:50:33] <reem> Gankro: do you know gereeter's IRC?
[00:50:40] <reem> nick*
[00:50:52] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[00:51:30] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[00:51:41] *** Quits: gus (quassel@moz-kgm.3mq.9.119.IP) (Quit: No Ping reply in 180 seconds.)
[00:52:53] *** Joins: gus (quassel@moz-s29c4j.1136.t8sg.1801.2401.IP)
[00:54:32] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[00:54:43] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:55:10] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:58:21] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:00:00] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[01:00:28] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[01:01:28] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:01:28] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Connection closed)
[01:07:28] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[01:09:10] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[01:14:38] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[01:14:45] <Gankro> reem: He's *very* rarely online
[01:14:53] <Gankro> but when he is I think it's gereeter
[01:15:07] <reem> I see. I guess I'll ping him on github instead then.
[01:15:23] <Gankro> Haven't really seen them online much at all lately; I think they must be busy with school or something
[01:15:25] <reem> He wrote a very interesting comment on the buffer PR that I just re-read.
[01:17:12] <Gankro> gereeter's ideas are always interesting, if not a bit on the radical side
[01:21:08] <reem> We just need a way to aggregate unsized types
[01:21:19] <reem> *mut ([A], [B])
[01:21:26] <reem> s/*/&
[01:23:34] <Gankro> reem: Not familiar with the context; what problem does that solve?
[01:24:05] <reem> Gankro: Useful for the thing you do in BTree
[01:24:13] <reem> and in HashMap
[01:24:28] <cmr> aturon: Is there a transition story for num::cast?
[01:24:47] <Gankro> Oh so that wouldn't be encoded as (ptr, lenA, lenB)?
[01:25:12] <reem> Gankro: It probably would, but it would be safe.
[01:25:41] *** Joins: leonlee (leonlee@moz-98g.1ve.189.27.IP)
[01:25:56] <Gankro> reem: Still leaving perf on the table then. We can encode the multi-alloc as (ptr, len)
[01:26:14] <Gankro> possibly (ptr, cap, len)
[01:26:22] <Gankro> And everything else is implicit
[01:27:01] <Gankro> I'm not convinced that it really *matters* if it can be safely encoded. It's not exactly stressful code to write.
[01:27:12] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[01:27:13] *** ChanServ sets mode: +o brson
[01:27:14] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[01:27:53] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[01:28:12] <reem> ya, I guess
[01:28:49] <Gankro> reem: And a very "internal" detail of a design
[01:28:54] <Gankro> I think
[01:29:16] <Gankro> Maybe you have crazy usecases in hyper
[01:29:28] <reem> not really
[01:29:48] *** Joins: mib_51bitp (Mibbit@moz-juv.9o3.252.72.IP)
[01:29:50] <reem> the most unsafe code is always gonna be in data structures
[01:32:02] <Gankro> reem: Yeah and I'm starting to think fighting it too hard could be detrimental
[01:32:14] *** Quits: mib_51bitp (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:32:19] <Gankro> How many abstractions can you apply before you start hurting understandability?
[01:33:20] <Gankro> offset, offset, read, write isn't exactly mind-blowing stuff. Toss in some fuzzing and unit tests and you're in pretty good shape. data structures are a quite controlled environment.
[01:33:35] *** Joins: nawns (nawns@moz-m5m0i6.lfytina2.metronetinc.net)
[01:33:54] <reem> It is very easy to test most data structures, that's true.
[01:36:02] <kmc> yep
[01:36:11] <kmc> that's why I'm okay writing hundreds of LoC of unsafe code for tendril
[01:36:27] <kmc> i hit some nasty bugs today too, and tracked them down with valgrind
[01:36:45] <kmc> but i won't ship it until i've massively fuzz-tested it, with coverage metrics
[01:37:09] <reem> what's tendril?
[01:37:19] <kmc> https://github.com/kmcallister/tendril
[01:37:47] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[01:40:52] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[01:44:29] *** Quits: w66745 (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[01:51:46] *** Joins: c74d3 (c74d3a4ebb6@moz-b2tjn2.mggc.hibn.4404.2002.IP)
[01:52:21] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[01:54:31] <reem> kmc: This is awesome
[01:55:37] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:00:17] <kmc> thanks
[02:00:35] <kmc> what would you use it for?
[02:01:07] *** Quits: nawns (nawns@moz-m5m0i6.lfytina2.metronetinc.net) (Client exited)
[02:02:15] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[02:02:52] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[02:11:02] *** Joins: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru)
[02:11:35] *** Joins: dcb_ (textual@moz-j72nfe.ca.comcast.net)
[02:11:45] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[02:11:53] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[02:11:55] *** Quits: dcb_ (textual@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[02:12:33] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:12:53] *** Quits: zz_kimundi (kimundi@moz-jjo3eb.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:15:11] *** Quits: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru) (Ping timeout: 121 seconds)
[02:15:25] *** Joins: zz_kimundi (kimundi@moz-9boq3l.dip0.t-ipconnect.de)
[02:15:26] *** zz_kimundi is now known as kimundi
[02:16:38] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:20:59] *** Joins: dcb_ (textual@moz-j72nfe.ca.comcast.net)
[02:21:57] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[02:22:43] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:25:04] *** Quits: dcb_ (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[02:26:20] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[02:26:33] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[02:26:45] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[02:32:30] *** Quits: c74d3 (c74d3a4ebb6@moz-b2tjn2.mggc.hibn.4404.2002.IP) (Connection closed)
[02:32:57] *** Joins: c74d (c74d3a4ebb6@moz-b2tjn2.mggc.hibn.4404.2002.IP)
[02:35:42] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[02:40:57] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[02:41:05] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[02:42:34] <nrc> These duplicate erorr messages are getting out of hand - one bug, 18 identical error messages :-(
[02:46:27] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:48:10] *** Joins: reem (reem@moz-vqnf7c.coob.q2h1.0009.2601.IP)
[02:48:59] <brson> nrc: yeah, it's not helpful
[02:49:09] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[02:49:18] <brson> seems like pretty low haging fruit to tame it a bit though
[02:52:00] <nrc> I hope so, when I've looked at a few in the past it has been pretty hairy, but I never made a really determined effort
[02:52:29] <cmr> Keep a hashset of emitted messages and spans!
[02:52:34] <cmr> (*shudder*)
[02:53:36] <nrc> you jest, but it would be *a lot* easier than finding and fixing all the bugs
[02:53:53] <cmr> oh, I know it would be.
[02:54:09] <cmr> but it's such a loathable hack
[02:54:30] <cmr> I think we should do it...
[02:54:34] *** Quits: reem (reem@moz-vqnf7c.coob.q2h1.0009.2601.IP) (Connection closed)
[02:54:47] <brson> i'm going to push another build to beta
[02:56:10] <brson> i was also thinking of eliding dupes
[02:58:15] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[03:01:22] <nrc> Wow, another record - two bugs (but technically just 1 bug because macros) on two adjacent lines - 66 error messages
[03:01:53] <nrc> I'm not sure if this one is repro'able in a real compiler though
[03:02:01] <nrc> i.e., it might be my fault :-p
[03:02:20] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[03:02:23] *** Quits: c74d (c74d3a4ebb6@moz-b2tjn2.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[03:07:29] <Gankro> cmr: Doesn't seem *especially* loathable. Except that especially bad programs can crash the compiler ;)
[03:08:10] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[03:08:44] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[03:21:41] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Ping timeout: 121 seconds)
[03:25:47] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[03:27:28] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[03:27:33] *** Joins: semarie (semarie@moz-hqv.joq.106.87.IP)
[03:31:48] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[03:33:41] *** Quits: kmcguire (kmcguire@moz-uqq.d7l.207.68.IP) (Ping timeout: 121 seconds)
[03:33:58] <cmr> Gankro: I guess if you don't consider multiple-error-messages a bug...
[03:34:14] <cmr> it might even be less resource intensive than tracking the info required to not emit dupes in some cases
[03:36:59] <Gankro> cmr: There's a certain elegance to it really. Very, uh, layered.
[03:37:23] <Gankro> compiler vomits as much errors as it wants whenever it wants; output layer cleans it up into something tolerable.
[03:38:14] <cmr> yeah
[03:40:18] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[03:41:17] <Gankro> As a minor point of interest a treemap might be better than a hashmap there because of the nature of long strings
[03:44:28] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[03:46:54] <cmr> huon: are you the default reviewer now or something? ;P
[03:50:10] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:50:25] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Ping timeout: 121 seconds)
[03:58:59] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[03:59:03] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[04:00:44] *** Quits: isaacd (quassel@moz-64e7pa.east.verizon.net) (A TLS packet with unexpected length was received.)
[04:03:06] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[04:12:18] *** Joins: srh (User@moz-ov4.5f3.242.50.IP)
[04:16:55] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:31:22] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:32:40] *** Joins: marsel (user@moz-j4m.c8s.180.94.IP)
[04:36:59] *** Quits: srh (User@moz-ov4.5f3.242.50.IP) (Quit: Leaving)
[04:38:00] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[04:39:33] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[04:43:07] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[04:43:16] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[04:44:48] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[04:45:49] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[04:47:23] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[04:47:26] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[04:51:42] *** Joins: nawns (nawns@moz-m5m0i6.lfytina2.metronetinc.net)
[04:55:01] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[04:55:09] *** Quits: O01eg (o01eg@moz-l3fsb1.7jes.4n8f.2698.2a02.IP) (Client exited)
[04:55:16] *** Quits: marsel (user@moz-j4m.c8s.180.94.IP) (Ping timeout: 121 seconds)
[04:55:56] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[04:58:07] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[05:00:32] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[05:07:18] *** Quits: nawns (nawns@moz-m5m0i6.lfytina2.metronetinc.net) (Client exited)
[05:14:23] *** Joins: swgillespie (swgillespie@moz-liu.7tn.134.198.IP)
[05:15:00] *** Quits: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[05:16:40] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:17:47] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[05:18:58] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[05:21:10] *** Quits: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP) (Ping timeout: 121 seconds)
[05:26:29] *** Quits: bleibig (bleibig@moz-kn8mvj.ca.comcast.net) (Connection closed)
[05:28:33] *** Quits: acharles (acharles@moz-ulbdcn.ca.comcast.net) (Ping timeout: 121 seconds)
[05:31:46] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[05:31:47] *** Joins: bleibig (bleibig@moz-kn8mvj.ca.comcast.net)
[05:35:01] <nrc> Is this surprising to anyone else?
[05:35:02] <nrc> https://play.rust-lang.org/
[05:35:05] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[05:35:25] <nrc> I would have thought the function `bar` would shadow the argument, not the other way round
[05:36:04] <c74d3> are you sure about that URL?
[05:36:16] *** Joins: acharles (acharles@moz-ulbdcn.ca.comcast.net)
[05:36:43] <nrc> heh
[05:36:55] <nrc> http://is.gd/vXNZpc
[05:37:03] <nrc> would be the URL with the actual code :-s
[05:37:26] <nrc> huon: got an opinion? ^
[05:40:31] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[05:41:56] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[05:43:30] <aturon> nrc: i find it surprising :)
[05:43:44] <nrc> glad I'm not the only one
[05:43:57] <nrc> not particularly glad about the surprise itself
[05:49:19] <aturon> cmr: no immediate plans, though I'd like to do something soon. if you have use cases, i'd love to see them
[05:54:45] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[05:54:46] <WindowsBunny> acrichto: You can now update anything that depends on my sys crates from "*" to "0.1"
[05:58:14] *** Joins: James (quassel@moz-d43h0f.range86-163.btcentralplus.com)
[05:59:35] *** Quits: swgillespie (swgillespie@moz-liu.7tn.134.198.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:02:06] *** Quits: hoverbear (hoverbear@moz-csaicn.gv.shawcable.net) (Quit: Time to hibernate.... ZzZz...)
[06:10:43] *** Joins: eddyb (eddyb@moz-lt3.fmm.166.109.IP)
[06:14:35] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[06:16:28] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[06:21:46] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[06:26:10] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[06:27:36] *** Quits: eddyb (eddyb@moz-lt3.fmm.166.109.IP) (Ping timeout: 121 seconds)
[06:29:45] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[06:30:27] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:30:52] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[06:31:10] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[06:33:59] *** Joins: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp)
[06:34:21] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[06:38:16] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[06:40:23] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[06:41:34] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:41:44] *** Joins: kushal (kdas@moz-78qhfn.202.sitibroadband.in)
[06:46:32] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[06:48:22] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[06:48:44] *** Joins: marsel (user@moz-r01.end.162.188.IP)
[06:49:08] <theme> Is this a compiler bug?
[06:49:09] <theme> http://is.gd/VdYO4D
[06:49:14] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[06:51:30] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[06:51:58] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:52:47] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Connection closed)
[06:53:05] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:53:48] *** Quits: Kxepal (Miranda@moz-giuu7e.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[06:54:09] *** Joins: lfairy (lfairy@moz-8p3ka9.ihug.co.nz)
[06:54:42] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[06:56:33] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[06:57:15] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[06:57:47] *** Quits: James (quassel@moz-d43h0f.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[07:04:35] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[07:05:45] *** Quits: semarie (semarie@moz-hqv.joq.106.87.IP) (A TLS packet with unexpected length was received.)
[07:09:58] *** Quits: dcuddeback (textual@moz-cb7v53.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[07:15:45] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[07:16:36] *** Joins: semarie (semarie@moz-1fgc6t.privacyfoundation.ch)
[07:17:35] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[07:20:19] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[07:27:41] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[07:28:22] *** Quits: Awerush (Awerush@moz-15s7c4.udtd.gaqb.04f8.2a01.IP) (Ping timeout: 121 seconds)
[07:28:27] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[07:30:00] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Connection closed)
[07:30:19] *** Joins: Awerush (Awerush@moz-15s7c4.udtd.gaqb.04f8.2a01.IP)
[07:30:27] *** Joins: Skyler (Skyler@moz-e93b35.sd.cox.net)
[07:36:13] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:39:04] *** Joins: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru)
[07:39:54] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[07:45:59] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[07:46:53] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[07:49:07] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[07:50:44] <lfairy> is anyone looking at gh-23085 ?
[07:50:54] <theme> gh23085
[07:50:54] <[o__o]> Interpolate AST nodes in quasiquote.: https://github.com/rust-lang/rust/pull/23085
[07:50:55] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Ping timeout: 121 seconds)
[07:50:57] <lfairy> argh https://github.com/rust-lang/rust/pull/23085
[07:51:58] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[07:52:12] <lfairy> cheers theme
[07:54:28] *** Joins: sproingsw (Mibbit@moz-juv.9o3.252.72.IP)
[07:57:09] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Quit: Bye)
[07:57:15] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[07:57:35] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[07:57:36] <lfairy> I'll ask tomorrow when the core team is awake
[07:58:18] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[07:58:56] *** Joins: reem (reem@moz-o8hgs0.coob.q2h1.0009.2601.IP)
[08:00:48] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:01:23] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[08:02:30] *** Quits: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru) (Connection closed)
[08:02:51] *** Joins: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru)
[08:05:02] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[08:05:42] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[08:06:58] *** Quits: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru) (Ping timeout: 121 seconds)
[08:09:56] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[08:13:04] *** Joins: imperio (Mibbit@moz-opqtbe.abo.bbox.fr)
[08:14:28] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[08:15:05] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[08:19:02] *** Joins: pczarn (piotr@moz-9un7t9.izacom.pl)
[08:19:18] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:25:06] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[08:25:34] *** Quits: sproingsw (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:25:51] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[08:28:22] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[08:29:11] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[08:31:00] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[08:37:05] *** Joins: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru)
[08:38:44] *** Quits: lfairy (lfairy@moz-8p3ka9.ihug.co.nz) (Connection closed)
[08:43:57] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[08:52:47] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[08:53:43] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[09:04:06] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[09:08:38] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[09:20:32] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[09:24:29] *** Quits: simias (simias@moz-hesd72.svkt.org) (Ping timeout: 121 seconds)
[09:26:25] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[09:28:48] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[09:29:32] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[09:30:14] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[09:30:16] *** Joins: mgottschlag (quassel@moz-nlhdmn.qiv1.bbcb.1398.2a00.IP)
[09:31:15] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[09:34:19] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[09:37:42] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[09:38:24] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[09:40:40] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[09:49:13] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[09:49:18] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[09:50:11] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[09:52:07] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[09:52:09] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[09:52:55] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[09:58:16] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[10:00:15] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Connection closed)
[10:03:55] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[10:04:08] *** Quits: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Ping timeout: 121 seconds)
[10:05:18] *** Joins: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp)
[10:15:29] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[10:15:57] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[10:17:48] *** Quits: mgottschlag (quassel@moz-nlhdmn.qiv1.bbcb.1398.2a00.IP) (Ping timeout: 121 seconds)
[10:17:49] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Connection closed)
[10:27:28] *** Quits: reem (reem@moz-o8hgs0.coob.q2h1.0009.2601.IP) (Connection closed)
[10:27:51] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[10:28:39] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[10:33:47] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[10:38:07] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[10:39:09] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[10:40:15] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[10:42:10] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[10:42:10] *** ChanServ sets mode: +o pnkfelix
[10:42:50] *** Joins: bdero (bran@moz-c280gt.mit.edu)
[10:45:25] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[10:47:36] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[10:54:13] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[10:57:31] *** Quits: marsel (user@moz-r01.end.162.188.IP) (Ping timeout: 121 seconds)
[10:58:45] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[10:58:58] *** Joins: kmcguire (kmcguire@moz-7em.2c1.78.97.IP)
[11:00:01] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[11:05:20] *** Joins: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP)
[11:05:54] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[11:06:38] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[11:06:49] *** Joins: marsel (user@moz-lv2.4he.147.46.IP)
[11:25:22] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[11:32:01] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[11:35:12] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[11:44:42] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:48:21] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[11:52:35] *** Quits: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru) (Connection closed)
[11:52:54] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[11:52:57] *** Joins: ok32 (ok32@moz-imu.af0.232.213.IP)
[11:55:31] *** Quits: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:06:20] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[12:08:30] *** Joins: ytain (ytain@moz-6bg2hd.dsl.teksavvy.com)
[12:10:01] *** Quits: pczarn (piotr@moz-9un7t9.izacom.pl) (Ping timeout: 121 seconds)
[12:12:28] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[12:17:11] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[12:17:48] *** Joins: zmack (zmack@moz-1oe.89t.76.82.IP)
[12:22:48] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[12:28:44] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[12:29:57] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[12:32:40] *** Joins: nawns (nawns@moz-0l6.cn2.211.128.IP)
[12:34:57] *** Joins: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP)
[12:35:20] *** Quits: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[12:35:55] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[12:42:30] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[12:42:34] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[12:47:04] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[12:49:34] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[12:52:36] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:08:30] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[13:09:13] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[13:25:58] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[13:26:57] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[13:28:15] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[13:32:23] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[13:34:35] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[13:36:41] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[13:41:13] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[13:41:57] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[13:42:51] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[13:45:38] *** Joins: scialex (scialex@moz-nn5.l1h.16.138.IP)
[13:52:49] *** Quits: kushal (kdas@moz-78qhfn.202.sitibroadband.in) (Ping timeout: 121 seconds)
[13:56:18] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[14:01:39] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[14:03:03] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[14:03:14] *** Quits: scialex (scialex@moz-nn5.l1h.16.138.IP) (Ping timeout: 121 seconds)
[14:05:15] <cmr> aturon: noise-rs uses it ubiquitously for genericism over f32/f64, https://github.com/bjz/noise-rs/blob/master/src/math.rs and eg https://github.com/bjz/noise-rs/blob/master/src/perlin.rs#L43
[14:06:20] <cmr> aturon: the biggest use in gamedev is the ability to write 0.423519 and have it cast to the appropriate type
[14:06:48] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[14:08:35] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:10:04] *** sunfish-away is now known as sunfish
[14:13:31] *** Joins: kushal (kdas@moz-6rsep0.202.sitibroadband.in)
[14:14:11] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:14:58] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[14:16:23] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[14:19:11] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[14:22:03] *** Quits: nawns (nawns@moz-0l6.cn2.211.128.IP) (Client exited)
[14:24:14] *** Joins: nawns (nawns@moz-0l6.cn2.211.128.IP)
[14:29:51] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[14:30:49] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[14:35:23] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[14:38:20] *** Quits: kmcguire (kmcguire@moz-7em.2c1.78.97.IP) (Connection closed)
[14:38:23] *** Joins: ptalbot (ptalbot@moz-g2mokk.ircam.fr)
[14:38:36] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[14:39:28] *** Quits: leonlee (leonlee@moz-98g.1ve.189.27.IP) (Ping timeout: 121 seconds)
[14:39:40] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[14:40:23] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[14:41:19] *** Quits: untitaker (untitaker@moz-kn1buo.highway.telekom.at) (Ping timeout: 121 seconds)
[14:41:26] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[14:41:34] *** Joins: scialex (scialex@moz-nn5.l1h.16.138.IP)
[14:47:45] *** Joins: untitaker (untitaker@moz-r9t92s.highway.telekom.at)
[14:48:55] *** Quits: nawns (nawns@moz-0l6.cn2.211.128.IP) (Client exited)
[14:54:03] <XMPPwocky> the double-error bug seems to be worse on windows
[14:57:06] *** Joins: nawns (nawns@moz-0l6.cn2.211.128.IP)
[14:59:44] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:00:26] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:09:03] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[15:10:17] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:10:46] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:16:20] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:17:08] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:19:16] *** Quits: imperio (Mibbit@moz-opqtbe.abo.bbox.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:24:34] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[15:24:58] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[15:28:48] *** sunfish is now known as sunfish-away
[15:29:04] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:29:32] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[15:29:34] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:34:06] *** Joins: O01eg (o01eg@moz-j09co0.452a.4n8f.2698.2a02.IP)
[15:35:58] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:36:23] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:39:43] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[15:41:05] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[15:44:05] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[15:44:10] *** Joins: nielx (Mibbit@moz-7jr.c9a.145.46.IP)
[15:45:33] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:46:55] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:49:08] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:49:54] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:50:43] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[15:56:15] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:57:54] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:00:47] *** Quits: nielx (Mibbit@moz-7jr.c9a.145.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:05:01] *** Quits: cdidd (cdidd@moz-k8fd5i.broadband.corbina.ru) (Ping timeout: 121 seconds)
[16:05:12] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:05:18] *** Joins: minzh (minzh@moz-olh.58o.206.111.IP)
[16:05:45] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:09:22] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[16:10:04] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[16:12:19] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[16:12:21] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[16:13:39] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:14:56] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:15:36] *** Quits: minzh (minzh@moz-olh.58o.206.111.IP) (A TLS packet with unexpected length was received.)
[16:16:42] *** Quits: zmack (zmack@moz-1oe.89t.76.82.IP) (Connection closed)
[16:18:00] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[16:19:07] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[16:19:53] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[16:19:57] *** Joins: cdidd (cdidd@moz-ahda60.broadband.corbina.ru)
[16:20:39] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[16:21:00] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[16:22:34] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[16:23:57] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[16:25:03] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[16:26:07] *** Joins: Kxepal (Miranda@moz-a3ojac.pppoe.mtu-net.ru)
[16:30:26] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:30:27] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:31:23] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[16:31:40] *** Joins: eddyb (eddyb@moz-ar9.ad3.27.188.IP)
[16:31:45] *** Quits: nawns (nawns@moz-0l6.cn2.211.128.IP) (Client exited)
[16:32:03] *** Quits: ptalbot (ptalbot@moz-g2mokk.ircam.fr) (Ping timeout: 121 seconds)
[16:34:59] *** Quits: scialex (scialex@moz-nn5.l1h.16.138.IP) (Ping timeout: 121 seconds)
[16:35:32] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Ping timeout: 121 seconds)
[16:44:51] <acrichto> nmatsakis: btw I think that https://github.com/rust-lang/rust/issues/23853 may be related to the recent Reflect changes
[16:44:57] <acrichto> nmatsakis: that's causing crates.io to not compile as well
[16:46:18] <pnkfelix> acrichto: hey are you okay with reviewing https://github.com/rust-lang/rust/pull/23841 
[16:46:26] <pnkfelix> acrichto: if not I can try to find a reassignment
[16:46:34] <acrichto> pnkfelix: yeah taking a look now, I'll see if it's too much over my head!
[16:47:16] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[16:47:17] *** ChanServ sets mode: +o pcwalton
[16:48:47] *** Quits: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net) (Ping timeout: 121 seconds)
[16:49:43] *** Joins: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net)
[16:50:22] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[16:50:52] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[16:54:32] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Ping timeout: 121 seconds)
[16:59:46] *** Joins: akahuh (akawaka@moz-0bb8q8.irvnca.sbcglobal.net)
[16:59:54] *** Quits: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net) (Connection closed)
[16:59:55] *** akahuh is now known as akawaka
[17:00:41] <pnkfelix> eddyb: ping
[17:00:54] <pnkfelix> eddyb: (actually, I'll just CC you on the PR)
[17:02:49] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[17:06:57] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Ping timeout: 121 seconds)
[17:08:14] <acrichto> pnkfelix: hm there's a lot more going on in https://github.com/rust-lang/rust/pull/23863 so it may be best to get someone else to review that
[17:13:53] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[17:14:11] *** Joins: mr_evilaxs (Mibbit@moz-juv.9o3.252.72.IP)
[17:17:28] *** Quits: mr_evilaxs (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:22:40] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[17:22:45] <pnkfelix> acrichto: no problem.  :)
[17:27:49] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:28:32] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[17:32:03] *** Joins: dinfuehr (dinfuehr@moz-g0h6ai.highway.telekom.at)
[17:32:58] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Quit: rcirc on GNU Emacs 24.3.92.1)
[17:36:05] *** Quits: dinfuehr (dinfuehr@moz-g0h6ai.highway.telekom.at) (Ping timeout: 121 seconds)
[17:40:48] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[17:45:47] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:01:13] *** Quits: ok32 (ok32@moz-imu.af0.232.213.IP) (Connection closed)
[18:01:22] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[18:01:27] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[18:08:52] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[18:10:10] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[18:11:40] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[18:13:08] <erickt> one day to beta?
[18:13:27] <steveklabnik> erickt: no, friday
[18:13:31] <steveklabnik> small snafu with dates
[18:13:36] <steveklabnik> friday is six weeks from the last release
[18:13:38] <erickt> :)
[18:15:33] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[18:16:33] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:16:33] *** ChanServ sets mode: +o pcwalton
[18:25:26] *** Joins: hoverbear (hoverbear@moz-230atp.wireless.uvic.ca)
[18:26:04] <cmr> larsberg: I recall you mentioning that there are groups working on formally verifying unsafe code?
[18:27:23] <larsberg> cmr: AFAIK, everything is still at the vague academic-y "writing proposals and looking for graduate students to work on said problem" phase. I believe aturon would know more, as he's academically closer to the groups that were interested in such work than I am :-)
[18:27:42] <cmr> larsberg: ok, thanks!
[18:27:45] <cmr> aturon: boop :)
[18:27:49] <aturon> cmr: hi :)
[18:27:54] <cmr> aturon: see above
[18:28:08] <aturon> cmr: so, i worked with my old postdoc supervisor to help produce a big grant proposal
[18:28:14] * larsberg is also interested if Amal or Derek have moved forward with this...
[18:28:22] <aturon> cmr: i'd be glad to mail you a copy, it's some interesting reading!
[18:28:38] <aturon> larsberg: dunno about Amal, but Derek has proposed a massive grant almost wholly focused on Rust
[18:28:46] <cmr> aturon: please do
[18:29:17] <eddyb> aturon: this sounds like cool stuff
[18:29:31] <aturon> eddyb: want a copy? :)
[18:29:33] <larsberg> aturon: Nice, thanks for the update!
[18:29:44] <eddyb> aturon: sure! do you have an easy way to get my email?
[18:29:47] <cmr> aturon: Do you know what the timescale on that might be?
[18:30:02] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[18:30:06] <eddyb> this is the kind of thing I really want to get into when I get to uni
[18:30:13] <aturon> eddyb: hm, if you don't want it to be known, feel free to email me at aturon@mozilla.com
[18:30:21] *** Joins: eerie (eerie@moz-aang3l.red.bezeqint.net)
[18:30:29] <aturon> cmr: in the sense of when it might be approved?
[18:30:52] <cmr> aturon: Yeah.
[18:31:19] <cmr> (It's rapidly looking like this is going to be my academic field for the next few years)
[18:32:13] <aturon> cmr: i'm not positive, but i suspect <1 year
[18:32:21] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Quit: Leaving.)
[18:32:23] <larsberg> cmr: expressing interests like that as an undergrad are how you end up getting "sent" to study somewhere for your PhD instead of having to apply directly :-)
[18:32:25] <aturon> cmr: though he's planning on doing much of the work regardless of the grant approval
[18:33:03] <aturon> larsberg: sent you a copy too
[18:33:09] <larsberg> aturon: thanks!
[18:33:34] <aturon> cmr: i think the grant itself is for 5 years, FWIW
[18:34:14] <cmr> larsberg: I can't tell if that's a warning or not ;)
[18:34:55] <cmr> aturon: Thanks!
[18:35:42] *** Joins: brson (brson@moz-0k6.crj.56.172.IP)
[18:35:42] *** ChanServ sets mode: +o brson
[18:35:52] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[18:36:00] <aturon> acrichto: i'm trying to finish std::num stuff and hitting some very weird test errors
[18:36:17] <aturon> acrichto: doc tests like https://github.com/rust-lang/rust/blob/master/src/libstd/num/f32.rs#L1342-L1352
[18:36:34] <aturon> acrichto: failing with "test executable failed: Ok("")"
[18:36:38] <aturon> acrichto: but not all of them!
[18:37:20] <aturon> acrichto: e.g. asin fails, but not tan directly above it
[18:37:44] <acrichto> aturon: I think there's a bug where rustdoc only prints the stdout, not the stderr of the executable
[18:37:48] <acrichto> to explain the empty string at least
[18:38:04] <acrichto> aturon: if you run the example directly yourself does it fail?
[18:39:27] <aturon> acrichto: works fine
[18:40:24] <aturon> acrichto: i take it back :P
[18:40:42] <nmatsakis> erickt: pong
[18:41:08] <erickt> nmatsakis: uh, I completely forgot why I pinged you :)
[18:41:23] <aturon> acrichto: uhhh so this is getting weirder
[18:41:59] <nmatsakis> erickt: ok well did you see this PR ?
[18:42:10] <nmatsakis> https://github.com/rust-lang/rust/pull/23860
[18:42:17] <nmatsakis> erickt: you can see why I was motivated to make derive(Copy) => Clone
[18:42:22] <nmatsakis> ;)
[18:42:57] <erickt> nmatsakis: oh I remember now
[18:43:03] <erickt> nmatsakis: oh, no I didn't
[18:43:26] *** Joins: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru)
[18:43:30] <erickt> nmatsakis: it's possible you already address this in your PR
[18:44:21] <erickt> nmatsakis: the question I had is what do do about generic types like `#[derive(Clone)] enum Option<T>`
[18:44:33] <erickt> err, #[derive(Copy)] enum Option<T>
[18:44:48] <nmatsakis> I didn't "address" this in any sense...
[18:45:04] *** Joins: pczarn (piotr@moz-9un7t9.izacom.pl)
[18:45:11] <nmatsakis> ...but I think it's an interesting example of why loosening the rules around private types/traits appearing in where-clauses could be helpful
[18:45:33] <nmatsakis> erickt: what exactly were you thinking of?
[18:46:42] <erickt> well what I got implemented right now is I'm generating `impl<T: Copy> Copy for Option<T> {} impl<T: Clone> Clone for Option<T> { fn clone(&self) { *self } }`
[18:47:24] <pczarn> there's actually an issue with repetitions in quasiquotation
[18:47:24] <erickt> which prevents non-Copy clonable options from being cloned
[18:47:39] <nmatsakis> erickt: ah, interesting
[18:47:44] <nmatsakis> erickt: I guess I didn't hit this problem because
[18:47:53] <nmatsakis> erickt: in my branch, it doesn't generate the more specialized Clone
[18:48:10] <nmatsakis> erickt: presumably you have to write `impl<T:Copy> Clone for Option<T>`?
[18:48:24] <erickt> ah, yeah right
[18:48:38] <nmatsakis> hmm that is an annoying problem!
[18:48:50] <nmatsakis> I mean I guess one answer is just to keep the Clone impl generation as is,
[18:48:53] <nmatsakis> and you have to write it out 
[18:48:57] <nmatsakis> it's not a common scenario
[18:48:58] <nmatsakis> but an annoying one
[18:49:17] <erickt> maybe what'd be best is to stick with the generic pattern matching clone impl
[18:49:25] <nmatsakis> another would be to try and only generate that more specialized Clone impl in specific cases (e.g. no generic parameters)...
[18:49:36] <nmatsakis> ...yeah, seems like that's best for now,
[18:49:51] <nmatsakis> eventually it'd be nice to generate the more efficient impl I guess
[18:50:04] <nmatsakis> there are lots of ways forward here if we have more lang support
[18:50:12] <nmatsakis> e.g. specialization or impls that are generic over N
[18:50:20] <erickt> and just manually impl Copy and Clone for types that contain, say, a closure
[18:50:34] <nmatsakis> right, I mainly saw this in types like [u8; 64]
[18:50:37] <nmatsakis> in practice
[18:50:45] <nmatsakis> but also extern fn
[18:50:54] <erickt> yeah
[18:50:56] <nmatsakis> closures not so much because they aren't really Copy
[18:51:13] <erickt> but it wouldn't be too hard for me to check if the type is generic, and if so, do the pattern matched Clone
[18:51:24] <erickt> but if not, generate `fn clone(&self) { *self }`
[18:51:50] <erickt> which would cover more situations
[18:53:18] <nmatsakis> aturon: what do you think about trying to get erickt's deriving improvements at same time as copy: clone
[18:53:48] <aturon> nmatsakis: *personally*, i'd be happy to see that land 
[18:54:02] <aturon> but i was under the impression that there was some pushback?
[18:54:24] <aturon> is your PR changing minds? :)
[18:54:29] <nmatsakis> yeah I'm not sure; I think most people thought it was good but not for PartialOrd=>Ord
[18:54:40] <nmatsakis> but I'm wondering how far we can/should push without an RFC 
[18:55:58] <nmatsakis> people will definitely notice ;)
[18:56:33] <aturon> nmatsakis: right, it seems like the current derive behavior wont' be terribly painful going forward, but hurts for this transition
[18:57:18] <aturon> thinking more, i guess i'm a little wary of rushing derive changes through before beta
[18:58:08] <nmatsakis> yeah, let's just land things independently
[18:58:11] *** Joins: eerie_ (eerie@moz-aang3l.red.bezeqint.net)
[18:58:12] <nmatsakis> I'd rather get PartialOrd=>Ord too
[18:58:16] <aturon> (but on the other hand, the Copy: Clone change, which needs to happen, is already going to be disruptive)
[18:58:18] <aturon> yes, that too
[18:58:50] <nmatsakis> always happens that the last few days break a bunch of stuff I guess
[18:58:51] <aturon> ah well, what would a major pre-1.0 release be without some breakage! ;-)
[18:58:57] <nmatsakis> exactly!
[19:01:27] *** Quits: eerie (eerie@moz-aang3l.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:03:39] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (A TLS packet with unexpected length was received.)
[19:03:49] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[19:05:03] <richo> Is there a celebration planned for/near release day?
[19:06:29] <erickt> richo: we are in the process of organizing one
[19:06:38] <erickt> stay tuned :)
[19:06:40] <richo> \o/
[19:06:53] <nmatsakis> aturon: which was the rfc that was kind of stalled on a copy vs clone dispute?
[19:07:35] <aturon> nmatsakis: https://github.com/rust-lang/rfcs/pull/839
[19:08:46] *** Joins: bkearns (Adium@moz-rudtng.static.wiline.com)
[19:09:34] <freebroccolo> aturon: regarding the ToOwned thing, I don't have any deep thoughts about it at this point. I think removing the blanket impl would have been enough in the cases I had issues with it.
[19:09:55] <freebroccolo> Do you think removing the blanket impl would cause a lot of breakage or something? Not sure where it's used really
[19:10:42] *** Joins: alan_andrade (alan_andrad@moz-m80b6q.SanFrancisco1.Level3.net)
[19:11:50] <eddyb> nmatsakis: are we going to stop the trend of not implementing Copy on types that sometimes are wrongly copied?
[19:11:51] <aturon> freebroccolo: no, it probably wouldn't, i suspect most people are using Cow mostly with std types like String/Vec
[19:14:23] *** Quits: kushal (kdas@moz-6rsep0.202.sitibroadband.in) (Ping timeout: 121 seconds)
[19:14:51] <freebroccolo> yeah, I guess it's mostly an issue when there's recursion involved. On the one hand the error message is a little confusing (it asks for Clone), but if you try to implement it or derive it, it causes the checker to go into a loop
[19:14:55] *** Quits: bdero (bran@moz-c280gt.mit.edu) (Ping timeout: 121 seconds)
[19:15:06] <freebroccolo> so you either just forget about clone or try and break the recursion with a wrapper, which is tricky
[19:17:42] <pczarn> eddyb: my problem is, when quasiquoting with repetitions, you can't know which variables are already repeating
[19:17:46] <aturon> freebroccolo: in any case, thanks for bringing it to my attention, i'll make a PR to remove the blanket a bit later today
[19:17:57] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[19:17:57] *** ChanServ sets mode: +o nrc
[19:19:03] <freebroccolo> cool, thanks :)
[19:19:39] <eddyb> pczarn: example?
[19:20:14] <pczarn> quote_tokens!(cx, $($foo $bar)+)
[19:20:43] <pczarn> say, foo: Vec<P<Expr>> and bar: P<Expr>
[19:20:48] <eddyb> oh!
[19:20:56] <pczarn> foo is repeating but bar is merely duplicated
[19:20:59] <eddyb> pczarn: well, there's a way to do this
[19:21:18] *** Quits: ok32 (ok32@moz-nc7pn3.broadband.corbina.ru) (Connection closed)
[19:21:26] <eddyb> a trait that is like IntoIterator but also implemented on the element types themselves
[19:21:39] <eddyb> (where it creates an iter::repeat(self) or something)
[19:21:40] *** Joins: ok32 (ok32@moz-imu.af0.232.213.IP)
[19:21:58] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[19:22:18] <pczarn> could it just work on top of IntoIterator?
[19:22:47] <eddyb> not with just two blanket impls
[19:25:44] *** Joins: Guest63 (textual@moz-6gq.t8s.78.166.IP)
[19:25:46] *** Quits: Guest63 (textual@moz-6gq.t8s.78.166.IP) (Connection closed)
[19:26:35] *** Joins: kushal (kdas@moz-6rsep0.202.sitibroadband.in)
[19:28:27] *** Joins: eerie (eerie@moz-aang3l.red.bezeqint.net)
[19:31:15] *** Quits: eerie_ (eerie@moz-aang3l.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:33:25] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (Connection closed)
[19:33:43] *** Joins: jdm (jdm@moz-b0n4il.ckpj.s0pt.0450.2001.IP)
[19:33:47] *** Quits: martin (martin@moz-9td.bol.200.84.IP) (Ping timeout: 121 seconds)
[19:36:38] <freebroccolo> Is there a particular reason Index needs to take self by-ref and return a ref? I could see why it was that way before associated types but now it seems overly restrictive
[19:44:01] <kimundi> freebroccolo: The index operator returns a lvalue, so that eg &foo[i] can end up taking a reference to the element at that index position, rather than to a stack copy of it.
[19:44:02] *** Quits: eerie (eerie@moz-aang3l.red.bezeqint.net) (Connection closed)
[19:44:32] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[19:44:53] <kimundi> freebroccolo: This is enabled by having the compiler work with a number of overloadable traits
[19:44:58] *** Joins: ok32_ (ok32@moz-nc7pn3.broadband.corbina.ru)
[19:45:01] *** Quits: semarie (semarie@moz-1fgc6t.privacyfoundation.ch) (A TLS packet with unexpected length was received.)
[19:45:17] <kimundi> Index and IndexMut are for the two cases where you take a mutable or shared reference to the lvalue
[19:45:51] <kimundi> Same thing with Deref and DerefMut
[19:46:22] <kimundi> There _is_ talk about supporting something like a IndexMove or DerefMove though
[19:46:53] <kimundi> But that is a bit more complicated and less straight forward to support
[19:47:31] <freebroccolo> kimundi: hmm, I see. I guess that makes sense. There are situations where I think it would make sense to have Index implemented but I don't see how to return a reference that will satisfy the lifetime
[19:47:42] *** Quits: ok32 (ok32@moz-imu.af0.232.213.IP) (Ping timeout: 121 seconds)
[19:48:59] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:48:59] *** ChanServ sets mode: +o pcwalton
[19:49:08] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[19:49:32] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[19:49:47] *** Joins: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de)
[19:49:57] <freebroccolo> One concrete example I had in mind is for some bitfield related stuff I've been working on. It would be pretty nice to be able to have indexing particularly with ranges for that. But I don't see how to do it with the current definition of Index. OTOH, it seems the current behavior could be supported with a more general definition… but maybe that would
[19:49:57] <freebroccolo> interact poorly elsewhere
[19:50:07] <nmatsakis> steveklabnik: ping
[19:52:04] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[19:52:09] <nrc> nmatsakis: is this expected: http://is.gd/vXNZpc
[19:52:27] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Connection closed)
[19:54:50] <eddyb> freebroccolo: hmmmm
[19:55:03] <eddyb> freebroccolo: you need Index to return a value, not a reference?
[19:55:04] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[19:55:13] *** Quits: ok32_ (ok32@moz-nc7pn3.broadband.corbina.ru) (Connection closed)
[19:55:23] <nmatsakis> nrc: I expect it :)
[19:55:28] <freebroccolo> eddyb: yeah. So for T: num::Int, it would return T (or maybe bool)
[19:55:30] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[19:55:34] *** Joins: ok32 (ok32@moz-imu.af0.232.213.IP)
[19:55:50] <nmatsakis> nrc: in particular, I think the behavior of nested items is that they live roughly in between let-bound identifiers and the rib that encloses the fn itself,
[19:55:54] <eddyb> freebroccolo: ah
[19:55:57] <nmatsakis> nrc: I guess one could debate about where parameters go
[19:56:19] <nmatsakis> nrc: but it seems consistent to put them as let-bound identifiers at the start of the fn
[19:57:01] <nrc> nmatsakis: that is not their behaviour, lexically scoped items are only found if there is no shadowing name in *any* rib
[19:57:13] <freebroccolo> eddyb: for these operations: http://freebroccolo.github.io/bits.rs/doc/bits/generic/trait.BitOps.html BitOps::b_get_block_from() could take a Range
[19:57:55] <freebroccolo> and just use Index
[19:58:47] <nrc> nmatsakis: this starts looking really weird with associated items because that brings regular methods into scope without `self.` and so they hide locally declared functions)
[19:59:41] <nmatsakis> nrc: can you give me a more involved example showing what the odd behavior is?
[20:00:29] <nmatsakis> nrc: my experiments on play seem to fit into my worldview ;)
[20:01:34] * eddyb thinks bringing methods in scope is not such a great idea
[20:02:41] <nrc> nmatsakis: http://is.gd/ZU0Gmj
[20:02:55] <nrc> here the type parameter bar shadows the type alias bar
[20:04:18] <nmatsakis> nrc: yeah that seems pretty bogus
[20:04:23] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[20:04:35] <nmatsakis> it seems to be a bit uneven
[20:04:44] <nmatsakis> e.g. http://is.gd/ASwXPp
[20:04:46] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[20:04:49] <nmatsakis> works as expected
[20:05:16] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[20:05:21] <nmatsakis> eddyb: yeah, I'm not sure about bringing methods into scope; but it seems weird to bring types but not values too (and constants seem handY)
[20:05:44] <eddyb> it's not that great in C++ IME
[20:05:56] <eddyb> nmatsakis: but maybe that's just the implicit `this`
[20:06:10] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:06:33] <nmatsakis> eddyb: yes, I prefer the explicit `this`, but it's possible that bringing associated fns into scope is the worst of both worlds :)
[20:06:37] *** Quits: hoverbear (hoverbear@moz-230atp.wireless.uvic.ca) (Quit: Time to hibernate.... ZzZz...)
[20:06:46] <nrc> nmatsakis: because the inner fn can't see the outer one's args?
[20:06:57] <nrc> see http://is.gd/wu6nyp
[20:06:59] <nmatsakis> nrc: right
[20:07:01] <freebroccolo> eddyb: so for example it would be pretty cool to be able to do things like Bits(n)[i] and Bytes(n)[i] or like Bits(n)[i .. i + k]. You could probably use a mask for the index to generalize gather/scatter even
[20:07:12] <nrc> nmatsakis: the assoc case is: http://is.gd/j0ChEx
[20:07:29] <eddyb> freebroccolo: yeah, that's the IndexGet issue
[20:07:41] <nrc> you would expect the bar call to call the local function, but we'll get the method
[20:07:51] <freebroccolo> is there an rfc about it?
[20:08:11] <nmatsakis> nrc: it seems like the problem is that the inner fns are not placed correctly vis-a-vis the impl
[20:08:35] <nmatsakis> nrc: as an aside I've always found this error http://is.gd/wu6nyp more confusing than helpful 
[20:08:37] <nrc> nmatsakis: yeah, the problem precisely is that we prioritise all ribs over all lexical scope
[20:08:46] <nmatsakis> nrc: basically because it assumes you don't know the language rules
[20:08:47] <freebroccolo> Oh I see the comment on BitVec… heh
[20:08:56] <freebroccolo> interesting
[20:09:05] <nmatsakis> nrc: I guess I didn't know there was a difference between "ribs" and "lexical scope" :)
[20:09:10] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[20:09:17] <nmatsakis> nrc: in my mind, the ribs ... echo the lexical scope
[20:09:31] * nmatsakis really needs to read into resolve someday
[20:09:32] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:09:33] <nrc> nmatsakis: right, I'm not really sure why there are these two concepts in resolve
[20:09:42] <nrc> it seems to me there should only be ribs
[20:10:32] <nrc> I guess it is a way to hack around the slightly weird scoping of nested fns
[20:10:37] *** Joins: w66745 (Mibbit@moz-b11uqs.dynamic.upc.nl)
[20:11:11] <nrc> nmatsakis: agree that that error is not great
[20:12:10] <nmatsakis> nrc: regarding nested fns; seems like it's just a question of what the parent rib is for the nested fns;
[20:12:17] <nmatsakis> nrc: I wonder if the current setup is convoluted
[20:12:21] <nmatsakis> nrc: specifically to produce that error
[20:12:23] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[20:12:39] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[20:12:43] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[20:13:04] <nrc> that would be darkly hilarious
[20:13:22] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:13:31] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[20:13:32] <nrc> nmatsakis: yeah, I see no reason why fns are not just another rib
[20:14:35] <eddyb> nmatsakis: it is
[20:14:45] <nmatsakis> that doesn't seem like a very good reason
[20:14:55] <eddyb> I simplified something similar for... I forget what it was
[20:15:09] <eddyb> constants
[20:15:38] <eddyb> or methods? maybe it was methods being able to refer to their impl's type parameters
[20:15:57] <eddyb> anyways, there were special cases only to produce specific "this doesn't make sense in the language" errors
[20:16:37] <Manishearth> could someone close gh23748 ?
[20:16:37] <[o__o]> book: explain why we default to &self as first parameter in methods: https://github.com/rust-lang/rust/issues/23748
[20:16:42] <Manishearth> er
[20:16:48] <Manishearth> gh23746
[20:16:48] <[o__o]> book: 'x' is already taken, so use something else: https://github.com/rust-lang/rust/pull/23746
[20:16:56] <Manishearth> that onw
[20:16:57] <cmr> Manishearth: <3
[20:17:02] <Luqman> 0
[20:17:17] <Manishearth> cmr :)
[20:17:48] *** Joins: bpayton (bpayton@moz-ifileu.ph.cox.net)
[20:18:12] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[20:23:35] <gleb> rustc build is failing for me on freebsd 10.1 https://pastebin.mozilla.org/8827624 is this a known problem?
[20:25:20] *** Quits: brson (brson@moz-0k6.crj.56.172.IP) (Ping timeout: 121 seconds)
[20:31:29] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[20:34:40] <aturon> nmatsakis: nrc: to be honest, i'm having second thoughts about the scoping change at all
[20:35:05] <aturon> like eddyb, i worry about bringing methods into scope -- it always seemed a bit weird to me
[20:35:08] <nrc> aturon: you think you want to keep the Self:: requirement?
[20:35:19] <aturon> and over time, i've come to see Self::Type as like self.method, where it makes sense
[20:35:37] <aturon> nrc: well, i'm on the fence, but i'm coming around to it
[20:35:51] <aturon> Gankro: I wonder what your experience has been?
[20:35:53] *** Joins: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca)
[20:36:01] <aturon> Gankro: i know that at first you found it pretty painful
[20:36:15] <aturon> cmr: IIRC you had some examples of very large traits with many assoc types where it's painful to have to do Self:: ?
[20:36:19] <cmr> https://github.com/stainless-steel/blas/blob/master/src/lib.rs#L71
[20:36:40] <cmr> THose traits are small as far as I'm concerned, and it was already dreadful writing those.
[20:36:43] <aturon> cmr: a compelling argument
[20:36:50] <cmr> And it was largely copy-paste!
[20:36:56] <nmatsakis> cmr: wait, what
[20:36:59] <nmatsakis> what is this
[20:37:03] <aturon> but i wonder whether we could deal with this a different way?
[20:37:05] <nmatsakis> <Self as Num>::Weird
[20:37:12] <aturon> by allowing `use` within traits
[20:37:23] <nmatsakis> that makes it look a lot worse, is that needed? (is it because of supertrait relationships?)
[20:37:24] <aturon> as a kind of opt-in to this shorthand
[20:37:38] <aturon> (where `use self::*` would be akin to the proposed semantics)
[20:37:48] <eddyb> making traits more like modules :D?
[20:38:00] *** Joins: brson (brson@moz-0k6.crj.56.172.IP)
[20:38:00] *** ChanServ sets mode: +o brson
[20:38:09] <cmr> nmatsakis: I'll re-investigate it, it might not be needed in Num itself but it's needed in all of its subtraits.
[20:38:12] <nmatsakis> in particular
[20:38:16] <aturon> eddyb: hm, is that true? i thought the scoping change would make them more module-like
[20:38:18] <nmatsakis> I'm not convinced that this code would look nice
[20:38:20] <eddyb> cmr: are those methods supposed to be associated constants?
[20:38:22] <nmatsakis> no matter what you do
[20:38:24] <nmatsakis> no offense :)
[20:38:26] <aturon> eddyb: e.g. a type declared in a module is automatically `use`d
[20:38:34] <cmr> eddyb: no, they're all operations.
[20:38:43] <cmr> nmatsakis: oh no, it won't :)
[20:38:55] <eddyb> cmr: they return functions
[20:38:59] <cmr> https://github.com/cmr/rust-metal-sketch/blob/master/src/lib.rs was my original example, I haven't had time to flesh it out yet.
[20:39:00] <nmatsakis> cmr: I think it used to be needed for supertraits
[20:39:03] <nmatsakis> cmr: but that bug was fixed long ago
[20:39:07] <eddyb> and all implementations look constant
[20:39:12] <nmatsakis> cmr: (the <Self as SuperTrait>::Foo thing)
[20:39:14] <cmr> eddyb: oh, that's what you mean. Yes.
[20:39:28] <cmr> nmatsakis: that wasn't my experience when I wrote this, unless "long ago" is less than 3 weeks ago.
[20:40:12] <eddyb> (I wonder what's up with all the pointers to primitives, but maybe I should stop questioning)
[20:40:33] *** Quits: jdm (jdm@moz-b0n4il.ckpj.s0pt.0450.2001.IP) (A TLS packet with unexpected length was received.)
[20:40:34] <cmr> eddyb: those are the FFI declarations, somewhat abstracted away from the actual types.
[20:40:50] <nmatsakis> cmr: cmr http://is.gd/z8zCKl
[20:40:51] <nrc> aturon: wouldn't you need to have a whole bunch of `use Self` and not much else? Seems like a very targeted feature
[20:40:56] <nmatsakis> cmr: I'd be curious to know what makes it different
[20:40:58] *** Joins: jdm (jdm@moz-b0n4il.ckpj.s0pt.0450.2001.IP)
[20:41:09] <nmatsakis> seems like a bug to me
[20:41:11] <nrc> unless you want to make traits and impls also module boundaries, but that would break *a lot* of code :-p
[20:41:30] <nmatsakis> nrc: well, isn't that kind of what we were talking about?
[20:41:32] <aturon> nrc: i suspect that would be the most common use, yeah
[20:41:43] <nmatsakis> I mean with UFCS we're *pretty* close
[20:42:02] <nmatsakis> oh, I guess you mean
[20:42:09] <nrc> nmatsakis: as in, within a trait you can't see things in the enclosing module
[20:42:10] <nmatsakis> with respect to not getting things from enclosing mod
[20:42:13] <nmatsakis> that would be no good :)
[20:42:14] <nrc> right
[20:42:18] <nrc> right :-)
[20:42:56] <nrc> so my worry is that `use Self` becomes just a switch to turn on nice assoc type naming
[20:43:05] <eddyb> use Self::*;?
[20:43:21] <nrc> No one would import anything else at trait level
[20:43:24] <aturon> nrc: right, if that's the widespread "default", we should probably bake it in
[20:43:26] <nrc> yeah that
[20:43:31] <nrc> to eddyb
[20:43:58] <eddyb> cmr: I have to wonder, at that scale... maybe macros would help?
[20:43:58] <aturon> nrc: but i'm not sure how likely that is
[20:44:01] <nrc> aturon: right, I think it is just a switch and we should decide which way it should be switched and make it the default
[20:44:10] <kmc> how can I get cargo to build my examples in release mode?
[20:44:25] <nrc> aturon: same, I'm not sure how painful writing Self::Foo is, in general
[20:44:31] <aturon> nrc: ok, think we're on the same page. this is precisely why i'm on the fence
[20:44:33] <cmr> eddyb: eh, who needs macros in the language when you have vim
[20:44:46] <nmatsakis> I guess I find the current system consistent; I find the "bring types and values" consistent but maybe confusing; "just bring types" may be practical but seems inconsistent and perhaps confusing in some sense, idk.
[20:45:01] <nmatsakis> er, I find the "bring types and values" consistent but maybe *inconvenient*
[20:45:03] <nrc> nmatsakis: agreed
[20:45:04] <aturon> nrc: i think the Self:: becomes troublesome when you also have complex method signatures going on, and you are desperate to reduce the noise
[20:45:24] <nmatsakis> I can imagine this
[20:45:30] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[20:45:40] <nrc> there is also Gankro's (I think) argument that assoc types shouldn't be more painful than type params
[20:45:45] <aturon> but that is (hopefully) somewhat rare
[20:45:50] <nrc> but it is too late to move to Self::X for type params
[20:45:54] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:46:03] <aturon> nrc: indeed, simliarly about Iterator<Item = Blah>, but i've found it didn't take very long to get used to
[20:46:14] <aturon> (and doesn't feel particularly bad to me now)
[20:47:02] <nrc> I haven't really used either enough to have an opinion from experience
[20:47:39] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:49:00] <nmatsakis> the main case that seems annoying is Add<Output=Self>
[20:49:02] <nrc> applying the patch to bring types and methods into scope has not caused very much breakage in the libs, for what that is woth
[20:49:04] <nmatsakis> vs T: Add
[20:49:10] <nmatsakis> which is orthogonal to all of these things
[20:49:28] <nmatsakis> nrc: oh, I thought you said there was a lot of breakage (perhaps you just meant this is a big conceptual change)
[20:49:29] <eddyb> nmatsakis: T: Add -> T
[20:49:42] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[20:49:47] <nmatsakis> eddyb: I know...
[20:49:49] <eddyb> :D
[20:49:58] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[20:50:04] <nrc> nmatsakis: I meant it was one of those changes where you end up endlessly cleaning up bugs in the implementation
[20:50:05] <eddyb> T: Add(T) -> T
[20:50:11] <cmr> nmatsakis: ok, the issue was in the impls, not the traits themselves, and the traits were originally made by copy-pasting a bunch of individual functions into a trait. 
[20:50:19] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[20:50:22] <cmr> In the impl it's `error: ambiguous associated type; specify the type using the syntax `<num::complex::Complex<f32> as Trait>::Float`
[20:50:23] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[20:50:39] * eddyb wouldn't mind it if we changed type params on traits to () instead of <>
[20:50:42] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[20:50:57] * nrc is tempted to kick eddyb for trolling
[20:51:03] <nrc> :-)
[20:51:13] <eddyb> nrc: backwards-compatibly!
[20:51:36] <eddyb> Foo::(T, U) even works
[20:51:53] <eddyb> I know, still ::, but what are you going to do
[20:52:23] <nmatsakis> cmr: what did you try that gave this error?
[20:53:27] <eddyb> nrc: I had the idea of mixing value and type parameters recently - and only functions with type parameters not showing up in argument/result types would require passing in the type...as an argument
[20:53:30] <cmr> nmatsakis: https://gist.github.com/cmr/54b3df3cdfbd592764fa
[20:53:32] <eddyb> nrc: size_of(i32)
[20:54:08] <nrc> eddyb: that sounds both awesome and terrible
[20:54:10] <eddyb> can probably put the type parameters after value arguments
[20:54:23] <eddyb> "5".parse(): Option(i32)
[20:54:28] <eddyb> or "5".parse(i32)
[20:54:37] <nrc> I imagine you could get some pretty elegant things and some pretty incomprehensible ones
[20:54:46] <nmatsakis> cmr: I think that's a separate bug
[20:54:56] <eddyb> nrc: which is why this is research material :D
[20:55:07] <eddyb> I just hope it doesn't end in currying
[20:55:17] <nmatsakis> cmr: though I guess that this change would sort of workaround the problem
[20:55:21] <cmr> nmatsakis: ok. I don't mind Self::Foo for the record.
[20:55:59] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:56:24] <nmatsakis> eddyb: I guess examples like this http://is.gd/FfKSro didn't quite get to work with your ufcs work, eh?
[20:56:32] <nmatsakis> eddyb: makes sense, now that I think about it
[20:56:53] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[20:56:54] <nmatsakis> in particular, not a method 
[20:56:55] <eddyb> nmatsakis: your patch came in later IIRC
[20:57:12] <eddyb> nmatsakis: though, really, to look that up...
[20:57:25] <eddyb> nmatsakis: I kinda want check::method to work for any associated items
[20:57:34] <nmatsakis> right, that's what I wanted to do eventually
[20:57:46] <eddyb> nmatsakis: I guess you'd need to split the autoderef logic and "associated lookup"
[20:57:58] <eddyb> methods are merely sugar for associated values :P
[20:58:07] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[20:58:21] <nmatsakis> yeah, there's a beautiful kernel waiting to be extracted eventually :)
[20:59:17] <eddyb> traits and types are both entities
[21:00:11] <eddyb> nmatsakis: traits are a sum of predicates
[21:00:25] <eddyb> and so are types!
[21:01:02] <eddyb> nrc: you should've seen me in #rust-offtopic a couple weeks ago. the rabbit hole of reductionism truly has no end
[21:01:25] * nrc forsees a PhD in type theory in eddyb's future
[21:01:32] <nrc> *foresees 
[21:01:43] <eddyb> nrc: but all I wanted was to play with robots :(
[21:02:05] * kimundi is tempted to start talking about his idea to move a bunch of modifier keywords out of the language and into "keyword attribute" mechanism. `unsafe {}` => `#![declare_keyword = "unsafe"] ... #[unsafe] {}`
[21:02:38] <eddyb> kimundi: have you seen how Nim does macros?
[21:03:02] <kimundi> haven't seen anything about Nim, actually. :)
[21:05:18] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Quit: Leaving...)
[21:06:19] *** Joins: larhat (Adium@moz-9vj.vcf.204.37.IP)
[21:07:54] *** Joins: ok32_ (ok32@moz-nc7pn3.broadband.corbina.ru)
[21:08:13] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Ping timeout: 121 seconds)
[21:09:31] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[21:10:36] *** Quits: ok32 (ok32@moz-imu.af0.232.213.IP) (Ping timeout: 121 seconds)
[21:13:08] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:15:59] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[21:19:03] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[21:23:56] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:24:27] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:31:05] *** Quits: ok32_ (ok32@moz-nc7pn3.broadband.corbina.ru) (Connection closed)
[21:33:07] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:33:10] *** Quits: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca) (Quit: Time to hibernate.... ZzZz...)
[21:34:09] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:34:10] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:35:55] *** Quits: marsel (user@moz-lv2.4he.147.46.IP) (Ping timeout: 121 seconds)
[21:35:56] *** Joins: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca)
[21:44:31] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[21:44:50] <eddyb> nrc: I'm dumb, expr_is_lval is *right there*
[21:45:44] <nrc> :-p
[21:46:09] <eddyb> but that's not too great, is it now
[21:46:21] <eddyb> nrc: there's a whole bunch of expressions which move out of lvalues
[21:46:29] <eddyb> nmatsakis: ping
[21:51:01] <eddyb> nrc: I guess it wouldn't be *wrong*, I'm just not sure how useful it might be in certain contexts
[21:51:41] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[21:51:57] <nrc> I might be getting a bit mixed up, but I think the important thing is whether the type ascription expression appears in lvalue context, rather than if it is itself an lvalue expression (because that is constant). I.e., there are some contexts where an rvalue is converted into an lvalue by creating a temporary and it is those where it would be unsound to coerce
[21:52:33] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:52:36] <nrc> I'm not sure how the moving out ties in to this
[21:53:09] <brson> here's the build status of crates vs yesterday's beta https://gist.github.com/brson/bc6a85f6e9a4ce2d051d
[21:53:32] <eddyb> nrc: huh?
[21:53:47] <eddyb> nrc: if you have an rvalue then coercion should be perfectly fine
[21:53:57] <eddyb> nrc: because you can do said coercion inside a block
[21:54:02] <nrc> yes
[21:54:10] <nrc> well
[21:54:49] <nrc> Whether coercion is fine or not depends on the context, not the sub-expression being coerced, aiui
[21:54:51] <aturon> brson: whoa, that's a lot more successes! :D
[21:55:36] <aturon> brson: what's up with the libc failure?
[21:56:32] <eddyb> nrc: the RFC doesn't happen to include a compile-fail test, does it now?
[21:56:49] <nrc> no, sorry
[21:58:32] <eddyb> nrc: so if you have let x: &'static i32; then x: &'a i32 is a problem if it appears in an lvalue context
[21:59:45] <nmatsakis> eddyb: pong (but I'm about to disappear)
[21:59:50] <eddyb> nrc: which can be an auto-borrow
[22:00:05] <eddyb> (x: &'a i32).mutate()
[22:00:15] *** Joins: mib_r5376f (Mibbit@moz-uvb.kae.79.109.IP)
[22:00:49] <eddyb> nmatsakis: we don't know the extent lvalue checking required in type ascription
[22:00:52] <nrc> eddyb: yes on both counts
[22:00:59] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:01:09] <eddyb> nmatsakis: and I'm not 100% comfortable with my guesswork
[22:01:32] <nmatsakis> eddyb: ok, did you want me to whip up some tests? I think I had a list of examples written down somewhere
[22:01:57] <eddyb> nmatsakis: if you could find those examples, they would be quite useful
[22:02:27] <eddyb> nmatsakis: I'm pretty sure coercions of lvalues are still important, but only when they end up being moved out of (and not observed as lvalues)
[22:02:49] <brson> aturon: hm, not sure. i'll look into it
[22:02:51] <nmatsakis> I don't think this has much to do with moves
[22:02:58] <nrc> eddyb: question about PathResolution, when I have a type <C as T>::Foo where C is a concrete type and T is a trait and Foo is an associated type, what should the base_def be? The comments seem to indicate that just the T is reflected, can we ignore C completely?
[22:03:03] <eddyb> nmatsakis: think x: Box<Trait> where x has a Box<T> trait
[22:03:08] <nmatsakis> I guess I don't know what "coercions of lvalues" is supposed to mean?
[22:03:17] <nmatsakis> in particular, nobody is proposing that you can't coerce an lvalue
[22:03:34] <nmatsakis> the question is about coercions in "reference contexts"
[22:03:50] <nmatsakis> e.g. let ref mut x = y: T
[22:03:56] <eddyb> I'm not sure how well-defined that is
[22:04:12] <nmatsakis> very?
[22:04:14] <nmatsakis> :)
[22:04:20] <eddyb> does &mut (y: T) count?
[22:04:23] <nmatsakis> yes
[22:04:29] <eddyb> then so does (y: T).mutate()
[22:04:32] <nmatsakis> yes
[22:04:37] * nrc has been using lvalue-context and reference context interchangably, that is probably incorrect
[22:04:42] *** Quits: mib_r5376f (Mibbit@moz-uvb.kae.79.109.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:04:54] <nmatsakis> I don't know that either term is well-defined
[22:04:59] <nmatsakis> I sometimes say 
[22:05:02] <nmatsakis> lvalue context
[22:05:08] <nmatsakis> when I mean "something we're taking the address of"...
[22:05:09] <eddyb> nmatsakis: is it just mutable?
[22:05:18] <nmatsakis> mutable is most imp't, but we decided to enforce it uniformly
[22:05:25] <eddyb> or is &(y: T) also affected?
[22:05:30] <nmatsakis> in particular that's what the `let ref` patch did
[22:05:42] <nmatsakis> right
[22:05:51] <brson> acrichto: i've been stripping 'path' components from Cargo.toml, but libc contains a path component that is required
[22:06:08] <nmatsakis> eddyb: also match x: T { ... ref  ... }
[22:06:09] <brson> acrichto: path = "rust/src/liblibc/lib.rs"
[22:06:11] <eddyb> nmatsakis: oh! I think I just had to combine two pieces of information
[22:06:20] <brson> acrichto: any idea how i should reconcile this?
[22:06:35] <eddyb> nmatsakis: this is about ascription of lvalues in an reference context, right?
[22:06:44] <acrichto> brson: you just need to strip path components in dependencies
[22:06:57] <nmatsakis> eddyb: well, ascription in a reference context
[22:06:59] <brson> acrichto: how do i determine that?
[22:07:00] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:07:08] <acrichto> brson: the closest [section]
[22:07:12] <eddyb> nmatsakis: but it can't be wrong if it's an rvalue, can it?
[22:07:23] <brson> acrichto: can you expand on that?
[22:07:36] <acrichto> brson: e.g. the closest above section in brackets
[22:07:44] <acrichto> brson: e.g. liblibc has a path component in its [lib] section
[22:07:47] <acrichto> which should not be stripped
[22:07:56] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[22:08:02] <brson> acrichto: which sections should be stripped?
[22:08:02] <acrichto> but a path component in a [dependencies.*] section should be stirpped
[22:08:05] <nmatsakis> eddyb: I don't think so; but to be most consistent with what e.g. `let ref x: T = <expr>` did, we wouldn't draw the distinction. Just seems simpler to me, more predictable.
[22:08:07] <brson> ok
[22:08:09] <acrichto> brson: dependencies.foo.path
[22:08:20] <brson> i wonder if sed can do this...
[22:08:21] <eddyb> hmm
[22:08:28] <eddyb> nmatsakis: where is that handled?
[22:09:08] * eddyb is just afraid random things that are safe won't work. like, (&x: &Trait).foo()
[22:09:36] <eddyb> or foo(&mut (x: Box<Trait>))
[22:09:38] <nmatsakis> eddyb: https://github.com/rust-lang/rust/pull/23119/files
[22:10:21] <eddyb> also, x: T might move out of x depending on the type of x and T
[22:10:42] <nmatsakis> eddyb: (we can of course make the rules more permissive later, as well)
[22:10:44] <nmatsakis> anyway, I gotta go
[22:10:51] <nmatsakis> the &mut / lvalue case is the crucial one
[22:11:01] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:11:19] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:12:20] <eddyb> nrc: at which point are you?
[22:12:40] <nrc> eddyb: resolve
[22:13:06] <eddyb> nrc: the particular <C as T>::Foo syntax is treated as... T::Foo::<Self=C>, basically
[22:13:23] <aturon> Gankro: ping
[22:13:48] <eddyb> nrc: but C::Foo is going to have base_def = C and Foo is deferred to typeck
[22:14:45] <nrc> eddyb: where are the substs (Self=C) represented?
[22:14:57] <eddyb> nrc: QSelf
[22:15:02] <nrc> I assume we use DefTrait for the T
[22:15:27] <eddyb> yes, and DefAssociatedTy for T::Foo
[22:15:31] *** Quits: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de) (Quit: Lost terminal)
[22:15:35] <eddyb> or DefAssocType or whatever it is
[22:15:37] <nrc> Oh, because it is a QPath, not a refular path
[22:15:47] <nrc> hmmm
[22:15:47] <eddyb> nrc: it is a Path :D
[22:15:52] <eddyb> nrc: check out the ast
[22:16:24] <nrc> oh right, yeah
[22:16:36] <cmr> #rustc!
[22:16:40] <eddyb> in T::Foo::<Self=C>, T::Foo is stored in a Path and "Self=C at second segment" is stored in QSelf
[22:16:58] * nrc moves to rustc
[22:19:35] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[22:21:51] *** Joins: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de)
[22:21:54] *** Quits: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca) (Quit: Time to hibernate.... ZzZz...)
[22:25:32] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:25:39] <aturon> freebroccolo: looking into the ToOwned business, I think what it really wants is for the Owned associated type to be 'static, in which case the blanket impl is restricted to 'static types (ruling out interior uses of Cow with non-statically borrowed data)
[22:26:05] <aturon> freebroccolo: do you have an example handy where you had to work around the blanket impl?
[22:26:12] <reem> aturon: is there actually significant will to address this with a buffer abstraction pre 1.0? http://internals.rust-lang.org/t/uninitialized-memory/1652
[22:26:30] <aturon> reem: not pre-1.0, no
[22:27:13] <reem> hmm ok
[22:27:30] <aturon> (I don't think anyone is confident that we could produce the right design in that timeframe)
[22:27:51] <reem> that was my primary concern too
[22:27:55] <reem> (I started writing an RFC)
[22:28:09] <aturon> i think it's definitely worth getting some experimentation going, though
[22:28:26] <reem> Is it backcompat to add a default implementation for a method?
[22:28:27] <aturon> you're probably already aware, but just in case: acrichto recently landed a change to zero
[22:28:38] <reem> ya I saw
[22:28:40] <sfackler> aturon: how are you feeling about debug builder stabilization? seems to me like the api's where we'd want it unless we're going to add back name prefixes to collections ouput
[22:28:43] <aturon> reem: for an existing method? most definitely
[22:28:57] <reem> And adding another method with a default impl is also backcompat?
[22:29:24] <aturon> reem: that's the kind of change that can break code (because it could conflict with another in-scope trait method),
[22:29:41] <aturon> but that we are likely to consider "OK" since you can use UFCS to work around
[22:29:44] <reem> so if we can't do that then we definitely can't add a buffer abstraction post 1.0
[22:30:04] <reem> ok
[22:30:06] <aturon> (and in the future it may be possible to import traits while renaming their methods to avoid such conflicts)
[22:30:11] <aturon> so yes, i believe we can add the abstraction later
[22:30:26] <aturon> sfackler: i'm personally fine with that, but i would ping acrichto who has been a bit more involved with it
[22:30:33] <sfackler> acrichto: ^?
[22:31:38] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:31:47] <acrichto> sfackler: hm lemme take another look over the API again
[22:33:11] <sfackler> acrichto: I've been thinking a bit about adding an entries method to the collections builders that takes an IntoIterator so self.iter().fold(fmt.debug_set(), |b, e| b.entry(e)).finish() can just be fmt.debug_set().entries(self).finish()
[22:33:25] <sfackler> but it's not crucial or anything
[22:33:39] <acrichto> oh that does sound quite nice yeah
[22:33:54] <reem> aturon: After some thinking and trying to]
[22:33:57] <reem> agh
[22:34:22] <reem> my major concern is that the semantics we want for read_buf aren't safely expressible in terms of read
[22:34:46] <aturon> reem: that's correct. the idea was that each method would have a default impl that uses the other --
[22:34:52] <reem> in my mind, BufMut has an *unsafe* as_mut_slice method, which can be used "on the edges" for io types to implement read at a low level
[22:34:56] <aturon> reem: and the default for read_buf would involve zeroing
[22:35:19] <reem> Ya, my design is basically the same but I would like to avoid zeroing in the default case.
[22:35:21] <aturon> reem: so when read_buf was first added, nothing would get faster, but then you could slowly migrate from one default to the other
[22:35:38] <aturon> well, so ultimately you want read_buf to be the method you implement, not read
[22:35:42] <reem> right
[22:35:50] <aturon> having each provide a default in terms of the other makes that possible
[22:36:01] <reem> (pre 1.0 we could rename read_buf to read and read to read_slice, but alas...)
[22:36:04] <acrichto> sfackler: so api-wise, what's the rationale for `self` instead of `&mut self` again?
[22:36:15] <aturon> reem: yeah...
[22:36:38] <sfackler> acrichto: it means we can move the result out in finish
[22:36:42] <sfackler> though it is cloneable
[22:37:07] <acrichto> I think it's also copy?
[22:37:24] <reem> aturon: It seems like we've both come to about the same API as the next step forward - do you think I should finish this RFC and file now or wait until the dust has settled a bit?
[22:38:01] <sfackler> I mostly made it take self by value because it makes it harder to use the api "incorrectly"
[22:38:20] <aturon> reem: i'd say wait for now, it'll be a while before we're ready to do this i suspect. in particular we'd want a buffer type to be pretty widely used in crates.io to have sufficient confidence
[22:38:53] <acrichto> sfackler: true
[22:38:56] <reem> I was going to take a slightly modify the traits from carllerche's bytes crate
[22:39:10] <reem> but sure, it makes sense to let them bake in the cargoverse 
[22:39:18] <sfackler> dont' feel all that strongly about it though
[22:39:33] <acrichto> sfackler: other minor points may be debug_tuple is actually meant for tuple structs, and then the structs have methods called 'field' where the collections have 'entry'
[22:39:38] <sfackler> using &mut self does make it a bit less painful to use in a non-chained fashion
[22:39:44] <acrichto> not sure if that means they should be called the same thing, just a point of note :)
[22:39:57] <acrichto> sfackler: hm true, and I think it would make fold() less good
[22:40:15] <sfackler> yeah, though fold use would go away with the addition of entries
[22:41:31] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[22:41:32] <acrichto> true
[22:41:47] <acrichto> sfackler: I guess I feel that we may not be ready to stabilize for beta
[22:41:51] <acrichto> but perhaps in the next cycle
[22:43:38] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[22:45:28] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[22:45:53] <sfackler> is the next cycle 1.1 or beta2?
[22:46:35] <acrichto> what lands in the next cycle will become part of 1.1
[22:46:40] <sfackler> ok
[22:46:52] <sfackler> i guess i'll pull it into an external crate for now
[22:47:49] <sfackler> hmm, think we could get extention trait methods to override unstable inherent methods?
[22:48:16] <acrichto> brson: hm, the current linux/mac nightlies are out of sync
[22:48:33] <acrichto> brson: oops, false alarm
[22:48:36] <acrichto> different build dates, same rev
[22:49:14] *** kimundi is now known as zz_kimundi
[22:49:28] <sfackler> acrichto: will unstable methods be stripped entirely from stable builds or will they just force an error?
[22:50:00] <acrichto> sfackler: they'll just force an error
[22:50:09] <acrichto> oh dear...
[22:50:17] <acrichto> that may dampen the plans for your crate :(
[22:50:29] <sfackler> I mean i can just have explicit constructors for them
[22:50:46] <sfackler> it just means that it won't be as simple as "add DebugBuilderExt;" to the top of the module
[22:50:58] <acrichto> true
[22:51:00] <sfackler> er, "add "use DebugBuilderExt;" to the top of the module"
[22:51:30] *** Joins: xilec (Mibbit@moz-g6k.oht.161.46.IP)
[22:52:18] <sfackler> also bloats the dist size a bit with stuff that can't actually be used
[22:52:29] <sfackler> might be too confusing to just leave out unstable stuff though
[22:54:34] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[22:57:54] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[22:59:38] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[23:01:05] *** Quits: pczarn (piotr@moz-9un7t9.izacom.pl) (Ping timeout: 121 seconds)
[23:02:36] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[23:06:01] *** Joins: fuogoxsx (Mibbit@moz-juv.9o3.252.72.IP)
[23:08:05] *** Quits: jdm (jdm@moz-b0n4il.ckpj.s0pt.0450.2001.IP) (Quit: )
[23:13:24] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[23:14:11] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[23:14:53] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[23:15:42] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[23:17:21] <acrichto> brson: did the linux builder image change recently?
[23:18:25] <brson> acrichto: i do not think so
[23:18:43] <acrichto> grr I wanted something easy to investigate
[23:18:51] <brson> acrichto: what's wrong?
[23:19:19] <acrichto> http://buildbot.rust-lang.org/builders/cargo-linux-32/builds/1055/steps/compile/logs/stdio
[23:19:23] <acrichto> but oh wait I see the problem
[23:19:26] <acrichto> /usr/bin/ld: cannot find -lcurl:static
[23:19:43] <cmr> acrichto: https://github.com/rust-lang/rust/pull/23874 r? p=1
[23:19:59] *** Quits: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de) (Ping timeout: 121 seconds)
[23:20:32] <acrichto> cmr: hm, maybe just revert the whole commit in that case?
[23:20:43] <acrichto> I'm fine not building dev docs, just wanted to make sure we kept building facade docs
[23:21:34] <cmr> acrichto: it still has the logic for not building COMPILER_DOC_CRATES
[23:21:47] <acrichto> oh right
[23:26:42] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[23:28:46] <richo> cmr: I only skimmed your patch this morning, but it looked like it won't build compiler docs even when building from a checkout? Is that intentional?
[23:29:11] <cmr> richo: it is intentional. that's what the configure flag is for
[23:29:18] <cmr> (and why it was marked [breaking-change])
[23:29:23] <brson> here's another run of yesterday's betas with some fixes to the build logic https://gist.github.com/brson/1af610fbe612ddda6482
[23:29:36] <brson> 54 successful bulids
[23:30:08] <richo> sure. my question is mostly because I can't think of a reason to be building rust from source unless you are interested in poking it's internals. (given that nightlies exist)
[23:30:27] <richo> so I Was thinking defaulting that flag to yes for a checkout and opting out for snaps that will be distributed
[23:31:28] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[23:32:13] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[23:32:46] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[23:36:15] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Ping timeout: 121 seconds)
[23:36:15] <aturon> brson: almost 10% success rate :)
[23:37:30] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[23:37:47] <reem> brson: I bet a scan for definitely-unstable features like plugin would turn up interesting results
[23:38:06] <acrichto> brson: what cargo is beta pinned to?
[23:38:14] <acrichto> brson: it looks like it's not doing - => _ translation yet
[23:38:29] <brson> acrichto: 3/17
[23:38:37] <acrichto> yeah that'd do it
[23:38:45] <acrichto> you may want to update to the most recent
[23:38:50] <brson> ok
[23:38:59] <freebroccolo> aturon: so there's the rose tree style example that I posted about for the overflow thing. I'm using it in actual code here: https://github.com/freebroccolo/ackermann.rs/blob/master/src/node.rs Originally I wasn't using a static lifetime for the Cow part though…
[23:39:19] *** nrc is now known as nrc|afk
[23:40:07] <freebroccolo> I would like to be able to have Clone for node but it's a problem with the blanket impl… haven't been able to find a clean way to work around it
[23:41:15] <Gankro> aturon: pong
[23:41:17] <freebroccolo> aturon: this was without the static lifetime: https://github.com/freebroccolo/ackermann.rs/blob/31266e43c892c5f4d2208c2a68d292d609c84c03/src/node.rs#L12-L20
[23:41:57] <brson> making another beta build
[23:42:17] <aturon> freebroccolo: hm ok, and that point is it's crucial for you that ToOwned make a "deeply owned" object?
[23:42:32] <aturon> Gankro: hey, we were discussing something about assoc items, and i wanted your input
[23:42:43] <Gankro> Sure
[23:42:48] <aturon> Gankro: for a long time the intent was that in a trait/impl block, all items would be in scope
[23:43:02] <aturon> Gankro: meaning that you wouldn't have to write Self::Type, but also that all methods would be available as functions
[23:43:17] <aturon> I think you were a strong proponent of this?
[23:43:30] <Gankro> It certainly *sounds* ergonomic
[23:43:54] <aturon> so, there are a couple of concerns. for one, importing all the methods as UFCS-style functions is a bit... weird
[23:43:59] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[23:44:05] <aturon> but importing just the types would be inconsistent
[23:44:18] <Gankro> My main concern is never having to use <Self as Foo>::Bar syntax
[23:44:20] <aturon> the current setup means you use self.method() for methods, Self::Type for types
[23:44:24] <aturon> ok
[23:44:35] <freebroccolo> aturon: actually I wasn't sure on that part of the design, whether it should be a deep ToOwned all the way to the leaves or just up to the next node.… I think potentially a shallow version would be okay
[23:44:44] <aturon> Gankro: it's still required in some corner cases, but mostly gone
[23:45:00] <freebroccolo> otoh, I'm thinking about switching to something like boxed iterators anyway to avoid latency during creation so maybe it's a moot point…
[23:45:00] <Gankro> aturon: Yeah I'm fine with Legit Ambiguities requiring it
[23:45:10] <aturon> Gankro: so, we were thinking of leaving the scoping rules as-is, and perhaps could later add an explicit `use` for traits/impl blocks that you can use selectively for the Worst Offenders 
[23:45:38] <aturon> freebroccolo: right, so the behavior of to_owned presumably only matters if you stick the whole object into a Cow
[23:45:59] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[23:46:10] <aturon> freebroccolo: but it sounds like just filtering to 'static might not be enough
[23:46:50] <Gankro> aturon: Also always want bounds to add more things in scope. So `where Self::Item: Iterator, Self::Item::Item: Deref, Self::Item::Item:Target: Clone;` should work.
[23:47:29] <freebroccolo> aturon: so one of the reasons it's Cow is because it uses a lookup table and references to share codes for fast creation… see: https://github.com/freebroccolo/ackermann.rs/blob/master/src/statics.rs (this suffices to code all of u64)
[23:47:31] <aturon> Gankro: yes, that should in principle work, modulo implementation gaps
[23:48:07] <Gankro> Self:: itself is fairly inoffensive
[23:48:14] <Gankro> I just hate <> syntax
[23:48:17] <aturon> Gankro: ok, great. thanks for the feedback
[23:48:27] *** Joins: WindowsBunny1 (Peter@moz-ubruqj.east.verizon.net)
[23:48:35] <aturon> freebroccolo: unfortunately i have to run now, but thanks for the links, i'll dig into it later on
[23:48:52] <freebroccolo> np
[23:48:52] <cmr> aturon: I agree with Gankro, I'm fine with the Self:: prefix.
[23:49:04] <aturon> nrc|afk: nmatsakis: for the record, well, what cmr just said ^
[23:49:13] <reem> I also like Self::
[23:49:16] <aturon> seems like we have consensus
[23:49:18] <cmr> It's not ideal but it seems like the name resolution is a mess.
[23:49:21] *** Quits: WindowsBunny (Peter@moz-7f2st1.east.verizon.net) (Ping timeout: 121 seconds)
[23:49:35] <reem> and agree with Gankro about <>
[23:50:06] <reem> Self:: is actually helpful in making things explicit, I can imagine confusing cases without it
[23:50:51] <Gankro> generics are a nightmarish hellscape regardless, really
[23:51:04] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[23:51:05] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[23:51:10] <reem> HashMap::get says hello :P
[23:51:16] <Gankro> aturon: what's the status on https://github.com/rust-lang/rfcs/pull/839 ?
[23:51:41] <aturon> Gankro: i think we're basically ready to accept with Clone
[23:51:52] <aturon> (hasn't been a priority since it's backcompat, can try to move on it)
[23:52:21] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[23:52:52] <reem> I would still prefer Copy only, especially since we have `.cloned()`
[23:52:54] <Gankro> aturon: It affects what we do to e.g. push_all or whatever
[23:53:21] <Gankro> reem: Also, closure-y fns say hello: http://doc.rust-lang.org/std/iter/trait.Iterator.html#tymethod.filter
[23:53:27] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[23:53:42] <reem> eww
[23:53:57] <reem> rustdoc really needs to stop display with <Self as X> syntax
[23:54:34] <Gankro> And we also need to teach it to not mix FnMut and FnOnce when you're just using FnMut
[23:55:19] <reem> If only we had HKT... pub trait Cloned { fn self<T>(self: Self<&T>) -> Self<T> }
[23:55:31] <reem> ugh, fn cloned* sorry
[23:55:57] <scott> rustdoc is fine if you go to core: http://doc.rust-lang.org/core/iter/trait.Iterator.html#method.filter
[23:56:11] <scott> I always find myself rewriting std to core to get readable docs
[23:56:24] <cmr> Yeah, xcrate it needs to go through metadata, which is a trainwreck for multiple reasons.
[23:56:32] <huon> reem: wouldn't work for std::slice::Iter
[23:56:55] <Gankro> cmr: you were planning an overhaul soon eh?
[23:57:03] <reem> huon: it would somehow get it through Iterator .cloned()
[23:57:30] * reem shrugs, this is very hypothetical
[23:57:44] <huon> unfortunately the return type isn't/can't be Self
[23:57:47] <cmr> Gankro: I'm still thinking about it, but probably not for 1.0
[23:58:00] <Gankro> cmr: What's the plan for 1.0?
[23:58:02] <reem> We could use ToOwned for this today
[23:58:08] <cmr> Gankro: ducktape and superglue.
