[00:00:00] <aatch> I decided that the standard way was too error prone
[00:00:09] <enticeing> for some reason i kept thinking that i could only have one () :P
[00:01:03] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[00:03:52] <pcwalton> who wants to review a 6,000 line PR?
[00:04:01] <graydon> what does it do?
[00:04:11] <pcwalton> sounds like you volunteered
[00:04:13] <graydon> I'm always up for some misery and terror
[00:04:51] <pcwalton> graydon: r? https://github.com/mozilla/rust/pull/6201
[00:05:01] <pcwalton> makes the serializer use INHTWAMA
[00:05:07] <pcwalton> and removes mutable fields from it
[00:06:03] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[00:07:39] <graydon> ok. I don't quite get what "use INHTWAMA" means. doesn't everyone use it now ... isn't it mandatory-like?
[00:07:47] <pcwalton> it uses mut fields
[00:08:00] <graydon> I see. so "use INHTWAMA" means "no mut fields" in this sense?
[00:08:02] <pcwalton> so I removed that and that required changing to &mut self
[00:08:09] <graydon> that I'd expect, yes
[00:08:13] <pcwalton> and changing to &mut self makes &self affine
[00:08:14] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[00:08:17] <aatch> enticeing, bitmask fields in requests are [(FIELD,VALUE)], it gets converted into the right format by the wrapper. Which includes sorting it so you can't accidentally mis-order the values array
[00:08:19] <pcwalton> so that required threading &mut self around everywhere in an affine fashion
[00:08:24] <pcwalton> which resulted in... a 6,000 line patch!
[00:08:27] <graydon> woah
[00:08:35] <graydon> that "makes self affine" step surprises me
[00:08:37] <graydon> say a touch more?
[00:08:40] <pcwalton> &mut self is affine
[00:08:43] <pcwalton> &mut anything
[00:08:56] <pcwalton> to enforce the restriction that there can only be one mutable reference to something
[00:08:57] <graydon> affine in the sense of ... single owner when the & is taken?
[00:09:03] <pcwalton> just the pointer itself is affine
[00:09:09] <pcwalton> let x: &mut something; let y = x; // x is dead
[00:09:23] <graydon> oh. of course. I'm just slow and didn't realize that.
[00:09:32] <graydon> (because it really has been _that long_ since I've written any substantial rust code)
[00:09:33] <graydon> ok
[00:09:34] <pcwalton> I didn't either
[00:09:40] <rntz_> it's also true that it expects the thing to have a single owner when the & is taken, right?
[00:09:50] <graydon> ok, all makes sense.
[00:09:55] <rntz_> (at least, "single owner" for "owner" meaning "thing that can mutate it")
[00:09:55] <pcwalton> rntz_: yup. borrow checker enforces that.
[00:10:08] <rntz_> pcwalton: uh, isn't it enforced dynamically due to INHTWAMA?
[00:10:13] <aatch> I accept a small performance hit when the payoff is a signficantly more robust API
[00:10:16] <rntz_> or did that get nixed, or do I misunderstand something?
[00:10:19] <graydon> I have to get a little fresh air and I'll review this ASAP. looks pretty predictable given that.
[00:10:21] <pcwalton> enforced by the borrow checker through a combination of static and dynamic checks :)
[00:10:24] <rntz_> ok.
[00:10:40] <rntz_> to me the "borrow checker" means "the typechecking pass". I guess I'll have to get used to the new meaning :)
[00:11:36] *** Quits: rntz (daedalus@moz-7E35218B.cmdnnj.fios.verizon.net) (NickServ (GHOST command used by rntz_))
[00:11:38] *** rntz_ is now known as rntz
[00:11:39] *** Joins: rntz_ (daedalus@moz-7E35218B.cmdnnj.fios.verizon.net)
[00:12:46] *** Joins: z0w0 (zack@moz-CF5E62C9.lns4.woo.bigpond.net.au)
[00:12:55] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:14:44] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:15:26] <aatch> "5,470 additions and 646 deletions."
[00:15:29] <aatch> Dear god
[00:16:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:17:00] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Input/output error)
[00:18:16] *** Joins: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[00:18:38] <xenocons> rusti: {}
[00:18:47] <xenocons> rusti: (),{}
[00:18:48] <rusti> foo.rs:5:11: 5:12 error: expected `;` or `}` after expression but found `,`
[00:18:48] <rusti> foo.rs:5          (),{}
[00:18:48] <rusti>                     ^
[00:18:52] <xenocons> rusti: (),{};
[00:18:53] <rusti> foo.rs:5:11: 5:12 error: expected `;` or `}` after expression but found `,`
[00:18:53] <rusti> foo.rs:5          (),{};
[00:18:53] <rusti>                     ^
[00:18:57] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[00:18:59] <xenocons> rusti: ((),{});
[00:19:07] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[00:19:27] <xenocons> rusti: ((),{()},);
[00:19:38] <xenocons> rusti: ((),{()1},);
[00:19:38] <rusti> foo.rs:5:16: 5:17 error: expected `;` or `}` after expression but found `1`
[00:19:38] <rusti> foo.rs:5          ((),{()1},);
[00:19:38] <rusti>                          ^
[00:19:44] <xenocons> rusti: ((),{(1)},);
[00:19:54] <xenocons> hrm
[00:19:59] <xenocons> rusti: ((2),{(1)},);
[00:20:16] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[00:20:40] <fread2281> rusti: let a = ((2),{(1)},); a
[00:20:41] <rusti> (2, 1)
[00:20:53] <fread2281> rusti: let a = ((2),{(1, 4)},); a
[00:20:55] <rusti> (2, (1, 4))
[00:21:01] <fread2281> rusti: let a = ((2),{(1, 4), (5)},); a
[00:21:03] <rusti> foo.rs:5:29: 5:30 error: expected `;` or `}` after expression but found `,`
[00:21:03] <rusti> foo.rs:5          let a = ((2),{(1, 4), (5)},); a
[00:21:03] <rusti>                                       ^
[00:21:18] <xenocons> you need to use let binding for that, i see
[00:21:42] <xenocons> rusti: let a = ( (+)(1,2) ); a
[00:21:43] <rusti> foo.rs:5:20: 5:21 error: unexpected token: `+`
[00:21:43] <rusti> foo.rs:5          let a = ( (+)(1,2) ); a
[00:21:43] <rusti>                              ^
[00:21:53] *** Joins: rumpler (Mibbit@moz-571E3FF8.range109-157.btcentralplus.com)
[00:22:09] * xenocons wonders how to evaluate s-expr style in rust
[00:22:39] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[00:22:43] <fread2281> xenocons: you could probably do it with macros, but we don't have s-exprs yet
[00:23:00] <bjz> I don't think we will
[00:23:07] <xenocons> thats fine, i dont mind too much
[00:23:14] <xenocons> there is probably some hacks anyway
[00:23:32] <xenocons> dont know how to make a function return a function yet
[00:23:44] <aatch> bjz, though an S-expr syntax extension (when they can be user-defined and loaded) would be feasible
[00:24:00] <xenocons> so you could have an operator as a function that returns a function, thatd be close to getting s-exprs to work right
[00:24:18] <aatch> sexpr!( (now im (a lisp!) ))
[00:24:30] <xenocons> heh
[00:25:01] <bjz> rusti: (|x||y| x + y)(1, 2)
[00:25:03] <rusti> foo.rs:5:12: 5:14 error: expected `,` but found `||`
[00:25:03] <rusti> foo.rs:5          (|x||y| x + y)(1, 2)
[00:25:03] <rusti>                      ^~
[00:25:15] <aatch> since the idea is to have syntax extensions essentially be compiler plugins
[00:25:31] *** Quits: rumpler (Mibbit@moz-571E3FF8.range109-157.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:25:45] <bjz> rusti: let f = |x| |y| x + y; f(1, 2)
[00:25:47] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/MfJU
[00:26:15] <bjz> rusti: let f = |x:int| |y:int| x + y; f(1, 2)
[00:26:16] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/JJMi
[00:26:24] <fread2281> rusti: let f = |x, y|{x + y}; f(1, 2)
[00:26:26] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jJZg
[00:26:47] <fread2281> rusti: let f = |x:int, y:int|{x + y}; f(1, 2)
[00:26:49] <rusti> 3
[00:27:10] <fread2281> rusti: |x:int, y:int|{x + y}(1, 2)
[00:27:11] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/OJCF
[00:27:23] <xenocons> rusti: ({let x = |a,b| {a + b}; x})
[00:27:25] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/bdVD
[00:27:25] <xenocons> is what we need
[00:27:35] <xenocons> should be able to return the function 
[00:27:36] <aatch> rusti: (|x,y| x + y)(1u, 2u)
[00:27:37] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/HEdg
[00:27:46] <fread2281> rusti: (|x:int, y:int|{x + y};)(1, 2)
[00:27:47] <bjz> rusti: let f = |x:int| |y:int| x + y; (f(1))(2)
[00:27:48] <rusti> foo.rs:5:31: 5:32 error: expected `)` but found `;`
[00:27:48] <rusti> foo.rs:5          (|x:int, y:int|{x + y};)(1, 2)
[00:27:48] <rusti>                                         ^
[00:27:48] <rusti> 3
[00:27:50] <xenocons> hmm wait
[00:27:57] <bjz> rusti: let f = |x:int| |y:int| x + y; (f(1))(2)
[00:27:58] <rusti> 3
[00:27:59] <fread2281> rusti: (|x:int, y:int|{x + y})(1, 2)
[00:28:01] <rusti> 3
[00:28:01] <bjz> heh
[00:28:05] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:28:11] <xenocons> damnit its getting in my way
[00:28:20] <bjz> rusti: let f = |x| |y:| x + y; (f(1))(2)
[00:28:21] <rusti> foo.rs:5:24: 5:25 error: expected type, found token BINOP(OR)
[00:28:21] <rusti> foo.rs:5          let f = |x| |y:| x + y; (f(1))(2)
[00:28:21] <rusti>                                  ^
[00:28:26] <xenocons> oh you can seperate lambda arguments like that?
[00:28:30] <bjz> rusti: let f = |x| |y| x + y; (f(1))(2)
[00:28:30] <xenocons> so you dont have to tuple them
[00:28:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/CBGd
[00:28:41] <aatch> bjz, did you just do currying?
[00:28:45] *** Quits: igork (igork@moz-408E26BD.broadband.corbina.ru) (Quit: igork)
[00:29:01] <fread2281> rusti: (|x:int, y:int|x + y)(1, 2)
[00:29:02] <rusti> 3
[00:29:18] <bjz> rusti: let f: fn(int) -> fn(int) -> int = |x| |y| x + y; (f(1))(2)
[00:29:19] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/CHSW
[00:29:21] <aatch> let f = |x| |y:| x + y; let g = (f(1)); g(2)
[00:29:22] <strcat> rusti: (|x, y| x + y)(5i, 2)
[00:29:23] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/beXc
[00:29:32] <fread2281> rusti: (|x:int||y:int|x + y)(1)(2)
[00:29:32] <aatch> rusti: let f = |x| |y:| x + y; let g = (f(1)); g(2)
[00:29:33] <strcat> silly buggy closures
[00:29:33] <rusti> foo.rs:5:24: 5:25 error: expected type, found token BINOP(OR)
[00:29:33] <rusti> foo.rs:5          let f = |x| |y:| x + y; let g = (f(1)); g(2)
[00:29:33] <rusti>                                  ^
[00:29:33] <rusti> foo.rs:5:16: 5:18 error: expected `,` but found `||`
[00:29:33] <rusti> foo.rs:5          (|x:int||y:int|x + y)(1)(2)
[00:29:33] <rusti>                          ^~
[00:29:40] <fread2281> rusti: (|x:int| |y:int|x + y)(1)(2)
[00:29:42] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/MAaC
[00:29:42] <aatch> rusti: let f = |x| |y| x + y; let g = (f(1)); g(2)
[00:29:43] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/BNXg
[00:29:46] <aatch> lo
[00:29:49] <bjz> rusti: let f: &fn(int) -> &fn(int) -> int = |x| |y| x + y; (f(1))(2)
[00:29:50] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/QVii
[00:29:55] <strcat> closures don't infer types 100% correctly
[00:30:00] <strcat> I've run into a bunch of times
[00:30:10] <aatch> rusti: let f = |x:int| |y:int| x + y; let g = (f(1)); g(2)
[00:30:11] <rusti> 3
[00:30:16] <aatch> There we go
[00:30:21] <bjz> rusti: let f = |x:int| |y:int| x + y; (f(1))(2)
[00:30:22] <rusti> 3
[00:30:34] <bjz> rusti: let f = |x:int| |y:int| x + y; f(1)(2)
[00:30:35] <rusti> 3
[00:30:37] <fread2281> rusti: (|x| |y| x + y )(1)(2)
[00:30:38] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jMcD
[00:30:41] <aatch> That is surprisingly nice way to implement basic currying.
[00:30:51] <strcat> if type inference worked ;p
[00:30:57] <bjz> rusti: (|x:int| |y:int| x + y)(1)(2)
[00:30:59] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/VbPI
[00:31:02] <fread2281> rusti: (|x:int| |y:int|x + y)(1)
[00:31:04] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/CULg
[00:31:17] <aatch> strcat, eh, I can live with type hints on the arguments
[00:31:24] <xenocons> rusti: let f = |x:(fn T -> fn T)| { x }
[00:31:25] <rusti> foo.rs:5:24: 5:25 error: expected `(` but found `T`
[00:31:25] <rusti> foo.rs:5          let f = |x:(fn T -> fn T)| { x }
[00:31:25] <rusti>                                  ^
[00:31:29] <strcat> aatch: not so fun with generic code
[00:31:37] <strcat> it's a bug
[00:31:41] <bjz> yup
[00:32:02] <aatch> strcat, fair enough. But I did say "basic"
[00:32:08] <bjz> should note these down
[00:32:21] <strcat> bjz: well I have a bug report with the closure issue
[00:32:21] <bjz> rusti: (|x| |y| x + y)(1)(2)
[00:32:22] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/YVWh
[00:32:32] <bjz> that should work
[00:32:41] <dymk> this is all the info I can get make to give me, is this enough for an issue? http://pastebin.mozilla.org/2369966
[00:32:44] <fread2281> rusti: let f = |x:(fn(T) -> fn(T))| { x }
[00:32:44] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/UFNi
[00:32:49] <strcat> it's not entirely related to closures I guess
[00:32:51] <strcat> happens without them
[00:33:09] <fread2281> rusti: let f = |x:(fn(T) -> fn(T))| { x };
[00:33:10] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/KFVE
[00:33:54] <aatch> dymk, did you try following it's instructions?
[00:34:11] <fread2281> rusti: (|x:int|{|y:int|x+y})(1)(2)
[00:34:13] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/TgaP
[00:34:24] <dymk> aatch: yes, that's with RUST_LOG=rustc=1
[00:34:25] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[00:34:54] <aatch> dymk, have RUST_LOG=rustc=1,::rt::backtrace
[00:35:18] <dymk> make had a hard time running that, I'll try it again though
[00:35:30] <dymk> oh, no space after comma
[00:36:21] <bjz> rusti: fn foo(x:int) -> &fn() -> int { || x + 1 } foo(3)()
[00:36:22] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/WCFD
[00:36:43] <bjz> bleh
[00:36:54] <bjz> rusti: fn foo(x:int) -> @fn() -> int { || x + 1 } foo(3)()
[00:36:56] <rusti> 4
[00:37:24] <bjz> rusti: fn foo<'a>(x:int) -> &'a fn() -> int { || x + 1 } foo(3)()
[00:37:26] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/GMLA
[00:37:54] <bjz> rusti: fn foo<'a>(x:int) -> &'a fn() -> int { &'a || x + 1 } foo(3)()
[00:37:55] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/eYXh
[00:38:30] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:38:50] <fread2281> rusti: (|&'a x:int|{|&'a y:int|x+y})(1)(2)
[00:38:52] <rusti> foo.rs:5:15: 5:16 error: expected `:` but found `x`
[00:38:52] <rusti> foo.rs:5          (|&'a x:int|{|&'a y:int|x+y})(1)(2)
[00:38:52] <rusti>                         ^
[00:39:10] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[00:39:24] <bjz> rusti: fn foo<T:Num>(x:T) -> @fn(T) -> int { |y| x + y } foo(3)(4)
[00:39:25] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/WJJM
[00:39:28] <fread2281> rusti: (|x: &'a int|{|&'a y:int|x+y})(1)(2)
[00:39:29] <rusti> foo.rs:5:28: 5:29 error: expected `:` but found `y`
[00:39:29] <rusti> foo.rs:5          (|x: &'a int|{|&'a y:int|x+y})(1)(2)
[00:39:29] <rusti>                                      ^
[00:39:38] <fread2281> rusti: (|x: &'a int|{|y: &'a int|x+y})(1)(2)
[00:39:39] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ieSC
[00:40:07] <bjz> rusti: fn foo<T:Num>(x:T) -> @fn(T) -> T { |y| x + y } foo(3)(4)
[00:40:09] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/KbQU
[00:40:17] <fread2281> rusti: (&'a |x: &'a int|{|y: &'a int|x+y})(1)(2)
[00:40:18] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/cjiR
[00:40:33] <fread2281> rusti: (&'a |x: &'a int|{&'a |y: &'a int|x+y})(1)(2)
[00:40:35] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/hbLb
[00:40:54] <z0w0> brson: WRT abstracting the version number in rust, will it ever be possible to use macros within attributes? like #[link(vers = cfg!("vers"))];
[00:40:59] *** Quits: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com) (Quit: bleibig)
[00:41:13] <fread2281> rusti: (&'a |x: &'a int|{&'a |y: &'a int|(*x)+(*y)})(1)(2)
[00:41:14] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jBTc
[00:41:39] <fread2281> rusti: (&'a |x: &'a int|{&'a |y: &'a int|(*x)+(*y)})*(1)(2)
[00:41:40] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jXMU
[00:42:48] <fread2281> rusti: (&'a |x: &'a int|{&'a |y: &'a int|(*x)+(*y)})(1)(2)
[00:42:51] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/KSWP
[00:43:09] <fread2281> rusti: ('a |x: &'a int|{&'a |y: &'a int|(*x)+(*y)})(1)(2)
[00:43:10] <rusti> foo.rs:5:13: 5:14 error: expected `:` but found `|`
[00:43:10] <rusti> foo.rs:5          ('a |x: &'a int|{&'a |y: &'a int|(*x)+(*y)})(1)(2)
[00:43:10] <rusti>                       ^
[00:43:14] <brson> holy wtf
[00:43:21] <z0w0> ?
[00:43:38] <brson> sorry, #rust looks like linenoise
[00:43:54] <aatch> fread2281, can you stop spamming the channel please?
[00:43:55] <z0w0> yeah
[00:44:13] <fread2281> aatch: right
[00:44:15] <strcat> rusti accepts /query btw
[00:44:38] <fread2281> strcat: yay
[00:45:01] <brson> z0w0: potentially, yes. for what you've written there we would need macros that expand to literals
[00:45:24] <brson> i could use some help hacking trans. it's been a long time
[00:45:30] <brson> I have this function https://gist.github.com/brson/5506496
[00:45:39] <brson> and I need to emit a call to drop v
[00:45:45] <brson> before the visit glue returns
[00:47:14] <brson> i guess i just need to call_tydesc_glue_full with the right arguments
[00:49:20] <brson> or I guess it needs to be a cleanup
[00:50:13] <nmatsakis> brson: what are you doing?
[00:50:52] <brson> nmatsakis: the visitor glue leaks it's argument
[00:50:58] <graydon> pcwalton: is that all this patch really does?
[00:50:58] <brson> i am trying to make it not do that
[00:51:13] <pcwalton> graydon: yes
[00:51:15] <pcwalton> that's all it does
[00:51:17] <brson> nmatsakis: it doesn't show up in the tests because the box annihilator doesn't care about leaks
[00:51:28] <nmatsakis> brson: I see
[00:51:30] <brson> nmatsakis: but it is completely thwarting my work
[00:51:43] <nmatsakis> brson: one sec, I think you want drop_ty() or something
[00:51:54] <nmatsakis> brson: give me a sec to look up the relevant names
[00:52:06] <aatch> I was just thinking that. glue.rs:67
[00:52:06] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[00:52:27] <graydon> pcwalton: r+ 
[00:52:31] <nmatsakis> brson: glue::drop_ty(bcx, v, object_ty)
[00:52:35] <nmatsakis> brson: I thnk
[00:53:03] <nmatsakis> brson: maybe a Load() :)
[00:53:07] <brson> nmatsakis: and that will run during unwinding too?
[00:53:19] <nmatsakis> brson: no, you'd want to add a cleanup
[00:53:31] <nmatsakis> brson: in that case, you will need a new scope
[00:54:13] <nmatsakis> brson: base::with_scope
[00:54:47] <brson> nmatsakis: thanks
[00:55:14] <nmatsakis> brson: let me know if you run into trouble...
[00:55:48] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:56:02] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Client exited)
[00:58:05] <xenocons> i think i just sped up rustc startup time on windows, very trivial
[00:58:33] <xenocons> noticed startup time was lost seemingly searching all my %PATH% in sequential order for the mingw binaries
[00:59:05] <xenocons> dropping libstdc++-6.dll and libgcc_s_dw2-1.dll in the rust bin path helps as that is the very first place an application searches for dlls
[00:59:22] <xenocons> not convinced its noticable enough to think about how to fix
[00:59:26] <aatch> Hey, are method-less traits fine for "tagging" data as a certain type?
[01:00:00] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[01:00:23] <aatch> Basically, I just want to be able to use it as a bound in other traits
[01:00:55] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[01:02:16] <tjc> aatch: seems perfectly good style to me. by doing that you're basically saying "type T has property Foo"
[01:04:14] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[01:04:14] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[01:04:15] <aatch> tjc, yep. I'm hoping that people will be able to do stuff like fn between<T:Instant>(start:T, end:T, val:T) -> bool;
[01:04:27] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[01:04:37] <aatch> And be able to construct other DateTime objects with them.
[01:04:57] <aatch> (obviously a trivial example)
[01:05:04] <tjc> ure
[01:05:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:05:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/4UzV_Q
[01:05:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:05:06] <tjc> Sure, even
[01:05:17] <tjc> type classes, which traits are based on, can be seen as "predicates on types"
[01:05:27] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[01:06:59] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Ping timeout)
[01:07:32] <dymk> aatch: ah yeah, lots more debugging data now, thanks for the make env vars
[01:07:46] *** Joins: Ralith_ (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:08:18] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: z0w0 (zack@moz-CF5E62C9.lns4.woo.bigpond.net.au) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: catpig (catpig@moz-AE054533.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: ens (chatzilla@A8DBE445.6E8FE3C5.C90F432E.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: cdidd (cdidd@moz-21D399F7.broadband.corbina.ru) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: mixi (mixi@moz-DBD8904A.org) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: heftig (heftig@moz-645AADE2.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: RageOfThou (RageOfThou@moz-CF7139ED.dynamic.telemach.ba) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: kimundi (kimundi@moz-9D3FEC48.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Tad (Tom@moz-2036EE54.kimsufi.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: pcdummy (quassel@moz-CF4CA865.page4me.ch) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: hmax (hmax@moz-53A94453.yandex.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: lerc_ (quassel@121-74-236-56.telstraclear.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: benh (ben@moz-4A0366D2.org) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: kripton (kripton-mo@moz-B2051A72.kripserver.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: DasIch (dasich@moz-756B08B1.clients.your-server.de) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: DanC (connolly@1BF57F76.56AB27A3.6F26FCB4.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: geomyidae__ (uid214@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: jaws (uid2871@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: pascal (pascal@moz-3A678551.pascalj.de) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: n0vember (n0vember@moz-690FFF9D.org) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: sawrubh (uid6719@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: wilfred (uid159@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: vivekg (uid10501@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: gmcabrita (uid4474@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: jc-denton (nils@moz-C5E8B5EA.ethz.ch) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: ion (ion@heh.fi) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Luqman (laden@moz-345B5EBA.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: wycats_ (uid79@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: prudhvi (prudhvi@moz-154A460A.supr.io) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: leod (unchi@moz-F5CD5448.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: companion_cube (simon@moz-F48A362B.cedeela.fr) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: tristram (tristram@moz-C498CC41.eu) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: dju (dju@9F8AFAC.F83511E0.C3FEB593.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: pigoz (pigoz@moz-93D3080C.as5577.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: tef (tef@moz-67B68E00.printf.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: IdolfHatler (idolf@moz-4103EACC.pwnies.dk) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: Raynes (macro@moz-E5F01CE6.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: ssiloti (steve@moz-4B8C4631.oc.oc.cox.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: zq (p@moz-4A6945B7.de) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: fireglow (fireglow@moz-DC22A4B9.firc.de) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: thiez (thiez@moz-BF669398.student.utwente.nl) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: oyiptong (oyiptong@CD2A94.29EC3FEB.F9E1BAE1.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: nass (nass@4F314BB3.5408CE6B.B38D1DE0.IP) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (concrete.mozilla.org gravel.mozilla.org)
[01:08:18] *** Quits: ILyoan (ILyoan@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[01:09:07] *** Joins: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se)
[01:09:07] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[01:09:07] *** Joins: MrFahrenheit (RageOfThou@moz-CF7139ED.dynamic.telemach.ba)
[01:09:07] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[01:09:07] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[01:09:07] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[01:09:07] *** Joins: leod (unchi@moz-F5CD5448.net)
[01:09:07] *** Joins: companion_cube (simon@moz-F48A362B.cedeela.fr)
[01:09:07] *** Joins: dbaupp (Thunderbir@88688F45.D5A1DCF.37681C44.IP)
[01:09:07] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[01:09:07] *** Joins: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[01:09:07] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:09:07] *** Joins: z0w0 (zack@moz-CF5E62C9.lns4.woo.bigpond.net.au)
[01:09:07] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:09:07] *** Joins: catpig (catpig@moz-AE054533.dip0.t-ipconnect.de)
[01:09:07] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[01:09:07] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[01:09:07] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[01:09:07] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[01:09:07] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[01:09:07] *** Joins: ens (chatzilla@A8DBE445.6E8FE3C5.C90F432E.IP)
[01:09:07] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[01:09:07] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[01:09:07] *** Joins: cdidd (cdidd@moz-21D399F7.broadband.corbina.ru)
[01:09:07] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:09:07] *** Joins: mixi (mixi@moz-DBD8904A.org)
[01:09:07] *** Joins: heftig (heftig@moz-645AADE2.dip0.t-ipconnect.de)
[01:09:07] *** Joins: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com)
[01:09:07] *** Joins: kimundi (kimundi@moz-9D3FEC48.dip0.t-ipconnect.de)
[01:09:07] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[01:09:07] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[01:09:07] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[01:09:07] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[01:09:07] *** Joins: hmax (hmax@moz-53A94453.yandex.net)
[01:09:07] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[01:09:07] *** Joins: pcdummy (quassel@moz-CF4CA865.page4me.ch)
[01:09:07] *** Joins: h3r3tic (heretic@moz-8BC3B3DB.se)
[01:09:07] *** Joins: lerc_ (quassel@121-74-236-56.telstraclear.net)
[01:09:07] *** Joins: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[01:09:07] *** Joins: benh (ben@moz-4A0366D2.org)
[01:09:07] *** Joins: kripton (kripton-mo@moz-B2051A72.kripserver.net)
[01:09:07] *** Joins: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP)
[01:09:07] *** Joins: DasIch (dasich@moz-756B08B1.clients.your-server.de)
[01:09:07] *** Joins: DanC (connolly@1BF57F76.56AB27A3.6F26FCB4.IP)
[01:09:07] *** Joins: geomyidae__ (uid214@moz-D8B63698.irccloud.com)
[01:09:07] *** Joins: jaws (uid2871@moz-D8B63698.irccloud.com)
[01:09:07] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[01:09:07] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[01:09:07] *** Joins: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com)
[01:09:07] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[01:09:07] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[01:09:07] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[01:09:07] *** Joins: pascal (pascal@moz-3A678551.pascalj.de)
[01:09:07] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[01:09:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:09:07] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[01:09:07] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[01:09:07] *** gravel.mozilla.org sets mode: +o brson
[01:09:07] *** Joins: n0vember (n0vember@moz-690FFF9D.org)
[01:09:07] *** Joins: sawrubh (uid6719@moz-C944F5EC.irccloud.com)
[01:09:07] *** Joins: wilfred (uid159@moz-C944F5EC.irccloud.com)
[01:09:07] *** Joins: vivekg (uid10501@moz-C944F5EC.irccloud.com)
[01:09:07] *** Joins: gmcabrita (uid4474@moz-C944F5EC.irccloud.com)
[01:09:07] *** Joins: jc-denton (nils@moz-C5E8B5EA.ethz.ch)
[01:09:07] *** Joins: ion (ion@heh.fi)
[01:09:07] *** Joins: Luqman (laden@moz-345B5EBA.csclub.uwaterloo.ca)
[01:09:07] *** Joins: wycats_ (uid79@moz-D8B63698.irccloud.com)
[01:09:07] *** Joins: jihyun (uid7128@moz-D8B63698.irccloud.com)
[01:09:07] *** Joins: prudhvi (prudhvi@moz-154A460A.supr.io)
[01:09:07] *** Joins: ruediger (quassel@moz-C9B8D8D0.org)
[01:09:07] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[01:09:07] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[01:09:07] *** Joins: tristram (tristram@moz-C498CC41.eu)
[01:09:07] *** Joins: dju (dju@9F8AFAC.F83511E0.C3FEB593.IP)
[01:09:07] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[01:09:07] *** Joins: pigoz (pigoz@moz-93D3080C.as5577.net)
[01:09:07] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[01:09:07] *** Joins: tef (tef@moz-67B68E00.printf.net)
[01:09:07] *** Joins: IdolfHatler (idolf@moz-4103EACC.pwnies.dk)
[01:09:07] *** Joins: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP)
[01:09:07] *** Joins: Raynes (macro@moz-E5F01CE6.members.linode.com)
[01:09:07] *** Joins: fireglow (fireglow@moz-DC22A4B9.firc.de)
[01:09:07] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[01:09:07] *** Joins: ssiloti (steve@moz-4B8C4631.oc.oc.cox.net)
[01:09:07] *** Joins: zq (p@moz-4A6945B7.de)
[01:09:07] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[01:09:07] *** Joins: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP)
[01:09:07] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[01:09:07] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[01:09:07] *** Joins: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com)
[01:09:07] *** Joins: oyiptong (oyiptong@CD2A94.29EC3FEB.F9E1BAE1.IP)
[01:09:07] *** Joins: nass (nass@4F314BB3.5408CE6B.B38D1DE0.IP)
[01:09:07] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[01:09:33] <EXetoC> ok, one at a time!
[01:09:33] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:09:36] <aatch> Yup, concrete and gravel had a row
[01:09:43] *** Joins: themgt (themgt@moz-12C18812.dhcp.gnvl.sc.charter.com)
[01:09:50] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[01:10:01] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[01:10:08] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[01:10:15] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[01:10:24] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[01:10:24] *** ChanServ sets mode: +o tjc
[01:10:34] *** Joins: Tad (Tom@moz-2036EE54.kimsufi.com)
[01:11:03] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[01:11:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:11:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0jZ1rw
[01:11:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:11:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:11:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jp-GNA
[01:11:05] <ghrust> 13rust/06auto 14cce97ab 15Luqman Aden: Add test for drop for newtype structs.
[01:11:05] <ghrust> 13rust/06auto 1473733c9 15bors: auto merge of #6195 : luqmana/rust/newtype-drop, r=catamorphism...
[01:11:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:11:07] *** Joins: ILyoan (ILyoan@B4104EBB.3CC170B1.1E14B209.IP)
[01:14:59] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[01:16:19] <nmatsakis> woohoo, libcore builds with dynamic checks!
[01:16:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:17:15] <pcwalton> cool
[01:17:29] <nmatsakis> not libstd though :(
[01:17:33] <brson> gj, niko
[01:17:39] <nmatsakis> but getting there
[01:17:40] <brson> nmatsakis: what dynamic checks are you adding?
[01:17:49] <pcwalton> sounds like @mut dynamic failures are more of a problem than we had hoped? :(
[01:18:05] <nmatsakis> actually I'm pretty happy
[01:18:11] <nmatsakis> there were only like 4 or 5 failures
[01:18:16] <pcwalton> hmm, ok
[01:18:21] <nmatsakis> plus, they're pretty easy to debug
[01:18:26] <nmatsakis> with the checker I added
[01:18:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:18:30] <pcwalton> ok
[01:18:31] <nmatsakis> it tells you the two conflicting lines
[01:18:35] <nmatsakis> usually it's pretty obvious
[01:18:39] <nmatsakis> and a lot of them are due to workarounds 
[01:18:42] <nmatsakis> we added for old borrow checker
[01:18:44] <pcwalton> I guess it's far, *far* easier than memory safety problems in C++
[01:18:51] <pcwalton> or races
[01:19:02] <pcwalton> or NPEs
[01:19:09] <nmatsakis> that is true
[01:19:26] <nmatsakis> the extra debug output is key
[01:19:31] <nmatsakis> without that it's kind of mystifying :)
[01:19:34] <pcwalton> right
[01:19:43] <nmatsakis> I'm going to modify it now so that you get the output
[01:19:48] <nmatsakis> whenever you build without -O
[01:19:53] <nmatsakis> rather than needing an obscure env var
[01:20:00] <pcwalton> -g might be better eventually
[01:20:10] <nmatsakis> yeah, perhaps
[01:20:26] <nmatsakis> well, in any case, I'm going to make it an option for build time
[01:20:33] <strcat> or just --debug, -g is kind of obscure for someone who doesn't use gcc-like stuff
[01:20:53] <nmatsakis> and I think it ought to be on by default :)
[01:21:06] <nmatsakis> (when doing debug-y builds)
[01:21:13] *** Quits: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[01:21:18] <pcwalton> I would like to not even compile debug!() messages unless -g is on
[01:21:35] <pcwalton> because debug!() adds a lot of junk to the asm
[01:21:44] <pcwalton> especially with our extremely inefficient formatting
[01:21:59] <nmatsakis> that's reasonable
[01:22:13] <strcat> it slows down hashmap noticeably, but they can probably just be removed from there
[01:22:15] <pcwalton> fmt!() should never ever add a destructor, IMHO
[01:22:15] <nmatsakis> though man so useful ;)
[01:22:24] <pcwalton> it should be like printf
[01:22:41] <strcat> pcwalton: well I think ToStr should use a Writer, and so should formatting
[01:22:45] <pcwalton> yes
[01:22:49] <strcat> and we should have a Writer impl for strings like python
[01:22:55] <pcwalton> very much so
[01:22:55] <strcat> and vectors
[01:23:02] <pcwalton> I wanted to do that until I got buried in backwards incompatible language changes
[01:23:56] <strcat> ToStr could just be called Show ;p
[01:24:20] <strcat> well, the replacement
[01:24:26] <strcat> to_str() can just be a default method
[01:25:39] <aatch> #[deriving(Show)] would make Haskellers happy
[01:26:17] <tjc> well, we don't need it, everything derives Show by default :-)
[01:26:30] <tjc> except we spell (show whatever) like fmt!("%?", whatever)
[01:27:03] <strcat> tjc: %? isn't really Show though
[01:27:05] <pcwalton> it needs to be
[01:27:06] <strcat> can't make it user-defined
[01:27:09] <pcwalton> printf!("%?", whatever)
[01:27:09] <doy> a show function would be nice though
[01:27:13] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[01:27:20] <tjc> strcat: that's true, it would be a logical thing to do to allow you to override what %? does
[01:27:21] <doy> fmt!("%?", whatever) is really irritating to type
[01:27:27] <doy> and you type it a lot when debugging
[01:27:27] <z0w0> so couldn't you make #[deriving(Show)] just be show() -> ~str { fmt!("%?", self) }
[01:27:31] <strcat> tjc: well I like %? for debugging
[01:27:35] <pcwalton> maybe we could just make one-argument printf just call Show
[01:27:53] <tjc> I've suggested before that we should have a format specifier that just calls the to_str method on something
[01:28:00] <tjc> since for some types you want debugging output sometimes, pretty-printing other times
[01:28:00] <strcat> tjc: reuse %s
[01:28:09] <tjc> strcat: I guess that would work
[01:28:29] <strcat> we don't really need ones for specific types
[01:28:34] <strcat> just classes of formatting
[01:28:38] <tjc> Yeah, that's sort of an artifact
[01:28:40] <Jesse> but then it won't warn you if you accidentally use %s when you want something else
[01:28:43] <tjc> of the dark, dark pre-%? ages
[01:28:58] <Jesse> although chances are it will print roughly what you want it to print
[01:29:01] <strcat> rusti: let mut xs = core::hashmap::HashSet::new(); xs.insert(5); xs
[01:29:04] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/DdYi
[01:29:11] <aatch> Would making Show and ToStr lang items worthwhile?
[01:29:17] * strcat likes %? for that ;p
[01:29:57] <tjc> aatch: It would probably be necessary if we made %s call to_str on things, yes
[01:31:32] <aatch> tjc, thought so. I'm also wondering if having the default of types deriving Show, but can be overridden by impl Show for Foo {...} is worth the complexity
[01:31:55] <pcwalton> let's not do that, the implementation is going to be really hard
[01:32:05] <pcwalton> (says the lazy compiler writer)
[01:32:39] * strcat thinks %? for reflection along with %s for calling Show/ToStr is enough
[01:32:54] <strcat> %? is already essentially derived for you
[01:32:58] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[01:33:55] <nmatsakis> fwiw, I'd prefer that %? remain what it is, and %s be Show
[01:34:01] <nmatsakis> which I think is what strcat says
[01:34:09] <nmatsakis> only I'd not call it Show
[01:34:25] <nmatsakis> I find ToStr a much clearer name
[01:34:29] <strcat> nmatsakis: well it would use a Writer instead of allocating ~str
[01:34:29] <aatch> Well it'd be ToStr in that case
[01:34:37] <nmatsakis> strcat: yes.
[01:34:45] <strcat> I guess ToStr is fine
[01:35:01] <bjz> aatch: some of the traits in core::num don't have methods
[01:35:14] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:35:16] <aatch> bjz, I saw that
[01:35:16] <bjz> aatch: unfortunately it doesn't show up on rustdoc
[01:35:24] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:35:32] <nmatsakis> strcat: well, I don't really care what we call it. But point is, I like %? being something you can call on *anything* and you know that what you get reflects exactly the data that is there
[01:35:38] <strcat> nmatsakis: yeah
[01:35:39] <aatch> bjz, Well.. rustdoc sucks anyway
[01:35:42] <strcat> I love %? for debugging
[01:35:44] <dbaupp> I'm currently working on (and am familiar with) the deriving code, so if is a decision is made I can add Show/ToStr it pretty easily :)
[01:35:51] <aatch> I'm not compromising design for it.
[01:35:52] <nmatsakis> I've spent hours debugging bugs because I accidentally wrote a ToStr like "fmt!("x=%d, y=%d", x, x)
[01:36:00] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[01:36:00] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[01:36:09] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[01:36:09] *** Quits: leod (unchi@moz-F5CD5448.net) (Ping timeout)
[01:36:09] *** Quits: Tad (Tom@moz-2036EE54.kimsufi.com) (Ping timeout)
[01:36:09] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Ping timeout)
[01:36:24] <aatch> Uh ok.
[01:36:27] *** Quits: companion_cube (simon@moz-F48A362B.cedeela.fr) (Ping timeout)
[01:36:28] <aatch> Uh oh*
[01:36:29] <bjz> man, we really need to sort out number/string conversions
[01:36:59] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[01:37:10] * bjz has been avoiding it
[01:37:22] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[01:37:31] *** Joins: companion_cube (simon@moz-F48A362B.cedeela.fr)
[01:37:52] <doomlord_> what does it do at the moment, as far as i'm aware you have a to_str() method on most types ? a ToStr trait?
[01:38:21] *** Joins: leod (unchi@moz-F5CD5448.net)
[01:38:33] <doomlord_> i found i could make  a nice print!() macro wrapping that for debug output
[01:38:38] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[01:38:39] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[01:38:52] <strcat> to_str allocates a ~str and it's a custom implementation from the type
[01:38:52] <bjz> brson: should we draft up some spec of what we actually *need* for num->string->num conversions?
[01:39:06] <EXetoC> doomlord_: you mean in order to avoid having to type .to_str()?
[01:39:08] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:39:10] <strcat> fmt!("%?", foo) shows you the underlying data structure of something
[01:39:15] <doomlord_> yes 
[01:39:34] <doomlord_> print!("something:",x,y,z ... )
[01:39:34] <EXetoC> yeah it adds so much typing. I've been thinking about writing such a macro
[01:39:36] <strcat> rusti: let xs = @[]; xs.push(xs); xs
[01:39:37] *** Joins: Tad (Tom@moz-2036EE54.kimsufi.com)
[01:39:37] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/MKhS
[01:39:45] <strcat> rusti: let xs = @mut []; xs.push(xs); xs
[01:39:46] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FJXb
[01:39:54] <strcat> huh
[01:40:32] <strcat> heh at_vec is really sparse
[01:41:00] <doomlord_> http://pastebin.com/U7KknGxh maybe better ways than that?
[01:41:34] <doomlord_> i just had a macro clause for 1,2,3,4,5 args :)
[01:42:07] <brson> bjz: that would be amazing
[01:42:07] <aatch> lol, doomlord_ you can have a matching on an arbitrary repetition
[01:42:24] <bjz> brson: how does it fit in with fmt?
[01:42:26] <doomlord_> i suppose you could make  nary!(method, arg1,arg2,arg3,...) aswell
[01:42:51] <strcat> bjz: they need to output to arbitrary Writers and take input from a Reader, not just strings
[01:42:56] <EXetoC> yop. check out the macro tutorial; it's simple
[01:43:02] <strcat> and strings need to be a Writer/Reader impl
[01:43:17] <strcat> basic formatting can't do allocation
[01:43:30] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[01:43:50] <bjz> strcat: are you familiar with the current string conversion implementation?
[01:44:03] <strcat> no, but I know it allocates ;p
[01:44:17] <bjz> strcat: I'm just wondering whether we alter what's there, or whether we do a full re-write
[01:44:32] <strcat> re-write, I think
[01:44:33] <aatch> rusti: macro_rules! foo { ($($a:$expr),*) => ( ~[$($a),*] ) } foo!(1,2,3,4)
[01:44:34] <rusti> foo.rs:5:26: 5:27 error: expected `(` but found `{`
[01:44:34] <rusti> foo.rs:5          macro_rules! foo { ($($a:$expr),*) => ( ~[$($a),*] ) } foo!(1,2,3,4)
[01:44:34] <rusti>                                    ^
[01:44:51] <aatch> bah
[01:44:55] <aatch> can't be arsed
[01:45:54] <bjz> brson: is the fmt! api going to stay the same? will users be able to create their own precision specifiers?
[01:46:21] <brson> bjz: I don't have any plans personally for fmt! but I think it should be redesigned from scratch to make it efficient and extensible
[01:47:00] <bjz> eh, rabbit holes
[01:47:11] <strcat> brson: http://ix.io/5sh we need this first :)
[01:47:27] <pcwalton> strcat: we have that
[01:47:27] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[01:47:28] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Off for the night)
[01:47:29] <pcwalton> just need implementations
[01:47:30] *** Quits: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com) (Connection reset by peer)
[01:47:34] <pcwalton> see core::rt::io
[01:47:55] <bjz> pcwalton: do you have any plans with fmt?
[01:48:08] <pcwalton> I had plans but they got derailed by backwards incompatible language features, feel free to pick them up
[01:48:14] <bjz> pcwalton: numeric-string conversions?
[01:48:22] <pcwalton> mostly there should just be printf!(), fprintf!(), and maybe fmt!() should change to sprintf!()
[01:48:30] <pcwalton> oh, I hadn't thought about the API
[01:48:37] <pcwalton> more features would be nice...
[01:49:10] <bjz> pcwalton: because what if users whant to be able to allow setting the precision of their types
[01:49:16] <bjz> say for complex numbers
[01:49:19] <pcwalton> that's fine
[01:49:21] <pcwalton> we can add that stuff
[01:49:39] <bjz> http://en.wikipedia.org/wiki/Printf_format_string
[01:49:53] <strcat> C has pretty bad format specifiers though
[01:50:01] <Jesse> %n
[01:50:06] <strcat> might as well copy a more modern implementation
[01:50:06] <bjz> aye
[01:50:21] <bjz> that's why I'm wondering if it needs a re-think
[01:51:07] <bjz> we need to be able to output roman numerals
[01:51:15] <strcat> should get rid of all the type-specific ones
[01:51:28] <strcat> just have %s, then add others with specific formatting stuff
[01:51:39] <strcat> %.3f for *any* float-like thing
[01:52:24] <aatch> Hey, how /should/ trait inheritance work? As in `trait Foo : Bar {...}`
[01:52:38] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:52:50] <strcat> anything that implements Foo has to implement Bar, a Foo trait bound implies Bar and a Foo trait object has all the Bar methods too
[01:52:56] <strcat> if only it worked ;p
[01:53:07] <aatch> So it doesn't work at the moment?
[01:53:13] <bjz> I thought it did
[01:53:14] <strcat> kind of does
[01:53:51] <aatch> I was just making sure that the fact that you can implement `Foo` but not `Bar` and the compiler doesn't seem to care is an issue
[01:53:52] <aatch> and known
[01:54:03] <strcat> aatch: yeah it's broken
[01:54:15] <aatch> I'll pretend it works anyway.
[01:54:27] <aatch> For when it gets fixed
[01:55:27] *** Joins: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com)
[01:57:20] <dymk> Is there any possibility that Rust would allow you to just say "take an object that implements fn(int) -> float" without having to explicitly declare a trait to implement? Eg, static duck typing
[01:57:46] <aatch> dymk, unlikely
[01:58:14] <dymk> bummer, it's such a useful tool when you don't want a ton of one off traits floating around
[01:58:15] <doomlord_> worst case seems to be you have a few traits that are just one function, but i think its common they exist in groups
[01:58:16] *** Joins: brendan (brendaneic@moz-510A3AE.public.wayport.net)
[01:58:43] <doomlord_> and you do seem not to need a trait for 'overloading' on the first parameter 
[01:59:12] <strcat> dymk: if you use function parameters you don't need trait bounds
[01:59:14] *** Quits: dbaupp (Thunderbir@88688F45.D5A1DCF.37681C44.IP) (Ping timeout)
[01:59:33] <xenocons> heh, i just found a bug using rust
[01:59:38] <strcat> the passed in functions can do whatever
[01:59:39] <doomlord_> struct foo {}    impl foo { baz(self); }   struct bar {}    impl bar { fn baz(self);}
[01:59:41] <xenocons> (not in rust)
[02:00:07] <aatch> xenocons, I was going to say, that's not really an achievement at the moment
[02:00:18] <strcat> dymk: fn foo<A, B>(a: A, f: fn(A) -> B) -> B
[02:00:26] <dymk> strcat: I guess so, you'd just end up with a ton of first class functions at every call site of the function
[02:00:31] <doomlord_> at first felt lost losing c++ style overloading but its not so bad, the traits aren't really restrictive and i can see they're helpful
[02:00:45] <strcat> dymk: you'll be able to pass methods as functions without wrapping them eventually
[02:00:48] <xenocons> aatch: haha nope, the bug is in a driver im using to MiTM winapi calls from rust to windows
[02:00:54] <bjz> Go has a Formatter interface: http://www.godock.org/gopkg/fmt/Formatter
[02:00:55] <xenocons> rust crashed it :}
[02:01:08] <bjz> http://www.godock.org/gopkg/1.1/fmt/State
[02:01:47] <dymk> strcat: ah okay
[02:01:54] <bjz> That way you can specify your own
[02:02:10] <bjz> maybe we could do something similar
[02:02:24] <aatch> bjz, I might contribute to that
[02:02:39] <aatch> Since I'm planning on something similar for my date-time stuf
[02:02:47] <bjz> aatch: would be nice to have something slick
[02:02:55] <bjz> aatch: and 'modern'
[02:03:13] <bjz> aatch: http://golang.org/pkg/fmt/
[02:03:43] <aatch> I was going to have a FormatSpec parser, that parses strings using "standard" specificer notation
[02:03:59] <aatch> but the actual meaning is somewhat arbitrary
[02:05:04] <bjz> aatch: I think we could do it nicer with enums
[02:05:23] <aatch> So "%d %20q" => [Format {char:'d', width:None}, Format {char:'q', width:Some(20)}] Or something
[02:05:28] <bjz> aatch: eg. with the 'Flag' http://www.godock.org/gopkg/1.1/fmt/State
[02:06:21] <bjz> yep
[02:06:47] * aatch essentially stole the idea from D
[02:07:28] <bjz> oh, so instead of a flag, take a char?
[02:07:50] <aatch> Well they're chars in State anyway
[02:07:58] <aatch> it just says int
[02:08:08] <aatch> `// Flag returns whether the flag c, a character, has been set.`
[02:08:12] <bjz> ahh
[02:08:20] <bjz> neat
[02:09:07] <bjz> trait Format { ... } ?
[02:09:13] <aatch> since our char type is a UCS character, it would handle essentially any format.
[02:10:00] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[02:10:33] *** Quits: themgt (themgt@moz-12C18812.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[02:10:39] <aatch> bjz, I guess that would work
[02:11:09] *** Joins: dbaupp (Thunderbir@88688F45.D5A1DCF.37681C44.IP)
[02:11:13] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[02:12:20] <bjz> aatch: dunno what the method would be
[02:12:45] <aatch> Well it depends on what level you want to handle it at
[02:12:53] <strcat> nmatsakis: is this a lifetime-related error?
[02:12:54] <strcat> error: mismatched types: expected `&fn(&'a) -> bool` but found `&fn(+:&'a) -> bool` (expected concrete lifetime, but found bound lifetime parameter &)
[02:12:56] <strcat> /home/strcat/projects/rust/src/libcore/hashmap.rs:761         iter::all(|v| !other.contains(v), |f| self.each(f))
[02:13:04] <strcat> I don't really understand what it means.
[02:13:49] <nmatsakis> strcat: what it means is that one of those fns is like this: &fn(&'a) and the othe r&fn<'a>(&'a)
[02:13:50] *** Joins: squiggy (Mibbit@5DA77792.AF13E11D.9995024D.IP)
[02:14:04] <nmatsakis> strcat: now that we have explicit lifetime binder syntax we should really improve the printout
[02:14:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:14:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/jp-GNA
[02:14:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:14:24] <bjz> aatch: trait Format { fn format(&self, width: Option<uint>, precision: Option<uint>, specifier: char) -> ~str; } ?
[02:14:32] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:14:37] <strcat> nmatsakis: oh so it's mad because each uses a region and iter::all's parameter doesn't
[02:14:41] *** Quits: an0nymous (an0nymous@moz-8688491.privacyrepublic.org) (Ping timeout)
[02:14:42] <strcat> I'm not sure why that's a problem though
[02:15:18] <nmatsakis> strcat: iter::all gives you a &fn<'a>(&'a)?
[02:15:28] <aatch> bjz, what kind of types would it be implemented on?
[02:15:48] <strcat> nmatsakis: http://ix.io/5si it's just this
[02:15:55] <Jesse> pcwalton: could you use ":" as the pattern binding operator?
[02:16:01] <bjz> aatch: everything?
[02:16:12] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[02:16:20] <bjz> :P
[02:16:21] <pcwalton> Jesse: ':' is used for type ascription
[02:16:31] <pcwalton> has similar problems to '=' in let
[02:16:35] <aatch> bjz, so you'd have an int know how to print itself in a certain format?
[02:16:41] <brson> nmatsakis: does this look right to you? https://github.com/brson/rust/commit/db6a62c537852a30f030f866598c358d01fb95cd
[02:16:49] <bjz> aatch: aye
[02:17:04] <strcat> nmatsakis: going to try annotating the types manually and see exactly where it goes wrong
[02:17:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:17:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/5spb5Q
[02:17:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:17:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:17:05] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/L-resg
[02:17:05] <ghrust> 13rust/06auto 14544ac62 15gareth: Convert most of rust_run_program.cpp to rust (issue #2674).
[02:17:05] <ghrust> 13rust/06auto 1423e97ae 15gareth: Remove errant trailing whitespace.
[02:17:06] <ghrust> 13rust/06auto 14bd979c1 15gareth: Fix some issues with test_destroy_actually_kills:...
[02:17:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:17:25] <nmatsakis> brson: yes
[02:17:45] <nmatsakis> strcat: ok, I'm just trying to wrap my head around the various higher-order fns involved, one sec :)
[02:17:55] <Jesse> pcwalton: hmm, true. this problem kinda parallels the "ref" vs "&" thing.
[02:17:56] <aatch> bjz, My idea was closer to something that would make it easier to write any function that needs to use "%w %q" for whatever reason. So scanning and printing.
[02:18:06] *** Quits: squiggy (Mibbit@5DA77792.AF13E11D.9995024D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:18:21] *** Quits: enticeing (user@40584768.29B601FE.5037098C.IP) (Client exited)
[02:18:49] <nmatsakis> strcat: so I think the problem is that the iter fn in all takes &fn(T) and not &fn(&T)
[02:19:01] <aatch> bjz, my case is writing analogues to strftime and strptime
[02:19:19] <strcat> nmatsakis: shouldn't T end up being the hashmap's &'self T ?
[02:19:49] <nmatsakis> strcat: I guess I have to see the whole example, but my guess is not necessarily
[02:20:03] <nmatsakis> strcat: I have to go to bed though, happy to go through this with you tomorrow
[02:20:03] <bjz> aatch: hmm
[02:20:09] <strcat> nmatsakis: cya then :)
[02:20:40] <bjz> aatch: if you could do up a gist of your idea that'd be cool
[02:20:50] <aatch> bjz, sure
[02:21:00] <strcat> nmatsakis: /home/strcat/projects/rust/src/libcore/hashmap.rs:761:91: 761:92 error: mismatched types: expected `&fn(&'a) -> bool` but found `&fn(&fn(&'a) -> bool)` (expected argument mode +, but found &&)
[02:21:01] <strcat> :(
[02:21:03] <friggle> can someone explain the syntax in https://mail.mozilla.org/pipermail/rust-dev/2013-May/003989.html please? What is foo@@Foo even supposed to mean? I can't see a reference to @ in match in the tutorial or manual
[02:21:04] *** Joins: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net)
[02:21:13] <strcat> that error is very, very wrong...
[02:21:15] <nmatsakis> strcat: yeah, arg modes -- yuck
[02:21:19] *** Quits: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net) (Quit: Leaving)
[02:21:25] <nmatsakis> oh, hey, rustc built with dynamic checks. neat.
[02:21:27] <nmatsakis> ok, night.
[02:22:06] <strcat> nice
[02:22:20] <bjz> aatch: what do you think of the parameters though?
[02:22:33] <bjz> aatch: the nice thing is you could match on a char
[02:22:40] <strcat> heh
[02:22:52] *** Joins: an0nymous (an0nymous@moz-3ECBAB41.dfri.se)
[02:23:10] <brson> friggle: the first @ binds 'foo' to the value that matches @Foo. @Foo is a pattern, and foo@ is a new binding
[02:23:23] <strcat> /home/strcat/projects/rust/src/libcore/hashmap.rs:761:50: 761:98 error: mismatched types: expected `&fn(&&:&fn(+:&'a) -> bool)` but found `&fn(&fn(&fn(&'a) -> bool))` (expected argument mode +, but found &&)
[02:23:24] <strcat> this error is oh-so-wrong
[02:23:24] <strcat> that's just from adding { }
[02:23:24] <strcat> ..
[02:24:12] <aatch> bjz, seems ok. Though i'd add an extra flags param
[02:24:35] <bjz> aatch: how would that be used?
[02:24:50] <friggle> brson: and its scope is limited to the match block?
[02:24:51] <aatch> it would be for stuff like alignment, padding, etc
[02:25:01] <bjz> aatch: could you give an example of a specifier?
[02:25:58] <bjz> aatch: like I was thinking: (&self, width: Option<uint>, precision: Option<uint>, specifier: char) <- isn't the width what you want?
[02:27:07] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[02:27:35] <aatch> bjz, well for something like '%- 20.5f' would give you { specifier:'f', precision:Some(5), width: Some(20), flags:['-'
[02:27:43] <aatch> ,' ']}
[02:27:47] <aatch> stupid enter key
[02:28:25] <ssbr_> wah, so irritating. Pretty much everything in rustc::metadata assumes you're compiling rust code (and so all the convenient functions that operate on the bytestream/EBML are private)
[02:28:49] <aatch> ssbr_, I assume you know about std::ebml, right?
[02:28:57] <strcat> yay I got a better error out of it
[02:28:57] <bjz> aatch: I dunno how you'd parse that...
[02:28:59] <strcat> /home/strcat/projects/rust/src/libcore/hashmap.rs:762:46: 762:50 error: mismatched types: expected `&fn(&&:&fn(+:<V13>) -> bool)` but found `&fn(&fn(&'a) -> bool)` (lifetimes do not intersect)
[02:29:02] <strcat> /home/strcat/projects/rust/src/libcore/hashmap.rs:762         iter::all(|v: &T| !other.contains(v), iter)
[02:29:03] <strcat> \o/
[02:29:05] <strcat> still really bad
[02:29:17] <ssbr_> aatch: yeah, but then, the things in rustc::metadata already handle the EBML for me, or would, if they were public and factored nicely
[02:29:22] <brson> friggle: yes
[02:29:27] <ssbr_> so I can either reimplement everything or copy-paste code
[02:29:40] <ssbr_> I'm not really sure which is better
[02:29:51] <friggle> brson: that makes sense, thanks
[02:30:27] <aatch> bjz, the format (for the C standard) is in order: '%' flags* width? ('.' precision)? length? specifier
[02:30:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:30:52] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:06] <ssbr_> maybe I'll just figure out the EBML layout from decoder.rs and do it all by hand. It can't be that hard, right?
[02:31:24] <bjz> aatch: is this what you mean? http://en.wikipedia.org/wiki/Printf_format_string#Format_placeholders
[02:31:32] <aatch> bjz, yep
[02:31:44] <bjz> aatch: ok
[02:32:45] <aatch> bjz, is that not what you were on about?
[02:41:12] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:42:12] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[02:45:10] *** Parts: z0w0 (zack@moz-CF5E62C9.lns4.woo.bigpond.net.au) ()
[02:48:09] *** Joins: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com)
[02:49:42] <aatch> bjz, here is a rough outline: https://gist.github.com/Aatch/fb94960ab770c7df5718
[02:50:07] *** Quits: kimundi (kimundi@moz-9D3FEC48.dip0.t-ipconnect.de) (Ping timeout)
[02:53:27] *** Joins: kimundi (kimundi@moz-7EFEABB3.dip0.t-ipconnect.de)
[02:54:09] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:54:19] *** kimundi is now known as zz_kimundi
[02:57:33] *** Quits: lmandel (lmandel@2557E599.66715431.D25A875A.IP) (Quit: lmandel)
[02:58:39] *** Quits: brendan (brendaneic@moz-510A3AE.public.wayport.net) (Quit: brendan)
[03:00:36] *** Quits: dbaupp (Thunderbir@88688F45.D5A1DCF.37681C44.IP) (Ping timeout)
[03:02:07] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:16:44] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[03:23:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:23:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/L-resg
[03:23:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:25:30] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[03:26:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:26:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9qkv0w
[03:26:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:26:46] *** Joins: catpigger (catpig@moz-930C30AC.dip0.t-ipconnect.de)
[03:27:44] *** Quits: catpig (catpig@moz-AE054533.dip0.t-ipconnect.de) (Ping timeout)
[03:28:28] <ssbr_> watch my magic fingers at work, everyone
[03:28:31] <ssbr_> rusti: match 1 {1 => 3, 2u => 4}
[03:28:33] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/dPjh
[03:28:35] <ssbr_> BAM!
[03:28:46] * ssbr_ is so proud
[03:29:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:29:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9qkv0w
[03:29:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:29:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:29:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wDNRIg
[03:29:06] <ghrust> 13rust/06auto 14ab23a3b 15Brian Anderson: rt: Remove useless libuv wrappers. #5429...
[03:29:06] <ghrust> 13rust/06auto 14ad2eadf 15bors: auto merge of #6196 : brson/rust/uvwrappers, r=catamorphism...
[03:29:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:29:12] <aatch> heh, matching against a literal
[03:29:21] <ssbr_> well
[03:29:25] <Jesse> ssbr_: nice
[03:29:34] <fread2281> match (1 as int) {1 => 3, 2u => 4}
[03:29:48] <fread2281> rusti: match (1 as int) {1 => 3, 2u => 4}
[03:29:49] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/NPeS
[03:29:58] <ssbr_> I had generated some code that translated the EBML ids to names, but I made a mistake
[03:30:05] <ssbr_> in that I forgot to handle "what if it's none of these"
[03:30:16] <fread2281> rusti: match (1 as int) {1 => 3, 2 => 4}
[03:30:17] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/DfQC
[03:30:22] <ssbr_> and when there are mixed types (like 0x07u vs 0x06), for some reason the rust compiler would silently fail to build
[03:30:33] <ssbr_> instead of saying "hey, you forgot a case". I don't really know what any of that means.
[03:31:11] <Jesse> that error doesn't look silent to me
[03:31:22] <ssbr_> Jesse: that's just what happens when you give it to rusti
[03:31:51] <Jesse> hmm. so in a larger program it just seems like it forgot to give you an executable?
[03:32:07] <ssbr_> Jesse: yes
[03:32:14] <ssbr_> minimal test case is the program fn main() {match 1 {1 => 3, 2u => 4};}
[03:32:24] <ssbr_> rustc has no error output, but I get no executable, either
[03:32:59] <ssbr_> with rust 0.6, Windows
[03:34:15] <Jesse> rusti: match 1 {1 => 3, 2u => 4};
[03:34:17] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/cbAJ
[03:34:34] <Jesse> ok so it's not just the semicolon
[03:34:58] *** Joins: eholk (eholk@moz-3491A20C.r15.mtwgln.infoave.net)
[03:36:22] <ssbr_> ah, here: http://www.bpaste.net/show/kCywJBpfQx24CzJ1X4W3/
[03:36:44] <ssbr_> I'll file a bug report
[03:36:55] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[03:38:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:38:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ad2eadf to 14baa1c18: 02http://git.io/N3iJvQ
[03:38:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:41:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:41:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9qkv0w
[03:41:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:41:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:41:06] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/F79zBA
[03:41:06] <ghrust> 13rust/06auto 146f2e429 15Patrick Walton: libstd: De-mut arena
[03:41:06] <ghrust> 13rust/06auto 14dc5df61 15Patrick Walton: librustc: Update the serializer to work properly with INHTWAMA, removing mutable fields in the process
[03:41:06] <ghrust> 13rust/06auto 14b37a685 15bors: auto merge of #6201 : pcwalton/rust/inhtwama-serializer, r=graydon...
[03:41:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:41:16] <ssbr_> How does this look? https://github.com/mozilla/rust/issues/6209
[03:42:00] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:42:00] *** ChanServ sets mode: +o brson
[03:45:36] *** Quits: eholk (eholk@moz-3491A20C.r15.mtwgln.infoave.net) (Quit: eholk)
[03:46:43] <steven_is_false> I have a question. How often should I update my installation to incoming?
[03:46:48] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[03:46:48] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[03:47:18] <aatch> steven_is_false, as often as you need to. Depends on what kind of work you're doing
[03:47:35] <aatch> If you're doing compiler stuff, several times a day at times.
[03:47:56] *** Joins: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca)
[03:48:04] <aatch> Other times just making sure you track major library and syntax changes is enough
[03:48:51] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[03:49:03] <steven_is_false> aatch: Okay.
[03:54:35] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:55:10] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[03:55:20] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:55:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[03:55:28] <steven_is_false> rusti no!
[03:56:23] <steven_is_false> So I presume rusti is being updated?
[03:56:35] <strcat> just messing around with it
[03:56:44] <steven_is_false> Fair enough.
[03:56:55] *** Quits: dymk (dymk@CF8FF5AF.8F293D07.59A90BC7.IP) (Quit: Leaving)
[03:58:27] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:58:35] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[03:59:20] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:59:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[03:59:36] <sanxiyn> Some easy reviews
[03:59:40] <sanxiyn> r? https://github.com/mozilla/rust/pull/6206
[03:59:46] <sanxiyn> r? https://github.com/mozilla/rust/pull/6207
[03:59:51] <sanxiyn> Both are entirely dead code removal
[04:00:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:00:11] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[04:00:59] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[04:02:05] <strcat> is mach_sty just an identity function? what was it ever supposed to do?
[04:02:31] <sanxiyn> strcat: It was used to turn int to i32 or i64 depending on target
[04:02:45] <sanxiyn> But now we turn int directly to LLVM i32 or LLVM i64, so it is unused
[04:02:50] <strcat> ah
[04:03:36] <sanxiyn> Thanks!
[04:03:46] <strcat> np
[04:04:09] <erickt> nmatsakis tjc: ping?
[04:04:24] <sanxiyn> Also, this fixes my pet peeves:
[04:04:25] <sanxiyn> r? https://github.com/mozilla/rust/pull/6208
[04:04:38] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[04:05:20] <bjz> aatch: apologies, I was out for a bit
[04:05:44] <sanxiyn> No more
[04:05:44] <sanxiyn> let var = 1;
[04:05:44] <sanxiyn>     ^~~~~
[04:05:44] <sanxiyn> Rather
[04:05:44] <sanxiyn> let var = 1;
[04:05:45] <sanxiyn>     ^~~
[04:05:55] <aatch> bjz, that's fine
[04:06:47] <aatch> I decided to work on an actual implementation of that gist btw.
[04:06:53] <bjz> aatch: what does 'FormatSpec' stand for? FormatSpecifier?
[04:07:05] <aatch> Yep, I changed it to Placeholder though
[04:07:09] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[04:07:24] <strcat> sanxiyn: a small step towards sane error messages :)
[04:07:36] <bjz> aatch: also, could you maybe supply a contrived example of all the things in use?
[04:07:52] <sanxiyn> strcat: Yeah, next on my list is #3525
[04:07:57] <sanxiyn> It is my next week goal
[04:08:06] * strcat always forgets it has color because it detects color support really poorly
[04:08:48] <bjz> aatch: why do you use 'either'?
[04:09:03] <aatch> bjz, because thats what I thought of
[04:09:20] <bjz> Ahh I see
[04:09:23] <aatch> Basically, you get either the next placeholder, or the string between
[04:09:29] <bjz> yup
[04:09:51] <sanxiyn> strcat: aka warning: unused variable `var` [-Wunused-variable]
[04:09:52] <bjz> I wonder if it would be more self-documenting if you made your own enum for that?
[04:09:56] <sanxiyn> Rust is missing [...] part
[04:09:59] <sanxiyn> Even GCC got this!
[04:10:04] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[04:10:06] <aatch> It's actually not the best way, because I can't properly signal "end of input"
[04:10:08] <strcat> sanxiyn: ah
[04:10:15] <strcat> sanxiyn: well, gcc has caret warnings now too
[04:10:16] <aatch> So I'll have my own enum anyway
[04:10:30] *** Joins: themgt (themgt@moz-12C18812.dhcp.gnvl.sc.charter.com)
[04:10:41] <strcat> sanxiyn: http://ix.io/5sn
[04:10:49] <strcat> in the latest stable
[04:11:15] <strcat> clang is smarter though
[04:11:19] <strcat> foo.c:2:12: error: expected ';' at end of declaration
[04:11:22] <strcat>   int x = 5
[04:11:23] <strcat>            ^
[04:11:25] <strcat>            ;
[04:11:52] <bjz> aatch: you could also implement core::iterator::Iterator maybe
[04:12:13] <bjz> aatch: which has next returning Option
[04:12:26] <bjz> aatch: which signals the end of input
[04:12:30] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:12:36] <bjz> aatch: if none ofc
[04:12:56] <aatch> bjz, Yeah, I've got a ParseResult enum for the next_item atm.
[04:13:02] <sanxiyn> strcat: How do you think message should be formatted?
[04:13:11] <bjz> aatch: ok, that sounds good
[04:13:20] <strcat> sanxiyn: to show the lint class?
[04:13:23] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[04:13:25] <sanxiyn> yes
[04:13:29] <sanxiyn> Now: warning: unused variable: `var`
[04:13:30] <bjz> aatch: can it return an error?
[04:13:41] <sanxiyn> warning: unused variable: `var` [-Wunused-variable]
[04:13:41] <sanxiyn> ?
[04:13:46] <aatch> bjz, I'm not sure if it's actually possible
[04:13:47] <sanxiyn> (Just same as GCC)
[04:13:54] <aatch> Well, I could
[04:14:04] <sanxiyn> I initially thought rustc flag syntax is -W unused-variable, but it also works without space
[04:14:22] <aatch> Hmm, thinking about it, I will have to.
[04:14:34] <bjz> aatch: core::result?
[04:14:44] <strcat> sanxiyn: yeah copying gcc/clang seems fine
[04:14:47] <strcat> don't know a better way
[04:14:59] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:15:25] <bjz> aatch: then the user might be able to give feedback, when they create their own tokens, maybe
[04:15:30] <sanxiyn> By the way, I want to rename some lint checks
[04:15:52] <sanxiyn> Some uses plural, some uses singular
[04:16:26] <strcat> sanxiyn: to singular?
[04:16:32] <aatch> bjz, I'm leaning towards a 4-element enum with: End, Place(Holder), Error(int,int) and Raw(~str)
[04:16:44] <aatch> With Error(int,int) being the start and end of the sequence
[04:16:52] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[04:17:47] <aatch> Any way, I've got to go for a bit, be back soon.
[04:17:55] <bjz> aatch: how would the user give feedback?
[04:18:05] *** Quits: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca) (Ping timeout)
[04:18:07] <bjz> aatch: if they're implementing their own?
[04:18:17] <bjz> aatch: sould they be able to return a string?
[04:18:27] <bjz> aatch: ie. an error message?
[04:19:04] <bjz> aatch: "ints cannot have precision" <- really bad one but you get the idea
[04:21:29] *** Joins: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq)
[04:21:56] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[04:22:27] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[04:25:24] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:25:48] *** Joins: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP)
[04:27:38] * sanxiyn back
[04:27:47] <sanxiyn> strcat: Yes, to singular (following GCC)
[04:28:55] *** Joins: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca)
[04:29:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:29:13] <strcat> rusti: 1
[04:29:18] <rusti> 1
[04:29:20] <strcat> rusti: 1
[04:29:21] <rusti> 1
[04:29:32] <sanxiyn> rusti: 1.0
[04:29:33] <rusti> 1
[04:29:45] <strcat> rusti: 1/0
[04:29:47] <rusti> rust: task failed at 'attempted to divide by zero', foo.rs:5
[04:29:47] <rusti> rust: domain main @0xeed1b0 root task failed
[04:29:59] <sanxiyn> rusti: 1.0/0.0
[04:30:01] <rusti> inf
[04:30:34] <sanxiyn> rusti: 200u8 + 200u8
[04:30:35] <rusti> 144
[04:30:51] <sanxiyn> rusti: 100i8 + 100i8
[04:30:52] <rusti> -56
[04:30:58] <strcat> rusti: (200 + 200) % 256
[04:30:59] <rusti> 144
[04:31:35] <strcat> oh well now it doesn't break the terminal that qemu runs in
[04:32:10] <sanxiyn> I suspect many spans are still wrong
[04:32:25] <sanxiyn> Would there be a systematic way to detect all wrong spans?
[04:32:29] <strcat> rusti: core::run::run_program("head", [~"-c", ~"10", ~"/dev/urandom"]);
[04:32:31] <rusti> !n $
[04:32:58] <strcat> rusti: core::run::run_program("head", [~"-c", ~"100", ~"/dev/urandom"]);
[04:32:59] <rusti> Js]F8/fNQ+
[04:32:59] <rusti> LeIp2u}/BA6<1';  P<Ru=~>
[04:33:20] <sanxiyn> Is there an easy way to hex encode in Rust?
[04:33:39] <strcat> any string?
[04:34:04] <strcat> hm
[04:34:12] <ssbr_> If "@", "=", and "as" are problematic for pattern binding, why not find something that isn't problematic? (There so many possible tokens to choose from, after all. =>, ->, <-, <=, ?, :, ::, etc.)
[04:34:35] <ssbr_> I don't get why one would settle on "as" if it isn't 100% likable :(
[04:34:35] <sanxiyn> ssbr_: Any suggestion?
[04:34:55] <strcat> sanxiyn: guess not :(
[04:34:55] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[04:35:03] <ssbr_> sanxiyn: I don't know what symbols would cause problems for the parser
[04:35:08] <strcat> should be in the stdlib
[04:35:15] <ssbr_> but => or -> have a nice duality with the => of pattern matching
[04:35:35] <sanxiyn> => definitely would be problematic
[04:35:39] <sanxiyn> How about "for"?
[04:36:10] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:36:26] <ssbr_> ack, that's one of those keywords you'd only pick because it's already reserved
[04:37:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[04:39:01] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[04:39:49] <ssbr_> Oh, someone's suggesting changing the cast syntax. There's a neat idea.
[04:39:55] <sanxiyn> So currently "path @ pat" parses to pat_ident (misnamed! should be pat_path) (path, pat)
[04:40:09] <sanxiyn> In my proposal, "path for pat" would parse to pat_path(path, pat)
[04:40:58] <sanxiyn> ssbr_: Well I think "path for pat" reads fine, altho "for" being reserved is definite plus
[04:41:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:41:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/F79zBA
[04:41:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:41:46] <sanxiyn> ssbr_: Last time expr: type was suggested, someone wanted to reserve that syntax for other purpose
[04:41:59] <ssbr_> sanxiyn: I don't like that one can read "the identifier for the pattern" or "the pattern for the identifier" and they make about as much sense
[04:41:59] <sanxiyn> aka type ascription
[04:42:16] <ssbr_> "for" is sort of ambiguous in that sense
[04:42:30] <ssbr_> not that it would really matter in practice
[04:44:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:44:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/-DaLHw
[04:44:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:44:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:44:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dXvXTA
[04:44:07] <ghrust> 13rust/06auto 1497109aa 15Seo Sanghyeon: Remove mach_sty
[04:44:07] <ghrust> 13rust/06auto 1487c46b5 15bors: auto merge of #6206 : sanxiyn/rust/mach-sty, r=thestinger
[04:44:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:44:37] <ssbr_> Man, OK, I am giving up on this. Reading the crate metadata is way too hard.
[04:44:46] <sanxiyn> What are you trying to do?
[04:45:19] <steven_is_false> ssbr_: Isn't it just using ebml with some constants defined in src/librustc/decoder ?
[04:45:21] <ssbr_> sanxiyn: I wanted to generate header files for the public functions/types of a crate, to make it easier to interoperate with rust
[04:45:26] <ssbr_> steven_is_false: "just"
[04:45:55] <ILyoan> Hi folks, I have a quick question
[04:46:01] <sanxiyn> ssbr_: There was a talk of separating metadata reader/writer in the compiler as a library
[04:46:06] <sanxiyn> ssbr_: That would help?
[04:46:15] <ILyoan> Is there a trie like data structure in rust ?
[04:46:27] <ssbr_> I guess it's easier if you're used to that. As far as I can tell, the EBML format is essentially undocumented (although the variable names are very helpful). The interface is a bit low level, so if you try to read an EBML elemebnt where there is none, you get a runtime failure. And there's no automatic way to walk the EBML tree, so you get a lot of failures as you try to explore what the format is.
[04:46:42] <sanxiyn> ILyoan: There is core::trie?
[04:46:44] <steven_is_false> sanxiyn: I would personally appreciate having it in a library because I need to use it to load symbols from Rust crates using the dlfcn API.
[04:46:45] <ssbr_> sanxiyn: IMO the entire metadata reader/writer API could be redesigned so that everyone can use it
[04:46:53] <ILyoan> Oh thanks
[04:47:16] <sanxiyn> steven_is_false, ssbr_: Go vote(?) for #2213
[04:47:19] <ssbr_> sanxiyn: the API is very geared right now towards the rustc driver, and I'm not sure how to use the public API at all without pretending to compile source code
[04:47:31] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Ping timeout)
[04:47:34] <ssbr_> it's also got a lot of indirection
[04:47:51] <sanxiyn> By the way, I am thinking of breaking up ty.rs
[04:47:53] <ssbr_> both those things are probably common of rustc
[04:47:54] <sanxiyn> It is damn too big
[04:48:21] <sanxiyn> It probably should be 4 files or so
[04:48:21] <Jeaye> That's what she said.
[04:48:28] <sanxiyn> Jeaye: ?
[04:48:33] <ssbr_> sanxiyn: What's this "voting"?
[04:48:37] * bjz glares at Jeaye
[04:48:52] <Jeaye> ^_^
[04:48:55] <sanxiyn> ssbr_: Well just comment on the issue that you want it to be done
[04:49:25] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[04:49:33] <sanxiyn> ssbr_: Also specify why you want it
[04:49:50] <ssbr_> sanxiyn: I'll put a little effort into it. Give me a few minutes. :>
[04:50:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:50:12] <strcat> rusti: 1
[04:50:13] <rusti> ^[[D^[[B11
[04:50:16] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[04:50:43] <sanxiyn> Ugh
[04:50:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:51:12] <strcat> rusti: 1
[04:51:13] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:51:13] <rusti> 1
[04:51:26] <strcat> good enough ;p
[04:52:45] <strcat> rusti: 2
[04:52:46] <rusti> 2
[04:53:11] <strcat> rusti: loop { println("foo") }
[04:53:13] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/efIe
[04:54:00] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[04:54:45] *** Quits: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP) (Connection reset by peer)
[04:55:13] *** Joins: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP)
[04:57:28] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[04:57:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[04:57:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:58:04] <strcat> rusti: fn foo() { loop { println("foo") } }; foo()
[04:58:08] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[04:58:27] <strcat> ;\
[04:58:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[04:59:37] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[05:00:26] <steven_is_false> Dang. They actually removed reinterpret_cast in the latest release.
[05:01:05] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[05:01:07] <strcat> steven_is_false: it's transmute_copy
[05:01:31] <steven_is_false> strcat: I wish I knew sed
[05:02:00] <sanxiyn> steven_is_false: Yes it needed large repetitive changes all around Servo
[05:04:20] <brson> transmute is usually better
[05:04:50] <sanxiyn> steven_is_false, ssbr_: Thanks for comments
[05:05:05] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[05:05:31] <brson> sanxiyn: one thing to consider about ty.rs is that parts of it are needed for runtime reflection
[05:05:47] <brson> at runtime
[05:06:02] <sanxiyn> brson: It is? Which part is it?
[05:06:05] <brson> sanxiyn: at one point i was trying to liberate rustc::metadata from the compiler in order to do safe dynamic loading
[05:06:22] <brson> to typecheck at runtime the symbols
[05:06:44] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:06:59] <strcat> rusti: core::run::run_program("cat", [])
[05:07:05] <rusti> timed out after 5 seconds
[05:07:28] <brson> sanxiyn: I never got around to figuring out exactly what would be needed, but the metadata code makes heavy use of ty.rs
[05:07:44] <Jeaye> brson: Better luck tomorrow on the Linux build then? :(
[05:07:50] <sanxiyn> brson: I am just talking about breaking it to multiple files
[05:07:52] <brson> Jeaye: let me check
[05:08:07] <brson> linux snapshots take 3.5 hours
[05:08:09] <mzabaluev> brson: I have a function casting a &'self A to &'self B when the underlying object is the same. Is transmute_copy the right thing to use?
[05:08:38] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[05:08:39] <mzabaluev> I wasn't sure about the move semantics of transmute on the original pointer
[05:08:42] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[05:08:43] <strcat> doesn't matter in that case so just use transmute
[05:08:45] <brson> Jeaye: a test failed. I'll xfail it and try again
[05:09:02] <Jeaye> Alright, cool.
[05:10:26] <ssbr_> Hmmmm. I guess I don't like the ebml reader API
[05:10:35] <brson> sanxiyn: I just wanted to mention other ambitions I have for it. I endorse your refactoring 100%
[05:10:47] <ssbr_> it's be nice if it could enforce the distinction between elements with data and elements with children
[05:11:15] <sanxiyn> Ideally, ty.rs should be like ast.rs: just data structures and no more
[05:11:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:11:16] <ghrust> 01[13rust01] 15brson fast-forwarded 06snap-stage3 from 14ba84251 to 1479a2b2e: 02http://git.io/on4Whw
[05:11:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:11:21] *** Joins: dbaupp (Thunderbir@moz-91B99879.lns20.syd6.internode.on.net)
[05:11:25] <ssbr_> so you'd write down the schema and then you can get a visitor for an ebml document, and a way of reading into ebml documents so that incorrect usage results in errors rather than broken data
[05:11:33] <ssbr_> (or misc. failures)
[05:11:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:12:17] <brson> mzabaluev: no, I would use transmute
[05:13:12] <brson> mzabaluev: transmute_copy will work too
[05:13:41] <brson> but transmute_copy is really for intentionally violating ownership semantics
[05:13:50] <mzabaluev> heh :)
[05:13:59] <brson> and is *even less safe* than transmute
[05:14:53] <sanxiyn> Tentatively, four files are named ty.rs, ty_util.rs, ty_context.rs, ty_kind.rs
[05:15:00] <sanxiyn> Better suggestion?
[05:15:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:15:37] <brson> it's an unsafe, bitwise copy that converts to another type without running any of the typical glue code that a copy should require
[05:15:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:17:03] <dbaupp> sanxiyn: you could maybe move it into a ty folder with mod.rs, util.rs etc?
[05:17:12] *** Quits: cdidd (cdidd@moz-21D399F7.broadband.corbina.ru) (Ping timeout)
[05:17:40] <sanxiyn> dbaupp: That's also an idea
[05:17:50] *** Ralith_ is now known as Ralith
[05:18:28] <bjz> sanxiyn: have you heard of fnms? it mentions it in this article: http://fgiesen.wordpress.com/2012/08/15/linear-interpolation-past-present-and-future/
[05:19:26] <sanxiyn> bjz: No
[05:19:34] <sanxiyn> bjz: Reading now. Seems most fascinating...
[05:19:51] <bjz> sanxiyn: yeah, tried googling
[05:20:10] <bjz> sanxiyn: I'm guessing you could just use fms?
[05:20:36] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:20:38] <strcat> rusti: 1
[05:20:39] -rusti- 1n
[05:20:45] <sanxiyn> bjz: What is the difference?
[05:20:46] <strcat> ;\
[05:20:50] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[05:21:06] <bjz> no idea
[05:21:06] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[05:21:10] <dbaupp> strcat: you broke him!
[05:21:23] <dbaupp> (or her, or it)
[05:21:28] <bjz> sanxiyn: "fused negative multiply-subtract"
[05:21:49] <bjz> sanxiyn: lerp(t, a, b) = fma(t, b, fnms(t, a, a))
[05:22:45] <sanxiyn> bjz: Does any x86 chip currently support FMA?
[05:23:10] <dbaupp> doesn't fma(t, b, fma(t, -a, a) do the same thing (with a few more operations)?
[05:23:11] <brson> what's bors's url?
[05:23:25] <bjz> sanxiyn: well, it's an llvm intrinsic
[05:23:29] <strcat> brson: the queue?
[05:23:33] <sanxiyn> http://buildbot.rust-lang.org/bors/bors.html
[05:23:34] <bjz> sanxiyn: dunno though
[05:23:44] <bjz> dbaupp: yup
[05:23:53] <brson> strcat: yes
[05:23:55] <brson> sanxiyn: thanks
[05:24:07] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[05:24:14] <dbaupp> sanxiyn: only amd, http://en.wikipedia.org/wiki/FMA_instruction_set (it's coming in intel's "Haswell" this year)
[05:24:16] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:24:35] <bjz> strcat: also, is RSQRTSS f32 only?
[05:24:41] <strcat> dunno
[05:24:42] <sanxiyn> bjz: Yes
[05:24:53] <brson> what adjective describes bors?
[05:25:14] <aatch> brson, petulant
[05:25:18] <sanxiyn> bjz: No f64 hardware square root, AFAIK
[05:25:35] <mzabaluev> brson: that's what I want: produce another borrowed pointer that could be used alongside the original one. But since transmute happens inside the function I guess it's the function's local slot that gets transmuted, not the caller's pointer, so no difference
[05:25:50] <bjz> sanxiyn: okies. I wonder what we should do for rsqrt on f64s
[05:26:39] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:26:44] <dbaupp> bjz: whichever of sqrt(1/x) or 1/sqrt(x) is more accurate
[05:26:45] <doomlord> fma, yum
[05:26:47] <brson> mzabaluev: in that case I would make a copy of the pointer safely first, then call transmute
[05:26:55] <strcat> rusti: 1
[05:26:56] <rusti> 1
[05:27:25] <sanxiyn> By the way, FMA is part of NEON and supported by all NEON chips, IIRC
[05:27:32] <brson> or cast it to an unsafe pointer
[05:27:46] <sanxiyn> So on that count NEON does better than SSE
[05:27:46] <brson> it depends on whether the abstraction contains the unsafety or not
[05:28:00] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[05:28:14] <mzabaluev> brson: the transmute call is the return expression
[05:28:16] <brson> i have a lot of unsafe code at the moment unfortunately and decided it was more 'honest' to use unsafe pointers
[05:28:38] <mzabaluev> brson: and the function contains unsafety
[05:29:34] <brson> mzabaluev: can the transmuted pointer possibly be used unsafely though? it says it's a safe pointer but could it alias the original pointer still?
[05:30:00] <mzabaluev> brson: I'm afraid yes: https://github.com/mzabaluev/grust/blob/master/grust/object.rs#L82
[05:30:01] <brson> sorry, getting off topic. I was daydreaming about when to use unsafe pointers
[05:30:08] *** Quits: catpigger (catpig@moz-930C30AC.dip0.t-ipconnect.de) (Quit: Verlassend)
[05:30:22] <sanxiyn> bjz: llvm.fma, or llvm.fmuladd?
[05:30:27] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[05:31:42] *** Quits: rf (rollyfordh@D01F426C.FCA11A6F.2A62C3B1.IP) (Quit: rf)
[05:32:12] <bjz> sanxiyn: they only have fmaf32 and fmaf64 in core::unstable::intrinsics
[05:32:29] <brson> transmute is just generally better unless you need the specific escape-hatch of transmute_copy. Maybe transmute_copy is a bad name. It sort of implies a move vs. copy duality that is not really there.
[05:32:46] <sanxiyn> bjz: Oops, I think that is a mistake
[05:32:52] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[05:32:58] <bjz> llvm.fma.f32
[05:33:08] <sanxiyn> fmaf32 and famf64 will be *slow* on all current Intel chips then
[05:33:13] <bjz> llvm.fma.f64
[05:33:17] <bjz> really?
[05:33:21] <bjz> yikes
[05:33:23] <sanxiyn> llvm.fma.* *guarantees* no intermediate rounding
[05:33:38] <sanxiyn> If hardware does that, great, but you are forced to emulate correct rounding in software
[05:33:54] <sanxiyn> If you need correct rounding for numerical precision, great, but if you want it to be fast, no-no
[05:33:58] <bjz> mm
[05:34:11] <sanxiyn> bjz: There is llvm.fmuladd.*
[05:34:19] <bjz> so should we be exposing llvm.fmuladd as well?
[05:34:28] <sanxiyn> llvm.fmuladd.* uses hardware if available, but does not guarantee correct rounding
[05:34:30] <sanxiyn> I think so
[05:34:30] <mzabaluev> brson: if pointer aliasing is a no-no, it probably means I have to produce a proper copy, which means more refcounting
[05:34:42] <bjz> sanxiyn: cool
[05:34:46] <mzabaluev> I'd like to avoid that
[05:34:59] <sanxiyn> bjz: Yes, at least before Haswell is very widespread
[05:35:04] <bjz> mm
[05:35:25] <strcat> mzabaluev: they both have the same region and they're immutable so it's fine
[05:35:27] <strcat> can't alias &mut
[05:35:34] <doomlord> fma is more common in risc machines
[05:35:34] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[05:35:36] <strcat> doesn't look like you're doing freezing though, which is a problem
[05:35:55] <sanxiyn> doomlord: Yes, commonly available on ARM
[05:36:06] <mzabaluev> strcat: freezing?
[05:36:10] <doomlord> i always worked on consoles, they always had it
[05:36:19] <brson> mzabaluev: these little bits of unsafety happen pretty often. figuring out how to close the unsafety gap with Rust is part of the fun
[05:36:38] <strcat> mzabaluev: non-owned mutable types (ones with refcounting) that you can take & references into need to do dynamic freezing
[05:36:42] <strcat> like @mut does
[05:36:51] <doomlord> amd has fma4 i think?
[05:36:58] <strcat> mzabaluev: http://ix.io/5dh here's an example implementation
[05:37:01] <doomlord> and hence it's in the next consoles too
[05:37:07] <strcat> it's not entirely safe because it can't be marked as non-Owned yet
[05:37:20] <strcat> but I think it's entirely safe if you pretend it has #[non_owned]
[05:37:26] <sanxiyn> doomlord: Oh, good point...
[05:37:29] <sanxiyn> Consoles...
[05:37:42] <doomlord> mainstream devices
[05:37:54] *** zz_kimundi is now known as kimundi
[05:38:10] <doomlord> i'm just thinking, what if rust was 5,10 years ago, would it look any good on CELL
[05:38:10] <strcat> @mut isn't actually sound so... you have to do a bit more than @mut currently does for soundness
[05:38:26] <doomlord> too late to save that chip now
[05:38:41] <strcat> &mut borrows have to be unique, is the main thing
[05:38:57] <strcat> and it can't be modified as long as there's an & borrow to the part that was modified
[05:38:58] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[05:39:21] <strcat> unless it's just something like an integer I guess...
[05:39:24] <sanxiyn> doomlord: Is AMD betting on consoles?
[05:39:30] <mzabaluev> strcat: my refcounted objects are actually intended to be usable across tasks
[05:39:33] <doomlord> consoles are betting on AMD
[05:39:36] <sanxiyn> Heh
[05:39:53] <strcat> mzabaluev: well you definitely need freezing still
[05:40:10] <mzabaluev> strcat: thanks, I'll look into it
[05:40:15] <strcat> assuming you can borrow & ptrs into it
[05:41:01] <strcat> it's not really trivial to get right ;p
[05:41:05] *** Parts: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Leaving)
[05:41:08] <strcat> especially if you want it to be thread-safe + shared data
[05:41:16] <mzabaluev> strcat: the inner members of the object reference structure are not mutable in Rust
[05:41:21] <doomlord> supposedly amd requires a bit more specific optimization and it will get that in console software for sure
[05:41:38] <strcat> mzabaluev: but can they mutate while you have an & borrow?
[05:41:41] <strcat> if so, it's not safe
[05:42:02] <dbaupp> bjz: fwiw, sqrt(1/x) seems to be more accurate
[05:42:02] <mzabaluev> strcat: only the refcount in the C pointee structure which is not accessible from Rust anyway
[05:42:14] <strcat> mzabaluev: well that should be fine then
[05:42:39] <dbaupp> bjz: (when talking about rsqrt of floats)
[05:43:16] <strcat> when there's actually #[non_owned] the ffi tutorial can be extended to cover task-local refcounting
[05:43:44] <strcat> since it's pretty common
[05:44:11] <mzabaluev> cya
[05:44:14] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Quit:    )
[05:44:57] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[05:45:25] <bjz> dbaupp: cheers
[05:46:57] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[05:47:05] <bjz> dbaupp: self.recip().sqrt()
[05:47:16] <dbaupp> bjz: yes
[05:47:20] <bjz> :)
[05:49:28] <bjz> dbaupp: I'll fix that right now :)
[05:49:41] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[05:50:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:50:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/dXvXTA
[05:50:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:52:57] *** Quits: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca) (Client exited)
[05:53:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:53:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tdsF6w
[05:53:10] <ghrust> 13rust/06auto 1476f7207 15Brian Anderson: std: xfail test_serializing_pipes
[05:53:10] <ghrust> 13rust/06auto 142ae44a0 15bors: auto merge of #6212 : brson/rust/xfail-flatpipes, r=brson...
[05:53:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:53:23] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[05:53:42] *** Joins: fabiand (fabiand@moz-8D6C53D0.adsl.alicedsl.de)
[05:54:17] *** Joins: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca)
[05:57:56] <strcat> hm
[05:58:09] <strcat> I guess the easiest way of marking something non-owned right now is including a & field
[05:59:49] *** Joins: victorporof (victorporo@F1213546.14EB2DE0.79933D60.IP)
[05:59:56] <dbaupp> strcat: or an @()
[06:03:42] <dbaupp> bjz: ok, i just did some algebra and properly sure that that is correct
[06:04:15] <bjz> dbaupp: should we include a test for that? I added a comment
[06:04:20] <dbaupp> bjz: d - d^(-1.5) > d^1.5 - d^(-0.5)
[06:04:27] <dbaupp> (that's the reasoning)
[06:05:13] <ssbr_> Aie aie aie: https://github.com/mozilla/rust/blob/master/src/librustc/metadata/tydecode.rs
[06:05:32] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[06:05:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[06:06:09] <ssbr_> I wish I knew the importance of crate numbers. It doesn't look impossible to use, other than that.
[06:07:08] <ssbr_> Oh, nope, ty::ctxt has that damned cstore again
[06:07:16] <ssbr_> blagho blagho. OK I give up for real.
[06:08:42] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[06:09:02] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[06:09:21] *** Joins: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP)
[06:14:14] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[06:14:54] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Ping timeout)
[06:15:06] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[06:16:35] *** kimundi is now known as zz_kimundi
[06:16:55] *** Joins: berak (chatzilla@DE7ACC1.3A27401E.16E13E53.IP)
[06:18:10] <dbaupp> bjz: while we're having fun with floating points, http://blog.frama-c.com/index.php?post/2013/05/02/nearbyintf1
[06:18:16] <dbaupp> (you may've seen it already)
[06:18:39] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Input/output error)
[06:19:03] <bjz> dbaupp: I'll have to look for it later, but thanks (heading out)
[06:19:25] <bjz> dbaupp: but yeah, asm sqrt is implemented for f32 :)
[06:20:32] <dbaupp> bjz: platform independently?
[06:20:43] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:20:49] <bjz> only for x86_64
[06:21:03] <bjz> will push soon
[06:21:36] <bjz> then sanxiyn can implement it for arm
[06:21:53] <dbaupp> isn't there llvm.sqrt?
[06:23:02] <dbaupp> bjz: yeah, core::unstable::intrinsics has sqrtf{32,64}
[06:23:04] <bjz> oh I mean rsqrt
[06:23:08] <bjz> sorry
[06:23:34] <bjz> we already use the intrinsic
[06:23:37] <bjz> ok, bbl
[06:28:46] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[06:30:22] *** Parts: berak (chatzilla@DE7ACC1.3A27401E.16E13E53.IP) ()
[06:31:55] *** Quits: alanjc (Alan@moz-ECADE706.dsl.dynamic.sonic.net) (Ping timeout)
[06:33:36] *** Joins: alanjc (Alan@moz-ECADE706.dsl.dynamic.sonic.net)
[06:35:10] *** Joins: mars26 (bzlandfill@moz-ECDFD90C.dynamic.hinet.net)
[06:36:17] *** Quits: mars26 (bzlandfill@moz-ECDFD90C.dynamic.hinet.net) (Quit: CGI:IRC)
[06:39:48] *** Joins: disjukr (disjukr@D4D5F731.A5F7C7E2.84F431B6.IP)
[06:40:17] *** Quits: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq) (Quit: lmandel)
[06:41:44] *** Quits: alanjc (Alan@moz-ECADE706.dsl.dynamic.sonic.net) (Connection reset by peer)
[06:42:59] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[06:44:01] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[06:50:07] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[06:52:41] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[06:55:41] *** Joins: rf (rollyfordh@moz-F5A7A7AB.dyn.iinet.net.au)
[06:55:55] *** Quits: rf (rollyfordh@moz-F5A7A7AB.dyn.iinet.net.au) (Input/output error)
[06:56:52] *** Joins: z0w0 (z0w0@moz-CF5E62C9.lns4.woo.bigpond.net.au)
[06:58:07] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[06:59:22] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[07:00:30] *** Joins: mars26 (bzlandfill@moz-ECDFD90C.dynamic.hinet.net)
[07:01:39] *** Quits: victorporof (victorporo@F1213546.14EB2DE0.79933D60.IP) (Quit: victorporof)
[07:01:47] *** Joins: victorporof (victorporo@F1213546.14EB2DE0.79933D60.IP)
[07:07:15] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[07:11:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:11:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/tdsF6w
[07:11:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:13:39] <Jeaye> Just after brson left. ^_^
[07:14:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:14:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/t-Hxvg
[07:14:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:17:59] *** Joins: boggle (boggle@moz-E4BC478D.dip0.t-ipconnect.de)
[07:18:42] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[07:22:21] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[07:23:17] *** Quits: themgt (themgt@moz-12C18812.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[07:23:39] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[07:25:05] <ssbr_> Mmmmmf. Is it not possible to put a macro in a crate, so that it can be used by other crates?
[07:25:07] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:26:03] *** zz_kimundi is now known as kimundi
[07:27:26] <dbaupp> ssbr_: no... it's not even possible to do use macros in another file
[07:27:33] <dbaupp> (if I remember correctly)
[07:27:41] <ssbr_> distressing
[07:28:12] <ssbr_> I was considering that ebml would be much more usable if there was a macro that could take a DTD as input and generate a module for reading and writing ebml that follows that DTD
[07:28:39] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:28:43] <Sodel_the_V> It's possible, actually
[07:28:46] <ssbr_> considering that e.g. rustc::metadata::{decoder,encoder} are a little hard to follow (and apparently, edit without accidentally bringing them out of alignment)
[07:29:16] <dbaupp> ssbr_: out of interest, what are you trying to do?
[07:29:37] <Sodel_the_V> I think you have to use  `#[macro_escape];`
[07:29:48] <ssbr_> dbaupp: I was considering asking if I could refactor metadata in this way
[07:29:54] <Sodel_the_V> I don't remember the details Google that one.
[07:29:58] <ssbr_> dbaupp: but it's useless to ask if it's impossible
[07:30:02] <ssbr_> Sodel_the_V: alright!
[07:30:05] <Sodel_the_V> (There should have been a period in there.)
[07:30:44] <dbaupp> Sodel_the_V: I thought that was only within a file, but if not, that's awesome :D
[07:30:58] <ssbr_> Sodel_the_V: https://github.com/mozilla/rust/issues/3114
[07:31:08] <ssbr_> doesn't look like it's "really" possible
[07:31:55] <ssbr_> dbaupp is right about #[macro_escape], see https://github.com/mozilla/rust/pull/5120
[07:32:08] <Sodel_the_V> Ah, fair enough.
[07:32:20] <Sodel_the_V> Sorry for the false hope! :P
[07:32:23] <dbaupp> ssbr_: actually I'm not
[07:32:29] <dbaupp> it does work across files
[07:32:54] <ssbr_> oh
[07:33:08] <ssbr_> well then why is #3114 still open
[07:33:29] <dbaupp> ssbr_: at least, https://gist.github.com/huonw/5507742 works
[07:35:27] <ssbr_> dbaupp: good enough
[07:36:13] <ssbr_> I will probably send an email to rust-dev about my idea tomorrow then
[07:36:25] <ssbr_> I wrote a quick prototype, it was fun
[07:36:36] <dbaupp> ssbr_: that issue probably because it doesn't work cross-crate
[07:36:43] <dbaupp> is still open*
[07:36:47] *** Quits: heftig (heftig@moz-645AADE2.dip0.t-ipconnect.de) (Ping timeout)
[07:37:08] <ssbr_> dtd!(mydtd (Root[0x01] Child1) (Child1 [0x02] Child2) (Child2 [0x03] Child1))
[07:37:16] <ssbr_> dbaupp: oh, not cross crate. well then.
[07:38:37] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[07:39:14] *** Quits: z0w0 (z0w0@moz-CF5E62C9.lns4.woo.bigpond.net.au) (Client exited)
[07:39:34] <dbaupp> (at least, I don't think it works cross crate.. I haven't tried.)
[07:39:34] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[07:39:43] <ssbr_> well. adding cross crate macros shouldn't be that hard anyway
[07:39:44] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[07:39:51] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:40:09] <dbaupp> ssbr_: is this for interop with other emittors of ebml (i.e. not rust)?
[07:40:29] <dbaupp> it looks convenient
[07:40:31] <ssbr_> dbaupp: no
[07:41:10] <ssbr_> I just find rustc::metadata very confusing and underdocumented, and this would help with at least the latter part
[07:41:26] <dbaupp> ssbr_: oh
[07:41:37] <ssbr_> do you know how you figure out the EBML format for crate metadata?
[07:41:44] <dbaupp> nope
[07:41:47] <dbaupp> never looked at it
[07:42:19] <ssbr_> you read rustc::metadata::common to see the variable names. Variable names represent nesting via underscores. So tag_foo_bar_foo means that you can have <foo><bar><foo/></bar></foo>
[07:42:28] <dbaupp> you do know that rust can already generate code to serialise and deserialise enums and structs, right? (including to ebml)
[07:42:39] <dbaupp> does this have advantages over that?
[07:42:46] <ssbr_> and then to figure out if they can have child elements, you have to read rustc::metadata::decode to see how the element is used
[07:43:08] <ssbr_> dbaupp: metadata doesn't use enums and structs
[07:43:15] <ssbr_> but anyway, no, I didn't know that
[07:43:20] <dbaupp> oh, ew, all those constants, you mean?
[07:43:42] <dbaupp> they represent the nesting?
[07:43:55] <ssbr_> dbaupp: metadata has constants to represent tag names, and functions fn(tag_id, ebml::Doc) -> whatever
[07:44:04] <ssbr_> well, not even
[07:44:06] <dbaupp> yeah, #[deriving(Encodable, Decodable)]
[07:44:19] <dbaupp> (I've got the code open now)
[07:44:21] <ssbr_> usually it's like, fn(tag_id, ebml::Doc, fn(dumb, thing) -> bool)
[07:44:35] <ssbr_> dbaupp: yes, the underscores represent nesting
[07:44:42] <ssbr_> the constants are the actual tag names (EBML uses numbers for tag names)
[07:45:25] <ssbr_> anyway I find it very confusing and difficult, and I constantly screw up trying to read things and end up causing the task to fail because I read a tag when I should've read data, or I read too many tags, or whatever causes these failures
[07:45:43] *** Joins: heftig (heftig@moz-311D88CA.dip0.t-ipconnect.de)
[07:45:47] <ssbr_> and that's just parsing EBML. :(
[07:46:49] <dbaupp> rusti: #[deriving(Encodable)] enum A { A(int), B(~str) } let e = std::json::Encoder(io::stdout(); A(1).encode(e); B(~"hello").encode(e);
[07:46:51] <ssbr_> dbaupp: it might be that rustc::metadata doesn't want to read the whole EBML thing and turn it into a big datastructure, and that's why it isn't using the serialization/deserialization code?
[07:47:06] <dbaupp> (is rusti not here? :( )
[07:47:17] <ssbr_> using the ebml module "raw" lets it parse selectively
[07:47:21] <ssbr_> but I don't know.
[07:47:22] <dbaupp> ssbr_: yes, probably, or it's just very old code
[07:47:40] <dbaupp> you could ask the mailing list (I don't know which)
[07:47:44] <ssbr_> rusti: match 1 {1 => 3, 2u => 4}
[07:47:48] <ssbr_> rusti wake up
[07:49:02] <dbaupp> (as in, I don't know if it is old code, or if the non-datastructure is on purpose)
[07:49:27] <ssbr_> Yeah. I should ask. I don't know either.
[07:49:36] <ssbr_> Whatever the case is, it could certainly be cleaner and easier to use.
[07:49:50] <ssbr_> and this is the "easy" stuff. The rest of metadata is much harder to use ;_;
[07:53:10] <dbaupp> good luck :)
[07:53:37] <dbaupp> (just for reference, https://gist.github.com/huonw/5507800, and similarly for #[deriving(Decodable)])
[07:54:25] <ssbr_> If you mean good luck using the metadata module, I gave up!
[07:54:42] <ssbr_> but it would be neat if I could submit a PR and fix things up.
[07:54:48] * ssbr_ hasn't contributed to Rust before
[07:55:29] <ssbr_> I've spent a few hours reading through it back and forth, so if there's anywhere I can help... :S
[07:56:29] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[07:56:51] <dbaupp> ssbr_: no idea for the metadata stuff
[07:57:56] <dbaupp> ssbr_: have you had a look at https://github.com/mozilla/rust/issues?labels=E-easy&page=1&state=open ?
[08:07:42] <ssbr_> dbaupp: Eh. Don't you feel that it's more important to be motivated to do it, than for it to be easy?
[08:08:46] <ssbr_> I would very much like metadata to be useful to code other than rustc, since it would make it possible to generate bindings for rust code in C, python, ruby, etcetera
[08:09:20] <dbaupp> ssbr_: of course, but if you're fed up with hitting your head against the wall, you might like a break
[08:09:27] <ssbr_> dbaupp: That's also true!
[08:10:06] <dbaupp> (and starting somewhere "easy" means you get the hang of the language and the compiler code itself, that's all :) )
[08:10:28] <ssbr_> I already feel like I have a hang of the language!
[08:10:38] <dbaupp> but, yes, it would be neat to be able to read/write the metadata in other languages
[08:10:41] <ssbr_> except traits and static methods, which gave me some weird problems and I don't think are quite documented well enough
[08:10:49] <dbaupp> oh, good :) (i don't ;D )
[08:11:07] <dbaupp> yeah, documentation is lacking at the moment
[08:11:43] <dbaupp> (e.g. the #[deriving] stuff I mentioned above isn't mentioned in any piece of documentation. :/ )
[08:12:01] <ssbr_> It might be a good idea to do an easy fix or two on the frontend so that I get the hang of how that works, since the frontend is involved with rustc::metadata
[08:12:14] <ssbr_> hm hm hm
[08:12:58] <dbaupp> ssbr_: yeah, or progressively refactor little bits and pieces of the metadata code, it doesn't have to land in one huge clump
[08:13:07] <ssbr_> dbaupp: oh, that was definitely the idea
[08:13:14] *** Quits: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP) (Ping timeout)
[08:13:40] <ssbr_> there's some parts of refactoring that are difficult because they interact really closely with the compiler and involve like 4 different structs with a dozen fields each full of configuration data
[08:14:09] <dbaupp> one thing I just noticed is 'ast::mutability'
[08:14:16] *** Joins: JonCarlos (Jon@moz-8F3C266E.nwrknj.fios.verizon.net)
[08:14:33] <dbaupp> it's manually coded to a character and back, but it's actually encodable
[08:15:36] *** Quits: JonCarlos_ (Jon@moz-8F3C266E.nwrknj.fios.verizon.net) (Ping timeout)
[08:15:37] <dbaupp> so on line 463 of encoder.rs, encode_mutability could be replaced by m.encode(embl_w) and similarly for the readers in decoder.rs
[08:16:11] *** Joins: jviereck (Adium@moz-6C22CADD.ethz.ch)
[08:16:39] <dbaupp> (except I think the syntax is different for decoding)
[08:16:58] <ssbr_> Stuff like that would be nice.
[08:17:00] <ssbr_> Also doc comments.
[08:18:07] *** Quits: snowmantw (Mibbit@moz-69896760.cs.nccu.edu.tw) (Quit: http://www.mibbit.com ajax IRC Client)
[08:18:11] <dbaupp> (I've got no idea if that will actually work... it probably meets the tightly-link-to-compiler problem too)
[08:18:28] <dbaupp> ssbr_: yeaaaaah, comments... there are files without a single comment :(
[08:18:41] <dbaupp> (except for the license)
[08:19:30] <ssbr_> Yeah... :(
[08:23:04] *** Quits: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca) (Ping timeout)
[08:23:31] *** Joins: trapni (trapni@moz-7C7C1909.dawanda.com)
[08:25:49] *** Quits: jviereck (Adium@moz-6C22CADD.ethz.ch) (Quit: Leaving.)
[08:26:19] *** Joins: Blub\w (wry@moz-70B2EA01.wireless.dyn.drei.com)
[08:27:37] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:27:39] <kimundi> rusti: 1
[08:27:40] <rusti> 1
[08:27:52] <fabiand> rusti: 1+1
[08:27:53] <rusti> 2
[08:28:00] <kimundi> rusti: fail!("I think this doesn't work");
[08:28:03] <fabiand> rusti: pow(2,2)
[08:28:14] <kimundi> rusti: if true {fail!("I think this doesn't work");}; ()
[08:28:15] <fabiand> kimundi, you killed him ... :)
[08:28:27] <fabiand> rusti: 1
[08:28:28] <rusti> 1
[08:28:29] <kimundi> fabiand: No, it doesn't print error anymore
[08:28:34] <fabiand> ah
[08:28:38] <kimundi> That seems to be the reason
[08:28:42] <fabiand> rusti: 1+-1
[08:28:43] <rusti> 0
[08:28:43] <kimundi> rusti: "abc"
[08:28:44] <rusti> "abc"
[08:28:49] <kimundi> rusti: fail
[08:28:55] <kimundi> yeah.
[08:28:55] <fabiand> rusti: 1-
[08:29:15] <fabiand> why is 1+-1 == 0?
[08:29:23] <fabiand> ah ..
[08:29:25] <fabiand> yes
[08:29:25] <kimundi> 1 + (-1)
[08:29:25] <fabiand> :)
[08:29:28] <kimundi> :P
[08:29:38] <fabiand> 1+-+1
[08:29:44] <fabiand> rusti, 1+-+1
[08:29:53] <kimundi> rusti: 1+-+1
[08:29:59] <kimundi> rusti: 1-+1
[08:30:04] <kimundi> rusti: 1-1
[08:30:05] <rusti> 0
[08:30:15] <fabiand> yeah, seems as stderr ain't redirected :)
[08:30:39] <dbaupp> rusti: run::run_program("cat", &["foo.rs"]);
[08:30:55] <dbaupp> rusti: core::run::run_program("cat", &["foo.rs"]);
[08:31:27] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:31:41] <fabiand> rusti, core::run::run_program("ls", &[]);
[08:31:51] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[08:32:11] <dbaupp> rusti: core::run::run_program("cat", &[~"foo.rs"]);
[08:32:13] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/UVQi
[08:32:29] <dbaupp> rusti: core::run::run_program("ls", &[]);
[08:32:30] <rusti> foo  foo.rs
[08:32:50] <fabiand> dbaupp, why does it work now?
[08:32:54] <dbaupp> rusti: core::run::run_program("ls", &[~"-R",~"/"]);
[08:33:00] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/faEN
[08:33:02] <dbaupp> fabiand: you had a comma not a colon
[08:33:17] <fabiand> dbaupp, ah yes
[08:33:38] <fabiand> dbaupp, kimundi - uh maybe core::run should be disabled ...
[08:33:44] <fabiand> dbaupp, is playing his games :)
[08:33:56] <kimundi> fabiand: Nah, that'S harmless
[08:34:16] <dbaupp> rusti: core::run::run_program("cat", &[~"/usr/local/bin/rust_run.rs"]);
[08:34:17] <rusti> cat: /usr/local/bin/rust_run.rs: No such file or directory
[08:34:22] <kimundi> fabiand: rusti runs in a container in a vm that both get spawned fresh for each request
[08:34:26] <dbaupp> rusti: core::run::run_program("cat", &[~"/usr/local/bin/rust_run.sh"]);
[08:34:27] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SEXa
[08:34:33] <fabiand> rusti, core::run::run_program("who", &[~"am",~"i"]);
[08:35:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:35:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/KgZR0g
[08:35:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:35:09] <dbaupp> fabiand: you need `rusti:` not `rusti,`
[08:35:17] <fabiand> dbaupp, darn, my irc client ..
[08:35:21] <fabiand> rusti: core::run::run_program("who", &[~"am",~"i"]);
[08:35:38] <AutomatedTester> security for fun and profit :(
[08:35:42] <AutomatedTester> :) even
[08:36:02] <kimundi> rusti: core::run::run_program("fortune", &[]);
[08:36:04] <rusti> The bug starts here.
[08:36:11] <dbaupp> ahaha
[08:36:12] <fabiand> kimundi, nice one! :)
[08:36:15] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[08:36:26] <dbaupp> now it'll be permanently broken
[08:36:53] <kimundi> rusti: rusti: fn smallcow(s: &str){let p = str::repeat(" ", s.len());io::print(fmt!("< %s >  ^__^\n  %s \\  (oo)\\_______\n  %s    (__)\\       )\\/\\\n  %s       ||----w |\n  %s       ||     ||", s, p,p,p,p));} smallcow("nah, I don't think so")
[08:37:01] <kimundi> rusti: fn smallcow(s: &str){let p = str::repeat(" ", s.len());io::print(fmt!("< %s >  ^__^\n  %s \\  (oo)\\_______\n  %s    (__)\\       )\\/\\\n  %s       ||----w |\n  %s       ||     ||", s, p,p,p,p));} smallcow("nah, I don't think so")
[08:37:02] <rusti> < nah, I don't think so >  ^__^
[08:37:03] <rusti>                         \  (oo)\_______
[08:37:03] <rusti>                            (__)\       )\/\
[08:37:03] <rusti>                               ||----w |
[08:37:03] <rusti>                               ||     ||
[08:38:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:38:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/AIWj3w
[08:38:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:38:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:38:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EAqHZg
[08:38:07] <ghrust> 13rust/06auto 146883814 15Seo Sanghyeon: Remove codes related to modes
[08:38:07] <ghrust> 13rust/06auto 14213f7b2 15bors: auto merge of #6207 : sanxiyn/rust/tc-big, r=thestinger
[08:38:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:38:24] <kimundi> Yay, modes die, everyone is happy \o/
[08:38:50] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[08:43:05] *** Quits: mars26 (bzlandfill@moz-ECDFD90C.dynamic.hinet.net) (Quit: CGI:IRC (EOF))
[08:44:58] <fabiand> rusti: nice
[08:46:25] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[08:47:46] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[08:49:33] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[08:49:34] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[08:49:44] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[08:49:52] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[08:52:51] *** Joins: pyrac (pyrac@A9EC89DE.73C89388.AD05C589.IP)
[08:54:49] <ssbr_> oh boy: https://github.com/mozilla/rust/issues/2658
[08:55:00] <ssbr_> that is hard !
[08:55:42] <aatch> ssbr_, I accept your volunteering
[08:56:06] <ssbr_> aatch: I was thinking about volunteering for https://github.com/mozilla/rust/issues/2213
[08:56:16] <ssbr_> because it interests me and I spent several hours reading through the source code
[08:56:41] <ssbr_> OTOH, it doesn't look fun, and there's still a lot I don't know about (like Rust's automatic serialization stuff)
[08:56:43] <aatch> ssbr_, fair enough
[08:57:24] <ssbr_> if it isn't a high priority, though, I could probably put in the hours and get it done in a few weeks or something, I don't know. Assuming I don't get too distressed and drop out ;)
[08:57:32] *** Joins: haard (fredrik@moz-199611FC.cust.telenor.se)
[08:57:58] <ssbr_> unfortunately #2213 and #2658 are not unrelated
[08:58:43] <aatch> I think a first step for extracting it into rustmeta would be to write a separate crate that does as much of it as possible, independent of compilation
[08:59:07] <dbaupp> ssbr_: re the C header files stuff you commented about 2213, it's probably not super difficult using "plain" libsyntax
[08:59:25] *** Quits: haard (fredrik@moz-199611FC.cust.telenor.se) (Ping timeout)
[08:59:40] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:00:24] <ssbr_> aatch: Yeah, that sounds reasonable. Just having a public API for dealing with the EBML would be a good first step, and then it's a matter of figuring out how those routines interact with the ast and ty so that the relevant bits can be factored into something not as tightly coupled
[09:01:31] <ssbr_> dbaupp: using the same metadata that rust does is definitely the "right" way, even if it's also the hard way
[09:01:41] <ssbr_> so knowing the right way, it's hard to say "I'll do the easy but wrong thing"
[09:02:11] <ssbr_> well, I'm assuming using libsyntax would be wrong. But I guess with rustc --pretty it gets all type information. What about conditional compilation?
[09:02:12] <dbaupp> hm, that's reasonable
[09:02:31] <dbaupp> some of that happens in libsyntax
[09:02:36] <dbaupp> (maybe?)
[09:02:41] <aatch> ssbr_, yeah, std::ebml should handle all of the EBML side nicely (if it doesn't, then that is part of the changes). So rustmeta would be pretty much just for interpreting it as crate data
[09:03:14] <ssbr_> aatch: I have issues with how rustc::metadata uses std::ebml
[09:03:29] <dbaupp> ssbr_: I would encourage you to get it into a form that's usable with deriving(Encodable, Decodable) :)
[09:03:40] <ssbr_> it's possible to write a "safe" API on top of ebml, so that you can't read or write the wrong information at the wrong location
[09:03:47] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Ping timeout)
[09:03:58] <fabiand> are there rust bindings for any ui toolkit?
[09:04:11] <ssbr_> metadata is "unsafe" in that you can try to read an element where there's supposed to be data, or try to read data where there's supposed to be an element, and it will blow up in your face
[09:04:12] <dbaupp> that's what the automatic instances do (at least, using them will mean that)
[09:04:20] <aatch> fabiand, I think there might be a rust-gtk floating around somewhere
[09:04:30] <ssbr_> and as a side effect of the loosely typed API, it isn't even clear what the EBML layout is
[09:04:46] <fabiand> aatch, yep - I found that one, it's for gtk2 ..
[09:04:51] * ssbr_ wishes std::ebml would export a macro that let you define a writer/reader based on a DTD
[09:04:53] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[09:05:10] <dbaupp> ok, I just checked the conditional compilation is in librustc
[09:05:15] *** Joins: Diablo-D3 (diablo@moz-20613698.port.east.myfairpoint.net)
[09:05:30] <ssbr_> dbaupp: well, then the crate metadata is probably the right way to do this then
[09:05:38] <dbaupp> yes, definitely
[09:06:13] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[09:06:29] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:06:38] <ssbr_> I will probably ask brson if I could try taking over the issue tomorrow, with the caveats that I'm new and incompetent and so on.
[09:07:01] <aatch> ssbr_, you don't necessarily need to ask.
[09:07:01] <ssbr_> well, "taking over". What's the right phrase?
[09:07:16] <aatch> Though asking about it wouldn't be a bad idea
[09:07:26] <ssbr_> aatch: he's assigned right now, anyway
[09:07:37] <aatch> Ahh, I didn't know that
[09:07:54] <aatch> Though that doesn't mean much given its age
[09:08:31] <ssbr_> Right. The contributor's guide said something to the effect of that issue ownership doesn't mean all that much
[09:11:38] *** Joins: mozillian349 (bzlandfill@moz-ECDFD90C.dynamic.hinet.net)
[09:16:34] <rfw> quick question
[09:16:39] <rfw> i have an enum type called Exp
[09:16:42] <rfw> and inside it i have IfThenElseExpression(@Exp, @Exp, option::Option<@Exp>)
[09:16:50] <rfw> and i get ast.rs:1:0: 4:1 error: this type cannot be instantiated without an instance of itself; consider using `Option<ast::Exp>`
[09:17:20] <ssbr_> Aw, now this is sad: configure: error: unsupported target triples "i686-pc-mingw32" found
[09:17:34] <dbaupp> rfw: is that the only variant in your enum?
[09:17:44] <rfw> dbaupp: nope
[09:17:49] <dbaupp> rusti: enum A { A(@A) }
[09:17:58] <rfw> i also have BinaryExpression(@Exp, @BinOp, @Exp)
[09:18:01] <dbaupp> rusti: enum A { A(@A), B }; 1
[09:18:02] <rusti> 1
[09:18:12] <ssbr_> rfw: you need a base case
[09:18:15] <rfw> ah
[09:18:45] <dbaupp> rfw: got it? :)
[09:18:52] <rfw> dbaupp: yeah
[09:18:55] <rfw> but that seems weird
[09:19:04] <rfw> why does it require a base case?
[09:19:05] <aatch> rfw, basically, if every since variant requires an instance of itself, then it is impossible to safely construct it
[09:19:17] <aatch> bah, bad typing
[09:19:53] <ssbr_> rfw: otherwise you could never have an actual value of that type exist in your program
[09:19:59] <ssbr_> ("never"?)
[09:20:07] <dbaupp> rfw: e.g. for my `A` example, in the first one, when you try to make an A, e.g. `let a = A(@...);`
[09:20:14] <rfw> dbaupp: ah, never mind
[09:20:25] <rfw> i thought by "base case" you meant "parameterless"
[09:20:32] <ssbr_> Ah, no, no, just nonrecursive
[09:20:33] <fabiand> kimundi, rusti gives me errors again
[09:20:36] <rfw> because my code compiled without the option::Option
[09:20:45] <rfw> so i was really confused as to why it would give me an error like that
[09:20:46] <rfw> thanks :D
[09:20:55] <dbaupp> ssbr_: yes, never, unless you use unsafe code
[09:21:07] <ssbr_> dbaupp: ah, so "never"
[09:21:12] <ssbr_> or I guess aatch said it better :(
[09:21:23] <dbaupp> well, yeah. but unsafe code is illegal ;P
[09:22:15] <kimundi> fabiand: Hm, I don't get any
[09:22:31] <aatch> I don't really consider doing what would effectively be a transmute from a null pointer to a @ "good rust"
[09:23:14] <rfw> aatch: hm, is it a bug then if the compiler allows a fully recursive enum?
[09:23:34] <aatch> rfw, example?
[09:23:37] <ssbr_> rusti: let a = a;
[09:23:51] <fabiand> kimundi, I was also not completely right, I also got it with 
[09:23:54] <fabiand> rusti: let a = 1;
[09:23:56] <rusti> foo.rs:5:13: 5:16 warning: unused variable: `a`
[09:23:56] <rusti> foo.rs:5          let a = 1;
[09:23:56] <rusti>                       ^~~
[09:23:56] <rusti> note: in expansion of fmt!
[09:23:56] <rusti> foo.rs:4:12: 6:7 note: expansion site
[09:24:00] <rfw> rusti: enum A { A(@A) }; 1
[09:24:10] <kimundi> Thats a warning, but a errorless compile
[09:24:16] <fabiand> true
[09:24:23] *** Joins: mib_63puzw (Mibbit@791C1711.EC3734C3.3EE2DEAE.IP)
[09:24:24] *** Quits: mib_63puzw (Mibbit@791C1711.EC3734C3.3EE2DEAE.IP) (Quit: mib_63puzw)
[09:24:27] <rfw> aatch: one sec
[09:24:36] <kimundi> rusti: if true {fail!("bnlah");}; 4
[09:24:42] <kimundi> ... nothing
[09:24:48] <fabiand> yes, you are right
[09:25:05] <kimundi> Have to ask strcat what's up with his bot :)
[09:25:41] <rfw> aatch: that's weird, looks like i can't reproduce it
[09:25:50] <rfw> i must have been doing something really broken before
[09:25:52] <rfw> thanks anyway :D
[09:26:11] <aatch> rusti: enum A { X(@A) }
[09:26:59] *** Parts: Diablo-D3 (diablo@moz-20613698.port.east.myfairpoint.net) ()
[09:27:04] *** Joins: Diablo-D3 (diablo@moz-20613698.port.east.myfairpoint.net)
[09:28:48] <ssbr_> ugh disgusting: http://www.bpaste.net/show/ErFnTwPko9nVKftGT05E/
[09:29:03] <ssbr_> autotools, or rust's stuff, or somebody somewhere, can't understand spaces inside paths
[09:29:16] *** Quits: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com) (Ping timeout)
[09:29:19] <aatch> ssbr_, it's a known issue
[09:29:26] <aatch> With LLVM, I think
[09:29:29] <ssbr_> and Dropbox can't understand that nobody called their folders "My X" since windows XP -_-
[09:29:43] <ssbr_> aatch: Ah.
[09:30:15] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:33:52] *** Quits: Blub\w (wry@moz-70B2EA01.wireless.dyn.drei.com) (Quit: bb)
[09:37:05] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[09:40:23] *** kimundi is now known as zz_kimundi
[09:41:54] *** Joins: libertas (libertas@AC2B2B0D.8ECC0B56.593B3862.IP)
[09:50:54] * ssbr_ sighs
[09:51:02] <ssbr_> make: *** [i686-pc-mingw32/stage0/bin/rustc/i686-pc-mingw32/bin/core.dll] Error 34
[09:51:23] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:51:28] <ssbr_> I should just stop trying to develop on windows, that's what I should do.
[09:51:46] *** Quits: fireglow (fireglow@moz-DC22A4B9.firc.de) (Ping timeout)
[09:53:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:53:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/EAqHZg
[09:53:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:53:15] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[09:53:56] <bjz> dbaupp: ping
[09:55:03] <dbaupp> bjz: pong
[09:55:14] *** Joins: fireglow (fireglow@moz-DC22A4B9.firc.de)
[09:56:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:56:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/U29W5Q
[09:56:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:56:06] <EXetoC> ssbr_: that doesn't help, does it :E
[09:56:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:56:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QrDAKQ
[09:56:07] <ghrust> 13rust/06auto 141ea9c16 15Tim Chevalier: rustc: Handle struct patterns where the expected type is an enum...
[09:56:07] <ghrust> 13rust/06auto 149c0aa92 15bors: auto merge of #6200 : catamorphism/rust/issue-5358, r=nikomatsakis...
[09:56:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:56:15] <bjz> dbaupp: the difficulty with 1/sqrt(x) vs sqrt(1/x) is how NaN works
[09:56:22] <ssbr_> EXetoC: certainly doesn't
[09:56:25] <dbaupp> bjz: ah... yes
[09:56:30] <rfw> hm, another quick question: http://pastie.org/7757098
[09:56:34] <rfw> how do i make this look less horrifying?
[09:56:42] <ssbr_> I could develop in a linux VM, but when I compiled LLVM it took 22 hours. VMs are apparently pretty slow.
[09:56:52] <ssbr_> I guess I should try and fix my laptop that runs ubuntu.
[09:57:10] *** Joins: Blub\w (wry@moz-B321B2C0.wireless.dyn.drei.com)
[09:57:11] <aatch> rfw, can you drop the &'static before the strings?
[09:57:31] <rfw> oh, so you can
[09:57:33] <ssbr_> aren't untyped string literals &'static already?
[09:57:48] <ssbr_> not untyped. string literals without sigils
[09:57:49] <aatch> ssbr_, yes
[09:58:00] <rfw> i wasn't sure, i had trouble figuring out the correct pointer type to even get it into static storage
[09:58:15] <dbaupp> bjz: is the difficulty that one is incorrect, or just checking that they are correct?
[10:00:58] <dbaupp> bjz: it seems that for x=NaN, 1/sqrt(x) and sqrt(1/x) both correctly (?) give NaN, and similarly x=0 gives infinity in both cases, and x=infinity gives 0
[10:01:05] <aatch> Modes are officially dead!
[10:01:15] <dbaupp> aatch: \o/
[10:01:28] <aatch> As of ~7 minutes ago
[10:03:18] <bjz> rusti: let x = f64::neg_infinity; (1.0 / f64::sqrt(x), f64::sqrt(1.0/x))
[10:03:19] <rusti> (NaN, -0)
[10:03:30] <bjz> rusti: let x = -1.0; (1.0 / f64::sqrt(x), f64::sqrt(1.0/x))
[10:03:31] <rusti> (NaN, NaN)
[10:03:55] <dbaupp> bjz: ah
[10:03:56] <bjz> dbaupp: basically just neg_infinity
[10:04:03] <dbaupp> special case?
[10:04:08] <EXetoC> ssbr_: still seems a bit long. was it swapping constantly or something?
[10:04:21] *** zz_kimundi is now known as kimundi
[10:04:29] <ssbr_> EXetoC: no. It surprised everyone everywhere and I'll never know why my VM is so slow.
[10:04:52] <aatch> EXetoC, also, LLVM takes like 3 hours on my machine.
[10:05:13] <EXetoC> oh
[10:05:25] <aatch> LLVM is a very slow compile
[10:05:37] <aatch> which is why it isn't re-done every time
[10:05:39] <dbaupp> i.e. sqrt(1/x) is about 20% more accurate (assuming my dodgy analysis was correct), so we should "fix" the neg_infinity
[10:06:07] <dbaupp> bjz: actually. I would say that sqrt(1/-inf) = 0 is correct? 
[10:06:08] <EXetoC> it took maybe 20 minutes here, I think. that's with 4*3.8GHz though
[10:06:19] * dbaupp googles for standards
[10:06:41] <aatch> EXetoC, yeah, I've only got 4*2.2GHz
[10:06:55] <aatch> But my machine is ~6 years old
[10:07:35] <dbaupp> EXetoC: how long does the bootstrap take without LLVM?
[10:08:37] <dbaupp> bjz: what does rsqrtss do?
[10:09:32] <EXetoC> aatch: is it swapping on your machine then? since each core is 40% slower (roughly), while still taking more than twice as long than for me
[10:09:53] <EXetoC> dbaupp: not sure I've ever built rust without also building LLVM
[10:10:13] <EXetoC> I should re-build though and see how long everything takes, just to make sure that I'm not being completely wrong here
[10:10:16] <ssbr_> EXetoC: don't CPU manufacturers keep going on and on about their performance increases even for each clock cycle?
[10:10:24] <ssbr_> there's six years of those, too
[10:10:40] <ssbr_> although that probably doesn't account for everything. Oh well.
[10:10:42] <aatch> EXetoC, I also have a pretty crappy HD. I'm guessing it's a factor since all those files need to be read as well
[10:10:55] * aatch needs to upgrade
[10:11:06] <EXetoC> so maybe a little more than 40%. eh, enough speculating :>
[10:12:00] <EXetoC> *guessing
[10:12:23] <bjz> dbaupp: rsqrtss(-inf) == NaN
[10:12:38] <dbaupp> bjz: oh
[10:12:45] <dbaupp> special case it is then?
[10:12:50] <bjz> :(
[10:13:32] <dbaupp> yeah :( (also, what's the syntax for registers in asm!?)
[10:17:58] <EXetoC> yes other factors as well, of course. anyway, I'll time it this time
[10:18:04] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[10:18:39] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[10:19:35] <bjz> rusti: fn length<T>(xs: &[T]) -> uint { xs.foldl(0, |x,_| x + 1 } } length([1, 2, 3])
[10:20:25] <dbaupp> rusti: fn length<T>(xs: &[T]) -> uint { xs.foldl(0, |x,_| x + 1 } } length(&[1, 2, 3])
[10:20:37] <kimundi> bjz: rusti seems to ignore errors atm :(
[10:20:39] <dbaupp> bjz: rusti no longer prints errors
[10:20:50] <bjz> rusti: rfsdgfdgsdf
[10:20:54] <bjz> rusti: 1
[10:20:55] <rusti> 1
[10:21:27] <kimundi> bjz: Btw, yesterday you talked about number string conversion needing a rewrite, what did you mean with that exactly? :)
[10:23:46] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[10:23:53] <bjz> I was asking strcat whether we can fix it or will have to rewrite it. It's working fine at the moment, but apparently it allocates. It would also be nice if it fit with the current trait heirachy.
[10:24:14] <aatch> dbaupp, inline asm is the standard one in LLVM, so it's whatever clang/gcc is
[10:24:20] <bjz> we were also looking into how we could reform the fmt api too
[10:24:35] <bjz> aatch: seems to be interested in lending a hand
[10:24:40] <aatch> bjz, ah yes
[10:24:49] <aatch> I have some ideas for that
[10:25:03] <dbaupp> aatch: yep, got it :)
[10:25:10] <kimundi> bjz: Ideally it would get an implementation for free for the trait hierachy.
[10:25:12] <bjz> it's awesome that we have something working kimundi
[10:25:49] <bjz> but yeah, we're looking for something extensible
[10:25:49] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[10:26:05] <kimundi> bjz: Yeah just wanted to chime in that it's solved the way it currently is because no other way worked :) 
[10:26:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:26:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149c0aa92 to 14213f7b2: 02http://git.io/N3iJvQ
[10:26:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:26:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:26:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kB_fJw
[10:26:07] <ghrust> 13rust/06auto 14a0d8873 15Seo Sanghyeon: More accurate spans
[10:26:07] <ghrust> 13rust/06auto 14a0c64e8 15bors: auto merge of #6208 : sanxiyn/rust/accurate-span, r=thestinger
[10:26:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:26:08] <bjz> possibly drawing upon what go does
[10:26:19] <bjz> kimundi: of course
[10:26:38] <bjz> kimundi: it was a bloody pain not being able to print u8s :)
[10:26:51] <bjz> so it's been great having that :)
[10:27:16] <bjz> aatch: did you have a gist?
[10:27:17] <kimundi> bjz: The problem is, for something like the string conversion you need a way to accept an arbitrary set of numeric traits, and react apropiatly
[10:27:23] <aatch> bjz, not yet
[10:27:32] <aatch> I can throw what I have of the parser up if you want
[10:27:47] <kimundi> bjz: That's not possible, so instead you need a seperate trait that describes properties for all numbers the same way.
[10:28:37] <bjz> kimundi: but you have to think of the ramifications beyond just numbers
[10:28:43] <kimundi> There is a section in numeric bikeshed about that. Basically we need a trait with wich to query 'has this type a concept of infinity? if yes, at wich value' etc
[10:28:52] <kimundi> bjz: Sure
[10:29:04] <dbaupp> kimundi, bjz: it's possibly possible to increase code sharing using macros, especially now that they can be exported
[10:29:14] <bjz> dbaupp: indeed
[10:29:26] <kimundi> bjz: But even in a broader system, you want to have as few redunancies as possble, right?
[10:29:27] <bjz> dbaupp: there's a great possibility for that
[10:29:29] <EXetoC> I wonder if clang can build llvm on my system. that might be slightly faster
[10:29:45] <EXetoC> compilation times was one thing clang was better at IIRC
[10:29:45] <dbaupp> so we don't need to do the trait system which was the only way it used to be possible
[10:29:56] <bjz> kimundi: we want to avoid code duplication, so macros would be a good way to do that
[10:30:09] <dbaupp> EXetoC: it would be a little strange if clang couldn't build LLVM ;P
[10:30:20] <kimundi> dbaupp, bjz: Yeah but code duplication can also be solved without macros.
[10:30:34] <kimundi> Wich I would prefer :)
[10:30:36] <bjz> kimundi: but it doesn't make sense to have NaN and infinity defined for integers
[10:30:47] <EXetoC> dbaupp: I guess you're right c(:)
[10:31:04] <kimundi> bjz: I'm talking about a seperate trait, disconnected from the normal numeric trait hierachy
[10:31:32] <bjz> kimundi: but is that going down the path of code duplication?
[10:31:59] <kimundi> bjz: No, because it would have a seperate, special purpose
[10:32:17] <dbaupp> kimundi, bjz: this is probably a case of write some code as experiments/iterate a few times and see what combination of macros and traits works best
[10:32:28] <bjz> dbaupp: definitely
[10:32:58] <kimundi> bjz: The normal numeric traits modell how the numbers work. The trait I'm talking about is an optional help trait that's implemented on all numbers, and is more a 'structural and semantic description' of a number type.
[10:33:59] <EXetoC> it appears to have taken about 7 minutes for llvm to compile
[10:34:26] <dbaupp> kimundi: the problem is then trying to work out how rationals and complexes and octonions and matrices and polynomials fit into the "printing numbers" heirachy
[10:34:36] <dbaupp> given they are all numbers of some sort
[10:34:41] <kimundi> dbaupp: That's a seperate issue
[10:34:56] *** Quits: fireglow (fireglow@moz-DC22A4B9.firc.de) (Ping timeout)
[10:35:41] <kimundi> dbaupp: Sorry If that'S unclear, I'm not talking about this specific case. It's just an example of a corner case where you want to write numeric polymorphic code that doesn't fit in the normal numeric trait hierachy
[10:35:43] <dbaupp> kimundi: oh, to be clear, you're specifically talking about the primitive types?
[10:36:30] <kimundi> dbaupp: Yeah, primitives/scalar numbers only
[10:37:13] <kimundi> Basically a way to say 'I accept int/float alike, but also want to, for example check for NaN IF the type is one that has that concept'
[10:37:37] <kimundi> ANd that's wwhat needed to, for example write one function that can emit/parse both uint/int/float
[10:38:22] <kimundi> It's a special corner case, but if it allows to have one generic implementation for all number parsers in rust, then I think it's worth it to have, and to expose it if it's genreal enought :)
[10:38:23] <dbaupp> hm, I agree that the [u]int's should be covered by a single such function, but it might be better to not compromise it's simplicity to fit float in there too
[10:38:41] <dbaupp> and instead the common parts either as a macro, or by the float parser calling the int parser
[10:38:46] <dbaupp> *share
[10:39:35] <kimundi> dbaupp: Well... The function is already written :) But yeah I have no idea how perofmrant the final code endeds up. Maybe a a set of fucntions that get 'stamped out' by a macro is better, I dunno
[10:40:32] <dbaupp> kimundi: yes, I know... I've written part of it :P but we at least need to redo the to_string version to make it allocate less
[10:40:35] <kimundi> But If monomorphisation (or however it's spelld :P) + inlining etc result s in a function that's just as fast as a amcro generated one, why not? :)
[10:40:49] <kimundi> dbaupp: Yeah, not arguing about that
[10:41:11] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[10:42:01] <dbaupp> kimundi: code clarity would be the only reason to change it
[10:42:37] *** Quits: Blub\w (wry@moz-B321B2C0.wireless.dyn.drei.com) (Ping timeout)
[10:45:31] <kimundi> (Sorry if I'm coming on a bit strong here... Just trying to understand why I have a different viewpoint than others in this area.)
[10:53:14] *** Joins: fireglow (fireglow@moz-DC22A4B9.firc.de)
[10:53:45] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Input/output error)
[10:54:35] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:55:45] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[10:56:11] <EXetoC> dbaupp: LLVM compiled in about 7 minutes, and the rest in about 22 minutes. too bad it doesn't utilize all the cores that often, but I don't know if anything can be done about that
[10:57:29] <dbaupp> EXetoC: ah, nice :) I compile the rest in about that time too... I'm pretty sure LLVM is slower though
[10:57:53] <bjz> kimundi: integers and and floating point numbers are conceptually different.
[10:58:25] <dbaupp> kimundi, bjz: I just had a look, and even at opt-level=3 with the code all in the same file, the constant folding/monomorphisation doesn't remove everything that can go :(
[10:58:43] <dbaupp> e.g. it generates
[10:58:50] <dbaupp> movl	$1, %r12d
[10:58:50] <dbaupp> testb	%cl, %cl
[10:58:51] <dbaupp> je	.LBB82_179
[10:59:15] <bjz> kimundi: there might also be savings to be made both in complexity and speed by differentiating between signed and unsigned integers
[10:59:22] <kimundi> bjz: Sure, from representation, precision standpoints. But from a 'write it down in a string as positional system' they are very simsilar. A row of digits. :P
[10:59:30] <dbaupp> for the if exp_found { .. } floating point part of the from_str_bytes_common
[10:59:30] <EXetoC> dbaupp: is your job count also set to cores+1?
[10:59:34] *** Joins: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com)
[10:59:39] <bjz> kimundi: ideally we don't want to be matching on enums at run time
[11:00:05] *** Quits: pyrac (pyrac@A9EC89DE.73C89388.AD05C589.IP) (Quit: pyrac)
[11:00:15] <dbaupp> EXetoC: for LLVM? nah, I'm always using the computer for other stuff, so it's normally nice'd and at either cores or cores-1
[11:00:46] <kimundi> bjz: I have no problem with factoring it out into different functions if that's the best. :) Just trying to determine/understand if/why that is so.
[11:01:18] <kimundi> bjz: Yeah runtime overhead I undertsand as contra argument
[11:01:32] <bjz> kimundi: having conditionals for the various types is also cognitive overhead
[11:02:19] <bjz> it braids the logic together and makes it harder to understand
[11:02:35] <bjz> also to make performance improvements
[11:02:38] <kimundi> Also understandable. But I'm not sure if a macro would be more readable. Unless the macro soultion is explicit 'copy paste the same code with various sections removed'
[11:03:10] <bjz> you could have a macro to implement uints, ints and floats separately
[11:03:21] <bjz> for example
[11:03:27] <dbaupp> kimundi: macros are basically compile time functions, so it should be fine, with sufficient programmer finesse :)
[11:03:31] <bjz> with a single 'format' trait
[11:04:00] <kimundi> It's a hard problem to be sure. The code flow is very branchy, and we want to factor it in a way that it isn't so, without runtime overhead...
[11:04:28] <kimundi> dbaupp: The probelm is 'how to acttually write the macro'
[11:04:55] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[11:04:56] <bjz> they're not too tricky if it's only type substution
[11:05:45] <kimundi> dbaupp: The way I see it, a macro would basically mix-match the various code sections together so that a integer function doesn'T have the fractional parsing sections, an unsigned no sign detection etc.
[11:06:01] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[11:06:14] <dbaupp> kimundi: yeah, same as functions would do
[11:06:46] <kimundi> sorry, am afk for a bit now.
[11:07:42] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[11:08:37] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[11:09:47] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[11:13:09] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[11:16:29] *** kimundi is now known as zz_kimundi
[11:20:25] *** Joins: pyrac (pyrac@A9EC89DE.73C89388.AD05C589.IP)
[11:24:29] *** zz_kimundi is now known as kimundi
[11:25:21] <dbaupp> bjz: https://github.com/mozilla/rust/issues/6220
[11:26:01] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[11:26:20] <bjz> dbaupp: cheers
[11:27:02] <bjz> dbaupp: that's a good idea, making it a separate issue from the numeric traits thing
[11:27:20] <kimundi> Yeah, its seperated :)
[11:27:26] <bjz> dbaupp: I was going to bring it up but there's enough clutter there as it is :)
[11:30:21] <ssbr_> Hm, compiling rust from scratch only took an hour and a half. Nice. :)
[11:30:46] <aatch> bjz, here is my completely untested format parser: https://gist.github.com/Aatch/fb94960ab770c7df5718
[11:30:51] <aatch> it compiles.
[11:30:54] <aatch> That is it though
[11:31:43] <kimundi> bjz: Is there logarithm for arbitray base? Or dou you have to calculate that manually.
[11:31:55] <kimundi> (In thbe numeric traits)
[11:34:05] <bjz> kimundi: let me look. if it's not in there already it could be added
[11:34:54] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[11:35:37] <kimundi> bjz: Seems there is ln, log2 and log10
[11:37:18] <bjz> kimundi: so you'd want a function for log(x)/log(b)?
[11:38:58] <kimundi> bjz: Was looking ofr one at least. If it's necessary to add, I dunno.
[11:39:06] <bjz> logb(&self, b:f32) -> f32 { self.log()/b.log() }?
[11:39:33] <bjz> I think there's f64::logarithm
[11:39:35] <kimundi> looks good.
[11:39:41] <bjz> but that's not in a trait
[11:40:01] <kimundi> Yeah, was just checkinmg if it's there or not.
[11:40:10] <bjz> doomlord_: do you think that's trait-worthy? ^
[11:40:38] <bjz> or doomlord
[11:40:43] <bjz> whichever you are
[11:40:46] <bjz> :)
[11:44:46] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[11:46:03] <dbaupp> FWIW, I just did some scouting through glibc to look at how they do number conversions (it's in a comment on #6220)
[11:47:33] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[11:48:26] <bjz> hah, interesting
[11:48:56] <bjz> btw, did you see what me and aatch: were talking about earlier today?
[11:49:23] <bjz> to do with fmt?
[11:50:13] <dbaupp> um, maybe
[11:50:14] <bjz> and having a trait to allow users to define format specifiers more flexibly?
[11:50:21] <dbaupp> oh, yes
[11:50:28] <dbaupp> in passing
[11:50:39] <dbaupp> like python's __format__
[11:50:43] <dbaupp> ?
[11:52:32] <bjz> http://golang.org/pkg/fmt/
[11:52:53] <bjz> ooh, might have to looki into __format__
[11:54:27] <aatch> dammit, read the wrong column in `man ascii`
[11:55:03] <bjz> http://docs.python.org/3/reference/datamodel.html#object.__format__
[11:55:12] <kimundi> hm, seems I have to recompile rustc again befor starting strconv hacking... Have a version from during the Div rename xD
[11:55:32] <kimundi> (Looking into restructuring the code as macro)
[11:55:34] <aatch> I read the hex column as the dec column
[11:55:46] <dbaupp> bjz: yeah
[11:56:26] <dbaupp> it would lose the compile time gaurantees of fmt!, as Aatch has implemented it above
[11:56:50] <aatch> Huh? 
[11:56:58] <aatch> I've just got a parser for the strings
[11:56:58] <dbaupp> wouldn't it?
[11:57:16] <dbaupp> oh, well, i obviously infered something I shouldn't :P
[11:57:36] <kimundi> Shouldn't a trait thats integrated into rustc be callable from fmt!() at compiletime?
[11:57:39] <aatch> it could be used to generate the code for fmt!
[11:57:47] <dbaupp> the implementation where types have .format(format_spec: Spec)
[11:58:11] <dbaupp> so any type can choose to implement any number of 'c'/'s'/'u'/etc
[11:58:22] <bjz> dbaupp: that is true, very true. dunno if there's a way around that. hum
[11:58:49] <dbaupp> bjz: I was thinking 'SFmt' 'DFmt' 'FFmt' traits
[11:58:58] <dbaupp> one for each possible specifier
[11:59:08] <bjz> dbaupp: possible
[11:59:10] <dbaupp> that seems like it might be annoying though
[11:59:31] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Connection reset by peer)
[11:59:45] <bjz> does go do compile time typechecking with fmt?
[11:59:50] <bjz> it must do
[12:00:13] <dbaupp> yeah, doing that would also solve https://github.com/mozilla/rust/issues/1653
[12:00:51] <aatch> Which is why I didn't bother with the length field
[12:01:04] <aatch> (that and it makes it so much more complex)
[12:01:47] <kimundi> hm, what's the general interface you had in mind atm?
[12:02:15] <kimundi> a way for a type to format itself using the buildin specifiers?
[12:02:31] <dbaupp> bjz: I can't find any reference to compile time format string checking in go
[12:02:34] <dbaupp> kimundi: yes
[12:02:37] <kimundi> so that you can do fmt!("number : %.2f ", MYNUmberType) ?
[12:02:42] <dbaupp> yeah
[12:02:56] <dbaupp> (and hopefully get it checked at compile time)
[12:03:16] <aatch> I don't see why fmt! can't just do some a few tricks to make it type-check
[12:03:27] <aatch> it might not be the prettiest code.
[12:03:29] <bjz> kimundi: so say for complex numbers, rationals, vectors etc
[12:03:54] <dbaupp> aatch: without having a trait for each specifier?
[12:04:03] <kimundi> Hm. I would say: A trait that has a format function for each option, or one that takes the option as char. return value some enum result type. The buildings implement it, fmt!("") typechecks at compiletime, and calls those functions to build
[12:04:51] <dbaupp> kimundi: i.e. trait Format { fn format_c(), fn format_s(), fn format_n(), ... } ?
[12:05:19] <kimundi> dbaupp: That if the set of formt options sshould be hardcoded
[12:05:38] <dbaupp> i'm unsure how that would get checked at compile time?
[12:05:40] *** Quits: mozillian349 (bzlandfill@moz-ECDFD90C.dynamic.hinet.net) (Quit: CGI:IRC (EOF))
[12:06:27] <dbaupp> (e.g. wouldn't most of the implementations just be fail!() or something, since they have to be implemented, and thus as far as fmt! can tell, the type implements every format specifier?)
[12:06:43] <dbaupp> (where implementations = method implementations)
[12:07:14] <kimundi> dbaupp: The trait could also have a 'supports(Option) -> bool' function
[12:07:50] <kimundi> dbaupp, wich fmt! would call at compile time to query what'S suported.
[12:08:09] <dbaupp> kimundi: compile time? (as far as I can tell, the only option we have to encode compile time information is either attributes or the type system, i.e. traits)
[12:08:19] <kimundi> It's a bit tricky... Have to think more about it. Sounds like similar issues to the numstr conversion :)
[12:08:36] <kimundi> dbaupp: fmt!() Is arbitrayr rust code
[12:09:05] <kimundi> dbaupp: It would be possible for it to do such things
[12:09:12] <dbaupp> personally, I would prefer not giving fmt! introspection superpowers (beyond what it already has), and work within the current rust framework
[12:10:09] <dbaupp> kimundi: yeah, I've been working on syntax extensions a bit... it definitely wouldn't be trivial to execute a supports method, especially without a jit to run the code
[12:10:22] <dbaupp> i.e. I think it would reduce to either evaluating the ast directly
[12:10:29] <kimundi> Well, it would just be an interface that fmt!() uses.
[12:10:40] <dbaupp> or dumping it out to file/blahblah
[12:10:55] <kimundi> ah, right...
[12:12:14] <kimundi> Hm... There could be a trait for each Format option, and fmt!() checks if the type implents it? if yes, call it at runtime (should be code thats as efficient as hardcoded), else error
[12:12:45] <dbaupp> yes, that's the conclusion I came to also
[12:13:20] <kimundi> It's a bit cluncky, but that's what compiletime guaranteed will give you I guess
[12:13:33] <dbaupp> so when it sees a 'c' it just forces the corresponding expression to have a type that implements CFormat
[12:13:54] <kimundi> yup
[12:14:29] <kimundi> which then has a 'format_c(&self, writer: Writer)' method or similar
[12:14:35] <dbaupp> yeah
[12:15:00] <dbaupp> I feel like that would be a "perfect" solution, except for the 20 extra traits required
[12:15:04] <kimundi> (Sorry If that was concluded earlier, didn't read teh full backlog)
[12:15:12] <kimundi> jub
[12:15:32] <kimundi> But macros and trait inheritance could maybe make thhat not-so-worse?
[12:15:34] <dbaupp> I'd suggested it, but we hadn't really explored it very much
[12:15:40] <aatch> btw, to support the standard printf specifiers, its 8 or 9
[12:15:48] <dbaupp> oh, only 8
[12:15:54] <dbaupp> that's nicer
[12:16:21] <aatch> We can convert the extras to be in terms of the others
[12:16:37] <aatch> so 'i' and 'd' just check for DFormat
[12:16:42] <aatch> (or whatever)
[12:16:44] <dbaupp> kimundi: I guessed it would be a one-time badness, i.e. when the traits are created and impl'ing them for all the appropriate types, so not so bad
[12:16:56] <kimundi> yeah
[12:17:18] <dbaupp> should I send an email to the mailing list with this as a suggestion?
[12:17:38] <kimundi> But it would also be nice if you could define a fallback trait, that accepts the option as char. So that you caould define own functions
[12:17:46] <dbaupp> (assuming that you people here approximately think that this isn't entirely stupid)
[12:18:15] <dbaupp> kimundi: but you can define functions via the traits?
[12:18:32] <dbaupp> (keeping the compile time guarantee is fairly important in my mind...)
[12:18:52] <aatch> dbaupp, as far as I know theres no other way to do it, without a massive overhaul of the current code
[12:19:15] <kimundi> dbaupp: A fallback so that you can swap compiletime guarantee for arbitrary format string. Only invoked if actually used.
[12:19:19] <dbaupp> aatch: yeah, that's the conclusion I came to also
[12:19:42] <aatch> Oh, one thing is that 's' could check for ToStr, instead of some other trait
[12:20:01] <kimundi> trait FormatDynamic { format_dynamic(&self, option: char, size, precision) -> Option }
[12:20:21] <aatch> Or at least is done in a way that means anything that implements ToStr works
[12:20:24] <dbaupp> kimundi: maybe with %! or something (like %?, but customisable)
[12:20:27] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Input/output error)
[12:20:28] <kimundi> aatch: Yeah, that would be done that way I guess
[12:21:15] <aatch> dbaupp, make '!' a flag, that would then tell fmt! to defer it to runtime.
[12:21:33] <aatch> Then you can have any conversion spec you want
[12:21:41] <kimundi> afk, gonna talk later :)
[12:21:50] <dbaupp> aatch: yeah, I'd sorta assumed that SFormat would be ToStr or just have impl<S:ToStr> SFormat for  S { .. .}
[12:22:08] <dbaupp> aatch: yeah, that sounds workable
[12:22:12] <dbaupp> kimundi: cya :)
[12:22:37] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[12:24:42] <dbaupp> aatch: just to be clear, you mean %!10.3f would be dynamic?
[12:24:51] <aatch> dbaupp, yep
[12:25:11] <aatch> As long as the value implements some appropriate trait
[12:26:01] <dbaupp> yeah
[12:26:10] <aatch> You'd then have something like format(w:&Writer, placeholder:Placeholder);
[12:26:39] <dbaupp> where placeholder gives information about the actual format specifier?
[12:26:46] <aatch> dbaupp, yup
[12:27:01] <aatch> I'm intended for the parser I'm writing to be a part of this solution
[12:27:33] <dbaupp> :)
[12:28:03] <aatch> intending*
[12:28:27] <dbaupp> did the traits idea come up earlier? (I was only half paying attention)
[12:28:35] <aatch> dbaupp, not sure
[12:28:51] <aatch> bjz mentioned them as a general thing
[12:29:16] <aatch> but the one-trait-per conversion spec didn't come up
[12:30:01] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[12:30:17] <dbaupp> ah, ok, cool
[12:30:41] <aatch> I'm actually pretty close to done with the core of this.
[12:30:49] <dbaupp> the parser?
[12:30:55] <aatch> dbaupp, yup
[12:31:13] *** kimundi is now known as zz_kimundi
[12:31:26] <aatch> You make a ParserDesc, which is an indicator, a set of flags and a set of conversion specifiers
[12:32:58] <busylizzy> Hi. Does anyone know something about nested types in rust? Did this article http://smallcultfollowing.com/babysteps/blog/2013/04/02/associated-items/ lead to something, or nobody cares?
[12:33:11] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[12:33:17] <dbaupp> busylizzy: everybody cares :)
[12:33:22] <bjz> busylizzy: lots of us are interested
[12:33:29] <dbaupp> in the sense everybody thinks they're really useful
[12:33:39] <dbaupp> they just haven't been implemented yet
[12:33:41] <aatch> But not a "right now" thing
[12:33:48] <bjz> busylizzy: the sad thing is that there's just so much to do
[12:33:49] <bstrie> they're in danger of not making it in for 1.0
[12:33:53] <aatch> They are unlikely to be in before 1.0
[12:33:54] <bjz> :(
[12:34:00] <bjz> yup
[12:34:05] <bjz> what they said
[12:34:08] <busylizzy> D:
[12:34:22] <dbaupp> busylizzy: (the person who wrote it is a core rust dev)
[12:34:23] <bstrie> busylizzy: unless you save the day with a hail-mary patch, of course
[12:34:59] <bjz> :D
[12:35:08] <bjz> that would be amazing
[12:35:13] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[12:35:19] <aatch> rust-buildbot: dance
[12:35:20] <rust-buildbot> <(^.^<)
[12:35:20] * bjz isn't smart enough
[12:35:21] <rust-buildbot> <(^.^)>
[12:35:22] <rust-buildbot> (>^.^)>
[12:35:22] <rust-buildbot> (7^.^)7
[12:35:24] <rust-buildbot> (>^.^<)
[12:35:36] <dbaupp> does rust-buildbot do anything but dance?
[12:35:42] <aatch> dbaupp, I have no idea
[12:35:46] <bstrie> isn't that enough?
[12:35:49] <aatch> rust-buildbot: help
[12:35:50] <rust-buildbot> Get help on what? (try 'help <foo>', or 'commands' for a command list)
[12:35:56] <dbaupp> maybe it sings too?
[12:36:00] <aatch> rust-buildbot: help commands
[12:36:01] <rust-buildbot> Usage: commands - List available commands
[12:36:05] <aatch> rust-buildbot: commands
[12:36:05] <rust-buildbot> buildbot commands: commands, dance, destroy, excited, force, hello, help, last, list, mute, notify, source, status, stop, unmute, version, watch
[12:36:06] <dbaupp> rust-buildbot: commands
[12:36:07] <rust-buildbot> buildbot commands: commands, dance, destroy, excited, force, hello, help, last, list, mute, notify, source, status, stop, unmute, version, watch
[12:36:14] <cmr> rust-buildbot: source
[12:36:14] <rust-buildbot> My source can be found at http://buildbot.net/
[12:36:14] <dbaupp> rust-buildbot: excited
[12:36:14] <rust-buildbot> What you say!
[12:36:24] <cmr> rust-buildbot: status
[12:36:24] <rust-buildbot> auto-linux: idle, last build 1h28m37s ago: failed test
[12:36:24] <rust-buildbot> auto-mac: idle, last build 1h26m38s ago: failed test
[12:36:24] <rust-buildbot> auto-win: idle, last build 1h39m47s ago: build successful
[12:36:24] <rust-buildbot> dist-linux: idle, last build 735h45m03s ago: build successful
[12:36:24] <rust-buildbot> dist-win: idle, last build 737h57m42s ago: build successful
[12:36:24] <rust-buildbot> doc: idle, last build 67h08m25s ago: failed compile
[12:36:24] <rust-buildbot> incoming-full-bsd: idle, last build 30m17s ago: build successful
[12:36:24] <rust-buildbot> incoming-full-linux: building(testing) [ETA 16m34s]
[12:36:24] <rust-buildbot> incoming-full-mac: idle, last build 6m06s ago: build successful
[12:36:24] <rust-buildbot> incoming-full-win: idle, last build 1h43m16s ago: build successful
[12:36:24] <rust-buildbot> incoming-quick-bsd: idle, last build 53m36s ago: build successful
[12:36:25] <rust-buildbot> incoming-quick-linux: idle, last build 2h00m34s ago: build successful
[12:36:27] <rust-buildbot> incoming-quick-mac: idle, last build 1h59m11s ago: build successful
[12:36:27] *** concrete.mozilla.org sets mode: +M 
[12:36:30] <bjz> rust-buildbot: help destroy
[12:36:35] <bjz> rust-buildbot: destroy
[12:36:57] <cmr> I think he may have been automuted :(
[12:37:01] *** Quits: dbaupp (Thunderbir@moz-91B99879.lns20.syd6.internode.on.net) (Quit: dbaupp)
[12:37:05] *** Joins: dbaupp (Thunderbir@moz-91B99879.lns20.syd6.internode.on.net)
[12:38:16] <cmr> sorry :(
[12:38:30] <cmr> yay flood protection though?
[12:39:45] <bjz> :P
[12:40:06] <aatch> Can I talk now?
[12:40:08] <aatch> Yay!
[12:40:40] <aatch> I guess I should have registered my nick anyway
[12:41:05] <rfw> either i'm missing something, or does rust not have full stack traces?
[12:41:28] *** concrete.mozilla.org sets mode: -M 
[12:41:28] <rfw> because i tried to slice a string at a bad position and my program just dies with an error in str.rs and nothing more
[12:41:41] <dbaupp> rfw: are you on windows?
[12:41:46] <rfw> dbaupp: nope, linux
[12:41:52] <bjz> rust-buildbot: help destroy
[12:41:52] <rust-buildbot> No usage info for 'destroy'
[12:41:54] <cmr> rfw: the best stack traces come from gdb, but you can also do... RUST_LOG=::rt::backtrace, I think, and get simpler backtraces
[12:41:58] <bjz> rust-buildbot: destroy
[12:41:59] <rust-buildbot> Something bad happened (see logs): <type 'exceptions.AttributeError'>
[12:42:03] <dbaupp> ok, run with `RUST_LOG=::rt::backtrace ./program`
[12:42:11] <bjz> :P
[12:42:20] <rfw> ah, neat
[12:42:36] <rfw> i just didn't see it documented anywhere
[12:42:54] <dbaupp> it's in the wiki somewhere, i think... it's not obvious at all
[12:43:08] <aatch> Its in the manual, under "logging"
[12:44:04] <rfw> cool, thanks!
[12:47:38] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[12:49:18] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[12:51:45] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[12:52:25] *** Joins: berak (chatzilla@43C42D4B.6062171A.1A5CC7E5.IP)
[12:52:45] *** Parts: berak (chatzilla@43C42D4B.6062171A.1A5CC7E5.IP) ()
[12:55:25] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[12:58:29] <aatch> dbaupp, https://gist.github.com/Aatch/fb94960ab770c7df5718 my now somewhat tested parser
[13:00:44] <bjz> aatch: neat!
[13:01:08] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[13:01:20] <dbaupp> aatch: looks nice
[13:01:32] <aatch> I'm pretty sure you could implement printf in that, though without the length field
[13:02:05] <aatch> Parsers aren't something I've done much of though
[13:02:22] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[13:02:23] <dbaupp> aatch: looks pretty nice
[13:02:24] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[13:02:35] <dbaupp> much nicer than the existing fmt code
[13:02:45] <aatch> dbaupp, thanks lol.
[13:02:52] <aatch> It's also a lot more generic
[13:03:01] <dbaupp> (combined with the traits thing, I think the fmt code would be amazingly brief)
[13:03:09] <bjz> aatch: heh, recursive fmt-ing required here: msg: fmt!("Unexpected character '%c' found, expected '%c'", c, self.desc.indicator),
[13:03:24] <dbaupp> and clear (although most of the implementation is moved to the libraries)
[13:03:55] <aatch> The idea is to have a ParserSpec with the flags and specifiers that we have for fmt!
[13:04:05] <aatch> which means people could still write their own libraries
[13:04:13] <aatch> I mean parsers
[13:04:14] <dbaupp> aatch: is it alright if I through a link to that in my mailing list RFC thing?
[13:04:20] <aatch> dbaupp, sure
[13:05:00] <bjz> this is exciting!
[13:05:15] * bjz is excited
[13:05:38] <dbaupp> we're on the cutting edge of compile-time-checked format string technology!
[13:06:08] *** Joins: catpig (catpig@moz-930C30AC.dip0.t-ipconnect.de)
[13:06:11] <aatch> Oh, for making something that takes a Writer, should it be a trait object or a trait bound?
[13:06:58] <aatch> Basically, I'm planning on having a function that writes the normal strings into the writer and calls a callback for specifiers and errors
[13:07:39] <dbaupp> bound, I think
[13:07:47] <bjz> dbaupp: many have tried and failed before us :(
[13:08:10] <bjz> dbaupp: well, succeeded, but imperfectly
[13:08:22] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[13:08:35] <indutny> hey guys
[13:08:41] <bjz> hoya!
[13:08:42] <indutny> how can I cast int to enum?
[13:08:44] <dbaupp> bjz: imagine the riches that await us, we must continue!
[13:08:54] <aatch> indutny, you cannot
[13:08:58] <aatch> (currently)
[13:09:06] <indutny> oh
[13:09:07] <indutny> gosh
[13:09:12] <bjz> heh
[13:09:17] <indutny> what's the purpose of enum A { B = 0x1 } then?
[13:09:19] <aatch> you can (if you are sure that it is correct) use unsafe code
[13:09:23] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[13:09:25] <bjz> transmute works
[13:09:30] <indutny> ok
[13:09:32] <indutny> thank you
[13:09:35] <aatch> indutny, what if I have 2?
[13:09:40] <dbaupp> indutny: you can cast *to* an int safely
[13:09:46] <bjz> that;s the problem
[13:09:49] <aatch> 2 as A -> ?
[13:09:50] *** zz_kimundi is now known as kimundi
[13:09:55] <indutny> aatch: I know
[13:09:59] <indutny> I can check it on my side
[13:10:09] <indutny> because I know maximum value
[13:10:17] <aatch> indutny, just pointing out "why" it's like that
[13:10:19] <indutny> its just a bit pain to deal with it otherwise
[13:10:23] <indutny> aatch: got it
[13:11:01] <indutny> so
[13:11:08] <indutny> unsafe { cast::transmute(var) }
[13:11:16] <aatch> yep
[13:11:33] <bjz> dunno what it does if var is wrong though
[13:12:47] <aatch> bjz, hmm, depending on how match statements are generated, either it hits none of them, or the default match
[13:12:50] <indutny> you mean out-of range?
[13:12:53] <bjz> indutny: because of all the weirdness surrounding them, I think 'C-style-enums' might be slated for removal. replaced by a macro though
[13:13:09] <indutny> bjz: surely that could work
[13:13:09] <indutny> or
[13:13:12] <indutny> they can get a constructor
[13:13:17] <indutny> like Enum(int)
[13:13:36] <dbaupp> rusti: enum A { A = 0x1 } unsafe { cast::transmute::<uint,A>(2) }
[13:13:36] <indutny> which will check if there is value
[13:13:54] <dbaupp> rusti: enum A { A = 0x1 } unsafe { cast::transmute::<uint,A>(1) }
[13:13:55] <rusti> A
[13:14:21] <dbaupp> ok, I guess the first one segfaulted or something?
[13:14:24] <dbaupp> strcat
[13:14:26] <bjz> :P
[13:14:28] <dbaupp> where are you?
[13:14:44] <bjz> he is somewhere
[13:15:03] <bjz> over the rainbow
[13:15:13] <aatch> way up high
[13:15:18] <bjz> o_o
[13:15:31] <bjz> \o_o/
[13:15:46] <aatch> bjz, what?
[13:15:53] <bjz> \o_o_
[13:15:56] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:16:02] <bjz> _o_o/
[13:16:04] <aatch> I don't know semaphore
[13:16:06] <dbaupp> rust-buildbot: dance
[13:16:07] <rust-buildbot> <(^.^<)
[13:16:09] <rust-buildbot> <(^.^)>
[13:16:09] <rust-buildbot> (>^.^)>
[13:16:10] <rust-buildbot> (7^.^)7
[13:16:11] <rust-buildbot> (>^.^<)
[13:16:18] <cmr> rusti: unsafe { *(0x0 as *mut uint) = 2; }
[13:16:24] <dbaupp> ok, yeah, the unsafe cast gives
[13:16:25] <cmr> maybe
[13:16:26] <dbaupp> rust: task failed at 'enum value matched no variant', /home/huon/rust/src/libcore/repr.rs:628
[13:16:26] <dbaupp> rust: domain main @0x79c1b0 root task failed
[13:16:34] <indutny> oh
[13:16:35] <indutny> kewl
[13:17:07] <indutny> a question
[13:17:14] <indutny> will be assert! removed from release builds?
[13:17:17] <indutny> I mean
[13:17:19] <indutny> value of assert call
[13:17:41] <dbaupp> as in, will the checks be removed in the release builds?
[13:18:05] <aatch> indutny, not at the moment
[13:18:12] <aatch> it is something planned for the future
[13:19:44] <indutny> ok
[13:19:49] <indutny> will keep it in mind
[13:19:51] <indutny> dbaupp: yes
[13:19:53] <indutny> thank you
[13:19:58] <indutny> so far rust looks very good
[13:20:00] <aatch> same with debug!
[13:20:01] <indutny> and predictable
[13:20:11] <dbaupp> aatch: would your parser be able to be extended to handle fmt!("%s %{0}s", "used twice")?
[13:20:12] <indutny> despite some lack of documentation :)
[13:20:13] <indutny> haha
[13:20:15] <kimundi> dbaupp, aatch: %! could also pass its optional format speciefiers as slice to the method
[13:20:24] *** Joins: a__ (a__@moz-9BBD1F27.nycmny.fios.verizon.net)
[13:20:27] <indutny> I like have rust sources open in another tab
[13:20:34] <indutny> s/like//
[13:20:38] <indutny> and always looking at them
[13:20:54] <dbaupp> indutny: yeah :)
[13:21:10] <dbaupp> unfortunately it's the best documentation...
[13:21:13] <kimundi> %some:special{format}!
[13:21:25] <aatch> dbaupp, well, the syntax is "%*m$s"
[13:21:34] <dbaupp> aatch: oh, well, there we go
[13:21:41] <dbaupp> (what's the *?)
[13:22:08] <dbaupp> (or is it just part of the reference syntax)
[13:22:52] <dbaupp> kimundi: we were thinking that the ! would just be a flag within a normal specifier, e.g. %!s => dynamic formatting as 's'
[13:23:04] <dbaupp> kimundi: but that looks interesting
[13:23:37] <aatch> dbaupp, hmm, actually, I don't think it can handle repeated identifiers like that
[13:24:05] <dbaupp> aatch: oh...
[13:24:20] <aatch> I'll check and add it in if not
[13:24:32] <kimundi> could also define a lighweight grammar for it.
[13:24:51] <aatch> kimundi, I did
[13:25:06] <aatch> sort of
[13:25:07] <kimundi> ah
[13:25:22] <aatch> mostly for my benefit I'll admit
[13:25:56] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[13:26:01] <dbaupp> aatch: we don't have to preserve the C-printf syntax, do we?
[13:26:09] <aatch> dbaupp, nope
[13:26:32] <dbaupp> specifically, %{num}s seems nicer than %*num$s
[13:26:46] <dbaupp> but that's neither nere nor there
[13:27:44] <bjz> aatch: brso mentioned a while back to me that he'd be interested in exploring other options
[13:27:52] <bjz> aatch: *brson
[13:28:01] <bjz> aatch: but don't quote me
[13:28:13] <aatch> Well, the '*' syntax is for grabbing width/precision from arguments, rather than the position of the value the placeholder is for
[13:28:30] <aatch> it's '%n$' for position
[13:28:48] *** Joins: jeff (jeff@moz-6B660981.public.wayport.net)
[13:28:49] <dbaupp> aatch: btw, https://github.com/mozilla/rust/issues/1651
[13:28:53] <dbaupp> aatch: oh, ok
[13:29:12] <aatch> Though I missed that bit in the printf docs, so I don't handle atm
[13:30:05] <aatch> though I might change it 
[13:30:20] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[13:30:31] <aatch> otherwise I need arbitrary lookahead
[13:30:47] <dbaupp> aatch: I'm not quite following...
[13:31:09] <dbaupp> which bit did you miss? (and why would it require arbitrary lookahead?)
[13:31:20] <aatch> Well I need to tell if I'm parsing a position or a width field
[13:31:46] <aatch> I can only do that by finding the '$' that's next
[13:32:11] <dbaupp> tokenise the format string?
[13:32:16] <dbaupp> that's possible overkill
[13:32:25] <aatch> dbaupp, yeah, lol
[13:32:37] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: Lost terminal)
[13:32:53] <dbaupp> num = parse_num(); if parser.next() == "$" { position = num } else { width = num }
[13:32:53] <dbaupp> ?
[13:33:03] *** Joins: tilde (tilde@moz-9091C250.clienti.tiscali.it)
[13:33:20] <dbaupp> err, `parser.next() == '$'`
[13:33:53] <aatch> I'm thinking maybe '%{1}^#!@20.*1f'
[13:34:06] <aatch> dbaupp, hmm, hadn't thought of that.
[13:34:13] <aatch> need to restructure a little
[13:34:29] <dbaupp> aatch: is it utf8 safe? (i.e. could I have '%10' as a specifier?)
[13:34:36] <aatch> dbaupp, should be
[13:34:44] <aatch> I pop off char's
[13:34:53] <aatch> "pop-off"
[13:35:00] <aatch> I increment the current position
[13:35:11] <dbaupp> but personally I'd prefer bracketing and stuff to having $
[13:35:32] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[13:35:51] <dbaupp> e.g. '%{position}[widthposition].[precposition]f'
[13:36:02] *** Joins: jensnockert (jensnocker@CC60FA7.C48F2496.6049AABB.IP)
[13:36:05] <dbaupp> where the braces/brackets are literals and the positions are nums
[13:36:10] <aatch> dbaupp, that works
[13:36:49] <dbaupp> hej, jensnockert 
[13:37:07] <jensnockert> dbaupp: Hello!
[13:37:32] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[13:37:32] <dbaupp> I was wondering what other methods you were thinking for the 'Interpolation' trait?
[13:38:07] <jensnockert> dbaupp: Hermite &c?
[13:38:26] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[13:39:15] <dbaupp> jensnockert: so everything would still work on vectors?
[13:40:10] <jensnockert> dbaupp: Yes.
[13:40:49] <dbaupp> good... that's was my only question :)
[13:41:08] <dbaupp> s/'s//
[13:42:02] <jensnockert> dbaupp: Even if another Interpolation trait Vector to f(t) would be cool.
[13:43:09] <dbaupp> jensnockert: sorry, I don't understand?
[13:43:29] <dbaupp> (you have to speak slowly for us australians :P )
[13:43:37] <jensnockert> dbaupp: You put in a vector of values, and get out a function that interpolates those values.
[13:43:42] <kimundi> dbaupp, is there are list wich formats fmt!/printf supports?
[13:43:56] <dbaupp> jensnockert: ah, yes, that would be pretty cool
[13:44:00] <aatch> kimundi, man 3 printf ?
[13:44:05] <dbaupp> kimundi: as in rust's fmt!?
[13:44:28] <dbaupp> kimundi: rusti's support is in the top of core/unstable/extfmt.rs
[13:44:31] <dbaupp> (I think)
[13:44:37] *** Quits: jeff (jeff@moz-6B660981.public.wayport.net) (Ping timeout)
[13:44:46] *** Joins: jeff (jeff@moz-7B743C0B.members.linode.com)
[13:44:57] *** Joins: akashj87 (akash@17BF7902.2921AF61.35E3DDC8.IP)
[13:44:58] <kimundi> d'oh, why am I even asking xD. of course there is man, and fmt! has a bigass comment... Sorry :)
[13:46:10] <dbaupp> speaking of which, aatch, you've looked at the extfmt stuff?
[13:46:19] <aatch> dbaupp, nope
[13:46:23] <aatch> not really
[13:46:37] <aatch> glanced is a better word
[13:46:40] <dbaupp> oh, well, it's there :P
[13:47:04] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:48:18] <aatch> dbaupp, oh, btw, would the parser be in core or std?
[13:48:39] <dbaupp> aatch: core, I guess?
[13:48:50] <dbaupp> maybe?
[13:48:51] <dbaupp> no idea
[13:49:09] <aatch> Eh, not important at the moment
[13:49:43] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[13:50:24] <indutny> oh, btw
[13:50:31] <indutny> what does `'self` mean?
[13:50:41] <indutny> I mean self with single-quote at start
[13:50:45] <aatch> indutny, it's a region pointer
[13:51:06] <indutny> I believe its not documented at all
[13:51:08] <indutny> what's this?
[13:51:15] <indutny> some special kind of heap?
[13:51:46] <aatch> so struct Foo<'self> { a: &'self str } means that Foo contains a borrowed pointer that lasts at least as long as it does
[13:52:01] <dbaupp> indutny: are you asking what a region pointer is?
[13:52:09] <indutny> yes
[13:52:12] <indutny> well, I can google it
[13:52:12] *** Quits: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Connection reset by peer)
[13:52:14] <indutny> but
[13:52:15] <indutny> I mean
[13:52:21] <indutny> its worth documenting
[13:52:23] <dbaupp> indutny: http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[13:52:27] <aatch> indutny, no, regions are a way of tracking lifetimes, in order to ensure that you can't use invalid memory
[13:52:29] *** Joins: ssbr_ (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[13:52:33] <indutny> got it
[13:53:05] <indutny> ah
[13:53:09] <indutny> named lifetime
[13:53:44] * aatch has clearly been spending too much time in the compiler code
[13:53:46] <dbaupp> indutny: yep, and self is a special lifetime that only refers to data structures and their contents
[13:55:21] <kimundi> dbaupp: indutny : 'self as special name wivv be going away, though
[13:55:29] <kimundi> I think
[13:56:15] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[13:56:15] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[13:56:37] <dbaupp> kimundi: oh ok... that will be nice
[13:57:25] <friggle> kimundi: that would be nice, I didn't realise 'self was special
[14:01:05] <indutny> thank you
[14:02:56] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:03:10] *** Joins: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu)
[14:04:12] <bjz> jensnockert: hurroo
[14:04:21] <jensnockert> bjz: Y helo thar!
[14:04:45] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:05:07] <bjz> jensnockert: lerpyderpy
[14:05:22] <jensnockert> bjz: Herpy Derpy!
[14:06:03] <bjz> \^_^/
[14:07:06] <bjz> jensnockert: so you think we need some other interpolations?
[14:07:21] <jensnockert> bjz: Would be quite pointless to only have linear, right?
[14:07:32] <bjz> nyes
[14:07:37] <jensnockert> nyes?
[14:07:53] <bjz> yesn
[14:07:55] <dbaupp> no-yes?
[14:07:59] <bjz> yes
[14:08:03] <bjz> no
[14:08:06] <bjz> wait
[14:08:11] <bjz> I mean yes
[14:08:19] * bjz explodes
[14:08:47] <dbaupp> ok, who's taking over the numeric traits?
[14:08:58] <dbaupp> :P
[14:09:08] <bjz> doomlord mentioned lerping on vectors
[14:09:16] <bjz> I've encountered this before
[14:09:19] <jensnockert> lerping?
[14:09:26] <jensnockert> Linear interpolation?
[14:09:33] <bjz> linearly intoperlating
[14:10:08] <bjz> but yeah you might want to lerp between two types
[14:10:28] <bjz> http://www.opengl.org/sdk/docs/manglsl/xhtml/mix.xml
[14:10:34] <bjz> like in glsl
[14:10:43] <erickt> there's also my favorite, slerping
[14:10:51] <bjz> aye
[14:11:10] <bjz> glsl has it overloaded
[14:11:46] *** Joins: rroels (rroels@moz-57D4C308.vub.ac.be)
[14:12:00] *** Quits: int3_ (int3_@moz-4B7E49C.subnet-248.amherst.edu) (Client exited)
[14:12:22] <cmr> aatch: fwiw I agree with dbaupp's syntax suggestions
[14:12:36] <aatch> cmr, good, because I'm implementing it :D
[14:12:39] <cmr> :D
[14:12:48] <bjz> hah!
[14:13:21] <aatch> It's actually nicer because I can better find some things.
[14:13:22] *** Quits: trapni (trapni@moz-7C7C1909.dawanda.com) (Connection reset by peer)
[14:13:31] <bjz> quick, you must commit before him!
[14:13:56] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[14:13:57] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[14:14:13] <aatch> bjz, what?
[14:14:29] <bjz> (was talking to cmr)
[14:14:38] <bjz> :P
[14:15:05] *** Joins: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net)
[14:15:17] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:15:31] <bjz> jensnockert: what other interpolations do you think, sir?
[14:16:33] <dbaupp> jensnockert: he suggested hermite (polynomials)
[14:16:59] <bjz> who did?
[14:16:59] <dbaupp> but you could imagine splines and other fanciness too
[14:17:05] <dbaupp> (err, bjz:*)
[14:17:12] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[14:17:13] <dbaupp> bjz: jensnockert suggested it
[14:17:14] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[14:18:10] <bjz> jensnockert: also, fyi we have been talking about string conversions: https://github.com/mozilla/rust/issues/6220
[14:22:09] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[14:22:23] <jensnockert> bjz: CatmullRom, Barycentric, SmoothStep etc?
[14:26:01] <bjz> jensnockert: btw, where do we stand on the significand/exponent thing
[14:26:07] <bjz> jensnockert: I forgot
[14:26:11] <bjz> :P
[14:26:36] <jensnockert> bjz: I think the implementation should be like frexp, which is what I think is people expect.
[14:26:52] <bjz> ok
[14:27:02] <bjz> and of course document it
[14:27:17] <jensnockert> bjz: Where should I document it?
[14:27:26] <bjz> oh, I will
[14:27:33] <jensnockert> Awesome <3
[14:27:35] <bjz> or you can do it
[14:27:45] <jensnockert> Where should I do it, the bug?
[14:27:50] <jensnockert> Or the PR?
[14:28:39] <dbaupp> aatch: what would %{-1}s mean?
[14:28:43] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[14:28:43] <kimundi> Is there a log fn that works on integers? At least to find the general magnitude.
[14:28:48] <aatch> dbaupp, no idea
[14:28:52] <aatch> not my problem
[14:29:02] <dbaupp> aatch: haha, ok, just include it in the grammar :D
[14:29:12] <bjz> jensnockert: btw, does this look ok? https://gist.github.com/bjz/0074cd32288f8b2c361e
[14:29:17] <dbaupp> (you should include floating point too ;P )
[14:29:26] <bjz> jensnockert: doesn't seem to be working right
[14:29:31] <dbaupp> kimundi: you can use ctlz (count leading zeros)
[14:29:55] <bjz> jensnockert: ie. bad answer
[14:29:55] <dbaupp> to get 'bit_count - log_2(x)'
[14:30:18] <kimundi> hmm... but that only brings me base two, or...?
[14:30:24] <jensnockert> bjz: You can use the r constraint on self as well?
[14:30:26] <dbaupp> where log_2 is actually the highest power of 2 that is not greater than x 
[14:30:43] <dbaupp> kimundi: yeah
[14:31:02] <dbaupp> that's the general magnitude, right?
[14:31:13] <dbaupp> or do you need it more precise>
[14:31:15] <dbaupp> ?
[14:31:32] <kimundi> well, I need arbitrary base from 2 to 36
[14:31:32] <bjz> jensnockert: I was just using Luqman's code: https://gist.github.com/luqmana/5457029
[14:31:40] *** Joins: trapni (trapni@F0E22329.CB586464.544FF5A6.IP)
[14:31:46] <bjz> jensnockert: it's a bit of magic to me tbh
[14:31:54] <dbaupp> kimundi: divide by the appropriate factor?
[14:31:58] <bjz> jensnockert: http://www.programmingforums.org/thread29168.html
[14:32:17] <jensnockert> bjz: Let me test something.
[14:32:34] <jensnockert> bjz: But you should use intrinsics in the future, imho.
[14:32:44] <kimundi> dbaupp: Ah right, that works I think
[14:32:44] <bjz> jensnockert: ofc
[14:32:46] <dbaupp> kimundi: e.g. magnitude(x) = (log_2(x) + 1)*base_n_numer[base]/base_n_denom[base]
[14:32:48] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[14:32:51] <bjz> jensnockert: if we had them
[14:32:58] <bjz> jensnockert: >:(
[14:33:04] <jensnockert> bjz: We do.
[14:33:10] <bjz> rsqrt?
[14:33:19] <dbaupp> where the numer and denom are small integers to give a more accurate result that just a integer division
[14:33:21] <jensnockert> bjz: Yeah, but if they use stack, they may or may not crash.
[14:33:45] <bjz> what do you mean?
[14:33:52] <bjz> the intrinsics?
[14:33:58] <dbaupp> bjz: isn't the xmm constraint 'x', not 'r'?
[14:35:12] <bjz> dbaupp: let me try
[14:35:28] <dbaupp> kimundi: e.g. for base 10, it might be numer=10 and denom=33
[14:36:22] <dbaupp> bjz: also, is there reason you forced self into xmm0?
[14:37:25] <bjz> dbaupp: would you like to do it. as I say, I was just copying this fairy dust: https://gist.github.com/luqmana/5457029
[14:38:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:38:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a0c64e8 to 14213f7b2: 02http://git.io/N3iJvQ
[14:38:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:38:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:38:12] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/DuyS2Q
[14:38:12] <ghrust> 13rust/06auto 1437a1a09 15Alex Crichton: Re-implement lint with less emphasis on item ids...
[14:38:12] <ghrust> 13rust/06auto 14429bfb8 15Alex Crichton: Clean up warnings throughout
[14:38:12] <ghrust> 13rust/06auto 146112a51 15bors: auto merge of #6093 : alexcrichton/rust/issue-2647, r=nikomatsakis...
[14:38:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:38:40] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:39:01] *** Joins: rust-lover (chatzilla@BE72D005.D0DF3C31.443E7CDD.IP)
[14:39:05] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[14:40:07] <dbaupp> kimundi: although 5 and 16 are probably accurate enough (or to optimise it more ((log(x) + 1) * numer[base]) >> shift[base], so you just choose a small numer and shift so that 2**shift/numer is a reasonable approximation to log_2(base))
[14:40:14] <jensnockert> bjz: https://gist.github.com/JensNockert/c0b86615a939d7bd8673
[14:40:17] <dbaupp> bjz: https://gist.github.com/huonw/8b21495c046118890ded ?
[14:40:27] *** Quits: jensnockert (jensnocker@CC60FA7.C48F2496.6049AABB.IP) (Input/output error)
[14:40:41] <bjz> ooh
[14:40:51] <dbaupp> (go with jensnockert's, he knows what he's doing ;) )
[14:41:02] <dbaupp> (I have no idea)
[14:41:18] <bjz> heh
[14:41:25] <dbaupp> also... he disappeared...
[14:41:44] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[14:41:56] <bjz> :D
[14:43:25] *** Quits: fabiand (fabiand@moz-8D6C53D0.adsl.alicedsl.de) (Quit: Verlassend)
[14:44:00] <rust-lover> any help on debug symbol generation ???
[14:44:25] <cmr> rust-lover: rustc -Z debug-info, but it's buggy
[14:44:26] <dbaupp> rust-lover: have you looked at the source more since you were last here? :)
[14:44:26] <bjz> rust-lover: I see you love rust
[14:45:00] <rust-lover> actually i have sent application i GSOC to improve debug symbols etc :p
[14:45:17] <aatch> bjz, given that it's friday night and you are Australian. Are you drinking?
[14:45:30] <bjz> aatch: tea
[14:45:35] <aatch> bjz, lol
[14:45:40] <dbaupp> bjz: close enough
[14:45:51] <rust-lover> <bjz> yeah : i love it brother :p
[14:46:29] <rust-lover> i want s0me more help in debug generation part :p
[14:47:08] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:49:30] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[14:49:40] <EXetoC> try milk instead
[14:50:17] <bjz> o_o
[14:50:37] <bjz> I have milk
[14:50:41] <bjz> in my tea
[14:50:49] <EXetoC> neat
[14:50:59] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[14:51:06] <bjz> tis indeed
[14:51:42] <EXetoC> and maybe some dead australian frogs on a stick
[14:51:47] <EXetoC> eh... toads
[14:52:03] <dbaupp> bjz: what's with the toads?
[14:52:07] <dbaupp> (cane toads?)
[14:52:08] <bjz> try under a brick
[14:52:20] <EXetoC> :-P
[14:52:30] <bjz> dbaupp: EXetoC has a thing about toads
[14:52:42] <aatch> Toad Fancier
[14:52:49] <bjz> toad tickler
[14:52:51] <aatch> (that might be a real thing)
[14:52:58] <bjz> probably
[14:53:18] <dbaupp> www.youtube.com/watch?v=aokHUKOOug8
[14:53:42] <bjz> dbaupp: this fellow does another iteration of newton's method: http://www.programmingforums.org/thread29168.html
[14:54:10] <bjz> dbaupp: WTF
[14:54:17] <dbaupp> bjz: no idea
[14:54:28] <EXetoC> I began to associate Australia with toads after I saw that clip of some guy running over a load of them
[14:54:38] <bjz> *pop*
[14:54:45] <dbaupp> bjz: I'll experiment with it
[14:55:01] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[14:55:16] <dbaupp> EXetoC: that's only the north... both bjz and I are well south of any cane toads
[14:55:30] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[14:55:46] <dbaupp> (and, anyway, I'm actually closer to them than bjz :P )
[14:55:49] <bjz> dbaupp: if you do rsqrtss(4) you get 0.49987793
[14:55:57] <EXetoC> phew
[14:55:57] <dbaupp> bjz: ah
[14:56:09] <bjz> dbaupp: if you do another iteration you get 0.5
[14:56:09] <dbaupp> bjz: why-tf would they implement that?
[14:56:20] <bjz> dbaupp: speed
[14:56:22] <dbaupp> bjz: I vote yes, I guess
[14:56:33] <dbaupp> (to the newton's method)
[14:56:43] <bjz> dbaupp: I used to live in brisbane
[14:56:50] <dbaupp> bjz: well, you win
[14:57:00] <bjz> dbaupp: up until the beginning of this year
[14:57:06] <dbaupp> moved for uni?
[14:57:18] <bjz> dbaupp: the invasion of my suburb had just begun
[14:57:29] <dbaupp> *pop*
[14:57:36] <bjz> dbaupp: pretty much
[14:57:46] <bjz> yep, uni
[14:57:46] <EXetoC> heh
[14:59:21] *** Quits: rust-lover (chatzilla@BE72D005.D0DF3C31.443E7CDD.IP) (Quit: ChatZilla 0.9.90 [Firefox 20.0/20130329030848])
[14:59:35] <dbaupp> bjz: it's possibly faster to use 1/sqrtss(x), rather than rsqrtss + newton's
[15:00:06] <bjz> dbaupp: hmm, you might be right
[15:00:20] <dbaupp> but leave rsqrt as the fast-as-possible-but-incorrect rsqrtss?
[15:00:40] <bjz> dbaupp: would be good to do a test
[15:00:42] <dbaupp> (i.e. explicitly say "this is fast but very inaccurate")
[15:01:11] <erickt> nmatsakis: ping
[15:01:43] <bjz> dbaupp: maybe it should just be a free function in core::f32
[15:01:53] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Quit: Leaving)
[15:01:59] <dbaupp> bjz: that works too
[15:01:59] <EXetoC> did intel start with this little endian thing just to annoy us?
[15:02:03] <bjz> dbaupp: and remove rsqrt from the trait
[15:02:04] *** Quits: jeff (jeff@moz-7B743C0B.members.linode.com) (Ping timeout)
[15:02:25] <dbaupp> bjz: hm, yeah. (put it on the numerics discussion?)
[15:02:49] *** Joins: jeff (jeff@moz-6B660981.public.wayport.net)
[15:03:35] <nmatsakis> erickt: pong
[15:04:07] <erickt> hey nmatsakis! so I'm making progress with methods, now I'm running into trouble with the metadata encoding
[15:04:27] <nmatsakis> erickt: oh, yes, joy.
[15:04:29] <bjz> dbaupp: I actually think that's the best way. then leave it up to the user to decide
[15:04:39] <nmatsakis> erickt: that's a mess too :)
[15:04:47] <nmatsakis> erickt: what specific problem?
[15:04:56] <erickt> nmatsakis: indeed! I'm having trouble hitting "cannot encode regions"
[15:05:02] <bjz> dbaupp: we can then have it for arm too
[15:05:16] <erickt> it seems my `&self` isn't getting the region properly flattened
[15:05:20] <dbaupp> bjz: where that = move out of trait?
[15:05:39] <bjz> dbaupp: yeah. named the same though
[15:06:14] <nmatsakis> erickt: oh, that's... not so bad probably. That suggested you're doing something wrong elsewhere
[15:06:25] <nmatsakis> erickt: do you mean "cannot encodle region variables" or something like that?
[15:06:27] <erickt> nmatsakis: do you know what is supposed to to it? I feel like it's replace_bound_regions_in_fn_sig
[15:06:30] <erickt> yeah
[15:06:32] <dbaupp> bjz: we probably want it for simd too
[15:06:41] <nmatsakis> erickt: it probably means you're not fixing up the types in the writeback pass
[15:06:41] <erickt> nmatsakis: here's my stack trace: https://gist.github.com/erickt/5509662
[15:06:47] <dbaupp> bjz: is that feasible without the trait?
[15:07:00] <bjz> dbaupp: ahhh
[15:07:01] <nmatsakis> erickt: after type checking, there is a pass (typeck::writeback I think) that walks over the AST and replaces inference variables with the results of inference
[15:07:02] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[15:07:13] <dbaupp> bjz: (yeah... so many different things :/ )
[15:07:14] <nmatsakis> erickt: it should be removing region variables and replacing them with the inferred region
[15:07:20] <erickt> nmatsakis: ah, that must be missing my self_ty
[15:07:26] <nmatsakis> erickt: yes, you'll probably have to instruct it
[15:07:32] <nmatsakis> erickt: let me know if you want pointers
[15:07:32] *** Joins: cdidd (cdidd@3E82BB89.271BFDAC.62D8163C.IP)
[15:07:46] <bjz> dbaupp: well currently it's in num::Algebraic
[15:07:53] <dbaupp> bjz: yes
[15:08:00] <bjz> dbaupp: I don't know if that's the best place
[15:08:17] <erickt> nmatsakis: thanks! I'll explore writeback first and see if there's anything obvious
[15:08:24] <dbaupp> bjz: `HighSpeedNumerics' trait?
[15:08:31] <dbaupp> bjz: or something like that
[15:08:45] <bjz> dbaupp: FastNum
[15:08:47] <dbaupp> bjz: operations that are fast, but inaccurate/unsafe
[15:08:54] <bjz> dbaupp: PaintItRed
[15:08:54] <dbaupp> bjz: that's good
[15:09:00] <bjz> ok
[15:09:06] <bjz> PaintItRed it is
[15:09:09] <kimundi> 'FastAndFuriosFloats'?
[15:09:21] <bjz> FFFFFFFFFF
[15:09:23] <bjz> :)
[15:10:21] <EXetoC> oh ok, little endian has (possibly minor) benefits. fair enough :p
[15:10:53] <bjz> dbaupp: https://github.com/mozilla/rust/wiki/Bikeshed-Numeric-Traits#native-math
[15:11:26] <dbaupp> bjz: damn, we're not first to think of it :P
[15:11:44] <bjz> dbaupp: oh yeah, he's had it there for a while
[15:11:52] <bjz> dbaupp: jensnockert
[15:12:24] <bjz> dbaupp: but the difficulty is rsqrt is only for f32
[15:12:26] <dbaupp> yep, he know's his stuff
[15:12:47] <dbaupp> bjz: presumably the non-native implementations would just fall back to the slow default?
[15:13:04] <cmr> dbaupp: I don't think that'sa good idea
[15:13:11] <bjz> yeah
[15:13:16] <cmr> ifyou are using NativeMath and it isn't implemented natively, it should fail
[15:13:21] <dbaupp> they could fail!?
[15:13:26] <bjz> yup
[15:13:38] *** Joins: eholk (eholk@moz-3491A20C.r15.mtwgln.infoave.net)
[15:13:42] <cmr> it's for speed, not correctness
[15:14:01] <cmr> but that probably means platform detection is required
[15:14:07] <dbaupp> cmr: I guess failing is "fast"
[15:14:07] <bjz> and it's up to the programmer to do the right cfgs
[15:14:12] <bjz> :)
[15:14:23] <dbaupp> hm, I don't like it...
[15:14:45] <dbaupp> why couldn't the programmer to do the right cfgs to check they're getting the fast methods?
[15:15:18] <cmr> hm
[15:15:23] <cmr> that might be equally valid
[15:15:40] <dbaupp> that would at least allow generics to work better
[15:16:05] <bjz> true
[15:16:08] <aatch> Woo, my error messages are almost as good as Rust's
[15:16:17] * bjz claps
[15:16:19] <EXetoC> runtime conditionals?
[15:16:22] <aatch> Unexpected character \']\', expected \']\
[15:16:24] <dbaupp> aatch: :D
[15:16:32] <dbaupp> aatch: ?
[15:16:34] <bjz> :)
[15:16:42] <cmr> although
[15:16:46] <aatch> That's some Rust-level shit right there
[15:17:00] <cmr> maybe using NativeMath and compiling for a platform that doesn't support that thing natively would fail, rather than fail at runtime
[15:17:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:17:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146112a51 to 14213f7b2: 02http://git.io/N3iJvQ
[15:17:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:17:10] <dbaupp> aatch: seeing ] while expecting ] seems quite reasonable :P
[15:17:30] <bjz> cmr: I wish there was some kind of static_assert
[15:17:55] <dbaupp> cmr: most platforms won't support all of NativeMath, I guess
[15:18:09] *** Joins: eholk_ (eholk@moz-3491A20C.r15.mtwgln.infoave.net)
[15:18:19] *** Quits: eholk_ (eholk@moz-3491A20C.r15.mtwgln.infoave.net) (Quit: eholk_)
[15:18:20] *** Quits: eholk (eholk@moz-3491A20C.r15.mtwgln.infoave.net) (Ping timeout)
[15:18:22] <bjz> doomlord_: any input?
[15:18:37] <bjz> doomlord: or is it you
[15:18:45] * bjz sees double
[15:18:59] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:19:37] <aatch> bjz, and you say you haven't been drinking
[15:20:12] <cmr> my feeling is that the dev should be informed when using NativeMath when the promise of "fast, but maybe innacurate" isn't maintained
[15:20:25] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:20:41] <bjz> cmr: it would be cool if it could generate a warning at compile time
[15:20:59] <dbaupp> cmr: they could all be marked unsafe
[15:21:09] <dbaupp> (maybe?)
[15:21:13] <bjz> but they aren't unsafe
[15:22:22] *** Joins: int3_ (int3_@moz-D17C1897.cs.umass.edu)
[15:22:23] <dbaupp> bjz: I guess it would be abusing 'unsafe', but they are slightly unsafe, in the sense they don't give accurate results
[15:22:57] <doomlord_> hi
[15:23:00] <aatch> dbaupp, I have now implemented {pos}[width].[precision]
[15:23:12] <dbaupp> aatch: :D
[15:23:22] <bjz> doomlord_: I reccomend you read the convoluted scrollback
[15:23:30] <bjz> doomlord_: if you can
[15:23:42] <doomlord_> yeah trying to do that now, unsafe/fast maths ?
[15:23:43] <bjz> doomlord_: the discussion will be of interest to you
[15:23:49] <dbaupp> doomlord_: yes
[15:23:50] <aatch> after a few issues where I kept forgettting to advance the cursor, all the tests work
[15:23:52] <bjz> doomlord_: aye
[15:23:56] <dbaupp> aatch: :D
[15:23:57] <aatch> Not that there are nearly enough tests yet
[15:23:58] <doomlord_> precision/speed tradeoffs ...
[15:24:11] *** Quits: int3_ (int3_@moz-D17C1897.cs.umass.edu) (Ping timeout)
[15:24:19] <dbaupp> aatch: does it do any formatting (i.e. actually interpreting the positions), or just parsing?
[15:24:22] <cmr> doomlord_: specifically the problem of "what happens if the 'fast' function isn't actually available to be fast?"
[15:24:28] <aatch> dbaupp, just parsing
[15:24:36] <dbaupp> Is it in the gist?
[15:24:39] <aatch> hence why {-1} isn't my problem (yet)
[15:24:43] <bjz> doomlord_: where to put rsqrt? I suggest free-floating in core::f32
[15:24:47] <aatch> dbaupp, I'll update it now
[15:24:48] <doomlord_> oh. now thats tricky in a crossplatform environment
[15:24:59] <bjz> doomlord_: with a cfg
[15:25:19] <dbaupp> doomlord_: there's also what to do about SIMD and rsqrt to consider
[15:25:22] <doomlord_> core::f32 has sqrt , so rsqrt should fo ther ?
[15:25:27] <aatch> dbaupp, updated
[15:25:44] <bjz> doomlord_: we currently have it on Algebraic
[15:25:49] <doomlord_> i'm not up to speed on how you plan to support SIMD, but i've seen something posted in issues
[15:26:09] <bjz> doomlord_: I have it implemented for f32 using rsqrtss
[15:26:22] <doomlord_> it would seem to make sense to put rsqrt alongside sqrt
[15:26:42] <bjz> doomlord_: the thing is it's bloody inaccurate on its own
[15:26:45] <dbaupp> doomlord_: no idea either how SIMD works, but I'd guess that it would involve re-impl'ing traits
[15:27:02] <doomlord_> when you get default methods, it could be given one rsqrt=1/sqrt perhaps .. but do you want a seperate name or trait for fast-approx
[15:27:26] <bjz> doomlord_: maybe I need to talk to the samsung fellow
[15:27:41] <doomlord_> i've been thinking you have these traits which dont specify a type, and you'd have a SIMD type, then you implement the same maths functions for the SIMD type
[15:27:45] <bjz> yes, he'll be the right guy
[15:28:00] <bjz> mmk
[15:28:04] <doomlord_> yeah he's actually working on aadding it
[15:28:20] <bjz> yeah I know he has a PR for SIMD
[15:28:32] <dbaupp> aatch: another thought I had was:
[15:28:49] <dbaupp> aatch: leaving the [] empty to get the same behaviour as just plain * in printf
[15:28:53] <doomlord_> so basically you could have trait Interpolate { fn lerp() ...}       impl Interpolate for f32 {  .... }    impl Interpolate for f32x4/*SIMD*/ { ... }
[15:29:02] <dbaupp> aatch: i.e. next argument
[15:29:16] <aatch> dbaupp, I decided on keeping the '*' in there.
[15:29:32] <doomlord_> i dont even know if you want to have 'real intrinsics' and/or pseudo ones like in C... or if you want the compiler to figure it out
[15:29:36] <EXetoC> doomlord_: derp you mean?
[15:29:38] <dbaupp> aatch: oh, right, didn't see it. :)
[15:29:44] <erickt> nmatsakis: I see why I missed this. `writeback::resolve_type_vars_in_fn` takes an `ast::fn_decl`, not a `ty::bare_fn_ty` so it wasn't showing up in my searches
[15:29:48] <bjz> doomlord_: yeah, we should try to keep in sync with what he's implementing
[15:29:53] <doomlord_> lerp=Linear inTerpolate
[15:30:12] <EXetoC> c(:)
[15:30:22] <bjz> lerpyslurpyderp
[15:30:37] <doomlord_> i read some discussion about how the SIMD type would work, and i dont know what the resolution was, i read a suggestion that (f32,f32,f32,f32) could map to a SIMD register
[15:30:40] <erickt> bjz: that sounds like a great name for a numerics library
[15:30:48] <aatch> dbaupp, I'm gonna sleep now though. I'll be back later
[15:30:52] <bjz> erickt: omg yes
[15:30:53] *** aatch is now known as aatch|bed
[15:31:08] <doomlord_> thing is, on some platforms, SIMD has had quite different performance characteristics , e.g. different latency
[15:31:22] <dbaupp> aatch|bed: I should probably do the same, cya :)
[15:31:42] <bjz> doomlord_: https://github.com/mozilla/rust/pull/5841
[15:32:03] <cmr> https://github.com/mozilla/rust/issues/3174
[15:32:06] <bjz> dbaupp: heh, nightowls we are
[15:32:17] *** Quits: jeff (jeff@moz-6B660981.public.wayport.net) (Ping timeout)
[15:32:25] *** Joins: jeff (jeff@moz-4F7F9943.members.linode.com)
[15:32:26] <dbaupp> doomlord_, bjz: https://github.com/mozilla/rust/pull/6214 also
[15:32:30] <doomlord_> well back to the simple fast/approx - if the instruction isn't there, is there any harm in just doing the full calculation. getting a physically different result=inconsistency between machines
[15:32:38] <doomlord_> which can be a problem
[15:32:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:33:00] <dbaupp> doomlord_, bjz: specifically https://github.com/sanxiyn/rust/commit/9a7a208f3122c1ff5451057e6cf5e959b41e3dff
[15:33:22] <dbaupp> bjz: :)
[15:33:27] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[15:33:29] <nmatsakis> erickt: ah, makes sense
[15:33:29] <bjz> nice
[15:33:33] <nmatsakis> erickt: did you fix it
[15:33:42] <erickt> not yet :(
[15:34:05] *** Quits: tilde (tilde@moz-9091C250.clienti.tiscali.it) (Quit: NOPE NOPE NOPE)
[15:34:07] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[15:34:29] <doomlord_> so perhaps the compiler will be ammended to pick up those specific names ..
[15:34:43] <erickt> Now I'm trying to figure out how the self_ty I added to ty::FnSig seems to be different than the self that's getting passed into resolve_type_vars_in_fn
[15:34:55] <doomlord_> microsoft did just that with the early xbox 360 compiler ("name your class vector__ and it will be a simd register..")
[15:34:57] <erickt> nmatsakis: ^
[15:35:29] <dbaupp> doomlord_: it doesn't need to (with sanxiyn's current implementation, it's an attribute)
[15:36:01] <doomlord_> ah i'm blind. #[simd]
[15:36:07] <dbaupp> (so, i guess, any type isomorphic to (f32 * 4) or (i8 * 16) can be simd'd)
[15:36:08] <nmatsakis> erickt: adjustments?
[15:36:29] <nmatsakis> erickt: I don't know precisely which self you're referring to, basically
[15:36:32] <doomlord_> thats a good way to do it
[15:36:39] <erickt> nmatsakis: me neither :)
[15:37:22] <erickt> nmatsakis: see https://github.com/mozilla/rust/blob/master/src/librustc/middle/typeck/check/writeback.rs#L319
[15:37:24] <nmatsakis> erickt: I'd be interesting in reading a WI Ppatch
[15:37:37] <erickt> sure I'll upload it.
[15:37:58] *** Joins: jensnockert (jensnocker@FD6874C7.3BF8EFD8.11C743EC.IP)
[15:38:21] *** Quits: DasIch (dasich@moz-756B08B1.clients.your-server.de) (Client exited)
[15:38:23] <erickt> nmatsakis: https://github.com/erickt/rust/tree/trans-self13
[15:39:19] *** Quits: jensnockert (jensnocker@FD6874C7.3BF8EFD8.11C743EC.IP) (Input/output error)
[15:39:56] *** Joins: DasIch (dasich@moz-756B08B1.clients.your-server.de)
[15:40:43] <erickt> so in middle::typeck::check::check_bare_fn, that function has in scope both a BareFnTy (which now has a self_ty) and a SelfInfo. I think that SelfInfo is now mostly redundant
[15:42:36] <erickt> hrm, I actually am building that SelfInfo properly from the method...
[15:42:37] <nmatsakis> erickt: yes, I imagine so
[15:43:01] <nmatsakis> erickt: I added the current SelfInfo basically as an alternative to adding self_ty to BareFnTy
[15:43:22] <nmatsakis> erickt: (I mean, there was something called SelfInfo before, but I modified it)
[15:43:42] <erickt> I think there are two SelfInfos floating around in librustc
[15:43:48] <nmatsakis> erickt: yes, there's that too
[15:44:25] <erickt> there must be an existential crisis brewing in librustc :)
[15:44:36] <nmatsakis> :)
[15:44:42] <nmatsakis> is there a way in github to diff a branch?
[15:44:43] <nmatsakis> as a whole?
[15:45:11] <nmatsakis> I often want this, it seems like it must be possible
[15:45:32] *** Quits: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com) (Client exited)
[15:45:41] <erickt> I'm not sure. I guess you could trigger a pull request
[15:45:55] <kimundi> nmatsakis: AS in, show the diff between two arbitrary branches?
[15:46:32] <nmatsakis> kimundi: well, sure, though in this case I just want to compare the branch vs the branch it is based off of
[15:46:39] <nmatsakis> I guess i'll just fetch into my repo
[15:46:50] <kimundi> well, it's certainly possible
[15:47:06] <nmatsakis> it is I think with a hand-crafted URL
[15:47:13] <nmatsakis> but I forget how that looks :)
[15:47:19] <dbaupp> nmatsakis: https://github.com/erickt/rust/branches maybe?
[15:47:34] <nmatsakis> dbaupp: ah, yes, perfect, thanks
[15:47:49] <nmatsakis> well, close enough anyway
[15:48:00] <dbaupp> it might help if erickt pushes a more recent incoming too
[15:48:09] <erickt> I can rebase
[15:48:11] <nmatsakis> I can modify
[15:48:14] <nmatsakis> the point of the diff :)
[15:48:33] <dbaupp> oh, yeah, url munging :)
[15:48:41] <bstrie> I just found out that this works: https://gist.github.com/bstrie/5510100 and frankly I'm surprised. I thought that only top-level functions were scoped like this. is this something that could be removed? because frankly I feel like it conflicts with the implicit-return syntax as per https://github.com/mozilla/rust/issues/3054
[15:49:06] <nmatsakis> bstrie: it's the best thing ever
[15:49:09] <nmatsakis> why would you remove it?
[15:49:11] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[15:49:17] <nmatsakis> it does mean you have to write `return
[15:49:24] <bstrie> nmatsakis: I thought that inner functions were deprecated in favor of closures :)
[15:49:24] <nmatsakis> but...I don't care.
[15:49:35] <nmatsakis> bstrie: certainly not.
[15:49:37] <bstrie> nmatsakis: how would you treat #3054, then?
[15:49:45] <nmatsakis> I would write "return "
[15:49:47] <nmatsakis> that's what I do anyway
[15:49:56] <nmatsakis> that is, return x();
[15:50:12] <nmatsakis> in the case where I have inner functions 
[15:50:12] <bstrie> do you actually define inner functions *after* the return statement?
[15:50:14] <nmatsakis> yes
[15:50:18] <bstrie> weird :)
[15:50:19] <nmatsakis> because I find it hard to read otherwise
[15:50:23] <bstrie> I've never seen this pattern before
[15:50:24] <nmatsakis> I like to read it top-down
[15:50:30] <bstrie> I mean, I can see how it's useful
[15:50:35] <bstrie> it's something I've wanted before in python
[15:50:37] <nmatsakis> I don't like skipping over a bunch of random helper fns
[15:50:44] <nmatsakis> just to find out the big idea
[15:50:54] <nmatsakis> and sometimes there's code hiding amongst them. yuck.y
[15:50:56] <nmatsakis> *yucky :)
[15:50:58] <bstrie> ok, I'm convinced :P
[15:51:03] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[15:51:08] <nmatsakis> it is...a quirk of my coding style, I Think
[15:51:09] <nmatsakis> *think
[15:51:18] <nmatsakis> but I don't understand why anyone does it the other way :)
[15:51:46] <nmatsakis> I think it hearkens back to some old C instinct
[15:51:51] <nmatsakis> where functions had to be declared first so you could call them
[15:51:59] <nmatsakis> or else you needed a prototype (heaven forbid)
[15:53:47] *** Quits: lr (quassel@A0B983C9.98812F7A.4B164862.IP) (Client exited)
[15:54:00] <nmatsakis> bstrie: re: #3054...it might be nice if we did not consider definitions when deciding what's an implicit return, admittedly. that's certainly do-able, but a bit tricky given the way our AST is laid out right now :)
[15:54:37] <nmatsakis> and there might be parsing ambiguities? I don't know
[15:54:53] <bstrie> nmatsakis: I closed it because I think it's better off not allowing implicit returns there... like you said before, I don't want to have to worry about logic secreted away between the helper function definitions
[15:55:07] <nmatsakis> bstrie: yeah, I agree (with the decision to close and the reasoning)
[15:56:27] *** Joins: doomlord_ (servitor@moz-92EDFF3A.range31-52.btcentralplus.com)
[15:56:55] <nmatsakis> erickt: I saw you removed implicit dtors. I thank you.
[15:57:06] <nmatsakis> erickt: though I fear what my next rebase will bring...
[15:57:39] <nmatsakis> erickt: also, I forget, but your various changes to #[auto_serialize] just ported it to the new and sparkly deriving infrastructure, right?
[15:57:50] <nmatsakis> erickt: vs addressing the question of tailoring to a specific encoder...
[15:58:09] <erickt> yes, it doesn't yet address a specific encoder
[15:58:14] <bstrie> erickt: yes, is drop actually completely gone for good? that would be splendid
[15:58:22] <erickt> bstrie: drop is dead :)
[15:58:26] * nmatsakis cheers
[15:58:28] <bstrie> \o/
[15:58:38] <nmatsakis> there is a lot of cruft I have to go through and remove
[15:58:39] <erickt> we don't even parse it anymore. That patch landed 2 days ago
[15:58:43] <nmatsakis> I don't remember what all of it is anymore
[15:58:47] <nmatsakis> I know you got a lot of it
[15:58:59] *** Joins: giselher (Mibbit@moz-43EFD1D9.adsl.highway.telekom.at)
[15:59:01] <erickt> nmatsakis: I tried to remove all the cruft
[15:59:19] <nmatsakis> but I remember a few cases where I could...almost...do things in a radically simpler way, but for implicit dtors
[15:59:20] <erickt> I did a recursive decent to see what wasn't used anymore after removing drop
[15:59:24] <erickt> ah ok
[15:59:30] <nmatsakis> I could be wrong
[15:59:36] <erickt> I got a meeting now though, back in a bit
[15:59:38] <nmatsakis> ok
[16:00:06] <bstrie> has the patch to remove argument modes landed yet?
[16:00:12] <nmatsakis> bstrie: I think so, yes.
[16:00:25] <bstrie> awesome
[16:00:33] <nmatsakis> now if only we could get a *snapshot*
[16:00:44] <nmatsakis> the new borrow checker + @mut checks is basically good to go, it looks like
[16:00:50] <nmatsakis> at least I've got a build running now
[16:00:58] <nmatsakis> it has made it into run-pass, hopefully will carry on :)
[16:01:17] * nmatsakis realizes he has been working on this, on and off, for like 2 months. good god.
[16:01:28] <nmatsakis> no, more, since feb
[16:01:38] *** Joins: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq)
[16:01:55] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[16:02:01] <nmatsakis> I've only rewritten the borrow checker largely from scratch (on this branch) like 3 times in the process.
[16:02:09] <nmatsakis> well, not from scratch.
[16:02:43] *** Quits: trapni (trapni@F0E22329.CB586464.544FF5A6.IP) (Quit: Leaving)
[16:02:46] <bstrie> does anyone know if mutable fields are still hanging around? I know they were linted off before, but still being used internally...
[16:02:56] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[16:03:11] <nmatsakis> bstrie: they still persist I fear
[16:03:16] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: Leaving)
[16:03:25] <nmatsakis> bstrie: I wouldn't recommend any crusades against them until new borrowck lands 
[16:03:30] <bstrie> getting close on https://github.com/mozilla/rust/issues/4707 though
[16:03:47] <nmatsakis> yeah!
[16:03:51] <nmatsakis> we can prob kill const soon-ish
[16:04:02] *** Quits: pyrac (pyrac@A9EC89DE.73C89388.AD05C589.IP) (Ping timeout)
[16:04:03] <nmatsakis> I killed a lot of uses of it in the branch, since it was actually getting in the way anyhow
[16:06:39] *** Quits: catpig (catpig@moz-930C30AC.dip0.t-ipconnect.de) (Connection reset by peer)
[16:07:18] *** Joins: catpig (catpig@moz-930C30AC.dip0.t-ipconnect.de)
[16:08:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:08:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/WxEkXA
[16:08:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:09:29] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[16:10:18] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[16:11:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:11:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/oOIFCw
[16:11:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:15:11] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:15:20] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Client exited)
[16:16:06] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Client exited)
[16:20:17] *** Quits: dbaupp (Thunderbir@moz-91B99879.lns20.syd6.internode.on.net) (Ping timeout)
[16:21:00] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[16:22:30] *** Quits: boggle (boggle@moz-E4BC478D.dip0.t-ipconnect.de) (Quit: boggle)
[16:22:42] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Client exited)
[16:23:21] <indutny> ok, another question :)
[16:23:34] <indutny> I've: type LabelMap = LinearMap<uint, ~[~Opcode]>;
[16:23:46] <indutny> and later: let x: LabelMap = LinearMap::new();
[16:23:49] <indutny> but it fails:
[16:23:55] <indutny> cannot determine a type for this bounded type parameter: unconstrained type
[16:23:55] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[16:24:14] <indutny> if I'll replace LabelMap with its real type
[16:24:16] <indutny> it'll work
[16:29:13] <indutny> ah, my bad
[16:29:20] <indutny> I was actually doing this:
[16:29:29] <indutny> let x: ~LabelMap = LinearMap::new()
[16:29:31] <indutny> sorry
[16:31:39] *** Quits: akashj87 (akash@17BF7902.2921AF61.35E3DDC8.IP) (Quit: Leaving)
[16:31:58] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[16:32:02] <indutny> though, error wasn't really helpful
[16:33:20] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:33:49] *** Quits: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq) (Quit: lmandel)
[16:36:10] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[16:37:16] *** Joins: posco (oscarboyki@636AC086.5999CED5.71743E61.IP)
[16:40:26] *** Joins: graydon (graydon@moz-8B524EBD.cable.teksavvy.com)
[16:40:26] *** ChanServ sets mode: +qo graydon graydon
[16:40:49] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:41:30] *** Quits: MrFahrenheit (RageOfThou@moz-CF7139ED.dynamic.telemach.ba) (Ping timeout)
[16:42:52] <giselher> Hi, how can I access c extern variables with the foreign interface? I haven't found anything about it in the documentation.
[16:43:16] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:43:31] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[16:43:37] <strcat> giselher: wrapping them with functions in C
[16:43:37] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Quit: steven_is_false)
[16:43:47] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[16:43:51] <strcat> at least a way to get a *mut pointer to it
[16:43:58] <doy> static declarations in extern blocks works too, doesn't it?
[16:44:08] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[16:44:15] <doy> if you don't need to modify it anyway
[16:44:18] <giselher> strcat: they're const so I don't need a *mut pointer
[16:44:19] <steven_is_false> Hi! Should I replace ptr::addr_of with cast::transmute?
[16:44:46] <strcat> doy: does that really link against it? or just duplicate constants
[16:45:05] <strcat> steven_is_false: no
[16:45:08] *** Quits: hmax (hmax@moz-53A94453.yandex.net) (Quit: ????? ? ?? ??? (xchat 2.4.5 ??? ??????))
[16:45:10] <strcat> you can convert & -> *
[16:45:14] <strcat> no function call needed
[16:45:23] <steven_is_false> strcat: So just remove it entirely
[16:45:29] <strcat> yes
[16:45:32] <doy> strcat: i'm not sure, i've never tried it
[16:45:38] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:50:22] <steven_is_false> strcat: Thanks
[16:51:08] *** Quits: jeff (jeff@moz-4F7F9943.members.linode.com) (Quit: jeff)
[16:52:03] <giselher> strcat, doy: thanks, my program compiiles now, but I can't verify if it really links at the moment.
[16:53:55] <steven_is_false> strcat: I'm getting errors that it's not working: expected *<V5> but found &MyStruct
[16:54:36] <strcat> rusti: let x = 5; let y: *int = &x; y
[16:54:45] <rusti> 19291920
[16:56:19] <steven_is_false> strcat: So there seems to be a bug.
[16:57:05] <steven_is_false> strcat: Oh! I get it.
[16:57:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:57:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:57:25] <steven_is_false> One shouldn't try to return a stack pointer as an unsafe pointer.
[16:57:50] <steven_is_false> rusti: fn foo () -> *int { let x = 0; &x }
[16:57:55] <strcat> there are a lot of things you shouldn't do with unsafe pointers ;p
[16:58:11] <steven_is_false> rusti: fn foo () -> *int { let x = 0; &x } foo ()
[17:00:07] *** Joins: pauls_ (paul@moz-8C50DE9B.hsd1.ma.comcast.net)
[17:00:19] <steven_is_false> strcat: Did they change the latest loop syntax?
[17:00:28] <strcat> no
[17:00:48] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:01:02] <kimundi> rusti: error
[17:01:28] <kimundi> strcat: rusti doesn't show errors anymore :(
[17:01:54] <steven_is_false> kimundi: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) has quit (Client exited)
[17:02:07] <kimundi> ...
[17:02:15] <kimundi> whooops
[17:02:20] <Diablo-D3> hahahah
[17:02:22] <Diablo-D3> you killed it
[17:02:50] <kimundi> Nah, it was gone 5min ago
[17:03:46] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:04:27] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:04:29] <strcat> rusti: a
[17:04:30] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/OFih
[17:04:41] <indutny> wow
[17:04:47] <otters> rusti: 3
[17:04:48] <rusti> 3
[17:04:54] <Diablo-D3> rusti: over 9000
[17:04:54] <rusti> foo.rs:5:14: 5:18 error: expected `;` or `}` after expression but found `9000`
[17:04:54] <rusti> foo.rs:5          over 9000
[17:04:54] <rusti>                        ^~~~
[17:05:01] <Diablo-D3> :<
[17:05:20] <indutny> rusti: let x: core::hashmap::ListMap<uint, uint> = core::hashmap::ListMap::new();
[17:05:21] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/RaOZ
[17:05:35] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:05:36] <indutny> rusti: extern mode core; let x: core::hashmap::ListMap<uint, uint> = core::hashmap::ListMap::new();
[17:05:37] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/hfdH
[17:05:44] <indutny> err
[17:05:47] <indutny> rusti: extern mod core; let x: core::hashmap::ListMap<uint, uint> = core::hashmap::ListMap::new();
[17:05:48] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/AFRT
[17:05:57] <indutny> oook
[17:06:01] <strcat> rusti: let mut xs = core::hashmap::HashSet::new(); xs
[17:06:02] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/VNdR
[17:06:12] <strcat> rusti: let mut xs = core::hashmap::HashSet::new(); xs.insert(5); xs
[17:06:14] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/NMYf
[17:06:44] <kimundi> indutny: No need for extern mod core, and also no need for extern mod std :)
[17:06:49] *** Joins: lmandel (lmandel@moz-FDFDA3D8.sub-70-197-8.myvzw.com)
[17:06:51] <indutny> so
[17:06:54] <indutny> just mod core; ?
[17:06:58] <kimundi> indutny: No
[17:07:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:07:07] <strcat> indutny: it's imported and linked against by default
[17:07:10] <kimundi> core is linked against per default
[17:07:16] <strcat> libstd isn't but the bot links against it already
[17:07:41] <indutny> oh, right
[17:07:50] <indutny> thank you
[17:07:54] <kimundi> indutny: 'mod foo;' Is just for including another sourcefile as submodule
[17:07:57] <steven_is_false> strcat: loops did change. They went from loop : foo { to 'foo : loop {
[17:08:12] <strcat> well the labelled break syntax changed
[17:08:16] *** Joins: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu)
[17:08:24] <kimundi> indutny: it's the same as 'mod foo { /* foo.rs content here*/ }'
[17:08:57] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: rcirc on GNU Emacs 24.2.1)
[17:09:16] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[17:11:12] <strcat> rusti: fn foo() { loop {} }; foo()
[17:11:17] <rusti> timed out after 5 seconds
[17:11:26] <pascal> rusti: let i = str::as_bytes("Hello World") { |bytes| vec::len(bytes) };
[17:11:27] <rusti> foo.rs:5:46: 5:47 error: expected `;` but found `{`
[17:11:27] <rusti> foo.rs:5          let i = str::as_bytes("Hello World") { |bytes| vec::len(bytes) };
[17:11:27] <rusti>                                                        ^
[17:11:33] * strcat wonders if forbidding private messages is a good idea after all
[17:11:36] <pascal> Hm, this is from the docs
[17:11:50] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[17:11:52] <strcat> missing 'do'
[17:12:05] <strcat> if you want to pass a closure as a block
[17:12:13] <indutny> kimundi: thanks
[17:12:20] <kimundi> strcat: Why, getting spammed?
[17:12:27] <strcat> kimundi: no but it could be
[17:12:38] <strcat> in one channel the 5 second timeout isn't an issue
[17:12:49] <strcat> allowing private messages is essentially endless channels
[17:13:22] <kimundi> strcat: Install a limit? Only n reqests at the same time?
[17:13:41] <strcat> that doesn't fix it (the fact that you can DoS it with pms)
[17:13:51] <kimundi> hm, true I guess
[17:14:11] <strcat> cpu/memory usage isn't an issue, it only gets 256MiB of ram
[17:14:38] *** Quits: lmandel (lmandel@moz-FDFDA3D8.sub-70-197-8.myvzw.com) (Quit: lmandel)
[17:14:49] <kimundi> Isn't the mozilla irc server setup so that you can block any not-registered user?
[17:15:00] <kimundi> maybe just enable that for rusti
[17:15:03] <pascal> rusti: let i = do str::as_bytes("Hello World") |bytes| { vec::len(bytes) };
[17:15:05] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/XAgf
[17:15:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:17:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:17:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/YiMaDg
[17:17:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:17:48] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[17:17:52] <pascal> It seems this example is broken: http://static.rust-lang.org/doc/core/str.html#function-as_bytes
[17:19:02] <kimundi> pascal: Examples in doccomments tend to break because noone checks them :(
[17:19:42] <pascal> I did! Although I'm not sure what's the best example/fix for that special case
[17:19:47] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[17:19:50] <kimundi> rusti: do str::as_bytes("Hello World") |bytes| { vec::len(bytes) }
[17:19:51] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SOQH
[17:19:52] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[17:20:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:20:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gKvMPg
[17:20:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:20:23] <kimundi> rusti: do str::as_bytes(~"Hello World") |bytes| { vec::len(bytes) }
[17:20:24] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/EhOG
[17:21:02] <kimundi> rusti: do str::as_bytes(&~"Hello World") |bytes| { vec::len(bytes) }
[17:21:03] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/VKjW
[17:21:15] <kimundi> rusti: do str::as_bytes(&const ~"Hello World") |bytes| { vec::len(bytes) }
[17:21:16] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/iLTb
[17:21:41] <kimundi> rusti: do str::as_bytes(&const ~"Hello World") |bytes| { bytes }
[17:21:42] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/OFKD
[17:22:06] <strcat> the block is in { }
[17:22:12] <strcat> it can't evaluate to a borrowed ptr
[17:22:14] <kimundi> rusti: do str::as_bytes(&const ~"Hello World") |bytes| { print(fmt!("%?", bytes)) }
[17:22:15] <rusti> &~[72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 0]
[17:22:41] <kimundi> rusti: do str::as_bytes(&const "Hello World") |bytes| { print(fmt!("%?", bytes)) }
[17:22:42] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/DHQV
[17:22:49] <kimundi> rusti: do str::as_bytes("Hello World") |bytes| { print(fmt!("%?", bytes)) }
[17:22:50] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/QNJJ
[17:22:52] <kimundi> hmm
[17:23:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:23:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/1xoTjA
[17:23:07] <ghrust> 13rust/06auto 14f45c6b8 15kud1ing: Add a brief description to show up in http://static.rust-lang.org/doc/core/index.html
[17:23:07] <ghrust> 13rust/06auto 149a31cdb 15bors: auto merge of #6213 : kud1ing/rust/patch-1, r=graydon...
[17:23:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:23:09] <kimundi> why has that function such a signature ? :P
[17:23:21] <strcat> because the vec/str modules are terrible
[17:23:39] <kimundi> well, apart from that :D
[17:23:43] <strcat> like most of the modules that weren't recently written
[17:23:50] <strcat> kimundi: apart from that no reason
[17:24:15] <strcat> it shouldn't be a free function and it shouldn't have that signature
[17:26:13] <pascal> so what's a convenient way to implement fn (a: ~str) -> ~[u8]?
[17:27:05] <graydon> oh god, c++1y constexpr now permits variable mutation and loops
[17:27:12] <EXetoC> fn f(a: ~str) -> ~[u8] { ~[]} :p
[17:27:29] <pascal> EXetoC: ha!
[17:28:36] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:28:52] <bstrie> strcat: how would you feel about associated items not making it in for 1.0? it feels like they're pretty relevant to the things you're doing...
[17:29:01] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[17:29:01] *** ChanServ sets mode: +o pcwalton
[17:29:28] <graydon> nmatsakis: ping
[17:29:34] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[17:30:06] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[17:30:19] <graydon> nmatsakis: I'm not sure what happened to your annihilator fix but .. I think bors got part way through merging it when I was doing violence to buildbot, and it'll need to be resubmitted on a different branch. I'm happy to do this myself; just checking to make sure you're not part way into it
[17:32:25] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[17:32:28] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[17:33:00] <pcwalton> RFC: forbid the name "cb" to mean "callback"
[17:33:20] <pcwalton> it's totally opaque, "f" is a better name if you must have a short name for a function
[17:33:22] <bstrie> `let cb_ = ...`
[17:33:30] <pcwalton> RFC 2: forbid trailing underscores
[17:33:34] <bstrie> haha
[17:33:37] <bstrie> +1
[17:34:32] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[17:34:35] <pcwalton> in general I'd like to politely suggest more attention to naming
[17:35:12] <graydon> in rustc or libs or everywhere?
[17:35:23] <pcwalton> everywhere :)
[17:35:25] <pcwalton> but especially in libs
[17:35:26] <graydon> I probably set a somewhat-bad precedent in my own style :(
[17:35:43] <graydon> too-terse names, no comments :((
[17:36:32] <steven_is_false> Wooh! I made my first pull request! https://github.com/brson/rust-sdl/pull/58
[17:36:35] <pcwalton> rust naming these days is a lot better than it used to be
[17:37:09] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[17:38:14] <graydon> steven_is_false: bravo!
[17:38:27] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:38:43] <pcwalton> longer names give the sigils room to breathe :)
[17:38:53] <graydon> haha
[17:38:58] <lucian> pcwalton: think of it this way: it's not Go naming http://golang.org/pkg/net/#Dial
[17:39:00] <pcwalton> not that there's anything wrong with judicious use of "i" for loop indices and whatnot
[17:39:01] <graydon> suddenly I am enlightened!
[17:39:17] <graydon> "dial" is a plan-9-ism
[17:39:24] <graydon> (there are tons of them in the go libraries, it's cute)
[17:39:32] <pcwalton> yeah, "rune" too
[17:39:42] <pcwalton> oddly enough "rune" is one of the two typedefs in Go, the other one being "char"
[17:39:42] <nmatsakis> graydon: oh, feel free to merge it, I've been kind of paralyzed by lack of snapshot
[17:39:54] <graydon> you can take the hacker out of bell labs, but you can't take bell labs out of the hacker :)
[17:40:02] <graydon> nmatsakis: np
[17:40:50] <graydon> (janitorial work makes me feel surprisingly more-useful than trying to actually grapple with the thing)
[17:41:00] <pcwalton> I don't really like the way they use inconsistent single-letter names for "self"
[17:42:05] <lucian> pcwalton: yes, that is very annoying
[17:42:24] <lucian> pcwalton: and the syntax feels like a missed opportunity to include multimethods to me
[17:42:36] <pcwalton> Rust is more strict there, but it also means you don't have to repeat the type name
[17:42:47] <pcwalton> I actually proposed a very Go-like syntax for methods
[17:43:01] <pcwalton> but nmatsakis reminded me that having to repeat the receiver will get very annoying when you have generics
[17:43:06] <graydon> I'm not ... entirely clear on whether anyone has a multimethod dispatch system that approaches the speed of vtbls
[17:43:11] <pcwalton> not sure what Go is going to do there
[17:43:22] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:43:31] <strcat> pcwalton: they won't have parametric polymorphism ;p
[17:43:41] <graydon> though also not sure anyone's benchmarked it, or even whether there's a reasonable form of benchmarking. pretty apples-to-oranges.
[17:43:43] <strcat> at most they'll add methods to the built-in types so they work with the dynamic interfaces
[17:43:45] <pcwalton> I think they'll have it someday
[17:43:52] <lucian> graydon: i don't think there are any fast ones. even plain overloading would be nice to have in Go, though
[17:43:58] <pcwalton> I have yet to see a language that got away with not having it eventually
[17:44:09] <pcwalton> it'll probably be years though
[17:44:12] <strcat> pcwalton: well I think adding methods to built-ins essentially gives them something as good as what java has
[17:44:32] <pcwalton> you can write map() in java though :)
[17:44:34] <strcat> they only need more if they want to avoid dynamic dispatch + runtime type inference stuff
[17:44:35] <lucian> pcwalton: Java
[17:44:48] *** Joins: dherman (dherman@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:44:48] *** ChanServ sets mode: +o dherman
[17:44:50] <pcwalton> lucian: generics?
[17:44:50] <lucian> well, java din't quite get away with it i guess
[17:44:55] <pcwalton> I'm talking about generics
[17:45:12] <strcat> pcwalton: true, they're still not entirely there.
[17:45:14] <graydon> I wish dylan had worked out though. it would have been nice if apple had managed to transition into that rather than objc.
[17:45:16] <strcat> even with that
[17:45:37] <lucian> pcwalton: i'm being stupid, i misread it being about interfaces for syntax
[17:45:39] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:45:48] <strcat> graydon: my daily rust build cronjob has found 3 bugs in various things so far ;p
[17:46:03] <graydon> strcat: what does it do?
[17:46:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:46:14] <graydon> I thought it just packaged rustc
[17:46:25] <strcat> yeah but it found an fcron segfault
[17:46:45] <strcat> and now it found a bug in an ad-hoc patch one of the devs made to the build tooling on the server ;p
[17:46:58] <graydon> haha
[17:47:00] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:47:33] <strcat> created files I couldn't delete in my ~ and made the chroot fail
[17:47:52] <graydon> your problem is clearly that you're not using vixie cron
[17:48:03] * strcat uses cronie
[17:48:03] <graydon> all bets are off
[17:48:09] <strcat> dunno why the server needs fcron...
[17:48:19] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[17:48:37] <strcat> cronie is nice because it can do pam logins for the cronjob
[17:48:42] <strcat> some things need that
[17:49:22] <strcat> fcron's feature is apparently segfaulting when it sees ctrl-d in the management tool or from a cronjob
[17:49:29] <graydon> hm. 'Vixie has stated that he "now hold[s] the record for 'most CERT advisories due to a single author.'"'
[17:49:45] <graydon> maybe not something to put on the cv
[17:51:40] *** Joins: blitter (blitter@moz-7C98731E.dyn.centurytel.net)
[17:52:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:52:35] *** Quits: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu) (Client exited)
[17:53:09] * strcat just needs to figure out how to make it not checkout LLVM and libuv each time
[17:53:21] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Ping timeout)
[17:56:13] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:56:18] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[18:08:38] *** Joins: blitter (blitter@moz-7C98731E.dyn.centurytel.net)
[18:10:07] *** Joins: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu)
[18:10:57] *** Joins: boggle (boggle@moz-E4BC478D.dip0.t-ipconnect.de)
[18:11:02] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:11:02] *** ChanServ sets mode: +o brson
[18:11:31] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[18:11:35] <graydon> brson: if I want to run just the run-pass tests for just i686 target, how do I do that?
[18:13:24] *** Joins: jorendorff (jorendorff@D0304D9F.19E0E257.EF932970.IP)
[18:13:51] <graydon> hah. someone ordered 8 pizzas for our office last night.
[18:13:56] <graydon> nobody has any idea who did it or why.
[18:14:23] <brson> graydon: check-stage1-T-i686-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-rpass-exec
[18:14:25] <brson> (sorry)
[18:14:31] <graydon> np
[18:14:35] <graydon> I _almost_ got it
[18:15:11] <brson> at some point I added that -exec suffix
[18:15:17] <strcat> graydon: and it's going to email me every time it builds reporting non-errors :(
[18:15:26] <strcat> maybe I should submit my first patch to systemd
[18:15:30] <strcat> teach nspawn to be quiet ;p
[18:15:49] <strcat> prints 2 lines to stderr no matter what
[18:16:23] *** Quits: graydon (graydon@moz-8B524EBD.cable.teksavvy.com) (Ping timeout)
[18:17:35] *** Quits: RMF (RMF@moz-FD7F97AA.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[18:17:40] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:18:03] *** Joins: RMF (RMF@moz-FD7F97AA.dsl.telepac.pt)
[18:18:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:18:40] *** Joins: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP)
[18:18:41] *** ChanServ sets mode: +qo graydon graydon
[18:20:11] *** Parts: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) ()
[18:21:16] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[18:21:18] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[18:22:13] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Input/output error)
[18:22:24] *** Joins: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP)
[18:22:24] *** ChanServ sets mode: +qo graydon graydon
[18:24:14] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[18:24:17] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[18:24:18] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[18:24:19] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[18:24:58] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[18:27:09] *** Parts: rroels (rroels@moz-57D4C308.vub.ac.be) (WeeChat 0.3.8)
[18:29:19] <pcwalton> graydon: there are serious valgrind problem with the snapshot bots only on x86-64
[18:29:23] <pcwalton> is the hardware OK on those bots?
[18:29:36] <pcwalton> it doesn't seem to repro outside the snapshot bots
[18:29:38] <graydon> should be
[18:29:39] <brson> here's the log http://buildbot.rust-lang.org/builders/snap3-linux/builds/452/steps/test/logs/stdio
[18:29:44] <graydon> maybe they're failing
[18:29:53] <brson> this happens every 4-5 snapshots i trie
[18:29:56] <brson> *try
[18:29:59] <graydon> huh
[18:30:06] <graydon> which host? I'll memcheck it
[18:30:11] <graydon> er, memtest
[18:30:47] <graydon> oh guh
[18:30:50] <graydon> linux2b, right
[18:30:53] <graydon> that's a centos machine
[18:31:03] <graydon> centos ... 5?
[18:31:33] <brson> I'm going to start another snapshot on a different commit. The commit I was snapshotting yesterday *also* had intermittent failures in a flatpipes testcase (which I xfailed)
[18:31:34] <graydon> centos 6
[18:31:37] <graydon> but still, hm
[18:31:40] <brson> sorry this is taking all week
[18:31:54] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[18:31:54] <graydon> no problem
[18:31:56] <graydon> it's not your fault!
[18:31:57] *** Joins: drguildo (drguildo@E926269B.4D596AA5.EE27BB8D.IP)
[18:32:05] <graydon> it wouldn't surprise me if the thing was wonky
[18:32:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:32:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/1xoTjA
[18:32:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:32:18] <graydon> the labs VMs in general have fallen over many times
[18:32:24] <graydon> apparently due to hardware problems :(
[18:32:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:32:44] <ghrust> 01[13rust01] 15brson fast-forwarded 06snap-stage3 from 1479a2b2e to 14213f7b2: 02http://git.io/AwUm2g
[18:32:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:33:05] *** Joins: igl (igl@moz-54BE17CD.adsl.alicedsl.de)
[18:33:38] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[18:34:04] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:35:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:35:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HypuCw
[18:35:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:35:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:35:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/I1PcUA
[18:35:10] <ghrust> 13rust/06auto 1402889f7 15Daniel Ralston: Add core::cmp::Equiv to prelude
[18:35:10] <ghrust> 13rust/06auto 144332f81 15bors: auto merge of #6216 : Sodel-the-Vociferous/rust/dralston-6146, r=graydon...
[18:35:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:35:12] <graydon> running memtester on that host now
[18:36:51] *** Quits: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu) (Client exited)
[18:39:27] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[18:42:20] *** Joins: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu)
[18:47:16] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[18:49:05] *** Joins: mib_eja4ki (Mibbit@C9D23967.8ADFFDAA.F365210E.IP)
[18:49:31] *** Quits: mib_eja4ki (Mibbit@C9D23967.8ADFFDAA.F365210E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:50:16] <pcwalton> the TLS API is incompatible with INHTWAMA
[18:50:20] <pcwalton> and also incompatible with no-GC
[18:52:12] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[18:52:17] <giselher> another question, how would I pass a rust function as callback to a c function? I guess that is not possible.
[18:52:25] <pcwalton> giselher: it's possible, just declare the rust function "extern"
[18:52:25] <strcat> giselher: you can, extern fn
[18:53:03] <giselher> ok thanks
[18:53:23] <giselher> and a passing a structure with function pointers?
[18:53:35] *** Quits: heftig (heftig@moz-311D88CA.dip0.t-ipconnect.de) (Quit: Quitting)
[18:53:46] <pcwalton> giselher: that works too
[18:53:51] <pcwalton> just make a struct with extern fns
[18:53:57] <pcwalton> although I think they may be *u8 in Rust at the moment?
[18:54:45] *** Joins: heftig (heftig@moz-311D88CA.dip0.t-ipconnect.de)
[18:55:03] <giselher> pcwalton: thanks, yes they appear to be of the type *u8
[18:55:21] <giselher> I am actually suprised how flexible the foreign interface is in rust
[18:55:23] *** Joins: rroels (rroels@moz-F4424B80.vub.ac.be)
[18:55:51] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[18:56:10] <erickt> nmatsakis: ping
[18:57:18] <nmatsakis> erickt: pong
[18:57:40] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[18:57:41] <Jeaye> pcwalton: ping
[18:57:44] <pcwalton> Jeaye: pong
[18:58:16] <Jeaye> https://github.com/mozilla-servo/rust-opengles/commit/03a995e039945c74755f841e7a4d70c7962eb8ae That broke building for me on Mac OS 10.8.3 (which was working before).
[18:58:37] <pcwalton> hmm, uh-oh
[18:58:44] <erickt> nmatsakis: I just wanted to let you know I'm traveling this next week, so don't worry about me if you end up working on that method map thing of yours. I'll rebase around any changes you make
[18:58:45] <pcwalton> I tried to make it work with later Mac OS versions
[18:58:51] <pcwalton> but I didn't test
[18:58:56] <pcwalton> what broke?
[18:59:18] <pcwalton> so I needed to make the change because glBindVertexArray is glBindVertexArrayAPPLE for me on 10.6
[18:59:35] <Jeaye> pcwalton: nm shows the vertex array symbols are not in the dylib, so q3 fails to build when it can't find them.
[18:59:54] *** Quits: dherman (dherman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: dherman)
[18:59:55] <nmatsakis> erickt: ok. You're not waiting for any feedback from me atm are you?
[18:59:57] <Jeaye> Looks like the idea was to only remove them in 10.6, but I don't think it's doing just that.
[19:00:03] <nmatsakis> erickt: can't recall where we left it a few hours back
[19:00:05] <pcwalton> right, that's what I tried to do
[19:00:12] <nmatsakis> erickt: I do plan to look over your branch but haven't started
[19:00:22] <erickt> nmatsakis: nope, but if you figured out all my problems it would simplify my life immensely :)
[19:00:36] <pcwalton> do you know if mac_10_6 was added to the RUSTFLAGS?
[19:00:53] * Jeaye checks
[19:00:55] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Input/output error)
[19:00:55] <pcwalton> Luqman: https://github.com/mozilla-servo/rust-opengles/commit/03a995e039945c74755f841e7a4d70c7962eb8ae is the syntax correct?
[19:02:40] <nmatsakis> erickt: ok :)
[19:03:09] <kalenedrael> ok, why would rust say that a loan conflicts with a prior loan that is on a later line...?
[19:03:12] <Jeaye> pcwalton: Looks like it doesn't get into the condition to add the flags (an echo in there didn't show up), and ` sw_vers | grep -c 10.6` yeilds 0 for me.
[19:03:22] <Jeaye> Not sure why the symbols aren't brough in.
[19:07:08] *** Joins: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP)
[19:07:08] *** ChanServ sets mode: +qo graydon graydon
[19:08:26] <Jeaye> pcwalton: Seems like the problem's not in the Makefile, but rather the source.
[19:10:03] <nmatsakis> kalenedrael: going to need to see source
[19:10:20] <nmatsakis> kalenedrael: oh... I see, you are being thrown off by the use of the word prior--
[19:10:30] <nmatsakis> kalenedrael: current code doesn't really consider the flow of control
[19:10:35] <nmatsakis> kalenedrael: (there is an upcoming fix)
[19:10:45] <nmatsakis> kalenedrael: but for now you can usually solve this by introducing blocks to contain the scope of the loan
[19:12:28] <giselher> hoho, my callback is called, but I get assertion failed is_ut8. What is the best way to return a c string as rust string?
[19:12:59] <kalenedrael> oh, ok
[19:15:37] *** Quits: redline6561 (redline656@moz-714529BD.members.linode.com) (Quit: ZNC - http://znc.in)
[19:17:24] *** Joins: jonasac (jonasac@moz-D4CDC8CE.members.linode.com)
[19:18:26] *** Joins: spider-mario (spidermari@moz-EE4B8A09.rev.sfr.net)
[19:21:25] *** Joins: philix (philix@moz-451739D3.user.veloxzone.com.br)
[19:21:26] <nmatsakis> giselher: if the C string is not utf-8, you have to either transcode it, or else return a &[u8]
[19:21:32] <nmatsakis> giselher: or rather ~[u8]
[19:25:09] *** Joins: doener (doener@moz-724BBC7C.unitymediagroup.de)
[19:31:02] *** Quits: boggle (boggle@moz-E4BC478D.dip0.t-ipconnect.de) (Quit: boggle)
[19:31:40] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[19:32:08] *** Quits: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu) (Client exited)
[19:34:46] <Diablo-D3> hrm
[19:34:56] <Diablo-D3> I wonder what the fastest implementation of any language is
[19:35:14] <tjc> Diablo-D3: I think it's sitting on my desk :-)
[19:35:18] <Diablo-D3> and no, assembly isn't the right answer, assembly is often slower for normal tasks because you're not smart enough to optimize it
[19:35:19] <tjc> and the language is called "machine language"
[19:35:24] <EXetoC> cobol!
[19:35:26] <Diablo-D3> tjc: beat you.
[19:35:44] <tjc> Diablo-D3: Yeah -- but you initially said "any language" with no qualifier about ease of programming :-)
[19:35:52] <tjc> it's hard to state this question precisely
[19:35:58] <Diablo-D3> tjc: its not about ease, its about most people just arent smart enough
[19:36:06] <tjc> Diablo-D3: No, I don't agree with that.
[19:36:11] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[19:36:17] <Diablo-D3> fine, Im not smart enough and Im pretty damned smart.
[19:36:29] <tjc> I am certainly not smart enough to outsmart a modern optimizing compiler
[19:36:34] <tjc> I don't have conscious access to that kind of reasoning
[19:36:36] *** Joins: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu)
[19:36:43] <Diablo-D3> I dont want to use C as the benchmark for this question
[19:36:46] <Diablo-D3> tjc: but yeah thats the thing
[19:36:50] <tjc> my brain doesn't have indiividual optimization switches that I can toggle
[19:36:51] <EXetoC> you'll get there with a little practice
[19:37:00] <Diablo-D3> Im not as smart has a hundred people who are as smart or smarter than me
[19:37:08] <Diablo-D3> tjc: mine does =/
[19:37:15] <tjc> Diablo-D3: thing is, practicing can make me better at designing algorithms, but it won't make me better at not getting bored
[19:37:25] <tjc> and there's plenty of work computers can do just by virtue of never getting bored
[19:37:32] <Diablo-D3> yeah
[19:37:34] <Diablo-D3> BUT
[19:37:40] <Diablo-D3> it doesnt answer my question
[19:37:52] <tjc> Well, I was trying to gently point out that your question is vague :-)
[19:38:05] <Diablo-D3> there has to be languages that are regularly faster than C (the language Im not using as the benchmark) on a regular basis for a wide set of problem domains
[19:38:19] *** Quits: posco (oscarboyki@636AC086.5999CED5.71743E61.IP) (Quit: posco)
[19:38:42] <strcat> tjc: you can outsmart it on a small example :)
[19:38:49] <strcat> but there's no way a human can do it for a big example
[19:38:53] <strcat> would take years and years :D
[19:38:54] <tjc> strcat: Right
[19:39:02] <Diablo-D3> strcat: well thats the thing
[19:39:06] <Diablo-D3> it HAS taken years and years and years
[19:39:09] <Diablo-D3> approximately 50
[19:39:09] <tjc> if we're just talking about fibonacci-ish benchmarks, then sure, there are answers to the question, but
[19:39:14] <Diablo-D3> and they produced a compiler with it
[19:39:18] *** bent is now known as bent|lunch
[19:39:24] <tjc> aside from inherent puzzle-solving fun, I'm not sure why anyone should care
[19:39:28] <Diablo-D3> and thousands of people have weighed in positively on the modern compiler
[19:39:35] <tjc> I mean, fun is important but it doesn't necessarily follow that microbenchmarks tell you anything
[19:39:37] *** Joins: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com)
[19:39:40] <Diablo-D3> tjc: just asking to ask, really
[19:39:40] * strcat doesn't know what the topic of conversation really is
[19:39:59] <Diablo-D3> strcat: whats the fastest language, where fastest is over a wide domain of problems
[19:40:19] <Diablo-D3> well, fastest implementation of a language
[19:40:22] <strcat> you can write slow code in any language :P
[19:40:28] *** Parts: kspaans (kspaans@moz-21D6B3DE.csclub.uwaterloo.ca) ()
[19:40:37] <Diablo-D3> yes, but lets assume you're not putting a stupid programmer infront of it
[19:40:53] <tjc> I think it's much less about "smart" and "stupid" programmers than about situations
[19:40:54] <Diablo-D3> like, I can write code that is very fast in C for C terms, and very fast in perl for perl terms
[19:40:59] <Diablo-D3> but the perl is going to be 20x slower than the C
[19:41:20] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[19:41:22] <Diablo-D3> the python is going to be 20x slower, the ruby is going to be 25-30x slower
[19:42:03] <Diablo-D3> the lisp is going to be a negative amount of slower, depending on which impl Im using
[19:42:05] <strcat> slower than 20x for a silly microbenchmark
[19:42:18] *** Joins: redline6561 (redline656@moz-714529BD.members.linode.com)
[19:42:27] <Diablo-D3> strcat: well what if Im just shoveling data and not processing it, perl CAN be rather bad at that
[19:43:01] <strcat> if you're not bound by I/O and aren't just handing off work to a C library, I know python is well over 100x slower than C
[19:43:08] <strcat> it lands at 50-60x on the benchmarks game because it calls C libs
[19:43:11] *** Quits: KindOne (KindOne@moz-6634B660.dynamic.ip.windstream.net) (Ping timeout)
[19:43:13] <strcat> pypy is much, much better
[19:43:19] <Diablo-D3> holy crap
[19:43:24] <strcat> but it's slower at calling C which is the usual escape...
[19:43:24] <Diablo-D3> python is that slow?
[19:43:32] <strcat> Diablo-D3: ruby is slower
[19:43:35] <Scriptor> interpreted languages in general are
[19:43:45] <strcat> perl is as slow too
[19:43:47] <Scriptor> comparing the two isn't really productive
[19:43:53] <Diablo-D3> my estimates have been off then
[19:43:55] <strcat> they only look okay when you're handing off work to C
[19:44:00] <strcat> most python code is glue code between C libs
[19:44:05] <strcat> doesn't matter how fast pure python is
[19:44:07] <Diablo-D3> Scriptor: yeah, but why the fuck do people keep writing apps in these languages
[19:44:09] <Scriptor> because you'll rarely ever encounter a point where both C and Python are equal in everything except speed for the problem at hand
[19:44:26] *** Joins: nejucomo (nejucomo@moz-894F747D.snydernet.net)
[19:44:28] <Diablo-D3> yes, because C will never consider whitespace syntactically valid.
[19:44:36] <EXetoC> if __name__ == '__main__': do_stuff_in_c() ... win
[19:44:38] <Scriptor> Diablo-D3: because even 100 times as slow can still be pretty damn fast, and it's much easier to write something in them?
[19:44:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:44:51] <Diablo-D3> Scriptor: I cant write shit in python, Ive tried
[19:44:56] <Diablo-D3> the language is just too nonsensical
[19:44:59] <strcat> pypy is somewhere in the range of 5x-15x slower than C depending on the benchmark
[19:44:59] *** Quits: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP) (Quit: *Poof!*)
[19:45:09] <strcat> luajit gets to 1.5x-5x
[19:45:22] <nmatsakis> no offense, but I think this is a bit off-topic.
[19:45:26] <Scriptor> I'm sorry about that, but plenty of people *are* able to write python, and write it well
[19:45:28] <strcat> nmatsakis: it is ;p
[19:45:33] <Scriptor> yes
[19:45:38] <EXetoC> Diablo-D3: I really don't like the fact that it might take ages before type errors are discovered
[19:45:41] <strcat> kind of a silly conversation
[19:45:44] <EXetoC> not a python-specific issue though
[19:46:17] <EXetoC> still, it's pretty awful depending on what you're coding
[19:46:51] <Diablo-D3> well, I want a language that is both fast and is both developer friendly AND doesnt force bad patterns on you
[19:46:52] *** Joins: KindOne (KindOne@moz-6634B660.dynamic.ip.windstream.net)
[19:46:57] <Diablo-D3> so I can compare it to rust.
[19:47:14] <strcat> ghc -fdefer-type-errors
[19:47:23] *** Parts: true_droid (Adium@moz-123FD9B8.beck.volia.net) ()
[19:47:33] <tjc> Diablo-D3: I'm just speaking for myself, but I'm working on Rust *because* there is nothing it can be compared to in a straightforward way :-)
[19:47:44] <tjc> If there was, I might as well go write libraries in some existing language
[19:48:03] <graydon> nmatsakis: ping
[19:48:16] <Diablo-D3> tjc: well, what the fuck did everybody use before rust?
[19:48:31] <Luqman> pcwalton: not(a, b) was (!a && !b)  iirc
[19:48:40] <pcwalton> Luqman: ohhh
[19:48:44] <pcwalton> well, that's wrong :)
[19:48:49] <tjc> Diablo-D3: C++, mostly
[19:48:55] <tjc> but it's not developer-friendly
[19:49:01] <tjc> well, depends on the developer
[19:49:04] <pcwalton> violation of de morgan's laws!
[19:49:11] <pcwalton> Jeaye: ^ there's the problem
[19:49:17] <strcat> tjc: it's least friendly to experienced library writers ;p
[19:49:31] <Diablo-D3> tjc: I refuse to write in c++
[19:49:34] <strcat> because they know all the pain they have to go through to actually do things right
[19:49:38] <tjc> strcat: Well, I would argue it's hostile to all developers, but Bjarne Stroustrup has his deal about smart programmers
[19:49:39] <Diablo-D3> tjc: I just absolutely refuse to
[19:49:47] <tjc> which I think is a bunch of hooey, but hey, I'm not always right
[19:49:50] <Diablo-D3> it is FULL of bad patterns
[19:49:58] <graydon> woah, what's that?
[19:49:59] <Diablo-D3> I want a language that has none of those
[19:50:04] <Jeaye> pcwalton: Ahhh, logic.
[19:50:07] <strcat> tjc: well I like writing code in C++ with high-level libraries written by other people :)
[19:50:44] *** Joins: stephank (stephank@FE6D378F.A6EC7F74.1E99A072.IP)
[19:50:53] <Diablo-D3> strcat: yeah but then you get strange bugs you cant debug because they used some forbidden features of C++
[19:51:06] <Diablo-D3> like templates, or friend classes, or templates, or templates, or templates inside of templates
[19:51:12] <graydon> I'm curious how Stroustrup views C++ really. I have only looked at low-ish level technical discussions by him
[19:51:14] <Diablo-D3> or threads
[19:51:33] <strcat> templates are easy to debug, they're compile-time errors
[19:51:44] <tjc> graydon: have you seen the interview he did in Technology Review? if not I'll link it
[19:51:47] <Diablo-D3> strcat: I can debug perl regex. I cannot debug c++.
[19:51:56] <tjc> at the time I thought it was kind of interesting, in retrospect I'm more annoyed with him
[19:51:56] <graydon> evidently not
[19:51:58] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[19:52:01] <tjc> sec
[19:52:17] *** Joins: gareth0 (gareth0@moz-A10565CD.dynamic.dsl.as9105.com)
[19:52:21] <tjc> graydon: http://www.technologyreview.com/news/406923/the-problem-with-programming/
[19:52:53] <tjc> a quote I liked: 'On the other hand, looking at average pieces of code can make me cry.'
[19:53:06] <tjc> on the other hand, as a friend pointed out, he is responsible for a lot of the stuff that makes him want to cry
[19:53:48] <tjc> where I'm getting the "smart programmer" stuff is on page 2: 'C++ has indeed become too expert friendly at a time where the degree of effective formal education of the average software developer has declined. However the solution is not to dumb down the programming languages...'
[19:54:04] <tjc> I think that's a total cop-out having patience to deal with errors the compiler should detect has nothing to do with being smart
[19:54:21] <EXetoC> amen
[19:54:27] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[19:54:39] <pcwalton> RFC: a lint pass that tells you when you're using the old-style constructor convention
[19:54:46] <pcwalton> struct Thing { ... } fn Thing() -> Thing { ... }
[19:55:02] <Diablo-D3> is it possible to have a language that is both powerful enough for use, but also hard to write utter shit code in?
[19:55:09] <kalenedrael> what is the 'new style'
[19:55:14] <strcat> pcwalton: or just warn on uppercase functions >:)
[19:55:18] <tjc> Diablo-D3: in my experience, people who are determined to do so can write crappy code in any language :-)
[19:55:23] <pcwalton> strcat: yeah
[19:55:30] <Diablo-D3> tjc: yes yes, but its somewhat hard
[19:55:33] <tjc> pcwalton: do we disapprove of that convention enough to lint about it?
[19:55:41] <pcwalton> I think so
[19:55:46] <Diablo-D3> unless you're in C, which its ridiculously easy
[19:56:01] *** Quits: gareth0 (gareth0@moz-A10565CD.dynamic.dsl.as9105.com) (Ping timeout)
[19:56:21] <tjc> you haven't lived until you've seen people try to write Java in Haskell
[19:56:34] <Diablo-D3> seriously, I spent the better part of a day trying to find a bug in 1000 lines of C
[19:56:39] <Diablo-D3> code that I wrote
[19:56:45] <Diablo-D3> and was presumably working
[19:56:55] <EXetoC> tjc: do you do that in O'Haskell?
[19:57:02] <Diablo-D3> I almost blacked out from the pleasure of finding the bug
[19:57:16] <tjc> EXetoC: This wasn't with O'Haskell, it was people who were hired to work on a Haskell project but didn't know Haskell when they started out
[19:57:29] <Diablo-D3> tjc: also, how the hell do you write haskell javaly?
[19:57:33] <Diablo-D3> thats impossible
[19:57:41] <EXetoC> oh god
[19:57:49] <tjc> Diablo-D3: Things like: if return_code == 0 {  } everywhere instead of just making your functions return bools
[19:57:54] <tjc> there were worse things, I've tried to forget them mostly
[19:58:05] <Diablo-D3> but? java? has? bools.
[19:58:44] <strcat> better example would be return codes over Either then
[19:58:52] <strcat> assuming they did that ;p
[19:59:03] <EXetoC> Diablo-D3: nice!
[19:59:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:59:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/I1PcUA
[19:59:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:59:16] <tjc> strcat: well, I know they returned Maybe everywhere and checked for it explicitly instead of using the Maybe monad syntax
[19:59:29] <tjc> Diablo-D3: True, it was maybe more like writing C in Haskell, but if I say that it sounds like they were carefully optimizing their code for performance...
[19:59:32] <tjc> which they were not
[19:59:35] <Diablo-D3> tjc: I wonder if that just means haskell has too many eatures
[19:59:37] <Diablo-D3> C has bools
[19:59:38] <Diablo-D3> I use them
[20:00:03] <tjc> Anyway, this is still off-topic, but I just think that languages don't make people write good code; people have to want to
[20:00:10] <tjc> and yeah, that's very vague, which is a sign of an off-topic discussion :-)
[20:00:18] <Diablo-D3> heh, well
[20:00:41] <Diablo-D3> if I want to write highly concurrent code in multiple different models, would rust be right?
[20:01:20] <tjc> it should be! that's certainly what we're aiming for
[20:01:26] <tjc> if not, then we'll have made a mistake
[20:01:50] <Diablo-D3> well, I once decided, HEY JAVA LOOKS LIKE A COOL LANGUAGE, Sun had just open sourced it and I decided to revisit my decade long Java hate.
[20:01:58] <Diablo-D3> I still hate Java, and I have the scars to prove it.
[20:02:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:02:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/-ScKHw
[20:02:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:02:19] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:02:19] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wadWeA
[20:02:19] <ghrust> 13rust/06auto 1447050c4 15Daniel Ralston: FIX: Export to_bytes::ToBytes
[20:02:19] <ghrust> 13rust/06auto 14bfd3cd8 15bors: auto merge of #6217 : Sodel-the-Vociferous/rust/export-ToBytes, r=graydon
[20:02:20] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:02:27] <Diablo-D3> I dont want to make a mistake like that again =/
[20:02:27] <tjc> finding someone who likes Java these days seems about as easy as finding someone in 1980 who was willing to admit they voted for Nixon
[20:02:48] <Diablo-D3> tjc: I wrote a grand total of one program in it
[20:02:50] <Diablo-D3> Im sorry I did.
[20:02:53] <graydon> there are lots of people who like java
[20:02:55] <Diablo-D3> Im now stuck maintaining that goddamned thing.
[20:03:02] <tjc> really?
[20:03:04] <graydon> yup
[20:03:04] <jclements> tjc: aw, c'mon. I feel like I *ought* to like java.
[20:03:13] <EXetoC> heh
[20:03:15] <tjc> jclements: well, I feel like I ought to like celery...
[20:03:26] <Diablo-D3> I want to like java
[20:03:27] <Diablo-D3> I do
[20:03:31] <EXetoC> I might've written hello world in it at one time, but that's as far as I'll go
[20:03:32] <jclements> right: in other words, you wouldn't be ashamed to admit that you like Java.
[20:03:35] <graydon> not that tiobe is any measure, but http://www.infoworld.com/d/application-development/java-retakes-the-lead-in-language-popularity-212558
[20:03:45] <jclements> goddam tiobe...
[20:03:46] <graydon> the IDEs are quite incredible
[20:03:47] <Diablo-D3> for a vm language, its fast, it works well on lots of platforms, it does lots of nifty optimization tricks that other languages dont and should
[20:03:54] <Diablo-D3> and eclipse really isnt that horrible]
[20:04:08] <tjc> lots of people earn a living writing Java code and I guess some of them must like it, but those two things don't necessarily correlate :-)
[20:04:12] <Diablo-D3> (I use vim, thats as close as you'll get to a complement out of me)
[20:04:12] <jclements> I vividly remember the moment when I compared OCaml performance to Java performance.
[20:04:31] <Diablo-D3> I mean, I spent a year buried in Java
[20:04:33] <graydon> and I mean, you have (generally) an incremental compiler and type checker pointing out problems keystroke-by-keystroke...
[20:04:36] <Diablo-D3> I dont want to repeat that experience
[20:04:37] <AutomatedTester> eclipse isnt horrible its abominable  
[20:04:45] <Diablo-D3> seriously, I will quit programming if thats the only alternative
[20:05:08] <tjc> many things have made me wanted to quit programming, but none of them were programming languages
[20:05:10] <tjc> that's just me, though!
[20:05:22] <rroels> I have a stupid question... I was playing with rust-core-foundation, compiled crate, linking works, but I have to use the full paths (core_foundation::array::CFArrayRef)
[20:05:24] <rroels> why can't I do "use core_foundation::array::*" at the beginning of my module? 
[20:05:35] <tjc> rroels: probably because glob imports (with *) don't work very well
[20:05:42] <tjc> if you specifically import the names you want, that should work
[20:06:07] <strcat> graydon: hopefully rustc learns to do that too, like libclang can do
[20:06:26] <graydon> strcat: it will take a lot of re-engineering of it to be able to
[20:06:32] <tjc> hmm, actually, I'm not sure why a * would be a problem here; usually cyclic imports are the reason why it doesn't work but you wouldn't have one with a crate that doesn't depend on your code
[20:06:35] <graydon> but it's possible. never say never.
[20:06:51] <tjc> rroels: anyway, try use core_foundation::array::CFArrayRef; and then see if you can refer to just CFArrayRef
[20:07:01] <rroels> I'll do that, thanks
[20:07:15] <EXetoC> is importing enum types quirky atm? I think I ended up using the full qualifier everywhere because I couldn't import them properly
[20:07:16] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[20:07:36] <tjc> EXetoC: I think right now you can import the type, but not the variants, and importing the type brings the public variants into scope
[20:07:38] <tjc> I *think*
[20:07:57] *** Quits: acrichto (acrichto@moz-FE112B96.res.cmu.edu) (Input/output error)
[20:08:29] <kalenedrael> so what's the appropriate way to have a struct inherit data members of another struct in rust?
[20:08:32] <kalenedrael> or rather, to emulate this
[20:09:01] <strcat> huh, rustc got 20MiB bigger in the last few days
[20:09:19] <tjc> it's been eating its vegetables
[20:09:27] <graydon> oO
[20:09:39] *** Joins: acrichto (acrichto@moz-FE112B96.res.cmu.edu)
[20:09:45] <strcat> Name                          Old Version                 New Version                 Net Change  Download Size
[20:09:47] <strcat> thestinger/rust-incoming-git  release.0.6.760.g08dd625-1  release.0.6.871.g79aeb52-1  12.17 MiB       28.55 MiB
[20:09:52] <EXetoC> tjc: no, just the Type, if anything
[20:09:54] <strcat> and there was another bump 2 days ago
[20:10:14] <EXetoC> so that must be why I didn't bother, because I had to use every variant
[20:10:15] <tjc> EXetoC: hmmm.. pcwalton would know for sure
[20:10:20] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[20:10:37] <tjc> this did work correctly at one point but when he overhauled resolve he had to change it
[20:10:40] <graydon> strcat: those are git repos or binaries?
[20:10:46] <strcat> graydon: the installed binaries
[20:10:47] <pcwalton> you do have to import all the variables.
[20:10:49] <pcwalton> variants.
[20:10:55] <graydon> strcat: that's .. remarkable
[20:11:01] <indutny> should I use sys::size_of to get size of type?
[20:11:01] <graydon> strcat: can you narrow it down some?
[20:11:04] <indutny> or something else?
[20:11:04] <strcat> graydon: yeah
[20:11:18] <strcat> graydon: I'll start by seeing which binary (or binaries)
[20:11:29] <strcat> can bisect after that if it's not obvious
[20:11:36] <Diablo-D3> [04:07:01] <kalenedrael> so what's the appropriate way to have a struct inherit data members of another struct in rust?
[20:11:42] <Diablo-D3> so why cant I do that in rust?
[20:11:53] <graydon> librustc should be about 12mb compiled
[20:12:11] <graydon> (which is ... imo far too big, but that's what it looks like most places currently)
[20:12:26] <strcat> graydon: http://ix.io/5tb I have a whole history of them building up now ;p
[20:12:30] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[20:12:31] <strcat> those are compressed sizes though
[20:12:32] <kalenedrael> I tried something like http://pastebin.mozilla.org/2372144
[20:13:08] *** Joins: gareth0 (gareth0@moz-C1366FA0.dynamic.dsl.as9105.com)
[20:13:30] <EXetoC> pcwalton: ok. that might be an annoyance when said type has many variants
[20:13:42] <pcwalton> it would be hard to fix given reexports.
[20:13:55] <pcwalton> you can use import *
[20:13:56] <graydon> whee
[20:14:03] <kalenedrael> but there are some borrow issues in 'addA', and I have no idea why
[20:15:42] <EXetoC> pcwalton: that brings in everything though. oh well, it's a minor thing
[20:16:58] <brendanc> re OS X 10.8 breakage, would you guys have any use for a 10.8 buildslave? I have a VM sitting around doing fink autobuilds, which could probably host a slave
[20:17:50] <graydon> brendanc: we don't have ... any ability, currently, to host "contributed" VMs.
[20:17:52] <graydon> we should :(
[20:18:00] <brendanc> ok
[20:18:07] <strcat> graydon: http://ix.io/5tf old, http://ix.io/5te new
[20:18:13] <graydon> but the buildbot is hidden away in a VPC and datacenter that's quite walled-off
[20:18:18] <strcat> graydon: spread out across the libs :(
[20:18:22] <strcat> I guess I'll bisect
[20:18:23] <brendanc> I see
[20:18:52] <doener> strcat: I'd guess 69316f06f6554c is involved
[20:19:24] <graydon> that is remarkable
[20:19:28] <doener> strcat: libsyntax has lots of owned strings, and I've seen a bit of bloat with those recently
[20:19:41] <doener> reminds me to submit my StrInterner stuff
[20:20:03] <brendanc> don't remember the slave channel protocol well, but IIRC it's one tcp connection initiated by the slave to a configurable port, so probably not super hard to nat
[20:20:17] <brendanc> but probably not the most pressing of issues :)
[20:20:26] <strcat> tree -sh <3
[20:21:21] *** Joins: bnicholson_ (bnicholson@2557E599.66715431.D25A875A.IP)
[20:21:23] <nmatsakis> does anyone have any ghi troubleshooting tips? I just get "no such issue" all the time
[20:22:46] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:25:01] <brson> rustbot built the wrong commits for my snapshot, twice
[20:25:07] *** Quits: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu) (Client exited)
[20:25:29] <brson> *buildbot
[20:25:35] <strcat> trying 9862cf7 first
[20:27:59] * brson still hasn't tried ghi
[20:28:07] <graydon> nmatsakis: are you running in the workspace?
[20:28:21] *** Quits: catpig (catpig@moz-930C30AC.dip0.t-ipconnect.de) (Quit: Verlassend)
[20:28:32] <graydon> nmatsakis: it figures out which github repo you want to talk to by looking in $CWD for an enclosing git repo
[20:28:51] <graydon> if you don't have one, you have to specify it (with '-- mozilla/rust' at the end of the command-line)
[20:28:53] *** Quits: drguildo (drguildo@E926269B.4D596AA5.EE27BB8D.IP) (Quit: Leaving)
[20:29:37] <nmatsakis> graydon: perhaps I have not given the correct specification
[20:29:41] *** Joins: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu)
[20:29:51] <nmatsakis> graydon: I think I wrote `git@github.com:mozilla/rust.git` or something
[20:30:05] <graydon> ought to work. what command are you running?
[20:30:29] <nmatsakis> graydon: no, mozilla/rust worked though.
[20:30:37] <graydon> huh
[20:31:02] <nmatsakis> graydon: I couldn't find much documentation on what was expected, though now I see it says user/repo, which I guess is exactly what it wanted...
[20:31:16] <strcat> oh.
[20:31:19] <nmatsakis> graydon: ...but I interpreted that as "user or repo", which doesn't make sense now that I think about it
[20:31:22] <strcat> maybe the rand stuff is being inlined now
[20:31:29] <strcat> librustrt actually got smaller
[20:31:34] <graydon> strcat: maybe that too. inlining, inlining...
[20:31:39] * graydon heads to lunch
[20:31:52] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[20:31:59] * nmatsakis finally got the write-guard stuff...*mostly* right? 
[20:32:02] <nmatsakis> now let's see if rustc still builds
[20:32:24] <nmatsakis> many subtle cases. the dynamically sized type proposal would help here I thin...
[20:34:49] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[20:35:11] <strcat> nmatsakis: http://ix.io/5tg those are the test cases I used for implementing a reference counted ptr, could alter them to work for @mut
[20:35:21] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[20:35:43] <nmatsakis> strcat: thanks I'll make sure I covered all those.
[20:36:05] <nmatsakis> strcat: mainly what's tricky is that there are too many paths through trans, partly because &[T] != &T and so forth
[20:36:15] <strcat> ah
[20:37:21] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[20:40:17] * strcat should have the test for restoring freeze state in there too
[20:43:02] <strcat> nmatsakis: http://ix.io/5th I guess you're testing that already since it's one of the ones in the bug report :)
[20:43:55] <strcat> well might as well be written without the clone
[20:44:21] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[20:44:36] *** Joins: bnicholson__ (bnicholson@2557E599.66715431.D25A875A.IP)
[20:45:53] <strcat> nmatsakis: do you know about the soundness problems with destructuring in let bindings? I don't see a bug report
[20:46:02] <strcat> I'll report it anyway
[20:46:17] <strcat> https://github.com/mozilla/rust/issues/3235 *kind of* related since the same things are sound in match
[20:46:28] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:46:31] *** Quits: bnicholson_ (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:46:49] *** Joins: blaphmat (Mibbit@moz-A68E4C5D.cable.virginmedia.com)
[20:46:53] <blaphmat> http://www.fanteamz.com/bloodstock/cc/29/97
[20:47:16] *** pcwalton sets mode: +b *!*@moz-A68E4C5D.cable.virginmedia.com
[20:47:17] *** blaphmat was kicked by pcwalton (pcwalton)
[20:48:04] <nmatsakis> strcat: I am aware that the let code is kind of broken. I have a half-finished patch on the topic,
[20:48:13] <nmatsakis> strcat: last time I dusted it off it ran into some obscure error and I got distracted
[20:48:19] <nmatsakis> strcat: I should go rebase it again and see how far it gets this time :)
[20:48:30] <nmatsakis> strcat: but one thing at a time...
[20:48:46] <strcat> yeah I'll just open a report with the let &a = &a; problem so it doesn't get missed :)
[20:48:54] * tjc also has a half-finished patch on the topic, but it's probably not worth reviving at this point
[20:48:58] <tjc> report all the bugs, though :-)
[20:49:33] <strcat> I end up finding holes while essentially doing my best to look for them (trying to make something compile ;p)
[20:50:46] *** Joins: jclements_ (jclements@2557E599.66715431.D25A875A.IP)
[20:51:05] *** Joins: lkuper (lkuper@893DC7CD.FFCF2A3B.51B6877.IP)
[20:51:42] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[20:52:17] <strcat> maybe we should have an I-soundness tag
[20:52:33] <strcat> different than I-wrong because they can involve backwards incompatibility
[20:53:10] <strcat> well at least with the usual interpretation I have of "I-wrong" ;p
[20:53:30] <strcat> https://github.com/mozilla/rust/issues/6225 anyway there's that one
[20:53:30] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[20:55:09] <acrichto> are public/private modules/exports in crates hashed out well? I'm curious if https://gist.github.com/alexcrichton/5514002 is a bug or intended behavior...
[20:56:02] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[20:56:46] *** Joins: threecreepio (jdp@moz-DB2D70E9.cust.bredbandsbolaget.se)
[20:57:11] *** Joins: dymk (dymk@44EEE21C.A6E21E6E.5E500FC7.IP)
[20:58:02] <dymk> when dealing with the Result type, sometimes there's no error message, you just want to indicate an error happened. Is it idomatic to just have a result type of Result<T, ()> in that case?
[20:58:13] <strcat> dymk: could use Option<T>
[20:58:16] <tjc> dymk: use Option instead
[20:58:19] <tjc> yeah, that :-)
[20:58:26] <dymk> I was going to do that, but it's an option, and not a result
[20:58:41] <dymk> seems like the semantics of it indicate an optional argument, not a function's result, ya know?
[20:58:56] <strcat> dymk: no it's for option types
[20:58:58] <dymk> but yes, the original code was using Option<>
[20:59:00] <strcat> which is often a result
[20:59:03] <dymk> huh, okay
[20:59:05] <indutny> enum CallMeMaybe {}
[20:59:09] <dymk> hah
[20:59:30] *** Quits: jclements_ (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements_)
[20:59:51] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[21:00:59] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[21:01:18] <Luqman> the canary must hate me
[21:02:19] *** Joins: bnicholson_ (bnicholson@2557E599.66715431.D25A875A.IP)
[21:02:59] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Quit: Leaving)
[21:04:08] <strcat> alright doesn't appear to be from inlining the string stuff...
[21:04:44] <strcat> some libs are actually smaller since 9862cf7
[21:05:55] <dymk> as in they compile to smaller binaries, or less API provided? 
[21:06:10] <strcat> smaller binaries
[21:06:12] <doener> interesting, there were only a few other commits between the builds with which I noticed the bloat.
[21:06:49] <strcat> http://ix.io/5tj this is 9862cf7
[21:07:01] <strcat> http://ix.io/5te this is close to the tip of incoming
[21:07:10] <strcat> http://ix.io/5tf and what it used to be 3 days ago
[21:07:34] <strcat> some things got a bit bigger but others got smaller since 9862cf7
[21:07:45] <strcat> anyway going to try somewhere in between ;p
[21:07:50] *** bent|lunch is now known as bent
[21:08:43] <strcat> 08dd625 is pre-bloat
[21:08:59] <strcat> just going to have to use git bisect. nothing stands out
[21:09:16] *** Quits: victorporof (victorporo@F1213546.14EB2DE0.79933D60.IP) (Quit: victorporof)
[21:17:36] *** Joins: froystig (froystig@4AB93A85.352137A1.BCED17D.IP)
[21:18:37] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:21:16] <strcat> graydon: if we use --gc-sections we can save a whole 16 bytes :P
[21:22:30] *** Quits: an0nymous (an0nymous@moz-3ECBAB41.dfri.se) (User has been banned from Mozilla (abuse))
[21:23:10] <brson> incoming has a bunch of i686 valgrind errors relating to the runtime. investigating
[21:24:32] <strcat> brson: btw I had to back out that ld optimization commit because OS X has a weird linker
[21:24:40] <strcat> going to figure it out later
[21:24:52] <strcat> I just removed the commit and sent through the libuv one
[21:25:06] *** Joins: bheylin (brianheyli@29A30C8D.A158DB6D.BEE6354E.IP)
[21:25:19] <pcwalton> 3 modules left to de-mut...
[21:25:35] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[21:26:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:26:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/wadWeA
[21:26:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:26:19] <pcwalton> we really need a working pretty printer. our coding style is all over the place
[21:27:00] <strcat> pcwalton: we should have a style guide with the decisions made in the meantime
[21:27:05] <pcwalton> we do have one
[21:27:08] <strcat> <T: Foo> vs <T:Foo>, etc.
[21:27:23] <pcwalton> for that one I don't know if we've made a decision
[21:27:24] <pcwalton> have we?
[21:27:25] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[21:27:25] *** ChanServ sets mode: +o dherman
[21:27:35] <kalenedrael> so I'm trying to emulate base/derived classes, a la http://pastebin.mozilla.org/2372144
[21:27:35] <strcat> don't think so
[21:27:44] <kalenedrael> but I get this error http://pastebin.mozilla.org/2372822
[21:28:06] *** Quits: giselher (Mibbit@moz-43EFD1D9.adsl.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[21:28:27] <pcwalton> goal for today: make mutable fields parsed but ignored
[21:28:41] <kalenedrael> which I cannot understand, why is a prior loan on a later line
[21:28:49] <strcat> kalenedrael: borrowck works on blocks for now
[21:28:53] <pcwalton> kalenedrael: you have hit the dreaded flow sensitivity bug!
[21:28:53] <strcat> doesn't know about code flow
[21:28:57] <pcwalton> niko is trying to fix that as we speak
[21:29:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:29:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/majk-Q
[21:29:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:29:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:29:09] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/iXayCw
[21:29:09] <ghrust> 13rust/06auto 1413df2ea 15Tim Chevalier: rustc: Handle struct patterns where the expected type is an enum...
[21:29:09] <ghrust> 13rust/06auto 1432b3d3e 15Tim Chevalier: tidy
[21:29:09] <ghrust> 13rust/06auto 14517bfc9 15bors: auto merge of #6200 : catamorphism/rust/issue-5358, r=catamorphism...
[21:29:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:29:13] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[21:29:16] * strcat looks forward to not needing unsafe in the hashmap/trie :)
[21:29:27] <kalenedrael> so I am not completely out of my mind?
[21:29:35] <strcat> find_mut is painful since it's exactly that pattern
[21:30:01] <strcat> kalenedrael: you're not out of your mind :P
[21:30:40] <strcat> easiest workaround is to take one &mut reference and just pass it to two functions doing what you want
[21:30:58] *** Quits: gareth0 (gareth0@moz-C1366FA0.dynamic.dsl.as9105.com) (Ping timeout)
[21:31:01] <kalenedrael> judicious application of {} appears to fix it
[21:31:01] <strcat> unless you can nest one inside the other
[21:31:08] <strcat> kalenedrael: yeah, {} works if one can be nested in the other
[21:31:19] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[21:31:35] <strcat> { take &mut a }; { take &a } will still conflict though
[21:31:43] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:31:47] <kalenedrael> putting {} around 'let mut a = ... ; a.x = x;' works
[21:32:05] <strcat> { take &mut a }; { take &a } will still conflict in some cases* :p
[21:32:19] <strcat> like if you return the reference from the &mut
[21:34:09] <graydon> nmatsakis: mind if the version of the fixed annihilator I land omits the ptr-logging change? they are duplicates with work in the gc
[21:35:23] *** Quits: nejucomo (nejucomo@moz-894F747D.snydernet.net) (Ping timeout)
[21:36:14] <strcat> well that's annoying
[21:36:21] <strcat> a64aa28 is half-bad
[21:36:23] <strcat> ;\
[21:36:56] <strcat> well I did know there were 2 regressions... 
[21:37:02] * strcat calls it bad
[21:37:14] <nmatsakis> graydon: no I don't mind
[21:41:33] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:41:33] *** ChanServ sets mode: +o dherman
[21:42:27] <strcat> graydon: btw we could enforce some of the whitespace stuff with .gitattributes
[21:42:37] <graydon> yeah
[21:42:40] <strcat> like autocrlf which will convert windows line endings to unix ones when people commit
[21:43:25] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[21:43:55] <kalenedrael> 'pthread_create(...) failed in <...>/src/rt/sync/rust_thread.cpp at line 48, result = 22 (Invalid argument)' when I try to run a rust program... is this a known issue at all
[21:44:30] <strcat> or just eol=lf I guess
[21:44:42] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[21:44:52] <strcat> kalenedrael: which platform are you on? freebsd?
[21:44:54] <kalenedrael> it only happens when I link with 'extern mod foo', where foo is a FFI
[21:45:00] <kalenedrael> no, linux
[21:45:12] <kalenedrael> ubuntu 12.10
[21:45:27] <kalenedrael> (a FFI I wrote in rust)
[21:45:44] <kalenedrael> er rather
[21:45:49] <strcat> I don't think it's known
[21:45:51] <graydon> brson: you had a look at the remaining valgrind failures on incoming? look like they might be io/sched related
[21:45:52] <kalenedrael> rust bindings
[21:46:19] *** Quits: lkuper (lkuper@893DC7CD.FFCF2A3B.51B6877.IP) (Ping timeout)
[21:46:56] <kalenedrael> 'value has been optimized out' great
[21:47:21] <strcat> graydon: so we could have '*.rs lf'
[21:47:42] <graydon> strcat: yes. I'm fine with that.
[21:48:02] * strcat thought it had one to find trailing whitespace but can't find it
[21:48:36] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:49:16] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:49:22] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[21:49:25] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[21:49:33] *** Quits: int3_ (int3_@moz-EA3417BC.subnet-248.amherst.edu) (Client exited)
[21:50:09] <brson> graydon: I am looking at them now, yes
[21:50:41] <kalenedrael> well I'll look into it
[21:51:10] <strcat> graydon: and if we had a working pretty printer it looks like you can actually set it up to run automatically on new files
[21:51:12] <strcat> 'Upon checkout, when the smudge command is specified, the command is fed the blob object from its standard input, and its standard output is used to update the worktree file. Similarly, the clean command is used to convert the contents of worktree file upon checkin.'
[21:51:19] <strcat> well, modified files
[21:51:30] <graydon> wow
[21:51:40] <graydon> that would be a .. high bar to hold the pp to!
[21:51:41] <kalenedrael> although I confess I have no knowledge of rust source
[21:51:41] <strcat> people could have it set their preferred indent and go back to the repo indent style on commit
[21:51:47] <strcat> graydon: well Go does that
[21:51:53] <graydon> they use smudge/clean?
[21:52:03] <strcat> graydon: no, but they require everything is gofmt'ed
[21:52:06] <strcat> they use hg ;p
[21:52:13] <graydon> mhm
[21:52:17] <graydon> I would like to get to that position
[21:52:36] <graydon> I'd like to actually take the requisite few weeks to make rustfmt / rustfix and attack all the remaining pp bugs etc.
[21:53:05] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:53:38] <graydon> but y'know, gc :)
[21:56:45] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[21:57:41] *** Joins: boggle (boggle@moz-219C4.dip0.t-ipconnect.de)
[22:00:28] <strcat> meh that bisect was totally inconclusive
[22:00:59] <graydon> finished scanning range: [0x985f1f8, 0x985f1ec) = 4294967284 bytes
[22:01:02] <graydon> hello there bug!
[22:01:08] <strcat> you'd think 20MiB would be easy to track down...
[22:01:11] <strcat> but it's spread out
[22:01:16] <graydon> :(
[22:02:42] <indutny> why comparing enum values is not permitted?
[22:03:03] <strcat> indutny: comparing as in testing for equality?
[22:03:11] <indutny> yes
[22:03:15] <indutny> A == B
[22:03:25] <strcat> because you can make an alternate Eq implementation for any type
[22:03:25] <indutny> binary operation == cannot be applied to type `beam::opcode::Opcode`
[22:03:34] <indutny> ah, so I should create it myself?
[22:03:34] <strcat> you can use #[deriving(Eq)] if you just want it to derive a default
[22:03:48] <indutny> ok, thank you!
[22:03:55] <strcat> there's deriving for Eq/TotalEq/Ord/TotalOrd and some other stuff
[22:04:44] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[22:04:51] <indutny> ok, another question :)
[22:05:08] <indutny> suppose I've a hashmap with ~[~Type] as value
[22:05:08] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[22:05:16] <indutny> how can I insert in that list
[22:05:19] <indutny> after receiving it
[22:05:34] <strcat> indutny: insert in-place?
[22:05:40] <strcat> into the one in the hashmap
[22:05:41] <indutny> aaah
[22:05:46] <indutny> I see it now
[22:05:50] <strcat> there's find_mut
[22:06:17] <indutny> thank you
[22:06:22] <strcat> it's not very pleasant to use because of flow sensitivity though :)
[22:06:32] <strcat> insensitivity* rather
[22:06:59] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[22:11:21] *** Quits: boggle (boggle@moz-219C4.dip0.t-ipconnect.de) (Quit: boggle)
[22:11:22] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[22:12:21] *** Quits: bheylin (brianheyli@29A30C8D.A158DB6D.BEE6354E.IP) (Ping timeout)
[22:12:27] <brson> graydon: the latest incoming build had a very similar valgrind brainfart to the snapshot branch earlier http://buildbot.rust-lang.org/builders/incoming-full-linux/builds/1108/steps/test/logs/stdio
[22:12:33] <brson> and different from the uv errors of the previous build
[22:12:39] <graydon> yeah
[22:13:11] <indutny> strcat: heh
[22:13:20] <indutny> strcat: also I miss insert() that will return mutable value
[22:13:24] <indutny> like
[22:13:26] <indutny> insert_mut()
[22:13:30] <graydon> that's the one I was asking you about :)
[22:13:37] <graydon> not encouraging
[22:14:21] <brson> oh, I'm not investigating that one. i'm looking at this one http://buildbot.rust-lang.org/builders/incoming-full-linux/builds/1107/steps/test/logs/stdio
[22:15:19] <indutny> should I open a pull request for it? :)
[22:15:20] *** Quits: spider-mario (spidermari@moz-EE4B8A09.rev.sfr.net) (Broken pipe)
[22:18:37] <strcat> indutny: yeah, if you want to implement it
[22:18:50] <strcat> find_or_insert/find_mut_or_insert?
[22:18:58] <indutny> yeah that could work
[22:19:08] <indutny> that's exactly what I need, actually
[22:19:18] <indutny> though its sad that I'll see it only in a next version
[22:24:25] <Sodel_the_V> For testing compiler changes, is there any way to compile the compiler without using it to build all of the libraries? It'd be much easier to run small, focused test programs than figuring out why building some of the libraries failed.
[22:24:54] <tjc> Sodel_the_V: What I usually do is run VERBOSE=1 make check so I can see all the command lines...
[22:25:01] <tjc> then I copy/paste just the command that I want, bypassing the Makefile
[22:25:05] <tjc> if I want to build just-the-compiler
[22:25:07] <tjc> it's not ideal, but it works
[22:25:17] <Sodel_the_V> That's a fantastic idea!
[22:25:38] <tjc> if I was a smarter programmer I would add aliases to my .bashrc file for the ones I use commonly, but I haven't yet :-)
[22:26:39] <Sodel_the_V> Heh, yeah. I leave that option unused a bit too frequently.
[22:27:12] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[22:27:51] <kalenedrael> all right I found the issue, the requested stack size of 20480 exceeds the max of 8192
[22:28:38] <brson> kalenedrael: on incoming the max stack size should be much larger
[22:29:18] <brson> you can also use the RUST_MAX_STACK env var
[22:29:18] <pcwalton> brson: how is the snap going?
[22:29:22] <brson> pcwalton: poorly
[22:29:29] *** Joins: Noniagain (noniagain@moz-403930F.cpe.distributel.net)
[22:29:33] <brson> buildbot built the wrong revision a few times
[22:29:35] <pcwalton> ugh
[22:29:42] <pcwalton> our bots are, like, unusable
[22:30:13] <brson> buildbot says there's a build pending on snap-linux but it's not running
[22:30:21] <pcwalton> graydon: ^ are you aware of this?
[22:30:31] <graydon> oO
[22:30:32] <brson> pcwalton: it looks like we've got everything but linux
[22:30:40] <brson> which has been the case all week
[22:30:55] <graydon> checking
[22:31:40] <graydon> grr buildbot
[22:31:52] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[22:32:03] <indutny> sorry for another question, but how can I resolve this:
[22:32:04] <indutny> mismatched types: expected `~[~beam::Opcode]` but found `&mut ~[~beam::Opcode]`
[22:32:09] <indutny> in a correct way
[22:33:01] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:33:15] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: computer sleeping)
[22:33:25] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[22:34:28] <pcwalton> does anyone else dislike the '_' prefix convention needed to silence the unused comment warning?
[22:34:34] <pcwalton> I would prefer 'unused_' or something
[22:34:40] <pcwalton> '_' means "special system-level magic here" in C
[22:34:48] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[22:35:37] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[22:36:22] *** Joins: steven_is_false (quassel@1E3F14AE.29819A33.115CE8E4.IP)
[22:36:42] <Jesse> i've been using the '_' prefix for unused variables in other languages. probably because i'm subconsciously hoping my code will eventually become rust code.
[22:37:00] <pcwalton> it conflicts with things like _exit
[22:37:06] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[22:37:17] <brson> is #[unsafe_destructor] the only way to get around ' cannot implement a destructor on a struct with type parameters'?
[22:37:23] <pcwalton> brson: yup.
[22:37:27] <pcwalton> however
[22:37:31] <pcwalton> niko has a plan to relax that restriction.
[22:37:54] <pcwalton> so marking unsafe for now and then following up later is fine
[22:40:24] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:40:44] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[22:41:06] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:41:06] *** ChanServ sets mode: +o dherman
[22:41:55] <graydon> pcwalton brson: now running
[22:42:02] <pcwalton> graydon: great
[22:42:23] <graydon> sorry. it just .. sigh. it just goes dead.
[22:42:27] <graydon> I do mean to upgrade it.
[22:42:33] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[22:43:30] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[22:43:35] <brson> thanks, graydon
[22:43:38] <indutny> strcat: ok, I realised that I actually didn't need it
[22:44:00] <indutny> strcat: so I probably defer contributing until better times :)
[22:44:24] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[22:45:10] <Jesse> pcwalton: i'd rather not make rust code more verbose just so some poorly named C functions can keep their names
[22:45:13] <pcwalton> check out this fossil https://github.com/mozilla/servo/blob/master/src/servo/net.rs
[22:45:18] <pcwalton> Jesse: *shrug* fine by me
[22:45:25] <pcwalton> I don't think Rust is anywhere near in danger of being *too* verbose
[22:45:30] <Jesse> hehe
[22:45:31] <tjc> heh, classes
[22:45:31] <pcwalton> if anything it's too terse for my taste
[22:45:34] <tjc> it's been a while since I've seen those
[22:45:42] <pcwalton> iface, export, import, class
[22:45:51] <tjc> yes
[22:45:53] <tjc> a blast from the past
[22:46:10] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[22:47:13] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[22:47:28] <indutny> is `iface` an old `trait`?
[22:47:55] <tjc> basically, yeah
[22:48:42] <steven_is_false> for loops don't have the same kind of loop lifetime syntax that other loops do?
[22:50:20] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[22:50:20] <EXetoC> I don't know if there's a difference, really. also, it's just syntactic sugar
[22:51:13] <graydon> \o/ 32bit gc works
[22:51:18] <tjc> yay!
[22:52:00] <graydon> hilariously stupid leftover bug
[22:52:02] <graydon> :(
[22:52:49] *** Quits: philix (philix@moz-451739D3.user.veloxzone.com.br) (Quit: philix)
[22:52:49] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[22:55:48] *** Joins: int3_ (int3_@moz-1692740B.subnet-248.amherst.edu)
[22:58:33] <Jeaye> pcwalton: So is it possible to target that opengl config for 10.6 only?
[22:59:06] <steven_is_false> I have a question, in if error_condition { fail! (~"text") } else { do_program_as_normal () } would the test be optimized to assume that the error won't happen normally?
[22:59:06] <pcwalton> Jeaye: yeah, you can, you just need to use #[cfg(not(target_os="macos")] #[cfg(not(mac_10_6))]
[22:59:12] <pcwalton> that should work
[22:59:15] <pcwalton> two separate cfg directives
[22:59:32] <tjc> steven_is_false: what kind of optimization do you mean?
[23:00:15] <dymk> maybe he's talking about the allocation of ~"text" only on a failure, but not on nonfailure
[23:00:34] <steven_is_false> tjc: I'm not sure exactly. It just seems intuitive to me that failure conditions would be assumed by the compiler to not happen often.
[23:00:40] <brson> I'm going to move the process killing tests out of core because the trigger valgrind errors in the subprocess that are very confusing
[23:01:05] <steven_is_false> Anyways I'll get back on the channel in a bit. I have to deal with something.
[23:01:07] <strcat> steven_is_false: it doesn't mark the branch as cold if it ends in fail
[23:01:10] <strcat> it could
[23:01:11] <tjc> steven_is_false: as far as I know, we don't pass along any information about which branches call fail! or another diverging macro or function to LLVM for branch prediction or anything like that...
[23:01:16] <tjc> it could be done. or, what strcat said
[23:01:17] <Jeaye> Ahh, ok. I'll give it a shot later on.
[23:01:36] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[23:02:52] *** Quits: steven_is_false (quassel@1E3F14AE.29819A33.115CE8E4.IP) (Ping timeout)
[23:03:43] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[23:03:45] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[23:06:46] <strcat> graydon: http://ix.io/5tv finds those whitespace errors btw
[23:06:56] * strcat will fix them along with the gitattributes addition
[23:07:33] <strcat> you could have the buildbot enforce it with a pre-commit hook, it won't by default without --check
[23:08:30] <graydon> I'd be happy to enforce it. why is buildbot involved?
[23:08:40] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:09:03] <strcat> graydon: pre-commit hooks don't get cloned
[23:09:17] <strcat> so we can't force people to use whitespace checking, only give them the right defaults
[23:09:36] <strcat> it actually does check for the wrong line *ending* by default
[23:09:39] <strcat> but not the others
[23:10:25] <strcat> git diff --check checks for the configured whitespace errors
[23:10:37] <strcat> and the sample pre-commit hook has a check
[23:10:49] <strcat> last line in /usr/share/git-core/templates/hooks/pre-commit.sample
[23:11:40] <pcwalton> brson: did your "enforce main at crate root" thing land?
[23:12:08] <graydon> brson: I think there's something wrong with spawn, or run. getting quite a number of Cond failures in valgrind (when I don't suppress all Conds)
[23:12:22] *** Quits: dymk (dymk@44EEE21C.A6E21E6E.5E500FC7.IP) (Ping timeout)
[23:12:23] <brson> pcwalton: no, I need to make some android-related changes
[23:12:28] <pcwalton> ok
[23:12:32] <brson> graydon: I just submitted a related pull request
[23:12:37] <graydon> ooh
[23:12:41] <brson> graydon: there are tests of process killing
[23:12:42] <strcat> graydon: it could also fix them in a pre-commit hook
[23:12:47] <brson> and killing the processes cause memory leaks
[23:12:47] <strcat> there's whitespace=fix
[23:13:00] <strcat> dunno if that would be a good idea.
[23:13:27] <strcat> but I guess one day pretty printing could be applied automatically to .rs files
[23:13:37] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[23:13:39] <brson> more specifically, killing a subprocess makes the subprocess leak memory. valgrind detects those leaks and gets pissed
[23:13:50] <graydon> not just that though, I think
[23:14:07] <brson> oh, what are you seeing?
[23:14:33] <graydon> https://gist.github.com/graydon/6fa390443692ec945fda
[23:14:56] <steven_is_false> strcat: Sorry I had to go away for a bit.
[23:14:57] <graydon> this is with a suppressions file that does not suppress cond everywhere
[23:15:22] <graydon> I could go back to suppressing cond everywhere but .. these have a pattern!
[23:15:32] <brson> oh I see, cond
[23:16:24] <brson> are you sure they aren't that same old problem? the assembly usually all looks the same
[23:17:24] <brson> i'll look at it here
[23:21:10] <steven_is_false> So if lifetimes, and labels are unified then what does break 'static mean?
[23:21:24] <pcwalton> nothing, it's an error
[23:21:59] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Quit: Leaving)
[23:21:59] <graydon> brson: s'ok. I'm just trying to shake out The Final GC Bug again
[23:22:05] <graydon> I got the 32bit bug but that was easy :(
[23:22:13] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:22:25] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[23:22:52] <Jesse> so rust is about to switch @ from refcnt+cc to gc?
[23:23:02] <pcwalton> yes
[23:23:14] <graydon> whenever the damn thing starts working
[23:23:16] <pcwalton> reference count + imaginary cycle collector to GC
[23:23:20] <graydon> hahaha
[23:23:35] <tjc> Yes, Virginia, there is a cycle collector
[23:23:37] *** Joins: azita (Azita@moz-96F659D6.public.wayport.net)
[23:23:52] * graydon pictures cat macro concerning invisible cycle collectors
[23:25:46] <tjc> there sure does need to be a better cat picture folksonomy. couldn't find a good picture for that one.
[23:26:03] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[23:28:33] <Jesse> i'm sure one of these would work. http://knowyourmeme.com/memes/invisible-x
[23:29:48] <Sodel_the_V> "Invisible bike" seems relevant to cycles and such.
[23:29:57] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[23:30:50] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[23:30:50] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[23:31:10] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:32:58] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:33:45] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Input/output error)
[23:33:50] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (Input/output error)
[23:33:58] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[23:38:26] <tjc> I google-image-searched for "cat chasing its own tail" and got pictures of dogs chasing their tails
[23:38:27] <tjc> thanks, google
[23:38:37] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[23:39:51] *** Quits: azita (Azita@moz-96F659D6.public.wayport.net) (Quit: azita)
[23:40:27] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[23:40:36] <Sodel_the_V> http://fc07.deviantart.net/fs27/f/2008/037/9/9/Cat_chasing_her_tail_by_Feyrah.gif
[23:40:46] *** Quits: int3_ (int3_@moz-1692740B.subnet-248.amherst.edu) (Client exited)
[23:41:12] *** Joins: int3_ (int3_@moz-1692740B.subnet-248.amherst.edu)
[23:41:42] <Sodel_the_V> Or, if you want to emphasize that cycle checking is slow: http://www.smopic.com/wp-content/uploads/2012/09/Small-kitten-chasing-its-tail-do-not-know-the-cat-will-dizziness-it.gif
[23:41:44] <tjc> oh, animated cat macros
[23:41:48] <tjc> that's a new generation of cat macros
[23:42:22] <Sodel_the_V> CM: TNG
[23:42:59] <Sodel_the_V> That non-joke might've worked better in a Star Trek channel.
[23:43:05] *** Quits: int3_ (int3_@moz-1692740B.subnet-248.amherst.edu) (Ping timeout)
[23:43:50] <tjc> nah, I got it :-)
[23:43:53] <tjc> just had nothing to add
[23:44:06] *** kimundi is now known as zz_kimundi
[23:45:10] <Sodel_the_V> My computer's turning the room into a sauna. I'm going to flood this channel with cat gifs if I don't turn it off for a while. Until next time!
[23:45:27] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: languishing)
[23:46:54] <EXetoC> no liquid nitrogen?
[23:55:30] *** Joins: dbaupp (Thunderbir@moz-91B99879.lns20.syd6.internode.on.net)
[23:59:38] <brson> graydon: i have to leave early today. I'll continue looking into valgrind errors later
[23:59:57] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
