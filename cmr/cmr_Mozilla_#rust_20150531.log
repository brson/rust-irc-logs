[01:14:56] *** Joins: cmr (cmr@moz-35s2fm.members.linode.com)
[01:14:57] *** ChanServ sets mode: +o cmr
[01:15:03] *** Joins: nstoddard_ (nstoddard@moz-srrb5f.ca.comcast.net)
[01:15:05] <talchas> the only way to actually write such a function is if it's &'static str
[01:15:10] <cmr> Is an OsStr NUL-terminated?
[01:15:18] *** Quits: esclear_ (esclear@moz-71hqke.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:15:21] <o11c> slimsag: for a plain function with no arguments, &str might be &'static str, or it might be some implicit-but-wrapped TLS lifetime
[01:15:24] <SpaceManiac> geri: might want != 0 rather than < 0 in that if condition
[01:15:27] <geri> oh lol
[01:15:30] <geri> dammit :D
[01:15:39] <geri> it works now ^^
[01:15:42] <o11c> slimsag: for a closure, there are more possibilities
[01:15:43] <slimsag> talchas: is it because the function could pass ownership to someone other than the callee ? Is that why we can't just simplify it and say that "the caller owns it" ?
[01:15:50] <geri> SpaceManiac: thanks!! :D
[01:15:56] <o11c> slimsag: that would be ~str
[01:16:00] <talchas> cmr: on linux it's a NUL-terminated string, on windows I think it's UTF-16 or something?
[01:16:01] <o11c> except that that doesn't exist anymore
[01:16:02] *** Quits: nstoddard (nstoddard@moz-a1fj72.jcf6.2eo7.0009.2601.IP) (Ping timeout: 121 seconds)
[01:16:14] *** Joins: mindtree (Mitch@moz-5h22bp.iprimus.net.au)
[01:16:14] *** nstoddard_ is now known as nstoddard
[01:16:21] <SpaceManiac> geri: happy to help
[01:16:26] <geri> SpaceManiac: i wonder if that kind of code is faster in rust compared to C!?
[01:16:38] <geri> i will benchmark it....
[01:16:50] <geri> what do you expect SpaceManiac ?
[01:16:51] <SpaceManiac> slimsag: `String` is the owned string type
[01:16:55] <slimsag> o11c: ~str is now just Box<&str> right? (heap allocated vs stack)?
[01:17:03] <cmr> slimsag: no, ~str is now String
[01:17:21] <slimsag> ah
[01:17:24] <SpaceManiac> Box<str> is sort of but not really a thing
[01:18:01] <cmr> talchas: it appears the answer is no even on unix?
[01:18:13] <cmr> talchas: looking at the source it's just a Vec<u8> wrapper with no other checking.
[01:18:28] <cmr> (or, [u8] as the case may be)
[01:18:49] <slimsag> so then &str is a reference to some stack-allocated string; my question is why does a function like "fn get_str() -> &str;" need an explicit lifetime? why can't the compiler tell that it's returning the string without an explicit lifetime parameter?
[01:19:14] <slimsag> (I'm certain it does need an explicit lifetime, but I just don't understand why yet)
[01:19:24] <cmr> slimsag: &str is not a reference to a stack allocated string, references do not refer to any particular allocation.
[01:19:42] <cmr> It could be a static, read-only string literal. It could be a view into a String (which is heap-allocated).
[01:19:49] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:19:55] <geri> do you expect the rust code to run faster than C ?
[01:19:59] <geri> SpaceManiac: 
[01:20:10] <slimsag> cmr: okay, so not stack-allocated then -- just a pointer to a string?
[01:20:21] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:20:29] *** Quits: mindtree (Mitch@moz-5h22bp.iprimus.net.au) (Ping timeout: 121 seconds)
[01:20:41] <cmr> slimsag: pointer + length, yes.
[01:20:51] <SpaceManiac> geri: don't really know. benchmark!
[01:20:57] <cmr> slimsag: in the case of the literal signature `fn get_str() -> &str;`, there is no lifetime the compiler could really infer.
[01:21:08] <talchas> cmr: yeah, I may have gotten confused what was only part of CStr and what was part of OStr, sorry
[01:21:21] <cmr> talchas: me too ;)
[01:21:42] <geri> SpaceManiac: will do :D
[01:22:02] <cmr> talchas: it seems odd, though, as I expected that since Path coughs up OsStr's, that I'd be able to pass an OsStr to for example open(2) on unix.
[01:22:07] <slimsag> cmr: okay, sorry for pushing it further but my question is "why can't the compiler infer the lifetime?" in what situation would it not be able to?
[01:22:09] *** Quits: Ms2ger (Ms2ger@moz-jig.287.180.91.IP) (Ping timeout: 121 seconds)
[01:22:18] <cmr> slimsag: what lifetime *should* it infer?
[01:22:38] *** Quits: Guest9154 (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[01:22:40] *** Quits: saterus (saterus@moz-rutqj0.res.rr.com) (Connection closed)
[01:23:32] <cmr> slimsag: there is lifetime elision for cases like `fn get_str(&self) -> &str`, which ties the lifetime of the return value to the lifetime of self, but if there are no arguments, elision doesn't have a lifetime to use.
[01:24:08] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[01:24:42] <roido> you would probably not be able to return any references with no arguments, right?
[01:25:16] <cmr> roido: not in safe code, not usually.
[01:25:16] *** Parts: talchas (user@moz-8ubbgk.ca.comcast.net) ("ERC Version 5.3 (IRC client for Emacs)")
[01:25:19] *** Joins: talchas (user@moz-8ubbgk.ca.comcast.net)
[01:25:25] <cmr> roido: but for example a reference to a static value is fine.
[01:25:39] <cmr> (and the lifetime there would be 'static)
[01:25:53] <slimsag> cmr: okay, I think I understand now. It's because &str is _a reference to a string_ but not String _an owned string_ right ? so then `fn get_str() -> String` would not need an explicit lifetime?
[01:26:01] <cmr> slimsag: right.
[01:26:07] <cmr> slimsag: sounds like you've got it :)
[01:26:10] *** Joins: Guest (textual@moz-iq1.jtg.171.183.IP)
[01:26:18] *** Joins: FlyingFoX (quassel@moz-j2ui1r.unity-media.net)
[01:26:21] <slimsag> cmr: Ahhh, I get it now. Thank you so much! sorry for pestering but I just didn't understand :)
[01:26:24] <cmr> Easiest way to think of &str is as a view into a string.
[01:26:28] <cmr> slimsag: np, happy to help.
[01:27:44] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[01:28:00] *** Quits: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net) (Client exited)
[01:29:03] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[01:29:30] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[01:30:47] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:31:19] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:31:58] <roido> cmr: so would `fn get_str() -> &'static str` be acceptable?
[01:32:08] <cmr> roido: yes.
[01:32:19] <roido> good to know, thanks
[01:32:49] <huseby> does anybody have a little time to help me with a newb rust question?
[01:33:05] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[01:33:10] <cmr> huseby: sure, what's up?
[01:33:22] <huseby> I've got a HashMap<String, Vec<String>> and I'm trying to add a string to a Vec if the key already exists
[01:33:35] <huseby> or create a Vec, add my string, and then insert it into the hashmap if it doesn't
[01:33:40] *** Quits: kngl (Adium@moz-rmgnkh.dynamic.voo.be) (Quit: Leaving.)
[01:33:41] <huseby> I started with something like this
[01:34:22] <talchas> map.entry(key).or_insert(vec![]).insert(value) I think
[01:34:23] <huseby> let mut v: Vec<String> = match my_map.get_mut(&key) {
[01:34:31] <huseby>    Some(v) => v,
[01:34:52] <huseby>    None => Vec<String>::new()
[01:34:53] <huseby> }
[01:34:55] <cmr> huseby: You'll want to use the entry method, like talchas suggests.
[01:35:05] <cmr> it's designed for exactly this :)
[01:35:12] <huseby> aha!
[01:35:16] <huseby> I knew there was a shortcut for this
[01:35:18] <huseby> thansk!
[01:35:36] <talchas> huseby: that one won't work because one branch is a reference and the other is a value, but doing insert would also not work due to shortcomings with lifetimes
[01:35:48] *** Joins: mib_mf8f3e (Mibbit@moz-g77l04.ca.comcast.net)
[01:35:49] <huseby> ah, ok
[01:35:58] <huseby> I was trying to do rust too hard :)
[01:36:09] *** Joins: kvsari (kvsari@moz-fgsnv9.bbtec.net)
[01:36:14] <talchas> (my_map is still borrowed in the None case, and it's probably tricky to make the compiler realize it doesn't need to be)
[01:36:23] *** Quits: krig (krig@moz-nf73fa.acc.umu.se) (Ping timeout: 121 seconds)
[01:36:57] <huseby> talchas: well, I was using the match my_map.get_mut() thing to get a mutable reference to a Vec<String>
[01:37:05] <huseby> either the one already in the hash map or a new one
[01:37:10] <huseby> then insert my string
[01:37:12] *** Joins: nstoddard_ (nstoddard@moz-a1fj72.jcf6.2eo7.0009.2601.IP)
[01:37:18] <huseby> then insert the vector back into the hash_map
[01:37:30] <huseby> potentially replacing the existing one if the Some(v) branch was taken
[01:37:42] <huseby> (which I thought was less than ideal)
[01:37:53] *** Quits: mib_mf8f3e (Mibbit@moz-g77l04.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:38:40] *** Quits: geri (Mibbit@moz-v5j9c2.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[01:39:02] *** Quits: nstoddard (nstoddard@moz-srrb5f.ca.comcast.net) (Ping timeout: 121 seconds)
[01:39:08] *** nstoddard_ is now known as nstoddard
[01:39:09] <huseby> talchas: does the map.entry(key) take ownership of the key if the insert branch is takend?
[01:39:15] <huseby> cmr: ^^^
[01:39:34] <talchas> huseby: it takes ownership in all cases
[01:39:46] <huseby> I've noticed lots of examples with map.insert(key_string.clone(), value);
[01:40:13] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[01:40:20] <huseby> the key is a member of struct and I don't want ownership changing
[01:40:20] <o11c> in C++ I hate maps because of all the ownership edge-cases that you really shoudl handle
[01:40:28] <huseby> so I should clone I guess
[01:40:42] *** Quits: Diggsey (diggsey@moz-9s9ol4.dsl.pipex.com) (Ping timeout: 121 seconds)
[01:41:45] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:42:17] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[01:42:24] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:42:27] *** Quits: Guest (textual@moz-iq1.jtg.171.183.IP) (Ping timeout: 121 seconds)
[01:42:33] *** Joins: meandi_1 (meandi_3@moz-kdoj0t.ewe-ip-backbone.de)
[01:42:36] *** Joins: atomic (atomic@moz-89b.tqd.10.176.IP)
[01:44:12] *** Quits: dlc (dlc@moz-ijetde.res.rr.com) (Quit: Leaving)
[01:44:37] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (A TLS packet with unexpected length was received.)
[01:45:19] *** Quits: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:45:28] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:45:51] *** Quits: meandi (meandi_3@moz-b2rjpn.ewe-ip-backbone.de) (Ping timeout: 121 seconds)
[01:46:05] *** Joins: krig (krig@moz-nf73fa.acc.umu.se)
[01:46:19] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[01:46:42] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:47:26] <Moonlightning> playbot: 64_usize * 2
[01:47:28] -playbot- 128
[01:47:43] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[01:48:34] *** Joins: Kxepal (Miranda@moz-fbtdfm.pppoe.mtu-net.ru)
[01:49:23] *** Joins: michael1 (michael@moz-9vjtig.mo.charter.com)
[01:49:27] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[01:50:38] <Moonlightning> playbot: 64_usize * 1.125
[01:50:39] -playbot- <anon>:9:9: 9:25 error: the trait `core::ops::Mul<_>` is not implemented for the type `usize` [E0277]
[01:50:39] -playbot- <anon>:9         64_usize * 1.125
[01:50:39] -playbot- output truncated; full output at: http://bit.ly/1By8wXs
[01:51:00] <o11c> playbot: 64_usize * 1.125f64
[01:51:02] -playbot- <anon>:9:9: 9:28 error: the trait `core::ops::Mul<f64>` is not implemented for the type `usize` [E0277]
[01:51:02] -playbot- <anon>:9         64_usize * 1.125f64
[01:51:02] -playbot- output truncated; full output at: http://bit.ly/1KFfLoT
[01:51:07] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[01:51:12] <Moonlightning> playbot: 64_usize as f64 * 1.125
[01:51:13] -playbot- 72
[01:51:49] <cmr> Moonlightning: you can query playbot instead of spamming the channel.
[01:52:09] <Moonlightning> You can? Okay.
[01:52:11] <Moonlightning> Thanks.
[01:52:43] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:53:22] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:53:27] *** Quits: michael1 (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[01:53:44] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[01:53:50] *** Quits: krig (krig@moz-nf73fa.acc.umu.se) (Ping timeout: 121 seconds)
[01:53:53] *** Quits: GGist (Mibbit@moz-st7v59.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:54:24] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Connection closed)
[01:54:52] *** Quits: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com) (Ping timeout: 121 seconds)
[01:54:53] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:55:11] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (Ping timeout: 121 seconds)
[01:56:45] <Moonlightning> The docs don't have a button to expand|collapse enum variants, either.
[01:56:50] <Moonlightning> Not in the stable /or/ nightly docs.
[01:58:28] <Moonlightning> Is there a better way to do `(foo as f64 * 1.25) as usize` where `foo: usize`?
[01:58:47] <cmr> foo + foo/4?
[01:58:55] <cmr> foo/8
[01:59:03] *** Joins: bleah (Mibbit@moz-p0l.q36.8.24.IP)
[01:59:15] *** Joins: verdagon (verdagon@moz-ff302e.ca.comcast.net)
[01:59:17] <nathan7> cmr: 0.25 = 1/4 in my country
[01:59:33] <bstrie> in the united states, 1/4 = 0.2
[01:59:37] <cmr> Grah, they wrote 1.125 earlier.
[01:59:41] <buhman> wat
[01:59:42] <nathan7> bstrie: government cuts?
[01:59:56] <Mutabah> bstrie: and pi = 3?
[02:00:04] *** Quits: Wild_Cat (Max@moz-2clr66.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[02:00:10] <nathan7> Mutabah: digits are expensive, man
[02:00:15] <nathan7> Mutabah: small government
[02:00:45] <bstrie> conservative government, conservative approximations
[02:00:57] <nathan7> there's no *evidence* it's 3.14, man
[02:01:04] <bstrie> we don't trust mathematicians
[02:01:22] <bstrie> they's scientists, that means they's no-goodniks
[02:01:23] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:01:52] <verdagon> hey fellas, i have a HashSet<MyWrapper<Rc<RefCell<MyNode>>>> because i hate myself, and MyWrapper implements a Deref which returns the contained Ref<MyNode>. but when i do let mynewref: MyWrapper<Rc<RefCell<MyNode>>>> = myhashset.iter().next().unwrap(); it gives me an error saying that the right side is a reference, when we expected a non-reference
[02:02:17] <verdagon> the funny part: when i try to * dereference it, i get that Ref i mentioned
[02:02:20] *** Joins: qwerty_nor (Thunderbird@moz-fe2.cn5.232.50.IP)
[02:02:34] <talchas> verdagon: I believe hashset.iter() gives you a reference to your values
[02:02:34] <huseby> has anybody in here used the nom parser crate much?
[02:02:35] <verdagon> i think it’s because * doesnt mean “dereference”, it means “dereference as much as i can until i cant anymore"
[02:02:46] <verdagon> is there a way to just dereference *once* ?
[02:03:06] <huseby> I'm working on a crate that can connect to a daemon on a socket and talk to it using the text protocol the daemon speaks
[02:03:19] <huseby> I was wondering if there are any best practices around that
[02:03:19] <Moonlightning> verdagon: I thought it meant /dereference until it fits in the type required here/.
[02:03:22] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[02:03:30] <bstrie> verdagon: I don't think * recursively dereferences, just .
[02:03:32] <Moonlightning> Also, I thought that was done automatically.
[02:03:33] <verdagon> oh. huh. that should work then…
[02:03:42] <huseby> nom seems really handy for parsing text streams and they have a stateful consumer
[02:03:44] <Moonlightning> I'm probably wrong, though.
[02:03:47] <Moonlightning> <-- newbie
[02:03:50] <talchas> verdagon: well, MyWrapper<Rc<>> isn't Copy
[02:03:55] <verdagon> oh!
[02:03:57] <verdagon> i made it clone!
[02:04:01] <verdagon> is clone different from copy?
[02:04:06] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:04:09] <bstrie> Clone is Copy++
[02:04:14] <talchas> yes, you have to explicitly call clone()
[02:04:36] <talchas> if you want a copy of the HashSet's value, then yeah, .clone() will go from &T to T
[02:04:45] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:05:00] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[02:05:27] <talchas> (presumably it'll only actual-copy the MyWrapper part, since Rc::clone() just gives you another reference)
[02:06:29] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:06:59] <verdagon> blast, i cant #[derive(Copy)]
[02:07:06] <verdagon> because Rc cant copy
[02:07:21] <verdagon> talchas: .clone() went from &T to &T
[02:07:23] *** Joins: rouma (zack@moz-p8e0re.res.rr.com)
[02:07:28] <verdagon> have no idea why, either
[02:07:56] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[02:07:59] <verdagon> god, graphs are such a nightmare in rust… i cant wait until im done with this part of the code >_>
[02:08:05] <bstrie> verdagon: you can derive Clone
[02:08:08] *** Joins: ktakv (ktakv@moz-2igq4u.1984.is)
[02:08:18] <cmr> verdagon: I recommend using the excellent https://github.com/bluss/petulant-avenger-graphlibrary
[02:08:31] <verdagon> there’s a library for this? O.o
[02:08:35] <verdagon> PRAISE RUST
[02:08:35] <cmr> Of course there is.
[02:08:44] <cmr> Graphs are pretty fundamental after all.
[02:09:06] <bstrie> shove it in the stdlib!
[02:09:16] <bstrie> I'm tired of answering this question! :P
[02:09:20] <FreeFull> verdagon: .clone() on &&T will give &T
[02:10:03] <verdagon> FreeFull: but i thought i didnt have a &&T
[02:10:15] <verdagon> myhashset.iter().next().unwrap().clone()
[02:10:42] <verdagon> if i understand correctly… (which i obviously dont lol) .next() returns an Option<&T>
[02:10:44] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:10:45] <verdagon> unwrap gives a &T
[02:11:27] <Moonlightning> How do I append a bunch of `None`s to a `Vec<Option<Foo>>`?
[02:11:28] <FreeFull> Hmm
[02:11:37] <FreeFull> And the end result ended up being &Rc<T> somehow?
[02:11:52] <Moonlightning> Tried `foo_vec.extend(std::iter::repeat(None).take(n))`, but it complained that `Foo: !Clone`
[02:12:12] <verdagon> yeah
[02:12:32] <verdagon> er wait, no
[02:12:38] <verdagon> a &MyWrapper
[02:13:37] <verdagon> gtg, but im definitely gonna give that graph lib a sho
[02:13:38] <verdagon> t
[02:13:39] <verdagon> thx fellas
[02:13:40] *** Joins: lex (lex@moz-a8fisf.cable.teksavvy.com)
[02:13:41] *** Quits: atomic (atomic@moz-89b.tqd.10.176.IP) (Connection closed)
[02:13:41] *** Quits: verdagon (verdagon@moz-ff302e.ca.comcast.net) (Client exited)
[02:13:52] *** Joins: atomic (atomic@moz-kvs6fc.torservers.net)
[02:13:56] *** Joins: acgtyrant (acgtyrant@moz-d6e.4sk.186.39.IP)
[02:14:51] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:15:05] *** Joins: hjr3 (hradtke@moz-257.lea.79.64.IP)
[02:15:30] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:15:43] *** Quits: bleah (Mibbit@moz-p0l.q36.8.24.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:16:26] <Moonlightning> Also, `foo_vec.append(None)` complains that it expected a `&mut Vec<Option<Foo>>` but found an `Option<_>`? What?
[02:17:00] <cmr> Moonlightning: you want .push, not .append
[02:17:07] *** Joins: mindtree (Mitch@moz-5h22bp.iprimus.net.au)
[02:17:42] <Moonlightning> …duh. Thanks, cmr. Shoulda glanced at the docs again…
[02:18:25] <lex> hi. i am new to rust... trying to add examples to docs, but "cargo test" fails
[02:18:31] <amstrad> hey guys
[02:18:53] <amstrad> lets say i have a struct Foo { bar : Vec<i32> }
[02:18:55] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[02:19:28] <amstrad> and lets assume i have the impl
[02:19:54] <amstrad> impl Foo { fn add(v:&str) { /** add to bar */ }
[02:20:06] <amstrad> then i have...
[02:20:13] <amstrad> let foo = Foo::new();
[02:20:29] <amstrad> foo.add("123"); // compile error, foo is immutable
[02:20:57] *** Quits: qrlpx (smuxi@moz-n7t.3nb.211.95.IP) (Connection closed)
[02:21:05] <amstrad> so, from this standpoint, Rust doesn't provide a means to "hide" that something is mutable "behind the scenes"
[02:21:20] *** Quits: mindtree (Mitch@moz-5h22bp.iprimus.net.au) (Ping timeout: 121 seconds)
[02:21:30] <amstrad> this is typical right?
[02:21:38] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[02:22:08] *** Quits: lex (lex@moz-a8fisf.cable.teksavvy.com) (Connection closed)
[02:22:14] <cmr> amstrad: it does, and it's called "interior mutability", see the Cell/RefCell types.
[02:22:18] <Moonlightning> lex: can you pastebin your code and `cargo` output for us?
[02:22:36] <amstrad> cmr: so, with RefCell, i can hide the internal mutability?
[02:22:43] <cmr> amstrad: yes.
[02:22:51] <amstrad> cmr: ah right, thats interesting
[02:22:51] <Moonlightning> (amstrad: And the block comments with exactly one extra asterisk in the opening token (i.e. `/**`) are doc comments)
[02:22:59] *** Quits: jdub (jdub@moz-agrbt8.internode.on.net) (Ping timeout: 121 seconds)
[02:22:59] <Moonlightning> (Which is probably not what you want there)
[02:23:09] *** Joins: lex (lex@moz-a8fisf.cable.teksavvy.com)
[02:23:12] <amstrad> Moonlightning: it was a quick typo, but yes
[02:23:29] <amstrad> cmr: alright, thanks ill look into it, 
[02:23:59] *** Quits: hjr3 (hradtke@moz-257.lea.79.64.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:24:09] *** Quits: playjax (chatzilla@moz-6ssl7m.optusnet.com.au) (Connection closed)
[02:24:49] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[02:25:21] *** Joins: Morten (Morten@moz-75skp6.bb.online.no)
[02:25:33] <lex> amstrad: did you get a reply?
[02:25:40] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (Ping timeout: 121 seconds)
[02:25:46] <lex> i dont see anything except your question
[02:25:46] *** Quits: turtil (turtil@moz-gfc.es4.23.103.IP) (Quit: WeeChat 1.1.1)
[02:25:49] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:25:55] <cmr> lex: you disconnected.
[02:25:56] <amstrad> lex: i got a reference to something called RefCell
[02:26:11] <lex> ah, ok
[02:26:21] <amstrad> lex: on the topic of "hiding internal mutability"
[02:26:23] <lex> i put an example on pastebin: http://pastebin.com/hBvCSxz8
[02:26:29] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:26:30] <amstrad> lex: oh, thanks
[02:26:42] <lex> oh, no... that was my question :)
[02:26:43] <mfs> Hmm, {:14} style width specifications don't seem to work when the variable is a String. :/
[02:26:53] <Moonlightning> lex, amstrad: Internal mutability is hidden if you have an immutable reference.
[02:27:16] <Moonlightning> Methods that take `&mut self` won't be allowed, either.
[02:28:35] *** lex is now known as lex_1
[02:28:35] <amstrad> Moonlightning: thats the intent tho
[02:29:06] <Moonlightning> So (if I'm right) you don't need a RefCell—just use `let` without the `mut`.
[02:29:26] <amstrad> Moonlightning: but, then i can't modify the internal vec
[02:29:27] <huon> playbot: println!(".{:14}.", "x") // mfs
[02:29:28] -playbot- .x             .
[02:29:28] -playbot- ()
[02:29:34] <Mutabah> Is there any way of having a trait object which works for any associated type. E.g. I have 'Waiter<Output=?>' and want to use a set of them, not caring what the associated type is
[02:29:45] <huon> mfs: do you want right alignment?
[02:29:59] <huon> playbot: println!(".{:>14}.", "x") // mfs
[02:30:00] -playbot- .             x.
[02:30:01] -playbot- ()
[02:30:16] <Moonlightning> amstrad: thought you just said that was what you wanted.
[02:30:22] <huon> Mutabah: only Self can be erased at the moment
[02:30:29] <amstrad> Moonlightning: really, i suppose what im getting at is something along the lines of...
[02:30:35] <amstrad> let foo = Foo::new();
[02:30:39] <Mutabah> huon: Bother
[02:30:42] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Connection closed)
[02:30:50] <amstrad> foo.add(123); // adds 123 to some internal vec
[02:30:57] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[02:31:01] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[02:31:17] <amstrad> Moonlightning: so, from the 'callers' standpoint, they are not thinking in terms of mutability, rather, the think of foo as a container
[02:31:30] <amstrad> and things go in the container...
[02:31:41] <mfs> huon: weird, I must be doing something stupid. Looks a bit further.
[02:31:58] <amstrad> Moonlightning: granted, you can have things like.... let mut v = new vev![] // which is explicitly stating that this vec is mutable
[02:32:13] *** Quits: p32blo (p32blo@moz-305o0v.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[02:32:21] <amstrad> Moonlightning: but, that isn't desirable in some cases
[02:32:47] <amstrad> mostly because you are forcing the caller to know "a bit too much" about the internal workings of Foo
[02:33:08] <lex_1> does anyone have experience with cargo "documentation as example" feature?
[02:33:15] <cmr> lex_1: what problem are you having?
[02:33:28] <lex_1> i spent two hours, but cannot get it to work
[02:33:33] <lex_1> here is an example: http://pastebin.com/hBvCSxz8
[02:34:20] *** Joins: mindtree (Mitch@moz-5h22bp.iprimus.net.au)
[02:34:22] <lex_1> i have treid variety of "crate" and "use" declarations with no luck
[02:34:27] <amstrad> lex_1: wouldn't you just have pub fn new(x: i32) -> Bar ?
[02:34:40] <amstrad> instead of Self?
[02:34:48] <huon> lex_1: use crate_name::foo::Bar;
[02:34:51] *** Joins: rmgk_ (ragnar@moz-f46fbp.dyn.telefonica.de)
[02:35:25] <mfs> Ah, I'm not actually passing a string at all, it's an Ipv4Addr. That's probably why.
[02:35:30] <lex_1> does i need "extern crate" declaration?
[02:35:35] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[02:35:45] <Moonlightning> amstrad: Not really? You'd have to do the same thing with a Vec.
[02:36:07] <amstrad> Moonlightning: but, what about if you wanted to hide things behind a trait
[02:36:11] <Moonlightning> playbot: let foo = vec!["foo"]; foo.push("bar")
[02:36:12] -playbot- <anon>:9:32: 9:35 error: cannot borrow immutable local variable `foo` as mutable
[02:36:13] -playbot- <anon>:9         let foo = vec!["foo"]; foo.push("bar")
[02:36:13] -playbot- output truncated; full output at: http://bit.ly/1RAbW5x
[02:36:25] <amstrad> Moonlightning: sure, but what about if you have...
[02:36:40] <amstrad> let mut foo = FooWithMutations::new();
[02:36:45] <lex_1> huon: works, thank you!
[02:36:46] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:36:47] <amstrad> let mut foo = FooWithOutMutations::new();
[02:37:08] <amstrad> Moonlightning: where both implement the Fooable trait
[02:37:18] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:38:00] <lex_1> oh, i see: if i add "extern crate" declaration then it fails... mystery solved. thanks!
[02:38:07] <amstrad> Moonlightning: in this case, the caller doesn't really care about internal mutations, as they are behind the trait, and are "unknowable"
[02:38:15] *** Quits: rmgk (ragnar@moz-29ua2k.dyn.telefonica.de) (Ping timeout: 121 seconds)
[02:38:39] <amstrad> Moonlightning: so, without hiding internal mutability, you would need to just have everything as mut, "just in case" the thing behind it was mutable.
[02:38:47] *** Quits: darkstalker (wolfie@moz-asf7rd.pw) (Quit: Poof!)
[02:40:05] <amstrad> Moonlightning: kinda make sense?
[02:40:07] *** Joins: akuhlens (Mibbit@moz-66rdta.in.comcast.net)
[02:40:25] *** Quits: akuhlens (Mibbit@moz-66rdta.in.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:40:35] *** Quits: judicare (judicare@moz-ghk0g7.io) (A TLS packet with unexpected length was received.)
[02:40:52] *** Joins: pikajude (pikajude@moz-ghk0g7.io)
[02:41:27] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[02:41:58] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[02:42:07] *** Joins: darkstalker (dstk@moz-asf7rd.pw)
[02:42:10] <Moonlightning> amstrad: Not really. Can you give me a concrete example?
[02:42:31] *** Quits: slimsag (Mibbit@moz-qrnu8n.ph.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:42:42] <amstrad> Moonlightning: well, imagine two implementations of a trait
[02:42:48] <amstrad> where the trait is....
[02:43:04] <amstrad> trait Fooable { fn add(v:i32) }
[02:43:06] *** Quits: durka42 (Adium@moz-qsuual.pa.comcast.net) (Quit: Leaving.)
[02:43:13] <amstrad> Moonlightning: ok?
[02:43:47] <amstrad> and your two implementation are, Foo1 - a implementation without a internal vec, and Foo2 - a implementation with a internal vec;
[02:44:00] <amstrad> so...
[02:44:04] <Moonlightning> But how would you use that with an immutable object? Add what? What could you be adding that wouldn't outwardly change the object?
[02:44:42] <amstrad> Moonlightning: well, for foo1, maybe its doing nothing with v:i32 at all
[02:44:51] <amstrad> with foo2 - its pushing on a vec
[02:44:53] <cmr> Moonlightning: the mistake is that thinking that &T means you have an immutable object. That is not the case - you only have a potentially-aliased value.
[02:44:58] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[02:45:18] <Moonlightning> cmr: doesn't it /have/ to be immutable, in order to comply with the borrowing rules
[02:45:20] <Moonlightning> > *+
[02:45:21] <Moonlightning> ? *
[02:45:24] <cmr> RefCell/Cell let you mutate from behind a &T
[02:45:26] <cmr> No.
[02:45:33] *** Joins: fleabay (Mibbit@moz-8b1ur6.ip.windstream.net)
[02:45:51] *** Joins: parxs (Mibbit@moz-9g6v93.tirol.surfer.at)
[02:46:03] *** Quits: esgeh (sg@moz-a7j.cns.76.134.IP) (Ping timeout: 121 seconds)
[02:46:16] *** Parts: parxs (Mibbit@moz-9g6v93.tirol.surfer.at) ()
[02:47:30] *** Quits: tschottdorf (tobias@moz-d021av.aipg.hajb.2000.2604.IP) (Ping timeout: 121 seconds)
[02:47:44] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:47:54] <Moonlightning> …ohh, okay.
[02:48:07] <Moonlightning> The only thing is that mutable references cannot be aliased.
[02:48:16] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:49:01] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[02:49:49] *** Joins: kimundi_ (kimundi@moz-rb1gq6.dip0.t-ipconnect.de)
[02:49:59] <Moonlightning> So do Cell and RefCell not have any internal state?
[02:50:17] <cmr> RefCell does, but Cell doesn't.
[02:50:25] <cmr> http://static.rust-lang.org/doc/master/src/core/cell.rs.html#273-276
[02:50:27] *** Joins: michael1 (michael@moz-9vjtig.mo.charter.com)
[02:51:23] <Moonlightning> …I mean…you need a mutable `self` reference to mutate your fields, right?
[02:51:42] <cmr> Not if one of the fields of a cell of some sort.
[02:51:52] <Moonlightning> Yeah, beyond that.
[02:52:28] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[02:52:29] *** Joins: zebin (textual@moz-719.2g0.111.114.IP)
[02:52:34] *** Quits: kimundi (kimundi@moz-pu1phi.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:52:34] *** kimundi_ is now known as kimundi
[02:53:03] *** Joins: saterus (saterus@moz-rutqj0.res.rr.com)
[02:54:33] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[02:56:31] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (Ping timeout: 121 seconds)
[02:56:52] <rschulman> I’m trying to build rusqlite (sqlite interface) but it uses pkg-config which doesn’t work on a Mac. Anyone know how to work around it? I know where the lib its looking for is.
[02:57:14] <Moonlightning> What's up with this? https://gist.github.com/BlacklightShining/1190679350c50fe3e2cc
[02:57:23] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[02:57:39] <cmr> rschulman: will need to edit the package's build script to not use pkg-config somehow.
[02:57:45] <Moonlightning> None has no associated value; it's just…None.
[02:57:46] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[02:58:03] <rschulman> Moonlightning: so fork it and do it locally?
[02:58:05] <cmr> Moonlightning: Iterator<Item=T>::take requires T: Clone.
[02:58:17] *** Joins: GGist (Mibbit@moz-st7v59.wa.comcast.net)
[02:58:20] <cmr> Moonlightning: you don't have a "None", you have an Option<Foo>
[02:58:27] *** Quits: michael1 (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[02:58:42] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:58:43] <cmr> And Option<T> is only Clone if T: Clone.
[02:59:03] <Moonlightning> …does the type system infer that it's an Option<Foo> from all the way in there?
[02:59:12] *** Quits: PTStomp (paul@moz-8fla9q.bigpond.net.au) (Ping timeout: 121 seconds)
[02:59:13] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:59:15] *** Joins: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP)
[02:59:18] <cmr> You have it written out right there as the type of Foo.
[02:59:35] <Moonlightning> Not when I mention `None`, I don't.
[02:59:42] <cmr> Iterator<Item=T>::extend takes an I: IntoIterator<Item=T>
[02:59:51] <c74d> rschulman: you could install pkg-config, e.g. with MacPorts.
[02:59:59] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[03:00:15] <cmr> So repeat(None).take(3) must have that type.
[03:00:16] <rschulman> c74d: Yeah, I thought about that, but on a work computer and don’t want to install too much extra stuff
[03:00:19] <rschulman> may try that if needed.
[03:00:33] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[03:00:45] <Moonlightning> cmr: and it concludes that None must be `: Option<Foo>`?
[03:00:56] <cmr> Moonlightning: right.
[03:00:58] <Moonlightning> that that `None` *
[03:01:05] <Moonlightning> Okay.
[03:01:12] <Moonlightning> Well, how do I push a bunch of `None`s?
[03:01:25] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[03:01:34] <cmr> Either with a for loop, or by implementing Clone for Foo
[03:01:37] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[03:01:44] *** Joins: zhoeon (fc@moz-cuhqb2.cable.teksavvy.com)
[03:01:57] <Mutabah> vec.extend( (0..3).map(|_| None) ) also works
[03:02:26] *** Quits: pikajude (pikajude@moz-ghk0g7.io) (A TLS packet with unexpected length was received.)
[03:02:30] <XMPPwocky> i wish there was, like, std::iter::defaults()
[03:02:36] <skeuomorf> Hmm, so is there a way that I can disable the "error: use of unstable library feature" error when building against 1.0-stable?
[03:02:37] *** Joins: pikajude (pikajude@moz-0gljna.n3ik.opad.5300.2607.IP)
[03:02:41] <XMPPwocky> that just returned Default::default() forever, when Clone isn't required
[03:02:44] <cmr> skeuomorf: no.
[03:03:09] <skeuomorf> cmr: Bummer! Thanks.
[03:03:12] <cmr> skeuomorf: You can't use unstable features in the stable release.
[03:03:13] <cmr> Use nightly.
[03:03:24] <cmr> (It's called the *stable* release for a reason, after all)
[03:04:02] *** Joins: jdub (jdub@moz-ib4nsl.internode.on.net)
[03:04:09] *** Joins: acamda (adam@moz-q59un4.iinet.net.au)
[03:04:37] <skeuomorf> cmr: Yeah, you're right. I am using stdlib hash() and the unstability of it won't affect my code. Hence, my question.
[03:04:37] *** Quits: pikajude (pikajude@moz-0gljna.n3ik.opad.5300.2607.IP) (A TLS packet with unexpected length was received.)
[03:04:48] *** Joins: pikajude (pikajude@moz-ghk0g7.io)
[03:04:53] <Mutabah> !stable
[03:04:58] <skeuomorf> cmr: I wanted the crate to be available with the stable release
[03:05:12] <Mutabah> (what's the command to add a factoid? I want to put the stable reasoning on rustbot)
[03:05:23] <Tari> the point of the stable channel is updates won't break your code
[03:05:26] <XMPPwocky> Mutabah: !learn
[03:05:37] * skeuomorf will look for a hashing crate or implement one himself...
[03:05:38] <cmr> skeuomorf: You can use a cargo feature for conditionally enabling using unstable features, if you can avoid using it. 
[03:05:39] <Tari> things that are marked unstable are marked as such because they might go away or change in incompatible ways
[03:05:41] <Moonlightning> Thanks, Mutabah
[03:06:21] *** Quits: rmdashrf (rmdashrf@moz-ecr.kjm.54.128.IP) (Quit: WeeChat 0.4.2)
[03:07:03] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[03:07:12] <Mutabah> !learn stable Code written for the stable branch will never break (until 2.0), this means that unstable features are not allowed. If they were (even requiring a flag) people would start to depend on them, and then complain when compiler updates break their code.
[03:07:12] <rustbot> Invalid format. No description specified.
[03:07:21] <Mutabah> !learn stable = Code written for the stable branch will never break (until 2.0), this means that unstable features are not allowed. If they were (even requiring a flag) people would start to depend on them, and then complain when compiler updates break their code.
[03:07:22] <rustbot> Learned factoid 'stable'.
[03:07:53] <skeuomorf> cmr: Thanks, will look at that as well.
[03:08:30] <Mutabah> cmr: Good description in that factoid?
[03:08:57] *** Joins: starless (starless@moz-u9gmm1.res.rr.com)
[03:09:00] <cmr> Mutabah: looks good to me, though you might include a link to http://blog.rust-lang.org/2014/10/30/Stability.html
[03:09:15] <Mutabah> !learn stable = Code written for the stable branch will never break (until 2.0), this means that unstable features are not allowed. If they were (even requiring a flag) people would start to depend on them, and then complain when compiler updates break their code. http://blog.rust-lang.org/2014/10/30/Stability.html
[03:09:16] <rustbot> Learned factoid 'stable'.
[03:09:21] <cmr> <3
[03:09:43] <Mutabah> There we go, now I don't have to type that reasoning out any more
[03:10:02] *** Quits: saterus (saterus@moz-rutqj0.res.rr.com) (Connection closed)
[03:10:03] <sam113101> !stable
[03:10:03] <rustbot> Code written for the stable branch will never break (until 2.0), this means that unstable features are not allowed. If they were (even requiring a flag) people would start to depend on them, and then complain when compiler updates break their code. http://blog.rust-lang.org/2014/10/30/Stability.html
[03:10:19] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[03:10:21] *** Joins: shachaf (shachaf@moz-evr8ss.members.linode.com)
[03:10:28] <starless> hmm
[03:10:29] *** Joins: plumshark (pat@moz-kfjsbq.tulsok.sbcglobal.net)
[03:10:36] <starless> so, there's no way to use unstable features?
[03:10:42] <Mutabah> starless: Use nightly
[03:10:48] <starless> aye
[03:10:55] <starless> thankfully I haven't /needed/ them yet
[03:11:21] <Quxxy> starless: Lucky you :P
[03:11:33] <Moonlightning> Is there a way to combine `.filter(|foo| foo.is_some()).map(|foo| foo.unwrap())`?
[03:11:41] <Mutabah> Moonlightning: filter_map
[03:11:57] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Quit: Leaving.)
[03:12:00] <Mutabah> Moonlightning: .filter_map(|x| x)
[03:12:01] * Moonlightning blinks.
[03:12:03] *** Quits: Chef (Chef@moz-m1d7of.dsl.teksavvy.com) (Connection closed)
[03:12:06] <Moonlightning> Okay. Thanks. XD
[03:12:22] <starless> Quxxy: haha, yeah. I can feel it coming.
[03:12:31] <starless> Quxxy: still learning the basics of the language, mind you
[03:12:39] <Quxxy> I need nightly to get bloody mtime for files
[03:12:45] *** Quits: zebin (textual@moz-719.2g0.111.114.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:12:52] <starless> sounds painful
[03:12:53] <Quxxy> I don't need it to get the system clock
[03:13:06] <Quxxy> But the two are *from different epochs*
[03:13:12] *** Quits: zyphrus (David@moz-1a4.urk.98.101.IP) (Quit: Bye bye)
[03:13:15] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[03:13:26] <Quxxy> Tried comparing file times to clock times last night to find they were an order of magnitude and several hundred years out
[03:13:28] <Quxxy> Wheeeee
[03:13:42] <Mutabah> Quxxy: You can go via the system APIs...
[03:13:53] <Mutabah> (that said, you need to handle Win32 and POSIX then
[03:14:31] <Quxxy> Mutabah: I already have *one* platform-specific chunk of code.  In spite of my "lol suck it *nix scrubs" attitude, I actually don't like adding platform-specific code :P
[03:14:41] *** Quits: lex_1 (lex@moz-a8fisf.cable.teksavvy.com) (Quit: Konversation terminated!)
[03:15:33] <starless> Lose32
[03:15:35] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:15:55] <Moonlightning> What's the difference between Vec::into_iter() and Vec::drain()?
[03:15:56] <Quxxy> I believe you'll find that it's... *sunglasses* Win
[03:15:59] <Quxxy> *yeeeeah*
[03:16:08] *** Quits: zhoeon (fc@moz-cuhqb2.cable.teksavvy.com) (Quit: leaving)
[03:16:13] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[03:16:14] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[03:16:14] * starless lets Quxxy have that one.
[03:16:15] <Moonlightning> They both consume the Vec and return iterators over all of its elements
[03:16:21] <Mutabah> Moonlightning: One consumes the vec, the other just empties it
[03:16:32] * Quxxy gives starless a nod of acknowledgement
[03:16:35] <Mutabah> Moonlightning: So, for the first, the original Vec is unusable (it's been moved)
[03:16:53] <Mutabah> Moonlightning: For the second, the original Vec is still usable, just empty.
[03:16:59] <Moonlightning> …ohh, okay.
[03:17:14] <Moonlightning> Missed that. Thanks.
[03:18:02] *** Quits: qwerty_nor (Thunderbird@moz-fe2.cn5.232.50.IP) (Ping timeout: 121 seconds)
[03:18:04] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[03:18:10] *** Quits: erz_ (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:19:07] *** Quits: mujou (mujou@moz-rko6lo.ocn.ne.jp) (Quit: Leaving...)
[03:19:28] *** Quits: Guest58 (textual@moz-cdsk1r.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:19:32] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[03:20:37] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[03:20:50] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[03:22:17] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[03:23:01] *** Joins: choplin_ (choplin@moz-qkm9un.ap.nuro.jp)
[03:24:19] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[03:24:19] *** Joins: zebin (textual@moz-719.2g0.111.114.IP)
[03:24:19] *** Quits: amstrad (chatzilla@moz-74sft8.xnet.co.nz) (Connection closed)
[03:24:50] <Moonlightning> Shouldn't Vec::next_permutation() and Vec::prev_permutation() return `Result<()>`s instead of `bool`s?
[03:25:05] *** Quits: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP) (Ping timeout: 121 seconds)
[03:25:10] *** Joins: fengshaun (fengshaun@moz-oagll1.cpe.pppoe.ca)
[03:26:03] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:26:35] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[03:26:38] *** Quits: choplin_ (choplin@moz-qkm9un.ap.nuro.jp) (Connection closed)
[03:27:23] *** Joins: amstrad (chatzilla@moz-74sft8.xnet.co.nz)
[03:27:34] *** Joins: Chef (Chef@moz-o80.fev.52.157.IP)
[03:29:12] <Mutabah> Moonlightning: What would the error be?
[03:29:24] <Mutabah> Moonlightning: (also, it's a slice method, not a Vec one, just fyi)
[03:29:34] *** Joins: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com)
[03:29:41] *** Quits: Jesin (Jesin@moz-8sq.94j.16.107.IP) (Quit: Leaving)
[03:30:14] *** Quits: happy-dude_ (uid62780@moz-jt3517.charlton.irccloud.com) (Quit: )
[03:30:24] <Moonlightning> Mutabah: …umm…ahh…{First,Last}PermutationError?
[03:30:47] *** Joins: keenan (keenan@moz-ub3elr.res.rr.com)
[03:30:51] <Mutabah> And what would cause such an error?
[03:31:02] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[03:31:08] <Moonlightning> If the permutation of the slice is already the first or last one?
[03:31:13] <Moonlightning> i.e. there /is/ no previous or next permutation?
[03:31:17] <Mutabah> Which is what false indicates
[03:31:19] <Moonlightning> I dunno. I feel like returning a `bool` here isn't very Rustic. Am I wrong?
[03:31:27] <Mutabah> Makes a lot of sense really
[03:31:49] <Moonlightning> Rusty *?
[03:31:55] <Mutabah> Rustic
[03:32:02] <Quxxy> I don't think it's not rustic, but it *is* less than entirely ideal
[03:32:19] <Quxxy> Unless a bool is attached to something with a *name* in front of it, it's kinda opaque
[03:32:19] <Moonlightning> I mean…returning `bool` to indicate success or failure?
[03:32:25] <Moonlightning> Isn't that /exactly/ what Result is for?
[03:32:31] <Quxxy> No
[03:32:36] *** Quits: joh (uid13099@moz-2c7ap3.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[03:32:37] <Quxxy> Not quite
[03:32:39] <Quxxy> Sort of
[03:32:49] <Mutabah> Quxxy: Well, the docs say what it means
[03:33:01] <Quxxy> Mutabah: Yeah, and no one *reads* docs
[03:33:05] <Mutabah> Moonlightning: It's more saying "I have nothing to do here"
[03:33:07] <Quxxy> Or, they misremember them :P
[03:33:34] <Mutabah> while slice.next_permutation() { show(slice); }
[03:33:36] <Quxxy> It's not really a failure if there are no more permutations; it's just that there are no more permutations
[03:33:45] <Mutabah> Yeah, hence it shouldn't be Err
[03:33:45] *** Quits: FlyingFoX (quassel@moz-j2ui1r.unity-media.net) (Connection closed)
[03:34:04] <Mutabah> Moonlightning: Result is for when something might fail due to an error (e.g. IO error)
[03:34:09] <Quxxy> A Result would be appropriate if the act of constructing the next permutation could, itself, fail abnormally in some way
[03:34:28] <Quxxy> *Or* if there was useful additional information that could be conveyed *about* the failure
[03:35:04] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[03:35:06] <Quxxy> Really, Option is more appropriate here... except it would be Option<()>... which is, for all indents and porpoises, bool
[03:35:26] *** Joins: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net)
[03:35:49] <sam113101> and now I want a pet porpoise
[03:36:09] <Quxxy> I know; I used that word *sunglasses* on porpoise
[03:36:11] <Quxxy> *yeeeeeeah*
[03:36:43] <sam113101> (⌐■_■)
[03:36:53] *** Quits: ygrek (user@moz-8j9aeu.org.ua) (Ping timeout: 121 seconds)
[03:37:01] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:37:33] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[03:38:22] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[03:38:52] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:42:12] *** Quits: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:43:05] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[03:43:25] *** Joins: graham (starless@moz-u9gmm1.res.rr.com)
[03:43:27] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[03:44:13] *** Quits: graham (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[03:44:23] *** Joins: starless (starless@moz-u9gmm1.res.rr.com)
[03:45:19] *** Quits: yorickpeterse (yorickpeter@moz-kpg9ml.compute.amazonaws.com) (Quit: WeeChat 1.0.1)
[03:45:59] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[03:46:02] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[03:46:14] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Connection closed)
[03:46:27] <rschulman> ld is complaining when I try to include /usr/include/sqlite3.h which definitely exists, saying “library not found for…”
[03:46:46] <rschulman> am I doing something wrong in trying to include it?
[03:48:48] <XMPPwocky> how are you including a C header in Rust
[03:48:49] <Moonlightning> Quxxy: well, yeah, it /is/ an error. You're asking for the next|previous permutation. It is an error if that's not possible.
[03:49:38] <rschulman> XMPPwocky: using Cargo’s build script: “cargo:rustc-link-lib=sqlite3"
[03:50:01] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[03:54:26] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[03:55:15] *** Joins: mukilan (mukilan@moz-agl.8le.164.122.IP)
[03:55:37] <GGist> rschulman: does "cargo:rustc-flags=-l sqlite3" work?
[03:56:03] <rschulman> GGist: let me try
[03:56:55] *** Quits: keenan (keenan@moz-ub3elr.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[03:57:06] <Quxxy> Moonlightning: If you're *asking*, "no" is a perfectly valid answer :P
[03:57:30] <rschulman> I should be able to do a “cargo clean” and then another “cargo build” to see if the changes worked, now?
[03:57:33] <rschulman> no*?
[03:57:44] <GGist> rschulman: yeah
[03:57:50] <FreeFull> Just doing a cargo build should work
[03:58:11] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (Ping timeout: 121 seconds)
[03:58:22] <FreeFull> If not, try with cargo clean
[03:58:24] <GGist> FreeFull: not if it was a problem with a dynamic lib right?
[03:58:37] <rschulman> because its giving me the same error no matter what
[03:58:41] <GGist> err nevermind, thats not build
[03:59:05] *** Joins: bugweiser (Mibbit@moz-614ufp.abhsia.telus.net)
[03:59:17] *** Quits: zebin (textual@moz-719.2g0.111.114.IP) (Ping timeout: 121 seconds)
[03:59:31] <GGist> rschulman: could you show the full script?
[03:59:38] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[04:02:51] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Connection closed)
[04:04:59] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[04:05:00] *** Joins: nstoddard_ (nstoddard@moz-srrb5f.ca.comcast.net)
[04:05:38] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[04:05:54] *** Quits: zeph (zeph@moz-jn4cjt.3nlo.p53a.ffda.2602.IP) (Ping timeout: 121 seconds)
[04:06:02] *** Quits: nstoddard (nstoddard@moz-a1fj72.jcf6.2eo7.0009.2601.IP) (Ping timeout: 121 seconds)
[04:06:05] *** Joins: keenan (keenan@moz-ub3elr.res.rr.com)
[04:06:06] *** Quits: ttuegel (quassel@moz-cvu69k.j78d.i9eq.000d.2601.IP) (Ping timeout: 121 seconds)
[04:06:12] *** nstoddard_ is now known as nstoddard
[04:06:37] *** Joins: ttuegel (quassel@moz-84rqjv.il.comcast.net)
[04:07:03] *** Quits: GGist (Mibbit@moz-st7v59.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:08:06] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[04:08:21] <Moonlightning> Quxxy: okay, but…this is a mutating function that wouldn't otherwise have a return value.
[04:10:16] *** Quits: fleabay (Mibbit@moz-8b1ur6.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:14:45] *** Joins: calatalee (Mibbit@moz-n56rn4.dh.suddenlink.net)
[04:15:53] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[04:16:53] *** Quits: Ralith (ralith@moz-sv9vgp.tukw.qwest.net) (Ping timeout: 121 seconds)
[04:16:54] *** Quits: calatalee (Mibbit@moz-n56rn4.dh.suddenlink.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:16:59] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[04:17:53] *** Quits: fengshaun (fengshaun@moz-oagll1.cpe.pppoe.ca) (Quit: bye bye!)
[04:18:30] *** Joins: jimmy (textual@moz-vld7pl.iinet.net.au)
[04:20:40] *** Joins: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net)
[04:21:00] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[04:22:08] *** Quits: KiChjang (KiChjang@moz-19h7ll.dynamic.uwaterloo.ca) (Quit: WeeChat 1.2)
[04:22:51] *** Quits: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:23:02] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[04:23:06] * wca wonders if there is an equivalent to the which command in Rust, seems like it might be good to have in std::env
[04:25:05] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[04:25:11] *** Joins: weirdjack (Mibbit@moz-st7v59.wa.comcast.net)
[04:25:34] *** Quits: vodik (simon@moz-86ind4.dedicated.allstream.net) (Ping timeout: 121 seconds)
[04:26:04] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (A TLS packet with unexpected length was received.)
[04:26:09] *** Joins: zeph (zeph@moz-jn4cjt.3nlo.p53a.ffda.2602.IP)
[04:26:17] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[04:27:48] <Quxxy> wca: You mean, one that looks up shell commands, or one that looks up Rust symbols? :P
[04:28:03] <wca> shell commands :)
[04:28:12] *** Joins: StevenOnly (steven@moz-cbf.jlg.192.139.IP)
[04:28:20] <Quxxy> I know I end up implementing it in Python all the time
[04:28:47] <wca> well, it's fairly easy to do, since it's just iterating on $PATH to see if any contain an executable by the given name.
[04:29:01] <Mutabah> wca: Yes, but probably not something that belongs in std...
[04:29:18] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[04:29:25] <Quxxy> wca: Incorrect
[04:29:41] <Quxxy> That will, in fact, not work properly
[04:30:01] <Quxxy> (This trips up *everyone* I've ever put this question to)
[04:31:28] *** Joins: SvenA (Mibbit@moz-39k81s.ma.comcast.net)
[04:31:47] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[04:32:21] *** Quits: SvenA (Mibbit@moz-39k81s.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:33:01] *** Quits: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com) (Ping timeout: 121 seconds)
[04:33:19] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[04:33:29] *** Joins: forgottenone (forgottenon@moz-4dj.9fn.45.92.IP)
[04:33:39] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[04:33:49] *** nsm|away is now known as nsm
[04:34:08] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (A TLS packet with unexpected length was received.)
[04:35:20] <forgottenone> what is the complexity of macth? 
[04:35:32] *** Quits: acgtyrant (acgtyrant@moz-d6e.4sk.186.39.IP) (Ping timeout: 121 seconds)
[04:35:36] <wca> Quxxy: why is that incorrect?
[04:35:49] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[04:36:23] <Quxxy> forgottenone: I suspect that depends on the optimiser... it shouldn't be any worse than a C switch, for things that *can* be optimised
[04:36:34] <Quxxy> wca: Sorry, got distracted; because everyone forgets about PATHEXT
[04:36:51] *** Joins: zenon (Mibbit@moz-p0l.q36.8.24.IP)
[04:37:03] <Moonlightning> PATHEXT?
[04:37:14] <forgottenone> Quxxy: so it's not certain but up to compiler.
[04:37:14] *** Joins: wei2912 (wei2912@moz-m8j.moa.156.175.IP)
[04:37:19] * Quxxy returns with a calamari wrap
[04:37:29] <cmr> Quxxy: that's just windows though
[04:37:33] <Quxxy> forgottenone: More specifically, LLVM's optimiser, I believe :)
[04:37:43] <Moonlightning> Is that another variable?
[04:37:44] <forgottenone> Quxxy: i see
[04:37:46] <Quxxy> Moonlightning: It's like PATH, but for executable file extensions
[04:37:49] <Moonlightning> I have no `$PATHEXT` on my system.
[04:37:50] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[04:38:00] *** Joins: vodik (simon@moz-2hv.lpm.107.207.IP)
[04:38:02] <Mutabah> forgottenone: In general - it depends on what types and ranges are being matched
[04:38:10] <Moonlightning> …executable file extensions?
[04:38:11] <Quxxy> On my machine, it's: .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.wlua;.lexe;.PY;.RB;.RBW
[04:38:14] <Moonlightning> Binaries have no extensions.
[04:38:19] <Quxxy> They do on Windows!
[04:38:22] <Moonlightning> Ohh, is that a Windows thing? :p
[04:38:23] <wca> Quxxy: Well, sure, an implementation supporting Windows should honor PATHEXT.
[04:38:26] <Quxxy> And PATHEXT is how CMD deals with that
[04:38:37] <Quxxy> wca: Yes, but no one ever *does*
[04:38:49] <Mutabah> forgottenone: For sparse integers/strings, it might use a chain of comparisons, for compact integers it might use a jump table
[04:38:50] <Moonlightning> I'll file that away.
[04:38:51] <Quxxy> They write it for *nix, and it just doesn't work on Windows
[04:38:54] <Quxxy> So I end up having to write my own
[04:39:05] <wca> Quxxy: sounds to me like an argument to have a std::env::which() and making sure it does :)
[04:39:10] <Moonlightning> …in that special little corner of my memory, /juuuust/ in case I ever am forced to write for Windows.
[04:39:11] <forgottenone> Mutabah: but is it guaranteed to have O(1) when matching simple enums? and what is the case for nested enums?
[04:39:20] <Quxxy> And then I do things like release tools with a tiny, but important, dependency on Windows to spite *nix people /jk
[04:39:22] <Mutabah> forgottenone: No garuntees
[04:39:36] <aatch> forgottenone, it depends on the match
[04:39:59] <forgottenone> Mutabah: Quxxy: aatch: i see,thanks
[04:40:01] *** Joins: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se)
[04:40:07] <Mutabah> Heck, it depends on the surrounding code there too
[04:40:08] <aatch> forgottenone, sometime O(1) isn't actually faster than, for example, O(log(n))
[04:40:21] <Quxxy> Another frustrating thing: programs which *will* run scripts-as-programs as *nix, but *won't* on Windows
[04:40:31] <Mutabah> A jump table is often faster than chained comparisons, but if you're churnining memory already it may not be
[04:40:41] <aatch> forgottenone, as in, a jump table might not be faster than a decision tree.
[04:40:41] <Mutabah> Or if the jumps would be easily predictable
[04:41:15] <aatch> I think that for small switches, jump tables aren't worth the cost.
[04:41:19] <Quxxy> cargo-lite had this problem: if a package listed a shell script for building, even if you ran within MSYS, it wouldn't work on Windows
[04:41:27] *** Quits: bombless (_@moz-1j8.piv.41.59.IP) (Ping timeout: 121 seconds)
[04:41:29] <cmr> Quxxy: oi, cargo-lite was perfect and don't you forget it.
[04:41:40] <cmr> also I'm astonished it worked on windows at all
[04:41:45] <FreeFull> What about makefiles
[04:41:52] <Quxxy> cmr: It was useless and spiteful and we hates we /we hates it/
[04:41:58] <cmr> :P
[04:42:06] <Quxxy> (Actually, it was just nasty people that used shell scripts that were the problem)
[04:42:22] <Quxxy> Makefiles are *the worst*
[04:42:34] <StevenOnly> Hi guys, I am learning rust and made a toy project (port scanner) to learn. http://is.gd/d5dBU1 . This currently work (not in playpen though), but it would be awesome if someone could tell me if I do something incorrectly or not idiomatic with my code.
[04:42:44] <Quxxy> They're like shell scripts, except they *pretend* to, notionally, be cross-platform
[04:42:46] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:42:51] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[04:42:52] <Quxxy> Which is a massive, hateful LIE
[04:42:52] <aatch> forgottenone, LLVM will do some magic things though. I've seen it turn a match that returned a value for each arm into a lookup table.
[04:43:12] <Mutabah> Quxxy: 1. well written ones are cross-platform
[04:43:24] <Mutabah> Quxxy: 2. make gives many more features than shell scripts
[04:43:26] *** Joins: michael1 (michael@moz-9vjtig.mo.charter.com)
[04:43:30] <Quxxy> Mutabah: which they almost never are
[04:43:38] <Mutabah> (paralelisim is the biggest one, followed by dependency handling)
[04:43:49] *** Joins: ray (ray@moz-m0g.t3f.66.59.IP)
[04:43:57] <Moonlightning> Windows…
[04:44:06] <Moonlightning> Windows //intentionally// refused to comply with POSIX.
[04:44:13] *** nsm is now known as nsm|away
[04:44:13] <Moonlightning> Windows can shove it. I'm not gonna bother.
[04:44:17] <Mutabah> StevenOnly: You're allocating two large arrays for no real reason
[04:44:25] <cmr> Moonlightning: that's false, they have a POSIX subsystem.
[04:44:38] <Quxxy> cmr: Had (in practice)
[04:44:48] *** Joins: blueridanus (Mibbit@moz-udu.mvj.20.201.IP)
[04:44:50] <cmr> yeah
[04:44:51] <Quxxy> I don't believe it's being maintained any more
[04:45:09] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[04:45:10] <Quxxy> But Windows was designed to be compatible with DOS, and DOS was designed to be compatible with CP/M, so it's not really surprising it doesn't do POSIX
[04:45:19] <StevenOnly> @Mutabah now you said it, I should have just use a loop with range instead of allocating it into a vector, is this correct?
[04:45:24] <FreeFull> Windows is pretty far from unix
[04:45:29] <Mutabah> Quxxy: *snerk* You know nothing
[04:45:43] *** Joins: JuggleTux (tux@moz-ho0t1f.adslplus.ch)
[04:45:43] <Mutabah> Quxxy: The only thing remaining from those days is the paths
[04:45:48] <Mutabah> StevenOnly: Yes
[04:45:53] <Quxxy> Mutabah: Do tell, I love learning things, though I suspect this is getting into #rust-offtopic territory
[04:46:06] <c74d> “oi, cargo-lite was perfect” — I recall you describing it with rather less complimentary adjectives at the time…
[04:46:08] <Quxxy> Oh!  I wasn't suggesting it *still is*
[04:46:11] <FreeFull> Mutabah: The Win32 API is still around
[04:46:16] <cmr> c74d: That's the joke.
[04:46:20] <Quxxy> Merely pointing out the historical baggage
[04:46:24] <FreeFull> A program that ran in Windows 95 could still run in Windows 10
[04:46:31] <Mutabah> != DOS though
[04:46:44] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[04:46:56] <Quxxy> Oh!  And you still can't name a file "con.*", last I checked
[04:47:01] <Mutabah> (that said, yeah, Win32 was built on Win16, but only in philosophy iirc)
[04:47:06] <XMPPwocky> StevenOnly: i think it's the playpen here
[04:47:06] <aatch> FreeFull, "could" be the operative word here...
[04:47:24] <FreeFull> aatch: Well, depends on if it does some funny business or not
[04:47:30] *** Quits: michael1 (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[04:48:08] <aatch> FreeFull, yeah, I don't envy the compatibility guys at MS.
[04:48:40] <StevenOnly> XMPPwocky: oh yes, I believe playpen do not allows TcpStream::Connect as it might be security issues, but do you find my code problematic in any sense? 
[04:48:47] <aatch> FreeFull, since they have to try and accomodate idiots that reverse-engineer kernel structures simply because the software is popular.
[04:48:54] <Moonlightning> cmr: nnnnoooo, I'm pretty sure it breaks at least HALF of POSIX.
[04:49:18] <XMPPwocky> StevenOnly: it generally seems quite good
[04:49:31] <FreeFull> aatch: Imagine what they had to go through making sure that DOS software could still run under Windows 95
[04:49:46] <cmr> Moonlightning: it's obsolete anyway, removed as of win8.
[04:49:59] <XMPPwocky> StevenOnly: it won't be a very good port scanner, though, because (IIRC) connect will block unless it actually gets a RST or whateve
[04:50:00] <cmr> for the better, IMO.
[04:50:01] *** Quits: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com) (Ping timeout: 121 seconds)
[04:50:21] <FreeFull> Rust itself isn't bound to POSIX, thankfully
[04:50:22] *** Joins: calatalee (Mibbit@moz-q6t.kgr.34.41.IP)
[04:50:26] <aatch> StevenOnly, there's a few small changes, but some of them aren't stable, so...
[04:50:28] <Quxxy> My favourite was the story of a popular game that did a use-after-free, so they had to add a flag to the OS that switched out the memory allocator for that one game
[04:50:28] <Moonlightning> cmr: I think //not// conforming to POSIX is obsolete.
[04:50:41] <Quxxy> Made it defer *actually* freeing memory for a while to cover up the problem
[04:50:47] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[04:50:51] <Moonlightning> It messes up //so many things.//
[04:50:53] *** Quits: calatalee (Mibbit@moz-q6t.kgr.34.41.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:51:00] <XMPPwocky> Quxxy: freeing memory is overrated
[04:51:07] <Moonlightning> *cough* fork() *cough*
[04:51:12] <Quxxy> XMPPwocky: You sound like Walter Bright :P
[04:51:27] <FreeFull> Quxxy: Some software would intentionally allocate all the memory
[04:51:29] <Quxxy> "The D compiler has a wonderful GC called 'malloc but don't free'."
[04:51:35] <aatch> Quxxy, to be fair, the context for that is a compiler that is supposed to run very quickly.
[04:51:36] <StevenOnly> XMPPwocky: thanks, yeah I reckon it won't be that good, it's just a toy project that I use to learn rust :D
[04:51:41] <XMPPwocky> Quxxy: i mean, with a 64-bit address space, you can probably run for a good long tie
[04:51:47] <XMPPwocky> if you have a big HD
[04:51:51] <aatch> Quxxy, it's not that unreasonable.
[04:51:54] <FreeFull> Swapping is horrible
[04:52:05] <FreeFull> It's mega-slow
[04:52:07] <Quxxy> aatch: Oh, I'm not questioning that; I just find it funny given that the general wisdom "oh god no why would you do that are you insane?!"
[04:52:13] <XMPPwocky> Quxxy: well, rustc is generally just a bunch of Rc and arenas
[04:52:16] <aatch> Quxxy, Linus said something similar about his early work on Git
[04:52:18] <XMPPwocky> and, iirc, one Rc<Arena> somewhere
[04:52:24] *** Joins: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de)
[04:52:38] <c74d> ó_o is *that* why his D compiler was always terribly slow for me
[04:52:52] <StevenOnly> aatch: oh, what are the stuff which aren't stable? 
[04:52:56] <aatch> Quxxy, though I don't think it's true any more for Git, given that libgit is a thing
[04:53:00] *** Quits: SpaceManiac (Tad@moz-bd3s4o.dyn.suddenlink.net) (Ping timeout: 121 seconds)
[04:53:03] <aatch> StevenOnly, thread::scoped for one.
[04:53:06] <FreeFull> A GC does simulate a system with infinite memory, where you allocate and never free
[04:53:18] <Quxxy> c74d: dmd was actually pretty fast... it's problems were more codegen bugs and OPTLINK being a sodding great evil pile of spiteful hate
[04:53:20] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[04:53:31] <Moonlightning> cmr: And you can't talk about the POSIX subsystem it USED to have. That only lasted until 2000.
[04:53:45] <StevenOnly> aatch: Thanks, I'll read up on it 
[04:53:46] <Moonlightning> And they dropped support for //XP//, what, a year ago?
[04:53:47] <Quxxy> That and supposedly non-existent order-dependency bugs
[04:53:49] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[04:53:49] <Quxxy> Oh god
[04:53:52] <Quxxy> I'm having flashbacks again
[04:53:52] <FreeFull> Microsoft had Xenix, but that has nothing to do with Windows
[04:54:01] * Quxxy clutches his head
[04:54:28] *** Joins: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt)
[04:54:30] <FreeFull> Quxxy: Shh, no flashbacks, just relaxation
[04:54:33] <Quxxy> I remember the Python build system I had to write that did a partial topological sort of the modules because if it didn't, dmd would *randomly forget types half way through compilation*
[04:54:34] <FreeFull> Just Rust
[04:54:56] <FreeFull> Quxxy: That's quite a bug
[04:55:04] <Quxxy> But it wasn't sorting the *actual* dependencies; it was sorting based on an ordering that had to be discovered by trial-and-error and *hardcoded into the build system*
[04:55:16] <amstrad> Quxxy: do you know about RefCell?
[04:55:17] <XMPPwocky> Quxxy: wha
[04:55:25] * Quxxy cries
[04:55:36] <c74d> Quxxy: I recall it always taking a seemingly inordinate length of time (easily over 15 s, maybe over a minute) to compile a small program for me.
[04:55:39] <amstrad> http://is.gd/hSQKl6 <-- im told i can make this work with RefCell<T>
[04:55:48] <amstrad> such that, i do not need to pass a mut
[04:56:08] *** Joins: playjax (chatzilla@moz-6ssl7m.optusnet.com.au)
[04:56:25] <Quxxy> amstrad: Well, you can make *that* work by changing line 14 to "let mut foo = ..."
[04:56:26] <cmr> amstrad: https://play.rust-lang.org/?gist=8bf5d9cb43a6ef916de0&version=stable
[04:56:34] *** Quits: bugweiser (Mibbit@moz-614ufp.abhsia.telus.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:56:41] <Quxxy> Or what cmr says
[04:56:54] <Quxxy> That's good, too
[04:57:05] *** Joins: rmdashrf (rmdashrf@moz-ecr.kjm.54.128.IP)
[04:57:21] <amstrad> cmr: thanks, but im still not sure i get whats going on here
[04:57:29] *** Quits: OxMLR (OxMLR@moz-19veku.res.rr.com) (Ping timeout: 121 seconds)
[04:57:37] <amstrad> cmr: would the following statement be true....
[04:57:51] <Quxxy> amstrad: RefCell and Cell just tell the compiler to *not* optimise based on its usual assumptions about pointer aliasing
[04:57:52] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (Ping timeout: 121 seconds)
[04:57:59] <Quxxy> (Well, not *just*)
[04:58:19] <Quxxy> The other thing that happens is that RefCell has a mutual exclusion lock; it's basically a single-threaded Mutex
[04:58:22] <amstrad> Rust on its own is too restrictive to allow for this kind of thing, and therefore provides a the RefCell (and other types) containing unsafe to accomidate this sort of thing?
[04:58:30] <amstrad> cmd: the statement
[04:58:31] <amstrad> ^
[04:58:35] <amstrad> *cmr
[04:58:37] <cmr> amstrad: yes.
[04:58:42] *** Quits: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt) (Connection closed)
[04:58:56] <XMPPwocky> well, safe rust is restrictive there
[04:59:00] <amstrad> cmr: right, that puts things in perspective :D
[04:59:04] <Quxxy> Note that the "restrictive"-ness in this case is *by design*
[04:59:06] *** Joins: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt)
[04:59:08] <XMPPwocky> but Rust is expressive enough to allow writing a safe interface over this
[04:59:15] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[04:59:17] *** Parts: plumshark (pat@moz-kfjsbq.tulsok.sbcglobal.net) ()
[04:59:29] *** Joins: ismaelga_ (ismaelga@moz-us2kn8.rev.vodafone.pt)
[04:59:43] *** Quits: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt) (Connection closed)
[04:59:47] *** Quits: ismaelga_ (ismaelga@moz-us2kn8.rev.vodafone.pt) (Connection closed)
[04:59:53] <XMPPwocky> that said, i do occasionally wish &const was a thing (no interior mutability allowed) just for reasoning, but then i think about actually *implementing* that
[04:59:56] *** Joins: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt)
[04:59:58] <amstrad> Quxxy: i dont understand why i need a single threaded mutex
[05:00:16] <cmr> amstrad: it enforces the borrowing-rules at runtime.
[05:00:22] <aatch> amstrad, it's more like a single-threaded RWLock
[05:00:28] *** Quits: c_wraith (c_wraith@moz-946go0.click-network.com) (Quit: Leaving)
[05:00:30] <Mutabah> amstrad: it's to stop multiple pieces of code from accidentally invalidating each other
[05:00:39] *** Joins: aotic (pat@moz-kfjsbq.tulsok.sbcglobal.net)
[05:00:45] <amstrad> im not sure why i would need a single threaded rwlock either
[05:00:46] *** Parts: aotic (pat@moz-kfjsbq.tulsok.sbcglobal.net) ()
[05:00:51] <Mutabah> e.g. holding a borrow into a vec, then pushing to the vec (which resizes it, invalidating the borrow)
[05:00:52] <Quxxy> amstrad: Rust statically guarantees that there is only one mutable pointer to any given piece of storage.
[05:00:59] <amstrad> i guess this extends to multithreaded code right?
[05:01:03] <Quxxy> The optimiser takes advantage of this, as well as code depending on it being true
[05:01:13] <FreeFull> I wish I could have rustc on my android tablet
[05:01:20] <Quxxy> RefCell does two things: first, it tells the optimiser to *not* assume this guarantee holds true
[05:01:21] <FreeFull> Is there a way to make that a reality?
[05:01:23] *** Joins: aotic (pat@moz-kfjsbq.tulsok.sbcglobal.net)
[05:01:26] <XMPPwocky> FreeFull: i tried coding on a tablet
[05:01:28] <XMPPwocky> not a good idea
[05:01:35] <aatch> amstrad, http://manishearth.github.io/blog/2015/05/17/the-problem-with-shared-mutability/
[05:01:37] <Quxxy> Second, it dynamically ensures that only one bit of code is mutating the contents at a time
[05:01:42] <cmr> I have also tried, and can confirm: awful idea.
[05:01:52] <cmr> even with a bluetooth keyboard it's only slightly less worse.
[05:01:57] <starless> XMPPwocky: Can't wait till that's easy
[05:02:12] *** Joins: c_wraith (c_wraith@moz-946go0.click-network.com)
[05:02:23] <amstrad> Quxxy: under the hood tho, but what i mean is, by using the RefCell, it extends safety to multi threaded code right?
[05:02:39] <amstrad> such that i could do a borrow_mut() from different threads
[05:02:43] <Quxxy> I remember putting gcc on my phone... more or less just to screw with people
[05:02:51] <Mutabah> amstrad: refCell isn't Sync, which means that it's single-threaded only
[05:02:54] <cmr> amstrad: no, RefCell is not threadsafe.
[05:02:58] <aatch> amstrad, you can't use a RefCell from multiple threads.
[05:02:59] <Quxxy> ^
[05:03:01] <cmr> amstrad: the corresponding threadsafe type is RWLock<T>
[05:03:08] <aatch> amstrad, you need a Mutex or RWLock for that.
[05:03:33] <Moonlightning> std::io::copy() returns a…`Result<u64>`?
[05:03:51] <amstrad> right, but yeah, still not sure i understand why i need a single threaded rwlock when its single threaded and not going to have multiple things mutating at the same time....
[05:03:56] <FreeFull> XMPPwocky: I won't have anything else for the next 10 days
[05:04:01] <cmr> amstrad: it can, though!
[05:04:03] <Mutabah> Moonlightning: It's a quirk of rustdoc, Result there is ::std::io::Result
[05:04:06] <amstrad> cmr: how tho?
[05:04:09] <cmr> amstrad: just different pieces of the code. Read the blog post aatch  linked.
[05:04:19] <Mutabah> Moonlightning: Which is an alias for std::result::Result<T, std::io::Error>
[05:04:21] <cmr> Not *concurrently*, you're right, but there is still the problem of iterator invalidation etc.
[05:04:21] <amstrad> cmr: yeah, ill have a read through that
[05:04:30] <XMPPwocky> enums
[05:04:44] <amstrad> cmr: oh, you mean changing a enumerable mid way through a iteration
[05:04:49] <Mutabah> Yep
[05:04:59] <Quxxy> amstrad: Imagine you have a RefCell in a struct.  The struct has two methods; a and b.  Both try to mutate the RefCell's contents.  a calls b *while* it holds a mutable reference to the RefCell's interior.  *bam*
[05:05:04] <amstrad> so, RefCell protects from that specifically?
[05:05:13] *** Joins: michael1 (michael@moz-9vjtig.mo.charter.com)
[05:05:15] <cmr> That's one of the things it prevents.
[05:05:24] <cmr> It's a runtime-enforcement of the same borrowing rules that &/&mut already have
[05:05:29] <Moonlightning> Ohhh, okay.
[05:05:52] <amstrad> cmr: its a little confusing, but ill read through, thanks man
[05:06:04] <amstrad> and everyone else, thanks!
[05:06:06] <cmr> amstrad: it is, but you'll get it :)
[05:06:41] <blueridanus> Oh crap — I just tried installing Rust from rustup.sh, and rustc/cargo aren't working, with exit code 127, and spewing some arcane gibberish
[05:06:45] <Moonlightning> Is it just me, or is this error a little confusing? https://gist.github.com/BlacklightShining/da4519a74b7f8b3dc532
[05:06:47] <blueridanus> Can anyone lend a poor soul some help?
[05:06:52] <Mutabah> blueridanus: Mind pasting that arcane gibberish?
[05:06:57] <Moonlightning> (I know it needs to be `<Vec<_>>`)
[05:07:03] <aatch> amstrad, iterator invalidation is the simplest example (I have an iterator that uses pointers into the collection, I push into the collection, causing re-allocation, now my pointers are garbage).
[05:07:06] <blueridanus> Process didn't exit successfully: `rustc -vV` (exit code: 127) --- stderr rustc: symbol lookup error: rustc: undefined symbol: _ZN2rt10lang_start20h176d3d20dd714195OlwE
[05:07:20] <Mutabah> Moonlightning: Dunno, it's pretty accurate
[05:07:28] <Mutabah> that said, would be nice if the <_> was inserted for you...
[05:07:33] <cmr> blueridanus: Sounds like the LD_LIBRARY_PATH is messed up.
[05:07:42] <Moonlightning> Mutabah: Yeah, but it sort of points at 'Vec', and says /expected 1, found 0/ at the same time…
[05:07:43] * Quxxy dreams of HKTs
[05:07:45] <cmr> blueridanus: (or other method of specifying where dynamic libraries are)
[05:07:47] <Mutabah> blueridanus: Agree with cmr, did you have an old version around?
[05:08:02] <Moonlightning> Maybe it should parenthetically suggest `<Vec<_>>`?
[05:08:06] <Mutabah> Moonlightning: It points to the Vec, which takes a type argument
[05:08:10] <blueridanus> I had Rust installed from my distro's repository.
[05:08:12] <Mutabah> You have not passed any
[05:08:16] <blueridanus> To then learn they didn't provide cargo
[05:08:16] <Mutabah> blueridanus: Uninstall that
[05:08:49] <blueridanus> I will go ahead and try, thanks.
[05:08:56] <Moonlightning> Maybe it should say that it's /Vec/ specifically that takes the missing argument?
[05:09:05] <cmr> Moonlightning: it's pointing right at it!
[05:09:14] *** Quits: JuggleTux (tux@moz-ho0t1f.adslplus.ch) (Ping timeout: 121 seconds)
[05:09:28] <zenon> Quxxy: what's all this higher-kinded-types gonna give you?  I keep seeing people talking like it's the second coming
[05:09:39] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[05:09:50] <Moonlightning> Am I the /only/ one here who thinks that pointing at `Vec` and saying /found 0 arguments, expected 1/ is even a /little/ confusing?
[05:09:54] <Moonlightning> Potentially?
[05:09:58] <Mutabah> yep
[05:09:59] <cmr> zenon: let's you give `Vec` itself a type.
[05:10:09] *** Joins: ajhager (aajhager@moz-nup.41a.156.12.IP)
[05:10:10] <cmr> zenon: (instead of just Vec applied to other types)
[05:10:10] <Quxxy> zenon: Currently, `Vec` is not a real thing, but `Vec<T>` is
[05:10:10] <Mutabah> Vec takes  arguments, it's pointing at vec, vec needs the arguments.
[05:10:26] <Quxxy> It's like being able to refer to a function `f` instead of *just* `f(a)`
[05:10:27] <Moonlightning> Okay then.
[05:10:45] <Quxxy> higher-kinded types : types :: higher-order functions : functions
[05:10:53] <zenon> ok, so what's a good application of that?
[05:11:11] <Quxxy> zenon: Rust could finally get a full set of collection traits
[05:11:17] *** Joins: JuggleTux (tux@moz-ho0t1f.adslplus.ch)
[05:11:35] <zenon> Well, lemme tell you what I fear :-)...
[05:11:41] *** Joins: slimsag (Mibbit@moz-qrnu8n.ph.cox.net)
[05:11:41] <Quxxy> You could have `impl Collection for Vec { fn empty<T>() -> Self<T>; }`
[05:11:44] <cmr> zenon: the canonical example is for example: trait Mappable<T> { fn map<U>(x: |T| -> U) -> Self<U> }
[05:11:59] <zenon> I fear you're going to create a fast and safe language that is only usable by people who could write safe code in C++ or fast code in Haskell, lol
[05:12:40] *** Quits: keenan (keenan@moz-ub3elr.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[05:12:43] *** Quits: orangeshark (erik@moz-mj234a.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[05:12:43] <Quxxy> zenon: That's kinda funny; Rust has been, for me, a much better introduction to Haskell concepts than any Haskell tutorial I've ever read
[05:12:51] <slimsag> Do I understand right that RefCell can ensure that no two threads mutate e.g. a shared pointer to a struct at the same time (the compiler enforces locking/unlocking correctly?)
[05:13:02] <cmr> slimsag: no, you don't. RefCell is not threadsafe.
[05:13:03] <Quxxy> slimsag: RefCell is not thread-safe
[05:13:13] <aatch> zenon, Haskell is much more restrictive though. The type system is actually the easier aspect of the language.
[05:13:37] <aatch> zenon, I'd say purity is what trips most people up at first.
[05:13:44] <slimsag> What do the docs mean by "For other types, one must use the RefCell<T> type, acquiring a write lock before mutating." then?
[05:14:02] <Mutabah> slimsag: RecCell is a single-threaded version of RwLok
[05:14:06] <Mutabah> *RwLock
[05:14:24] <Mutabah> t acts in the same way, but doesn't use atomic operations or other synchronisation methods
[05:14:52] <Mutabah> It just increments/decrements a counter, and panics if you attemtp to mutably borrow when already borrowed
[05:15:53] <aatch> zenon, Higher-kinded types are actually pretty explain too. A higher-order function is a function that accepts a function as an argument, if you take a parameterized type (like Vec) and say it's a "type function", taking some input types and producing an output type.
[05:16:03] <Mutabah> slimsag: rustc tells llvm that when a piece of code has a &mut to somewhere, nothing else can access that memory. This allows llvm to defer writes, or even completely omit them if it sees fit
[05:16:30] <Moonlightning> Why can a call to a diverging function be used on the RHS of an assignment?
[05:16:34] <zenon> ok, so looking at the first example:
[05:16:42] <aatch> zenon, then Higher-kinded types are just types that accept "type functions" as "arguments"
[05:16:56] <slimsag> Mutabah: so RefCell is mostly for optimization purposes? (I'm trying to understand it's use-case)
[05:16:58] <Mutabah> Moonlightning: it never returns, so its output type is never needed, so it's valid to use it as anything
[05:16:59] <Quxxy> Moonlightning: If it never returns, it can't possibly fail the assignment... :P
[05:17:03] <aatch> Moonlightning, because we know that control flow will never reach the assignment itself.
[05:17:05] <zenon> why can't I do `impl<T> Collection for Vec<T> { fn empty<T>() -> (here's where I get lost) }
[05:17:10] <Mutabah> slimsag: Not for optimisation. It's to do runtime borrow checking
[05:17:19] <Quxxy> zenon: Because Rust doesn't have HKT
[05:17:35] <Mutabah> slimsag: It allows you to maintain that invariant (&mut never aliases) at runtime.
[05:17:36] <Moonlightning> So why /allow/ it? Are there any usecases?
[05:17:51] <Quxxy> The problem is specifying the return type on the *trait*
[05:17:55] <Mutabah> Moonlightning: Yep. fn a() -> SomeT { panic!("...") }
[05:18:11] <aatch> Moonlightning, it's not a specific decision for that case.
[05:18:16] <Mutabah> Moonlightning: Or more commonly, in matches, panicing in an arm
[05:18:21] <aatch> Moonlightning, it's just a side-effect of the way diverging functions work.
[05:18:30] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:18:33] <aatch> Moonlightning, basically `!` unifies with any type.
[05:18:34] *** Joins: csherrat_ (textual@moz-357qdq.cable.teksavvy.com)
[05:18:36] <Quxxy> Actually, I retract that specific example; you *could* do it (it's just Default::default); the mappable one is better
[05:18:42] *** Quits: jfredett1 (Adium@moz-a9ilmn.fios.verizon.net) (Quit: Leaving.)
[05:18:51] *** Joins: jfredett (Adium@moz-a9ilmn.fios.verizon.net)
[05:18:59] <Moonlightning> Mutabah: is that required to comply with traits?
[05:19:00] <cmr> Can't go wrong with Functor ;)
[05:19:01] <aatch> Moonlightning, so you can't get a type error because T == ! is always true.
[05:19:09] <zenon> ok, now I'll try to understand the Mappable one before it scrolls off the screen
[05:19:27] *** Joins: Douman (Douman@moz-vg292c.dynamic.mts-nn.ru)
[05:19:55] *** Quits: zeebo (zeebo@moz-6rqv1a.ut.comcast.net) (Quit: Lost terminal)
[05:20:11] *** Quits: jfredett (Adium@moz-a9ilmn.fios.verizon.net) (Connection closed)
[05:20:26] <aatch> Moonlightning, it's useful to have a diverging "type" for cases that can't/shouldn't happen. It's pretty much essential for Rust because of the borrow/move system.
[05:21:12] *** Joins: zeebo (zeebo@moz-6rqv1a.ut.comcast.net)
[05:21:14] <aatch> Moonlightning, since diverging functions affect control flow in the caller, they affect the analysis of moves and borrows.
[05:21:25] <XMPPwocky> for example, this is valid: 
[05:21:36] *** Quits: Chef (Chef@moz-o80.fev.52.157.IP) (Quit: Quit)
[05:21:47] <XMPPwocky> rusti: match 42u8 { 0u8...40u8 => String::new(), _ => panic!() }
[05:21:48] -playbot- thread '<main>' panicked at 'explicit panic', <anon>:9
[05:21:48] -playbot- playpen: application terminated with error code 101
[05:21:57] <XMPPwocky> that expression evaluates to a String
[05:21:59] *** Quits: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de) (Connection closed)
[05:22:09] <Moonlightning> aatch: But once a function diverges, nothing matters anymore.
[05:22:20] <XMPPwocky> because panicking is divergent, it can be treated as if it was any type
[05:22:25] <zenon> I see...  Mappable wants to return the type of whatever container is being used, but with a possibly different contained type
[05:22:32] <Moonlightning> Control isn't /anywhere/, anymore.
[05:22:47] *** Joins: davebettin (textual@moz-ip635p.or.comcast.net)
[05:22:52] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[05:22:55] <cmr> Moonlightning: exactly! that's why it's allowable, you need it to typecheck cases where each branch must have the same type but one diverges.
[05:22:57] <XMPPwocky> Moonlightning: the point of divergent types is for when you *don't* diverge.
[05:23:16] *** Quits: c_wraith (c_wraith@moz-946go0.click-network.com) (Ping timeout: 121 seconds)
[05:23:18] <XMPPwocky> one great example of this is .unwrap()
[05:23:32] <XMPPwocky> it couldn't return anything sensible if called on None
[05:23:37] <XMPPwocky> but it doesn't have to, because it panics
[05:24:02] <Moonlightning> It returns T.
[05:24:07] <Moonlightning> Its return type is T *
[05:24:12] <Moonlightning> It will return a T (or diverge)
[05:24:17] <Mutabah> Exactly
[05:24:23] <XMPPwocky> without !, unwrap couldn't be written, or not without weird unsafe hacks (you could return mem::uninitialized() if you had to, but EWW)
[05:24:26] <Moonlightning> But if it diverges, it won't return /anything/
[05:24:38] <cmr> Exactly.
[05:24:42] <Mutabah> Moonlightning: You get the point, so what's the discussion?
[05:24:47] <Moonlightning> …I don't understand!
[05:25:02] *** Quits: ChrisPls (Mibbit@moz-ou1.3i1.67.138.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:25:09] <cmr> If you didn't have ! as a type somehow, you wouldn't be able to type something like unwrap.
[05:25:11] <XMPPwocky> Moonlightning: ! lets you *express* "diverging" in the type system.
[05:25:25] <Moonlightning> cmr: why not? The return type would still just be T.
[05:25:30] <XMPPwocky> because it unifies with everything, type checking can pretend every function always returns
[05:25:48] <aatch> Moonlightning, going back the original statement: "Why can a call to a diverging function be used on the RHS of an assignment?", it's because there's no good reason to explicitly disallow it.
[05:26:16] *** Quits: davebettin (textual@moz-ip635p.or.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:26:18] *** Joins: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net)
[05:26:21] <Moonlightning> Okay, so…why does ! unify with every type?
[05:26:25] *** Joins: davebettin (textual@moz-ip635p.or.comcast.net)
[05:26:28] <cmr> Because it can.
[05:26:41] <Moonlightning> That doesn't seem like a very good reason.
[05:26:50] <cmr> Well, it also has to, for it to be useful...
[05:26:54] <Mutabah> and because it allows conditionals with diverging functions to typecheck
[05:27:00] <aatch> Moonlightning, because that's the point. It simplifies the type system so we don't have to be aware of control flow during type checking.
[05:27:01] <Mutabah> Moonlightning: See the match from earlier
[05:27:31] <cmr> Consider: fn unwrap(x: Option<T>) -> T { match x { Some(val) => val, None => { /* WHAT DO I DO IT MUST HAVE TYPE T */ }
[05:27:55] <Moonlightning> Mutabah: ohhhhhh
[05:28:13] <XMPPwocky> rusti: fn secretely_divergent() { panic!() } match 42u8 { 0u8...40u8 => String::new(), _ => secretly_divergent() }
[05:28:13] -playbot- <anon>:9:94: 9:112 error: unresolved name `secretly_divergent`
[05:28:14] -playbot- <anon>:9         fn secretely_divergent() { panic!() } match 42u8 { 0u8...40u8 => String::new(), _ => secretly_divergent() }
[05:28:14] -playbot- output truncated; full output at: http://bit.ly/1Jb0KuJ
[05:28:16] <XMPPwocky> what
[05:28:19] <XMPPwocky> rusti: fn secretely_divergent() { panic!() } match 42u8 { 0u8...40u8 => String::new(), _ => secretely_divergent() }
[05:28:20] -playbot- <anon>:9:47: 9:117 error: match arms have incompatible types:
[05:28:21] -playbot-  expected `collections::string::String`,
[05:28:21] -playbot- output truncated; full output at: http://bit.ly/1LQAwf8
[05:28:22] <XMPPwocky> spelling is hard
[05:28:47] <XMPPwocky> see how that *doesn't* work, because secretly_divergent, even though it diverges, allegedly returns a ()
[05:28:55] <XMPPwocky> and type checking only goes by function signatures 
[05:29:00] <XMPPwocky> i.e. it stops at function boundaries
[05:29:05] <Moonlightning> Yeah.
[05:29:08] <XMPPwocky> rusti: fn secretely_divergent() -> ! { panic!() } match 42u8 { 0u8...40u8 => String::new(), _ => secretely_divergent() }
[05:29:09] -playbot- thread '<main>' panicked at 'explicit panic', <anon>:9
[05:29:09] -playbot- playpen: application terminated with error code 101
[05:29:15] <Moonlightning> Okay, the matches are what did it for me.
[05:29:52] *** Joins: acgtyrant (acgtyrant@moz-d6e.4sk.186.39.IP)
[05:30:05] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[05:30:27] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[05:30:55] *** Quits: michael1 (michael@moz-9vjtig.mo.charter.com) (Quit: WeeChat 1.1.1)
[05:30:56] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:30:57] <aatch> Moonlightning, a good example is something like: `let x : u32 = y % 4; match x { 0 | 2 => {...}, 1|3 => { ... }, _ => unreachable!() }` *you* know that `x` has to be 0,1,2 or 3, but the compiler doesn't.
[05:31:39] *** Joins: flavius (flavius@moz-u9kqrk.graz.surfer.at)
[05:31:44] <aatch> (I mean, it could figure it out, but that's 1) hard and 2) probably too brittle to be useful, sometimes not having a feature is a feature)
[05:31:47] *** Quits: wei2912 (wei2912@moz-m8j.moa.156.175.IP) (Quit: Lost terminal)
[05:32:27] <zenon> arguably the halting problem might trip up 1) and 2)
[05:32:36] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[05:32:52] <flavius> Hi. How to implement a function which has as parameter something iterable over a given type, without caring what stores the individual elements?
[05:33:01] <aatch> zenon, in the general case, yes, probably.
[05:33:31] <aatch> zenon, some lower-level analyses that LLVM does can figure it out fine in the case I showed there though.
[05:33:43] *** Joins: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de)
[05:33:49] <zenon> heh, it's trying too hard ;-)
[05:34:07] <aatch> flavius, `fn foo<I:IntoIterator<Item=T>>(i: I)`
[05:34:07] <ebfull> flavius: fn test<T, Iter: Iterator<Item=T>>(i: Iter) { ... }
[05:34:14] *** Joins: loyd (loyd@moz-jsb.32f.108.213.IP)
[05:34:16] <ebfull> oooh, intoiterator is more general yes
[05:34:17] <ebfull> :)
[05:34:31] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[05:35:08] *** Quits: Shados (shados@moz-7qnm64.net) (Ping timeout: 121 seconds)
[05:35:09] <aatch> zenon, it's not a specific analysis, it's a combination of ones. It can work out the range of values a type can have, then figure out that some branch will always/never be taken.
[05:36:10] <reem> I’ve discovered something horrible http://is.gd/U6EniZ
[05:36:18] <reem> #[cfg]s on blocks, basically
[05:36:29] <cmr> reem: huon had to *fight* for that feature.
[05:36:47] <aatch> cmr, when did we get that?
[05:36:54] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[05:36:57] <cmr> About a year ago?
[05:37:33] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[05:37:48] <aatch> cmr, hmm, so we can get attributes on match arms!
[05:37:57] <cmr> aatch: right, that's the idea.
[05:38:04] <reem> it’s quite useful
[05:38:09] *** Joins: krig (krig@moz-nf73fa.acc.umu.se)
[05:38:09] <cmr> Matching on platform-specific constants for example
[05:38:25] <reem> or on enum variants present under only certain conditions
[05:38:42] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[05:38:44] <reem> e.g. hyper’s error has an ssl variant if ssl is used, and doesn’t have one otherwise
[05:38:46] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (A TLS packet with unexpected length was received.)
[05:39:34] <aatch> cmr, I might expand my branch-hinting RFC to include `#[likely]` and `#[unlikely]` on match arms then. I didn't think we actually had such a feature.
[05:39:40] *** Joins: santiago (santiago@moz-8th.j2e.167.12.IP)
[05:39:57] *** Quits: csherrat_ (textual@moz-357qdq.cable.teksavvy.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:40:29] <aatch> Well, actually just `#[likely]` actually.
[05:40:30] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[05:40:38] <aatch> actually, actually
[05:40:45] * aatch actually
[05:40:48] *** Quits: andars (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[05:41:25] <huon> aatchually
[05:41:55] <huon> aatch: btw, I saw your message about faster multiplication: very nice!
[05:42:57] <aatch> huon, yep. I also benched `BigInt` from num, depending on the benchmark, Ramp was about 150-250 times faster
[05:43:19] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[05:43:28] *** Joins: Shados (shados@moz-7qnm64.net)
[05:43:34] <aatch> huon, I did find a bug in my division algorithm though, which I'm currently trying to fix.
[05:43:54] *** Quits: blueridanus (Mibbit@moz-udu.mvj.20.201.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:44:50] *** Quits: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca) (Quit: Leaving)
[05:44:51] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[05:45:27] *** Quits: acamda (adam@moz-q59un4.iinet.net.au) (Quit: leaving)
[05:45:31] <huon> aatch: woah, nice
[05:46:30] *** Joins: {AS} (uid45026@moz-gt5061.highgate.irccloud.com)
[05:47:21] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[05:47:45] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[05:48:14] *** Joins: ygrek (user@moz-8j9aeu.org.ua)
[05:49:32] *** Joins: dstrbad (dstrbad@moz-7et536.dsl.iskon.hr)
[05:51:48] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[05:52:22] <aatch> huon, yeah, hopefully I can get this division working, it's been the bane of this project!
[05:53:43] *** Joins: psd (psd@moz-2uiqg7.mtnl.net.in)
[05:55:06] <Moonlightning> aatch: Yeah; XMPPw_cky and c_r posted `match`es, too.
[05:55:09] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[05:55:23] <XMPPwocky> wot
[05:55:24] <Quxxy> aatch: Why?  We should be striving for an environment of togetherness and unity, not of arbitrary division!
[05:55:54] * Quxxy can't seem to find his sunglasses this time
[05:56:05] * Moonlightning lends Quxxy his sunglasses.
[05:56:06] <Quxxy> Wait, no, here they are
[05:56:12] <Quxxy> *Yeeeeeeeeah*
[05:56:28] <Moonlightning> Yo, Quxxy, I heard you like sunglasses!
[05:56:32] * Quxxy has to *literally* find and put his sunglasses on for that to work
[05:56:37] <aatch> Quxxy, sigh...
[05:56:48] <Moonlightning> So I put some sunglasses on your sunglasses, so you can yeahhhhh while you yeahhhhh!
[05:57:11] <Quxxy> You know, I don't think I've even *seen* an episode of that show...
[05:57:18] *** Joins: psd_ (psd@moz-2uiqg7.mtnl.net.in)
[05:57:26] * Quxxy wanders off
[05:57:39] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[05:58:08] *** Quits: psd (psd@moz-2uiqg7.mtnl.net.in) (Ping timeout: 121 seconds)
[05:58:12] <aatch> Unfortunately, integer division is unique in that the result isn't exact. 5*6? Fine. 2+9? Fine. 1/3? Requires an infinite number of decimal digits to represent.
[05:58:30] <Moonlightning> aatch: What you have to point out, though, is that, syntactically, whatever the diverging function returns needs to be able to fit in the type of the overall expression.
[05:58:39] <Moonlightning> Your example doesn't /quite/ do that.
[05:58:42] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[05:59:03] <XMPPwocky> well, that's just a consequence of the integers not being closed under division
[05:59:14] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (Ping timeout: 121 seconds)
[05:59:15] <cmr> XMPPwocky: they are if you do integer division.
[05:59:25] <cmr> if you define your division operator as returning a rational, well that's your fault.
[05:59:30] <bstrie> aatch: multiplication is just repeated addition, so to do division I propose that you merely repeatedly subtract
[05:59:35] <XMPPwocky> well, i suppose
[05:59:50] <aatch> bstrie, congratulations, you just discover Euler division.
[06:00:15] <Mutabah> bstrie: Hint - Long division is faster and about as easy
[06:00:30] *** Joins: Pieter (Mibbit@moz-7bjs3j.ftth.telfortglasvezel.nl)
[06:00:43] <XMPPwocky> Mutabah: if it was faster, wouldn't it be called *short* division? check and mate.
[06:00:51] *** Quits: ajhager (aajhager@moz-nup.41a.156.12.IP) (Ping timeout: 121 seconds)
[06:00:57] <cmr> can't argue with facts.
[06:00:59] <bstrie> I think it would be called fast division, actually
[06:01:06] <aatch> Mutabah, I dispute the "about as easy"... Though I guess it's not actually that hard if you don't care about performance.
[06:01:13] <Moonlightning> There's the /fastest/ route, and then there's the /shortest/ route.
[06:01:27] <Pieter> I can't figure out how to correctly use ?Sized. I want something like AsRef but I'm not sure how to get this http://is.gd/VPqYn1 to compile. I've marked the As... with a ?Sized but the compiler is still complaining about Sized not implemented.
[06:01:51] <Mutabah> aatch: Well, it's not a too complex operation
[06:01:54] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[06:01:57] <XMPPwocky> Pieter: ?Sized does the exact opposite of what you want
[06:02:00] <bstrie> Moonlightning: the shortest route between any two points is to stand perfectly still and wait for tectonic activity to do its thing
[06:02:07] <cmr> Mutabah: It's definltely an integer operation, not a complex operation.
[06:02:10] <XMPPwocky> it removes the default sized bound
[06:02:11] <Mutabah> (that said, it's two loops, one to find the top set bit, and then loop down subtracting f you can)
[06:02:24] <FreeFull> Integer division returns two values
[06:02:30] <Mutabah> cmr: Oww pun damage
[06:03:13] <bstrie> I can't imagine a worse pun
[06:03:20] <FreeFull> Are you sure they aren't Gaussian Integers?
[06:03:21] <aatch> Mutabah, implementing long division is tricky though. Especially when you have extra restrictions from other places, like my lowest-level division function does (nh, nl)/d and requires that nh < d.
[06:04:00] <Mutabah> aatch: Is this a bigint or bigreal library?
[06:04:22] <aatch> Mutabah, this is for integers.
[06:04:26] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[06:04:29] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[06:04:30] <Mutabah> (also, I've only ever done single-word longdiv, wasn't too hard)
[06:04:38] <Mutabah> (Even done it with gates actualyl :D)
[06:04:40] *** Joins: rudolph (rudolph@moz-1q2f87.o3k5.dsq9.010d.2620.IP)
[06:05:01] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[06:05:16] *** Joins: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net)
[06:05:41] *** Quits: mindtree (Mitch@moz-5h22bp.iprimus.net.au) (Ping timeout: 121 seconds)
[06:05:45] <Pieter> XMPPwocky: I was worried about that. Some things I'm still trying to figure out. Any suggestions on how to get something like this to work?
[06:05:51] <XMPPwocky> fn int_division(x: u64, y: u64) -> u64 { let inv_y = 1 / y; x * inv_y }
[06:05:52] <XMPPwocky> easy!
[06:06:05] <XMPPwocky> Pieter: well, what exactly are you trying to do?
[06:06:15] <huon> XMPPwocky: using ^ is faster, e.g. `x * y^-1`
[06:06:45] *** Joins: mindtree (Mitch@moz-5h22bp.iprimus.net.au)
[06:06:46] <Mutabah> aatch: https://github.com/thepowersgang/acess2/blob/master/KernelLand/Kernel/arch/helpers.h - Dunno if this will help or not
[06:06:50] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[06:06:52] <bstrie> burntsushi: damn, this error handling blog post (book?) is impressive
[06:06:54] <zenon> yeah, but it's cleaner if you use integer logarithms and then subtract...
[06:06:58] <XMPPwocky> http://www.xkcdb.com/384
[06:07:02] <Pieter> I have three structs that can all be used in a similar way (resolve into a *const T). I want to allow the value itself to be passed and not have to call the method (as_ptr()) every time.
[06:07:21] <Pieter> Same as AsRef.
[06:07:44] <XMPPwocky> oh
[06:08:18] <Pieter> The problem is that there is a generic type, right?
[06:08:49] <flavius> aatch, ebfull: thanks but I have a problem: https://gist.github.com/flavius/3decd04e4675fe8a6fa7 the last test shows how I'd need the client code to look like, but it gives a type mismatch: "expected &-ptr, found struct `hypergraph::Graph`"
[06:09:04] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[06:09:24] <XMPPwocky> Pieter: http://is.gd/wf7uFe
[06:09:32] <XMPPwocky> your problem is that you used a trait object accidentally
[06:09:40] <XMPPwocky> instead of a generic
[06:09:58] *** Quits: dstrbad (dstrbad@moz-7et536.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[06:10:03] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:10:12] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[06:10:28] <Pieter> XMPPwocky: :). Thanks.
[06:10:32] <XMPPwocky> np
[06:11:40] *** Quits: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de) (Connection closed)
[06:11:44] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[06:12:01] *** Quits: psd_ (psd@moz-2uiqg7.mtnl.net.in) (Ping timeout: 121 seconds)
[06:12:05] *** Quits: StevenOnly (steven@moz-cbf.jlg.192.139.IP) (Quit: Leaving.)
[06:12:19] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[06:12:34] *** Joins: psd_ (psd@moz-2uiqg7.mtnl.net.in)
[06:16:08] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[06:17:33] *** Joins: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net)
[06:20:19] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[06:20:33] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[06:23:24] *** Joins: avikpal (avikpal@moz-0e5.hfh.194.117.IP)
[06:24:10] *** Joins: Eonil (Eonil@moz-sqb.a6u.153.218.IP)
[06:24:35] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[06:24:50] *** Quits: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se) (Client exited)
[06:25:43] <zenon> a while back, someone said that "sugaring" for `container[i, j]`  =>  `container[(i, j)]`  (basically turning multiple subscripts into a tuple for Index) was on the horizon.  Where would I look for discussion on that?
[06:26:53] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Quit: Leaving)
[06:27:06] *** Joins: choplin (choplin@moz-qkm9un.ap.nuro.jp)
[06:27:08] *** Quits: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP) (Ping timeout: 121 seconds)
[06:29:23] *** Quits: avikpal (avikpal@moz-0e5.hfh.194.117.IP) (Ping timeout: 121 seconds)
[06:30:56] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[06:31:08] *** Quits: choplin (choplin@moz-qkm9un.ap.nuro.jp) (Ping timeout: 121 seconds)
[06:31:18] *** Quits: Guest58 (textual@moz-70hlaj.austtx.sbcglobal.net) (Quit: )
[06:32:01] *** Quits: psy (psy@moz-gmc.hr7.224.43.IP) (Ping timeout: 121 seconds)
[06:32:02] *** Quits: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net) (Ping timeout: 121 seconds)
[06:32:14] *** Joins: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net)
[06:32:40] *** Joins: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com)
[06:33:03] <bstrie> zenon: I don't know of any such discussion about that
[06:33:45] *** Quits: rudolph (rudolph@moz-1q2f87.o3k5.dsq9.010d.2620.IP) (Ping timeout: 121 seconds)
[06:34:40] *** Quits: slimsag (Mibbit@moz-qrnu8n.ph.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:34:43] *** Joins: zxq9 (ceverett@moz-c1f1em.asahi-net.or.jp)
[06:34:48] <zenon> bstrie: I found RFC 439, but it doesn't look like it's about the tuple syntax-sugar
[06:35:04] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[06:35:15] *** Joins: thesunnyk (quassel@moz-it3s0e.com)
[06:35:19] *** Quits: zyga (zyga@moz-84t.g3u.7.89.IP) (Ping timeout: 121 seconds)
[06:35:33] *** Joins: starless (starless@moz-u9gmm1.res.rr.com)
[06:36:36] *** Quits: amstrad (chatzilla@moz-74sft8.xnet.co.nz) (Connection closed)
[06:37:25] *** Joins: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de)
[06:38:04] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[06:38:11] *** Quits: kvsari (kvsari@moz-fgsnv9.bbtec.net) (Ping timeout: 121 seconds)
[06:39:16] *** Joins: rudolph (rudolph@moz-1q2f87.o3k5.dsq9.010d.2620.IP)
[06:39:51] *** Joins: rudolph_ (rudolph@moz-q5b.rfa.152.37.IP)
[06:39:52] *** Quits: rudolph (rudolph@moz-1q2f87.o3k5.dsq9.010d.2620.IP) (Connection closed)
[06:40:14] *** Joins: kvsari (kvsari@moz-fgsnv9.bbtec.net)
[06:40:38] *** Joins: esgeh (sg@moz-0kil93.dyn.telefonica.de)
[06:41:07] *** Quits: Azdle (Azdle@moz-fv6arh.mn.comcast.net) (Ping timeout: 121 seconds)
[06:41:10] *** Joins: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se)
[06:41:48] *** Joins: zyga (zyga@moz-84t.g3u.7.89.IP)
[06:42:23] *** Joins: aravindavk (aravinda@moz-2ng.786.171.122.IP)
[06:44:41] <aotic> is it a good idea to use `&self` as the first parameter to struct functions unless `self` is needed?
[06:44:59] *** Joins: zyphrus (David@moz-1a4.urk.98.101.IP)
[06:45:19] <aotic> I can't think of any disadvantages unless you need ownership of self
[06:45:38] <cmr> aotic: sometimes you really want to use &mut self
[06:45:40] *** Quits: lutter2 (lutter@moz-7v7ueu.PUBLIC.monkeybrains.net) (Quit: Leaving.)
[06:46:14] <aotic> er wait, nvm, that makes sense. thanks.
[06:48:29] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[06:49:25] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[06:49:26] *** Joins: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP)
[06:50:41] *** Joins: sasha (sasha@moz-1uu9ia.net.t-com.hr)
[06:51:07] *** Quits: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net) (Connection closed)
[06:51:22] *** Joins: avikpal (avikpal@moz-l1t.9fs.194.117.IP)
[06:52:01] <Pieter> Is it possible to include an associated type in an inherited trait? I have a trait that inherits from Deref and if i use it, I get "the value of the associated type must be specified". See http://is.gd/PW0dGB for an example.
[06:52:16] *** Quits: thesunnyk (quassel@moz-it3s0e.com) (Connection closed)
[06:52:19] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[06:52:25] *** Joins: thesunnyk (quassel@moz-it3s0e.com)
[06:52:31] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[06:53:21] *** Joins: Jesin (Jesin@moz-8sq.94j.16.107.IP)
[06:53:35] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[06:54:33] *** Joins: wipeD (wipeD@moz-j5kot3.dip0.t-ipconnect.de)
[06:55:43] *** Quits: avikpal (avikpal@moz-l1t.9fs.194.117.IP) (Ping timeout: 121 seconds)
[06:56:01] *** Joins: p1start (p1start@moz-nftjhe.org)
[06:56:19] *** Quits: thesunnyk (quassel@moz-it3s0e.com) (Connection closed)
[06:56:24] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[06:56:27] *** Joins: thesunnyk (quassel@moz-it3s0e.com)
[06:56:49] *** Quits: zenon (Mibbit@moz-p0l.q36.8.24.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:57:11] *** Joins: jnvsor (j@moz-1o1jrn.dynamic.ziggo.nl)
[06:57:35] *** Quits: thesunnyk (quassel@moz-it3s0e.com) (Connection closed)
[06:57:43] *** Joins: thesunnyk (quassel@moz-it3s0e.com)
[06:59:10] *** Quits: davebettin (textual@moz-ip635p.or.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:01:30] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (Ping timeout: 121 seconds)
[07:01:39] <Hukka> Is it possible to have a struct which does not contain anything growable (a vec) but the size is still not known at compile time? For handling data that will be the same size through the execution of the program but can be different depending on the data
[07:01:50] *** Quits: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de) (Connection closed)
[07:02:11] *** Joins: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de)
[07:02:12] *** Joins: avikpal (avikpal@moz-bof.nmc.194.117.IP)
[07:02:33] *** Quits: santiago (santiago@moz-8th.j2e.167.12.IP) (Quit: Computer has gone to sleep.)
[07:02:34] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[07:02:35] *** Quits: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de) (Connection closed)
[07:02:40] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[07:03:13] *** Joins: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de)
[07:03:31] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[07:04:23] *** Joins: EspressoDan (EspressoDan@moz-oc3.uaj.241.66.IP)
[07:05:51] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[07:06:26] *** Quits: avikpal (avikpal@moz-bof.nmc.194.117.IP) (Connection closed)
[07:06:48] *** Quits: AngelOfSol (AngelOfSol@moz-9l0nls.fios.verizon.net) (Connection closed)
[07:06:51] *** Quits: rudolph_ (rudolph@moz-q5b.rfa.152.37.IP) (A TLS packet with unexpected length was received.)
[07:07:20] *** Quits: rouma (zack@moz-p8e0re.res.rr.com) (Ping timeout: 121 seconds)
[07:07:33] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Ping timeout: 121 seconds)
[07:07:44] *** Joins: flacko (chatzilla@moz-252.vp3.60.78.IP)
[07:08:17] <flacko> Is there a function for me to get absolute path out of dotted path? Like "/usr/bin/../" I want to receive "/usr/bin/"
[07:08:35] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[07:08:53] <Amun-Ra> you mean receive "/usr"
[07:09:13] <flacko> Well yeah
[07:09:19] <flacko> The point is no dots and absolute path
[07:09:22] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[07:09:49] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[07:10:09] <Amun-Ra> there should be something in std::path::Path
[07:10:21] *** Quits: JanC (janc@moz-fpr7rf.dsl.scarlet.be) (Ping timeout: 121 seconds)
[07:10:48] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[07:11:15] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[07:11:34] *** Joins: muffin (Mibbit@moz-tcl.1o6.236.188.IP)
[07:12:42] <flacko> Hm seems like I can only check if path is absolute, can't do transform I need
[07:13:01] *** Joins: rudolph (rudolph@moz-q5b.rfa.152.37.IP)
[07:13:02] <Pieter> Is it possible to include an associated type in an inherited trait? I have a trait that inherits from Deref and if i use it, I get "the value of the associated type must be specified". See http://is.gd/PW0dGB for an example.
[07:14:37] *** Joins: qdbhg (qdbhg@moz-7pk.85t.136.117.IP)
[07:14:47] <muffin> Hello everyone. In your opinion, would it be better to design an API that works with an immutable array to accept iterators, or simply accept immutable pointers?
[07:14:53] *** Joins: slomo (slomo@moz-p8m0g2.net)
[07:16:21] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:16:59] *** Quits: qdbhg (qdbhg@moz-7pk.85t.136.117.IP) (Connection closed)
[07:17:14] <Mutabah> muffin: Depends on what operation is being done
[07:17:24] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[07:19:07] *** Joins: PTStomp (paul@moz-8fla9q.bigpond.net.au)
[07:19:44] *** Joins: Pent (pant@moz-3c3.9jd.64.184.IP)
[07:20:04] *** Joins: copycat (Thunderbird@moz-mm4e60.singnet.com.sg)
[07:20:55] <muffin> Mutabah: The function will take an array of objects and operate on them without mutating them, and without storing any references to it. I'm thinking that iterators provide an advantage that any object that implements the Iterator trait can be passed to it, including normal arrays and array references.
[07:21:15] *** Quits: oal (oal@moz-0lm.qc2.255.130.IP) (Ping timeout: 121 seconds)
[07:21:27] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (A TLS packet with unexpected length was received.)
[07:21:53] <muffin> Mutabah: I'm reluctant to rely on the Iterator trait because I don't want the API to be "wierd" to use.
[07:22:05] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[07:22:48] <Mutabah> Just using a slice should work really
[07:22:52] <muffin> Mutabah: That's why I asked about it here, to see if it would be acceptable to find a function that accepts an iterator where one would normally expect an array
[07:23:32] *** Quits: grant (grant@moz-jfh.0nq.187.64.IP) (Client exited)
[07:23:53] *** Joins: JanC (janc@moz-qi5m1k.dial.scarlet.be)
[07:24:29] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:24:40] *** Joins: nico_rikken (nico@moz-ns8kkl.6ulu.d2lj.0981.2001.IP)
[07:24:55] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[07:25:34] <muffin> Mutabah: yup It would.
[07:25:46] <flavius> How to get an into iterator from a [Graph; 0] ?
[07:26:00] *** Joins: Guest_ (textual@moz-gr4.o0e.171.183.IP)
[07:26:31] *** Quits: rudolph (rudolph@moz-q5b.rfa.152.37.IP) (Connection closed)
[07:26:40] <flavius> into_iter() returns core::slice::Iter<'_, hypergraph::Graph>
[07:26:54] *** Joins: rudolph (rudolph@moz-os6vss.o3k5.dsq9.010d.2620.IP)
[07:27:13] <Mutabah> flavius: There's no IntoIterator for fixed size arrays at the moment
[07:27:23] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[07:27:52] *** Quits: EspressoDan (EspressoDan@moz-oc3.uaj.241.66.IP) (Client exited)
[07:28:14] *** Joins: rudolph_ (rudolph@moz-q5b.rfa.152.37.IP)
[07:28:15] *** Quits: rudolph (rudolph@moz-os6vss.o3k5.dsq9.010d.2620.IP) (Connection closed)
[07:29:32] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Connection closed)
[07:30:01] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[07:30:22] *** Quits: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de) (Connection closed)
[07:30:30] <Quxxy> flavius: Here's a really hideous way of doing it: http://is.gd/WrAXWw
[07:30:54] <Quxxy> About the only thing to recommend it is that it *does not* require a clone
[07:31:08] <Quxxy> ... it just needs a heap allocation
[07:31:20] <Quxxy> ... and a bunch of memcpys, probably
[07:31:29] <Quxxy> ... but *aside* from that
[07:31:31] *** Joins: grant (grant@moz-jfh.0nq.187.64.IP)
[07:31:33] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[07:32:20] <flavius> yeah I wanted to avoid yet another TODO in the test suite
[07:32:45] <Quxxy> It works, and it's safe... it's just a bit inefficient :P
[07:33:07] <FreeFull> Maybe would be slightly more efficient with placement box
[07:35:14] *** Quits: PTStomp (paul@moz-8fla9q.bigpond.net.au) (Ping timeout: 121 seconds)
[07:36:28] *** Quits: untitaker (untitaker@moz-21rj78.highway.telekom.at) (Ping timeout: 121 seconds)
[07:38:00] *** Joins: untitaker (untitaker@moz-1r1tqs.highway.telekom.at)
[07:39:34] *** Quits: Havvy (Havvy@moz-epv20b.wa.comcast.net) (Connection closed)
[07:39:42] *** Joins: andresv (textual@moz-kvanfr.dyn.estpak.ee)
[07:40:24] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[07:41:03] *** Joins: Havvy (Havvy@moz-epv20b.wa.comcast.net)
[07:41:49] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[07:42:30] *** Quits: miselin (miselin@moz-c77.igu.11.203.IP) (Ping timeout: 121 seconds)
[07:43:05] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Connection closed)
[07:44:28] *** Quits: muffin (Mibbit@moz-tcl.1o6.236.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:46:17] *** Joins: miselin (miselin@moz-c77.igu.11.203.IP)
[07:46:37] *** Joins: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de)
[07:47:49] *** Quits: andresv (textual@moz-kvanfr.dyn.estpak.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:49:28] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[07:49:38] *** Quits: aotic (pat@moz-kfjsbq.tulsok.sbcglobal.net) (Connection closed)
[07:50:19] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[07:51:33] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (A TLS packet with unexpected length was received.)
[07:52:22] *** Quits: sasha (sasha@moz-1uu9ia.net.t-com.hr) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:53:04] *** Joins: REMqb (REMqb@moz-v1pkj8.abo.wanadoo.fr)
[07:53:30] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[07:54:11] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[07:54:53] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[07:55:10] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:55:14] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[07:55:38] *** Quits: Kxepal (Miranda@moz-fbtdfm.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[07:55:51] *** Quits: Pieter (Mibbit@moz-7bjs3j.ftth.telfortglasvezel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[07:55:56] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[07:56:26] *** Joins: oberstet (quassel@moz-lktbnn.dynamic.mnet-online.de)
[07:57:54] *** Joins: Kxepal (Miranda@moz-r7ntvk.pppoe.mtu-net.ru)
[08:00:46] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[08:01:59] *** Quits: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net) (Quit: My laptop has gone to sleep. ZZZzzz…)
[08:02:11] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[08:05:33] *** Quits: est31 (quassel@moz-skq614.dfri.se) (A TLS packet with unexpected length was received.)
[08:05:35] *** Joins: est31 (quassel@moz-2p3.nhl.10.176.IP)
[08:07:24] *** Quits: ygrek (user@moz-8j9aeu.org.ua) (Ping timeout: 121 seconds)
[08:07:47] *** Joins: sasha (sasha@moz-ob8cdt.net.t-com.hr)
[08:09:16] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[08:10:21] <fkaa> any serde experts here?
[08:12:29] *** Quits: grant (grant@moz-jfh.0nq.187.64.IP) (Client exited)
[08:13:18] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[08:13:43] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[08:14:08] *** Quits: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de) (Connection closed)
[08:14:39] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[08:15:40] *** Quits: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:15:40] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[08:17:25] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[08:21:33] *** Joins: muffin (Mibbit@moz-91r.fnh.236.188.IP)
[08:22:45] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[08:22:59] *** Quits: Eonil (Eonil@moz-sqb.a6u.153.218.IP) (Quit: This computer has gone to sleep)
[08:26:52] *** Quits: muffin (Mibbit@moz-91r.fnh.236.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:27:47] *** Joins: kngl (Adium@moz-rmgnkh.dynamic.voo.be)
[08:28:00] <_habnabit> Clone::clone_from is the best thing
[08:28:09] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[08:28:39] *** Quits: DemonOne (Avi@moz-o43vb3.cablep.bezeqint.net) (Ping timeout: 121 seconds)
[08:28:45] *** Joins: Jackneill (Jackneill@moz-8pg510.pool.digikabel.hu)
[08:29:46] *** Quits: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com) (Ping timeout: 121 seconds)
[08:29:54] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[08:32:18] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[08:32:33] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[08:32:35] *** Joins: mujou (mujou@moz-rko6lo.ocn.ne.jp)
[08:32:53] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[08:35:50] *** Joins: dejan (sid24621@moz-gqcd59.highgate.irccloud.com)
[08:36:28] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[08:37:50] *** Joins: pylbrecht (pylbrecht@moz-b4nhkg.dynamic.kabel-deutschland.de)
[08:40:30] * Quxxy was unaware clone_from existed...
[08:41:32] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[08:41:59] <fkaa> what does `Type Foo = Bar` mean?
[08:42:10] <fkaa> type*
[08:42:12] <cmr> fkaa: It's a "type alias", just gives a type a different name.
[08:42:31] <fkaa> what does `type Error = Error;` do then?
[08:42:38] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[08:42:43] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[08:42:55] <eddyb> lol
[08:43:01] <eddyb> fkaa: is this in rustdoc?
[08:43:20] <eddyb> if so, it's not being smart about how it displays paths, so you'll have to see where the link for the second Error goes
[08:43:33] <fkaa> no, https://github.com/kvark/ron/blob/master/src/encode.rs#L113
[08:43:38] <fkaa> porting it to serde
[08:43:48] <eddyb> fkaa: that's in an impl, completely different
[08:43:50] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:43:53] <fkaa> oh
[08:43:54] <cmr> Oh, that's an associated type.
[08:44:06] <fkaa> where can i read more about associated types?
[08:44:14] <eddyb> <Encoder<'a> as rustc_serialize::Encoder>::Error is set to whatever Error is in that module
[08:44:23] <cmr> fkaa: http://doc.rust-lang.org/book/associated-types.html
[08:46:41] <fkaa> eddyb: i have this https://gist.github.com/fkaa/52226dcd656952cd5577 but need to specify the error type somehow. should i add a generic parameter and then do `F: format::Formatter<Serializer::Error>`?
[08:46:42] <eddyb> you know what I don't like about RON? that it puts () around field: value. I had my own output format in some of the JS tools I made, and it was Class { field: value }
[08:47:03] *** Joins: psy (psy@moz-u9b.hr7.224.43.IP)
[08:47:05] <fkaa> eddyb: well nothing is final :p
[08:47:12] <eddyb> "the biggest problem with JSON" it was never a problem for me *shrug*
[08:47:24] *** Joins: ParadoxSpiral_ (ParadoxSpir@moz-n2ejs5.dip0.t-ipconnect.de)
[08:47:32] <eddyb> my biggest problems with JSON is not being able to use comments or quote-less fields
[08:47:46] *** Joins: v21 (vee@moz-8gi.d1o.63.119.IP)
[08:47:52] <cmr> My biggest problem is freaking trailing commas.
[08:48:09] <eddyb> you know my stance on trailing commas
[08:48:39] <eddyb> they are annoying, :P
[08:49:27] *** Quits: weirdjack (Mibbit@moz-st7v59.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:49:37] <eddyb> cmr: oh and I just figured what made me uneasy about the RON example with all the trailing commas: I use the absense of a sequence separator to find the last item in a sequence
[08:49:42] <flacko> How do I create, mutex locked hashmap?
[08:49:47] *** Joins: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl)
[08:49:59] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[08:49:59] <eddyb> so a trailing comma makes me look in 3 places instead of 1 to get the same information
[08:50:05] <Quxxy> flacko: Mutex::new(HashMap::new()) ?
[08:50:06] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[08:50:21] <fkaa> if a trait has an associated type, do the impls also get it? or do i need to do Trait::Type
[08:50:37] <eddyb> fkaa: the impls *provide* the associated type
[08:50:45] *** Quits: ParadoxSpiral (ParadoxSpir@moz-du8fgv.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[08:50:53] <flacko> Quxxy: error: function calls in statics are limited to struct and enum constructors
[08:50:58] <eddyb> you can omit it if the trait provides a default
[08:51:04] <eddyb> flacko: you didn't say "in a static"
[08:51:06] <Quxxy> flacko: Ah, that's a different question
[08:51:12] <flacko> Oh yeah forgot
[08:51:14] <flacko> sorry
[08:51:17] <eddyb> it's actually entirely doable now, just need a few RFCs :P
[08:51:27] <Quxxy> flacko: https://crates.io/crates/lazy_static is probably your best bet for now
[08:51:33] <eddyb> Quxxy: meh
[08:51:40] *** Joins: Nextra (Nextra@moz-te0a43.ewe-ip-backbone.de)
[08:51:48] <eddyb> (like, we have the technology and the compiler/library changes would only take a few minutes :P)
[08:51:55] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[08:52:09] <Quxxy> I prefer "it works now" to "it'll work at some point in the future most likely"
[08:52:25] <eddyb> I prefer "people show support for what they need" :P
[08:52:45] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[08:52:47] <eddyb> because if I make those changes, they'll be rejected without a "public interest"
[08:52:48] *** Joins: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP)
[08:53:00] * Quxxy vanishes in a puff of smoke
[08:53:08] * cmr vanishes in a puff of Quxxy
[08:53:50] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[08:54:01] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[08:54:05] *** Joins: nercury (nercury@moz-ngr949.static.zebra.lt)
[08:55:55] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[08:55:57] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (Ping timeout: 121 seconds)
[08:57:00] <eddyb> random style choices https://gist.github.com/eddyb/692358897f0950cb74da
[08:58:04] <eddyb> or maybe this https://gist.github.com/eddyb/f5d3be919cb2fc72400b
[08:58:07] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:58:36] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[08:58:46] <eddyb> fkaa: ^^
[08:59:21] <fkaa> <{ 0_0 }>
[09:00:01] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[09:00:01] <fkaa> you should ping kvark with that
[09:00:44] *** Quits: zxq9 (ceverett@moz-c1f1em.asahi-net.or.jp) (Connection closed)
[09:01:03] *** Quits: tomaka (Pierre@moz-r5gldj.abo.wanadoo.fr) (Connection closed)
[09:01:21] *** Joins: zxq9 (ceverett@moz-c1f1em.asahi-net.or.jp)
[09:02:48] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[09:03:07] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[09:03:13] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[09:06:49] *** Joins: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de)
[09:07:11] *** Joins: mbudde (mbudde@moz-v8g.lim.109.2.IP)
[09:08:39] *** Joins: slimsag (Mibbit@moz-qrnu8n.ph.cox.net)
[09:09:25] *** Quits: _td (tatterdemal@moz-a0dnkb.ca.comcast.net) (Ping timeout: 121 seconds)
[09:13:31] *** Quits: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt) (Connection closed)
[09:14:16] *** zz_NameNotFound is now known as NameNotFound
[09:14:17] *** Quits: ParadoxSpiral_ (ParadoxSpir@moz-n2ejs5.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[09:14:17] <slimsag> So.. from what I understand RefCell imposes a runtime overhead to enforce the idea that no two people can have mutable references to the type, is that correct?
[09:14:17] <slimsag> (but it's not thread-safe)
[09:14:18] <slimsag> why would multiple mutable references to the same data be a bad thing that would violate memory safety?
[09:15:00] <kimundi> iterator invalidation, and being able to freely cast between two entirely different types and/or invalid memory
[09:15:01] <cmr> slimsag: http://manishearth.github.io/blog/2015/05/17/the-problem-with-shared-mutability/
[09:15:08] *** Quits: loyd (loyd@moz-jsb.32f.108.213.IP) (Quit: Leaving)
[09:15:43] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[09:15:45] <Manishearth> My blog has been linked to 5 times in the last 24 hours. What is wrong with y'all :p
[09:16:29] *** Quits: basicdays (basicdays@moz-vreeoj.cable.rcn.com) (Ping timeout: 121 seconds)
[09:16:39] <slimsag> cmr: awesome! I'll read that :D
[09:17:10] *** Joins: hohoho (hohoho@moz-jqco1f.pools.vodafone-ip.de)
[09:17:24] <slimsag> Manishearth: I like your blog posts, you seem really knowledgeable on rusty subjects :)
[09:17:25] <Manishearth> slimsag: In short: The problem with multithreaded shared mutability is not writing to the same memory location (as one would think); that's solved by cache magicks.
[09:17:39] <Manishearth> The problem is that arbitrary code can be run in between your instructions
[09:17:47] <Manishearth> in a sufficiently complex codebase,
[09:17:53] <RC9> manishearth i think i found the problem: "Newcomers to the language have the recurring question as to why this exists."
[09:17:57] <RC9> problem is all the new people :D
[09:18:11] <Manishearth> random method calls *are* "arbitrary code" in a sense
[09:18:33] <Manishearth> you don't know *exactly* what's happening there, nor can you be sure that nobody will change it in the future
[09:18:36] <slimsag> Manishearth: are you just talking about a data race? i.e. where one would use a mutex in another language ?
[09:18:41] <Manishearth> ... ish
[09:19:03] <Manishearth> slimsag: thanks :)
[09:19:09] *** Quits: acgtyrant (acgtyrant@moz-d6e.4sk.186.39.IP) (Ping timeout: 121 seconds)
[09:19:20] *** Parts: sasha (sasha@moz-ob8cdt.net.t-com.hr) ("Textual IRC Client: www.textualapp.com")
[09:19:40] <slimsag> I had asked previously if RefCell was basically for that, but was told it isn't thread-safe on it's own -- so I presumed my understanding of it was incorrect
[09:19:44] <Manishearth> slimsag: the blog post explains it in more detail, but basically you use a mutex to protect yourself from other code trying to access the same data
[09:19:50] <Manishearth> slimsag: it's a single-threaded mutex
[09:19:58] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[09:20:01] *** Joins: ParadoxSpiral (ParadoxSpir@moz-n2ejs5.dip0.t-ipconnect.de)
[09:20:05] <eddyb> no, it's a single-threaded RWLock with no deadlocks
[09:20:08] <Manishearth> yeah that
[09:20:19] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[09:20:31] *** Quits: mindtree (Mitch@moz-5h22bp.iprimus.net.au) (Ping timeout: 121 seconds)
[09:20:37] <eddyb> (it panics if it would "deadlock" becuase in a single thread, there's nobody else to wait for)
[09:20:51] <Manishearth> eddyb: btw, is there any value to having refcell methods that don't panic?
[09:20:56] <eddyb> yes
[09:20:56] <Manishearth> (try_borrow)?
[09:21:00] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Ping timeout: 121 seconds)
[09:21:01] <Manishearth> why don't we then? 1.0?
[09:21:02] <slimsag> hm, I still can't wrap my head around a situation where a single thread of execution could violate memory safety where there are two mutable references to the same data
[09:21:11] <Manishearth> slimsag: blog post
[09:21:11] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[09:21:16] <eddyb> Manishearth: pretty much. there's an unstable method to get the state
[09:21:16] <cmr> slimsag: See the post for examples.
[09:21:42] <fkaa> is there a std thingy which implements Write and writes to a string?
[09:21:43] <slimsag> (okay, I'll read that and stop pestering, sorry! =) )
[09:21:54] <Manishearth> eddyb: yeah not what I wanted , but in a single threaded situation that should be fine :p
[09:21:59] <eddyb> fkaa: fmt::Write kinda works like that
[09:22:05] <Hukka> Is there something wrong with my browser? Nothing from rust-lang.org loads over https
[09:22:17] <Manishearth> eddyb: (I was looking for one yesterday because I wanted to write a POC that actually segfaults)
[09:22:28] *** Joins: sigma (sigma@moz-k1ghg8.range109-153.btcentralplus.com)
[09:22:32] <Mutabah> Hukka: Possily, I've seen that on an old version of firefox
[09:22:36] <Manishearth> instead of one that just panics or may perhaps segfault if I run it a million times
[09:22:46] <Hukka> Firefox 38 here
[09:23:05] <Hukka> Hmh, works on Chromium
[09:23:07] <Manishearth> broken for me too
[09:23:11] <Hukka> So yes, indeed something is wrong
[09:23:12] <cmr> broken for me too
[09:23:19] <eddyb> slimsag: to be precise, RefCell is non-local dynamic borrow tracking. it's what the borrow-checker in the compiler does, but more flexible (and slightly less efficient)
[09:23:33] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[09:23:44] *** NameNotFound is now known as zz_NameNotFound
[09:23:45] <Manishearth> ^that
[09:24:08] <Manishearth> the *other* blog post (http://manishearth.github.io/blog/2015/05/27/wrapper-types-in-rust-choosing-your-guarantees/) goes into more detail on that and the tradeoffs :p
[09:24:15] * Manishearth goes off to write more posts
[09:24:20] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[09:24:21] <eddyb> slimsag: the restrictive &T/&mut T semantics are not specific to RefCell, they are at the heart of Rust. there's been like a dozen talks and blog posts about it so far, with varying degrees of detail and accessibility
[09:24:28] <Manishearth> yeah
[09:24:38] <Hukka> Anyway, can't get https://gist.github.com/anonymous/4c296ef126eeebc91d7e working, I just get error: unresolved import `unicode_normalization::UnicodeNormalization`. There is no `UnicodeNormalization` in `unicode_normalization`
[09:24:51] <Hukka> It's the main example from https://github.com/unicode-rs/unicode-normalization
[09:24:51] <fkaa> how to turn Vec<u8> into &str?
[09:24:58] <eddyb> and TRLP should definitely talk about why it's important and iterator invalidation
[09:25:01] <slimsag> Manishearth: thanks for the link, I'll read that one too :D
[09:25:14] <Manishearth> eddyb: The Rust Langue de Programming?
[09:25:21] <Manishearth> :p
[09:25:23] <eddyb> TRPL, finger slip
[09:25:30] <Manishearth> I can't wait for TURPL myself
[09:25:36] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[09:25:39] <bluss> talk with your kids about iterator invalidation, before it's too late
[09:25:44] <Manishearth> +1
[09:25:53] <Manishearth> qotw'd
[09:26:06] <eddyb> fkaa: you can turn &[u8] into &str and Vec<u8> into String (at the cost of O(N) utf-8 checks). there should be methods on str and String for that
[09:26:28] *** Joins: froe (Mibbit@moz-tpjl46.co.comcast.net)
[09:26:32] <esclear> I have a feature request for cargo, if it does not exist yet: I would like to be able to disable automatic updating of the index.
[09:26:34] <eddyb> may be called "from_utf8
[09:26:36] <eddyb> "
[09:26:42] * bluss imagines kids playing a game of borrow checker at kindegarten
[09:26:46] *** Joins: StevenOnly (steven@moz-cbf.jlg.192.139.IP)
[09:26:48] <eddyb> esclear: a "no refresh" flag?
[09:27:05] <eddyb> bluss: you lose if you alias
[09:27:34] <eddyb> you know, battleship uses aliasing as a core mechanic :P
[09:27:50] <eddyb> though that's more like heap spraying
[09:27:56] <eddyb> one byte at a time
[09:28:41] <esclear> Kind of, yes. I had the problem multiple times: Travelling by train, no internet. I was working on Rust projects, did a quick `cargo build --release` and cargo tries to update the index. Doesn't work obviously. But I can not use cargo anymore.
[09:28:56] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[09:29:06] <Quxxy> Cargo, in general, needs to be way less network-happy
[09:29:10] <Manishearth> eddyb: bluss I wonder what would happen if intro CS courses spent two weeks on this stuff after teaching pointers
[09:29:21] <eddyb> that's weird, there doesn't seem any way to check for it
[09:29:29] <Manishearth> it soudns unthinkabke (too much info for the poor innocent minds)
[09:29:30] <eddyb> err, to disable it
[09:29:44] <eddyb> Manishearth: that's a terrible thing to say
[09:29:45] <Manishearth> but ... it could be an interesting concept
[09:29:53] <Manishearth> eddyb: ?
[09:29:55] <eddyb> there is no such thing as poor innocent minds
[09:29:58] <Manishearth> hahaha
[09:30:10] <Hukka> I just don't get it... https://github.com/unicode-rs/unicode-normalization/blob/master/src/lib.rs has "pub trait UnicodeNormalization", so what else is needed?
[09:30:19] *** Joins: woboats (tatterdemal@moz-a0dnkb.ca.comcast.net)
[09:30:33] <eddyb> the only thing you're going to get from looking down upon the "poor fools" is, well, fools
[09:30:45] <Manishearth> heh
[09:30:48] *** Quits: v21 (vee@moz-8gi.d1o.63.119.IP) (Ping timeout: 121 seconds)
[09:31:26] *** Quits: RC9 (RCIX@moz-r4k.dfa.8.198.IP) (Quit: Leaving)
[09:31:29] <eddyb> pointers aren't hard, but if you don't help students create a mental model of memory, they might as well be impossible magic
[09:31:37] <Manishearth> yes
[09:31:47] <Manishearth> so I've noticed that the mental memory model is done
[09:32:09] <Manishearth> what's not done is teaching proper discipline about it
[09:32:13] *** Quits: rudolph_ (rudolph@moz-q5b.rfa.152.37.IP) (A TLS packet with unexpected length was received.)
[09:32:26] <eddyb> because discipline didn't matter in COBOL and assembly
[09:32:34] <Manishearth> But, pointers themselves are daunting and make newbies balk (I TAd one of these, this was a *hard* problem)
[09:32:44] <Manishearth> (which is mostly what I meant from the poor innocent minds thing)
[09:32:48] <eddyb> and you can use C like discipline doesn't matter and you can get lucky
[09:32:58] <Manishearth> haha
[09:33:05] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[09:33:19] <eddyb> almost every single non-trivial program written by my classmates is exploitable
[09:33:28] <leftylink> can't spell COBOL without COOL
[09:33:29] <Manishearth> so I'm wondering if proper memory discipline can be taught fro mthe ground up in a way so as not to make the students run off to Alaska
[09:33:41] * eddyb FREEEZES leftylink
[09:34:11] <Manishearth> eddyb: oh, the coding styles used by the students under me made me want to claw my eyes out
[09:34:16] <eddyb> Manishearth: sure it can. you can't do it *on top* of this excuse for an education I keep seeing
[09:34:26] <Manishearth> eddyb: exactly
[09:34:39] <eddyb> maybe it's better where you're coming from. then again... who am I kidding almost everyone sucks :P
[09:35:01] *** Joins: mkpankov (user@moz-lbi.k4a.16.195.IP)
[09:35:14] <mkpankov> hi
[09:35:21] *** Quits: slomo (slomo@moz-p8m0g2.net) (Quit: Ex-Chat)
[09:35:22] <mkpankov> where can I ask something about rustbook?
[09:35:29] <eddyb> there is this weird "discipline" of fixed-length buffers (so ROP is pretty easy if you care enough to bother)
[09:36:11] <eddyb> and then globals are not only not discouraged, but students learn they are 0-initialized and they depend on that to avoid initializing some variables
[09:36:24] <eddyb> promoting globals and uninitialized variables
[09:36:49] *** Quits: yota (sdouche@moz-ebn3j6.3iqc.r856.0e35.2a01.IP) (Quit: WeeChat 1.1.1)
[09:37:50] <eddyb> better unis do tend to enforce good coding style and practices (semi-automatically, even). well, one of them that I know of
[09:38:09] <eddyb> so we're not doomed, but the highschool stuff is just broken
[09:38:18] <Manishearth> eddyb: Some of the profs here do enforce that
[09:38:19] *** Joins: ziocroc (ziocroc@moz-bfu.33o.74.151.IP)
[09:38:21] <Manishearth> not all
[09:38:42] *** Quits: psd_ (psd@moz-2uiqg7.mtnl.net.in) (Ping timeout: 121 seconds)
[09:38:42] *** Joins: rudolph (rudolph@moz-q5b.rfa.152.37.IP)
[09:38:44] <Manishearth> and since courses like CS101 are mainly run by TAs, it depends on the TAs. In this case, not so good
[09:39:25] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[09:39:34] <eddyb> can I go write some code and forget about the silly hoomans? pls
[09:40:19] <Manishearth> eddyb: sure, but that code should fix ScopedKey
[09:40:30] <Manishearth> you have 10 minutes
[09:40:31] <Manishearth> Go!
[09:40:44] <eddyb> no, that you can do yourself
[09:41:06] *** Quits: rudolph (rudolph@moz-q5b.rfa.152.37.IP) (Quit: Leaving...)
[09:41:10] *** Joins: morphy (textual@moz-1st.s6f.84.114.IP)
[09:41:14] *** Joins: rudolph (rudolph@moz-qcqtiq.o3k5.dsq9.010d.2620.IP)
[09:41:16] <Manishearth> I don't want to redesign the *Key internals :P
[09:41:21] <eddyb> well, modulo the borrow thread-local-static-in-another-thread-local-static stuff, which I'd almost just deny
[09:41:24] <eddyb> Manishearth: ah
[09:41:25] <Manishearth> I can do the mem_categorization bits
[09:41:36] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[09:41:49] *** Joins: psd (psd@moz-2uiqg7.mtnl.net.in)
[09:41:52] <Manishearth> but *Key is annoying and makes my head hurt and apparently also is platform dependent
[09:41:55] *** Parts: CMCDragonkai (nobody@moz-v01.321.218.216.IP) ()
[09:42:05] * Manishearth fetches the long pole, then proceeds to not use it pointedly
[09:42:13] <eddyb> LocalKey is easier, if properly inlined
[09:42:13] *** Joins: CMCDragonkai (nobody@moz-v01.321.218.216.IP)
[09:42:37] <Manishearth> see, you  know that it is easier -- clearly you know more about it than I do and should fix it!
[09:42:52] <eddyb> but I do not like the looks of fn(&Fn() - wait
[09:42:56] <eddyb> this isn't easy :/
[09:42:59] <Manishearth> heh
[09:43:03] <Manishearth> on your plate now
[09:43:06] * Manishearth runs off
[09:43:16] *** Joins: yota (sdouche@moz-me92to.3iqc.r856.0e35.2a01.IP)
[09:43:36] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[09:44:30] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[09:47:00] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[09:48:22] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[09:48:22] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[09:49:31] *** Joins: vosen (vosen@moz-mtm1g4.dynamic.chello.pl)
[09:50:10] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[09:50:43] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[09:51:48] *** Joins: Ms2ger (Ms2ger@moz-jig.287.180.91.IP)
[09:52:26] *** Quits: ahartzheim (ahartzheim@moz-7dj.uug.52.72.IP) (Ping timeout: 121 seconds)
[09:52:54] *** Quits: FreeFull (freefull@moz-2c24g7.range86-136.btcentralplus.com) (Quit: Vacation)
[09:53:24] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[09:53:48] *** Joins: ahartzheim (ahartzheim@moz-mb0.tts.72.185.IP)
[09:53:58] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[09:54:46] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[09:54:57] *** Joins: aepsil0n (eduard@moz-gtoi2p.hsi8.kabel-badenwuerttemberg.de)
[09:55:44] *** Quits: Morten (Morten@moz-75skp6.bb.online.no) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[09:56:34] *** Joins: laumann (thomas@moz-3v9.hq0.225.130.IP)
[09:56:40] *** Quits: laumann (thomas@moz-3v9.hq0.225.130.IP) (Quit: leaving)
[09:57:26] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (Ping timeout: 121 seconds)
[09:58:00] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[09:59:10] *** Joins: maikklein (Mibbit@moz-5p0kf7.dip0.t-ipconnect.de)
[09:59:17] <maikklein> what is this called? impl<T> !Send for Rc<T>
[09:59:25] <Yurume> negative trait implementation.
[09:59:32] <maikklein> thanks
[09:59:43] *** Joins: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl)
[10:00:08] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[10:00:53] *** Joins: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP)
[10:01:32] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[10:01:56] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[10:02:02] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[10:03:56] *** Joins: amnn (amnn@moz-ro1qqu.ox.ac.uk)
[10:05:39] *** Joins: jshs (jshs@moz-65qnc5.dip0.t-ipconnect.de)
[10:06:50] *** Joins: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net)
[10:07:48] *** Quits: amnn (amnn@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:09:13] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[10:11:10] *** darkowlzz|afk is now known as darkowlzz
[10:12:11] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:12:37] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[10:12:59] *** Quits: ray (ray@moz-m0g.t3f.66.59.IP) (Connection closed)
[10:13:06] *** Joins: nodweber (nodweber@moz-1no.d7a.3.149.IP)
[10:14:05] *** Quits: maikklein (Mibbit@moz-5p0kf7.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[10:14:44] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[10:16:58] <towler1> 2
[10:17:03] *** Joins: woof (woof@moz-s7ara1.mobile.tre.se)
[10:17:14] <cmr> 3
[10:17:31] <myname> 4
[10:18:01] <eddyb> 5
[10:18:25] *** Joins: nicu (chatzilla@moz-tai.hpk.83.92.IP)
[10:18:32] *** Quits: nicu (chatzilla@moz-tai.hpk.83.92.IP) (Connection closed)
[10:18:33] <woof> Hi. Does anyone here know how to set headers for a GET request with Hyper?
[10:18:52] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[10:19:03] <filsmick> when do you want to use BTreeMap instead of HashMap?
[10:19:12] *** Joins: agjacome (agjacome@moz-j4vd23.dynamic.jazztel.es)
[10:19:42] <woof> I'm trying to send a request and I want JSON as a response from a website.
[10:19:51] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[10:19:56] <woof> I tried this: http://seanmonstar.com/post/105541782562/hyper
[10:20:01] <woof> But it didn't work.
[10:20:02] <Mutabah> filsmick: I believe BTeeeMap is more efficient for larger maps
[10:20:07] <bluss> filsmick: if you need an ordered map
[10:20:32] <Mutabah> (or maybe not... *shrug*)
[10:20:35] <huon> Mutabah: insert/lookup/delete for HashMap are O(1), while BTreeMap is O(log n)
[10:20:45] <bluss> filsmick: maybe you want to have reproducible order (rustdoc wants that) or you need to even order or hash the map
[10:21:03] <Mutabah> huon: Collisions, resizing, and contigious allocation cost
[10:21:04] <StevenOnly> woof: Use the header function, http://is.gd/dC5YaF 
[10:21:06] *** Joins: Blei (philipp@moz-8bktnt.cust.swisscom.ch)
[10:21:20] <filsmick> Reproducible order, as in, the elements are ordered by insertion?
[10:21:26] <huon> Mutabah: HashMap is also much nicer for caches etc. (just a flat array)
[10:21:32] <Mutabah> huon: That said, that's something you'd want to profile
[10:21:34] <huon> but yes, those are factors
[10:21:53] <Mutabah> filsmick: btrees are sorted by the key
[10:21:55] <bluss> filsmick: no, ordered by the key order
[10:22:05] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[10:22:09] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[10:22:13] <Mutabah> filsmick: with hash maps, the items are in a random order (well, pseudo-random)
[10:22:23] <bluss> Mutabah: arbitrary order :)
[10:22:57] <filsmick> if operations are constant-time in HashMap and logarithmic in BTreeMap, when does BTreeMap perform better?
[10:22:59] <StevenOnly> woof: in your case it will be .header(ContentType.json()) I think
[10:23:16] <filsmick> You say it does on larger maps, but the cost ought to increase with an O(log n) complexity, right?
[10:24:09] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[10:24:34] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[10:24:43] *** Joins: h-d (Mibbit@moz-3c7.vjp.98.101.IP)
[10:25:03] *** Quits: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU) (Ping timeout: 121 seconds)
[10:25:58] <woof> StevenOnly,header(ContentType.json()) returns the error:  error: type `fn(mime::Mime) -> hyper::header::common::content_type::ContentType {hyper::header::common::content_type::ContentType}` does not implement any method in scope named `json`
[10:26:48] <woof> It should work though, right, http://hyper.rs/hyper/hyper/header/struct.ContentType.html#method.json
[10:27:05] *** Quits: rovar (rovar@moz-96effg.dyn.optonline.net) (Connection closed)
[10:28:06] <woof> nevermind
[10:28:21] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[10:28:36] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[10:28:45] <bluss> filsmick: don't think it can beat the performance of a hashmap in random access
[10:28:57] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[10:29:05] <filsmick> bluss: what's the point, then? Searching?
[10:29:18] <cmr> filsmick: traversal in general.
[10:29:24] <bluss> filsmick: the points already mentioned are enough
[10:29:33] <bluss> filsmick: but it has additional features, like range iterators
[10:29:38] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[10:30:01] *** Joins: Diggsey (diggsey@moz-9s9ol4.dsl.pipex.com)
[10:30:02] <filsmick> oh. So to sum up, if I need to lookup arbitrary keys, I'll use HashMpa, and if I need to traverse the map, I'll use BTreeMap.
[10:30:16] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[10:30:22] <bluss> or if you need to hash a map
[10:30:28] <StevenOnly> woof: So how do you solve it? I am stuck at the same error as you are
[10:30:28] <bluss> you'd use btreemap :)
[10:30:38] <kimundi> filsmick: If you want to keep a sorted list of elements from that you can remove/add arbitrary while keeping it sorted, you'd use a BTreeMap
[10:30:58] <filsmick> I see, thank you for your answers
[10:31:24] <woof> StevenOnly, I changed it to this, but I'm stuck again: header(ContentType().json())
[10:31:25] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[10:31:50] *** Quits: zxq9 (ceverett@moz-c1f1em.asahi-net.or.jp) (Quit: Konversation terminated!)
[10:33:47] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[10:34:22] *** Joins: Hildar (Mibbit@moz-04vi1v.cable.virginm.net)
[10:34:43] <woof> StevenOnly, I made it work. let mime: Mime = "application/json".parse().unwrap(); And then you set the header for the request to .header(ContentType(mime))
[10:34:55] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[10:35:55] <woof> Buuut, that doesn't solve my problem completely. I want the response I get from the website to be pure JSON and to do that I want to use the Accept header but I have no clue how to use that
[10:37:11] *** Joins: mkpankov` (user@moz-sa7.70f.16.195.IP)
[10:37:23] *** Joins: SgtCoDFish (Ashley@moz-236.pn9.250.176.IP)
[10:37:44] <VShell> woof: .header(ContentType::json()) should do the same thing as what you did there, for the record. (the issue was you were using . instead of ::)
[10:38:10] <StevenOnly> VShell: ah my bad, I was the one who typed that initially, sorry woof, still learning as well
[10:38:41] *** Quits: mkpankov (user@moz-lbi.k4a.16.195.IP) (Ping timeout: 121 seconds)
[10:38:41] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[10:39:13] <woof> oh, thanks VShell. Do you know how to set an Accept header with Hyper? I want to send an Accept: application/json header with my request.
[10:39:27] *** Joins: amnn (amnn@moz-ro1qqu.ox.ac.uk)
[10:39:42] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.2)
[10:40:10] *** Quits: nicoch (nicoch@moz-g02d7k.be) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:40:45] <filsmick> Vec::position_elem(&self) is unstable, what should I use instead to get the index of an element in a vec?
[10:40:59] *** Parts: SgtCoDFish (Ashley@moz-236.pn9.250.176.IP) ()
[10:41:08] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[10:41:37] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[10:41:38] <bluss> you can use .iter().position() (takes a closure) or even binary search
[10:42:12] <VShell> anyway, woof, .header(Accept(vec![QualityItem::new("application/json".parse().unwrap(), 1)])) should work, reading from http://hyper.rs/hyper/hyper/header/struct.Accept.html
[10:42:41] <filsmick> bluss: thanks. Is there a similar alternative to Vec::append()?
[10:43:05] <filsmick> http://doc.rust-lang.org/collections/vec/struct.Vec.html#method.append
[10:43:24] <bluss> I think .extend() is the successor to that
[10:43:50] <filsmick> I wonder why we have both
[10:44:19] <Mutabah> filsmick: History probablty
[10:44:28] <VShell> woof: or, actually, simpler... .header(Accept(vec![qitem("application/json".parse.unwrap())])) where qitem is from hyper::header
[10:44:42] <filsmick> Mutabah: but .append() is new. Why add it when extend is there?
[10:44:43] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[10:44:45] *** Quits: mkpankov` (user@moz-sa7.70f.16.195.IP) (Ping timeout: 121 seconds)
[10:44:52] *** Joins: mkpankov` (user@moz-r2v.70f.16.195.IP)
[10:45:05] <Mutabah> aah, dunno...
[10:45:15] <Hildar> Is it possible to put a T<'a> into a Box? I get some horrible conflicting lifetime error.
[10:45:28] <Mutabah> Hildar: it should be possible
[10:45:44] <Mutabah> (of course, the Box can't outlive 'a
[10:46:06] *** Joins: hualet (Mibbit@moz-r76lur.members.linode.com)
[10:46:26] <woof> VShell, The last on worked. Thank you so much. By the way, you missed the parenthesis on .parse. .header(Accept(vec![qitem("application/json".parse().unwrap())]))
[10:46:30] <woof> one*
[10:46:50] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[10:47:00] <VShell> heh, yes, sorry.
[10:48:11] <Hildar> mutabah: http://pastebin.com/PCS0JyT8 I'm guessing I just need the right magic words to inform the compiler that the Box won't outlive 'a
[10:48:45] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[10:49:02] *** Joins: eibwen (eibwen@moz-sfstjq.dip0.t-ipconnect.de)
[10:49:57] <hualet> hi there, I wanted a function that provided a path it gives all the files it contains if the path is a directory otherwise the path itself, here's my implementation http://pastebin.com/rwcMpYAK, but I can't get it compiled
[10:50:10] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[10:50:21] <hualet> hope some one can review it for me, thanks
[10:50:36] <Mutabah> Hildar: Possibly... can you paste the entire function? (also - Is self defined as &self, or just 'self))
[10:51:29] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[10:51:38] *** Joins: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[10:51:43] <hualet> Mutabah: can you help me with that?
[10:52:11] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[10:52:16] *** Joins: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU)
[10:52:21] <Hildar> Mutabah: http://pastebin.com/fLwAtbPn I've tried redoing the impl as "impl for &Graphics" and changing the trait to just take self instead, but no luck.
[10:53:15] <Mutabah> hualet: You're pushing borrows of the path to the result vector
[10:53:34] <Mutabah> hualet: &-ptrs are borrows, they cannout outlive the source
[10:54:02] <Mutabah> Hildar: Remove the & from &self in that struct constructor
[10:54:13] <hualet> Mutabah: then how can I fix it, please?
[10:54:15] <filsmick> how comes the regex crate doesn't compile on stable?
[10:54:22] <Mutabah> &self in that expression is '&&Graphics'
[10:54:35] *** Joins: meh (meh@moz-e56g7l.42-151.net24.it)
[10:54:37] <Mutabah> hualet: Return PathBuf instead of &Path
[10:54:49] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[10:55:21] <hualet> Mutabah: you mean a Vec contains PathBuf instead of &Path?
[10:55:27] <Mutabah> yes
[10:55:31] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[10:56:10] *** Quits: Guest_ (textual@moz-gr4.o0e.171.183.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:56:12] <hualet> Mutabah: OK, thanks ;)
[10:57:41] <Hildar> Mutabah: Same error (only it now refers to the "autoborrow" of self)
[10:57:54] <Hildar> *autoreference
[10:58:28] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[10:58:33] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:58:44] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[10:59:31] *** Quits: aepsil0n (eduard@moz-gtoi2p.hsi8.kabel-badenwuerttemberg.de) (Connection closed)
[11:00:11] *** Quits: ziocroc (ziocroc@moz-bfu.33o.74.151.IP) (Client exited)
[11:01:41] *** Quits: morphy (textual@moz-1st.s6f.84.114.IP) (Ping timeout: 121 seconds)
[11:02:54] *** Quits: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU) (Ping timeout: 121 seconds)
[11:03:57] *** Quits: hualet (Mibbit@moz-r76lur.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[11:04:58] *** Quits: nico_rikken (nico@moz-ns8kkl.6ulu.d2lj.0981.2001.IP) (Quit: Leaving)
[11:05:33] *** darkowlzz is now known as darkowlzz|afk
[11:05:56] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[11:06:33] *** Quits: forgottenone (forgottenon@moz-4dj.9fn.45.92.IP) (Ping timeout: 121 seconds)
[11:06:46] *** Joins: forgottenone (forgottenon@moz-mgp.26m.45.92.IP)
[11:07:20] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[11:07:33] <filsmick> I can't find the format string for milliseconds on time's documentation
[11:07:40] <filsmick> http://doc.rust-lang.org/time/time/fn.strftime.html 
[11:08:09] <Mutabah> filsmick: I think it's the same as the libc strftime function...
[11:09:52] <Hildar> Ahah! Fixed it by making it return a Box<Iterator + 'a>. I knew there would be some magic word to make the compiler happy :)
[11:10:10] <filsmick> Mutabah: I guess that means no milliseconds...
[11:10:34] *** Quits: jimmy (textual@moz-vld7pl.iinet.net.au) (Ping timeout: 121 seconds)
[11:10:38] *** Joins: ErikPragt (Mibbit@moz-f70m7c.static.versatel.nl)
[11:11:58] *** Joins: Sgeo_ (Sgeo@moz-mo8ath.dyn.optonline.net)
[11:11:58] *** Quits: Sgeo_ (Sgeo@moz-mo8ath.dyn.optonline.net) (Connection closed)
[11:12:41] *** Joins: lenstr (lenstr@moz-kvg.vju.25.171.IP)
[11:12:46] <ErikPragt> Hello
[11:13:44] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:14:45] *** Quits: joelpet (quassel@moz-eta24h.cust.bredbandsbolaget.se) (Connection closed)
[11:15:04] *** zz_NameNotFound is now known as NameNotFound
[11:16:44] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[11:17:05] <ErikPragt> We're just doing a small hackaton today, trying to build some webservices in Rust. If anyone has some suggestons, that would be appreciated!
[11:17:20] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[11:17:27] *** Joins: mindtree (Mitch@moz-5h22bp.iprimus.net.au)
[11:19:10] *** Joins: nekun (Mibbit@moz-f70m7c.static.versatel.nl)
[11:19:34] <nekun> hey ErikPragt :D
[11:21:52] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[11:22:44] *** Joins: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp)
[11:24:31] *** NameNotFound is now known as zz_NameNotFound
[11:24:32] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[11:24:53] *** Joins: p32blo (p32blo@moz-305o0v.cpe.netcabo.pt)
[11:25:28] *** Joins: jimmy (textual@moz-vld7pl.iinet.net.au)
[11:26:08] *** Quits: woof (woof@moz-s7ara1.mobile.tre.se) (Quit: Leaving)
[11:26:51] *** Joins: Hannibal_Smith (nico@moz-itj1vp.retail.telecomitalia.it)
[11:28:10] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[11:30:06] *** Joins: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU)
[11:30:06] *** Quits: flavius (flavius@moz-u9kqrk.graz.surfer.at) (Connection closed)
[11:30:16] *** Joins: joelpet (quassel@moz-eta24h.cust.bredbandsbolaget.se)
[11:30:25] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[11:32:33] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[11:32:44] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[11:33:37] *** Quits: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl) (Ping timeout: 121 seconds)
[11:33:53] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[11:34:20] *** Quits: aravindavk (aravinda@moz-2ng.786.171.122.IP) (Ping timeout: 121 seconds)
[11:34:35] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[11:35:27] *** Joins: heatmeiser (heatmeiser@moz-e2cm1t.6hqs.cfdl.2000.2604.IP)
[11:38:04] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[11:38:06] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[11:39:30] *** Quits: heatmeiser (heatmeiser@moz-e2cm1t.6hqs.cfdl.2000.2604.IP) (Ping timeout: 121 seconds)
[11:39:39] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[11:41:49] *** Joins: ympu (Mibbit@moz-f9m.hgk.151.193.IP)
[11:42:10] *** Joins: lenstr_ (lenstr@moz-37t.vju.25.171.IP)
[11:42:57] *** Quits: Douman (Douman@moz-vg292c.dynamic.mts-nn.ru) (Quit: )
[11:44:45] *** Quits: lenstr (lenstr@moz-kvg.vju.25.171.IP) (Ping timeout: 121 seconds)
[11:44:55] *** Quits: Lunatrius (Lunatrius@moz-mkv.hcu.38.77.IP) (Quit: In theory, there is no difference between theory and practice. But, in practice, there is.)
[11:45:37] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[11:46:38] *** Joins: wei2912 (wei2912@moz-m8j.moa.156.175.IP)
[11:46:43] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[11:48:25] *** Quits: pylbrecht (pylbrecht@moz-b4nhkg.dynamic.kabel-deutschland.de) (Quit: tschuess)
[11:48:33] *** Joins: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de)
[11:48:50] *** Joins: yorickpeterse (yorickpeter@moz-kpg9ml.compute.amazonaws.com)
[11:49:15] *** Joins: maikklein (Mibbit@moz-5p0kf7.dip0.t-ipconnect.de)
[11:49:32] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[11:49:34] <yorickpeterse> Is there something like RwLock that doesn't require an argument when creating?
[11:49:39] <yorickpeterse> So RwLock insead of RwLock<T>
[11:49:39] <maikklein> can you send closures with channels?
[11:50:03] <rkruppe> yorickpeterse: What would it contain?
[11:50:08] <yorickpeterse> Nothing
[11:50:16] <rkruppe> So what's its purpose?
[11:50:25] <yorickpeterse> To lock other data not stored within it
[11:50:34] <rkruppe> That is probably a bad idea
[11:50:39] <rkruppe> But you can use RwLock<()>
[11:50:44] <maikklein> Would something like this be possible? http://is.gd/4T2bCr
[11:50:45] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[11:50:48] <yorickpeterse> How would that be a bad idea?
[11:50:52] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[11:51:07] <rkruppe> Because then you don't get any guarantee that the lock is properly acquired by everyone who touches the data
[11:51:24] <yorickpeterse> In this case I have to synchronize access to several fields, I don't want to wrap all of them in a RwLock
[11:51:29] *** Quits: StevenOnly (steven@moz-cbf.jlg.192.139.IP) (Quit: Leaving.)
[11:51:35] <yorickpeterse> Instead I want a generic one that I can use for all fields
[11:51:53] <rkruppe> Put the thing that contains all the fields into the RwLock?
[11:51:56] <Mutabah> yorickpeterse: RwLock also provides the interior mutability
[11:52:27] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[11:52:37] <yorickpeterse> rkruppe: the fields are part of a struct, I can't really wrap the struct in an RwLock from within itself
[11:52:37] <snow> Could you use Mutex<()> ?
[11:52:50] <yorickpeterse> unless I can do RwLock::new(&self)
[11:52:57] *** Quits: Chaos`Eternal (chaos@moz-ck0k18.compute-1.amazonaws.com) (Quit: Leaving)
[11:53:30] <rkruppe> You can have struct TheInterestingFields { ... } and then in your actual struct have RwLock<TheInterestingFields> plus whatever else doesn't need to be synchronized
[11:53:54] <yorickpeterse> meh
[11:54:02] <yorickpeterse> blegh, I'll just wrap the fields in a RwLock
[11:54:42] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[11:54:42] <meh> http://sprunge.us/YJWS?rust what am I doing wrong?
[11:56:15] <rkruppe> meh: Type aliases are second class citizen right now, some things (such as what you're doing) don't work through them
[11:56:31] <meh> rkruppe, what should I do instead?
[11:56:37] *** Quits: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP) (Ping timeout: 121 seconds)
[11:56:38] <Ms2ger> Lock data, not code :)
[11:56:46] <rkruppe> If the surrounding code gives enough hints to the type inference, just super::Data::Error(error) should work
[11:56:57] <meh> rkruppe, cool, thanks
[11:57:04] <rkruppe> And because that's really ugly, maybe call your type alias something different and use Data for the generic enum
[11:57:25] *** Quits: mkpankov` (user@moz-r2v.70f.16.195.IP) (Ping timeout: 121 seconds)
[11:57:52] <rkruppe> Ms2ger: that's a nice way to put it
[11:58:44] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (Ping timeout: 121 seconds)
[11:59:01] <Ms2ger> (Not my quote, but I don't recall whose)
[11:59:02] <aatch> Woo, Ramp no longer crashes with certain numbers while dividing!
[11:59:38] *** Quits: ympu (Mibbit@moz-f9m.hgk.151.193.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:00:29] <Mutabah> aatch: Doing long divs now?
[12:01:21] <huon> aatch: \o/
[12:01:22] *** Quits: zyphrus (David@moz-1a4.urk.98.101.IP) (Ping timeout: 121 seconds)
[12:01:29] *** Joins: Lunatrius (Lunatrius@moz-mkv.hcu.38.77.IP)
[12:01:57] <huon> Ms2ger: rkruppe: I saw it in http://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html
[12:02:16] <aatch> Mutabah, I was before, I was just screwing something up along the way and violating one of the internal invariants.
[12:02:27] <Ms2ger> Yep, that's probably it
[12:02:31] <Ms2ger> aturon++
[12:02:57] <maikklein> Is it allowed to post SO question here?
[12:04:09] *** Joins: nott (nott@moz-to4.06o.57.86.IP)
[12:04:15] <icelesstea> Some people have strong opinions about "cross-posting", but go ahead.
[12:04:28] <rkruppe> aatch: Cool, that means I get to steal the long division code from you :P instead of transcribing it from Wikipedia when I eventually implement divmod in core::num::flt2dec::bignum
[12:04:30] <maikklein> https://stackoverflow.com/questions/30557152/is-it-possible-to-send-closures-via-channels
[12:05:09] <rkruppe> maikklein: Fn* are traits, not specific types
[12:05:19] <rkruppe> You also can't have a local variable of type FnOnce() or so
[12:05:38] *** Joins: flavius (flavius@moz-u9kqrk.graz.surfer.at)
[12:05:54] <kimundi> maikklein: Try removing the type hint from channel(), closures are their own annonymous types that just implement the FnOnce, FnMUt, etc traits
[12:05:55] <maikklein> What is the type of a closure then?
[12:05:57] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:06:04] <huon> unnamed
[12:06:09] <kimundi> maikklein: Each closure is a unique, unnameable type
[12:06:11] <huon> (well, unnameable)
[12:06:22] *** Quits: lenstr_ (lenstr@moz-37t.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[12:06:28] <rkruppe> And because you send several differen closures you'll probably have to box the closures, except that Box<FnOnce()> doesn't work I think?
[12:06:32] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[12:06:34] <rkruppe> In that you can't call it
[12:06:43] <maikklein> oh
[12:06:46] <kimundi> rkruppe: Well, in that code snipped its just one closure
[12:06:47] *** Joins: chippers_ (chip@moz-26d.2gk.254.199.IP)
[12:06:51] <kimundi> SO that would be fine
[12:06:59] <kimundi> They just can'T give a typehint for it
[12:07:10] <rkruppe> Oh yeah if it's only one that works
[12:07:13] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[12:07:14] <Hildar> Is it possible to do something like "for each foo in foos { bar = bar.chain(foo) }" rather than have to evaluate the iterator into a vec every time?
[12:07:16] <maikklein> but then rust complains that it doesn't know the type of 'f'
[12:07:20] <maikklein> src/main.rs:14:9: 14:10 error: the type of this value must be known in this context src/main.rs:14         f(&mut test);
[12:07:27] <rkruppe> But realistically you'll probably send different ones, right?
[12:07:47] <flavius> Is there any nice way of marking a function as "to do"? It returns an Option, currently it has a simple implementation of `None`, and I plan to implement it sometime in the future, but for now it clutters the output of cargo test with warnings, since I'm not using the method's parameters
[12:07:55] <kimundi> Hildar: Thats not possible, because the chain() adapater creates a new type that wraps the one it was called on.
[12:08:19] *** Quits: Hannibal_Smith (nico@moz-itj1vp.retail.telecomitalia.it) (Quit: Leaving)
[12:08:21] <rkruppe> flavius: Add a _ prefix to the parameter names
[12:08:25] <Hildar> kimundi: Yeah, that's what I guessed, there's no lazy way to evaluate types.
[12:08:43] <Mutabah> I think flat_map_ does that?
[12:08:45] *** Joins: mib_yj0w9s (Mibbit@moz-6i5.hi8.234.188.IP)
[12:08:47] <kimundi> maikklein: Okay, then... you can't do this. For rustc-is-stupid reasons, rather than good ones :P
[12:09:04] <flavius> rkruppe: thanks that did the trick
[12:09:15] <huon> kimundi: maikklein: it works if you move the send before the spawn
[12:09:18] <huon> (incidentally)
[12:09:25] <kimundi> interesting
[12:09:34] <kimundi> and completely non-intuitive :P
[12:09:47] <aldanor> Does anyone know where did std::path::AsPath go?
[12:09:49] <maikklein> oh wow okay
[12:09:54] <Mutabah> Hildar: Try flat_map
[12:09:55] *** Quits: chippers (chip@moz-26d.2gk.254.199.IP) (Ping timeout: 121 seconds)
[12:09:55] <Ms2ger> As<Path>
[12:10:08] <kimundi> aldanor: Replaced by the new generic As< > trait
[12:10:12] <mib_yj0w9s> Hi all! Does Rust have an equivalent to Python's itertools.product() ?
[12:10:16] <aldanor> Oh, that’s great. Thanks!
[12:10:30] <Mutabah> mib_yj0w9s: map?
[12:10:35] <aatch> mib_yj0w9s, maybe in our itertools?
[12:10:39] *** Quits: Blei (philipp@moz-8bktnt.cust.swisscom.ch) (Quit: WeeChat 1.2)
[12:10:41] <kimundi> mib_yj0w9s: Not in the std lib afaik, but there is a itertools cargo package that adds a bunch of adapters like product
[12:10:43] <aatch> !crate itertools
[12:10:44] <rustbot> itertools (0.3.11) - Extra iterator adaptors, iterator methods and macros. -> https://crates.io/crates/itertools
[12:10:49] *** Joins: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com)
[12:10:56] <aatch> !mib
[12:10:57] <rustbot> Hello, Mibbit user with a “mib_<random>” nickname. Please change your nickname to something less confusing by saying `/nick NEW_NAME_HERE`.
[12:10:57] *** Quits: chippers_ (chip@moz-26d.2gk.254.199.IP) (Ping timeout: 121 seconds)
[12:11:06] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[12:11:10] <mib_yj0w9s> Thanks!
[12:11:42] <Quxxy> maikklein: I tried this with FnBox, but the compiler complains that Send is not implemented for the closure type
[12:11:58] *** mib_yj0w9s is now known as ztor
[12:12:13] <Quxxy> http://is.gd/Q48kS3 if you want to play with it
[12:12:24] <Mutabah> Quxxy: Aah, welcome to OIBIT land 
[12:12:33] *** Joins: Layl (Layl@moz-65hqmf.direct-adsl.nl)
[12:12:45] *** Joins: tomprogrammer (thomas@moz-f6fdbb.tr5r.qept.4dd0.2001.IP)
[12:13:14] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[12:14:10] <aatch> huon, you might be interested in this: https://gist.github.com/Aatch/8cea53541fc10eee41a4
[12:14:13] <maikklein> Quxxy: As huon said it works if I remove the typehint and move the send before the recv like that http://is.gd/8ySE5q
[12:14:37] <Manishearth> Quxxy: http://is.gd/uMPOcQ
[12:14:38] *** Joins: zyphrus (David@moz-1a4.urk.98.101.IP)
[12:14:41] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[12:14:44] <maikklein> but it is super strange tbh
[12:14:49] <Quxxy> maikklein: Yeah, but *presumably* the reason for that is that now you have a channel that can send *exactly one closure*
[12:14:54] <Quxxy> Which is probably not very useful
[12:14:57] *** Joins: xcombelle (xcombelle@moz-o9pb7i.abo.wanadoo.fr)
[12:15:04] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[12:15:19] <aldanor> where could I find documentation on the As<> trait? It’s not a very googlable name, and searching for “trait:As: on api docs yields nothing except for AsRef and AsMut in std::convert
[12:15:33] <Quxxy> Manishearth: *blinks* Oh OF COURSE
[12:15:42] *** Quits: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:15:44] <Quxxy> maikklein: See Manishearth's link
[12:15:47] <maikklein> Quxxy: right, haven't thought about this
[12:16:15] <aatch> aldanor, there is no `As` trait.
[12:16:30] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[12:16:44] *** Joins: ray (ray@moz-m0g.t3f.66.59.IP)
[12:17:13] <Quxxy> maikklein, Manishearth : it works even better if you add `thread::sleep_ms(100);` to the end of `main`; then, you get output! :D
[12:17:25] <Quxxy> Manishearth: Do you want to post it as an answer to SO?
[12:17:44] *** Joins: lenstr (lenstr@moz-37t.vju.25.171.IP)
[12:18:04] *** Quits: joelpet (quassel@moz-eta24h.cust.bredbandsbolaget.se) (Connection closed)
[12:18:06] *** Joins: joelpet (quassel@moz-eta24h.cust.bredbandsbolaget.se)
[12:18:15] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[12:18:17] *** Quits: lenstr (lenstr@moz-37t.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[12:18:19] <Mutabah> aldanor: AsRef and AsMut
[12:18:20] *** Quits: playjax (chatzilla@moz-6ssl7m.optusnet.com.au) (Connection closed)
[12:18:21] <aldanor> sorry, I’m a bit lost then, what are we supposed to now in place of AsPath bound
[12:18:23] *** Quits: hohoho (hohoho@moz-jqco1f.pools.vodafone-ip.de) (Quit: Leaving)
[12:18:28] <Quxxy> AsRef<Path>
[12:18:29] <mindtree> Quxxy: have you considered putting together an rfc for anonymised types?
[12:18:38] <mindtree> return types*
[12:18:39] <aldanor> Oh, so, it’s AsRef<Path>
[12:18:47] <Quxxy> No, there was one written a while back by... Niko, maybe?
[12:18:56] <mindtree> Quxxy: aturon I think
[12:18:58] <rkruppe> By aturon 
[12:19:03] <Manishearth> Quxxy: you go ahead :)
[12:19:06] <Quxxy> Doesn't seem to be much point since if I *did*, it would just be a copy+paste of *that*
[12:19:21] <mindtree> Quxxy: that's ok! :D
[12:19:27] <rkruppe> No, that old RFC contained a lot of extra stuff that might have been nice in theory but caused a lot of controversy
[12:19:29] *** Joins: mcarton (martin@moz-bc9qs9.abo.wanadoo.fr)
[12:19:33] <mindtree> Quxxy: it would be on the table again haha
[12:19:35] <rkruppe> I think it's better to focus only on *return* types
[12:19:55] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Connection closed)
[12:19:55] *** Joins: larhat2 (Adium@moz-vlo5br.cable.virginm.net)
[12:20:08] *** Quits: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[12:20:17] *** Joins: sasha (sasha@moz-ob8cdt.net.t-com.hr)
[12:21:09] *** Quits: ztor (Mibbit@moz-6i5.hi8.234.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:21:42] *** Joins: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp)
[12:22:14] <Manishearth> Quxxy: yeah but I'm too lazy to do it now :p
[12:22:17] <Manishearth> go ahead and steal it
[12:22:30] <mindtree> you could both team up!
[12:22:37] <Quxxy> Typing it up now :P
[12:22:40] <mindtree> I would cheer!
[12:22:45] <mindtree> \o/
[12:23:59] *** Quits: ErikPragt (Mibbit@moz-f70m7c.static.versatel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[12:24:42] <Hildar> How do I write a closure that has a lifetime parameter? ( |&'a s| s.foo()) is invalid syntax...)
[12:25:03] <Mutabah> Hildar: Why does it need such a param?
[12:25:42] <Quxxy> `for<'a> |s: &'a TypeOfS| s.foo()`, assuming that `|s| s.foo()` doesn't work
[12:27:38] *** Quits: h-d (Mibbit@moz-3c7.vjp.98.101.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:27:47] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[12:28:03] *** Joins: mindcat (mindcat@moz-s43.01v.90.113.IP)
[12:28:31] *** Quits: nodweber (nodweber@moz-1no.d7a.3.149.IP) (A TLS packet with unexpected length was received.)
[12:28:37] <Hildar> Mutabah: Because I'm bad at arguing with the borrow checker :(
[12:29:05] <Hildar> Quxxy: Thanks, soves my question (but not my problem, because I think I'  doing things the wrong way.)
[12:30:34] <kimundi> Quxxy: Wait, thats a legal expression?
[12:30:40] <mindcat> when I put a NBTTag in HashMap, then I get the NBTTag. Question is, how to restore the NBTTag type infomation and get the content? code: http://is.gd/4K0jnx
[12:30:59] <kimundi> playbot: (for<'a> |x: &'a u8| *x)(&10)
[12:31:00] -playbot- <anon>:9:13: 9:14 error: unexpected token: `<`
[12:31:00] -playbot- <anon>:9         (for<'a> |x: &'a u8| *x)(&10)
[12:31:00] -playbot- output truncated; full output at: http://bit.ly/1SJDWoC
[12:31:03] *** Joins: Douman (Douman@moz-vg292c.dynamic.mts-nn.ru)
[12:31:16] *** Joins: mib_zvt96p (Mibbit@moz-8te.mss.98.101.IP)
[12:31:33] <kimundi> Hm, apparently not...
[12:31:45] *** Quits: maikklein (Mibbit@moz-5p0kf7.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[12:32:07] *** Joins: Guest96 (textual@moz-nuk.4qd.78.110.IP)
[12:32:10] <mindcat> it is rust compiler limits?
[12:33:00] <Quxxy> Hmmm
[12:34:13] <mib_zvt96p> Hi guys, whats the irc for help with rust? is this it?
[12:34:41] <Mutabah> mib_zvt96p: yes
[12:34:45] <Mutabah> !mib @ mib_zvt96p 
[12:34:45] <rustbot> mib_zvt96p: Hello, Mibbit user with a “mib_<random>” nickname. Please change your nickname to something less confusing by saying `/nick NEW_NAME_HERE`.
[12:34:46] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[12:35:27] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[12:35:32] * kimundi thinks the ! mib thing is a bit borderline annoying and not really necessary
[12:35:38] <Quxxy> kimundi: Hildar: http://is.gd/FBrdTe - I couldn't get it working *on* the closure literal
[12:35:43] <Mutabah> kimundi: Kinda yeah
[12:35:52] <Quxxy> I used the same trick in cargo script to ensure closures were correctly typed
[12:35:55] <Mutabah> kimundi: But as soon as we get two people...
[12:35:55] *** mib_zvt96p is now known as topher
[12:36:06] <topher> hmm
[12:36:13] *** topher is now known as topher2312w341
[12:36:15] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[12:36:36] <Quxxy> How do you know that isn't really his name?
[12:36:41] *** Joins: alk (alk@moz-ca9n1r.3a32.t5om.0e34.2a01.IP)
[12:36:48] <kimundi> lol
[12:36:51] <Quxxy> *Maybe* his parents are really, really weird
[12:37:02] *** Quits: esgeh (sg@moz-0kil93.dyn.telefonica.de) (Quit: Leaving.)
[12:37:06] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[12:37:16] <Quxxy> I mean, *I'm* named after a meta-syntactic variable
[12:37:41] <kimundi> No, but seriously, topher2312w341, any questions? This is definitely the Rust-ask-newbie-questions channel :)
[12:37:53] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:38:25] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[12:38:55] *** Joins: fikusz (fikusz@moz-cnn6sk.catv.broadband.hu)
[12:39:03] *** Joins: Altazimuth (Altazimuth@moz-rb7u6p.skybroadband.com)
[12:40:17] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[12:40:56] *** Joins: O01eg (o01eg@moz-grusqb.5ej6.3egh.2698.2a02.IP)
[12:41:02] <fikusz> how can I get the length of an array I defined like this? let xs: [u8] = [1,2,3,4]
[12:41:18] *** Joins: ToxicFrog (ben@moz-pj6h93.dsl.teksavvy.com)
[12:41:25] <kimundi> fikusz: .len(), though you can not define an array like this
[12:41:36] <ToxicFrog> Is it possible to apply #[no_mangle] to all extern fns in a file rather than annotating each one individually?
[12:41:37] <kimundi> since you can not have a [T] on the stack
[12:42:00] <kimundi> ToxicFrog: No build-in way to make it mass apply
[12:42:10] <Quxxy> fikusz: let xs: &[u8] = &[1,2,3,4]; xs.len()
[12:42:29] <kimundi> Though theoretically possible to do with compiler plugins, but those are unstable, so...
[12:42:31] <Quxxy> Unless you want to use [u8; 4] = [1, 2, 3, 4]
[12:42:45] <ToxicFrog> kimundi: I'll just annotate each one, then
[12:42:46] <fikusz> Quxxy: ok, thanks. what's the difference?
[12:43:12] *** Joins: topher12311 (topher12311@moz-8te.mss.98.101.IP)
[12:43:16] <Quxxy> One is a stack-allocated array of four u8s, the other is a pointer... to a stack-allocated array of dynamic size
[12:43:16] *** Quits: topher2312w341 (Mibbit@moz-8te.mss.98.101.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:43:41] <topher12311> hwo do you make dynamic arrays?
[12:43:54] <Quxxy> topher12311: Use Vec
[12:43:58] <kimundi> fikusz: [T] is a slice, its size is not known at compiletime, and hence you can not have it in a variable directly. pointer indirection is fine though, hence the &[T]. [T; N] is an array of length N, and you can convert a pointer to an array into an pointer to a slice.
[12:44:05] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[12:44:08] <topher12311> ty
[12:44:59] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[12:45:02] *** rkruppe_ is now known as rkruppe
[12:46:23] <fikusz> kimundi: ok, thanks. this means even though the array has a known & fixed size and I specify the elements in the source code at compile-time, I have to count them myself in order for this to be a fixed-sized array?
[12:46:56] <kimundi> fikusz: uhm... Not sure what you mean
[12:47:33] *** Quits: p32blo (p32blo@moz-305o0v.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[12:47:38] <fikusz> kimundi: can't rust infer the length of the array from the elements I specified?
[12:47:45] *** Quits: Guest96 (textual@moz-nuk.4qd.78.110.IP) (Quit: Textual IRC Client: www.textualapp.com)
[12:48:08] <kimundi> [T; N] has the size as part of the type, its constant. [T] stores the size as part of the pointer that points at it, which means it needs to be read at runtime. In both cases the .len() method willr eturn that value though
[12:48:17] <kimundi> fikusz: Sure
[12:48:23] <kimundi> fikusz: Just don'T give a tyoe hint
[12:48:35] <kimundi> playbot: let x = [1, 2, 3, 4]; x.len()
[12:48:36] -playbot- 4
[12:48:49] <kimundi> ^ That infers x to be a [i32; 4]
[12:49:11] <fikusz> kimundi: ok, how do I specify I want an u8 array?
[12:49:15] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[12:49:21] <fikusz> let x = [1u8, ...]?
[12:49:22] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[12:49:49] <kimundi> fikusz: Thats one way
[12:50:17] <kimundi> fikusz: Another way is to just use the array with something that wants a u8 explicitly, so that it infers it+
[12:50:27] <Quxxy> fikusz: Basically, you *want* to be able to say `[u8; _]`, but you're not allowed to
[12:50:31] *** Joins: Wild_Cat (Max@moz-2clr66.dsl.teksavvy.com)
[12:50:34] <kimundi> playbot: let x = [1, 2, 3, 4]; let y = x[0]; y
[12:50:36] -playbot- 1
[12:50:42] <Quxxy> So as long as find some way to constrain the element type to `u8` *without* having to say the actual array type, you're fine
[12:50:44] <kimundi> ^ That infers x to be a [u8; 4]
[12:50:48] <kimundi> err
[12:50:52] <kimundi> playbot: let x = [1, 2, 3, 4]; let y: u8 = x[0]; y
[12:50:53] -playbot- 1
[12:50:59] <kimundi> ^ _That_ infers x to be a [u8; 4]
[12:51:23] <fikusz> Quxxy: yes, basically partial type signatures would have been what I wanted here
[12:52:04] <kimundi> fikusz: Rusts typesystem does not know how to be generic over the length of an array, so you can'T manipulate the N in any way like you can types, sadly
[12:52:26] <kimundi> fikusz: [_, 4] works for example, but the otherway round... nope
[12:52:44] <kimundi> (That something that will likely be fixed in a future version though)
[12:53:58] *** Joins: ncarrillo (textual@moz-mke7jn.cable.rcn.com)
[12:54:12] <fikusz> kimundi: ok, not a big problem I think. thanks :)
[12:57:03] <topher12311> thank god, rust has escape characters :D,
[12:57:06] <topher12311> str::from_utf8(&buf).unwrap().trim_matches('\0')
[12:58:26] *** Joins: tschottdorf (tobias@moz-d021av.aipg.hajb.2000.2604.IP)
[12:58:44] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[13:01:05] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[13:01:12] *** Joins: }ls{ (uhelp@moz-nak74f.dip0.t-ipconnect.de)
[13:01:15] *** Joins: Gamecubic (cubic@moz-bglmk5.mc.videotron.ca)
[13:01:41] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[13:02:29] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[13:02:38] *** Quits: mujou (mujou@moz-rko6lo.ocn.ne.jp) (Ping timeout: 121 seconds)
[13:02:51] *** Quits: JanC (janc@moz-qi5m1k.dial.scarlet.be) (Ping timeout: 121 seconds)
[13:03:17] *** Joins: p32blo (p32blo@moz-305o0v.cpe.netcabo.pt)
[13:03:33] *** Joins: idegen (greg@moz-9c4nle.or.frontiernet.net)
[13:03:50] *** Joins: edward-san (Edward`san@moz-2dl.61u.237.95.IP)
[13:05:01] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[13:06:20] *** Quits: sasha (sasha@moz-ob8cdt.net.t-com.hr) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:06:26] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[13:06:31] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[13:06:43] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[13:07:01] <Hildar> I spend ages trying to do something in rust, fighting with the borrow checker, and then when I solve it it's like 2 lines...
[13:07:07] <Hildar> Gah.
[13:07:39] *** Joins: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de)
[13:08:21] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[13:08:34] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (A TLS packet with unexpected length was received.)
[13:09:02] *** Joins: _ixti_ (ixti@moz-i3d.dae.119.188.IP)
[13:10:55] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[13:10:57] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[13:11:26] <flavius> what are the rationale for closing the mailing list? Good old rusty hackers are used to MLs.
[13:11:35] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[13:11:53] *** Joins: sasha (sasha@moz-ob8cdt.net.t-com.hr)
[13:12:02] *** Quits: larhat2 (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[13:12:03] *** Joins: sayan (sayan@moz-ir4.s39.227.223.IP)
[13:13:52] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[13:13:59] <edward-san> the code provided in http://rosettacode.org/wiki/File_input/output#Rust doesn't compile at all. I guess that was written much before Rust 1.0
[13:14:06] *** Quits: mcarton (martin@moz-bc9qs9.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[13:14:55] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[13:15:19] *** Joins: tincan (tincan@moz-05q.1nm.133.145.IP)
[13:15:22] *** Joins: mujou (mujou@moz-rko6lo.ocn.ne.jp)
[13:15:52] <Ms2ger> Quite
[13:15:55] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Ping timeout: 121 seconds)
[13:15:56] *** Joins: JanC (janc@moz-gra23c.dial.scarlet.be)
[13:16:18] * Ms2ger has a look
[13:16:39] <Quxxy> If I have a &Box<Trait>, should I be able to pass that to an argument of type &Trait implicitly?
[13:17:04] <Quxxy> Or do implicit deref coercions only work for sized types?
[13:17:12] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[13:17:24] <edward-san> I tried this: http://pastebin.com/1Ppek8qy , but doesn't work.
[13:18:10] <kimundi> Quxxy: In theory it should work implicitly
[13:18:11] <edward-san> I wonder what 'Path' is.
[13:18:21] <Quxxy> kimundi: Doesn't appear to, unless I'm doing something wrong
[13:18:33] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[13:18:36] <kimundi> what error message do yxou get?
[13:18:48] <Quxxy> the trait `NbtNode` is not implemented for the type `&Box<NbtNode>` [E0277]
[13:18:58] <kimundi> Ah
[13:19:07] <rkruppe> edward-san: Path exists, but it's something different now. Back when that code was written, "Path" meant what "PathBuf" means today
[13:19:11] <kimundi> Quxxy: Is the function you try to pass that to generic over the argument?
[13:19:16] <Quxxy> No
[13:19:17] <topher12311> just getting into threading, whats 'move' in this code "thread::spawn(move || {});"
[13:19:21] <aatch> Deref coercions don't play well with trait bounds.
[13:19:30] <Quxxy> I'm dealing with trait objects
[13:19:35] <kimundi> Quxxy: What is the signature?
[13:19:39] <aatch> Same with trait objects.
[13:19:42] <Quxxy> fn identify(node: &NbtNode)
[13:19:52] <kimundi> Hum
[13:20:00] <aatch> Basically, we don't consider multiple coercions at once right now.
[13:20:05] <kimundi> I'D expect that to have autoderef applied
[13:20:06] <Quxxy> Ok
[13:20:32] <aatch> kimundi, you would, but you'd be wrong. I don't think it's intentional, but it's a known issue (known to me anyway).
[13:20:38] <kimundi> aatch: I mean this is just &Box<T> -> &T, which works elsewhere, no?
[13:21:16] <aatch> kimundi, sure, but we try the trait-object coercion first, and then error when it fails.
[13:21:25] *** Joins: oal (oal@moz-0lm.qc2.255.130.IP)
[13:21:29] *** Quits: zyphrus (David@moz-1a4.urk.98.101.IP) (Quit: Bye bye)
[13:21:30] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[13:21:40] <kimundi> Well, I would also not be surprised if the impl treats trait objects wildly different than other types, but still.... weird.
[13:21:40] *** Quits: ncarrillo (textual@moz-mke7jn.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:21:48] <kimundi> aatch: Ah! Okay that makes sense
[13:22:05] <rkruppe> Trait-object coercion as in turning Box<NbtNode> into NbtNode?
[13:22:10] <kimundi> yep
[13:22:11] *** Quits: Wild_Cat (Max@moz-2clr66.dsl.teksavvy.com) (Connection closed)
[13:22:26] *** Joins: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl)
[13:22:30] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[13:22:34] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[13:22:35] <aatch> rkruppe, more like turning &ImplementsTrait into &Trait
[13:23:09] <rkruppe> Yeah that's what I meant but I wanted to use the specific types in question and with &s that would have been ambiguous
[13:23:24] <rkruppe> Different coercions doing different things but the types match up
[13:24:15] <SneakySnake> edward-san: I updated the example. http://rosettacode.org/wiki/File_input/output#Rust
[13:24:52] *** Quits: pyon (pyon@moz-no9.411.236.190.IP) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[13:25:03] <edward-san> whoo! much shorter and cooler than before! :)
[13:26:05] *** Quits: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl) (Connection closed)
[13:27:39] <kimundi> burntsushi: ping
[13:27:46] *** Joins: amstrad (chatzilla@moz-74sft8.xnet.co.nz)
[13:27:49] *** Joins: emk- (mk@moz-v8jscg.dynamic.chello.pl)
[13:27:55] <emk-> hello
[13:28:45] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[13:28:54] <emk-> does anybody track API changes, so I can fix old rust lib to work with 1.0.0 ?
[13:29:17] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[13:29:20] <emk-> I'm new to rust, so I don't know what became what over time
[13:29:30] <edward-san> SneakySnake, is it there a way to report "files does not exist" instead of panicing?
[13:29:41] <aldanor> is it possible to put a macro_rule behind #[cfg(test)]
[13:29:46] <edward-san> *file 'input.txt' does not exist
[13:29:54] <SneakySnake> edward-san: Yes
[13:29:54] <aldanor> it still seems to throw a compilation error even if it’s only used in #[test] functions
[13:30:29] *** Quits: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[13:30:39] *** Joins: aravindavk (aravinda@moz-584.dgk.167.122.IP)
[13:30:40] <aatch> emk-, not really, depending on how old the lib is, the language may have changed drastically.
[13:30:49] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[13:30:55] <Quxxy> mindcat: Ah, I thought I recognised your name on the subreddit :P
[13:30:58] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[13:30:58] *** rkruppe_ is now known as rkruppe
[13:31:37] *** Joins: mcarton (martin@moz-paoud4.abo.wanadoo.fr)
[13:31:45] <emk-> aatch: it's rust-fcgi, last release was for 1.0alpha, so probably it needs fixing in a few places
[13:32:11] *** Quits: nott (nott@moz-to4.06o.57.86.IP) (Ping timeout: 121 seconds)
[13:32:42] *** Quits: JuggleTux (tux@moz-ho0t1f.adslplus.ch) (Connection closed)
[13:32:43] <aatch> emk-, there's no list of changes at any rate.
[13:33:29] <emk-> that's not good :(
[13:33:30] <SneakySnake> edward-san: http://is.gd/sazBkW
[13:34:12] <emk-> is #[deriving(Copy)] now #[derive(Copy)] ?
[13:34:47] <SneakySnake> emk-: Yes
[13:35:00] <emk-> thx
[13:35:00] *** Quits: sag47 (sam@moz-v0fpfq.pa.comcast.net) (Connection closed)
[13:35:04] <SneakySnake> emk-: You also need to #derive Clone if you are deriving Copy
[13:35:07] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Quit: Leaving)
[13:35:09] <SneakySnake> derive/implement
[13:35:11] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[13:35:40] <edward-san> what the ... the code appears in one line and seems to make no sense
[13:35:43] <edward-san> so weird
[13:35:53] *** Joins: sag47 (sam@moz-v0fpfq.pa.comcast.net)
[13:36:34] <SneakySnake> edward-san: The link I sent you? It should look like this: http://is.gd/sazBkW - What browser are you using?
[13:36:39] <SneakySnake> uHH
[13:36:46] <edward-san> ah, it happens because of noscript and XSS
[13:36:49] <SneakySnake> It should look like this: http://i.imgur.com/qsR0ia9.png 
[13:37:02] <emk-> would this be correct: ffi::CString::from_slice -> ffi::CString::to_owned  ?
[13:37:20] *** Joins: dwrensha (chatzilla@moz-46o4hi.pa.comcast.net)
[13:37:36] <Mutabah> emk-: Converting old code? Probably more CStr::to_owned
[13:37:52] <edward-san> SneakySnake, yeah it works if I disable cross XSS detection
[13:38:05] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[13:38:12] <emk-> Mutabah: yep, converting old, not mine code, so i'm kinda lost
[13:40:25] *** Joins: joeyjoejoejr (jbdietrich@moz-ph5.jg7.239.216.IP)
[13:45:19] <edward-san> mmm, does it exist a way to 'exit' the program without panicing?
[13:45:39] *** Joins: dstrbad (dstrbad@moz-7et536.dsl.iskon.hr)
[13:46:19] *** Joins: psd_ (psd@moz-asbha3.mtnl.net.in)
[13:46:35] <Mutabah> edward-san: yes, in std::process iirc
[13:46:51] *** Quits: yorickpeterse (yorickpeter@moz-kpg9ml.compute.amazonaws.com) (Quit: WeeChat 1.0.1)
[13:48:48] *** Parts: mcarton (martin@moz-paoud4.abo.wanadoo.fr) ()
[13:49:29] *** Quits: nekun (Mibbit@moz-f70m7c.static.versatel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[13:49:33] *** Quits: psd (psd@moz-2uiqg7.mtnl.net.in) (Ping timeout: 121 seconds)
[13:50:04] *** Joins: andars (andars@moz-bsldst.sntcca.sbcglobal.net)
[13:50:49] *** Joins: F1skr (moscar@moz-e9439o.cpe.webspeed.dk)
[13:50:49] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[13:50:50] <edward-san> oh, thanks
[13:50:52] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[13:51:44] *** Quits: Stylez (Stylez@moz-60nu73.fios.verizon.net) (Ping timeout: 121 seconds)
[13:51:47] *** Joins: modulus (chatzilla@moz-8mpjls.dynamic.mundo-r.com)
[13:52:52] <modulus> Hi hi, rust. Any suggestions on using rust to create GUI programs on windows? Suggestions like "that is a stupid idea" cheerfully accepted, if it is.
[13:53:58] <Quxxy> modulus: I can't think of any reason you *couldn't*... but I suppose it depends on finding a toolkit
[13:54:02] <heftig> modulus: i think there are some gtk bindings floating around; no idea how well they work on windows, or in general
[13:54:36] <modulus> Hmm, I was hoping to use the win32 GUI components because of accessibility reasons. Foreign toolkits tend to completely break a11y.
[13:55:00] <topher12311> i was just looking at gui on rust, Cargo has a library called conrod
[13:55:50] <topher12311> https://crates.io/crates/conrod
[13:55:53] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[13:55:58] <Mutabah> modulus: There is a winapi crate
[13:56:17] <modulus> Hmm, winapi sounds promising.
[13:56:22] *** Quits: dstrbad (dstrbad@moz-7et536.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[13:56:31] <Quxxy> It isn't.  That means writing Win32 UI code
[13:56:52] <modulus> iirc conrod uses direct mode, which means (likelihood >90%) it will not provide a11y layer.
[13:56:57] <Quxxy> If you *do* end up doing it, may I suggest you set up a keyboard macro that types "unsafe"; you're gonna need it :P
[13:56:59] <topher12311> if you are a beginner winapi is not the way to go. besides there are better gui librarys out there
[13:57:01] <DarkFox> Comparing mio with the select! macro... Is select polling while mio is waiting for an interrupt (putting the thread to sleep as it waits)?
[13:57:02] <edward-san> mmm, I don't understand what's going on here: http://pastebin.com/A9efSn3K
[13:57:05] *** Joins: tyrion-mx (tyrion@moz-0elh7o.nos-oignons.net)
[13:57:07] <VShell> edward-san: and you can always just return from main. using std::process::exit() *probably* isn't the greatest idea 99% of the time... just bubble your error back up (wrapping it in more generic errors as necessary), give everything a chance to release resources safely if you can, you'll thank yourself later. there's been more than a handful of times when someone wanted to turn some program or other into a library or a daemon and had to strip out all the 
[13:57:08] *** Quits: CMCDragonkai (nobody@moz-v01.321.218.216.IP) (Connection closed)
[13:57:09] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[13:57:20] *** Joins: CMCDragonkai (nobody@moz-v01.321.218.216.IP)
[13:57:37] <modulus> Quxxy: - ok, so clearly this is not a particularly good affordance for the language. I'll stay away from it until I level up.
[13:57:46] <Quxxy> :P
[13:57:46] <mindtree> wish I could search `all types that implement Trait<SomeType>`
[13:57:50] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[13:58:19] <Quxxy> edward-san: It's because you're *moving* fileopenresult into the match, then dropping it
[13:58:29] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[13:58:58] <Quxxy> The easiest thing to do is probably to change 16/17 to: let fileopenresult = match fileopenresult { / Ok(f) => f,
[13:59:17] <modulus> topher12311: - better is relative. If they have to be usable with a windows screen reader the real alternatives are the win32 widgets and wx.
[13:59:31] <Quxxy> Personally, I'm rather fond of using a `fn try_main() -> Result<(), Error>`
[13:59:41] <Quxxy> Then defining a program-wide Error type that just subsumes everything else
[13:59:55] <Quxxy> Then you can just use try! just about *everywhere*
[13:59:57] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[14:01:02] *** Joins: ChrisPls (Mibbit@moz-ou1.3i1.67.138.IP)
[14:03:37] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (A TLS packet with unexpected length was received.)
[14:04:01] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[14:04:37] <edward-san> so I managed to solve it with this: http://pastebin.com/XtkpF1i8
[14:04:55] <edward-san> though I miss 'return 1;' syntax
[14:05:38] *** darkowlzz|afk is now known as darkowlzz
[14:05:51] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[14:05:54] *** Joins: moerk (christian@moz-00ceea.customer.tdc.net)
[14:06:15] *** Joins: filsmick_ (filsmick@moz-4m50il.abo.wanadoo.fr)
[14:06:19] *** Quits: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net) (Ping timeout: 121 seconds)
[14:07:01] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[14:07:07] *** Quits: topher12311 (topher12311@moz-8te.mss.98.101.IP) (Quit: Nettalk6 - www.ntalk.de)
[14:07:57] *** Quits: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[14:08:33] *** Quits: tyrion-mx (tyrion@moz-0elh7o.nos-oignons.net) (Ping timeout: 121 seconds)
[14:09:01] *** Joins: alaska (alaska@moz-kbn.7vr.117.98.IP)
[14:09:37] *** Joins: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net)
[14:10:20] <SneakySnake> edward-san: Note that destructors do not get run when you exit with process::exit()
[14:10:22] *** darkowlzz is now known as darkowlzz|afk
[14:11:03] *** Joins: tyrion-mx (tyrion@moz-7v49kj.rana.at)
[14:11:04] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[14:11:17] *** Parts: moerk (christian@moz-00ceea.customer.tdc.net) ("")
[14:11:19] *** Quits: flacko (chatzilla@moz-252.vp3.60.78.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0/20150511103818])
[14:11:39] *** Joins: ajhager (aajhager@moz-nup.41a.156.12.IP)
[14:13:43] *** Joins: survi (philip@moz-pbmbkg.dip0.t-ipconnect.de)
[14:13:50] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[14:13:58] *** Quits: alaska (alaska@moz-kbn.7vr.117.98.IP) (Ping timeout: 121 seconds)
[14:14:34] <ChrisPls> Why don't destructors run when you exit with process::exit()?
[14:14:39] <Quxxy> edward-san: You can do something like this: https://github.com/DanielKeep/cargo-script/blob/master/src/main.rs#L82-L101 (exit is only called from main, to avoid problems with not running destructors)
[14:14:49] *** Joins: yymoto2 (yymoto2@moz-ohb.t9m.192.14.IP)
[14:15:01] <Quxxy> edward-san: The error type being used is here, for reference: https://github.com/DanielKeep/cargo-script/blob/master/src/error.rs
[14:15:29] <Quxxy> The idea is that MainError unifies nearly every other kind of error into itself
[14:15:46] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:15:50] <Quxxy> Then, main acts as a catch-all for any errors that aren't handled further in
[14:16:13] <Quxxy> (If you're feeling lazy, you can just do `try_main().unwrap()`)
[14:17:25] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[14:17:26] <edward-san> 'result @ Err(..)' seems new to me
[14:17:50] <Quxxy> If the value matches the pattern `Err(..)`, the value is bound to `result`
[14:17:52] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[14:17:58] <SneakySnake> edward-san: http://is.gd/W0Zehb
[14:18:13] <SneakySnake> This way you can exit with a custom status and have destructors run
[14:18:17] *** Joins: Hannibal_Smith (nico@moz-itj1vp.retail.telecomitalia.it)
[14:21:40] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[14:22:05] <SneakySnake> I personally wouldn't mind a main() -> i32 variant of main
[14:22:36] <Quxxy> SneakySnake: Except, it's not really i32, is it?
[14:22:50] <SneakySnake> What is it then?
[14:22:51] <Mutabah> On unix it's i8 iirc
[14:22:54] <Quxxy> I vaguely recall that either Windows or some *nix does weird things when the value is outside u8
[14:23:22] <SneakySnake> C uses int, which is the closest thing to i32 in Rust
[14:23:29] <SneakySnake> And process::exit() also takes i32
[14:23:51] <Quxxy> "Because C does it" is a *terrible* reason :P
[14:24:24] <Quxxy> It'd be neat (though probably infeasible) to let `main` return any type that implements some sort of MainResult trait
[14:24:51] <Quxxy> Maybe with `fn unwrap_exit_code(self) -> i8`
[14:24:59] <SneakySnake> If i8 is the lowest common denominator, then so be it
[14:25:04] *** Joins: nickniko_ (nicknikolov@moz-27s.0d8.214.90.IP)
[14:25:13] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[14:25:15] <SneakySnake> But still a main() -> IntegerType would be neat
[14:25:19] *** Quits: yymoto2 (yymoto2@moz-ohb.t9m.192.14.IP) (Quit: leaving)
[14:25:44] *** Quits: ajhager (aajhager@moz-nup.41a.156.12.IP) (Ping timeout: 121 seconds)
[14:25:49] <edward-san> can't be possible to play safe and use i32? :(
[14:25:57] *** Joins: codec (Mibbit@moz-325m1f.abo.wanadoo.fr)
[14:26:02] <codec> hi
[14:26:07] <SneakySnake> Most shell utilities output an error message to stderr and exit with a nonzero exit status when there is an "expected" error
[14:26:08] <edward-san> maybe some os would try to use exit codes bigger than 18
[14:26:11] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Ping timeout: 121 seconds)
[14:26:15] <SneakySnake> It would be nice if you could do this conveniently in Rust
[14:26:18] <edward-san> *i8
[14:26:39] <codec> I got a newbie question
[14:26:43] <SneakySnake> Showing a panic message only confuses the end-user of your program
[14:26:58] <codec> What is the rust data structure of a sorted map where we can have multiple value for the same key ?
[14:27:06] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[14:27:12] *** Joins: Guest22 (textual@moz-jt9juk.fibertel.com.ar)
[14:27:17] <Hildar> Is there a function that will ealuate an iterator (and ignore the result)?
[14:27:18] *** Joins: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl)
[14:27:27] <bluss> Hildar: you can use .count() for that
[14:27:29] *** Quits: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl) (Connection closed)
[14:27:35] <flavius> what are the rationale for closing the mailing list? Good old rusty hackers are used to MLs.
[14:27:43] <SneakySnake> e.g. Instead of "Invalid argument. See myutil --help.", you get "thread main panicked at "Invalid argument. See myutil --help"
[14:27:58] <bluss> codec: there is no multimap in the libstd, but it's not so hard to use a hashmap or btreemap with a vector value
[14:28:18] <Hildar> bluss: Hmm, I would have thought it would have existed. Count will do it though i guess.
[14:28:39] *** Joins: skade (skade@moz-q92odo.dynamic.kabel-deutschland.de)
[14:28:39] <codec> do you have any sample code to get me started ?
[14:28:43] <bluss> Hildar: count should do it perfectly, if you ignore that value I'm sure the counting is optimized out
[14:28:55] *** Joins: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt)
[14:29:12] <bluss> codec: hm I can only think of the .entry method used on maps to insert or update, that makes it easy
[14:29:40] *** Joins: ajhager (aajhager@moz-nup.41a.156.12.IP)
[14:30:01] <Hildar> bluss: Is there an equivlent of "(void)" to inform the linter that "I really do wish to ignre this result"?
[14:30:02] <bluss> codec: i.e. map.entry(key).insert_or_else(|| Vec::new()).push(value)   <-- fancy way to insert empty vec if needed, then just push to the key's vector
[14:30:06] *** Quits: skade (skade@moz-q92odo.dynamic.kabel-deutschland.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:30:06] *** Quits: survi (philip@moz-pbmbkg.dip0.t-ipconnect.de) (Client exited)
[14:30:08] <Hildar> *ignore
[14:30:20] <bluss> Hildar: yes that would be  let _ = <...>;
[14:30:24] <bluss> Hildar: by convention
[14:30:27] *** Joins: OxMLR (OxMLR@moz-19veku.res.rr.com)
[14:30:58] <Hildar> bluss: Excellent!
[14:31:14] *** Joins: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl)
[14:31:22] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[14:31:26] <bluss> codec: maybe there's a multimap floating around in the ecosystem
[14:31:37] *** Quits: joeyjoejoejr (jbdietrich@moz-ph5.jg7.239.216.IP) (Quit: Lost terminal)
[14:32:36] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[14:32:53] <codec> I didn't think of that
[14:33:06] <codec> I am checking crates.io
[14:33:34] <codec> so far I found a multimap implementation but it does not seem to support custom ordering
[14:33:50] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[14:33:56] <bluss> ah I don't think the libstd btreemap does that either. not yet.
[14:34:19] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[14:34:31] *** Joins: colinsurprenant_ (colin@moz-q9ee1n.74.electronicbox.net)
[14:34:51] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Ping timeout: 121 seconds)
[14:34:51] *** colinsurprenant_ is now known as colinsurprenant
[14:35:03] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:35:32] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[14:35:36] <codec> the more general problem i have is i am making a basic game with sdl2 and I need a way to order texture drawing
[14:35:42] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[14:36:44] *** Joins: wilfredh (uid159@moz-md9so9.brockwell.irccloud.com)
[14:36:46] <burntsushi> filsmick_: regex should compile fine on Rust stable.
[14:36:51] <codec> i think i can ge away with a vec and some custom data structure
[14:36:56] *** Joins: davebettin (textual@moz-ip635p.or.comcast.net)
[14:36:58] <burntsushi> kimundi: pong
[14:37:10] <filsmick_> burntsushi: oh, I figured it out by now. Removing regex_macros from my dependencies solved the issue 
[14:37:21] <burntsushi> bstrie: thanks :-)
[14:37:35] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[14:37:40] *** Quits: jacor (jacor@moz-aq6q4f.ant0.oo2o.0007.2601.IP) (Ping timeout: 121 seconds)
[14:37:43] *** Joins: jcaho_m (jacor_m@moz-vemspr.or.comcast.net)
[14:37:46] <bluss> codec: a binaryheap can have multiple values for the same sort key. But unfortunately it's not iterable in order (not without popping items off)
[14:37:47] *** Quits: jacor_m (jacor_m@moz-vemspr.or.comcast.net) (Ping timeout: 121 seconds)
[14:37:58] <burntsushi> filsmick_: ah. yes, in general, any `*_macros` crate won't compile on standard. (it is a naming convention we use when the crate contains a compiler plugin.)
[14:38:15] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[14:38:32] *** Joins: rouma (zack@moz-p8e0re.res.rr.com)
[14:38:40] *** Joins: azerupi (Mibbit@moz-543o5n.access.telenet.be)
[14:38:58] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[14:39:11] *** rkruppe_ is now known as rkruppe
[14:39:39] <Quxxy> SneakySnake: I've started using a `Blame` enum to distinguish between "tell the user about this" and "explode violently"
[14:39:50] <wilfredh> if I want to convert an iterator to a vector of the same type, it seems I have to use .cloned().
[14:39:59] <wilfredh> let bar: Vec<&str> = vec!["a", "b"].iter().collect(); // does not compile
[14:40:12] <wilfredh> why is this? It's probably something dumb I'm not getting.
[14:40:31] <Ms2ger> vec!["a", "b"].iter() iterates over & &str
[14:40:39] <Ms2ger> Try .into_iter()
[14:40:46] <Quxxy> wilfredh: It's because of ownership
[14:41:14] <bluss> they are general interfaces
[14:41:14] <nathan7> Quxxy: enum Blame { PEBKAC, … }
[14:41:31] *** Quits: azerupi (Mibbit@moz-543o5n.access.telenet.be) (Quit: http://www.mibbit.com ajax IRC Client)
[14:41:35] <bluss> wilfredh: The .iter() iterator of a Vec<T> has element type &T
[14:41:36] <Quxxy> nathan7: Well, enum Blame { Human, Internal }, but pretty much :P
[14:41:58] <Quxxy> Though I was tempted to make that second one "Myself"
[14:42:05] <kimundi> burntsushi: Hi, I wanted re-ask you a question about your unicode aware suffix array crate. Specifically, I've actually learned about how suffix trees/arrays work now, and I'm again wondering why you do special handling to keep singular characters together, and not just let the array split them up. :) It seems to me that if you can only ask the array "does this string appear somewhere in the text" or "give me all positions where this string 
[14:42:05] <kimundi> appears", then it doesn't matter if the array split codepoints up internally, since you can only query it for substrings with correct utf8 boundaries.
[14:42:13] <Quxxy> try!(Err((Blame::Myself, "shit's on fire, yo")))
[14:42:16] <edward-san> mmm, managed to do something with the main_try approach: http://pastebin.com/SRvq1962
[14:42:23] *** Quits: psy (psy@moz-u9b.hr7.224.43.IP) (Quit: Leaving)
[14:42:25] <edward-san> *try_main
[14:42:38] <Hukka> Anyone have an idea why the example use of https://github.com/unicode-rs/unicode-normalization doesn't work?
[14:42:49] <Hukka> error: unresolved import `unicode_normalization::UnicodeNormalization`. There is no `UnicodeNormalization` in `unicode_normalization`
[14:42:50] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[14:42:56] <wilfredh> bluss: oh, I see. The type here: https://doc.rust-lang.org/std/vec/struct.Vec.html#method.iter doesn't seem to suggest that the type is &T
[14:43:00] <wilfredh> am I looking at the wrong docs?
[14:43:07] <Hildar> What does the "scope of parameters for function" mean? Does that scope last till the end of the function?
[14:43:15] <Mutabah> Hildar: Yes
[14:43:26] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[14:43:28] <bluss> wilfredh: it doesn't tell it either way there
[14:43:40] <Quxxy> wilfredh: Click on "Iter" and you'll see, under "Trait Implementations": "impl<'a, T> Iterator for Iter<'a, T>" followed by "type Item = &'a T"
[14:43:52] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[14:43:52] <bluss> wilfredh: Iter is a specific struct, you have to look at what Iter's implementation of the Iterator trait says
[14:43:59] *** nsm|away is now known as nsm
[14:44:01] <Quxxy> In other words, given Iter<T>, it produces a sequence of &Ts
[14:44:07] *** nsm is now known as nsm|away|away
[14:44:17] <burntsushi> kimundi: hmm. i have to think about it.
[14:44:18] <bluss> wilfredh: IMO, the method .iter() should say explicitly in its docs
[14:44:24] <Hildar> Mutabah: Huh? So I'm borrowing something, and immediately ending the borrow, and rustc is complaining that it won't live past the end of the function...
[14:44:49] *** Quits: daze (daze@moz-tc29eq.static.zebra.lt) (Connection closed)
[14:45:25] <bluss> Hildar: are you borrowing a value that doesn't live after the function has returned? I.e. a local variable
[14:45:44] <kimundi> burntsushi: Sure. :) Its just something that's been confusing me. I might also simply misunderstand what unicode awareness checks you do where, though.
[14:45:46] <burntsushi> kimundi: i can't think of a rebuttal!
[14:45:57] <burntsushi> kimundi: so you may be right... wow.
[14:46:00] <bluss> Hildar: hm how are you borrowing it?
[14:46:03] *** Joins: andresv (textual@moz-kvanfr.dyn.estpak.ee)
[14:46:45] <kimundi> burntsushi: heh, I'll only believe that after you put more thought into it :)
[14:46:59] <wilfredh> bluss: agreed, I'll open a bug proposing a docs change. Thanks :)
[14:47:15] <Hildar> bluss: I'm borrowing a function parameterbyt calling iter_mut() on it. But the borrow shouldn't outive the function. (If I do the same thing in a while{} block as opposed to a function it works, so there's something subtle I'm missing)
[14:48:06] <bluss> wilfredh: “The iterator's element type is `&T`” is what itertools does for its methods
[14:48:13] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[14:48:34] <bluss> Hildar: ah ok, do you want to show the code snippet?
[14:48:56] *** Quits: aravindavk (aravinda@moz-584.dgk.167.122.IP) (Ping timeout: 121 seconds)
[14:49:00] *** Quits: andresv (textual@moz-kvanfr.dyn.estpak.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:49:09] *** Joins: Morten (Morten@moz-o0hr4o.bb.online.no)
[14:49:13] <burntsushi> kimundi: i think the way UTF-8 is defined does indeed make your idea work. wow, now i can't wait to try it out.
[14:49:22] <kimundi> haha :D
[14:49:33] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Connection closed)
[14:49:37] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[14:49:38] <burntsushi> kimundi: but i'm in regex land at the moment. trying to make it faster
[14:49:48] <kimundi> noble goal
[14:49:56] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[14:51:08] <Hildar> bluss: http://pastebin.com/RrfJD7Cj
[14:51:52] *** Quits: lurk_ (chatzilla@moz-qm19cj.in.comcast.net) (Connection closed)
[14:52:15] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[14:53:03] *** Quits: ThatOtherPerson_ (ThatOtherPe@moz-ol7.hf2.127.128.IP) (Ping timeout: 121 seconds)
[14:53:14] <bluss> Hildar: ok it's a bit hard to say. Which value is indicated for the borrow error?
[14:53:27] *** Quits: Guest22 (textual@moz-jt9juk.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:53:58] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Ping timeout: 121 seconds)
[14:54:01] *** Quits: davebettin (textual@moz-ip635p.or.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:54:02] <bluss> Hildar: and I think we already fixed the strange bug with loops on the last line of a function. Putting a panic!() on the last line after the loop should tell I think
[14:54:30] <bluss> but it's maybe that one of those method calls wants to store it, not just borrow it
[14:54:35] <bluss> its argument
[14:54:40] <Hildar> bluss: http://pastebin.com/3W2dMVqP
[14:54:43] *** Joins: geri (Mibbit@moz-mn9f3k.highway.telekom.at)
[14:54:57] <geri> hi
[14:55:00] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[14:55:08] <bluss> Hildar: thank you
[14:55:10] <Hildar> iter_mut wants to store it i think, but it should get dropped after the from_iter?
[14:55:22] <Quxxy> Oh no!  It's geri; quick, everyone behind the curtains!
[14:55:42] <Hildar> adding panic!() didn;t change anything
[14:55:45] <geri> Quxxy: ?
[14:55:54] <Quxxy> geri: :P
[14:56:08] <geri> Quxxy: no need to be afraid :D
[14:56:22] <bluss> Hildar: ok great, just checking
[14:56:31] <duesenfranz_> is there a way to make cargo not recompile local crates everytime? (crates that are given by path)
[14:56:36] <Quxxy> geri: Of *course* there is; once the tiger is released, anyone *not* behind curtains is going to in a *lot* of trouble...
[14:56:43] <Quxxy> *going to be in
[14:56:48] *** Quits: rudolph (rudolph@moz-qcqtiq.o3k5.dsq9.010d.2620.IP) (A TLS packet with unexpected length was received.)
[14:56:51] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[14:56:56] <geri> Quxxy: tiger had food before :D
[14:57:09] *** Joins: rudolph (rudolph@moz-qcqtiq.o3k5.dsq9.010d.2620.IP)
[14:57:13] <bluss> Hildar: well what does handle_event expect from its argument?
[14:57:45] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[14:57:46] <Hildar> &mut self, event: input::Event
[14:58:59] *** Joins: esgeh (sg@moz-0kil93.dyn.telefonica.de)
[15:00:01] *** Quits: ismaelga (ismaelga@moz-us2kn8.rev.vodafone.pt) (Ping timeout: 121 seconds)
[15:01:23] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[15:01:36] <wilfredh> bluss: filed https://github.com/rust-lang/rust/issues/25928 FWIW
[15:01:54] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[15:02:02] *** Joins: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de)
[15:02:23] *** Quits: mujou (mujou@moz-rko6lo.ocn.ne.jp) (Quit: Leaving...)
[15:02:53] *** Quits: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl) (Connection closed)
[15:03:40] *** Quits: meandi_1 (meandi_3@moz-kdoj0t.ewe-ip-backbone.de) (Connection closed)
[15:03:50] *** Quits: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:03:56] <bluss> wilfredh: thanks, now the chance is pretty good it will be addressed
[15:04:22] *** Joins: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl)
[15:05:25] *** Quits: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com) (Ping timeout: 121 seconds)
[15:06:08] *** Quits: ajhager (aajhager@moz-nup.41a.156.12.IP) (Ping timeout: 121 seconds)
[15:07:42] *** Quits: yuja (yuja@moz-9860l5.so-net.ne.jp) (Ping timeout: 121 seconds)
[15:07:55] *** Joins: dkreuter (knizz@moz-fes.iga.129.213.IP)
[15:08:39] <dkreuter> Can I have a pointer to an object that lives at most as long as a specified lifetime?
[15:08:51] *** Joins: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de)
[15:09:17] *** Quits: modulus (chatzilla@moz-8mpjls.dynamic.mundo-r.com) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.1/20150513174244])
[15:10:48] *** Joins: tomaka (Pierre@moz-r5gldj.abo.wanadoo.fr)
[15:11:26] *** Joins: aravindavk (aravinda@moz-r8d.tmm.172.122.IP)
[15:11:46] *** Joins: murphm8 (muephm8@moz-f26fc0.res.rr.com)
[15:11:56] <duesenfranz_> dkreuter: what do you mean exactly?
[15:13:10] <dkreuter> like &'a X but with an upper bound instead of a lower bound
[15:13:21] *** Joins: frankmcs_ (frankmcsher@moz-n95jpn.adsl.alicedsl.de)
[15:13:59] *** Joins: ThatOtherPerson (ThatOtherPe@moz-oim.rh2.127.128.IP)
[15:14:01] *** Quits: filsmick_ (filsmick@moz-4m50il.abo.wanadoo.fr) (Quit: )
[15:14:11] <kimundi> dkreuter: no
[15:14:23] <dkreuter> :( okay
[15:14:57] <duesenfranz_> dkreuter: what for?
[15:15:20] <dkreuter> duesenfranz_, in a graph, I'd use pointers between the nodes, because I can't form an ownership tree.
[15:15:35] <dkreuter> But I still know that the nodes can't live longer than the graph object
[15:15:56] <Hildar> So what does <'b: 'a> mean? 'b must live at least as long as 'a?
[15:15:58] *** Quits: frankmcsherry (frankmcsher@moz-dlbf1b.dyn.telefonica.de) (Ping timeout: 121 seconds)
[15:16:30] <nathan7> today I am installing Spacemacs
[15:16:31] <nathan7> the unholy child of vim and emacs
[15:16:31] <duesenfranz_> Hildar: yes
[15:17:12] <Rym> Quxxy: nice job on cargo-script, it's pretty much exactly what was kicking around in the back of my head :) Looking forward to seeing where it goes!
[15:17:40] <Quxxy> Rym: I'm about to drive a truck through the front window
[15:17:44] <nathan7> Quxxy.github == DanielKeep?
[15:17:51] <Quxxy> SHHHH
[15:17:55] <Quxxy> It's a secret to everyone
[15:17:58] <nathan7> ooh, nice
[15:18:04] <rkruppe> dkreuter: I don't understand your problem. What do you need that having &'a Graph and &'a Node (same 'a for both) doesn't give you?
[15:18:28] <Quxxy> Well, it will be as soon as Rym has his... quote accident unquote
[15:18:40] *** Joins: morne (morne@moz-ara.ab5.227.105.IP)
[15:18:53] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[15:18:53] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[15:19:31] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[15:19:32] <Rym> :O
[15:19:49] *** Parts: morne (morne@moz-ara.ab5.227.105.IP) ("WeeChat 1.1.1")
[15:20:53] *** Quits: poorman (poorman@moz-sdl0oq.res.rr.com) (Quit: )
[15:21:07] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:21:13] *** Joins: mib_jtjx54 (Mibbit@moz-g6k.oht.161.46.IP)
[15:21:18] *** Quits: frankmcs_ (frankmcsher@moz-n95jpn.adsl.alicedsl.de) (Connection closed)
[15:21:34] *** darkowlzz|afk is now known as darkowlzz
[15:21:48] <Quxxy> Rym: Anyway, if you want to see what exciting features cargo-script is going to have in the near future, I hear from this DanielKeep person (whoever they are) that they're being pushed to a v0.1.1 branch :P
[15:22:06] <Hildar> Okay, why does the borrow at systems.iter_mut() in main_loop last till the end of the function, but the equivlent borrow in the while{} block in main() lasts till the end of the statement? http://pastebin.com/CXivpp3T
[15:23:31] <dkreuter> rkruppe, when the Nodes have lifetime 'a' it means they can't be destroyed during a
[15:23:47] <dkreuter> but if 'a is the lifetime of the graph, it means I can't delete nodes
[15:24:17] <rkruppe> dkreuter: Yes but 'a doesn't have to be the full lifetime of the Graph, or conversely the 'a in &'a Graph can be shorter than the existence of the Graph
[15:24:44] *** Joins: durka42 (Adium@moz-qsuual.pa.comcast.net)
[15:25:16] <rkruppe> It isn't (necessarily) the lifetime of the graph!
[15:25:31] <dkreuter> rkruppe, if I want to add and remove nodes in an arbitrary order, what can I use as tighter lifetime
[15:25:35] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[15:25:53] <rkruppe> It's true that a single lifetime is probably too coarse to add and remove individual nodes, but for different reasons
[15:26:22] *** Quits: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP) (A TLS packet with unexpected length was received.)
[15:26:26] *** Joins: ellinokon (ellinokon@moz-gh5.r2h.62.178.IP)
[15:27:55] *** Joins: AngelOfSol (AngelOfSol@moz-9l0nls.fios.verizon.net)
[15:28:30] <rkruppe> For example, here the lifetime 'a is shorter than the existence of xs: https://play.rust-lang.org/?gist=1a81d8e788f6f4b2edfa&version=stable
[15:28:51] <rkruppe> dkreuter: But graphs are tricky to do well with lifetimes for a billion other reasons
[15:29:22] <rkruppe> See http://featherweightmusings.blogspot.de/2015/04/graphs-in-rust.html and http://smallcultfollowing.com/babysteps/blog/2015/04/06/modeling-graphs-in-rust-using-vector-indices/
[15:29:30] <dkreuter> I read these I think
[15:29:41] <dkreuter> rkruppe, I non copyable pointer would probably be ideal for this
[15:29:56] <dkreuter> a pointer that asserts that its target is valid as long as the pointer itself is valid
[15:30:46] *** darkowlzz is now known as darkowlzz|afk
[15:31:03] *** Quits: rouma (zack@moz-p8e0re.res.rr.com) (A TLS packet with unexpected length was received.)
[15:31:13] <rkruppe> How would not being copyable ensure this?
[15:31:37] <rkruppe> I mean, & pointers already assert that the target is valid /at least/ as long as the pointer itself is valid
[15:31:45] <rkruppe> Do you want an exact guarantee? Then that's ownership
[15:32:04] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[15:32:10] <duesenfranz_> Hildar: what are the signatures of update and handle_event?
[15:32:27] <rkruppe> But if there are any other references to the node (as there would be in most graphs) then this isn't really a thing you can guarantee
[15:32:29] <dkreuter> rkruppe, as long as the pointer is in the node, I know where I have to invalidate pointers when removing an edge
[15:32:40] <dkreuter> when I copy it out I can't
[15:32:41] *** Joins: ErikPragt (Mibbit@moz-f70m7c.static.versatel.nl)
[15:32:56] <ErikPragt> Hello. I have a small question about Rust...
[15:33:02] <ErikPragt> is there anyone here who can help me?
[15:33:09] <rkruppe> dkreuter: But if you have to manually invalidate the pointers, there is potential for mistakes, you are essentially doing the "unsafe pointers" variant of graphs
[15:33:15] <tilpner> ErikPragt - In any channel on IRC: Just ask.
[15:33:20] <ErikPragt> thx
[15:33:27] *** Joins: kagami (kagami@moz-mof.5r5.61.185.IP)
[15:33:33] *** Quits: nedp (nedp@moz-vg6vvt.bigpond.net.au) (Connection closed)
[15:33:48] <dkreuter> rkruppe, indeed
[15:33:50] <Hildar> duesenfranz_: Sorry, just trying to write a minimal version.
[15:33:54] <ErikPragt> I'm getting an error: error: cannot borrow captured outer variable in an `Fn` closure as mutable
[15:34:01] <ErikPragt> and I'm not sure how to fix this
[15:34:03] <kagami> Hi. Why is it possible to export function but don't export its type? Does it mean user won't be able to pass function result to another function?
[15:34:09] <tilpner> ErikPragt - Do you have a code snippet?
[15:34:16] <ErikPragt>   let reservation = request.json_as::<Reservation>().unwrap();          reservations.push(reservation);
[15:34:22] <ErikPragt> at the above code
[15:34:49] *** Quits: forgottenone (forgottenon@moz-mgp.26m.45.92.IP) (Ping timeout: 121 seconds)
[15:34:57] <ErikPragt> http://mibpaste.com/RlHPT7 
[15:35:12] <ErikPragt> yeah, this is the code snippet.
[15:35:18] <rkruppe> kagami: Is is possible? I thought a pub function's signature can only contain pub types. Got an example?
[15:35:25] <ErikPragt> beware: this is my first day of Rust, coming from a Java background.
[15:36:03] *** Joins: Nickleoi (sailfish@moz-hnd.7m5.8.175.IP)
[15:36:50] <kagami> rkruppe: here is one: https://github.com/PistonDevelopers/gfx_text/blob/master/src/lib.rs#L370 ShaderParams is private.
[15:36:50] *** Joins: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP)
[15:36:50] <dkreuter> ErikPragt, ! { |request, response|
[15:36:51] <dkreuter> maybe this needs a mut somewhere before or after |
[15:37:09] *** Joins: c_wraith (c_wraith@moz-946go0.click-network.com)
[15:37:12] <duesenfranz_> ErikPragt: nickel may process requests in paralell, so just mutating the kind-of-global vector inside the closure is unsafe
[15:37:26] *** Quits: murphm8 (muephm8@moz-f26fc0.res.rr.com) (Quit: Leaving)
[15:37:29] <duesenfranz_> (the vector being "reservations")
[15:37:41] <dkreuter> what duesenfranz_ said
[15:37:57] *** Quits: veeti (veeti@moz-vjgvb5.9155.nri3.d880.2a00.IP) (Quit: bye)
[15:37:59] <duesenfranz_> ErikPragt: you can put reservations inside a mutex
[15:38:09] *** Joins: Azdle (Azdle@moz-fv6arh.mn.comcast.net)
[15:38:59] *** Joins: veeti (veeti@moz-vjgvb5.9155.nri3.d880.2a00.IP)
[15:39:12] <Wraithan> Is there a way to dynamically define tests? Such as if I have a set of input and output files and I want it to show up as a test per input file (without having to hardcode them)
[15:39:15] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[15:39:43] <rkruppe> kagami: Huh. Well if it's private you can't name the return type in your own code (let result: Result<OwnedBatch<...>> = stuff.get_batch()) but you should be able to use the value and pass it on
[15:40:00] *** Parts: durka42 (Adium@moz-qsuual.pa.comcast.net) ()
[15:40:05] *** Quits: Nickleoi (sailfish@moz-hnd.7m5.8.175.IP) (Ping timeout: 121 seconds)
[15:40:31] *** Joins: moerk (christian@moz-00ceea.customer.tdc.net)
[15:41:28] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Connection closed)
[15:41:29] *** Joins: rootnode (rootnode@moz-go1ut4.ip1.george24.com)
[15:41:31] <dkreuter> rkruppe, do you know a nice way to make match work with nodes?
[15:41:50] <rootnode> T_T still not able to compile my WM. that darn ICE, if I knew how to fix it...
[15:41:55] <dkreuter> specifically, I have a graph of arithmeticoperations
[15:41:56] <rkruppe> dkreuter: What do you mean? What's a "node" in this context?
[15:41:56] <steveklabnik> Wraithan: i think you could write a syntax extension
[15:42:03] *** Joins: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net)
[15:42:18] <dkreuter> rkruppe, match node { add(lhs, rhs) => … }
[15:42:20] <kagami> rkruppe: but ShaderParams is part of the type. What the function signature would look like to whom I want to pass the result?
[15:42:28] <Wraithan> steveklabnik: https://doc.rust-lang.org/book/compiler-plugins.html ?
[15:42:39] <kagami> rkruppe: I mean in my own code.
[15:42:44] *** Quits: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net) (Client exited)
[15:42:45] <duesenfranz_> Wraithan: steveklabnik: shouldn't a build script be enough?
[15:42:46] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[15:43:06] <duesenfranz_> http://doc.crates.io/build-script.html
[15:43:07] <rkruppe> kagami: Oh in your own code, probably doesn't work. That is why I'm skeptical that it's really private
[15:43:26] <rkruppe> dkreuter: So what's the problem?
[15:43:27] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[15:44:04] <ErikPragt> Inside a mutex?
[15:44:05] <kagami> rkruppe: it is not exported so it should be...
[15:44:31] <ErikPragt> would you maybe have an example for that?
[15:44:38] <dkreuter> rkruppe, these blog posts suggest an edge list, so the node itself doesn't actually store anythign about its connectivity
[15:44:41] <ErikPragt> I'll look in the meantime
[15:44:46] *** Quits: mbudde (mbudde@moz-v8g.lim.109.2.IP) (Ping timeout: 121 seconds)
[15:44:48] <steveklabnik> Wraithan: yup. though duesenfranz_ makes a case too, I _bet_ you could do a build script
[15:44:48] <Wraithan> duesenfranz_: is your suggestion to write a file that dynamically generates .rs files that have the tests in them?
[15:45:24] <duesenfranz_> Wraithan: yep. in the link is a section called "Case study: Code generation"
[15:45:51] <Wraithan> duesenfranz_: yeah, realized that was what you were suggesting once I reached that point in the article
[15:46:01] *** zz_NameNotFound is now known as NameNotFound
[15:46:05] <Wraithan> duesenfranz_, steveklabnik: thanks you've both given me plenty to look at and play with !
[15:46:13] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[15:46:17] <duesenfranz_> ErikPragt: you may go to http://doc.rust-lang.org/stable/std/sync/struct.Mutex.html
[15:46:55] <duesenfranz_> ErikPragt: that example is very similar to what you want to do, except you don't need an Arc
[15:46:56] <rkruppe_> kagami: Perhaps it's exported under a different name? I don't know. Have you tried searching gfx_text's documentation?
[15:47:08] <steveklabnik> Wraithan: one note build scripts work on stable, but compiler extensions don't
[15:47:15] <steveklabnik> so you might want to puruse build.rs first :
[15:47:18] <ErikPragt> I was looking at that
[15:47:26] <ErikPragt> but I don't understand the clone things.
[15:47:28] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[15:47:29] <ErikPragt> If I need it or not
[15:47:35] <Wraithan> steveklabnik: oh definitely then. I'll be tied to stable for this project
[15:47:41] *** rkruppe_ is now known as rkruppe
[15:47:51] <duesenfranz_> ErikPragt: you dont... you mainly need the data.lock().unwrap() stuff...
[15:48:31] <ErikPragt> check.
[15:48:33] <steveklabnik> Wraithan: there's a crate called 'syntex' that hopefully will let you write compiler lugins on stable sooner. the issue is, as you might imagine, stabilizing the AST of the compiler isn't something we plan on doing soon :)
[15:48:57] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[15:49:41] *** Joins: ismaelga (ismaelga@moz-0o8.1dr.180.89.IP)
[15:50:00] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[15:50:12] <Wraithan> steveklabnik: fully understand, thanks! Honestly, I'd already started to write a node script to generate my tests for me (wanted to get back to rust portion faster and know node better) then I realized I should ask before getting too far heh
[15:50:49] <ErikPragt> do I need to pass the Vec to the Mutex?
[15:50:57] *** Joins: daze (daze@moz-tc29eq.static.zebra.lt)
[15:51:26] <Hildar> Right minfied version of my issue: http://is.gd/Uz9gXo Why does the borrow at foos.iter_mut() in main_loop last till the end of the function, but the one in main lasts till the end of the line?
[15:51:37] <Wraithan> I'm building a project to replace a node one and I already had tests in a highly platform agnostic state, so I figured I could just keep using those tests
[15:52:01] <steveklabnik> oh nice :)
[15:52:06] *** Quits: tyrion-mx (tyrion@moz-7v49kj.rana.at) (Quit: Leaving)
[15:52:06] *** Joins: murphm8 (muephm8@moz-f26fc0.res.rr.com)
[15:52:06] <steveklabnik> i just got back from JSConf
[15:52:30] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (A TLS packet with unexpected length was received.)
[15:52:37] <Wraithan> steveklabnik: I missed it, too many front end devs wanted to go from work and would have had to trade out nodeconfeu
[15:52:53] <steveklabnik> ah
[15:52:59] <Wraithan> and an EU trip > Florida trip
[15:52:59] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[15:53:05] <murphm8> vosen: Debug still isn't working. I smoked all the registry settings too. I was able to manually install the debug vsix into my normal 2015 instance, but the experimental instance still isn't loading Visual Rust
[15:53:06] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[15:53:08] <steveklabnik> understood, for sure
[15:53:21] <kagami> rkruppe: I think I get it. Since it's a trait, the exact type used inside the lib doesn't matter. And ShaderParam trait is exported by gfx-rs.
[15:54:12] <ErikPragt> I changed the code now to this: http://mibpaste.com/InZBIH 
[15:54:32] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Connection closed)
[15:54:36] <ErikPragt> But the error is still : use of moved value: `reservation.name`
[15:54:47] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[15:55:08] <towler1> [6~[6~
[15:55:25] *** Joins: Cindela (cindela@moz-dlkpia.bb.dnainternet.fi)
[15:55:27] *** Quits: Zr40 (zr40@moz-92llkv.adsl.xs4all.nl) (Ping timeout: 121 seconds)
[15:55:29] *** NameNotFound is now known as zz_NameNotFound
[15:55:39] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[15:55:42] <ErikPragt> Still not sure what's going on
[15:55:47] <Mutabah> ErikPragt: push consumes the value
[15:56:03] <Mutabah> ErikPragt: so, the format! line can't use the value
[15:56:12] <ErikPragt> but at least the error is different
[15:56:16] <ErikPragt> ah...
[15:56:21] <ErikPragt> hmm
[15:56:27] <ErikPragt> how can I fix that?
[15:56:42] <Mutabah> take a copy?
[15:56:46] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[15:56:52] *** Joins: Nickleoi (sailfish@moz-hnd.7m5.8.175.IP)
[15:56:54] <ErikPragt> sorry, first day!
[15:57:02] <ErikPragt> just reservation.copy()?
[15:57:11] <duesenfranz_> Hildar: good job on minifying! it's because the signature of `update` borrow `self` for the whole lifetime <'a>
[15:57:20] <ErikPragt> How can I see that the push consumes it?
[15:57:22] <steveklabnik> ErikPragt: all questions are valid questions :) in Rust, to make a copy of a non-Copy type, you call .clone()
[15:57:56] <ErikPragt> but I need to make it cloneable, I guess?
[15:58:05] <Mutabah> ErikPragt: And for telling that it consumes - If it's by value (i.e. doesn't take a &-ptr) it consumes (moves)
[15:58:06] <steveklabnik> http://doc.rust-lang.org/stable/collections/vec/struct.Vec.html#method.push <- the type signature of push takes a T, so that means it takes ownership
[15:58:24] <Mutabah> The only exception is for 'Copy' types (primitives)
[15:58:30] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[15:58:32] <Hildar> duesenfranz_: ahhhh! That explains it (it appears I can change update() to be update<'a> and get rid of the lifetime on the trait, which solves my issue).
[15:58:35] <steveklabnik> and non-primitives that implement Copy ;)
[15:58:37] <duesenfranz_> ErikPragt: if it's your own struct, put `#[derive(Clone)]` above it
[15:58:48] <ErikPragt> it's indeed my own struct
[15:59:04] *** Quits: murphm8 (muephm8@moz-f26fc0.res.rr.com) (Quit: Leaving)
[15:59:16] <duesenfranz_> Hildar: right, nice! it worked in `main` because rust chose a fitting lifetime for you
[15:59:18] <ErikPragt> yeah, it works!
[15:59:19] <ErikPragt> thanks.
[15:59:26] <Mutabah> ErikPragt: That said, in this case - You could run the format! earlier (and save the string), the push the value
[15:59:35] <ErikPragt> The help is much appreciated.
[16:00:23] <ErikPragt> ah, like that...could have done that too indeed :-)
[16:00:42] <ErikPragt> Mind if I ask a second question?
[16:00:46] <ErikPragt> cause the post works now...
[16:00:54] <ErikPragt> I now have a Vec of Relation objects...
[16:01:04] <ErikPragt> but I want to serialize the Vec<Relation> to json.
[16:01:16] <ErikPragt> I already serialize the Relation to json, that works fine
[16:01:31] *** Quits: rmdashrf (rmdashrf@moz-ecr.kjm.54.128.IP) (Quit: WeeChat 0.4.2)
[16:01:37] <ErikPragt> but I'm not sure how to do the Vec<Relation>. 
[16:01:47] <duesenfranz_> ErikPragt: do you use Serde?
[16:02:13] *** Quits: ChrisPls (Mibbit@moz-ou1.3i1.67.138.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:02:14] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[16:02:25] <duesenfranz_> ErikPragt: or rustc-serialize?
[16:02:38] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[16:02:49] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Connection closed)
[16:02:57] <ErikPragt> Rustc serialize
[16:03:07] <meh> does clone_from have a default implementation?
[16:03:18] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[16:03:59] <Mutabah> meh: It does appear to
[16:05:00] <ErikPragt> I tried reservations.to_json(), but that gives : error: capture of moved value: `data`
[16:05:16] <ErikPragt> Then I used           let mut x = data.lock().unwrap(); +         x.to_json()
[16:05:31] <duesenfranz_> ErikPragt: do you have a link or something?
[16:05:37] <ErikPragt> but that also gives: error: capture of moved value: `data`
[16:05:56] <ErikPragt> http://mibpaste.com/Sxe7PH 
[16:06:01] <Mutabah> ErikPragt: That means it's moved somewhere you use it in the cosure
[16:06:05] <Mutabah> *closure
[16:06:23] <ErikPragt> yeah, I understand. But I don't see it where/how.
[16:06:29] <ErikPragt> the above link is the current code
[16:06:34] <Mutabah> ErikPragt: It's used in another closure beforehand
[16:06:41] <ErikPragt> It's about /reservations
[16:07:07] <ErikPragt> I'm not sure how that is possible?
[16:07:24] *** Joins: forgottenone (forgottenon@moz-bj9.b4g.45.92.IP)
[16:07:25] <ToxicFrog> "use libc;" -> "error: unresolved import `libc`. There is no `libc` in `???`
[16:07:33] <ToxicFrog> Am I missing something in my cratedef or the like?
[16:07:52] *** Quits: forgottenone (forgottenon@moz-bj9.b4g.45.92.IP) (Quit: Konversation terminated!)
[16:07:53] <steveklabnik> ToxicFrog: do you have 'extern crate libc' in your crate root and libc="*" in your Cargo.toml?
[16:08:06] <Mutabah> ErikPragt: It's being used in the closure, I'd assume middleware! defines the closure as a move closure
[16:08:12] <steveklabnik> https://github.com/rust-lang/libc#usage
[16:08:27] *** Joins: forgottenone (forgottenon@moz-bj9.b4g.45.92.IP)
[16:08:30] <alk> dumb question : is there any way to apply some sort of regex on a Vec<u8> without decoding it as a string?
[16:08:33] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[16:08:33] <ErikPragt> but (somewhat) the same also happens in the post
[16:08:47] <ToxicFrog> steshaw: I have neither, I was just reading the docs on doc.rust-lang.org
[16:08:53] <ToxicFrog> It didn't occur to me to look at the github as well
[16:08:55] <burntsushi> alk: not with the `regex` crate. it only operates on Unicode strings.
[16:08:58] <steveklabnik> alk: not a dumb question. and i don't believe so, no
[16:09:09] <ToxicFrog> Er
[16:09:12] <ToxicFrog> steveklabnik: ^
[16:09:13] <alk> thanks
[16:09:19] <Mutabah> ErikPragt: yes, it's moved in the first closure, and then you try to move it into the second one (which is an error)
[16:10:01] <ErikPragt> but how is line 35 different from 27?
[16:10:13] <steveklabnik> ToxicFrog: yeah, so you just need to do that and it should work
[16:10:29] <Mutabah> ErikPragt: It moves into the first one, (invalidating the original)
[16:10:35] <Mutabah> ErikPragt: so you can't move into the second one
[16:10:40] <duesenfranz_> Mutabah: couldn't he make a new variable (that he defines before) which is a reference to data and use that inside the closure?
[16:10:48] <Mutabah> duesenfranz_: yes, that will work
[16:11:01] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (A TLS packet with unexpected length was received.)
[16:11:10] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[16:11:11] <ErikPragt> but what exactly do you mean with 'first one' ?
[16:11:19] <ErikPragt> I don't see the first one
[16:11:28] *** Quits: mkoskar (mkoskar@moz-ums8mr.tor-exit.network) (Client exited)
[16:11:29] <Mutabah> ErikPragt: line 27 doesn't error, right?
[16:11:57] <ErikPragt> oh!
[16:12:02] <Mutabah> ErikPragt: On line 27 (I'm assuming here, I don't see line numbers) 'data' is moved into the closure.
[16:12:04] <ToxicFrog> steveklabnik: it does! Thanks.
[16:12:04] <ErikPragt> I thought it was line 27
[16:12:08] <ErikPragt> you're right
[16:12:20] *** Quits: dkreuter (knizz@moz-fes.iga.129.213.IP) (Quit: Ex-Chat)
[16:12:31] <ErikPragt> but if I remove line 27, it compiles
[16:12:42] <ErikPragt> so line 27 and 35 are connected in some way?
[16:12:48] <Mutabah> ErikPragt: Now, do what duesenfranz_ suggested
[16:13:05] <Mutabah> ErikPragt: They're both closures
[16:13:16] <Mutabah> e	Closures either own or borrow the variables used within
[16:13:45] <Mutabah> I assume here they're owning (possibly becuase ofthe macro annotating them with 'move')
[16:13:47] <steveklabnik> ToxicFrog: no problem. basically anything not in the standard library will need you to do this
[16:14:15] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[16:14:23] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[16:14:25] *** Quits: Nickleoi (sailfish@moz-hnd.7m5.8.175.IP) (Quit: IRC for Sailfish 0.9)
[16:15:12] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (Ping timeout: 121 seconds)
[16:15:29] *** Joins: mbudde (mbudde@moz-425rg1.customer.tdc.net)
[16:15:31] <ErikPragt> Will do that. One moment
[16:15:43] <duesenfranz_> ErikPragt: you make two new variables: data_ref_1 = &data; data_ref_2 = &data
[16:15:52] <Mutabah> duesenfranz_: Don't need to
[16:15:56] <Mutabah> duesenfranz_: &-ptrs are Copy
[16:16:01] <Mutabah> (only need one)
[16:16:07] <duesenfranz_> oh right
[16:16:10] <duesenfranz_> sorry
[16:16:33] <tschottdorf> I'm defining a macro that takes a type and implements a simple trait. I want to call a static function new() on the type, but $tb::new() doesn't work (unexpected token MyType when I call mymacro!(MyType). What should I be doing instead?
[16:17:12] <Mutabah> tschottdorf: hygine won't allow that, instead have a "$constructor:expr" parameter
[16:18:27] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Ping timeout: 121 seconds)
[16:19:17] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:20:04] *** Quits: codec (Mibbit@moz-325m1f.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:21:09] *** Joins: Guest22 (textual@moz-jt9juk.fibertel.com.ar)
[16:21:24] *** Joins: phore (phore@moz-p8hanb.cable.rogers.com)
[16:21:33] <tschottdorf> Mutabah, thanks. I'm not sure I can get away with an expr parameter. Here's a gist that demonstrates what I want to do: https://gist.github.com/tschottdorf/711067ffc484f03dc589
[16:21:33] * Mutabah is away (Sleeping)
[16:21:45] *** Joins: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de)
[16:22:04] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[16:22:10] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[16:22:17] *** Quits: phore (phore@moz-p8hanb.cable.rogers.com) (Quit: if you're seeing this, i ran out of coffee. send help.)
[16:22:29] *** Quits: Guest22 (textual@moz-jt9juk.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:22:53] <ErikPragt> Duesenfranz_: for every method I need to create a new copy of the data??
[16:23:14] <ErikPragt> That seems a bit ugly to me....
[16:23:22] <steveklabnik> ErikPragt: references dont copy the data, they're just a pointer
[16:23:25] <ErikPragt> the Mutex already feels really ugly
[16:23:39] *** Quits: agjacome (agjacome@moz-j4vd23.dynamic.jazztel.es) (Quit: leaving)
[16:23:41] <steveklabnik> ErikPragt: out of curiosity, whats your programming background?
[16:23:44] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[16:23:48] <steveklabnik> can give better help that way :)
[16:24:22] *** Joins: Guest22 (textual@moz-jt9juk.fibertel.com.ar)
[16:24:35] *** Quits: ismaelga (ismaelga@moz-0o8.1dr.180.89.IP) (Connection closed)
[16:25:48] <_habnabit> hm. std::io::set_panic wants a Box<Input>, but then it gets ownership. i wanted to give it a Vec<u8> but then i lose ownership of the Vec and can't get the bytes out of it, afaict :(
[16:25:49] *** Quits: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[16:26:14] <_habnabit> er, Box<Write>
[16:26:30] <_habnabit> seems like i'd have to make my own Write implementation that has a Rc<Vec<u8>> or something
[16:26:59] *** Quits: blank_name (blank_name@moz-1gd.aq8.36.50.IP) (Ping timeout: 121 seconds)
[16:27:50] <XMPPwocky> _habnabit: why not just clone it?
[16:27:50] *** Quits: sasha (sasha@moz-ob8cdt.net.t-com.hr) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:27:54] *** Joins: hoverbear (hoverbear@moz-665.6hv.18.72.IP)
[16:28:00] *** Joins: blank_name (blank_name@moz-b1omh3.mi.frontiernet.net)
[16:28:39] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[16:30:00] <_habnabit> XMPPwocky, not sure how that helps. i want to collect the bytes written as a string
[16:30:04] *** Joins: tytouf (caugier@moz-84u6a1.rev.sfr.net)
[16:30:07] <XMPPwocky> ahh
[16:30:07] <ToxicFrog> steveklabnik: yeah, my confusion was that I thought libc was part of the standard library, just in a different namespace, hence being documented alonside it.
[16:31:04] *** Joins: vikaton (uid59278@moz-0a9h81.ealing.irccloud.com)
[16:31:12] <vikaton> is this updated Rust? http://rosettacode.org/wiki/Dining_philosophers#Rust
[16:31:34] <SneakySnake> vikaton: No, it seems old
[16:31:45] *** Quits: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:31:45] <Hukka> Anyone have an idea why the example use of https://github.com/unicode-rs/unicode-normalization doesn't work?
[16:31:49] <Hukka> error: unresolved import `unicode_normalization::UnicodeNormalization`. There is no `UnicodeNormalization` in `unicode_normalization`
[16:31:56] <vikaton> seems rly old
[16:31:57] <tschottdorf> Mutabah, actually it worked fine. Looks slightly less elegant than what I had hoped for but still useful. Thanks again!
[16:31:57] * Mutabah is away (Sleeping)
[16:31:58] *** Quits: rudolph (rudolph@moz-qcqtiq.o3k5.dsq9.010d.2620.IP) (A TLS packet with unexpected length was received.)
[16:32:01] <steveklabnik> ToxicFrog: yeah, understandable. rustc also includes a private version of libc, so in some sense, there is one inside, but you should be using the external crate
[16:32:16] *** Joins: rudolph (rudolph@moz-qcqtiq.o3k5.dsq9.010d.2620.IP)
[16:32:34] <SneakySnake> Hukka: You need the unicode_normalization package from crates.io
[16:32:34] <steveklabnik> Hukka: iirc the unicode crate was split up into invididual crates, i would be surprised of that code still works
[16:33:03] *** Quits: nercury (nercury@moz-ngr949.static.zebra.lt) (Client exited)
[16:33:06] *** Quits: sayan (sayan@moz-ir4.s39.227.223.IP) (Connection closed)
[16:33:08] <vikaton> somebody should update http://rosettacode.org/wiki/Dining_philosophers#Rust :)
[16:33:10] <vikaton> :P*
[16:33:41] <SneakySnake> steveklabnik: Didn't you put a dining philosophers example into TRPL? Maybe it could be reused on rosettacode.
[16:33:43] *** Quits: Azdle (Azdle@moz-fv6arh.mn.comcast.net) (Ping timeout: 121 seconds)
[16:33:58] <Hildar> Is it safe to panic!() across a C ffi call and back? I'm guessing it's a big fat no...
[16:34:11] <Hukka> SneakySnake: Yes, not putting that into Cargo.toml would give a different error altogether
[16:34:44] <Hukka> steveklabnik: Hmm... I see. I was trying to look at the source and couldn't figure out anything wrong with it. The trait is still there and pubäed
[16:34:50] <Hukka> *pub'ed
[16:35:00] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[16:35:06] <rkruppe> Hildar: Big fat no. It's always been undefined behavior and it's either deliberately broken (abort when it happens or something) or will be in the future
[16:35:10] *** Quits: Guest22 (textual@moz-jt9juk.fibertel.com.ar) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:35:41] *** Joins: Azdle (Azdle@moz-fv6arh.mn.comcast.net)
[16:35:42] <Hildar> rkuppe: Bummer, what's my options then? libc::abort?
[16:36:15] <rkruppe> Can't you return an error code to the C code?
[16:36:25] <Hukka> steveklabnik: Hm, can't find any other crate that talks about normalization
[16:36:43] *** Quits: kvsari (kvsari@moz-fgsnv9.bbtec.net) (Connection closed)
[16:36:55] *** Quits: psd_ (psd@moz-asbha3.mtnl.net.in) (Connection closed)
[16:37:39] <steveklabnik> SneakySnake: yes i did, and yes, if they want it, that'd be great
[16:37:47] <Hildar> rkruppe: It's an callback informing me of errors, so not really. I could set a flag somewhere and panic! if I ever see that flag set?
[16:37:55] <steveklabnik> Hukka: did you see SneakySnake 's recomendation of the unicode_normalization package on crates.io?
[16:37:59] <steveklabnik> !crate unicode_normalization
[16:38:00] <rustbot> unicode-normalization (0.1.0) - This crate provides functions for normalization ofUnicode strings, including Canonical and CompatibleDecomposition and Recomposition, as described inUnicode Standard Annex #15. -> https://crates.io/crates/unicode-normalization
[16:38:03] <steveklabnik> Hukka: ^^^
[16:38:09] <Hukka> Er...
[16:38:16] <Hukka> I'm talking about that precise crate
[16:38:26] <steveklabnik> how are you using that precise crate?
[16:38:34] <steveklabnik> it shouldn't even compile by now
[16:38:41] <Hukka> Trying to run the example on that crate's doc
[16:38:56] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[16:39:49] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[16:39:54] <Hukka> Sorry, why wouldn't it compile?
[16:40:10] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[16:41:00] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[16:41:09] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:41:25] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[16:41:28] *** Quits: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl) (Quit: Leaving)
[16:41:31] <Hukka> Gah, I had a typoed version in the toml
[16:41:50] <steveklabnik> because it was last updated in April
[16:41:59] <steveklabnik> just playing probabilities ;)
[16:42:05] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:42:13] *** Joins: veqz_ (veqz@moz-74gtia.au-net.ne.jp)
[16:42:20] <ToxicFrog> rkruppe: hildar's question is relevant to me -- I'm writing a Rust library that's ABI-compatible with an existing C library. Some functions are deliberately unimplemented and I want the program to abort() if they are called.
[16:42:21] *** Quits: burntsushi (burntsushi@moz-t92kn9.ma.charter.com) (Quit: Konversation terminated!)
[16:42:23] *** Joins: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl)
[16:42:31] <ToxicFrog> Is panic! appropriate for that or should I be using something else?
[16:43:02] *** Quits: ErikPragt (Mibbit@moz-f70m7c.static.versatel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[16:43:12] <steveklabnik> use unimplemented!
[16:43:15] <_habnabit> ToxicFrog, no; your extern "C" functions should be preventing panics from bubbling up into the calling C code
[16:43:15] <steveklabnik> which basically just panics
[16:43:20] <steveklabnik> but
[16:43:21] *** Quits: Halamix2 (Halamix2@moz-6dpdh2.syrion.pl) (Connection closed)
[16:43:25] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:43:26] <rkruppe> ToxicFrog: If you want to abort, just abort. Call the libc abort
[16:43:26] <SneakySnake> ToxicFrog: You can do all the work in a new thread and catch the panic
[16:43:29] <steveklabnik> as _habnabit says, panic across an ffi boundry is undefined behavior
[16:43:32] *** Quits: tschottdorf (tobias@moz-d021av.aipg.hajb.2000.2604.IP) (Ping timeout: 121 seconds)
[16:43:38] <steveklabnik> so be careful with that
[16:43:40] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[16:44:14] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Connection closed)
[16:44:41] <ToxicFrog> SneakySnake: there is no 'work' to be done. The calling program is incorrect and no recovery is possible; the only thing to do is to exit immediately with, if possible, an error message saying which function was called.
[16:45:32] <SneakySnake> Oh, I misinterpreted your question, sorry
[16:45:47] <ToxicFrog> _habnabit: if this happens there is no sensible value that can possibly be returned to the C caller; they shouldn't have called the function at all, it is present only so that ldd doesn't fail.
[16:45:59] *** Parts: kagami (kagami@moz-mof.5r5.61.185.IP) ()
[16:46:12] <eddyb> huh, ldd?
[16:46:27] <vikaton> steveklabnik, SneakySnake Updated: http://rosettacode.org/wiki/Dining_philosophers#Rust
[16:46:42] <ToxicFrog> eddyb: it's a drop-in replacement for an existing .so used by a program I don't have source code for
[16:47:01] <ToxicFrog> rkruppe: alright, I'll use libc abort.
[16:47:04] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:47:09] <eddyb> ldd the tool which lists dynamic dependencies?
[16:47:11] <SneakySnake> vikaton: You left "extern mod extra;" at the top
[16:47:18] <steveklabnik> vikaton: :)
[16:47:40] *** Joins: hohoho (hohoho@moz-jqco1f.pools.vodafone-ip.de)
[16:47:44] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[16:47:49] *** Quits: meh (meh@moz-e56g7l.42-151.net24.it) (Quit: reboot)
[16:47:52] <eddyb> ToxicFrog: we have an abort intrinsic which is cheaper but it causes SIGILL
[16:48:04] *** Joins: jincreator (Thunderbird@moz-d7i.i1g.195.175.IP)
[16:48:10] <vikaton> SneakySnake: didnt need it
[16:48:11] *** Quits: tav (tav@moz-ivrq8h.range31-52.btcentralplus.com) (Ping timeout: 121 seconds)
[16:48:11] <eddyb> (because it's implemented as an invalid instruction)
[16:48:29] *** Joins: nercury (nercury@moz-ngr949.static.zebra.lt)
[16:48:30] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[16:48:49] <SneakySnake> vikaton: I mean you left it in there. It's still there.
[16:48:55] <SneakySnake> It's invalid Rust
[16:49:02] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[16:49:03] <SneakySnake> There is no such thing as "extern mod" anymore
[16:49:03] <vikaton> ohhh
[16:49:17] *** Quits: ThatOtherPerson (ThatOtherPe@moz-oim.rh2.127.128.IP) (Quit: Leaving)
[16:49:18] <ToxicFrog> eddyb: I don't care what signal it causes, I just need the program to stop executing :)
[16:49:25] <ToxicFrog> Thanks for all the advice, people
[16:49:25] *** Joins: ThatOtherPerson (ThatOtherPe@moz-oim.rh2.127.128.IP)
[16:49:41] <ToxicFrog> eddyb: yeah, sorry, I meant dlopen/dlsym
[16:49:43] <ToxicFrog> It's been a long day
[16:49:47] *** Joins: heatmeiser (heatmeiser@moz-3rj72b.res.rr.com)
[16:49:51] <ToxicFrog> ok, afk now
[16:50:23] <_habnabit> am i missing something or according to http://doc.rust-lang.org/stable/std/string/struct.String.html is there no way to extend an existing String from a &[u8]? String has an implementation of Extend<char>, but `buf as &[char]` is a non-scalar cast for a &[u8] i guess
[16:50:25] <eddyb> ToxicFrog: this is it http://doc.rust-lang.org/std/intrinsics/fn.abort.html
[16:50:32] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[16:50:41] <vikaton> SneakySnake: fixed
[16:50:45] <eddyb> _habnabit: yeah, turn &[u8] into &str first
[16:50:46] <SneakySnake> vikaton: Good job!
[16:51:01] <_habnabit> eddyb, i tried `buf as &str` but that's a nonscalar cast too :?
[16:51:15] <eddyb> _habnabit: str::from_utf8 or something
[16:51:22] <_habnabit> eddyb, oh, okay
[16:51:24] <eddyb> `as` is for casting numbers and pointers
[16:51:28] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[16:51:46] <_habnabit> yeah; i just saw on http://doc.rust-lang.org/stable/std/primitive.str.html "The actual representation of strs have direct mappings to slices: &str is the same as &[u8]."
[16:52:13] <eddyb> wait, why is `from_utf8` not there?
[16:52:15] *** Joins: etw (etw@moz-5mb.sih.212.204.IP)
[16:52:24] *** Joins: meh (meh@moz-e56g7l.42-151.net24.it)
[16:52:24] <_habnabit> eddyb, that's the primitive, not the module
[16:52:27] <eddyb> oh, because we didn't fix it http://doc.rust-lang.org/stable/std/str/fn.from_utf8.html
[16:52:32] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Connection closed)
[16:52:32] <eddyb> grrr
[16:52:32] <vikaton> SneakySnake: ha I don't code in Rust, I just copy/pasted the example in the book, the first one looks extremely outdated
[16:52:50] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[16:52:50] <eddyb> isn't it backwards incompat to change from_utf8 to be a method and not a free function?
[16:53:00] <eddyb> I mean, if a trait provides from_utf8, it will break
[16:53:29] *** Quits: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com) (Ping timeout: 121 seconds)
[16:54:20] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[16:54:33] *** Joins: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com)
[16:54:37] *** Joins: knarf (knarf@moz-8eu.c72.157.89.IP)
[16:54:56] *** Joins: SpaceManiac (Tad@moz-bd3s4o.dyn.suddenlink.net)
[16:54:58] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[16:55:06] *** Joins: Chef (Chef@moz-ge00fg.cpe.teksavvy.com)
[16:55:42] <knarf> hi!
[16:55:49] <knarf> im learning rust coming from a very procedural background and i have a hard time figuring it out
[16:56:08] <knarf> im trying to read a header from a binary file
[16:56:27] <knarf> for a toy project
[16:56:47] <etw> I’m trying to use the PostgresConnectionManager struct implemented in https://github.com/sfackler/r2d2-postgres/blob/master/src/lib.rs, but I keep getting “the trait `r2d2::ConnectionManager` is not implemented for the type …” even though it appears to be implemented in the same file, do I need to ‘use’ it somehow?
[16:56:52] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[16:57:38] <etw> knarf: directly into a struct?
[16:57:47] <knarf> how would you do that?
[16:57:47] <steveklabnik> etw: generally speaking, you have to `use` a trait for its methods to be avaialble, though that error seems like you've done that?
[16:58:24] <etw> steveklabnik: yeah I have a ‘user r2d2::{… ConnectionManager}’ in my file
[16:58:32] <steveklabnik> etw: huh
[16:58:48] <etw> I feel like the problem is different than the error message
[16:59:15] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[17:01:26] *** Quits: andars (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[17:03:24] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[17:03:33] *** Quits: Azdle (Azdle@moz-fv6arh.mn.comcast.net) (Ping timeout: 121 seconds)
[17:04:41] *** Joins: keenan (keenan@moz-es1.bb3.240.23.IP)
[17:06:48] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Connection closed)
[17:06:53] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[17:07:19] *** Quits: keenan (keenan@moz-es1.bb3.240.23.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[17:07:33] *** Quits: Robozman (quassel@moz-81ou38.dyn.optonline.net) (Ping timeout: 121 seconds)
[17:08:02] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[17:08:12] *** Joins: Robozman (quassel@moz-8u1nuj.dyn.optonline.net)
[17:08:44] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[17:10:08] <etw> knarf: tbh i thought it would be something rustc-serialize would support, because it would be pretty unsafe to do it in the traditional way you’d do it in C (fread(file, &mystruct)), but it only supports hex, json, base64
[17:11:31] <knarf> im looking at std::io::BufReader api docs
[17:11:44] <knarf> and i just don't know what to use
[17:12:10] <knarf> i really don't know much about rust
[17:12:22] <bluss> knarf: important methods are those under the Read trait and under BufRead too
[17:13:08] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[17:13:23] <Wraithan> duesenfranz_, steveklabnik: build.rs is working fantastically for me, thanks again y'all. 
[17:13:34] <steveklabnik> Wraithan: awesome :) you should write a blog post or something about it
[17:13:39] <Wraithan> steveklabnik: ya
[17:13:42] <Wraithan> probably will
[17:13:53] <Wraithan> pto this whole coming week so it is all rust all the time
[17:14:07] <steveklabnik> nice
[17:14:08] *** Quits: Hildar (Mibbit@moz-04vi1v.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:14:29] <csherratt> Does anyone know of a macro that captures the trait bindins? like `impl<T: Copy, U: Clone>` ?
[17:14:31] <Wraithan> implementing my warlight 2 bot in rust: http://theaigames.com/competitions/warlight-ai-challenge-2 
[17:14:36] *** Quits: mindcat (mindcat@moz-s43.01v.90.113.IP) (Quit: Lost terminal)
[17:14:53] *** Quits: ray (ray@moz-m0g.t3f.66.59.IP) (Connection closed)
[17:15:50] <Wraithan> Looking forward to building up behavior trees in a static language instead of my purely heuristic approach (to be fair got me in the top 30 for a while)
[17:16:02] *** Quits: wei2912 (wei2912@moz-m8j.moa.156.175.IP) (Quit: Lost terminal)
[17:16:24] <Quxxy> I'd like some quick feedback on how I should embed manifests for "cargo script": https://gist.github.com/DanielKeep/446f04c5512bfd9f640c
[17:16:39] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[17:16:56] <Quxxy> I'd appreciate it if you could let me know which one you would pick, if you could have only *one*
[17:17:09] <Quxxy> (Or if you have any better ideas :) )
[17:17:32] <sfackler> etw: did you end up with 2 versions of r2d2 at once or something? check your Cargo.lock to see
[17:17:50] *** Quits: vikaton (uid59278@moz-0a9h81.ealing.irccloud.com) (Quit: )
[17:18:26] <Wraithan> What is the current stance of doing a dual bin/lib approach like the accepted answer here: http://stackoverflow.com/questions/26946646/rust-package-with-both-a-library-and-a-binary 
[17:18:36] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[17:18:40] *** Quits: hohoho (hohoho@moz-jqco1f.pools.vodafone-ip.de) (Quit: Leaving)
[17:18:41] <Wraithan> Basically asking if I should feel bad about doing that or not
[17:20:12] <steveklabnik> just fine
[17:20:20] <Wraithan> cool
[17:20:23] <steveklabnik> i wouldn't bother with the lib and bin sections in cargo.toml though
[17:20:28] <steveklabnik> they just repeat the defualts
[17:20:41] *** darkowlzz|afk is now known as darkowlzz
[17:21:00] <JustAPerson> Wraithan: you can initiate a library (`cargo new`) and add an executable frontend easily by writing a src/bin/main.rs
[17:21:07] *** Joins: Guest (textual@moz-3f1.505.171.183.IP)
[17:21:07] *** Joins: rmdashrf (rmdashrf@moz-ecr.kjm.54.128.IP)
[17:21:11] <Wraithan> oh I see
[17:21:15] <Wraithan> Thanks folks!
[17:21:28] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[17:21:32] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[17:21:36] <Wraithan> I was worried it would do something like detect one and then not build the other or something
[17:21:50] <Wraithan> so figured that explicit approach was beter
[17:21:52] <Wraithan> better*
[17:21:59] <steveklabnik> nope, it works just fine
[17:22:03] <steveklabnik> :)
[17:22:03] <JustAPerson> it's worked well in the past for me
[17:22:04] <Quxxy> JustAPerson: It doesn't need to go in the 'bin' directory
[17:22:21] <steveklabnik> think of it this way: your binary depends on the library, so if it didn't compile both, the binary wouldn't work
[17:22:42] <JustAPerson> Quxxy: that's the recommended cargo layout iirc
[17:23:00] *** Joins: psy (psy@moz-u9b.hr7.224.43.IP)
[17:23:07] <steveklabnik> JustAPerson: for secondary executables
[17:23:12] *** Joins: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de)
[17:23:16] <steveklabnik> JustAPerson: src/main.rs is primary, src/bin/*.rs is secondary
[17:23:43] *** Quits: Robozman (quassel@moz-8u1nuj.dyn.optonline.net) (Ping timeout: 121 seconds)
[17:24:10] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[17:25:19] <JustAPerson> steveklabnik: exactly, I assumed they were writing a library first and foremost, with an executable frontend (I always think of something like liblua versus the actual exectuable as an example)
[17:25:24] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[17:25:30] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[17:25:30] *** Parts: tyoverby (tyoverby@moz-q99lel.gfd0.v3he.0008.2601.IP) ()
[17:25:37] *** Quits: oberstet (quassel@moz-lktbnn.dynamic.mnet-online.de) (Connection closed)
[17:25:53] <bbloom> reading https://doc.rust-lang.org/stable/reference.html#macro-related-attributes - i don't see a way to use a macro from non-parent modules. i have some crate c with macro module m, and modules x, y using module m - how do i export/import those macros from c::m in to c::x and c::y  ?
[17:26:41] <Quxxy> bbloom: read "Macros are (sometimes) lexically scoped" https://danielkeep.github.io/practical-intro-to-macros.html#some-more-gotchas
[17:27:09] <bluss> bbloom: macro_use should be fine, just need to adjust the order of the `mod`s
[17:27:14] *** Quits: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[17:27:14] <Quxxy> TLDR: Put '#[macro_use] mod m;' before `mod x;` and `mod y;`
[17:27:28] <bbloom> aaaah, ok. let me give that a shot
[17:27:31] <steveklabnik> JustAPerson: yeah i guess it depends. you'd put examples in examples though, not in src/bin
[17:27:52] *** Quits: Guest (textual@moz-3f1.505.171.183.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:29:02] <Wraithan> For me I'm building a bot for an AI game. So I want to put the bot logic and stuff in the lib and just have the messy binary stdin stuff in a main.rs file to isolate that from the rest of the system.
[17:29:03] <bbloom> cool, that works - thanks
[17:29:39] *** Quits: paupau (grrrr@moz-35edek.ca.comcast.net) (Ping timeout: 121 seconds)
[17:29:40] <steveklabnik> Wraithan: right. this setup is like curl and libcurl
[17:29:52] <Wraithan> yes
[17:29:53] <steveklabnik> you want to let other projects use your logic, but you also wnat to provide a binary that does something with your library
[17:30:11] *** darkowlzz is now known as darkowlzz|afk
[17:30:32] *** Joins: burntsushi (burntsushi@moz-t92kn9.ma.charter.com)
[17:31:11] <Wraithan> include!(concat!(env!("OUT_DIR"), "/tests.rs"));
[17:31:26] <Wraithan> ^ only line in my integration test file
[17:31:33] <steveklabnik> :)
[17:32:13] *** Quits: jwatt (roslea@jwatt.irc.users.mozilla.org) (Ping timeout: 121 seconds)
[17:33:36] <bbloom> as a procedural macro fan, i'll say: rust's syntax-rules are quite usable for a large range of common macros use cases - nicely done folks
[17:33:43] <Wraithan> Is there any chance of cargo growing the ability to do something like `cargo clean test` or will I have to rely on Makefile to do stuff like that?
[17:33:46] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[17:33:55] <steveklabnik> what is 'cargo clean test'?
[17:33:57] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[17:34:41] <Wraithan> steveklabnik: akin to many Makefile setups where you run clean to blow everything away (like cargo clean) then test to run your tests (like cargo test) without having to run it as two separate commands
[17:34:45] *** Joins: nicoch (nicoch@moz-g02d7k.be)
[17:34:48] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[17:35:10] <steveklabnik> ah
[17:35:20] <steveklabnik> unsure
[17:35:20] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[17:35:26] <steveklabnik> let me guess
[17:35:38] <steveklabnik> you'd want that in this situation because cargo doesn't rebuild your tests, yeah?
[17:35:41] *** Joins: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP)
[17:35:44] <Wraithan> heh, yup
[17:36:00] <steveklabnik> iirc, in cargo.toml you can add extra files for it to track changes for
[17:36:00] <Wraithan> And in general I like to do a clean test and clean build before releasing something
[17:36:12] *** Quits: knarf (knarf@moz-8eu.c72.157.89.IP) (Quit: Leaving)
[17:36:27] <Wraithan> just as a sanity check in case my build system has left behind an artifact that has kept everything working
[17:36:45] <steveklabnik> totally :)
[17:36:51] <Wraithan> I'm (overly) paranoid about stuff like that due to being burned by systems in the past
[17:37:22] <bstrie> Wraithan: if you just put a script called `cargo-cleantest` anywhere on your $PATH then you should be able to do `cargo cleantest`
[17:37:23] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[17:37:28] *** Joins: Robozman (quassel@moz-8u1nuj.dyn.optonline.net)
[17:37:41] *** Joins: meg34 (meg34@moz-oliav2.dip0.t-ipconnect.de)
[17:37:43] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[17:37:49] <steveklabnik> yeah, that's a good point too
[17:37:50] *** Joins: thelink2012 (Mibbit@moz-ig7.006.59.187.IP)
[17:38:06] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[17:38:08] <Wraithan> bstrie: interesting
[17:38:23] <Wraithan> bstrie: thank you
[17:38:46] *** Quits: JanC (janc@moz-gra23c.dial.scarlet.be) (Ping timeout: 121 seconds)
[17:38:50] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[17:39:29] <thelink2012> hmmm how can I return a Path off a function? It's bothering me because Path::new returns a &Path?
[17:39:59] <steveklabnik> thelink2012: Path is unsized
[17:40:01] <Quxxy> thelink2012: You can't.  You want to return a PathBuf
[17:40:02] <steveklabnik> you may want to return a PathBuf
[17:40:58] <thelink2012> I see thanks
[17:41:16] *** darkowlzz|afk is now known as darkowlzz
[17:41:45] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[17:43:34] *** Joins: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de)
[17:43:37] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[17:43:44] *** bentley|away is now known as bentley
[17:43:57] *** Joins: jmbto (jmbto@moz-4pv6mn.hca5.8frp.0e35.2a01.IP)
[17:44:44] *** Quits: wilfredh (uid159@moz-md9so9.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[17:44:54] <Wraithan> steveklabnik: I'm not seeing anything in the docs to specify more folders to watch in cargo
[17:44:59] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Ping timeout: 121 seconds)
[17:45:09] <steveklabnik> hmm
[17:45:26] <Wraithan> nvm
[17:45:29] <Wraithan> I'm totally blind
[17:45:32] *** Joins: vortex (vortex@moz-skqfhn.novotelecom.ru)
[17:45:59] *** Quits: nercury (nercury@moz-ngr949.static.zebra.lt) (Client exited)
[17:46:22] <Wraithan> there is an `include` under `[package]` that I completely skipped over but will do what I want
[17:46:23] *** Joins: lenstr (lenstr@moz-897.vju.25.171.IP)
[17:46:39] <steveklabnik> :D
[17:46:41] <steveklabnik> cool
[17:46:46] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[17:47:01] <betawaffle> steveklabnik: how's the actor stuff going?
[17:47:15] <steveklabnik> actor stuff?
[17:47:16] *** Joins: Guest58 (textual@moz-cdsk1r.res.rr.com)
[17:47:33] <betawaffle> didn't you have a wip actor library for rust?
[17:47:39] <steveklabnik> i do not
[17:47:43] <steveklabnik> must have been someone else :)
[17:48:12] <betawaffle> yea, there are a few people I get you confused with often
[17:48:13] <XMPPwocky> we are all steveklabnik
[17:48:24] *** Quits: Slava_I (slava@moz-tia.hi8.135.31.IP) (Connection closed)
[17:48:30] *** Joins: Slava_I (slava@moz-tia.hi8.135.31.IP)
[17:48:44] *** Quits: meg34 (meg34@moz-oliav2.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[17:48:46] <betawaffle> well shit, now i need to figure out who that was
[17:49:08] *** Joins: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP)
[17:49:20] <steveklabnik> oh btw Wraithan , speaking of 'cargo clean build' https://github.com/pwoolcoc/cargo-do
[17:50:06] *** Joins: huddler (Mibbit@moz-5t9bg5.dion.ne.jp)
[17:50:07] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[17:50:16] <betawaffle> oh, i think it was carllerche
[17:50:28] *** Quits: huddler (Mibbit@moz-5t9bg5.dion.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[17:50:30] *** Quits: lenstr (lenstr@moz-897.vju.25.171.IP) (Ping timeout: 121 seconds)
[17:50:34] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[17:50:54] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Quit: )
[17:50:59] *** Quits: Robozman (quassel@moz-8u1nuj.dyn.optonline.net) (Ping timeout: 121 seconds)
[17:51:39] *** Joins: Robozman (quassel@moz-8u1nuj.dyn.optonline.net)
[17:52:16] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[17:52:24] *** Joins: jacor (jacor@moz-m207k5.ant0.oo2o.0007.2601.IP)
[17:52:47] *** Joins: JanC (janc@moz-nurhqb.dial.scarlet.be)
[17:53:43] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:53:51] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[17:54:13] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Connection closed)
[17:54:28] *** Joins: ncarrillo (textual@moz-mke7jn.cable.rcn.com)
[17:55:42] *** Quits: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP) (Ping timeout: 121 seconds)
[17:56:04] *** Quits: lyxia (xia@moz-lj4fh9.eleves.ens.fr) (Ping timeout: 121 seconds)
[17:56:40] *** Joins: kecolus (kecolus@moz-i7cb3r.fios.verizon.net)
[17:56:41] *** Quits: ncarrillo (textual@moz-mke7jn.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:57:53] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[17:58:08] *** Quits: Guest58 (textual@moz-cdsk1r.res.rr.com) (Ping timeout: 121 seconds)
[17:59:33] *** Quits: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com) (Ping timeout: 121 seconds)
[18:00:56] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[18:01:03] *** Joins: ncarrillo (textual@moz-mke7jn.cable.rcn.com)
[18:01:30] *** Joins: ygrek (user@moz-8j9aeu.org.ua)
[18:02:03] *** Joins: AopicieR (AopicieR@moz-gjn7ie.dip0.t-ipconnect.de)
[18:05:33] <carllerche> betawaffle: it was Astaire on my github, but is on hold
[18:05:51] <bstrie> steveklabnik: "Ugh, the new subreddit style doesn't show that File is a link there." looks like a link to me
[18:06:01] <carllerche> I wanted to focus on futures / streams as I think they will be heavily used in the actor lib
[18:06:33] <betawaffle> carllerche: makes sense. how are the futures and streams going?
[18:06:51] <carllerche> Pretty solid.
[18:07:06] <carllerche> Still need more work (always)
[18:07:46] <carllerche> Futures / streams are in the eventual repo
[18:07:55] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[18:08:02] *** Joins: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP)
[18:08:02] <betawaffle> yea, i star'd that a while back
[18:08:10] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[18:08:50] *** Quits: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de) (Connection closed)
[18:08:54] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:08:54] *** Quits: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP) (Connection closed)
[18:09:25] *** Joins: Xirdus (Mibbit@moz-noa5ui.tvk.wroc.pl)
[18:09:29] *** Joins: avikpal (avikpal@moz-rcr.dga.79.112.IP)
[18:09:36] <carllerche> Mio needs windows support / docs and eventual needs docs. Those are my current OSS priorities.
[18:09:51] <carllerche> betawaffle: could always use assistance with stuff :-)
[18:09:58] <Xirdus> hi, does anyone here use Visual Rust?
[18:10:41] <steveklabnik> bstrie: odd, i just posted a reply
[18:10:44] <betawaffle> carllerche: what's at the top of your list of things you want someone else to do?
[18:12:25] <carllerche> betawaffle: eventual has a few holes still. More fns on Stream / Future as well as figuring out execution contexts. Aka scheduling futures in thread pools and what not
[18:13:12] *** Joins: jwatt (roslea@jwatt.irc.users.mozilla.org)
[18:13:36] <carllerche> Or try to work on Astaire if you are brave :-) I can provide guidance.
[18:14:42] <betawaffle> i have experience with erlang, but not the internals, just using it
[18:15:14] *** Quits: amnn (amnn@moz-ro1qqu.ox.ac.uk) (Ping timeout: 121 seconds)
[18:16:00] *** Joins: keenan (keenan@moz-es1.bb3.240.23.IP)
[18:16:13] <betawaffle> i need to come up with a simple project i can use to exercise these APIs, that would give me ideas of what to contribute
[18:16:42] *** Joins: amnn (amnn@moz-ro1qqu.ox.ac.uk)
[18:17:23] *** Quits: mindtree (Mitch@moz-5h22bp.iprimus.net.au) (Ping timeout: 121 seconds)
[18:17:27] *** Joins: w4ffles (textual@moz-34v1r4.res.rr.com)
[18:17:34] <betawaffle> is it just me, or is this really hard to read? fn map<F: Fn(T) -> U + Send + 'static, U: Send + 'static>(self, f: F) -> Stream<U, E>
[18:17:50] *** Quits: bbloom (bbloom@moz-mmuemv.wa.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[18:17:50] *** Quits: p32blo (p32blo@moz-305o0v.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[18:17:54] *** Joins: mindtree (Mitch@moz-8kr4tr.iprimus.net.au)
[18:17:56] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[18:17:58] *** Quits: psy (psy@moz-u9b.hr7.224.43.IP) (Ping timeout: 121 seconds)
[18:17:58] *** Quits: rudolph (rudolph@moz-qcqtiq.o3k5.dsq9.010d.2620.IP) (Quit: Leaving...)
[18:18:11] *** Joins: psy (psy@moz-u9b.hr7.224.43.IP)
[18:18:36] <bluss> betawaffle: yeah, I'd prefer using where clauses
[18:18:44] *** Joins: KarolisK (karolis@moz-1vd.8s1.28.194.IP)
[18:19:19] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[18:19:21] <rootnode> anyone have an idea why I get this ICE? https://github.com/rust-lang/rust/issues/25750
[18:19:30] <bluss> betawaffle: http://is.gd/EyXZxu
[18:19:39] <rootnode> until it's fixed I'd like to change my code so that I can compile my WM again
[18:20:21] <betawaffle> bluss: perhaps it's just the older version of rustdoc?
[18:20:24] *** Joins: qwerty_nor (Thunderbird@moz-lhq.glb.251.64.IP)
[18:20:44] <bluss> betawaffle: rustdoc doesn't format code perfectly
[18:20:59] <bluss> betawaffle: and I don't think it moves bounds from the type param list to a where clause (not sure)
[18:21:00] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[18:21:24] <betawaffle> bluss: i've seen it do that for std
[18:21:28] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[18:21:36] *** Quits: copycat (Thunderbird@moz-mm4e60.singnet.com.sg) (Ping timeout: 121 seconds)
[18:21:37] <betawaffle> ie. if i look at the code, it's different than the doc
[18:21:39] <bluss> betawaffle: yes it does something special for "doc inclusion"
[18:21:55] <bluss> betawaffle: it also gets some things wrong in doc inclusion. i.e libcore docs get forwarded
[18:22:16] <bluss> betawaffle: these are bugs to be fixed at some point
[18:22:40] *** Quits: blank_name (blank_name@moz-b1omh3.mi.frontiernet.net) (Ping timeout: 121 seconds)
[18:22:45] *** Quits: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP) (Connection closed)
[18:22:45] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:23:27] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Connection closed)
[18:23:31] *** Quits: ygrek (user@moz-8j9aeu.org.ua) (Ping timeout: 121 seconds)
[18:23:46] *** Joins: mib_urms7w (Mibbit@moz-emvmo9.dhcp.embarqhsd.net)
[18:23:48] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[18:23:56] <betawaffle> is there a reason for defining MyType.iter() rather than IntoIterator ?
[18:23:59] *** Quits: c_wraith (c_wraith@moz-946go0.click-network.com) (Quit: Leaving)
[18:24:01] <mib_urms7w> hi
[18:24:09] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[18:24:12] <carllerche> betawaffle: it is pretty hard to read... Unfortunately, rust doesn't have trait aliasing yet.
[18:24:16] *** Quits: atomic (atomic@moz-kvs6fc.torservers.net) (Ping timeout: 121 seconds)
[18:24:29] <steveklabnik> betawaffle: i don't think so, maybe there's some edge case or something
[18:24:31] <betawaffle> carllerche: yes, that's exactly what I want
[18:24:35] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[18:24:49] <betawaffle> steveklabnik: maybe IntoIterator didn't exist at the time?
[18:24:55] <bluss> betawaffle: good question. The old convention was certainly to use .iter() yes
[18:24:57] <steveklabnik> quite possible
[18:25:05] <mib_urms7w> it doesn't recognize this command $ rustc --version im on windows
[18:25:16] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.2)
[18:25:20] <bluss> betawaffle: but today  vec.iter() is a shortcut for (&vec).into_iter() right, the former is easier to type
[18:25:28] <bluss> betawaffle: the & being significant
[18:25:59] <mib_urms7w> can  anyone help
[18:26:12] <bluss> mib_urms7w: the $ is not part of the command fyi
[18:26:14] <betawaffle> bluss: but it's good form to implement IntoIterator if you have an iter() method, correct?
[18:26:24] <mib_urms7w> ok thanks
[18:26:28] <bluss> betawaffle: I can't think of a reason not to do it
[18:26:34] *** Quits: jnvsor (j@moz-1o1jrn.dynamic.ziggo.nl) (Ping timeout: 121 seconds)
[18:26:37] <betawaffle> for foo in bar ... is better than for for in bar.iter()
[18:26:45] <bluss> betawaffle: IntoIterator is for when there's an obvious way to iterate it
[18:27:00] <bluss> betawaffle: strings don't have that at the moment, for example
[18:27:04] <Ms2ger> betawaffle, not always equivalent, though, note
[18:27:07] *** Joins: c_wraith (c_wraith@moz-946go0.click-network.com)
[18:27:10] *** Quits: mib_urms7w (Mibbit@moz-emvmo9.dhcp.embarqhsd.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:27:47] *** Quits: Takronix (Takronix@moz-nm15k0.hr.cox.net) (Connection closed)
[18:28:09] <bstrie> Xirdus: the folks on #rust-gamedev are behind visual rust, I bet there are some users in there
[18:28:31] *** Joins: spider-mario (spidermario@moz-meu9c6.wb.wifirst.net)
[18:28:32] <bluss> carllerche: I was thinking, if you regen docs for mio, associated types will show up correctly now
[18:28:38] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[18:29:16] <Layl> does someone have an exame project of a plugin system written in rust
[18:30:23] *** Joins: frangio (frangio@moz-ke3.svs.12.186.IP)
[18:31:02] *** Joins: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net)
[18:31:52] *** Quits: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net) (Connection closed)
[18:32:08] *** Joins: bbloom (bbloom@moz-mmuemv.wa.comcast.net)
[18:33:05] <Layl> how reasonable an idea is it to just have a central DLL with the code that plugins will be written for, an executable that actually bootstraps that DLL and then the plugin dynamically links to that
[18:33:57] *** Quits: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net) (Client exited)
[18:34:22] *** Quits: yota (sdouche@moz-me92to.3iqc.r856.0e35.2a01.IP) (Quit: WeeChat 1.1.1)
[18:34:47] *** Quits: w4ffles (textual@moz-34v1r4.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:35:00] <Layl> I'm just trying to figure out what the best way to dynamically load in code is in rust
[18:35:33] *** Joins: yati (yati@moz-nm0.mvf.227.110.IP)
[18:35:56] *** Joins: ipjk (INDIANPOJKE@moz-n0l906.cust.telenor.se)
[18:36:00] *** Quits: ipjk (INDIANPOJKE@moz-n0l906.cust.telenor.se) (Connection closed)
[18:36:30] *** Joins: DemonOne (Avi@moz-be395p.red.bezeqint.net)
[18:36:38] <yati> Hi. I want to create a type alias for a numeric vector. I tried `type vector = Vec<T: Num>`, but it doesn't work. How do I express this?
[18:36:53] *** Quits: frangio (frangio@moz-ke3.svs.12.186.IP) (Client exited)
[18:37:13] <WindowsBunny> Layl: I heard DLL, the rest didn't make any sense
[18:37:48] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Connection closed)
[18:37:57] *** Joins: saterus (saterus@moz-rutqj0.res.rr.com)
[18:38:00] <Layl> well my question without any ways I think I might be able to solve it is: what's the best way to dynamically load in code to make a plugin system?
[18:38:06] <bluss> yati: you don't want the T type parameter in there?
[18:38:20] *** Joins: w4ffles (textual@moz-34v1r4.res.rr.com)
[18:38:25] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:38:32] <bluss> yati: I think the way to express it would be type vector<T> where T: Num = Vec<T>;  // I'm not sure it's properly enforced
[18:38:50] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[18:38:53] <betawaffle> Layl: in stable rust?
[18:38:55] <bluss> it might be a missing feature to enforce / use it properly but it does parse and compile with a where clause 
[18:39:09] <Layl> betawaffle, in unstable nightly
[18:39:29] <esgeh> Layl: without having given a lot of thought, similar constraints should apply like in C++: look out for name mangleing (e.g. disable it for the plugin's "entry" function that is called by the host and registers itself at the host). I don't know of any nice Rust lib that handles DLL loading somwhat OS agnostic. But that does not mean much.
[18:39:39] <betawaffle> and you know about the dynamic_lib module?
[18:40:11] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Quit: Leaving)
[18:40:14] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[18:40:15] *** Joins: pylbrecht (pylbrecht@moz-b4nhkg.dynamic.kabel-deutschland.de)
[18:40:25] <yati> bluss, It did compile that part. Let me see if it works.
[18:40:31] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[18:40:32] <esgeh> I suppuse, loading DLLs manually it's intrintiscally unsafe as you need to transmute stuff to function pointers etc
[18:40:38] <Layl> esgeh, I know there's something in the unstable std
[18:40:50] *** Quits: nickniko_ (nicknikolov@moz-27s.0d8.214.90.IP) (Connection closed)
[18:40:59] <Layl> I forgot what it was though
[18:41:09] <betawaffle> https://doc.rust-lang.org/nightly/std/dynamic_lib/index.html
[18:41:09] <bluss> yati: I don't think it buys you much, to put it that way. What do you mean by Vec<T: Num> ?
[18:41:10] *** Quits: jmbto (jmbto@moz-4pv6mn.hca5.8frp.0e35.2a01.IP) (Quit: WeeChat 1.1.1)
[18:41:11] *** Quits: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:41:13] <Layl> dynamic_lib that's it
[18:41:16] <Layl> thanks
[18:41:27] <Layl> I'm concerned what happens with generics and traits here though
[18:41:48] <esgeh> Layl: they won't work :)
[18:41:50] <betawaffle> Layl: most things im sure go out the window
[18:42:15] <carllerche> bluss: is rustdoc fixed on 1.0 or nightly?
[18:42:31] <Layl> egh I think I'm just gonna be better off binding it all together in the binary crate
[18:42:42] <bluss> carllerche: nightly
[18:43:02] <carllerche> ah, the docs are being built by 1.0
[18:43:07] <betawaffle> Layl: the interface between the plugin and the host program has to be very simple
[18:43:08] <carllerche> I don't use the nightlies :P
[18:43:25] <betawaffle> you wouldn't really want generics anyway
[18:43:25] *** Quits: cjwelborn (cjwelborn@moz-np6hed.al.charter.com) (Ping timeout: 121 seconds)
[18:44:00] <bluss> carllerche: ok. I think you could use the nightlies for this
[18:44:02] <Layl> unfortunately, gfx very much forces me to use generics
[18:44:16] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[18:44:27] <betawaffle> Layl: perhaps an example would show me?
[18:44:27] *** Joins: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP)
[18:44:28] *** Joins: mihi (mihi@moz-k60gq0.dip0.t-ipconnect.de)
[18:44:33] <bluss> carllerche: for example even stable seems to geneate docs with link to the nightly libstd docs (for usize, Result, libstd things)
[18:44:36] *** Quits: qwerty_nor (Thunderbird@moz-lhq.glb.251.64.IP) (Ping timeout: 121 seconds)
[18:44:43] <Layl> betawaffle, what do you mean?
[18:44:57] <Layl> example of what?
[18:45:00] <betawaffle> of a plugin you'd like to have generic functions in
[18:45:04] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[18:45:29] <Layl> well the thing is, gfx requires anything using it to have generics all over the place
[18:45:46] <Layl> so anything that requires gfx objects to be passed around for rendering needs this
[18:46:15] *** Joins: skade (skade@moz-q92odo.dynamic.kabel-deutschland.de)
[18:46:34] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[18:47:17] *** Quits: jacor (jacor@moz-m207k5.ant0.oo2o.0007.2601.IP) (Connection closed)
[18:47:28] *** Joins: jacor (jacor@moz-m207k5.ant0.oo2o.0007.2601.IP)
[18:47:31] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[18:48:11] <betawaffle> well, all the generics would need to be pre-exploded into the interface
[18:48:15] *** Quits: sigma (sigma@moz-k1ghg8.range109-153.btcentralplus.com) (Ping timeout: 121 seconds)
[18:48:34] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (RecvQ exceeded)
[18:48:38] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[18:48:41] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[18:48:42] <betawaffle> it'll be a very large surface area for a plugin
[18:48:50] *** Joins: ipjk (INDIANPOJKE@moz-n0l906.cust.telenor.se)
[18:48:53] <Layl> I'll think of something to fix that
[18:48:53] *** Joins: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de)
[18:48:53] *** Quits: ipjk (INDIANPOJKE@moz-n0l906.cust.telenor.se) (Connection closed)
[18:49:07] *** Quits: Morten (Morten@moz-o0hr4o.bb.online.no) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[18:49:15] *** Joins: Morten (Morten@moz-o0hr4o.bb.online.no)
[18:50:03] *** Joins: blank_name (blank_name@moz-tq3.7iq.183.192.IP)
[18:50:18] <betawaffle> Layl: macros!
[18:50:33] <Layl> the problem is the entire point of gfx is to abstract away the underlying platform
[18:50:47] <betawaffle> so, why does it need to be a dynamic library?
[18:50:55] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[18:51:07] <Layl> because it's a game engine and there needs to be some way of adding in new functionality
[18:51:19] <betawaffle> at runtime?
[18:51:39] <Layl> probably not at runtime no
[18:51:44] <Layl> not usually anyawys
[18:51:44] <betawaffle> as opposed to game-engine-as-a-library?
[18:51:56] <Layl> unless someone decides they want to have a plugin system for their game
[18:51:59] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[18:51:59] *** Joins: qwerty_nor (Thunderbird@moz-lhq.glb.251.64.IP)
[18:52:13] *** Quits: Jesin (Jesin@moz-8sq.94j.16.107.IP) (Quit: Leaving)
[18:52:29] <betawaffle> dynamic libraries are also very harsh optimization barriers
[18:52:37] *** Joins: andresv (textual@moz-cmffkg.cable.starman.ee)
[18:53:57] <betawaffle> no pruning of un-needed symbols or anything like that, either
[18:54:51] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[18:55:03] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[18:55:27] *** Joins: nicknikolov (nicknikolov@moz-27s.0d8.214.90.IP)
[18:55:45] *** Quits: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:56:01] *** Quits: qwerty_nor (Thunderbird@moz-lhq.glb.251.64.IP) (Ping timeout: 121 seconds)
[18:57:11] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[18:57:14] <rootnode> argh, I just can't come up with a small example to reproduce this ICE
[18:57:18] *** Quits: avikpal (avikpal@moz-rcr.dga.79.112.IP) (Connection closed)
[18:57:43] <mihi> Hello. I installed Rust 1.0 on 64-bit Windows 7, and now whenever some setup program launches a 32-bit command prompt (%WINDIR%\SYSWOW64\cmd.exe) its window will have a Rust icon. I know, mostly harmless, but is this issue known already?
[18:58:19] *** Quits: skade (skade@moz-q92odo.dynamic.kabel-deutschland.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:58:53] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Ping timeout: 121 seconds)
[18:59:14] <betawaffle> rust programs have icons on windows?
[18:59:32] *** Quits: ncarrillo (textual@moz-mke7jn.cable.rcn.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:59:55] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[19:00:02] <rootnode> what does "cannot relate bound region: ReScope(Remainder(BlockRemainder { block: 150, first_statement_index: 3 })) <= ReLateBound(DebruijnIndex { depth: 1 }, BrAnon(0))
[19:00:10] <rootnode> tell me?
[19:00:11] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[19:00:17] *** Quits: forgottenone (forgottenon@moz-bj9.b4g.45.92.IP) (Quit: Konversation terminated!)
[19:00:20] *** Joins: Zr40 (zr40@moz-92llkv.adsl.xs4all.nl)
[19:00:22] <bluss> rootnode: mostly that rustc has a bug!
[19:00:35] <rootnode> I...can see that :D 
[19:00:43] *** Quits: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se) (Client exited)
[19:00:48] <rootnode> I've been trying for days now to change my code so that I don't get that ICE
[19:01:06] <rootnode> but I can't even create a small example that reproduces it. Just my whole project that triggers it
[19:01:23] <betawaffle> rootnode: are you on rust nightly?
[19:01:28] <rootnode> yep
[19:01:36] <rootnode> the ICE also triggers on stable and beta
[19:01:47] *** Quits: mindtree (Mitch@moz-8kr4tr.iprimus.net.au) (Ping timeout: 121 seconds)
[19:01:51] <rootnode> so, nightly is my only "hope" right now, but even there it triggers
[19:01:56] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[19:02:02] *** Quits: blank_name (blank_name@moz-tq3.7iq.183.192.IP) (Ping timeout: 121 seconds)
[19:02:11] *** Joins: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de)
[19:02:37] *** Joins: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se)
[19:02:56] *** Quits: rmdashrf (rmdashrf@moz-ecr.kjm.54.128.IP) (Quit: WeeChat 0.4.2)
[19:02:57] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (A TLS packet with unexpected length was received.)
[19:03:20] <mihi> betawaffle, compiled EXEs don't, but the Rust start menu entries have (a R in some kind of cogwheel)
[19:03:36] <bstrie> rootnode: keep trying to reduce it, if you can. I don't think it's likely that it'll get fixed without a test case and a bug report :)
[19:03:56] <rootnode> bug report is online https://github.com/rust-lang/rust/issues/25750
[19:04:11] *** Joins: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net)
[19:04:11] <steveklabnik> i wonder if creduce would help
[19:04:29] <steveklabnik> anyway, see you all later
[19:04:41] *** Quits: mihi (mihi@moz-k60gq0.dip0.t-ipconnect.de) (Quit: Leaving)
[19:05:07] <rootnode> creduce?
[19:05:11] <betawaffle> rootnode: well, it's related to inference
[19:06:52] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[19:06:54] *** Quits: mukilan (mukilan@moz-agl.8le.164.122.IP) (A TLS packet with unexpected length was received.)
[19:07:01] <rootnode> hm
[19:07:17] *** Quits: veqz_ (veqz@moz-74gtia.au-net.ne.jp) (Ping timeout: 121 seconds)
[19:08:19] <betawaffle> and... im guessing from the location? maybe lifetime inference?
[19:08:42] <rootnode> hm, not using any lifetimes in that case
[19:09:04] <betawaffle> rootnode: can you get the error matching the actual current code? the error message in the issue doesn't match the code on github
[19:09:20] *** Joins: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de)
[19:09:54] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[19:10:12] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[19:11:05] *** Joins: eerie (Mibbit@moz-qld.8t4.67.109.IP)
[19:11:54] <rootnode> betawaffle: ok, I updated the code and the error message is https://gist.github.com/Kintaro/6eab88a32f601c9a4084
[19:12:18] <eerie> I want a function that takes as an argument anything that impls IntoIterator, where the iterator is over type T: Ord. how would the signature look like?
[19:12:25] <rootnode> betawaffle: https://github.com/Kintaro/wtftw/blob/master/core/src/config.rs#L81
[19:12:46] *** Joins: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net)
[19:12:55] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Client exited)
[19:12:57] *** Joins: skade (skade@moz-q92odo.dynamic.kabel-deutschland.de)
[19:12:57] *** bentley is now known as bentley|away
[19:13:22] *** Quits: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[19:13:24] <geri> how can i tell cargo to optimize my code for speed (e.g. -O3) ?
[19:13:25] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[19:13:47] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[19:13:52] *** darkowlzz is now known as darkowlzz|afk
[19:14:13] <betawaffle> rootnode: those hooks have lifetimes
[19:14:14] *** Joins: ty (ty@moz-i6c4to.wa.comcast.net)
[19:14:27] <rootnode> it used to work
[19:14:29] <bluss> eerie: where T: IntoIterator, T::Item: Ord
[19:14:33] <betawaffle> but they need to be inferred
[19:14:37] *** Quits: jincreator (Thunderbird@moz-d7i.i1g.195.175.IP) (Ping timeout: 121 seconds)
[19:14:45] <rootnode> then exactly when 1.0 hit it didn't
[19:14:47] *** Joins: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de)
[19:15:15] <betawaffle> ok, do you have the last rust version where it *did* work?
[19:15:29] <rootnode> I tried recreating it with the same hooks, but it kinda doesn't trigger
[19:15:36] *** Joins: rudolph (rudolph@moz-q5b.rfa.152.37.IP)
[19:15:52] <rootnode> the 1.0 beta still worked
[19:16:10] *** darkowlzz|afk is now known as darkowlzz
[19:16:18] <rootnode> can't really pinpoint which commit triggered it
[19:16:20] <betawaffle> do you have a snippet of the code where it *stopped* failing?
[19:16:26] <eerie> bluss: thnx
[19:16:34] *** Joins: Azdle (Azdle@moz-fv6arh.mn.comcast.net)
[19:16:41] <rootnode> you mean the code where I tried to reproduce it?
[19:16:55] <betawaffle> yes
[19:17:38] *** Joins: vikaton (uid59278@moz-0a9h81.ealing.irccloud.com)
[19:17:42] <bbloom> does rustdoc have anything for cross-references?
[19:17:58] *** Joins: starless (starless@moz-u9gmm1.res.rr.com)
[19:18:04] <vikaton> steveklabnik: is that Dining philosopher thing supposed to iterate once or forever?
[19:18:07] *** Quits: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP) (Connection closed)
[19:18:28] <vikaton> I think it's supposed to forever
[19:18:55] <betawaffle> vikaton: he left for the day
[19:19:02] <vikaton> o
[19:19:06] <rootnode> betawaffle: https://gist.github.com/Kintaro/4ffd94f70cc14093e00f
[19:19:20] <vikaton> well the code in rossetacode is wrong then :/
[19:19:42] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[19:20:12] *** Quits: vikaton (uid59278@moz-0a9h81.ealing.irccloud.com) (Quit: )
[19:20:24] <betawaffle> rootnode: i was thinking the problem lies in these: https://github.com/Kintaro/wtftw/blob/master/core/src/config.rs#L87-L88
[19:20:38] *** Quits: Hannibal_Smith (nico@moz-itj1vp.retail.telecomitalia.it) (Quit: Leaving)
[19:20:53] <rootnode> nope. when I comment them out, it still occurs
[19:20:55] *** Joins: survi (philip@moz-pbmbkg.dip0.t-ipconnect.de)
[19:21:02] <rootnode> somehow seems to be in key_handlers
[19:21:11] <rootnode> but I can't figure out why
[19:21:21] *** Joins: andars (andars@moz-bsldst.sntcca.sbcglobal.net)
[19:21:42] *** Quits: Morten (Morten@moz-o0hr4o.bb.online.no) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[19:22:03] *** Quits: rudolph (rudolph@moz-q5b.rfa.152.37.IP) (Quit: Leaving...)
[19:22:03] <etw> sfackler: ahh yes, I did
[19:22:06] *** Joins: pyon (pyon@moz-no9.411.236.190.IP)
[19:22:23] *** Joins: Morten (Morten@moz-o0hr4o.bb.online.no)
[19:23:03] <sfackler> the error reporting in those cases is super bizarre :(
[19:23:43] <etw> when I saw that I thought it was just a quirk of how cargo was pulling in git dependencies
[19:23:56] <betawaffle> rootnode: so, when you comment out key_handlers, it works?
[19:24:14] <bluss> sfackler: thank you for r+ing the arc change
[19:24:17] <betawaffle> if not, what makes you think it's key_handlers?
[19:24:19] <rootnode> yeah, except for error messages all over the place where code tries to use key_handlers 
[19:24:26] <betawaffle> sure
[19:24:30] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[19:24:39] <rootnode> but commeting it out makes the ICE disappear
[19:24:59] *** Joins: codec (Mibbit@moz-325m1f.abo.wanadoo.fr)
[19:25:00] *** Joins: mkpankov` (user@moz-upl.dee.149.83.IP)
[19:25:01] *** Joins: herr_jth (jth@moz-540.d5q.91.95.IP)
[19:25:24] *** Quits: herr_jth (jth@moz-540.d5q.91.95.IP) (Quit: Konversation terminated!)
[19:25:34] <codec> Can somebody tell me how to convert a vec to splice ?
[19:25:38] <rootnode> ok, let me rephrase that
[19:25:40] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Connection closed)
[19:25:42] *** Joins: herr_jth (jth@moz-540.d5q.91.95.IP)
[19:25:45] <codec> *slice
[19:25:45] <bbloom> i see that rustdoc comments are markdown & can have links, but i'm wondering if i can link to anchors
[19:25:56] <rootnode> commenting out all parts that use handlers
[19:25:56] <bluss> codec: to a slice, well there are several ways
[19:26:05] <rootnode> so, only library and wtftw_dir remai
[19:26:06] <bbloom> i often put [BLAH] style tags in my comments when some knowledge is spread out and i want to centralize a big hairy comment
[19:26:07] <rootnode> remain*
[19:26:11] <bluss> codec: &Vec<T> can be passed where &[T] is expected
[19:26:25] <bluss> codec: so that's the easiest way. You can also use &*vec or &vec[..]
[19:26:29] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[19:26:29] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[19:26:30] <codec> this is handled by the computer ?
[19:26:33] <codec> *compiler
[19:26:50] <bluss> codec: there's a rule called deref coercion for the &Vec -> &[T] casee
[19:26:59] <rootnode> it gets weirder and weirder
[19:27:16] <bbloom> steveklabnik: you're the docs mastermind, right? :-)
[19:27:52] <rootnode> betawaffle: ok. using only manage, startup or loghook works
[19:28:00] <rootnode> using any two of them fails
[19:28:11] <rootnode> and using key or mouse_handlers fails too
[19:28:21] <rootnode> so, it seems as soon as more than one handler is involved
[19:28:24] <betawaffle> rootnode: im guessing maybe some kind of conflicting lifetime
[19:28:37] <mkpankov`> steveklabnik: oh Steve, closing and deleting the issue isn't very effective as I can't copy-paste it to rust-lang/rust then :]
[19:29:11] <codec> bluss: I got an mismatched type exception : expected &mut [u8], found collections::vec::Vec<u8>
[19:29:37] <betawaffle> rootnode: does that mean you were able to put two things in your reduced case and have it fail?
[19:29:45] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[19:29:49] <rootnode> let me check
[19:30:25] <bluss> codec: it's &Vec -> &[T] and &mut Vec -> &mut [T]
[19:30:30] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[19:30:38] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[19:30:43] <codec> bluss: what do you mean ?
[19:30:59] <bluss> codec: the deref coercion rule only works for those cases
[19:31:08] <bluss> if it needs &mut [u8], you can pass &mut Vec<u8>
[19:31:14] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[19:31:16] <betawaffle> codec: you'd need a &mut Vec
[19:31:22] *** Quits: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net) (Quit: WeeChat 1.1.1)
[19:31:26] *** Joins: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net)
[19:32:03] <codec> bluss: Seems obvious now you said it ;)
[19:32:09] <rootnode> hm, nope
[19:32:13] *** Quits: saterus (saterus@moz-rutqj0.res.rr.com) (Quit: )
[19:32:27] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[19:32:31] <betawaffle> rootnode: new code for the reduced case? update the gist
[19:32:43] <bluss> codec: well. there's a bunch of rules :)
[19:33:36] <rootnode> betawaffle: https://gist.github.com/Kintaro/9efbe930d8628fece095 still doesn't trigger it
[19:33:45] <codec> bluss: sure but I find the syntax a bit awkward sometime
[19:34:01] <codec> bluss: and the compiler could have given me a hint in this case
[19:34:29] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[19:34:42] *** Joins: arBmind (Andreas@moz-86h02i.adsl.alicedsl.de)
[19:35:13] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[19:35:15] <bluss> it can always be better
[19:35:32] <bluss> personally I'm just amazed with how nice messages the compiler gives
[19:35:51] *** Joins: lenstr (lenstr@moz-897.vju.25.171.IP)
[19:36:14] <betawaffle> rootnode: could it have something to do with the Window type?
[19:36:24] *** Joins: phore (phore@moz-p8hanb.cable.rogers.com)
[19:36:26] <betawaffle> nvm
[19:36:27] <rootnode> Window is u64
[19:36:43] <rootnode> WindowSystem is just a trait
[19:37:05] <betawaffle> rootnode: ok, maybe you're trying to reduce too far too quickly
[19:37:07] <codec> bluss: sure compared to c++ template error there are a blessing, but coming from C# the path seems harder
[19:37:15] <betawaffle> rootnode: new branch :)
[19:37:17] *** Joins: rovar (rovar@moz-96effg.dyn.optonline.net)
[19:37:30] <betawaffle> start commenting out then deleting code
[19:37:35] *** Joins: zaeleus (zaeleus@moz-r5abra.cpe.cableone.net)
[19:37:41] *** Quits: survi (philip@moz-pbmbkg.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[19:37:44] <rootnode> betawaffle: I'll try again tomorrow. 4:30a.m., need to get some sleep :D
[19:37:48] <rootnode> but thanks for the help so far
[19:37:49] <betawaffle> k
[19:37:49] *** Quits: Morten (Morten@moz-o0hr4o.bb.online.no) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[19:38:01] *** Joins: Morten (Morten@moz-o0hr4o.bb.online.no)
[19:38:16] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[19:38:26] *** Joins: ctennis (ctennis@moz-ej0.24t.142.67.IP)
[19:38:35] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[19:38:51] *** Quits: mbudde (mbudde@moz-425rg1.customer.tdc.net) (Ping timeout: 121 seconds)
[19:39:53] *** Quits: lenstr (lenstr@moz-897.vju.25.171.IP) (Ping timeout: 121 seconds)
[19:39:58] *** Joins: gyro (gyro@moz-ukm.h91.222.64.IP)
[19:40:20] <gyro> Hello.
[19:40:28] <gyro> Any good guides on setting up a Vim workspace for rust? 
[19:40:44] *** Quits: aravindavk (aravinda@moz-r8d.tmm.172.122.IP) (Quit: Konversation terminated!)
[19:41:37] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[19:41:42] *** Quits: gopar (gopar@moz-5039uj.ca.comcast.net) (Quit: Leaving)
[19:41:47] *** Joins: bhamilton (bhamilton@moz-n82.hhp.210.105.IP)
[19:42:18] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[19:42:33] *** Quits: bhamilton (bhamilton@moz-n82.hhp.210.105.IP) (Connection closed)
[19:42:51] <codec> Can someone explain me why using an external crate (image) my compilation time as go from 1 second to 30 seconds ?
[19:43:13] *** Quits: ctennis (ctennis@moz-ej0.24t.142.67.IP) (Quit: Leaving...)
[19:43:43] *** Quits: keenan (keenan@moz-es1.bb3.240.23.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[19:44:39] *** Quits: skade (skade@moz-q92odo.dynamic.kabel-deutschland.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:44:52] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[19:45:03] *** Quits: minot2 (kkus@moz-baj4jj.74.srtnet.com) (Ping timeout: 121 seconds)
[19:45:12] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[19:45:26] *** Quits: nyx (nyx@moz-ivelpd.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:45:38] *** Joins: dkreuter (knizz@moz-fes.iga.129.213.IP)
[19:45:39] *** Quits: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:45:41] <kimundi> codec: might be due to static linking, which basically embeds all library files into the executable. Though 30s for one library sounds excessive - did it build other stuff as well?
[19:45:44] *** Quits: Azdle (Azdle@moz-fv6arh.mn.comcast.net) (Ping timeout: 121 seconds)
[19:46:00] <dkreuter> how can I reinterpret a u64 as i64 in rust
[19:46:08] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[19:46:41] <mkpankov`> playbot: 2u64 as 2i64 // dkreuter 
[19:46:42] -playbot- <anon>:9:17: 9:21 error: expected type, found `2i64`
[19:46:42] -playbot- <anon>:9         2u64 as 2i64 // dkreuter 
[19:46:42] -playbot- output truncated; full output at: http://bit.ly/1ELn7Pv
[19:46:57] <mkpankov`> playbot: 2u64 as i64 // dkreuter 
[19:46:57] *** darkowlzz is now known as darkowlzz|afk
[19:46:58] -playbot- 2
[19:47:14] <dkreuter> playbot, 255u8 as i8
[19:47:16] -playbot- -1
[19:47:19] <dkreuter> nice
[19:47:19] <codec> kimumdi: no I am just making a basic game  with sdl2. But since sdl2_image is broken on crates.io I choose to use the crate image instead. And the my compilation time has exploded
[19:47:50] *** Quits: eerie (Mibbit@moz-qld.8t4.67.109.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:48:13] <snow> Try std::mem::transmute dkreuter?
[19:48:33] <dkreuter> snow, I already got my answer, but thanks
[19:48:49] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[19:49:02] <jshs> codec: you're not the first one to complain: https://github.com/rust-lang/rust/issues/25069
[19:49:24] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[19:49:26] <snow> Oh, I missed that
[19:49:53] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (A TLS packet with unexpected length was received.)
[19:49:53] <bluss> this issue is about a particular type checking pathology ^ it's not the only thing that takes time when compiling rust
[19:49:58] <bluss> so it might not be that(?)
[19:50:30] *** Quits: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net) (Ping timeout: 121 seconds)
[19:50:37] <bluss> oh that issue is about exactly image
[19:50:56] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:51:18] <codec> damned sdl_image is broken and this take forever to compile
[19:52:03] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:52:05] *** Joins: morton (Mibbit@moz-m3km7q.gtn.ru)
[19:52:31] *** Joins: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de)
[19:52:38] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[19:52:48] *** Quits: Morten (Morten@moz-o0hr4o.bb.online.no) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[19:52:54] *** Joins: Morten (Morten@moz-8sq5uv.bb.online.no)
[19:53:16] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[19:54:44] *** Joins: atomic (atomic@moz-nvn.c93.7.50.IP)
[19:55:18] <fkaa> codec: you can disable formats you're not using
[19:55:24] <geri> is there a way to disable optimization for a specific function in rust?
[19:55:36] *** Joins: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at)
[19:56:35] <codec> fkaa: But should image be compiled as a dynamic library ?
[19:57:05] <fkaa> can't answer that, i just use cargo and don't think much about it
[19:57:40] *** Quits: moerk (christian@moz-00ceea.customer.tdc.net) (Client exited)
[19:57:46] *** Quits: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP) (Ping timeout: 121 seconds)
[19:59:43] *** Quits: dinfuehr (dinfuehr@moz-5n5gbo.highway.telekom.at) (Ping timeout: 121 seconds)
[20:00:08] <Ms2ger> Not usually
[20:00:24] <fkaa> is that compile time regression a priority?
[20:01:30] *** Joins: durka42 (Adium@moz-qsuual.pa.comcast.net)
[20:01:43] <codec> well I am making a toy project so there is no priority
[20:01:50] <cow_2001> try!(File::open("foo")); doesn't work for me
[20:02:00] <Ms2ger> Manishearth, can you prioritize it up? :)
[20:02:16] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[20:02:17] <cow_2001> says expected type is (), but i get a Result<_, _> instead
[20:02:43] <sam113101> cow_2001: what's the return type of your function?
[20:03:04] <VShell> cow_2001: try!() has to be used in a function that returns a Result.
[20:03:11] <cow_2001> oh. :|
[20:03:23] <Xirdus> when i cast u32 to i32, is there any guarantee of signedness?
[20:03:28] <cow_2001> could you explain it a bit more?
[20:03:39] <SpaceManiac> Xirdus: it's a bit cast
[20:03:52] <sam113101> http://doc.rust-lang.org/stable/book/error-handling.html#using-try!
[20:04:06] <cow_2001> thanks!
[20:04:20] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[20:04:22] <slimsag> Why is traits link at bottom of page broken? https://doc.rust-lang.org/book/enums.html
[20:04:24] *** Joins: mbudde (mbudde@moz-425rg1.customer.tdc.net)
[20:04:29] <fkaa> codec: meant for the core team :p
[20:05:19] <sam113101> slimsag: it's fixed on nightly: https://doc.rust-lang.org/nightly/book/enums.html
[20:05:21] <VShell> cow_2001: basically, try!(foo()) expands to match foo() { Err(e) => return Err(e), Ok(res) => res } - slightly more complicated than that, but, point is that it is simply "return the error or else continue".
[20:05:29] <Xirdus> SpaceManiac: well, it only makes sense its a bit cast - but is there any explicit guarantee made by the language? im asking, because overflows are UB afaik, and its technically an overflow
[20:05:44] <slimsag> sam113101: ah, okay, cool
[20:05:53] <cow_2001> is there a reasonable way of unpacking Result?
[20:05:56] <SpaceManiac> Xirdus: it's not an overflow, it's well-defined as reinterpreting the bits
[20:05:59] *** bentley|away is now known as bentley
[20:06:25] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Ping timeout: 121 seconds)
[20:06:26] <cow_2001> outside of a function returning Result
[20:06:48] <jshs> cow_2001: what should happen if the result is an error?
[20:07:01] <cow_2001> not sure
[20:07:46] *** Joins: Jesin (Jesin@moz-8sq.94j.16.107.IP)
[20:08:56] *** Joins: trigen (MSX@moz-sgda69.static.versatel.nl)
[20:09:15] <VShell> cow_2001: foo().unwrap() will panic!() if foo() is an Err, otherwise unpack it. that may or may not be reasonable. otherwise, there's .unwrap_or() and .unwrap_or_else() which might be useful.
[20:10:17] <cow_2001> reading Result's reference i see .ok().expected()
[20:10:18] *** Joins: kgrandon (Adium@moz-savc5e.ca.comcast.net)
[20:11:05] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[20:11:07] <starless> cow_2001: I think (and sorry if you know about this already and I'm misunderstanding) you want to do matching on it
[20:11:09] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[20:11:15] *** Quits: gingermusketeer (gingermuske@moz-78l86h.compute.amazonaws.com) (Connection closed)
[20:11:25] *** Joins: gingermusketeer (gingermuske@moz-ht8jnr.compute.amazonaws.com)
[20:11:26] *** Joins: agjacome (agjacome@moz-40oj7a.dynamic.jazztel.es)
[20:11:44] <starless> cow_2001: match my_result { Ok(value) => ..., Err(err_message) => ... }
[20:11:55] <slimsag> If a function returns an enum with two possible values: i32 and i64, what will the size in memory of the returned value be? the max of both / 64 bits ?
[20:12:12] <starless> cow_2001: where my_result is a variable bound to a Result
[20:12:19] <bluss> slimsag: size of largest variant + the enum tag
[20:12:42] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[20:12:50] <bluss> slimsag: so it sounds like i64 x 2 in this case, I think struct layout will force the tag to be 64-bit
[20:12:58] *** Joins: iu (iu@moz-6263qv.cc.cmu.edu)
[20:13:01] <slimsag> bluss: how large is the enum tag?
[20:13:02] <VShell> cow_2001: .ok().expect("foo") will lose you what the error message actually is and still panic anyway if it's an error - .unwrap() does much the same thing but will print the error message in the Result.
[20:13:06] <slimsag> ah, I see
[20:13:27] <bluss> slimsag: it tries to be as small as possible. Two variants can fit in a byte
[20:13:43] <bluss> slimsag: but for alignment reasons I think it will be u64 here
[20:13:45] <cow_2001> hmm i see
[20:13:51] <iu> Hi! Is it reasonable that a public method of a private module cannot have a private type in its signature?
[20:13:53] <slimsag> okay
[20:14:04] <bluss> slimsag: depends on platform's alignment wishes for i64
[20:14:19] <rootnode> betawaffle: ok, I couldn't sleep without trying this... https://gist.github.com/Kintaro/087d949748a7e968927c
[20:14:19] <cow_2001> many thanks everyone!
[20:14:23] <rootnode> this triggers it
[20:14:48] *** Joins: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net)
[20:14:55] <bluss> playbot: enum E { A(i32), B(i64) }  std::mem::size_of::<E>()  // slimsag
[20:14:56] -playbot- 16
[20:15:01] <betawaffle> rootnode: i was digging down to BTreeMap<MouseCommand, MouseHandler>
[20:15:07] *** Quits: andresv (textual@moz-cmffkg.cable.starman.ee) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:15:08] <betawaffle> which seems to trigger it too
[20:15:13] <iu> (a private type for the whole crate; not private to the module)
[20:15:18] <starless> cow_2001: no prob, bob
[20:15:53] *** Joins: JagaJaga (JagaJaga@moz-ua8.hhl.62.178.IP)
[20:15:54] <slimsag> bluss: so that is 8 bytes for the variant and 8 for the tag (index for A/B, right?)
[20:15:58] <bluss> yes
[20:15:59] *** Joins: maxjacobson (maxjacobson@moz-nc0r8s.dyn.optonline.net)
[20:16:07] <slimsag> bluss: okay, great, thank you! :)
[20:16:19] <bluss> slimsag: there's layout optimizations for nonnullable types such as &T
[20:16:23] <rootnode> betawaffle: yeah, this version triggers it without BTreeMap
[20:16:31] <rootnode> so we can exclude that as the culprit I think
[20:16:34] <bluss> slimsag: so Option<&T> is same size as &T
[20:16:38] <betawaffle> yea
[20:17:01] *** Quits: dkreuter (knizz@moz-fes.iga.129.213.IP) (Quit: Ex-Chat)
[20:17:17] <iu> In other words, is this reasonable? https://play.rust-lang.org/?gist=35e66a46f43e1db266de&version=stable
[20:17:21] *** Quits: nicknikolov (nicknikolov@moz-27s.0d8.214.90.IP) (Connection closed)
[20:17:34] <slimsag> bluss: um, wouldn't the max variant for Option be T itself anyway?
[20:17:44] <slimsag> oh, but the tag index
[20:17:50] <slimsag> interesting
[20:18:23] *** Joins: grodan (Mibbit@moz-o5eg8b.bredband.comhem.se)
[20:18:58] <bluss> slimsag: what's cooler is that rust is so keen on this optimization it digs into types recursively to find a nonnullable pointer or field
[20:18:59] <rootnode> added it to the issue
[20:19:15] <bluss> slimsag: so Option<Vec<T>> is the same size as Vec<T>
[20:19:37] *** Joins: nercury (nercury@moz-8h0btl.static.zebra.lt)
[20:19:41] <slimsag> bluss: so at the lowest level how is Option<&T> being represented when it is None rather than Some(&T) ?
[20:19:48] <bluss> a null
[20:19:54] <slimsag> Ahhh, cool! :D
[20:20:08] <Xirdus> slimsag: None is all zeroes, Some is not-all-zeroes
[20:20:26] *** Joins: nicknikolov (nicknikolov@moz-27s.0d8.214.90.IP)
[20:20:34] *** Joins: niconii (nicole@moz-r8dlmh.frgo.qwest.net)
[20:20:34] *** ChanServ sets mode: +o niconii
[20:20:37] <slimsag> but yet the null pointer isn't exposed to the developer, this is cool!
[20:20:54] <Xirdus> slimsag: theres no such thing as null pointer in Rust ;)
[20:21:05] <slimsag> :D
[20:21:16] <Xirdus> even raw pointers cant be null
[20:21:20] <starless> So, I'm having some trouble figuring out what I should do to appease the lifetime checker with this code: http://is.gd/79s8V5 ;; I know the lifetime of the variable "formatted" is going to be from its declaration to the last line of the function "parse_user_input", and that's a problem because my return value indirectly depends on "formatted", but I don't know how to extend the lifetime of the data bound to "formatted" appropriately (or at all, rea
[20:21:21] <tilpner> No?
[20:21:21] <starless> lly).
[20:21:22] *** Joins: maximih (maximih@moz-0r2bjb.bredband.telia.com)
[20:21:26] <tilpner> playbot: 0 as *mut ()
[20:21:27] <Xirdus> ...or rather, shouldnt be null, in well-formed code
[20:21:28] -playbot- 0x0
[20:21:31] <bluss> raw poitneers can be null fine
[20:21:40] <simukis> playbot: ::std::ptr::null()
[20:21:41] -playbot- <anon>:9:9: 9:25 error: unable to infer enough type information about `_`; type annotations required [E0282]
[20:21:42] -playbot- <anon>:9         ::std::ptr::null()
[20:21:42] -playbot- output truncated; full output at: http://bit.ly/1PX8O66
[20:22:31] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[20:22:33] <bluss> raw pointers are not among the nonnullable things in rust. Option<*mut T> is 2 x pointer size for that reason
[20:22:36] *** Joins: futile (felix@moz-cmcd12.unity-media.net)
[20:22:45] <bluss> (talking about size_of)
[20:23:00] <slimsag> where are raw pointers documented/discussed so I can read about them?
[20:23:12] <Xirdus> ...wait
[20:23:16] <Xirdus> was it always like that?
[20:23:24] <bluss> I'm sure
[20:23:44] <bluss> slimsag: http://doc.rust-lang.org/book/raw-pointers.html 
[20:23:51] *** Quits: }ls{ (uhelp@moz-nak74f.dip0.t-ipconnect.de) (Quit: User terminated by real life interrupt)
[20:23:54] *** Joins: fengshaun (fengshaun@moz-oagll1.cpe.pppoe.ca)
[20:23:58] <slimsag> thank you!
[20:24:12] <niconii> !raw pointers
[20:24:14] *** Joins: Jessin (Jesin@moz-qb9.79h.16.107.IP)
[20:24:19] <bluss> slimsag: a number of operations on raw pointers are guarded with the unsafe qualifier, but not creating, comparing
[20:24:23] <Xirdus> i saw an issue in winapi-rs that said some args in some functions should take Option<T*> instead of T* because of ptrs being non-nullable
[20:24:29] <niconii> !learn raw pointers = http://doc.rust-lang.org/book/raw-pointers.html
[20:24:29] <rustbot> Learned factoid 'raw pointers'.
[20:24:32] <rootnode> steveklabnik: got a riddle for you https://github.com/rust-lang/rust/issues/25750
[20:24:37] <bluss> Xirdus: maybe it was function pointers?
[20:24:40] *** Quits: Soni (SoniEx2@moz-7ho.p0a.104.187.IP) (Ping timeout: 121 seconds)
[20:24:48] <bluss> !raw pointers
[20:24:48] <rustbot> http://doc.rust-lang.org/book/raw-pointers.html
[20:25:08] <slimsag> so raw pointers are inside unsafe code blocks, so you can't have null pointers in safe rust code then?
[20:25:15] <Xirdus> bluss: definitely struct pointers
[20:25:20] <bluss> slimsag: no
[20:25:23] <niconii> slimsag: *dereferencing* raw pointers is unsafe
[20:25:25] *** Quits: maximih (maximih@moz-0r2bjb.bredband.telia.com) (Ping timeout: 121 seconds)
[20:25:37] <niconii> slimsag: raw pointers themselves are safe as long as you don't try to dereference
[20:25:38] <slimsag> ahh, okay
[20:25:39] <bluss> slimsag: raw pointers are fine to have everywhere. It's certain operations that are blocked with unsafe
[20:25:44] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[20:25:52] *** Quits: durka42 (Adium@moz-qsuual.pa.comcast.net) (Quit: Leaving.)
[20:25:57] <slimsag> so even though they can be null, they can't crash your program
[20:25:58] *** Joins: agjacome_ (agjacome@moz-kt22hl.dynamic.jazztel.es)
[20:26:01] <slimsag> (in safe rust)
[20:26:11] <niconii> slimsag: right, in safe rust
[20:26:13] *** Quits: Jesin (Jesin@moz-8sq.94j.16.107.IP) (Ping timeout: 121 seconds)
[20:26:24] <roido> slimsag: you wouldn't be able to compile it in safe rust
[20:26:34] *** Quits: Jessin (Jesin@moz-qb9.79h.16.107.IP) (Quit: Leaving)
[20:26:37] <slimsag> awesome
[20:27:43] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[20:27:45] *** Quits: vortex (vortex@moz-skqfhn.novotelecom.ru) (Ping timeout: 121 seconds)
[20:27:52] *** Quits: mbudde (mbudde@moz-425rg1.customer.tdc.net) (Ping timeout: 121 seconds)
[20:28:06] <bluss> pointers aren't either valid or null. They can be dangling, unaligned or other broken stuff
[20:28:21] <bluss> and you'll avoid that with safe rust
[20:28:22] *** Quits: tincan (tincan@moz-05q.1nm.133.145.IP) (Connection closed)
[20:28:23] *** Joins: maxymajzr (maxy@moz-5o2c6t.net.t-com.hr)
[20:28:51] *** Quits: agjacome (agjacome@moz-40oj7a.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[20:28:53] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:29:07] *** Joins: ctennis (ctennis@moz-ej0.24t.142.67.IP)
[20:29:07] *** bentley is now known as bentley|away
[20:29:51] *** Joins: Jesin (Jesin@moz-qb9.79h.16.107.IP)
[20:29:56] <Remram> RustDT requires the Rust 'src' directory... I don't get that from binary releases or multirust, correct?
[20:30:02] <maxymajzr> good evening, just wanted to drop a huge bow to guys working on rust, docs are absolutely amazing and even though i've been fiddling for only 12 hours - i find the language amazing. awesome work
[20:30:07] *** Joins: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp)
[20:30:15] <Remram> I need to put the source distribution somewhere?
[20:30:42] *** Joins: imjacobclark (Mibbit@moz-5g68lp.range86-156.btcentralplus.com)
[20:30:56] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (A TLS packet with unexpected length was received.)
[20:30:57] <duesenfranz_> Remram: you can clone the github repository, there's a command to do this without downloading all the history...
[20:30:57] *** Joins: agjacome (agjacome@moz-uhnlq3.dynamic.jazztel.es)
[20:31:03] <imjacobclark> Using Hyper, is there a way to count how long it takes for the request to come back?
[20:31:12] *** Quits: agjacome_ (agjacome@moz-kt22hl.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[20:31:27] <Remram> I guess I could also use Git yes
[20:31:33] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[20:31:52] <reem> imjacobclark: record the time when you made the request, then the time when you got the response.
[20:32:01] <reem> There's no built in way
[20:32:19] <betawaffle> rootnode: i reduced it even further
[20:32:25] <starless> be back
[20:32:37] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[20:32:40] <bluss> “Rust’s *const T and *mut T are similar to C’s const T* and T*, respectfully”  //respect, nice
[20:32:54] <rootnode> betawaffle: what? how?
[20:33:04] <betawaffle> look at the issue
[20:33:18] <imjacobclark> reem: how would I know when I got the resonse?
[20:33:40] <reem> imjacobclark: hyper is synchronous
[20:33:53] <reem> So when you have a response, the response came back.
[20:33:54] <imjacobclark> reem, thanks.
[20:34:04] <reem> Sure :)
[20:34:29] <betawaffle> it's somehow the combination of the closure that take the trait object, in a box, twice, in a struct
[20:34:55] <rootnode> wow
[20:35:05] <rootnode> I can't be the first one that tried to use that
[20:35:15] <betawaffle> well...
[20:35:20] <betawaffle> you can be
[20:35:36] * betawaffle awards rootnode a certificate
[20:35:47] *** Quits: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net) (Ping timeout: 121 seconds)
[20:36:01] *** Joins: alaska_ (alaska@moz-8bdjem.fios.verizon.net)
[20:36:54] * rootnode frames it and puts it up on the wall
[20:37:32] *** Joins: mou (donwilliam@moz-lq9kg8.cpe.webspeed.dk)
[20:37:34] *** Quits: alaska_ (alaska@moz-8bdjem.fios.verizon.net) (A TLS packet with unexpected length was received.)
[20:37:55] *** zz_NameNotFound is now known as NameNotFound
[20:39:03] *** Quits: csherratt (colin@moz-357qdq.cable.teksavvy.com) (Quit: Konversation terminated!)
[20:39:20] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[20:40:20] *** Quits: xcombelle (xcombelle@moz-o9pb7i.abo.wanadoo.fr) (Quit: Leaving)
[20:40:34] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[20:41:03] *** Joins: p32blo (p32blo@moz-u03k25.dsl.telepac.pt)
[20:41:26] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[20:41:27] *** Quits: jviereck (Adium@moz-1tirsh.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:41:58] <bluss> nice work on minification both
[20:43:03] *** Quits: namespace (user@moz-na89d2.wa.frontiernet.net) (Quit: Leaving)
[20:43:09] *** Joins: chippers (chip@moz-26d.2gk.254.199.IP)
[20:43:46] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[20:44:50] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Quit: leaving)
[20:45:49] *** Quits: Cindela (cindela@moz-dlkpia.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[20:46:08] *** Quits: AopicieR (AopicieR@moz-gjn7ie.dip0.t-ipconnect.de) (Quit: leaving)
[20:48:03] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[20:49:07] <rootnode> betawaffle: any idea on how to work around this for the moment?
[20:50:14] <betawaffle> rootnode: well, not knowing the actual cause... not sure
[20:50:44] <betawaffle> oh, yes
[20:50:51] <betawaffle> rootnode: specify the lifetimes
[20:51:00] <betawaffle> lemme show you
[20:51:49] <betawaffle> https://gist.github.com/betawaffle/42f3b151a84940d449eb
[20:52:12] <betawaffle> so, you'll need explicit lifetimes on the boxed functions
[20:52:24] <betawaffle> the trait objects in them*
[20:52:44] <rootnode> oh god...that's gonna be...fun
[20:52:50] *** Quits: Guest21554 (ali@moz-mvj.5j5.170.107.IP) (Quit: ohnooooooo)
[20:53:23] *** Quits: tomprogrammer (thomas@moz-f6fdbb.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.2)
[20:53:32] <bluss> hm isn't there a better way
[20:53:34] *** Joins: csherratt (colin@moz-357qdq.cable.teksavvy.com)
[20:53:38] *** Joins: ali (ali@moz-mvj.5j5.170.107.IP)
[20:53:40] *** Joins: fkaa_ (tundmatu@moz-501od2.business.telia.com)
[20:53:59] *** Quits: lerc (quassel@moz-nitv9j.telstraclear.net) (Connection closed)
[20:54:13] <cow_2001> i am trying to let v: Vec<&str> = v.iter().map(|s| s.split("\t").collect()[1]);
[20:54:19] *** Joins: bmcorser (uid18416@moz-o4s304.ealing.irccloud.com)
[20:54:21] <cow_2001> i don't know what i'm doing wrong
[20:54:27] <imjacobclark> how can i convert what an enum returns to a string?
[20:54:35] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[20:54:38] *** ali is now known as Guest51437
[20:54:46] <bmcorser> ello
[20:54:54] *** Quits: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se) (Client exited)
[20:54:59] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[20:55:02] <cow_2001> basically, i want to take the second element in a split of each element in a vector of strings
[20:55:06] <bmcorser> pythonista here, taking first steps into rust
[20:55:16] <cow_2001> bmcorser: me too :D
[20:55:18] <betawaffle> bmcorser: welcome
[20:55:22] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[20:55:27] <bmcorser> cow_2001: lets be friends :)
[20:55:33] <bmcorser> hello betawaffle 
[20:55:36] <cow_2001> bmcorser: http://lucumr.pocoo.org/2015/5/27/rust-for-pythonistas/
[20:56:24] <bluss> rootnode: ok, using for<'a> Fn(&'a Trait) is just the same thing, same ice
[20:56:28] *** Joins: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se)
[20:56:58] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[20:56:58] *** Joins: nbg (nbg@moz-gen.aeo.146.5.IP)
[20:57:00] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[20:57:10] *** Quits: p32blo (p32blo@moz-u03k25.dsl.telepac.pt) (Ping timeout: 121 seconds)
[20:57:26] <bluss> cow_2001: you're not collecting the outer iterator btw
[20:58:00] <bluss> cow_2001: and the inner .collect() should be best be avoided
[20:58:02] <bmcorser> cow_2001: i read that one .. i think adjusting to types actually mattering is going to be hard coming from python (unless you wrote in a typed lang before)
[20:58:52] <cow_2001> bmcorser: i've been learning a bit of haskell
[20:59:03] *** Quits: mkpankov` (user@moz-upl.dee.149.83.IP) (Ping timeout: 121 seconds)
[20:59:07] <cow_2001> bluss: what's the alternative?
[20:59:28] <bluss> cow_2001: only taking the second element without iterating out all splits and allocating a vector
[20:59:40] <bluss> the second element is .nth(1)  on an iterator, but you get an Option<&str>
[21:00:33] <bmcorser> cow_2001: i looked at the language a few years ago... it looked really great (and i was attracted to the speed) so when i heard rust had a similar type system (and meant i could write low-level without becoming a C++ guy) i absolutely came running
[21:01:24] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[21:02:35] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:02:49] *** Quits: atomic (atomic@moz-nvn.c93.7.50.IP) (Connection closed)
[21:02:58] *** Quits: fengshaun (fengshaun@moz-oagll1.cpe.pppoe.ca) (Quit: bye bye!)
[21:03:01] *** Joins: atomic (atomic@moz-5uk5u4.tor-exit.network)
[21:03:03] <bmcorser> i have a question for the rustaceans in the channel: i want to use modules to break up my code into smaller files. one thing i do in python is declare variables globally in a module, then import the module and access the variables from higher up like my_module.my_variable
[21:03:04] *** Quits: atomic (atomic@moz-5uk5u4.tor-exit.network) (Connection closed)
[21:03:07] *** Joins: atomic_ (atomic@moz-5uk5u4.tor-exit.network)
[21:03:38] <bmcorser> this keeps my higher up modules free of lots of variable definitions
[21:03:54] <WindowsBunny> bmcorser: avoid global variables
[21:04:43] *** Quits: thelink2012 (Mibbit@moz-ig7.006.59.187.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:04:51] <WindowsBunny> bmcorser: but you can certainly put variables into modules
[21:04:57] <imjacobclark> is there a way to count an elapsed time in Rust?
[21:04:58] <bmcorser> WindowsBunny: i hear you, but since my variables are only global to a module ...
[21:04:59] <sp3d> hm, is there a reason for std::env::ArgsOs to allocate instead of returning slices out of argv?
[21:05:15] <sp3d> args_os*, rather, I guess
[21:05:22] <WindowsBunny> bmcorser: rust doesn't have a global scope/namespace
[21:05:32] *** Joins: gopar (gopar@moz-5039uj.ca.comcast.net)
[21:05:55] <bluss> sp3d: I think it's that argv is often overwritten
[21:06:05] *** Joins: p1start (p1start@moz-nftjhe.org)
[21:06:08] <bmcorser> i want to be able to write code like parent_mod_fn(child_mod::variable)
[21:06:16] *** Joins: lenstr (lenstr@moz-897.vju.25.171.IP)
[21:06:21] <WindowsBunny> bmcorser: and the recommendation against static variables has nothing to do with scope, but rather a significant amount of people consider it poor design
[21:06:25] <WindowsBunny> bmcorser: well sure, why not
[21:06:29] <niconii> bmcorser: global variables are usually not a good idea in general, there's usually more elegant ways to do it
[21:06:34] *** Joins: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net)
[21:06:50] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[21:06:56] <sp3d> bluss: in the memory space of Rust programs? by whom?
[21:07:16] <bmcorser> niconii: open to ideas :)
[21:07:16] <WindowsBunny> bmcorser: global variables are poor design because it makes things impure in that functions behave differently based on factors other than their inputs
[21:07:29] <WindowsBunny> bmcorser: also thread safety issues
[21:08:12] <WindowsBunny> bmcorser: constants are totally okay though, its only mutable static variables that are usually bad design
[21:08:28] <bluss> sp3d: don't know exactly
[21:08:28] *** Joins: agjacome_ (agjacome@moz-4ge38l.dynamic.jazztel.es)
[21:08:40] *** Quits: agjacome (agjacome@moz-uhnlq3.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[21:09:06] *** Joins: thelink2012 (Mibbit@moz-etr.cua.214.186.IP)
[21:09:22] *** Joins: survi (philip@moz-pbmbkg.dip0.t-ipconnect.de)
[21:10:23] <bmcorser> WindowsBunny: i'm just using modules to namespace my variables
[21:10:32] <bmcorser> i want to find a way to do that in rust
[21:11:01] <cow_2001> how about: let v: Vec<&str> = v.iter().map(|s| s.trim_left_matches("\t")).collect();
[21:11:06] <cow_2001> it won't work
[21:11:26] <bluss> please tell what the error message is
[21:11:36] <niconii> bmcorser: your needs might be better met by using structs
[21:11:42] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[21:11:59] <cow_2001> there is no error message
[21:12:10] <bmcorser> can i give my use case in more detail?
[21:12:11] <cow_2001> it just won't discard
[21:12:13] *** Quits: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net) (Connection closed)
[21:12:17] <niconii> bmcorser: sure
[21:12:31] <extempore> 	
[21:12:36] <cow_2001> oh. oops!
[21:13:08] *** Quits: extempore (paulp@moz-oqpvrb.ptld.qwest.net) (Quit: leaving)
[21:13:29] <bmcorser> i'm making a CLI using clap-rs
[21:13:58] *** Quits: Jesin (Jesin@moz-qb9.79h.16.107.IP) (Quit: Leaving)
[21:14:03] <SpaceManiac> imjacobclark: take a look at the `time` crate
[21:14:15] <bmcorser> to define subcommands i need to make fairly long-winded chained calls to App and SubCommand 
[21:14:45] <WindowsBunny> bmcorser: You already can put your static variables in modules
[21:15:09] <bmcorser> i want to put these SubCommand calls into their own module (there won't be anything else in that module) and reference it from the "parent" module
[21:15:12] <WindowsBunny> bmcorser: If you understand how to use modules, then you should have no problem putting static variables in modules
[21:15:13] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[21:16:18] <bmcorser> WindowsBunny: it's not modules i'm having trouble with :)
[21:16:28] <imjacobclark> How can I get the difference between two SteadyTimes in Rust time lib?
[21:16:29] <slimsag> If a crate internally implements the Drop trait for a type T.. and someone `use the_crate::T;` but not `use Drop;` (?) will the drop still run?
[21:17:07] <bluss> slimsag: yes
[21:17:32] <duesenfranz_> bmcorser: can you put a minimal example on play.rust-lang.org of what you want to achieve/what doesn't work?
[21:17:35] <bluss> slimsag: Drop is in the prelude though. But destructors run whether in scope or not
[21:17:35] <yati> bluss, So it didn't work; `type Example<T> where T: Num = Vec<T>` doesn't let me just do `fn foo(x: &Example)...` it needs a type arg on Example
[21:17:40] *** Joins: AngelOfSol_ (AngelOfSol@moz-9l0nls.fios.verizon.net)
[21:17:47] <bmcorser> just not sure that i want to use static for something that is just there to parse command line args on invocation (and won't be used in the rest of the program)
[21:18:00] <slimsag> bluss: "prelude"?
[21:18:07] <bmcorser> duesenfranz_: i can if it supports multiple files ;)
[21:18:14] <duesenfranz_> slimsag: stuff that is used by default
[21:18:19] <WindowsBunny> bmcorser: modules don't need multiple files
[21:18:20] <slimsag> ah, okay
[21:18:27] <WindowsBunny> bmcorser: You can define the contents of a module inline
[21:18:27] <bluss> yati: aha.. I had never tried. Not sure if it's possible to be this convenient in rust unfortunately
[21:18:39] <bluss> slimsag: http://doc.rust-lang.org/std/prelude/
[21:18:45] <bmcorser> WindowsBunny: thanks
[21:18:51] <bmcorser> duesenfranz_: ok give me a se
[21:18:53] <bmcorser> *sec
[21:19:15] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[21:19:16] *** Joins: ty (ty@moz-i6c4to.wa.comcast.net)
[21:19:44] <ty> burntsushi: are you online?
[21:19:48] <WindowsBunny> playbot: mod foo{pub fn bar(){println!("hi bmcorser")}} foo::bar()
[21:19:49] -playbot- hi bmcorser
[21:19:49] -playbot- ()
[21:19:53] <burntsushi> ty: hi!
[21:20:01] <ty> hey, I have some bad news
[21:20:01] <duesenfranz_> bmcorser: something like this works tough http:://is.gd/awAqQf
[21:20:03] *** Quits: AngelOfSol (AngelOfSol@moz-9l0nls.fios.verizon.net) (Ping timeout: 121 seconds)
[21:20:08] *** Quits: thelink2012 (Mibbit@moz-etr.cua.214.186.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:20:13] <burntsushi> ty: what's that?
[21:20:13] <WindowsBunny> duesenfranz_: You need to work on your url skills
[21:20:15] <ty> burntsushi: bincode and cbor have a really bad class of bug
[21:20:18] <yati> bluss, I see :D It seems that intuitively nothing should prevent it, though.
[21:20:21] <ty> burntsushi: https://github.com/BurntSushi/rust-cbor/pull/4
[21:20:27] <burntsushi> ty: oh, ya, i saw your rustc-serialize issue
[21:20:35] <duesenfranz_> WindowsBunny: yeah right, http is not a module....
[21:20:39] <cow_2001> this is frustrating
[21:20:44] <cow_2001> i don't know where to look
[21:20:56] <bluss> yati: it's a hidden type parameter, that would be weird
[21:21:04] <ty> burntsushi: yeah... I've looked into every other possible way to mitigate this, but changing rustc-serialize is the only way I think it can be fixed
[21:21:08] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[21:21:35] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:21:40] <bmcorser> http://is.gd/AHeRuQ
[21:21:44] <ty> burntsushi: without the change, we basically can't advocate using our libraries to decode from a public stream
[21:21:48] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[21:22:08] <ty> burntsushi: which would be a huge shame, because I invented bincode for game server networking 
[21:22:16] <bmcorser> duesenfranz_: gotcha
[21:22:17] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[21:22:32] <duesenfranz_> bmcorser: you might want to read http://doc.rust-lang.org/book/const-and-static.html
[21:23:01] * duesenfranz_ is happy he got that url right
[21:23:24] *** Quits: amnn (amnn@moz-ro1qqu.ox.ac.uk) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:23:31] <bmcorser> :)
[21:23:41] *** Joins: paupau (grrrr@moz-35edek.ca.comcast.net)
[21:23:42] *** Joins: thor1 (thor@moz-n7n1a4.res.rr.com)
[21:23:45] <bmcorser> psudeonaytodim on the mind
[21:23:54] *** Joins: agjacome (agjacome@moz-v8jokv.dynamic.jazztel.es)
[21:23:55] <bmcorser> or whatever it's called
[21:24:04] <eddyb> that page is not great, it doesn't discourage static mut enough
[21:24:08] *** Joins: fabianvf (fabianvf@moz-fjqmui.va.comcast.net)
[21:24:20] <eddyb> static mut is prone to UB even in single-threaded code
[21:24:38] <bmcorser> duesenfranz_: the thing i'm thinking about is the thing living for the lifetime of my program
[21:24:48] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:24:50] *** Quits: survi (philip@moz-pbmbkg.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:24:53] *** Quits: flavius (flavius@moz-u9kqrk.graz.surfer.at) (Ping timeout: 121 seconds)
[21:25:03] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[21:25:11] *** Joins: amnn (amnn@moz-ro1qqu.ox.ac.uk)
[21:25:12] <bmcorser> i mean it's not a major issue at this stage, but would like to know if there's a better way
[21:25:15] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[21:25:43] *** Quits: agjacome_ (agjacome@moz-4ge38l.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[21:25:51] <WindowsBunny> bmcorser: Well yes, don't use a static variable
[21:25:55] <bmcorser> Paamayim Nekudotayim
[21:26:11] <WindowsBunny> bmcorser: Instead you can pass around references to variables, or even pass around a struct containing your state
[21:26:31] <eddyb> methods on a state struct is one of the more ergonomic patterns
[21:26:34] *** Quits: ukarlsson (ukarlsson@moz-jhs6q1.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[21:26:39] <cow_2001> bmcorser: O_o
[21:26:44] <cow_2001> bmcorser: hebrew
[21:26:47] <yati> bluss, Now that I think about it, yes. In the back of my mind, I was always thinking about how I can do `let x: Vec<_> = ....collect()` but that is very different.
[21:26:51] <cow_2001> bmcorser: that's a php weirdness
[21:26:53] <bmcorser> cow_2001: :) the PHP guy
[21:26:58] <WindowsBunny> ew PHP
[21:27:02] *** Quits: maxjacobson (maxjacobson@moz-nc0r8s.dyn.optonline.net) (Client exited)
[21:27:20] <bmcorser> ⇐ maxjacobson quit at the mention of php
[21:27:39] <cow_2001> i have no clue how to take the rightside of a split when doing that split on each string inside a vector
[21:27:46] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[21:27:51] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[21:28:10] *** Quits: fabianvf (fabianvf@moz-fjqmui.va.comcast.net) (Ping timeout: 121 seconds)
[21:28:16] <ty> burntsushi: what do you think of my proposed fix?
[21:28:21] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[21:28:45] <bmcorser> WindowsBunny duesenfranz_ sounds like i should just use pub static and stop worrying about it :)
[21:28:47] <burntsushi> ty: i'm trying to grok it. how does specifying the capacity prevent oom?
[21:29:02] *** Joins: cholcombe (chris@moz-mtfab9.or.comcast.net)
[21:29:04] <cow_2001> bluss: could you help me with this? 
[21:29:22] <ty> it lets the decoder (cbor or bincode) be more conservative with the capacity
[21:29:25] <duesenfranz_> bmcorser: if unsure, use const instead! (sorry 'bout my bad example)...
[21:30:08] <ty> right now cbor believes that it is decoding a several-billion large array, so it has the decoder pre-allocate all of that space
[21:30:11] <WindowsBunny> bmcorser: How about you write some basic functioning code first, then we'll tell you have awful your code is and how to improve it? :D
[21:30:22] *** Joins: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net)
[21:30:30] *** Quits: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:30:53] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[21:30:55] *** Joins: webmobster (Mibbit@moz-dr2.ra2.78.152.IP)
[21:31:12] *** Joins: tilde (namidasshu@moz-3gs.igt.238.95.IP)
[21:31:24] <ty> burntsushi: with this change, cbor could say "ok, use a capacity of something small, but expect there to be tons of elements, so if you need to you can grow"
[21:31:38] <bluss> cow_2001: you can use .splitn(1, '\t') right, then .nth(1) to get the second element
[21:31:51] <cow_2001> bluss: thanks!
[21:31:53] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Ping timeout: 121 seconds)
[21:31:58] <bluss> cow_2001: then .unwrap() to panic on no element or .unwrap_or("") to default to empty instead
[21:32:11] *** Joins: lerc (quassel@moz-nitv9j.telstraclear.net)
[21:32:30] *** Joins: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP)
[21:32:40] *** Quits: nercury (nercury@moz-8h0btl.static.zebra.lt) (Client exited)
[21:32:43] <bluss> cow_2001: oh by the way it's splitn(2  not 1
[21:32:52] <bluss> cow_2001: it counts the number of parts, my bad
[21:33:06] *** Quits: cholcombe (chris@moz-mtfab9.or.comcast.net) (Ping timeout: 121 seconds)
[21:33:07] <ty> burntsushi: notice in the test case that I sent a PR for, there aren't any elements in the array at all.  Just the size information.  I'm not filling the array with stuff, it crashes when trying to create the 0xFFFFFF00FFFFFF-length vec 
[21:33:32] *** Quits: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com) (Ping timeout: 121 seconds)
[21:33:41] *** Joins: ukarlsson (ukarlsson@moz-jhs6q1.cust.bredbandsbolaget.se)
[21:33:52] <bluss> playbot: "a b c".splitn(2, ' ').last().unwrap_or("")   // example for cow_2001 
[21:33:54] -playbot- "b c"
[21:34:19] <bmcorser> WindowsBunny: :D i'll get a github repo up shortly
[21:34:28] *** Joins: agjacome_ (agjacome@moz-5gjdqc.dynamic.jazztel.es)
[21:34:46] *** Quits: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net) (Ping timeout: 121 seconds)
[21:34:50] <burntsushi> ty: hmm. i think this is actually fixable in my CBOR decoder because everything is decoded into an intermediate AST first. and i think *that's* where the OOM is occurring in my case.
[21:35:11] <ty> don't you have an "immediate decoder" too?
[21:35:14] <burntsushi> ty: i also have an incomplete "direct" decoder, and i bet i couldn't fix it there. which is where your fix would come in i think
[21:35:17] <burntsushi> yes! :-)
[21:35:25] <burntsushi> OK i get it now. i like your fix.
[21:35:30] *** Joins: Hannibal_Smith (nico@moz-itj1vp.retail.telecomitalia.it)
[21:35:49] <ty> burntsushi: ok, great!
[21:36:11] *** Quits: agjacome (agjacome@moz-v8jokv.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[21:36:13] <ty> Now to convince the core team!
[21:37:56] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[21:38:29] <cow_2001> MUCHO GRACIAS!
[21:38:34] *** Quits: agjacome_ (agjacome@moz-5gjdqc.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[21:38:41] <cow_2001> burntsushi: 
[21:38:43] <cow_2001> err
[21:38:45] <cow_2001> bluss: 
[21:39:05] *** Joins: flavius (flavius@moz-u9kqrk.graz.surfer.at)
[21:39:08] <bluss> de nada
[21:39:25] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[21:39:29] *** Joins: jakevn (jakevn@moz-0agbgk.miamfl.sbcglobal.net)
[21:39:36] *** Joins: agjacome (agjacome@moz-1jikek.dynamic.jazztel.es)
[21:39:38] *** Joins: trecer (textual@moz-pr6cqn.dyn.centurytel.net)
[21:40:15] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[21:40:26] *** Quits: eibwen (eibwen@moz-sfstjq.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:42:26] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:42:53] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (Ping timeout: 121 seconds)
[21:43:02] <bmcorser> WindowsBunny: looks like i will have to write functions that return my variables in any case, since "function calls in statics are limited to struct and enum constructors [E0015]"
[21:43:15] *** Quits: ty (ty@moz-i6c4to.wa.comcast.net) (Quit: leaving)
[21:43:17] *** Quits: grodan (Mibbit@moz-o5eg8b.bredband.comhem.se) (Quit: http://www.mibbit.com ajax IRC Client)
[21:43:32] <bmcorser> *"statics and constants"
[21:43:34] <bluss> bmcorser: const fn has been introduced in nightly
[21:43:45] <WindowsBunny> bmcorser: The initial value of a static must be a constant expression
[21:43:46] *** Quits: agjacome (agjacome@moz-1jikek.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[21:43:58] <bmcorser> i see
[21:44:04] <WindowsBunny> Unlike C++, Rust doesn't allow arbitrary code to initialize statics
[21:44:09] *** Quits: flavius (flavius@moz-u9kqrk.graz.surfer.at) (Ping timeout: 121 seconds)
[21:44:17] <ToxicFrog> FFI question -- what's the safest/best/most idiomatic way to return a pointer to an object to C that it will at some point pass back to me to do a thing with?
[21:44:41] <bmcorser> bluss: const fn, what's that?
[21:44:42] <ToxicFrog> C isn't going to inspect the pointer contents at all, so the most convenient type for me would be a String.
[21:45:14] <WindowsBunny> ToxicFrog: You're going to pass ownership to C, or merely let it borrow a pointer temporarily?
[21:46:11] <ToxicFrog> WindowsBunny: I think the answer is "borrow"? C is going to periodically pass it back to me to do stuff with, and at some point tell me I can free it.
[21:46:21] <ToxicFrog> C won't free it itself or deref it.
[21:46:40] <bluss> bmcorser: a function that can be evaluated as a constexpr. and used to init statics, too
[21:47:13] <WindowsBunny> ToxicFrog: So C will basically own it, and tell you when to work with it and free it?
[21:48:15] *** Joins: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net)
[21:48:21] <ToxicFrog> WindowsBunny: ...yes? I'm not 100% confident answering that because I don't know if "own" here has implications I'm not yet familiar with.
[21:48:26] <SpaceManiac> ToxicFrog: you probably want to put it in a Box
[21:48:27] *** Quits: thiblahute (tsaunier@moz-rkc6r5.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:48:27] <WindowsBunny> ToxicFrog: Most C that passes around an opaque user defined structure does so via a void*, aka a *mut c_void
[21:48:32] *** Quits: tilde (namidasshu@moz-3gs.igt.238.95.IP) (Quit: Leaving)
[21:48:33] *** Joins: nickniko_ (nicknikolov@moz-k0r.8sn.209.90.IP)
[21:48:59] *** Quits: futile (felix@moz-cmcd12.unity-media.net) (Quit: WeeChat 1.2-rc1)
[21:49:10] <WindowsBunny> ToxicFrog: So Box it, and then do boxed::into_raw(mybox) to get a raw pointer that you cast to *mut c_void I guess
[21:49:15] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[21:49:19] *** Joins: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[21:49:20] <ToxicFrog> Basically the API I'm implementing is void* CreateFoo(); void DoThingWithFoo(void*); void FreeFoo(void*);
[21:49:36] <WindowsBunny> then whenever C passes it back to you, you can cast the *mut c_void to a &mut MyType
[21:49:53] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[21:49:56] <WindowsBunny> except for the freeing part where you'll do Box::from_raw(ptr)
[21:50:03] *** Joins: maxjacobson (maxjacobson@moz-nc0r8s.dyn.optonline.net)
[21:50:04] <WindowsBunny> and then when the Box is dropped it'll be freed
[21:50:17] *** Joins: agjacome (agjacome@moz-u9kl5k.dynamic.jazztel.es)
[21:50:24] <cow_2001> thanks! :D
[21:50:29] *** Quits: nicknikolov (nicknikolov@moz-27s.0d8.214.90.IP) (Ping timeout: 121 seconds)
[21:50:36] <ToxicFrog> Yeah, that's the thing, my first thought was "I need a Box here" and then "but wait, it'll get freed when it leaves scope"
[21:50:46] <WindowsBunny> ToxicFrog: Hence boxed::into_raw
[21:50:47] <ToxicFrog> Sorry for the stupid questions, I am very new to Rust
[21:51:03] <ToxicFrog> WindowsBunny: aah, I see
[21:51:09] <WindowsBunny> which is unstable I think
[21:51:16] <WindowsBunny> so you'll need a nightly
[21:51:21] <ToxicFrog> Oh.
[21:51:32] <WindowsBunny> ToxicFrog: You can transmute the Box though
[21:51:52] <WindowsBunny> a transmute consumes the input, so the Box won't free itself that way
[21:52:00] <cow_2001> bluss: http://pastebin.com/vpJ7Buj9
[21:52:17] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[21:52:18] *** Joins: RC9 (RCIX@moz-647.dfa.8.198.IP)
[21:53:02] *** Quits: kgrandon (Adium@moz-savc5e.ca.comcast.net) (Quit: Leaving.)
[21:53:20] <bluss> cow_2001: does it work?
[21:53:23] <cow_2001> yep
[21:53:25] <cow_2001> :D
[21:53:30] <bluss> great
[21:53:56] *** Joins: basicdays (basicdays@moz-vreeoj.cable.rcn.com)
[21:54:24] *** Quits: agjacome (agjacome@moz-u9kl5k.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[21:54:39] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[21:55:00] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[21:55:18] *** Joins: agjacome (agjacome@moz-edgjjp.dynamic.jazztel.es)
[21:56:01] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[21:56:15] <bluss> cow_2001: you can probably write lines 13-15 as a combination of iterator adaptors
[21:56:31] <cow_2001> bluss: wut
[21:56:35] <bluss> .split().skip(2).take(7774).map(|s| s.split(   etc
[21:56:54] *** Quits: Douman (Douman@moz-vg292c.dynamic.mts-nn.ru) (Quit: )
[21:57:34] *** Quits: Xirdus (Mibbit@moz-noa5ui.tvk.wroc.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[21:57:45] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[21:57:59] <cow_2001> bluss: iterator adaptors hmmm
[21:58:00] <bluss> cow_2001: something like this http://is.gd/YI9bLn
[21:59:14] *** bentley|away is now known as bentley
[21:59:19] *** Joins: Guest22 (textual@moz-jt9juk.fibertel.com.ar)
[21:59:26] *** Quits: webmobster (Mibbit@moz-dr2.ra2.78.152.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:59:40] <cow_2001> bluss: it shows without newlines
[21:59:52] *** Joins: errordeveloper (ilya@moz-ono.0eu.201.90.IP)
[21:59:53] <cow_2001> just one long line
[22:00:10] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[22:01:00] <bluss> what shows without newlines?
[22:01:01] <ToxicFrog> WindowsBunny: as in mem::transmute?
[22:01:09] <bluss> cow_2001: oh the playpen link is broken?
[22:01:18] <cow_2001> yes
[22:01:20] *** Quits: trecer (textual@moz-pr6cqn.dyn.centurytel.net) (Ping timeout: 121 seconds)
[22:01:31] <bluss> cow_2001: let's try this https://gist.github.com/4ced1b0aa3ebf3420721
[22:01:42] <WindowsBunny> ToxicFrog: yes :D
[22:02:19] <cow_2001> woah.
[22:03:05] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:03:08] <ToxicFrog> Ok, so with that hint and some googling, I think I have the idea -- I create a Box<String> or similar, use mem::transmute to *const u8 and return that to C
[22:03:32] <ToxicFrog> At some point C hands it back to me for use...and hrm. I need to get the box back without freeing the memory. Box it, use it, unbox it again before returning?
[22:03:48] <ToxicFrog> And then when it's finally time to free it I just rebox it and let the box leave scope.
[22:03:49] <WindowsBunny> ToxicFrog: why *const?
[22:03:52] *** Quits: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de) (Connection closed)
[22:03:59] *** Quits: Guest22 (textual@moz-jt9juk.fibertel.com.ar) (Quit: Textual IRC Client: www.textualapp.com)
[22:04:11] <ToxicFrog> WindowsBunny: I guess it doesn't matter either way, C doesn't care
[22:04:24] <ToxicFrog> But it does let the reader know "C shouldn't be modifying this when we aren't looking"
[22:04:25] *** Quits: mark_edward (mark@moz-dg4mrp.in.comcast.net) (Ping timeout: 121 seconds)
[22:04:26] *** Joins: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net)
[22:04:40] <WindowsBunny> ToxicFrog: well anyway, for when you don't want to free it, just cast the * to a &mut MyThing
[22:04:42] <cow_2001> bluss: fantastic.
[22:04:45] *** Quits: nickniko_ (nicknikolov@moz-k0r.8sn.209.90.IP) (Connection closed)
[22:04:48] *** Joins: panicbit1 (panicbit@moz-t203th.dip0.t-ipconnect.de)
[22:04:53] *** Joins: Tomasito (Tomasito@moz-i7e745.res.rr.com)
[22:05:05] *** Quits: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:05:19] *** Quits: kaeluka (kaeluka@moz-6cbr2p.cust.bredbandsbolaget.se) (Client exited)
[22:05:36] *** Quits: edward-san (Edward`san@moz-2dl.61u.237.95.IP) (Quit: Watt is love? Baby, don't Hertz me. Don't Hertz me, no morse.)
[22:05:43] *** panicbit1 is now known as panicbit
[22:05:54] <bluss> cow_2001: I think it shows off some nice features of rust. Your whole file contents is in one big allocation, and the vector just has slices pointing into that
[22:06:08] <bluss> &str is a string slice
[22:06:28] *** Joins: nicknikolov (nicknikolov@moz-k0r.8sn.209.90.IP)
[22:06:34] <WindowsBunny> erm
[22:06:43] <WindowsBunny> playbot: unsafe fn foo(ptr: *const u8){&mut*(ptr as *const String as *mut String);}
[22:06:45] -playbot- ()
[22:06:54] <cow_2001> bluss: slices pointing to that?
[22:06:54] *** Joins: maraoz (maraoz@moz-kdk.130.95.181.IP)
[22:07:00] *** Joins: agjacome_ (agjacome@moz-66suo8.dynamic.jazztel.es)
[22:07:01] <WindowsBunny> ToxicFrog: That's how you unsafely turn a *const u8 into a &mut String
[22:07:09] <cow_2001> bluss: slices of memory, that is?
[22:07:11] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[22:07:16] <niconii> casting const -> mut is undefined behavior
[22:07:17] <bmcorser> ok WindowsBunny my super-sweet code is up https://github.com/bmcorser/git-tags-rs/
[22:07:20] <niconii> in both llvm and rust
[22:07:25] <bluss> cow_2001: the variable s is the String, it owns the memory
[22:07:38] <bluss> cow_2001: the &str in the vec are just pointers to different locations that you've cut out from s
[22:07:38] <WindowsBunny> niconii: Great :D
[22:07:43] <bluss> cow_2001: substrings
[22:07:49] <bmcorser> it builds, but won't run because "thread '<main>' panicked at 'called `Option::unwrap()` on a `None` value', /Users/rustbuild/src/rust-buildbot/slave/stable-dist-rustc-mac/build/src/libcore/option.rs:362"
[22:08:15] <imjacobclark> is it possible to get the length of a Vector?
[22:08:29] <bmcorser> but that might be an issue with the CLI lib i'm using not my code
[22:08:31] <cow_2001> bluss: so a &str is two things, a start and an end of the big string
[22:08:31] <niconii> imjacobclark: vec.len()
[22:08:34] <bluss> cow_2001: a &str is a substring of string data stored somewhere else. It may of course be a trivial substring (i.e. the whole string)
[22:08:43] <bluss> cow_2001: yes. It stores pointer + length in fact
[22:08:43] <imjacobclark> thanks
[22:08:49] <bmcorser> but i think it may give an idea of what i'm trying to achieve
[22:09:06] *** Joins: grant (grant@moz-jfh.0nq.187.64.IP)
[22:09:07] *** Quits: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net) (Client exited)
[22:09:19] *** Quits: yati (yati@moz-nm0.mvf.227.110.IP) (A TLS packet with unexpected length was received.)
[22:09:21] <bluss> cow_2001: &'static str is the type of string literals ... a substring of string data stored in some read only section of the compiled object
[22:09:41] *** Quits: agjacome (agjacome@moz-edgjjp.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[22:09:50] *** Quits: REMqb (REMqb@moz-v1pkj8.abo.wanadoo.fr) (A TLS packet with unexpected length was received.)
[22:09:53] *** Joins: nyx (nyx@moz-ivelpd.res.rr.com)
[22:09:55] <niconii> &str is to String as &[T] is to Vec<T>
[22:10:11] <cow_2001> bluss: is it possible to load the file into the executable at compile time?
[22:10:33] <bluss> cow_2001: yes, there's a macro for that
[22:10:37] * cow_2001 googles
[22:10:49] <bluss> include_str! maybe?
[22:10:58] <bmcorser> WindowsBunny: for more reference (if you're interested) i'm porting https://github.com/bmcorser/git-tags-py to rust as a way to learn the language
[22:11:06] *** Joins: GGist (Mibbit@moz-st7v59.wa.comcast.net)
[22:11:06] <niconii> (rather literally, too; &str is just a &[u8] guaranteed to hold utf-8, and String actually wraps a Vec<u8>)
[22:12:35] <WindowsBunny> bmcorser: seems fine so far
[22:12:40] *** Quits: Hannibal_Smith (nico@moz-itj1vp.retail.telecomitalia.it) (Quit: Leaving)
[22:12:45] *** Quits: thor1 (thor@moz-n7n1a4.res.rr.com) (Ping timeout: 121 seconds)
[22:13:07] *** Quits: brianloveswords (brianlovesw@moz-tq78gs.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:13:12] <bmcorser> cool
[22:13:43] *** Joins: chef_ (Chef@moz-ge00fg.cpe.teksavvy.com)
[22:13:52] <maxjacobson> I’m supersupersuper new to Rust. Here’s a question. When I see “T” or “<T>”… is that short for something? I’m having a hard time googling for a letter haha
[22:14:18] *** Quits: agjacome_ (agjacome@moz-66suo8.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[22:14:38] <niconii> T is short for type, it's customary to use in generics
[22:14:40] <niconii> !generics
[22:14:45] <niconii> aww
[22:14:48] <cow_2001> so cool
[22:14:58] <niconii> anyway, T just means "any type" in this context basically
[22:14:59] <ToxicFrog> WindowsBunny: awesome. Thank you so much.
[22:15:03] *** Quits: vosen (vosen@moz-mtm1g4.dynamic.chello.pl) (Connection closed)
[22:15:07] *** Quits: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:15:11] *** Quits: Chef (Chef@moz-ge00fg.cpe.teksavvy.com) (Ping timeout: 121 seconds)
[22:15:29] <niconii> !learn generics = http://doc.rust-lang.org/book/generics.html
[22:15:29] <rustbot> Learned factoid 'generics'.
[22:15:30] <cow_2001> and i thought golang has a cool cargo-like system
[22:15:31] <niconii> !generics
[22:15:31] <rustbot> http://doc.rust-lang.org/book/generics.html
[22:15:32] <bluss> maxjacobson: it's just a convention. You can use long name type parameters too
[22:15:40] <kimundi> maxjacobson: Its just a name for the type variable. Convention is to use the single letter "T", (just like, eg, "i" for loop variables)
[22:15:44] <WindowsBunny> ToxicFrog: Just remember that casting const to mut may invoke UB :D
[22:16:08] *** Joins: Wild_Cat (Max@moz-2clr66.dsl.teksavvy.com)
[22:16:09] <ToxicFrog> WindowsBunny: aah yes
[22:16:36] <WindowsBunny> ToxicFrog: Maybe it would be easier if your FFI function was defined as taking a *mut
[22:16:38] <bmcorser> WindowsBunny: any clues on the runtime panic?
[22:17:00] <WindowsBunny> bmcorser: That would require actual mental effort on my part to analyze your code
[22:17:00] <niconii> ToxicFrog, WindowsBunny: https://doc.rust-lang.org/reference.html#behavior-considered-undefined
[22:17:02] <ToxicFrog> WindowsBunny: yeah, I think I'll do that then.
[22:17:03] <maxjacobson> ooOo. Ok. thanks!
[22:17:05] <niconii> "Mutating non-mutable data (that is, data reached through a shared reference or data owned by a let binding), unless that data is contained within an UnsafeCell<U>."
[22:17:21] <WindowsBunny> niconii: This isn't data reachable by a &
[22:17:25] *** Joins: jfredett (Adium@moz-a9ilmn.fios.verizon.net)
[22:17:32] <bmcorser> i'm clueless on how start debugging this shit
[22:17:42] <WindowsBunny> niconii: It's data owned by a raw pointer in C
[22:17:43] *** Joins: colinsurprenant_ (colin@moz-q9ee1n.74.electronicbox.net)
[22:17:45] <niconii> ah
[22:17:46] <bmcorser> in python i can just drop a breakpoint in and get a repl
[22:17:56] <bmcorser> then i'm laughing
[22:18:04] <WindowsBunny> bmcorser: In Rust it is native code, so you cannot really do much
[22:18:12] <bmcorser> aye
[22:18:17] <bmcorser> gdb?
[22:18:19] <JustAPerson> bmcorser: are you on linux?
[22:18:19] <bluss> bmcorser: you have gdb
[22:18:21] <WindowsBunny> bmcorser: At best gdb will actually work and you can see the value of local variables
[22:18:21] <JustAPerson> gdb works well
[22:18:26] <JustAPerson> rbreak paninc
[22:18:28] <JustAPerson> run
[22:18:29] <bmcorser> JustAPerson: natrually
[22:18:31] <JustAPerson> bt
[22:18:35] *** Quits: colinsurprenant (colin@moz-q9ee1n.74.electronicbox.net) (Ping timeout: 121 seconds)
[22:18:35] *** colinsurprenant_ is now known as colinsurprenant
[22:18:38] <WindowsBunny> bmcorser: at worst gdb will spit in your face and murder your parents
[22:18:45] <bmcorser> and at best?
[22:19:00] <WindowsBunny> (6:18:24 PM) WindowsBunny: bmcorser: At best gdb will actually work and you can see the value of local variables
[22:19:11] *** Quits: trigen (MSX@moz-sgda69.static.versatel.nl) (Ping timeout: 121 seconds)
[22:19:15] <woboats> Design question: I have struct carrying some Option<String>s (docopt), and I want them to be mutually exclusive (fail if > 1 is Some). I want it to be painless to extend to new Options later, so a match table isn't ideal.
[22:19:29] <woboats> What's the best way to structure this logic?
[22:19:34] <bmcorser> WindowsBunny: sounds like fun
[22:19:44] <niconii> WindowsBunny: mmm, right, it's &T -> &mut T that's undefined
[22:20:01] <WindowsBunny> niconii: So in this case everything is okay then, because its not & :D
[22:20:06] *** Quits: ctennis (ctennis@moz-ej0.24t.142.67.IP) (Connection closed)
[22:20:14] <WindowsBunny> Its * directly to &mut
[22:20:39] <aatch> WindowsBunny, thats fine (for a given value of "fine")
[22:20:40] <WindowsBunny> guaranteed by a pinky promise to not alias
[22:20:52] <WindowsBunny> ToxicFrog: They did pinky promise, right?
[22:21:06] <niconii> WindowsBunny: maybe, i'd probably err on the side of caution personally
[22:21:25] *** Quits: gpillow (Mibbit@moz-hd5u4k.pasty.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:21:31] *** Joins: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net)
[22:21:42] <woboats> Basically I want a series of and_thens() that will fail if more than one of them is Some rather than use precedence
[22:21:43] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[22:22:23] *** Quits: imjacobclark (Mibbit@moz-5g68lp.range86-156.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:22:48] *** Joins: gpillow (Mibbit@moz-hd5u4k.pasty.net)
[22:22:54] *** Quits: morton (Mibbit@moz-m3km7q.gtn.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[22:22:56] <ToxicFrog> WindowsBunny: maybe! I don't have the source :D
[22:23:36] *** Joins: trecer (textual@moz-pr6cqn.dyn.centurytel.net)
[22:23:38] <WindowsBunny> ToxicFrog: Just in case, I'd recommend getting life insurance
[22:23:56] <woboats> sorry that's or_else rather than and_Then
[22:24:11] *** Quits: ahartzheim (ahartzheim@moz-mb0.tts.72.185.IP) (Ping timeout: 121 seconds)
[22:24:27] *** Joins: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp)
[22:24:48] *** Joins: maximih (maximih@moz-egq42l.k49b.su5n.2002.2001.IP)
[22:25:29] <bluss> woboats: it's easy to just sum a.is_some() + b.is_some() +  .. :)
[22:25:39] <bluss> oh needs cast to integer too
[22:25:56] <woboats> not beautiful, but yeah that makes sense
[22:26:03] <bluss> it's moderately verbose to just sum a.is_some() as u32 + b.is_some() as u32 
[22:26:08] <ToxicFrog> New question -- does ffi or libc have anything for working with FILE*?
[22:26:14] <bluss> woboats: right
[22:26:23] <woboats> bluss: can bools be xor'd?
[22:26:24] *** Joins: mcoffin (mcoffin@moz-hrs.16d.54.128.IP)
[22:26:27] <trecer> Hi all, is it normal for rust to be inserting int3 instructions into the drop glue?/is there any way to avoid this?
[22:26:30] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Ping timeout: 121 seconds)
[22:26:30] <aatch> woboats, yep
[22:26:34] <bluss> woboats: I think so, but that's not what you want
[22:26:35] <WindowsBunny> ToxicFrog: The contents of a FILE* are opaque and you should never manipulate it directly
[22:26:43] *** Quits: wipeD (wipeD@moz-j5kot3.dip0.t-ipconnect.de) (Connection closed)
[22:26:43] <ToxicFrog> WindowsBunny: oh, I know that
[22:26:47] <aatch> playbot, true ^ true
[22:26:48] -playbot- false
[22:26:54] <WindowsBunny> ToxicFrog: However you're free to use bindings to libc functions to work with a FILE*
[22:26:56] <bluss> beautiful
[22:27:01] <ToxicFrog> But I mean a type for it and convenient functions for reading from it
[22:27:03] <aatch> All of the bitwise operators work on bools
[22:27:12] <bluss> playbot: true ^ true ^ true
[22:27:13] -playbot- true
[22:27:20] <woboats> oh I see, ack
[22:27:37] <woboats> fricken logic how does it work
[22:27:43] <aatch> So you can get non-shortcircuiting conditions if you want.
[22:27:50] <WindowsBunny> ToxicFrog: There's no easy wrapper for FILE*
[22:27:51] <aatch> playbot, true | false
[22:27:53] -playbot- true
[22:27:54] *** Joins: fkaa (tundmatu@moz-abdgko.cust.tele2.se)
[22:27:54] <niconii> i assume the difference between | and || on bools is that || short-circui-- yeah
[22:28:02] *** Quits: codec (Mibbit@moz-325m1f.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:28:06] <WindowsBunny> ToxicFrog: That's because most sane people just use the normal File in Rust's libstd
[22:28:32] <aatch> Not a huge amount call for it, but I can see it being useful for some people.
[22:28:39] <WindowsBunny> ToxicFrog: Which isn't a wrapper around FILE* necessarily
[22:28:58] <WindowsBunny> ToxicFrog: On Windows std::fs::File is actually a wrapper around a HANDLE
[22:29:06] <aatch> WindowsBunny, well on Linux it just uses a fd.
[22:29:18] <WindowsBunny> exactly, nobody actually uses FILE* in Rust
[22:29:24] *** Quits: fkaa_ (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:29:32] *** Quits: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net) (Ping timeout: 121 seconds)
[22:29:34] <aatch> Which is much saner anyway, `FILE` is actually a pretty massive struct.
[22:30:21] <WindowsBunny> at the end of the day on Windows, all the libc constructs are just overhead on top of a HANDLE
[22:30:29] *** Quits: FrozenCow (FrozenCow@moz-i2tvv4.chello.nl) (Quit: Leaving)
[22:30:49] *** Joins: ahartzheim (ahartzheim@moz-5uk5u4.tor-exit.network)
[22:30:50] *** Joins: dkreuter (knizz@moz-ks1p6p.vie.surfer.at)
[22:31:05] <o11c> tbh, the idea of opaque HANDLEs is a good one
[22:31:25] <dkreuter> is there some kind of lazy evaluation syntax like pythons "a() or b()"
[22:31:31] <o11c> dkreuter: ||
[22:31:31] <aatch> o11c, (mostly) agreed
[22:31:41] <WindowsBunny> a HANDLE is just an opaque id into NT's internal object manager
[22:31:45] <XMPPwocky> o11c: if they were well-typed, maybe
[22:31:56] *** Joins: mark_edward (mark@moz-dg4mrp.in.comcast.net)
[22:32:05] <o11c> XMPPwocky: well-typed can be done in wrappers
[22:32:07] <bmcorser> this is actually a bit stange
[22:32:13] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:32:15] <dkreuter> o11c, || is for booleans only iirc
[22:32:17] <WindowsBunny> XMPPwocky: There actually is some typing
[22:32:20] <bmcorser> the path /Users/rustbuild/src/rust-buildbot/slave/stable-dist-rustc-mac/build/src/libcore/option.rs
[22:32:26] <bmcorser> doesn't exist on my computer
[22:32:40] <o11c> e.g. we just have `int` for file descriptors, but they are logically different for read streams, read random-access, write stream, etc.
[22:32:41] <dkreuter> I mean something like a() -> Option<T> and b() should be called when a() returned None
[22:32:43] <WindowsBunny> XMPPwocky: In particular, winapi defines various kinds of handles like HWND and stuff
[22:32:49] <bmcorser> thread '<main>' panicked at 'called `Option::unwrap()` on a `None` value', /Users/rustbuild/s...
[22:32:50] <bluss> dkreuter: there is .or_else for options
[22:32:56] <dkreuter> bluss, thank you
[22:32:57] <XMPPwocky> WindowsBunny: aren't they just typedefs, though?
[22:33:00] <aatch> bmcorser, that's because it's on the the build server.
[22:33:01] <bmcorser> whaa
[22:33:06] <XMPPwocky> so you can pass a HANDLE to something expecting a HWND
[22:33:09] <WindowsBunny> XMPPwocky: Only if winapi is in non-STRICT mode
[22:33:20] <WindowsBunny> XMPPwocky: in STRICT mode HWND is a pointer to a unique tag type
[22:33:26] <bmcorser> i guessed as much, but why aatch is it appearing in an error message locally?
[22:33:31] <WindowsBunny> XMPPwocky: of course C lets you implicitly pointer cast, so it only helps in C++ and Rust
[22:33:40] <bmcorser> or is that to be expected?
[22:33:44] <aatch> bmcorser, because that part of the error message is generated at compile time.
[22:33:54] <bmcorser> gotcha
[22:33:57] *** Joins: Soni (SoniEx2@moz-7ho.p0a.104.187.IP)
[22:34:13] <aatch> bmcorser, I tend to get `/home/james/projects/rust/src/libcore/option.rs` because I build locally.
[22:34:17] * o11c mutters that error messages should be relative to the source dir
[22:34:34] <bmcorser> cool
[22:34:38] *** Quits: errordeveloper (ilya@moz-ono.0eu.201.90.IP) (Ping timeout: 121 seconds)
[22:34:48] *** Quits: chef_ (Chef@moz-ge00fg.cpe.teksavvy.com) (Quit: Quit)
[22:35:20] <WindowsBunny> XMPPwocky: There's still an annoying overlap between things that only use HANDLE though, like pipes and files and consoles
[22:36:15] *** Quits: sw17ch (sw17ch@moz-h64l8d.wa.comcast.net) (Client exited)
[22:36:24] *** Joins: Wilduck (erik@moz-m0q9lq.fios.verizon.net)
[22:36:50] *** Joins: sw17ch (sw17ch@moz-h64l8d.wa.comcast.net)
[22:37:08] *** Quits: sw17ch (sw17ch@moz-h64l8d.wa.comcast.net) (Client exited)
[22:37:46] *** Quits: lenstr (lenstr@moz-897.vju.25.171.IP) (Quit: Leaving...)
[22:39:28] <bmcorser> how can i force cargo to recompile dependencies?
[22:39:31] *** Joins: arBmind1 (Andreas@moz-rvrdem.dyn.telefonica.de)
[22:39:57] <bmcorser> for example to add print statements into library code for debugging
[22:40:29] <WindowsBunny> bmcorser: If you modify some code, cargo should automatically detect it was modified
[22:40:39] *** Quits: arBmind (Andreas@moz-86h02i.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[22:40:41] *** Joins: orangeshark (erik@moz-cg6imt.44tj.56ot.0306.2602.IP)
[22:40:49] *** Quits: KarolisK (karolis@moz-1vd.8s1.28.194.IP) (Connection closed)
[22:40:54] <bmcorser> WindowsBunny: even in external dependencies?
[22:40:59] <WindowsBunny> bmcorser: If you update an upstream git/crates.io dependency, you'll have to do a cargo update
[22:41:05] <WindowsBunny> which will fetch the new version of the dependency
[22:41:11] <bmcorser> yes
[22:41:20] *** Quits: trecer (textual@moz-pr6cqn.dyn.centurytel.net) (Ping timeout: 121 seconds)
[22:41:21] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[22:41:26] *** Quits: maxjacobson (maxjacobson@moz-nc0r8s.dyn.optonline.net) (Client exited)
[22:41:31] <M_D_K> so, is it possible to access the deps of a dep since they're already there? Or do I have to explicity add them to my Cargo.toml?
[22:41:43] <bmcorser> i added a println! to the downloaded dep
[22:41:47] <bmcorser> in /cargo/registry/src/github.com-1ecc6299db9ec823/c etc
[22:41:50] <WindowsBunny> bmcorser: Oh, don't do that
[22:41:55] <bmcorser> yes yes i know
[22:42:27] <bmcorser> but can i trigger recompilation of this code through cargo
[22:42:39] <WindowsBunny> bmcorser: It's better to copy/clone the dependency to a local location, and then use a cargo override
[22:42:40] *** Joins: SgtCoDFish (Ashley@moz-236.pn9.250.176.IP)
[22:42:48] *** Quits: SgtCoDFish (Ashley@moz-236.pn9.250.176.IP) (Quit: Leaving.)
[22:42:49] <bmcorser> aw man
[22:42:58] <WindowsBunny> cargo overrides are cool
[22:43:10] <WindowsBunny> and if you modify the overriding code, cargo will detect it and rebuild it :P
[22:43:19] <bmcorser> hacking where WindowsBunny tells me not to is cool
[22:43:28] <fkaa> WindowsBunny: i once forgot i had a cargo override in my path
[22:43:35] <XMPPwocky> fkaa: oh god same
[22:43:38] <fkaa> 2 hours of hair-ripping
[22:43:39] <WindowsBunny> fkaa: Yes, it is easy to forget about them :(
[22:43:42] <XMPPwocky> had glutin from like 3 months ago
[22:44:05] <WindowsBunny> ew, 3 month old bread with ancient gluten?
[22:44:19] <fkaa> it should print a big red <marquee> "WARNING YOU ARE USING A LOCAL OVERRIDE"
[22:44:25] *** Joins: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net)
[22:44:36] *** Quits: iu (iu@moz-6263qv.cc.cmu.edu) (Quit: )
[22:44:37] <arielb1> is there a version of retain that gives &mut T?
[22:44:40] <WindowsBunny> fkaa: Go write a PR to cargo to do just that
[22:44:50] <fkaa> not sure it would be so appreciated ;)
[22:45:15] *** Joins: zakedodead (zakedodead@moz-cg5.c4k.214.206.IP)
[22:45:22] <niconii> make it a vertical marquee
[22:45:46] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[22:45:56] *** Joins: zyphrus (David@moz-1a4.urk.98.101.IP)
[22:46:09] <XMPPwocky> another thing i want to fix is to print out version hashes
[22:46:23] <XMPPwocky> when you expect a type and find something else with the same user string
[22:46:51] *** Quits: Jackneill (Jackneill@moz-8pg510.pool.digikabel.hu) (A TLS packet with unexpected length was received.)
[22:46:52] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[22:46:53] <XMPPwocky> so accidentally having two versions of the same crate doesn't make you question your base assumptions about the universe
[22:47:05] <XMPPwocky> expected glium::DrawParameters, found glium::DrawParameters
[22:47:11] <fkaa> ++
[22:47:12] <niconii> ahaha
[22:47:25] <csherratt> XMPPwocky: DO IT
[22:47:45] <XMPPwocky> it doesn't look like that hard of a fix, actually
[22:47:53] <XMPPwocky> is there an issue for that
[22:47:57] <XMPPwocky> there's gotta be one
[22:48:10] <geri> is there a way to disable optimization for a specific function in rust?
[22:48:21] *** Quits: pylbrecht (pylbrecht@moz-b4nhkg.dynamic.kabel-deutschland.de) (Connection closed)
[22:48:26] *** Quits: tytouf (caugier@moz-84u6a1.rev.sfr.net) (Ping timeout: 121 seconds)
[22:48:38] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:49:02] *** Quits: herr_jth (jth@moz-540.d5q.91.95.IP) (Quit: Konversation terminated!)
[22:49:10] <niconii> geri: you can prevent it from being inlined with #[inline(never)], but i don't think you can disable optimization
[22:49:37] <geri> niconii: i try inline never... hm
[22:49:46] <Dabo> geri, is there a specific optimization change which you'd like to disable?
[22:49:54] <geri> a bug :D
[22:49:56] *** Joins: imjacobclark (Mibbit@moz-5g68lp.range86-156.btcentralplus.com)
[22:50:02] <imjacobclark> Can anybody help me with: http://stackoverflow.com/questions/30563502/copying-in-vectors-to-a-thread-in-rust
[22:50:27] <Dabo> geri, there might be a way to work around it, have you reported it?
[22:50:36] <geri> Dabo: a function works for debug but returns a illegal instruction in --release
[22:50:38] *** Quits: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP) (Connection closed)
[22:50:42] <geri> the
[22:50:43] *** Joins: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP)
[22:50:56] <Dabo> geri, ah, could you put the function on play.rust-lang.org? to show
[22:51:04] <geri> Dabo: i didnt figure out whats the issue
[22:51:15] *** Joins: Jesin (Jesin@moz-qb9.79h.16.107.IP)
[22:51:16] <geri> Dabo: i cross compile to arm.... i guess not
[22:51:31] <bmcorser> WindowsBunny: i  take it back ... overrides are very cool
[22:51:31] <Dabo> i'm not entirely sure what you are trying to say here
[22:51:38] <Dabo> I can probably help if you show me the code
[22:51:54] <geri> Dabo: i build my rust app for arm...
[22:52:15] *** Joins: dlc (dlc@moz-ijetde.res.rr.com)
[22:52:16] <geri> Dabo: yes, let me check some things before :D
[22:53:12] <niconii> imjacobclark: i think we need more code than that
[22:53:32] *** Joins: zzing (textual@moz-jucm1n.cpe.distributel.net)
[22:53:32] *** Joins: nedp (nedp@moz-vg6vvt.bigpond.net.au)
[22:53:35] *** Quits: kngl (Adium@moz-rmgnkh.dynamic.voo.be) (Quit: Leaving.)
[22:53:54] <niconii> imjacobclark: can you show the full function in your question rather than just that for loop?
[22:54:07] <ToxicFrog> WindowsBunny: (re: FILE* vs File): yeah, sadly I have no control over the ABI expected by the host program, so if it hands me a FILE* that's what I have to use.
[22:54:30] <WindowsBunny> ToxicFrog: Then yeah, you're pretty screwed, you'll have to write your own wrapper :D
[22:54:45] <WindowsBunny> ToxicFrog: You'll also have to stab the developer of the host program in their sleep
[22:54:45] *** Quits: nedp (nedp@moz-vg6vvt.bigpond.net.au) (Connection closed)
[22:54:50] <ToxicFrog> The good news is that all I have to do is read a single line from it and then close it
[22:55:11] *** Quits: posix4e (sid82101@moz-9asfnl.highgate.irccloud.com) (Quit: )
[22:55:19] <ToxicFrog> WindowsBunny: I already have a lot of stabbings queued up for not open-sourcing it and not making the modding API powerful enough that I could accomplish this through that instead, so
[22:55:23] <ToxicFrog> I'll add it to the pile~
[22:55:52] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[22:56:00] *** Joins: derelm (derelm@moz-ckdh2n.dip0.t-ipconnect.de)
[22:56:07] *** Joins: kgrandon (Adium@moz-jftkes.hjek.d045.0009.2601.IP)
[22:58:47] <Wraithan> https://github.com/rust-lang/cargo/issues/1106 would be nice
[22:59:47] *** Quits: ptx (ptx@moz-jqttnm.ga4r.qpd7.16d8.2001.IP) (Ping timeout: 121 seconds)
[23:00:02] *** Quits: Tomasito (Tomasito@moz-i7e745.res.rr.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[23:00:05] *** Quits: maraoz (maraoz@moz-kdk.130.95.181.IP) (Ping timeout: 121 seconds)
[23:00:11] <derelm> i feel so stupid because i struggle with converting a &str to lowercase and reading the api docs doesn't help me as much as i'd love that. i am obviously a beginner coming from python. can someone help me how i need to use api docs to solve my problem? my current solution is something like: let str_lower = words.chars().map(|c| c.to_lowercase()).collect(); - that doesn't work though
[23:00:43] <derelm> where words is actually my &str
[23:01:02] *** Quits: jimmy (textual@moz-vld7pl.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:01:27] <Dabo> derelm, changing the case of unicode strings is one place where rust hasn't quite figured out the best way to do it - it's a bit convoluted currently
[23:01:44] <derelm> now the compiler tells me that it is unable to infer the type information and requires annotation to str_lower
[23:02:11] <niconii> derelm: to_lowercase isn't *entirely* implemented yet, because unicode is complicated
[23:02:14] <niconii> but basically, you want
[23:02:20] <niconii> playbot: let words = "HELLO World!"; words.chars().flat_map(char::to_lowercase).collect::<String>()
[23:02:22] -playbot- "hello world!"
[23:02:50] *** Quits: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[23:03:01] <niconii> flat_map(|c| char::to_lowercase(c)) would also work, it's just it's shorter to directly use the function
[23:03:08] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[23:03:16] *** Quits: maximih (maximih@moz-egq42l.k49b.su5n.2002.2001.IP) (A TLS packet with unexpected length was received.)
[23:03:21] <derelm> ok let me try to understand that by using the api docs
[23:03:33] *** Joins: tmtwd (tmtwd@moz-0kkm5n.cable.rogers.com)
[23:03:36] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[23:04:01] *** Joins: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net)
[23:04:04] *** Quits: imjacobclark (Mibbit@moz-5g68lp.range86-156.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:04:15] <niconii> derelm: here's something to note: in unicode, there is not a one-to-one relationship between uppercase characters and their lowercase equivalents
[23:04:20] *** Joins: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de)
[23:04:26] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.2)
[23:04:54] <niconii> derelm: for instance, uppercase ß is "SS", not a single char
[23:04:57] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[23:05:13] *** Quits: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP) (Quit: WeeChat 1.2)
[23:05:24] *** Parts: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net) ("Ex-Chat")
[23:05:25] <kimundi> derelm: The trick is that with unicode, uppercaseing/lowercasing might result in more than one char. So char::to_lowercase does not return a char, but an iterator yielding chars
[23:05:34] <niconii> right
[23:05:41] <derelm> niconii: you're right - so if i wanted to ignore unicode i'd have to use to_ascii_lowercase i guess
[23:05:48] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[23:06:42] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:06:47] <derelm> reading flat_map documentation right now
[23:06:53] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:06:57] <niconii> so, you can't just use .map(), you have to use .flat_map(), which takes an iterator or anything that can be converted into an iterator, and joins or "flattens" it with the iterator as a whole, basically
[23:07:55] *** Quits: jshs (jshs@moz-65qnc5.dip0.t-ipconnect.de) (Client exited)
[23:08:03] *** Quits: zynisch_o7 (zynisch_o7@moz-6eh1ju.dyn.optonline.net) (Ping timeout: 121 seconds)
[23:08:26] *** Quits: frankmcsherry (frankmcsher@moz-n95jpn.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[23:08:31] <derelm> yeah i guess i tried to do .collect() withing my closure to achieve the same
[23:08:53] <niconii> if you used map, you'd end up with an iterator over iterators; flat_map flattens it into one long iterator
[23:09:13] *** Joins: posix4e (posix4e@moz-m6vj7v.compute-1.amazonaws.com)
[23:09:23] *** Quits: dkreuter (knizz@moz-ks1p6p.vie.surfer.at) (Quit: Ex-Chat)
[23:09:26] *** Joins: cjwelborn (cjwelborn@moz-np6hed.al.charter.com)
[23:09:47] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[23:09:52] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (Connection closed)
[23:10:26] <_habnabit> what happens if a Drop::drop implementation panics? anything special? i put a panic in one but i'm not sure if it's getting called, and i don't know if it has to do with that drop isn't guaranteed to be called
[23:11:02] *** bentley is now known as bentley|away
[23:11:03] <derelm> btw is something like collect::<String>() prefered over let myvar: String = ....collect() ?
[23:11:22] *** Joins: p32blo (p32blo@moz-v36o87.cpe.netcabo.pt)
[23:11:45] *** Quits: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:12:55] <Ms2ger> _habnabit, nothing special, unless you're calling the destructor because you're already panicking (in which case it aborts the process)
[23:12:56] <derelm> also this might be a stupid question but i wonder why char::to_lowerspace works as an argument to flat_map - i am having a hard time finding that function in api docs
[23:13:27] *** Joins: joh (uid13099@moz-2c7ap3.ealing.irccloud.com)
[23:13:31] <_habnabit> Ms2ger, that shouldn't be the case
[23:13:47] <Ms2ger> derelm, http://static.rust-lang.org/doc/master/std/primitive.char.html#method.to_lowercase is a function that returns an iterator of `char`s
[23:13:56] *** Joins: aepsil0n (eduard@moz-cos00j.mv2h.pepi.8071.2a02.IP)
[23:14:04] <niconii> derelm: it's implemented on the char type directly, you won't see it in the std::char module
[23:14:16] <Ms2ger> _habnabit, have you tried just replacing it by a println?
[23:14:31] <derelm> hm
[23:14:36] *** Quits: tomaka (Pierre@moz-r5gldj.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[23:14:45] <niconii> derelm: if you search "char" in the docs, the blue one is the module, the black one is the type
[23:14:46] <Ms2ger> However, I need to get sleep
[23:15:17] <derelm> api docs confuse me :(
[23:15:22] <_habnabit> interesting
[23:15:23] <niconii> derelm: yeah :(
[23:15:33] <bluss> nightly api docs show the primitive type explicitly http://doc.rust-lang.org/nightly/std/index.html?search=char
[23:15:42] <bluss> std::char (primitive type)
[23:15:51] <niconii> bluss: oh, nice
[23:16:02] <derelm> so to_lowercase is something like fn to_lowercase(&str) -> &str
[23:16:06] *** Quits: bbloom (bbloom@moz-mmuemv.wa.comcast.net) (Ping timeout: 121 seconds)
[23:16:06] <_habnabit> let's see if i can repro this
[23:16:07] <derelm> ?
[23:16:28] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[23:16:34] <niconii> derelm: char::to_lowercase(char) -> ToLowercase, an iterator
[23:16:45] *** Joins: jeffasinger (jeff@moz-1j1qti.cable.mindspring.com)
[23:16:54] <niconii> derelm: char -> multiple chars basically
[23:16:57] *** Quits: kent (kent@moz-nd2iqs.fl.atlanticbb.net) (Ping timeout: 121 seconds)
[23:17:04] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[23:17:40] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[23:17:50] <derelm> i guess i thought that it is a function on some str because it had (self) in it signature where self probably only means that you can pass a char to it (because we're on char documentation)
[23:18:05] <derelm> sorry - totally getting str and char wrong in my text
[23:18:28] <derelm> but the self was what was the source of my misunderstanding i guess
[23:18:37] *** Joins: dkreuter (knizz@moz-ks1p6p.vie.surfer.at)
[23:19:05] <dkreuter> I got an error: chained comparison operators require parentheses, even though my expession was (a <= b <= c)
[23:19:06] <niconii> oh, right
[23:19:10] *** Quits: Ms2ger (Ms2ger@moz-jig.287.180.91.IP) (Ping timeout: 121 seconds)
[23:19:41] <niconii> derelm: that's because, with UFCS, char::to_lowercase('H') and 'H'.to_lowercase() are equivalent
[23:19:41] *** Quits: aepsil0n (eduard@moz-cos00j.mv2h.pepi.8071.2a02.IP) (Connection closed)
[23:19:42] <nathan7> playbot: fn f(a: i32, b: i32, c: i32) -> bool { a <= b <= c }
[23:19:42] -playbot- <anon>:9:50: 9:57 error: chained comparison operators require parentheses
[23:19:43] -playbot- <anon>:9         fn f(a: i32, b: i32, c: i32) -> bool { a <= b <= c }
[23:19:43] -playbot- output truncated; full output at: http://bit.ly/1K35L7L
[23:19:45] <derelm> especially when coming from python self rings a bell in your head
[23:19:47] <nathan7> playbot: fn f(a: i32, b: i32, c: i32) -> bool { (a <= b <= c) }
[23:19:48] -playbot- <anon>:9:51: 9:58 error: chained comparison operators require parentheses
[23:19:48] -playbot- <anon>:9         fn f(a: i32, b: i32, c: i32) -> bool { (a <= b <= c) }
[23:19:48] -playbot- output truncated; full output at: http://bit.ly/1Fnvsu9
[23:19:54] <nathan7> playbot: fn f(a: i32, b: i32, c: i32) -> bool { (a <= b) <= c }
[23:19:55] -playbot- <anon>:9:60: 9:61 error: mismatched types:
[23:19:56] -playbot-  expected `bool`,
[23:19:56] -playbot- output truncated; full output at: http://bit.ly/1K35QIs
[23:19:56] <bmcorser> last quick question before bed
[23:20:04] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:20:06] <derelm> niconii yeah i'll have to get used to that
[23:20:10] <_habnabit> http://is.gd/05XiXQ hm, my code is similar to this one, but in my real code, line 11 isn't being called
[23:20:11] <bmcorser> does rust have something like python's subprocess in stdlib
[23:20:12] <nathan7> dkreuter: we don't support Python-style chained comparison
[23:20:25] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[23:20:29] <niconii> or... whatever alternate name eddyb wanted to call UFCS
[23:20:37] <kimundi> AILS
[23:20:39] <nathan7> dkreuter: the compiler is trying to save you from yourself, because `a <= b <= c` would do something weird with comparing a bool to a number
[23:20:43] <bmcorser> so i can call out to a text editor to capture a user message
[23:20:48] <niconii> !AILS
[23:20:52] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[23:20:58] <nathan7> Associated Item Lookup Syntax
[23:21:06] <bluss> bmcorser: yes, command
[23:21:07] <dkreuter> nathan7, thank you
[23:21:11] <niconii> hmm, i thought !ails was added though
[23:21:25] <nathan7> eddyb: why AILS over AIAIS? (associated item access syntax)
[23:21:28] <niconii> i've had to add a number of factoids today, actually...
[23:21:30] <niconii> !book
[23:21:30] <rustbot> The Rust Programming Language, read it online at http://doc.rust-lang.org/book/
[23:21:31] <dkreuter> nathan7, I assumed that rust is like C in that regard, until I got that error message, which made me believe it works like python after all
[23:21:35] <niconii> !!!
[23:21:35] <rustbot> !!!!
[23:21:45] <niconii> well i guess rustbot hasn't been wiped or anything
[23:21:52] <derelm> i probably skipped that part of the documentation where it teaches me about the self / acronym thing
[23:21:55] <nathan7> dkreuter: nope, it just won't let you shoot yourself in the foot like C
[23:22:15] <bluss> nathan7: there's an rfc issue for coming up with a better name
[23:22:34] <derelm> or maybe it should just made more obvious :/ but i don't know how much bloat to put into the docs just to please some newcomers from other languages
[23:22:37] *** Quits: F1skr (moscar@moz-e9439o.cpe.webspeed.dk) (Quit: WeeChat 1.2)
[23:22:44] <niconii> guess someone just removed !ails
[23:23:01] <niconii> !ails
[23:23:07] <niconii> not case sensitive either, okay
[23:23:17] <niconii> !ufcs
[23:23:17] <rustbot> Universal Function Call Syntax (Type::Method(type)) - https://doc.rust-lang.org/book/ufcs.html | https://github.com/rust-lang/rfcs/blob/master/text/0132-ufcs.md
[23:23:24] <niconii> anyway, yeah, there's the info on ufcs
[23:23:34] <derelm> yes, thanks a lot
[23:23:37] *** Joins: thelink2012 (Mibbit@moz-etr.cua.214.186.IP)
[23:23:38] *** Quits: ubeatlenine (david@moz-30lmkk.nh.comcast.net) (A TLS packet with unexpected length was received.)
[23:23:40] <bmcorser> bluss: sweet :D
[23:24:04] *** Joins: ubeatlenine (david@moz-30lmkk.nh.comcast.net)
[23:24:13] <niconii> derelm: ufcs is relatively new in the scheme of things, so
[23:24:47] <niconii> derelm: depending on when you learned rust it might not have actually existed at the time
[23:25:02] <thelink2012> are there plans for if/when the Fn<> syntax will be available for use?
[23:25:12] <thelink2012> it'd be very useful
[23:25:38] <niconii> thelink2012: Fn<> syntax?
[23:26:02] <derelm> niconii: i am just getting started so yeah i probably skipped that part of the book because i didn't realize what it is used for
[23:26:15] <thelink2012> niconii: allowing using the Fn trait in a normal generic way, i.e. Fn(i32) == Fn<i32>
[23:26:18] <thelink2012> ops
[23:26:25] <thelink2012> Fn<(i32)> **
[23:26:29] <niconii> thelink2012: gotcha
[23:27:28] <bluss> thelink2012: (i32, ) !
[23:27:29] <thelink2012> niconii: No ideias if it's planned for the not-so-soon future? I don't quite understand why it's not allowed :(
[23:27:38] <derelm> thanks a lot for helping - guess i'll revisite the book before going on :)
[23:27:47] *** Joins: trecer (textual@moz-j75.ggr.125.98.IP)
[23:27:52] *** Joins: tomaka (Pierre@moz-ppjd78.abo.wanadoo.fr)
[23:28:55] <niconii> thelink2012: no idea
[23:28:55] *** Quits: derelm (derelm@moz-ckdh2n.dip0.t-ipconnect.de) (Quit: Linkinus - http://linkinus.com)
[23:30:08] *** Quits: nicknikolov (nicknikolov@moz-k0r.8sn.209.90.IP) (Connection closed)
[23:30:16] <woboats> What's cargo's behavior if you use a wildcard version? Will it update to the latest version whenever it polls the registry?
[23:31:19] *** Joins: nstoddard_ (nstoddard@moz-srrb5f.ca.comcast.net)
[23:31:41] <bluss> woboats: it doesn't do that, it will use the version last used (as saved in the Cargo.lock file)
[23:31:45] *** Quits: pyon (pyon@moz-no9.411.236.190.IP) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[23:31:45] *** Quits: trecer (textual@moz-j75.ggr.125.98.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:31:58] *** Joins: durka42 (Adium@moz-qsuual.pa.comcast.net)
[23:32:12] *** Quits: nstoddard (nstoddard@moz-srrb5f.ca.comcast.net) (Ping timeout: 121 seconds)
[23:32:12] *** Joins: ajhager (aajhager@moz-mcdsgi.iplsin.sbcglobal.net)
[23:32:15] *** nstoddard_ is now known as nstoddard
[23:32:41] <nathan7> bluss: I'm aware
[23:33:07] <woboats> bluss, so it binds to whatever version is the most recent version when add the dependency?
[23:33:10] <_habnabit> http://is.gd/WX0KSg ok, so, why isn't drop being called here?
[23:33:24] <_habnabit> in my code, drop is called /sometimes/ but not reliably
[23:33:37] *** Quits: durka42 (Adium@moz-qsuual.pa.comcast.net) (Quit: Leaving.)
[23:33:43] <nathan7> thelink2012: when we have variadic generics, probably
[23:34:08] <nathan7> thelink2012: Fn(…Ts) is basically a trick so we can postpone those without breaking compat
[23:34:23] <bluss> woboats: * will match the most recent version
[23:34:33] <SpaceManiac> _habnabit: I don't see anything that would cause drop to be called
[23:34:35] <bluss> woboats: but cargo doesn't fetch new versions until cargo update
[23:34:37] <_habnabit> SpaceManiac, mem::drop?
[23:34:46] <SpaceManiac> all you're dropping is a *mut E
[23:34:51] <woboats> bluss, okay, that makes sense
[23:34:58] <_habnabit> SpaceManiac, oh
[23:35:02] *** Quits: geri (Mibbit@moz-mn9f3k.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[23:35:02] <_habnabit> SpaceManiac, one sec
[23:35:03] *** Quits: p32blo (p32blo@moz-v36o87.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[23:35:49] <woboats> bluss: so whenever update is run, it will update to the latest version? (which is the same behavior of >=X.X.X?)
[23:36:39] <_habnabit> SpaceManiac, ah, well, that would explain it i think
[23:36:50] <_habnabit> "cannot move out of dereference of unsafe pointer"
[23:36:50] *** Joins: joshua-g (joshuag@moz-pv72fm.res.rr.com)
[23:37:06] <_habnabit> so if all i have is a *mut E, how can i drop it?
[23:37:15] *** Quits: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP) (Connection closed)
[23:38:34] <bluss> woboats: I'm not sure about >= etc, there are so many operators for semver :)
[23:38:41] <SpaceManiac> _habnabit: maybe std::ptr::read_and_drop ?
[23:38:47] <woboats> bluss, yeah :-\
[23:39:10] <_habnabit> SpaceManiac, ah, unstable though
[23:39:31] <SpaceManiac> you could ptr::read and manually clear the source
[23:39:35] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[23:39:48] *** Joins: blank_name (blank_name@moz-j00b3g.mi.frontiernet.net)
[23:39:49] <_habnabit> SpaceManiac, what do you mean by 'manually clear the source'?
[23:40:07] *** Joins: alaska (alaska@moz-8bdjem.fios.verizon.net)
[23:40:35] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[23:40:42] *** kimundi is now known as zz_kimundi
[23:40:56] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:41:08] <SpaceManiac> something along the lines of zeroing it, or otherwise mark it as dropped in your own code, s.t. you won't read from it again
[23:41:09] *** Joins: Guest (textual@moz-k34.uju.171.183.IP)
[23:41:26] <bluss> _habnabit: mem::drop is only for dropping objects by moving them out of scope
[23:41:43] <SpaceManiac> the docs on ptr::read talk about this
[23:42:03] <_habnabit> SpaceManiac, ah, yeah, this is for a C API compatible rust library, so it's being called from C code that is supposed to free the referenced memory immediately after calling this function
[23:42:12] <_habnabit> bluss, okay
[23:42:36] <bluss> it has a confusing name
[23:42:39] <_habnabit> SpaceManiac, ok, yeah, i saw what ptr::read said but i wasn't sure if you were talking about the same thing
[23:42:52] <bluss> it should just be `consume` or something
[23:42:59] <_habnabit> is it possible to make mem::drop warn if you pass it a & or &mut? haha
[23:43:04] *** Joins: ismaelga (ismaelga@moz-m9v.8r3.251.188.IP)
[23:43:15] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:43:18] <_habnabit> seems like there's no situation in which it would make sense to do anything but pass mem::drop an owned thing
[23:43:44] <bluss> well a reference is a value that can be owned too but, I know what you mean
[23:44:09] *** Quits: alaska (alaska@moz-8bdjem.fios.verizon.net) (Ping timeout: 121 seconds)
[23:44:11] *** Joins: kent (kent@moz-nd2iqs.fl.atlanticbb.net)
[23:44:31] <_habnabit> but, there's no way to make a generic function specifically allow references, right?
[23:44:37] *** Joins: meunierd (dmeunier@moz-glf54u.cpe.sourcecable.net)
[23:44:39] <_habnabit> er
[23:44:41] <_habnabit> specifically disallow
[23:44:51] *** Joins: zhoeon (fc@moz-cuhqb2.cable.teksavvy.com)
[23:45:38] <bluss> not really, but you can use T: 'static
[23:46:00] <bluss> that disallows all borrowed data
[23:46:07] <bluss> non-'statically borrowed
[23:46:15] *** Quits: Enjolras (enjolras@moz-p7mo8q.ovh) (Ping timeout: 121 seconds)
[23:46:25] <zhoeon> Hi I keep getting "`[u8]` does not have a constant size known at compile-time" on a struct containing a Vec member. What might be the issue?
[23:46:34] *** Joins: jimmy (textual@moz-6dl.30q.45.175.IP)
[23:46:45] <_habnabit> oh! okay, finally i understand why some things specifically wanted a + 'static annotation on types
[23:46:51] <_habnabit> i was like, how the heck do you create a type at runtime
[23:47:00] *** Quits: hoverbear (hoverbear@moz-665.6hv.18.72.IP) (Quit: WeeChat 1.1.1)
[23:47:10] <woboats> zhoeon, could you post the relevant parts of your code to play.rust-lang.org ?
[23:47:55] <_habnabit> but, okay. does that mean the lifetime of T (and not &T or &mut T) is 'static ?
[23:48:35] *** Joins: ogham (rally@moz-91e3hp.cable.virginm.net)
[23:48:45] <_habnabit> also yaaaay now my drop is always being called
[23:49:10] *** Quits: sedrik (sedrik@moz-gvmbt7.se.alltele.net) (Ping timeout: 121 seconds)
[23:49:15] *** Joins: bbloom (bbloom@moz-mmuemv.wa.comcast.net)
[23:49:34] <bluss> T: 'static says something about the contents of T
[23:49:48] <bluss> i32 is 'static but &i32 is not, unless it's &'static i32
[23:50:01] <bbloom> "cannot transmute to or from a type that contains type parameters in its interior" -- why not?
[23:50:28] <bluss> bbloom: can't make sure sizes of types match up
[23:50:40] <zhoeon> woboats: Here it is http://is.gd/oaTlJi
[23:50:44] <bbloom> bluss: i am 100% sure the sizes match up
[23:50:55] <bbloom> and always will
[23:50:59] <_habnabit> bluss, so what non-reference type would have a non-'static lifetime?
[23:51:00] *** Joins: abcrawf (abcrawf@moz-11rs77.acrawford.com)
[23:51:11] <talchas> zhoeon: Path is unsized, like str
[23:51:24] <bbloom> presumably transmute has to trust you know what you're doing
[23:51:26] <SpaceManiac> _habnabit: a type which has a non-'static lifetime parameter
[23:51:36] <woboats> zhoeon, that's a very unhelpful error! as talchas said, the problem is Path
[23:51:37] *** Quits: arBmind1 (Andreas@moz-rvrdem.dyn.telefonica.de) (Quit: Leaving.)
[23:51:38] <_habnabit> SpaceManiac, ah! okay
[23:51:41] <bluss> _habnabit: std::slice::Iter<'a> or anything that carries a borrow
[23:51:43] <talchas> PathBuf is the equivalent of String, which owns its data
[23:51:58] *** Joins: sedrik (sedrik@moz-gvmbt7.se.alltele.net)
[23:52:02] <_habnabit> so a type without a lifetime parameter is inferred to be 'static
[23:52:25] <bluss> yes
[23:52:45] <_habnabit> ok that makes a lot more sense now
[23:52:45] <zhoeon> woboats: oh thank you. Yes the error did not make sense to me.
[23:53:08] *** Joins: Enjolras (enjolras@moz-p7mo8q.ovh)
[23:53:20] <woboats> zhoeon, yeah, you're getting that error because the Path data is stored internally as a [u8]
[23:54:11] <woboats> zhoeon, if you want to file an issue with the main repo about that error message being unclear, it would be helpful!
[23:54:36] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[23:54:41] <zhoeon> woboats: Ok will do. Thanks again. Got my code working now.
[23:55:14] <_habnabit> man tho rust is so great
[23:55:20] *** Joins: njn (chatzilla@moz-01sv7l.iinet.net.au)
[23:55:29] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[23:56:32] *** Quits: dkreuter (knizz@moz-ks1p6p.vie.surfer.at) (Quit: Ex-Chat)
[23:57:17] *** Quits: emk- (mk@moz-v8jscg.dynamic.chello.pl) (Quit: Leaving)
[23:57:50] *** Joins: eckhardt (eckhardt@moz-0b0.bm2.248.98.IP)
[23:58:56] *** Quits: spider-mario (spidermario@moz-meu9c6.wb.wifirst.net) (Ping timeout: 121 seconds)
