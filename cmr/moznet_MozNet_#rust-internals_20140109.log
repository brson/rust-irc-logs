[00:02:08] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[00:06:14] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[00:08:44] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:19:31] *** Joins: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net)
[00:21:31] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:21:31] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1493b4028 to 149dece60: 02http://git.io/N3iJvQ
[00:21:31] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:21:34] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:21:34] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/GgSxgg
[00:21:34] <ghrust> 13rust/06auto 147c15ba1 15Alex Crichton: Remove the io::Decorator trait...
[00:21:34] <ghrust> 13rust/06auto 14ea4733c 15bors: auto merge of #11394 : alexcrichton/rust/no-decorator, r=cmr...
[00:21:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:22:57] *** Quits: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[00:25:58] *** Quits: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com) (Quit: Leaving)
[00:40:49] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[00:46:19] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[00:55:55] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[00:56:34] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:59:50] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[01:01:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:01:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ea4733c to 149dece60: 02http://git.io/N3iJvQ
[01:01:38] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:01:38] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:01:38] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SQslWg
[01:01:38] <ghrust> 13rust/06auto 1419ba161 15Brendan Zabarauskas: Remove ApproxEq and assert_approx_eq!...
[01:01:38] <ghrust> 13rust/06auto 14075ca81 15bors: auto merge of #11402 : bjz/rust/remove-approx, r=alexcrichton...
[01:01:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:14:44] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:20:03] *** nrc is now known as nrc|away
[01:27:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:27:51] <bjz> acrichto: I'm wondering about priv/pup
[01:27:56] <bjz> *pub
[01:28:29] <bjz> could we remove pub by making everything public by default? then `priv`?
[01:29:01] <bjz> I mean, requiring you to say that something is priv
[01:29:17] <bjz> I know it's an annoying default though
[01:29:40] <bjz> it just seems weird to have priv for struct fields, then pub everywhere else
[01:30:03] <bjz> and no visibility possible for enum variants (although that might be a different issue)
[01:33:22] <brson> i'd prefer priv for fields by default
[01:34:54] <bjz> brson: what about for enum variants?
[01:34:59] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[01:36:00] <bjz> brson: it really is weird having a priv keyword for only a few cases
[01:36:19] <bjz> brson: feels like a wart
[01:37:08] <brson> i guess i prefer variants pub by default. i've rarely written a priv variant
[01:37:21] <brson> #[priv]
[01:38:12] <brson> still don't have an rc
[01:38:21] <brson> dist2-linux has been building for 4 hours :(
[01:39:05] <dbaupp> has it deadlocked?
[01:40:15] <sfackler> I've used private enum variants
[01:40:35] * dbaupp has too
[01:44:36] <dbaupp> brson: looks like it just finished?
[01:46:56] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[01:46:57] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:49:22] <brson> dbaupp: yep
[01:52:15] <acrichto> bjz: yeah I'm very much in favor of private by default and killing the last uses of priv
[01:54:11] <sfackler> acrichto: would enum variants be private by default as well?
[01:54:33] <sfackler> #[priv] seems kind of janky
[01:54:44] <acrichto> sfackler: yes, but if the enum is pub the variatnts are pub
[01:55:16] <acrichto> so we need a way of making a variant of a public enum a private variant
[01:55:20] <acrichto> or we don't need to do that at all
[01:56:05] <dbaupp> I've used that
[01:56:06] <dbaupp> fwiw
[01:56:36] <dbaupp> (A public enum is the only case when private variants make any difference, btw.)
[01:58:07] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:58:18] <dbaupp> oh, unless we'll allow `mod foo { enum Bar { pub Baz } } foo::Baz` but that seems bad
[01:59:55] * bjz still finds having both `enum` and `struct` weird
[02:00:10] <bjz> the name `enum` confuses newcomers too
[02:02:31] <Yurume> it's an enumerated type, isn't it?
[02:03:02] <bjz> Yurume: algebraic datatype
[02:03:22] <bjz> sum type
[02:03:50] <Yurume> I think "algebraic" is a misnomer (or at least, it should have been a term for combined sum/product types)
[02:05:01] <bjz> yeah, I guess so
[02:05:08] <bjz> http://en.wikipedia.org/wiki/Algebraic_data_type http://en.wikipedia.org/wiki/Tagged_union
[02:05:48] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:05:48] <ghrust> 01[13rust01] 15brson pushed 2 new commits to 06master: 02http://git.io/uzETfQ
[02:05:48] <ghrust> 13rust/06master 144e8dbab 15Brian Anderson: Fix windows installer version to be less verbose
[02:05:48] <ghrust> 13rust/06master 147613b15 15Brian Anderson: Update some copyright dates
[02:05:48] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:05:55] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:05:55] <ghrust> 01[13rust01] 15brson merged 06master into 06dist-snap: 02http://git.io/8zw2vg
[02:05:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:08:16] <dbaupp> brson: will this one take another 4 hours? :(
[02:08:29] <brson> yessir
[02:11:11] *** Joins: erickt (etryzelaar@moz-D455C143.public.wayport.net)
[02:13:04] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Ping timeout)
[02:18:24] <brson> this is the blurb i plan to put in the release announcement https://gist.github.com/brson/8328337
[02:18:37] *** Quits: erickt (etryzelaar@moz-D455C143.public.wayport.net) (Ping timeout)
[02:19:38] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[02:19:46] <acrichto> brson: looks cool
[02:31:41] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[02:38:58] *** zz_kimundi is now known as kimundi
[02:41:19] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[02:46:59] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:06:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[03:08:24] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:08:24] *** ChanServ sets mode: +qo brson brson
[03:18:28] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:20:02] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:23:01] *** Joins: kimundi_ (kimundi@moz-9888D3CE.dip0.t-ipconnect.de)
[03:24:12] *** Quits: kimundi (kimundi@moz-87973BE2.dip0.t-ipconnect.de) (Ping timeout)
[03:24:13] *** kimundi_ is now known as kimundi
[03:26:28] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:26:28] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14075ca81 to 147613b15: 02http://git.io/N3iJvQ
[03:26:28] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:26:31] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:26:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/RLDc1g
[03:26:31] <ghrust> 13rust/06auto 14a1f4670 15Alex Crichton: Remove eof() from io::Reader
[03:26:31] <ghrust> 13rust/06auto 147498755 15bors: auto merge of #11376 : alexcrichton/rust/remove-eof, r=pcwalton...
[03:26:32] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:27:25] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:28:55] *** Quits: pnkfelix (pnkfelix@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[03:32:24] *** kimundi is now known as zz_kimundi
[03:33:26] <bjz> acrichto: ping
[03:35:36] <bjz> brson: could you mention that the pointers are going to be libified
[03:35:52] <bjz> brson: and that we have a vastly reduced number of sigils?
[03:36:20] <bjz> brson: I think the sigil myth is still widespread in the minds of outsiders
[03:37:37] <bjz> I mean, nothing extensive, just a passing mention that can spark discussion on places like HN and /r/programming
[03:38:46] <dbaupp> bjz: "task '<main>' failed at 'assertion failed: `(left == right) && (right == left)` (left: `0.29999995f32`, right: `0.3f32`)', <anon>:5"
[03:38:49] <dbaupp> bjz: http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/2565/steps/test/logs/stdio
[03:38:58] <dbaupp> "test num::Round::fract_0 ... FAILED"
[03:39:05] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[03:39:29] *** zz_kimundi is now known as kimundi
[03:40:32] <dbaupp> bjz: (re: https://github.com/mozilla/rust/pull/11402#issuecomment-31900018 )
[03:41:08] <bjz> which test would that have been?
[03:41:36] <dbaupp> the first example on num::Round::fract
[03:41:37] <bjz> I can't see the file listed
[03:41:37] <bjz> in the failure
[03:42:08] <bjz> ohh
[03:42:16] <dbaupp> i.e. actual documentation example
[03:43:02] <bjz> didn't know they were covered
[03:43:18] <bjz> we con't have an assert approx eq now :/
[03:44:27] <dbaupp> assert!((x - 0.3).abs() < 0.00001) ?
[03:47:26] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[03:49:17] <dbaupp> If I have a trait `trait Foo { fn bar(x: &Self); }`, and I'm given a type T that may or may not implement Foo, is there a way to get trans to get the monomorphised version of `bar` corresponding to `T` (preferably returning an Option<...>)?
[03:50:03] *** nrc|away is now known as nrc
[03:50:32] <dbaupp> (I basically want to have an intrinsic `get_bar_from_foo::<T>() -> Option<fn(&T)>`.)
[03:55:34] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Quit: Leaving...)
[04:14:38] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:14:38] *** ChanServ sets mode: +ao dherman dherman
[04:31:43] <bjz> acrichto: https://github.com/mozilla/rust/pull/11412
[04:43:08] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[04:54:12] <brson> bjz: in the announcement?
[04:54:28] <bjz> brson: yeah. just an idea though
[04:55:04] <bjz> brson: folks still make comparisons with us and Perl :P
[04:56:10] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:57:32] <brson> "0.9
[04:57:32] <brson> also begins a final series of planned changes to how pointers are treated
[04:57:35] <brson> in Rust, starting with the deprecation of the built-in "managed pointer"
[04:57:38] <brson> type and it's accompanying `@` sigil."
[04:57:44] <brson> it's -> its
[04:58:16] <brson> that doesn't say anything about library pointers, but it does emphasize fewer sigils
[04:58:56] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[04:59:24] <bjz> could you put 'in preparation for it being implemented in the standard library'?
[04:59:31] <bjz> re. managed pointers?
[04:59:51] <bjz> that might be too much for a summary though
[05:00:41] <bjz> but yeah, that's good
[05:01:20] <bjz> And you're still going to have the regular intro stating what Rust is? That always goes down well.
[05:01:42] <brson> "0.9
[05:01:42] <brson> also begins a final series of planned changes to how pointers are treated
[05:01:46] <brson> in Rust, starting with the deprecation of the built-in "managed pointer"
[05:01:48] <brson> type and its accompanying `@` sigil, and the introduction of smart
[05:01:50] <brson> pointer types to the standard library."
[05:01:55] <brson> yes
[05:01:57] <bjz> yes, that is good
[05:02:35] <bjz> btw, why do we export print and println in the prelude?
[05:02:43] <bjz> when we have the macros?
[05:03:04] <brson> idk. seems like we don't need to
[05:03:14] <bjz> could I remove them?
[05:03:24] <brson> i think so
[05:03:40] <bjz> also, could the drop function be moved to std::util and be re-exported?
[05:04:42] <dbaupp> bjz: it was moved out of util on purpose
[05:04:59] <bjz> oh ok
[05:05:15] * bjz didn't know that
[05:05:19] <dbaupp> bjz: https://github.com/mozilla/rust/issues/7556
[05:06:13] <bjz> ahh, makes sense
[05:07:05] <bjz> could that stuff be moved to lib.rs instead?
[05:07:09] <brson> personally i would rather have it in util and reexported. i don't like that the prelude defines one function
[05:07:32] <brson> or start defining stuff in the prelude, yeah
[05:07:47] <bjz> brson: what about moving it to lib.rs?
[05:07:51] <brson> the thing that rubs me the wrong way about puting util::* in the prelude is that util is filled with the least important stuff
[05:08:00] <brson> and we're putting it front-and-center
[05:08:04] <bjz> oh ok
[05:08:09] <brson> it's a tough call
[05:08:39] <brson> I guess all things considered I'd rather find other modules to move the util stuff and drop to and reexport them
[05:08:55] <bjz> what is the use of Void?
[05:09:07] <brson> or maybe start putting more stuff in the prelude generally
[05:09:17] <brson> haskell has a lot of stuff defined right in the prelude
[05:09:29] <bjz> ok
[05:10:15] <bjz> I'll move them to the prelude an request discussion
[05:10:28] <bjz> in a PR
[05:26:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:26:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/mzo2Pw
[05:26:30] <ghrust> 13rust/06auto 145da1663 15kvark: Fixed Gc::clone, implemented Gc::ptr_eq
[05:26:30] <ghrust> 13rust/06auto 14f6963e2 15bors: auto merge of #11369 : kvark/rust/master, r=huonw...
[05:26:31] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:26:35] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:26:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147498755 to 147613b15: 02http://git.io/N3iJvQ
[05:26:35] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:27:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[05:41:32] *** Quits: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net) (Quit: NO CARRIER)
[05:45:05] <brson> what was wrong with Gc.clone?
[05:48:10] <sfackler> brson: it was implemented with deriving so it required T: Clone
[05:48:16] <bjz> r? https://github.com/mozilla/rust/pull/11402
[05:48:49] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[05:50:15] <dbaupp> bjz: I'm not keen on *removing* documentation examples...
[05:50:36] <bjz> hm ok.
[05:50:53] <bjz> yay for removing approx_eq :P
[05:51:15] <bjz> we need it for testing :P
[05:51:45] <dbaupp> we don't *need* it... assert!((x - y).abs() < 1e-5) is pretty simple
[05:52:21] <bjz> it just seemed very verbose for the examples
[05:53:07] <dbaupp> yeah, it is a little complicated :(
[05:53:11] <dbaupp> (for examples)
[05:53:17] * dbaupp shrug
[05:53:18] <dbaupp> s
[05:53:52] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[06:13:45] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:13:45] *** ChanServ sets mode: +ao dherman dherman
[06:17:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:17:46] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:39:00] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[06:39:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:39:32] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Quit: Lost terminal)
[06:41:29] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:41:29] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/mzo2Pw
[06:41:29] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:48:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[06:52:26] *** Parts: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) ()
[06:56:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:56:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/oLmnkA
[06:56:31] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:56:32] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:56:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/GidASg
[06:56:32] <ghrust> 13rust/06auto 14eb0a2d6 15Alex Crichton: Remove the io::Decorator trait...
[06:56:32] <ghrust> 13rust/06auto 145629b47 15bors: auto merge of #11394 : alexcrichton/rust/no-decorator, r=cmr...
[06:56:33] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:03:36] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:05:29] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[07:08:44] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[07:08:54] *** vfetwnuncszu is now known as dcrewi
[07:15:45] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[07:30:39] <nrc> acrichto: thanks for the quick review - do I need to do anything else now to land?
[07:31:07] <acrichto> nrc: nah you're good, it'll enter the bors queue (http://buildbot.rust-lang.org/bors/bors.html) and when bors gets around to it he'll run all the tests
[07:31:23] <acrichto> nrc: bors will comment about whether tests failed or not, and if they all pass it'll get automatically merged
[07:31:43] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:31:43] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145629b47 to 14f6963e2: 02http://git.io/N3iJvQ
[07:31:43] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:31:44] <nrc> acrichto: great, thanks
[07:31:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:31:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pN5Bqg
[07:31:45] <ghrust> 13rust/06auto 14478847c 15Alex Crichton: Remove eof() from io::Reader
[07:31:45] <ghrust> 13rust/06auto 14d0f2846 15bors: auto merge of #11376 : alexcrichton/rust/remove-eof, r=pcwalton...
[07:31:46] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:31:56] <nrc> Isn't bors a useful bot?
[07:31:59] <nrc>  :-)
[07:32:06] <acrichto> bors is amazing
[07:32:16] <acrichto> bors single handedly writes half of rust
[07:33:25] <nrc> now that _is_ a useful bot
[07:34:30] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[07:38:27] *** Joins: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com)
[07:38:55] <dbaupp> acrichto: it's actually you who's single handedly writing half of rust :P
[07:39:26] <acrichto> dbaupp: there's just so many things to do!
[07:40:24] <dbaupp> acrichto.clone()
[07:41:11] <acrichto> I do have three siblings
[07:41:23] <acrichto> but only one is into coding, and he's still churning through CMU
[07:42:21] <dbaupp> hehe
[07:42:23] <Yurume> dbaupp: beware, you should've done .deep_clone() instead
[07:42:31] <dbaupp> oops
[07:42:39] <Yurume> since he is mutable
[07:42:58] <Yurume> (&mut Person? :)
[07:43:08] <dbaupp> ah, and so we'll get dynamic borrow check failures from a shallow clone :(
[07:43:30] <acrichto> hahaha
[07:44:28] <nrc> You know you've been hacking too long when you type check your jokes
[07:45:10] <dbaupp> acrichto: fwiw, having lang-items for each and every vector type bound almost seems worse than what we currently have :(
[07:45:23] <acrichto> dbaupp: well none of this is user visibile
[07:45:29] <acrichto> dbaupp: it would all be collected on the "vector page"
[07:45:43] <acrichto> you wouldn't see any difference from a user-end point of a view
[07:45:48] <acrichto> from a library point of view it's pretty bad
[07:45:54] <acrichto> but again this is why I didn't pursue vecs just yet
[07:46:03] <acrichto> (and tuples as you pointed out)
[07:46:07] * dbaupp just wants to put everything into libraries
[07:46:23] <dbaupp> although neither tuples nor fixed sized vectors will work in libraries
[07:47:26] <dbaupp> acrichto: how about strcat's comment? something like `#[lang="uint"] struct uint; and #[lang="vec_slice"] struct vec_slice;` and so on?
[07:47:59] <acrichto> writing a respone on github
[07:48:22] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:55:25] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[08:09:59] <eddyb> can we mark a field of a structure as write-once/never-modified-after-initialization? I feel like that's what's missing for LLVM to devirtualize some cases. maybe not
[08:12:51] <dbaupp> does LLVM support such annotations?
[08:16:32] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:16:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lWd0sA
[08:16:32] <ghrust> 13rust/06auto 141812a7b 15Raphael Catolino: Remove unnecessary substitution of type params when generating...
[08:16:32] <ghrust> 13rust/06auto 14ebc079c 15bors: auto merge of #11386 : rcatolino/rust/ice-10955, r=pcwalton...
[08:16:32] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:16:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:16:33] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d0f2846 to 14f6963e2: 02http://git.io/N3iJvQ
[08:16:33] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:29:42] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:38:56] <bjz> yeek, removing print and println from the prelude certainly touched quite a few lines
[08:43:25] *** flaper87|afk is now known as flaper87
[08:46:39] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:47:52] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[08:56:31] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[08:56:54] <eddyb> dbaupp: oh, there's an easy way to find files which use the ast::item type (instead of just anything named "item")
[08:57:51] <eddyb> three categories: "use ast:: ... item", "use ast::*" and "ast::item"
[08:58:20] <eddyb> first two would cause most headaches, but they're small in number
[08:59:48] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[09:01:03] <dbaupp> eddyb: grep `ast::.*item`
[09:01:08] <dbaupp> but yeah, the latter is annoying
[09:01:21] <dbaupp> s/latter/glob/
[09:01:38] <eddyb> dbaupp: already done with the first two categories. under 15 files in both
[09:02:17] <eddyb> there's a lot more in the last one, but that's simple: s/ast::item/ast::Item/
[09:05:14] <eddyb> s/:i/:I works very nicely (shame on me for using a GUI editor for this. still can do 2-3 files/min
[09:07:29] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:08:32] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[09:35:31] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:36:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:36:31] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lWd0sA
[09:36:31] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:41:28] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:41:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/N4oNWg
[09:41:28] <ghrust> 13rust/06auto 149785a8a 15Alex Crichton: Remove eof() from io::Reader
[09:41:28] <ghrust> 13rust/06auto 14b00057c 15bors: auto merge of #11376 : alexcrichton/rust/remove-eof, r=pcwalton...
[09:41:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:41:29] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:41:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bPwRzQ
[09:41:29] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:06:20] <dbaupp> eddyb: so you're not doing `git ls-files -- '*.rs' | xargs sed -i s/ast::item/ast::Item/` ?
[10:06:41] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[10:07:58] <eddyb> dbaupp: that might work, but I feel better with human feedback
[10:08:18] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[10:08:28] <dbaupp> eddyb: pssh
[10:08:38] <dbaupp> eddyb: just get `make` feedback :P
[10:08:56] <eddyb> dbaupp: this is much faster
[10:09:03] <dbaupp> really?
[10:09:26] <dbaupp> editing individual files by hand is faster than a sed script to all of them at once?
[10:09:38] <eddyb> dbaupp: renamed almost 200 different things in less than 4 days
[10:09:51] <dbaupp> that's quite a few
[10:09:59] <dbaupp> (what's the diff stat?)
[10:10:11] <eddyb> most of them weren't prefixed by ast::
[10:13:45] <bjz> yay! https://github.com/mozilla/rust/pull/11416
[10:13:51] <bjz> acrichto: ^
[10:13:59] <acrichto> bjz: nice!
[10:14:01] <acrichto> I was gonna r+ that
[10:14:06] <acrichto> but it should probably be discussed
[10:14:08] <acrichto> at least a little bit
[10:14:13] <bjz> cool
[10:15:35] <bjz> acrichto: now to remove util
[10:16:05] <acrichto> bjz: \o/
[10:16:37] <bjz> acrichto: spoke to brson, I'm going to move the things to prelude along with drop
[10:16:46] <acrichto> hmm....
[10:16:50] <bjz> seeing as we already have drop
[10:17:02] <acrichto> I suppose we have no other option
[10:17:23] <acrichto> anyway, sleep now
[10:17:31] <bjz> what whould you say about moving them to the root module
[10:17:31] <dbaupp> nah, there's another one in std::option
[10:17:45] <bjz> std::drop
[10:17:59] <bjz> std::Void
[10:18:02] <bjz> :/
[10:18:07] <dbaupp> we could reexport HashMap and so on like that
[10:18:09] * bjz is not so sure now
[10:18:11] <dbaupp> might be nice
[10:18:18] <bjz> std::range
[10:18:33] <dbaupp> `use std::HashMap;`
[10:18:42] <bjz> yep
[10:19:01] <bjz> std::hashmap::HashMap -_-
[10:19:12] <bjz> std::from_str::from_str
[10:26:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:26:27] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b00057c to 14ebc079c: 02http://git.io/N3iJvQ
[10:26:27] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:26:27] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:26:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eY5y5Q
[10:26:27] <ghrust> 13rust/06auto 145e637a8 15Patrick Walton: librustc: Move block contexts into per-function arenas, and...
[10:26:27] <ghrust> 13rust/06auto 14c34fc5e 15bors: auto merge of #11387 : pcwalton/rust/de-at-block, r=alexcrichton...
[10:26:28] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:27:11] <eddyb> dbaupp:  138 files changed, 3980 insertions(+), 4081 deletions(-)
[10:28:27] <eddyb> still have 12 to go
[10:58:45] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[11:02:23] *** Joins: dbaupp (Thunderbir@moz-BB237A70.lns20.syd6.internode.on.net)
[11:12:33] <eddyb> mt -> MutTy or MTy?
[11:24:36] <dbaupp> eddyb: MutTy
[11:30:18] <eddyb> aaaand it passes lint checking
[11:37:11] <bjz> dbaupp: https://gist.github.com/bjz/3a68ddd072ea0e60df58
[11:38:22] <dbaupp> bjz: it'd be neat
[11:38:36] <bjz> can you see issues with it?
[11:38:41] <dbaupp> first though: what happens with ($($x:expr)*) => { ... }
[11:38:42] <dbaupp> ?
[11:38:47] <bjz> ooh
[11:38:54] <bjz> bleh
[11:39:27] <bjz> well I guess then the user would need: (($($x:expr)*)) => { ... }
[11:40:04] <bjz> the previous one would keep consuming until a closing delimeter maybe? dunno
[11:40:11] <bjz> could be a problem
[11:40:49] <bjz> iter!(x <- ..10 {  }) just feels so hacky
[11:40:57] <bjz> and now without do...
[11:42:19] <eddyb> btw, I wanted a..b to be real Rust shorthand syntax for range(a, b) (or range_inclusive(a, b))
[11:42:54] <dbaupp> kimundi had a proposal for this too, btw
[11:43:02] <dbaupp> iirc
[11:43:11] <bjz> you mean my macro thing?
[11:44:10] <dbaupp> https://github.com/mozilla/rust/issues/9894
[11:44:13] <dbaupp> bjz: yes
[11:46:33] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:46:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/eY5y5Q
[11:46:33] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:51:16] <eddyb> also, for loops should require iterables, not iterators. and iterator would be iterable, but a vector could also implement Iterable to return .iter()
[11:51:28] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:51:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DVKG4Q
[11:51:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:51:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[11:51:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/asDn3w
[11:51:30] <ghrust> 13rust/06auto 146df57ec 15Alex Crichton: Remove the io::Decorator trait...
[11:51:30] <ghrust> 13rust/06auto 14fb44e20 15bors: auto merge of #11394 : alexcrichton/rust/no-decorator, r=cmr...
[11:51:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[11:54:00] <dbaupp> eddyb: https://github.com/mozilla/rust/issues/8649
[12:01:40] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[12:02:26] <bjz> dbaupp: made some changes: https://gist.github.com/bjz/3a68ddd072ea0e60df58
[12:07:26] <eddyb> dbaupp: I tried to provide my feedback on the matter
[12:10:20] <dbaupp> eddyb: I don't understand why assert_iter is fundamentally different to/any better than next(&mut Iterator)?
[12:10:55] <dbaupp> bjz: looks ok
[12:10:56] <eddyb> dbaupp: because it's just one identity call
[12:11:28] <dbaupp> eddyb: (also, as you ahve it, assert_iter will move the iterator, which isn't good)
[12:11:47] <dbaupp> eddyb: rather than a function call on every iteration you mean?
[12:12:23] <eddyb> and it's tied directly to the rhs of the for loop, span-wise or something
[12:12:33] <dbaupp> bjz: (although having ($e:expr, $f:expr) => { ... } being called as `foo! 4, 5` by default seems weird
[12:12:42] <eddyb> dbaupp: yeah, thinking about the move thing right now... doesn't a for loop move anyway?
[12:12:47] <dbaupp> no
[12:12:59] <dbaupp> look at the expansion
[12:13:19] <bjz> dbaupp: yeah...
[12:13:42] <eddyb> let _i = &mut <src_expr>;
[12:13:51] <bjz> dbaupp: maybe if it was:  {($e:expr, $f:expr)} => { ... }, with the extra brackets?
[12:13:58] <bjz> oh, I mean
[12:14:09] <bjz> with curlies instead of parens
[12:14:19] <bjz> might make it more obvious
[12:15:05] <dbaupp> maybe, but having the nested brackets often is kinda peculiar
[12:15:27] <dbaupp> (as in, most(?) macros make more sense as function-call-like invocations)
[12:15:31] <eddyb> dbaupp: there
[12:16:01] <dbaupp> eddyb: looks better
[12:16:21] <dbaupp> eddyb: (also, if you're going to say that it's a "better hack" you should explain why it's a better hack in the comment)
[12:17:31] <bjz> dbaupp: maybe {}=>{} could be for foo! ... and ()=>{} for foo!(..)
[12:17:46] <bjz> dbaupp: but it seems ugly to make a compromise like that
[12:18:49] <bjz> so {()}=>{}  would be the same as ()=>{}
[12:18:51] <dbaupp> hm
[12:33:26] <bjz> dbaupp: https://gist.github.com/bjz/8333444
[12:33:42] <bjz> https://gist.github.com/bjz/8333444#potential-concerns
[12:34:11] <bjz> do you think its worth posting on the ML?
[12:34:18] <bjz> or in the issues?
[12:35:09] <dbaupp> yeah, maybe
[12:38:33] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[13:02:27] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:02:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/asDn3w
[13:02:27] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:06:03] *** Joins: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP)
[13:06:34] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:06:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/blk3rA
[13:06:34] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:06:36] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:06:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/mLSPBg
[13:06:36] <ghrust> 13rust/06auto 14ceea85a 15Brendan Zabarauskas: Remove ApproxEq and assert_approx_eq!...
[13:06:36] <ghrust> 13rust/06auto 14ab9ec6d 15bors: auto merge of #11402 : bjz/rust/remove-approx, r=alexcrichton...
[13:06:36] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:06:50] * bjz crosses fingers
[13:09:54] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:10:36] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:14:19] <bstrie> bjz: you can remove Times, without being usable with `do` it has lost its usefulness as sugar :P
[13:14:32] <bjz> :)
[13:14:50] <bjz> bstrie: but... https://gist.github.com/bjz/8333444
[13:18:37] <cmr> ohh
[13:19:39] <cmr> as nice an rfc as I've seen
[13:20:18] <eddyb> cmr: try this on for size https://github.com/mozilla/rust/pull/11417
[13:20:47] <bjz> :O
[13:21:35] <bstrie> eddyb: I hope you wrote a CamelCasing script for all that
[13:21:45] <eddyb> bstrie: nope
[13:21:56] <bstrie> you're positively mad
[13:22:22] <bjz> eddyb is awesome
[13:22:23] <eddyb> bstrie: I can do negative madness, too!
[13:22:29] <bjz> butt
[13:22:33] <bjz> insane
[13:22:35] <bstrie> is anyone else volunteering to review it?
[13:22:51] * bjz shuffles away
[13:23:08] <bstrie> looks like it's up to me, then
[13:23:20] <eddyb> bstrie: this can't be automated without using libsyntax in some way
[13:23:32] <bstrie> haha
[13:24:06] <bstrie> eddyb: if this rots before I get done reviewing it, please push new commits rather than rebasing. that way I don't have to review it all over again :P
[13:24:42] <eddyb> it's not that bad once you get a set of files for each rename with the least number of false positives as possible
[13:25:26] <eddyb> it's sad that we don't have IDE support, a Java IDE would've taken 20 minutes instead of 3.5 days
[13:25:40] <cmr> huh, the repo gets about 1.5k unique visitors a day
[13:26:17] <cmr> eddyb: I have a PR somewhere with 150k+ lines of changed code
[13:26:39] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[13:26:44] <eddyb> cmr: what's it about?
[13:27:06] <cmr> I think it was the core->std / std->extra move :p
[13:27:20] <cmr> I've spent more than 5 minutes looking for it, giving up
[13:27:32] <eddyb> do those lines include renamed files :)?
[13:27:35] <cmr> ofc
[13:29:45] <eddyb> bstrie: I've left most UPPERCASE variants (in parse::token, I think) alone, they're more like static constants. but feel free to note it in the PR, for a future rename session
[13:33:18] <bstrie> eddyb: what's up with completely renaming ast_fold to Folder
[13:33:39] <bstrie> (I only just started, had to get some tea)
[13:33:45] <eddyb> bstrie: visit::Visitor, fold::Folder
[13:33:55] <bstrie> good enough for me
[13:35:08] <eddyb> it's funny, that's how I started. then I got addicted
[13:35:19] <cmr> Rust: not even once
[13:35:34] <cmr> eddyb: did you rename *everything*?
[13:35:58] <eddyb> all snake_case traits, types and variants in libsyntax, yes
[13:36:02] <dbaupp> cmr: it has #[deny(non_camel_case_types)] now
[13:36:05] <cmr> you're a hero
[13:36:30] <bstrie> is there a way to tell a github diff to ignore whitespace
[13:36:30] <dbaupp> visit::Visitor, fold::Foldor
[13:36:41] <dbaupp> ?w=1 or something
[13:36:43] <dbaupp> maybe
[13:36:44] <cmr> bstrie: ?w=0 or something like that
[13:36:47] <cmr> maybe that
[13:37:00] <dbaupp> https://github.com/blog/967-github-secrets
[13:37:11] <eddyb> bstrie: oh, yeah, sorry, I went a bit too far with random style cleanups :">
[13:38:17] <bstrie> haha, for a second I was afraid that there were literally 967 github secrets to memorize
[13:39:27] <cmr> make your developers 100x more productive with this one ancient secret!
[13:39:52] <eddyb> inhale rust mixed with gold powder?
[13:40:13] <cmr> it's the ballmer berry
[13:40:31] <cmr> it shouts at them repeatedly, giving them fear for their life and faimly
[13:40:32] <cmr> *family
[13:41:41] <bstrie> DEVELOP IN RUST DEVELOP IN RUST DEVELOP IN RUST
[13:41:48] * eddyb should make some fine rust, grind an aluminum rod to powder and print a large rust logo. then get a good camera setup
[13:41:54] <dbaupp> MUST TRUST RUST MUST TRUST RUST MUST TRUST RUST MUST TRUST RUST
[13:42:16] * eddyb slowly walks out of the demonic rituals room
[13:42:34] <eddyb> (I so hope there isn't one at mozcorp HQ)
[13:42:44] <bstrie> cmr: I was telling erickt yesterday that for the rust meetup you should stage a cooking-channel style presentation where you bake a rust cake in 15 minutes
[13:42:54] <cmr> bstrie: that is literally impossible
[13:43:01] <bstrie> nah they do it on tv all the time
[13:43:07] <cmr> ... unless I start baking N cakes and stagger it correctly
[13:43:11] <bstrie> you just have to have like four cakes in various states of preparation
[13:43:13] <benh> :D
[13:43:25] <cmr> I'm at school now though :(
[13:44:00] <bstrie> perfect, then you can take over one of the kitchens in a dorm and turn it into a soundstage
[13:58:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:58:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:00:00] <eddyb> nmatsakis: https://github.com/nikomatsakis/rust/blob/issue-3511-rvalue-lifetimes/src/librustc/middle/trans/datum.rs still using zeromem?
[14:00:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:00:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:08:20] *** Joins: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net)
[14:14:52] <bjz> nmatsakis: who controls the ML?
[14:15:17] <bjz> nmatsakis: I don't know if one of my messages has been sucked into oblivion
[14:15:49] <bstrie> bjz: brson and tjc, I think
[14:15:58] <bjz> ok
[14:16:09] <bstrie> nmatsakis: as long as everyone's pinging you, does the new DST have any bearing for un-special-casing strings?
[14:16:57] <bjz> nmatsakis: I posted this an hour or so ago, but it doesn't seem to have popped up - RFC for macros: https://gist.github.com/bjz/8333444
[14:19:16] <bstrie> bjz: as for enforcing only a single delimeter in macro definitions, I believe that long ago the intent was that whatever delimiter you used would be enforced at the macro call site
[14:19:36] <bjz> ah
[14:19:46] <bstrie> bjz: so you'd be able to do `println!("{}")` but not `println!{"()"}`, but other macros could use {} if they wanted to
[14:19:52] <bstrie> but I have no idea if that's still desired
[14:20:30] <bstrie> indeed, that was the reason for leaving the ability to use both () and {}, but *removing* the ability to use [] in macro defs
[14:20:38] <bstrie> which used to be entirely legal
[14:20:58] <bstrie> didn't want anyone doing `blah![asdf]`
[14:21:00] <bjz> with this proposal you would of course be able to decide that. but you'd need the enclosing delimeters to house the rule
[14:21:14] <bstrie> honestly I think it's 100% fine if macro definitions are ugly
[14:21:19] <bstrie> people should not be writing macros often
[14:21:22] <bjz> heh
[14:21:25] <bstrie> macro definitions should NOT be pretty
[14:21:27] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:21:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/mLSPBg
[14:21:27] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:21:36] <bstrie> macro usage should be pretty
[14:21:44] <bjz> what do you think of the munchymacro issue?
[14:22:06] <bstrie> what the heck is that
[14:22:35] <bjz> https://gist.github.com/bjz/8333444#issues-surrounding-multiplicity
[14:22:52] <bjz> sorry, was being vague
[14:23:41] <bstrie> hmm
[14:23:50] <bstrie> I don't know if I have an opinion :)
[14:23:54] <bstrie> pauls probably would
[14:24:16] <bjz> yep
[14:24:35] <bjz> I wouldn't have a clue how to implement this btw :P
[14:24:40] <bstrie> to summon pauls you have to go into the bathroom, turn off the lights, stare into the mirror and say "macro" three times
[14:25:20] <cmr> I INVOKE THEE, GOD OF LIBSYNTAX
[14:25:20] <bjz> heh
[14:25:29] <cmr> is how you get jclements
[14:25:38] <bjz> heh
[14:25:43] <bstrie> good idea, let's make jclements review this patch :P
[14:25:52] <bjz> WHAT'S THAT RACKET!
[14:26:11] <bjz> (says jclements)
[14:26:29] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:26:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ng5fUw
[14:26:29] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:26:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:26:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BP3QSA
[14:26:32] <ghrust> 13rust/06auto 140232fed 15Brendan Zabarauskas: Merge some numeric traits with Real and don't re-export RealExt...
[14:26:32] <ghrust> 13rust/06auto 141b0f5b2 15bors: auto merge of #11412 : bjz/rust/num-cleanups, r=alexcrichton...
[14:26:33] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:26:45] * bjz crosses fingers again
[14:27:49] <bjz> who is marijnh?
[14:28:06] <bstrie> bjz: one of the original fulltime rust employees
[14:28:13] <bjz> oh ok
[14:28:14] <bstrie> marijn haverbeke
[14:28:28] <bstrie> bjz: on my rust map, he's the reason why europe is covered by a giant dot :P
[14:28:34] <bjz> hah
[14:28:34] <cmr> hahah
[14:28:42] <bjz> rust map?
[14:28:48] <bstrie> http://seleniac.org/map/
[14:28:57] <cmr> is that regularly updated?
[14:29:04] <bstrie> usual disclaimer: don't post that to any websites, it will kill my puny server
[14:29:13] <bstrie> cmr: no I have to manually update it
[14:29:20] <bstrie> by which I mean, run the script manually
[14:29:30] <bstrie> I could automate it but it doesn't really change day-by-day
[14:29:36] <cmr> https://bitbucket.org/birkenfeld/pygments-main/pull-request/270/rust-lexer-update-to-09#comment-1035225
[14:29:38] <cmr> woo
[14:29:38] <bstrie> do it once per version usually
[14:29:40] <bjz> melbourne has a decent showing
[14:29:50] * dbaupp posts that to every website!
[14:30:21] <bstrie> noooo
[14:30:38] * bstrie replaces it with a gif of a dancing cat in a tuxedo
[14:30:39] <bjz> \o/ cmr
[14:31:01] <cmr> still doesn't have complete raw string support, because I was lazy.
[14:31:12] <bjz> what about lifetimes?
[14:31:12] <dbaupp> bstrie: you could host it on github pages since it's just a static page, right?
[14:31:18] <cmr> bjz: yep, that was the big one
[14:31:22] <bjz> removed the keywords too?
[14:31:33] <cmr> just look at the pr :p
[14:31:34] <bstrie> dbaupp: yeah that's the plan, but I wanted to enhance it first... wanted to make it so that you can see names by mousing over the map
[14:31:49] <bstrie> instead of having to break out the web inspector and look at the attributes on the dot elements manually
[14:31:49] <bjz> bstrie: and zoom in?
[14:31:57] <bstrie> bjz: you can zoom in, it's all svg
[14:32:02] <bstrie> zoom your browser :)
[14:32:16] <bjz> haha
[14:32:25] <bjz> it's amazing
[14:32:26] <cmr> lean in
[14:32:39] * bjz has a retina display
[14:32:43] <eddyb> because the closer you look
[14:32:48] * bjz cannot see pixels
[14:33:10] <mrmonday> https://github.com/mozilla/rust/pull/11410#issuecomment-31926737 <= anyone know how to do this? That way I can add some test cases for it
[14:33:18] <eddyb> nobody? nothing? come on... "the easier it is to fool you"
[14:33:49] *** Joins: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[14:33:49] *** Quits: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[14:34:00] <cmr> mrmonday: look at src/test/run-make .. probably easiest to do it that way.
[14:34:32] * bjz is super excited about 0.9
[14:35:32] <bstrie> bjz: anyway, marijn is the one who implemented pattern matching, and was the one to realize that trait objects sort of just fall out of the trait system
[14:35:40] * cmr -> class
[14:35:49] <bstrie> bjz: he's also the guy behind http://codemirror.net/ and http://eloquentjavascript.net/
[14:35:56] <dbaupp> cmr: skip it! there's rust to write!
[14:35:58] <bjz> oh nice
[14:36:12] <bjz> bstrie: thanks for the history, oh ancient one
[14:37:00] * bstrie shuffles back into the archives, bent and gnarled
[14:38:04] <eddyb> bstrie: I gave my gf (at the time) the eloquent JS... about an year ago. she never got to read it. I forgot about the entire thing until now
[14:39:03] <bstrie> eddyb: just think, if you'd given her Learn You A Haskell instead, perhaps you'd still be together
[14:39:22] <bjz> hah
[14:39:38] <bjz> until the bit where you chop the head off a monster
[14:42:35] <bstrie> uh oh
[14:42:41] <bstrie> typo in the release notes
[14:42:45] <bstrie> "preperation"
[14:42:49] <eddyb> bstrie: hmm... it took me almost 4 days to replace everything, and I tried to be fast. if you end up reading every line, it might take a while
[14:42:53] <bjz> ._.
[14:43:07] <bstrie> eddyb: nah I'm making good progress
[14:43:34] <bstrie> once I'm done gonna p=1 to try and avoid rotting
[14:44:07] <bstrie> eddyb: anyway, these sorts of pulls are basically the only thing that I have the expertise to review, so I don't mind taking my time :P
[14:44:46] <dbaupp> bstrie: you have push-to-master privileges, right? just amend the commit that introduced the typo and force push to master! :P
[14:44:56] <bstrie> SHUT
[14:44:57] <bstrie> DOWN
[14:44:58] <bstrie> EVERYTHING.
[14:45:31] *** Parts: whitequark (whitequark@moz-BC42D267.whitequark.org) ()
[14:46:27] <bstrie> eddyb: fwiw, I do prefer "elem" as an abbreviation instead of "elt"
[14:46:36] <bstrie> the latter sounds like a creature from tolkien
[14:46:45] <bjz> ent
[14:46:49] <bstrie> elf
[14:47:04] <bstrie> or the unholy offspring thereof
[14:47:13] <bjz> elnt
[14:47:21] <bjz> elft
[14:47:43] <eddyb> bstrie: from_elem ;)
[14:47:56] <bjz> from_elf
[14:48:24] * eddyb has learned to find reasoning for most of his actions
[14:48:29] <bjz> I think we should all agree to call elements elves now
[14:49:45] <eddyb> racism? in Rust? I thought the rules denied such conduct
[14:50:12] <bjz> huh?
[14:50:16] <bstrie> eddyb: elves are a species. the code of conduct is fuzzy there
[14:50:52] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:50:59] <mrmonday> cmr: when you're back - I'm not sure what I should be looking at here exactly
[14:53:05] <bstrie> eddyb: for future reference, I do wish that you had had separate commits for 1) camelcasing, 2) elt -> elem, 3) whitespace
[14:53:31] <eddyb> bstrie: I can't just answer to that with "addicting", can I?
[14:54:05] <bstrie> NO. R--
[14:54:10] <bstrie> ------
[14:54:12] <mrmonday> cmr: are you suggesting I create a new directory in there with a makefile, and put all the tests in there rather than in a #[test] block?
[14:54:47] <eddyb> elt -> Elem is part of choosing proper names when simple uppercasing doesn't work
[14:55:17] <eddyb> like mt -> MutTy
[14:55:59] <bstrie> eddyb: well I wish you had chosen a better proper name for `ii_item_ref` than `IIItemRef`, but I won't hold it against you :P
[14:56:29] <bstrie> especially since `ii` there already stands for `inlined item` :)
[14:56:48] <eddyb> bstrie: I wanted to use Inlined* for ii_*, but you'd have an InlinedItem variant in an InlinedItem enum
[14:57:23] *** Joins: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP)
[14:57:51] <eddyb> (and the _ref stuff is just something I added in "Disowning Visitor", look at inlined_item in the AST)
[14:58:01] <bjz> bstrie: wouldn't that be IiItemRef? :P
[14:58:20] <bjz> seeing as we do C# style acronyms?
[14:58:31] <eddyb> bjz: MacroResult -> MR*
[14:58:38] <bjz> Mr
[14:58:40] <bjz> gosh
[15:00:01] <eddyb> bleah, we need enum mod
[15:04:07] <bjz> yeah
[15:04:14] <bjz> it got shot down :(
[15:04:50] <bjz> one I saw libsyntax... I *understood*
[15:09:26] <benh> oh?
[15:15:05] <cmr> mrmonday: only the tests you need, but yes.
[15:17:42] <mrmonday> cmr: that'll be all of them - all tests worth doing need a fake library in place to actually test them
[15:31:29] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:31:29] *** ChanServ sets mode: +ao dherman dherman
[15:32:20] *** Parts: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) ()
[15:37:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:37:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/BP3QSA
[15:37:11] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:41:34] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:41:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Fn20tA
[15:41:34] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:41:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:41:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lJqrxA
[15:41:35] <ghrust> 13rust/06auto 1401f42ee 15Nick Cameron: Start the span for a path in a view_path at the correct place (at the start of the path, rather than at the start of the view_path).
[15:41:35] <ghrust> 13rust/06auto 14dd11fe1 15bors: auto merge of #11414 : nick29581/rust/span, r=alexcrichton...
[15:41:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:48:56] <eddyb> do we need all these special idents in the interner?
[15:52:05] <bstrie> eddyb: curious why you didn't remove the trailing underscore on ast::ExplicitSelf_
[15:52:26] <eddyb> bstrie: Ctrl+F "type ExplicitSelf ="
[15:52:32] *** Quits: Kxepal (Miranda@moz-4DFD725C.pppoe.mtu-net.ru) (Ping timeout)
[15:52:44] <bstrie> well I would, but I'd lose my place and have to start over :P
[15:53:26] <eddyb> bstrie: type ExplicitSelf = Spanned<ExplicitSelf_>; // that's why they have trailing underscores
[15:53:52] <eddyb> _mod on the other hand, had a leading underscore because mod is a keyword, so I renamed it to Mod
[15:54:10] <bstrie> I'm also amused that this code is so old that you had to increase indents in match statements from 2 to 4 spaces
[15:55:18] <eddyb> I avoided doing it if the block was more than 1.5 screens tall
[15:55:39] *** Joins: Kxepal (Miranda@moz-81616591.pppoe.mtu-net.ru)
[15:56:36] <eddyb> yet another grep trick: egrep '\bspecial_idents::\b' -r src/lib{rustc,rustdoc,rustpkg,syntax} | sed 's/.*special_idents::\([a-z_]*\).*/\1/' | sort | uniq -c
[15:56:39] <bstrie> it occurs to me, why do we even have somthing called ast::Purity
[15:58:08] <eddyb> bstrie: I did mention it a couple days ago, it deals with degrees of *impurity*
[16:00:19] <eddyb> (7,                          clownshoe_abi,          "__rust_abi"); // this is used solely in the symbol name of extern "C" fn wrapper (the env ptr madness)
[16:04:00] <eddyb> why do anonymous modules use "opaque"?
[16:04:46] <eddyb> rusti: {{{struct Foo; Foo}}}
[16:04:47] -rusti- main::Foo
[16:05:00] *** Quits: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[16:05:04] <eddyb> hmm. so it's not that
[16:05:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[16:05:27] <bjz> eddyb: rusti runs in a the main function
[16:05:40] <bjz> so those are just scopes
[16:05:49] <bjz> I mean, blocks
[16:06:06] <eddyb> resolve::build_reduced_graph_for_block
[16:06:08] <bjz> is that an anonymous module?
[16:06:47] <eddyb> debug!("(building reduced graph for block) creating a new anonymous module for block {}", block_id);
[16:06:52] <eddyb> bjz: I'm not sure
[16:09:10] <bstrie> eddyb: curious about changing TyClosure -> ClosureTy
[16:09:28] <bstrie> but ty_path -> TyPath
[16:09:34] <eddyb> bstrie: ty_closure -> TyClosure. rustc::middle::ty also uses ClosureTy
[16:09:46] <bstrie> ok
[16:10:00] <eddyb> as in, ClosureTy is now an inner structure in both places, and ast::TyClosure is an enum variant
[16:10:14] <bstrie> same for BareFnTy, then?
[16:10:18] <eddyb> yupp
[16:10:45] <eddyb> I think PrimTy contains TyUint(UintTy)
[16:11:02] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:12:51] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[16:13:22] <bstrie> eddyb: why add #[allow(non_camel_case_types)] to abi.rs
[16:13:38] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:14:02] <eddyb> bstrie: it's on the enum, actually
[16:14:18] <bstrie> stupid semicolon :P
[16:14:24] <bstrie> well why did it need to be added anyway
[16:14:31] <eddyb> X86_64
[16:14:41] <bstrie> aha
[16:15:05] <eddyb> maybe we should allow that, there's no uppercase for numbers :P
[16:15:13] <bstrie> little over halfway done
[16:15:17] *** Joins: msm (Mibbit@moz-2202AB44.hsd1.ga.comcast.net)
[16:15:56] <eddyb> bstrie: let me know when you're done so I can rebase it. I'll keep track of the rebase changes if you want
[16:16:06] <bstrie> ha, has it already rotted
[16:16:39] <eddyb> maybe, it touches a lot of stuff. before the pullreq I had to rebase against the @Block -> &Block change in trans
[16:17:16] <eddyb> github might know if it can be merged cleanly. at least it does at the PR creation page
[16:18:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:19:34] <eddyb> hah, macro_rules! uses macro parsing rules
[16:20:29] <bjz> you'd hope so
[16:20:48] <bjz> seeing as it looks like a macro
[16:21:04] <bjz> besides its wierd 'identifier first' thing
[16:21:29] <eddyb> $( $lhs:mtcs => $rhs:tt );+
[16:21:40] <bstrie> pub enum InlinedItem { IIItem(@Item),
[16:21:56] <bstrie> submitted without comment
[16:22:11] <eddyb> you mean I removed a comment?
[16:22:17] <bstrie> no, I just think it's funny :P
[16:23:11] <eddyb> bjz: it constructs the grammar each time it parses a macro definition...
[16:24:17] <eddyb> if it did it only once, it would make sense to intern special_idents::matchers and special_idents::tt on the spot instead of having them as special idents
[16:24:53] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:27:38] <bstrie> eddyb: are there any other crates that need this treatment?
[16:27:46] <eddyb> bstrie: librustc :P?
[16:28:01] <bstrie> I don't volunteer to review that one
[16:28:01] <eddyb> that's just as big, maybe even bigger
[16:28:14] <eddyb> (this one was almost 200)
[16:30:47] <eddyb> this is lame, "arg" is a special ident just for the arguments of tuple structs and enum variants (ctors)
[16:32:27] <eddyb> but those idents aren't used by trans AFAIK. and a proper format!("arg{}", i) would work better, if they were used
[16:36:00] <eddyb> __log_level should be at most a special ident, why is it a keyword?
[16:36:26] <eddyb> oh, this is worse than I thought... ExprLogLevel
[16:40:07] <bstrie> eddyb: curious about changing `09:56 #rust-internals: < eddyb> bstrie: I wanted to use Inlined* for ii_*, but you'd have an InlinedItem variant in
[16:40:10] <bstrie> asdfsdf
[16:40:14] <bstrie> fn diagnosticstr(lvl: level) -> ~str {
[16:40:15] <bstrie> to
[16:40:18] <bstrie> ld be at most a special ident, why is it a keyword?
[16:40:22] <bstrie> dammit putty
[16:40:34] <bstrie> impl ToStr for Level { fn to_str(&self) -> ~str {
[16:40:36] <bstrie> ^
[16:40:44] <bstrie> you've moved from taking level by-value to taking it by-ref
[16:41:14] <eddyb> because it's the ToStr signature
[16:41:21] <bstrie> ah ok
[16:41:41] <eddyb> (I was scared for a second that I would have to revert that change)
[16:41:44] <bstrie> I was looking at the impl after that and saw that it was also by-val, but didn't spot the trait
[16:42:12] <eddyb> the color one has no trait, it's just a method
[16:42:17] <bstrie> yeah
[16:56:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:56:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lJqrxA
[16:56:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:59:35] <eddyb> bstrie: rebases cleanly so far :D
[17:00:58] <eddyb> hmm, with loadable syntax extensions, we can do generators, can't we?
[17:01:00] <bstrie> eddyb: I'm trying and failing to link to a line of code in this diff... what's the idea with removing e_ity here https://gist.github.com/bstrie/8337754
[17:01:53] <eddyb> bstrie: LIT_CHAR takes only one argument, that code was bogus
[17:02:11] <jack> acrichto: got a minute to help me debug a potential runtime issue?
[17:02:14] <eddyb> it never got called, but it was referencing ty_char which was renamed
[17:02:55] <eddyb> bstrie: the only artifact of ext::quote is ast::tt_tok
[17:05:33] <acrichto> jack: sure
[17:06:06] <jack> i'm running into hangs in the servo reftests: https://github.com/metajack/servo/blob/rustup-20131219/src/test/harness/reftest/reftest.rs
[17:06:14] <jack> basically all the tests finish, but the process never exits.
[17:06:30] <jack> gdb shows several threads in pthread_cond_wait and a few in uv__io_poll
[17:06:32] <eddyb> kimundi: what if I went ahead and ported traceur-compiler's state machine transformation for generators to a syntax extension?
[17:06:48] <kimundi> wut?
[17:07:07] <acrichto> jack: hm, do you have the logs?
[17:07:20] <jack> acrichto: what logs would you like?
[17:07:21] * kimundi does not understand
[17:07:25] <eddyb> kimundi: that or regexp. though I don't know enough about regexps - there's smarter people around
[17:07:29] <acrichto> jack: just what the tests printed
[17:07:45] <eddyb> kimundi: actually, nevermind what I said
[17:08:10] <jack> acrichto: https://gist.github.com/metajack/8337884
[17:08:13] <jack> that's a run in gdb
[17:08:48] <acrichto> jack: are you sure that all tests completed? there's nothing printing out anything related to the number of tests that are run
[17:08:59] <acrichto> which sometimes indicates that there's a test in deadlock
[17:09:07] * jack goes to count.
[17:10:59] <jack> acrichto: one missing.
[17:11:12] <acrichto> jack: try running with RUST_TEST_TASKS=1
[17:11:12] * jack cursees at the test runner for not printing what test it's about to run
[17:11:59] <eddyb> how would one store locals from a generator in a state... without knowing the actual types?
[17:13:19] <eddyb> would enum State<Tx, Ty, Tz> {S1 {x: Tx, y: Ty}, S2 {x: Tx, y: Ty, z: Tz}} work?
[17:14:05] <eddyb> rusti: enum Foo<A, B, C>{Bar(A, B), Baz(A, B, C)}; Bar(false, 'c')
[17:14:08] -rusti- pastebinned 10 lines of output: http://ix.io/9Az
[17:15:14] <eddyb> rusti: enum Foo<A, B, C>{Bar(A, B), Baz(A, B, C)}; let x = Bar(false, 'c'); let mut y = x; y = Baz(true, 'd', 5); x
[17:15:16] -rusti- pastebinned 7 lines of output: http://ix.io/9LY
[17:15:37] <eddyb> oooh, that's very cool
[17:16:48] <eddyb> rusti: enum Foo<A, B, C, D, E>{Bar(A, B), Baz(C, D, E)}; let x = Bar(false, 'c'); let mut _y = x; _y = Baz(true, 'd', 5); x
[17:16:48] -rusti- Bar(false, 'c')
[17:21:22] <jack> acrichto: does .finish() not deal well with segfaults?
[17:21:35] <acrichto> jack: what's .finish() a method for?
[17:21:42] <jack> Process.finish()
[17:21:54] <acrichto> it should return to you that it segfaulted
[17:22:12] <acrichto> one enum variant of ProcessExit is that it received a signal
[17:22:52] <jack> i am having trouble getting it to freeze now but the last one froze even earlier and shows that two of the servo processes had segfaulted.
[17:23:17] <eddyb> bstrie: you just went silent... anything happened?
[17:23:21] <jack> now it's frozen at the eend again, but the test that is hung is a differnet one.
[17:24:00] <jack> weird. with RUST_TEST_TASKS=1 everything is in color
[17:24:21] <bstrie> eddyb: still reading. 4/5ths done
[17:25:10] <eddyb> bstrie: good to know you're still alive :P
[17:25:32] <jack> acrichto: ok. this is a servo hang, not related to the test harness. it's just intermittent.
[17:25:42] <jack> larsberg said it was on pool.shutdown()
[17:25:42] <acrichto> glad I could help!
[17:25:46] <jack> when he looked before
[17:25:52] <acrichto> I've thought about catching segfaults in the test runner
[17:25:54] <acrichto> and printing active tests
[17:26:15] <jack> why would pool.shutdown hang?
[17:26:23] <acrichto> if the pool wasn't drained yet
[17:26:33] <acrichto> as in there were still some green tasks running around
[17:27:01] <jack> is there a RUST_LOG i can turn on to print out what is hanging around?
[17:27:35] <acrichto> not not, no
[17:27:38] <acrichto> not now, now*
[17:27:41] <acrichto> ugh, words
[17:28:20] <eddyb> kimundi: but didn't you have a list of counterexamples to an AST-based transform for generators
[17:28:34] * jack goes to annotate all the spawns
[17:28:45] <kimundi> eddyb: I do not understand what you are talking about :P
[17:29:15] <eddyb> kimundi: yield
[17:29:29] <eddyb> if not, maybe I'm thinking of someone else
[17:29:42] <eddyb> I remember a gist
[17:30:10] <kimundi> I remember talking about them, but I'm not sure what counterexamples you mean
[17:30:24] <eddyb> https://github.com/mozilla/rust/issues/7746
[17:30:34] <eddyb> kimundi: I'll let you know if I can find them
[17:31:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:31:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/XcX9nQ
[17:31:39] <ghrust> 13rust/06auto 14a18282c 15Alex Crichton: Remove eof() from io::Reader
[17:31:39] <ghrust> 13rust/06auto 1463ba93f 15bors: auto merge of #11376 : alexcrichton/rust/remove-eof, r=pcwalton...
[17:31:40] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:31:48] <eddyb> https://github.com/mozilla/rust/issues/7746#issuecomment-20881193
[17:32:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:32:58] <eddyb> ahh, I still can't return a generic type like that. an ~Iterator at most
[17:34:04] <bstrie> eddyb: use ~Any :)
[17:34:06] <eddyb> yet another reason to have some sort of restricted return type "inference"
[17:35:00] <eddyb> bstrie: why? an anon type implementing Iterator is what I'm returning, semantically
[17:36:19] <kimundi> eddyb: Well, the idea I always had with my syntax proposals there is that you simply declare the return value of the function as part of the yield function definition: yield fn foo() -> struct Bar { ... }.  Note the "struct" part to signify the generation of a new type
[17:37:44] *** Joins: bytewise (bytewise@moz-B0382145.adsl.alicedsl.de)
[17:38:10] <eddyb> kimundi: my idea involves returning an anon type, generic over the inferred locals' types
[17:38:54] <kimundi> But that means trait objects and/or API-level inference, both of which would be bad :(
[17:40:04] <eddyb> how about "unboxed traits"? it's one of the ways to do safe API-level "inference"
[17:40:18] <kimundi> I think simply declaring the return type would work out well - the only hairy bit is annotating lifetimes and generic parameters on it - but the compiler could help there by simply telling you what you need to add because of which local variable in the generator function
[17:40:27] <kimundi> eddyb: What do you mean with unboxed traits?
[17:41:01] <eddyb> fn foo() -> Iterator<int> {struct Foo; impl Iterator<int> for Foo {...} Foo}
[17:41:02] <bstrie> eddyb: r+
[17:41:10] <eddyb> bstrie: wait, wait
[17:41:28] <eddyb> bstrie: well, it should merge cleanly anyway
[17:41:50] <kimundi> eddyb: But... What size would that type have? The compiler needs to know what it is, the user needs to know what it is...
[17:42:40] <kimundi> Heck, we are at DST proposal 5 because something like a unboxed trait is not expressible otherwise...
[17:43:02] <eddyb> kimundi: it would be erased in a few ways, but trans would have it - as it can be inferred by typeck
[17:43:35] <kimundi> So, API level inference after all?
[17:43:47] <kimundi> Which the devs don'T want
[17:44:04] <eddyb> kimundi: the trick is that callers of the function don't need to infer the type
[17:44:21] <kimundi> And "erased" sounds like "major complication to the type system for one specific feature" :P
[17:44:34] <eddyb> it sounds like "limiting" to me :)
[17:44:58] <kimundi> eddyb: The callers of the function need to know the type
[17:45:16] <eddyb> returning an unsized type that is resolved between type checking and trans
[17:45:28] <eddyb> kimundi: do they?
[17:45:43] <kimundi> what if you want to store the return type in a struct? what if you want to write out a typedef to it?
[17:46:11] <eddyb> then you should use ~Trait or whatever because you can't name the struct anyway
[17:46:57] <eddyb> this is obvious for returning unboxed closures, the anon type is created inside the compiler
[17:47:01] <kimundi> I mean, it might work, but you'd really need to talk with nmatsakis about it - my experince with the months and months of DST discussions lead me to believe that this would fall under "unnecessary complication" though :P
[17:47:51] <eddyb> kimundi: the trick to that is to make it an uncomplicated expansion on top of DST5 :P
[17:47:53] <kimundi> eddyb: Sure you can name the struct, if has a name. And we don'T have unboxed closure either atm
[17:50:27] <eddyb> kimundi: the way I want to implement generators as a syntax extension, you need to make that structure generic - which is possible (yay magic) but you can't define the function unless it returns ~Iterator<T> or an anon type implementing Iterator<T>
[17:51:05] <eddyb> bstrie: 4d of work -> 4h of review. thanks btw :D
[17:51:57] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:52:02] <kimundi> eddyb: Sorry, maybe I'm just to tired atm - but I did not understand your last message at all :P
[17:53:18] <eddyb> kimundi: pieces of the state which are TyInfer in the AST, I need to make those generic. which is fine inside the function, but I need typeck to infer the return type if I want to return an unboxed state
[17:54:25] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:54:26] *** ChanServ sets mode: +qo brson brson
[17:56:20] <kimundi> OKay, I understand that even less - I should point out that I have no idea how the compiler works internally in great detail - which is why I might possibly object with reason here - I just think that a solution where you simply _give_ the return type a name is way more easy than one where... whatever else you try to explain to me happens :P
[17:56:32] <kimundi> with no reason*
[17:57:03] <kimundi> I mean, its how iterator-returning functions work today in Rust
[17:57:22] <kimundi> ANd it seems like a fine, easy solution to me
[17:57:48] <eddyb> you can't do that
[17:58:15] <eddyb> kimundi: syntax extensions don't see types that aren't in the source itself
[17:58:37] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[18:00:31] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:00:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:00:38] <eddyb> typeck infers non-explicit types, and that's a long way down from syntax extensions. there's no easy way of generating code "down there". and you'd have to run typeck again after the state machine conversion
[18:00:53] <eddyb> much hackier than returning "unboxed traits"
[18:01:30] <jack> is triage not in CYA?
[18:01:53] <jack> nm
[18:05:11] <kimundi> eddyb: Can'T do what?
[18:05:43] *** Joins: pnkfelix (pnkfelix@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:05:55] <kimundi> eddyb: I know that a generator function can not be created using a procedural macro alone
[18:06:10] <eddyb> it *can*, the only problem is the return type :D
[18:06:20] <eddyb> can be created, that is
[18:07:39] <kimundi> OKay, now you've completly lost me
[18:09:06] <eddyb> kimundi: why do you think it can't be done with procedural macros?
[18:09:14] <kimundi> yield_fn!(fn foo() -> struct Bar { ... }) // The macro now knows about the name "Bar" for the struct - however it can not properly run inference inside the function body becuase resolve didn'T run yet
[18:10:09] <kimundi> For example, a function body like "fn foo() { let mut a = b(); loop { a += 1; yield a; } }" 
[18:10:48] <kimundi> The compiler needs to emit a struct with a field "a" of type "returntype of b()" - that part is afaik not possible in a procedural macro
[18:11:04] <eddyb> yes, you are right. however, you can use generics
[18:11:18] <kimundi> What do you mean?
[18:11:18] <eddyb> struct State<Ta> {a: Ta}
[18:11:53] <eddyb> the problem is that you can't express the return type, as its generic type params are to be inferred within the function by typeck
[18:14:06] <kimundi> Yeah - in other words exactly the same problem :P
[18:14:09] <eddyb> nope
[18:15:25] <eddyb> generator!{foo() -> int { let mut a = b(); loop { a += 1; yield a; } }} // I can make that work. the problem is the return type of foo(), which can be ~Iterator<int> until the anon return type issue is solved
[18:17:29] <eddyb> ouch, no, bigger problem. I realized when I started to write the expansion
[18:18:19] <kimundi> Sorry, I'm gonna leave this discussion now - I'm honestly to tired to properly think about what you're saying, and it makes me cranky. :P
[18:19:36] <eddyb> fn foo() -> ~Iterator<int> {enum State<Ta> {S0, S1{a: Ta}} impl<Ta> Iterator<int> for State<Ta> {fn next(&mut self) -> Option<T> {loop{match *self {S0 => *self = S1(b()), S1(mut a) => {a += 1; *self = S1(a); return Some(a);}}}} ~S0 as ~Iterator<int>}
[18:20:38] <eddyb> I thought the generic type params would be inferred from the code, but because part of it is moved within the next method, it's much harder
[18:20:44] <eddyb> s/part of it/most of it
[18:22:09] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:26:53] <eddyb> ooooh, I know how to fix that. pass a 'static closure in there somewhere. the closure's type will be inferred :D
[18:27:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:28:03] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[18:44:55] <bstrie> nmatsakis: I caution you against popularizing the word "destructored", it's tantalizingly easy to conflate it with "destructured" :)
[18:51:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:51:28] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/XcX9nQ
[18:51:28] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:56:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:56:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/pAfefw
[18:56:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:56:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:56:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/x0Nkpw
[18:56:31] <ghrust> 13rust/06auto 14a87aad1 15Eduard Burtescu: libsyntax: Renamed types, traits and enum variants to CamelCase.
[18:56:31] <ghrust> 13rust/06auto 14d48927c 15bors: auto merge of #11417 : eddyb/rust/desnaking, r=bstrie
[18:56:32] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:56:47] <eddyb> yusss
[19:02:30] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[19:02:35] <brson> not a lot of response to the rc. everybody comfortable just releasing it?
[19:03:51] <bstrie> brson: I dunno, is 12 hours long enough time for everyone who wants to test the rc to try it?
[19:04:34] <brson> here's the new announce blurb https://gist.github.com/brson/8339962
[19:04:53] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:05:13] <bstrie> make sure you include the usual part at the top with "rust is a programming language for concurrency yada yada"
[19:05:42] <bstrie> every release is someone hearing about rust for the first time, and they all appreciate that bit
[19:06:10] <brson> i will
[19:06:27] <brson> i just don't gist that so nobody can link to the full announcnement early
[19:07:07] <eddyb> I would also suggest mentioning yak shaving :P
[19:07:07] <bstrie> brson: actually, in the release notes, you spelled "preparation" as "preperation". better prepare a new rc :(
[19:07:30] <brson> lol no
[19:07:36] <brson> there are other typos too
[19:08:16] *** Quits: pnkfelix (pnkfelix@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[19:09:09] <bstrie> wow, I forgot that format!() just barely missed the last release
[19:09:17] <bstrie> feels like so long ago!
[19:10:13] <bstrie> I'm also amused that we apparently brought back nested comments
[19:10:19] <eddyb> oh, this just came to me - does a release announcement mention new contributors or anything like that?
[19:10:37] <bstrie> hm, usually it mentions all contributors
[19:10:43] <eddyb> (or update CONTRIBUTORS. does that even exist? idk)
[19:10:45] <bstrie> without specifying new ones
[19:10:58] <bstrie> eddyb: https://github.com/mozilla/rust/blob/master/AUTHORS.txt
[19:11:06] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:11:06] *** ChanServ sets mode: +ao dherman dherman
[19:12:02] <eddyb> bstrie: "fine" I'm blushing now!
[19:12:41] <eddyb> (I'm as rough as they come)
[19:14:06] <eddyb> bstrie: oh dammit. I forgot to test rustdoc/rustpkg
[19:14:25] <bstrie> haha, is it going to fail?
[19:14:33] <eddyb> it failed already :(
[19:14:47] <bstrie> well don't make me read all 4,000 lines again
[19:14:52] <bstrie> make new commits :P
[19:14:58] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:15:22] <steveklabnik> heh
[19:16:15] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[19:16:53] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[19:17:25] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[19:18:06] <eddyb> bstrie: will do. I gave up running make check-stage1 because compiletest wouldn't compile, even after make clean
[19:20:07] <kimundi> eddyb: Something in the makefile is borked, I think - run "make" normally until it starts with satge 2, then try make check-stage1 again
[19:21:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:21:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d48927c to 1463ba93f: 02http://git.io/N3iJvQ
[19:21:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:21:30] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:21:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/j0613w
[19:21:30] <ghrust> 13rust/06auto 14c083fea 15Patrick Walton: librustc: Implement placement `box` for GC and unique pointers.
[19:21:30] <ghrust> 13rust/06auto 1406ede96 15bors: auto merge of #11055 : pcwalton/rust/placement-box, r=pcwalton...
[19:21:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:22:11] <eddyb> bstrie: ^^ that will rot my PR :(
[19:23:07] <bstrie> c'est la vie
[19:27:47] <bstrie> is `spawn` not in the prelude anymore?
[19:29:13] <eddyb> bstrie: weird, I changed one of the files in rustpkg, but not the other. not to be mean to pcwalton, but I hope his PR fails :P
[19:29:37] <bstrie> shush, I think pcwalton has suffered enough :)
[19:29:55] <bstrie> cmr: how goes the removal of @str @[T]
[19:30:55] *** Joins: pnkfelix (pnkfelix@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:31:35] <bstrie> I ask me previous question because the detailed release notes have the line `do std::task::spawn() {`
[19:31:58] <bstrie> and I'm curious why it isn't just `do spawn {`
[19:34:11] <eddyb> why are we even adding box(HEAP) and box(GC)? it should be relatively easy to make box do the right thing depending on the return type. and if you want a hint, box(Uniq)/box(Gc) would make more sense. I don't like the magic tokens. but that's just me
[19:34:59] <brson> eddyb: I didn't know we were using HEAP and GC. I thought it would be Uniq and Gc
[19:35:04] <brson> certainly not all caps like that
[19:35:17] <brson> but they won't always be magic tokens. that's only transitionary
[19:35:25] <brson> they are allocator values
[19:35:30] <eddyb> at least it's not huge
[19:37:24] <eddyb> bstrie: well, it's fine if it goes through, just don't let anything else pass pls
[19:43:53] <bstrie> eddyb: have you already fixed everything?
[19:44:18] <eddyb> bstrie: I'm running tests so I don't make a fool of myself. I'm almost sure it's just one character :-<
[19:44:52] <eddyb> and I said it's fine because it doesn't seem to touch anything I've changed. or at least it would be easy to check
[19:45:42] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[19:46:02] <bstrie> eddyb: well I don't have the power to turn off bors, the best that I can do is approve a new commit with high priority if you get one pushed before the current one finishes
[19:46:58] <bstrie> bors is hungry, and he must feed
[19:50:26] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:51:00] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[19:52:41] <bstrie> eddyb: so try and ping me as soon as it's ready and I can do a review immediately
[19:53:13] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:58:05] <eddyb> /home/eddy/Projects/rust/src/librustpkg/lib.rs:1:1: 1:1 error: can't find crate for `std`
[19:58:12] <eddyb> why would it do that :/?
[20:03:07] <bstrie> ~Any is new to 0.9, right?
[20:04:24] <bstrie> agh, it's impossible to find in the issue tracker
[20:04:41] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:04:41] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:04:55] <bstrie> kimundi: were you the one to implement ~Any?
[20:06:08] <eddyb> bstrie: look for "fail"
[20:06:23] <eddyb> ~Any was added to allow failing from a task with any value
[20:07:23] <bstrie> found it, thanks
[20:13:20] <kimundi> bstrie: Yeah I was
[20:16:14] <kimundi> eddyb, brson: Afaik the HEAP and GC idents are all caps because they are unit-struct-like statics - not making them all caps would be inconsistent
[20:16:56] <brson> kimundi: yeah, i figured that out
[20:17:16] <brson> fortunately nobody well ever need to write `box (HEAP)`
[20:17:20] <kimundi> yeah
[20:17:35] <kimundi> Imo nobody should need to write box (GC) either :P
[20:18:21] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[20:18:44] <kimundi> Though I guess there is no way around that
[20:18:53] <eddyb> make check-stage2-rustpkg seems to work. stage1-rustpkg used to work :(
[20:18:59] <kimundi> Because its not a type, its not inferable
[20:19:12] <acrichto> eddyb: most of the check-stage1 things need the new snapshtos to work
[20:19:27] <kimundi> Unless we introduce the notion of box default values, and annotate HEAP and GC as such
[20:19:29] <eddyb> acrichto: I thought we just had a snapshot :/
[20:19:39] <acrichto> eddyb: that is correct
[20:20:01] <eddyb> kimundi: you can infer from the return type. use Boxable or BoxTarget trait
[20:20:13] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[20:20:28] <kimundi> eddyb: Hm? Is that a thing that is possible right now?
[20:20:39] <eddyb> kimundi: from_str
[20:20:51] <kimundi> No, I mean those two traits
[20:21:09] <kimundi> But I just realized that this is not a problem anyway
[20:21:33] <kimundi> as the compiler can just tread box and box(VAL) different, and look for a trait in the first one
[20:21:53] <kimundi> which is probably what you mean eddyb ?
[20:22:05] <eddyb> kimundi: or have a separate BoxWithAllocator trait (or a different method in the same trait)
[20:22:13] <kimundi> yeah
[20:22:28] <eddyb> test result: ok. 73 passed; 0 failed; 14 ignored; 0 measured
[20:22:33] <kimundi> yay
[20:22:49] <kimundi> passing tests are always good, unless you'Re try<ing to make them fail :P
[20:23:27] <eddyb> kimundi: it had to compile stage3-rustc >_>
[20:23:46] <kimundi> urk
[20:23:53] <eddyb> yeah. that's why it's a victory :P
[20:26:53] <eddyb> bstrie: done, r?
[20:27:31] <eddyb> ouch for pcwalton
[20:28:33] <bstrie> reviewing
[20:29:07] <eddyb> (it turned out I missed more than I thought)
[20:30:02] <bstrie> r+
[20:30:04] *** Quits: bytewise (bytewise@moz-B0382145.adsl.alicedsl.de) (Quit: Leaving)
[20:31:36] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:31:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1406ede96 to 1463ba93f: 02http://git.io/N3iJvQ
[20:31:36] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:31:38] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:31:38] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/oC17Dw
[20:31:38] <ghrust> 13rust/06auto 146b22176 15Eduard Burtescu: libsyntax: Renamed types, traits and enum variants to CamelCase.
[20:31:38] <ghrust> 13rust/06auto 1472ee4a5 15Eduard Burtescu: Updated librustdoc and librustpkg to use the proper UpperCase names from libsyntax.
[20:31:38] <ghrust> 13rust/06auto 149d63403 15bors: auto merge of #11417 : eddyb/rust/desnaking, r=bstrie
[20:31:40] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:31:52] <eddyb> bstrie: thanks :D
[20:32:25] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[20:32:54] <bstrie> are there any photoshop masters out there who volunteer to shop pcwalton's head onto the marine in http://www.threeguysonejoystick.com/wp/wp-content/uploads/2011/11/Doom1-Cover.jpg , and turn all the demons into @ symbols
[20:33:52] <SiegeLord> ...did John Romero put an (R) symbol on his signature?
[20:34:22] <eddyb> the best I can do is 
[20:34:43] <bstrie> SiegeLord: hahahaha
[20:34:46] <bstrie> I.... I think he did.
[20:42:47] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:50:00] <Eridius> bstrie: I kind of want to put an @ symbol in the marine's left hand
[20:50:10] <Eridius> he's rescuing it from the hordes of garbage collecting monsters
[20:57:13] <strcat> meh
[20:57:26] <bstrie> meh?
[20:57:36] <strcat> acrichto: could I just leave ptr_eq off of Rc/Weak? I don't like having 4 methods for something ref_eq(&*x, &*y) can do
[20:57:59] <strcat> https://github.com/thestinger/rust/commit/af7207589e163189736f13183d4fc3fd28647ac3
[20:58:05] <strcat> and that still doesn't cover everything you might want to do
[20:58:16] <strcat> imo it's somewhat of an anti-pattern to use object identity anyway in most cases
[20:58:31] <strcat> unlike with Gc, there's no risk of them moving or anything
[20:59:00] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:59:00] <ghrust> 01[13rust01] 15brson tagged 060.9 at 1436870b1: 02http://git.io/kp--2g
[20:59:00] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:59:05] * strcat will leave it off
[20:59:17] <strcat> encoding edge cases as convenience methods is weird
[20:59:55] <brson> omg
[21:00:02] <brson> i double checked every god damn thing
[21:00:05] <brson> but the email title
[21:00:20] <strcat> brson: gmail's undo send is your friend ;p
[21:00:29] <strcat> delays actually sending for 30 secs
[21:00:31] <strcat> and has undo
[21:00:52] <strcat> well, mostly because gmail is awful and doesn't have sane previews or text editing anymore ;p
[21:00:59] * strcat is sure it exists for proper email clients though
[21:02:01] <strcat> anyone have an opinion about ptr_eq on Rc?
[21:02:31] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[21:02:36] <strcat> brson: did it eat the whitespace?
[21:03:13] <brson> i'll send another
[21:03:15] <bstrie> brson: I'm choking with laughter
[21:03:23] <brson> strcat: yeah
[21:03:35] <strcat> brson: which email client do you use?
[21:03:37] <brson> it ate whitespace again
[21:03:39] <brson> fuck
[21:03:44] <bstrie> please send another one so that the HN title nazis don't revert it to the "correct" title
[21:03:45] <brson> and it's already on hn
[21:03:48] <strcat> heh
[21:04:16] <Eridius> bstrie: it's on HN as a link to RELEASES.txt, not the mailing list post
[21:04:41] <Eridius> although it's linking to master/RELEASES.txt, which seems, well, wrong
[21:04:50] <brson> i sent another with the right title
[21:05:04] <brson> I don't know why thunderbird keeps fucking up my whitespace
[21:05:09] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:05:56] * strcat really hates gmail and thunderbird :(
[21:06:02] * Eridius really hates gmail
[21:06:05] <Eridius> gmail fucks up IMAP so bad
[21:06:09] <bstrie> brson: I'm amused at "previous message: Rust 0.8 released"
[21:06:13] <strcat> but I don't know of a sane email client able to render awful html mail people send me
[21:06:17] <bstrie> https://mail.mozilla.org/pipermail/rust-dev/2014-January/007753.html
[21:06:20] <Eridius> brson: your 0.8 email was in plain text, your 0.9 is apparently rich text
[21:06:35] * strcat wishes html mail didn't exist
[21:07:04] <strcat> gmail no longer lets you default to plain text
[21:07:10] <strcat> top posts by default
[21:07:14] <brson> i'm not sending any more 0.9 release announcements
[21:07:17] <brson> two is enough
[21:07:25] <strcat> fills the text area with weird formatting if you try opening it in an external editor
[21:07:25] <SiegeLord> Woah, how did it change!
[21:07:27] <strcat> no GPG...
[21:07:43] <strcat> brson: maybe you should email them to yourself first :P
[21:08:49] <lkuper> the next release will be 0.9, to be followed by version 0.9
[21:09:00] <bstrie> hahaha
[21:09:29] <strcat> acrichto: https://github.com/mozilla/rust/pull/10926 r? left out NonManaged
[21:09:44] <strcat> no more broken than the current Rc with @ inside, anyway
[21:11:33] <brson> i'm going drinking. bbl
[21:12:39] *** Joins: gwty (gwtypc@D1719613.914FDA14.F44414AF.IP)
[21:12:57] <lkuper> heh.  with "Previous message: [rust-dev] Rust 0.8 released / Next message: [rust-dev] Rust 0.9 released" it makes it look like rust-dev is really inactive
[21:13:11] <lkuper> or like releases are extremely frequent
[21:13:15] <eddyb> bstrie: I'm going to sleep, enjoy the fallout of my... fire >:)
[21:13:46] <lkuper> congrats, though, brson and everyone
[21:14:07] * lkuper is impressed by how long the contributors list has gotten
[21:14:13] <bstrie> lkuper: I already made that joke!
[21:14:29] <lkuper> bstrie: oh, oops!
[21:15:38] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[21:24:11] <bstrie> nmatsakis: was wondering if any of your rvalue lifetime proposals would allow us to not have to take a temporary to use iterators with for loops
[21:26:42] <nrc> bstrie: where is the temporary in an iterator/for loop?
[21:27:26] <bstrie> nrc: right now you can't do something like `for i in [1,2,3].iter() {` because the lifetime of [1,2,3] is too short
[21:27:48] <bstrie> so you have to do `let x = [1,2,3]; for i in x.iter() {`
[21:28:02] <nrc> bstrie: so only when iterating over a vec literal?
[21:28:37] <bstrie> nrc: there are lots of cases where the value just doesn't live long enough. like if it's the result of a method
[21:28:44] <bstrie> so I'd expect that this would fail the current rules:
[21:28:54] <bstrie> for i in foo().bar().iter() {
[21:29:21] <Eridius> bstrie: I would assume the proposed rules would fix it, because the lifetime issue is due to .iter() taking &self instead of self
[21:29:24] <Eridius> which means it's taking a reference to self
[21:29:26] <Eridius> which is the rvalue
[21:29:33] <nrc> bstrie: I see. Thanks for the clarifications - I do hope that gets fixed
[21:29:58] <bstrie> Eridius: well he proposed several rules, and I'm not exactly sure that any of the three test cases the he provides are relevant to for loops
[21:30:02] <bstrie> because for loops are kinda weird
[21:30:15] <bstrie> hence whey I asked :)
[21:30:31] <Eridius> bstrie: I don't think the fact that it's a for loop particularly matters
[21:30:39] * bstrie rakes in the karma from the 0.9 announcement
[21:30:41] <Eridius> the problem is just foo.bar().baz() where bar() returns an rvalue and baz() takes &self
[21:35:38] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:35:38] *** ChanServ sets mode: +ao dherman dherman
[21:40:45] <bstrie> nrc: ah, so you're the person doing the code browser :)
[21:41:06] <nrc> bstrie: guilty
[21:41:20] <bstrie> what does it entail to add rust support to that thing?
[21:41:31] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:41:31] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/oC17Dw
[21:41:31] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:42:31] <kimundi> eddyb: hey, it landed!
[21:43:08] <nrc> bstrie: dump a whole bunch of info out of rustc, then dump that info into DXR's db in a sensible way, then modifying the html generation process to know what to do with the Rust info
[21:43:33] <bstrie> nrc: does the tool currently use clang to dump info for c++?
[21:43:53] <nrc> bstrie: the second two stages are pretty close to what we do already with clang, there will be alot of refactoring down the road to share code
[21:43:57] <nrc> bstrie: yes
[21:44:26] <bstrie> nrc: it would be great if you could modify rustc to emit the same sort of data that clang does, rather than just munging whatever we dump out right now :)
[21:44:41] <nrc> bstrie: that is what I am doing
[21:44:44] <bstrie> it would really help with tooling down the line if we had the same sort of pipeline that clang has
[21:44:47] <bstrie> oh great :)
[21:45:13] <nrc> bstrie: but it is not standard stuff that clang is dumping, we have a clang plugin which dumps in a kind of custom format
[21:45:26] <nrc> so not that great
[21:46:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:46:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0bJJ2Q
[21:46:23] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:47:34] <bstrie> brson: haha, I checked out the commit id for 0.9 and ran make check... is it expected that 4 of the tests fail? :P
[21:48:00] <bstrie> granted, it might just be the firewall on this machine
[21:48:04] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[21:48:04] <bstrie> they're all network tests
[21:48:05] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[21:48:08] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:58:22] <eddyb> kimundi: yeah, saw that, going to bed late, but with good news :D
[22:00:32] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[22:07:15] <cmr> bstrie: about as expected.
[22:16:03] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Ping timeout)
[22:18:03] *** Joins: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP)
[22:20:28] <strcat> acrichto: well I didn't really decide NonManaged was unnecessary, just going to let whoever implements the gc worry about what is
[22:20:35] <strcat> and not try to support the screwed up current @
[22:20:38] * strcat shrugs
[22:21:12] <strcat> the current Rc asserts immediately with @ inside and this doesn't change anything ;p
[22:21:23] <strcat> separate from weak ptrs
[22:25:13] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:31:21] *** flaper87 is now known as flaper87|afk
[22:32:18] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[22:46:47] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[22:53:03] *** Quits: ChristopherBurg (Christophe@moz-2C03E71B.hfc.comcastbusiness.net) (Ping timeout)
[22:56:20] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:56:20] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/iWL_ng
[22:56:20] <ghrust> 13rust/06auto 14d4051b6 15OGINO Masanori: Update doc/po4a.conf for recent changes....
[22:56:20] <ghrust> 13rust/06auto 1420ec0be 15OGINO Masanori: Remove *.pot files and ignore them now....
[22:56:20] <ghrust> 13rust/06auto 14d28317d 15bors: auto merge of #11427 : omasanori/rust/remove-pot, r=alexcrichton...
[22:56:21] <brson> bstrie: no, it's not expected that any tests fail
[22:56:22] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:56:32] <brson> i didn't think we had any tests that hit the outside network
[22:59:44] *** Joins: ecr (chatzilla@6C7C14.5FFFD366.11F8506F.IP)
[23:00:36] <bstrie> brson: the 4 failures were io::net::{tcp, udp}::test::bind_error::{green, native}
[23:01:28] *** Quits: msm (Mibbit@moz-2202AB44.hsd1.ga.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:01:28] <acrichto> bstrie: what platform?
[23:02:45] <bstrie> acrichto: centos 6
[23:03:04] <acrichto> bstrie: huh, you weren't running as root were you?
[23:03:07] <bstrie> I was
[23:03:13] <acrichto> ah, that'd be it
[23:03:19] <acrichto> those tests rely on not being able to bind port 1
[23:03:20] <bstrie> curious as to why :)
[23:03:23] <bstrie> aha
[23:03:25] <bstrie> hilarious
[23:03:48] *** Quits: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP) (Ping timeout)
[23:04:02] <strcat> acrichto: fwiw you can bind to ports below 1024 as non-root, too
[23:04:32] <strcat> cap_net_bind_service on service (you can grant it to binaries or to a user on login)
[23:04:35] <strcat> er
[23:04:37] <strcat> on linux*
[23:04:42] <strcat> on freebsd you can disable it in sysctl
[23:04:48] <strcat> it's a useless obsolete security measure ;p
[23:05:26] <strcat> plenty of important services use ports above 1024 and on non-servers, it's irrelevant
[23:13:24] *** Joins: blank_name (blank_name@C5C84EB0.9E887BEB.53C6B850.IP)
[23:14:39] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:14:39] *** ChanServ sets mode: +ao dherman dherman
[23:19:42] *** Quits: ecr (chatzilla@6C7C14.5FFFD366.11F8506F.IP) (Ping timeout)
[23:24:08] *** Joins: ecr (chatzilla@moz-8B5E7056.dhcp4.washington.edu)
[23:24:08] *** Quits: blank_name (blank_name@C5C84EB0.9E887BEB.53C6B850.IP) (Quit: leaving)
[23:26:58] *** Joins: blank_name (blank_name@C5C84EB0.9E887BEB.53C6B850.IP)
[23:35:57] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[23:44:36] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[23:56:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:58:21] <strcat> acrichto: maybe the switch should be called whole-program-optimization?
[23:58:26] * strcat shrugs
[23:58:36] <strcat> or just whole-program, like -fwhole-program
[23:58:48] <acrichto> strcat: perhaps, it really is the same thing as LLVM though (with the exception of taking native libraries into account)
[23:59:03] <acrichto> like I took the code directly out of LLVM, removing all the cruft about symbols and things we didn't need
[23:59:20] <acrichto> llvm is designed to run standalone away from the compiler, whereas if the compiler is running it it's a whole lot faster
[23:59:31] <acrichto> or rather the compiler knows so much more about the program
[23:59:34] <strcat> hm, does LLVM actually know how to do cross-library link-time optimization if the .a contains bytecode .o files?
[23:59:43] <ecr> *please* add an option to output the whole program IR. LLVM's missing that and it screwed me over on last quarter's project
