[00:00:09] <bblum> brson: i think he is gone
[00:00:21] <bblum> no, just out temporarily
[00:01:11] <Thiez> is there a way to get the number of cores of a machine in rust?
[00:01:28] <Thiez> used to be that I could invoke rust_num_threads from the runtime, but it's gone
[00:01:41] <graydon> brson: https://gist.github.com/graydon/1b3c9e60e3996a6e4992 on top of 0d04aa78e5e8a7e3c48141028137c1a69e7e32ee
[00:01:49] <graydon> brson: like .. really nothing weird at all
[00:02:45] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[00:02:49] <olsonjeffery> ecr: are you working on async tcp, by any chance?
[00:03:09] <olsonjeffery> or if you have anything in rt::io that you're willing to give me. ill probably just help fill in holes there, where possible
[00:03:19] *** Quits: fread2282 (Mibbit@moz-C66177A6.nat.asu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[00:03:28] <steven_is_false> Thiez: That's kind of a strange number. That kind of information should be exposed I guess but consider weird things like hyper-threading.
[00:04:51] <ecr> brson: no. I expected things might changed with aaron's scheduler refactoring so I decided to postpone that.
[00:05:14] <brson> graydon: ok, trying here. in my test I put extra *after* std and didn't specify the version, but otherwise identical
[00:05:27] <ecr> olsonjeffery: not at the moment. feel free to work on that. I'm going to be gone for 2 weeks.
[00:05:29] <strcat> mark_edward: daily
[00:05:54] <strcat> and 0.7 is in the official repos
[00:06:14] <Thiez> steven_is_false: I don't really care about the exact truth here, I just want to know the maximum number of threads that can run at once
[00:06:58] <steven_is_false> Thiez: Okay, I guess you should file a bug report, or make a pull request.
[00:07:05] <mark_edward> strcat: cool
[00:08:33] <ecr> brson: I think I almost have a DNS implementation. grappling with lifetimes right now
[00:08:46] <mark_edward> does it compile Rust on my machine? or are they binaries?
[00:09:02] <brson> ecr: fantastic
[00:09:36] <strcat> mark_edward: they're binaries
[00:09:44] <mark_edward> cool
[00:09:46] <ecr> brson: untested mind you. honestly I'm not sure how to go about writing a test case for it
[00:09:57] <ecr> brson: aside from "didn't crash"
[00:10:04] <strcat> mark_edward: they're just built on arch's build server
[00:10:10] <strcat> daily cron job
[00:10:13] <Thiez> steven_is_false: ah, it was just renamed to rust_num_cpus :)
[00:10:15] <mark_edward> Nice!
[00:10:24] <steven_is_false> Thiez: Great.
[00:10:48] <strcat> mark_edward: in theory it even uses deltas but they are rarely smaller than the packages ;p
[00:10:59] <strcat> http://pkgbuild.com/~thestinger/repo/x86_64/
[00:11:00] <strcat> well
[00:11:03] <strcat> the last few have been okay
[00:11:10] <mark_edward> strcat: I like rust's fast pace development!
[00:11:26] <mark_edward> you maintain the android-sdk stuff too!
[00:11:39] <strcat> mark_edward: well I have a lot of stuff in [community] ;p
[00:12:24] <strcat> mark_edward: https://www.archlinux.org/packages/?maintainer=thestinger
[00:12:48] *** Joins: zelda (Mibbit@moz-2E35F6EE.rischmann.fr)
[00:13:22] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[00:13:27] <mark_edward> strcat: lots of stuff indeed!
[00:13:34] <tjc> Is bors not noticing new pull requests again?
[00:13:58] <strcat> ahhh
[00:14:00] <strcat> 2 pending
[00:14:02] <strcat> ;[
[00:14:07] <engla> ouch
[00:14:11] <jdm> what does pending mena?
[00:14:16] <jdm> they've been pending all day
[00:14:17] <strcat> jdm: ones it thinks it is testing atm
[00:14:27] <tjc> well, TGIF
[00:14:29] <strcat> well, it should always be 1
[00:14:45] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[00:14:51] <steven_is_false> I should hack on Bors. It would be kind of cool to set up a private instance of it on my machine.
[00:15:02] <Thiez> isn't bors still closed-source?
[00:15:03] <strcat> also the bsd bot went on vacation
[00:15:17] <tjc> I thought the bsd bot took a sabbatical quite a while ago
[00:15:39] <strcat> auto-bsd-64-opt
[00:15:40] <strcat> (offline, plus 1)
[00:15:51] <strcat> tjc: it was added back
[00:15:56] <strcat> apparently it didn't like that idea
[00:15:57] <steven_is_false> Thiez: oh okay
[00:16:01] <tjc> strcat: Ah ok, I missed when it got added back
[00:16:07] <brson> graydon: if I just move the extra declaration after realstd it works for some reason
[00:16:14] <graydon> weird weird
[00:16:28] <strcat> graydon: can you restart buildbot?
[00:16:34] <graydon> buildbot is running
[00:17:04] <strcat> I mean to fix it
[00:17:07] <strcat> it's doing something weird
[00:17:08] <graydon> I am trying
[00:17:10] <strcat> ah
[00:17:17] <graydon> bsd1 isn't online and doesn't seem to be coming up
[00:17:48] <graydon> rustpkg tests also failed
[00:17:54] <strcat> those git ones?
[00:18:01] <graydon> tjc: we're seeing periodic rustpkg failures all over the place
[00:18:11] <graydon> tjc: can you disable them or fix them? they're bouncing real changes
[00:18:17] <graydon> eg. http://buildbot.rust-lang.org/builders/auto-mac-64-opt-vg/builds/467/steps/test/logs/stdio
[00:18:31] <strcat> it's always those 3 at least
[00:18:36] <graydon> yeah
[00:18:49] <graydon> brson: looks like if I apply acrichto_'s fix to the crate map it works
[00:19:04] <graydon> brson: anyway, gtg. I will try to get bors back online tonight but have to do other stuff first.
[00:19:11] <graydon> er, strcat: ^
[00:19:14] <tjc> graydon: ok, I'll check what's going on with those
[00:19:24] *** Quits: zelda (Mibbit@moz-2E35F6EE.rischmann.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:19:29] <graydon> sorry, bors is off for now since bsd1 isn't on, nothing will progress anyways
[00:20:18] <bblum> type `&[uint]` does not implement any method in scope named `contains`
[00:20:25] <bblum> can somebody tell me why i'm not crazy?
[00:20:33] <bblum> it's right there in vec.rs
[00:20:48] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:21:07] <dbaupp> rusti: let x: &[uint] = &[1,2,3]; x.contains(&1)
[00:21:08] -rusti- true
[00:21:13] <steven_is_false> bblum: Are you hacking on libstd?
[00:21:19] <bblum> yes
[00:21:33] <steven_is_false> Then there is #[no_std].
[00:21:41] <steven_is_false> Are you hacking on vec.rs?
[00:21:44] <bblum> no
[00:21:51] <bblum> i am inside a test module in rt::select
[00:21:52] <strcat> graydon: well it's back
[00:22:02] <dbaupp> bblum: you'll need to import VecSlice
[00:22:09] <dbaupp> (or whatever the trait is)
[00:22:10] <graydon> strcat: the bsd bot isn't
[00:22:18] <graydon> amazon isn't responding
[00:22:19] <strcat> oh nvm
[00:22:21] <graydon> I have to go, sorry
[00:22:34] <bblum> dbaupp: i thought impls were automatically vsisible
[00:22:36] <bblum> visible
[00:22:49] <strcat> bblum: only non-trait ones
[00:22:50] <Thiez> strcat: do we have some kind of EmptyIterator defined somewhere?
[00:23:01] <dbaupp> only when the trait is in scope too
[00:23:07] <strcat> Thiez: no, why? :)
[00:23:43] <strcat> rusti: struct EmptyIterator; impl Iterator<()> for EmptyIterator { fn next(&mut self) -> Option<()> { None } }
[00:23:44] -rusti- ()
[00:24:06] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[00:24:11] <bblum> use vec::ImmutableEqVector sigh
[00:24:26] <Thiez> I want to chain the elements of an iterator, and I was thinking folding chain and starting with the empty iterator would be easiest.
[00:24:39] <Thiez> (an iterator of iterators)
[00:25:14] <strcat> or just 'let xs: [(), ..0] = []; xs.iter()'
[00:25:26] <dbaupp> Thiez: that's unlikely to typecheck
[00:25:26] <strcat> well
[00:25:35] <strcat> dbaupp: that's what just came to mind :)
[00:25:54] <dbaupp> Thiez: (unless you use [@~&]Iterator<elem>)
[00:25:59] <dbaupp> as a trait object
[00:26:14] <Thiez> how disappointing.
[00:26:29] <strcat> chain works on iterators of different types but...
[00:26:39] <strcat> you aren't being returned the same types
[00:26:41] <Thiez> I guess I could create an empty ChainIterator
[00:26:45] <Thiez> and start with that
[00:27:19] <strcat> Thiez: if you have a fixed N in advance, you can do it
[00:27:22] <strcat> but otherwise no
[00:27:36] <dbaupp> Thiez: flat_map_ is probably what you want
[00:27:38] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:27:54] <dbaupp> Iterator<Iterator<A>> -> Iterator<A>
[00:28:42] <Thiez> I'll give that a shot
[00:29:27] <engla> I(I(A)) -> I(A)  is flat_map_ with the identity function
[00:30:41] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:30:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:31:00] <bblum> writing select tests: frustrating
[00:31:08] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[00:31:18] <steven_is_false> Concurrency is really annoying.
[00:31:19] *** strcat is now known as thestinger
[00:31:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:31:28] <bblum> concurrency is great
[00:31:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:31:38] <Thiez> concurrency is a lot of fun
[00:31:39] <bblum> we just don't have the right primitives to write good tests for blocking primitives
[00:31:45] <steven_is_false> shared mutable state concurrency is really fun!
[00:31:51] <zxcdw> Concurrency with the morning cereal is the best
[00:32:06] <steven_is_false> Concurrent serial?
[00:32:09] <bblum> shared state concurrency is quite a lot more dangerous than message sending concurrency
[00:32:24] <Thiez> the danger is half the fun
[00:32:28] <Thiez> living on the edge
[00:32:42] <Thiez> on second thought, maybe rust isn't for me :p
[00:34:03] <steven_is_false> But half the fun is coming up with a safe way to encapsulate unsfae magic!
[00:38:35] <thestinger> just going to merge a bunch of PRs into one and manually start build
[00:38:38] <thestinger> s
[00:38:55] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:40:04] <Thiez> dbaupp: the compiler doesn't like it, complaining about 'cannot determine a type for this bounded type parameter: unconstrained type' :)
[00:40:39] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:45:29] <Thiez> oddly it does work when I store the flat_map_ iterator in a local variable before calling .collect(), even though I don't give it any more type info.
[00:46:12] * pcwalton is rewriting every use of the visitor
[00:46:15] <pcwalton> this is not what I planned :)
[00:46:45] <thestinger> Thiez: iterators run into a lot of type inference bugs
[00:47:57] <Thiez> let mut fmap = results.consume_iter().flat_map_(|f|{f.unwrap().consume_iter()}); fmap.collect() // works
[00:48:11] <Thiez> results.consume_iter().flat_map_(|f|{f.unwrap().consume_iter()}).collect() // doesn't work
[00:48:37] <thestinger> Thiez: you don't need the {} for the closure btw
[00:48:39] <Thiez> still, what it does manage to infer is impressive.
[00:48:47] <Thiez> oh, nice
[00:48:53] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[00:48:54] <thestinger> since it's one expr
[00:49:04] <thestinger> only need {} when it's multiple statements you need to make into 1 expr
[00:49:17] * Thiez likes this.
[00:49:36] <Thiez> it looks marginally cleaner now.
[00:50:57] <sully> yus!
[00:51:03] <sully> oh, strcat is gone
[00:51:12] <thestinger> sully: not gone
[00:51:18] <thestinger> it just wouldn't let me change my nick to strcat ;p
[00:51:20] *** thestinger is now known as strcat
[00:51:30] <sully> ah
[00:51:41] <engla> you must be dropping a lot. I ignore joins/parts so I don't see it
[00:51:43] <sully> strcat: fixed 6967, I think.
[00:51:55] <jasom> how do I tell rustc to not inline something?
[00:51:57] <strcat> engla: yeah my router is happily sending TCP RSTs every few mins
[00:52:06] <strcat> sully: :D
[00:52:18] <sully> at least, your thing worked
[00:52:21] <Thiez> jasom: #[inline(never)]
[00:52:26] <sully> after I fixed it so that take actually returned the tierator
[00:52:26] <jasom> Thiez: thanks
[00:52:28] *** Quits: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net) (Ping timeout)
[00:52:29] <sully> *iterator
[00:53:02] <engla> sully: the discussion above is just about that problem
[00:53:02] <sully> (I had actually /added/ code that prevented my changes from fixing that bug)
[00:53:15] <steven_is_false> jasom: #[inline(deny)] I believe
[00:53:21] <sully> now, I'm not completely sure it works
[00:53:26] <sully> my change may break something else
[00:53:31] <sully> so I'm doing a full make check
[00:53:44] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[00:54:02] *** Joins: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net)
[00:54:05] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[00:54:38] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:55:04] <sully> I'm pretty sure I spent a bunch of time thinking about essentially how to solve this bug
[00:55:07] <sully> last summer
[00:55:09] <sully> and didn't come up with anything
[00:56:26] <steven_is_false> So I know I still have to work on my refactor_arc pull request but I'm curious what people think about my more innocuous pull requests?
[00:56:42] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[00:56:48] *** Joins: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de)
[00:57:39] <dbaupp> steven_is_false: (it's #[inline(never)])
[00:57:50] <steven_is_false> dbaupp: Your probable right.
[00:58:01] <steven_is_false> rusti: #[inline(never)] fn foo() {}
[00:58:02] <Thiez> not probably, he is right :p
[00:58:02] -rusti- ()
[00:58:06] <dbaupp> I was working on that part of the code yesterday ;P
[00:58:08] <steven_is_false> rusti: #[inline(deny)] fn foo() {}
[00:58:09] -rusti- ()
[00:58:18] <sully> strcat: I'm probably not submitting a PR for this until sometime mid next week
[00:58:20] <dbaupp> that's the same as just #[inline]
[00:58:28] <Thiez> there are exactly 0 instances of #[inline(deny)] in the rust git repo
[00:58:44] <sully> strcat: but would it be useful if I stuck this up on my fork so you can test out removing the dummy params?
[00:59:06] <dbaupp> #[inline(things, that, aren't, always_or_never)] is the same as #[inline]
[00:59:11] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:59:11] <ghrust> 01[13rust01] 15thestinger created 06rollup (+5 new commits): 02http://git.io/xKIPaQ
[00:59:11] <ghrust> 13rust/06rollup 14404de4f 15Daniel Micay: iterator: impl DoubleEndedIterator for adaptors
[00:59:11] <ghrust> 13rust/06rollup 140cdb0a2 15Daniel Micay: remove dead take glue code paths...
[00:59:11] <ghrust> 13rust/06rollup 14b082302 15maikklein: updated manual
[00:59:12] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:59:46] <steven_is_false> dbaupp: So making a warning for that is just uninmplemented?
[00:59:59] <dbaupp> steven_is_false: correct, there's even a FIXME
[01:00:05] <steven_is_false> Okay
[01:00:09] <Thiez> strcat: I have a minor addition to extra::future, if I add a PR for that now, could you add it to the rollup?
[01:00:10] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[01:00:10] <ghrust> 01[13rust01] 15thestinger pushed 1 new commit to 06rollup: 02http://git.io/Mp_sYw
[01:00:10] <ghrust> 13rust/06rollup 1431652bb 15Brian Anderson: std: Remove old magic core mod
[01:00:10] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[01:00:14] <strcat> Thiez: yeah
[01:00:42] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:00:43] *** Quits: Ralith (ralith@moz-127CEE5F.wireless.sfu.ca) (Ping timeout)
[01:02:35] *** Joins: Ralith (ralith@moz-127CEE5F.wireless.sfu.ca)
[01:03:52] <Thiez> strcat: https://github.com/mozilla/rust/pull/7920
[01:05:07] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[01:05:07] <ghrust> 01[13rust01] 15thestinger 04deleted 06rollup at 1431652bb: 02http://git.io/Iod4Vw
[01:05:07] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[01:05:32] <sully> strcat: https://github.com/msullivan/rust/tree/default-methods-yakshave
[01:07:18] <Thiez> strcat: awesome, thanks :)
[01:07:37] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[01:07:37] <ghrust> 01[13rust01] 15thestinger created 06rollup (+7 new commits): 02http://git.io/kj08Qw
[01:07:37] <ghrust> 13rust/06rollup 14404de4f 15Daniel Micay: iterator: impl DoubleEndedIterator for adaptors
[01:07:37] <ghrust> 13rust/06rollup 140cdb0a2 15Daniel Micay: remove dead take glue code paths...
[01:07:37] <ghrust> 13rust/06rollup 14b082302 15maikklein: updated manual
[01:07:38] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[01:08:22] <MaikKlein1> :)
[01:09:11] *** Quits: mark_edward (quassel@moz-4A9A2F15.dynamic.utc.edu) (Ping timeout)
[01:09:16] <strcat> uh
[01:09:23] <strcat> I typed the branch name wrong on one of the bots
[01:09:27] <strcat> but it still thinks it's building something o_O
[01:12:11] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[01:12:50] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[01:13:00] *** Joins: anshin (nbs@CD85F10D.F21429E2.354459FA.IP)
[01:13:10] *** Quits: anshin (nbs@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[01:13:14] *** Joins: anshin (nbs@CD85F10D.F21429E2.354459FA.IP)
[01:13:26] *** Quits: anshin (nbs@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[01:13:32] <jasom> https://gist.github.com/jasom/6043400#file-list-rs-L28  <-- Toy linked list with a tail-recursive truncate; if I don't need to mutate a cons, I can walk with a loop, but I can't figure out how to loop when I need to mutate a cons.  Is it possible?  If not, this seems a weakness of the lifetime system
[01:13:38] *** Joins: mark_edward (quassel@moz-4A9A2F15.dynamic.utc.edu)
[01:14:47] <steven_is_false> &mut ~Foo is very odd
[01:14:50] <tjc> jasom: that would be unsound -- what happens if you take an interior pointer to a Cons node in one iteration, then set the same slot to Nil in a future iteration?
[01:15:59] <jasom> tjc: I just want the exact lifetime that results from the tail-recursive version.  Right now there is no way to convert the tail-recursion to iteration.
[01:16:53] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[01:17:34] <jasom> tjc: less toy-like code runs into this as well (std::trie for example)
[01:18:31] *** Quits: bytewise (bytewise@moz-649C630D.unitymediagroup.de) (Quit: Leaving)
[01:19:07] <steven_is_false> Aren't the changes to make stack closures nonrecursive going to allow more freedom in other parts of the system?
[01:19:09] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[01:19:11] <tjc> nmatsakis: do you want to take a stab at explaining why jasom's example doesn't work? I'm a bit too brain-dead at the moment
[01:19:54] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[01:21:03] <tjc> jasom: your tail-recursive version doesn't create a pointer into the inside of the list -- the line // l = next; is commented out
[01:21:27] <tjc> So the borrow checker can prove that you don't invalidate something that still has a live pointer to it
[01:21:42] <jasom> tjc: that's left over from an attempt at an iterative version
[01:22:04] <tjc> jasom: then I don't understand what the version is that works and which one doesn't work
[01:22:13] <jasom> tjc: the version I posted works
[01:22:30] <strcat> when I wrote std::trie and std::treemap I was too lazy to figure out how to do it without recursion
[01:22:31] <Thiez> jasom: print and println are always in scope these days
[01:22:38] <strcat> but it's not necessarily impossibl
[01:22:39] <strcat> e
[01:22:44] <Thiez> no need to do 'use std::io' and 'io::print'
[01:22:45] <strcat> the borrow checker wasn't at all flow-sensitive then
[01:23:07] <jasom> tjc: I can't figure out how to make a non-recursive version that does the same thing
[01:23:10] <strcat> oh and part of it is that 'for' doesn't work as it should
[01:23:35] <strcat> you likely have to use 'loop' if you want to do anything returning &mut
[01:23:44] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:23:49] <jasom> anyway, I need to go start on dinner, but if someone sees a way to do it that I'm missing I'll read the logs back later
[01:29:11] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[01:29:13] <strcat> oh well this will land 7 PRs ;p
[01:29:26] <strcat> bors can do the rest on the weekend
[01:30:31] *** Joins: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net)
[01:31:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:31:30] <olsonjeffery> so.. anyone in the know.. curious what the mid-term solution/next-evolutionary-step is as far as the Local::unsafe_borrow::<IoFactoryObject>(); ?
[01:31:34] <olsonjeffery> is this just a band-aid while we're intra-newsched..? is there some other, longterm solution?
[01:31:35] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:32:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:34:03] <brson> olsonjeffery: My best idea is that we'll do Local::take::<IoFactoryObject> so all rt io operations need to check out the io factory, then IoFactoryObject will take it's args by ~self
[01:34:19] <brson> like the Scheduler api
[01:35:13] <brson> *its
[01:36:08] <olsonjeffery> is there any rundown of the various ways self can be declared in methods and when each is aprop? &self vs &mut self vs ~self, etc
[01:36:41] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:37:19] <olsonjeffery> that's probably one of the biggest mysteries for me, right now.. thankfully there's lots of stuff already in rt:: for me to look at to make it build/work, but im worried that once i get a bit more exploratory, im going to be thrashing because of not grasping these nuances..
[01:40:26] <Thiez> olsonjeffery: using '&self, &mut self, self' in descending order of preference is usually a good idea
[01:40:44] <brson> olsonjeffery: not that i know of, but i'm not very familiar with the official docs. there's `self`, `&self`, `&mut self`, `~self` and `@self`. by-val self (`self`) and ~self are appropriate for linear types that need to be moved, which there are a number of in the runtime
[01:40:45] <Thiez> do we use ~self in places? :O
[01:40:54] <strcat> doubt it
[01:41:00] <brson> the runtime uses it a lot
[01:41:43] <brson> olsonjeffery: ~ types are used a lot for various reasons - either because we need to do atomic operations on them, so they need to be pointer sized, or often because by-val self has been flaky, so we just box all sorts of stuff
[01:42:07] <Thiez> the join_latch uses it three times, and it has '// XXX: Should not require ~self' twice :p
[01:42:30] <brson> olsonjeffery: a lot of types in the runtime are `local` and their usage pattern is: take from tls; call ~self method; put in tls
[01:42:47] <engla> I think you have to use ~self to take ~Trait objects by value
[01:44:10] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:44:11] <brson> olsonjeffery: other types are single use or have some operation that destroyes them, so they take by-val or by-~ self, like oneshot pipes or the Task::recycle method
[01:46:30] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[01:47:24] <MaikKlein1> bstrie, ping
[01:47:41] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:47:54] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: Leaving)
[01:48:00] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:48:00] *** ChanServ sets mode: +o dherman
[01:48:11] *** Quits: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net) (Quit: eatkinson)
[01:51:10] *** Quits: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[01:53:22] *** Joins: z0w0 (zack@A76ECE44.E8D776F0.D76C0449.IP)
[01:55:48] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:57:15] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[02:01:41] <olsonjeffery> brson: so.. calling a ~self method consumes the instance in the caller's scope?
[02:01:52] <brson> olsonjeffery: yes
[02:01:59] <olsonjeffery> that's neat!
[02:02:09] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:02:29] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:02:29] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[02:02:31] <olsonjeffery> anywho. thanks.
[02:04:22] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[02:06:08] <Thiez> ooh, that's new: internal compiler error: trans_lvalue reached fall-through case
[02:09:58] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[02:12:58] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:13:54] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:16:22] <klutzy> I found this causes compile error: use std::libc::*; fn f() -> int { unsafe { islower(0 as c_int) } as int }
[02:16:50] <klutzy> but it is ok: let a = unsafe { ... } as int; a
[02:17:19] <strcat> ugh rustpkg tests failed
[02:18:18] <tjc> strcat: I'm on it
[02:18:35] <acrichto_> I think bors is generally stuck, maybe because the bsd builder is missing?
[02:18:48] <strcat> acrichto_: dunno, I'm doing builds manually
[02:19:10] <klutzy> and it's so hard to find bugs since github search does not accept "as" as a keyword..
[02:20:09] <Thiez> klutzy: I think that bug was mentioned before
[02:20:16] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:21:04] <klutzy> Thiez: on tracker or irc?
[02:21:55] *** Quits: qmx (qmx@moz-D6C3C2E6.qmx.me) (Ping timeout)
[02:23:40] *** Quits: zz_kimundi (kimundi@moz-251E23B5.dip0.t-ipconnect.de) (Ping timeout)
[02:25:07] *** Joins: qmx (qmx@moz-D6C3C2E6.qmx.me)
[02:25:11] <Thiez> klutzy: not sure, can't find it on the tracker, so if you feel like submitting a bug... :)
[02:26:05] *** Joins: geomyidae (cole@DD6F7E3A.21468E9A.30200F38.IP)
[02:26:22] <klutzy> Thiez: I think I should googlesearch for sure and file it. thanks! :D
[02:26:39] *** Joins: zz_kimundi (kimundi@moz-6AEDE90.dip0.t-ipconnect.de)
[02:27:05] *** zz_kimundi is now known as kimundi
[02:29:16] <klutzy> Thiez: google did it: https://github.com/mozilla/rust/issues/5645
[02:30:38] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:30:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:31:23] *** Joins: sankha93 (Instantbir@89F309D9.13FD0322.25B273F5.IP)
[02:33:20] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:33:22] <Thiez> yay google.
[02:33:33] <Thiez> github search is useless :(
[02:34:53] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[02:35:15] *** Quits: brson (brson@8ECA0B87.AD77F8DE.D1E74241.IP) (Quit: leaving)
[02:37:01] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[02:37:28] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[02:37:28] *** ChanServ sets mode: +o pcwalton
[02:38:21] *** Quits: eevee (eevee@moz-58058235.evrt.wa.frontiernet.net) (Ping timeout)
[02:39:31] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[02:39:35] *** Quits: Amanieu (amanieu@CB5576F2.F4BF8C9A.9510F13D.IP) (Quit: brb)
[02:40:10] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:40:42] *** Joins: bnicholson (bnicholson@moz-49E8A935.public.wayport.net)
[02:41:38] *** Joins: Amanieu (amanieu@CB5576F2.F4BF8C9A.9510F13D.IP)
[02:42:38] *** Joins: eevee (eevee@moz-58058235.evrt.wa.frontiernet.net)
[02:45:04] *** Quits: bnicholson (bnicholson@moz-49E8A935.public.wayport.net) (Ping timeout)
[02:46:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:50:25] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Connection reset by peer)
[02:51:02] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[02:56:20] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[02:56:54] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[02:59:00] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:01:14] <bstrie> nmatsakis: some feedback on your slides: http://www.reddit.com/r/rust/comments/1imeac/guaranteeing_memory_safety_in_rust_niko_matsakis/cb6cv98
[03:01:19] *** Quits: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de) (Ping timeout)
[03:04:32] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (Quit: Absum!)
[03:06:10] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[03:07:32] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[03:08:24] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[03:13:40] *** Quits: Ralith (ralith@moz-127CEE5F.wireless.sfu.ca) (Ping timeout)
[03:18:42] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[03:19:49] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:25:50] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[03:25:50] <ghrust> 01[13rust01] 15thestinger pushed 1 new commit to 06master: 02http://git.io/3tQTIA
[03:25:50] <ghrust> 13rust/06master 148d97c90 15Daniel Micay: Merge pull request #7897 from thestinger/double...
[03:25:50] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[03:27:36] *** Quits: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net) (Ping timeout)
[03:27:49] *** Joins: zslayton (Mibbit@moz-14AA87A9.nyc.res.rr.com)
[03:30:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:30:58] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:33:26] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:33:26] *** ChanServ sets mode: +o dherman
[03:33:37] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[03:34:49] <steven_is_false> So this is really weird. My changes to refactor extra::arc, and extra::sync speed up the msgsend-ring-rw-arcs benchmark by a large amount but slow down the msgsend-ring-mutex-arcs by a lot.
[03:39:55] *** Quits: RMF (RMF@moz-F40FCF19.dsl.telepac.pt) (Ping timeout)
[03:41:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[03:43:46] *** Joins: RMF (RMF@moz-348663EF.dsl.telepac.pt)
[03:44:05] <steven_is_false> How can I replace the normal extra with my own modified one? (So I can test out the changes.)
[03:45:24] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[03:46:53] <engla> steven_is_false: you can try  extern mod extra (name = "yourextra");
[03:47:12] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:47:31] <engla> mayeb those names are the other way around
[03:47:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:47:36] <steven_is_false> engla: That looks like it'll work.
[03:48:29] <steven_is_false> emgla: It's just annoying that I have to modify the benchmark file.
[03:48:38] *** Quits: KindOne (KindOne@moz-854E31FC.dynamic.ip.windstream.net) (Ping timeout)
[03:49:53] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[03:51:36] <steven_is_false> Shoot. The name defined in extra overrides the -o command so I can't use the myextra approach
[03:51:40] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[03:53:09] *** Joins: KindOne (KindOne@moz-7C75436B.dynamic.ip.windstream.net)
[04:02:26] <steven_is_false> Well I found a workaround
[04:02:27] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[04:12:32] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[04:15:23] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[04:15:50] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[04:16:24] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[04:28:22] *** Joins: daniel (Mibbit@65089B9F.4D91D1B9.F743D60E.IP)
[04:30:56] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:30:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:34:39] <jensnockert> Are RWARCs (Or ARCs in general) recursive?
[04:35:01] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:35:06] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[04:39:18] *** Joins: ecr (Thunderbir@moz-5CF47426.dia.static.qwest.net)
[04:42:45] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[04:45:31] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:46:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:47:12] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:48:10] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[04:48:52] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[04:48:56] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[04:53:38] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:54:53] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[04:57:01] *** Quits: PeterSP (peter@moz-4DAF5777.bstnma.fios.verizon.net) (Ping timeout)
[04:57:54] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:00:18] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:01:19] *** Joins: PeterSP (peter@moz-4DAF5777.bstnma.fios.verizon.net)
[05:01:56] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[05:02:20] <aatch> dbaupp, I was thinking, it's not really feasible to have non-static strings for formatted printing/writing, right?
[05:03:06] <jensnockert> As in fmt!(randomstring, x, y, z) ?
[05:05:05] <aatch> jensnockert, correct
[05:05:32] <jensnockert> At first I got my hopes up that RWARCs were recursive :(
[05:05:50] <strcat> they can't be because you could make cycles
[05:06:02] <strcat> there's not an easy way to prevent cycles
[05:07:00] <jensnockert> No, I was thinking about taking the lock multiple times in the same task.
[05:07:16] <strcat> oh
[05:07:24] <strcat> that deadlocks, right?
[05:07:37] <jensnockert> Haven't tested, but I wouldn't be surprised.
[05:10:21] <jensnockert> I might have to stop using RWARC :(
[05:10:37] <jensnockert> Implement my own locking thingy.
[05:11:26] <jensnockert> Probably need to anyhow, due to lol-gcd.
[05:11:50] *** Quits: ecr (Thunderbir@moz-5CF47426.dia.static.qwest.net) (Quit: ecr)
[05:14:12] *** Quits: sankha93 (Instantbir@89F309D9.13FD0322.25B273F5.IP) (Quit: He will be back!)
[05:16:47] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[05:16:57] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[05:16:57] *** ChanServ sets mode: +o pcwalton
[05:19:49] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[05:20:49] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: .)
[05:21:29] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[05:22:16] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[05:23:18] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:24:12] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[05:25:54] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[05:26:56] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[05:30:44] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[05:30:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:30:51] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:31:24] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[05:36:40] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[05:36:57] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[05:40:53] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[05:43:37] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:46:08] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:46:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:49:57] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[05:51:00] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[05:54:47] *** Joins: graydon (graydon@moz-1C52C8D0.cable.teksavvy.com)
[05:54:47] *** ChanServ sets mode: +qo graydon graydon
[05:55:02] <graydon> strcat: ping
[05:57:49] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[05:57:49] <ghrust> 01[13rust01] 15graydon 04force-pushed 06auto from 14b0d5425 to 148d97c90: 02http://git.io/N3iJvQ
[05:57:49] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[06:00:28] <strcat> graydon: pong
[06:01:07] <graydon> strcat: hey. just trying to get bors back in business.
[06:01:24] <graydon> I fixed the (weirdly new? no idea why just now) but preventing bsd latent slaves from instantiating
[06:01:35] <graydon> and pushed the thing you pushed to master back to auto
[06:01:49] <graydon> buildbot doesn't seem interested in building it now, but perhaps that's because it built it when it was master.
[06:02:00] <graydon> or .. did you run them through auto already?
[06:02:10] <strcat> graydon: I ran that rollup PR through the auto bots
[06:02:15] <graydon> ok
[06:02:27] <graydon> I will try a few manual bors runs to see if it takes
[06:02:40] <strcat> I cleared out 7 of them anyway ;p
[06:02:44] <graydon> \o/
[06:02:56] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[06:04:08] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[06:04:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QSOiyQ
[06:04:08] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[06:04:10] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:04:10] <ghrust> 01[13rust01] 15bors pushed 30 new commits to 06auto: 02http://git.io/_y8IrA
[06:04:10] <ghrust> 13rust/06auto 14e9735da 15Ben Blum: Add Either::expect_{left,right}
[06:04:10] <ghrust> 13rust/06auto 147877113 15Ben Blum: Add Option::take_map{,_default}()
[06:04:11] <ghrust> 13rust/06auto 14263584f 15Ben Blum: Remove redundant Atomic{Ui,I}nt types from unstable::sync
[06:04:13] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:08:20] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[06:09:42] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[06:12:50] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[06:13:41] <graydon> seems like it started
[06:13:58] <graydon> shall I turn bors on permanently then? i.e. re-enable cron?
[06:14:55] <strcat> graydon: yeah
[06:14:58] <strcat> anyway O
[06:15:02] <strcat> I'm going to sleep*
[06:15:06] <graydon> k
[06:15:08] <graydon> good night
[06:15:09] <strcat> \o
[06:15:11] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[06:15:11] <graydon> thanks for helping out!
[06:15:47] *** Quits: graydon (graydon@moz-1C52C8D0.cable.teksavvy.com) (Quit: Leaving.)
[06:16:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:29:38] <aatch> One downside of having gensym, makes errors really hard to figure out when you use it wrong.
[06:29:44] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:30:42] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:31:43] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[06:34:20] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[06:34:32] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[06:35:00] *** Quits: jaen (jaen@moz-36261275.internetdsl.tpnet.pl) (Ping timeout)
[06:38:28] <aatch> dbaupp, can you remember what the various flags etc. we decided on were for?
[06:41:09] *** Joins: a (megat@16026173.BC75C5F5.6D4CD948.IP)
[06:41:17] *** Parts: a (megat@16026173.BC75C5F5.6D4CD948.IP) ()
[06:42:25] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:43:43] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:44:47] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[06:47:34] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:51:19] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:55:44] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[06:55:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149618876 to 148d97c90: 02http://git.io/N3iJvQ
[06:55:44] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[06:55:46] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:55:46] <ghrust> 01[13rust01] 15bors pushed 26 new commits to 06auto: 02http://git.io/B3nW0g
[06:55:46] <ghrust> 13rust/06auto 14976d7a5 15Michael Woerister: debuginfo: Began refactoring of composite type handling.
[06:55:46] <ghrust> 13rust/06auto 141b20831 15Michael Woerister: debuginfo: Renamed *reference-to-* test cases to *borrowed-*
[06:55:46] <ghrust> 13rust/06auto 147a31a3e 15Michael Woerister: debuginfo: Removed some misleading comments from test cases.
[06:55:48] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:58:09] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[06:59:19] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[07:00:44] *** Joins: igl (igl@moz-769B61A5.adsl.alicedsl.de)
[07:01:42] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:06:15] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[07:10:16] *** Joins: Liothen (liothen@moz-32BDFBCC.spkn.qwest.net)
[07:22:04] <Ralith> 23:31:13 < aatch> One downside of having gensym, makes errors really hard to figure out when you use it wrong.
[07:22:07] <Ralith> how's that?
[07:22:36] <aatch> Ralith, when you use gensym when you actually just want ident_of, you get an error message that's lying.
[07:23:54] <aatch> since the gensym converts to the same string, but is a different ident
[07:25:28] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[07:30:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:37:44] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:37:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dfd6c6c to 148d97c90: 02http://git.io/N3iJvQ
[07:37:44] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:37:46] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[07:37:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/MKU-Qg
[07:37:46] <ghrust> 13rust/06auto 1449b72bd 15Brian Anderson: std::rt: Use a constant 4 threads for multithreaded sched tests. #7772...
[07:37:46] <ghrust> 13rust/06auto 14098709a 15bors: auto merge of #7855 : brson/rust/rt-overcommit, r=pcwalton...
[07:37:47] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[07:39:51] <Ralith> aatch: sounds like a bad string conversion
[07:40:34] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[07:40:50] <Ralith> compare: cl:gensym produces an uninterned symbol, which have a special string representation
[07:42:56] *** Quits: KindOne (KindOne@moz-7C75436B.dynamic.ip.windstream.net) (Ping timeout)
[07:43:55] <Ralith> and that's in *addition* to having a globally unique integer appended to the name
[07:44:03] <dbaupp> aatch: re non-static strings, we could have a special dynamic mode that parses it at runtime etc; but that can come later
[07:45:02] <dbaupp> aatch: re flags: <^> for alignment, s for string/default, ? for structural, n/f for numbers
[07:45:47] <dbaupp> aatch: although, I've been thinking (dangerous stuff), and I get the feeling we don't actually need more than s and ? (and maybe r for a special repr thing like python)
[07:46:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:46:26] *** Joins: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net)
[07:46:58] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[07:47:01] <dbaupp> aatch: so, I'm almost thinking format strings like fmt!("{} {?} {^10.0}", printed_defaultly, structurally, with_some_flags) might work nicer
[07:48:15] <dbaupp> aatch: and as further extension: fmt!("{xyz} {abc}", [abc]something, [xyz]other_thing) 
[07:48:22] <dbaupp> (again, can come later.)
[07:49:05] <dbaupp> (although, that might need a disambiguating symbol, so that it works with whatever other flags we have, e.g. {10.0:xyz}
[07:49:07] <dbaupp> )
[07:49:30] <dbaupp> aatch: I think things like %g and %e where planned to be implemented by newtype structs, right?
[07:49:34] <dbaupp> *were
[07:50:38] <dbaupp> aatch: (the named symbols would go together with numbered symbols, so fmt!("{:0} {:0}", x) would still work.)
[07:52:13] <ronny> dbaupp: wouldnt it work much nicer if the syntax used = like pythons "{name}".format(name=something)
[08:03:15] *** Quits: z0w0 (zack@A76ECE44.E8D776F0.D76C0449.IP) (Connection reset by peer)
[08:05:29] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:08:43] <dbaupp> rusti: let mut a = 2; fmt!("%?", a = 1)
[08:08:48] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PLjN
[08:09:14] <dbaupp> ronny: yes... but that's a valid expression
[08:09:56] <dbaupp> ronny: we could just treat assignment in fmt! specially
[08:10:05] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[08:11:21] <dbaupp> (also, the [x]... syntax has the advance of requiring a single token to determine if it is named or not. The assignment one might be tricker, but maybe not. I'd prefer `=`, especially if we had pattern matching.)
[08:18:44] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[08:20:31] <bblum> ugh, what happened to my PR
[08:20:38] <bblum> only two claimed failures were exception interrupted
[08:20:41] <bblum> i guess i should retry it?
[08:22:05] <aatch> dbaupp, bad timing... I was having dinner...
[08:25:36] <acrichto_> bblum: bors was a little off I think
[08:25:51] <acrichto_> bblum: http://buildbot.rust-lang.org/grid
[08:25:57] <acrichto_> you're the middle column
[08:27:40] <bblum> uh, i see, hm
[08:28:24] <bblum> what's the retry incantation, btw? comment on commit?
[08:28:42] <acrichto_> "@bors: retry"
[08:28:47] <dbaupp> bblum: yeah, on the commit
[08:28:55] <bblum> can i set p= on the same
[08:29:01] <acrichto_> I think it inherits
[08:29:02] <dbaupp> bblum: yes
[08:29:23] <dbaupp> aatch: (you can read the back-scroll right?)
[08:29:37] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[08:29:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:31:20] <bblum> hmm, i appear to have had a memory leak
[08:31:37] <bblum> i suppose it would be good of me to fix that
[08:32:01] <bblum> why didn't bors tell me about this test failure  on the PR though
[08:33:29] *** Joins: foo (Mibbit@moz-849739D9.cpe.teksavvy.com)
[08:35:43] *** Quits: cdidd (cdidd@moz-846CF04C.broadband.corbina.ru) (Input/output error)
[08:36:59] <bblum> that is not a memory leak that should have been possible
[08:37:08] <bblum> clearly, i have been humbled
[08:37:49] <aatch> dbaupp, I can. It's just amusing that you seem to have been away for the entire time I was here.
[08:38:06] <aatch> Then came back when I left.
[08:38:11] <dbaupp> hahaha
[08:38:25] <dbaupp> it's a perfectly coordinated dance
[08:38:59] <aatch> dbaupp, Also, I just rebuilt my desktop with a clean install, so I should get it set up for benchmarking soon.
[08:40:15] <dbaupp> I was also thinking about ast-map and &: we really want to be able to modify the ast later after ast-indexing (e.g. const expr evaluation), and it'd be nice to do this by consuming the tree (i.e a proper tree after de-@-ing)... which'd be impossible with references trapped in the map :(
[08:40:26] <dbaupp> aatch: nice!
[08:40:48] <dbaupp> in fact... for const expr evaluation, we *need* the map.
[08:42:16] <aatch> dbaupp, well if the index was part of the AST, or some sort of wrapper anyway, that would be less of a problem.
[08:42:49] <dbaupp> yes... de-@-ing is gonna be hard.
[08:43:17] <aatch> dbaupp, yep. I'm not sure how feasible it really is right now.
[08:43:20] *** Quits: igl (igl@moz-769B61A5.adsl.alicedsl.de) (Connection reset by peer)
[08:44:03] <dbaupp> after realising the above, I'm fairly sure it can't be done without some serious trickery with the map.
[08:44:16] * dbaupp hopes he is wrong
[08:45:02] <aatch> dbaupp, well I'm tempted to actually use unsafe pointers for it in this instance.
[08:45:30] <dbaupp> yeah, or a wrapper "weak pointer"
[08:45:34] <dbaupp> *wrapped
[08:45:40] <dbaupp> (well, wrapper works too)
[08:45:54] *** Quits: Lilly (PinkLace@moz-145A6857.bredband.comhem.se) (Quit: Byeee~~~~)
[08:46:20] <dbaupp> since, presumably node_id's that point to something that has been freed are no longer referenced anywhere else
[08:46:39] <dbaupp> s/presumab/hopeful/
[08:46:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:47:50] <dbaupp> (it'd be unfortunate to have to resort to that though. :( )
[08:48:10] <aatch> dbaupp, I know, but I'm not sure of a reasonable way forward.
[08:48:38] <dbaupp> yeah, I agree.
[08:48:39] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[08:49:28] <dbaupp> aatch: should we open a bug about de-@-ing the ast, to collect plans for doing so?
[08:49:30] <aatch> I think a wrapping "weak" pointer might work, since I *think* the data should get zeroed when it's freed.
[08:49:36] <aatch> dbaupp, sounds good.
[08:49:44] <dbaupp>  / work out a strategy
[08:49:51] <dbaupp> (I'll do it, or you?)
[08:50:02] <aatch> dbaupp, you can do it.
[08:50:11] <dbaupp> aatch: we could have a dtor that zeros it
[08:50:18] *** Quits: themgt (themgt@moz-7834B2B9.cm.vtr.net) (Quit: Pogoapp - http://www.pogoapp.com)
[08:50:29] <dbaupp> #[deriving(ZeroingDtor)] or something
[08:51:11] <aatch> dbaupp, good point.
[08:51:14] <dbaupp> (I think it does do it currently, but I believe/hope that's going to be removed.)
[08:51:56] <dbaupp> rusti: let x: *int; { let y = ~1; x = y; } unsafe { *x }
[08:51:58] -rusti- <anon>:7:40: 7:41 error: mismatched types: expected `*int` but found `~<VI0>` (expected *-ptr but found ~-ptr)
[08:51:59] -rusti- <anon>:7          let x: *int; { let y = ~1; x = y; } unsafe { *x }
[08:51:59] -rusti-                                                  ^
[08:51:59] -rusti- error: aborting due to previous error
[08:51:59] -rusti- application terminated with error code 101
[08:52:07] <dbaupp> rusti: let x: *int; { let y = ~1; x = &*y; } unsafe { *x }
[08:52:08] -rusti- <anon>:7:40: 7:43 error: mismatched types: expected `*int` but found `&<VI0>` (expected *-ptr but found &-ptr)
[08:52:08] -rusti- <anon>:7          let x: *int; { let y = ~1; x = &*y; } unsafe { *x }
[08:52:08] -rusti-                                                  ^~~
[08:52:08] -rusti- error: aborting due to previous error
[08:52:08] -rusti- application terminated with error code 101
[08:52:21] <dbaupp> rusti: let x: *int; { let y = ~1i; x = (&*y) as *int; } unsafe { *x }
[08:52:23] -rusti- 0
[08:53:09] <aatch> hmm, thinking about it, that's not even really the problem...
[08:53:34] <dbaupp> hm?
[08:54:18] <aatch> if the region of memory has been completely freed, then de-reffing the pointer will get a segfault.
[08:54:51] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[08:54:56] <dbaupp> oh, right
[08:54:59] <dbaupp> durrr
[08:55:11] <dbaupp> hahaha
[08:55:24] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Client exited)
[08:55:41] <aatch> rusti: let x: *int; unsafe { let y = ~[123,..1024]; x = std::cast::transmute(&*y); } unsafe { *x }
[08:55:42] -rusti- <anon>:7:80: 7:82 error: type ~[<VI1>] cannot be dereferenced
[08:55:42] -rusti- <anon>:7          let x: *int; unsafe { let y = ~[123,..1024]; x = std::cast::transmute(&*y); } unsafe { *x }
[08:55:42] -rusti-                                                                                          ^~
[08:55:42] -rusti- error: aborting due to previous error
[08:55:43] -rusti- application terminated with error code 101
[08:55:55] <aatch> rusti: let x: *int; unsafe { let y = ~([123,..1024]); x = std::cast::transmute(&*y); } unsafe { *x }
[08:55:57] -rusti- 123
[08:56:08] * dbaupp is surprised
[08:56:28] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[08:56:35] <dbaupp> rusti: let x: *int; { let y = ~0x123456789abcdefi; x = &*y; } unsafe { *x }
[08:56:36] -rusti- <anon>:7:57: 7:60 error: mismatched types: expected `*int` but found `&int` (expected *-ptr but found &-ptr)
[08:56:37] -rusti- <anon>:7          let x: *int; { let y = ~0x123456789abcdefi; x = &*y; } unsafe { *x }
[08:56:37] -rusti-                                                                   ^~~
[08:56:37] -rusti- error: aborting due to previous error
[08:56:37] -rusti- application terminated with error code 101
[08:56:38] <aatch> rusti: let x: *int; unsafe { let y = ~([123,..1024]); x = std::cast::transmute(y); } unsafe { *x }
[08:56:40] -rusti- 123
[08:57:25] <foo> maybe I'm not understanding, but the memory could be freed and all but unless it's unmapped you won't segfault
[08:57:44] <foo> that seems like... reasonable behaviour for bad code
[08:58:05] <aatch> foo, yep, hence why I'm trying to make it unmap earlier.
[08:58:21] <aatch> rusti: let x: *int; unsafe { let y = ~([123,..10000]); x = std::cast::transmute(y); } unsafe { *x }
[08:58:23] -rusti- 123
[08:58:30] <dbaupp> rusti: let x: *int; unsafe { let y = ~([123,..1000_000]); x = std::cast::transmute(y); } unsafe { *x }
[08:58:32] -rusti- 123
[08:58:34] <foo> why do you want it to unmap though?
[08:58:39] <dbaupp> rusti: let x: *int; unsafe { let y = ~([123,..10_000_000]); x = std::cast::transmute(y); } unsafe { *x }
[08:58:41] -rusti- 123
[08:58:52] <aatch> foo, right now, fun.
[08:59:02] <dbaupp> aatch: does unsafe { } actually start a new block?
[08:59:06] <foo> try it nested with the same allocation again after y is freed :)
[08:59:08] <aatch> dbaupp, I think so.
[08:59:09] <dbaupp> rusti: let x: *int; unsafe { { let y = ~([123,..10_000_000]); x = std::cast::transmute(y); } } unsafe { *x }
[08:59:11] -rusti- 123
[08:59:19] <foo> different starting index. it should reuse the same memory but stuff in a different value
[08:59:41] <dbaupp> rusti: let x: *int; unsafe { { let y = ~([123,..10_000_000]); x = std::cast::transmute(y); let y = ~([123,..10_000_000]);  } } unsafe { *x }
[08:59:45] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/XjFX
[09:00:06] <aatch> foo, ah, there we go.
[09:00:32] <foo> achievement unlocked
[09:06:12] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Ping timeout)
[09:06:21] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[09:08:14] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Ping timeout)
[09:08:44] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[09:08:49] <dbaupp> aatch: https://github.com/mozilla/rust/issues/7929
[09:09:30] <bblum> oof. i was just stupid.
[09:11:39] <dbaupp> aatch: (could you do a bit of a write up about the weak-pointer idea?)
[09:12:15] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[09:12:23] <foo> do people who work on rustc really wait the like 10-15 minutes it takes to recompile everything to test things?
[09:12:23] <aatch> dbaupp, sure, I'm just writing it up now.
[09:12:30] <aatch> foo, yes.
[09:12:35] <foo> D:
[09:12:38] <dbaupp> foo: depends what they're working on
[09:12:52] <bblum> foo: depending what it is, you can omit some of the compile steps sometimes
[09:12:57] <dbaupp> foo: for pure library stuff, `make check-stage2-std NO_REBUILD=1`
[09:13:00] <dbaupp> (or extra)
[09:13:11] <foo> that's cool for library stuff
[09:13:11] <bblum> if you make VERBOSE=1, you can copy the commands that make runs, and run only the ones you need
[09:13:32] <bblum> stuff like that
[09:13:35] <bblum> it's pretty bad though
[09:13:42] <foo> are there plans to make it so rust is friendlier about incremental builds?
[09:13:44] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[09:13:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MKU-Qg
[09:13:44] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[09:13:50] <foo> because that's a pretty big barrier to entry for me
[09:13:55] <dbaupp> and you do `make rustc-stage1`, if you just want to check it typechecks, or whatever.
[09:14:00] <dbaupp> foo: yeah, there's a bug about it
[09:14:32] <bblum> the silver lining is that it's only a pain for rustc developers; rustc users just have to build rustc once and be done with it
[09:14:33] <dbaupp> but a large(biggest?) problem with slow compiles is how much useless IR we are passing to LLVM
[09:14:41] <foo> my understanding is that the IR generated for LLVM is poor in some cases and that's a major slowdown for compilation
[09:14:47] <bblum> that is true
[09:14:53] <dbaupp> (apparently 50-100x more than clang in some instances.)
[09:15:15] <foo> I think a 10-15 minute turnaround time would make me homicidal
[09:15:33] <aatch> foo, you get used to it.
[09:15:48] <bblum> humans can get used to a lot of things.
[09:15:55] <dbaupp> foo: it's why there's always people in #rust ;P
[09:15:58] *** Joins: senokay__ (yurume@AC58A8CE.8A059B47.E313B915.IP)
[09:15:59] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[09:16:17] <aatch> (it's also why we have a pretty laid-back attitude here)
[09:16:18] *** Quits: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[09:16:37] <foo> build times are really important to me because I like testing things immediately.. I feel like it'd be a huge waste of time having to wait a long time for a build to come back
[09:16:43] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:16:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1zPDCA
[09:16:43] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:16:44] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:16:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/uOllpQ
[09:16:44] <ghrust> 13rust/06auto 14e39ea2a 15Tim Chevalier: rustpkg: Make rustpkg commands work without a package ID...
[09:16:44] <ghrust> 13rust/06auto 14fdbd56c 15bors: auto merge of #7419 : catamorphism/rust/default-package, r=graydon...
[09:16:44] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:16:48] <dbaupp> it is, and it sucks :(
[09:16:50] <foo> after working on firefox for so long, I can understand such an attitude
[09:17:01] <foo> but I really hope people don't become complacent because it's what they have expected for so long
[09:17:27] <foo> I mean no offence
[09:17:38] <dbaupp> nah, a few of the core devs are really trying to push turn around times
[09:17:58] <jensnockert> A stage-1 build takes like 4-5 minutes though?
[09:18:00] *** Quits: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net) (Ping timeout)
[09:18:00] <dbaupp> (at least, they're saying that we should; ... probably occupied by other changes.)
[09:18:19] <mcpherrin> I miss the turnaround times on Firefox :P  My current job is like a many-hour turnaround to merge trees, build a firmware image, and run tests
[09:18:34] <dbaupp> go back to Firefox? :P
[09:18:38] <mcpherrin> (which admittedly I only have to do when landing changes; the rest of the time I can do partial builds)
[09:19:27] *** Joins: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net)
[09:19:42] <mcpherrin> dbaupp: The biggest thing I learned intering at Mozilla was that web browsers suck and I don't want to deal with them ;)
[09:19:53] <aatch> man working on HipHop is frustrating, though it certainly justifies my XKCD T-Shirt
[09:20:12] <foo> such a horrible problem they decided to make a new language to address it
[09:20:15] <foo> you don't get that often
[09:21:03] <aatch> (The issue with HipHop is similar to rustc, a tiny change can cause a cascade of re-built dependencies because the build system doesn't know that)
[09:21:20] <aatch> (know that the change doesn't matter*)
[09:21:48] <mcpherrin> Build systems suck :(
[09:23:31] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:26:28] <foo> https://github.com/mozilla/rust/issues/7633
[09:26:51] <foo> salvation
[09:30:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:35:17] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[09:42:53] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[09:45:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:46:09] <aatch> dbaupp, https://github.com/mozilla/rust/issues/7929#issuecomment-21291017
[09:50:33] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:51:45] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:54:23] *** Parts: foo (Mibbit@moz-849739D9.cpe.teksavvy.com) ()
[09:55:21] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:58:08] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[10:06:17] *** Joins: fabiand (fabiand@moz-10829A08.adsl.alicedsl.de)
[10:19:04] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Quit: Leaving.)
[10:20:08] *** Joins: nano (nano@moz-972880B.superkabel.de)
[10:20:58] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[10:24:51] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[10:25:49] <dbaupp> aatch: cool
[10:28:30] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[10:28:33] <dbaupp> aatch: is a snapshot blocked on the memory regression?
[10:30:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:31:37] <aatch> dbaupp, not explicitly
[10:32:04] <aatch> dbaupp, but I'm reluctant to snapshot the regression.
[10:32:09] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[10:32:57] <dbaupp> aatch: yeah, definitely... it's annoying that circumstances have meant that we haven't had a snap for weeks :(
[10:33:06] * dbaupp wants moar default method fixes
[10:40:30] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[10:45:09] *** Joins: mye (mye@moz-DAFF64A.dip0.t-ipconnect.de)
[10:46:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:49:04] <engla> all we need is a snapshot, and letting the default methods flow in everywhere
[10:51:05] *** Joins: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP)
[10:51:45] *** kimundi is now known as zz_kimundi
[10:52:42] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[10:52:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/uOllpQ
[10:52:42] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[10:55:40] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[10:55:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/W5j0Pg
[10:55:40] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[10:55:43] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:55:43] <ghrust> 01[13rust01] 15bors pushed 30 new commits to 06auto: 02http://git.io/y2Mgbg
[10:55:43] <ghrust> 13rust/06auto 1496c1082 15Ben Blum: Add Either::expect_{left,right}
[10:55:43] <ghrust> 13rust/06auto 145a9b33a 15Ben Blum: Add Option::take_map{,_default}()
[10:55:43] <ghrust> 13rust/06auto 1428c9ba9 15Ben Blum: Remove redundant Atomic{Ui,I}nt types from unstable::sync
[10:55:45] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:02:53] *** Quits: heftig_ (heftig@moz-E82F1C34.dip0.t-ipconnect.de) (Quit: Quitting)
[11:06:32] *** Joins: xLII (xarch@E168392B.5AA812DB.F5CC85D7.IP)
[11:06:39] *** Quits: StarLight (StarLight@moz-C9F68A8D.dynamic.avangarddsl.ru) (Ping timeout)
[11:10:00] *** Joins: StarLight (StarLight@moz-EDDD7943.dynamic.avangarddsl.ru)
[11:24:20] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[11:29:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:32:56] *** Joins: robertknight (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com)
[11:37:33] *** Joins: nano (nano@moz-972880B.superkabel.de)
[11:43:15] *** Joins: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP)
[11:45:03] *** Quits: xLII (xarch@E168392B.5AA812DB.F5CC85D7.IP) (Quit: Konversation terminated!)
[11:45:38] <aatch> Ok, I'm gonna need cmr's help with this. I've got no idea why this isn't working...
[11:46:49] <dbaupp> aatch: rust-bench?
[11:46:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:47:04] <aatch> dbaupp, yep.
[11:47:20] <aatch> I hate python.
[11:47:27] *** Joins: igl (igl@moz-5951F128.adsl.alicedsl.de)
[11:48:38] <dbaupp> it's presumably possible to write in rust
[11:48:43] *** Quits: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de) (Ping timeout)
[11:49:19] *** Joins: sigma (sigma@CB3F6051.C886FCFF.DF0EE696.IP)
[11:49:38] <aatch> dbaupp, in this instance it's because cmr is insane and uses both python 2 *and* 3
[11:49:47] <dbaupp> ah
[11:49:51] <dbaupp> well
[11:50:21] <dbaupp> (I've written programs that work in both 2 and 3... but not a code base that requires both. :/ )
[11:50:21] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:50:21] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[11:51:42] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[11:52:08] <aatch> dbaupp, I liked python. Then they pulled this python3 shit and made everybody's lives difficult.
[11:52:21] * dbaupp prefers python3 as a language
[11:53:06] <aatch> I don't use either enough to care about them as languages. I just know that I have to change my `python` symlink far more often than is sane
[11:53:11] <aatch> (by which I mean, at all)
[11:53:17] <dbaupp> :(
[11:55:28] <vladimir-lu> aatch: but you agree that as a language you have to move forward?
[11:55:59] <vladimir-lu> i don't like the python 2 -> python 3 switchover much either (mainly because i don't want to port libraries that i use)
[11:57:26] <aatch> vladimir-lu, sure, but they handled it terribly.
[11:57:57] <aatch> The fact is that people are still writing python 2 stuff, that shouldn't be a thing. At all.
[11:58:50] <aatch> You can move the language forward without screwing everybody over.
[11:59:01] * dbaupp looks at cmr
[11:59:24] <vladimir-lu> mmm true
[11:59:26] <aatch> I mean, C++ managed to release C++11 without causing arbitrary source-level errors.
[11:59:53] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[12:00:10] <aatch> Did they seriously have to change `print` like that, could they not at least raise a warning or something!
[12:00:40] <dbaupp> 2to3 is pretty magical... when it works
[12:01:03] <aatch> dbaupp, I'm gonna guess that 2to3 is about as good at rust-bindgen?
[12:01:05] <aatch> as*
[12:01:28] <aatch> i.e., only really works in cases that would be just as easy to do by hand anyway?
[12:01:28] <dbaupp> aatch: better, it's part of the releases
[12:01:41] <dbaupp> well, it's easier than doing it by hand
[12:02:11] <dbaupp> and I believe it got many of the semantic changes too
[12:02:22] * dbaupp only used it once or twice
[12:02:37] <vladimir-lu> to be fair, by the time python 2.6 was around they had print_function in __future__
[12:03:00] <aatch> vladimir-lu, but then people had to use it.
[12:03:24] <dbaupp> aatch: I assume you say nmatsakis' comment on the ast issue?
[12:03:46] <aatch> dbaupp, have now.
[12:04:03] <dbaupp> haha
[12:04:05] <vladimir-lu> true, but people always have to make changes when something gets deprecated
[12:04:22] *** Joins: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de)
[12:04:24] <vladimir-lu> i think my main issue was that in python 3.0 there wasn't anything immediately 'better' than in python 2.x
[12:04:42] <vladimir-lu> and then what incentive do people have to switch?
[12:07:31] <aatch> vladimir-lu, they shouldn't have allowed python2 to continue. Sure, you can't stop people from continuing to use old versions, but you can make it harder.
[12:08:05] <aatch> There is literally no excuse for why I need to have python 2.7 and python 3.3 installed on my computer.
[12:09:08] <engla> heh, they already tried hard enough
[12:09:48] <engla> things like allowing u"" in python 3 are needed
[12:09:51] <vladimir-lu> i think one of the biggest problems was that the c API changed almost completely
[12:10:02] <dbaupp> aatch: (what's the "lifetime syntax"? the library-pointer-traits?)
[12:10:24] <dbaupp> engla: I thought that was re-enabled in 3.3?
[12:11:14] <engla> ok. I thought it was coming next release
[12:11:18] <engla> ok it's in 3.3
[12:11:21] <aatch> dbaupp, smaller stuff that's limiting expressiveness.
[12:11:35] <aatch> dbaupp, like Foo<'a,'b>
[12:11:44] <dbaupp> aatch: ah, right
[12:12:20] <aatch> Yeah, currently you can only have one level of borrowed pointers.
[12:13:20] <aatch> Since `&'self Foo<'self>` freezes `Foo`, forever.
[12:15:10] <aatch> and currently, in terms of what you can do, `&'self mut Foo<'self>` might as well be `~Foo<'self>`, except you can do more with the latter.
[12:15:58] <Thiez> what exactly are the #[rust-stack] semantics? 
[12:16:25] <Thiez> you don't switch to the C-stack, but how much stack-space does the function get?
[12:17:04] <aatch> Thiez, as far as I am aware, they get however much stack is left
[12:17:26] <aatch> so they just need to run in the ~2k of redzone we have
[12:17:36] <dbaupp> (or call __morestack themselves.)
[12:17:36] <aatch> (We have a stupidly big redzone)
[12:17:40] <Thiez> oh, that's plenty
[12:18:11] <aatch> Thiez, not enough for jemalloc apparently!
[12:18:34] <Thiez> aye, that was a shame
[12:19:13] <aatch> Yep, 2KB on Linux, 20KB on everything else!
[12:19:40] <dbaupp> we could just have a 100KB redzone so that jemalloc works :P
[12:21:01] <Thiez> so will we get jemalloc on x86-64 since we might be ditching the segmented stacks there... :D
[12:21:03] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[12:21:04] *** Joins: heftig (heftig@E0A4708A.2EF28578.172227A7.IP)
[12:21:20] <Thiez> oh, and did it really make a perf difference?
[12:21:48] <dbaupp> on windows it made a big one
[12:22:49] *** Quits: heftig (heftig@E0A4708A.2EF28578.172227A7.IP) (Ping timeout)
[12:22:54] <dbaupp> https://github.com/mozilla/rust/issues/6897#issuecomment-19079842
[12:23:08] <dbaupp> (and linux too according to that comment.)
[12:23:53] *** Joins: jaen (jaen@moz-36261275.internetdsl.tpnet.pl)
[12:25:47] <Thiez> okay, let me rephrase, did it make a difference for compiling rust itself?
[12:26:59] <Thiez> slightly more memory it seems
[12:27:36] <Thiez> oh never mind, I'll see it when it arrives (if ever) :)
[12:28:34] *** Joins: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net)
[12:29:00] *** Quits: Liothen (liothen@moz-32BDFBCC.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[12:29:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:29:27] *** Quits: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de) (Ping timeout)
[12:30:02] <dbaupp> Thiez: https://github.com/mozilla/rust/issues/6897#issuecomment-18808504
[12:30:24] *** Joins: heftig (heftig@F1C41770.D38C86E8.172227A7.IP)
[12:30:29] *** Quits: heftig (heftig@F1C41770.D38C86E8.172227A7.IP) (Connection reset by peer)
[12:30:46] <dbaupp> Thiez: (think it did make the bootstrap faster... but it jemalloc itself was recompiled for each stage, which basically balanced out the improvement.)
[12:30:51] <dbaupp> *I think
[12:32:56] <Thiez> oh, I'm blind, I read that comment and only noticed the memory numbers ><
[12:33:17] <dbaupp> haha :)
[12:36:03] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Quit: Instantbird 1.3 -- http://www.instantbird.com)
[12:36:34] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[12:37:41] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:37:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/y2Mgbg
[12:37:41] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:37:44] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[12:38:11] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[12:39:53] *** Quits: daniel (Mibbit@65089B9F.4D91D1B9.F743D60E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:40:40] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:40:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jY5grg
[12:40:40] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:40:44] <engla> nice, it merged
[12:41:40] *** Joins: bytewise (bytewise@moz-649C630D.unitymediagroup.de)
[12:43:41] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[12:43:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jY5grg
[12:43:41] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[12:45:23] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[12:45:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:50:12] *** Joins: cdidd (cdidd@moz-7CD01F40.broadband.corbina.ru)
[12:50:50] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[12:51:21] *** Quits: jaen (jaen@moz-36261275.internetdsl.tpnet.pl) (Ping timeout)
[12:55:49] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:56:22] *** Quits: robertknight (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com) (Ping timeout)
[13:03:53] *** Joins: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de)
[13:21:13] *** Joins: kertap (kertap@moz-5AE34C97.b-ras3.mvw.galway.eircom.net)
[13:29:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:30:55] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[13:32:41] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[13:32:41] *** ChanServ sets mode: +o dherman
[13:33:33] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:33:36] *** Quits: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP) (Ping timeout)
[13:33:49] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[13:36:11] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Quit: Leaving)
[13:36:27] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[13:38:01] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[13:39:56] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[13:46:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:47:13] *** Joins: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de)
[13:50:26] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[13:53:37] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[14:01:05] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[14:02:08] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:05:03] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[14:05:43] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[14:06:38] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[14:07:10] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[14:07:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[14:07:11] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[14:07:17] <dbaupp> Is the let-patterns fix in stage0?
[14:07:23] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:07:34] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:09:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:09:31] *** ChanServ sets mode: +o dherman
[14:12:29] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[14:16:47] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[14:17:08] *** zz_kimundi is now known as kimundi
[14:21:30] *** Joins: jaen (jaen@moz-36261275.internetdsl.tpnet.pl)
[14:22:38] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[14:22:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/praPwA
[14:22:38] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[14:25:38] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:25:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/WTcfig
[14:25:38] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:28:38] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[14:28:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/WTcfig
[14:28:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[14:28:40] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[14:28:40] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/olAQLQ
[14:28:40] <ghrust> 13rust/06auto 143770221 15Michael Sullivan: Start of data structure cleanup for trait system. Get rid of CoherenceInfo, make trait_impls less bogus.
[14:28:40] <ghrust> 13rust/06auto 14f0a69b1 15Michael Sullivan: Refactor some coherence/method trans code, add an impls map to tcx....
[14:28:40] <ghrust> 13rust/06auto 142ea6120 15Michael Sullivan: Get rid of resolve::MethodInfo. Closes #4946.
[14:28:43] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[14:28:58] *** Quits: a_make (a__@moz-250D9B4.nycmny.fios.verizon.net) (Client exited)
[14:29:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:31:23] *** Quits: sigma (sigma@CB3F6051.C886FCFF.DF0EE696.IP) (Quit: Leaving.)
[14:33:02] *** Quits: mye (mye@moz-DAFF64A.dip0.t-ipconnect.de) (Quit: mye)
[14:34:13] *** Quits: StarLight (StarLight@moz-EDDD7943.dynamic.avangarddsl.ru) (Connection reset by peer)
[14:34:37] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Connection reset by peer)
[14:34:48] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[14:34:53] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[14:35:20] *** Quits: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net) (Ping timeout)
[14:38:08] *** Joins: StarLight (StarLight@moz-97A4A8DF.dynamic.avangarddsl.ru)
[14:40:03] *** Joins: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net)
[14:45:08] *** Joins: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP)
[14:46:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:49:21] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[15:00:25] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Client exited)
[15:00:32] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[15:00:44] *** Joins: nielsle_ (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[15:01:15] *** Quits: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de) (Ping timeout)
[15:02:05] *** Quits: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP) (Ping timeout)
[15:03:25] *** Joins: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP)
[15:03:44] *** Quits: qmx (qmx@moz-D6C3C2E6.qmx.me) (Ping timeout)
[15:03:56] *** Quits: brianm (brianm@moz-D74EBD8D.hsd1.co.comcast.net) (Quit: Leaving...)
[15:04:16] *** Joins: brianm (brianm@moz-D74EBD8D.hsd1.co.comcast.net)
[15:04:18] *** Joins: qmx (qmx@moz-D6C3C2E6.qmx.me)
[15:07:58] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[15:10:33] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[15:15:30] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[15:16:10] *** Joins: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de)
[15:16:23] *** Quits: brianm (brianm@moz-D74EBD8D.hsd1.co.comcast.net) (Quit: Leaving...)
[15:17:15] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Client exited)
[15:18:21] *** Quits: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de) (Ping timeout)
[15:24:15] <doomlord> in C, i sometimes make a TRACE debug macro (print function,line..) .. can one do anything similar in rust
[15:26:24] <engla> there are line!() and file!() macros but I don't know if their use inside macros was fixed
[15:27:55] <doomlord> oh nesting issues 
[15:27:57] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[15:28:52] <doomlord> not feeling brave enough to delve into the compiler today//
[15:29:00] <engla> just try it and see if it's fixed
[15:29:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:29:26] <engla> just that line!() has to expand to the line where the outermost macro was expanded 
[15:32:27] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[15:33:16] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[15:34:22] <doomlord> nesting ok , that works fine thanks.. 
[15:35:02] <doomlord> it does give me the line of the outermost macro. i do remember reading something about macro expansion order being counterintuitive..
[15:35:51] <engla> nice
[15:36:24] <doomlord> heh. no 'function!' but nevermind. file:line is enough
[15:38:53] <SiegeLord> Can you change the line number?
[15:39:46] *** Quits: qmx (qmx@moz-D6C3C2E6.qmx.me) (Ping timeout)
[15:40:55] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[15:43:50] *** Joins: qmx (qmx@moz-D6C3C2E6.qmx.me)
[15:45:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:46:36] *** Joins: lpapp (lpapp@moz-A78F3300.cable.virginmedia.com)
[15:46:39] <lpapp> hi
[15:46:52] <lpapp>  https://groups.google.com/a/isocpp.org/forum/#!topic/std-proposals/HZZ_t8abzU4
[15:47:10] <lpapp> do you think range support for switch cases can slow it down slightly?
[15:47:27] <smvv> how do you guys work on rustc? I assume you're invoking make with more than just `make'. e.g. i would like to try some things out on src/librustc/middle/trans/base.rs and the code i'm trying out lives in stage2
[15:47:28] <vladimir-lu> ahh - it looks like enums constants are exported at module level rather than as 'fields' of the enum
[15:48:39] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Ping timeout)
[15:49:15] <engla> lpapp: is this relevant for Rust?
[15:49:39] <lpapp> engla: somewhat as rust added range support to matches.
[15:49:46] <lpapp> although match is slightly different.
[15:50:17] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[15:54:54] <lpapp> so I thought rust guy would have thought this through already, and I am interested in their opinion if yes.
[15:55:32] <doomlord> rust has many implementation details to iron out, not being v1.0 yet; ive read that match doesn't have every potential optimization in place :)
[16:00:18] *** Quits: lpapp (lpapp@moz-A78F3300.cable.virginmedia.com) (Quit: Lost terminal)
[16:01:02] <SiegeLord> Seems like an empirical question... I'd just benchmark/examine the assembly of the GCC extension...
[16:01:20] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Ping timeout)
[16:01:56] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[16:03:52] *** Joins: sigma (sigma@CB3F6051.C886FCFF.DF0EE696.IP)
[16:06:29] <true_droid> is it possible to default-initialize a struct? or do I need to provide a separate constructor function for each combination of arguments? https://gist.github.com/alco/6045555
[16:07:37] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[16:07:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/olAQLQ
[16:07:37] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[16:09:56] <engla> true_droid: currently the trait Zero serves that purpose
[16:10:03] *** Joins: Crnobog (uid1041@moz-E77DEB21.irccloud.com)
[16:10:15] <engla> for a numeric type, you should def implement Zero
[16:10:35] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:10:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9lB0Kw
[16:10:35] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:10:37] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[16:10:37] <ghrust> 01[13rust01] 15bors pushed 27 new commits to 06auto: 02http://git.io/kLVBaQ
[16:10:37] <ghrust> 13rust/06auto 14976d7a5 15Michael Woerister: debuginfo: Began refactoring of composite type handling.
[16:10:37] <ghrust> 13rust/06auto 141b20831 15Michael Woerister: debuginfo: Renamed *reference-to-* test cases to *borrowed-*
[16:10:38] <ghrust> 13rust/06auto 147a31a3e 15Michael Woerister: debuginfo: Removed some misleading comments from test cases.
[16:10:40] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[16:11:09] <engla> true_droid: you would use #[deriving(Zero)] on the struct to derive it automatically
[16:13:04] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:13:40] *** Quits: sigma (sigma@CB3F6051.C886FCFF.DF0EE696.IP) (Ping timeout)
[16:13:46] <true_droid> engla: how do I call it to create a zeroed variable of type Complex?
[16:15:34] *** Joins: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de)
[16:15:53] <engla> let c: Complex = Zero::zero()
[16:15:55] <engla> unfortunately
[16:19:44] *** Quits: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net) (Ping timeout)
[16:20:02] <true_droid> engla: thanks. deriving(Zero) didn't work for me though, I had to write out the impl manually
[16:20:18] <engla> hm ok
[16:20:20] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[16:21:02] <engla> it should be in 0.7 and later
[16:22:51] <true_droid> another question regarding the last code snippet in this post http://maniagnosis.crsr.net/2013/04/operator-overloading-in-rust.html
[16:22:56] <true_droid> let w = NumCast::from(2);
[16:23:05] <true_droid> how does this line now that w should Complex?
[16:23:09] <true_droid> is that a typo?
[16:23:33] <true_droid> I imagine it should be let w: Complex = â€¦; OR let w = NumCost::from(2) as Complex; ?
[16:23:50] <engla> the former
[16:24:05] *** Joins: brianm (brianm@moz-D74EBD8D.hsd1.co.comcast.net)
[16:24:10] *** Quits: brianm (brianm@moz-D74EBD8D.hsd1.co.comcast.net) (Quit: brianm)
[16:24:33] <engla> true_droid: rust can infer types from the context further down in the code
[16:24:35] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[16:24:48] <engla> rusti: let v = ~[]; v.push(1); v
[16:24:49] -rusti- <anon>:7:22: 7:23 error: cannot borrow immutable local variable as mutable
[16:24:49] -rusti- <anon>:7          let v = ~[]; v.push(1); v
[16:24:49] -rusti-                                ^
[16:24:49] -rusti- error: aborting due to previous error
[16:24:50] -rusti- application terminated with error code 101
[16:24:56] <engla> rusti: let mut v = ~[]; v.push(1); v
[16:24:58] -rusti- ~[1]
[16:25:12] <engla> ok that was dumb. Anyway, from the .push() call it's inferred to be ~[int]
[16:25:28] <engla> rusti: let mut v = ~[];  v
[16:25:31] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dNDW
[16:25:45] <engla> without push it's ambiguous
[16:26:29] <true_droid> engla: that's cool, I didn't know that
[16:26:48] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[16:27:01] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:29:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:30:26] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[16:30:50] <true_droid> it is a bit sad that I have to repeat the name Complex 6 times in this snippet https://gist.github.com/alco/6045555#file-complex_part-rs-L17
[16:31:02] <true_droid> is it something that's going to be addressed in the future?
[16:31:19] *** Joins: vodik (simon@moz-1E8AA746.dsl.bell.ca)
[16:32:29] <sp3d> function return types won't be inferred, and I'm not sure how you can get away with removing any of the other instances really
[16:32:33] <doomlord> i was suprised the type "Self" isn't availble in impl blocks, however some things like that they often have a reason for
[16:32:46] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[16:32:48] <engla> Self could be one thing to hope for
[16:33:02] <sp3d> mm
[16:33:15] <doomlord> i'm not always so keen on one of the types having to be special.. but in an impl block it is
[16:33:53] <true_droid> it could at least be impl Add<> for Complex, since those arguments can be inferred from the function definitions inside impl
[16:34:15] <true_droid> but not a huge win by any means
[16:35:03] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Ping timeout)
[16:35:27] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[16:35:44] <doomlord> to me, repeating 'Complex' for impl's is a lesser evil than the situations in C++ where things *must* go in class Complex{..}  
[16:38:44] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[16:40:18] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[16:40:38] <true_droid> doomlord: I don't see a huge difference from C++ in terms of typing here. impl Add<Complex, Complex> for Complex { fn add(&self, x: &Complex) -> Complex {â€¦} } VS class Complex { public: Complex operator+(const Complex& x) { â€¦ } }; And both provide the + operator for the Complex type that can be used by user code or other libraries
[16:42:43] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:43:40] <doomlord> while i'm in the mood for looking at ast libraries.. what possibilities have people considered for IDE support
[16:45:20] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[16:45:26] *** Quits: mark_edward (quassel@moz-4A9A2F15.dynamic.utc.edu) (Client exited)
[16:45:35] <MaikKlein1> doomlord, I wanted to start tomorrow with some auto completion support
[16:45:36] *** Joins: mark_edward (quassel@moz-4A9A2F15.dynamic.utc.edu)
[16:45:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:46:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:46:29] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:46:35] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:46:48] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[16:48:20] *** Joins: moslemmas (moslemmasr@84BFEF65.12C09493.563BE9DB.IP)
[16:48:26] *** Quits: moslemmas (moslemmasr@84BFEF65.12C09493.563BE9DB.IP) (User has been banned from Mozilla (abuse))
[16:56:33] <engla> true_droid: the Rust Add trait has one type parameter more which is basically equivalent to c++ overloading for the rhs of the + operation
[16:58:22] <true_droid> engla: Add has self and rhs, so does operator+ (this is implicit)
[16:58:28] <true_droid> *this* is implicit
[17:00:41] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[17:01:05] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[17:02:20] <engla> sure, it doesn't need to be repeated
[17:03:50] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[17:04:10] <true_droid> while repeating Complex 6 times is clearly bad for writeability, I'm not sure if it is good or bad for readability
[17:04:55] <engla> Add could be without type params if it only allowed t + t -> t  to be of the same type
[17:04:57] <doomlord> i think Self would be ok, less to replace if you rename Complex, and not exactly cryptic.
[17:05:00] <true_droid> my gut tells me that if we already have Complex in impl Add<Complex, Complex> for Complex { â€¦ } we should be able to the write fn add(&self, &r) { /* returns Complex */ }
[17:05:09] <true_droid> but that is obviously very subjective
[17:06:34] *** Quits: vodik (simon@moz-1E8AA746.dsl.bell.ca) (Ping timeout)
[17:07:50] <doomlord> would a dedicated rust IDE from the ground up (using existing gui toolkit) be insane repetitiion? (dont start with lots of UI for unsupported features)
[17:07:57] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[17:08:33] <SiegeLord> Seems like more work than writing a plugin
[17:08:40] <vladimir-lu> rusti: fn to_c_str(string: &str) -> *[u8] { string.to_owned().into_ascii().into_bytes().to_ptr() }; println(to_c_str(~"hello"));
[17:08:41] -rusti- <anon>:7:39: 7:43 error: bare `[]` is not a type
[17:08:41] -rusti- <anon>:7          fn to_c_str(string: &str) -> *[u8] { string.to_owned().into_ascii().into_bytes().to_ptr() }; println(to_c_str(~"hello"));
[17:08:41] -rusti-                                                 ^~~~
[17:08:41] -rusti- error: aborting due to previous error
[17:08:42] -rusti- application terminated with error code 101
[17:09:01] <vladimir-lu> rusti: fn to_c_str(string: &str) -> *[u8] { string.to_owned().into_ascii().into_bytes().to_ptr() }
[17:09:02] -rusti- <anon>:7:39: 7:43 error: bare `[]` is not a type
[17:09:02] -rusti- <anon>:7          fn to_c_str(string: &str) -> *[u8] { string.to_owned().into_ascii().into_bytes().to_ptr() }
[17:09:02] -rusti-                                                 ^~~~
[17:09:02] -rusti- error: aborting due to previous error
[17:09:03] -rusti- application terminated with error code 101
[17:09:53] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Quit: Leaving.)
[17:14:46] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[17:15:41] * vladimir-lu scratches head
[17:16:36] <doomlord> would it need to be *u8
[17:16:36] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[17:17:07] <doomlord> c_str is *u8 i think , or *c_char. [] implies rusts' vectors
[17:17:43] <doomlord> my helper,  
[17:17:43] <doomlord> pub fn c_str(rustStr:&str)->*c_char {
[17:17:43] <doomlord> 	as_c_str(rustStr,|x|x)
[17:17:43] <doomlord> }
[17:19:30] <doomlord> as_c_str is in std::libc but seems to take a lambda
[17:19:43] <doomlord> so i just wrapped it to do something simpler
[17:21:04] <vladimir-lu> doomlord: yeah, it would need to be u8
[17:21:07] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[17:21:11] <vladimir-lu> but i was having trouble with to_ptr
[17:21:24] <vladimir-lu> the docs say that as_c_str is deprecated (in favour of as_c_str)
[17:21:29] <vladimir-lu> which is slightly confusing
[17:24:36] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[17:25:15] <doomlord> this code i posted compiles, i use that to wrap str's passing to c function   eg fopen(c_str(rustyFilename),...) etc
[17:25:45] <vladimir-lu> yeah, it works fine
[17:26:04] *** Joins: mib_502nfu (Mibbit@moz-A93A96FB.pppoe.mtu-net.ru)
[17:26:09] <vladimir-lu> i guess it won't check for ascii-only characters but it will do for now
[17:26:18] <vladimir-lu> thanks
[17:29:26] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:31:26] <vladimir-lu> who took rusti away :(
[17:34:04] <smvv> is rusti's source not available? i would like to use it as repl as well :)
[17:34:43] <acrichto_> smvv: src/librusti/rusti.rs in the mozilla/rust repo
[17:35:26] *** Quits: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de) (Ping timeout)
[17:36:50] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:37:19] <engla> the rusti bot doesn't use rusti.rs
[17:37:32] <engla> it uses rustc with with a wrapper
[17:37:43] <acrichto_> oh that rusti
[17:37:56] <smvv> acrichto_: rusti.rs seems to do nothing
[17:38:18] <acrichto_> smvv: are you looking for the interpreter or the bot in this channel?
[17:38:24] <engla> librusti is an actual REPL, but I've never seen it working enough to be useful
[17:38:25] <mib_502nfu> hello. i'm trying to write "hello, world" in rust 0.7 with fmt! macro, and it works fine without "use std::*;", but throws this error message when used with it: "unresolved import: could not find `unstable` in `std::std`.". why is this happening?
[17:38:45] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[17:39:09] <smvv> acrichto_: bot. although i thought that it would be that seem (rusti bot would use rusti, but reads from irc instead of stdin)
[17:39:15] <acrichto_> mib_502nfu: that's a known issue
[17:39:17] <smvv> the*
[17:39:26] <acrichto_> mib_502nfu: https://github.com/mozilla/rust/issues/7580
[17:39:33] <mib_502nfu> acrichto_: is there some workaround then?
[17:39:36] <mib_502nfu> thanks
[17:39:38] <acrichto_> smvv: oh yeah rusti the bot is maintained by strcat 
[17:39:50] <acrichto_> mib_502nfu: for now that just won't work, you'll have to import explicitly
[17:40:23] <acrichto_> smvv: the rusti bot actually just formats into a file and compiles/runs it. The repl is semantically a bit different from the compiler itself and maintains a history
[17:40:25] <mib_502nfu> oh, ok, thank you
[17:40:30] <engla> hm rusti looks like it's working better now.
[17:40:52] <engla> acrichto_: did you develop librusti?
[17:41:25] <acrichto_> engla: it was originally written by z0w0 I believe, but I've rewritten it and have been fixing bugs on it
[17:41:46] <engla> nice. I've never used it because it always just crashed
[17:41:47] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[17:42:03] <engla> but it seems to do simple stuff now
[17:42:14] <acrichto_> engla: it does! :)
[17:42:18] <acrichto_> it's just super slow
[17:42:26] <acrichto_> but it shouldn't crash any more
[17:42:30] <acrichto_> in theory at least
[17:42:42] <engla> very cool
[17:43:02] <engla> it's so slow I suspect it's exec'ing rustc.. but I know it doesn't
[17:43:28] <acrichto_> kinda, it actually invokes it via the library so there's no actual forking, but it has to do it 3 times :(
[17:43:32] <acrichto_> per line of input
[17:44:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:44:40] *** Quits: mib_502nfu (Mibbit@moz-A93A96FB.pppoe.mtu-net.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[17:46:20] <vladimir-lu> does it just AST-walk the tree and interpret or?
[17:46:53] <acrichto_> it actually compiles it an runs it via LLVM's JIT capabilities
[17:47:16] <vladimir-lu> even better then :)
[17:48:09] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:48:09] *** ChanServ sets mode: +o dherman
[17:49:39] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[17:49:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kLVBaQ
[17:49:39] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[17:51:26] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[17:51:55] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Ping timeout)
[17:51:59] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[17:52:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:52:40] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:52:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/che8Yw
[17:52:40] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:53:03] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[17:55:36] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:55:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/che8Yw
[17:55:36] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:55:40] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:55:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/MDBTTw
[17:55:40] <ghrust> 13rust/06auto 149089cf2 15Patrick Walton: librustc: Forbid `&` pointers (other than `&'static`) inside `@` boxes....
[17:55:40] <ghrust> 13rust/06auto 145c999d4 15bors: auto merge of #7894 : pcwalton/rust/and-pointers-in-at-boxes, r=brson...
[17:55:40] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:55:43] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[17:56:58] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:57:36] <Crnobog> Is there a CI server for rust somewhere?
[17:58:06] <Crnobog> To be able to pick a recent good commit on master to compare test results with
[17:58:46] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:59:40] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:59:40] *** ChanServ sets mode: +o dherman
[17:59:45] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:59:49] <kimundi> Crnobog: In theory all master HEADS are good commits
[18:00:02] *** Quits: stack_ (urb@moz-884BA95F.retail.telecomitalia.it) (Ping timeout)
[18:00:17] <engla> follow the first parent
[18:00:29] <kimundi> we have a ci bot called bors that runs the full tessuite on all platform for each PR
[18:00:36] <engla> so all merges into master should pass
[18:00:42] <kimundi> and only merges if they pass
[18:01:21] <vladimir-lu> there's no compact inline if/else syntax is there?
[18:01:40] <kimundi> vladimir-lu: not in the sense of ternary
[18:01:57] <kimundi> only let x = if foo {} else {};
[18:02:41] <kimundi> there is also cond!( (foo) ... _ ... )
[18:02:58] <kimundi> rusti: cond!((true) "foo")
[18:02:59] -rusti- <anon>:7:22: 7:27 error: expected `{` but found `"foo"`
[18:02:59] -rusti- <anon>:7          cond!((true) "foo")
[18:02:59] -rusti-                                ^~~~~
[18:02:59] -rusti- application terminated with error code 101
[18:03:07] <kimundi> rusti: cond!((true) {"foo"})
[18:03:08] -rusti- <anon>:7:22: 7:29 error: mismatched types: expected `()` but found `&'static str` (expected () but found &'static str)
[18:03:08] -rusti- <anon>:7          cond!((true) {"foo"})
[18:03:08] -rusti-                                ^~~~~~~
[18:03:08] -rusti- error: aborting due to previous error
[18:03:08] -rusti- application terminated with error code 101
[18:03:18] <kimundi> rusti: cond!((true) ("foo"))
[18:03:19] -rusti- <anon>:7:22: 7:23 error: expected `{` but found `(`
[18:03:19] -rusti- <anon>:7          cond!((true) ("foo"))
[18:03:19] -rusti-                                ^
[18:03:19] -rusti- application terminated with error code 101
[18:03:25] <kimundi> rusti: (cond!((true) ("foo")))
[18:03:25] -rusti- <anon>:7:23: 7:24 error: expected `{` but found `(`
[18:03:25] -rusti- <anon>:7          (cond!((true) ("foo")))
[18:03:25] -rusti-                                 ^
[18:03:26] -rusti- application terminated with error code 101
[18:03:36] <Crnobog> kimundi: interesting, because the latest commit I have is a merge by bors and "make check" fails with an error in licenseck.py
[18:03:38] <kimundi> rusti: (cond!((true) {"foo"}))
[18:03:40] -rusti- <anon>:7:23: 7:30 error: mismatched types: expected `()` but found `&'static str` (expected () but found &'static str)
[18:03:40] -rusti- <anon>:7          (cond!((true) {"foo"}))
[18:03:40] -rusti-                                 ^~~~~~~
[18:03:40] -rusti- error: aborting due to previous error
[18:03:40] -rusti- application terminated with error code 101
[18:03:52] <vladimir-lu> ah yay - you don't need to put the expr in brackets at least
[18:03:57] <kimundi> Crnobog: Interesting...
[18:04:29] <vladimir-lu> kimundi: cond is for the condition code system or?
[18:05:02] <kimundi> vladimir-lu: No, it's just shoret syntax around if {...} else if { ...} .... else {...}
[18:05:07] <engla> cond is for a chain of if else if etc
[18:05:07] <kimundi> shorter*
[18:05:40] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[18:05:54] <Crnobog> kimundi: the error isn't very helpful I don't think, it's just c:/code/rust-build/rust/src/etc/licenseck.py:1: incorrect license, I assume that isn't saying that licenseck doesn't have the correct license
[18:06:30] <kimundi> Crnobog: The error I assume is that some source file doesn't have the license header
[18:06:48] <Crnobog> Yeah, but the script doesn't seem to tell me which file
[18:07:00] *** Quits: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP) (Ping timeout)
[18:07:32] <vk> Hey, I just got this error trying to update to the latest build on windows: make: "*** No rule to make target `/home/VK/rust-trunk/src/libuv/src/win/async.o', needed by `rt/i686-pc-mingw32/stage0/libuv/libuv.a'.  Stop." There a way to fix this?
[18:08:36] <kimundi> vk: Looks like a broken build dir. configure again, and else try a fresh clone
[18:08:50] <vk> kay'o, thanks.
[18:09:41] <Crnobog> kimundi: commit 3a1db2d adds a couple of files in src/test that don't have a license or xfail-license, this might be the cause
[18:09:49] <Crnobog> I'm checking out the previous commit and trying
[18:10:16] <kimundi> Crnobog: Possible. bors doesn't allways work correctly, might have slipped by if it'? the cause
[18:11:09] <Crnobog> If it is the case this would be a good opportunity for me to learn how to submit a pull request :)
[18:11:10] <kimundi> Crnobog: Does it error early*?
[18:11:18] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[18:11:38] <Crnobog> Yeah it looks like it fails during make tidy as a dependency of make check
[18:11:47] <doomlord> do the rust-designers view c's ability to declare nested structures inplace as a misfeature
[18:12:15] <bstrie> doomlord: not sure what you mean
[18:12:31] <kimundi> Crnobog: My fresh clone doesn't fail make tidy
[18:12:44] <doomlord> struct Foo { int x; struct {  int y,int z} w; }       Foo f;   f.w.y    
[18:12:44] <kimundi> well, not fresh clone, but master
[18:12:48] <vladimir-lu> you nest enums surely?
[18:12:54] <vladimir-lu> *can
[18:13:20] <doomlord> i suppose you can nest tuples, and put related structure components in a mod
[18:13:31] <Thiez> doomlord: what would bet the type of that struct? it would be anonymous
[18:13:50] <kimundi> doomlord: I think the idea is that every type should be declared uniformly. If you need a private throway struct put it in a private submodule
[18:14:12] <kimundi> also yeah no anonymous structs
[18:14:12] <vladimir-lu> rusti: struct Bar { y: int, z: int} enum Foo { x(int), w(Bar) }
[18:14:13] -rusti- ()
[18:14:19] <doomlord> right, fair enough. and there's always tuples for small groupings
[18:14:43] <vladimir-lu> that's the equivalent with named structs i think
[18:14:49] <doomlord> it *is* something i do quite  alot in c++. but i have also read things saying "avoid doing that.."
[18:14:56] <kimundi> rusti: enum{ Foo, Bar(int), Baz{x: int, y: int}  }
[18:14:57] -rusti- <anon>:7:13: 7:14 error: expected ident, found `{`
[18:14:57] -rusti- <anon>:7          enum{ Foo, Bar(int), Baz{x: int, y: int}  }
[18:14:57] -rusti-                       ^
[18:14:57] -rusti- application terminated with error code 101
[18:15:04] <kimundi> rusti: enum tree { Foo, Bar(int), Baz{x: int, y: int}  }
[18:15:05] -rusti- ()
[18:15:44] <vladimir-lu> kimundi: i suppose you can do that too, if you don't want to refer to Bar explicitly
[18:15:58] <vladimir-lu> now
[18:16:11] <vladimir-lu> for 10^6 dollar question
[18:17:04] <vladimir-lu> are there any docs on creating C callbacks in rust?
[18:17:16] <vladimir-lu> or shall i look at the uv code and see how it does it?
[18:17:53] <doomlord> i mention it because when i was working with the rust AST, i was finding myself surprised by the number of nested structures, and wondered if it was just things that in C would have been anonymous components (eg struct expr containing a struct expr_ for example)
[18:17:56] <Thiez> I think it works by declaring your rust functions extern "C" or something like that, but checking uv is probably easiest
[18:18:13] * kimundi should really write some toy code that interfaces with C to be able to answer these questions
[18:18:17] <Thiez> there is also a blog post somewhere that combines ruby and rust, not sure if that contains C callbacks.
[18:18:32] *** Joins: lpapp (lpapp@moz-A78F3300.cable.virginmedia.com)
[18:18:39] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[18:18:45] <Thiez> ('rust-for-rubyists'?)
[18:18:45] <kimundi> doomlord: The answer is probably "cruft"
[18:18:46] <doomlord> oh no, that was a more complex case. (expr_ was an enum) fair enough
[18:19:16] <doomlord> in C that would have been... mess :)
[18:19:21] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[18:19:25] <vladimir-lu> Thiez: thanks, i'll take a look
[18:19:26] <vladimir-lu> brb
[18:19:57] <benh> Thiez: that thing with writing a ruby extension in rust?
[18:20:05] *** Quits: vermeille (vermeille@moz-436628F6.net) (Connection reset by peer)
[18:20:10] <Thiez> benh: yeah that one
[18:20:20] *** Quits: MaikKlein1 (maik@moz-236DC30E.dip0.t-ipconnect.de) (Ping timeout)
[18:20:29] <Thiez> not entirely sure about its contents, it's been a while since I last saw that page
[18:20:51] <doomlord> vladimir-lu, they pass as u8* type, its a temp hack, thats the thing i an into
[18:20:53] <Thiez> but I recall there was some unholy combination of rust and ruby, which may contain what vladimir-lu was looking for
[18:21:27] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[18:27:47] <benh> http://brson.github.io/2013/03/10/embedding-rust-in-ruby/
[18:27:58] <benh> Might be outdated...
[18:29:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:30:47] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[18:32:28] <steven_is_false> Hi! I'm using the Linux specific perf command to debug performance problems in my MutexArc implementation for extra, and I don't know how to interpret some of the function names.
[18:33:13] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[18:33:16] <steven_is_false> How do I interpret unstable::sync::__extensions__::drop_6685::anon::expr_fn_6687 where 25.86% of my cycles are going?
[18:33:16] <steven_is_false>  
[18:36:57] <doener_> that's a stack closure in the drop method of "sync"
[18:37:29] <engla> it must be inside impl<T> Drop for UnsafeAtomicRcBox<T>
[18:37:32] <steven_is_false> doener_: sync is a module in the unstable directory not a value
[18:38:14] <doener_> steven_is_false: ah, right, the type is that 6685 id, unfortunately
[18:38:44] <steven_is_false> engla: Thanks.
[18:38:45] <doener_> steven_is_false: I always forget that, because most of the time you get something like std::option::... where the module name matches the type name
[18:38:58] <steven_is_false> doener_: Okay.
[18:39:23] <doener_> there's an open ticket to replace the id with the actual name in the mangled name
[18:39:46] <steven_is_false> doener_: I guess the guy doing the summer of code will be working on it eventually.
[18:39:58] <smvv> how did you know that 6685 refers to UnsafeAtomicRcBox?
[18:40:07] <steven_is_false> engla: How does this detective work happen?
[18:40:21] <engla> there are two drop methods in this module, and only one uses a closure
[18:40:43] <engla> unstable::sync::__extensions__::drop    trait impl of method drop inside unstable::sync mod
[18:41:00] <steven_is_false> Oh that makes sense.
[18:43:46] *** Quits: kertap (kertap@moz-5AE34C97.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[18:44:02] *** Joins: kertap (kertap@moz-5AE34C97.b-ras3.mvw.galway.eircom.net)
[18:45:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:45:11] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[18:47:02] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[18:48:50] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[18:49:46] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[18:49:55] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[18:50:53] <tcsc> what tools/editors do people use when writing rust code?
[18:51:07] <mark_edward> i use vim
[18:51:14] <mark_edward> used to use gedit
[18:51:19] <mark_edward> gonna try out Kate
[18:51:33] <SiegeLord> I'm using Geany, 'cause I use it for everything
[18:51:53] <SiegeLord> It needs a Rust parser though... using the C one doesn't play too great with lifetimes
[18:52:23] <doomlord> tcsc i am using gedit at the minute, i have some ad hoc tools that allow showing definitions
[18:52:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[18:53:08] *** Parts: lpapp (lpapp@moz-A78F3300.cable.virginmedia.com) ()
[18:53:26] *** Quits: SimonSapin (simon@moz-9A1FE870.exyr.org) (Quit: WeeChat 0.3.8)
[18:54:21] <tcsc> i've been using sublime text, but was just wondering if i'm ignoring some obviously better option somewhere
[18:54:40] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[18:55:01] <tcsc> at one point in my life i was a diehard emacs user, and was considering trying that out for rust
[18:55:33] <doomlord> i want to like emacs more than i do like emacs :( its mostly great but one or 2 alien bindings bug me
[18:56:06] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[18:56:45] <doomlord> microsoft have programmed me permanently it seems. i'm more comfortable with editors designed for ctrl-xcv from the ground up. in emacs, you have to press 'ctrl-g' to cancel something and any attempt to rebind that usually causes more problems..
[18:57:22] <tcsc> definitely. the secret is to try and change everything else :p
[18:57:27] <doomlord> i liked the look of sublime text but strictly speaking youre supposed to pay for it
[18:57:50] *** Quits: dwhyte (dwhyte@ED9190FB.B72E355F.7BF4A4B0.IP) (Client exited)
[18:58:22] <tcsc> yeah, that's a definite downside
[18:58:31] <doomlord> there's so much in emacs i DO like.. option for focus follows mouse, and it was able to emualte the brief style windowing i still miss to this day
[18:58:33] <tcsc> well, the lack of open-sourceness at least
[18:59:09] <doomlord> i like to use focus-follows-mouse on a laptop-trackpad, its a fast way to navigate
[18:59:33] <doomlord> ... and its irritating that that doesn't usually follow through to all the sub-panes in a gui pp
[18:59:50] <tcsc> never made much of a difference to me tbh
[19:00:18] <Jeaye> vim <3
[19:00:41] <doomlord> i'd like to like vim, everything that applies to emacs.. more so for vim for me :)
[19:00:46] <Jeaye> vim editor, shell, music player, etc
[19:01:06] <engla> I get reverse vim experience now with all other editors.. I type in commands and I'm surprised I just get text in the document
[19:01:34] <Jeaye> heh
[19:02:21] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:02:30] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[19:03:50] *** Quits: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net) (Ping timeout)
[19:04:01] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[19:06:59] <tcsc> also are makefiles still the preferred way to compile projects?
[19:07:02] <tcsc> afaict rustpkg isn't trustworthy
[19:09:30] *** Joins: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net)
[19:10:07] <mark_edward> tcsc: Kate seems pretty nice. the highlighting and suff for Rust is pretty good
[19:10:34] <tcsc> I'm more interested in on-the-fly building/error checking than syntax highlighting, to be honest
[19:11:07] <doomlord> i dont think anything has that for rust yet
[19:11:26] <tcsc> i figured
[19:11:42] <doomlord> i am looking for thing to contribute
[19:11:59] <doomlord> things^, while i'm looking into the ast library
[19:12:51] <doomlord> navigation is the big thing for me
[19:14:09] <mark_edward> doomlord: you think you can pull it off?
[19:15:11] <doomlord> juggling several distractions, its possible something useful might drop out :)
[19:16:30] *** Joins: mib_uu6keo (Mibbit@moz-1FEAB537.ucsf.edu)
[19:17:17] <doomlord> but i was trying to get some sort of C++ binding support working aswell, but this has me looking at clang-ast and rusts ast 
[19:19:25] <doomlord> but which IDE would be good to get a plugin for...  eclipse seems very heavyweight. i like it in principle, but i'm not a java person, and it makes my laptop overheat in a way that qtcreator doesn't
[19:19:46] *** Joins: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP)
[19:23:38] *** Quits: nielsle_ (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[19:27:28] <tcsc> the obvious answer is to write a rust ide in rust
[19:28:34] <mark_edward> indeed
[19:28:44] <doomlord> multiple angles of attack, the question is can one get comfortable c++ bindings to use existing gui libraries
[19:28:46] <mark_edward> first let's write gtk and glib bindings
[19:28:56] <doomlord> ^^ of course c bindings are easier
[19:29:13] <mark_edward> then write the GTK+ rust IDE!
[19:29:26] <SiegeLord> ...I'm going to wait for an Eclipse plugin :P
[19:29:52] <mark_edward> SiegeLord: http://reidarsollid.github.com/RustyCage/
[19:29:54] <doomlord> i''ve seen 2 , oxide and rusty-cage, but haven't tried either
[19:30:53] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[19:31:07] *** Joins: jensn (jensn@moz-256D77D.mobileonline.telia.com)
[19:32:32] <sp3d> mark_edward: there's <https://github.com/mzabaluev/grust>, but it looks a bit dead
[19:32:51] <sp3d> it's the right approach though
[19:32:57] <doomlord> or keeping things simple there's the idea of writing a better command-line find tool, which can be invoked from editor scripts - i have an ad-hoc thing that just uses grep/brace unfolding which is better than nothing
[19:33:56] <doomlord> https://github.com/dobkeratops/unfold
[19:34:03] *** Quits: jaen (jaen@moz-36261275.internetdsl.tpnet.pl) (Ping timeout)
[19:34:20] <doomlord> it fails on *enums members*, there's no convinient grep for those :)
[19:34:35] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:34:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MDBTTw
[19:34:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:35:42] *** Joins: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de)
[19:37:35] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:37:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/87nvrw
[19:37:35] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:37:42] <doomlord> and it has no concept of what namespace you're in..
[19:40:15] <vladimir-lu> i want an IntelliJ plugin for Rust
[19:40:15] <engla> git grep has a feature almost like that. git grep -p term
[19:40:26] <doener_> git grep -p expr_method_call | grep -A1 '=.*enum
[19:40:28] <engla> but it's intended to just show the function name
[19:40:35] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:40:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/87nvrw
[19:40:35] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:40:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:40:38] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/QOavCQ
[19:40:38] <ghrust> 13rust/06auto 140f6d107 15Patrick Walton: librustc: Remove `&` inside `@` from borrowck/check_loans.
[19:40:38] <ghrust> 13rust/06auto 143cdffde 15Patrick Walton: librustc: Forbid `&` pointers (other than `&'static`) inside `@` boxes....
[19:40:38] <ghrust> 13rust/06auto 14e2b43eb 15Patrick Walton: librustc: Remove `pub extern` and `priv extern` from the language....
[19:40:38] <doomlord> interesting
[19:40:40] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:40:55] <vladimir-lu> from the brief docs i've read on the plugin system it should be fairly clean to make
[19:41:08] <vladimir-lu> (which is not the case for e(ugh)clipse)
[19:42:08] *** Joins: nielsle_ (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[19:42:10] <engla> unfold is interesting though
[19:43:16] <mark_edward> doomlord: how do you build this? i can't see how
[19:43:17] <mark_edward> https://github.com/mzabaluev/grust
[19:43:22] *** Quits: senokay__ (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[19:43:29] <doomlord> how to build unfold?
[19:44:14] <mark_edward> doomlord: how to build his project, there isnt' any info on it
[19:44:23] <doomlord> its mine
[19:44:41] <doomlord> (unfold is mine), are you talking about something eles
[19:45:10] <mark_edward> doomlord: im talking about grust
[19:45:16] <doomlord> ok
[19:45:32] <vladimir-lu> well the usual autotools stuff, no?
[19:45:38] *** Quits: mib_uu6keo (Mibbit@moz-1FEAB537.ucsf.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[19:45:49] <vladimir-lu> run autogen.sh, call configure and make
[19:46:22] <mark_edward> never seen autogen beore, just configure and make
[19:46:46] <vladimir-lu> it generates the make + config script
[19:46:54] <vladimir-lu> as by the name
[19:47:31] <mark_edward> i see
[19:49:49] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[19:51:34] *** Quits: jensn (jensn@moz-256D77D.mobileonline.telia.com) (Quit: jensn)
[19:56:11] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[20:03:47] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[20:03:47] *** ChanServ sets mode: +o pcwalton
[20:06:12] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[20:08:22] *** Joins: jaen (jaen@moz-36261275.internetdsl.tpnet.pl)
[20:17:37] *** Quits: geomyidae (cole@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[20:19:37] *** Joins: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP)
[20:25:36] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[20:25:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144baa49e to 145c999d4: 02http://git.io/N3iJvQ
[20:25:36] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[20:25:37] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[20:25:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ICCFPg
[20:25:37] <ghrust> 13rust/06auto 14cc760a6 15Huon Wilson: syntax: modernise attribute handling in syntax::attr....
[20:25:37] <ghrust> 13rust/06auto 144a9ead5 15bors: auto merge of #7902 : huonw/rust/attr++, r=cmr,pcwalton...
[20:25:37] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[20:26:19] <vladimir-lu> can you return &self from a trait impl?
[20:26:29] <vladimir-lu> to be able to do method chaining?
[20:26:57] <SiegeLord> Yes
[20:27:45] <vladimir-lu> how do you declare that? it's complaining about fn set_option(&self, option: CurlOption) -> &self
[20:27:55] <engla> not sure vladimir-lu. You need a lifetime
[20:28:09] <SiegeLord> Yes, need an explicit lifetime
[20:28:12] <vladimir-lu> hmnn
[20:28:14] <vladimir-lu> fn set_option<'self>(&'self self, option: CurlOption) -> &'self CurlContext
[20:28:17] <engla> fn set_option<'a>(&'a self) -> &'a Self
[20:28:18] <pcwalton> vladimir-lu: fn(&'a self, option: CurlOption) -> &'a Whatever
[20:28:26] <vladimir-lu> ah ha
[20:28:54] <MaikKlein2> vladimir-lu, here is another example https://github.com/MaikKlein/RustSceneGraph/blob/master/src/node.rs#L39
[20:28:57] <pcwalton> oh yeah and don't forget the <'a>
[20:30:04] <vladimir-lu> it turns out the trait itself needs a bound lifetime parameter
[20:30:17] <vladimir-lu> otherwise you get error: method `set_option` has an incompatible type: expected concrete lifetime, but found bound lifetime parameter &
[20:30:40] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[20:30:43] <engla> the trait must have the lifetime annotations on the method as well
[20:31:01] <SiegeLord> I manage to do it without a trait-wide lifetime
[20:31:14] <SiegeLord> pub fn set_pos_grid<'l>(&'l mut self, row : uint, col : uint) -> &'l mut Axes2D
[20:31:18] <engla> right, if it's on the method
[20:31:31] <vladimir-lu> but if it's in an impl
[20:31:36] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[20:31:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144a9ead5 to 145c999d4: 02http://git.io/N3iJvQ
[20:31:36] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[20:31:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:31:38] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/SH8UTQ
[20:31:38] <ghrust> 13rust/06auto 14968f7f5 15Eric Reed: Changed methods on UDP sockets and TCP/UDP watchers to &mut self to reflect that libuv may change the underlying handle.
[20:31:38] <ghrust> 13rust/06auto 14b03f1e7 15Eric Reed: Missed the methods of UdpWatcher.
[20:31:39] <ghrust> 13rust/06auto 14c5c0252 15bors: auto merge of #7908 : anasazi/rust/fix_udp_mut, r=brson
[20:31:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:33:23] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[20:34:52] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[20:36:12] *** Joins: Vert (quassel@8A83479C.391ACC8C.CAF63861.IP)
[20:37:04] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[20:37:09] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[20:38:13] <steven_is_false> So what's the status of https://github.com/mozilla/rust/pull/7115 ?
[20:38:25] <SiegeLord> Hmm, I'm trying to use a trait inside a function and I'm getting "failed to find an implementation of trait Trait for &mut T"
[20:38:58] <steven_is_false> SiegeLord: Can you give more context?
[20:39:58] <SiegeLord> What context do you need?
[20:40:05] <steven_is_false> Maybe some code?
[20:40:42] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[20:41:05] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[20:41:18] *** Quits: fabiand (fabiand@moz-10829A08.adsl.alicedsl.de) (Quit: Verlassend)
[20:41:32] <steven_is_false> catamorphism is the one who is doing alll the package manager work right?
[20:41:38] <SiegeLord> Once I reduce it, I'll probably solve the bug myself :P
[20:41:44] <steven_is_false> :P
[20:42:41] <doener_> SiegeLord: missing trait bound on the type parameter?
[20:42:45] *** Quits: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP) (Ping timeout)
[20:42:45] *** Joins: Nefzaoui_ (chatzilla@167A3061.E254362C.80E43DAF.IP)
[20:42:48] *** Nefzaoui_ is now known as Nefzaoui
[20:42:57] <mark_edward> vladimir-lu: what are you working on?
[20:44:27] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Ping timeout)
[20:46:11] <SiegeLord> Looks like I had a trait that conflicted with a different trait in std
[20:46:16] <SiegeLord> So it got confused, somehow
[20:52:28] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[20:53:44] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:54:20] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[20:55:26] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[20:55:32] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[20:56:00] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[20:57:05] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[21:01:33] <MaikKlein2> hm can we have * on ~str like in ruby?
[21:02:22] <pcwalton> MaikKlein2: oh, you mean to repeat a string?
[21:02:26] <pcwalton> sure, you can implement in the stdlib
[21:02:35] <MaikKlein2> pcwalton, ok I'll do it
[21:05:31] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[21:07:55] <doomlord> does libsyntax generate any useful information for text in a broken state, eg parts of the ast that can be generated are there... 
[21:08:14] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[21:09:45] *** Quits: kertap (kertap@moz-5AE34C97.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[21:12:24] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:14:48] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[21:15:27] <MaikKlein2> error: cannot provide an extension implementation for a trait not defined in this crate
[21:15:38] <MaikKlein2> I need to be in the same crate as my type?
[21:15:54] <MaikKlein2> for example if I want to do impl std::ops::Mul<~str,int> for ~str {
[21:16:00] <MaikKlein2> I need to be in std?
[21:16:49] <vladimir-lu> mark_edward: oh, just a small libcurl binding
[21:19:25] *** Joins: yoshi (Mibbit@moz-A93A96FB.pppoe.mtu-net.ru)
[21:20:20] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[21:21:08] <yoshi> hello again. i'm trying to write "hello, world" still, need a hashmap now, and could not create an empty one. is there any example around? rust 0.7, trying "let mut map = HashMap< int, int >::new();" and other variations, after "use std::hashmap::*;"
[21:22:42] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (Ping timeout)
[21:23:19] <vladimir-lu> MaikKlein2: yes, someone told me that cross-crate impls are a no-go (for now at least, i really want to see this feature working)
[21:23:55] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[21:25:26] <doener_> yoshi: let mut map = HashMap::new::<int,int>();
[21:25:43] <doener_> yoshi: or: let mut map: HashMap<int,int> = HashMap::new()
[21:26:06] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[21:26:15] *** doener_ is now known as doener
[21:28:34] <yoshi> thanks. but i don't get why is there "::" between "new" and "<int,int>()", have not seen types in new's prototype
[21:30:29] <yoshi> and there is "::new(42.5)" example in tutorial. how it comes that "::" is required?
[21:32:24] <MaikKlein2> ok I have done a successful PR. How do I force my local repo to be exactly the same as the current master?
[21:32:44] <MaikKlein2> I tried git fetch upstream and git rebase upstream/master but it tells me that it is already up to date
[21:33:13] <engla> MaikKlein2: you'd use reset --hard to erase current state and reset to a particular other state
[21:33:25] <engla> it includes removing uncommitted changes
[21:34:10] <engla> or just make a new branch off origin/master
[21:35:18] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[21:36:16] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:36:46] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[21:37:22] <MaikKlein2> engla, hm reset --hard doesn't delete my commits
[21:38:05] <engla> it does if you give it a branch to reset to
[21:38:13] <vladimir-lu> you want to create a new local branch that points to the commit of the github master
[21:38:17] <vladimir-lu> or do that ^^
[21:38:17] <engla> ah it doesn't delete the commits no, it just resets the branch
[21:38:55] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[21:39:07] <MaikKlein2> ok I did some bruteforce and it seems to work now :p
[21:39:08] <MaikKlein2> thanks
[21:39:30] <engla> I'd hope you would read the docs for a command that erases things
[21:39:45] <MaikKlein2> yeah
[21:39:50] <MaikKlein2> i probably should
[21:40:17] <engla> well if you know all your changes are upstream you don't have anything to lose I guess
[21:41:12] <vladimir-lu> tee hee
[21:41:13] <kimundi> yoshi: Thee :: is required because otherwise it could also mean < operator, expression, > operator.
[21:41:34] <vladimir-lu> ./bindgen -l curl -match curl -o curl.rs /usr/include/curl/curl.h 
[21:41:37] <vladimir-lu> error: internal compiler error: missing top span
[21:42:12] <vladimir-lu> i think i should probably create an issue for that
[21:42:24] <vladimir-lu> don't feel up to debugging it (yet...)
[21:42:59] <yoshi> kimundi: thanks
[21:42:59] <doomlord> it should be possible to make an so from rust that a c++ application can query to get callable function pointers? (to write a rust based plugin..) - if a c++ app expects vtables, we could manually roll them ?
[21:43:23] <kimundi> yoshi: The new::<A, B>() stuff even though new itself is not parametrized is because the type params of the trait get accumulated together with type params of the function all at the end... wich is confusing and hopefully will be changed someday :P
[21:43:46] <vladimir-lu> doomlord: how is that different from being able to create extern unmangled rust functions?
[21:44:07] <SiegeLord> Oh, so it's not type<TypeParams...>::func::<FuncParams>() ?
[21:44:07] <doomlord> it isnt, i hope :)
[21:44:07] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[21:44:35] <kimundi> trait Foo<A, B> { fn bar<C, D>(){...}  }  => bar::<A, B, C, D>() or even bar::<C, D, A, B>(), ndo sure wich one it is
[21:44:57] *** Joins: Voomer__ (Voomer@moz-18C80CAC.dyn.centurytel.net)
[21:45:36] *** Quits: Voomer_ (Voomer@moz-6DDD4BCA.dyn.centurytel.net) (Ping timeout)
[21:46:58] *** Joins: Voomer (Voomer@moz-29905D5B.dyn.centurytel.net)
[21:47:07] *** Quits: Voomer__ (Voomer@moz-18C80CAC.dyn.centurytel.net) (Ping timeout)
[21:47:23] <sp3d> nooo, no rusti
[21:48:13] <vladimir-lu> oh, this bindgen error seems to occur not just for curl
[21:49:02] <sp3d> "match 1.5 { 1. ..2. => 9.0, _ => 5.0 }" is 9.0, apparently--I hadn't realized that was possible
[21:50:32] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:52:54] <vladimir-lu> is there a trait for function pointers?
[21:53:17] <vladimir-lu> i want to hand off a &fn to a c lib
[21:53:28] <vladimir-lu> and just have one unsafe fn doing that
[21:53:53] <sp3d> I think Thunk is planned, but I don't know exactly what the best practices for that are atm
[21:53:54] <vladimir-lu> and you create something like fn make_c_fn_ptr<T>(func: T) 
[21:54:07] <vladimir-lu> but there's no guarantee that T is anything
[21:54:40] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[21:54:51] <dwrensha> Is there a way to suppress "unused import" warnings?
[21:54:57] *** Joins: Voomer_ (Voomer@moz-95DD535C.dyn.centurytel.net)
[21:55:37] *** Quits: Voomer (Voomer@moz-29905D5B.dyn.centurytel.net) (Ping timeout)
[21:55:42] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[21:55:48] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[21:56:15] *** Joins: igl1 (igl@moz-1DC83BEA.adsl.alicedsl.de)
[21:56:19] <Luqman> dwrensha: rustc -A unused-imports  or #[allow(unused_imports)]; 
[21:56:38] *** Quits: igl (igl@moz-5951F128.adsl.alicedsl.de) (Ping timeout)
[21:57:00] <dwrensha> thanks, the attribute is what I want
[21:57:15] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:57:41] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[21:57:44] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:58:55] *** Joins: sigma (sigma@CB3F6051.C886FCFF.DF0EE696.IP)
[21:59:12] * vladimir-lu really needs to look at the uv bindings
[22:00:37] *** Quits: Voomer_ (Voomer@moz-95DD535C.dyn.centurytel.net) (Ping timeout)
[22:00:45] *** Joins: Voomer (Voomer@moz-7DF80333.dyn.centurytel.net)
[22:01:53] <tcsc> are matches on strings a good idea/idiomatic?  i'd prefer to have a static hashmap, but that doesn't seem to be possible.
[22:02:27] *** Quits: Voomer (Voomer@moz-7DF80333.dyn.centurytel.net) (Ping timeout)
[22:02:36] *** Joins: Voomer (Voomer@moz-9EFE5C34.dyn.centurytel.net)
[22:04:21] <MaikKlein2> in what stage will std be compiled in stage3?
[22:04:49] *** Quits: yong (chatzilla@89F941DF.4E87ADC2.263D9828.IP) (Connection reset by peer)
[22:05:14] *** Joins: yong (chatzilla@89F941DF.4E87ADC2.263D9828.IP)
[22:05:31] *** Joins: Voomer_ (Voomer@moz-C3F2DF8A.dyn.centurytel.net)
[22:06:07] *** Quits: Voomer (Voomer@moz-9EFE5C34.dyn.centurytel.net) (Ping timeout)
[22:06:27] *** Joins: Voomer__ (Voomer@moz-C3E3D521.dyn.centurytel.net)
[22:07:10] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[22:07:12] *** Quits: Voomer_ (Voomer@moz-C3F2DF8A.dyn.centurytel.net) (Ping timeout)
[22:07:57] *** Joins: Voomer_ (Voomer@moz-C12AC1DD.dyn.centurytel.net)
[22:08:37] *** Quits: Voomer__ (Voomer@moz-C3E3D521.dyn.centurytel.net) (Ping timeout)
[22:09:21] <doomlord> is there an existing libsyntax example to pretty-print as s-expr
[22:09:34] <doomlord> (eg load rust source, dump the ast as s-expr)
[22:10:21] *** Joins: Voomer (Voomer@moz-DB7D70F3.dyn.centurytel.net)
[22:10:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:10:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SH8UTQ
[22:10:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:10:37] *** Quits: Voomer_ (Voomer@moz-C12AC1DD.dyn.centurytel.net) (Ping timeout)
[22:11:30] *** Joins: Voomer_ (Voomer@moz-B8D535EF.dyn.centurytel.net)
[22:12:03] *** Quits: Voomer (Voomer@moz-DB7D70F3.dyn.centurytel.net) (Ping timeout)
[22:13:14] *** Quits: Voomer_ (Voomer@moz-B8D535EF.dyn.centurytel.net) (Ping timeout)
[22:13:33] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[22:13:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/pK0MrA
[22:13:34] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[22:15:27] <SiegeLord> What is the attribute to let macros escape an .rs file?
[22:16:34] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:16:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/pK0MrA
[22:16:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:16:36] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[22:16:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/YfRuBg
[22:16:36] <ghrust> 13rust/06auto 1473fccf3 15Brian Anderson: std::rt: Remove an obsolete FIXME. #7757
[22:16:36] <ghrust> 13rust/06auto 14bb8ca1f 15bors: auto merge of #7910 : brson/rust/rm-fixme, r=graydon
[22:16:36] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[22:17:52] <Jeaye> SiegeLord: #[macro_escape]
[22:18:02] <SiegeLord> Sweet, thanks
[22:18:07] <Jeaye> sure
[22:18:22] <SiegeLord> Is that a module-wide attribute, or per-macro?
[22:19:08] <Jeaye> I use it when importing the module with the macro
[22:19:42] <engla> the macro will escape the module, but not the crate
[22:20:18] <SiegeLord> That's ok, I only need it within the crate
[22:21:44] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:24:03] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[22:28:05] <kimundi> tcsc: what do you mean with matches?
[22:28:39] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[22:29:59] <tcsc> kimundi: for example, https://gist.github.com/thomcc/a8aa1809571204bc34f5
[22:30:10] <SiegeLord> How would I examine what the macro expands to?
[22:30:33] <tcsc> in c++ i'd have a static std::map or something somewhere. 
[22:30:36] <kimundi> SiegeLord: There is a pretty printer option for rustc
[22:30:44] <SiegeLord> It doesn't seem to do it
[22:30:59] <SiegeLord> I did rustc my.rs --pretty
[22:31:14] <SiegeLord> Oh, there's more to --pretty than just that...
[22:31:30] <kimundi> tcsc: Well, static hashmaps are not possible in rust yet, so... I think a match table is tge fastest one
[22:32:02] <tcsc> alright
[22:32:10] <kimundi> tcsc: Might get a bit faster if you sort them and use a binary search, but I think tha dataset is small enough for that
[22:33:08] <tcsc> this is in a lexer. i could go by character if i end up needing more speed
[22:33:44] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[22:34:18] <tcsc> i was just checking that the hash table way was impossible
[22:34:20] <SiegeLord> Hmm... what's the best way to match on a block?
[22:34:33] <SiegeLord> I'm trying to use $B:block, but it complains when I use it
[22:34:35] <sp3d> it seems like match *ought* to generate fast code for something like that
[22:34:41] <SiegeLord> error: unexpected token: `an interpolated block`
[22:34:42] <sp3d> no bets on whether it does
[22:35:09] <doener> sp3d: it justs generates an if-else chain with calls to str_eq or so
[22:35:35] <kimundi> sp3d: I vaguely remember unicode.rs using these tables, but getting changed to something binary seachy to improve speed
[22:35:37] <sp3d> ouch
[22:36:18] <kimundi> well, it could definitly grow an optimisation for this stuff
[22:37:51] <kimundi> like compiling to a statemachine that decides wich arm to take depending on input
[22:37:54] *** Joins: mye (mye@moz-DAFF64A.dip0.t-ipconnect.de)
[22:40:43] <tcsc> it looks like it just calls memcmp on each possibility in order
[22:41:31] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:42:53] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[22:43:16] *** Quits: igl1 (igl@moz-1DC83BEA.adsl.alicedsl.de) (Connection reset by peer)
[22:43:45] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[22:51:00] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[22:52:35] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[22:56:13] <aatch> Gah, 4th earthquake in 3 days
[22:57:27] *** Joins: noxiouz (Mibbit@moz-23707EF4.broadband.corbina.ru)
[22:57:36] *** Quits: noxiouz (Mibbit@moz-23707EF4.broadband.corbina.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[22:57:45] <engla> anything big?
[22:59:00] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:59:05] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[22:59:25] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:59:36] <aatch> engla, depends on your reference. For here, they're moderate, ~5-6
[22:59:50] <engla> I didn't realize NZ was hit that often
[23:00:20] <aatch> engla, I'm also not counting the aftershocks and smaller quakes in the same time.
[23:00:27] <aatch> (because I didn't feel them)
[23:00:47] <aatch> NZ is very geologically active.
[23:00:58] <aatch> sits right on the ring of fire
[23:01:36] <engla> I've only ever felt an earthquake once and I thought it was cool
[23:01:50] <engla> because that never happens in Sweden
[23:02:23] <SiegeLord> Yay for macros + warnings...
[23:04:28] <aatch> engla, heh. My GF is from a town called Taupo. There's a lake there sitting on top of a caldera volcano
[23:05:08] <aatch> They get multiple small earthquakes a day (3-4 on the Richter scale), nobody notices.
[23:05:29] <aatch> It's also where most of the geothermal electricity generation is.
[23:06:37] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[23:08:15] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[23:08:15] <ghrust> 01[13rust01] 15thestinger 04deleted 06rollup at 14eb74f0c: 02http://git.io/TxvO2Q
[23:08:15] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[23:08:18] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[23:09:37] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[23:11:07] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[23:11:22] <SiegeLord> Would it be possible to run rust code in a C callback?
[23:11:44] <SiegeLord> Like not just a few arithmetic operations here and there, but full blown task spawning etc
[23:11:49] <vladimir-lu> SiegeLord: i think so, though the exact incantation eludes me (i'm reading libuv code)
[23:11:57] <aatch> SiegeLord, yes, but it's tricky.
[23:12:08] <SiegeLord> I'd imagine you'd need to register the thread with the scheduler or something
[23:12:13] <vladimir-lu> oh, task spawning i don't know - i suppose if you started it as a rust program the runtime will be running
[23:12:22] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[23:12:39] <SiegeLord> That's what you had to do in D
[23:12:47] <aatch> SiegeLord, with the new system, each thread gets it's own scheduler.
[23:12:56] <aatch> (but that hasn't landed yet)
[23:13:30] <aatch> So that will mean you can start up a scheduler in a new thread and it *should* work fine.
[23:13:33] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[23:13:48] <SiegeLord> I see, sounds great
[23:13:48] <aatch> Though you'd probably not be able to use stuff like work-stealing.
[23:14:24] <mark_edward> vladimir-lu: can you link me to your curl bindings? i tried to write some myself, maybe i could contribute to yours?
[23:14:59] <vladimir-lu> mark_edward: hehe i started looking at it last night, come back when i make my first public commit :)
[23:15:08] <mark_edward> ok, cool!
[23:15:24] <mark_edward> would like to see mine? maybe see what you shouldn't do :P
[23:15:31] <vladimir-lu> yeah, sure :)
[23:15:52] <vladimir-lu> it's my first week of actually coding rust (as opposed to silently reading the mailing list for 1+ years)
[23:15:59] <mark_edward> vladimir-lu: https://github.com/MarkJr94/rust_curl
[23:16:09] <MaikKlein2> rusti, ~"hello".append(" world");
[23:16:18] <MaikKlein2> rusti: ~"hello".append(" world");
[23:16:19] -rusti- <anon>:7:10: 7:35 error: type `&'static str` does not implement any method in scope named `append`
[23:16:19] -rusti- <anon>:7          ~"hello".append(" world");
[23:16:19] -rusti-                    ^~~~~~~~~~~~~~~~~~~~~~~~~
[23:16:19] -rusti- error: aborting due to previous error
[23:16:19] -rusti- application terminated with error code 101
[23:16:53] <aatch> MaikKlein2, unfortunate wart there.
[23:17:02] <vladimir-lu> mark_edward: ooh excellent
[23:17:05] <Crnobog> rusti: (~"hello").append(" world");
[23:17:06] <MaikKlein2> rusti: let s = ~"hello"; s.append(" world");
[23:17:07] -rusti- ()
[23:17:07] -rusti- ()
[23:17:14] <MaikKlein2> rusti: let s = ~"hello"; s.append(" world")
[23:17:15] -rusti- ~"hello world"
[23:17:26] <Crnobog> rusti: (~"hello").append(" world")
[23:17:27] -rusti- ~"hello world"
[23:17:31] <mark_edward> vladimir-lu: don't know if it still compiles, haven't touched it in a few weeks
[23:17:40] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[23:17:50] <aatch> `~` is treated as a unary prefix operator, and just applies to the following entire expression.
[23:17:52] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[23:18:12] <aatch> (syntactically)
[23:18:23] <vladimir-lu> mark_edward: i'll check it now
[23:18:34] <mark_edward> cool
[23:18:40] <vladimir-lu> license?
[23:19:48] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[23:19:52] <strcat> rusti: 2
[23:19:52] -rusti- 2
[23:20:10] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Client exited)
[23:20:14] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[23:20:19] <strcat> rusti: 2
[23:20:20] -rusti- 2
[23:21:35] <engla> I'd like to add .collect() for ~str into libstd. Can I add it in a new file? Isn't it a good idea to not let these files (like str.rs) become too large
[23:22:28] <vladimir-lu> can modules be split out into multiple files?
[23:22:46] <strcat> with syntax extension hacks
[23:23:02] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[23:23:05] <vladimir-lu> mark_edward: you don't have a license on the rust_curl page - is it the same as libcurl or something else?
[23:23:12] <engla> didn't know they were hacks
[23:23:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:23:32] *** ChanServ sets mode: +o dherman
[23:23:51] <mark_edward> vladimir-lu: oops, sorry, I need to add a license. for now assume it's a BSD/MIT type of thing
[23:24:17] <vladimir-lu> cool - i'll fork and make it compile + maybe add a few things
[23:24:33] <vladimir-lu> makes more sense to contribute than to have 2 bindings to the same lib :P
[23:24:41] *** kimundi is now known as zz_kimundi
[23:24:48] * MaikKlein2 what should I do while rust is compiling :(....
[23:25:10] <engla> vladimir-lu: something like #[path = "str/fromiter.rs"] mod fromiter; in str.rs and you have a submodule
[23:26:07] <MaikKlein2> rusti: let s = ~"hello"; s += ~" world"; s
[23:26:08] -rusti- <anon>:7:27: 7:41 error: binary operation + cannot be applied to type `~str`
[23:26:08] -rusti- <anon>:7          let s = ~"hello"; s += ~" world"; s
[23:26:08] -rusti-                                     ^~~~~~~~~~~~~~
[23:26:08] -rusti- error: internal compiler error: no type for node 12: expr " world" (id=12) in fcx 7fc7cc248380
[23:26:09] -rusti- application terminated with error code 101
[23:26:15] <MaikKlein2> rusti: let mut s = ~"hello"; s += ~" world"; s
[23:26:15] -rusti- <anon>:7:31: 7:45 error: binary operation + cannot be applied to type `~str`
[23:26:15] -rusti- <anon>:7          let mut s = ~"hello"; s += ~" world"; s
[23:26:16] -rusti-                                         ^~~~~~~~~~~~~~
[23:26:18] -rusti- error: internal compiler error: no type for node 12: expr " world" (id=12) in fcx 7f7d242568d0
[23:26:21] -rusti- application terminated with error code 101
[23:26:32] <MaikKlein2> how do we do this, with append?
[23:26:34] <mark_edward> vladimir-lu: cool! collaboration!
[23:26:46] <MaikKlein2> rusti: let mut s = ~"hello"; s = s.append(~" world"); s
[23:26:46] -rusti- <anon>:7:44: 7:53 warning: unnecessary allocation, the sigil can be removed [-W unnecessary-allocation (default)]
[23:26:47] -rusti- <anon>:7          let mut s = ~"hello"; s = s.append(~" world"); s
[23:26:47] -rusti-                                                      ^~~~~~~~~
[23:26:47] -rusti- ~"hello world"
[23:27:42] <engla> strcat: when you have time, can you approve the iterator clone PR again, it ended up in merge conflict? https://github.com/mozilla/rust/pull/7882
[23:27:53] <strcat> yeah
[23:28:10] <engla> I guess you got the notifications for that and I didn't (since bors replies that way)
[23:28:28] <MaikKlein2> btw I added * for strings so that we can do ~"hello" * 5;. is it possible to have 5 ~"hello"; ?
[23:28:35] <MaikKlein2> **
[23:28:46] <MaikKlein2> 5 * ~"hello"
[23:30:26] *** Quits: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[23:30:30] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[23:30:45] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[23:31:07] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:35:35] <Jeaye> Trying to define Mul for an object, I'm having ambiguous errors: https://gist.github.com/Jeaye/73f4ff3c1026276a5e2d
[23:35:54] <Jeaye> Can I impl Mul many times for one type? Each with different types?
[23:35:56] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130618035212])
[23:35:57] * Jeaye thought he could.
[23:36:11] <engla> only once for each type
[23:36:40] <mark_edward> vladimir-lu: btw added MIT license
[23:38:05] <Jeaye> engla: And for subsequent types I need to make methods? foo.mul_x, foo.mul_y?
[23:39:35] <engla> The Mul trait has two type parameters, <RHS, Result>. If the Result is constant but the RHS varies you can easily make a trait for the RHS and implement the trait for all possible RHS
[23:39:40] <tcsc> are unspecified fields initialized to zero for struct literals?
[23:40:22] <engla> Jeaye: not sure what to do if you want different RHS types to map to different Result types
[23:40:30] <Jeaye> hmm
[23:41:07] <Jeaye> tcsc: You need to initialize all fields.
[23:41:32] <tcsc> darn
[23:43:07] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[23:45:14] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[23:46:54] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[23:49:26] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[23:50:38] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[23:51:12] *** Joins: tjc (tjc@moz-1805C65F.dsl.dynamic.sonic.net)
[23:51:12] *** ChanServ sets mode: +o tjc
[23:51:42] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[23:52:36] <steven_is_false> Does it make sense for a read lock to be sendable across tasks?
[23:53:36] <tcsc> why don't the docs look like http://static.rust-lang.org/doc/core/files/str-rs.html anymore?
[23:54:19] <strcat> tcsc: because rust doesn't use natural docs anymore
[23:54:47] <tcsc> oh, so that was generated using an external tool
[23:55:08] <bstrie> oh god... what version is that from
[23:55:10] <vladimir-lu> mark_edward: sent you a small PR to make it compile on rust 0.8 pre (though I may be misunderstanding the effect of *)
[23:55:22] <bstrie> tcsc: how did you find that? please tell me it wasn't from google
[23:55:27] <mark_edward> vladimir-lu: cool!
[23:55:35] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[23:55:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/YfRuBg
[23:55:35] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[23:55:37] <Jeaye> Jeeze, that was from before I even knew what Rust was.
[23:55:41] <strcat> bstrie: https://github.com/mozilla/rust/issues/7476
[23:55:42] <MaikKlein2> how do I run the tests in rust str.rs?
[23:55:54] <tcsc> bstrie: yeah
[23:56:00] <bstrie> ok
[23:56:11] <tcsc> bstrie: first result from `str char_at rust`
[23:56:28] <tcsc> err, first documentation result for me.
[23:56:30] <engla> MaikKlein2: the quickest way is to build std.rs manually with  rustc --test std.rs then run that executable. Or use  make check-stage1-std or the sage you want
[23:56:45] <MaikKlein2> engla, thanks
[23:56:50] <strcat> you can also run just the tests you care about
[23:56:53] *** Quits: jaen (jaen@moz-36261275.internetdsl.tpnet.pl) (Ping timeout)
[23:57:04] <mark_edward> vladimir-lu: ah i see what happened. it'll be merged in a sec
[23:58:33] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[23:58:33] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6njIuA
[23:58:33] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[23:58:34] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:58:34] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/WPbCsg
[23:58:34] <ghrust> 13rust/06auto 14435fcda 15blake2-ppc: iterator: Add .cycle() to repeat an iterator
[23:58:34] <ghrust> 13rust/06auto 144623e81 15blake2-ppc: iterator: Let closure-less iterators derive Clone
[23:58:35] <ghrust> 13rust/06auto 14ffe2623 15blake2-ppc: iterator: Add test for .cycle()
[23:58:38] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
