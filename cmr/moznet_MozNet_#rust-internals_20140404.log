[00:02:18] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:03:36] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[00:11:12] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:12:29] <cmr> brson: I think the example I cam up with was #[address_insignificant]
[00:13:28] <cmr> no that wasn't it...
[00:13:28] <strcat> cmr: but that's going to become the default
[00:13:40] <cmr> strcat: not on static mut it isn't?
[00:13:46] <strcat> why not?
[00:13:56] <strcat> it doesn't cause them to be merged if it changes semantics
[00:14:06] <cmr> ah ok
[00:14:09] <strcat> I think there's a misunderstand of what it does
[00:14:46] <strcat> it tells LLVM the *address* is insignificant, not the value contained in it
[00:16:41] <cmr> hm how do you actually get a reference to a global.
[00:17:03] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[00:17:03] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ff817bd to 14bb31cb8: 02http://git.io/N3iJvQ
[00:17:03] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[00:17:03] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[00:17:03] <ghrust> [13rust] 15bors pushed 16 new commits to 06auto: 02http://git.io/8wQBsw
[00:17:03] <ghrust> 13rust/06auto 1415e6e8c 15Alex Crichton: rustc: Stop using LLVMGetSectionName...
[00:17:03] <ghrust> 13rust/06auto 140bd6f2c 15Alex Crichton: rustllvm: Remove a no longer needed file...
[00:17:04] <ghrust> 13rust/06auto 14f5a4837 15Huon Wilson: std: override clone_from for Vec....
[00:17:06] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[00:17:39] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[00:18:49] <cmr> store i64 @X, i64** %x
[00:19:00] <cmr> i64* @X, that is
[00:19:26] <cmr> ah all references to globals are pointers, of course.
[00:19:43] <cmr> strcat: so I suppose if there is ever a load to a global, it won't merge them?
[00:19:59] <strcat> cmr: if it doesn't happen together
[00:20:13] <cmr> what do you mean by that?
[00:20:31] <strcat> you can end up with redundant globals from lots of abstraction layers
[00:20:35] <strcat> like do atomic flags
[00:20:38] <strcat> like two*
[00:21:05] <cmr> ah, you mean if they're ever not loaded to the same thing?
[00:21:14] <cmr> or, the same value is ever loaded to one but not the other
[00:21:19] <cmr> that does make sense.
[00:21:38] <strcat> cmr: it's allowed to merge them if and only if it doesn't change semantics
[00:21:44] <strcat> beyond the significance of the address
[00:21:50] <strcat> there are not hard rules about specific loads
[00:22:24] <cmr> but which semantics? for example, two consequtive stores are not thread-safe but if they are merged into a single store to a single global, now it is.
[00:22:29] <strcat> it won't break rust programs not relying on converting addresses to integers and expecting it to mean something
[00:22:31] <cmr> (sorry, got my load/store mixed up earlier)
[00:22:39] <strcat> unnamed_addr is only about addresses
[00:22:40] <strcat> nothing else
[00:22:57] <strcat> it doesn't mean two mutable globals with the same value can certainly be merged
[00:24:19] <cmr> ok, my confusion has been cleared.
[00:30:38] *** Quits: eibwen (kvirc@moz-2CFC2C74.dip0.t-ipconnect.de) (Ping timeout)
[00:31:17] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[00:31:25] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:32:56] <strcat> acrichto: so I don't think gdb can actually print out our strings properly without us writing a pretty printer
[00:33:20] <strcat> it's only working on this test because it *assumes* all i8*/u8* pointers are null-terminated strings
[00:33:32] <strcat> and it sees a slice, which has one inside
[00:33:44] <cmr> really? what does it do for ada?
[00:33:50] <strcat> cmr: pretty printers
[00:33:59] <cmr> ok.
[00:34:01] <strcat> your question could also be what does it do for C++
[00:34:56] <strcat> cmr: https://sourceware.org/gdb/onlinedocs/gdb/Output-Formats.html
[00:34:59] <strcat> all it has without one
[00:35:33] <cmr> oh, I assumed most of the c++ crap was hardcoded
[00:35:49] <strcat> no it's all python scripts doing pretty printing
[00:35:49] <cmr> I think mw is working or plans to work on pretty printers
[00:36:19] * cmr doesn't care about breaking strings
[00:36:28] <strcat> doesn't really break them
[00:36:32] <strcat> it already prints slices wrong
[00:36:37] <strcat> it just happens to work on static slices
[00:36:57] <strcat> unless they contain an explicit \0
[00:38:30] <strcat> cmr: https://sourceware.org/gdb/wiki/STLSupport
[00:39:45] <strcat> cmr: if it had a pretty printer for rust, it would Just Work for everything ;p
[00:40:15] *** Quits: andrew-__ (andrew-d_w@E04ADC0E.9DFA657C.CC0301A2.IP) (Input/output error)
[00:40:36] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[00:44:22] *** Quits: canhtak (canhtak@moz-9F7DB66C.wl.t.ulaval.ca) (Quit: canhtak)
[00:46:39] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:48:05] <cmr> Is anyone opposed to removing TyVisitor and thus our support for non-type-identity reflection? It could be replaced by a deriving.
[00:48:23] <cmr> brson: acrichto: nmatsakis: ^
[00:49:59] <nrc> cmr: does that mean remving {:?} too ?
[00:50:10] <cmr> nrc: yes.
[00:50:31] <cmr> #[deriving(Show)] already does what that would do under in a "derived TyVisitor" world.
[00:50:57] <nrc> cmr: I think that is a big enough change that it should have a RFC etc.
[00:51:03] <cmr> yes, I will write an RFC
[00:51:19] <nrc> oh, OK I thought you were proposing just doing it :-)
[00:51:21] <cmr> I ask because I don't want to waste time writing an rfc if people oppose it
[00:51:33] <cmr> (and have reasons that I don't think I can effectively refute in the rfc)
[00:51:42] <nrc> ++ from me
[00:52:05] <nrc> I have heard opposition at meetings, but I can't remember who from
[00:52:26] <nrc> worth a quick RFC, I'd have thought though
[01:05:03] *** Quits: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140314220517])
[01:09:56] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[01:10:18] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[01:14:30] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[01:14:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:16:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:18:18] *** Joins: canhtak (canhtak@moz-9F7DB66C.wl.t.ulaval.ca)
[01:21:11] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:26:26] <strcat> heh
[01:26:28] <strcat> a real bug!
[01:26:37] <strcat> the bounds check failure passes a non-null-terminated str
[01:27:18] *** Quits: japaric_ (japaric@911E88BD.F9FFD430.3E85381A.IP) (Ping timeout)
[01:27:24] *** Joins: lpy (lpy@3B6F1F1D.F09091A8.1348A864.IP)
[01:27:31] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[01:28:36] *** Joins: japaric_ (japaric@F0EDDE6E.BD5E6C4A.766D0B82.IP)
[01:29:18] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:29:29] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[01:32:07] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[01:32:07] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/8wQBsw
[01:32:07] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[01:32:10] <acrichto> cmr: I am still opposed to just outright removing :?
[01:32:31] <cmr> acrichto: reasoning?
[01:32:45] <acrichto> it's the only way to print something if you otherwise can't do it
[01:32:53] <acrichto> it's very easy to use
[01:33:09] <strcat> meh just going to be cautious and leave all the unwinding strings as \0-terminated
[01:33:12] <nrc> Who implemented the `RUST_BACKTRACE=1` thing?
[01:33:16] <strcat> not familiar enough to know which can have no \0
[01:33:16] <acrichto> nrc: I did
[01:33:27] <nrc> acrichto: it is awesome. I owe you a beer
[01:33:31] <acrichto> :D
[01:34:03] * strcat wonders how hard it is to write a gdb pretty printer
[01:34:15] <strcat> seems like it'd be trivial to make a slice pretty printer for strings
[01:34:29] <strcat> printing them as { ptr, length } sucks
[01:34:46] <strcat> especially since gdb guesses that *u8/*i8 is null-terminated...
[01:34:58] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[01:34:58] <ghrust> [13rust] 15alexcrichton merged 06auto into 06snap-stage3: 02http://git.io/jHqC8Q
[01:34:58] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[01:35:04] <strcat> it tries to print &u8 as a C string
[01:35:06] <strcat> yeah.
[01:36:06] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:36:09] <cmr> acrichto: yes, it is the only way to print something when you otherwise cannot print it. I don't think that is a valuable feature, though, now that we have #[deriving(Show)]. I'm comfortable saying "If a type doesn't implement Show, you cannot print values of that type" (assuming it doesn't have some other way of printing, which it shouldn't)
[01:36:44] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[01:36:44] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Lr5qOw
[01:36:44] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[01:38:53] <cmr> I think we should add a {:d} of some sort though. That is, a trait used for printing a "debugging representation" of a type.
[01:39:02] <cmr> rc's refcount/weak count, vec's capacity, etc.
[01:39:58] <acrichto> cmr: what are the reasons to remove it?
[01:40:49] <cmr> acrichto: I mostly care about reducing complexity, I don't see it as a necessary feature.
[01:41:13] <acrichto> it's really not that much complexity, it's just one reflection thing in libstd
[01:41:22] <acrichto> it needs to be updated when representations change, but it's really not that bad
[01:41:46] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[01:41:46] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Lr5qOw
[01:41:46] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[01:41:47] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[01:41:47] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/dt7GHw
[01:41:47] <ghrust> 13rust/06auto 146831979 15Alex Crichton: rustc: Switch tuple structs to have private fields...
[01:41:47] <ghrust> 13rust/06auto 14922dcfd 15Alex Crichton: Switch some tuple structs to pub fields...
[01:41:47] <ghrust> 13rust/06auto 14c2e4576 15bors: auto merge of #13237 : alexcrichton/rust/private-tuple-structs, r=brson...
[01:41:49] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[01:42:00] <strcat> yeah.        y = 0x7fffffffd8ff "\005\300\333\377\377\377\177"
[01:42:14] <strcat>     let x = 5u8;
[01:42:16] <strcat>     let y = &x;
[01:42:18] * strcat sighs
[01:43:55] *** Joins: lpy_ (lpy@207F51B2.F09091A8.1348A864.IP)
[01:44:51] *** Quits: lpy (lpy@3B6F1F1D.F09091A8.1348A864.IP) (Ping timeout)
[01:53:13] <strcat> cmr: https://github.com/mozilla/rust/pull/13291 r? should work now, bit more than I thought was needed though
[01:53:32] * strcat realizes it was alex he had review it before >.<
[01:53:43] <strcat> there are too many of you green nicknamed people
[01:53:47] <cmr> heh
[01:53:52] <cmr> I feel that way about pnkfelix and acrichto
[01:53:59] <cmr> their conversations are impossible to follow fo rme
[01:56:12] <acrichto> strcat: what happens in the debuginfo test if you print the strings?
[01:56:15] <acrichto> in terms of data
[01:56:27] <strcat> acrichto: it prints { ptr, length }
[01:56:48] <strcat> acrichto: depends on whether you have it set to print pointers to u8/i8 as null-terminated strings or no
[01:56:50] <acrichto> can you print the contents?
[01:57:04] <strcat> acrichto: no
[01:57:10] <strcat> well
[01:57:12] <strcat> maybe you can
[01:57:14] <strcat> I don't know how though
[01:57:25] <acrichto> I guess you can't for arbitrary strings really
[01:57:28] <strcat> acrichto: we need pretty printers
[01:57:30] <acrichto> b/c most aren't null terminate
[01:57:32] <strcat> yeah
[01:57:34] <acrichto> terminated*
[01:57:40] <strcat> and they can contain \0 in the middle
[01:57:50] <strcat> acrichto: it seems like it'd be really easy to write gdb pretty printers for slices
[01:58:16] <strcat> but I don't know if people have to load them manually
[01:58:18] <strcat> I think they do
[01:59:21] <strcat> acrichto: the weird part is that they still seem to have \0 at the end in most cases
[01:59:26] <strcat> sometimes they don't
[01:59:29] <strcat> in the IR they don't
[01:59:34] <strcat> and in the asm they don't
[02:00:30] <acrichto> probably just coincidence
[02:01:21] <strcat> seems like maybe it puts padding, at least without -O
[02:01:23] <strcat> weird
[02:04:03] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:04:52] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[02:13:07] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[02:13:48] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:15:35] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:19:26] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[02:19:26] <strcat> acrichto: my pretty printer works
[02:19:29] <strcat> going to go to sleep though
[02:19:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[02:19:46] <acrichto> nice!
[02:20:55] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:20:57] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:21:05] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Connection reset by peer)
[02:22:42] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:23:01] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[02:23:31] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:23:42] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:24:11] *** lpy_ is now known as lpy
[02:24:29] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[02:27:29] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:30:45] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[02:31:57] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[02:32:45] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[02:33:03] *** Quits: kimundi (kimundi@moz-B0C67194.dip0.t-ipconnect.de) (Ping timeout)
[02:36:50] *** Joins: kimundi (kimundi@moz-DF1E95E2.dip0.t-ipconnect.de)
[02:37:47] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:39:12] *** Quits: lpy (lpy@207F51B2.F09091A8.1348A864.IP) (Connection reset by peer)
[02:39:43] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[02:40:49] *** kimundi is now known as zz_kimundi
[02:44:57] *** Quits: canhtak (canhtak@moz-9F7DB66C.wl.t.ulaval.ca) (Quit: canhtak)
[02:45:31] *** Joins: lpy_ (lpy@207F51B2.F09091A8.1348A864.IP)
[02:45:53] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Ping timeout)
[02:48:18] *** Joins: canhtak (canhtak@moz-9F7DB66C.wl.t.ulaval.ca)
[02:49:53] *** zz_kimundi is now known as kimundi
[02:51:45] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[02:51:45] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/dt7GHw
[02:51:45] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[02:51:52] <JustAPerson> Can anyone comment on the intended behavior of `#[path=""]` in this issue? I would be interested in attempting this https://github.com/mozilla/rust/issues/10076
[02:53:52] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:53:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:54:11] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:54:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:55:53] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:55:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:56:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:56:12] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:56:47] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[02:56:47] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/n9FWxg
[02:56:47] <ghrust> 13rust/06auto 140875ffc 15Brian Anderson: Bump version to 0.11-pre...
[02:56:47] <ghrust> 13rust/06auto 142a2d0dc 15bors: auto merge of #13296 : brson/rust/0.11-pre, r=alexcrichton...
[02:56:47] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[02:56:48] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[02:56:48] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/pO4zdA
[02:56:48] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[02:57:24] <cmr> JustAPerson: if you say `#[path="bar"] mod foo;` and `bar` is a directory, it should load `bar/mod.rs`
[02:57:41] <cmr> JustAPerson: at least that is what kmc is suggesting I believe.
[02:57:54] <cmr> JustAPerson: I think it should just be an error.
[02:59:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:59:54] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:00:06] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:00:06] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:02:10] <JustAPerson> cmr: okay, thank you for the clarification.
[03:13:14] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:13:25] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:22:37] *** Quits: lpy_ (lpy@207F51B2.F09091A8.1348A864.IP) (Client exited)
[03:23:08] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[03:23:50] *** Joins: lpy_ (lpy@207F51B2.F09091A8.1348A864.IP)
[03:25:06] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[03:26:35] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[03:28:31] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:31:21] *** Quits: lpy_ (lpy@207F51B2.F09091A8.1348A864.IP) (Client exited)
[03:31:50] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[03:33:41] *** Quits: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP) (Client exited)
[03:34:00] *** Joins: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP)
[03:41:04] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[03:44:48] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[03:58:24] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[04:06:50] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[04:06:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/n9FWxg
[04:06:50] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[04:11:46] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[04:11:47] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/q6OjOA
[04:11:47] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[04:11:47] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[04:11:48] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/AceNpw
[04:11:48] <ghrust> 13rust/06auto 149380304 15Jonathan S: Add fetch_and, fetch_or, fetch_xor to AtomicInt, AtomicUint
[04:11:48] <ghrust> 13rust/06auto 140226066 15bors: auto merge of #12964 : gereeter/rust/extended-atomics, r=alexcrichton...
[04:11:48] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[04:12:54] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[04:15:43] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[04:16:25] *** Quits: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP) (Ping timeout)
[04:17:40] <klutzy> it's hilarious for windows internals I have to rely on an article written in 1996
[04:18:19] <klutzy> or stackoverflow answer written by ms developer
[04:18:22] <nrc> it is actually an amazing achievement by Microsoft to keep their APIs compatible for so long
[04:18:51] <nrc> also, I'm sorry for you, dealing with Windows internals is awful
[04:19:17] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:19:51] <klutzy> yeah
[04:20:05] <klutzy> but it becomes worse when two sources conflict
[04:20:06] <klutzy> :'(
[04:20:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:21:00] <nrc> kia kaha
[04:22:10] <klutzy> acrichto: I added comment at #13259 but removed one line later: I'm not sure if __morestack is actualyl compatible with native thread stacks
[04:23:07] <acrichto> klutzy: I saw, the story just keeps deepening with this
[04:23:17] <acrichto> seems odd that it's less appropriate for native threads than green threads
[04:23:17] <klutzy> I guessed segmented stack works only for manually allocated user stacks
[04:23:45] <acrichto> this works with libgreen because libuv does so many windows things before we start setting the stack bound
[04:23:50] <klutzy> (in llvm's scenario)
[04:30:24] *** Quits: canhtak (canhtak@moz-9F7DB66C.wl.t.ulaval.ca) (Quit: canhtak)
[04:43:50] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:44:02] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:47:24] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[04:50:14] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:53:58] <cmr> r? https://github.com/mozilla/rust/pull/13207 :(
[05:01:32] <Eridius> cmr: is #![ surrounding_spaces ] a new thing?
[05:01:49] <Eridius> I hadn't seen it before (until I glanced at the tutorial the other day). And I don't like it
[05:01:55] * Eridius certainly has never seen that used in actual code
[05:02:39] <cmr> Eridius: no, that's an older style.
[05:03:10] <cmr> I can update it.
[05:04:10] <Eridius> cmr: please do
[05:04:35] <Eridius> the tutorial is a lot of people's first exposure to actual Rust code, so it should not teach them the wrong formatting
[05:04:45] <cmr> oh pft
[05:04:53] * cmr wasn't going to touch the tutorial
[05:04:55] <cmr> but I can do that too :p
[05:04:58] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[05:04:58] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 146325af7 to 144aec80c: 02http://git.io/k471pw
[05:04:58] <ghrust> 13rust/06try 14ffc88ef 15Alex Crichton: an attempt
[05:04:58] <ghrust> 13rust/06try 144aec80c 15Alex Crichton: Register new snapshots
[05:04:58] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[05:05:14] <cmr> the tutorial doesn't have that
[05:06:49] <Eridius> oh was this the reference, not the tutorial?
[05:06:51] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[05:06:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/t6xtew
[05:06:51] <ghrust> 13rust/06auto 149380304 15Jonathan S: Add fetch_and, fetch_or, fetch_xor to AtomicInt, AtomicUint
[05:06:51] <ghrust> 13rust/06auto 147056f97 15bors: auto merge of #12964 : gereeter/rust/extended-atomics, r=alexcrichton...
[05:06:52] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[05:06:57] <Eridius> forget what I said about the tutorial then, just update the reference
[05:07:00] <cmr> I did
[05:07:03] <cmr> that's what this pull request is
[05:07:05] <Eridius> I guess it was the reference I glanced at the other day
[05:07:05] <cmr> :p
[05:07:19] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[05:07:19] <ghrust> [13rust] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/kvTaxQ
[05:07:19] <ghrust> 13rust/06try 14736c142 15Alex Crichton: more fixes
[05:07:19] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[05:07:20] <Eridius> right, I meant just update the syntax in it, which I see you already pushed the update
[05:07:23] <Eridius> \o/
[05:07:34] <cmr> so, r? :)
[05:07:42] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:09:02] <Eridius> oh heh, I'm too used to opening PRs to r+ them to see that you already did, I almost forgot I can do that :D
[05:09:08] <cmr> :p
[05:09:15] <Eridius> just today, I opened a 2-hour-old PR to find out that you had r+'d it mere minutes before
[05:09:22] * Eridius actually reads the diff
[05:09:22] <cmr> lol
[05:10:37] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[05:11:33] <Eridius> cmr: what is ~~~~ ? I'm only familiar with ``` as a code block fence.
[05:12:16] <cmr> same thing.
[05:12:26] <cmr> ``` is gh-style code fence.
[05:12:30] <cmr> ~~~ is pandoc
[05:12:35] <Eridius> ahh
[05:13:11] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[05:13:11] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14736c142 to 14d18c442: 02http://git.io/k471pw
[05:13:11] <ghrust> 13rust/06try 149d90402 15Corey Richardson: Remove libc from std...
[05:13:11] <ghrust> 13rust/06try 148ac2b61 15Corey Richardson: Change how the readdir/opendir hack works
[05:13:11] <ghrust> 13rust/06try 14ea0cf43 15Corey Richardson: Fix fallout from std::libc separation
[05:13:13] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[05:14:11] <Eridius> cmr: are the trailing ; in the EBNF not correct?
[05:14:31] <cmr> Eridius: that was part of the attribute syntax, not the EBNF.
[05:14:37] <Eridius> nope
[05:14:46] <Eridius> if it was in the attribute syntax it would have been ';'
[05:14:50] <cmr> hm
[05:14:50] <Eridius> and it would have been marked as optional
[05:15:04] <Eridius> EBNF rules can be wrapped (as the attr rule is), so the ; terminates the rule
[05:15:07] <cmr> that's true
[05:15:25] <cmr> so perhaps the old grammar didn't handle it at all!
[05:15:34] <cmr> I looked in the ebnf reference at the start of the manual and didn't see it
[05:15:41] <Eridius> yeah the old grammar doesn't appear to have handled inner-attributes
[05:15:43] <cmr> semicolons, that is.
[05:16:05] <cmr> and now I do see them
[05:16:22] <cmr> my only excuse is that it was 8am and I had been awake all night
[05:17:39] <cmr> fixed
[05:18:08] <Eridius> oh good, the note I added before refreshing is still visible
[05:19:51] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:20:16] * cmr reads ECMA-335 to make sure that reference is actually correct
[05:20:20] <cmr> *incorrect
[05:20:49] <Eridius> I don't know if it really is based on ECMA-335 and calling that C# is wrong, or if it really is based on C# and it should say ECMA-334. Or if someone just made that up completely and it's really based on something else
[05:21:01] * Eridius has zero familiarity with C# and had never even heard of the Common Language Infrastructure before
[05:22:39] <cmr> nope, they're part of CIL
[05:22:46] <cmr> it's correct to say ECMA-335
[05:23:01] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:23:28] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[05:23:44] <Eridius> ok, so the reference to C# should just be deleted
[05:23:50] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:23:53] <Eridius> saying CLI is probably confusing, unless you hyperlink it to something
[05:23:54] <cmr> well C# also shares the syntax
[05:24:05] <Eridius> if you want to reference #, say ECMA-334
[05:24:08] <Eridius> s/#/C#/
[05:24:09] <cmr> CIL, not CLI: Common Intermediate Language :p
[05:24:21] <Eridius> oh? I saw a reference saying Common Language Infrastructure
[05:24:22] <Eridius> did they change it?
[05:24:22] <cmr> part of CLI
[05:24:26] <Eridius> ahhh
[05:24:29] <cmr> which is the Common Language Infrastructure
[05:24:37] <cmr> used to be called MSIL before the standardization push
[05:24:48] <Eridius> http://www.ecma-international.org/publications/standards/Ecma-335.htm says Common Language Infrastructure
[05:25:03] <Eridius> Attributes may be part of CIL, but ECMA-335 is CLI
[05:25:35] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[05:25:45] <cmr> sure
[05:27:38] <ChrisMorgan> cmr: pandoc allows ``` fences, so I think we should just shift wholesale from ~~~ to ```.
[05:28:07] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:28:08] <Eridius> ChrisMorgan: I agree, but I wasn't about to suggest that right now
[05:28:49] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[05:28:59] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[05:29:01] *** Joins: luzie (lu.cy@moz-CD18B14B.customer.cdi.no)
[05:30:19] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[05:30:58] *** Joins: rajaram_ (rajaram@47769425.AE842F9B.81C3DAA1.IP)
[05:32:34] <cmr> Eridius: did you delete the "Shouldn't these trait names be capitalized?" comment? It's in my email but I'm not seeing it on github
[05:33:31] <cmr> (and the answer is no, because language items aren't capitalized)
[05:34:54] <Eridius> cmr: yes
[05:35:04] <Eridius> I edited it immediately to say "Nevermind, these are lang items", and then deleted it
[05:35:07] <Eridius> ;)
[05:35:14] <cmr> ok
[05:36:41] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:38:29] <cmr> Eridius: does the last commit look good? if so I'll squash and r=you
[05:39:06] * Eridius reads
[05:39:45] <Eridius> cmr: nope :P you got two spaces after your periods.
[05:39:53] <Eridius> I assume Vim did that for you
[05:40:01] <Eridius> I really really wish that was behavior you could turn off, but I don't know of any way to do it
[05:40:14] <cmr> it didn't do that.
[05:41:08] <Eridius> oh? I didn't notice double-spaces in the previous diffs
[05:41:49] <Eridius> yeah, the double spaces here show up because the period was at the end of the ilne
[05:41:52] <Eridius> *line
[05:42:03] <Eridius> that's the condition in which asking Vim to reformat the paragraph will insert two spaces after the period
[05:42:24] <cmr> ah
[05:42:30] <cmr> I thought you meant as I was editing.
[05:42:48] <Eridius> oh no I mean in the last commit
[05:42:49] <cmr> it didn't do it for all of them, interetingly.
[05:43:05] <cmr> it didn't
[05:43:08] <Eridius> yeah, reflow only adds the spaces when it joins two lines and the first line ended with a period
[05:43:10] <cmr> those double spaces were there before.
[05:43:18] <cmr> or, at least one of them
[05:43:20] <Eridius> ok in your final commit, one of the double spaces was
[05:43:26] <Eridius> but I checked and in the full diff it wasn't
[05:43:31] <cmr> ahhh
[05:43:34] <Eridius> the double space there was added by your previous commits and I just didn't notice
[05:43:50] <cmr> there, all better?
[05:45:12] *** Joins: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP)
[05:53:14] <eddyb> nmatsakis: ha! match m.iter().find(|r| r.get(0).id != 0) {
[05:53:35] <eddyb> nmatsakis: it wasn't something I changed, it was something I didn't find after changing the dummy patterns from 0 to DUMMY_NODE_ID
[05:54:02] <Eridius> cmr: I suppose. I'm not sure I'm willing to accept your justification for modifying rust-mode.el when there are no other changes in the file ;) but you can r=me if you want
[06:12:35] *** Quits: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:13:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:15:39] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:19:11] *** kimundi is now known as zz_kimundi
[06:19:17] *** Joins: edwardw (Mibbit@A8F743D9.7FBBB51F.BE7924BA.IP)
[06:21:54] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[06:21:54] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/t6xtew
[06:21:55] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[06:23:52] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:24:34] *** Joins: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net)
[06:26:50] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[06:26:50] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/PfEkew
[06:26:50] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[06:27:37] <acrichto> cmr: windows is truncate the section name
[06:27:44] <cmr> acrichto: why, why do they do this :(
[06:27:47] <acrichto> .note.rustc is becoming .note.ru
[06:27:56] <acrichto> but this must only be happening for libc.dll
[06:27:59] <acrichto> b/c everything works today
[06:28:03] <acrichto> I have no idea why
[06:28:45] <acrichto> and it only happens on the bots
[06:28:49] <acrichto> not on my mingw installation
[06:29:11] <acrichto> gcc 4.5.2 (bot) vs gcc 4.8.1 (me)
[06:29:14] <acrichto> hmm
[06:29:19] <acrichto> sounds like someone fixed a bug
[06:29:48] <Eridius> acrichto: DOS issue maybe? 8 characters was a DOS filename limit IIRC
[06:30:06] <acrichto> that's not the problem
[06:30:11] <acrichto> if this happened all the time, nothing would work on windows
[06:30:21] <acrichto> but many things currently work on windows
[06:30:25] <Eridius> oh section name, not a filename. Hmm
[06:30:27] <acrichto> it baffles me why this specifically doesn't
[06:30:41] *** Joins: tikue (tikue@A7ECB14D.ADD881BB.D5A9E6FD.IP)
[06:30:42] <cmr> it is indeed very confusin.
[06:30:54] <cmr> you could take this opportunity to upgrade the bots to mingw-w64
[06:31:03] <Eridius> acrichto: out of curiosity, what if you rename it to libd? Maybe it's some wacky hardcoding support for "libc"
[06:31:06] <acrichto> also linkers haev tons of options
[06:31:31] <acrichto> Eridius: still truncated :(
[06:31:34] <Eridius> :(
[06:31:47] <acrichto> objdump -h wut.o => .note.rustc
[06:31:56] <acrichto> collect2 -o foo.dll wut.o -shared
[06:32:01] <acrichto> objdump -h foo.dll => .note.ru
[06:32:34] <cmr> that's quite infuriating.
[06:32:46] <acrichto> *something* is different
[06:33:46] <cmr> I would like to point out that I now have rustc builds going back to before 0.5
[06:33:49] <cmr> and only one has failed so far
[06:33:52] <cmr> this is quite impressive
[06:34:00] <Eridius> wow
[06:34:08] <acrichto> go bors!
[06:34:13] <cmr> go bors indeed!
[06:34:35] <Yurume> .note.ru?
[06:34:40] <Yurume> eight characters...
[06:35:16] <acrichto> that's the limit in a COFF file before you go look it up somewhere else
[06:35:19] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Quit: victorporof)
[06:35:27] <klutzy> this? https://sourceware.org/bugzilla/show_bug.cgi?id=13130
[06:35:30] <Yurume> aaand that is the limit of COFF/PE.
[06:35:36] <Yurume> BYTE Name[IMAGE_SIZEOF_SHORT_NAME]
[06:35:51] <acrichto> that's what I want, a "long name"
[06:35:54] <acrichto> it's producing a short name
[06:36:17] <acrichto> zomg!
[06:36:22] <acrichto> --enable-long-section-names
[06:36:23] <acrichto> !!
[06:36:30] <acrichto> lol
[06:36:43] <acrichto> what is this
[06:36:49] <cmr> if we're producing invalid pecoff, that's a problem
[06:36:55] <cmr> but we can blame gcc so that's fine
[06:36:56] <acrichto> argh how did I not see that option
[06:37:09] <cmr> (yay plausible deniability)
[06:37:50] <Yurume> can we just use `.note.rs` for the maximally compliant section name? :)
[06:37:54] <cmr> heh
[06:37:58] <acrichto> it also truncate .eh_frame
[06:38:04] <acrichto> which I believe is quite important for other reasons
[06:38:10] <Eridius> Yurume: only if we start documenting this stuff in cyrillic
[06:39:44] <nrc> thanks again cmr
[06:40:30] <cmr> mhm
[06:40:49] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[06:40:49] <ghrust> [13rust] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/tBJ1mg
[06:40:49] <ghrust> 13rust/06try 140c04919 15Alex Crichton: let's have some long section names
[06:40:49] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[06:41:11] * eddyb is confused
[06:41:15] <eddyb> what changed?
[06:41:37] <eddyb> something is apparently different in Expr_
[06:41:47] <eddyb> but I can't see anything changed
[06:42:02] <eddyb> acrichto: did someone go ahead and remove the extra spaces after Vec<...>?
[06:42:07] <Eridius> then what makes you think it's different?
[06:42:12] <acrichto> eddyb: I did in some commits
[06:42:18] <acrichto> they were annoying me
[06:42:18] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[06:42:24] <eddyb> Eridius: rebase :P
[06:42:27] <acrichto> sorry for the conflicts :(
[06:42:29] <eddyb> <<<<<<<
[06:42:39] <eddyb> acrichto: np, thanks for cleaning it up :)
[06:42:51] <cmr> acrichto: what's the status of the llvm patches?
[06:43:09] <acrichto> cmr: arm/win64 are upstreamed, trying to upstream no_split_stack or whatever the equivalent is
[06:43:11] <eddyb> AbiSet -> Abi, I should be careful
[06:43:15] <acrichto> haven't gotten a response back on it yet
[06:43:19] <cmr> ah ok
[06:43:44] <acrichto> we're close though
[06:43:44] <eddyb> acrichto: my libuv upstream attempt was a failure :P
[06:43:47] <acrichto> we're basically all the way there
[06:43:57] <acrichto> eddyb: :(, it should get merged though
[06:44:08] <acrichto> their way of building android I don't think works on osx at all
[06:44:17] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[06:44:17] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 140c04919 to 147a03584: 02http://git.io/k471pw
[06:44:17] <ghrust> 13rust/06try 147a03584 15Alex Crichton: let's have some long section names
[06:44:17] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[06:44:47] <acrichto> oh man this is gonna make a great commit message
[06:44:54] <acrichto> klutzy: thanks so much for that link, that was my savior
[06:45:02] <acrichto> I tried googling things related to that, but I never found anything :(
[06:45:19] <acrichto> or no, I didn't look past the first two results
[06:45:27] <cmr> is there any solution to long symbols besides emitting invalid coff?
[06:45:39] <acrichto> not that it looks like
[06:45:42] <acrichto> but we're relying on this for now
[06:45:47] <acrichto> debug info, exception handling info, etc
[06:45:56] <acrichto> we can change to .note.rs if we really need to
[06:46:07] <acrichto> looks like this is standard behavior in gcc 4.8.2 at least
[06:46:13] <acrichto> they must have switched since 4.5.2
[06:46:27] <cmr> ok.
[06:57:34] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[06:59:12] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140402030201])
[06:59:31] <acrichto> cmr: ok the try build looks like it's continuing to make progress: http://buildbot.rust-lang.org/builders/try-win/builds/957
[06:59:42] <acrichto> I'll polish it off tomorrow and make a real commit and re-submit
[06:59:47] <acrichto> and hopefully it'll land this time!
[06:59:52] <cmr> thanks <3
[06:59:53] <acrichto> man linkers are so much fun
[06:59:58] * acrichto shakes head
[07:00:25] <acrichto> we were never #1 on HN today :(
[07:00:34] <Eridius> :'(
[07:00:35] <acrichto> microsoft had to go open source their C# compiler lol
[07:00:42] <Eridius> those bastards!
[07:00:43] <Yurume> bad timing!
[07:00:44] <Eridius> rust > C# anyway
[07:00:50] <Eridius> let's release 0.11 tomorrow
[07:00:57] <acrichto> already prepped
[07:01:08] <mcpherrin> Let's just increment the version number each nightly
[07:01:14] <acrichto> curl http://static.rust-lang.org/dist/rust-0.11.tar.gz
[07:01:14] <mcpherrin> RAPID RELEASE.
[07:01:20] <Yurume> (I actually thought 0.10 is better named to 0.91, there are still people confused with the versioning scheme)
[07:01:21] <acrichto> lol
[07:01:24] <Eridius> Chrome release numering!
[07:01:40] <mcpherrin> Eridius: I think you mean Firefox style, this is a Mozilla project after all ;)
[07:01:42] <acrichto> 0.10 => 0.20 => 0.34 => 0.21 => 0.5 => 0.1.0 => 1.0
[07:01:53] <Yurume> acrichto: numberwang versioning?
[07:02:01] <acrichto> just to keep everyone on their toes
[07:02:07] * acrichto submits an amendment to the semver spec
[07:02:16] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[07:02:26] <mcpherrin> What's a good non-monotonic integer sequence
[07:02:37] <Eridius> fibonacci sequence?
[07:02:43] <Yurume> non-monotonic?
[07:02:49] <acrichto> oh I was just typing numbers
[07:02:54] <Yurume> mcpherrin: gray code?
[07:03:07] <mcpherrin> Oh I like gray codes
[07:03:32] <mcpherrin> they're great for avoiding side channel attacks :P
[07:03:46] <mcpherrin> and clock recovery in digital signals~
[07:04:12] * acrichto zzzz
[07:09:23] <eddyb> ExprVstore(ExprVstoreMutSlice, ExprVec([...], MutMutable))
[07:09:36] <eddyb> yo dawg, I put a mut vec in your mut vstore so you can... idk
[07:09:44] <cmr> lol
[07:10:51] <eddyb> we should be safe to remove the inner mutability, methinks
[07:12:06] <eddyb> rusti: let _: ~[mut int];
[07:12:11] -rusti- pastebinned 7 lines of output: http://ix.io/bti
[07:12:37] <eddyb> okay, so we don't parse it
[07:12:44] <eddyb> rusti: ~[mut 0]
[07:12:50] -rusti- pastebinned 7 lines of output: http://ix.io/btj
[07:13:50] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:14:10] <edwardw> rusti: let _: ~[&mut uint];
[07:14:11] -rusti- ()
[07:14:19] <cmr> we can't anymore, at least.
[07:14:22] <cmr> used to be completely valid.
[07:14:53] <eddyb> well, I know *that*
[07:15:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:17:44] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[07:19:25] *** Quits: c74d3 (c74d3a4ebb@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[07:19:26] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[07:21:54] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[07:21:54] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14b684630 to 147056f97: 02http://git.io/N3iJvQ
[07:21:54] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[07:28:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[07:42:17] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[07:52:04] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:54:16] *** Quits: edwardw (Mibbit@A8F743D9.7FBBB51F.BE7924BA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:55:20] *** zz_kimundi is now known as kimundi
[08:01:55] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[08:01:55] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14371718e to 147056f97: 02http://git.io/N3iJvQ
[08:01:55] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[08:01:56] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[08:01:56] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/uhG3mA
[08:01:56] <ghrust> 13rust/06auto 1478937b9 15Alex Crichton: std: Document builtin syntax extensions...
[08:01:56] <ghrust> 13rust/06auto 14540c2a2 15bors: auto merge of #13255 : alexcrichton/rust/issue-5605, r=huonw...
[08:01:56] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[08:03:20] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[08:03:28] *** kimundi is now known as zz_kimundi
[08:04:51] *** Joins: c74d3 (c74d3a4ebb@moz-E2EAC718.oc.oc.cox.net)
[08:08:47] *** zz_kimundi is now known as kimundi
[08:13:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:15:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:33:04] <Yurume> is it usual that -Z ast-json returns `null` for every span?
[08:33:09] <cmr> yes.
[08:33:12] <cmr> spans aren't encoded.
[08:34:03] <Yurume> regarding on rustfix posted to /r/rust, I realized that the practical fixer can operate on the AST with span information and *do not* rely on the pretty-printer
[08:34:36] <Yurume> so the fixer matches on the AST, and uses the span information to fix the code at the textual level (not the AST level)
[08:35:13] <Yurume> though it would be impossible to do so with the external tool like rustfix.
[08:39:44] <huon> Yurume: I agree that would work
[08:39:56] <huon> start at the last span to fix and work forward
[08:40:59] <huon> (it does presume that our spans are byte-wise correct though, which they haven't been for two reasons, multibyte chars (I think this is mostly fixed) and just including and extra token or two (probably not fixed).)
[08:41:00] <cmr> (backwards)
[08:41:15] <huon> oh, yes
[08:41:34] <Yurume> I wanted to experiment that, but then -Z ast-json doesn't give spans :p
[08:42:11] <cmr> hm
[08:42:18] <huon> add a secret variable to the span encodable instance so you can toggle whether it gets encoded from the outside
[08:42:32] <huon> (I guess TLD)
[08:42:45] <cmr> RUSTC_ENCODE_SPANS_HACK
[08:42:57] <eddyb> TLD? eww
[08:43:28] <huon> eddyb: an env var would be worse :P
[08:43:38] <huon> could do a #[thread_local] or something like that
[08:43:46] <huon> but then libgreen would frown at you
[08:44:14] <eddyb> global atomic pls
[08:44:28] <cmr> it's not about being atomic...
[08:45:13] <huon> oh, I guess a plain old static mut would work too... :P
[08:45:47] <eddyb> atomic would be safe
[08:46:26] <huon> eddyb: safety is for chumps
[08:46:40] * huon writes everything with raw pointers
[08:46:49] <huon> *u8 is my only type
[08:47:08] <eddyb> *mut ()
[08:47:41] <huon> eddyb: offset is useless ;P
[08:48:03] *** huon is now known as ascii
[08:54:18] *** ascii is now known as huon
[08:54:29] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[08:55:04] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[08:56:53] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[09:11:49] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[09:11:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/uhG3mA
[09:11:49] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[09:16:49] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[09:16:49] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Kvdh9Q
[09:16:49] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[09:16:51] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[09:16:51] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/DaYY4A
[09:16:51] <ghrust> 13rust/06auto 14a410833 15Corey Richardson: manual: update the note about reserved attributes
[09:16:51] <ghrust> 13rust/06auto 142eccb1d 15Corey Richardson: manual: many fixes...
[09:16:51] <ghrust> 13rust/06auto 14b6d5daf 15Corey Richardson: etc: attempts at fixing editor highlighting for new attribute syntax
[09:16:53] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[09:25:41] *** Quits: intuxicated (intuxicate@437F2EC4.5F0D1BE1.BD3E1BB3.IP) (Client exited)
[09:31:32] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[09:40:42] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Quit: Leaving)
[09:48:40] <eddyb> ExprRepeat is [x, ..n] right?
[09:48:57] <cmr> yeah
[09:49:33] <cmr> you should totally, as you encounter them, add docs for the various variants and fields :)
[09:51:09] <eddyb> ExprRepeat actually has docs
[09:51:17] <eddyb> cmr: my style is to make things closer to obvious :P
[09:51:26] <huon> docs are nice
[09:51:37] <eddyb> ExprRepeat could be ExprVecRepeat
[09:51:39] <cmr> well the xample of `[x, ..n]` would be a nice addition
[09:51:48] <eddyb> cmr: ExprRepeat has docs though
[09:51:51] <cmr> ExprArrayRepeatInitializer
[09:52:01] <eddyb>  // A vector literal constructed from one repeated element.
[09:52:01] <cmr> eddyb: I know, I've had them open since you asked the question.
[09:52:05] <eddyb> heh
[09:55:01] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[09:57:34] <eddyb> cmr: hopefully DST will remove the need for Vstore and other such hacks
[10:01:12] <huon> cmr: do you think it makes sense to have the HTML docs in the source tarball? (seems weird to be)
[10:01:13] <huon> *me
[10:01:22] <cmr> not really.
[10:01:35] <cmr> wouldn't hurt if we already build to make the source tarball
[10:05:06] <huon> we don't
[10:05:30] <cmr> then I say don't
[10:06:01] <huon> i have the dependencies working for putting them in the linux binary tarball... which is nice
[10:06:09] <huon> I don't know how to get them there properly, though :/
[10:08:51] <huon> cmr: compiler docs?
[10:08:56] <cmr> what of them?
[10:09:01] * huon doesn't feel like making any hard decisions today
[10:09:06] <huon> should they be included?
[10:09:38] <cmr> why not
[10:10:04] <huon> maybe someone could be allergic to them?
[10:10:07] * huon includes them
[10:12:50] <eddyb> this was faster than usual. r? https://github.com/mozilla/rust/pull/13308
[10:13:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:13:51] <huon> eddyb: I think you need two more 0's on that diff stat :P
[10:14:18] <eddyb> let's not block on that
[10:14:24] <cmr> heh
[10:14:40] <eddyb> nmatsakis: does it really make sense to have Def in syntax::ast? it's the result of resolution :|
[10:15:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:15:44] <nmatsakis> eddyb: not especially
[10:16:07] <huon> wouldn't that require moving ast_map out of syntax too (not that this is a bad thing...)?
[10:16:31] <eddyb> ast_map?
[10:16:39] <eddyb> it doesn't use Def at all
[10:17:00] <huon> oh... erm. I'm thinking of the wrong thing.
[10:17:06] <eddyb> nothing does :P
[10:17:14] <eddyb> git grep -E '\bDef\b' src/libsyntax
[10:17:35] <eddyb> the two ast_util functions might as well be methods
[10:18:43] <eddyb> huon: ast_map *kinda* cares about DefId, because it's part of InlinedItem... though that stuff never felt good in libsyntax to begin with
[10:18:54] <huon> eddyb: https://github.com/mozilla/rust/pull/13308#discussion_r11289223 I take that that is a "yes, it's needed for now, because other things (&mut []) use the mutability"?
[10:19:02] <eddyb> huon: yupp
[10:19:16] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Quit: victorporof)
[10:19:17] <eddyb> good thing you pointed it out, I'm gonna fix those now
[10:19:52] <eddyb> if we move ast_map to rustc, I guess we can have InlinedItem and InlinedItemRef in metadata
[10:19:53] <cmr> eddyb: I urge you to use https://etherpad.mozilla.org/O7HIOOo25R
[10:19:56] <cmr> (and everyone else too)
[10:20:54] <eddyb> cmr: well, now I've stashed it there and I can go back to P :P
[10:22:03] <huon> https://github.com/mozilla/rust/wiki/Proposal-to-address-Dan%27s-bug ?
[10:22:18] <huon> such history
[10:22:24] <cmr> lol
[10:22:30] <cmr> "
[10:22:31] <cmr> Last edited by Niko Matsakis, 2 years ago
[10:22:34] <cmr> grr copy-pasta sucks
[10:23:14] <huon> https://github.com/mozilla/rust/wiki/Proposal-for-all-or-nothing-mut is like half of what we have now
[10:26:52] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[10:26:52] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/DaYY4A
[10:26:52] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[10:31:50] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[10:31:51] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/5mGAGQ
[10:31:51] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[10:31:54] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[10:31:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/R0LCbQ
[10:31:54] <ghrust> 13rust/06auto 14b2757a4 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[10:31:54] <ghrust> 13rust/06auto 14b42f94a 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[10:31:54] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[10:36:38] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[10:37:22] *** Quits: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP) (Connection timed out)
[10:37:35] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[10:37:55] *** Joins: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP)
[10:39:59] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:39:59] *** ChanServ sets mode: +o pnkfelix
[10:40:10] <eddyb> *sigh* laptop overheated
[10:40:30] <cmr> eddyb: what model laptop do you have?
[10:40:49] <eddyb> an ASUS. I may have linked the exact model page before, it's a bit hard to find
[10:40:54] <cmr> ah
[10:40:58] <cmr> I will trawl my history then
[10:41:01] <cmr> s/history/logs/
[10:41:14] <eddyb> I think the large box I had under it was blocking too much air flow
[10:41:37] <cmr> http://www.amazon.com/K52F-A1-15-6-Inch-Versatile-Entertainment-Laptop/dp/B00342VJ74/ref=sr_1_15?s=electronics&ie=UTF8&qid=1392627522&sr=1-15&keywords=asus+k52n+laptop
[10:41:42] <eddyb> not that one
[10:41:48] <eddyb> it has J and N IIRC
[10:42:14] <eddyb> now I have two tiny cardboard boxes (just slightly larger than cigarette packs) holding the entire thing in the air
[10:42:36] <eddyb> gotta love the power of orthogonality
[10:42:38] <cmr> https://www.asus.com/Notebooks_Ultrabooks/K52N/
[10:42:41] * cmr uses books
[10:42:44] <huon> eddyb: sit in a fridge ;P
[10:42:55] <cmr> I currently have "The Chemical Wedding of CHristian Rosenkreutz" under my laptop
[10:42:57] * huon rests his laptop on a block of ice
[10:43:05] <eddyb> huon: such penguin
[10:43:20] <eddyb> cmr: but that doesn't leave air under the laptop, does it?
[10:43:35] <eddyb> if only I had something to take a picture with, because it's cartoony
[10:43:58] <eddyb> the only reason it's standing like this is because of the vague L shape
[10:44:19] <cmr> eddyb: usually covers about 2/3 of it, but it doesn't block the vents.
[10:44:31] <eddyb> vents? I have the back open :P
[10:44:36] <cmr> O_o
[10:44:40] <eddyb> its tiny fan doesn't do shit
[10:45:07] <eddyb> I need this other large fan to blow air into it. and it's still at 54Â° C :S
[10:45:08] <huon> you're not a ... fan of it?
[10:45:22] <cmr> eugh
[10:45:35] * cmr nails huon to the wall with more nails
[10:45:52] <eddyb> okay, I can finally type without half the fan's power hitting my hands :D
[10:46:03] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:46:24] <eddyb> and as such, I can increase the power
[10:46:41] * huon doesn't understand the violence :'(
[10:47:01] <cmr> it's not out of hate, it's out of love. love of sanity and all that is right.
[10:47:10] <eddyb> hang on, is the fan's flow mostly hitting the desk? lol
[10:47:15] * eddyb uses more boxes
[10:47:24] <eddyb> I wish I had crates around
[10:48:37] <huon> eddyb: we have `box`
[10:48:42] <eddyb> derp, I see the problem
[10:49:04] <eddyb> the big fan doesn't have air behind it =))
[10:49:18] <eddyb> this is a problem. do I have to suspend it?
[10:51:14] <eddyb> I should just get a 120mm (caliber?) thing and put it in the right place
[10:52:06] * huon imagines eddyb shooting his laptop with a tank
[10:52:16] <eddyb> huon: Karl pls
[10:52:40] <kimundi> clearly you should just start juggling your computers components in mid air
[10:53:46] <eddyb> 47Â°C on maximum fan speed
[10:53:56] <eddyb> clearly inefficient
[10:54:13] <eddyb> cmr: guess what I have under my LCD, btw?
[10:54:24] <cmr> wires?
[10:54:28] <eddyb> Volume 3B
[10:54:37] <cmr> of knuth?
[10:54:46] <eddyb> funny thing is, I never needed those manuals when I was into OSDev
[10:55:03] <eddyb> (that's why I originally orderded them. for free)
[10:55:07] <eddyb> cmr: Intel ;)
[10:55:10] <cmr> oh
[11:00:23] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:01:52] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[11:01:53] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14b42f94a to 14f819c21: 02http://git.io/N3iJvQ
[11:01:53] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[11:07:49] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[11:10:47] <eddyb> nmatsakis: will your changes fix the ::<T> requirement in None::<T>.iter()?
[11:10:59] <eddyb> so I can just write None.iter() and have it infer the type?
[11:11:07] <nmatsakis> I don't know
[11:11:30] <eddyb> it seems to be the same issue that plagues ::collect<Vec<_>>()
[11:11:41] <eddyb> s/::collect/.collect::
[11:13:22] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[11:13:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:15:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:18:04] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[11:39:56] *** Quits: rajaram_ (rajaram@47769425.AE842F9B.81C3DAA1.IP) (Ping timeout)
[11:41:52] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[11:41:52] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14171fd6f to 14f819c21: 02http://git.io/N3iJvQ
[11:41:52] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[11:41:54] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[11:41:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/UOQ9uQ
[11:41:54] <ghrust> 13rust/06auto 147ce2630 15Daniel Micay: stop asking LLVM to null-terminate strings...
[11:41:54] <ghrust> 13rust/06auto 1437a9885 15bors: auto merge of #13291 : thestinger/rust/no_null, r=alexcrichton...
[11:41:55] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[11:46:52] *** Joins: angdev (angdev@47A383CC.49F1C6BA.413CBA8C.IP)
[12:01:14] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[12:01:56] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:02:58] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:05:02] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[12:10:23] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[12:10:55] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[12:12:56] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[12:13:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:15:20] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[12:15:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:21:26] *** Joins: lpy (lpy@207F51B2.F09091A8.1348A864.IP)
[12:37:32] *** Joins: eibwen (kvirc@moz-6F69D9D5.dip0.t-ipconnect.de)
[12:48:50] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[12:49:31] *** flaper87|afk is now known as flaper87
[12:56:49] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[12:56:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/UOQ9uQ
[12:56:49] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[12:57:28] *** Joins: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP)
[12:59:23] <bstrie> syntax::parse::parser::Parser.parse_crate_mod
[12:59:30] <bstrie> parse parser parser parse
[13:00:22] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:01:08] <cmr> yup
[13:01:50] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[13:01:56] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[13:01:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/LFgjwA
[13:01:56] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[13:06:34] *** Joins: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP)
[13:07:04] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[13:07:04] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/LFgjwA
[13:07:04] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[13:07:41] <flaper87> o/
[13:11:23] *** Quits: angdev (angdev@47A383CC.49F1C6BA.413CBA8C.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:13:01] *** Joins: angdev (angdev@B0D6B68D.344596AC.6B746DF2.IP)
[13:13:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:14:49] *** Parts: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (WeeChat 0.4.3)
[13:15:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:17:29] *** Quits: lpy (lpy@207F51B2.F09091A8.1348A864.IP) (Client exited)
[13:17:31] *** kimundi is now known as zz_kimundi
[13:18:34] <cmr> bstrie: per the norm I've been policing the phoronix release thread, it has been polite.
[13:24:23] <bstrie> cmr: wonderful
[13:24:28] <bstrie> link?
[13:24:42] <cmr> http://www.phoronix.com/forums/showthread.php?98507-Rust-Language-0-10-Released-With-Big-Improvements
[13:29:39] *** Quits: angdev (angdev@B0D6B68D.344596AC.6B746DF2.IP) (Ping timeout)
[13:32:41] *** Quits: rcxdude (rcxdude@moz-9D9E84CB.range86-130.btcentralplus.com) (Ping timeout)
[13:35:11] *** Joins: rcxdude (rcxdude@moz-24B1F019.range86-179.btcentralplus.com)
[13:43:14] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:48:23] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[13:53:00] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[13:53:16] *** vfetwnuncszu is now known as dcrewi
[13:58:37] *** Quits: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP) (Ping timeout)
[14:01:44] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:04:07] *** Joins: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP)
[14:13:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:15:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:20:52] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[14:21:54] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[14:21:55] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/SrpNOQ
[14:21:55] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[14:24:22] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:26:44] *** Quits: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:26:55] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[14:26:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/fGjrqw
[14:26:56] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[14:26:57] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[14:26:57] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/Vbb80g
[14:26:57] <ghrust> 13rust/06auto 143137cd5 15Christopher Kendell: Removed references to managed boxes/pointers from the tutorial text. Code...
[14:26:57] <ghrust> 13rust/06auto 14be07cab 15Christopher Kendell: Removed all references to managed closures.
[14:26:57] <ghrust> 13rust/06auto 1446e6194 15bors: auto merge of #13298 : ckendell/rust/remove_managed_pointers_from_tutorial, r=cmr...
[14:26:59] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[14:29:07] *** Quits: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP) (Ping timeout)
[14:31:02] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[14:32:22] <bstrie> pnkfelix: didn't you know? have you never watched a video of it? :P
[14:33:15] *** Quits: rcxdude (rcxdude@moz-24B1F019.range86-179.btcentralplus.com) (Ping timeout)
[14:35:10] *** Joins: edwardw (edwardw@13A2FE5.E4C8743.30C05AB6.IP)
[14:35:49] *** Joins: rcxdude (rcxdude@moz-24B1F019.range86-179.btcentralplus.com)
[14:43:08] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[14:47:19] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:52:14] *** zz_kimundi is now known as kimundi
[14:54:15] *** Quits: Nekit1234007_ (Nekit12340@BA29A3B9.E3D471A2.4707F662.IP) (Ping timeout)
[14:59:03] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[15:03:31] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[15:08:39] *** Joins: Nekit1234007_ (Nekit12340@moz-49BE8E9E.dyn.broadband.iskratelecom.ru)
[15:13:23] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:15:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:17:52] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[15:20:34] <pnkfelix> bstrie: nah I tend to lag when it comes to stuff like this
[15:20:46] <pnkfelix> bstrie: I tried out this "World of Warcraft" thing last week ...
[15:21:16] <pnkfelix> bstrie: (and after that I picked up this "Magic: The Gathering" thing)  j/k
[15:22:58] <bstrie> pnkfelix: you're too out of touch to even know what things to reference in order to deliberately give the impression that you're out of touch :)
[15:23:26] <pnkfelix> bstrie: what, has MtG experienced a resurgence or something?
[15:23:44] <bstrie> to a degree, yeah
[15:24:42] <bstrie> deckbuilding games as a genre are sort of coming back in a big way
[15:31:30] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:31:53] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[15:36:49] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[15:36:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Vbb80g
[15:36:50] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[15:39:51] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:41:52] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[15:41:52] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/mnFvFQ
[15:41:52] <ghrust> 13rust/06auto 147bcfe2e 15Erick Tryzelaar: std: Remove `RefCell::get()`...
[15:41:52] <ghrust> 13rust/06auto 143961957 15Erick Tryzelaar: std: Remove `RefCell::set()`
[15:41:53] <ghrust> 13rust/06auto 141b6997d 15Erick Tryzelaar: test: avoid infinite loop in out-of-stack.rs...
[15:41:55] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[15:44:07] *** Quits: edwardw (edwardw@13A2FE5.E4C8743.30C05AB6.IP) (Ping timeout)
[15:45:11] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[15:47:16] <eddyb> cmr: gaaah I don't have enough time
[15:47:48] <eddyb> cmr: mind graphing https://github.com/eddyb/rust/tree/ast-ptr with and without --cfg syntax_ptr_in_place?
[15:48:11] <eddyb> cmr: you will have to fix librustc errors yourself (syntax::ast::P -> syntax::ptr::P)
[15:48:15] <eddyb> cmr: I would be very thankful :D
[15:50:59] *** Joins: edwardw (edwardw@42B94DF.16F55560.50B134B9.IP)
[15:57:18] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[15:58:17] <eddyb> cmr: oh, wait. lol. DST just made me look like a fool
[15:59:42] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[16:13:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:15:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:22:31] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[16:23:58] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[16:28:59] <doener> on https://etherpad.mozilla.org/O7HIOOo25R, what is meant by "cfg" in "easier once pnkfelix is done with cfg"?
[16:29:52] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[16:30:16] <eddyb> doener: control flow graph <3
[16:30:16] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:30:16] *** ChanServ sets mode: +o pnkfelix
[16:30:24] <eddyb> though that should be CFG not cfg
[16:30:30] <eddyb> doener: fixed it :P
[16:31:16] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[16:31:16] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 147a03584 to 14f2f9c6b: 02http://git.io/k471pw
[16:31:16] <ghrust> 13rust/06try 14f9b7891 15Alex Crichton: Register new snapshots
[16:31:16] <ghrust> 13rust/06try 14f2f9c6b 15Alex Crichton: rustc: Pass --enable-long-section-names to gcc...
[16:31:17] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[16:31:42] <doener> eddyb: do you know if there's a ticket that describes that? i.e. what do we get?
[16:31:45] <eddyb> oh wow I really need to make grep stop buffering stuff
[16:31:56] <eddyb> doener: well, there's an implementation already, maybe it has docs
[16:32:05] <eddyb> doener: but it's unused atm
[16:32:18] <eddyb> the goal is to make it more powerful and integrate it into typeck, borrowck and trans
[16:32:20] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[16:32:20] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14f2f9c6b to 14a46a133: 02http://git.io/k471pw
[16:32:20] <ghrust> 13rust/06try 14308c035 15Corey Richardson: Remove libc from std...
[16:32:20] <ghrust> 13rust/06try 1406ad5eb 15Corey Richardson: Change how the readdir/opendir hack works
[16:32:20] <ghrust> 13rust/06try 140459ee7 15Corey Richardson: Fix fallout from std::libc separation
[16:32:22] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[16:32:27] <doener> the latter is probably why I never saw it :-p
[16:32:37] <eddyb> doener: all of those use the AST right now
[16:32:48] <eddyb> or something that traverses the AST (like dataflow in borrowck)
[16:33:01] <eddyb> but we could have typeck generating a typed CFG
[16:33:22] <eddyb> allowing us to express complex operations like auto-deref without stashing stuff in side tables
[16:34:04] <eddyb> you can also technically consume the AST as you go
[16:34:18] <eddyb> if it's on the same heap, you might be able to reuse the AST space for the CFG :D
[16:34:35] <eddyb> (P enables patterns like this)
[16:34:52] <doener> P?
[16:36:14] <eddyb> doener: the fancy custom owned smart pointer for the AST
[16:36:35] <doener> ah
[16:43:11] <edwardw> wow, liblibc. must be good for freestanding stuff
[16:48:03] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[16:49:16] <eddyb> cmr, huon, nmatsakis: https://github.com/mozilla/rust/pull/13316 dump all your comments. will get to a nice, long description tomorrow
[16:49:27] <eddyb> (I should've written down my thoughts when I've had the chance)
[16:50:27] <eddyb> (I hope travis picks it up soon)
[16:51:50] * eddyb is all panicked deadline mode
[16:52:27] <doener> eddyb: why is that?
[16:52:35] <eddyb> because bye
[16:52:53] <eddyb> doener: I wanted to get that PR out before I left for almost a day
[16:53:02] <doener> ah, ok
[16:53:05] <doener> see you then :-)
[16:53:56] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[16:54:34] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[16:57:01] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[16:57:01] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/mnFvFQ
[16:57:01] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[16:59:52] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[17:01:58] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[17:01:58] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Fk_5lA
[17:01:58] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[17:01:58] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[17:01:58] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[17:01:58] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/1YRnsA
[17:01:58] <ghrust> 13rust/06auto 1402c9c94 15Kevin Cantu: [std::cmp] add missing docs and provide an example
[17:01:59] <ghrust> 13rust/06auto 142b27a5a 15bors: auto merge of #12956 : killerswan/rust/docs, r=alexcrichton
[17:01:59] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[17:03:58] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:04:47] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:09:17] *** Quits: japaric_ (japaric@F0EDDE6E.BD5E6C4A.766D0B82.IP) (Ping timeout)
[17:09:24] *** Joins: japaric_ (japaric@1E5F324A.FD3D1332.95AFB88D.IP)
[17:10:13] *** Quits: Kxepal (Miranda@moz-73B536A.pppoe.mtu-net.ru) (Ping timeout)
[17:13:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:14:34] *** Joins: Kxepal (Miranda@moz-78168BB9.pppoe.mtu-net.ru)
[17:15:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:19:19] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:19:47] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[17:20:53] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[17:35:07] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:44:03] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Quit: victorporof)
[17:45:15] *** Quits: Nekit1234007_ (Nekit12340@moz-49BE8E9E.dyn.broadband.iskratelecom.ru) (Ping timeout)
[17:46:45] *** Quits: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[17:46:48] *** Joins: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net)
[17:54:25] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[17:55:45] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[18:00:12] <eddyb> cmr: haha, I failed tidy
[18:00:14] *** Joins: Nekit1234007_ (Nekit12340@moz-49BE8E9E.dyn.broadband.iskratelecom.ru)
[18:00:22] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[18:01:33] <bstrie> pnkfelix: btw, I hear that you want to improve the rust-lang.org code example. that's something I'm interested in as well
[18:02:18] *** Joins: andrew-d_w (andrew-d_w@834514BB.7A62F771.CC0301A2.IP)
[18:02:24] *** Quits: andrew-d_w (andrew-d_w@834514BB.7A62F771.CC0301A2.IP) (Input/output error)
[18:02:46] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:04:36] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[18:10:21] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[18:11:57] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:11:57] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:12:27] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:12:52] *** Quits: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP) (Ping timeout)
[18:14:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:16:59] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[18:16:59] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/1YRnsA
[18:16:59] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[18:20:48] <nmatsakis> nifty, finally got time to (mostly, mostly) finish up prototyped method/trait resolution algorithm code
[18:21:01] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[18:21:10] <acrichto> nmatsakis: \o/
[18:21:27] <nmatsakis> now I guess I just have to test it on some of the weird corner cases...then hopefully right up that damn RFC... ;)
[18:21:41] <flaper87> nmatsakis: yay!
[18:21:55] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[18:21:55] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/6n2Tag
[18:21:55] <ghrust> 13rust/06auto 145bc14a0 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[18:21:55] <ghrust> 13rust/06auto 145ac1369 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[18:21:55] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[18:21:56] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[18:21:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Gbz_xQ
[18:21:56] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[18:22:01] <nmatsakis> it does handle the Deref vs DerefMut scenario though, which is good in and of itself...
[18:23:10] <flaper87> this may be a stupid question but, how does the test in this PR tests the fix? https://github.com/mozilla/rust/pull/13271/files 
[18:24:47] <nmatsakis> flaper87: it should almost certainly make use of the value, not just declare an uncalled fn
[18:24:58] <nmatsakis> flaper87: run-pass tests that don't assert anything are usually a red flag for me, though it can be legit
[18:26:04] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[18:26:50] <nmatsakis> flaper87: another good thing to try is to just test if the tests fail on your local branch, WITHOUT their changes :)
[18:27:03] <flaper87> nmatsakis: yeah, same here. I preferred to ask in case I was not considering some black magic thing about alignments that made that test case valid. But it looks incomplete to me as-is.
[18:27:07] <flaper87> nmatsakis: good point
[18:28:44] <nmatsakis> flaper87: it's surprisingly easy to write a test that would pass even w/o your fix...
[18:29:16] * flaper87 loves `curl -s http://www.rust-lang.org/rustup.sh | sudo sh`
[18:29:24] <flaper87> nmatsakis: oh, I think I've done that myself :P
[18:29:42] <flaper87> but I've managed not to submit it :P
[18:33:48] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[18:33:55] <SimonSapin> std::local_data seems broken. https://pastebin.mozilla.org/4760483 Is this a known bug?
[18:34:25] <SimonSapin> using a non-zero-size type instead of () seems to fix it
[18:34:27] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[18:35:19] <strcat> SimonSapin: std::local_data pretends addresses are significant, but since rust has zero-size types that's not necessarily true
[18:35:24] <strcat> it's a known design flaw
[18:35:29] <strcat> it should use something like type_id instead
[18:35:38] <strcat> struct Foo; and then type_id::<Foo>
[18:36:09] <acrichto> SimonSapin: what version of the compiler are you running?
[18:36:14] <acrichto> that looks like Some(~()) == None
[18:36:19] <acrichto> which was fixed very recently
[18:36:35] * strcat would guess it's because &() returns an arbitrary address
[18:36:37] <strcat> maybe not
[18:36:37] <flaper87> it works with nightly, FWIW
[18:36:42] <strcat> ah nvm then
[18:36:51] <strcat> two &() addresses can overlap
[18:37:16] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:37:19] <acrichto> zomg nightlies
[18:37:28] <acrichto> took me all of 30s to update
[18:37:34] <acrichto> SimonSapin: yes, that bug has been fixed on master
[18:37:36] <flaper87> https://pastebin.mozilla.org/4760484
[18:37:38] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[18:37:41] <acrichto> not that it was known before...
[18:37:43] * strcat has been using nightlies since 0.4 ;p
[18:38:01] <strcat> rusti: let x = (); let y = (); (&x as *(), &y as *())
[18:38:01] -rusti- (0x7fff75756410, 0x7fff75756410)
[18:38:06] <strcat> same address
[18:38:14] <strcat> although let me turn off optimization
[18:38:21] <strcat> rusti: let x = (); let y = (); (&x as *(), &y as *())
[18:38:22] -rusti- (0x7fffdaaea040, 0x7fffdaaea038)
[18:38:29] <strcat> heh
[18:38:40] <strcat> *zero* size types use 2 bytes without optimization
[18:38:53] * strcat wonders why
[18:39:01] *** Quits: japaric_ (japaric@1E5F324A.FD3D1332.95AFB88D.IP) (Ping timeout)
[18:40:04] <strcat> anyway I'll submit a PR changing it to type_id I guess, so we can make the addresses of statics insignificant
[18:41:19] *** Joins: japaric_ (japaric@E527F424.ABE6A7FD.E5B504CC.IP)
[18:45:04] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[18:45:28] <jdm> eddyb: your ptr::P changes are pretty impressive
[18:51:04] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[18:51:25] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[18:52:15] <strcat> acrichto: hm, I guess I should submit a PR including the pretty printer for slices in src/etc/
[18:52:28] <strcat> it's weird stuff
[18:55:09] * strcat wonders if `static foo: () = ()` really has a meaningful address at all
[18:55:40] <strcat> and by 'meaningful' I mean that the heap will never overlap with it, even on super weird embedded devices
[18:56:56] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[18:56:56] <ghrust> [13rust] 15bors 04force-pushed 06auto from 145ac1369 to 142b27a5a: 02http://git.io/N3iJvQ
[18:56:56] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[18:56:58] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[18:56:58] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/wOsMGw
[18:56:59] <ghrust> 13rust/06auto 14a0a7693 15Ivan Petkov: rustdoc: Fix reporting of ignored tests...
[18:56:59] <ghrust> 13rust/06auto 14e5f1b9f 15bors: auto merge of #13272 : ipetkov/rust/rustdoc-ignored-tests, r=alexcrichton...
[18:56:59] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[18:57:04] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:57:25] <Eridius> strcat: how does rust deal today with owned pointers for zero-size types?
[18:57:50] <strcat> Eridius: well I fixed it
[18:58:04] <strcat> Eridius: it returns a pointer to a global for a zero-size allocation
[18:58:16] <strcat> and I taught the compiler to never call exchange_free for zero-size types
[18:58:21] <Eridius> to the same global for all? or one global per type? or what?
[18:58:25] <strcat> Eridius: for all
[18:58:32] <strcat> it's an arbitrary value
[18:58:35] <strcat> it simply never frees it
[18:58:39] <strcat> guaranteed
[18:58:50] <Eridius> hmm. Can you not do the same thing for zero-size statics, or is the global created at runtime?
[18:58:57] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[18:59:05] <strcat> Eridius: well I'm just wondering what LLVM does
[18:59:07] * Eridius is thinking this global could just effectively be an implicit static
[18:59:13] <strcat> I don't know that there's necessarily a problem
[18:59:16] <Eridius> sure
[18:59:26] <strcat> it could just be a non-zero-size global in this case
[18:59:29] <strcat> in general it doesn't matter
[18:59:38] <Eridius> I could certainly imagine it simply upgrading the static to a one-byte size in order to give it a valid address
[19:00:01] <Eridius> rusti: static a: () = (); static b: () = (); println!("{} {}", &a as *(), &b as *())
[19:00:02] -rusti- 0x4dd180 0x4dd180
[19:00:02] -rusti- ()
[19:00:06] <Eridius> hmm, same value
[19:00:42] <Eridius> rusti: static a: () = (); static b: ((),()) = ((),()); println!("{} {}", &a as (), &b as *((),()))
[19:00:45] -rusti- pastebinned 16 lines of output: http://ix.io/bu9
[19:00:57] <Eridius> rusti: static a: () = (); static b: ((),()) = ((),()); println!("{} {}", &a as *(), &b as *((),()))
[19:00:58] -rusti- 0x4dd450 0x4dd450
[19:00:58] -rusti- ()
[19:01:09] <Eridius> huh. same value again. also interesting
[19:01:32] <strcat> Eridius: which is fine, I just don't want it to be possible for it to overlap with memory used by the heap
[19:01:44] <strcat> I guess it's a problem for some allocators
[19:01:48] <strcat> hm
[19:01:53] <strcat> I won't worry about it
[19:02:22] <Eridius> if LLVM is giving it an address, I would hope it's an address in whatever the hell the read-only segment is called that statics are stored in
[19:02:50] <Eridius> rusti: static a: () = (); static b: u8 = 1u8; println!("{} {}", &a as *(), &b as *u8)
[19:02:50] -rusti- 0x4dd450 0x4dd450
[19:02:51] -rusti- ()
[19:02:54] <Eridius> wat.
[19:03:20] <Eridius> rusti: static a: u8 = 1u8; static b: () = (); static c: u8 = 2u8; println!("{} {} {}", a as *u8, b as *(), c as *u8)
[19:03:21] <strcat> Eridius: an address of a zero-size type is normally the same as the thing before or after it
[19:03:23] -rusti- pastebinned 9 lines of output: http://ix.io/bua
[19:03:33] <strcat> but I have no idea if that's any kind of guarantee
[19:03:39] <Eridius> rusti: static a: u8 = 1u8; static b: () = (); static c: u8 = 2u8; println!("{} {} {}", &a as *u8, &b as *(), &c as *u8)
[19:03:40] -rusti- 0x4dd4bf 0x4dd4c0 0x4dd4c0
[19:03:40] -rusti- ()
[19:04:01] <Eridius> strcat: ok that works. But yeah, no idea if LLVM has any guarantees about this
[19:04:24] <strcat> it will break loudly if it breaks
[19:04:36] <Eridius> although now I'm mildly concerned that statics aren't guaranteed unique addresses
[19:04:47] <strcat> Eridius: they aren't due to zero-size types
[19:04:55] <strcat> Eridius: and the decision was made to remove the guarantee completely
[19:04:59] <strcat> and just use type_id if you need something like that
[19:05:12] <Eridius> sure, but LLVM could treat them as e.g. u8 for static allocation purposes
[19:05:14] <strcat> because without the guarantee, we can mark them all unnamed_addr and LLVM will merge them
[19:05:21] <SimonSapin> Iâ€™m using whatever Rust version is in Servoâ€™s submodule on master. But Iâ€™ll remember to test on nightly, sorry about that
[19:05:27] <Eridius> oh? I thought we had to opt in to statics not needing unique addresses
[19:05:31] <Eridius> I thought there was a whole attribute for it
[19:05:32] <strcat> Eridius: we do now
[19:05:36] <strcat> there was a decision made to change it
[19:05:37] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[19:05:42] <strcat> for constants at least
[19:05:47] <Eridius> ok, so the attribute will be flipped to say "this needs a unique address"?
[19:05:50] <strcat> I still have to make the case that we shouldn't make any such guarantee at all
[19:05:57] <strcat> Eridius: I don't really think we need an attribute
[19:06:05] <strcat> struct Foo; type_id::<Foo>() is unique
[19:06:11] <Eridius> strcat: I thought TLS needed to guarantee uniqueness
[19:06:16] <strcat> Eridius: it can use type_id
[19:06:24] <Eridius> I also thought type_id didn't guarantee the same id for the same type in all use cases
[19:06:37] <strcat> Eridius: due to lifetimes
[19:06:40] <strcat> which in this case doesn't matter
[19:06:48] <strcat> Eridius: instead of a global address, it can declare a unit type and take the type_id
[19:06:57] <Eridius> lifetimes? you mean Foo<'a> and Foo<'b> are distinct type ids, but a type without a lifetime has no issue?
[19:07:13] <strcat> Eridius: I mean &'a int and &'b int have the same type_id
[19:07:20] <strcat> because trans treats all lifetimes as 'static
[19:07:26] <Eridius> oh that's the opposite of what I said
[19:07:44] <Eridius> I actually assumed lifetimes were irreelvant
[19:07:46] <Eridius> *irrelevant
[19:07:57] <strcat> for example fn foo<'a, T>(...) -> ... { ... }
[19:08:12] <strcat> you get 1 copy of the code for example type T, but the lifetime is always treated as 'static
[19:08:19] <strcat> so type_id doesn't really work completely
[19:08:31] <Eridius> I would swear that std::any::Any::get_type_id() used to document that it wasn't actually guaranteed to produce the same type id for the same type in all cases, but that this wasn't an issue in practice, or somesuch
[19:09:04] <SimonSapin> Is this channel meant to include non-compiler libs distributed in mozilla/rust? (The topic says "compiler".)
[19:09:12] <Eridius> strcat: again, I just assumed that lifetimes didn't affect type_id. Foo<'a> and Foo<'b> are fundamentally the same type, the lifetime is just for regions
[19:09:29] <strcat> Eridius: they aren't actually the same type though
[19:09:31] <Eridius> SimonSapin: this channel is primarily meant for discussion about anything to do with the development of Rust itself
[19:09:36] <strcat> Eridius: they're the same type in trans ;)
[19:09:48] <Eridius> strcat: in what sense? They don't produce separate monomorphizations of functions
[19:09:56] <strcat> Eridius: at a high level, they're different types
[19:10:01] <strcat> at a low-level (trans), they aren't
[19:10:12] <strcat> it means type_id is a leaky abstraction
[19:10:24] <strcat> and the low-level semantics won't be changed to support silly reflection nonsense ;)
[19:11:00] <Eridius> strcat: I get what you're saying, what I'm saying is that, intuitively, at a high level I actually consider Foo<'a> and Foo<'b> to be the same type
[19:11:03] <Eridius> same type, different region
[19:14:05] <Eridius> on an unrelated note, _ for type parameters is supposed to work now, right? (e.g. .collect::<~[_]>())
[19:14:22] <strcat> Eridius: well, it parses
[19:14:24] <strcat> it doesn't work
[19:14:27] <strcat> sometimes it works
[19:15:24] *** Joins: gimpf (gimpf@moz-64945CFF.adsl.highway.telekom.at)
[19:15:40] <Eridius> :/ I hope someone is already signed up to implement it
[19:28:32] <strcat> acrichto: what do you think about local_data using a type as the key instead of an address?
[19:28:33] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:28:33] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:28:51] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[19:29:07] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[19:29:39] <acrichto> I think it would work now 
[19:29:43] <kimundi> Eridius: Apparently nmatsakis is working on some trait method resolution changes that might fix the problems partial inference has.
[19:29:48] <acrichto> strcat: wait no
[19:29:56] <acrichto> you should be able to have two keys of the same type
[19:30:08] <strcat> acrichto: by type I mean declare a type
[19:30:12] <strcat> and then key based on type_id
[19:30:23] <acrichto> no, you should be able to have two slots of type int
[19:30:27] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[19:30:31] <strcat> that's not what I'm saying
[19:30:38] <acrichto> that's what you can't do if you use type_id
[19:30:47] <strcat> and then key based on type_id        static $name: ::std::local_data::Key<$ty> = &::std::local_data::Key;
[19:30:48] <strcat> er
[19:30:50] <strcat>         static $name: ::std::local_data::Key<$ty> = &::std::local_data::Key;
[19:30:52] <strcat> atm it does that
[19:30:55] <strcat> I'm saying it should do
[19:30:57] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[19:31:00] <strcat> struct $name;
[19:31:03] <nmatsakis> acrichto: are you sure you should be able to declare two keys of the same type? I've thought it might be a nice API if you couldn't
[19:31:06] <strcat> and then use type_id on that type
[19:31:20] * nmatsakis intrudes where he doesn't belong
[19:31:25] <nmatsakis> I don't actually care about this, so never mind ;)
[19:31:39] <acrichto> perhaps, seems a little odd though
[19:31:44] <strcat> acrichto: the change will be that it puts a type in your namespace instead of a global
[19:31:49] <nmatsakis> I just thought it'd be neat because you'd just declare a newtype and voila
[19:31:54] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[19:32:12] * nmatsakis back to my trait res prototype
[19:32:50] <strcat> acrichto: it's a nice way of not ever requiring global addresses though
[19:32:54] <strcat> and I mean not *ever* ;p
[19:36:02] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[19:37:29] <Eridius> It actually seems kind of elegant to me
[19:39:14] <eddyb> nmatsakis: :D:D:D
[19:39:18] <eddyb> jdm: oh?
[19:41:00] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:43:16] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[19:45:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:46:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:49:44] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[19:50:03] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[19:54:17] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[19:56:37] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[20:01:27] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[20:03:31] * nmatsakis back to my trait res prototype
[20:03:34] <nmatsakis> oops
[20:03:35] <nmatsakis> sorry
[20:04:46] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[20:07:05] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[20:07:05] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/wOsMGw
[20:07:05] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[20:11:57] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[20:11:57] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/awDwNQ
[20:11:57] <ghrust> 13rust/06auto 140af512b 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[20:11:58] <ghrust> 13rust/06auto 1415acf88 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[20:11:58] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[20:13:21] <acrichto> nmatsakis: oh I was curious, I was talking with pcwalton yesterday, but why is the drop flag attached to actual allocations rather than sitting next to the relevant local on the stack?
[20:15:13] <Eridius> acrichto: I always assumed it's because that's easier to implement
[20:23:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:25:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:32:33] <SimonSapin> Do we archive older nightlies?
[20:35:20] <acrichto> SimonSapin: no
[20:35:58] <SimonSapin> acrichto: was this decided against, or has it just not happened yet?
[20:36:16] <acrichto> decided against, it'd take up way too much space than its worth
[20:36:25] <SimonSapin> fair enough
[20:36:25] <acrichto> (or at least so we think(
[20:40:06] <mcpherrin> It may be useful for, say, bisecting a bug, but that's a fairly niche use case
[20:40:23] <acrichto> that's what we have cmr's builds for :P
[20:41:53] <kimundi> So the decision is that cmr should pay for the harddrives, and not mozilla? ;)
[20:42:51] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[20:42:51] *** ChanServ sets mode: +o tjc
[20:42:56] <mcpherrin> I suspect they'd dedup fairly well
[20:44:32] <acrichto> r? https://github.com/mozilla/rust/pull/13321
[20:45:55] *** Quits: edwardw (edwardw@42B94DF.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:46:41] <Eridius> acrichto: you've changed the .bc.deflate file to be in TMPDIR (I didn't actually realize something like this was written out). I get that. But why did you delete the line to remove()?
[20:46:49] <Eridius> there's no excuse for leaving files in TMPDIR that aren't needed anymore
[20:46:59] <Eridius> or does remove() not do what I think it does
[20:47:02] <acrichto> tmpdir will get cleaned up in the destructor
[20:47:04] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[20:47:04] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1415acf88 to 14e5f1b9f: 02http://git.io/N3iJvQ
[20:47:04] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[20:47:06] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[20:47:06] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/JdyA4A
[20:47:06] <ghrust> 13rust/06auto 14ba9c51d 15Falco Hirschenberger: Update README.md...
[20:47:06] <ghrust> 13rust/06auto 1473b0186 15TimothÃ©e Ravier: Fix inner attribute syntax from `#[foo];` to `#![foo]`...
[20:47:07] <ghrust> 13rust/06auto 14b236f45 15Huon Wilson: Add stdlib docs to the Linux binary tarball....
[20:47:09] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[20:47:10] <acrichto> it's an io::TempDir
[20:47:18] <Eridius> acrichto: oh, this isn't TMPDIR but rather a subdir?
[20:47:26] <acrichto> no
[20:47:29] <acrichto> not TMPDIR
[20:47:40] <Eridius> ok I see I hadn't seen io::TempDir before
[20:47:55] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:47:55] <acrichto> used to be in libextra
[20:47:57] <Eridius> you're using .new_in() to create a temporary dir locally?
[20:48:26] <Eridius> well I guess it doesn't matter, wherever it is it will be deleted
[20:48:36] <acrichto> just new
[20:48:42] <acrichto> https://github.com/mozilla/rust/pull/13321/files#diff-1f0a1ddb1f3c380e4fa9ac764564c306L913
[20:48:48] <Eridius> oh so it is in TEMPDIR then :P
[20:49:47] <Eridius> incidentally, I have to wonder if we should provide functionality for a volume-specific tmpdir
[20:50:24] <Eridius> because I could imagine scenarios where e.g. you're keeping code on an encrypted disk image and you don't want the build products to be put elsewhere
[20:50:37] <Eridius> or you're compiling inside of a ramdisk and don't want the build products to hit your spinning platter
[20:51:53] <Eridius> OS X has functions to get a volume-specific temporary folder. I don't know about other platforms
[20:52:00] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[20:52:00] <ghrust> [13rust] 15bors pushed 11 new commits to 06auto: 02http://git.io/V9lO6A
[20:52:00] <ghrust> 13rust/06auto 14ba9c51d 15Falco Hirschenberger: Update README.md...
[20:52:00] <ghrust> 13rust/06auto 1473b0186 15TimothÃ©e Ravier: Fix inner attribute syntax from `#[foo];` to `#![foo]`...
[20:52:00] <ghrust> 13rust/06auto 14b236f45 15Huon Wilson: Add stdlib docs to the Linux binary tarball....
[20:52:02] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[20:52:03] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[20:52:03] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14da0fd39 to 14e5f1b9f: 02http://git.io/N3iJvQ
[20:52:03] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[20:52:20] <Eridius> (which, incidentally, is what Cocoa uses for atomic writes, because the file has to be on the same volume for the move to be atomic0
[20:52:51] <Eridius> Of course, the flip side of this is if I'm compiling source from a network volume I really don't want the build products to be on the network volume
[20:54:23] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[20:54:23] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14def59c6 to 14e5f1b9f: 02http://git.io/N3iJvQ
[20:54:23] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[21:09:49] <jdm> how can I control whether a test is spawned in a green task or a native one?
[21:09:58] <jdm> the switch to native tasks has broken rust-mozjs tests
[21:10:55] <strcat> acrichto: btw I think there's a good way to do the freestanding thing
[21:10:57] <acrichto> jdm: right now you can't do it on a per-test basis unless you start up a green task pool in each test
[21:11:04] <strcat> acrichto: we would have a libheap and libfail
[21:11:11] <acrichto> jdm: otherwise, you may be interested in https://github.com/mozilla/rust/blob/master/src/libstd/lib.rs#L83-L91
[21:11:25] *** Quits: Nekit1234007_ (Nekit12340@moz-49BE8E9E.dyn.broadband.iskratelecom.ru) (Ping timeout)
[21:11:35] <jdm> acrichto: hmm, so spawning a green task inside the test should work, yes?
[21:11:38] <strcat> but the other stuff would be done with say cfg(float) + a lint to make sure no one can do cfg(not(float))
[21:11:44] <strcat> so the various profiles would be strict subsets
[21:11:50] <strcat> and wouldn't need extra testing
[21:12:00] <acrichto> jdm: yeah, but you'd have to managed the green task pool manually (I'd recommend the hack for now)
[21:12:06] <jdm> fun, thanks
[21:12:16] <strcat> libheap would define a default allocator, libfail would define failure
[21:12:19] <strcat> either as unwinding or abort
[21:12:24] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:12:24] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:12:43] *** Quits: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[21:12:49] <acrichto> strcat: seems reasonable, I'm a little worried about failure/Option though
[21:12:56] <acrichto> Option should be at the innermost library
[21:13:00] <acrichto> but unwrap() needs to be on Option
[21:13:06] <Eridius> strcat: if you're  going to add a lint to prevent cfg(not(float)), maybe it should just not be cfg() at all but instead be a different attribute?
[21:13:09] <strcat> acrichto: well with this proposal, you can build more than one libstd
[21:13:13] <strcat> acrichto: and include them in the same program
[21:13:21] <strcat> acrichto: for example, in early boot you can use a libstd without allocation
[21:13:26] <strcat> and then later on you can use all of libstd
[21:13:36] <acrichto> ?
[21:13:41] <acrichto> how does that not define option twice?
[21:14:02] <strcat> acrichto: it would define it twice
[21:14:09] <acrichto> seems bad
[21:14:14] *** Joins: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net)
[21:14:14] <acrichto> b/c the types are different
[21:14:17] <strcat> yeah, I know
[21:14:24] <strcat> but you'd only use the minimal libstd to implement libheap
[21:14:28] <strcat> it would barely have anything
[21:14:37] <acrichto> the minimal libstd wants a lot of things though
[21:14:44] <acrichto> Result/Option/slices/etc
[21:14:48] <acrichto> string formatting
[21:14:50] <acrichto> that's a huge one
[21:14:57] <acrichto> it *really* wants write!()
[21:15:07] <acrichto> so here's one idea that I had
[21:15:09] <strcat> I don't see another way to let people define libheap with libstd available though
[21:15:18] <acrichto> the core library can *use* failure, but it doesn't define it
[21:15:18] <strcat> i.e. define the default allocator
[21:15:27] <acrichto> you must then link it with something that defines failure
[21:15:32] <acrichto> and the failure function is just an undefined symbol
[21:15:33] <jdm> acrichto: what to do if servo's rustuv doesn't appear to have an eventloop module?
[21:15:37] <acrichto> the core library can only be built as an rlib
[21:15:55] <acrichto> jdm: you have a differetn version of rustuv?
[21:16:11] <acrichto> jdm: the rustuv update to have a top-level 'fn event_loop()' was pretty trivial (if you're maintaining separate patches)
[21:16:15] <jdm> dunno, but linking the crate and using rustuv::event_loop gives me a resolve error
[21:16:20] <strcat> acrichto: I think it's important that you have stuff like containers available without stuff depending on an OS available though
[21:16:27] <acrichto> jdm: you updated libgreen without updating libstd
[21:16:30] <strcat> HashMap<K, V>, etc.
[21:16:40] <strcat> and libcollections depends on libstd
[21:16:49] <acrichto> strcat: I slightly disagree, all our containers assume allocation succeeds, which is inappropriate for many use cases
[21:17:01] <jdm> acrichto: I'm not sure what that means. This is part of a rust upgrade; we're not cherry-picking anything.
[21:17:05] <strcat> acrichto: they are still useful without an OS available
[21:17:25] <strcat> there are environments without files
[21:17:28] <acrichto> jdm: oh sorry, that was meant to be a question, so you're updating all of rust as a whole? rustuv should be present...
[21:17:29] <strcat> where containers are still useful
[21:17:34] <acrichto> jdm: unless 'extern crate rustuv' is missing
[21:17:54] <acrichto> strcat: that's irrelevant to assuming that allocation succeeds
[21:18:04] <acrichto> strcat: yes, libcollections should only depend on the "innermost libstd"
[21:18:04] <jdm> acrichto: nope, I have that included.
[21:18:08] <acrichto> with types like option/result
[21:18:13] <acrichto> jdm: hm, paste/
[21:18:14] <acrichto> ?
[21:19:11] <jdm> acrichto: https://pastebin.mozilla.org/4760935
[21:21:01] <acrichto> jdm: one thing is that __test only appears at the crate root
[21:21:18] <acrichto> looks like rust.rs isn't the crate root, so you'll need ::__test::main
[21:21:26] <acrichto> also, try using ::rustuv::event_loop
[21:22:06] <jdm> that fixed the __test one, but not rustuv
[21:22:14] <jdm> maybe I'll just move this to the root
[21:22:38] <acrichto> what version of rustc are you using
[21:23:18] <jdm> rustc 0.10-pre (aa39d75 2014-03-23 15:32:18 +0100)
[21:24:16] <acrichto> jdm: looks like you're using an older version of libgreen that doesn't take the event_loop argument
[21:24:26] <acrichto> jdm: try just removing the third argument (rustuv::event_loop) completely
[21:25:46] *** Joins: Nekit1234007_ (Nekit12340@6B5BB457.8C6C029.4707F662.IP)
[21:26:45] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[21:26:45] <ghrust> [13rust] 15bors pushed 11 new commits to 06auto: 02http://git.io/MmZbHA
[21:26:45] <ghrust> 13rust/06auto 14ba9c51d 15Falco Hirschenberger: Update README.md...
[21:26:45] <ghrust> 13rust/06auto 1473b0186 15TimothÃ©e Ravier: Fix inner attribute syntax from `#[foo];` to `#![foo]`...
[21:26:45] <ghrust> 13rust/06auto 14b236f45 15Huon Wilson: Add stdlib docs to the Linux binary tarball....
[21:26:47] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[21:27:09] <jdm> acrichto: thanks!
[21:32:17] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:43:06] <acrichto> oh man, the queue is almost under 40 PRs in size
[21:43:13] <acrichto> for the first time in months
[21:45:07] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:45:29] * mcpherrin sends a half dozen to spice up acrichto's day
[21:49:31] <SimonSapin> Is there a reason to have both a str::replace function and a StrSlice::replace method?
[21:50:10] <aatch|mobile> SimonSapin, probably not. 
[21:51:25] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[21:52:11] <SimonSapin> Ok. I want StrSlice::replace to return a MaybeOwned. Dois this need a RFC?
[21:54:06] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[21:55:40] *** Joins: Rym (y@393F734D.E175BF4B.51C6DE68.IP)
[21:56:07] <strcat> SimonSapin: I don't really understand
[21:56:27] <SimonSapin> strcat: right now, this method return a ~str
[21:56:40] <strcat> but in some cases it might not need to allocate?
[21:56:46] <SimonSapin> yes
[21:57:01] <SimonSapin> when the string to replace does not appear at all, this is just a copy of the original
[21:57:09] <strcat> ah
[21:57:24] <SimonSapin> MaybeOwned is either a slice or an owned string
[21:57:29] <strcat> SimonSapin: or when it appears only at the start or/and end but that's probably a little too complex ;)
[21:58:18] <SimonSapin> strcat: Iâ€¦ donâ€™t think thatâ€™s the case
[21:58:48] <SimonSapin> "ab".replace("b", "c") returns "ac", this needs to allocate
[21:59:03] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[21:59:17] <strcat> SimonSapin: well I meant the specific case when you're just removing them
[21:59:42] <SimonSapin> oh, yeah, that could be a slice too
[21:59:53] <SimonSapin> but Iâ€™m not sure itâ€™s worth the complexity
[22:01:17] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:05:32] *** flaper87 is now known as flaper87|afk
[22:06:41] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[22:06:41] <ghrust> [13rust] 15bors 04force-pushed 06auto from 146d07e57 to 14e5f1b9f: 02http://git.io/N3iJvQ
[22:06:41] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[22:06:42] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[22:06:42] <ghrust> [13rust] 15bors pushed 10 new commits to 06auto: 02http://git.io/-m02PQ
[22:06:42] <ghrust> 13rust/06auto 14ba9c51d 15Falco Hirschenberger: Update README.md...
[22:06:42] <ghrust> 13rust/06auto 1473b0186 15TimothÃ©e Ravier: Fix inner attribute syntax from `#[foo];` to `#![foo]`...
[22:06:43] <ghrust> 13rust/06auto 14b236f45 15Huon Wilson: Add stdlib docs to the Linux binary tarball....
[22:06:45] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[22:15:08] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof_)
[22:15:31] <pnkfelix> acrichto: ping
[22:15:37] <acrichto> pnkfelix: pong
[22:16:16] <pnkfelix> acrichto: you suggested writing a unit test for the patch to add notes with the paths for crates when the crate lookup or hash comparison failed
[22:16:30] <acrichto> indeed
[22:16:45] <pnkfelix> acrichto: the current Note-testsuite.md doesn't mention testing note output; just error/warning
[22:16:59] <pnkfelix> acrichto: do you know offhand of an example of testing note output?
[22:17:01] <acrichto>  //~ NOTE: foo
[22:17:02] <acrichto> that should work
[22:17:32] <pnkfelix> acrichto: okay
[22:17:55] <pnkfelix> acrichto: will give that a shot
[22:18:29] <pnkfelix> (sigh I should have justed ack'ed for note, sorry for the noise)
[22:18:40] <acrichto> oh n oworries
[22:19:29] <pnkfelix> acrichto: when there's no associated file/line number
[22:19:41] <acrichto> that may not work...
[22:19:49] <pnkfelix> acrichto: in the note output (since its just a call to note(), not note_span() ...)
[22:20:02] <acrichto> you could add a run-make test
[22:20:06] <acrichto> using grep
[22:20:23] <acrichto> there'a few others doing that right now as well
[22:21:01] <pnkfelix> acrichto: hmm.  Maybe I should just use note_span()
[22:23:23] <pnkfelix> really what I think I want
[22:23:26] <huon> does `// error-pattern: ...` work with notes?
[22:23:33] <pnkfelix> is a way to emit the note with the file/line-num
[22:23:48] <pnkfelix> but without the actual span printout of the code and the squiggly line...
[22:24:06] <acrichto> pnkfelix: this may be more effort than it's worth
[22:24:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:26:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:29:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:34:26] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[22:35:09] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[22:38:37] <pnkfelix> wait, what does span_end_note() do ...
[22:39:28] *** Quits: Rym (y@393F734D.E175BF4B.51C6DE68.IP) (Ping timeout)
[22:40:03] *** Joins: Rym (y@393F734D.E175BF4B.51C6DE68.IP)
[22:40:50] <huon> rusti: let mut a = 1; let b = &a; let c = &mut a;
[22:40:52] -rusti- pastebinned 13 lines of output: http://ix.io/buJ
[22:41:07] <huon> pnkfelix: it's the "previous borrow ends here" in ^
[22:41:08] <huon> iirc
[22:41:30] <pnkfelix> mm, not really what I want then
[22:44:16] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[22:55:08] *** Joins: tjc (tjc@5358A633.3778D849.1D6E592A.IP)
[22:55:08] *** ChanServ sets mode: +o tjc
[22:55:22] *** Quits: gimpf (gimpf@moz-64945CFF.adsl.highway.telekom.at) (Quit: Leaving.)
[22:58:27] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[22:59:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:00:59] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:01:45] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[23:01:45] <ghrust> [13rust] 15bors pushed 10 new commits to 06auto: 02http://git.io/oKDRQQ
[23:01:45] <ghrust> 13rust/06auto 14ba9c51d 15Falco Hirschenberger: Update README.md...
[23:01:45] <ghrust> 13rust/06auto 1473b0186 15TimothÃ©e Ravier: Fix inner attribute syntax from `#[foo];` to `#![foo]`...
[23:01:46] <ghrust> 13rust/06auto 14b236f45 15Huon Wilson: Add stdlib docs to the Linux binary tarball....
[23:01:48] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[23:02:43] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:17:59] *** Joins: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP)
[23:19:52] *** Quits: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP) (Ping timeout)
[23:23:11] *** Quits: c74d3 (c74d3a4ebb@moz-E2EAC718.oc.oc.cox.net) (Connection reset by peer)
[23:25:08] <Rym> Any way to run a single compile-fail test instead of the entire compile-fail suite? Passing filename as an extra arg doesn't seem to cut it.
[23:27:16] <acrichto> Rym: make check-stage2-cfail TESTNAME=some-substring-of-the-filename
[23:27:48] <Rym> acrichto: perfect, thanks
[23:36:54] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[23:50:27] <huon> has anyone tried cross compiling to linux from a windows build?
[23:51:02] <acrichto> I heard abut that being done awhile back
[23:51:11] <acrichto> oh wait, backwards
[23:51:11] <acrichto> no
[23:51:24] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:52:59] <huon> acrichto: r? https://github.com/mozilla/rust/pull/13330
[23:54:17] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Quit: I'm sure it's perfectly safe)
[23:54:43] <huon> thanks
[23:55:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:57:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
