[00:00:02] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:05:05] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[00:13:54] *** kimundi is now known as zz_kimundi
[00:16:43] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[00:16:43] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/VPsRLw
[00:16:43] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[00:16:49] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[00:17:12] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:17:38] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[00:18:52] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:20:47] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:21:44] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[00:21:44] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/MvCCEw
[00:21:44] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[00:22:29] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:31:17] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:39:04] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[00:47:46] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:49:58] *** Joins: compmstr (Mibbit@moz-24DB0F25.dyn.optonline.net)
[00:50:17] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:51:58] <compmstr> I'm trying to compile some changes to libsyntax and libserialize, make compiles both, but then it starts using the change to libserialize, but not libsyntax when it's continuing the compile.  (O
[00:52:21] <compmstr> I'm updating Decodable and the Deriving code for Decodable
[00:55:40] <aatch> acrichto, ^^ should this work ok, or are build-system changes required?
[00:56:30] *** Quits: detrino (chris@moz-EAECB432.lv.lv.cox.net) (Client exited)
[00:57:23] *** Quits: lkuper (lkuper@moz-7BF67E71.tmodns.net) (Quit: lkuper)
[00:57:47] <acrichto> I'm not really sure what's being done
[00:57:58] <sfackler> you'll probably have to #[cfg(stage0)] some stuff
[00:58:06] <acrichto> "it starts using the change to libserialize" <- what does this mean?
[00:59:01] <compmstr> It compiles libserialize, and then when it gets to compiling libsyntax, where it's expanding the #[deriving(Decodable)] of an unchanged class, it's complining about the libserialize function not matching what it's expanding to
[00:59:34] <acrichto> sounds like sfackler has the right suggestion
[00:59:56] <compmstr> Is there a wiki page or other info on that config?
[01:00:39] <cmr> http://static.rust-lang.org/doc/master/rust.html#conditional-compilation
[01:01:39] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:03:19] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[01:03:55] <compmstr> It's during stage0 when this trouble occurs... should I try to exclude the struct that's having trouble from stage0?
[01:04:47] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:07:16] <aatch> compmstr, depends, is the struct used by things during compilation?
[01:08:11] <compmstr> Apparently, yes.  I just tried it and got 100x the errors, lol
[01:08:21] <compmstr> the struct that's having trouble is libsyntax/codemap
[01:10:03] <aatch> compmstr, you'll probably need to stage off the changes in libserialize you made
[01:10:51] <aatch> Don't worry about code duplication, since the old code will be removed once theres another snapshot.
[01:11:23] <compmstr> Ah, ok... so for stage0, use the old version, and not(stage0) use the new code?
[01:11:28] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:11:34] <aatch> compmstr, yep, that should work.
[01:11:42] <compmstr> thanks, I'll give that a shot
[01:25:24] <compmstr> hmm... okay, that got it past stage0, now in stage1 it's failing on something else, with the same messages. What do the different stages do?
[01:28:02] <aatch> compmstr, so stage0 is run with the compiler that gets downloaded, stage1 is run with the compiler that is built by stage0, and stage2 is run with the output of stage1
[01:30:08] <compmstr> When it's in stage0, does it start using the already compiled crates for the compilation of the remaining ones?
[01:30:38] <aatch> compmstr, I don't believe so.
[01:31:50] <compmstr> That's strange. Essentially what's happening is I updated a trait method to have an extra parameter, and the expansion of the derived for that method to provide that extra parameter. It's seeing the extra parameter, but not the modified expansion.
[01:33:28] <compmstr> Oh, nvm. I'm reading this wrong, the function is used in this other section.
[01:35:46] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[01:36:44] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[01:36:45] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/DGAesw
[01:36:45] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[01:40:29] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[01:45:58] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:49:39] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[01:52:18] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:58:30] <brson> restarting buildbot
[01:58:48] <brson> actually, i'll just try a reconfig and see what happens
[01:59:00] *** nrc|afk is now known as nrc
[02:00:07] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:00:11] <brson> bors is bored
[02:02:24] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[02:03:13] <compmstr> Is there a way to build without making the rustdocs every time?
[02:04:01] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[02:04:03] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[02:04:13] <klutzy> make rustc-stage2?
[02:04:36] <compmstr> Ah, thanks
[02:04:42] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:06:18] <compmstr> Thanks for all the help, it's compiling now :)
[02:07:11] *** Quits: compmstr (Mibbit@moz-24DB0F25.dyn.optonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:08:58] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[02:10:37] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[02:10:39] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[02:10:59] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:12:25] <jrick> hmmm one of my frankenstein patches broke something
[02:12:33] <jrick> linux rustc isn't linking against llvm anymore
[02:12:40] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[02:13:10] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:14:11] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:18:49] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[02:22:59] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[02:23:30] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:27:18] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[02:29:18] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:31:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:08] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:31:58] *** ChanServ sets mode: +ao dherman dherman
[02:34:01] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:36:36] *** Quits: zz_kimundi (kimundi@moz-8B5A2112.dip0.t-ipconnect.de) (Ping timeout)
[02:36:53] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:40:24] *** Joins: zz_kimundi (kimundi@moz-EA3A956E.dip0.t-ipconnect.de)
[02:40:26] *** zz_kimundi is now known as kimundi
[02:41:11] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:49:55] <brson> r? https://github.com/mozilla/rust/pull/13218
[02:56:40] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[02:56:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/g0gZEQ
[02:56:40] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[02:56:40] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[02:56:41] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/hShshQ
[02:56:41] <ghrust> 13rust/06auto 144aa7a8a 15Brian Anderson: mk: Fix 'make dist' on Mac
[02:56:41] <ghrust> 13rust/06auto 147a70c69 15bors: auto merge of #13218 : brson/rust/dist-mac, r=sfackler
[02:56:41] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[03:01:15] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:03:30] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:05:03] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:06:57] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[03:09:11] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:10:54] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:15:00] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[03:16:28] <brson> r? https://github.com/mozilla/rust/pull/13219
[03:20:17] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[03:22:21] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:26:12] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[03:31:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:32:41] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[03:45:37] <jrick> god I already love rust even before my port is finished
[03:45:54] <jrick> add OsOpenbsd to the Os enum, and it tells me all the places where I forgot it :p
[03:46:43] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[03:47:42] <strcat> jrick: well, maybe not all, some matches could use a catch-all _ case :)
[03:48:00] <jrick> yeah that's true
[03:58:54] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[03:58:54] *** ChanServ sets mode: +qo brson brson
[03:59:46] <brson> cmr: how about this file:///home/brian/dev/rust-www/index.html
[04:03:24] <aatch> brson, I assume you didn't mean to link to a local file?
[04:03:59] <sfackler> c.c
[04:04:00] <brson> aatch: no
[04:04:01] <brson> http://brson.github.io/rust-www/
[04:04:57] <aatch> brson, heh, I like the footnote
[04:05:57] *** aatch is now known as aatch|work
[04:06:41] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[04:06:41] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/hShshQ
[04:06:41] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[04:10:28] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140329030204])
[04:11:38] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[04:11:38] <ChrisMorgan> brson: looks rather disorganised with no strong layout. And the "but its deeper mysteries reveal themselves with time" part makes me cringe for some reason.
[04:11:41] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[04:11:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/zkJ51Q
[04:11:41] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[04:11:44] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[04:11:44] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/us6apg
[04:11:44] <ghrust> 13rust/06auto 14cfb52a5 15Brian Anderson: mk: Don't touch config.tmp or tmp/dist as root. Closes #13190...
[04:11:44] <ghrust> 13rust/06auto 14e63b2d3 15bors: auto merge of #13219 : brson/rust/dist-root, r=sfackler
[04:11:44] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[04:14:31] <brson> ChrisMorgan: is it better or worse than rust-lang.org?
[04:15:45] <ChrisMorgan> brson: hard to say. The "install" link in particular is a massive improvement, but for much of the rest I prefer the existing site.
[04:16:12] <brson> what elements in particular?
[04:16:26] <ChrisMorgan> Of course, one must bear in mind that I am not a reasonable judge of such matters, being familiar with the site as it is and also knowing Rust.
[04:16:40] <brson> did you look at the "Other Downloads" page?
[04:16:46] <ChrisMorgan> No, just the front page.
[04:16:58] <ChrisMorgan> The existing one *tells* you what Rust is more directly.
[04:17:41] <ChrisMorgan> I like install.html.
[04:19:00] <brson> what are the most important things the existing page tells you that this one doesn't?
[04:20:58] <jrick> LLVM ERROR: Segmented stacks not supported on this platform.
[04:21:01] <jrick> :(
[04:22:01] <brson> jrick: the feature is disablable with little immediate much consequence. i'm not sure if there is a command line flag for it, but there probably should be
[04:29:00] <jrick> pointers on where to look for that? getting kinda lost
[04:29:17] <jrick> I see where llvm is producing the error
[04:31:45] <brson> jrick: LLVMRustCreateTargetMachine turns segmented stacks on
[04:32:02] <jrick> thanks
[04:33:20] <acrichto> jrick: https://github.com/mozilla/rust/blob/master/src/librustc/back/link.rs#L163
[04:33:28] <acrichto> that flag is whether segmented stacks are enabled or not
[04:38:19] <brson> what's the shortest way to initialize a HashMap?
[04:39:12] <acrichto> HashMap::new(); ?
[04:39:49] <brson> well, with stuff in it
[04:40:13] <acrichto> let mut m = HashMap::new(); m.insert(1, 2);
[04:42:59] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Client exited)
[04:43:01] <brson> strcat: it looks to me like from_iterator would be more consistent as from_iter. is there any reason not to do that?
[04:43:07] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:43:07] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[04:43:37] <strcat> brson: yeah I agree with renaming it, I only had to call it that because FromIter/from_iter existed for internal iterators
[04:43:39] <strcat> it's an old trait
[04:48:43] <acrichto> brson: do other traits have Iterator spelled out, or do they go with Iter as well?
[04:49:10] <acrichto> nvmd, they do
[04:50:07] <strcat> the iter() method is arguably the short form of iterate, rather than iterator
[04:50:11] <strcat> shorter names are nice though
[04:50:21] <strcat> although nearly everyone calls from_iterator through collect
[04:50:55] <brson> does `collect` create HashMaps?
[04:50:59] <strcat> it can
[04:51:04] <brson> so maybe it shouldn't be from_iterator?
[04:51:15] <strcat> hm?
[04:51:32] <brson> if iter is short for iterate then from_iterate doesn't make sense
[04:51:40] <brson> how can i create a HashMap with collect?
[04:51:45] <brson> from a vector
[04:51:50] <strcat> rusti: range(0, 10).zip(range(0, 10)).collect::<Vec<_>>()
[04:51:51] -rusti- <anon>:11:9: 11:59 error: cannot determine a type for this bounded type parameter: unconstrained type
[04:51:51] -rusti- <anon>:11         range(0, 10).zip(range(0, 10)).collect::<Vec<_>>()
[04:51:51] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[04:51:51] -rusti- playpen: application terminated with error code 101
[04:51:55] <strcat> rusti: range(0, 10).zip(range(0, 10)).collect::<Vec<(int, int)>>()
[04:51:56] -rusti- [(0, 0), (1, 1), (2, 2), (3, 3), (4, 4), (5, 5), (6, 6), (7, 7), (8, 8), (9, 9)]
[04:52:05] <strcat> rusti: range(0, 10).zip(range(0, 10)).collect::<collections::HashMap<int, int>>()
[04:52:06] <sfackler> brson: an iterator of (key, value)
[04:52:06] -rusti- {2: 2, 5: 5, 6: 6, 9: 9, 0: 0, 4: 4, 7: 7, 8: 8, 3: 3, 1: 1}
[04:52:19] <strcat> brson: from_iter is still better imo
[04:52:27] <strcat> brson: eventually I think it will take an Iterable, not an Iterator
[04:52:38] <strcat> (if we can find a way to make Iterator an Iterable at least)
[04:54:04] * strcat wishes partial type hints worked properly
[04:54:13] <brson> strcat: thanks for the HashMap snippet
[04:54:25] <jrick> brson, acrichto: still hitting that llvm error, building libstd
[04:55:27] <ChrisMorgan> "iter" is "iterator", "iterate" and probably other things, as seems most appropriate. iter() as "iterate" and from_iter as "from iterator" is absolutely fine in my opinion.
[04:55:35] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:55:37] <strcat> brson: it even manages to do a single allocation ;)
[04:55:49] <strcat> rusti: range(0, 10).zip(range(0, 10)).size_hint()
[04:55:51] -rusti- (10, Some(10))
[04:56:16] <strcat> rusti: range(0, 10).zip(range(0, 10)).take(5).size_hint()
[04:56:17] -rusti- (5, Some(5))
[04:56:33] <strcat> Eridius implemented the size hints for most of those
[05:04:41] <acrichto> brson: ok so our valgrind stuff in the makefiles still work (as long as valgrind is installed), I just got it to fail with the arc leak
[05:04:56] <acrichto> I guess the new snap just doesn't have it installed
[05:04:58] <acrichto> snap bot*
[05:06:41] <nrc> \o/ https://github.com/mozilla/rust/pull/13222
[05:06:56] <nrc> f? please everyone :-)
[05:07:18] <brson> acrichto: it doesn't, yes. i was surprised that the makefiles were ok with that
[05:07:46] <jrick> so I don't think I should be making up random asm in libstd/rt/stack.rs to get it to build, especially not with segmented stacks disabled
[05:08:06] <jrick> but it fails otherwise because those functions aren't defined
[05:08:18] <acrichto> jrick: what platform are you compiling for?
[05:08:23] <strcat> acrichto: https://github.com/mozilla/rust/pull/13221 r?
[05:08:55] * strcat found a lot of scary vector copies in librustc ;s
[05:08:59] <acrichto> strcat: I hesitate a little on that one a little, are we sure we want those methods to stay?
[05:08:59] <sfackler> nrc: c.c https://github.com/nick29581/rust/commit/76a9538b978197215ea7b1c3d3a3ff248572ed98
[05:08:59] <strcat> will worry about that later
[05:09:12] <jrick> oh wait
[05:09:23] <strcat> acrichto: I added #[deprecated] to the map method before and was going to do append/append_one too but people were against it
[05:09:24] <jrick> acrichto: openbsd/bitrig
[05:09:24] <sfackler> IIRC kimundi was working on killing off append and append_one entirely
[05:09:29] <strcat> acrichto: so I only deprecated map
[05:09:40] <strcat> acrichto: not sure if we want to keep them, but they might as well be methods
[05:09:43] <strcat> they just won't be #[stable]
[05:11:00] <acrichto> jrick: can you compile a small C file with "gcc -fsplit-stack" ?
[05:11:37] <Eridius> ugh, rustdoc seems to have broken the logo
[05:11:40] <Eridius> <img src="#" alt>
[05:11:45] <jrick> not with gcc
[05:11:46] <jrick> cc1: error: '-fsplit-stack' currently only supported on GNU/Linux
[05:11:46] <jrick> cc1: error: '-fsplit-stack' is not supported by this compiler configuration
[05:12:05] <jrick> clang dies as well
[05:12:31] <Eridius> hrm, rustdoc actually seems rather broken. Methods are missing too
[05:12:42] <Eridius> for example http://static.rust-lang.org/doc/master/std/comm/struct.Select.html claims that Select has no methods
[05:12:56] <sfackler> Eridius: both of those should be fixed now, but the online docs haven't been updating
[05:13:02] <strcat> acrichto: what I *really* want to remove is all the number free functions ;p
[05:13:05] <Eridius> sfackler: >_<
[05:13:12] <strcat> rusti: let x = 5.5f64; x.sqrt()
[05:13:13] -rusti- 2.345208
[05:13:13] <acrichto> looks like the doc builder has disappeared
[05:13:16] <acrichto> brson: ^
[05:13:19] <strcat> rusti: let x = 5.5f64; std::f64::sqrt(x)
[05:13:20] -rusti- 2.345208
[05:13:22] <strcat> rusti: let x = 5.5f64; std::num::sqrt(x)
[05:13:23] -rusti- 2.345208
[05:13:24] * strcat cries
[05:13:26] <strcat> should only have 1
[05:13:46] <nrc> sfackler: I don't understand 'c.c'
[05:13:50] <brson> acrichto: the nightly builder replaces the doc builder, and it currently has a bug during upload
[05:13:58] <acrichto> ah
[05:14:03] <sfackler> nrc: shifty eyes
[05:14:12] <brson> i'but that is blocked by distcheck not working
[05:14:12] *** Quits: aatch|home (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[05:14:25] <jrick> acrichto: forgive my ignorance, but is there no way to compile libstd without those segmented stack features, since I hacked librustc to not use them?
[05:14:28] <brson> working on a fix for distcheck now
[05:14:34] <nrc> sfackler: heh :-)
[05:14:45] <sfackler> brson: could we do a manual doc upload in the meantime? unless the fix will be pretty quick
[05:14:57] <jrick> or should I work on adding segmented stack support in clang? :p
[05:15:01] <brson> sfackler: no
[05:15:06] <jrick> er llvm
[05:15:13] <acrichto> jrick: you could stub out the relevant functions in src/libstd/rt/stack.rs with no-ops for your platform, but you would have to ensure that the compiler always disables split stacks on that platform
[05:15:31] <acrichto> jrick: adding support is possible, it would start by figuring out the layout of the kernel's TCB for the distribution
[05:15:32] <jrick> alright, that makes sense
[05:15:37] <nrc> sfackler: why so?
[05:15:49] * nrc is being dense
[05:15:51] <sfackler> nrc: it's a commit titled "?" !
[05:16:00] <jrick> I'll just do stubs since this is just a rough first pass
[05:17:14] <nrc> sfackler: oh, I see - I did say to ignore the commits - the branch is kind of a mess - I'd make changes, forget to commit, then try and rebase later and have to do a commit and I couldn't be bothered to do git diff since I was going to squash the commits anyway
[05:17:33] <sfackler> I figured :)
[05:19:26] <acrichto> nrc: a large amount of support for a fairly specific thing such as dxr seems like it could live outside the compiler?
[05:21:24] <jrick> acrichto: stubs weren't enough, llvm is still killing it. time to patch llvm?
[05:21:39] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[05:21:39] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/us6apg
[05:21:39] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[05:22:03] <acrichto> jrick: what's the error you're seeing?
[05:22:27] <jrick> LLVM ERROR: Segmented stacks not supported on this platform.
[05:22:31] <strcat> jrick: meh, I would just disable segmented stacks on openbsd and wait until LLVM learns to do the chkstk stuff elsewhere
[05:22:51] <strcat> since openbsd is always going to have an MMU available
[05:22:51] <acrichto> jrick: remember that stage0 will still attempt to compile with segmented stacks even if you turned it off in rustc
[05:23:00] <strcat> ah, nvm, you are disabling them
[05:23:05] <nrc> acrichto: I wish :-) With no plugin API and totally unstable inards it would rot about as quickly as I could rebase it (as it has been for the last few months). I agree that long term it probably doesn't have a place in the compiler, but until we have an API and stable AST etc., I think it is generic enough to warrant it - it is really like dunping the JSON representation of the AST only...
[05:23:07] <nrc> ...using CSV instread of JSON and including semantic info - not limited to DXR at all
[05:23:16] <brson> acrichto: i've seen a few unexpected failures in libsync lately
[05:23:40] <acrichto> brson: any logs?
[05:23:46] <strcat> nrc: how about putting it in a separate official tool, and exposing what you need from libsyntax/librustc?
[05:23:52] <strcat> nrc: and one day, it can be out-of-tree
[05:24:29] <brson> acrichto: not great ones https://gist.github.com/brson/9885819
[05:24:41] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[05:24:49] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[05:24:58] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[05:25:03] <strcat> rusti: version
[05:25:04] -rusti- rustc 0.10-pre (d79fbba 2014-03-29 18:56:36 -0700)
[05:25:07] <strcat> hm?
[05:25:16] <strcat> what are you doing rusti 
[05:25:24] <nrc> strcat: that is kind of what I have done, just exposing it via a CSV file, rather than an API - given that it aims to dump all analysis info, I think any API would be too restricting on rustc development
[05:25:34] <strcat> ah
[05:25:49] <strcat> rusti: version
[05:25:49] -rusti- rustc 0.10-pre (612e22e 2014-03-30 17:21:40 -0700)
[05:26:08] * strcat needs to go complain on lkml about this broken kernel API ;\
[05:26:26] <acrichto> brson: I have seen a thing or to similar to that, but not quite the same as that
[05:26:40] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[05:26:40] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02https://github.com/mozilla/rust/compare/e63b2d30775f...a0c9b95fa533
[05:26:40] <ghrust> 13rust/06auto 141865035 15Jonathan S: Add fetch_and, fetch_or, fetch_nand, fetch_xor to AtomicInt, AtomicUint
[05:26:40] <ghrust> 13rust/06auto 14a0c9b95 15bors: auto merge of #12964 : gereeter/rust/extended-atomics, r=alexcrichton...
[05:26:40] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[05:29:19] <brson> ChrisMorgan: I pushed some changes http://brson.github.io/rust-www/
[05:30:09] <acrichto> whoa, that button was masstive
[05:30:14] <acrichto> then I un-zoomed the page
[05:30:16] <acrichto> and it was less massive
[05:30:17] <ChrisMorgan> brson: that's looking much less messy. Good!
[05:30:29] <acrichto> forgo-ing the example?
[05:30:47] <ChrisMorgan> The example seems to me a good thing to have.
[05:31:16] <ChrisMorgan> acrichto: yeah, the install button is around 500px wide and 100px high for me when I zoom in a lot!
[05:31:21] <brson> acrichto: i hope not. just removing it so the placeholders don't look bad
[05:31:32] <brson> acrichto: i am having a hell of a time coming up with a great, short example
[05:31:45] <brson> something fairly clear but with some surprising rustisms
[05:31:46] <ChrisMorgan> brson: BTW, zooming in messes up the layout
[05:32:02] <ChrisMorgan> Or rather, a narrower viewport messes up the layout.
[05:32:03] <strcat> brson: get iterators and the type-safe format strings in there ;)
[05:32:33] <brson> ChrisMorgan: thanks
[05:32:52] <ChrisMorgan> 992px is the narrowest you can take it before it gets messed up. I'd look further, identify the problem and fix it, but I'm working â˜º
[05:32:59] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[05:33:41] <strcat> someone clever come up with a way to make rusti go out-of-memory
[05:33:53] * strcat was trying but it times out first ;\
[05:34:03] <strcat> I should flip on optimizations and then it's easy...
[05:34:18] <sfackler> strcat: Vec::with_capacity(MAX_UINT)?
[05:34:29] <strcat> sfackler: but linux allocates lazily and it doesn't care about VM
[05:34:59] <strcat> it would probably work if it incremented in steps
[05:36:24] <strcat> rusti: let mut xs = Vec::with_capacity(1 << 32); for i in std::iter::range_step(0, 1 << 32, 4096) { let y = xs[i]; }
[05:36:28] -rusti- pastebinned 8 lines of output: http://ix.io/bmM
[05:36:38] <bjz_> brson: how about, "high level abstractions, low level control"
[05:36:49] <strcat> rusti: let mut xs = Vec::with_capacity(1 << 32); xs.push(2); for i in std::iter::range_step(0, 1 << 32, 4096) { let y = xs[i]; }
[05:36:50] -rusti- <anon>:11:122: 11:127 error: cannot index a value of type `std::vec::Vec<<generic integer #2>>`
[05:36:50] -rusti- <anon>:11         let mut xs = Vec::with_capacity(1 << 32); xs.push(2); for i in std::iter::range_step(0, 1 << 32, 4096) { let y = xs[i]; }
[05:36:50] -rusti-                                                                                                                                    ^~~~~
[05:36:50] -rusti- error: aborting due to previous error
[05:36:52] -rusti- playpen: application terminated with error code 101
[05:36:55] <strcat> rusti: let mut xs = Vec::with_capacity(1 << 32); xs.push(2); for i in std::iter::range_step(0, 1 << 32, 4096) { let y = xs.as_slice()[i]; }
[05:36:58] -rusti- pastebinned 4 lines of output: http://ix.io/bmN
[05:37:06] <brson> bjz_: i considered that, but then it immediately says 'zero-cost abstractions'; i didn't like the repetition
[05:37:06] * strcat shrugs
[05:37:14] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[05:37:23] <bjz_> brson: not really a fan of the centering
[05:37:27] <brson> bjz_: maybe it's better now that 'zero-cost abstractions' is buried
[05:37:44] <brson> bjz_: what would you change?
[05:37:50] <bjz_> brson: why not just use a bulleted list for the stuff at the end?
[05:38:24] <strcat> rusti: let mut xs = Vec::with_capacity(128 * 1024 * 1024); xs.push(2); for i in std::iter::range_step(0, 128 * 1024 * 1024, 4096) { let y = xs.as_slice()[i]; }
[05:38:27] -rusti- pastebinned 5 lines of output: http://ix.io/bmO
[05:38:41] <bjz_> brson: might look abit weird in the space though
[05:38:53] <brson> bjz_: i had two bulletted lists, one for high level, and one for low level
[05:39:09] <bjz_> brson: maybe we should take this to #rust-branding
[05:40:16] <sfackler> rusti: let mut xs = Vec::with_capacity(128 * 1024 * 1024); unsafe { xs.set_len(128 * 1024 * 1024) }; for i in std::iter::range_step(0, 128 * 1024 * 1024, 4096) { let y = xs.as_slice()[i]; }
[05:40:18] -rusti- pastebinned 5 lines of output: http://ix.io/bmR
[05:40:40] <brson> ok
[05:40:44] <sfackler> rusti: let mut xs = Vec::with_capacity(128 * 1024 * 1024); cx.push(2); unsafe { xs.set_len(128 * 1024 * 1024) }; for i in std::iter::range_step(0, 128 * 1024 * 1024, 4096) { let y = xs.as_slice()[i]; }
[05:40:47] -rusti- pastebinned 5 lines of output: http://ix.io/bmS
[05:41:16] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[05:41:19] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[05:41:26] <strcat> sfackler: hm
[05:41:49] <strcat> it seems that cgroups actually do forbid allocating more VM than the limit
[05:41:55] * strcat is not quite sure
[05:42:05] <sfackler> strcat: looks like you're giving the process at least 128MB of memory to work with
[05:42:08] <strcat> yes
[05:42:15] <strcat> well
[05:42:18] <strcat> the max is 128MiB
[05:42:45] <sfackler> oh, wait, that code isn't actually forcing faults at all
[05:42:51] <strcat> needs to write
[05:43:27] <sfackler> looks like the timeout is too fast to actually touch all of that memory
[05:43:30] <sfackler> let mut xs = Vec::with_capacity(128 * 1024 * 1024); xs.push(2); unsafe { xs.set_len(128 * 1024 * 1024) }; for i in std::iter::range_step(0, 128 * 1024 * 1024, 4096) { xs.as_mut_slice()[i] = 10; }
[05:43:34] <sfackler> that times out ^
[05:44:21] <strcat> I'm not sure
[05:44:25] <strcat> I think something about rust changed
[05:44:32] <strcat> used to be able to do it ;\
[05:44:41] * strcat turns on -O
[05:45:05] <strcat> rusti: let mut xs = Vec::with_capacity(128 * 1024 * 1024); xs.push(2); unsafe { xs.set_len(128 * 1024 * 1024) }; for i in std::iter::range_step(0, 128 * 1024 * 1024, 4096) { xs.as_mut_slice()[i] = 10; }
[05:45:06] -rusti- ()
[05:45:27] <strcat> see? odd.
[05:45:41] <sfackler> I wouldn't be surprised if llvm removes the entire loop
[05:45:46] <sfackler> since it's all dead stoers
[05:45:47] <sfackler> *stores
[05:45:48] <strcat> ah right ;)
[05:55:20] <nrc> Something has changed - I have a sty, I match, it's `ty_self(def_id)`, but when I call `lookup_trait_def` with `def_id` I get an assertion, presumably because there is no matching trait def - this worked last week - anyone got any ideas?
[05:56:29] *** Joins: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP)
[05:56:58] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[06:06:25] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[06:18:18] *** Quits: japaric (japaric@DC168457.F3E5B3F6.F4D5766F.IP) (Ping timeout)
[06:18:36] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[06:19:12] *** Joins: japaric (japaric@3DD6B4D0.E67A32BD.5C7588CA.IP)
[06:20:44] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[06:21:26] <eddyb> cmr: dumped a few thoughts on the pad
[06:21:31] <eddyb> oh, wow, almost forgot
[06:21:32] <brson> acrichto: hit the same sync error again
[06:21:57] <eddyb> nmatsakis: there's a powerful abstraction I've come to want: push-only indirect vector
[06:22:29] <eddyb> nmatsakis: Unsafe<Vec<~T>> with push<'a>(&'a self, T) -> &'a T
[06:23:31] <brson> r? https://github.com/mozilla/rust/pull/13223
[06:29:18] <cmr> eddyb: what pad where?
[06:29:21] <strcat> brson: btw it would be useful for your install script to output a list of the files it installed somewhere, and have the uninstall use that - otherwise people need to be very careful to get the same very of the install script to rm it
[06:29:22] <cmr> oh that pad
[06:29:39] <strcat> brson: it could even install an uninstall script ;p
[06:29:56] <strcat> goodbye-rust.sh
[06:31:32] <cmr> brson: bjz_ had feedback for http://brson.github.io/rust-www/
[06:31:33] <brson> strcat: it writes /usr/local/lib/rustlib/manifest
[06:31:37] <strcat> ah
[06:31:40] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[06:31:40] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14a0c9b95 to 14e63b2d3: 02http://git.io/N3iJvQ
[06:31:40] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[06:31:41] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[06:31:41] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/slJBTQ
[06:31:41] <ghrust> 13rust/06auto 147c2abe7 15Guillaume Pinot: make shootout-k-nucleotide.rs pass official test...
[06:31:41] <ghrust> 13rust/06auto 146281299 15bors: auto merge of #13206 : TeXitoi/rust/fix-shootout-k-nucleotide, r=alexcrichton...
[06:31:41] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[06:31:42] <strcat> so you did already do that ;)
[06:32:05] <cmr> oh I see #rust-branding now
[06:32:14] <brson> installing uninstall.sh may be nice, yeah
[06:37:41] *** Joins: eibwen (kvirc@moz-E7BC7E0A.dip0.t-ipconnect.de)
[06:44:53] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[06:49:12] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:51:05] <strcat> brson: was it decided that the Eq/Ord -> PartialEq/PartialOrd and TotalEq/TotalOrd -> Eq/Ord renaming is okay?
[06:51:14] <strcat> (and making deriving Eq/Ord derive both)
[06:53:08] * strcat knows the general idea was accepted but not if that specific part is okay
[06:53:19] <strcat> and it's going to be a lot of pain so I'd rather be certain in advance ;p
[06:53:58] <acrichto> I'd be a little worried about all manual implementations of Eq
[06:54:06] <acrichto> impl PartialEq doesn't have quite the same ring as impl Eq
[06:54:23] <strcat> acrichto: but they should be implementing both
[06:54:44] <strcat> there are very few cases where you just want PartialEq
[06:54:49] <strcat> HashMap uses TotalEq now
[06:54:57] <acrichto> yes, but there are many places that you want to implement PartialEq manually
[06:54:57] <brson> strcat: yes
[06:55:08] <strcat> acrichto: you can't derive Eq in those places though
[06:55:20] <strcat> you need impl PartialEq for T { ... } impl Eq for T {}
[06:55:38] <acrichto> strcat: I may have not been clear, if I write "impl Eq for T {... }" it's obvious what's happening, if I write "impl PartialEq for T { ... }" it's less obvious
[06:55:52] <acrichto> I still don't know what partial equality means
[06:55:55] <strcat> well what I mean is that you need both
[06:55:57] <acrichto> I just know it's something that floats don't do
[06:56:18] <strcat> impl Eq for T {} is probably what you try first
[06:56:19] <acrichto> that's not relevant to this concern right now, I'm just saying that the impl blocks will get wordier and farther from what they're doing
[06:56:27] <strcat> and then it tells you that you need PartialEq too
[06:56:30] <acrichto> yes, the compiler will direct you
[06:56:37] <strcat> acrichto: but every single PartialEq block also needs an Eq block
[06:56:45] <strcat> except rare cases
[06:56:51] <acrichto> yes, that sounds quite wordy
[06:56:57] <acrichto> I'm just a little worried
[06:57:00] <acrichto> it's the same as we have today
[06:57:05] <acrichto> it's just unfortunate all around
[06:57:15] <strcat> TotalEq doesn't have any methods now (well it has a hidden one that will go away eventually)
[06:57:27] <acrichto> yes, that does not change my concerns
[06:57:35] <acrichto> two impl blocks is wordy
[06:57:43] <acrichto> and one more than most would expect
[06:57:46] <strcat> I guess
[06:57:47] <sfackler> I wonder if there's some not-terrible way of making it so that you can impl Eq for Foo { fn eq(&self, other: &Foo) -> bool {...} } and make that do what you'd expect
[06:57:59] <acrichto> strcat: I know that this is a tricky issue, this is just a mild concern that I have
[06:58:09] <sfackler> some sort of deferring trait inheritance
[06:58:20] <strcat> sfackler: well, if it allowed you do the impls of inherited traits in the impl for the trait
[06:58:20] <sfackler> or proxying or something
[06:58:22] <strcat> that'd work
[06:58:32] <strcat> it already knows there can't be name conflicts
[06:58:38] <strcat> (or at least, it *should* know)
[06:58:54] <strcat> it should forbid you from inheriting from two traits implementing the same method name if it doesn't already
[06:58:56] <strcat> since it's ambiguous
[06:58:58] <sfackler> yeah
[06:59:10] <strcat> acrichto: well, what do you think of that? ^
[06:59:28] <acrichto> sounds a bit hacky for this one use case
[06:59:29] <sfackler> my gut feeling is that it's not something you'd want to allow globally (e.g. it wouldn't make a ton of sense to impl len inside of an impl Map for Foo block)
[06:59:35] <strcat> acrichto: I can think of other use cases
[06:59:41] <acrichto> the ramifications seem large
[06:59:43] <strcat> acrichto: you could impl Map {} and put your len() impl in there
[06:59:49] <strcat> would clean up a lot
[07:00:33] <acrichto> rusti: trait A { fn foo(&self); } trait B: A { fn foo(&self); }
[07:00:33] -rusti- ()
[07:00:38] <acrichto> how would you deal with that?
[07:00:46] <strcat> acrichto: that should already be forbidden
[07:00:49] <acrichto> why?
[07:00:57] <strcat> acrichto: if trait B is in scope, bar.foo() is ambiguous
[07:01:06] <acrichto> that's why we have scope
[07:01:09] <acrichto> so you can select
[07:01:17] <strcat> acrichto: trait B being in scope beings both methods into scope, doesn't it?
[07:01:29] <acrichto> I don't think so
[07:01:51] <strcat> I thought if you had something like Num, you were able to call .add even if Add isn't in scope
[07:01:59] * strcat shrugs
[07:02:02] <strcat> don't know for sure
[07:02:09] <strcat> but I do think it should be forbidden in inheritance hierarchies
[07:02:18] <acrichto> yes, it is ambiguous when you call it
[07:02:21] <acrichto> regardless of what's in scope
[07:02:40] <acrichto> this is getting close to what go does though
[07:02:47] <acrichto> you implement traits that you implement the methods for
[07:02:55] *** flaper87|afk is now known as flaper87
[07:03:12] <acrichto> if this worked out, it would be nice though
[07:03:18] <acrichto> b/c then you'd have one impl Eq block
[07:03:24] <acrichto> which is quite nice
[07:03:44] <acrichto> sounds like a big language change though
[07:04:26] <sfackler> I wonder if we could have a single Eq trait with a phantom tag type?
[07:04:37] <sfackler> impl Eq<Total> for Foo
[07:04:42] <sfackler> vs impl Eq<Partial> for Foo
[07:05:38] <acrichto> all total things are partial things though
[07:05:53] <acrichto> generically I'd want Eq<T>, not just Eq
[07:06:05] <acrichto> maybe...
[07:06:28] <sfackler> yeah, it'd be a bit weird since you'd never want to look for an Eq<Partial> impl specifically
[07:06:38] <flaper87> o/
[07:06:39] <sfackler> just Eq<Total> or Eq<T> 
[07:07:26] <brson> re-r? https://github.com/mozilla/rust/pull/13223
[07:07:55] <acrichto> brson: r=me if you make an issue
[07:08:15] <eddyb> who is Tom Lee on IRC?
[07:08:21] <acrichto> (I don't know what any of that is, but making an issue to track seems like it'd be nice?)
[07:08:35] *** Quits: eibwen (kvirc@moz-E7BC7E0A.dip0.t-ipconnect.de) (Ping timeout)
[07:08:36] <eddyb> (I wanted to provide some feedback)
[07:09:48] <strcat> acrichto: the reason PartialEq will be nice is because both Float and Eq can inherit from it
[07:09:58] <strcat> so functions generic over all float sizes can still use the operators
[07:10:05] <acrichto> brb
[07:10:08] <strcat> but stuff like HashMap doesn't need to worry about partial equality breaking everything
[07:10:27] <strcat> I don't really expect it to be used directly
[07:10:36] <strcat> so it is somewhat annoying that impls need to specifically refer to it
[07:11:12] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[07:18:52] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:18:52] *** ChanServ sets mode: +o huon
[07:20:32] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[07:23:08] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:23:08] *** ChanServ sets mode: +o huon
[07:24:49] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[07:25:22] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[07:26:25] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[07:32:16] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[07:33:37] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:33:37] *** ChanServ sets mode: +o huon
[07:34:35] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[07:35:11] <cmr> flaper87: ping
[07:35:16] <cmr> (also eddyb)
[07:35:31] <huon> nrc: looking forward to seeing the output of that DXR PR (also, I hope your wife is ok :) )
[07:35:40] <cmr> is nrc's wife in peril?
[07:36:01] <eddyb> huh?
[07:36:04] * eddyb confused
[07:36:06] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[07:36:11] <cmr> not pinging about that :P
[07:36:13] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:36:13] *** ChanServ sets mode: +o huon
[07:37:55] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[07:43:30] <flaper87> cmr: pong
[07:43:46] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[07:44:10] <cmr> https://etherpad.mozilla.org/7h15DtW9zI
[07:44:18] <cmr> (not done yet)
[07:44:30] * flaper87 clicks
[07:44:38] <flaper87> wow
[07:45:13] <cmr> The basic idea is that if you have two &T whether or not one of them can modify the contents.
[07:45:27] <cmr> with Freeze, it was simple: if it's Freeze, the contents of &T never change
[07:45:46] <cmr> how is this expressed in the post-Freeze world?
[07:46:17] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:46:17] *** ChanServ sets mode: +o huon
[07:46:29] <cmr> Share isn't enough, for example &Mutex<T> the contents can be changed.
[07:46:42] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[07:46:42] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/slJBTQ
[07:46:42] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[07:46:51] <cmr> It seems Unsafe and InteriorUnsafe are the things usable?
[07:48:45] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[07:48:48] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:48:48] *** ChanServ sets mode: +o huon
[07:48:50] * eddyb reads
[07:49:08] <eddyb> cmr: do you need deep or shallow mutability?
[07:49:10] <cmr> there's really not much worth reading in the pad, all of it is less than half complete, it's just fragmented thoughts :p
[07:49:22] <cmr> eddyb: anything on the other side of a pointer, I don't care about.
[07:49:37] <eddyb> then it's a shallow Unsafe check, which TC does
[07:49:39] <cmr> I need the guarantee that if two pointers can alias, the next N bytes of memory never change
[07:49:46] <eddyb> is there more than one Unsafe bit in TC?
[07:49:48] <cmr> InteriorUnsafe?
[07:49:54] <cmr> no
[07:50:03] <eddyb> then that one it is
[07:50:37] <eddyb> it shouldn't be set for &~Cell<T>, but it should be set for &Cell<T>
[07:51:18] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[07:51:36] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[07:51:36] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/A-4UNg
[07:51:36] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[07:51:36] * flaper87 back
[07:51:39] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[07:51:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/gVwBiw
[07:51:39] <ghrust> 13rust/06auto 14ee05219 15Brian Anderson: Rename `from_iterator` to `from_iter` for consistency.
[07:51:39] <ghrust> 13rust/06auto 14abb6162 15bors: auto merge of #13220 : brson/rust/from_iter, r=thestinger
[07:51:40] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[07:51:52] <flaper87> InteriorUnsafe is set if the value reaches an Unsafe<T> field
[07:51:59] <flaper87> erm, the type
[07:52:11] <eddyb> flaper87: but not through a pointer, right?
[07:52:38] <flaper87> eddyb: correct
[07:52:52] <cmr> (for example, struct Foo { x: Mutex<T> } would need to be disallowed, but struct Foo { x: &Mutex<T> } would be allowable)
[07:53:27] <cmr> (Mutex<T> containing an Unsafe<T>)
[07:53:28] <eddyb> s/unsafe/Unsafe/
[07:54:20] <cmr> meh inconsistency is worse
[07:54:25] * cmr likes all lowercaps
[07:54:38] <eddyb> cmr: then "unsafe interior"
[07:54:49] <flaper87> erm, this is not allowed, for example: https://github.com/mozilla/rust/blob/master/src/test/compile-fail/borrowck-forbid-static-unsafe-interior.rs#L43
[07:54:56] <cmr> but it's the opposite of that
[07:55:07] <cmr> besides it's the "unsafe" lang item
[07:55:14] <cmr> Unsafe is just the name of the type in libstd :P
[07:55:14] <eddyb> cmr: "no unsafe interior" I mean
[07:56:15] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[07:57:30] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:57:30] *** ChanServ sets mode: +o huon
[07:57:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:57:56] * huon is sick of this internet connection :/
[08:00:00] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[08:00:41] <flaper87> poor huon :/
[08:01:31] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Connection reset by peer)
[08:03:52] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[08:03:52] *** ChanServ sets mode: +o huon
[08:04:09] * huon crosses fingers
[08:06:39] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[08:07:55] *** Quits: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:09:03] * flaper87 puts some sticks under huon's connection to keep it up
[08:09:10] <flaper87> ok, bad joke! :P
[08:09:20] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[08:10:11] <cmr> hah
[08:11:33] <flaper87> bad joke and bad solution too :(
[08:11:47] <cmr> apparently
[08:13:38] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[08:13:38] *** ChanServ sets mode: +o huon
[08:14:38] * huon cries
[08:15:15] <cmr> huon: would you like an account on my ZNC?
[08:15:42] <cmr> (doesn't help with the intermittent connection issues, but makes IRC somewhat less volatile)
[08:16:10] <eddyb> use std::volatile;
[08:16:12] <huon> cmr: that might be nice to experiment with, thanks :)
[08:16:34] <cmr> a bouncer in general or do you want an account on mine?
[08:17:23] <huon> both?
[08:19:36] <huon> so, anyway, now my connection seems to be slightly stable, anything exciting happen in the last 3 days?
[08:33:13] <bstrie> huon: saw a neutral milk hotel concert, had a dance party, fell in love (again)
[08:33:19] <bstrie> oh wait this is not #bstrie-internals
[08:33:38] <eddyb> haha
[08:33:40] <flaper87> lol
[08:33:45] <cmr> neutral milk hotel exists O_O
[08:34:32] * eddyb is reminded of IRL and tries to forget
[08:38:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:39:15] <huon> bstrie: it might as well be #bstrie-internals
[08:39:24] * huon considers abusing op powers...
[08:40:50] <bstrie> huon: you've just given me an idea to set up a github repo for my life, and let people submit pull requests in order to improve me
[08:41:00] <bstrie> "go hang gliding"
[08:41:25] <bstrie> "become a professional street fighter II player"
[08:41:50] <bstrie> "walk only in reverse on tuesdays"
[08:41:57] * cmr opens a pull request for every line in the lyrics of "like a boss"
[08:42:20] <huon> "eat spaghetti with a single chopstick"
[08:43:39] <eddyb> huon: 900+ errors in librustc :S
[08:44:12] <huon> eddyb: I don't think rustc checks one's spaghetti-eating implement?
[08:44:22] <eddyb> >_>
[08:44:25] <eddyb> huon: P
[08:44:42] <eddyb> I don't even get an error count, even though it doesn't seem to hit a fatal error
[08:51:51] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[08:52:27] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[08:54:27] <nrc> huon: aye, hoping to get something online soon, depends how busy the Mozilla IT guys are, I guess
[08:54:36] <bstrie> cmr: I see from your presentation that you've officially changed your middle name to Rust
[08:54:53] <bstrie> also, go to bed :)
[08:54:55] <cmr> bstrie: it's my nickname, but but the same thing
[08:54:56] <cmr> PAH
[08:54:58] <cmr> you go to bed
[08:55:05] * bstrie whips cmr to sleep
[08:55:13] <nrc> huon, cmr: my wife is doing better - should be home tomorrow, thanks! (She managed to break both her legs paragliding :-( )
[08:55:17] <cmr> I woke up at like 6:30pm
[08:55:29] <bstrie> well *I* woke up at 1:00am
[08:55:30] <cmr> nrc: yikes! best wishes.
[08:55:42] <nrc> thanks
[08:56:08] <bstrie> nrc: oh no!!
[08:56:09] * eddyb resists making an unsafe joke. hope she gets well
[08:56:19] <huon> nrc: both! o_O
[08:56:44] <bstrie> at least she did not break both of her lungs, or brain halves
[08:56:58] <huon> bstrie: she might've done that too
[08:57:40] <huon> nrc: I hope she makes a quick recovery
[08:57:59] * bstrie resists making a ParaSail joke
[08:59:27] <nrc> yeah, I'm really glad it was just her legs, and only one is really badly broken, the other is a kind of low key fracture
[08:59:42] <nrc> thanks all :-)
[09:03:55] <eddyb> huon: here we go: error: aborting due to 805 previous errors
[09:04:03] <eddyb> and this is just type checking
[09:04:52] <flaper87> eddyb: is that for the owned AST experiment?
[09:05:36] <eddyb> woo more dead code to remove
[09:05:41] <eddyb> flaper87: not just experiment :S
[09:05:49] <eddyb> it's past the point of no return
[09:05:53] <cmr> heh
[09:05:57] <flaper87> lol
[09:06:17] <cmr> I honestly never thought someone would refactor the AST to be owned, or the parser to be immutable.
[09:06:28] <eddyb> immutable?
[09:06:35] <cmr> well, freeze
[09:06:39] <cmr> "freeze"
[09:06:43] <cmr> owned :p
[09:06:45] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[09:06:45] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/gVwBiw
[09:06:45] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[09:06:47] <eddyb> ahh. to not use interior mutability
[09:06:49] <cmr> yeah
[09:06:50] <cmr> that one.
[09:06:51] <huon> cmr: well... people have been thinking about AST being an arena for ages ;P
[09:07:05] <cmr> huon: yeah but I didn't think it'd actually happen :p
[09:07:31] <eddyb> cmr: I killed the last bit of interior mutability in the parser, I think, with the recent changes to lexer::Reader
[09:07:39] <cmr> eddyb: yup
[09:07:39] <huon> cmr: well, something would have to happen with the @ removal
[09:07:43] <cmr> eddyb: you're awesome :)
[09:07:46] <huon> (i guess Rc would work though)
[09:07:50] <eddyb> ^-^
[09:07:50] * huon waits for eddyb...
[09:07:57] <eddyb> Rc? for what?
[09:08:01] <huon> the AST
[09:08:03] * huon ducks
[09:08:23] <eddyb> I've had to use Rc for token trees, but that's just because I can't see a nice way to refactor TtReader
[09:08:27] <flaper87> it looks like it'll be another 10k patch :P
[09:08:28] <eddyb> it's those repeats :(
[09:09:35] <eddyb> hang on, is rustc::util::common completely dead?
[09:09:45] <eddyb> I may make a tiny PR for that
[09:10:13] <eddyb> hmm, no, just a few functions
[09:10:29] * huon doesn't believe that eddyb is capable of a "tiny PR"
[09:10:33] <huon> :P
[09:10:48] <cmr> No! He is!
[09:10:52] <cmr> There was one last wee
[09:10:53] <cmr> k
[09:10:57] <cmr> it was like, < 50 loc
[09:10:59] <huon> only 1k lines?
[09:11:01] <huon> oh, wow
[09:11:03] <cmr> yeah!
[09:11:08] <huon> craziness
[09:11:11] <eddyb> cmr: which one?
[09:11:18] * eddyb honestly doesn't remember
[09:11:23] * huon assumes someone must've hijacked eddyb's github account
[09:11:33] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[09:11:33] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/hYOREQ
[09:11:34] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[09:11:35] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[09:11:35] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/6GTheg
[09:11:35] <ghrust> 13rust/06auto 14cbbc1fc 15Daniel Micay: vec: convert `append` and `append_one` to methods...
[09:11:35] <ghrust> 13rust/06auto 141c2ccf0 15bors: auto merge of #13221 : thestinger/rust/append, r=alexcrichton...
[09:11:35] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[09:11:41] <cmr> I don't remember
[09:11:46] <eddyb> I know removing a word off Vec<T> was small, but that wasn't last week
[09:12:08] <eddyb> kimundi: haha, strcat went ahead
[09:12:22] <cmr> hm
[09:12:25] <cmr> it wasn't last week...
[09:12:37] <cmr> yes it was.
[09:12:38] <cmr> https://github.com/mozilla/rust/pull/12770
[09:12:40] <cmr> merged last week
[09:12:51] <huon> 26?
[09:12:59] <huon> probably just u32 overflow
[09:13:00] <eddyb> cmr: aaaah
[09:13:01] <flaper87> no way!
[09:13:07] <cmr> huon: probably
[09:13:09] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[09:13:13] <eddyb> cmr: wrote that ages ago
[09:13:20] <cmr> 22 days
[09:13:21] <cmr> so long
[09:13:27] <eddyb> also, how is 12 days last week?
[09:13:30] <huon> such time
[09:13:30] <eddyb> it's only Monday
[09:13:44] <cmr> whatever
[09:13:49] <cmr> one of those recent weeks
[09:14:00] <eddyb> last month tomorrow
[09:14:03] <flaper87> the point is that we know eddyb is capable of writing small patches too
[09:14:05] <flaper87> :P
[09:14:19] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140330030202])
[09:14:37] <huon> s/writing/submitting/
[09:14:54] <huon> well, not even that
[09:15:15] <huon> all we know is someone committed code and submitted a PR using his computer
[09:15:29] <flaper87> huon: lol, yeah! 
[09:15:38] <eddyb> huon: I may have lost a SSH key at one point
[09:15:43] <eddyb> not sure if I ever revoked it
[09:15:54] <cmr> you should go do that now :p
[09:16:00] <kimundi> eddyb: I just noticed
[09:16:07] <eddyb> the idiots who stole my USB drive wouldn't know what "SSH" bloody meant, anyways
[09:16:13] <flaper87> someone is ruining your huge-patches reputation
[09:16:26] *** Joins: huon- (huon@moz-EC676DFE.members.linode.com)
[09:16:48] <eddyb> though the password did change on my old PC. could have been an automatic thing triggered by an update. who knows
[09:17:40] <cmr> Hm
[09:17:41] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[09:18:14] <cmr> if a type is Managed/Share and never ReachesMutable or isn't InteriorUnsafe, are its contents constant?
[09:18:32] <eddyb> why Managed/Share?
[09:18:54] <cmr> because `struct Foo { x: int }` isn't immutable.
[09:18:57] <cmr> but Rc<Foo> is
[09:19:05] <huon> cancel the common factors, leaving `Mangd/Shr`
[09:19:06] <cmr> but Rc<AnythingReachingUnsafe<T>> isn't
[09:19:07] <eddyb> !InteriorUnsafe means its contents are constant
[09:19:14] <cmr> no it doesn't.
[09:19:23] <cmr> it means they can only be mutated through a &mut T
[09:19:29] <eddyb> are we talking deep immutability or shallow constant?
[09:19:37] <cmr> constant a la a static
[09:19:43] <cmr> unchanging
[09:19:48] <eddyb> deep or shallow?
[09:20:19] <cmr> shallow
[09:20:29] <cmr> I suppose
[09:20:33] <cmr> so Rc<Anything> would be
[09:20:34] <eddyb> that's just !InteriorUnsafe
[09:20:44] <cmr> but it isn't
[09:20:54] <eddyb> how so?
[09:20:58] <huon> let mut x = 1;
[09:21:06] <huon> 1 is !InteriorUnsafe
[09:21:12] <cmr> struct Foo { x: int }; let mut x: Foo = something();
[09:21:13] <eddyb> &x isn't mutable
[09:21:24] <huon> but `x` is
[09:21:31] <eddyb> not sure why you're mixing lvalues in
[09:21:46] <eddyb> cmr: at which point do you need what information?
[09:22:05] <huon> the value `1` can be changed via x... it's not immutable... how is this confusing?
[09:22:06] <cmr> http://llvm.org/docs/LangRef.html#tbaa-metadata
[09:22:08] <eddyb> let x = 1; can be a SSA value; let x: int; is a mutable lvalue
[09:22:10] <cmr> pointsToConstantData
[09:22:20] <cmr> s/Data/Memory/
[09:23:03] <eddyb> http://llvm.org/docs/AliasAnalysis.html#the-pointstoconstantmemory-method
[09:23:08] <eddyb> cmr: we're talking pointers
[09:23:16] <cmr> yes.
[09:23:30] <eddyb> so x doesn't get metadata
[09:23:35] <eddyb> &x or &mut x does
[09:23:40] <kimundi> strcat: Is there a specific reason why you changed `append` to methods instead of removing it completely?
[09:23:47] <cmr> well %struct.Foo* does...
[09:23:53] <strcat> kimundi: hard to remove something that's so widely used
[09:23:58] <cmr> but that can be to an alloca'd slot.
[09:24:05] <strcat> kimundi: it's more concise than push in some cases
[09:24:47] <eddyb> cmr: you can't use the type to get an alloca's mutability
[09:25:05] <eddyb> cmr: usually, if it's in an alloca, it's mutable
[09:25:23] <cmr> sure you can? loads from an Rc<T> are going to be constant
[09:25:31] <kimundi> strcat: Yeah, I was working on a patch that experimented with that. How about a new default method for Extendable that goes (self, iter) -> Self as a more generic way to express this?
[09:25:32] <eddyb> how is that an alloca?
[09:25:32] <cmr> after creation, that pointer doesn't change.
[09:25:39] <cmr> well, it could be an alloca.
[09:25:50] <eddyb> cmr: you can't assume anything about allocas
[09:25:56] <cmr> eddyb: sure you can!
[09:26:02] <eddyb> even immutable locals require mutability
[09:26:02] <cmr> we're emitting them after all..
[09:26:20] <cmr> it's per-operation (load/store) metadata
[09:26:44] <eddyb> cmr: only certain forms of let declarations are truly immutable
[09:27:00] <cmr> even a `let mut` of an Rc, the Rc is going to be immutable.
[09:27:23] <cmr> (after construction; the initial load doesn't need the annotation)
[09:27:37] <eddyb> cmr: and of those, Copy & no InteriorUnsafe is the one I want to optimize for (-> SSA variable)
[09:27:45] <eddyb> cmr: huh?
[09:27:54] <eddyb> cmr: the pointer within Rc is not an alloca
[09:28:03] <cmr> I'm not talking about the pointer within it
[09:28:13] <eddyb> let mut x = Rc::new(5);
[09:28:18] <eddyb> x = Rc::new(6); // oops
[09:28:35] <eddyb> not sure what you are talking about :/
[09:28:52] <eddyb> you can't use Managed/Share here, they don't help
[09:29:22] <cmr> that's the counterexample I was looking for, thank you for finally getting to it :p
[09:29:56] <eddyb> well, I should let you mark not all allocas as immutable
[09:30:11] <eddyb> and have you spent hours debugging it, only to realize you can't really do it ;)
[09:30:34] <eddyb> erm, bad phrasing
[09:30:39] <eddyb> s/not all/some/
[09:36:21] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[09:36:28] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[09:38:18] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:39:29] <eddyb> hmmm
[09:40:00] <eddyb> cmr, strcat: would it be sane to use &'static RcBox<T> in Rc<T> instead of a raw pointer?
[09:40:24] <cmr> no.
[09:40:26] <eddyb> rusti: std::mem::size_of::<Option<(&'static int,)>>()
[09:40:27] -rusti- 16
[09:40:33] <eddyb> riiight
[09:40:34] <cmr> its contents can change.
[09:40:43] <cmr> it needs to be a *mut
[09:40:52] <cmr> it's 1) aliasable, 2) mutable
[09:40:54] <eddyb> cmr: it already uses Cell for the refcounts
[09:41:11] <eddyb> flaper87: what was the story with &'static Unsafe?
[09:41:47] <cmr> I don't believe it can exist
[09:41:52] <flaper87> eddyb: you can't borrow an unsafe, immutable static item
[09:41:57] <eddyb> aww
[09:42:04] <flaper87> or better, a static item with unsafe interior
[09:42:05] <eddyb> flaper87: so you can't mutate it?
[09:42:16] <flaper87> an imm static item*
[09:42:33] <cmr> well, &'static Unsafe can't exist in safe code.
[09:42:40] <flaper87> right
[09:43:04] <eddyb> I thought we were going to use that to put non-mut statics in .data instead of .rodata
[09:43:17] <eddyb> and allow safe atomics in statics
[09:44:22] <eddyb> hmm, why do we have ExprVstore and ExprVec?
[09:44:23] <flaper87> well, you can have atomics in statics, you just can't take their address unless they're mutable statics
[09:44:28] <eddyb> seems like needless complication
[09:44:49] <eddyb> flaper87: yeah, but mutable statics are unsafe
[09:45:09] <eddyb> mmmaybe we can use Share there?
[09:45:42] <eddyb> a Share static mut should be safe to borrow immutable
[09:47:05] <eddyb> &[...] is ExprVstore(ExprVec(...), ExprVstoreSlice)
[09:47:15] <eddyb> I guess DST will clean that up
[09:47:22] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:47:22] *** ChanServ sets mode: +o pnkfelix
[09:47:53] <cmr> eddyb: that's not actually true, in the face of #[thread_local]
[09:48:05] <eddyb> hmm?
[09:48:13] <strcat> but #[thread_local] doesn't work on windows until we are switched to mingw-w64
[09:48:29] <strcat> and we haven't gotten it working on android yet afaik
[09:48:34] <eddyb> cmr: atomics are Share
[09:48:38] <cmr> a reference to a thread-local static mut will change if your task changes threads.
[09:48:50] <cmr> (or, rather, will be invalid?)
[09:49:03] <eddyb> you can exclude those
[09:49:13] <eddyb> they don't really obey static laws
[09:49:38] <cmr> thread locals need to be a part of our type system, then.
[09:50:38] <cmr> we can't really be using information outside of the type system in type system decisions.
[10:04:35] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Quit: huon)
[10:05:09] *** huon- is now known as huon
[10:09:47] <eddyb> cmr: at the edge of Rust's type system
[10:09:51] *** Joins: eibwen (kvirc@moz-6C3E0A2E.dip0.t-ipconnect.de)
[10:10:05] <cmr> hm?
[10:10:06] <eddyb> lays dormant a foundation for the next generation
[10:10:19] <eddyb> cmr: sorry, felt dramatic for a second there
[10:10:23] <cmr> :p
[10:10:47] <cmr> it's a shame you need to forgo type inference with fancy type systems.
[10:11:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:13:01] <eddyb> aaaand now I need to start using Iterator<&T>
[10:13:26] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[10:14:03] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:14:07] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:14:08] <eddyb> lol, this method is a placeholder
[10:27:09] *** Quits: b (b@moz-55CA322E.org) (Ping timeout)
[10:27:25] *** Joins: b (b@moz-55CA322E.org)
[10:34:03] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[10:41:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:42:09] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[10:43:20] *** Joins: angdev (uid7041@moz-E77DEB21.irccloud.com)
[10:43:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:16:34] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[11:16:34] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/6GTheg
[11:16:34] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[11:21:35] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[11:21:35] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/VHShBg
[11:21:35] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[11:21:36] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[11:21:36] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/5ebqwg
[11:21:36] <ghrust> 13rust/06auto 1445f2d83 15Brian Anderson: dist: Add libbacktrace to source tarballs
[11:21:36] <ghrust> 13rust/06auto 1484e9c06 15Brian Anderson: mk: distcheck --uninstall
[11:21:37] <ghrust> 13rust/06auto 14d2686c7 15Brian Anderson: mk: Workaround distcheck failure on mac. #13224...
[11:21:39] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[11:24:15] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[11:24:59] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Quit: 04â†)
[11:26:13] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[11:29:04] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[11:33:45] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[11:36:36] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: ì „ ì´ë§Œ ê°‘ë‹ˆë‹¤.)
[11:41:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:43:22] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:46:49] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:51:12] *** Joins: hyunjunekim (Mibbit@7D74E938.F9F187B.FCFA478E.IP)
[12:16:49] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[12:19:50] <eddyb> /home/eddy/Projects/rust/src/librustc/middle/typeck/check/_match.rs:651:34: 651:37 error: mismatched types: expected `&syntax::ast
[12:20:34] <eddyb> acrichto: I'm getting my errors cut off :(
[12:20:56] <huon> eddyb: is it your editor?
[12:22:03] <eddyb> huon: I heard of a similar bug
[12:22:24] <eddyb> hmm, maybe grep gets killed too early
[12:23:47] *** huon is now known as huon|afk
[12:30:50] <hyunjunekim> I have some question! What is mean for FulFill error? : )
[12:32:12] <cmr> hyunjunekim: in what context?
[12:32:59] <hyunjunekim> cmr: for example, this error : error: instantiating a type parameter with an incompatible type `std::option::Option<dom::bindings::js::JS<dom::element::Element>>`, which does not fulfill `Pod`
[12:33:19] <cmr> ah
[12:33:40] <hyunjunekim> cmr: sometime I saw fulfill error.
[12:33:44] <eddyb> hyunjunekim: capitalization is important. FulFill != "fulfill"
[12:33:52] <eddyb> I was searching for an enum variant
[12:34:12] <hyunjunekim> ok : )
[12:34:13] <eddyb> shouldn't JS<T> be Pod/Copy?
[12:34:21] <cmr> hyunjunekim: it means you're trying to use it with a type that has a `Pod` bound (like `fn foo<T: Pod>(x: T)`) but the type you gave it wasn't Pod
[12:34:42] * eddyb doesn't see much point to a GC where you have to clone handles)
[12:35:47] <cmr> eddyb: iirc there are a lot of rooting concerns
[12:36:01] <eddyb> right, roots
[12:36:02] <cmr> the copy constructor in c++ does rooting
[12:36:17] <hyunjunekim> Aha
[12:36:18] <cmr> or it may have been the move constructor
[12:36:42] <hyunjunekim> cmr: Thank you.
[12:37:29] <strcat> cmr: both would have to
[12:37:39] <cmr> maybe it was both!
[12:37:47] <cmr> yeah both makes sense
[12:37:48] <strcat> but I don't really think you'd have a move ctor at all
[12:37:54] <strcat> you'd just have a copy ctor
[12:39:37] <cmr> rusti: let x = 42; let y = &'static x; y
[12:39:41] -rusti- pastebinned 16 lines of output: http://ix.io/bnh
[12:39:51] <cmr> heh
[12:39:55] <cmr> that's a weird span for 'static
[12:41:02] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:41:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:41:36] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[12:43:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[12:51:30] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[13:12:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:23:15] *** Quits: japaric (japaric@3DD6B4D0.E67A32BD.5C7588CA.IP) (Connection reset by peer)
[13:25:41] *** Joins: japaric (japaric@4553B077.F3E5B3F6.F4D5766F.IP)
[13:32:06] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:32:43] *** Quits: angdev (uid7041@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[13:53:03] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[13:57:04] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Client exited)
[14:01:06] *** Joins: edwardw (edwardw@C3D32C6E.E4C8743.30C05AB6.IP)
[14:14:17] *** Quits: hyunjunekim (Mibbit@7D74E938.F9F187B.FCFA478E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:19:00] *** Joins: gimpf (gimpf@moz-66A5AAF0.adsl.highway.telekom.at)
[14:19:20] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[14:20:29] <cmr> huon|afk: eddyb: irsy is completely up to date.
[14:20:59] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:31:24] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[14:32:35] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[14:34:04] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:36:03] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[14:37:13] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[14:37:41] <eddyb> strcat: I need some kind of container. or container adapter :/
[14:37:56] <strcat> playpen! or you mean a rust container :(
[14:38:10] <eddyb> strcat: vectors and hash maps that you can only push to/insert in
[14:38:17] <strcat> why
[14:38:29] <eddyb> and elements are under indirection, like ~T or P<T>
[14:38:33] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:38:49] <eddyb> strcat: something that works with &Container but doesn't require RefCell
[14:39:04] <eddyb> I need to add elements to a container and keep a borrowed reference to their interiors
[14:39:32] <eddyb> strcat: ty::ctxt already does this in a hacky way
[14:40:03] *** Quits: Nekit1234007 (Nekit12340@4D86C49F.ABE6C08B.4707F662.IP) (Ping timeout)
[14:40:45] <eddyb> strcat: without it, I can't hope to safely handle any kind of inlined AST pointers after a move away from @
[14:47:12] <eddyb> strcat: can I complain more about how terrible all this old code is?
[14:47:51] <eddyb> strcat: I'm tempted to turn a bunch of things into the "with closure" patterns just so I don't have to care
[14:48:44] <eddyb> strcat: not starting Chrome, only 1GB RAM usage :D
[14:48:57] <strcat> ;\
[14:49:06] * strcat has 64MiB ram usage in X11 before starting stuff
[14:49:39] <strcat> chromium is using 800MiB atm, thunderbird 300MiB (which is really sad) ;\
[14:49:48] <eddyb> strcat: for me it's one of those stupid addition illusions
[14:49:58] <eddyb> if I look in the process list, it's only small numbers
[14:50:09] <eddyb> but if I use a script to add them up, 1GB
[14:50:19] <strcat> look in chrome://memory
[14:50:25] <eddyb> strcat: it's not open
[14:50:52] <strcat> adblock plus -> 110MiB
[14:50:54] * strcat sighs
[14:51:58] <strcat> adblock plus uses more than systemd/udevd/logind/journald + X11 + i3/i3bar/xss-lock + pdnsd + chrony + NetworkManager + wpa_supplicant
[14:52:12] <strcat> which is what I have when I boot
[14:52:35] <eddyb> craaaap "request authorization for imgur" opens chrome
[14:52:35] <strcat> (and the system dbus)
[14:52:46] <strcat> since kdbus doesn't work for me yet ;s
[14:53:14] <eddyb> aaaand idiotic chrome just sent all my open tabs that I had when it crashed to the bit void
[14:54:00] <eddyb> oh, it's smarter now, I have them in "recently closed"
[14:54:40] <eddyb> why is my DNS down? huh
[14:54:48] * strcat has his own dns server
[14:54:59] <strcat> % drill www.google.com | grep Query
[14:55:01] <strcat> ;; Query time: 0 msec
[14:55:03] <strcat> ;p
[14:55:10] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[14:55:43] <eddyb> strcat: http://imgur.com/ZGArYYX
[14:55:59] <strcat> well it's your fault for using kde
[14:56:04] <strcat> skype ;\
[14:56:12] <eddyb> oh, right, I forgot to kill the darn thing
[14:56:38] <eddyb> aaand it starts again on its own. of course. thanks telepathy
[14:57:30] <strcat> anyway having a local caching dns server is nice
[14:58:01] <strcat> makes parallel queries to multiple upstream dns servers + caches as long as the ttl lets it
[14:59:00] <eddyb> if only there was anything nice at the end of the tunnel
[14:59:03] *** Joins: Nekit1234007 (Nekit12340@4D86C49F.ABE6C08B.4707F662.IP)
[14:59:09] <eddyb> all this work for removing @ and maybe 100MB less RAM usage
[14:59:18] <strcat> switch to i3 from kde ;)
[14:59:34] <strcat> you'll drop a gigabyte right there
[15:00:05] <eddyb> I want kf5
[15:00:34] * strcat doesn't know what that is
[15:00:38] <strcat> extra/phonon-qt5 4.7.1-1
[15:00:40] <strcat>     The multimedia framework for KF5
[15:00:42] <strcat> ;s
[15:00:58] <strcat> this plasma-framework stuff?
[15:01:15] <eddyb> strcat: kf5 is the successor of kde4
[15:01:21] <eddyb> if the numbers weren't enough of a hint :P
[15:04:32] <jdm> should either be kde5 or ke04
[15:04:45] <jdm> er, no
[15:04:52] <jdm> kdf4
[15:05:01] * jdm swears he knows hex
[15:05:51] <eddyb> boy oh boy am I ruining my old PRs with these changes
[15:06:09] <eddyb> at least I can use error-guided development in Rust
[15:14:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:26:16] <eddyb> error: aborting due to 583 previous errors
[15:28:22] *** Quits: eibwen (kvirc@moz-6C3E0A2E.dip0.t-ipconnect.de) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:33:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:41:28] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:43:25] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:43:33] <eddyb> strcat: is there a way to use mremap and have it not do anything if it can't expand in-place?
[15:44:06] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:44:06] <strcat> eddyb: yes
[15:44:08] <strcat> but why
[15:44:14] <eddyb> strcat: TypedArena
[15:44:21] <strcat> MREMAP_FIXED
[15:44:24] <eddyb> I'd rather have one contiguous chunk if possible
[15:44:37] <eddyb> and use a vector instead of a linked list
[15:44:50] <eddyb> a small vector if we had one handy
[15:44:50] <strcat> what if it has to move?
[15:44:58] <eddyb> strcat: hmm?
[15:45:06] <strcat> what if mremap has to move it
[15:45:16] <eddyb> I want it to give me an error or something
[15:45:19] <strcat> yes
[15:45:19] <eddyb> so I can allocate a new chunk
[15:45:22] <strcat> ah
[15:45:44] <strcat> is that really better than pointers to chunks in a vector?
[15:46:18] <eddyb> from a kernel design PoV, it feels better. not sure if the double syscall is worth it
[15:47:43] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:48:04] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:48:12] <eddyb> strcat: isn't one contiguous mapping better than a few thousand scattered ones?
[15:48:46] <strcat> I guess so :)
[15:49:18] <strcat> you only want to use mmap if the arenas are big though
[15:49:31] * strcat shrugs
[15:49:46] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:49:48] <eddyb> I don't expect anyone to use TypedArena without having to worry about hundreds of pages
[15:50:11] <strcat>        The xallocx function resizes the allocation at ptr in place to be at least size bytes, and returns the real size of the
[15:50:13] <strcat>        allocation. If extra is non-zero, an attempt is made to resize the allocation to be at least (size + extra) bytes, though
[15:50:15] <strcat>        inability to allocate the extra byte(s) will not by itself result in failure to resize. Behavior is undefined if size is
[15:50:17] <strcat>        0, or if (size + extra > SIZE_T_MAX).
[15:50:19] <strcat> jemalloc
[15:50:22] <eddyb> nice paste
[15:50:31] <strcat> ;p
[15:50:37] <strcat> man page
[16:00:17] *** Joins: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP)
[16:02:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:16:54] <eddyb> huon|afk: I just figured why arenas won't just fly :(
[16:17:26] <eddyb> huon|afk: you can't prevent reuse
[16:17:56] <erickt> eddyb: how so?
[16:18:37] <eddyb> folding takes P<Expr> and returns P<Expr>, for example
[16:19:13] <eddyb> how do you prevent someone from reusing sub-expressions or even returning the entire thing as they got it?
[16:20:16] <erickt> I think I just jumped in the middle of a conversation :) are you saying they won't work in general, or in a specific scenario?
[16:20:43] <eddyb> erickt: in the AST
[16:24:50] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[16:30:11] *** Quits: edwardw (edwardw@C3D32C6E.E4C8743.30C05AB6.IP) (Ping timeout)
[16:30:57] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[16:36:23] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Quit: Leaving...)
[16:37:26] *** Joins: edwardw (edwardw@17C4C11E.3A7E5B9F.CBB0B5C2.IP)
[16:40:03] *** Quits: edwardw (edwardw@17C4C11E.3A7E5B9F.CBB0B5C2.IP) (Ping timeout)
[16:40:46] *** Joins: edwardw (edwardw@9366486F.7FC992B3.B3B412E5.IP)
[16:41:36] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[16:41:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 149073586 to 141c2ccf0: 02http://git.io/N3iJvQ
[16:41:36] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[16:41:36] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[16:41:37] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/GxdBjQ
[16:41:37] <ghrust> 13rust/06auto 1445f2d83 15Brian Anderson: dist: Add libbacktrace to source tarballs
[16:41:37] <ghrust> 13rust/06auto 1484e9c06 15Brian Anderson: mk: distcheck --uninstall
[16:41:37] <ghrust> 13rust/06auto 14d2686c7 15Brian Anderson: mk: Workaround distcheck failure on mac. #13224...
[16:41:39] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[16:41:58] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Quit: Leaving...)
[16:45:48] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:46:58] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Input/output error)
[16:47:16] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[16:50:26] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[16:55:35] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:56:02] *** Quits: edwardw (edwardw@9366486F.7FC992B3.B3B412E5.IP) (Ping timeout)
[16:58:42] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[16:59:30] <nmatsakis> eddyb: presumably if you were putting your AST into arenas, your folder would have a 'source and 'dest lifetime, and it would translate from &'source Ast to &'dest Ast 
[16:59:45] <nmatsakis> so not only do you prevent reuse, but you guarantee folding
[17:00:43] <eddyb> nmatsakis: but that means annotating the entire AST :/
[17:00:50] <nmatsakis> eddyb: uh, yes?
[17:01:03] <eddyb> if everything I did is for nothing, I might ragequit
[17:01:59] <eddyb> nmatsakis: there is a certain appeal to ownership, though
[17:02:08] <eddyb> move_iter makes me happy
[17:03:26] <cmr> nmatsakis: is the general idea of "lifetime associated with a value, not a scope" sound / could be implemented in the future? I recall some discussion of it but no details.
[17:04:15] <nmatsakis> cmr: I don't know what that means, maybe #6393?
[17:04:26] <cmr> ah yes, this is #6393
[17:04:42] <nmatsakis> cmr: I think there is something there but I am absolutely not interested in impl'ing it until we prove current system sound :)
[17:05:06] <nmatsakis> or at least have a nice model to work with 
[17:05:08] <cmr> I *think* it might be #6393 at least
[17:05:10] * nmatsakis been working on that a bit
[17:05:11] <cmr> nmatsakis: yes, certainly.
[17:05:41] <eddyb> nmatsakis: would a PR changing @T in the ast to P<T> where P<T> is a ~T with a monad/functor API (and maybe using a custom allocator) be merged?
[17:06:07] * eddyb doesn't know why he put so much work into this
[17:07:19] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[17:07:41] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[17:07:52] *** Quits: Kxepal (Miranda@moz-BAA550EE.pppoe.mtu-net.ru) (Ping timeout)
[17:08:27] *** Joins: Kxepal (Miranda@moz-3D529086.pppoe.mtu-net.ru)
[17:13:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:14:45] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[17:14:50] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[17:15:23] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:19:53] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:24:54] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:25:47] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:27:58] *** Joins: edwardw (edwardw@586492D3.E4C8743.30C05AB6.IP)
[17:34:43] *** Joins: mib_e1351a (Mibbit@6D71664E.48960495.CC1A2609.IP)
[17:37:05] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[17:37:25] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:39:06] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[17:40:45] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[17:40:45] *** ChanServ sets mode: +o tjc
[17:42:43] *** Quits: mib_e1351a (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:43:00] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[17:43:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:43:53] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: ì „ ì´ë§Œ ê°‘ë‹ˆë‹¤.)
[17:45:43] *** Quits: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com) (Quit: Konversation terminated!)
[17:50:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:51:37] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[17:51:37] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/GxdBjQ
[17:51:37] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[17:54:48] <doener> eddyb: you planned to kill expr::Dest, right?
[17:55:02] <eddyb> doener: in a way
[17:55:24] *** Quits: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP) (Ping timeout)
[17:56:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:56:54] <doener> eddyb: heh :-) I'm asking because I'd like to see the call to to_appropriate_datum() gone from trans_unadjusted()
[17:57:33] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Connection reset by peer)
[17:58:17] <doener> eddyb: the rationale given for it doesn't really make sense, because we don't emit lifetime intrinsics. But simply removing the call hurts compile times in the LLVM module passes. I guess because the load might then happen in a different block than the store :-(
[17:59:24] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[18:00:18] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:01:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:01:30] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[18:03:15] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[18:03:15] *** ChanServ sets mode: +qo brson brson
[18:11:42] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[18:11:42] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/YbpU5g
[18:11:42] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[18:11:45] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[18:11:45] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/zz1pkw
[18:11:45] <ghrust> 13rust/06auto 142deca58 15Eunchong Yu: Json doesn't need to depend on IoError to implement Encodable #13230
[18:11:45] <ghrust> 13rust/06auto 14ba2fcc1 15bors: auto merge of #13230 : Kroisse/rust/encodable-json, r=erickt...
[18:11:45] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[18:16:02] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Quit: I'm sure it's perfectly safe)
[18:16:46] *** Joins: andrew-__ (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP)
[18:16:49] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[18:17:23] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[18:17:32] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:35:28] *** Joins: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP)
[18:43:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:54:10] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[18:57:46] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[19:02:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: brb)
[19:02:25] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[19:03:33] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:03:33] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:04:32] *** Joins: Armavica_ (virgile@moz-AD428ED7.ens.fr)
[19:06:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:17:21] *** Quits: Armavica_ (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[19:26:57] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[19:32:03] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[19:38:24] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[19:39:18] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[19:39:59] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:42:18] *** Quits: edwardw (edwardw@586492D3.E4C8743.30C05AB6.IP) (Quit: Leaving...)
[19:42:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:43:25] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[19:49:19] *** Quits: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Ping timeout)
[19:58:10] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[20:01:36] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[20:01:37] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/zz1pkw
[20:01:37] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[20:03:37] <brson> any pr's that are ready to go?
[20:03:39] <brson> bors is bored
[20:04:15] <flaper87> lol, poor bors
[20:04:17] <acrichto> brson: release notes?
[20:04:25] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:05:16] <acrichto> brson: want me to 0.10-pre => 0.10 ?
[20:05:53] <brson> acrichto: no, I want to branch this time so we don't spend a few days advertising 0.10 before release
[20:06:12] <brson> branch -> version bump -> release -> merge
[20:06:14] <acrichto> buildbot can handle that?
[20:06:25] <acrichto> I suppose it won't go through bors
[20:06:25] <brson> yes, the dist snap is a manual push
[20:06:36] <acrichto> ah, yes, indeed
[20:06:39] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[20:06:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/_vOViQ
[20:06:39] <ghrust> 13rust/06auto 1424cc78d 15Alex Crichton: Add draft 0.10 release notes
[20:06:39] <ghrust> 13rust/06auto 14a7e057d 15bors: auto merge of #13189 : alexcrichton/rust/relnotes, r=brson
[20:06:39] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[20:06:41] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[20:06:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/EIOwCw
[20:06:41] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[20:06:59] <brson> acrichto: you could bump the version number though and push to a branch?
[20:07:02] <brson> *no '?'
[20:07:45] <acrichto> hehe
[20:07:54] <acrichto> I'll do that
[20:08:45] <brson> or even push to dist-snap once the relnotes merge
[20:08:52] <brson> I don't think there are any other major changes to go
[20:09:14] <acrichto> I'm gonna leave out the privacy change if I can
[20:09:37] <acrichto> that issue about 0.10-pre only appearing once in the codebase is quite relevant righ tnow
[20:10:32] <brson> yeah, there are a *lot* of version strings
[20:10:49] <brson> make sure to get main.mk, which doesn't say '0.10-pre' anywhere but does say '0.10' and '-pre'
[20:11:13] <brson> this file lists some of the big places to remember to change https://github.com/brson/rust-admin/blob/master/how-to-do-a-release.txt
[20:11:27] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:11:27] *** ChanServ sets mode: +o tjc
[20:12:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:12:19] <acrichto> will do
[20:12:32] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[20:13:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:15:40] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[20:23:35] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:23:37] <acrichto> brson: want me to edit the detailed release notes wiki with appropriate headings?
[20:29:07] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[20:29:36] <brson> acrichto: yes, thanks
[20:30:08] <flaper87> brson: Should an issue in Rust be created for an RFC that is being worked on?
[20:30:31] <flaper87> I think it would be useful to have a reference bug in rust/issues too
[20:30:58] <flaper87> for instance, that issue could be referenced in FIXMEs in the code base if necessary
[20:31:13] <brson> flaper87: definitely for RFC's that are approved. maybe for RFC's that are not
[20:31:17] <acrichto> https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes <- calling all dox!
[20:31:21] <brson> depends on the case
[20:31:29] <flaper87> brson: yeah, I meant for those approved
[20:33:48] <flaper87> Does using the same B-RFC tag make sense? I think we should probably have an B-RFC-Approved (or something shorter than that)
[20:33:51] <flaper87> brson: ^
[20:34:02] <flaper87> just to avoid mixing old RFC issues with new RFC trackers
[20:34:56] <brson> flaper87: new tag i think
[20:35:16] <flaper87> sounds good
[20:36:08] <acrichto> flaper87: out of curiosity, are there more changes to static in the pipeline?
[20:36:32] <flaper87> acrichto: nope
[20:36:46] <acrichto> flaper87: ok cool
[20:36:54] <flaper87> acrichto: btw, before cutting the release, I think we should merge this https://github.com/mozilla/rust/pull/13228
[20:37:14] <flaper87> I've seen that one coming up a couple of times so, it'd be nice to have that fix
[20:37:46] <acrichto> sounds reasonable, if it gets reviewed in time, sure
[20:38:38] <flaper87> acrichto: I just added a comment and mentioned nmatsakis 
[20:38:49] <acrichto> cool
[20:38:56] <flaper87> the fix seems good, but it just works for the current code
[20:39:04] <flaper87> I mean, it won't work with opt-in bound traits
[20:40:17] <flaper87> brson: I can't create new tags but no hurries, whenever you've a chance
[20:45:21] *** Joins: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com)
[20:48:19] <brson> flaper87: added a tag
[20:48:26] * flaper87 has to create a more useful asterisk module with rust. That dummy example doesn't help much
[20:48:30] <flaper87> brson: thanks
[20:48:54] *** Quits: Nekit1234007 (Nekit12340@4D86C49F.ABE6C08B.4707F662.IP) (Ping timeout)
[20:49:19] * flaper87 tagged the first B-RFC-approved issue: https://github.com/mozilla/rust/issues/13231
[20:51:02] *** nrc is now known as nrc|afk
[20:51:05] <acrichto> brson: do you know why the nightly bots have a status of "waiting" rather than being white on the grid view?
[20:51:08] <acrichto> http://buildbot.rust-lang.org/grid?branch=auto&width=10
[20:51:18] <acrichto> mac/win nightly aren't buliding anything
[20:51:19] <acrichto> (linux is)
[20:52:47] <brson> acrichto: they are always on a timer counting down until 4 am or so
[20:52:57] <acrichto> ah
[20:53:21] <acrichto> in other news, the nightly mac builder has been fixed
[20:53:42] *** Quits: andrew-__ (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP) (Input/output error)
[20:54:04] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:55:20] <flaper87> also, I guess RFC issue trackers should go through the milestone nomination process too
[20:55:55] <flaper87> brson: ^
[21:01:21] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[21:03:52] *** Joins: Nekit1234007 (Nekit12340@987F2484.B242805A.4707F662.IP)
[21:04:52] <brson> flaper87: yes
[21:05:04] *** Quits: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP) (Ping timeout)
[21:06:52] *** Joins: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[21:08:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:09:42] *** aatch|work is now known as aatch
[21:10:22] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[21:10:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:10:56] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Connection reset by peer)
[21:11:02] <flaper87> acrichto: did you mean to say that `unsafe{}` shouldn't be needed? https://github.com/mozilla/rust/issues/13232#issue-30547481
[21:11:15] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[21:11:47] <flaper87> the code in the issue, as-is, requires an unsafe block to get a &mut-pointer
[21:12:32] <acrichto> flaper87: ah, by "as is" I meant "what I wrote"
[21:12:40] <acrichto> but yes, it should not require 'unsafe'
[21:13:44] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:14:35] <kimundi> brson: I guess something like this is too involved for a webpage example? https://gist.github.com/Kimundi/9902505
[21:16:58] <brson> kimundi: that may not be too long, and it does look pretty good. thanks!
[21:17:27] <brson> would be improved with more rusticity, like matching on patterns
[21:17:34] <brson> but i think that's the leading candidate
[21:17:40] <brson> *matching on eneums
[21:18:02] <brson> a little shorter would be better
[21:18:04] <kimundi> The problem are all the unwraps there :P Darn Options making nice readable stack code weird ;)
[21:18:31] <kimundi> brson: I have an idea for shorten this, hang on
[21:19:12] <flaper87> acrichto: mmh, that should probably be allowed just if the type is `Share`
[21:19:51] <acrichto> (see the title of the issue)
[21:20:07] <flaper87> T_T (facepalm)
[21:20:25] <flaper87> at least I wasn't wrong, that would've beena  double-epic-fai
[21:21:30] *** Quits: gimpf (gimpf@moz-66A5AAF0.adsl.highway.telekom.at) (Quit: Leaving.)
[21:21:38] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[21:21:38] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/_vOViQ
[21:21:38] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[21:21:45] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Connection reset by peer)
[21:22:04] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[21:22:12] *** Joins: Armavica_ (virgile@moz-AD428ED7.ens.fr)
[21:22:17] <acrichto> :)
[21:22:28] *** Quits: Armavica_ (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[21:23:19] *** Quits: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com) (Ping timeout)
[21:23:43] <kimundi> brson: Ditched the stack: https://gist.github.com/Kimundi/9902675
[21:25:58] *** Joins: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com)
[21:26:35] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[21:26:35] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/MCSyGQ
[21:26:35] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[21:26:39] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[21:26:39] <ghrust> [13rust] 15bors pushed 25 new commits to 06auto: 02http://git.io/dUjprQ
[21:26:39] <ghrust> 13rust/06auto 144e8ce3f 15Alex Crichton: rustc: Switch struct fields to private by default...
[21:26:39] <ghrust> 13rust/06auto 149a91ed2 15Alex Crichton: std: Switch field privacy as necessary
[21:26:39] <ghrust> 13rust/06auto 14850826d 15Alex Crichton: collections: Switch field privacy as necessary
[21:26:41] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[21:28:59] *** huon|afk is now known as huon
[21:31:11] <acrichto> brson: do you think we'll have the install page up by 0.10?
[21:31:19] <acrichto> I could also just not put the url in the release notes
[21:31:39] <kimundi> Hm, random thought: If we had integers in the type system, we could do "let [a, b] = vec.pop_n()" with pop_n being generic over a [T, ..N]...
[21:33:28] <brson> acrichto: yes, we're past the point of no return. it's going to happen
[21:33:36] <acrichto> lol
[21:33:48] <acrichto> www.rust-lang.org/install.html ?
[21:33:57] <brson> kimundi: http://brson.github.io/rust-www/
[21:34:05] <brson> the aesthetics leave something to be desired still
[21:34:25] <acrichto> I suppose the release notes shouldn't link to brson.github.io though
[21:34:26] <kimundi> Heh, nice.
[21:35:04] <brson> i wish it could be like 'it looks like languages you are familiar with' (example), 'but it something somethings' (super-rustic example)
[21:35:14] <brson> but for now one example is enough
[21:35:27] <kimundi> brson: Hm, I wonder if it would be better to write this using chars instead of slices...
[21:36:34] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[21:36:34] <ghrust> [13rust] 15bors 04force-pushed 06auto from 143a7b075 to 14a7e057d: 02http://git.io/N3iJvQ
[21:36:34] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[21:36:35] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[21:36:35] <ghrust> [13rust] 15bors pushed 25 new commits to 06auto: 02http://git.io/ZBrHYA
[21:36:35] <ghrust> 13rust/06auto 14f2a5c7a 15Alex Crichton: rustc: Switch struct fields to private by default...
[21:36:36] <ghrust> 13rust/06auto 141a59855 15Alex Crichton: std: Switch field privacy as necessary
[21:36:36] <ghrust> 13rust/06auto 141e89384 15Alex Crichton: collections: Switch field privacy as necessary
[21:36:38] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[21:38:09] <huon> sfackler: https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes#cross-crate-syntax-extensions ;P
[21:39:19] <brson> for some reason 'shutting down' rust-commits has turned into 'stop sending useful emails, but fill the moderation queue with spam'
[21:41:39] <acrichto> brson: I saw that we have a particular message for the tag message, but should the commit  message also be special for the release?
[21:42:00] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:45:57] <kimundi> brson: If you end up keeping the calculator example, use this one: https://gist.github.com/Kimundi/9902675 - I replaced words() with chars() to be less potentially confusing.
[21:46:46] <acrichto> words seems a bit more involved b/c it shows off that getting the words of a string is super easy and that you can pattern match on strings
[21:47:00] <acrichto> most languages have character iterators, but word iterators are a little more rare
[21:47:01] <kimundi> acrichto: Hm, also true
[21:48:49] <brson> acrichto: We haven't in the past made any effort to make the release commit special - it's just been a random commit. I guess this one will be 'bump to 0.10'
[21:49:19] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[21:49:19] <ghrust> [13rust] 15alexcrichton pushed 1 new commit to 06dist-snap: 02http://git.io/pR99MQ
[21:49:19] <ghrust> 13rust/06dist-snap 14a5681d2 15Alex Crichton: Bump version to 0.10
[21:49:19] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[21:49:27] * acrichto waits
[21:49:51] <brson> for a long time
[21:50:05] <brson> i think the linux dist snap takes like 5 hours
[21:50:12] <acrichto> jeez
[21:50:14] <acrichto> what's it doing?!
[21:50:19] <acrichto> make check x 3?
[21:50:19] <kimundi> Mostly I'm just think about the word iterator being historically a bit controversial, as it doesn't actually split on unicodes definition of words. However if we look at it from the angle "iterating and matching on words is super simple here", then I could extend the example to accept both "+" and "add", to make that more obvious
[21:50:35] <brson> acrichto: it builds, then tars up the source, then untars the source and rebuilds and tests it all again
[21:50:47] <acrichto> brson: ah, I see the linux nightly bots doing that now
[21:50:48] <brson> it does now skip 'make check' and goes straight to 'distcheck'
[21:51:04] <acrichto> seems like it's a good idea to do that
[21:51:31] <brson> in fact the source tarball was broken yesterday, so i agree :)
[21:51:37] <acrichto> lol
[21:51:58] <acrichto> FIONBIO <- 10 points if you know what this means
[21:52:26] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:52:26] *** ChanServ sets mode: +o tjc
[21:53:52] <kimundi> acrichto: How about this for more involved words/string matching: https://gist.github.com/Kimundi/9903196 ?
[21:54:23] <Luqman> acrichto: something, non blocking io?
[21:54:52] <acrichto> kimundi: seems reasonable, I'm not totally convinced it's the best example though, but I like the string matching!
[21:55:01] <acrichto> Luqman: you got farther than I, I parsed it as "F" "ION" "BIO"
[21:55:08] <acrichto> and I was quite confused
[21:55:17] <kimundi> yeah, it gets to complicated to fast for a website example :P
[21:55:28] <SiegeLord> That's a very strange calculator... why can't it be some sort of integrator? Like "up left down" etc
[21:55:32] <Luqman> acrichto: i just remember seeing it somewhere not too long ago :P
[21:56:08] <kimundi> SiegeLord: Hmmm, interesting idea
[21:56:39] <kimundi> SiegeLord: What exactly do you mean with integrator?
[21:57:00] *** flaper87 is now known as flaper87|afk
[21:57:09] <SiegeLord> Err... it integrates the movements. I guess it doesn't necessarily have to
[22:00:34] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[22:01:36] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[22:01:36] <ghrust> [13rust] 15bors pushed 25 new commits to 06auto: 02http://git.io/oOBfNw
[22:01:36] <ghrust> 13rust/06auto 14f2a5c7a 15Alex Crichton: rustc: Switch struct fields to private by default...
[22:01:36] <ghrust> 13rust/06auto 141a59855 15Alex Crichton: std: Switch field privacy as necessary
[22:01:36] <ghrust> 13rust/06auto 141e89384 15Alex Crichton: collections: Switch field privacy as necessary
[22:01:38] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[22:06:44] *** Quits: det (chris@moz-EAECB432.lv.lv.cox.net) (Connection reset by peer)
[22:07:08] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[22:08:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:08:54] <jrick> hmmm, wonder if this is actually true, considering the build issue I had last night http://www.reddit.com/r/rust/comments/21ffem/contiguous_stacks_in_go/cgcj7al?context=2
[22:13:32] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[22:16:41] <huon> jrick: we still use the segmented stacks infrastructure to detect (some cases of) stack overflow
[22:17:28] <jrick> ah ok
[22:18:03] <jrick> any plans to rip that out? :)
[22:18:32] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[22:18:51] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[22:18:53] *** Quits: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com) (Ping timeout)
[22:19:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:21:27] *** Joins: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com)
[22:21:32] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[22:21:37] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[22:21:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14806be8f to 14a7e057d: 02http://git.io/N3iJvQ
[22:21:37] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[22:21:39] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[22:21:39] <ghrust> [13rust] 15bors pushed 25 new commits to 06auto: 02http://git.io/tkN5Og
[22:21:39] <ghrust> 13rust/06auto 14f2a5c7a 15Alex Crichton: rustc: Switch struct fields to private by default...
[22:21:39] <ghrust> 13rust/06auto 149a3d04a 15Alex Crichton: std: Switch field privacy as necessary
[22:21:39] <ghrust> 13rust/06auto 148ad7e54 15Alex Crichton: collections: Switch field privacy as necessary
[22:21:41] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[22:22:44] *** Joins: det (chris@moz-EAECB432.lv.lv.cox.net)
[22:29:16] <brson> kimundi acrichto: here's another iteration http://brson.github.io/rust-www/
[22:29:48] <acrichto> brson: hm, it looks quite similar for me
[22:30:08] <acrichto> maybe I'm blind
[22:30:16] <brson> probably just cached
[22:30:27] <brson> this one moves the laundry list down next to code
[22:30:45] <brson> oh huh, github just gave me the stale vers
[22:30:56] <acrichto> https://www.dropbox.com/s/1fd34eqnzyf3a0l/Screenshot%202014-03-31%2015.30.45.png
[22:31:01] <acrichto> hasn't shown up yet for me :(
[22:31:07] <acrichto> oh there we go
[22:32:14] <acrichto> brson: it seems a bit odd that the code/list are cut off below the fold for me
[22:34:21] <kimundi> looks nice and simple :)
[22:35:56] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:38:42] <SiegeLord> It seems to have too much whitespace...
[22:39:32] <SiegeLord> And it's a bit schizophrenic on the number and widths of columns it has
[22:41:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:43:04] <acrichto> flaper87|afk: do you want to fill in https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes#changes-in-treatment-of-static-mut-variables ?
[22:44:12] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[22:44:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:46:26] *** Joins: ecr (chatzilla@moz-EE515B72.dhcp4.washington.edu)
[22:47:08] <brson> what is the best system for creating HTML slides?
[22:47:43] <ecr> brson: maybe checkout pandoc. it supports several HTML slide generation options
[22:47:54] <ecr> plus you can write the actual content in markdown
[22:48:55] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:49:10] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:49:58] <ecr> disclaimer: I literally only discovered this feature last night and I've only tried the beamer/PDF version of it.
[22:50:09] <kimundi> Heh, the feature list next to the example makes me thinking: what if each bullet point would be clickable and changes the example to something using the feature.
[22:50:40] <huon> kimundi++
[22:50:56] <huon> (might be too gimicky, though)
[22:50:59] <ChrisMorgan> brson: different people like different ones. I haven't been satisfied with any of the HTML options that I found, so I went with SVG via Inkscape + JessyInk.
[22:51:33] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[22:51:33] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14f95a519 to 14a7e057d: 02http://git.io/N3iJvQ
[22:51:33] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[22:51:34] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[22:51:34] <ghrust> [13rust] 15bors pushed 25 new commits to 06auto: 02http://git.io/0r59gw
[22:51:34] <ghrust> 13rust/06auto 14f2a5c7a 15Alex Crichton: rustc: Switch struct fields to private by default...
[22:51:34] <ghrust> 13rust/06auto 149a3d04a 15Alex Crichton: std: Switch field privacy as necessary
[22:51:35] <ghrust> 13rust/06auto 148ad7e54 15Alex Crichton: collections: Switch field privacy as necessary
[22:51:37] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[22:55:36] <SiegeLord> Heh, I just looked at Scala's website... their circular design would work so much better with Rust's gear ;)
[22:58:27] <sfackler> huon: asdf;lkajs;dflkja;lskdfj;ajksf;alksdfj;alskdfj
[22:59:36] <acrichto> brson: looks like distcheck failed on linux due to some debuginfo tests :\
[23:00:31] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[23:04:28] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[23:05:41] *** nrc|afk is now known as nrc
[23:07:06] <brson> :(
[23:07:18] <acrichto> is it easy to update gdb?
[23:07:23] <acrichto> or get the gdb versions in sync
[23:07:37] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[23:07:50] <brson> not particularly
[23:07:51] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[23:09:57] <brson> i'll fire up the vm and try to replace gdb
[23:10:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:12:28] <acrichto> brson: apparently cmpxchg now takes two orderings in llvm -- https://github.com/llvm-mirror/llvm/commit/ca396e39
[23:12:34] <acrichto> (just an interesting fact)
[23:13:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:17:22] <brson> acrichto: strange
[23:17:49] <brson> i wonder why - seems like could be done with relaxed + explicit barrier
[23:18:00] <brson> though i guess that's true for many atomics
[23:18:46] <acrichto> the restrictions on the failure order I found interesting
[23:18:54] <acrichto> it can't be release and it must not be stronger than the success ordering
[23:19:09] <acrichto> man I need to learn these
[23:24:19] <brson> pandoc's slides are not giving me much joy
[23:26:08] <ecr> aw :(
[23:26:21] *** Joins: andrew-__ (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP)
[23:27:37] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[23:29:54] <ecr> why do you need HTML slides specifically as opposed to PDF or something else?
[23:30:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:32:04] <brson> ecr: i don't, but i like HTML
[23:32:21] <ecr> fair enough
[23:32:30] <acrichto> what's the target triple for 64-bit windows?
[23:32:38] <acrichto> 64-bit mingw I guess
[23:33:35] <acrichto> ah, nvmd
[23:33:53] *** kimundi is now known as zz_kimundi
[23:35:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:37:15] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:48:34] *** Quits: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP) (Ping timeout)
[23:52:24] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[23:52:24] *** ChanServ sets mode: +o tjc
[23:53:43] *** Joins: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP)
