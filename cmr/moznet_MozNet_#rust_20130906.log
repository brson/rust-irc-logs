[00:02:28] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[00:03:15] *** Quits: eskatrem (user@moz-50DD1DF1.dyn.user.ono.com) (Client exited)
[00:05:49] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:06:36] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[00:06:51] <engla> what's the distribution for the bigint?
[00:07:41] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[00:07:43] <engla> and does it have a nonzero chance of OOM on generating one :)
[00:08:05] <dcrewi> uniform
[00:08:18] <dcrewi> it hadn't even occured to me that one might want other distributions
[00:08:45] *** Quits: ChrisMorgan (chris@moz-80C478D2.its.monash.edu.au) (Ping timeout)
[00:08:53] *** jorendorff is now known as jorendorff_away
[00:10:11] <strcat> engla: well I assume you pass a range
[00:10:39] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:11:02] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[00:14:22] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:14:50] *** Joins: matt (Mibbit@moz-3AB1E206.nycmny.fios.verizon.net)
[00:14:56] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:14:56] *** ChanServ sets mode: +o tjc
[00:15:20] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:15:42] <engla> yeah I thought it was really "a random bigint" fro
[00:15:49] <engla> as in std::rand::random()
[00:16:47] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[00:16:49] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[00:17:08] <cmr> bjz: which milestone?
[00:17:08] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[00:17:18] <bjz> cmr: ?
[00:17:31] <cmr> "cmr: that's a milestone you need to inclue in TWiR :)"
[00:17:43] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[00:18:20] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[00:19:09] <matt> how often is the libuv submodule refreshed from the joyent master?
[00:19:33] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:19:33] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[00:19:47] <bjz_> cmr: https://github.com/mozilla/rust/issues/9000
[00:19:59] <bjz_> cmr: x)
[00:20:25] *** Joins: ChrisMorgan (chris@moz-80C478D2.its.monash.edu.au)
[00:20:25] <engla> matt: here's the next try https://github.com/mozilla/rust/pull/8994
[00:20:41] <cmr> bjz_: oh, nice!
[00:21:12] <bjz_> cmr: issue #9000
[00:21:17] <bjz_> x)
[00:21:38] <cmr> Well, it's also a good PR
[00:21:41] * ChrisMorgan thinks DNS resolution is worthy of the number #9000
[00:21:51] <bjz_> hehe
[00:23:08] <bjz_> tjc: HAHA: ./build/tests/teststest --test
[00:23:20] <tjc> bjz_: heh
[00:23:38] <bjz_> testtesttest?
[00:23:50] <bjz_> teststesttest
[00:24:02] <bjz_> teststestteststest
[00:24:11] <bjz_> --test
[00:24:16] * bjz_ will stop now
[00:24:35] * tjc is getting testy
[00:24:37] <tjc> ;-)
[00:24:43] <ChrisMorgan> Good, because much more of that would really have tested our patience.
[00:25:53] <bjz_> budumtish
[00:26:29] * engla mumbles something inappropriate about grabbing someone's testes
[00:28:22] <bjz_> engla: now now, you'd better stop testing the boundaries of rust's dev policy
[00:28:39] <bjz_> engla: you might have tjc running after you
[00:28:50] <bjz_> he might err... grab your...
[00:28:54] <bjz_> 8.
[00:28:57] <benh> boo
[00:29:10] *** Joins: ged (deveiant@moz-610E9711.org)
[00:29:30] <brson> how do you convert u32 to char now?
[00:29:32] <bjz_> owait. (unfortunate emoticon there)
[00:29:37] * Infiltrator leaves (wtf?)
[00:29:46] <bjz_> brson: char::from_u32
[00:29:54] <bjz_> brson: returns an Option
[00:30:06] <benh> (Is Option<char> one word yet?)
[00:30:19] <bjz_> don't think so
[00:30:22] <cmr> rusti: std::sys::size_of::<Option<char>>()
[00:30:23] -rusti- 16u
[00:30:46] <mm> rusti: std::sys::size_of::<char>()
[00:30:47] -rusti- 4u
[00:31:04] <brson> bjz_: thanks
[00:31:12] <bjz_> benh: and yes, could be in the future
[00:32:05] <mm> 16 seems larger than I'd expect
[00:32:52] <mm> rusti: (std::sys::size_of::<u8>(), std::sys::size_of::<Option<u8>>())
[00:32:53] -rusti- (1u, 16u)
[00:33:28] <brson> yeah, that's pretty wasteful
[00:34:25] *** Quits: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP) (Quit: carllerche)
[00:34:30] <strcat> Option<char> and Option<bool> can be the same size as char and bool
[00:34:37] <strcat> just hasn't been implemented yet
[00:35:23] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:36:24] <bjz_> mm: that's why the size is undefined - so optimisations can be made in the future
[00:36:51] <strcat> the Option discriminant is always 64-bit atm
[00:37:04] <strcat> it will be changed to only be as big as needed (+ padding)
[00:37:35] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:37:38] <strcat> the only special case atm is for non-nullable ptrs
[00:38:08] <benh> I wonder how involved these optimizations can get
[00:38:39] *** Joins: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:38:39] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[00:38:54] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[00:39:15] <jmgrosen> yet another ICE :(
[00:40:28] <jmgrosen> another 'self related one, it seems
[00:40:52] <strcat> rusti: 5 as bool
[00:40:53] -rusti- <anon>:5:9: 5:18 error: cannot cast as `bool`, compare with zero instead
[00:40:53] -rusti- <anon>:5          5 as bool
[00:40:53] -rusti-                   ^~~~~~~~~
[00:40:53] -rusti- error: aborting due to previous error
[00:40:53] -rusti- application terminated with error code 101
[00:40:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:41:31] <engla> that's great
[00:42:12] <kmc> yessss
[00:42:46] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[00:43:42] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[00:43:52] <jmgrosen> should a .join() method be implemented on a vector like javascript, or a string like python?
[00:43:58] *** Joins: Larry (larryfox@moz-8D6C9B2A.nycmny.fios.verizon.net)
[00:44:48] <gavinb> What are the Rusticians' opinions on a simple template string library? Something very much like Python has in http://docs.python.org/3/library/string.html#template-strings
[00:45:35] <cmr> gavinb: we already have that
[00:45:46] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:45:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/IrmDMQ
[00:45:46] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:46:04] <cmr> rusti: format!("{} {:?} {x}", x=5, 123, 'c')
[00:46:05] -rusti- <anon>:5:37: 5:40 error: expected ident, positional arguments cannot follow named arguments
[00:46:05] -rusti- <anon>:5          format!("{} {:?} {x}", x=5, 123, 'c')
[00:46:05] -rusti-                                               ^~~
[00:46:05] -rusti- error: aborting due to previous error
[00:46:05] -rusti- application terminated with error code 101
[00:46:06] <jmgrosen> cmr: we have println! but not quite python Template s
[00:46:16] <cmr> rusti: format!("{} {:?} {x}", 123, 'c', x=123)
[00:46:17] -rusti- ~"123 \'c\' 123"
[00:46:32] <cmr> rusti: format!("{} {x} {:?}", 123, 'c', x=123)
[00:46:33] -rusti- ~"123 123 \'c\'"
[00:46:52] <gavinb> Oh - I didn't realise the funky new format stuff supported all that.
[00:46:58] <cmr> "funky" :P
[00:47:15] <cmr> it was inspired quite heavily by python's
[00:47:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:47:57] <gavinb> Well actually what I had in mind was passing in a HashMap - does format! support that?
[00:48:44] <engla> I don't think so. The docs are here btw http://static.rust-lang.org/doc/std/fmt.html
[00:48:45] <brson> 'rusticians' :)
[00:48:50] <cmr> rusti: use std::hashmap::HashMap; let x = HashMap::new(); x.insert("123", 5u); println!("{}", x);
[00:48:53] -rusti- pastebinned 10 lines of output: http://ix.io/7Sx
[00:49:00] <jmgrosen> gavinb, have any preference on whether a .join() method be implemented on a vector like javascript, or a string like python?
[00:49:06] <cmr> gavinb: it can, but doesn't yet.
[00:49:10] <bjz_> brson: I like that!
[00:49:17] * cmr still prefers rusties
[00:49:19] <lkuper> rustafarians
[00:49:35] <acrichto> gavinb: one of the major selling points of format!/fmt! is compile-time verification, and we can't verify that all keys are in a hashmap at compile-time sadly
[00:49:37] <tjc> we could refer to the core team as the Board of Rustees
[00:49:40] <bjz_> lkuper: all hail the FSM
[00:49:46] <engla> jmgrosen: (it does already exist btw, in std::str as .connect())
[00:49:49] <gavinb> I hadn't seen a collective noun used so wasn't sure...
[00:49:51] <bjz_> lkuper: (Flying Sprocket Monster)
[00:49:58] <cmr> tjc: hah!
[00:50:12] <cmr> acrichto: why do we have to?
[00:50:14] <gavinb> acrichto: yes, definitely makes sense
[00:50:15] <jmgrosen> engla: â€¦ah, I hadn't noticed that >.<
[00:50:16] <lkuper> bjz_: I thought you probably didn't mean finite-state machine
[00:50:22] <bjz_> haa
[00:50:22] *** Quits: heftig (heftig@moz-A8847A1E.dip0.t-ipconnect.de) (Ping timeout)
[00:50:23] <acrichto> cmr: compile-time verification?
[00:50:40] <jmgrosen> engla: although an iterator instead of a vector would be nice
[00:50:44] <cmr> acrichto: the Default implementatino would iterate over the keys and do some {k=v} type thing, for HashMap<K: Default, V: Default>
[00:50:49] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:50:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/aZW-9w
[00:50:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:50:50] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:50:50] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/HTN69w
[00:50:50] <ghrust> 13rust/06auto 14b3f7f75 15Brian Anderson: std::rt: Some I/O cleanup
[00:50:50] <ghrust> 13rust/06auto 14c218694 15Brian Anderson: std::rt: Add libuv bindings for getaddrinfo
[00:50:51] <ghrust> 13rust/06auto 140948f54 15Brian Anderson: std::rt: Add get_host_addresses function...
[00:50:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:51:10] <engla> jmgrosen: was just about to say that. The upside of the vector is that you can iterate it twice to allocate exactly the size needed before starting
[00:51:16] <cmr> Unless you mean something than just printing a hashmap
[00:51:21] <gavinb> jmgrosen: I use Python way more than JavaScript, but I always find it a bit weird typing: ",".join(s)
[00:51:25] <acrichto> cmr: oh we can definitely implement Default for HashMap, I think gavinb was thinking more along the lines of "format!("{foo} {bar}", *my_map)" and it extracts "foo" and "bar" values from my_map
[00:51:32] <cmr> Oh, ok.
[00:51:37] <cmr> Yeah, that doesn't belong in format!
[00:51:40] <gavinb> acrichto: yeah, pretty much
[00:51:46] <cmr> But I'd love to see a "real" template library
[00:51:52] <cmr> along the lines of jinja2
[00:51:57] <cmr> or another of the nice ones
[00:52:12] <jmgrosen> engla, yeah, there are certainly advantages; should we have both?
[00:53:08] <acrichto> brson: if you want to take a look at https://github.com/mozilla/rust/pull/8994 I can try to land it tonight
[00:53:15] <gavinb> cmr: yes - jinja2 is great
[00:53:30] <bjz_> strcat: are AdditiveIterator MultiplicativeIterator not exported?
[00:53:39] <strcat> bjz_: they are not really useful
[00:53:50] <jmgrosen> strcat: really? I've used them a lot
[00:53:51] <engla> jmgrosen: we should have the iterator version, just my opinion though. It would be confusing but it could require the iterator to implement Clone, then you have all the upsides
[00:53:56] <strcat> fold(0, |a, b| a + *b) lets you efficiently copy with refs
[00:55:11] *** jorendorff_away is now known as jorendorff
[00:55:28] <gavinb> Speaking of HashMap, are there any plans for a first-class dict type, a la Python? Or is it just too dynamic to fit in with the Rust type and compilation model?
[00:55:43] <tjc> gavinb: there aren't any plans for it
[00:55:46] <jmgrosen> and why isn't there just an `insert` method on HashMap?
[00:55:47] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[00:55:50] <tjc> maybe could be implemented as a syntax extension
[00:55:54] <cmr> jmgrosen: there.. is?
[00:56:13] *** Quits: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu) (Quit: jclements)
[00:56:15] <cmr> gavinb: yes, there's been talk of a syntax extension that generates a hashmap with the proper keys and soforth at compile time.
[00:56:22] <strcat> containers shouldn't be special cased in the language
[00:56:30] <jmgrosen> cmr: http://static.rust-lang.org/doc/std/hashmap.html ?
[00:56:33] <strcat> there are too many useful ways to implement them, even vectors
[00:56:42] <strcat> would be nicer to just have generic container literals like C++11
[00:57:06] <jmgrosen> cmr: there's swap, find_or_insert, find_or_insert_with, and insert_or_update_with, but I can't find an insert
[00:57:11] <strcat> also, std::hashmap requires the runtime with the standard constructor
[00:57:15] *** Quits: nkoep (nik@moz-A196DCE9.pool.mediaways.net) (Client exited)
[00:57:35] <engla> jmgrosen: does the compiler error out on using insert?
[00:57:37] <strcat> jmgrosen: there's insert
[00:57:46] <strcat> it's part of the implementation of the Map trait
[00:57:50] <gavinb> strcat: I see your point, I just find myself using dict all the time in Python, and creating/maintaining a HashMap is more typing/friction
[00:57:50] <strcat> MutableMap*
[00:57:58] <cmr> strcat: only for rng, the syntax extension would seed it at compiletime.
[00:57:59] <jmgrosen> ah, the docs can be confusing >.<
[00:58:06] <strcat> gavinb: you can't write new efficient containers in python
[00:58:09] <gavinb> jmgrosen: I fall into that trap all the time
[00:58:11] <strcat> rust isn't python
[00:58:32] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:58:33] <gavinb> strcat: yes indeed!
[00:58:48] <strcat> generic container literals would remove any need of a special case container
[00:58:56] <cmr> jmgrosen: http://seld.be/rustdoc/master/std/hashmap/struct.HashMap.html
[00:59:22] <strcat> std::hashmap is just one possible implementation of a hashmap (linear open addressing, SipHash, 2x growth), which is one possible implementation of a map
[00:59:44] <cmr> Hm, it seems it isn't listed there either.
[00:59:54] <acrichto> cmr: aww I went go see if std::fmt looked sane at all in the new rustdoc but I don't think it's been regenerated :(
[01:00:04] <matt> is there a way to rebuild just the libraries and not the entire compiler suite?
[01:00:04] <jmgrosen> cmr: yeah; and is this rustdoc updated frequently?
[01:00:06] <cmr> acrichto: yeah :(
[01:00:09] <cmr> jmgrosen: unfortunately not
[01:00:22] <cmr> matt: why?
[01:01:12] <gavinb> The reason I was actually asking about template strings was I was kicking around some code to add to rustpkg to generate a template directory structure and optionally fill it with some skeleton code. Basically adding a "rustpkg init foo" command.
[01:02:16] <matt> it takes a really long time to compile the whole thing, and the change i made was a minor edit in libuv, seems like it would take less time to compile that? 
[01:02:40] <tjc> matt : right now, if you change one crate, it recompiles every other crate that depends on it
[01:02:45] <tjc> regardless of the size of your change
[01:03:15] <Luqman> \o/ https://github.com/mozilla/rust/pull/9006 
[01:03:20] <matt> my change was in the uv submodule( in the C) 
[01:03:23] <cmr> matt: well the compiler uses those libraries.
[01:03:38] <engla> cool 
[01:03:44] <cmr> jld: you are awesome!
[01:03:54] *** Quits: ChrisMorgan (chris@moz-80C478D2.its.monash.edu.au) (Ping timeout)
[01:04:03] <matt> @cmr ok
[01:04:20] <cmr> matt: you can do make NO_REBUILD=1 if you just waqnt to run the unit tests.
[01:04:29] <cmr> make check-stage1-std NO_REBUILD=1 for example
[01:06:02] <jld> It's funny -- back when I started on the enum discriminant size thing, I thought it'd be a pretty small change that I could use to test the change to fix enum body alignment.
[01:07:27] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[01:07:57] <cmr> and `C`, to use
[01:07:59] <cmr> + * the same discriminant size that the corresponding C enum would
[01:08:04] <cmr> jld: I heavily r- that
[01:08:29] <cmr> It's not specified, and it can be changed with a compiler switch, and isn't even consistent with the same compiler between architectures
[01:08:49] <cmr> I sympathize with the desire, and I really want it too, but it's impossible to be correct.
[01:09:02] <jld> cmr: It can be changed with a compiler switch, but if you use that compiler switch you break ABI compatibility.
[01:09:21] <jld> i.e., it's one of those "if you use this switch, you need to have recompiled libc with it also" flags.
[01:09:43] <jld> (Or, if it's not explicitly documented like that, IMO it should be.)
[01:09:59] <cmr> well, portable code doesn't use enums :p
[01:10:05] <cmr> (C code, that is)
[01:10:30] <SiegeLord> I did my part and removed enums in a C library I help develop 8)
[01:10:35] <acrichto> jld: one cool thing if we keep it would be a lint that checks the signatures of foreign functions and if an enum is used without #[repr(C)] wa warning is issued
[01:10:53] <cmr> jld: that is a good argument though, I might buyit
[01:10:56] <jld> acrichto: I added that to the ctypes lint pass.
[01:11:06] <acrichto> jld: aha, then I need to learn to read :P
[01:11:14] <acrichto> awesome btw :)
[01:11:45] <strcat> you should be able to just do 'enum Foo { A = 3u32, B = 4 }' if you can't already too
[01:11:47] <jld> acrichto: Accepts repr(C) or any of the fixed-size types, or univariants because they're effectively structs...
[01:12:05] <acrichto> jld: nice
[01:12:13] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:12:30] <strcat> and then C-like enums could just be a typedef
[01:12:41] <strcat> the int size
[01:13:08] <strcat> rusti: enum Foo { A = 4u }
[01:13:08] -rusti- ()
[01:13:10] <strcat> rusti: enum Foo { A = 4u32 }
[01:13:10] -rusti- ()
[01:13:18] <strcat> rusti: enum Foo { A = 4u32 } std::sys::size_of::<Foo>
[01:13:19] -rusti- fn() -> uint
[01:13:21] <strcat> rusti: enum Foo { A = 4u32 } std::sys::size_of::<Foo>()
[01:13:21] -rusti- 8u
[01:13:24] <strcat> wat
[01:13:34] <cmr> that shouldn't be accepted
[01:13:36] <strcat> rusti: enum Foo { A = 4u32, B = 16i64 } std::sys::size_of::<Foo>()
[01:13:36] <jld> acrichto: ...and a subset of nullable-pointer enums, because we're already using an Option<~T> for something in rt and it broke the build if I didn't try to recognize it.
[01:13:37] -rusti- 8u
[01:13:42] <strcat> that's awful
[01:13:48] <strcat> rusti: enum Foo { A = 4i32, B = 16i64 } std::sys::size_of::<Foo>()
[01:13:49] -rusti- 8u
[01:13:55] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:13:59] <cmr> That is probably a bug introduced by the patch that lets you use int as well as uint as the descriminant
[01:14:05] <strcat> rusti: enum Foo { A = 4i8, B } std::sys::size_of::<Foo>()
[01:14:05] -rusti- 8u
[01:14:15] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:14:22] <jld> Does const_eval give you type constraints?
[01:14:33] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:14:42] <strcat> jld: it'd be nice to do 'char' and 'bool' as special cases too
[01:15:06] <jld> strcat: I had char, but then char stopped being an int.
[01:15:09] <strcat> 11 free bits in char, 7 free bits in bool (although they all have to be zero when you actually *have* a char/bool)
[01:15:39] <strcat> jld: I mean in the mono class special cases
[01:15:46] <jld> strcat: Ah, okay.
[01:15:48] <benh> so how small is Option<i16> potentially going to be?
[01:15:56] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:15:57] <strcat> double what i16 is
[01:16:41] *** Joins: jgilbert (jgilbert@986623D2.9083A694.9CA62458.IP)
[01:16:47] <strcat> Option<T> will be size_of::<T>() + align_of::<T>()
[01:17:00] <strcat> except for the special cases (non-nullable ptrs)
[01:17:12] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[01:17:21] <benh> I hope we can come up with a lot of special cases :D
[01:17:43] <strcat> Option<bool>, Option<char>
[01:17:57] <strcat> and..... that's basically the end of it for Option
[01:18:02] <mm> benh: everyone loves a language full of special cases ;)
[01:18:02] <engla> the nullable pointer is case is also for  enum { None, Just(~T, int, int, BigStruct) }  too
[01:18:11] <gavinb> Who's the main rustpkg maintainer?
[01:18:12] <benh> struct FileDescriptor(i32); None as -1!
[01:18:15] <cmr> gavinb: tjc
[01:18:20] <jld> strcat: Option<Either<A, B>>?
[01:18:23] <engla> it just has to contain a nullable pointer
[01:18:23] <strcat> mm: it's an implementation detail
[01:18:28] <gavinb> cmr: thx
[01:18:39] <strcat> an optimization
[01:18:40] <cmr> mm: and explicitly unspecified
[01:18:53] <benh> jld: iirc that gets tricky when you try to do match thatenum { Some(ref blah) => ... }
[01:19:00] <mm> I really don't like not knowing the sizes of things in my languages ;)
[01:19:08] <mm> Makes reasoning about memory usage harder.
[01:19:32] <strcat> you can check what the size is or ask for a specific representation
[01:19:42] <mm> Well, I suppose it's just a constant factor, so yeah, easy enough to just check when you care.
[01:19:49] <cmr> That's what the #[repr] attribute is for, too.
[01:19:51] <jld> benh: It's not really different from Option<~T> -- Some() is secretly the identity, and None for that instance of Option is a value that can't possibly be a Some.
[01:19:57] <mm> cmr: What is #[repr]?
[01:20:24] <Luqman> mm: introduced as part of https://github.com/mozilla/rust/pull/9006
[01:20:28] <strcat> jld: well there are lots of clever things we could do...
[01:20:31] <strcat> for example
[01:20:31] <jld> mm: The enum representation hint/directive, added by... see above.
[01:20:36] <cmr> https://github.com/jld/rust/commit/7a75fe8c9a3532c84a1e59f4494a1501716aa65b#L2R369
[01:20:38] <strcat> ~T where T is pointer-size or smaller than pointer-size
[01:20:39] <jld> (Proposed to be added by, I guess I should say.)
[01:20:42] <strcat> doesn't need to allocate.
[01:20:43] <cmr> mm: added by the PR we're discussing
[01:20:52] * mm is only half paying attention
[01:21:01] <strcat> ~~~~~~~~~~~~~int
[01:21:06] <strcat> can be 1 word, no allocs
[01:21:09] <strcat> ;p
[01:21:52] <jld> strcat: I feel like there should be some weird case where that doesn't work... but it *is* a unique pointer.
[01:21:53] <benh> rusti: let p = ~42i; let r: &int = p; let p = p;
[01:21:57] -rusti- pastebinned 8 lines of output: http://ix.io/7SA
[01:22:16] <strcat> jld: ~T where T is managed or non-managed is already 2 reprs
[01:22:29] <strcat> jld: so we'd just need to teach the ~Trait code about a 3rd case
[01:24:02] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[01:24:06] <strcat> anyway, more important fish to fry ;p
[01:24:52] <benh> like &5 + 5, that's gross!!
[01:25:54] <strcat> well, bool and char are sound now
[01:25:58] <strcat> how about a sound str? ;p
[01:26:10] * strcat has to find where the compiler does index-assign
[01:26:42] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[01:28:22] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[01:31:03] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:31:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d32df16 to 14992b558: 02http://git.io/N3iJvQ
[01:31:04] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:31:05] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:31:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rzGlaw
[01:31:05] <ghrust> 13rust/06auto 14b59ea3b 15Alex Crichton: Upgrade libuv to the current master (again)...
[01:31:05] <ghrust> 13rust/06auto 14bbfe900 15bors: auto merge of #8994 : alexcrichton/rust/upgrade-libuv, r=brson...
[01:31:06] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:31:15] <engla> do you think I can change json::Error to use &'static str instead of @~str?
[01:31:45] <engla> it's a struct of  { col: uint, line: uint, msg: @~str } and msg is always a &'static str
[01:32:02] <engla> I know there are more important stuff to change in json..
[01:33:35] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:34:13] *** jorendorff is now known as jorendorff_away
[01:34:45] <cmr> jld: LGTM, r+
[01:35:09] *** Quits: austincheney (quassel@8276C73B.985A737F.603BFF2.IP) (No route to host)
[01:35:13] *** Joins: austincheney (quassel@8276C73B.985A737F.603BFF2.IP)
[01:36:47] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[01:37:24] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[01:38:58] <strcat> rusti: 5[5]
[01:38:59] -rusti- <anon>:5:9: 5:12 error: cannot index a value of type `<VI0>`
[01:38:59] -rusti- <anon>:5          5[5]
[01:39:00] -rusti-                   ^~~
[01:39:00] -rusti- error: aborting due to previous error
[01:39:00] -rusti- application terminated with error code 101
[01:39:38] <strcat> rusti: let xs = ~"foo"; xs[0] = 2
[01:39:38] -rusti- <anon>:5:26: 5:30 error: cannot assign to immutable str content
[01:39:39] -rusti- <anon>:5          let xs = ~"foo"; xs[0] = 2
[01:39:39] -rusti-                                    ^~~~
[01:39:39] -rusti- error: aborting due to previous error
[01:39:39] -rusti- application terminated with error code 101
[01:40:15] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:40:53] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:40:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14bbfe900 to 14992b558: 02http://git.io/N3iJvQ
[01:40:53] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:40:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:40:54] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/x0ElYw
[01:40:54] <ghrust> 13rust/06auto 147a75fe8 15Jed Davis: Add parser for `#[repr(...)]`; nothing uses it yet....
[01:40:54] <ghrust> 13rust/06auto 14b74bcb3 15Jed Davis: Initial implementation of enum discrimnant sizing.
[01:40:55] <ghrust> 13rust/06auto 14aadeecb 15Jed Davis: Lint non-FFI-safe enums.
[01:40:56] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:41:28] <strcat> rusti: 5[5] =2
[01:41:28] -rusti- <anon>:5:9: 5:12 error: cannot index a value of type `<VI0>`
[01:41:28] -rusti- <anon>:5          5[5] =2
[01:41:28] -rusti-                   ^~~
[01:41:28] -rusti- error: aborting due to previous error
[01:41:28] -rusti- application terminated with error code 101
[01:42:25] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[01:43:02] *** jorendorff_away is now known as jorendorff
[01:43:08] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[01:45:08] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[01:45:16] *** Joins: ChrisMorgan (chris@moz-9CF007DA.its.monash.edu.au)
[01:45:48] <jld> cmr: If we're going to merge that branch as-is, maybe I should edit the description to take out the "just to get feedback" part....
[01:46:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:47:22] *** Quits: snerd (motk@moz-E535583C.nonstopcrunchy.net) (Ping timeout)
[01:48:05] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[01:48:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:50:03] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[01:50:29] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:52:15] *** Joins: alisdair (textual@moz-487B34D8.eng.wind.ca)
[01:54:52] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:57:34] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[02:00:32] *** Joins: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP)
[02:02:03] *** Quits: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:02:31] *** Quits: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net) (Quit: Leaving.)
[02:02:37] *** Quits: a_m0d|home (a_m0d@moz-205FE182.acanac.net) (Quit: Leaving.)
[02:02:52] <acrichto> jld: I also just realized that changing enum layouts in memory is a fairly large-ish semantic change, so could you update the relevant ffi/manual docs about enums? Mainly just to make sure they don't say that they're word-sized
[02:03:37] *** Joins: Jesin (Jessin_@moz-130D8933.cc.lehigh.edu)
[02:04:19] *** Quits: Larry (larryfox@moz-8D6C9B2A.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:04:52] *** Joins: jstevans (Instantbir@moz-71C7B54D.bootp.virginia.edu)
[02:05:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:05:52] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14afc98a7 to 14992b558: 02http://git.io/N3iJvQ
[02:05:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:05:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:05:53] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/WsXJbg
[02:05:53] <ghrust> 13rust/06auto 14ec23656 15Alex Crichton: Upgrade libuv to the current master (again)...
[02:05:53] <ghrust> 13rust/06auto 14762b30f 15bors: auto merge of #8994 : alexcrichton/rust/upgrade-libuv, r=brson...
[02:05:53] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:06:33] *** Quits: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com) (Quit: Leaving.)
[02:08:03] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[02:08:39] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:10:09] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[02:10:54] <jld> acrichto: Since #9006 has already been r+'ed, I'll file an issue.
[02:11:46] <acrichto> jld: cool, could you also file an issue for more tests as well? Or if you feel libstd and friends generate enough coverage it may not be necessary
[02:12:36] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[02:12:54] <jmgrosen> rusti: std::sys::size_of::<uint>()
[02:12:55] -rusti- 8u
[02:13:07] <jmgrosen> wait, what? why didn't size_of work in my code
[02:13:41] <jmgrosen> ah, never mind
[02:13:53] <jld> acrichto: No, that definitely needs more tests.  Including some compile-fail tests for the new errors.
[02:14:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:15:01] *** Quits: jgilbert (jgilbert@986623D2.9083A694.9CA62458.IP) (Ping timeout)
[02:15:29] <jmgrosen> ChrisMorgan: I like the idea of having struct fields for headers with RequestWriter; however, that creates some bad effects for size: a RequestWriter<TcpStream> is >100kB!
[02:15:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:15:51] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14762b30f to 14992b558: 02http://git.io/N3iJvQ
[02:15:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:15:52] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:15:52] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/uAsDUA
[02:15:52] <ghrust> 13rust/06auto 148651011 15Lindsey Kuper: Factor shared code out into default GenericPath methods.
[02:15:52] <ghrust> 13rust/06auto 1459291eb 15Lindsey Kuper: Minor doc cleanup.
[02:15:52] <ghrust> 13rust/06auto 1466134fb 15bors: auto merge of #8909 : lkuper/rust/default-methods-refactor, r=alexcrichton...
[02:15:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:16:00] <engla> acrichto: the escapes came out wrong anyway in markdown http://static.rust-lang.org/doc/std/fmt.html#escaping
[02:16:08] <ChrisMorgan> jmgrosen: I was wondering about that and intended to take a look at how large it ends up.
[02:16:22] <acrichto> engla: yeah I saw that and it makes me sad :(
[02:17:02] <jmgrosen> ChrisMorgan: I think something that big is too impractical; could you use methods accepting different typed things instead?
[02:17:25] <ChrisMorgan> How are you figuring the size?
[02:17:50] <jmgrosen> std::sys::size_of::<RequestWriter<TcpStream>>()
[02:18:09] <engla> jmgrosen: just use ~RequestWriter ?
[02:18:21] <jld> Uh... #9006 failed `make tidy` and I'm not sure why.
[02:18:37] <jld> http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/410/steps/test/logs/stdio has a bunch of complaints about Windows test files (?) but it's a Linux test.
[02:18:42] <jmgrosen> engla: yeah, I'm using that now, but I think that's still a lot of overhead to have, even it it's on the heap
[02:18:52] <ChrisMorgan> Hmm... it's got a BufferedStream, bool, SocketAddr, HeaderCollection, Method, Url.
[02:18:54] <acrichto> jld: oh :( I think that's my fault
[02:19:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:19:12] <engla> BufferedStream is 128kB right
[02:19:24] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[02:19:38] <jmgrosen> engla: ah, that would explain it; I didn't realize it buffered that much
[02:19:44] *** Joins: jclements (jclements@moz-E4774872.dsl.snlo01.pacbell.net)
[02:20:07] <engla> jmgrosen: sounds rather nice to not have nested allocations, instead have one pointer to that as one struct
[02:20:15] <ChrisMorgan> jmgrosen: "methods accepting different typed things instead"? Example?
[02:20:27] <acrichto> jld: https://github.com/mozilla/rust/pull/9011
[02:20:43] <jmgrosen> engla: yeah, I agree with that point; I thought a lot of the space was going towards headers rather than buffering
[02:20:46] <ChrisMorgan> Yeah, I have 64KB read and write buffers at present. Thought I'd had them smaller than that.
[02:21:21] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[02:21:26] <jmgrosen> ChrisMorgan: like have `fn set_content_length(&mut self, length: uint)` on the header collection, then turn it into a string right there
[02:21:39] <jmgrosen> and then put it in a hashmap or similar
[02:22:00] <ChrisMorgan> jmgrosen: that would involve *considerably* more overhead
[02:22:28] <jmgrosen> ChrisMorgan: why?
[02:22:38] <acrichto> strcat: mind if I give that a higher priority as well?
[02:22:45] <strcat> acrichto: sure
[02:22:51] <acrichto> strcat: not sure why it's not breaking all the builds...
[02:23:15] <ChrisMorgan> Certainly more processing overhead (serialising to and from), assuming all headers are checked like that.
[02:23:40] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[02:23:49] <jmgrosen> but don't you do the serializing when you send them, anyway? it's just doing it earlier rather than later
[02:24:05] *** Quits: kimundi (kimundi@moz-77FD6CAA.dip0.t-ipconnect.de) (Ping timeout)
[02:24:34] <ChrisMorgan> Memory? I guess you'd have the map with enum keys, so that wouldn't be notably less efficient.
[02:25:08] *** Quits: matt (Mibbit@moz-3AB1E206.nycmny.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:25:24] <ChrisMorgan> jmgrosen: this way, you get serialisation or deserialisation exactly once. That way, you'd need it if you wanted to check a value from more than one place.
[02:25:47] <ChrisMorgan> You'd need it more than once, I mean.
[02:26:00] <jmgrosen> yeah, I guess that's true
[02:27:28] *** Joins: kimundi (kimundi@moz-FA4E113C.dip0.t-ipconnect.de)
[02:28:35] <ChrisMorgan> I should probably make it clear in my design that it's not intended that the (Request|Response)(Reader|Writer) are not the only way to do things; you can quite reasonably use the lower level API, which will get you parsed headers in order, though it needs a little more separation from the intended "normal wrapping".
[02:28:47] *** Quits: feduser (feduser@9813480F.BB9BFC11.650F25DA.IP) (Quit: Leaving)
[02:28:57] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:30:37] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:31:55] *** kimundi is now known as zz_kimundi
[02:32:12] <jmgrosen> ChrisMorgan: are you planning to make an even simpler API as well? I really love how simple python's requests is
[02:32:14] <ChrisMorgan> jmgrosen: I considered the methods way of doing it, but ended up deciding that a massive struct probably met the requirements a little better.
[02:32:25] <jmgrosen> ok
[02:32:34] <jmgrosen> just wanted to make sure you'd considered it :P
[02:32:47] <ChrisMorgan> Actually, that was my first thought.
[02:33:12] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:33:36] <jmgrosen> oh, and are things like post request body escaping in the scope of your library?
[02:33:38] <ChrisMorgan> Yeah, I was actually thinking this morning that it's far enough along that I should do that to avoid the pain of working with the current API. But whether to include it in libhttp or shift it into a separate crate, I don't know.
[02:33:54] *** Quits: jclements (jclements@moz-E4774872.dsl.snlo01.pacbell.net) (Ping timeout)
[02:33:55] <ChrisMorgan> That's part of the content encoding: yes.
[02:34:26] <jmgrosen> is there a nice way to do post requests at the moment, or is that still coming?
[02:34:40] <ChrisMorgan> No. Nor to read them.
[02:34:47] <jmgrosen> ok
[02:34:58] <jmgrosen> open to PRs? :)
[02:34:58] *** Quits: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[02:35:04] <ChrisMorgan> Absolutely!
[02:35:18] <ChrisMorgan> I'd love to have more contributors.
[02:35:36] <jmgrosen> well, in my mind, http is pretty essential to have in a language :P
[02:35:47] <jmgrosen> is the plan eventually to get it into the standard library, do you know?
[02:36:26] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[02:36:29] <ChrisMorgan> Undecided, I think.
[02:36:38] <ChrisMorgan> See https://github.com/mozilla/rust/issues/6167
[02:36:43] *** Joins: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com)
[02:37:28] <jmgrosen> well, I think having a pure rust http lib in the standard library would be the best
[02:37:38] <jmgrosen> although I'd take a C-based one over none at all
[02:37:55] *** Joins: jclements (jclements@moz-E4774872.dsl.snlo01.pacbell.net)
[02:38:36] <ChrisMorgan> The situation in there has changed, I'm just adding a comment now.
[02:38:46] <jmgrosen> ok
[02:38:50] *** zz_kimundi is now known as kimundi
[02:39:32] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[02:39:35] *** Quits: jclements (jclements@moz-E4774872.dsl.snlo01.pacbell.net) (Ping timeout)
[02:39:44] *** Parts: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) ()
[02:40:11] *** Joins: jclements (jclements@moz-E4774872.dsl.snlo01.pacbell.net)
[02:40:56] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:40:56] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1466134fb to 14992b558: 02http://git.io/N3iJvQ
[02:40:56] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:40:56] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:40:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/HlMaKQ
[02:40:56] <ghrust> 13rust/06auto 141f04489 15Alex Crichton: Don't run lint over gyp files (they just fail anyway)
[02:40:56] <ghrust> 13rust/06auto 14a980f28 15bors: auto merge of #9011 : alexcrichton/rust/fix-lint, r=thestinger
[02:40:57] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:42:36] *** Quits: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com) (Ping timeout)
[02:45:17] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[02:45:43] *** jorendorff is now known as jorendorff_away
[02:45:53] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:46:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:46:30] <ChrisMorgan> jmgrosen: there, I've commented https://github.com/mozilla/rust/issues/6167#issuecomment-23915760
[02:46:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:47:10] <jmgrosen> Yay for auto-updating github comments :P
[02:48:06] <ChrisMorgan> ... when they work
[02:48:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:49:57] *** Joins: heftig (heftig@moz-2345FF9F.dip0.t-ipconnect.de)
[02:55:19] *** Joins: snerd (motk@moz-E535583C.nonstopcrunchy.net)
[02:57:47] *** Quits: alisdair (textual@moz-487B34D8.eng.wind.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:01:33] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[03:03:06] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[03:08:06] *** Quits: ChrisMorgan (chris@moz-9CF007DA.its.monash.edu.au) (Ping timeout)
[03:11:25] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: Bye)
[03:11:31] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:12:48] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[03:12:48] *** ChanServ sets mode: +o jdm
[03:13:29] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Ping timeout)
[03:15:12] *** Joins: newfprag (brandon@moz-C7AC35F5.mh.shawcable.net)
[03:15:50] *** newfprag is now known as brandon-m-skinner
[03:17:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:18:10] <klutzy> anyone experiencing failure of `use std::some::Trait;` where Trait is defined as `trait Trait<With, Some, Generics>`?
[03:18:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:19:02] <klutzy> oh wait, nevermind details
[03:20:21] <klutzy> I got "failed to resolve import `std::rt::io::Acceptor`" from `use std::rt::io::Acceptor;`. rustc built 2013-09-02
[03:22:20] <engla> klutzy: this was changed after that
[03:22:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:22:26] <engla> simply
[03:24:14] <klutzy> ah, my bad
[03:24:55] <klutzy> seems like I've pulled git but forgot to make install
[03:30:02] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:30:36] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[03:32:55] *** Quits: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net) (Input/output error)
[03:33:14] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[03:37:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:38:09] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[03:39:22] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:42:09] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[03:45:56] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:45:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/HlMaKQ
[03:45:56] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:47:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:47:49] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:48:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:49:39] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:50:56] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:50:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/EjvUUg
[03:50:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:50:56] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:50:56] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/gtCvdg
[03:50:56] <ghrust> 13rust/06auto 148651011 15Lindsey Kuper: Factor shared code out into default GenericPath methods.
[03:50:56] <ghrust> 13rust/06auto 1459291eb 15Lindsey Kuper: Minor doc cleanup.
[03:50:56] <ghrust> 13rust/06auto 14f051196 15bors: auto merge of #8909 : lkuper/rust/default-methods-refactor, r=alexcrichton...
[03:50:58] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:52:15] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[03:52:15] *** ChanServ sets mode: +ao brson brson
[04:01:20] *** Joins: ww (Mibbit@moz-7385AD13.dia.static.qwest.net)
[04:03:37] <ww> question: Has the mod_name/mod.rs module file resolution been removed from .70?  I kept getting mod_name.rs not found during compile.
[04:04:07] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:04:18] <cmr> ww: it didn't /exist/ in 0.7
[04:05:54] <zeuxcg> Are there cases where passing a struct by value is actually compiled to a pass-by-value? I'm only seeing pass by pointer on a few random examples
[04:06:33] <kimundi> passing something by value should pas it by value
[04:07:19] <kimundi> though I think it uses aan oupointer sometimes?
[04:07:26] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[04:07:31] <cmr> All the time I think
[04:07:50] <ww> ok, thanks.  thought the tutorial was describing it.
[04:08:07] <kimundi> which tutorial?
[04:08:12] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[04:08:30] <ww> http://static.rust-lang.org/doc/tutorial.html#crates-and-the-module-system
[04:08:37] <cmr> That's the documentation for git master
[04:09:17] <ww> oh ok, so it will be added later on?
[04:09:23] <cmr> it has already been added
[04:09:25] <kimundi> it already is
[04:09:28] <zeuxcg> cmr: "All the time" refers to "uses a pointer sometimes", right?
[04:09:29] <cmr> if you build from master, you'll have that feature
[04:09:35] <kimundi> ww: you'Re using a two month old version
[04:09:37] <ww> ok, thanks
[04:09:40] <cmr> zeuxcg: no, out-pointer for returns
[04:09:43] <cmr> ...I think
[04:09:54] <cmr> so, yes.
[04:10:37] <cmr> I'm looking in trans but can't really tell how function calls are translated
[04:10:57] <zeuxcg> yeah, I'm seeing both out-pointer for returns and in-pointer for arguments of struct types
[04:11:22] <zeuxcg> okay, thanks
[04:11:34] <cmr> Ok, I think you want to be looking at create_llargs_for_fn_args
[04:12:19] <cmr> maybe not
[04:13:18] <zeuxcg> I was doing test runs with emit-llvm, create_llargs_for_fn_args does not tell me anything :) need to look deeper I guess
[04:13:39] <cmr> but I don't think rust pulls any trickery, so whatever you're seeing in the LLVM is probably what we do
[04:13:48] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[04:13:49] <zeuxcg> yeah, cool
[04:13:54] <cmr> What about structs smaller than the word size, is it still a pointer then?
[04:14:24] *** Quits: BigEndian (hurp@moz-1B6DD81E.members.linode.com) (Ping timeout)
[04:14:28] *** Quits: balpert (balpert@moz-7E5ED302.members.linode.com) (Ping timeout)
[04:14:31] *** Quits: KindOne (KindOne@41432DDC.B3929A3A.34F73994.IP) (Ping timeout)
[04:14:35] <cmr> Also if you're running with -O, it might be llvm changing the function signature, because we use fastcc
[04:14:36] *** Quits: Eridius|vacation (kevin@moz-533B0DB4.us) (Ping timeout)
[04:14:44] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[04:14:50] <cmr> not sure of the exact details
[04:14:55] <zeuxcg> cmr, yes, for a struct that contains just one u8 it's still a pointer
[04:14:57] <zeuxcg> let me try with -O
[04:15:02] *** Quits: shachaf (shachaf@moz-F37E0395.members.linode.com) (Ping timeout)
[04:15:12] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Ping timeout)
[04:15:13] <zeuxcg> although wait, that'd be weird
[04:15:34] <zeuxcg> if the calling convention changes with -O flag it might mean linking problems between crates compiled with and without -O
[04:15:37] <zeuxcg> or maybe linker magic.
[04:15:42] <ww> question: what's the best practice for defining top level constants?  the const key seems to be deprecated.
[04:15:56] <cmr> it only needs to adhere to a specific ABI if it's an externally visible function.
[04:16:06] <jmgrosen> rusti: static FOO: int = 5; FOO
[04:16:06] -rusti- 5
[04:16:08] <jmgrosen> ww: ^
[04:16:19] <ww> ok thanks
[04:16:23] <zeuxcg> yeah, -O does the same thing
[04:16:27] <cmr> ww: the warning for non-uppercase statics is due to a really nasty compiler error
[04:16:38] *** Joins: BigEndian (hurp@moz-1B6DD81E.members.linode.com)
[04:16:41] *** Joins: balpert (balpert@moz-7E5ED302.members.linode.com)
[04:16:44] <cmr> zeuxcg: dunno then, acrichto or Luqman or aatch might be able to help, they have poked around in trans.
[04:16:58] *** Joins: Eridius|vacation (kevin@moz-533B0DB4.us)
[04:17:05] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[04:17:07] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[04:17:21] *** Joins: shachaf (shachaf@moz-F37E0395.members.linode.com)
[04:17:26] <Luqman> cantsin: help with?
[04:17:30] <Luqman> cmr*
[04:17:34] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[04:18:03] <cmr> Luqman: zeuxcg is wondering why/if arguments are always passed by reference in the generated LLVM, even when they are passed by value in the Rust source.
[04:18:21] <zeuxcg> I love the current behavior for big structs btw
[04:18:50] *** Joins: ChrisMorgan (chris@moz-7159513.its.monash.edu.au)
[04:18:56] *** Joins: KindOne (KindOne@moz-D55D773C.dynamic.ip.windstream.net)
[04:18:58] <acrichto> I would wonder the same thing
[04:19:02] <zeuxcg> not sure if it makes sense for small ones that just wrap values for extra type checking for example.
[04:19:06] <cmr> I agree, but it's weird to me that it's done for things smaller than the word size
[04:19:08] <aatch> zeuxcg, hmm, we should be following the C abi behaviour for by-value structs. Though it's been a while since I poked around in trans.
[04:19:09] <acrichto> I'm not sure what the answer is
[04:19:22] <aatch> zeuxcg, what platform are you on?
[04:19:33] <zeuxcg> x86-64 Linux
[04:19:36] <Luqman> we pass it by value if it's an immediate value
[04:19:39] <cmr> In fact, I'm pretty sure I remember a discussion about passing things by reference depending on the target CPU, whether it's faster to dereference the pointer or just copy the value.
[04:19:56] <zeuxcg> Luqman: what do you mean by immediate value?
[04:20:03] <aatch> Luqman, and we count small structs as immediates, if I remember correctly.
[04:20:04] <Luqman> so in `struct Foo(int); fn bar(x: Foo) {}`
[04:20:10] <Luqman> x would be by value
[04:20:11] <zeuxcg> ah!
[04:20:29] <cmr> Luqman: what disqualifies something as an immediate? what does immediate even mean?
[04:20:39] <zeuxcg> indeed
[04:20:44] <aatch> cmr, either too big or not POD
[04:20:52] <Luqman> cmr: see ty::type_is_immediate
[04:20:55] <zeuxcg> struct Foo(u8) gets passed by value
[04:21:03] <zeuxcg> struct Foo { x: u8 } gets passed by pointer
[04:21:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:21:27] <Luqman> hmm, i thought we had made it also do single field structs by value as well
[04:21:29] <aatch> hmm, maybe we aren't doing the argpromotion pass anymore.
[04:21:29] <Luqman> apparantly not
[04:21:40] <cmr> aatch: what does that do?
[04:21:54] <cmr>  pub fn type_is_immediate(cx: ctxt, ty: t) -> bool {
[04:21:56] <cmr>      return type_is_scalar(ty) || type_is_boxed(ty) ||
[04:21:58] <cmr>          type_is_unique(ty) || type_is_region_ptr(ty) ||
[04:22:00] <cmr>          type_is_newtype_immediate(cx, ty) ||
[04:22:02] <cmr>          type_is_simd(cx, ty);
[04:22:04] <cmr>  }
[04:22:06] <cmr> It seems it's pretty dumb atm
[04:22:12] <aatch> cmr, promotes by-reference arguments to immediates in llvm, breaks the ABI so it's only internal atm.
[04:22:37] <cmr> aatch: ah I didn't know llvm did that for us
[04:22:41] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[04:22:45] <cmr> That's the optimization I thought I remembered discussing.
[04:22:50] <cmr> (or, could do that for us)
[04:23:06] <zeuxcg> yeah, I'm not looking at the final x64 assembly, just at llvm bitcode
[04:23:39] <aatch> Hmm, I wonder why we aren't using the CAbi stuff, I know it's there for C FFI but we could using the reference vs immediate stuff from it.
[04:24:05] <Luqman> oh, so i think the reason why we i didn't make struct Foo { x: u8 } and similar immediate was it broke things somehow
[04:24:24] <aatch> Luqman, oh, maybe it broke take glue?
[04:24:46] <Luqman> possibly, also at the time by-value self was also broken
[04:25:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:25:36] <aatch> Luqman, hmm, I remember that by-value self was "fixed" by making self always be passed by reference.
[04:25:58] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[04:27:00] <Luqman> aatch: yea, since we pass self in the environment pointer
[04:27:34] <aatch> I still hate that environment pointer.
[04:28:12] <cmr> Is our tydesc stuff similar to C++'s rtti?
[04:34:05] <olsonjeffery> hoo boy
[04:34:15] <olsonjeffery> doing a dist-upgrade w/ gnome testing ppas on ubuntu
[04:34:19] <olsonjeffery> moving to wayland!
[04:34:21] <olsonjeffery> wish me luck
[04:35:10] *** Quits: KindOne (KindOne@moz-D55D773C.dynamic.ip.windstream.net) (Connection reset by peer)
[04:35:29] *** Joins: KindTwo (KindOne@moz-D55D773C.dynamic.ip.windstream.net)
[04:35:35] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[04:36:42] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[04:36:45] *** KindTwo is now known as KindOne
[04:37:07] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:40:50] <brson> olsonjeffery: good luck
[04:41:18] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[04:41:20] *** Parts: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) ()
[04:42:01] <klutzy> olsonjeffery: what wm do you use with wayland?
[04:42:18] <ww> in a method, what's the way to return the struct object itself?  is it possible to do something like:  method1(&self, arg1) -> struct1 {  ...  return self } ?  
[04:42:48] <ww> i want to do dsl style method chaining
[04:43:11] <ww> like struct1.m1().m2().m3()
[04:44:20] <engla> return it by value you mean? sure it's possible
[04:44:30] <olsonjeffery> klutzy: gnome-shell
[04:44:31] <olsonjeffery> and, yeah
[04:44:35] <olsonjeffery> it's hangin on login
[04:44:45] <engla> would have to be *self  though since you have self by reference, ww  (`&self`)
[04:44:51] <olsonjeffery> i ctrl+alt+f1'd over to a terminal, heh.
[04:45:34] <klutzy> olsonjeffery: oh, gnome-shell supports wayland well? last time I've seen very mature status
[04:45:36] <ww> i have tried return *self and rust complains error: cannot move out of dereference of & pointer
[04:45:36] * ChrisMorgan uses tty1 to fix problems occasionally too
[04:45:47] <brson> ww: the method should probably take self by value: method1(self) -> S { self }
[04:46:12] <ww> but that means copying for every call
[04:46:19] <olsonjeffery> ChrisMorgan: i think ill just live here, from now on. i run emacs in the terminal. im ready.
[04:47:28] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[04:47:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:47:34] <olsonjeffery> heh. it's hideous!
[04:47:35] <olsonjeffery> anyways.
[04:47:40] <olsonjeffery> back to #rust
[04:47:45] <ChrisMorgan> No 256-colours, no font selection
[04:47:47] <ww> it's ok.  minor problem, was just wondering whether it's possible
[04:48:13] <engla> ww: it means moving for every call
[04:48:44] <klutzy> olsonjeffery: there's an issue about servo-on-wayland :)
[04:49:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:49:09] <klutzy> https://github.com/mozilla/servo/issues/332
[04:49:42] * olsonjeffery goes to install links
[04:49:50] <ww> oh ok, thanks engla
[04:49:51] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:53:24] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[04:54:35] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:54:50] <bjz> fn foo<T: Copy>(x: T) -> (T, T) { (x, x) } foo(2)
[04:54:58] <bjz> rusti: fn foo<T: Copy>(x: T) -> (T, T) { (x, x) } foo(2)
[04:54:59] -rusti- <anon>:5:19: 5:23 error: attempt to bound type parameter with a nonexistent trait `Copy`
[04:55:00] -rusti- <anon>:5          fn foo<T: Copy>(x: T) -> (T, T) { (x, x) } foo(2)
[04:55:00] -rusti-                             ^~~~
[04:55:00] -rusti- error: aborting due to previous error
[04:55:00] -rusti- application terminated with error code 101
[04:55:57] <bjz> no way of saying something is implictly copyable?
[04:55:59] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:55:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/gtCvdg
[04:55:59] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:56:07] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[04:56:15] <bjz> zeuxcg: ^
[04:56:44] <zeuxcg> struct Foo { x: int }; fn foo(x: Foo) -> (Foo, Foo) { (x, x) } foo(Foo {x:1})
[04:56:47] <zeuxcg> rusti: struct Foo { x: int }; fn foo(x: Foo) -> (Foo, Foo) { (x, x) } foo(Foo {x:1})
[04:56:47] -rusti- (main::Foo{x: 1}, main::Foo{x: 1})
[04:57:05] <bjz> rusti: fn foo(x: int) -> (int, int) { (x, x) } foo(2)
[04:57:06] -rusti- (2, 2)
[04:57:27] <bjz> rusti: fn foo<T: Clone>(x: T) -> (T.clone(), T.clone()) { (x, x) } foo(2)
[04:57:27] -rusti- <anon>:5:37: 5:38 error: expected `)` but found `.`
[04:57:27] -rusti- <anon>:5          fn foo<T: Clone>(x: T) -> (T.clone(), T.clone()) { (x, x) } foo(2)
[04:57:27] -rusti-                                               ^
[04:57:27] -rusti- application terminated with error code 101
[04:57:34] <bjz> hah
[04:57:36] <bjz> woops
[04:57:53] <bjz> rusti: fn foo<T: Clone>(x: T) -> (T, T) { (x.clone(), x.clone()) } foo(2)
[04:57:54] -rusti- (2, 2)
[04:58:13] <bjz> zeuxcg: you need to be explicit in generics
[04:59:01] <bjz> zeuxcg: do you think I should remove some of the &s in cgmath?
[04:59:16] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Ping timeout)
[04:59:21] <zeuxcg> rusti: fn foo<T>(x: T) -> T { x }
[04:59:22] -rusti- ()
[04:59:26] <bjz> rusti: fn foo<T: Clone>(x: T) -> (T, T) { (x.clone(), x.clone()) } let x = 2; (foo(x), x)
[04:59:27] -rusti- ((2, 2), 2)
[05:00:25] <bjz> zeuxcg: is that what you meant when you pmed: "pass by value in rust is compiled to pass by reference, so it's 'free'?
[05:00:29] <zeuxcg> bjz: so it looks like from the callers perspective, values are only worse (in terms of typing) than borrowed pointers if you need to pass something somewhere twice and if you're in generic context
[05:00:45] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[05:01:00] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:01:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/lyCEdA
[05:01:00] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:01:11] <zeuxcg> bjz: yeah, I assumed that cgmath and nalgebra use pass by reference to avoid copying for perf reasons, but that's not the case
[05:01:13] <bjz> it will be monomorphised though, with generics
[05:01:21] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[05:01:52] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[05:02:07] <bjz> aatch, cmr, dbaupp: can any of you enlighten us a little? ^
[05:02:42] <zeuxcg> bjz: basically, dereferencing or grabbing references to math types seems really wrong, so I'd rather avoid it if I can
[05:02:46] <aatch> bjz, I didn't see it.
[05:02:50] <bjz> zeuxcg: I agree that sometimes all the explicit &s can be annoying.
[05:03:17] <bjz> and could be detrimental for performance (I think rust optimises though)
[05:03:21] <jclements> brson: ping
[05:04:03] <bjz> aatch: from: https://botbot.me/mozilla/rust/msg/5784457/
[05:05:28] <brson> jclements: pong
[05:06:03] <bjz> aatch: example: https://github.com/bjz/cgmath-rs/blob/master/src/cgmath/quaternion.rs#L115
[05:06:12] <jclements> brson: hey, long time no see.  Sounds like a lot is going on... but I do have an actual question: is "try" available these days?
[05:06:22] <bjz> aatch: wait, I mean https://github.com/bjz/cgmath-rs/blob/master/src/cgmath/quaternion.rs#L109
[05:07:24] <brson> jclements: not try/catch, no. you can use task::try to recover from failure on task boundaries though
[05:08:06] <jclements> brson: sorry, I asked that question *really* poorly. What I mean is this: can I use the "try" rust-lang buildbot before making a pull request?
[05:08:17] <bjz> heh
[05:08:38] <aatch> Most of the time things will get inlined, which means that LLVM will optimize out the reference-then-dereference code as being redundant.
[05:08:57] <brson> jclements: yeah, you can push to try and buildbot will build it
[05:09:04] <bjz> aatch: just wondering if I should have all these refs
[05:09:18] <aatch> bjz, well it's either that or clone.
[05:09:19] <jclements> brson: okay, thanks. Hope all is well in MtV. Are you guys in the new building yet?
[05:09:36] <bjz> aatch: client code will be using implcitly copyable types
[05:09:46] <bjz> aatch: mainly
[05:10:05] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:10:10] <brson> jclements: not yet, no. i think the move is in february
[05:10:25] <aatch> bjz, well then clone would be "free" since it's always-inline for types like floats.
[05:10:28] <jclements> brson: ah well
[05:10:39] <bjz> ok
[05:11:06] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:11:06] <ghrust> 01[13rust01] 15jbclements 04force-pushed 06try from 149a63889 to 144ca1f28: 02http://git.io/k471pw
[05:11:06] <ghrust> 13rust/06try 14a96d5f0 15John Clements: move and duplicate macro defns in sha2 to make them hygienic...
[05:11:06] <ghrust> 13rust/06try 14d0f138c 15John Clements: disallow ident equality checks when contexts are not equal
[05:11:06] <ghrust> 13rust/06try 14eee9b34 15John Clements: rename resolve to mtwt_resolve
[05:11:08] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:11:10] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:11:14] <zeuxcg> if llvm inlines the function then both approaches are equivalent
[05:11:35] <zeuxcg> let me try never_inline with optimization...
[05:11:47] <bjz> zeuxcg aatch: so maybe I should go with the prettiest for client code
[05:13:30] <engla> zeuxcg: the attribute is called #[inline(never)]
[05:14:03] <zeuxcg> yeah
[05:14:05] <zeuxcg> thanks
[05:14:17] <ww> what is the best practice to do polymorphic new() methods?  e.g. I want to have struct1::new() and struct1::new(args)
[05:14:42] <zeuxcg> if the function is marked with never_inline then pointer approach does not copy anything, and value approach does copy
[05:14:43] <zeuxcg> in this code
[05:14:45] <bjz> ww: I have new() and from_something() usually
[05:14:56] <zeuxcg> fn foobar(a: Vec3f, b: Vec3f) -> Vec3f { let c = a.cross(b); let d = b.cross(a); c + d }
[05:14:57] <zeuxcg> fn foobar_ref(a: &Vec3f, b: &Vec3f) -> Vec3f { let c = a.cross_ref(b); let d = b.cross_ref(a); c + d }
[05:15:22] <engla> ww: it's not possible to have different number of arguments
[05:15:28] <engla> for the same method
[05:15:29] <zeuxcg> I guess if the function is complex enough to not inline an extra copy won't hurt that much
[05:15:58] <bjz> zeuxcg: so what do you think I should do?
[05:15:59] <ww> yeah, i found that out. and i have tried to use Option<args>.  it just feels not right.
[05:16:22] <ww> ok, thanks all
[05:16:47] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[05:17:04] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[05:17:24] <bjz> zeuxcg: I'm planning to have a vector::dot(a, b) method that does it by val
[05:17:25] <jclements> yikes... make check is thrashing terribly on my machine. can I limit the number of workers?
[05:17:36] *** Joins: z0w0 (zack@moz-74A8B350.lnse4.cha.bigpond.net.au)
[05:19:27] <ChrisMorgan> jclements: I presume RUST_TEST_TASKS would help
[05:19:40] <jclements> ChrisMorgan: many thanks.
[05:19:47] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Input/output error)
[05:22:24] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:22:24] *** ChanServ sets mode: +ao dherman dherman
[05:23:50] *** Quits: ysuzuki (ysuzuki@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[05:24:07] *** Joins: ysuzuki (ysuzuki@moz-FEE44B6.net220148245.t-com.ne.jp)
[05:24:19] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:27:23] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[05:27:32] *** Joins: fabiand (fabiand@moz-2E6786FA.adsl.alicedsl.de)
[05:28:29] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:29:04] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[05:30:04] <zeuxcg> bjz: I'm not 100% sure but I'd say that math library is significantly nicer to use if you don't have to pass pointers when calling primitive functions for it
[05:30:12] <bjz> yep
[05:30:20] <bjz> agreed
[05:30:27] <zeuxcg> bjz: and it seems that the copy overhead is mostly present in debug builds or in sort of obscure circumstances
[05:30:34] *** jorendorff_away is now known as jorendorff
[05:30:56] <bjz> zeuxcg: thanks btw, I really appreaciate this kind of feedback
[05:32:14] <zeuxcg> bjz: btw, here's what Vec3<f32>::add_v is compiled to: http://pastebin.com/jirHZQpc
[05:33:17] <bjz> zeuxcg: is that ming or yours?
[05:33:21] <bjz> *mine
[05:33:29] <zeuxcg> that's with optimization, and you don't want to look at the code without one :)
[05:33:32] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:33:32] <zeuxcg> yours
[05:33:46] <bjz> heh
[05:33:51] <zeuxcg> looks like closure got inlined
[05:33:55] <zeuxcg> but loop is not unrolled
[05:33:59] <bjz> dang
[05:34:13] <Luqman> and there's bounds checking
[05:35:02] <bjz> zeuxcg: that's a shame
[05:35:10] <zeuxcg> mine is defined as impl Add<Vec3f, Vec3f> for Vec3f { fn add(&self, v: &Vec3f) -> Vec3f { Vec3f { x: self.x + v.x, y: self.y + v.y, z: self.z + v.z } } }  -- can't go wrong with that :-)
[05:35:40] <bjz> yeah
[05:35:51] <bjz> might need to unroll all my stuff
[05:35:54] <bjz> oh well
[05:36:21] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[05:36:40] <bjz> zeuxcg: thanks again!
[05:37:33] <zeuxcg> np
[05:38:58] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:39:15] <bjz> zeuxcg: it would be nice to have stuff elegantly defined, but perfomance is more important to me
[05:39:51] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:40:37] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[05:41:07] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[05:41:21] <zeuxcg> so the loop is weird
[05:41:37] <zeuxcg> the bounds check is in terms of bytes, not array elements
[05:41:52] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[05:41:54] <zeuxcg> maybe that's why llvm gets confused as to how many iterations there are
[05:42:46] <zeuxcg> because I would totally expect llvm to unroll that, after it got so far as to inline everything including the closure
[05:43:13] <bjz> mm
[05:43:41] * bjz must admit he is a little out of his depth when it comes to llvm IR
[05:44:11] *** Quits: jstevans (Instantbir@moz-71C7B54D.bootp.virginia.edu) (Ping timeout)
[05:44:15] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[05:44:16] *** Quits: ww (Mibbit@moz-7385AD13.dia.static.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:45:06] <jclements> more ignorant questions: are the "codegen" tests new, and should I expect them to fail in a make check?
[05:45:09] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[05:45:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:45:45] *** Joins: robertknight (robertknig@moz-29DA0AFD.range86-162.btcentralplus.com)
[05:46:59] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[05:47:02] <eevee_> hmm i don't know how amulet should handle multiple canvases.  considering restricting "child" canvases to be non-overlapping views that write to the same buffer
[05:47:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:48:50] <jclements> also: on the 'try-win' builder, I'm getting a failure to compile in LLVM, for NeonEmitter.cpp.  Known problem?
[05:49:08] <acrichto> jclements: that's an artifact of it still trying to build clang
[05:49:12] <acrichto> I've seen that awhile ago
[05:49:19] <acrichto> shouldn't be doing that though :(
[05:49:29] <jclements> achrichto: does it just need to be wiped?
[05:49:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:49:42] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[05:50:02] <brson> jclements: codegen tests are new, and they don't usually fail
[05:50:04] <acrichto> that would help it yeah
[05:50:08] <brson> i can log in and delete some stuff
[05:50:38] <brson> ... maybe
[05:52:18] <jclements> brson: hmm... I gisted my failure at https://gist.github.com/jbclements/6460010 , but basically it looks like the llvm tools don't like the .bc that rust is generating: "Invalid MODULE_CODE_GLOBALVAR record"
[05:52:27] *** Quits: brandon-m-skinner (brandon@moz-C7AC35F5.mh.shawcable.net) (Quit: Konversation terminated!)
[05:53:27] *** Joins: brson_ (brson@moz-BBE3ABD.mv.mozilla.com)
[05:53:37] <brson_> gr, that windows slave is on aws
[05:53:53] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[05:57:16] <brson_> i don't know how to get access the windows ec2 bots offhand. I bet the ami has a stale clange build snapshotted though :-/
[05:57:41] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[06:03:54] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[06:04:43] *** Quits: Jesin (Jessin_@moz-130D8933.cc.lehigh.edu) (Input/output error)
[06:10:30] *** Joins: Ms2ger (Ms2ger@moz-B53902AE.adsl-dyn.isp.belgacom.be)
[06:10:52] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[06:11:32] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[06:12:56] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[06:13:09] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:14:36] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (No route to host)
[06:14:41] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[06:14:42] *** Quits: brson_ (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[06:15:22] <bjz> rusti: macro_rules! barry(($x:ty) => ()) barry!([T,..3])
[06:15:22] -rusti- <anon>:1:0: 1:0 error: unexpected token: `<eof>`
[06:15:22] -rusti- <anon>:1 extern mod extra;
[06:15:22] -rusti-          ^
[06:15:22] -rusti- application terminated with error code 101
[06:15:41] <bjz> rusti: macro_rules! barry(($x:ty) => (stringify!(x))) barry!([T,..3])
[06:15:42] -rusti- "x"
[06:15:49] <bjz> rusti: macro_rules! barry(($x:ty) => (stringify!($x))) barry!([T,..3])
[06:15:49] -rusti- "an interpolated type"
[06:16:21] *** Quits: robertknight (robertknig@moz-29DA0AFD.range86-162.btcentralplus.com) (Ping timeout)
[06:17:39] <zeuxcg> bjz: I hacked rustc to do bounds checking on the index, not the byte value
[06:17:55] <zeuxcg> bjz: and llvm unrolled the loop \o/
[06:18:06] <bjz> zeuxcg: I'm doing a macro to impl the vectors
[06:18:22] <ChrisMorgan> bjz: I filed a bug on the "an interpolated type" case a couple of weeks ago
[06:18:35] <zeuxcg> bjz: http://pastebin.com/e4fTUqrW
[06:18:50] <bjz> zeuxcg: nice!
[06:18:54] <zeuxcg> I probably should file an issue
[06:19:08] <zeuxcg> if I can get a smaller repro
[06:19:09] <bjz> zeuxcg: so do you think I should just sit on it?
[06:19:22] <zeuxcg> given a sufficiently smart compiler...
[06:19:23] <zeuxcg> :)
[06:19:26] <bjz> zeuxcg: not complect it?
[06:20:59] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:20:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jpx30Q
[06:20:59] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:22:01] <zeuxcg> bjz: if you feel that manually unrolled loops make the code more complicated then you can probably sit on it
[06:22:17] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:22:22] <zeuxcg> bjz: I'm filing the issue anyway, this is obviously more fundamental than just your add_v implementation
[06:22:53] <bjz> zeuxcg: I think the way I'm doing it it won't be too bad. with a macro. I'll keep the default impls
[06:26:03] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[06:26:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:26:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/LpR0Fg
[06:26:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:26:12] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[06:26:12] *** ChanServ sets mode: +ao brson brson
[06:26:47] <brson> ChrisMorgan: "Content-Type: text/html; charset=UTF-8" doesn't parse currently. should 'text/html; charset=UTF-8' be a single 'token'?
[06:27:15] <ChrisMorgan> brson: I know, I haven't tried figuring out why it's not working.
[06:27:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:27:35] <ChrisMorgan> That's type text, subtype html, extensions [("charset", "UTF-8")]
[06:29:01] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[06:30:04] <ChrisMorgan> s/extensions/parameters/
[06:31:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:32:31] <ChrisMorgan> Looks like it needs to handle LWS in read_parameter (headers/mod.rs)
[06:34:43] <ChrisMorgan> Not sure if that'll work, though, with the current LWS scheme. I think this is probably the point at which I stop handling LWS in there.
[06:36:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:36:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14cd77c68 to 145efe1e5: 02http://git.io/N3iJvQ
[06:36:04] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:36:05] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:36:05] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/tfcMHQ
[06:36:05] <ghrust> 13rust/06auto 14b3f7f75 15Brian Anderson: std::rt: Some I/O cleanup
[06:36:05] <ghrust> 13rust/06auto 14c218694 15Brian Anderson: std::rt: Add libuv bindings for getaddrinfo
[06:36:05] <ghrust> 13rust/06auto 140948f54 15Brian Anderson: std::rt: Add get_host_addresses function...
[06:36:07] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:37:32] <ChrisMorgan> :-)
[06:37:51] <ChrisMorgan> brson: if you just want to get the Content-Type, you're probably best for now to change that header from using MediaType back to using ~str.
[06:38:56] <brson> ChrisMorgan: ok, I'll try that
[06:39:28] <ChrisMorgan> Actually, consume_optional_lws() *did* fix it.
[06:40:39] <bjz> zeuxcg: ok, macrofied
[06:41:42] <ChrisMorgan> brson: fix committed
[06:41:53] <bjz> zeuxcg: https://github.com/bjz/cgmath-rs/blob/master/src/cgmath/vector.rs#L142
[06:42:30] <acrichto> brson: you were cleaning the bots?
[06:42:35] <acrichto> http://buildbot.rust-lang.org/builders/auto-linux-64-opt/builds/1326/steps/clean/logs/stdio happened twice
[06:42:52] <acrichto> dunno if it's fallout from my reorganization earlier
[06:43:29] <brson> acrichto: I can't access that bot currently :-/
[06:43:49] <acrichto> :(
[06:43:59] <acrichto> I'll see if it fails again
[06:44:39] *** Joins: victorporof_ (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[06:44:59] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[06:45:19] *** Quits: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Ping timeout)
[06:46:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:46:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c0e0c52 to 145efe1e5: 02http://git.io/N3iJvQ
[06:46:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:46:07] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:46:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/HaBHuA
[06:46:07] <ghrust> 13rust/06auto 145661c7c 15Alex Crichton: Upgrade libuv to the current master (again)...
[06:46:07] <ghrust> 13rust/06auto 14e2f2d04 15bors: auto merge of #8994 : alexcrichton/rust/upgrade-libuv, r=brson...
[06:46:08] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:46:52] *** Ms2ger is now known as Ms2ger|sheriff
[06:48:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:48:51] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:49:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:52:34] <acrichto> brson: oh it appears that the glob tests didn't fully clean up from themselves
[06:52:42] <acrichto> and now the bots are horked
[06:53:22] <brson> yay
[06:53:46] <acrichto> I suppose bors can turn in for the night
[06:53:54] <brson> is there a commit we can make to fix the problem? I don't have access to all the linux bots currently
[06:54:35] <acrichto> yeah let me try to reproduce and fix locally
[06:55:21] *** Joins: jstevans (Instantbir@BE4F16B8.FA95BF59.B7830B68.IP)
[06:56:02] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:56:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e2f2d04 to 145efe1e5: 02http://git.io/N3iJvQ
[06:56:02] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:56:05] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:56:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/V1qj4Q
[06:56:06] <ghrust> 13rust/06auto 14fec6716 15Brian Anderson: std: Remove push_fast from OwnedVector. Closes #8769...
[06:56:06] <ghrust> 13rust/06auto 14baa06ab 15bors: auto merge of #9002 : brson/rust/issue-8769, r=catamorphism...
[06:56:06] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:57:33] <acrichto> <3 ccache
[06:57:51] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[06:58:14] *** jack is now known as jack|zzz
[06:58:48] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[06:58:55] <ChrisMorgan> make[1]: Entering directory `/home/chris/vc/rust' ... make[2]: Entering directory `/home/chris/vc/rust/x86_64-unknown-linux-gnu/llvm' ... make[2]: *** No rule to make target `clean'.  Stop.
[06:59:01] <ChrisMorgan> Any idea why that would happen?
[06:59:24] <acrichto> what target were you running?
[06:59:29] <ChrisMorgan> Just "make"
[06:59:34] <acrichto> hmm
[07:00:15] <acrichto> llvm may not have been reconfigured into the new location
[07:00:23] <acrichto> ChrisMorgan: try running ./configure again
[07:00:26] <ChrisMorgan> That directory is empty
[07:00:31] <ChrisMorgan> I did, no change.
[07:00:40] <acrichto> what's head for you
[07:00:54] <ChrisMorgan> mozilla master.
[07:01:11] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[07:01:23] <acrichto> investigating...
[07:01:23] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[07:01:33] <zeuxcg> bjz: sweet, the optimization issue repros on "fn add(a: [f32, ..3], b: [f32, ..3]) -> [f32, ..3] { let mut s: [f32, ..3] = [0.0, ..3]; for i in range(0, 3) { s[i] = a[i] + b[i]; } s }"
[07:01:54] * ChrisMorgan would prefer not to remove all the ignored files from the repository as that would take quite a bit longer to build
[07:02:02] * ChrisMorgan would like to have Rust building in his bag as he rides home, so that it'll be ready around when he gets home. Hopefully it won't overheat too badly.
[07:02:21] <acrichto> ChrisMorgan: so you ran git pull, ./configure, and $target/llvm was empty?
[07:02:26] <brson> ChrisMorgan: I have a local build of servo that can browse wikipedia again using rust-http
[07:02:34] <klutzy> ChrisMorgan: rust-http uses a fixed version of rustc e.g. what servo uses? or it tries to follow master?
[07:02:37] <acrichto> brson: \o/
[07:02:42] <ChrisMorgan> brson: :-)
[07:02:58] <ChrisMorgan> klutzy: rust-http is tracking master
[07:03:20] <ChrisMorgan> acrichto: yep
[07:03:34] <ChrisMorgan> (Assuming $target to be x86_64-unknown-linux-gnu.)
[07:04:02] <acrichto> what
[07:04:11] <klutzy> thanks!
[07:04:23] <ChrisMorgan> x86_64-unknown-linux-gnu/rustllvm is also empty.
[07:04:23] <acrichto> ChrisMorgan: can you pastebin the configure logs?
[07:05:32] <ChrisMorgan> acrichto: http://dpaste.com/1367702/
[07:05:51] <bjz> zeuxcg: awesome!
[07:06:02] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:06:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14baa06ab to 145efe1e5: 02http://git.io/N3iJvQ
[07:06:02] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:06:04] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:06:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/m4zQzA
[07:06:04] <ghrust> 13rust/06auto 14d4ebe83 15Vadim Chugunov: Fixed makefile to point to the new llvm build directory.
[07:06:04] <ghrust> 13rust/06auto 146c74953 15bors: auto merge of #9017 : vadimcn/rust/rustllvm-build, r=alexcrichton...
[07:06:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:06:56] <acrichto> ChrisMorgan: argh one more spot to change
[07:07:13] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[07:07:27] <ChrisMorgan> Is there something I can tweak so that it works for me in the next few minutes?
[07:07:28] <acrichto> ChrisMorgan: you can fix locally by 'rm -rf llvm'
[07:07:43] <acrichto> or possibly just rm llvm/$target/config.status
[07:07:50] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Ping timeout)
[07:08:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:08:19] <ChrisMorgan> That's looking better.
[07:08:25] <ChrisMorgan> Hang on, still not.
[07:09:04] <acrichto> ChrisMorgan: how so?
[07:09:05] <ChrisMorgan> (Actually, I didn't ./configure after doing that.)
[07:09:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:09:27] <acrichto> that would probably be necessary
[07:09:43] <ChrisMorgan> It was.
[07:09:53] <ChrisMorgan> Alas, it needs to compile LLVM again :-(
[07:09:59] <ChrisMorgan> Ah well. I'll survive.
[07:10:07] <acrichto> ChrisMorgan: ccache is awesome
[07:10:11] <acrichto> <2 min llvm builds :)
[07:10:41] <ChrisMorgan> Where's rustcache? <2 min rust builds? :P
[07:12:07] <ChrisMorgan> It's taken longer than three minutes already.
[07:12:42] <Ms2ger|sheriff> These whole-crate builds get annoying if you have large crates
[07:14:24] <eevee_> uh does the prelude have a min/max
[07:14:36] <eevee_> nope
[07:16:46] <bjz> zeuxcg: probably my best version of the vector module to date: https://github.com/bjz/cgmath-rs/blob/master/src/cgmath/vector.rs
[07:16:51] <bjz> zeuxcg: :D
[07:17:25] <eevee_> oh they're methods?
[07:17:35] <eevee_> rusti: (3.max(4), 4.max(3))
[07:17:39] -rusti- pastebinned 74 lines of output: http://ix.io/7SR
[07:17:41] <eevee_> holy
[07:18:01] <kimundi> rusti: (3u.max(4u), 4u.max(3u))
[07:18:03] -rusti- pastebinned 8 lines of output: http://ix.io/7SS
[07:18:09] <bjz> rusti: std::num::min(3, 4)
[07:18:10] -rusti- 3
[07:18:17] <bjz> eevee_: ^
[07:18:20] <engla> eevee_: there are min/max functions in std::num
[07:18:26] <engla> like that ^^
[07:18:30] <bjz> ^^^
[07:18:32] <eevee_> \o/  two lines below the code i was looking at too
[07:19:51] <acrichto> un-hork the bots https://github.com/mozilla/rust/pull/9018/files ?
[07:20:02] <acrichto> whoops, minus the /files
[07:22:36] <zeuxcg> rusti: 3u.max(&4u)
[07:22:37] -rusti- 4u
[07:23:29] *** Joins: ChrisMorgan1 (chris@moz-80C478D2.its.monash.edu.au)
[07:24:10] *** Quits: ChrisMorgan (chris@moz-7159513.its.monash.edu.au) (Ping timeout)
[07:24:39] *** Quits: z0w0 (zack@moz-74A8B350.lnse4.cha.bigpond.net.au) (Client exited)
[07:24:54] *** Joins: ChrisMorgan (chris@moz-B523B7FD.its.monash.edu.au)
[07:25:10] *** Quits: ChrisMorgan1 (chris@moz-80C478D2.its.monash.edu.au) (Ping timeout)
[07:27:08] *** Quits: ChrisMorgan (chris@moz-B523B7FD.its.monash.edu.au) (Ping timeout)
[07:31:02] *** Joins: sk (sk@76BFB31C.71F9CB99.78DD174B.IP)
[07:31:33] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[07:31:35] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[07:34:45] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[07:35:02] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[07:36:09] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:36:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146c74953 to 145efe1e5: 02http://git.io/N3iJvQ
[07:36:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:36:11] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:36:12] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tlPb_w
[07:36:12] <ghrust> 13rust/06auto 14507414d 15Alex Crichton: Un-hork the bots by removing intermediate files...
[07:36:12] <ghrust> 13rust/06auto 14b650da1 15bors: auto merge of #9018 : alexcrichton/rust/fix-bots, r=huonw...
[07:36:12] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:38:50] *** flaper87|afk is now known as flaper87
[07:42:30] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Input/output error)
[07:43:11] <zeuxcg> hmmm
[07:43:51] <zeuxcg> rusti: let x = [0i32, ..16]; x[1u << 31]
[07:43:52] -rusti- task <unnamed> failed at 'index out of bounds: the len is 16 but the index is 2147483648', <anon>:5
[07:43:52] -rusti- application terminated with error code 101
[07:44:01] <zeuxcg> rusti: let x = [0i32, ..16]; x[1u << 63]
[07:44:02] -rusti- 0i32
[07:44:08] <zeuxcg> yay.
[07:44:22] <zeuxcg> 1u << 63
[07:44:24] <zeuxcg> rusti: 1u << 63
[07:44:25] -rusti- 9223372036854775808u
[07:44:28] <zeuxcg> yay indeed.
[07:44:29] <Thiez> perhaps we should include checked overflow integer types at soe point :p
[07:44:40] <Thiez> also huh, how does that happen
[07:44:42] <zeuxcg> it's not about overflow in rust
[07:44:54] <zeuxcg> it's about an overflow in bounds checking code
[07:44:56] <zeuxcg> that rust generates.
[07:44:56] <nsf> if it thinks of an index as a 32 bit uint, it may just truncate that bit
[07:45:09] <Thiez> that is silly
[07:45:12] <zeuxcg> rusti: let x = [0i32, ..16]; x[1u << 53]
[07:45:12] -rusti- task <unnamed> failed at 'index out of bounds: the len is 16 but the index is 9007199254740992', <anon>:5
[07:45:13] -rusti- application terminated with error code 101
[07:45:16] <zeuxcg> index is 64 bit
[07:45:23] <nsf> then it's weird, indeed
[07:45:25] <zeuxcg> the problem is that for integer vector, the bounds check is like this
[07:45:31] <Thiez> If I wanted to be limited to 32-bit indices I would be using java :p
[07:45:35] <zeuxcg> index * 4 < total_size_in_bytes
[07:45:39] <zeuxcg> index * 4 overflows.
[07:45:45] <eevee_> bahahaha
[07:45:58] <nsf> hehe, indeed
[07:45:58] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[07:46:01] <eevee_> index < total_size_in_bytes << 2?
[07:46:22] <Thiez> ^ that seems reasonable
[07:46:26] <Ms2ger|sheriff> Checked overflow in the bounds checking?
[07:46:42] <eevee_> rusti: let x = [0i32, ..16]; x[1u << 62]
[07:46:43] -rusti- 0i32
[07:47:14] <eevee_> solve this like php
[07:47:17] <nsf> how does it return 0 then, shouldn't it be a segfault or something
[07:47:19] <zeuxcg> arguably bounds checker does a good enough job of preventing memory errors though :)
[07:47:21] <eevee_> if index * 4 > MAX_INT...
[07:47:26] <zeuxcg> nsf, index access overflows as well
[07:47:31] <nsf> right
[07:47:44] <zeuxcg> or rather pointer arithmetics during index access
[07:48:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:48:45] <Thiez> rusti: let x = [0i32, ..16]; assert_eq!(&x,&(x[1u << 62]));
[07:48:49] -rusti- pastebinned 11 lines of output: http://ix.io/7ST
[07:49:01] <Thiez> rusti: let x = [0i32, ..16]; assert_eq!(&x[0],&(x[1u << 62]));
[07:49:02] -rusti- ()
[07:49:04] <Thiez> cute
[07:49:53] <Ms2ger|sheriff> Checking overflow by default would be nice... Also slow, of course
[07:50:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:52:01] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[07:52:27] <Thiez> it does check by default, it just fails :p
[07:53:02] <kaeso> bjz: why is there no 0.7-compatible tag on glfw-rs?
[07:53:42] <bjz> kaeso: I don't know, but using 0.7 is more trouble than its worth
[07:54:17] <bjz> kaeso: you'd also probably need an old version of glfw itself - it wasn't released then I don't think
[07:54:32] <kaeso> bjz: ok
[07:54:41] <bjz> I'd highly reccomend just using master
[07:54:52] <bjz> it's the latest and greatest
[07:55:12] <bjz> :)
[07:55:44] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[07:57:20] *** Quits: jstevans (Instantbir@BE4F16B8.FA95BF59.B7830B68.IP) (Ping timeout)
[07:58:41] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:58:45] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[07:59:27] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[07:59:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:01:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[08:04:54] <ChrisMorgan> There. I knew compiling Rust while my laptop was in a confined space (my bag) was not a good idea. Core temperatures 100Â°C Â±3Â°C. Another couple higher and it would have forcibly shut itself down. At least I put the hot side (with vent/fan) on the top, where there was a small amount of free air space. Other way up and it certainly would have died.
[08:06:41] <kimundi> lol
[08:06:43] <ChrisMorgan> And after all that, it's still far from finished building, on account of needing to do a full build. :-(
[08:07:30] <kimundi> I think my laptop's batteries would die before that
[08:08:28] *** Quits: victorporof_ (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Ping timeout)
[08:09:28] * ChrisMorgan replaced his battery a couple of years ago, not deeming ten minutes sufficiently useful
[08:10:10] <kimundi> xD
[08:10:46] * ChrisMorgan should cross-compile Rust for ARM so that he can work on rust-http on his Android/Ubuntu tablet
[08:11:12] *** Joins: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[08:13:27] *** Joins: victorporof_ (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[08:14:19] *** Quits: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Ping timeout)
[08:15:36] <flaper87> ChrisMorgan: I did that once accidentally, It felt nice at the beginning since it was winter and my backpack was warming me :D
[08:16:57] *** Quits: victorporof_ (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Ping timeout)
[08:19:01] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Client exited)
[08:20:35] <flaper87> ChrisMorgan: btw, any plans of splitting rust-http and keep the client separate from the server?
[08:20:39] *** Joins: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[08:21:42] <bjz> ooh: http://blog.llvm.org/2013/09/a-path-forward-for-llvm-toolchain-on.html
[08:22:34] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:28:07] <klutzy> heh
[08:29:32] <klutzy> I'm planning to try rust on msvc at this weekend
[08:29:46] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Connection reset by peer)
[08:30:06] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[08:30:25] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[08:30:39] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[08:30:48] <klutzy> I already built std.obj object file, but rustrt seems quite hard to do
[08:31:27] <klutzy> once I get rustrt.{dll,lib} and morestack.obj, I think I can build std.dll
[08:31:44] <klutzy> don't know whether it will work though :p
[08:31:56] *** Quits: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net) (Quit: Leaving.)
[08:32:57] *** Quits: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Ping timeout)
[08:33:47] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:34:22] *** Joins: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[08:36:22] *** Joins: [squiddy] (squiddy@moz-2D3E7455.adsl.alicedsl.de)
[08:37:40] *** Joins: nkoep (nik@moz-112207D5.pool.mediaways.net)
[08:38:15] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:39:04] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:39:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:41:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:41:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tlPb_w
[08:41:07] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:41:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:44:46] <zeuxcg> bjz: sigh, my translation improvement improves your code but does not improve the minimal repro O_o
[08:44:48] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[08:44:57] *** Ms2ger|sheriff is now known as Ms2ger
[08:45:00] <zeuxcg> bjz: I should probably ask llvm guys, something's fishy here
[08:46:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[08:46:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bCC3og
[08:46:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[08:46:09] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:46:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jcZRmA
[08:46:09] <ghrust> 13rust/06auto 145661c7c 15Alex Crichton: Upgrade libuv to the current master (again)...
[08:46:09] <ghrust> 13rust/06auto 14c9b9ce9 15bors: auto merge of #8994 : alexcrichton/rust/upgrade-libuv, r=brson...
[08:46:10] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:47:30] *** Quits: mib_q5mzy9 (Mibbit@moz-8FDA6122.static.cpe.netcabo.pt) (Quit: http://www.mibbit.com ajax IRC Client)
[08:48:45] *** Joins: mad2 (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[08:49:17] <mad2> hello, I'm interested in improving rusti, can anyone help me understand it's current design?  Why does it make 3 passes?
[08:49:58] <mad2> err 5 passes
[08:50:15] *** jorendorff is now known as jorendorff_away
[08:50:50] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[08:53:03] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[08:53:09] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:53:44] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[08:54:36] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[08:55:12] <dbaupp> bjz: !
[08:55:27] <dbaupp> klutzy: you're doing awesome windows work! :D
[08:56:46] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[08:57:12] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[08:58:41] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[09:00:47] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:01:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:03:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:06:11] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:06:53] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:22:34] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[09:28:11] *** Quits: mad2 (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:31:06] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:31:06] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/jTxscg
[09:31:06] <ghrust> 13rust/06auto 14b3f7f75 15Brian Anderson: std::rt: Some I/O cleanup
[09:31:06] <ghrust> 13rust/06auto 14c218694 15Brian Anderson: std::rt: Add libuv bindings for getaddrinfo
[09:31:06] <ghrust> 13rust/06auto 140948f54 15Brian Anderson: std::rt: Add get_host_addresses function...
[09:31:08] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:31:13] *** Quits: nkoep (nik@moz-112207D5.pool.mediaways.net) (Ping timeout)
[09:34:06] * jensnockert hugs around.
[09:34:22] * kimundi embraces the hugs
[09:35:00] * dbaupp wonders who around is
[09:36:56] *** Quits: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Ping timeout)
[09:39:55] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:40:59] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:41:46] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[09:43:04] <Thiez> was there no weekly meeting this week?
[09:44:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:46:00] <Ms2ger> I believe so, yes
[09:46:35] *** Joins: nkoep (nik@moz-B6FC550A.vpn.rwth-aachen.de)
[09:46:48] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[09:47:08] <Thiez> It doesn't appear to be on the wiki
[09:48:00] <Palmik> Hi. Rust probably does not support (constant) value parametrized types, right?
[09:48:17] <Palmik> Except for []. :)
[09:49:44] <Thiez> zeuxcg: I'll report the bounds checking problem.
[09:55:33] *** Joins: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[09:56:20] <mindcat> rusti: "Huawei C8812".slice_from(7)
[09:56:21] -rusti- "C8812"
[09:58:02] <mindcat> rusti: "Huawei C8812".slice_from(0)
[09:58:03] -rusti- "Huawei C8812"
[09:58:53] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[09:59:26] *** Quits: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Ping timeout)
[10:01:25] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[10:02:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:04:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:09:50] *** Joins: sigma (sigma@moz-B8E78D5.range86-136.btcentralplus.com)
[10:11:31] *** Quits: sigma (sigma@moz-B8E78D5.range86-136.btcentralplus.com) (Ping timeout)
[10:11:32] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[10:11:46] <zxcdw> rusti: "AbCdEfG".slice_from(1)
[10:11:47] -rusti- "bCdEfG"
[10:11:52] <zxcdw> See, I learn
[10:12:07] <kimundi> :)
[10:14:24] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[10:15:19] *** Quits: sk (sk@76BFB31C.71F9CB99.78DD174B.IP) (Ping timeout)
[10:16:59] <bjz> dbaupp: hurro?
[10:18:09] *** Joins: sk (sk@FBFEDC88.77870B72.78DD174B.IP)
[10:18:43] <bjz> zeuxcg: oh that's odd
[10:19:08] <bjz> zeuxcg: is the minimal repro a fixed length vector?
[10:21:22] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:21:54] *** Quits: StarLight (StarLight@moz-BF70B61.pppoe.avangarddsl.ru) (Ping timeout)
[10:22:36] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[10:23:31] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[10:26:19] *** Joins: StarLight (StarLight@moz-987794D0.dynamic.avangarddsl.ru)
[10:27:41] *** Quits: KindOne (KindOne@moz-D55D773C.dynamic.ip.windstream.net) (Ping timeout)
[10:28:20] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[10:28:29] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[10:31:32] *** Joins: KindOne (KindOne@moz-6D4B7843.dynamic.ip.windstream.net)
[10:32:17] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[10:34:08] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[10:39:14] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:40:26] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbl)
[10:41:01] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:41:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jTxscg
[10:41:01] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:41:11] *** Joins: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP)
[10:41:22] *** Joins: toqueteos (Mibbit@moz-61778FE6.red-83-35-67.dynamicip.rima-tde.net)
[10:43:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:44:22] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:45:16] <toqueteos> so... am i blind or the newest manual doesn't explain a thing about this apostrophe thing?
[10:45:38] <kimundi> toqueteos: look in the borrowed pointer tutorial
[10:45:43] <toqueteos> it starts on http://static.rust-lang.org/doc/rust.html#static-items
[10:45:51] <toqueteos> kimundi: let me check..
[10:45:59] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:45:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OQy1uQ
[10:46:00] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:46:23] <kimundi> but in general, the tutorial and the manual needs a lot of rewriting
[10:46:44] <toqueteos> mmm it doesn't mention the apostrophe, examples just use it without explanation
[10:46:53] <kimundi> Should I explain?
[10:47:04] <toqueteos> well a newcomer could go nuts on that
[10:47:12] <toqueteos> maybe it's type or maybe it's sorcery
[10:47:14] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Connection reset by peer)
[10:47:14] <toqueteos> typo*
[10:47:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:47:43] <toqueteos> no grammar production on manual uses it
[10:47:53] <kimundi> it'S definitly a bad situation for newcomers
[10:47:58] <toqueteos> yep i know
[10:48:04] <toqueteos> i'm just trying to help
[10:48:36] <toqueteos> then http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html mentions regions TWO TIMES, but that's it
[10:49:10] <toqueteos> same for trunk manual
[10:49:17] <kimundi> I good course of action for example I think would be to gather a list of themes the tutorial should explain better/at all, and then rewrite/let someone other rewrite the tutorial. same with the manual
[10:49:21] <toqueteos> regions aren't implemented yet right?
[10:50:09] <kimundi> well, regions are a bad name ofr what we call lifetimes
[10:50:30] <toqueteos> it would be great if manual was complete before having the implementation ready, then even noobs can help implementing all that
[10:50:40] <toqueteos> and given that, tutorial should be easy too
[10:50:51] <kimundi> bad name in the sense that they are related, but the official use of regions works differnt in many ways from our lifetimes
[10:51:00] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:51:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OQy1uQ
[10:51:00] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:51:01] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:51:01] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rl26VQ
[10:51:01] <ghrust> 13rust/06auto 14fec6716 15Brian Anderson: std: Remove push_fast from OwnedVector. Closes #8769...
[10:51:01] <ghrust> 13rust/06auto 149298af7 15bors: auto merge of #9002 : brson/rust/issue-8769, r=catamorphism...
[10:51:01] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:51:47] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[10:52:03] <kimundi> toqueteos: the problem is that the language is still changes. Realistically, it will take at least till v 1.0 that we can really write an correct version
[10:52:54] *** Joins: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com)
[10:53:50] <kimundi> someone has to work on the docs, but that takes time even if it is a high priority. Really the best you can do if you find issues is to try to solve them yourself, or at least write them down under an new issue on github :)
[10:54:05] <toqueteos> http://static.rust-lang.org/doc/rust.html#tuple-types more 'self magic
[10:54:17] <toqueteos> how's this thing named?
[10:54:24] <toqueteos> named lifetimes?
[10:54:28] <kimundi> yeah
[10:54:37] <toqueteos> gotta open an issue for that then
[10:55:12] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[10:55:16] *** Joins: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net)
[10:55:21] <kimundi> btw, such problems often exists because the compiler changed over time, the code examples got updated to work, but the documentation as such not adjusted to that
[10:56:10] <toqueteos> even when the language changes, having a sort of spec defined first helps everyone
[10:56:47] <kimundi> you are fully right, but people just don't have time for it
[10:56:57] *** Quits: KindOne (KindOne@moz-6D4B7843.dynamic.ip.windstream.net) (Ping timeout)
[10:57:00] <toqueteos> i'm one of those write code first guys, i understand the passion of some guys over here
[10:57:15] <toqueteos> not blaming anyone, just saying rust needs a bit more "terseness" on that
[10:57:24] <toqueteos> anyone, 1.0 will have it
[10:57:30] <toqueteos> anyone -> anyway*
[10:57:35] <kimundi> right
[10:58:00] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[10:58:54] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[11:01:02] *** Joins: KindOne (KindOne@moz-98684351.dynamic.ip.windstream.net)
[11:01:59] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[11:02:36] <toqueteos> uh.. bad news
[11:02:36] <toqueteos> http://static.rust-lang.org/doc/rust.html#identifiers
[11:02:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:02:54] <toqueteos> does XID_start  include ' ?
[11:03:10] <kimundi> I'd assume not
[11:03:28] <kimundi> rusti: let foo'bar = 4; foo'bar
[11:03:28] -rusti- <anon>:5:16: 5:20 error: expected `;` but found `'bar`
[11:03:28] -rusti- <anon>:5          let foo'bar = 4; foo'bar
[11:03:29] -rusti-                          ^~~~
[11:03:29] -rusti- application terminated with error code 101
[11:04:06] <kimundi> It's basically just letters of various alphabets
[11:04:20] <toqueteos> then ident needs new docs too
[11:04:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:04:26] <kimundi> why?
[11:04:34] <toqueteos> what's 'self?
[11:04:42] <kimundi> I mean, it does, but why in this case?
[11:04:43] *** Joins: a_m0d|home (a_m0d@moz-88157B21.acanac.net)
[11:05:07] <toqueteos> is it an ident
[11:05:08] <kimundi> ' - token followed by an identifier
[11:05:23] <toqueteos> token ok
[11:06:03] <kimundi> rusti: let s: & ' a str = "foo";
[11:06:04] -rusti- <anon>:5:16: 5:17 error: unterminated character constant
[11:06:04] -rusti- <anon>:5          let s: & ' a str = "foo";
[11:06:04] -rusti-                          ^
[11:06:04] -rusti- application terminated with error code 101
[11:06:07] <flaper87> TBH, although we all agree docs are important, I think the current state is fair given the amount of changes happening in the language. I'm not saying we shouldn't care about it, I'm just saying that it is understandable.
[11:06:12] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:06:30] <kimundi> rusti: let s: & 'a str = "foo";
[11:06:31] -rusti- <anon>:5:21: 5:24 error: Illegal lifetime 'a: named region `&'a ` not in scope here
[11:06:31] -rusti- <anon>:5          let s: & 'a str = "foo";
[11:06:31] -rusti-                               ^~~
[11:06:31] -rusti- error: aborting due to previous error
[11:06:31] -rusti- application terminated with error code 101
[11:06:53] <toqueteos> flaper87: yes it is
[11:06:55] <kimundi> well, I guess it still needs to be written without whitespace between
[11:07:07] <flaper87> plus, folks in this channel have always answered everyones doubts, which does not replace good docs but, you know, at least there's a place where people can go to when they don't know what to do
[11:07:42] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[11:09:53] <toqueteos> mm there's also function grammar missing
[11:10:04] <toqueteos> which btw is a hard one
[11:10:48] <toqueteos> there's a guy called double m? sorry mate
[11:11:56] <dbaupp> bjz: just the llvm + windows link you posted earlier
[11:15:00] *** Joins: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[11:15:45] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[11:15:53] *** Quits: a_m0d|home (a_m0d@moz-88157B21.acanac.net) (Quit: Leaving.)
[11:19:28] *** Quits: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[11:24:49] <mindcat> rusti: "å“ˆå“ˆå“ˆå“ˆå“ˆ".slice_from(1)
[11:24:54] -rusti- pastebinned 2 lines of output: http://ix.io/7T3
[11:26:48] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[11:34:18] *** Quits: [squiddy] (squiddy@moz-2D3E7455.adsl.alicedsl.de) (Ping timeout)
[11:42:14] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[11:42:24] <toqueteos> mikundi: well there's now https://github.com/mozilla/rust/issues/9021, https://github.com/mozilla/rust/issues/9022 and https://github.com/mozilla/rust/issues/9023
[11:44:23] *** Joins: [squiddy] (squiddy@moz-2D3E7455.adsl.alicedsl.de)
[11:44:39] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[11:45:49] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[11:46:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:49:57] <ChrisMorgan> flaper87: at present I do not intend to split the HTTP client and server. It is something that I will consider later on, but at present I don't think much would be gained by the added complexity; the majority of them is common.
[11:50:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:51:02] <ChrisMorgan> I'm *always* finding now that if I update Rust and run `make install` (without a `make` step first as it doesn't seem to be necessary) it dies at the end with "/home/chris/vc/rust/mk/install.mk:136: *** Aborting install because more than one library matching libstd-*.so is present in build tree x86_64-unknown-linux-gnu/stage2/lib: .  Stop." Repeating `make install` works.
[11:51:46] <flaper87> ChrisMorgan: fair enough, I was looking at the code and started thinking that an api.rs module with an more confortable API for the client would be good. I'm thinking something along the lines of python-reuqest. Have you considered it? I'd love to work on that if you like the idea.
[11:52:18] <ChrisMorgan> Absolutely; I was thinking this morning that it's probably up to that stage. If you want to make such a thing, go ahead!
[11:52:36] <flaper87> ChrisMorgan: sounds good, It'll be my pleasure!
[11:52:43] <flaper87> let me create an issue for that
[11:53:03] <Ms2ger> Hmm, do consumers usually need both the HTTP client and server?
[11:53:52] <flaper87> Ms2ger: I'd say no, but at the current stage, I understand why it doesn't make much sense to split them
[11:54:06] <flaper87> ChrisMorgan: https://github.com/chris-morgan/rust-http/issues/9
[11:54:15] <flaper87> placeholder, I'll add some extra details in a bit
[11:54:26] <ChrisMorgan> Ms2ger: servers will regularly need a client, but clients won't often need a server. Still, unless you win something for using only one of them, there's no point splitting them yet.
[11:54:36] <flaper87> I think they can live in the same repo but separate crates
[11:54:45] <flaper87> rustpkg should be capable of taking care of the rest
[11:55:50] <ChrisMorgan> It's still probably only worth having if it adds distinct value. libstd could be split up into many smaller crates...
[11:56:40] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[12:01:12] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:01:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rl26VQ
[12:01:13] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:02:10] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[12:03:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:03:05] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:04:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:06:01] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:06:01] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/eeiEyw
[12:06:01] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:06:04] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:06:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/j9TXmQ
[12:06:04] <ghrust> 13rust/06auto 14d4ebe83 15Vadim Chugunov: Fixed makefile to point to the new llvm build directory.
[12:06:04] <ghrust> 13rust/06auto 14d39cec6 15bors: auto merge of #9017 : vadimcn/rust/rustllvm-build, r=alexcrichton...
[12:06:04] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:11:00] *** Quits: toqueteos (Mibbit@moz-61778FE6.red-83-35-67.dynamicip.rima-tde.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:11:07] <ChrisMorgan> You know, that's the last thing in bors' queue?
[12:11:13] <ChrisMorgan> (Last approved, I mean.)
[12:13:15] <kimundi> Need more PRs :)
[12:17:49] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[12:19:04] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[12:19:17] *** Joins: untothebreach (paul@15A17709.47300931.30F15291.IP)
[12:23:37] <untothebreach> hey #rust, I have a quick question about iterators. I thought I understood the 'lifetime' concept, but I am having a hard time understanding why this snippet gives me a "Borrowed ponter does not live long enough" error (http://codepad.org/729ufG4e), while this one works fine (http://codepad.org/PmdyLFNr)
[12:25:02] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:25:02] <ChrisMorgan> untothebreach: that's related to current limitations in the lifetime checking code; it will be fixed up some time so that your first code is valid.
[12:25:32] <untothebreach> ah, ok
[12:25:43] <untothebreach> thanks!
[12:26:00] <kimundi> right, the proplem in the first on is that the [1, 2, 3] gets temporary borrowed, and it hasn't yet beedn decided how long temporary lifetime need to be extended
[12:26:36] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[12:27:00] <ChrisMorgan> untothebreach: see https://github.com/mozilla/rust/issues/3511
[12:31:57] *** jorendorff_away is now known as jorendorff
[12:34:12] <dbaupp> ChrisMorgan, kimundi: saved us from the horror that is a lazy bors :)
[12:34:40] * dbaupp just commanded a retry
[12:34:57] * ChrisMorgan wonders whether he should take a break from rust-http and write rust-irc and from that a bot that will scream when the queue is almost empty
[12:35:12] <kimundi> haha sounds like fun
[12:35:31] * kimundi would know a one-char-change PR he could do reight now
[12:35:42] *** Parts: hoelzro (hoelzro@moz-937642A5.ro) ()
[12:36:05] * dbaupp just wants to continue the trend
[12:36:10] *** Quits: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Quit: victorporof)
[12:43:16] *** jorendorff is now known as jorendorff_away
[12:44:00] <dbaupp> ChrisMorgan: added dns support to rust-http yet? :P
[12:44:13] <ChrisMorgan> dbaupp: no.
[12:44:15] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:45:23] <ChrisMorgan> dbaupp: want to do it yourself?
[12:45:33] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[12:48:04] <dbaupp> ChrisMorgan: It'd be a neat project; but I don't have time for it :(
[12:49:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:50:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:53:29] *** jorendorff_away is now known as jorendorff
[12:57:42] <ChrisMorgan> Well, should anyone want to do it, it's https://github.com/chris-morgan/rust-http/issues/10
[12:57:47] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[13:01:10] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[13:01:41] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[13:03:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:04:11] *** Joins: rust-noob (Mibbit@moz-3112320B.graz.surfer.at)
[13:05:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:08:29] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:08:34] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:10:59] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:10:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/j9TXmQ
[13:10:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:11:34] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:13:06] *** Quits: nkoep (nik@moz-B6FC550A.vpn.rwth-aachen.de) (Ping timeout)
[13:14:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:16:01] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:16:01] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gDA8RA
[13:16:01] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:16:04] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:16:04] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/7NuE9w
[13:16:04] <ghrust> 13rust/06auto 147a75fe8 15Jed Davis: Add parser for `#[repr(...)]`; nothing uses it yet....
[13:16:04] <ghrust> 13rust/06auto 14b74bcb3 15Jed Davis: Initial implementation of enum discrimnant sizing.
[13:16:05] <ghrust> 13rust/06auto 14aadeecb 15Jed Davis: Lint non-FFI-safe enums.
[13:16:06] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:21:45] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:22:24] *** Joins: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP)
[13:31:03] <rust-noob> hey! I would like to store the index of some element in a vector in a variable, but if the element doesn't exist in the vector the value of the variable should be vec.len()+1. How do I do this?
[13:31:27] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[13:31:36] <rust-noob> code: let z = ~[1,2,3]
[13:31:42] *** Joins: nkoep (nik@moz-112207D5.pool.mediaways.net)
[13:31:47] <strcat> use iter().find() ?
[13:32:01] <strcat> and get_or_default
[13:32:25] <strcat> rusti: let xs = [1, 2, 3]; xs.iter().find(|&x| *x == 3)
[13:32:28] <rust-noob> I would use let pos = z.position(|x| x == 2)
[13:32:29] -rusti- pastebinned 16 lines of output: http://ix.io/7T9
[13:32:40] <kimundi> does find return an index?
[13:32:44] <strcat> yeah, and get_or_default on the ret value
[13:32:58] <strcat> kimundi: I meant position
[13:33:22] <rust-noob> strcat: your code snippet returns an error
[13:33:23] <dbaupp> (it's called unwrap_or_default now, btw)
[13:33:49] <strcat> rust-noob: it returns an error because of the way rusti's printing is set up
[13:33:57] <rust-noob> ah ok!
[13:34:10] <strcat> rusti: let xs = [1, 2, 3]; xs.iter().position(|&x| *x == 3).unwrap_or_default(xs.len() + 1)
[13:34:10] -rusti- <anon>:5:53: 5:55 error: type <VI2> cannot be dereferenced
[13:34:11] -rusti- <anon>:5          let xs = [1, 2, 3]; xs.iter().position(|&x| *x == 3).unwrap_or_default(xs.len() + 1)
[13:34:11] -rusti-                                                               ^~
[13:34:11] -rusti- error: aborting due to previous error
[13:34:11] -rusti- application terminated with error code 101
[13:34:16] <strcat> rusti: let xs = [1, 2, 3]; xs.iter().position(|&x| x == 3).unwrap_or_default(xs.len() + 1)
[13:34:16] -rusti- 2u
[13:34:18] <rust-noob> I just would like to know how to deal with Option<uint>
[13:34:28] <strcat> pattern matching or one of the Option methods
[13:34:33] <rust-noob> nice one!
[13:34:49] <strcat> the Option methods are just `match` internally
[13:34:52] <rust-noob> could you also expÃ¼lain me how to do it with match?
[13:35:00] <rust-noob> explain, sorry
[13:35:16] <strcat> here's the impl of unwrap_or_default:
[13:35:22] <strcat>     pub fn unwrap_or_default(self, def: T) -> T {
[13:35:23] <strcat>         match self {
[13:35:25] <strcat>             Some(x) => x,
[13:35:27] <strcat>             None => def
[13:35:29] <strcat>         }
[13:35:31] <strcat>     }
[13:35:44] <rust-noob> thank you very much!
[13:36:09] <strcat> np
[13:37:00] <cubic> so I'm trying to get the windows environment running. curl configure script can't find gethostbyname()
[13:37:20] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[13:37:59] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[13:38:00] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[13:38:10] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[13:38:12] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Ping timeout)
[13:38:13] *** Quits: pauls (pauls@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[13:38:15] <cubic> google turns up a mailing list message from 2003 about it being defined in winsock2
[13:38:16] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[13:38:19] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[13:38:20] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[13:38:22] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[13:38:29] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[13:38:53] *** Quits: oldmanstan (glesica@moz-CA910636.net) (Ping timeout)
[13:38:59] *** Joins: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[13:39:46] *** jack|zzz is now known as jack
[13:39:56] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[13:41:13] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Quit: dbaupp)
[13:42:16] *** Joins: oldmanstan (glesica@moz-CA910636.net)
[13:43:28] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[13:43:28] *** ChanServ sets mode: +ao dherman dherman
[13:43:33] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[13:46:23] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:46:38] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:46:55] <rust-noob> ok, I've got another question: Does there exist a function like <=> in ruby for floats in rust? the function returns -1 if f1 < f2, 0 if f1 == f2 and 1 if f1 < f2
[13:47:12] <Yurume_> rusti: 4.cmp(5)
[13:47:14] -rusti- pastebinned 38 lines of output: http://ix.io/7Tb
[13:47:15] *** Yurume_ is now known as Yurume
[13:47:26] <Yurume> ...oh,
[13:47:30] <Yurume> rusti: 4u.cmp(5)
[13:47:31] -rusti- <anon>:5:16: 5:17 error: mismatched types: expected `&uint` but found `<VI0>` (expected &-ptr but found integral variable)
[13:47:31] -rusti- <anon>:5          4u.cmp(5)
[13:47:31] -rusti-                          ^
[13:47:31] -rusti- error: aborting due to previous error
[13:47:31] -rusti- application terminated with error code 101
[13:47:37] <Yurume> rusti: 4u.cmp(&5)
[13:47:38] -rusti- Less
[13:47:44] <rust-noob> nice! thanks!
[13:47:49] <Yurume> ...typing is a bit hard, but there is.
[13:49:03] *** Quits: [squiddy] (squiddy@moz-2D3E7455.adsl.alicedsl.de) (Ping timeout)
[13:49:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:52:30] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[13:54:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:55:10] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Quit: Leaving)
[13:56:01] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[13:56:22] <bstrie> there appear to be 4 ops in here, but I can't figure out who two of them are
[13:56:46] <bstrie> what the heck is the irc command to figure that out
[13:56:47] <kimundi> bstrie: NSA agents
[13:56:56] <quasisphere> bstrie: /WHOIS ?
[13:57:03] <bstrie> kimundi: nah they don't need ops in a channel, they just backdoor the server software
[13:57:14] <kimundi> true
[13:57:19] <bstrie> quasisphere: ugh but I don't want to have to read through 300 names
[13:57:21] <bstrie> I am laaaaazy
[13:57:39] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[13:57:39] *** ChanServ sets mode: +o jdm
[13:58:19] <Seldaek> bstrie: dherman, jack, jdm, kmc, nmatsakis have ops
[13:58:28] <quasisphere> bstrie: oh, you mean you know there are 4 of them but no idea about the nicks? I thought you were wondering about real names. :P
[13:58:31] <ChrisMorgan> Ah, the thrill of submitting an assignment with one minute to spare.
[13:58:32] <rust-noob> rusti: 1f.cmp(2f)
[13:58:33] -rusti- <anon>:5:9: 6:5 error: type `float` does not implement any method in scope named `cmp`
[13:58:33] -rusti- <anon>:5          1f.cmp(2f)
[13:58:33] -rusti- <anon>:6     };
[13:58:33] -rusti- error: aborting due to previous error
[13:58:33] -rusti- application terminated with error code 101
[13:58:45] <bstrie> Seldaek: ah, thank you
[13:58:53] <rust-noob> Yurume: houston we have a problem :/
[13:58:55] <jdm> hmm?
[13:59:05] <bstrie> jdm: I was just curious where all these new ops came from!
[13:59:16] <bstrie> usually when I see 5 ops in here it means that I can ping any of the devs
[13:59:26] <bstrie> but niko is the only dev actually here
[13:59:33] <jdm> they came from a desire to have more eyes on this place to keep it in order
[13:59:33] <Yurume> rust-noob, ah, Cmp works only for totally ordered types. floating point types are generally not totally ordered.
[13:59:43] <rust-noob> hmm, 
[13:59:52] <Yurume> rust-noob, (i.e. you can't get a meaningful result when comparing some number with NaN etc.)
[14:00:01] <rust-noob> d you have any suggestions what I could use instead?
[14:00:33] <Seldaek> bstrie: don't know what client you use, but you can usually get the list of users (/names perhaps) somehow, or use tab completion to see if a nick is present at least
[14:01:03] <rust-noob> hmm, I could just use <, > and == in the match arms directly, culdn't I? :S
[14:01:04] <rust-noob> :D
[14:01:07] <bstrie> Seldaek: ah, /names was what I wanted, thanks
[14:01:17] <bstrie> I was trying to parse the output of /who
[14:01:25] <Yurume> rust-noob, of course, you can always do `if a < b { Less } else if a > b { Greater } else { Equal }`.
[14:01:32] <Seldaek> oh yeah no that's not fun
[14:01:45] <rust-noob> ok, thanks again!
[14:02:26] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:03:30] *** Quits: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com) (Ping timeout)
[14:03:32] *** Joins: cstrahan (cstrahan@3A4DB878.B6D1BF0F.27500626.IP)
[14:03:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:03:49] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[14:05:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:05:23] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[14:06:17] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:06:46] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[14:06:46] <cmr> Yurume: floats do actually have a defined total ordering, but it's a bit non-intuitive (as floats often are...). We just don't implement it yet.
[14:07:08] <Yurume> cmr, IEEE 754 has totalOrder() operation, of course. ;)
[14:07:18] <Yurume> it is not a total order we normally expect though
[14:07:47] <ChrisMorgan> What are < etc. defined in terms of?
[14:07:55] <cmr> ChrisMorgan: what do you mean?
[14:09:00] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[14:09:09] <ChrisMorgan> Sorry, not thinking straight. Of course it's Ord.
[14:09:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:09:22] <cmr> oh, the trait it uses.
[14:09:25] <cmr> yeah
[14:12:13] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[14:13:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:18:34] *** Quits: sk (sk@FBFEDC88.77870B72.78DD174B.IP) (Quit: Leaving)
[14:25:42] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:25:42] *** ChanServ sets mode: +ao dherman dherman
[14:26:39] <nmatsakis> dbaupp: currently, I am fixing the duplicating node id problem (which also occurs with macros) with a pass that just renumbers the entire AST
[14:26:57] <nmatsakis> dbaupp: this is a bit heavy-handed, of course, but it should work :) -- of course i'm finding a lot of bugs in AST fold in the process
[14:27:11] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[14:28:01] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[14:29:55] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[14:29:56] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[14:32:26] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:32:34] *** Joins: cwmma (nodebot@moz-7A4A7013.compute-1.amazonaws.com)
[14:32:57] <ChrisMorgan> I want rustc on ARM. Should that work?
[14:34:15] <cmr> ChrisMorgan: depends
[14:34:17] *** Quits: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP) (Quit: dave1629)
[14:35:06] <ChrisMorgan> My setup is Android 4.0.3, but with Ubuntu 12.something running inside it on a loop disk via Debian Kit.
[14:35:47] <cmr> Look through yesterday's logs, but in short you need to cross-compile your own snapshot before you can build rustc on arm
[14:35:47] *** Joins: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP)
[14:36:10] <klutzy> on non-android arm?
[14:36:18] <ChrisMorgan> It *certainly* doesn't have enough memory to actually compile rustc on the device itself.
[14:36:34] <cmr> So why do you want rustc on it?
[14:36:55] <cmr> even just compiling an empty file takes like 64-128MB of ram
[14:36:57] <ChrisMorgan> So that I can compile rust-http on it. Nice and portable.
[14:37:11] <cmr> Why is cross-compiling not suitable?
[14:37:19] <ChrisMorgan> Yeah, that should be fine; it's got 1GB.
[14:37:53] <ChrisMorgan> cmr: heavy 15" laptop doesn't come with me everywhere. 10" ASUS Transformer Pad (i.e. has a keyboard) is *much* more portable.
[14:38:02] <klutzy> you may build cross-compiler first, then cross-build libraries: std, extra, syntax, rustc
[14:38:14] <cmr> ok
[14:38:27] <cmr> so you need to build a cross compiler, and then build rustc with it and copy everything over
[14:38:34] <klutzy> then driver binary named "rustc".. you have to prepare rustrt/morestack before that
[14:38:52] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[14:39:11] <ChrisMorgan> I guess arm-unknown-linux-gnueabi would be the target I'd use? (It's armel Ubuntu, not armhf)
[14:39:29] <klutzy> there are some arm targets in mk/platform.mk
[14:39:31] <ChrisMorgan> At this point, I am out of my depth, never having done any cross-compiling.
[14:39:41] <ChrisMorgan> klutzy: that's where I got that string from :-)
[14:40:04] <cmr> https://github.com/mozilla/rust/wiki/Doc-building-for-android
[14:40:06] <klutzy> ChrisMorgan: there are three arms I remember: android, arm with hard float, just arm no hard one
[14:40:25] <cmr> Should help, though the android-specific parts not so much
[14:40:28] <ChrisMorgan> Yeah; arm-unknown-linux-gnueabi is the last of those.
[14:40:40] <klutzy> ChrisMorgan: hard float means your hardware have to support floats natively
[14:40:42] <klutzy> e.g. rpi
[14:41:26] * ChrisMorgan _believes_ his hardware supports hf, but the Ubuntu image available in Debian Kit was armel rather than armhf.
[14:41:38] *** Joins: sigma^phone (AndChat182@moz-B8E78D5.range86-136.btcentralplus.com)
[14:41:56] *** Quits: cstrahan (cstrahan@3A4DB878.B6D1BF0F.27500626.IP) (Ping timeout)
[14:41:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[14:42:07] <klutzy> debian has also two targets: arm (soft float) and armv7? I don't remember name though
[14:42:32] *** Joins: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com)
[14:43:03] <klutzy> rpi's processor is not covered by debian's newer hard-float-arm target, so for hard float they have to build packages from scratch
[14:43:06] <klutzy> it's raspbian
[14:43:17] *** Joins: [squiddy] (squiddy@moz-2D3E7455.adsl.alicedsl.de)
[14:43:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:43:42] <klutzy> so you have to check your hardware and platform os for hard float
[14:43:50] <klutzy> if your platform is soft, you have to build soft one
[14:44:11] <klutzy> same for hard, I've heard they can't be mixed in any direction
[14:44:53] <jensnockert> Not in the same application at least.
[14:45:42] <ChrisMorgan> So, I think that the ./configure --target-triples=... stuff means that I'll then have (in my case) an x86_64 build of rustc which is capable of targeting ARM with --target=...; then, I'd need to compile rustc again (manually?) to get an ARM build of rustc which I could then copy to my tablet and use. Is that right?
[14:46:18] <jensnockert> ChrisMorgan: When compiled normally, rustc can target arm.
[14:46:44] <ChrisMorgan> So what's the idea of the special --target-triples bit?
[14:46:51] <klutzy> --target-triples means it builds libraries for target too
[14:47:05] <ChrisMorgan> Ah. So yes, I do need it.
[14:47:31] *** Quits: cwmma (nodebot@moz-7A4A7013.compute-1.amazonaws.com) (Client exited)
[14:47:31] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:47:49] * ChrisMorgan *hopes* he'll be able to end up with rustc running on ARM
[14:49:06] *** Quits: sigma^phone (AndChat182@moz-B8E78D5.range86-136.btcentralplus.com) (Ping timeout)
[14:50:17] <klutzy> does re-configure cause rebuild from stage 1? I don't know exactly but I think I've got such situation before
[14:50:22] *** Joins: Florob (Florob@moz-39532932.de)
[14:51:15] <cmr> klutzy: yes
[14:51:45] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[14:52:22] <ChrisMorgan> Looks like installing g++-arm-linux-gnueabi should get me all the tools needed to build it.
[14:52:31] <klutzy> cmr: but the rebuild is unnecessary, right?
[14:52:41] <cmr> klutzy: maybe, maybe not.
[14:52:55] <cmr> it could update llvm or libuv, or change the compilation flags of either or rustrt
[14:53:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:54:20] <klutzy> librustrt for target is needed on stage2, but there is no target-specific stuff on stage1 I think
[14:54:36] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:55:00] <cmr> The build system isn't smart about what needs rebuilding when.
[14:55:27] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:57:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:57:26] *** Quits: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP) (Quit: dave1629)
[14:58:01] *** Joins: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP)
[14:58:21] <klutzy> ChrisMorgan: when rustc receives --target flag, it first construct llvm-ir for the target, then llvm's compiler builds object file
[14:58:38] <klutzy> then linker tries to make output with std/extra/...
[14:58:43] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[14:58:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[14:58:54] <klutzy> which are at /path/to/bin/rustc/../lib/<target>/
[14:59:22] *** Quits: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP) (Quit: dave1629)
[14:59:55] <ChrisMorgan> Has anyone tried compiling rustc for ARM before that "we" know of?
[14:59:59] *** Joins: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP)
[15:00:00] <klutzy> I mean if rustc is at /usr/local/bin then libraries are at /usr/local/lib/<target>/lib/
[15:00:15] <klutzy> or if you're on windows, /usr/local/bin/rustc/<target>/bin/ which is a mess
[15:00:37] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[15:00:52] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:00:57] *** Joins: Jesin (Jessin_@moz-130D8933.cc.lehigh.edu)
[15:01:41] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:02:50] <klutzy> I hope not :p
[15:03:10] <ChrisMorgan> You hope no one has tried to compile rustc for ARM? Why?
[15:03:32] <klutzy> it's not so easy I think
[15:03:51] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[15:04:41] *** Quits: mreid (mreid@moz-5F4A70CA.yipyip.com) (Quit: bye!)
[15:04:42] <klutzy> I mean, rustc is quite big, so I think it doesn't work well as expected
[15:05:30] <ChrisMorgan> It certainly won't surprise me if I get something that's broken. I just hope I'll then be able to submit appropriate bug reports.
[15:06:44] <ChrisMorgan> GitHub project admins: there's an A-android label, but no label for ARM (or x86, or x86_64, or mips). Labels for these targets for specific issues with them would be nice.
[15:07:09] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:07:10] <kaeso> ChrisMorgan: https://github.com/mozilla/rust/pull/8220
[15:09:26] <ChrisMorgan> kaeso: I don't understand the purpose of your link
[15:09:30] <klutzy> +1 for A-ARM (or at-least A-something for tagets on experimental stage)
[15:09:50] <ChrisMorgan> But still, with that, why is there that "--linker=arm-linux-gnueabi-gcc" in the second case?
[15:10:05] <klutzy> ChrisMorgan: rustc invokes "cc" as default
[15:10:06] <kaeso> ChrisMorgan: I think they are all the options you need
[15:10:41] <klutzy> or "g++" on windows :p
[15:10:49] <ChrisMorgan> But what about the target.mk line ``RUSTC_FLAGS_arm-unknown-linux-gnueabi := --linker=$(CC_arm-unknown-linux-gnueabi)``?
[15:11:09] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[15:11:26] <ChrisMorgan> Oh, I guess that means the make will do that, but then you'll still need it for manual runs of rustc with --target=arm-unknown-linux-gnueabi?
[15:11:32] <klutzy> ah, I didn't noticed the line
[15:11:50] *** Joins: sigma^phone (AndChat182@moz-B8E78D5.range86-136.btcentralplus.com)
[15:12:00] <ChrisMorgan> bors is a lazy bot just now :-(
[15:12:01] <klutzy> still don't know whether it is used by Makefile only or by rustc in general
[15:12:32] *** Quits: rust-noob (Mibbit@moz-3112320B.graz.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[15:12:38] <ChrisMorgan> Nor do I.
[15:12:48] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[15:12:54] <ChrisMorgan> I guess the easiest way to find out is to try it without and see what happens!
[15:13:19] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[15:13:30] <klutzy> I guess mk/target.mk does not affect rustc
[15:13:44] <klutzy> if that's right, `make` will use the flag but you have to type it manually
[15:13:59] <ChrisMorgan> ... with rustc [right?]
[15:14:05] <klutzy> yep right
[15:15:15] <klutzy> yes, for mingw-w64 I had to type --linker= manually. same for arm
[15:16:33] <klutzy> rust's cross-build system is not so good for now
[15:17:02] <klutzy> for android, rustc invokes ndk's linker, so --linker is not needed but you have to specify ndk path
[15:17:06] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[15:17:16] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[15:17:16] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:18:11] <klutzy> ChrisMorgan: https://gist.github.com/klutzy/6349568 this is what I use for mingw-w64 cross build experiments
[15:18:14] <klutzy> hope this helps
[15:19:20] <ChrisMorgan> Yes, that looks great.
[15:19:47] *** Quits: nkoep (nik@moz-112207D5.pool.mediaways.net) (Ping timeout)
[15:20:43] <ChrisMorgan> Why the "--cfg $CROSS_EXE" (viz. --cfg rustc)
[15:20:45] <ChrisMorgan> ?
[15:21:17] <klutzy> it's for building binary named "rustc.exe"
[15:21:33] <klutzy> if you see source at src/driver/driver.rs you'll got the cfg :)
[15:22:01] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[15:22:20] <ChrisMorgan> Ah, got it.
[15:22:40] <ChrisMorgan> (Why was I not looking at driver/driver.rs?)
[15:23:11] <klutzy> neither was I :D
[15:23:47] <ChrisMorgan> Well, I'm going to go to bed now. Hopefully the first ``make install`` will have completed successfully when I get up again, so that I can get on with attempting to compile rustc for ARM.
[15:25:49] *** Quits: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP) (Quit: dave1629)
[15:30:10] <mindcat> how can I make a library in rust?
[15:30:21] *** Joins: just95 (Mibbit@moz-19811939.adsl.alicedsl.de)
[15:30:34] *** Parts: just95 (Mibbit@moz-19811939.adsl.alicedsl.de) ()
[15:30:35] <mindcat> something like "library.so"
[15:31:09] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:31:10] <klutzy> yes, add #[crate_type = "lib"] at your source
[15:31:16] <klutzy> or invoke `rustc --lib`
[15:31:45] <klutzy> note that the .so has mangled symbol which whould be understandable by other rust binaries
[15:31:58] <mindcat> klutzy: oh
[15:32:02] <klutzy> if you want to interop with C, use extern "C" and #[no_mangle]
[15:32:37] <klutzy> first one forces the function use C callconv, and second one prevent name mangling
[15:33:14] <mindcat> klutzy: thanks, I will try it.
[15:33:26] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:34:24] *** Joins: nkoep (nik@moz-59C856A6.vpn.rwth-aachen.de)
[15:35:47] *** Quits: jclements (jclements@moz-E4774872.dsl.snlo01.pacbell.net) (Quit: jclements)
[15:36:46] *** Joins: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net)
[15:38:17] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[15:40:03] *** Joins: miloshadzic (miloshadzi@moz-A3C22160.dynamic.isp.telekom.rs)
[15:41:56] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[15:42:23] <mindcat> damn, where is rusti?
[15:43:22] <klutzy> he goes to sleep when strcat's laptop is off
[15:43:53] <mindcat> well, that's not good.
[15:44:36] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[15:44:57] <Lovot_> how would I execute a program using rust?
[15:45:03] <klutzy> I always think of rusti on buildbot so it works with latest build
[15:47:41] <Lovot_> If I wanted to start and manage a server or daemon using Rust, how would I do that?
[15:48:03] *** Joins: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP)
[15:48:12] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:48:20] *** Quits: nkoep (nik@moz-59C856A6.vpn.rwth-aachen.de) (Ping timeout)
[15:48:44] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:48:44] *** ChanServ sets mode: +ao dherman dherman
[15:49:39] *** Quits: Jesin (Jessin_@moz-130D8933.cc.lehigh.edu) (Quit: Leaving)
[15:50:12] <mindcat> Lovot_: http://seld.be/rustdoc/master/std/run/index.html
[15:54:54] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[15:56:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:56:54] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[15:58:50] <cubic> Might want to move the downgrading of gcc/g++ to <4.6 after the curl build in the getting started page for windows
[15:59:23] <cubic> somehow curl7.32.0 doesn't build with gcc <4.6
[15:59:37] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[16:00:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:01:46] <benh> nmatsakis: re: the &5i + 5i issue, I thought the thing where that works but 5i + &5i does not might be due to it being a method so that one operand is &self and gets some automatic coercion but the other is just a regular parameter and doesn't. Is that completely off the mark?
[16:02:22] <kimundi> benh: Afaik that's th exact reason
[16:02:40] *** Joins: rust (Mibbit@moz-3112320B.graz.surfer.at)
[16:02:42] *** Quits: rust (Mibbit@moz-3112320B.graz.surfer.at) (Quit: rust)
[16:02:56] *** Joins: rust-noob (Mibbit@moz-3112320B.graz.surfer.at)
[16:02:57] <nmatsakis> benh: that is true, but: (1) for operators, we actually DON'T do automatic adjustments on the left-hand-side
[16:03:02] <rust-noob> hey!
[16:03:35] <rust-noob> how do I use match to assign a variable based on if another variable is bigger than some number, eg 5?
[16:03:48] <nmatsakis> benh: at least we try not to... anyway, point is, we DO do the normal argument coercion on the *rhs* (which is basically what I want to change)
[16:04:21] <rust-noob> code: let var = match num {num < 5 => num, _ => 5}
[16:04:31] <rust-noob> is this correct?
[16:04:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:04:39] <nmatsakis> benh: and anyway what I meant in my comment was basically: we can define the type behavior for operators however we like, independent of precisely what happens for function calls, though obviously there should be some equivalent function call
[16:04:48] <kimundi> that sounds more like a case for if else
[16:05:07] <nmatsakis> rust-noob: that will work but as kimundi says so will "let var = if num < 5 {num} else {5};
[16:05:22] <nmatsakis> rust-noob: or let var = uint::min(num, 5);
[16:05:25] <nmatsakis> :)
[16:05:26] <benh> nmatsakis: ok, I thought the operators just got translated from x `op` y to (&x).op(&y) or something
[16:05:36] <benh> and then function rules took over
[16:05:44] <kimundi> tha match things is wrong as is though
[16:05:46] <benh> Isn't that match wrong tho
[16:05:47] <benh> yeah
[16:05:49] <nmatsakis> benh: basically yes but not quite
[16:06:00] <kimundi> match num {num if num < 5 => num, _ => 5}
[16:06:08] <benh> could be _ if num < 5 too
[16:06:10] <nmatsakis> ah, true
[16:06:19] <kimundi> match num {_ if num < 5 => num, _ => 5}
[16:06:22] <nmatsakis> or just "match () { _ ..."
[16:06:24] <benh> in fact it could be match () { _ ...
[16:06:25] <benh> hey!
[16:06:33] <kimundi> match () {_ if num < 5 => num, _ => 5}
[16:06:37] <rust-noob> thanks guys!
[16:06:57] *** Joins: nkoep (nik@moz-112207D5.pool.mediaways.net)
[16:07:14] <nmatsakis> benh: anyway it's not quite the simple desugaring you suggest, precisely because doing the full DWIM behavior of method calls was deemed undesirable
[16:07:47] <benh> yeah i think most of this comes down to me not understanding all the DWIM involved :(
[16:08:04] <nmatsakis> well, I feel like there should be any DWIM for operators.
[16:08:25] <nmatsakis> the general feeling was that operator overloading was to be limited and is intended for impl'ing custom math libraries, primarily
[16:08:54] <nmatsakis> I tend to agree. if we wanted something more we should take a smalltalk/scala/haskell-like route where you can impl arbitrary iterators
[16:08:57] <nmatsakis> *operators
[16:10:19] <nmatsakis> but overall I'm not a big fan. I never found that very useful in practice. I'd rather just have syntax-extensions/macros fill in the gaps
[16:10:54] <benh> Sounds like something safely postponed anyway
[16:11:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:14:13] <Lovot_> mindcat: How would I use that? std::run::process is an unresolved name according to the compiler.
[16:14:29] *** Joins: saneyuki (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:14:59] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:15:16] <Lovot_> mindcat: if you know of any code examples, they would be extremly helpful.
[16:18:55] <mindcat> Lovot_: no, I don't know.
[16:19:14] <cmr> ChrisMorgan: I have created A-ARM, A-x86, and A-x64 just now.
[16:19:27] <cmr> ChrisMorgan: but I don't think they'll see that much use, tbh
[16:20:12] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[16:20:39] <mindcat> Lovot_: "use std::run::Process"
[16:21:42] *** Quits: sigma^phone (AndChat182@moz-B8E78D5.range86-136.btcentralplus.com) (Ping timeout)
[16:21:55] <cmr> r? https://github.com/mozilla/rust/pull/9025
[16:21:56] *** Joins: sigma^phone (AndChat182@moz-B8E78D5.range86-136.btcentralplus.com)
[16:22:22] *** Quits: sigma^phone (AndChat182@moz-B8E78D5.range86-136.btcentralplus.com) (Quit: Bye)
[16:23:06] <Lovot_> mindcat: Nope, still not recognised, I wish the documentation was clearer.
[16:25:06] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:25:11] <mindcat> Lovot_: then download and compile rust latest version, and compile again.
[16:25:27] <mindcat> Lovot_: I mean git master
[16:25:42] <Lovot_> mindcat: Will do.
[16:25:42] <mindcat> Lovot_: https://github.com/mozilla/rust
[16:26:03] <mindcat> Lovot_: I am using master version now
[16:27:35] *** Joins: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu)
[16:29:22] *** Quits: geomyidae__ (uid214@moz-E77DEB21.irccloud.com) (Ping timeout)
[16:29:40] *** Joins: geomyidae__ (uid214@moz-E77DEB21.irccloud.com)
[16:30:02] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Client exited)
[16:34:00] <jclements> nmatsakis: just finished a week's worth of rebasing on a patch that was approved back in june.  I think it would be okay to r+ this, right? Anyone?
[16:35:09] <nmatsakis> jclements: yes. you can also put r=whomever 
[16:35:20] <jclements> nmatsakis: thx
[16:35:29] <nmatsakis> jclements: (presuming you are on the approved list)
[16:35:45] <jclements> nmatsakis: yep.
[16:35:45] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[16:36:02] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:36:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147581291 to 14d39cec6: 02http://git.io/N3iJvQ
[16:36:02] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:36:09] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:36:09] <ghrust> 01[13rust01] 15bors pushed 71 new commits to 06auto: 02http://git.io/h4H7ZQ
[16:36:09] <ghrust> 13rust/06auto 146e3b2ab 15John Clements: move and duplicate macro defns in sha2 to make them hygienic...
[16:36:09] <ghrust> 13rust/06auto 1477c96d7 15John Clements: disallow ident equality checks when contexts are not equal
[16:36:10] <ghrust> 13rust/06auto 14315ea66 15John Clements: rename resolve to mtwt_resolve
[16:36:12] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:37:15] <nmatsakis> jclements: I'm suffering here with this problem of how macros and deriving treat node-ids. I put in a pass that renumbers the AST after stage2, which seems to fix the problem, but which also causes obscure errors in some cross-crate tests...
[16:37:29] <nmatsakis> mostly just complaining since this is so orthogonal to the problem I'm trying to fix :)
[16:37:32] *** Joins: pudgetta (Mibbit@moz-240C09CB.sw.biz.rr.com)
[16:37:40] *** Quits: pudgetta (Mibbit@moz-240C09CB.sw.biz.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:37:51] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[16:38:28] <jclements> nmatsakis: I feel like that all the time. I'm grateful to node-ids, though, for lessening the dependence on idents.
[16:38:54] <jclements> nmatsakis: it'll be my turn to complain when this pull request fails on Windows for some obscure reason (again).
[16:38:55] *** Joins: eatkinson (eatkinson@moz-DA40A624.airbears2.berkeley.edu)
[16:39:55] <nmatsakis> I've been wanting to do some reform on node-ids. Not that this is at all relevant to the problem at hand.
[16:40:06] <nmatsakis> In particular, newtyping them (which I've done a few times but never gotten around to landing)
[16:40:12] <nmatsakis> and then separating them into categories
[16:40:20] <nmatsakis> to try and avoid the incredible overloading we do now
[16:40:30] <nmatsakis> e.g., distinguish an ItemId from an ExprId
[16:43:19] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:44:40] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[16:44:41] *** ChanServ sets mode: +o jdm
[16:45:06] *** Joins: jstevans (Instantbir@moz-F3C02489.bootp.virginia.edu)
[16:45:06] <jclements> nmatsakis: might turn up some nice bugs. You might also have to add a lot of boilerplate to connect ItemIds to ExprIds, no?
[16:45:31] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:46:02] <rust-noob> this might be a stupid question: but how do I push a vec the end of another vector?
[16:46:04] <jclements> nmatsakis: also, your comment: "done [this] a few times but never gotten around to landing"... is a disturbing but painfully accurate comment on our build process.
[16:46:25] <Ms2ger> push_vec?
[16:46:29] * Ms2ger guesses
[16:46:55] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[16:46:55] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[16:46:58] <jclements> rust-noob: did you check out the 'vec' page in the static docs?
[16:47:05] <nmatsakis> jclements: the correct division of node-ids is unclear, but I think a lot of the code would be clearer if we could document what the node-id refers to. It's true that there are bits of the code that take advantage of "id punning", but I think those places are (1) perhaps sketchy but (2) also something we could handle with triats
[16:47:09] *** Joins: jdm_ (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:47:20] <nmatsakis> anyway, not something on my short term list.
[16:47:32] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[16:49:06] <rust-noob> yep, but I get an error if I do vec1 + vec2
[16:51:12] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[16:51:32] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[16:51:36] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:53:09] *** jdm_ is now known as jdm
[16:53:19] <jclements> nust-noob: on this page http://static.rust-lang.org/doc/std/vec.html , I see the method "push_all". Looks like it's the one for you!
[16:54:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:54:24] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[16:54:34] <rust-noob> type `&mut [salesman::Salesman]` does not implement any method in scope named `push_all`
[16:54:44] <jclements> good gravy! The build-bot waterfall page is impressive: we have *15* machines building our pull requests?
[16:55:13] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[16:55:31] <bytewise> rust-buildbot: you can't push to a &mut [T]. you must have a &mut ~[T] to be able to push to it
[16:55:33] <jclements> rust-noob: can you do it with a ~mut? 
[16:55:36] <cmr> jclements: yup
[16:55:47] <cmr> Althjough I think it's multiplexed over a few physicalmachines
[16:56:02] <cmr> Maybe not!
[16:56:04] <cmr> http://buildbot.rust-lang.org/buildslaves
[16:56:08] <Lovot_> mindcat: Thanks. I figured out what was wrong
[16:56:12] <rust-noob> hmm, I'll check that out!
[16:56:22] <cmr> Someof those are VMs though
[16:57:52] <jclements> rust-noob: for the reasoning here, you might be interested in this discussion of iterator invalidation: http://stackoverflow.com/questions/16904454/what-is-iterator-invalidation
[16:58:05] <miza> is there any web server for rust?
[16:58:13] <miza> i search a litle in github
[16:58:21] <cmr> miza: https://github.com/chris-morgan/rust-http/
[16:58:23] <miza> but i didn't find something up to date
[16:58:26] <cmr> other than that, no
[16:58:35] <miza> nice
[16:58:37] <miza> cmr: thanks
[16:58:44] <miza> i ll check it
[16:58:56] <miza> github search sucks
[16:58:57] <miza> :p
[16:59:02] <cmr> yes it does
[16:59:59] *** Quits: dave1629 (dave@B9A1BD45.EEDD3B02.DDE5D3F6.IP) (Quit: dave1629)
[17:00:50] <rust-noob> hmm, I don't get it
[17:01:37] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:01:37] *** ChanServ sets mode: +ao dherman dherman
[17:01:39] <rust-noob> I'm using a function, fn append(vec1: &mut[uint])
[17:01:46] *** Quits: eatkinson (eatkinson@moz-DA40A624.airbears2.berkeley.edu) (Quit: eatkinson)
[17:01:54] <rust-noob> and I pass in a vec like ~[1,2,3]
[17:01:58] <rust-noob> :/
[17:02:01] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:02:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:02:35] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[17:05:25] <nmatsakis> rust-noob: a slice (&[uint] or &mut[uint]) is basically a pointer into another vector,
[17:05:29] *** Joins: eatkinson (eatkinson@moz-7F16A4AB.airbears.berkeley.edu)
[17:05:32] <nmatsakis> rust-noob: it cannot be resized, you can just read the data or modify it
[17:05:38] *** Joins: Jesin (Jessin_@moz-130D8933.cc.lehigh.edu)
[17:06:09] *** Joins: jstevans1 (Instantbir@moz-F3C02489.bootp.virginia.edu)
[17:06:10] <nmatsakis> rust-noob: if you want to grow a vector, you need a complete vector, or a pointer to one. Something like: `&mut ~[uint]` is a pointer to a complete vector, and thus permits resizing
[17:06:17] *** Quits: jstevans (Instantbir@moz-F3C02489.bootp.virginia.edu) (Ping timeout)
[17:06:33] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[17:06:41] <rust-noob> ah ok! 
[17:06:49] <rust-noob> I'll try it out!
[17:07:12] *** Quits: eatkinson (eatkinson@moz-7F16A4AB.airbears.berkeley.edu) (Ping timeout)
[17:07:26] <nmatsakis> rust-noob: feel free to put the code that doesn't work in a gist or on pastebin or something, that makes it easier for us to see what's wrong
[17:07:51] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:09:52] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:10:02] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[17:10:37] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[17:11:06] *** Joins: eatkinson (eatkinson@moz-DA40A624.airbears2.berkeley.edu)
[17:12:40] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:12:40] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[17:12:44] <rust-noob> here we go ;)
[17:12:45] <rust-noob> https://gist.github.com/flo-l/4dc3a7a89ecc9b98534a
[17:14:03] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:15:06] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[17:15:09] <ecr> what's the environment variable that makes rust run tasks sequentially now? RUST_TEST_THREADS?
[17:15:29] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[17:16:56] <engla> I think it is RUST_TEST_TASKS
[17:17:06] <olsonjeffery> RUST_NO_FUN_ALLOWED_NEVER_EVER
[17:17:21] <engla> does RUST_THREADS=1 still influence the test runner
[17:18:02] *** Joins: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP)
[17:18:26] <ecr> my mulithreaded IO tests failed on bors and all I got was an abort. >.<
[17:19:14] <cmr> engla: no
[17:19:27] <engla> cmr: it looks like it does to me
[17:19:43] <cmr> ecr: RUST_TEST_TASKS
[17:19:52] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[17:20:06] <cmr> the test runner being unit tests
[17:20:10] <cmr> I don't know about compiletest
[17:20:25] <engla> by the way RUST_THREADS=  and rust refuses to run (aborts!)
[17:20:55] <ecr> thanks
[17:21:03] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[17:21:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e252585 to 14d39cec6: 02http://git.io/N3iJvQ
[17:21:03] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:21:05] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:21:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/KVhTnA
[17:21:05] <ghrust> 13rust/06auto 14c5e0f8e 15Alex Crichton: Upgrade libuv to the current master (again)...
[17:21:05] <ghrust> 13rust/06auto 146533caf 15bors: auto merge of #8994 : alexcrichton/rust/upgrade-libuv, r=brson...
[17:21:05] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:21:14] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:22:03] <jclements> grr... is there a make target for the "debuginfo" tests?
[17:23:14] <jclements> more to the point: is there a documented list of make targets, or a way to extract them automatically?
[17:23:25] <cmr> no and no
[17:23:49] <cmr> remake can extract a subset of them
[17:23:50] <jclements> cmr: well, then, now that I've got your attention... any idea what the make target for the "debuginfo" tests would be?
[17:23:52] <cmr> but not all of them
[17:23:56] <cmr> jclements: I don't :(
[17:24:05] <jclements> cmr: ah well. Thanks anyway!
[17:24:21] <cmr> it'd probably be one of the super-obscure ones with the host triples and weird names
[17:24:37] *** Joins: ofeldt (ofeldt@moz-8ECF7AD4.dip0.t-ipconnect.de)
[17:24:41] <jclements> cmr: yep... I'm off to look for a -v flag to make that'll list subtargets
[17:25:12] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[17:25:27] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[17:25:27] *** Quits: ofeldt- (ofeldt@moz-9BFD23F6.dip0.t-ipconnect.de) (Ping timeout)
[17:26:41] <jclements> looks like it's -d . Ooh, I'm about to get a heck of a lot of terminal output, aren't I?
[17:26:53] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:27:10] <rust-noob> another question: how do I iterate over all pairs of a vector?
[17:27:17] <rust-noob> (not window_iter)
[17:27:56] <engla> rust-noob: chunk_iter ?
[17:28:06] <rust-noob> yes! I just found it!
[17:28:08] <engla> v.chunk_iter(2)
[17:28:10] <rust-noob> thank you!
[17:28:18] <ecr> rust-noob: so like if you have a vector [1, 2, 3], you want [[1, 2], [2, 3]] or [[1, 2], [3]]?
[17:28:56] <mindcat> how can we use "T" this type?
[17:29:10] <cmr> mindcat: can you elaborate?
[17:30:00] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[17:30:14] <mindcat> http://seld.be/rustdoc/master/std/container/trait.Set.html what mean "Set<T>", that is I want
[17:31:15] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[17:31:17] <cmr> For traits it means you would do like `impl Set<int> for YourType { ... }`, or `impl<T> Set<T> for YourType<T> { ... }` or similar
[17:31:37] <rust-noob> ecr: no, I want [1,2] and nothing
[17:31:40] <rust-noob> ;)
[17:31:57] <mindcat> http://paste.ubuntu.com/6071317/ at 14 line
[17:32:24] <ecr> rust-noob: ah, then chunk_iter won't work (if it runs out of elements, it just gives the remainder)
[17:32:26] *** Joins: fyolnish (fyolnish@moz-AE42C26E.uqwimax.jp)
[17:32:28] <cmr> mindcat: you cannot use T there because it's neither a type parameter or a concrete type
[17:32:29] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:32:30] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:32:38] <engla> ecr: well it's easy to skip the last one if it's uneven
[17:32:45] <cmr> mindcat: the T in the docs isn't part of the public API, it's just a placeholder name saying "any type parameter"
[17:32:47] <ecr> rust-noob: you'll want v.chunk_iter(2).filter(|v| v.len() == 2)
[17:32:51] *** Quits: fyolnish (fyolnish@moz-AE42C26E.uqwimax.jp) (Client exited)
[17:32:54] *** Joins: fyolnish (fyolnish@moz-AE42C26E.uqwimax.jp)
[17:32:54] <mindcat> cmr
[17:33:02] <cmr> mindcat: you need to decide which type you want a set of
[17:33:05] <mindcat> cmr: yes, That is I want
[17:33:16] <mindcat> cmr: I mean..
[17:33:28] <cmr> mindcat: so enum Tag<T> { .... List(~Set<T>) }
[17:33:32] <engla> rust-noob: or  v.slice(0, v.len() - v.len() % 2).chunk_iter(2)
[17:33:44] <ecr> that works too
[17:34:04] <rust-noob> thank you :)
[17:34:09] <dherman> http://blog.llvm.org/2013/09/a-path-forward-for-llvm-toolchain-on.html
[17:34:12] *** Quits: rust-noob (Mibbit@moz-3112320B.graz.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[17:35:19] <cmr> dherman: yeah, I saw that too
[17:35:27] <mindcat> cmr: ...I can't explain it
[17:35:29] <ecr> bors queue is empty
[17:35:46] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:35:49] <cmr> dherman: very exciting for me: I'd love to use LLVM toolchain with visual studio
[17:36:06] <cmr> I don't think it really has implications for rustbesides more windows devs looking at LLVM
[17:36:08] <dherman> I'm not close enough to the details to really understand what's different
[17:36:21] <dherman> cmr: I just know brson was telling me we have Windows issues, esp. for stack unwinding
[17:36:40] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[17:37:19] *** Quits: saneyuki (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[17:37:30] <veddan> What's the best way of doing "switch with fallthrough" in Rust, if performance is very important? Example from the SpookyHash source: http://pastebin.com/cfcPSKLR
[17:38:10] <cmr> veddan: there's no good way of doing it unfortunately
[17:38:41] <veddan> Match with repeated lines is a pain to maintain, and a series of ifs makes unecessary comparisons
[17:38:50] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[17:38:56] <mindcat> cmr: "List" is list, but one type only, so I want do this
[17:40:39] <veddan> cmr: ok. I guess it's not needed that often
[17:40:58] <ecr> veddan, cmr: I think it would be possible to make a 'switch with fallthrough' macro to that expands to repeated lines, but no one has done it
[17:41:42] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[17:42:03] *** Quits: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[17:43:23] <veddan> ecr: that's a good idea, I'll look into it. I imagine it'll need recursive marcos (do we have that?)
[17:43:33] <pauls> veddan: yes
[17:44:27] <pauls> I wrote something similar as a demo of recursive macros a while ago, but I don't know if I have a copy still.
[17:44:34] <ecr> veddan: I'd suggest going with repeated lines for now (or just calling out to C) if you really need the performance.
[17:44:59] *** jorendorff is now known as jorendorff_away
[17:45:24] <jclements> what does it mean if something succeeds on the "try" buildbots but fails when bors is testing? Does 'try' not run all of the test sets?
[17:45:47] <cmr> jclements: which buildbot isit failing on?
[17:46:54] <jclements> cmr: I'm getting failures on auto-linux-64-nopt-t in the debug-info set of tests.... but the linux try-bot succeeded.
[17:47:12] <veddan> ecr: I'm actually using repeated lines now, but I though I'd ask if there was a better way
[17:47:19] <cmr> jclements: try doesn't run nopt
[17:48:25] <jclements> cmr: is nopt... a flag? -Z disable_optimization or some such?
[17:48:59] <cmr> jclements: just doesn't pass -O to rustc afaik
[17:49:05] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:49:05] <ghrust> 01[13rust01] 15jbclements 04force-pushed 06try from 144ca1f28 to 14ac82090: 02http://git.io/k471pw
[17:49:06] <ghrust> 13rust/06try 146e3b2ab 15John Clements: move and duplicate macro defns in sha2 to make them hygienic...
[17:49:06] <ghrust> 13rust/06try 1477c96d7 15John Clements: disallow ident equality checks when contexts are not equal
[17:49:06] <ghrust> 13rust/06try 14315ea66 15John Clements: rename resolve to mtwt_resolve
[17:49:08] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:49:08] <cmr> it might also be -Z no-opt, not sure
[17:49:09] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Quit: Lost terminal)
[17:49:17] <jclements> cmr: k, thx
[17:50:07] *** Quits: eatkinson (eatkinson@moz-DA40A624.airbears2.berkeley.edu) (Quit: eatkinson)
[17:50:22] <ecr> jclements: ./configure --disable-optimize
[17:50:29] <ecr> then rebiuld
[17:50:32] <ecr> *rebuild
[17:50:38] <jclements> ecr: gracias
[17:50:57] <ecr> jclements: I ran into the same problem. tests failing on nopt bors
[17:51:13] <jclements> ecr: and... did you solve it?
[17:51:32] <acrichto> does PYTHONPATH not work everywhere?
[17:51:47] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[17:51:48] <acrichto> oh wait nvmd
[17:51:57] *** Quits: Jesin (Jessin_@moz-130D8933.cc.lehigh.edu) (Input/output error)
[17:52:00] <ecr> jclements: I'm building a nopt version right now. bors just aborted so I don't even know which test failed >.<
[17:52:38] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[17:53:09] <jclements> ecr: the most recent one? it looks like that failed with some "you need to install gyp first" error, no?
[17:55:00] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[17:55:14] <ecr> jclements: I don't think so, mine failed yesterday. I was trying to make I/O tests multi-threaded and it apparently broke something.
[17:55:22] <jclements> ecr: my mistake, sorry.
[17:56:32] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[17:56:32] *** ChanServ sets mode: +o jdm
[18:01:42] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[18:08:54] *** Joins: rust-noob (Mibbit@moz-3112320B.graz.surfer.at)
[18:08:54] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:08:54] *** ChanServ sets mode: +o tjc
[18:09:22] <rust-noob> hey! how do I create a vector that can be resized dynamically?
[18:09:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:09:35] <Ms2ger> ~[]?
[18:10:17] <rust-noob> ok, and how do I pass it into another function, so that it can still be modified (also in size) ?
[18:11:36] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[18:11:56] <Ms2ger> I suppose...
[18:12:21] <jclements> holy moley! with optimization off, typechecking takes *forever*...
[18:12:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:13:37] <Ms2ger> let mut x = ~[0u];
[18:13:44] <Ms2ger> fn y (a: &mut ~[uint]) { a.push(1u); }
[18:13:48] <Ms2ger> y(&mut x)
[18:14:08] <cmr> jclements: yes, this is why we keep them on :)
[18:14:36] <ecr> jclements: wait until you start running the testsuite
[18:15:31] <ecr> rust-noob: I'm pretty sure Ms2ger is right, you'll need to pass a &mut to the ~[].
[18:15:37] <erickt> tjc: ping
[18:15:56] <ecr> &mut can't resize the vector. (the vector could need to be moved which would make the reference invalid)
[18:16:06] <ecr> so you need the extra level of indirection
[18:16:14] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:16:15] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146533caf to 14d39cec6: 02http://git.io/N3iJvQ
[18:16:15] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:16:15] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:16:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/TTwv9A
[18:16:15] <ghrust> 13rust/06auto 14b4c36c2 15Alex Crichton: Upgrade libuv to the current master (again)...
[18:16:15] <ghrust> 13rust/06auto 1428d042e 15bors: auto merge of #8994 : alexcrichton/rust/upgrade-libuv, r=brson...
[18:16:16] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:17:21] *** Quits: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu) (Ping timeout)
[18:17:23] <tjc> erickt: pong
[18:17:37] *** jorendorff_away is now known as jorendorff
[18:18:07] *** Joins: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu)
[18:18:51] <rust-noob> may anyone please have a short look on this snippet? https://gist.github.com/flo-l/cc0fb78bbe66e2648cd1
[18:18:54] *** Parts: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) ()
[18:19:06] <erickt> tjc: hey there! I just wanted to let you know I've started messing around with my fbuild-in-rust idea
[18:19:17] <ecr> rust-noob: anything in particular you want feedback on?
[18:19:21] <cmr> erickt: what is fbuild?
[18:19:24] <erickt> tjc: unfortunately I don't have any examples to show you on this machine :)
[18:19:31] <tjc> erickt: cool
[18:19:38] <erickt> cmr: https://github.com/felix-lang/fbuild
[18:19:46] <cmr> rust-noob: what about it?
[18:20:00] <erickt> cmr: extra::workcache is based off of my idea
[18:20:10] <tjc> erickt: Besides stuff-workcache-does, what does it do (or what do you want it to do)?
[18:20:16] <rust-noob> yes, it doesn't work, because of several errors, I think I'm completely wrong with my concept
[18:20:19] <erickt> ack, got to run to a meeting now, I can chat more later today
[18:21:14] <rust-noob> I commented the errors
[18:21:19] <rust-noob> (on github)
[18:21:25] <tjc> erickt: no prob
[18:22:23] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:22:23] *** ChanServ sets mode: +ao brson brson
[18:23:18] <veddan> rust-noob: you probably want just `population.push_all(children)` (or maybe `population = children`)
[18:23:44] *** Quits: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu) (Quit: jclements)
[18:23:59] <rust-noob> ok, I actually want to join the vectors and then keep the better 66% ! ;)
[18:24:22] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[18:24:41] <rust-noob> nice! this fixes one of the two errors!
[18:24:50] <rust-noob> I'll post the remaining one on github!
[18:25:16] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[18:25:27] <rust-noob> I just don't get why population is of type () :/
[18:25:52] *** Quits: igl (igl@moz-79D9853B.adsl.alicedsl.de) (Ping timeout)
[18:25:59] <ecr> push_all() modifies the vector and returns ()
[18:26:08] <ecr> you tried to assign that to population
[18:26:09] <veddan> because you assign the return value of push_all to it
[18:26:13] <ecr> which causes the first type error
[18:26:30] <ecr> and the second is because you tried to call a method on population, which is now ()
[18:27:01] <ecr> so it's actually two error messages stemming from the same problem :)
[18:27:05] *** Joins: igl (igl@moz-414A97B0.adsl.alicedsl.de)
[18:27:41] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[18:27:45] <rust-noob> thank you so much!! :D
[18:28:30] <ecr> no problem! it's a pretty easy thing to run into when you're getting started. I must have done that a dozen times at the start of the summer
[18:28:45] *** Quits: igl (igl@moz-414A97B0.adsl.alicedsl.de) (Ping timeout)
[18:28:56] *** Joins: igl (igl@moz-BBE5A360.adsl.alicedsl.de)
[18:31:03] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[18:32:53] <cmr> http://ix.io/7TD
[18:33:11] <cmr> A problem I see with the trait system is that traits can only specify methods
[18:33:25] <cmr> This means you need to have accessors for things if you want to access some state
[18:33:42] <cmr> Why is this, and is there a clean non-accessor way to avoid this?
[18:34:08] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[18:34:24] *** Joins: mib_cf05rz (Mibbit@7E7E73E3.1CE99822.D8537A8F.IP)
[18:34:34] <cmr> (this particular piece of code isn't optimal, justsomething I had lying around)
[18:35:48] <sfackler> you're asking why you can't do something like trait Foo { foo: int }?
[18:36:06] <tjc> cmr: traits not specifying fields avoids C++'s issues with multiple inheritance
[18:36:08] <tjc> Among other things
[18:36:10] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[18:36:29] *** Quits: mib_cf05rz (Mibbit@7E7E73E3.1CE99822.D8537A8F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:36:47] <cmr> tjc: I'm unfamiliar with said issues
[18:36:49] <sfackler> it'd also prevent implementing the trait with anything other than a struct
[18:37:03] <cmr> (I don't really use C++ extensively)
[18:37:16] <cmr> sfackler: that's a good point
[18:37:36] *** Quits: rust-noob (Mibbit@moz-3112320B.graz.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[18:38:06] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[18:38:31] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[18:38:33] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[18:38:44] <tjc> cmr: basically, C++ implements inheritance by guaranteeing that the fields that are inherited from a parent class are a prefix, in memory, of all the fields of a given object
[18:39:13] <tjc> with multiple inheritance, if you inherit from A and B and both of them have a field x, potentially the compiler has to lay out the object with two different copies of x at different offsets
[18:39:32] <tjc> because if you pass it to something expecting an A, it has a different expectation about where to find the x field than something expecting a B would
[18:39:39] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:39:39] <tjc> as you can imagine, this is error-prone and wastes space
[18:39:45] <cmr> Yes
[18:39:53] <tjc> we avoid that problem in Rust, even though a type can implement multiple traits, by making traits only about methods, and not fields
[18:40:05] *** Joins: rust-nob (Mibbit@moz-3112320B.graz.surfer.at)
[18:40:17] *** rust-nob is now known as rust-noob
[18:40:44] <cmr> One way I can see to avoid that is 1. during monomorphization directly use the proper offset, 2. include a pointer to the field in the vtable
[18:40:53] <rust-noob> hey! how do I turn a vec into a random access iterator?
[18:41:09] <Ms2ger> .iter()?
[18:41:26] <rust-noob> I need random access to it
[18:41:38] <rust-noob> iter() isn't random, is it?
[18:41:55] *** Quits: mindcat (root@4D722E6D.DC005319.857BDFA9.IP) (Ping timeout)
[18:42:02] <cmr> rust-noob: itis
[18:42:06] <cmr> it returns a VecIterator
[18:42:17] <cmr> which implements RandomAccessIterator among other things
[18:42:53] <rust-noob> ok nice! ;) could yu please give me a code snippet how to use it? ;)
[18:43:16] <rust-noob> rusti: ~[1,2,3,4].iter().random_access_iterator()
[18:44:35] <cmr> https://gist.github.com/cmr/26b49b78eef6e2184ce1
[18:44:44] <cmr> Note that the idx method comes from RandomAccessIterator
[18:45:26] <rust-noob> thank you! ;)
[18:45:33] *** Quits: nkoep (nik@moz-112207D5.pool.mediaways.net) (Ping timeout)
[18:46:36] <rust-noob> and how do I shuffle a vector?
[18:46:55] <rust-noob> (sorry for the annoying question all the time ;) )
[18:47:23] *** Joins: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu)
[18:47:38] <cmr> rust-noob: shuffle method on std::rand::Rng
[18:49:12] <brson> I don't understand RandomAccessIterator - it isn't an iterator
[18:49:52] <rust-noob> This also confused me!
[18:49:56] <engla> brson: I think it's in experimental stage. But it's defined for iterators that allow random access
[18:49:58] <rust-noob> cmr: thank you!
[18:50:28] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[18:50:45] <engla> brson: for example    v.iter().chain(u.iter())   u,v both vectors, is an random access iterator, you can access it by index
[18:50:52] <sfackler> it seems like a random access iterator trait would have a seek method rather than an idx method
[18:50:55] <engla> not sure what's going to come out of it
[18:51:13] <brson> we have Index for random access
[18:51:34] <brson> does RandomAccessIterator actually iterate to access the indexes?
[18:51:38] <engla> no
[18:51:45] <jclements> hmm... anyone know how to run the debuginfo tests? I see "warning: tests disabled: gdb on darwing needs root", but re-running make check as root gives the same message....
[18:51:53] <engla> it's a trait iterators can have
[18:51:56] <brson> seems like just a different definition of Index
[18:52:12] <engla> strcat is the person to ask
[18:52:50] <engla> it also extends the notion of indexable length to iterators
[18:53:15] <brson> jclements: it appears to just always be disabled on darwin
[18:53:19] <rust-noob> what am I making wrong? std::rand::RngUtil.shuffle(population);
[18:53:20] <brson> it's not actually detecting the user
[18:53:37] <brson> jclements: there's some code in mk/tests.mk that could be commented out i guess if you want to run it
[18:53:38] <jclements> brson: thanks! so... If bors is failing on this, I need to find a real linux machine to test on.
[18:53:47] <rust-noob> ok got it!
[18:54:42] <ecr> rust-noob: shuffle returns a vector instead of mutating
[18:54:46] <ecr> oh, you got that already
[18:55:09] <ecr> shuffle_mut will change the underlying vector
[18:55:19] <rust-noob> a thank!
[18:55:20] <rust-noob> s
[18:55:42] <erickt> tjc / cmr: back, sorry. what I'm playing around with is trying to replicate my builder interface. So the end user could write "let cpp = guess_cpp_compiler(); cpp.build_exe("foo", ["foo.cc", "bar.cc"])" and it'd use workcache behind the scenes to only recompile when the files change
[18:55:58] <sfackler> jbclements: gdb has to be codesigned on osx which could be what it's complaining about
[18:56:07] *** Quits: rust-noob (Mibbit@moz-3112320B.graz.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[18:56:20] <tjc> erickt: Ah, neat! That would be very useful
[18:56:23] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[18:56:33] <jclements> sfackler: either way, looks like finding a real linux machine is the fastest way to debug this...
[18:56:44] <tjc> there are some open rustpkg bugs on it, but what you're doing would be more elegant than what I was planning to do on it at least in the short term :-)
[18:58:14] <erickt> :) we'll see how easy it'll be to get it all to work. I'm going to have to do some changes to workcache though. For example, workcache doesn't yet expose a mechanism to save the database :)
[18:59:30] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[19:00:01] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[19:00:04] *** Joins: nkoep (nik@moz-9C11A761.vpn.rwth-aachen.de)
[19:00:23] <erickt> tjc: second, it doesn't actually work :) the db is really just a TreeMap<WorkKey,~str>, where WorkKey is a (~str, ~str). We're serializing to json, which doesn't support compound keys, and so when we deserialize extra::json fails
[19:00:44] <tjc> erickt: I added the mechanism to save the database -- that's in a pull request I have upcoming
[19:00:49] <erickt> tjc: neat!
[19:00:51] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[19:00:51] *** ChanServ sets mode: +o jdm
[19:00:52] <erickt> I'll check it out
[19:00:53] <tjc> I also worked around the json thing by making the treemaps hierarchal
[19:01:01] <erickt> I was just about to do that.
[19:01:03] <tjc> I haven't submitted the PR yet, will let you know when I do
[19:01:14] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[19:01:35] <erickt> tjc: ok :) glad I checked in with you, it'll save me some work :)
[19:01:53] <erickt> ack, too many smilie faces. sigh
[19:02:03] <tjc> :-) :-) :-)
[19:02:31] <erickt> ===|: ' )>
[19:03:29] <doomlord> just reading above about inheritance, is actual inheritance of any sort being considered?
[19:03:38] <engla> erickt: extra::json needs some organization to be sane
[19:04:01] <tjc> doomlord: what do you mean by "actual inheritance"?
[19:04:02] <erickt> engla: what do you have in mind?
[19:04:19] <engla> erickt: the roles of ToJson and Encodable, Decodable
[19:04:34] <doomlord> to clarify.. struct inheritance , data fields
[19:04:40] <engla> erickt: using Encoder trait to transform Json -> str and Decoder trait to transform Json -> Rust value
[19:04:42] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[19:05:26] <engla> erickt: it all seems a bit illogical
[19:05:40] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[19:05:55] <tjc>  doomlord : oh, I see. I don't think so
[19:06:26] *** Quits: igl (igl@moz-BBE5A360.adsl.alicedsl.de) (Ping timeout)
[19:06:36] <erickt> engla: ah, right. yeah, that's a bit of a wart
[19:07:22] <engla> it can't be a wart before 1.0
[19:07:27] <engla> warts are hard to remove
[19:07:30] <doomlord> in some situations i did find myself mising single inheritance .. being able to compose data without needing to embed and add an extra layer of depth ... the simple thing of having the 'base' data prefixed in memory and just extended.
[19:08:02] <erickt> engla: I've been brainstorming a rewrite of the serialization stuff to use iterators that I'm hoping can fix that problem. Unfortunately it really needs generators for it to be pleasant to use
[19:08:23] <engla> hm ok
[19:08:46] *** Joins: igl (igl@moz-8D92BEE2.adsl.alicedsl.de)
[19:08:54] <erickt> I am... concerned... about this 1.0 deadline coming up though
[19:09:02] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[19:09:22] <doomlord> (i think there are examples of this in the rust compiler where you have to think/navigate a bit more to find your way around the node types ... thinkgs like spanned<T> ) .. but i never find myself missing the complexity of C++ multiple inheritance
[19:09:58] <engla> erickt: and, either you use ToJson, but you can also instantiate json::Encoder and feed it arbitrary values that implement Encodable
[19:10:23] <engla> that's not good
[19:10:40] <doomlord> i've never used multiple inheritance in C++, but single inheritance .. quite  a lot (i think i probably did it in asm too ,  different objects with some shared data slots)
[19:10:42] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[19:10:45] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[19:10:52] *** Joins: igl1 (igl@moz-41DCCF63.adsl.alicedsl.de)
[19:11:01] <erickt> engla: I would prefer to have at least rustpkg done before we freeze. Then we could move a library like extra::json out of rust proper and be able to rewrite it when we need to when things like generators land
[19:11:16] *** Quits: igl (igl@moz-8D92BEE2.adsl.alicedsl.de) (Ping timeout)
[19:11:38] <miza> i have a general question, are there a plan for "production ready rust"?
[19:12:13] <erickt> engla: You are right though, ToJson should be removed. Can you file a bug to get it removed?
[19:12:24] <engla> sure
[19:12:46] <engla> it would be nice if we could find a way to express the limitations of Json though
[19:12:48] <erickt> miza: version 1.0 is planned to be backwards compatible with any 1.x code.
[19:12:49] <engla> like ToJson does
[19:12:58] <engla> (only string keys)
[19:13:07] <erickt> miza: last I heard we were thinking of hitting 1.0 by the end of the year
[19:13:20] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[19:13:20] *** ChanServ sets mode: +o jdm
[19:13:26] <miza> erickt: nice, its near :p
[19:13:51] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:14:03] <erickt> engla: yeah, that'd be nice.
[19:14:03] <miza> i ll try rust in my day job
[19:14:04] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[19:14:16] <miza> i ll try for testing some logs parsing
[19:14:33] <miza> that now is with ruby and it isn't so fast
[19:14:34] <SiegeLord> Is there a way to examine the generated metadata?
[19:14:45] <SiegeLord> Like an CSV dump or something?
[19:14:53] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[19:14:56] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[19:15:01] <miza> but now i cant use it on production
[19:15:44] <cmr> doomlord: I would appreciate single inheritance like that
[19:15:59] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Quit: victorporof)
[19:16:03] <Ms2ger> I'm sure Servo would too
[19:16:04] *** Quits: jack (jack@moz-DF5A9AA3.members.linode.com) (Ping timeout)
[19:16:06] <cmr> I don't even necessarily want subtyping, just less typing.
[19:16:07] *** Quits: mythmon (mythmon@moz-AD308AD7.members.linode.com) (Ping timeout)
[19:16:09] *** Quits: snerd (motk@moz-E535583C.nonstopcrunchy.net) (Ping timeout)
[19:16:17] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[19:16:22] <cmr> less typing as in repitition in structs
[19:16:27] <doomlord> yes , +1
[19:16:41] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (Ping timeout)
[19:16:42] <doomlord> its simple from a low level perspective so it makes sense to me
[19:17:16] <engla> erickt: https://github.com/mozilla/rust/issues/9028
[19:17:22] <erickt> engla: thanks!
[19:17:32] *** Quits: igl1 (igl@moz-41DCCF63.adsl.alicedsl.de) (Ping timeout)
[19:17:51] *** Joins: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP)
[19:18:10] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[19:18:23] *** Joins: mindcat (mindcat@CFA3850B.9B7EF212.2BCF2E43.IP)
[19:18:29] *** Joins: igl (igl@moz-277E8F7D.adsl.alicedsl.de)
[19:18:45] <jclements> well, it turns out that master fails check-stage2-codegen on my machine, so I guess I shouldn't worry that my patch also fails there....
[19:19:36] <mindcat> ok, how to build rust docs or somewhere can download docs?
[19:20:03] <cmr> mindcat: `make doc
[19:20:05] <cmr> `
[19:20:12] <cmr> Needs pandoc and nodejs I believe
[19:20:48] <mindcat> cmr: ok.. I will try it
[19:21:03] *** Quits: mindcat (mindcat@CFA3850B.9B7EF212.2BCF2E43.IP) (Quit: leaving)
[19:21:08] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[19:21:14] *** Joins: jack (jack@moz-DF5A9AA3.members.linode.com)
[19:21:14] *** ChanServ sets mode: +o jack
[19:21:40] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:22:04] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:22:11] *** Joins: robertknight (robertknig@moz-29DA0AFD.range86-162.btcentralplus.com)
[19:23:18] *** Joins: mythmon (mythmon@moz-AD308AD7.members.linode.com)
[19:24:00] <doomlord> (i wonder if single  inheritance would actually allow simplifying rustc's own source ..  that would be a strong case for it )
[19:24:17] <engla> acrichto: I think something with the non-moving of variables in println! is broken. My ~str is garbled if I insert a println into my code
[19:25:17] <doomlord> struct struct_field_ {}      type struct_field spanned<struct_field_>;  ...  struct variant_ {..}    type variant spanned<variant_>;  etc.. all the extra symbols declared )
[19:25:26] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[19:26:08] <cmr> doomlord: well, we'd need subtyping for that, if you want to take a generic spanned<T>, and rustdoc_ng *does* exploit the fact that it's a generic.
[19:26:34] <cmr> or, it used to, I don't remember if it still dow
[19:26:36] <cmr> *does
[19:26:49] *** Joins: snerd (motk@moz-E535583C.nonstopcrunchy.net)
[19:28:07] <acrichto> engla: do you have an example?
[19:29:46] <engla> no reduced testcase. Something is wrong. Don't know either way why this happens, but I should accuse you so quickly
[19:29:50] <engla> I should not
[19:30:04] <doomlord> https://github.com/mozilla/rust/issues/1776 <<< i see it had been rejected already perhaps
[19:30:04] *** Joins: mindcat (mindcat@CFA3850B.9B7EF212.2BCF2E43.IP)
[19:30:11] *** Joins: t-8ch (Mibbit@moz-BA2B26FD.dip0.t-ipconnect.de)
[19:30:13] <nmatsakis> acrichto: ping
[19:30:20] <acrichto> engla: is it garbled in the sense of being moved out or does it just print weird?
[19:30:21] <acrichto> nmatsakis: pong
[19:30:40] <nmatsakis> acrichto: so I've got this problem that deriving reuses subtreees of the AST, leading to the same node-id being used for multiple tree nodes.
[19:30:46] *** Quits: t-8ch (Mibbit@moz-BA2B26FD.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[19:30:51] <nmatsakis> acrichto: (I believe this is true of macros too, and perhaps other syntax extensions)
[19:30:57] <acrichto> I would believe it
[19:31:02] <nmatsakis> acrichto: I've been working on a fix that just does a final pass and rewrites node ids
[19:31:06] *** Joins: t-8ch (t-8ch@moz-BA2B26FD.dip0.t-ipconnect.de)
[19:31:11] <nmatsakis> acrichto: I am not sure if this is the best fix, tbh, but it should work :)
[19:31:25] <nmatsakis> anyway, well -- it *ALMOST* works now
[19:31:32] <nmatsakis> after I fixed a bunch of things in ast folding that were broken
[19:31:34] <nmatsakis> but the reason I pinged you,
[19:31:40] <nmatsakis> is that dbaupp mentioned you are familiar with deriving,
[19:31:46] <acrichto> a little yeah
[19:31:46] <engla> acrichto: it does get overwritten by a part of a later assert format string. I'm puzzled
[19:31:51] <nmatsakis> and I was wondering if you had any sense for how easy it'd be to fix "at the source"
[19:32:00] <nmatsakis> vs the "rewrite all numbers" apporach
[19:32:05] <mindcat> I already installed pandoc nodejs llnextgen, type make doc, tell me no found what I installed
[19:32:16] <nmatsakis> though I like the rewrite all ids approach because it helps to ensure that ids within a fn are adjacent
[19:32:18] <cmr> mindcat: you need to re-run configure
[19:32:31] <mindcat> cmr: ok...
[19:32:37] <acrichto> nmatsakis: hmm, I know that arguments passed down below in deriving are all duplicated, although even if deriving were fixed this would still cause lots of problems in maacros, right?
[19:32:44] <nmatsakis> acrichto: though sadly my current code breaks, but only in some two particular cross-crate tests, haven't had time to dig into that
[19:32:49] *** Joins: aeqwa (aeqwa@moz-C1B65A90.dsl.tropolys.de)
[19:33:03] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[19:33:03] <nmatsakis> acrichto: yes, I'd still have to fix macros, perhaps fmt!, who knows what else. that was why I opted for "rewrite it all at the end" approach :)
[19:33:11] <acrichto> nmatsakis: yeah I kinda like that
[19:33:17] <acrichto> unless it causes regressions :(
[19:33:55] <acrichto> engla: assert isn't using format! yet? that does sound weird though... I'd be more than willing to investigate if you have something to reproudce on (ok if it's large)
[19:34:08] <nmatsakis> acrichto: well, something dies in cross-crate name resolution, but it's quite possibly a bug elsewhere
[19:34:14] <acrichto> nmatsakis: I would pursue the "rewrite all" approach first before fixing everyting in particular
[19:34:14] <engla> acrichto: it's probably the assert format string's fault
[19:34:19] <nmatsakis> acrichto: or else there is still some lingering problems with fold
[19:34:40] <nmatsakis> acrichto: much of the fold code is incorrect, and skips over some of the subtree, so I've been working on fixing that
[19:34:43] <acrichto> nmatsakis: the rewrite pass is running before resolve, right?
[19:34:47] <nmatsakis> acrichto: yes.
[19:34:57] <acrichto> that is really weird
[19:34:59] <nmatsakis> acrichto: as I said, it builds stage2 and runs all of run-pas but 2 tests,
[19:35:02] <nmatsakis> acrichto: so it MOSTLY works
[19:35:03] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[19:35:29] <acrichto> nmatsakis: do the tests fail with ICEs about not-found node ids?
[19:36:47] <nmatsakis> acrichto: no, they just fail to resolve some imports
[19:37:06] <acrichto> that is truly strange
[19:37:25] *** Joins: sigma^phone (AndChat182@moz-AB890832.dab.02.net)
[19:38:02] *** Quits: sigma^phone (AndChat182@moz-AB890832.dab.02.net) (Quit: Bye)
[19:38:13] <nmatsakis> yes, it's very odd.
[19:38:18] <nmatsakis> problem could be on either side of course
[19:38:30] <nmatsakis> I guess rustc --ls doesn't do anything anymore
[19:39:01] <acrichto> wait that's a thing?
[19:39:05] <acrichto> to list symbols in a library?
[19:41:50] <mindcat> cmr: installed pdflatex, then make doc, I get nothing. do I make all again?
[19:42:08] <cmr> mindcat: you shouldn't have to
[19:43:19] <mindcat> cmr: but, I did not see rust.pdf
[19:44:08] *** Quits: nkoep (nik@moz-9C11A761.vpn.rwth-aachen.de) (Ping timeout)
[19:45:24] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:46:16] <mindcat> cmr: so what is the next now? 
[19:47:10] <cmr> no idea
[19:48:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:49:37] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Ping timeout)
[19:51:06] <mindcat> well, I need docs because my computer network is down. now I am using my Android connect a server to talk etc.
[19:51:33] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:54:09] <cmr> http://static.rust-lang.org/doc/rust.pdf
[19:54:19] <cmr> but it's just the reference manual, which isn't that useful
[19:55:26] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:56:29] <mindcat> cmr: thanks, but that is not I want
[20:00:20] <mindcat> cmr: when make all them, I got docs now
[20:00:41] <mindcat> cmr: :D
[20:01:31] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:04:00] *** Joins: nkoep (nik@moz-B3D6DFF0.vpn.rwth-aachen.de)
[20:04:00] *** Quits: fabiand (fabiand@moz-2E6786FA.adsl.alicedsl.de) (Quit: Verlassend)
[20:04:04] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[20:05:17] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Quit: Leaving)
[20:05:29] <t-8ch> Hi, I have some problems passing callback functions using FFI. The function gets called but its arguments are NULL. Equivalent (as far as I can tell) C code works fine. Example code: https://gist.github.com/t-8ch/6469165
[20:06:50] <SiegeLord> Your callback should be typed extern "C" fn and not &fn
[20:07:23] <acrichto> olsonjeffery: libuv got upgraded!
[20:08:33] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[20:08:39] *** Joins: fabiand (fabiand@moz-2E6786FA.adsl.alicedsl.de)
[20:10:04] <t-8ch> SiegeLord: Thanks! Now it works.
[20:11:03] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:11:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/TTwv9A
[20:11:03] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:12:27] *** Quits: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com) (Quit: Leaving.)
[20:12:30] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:12:30] *** ChanServ sets mode: +ao dherman dherman
[20:13:03] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[20:15:37] *** Quits: t-8ch (t-8ch@moz-BA2B26FD.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.1)
[20:16:30] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[20:17:36] *** Joins: azita_ (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[20:20:14] *** Quits: azita_ (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita_)
[20:20:40] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:20:40] *** ChanServ sets mode: +o tjc
[20:21:50] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[20:21:56] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[20:21:56] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:22:25] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:24:51] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[20:25:23] <cubic> I can run the configure script (with a warning about windows.h being "present but cannot be compiled"?) and get a makefile out of it. make starts spewing out a crapton of errors as soon as it hits "compile: [...]/lock_and_signal.o"
[20:28:09] <cubic> mostly stuff in windows-related headers about typedef '__AW'
[20:29:14] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:29:29] *** Joins: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP)
[20:29:50] *** Quits: robertknight (robertknig@moz-29DA0AFD.range86-162.btcentralplus.com) (Ping timeout)
[20:29:51] <enomado> test
[20:29:56] <enomado> hi
[20:30:23] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[20:30:54] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Ping timeout)
[20:31:19] *** jorendorff is now known as jorendorff_away
[20:31:27] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[20:31:29] <enomado> I have question. how can i get type information about particular object ?
[20:31:52] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:32:09] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:32:35] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:32:57] <cmr> enomado: what sort of type informatino?
[20:32:59] <cmr> *information
[20:33:38] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:33:40] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[20:33:59] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:34:48] <enomado> just something i can get on compilling errors i.e. 'but found `std::iterator::Filter<,&uint,std::vec::VecIterator<,uint>>'
[20:35:21] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[20:35:34] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:35:56] <miza> is there any mysql adapter for rust (libmysql bindings)
[20:37:02] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[20:37:08] <cmr> enomado: check std::reflect and the implementation of std::repr
[20:37:14] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Ping timeout)
[20:37:32] <erickt> miza: I don't think so, but we do have a sqlite binding
[20:37:37] <cmr> miza: no, but as I understand it rust-bindgen works quite yes
[20:37:45] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[20:37:48] <cmr> *quite well
[20:37:56] <erickt> miza: here's sqlite: https://github.com/linuxfood/rustsqlite
[20:38:14] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:38:24] <erickt> miza: and here is sfackler's rust-postgres bindings: https://github.com/sfackler/rust-postgres
[20:38:43] <miza> i need mysql :(
[20:38:48] <miza> but i ll check them
[20:38:49] <erickt> :(
[20:38:51] <enomado> cmr, ty
[20:38:55] <miza> maybe i ll try to write one
[20:39:01] <miza> but i am noob in rust yet
[20:39:20] <erickt> miza: please do! I got my feet wet with rust writing bindings back 2 years ago
[20:39:31] <erickt> wow, has it really been two years?
[20:39:48] <miza> is there any good reading for writing something like this
[20:39:53] <miza> not rust specific
[20:39:56] <miza> in general
[20:40:33] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[20:40:49] <erickt> miza: a binding to mysql? assuming you can find a license that allows for it, you could follow along the mysql bindings for another language
[20:41:04] <erickt> miza: say ocaml or go
[20:41:10] <doomlord> i presume it has c bindings
[20:41:29] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[20:41:59] <doomlord> rust bidgen is good
[20:42:07] <doomlord> bindgen^
[20:42:34] *** Joins: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com)
[20:43:16] <miza> generating rust code from c?
[20:43:42] <enomado> another question. i cant make it work https://gist.github.com/enomado/6469715
[20:43:55] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:44:03] <enomado> with expected std::iterator::FromIterator<&uint>, but found std::iterator::FromIterator<uint>
[20:45:52] *** kimundi is now known as zz_kimundi
[20:46:02] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:46:38] <engla> enomado: you'll need to map the iterator to the correct element type
[20:46:57] <engla> enomado: in this case  fil.map(|&x| x)  I think
[20:47:20] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[20:47:38] <cmr> miza: yes, though just headers -> extern blocks
[20:48:28] *** Quits: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com) (Ping timeout)
[20:48:36] <miza> i have no idea for this stuff yet, but i ll take a look
[20:48:54] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[20:49:08] <miza> almos all my free time when i dont drink beers and i dont work at my day jo writing ruby, i play with rust :D
[20:49:34] <miza> anyway beer time :p
[20:50:28] <enomado> engla, so i can't just collect Filter ? 
[20:51:41] <engla> enomado: not sure what you mean. you can chain these methods
[20:51:58] *** Joins: tikue_ (tkuehn@DB1DCCAA.EB08480C.689607DE.IP)
[20:52:05] *** Quits: fabiand (fabiand@moz-2E6786FA.adsl.alicedsl.de) (Quit: Verlassend)
[20:52:24] <nmatsakis> argh. why do we build snapshots without #[cfg(debug)]??
[20:52:51] * nmatsakis grumpy
[20:53:18] *** Parts: miza (miza@moz-4DD51325.home.otenet.gr) ()
[20:54:22] <sfackler> miza: if you're feeling up to it, i'd recommend writing a native driver instead of calling into C libs to take advantage of the asynchronous IO in Rust. that's what I've been doing with rust-postgres and it isn't all that bad
[20:54:39] <brson> nmatsakis: hm, I thought we turned debug back on at some point
[20:54:48] <brson> it is a problem to not have logging in the snaps
[20:55:19] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[20:55:34] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:55:40] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Client exited)
[20:56:08] *** Quits: eatkinson (eatkinson@E5442022.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[20:56:18] <enomado> engla, sorry for my bad english. i mean: can i call collect on filter without map ? because I think filter object can implement FromIterator trait. 
[20:56:41] <enomado> it said expected std::iterator::FromIterator<&uint>, but found std::iterator::FromIterator<uint> 
[20:57:30] <enomado> so as i understand FromIterator is implemented for Filter, but why there is &uint
[20:57:30] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:57:40] <brson> i didn't notice that the tls key type changed
[20:57:59] <tikue_> enomado: it's probably because you're iterating over the borrowed pointers
[20:58:14] <tikue_> enomado: in which case mapping to copies is probably the easiest way -- it.map(|&x| x)
[20:58:48] <tikue_> enomado: or if you are ok having a vector of borrowed pointers, you can just do collect::<&uint> probably. i haven't tried it though
[20:58:50] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:59:19] <engla> enomado: just use fil.map(|&x| x).collect
[20:59:49] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[21:00:32] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:01:11] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[21:01:43] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[21:05:01] *** Quits: tikue_ (tkuehn@DB1DCCAA.EB08480C.689607DE.IP) (Quit: tikue_)
[21:05:32] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[21:05:54] *** Joins: tikue_ (tkuehn@DB1DCCAA.EB08480C.689607DE.IP)
[21:06:25] <ecr> rusti: (-3i).to_uint()
[21:06:53] * ecr kind of wants to rename uint to nat
[21:07:08] *** Quits: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu) (Ping timeout)
[21:07:35] *** Joins: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu)
[21:08:18] <enomado> tikue, get it. so I miss the stage where i get borrowed pointers... 
[21:08:40] <enomado> tiffany, collect::<~[&uint]>(); works yeah. just as proof of concept :)
[21:09:22] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:10:09] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:10:24] <enomado> tikue, got it. Filter returns borrowed pointers. thanks :)
[21:10:47] <engla> enomado: no. filter doesn't change the element type of the iterator
[21:10:59] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:10:59] <engla> enomado: the vector iterator uses borrowed pointers as its element type
[21:11:15] <engla> you can use .map() to change the element type
[21:11:39] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:12:12] *** Joins: Jessin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[21:13:26] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[21:13:59] *** Joins: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP)
[21:14:01] *** Joins: riley_ (riley@8BA43816.9AA11D69.65DDFA89.IP)
[21:14:10] *** Quits: dave1629 (dave@7EE7F610.63B79338.DDE5D3F6.IP) (Quit: dave1629)
[21:14:36] <Ralith> ecr: nats don't have an upper bound
[21:14:40] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Ping timeout)
[21:15:33] <enomado> engla, yep. its iterator instead of filter. ty
[21:16:08] <Ralith> or /win 32
[21:16:13] <Ralith> oops
[21:16:57] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:19:33] *** Quits: cdidd (cdidd@moz-A88D4C43.broadband.corbina.ru) (Input/output error)
[21:20:32] *** Joins: newfprag (brandon@moz-C7AC35F5.mh.shawcable.net)
[21:20:40] *** newfprag is now known as brandon-m-skinner
[21:21:36] <enomado> engla, looks like VecIterator is returning &. i find it
[21:21:50] <ecr> Ralith: neither do ints. machine numbers are all (mod num_bytes) anyway
[21:22:08] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[21:22:27] <ecr> err, mod 2^num_bytes
[21:22:42] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[21:22:51] <ecr> dang it, mod 2^num_bits
[21:22:57] <ecr> I swear I can math
[21:23:11] *** Quits: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP) (Ping timeout)
[21:23:26] <Ralith> ecr: yes, that's why it's a bad name
[21:23:53] *** Joins: cdidd (cdidd@moz-3C04A381.broadband.corbina.ru)
[21:23:55] <engla> enomado: right
[21:24:00] <ecr> it's partially why I'd like to scrap int/uint/float and require the size (i8, u32, f64, etc.)
[21:24:08] *** Joins: boredomist (user@B16F530C.DC641F2C.BCAEBB33.IP)
[21:24:29] <ecr> mostly I want to do that to avoid correctness issues when int/uint/float change size across hardware
[21:24:35] <engla> ecr: uint is there so it can be the size of things that are restricted by the address space, like vec
[21:25:05] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[21:25:48] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:26:07] <brson> what's the correct way to compare chars now?
[21:26:42] <jdm> render them to an offscreen buffer in a font of your choice
[21:26:46] <jdm> then perform image comparison
[21:26:53] <engla> I think == and < still are there?
[21:27:23] <brson> jdm: thanks
[21:27:48] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[21:27:52] <brson> engla: oh they are. i had another type error
[21:28:42] <ecr> engla: I don't quite follow the restricted by address space point. could you explain it further?
[21:29:23] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[21:29:32] <cubic> call me when there's discussion about building with mingw32
[21:30:15] *** Joins: jclements_ (jclements@moz-E4774872.dsl.snlo01.pacbell.net)
[21:30:38] <ecr> brson: I'm been stress testing a nopt build. tcp tests are deadlocking occasionally, but no fatal errors yet.
[21:30:51] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:32:38] <engla> ecr: maybe it doesn't matter. uint is like size_t, so the maximum size of memory allocations (for the backing array of vec) is tied to the size of uint
[21:32:52] <engla> but sure, using a nat would have benefits like not having the current overflow bugs
[21:33:45] <ecr> or maybe making it generic? you could use an unbounded nat (and go until memory is exhausted) or a bounded nat (i.e. u8, u32, etc.)
[21:34:04] *** Quits: jclements_ (jclements@moz-E4774872.dsl.snlo01.pacbell.net) (Quit: jclements_)
[21:34:07] <ecr> idk if that would actually work
[21:34:42] <brson> cubic: I gather you are unhappy that you didn't get any response to your build issue. Sorry about that, but not a lot of people are building on windows. Did you use the versions of mingw listed here: https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[21:35:05] <ecr> mostly my problem is with float since correctness of FP algorithms depends much more on the precision than int/nat algorithms do on size
[21:35:26] *** Quits: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP) (Input/output error)
[21:35:38] <engla> ecr: removing 'float' issue is here https://github.com/mozilla/rust/issues/6592
[21:36:07] *** Joins: jasdevsingh (jasdevsing@E6EE25FD.C98EC99C.DD85B588.IP)
[21:36:51] <ecr> engla: yep, I've see that.
[21:38:09] *** Quits: RMF (RMF@moz-BFEC31A2.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[21:38:49] <kmc> huh, you can write @self as a parameter? does that mean to dereference the @-box?
[21:39:04] <kmc> cause unfortunately &self means the opposite of that, and the opposite of &x
[21:39:27] <ecr> kmc: I think it means the method is only defined for @-boxes
[21:39:32] <ecr> kmc: similar to ~self
[21:39:42] <kmc> oh
[21:40:20] <cubic> python 2.7.5, make 3.81, git 1.8.3, gcc 4.5.2 (<4.6)
[21:41:26] *** Quits: jasdevsingh (jasdevsing@E6EE25FD.C98EC99C.DD85B588.IP) (Quit: jasdevsingh)
[21:41:33] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:42:35] * kmc ponders the use cases for passing a Foo versus a ~Foo, in general
[21:43:09] *** Joins: jclements_ (jclements@moz-E4774872.dsl.snlo01.pacbell.net)
[21:43:09] <kmc> I guess they both transfer ownership, but the latter provides the additional guarantee that the object was allocated in the exchange heap, and so can avoid copying
[21:43:24] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[21:44:03] <adridu59> if I want to return a 2d array from a function, shall I use "-> &[int][int]"?
[21:44:06] <ecr> kmc: basically. if you know that self is non-copyable, then ~self and self are equivalent
[21:44:09] <kmc> I guess I don't know what kind of code rustc actually emits for passing structures "by value"
[21:44:10] <engla> ~self is the only way to have a method on ~Trait objects that call "by move"
[21:44:18] <ecr> kmc: but if it's copyable, then they're distinct
[21:44:36] *** Joins: RMF (RMF@moz-BFEC31A2.dsl.telepac.pt)
[21:44:43] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[21:45:27] <kmc> adridu59: probably ~[~[int]]
[21:46:08] <adridu59> thanks!
[21:46:08] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[21:46:10] <kmc> that's not a contiguous 2D array, though
[21:46:43] <adridu59> what do you mean?
[21:46:58] <kmc> it's an owning pointer to a vector of owning pointers to vectors of ints
[21:47:03] <kmc> each row can be allocated separately
[21:47:26] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[21:47:55] <kmc> you can't do ~[[int]] because [int] is variable size and so isn't really a type by itself
[21:48:22] <kmc> you can however do ~[[int, ..20]]
[21:48:28] *** Quits: igl (igl@moz-277E8F7D.adsl.alicedsl.de) (Ping timeout)
[21:48:49] <kmc> which is a pointer to a variable-length vector of fixed- (20-) length vectors of ints
[21:49:20] *** Joins: igl (igl@moz-79B30EC2.adsl.alicedsl.de)
[21:49:42] <ecr> I wonder if adding just enough dependent types to do length of vectors/strings would make us undecidable
[21:50:23] <ecr> I *think* you can remain decidable when you do that do ML-ish systems, but I'm not sure how affines/regions would mix with it
[21:50:31] <adridu59> is there a sort of bufferedreader to read from a string
[21:50:43] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[21:51:03] <adridu59> like if(myString.nextChar() == space { break; }
[21:51:19] <adridu59> else I can just iterate
[21:51:19] <ecr> adridu59: well, you can get a char iterator for a string
[21:51:28] <adridu59> what I was thinking
[21:51:31] <adridu59> :)
[21:51:41] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[21:51:44] <ecr> there's MemReader in std::rt::io::mem, but I'm not sure how reliable it is or whether it does what you want
[21:52:17] <adridu59> I see well I will try to do without that for now and see if it works
[21:53:12] *** Joins: eatkinson (eatkinson@F2CBABDD.772DB3ED.90B17E8F.IP)
[21:54:08] <olsonjeffery> acrichto: \o/
[21:54:26] *** Joins: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com)
[21:54:54] <adridu59> how can I check if the next char on my string is a space?
[21:55:37] *** Quits: eatkinson (eatkinson@F2CBABDD.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[21:55:57] <sfackler> ch == ' ' ?
[21:56:02] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:56:02] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/46C26Q
[21:56:02] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:56:07] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:56:08] <ghrust> 01[13rust01] 15bors pushed 70 new commits to 06auto: 02http://git.io/XL17Xg
[21:56:08] <ghrust> 13rust/06auto 14acad9f3 15John Clements: commenting out special Eq implementation for now...
[21:56:08] <ghrust> 13rust/06auto 14e1734f6 15John Clements: rename resolve to mtwt_resolve
[21:56:08] <ghrust> 13rust/06auto 149ec1623 15John Clements: ident->name
[21:56:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:56:21] <olsonjeffery> ah, yes. *this* base, again.
[21:56:52] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:57:08] <olsonjeffery> rebase, even
[21:57:59] <Thiez> brson: what benchmark were you using for the messagepassing?
[21:58:07] *** Quits: Ms2ger (Ms2ger@moz-B53902AE.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:58:28] <adridu59> how can I check if a char contains a number? is there some casting trick?
[21:59:00] <Thiez> just the rt-messaging-ping-pong one?
[21:59:07] <brson> Thiez: yes
[21:59:29] <engla> adridu59: there are methods and functions for this in std::char
[21:59:47] <engla> adridu59: they check the unicode properties, like  'a'.is_digit()
[21:59:51] <ecr> adridru59: maybe ch.is_digit() ?
[21:59:58] <ecr> http://static.rust-lang.org/doc/std/char.html
[22:03:59] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[22:04:23] <adridu59> how do one declare arrays? looks like C semantics don't work
[22:06:21] <ecr> adridu59: use of vec's initialization methods (from_fn, with_capacity, etc.)
[22:06:27] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:06:33] <ecr> or a vector literal
[22:06:37] <adridu59> k
[22:06:48] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:09:25] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[22:12:03] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:12:36] *** Quits: KindOne (KindOne@moz-98684351.dynamic.ip.windstream.net) (Ping timeout)
[22:12:52] <olsonjeffery> does emacs have a good, built-in way to trouble unbalance parens?
[22:13:03] <olsonjeffery> troubleshoot, even
[22:13:09] <olsonjeffery> find trouble, and then shoot at it.
[22:13:52] <ruediger> olsonjeffery: M-x check-parens RET
[22:14:18] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[22:15:12] <ruediger> olsonjeffery: paredit (external package) for lisp is awesome.  But I've heard that smartparens is very similar but works great outside of lisp.
[22:15:14] *** Quits: MrByte (MrByte@moz-147070D0.chy-wy.client.bresnan.net) (Ping timeout)
[22:15:59] <olsonjeffery> my issue is actually w/ brackets in rust, hm.
[22:16:01] *** Joins: ww (Mibbit@moz-7385AD13.dia.static.qwest.net)
[22:16:38] *** Joins: KindOne (KindOne@moz-2951E403.dynamic.ip.windstream.net)
[22:16:53] <ruediger> olsonjeffery: check-parens should work with brackets
[22:17:31] <olsonjeffery> thanks. found it.
[22:17:35] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[22:18:25] <ww> Which module is the preferred approach for doing TCP listen, tcp::listen() or std::rt::io::net::tcp::TcpListener?
[22:18:54] <olsonjeffery> ecr: ^
[22:18:58] *** Quits: jclements_ (jclements@moz-E4774872.dsl.snlo01.pacbell.net) (Quit: jclements_)
[22:19:24] <flaper87> ww: std::rt:io::net::tcp, I guess
[22:19:37] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[22:19:57] <ecr> ww: it's up to you since the runtime is still in development. feel free to try std::rt::io::net::tcp::TcpListener, but beware that there may be bugs. feedback is welcome
[22:21:01] <ww> i see.  is std::rt::io::net::tcp the future approach?
[22:21:18] <ecr> ww: yes, eventually std::rt::io will replace std::io
[22:22:04] <ww> ok, thanks
[22:22:19] <ecr> sure thing.
[22:22:35] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[22:22:43] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:22:52] <olsonjeffery> um.. hm.
[22:22:58] <ecr> hm?
[22:22:58] <olsonjeffery> what happened to str::from_bytes() ?
[22:22:59] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[22:23:04] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:23:17] <sfackler> changed to from_utf8 iirc
[22:23:23] <olsonjeffery> ty
[22:24:21] <olsonjeffery> oh boy.. it's building.
[22:24:32] <flaper87> lol
[22:24:42] <flaper87> olsonjeffery: what are you working on?
[22:24:46] <olsonjeffery> file io
[22:24:57] <olsonjeffery> was waiting on a libuv rebase to unbreak some tests
[22:25:09] <flaper87> awesome! :D
[22:25:17] *** Joins: jasdevsingh (jasdevsing@E6EE25FD.C98EC99C.DD85B588.IP)
[22:26:12] *** Parts: jasdevsingh (jasdevsing@E6EE25FD.C98EC99C.DD85B588.IP) ()
[22:28:37] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[22:29:37] <engla> great
[22:29:57] <engla> olsonjeffery: are you working on encodings?
[22:31:51] *** jorendorff_away is now known as jorendorff
[22:32:50] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[22:32:51] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[22:34:00] *** Joins: a_m0d|home (a_m0d@moz-45FCA874.acanac.net)
[22:34:05] *** Joins: squiddy (squiddy@moz-2D3E7455.adsl.alicedsl.de)
[22:34:46] *** Quits: Jessin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[22:34:52] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Input/output error)
[22:35:34] <brson> ChrisMorgan: how do you feel about this half-assed DNS implementation https://github.com/chris-morgan/rust-http/pull/12
[22:35:36] <ecr> these nondeterministic failures are going to drive me mad
[22:35:44] *** Joins: mindcat_ (root@3F395A48.DE7505BB.291A146C.IP)
[22:36:13] *** Joins: jclements_ (jclements@moz-E4774872.dsl.snlo01.pacbell.net)
[22:37:10] <flaper87> brson: there's also this https://github.com/chris-morgan/rust-http/issues/10 (refering to the same issue, in case you want to mention it)
[22:37:34] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[22:38:45] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:39:11] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:39:20] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[22:39:47] <flaper87> brson: newbie question. Why is it necessary to call addr.unwrap and port.unwrap ? 
[22:40:06] *** Quits: riley_ (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[22:40:07] *** Joins: gareth0 (gareth0@moz-B07AB9BC.dynamic.dsl.as9105.com)
[22:40:41] *** Quits: miloshadzic (miloshadzi@moz-A3C22160.dynamic.isp.telekom.rs) (Ping timeout)
[22:42:28] <brson> flaper87: the conversions involved there result in Options, so unwrap asserts that they succeeded (which won't necessarily be true, but will cause failure) and turns them into IP addresses and ports
[22:42:40] *** Quits: squiddy (squiddy@moz-2D3E7455.adsl.alicedsl.de) (Connection reset by peer)
[22:43:02] <flaper87> brson: ah cool, thanks! 
[22:43:13] * flaper87 just learnt something about rust and Options
[22:43:32] <ww> followup on the newbie question, what's the difference between Option.get() and Option.unwrap()?
[22:43:36] <olsonjeffery> engla: not really, but can you give a specific example of what you mean? like writing to a file in ascii vs ut8 vs utf16 ?
[22:43:55] <olsonjeffery> reading/writing
[22:44:09] <engla> olsonjeffery: yes
[22:44:37] <engla> I wonder if it can be a stackable struct like TextReader/TextWriter
[22:44:51] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[22:45:01] <olsonjeffery> engla: i imagine it'd happen at the point of ~[u8] <--> ~str translation
[22:45:10] <olsonjeffery> that's what i would prefer, anyways..
[22:45:47] <olsonjeffery> but, yeah.. that's probably aprop, too..
[22:45:56] <brson> ww: get() doesn't actually exist on master. At one point get and unwrap were identical though, by historical accident
[22:46:06] <olsonjeffery> something that wraps a Stream, Reader or Writer ..
[22:46:20] <brson> ww: the final idioms here aren't quite determined yet. 'get' may be the right name for 'unwrap'
[22:46:24] *** Quits: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net) (Quit: Leaving.)
[22:46:25] <kmc> btw instead of .unwrap() you can do .expect("useful error message if None")
[22:46:26] <engla> olsonjeffery: that would be the utf-8 case
[22:46:38] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[22:47:01] <tjc> ww: Also see http://static.rust-lang.org/doc/tutorial-conditions.html
[22:47:26] <engla> or can ~str be used as intermediate representation for writing in any text encoding?
[22:47:54] <brson> ChrisMorgan: I'm just going to merge that DNS PR and if you have anything you want to change we can mop up later
[22:48:12] <tikue_> ++ on get
[22:49:35] <dbaupp> ww: get used to take self by ref (i.e. &self) and clone the inside, unwrap takes self by val (i.e. self) and moves the inside
[22:49:41] <flaper87> brson: good call, I kinda need that :P
[22:50:16] <flaper87> brson: FYI, working on this https://github.com/chris-morgan/rust-http/issues/9
[22:50:32] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[22:50:42] <ww> thanks
[22:51:07] <olsonjeffery> engla: so in c# we basically have stuff like this: http://msdn.microsoft.com/en-us/library/system.text.asciiencoding.aspx
[22:51:14] <olsonjeffery> with different classes for each encoding standard
[22:51:35] <olsonjeffery> so its handled at the boundary of bytes<-->str conversion, as i mentioend above..
[22:51:50] <olsonjeffery> you could probably generalize that to a trait
[22:52:24] <olsonjeffery> and then have a TextStream, etc that takes a trait object acting as on the command/strategy-pattern as a param to its ctor
[22:52:39] <veddan> fg
[22:52:50] <ww> question: do std::rt::io::net::ip::Ipv4Addr and std::rt::io::net::ip::SocketAddr exist in 0.7?
[22:53:08] <olsonjeffery> so i guess the part of it that requires seriously thinkery is impl'ing the standards.. the rest would be pretty easy
[22:53:31] <olsonjeffery> brson: do we have anything like what i've outlined in std or elsewher?
[22:53:37] <engla> olsonjeffery: so the TextStream will have to expose a string API .write_str() .read_str() etc. 
[22:54:00] <engla> there is a package rust-encodings already
[22:54:11] <olsonjeffery> engla: in my mind it's be more like TextStream::new(some_stream_impl, encoding_strategy)
[22:54:49] <olsonjeffery> trait EncodingStrategy { fn get_bytes(in: ~str) -> ~u8; fn get_str(in: &[u8]) -> ~str; }
[22:54:53] <olsonjeffery> or somesuch
[22:55:03] <olsonjeffery> some_stream_impl: &Stream
[22:55:18] <olsonjeffery> or &Reader or &Writer or TextReader/Writer, respectively
[22:55:42] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:55:51] <olsonjeffery> so that instance of TextWhatever carries around that logic.. or the TextWhatever takes a strategy for every call to write/read_str() or it takes a stream too and is entirely stateless
[22:55:56] <olsonjeffery> six of one, half dozen of the other
[22:56:56] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[22:57:00] <engla> hehe
[22:57:36] <olsonjeffery> thats just a quick look at it. id be curious what other stdlibs are doing. that being said.. .net is a pretty progressive place to look for this sort of thing
[22:57:54] <olsonjeffery> id want to hear brson's thoughts about pulling encoding impls into std (which im fine with, personally)
[22:58:04] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[22:59:20] *** Joins: clements (clements@moz-E4774872.dsl.snlo01.pacbell.net)
[22:59:39] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:00:06] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[23:01:39] <clements> oh for heaven's sake
[23:01:56] *** Quits: clements (clements@moz-E4774872.dsl.snlo01.pacbell.net) (Quit: leaving)
[23:02:11] *** Quits: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net) (Quit: Leaving.)
[23:02:23] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:02:43] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:02:46] *** Joins: clements (clements@moz-E4774872.dsl.snlo01.pacbell.net)
[23:03:56] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[23:04:03] <veddan> fg
[23:04:07] <veddan> oops
[23:04:21] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Quit: Gone)
[23:06:45] *** Quits: aeqwa (aeqwa@moz-C1B65A90.dsl.tropolys.de) (Quit: Lost terminal)
[23:06:59] <brson> ww: no, rt::io was not available at all in 0.7
[23:09:20] <clements> the debug-info tests ... were added somewhat recently?
[23:09:45] <brson> olsonjeffery: yeah, that sounds plausible and similar to what I had in mind. One thing that needs to be considered is the relationship of Readers and Writers to iterators and whether string encoding should work on I/O types or iterators. There's an obvious symmetry between readers/writers and iterators, and ecr has had some ideas about convergence here, but it's murky to me still
[23:09:50] <brson> clements: yes
[23:09:56] <brson> in the last few months
[23:10:31] <clements> brson: looks like one of my changes is perturbing the location of certain registers a bit; one of the tests is looking for $3=999, but I can see in stdout that there's a line $1=999. 
[23:10:31] <brson> olsonjeffery: figuring out I/O text encoding is very high priority
[23:10:44] <clements> brson: I can't seem to find the place where these tests are defined....
[23:10:48] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:11:21] <brson> clements: they're in src/tests/debug-info and they contain a gdb 'script' in their comments
[23:11:52] <clements> brson: I did see the script, but it looks like the script is just the gdb commands, and there's a separate spec somewher that's actually searching the output of the script for certain strings.
[23:12:53] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:14:49] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[23:16:06] *** jack is now known as jack|dinner
[23:16:10] <clements> brson: never mind, I'm a dumbo, found them. thanks!
[23:16:52] <ww> thanks brson.  i'm downloading master to rebuild it to get the latest net api
[23:17:34] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[23:17:34] *** Joins: tjc (tjc@moz-33A2B6AA.googlewifi.com)
[23:17:34] *** ChanServ sets mode: +o tjc
[23:18:06] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:19:06] <ecr> olsonjeffery, brson, engla: if we're talking text encodings, then having a trait Encoding { fn encode(Iterator<char>) -> Iterator<u8>; fn decode(Iterator<u8> -> Iterator<char>); } makes the most sens to me.
[23:19:21] <ecr> but then I haven't given it a great deal of thought either
[23:20:10] <ecr> also, I messed up the syntax there, but I think my meaning is clear
[23:20:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:21:14] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[23:21:56] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[23:22:44] <engla> ecr: yeah but for str to u8 going via char is inconvenient
[23:22:55] *** Quits: tjc (tjc@moz-33A2B6AA.googlewifi.com) (Ping timeout)
[23:23:13] <engla> ecr: I've been writing correct UTF8 decoders but they are not any way fast
[23:24:53] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[23:25:31] <ecr> engla: it's easy enough to make a wrapper for str -> u8 that calls the char iter on str
[23:25:54] <ecr> speed wise, I'm not really sure what to do :(
[23:26:26] <ecr> hard to make a general statement there
[23:27:00] <engla> decoding u8 to str needs to just scan forward until it finds the end (then copy) or finds an invalid offset (copy progress, insert replacement char, continue scan)
[23:27:55] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[23:27:55] *** ChanServ sets mode: +o tjc
[23:28:01] <ecr> that's why I went with Iterators. they fit that mold pretty well
[23:28:37] <engla> except computing the codepoint value is not needed
[23:28:42] *** Quits: tikue_ (tkuehn@DB1DCCAA.EB08480C.689607DE.IP) (Quit: tikue_)
[23:28:43] <engla> for this particular case
[23:28:55] <engla> but in some cases a char iterator is a great output
[23:29:04] *** Quits: jclements_ (jclements@moz-E4774872.dsl.snlo01.pacbell.net) (Quit: jclements_)
[23:29:17] <ecr> won't you have to do that eventually anyway?
[23:29:29] <ecr> if you're going be dealing with a str?
[23:29:39] <engla> not to store a str
[23:29:48] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Ping timeout)
[23:29:48] *** Joins: tikue_ (tkuehn@DB1DCCAA.EB08480C.689607DE.IP)
[23:30:19] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:30:53] <ecr> well i guess you can have variants that take and return str, implement them by default with iterators, and override them for speed if you want it
[23:31:32] <ww> question: is it possible to turn a mut [u8] array into immutable readonly [u8] array so that arc can use it?  or is there an "byte-accumulator" object that i can shovel the mut [u8] into it and it can produce a immutable [u8] at the end?
[23:31:33] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:33:16] <ecr> ww: this is a &mut [u8] or a ~[u8] ?
[23:33:40] <ecr> and do you want a &[u8] or a ~[u8] that's immutable?
[23:33:42] *** Quits: gareth0 (gareth0@moz-B07AB9BC.dynamic.dsl.as9105.com) (Input/output error)
[23:33:59] <ecr> *s/this is/is this
[23:34:00] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[23:34:22] <ww> well, whatever arc would accept.  i guess that would be ~[u8]?
[23:34:42] <tikue_> ww: usually you can just do let foo = mut_foo;
[23:34:52] <tikue_> or actually
[23:35:01] <olsonjeffery> ecr brson: what do we get with Iterator<u8> vs [u8] ? the ability to operate on endless stream?
[23:35:06] <tikue_> it should be coerced by Arc::new() anyway ww
[23:35:09] <olsonjeffery> like, assuming TcpStream impls Iterator..
[23:35:10] <ww> basically i want to use TcpStream.read(&mut [u8]) to read bytes and put the into a shared readonly buffer with arc so that multple tasks can read it
[23:35:44] <tikue_> ww: you can't maintain a mutable version once it's in the arc. as long as that's ok, it should just work normally
[23:35:47] <ecr> ww: if you have a ~[u8] that's mutable, you can make it immutable by doing what tikue_ said. If you have &mut [u8], then you can call .to_owned to create a ~[u8] by copying the contents of the vector
[23:36:10] <ww> i see.  thanks all.  that's really helpful.
[23:36:20] <ecr> ww: for that case specifically i'd:
[23:36:31] <ecr> 1) create a new ~[u8] and give it a mutable binding
[23:36:36] <ecr> 2) pass it to read
[23:36:47] <ecr> 3) freeze it by rebinding it immutably
[23:36:52] <ecr> 4) give it to the ARC
[23:37:28] <ecr> olsonjeffery: more or less
[23:37:36] <ww> great.  thanks!
[23:37:49] <olsonjeffery> so all ~/&[T]'s impl Iterator<T> ?
[23:38:24] <ecr> olsonjeffery: I believe so. might want to check vec.rs to be sure
[23:38:25] <olsonjeffery> and does ~/&str impl Iteratorchar> ?
[23:38:30] * olsonjeffery nods
[23:38:45] <engla> olsonjeffery: the impl of Iterator is on a separate type you get a value of if you call ..iter()
[23:38:53] <ecr> olsonjeffery: str implements several iterator variants: bytes, chars, substrings, etc.
[23:38:58] <engla> and the iterator of &[T]  has element type &T
[23:39:07] <brson> clements: thanks for perservering on that pr. you're the best
[23:39:38] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[23:40:04] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:40:49] <olsonjeffery> brson: should we shoot to merge https://github.com/lifthrasiir/rust-encoding into std ?
[23:41:08] <olsonjeffery> last commit is 20 days ago.. not bad
[23:41:48] <olsonjeffery> curious if lifthrasiir is on irc.. ?
[23:42:11] <benh> ... i remember knowing lifrthrasiir's irc nickname at some point :(
[23:42:52] <engla> Is it possible to put just the traits and the important encodings in std, and the rest somewhere else?
[23:43:25] <olsonjeffery> well we don't have the "blessed crate" infrastructure yet
[23:43:27] <brson> olsonjeffery engla: yeah, I don't want the esoteric stuff, but maybe we can pull some of it in
[23:43:37] <olsonjeffery> we could arguably bust a lot of std out in separate crates
[23:43:42] <benh> (I suspect Yurumechan is lifthrasiir)
[23:43:55] <ecr> engla: I assumed that's what we would do (or even just put the traits in std and the impls in extra)
[23:43:55] <olsonjeffery> batteries half-sorta-included, if you will
[23:44:11] <olsonjeffery> the batteries are in a state of quantum indeterminance
[23:44:26] <kmc> you can't have &str implement Iterator<char> because the iterator's next() method involves mutating the iterator
[23:44:53] <engla> any comparison with python just reminds you of how 50% of their stdlib is junk
[23:44:53] <ecr> kmc: mutating the iterator, not the &str.
[23:45:16] <olsonjeffery> ecr: i feel like, lacking an active rustpkg ecosystem and blessed crates that putting stub traits in std w/ no backing impls is kind of a jerk move
[23:45:18] <ecr> the iterator is just a wrapper around the &str that has some info to know what's next
[23:45:31] <olsonjeffery> especially since our "critical path" impls are at the whim of maintainers who can come or go whenever
[23:45:40] <benh> kmc: so you'd implement it on &mut str?
[23:45:49] <engla> kmc: You can impl Iterator<char> on &str, you'll just get a &mut &str  in the .next() method and you can update the value
[23:45:57] <olsonjeffery> i mean: if we say "ok, rust-encodings is it" and we can convince the maintainer to impl these traits.. how can we ensure that unless we take on ownership/burden ourselves?
[23:46:03] <ecr> olsonjeffery: I guess. Honestly I haven't had to deal with package stuff at all. I haven't even touched code outside of rt
[23:46:05] <olsonjeffery> anyways. blessed crates.
[23:46:10] <engla> benh: &mut str doesn't exist. the representation doesn't allow it in any sane way
[23:46:16] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[23:46:27] <olsonjeffery> ecr: libuv will be the first to go when we its possible, im sure.
[23:46:42] <benh> phew
[23:47:06] <benh> &shallowlymut str :(
[23:47:12] <engla> ecr: the CharIterator in the current form is just a wrapper around &str and nothing more. The slice is a pointer and a length and that is enough :-)
[23:47:41] <ecr> engla: that's what I expected. vec does something similar if I remember correctly
[23:47:56] <engla> ecr: it uses raw pointers instead, it performs better
[23:47:58] *** Quits: tikue_ (tkuehn@DB1DCCAA.EB08480C.689607DE.IP) (Quit: tikue_)
[23:48:10] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:48:24] <ecr> my main point was just that the existence of the wrapper allows you to use &mut self even if you're iterating over an immutable thing since you're only mutating the wrapper
[23:48:31] <brson> olsonjeffery: but, yes if his encoding stuff is reasonably complete then we should try to integrate it instead of rolling something new
[23:48:54] <engla> ecr: yes. like a mutable loop index
[23:49:32] <flaper87> is there a better way to do this? http://pastebin.mozilla.org/2988498
[23:49:36] <kmc> ecr: right
[23:49:39] <ecr> engla: yep. when i first saw the external iterators i was concerned we'd have to make all the collections mutable all the time, but then i figured out what was really going on
[23:49:46] <flaper87> I'm definitely doing something wron. In start, I'd like to move actor
[23:49:56] <flaper87> and not ActorRef instance
[23:50:02] <kmc> but yeah it would be wrong if iterating over a string involved mutating the string itself
[23:50:34] <ecr> kmc: right, but that's a different iterator. consider vec.iter vs vec.mut_iter
[23:50:36] *** Joins: tjc (tjc@moz-33A2B6AA.googlewifi.com)
[23:50:36] *** ChanServ sets mode: +o tjc
[23:50:49] <flaper87> sorry, here's the struct as well http://pastebin.mozilla.org/2988511
[23:51:02] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:51:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e0f1b2c to 1428d042e: 02http://git.io/N3iJvQ
[23:51:02] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:51:02] <engla> kmc: consider vec.move_iter()
[23:51:04] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:51:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gnqpdg
[23:51:04] <ghrust> 13rust/06auto 14ba3ce32 15Alex Crichton: Be sure to reconfigure LLVM even when relocated
[23:51:04] <ghrust> 13rust/06auto 14f883159 15bors: auto merge of #9019 : alexcrichton/rust/reconfigure-llvm, r=brson...
[23:51:05] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:51:25] <engla> kmc: that's where the vector turns into an iterator itself, every .next() picks an element off
[23:51:41] <kmc> mm
[23:51:46] <mm> hi!
[23:51:52] <kmc> haha ;P
[23:52:05] *** Quits: [squiddy] (squiddy@moz-2D3E7455.adsl.alicedsl.de) (Ping timeout)
[23:52:13] *** mm is now known as mcpherrin
[23:52:23] <mcpherrin> I think that'll reduce spam in this channel :P
[23:52:30] <ecr> flaper87: so you want to move Actor when you do what?
[23:52:38] <ecr> oh wait, just saw your second line
[23:52:45] <flaper87> ecr: :D
[23:52:48] <flaper87> ecr: spawn
[23:53:51] *** Joins: calvin (calvin@moz-468348D6.hsd1.ma.comcast.net)
[23:54:01] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[23:54:27] <calvin> hey, I'm that guy that wrote some blog posts about rust recently
[23:54:47] <olsonjeffery> brson: i will check out rust-encodings and establish a line of communication
[23:54:57] <ecr> flaper87: I take it you're getting some type errors about start moving ActorRef or something?
[23:55:22] *** Quits: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com) (Ping timeout)
[23:55:38] <flaper87> ecr: my current error is: error: cannot move out of dereference of & pointer
[23:55:57] <flaper87> ecr: if I get self by value, then it moves the ActorRef instead of just moving actor
[23:56:28] <brson> olsonjeffery: cool :)
[23:56:53] <ecr> flaper87: that's what I expected. since ActorRef has to contain an ~Actor, when you move the Actor into spawn(), the ActorRef can't exist anymore (what would be inside it?) so it needs to be moved (i.e. consumed) and thus can't be &self
[23:57:12] <ecr> flaper87: let me stare at that code for a couple minutes and see if I have any ideas
[23:57:24] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[23:57:57] <flaper87> ecr: oohhh, that makes total sense. didn't think about that
[23:58:23] <flaper87> ecr: thanks :)
[23:59:08] *** Joins: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com)
[23:59:41] *** jorendorff is now known as jorendorff_away
[23:59:42] *** Joins: fyolnish_ (fyolnish@moz-EE642520.uqwimax.jp)
