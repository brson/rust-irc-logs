[00:00:02] <kimundi> I also don't understand how the *c_void return value ends up as the T
[00:00:07] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[00:00:31] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[00:01:09] <kimundi> I see a transmute there... So as is the dynamic_lib just happily casts to whatever you want?
[00:01:17] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[00:01:37] <cmr> kimundi: yes, this is why it's marked unsafe.
[00:02:46] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[00:03:10] *** Joins: tedh_ (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[00:03:10] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Connection reset by peer)
[00:09:21] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[00:11:05] *** Quits: KindOne (KindOne@F45B92.E1AE408F.34F73994.IP) (Ping timeout)
[00:11:36] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:15:02] *** Joins: KindOne (KindOne@moz-313EA646.dynamic.ip.windstream.net)
[00:15:05] <kimundi> Hm, I'm having trouble creating an owned traitobject that fulfills both Send and Freeze
[00:15:21] <Eridius> kimundi: make a trait that inherits from both Send and Freeze
[00:15:33] <Eridius> trait Foo : Send+Freeze {} let x: ~Foo = ...
[00:15:33] <kimundi> Didi that, does not work
[00:15:36] <Eridius> huh
[00:15:42] <dandy> anybody here get curl ./configured on mingw?
[00:16:09] <Eridius> dandy: the current instructions for building rust on windows don't work. mingw updated gcc or something, and now downgrading it to <4.6 breaks things
[00:16:20] <dandy> that is now gone, FYI
[00:16:23] <dandy> which is why I am trying again
[00:16:29] <dandy> somebody updated it recently
[00:16:35] <Eridius> oh?
[00:16:35] <tikue> does libstd/libextra have any object serialization functions?
[00:16:42] <kimundi> rusti: struct F; trait Foo: Freeze+Send{} impl Foo for F {}  ::extra::arc::RWArc::new(~F as ~Foo)
[00:16:42] -rusti- <anon>:7:63: 7:87 error: instantiating a type parameter with an incompatible type `~main::Foo:Send`, which does not fulfill `Freeze`
[00:16:42] -rusti- <anon>:7          struct F; trait Foo: Freeze+Send{} impl Foo for F {}  ::extra::arc::RWArc::new(~F as ~Foo)
[00:16:42] -rusti-                                                                         ^~~~~~~~~~~~~~~~~~~~~~~~
[00:16:43] -rusti- error: aborting due to previous error
[00:16:43] <Luqman> dandy: wget works too and i believe is easier to get with mingw
[00:16:44] -rusti- application terminated with error code 101
[00:16:56] <cmr> tikue: derive Encodable/Decodable and use extra::serialize
[00:17:00] <strcat> Eridius: kind inheritance doesn't work yet iirc
[00:17:01] <cmr> tikue: just does ebml and json though
[00:17:02] <tikue> cmr: thanks :)
[00:17:03] <dandy> but does rust need curl to build?
[00:17:08] <kimundi> strcat: dang
[00:17:12] <Luqman> dandy: nope, just one of curl or wget
[00:17:15] <Eridius> strcat: d'oh
[00:17:18] <dandy> well then...
[00:17:37] <tikue> cmr: eh, I don't care what type of serialization it is. just want to play around with sockets and stuff
[00:17:39] <dandy> so why do I need curl or wget at all?
[00:17:53] <cmr> dandy: to fetch the compiler snapshot
[00:18:04] <dandy> k
[00:19:58] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[00:20:23] <tiffany> did that pull request adding the ability to check if files exist go through yet?
[00:20:29] <cmr> tiffany: no
[00:20:48] <olsonjeffery> im hoping to do a PR tonight
[00:20:50] <tiffany> ah
[00:20:53] <olsonjeffery> wiring up the last feature
[00:21:05] <olsonjeffery> ill let you know when its done
[00:23:18] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:26:08] *** Quits: ChrisMorgan (ChrisMorga@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[00:29:58] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[00:30:23] <dandy> anybody have experience with make -j8 on a quadcore HT machine?
[00:30:32] <cmr> dandy: yes
[00:30:37] <cmr> it will help with llvm
[00:30:42] <cmr> it won't help with the rust part of the build
[00:30:49] <cmr> Also, if you're on windows, don't use -janything
[00:30:54] <cmr> It will break in mysterious ways.
[00:30:56] <dandy> okay then
[00:35:22] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Quit: Leaving)
[00:37:22] <dcrewi> I've had parallel make fail on linux too
[00:37:38] <cmr> dcrewi: yeah, but it consistently explodes on windows
[00:37:46] <dcrewi> but using -j doesn't actually speed things up too much, so it doesn't really matter
[00:38:02] <dcrewi> except for llvm
[00:39:12] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[00:41:55] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[00:42:01] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[00:43:15] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[00:45:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:46:13] <dandy> howdy steve
[00:47:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:48:33] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[00:48:52] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:49:11] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[00:49:13] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[00:49:19] <dandy> Is https://github.com/mozilla/rust/blob/master/CONTRIBUTING.md , does the github wiki fall under #2?
[00:49:21] <dandy> In*
[00:49:26] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[00:49:36] <cmr> dandy: it does not
[00:49:44] <dandy> then tonight there will be some changes
[00:49:50] <cmr> wonderful!
[00:49:50] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Connection reset by peer)
[00:49:55] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[00:50:00] <dandy> now I am in an epic strugle with python
[00:50:09] <dandy> funny how ruby has more windows love than python...
[00:50:21] <steveklabnik> :)
[00:50:27] <steveklabnik> the ruby windows people are _amazing_
[00:50:33] <steveklabnik> and several of the core devs use windows
[00:50:38] <dandy> yeah, where were they 4 years ago?
[00:50:43] <steveklabnik> :)
[00:50:55] <dandy> also git had a sudden burst of love too
[00:51:12] <dandy> although tortoisegit is kind of crappy...
[00:52:13] <cmr> LLVM is getting windows love too
[00:52:18] <dandy> I saw that
[00:52:25] <dandy> Thats why I am starting to port my .NET stuff
[00:52:32] <dandy> If I can get JIT going I am 100% sold
[00:52:40] <cmr> Rust JIT?
[00:52:45] <dandy> yes
[00:52:48] <dandy> rusti
[00:52:48] <steveklabnik> :)
[00:52:50] <cmr> rustc -Z jit
[00:52:53] <cmr> rusti doesn't work too well
[00:52:56] <cmr> but the jit does
[00:53:06] <dandy> then fix it!
[00:53:09] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[00:53:11] <dandy> I need JIT
[00:53:12] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[00:53:15] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[00:53:16] <cmr> the jit works fine
[00:53:26] <dandy> no problem then
[00:53:34] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[00:53:38] <steveklabnik> so, what's the easiest way to turn a rust string into a [c_char] ?
[00:53:53] <cmr> rusti: let s = ~"asdf"; s.to_c_str()
[00:53:55] -rusti- std::c_str::CString{buf: (0x7ffa24823058 as *()), owns_buffer_: true}
[00:53:57] <dandy> any idea if this is possible?: at run time compile some rust into an @method that can be collected when not needed anymore?
[00:53:59] <steveklabnik> cmr: <3
[00:54:35] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[00:54:37] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[00:55:51] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[00:57:05] *** Joins: note360 (Mibbit@BC356FF7.BAED693D.ABAE70E7.IP)
[00:59:12] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Quit: Leaving)
[00:59:13] *** Quits: note360 (Mibbit@BC356FF7.BAED693D.ABAE70E7.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:00:59] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:02:11] *** Quits: tjc (tjc@moz-879D556A.utilitytelephone.net) (Quit: zzzzzzzzzz)
[01:06:29] <steveklabnik> okay, so I _almost_ have my example + library going
[01:07:04] <steveklabnik> now it's saying it can't find the function inside my module
[01:07:17] <steveklabnik> failed to resolve import
[01:07:47] <steveklabnik> i have them declared as 'pub fn foo()
[01:07:58] <steveklabnik> my caller has 'use mylib;'
[01:08:04] <steveklabnik> but import mylib::foo fails
[01:08:22] <steveklabnik> nm on my .so shows that foo is in there
[01:08:28] <steveklabnik> any ideas?
[01:09:30] <dcrewi> is mylib a separate crate?
[01:09:45] <steveklabnik> yes
[01:09:52] <steveklabnik> mylib builds just fine
[01:10:02] <dcrewi> if so, I think you'd need to use "extern mod mylib" to tell the compiler that
[01:10:05] <strcat> steveklabnik: 'use' is just to bring a name from another scope into the current scope
[01:10:23] <steveklabnik> sorry, yes, i have extern mod mylib
[01:10:30] <steveklabnik> before the use mylib::foo
[01:10:31] <strcat> steveklabnik: -L . ?
[01:10:46] <strcat> steveklabnik: need to put the current dir in the linker search path
[01:10:52] <steveklabnik> i'll try that
[01:10:57] <steveklabnik> i'm using rustpkg
[01:11:02] <steveklabnik> so it should have lib on the path already
[01:11:17] <strcat> if you're using dynamic linking (in general, rust's static linking doesn't work yet) you generally are linking against system libraries
[01:11:24] <strcat> steveklabnik: well, rustpkg isn't very mature
[01:11:35] <steveklabnik> truth, that's why i'm trying this out
[01:11:39] <steveklabnik> i want to write better docs
[01:12:12] <cmr> Did you see http://static.rust-lang.org/doc/tutorial.html#crates-and-the-module-system ?
[01:12:15] <cmr> kimundi recently rewrote it
[01:12:18] <cmr> It's pretty awesome.
[01:12:22] <steveklabnik> i have it open, yeah
[01:13:04] <steveklabnik> it finds it just fine, it even mentions lib/mylib-243f.so is fresh
[01:13:11] <steveklabnik> just 'there is no foo in mylib'
[01:13:28] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:13:32] <cmr> Is foo in the toplevel of the crate?
[01:13:37] <steveklabnik> yes
[01:13:39] <cmr> Hm
[01:13:40] <dandy> thats an awesome line, that should be in your tutorial
[01:14:49] <steveklabnik> :)
[01:16:46] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:18:05] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[01:24:02] <steveklabnik> this is so weird. because the error isn't that it can't find the shared library, just that the name doesn't exist :/
[01:24:50] <tiffany> apparently rust doesn't like it when I make generic impls for T
[01:24:51] <steveklabnik> is there a good way to see what names it exports?
[01:25:02] <tiffany> despite me putting constraints on T
[01:25:23] <tiffany> it also doesn't like me making impls for types with constraints which have no existing implementations
[01:25:32] <strcat> steveklabnik: in theory rustc --ls but it's either broken or unfinished
[01:25:41] <steveklabnik> :/
[01:25:42] <Luqman> strcat: is it pub?
[01:25:50] <Luqman> steveklabnik*
[01:25:54] <steveklabnik> Luqman: yup
[01:25:57] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[01:26:05] <strcat> tiffany: that works for me
[01:26:09] <steveklabnik> Luqman: pub fn stop_ruby() {
[01:26:14] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:26:17] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[01:26:21] <strcat> tiffany: to do a generic impl, the trait probably has to be in your crate
[01:26:27] <tiffany> it is
[01:26:52] * strcat has a done a lot of generic impls and hasn't run into any problem other than bogus method resolve conflicts
[01:26:59] <dandy> I think I have clicked "Continue" over 100 times now. The GNU dev tools keep telling me there is no disk in my I drive... so how about stay the fuck out of I???
[01:27:04] <tiffany> one is an impl<T:ChannelTransform> and one is an impl<T:PixelTransform>, I'm guessing rust doesn't like that it's possible to implement both traits for a type
[01:27:22] <Luqman> tiffany: ah, that problem :(
[01:28:38] <strcat> tiffany: which trait are you implementing?
[01:28:50] <tiffany> both are impls for ImageTransform
[01:29:00] <cmr> Of, or for?
[01:29:07] <tiffany> er, of
[01:29:10] <strcat> tiffany: ah yeah, that won't work
[01:30:35] <dandy> wow, ductape and popsicle sticks... had to disable my USB card reader for GCC to run
[01:30:41] <dandy> but it is running now
[01:30:42] <cmr> :\
[01:30:49] <cmr> I've never experienced that.
[01:31:04] <dandy> me either! who knows what surprise will be next
[01:31:23] <cmr> dbaupp: thanks for posting twir on reddit
[01:31:26] <Luqman> tiffany: https://github.com/mozilla/rust/issues/3429
[01:32:20] <Eridius> sigh, still can't build on windows even with the new instructions
[01:32:29] <dandy> I'm working on it
[01:32:39] <dandy> I'm in the middle of ./configure now!
[01:32:40] <Eridius> error: 'FILE_FLAG_FIRST_PIPE_INSTANCE' undeclared
[01:32:40] <dandy> SO CLOSE
[01:32:50] <dandy> oh damn you are further, I have more pain ahead :(
[01:34:16] <dandy> Eridius, you get past this? c:\mingw\include\mswsock.h:125:20: error: 'WSAPOLLFD' was not declared in this...
[01:34:17] <tiffany> uhh..
[01:34:22] <tiffany> can you not import crates into rusti?
[01:34:33] <cmr> tiffany: rusti-the-bot?
[01:34:33] <tiffany> it says I need to use extern mod, but then complains that I'm not allowed
[01:34:37] <tiffany> rusti-the-repl
[01:34:47] <Eridius> dandy: well I edited that file earlier when trying the older instructions. My edit may still be in place
[01:34:51] <klutzy> dandy: https://github.com/mozilla/rust/issues/8598#issuecomment-24484457
[01:34:55] <cmr> tiffany: you need to use :load
[01:34:59] <cmr> tiffany: see :help
[01:35:00] <klutzy> dandy: "1 2" at the last
[01:35:05] <tiffany> ah
[01:35:11] <dandy> damn, I was hoping that wasn't needed anymore
[01:35:28] <luisbg> is "for 100.times { " not usable any more?
[01:35:42] <Eridius> klutzy: that doesn't solve my problem
[01:35:59] <cmr> luisbg: no
[01:36:05] <luisbg> cmr, what is the new way?
[01:36:17] <klutzy> Eridius: oh, what was error?
[01:36:29] <cmr> luisbg: `do 10.times { ... }`
[01:36:41] <luisbg> cmr, oooooh... that reads much better :)
[01:36:54] <Eridius> klutzy: error: 'FILE_FLAG_FIRST_PIPE_INSTANCE' undeclared
[01:36:59] <luisbg> cmr, thanks
[01:38:02] <klutzy> Eridius: what's your package versions? (running mingw-get.exe will show them)
[01:38:23] <Eridius> for which packages?
[01:38:29] *** Parts: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) ()
[01:38:32] <Eridius> I wish tehre was a way to uinstall everything and start over :L/
[01:38:35] <Eridius> *:/
[01:38:37] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[01:38:44] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[01:39:01] <dandy> you can just deletw MinGW
[01:39:08] <luisbg> the #[test] feature of Rust is awesome!
[01:39:08] <dandy> this is my 3rd attempt
[01:39:13] <cmr> luisbg: indeed it is.
[01:39:19] <Eridius> hmm
[01:39:20] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[01:39:22] <luisbg> cmr, mad props to whoever thought of it and implemented it
[01:39:25] <klutzy> Eridius: gcc and w32api? I'm not sure
[01:39:42] <luisbg> cmr, specially the fact that you compile without --test and nm -C sees no test functions
[01:39:51] <steveklabnik> here's the whole of my code, if anyone is bored and wants to double check me :/ https://github.com/steveklabnik/ruby.rs
[01:40:03] <steveklabnik> luisbg: yup, it's super good, eh?
[01:40:04] <klutzy> I just guess there may be some package incompatibility
[01:40:12] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[01:40:13] <luisbg> steveklabnik, ruby.rs ? O_o
[01:40:14] <luisbg> hahahaa
[01:40:15] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[01:40:16] <steveklabnik> luisbg: ;)
[01:40:20] <steveklabnik> for fun
[01:40:23] <steveklabnik> playing with packages and ffi
[01:40:29] <luisbg> heh
[01:40:45] <cmr> steveklabnik: so uh
[01:40:48] <steveklabnik> if i get it working, you can spin up a Ruby inside of your Rust
[01:40:50] <cmr> steveklabnik: you have `pub mod ruby`
[01:40:57] <steveklabnik> yes, isn't that supposed to do that?
[01:40:59] <Eridius> steveklabnik: you're crazy
[01:41:02] <steveklabnik> Eridius: ;)
[01:41:03] <cmr> steveklabnik: In the other crate, don't you want to do `mylib::ruby::start_ruby()`?
[01:41:25] <steveklabnik> i'd been mentally doing s/mylib/ruby when talking about it before
[01:41:30] <cmr> Yes
[01:41:34] <steveklabnik> so there's no mylib
[01:41:35] <cmr> But you have ruby::ruby::start_ruby() here
[01:41:40] <cmr> ruby is the cratename
[01:41:43] <Eridius> steveklabnik: why ruby?
[01:41:44] <steveklabnik> ahhhhhhh
[01:41:48] <Eridius> if I want to embed anything it would be lua
[01:41:48] <cmr> And then the ruby module in the crate.
[01:41:53] <steveklabnik> Eridius: i have experience embedding it
[01:42:20] <steveklabnik> that's my misunderstanding then, cmr. due to the way it's explained, it sounds like it just makes one level
[01:42:20] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:42:23] <steveklabnik> not ruby::ruby
[01:42:34] <cmr> steveklabnik: You'd either do `pub use ruby::*` and keep the `ruby` module private, or move the contents of ruby.rs to lib.rs
[01:42:36] <cmr> steveklabnik: Well
[01:42:38] <steveklabnik> so if I want it at just one level, i should keep it all in lib.rs?
[01:43:01] <cmr> steveklabnik: `mod foo;` adds the contents of the file foo.rs into the module tree, with the name `foo`.
[01:43:07] <steveklabnik> ah
[01:43:11] <klutzy> Eridius: I'm using gcc 4.6.2-1 + w32api 3.17-2 (stable I think) and gcc 4.8.1-2 + w32api 4.0.0-1 (known to be problematic)
[01:43:21] <cmr> The module tutorial explains it quite well ;p
[01:43:34] <Eridius> klutzy: I couldn't get gcc 4.6 to work for some reason
[01:43:40] <steveklabnik> yeah, i was going from it :/
[01:43:44] <Eridius> so I'm trying the current instructions, although I know make-check-fast will fail
[01:43:55] <dandy> make
[01:43:56] *** Joins: a_m0d|home (a_m0d@5DEB32F2.72F9FA65.6D7C4B99.IP)
[01:43:58] <Eridius> all I really care about is whether I can replicate the windows build failure on #8203
[01:44:00] <dandy> ... oops
[01:44:19] <Eridius> -irc: make: command not found
[01:44:30] <klutzy> Eridius: maybe 4.5 is more stable. I remember I installed 4.6 initiall for test (rust recommended <4.6 for some historic problem)
[01:44:35] <mark_edward> does rUst have equicalents to the __FILE__ and __LINE__ macros?
[01:44:42] <Eridius> klutzy: I never got 4.5 to work either
[01:44:47] <cmr> mark_edward: file!(), line!()
[01:44:50] <steveklabnik> ah ha!
[01:44:54] <klutzy> Eridius: oh, it's unfortunate
[01:44:56] <steveklabnik> cmr: thanks, now i'm moving it forward
[01:44:58] <steveklabnik> note: /home/steveklabnik/src/ruby.rs/lib/libruby-d5a2ed53981a8493-0.1.0.so: undefined reference to `__gmpz_gcd'
[01:45:01] <steveklabnik> heh
[01:45:08] <mark_edward> cmr: sweet! do macros show up in rust_doc?
[01:45:27] <cmr> mark_edward: No, since they aren't part of the AST when rustdoc gets them.
[01:45:37] <cmr> It's on my laundry list of things to fix, but it's a bit nonobvious.
[01:45:41] <klutzy> Eridius: anyway, 4.8 is known to problematic for ffi (C function returning large strcuts), so check-fast will fail for some tests
[01:45:58] <klutzy> Eridius: othre than three tests, it works
[01:46:00] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:46:04] <mark_edward> cmr: I understand; good luck! rustdoc_ng is awesome thanks to you and Seldaek
[01:46:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:46:34] <Eridius> file! and line! aren't macros anyway, they're syntax extensions
[01:46:36] <cmr> mark_edward: thanks :)
[01:46:44] <tiffany> uhh..
[01:46:46] <Eridius> there's also apparently col!()
[01:47:03] <tiffany> rustc is complaining that my impl of a specific type conflicts with the generic impl with a constraint my specfic type doesn't have
[01:47:30] <aatch> tiffany, known issue
[01:47:39] <cmr> A wild aatch appears!
[01:47:41] <cmr> Long time no see
[01:47:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:47:52] <aatch> the coherence checker isn't smart enough to figure that out
[01:47:53] <mark_edward> Eridius: i can't imagine a use for col, wouldn't it be inaccurate in the usual case of error logging?
[01:48:11] <aatch> cmr, yeah, been really busy at work recently
[01:49:22] *** Quits: a_m0d|home (a_m0d@5DEB32F2.72F9FA65.6D7C4B99.IP) (Quit: Leaving.)
[01:49:30] <cmr> dbaupp: ping
[01:50:26] <Eridius> mark_edward: I imagine col!() might be useful if it ever learned how to walk up the stack, e.g. so you could embed it in a macro and report where the macro itself was called from
[01:50:30] <Eridius> but atm it doesn' do that
[01:50:32] <Eridius> *doesn't
[01:50:48] <cmr> It does have all the information available to print a macro expansion stack trace.
[01:50:53] <cmr> iirc
[01:50:59] <tiffany> I think I found a workaround
[01:51:02] <mark_edward> ooh that's pretty cool
[01:51:33] *** Joins: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP)
[01:51:35] <Eridius> rusti: col!()
[01:51:36] -rusti- 9u
[01:51:50] <Eridius> rusti: macro_rules! foo(() => (col!())) foo!()
[01:51:51] -rusti- 42u
[01:51:58] <Eridius> rusti: macro_rules! foo(() => (col!())) col!()
[01:51:59] -rusti- 42u
[01:52:07] <Eridius> huh so it is actually reporting where the macro was called. Interesting
[01:52:13] <Eridius> I guess that makes col!() somewhat useful
[01:52:44] <aatch> Eridius, all three report the final expansion location
[01:53:16] *** Quits: Ralith (ralith@moz-A7071297.customer.broadstripe.net) (Ping timeout)
[01:53:19] <Eridius> oh good
[01:53:44] <dandy> Eridius, are you using gcc/++ 4.6?
[01:54:14] <dandy> If so how did you get past the requests for libmpc-2?
[01:54:25] <Eridius> atm I'm trying gcc-4.8
[01:54:35] <Eridius> when I had the libmpc issue I just downgraded libmpc (and libmpfr)
[01:54:41] <aatch> syntax extensions are passed a span for the actual invocation, which is also passed down macro expansions etc., that's what line, file and col all use
[01:54:59] <cmr> I'm writing about that exact phenomenon right now.
[01:55:13] <cmr> (I'm actually finishing http://cmr.github.io/blog/2013/06/30/structure-and-organisation-of-rustc/)
[01:55:40] <cmr> Only 3 months delayed :p
[01:55:51] *** Joins: tjc (tjc@moz-D3C492BF.static.snlo.ca.charter.com)
[01:55:51] *** ChanServ sets mode: +o tjc
[01:55:56] <dandy> 4.8 definitely works better but ... wsock
[01:56:22] <aatch> cmr, heh. Well i dont think im your target audience for that :P
[01:56:38] *** Joins: Ralith (ralith@moz-A7071297.customer.broadstripe.net)
[01:56:39] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[01:57:16] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:57:23] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[01:58:48] <tiffany> I just caused rusti to segfault
[01:58:56] <cmr> that's unsurprising.
[01:59:06] <cmr> I'm surprised you got it to run in the first place.
[01:59:40] <aatch> rusti: let a = @2;
[01:59:41] -rusti- <anon>:7:13: 7:14 warning: unused variable: `a` [-W unused-variable (default)]
[01:59:41] -rusti- <anon>:7          let a = @2;
[01:59:41] -rusti-                       ^
[01:59:42] -rusti- ()
[01:59:53] <aatch> ^^ causes rusti to segfault. at least my version
[02:00:10] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[02:00:26] <klutzy> you mean rusti executable?
[02:00:38] <aatch> klutzy, yep
[02:00:52] <klutzy> aatch: it segfaults for 1
[02:01:05] <aatch> klutzy, so it does.
[02:01:11] <luisbg> has the format of "for int::range(1, 10) |n| { ... }" changed?
[02:01:23] <cmr> luisbg: int::range doesn't exist, and that's the old for-loop syntax.
[02:01:32] <cmr> Now it's `for n in range(1, 10) { ... }`
[02:01:34] <fread2281> luisbg: for i in range(1,10) { ... }
[02:01:41] <luisbg> much nicer :)
[02:01:44] <klutzy> aatch: I reported here https://github.com/mozilla/rust/issues/8924#issuecomment-23685773 but I think we need more proper issue
[02:01:53] <luisbg> reading old code, nice to see the evolution of Rust while doing so
[02:02:33] <luisbg> the new for reads a lot more like Python
[02:02:42] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:02:54] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[02:03:23] <cmr> Precisely :)
[02:03:24] <dcrewi> though rust's range is more like python's xrange
[02:03:37] <cmr> Only if you're using python2!
[02:04:02] <luisbg> dcrewi, and xrange is notably better
[02:04:04] <luisbg> cool!
[02:04:08] <dcrewi> I find rust more compelling than learning how to write python3
[02:04:13] <cmr> heh
[02:04:17] <luisbg> dcrewi, :)
[02:04:30] <luisbg> cmr, man, you are always here replying to questions whenever I pop around
[02:04:34] <luisbg> do you sleep?
[02:04:44] <cmr> luisbg: Not as much as I would like to, admittedly :P
[02:04:50] <luisbg> :S
[02:04:57] <cmr> I'm in EST, it's almost my sleeptime.
[02:05:03] <klutzy> rusti: use no::such::thing; 1
[02:05:05] <Eridius> cmr: you seem to always be here. Don't you have a job? ;)
[02:05:11] -rusti- pastebinned 8 lines of output: http://ix.io/85r
[02:05:26] <steveklabnik> how do you ffi something with var args?
[02:05:31] <Eridius> you don't
[02:05:33] <steveklabnik> :(
[02:05:44] <steveklabnik> bummertown
[02:06:00] <cmr> steveklabnik: you unfortunately don't, though you can hack it if it takes a va_list
[02:06:13] <steveklabnik> nope, just a ...
[02:06:18] <cmr> Yeah, then you're out of luck.
[02:06:22] <steveklabnik> that majorly cramps my style
[02:06:27] <Eridius> any varargs API should always be a wrapper around a va_list API
[02:06:30] <steveklabnik> oh well. i think i can still pull this off....
[02:06:34] <Eridius> failiure to do so is just bad API design
[02:06:47] <steveklabnik> ruby is not exactly known for being well designed ;)
[02:06:53] <cmr> heh
[02:07:03] <cmr> Send a patch? :)
[02:07:30] <steveklabnik> i might once i figure out exactly what's up
[02:07:31] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[02:07:33] <aatch> luisbg, oh, I meant to reply on the mailing list. I made a stab at a date-time library a while back. I don't really have time for big projects, apparently, but I'm happy to help out with stuff.
[02:08:15] <luisbg> aatch, did you manage to get some code we could use? or should I start from scratch
[02:08:19] <luisbg> aatch, thanks for the help offer :)
[02:08:26] <aatch> luisbg, there's a little, but it's old.
[02:08:43] <luisbg> aatch, I understand
[02:08:44] <cmr> aatch: You're working with hiphop at work yeah?
[02:08:47] <Eridius> I really should get around to finishing my path rewrite. Too bad I've started playing FFXIV :/
[02:08:58] <luisbg> cmr, hiphop at work?
[02:09:10] <aatch> cmr, not any more, I finished my stuff. I've just been too lazy to submit a PR
[02:09:22] <cmr> aatch: I was more wondering how deploying it turned out.
[02:09:35] <aatch> luisbg, PHP virtual machine, made by facebook
[02:09:38] <cmr> luisbg: off-topic, https://github.com/facebook/hiphop-php
[02:09:44] <aatch> cmr, a few rough edges, but pretty well.
[02:09:45] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[02:09:48] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[02:09:49] <cmr> cool
[02:09:53] <luisbg> aatch, nice! :)
[02:10:01] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[02:10:25] <aatch> luisbg, yeah, I implemented the postgres extension for it, since that's what we use here.
[02:10:45] <luisbg> aatch, kudos
[02:10:51] <aatch> I just haven't bothered to do the last bit of work to make it PR-worthy yet.
[02:10:59] <aatch> (tests, cleanup, documentation)
[02:11:09] <cmr> aatch: You saw https://github.com/sfackler/rust-postgres right? ;)
[02:11:20] <aatch> cmr, I did.
[02:11:55] <aatch> cmr, though he started implementing the protocol directly and it went a little over my head.
[02:12:37] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:12:58] <mark_edward> cmr: that's awesome! what do you do for input sanitization, or is the user responsible for that?
[02:13:20] <cmr> mark_edward: I haven't used it yet!
[02:13:34] <mark_edward> cmr: who's repo is it?
[02:13:40] <cmr> It uses parameterized queries though
[02:13:40] <sfackler> mine!
[02:13:43] <cmr> So it shouldn't need any.
[02:13:44] <mark_edward> i thought it was yours
[02:13:52] *** Joins: skoizza (Mibbit@moz-109D1E95.washdc.fios.verizon.net)
[02:14:38] <aatch> mark_edward, postgres has parameterized queries, though it only works on expressions.
[02:14:39] <mark_edward> sfackler: that's a really cool project!
[02:14:55] <sfackler> mark_edward: it doesn't have any equivalient of mysql_real_escape_string, etc
[02:14:55] <mark_edward> aatch: what is an expression in this context?
[02:15:13] *** Quits: skoizza (Mibbit@moz-109D1E95.washdc.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:15:19] <aatch> mark_edward, basically anything that can produce a value, including a value itself.
[02:15:44] <aatch> What I mean is that you can't use parameterized queries to substitute in table names or columns
[02:15:45] <dandy> should I still be getting wsock errors with gcc/++ < 4.6?
[02:15:54] <mark_edward> are we talking about Rust expressions or Postgres? cuz i know what rust expressions are (somewhat)
[02:16:11] <aatch> mark_edward, I'm talking about Postgres, but same thing in this case.
[02:16:26] <aatch> In terms of them being syntactic entities.
[02:16:50] <mark_edward> ah i see
[02:16:51] <aatch> You can do something like "SELECT * FROM foo WHERE a=$1" in postgres.
[02:17:04] <aatch> and the '$1' is parsed as an expression.
[02:17:21] <aatch> but you can't do "SELECT * FROM $1"
[02:17:31] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[02:17:53] <aatch> The same limitations apply in variable substitution in pgSQL
[02:18:00] <aatch> pl/pgSQL*
[02:18:28] <aatch> (which is a procedural variant of SQL for writing, well, procedures)
[02:18:41] <mark_edward> ah i see.
[02:18:54] <mark_edward> how did you get to know so many things. im jelly
[02:19:02] <cmr> dandy: shouldn't be, no.
[02:19:11] <cmr> mark_edward: if he's anything like me, lots of time and very little sleep.
[02:19:26] <Eridius> sleep is overrated
[02:19:29] <aatch> cmr, I'm trying to be better with the second one.
[02:19:29] <cmr> sure is
[02:19:43] <aatch> my gf gets mad at me if I stay up too late.
[02:19:55] <mark_edward> every hour of sleep you miss is 1 yr off your life i heard
[02:20:05] <tiffany> bjz's noise library has errors in it
[02:20:12] <mark_edward> that can't be right... i'd have died in high school...
[02:20:14] <cmr> mark_edward: if that's true, I'd be dead already.
[02:20:37] <mark_edward> yeah, well sleep is good for is the essence o fmy statement
[02:20:48] <cmr> tiffany: last changed a month ago, probably needs an update
[02:21:00] <aatch> mark_edward, anyway, I have a pretty good memory and learn pretty fast.
[02:21:12] <aatch> So I tend to just remember most everything I read.
[02:21:19] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[02:21:28] <steveklabnik> can i turn a CStr into a rust string easily? glanced at c_str.rs, not seeing it
[02:21:31] <aatch> The postgres stuff it mostly just from trying to find something specific.
[02:21:32] <mark_edward> very helpful talent! 
[02:22:09] <mark_edward> steveklabnik: std::str::raw::from_c_str
[02:22:09] <cmr> steveklabnik: std::str::from_utf8 on the `as_bytes()` of the CStr
[02:22:38] <cmr> mark_edward: that's unsafe, creates an invalid string on non-utf8 buffers.
[02:22:47] <steveklabnik> neat
[02:22:51] <mark_edward> cmr: ah i was just going to ask you
[02:22:52] <cmr> Oh nevermind.
[02:22:53] <steveklabnik> i really need an &str though
[02:22:54] <steveklabnik> for println
[02:23:02] <cmr> steveklabnik: println will take a ~str
[02:23:02] <steveklabnik> and that gives a &[u8]
[02:23:06] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:23:17] <cmr> steveklabnik: you need to call from_utf8 on the &[u8]
[02:23:23] <Eridius> perhaps CStr should have an .as_str that returns Option<&str>
[02:23:36] <cmr> Eridius: I agree, that'd be useful.
[02:23:40] <steveklabnik> cmr: ahhhh
[02:25:49] *** Quits: kseo (kseo@338DE5BC.4166765B.485A6DF.IP) (Ping timeout)
[02:25:53] *** Quits: Ralith (ralith@moz-A7071297.customer.broadstripe.net) (Ping timeout)
[02:26:03] <steveklabnik> okay! just gotta satisfy the borrow checker and i think this works...
[02:26:04] <tjc> does anybody know anything about how file modification times work on Mac OS X?
[02:26:17] <tjc> Specifically I'm trying to figure out if it's possible for two different files to have the same timestamp
[02:26:24] <tjc> as in, modification time
[02:26:32] <dandy> Eridius, klutzy: http://pastebin.com/6i1tbpET I am still getting mswsock issues, even if I go down below 4.6
[02:26:32] <tjc> assuming that one was created strictly after the other
[02:26:35] <cmr> I've updated http://cmr.github.io/blog/2013/06/30/structure-and-organisation-of-rustc/ with parsing stuff.
[02:26:37] <Eridius> tjc: why wouldn't it be?
[02:26:40] <dandy> Anything look wrong with those versions?
[02:26:41] <cmr> I'll try and finish the rest tomorrow.
[02:26:45] <dcrewi> tjc: isn't OS X a unix under it all?
[02:26:48] <Eridius> tjc: worst-case you could use `touch` to set the mod date of one file to the same asanother
[02:26:51] <strcat> tjc: they're not going to be fine grained enough though, and you can edit mtime
[02:27:01] <strcat> tjc: touch -m -d 2011-01-01 foo.rs
[02:27:07] <tjc> strcat: editing isn't a concern for what I'm doing, but what I was asking was whether it's fine-grained enough
[02:27:11] * strcat uses it to trick rust's makefile
[02:27:16] <strcat> tjc: probably not
[02:27:16] <steveklabnik> aaaand it worked!
[02:27:17] <klutzy> dandy: you have to downgrade w32api package too
[02:27:20] <tjc> that two files created sequentially (assume no parallelism) would always have different timestamps
[02:27:20] <tjc> darn
[02:27:26] <steveklabnik> where 'worked' means "i made ruby segfault which makes rust segfault" ;)
[02:27:26] * tjc isn't sure why this test case always passed until now
[02:27:27] <dandy> thanks
[02:27:29] <jack> tjc: I'm pretty sure you can set the file modification time explicitly, so it would be able to create dupes.
[02:27:44] <tjc> jack: Yeah, this is for rustpkg test cases so I know that nobody is monkeying with the timestamps...
[02:27:51] <tjc> I'm trying to reliably figure out if one file is older than another
[02:28:06] <jack> tjc: they are in second resolution I believe, so fast creation of files will also create dupes i think.
[02:28:10] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:28:21] <tjc> jack: seconds, huh. I'd thought it was milliseconds
[02:28:31] <strcat> ext4 actually has higher resolution than the linux kernel apis now ;p
[02:28:50] <tjc> the only explanation that makes any sense is that because I made rustpkg rebuild fewer files when it doesn't need to, everything is faster now :-)
[02:29:11] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[02:29:14] <luisbg> good night everyone :)
[02:29:21] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[02:29:22] *** Joins: Ralith (ralith@moz-A7071297.customer.broadstripe.net)
[02:29:29] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[02:29:30] <jack> tjc: mtime is an int, so maybe it is milliseconds.
[02:29:48] <strcat> jack: well, which API are you looking at?
[02:29:55] <tjc> jack: and I have no idea whether creating files could be fast enough so as to still get dups with milliseconds
[02:30:11] <jack> tjc: http://en.wikipedia.org/wiki/Stat_%28system_call%29 actually that says time_t is seconds.
[02:30:12] <Eridius> why are dupes a problem?
[02:30:20] <strcat> on linux the filesystems have higher resolutions than the old APIs (filesystems use nanoseconds, APIs mostly use milliseconds)
[02:30:30] <tjc> strcat: I'm talking about whatever std::libc exposes (stat(), specifically)
[02:30:42] <tiffany> uh..
[02:30:43] <tiffany> this is weird
[02:30:52] <tjc> Eridius: in general they're not, but I'm trying to write a test case that rustpkg doesn't rebuild things when dependencies don't change; so, checking whether one file is older than another
[02:31:10] <tiffany> I did "extern mod noise;" and it tells me "unresolved import. maybe a missing `extern mod noise`?"
[02:31:15] <strcat> hfs+ is 1s, so yeah
[02:31:18] <Eridius> tjc: if B was created after A, then you know that mtime of B cannot be < mtime of A. Isn't that sufficient?
[02:31:31] <elly> if you are writing a test case you can set the timestamps to whatever you want
[02:31:47] <Eridius> it seems rather improbable that you could build A to produce B, and modify A at the exact same time, such that the mtimes are equal
[02:32:00] <elly> you can do that, though
[02:32:04] <strcat> Eridius: hfs+ only has 1s res though
[02:32:12] <elly> even if you have 1ms res it's still absolutely possible
[02:32:22] <tjc> Eridius: I don't think so, because if I want to test that I rebuilt B but not A, the timestamps could be equal if both were rebuilt
[02:32:27] <strcat> especially since I/O is inherently async unless you fsync
[02:32:28] <tjc> and that's the situation I'm testing doesn't happen
[02:32:34] <Eridius> strcat: are you sure? stat uses a `struct timespec` for the mtime, which contains sec and nsec
[02:32:44] <strcat> Eridius: doesn't matter, the filesystem does
[02:32:49] <strcat> Eridius: ext4 uses 1ns resolution
[02:33:01] <strcat> you need to use debugfs on the block device directly to get the real times ;p
[02:33:06] <elly> FAT32 supplies _2s_ resolution
[02:33:06] <tjc> heh
[02:33:13] * tjc wonders if his approach is entirely wrong
[02:33:22] <elly> to what?
[02:33:49] <tjc> I mean, I'm wondering if there's a better way to test that rebuilding doesn't happen than checking timestamps
[02:34:03] <elly> oh
[02:34:10] <jack> tjc: check the hash value?
[02:34:19] <elly> yeah, you could do that
[02:34:23] <jack> hash before change, and hash after change.
[02:34:29] <tjc> jack: somehow I didn't think of that :-)
[02:34:34] <tjc> yeah, that would work
[02:34:35] <jack> you actually already have that in the filename if it's a lib
[02:34:38] <strcat> tjc: tjc files have a build id
[02:34:39] <tjc> yeah
[02:35:29] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[02:35:52] <tjc> Well, I guess the past 10 minutes are a great example of the XY problem :-)
[02:35:59] <steveklabnik> okay, this is enough of this silliness
[02:36:03] <aatch> XY problem?
[02:36:04] <steveklabnik> have a good night everyone!
[02:36:31] <tjc> aatch: http://www.perlmonks.org/?node_id=542341
[02:36:39] <elly> aatch: when someone wants to do X, so they assume they need to do Y and ask how to do Y
[02:36:46] <elly> when in fact the assumption is wrong
[02:36:51] <tjc> right
[02:36:51] <strcat> tjc: you could write the hash of the rust stuff into the file as part of the build id
[02:37:10] * strcat shrugs
[02:37:12] <aatch> Ahh, that. I've seen that in action.
[02:37:13] <tjc> strcat: would that work for executables too?
[02:37:18] <elly> aatch: like just now :)
[02:37:47] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[02:37:48] <aatch> elly, other places too. I'm generally the person that asks "what are you actually trying to do"
[02:38:08] <elly> yep
[02:38:18] <strcat> tjc: well, on linux there's a build id section in every lib/binary
[02:38:21] <strcat> likely elsewhere too
[02:38:45] * aatch looks smart by asking obvious questions
[02:38:50] <tjc> strcat: hmm. I might just use the same code that workcache uses to check if files are fresh
[02:38:51] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Ping timeout)
[02:38:55] <dandy> OH MY FUCKING GOD ITS BUILDING
[02:38:58] <tjc> (which is why it's especially silly that I didn't think of this sooner)
[02:39:16] <dandy> and its not even midnight yet
[02:39:31] <tjc> it's not even 8 PM where I am!
[02:39:45] <dandy> usually this moment is around 1:30 AM for me
[02:39:54] <strcat> tjc: I think you can basically just make a note section in a binary with whatever string you want ;p
[02:40:08] <strcat> not that it's the best way to do this
[02:40:09] <aatch> It's monday here, so I've been like that all day.
[02:40:57] *** Quits: kelvin (kelvin@916CE83F.D2312BC6.DDE5D3F6.IP) (Quit: Leaving.)
[02:41:41] <dandy> nooo link failed
[02:41:51] <klutzy> :o
[02:42:27] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[02:43:39] <tjc> out of battery, 'night all!
[02:43:40] *** Quits: tjc (tjc@moz-D3C492BF.static.snlo.ca.charter.com) (Quit: zzzzzzzzzz)
[02:44:14] <strcat> irrefutable proof tjc is a cyborg
[02:44:16] <dandy> can anybody on mingw read me some of their package versions?
[02:44:27] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[02:44:37] <dandy> *that can build HEAD
[02:46:26] *** Quits: kimundi (kimundi@moz-E6949FE1.dip0.t-ipconnect.de) (Ping timeout)
[02:46:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:46:46] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[02:47:35] <Eridius> hrm, CString.as_bytes() calls libc::strlen(). That seems like a waste
[02:47:39] <mark_edward> bjz: ping
[02:48:01] <cmr> Eridius: indeed it does! rustify it :D
[02:48:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:48:18] <Eridius> yep, gonna do that along with adding .as_str
[02:48:27] <mark_edward> btw are bjz and bjzaba and bjzaba.clone() on Reddit the same people?
[02:48:35] <echristo> it's an Eridus.
[02:48:35] <cmr> mark_edward: yes
[02:48:40] <Eridius> hi echristo 
[02:48:44] <echristo> howdy.
[02:48:57] <mark_edward> cmr: thanks
[02:49:34] *** Joins: kimundi (kimundi@moz-845FFCCA.dip0.t-ipconnect.de)
[02:51:38] *** Joins: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP)
[02:53:02] <tautologico> testing for EOF when calling read_char seem to have changed 
[02:53:14] <tautologico> (-1 as char) used to work but doesn't compile now
[02:53:42] <strcat> tautologico: I think you probably just want to use the new io library
[02:53:45] <strcat> std::rt::io
[02:53:52] <tautologico> oh 
[02:54:05] <tautologico> I didn't think rt::io would be the new IO lib
[02:54:17] *** kimundi is now known as zz_kimundi
[02:54:55] <klutzy> dandy: I use gcc-4.6.2-1 + w32api-3.17-2
[02:55:03] <dandy> thanks you!
[02:55:07] <tautologico> strcat: are there docs for it?
[02:55:34] <dandy> I will try those numbers next
[02:55:38] <strcat> tautologico: well, no more/less than std::io is documented
[02:56:20] <strcat> the error handling in std::rt::io will change though
[02:57:44] <tautologico> std::io has html docs
[02:59:19] <strcat> you can still use std::io for now
[02:59:54] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[03:00:14] *** nejucomo_ is now known as nejucomo
[03:00:46] <nejucomo> I've build 0.8-pre and cargo fails to run:
[03:00:56] <strcat> cargo is long gone
[03:01:00] <nejucomo> Oh.
[03:01:06] <nejucomo> I've been away from rust for a while.
[03:01:11] *** zz_kimundi is now known as kimundi
[03:01:15] <nejucomo> Where can I learn about the new packaging system?
[03:01:40] <strcat> nejucomo: https://github.com/mozilla/rust/blob/master/doc/rustpkg.md it's not finished though
[03:02:30] <nejucomo> Thanks.
[03:02:55] <dandy> klutzy, never had link errors?
[03:03:14] <klutzy> dandy: what link error?
[03:03:17] <tautologico> I still don't know how to check for EOF now
[03:04:23] <nejucomo> If I primarily want to write applications, should I use recent master, or stick with the release-0.7 tag?
[03:04:28] <dandy> klutzy, http://pastebin.com/XeQmd0Pg
[03:04:46] <strcat> tautologico: well, read_char was/is unsound
[03:05:25] <tautologico> I think I'll try to use the new IO 
[03:05:38] <dandy> oh wtf my winapi got downgraded, let me try to get that to 3.17
[03:05:40] <strcat> you can use unsafe code transmute -1i32 to char but it's undefined behaviour and will likely break soon
[03:05:46] <klutzy> dandy: O_o seems like some core library is missing/mismatched
[03:06:45] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[03:07:02] <klutzy> dandy: doesn't this help? https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[03:07:16] <klutzy> (I didn't tried it so no idea)
[03:07:33] <dandy> I am hoping to update that when I get this to build
[03:08:01] <dandy> I'm not getting much luck from it
[03:08:18] * nejucomo skims changelog since release 0.4...
[03:08:48] <Eridius> rusti: bytes!()
[03:08:55] -rusti- pastebinned 10 lines of output: http://ix.io/85t
[03:10:28] <strcat> nejucomo: definitely use master
[03:10:45] <strcat> nejucomo: tags are still just time-based milestones on master
[03:11:18] <strcat> you could stick with 0.8 for a bit when it's released but you'll end up wanting master again due to bug fixes and so on
[03:13:06] <nejucomo> Ok.
[03:13:21] <nejucomo> Hm.  I think after reading these changelogs I should just reread the newest tutorial and manual.
[03:14:20] <strcat> nejucomo: well, and there are new tutorials now
[03:14:29] <strcat> iterator tutorial, etc.
[03:14:54] <nejucomo> Great!
[03:15:15] <strcat> rusti: for x in range(0, 3).map(|x| x * 2) { println!("{}", x) }
[03:15:22] -rusti- pastebinned 7 lines of output: http://ix.io/85u
[03:15:32] <strcat> huh.
[03:15:36] <strcat> rusti: for x in range(0, 3).map(|x| x * 2) { println!("{}", x) }
[03:15:36] -rusti- 0
[03:15:37] -rusti- 2
[03:15:37] -rusti- 4
[03:15:37] -rusti- ()
[03:15:53] * strcat has no explanation for what happened the 1st time
[03:15:57] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[03:16:08] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[03:16:13] <strcat> oh actually I do have an explanation
[03:16:22] <strcat> rustc -v had an ICE :s
[03:16:24] <dandy> klutzy, what versions do you have for mpc and mpfr pretty please?
[03:16:40] <dandy> maybe related to the missing atomics?
[03:16:48] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[03:16:53] <nejucomo> Nice: ARM, Android, MIPS, x86 improvements...
[03:17:04] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[03:17:28] <klutzy> dandy: http://pastebin.com/WhsiCupK :)
[03:17:43] <dandy> perfect, thanks
[03:18:28] <dandy> I have the same versions :( maybe something else though...
[03:18:34] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[03:18:35] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[03:18:41] <mark_edward> what's a repo that's been properly structured for use with rustpkg?
[03:18:49] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[03:20:04] <nejucomo_> I saw a youtube video of someone's comparison of go and rust shortly after they spent some time learning both...
[03:20:38] <nejucomo_> One frustrating aspect was that they looked at core/extra on the website and concluded that was "all the libraries available", whereas the go website has a large curated list of libraries...
[03:20:41] <nejucomo_> Oh well.
[03:20:55] <nejucomo_> (They also didn't mention any of the safety features of different pointer types...)
[03:21:00] <strcat> they aren't very similar languages
[03:21:16] <strcat> go is more similar to java than rust
[03:22:13] * nejucomo_ wonders about the purpose of 1-element tuples...
[03:22:29] <nejucomo_> Yeah, I just spent a few hours learning go this weekend and was somewhat disappointed.
[03:22:33] <strcat> consistency, since there are 0-element tuples (unit types)
[03:22:55] <klutzy> dandy: do you have any reason not to use 4.8?
[03:23:09] <dandy> I have no idea?
[03:23:22] <nejucomo_> Are there cases that are "general to all tuples" for which 1-tuples make sense?  Otherwise, where would they be used?
[03:23:25] <dandy> I just want to make rust come out onto my computer screen
[03:23:28] *** nejucomo_ is now known as nejucomo
[03:23:35] <dandy> OH
[03:23:36] <strcat> nejucomo: macros, I guess
[03:23:41] <dandy> beccause it yells at me about winsock
[03:23:41] <strcat> 1-element tuple structs are useful
[03:23:45] <nejucomo> Oh, good point.  Ok.
[03:23:50] <strcat> so it would be odd for 1-element anonymous tuples to not exist
[03:24:11] <nejucomo> I'm not even sure what tuple structs are yet.  Time to read the new tutorial(s) and manual again.
[03:24:16] <dandy> sorry, I'm getting burnt out and I haveread so many work arounds, I have been spun around in so many circles tonight
[03:24:28] <klutzy> dandy: mingw recently updated their catalog, then winsock error occurred due to wrong header
[03:24:30] <strcat> nejucomo: a struct with unnamed files
[03:24:38] <strcat> rusti: struct Foo(int, int); Foo(2, 3)
[03:24:39] -rusti- main::Foo(2, 3)
[03:24:43] <klutzy> winsock itself is fixable by some direct hack on header.
[03:24:43] <nejucomo> Ah, I already see tuple traits, so there's a case 1-tuples may come in handy.
[03:24:44] <strcat> fields*
[03:24:57] <nejucomo> strcat: I see.
[03:25:00] <klutzy> other problem will occur on llvm but there is other hack
[03:25:06] <dandy> I saw that on their site but that was for wsock2.h and not wsock.h (or something like that)
[03:25:15] <klutzy> huh
[03:25:26] <dandy> http://sourceforge.net/p/mingw/bugs/1980/
[03:25:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:25:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/mBo2nw
[03:25:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:25:52] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:25:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OQugog
[03:25:52] <ghrust> 13rust/06auto 141da4488 15Alex Crichton: Guarantee that statics have unique names...
[03:25:52] <ghrust> 13rust/06auto 14d572d60 15bors: auto merge of #9206 : alexcrichton/rust/issue-9188, r=catamorphism...
[03:25:53] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:26:10] <klutzy> yes, I think it will fix the WSAPOLLFD issue
[03:27:43] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[03:28:47] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[03:28:59] <dandy> well... that got me back to my link error
[03:29:05] <dandy> do you have visual studio?
[03:29:12] <mark_edward> who here knows how rustpkg works?
[03:29:36] <klutzy> I don't know how mingw-get downgrades; If it is just tar and no rm old files, it would be problematic I think
[03:29:49] <dandy> I am going to start all over
[03:29:53] <klutzy> I only have winsdk
[03:30:04] <dandy> i'm just going to wipe everything and try again
[03:30:12] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[03:30:31] <klutzy> I think using gcc 4.8 with patches is the easiest way to build rust
[03:31:04] <klutzy> (it will faild for some edge cases although)
[03:31:15] * klutzy goes for lunch
[03:31:28] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[03:31:42] <dandy> thanks for the help
[03:31:56] <Eridius> cmr: ok, c_str.as_str() added and .as_bytes() rustified. r? https://github.com/mozilla/rust/pull/9220
[03:33:54] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[03:34:29] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[03:34:46] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[03:35:01] <mark_edward> cmr: do you know how rustpkg works!???
[03:36:22] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[03:36:45] <mark_edward> strcat: do you understand how rustpkg works???
[03:36:45] <dandy> Is "Thad Guidry" online right now? If so can he be brought here?
[03:36:55] <strcat> mark_edward: ?
[03:37:11] <strcat> I haven't used it
[03:37:21] <strcat> at least since very early on
[03:37:30] <mark_edward> how do you structure a git repo such as to be usable with rustpkg?? the docs here: https://github.com/mozilla/rust/blob/master/doc/rustpkg.md arent' too useful
[03:37:36] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[03:39:12] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[03:45:51] *** Joins: aeqwa (aeqwa@moz-8DAA7910.dsl.tropolys.de)
[03:46:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:47:06] *** Quits: StarLight (StarLight@moz-EDFEE499.dynamic.avangarddsl.ru) (Ping timeout)
[03:48:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:51:08] *** Joins: tjc (tjc@moz-99DCA715.public.wayport.net)
[03:51:08] *** ChanServ sets mode: +o tjc
[03:51:21] <mark_edward> tjc: do you know how rustpkg works?
[03:51:31] *** Joins: StarLight (StarLight@moz-117E4F7E.dynamic.avangarddsl.ru)
[03:51:47] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[03:52:01] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[03:52:31] *** Quits: tjc (tjc@moz-99DCA715.public.wayport.net) (Connection reset by peer)
[03:52:33] *** Joins: tjc_ (tjc@moz-99DCA715.public.wayport.net)
[03:52:40] <tjc_> mark_edward: well, i wrote it, so often :-)
[03:53:04] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[03:53:40] <mark_edward> tjc_: praise be! so how should i structure a rust project in a git repo to properly use it? the https://github.com/mozilla/rust/blob/master/doc/rustpkg.md
[03:53:50] <mark_edward> doc didn't seem to explain it to me
[03:54:15] <tjc_> mark_edward: fair point. there's more than one option...
[03:54:44] <tjc_> one option is the structure the project so that it's a self-contained workspace, with a src/ directory containing a "foo" subdirectory (if the package name is foo) containing sources
[03:54:45] <mark_edward> what's the one that you would use?
[03:54:56] <tjc_> and one of lib.rs, main.rs, test.rs, or bench.rs at the top level of foo (at least one, I mean)
[03:55:09] <tjc_> I think it's better, though, to make the top-level directory of the project the "foo" subdirectory
[03:55:16] <tjc_> so that somebody can check it out into an existing workspace
[03:55:29] <tjc_> so there should be one or more of those four special-to-rustpkg files at the top level
[03:55:40] <tjc_> that's pretty much it, everything else is optional
[03:56:57] *** Quits: RMF (RMF@moz-7ED3CBC0.dsl.telepac.pt) (Ping timeout)
[03:57:16] <mark_edward> so say my planned rust project is fizzbuzz-rs, and has three submods, fizzbuzz::{foo, bar, baz}. so at the top lovel of my git repo there should be a foo.rs, bar.rs, baz.rs, and main/lib/test/bench.rs?
[03:57:27] <jack> mark_edward: you can find some small examples in the rustpkg tests which are here: https://github.com/mozilla/rust/tree/master/src/librustpkg/testsuite/pass/src
[03:57:57] <jack> mark_edward: that is the simplest way, yes.
[04:00:43] <mark_edward> thank you for the explanation! how does this interact with dependencies on other git repos?
[04:00:55] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:00:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d572d60 to 1472f62ab: 02http://git.io/N3iJvQ
[04:00:55] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:01:00] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:01:01] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/cQfNDA
[04:01:01] <ghrust> 13rust/06auto 14137eb34 15Daniel Micay: remove unused `FastCall` wrapper...
[04:01:01] <ghrust> 13rust/06auto 146d0a847 15Daniel Micay: teach Call/CallWithConv to set attributes
[04:01:01] <ghrust> 13rust/06auto 142de2fb1 15bors: auto merge of #9219 : thestinger/rust/function-split, r=alexcrichton
[04:01:02] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:01:14] *** Joins: RMF (RMF@78B6AE45.A4D51E9D.6119BA41.IP)
[04:01:44] <dandy> Eridius, you run into FE_ALL_EXCEPT not declared in this scope ?
[04:01:56] <tjc_> mark_edward: there are two scenarios for that...
[04:02:20] <tjc_> mark_edward: in the default scenario, rustpkg creates an additional workspace for you (./.rust) and pulls all the sources for external dependencies and stores them in there
[04:02:38] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:02:47] <tjc_> if you care where it puts things (or want to share the same code for library A between packages B and C that use A) you can set your RUST_PATH environment variable to the path to a workspace where you want it to install stuff
[04:03:23] <jack> mark_edward: external dependencies are declared in your package with `extern mod foo = "github.com/someuser/foo";` and then rustpkg will clone and build them.
[04:03:47] <jack> mark_edward: assuming it doesn't find them in your RUST_PATH first of course.
[04:04:11] <mark_edward> cool! it's all becoming more clear!
[04:04:45] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[04:05:20] <tjc_> jack: in re: my question from earlier about testing that no unnecessary rebuilding happened...
[04:05:21] <klutzy> dandy: it is again due to mingw header
[04:05:32] <dandy> yes but which of the 6?
[04:05:37] <dandy> :(((
[04:05:49] <tjc_> I realized comparing hashes almost-but-not-quite works, because if rustpkg incorrectly compiles a file none of whose dependencies change, the resulting executable will be exactly the same
[04:05:50] <klutzy> dandy: https://mail.mozilla.org/pipermail/rust-dev/2013-September/005567.html
[04:05:52] <klutzy> 6?
[04:05:56] <dandy> on the bright side starting over got me much further
[04:06:05] <dandy> I have 6 fenv.h files within my mingw install
[04:06:12] <klutzy> ah yes
[04:06:13] <dandy> not sure which one is used
[04:06:20] <tjc_> I'm not sure how important it is to test this -- if builds get dramatically slower, people will notice...
[04:06:31] <klutzy> two must be used, but only one is. it's the reason
[04:06:31] <tjc_> but it seems like a good idea to have a regression test even so :-)
[04:06:47] <dandy> well LLVM has FEnv.h
[04:06:53] <klutzy> yep
[04:06:55] <dandy> and mingw has its own fenv.h files
[04:07:00] <dandy> <fenv.h>
[04:07:09] <dandy> but I don't know the context used by <> to determine what one it chooses
[04:07:22] <klutzy> #include <fenv.h> includes /lib/gcc/mingw32/<ver>/include/c++/fenv.h
[04:07:29] <dandy> :)
[04:07:33] <klutzy> and it has #included_next <fenv.h>
[04:07:38] <dandy> :(
[04:07:38] <klutzy> depending on #if _GLIBCXX_HAVE_FENV_H
[04:08:05] <klutzy> #include_next <fenv.h> will include /include/fenv.h
[04:08:16] <jack> tjc: I'm not sure what exactly you are testing. I think you're right there are probably edge cases with using the hash.
[04:08:26] <klutzy> but the _GLIBCXX_HAVE_FENV_H is missing. no idea why mingw team removed the macro
[04:08:40] <klutzy> the macro is at /lib/gcc/mingw32/<ver>/include/c++/mingw32/bits/c++config.h
[04:09:16] <klutzy> > /* Define to 1 if you have the <fenv.h> header file. */
[04:09:16] <klutzy> > /* #undef _GLIBCXX_HAVE_FENV_H */
[04:09:18] <dandy> my brain just stopped, I need a moment before I get into this
[04:09:27] <tjc_> jack: I'm trying to test that if A (executable) depends on B (library), and rustpkg builds A; then, if A's sources change and if `rustpkg build A` gets invoked again, then rustpkg doesn't rebuild B
[04:09:41] <tjc_> (since if workcache wasn't working, rustpkg would naively rebuild all of A's dependencies)
[04:09:53] <dandy> klutzy, how did you follow that trail so fast?
[04:10:27] <jack> tjc: ah. can you detect failure of rustc?
[04:11:05] <jack> tjc: i'm thinkin you could switch the output of B to read-only. if rustpkg builds it again it will fail to write the output file.
[04:11:14] <klutzy> dandy: `find . -name fenv.h` and adding `#warning "OH NO SOMETHING IS WRONG"` at headers :)
[04:11:17] *** Quits: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: canhtak)
[04:11:21] <tjc_> jack: oh, hmm, good point!
[04:11:28] <tjc_> I'm not entirely sure if I can detect it, that said
[04:11:39] <jack> tjc: should be easy to find out at least.
[04:11:39] <tjc_> because I know sometimes task failure doesn't result in a non-zero exit code
[04:11:42] <tjc_> I can try it, though, yeah
[04:12:08] <tjc_> I suppose the *really* simple thing to do would be to wait 2 seconds in between the two calls to `rustpkg build`...
[04:12:16] <dandy> # include_next is new to me
[04:12:19] <tjc_> but gratuitously making the test suite slower seems like a bad move :-)
[04:12:20] <jack> tjc: making tests run slower is a no-no i imagine.
[04:12:22] <tjc_> yeah
[04:12:39] <jack> tjc: you could also set all timestamps for B an hour in the past. or something.
[04:12:57] <tjc_> jack: yeah, that's an idea too. I'll try the read-only idea first, seems more portable
[04:13:29] <jack> tjc: it's one chmod call instead of N x updating timestamps. so definitely less complicated and arbitrary.
[04:13:33] <tjc_> right
[04:14:22] <jack> can you override hte build function at all?
[04:14:41] <tjc_> well, I'll certainly be able to when I implement custom package script commands...
[04:14:45] <tjc_> but right now, not easily
[04:15:30] <jack> another possibility to force a failure is to inject bad code into b/lib.rs and then touch b's output
[04:15:40] <jack> oh wait. workcache is smarter than that!
[04:15:44] <tjc_> yes :-)
[04:15:49] <klutzy> dandy: it is only used for gcc internals I guess
[04:15:50] <jack> foiled by superior technology
[04:15:52] <tjc_> indeed
[04:15:57] <klutzy> it was new to me too :)
[04:17:21] <dandy> oh, I found your e-mail in the list
[04:19:33] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[04:20:27] <mark_edward> `rustpkg install git://github.com/mozilla/servo.git#1.2 `from the rustpkg man page doesn't work :-(
[04:20:38] <dandy> klutzy, I want to put these two patches on the wiki... but that feels dirty
[04:20:40] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[04:20:50] <tjc_> mark_edward: hmm, does it have that as an example? *looks*
[04:20:57] <tjc_> mark_edward: wait, man page? there's a man page?
[04:21:24] <tjc_> oh, wow
[04:21:28] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[04:21:31] <mark_edward> ubuntu nightly repo maintained by strcat i think, is where i get rust
[04:21:40] <jack> mark_edward: haha. that example is wishful thinking for a bit longer :)
[04:21:45] <tjc_> mark_edward: you're right, it's still there in master, but the man page is out of date
[04:21:46] <strcat> mark_edward: no I don't maintain an ubuntu repo
[04:21:50] <klutzy> dandy: yes, so I think gcc 4.8 should not recommended for now, but we don't know how to use < 4.8 :(
[04:21:58] <strcat> I maintain an arch linux repo
[04:22:01] <tjc_> mark_edward: the docs for rustpkg are in doc/rustpkg.md
[04:22:05] <dandy> for me 4.8 is the ONLY way I have any chance at success
[04:22:17] <dandy> I tried the downgrade and ... link errors, hair loss, etc
[04:22:17] <strcat> and it's more like it maintains itself ;p
[04:22:22] <tjc_> oh, hmm, it's not *that* out of date
[04:22:27] <tjc_> but yeah, forward-thinking :-)
[04:22:49] <mark_edward> strcat: oh right! sorru
[04:23:02] <tjc_> mark_edward: So anyway, that example would work in theory without the git:// prefix, but...
[04:23:12] <tjc_> since we haven't converted servo to rustpkg completely yet, it probably still won't work that way
[04:23:16] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[04:23:26] <dandy> Anybody think it would be OK/not OK if I made a page on the github wiki "temporary-windows-build-before-0.8" ?
[04:24:01] <dandy> The existing windows instructions are nearing 2 pages for me and most of that does not seem to apply
[04:24:49] <tjc_> dandy: please do!
[04:25:56] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[04:26:20] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[04:28:01] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[04:29:51] <jack> dandy: Also, please link it from the old page with a note about being updated, in-progress instructions for 0.8.
[04:30:03] <dandy> and temporary... will do
[04:31:32] *** Quits: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP) (Quit: tautologico)
[04:31:41] *** Quits: tjc_ (tjc@moz-99DCA715.public.wayport.net) (Quit: zzzzzzzzzz)
[04:34:27] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[04:37:21] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:37:49] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[04:38:37] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[04:40:41] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:40:43] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[04:41:05] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[04:42:14] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[04:44:08] <olsonjeffery> do we have a cross-platform const/helper to get a directory separator?
[04:44:16] <olsonjeffery> path/dir separator
[04:44:23] <olsonjeffery> vs \, y'know..
[04:44:46] <olsonjeffery> even though, by all accounts, unix-style separators basically work on windows. just curious if anyone knows.
[04:45:48] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Quit: Lost terminal)
[04:47:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:47:22] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[04:48:06] <geomyidae> I can't find anything in path or os
[04:48:36] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:48:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:48:54] <dandy> klutzy, FILE_FLAG_FIRST_PIPE_INSTANCE mean anything to you?
[04:50:12] *** Quits: aeqwa (aeqwa@moz-8DAA7910.dsl.tropolys.de) (Quit: Lost terminal)
[04:54:40] *** Joins: frogaincia (Mibbit@moz-9998D0C0.hsd1.wa.comcast.net)
[04:55:30] <frogaincia> hey does anybody know if there are plans for a regexp library in core/extra
[04:56:29] <strcat> yes
[04:56:45] <klutzy> dandy: nothing in my memory. where do you get problem?
[04:57:03] <klutzy> (make VERBOSE=1 prints some helpful output)
[04:57:44] *** Joins: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP)
[04:57:57] <dandy> http://pastebin.com/ekUssHR7
[04:58:06] <dandy> I havn't really looked at it yet to be honest
[04:58:22] <dandy> Im documenting the windows process from the start
[05:00:38] <klutzy> dandy: it is defined at winbase.h but only if #if (NTDDK_VERSION >= NTDDI_WIN2KSP2)
[05:00:54] <dandy> I guess window8 is before 2K?
[05:01:06] <dandy> DDK... thats the driver devkit?
[05:01:37] <klutzy> I'm on 8.1, so I think it is ok to use 8
[05:01:41] <klutzy> yep
[05:02:13] <klutzy> don't know what matters yet though
[05:02:50] *** Quits: frogaincia (Mibbit@moz-9998D0C0.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:02:59] <klutzy> this is also interesting: warning: "/*" within comment  /* DDK got it wrong! */
[05:03:45] <klutzy> it means there is /* before /* DDK got it wrong */
[05:05:24] *** Joins: kseo (kseo@338DE5BC.4166765B.485A6DF.IP)
[05:06:07] *** Quits: kseo (kseo@338DE5BC.4166765B.485A6DF.IP) (Client exited)
[05:06:16] <klutzy> nevermind; libuv's fault
[05:06:19] <klutzy> :(
[05:06:26] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:07:19] *** Joins: kseo (kseo@338DE5BC.4166765B.485A6DF.IP)
[05:07:47] <klutzy> the FILE_FLAG_blah definition is also inside #if (_WIN32_WINNT >= _WIN32_WINNT_WIN2K)
[05:08:57] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:09:18] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[05:10:08] <klutzy> ~/usr/mingw-20130914 $ grep NTDDK_VERSION * -r
[05:10:14] <klutzy> include/winbase.h:#if (NTDDK_VERSION >= NTDDI_WIN2KSP2)
[05:10:15] <klutzy> mingw32/include/winbase.h:#if (NTDDK_VERSION >= NTDDI_WIN2KSP2)
[05:10:18] <klutzy> huh!??
[05:10:38] <klutzy> seems that they forgot something
[05:10:41] <klutzy> or we did
[05:10:56] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:10:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/cQfNDA
[05:10:56] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:11:10] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:12:34] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[05:12:47] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[05:13:01] <klutzy> dandy: NTDDK_VERSION is typo of NTDDI_VERSION I guess :'(
[05:13:14] <dandy> !
[05:13:17] <dandy> that must be it
[05:13:33] <klutzy> but then why I had no problem with it? confused
[05:13:47] <dandy> are you on HEAD from today or HEAD from last week?
[05:13:52] <dandy> also LLVM?
[05:14:06] <klutzy> yes. also mingw downloaded yesterday
[05:14:48] <klutzy> maybe because my repo was not clean
[05:15:16] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[05:15:20] <dandy> I'm nearly ready to start digging into this issue
[05:15:24] *** Quits: indirect (indirect_m@moz-22FDA25B.hsd1.ca.comcast.net) (Ping timeout)
[05:15:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:15:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/K4bCMg
[05:15:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:15:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:15:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4vvNZw
[05:15:54] <ghrust> 13rust/06auto 143cb0bc6 15Alex Crichton: Upgrade LLVM to close #9117
[05:15:54] <ghrust> 13rust/06auto 148e2ae22 15bors: auto merge of #9118 : alexcrichton/rust/llvm-fix, r=sanxiyn...
[05:15:55] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:16:25] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[05:16:57] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[05:16:58] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:19:22] <klutzy> `make clean` does not clean libuv on windows, so it may be relevant
[05:19:27] *** Joins: indirect (indirect_m@moz-22FDA25B.hsd1.ca.comcast.net)
[05:19:34] <dandy> make clean left lots behind
[05:19:39] <dandy> thats why I started over
[05:19:54] <dandy> that is how I got past the link failures
[05:22:45] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:22:47] <dandy> I don't think DDI is a typo
[05:23:35] <dandy> and if DDK was a typo wouldn't we get a symbol error?
[05:23:49] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[05:23:50] <dandy> or would it try to do 'undefined' >= NTDDI_WIN2KSP2
[05:23:51] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[05:23:56] <dandy> and just say false?
[05:25:08] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:25:28] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:26:17] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[05:27:27] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[05:29:59] <klutzy> dandy: wow. gcc says it is false.
[05:30:25] <dandy> I don't know what the values are though for my system
[05:30:54] <klutzy> tested with #if (ABC >= 123) #warning "ABC >= 123" #else #warning "ABC < 123" #endif (with \n)
[05:30:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:30:57] <mark_edward> rusti: file!()
[05:30:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/9sLI9w
[05:30:57] <ghrust> 13rust/06auto 143cb0bc6 15Alex Crichton: Upgrade LLVM to close #9117
[05:30:57] <ghrust> 13rust/06auto 143fbfab0 15bors: auto merge of #9118 : alexcrichton/rust/llvm-fix, r=sanxiyn...
[05:30:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:31:00] -rusti- "<anon>"
[05:31:10] <mark_edward> rusti: line!()
[05:31:10] -rusti- 7u
[05:31:12] <klutzy> and `gcc -c -shared a.c` prints "ABC < 123"
[05:31:40] <dandy> i would expect that
[05:31:49] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:31:50] <dandy> its not less, its just not greater or equal
[05:32:14] <klutzy> dandy: I compared w32api headers; latest header has the problematic #if line
[05:32:22] <dandy> I wonder if NTDDK_VERSION is supposed to come as a compile argument?
[05:32:33] <dandy> oh, gotcha
[05:32:35] <klutzy> I think it is just a mistake
[05:33:09] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[05:33:20] <klutzy> so yet another hack.. remove such #if and #endif :(
[05:33:38] <dandy> what does the older header look like? Just no condition?
[05:33:55] <klutzy> my old header: #if (_WIN32_WINNT >= 0x0500) #define FILE_FLAG_FIRST_PIPE_INSTANCE524288 #endif
[05:33:56] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[05:34:23] <dandy> wonder if I can just make it that
[05:35:55] <dandy> rustc.exe - Application Error
[05:36:00] <dandy> well I guess at least I have rustc now
[05:37:23] <tikue> is there a way to do `[~foo, .. n]` without getting the "repeated element will be copied" error?
[05:38:44] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:41:25] <strcat> tikue: no
[05:41:29] *** Quits: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP) (Quit: tautologico)
[05:41:31] <strcat> it only works for implicitly copyable types
[05:41:40] <dandy> This is about where I am now: http://pastebin.com/X6p63R9M
[05:42:21] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[05:43:19] <dandy> Error 66
[05:44:11] <klutzy> dandy: reported the DDK/DDI here https://github.com/mozilla/rust/issues/8598#issuecomment-24489871
[05:44:15] <klutzy> thanks!
[05:44:23] <dandy> nope, thank you.
[05:44:59] <klutzy> stage0/rustc.exe needs some old dll files
[05:45:06] <tikue> strcat: is CTFE off the table completely, then? I was under the impression it was something most people wanted to add eventually
[05:45:12] <dandy> oh I remember seeing that somewhere...
[05:45:46] <strcat> tikue: adding it piecemeal is off the table - it would be all or nothing, but I don't see it happening anytime soon
[05:45:59] <strcat> 2 years down the road, maybe it will be seriously considered
[05:46:16] <tikue> strcat: what does all or nothing mean? surely not every function can be evaluated at compile time
[05:46:33] <strcat> there wouldn't be special cased built-in CTFE functions
[05:47:02] <strcat> tikue: unless rust gets effects, either all functions would be able to be evaluated at compile-time or none of them
[05:47:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:47:29] <strcat> and you would need a syntax for it
[05:47:49] <strcat> or just semantics, like it only happens if you store to a static
[05:47:54] <tikue> strcat: anything with IO, for instance, can't be CTFE
[05:48:01] <strcat> tikue: why not?
[05:48:04] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[05:48:16] <strcat> if rust doesn't have effects, and was going to get CTFE, I/O would be evaluated at compile-time
[05:48:44] <tikue> strcat: if the function is called multiple times expecting different results each time that wouldn't make sense
[05:49:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:49:06] <strcat> rust doesn't have a way to forbid I/O
[05:49:40] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[05:49:53] <tikue> mm...i think we're talking past each other. i agree you could have `let result = io_call();` be CTFE, but not the function declaration itself, only specific instances of its use
[05:49:54] <dandy> klutzy, this?: https://github.com/mozilla/rust/issues/8786 I don't think that is my issue
[05:50:17] <tikue> i suppose that's almost not worth qualifying though
[05:50:32] <strcat> tikue: don't know what you mean by not the function declaration itself
[05:50:38] <strcat> 'let result = foo' will never be CTFE
[05:50:47] <strcat> if it existed, it would be explicit
[05:50:58] <tikue> strcat:  that's not the point i'm making
[05:51:07] <dandy> OH
[05:51:11] <strcat> we already have syntax extensions which do I/O
[05:51:13] <dandy> std.dll is 0 bytes in size
[05:51:16] <dandy> thats a problem
[05:51:17] <tikue> strcat:  i'm really just saying you can't have a function evaluate to a static value
[05:51:25] <tikue> for all calls to it
[05:51:34] <strcat> dandy: those are only there for deps in the makefile
[05:51:35] <dandy> all of them are...
[05:51:36] <dandy> what?
[05:51:37] <strcat> the real ones have hashes
[05:51:40] <dandy> okay...
[05:51:53] <dandy> my windows feels violated
[05:52:08] <dandy> I don't think it likes that
[05:52:19] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[05:52:32] <strcat> they're not supposed to be installed
[05:52:39] <strcat> they are just in the build dir
[05:52:49] <tikue> what is the reasoning behind module-level scoping of enum variants?
[05:53:04] <strcat> it's what haskell/ML does
[05:53:17] <strcat> and that's where the feature comes from
[05:53:18] <tikue> and what is their reasoning?
[05:53:40] <strcat> they don't have scopes other than modules
[05:53:46] <strcat> well I mean namespaces
[05:53:50] <strcat> (ofc they have scopes)
[05:54:02] <strcat> types don't have namespaces
[05:54:22] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:54:22] <tikue> rust does have multiple namespaces though
[05:55:04] <strcat> it probably didn't, when enums were introduced
[05:55:29] <strcat> enums predate structs as they are now
[05:55:33] <strcat> and traits
[05:55:35] <olsonjeffery> playing portal 2 while i wait for builds
[05:55:51] <olsonjeffery> grateful that my machine can handle it. i knew that 16gb of ram would come in handy, eventually
[05:56:06] *** Joins: wil (wil@moz-23A79BCB.bootp.virginia.edu)
[05:56:43] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[05:57:03] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:57:39] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:57:42] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:58:12] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Quit: WeeChat 0.4.1)
[05:58:22] <dandy> Faulting module name: libstdc++-6.dll, version: 0.0.0.0, time stamp: 0x522c646d
[05:58:54] <dandy> Do you program in C++-?
[06:00:03] <strcat> LLVM is C++, and there is a little bit of C++ left in the runtime
[06:00:47] <dandy> ++-
[06:00:57] <dandy> I guess the -6 is a MinGW thing
[06:01:01] <klutzy> dandy: I think you have to download gcc-c++-<oldver>-dll package (by hands?)
[06:01:01] <strcat> oh
[06:01:13] *** Quits: tedh_ (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[06:01:34] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[06:01:34] <dandy> well its binding to -6 by name I think
[06:01:41] <klutzy> eh wait.. packages are renamed and divided
[06:01:44] <klutzy> the old version is..
[06:01:57] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: Can sleep now)
[06:02:42] <klutzy> libstdc++-4.6.2-1-mingw32-dll-6.tar.lzma
[06:02:59] <klutzy> at here. http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.6.2-1/
[06:03:16] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[06:03:17] <dandy> how do I get the linker to use  that though?
[06:03:32] <klutzy> copy libstdc++-6.dll to /path/to/rust-builddir/stage0/bin/
[06:03:37] <klutzy> then rustc.exe will use it
[06:03:40] *** Joins: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP)
[06:03:43] <dandy> oh!
[06:03:46] <dandy> magic hu?
[06:04:04] <klutzy> I always copy some dll manually, so forgot to mention it
[06:04:13] <dandy> how did you figure that out?
[06:05:06] <klutzy> executing rustc.exe on explorer will alert missing dll :)
[06:05:23] <klutzy> in this case the dll is found but with wrong version
[06:05:40] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[06:05:42] <dandy> right but .. how did you get the right version?
[06:06:35] <klutzy> latest version was right version until mingw guys decided to upgrade whole package
[06:06:42] <klutzy> it happened some weeks ago
[06:06:43] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[06:07:25] <mark_edward> how would i make a singleton in rust?
[06:08:15] <strcat> mark_edward: the safe subset of rust doesn't have mutable globals, so you probably wouldn't
[06:08:35] <mark_edward> i need though for an FFI thing. need to initialize/manage global state
[06:08:53] <strcat> what exactly do you need it for?
[06:09:18] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[06:09:54] <mark_edward> makr sure a global thing is initialized. two pointers need to be passed to FFI functions before anything happens
[06:10:32] <strcat> the library actually uses global state? not context parameters?
[06:11:15] <mark_edward> what is a context parameter? and essentially yes. it's for OpenAL, and a device and context need to be intialized. im trying to make a higher-level library
[06:11:33] <dandy> rustc is hanging around 15% CPU, not saying much but it sure is busy
[06:11:36] <strcat> mark_edward: doesn't each function take a context parameter?
[06:11:39] <strcat> like
[06:11:40] <dandy> I guess thats a good thing
[06:12:20] <strcat> x = foo_init(); foo_bar(&x, ...); foo_baz(&x, ...)
[06:12:22] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[06:12:28] *** Joins: fabiand (fabiand@moz-F0FC23CB.adsl.alicedsl.de)
[06:12:34] <mark_edward> strcat: not really... here is what i need to mimic https://github.com/LaurentGomila/SFML/blob/master/src/SFML/Audio/AudioDevice.cpp#L45-L69
[06:12:54] <mark_edward> strcat: and then ////////////////////////////////////////////////////////////
[06:12:54] <mark_edward> // Make sure that OpenAL is initialized
[06:12:54] <mark_edward> ///////////////////////////////////////////////////////////
[06:12:54] <mark_edward> void ensureALInit()
[06:12:54] <mark_edward> {
[06:12:55] <mark_edward>     // The audio device is instanciated on demand rather than at global startup,
[06:12:57] <mark_edward>     // which solves a lot of weird crashes and errors.
[06:12:59] <mark_edward>     // It is destroyed at global exit which is fine.
[06:13:01] <mark_edward>     static AudioDevice globalDevice;
[06:13:03] <mark_edward> }
[06:13:05] <klutzy> I think we should bundle some mingw dll at stage0
[06:13:08] <mark_edward> oops, meant to link to those lines :(
[06:13:19] <mark_edward> strcat: https://github.com/LaurentGomila/SFML/blob/master/src/SFML/Audio/ALCheck.cpp#L95-L106
[06:13:58] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[06:14:01] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[06:14:16] *** Quits: wil (wil@moz-23A79BCB.bootp.virginia.edu) (Quit: leaving)
[06:14:39] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Client exited)
[06:14:45] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[06:17:40] *** jorendorff_away is now known as jorendorff
[06:20:08] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[06:20:08] <nejucomo_> I see extra::bitv has "use std::uint" and "uint::bits", but the std::uint doc page does not mention "bits": http://static.rust-lang.org/doc/std/uint.html
[06:20:12] *** nejucomo_ is now known as nejucomo
[06:20:40] <nejucomo> Also, I don't see a "uint.rs"...
[06:20:42] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[06:20:44] <strcat> nejucomo: the old rustdoc isn't clever enough to expand macros
[06:20:45] * nejucomo pokes around C++ source.
[06:21:13] <strcat> nejucomo: the only C++ is a few leftover files in src/rt ;p
[06:21:29] <nejucomo> Yay!
[06:22:04] <nejucomo> Wait what's the difference between libstd/*.rs and libstd/std.rs ?
[06:22:09] <strcat> nejucomo: http://seld.be/rustdoc/master/std/uint/index.html the new rustdoc (it's not an up-to-date generated version of the docs though)
[06:22:16] <nejucomo> -or relationship between, I should say.
[06:22:18] <strcat> nejucomo: std.rs is the top-level module
[06:22:22] <strcat> it includes the others with 'mod foo'
[06:22:30] <nejucomo> Got it.  Thanks.
[06:22:44] <strcat> nejucomo: you'll see the generated module in those rustdoc_ng docs
[06:22:52] *** Quits: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro) (Ping timeout)
[06:22:54] <strcat> and it uses 'pub use generated::*;' to re-export it
[06:23:17] <strcat> most of those things are removed now though...
[06:23:29] <strcat> the old range things, the duplicate from_str
[06:24:31] <nejucomo> Hrm.  Looking at the source, I'm getting lost in macros.  Is "uint::bits" the bitsize of uint for the target platform?  (say 64 for x86?)
[06:24:45] <strcat> nejucomo: yes
[06:26:47] <nejucomo> hehe  I tried typing just "std::uint::bits" into rust sketch and it segfaults.
[06:27:05] <strcat> nejucomo: don't bother with rusti
[06:27:10] <strcat> it doesn't work
[06:27:13] <strcat> never did work properly.
[06:28:04] <tikue> it'll be great when it actually does
[06:28:37] <nejucomo> Ok.  I figured it was worth a shot to quickly answer various questions...
[06:29:00] <nejucomo> I should really set up a skeleton module and compile and run little snippets...
[06:29:27] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:30:22] *** Joins: nkoep (nik@moz-E00EE456.pool.mediaways.net)
[06:37:16] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[06:37:59] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[06:38:15] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Ping timeout)
[06:39:24] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[06:39:52] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[06:40:27] <maik> does our udpsocket work on windows and linux?
[06:41:24] <Luqman> theoretically
[06:41:27] <strcat> if it works at all, it should work fine on both
[06:41:48] <strcat> we're just using libuv as a platform abstraction
[06:44:26] <glyc> tikue: I've been in touch with MrOrdinaire and we are going to be working on rusti over the coming months
[06:45:23] <maik> thanks, I am just not familiar with libuv. I will have a look
[06:45:31] <klutzy> strcat: but we still have somewhat broken net on win32
[06:45:37] <tikue> glyc: great :) 
[06:45:52] *** Joins: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP)
[06:45:57] <glyc> tikue: if you want to be an early tester, let me know
[06:46:01] <klutzy> I tried to remove all #[ignore(cfg(windows))] on tests, but some tests are really failing
[06:46:24] <klutzy> I remember I've enabled test on some udp stuff, but don't remember exactly
[06:46:29] <klutzy> (in my pr)
[06:46:42] *** Quits: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:47:27] *** jorendorff is now known as jorendorff_away
[06:47:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:48:59] <maik> okay libuv has an awesome documentation
[06:49:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:49:26] <dandy> frusti
[06:52:28] <dandy> https://github.com/mozilla/rust/wiki/Note-Building-Rust-Before-0.8-on-Windows-Systems
[06:53:46] <klutzy> dandy: \o/
[06:54:51] <dandy> damnit, I cried victory at 8:30
[06:54:55] <dandy> and not it is 1
[06:54:59] <dandy> now*
[06:59:06] <nejucomo> Does ringbuf grow dynamically?
[06:59:18] <nejucomo> Also, what is 'self as a type parameter?
[07:00:34] <strcat> nejucomo: 'self is just a legacy naming restriction on lifetimes as type parameters
[07:00:42] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[07:00:58] <strcat> in the future you could call it 'a, or whatever, like a regular lifetime parameter on a function
[07:01:01] <nejucomo> I see a grow function...
[07:01:13] <strcat> and yes it grows dynamically
[07:02:26] <nejucomo> I have some grasp of lifetime names on function parameters and return values; less of a grasp when in data structures; but I'm lost when it appears in a type parameter syntax...
[07:02:44] <nejucomo> (I'm looking at http://static.rust-lang.org/doc/extra/ringbuf.html#struct-ringbufiterator )
[07:04:35] <dandy> bed time, thanks again for all the help klutzy 
[07:04:37] *** Joins: squiddy (squiddy@moz-49E21657.adsl.alicedsl.de)
[07:04:53] <strcat> nejucomo: in a type, it's just required on any borrowed things
[07:05:03] <strcat> and the type then requires a lifetime parameter
[07:05:24] <strcat> in an impl, you can add a 'self lifetime parameter to use in the type definition and then the methods
[07:05:46] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[07:07:31] <nejucomo> So looking at RingBufIterator  does the definition say "elts is borrowed as long as this RingBufIterator exists?"
[07:07:35] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Connection reset by peer)
[07:08:07] <maik> use std::rt::io::net::udp::*; let s1 = UdpSocket; s1.socket_name()
[07:08:12] <maik> rusit: use std::rt::io::net::udp::*; let s1 = UdpSocket; s1.socket_name()
[07:08:22] <maik> rusti: use std::rt::io::net::udp::*; let s1 = UdpSocket; s1.socket_name()
[07:08:33] -rusti- failed to pastebin 5 lines of output
[07:08:59] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[07:09:01] <maik> rusti: use std::rt::io::net::udp::*; let mut s1 = UdpSocket; s1.socket_name()
[07:09:02] <strcat> nejucomo: it says the iterator cannot outlive the pointer it holds
[07:09:04] -rusti- pastebinned 5 lines of output: http://ix.io/85D
[07:09:16] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[07:09:17] <strcat> nejucomo: (outlive the valid lifetime of the pointer it holds)
[07:09:31] <strcat> nejucomo: so the iterator struct gains a lifetime parameter - it acts similar to a type like a borrowed ptr
[07:09:34] <maik> ^ any idea why there is no method "socket name"?
[07:09:48] <nejucomo> Nice.
[07:10:06] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[07:10:16] <strcat> nejucomo: the borrow checker actually prevents iterator invalidation statically, which is neat
[07:10:17] *** jorendorff_away is now known as jorendorff
[07:10:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:10:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9sLI9w
[07:10:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:12:06] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[07:13:37] <maik> can you spot the error here? It tells me that it doesn't find .socket_name(); but I just saw it in the source :(   ->  use std::rt::io::net::udp::*; let mut s1 = UdpSocket; s1.socket_name()
[07:13:49] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[07:14:17] <maik> it has the signature     pub fn socket_name(&mut self) -> Option<SocketAddr> {
[07:15:53] *** Quits: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP) (Ping timeout)
[07:15:53] *** flaper87|afk is now known as flaper87
[07:15:54] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:15:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4AjmWg
[07:15:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:15:55] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:15:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wsop7A
[07:15:55] <ghrust> 13rust/06auto 14940a86b 15Lindsey Kuper: Get rid of unused SimpleVisitor stuff.
[07:15:55] <ghrust> 13rust/06auto 14b05dcca 15bors: auto merge of #9187 : lkuper/rust/no-simplevisitor, r=catamorphism...
[07:15:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:16:40] *** Joins: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP)
[07:18:01] <maik> rusti: struct Test(int); impl Test { fn foo(&mut self){} } let mut t = Test; t.foo();
[07:18:02] -rusti- <anon>:7:79: 7:87 error: type `extern "Rust" fn(int) -> main::Test` does not implement any method in scope named `foo`
[07:18:02] -rusti- <anon>:7          struct Test(int); impl Test { fn foo(&mut self){} } let mut t = Test; t.foo();
[07:18:02] -rusti-                                                                                         ^~~~~~~~
[07:18:02] -rusti- error: aborting due to previous error
[07:18:03] -rusti- application terminated with error code 101
[07:18:37] <maik> rusti: struct Test(int); impl Test { fn foo(&mut self){} } let mut t = Test(5); t.foo();
[07:18:38] -rusti- ()
[07:20:12] <strcat> acrichto: ooo, new LLVM :)
[07:20:24] *** Joins: jaen (jaen@moz-19DCC1F8.neoplus.adsl.tpnet.pl)
[07:21:35] <strcat> I guess this just fixes the ARM issue
[07:22:00] *** nrc is now known as nrc|afk
[07:27:54] <maik> http://seld.be/rustdoc/master/std/rt/io/net/udp/struct.UdpSocket.html do you think bind should be renamed to new?
[07:29:39] <strcat> no, since it has a relevant side effect
[07:29:53] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[07:32:23] <tikue> why the { ... } at the end of each function/method in rustdoc_ng?
[07:32:48] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Connection reset by peer)
[07:33:18] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[07:33:38] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[07:33:41] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[07:33:43] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[07:33:47] *** Quits: squiddy (squiddy@moz-49E21657.adsl.alicedsl.de) (Ping timeout)
[07:34:00] *** Quits: fabiand (fabiand@moz-F0FC23CB.adsl.alicedsl.de) (Ping timeout)
[07:34:05] *** Quits: relrod (relrod@moz-AABB5D31.redhat.com) (Ping timeout)
[07:34:27] *** Quits: nkoep (nik@moz-E00EE456.pool.mediaways.net) (Ping timeout)
[07:35:17] <strcat> tikue: means it's a default method
[07:35:26] <strcat> tikue: well
[07:35:28] <strcat> in a trait
[07:35:28] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Client exited)
[07:35:33] <strcat> the '...' is a link to the code
[07:35:36] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[07:35:43] *** Joins: sk (sk@FC3DFD87.54A580E3.78DD174B.IP)
[07:35:53] *** Joins: squiddy (squiddy@moz-49E21657.adsl.alicedsl.de)
[07:36:00] *** Joins: fabiand (fabiand@moz-F0FC23CB.adsl.alicedsl.de)
[07:36:32] <tikue> oh that's neat
[07:36:44] *** Joins: relrod (relrod@moz-AABB5D31.redhat.com)
[07:36:54] *** Joins: nkoep (nik@moz-E00EE456.pool.mediaways.net)
[07:38:34] <ldunn> hmf. How verbose can I make rustc's debug output? An update seems to have broken something, but the error message doesn't give any particularly useful indication of where
[07:38:39] <ldunn> (the error message is task <unnamed> failed at 'called `Option::unwrap()` on a `None` value', /home/ldunn/dev/rust/src/libstd/option.rs:323)
[07:39:15] *** jorendorff is now known as jorendorff_away
[07:39:28] <Eridius> ldunn: I believe your only option is to attach gdb before it fails, and put a breakpoint on rust_begin_unwind
[07:39:45] <ldunn> ah, alrighty. I'll look at that
[07:40:42] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[07:40:47] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[07:41:18] *** Quits: nkoep (nik@moz-E00EE456.pool.mediaways.net) (Quit: Leaving)
[07:46:42] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[07:46:42] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[07:47:32] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[07:47:49] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[07:48:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:49:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:51:48] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[07:53:28] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[07:54:26] *** Quits: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP) (Ping timeout)
[07:58:37] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[08:02:46] *** Joins: victorporof (victorporo@6C2683EC.42B20A5F.6A4F8DA2.IP)
[08:03:20] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[08:06:25] <dbaupp> cmr: pong
[08:08:01] *** Quits: nattofriends (tsutsumi@moz-4CEEC7AA.warosu.org) (Quit: )
[08:08:33] *** Joins: nattofriends (tsutsumi@415EC797.D6C7DB56.8491360.IP)
[08:13:37] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[08:14:36] *** Quits: nattofriends (tsutsumi@415EC797.D6C7DB56.8491360.IP) (Quit: )
[08:15:26] *** Joins: nattofriends (tsutsumi@415EC797.D6C7DB56.8491360.IP)
[08:22:49] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[08:25:53] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:25:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/wsop7A
[08:25:53] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:30:54] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:30:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Qm8ywg
[08:30:54] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:30:55] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:30:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rV-QTQ
[08:30:55] <ghrust> 13rust/06auto 14297ac73 15Alex Crichton: When declaring extern fns from external crates, use the correct abi...
[08:30:55] <ghrust> 13rust/06auto 14610c0cd 15bors: auto merge of #9196 : alexcrichton/rust/attempting-9055, r=cmr...
[08:30:56] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:37:52] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:39:07] <Jesse> http://www.slideshare.net/DavidEvansUVa/class4-used slide #3 :)
[08:39:19] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[08:39:52] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[08:40:32] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[08:45:14] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[08:45:42] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[08:46:02] <Eridius> Jesin: nice
[08:47:58] *** Joins: Blub\w (wry@moz-E83A654C.wireless.dyn.drei.com)
[08:48:06] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[08:48:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:49:03] <dbaupp> heh, writing http://www.advenage.com/topics/linux-timer-interrupt-frequency.php in Rust is likely to be near impossible
[08:50:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:50:47] <Jesin> ?
[08:51:07] <dbaupp> Jesin: I think Eridius meant Jesse
[08:51:50] <Jesse> i'm not sure i'd *want* a midterm exemption
[08:52:27] <Jesse> just means homework and final are worth more
[08:52:41] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[08:52:44] <Eridius> oops yeah, I did. Sorry Jsein
[08:54:51] <dbaupp> hm, actually, I guess #[no_std] + some extern would make writing that a pretty trivial translation. but yeah, I agree with you Jesse.
[08:54:57] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[08:59:11] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:59:52] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[09:02:27] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[09:02:57] *** Quits: sk (sk@FC3DFD87.54A580E3.78DD174B.IP) (Ping timeout)
[09:04:22] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[09:05:36] *** Joins: sk (sk@BC280AA6.273A3D3C.78DD174B.IP)
[09:06:43] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[09:07:59] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[09:17:19] <Jesse> lol at slides 9-12 of class 5. http://www.cs.virginia.edu/~evans/cs4414/
[09:18:03] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[09:23:55] <dbaupp> the signal handling part of http://www.cs.virginia.edu/~evans/cs4414-fall2013/pages/ps2.html may be (very) tricky
[09:31:43] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[09:32:17] <Seldaek> dbaupp: why that? no way to capture this in rust yet?
[09:33:00] <Seldaek> (I have secret plans to build a rust shell too, you know, when I'll have time..)
[09:34:21] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:34:29] <klutzy> rush? :)
[09:35:55] <Seldaek> don't know, I usually don't think of a name before I start coding, then I block for two weeks on the name problem :p
[09:36:16] <Seldaek> but that sounds like a decent idea
[09:37:10] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[09:38:24] <tikue_> rusti: struct Foo(uint, uint); Foo(1, 2).first()
[09:38:27] -rusti- <anon>:7:33: 8:5 error: type `main::Foo` does not implement any method in scope named `first`
[09:38:27] -rusti- <anon>:7          struct Foo(uint, uint); Foo(1, 2).first()
[09:38:27] -rusti- <anon>:8     };
[09:38:27] -rusti- error: aborting due to previous error
[09:38:28] -rusti- application terminated with error code 101
[09:38:42] <tikue_> (1, 2).first()
[09:38:56] <tikue_> rusti: (1, 2).first()
[09:38:57] -rusti- 1
[09:39:44] <tikue_> rusti: (1, 2).last()
[09:39:44] -rusti- <anon>:7:9: 8:5 error: type `(<VI0>,<VI1>)` does not implement any method in scope named `last`
[09:39:45] -rusti- <anon>:7          (1, 2).last()
[09:39:45] -rusti- <anon>:8     };
[09:39:45] -rusti- error: aborting due to previous error
[09:39:45] -rusti- application terminated with error code 101
[09:40:50] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:40:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rV-QTQ
[09:40:51] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:43:20] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[09:44:32] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[09:45:50] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:45:50] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/nKUc7w
[09:45:50] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:45:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:45:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Lbas4A
[09:45:52] <ghrust> 13rust/06auto 141da4488 15Alex Crichton: Guarantee that statics have unique names...
[09:45:52] <ghrust> 13rust/06auto 14d87078b 15bors: auto merge of #9206 : alexcrichton/rust/issue-9188, r=catamorphism...
[09:45:53] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:48:28] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[09:48:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:50:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:02:41] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:09:06] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[10:13:14] *** Parts: [o__o] (~o__o@moz-24EBFAC7.me) ()
[10:13:14] *** Quits: msch (msch@moz-DA0E34D4.clients.your-server.de) (Input/output error)
[10:13:16] *** Joins: msch (msch@moz-DA0E34D4.clients.your-server.de)
[10:17:38] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[10:23:38] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[10:25:12] *** Quits: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com) (Ping timeout)
[10:26:19] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[10:29:05] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:35:08] *** Joins: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com)
[10:43:05] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[10:43:24] *** Quits: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com) (Ping timeout)
[10:44:54] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[10:46:19] *** AutomatedTester is now known as AutomatedTester|away
[10:49:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:49:31] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[10:50:03] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Connection reset by peer)
[10:50:06] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:50:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:50:59] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[10:55:42] *** Joins: Ferreus (daniel@moz-2548EAED.pools.arcor-ip.net)
[10:55:49] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[10:55:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Lbas4A
[10:55:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:56:56] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[10:56:57] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[10:59:14] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[10:59:15] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[11:00:49] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:00:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/oR-K8A
[11:00:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:00:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:00:51] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/M7pZ9w
[11:00:51] <ghrust> 13rust/06auto 14d2ce83c 15klutzy: std::rt::io::file: Enable I/O tests on Win32...
[11:00:51] <ghrust> 13rust/06auto 141e745f1 15klutzy: std::rt::io::support: Fix ignored test on Win32...
[11:00:51] <ghrust> 13rust/06auto 14f3c8882 15klutzy: std::os: Use unicode for last_os_error() on Win32...
[11:00:53] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:02:37] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[11:02:38] *** Joins: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[11:03:16] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[11:12:23] <dbaupp> Seldaek: I don't think that the normal signal handlers interact with libuv very well, and we haven't wrapped the libuv abstraction (if one exists)
[11:13:17] <flaper87> dbaupp: IIRC, we haven't wrapped it, but there's one in libuv
[11:14:08] <dbaupp> flaper87: cool, presumably there'll be a rustic interface at somepoint.
[11:16:33] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[11:21:04] <cmr> dbaupp: 
[11:21:07] <cmr> task <unnamed> failed at '<error message[2]>  mv: cannot stat build/e0528a50779f3608d7e623b938cdb239e3d94d51/objects/final_binary: No such file or directory
[11:21:09] <cmr> mv: cannot stat build/e0528a50779f3608d7e623b938cdb239e3d94d51/objects/associated_file: No such file or directory
[11:22:39] <dbaupp> cmr: well... is the makefile/build system creating the objects/{final_binary,associated_file} objects?
[11:22:44] <dbaupp> *files
[11:23:02] <dbaupp> (if you're building rust, the answer is no :P )
[11:23:15] <cmr> (yup!)
[11:25:23] <dbaupp> the config you want is probably `{num_local_builders: .., build_parent_dir: "place/to/put/all/the/builds", output: null, main_repo: "path/to/main/rust/repo", build_commands: [{name: "./configure", args: []}, {name: "make", args: []}]}`
[11:26:07] <cmr> Ohhhh I see now
[11:26:11] <dbaupp> the `output` variable controls where/what to move some of the final build artifacts, e.g. if one only needs to keep the final binary (which is probably not applicable to this)
[11:26:15] <cmr> I probably should have put more effort into setting this up.
[11:26:22] <dbaupp> haha
[11:26:23] <cmr> Yeah, since I need the whole build tree
[11:26:37] * dbaupp should probably put more effort into making things clear
[11:26:46] <dbaupp> (after thursday!)
[11:33:04] <pnkfelix> are there any LLVM experts in the room?
[11:34:04] <pnkfelix> (experts with respect to reading disassembly bitcode (i.e. .ll files) and seeing whether it properly corresponds to machine code; knowledge of the internals of LLVM probably not necessary...)
[11:34:13] *** Joins: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca)
[11:34:17] <cmr> oh, I can do that somewhat
[11:34:40] <pnkfelix> cmr: I'm looking for a second pair of eyes on a bug that I've been poking at since last week
[11:34:49] <pnkfelix> cmr: https://github.com/mozilla/rust/issues/9129#issuecomment-24502656
[11:36:08] *** Joins: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr)
[11:39:31] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:40:48] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:40:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d178c22 to 14d87078b: 02http://git.io/N3iJvQ
[11:40:48] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:40:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[11:40:50] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/Xl-y2A
[11:40:50] <ghrust> 13rust/06auto 14268f3f0 15Corey Richardson: Add rustdoc_ng
[11:40:50] <ghrust> 13rust/06auto 14136900f 15Felix S. Klock II: Finish addition of rustdoc_ng to Makefiles.
[11:40:50] <ghrust> 13rust/06auto 14be2f85e 15Corey Richardson: Update rustdoc_ng to new ast naming
[11:40:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[11:42:54] <cmr> pnkfelix: ... is the type signature of the generated function wrong? I see two arguments in the rust?
[11:43:08] <cmr> Is it doing unholy things to the envptr?
[11:43:23] <pnkfelix> cmr: Wait which function are you rerferring to?
[11:43:40] <cmr> _ZN13on_break_expr4anon7expr_fn2aTE / on_expr_break
[11:44:03] <cmr> er, on_break_expr
[11:44:32] <dbaupp> cmr: it's the closure passed to map_move, so there's only one arg + the env ptr?
[11:44:57] <cmr> Oh
[11:45:02] <cmr> Ok yeah, that makes more sense :)
[11:45:45] <dbaupp> pnkfelix: have you happened to be able to reproduce outside of libsyntax?
[11:45:59] <pnkfelix> dbaupp: mm, no, I have not attempted that
[11:46:19] <pnkfelix> dbaupp: i.e., "minimal" test case still pulls in all of libsyntax
[11:48:59] <pnkfelix> dbaupp: I'll give that a shot now; I've been assuming that it would be too hard to reproduce elsewhere, but at this point I guess it doesn't hurt to try.
[11:49:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:50:08] <dbaupp> pnkfelix: yeah, it seems like it might be some unholy interaction between closures and matches and nested calls, or something :S
[11:50:31] <pnkfelix> dbaupp: my real question remains whether the generated LLVM itself is busted or not
[11:51:02] <cmr> pnkfelix: The asm doesn't look wrong, for the llvm.
[11:51:05] <pnkfelix> dbaupp: because staring at it, I don't immediately see a bug in the generated LLVM.  So I've wanted to isolate whether this could be a mistranslation bug in LLVM...
[11:51:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:51:30] <cmr> I'll stare at it some more
[11:51:32] <pnkfelix> cmr: this is what I don't understand: why is the computed RAX so different between the two different LLVM's ?
[11:51:37] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:52:02] <dbaupp> pnkfelix: I don't know; it looks a lot like the IR is sufficiently different that it's something going on there
[11:52:27] <dbaupp> pnkfelix: what happens if you put #[inline(always)] on Ident::new? (with the broken code)
[11:52:37] <dbaupp> pnkfelix: (oh, and, is this pre or post optimisations?)
[11:52:42] <pnkfelix> dbaupp: no optimizations
[11:53:04] <pnkfelix> dbaupp: i.e. .no-opt.ll, and a disable-optimize build of rustc
[11:53:35] <dbaupp> pnkfelix: aha
[11:53:40] <pnkfelix> dbaupp: good point though, maybe I need to look at the .ll code after LLVM optimization runs?
[11:54:01] <dbaupp> pnkfelix: but yeah, it's extremely weird that one instance of `Ident::new` getting called with `call` and the other with `invoke`
[11:54:10] <pnkfelix> dbaupp: yeah that is indeed super weird
[11:54:18] <cmr> It's also weird (to me) that the drop glue gets called in one and not the other.
[11:54:32] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[11:54:49] *** Quits: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[11:54:54] <dbaupp> presumably in the "good" one llvm is working out that it doesn't need the drop glue?
[11:55:04] <cmr> *shrug*
[11:55:46] * dbaupp doesn't have any idea either
[11:57:14] <dbaupp> pnkfelix: do you have a backtrace from where it is segfaulting?
[11:57:27] <pnkfelix> dbaupp: yeah, give me a sec
[11:57:54] <kimundi> dbaupp: So, is there anything you'd like to see changed about https://github.com/mozilla/rust/pull/9192 still?
[11:58:03] <pnkfelix> (the fail is where I have marked the "Invalid RAX" in the assembly code in the gist.  But I'll post a backtrace shortly.)
[11:58:53] <pnkfelix> dbaupp: https://gist.github.com/pnkfelix/6579745
[11:59:16] <dbaupp> kimundi: oh, no. r+
[11:59:25] <dbaupp> kimundi: (are you planning to do the vec equivalent?)
[12:01:32] <kimundi> dbaupp: Not really, the general opinion on that `StringRef` PR seemed to be that a vector variant doesn't seem to be as useful as a string one, so I didn't bother with it.
[12:01:37] <dbaupp> pnkfelix: hm, nothing useful in that :(
[12:02:29] <dbaupp> kimundi: right; string is useful for logging etc, vec less so.
[12:04:20] *** Quits: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr) (Quit: Gone)
[12:04:24] <pnkfelix> dbaupp: okay, I can reproduce without `extern mod syntax`
[12:07:38] <dbaupp> pnkfelix: oh?
[12:08:06] <pnkfelix> dbaupp: it may not be helpful, since others have not been able to reproduce this bug anyway
[12:08:17] <pnkfelix> dbaupp: but I'll post it once I minimize it a bit more
[12:09:03] *** Joins: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com)
[12:10:19] <dbaupp> pnkfelix: also, another thing to try would be editing the LLVM code to turn the invoke into a call and "hand compiling" with llvm (not sure the right invocation for this) to see if it's something to do with that. (e.g. https://gist.github.com/huonw/88851c59359d2f0fb765)
[12:10:51] <pnkfelix> dbaupp: yeah I've considered that; I figured it would take me too long to learn how to hand-compile with LLVM, but the longer I spend on this, the more attractive that option becomes.
[12:10:53] <cmr> (you use llc for this)
[12:11:01] <cmr> it's super easy!
[12:11:04] <cmr> llc does all the hard work
[12:11:06] <pnkfelix> dbaupp: *especially* now that I have a test case independent of libsyntax
[12:11:09] <cmr> just give it a file name.
[12:11:27] <cmr> llc -O0 for noopt
[12:11:29] <pnkfelix> cmr: I think the part I was scared of was getting it to link in libsyntax etc.
[12:11:37] <cmr> pnkfelix: yeah, that's understandable
[12:11:50] <pnkfelix> cmr: but dbaupp's prompting has put me into a much better place now.  :)
[12:12:24] * dbaupp is happy to keep asking questions, since he's not very good at much else. :P
[12:13:30] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Ping timeout)
[12:13:52] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[12:25:22] *** Quits: Ferreus (daniel@moz-2548EAED.pools.arcor-ip.net) (Ping timeout)
[12:25:58] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Client exited)
[12:35:50] <pnkfelix> dbaupp: test case now posted to https://github.com/mozilla/rust/issues/9129
[12:35:54] <pnkfelix> dbaupp: (in description)
[12:36:15] <pnkfelix> dbaupp: I'll now see about whether I can use llc to further investigate
[12:37:24] <dbaupp> pnkfelix: (what's the `int3` macro for?)
[12:37:37] <pnkfelix> dbaupp: to be able to put in a break point
[12:38:00] <dbaupp> ok, just checking it wasn't integral to reproducing it.
[12:38:00] *** AutomatedTester|away is now known as AutomatedTester
[12:38:00] <pnkfelix> dbaupp: so that I can stop in the generated machine code and either disassemble it or step through it
[12:41:16] <pnkfelix> dbaupp: you might not be able to reproduce; most of the team has not been able to (apart from seeing it arise in the context of Servo alone, oddly enough)
[12:42:15] <dbaupp> pnkfelix: do I need to compile with anything other than just `rustc 9129.rs`?
[12:42:17] *** Joins: Ferreus (daniel@moz-FF204807.pools.arcor-ip.net)
[12:42:43] <dbaupp> \o/ I get a segfault with that invocation
[12:42:48] * dbaupp checks that it's the same one
[12:43:19] <pnkfelix> dbaupp: no flags.  Most importantly, no `-O`
[12:44:05] <dbaupp> pnkfelix: ok, yup, I'm seeing a similar backtrace to the one you had; you appear to have a (semi-)reliable testcase. :)
[12:44:34] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[12:45:02] <cmr> dbaupp: did you write the decodable deriving?
[12:45:49] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[12:46:22] <dbaupp> cmr: erm; I don't think so
[12:46:28] <cmr> ok
[12:46:31] <dbaupp> cmr: either acrichto or erickt iirc
[12:46:32] <cmr> \o/ rustdoc_ng has landed
[12:46:36] <dbaupp> \o/
[12:46:51] *** Quits: itdaniher (it@moz-6C3ABA7E.bstnma.fios.verizon.net) (Ping timeout)
[12:48:36] <dbaupp> pnkfelix: ok, doesn't appear to be something do to with immediate vs. not which cause{s,d} a few bugs (assuming that adding [int, .. 10000] to Ident makes it non-immediate)
[12:49:01] <kimundi> woho !
[12:49:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:50:47] <dbaupp> pnkfelix: and it appears to be specifically with @self
[12:50:48] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:50:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Xl-y2A
[12:50:48] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:50:58] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[12:51:24] <pnkfelix> dbaupp: thanks.  I have at this point figured out how to use `llc` to compile the .ll files.  :)
[12:51:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:52:30] <dbaupp> pnkfelix: oh, awesome; anything of note yet?
[12:52:49] <pnkfelix> dbaupp: not yet.  hopefully soon.
[12:53:15] *** Quits: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: canhtak)
[12:53:40] *** Joins: sebcrozet (sebcrozet@moz-3CE49532.lrde.epita.fr)
[12:53:55] <pnkfelix> is there a way to get llc to emit a binary rather than a .o file?  (not that I can't run the linker myself, just curious)
[12:54:26] <cmr> I don't think so
[12:54:35] <pnkfelix> actually, I guess I'll need to link in the rust runtime anyway
[12:54:59] <dbaupp> (`-Z print-link-args` if you don't know it already)
[12:55:08] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Leaving...)
[12:55:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:55:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3pUT3A
[12:55:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:55:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:55:49] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/tje3ug
[12:55:49] <ghrust> 13rust/06auto 143868fe7 15Marvin Lbel: Add an SendStr type...
[12:55:49] <ghrust> 13rust/06auto 144379414 15Marvin Lbel: Corrected a few small style issues...
[12:55:49] <ghrust> 13rust/06auto 1450f9b60 15bors: auto merge of #9192 : Kimundi/rust/master, r=huonw...
[12:55:51] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:57:23] <pnkfelix> grr problem is not reproducing on the binaries from independent compilation via llc
[12:59:13] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[13:00:02] <dbaupp> :(
[13:00:20] <pnkfelix> dbaupp: but I wasn't passing -O0 to llc, let me try again
[13:00:57] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[13:00:59] <pnkfelix> dbaupp: okay, got it that time
[13:01:50] <pnkfelix> dbaupp: failure occurs with -O0.  With -O1, there's no failure.
[13:01:59] <pnkfelix> dbaupp: (to `llc`, that is)
[13:03:43] *** Joins: slack1256 (slack@moz-1CCCC4BB.baf.movistar.cl)
[13:05:53] <dbaupp> pnkfelix: progress! :)
[13:07:04] <dbaupp> does try have a bsd bot?
[13:14:27] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:16:29] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[13:17:07] *** jorendorff_away is now known as jorendorff
[13:18:43] <dbaupp> https://github.com/mozilla/rust/pull/9225 r?
[13:20:43] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:21:59] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:22:33] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[13:25:03] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[13:25:18] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:25:58] *** Joins: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca)
[13:26:07] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:26:50] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[13:27:58] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[13:28:54] *** Quits: a_m0d (dschoof@moz-670D1285.commercial.cgocable.net) (Connection reset by peer)
[13:30:34] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[13:30:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:30:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1450f9b60 to 143e1803f: 02http://git.io/N3iJvQ
[13:30:53] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:30:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:30:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BV2cUA
[13:30:54] <ghrust> 13rust/06auto 1451470f3 15Kevin Ballard: c_str: Add new method .as_str() -> Option<&str>...
[13:30:54] <ghrust> 13rust/06auto 142562f48 15bors: auto merge of #9220 : kballard/rust/c_str-as_str, r=thestinger...
[13:30:54] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:33:13] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:33:23] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:33:36] * kimundi is baffled why his PR failed
[13:34:07] <klutzy> kimundi: what pr?
[13:34:21] <klutzy> my pr also got failed, seems unrelated
[13:34:30] <kimundi> Ah, the old windows-combines-tests-to-one-executable-and-therefore-extern-mod-extra-will-not-work problem...
[13:34:35] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[13:34:49] <kimundi> How do I xfail the test for windows?
[13:36:25] <dbaupp> kimundi: you can use `self::extra`
[13:36:37] <dbaupp> but, `// xfail-fast <short description>`
[13:36:54] <kimundi> dbaupp: will self::extra work in a standalone unit test?
[13:36:59] *** Quits: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: canhtak)
[13:37:09] <dbaupp> kimundi: you wrote the mod/use documentation right :P
[13:37:30] <kimundi> dbaupp: I still don't know how the testrunners are implemented, though :P
[13:37:30] <dbaupp> but I think it will
[13:37:46] <kimundi> meh, xfail-fast seems fine
[13:37:56] <kimundi> It's not platform dependant code
[13:38:55] <engla> here's a newcomer asking to take the removing Either issue https://github.com/mozilla/rust/issues/9157   which is fine, but I almost want to keep Either, for the examples with retvalues I listed in the issue (I'm blake2-ppc)
[13:39:06] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[13:39:14] <dbaupp> kimundi: it just does `mod foo { <contents of file> }` for each file in one huge file, with a `fn main() { each::main(); file::main(); ... }`
[13:39:29] <kimundi> I see
[13:40:03] <dbaupp> engla: I'd guess it's premature to remove without brson (or someone) making an executive response/decision in response to your point.
[13:41:04] <kimundi> dbaupp: Okay, I'm not gonna xfail fast it, but use relative to self instead. Let's see if that works :P
[13:41:21] <kimundi> dbaupp: Expect a rebase to be re-r+ in a few minutes
[13:41:55] * dbaupp might be asleep by then, depending on the size of "few"
[13:42:07] <pnkfelix> dbaupp: latest update: https://github.com/mozilla/rust/issues/9129#issuecomment-24510246
[13:42:48] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:43:15] <kimundi> max 10 minutes or so. Just seeing if the test actually compiles - run pass is at 'e' right now :P
[13:43:33] <kimundi> (need to reach 's')
[13:44:06] <dbaupp> kimundi: `make check-stage2-rpass TESTNAME=<nameoftest>`
[13:44:30] <dbaupp> pnkfelix: that's peculiar! nice digging
[13:44:42] <dbaupp> now we just need an LLVM wizard.
[13:45:06] <kimundi> thanks, I knew that exists, but finding the invokation on my own would have taken longer than waiting :P
[13:45:29] <dbaupp> kimundi: https://github.com/mozilla/rust/wiki/Note-testsuite
[13:45:57] <kimundi> dbaupp: rebased
[13:46:12] <dbaupp> kimundi: link?
[13:46:18] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[13:46:19] <kimundi> https://github.com/mozilla/rust/pull/9192
[13:46:22] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[13:47:03] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[13:47:10] <dbaupp> pnkfelix: https://github.com/mozilla/rust/pull/9225 r? (it's just some tests)
[13:47:34] <pnkfelix> dbaupp: after I get back from (a now very late) lunch...
[13:47:44] <dbaupp> pnkfelix: no problem
[13:50:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:50:26] *** Joins: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca)
[13:51:26] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[13:51:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:57:09] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Leaving...)
[13:57:23] <Palmik> Hi guys. What was the motivation for renaming iterator to iter?
[13:57:32] <bstrie> Palmik: lazy fingers
[13:57:57] <Palmik> Well, now people have to remember whether (or how) are certain words abbreviated.
[13:58:23] *** Joins: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[13:58:25] <bstrie> I don't think this is the first case of words being abbreviated in rust
[13:58:27] <bstrie> so that was already true!
[13:58:33] <kimundi> you mean like mut, str, ref, fn, mod, ... ?
[13:58:37] *** Joins: yong (chatzilla@89F941DF.4E87ADC2.263D9828.IP)
[13:58:47] <Palmik> Yes, definitely, but this is the first time I actually asked about this. :P
[13:59:09] <Palmik> Well, keywords are very limited, so I do not think it's that bad.
[13:59:30] <bstrie> Palmik: I don't think you should ever need to import the iter module directly? not even sure what's in there
[13:59:39] <bstrie> iterators just kinda work
[13:59:40] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[14:00:02] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[14:00:45] <kimundi> (because everything relevant is in the prelude)
[14:00:52] <dbaupp> Palmik: part of the reason was because std::iter will/does include things that aren't exactly iterators.
[14:00:53] <engla> std::iter::{range_step,Repeat} are pretty useful
[14:01:05] <kimundi> bstrie: well, there is count, and all range functions aside from the regular range for starters+
[14:01:09] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:01:31] *** Quits: victorporof (victorporo@6C2683EC.42B20A5F.6A4F8DA2.IP) (Quit: victorporof)
[14:01:36] <kimundi> rusti: ::std::iter::count(0).take(20).to_owned_vec()
[14:01:42] -rusti- pastebinned 7 lines of output: http://ix.io/863
[14:01:48] <dbaupp> rusti: ::std::iter::count(0, 1).take(20).to_owned_vec()
[14:01:49] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
[14:01:51] *** Quits: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP) (Quit: lazyden)
[14:02:03] <kimundi> rusti: ::std::iter::count(0,1).take(40).to_owned_vec()
[14:02:06] -rusti- pastebinned 1 lines of output: http://ix.io/864
[14:02:09] <kimundi> haha
[14:02:16] *** Quits: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Quit: Leaving)
[14:02:18] <dbaupp> rusti: ::std::iter::count(0u8, 40).take(20).to_owned_vec()
[14:02:19] -rusti- ~[0u8, 40u8, 80u8, 120u8, 160u8, 200u8, 240u8, 24u8, 64u8, 104u8, 144u8, 184u8, 224u8, 8u8, 48u8, 88u8, 128u8, 168u8, 208u8, 248u8]
[14:02:33] <Palmik> bstrie: that seems more of a reason to keep it long. Well, it's not that important anyway, I was just wondering.
[14:02:50] <kimundi> rusti: use std::iter::*; count(0,1).take(100).sum()
[14:02:51] -rusti- 4950
[14:02:53] <engla> rusti: std::iter::count(1,0).take(10).to_owned_vec()
[14:02:54] -rusti- ~[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
[14:02:58] <bstrie> dbaupp: why is there a .to_owned_vec() method instead of just using .collect?
[14:03:17] *** Quits: doomlord (doomlod@moz-2BA2D1DA.range86-184.btcentralplus.com) (Ping timeout)
[14:03:21] <dbaupp> bstrie: because people got too annoyed by writing .collect::<~[type]>()
[14:03:29] <kimundi> bstrie: because collect::<~[int]> is more annoying to type and needs to be annotated with the correct type inside the vector
[14:03:33] <engla> you want vectors so often. Also, because strcat didn't catch the PR adding it so it slipped by
[14:03:38] * dbaupp is mildly unhappy about it
[14:03:42] <kimundi> engla: haha
[14:03:57] <bstrie> dbaupp: I feel like it should be inferrable much of the time... only need the type annotation for rusti
[14:04:02] <engla> it's true, someone improving librustc slipped it in
[14:04:14] <dbaupp> rusti: std::iter::count(1,0).map(|_| ~"who needs Repeat anyway").take(10).to_owned_vec()
[14:04:17] -rusti- pastebinned 1 lines of output: http://ix.io/865
[14:04:40] <dbaupp> bstrie: it's not as inferrable as it could be
[14:04:43] <kimundi> Anyway, you definitely don't want people to use vectors exclusively, but it's so useful for testing like in this situation here.
[14:05:19] <dbaupp> bstrie: e.g. let x = foo.iter().collect(); if x.is_empty() { .. } else { for y in x.iter() { ... } } // can't infer
[14:05:24] <kimundi> bstrie: The problem is that it is inherently uninferable in the common `let r = iter.collect()` case
[14:05:27] <engla> dbaupp: if you can't use a closure
[14:05:39] <dbaupp> engla: :P
[14:05:52] <dbaupp> engla: we can just write everything in terms of Unfold too
[14:06:15] <engla> we we should
[14:06:20] <engla> ;)
[14:12:00] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[14:15:00] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:15:22] *** Quits: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: canhtak)
[14:16:42] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[14:17:51] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:19:19] *** Quits: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com) (Ping timeout)
[14:24:29] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:24:31] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:24:47] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:24:48] *** Joins: aeqwa (aeqwa@moz-C28C90E3.dsl.tropolys.de)
[14:25:28] *** Joins: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com)
[14:25:54] *** Joins: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de)
[14:27:59] *** Quits: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com) (Quit: Leaving)
[14:28:05] *** Joins: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com)
[14:28:31] *** Joins: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca)
[14:29:42] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[14:31:41] *** Quits: slack1256 (slack@moz-1CCCC4BB.baf.movistar.cl) (Quit: Konversation terminated!)
[14:32:55] *** Joins: doomlord__ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com)
[14:35:25] *** Joins: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[14:37:36] *** Joins: n00b6502 (kwr5y54@moz-2BA2D1DA.range86-184.btcentralplus.com)
[14:37:51] <maik> has someone here experience with libuv? can I only send 256 bytes per UDP at a time?
[14:38:46] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:40:04] <kimundi> maik: I have no experience with libuv at all, but I'm pretty sure that it's possible to send more than that :P
[14:40:48] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[14:40:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/BV2cUA
[14:40:48] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[14:45:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[14:45:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wetscw
[14:45:47] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[14:45:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[14:45:48] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/N8LHfA
[14:45:48] <ghrust> 13rust/06auto 1451998d2 15Seo Sanghyeon: Pass OS to gyp_uv
[14:45:48] <ghrust> 13rust/06auto 14942bc31 15Seo Sanghyeon: Ignore failing tests on Android
[14:45:48] <ghrust> 13rust/06auto 14507a7f0 15bors: auto merge of #9121 : sanxiyn/rust/arm, r=alexcrichton...
[14:45:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[14:47:32] <maik> the one thing I don't understand is that you have to create a mutable buffer before you read the package like https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/net/udp.rs#L186
[14:47:47] <maik> but you don't know the size of the package yet
[14:48:32] <maik> the only thing that I can imagine now is that I have a convention that before I send a package I send the size of the package
[14:48:45] <cmr> maik: the maximum length of a UDP datagram is 65536 bytes. libuv doesn't impose anything on that size.
[14:50:04] <maik> cmr, so how do I know the size of the incoming package then? Like I said above?
[14:50:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:51:06] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[14:52:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:52:22] *** Quits: jaen (jaen@moz-19DCC1F8.neoplus.adsl.tpnet.pl) (Ping timeout)
[14:52:48] <cmr> Very good question.
[14:52:56] <cmr> I have no idea how this is working
[14:54:16] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:56:04] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[14:57:42] <cmr> So what I think is happening is it's putting the first buf.len() bytes into the buffer.
[14:57:47] <cmr> And then... discarding the rest/
[14:57:50] <cmr> Dunno
[14:57:53] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit:  .)
[14:58:14] <cmr> Look in libstd/rt/uv/uvio.rs line 947
[14:58:35] <cmr> And then libstd/rt/uv/net.rs line 358
[14:58:37] <cmr> To try and pick it apart.
[14:58:56] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Quit: github.com/jessehorne)
[14:59:09] <maik> yeah that was what I thought too
[14:59:12] <maik> thanks
[14:59:24] <cmr> You can do --cfg rtdebug when building libstd to get the logging from rtdebug!
[14:59:29] <cmr> I g2g now though
[15:00:14] <maik> okay bye
[15:00:31] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:02:10] *** Joins: jaen (jaen@moz-624AF8D0.play-internet.pl)
[15:03:03] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[15:03:56] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[15:04:44] *** Quits: Blub\w (wry@moz-E83A654C.wireless.dyn.drei.com) (Quit: bb2m)
[15:06:45] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[15:06:45] *** ChanServ sets mode: +o jdm
[15:12:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:14:57] <klutzy> anyone experiencing tests::no_rebuilding_dep failure on `make check`?
[15:15:50] <klutzy> my pr failed due to it, so I locally checked it on linux then the test failed even on master
[15:15:50] <kimundi> klutzy: That sounds like something tjc was talking about yesterday
[15:16:06] <klutzy> kimundi: thanks!
[15:16:06] <kimundi> then again, if it fails on linux, maybe not
[15:16:16] <kimundi> Actually I have no idea :P
[15:16:24] <kimundi> does it involve rustpkg?
[15:16:46] <klutzy> nope. my pr is even totally on windows, but linux bot failed
[15:18:18] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:20:29] *** Joins: bmac (bmac@moz-BDCCF091.hfc.comcastbusiness.net)
[15:20:38] *** Parts: bmac (bmac@moz-BDCCF091.hfc.comcastbusiness.net) (Textual IRC Client: www.textualapp.com)
[15:21:06] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:22:01] *** Quits: jaen (jaen@moz-624AF8D0.play-internet.pl) (Ping timeout)
[15:24:41] <engla> how do I get the verbose compile?
[15:25:16] <klutzy> make VERBOSE=1?
[15:25:30] <klutzy> or you want verbose rustc?
[15:26:08] <engla> no that's good. it wasn't V=1 and grepping for VERBOSE didn't find me anything either
[15:26:13] <engla> VERBOSE=1 it is
[15:28:14] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[15:29:16] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[15:29:37] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[15:31:16] <engla> Is it so, that some warnings that stop the build as errors in stage2, aren't even visible as warnings in stage1?
[15:31:34] <engla> either way, those warnings are annoying as I'd like to catch them as soon as possible
[15:33:52] <kimundi> engla: Yeah, that tripped me up too
[15:34:56] <kimundi> I think it has been disabled to not clutter make output with useless warnings in case of semantic differences between the first two stages
[15:35:29] <adridu59> is rustdoc_ng accessible yet?
[15:35:30] <kimundi> But stage1 should really behave the samse as stage2, or at least warn where stage2 errors...
[15:36:20] <kimundi> adridu59: Well, it landed in master 1 commit ago, but I think it's not yet fully done?
[15:37:47] <adridu59> ok!
[15:37:49] <pnkfelix> engla: are you asking why the warnings are turned off when building stage1 atop the snapshot compiler?  Or do I have the sequence confused here?
[15:37:57] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:38:27] <engla> pnkfelix: I think I am
[15:38:40] <pnkfelix> engla: I had requested that linting from the snapshot compiler be disabled (at the very least it should not cause errors), because I was concerned that bugs in the snapshot compiler cannot be fixed without a snapshot update
[15:39:12] <engla> pnkfelix: but it could warn for "unused import" already in stage1 I think? Instead of waiting to just error on that in stage2
[15:40:07] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:40:18] *** Joins: jaen (jaen@moz-36E8CAA1.play-internet.pl)
[15:40:18] <pnkfelix> engla: if the snapshot compiler's lint is broken with respect to how it detects unused imports,. then no, I would not want that.
[15:40:36] <engla> but it's just a warning
[15:41:22] <pnkfelix> engla: I don't want to have to know which warnings I can ignore (because they came from broken lints in the snapshot compiler) and which one's I have to care about.
[15:42:17] <pnkfelix> engla: Anyway, my memory is that it should not be hard to turn them back on, if one desires that
[15:42:36] <pnkfelix> engla: But I would prefer that such a change only be applied locally, not checked into the repository
[15:43:20] <engla> ok. It's just an annoyance that increases the developer cycle time
[15:45:17] <pnkfelix> engla: look at mk/target.mk
[15:45:23] <kimundi> pnkfelix: Are you talking about warning emitted by stag0 rustc or warning emitted by stage1 rustc?
[15:45:49] <kimundi> or "not emitted" in this case
[15:45:50] <pnkfelix> engla: I think you can modify the setting for WFLAGS_ST0 to get warnings turned back on
[15:46:04] <pnkfelix> kimundi: I'm talking about stage0 rustc
[15:46:16] <pnkfelix> kimundi: I'm pretty sure the settings in mk/target.mk are consistent with what I outlined.
[15:46:28] <kimundi> hm, does 'make check-stage1' compile sources with stage1 rustc?
[15:46:30] <engla> ok; I don't think no warnings is better than might be wrong warnings
[15:46:37] <pnkfelix> kimundi: (along with a comment providing the same reasoning.)
[15:46:54] <pnkfelix> engla: You'll see the most accurate up-to-date warnings after a few minutes
[15:47:04] <engla> that's true with either configuration
[15:47:04] <pnkfelix> engla: I think that's the right trade off for the default set of settings
[15:47:35] <pnkfelix> engla: Yes, but you're talking about having a series of might-be-wrong warnings followed by the up-to-date warnigns.
[15:47:49] <engla> yeah
[15:47:54] <pnkfelix> engla: That is, you made a strawman argument.  Its not "no warnings is better than might be wrong warnings"
[15:48:00] <kimundi> Does engla mean that?
[15:48:20] <engla> pnkfelix: I don't think that's a strawman? that's for the first stage compiled
[15:48:35] <pnkfelix> engla: Its "slightly-delayed accurate warnings" versus "a series of potentially inaccurate warnings followed by the accurate warnings"
[15:48:48] <engla> it's still not a strawman
[15:48:50] <pnkfelix> engla: In other words, I haven't suggested no-warnings in this conversation
[15:49:07] <kimundi> Maybe I misunderstand, but I understood it this way: engla wants stage1: warning, stage2: errors, instead of current stage1: no warning, stage2:errors 
[15:49:10] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[15:49:48] <pnkfelix> kimundi: From my reading of target.mk, the current setup is: stage0: allow-all, stage1: errors, stage2: errors
[15:49:56] <kimundi> hu
[15:50:14] <kimundi> Okay, if that's true then ignore me :P
[15:50:23] <engla> pnkfelix: it doesn't concern what your opinion is. Current configuration is no warnings displayed for the first stage compiled
[15:50:24] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[15:50:42] <kimundi> (I agree with stage0 not showing warnings per default)
[15:50:45] <engla> I think might be wrong warnings are better than that
[15:50:59] <erickt> kimundi / engla: unless someone changed what I did, we should have warnings-are-errors for stage1 and stage2, but warnings are fine for the stage0 and the tests
[15:51:54] <erickt> kimundi / engla: I have a PR queued up but unpushed to turn on warnings-are-errors on the tests, but I'm not sure whether or not we actually want that
[15:52:23] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:53:12] <sebcrozet> Hi. I am working on making ohcount recognize rust.
[15:53:42] <sebcrozet> Could anyone take a look at my patch before I create a PR
[15:53:46] <sebcrozet> https://github.com/sebcrozet/ohcount/blob/fcc2afd6ee070cc524c315d8f30fe9d2f97ab7ad/src/parsers/rust.rl
[15:53:47] <sebcrozet> ?
[15:54:16] <engla> pnkfelix: I'll be clear in that I mean, that I don't think you suggested no-warnings. I'm saying that the current configuration is no-warnings.
[15:54:26] <engla> for the first stage compile
[15:55:14] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:55:37] <pnkfelix> engla: When you say "first stage compile", can you more clearly specify what you are saying?  I.e. are you talking about running stage0/rustc (i.e. the snapshot) to build stage1/rustc ?   Or are you talking about running stage1/rustc ?
[15:55:46] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:55:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/N8LHfA
[15:55:46] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:55:57] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:56:31] <pnkfelix> engla: because I cannot tell if you are saying that there is a bug in how the current settings in target.mk are used, or if you simply disagree with the current settings in target.mk
[15:56:35] <engla> pnkfelix: from the configuration, WFLAGS_ST0 etc it must be when running stage0/rustc right?
[15:56:48] <engla> I'm not saying there's a bug
[15:56:55] <engla> just an annoying configuration IMO
[15:58:05] <pnkfelix> engla: Okay.  It is easy for you to change it locally, even at the command line I think.
[15:58:42] <pnkfelix> i.e. `make WFLAGS_ST0=-Wwarnings`, if i understand correctly.
[15:59:01] <pnkfelix> engla: (in case you don't want to edit any files locally)
[15:59:19] <engla> ok
[16:00:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:00:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/A7pmEA
[16:00:47] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:00:48] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:00:48] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/ipxSpA
[16:00:48] <ghrust> 13rust/06auto 1476c3e8a 15Marvin Lbel: Add an SendStr type...
[16:00:48] <ghrust> 13rust/06auto 140635cb7 15Marvin Lbel: Corrected a few small style issues...
[16:00:48] <ghrust> 13rust/06auto 146bc48b6 15bors: auto merge of #9192 : Kimundi/rust/master, r=huonw...
[16:00:50] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:00:51] *** Quits: maik (maik@moz-2DF9637C.dip0.t-ipconnect.de) (Ping timeout)
[16:01:29] *** Quits: jaen (jaen@moz-36E8CAA1.play-internet.pl) (Ping timeout)
[16:03:26] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[16:05:52] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:07:57] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[16:08:45] <jack> how can rustc compmile a library without access to the compiled dependencies?
[16:09:24] *** Quits: byteitit101 (chatzilla@moz-E1A22FDA.res.wpi.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0/20130803193343])
[16:10:22] <kimundi> jack: I don't think it can
[16:10:27] *** AutomatedTester is now known as AutomatedTester|away
[16:11:01] <kimundi> jack: It needs the meta information in it
[16:11:59] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[16:12:25] *** flaper87 is now known as flaper87|afk
[16:15:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:15:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:15:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:15:36] *** Joins: andrew-d_w (~andrew-dw@moz-9A2674DF.dsl.static.sonic.net)
[16:17:17] *** Joins: maik (maik@moz-E348F31D.dip0.t-ipconnect.de)
[16:18:01] *** Quits: Ralith (ralith@moz-A7071297.customer.broadstripe.net) (Ping timeout)
[16:19:38] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[16:20:12] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:20:41] <erickt> hey all, I'll be submitting a PR soon that adds some traits to simplify converting to/from primitive numeric types. This is so we can auto-generate int-to-enum helper impls. Is everyone okay with std::num::{To,From}Primitive? It's a bit long, but I feel things with "Num" in the name should be reserved for traits that work with non-primitive numeric types
[16:21:33] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: ozten)
[16:21:57] <erickt> It's also going to return Option types since these conversion functions may be partial
[16:22:13] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[16:22:39] <jesseray> Yesterday, I talked about defining data types that accept only the values enumerated by the programmer. I just created an enhancement request on the Github issue tracker for it: #9229.
[16:22:40] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[16:22:56] *** Joins: nkoep (nik@moz-E00EE456.pool.mediaways.net)
[16:23:45] *** jorendorff is now known as jorendorff_away
[16:23:56] <bjz> erickt: it would be good to talk about it on https://github.com/mozilla/rust/issues/4819
[16:24:19] <erickt> bjz: thanks, I'll mention it on there
[16:24:22] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[16:24:25] <cmr> jack: kimundi is correct; one requires the compiled dependencies.
[16:24:55] <kimundi> erickt: If those To/From traits are for intended to be used for enums and similar situations, maybe they don't need to live in num?
[16:25:02] <cmr> jack: However, it really only needs the .note.rustc section, that could be stripped out and distributed separately.
[16:25:10] <bjz> erickt: we were thinking it'd be nice to have Num::from_int and Real::from_float
[16:25:35] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[16:25:42] <jack> cmr: rustpkg is lying to me then. dtrace shows tha tit's not reading or creating any dylibs other than the output one, and it needs two external libs.
[16:25:51] <erickt> kimundi: I'm also getting them to work with primitive->primitive conversions
[16:25:51] <kimundi> erickt: Your PR will allow converting primitive <-> enum variant, right?
[16:25:56] <kimundi> ah, hm
[16:26:03] <kimundi> Don't we already have that?
[16:26:06] <cmr> jack: quite mysterious! Does rustc also do that behavior?
[16:26:10] <erickt> bjz: I already got nice from_int/etc helpers
[16:26:11] <kimundi> rusti: 34f.to_int()
[16:26:12] -rusti- 34
[16:26:16] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[16:26:20] <erickt> kimundi: yep
[16:26:21] <kimundi> rusti: 34i.to_flaot()
[16:26:22] -rusti- <anon>:7:9: 8:5 error: type `int` does not implement any method in scope named `to_flaot`
[16:26:22] -rusti- <anon>:7          34i.to_flaot()
[16:26:22] -rusti- <anon>:8     };
[16:26:22] -rusti- error: aborting due to previous error
[16:26:22] -rusti- application terminated with error code 101
[16:26:23] <bjz> erickt: nice
[16:26:27] <kimundi> :P
[16:26:31] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[16:26:35] <bjz> kimundi: only works for primitives though :(
[16:26:41] <kimundi> yeaah
[16:26:43] <kimundi> yeah*
[16:26:53] <jack> cmr: haven't checked. i wonder if this output is legit.
[16:27:35] <bjz> erickt: thanks a bunch btw!
[16:27:58] <kimundi> erickt: Well if you can make it work in a generic way, then I'm all for it. I had the impression though that that's not really possible yet.
[16:28:02] <erickt> the problem with the current version of .to_i*() is that I feel we should be protecting against out-of-range errors. For example, `5000i.to_i8()` should return `None`. Instead we could have a `to_unchecked_i8()` that just wraps `5000i as i8`
[16:28:26] <erickt> kimundi: I'm also adding `34i.to_float()` support
[16:28:39] <kimundi> rusti: 34i.to_float()
[16:28:40] -rusti- 34
[16:28:44] <bjz> erickt: one issue with that is performance however
[16:29:06] <erickt> bjz: yep. This is a safety vs speed tradeoff
[16:29:13] <bjz> erickt: not that I don't think it's an importnat point
[16:29:34] <kimundi> erickt: I had that discussion a few time :P It ends with "should numeric overflow be checked per default?"
[16:29:52] <cmr> Not overflow in this case, but representability.
[16:29:54] <kimundi> "Is overflow safe or unsafe?"
[16:30:01] <kimundi> Well, yeah
[16:30:05] <kimundi> wrong term from my side
[16:30:12] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[16:30:13] <erickt> yeah, I've been torn whether or not to make this checked or not
[16:30:36] <cmr> I'd have .to_float be checked
[16:30:36] <erickt> for enums, conversions need to be checked
[16:30:41] <bjz> erickt: that's why it'd be good to get input on that thread
[16:30:44] <kimundi> I think the most current opinion is "there should not be a x.to(y) trait, but rather conversion traits for specific conversions"
[16:30:45] <cmr> And have .approx_float for unchecked, to-nearest-float
[16:30:51] *** Joins: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[16:31:14] <cmr> Unrelated to the enum issue, just for ints.
[16:31:16] <erickt> cmr: I was just going to bring up the whole "can't guarantee float conversions are representational" bit
[16:31:24] <kimundi> float.floor_to_int / i8.sign_extend_to_int etc
[16:31:42] <kimundi> i8.zero_extend_to_uint
[16:31:45] <bjz> erickt: you could go with the current example with the operators, which is to have a Checked{Add,Sub,Mul,Div}
[16:32:06] <bjz> erickt: would provide some symmetry
[16:33:03] <kimundi> bjz: Problem is if checked is not the default it might as well not exist at all
[16:33:14] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[16:33:16] <cmr> rust-buildbot: dance
[16:33:17] <rust-buildbot> <(^.^<)
[16:33:18] <rust-buildbot> <(^.^)>
[16:33:19] <rust-buildbot> (>^.^)>
[16:33:19] <rust-buildbot> (7^.^)7
[16:33:21] <rust-buildbot> (>^.^<)
[16:33:51] * zxcdw smells slavery
[16:33:55] <erickt> bjz / kimundi: I'm leaning towards conversions should be checked. It makes sense that Add/etc is unchecked because it's rare to overflow
[16:34:09] <bjz> true
[16:34:21] <kimundi> If people consciously decide they want to check that, they could probably solve it in a better way already.
[16:34:54] <erickt> bjz / kimundi: also, I can write my conversion fns that converting from an i8 to an i16 and etc doesn't do a bounds check
[16:35:17] *** jorendorff_away is now known as jorendorff
[16:35:25] *** Quits: eevee (eevee@moz-D25DD324.evrt.wa.frontiernet.net) (Connection reset by peer)
[16:35:26] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[16:35:30] <kimundi> If checked is the default, then unchecked becomes an conscious optimization you can add optionally.
[16:35:38] *** Joins: rust-nob (Mibbit@moz-3112320B.graz.surfer.at)
[16:35:46] *** rust-nob is now known as rust-noob
[16:35:54] <kimundi> erickt: Well my opinion is that stuff like that should be checked
[16:36:02] <erickt> It'll just require some `if $lhs::bits < $rhs::bits { $lhs as $rhs } else { ... range check ... }`
[16:36:17] <kimundi> erickt: But other people have other opinions, and it's part of a larges design decision.
[16:36:32] *** Quits: sebcrozet (sebcrozet@moz-3CE49532.lrde.epita.fr) (Quit: Konversation terminated!)
[16:36:43] <kimundi> erickt: More complicated than that
[16:36:53] <kimundi> rusti: -4i8 as u8
[16:36:54] -rusti- 252u8
[16:36:58] <rust-noob> hey! How do I write a fn that takes any kind of uint as parameter?
[16:37:00] <kimundi> Is that legal or not?
[16:37:14] <kimundi> rust-noob: ... fn(x: uint) ?
[16:37:34] <rust-noob> does that include u32/u64 etc?
[16:37:34] <erickt> kimundi: I skipped sign-ness, but that'd be another thing we'd have to check
[16:37:44] <kimundi> rust-noob: Or do you mean any numeric type that is an unsigned integer?
[16:38:02] <rust-noob> I think that sounds like the thing I want
[16:38:14] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[16:38:44] <kimundi> rust-noob: fn unsigned_int<I: Integer>(x: I){} unsigned_int(5u8); unsigned_int(34u);
[16:38:55] <kimundi> err
[16:38:59] <kimundi> rusti: fn unsigned_int<I: Integer>(x: I){} unsigned_int(5u8); unsigned_int(34u);
[16:39:00] -rusti- <anon>:7:37: 7:38 warning: unused variable: `x` [-W unused-variable (default)]
[16:39:00] -rusti- <anon>:7          fn unsigned_int<I: Integer>(x: I){} unsigned_int(5u8); unsigned_int(34u);
[16:39:00] -rusti-                                               ^
[16:39:00] -rusti- ()
[16:39:06] <kimundi> yup, works
[16:39:33] <cmr> r? https://github.com/mozilla/rust/pull/9231
[16:39:36] <kimundi> rusti: fn unsigned_int<I: Integer>(_: I){ } unsigned_int(5u8); unsigned_int(34u); "ok"
[16:39:37] -rusti- "ok"
[16:39:42] <engla> rust-noob: you need a trait bound (like Integer in kimundi's example) to write generic functions; and then you can only use the methods of the trait
[16:39:42] <cmr> (blocking rustdoc_web integration)
[16:40:15] <cmr> Oops, left all my debugging code in...
[16:40:23] *** Joins: eevee (eevee@moz-D25DD324.evrt.wa.frontiernet.net)
[16:40:36] <rust-noob> rusti: fn test<T: Unsigned>(a: T){}; test(2u); test(2u64);
[16:40:37] -rusti- <anon>:7:30: 7:31 warning: unused variable: `a` [-W unused-variable (default)]
[16:40:37] -rusti- <anon>:7          fn test<T: Unsigned>(a: T){}; test(2u); test(2u64);
[16:40:37] -rusti-                                        ^
[16:40:37] -rusti- ()
[16:40:51] <rust-noob> does that work too?
[16:41:26] <cmr> PR updated
[16:42:13] <engla> rust-noob: maybe. Unsigned is a trait that inherits Num: Eq + Zero + One + Neg + Add + Sub + Mul + Div + Rem
[16:42:24] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[16:43:26] <myname> zero und?
[16:43:30] <myname> *zero one?
[16:43:47] <rust-noob> hmm, it gives me an error for: fn test<T: Unsigned>(a: T: ,n: T) {}
[16:43:47] <cmr> myname: let you create the additive and multiplicative identities respectively.
[16:44:01] <myname> cmr: ah
[16:44:03] <rust-noob> do you know what it means?
[16:44:08] <rust-noob> error: kind bounds can only be used on trait types
[16:44:17] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[16:44:20] <cmr> rust-noob: you have an extra colon after the T
[16:44:26] <myname> cmr: so i can make my own number system as long as i define addition and multiplication myself?
[16:44:40] <cmr> myname: and all the other operations, sure.
[16:44:48] <myname> i like that
[16:44:49] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[16:45:03] <cmr> See https://github.com/mozilla/rust/issues/4231
[16:45:10] *** jorendorff is now known as jorendorff_away
[16:45:18] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:45:23] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:45:31] <rust-noob> cmr: nice, thank you!
[16:45:42] <rust-noob> engla: also thanks!
[16:45:51] <myname> i hate it when people write "and etc"
[16:45:54] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:46:24] <nathan7> Hey cmr 
[16:46:33] <nathan7> cmr: Is your OS-y stuff up anywhere?
[16:46:43] <cmr> nathan7: Hi! https://github.com/mozilla/rust/issues/4231
[16:46:44] <cmr> Erm
[16:46:45] <rust-noob> rusti: fn unsigned<T: Unsigned>(a: T){}; unsigned(2u64);
[16:46:46] -rusti- <anon>:7:34: 7:35 warning: unused variable: `a` [-W unused-variable (default)]
[16:46:46] -rusti- <anon>:7          fn unsigned<T: Unsigned>(a: T){}; unsigned(2u64);
[16:46:46] -rusti-                                            ^
[16:46:46] -rusti- ()
[16:46:47] <cmr> https://github.com/cmr/cmoss
[16:47:20] <cmr> nathan7: Haven't had a chance to work on it further.
[16:47:40] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[16:49:15] <nathan7> cmr: mhm
[16:49:20] *** Quits: eevee (eevee@moz-D25DD324.evrt.wa.frontiernet.net) (Quit: leaving)
[16:49:32] *** Joins: eevee (eevee@moz-D25DD324.evrt.wa.frontiernet.net)
[16:51:13] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[16:51:41] <engla> rust-noob: if you use a bound like N: Primitive + Unsigned, you'll have all the methods that are only defined for the primitives and still limit to Unsigned
[16:51:46] <engla> rusti: fn f<N: Primitive + Unsigned>(x: N, y: N) -> uint { x.to_uint() * 2 + y.to_uint() }  f(1u32, 1u32)
[16:51:47] -rusti- 3u
[16:52:57] <jesseray> I was just reading some docs on the Github wiki and saw this code: "fn is_success (-path: str) {". The parameter 'path' has a minus sign in front of it. What does that mean?
[16:53:48] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[16:54:04] <kimundi> jesseray: That the wiki page should have been edited/removed a year ago
[16:54:16] <kimundi> That is old, old legacy cruft
[16:54:31] <kimundi> the sign was called a 'mode'
[16:54:46] <kimundi> It was for magic things like automatically pas by reference/copy etc
[16:54:54] <jesseray> Ah.
[16:54:57] <kimundi> there was -, +, ++, && etc
[16:55:00] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[16:55:02] <kimundi> Don'T ask me what they did
[16:55:09] <kimundi> :P
[16:55:16] <jesseray> No need to ask about legacy stuff anyway ;)
[16:55:29] <jesseray> I saw the code on https://github.com/mozilla/rust/wiki/Doc-reading-and-writing-files
[16:55:43] *** Joins: miloshadzic (miloshadzi@moz-89494FC8.dynamic.isp.telekom.rs)
[16:55:46] <jesseray> Shame that such fundamental information would have legacy cruft in it.
[16:55:51] <erickt> kimundi / bjz: I updated https://github.com/mozilla/rust/issues/4819
[16:56:08] *** Quits: sk (sk@BC280AA6.273A3D3C.78DD174B.IP) (Quit: Leaving)
[16:56:16] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[16:56:28] <Amaranth> A long development period with major changes in the language will cause that
[16:56:43] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:56:44] <rust-noob> engla: thank you a lot!
[16:56:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:57:00] * kimundi is sad
[16:58:04] <kimundi> jesseray: That wiki page looks like a thoughfull documentation of the IO system ... As it was a long time ago. As nice as it is written, it should probably be removed completly :(
[16:58:12] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Quit: leaving)
[16:58:26] <kimundi> yep
[16:58:29] <kimundi> rust 0.3
[16:58:54] * kimundi adds a big fat warning at the top
[16:59:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:00:04] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[17:02:27] *** Quits: andrew-d_w (~andrew-dw@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[17:02:35] <kimundi> jesseray: I updated that page with a warning, tell me if you find more outdated docs on the wiki :)
[17:02:56] <jesseray> Will do =)
[17:03:41] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[17:05:38] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[17:05:58] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[17:06:20] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[17:07:47] <jdm> where's fail! defined?
[17:08:21] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:08:36] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:08:36] *** ChanServ sets mode: +ao brson brson
[17:08:38] *** Joins: Kruppe (user@moz-E48AEEC0.net.uwaterloo.ca)
[17:09:08] <brson> let's have a great week, #rust!
[17:09:09] <bjz> jdm: syntax::ext::expand I think
[17:09:19] <bjz> brson: yes sir!
[17:10:18] *** Quits: Kruppe (user@moz-E48AEEC0.net.uwaterloo.ca) (Ping timeout)
[17:10:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:10:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ipxSpA
[17:10:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:10:49] <bjz> jdm: https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/expand.rs#L736
[17:10:52] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:10:55] <jdm> thanks
[17:11:12] <bjz> jdm: macros have to be hardcorded into the compiler atm :(
[17:11:36] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[17:11:38] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[17:11:39] <luisbg> morning peeps
[17:11:41] <luisbg> jdm, o/
[17:11:44] *** Quits: rust-noob (Mibbit@moz-3112320B.graz.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[17:11:53] <pauls> bjz: macros are user-defined; syntax extensions have to be hardcoded
[17:12:36] <pauls> (but macros that are available by default are in expand.rs)
[17:12:56] *** Quits: maik (maik@moz-E348F31D.dip0.t-ipconnect.de) (Ping timeout)
[17:14:24] <bjz> pauls: thats what I meant - poorly expressed
[17:14:39] <benh> Are syntax extensions ever going to be able to be user-defined/dynamically loaded?
[17:14:51] <bjz> would be amazing if you could do foo::bar!()
[17:15:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:15:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HpmKMg
[17:15:45] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:15:47] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:15:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/daYMIw
[17:15:47] <ghrust> 13rust/06auto 14a7515c8 15Lindsey Kuper: Have workcache::test put `foo.c` in the same directory it runs in....
[17:15:47] <ghrust> 13rust/06auto 14250c3d4 15bors: auto merge of #9204 : lkuper/rust/workcache, r=alexcrichton...
[17:15:47] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:17:28] <bstrie> benh: "someday"
[17:17:33] <benh> ok :)
[17:17:44] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:19:06] *** Quits: canhtak (jeremy@moz-E9D07AD7.wl.t.ulaval.ca) (Quit: canhtak)
[17:19:24] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:19:24] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:19:24] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:19:54] *** jorendorff_away is now known as jorendorff
[17:22:44] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:24:02] *** Joins: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr)
[17:24:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:25:02] <jesseray> std::io::read_whole_file(file: &Path) requires Path type. Looking at http://static.rust-lang.org/doc/0.7/std/path.html, I see PosixPath, WindowsPath, and GenericPath, but no plain Path. How am I supposed to use std::io::read_whole_file()? (scratches head)
[17:25:06] *** Joins: ofeldt (ofeldt@moz-4984319B.dip0.t-ipconnect.de)
[17:25:23] *** Parts: kdj (kyle@FA39BFBF.D27A4F86.8BEFA1E3.IP) ()
[17:25:41] <engla> Path is a name for the platform's implementation
[17:25:56] <engla> std::path has a line that says  use Path = self::PosixPath  for example
[17:26:00] <kimundi> jesseray: plain Path does exist, depening on platform it's a typedef for Posix or Windows Path
[17:26:09] <jesseray> Ah.
[17:26:13] *** Quits: ofeldt- (ofeldt@moz-DD06AF4F.dip0.t-ipconnect.de) (Ping timeout)
[17:26:22] <engla> isn't there a trait PathLike?
[17:26:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:27:01] <engla> ah, it's inside rt::io
[17:27:03] <jesseray>  http://static.rust-lang.org/doc/0.7/std/path.html names only one trait: GenericPath.
[17:27:09] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:27:09] *** ChanServ sets mode: +ao brson brson
[17:27:33] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:27:40] <engla> PathLike is to unify &str and Path. That will have to be revisited for byte string paths
[17:28:13] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:28:25] <kimundi> jesseray: The docs are bad :P
[17:29:19] <engla> Path is just hidden in the blind spot of the doc generator
[17:29:24] <kimundi> (Also: are you on 0.7 because OS class or because latest release?)
[17:29:25] *** Joins: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP)
[17:29:27] <engla> rustdoc_ng will show it I think
[17:29:41] <jesseray> I do not have Rust installed right now.
[17:29:51] <jesseray> I'm just reading whatever's available =P
[17:29:52] <kimundi> But you'r looking at 0.7 docs
[17:29:56] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:30:19] <kimundi> (Not that that part is better on the trunk docs)
[17:30:33] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:30:49] <engla> jesseray: you can try it out here http://strcat.zapto.org:8000/
[17:31:01] <engla> not always online but ^^ no install is no excuse to not start hacking
[17:31:06] <kimundi> jesseray: If you have the choice, always use git head - build rust from master, and look at the trunk docs on rust-lang.org
[17:31:25] <tautologico> I open a std::rt::io::FileStream but when I try to use each_line() on it the compiler complains it does not implement std::io::Reader. how do I make it look for the method in std::rt::io::Reader? 
[17:31:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:32:37] <engla> you have to do  use std::rt::io::Reader
[17:33:00] <engla> this is the same for every trait that's not in the prelude.rs
[17:33:09] <tautologico> did it
[17:33:11] <tautologico> same problem
[17:33:38] <engla> ah, but each_line() is not implemented for rt::io::Reader
[17:33:48] <engla> there is no line iterator for the new IO
[17:33:50] <tautologico> I see
[17:33:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:34:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:34:36] <tautologico> misled by code comments (in libstd/rt/io/mod.rs)
[17:35:04] <engla> very misleading! stdin() is likewise unimplemented ^^
[17:35:25] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[17:35:40] <brson> those comments are aspirational. sorry
[17:36:00] <brson> rt::io is essentially still experimental
[17:36:12] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:36:32] <tautologico> I was using the old IO but then was told to use the new IO 
[17:37:06] <tautologico> but simple reads suffice for now, I don't need each_line
[17:37:34] <kimundi> tautologico: Both are bad choices right now, for different reasons. :(
[17:37:47] <tautologico> kimundi: :)
[17:37:57] <engla> the new IO API is much saner w.r.t error handling
[17:38:09] <tautologico> I guess that's to be expected, but IO is so basic
[17:38:19] <tautologico> "basic" as in almost everyone needs it
[17:38:28] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[17:38:39] <cmr> tautologico: That's why it's important to get right.
[17:38:48] <tautologico> cmr: sure
[17:39:51] <strcat> brson: I think it would be better to use conditions in the functions where the purpose isn't the return value, and use Result in the ones returning (instead of Option)
[17:40:07] <strcat> since atm you have to deal with both
[17:40:12] <strcat> instead of one or the other
[17:41:01] <strcat> (as in, use conditions in ones like write so you can't miss them but can ignore them, use Result for ones like open with an enum of error types)
[17:43:36] *** Joins: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:44:14] *** Joins: victorporof_ (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[17:44:24] <jesseray> kimundi, I am new to git. When you tell me to use git head, do you mean git clone git@github.com:mozilla/rust.git -b master ?
[17:44:58] <steveklabnik> jesseray: 'git HEAD' means the latest commit off of the master branch, yes
[17:45:07] *** Quits: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Ping timeout)
[17:45:59] <steveklabnik> jesseray: what kimundi means is that rust is so young that generally, it's better to operate 'on the edge'. old release don't have any support, and generally people assume you're using latest master right now
[17:46:29] <engla> jesseray: just this is fine if you don't need ssh   git clone https://github.com/mozilla/rust
[17:46:44] <strcat> and we have nice continuous integration so master is never really broken
[17:46:46] <jesseray> that's so much simpler
[17:47:00] <engla> yup, just the website URL
[17:47:02] *** Quits: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[17:47:35] <jesseray> Cloning =)
[17:47:49] <steveklabnik> when did the Option stuff land?
[17:47:54] <steveklabnik> and_then and such
[17:48:10] <cmr> Earlier this week
[17:48:14] <steveklabnik> okay. hm.
[17:48:15] <cmr> Thursday I think?
[17:48:28] <steveklabnik> i've built before then but i'm getting errors relating to it
[17:48:33] <steveklabnik> maybe i built earlier than i thought
[17:48:58] <steveklabnik> ya apparently i built on 9-10, cool
[17:50:02] <steveklabnik> ahh, i bet that i haven'
[17:50:06] <steveklabnik> t fetched since then. anyway.
[17:50:16] <bstrie> steveklabnik: learning ruby today... wondering how much ire I'm going to draw if I never elect to omit parentheses, and always uses braces instead of do/end :P
[17:50:26] <bstrie> steveklabnik: I think you need to start work on "ruby for rustists"
[17:50:51] *** Joins: Kruppe (user@moz-1AAE37C6.net.uwaterloo.ca)
[17:50:58] <cmr> Hah
[17:51:18] <jesseray> rusties? =P
[17:51:34] <steveklabnik> bstrie: when someone gives you shit about braces, just say "Jim Weireich"
[17:51:39] <bstrie> noted
[17:51:40] <steveklabnik> :)
[17:51:48] <bstrie> now let's talk about these "optional" semicolons...
[17:51:55] <steveklabnik> (he's the guy who wrote rake, he uses {} always)
[17:51:58] <steveklabnik> ha!
[17:52:09] <steveklabnik> the only really, really, really big one
[17:52:11] <steveklabnik> is two spaces
[17:52:12] <steveklabnik> forreals
[17:52:16] *** Joins: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:52:28] <steveklabnik> I think the interpreter alerts the local authorities if you don't. ;)
[17:52:30] <kimundi> two spaces?
[17:52:32] <bstrie> ok
[17:52:34] <steveklabnik> yeah, no tabs
[17:52:35] <bstrie> I'm fine with that
[17:52:38] <kimundi> intentation?
[17:52:38] <steveklabnik> two space indents
[17:52:44] <kimundi> ah
[17:53:01] * kimundi is going to happily ignore that and use 4
[17:53:06] <steveklabnik> anyway, let me know if you need any help with Ruby code
[17:53:10] <steveklabnik> kimundi: rust is 4, ruby is 2
[17:53:26] <benh> two spaces after your periods, of course!
[17:53:30] <kimundi> but... 2 is so tiny! :P
[17:53:32] <steveklabnik> bstrie: Ruby is stupid simple, which is why it can seem complicated. especially when it comes to metaprogramming
[17:53:34] <bstrie> two spaces after each semicolon
[17:53:40] <cmr> Hahah
[17:53:44] <bstrie> steveklabnik: something something proc block lambda
[17:53:56] <steveklabnik> yeah.
[17:53:58] <benh> boo
[17:54:12] <steveklabnik> in practice it's not that bad, things Just Work. you don't need to care 99.99% of the time
[17:54:17] <bstrie> ok good
[17:54:23] <bstrie> sounds fun
[17:54:36] <steveklabnik> i don't EVER remember hitting a real bug that comes from that
[17:54:42] * kimundi tried to used higher order functions in ruby once... He had to try all three till it worked
[17:54:43] <steveklabnik> it's just trivia
[17:55:05] <bstrie> kimundi: just write a wrapper that delegates all HOF to rust code
[17:55:15] <kimundi> bstrie: hah
[17:55:17] <steveklabnik> hey, i'm halfway there :p
[17:55:21] <benh> I've run into "whoops, can't use return here, used the wrong closure syntax" problems before, but it's always been noisy exceptions, no silently wrong behavior
[17:55:24] <steveklabnik> i think it's just my FFI
[17:55:54] <steveklabnik> i'm wondering if i want to write a little C layer myself and ffi into _that_
[17:55:57] <steveklabnik> we'll see, I guess
[17:56:15] <kimundi> bstrie: The ruby code I talk about is an adhoc refactoring tool for rust code, I don't think it needs to get closer than that. :P
[17:57:17] <benh> aw, my go-to ruby tutorial/reference/book website has gone away
[17:57:23] <kimundi> what are the differences between proc/block/lambda anyway? In 3 short sentences please :P
[17:57:50] <benh> That's what I was going to look up (and I'm too lazy to get my dead-tree book)!
[17:57:52] <steveklabnik> kimundi: proc vs lambda is where 'return' returns to. lambda: just returns from lambda. proc: returns from calling scope
[17:57:56] <steveklabnik> i think
[17:58:05] <bstrie> wait I thought you were like the ruby master :|
[17:58:07] <steveklabnik> blocks are syntax for making what's basically a proc
[17:58:09] <bstrie> how can you just not know?!
[17:58:17] <steveklabnik> because it literally never matters
[17:58:20] <bstrie> haha
[17:58:23] <steveklabnik> :)
[17:58:26] <benh> iirc there's also that one of them doesn't complain about the number of parameters and just inserts nil/discards them
[17:58:35] <steveklabnik> yes, that's a feature of one of them too
[17:58:48] <steveklabnik> also, it's all different from 1.8 to 1.9 ;)
[17:59:01] <steveklabnik> if you look at it that way, there's 7 variants i think
[17:59:04] <kimundi> This simultaneously clears things up and muddles them further for me :P
[17:59:19] <kimundi> What about 2.0?
[17:59:32] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:59:34] <bstrie> steveklabnik: also I want to yell at someone for making 1.8->1.9 the backwards-incompatible release
[17:59:57] <bstrie> couldn't they have just called 1.9 Ruby3k
[17:59:58] <steveklabnik> bstrie: ruby versioning is a whole nother story, just ignore the first . it's ruby 18 and ruby 19
[18:00:08] <steveklabnik> kimundi: 2.0 is basically backwards compatible with 1.9.3
[18:00:24] <kimundi> so, 1.9.3 is another break?
[18:00:38] <steveklabnik> ruby 1.9 has two versions: 1.9.2 and 1.9.3
[18:00:49] <steveklabnik> they are vastly compatible, but i think one or two little things broke, maybe
[18:00:51] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:01:36] <benh> I got really mad at ruby 1.9 when they fixed(?) unicode handling and it didn't Just Work when I tried to compare a string read from an utf-16 file against a string literal :(
[18:01:44] <steveklabnik> anyway, ruby is going to be mega stable in the future. nothing is changing till 3.0, which matz thinks is a decadeish
[18:02:10] <steveklabnik> benh: yeah, internally it got fixed, but in order to keep compat, you need magic comments and such
[18:02:19] <steveklabnik> in 2.0 everything defaults to utf8 and it's all groovy
[18:02:32] *** Joins: rust-noob (Mibbit@moz-3112320B.graz.surfer.at)
[18:03:02] <benh> Did they ever get around to implementing scoped "monkeypatching"?
[18:03:16] <rust-noob> hey! has anyone of you a little bit of time on your hands? I really need help with a piece of code of mine! :/
[18:03:21] <steveklabnik> 2.0 shipped it as an 'experimental' feature, benh 
[18:03:29] <rust-noob> it's this gist: https://gist.github.com/flo-l/239467e5639c07364d73
[18:03:38] <steveklabnik> 2.1 will supposedly ship it as 'final', though the community is largely screaming bloody hell.
[18:03:58] <rust-noob> how do I allow people to check bigger prime numbers, eg. u64 ?
[18:04:33] <rust-noob> I already asked a related question 2 hours ago or so, but I couldn't find a proper solution :(
[18:05:38] <strcat> rust-noob: make it a generic function? we do have big integers in the stdlib
[18:05:49] <benh> uint is already u64 isn't it
[18:06:02] <bstrie> strcat: last time I checked I couldn't find any docs or examples for bigints anywhere
[18:06:17] <strcat> well it's not like there are examples for uints anywhere ;p
[18:06:18] <bstrie> this was a while ago though
[18:06:49] <rust-noob> I can't get a generic function to work, I don't know the names of the traits I need :P
[18:07:17] <rust-noob> for example, does the BitWise trait implement all bitwise operators?
[18:07:21] <rust-noob> like << etc?
[18:08:01] <strcat> the operator traits are defined in std::ops
[18:08:17] <bstrie> rust-noob: the operator overloading traits are found in https://github.com/mozilla/rust/blob/master/src/libstd/ops.rs
[18:08:33] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:09:13] <rust-noob> nice, thanks!
[18:10:13] <rust-noob> so, just to check I got everything right: I need to do something like fn prime<T: Unsigned + Shr + Primitive + etc. >(n: T) {}
[18:10:42] <strcat> well I think Shr takes generic parameters, so probably Shr<T, T> iirc
[18:10:48] *** Quits: fabiand (fabiand@moz-F0FC23CB.adsl.alicedsl.de) (Quit: Verlassend)
[18:11:29] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[18:13:03] <rust-noob> ah ok!
[18:14:14] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:14:29] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[18:14:51] *** Quits: Kruppe (user@moz-1AAE37C6.net.uwaterloo.ca) (Ping timeout)
[18:15:22] <steveklabnik> okay, today, i'm writing better rustpkg docs. any existing links other than http://tim.dreamwidth.org/1820526.html i should know about?
[18:15:39] <cmr> steveklabnik: you've seen the manual right?
[18:15:53] <cmr> https://github.com/mozilla/rust/blob/master/doc/rustpkg.md
[18:16:09] <steveklabnik> yes!
[18:16:26] <steveklabnik> that's what i plan to improve
[18:16:40] <steveklabnik> it is super freaking confusing. or at least was to me, over the last few days. :)
[18:16:47] <nmatsakis> strcat: pong (long delayed)
[18:17:01] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:17:05] <strcat> nmatsakis: I forget what I wanted now :)
[18:17:21] <strcat> something something closures something
[18:17:46] <nmatsakis> strcat: ok :)
[18:18:47] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[18:19:06] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:19:06] *** ChanServ sets mode: +o tjc
[18:20:01] *** Quits: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP) (Ping timeout)
[18:20:06] *** Joins: maik (maik@moz-E348F31D.dip0.t-ipconnect.de)
[18:20:34] *** Joins: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP)
[18:20:59] <steveklabnik> tjc: i want to help write better docs for rustpkg today. any links other than the manual and http://tim.dreamwidth.org/1820526.html i should know about?
[18:21:12] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:21:29] <tjc> steveklabnik: No -- though following the link in my blog post to the Go package manager might provide some extra background for some of the design choices
[18:21:31] <tjc> and thanks!
[18:21:35] <nmatsakis> strcat: btw I'm working on #3511, which turns out to be something of a pre-requisite to the work I was doing on closures and zeroing out moves (mainly because I want to fixup the rules for dtors, so that we can replace a lot of closures with RAII...). Mainly i'm just trying to warn people who might be mucking about in trans
[18:21:36] <tjc> I'd love some help with docs
[18:22:14] *** Quits: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP) (Ping timeout)
[18:22:29] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[18:22:30] <tjc> steveklabnik: looking at https://github.com/mozilla/rust/issues?direction=desc&labels=A-pkg&page=1&sort=created&state=open may also be helpful to find out about planned features
[18:22:34] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Ping timeout)
[18:22:56] *** Quits: miloshadzic (miloshadzi@moz-89494FC8.dynamic.isp.telekom.rs) (Ping timeout)
[18:22:58] <steveklabnik> awesome, thanks
[18:23:13] <steveklabnik> i used it for the first time yesterday, and i was asking a bunch of dumb questions on here because i was confused.
[18:23:22] *** Quits: rust-noob (Mibbit@moz-3112320B.graz.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[18:23:24] <steveklabnik> i'm hoping to capture that noobishness and write down what i figured out
[18:23:34] <steveklabnik> so that others need not noob in the future :)
[18:23:39] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Ping timeout)
[18:23:40] *** Joins: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP)
[18:23:58] <steveklabnik> rubygems is one of my favorite parts of Ruby, so getting all this well doc'd up for Rust is important to me :)
[18:25:43] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[18:25:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:25:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/daYMIw
[18:25:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:26:03] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Quit: Leaving)
[18:26:31] <tjc> steveklabnik: well, I don't think I was there for all your questions, but I doubt any of them were silly questions, since any question reflects something the documentation could address better :-)
[18:27:56] <steveklabnik> :)
[18:28:15] <steveklabnik> some of them were about crates, so it wasn't all rustdoc
[18:28:41] <steveklabnik> i'm working on embedding ruby in rust, for fun-sies.
[18:29:39] <olsonjeffery> so is someone aggressively deleting tickets from the github issue tracker? i have a few tickets ive created recently that seem to have.. gone away?
[18:29:45] <olsonjeffery> or im totally missing something.
[18:30:07] *** Joins: fabiand (fabiand@moz-F0FC23CB.adsl.alicedsl.de)
[18:30:25] <olsonjeffery> eg i made a ticket last week with notes about needed work to make the runtime/eventloop pluggable
[18:30:32] <kimundi> olsonjeffery: Tickets should never be deleted, just opend or closed
[18:30:44] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:30:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3iz9TA
[18:30:44] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:30:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:30:47] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/amiMWQ
[18:30:47] <ghrust> 13rust/06auto 14d2ce83c 15klutzy: std::rt::io::file: Enable I/O tests on Win32...
[18:30:47] <ghrust> 13rust/06auto 141e745f1 15klutzy: std::rt::io::support: Fix ignored test on Win32...
[18:30:47] <ghrust> 13rust/06auto 14f3c8882 15klutzy: std::os: Use unicode for last_os_error() on Win32...
[18:30:48] <bstrie> it's not even possible to delete tickets
[18:30:48] <bstrie> afaik
[18:30:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:31:19] <olsonjeffery> kimundi: that's what i thought, as well. but im going back and not seeing any of the tickets i created.
[18:31:26] <olsonjeffery> maybe i only created them in my head, heh.
[18:31:36] <kimundi> olsonjeffery: However, one possibility: You've been shadow banned, which makes all tickets you've spend invisible to others. Happend to me once too :P
[18:31:59] <bstrie> olsonjeffery: https://github.com/mozilla/rust/issues/created_by/olsonjeffery?state=open ?
[18:32:54] <olsonjeffery> bstrie: woah that is so weird
[18:32:59] <olsonjeffery> im logged in as me.. and ooking at issues
[18:32:59] <engla> the issue list keeps your filters from last time you looked at it, might be that
[18:33:09] <olsonjeffery> and none of those tickets show. hm. maybe what engla said.
[18:33:11] <olsonjeffery> thanks github.
[18:33:19] <tjc> olsonjeffery: Yeah, try clearing label and milestone filters
[18:33:31] <olsonjeffery> yeah that's it. pebkac. move along, nothing to see here.
[18:33:47] <bstrie> kimundi: does github actually have shadowbanning?
[18:33:58] <strcat> yes
[18:34:08] <strcat> and it's automatic
[18:34:25] <strcat> they detect you are a spammer (with some dubious heuristics) and hide all your issues/comments
[18:34:34] <strcat> (for everyone but you)
[18:35:09] <kimundi> bstrie: It where a few confusing days... I would create an gist, and then could not see it afterwards :P
[18:35:14] <tjc> olsonjeffery: As far as I can tell, you're not banned
[18:35:19] *** Quits: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP) (Ping timeout)
[18:35:22] <olsonjeffery> tjc: its the milestone/filter thing
[18:35:26] <tjc> olsonjeffery: ah, great
[18:36:16] *** Joins: nejucomo_ (Adium@moz-AC868E2D.hfc.comcastbusiness.net)
[18:36:51] * kimundi likes how we'Re hovering at 1337 issues right now
[18:37:03] <bstrie> it is our natural equilibrium
[18:37:28] *** Quits: nejucomo_ (Adium@moz-AC868E2D.hfc.comcastbusiness.net) (Quit: Leaving.)
[18:37:40] <benh> my github username approves
[18:38:44] <jack> acrichto: welcome to Moz :)
[18:38:46] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:38:55] <acrichto> jack: thanks :)
[18:38:58] <tjc> acrichto: yeah, welcome!
[18:39:12] <acrichto> tjc: :)
[18:39:33] <bstrie> wait is acrichto like a full time rust developer now
[18:39:43] <acrichto> first day is today!
[18:39:46] <bstrie> !!!!
[18:39:54] <kmc> \o/ welcome acrichto!
[18:40:02] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[18:40:16] <tjc> bstrie: the kind who gets paid for it, anyway :-)
[18:40:16] *** Joins: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP)
[18:40:38] *** Quits: victorporof_ (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Ping timeout)
[18:41:09] * cmr worked full-time on rust over the summer
[18:41:15] <bstrie> haha
[18:41:23] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:41:33] <bstrie> cmr: maybe you can tell the IRS that you donated your time, at $50/hour, to a charitable organization
[18:41:37] <cmr> heh
[18:42:03] <tjc> bstrie: that wouldn't fly, the Mozilla Corporation is for-profit
[18:42:13] <tjc> (it just so happens to be wholly owned by the non-profit Mozilla Foundation)
[18:42:26] <kimundi> haha
[18:42:34] * kimundi didn't know that
[18:42:35] <bstrie> yeah that still makes no sense to me
[18:42:55] * cmr didn't know there was more than one mozilla
[18:43:08] <tjc> bstrie: It's like a company that has shareholders, except we only have one shareholder
[18:43:33] <luisbg> I never fully understood the Corporation vs/and/or Foundation
[18:43:38] <luisbg> why the need for two entities
[18:43:42] <luisbg> and how they can co-exist
[18:43:44] <tjc> luisbg: tax reasons
[18:43:58] <luisbg> tjc, can you explain it to me (in PM if it is private)?
[18:44:02] <luisbg> just curious
[18:44:03] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[18:44:09] <luisbg> cmr, o/
[18:44:12] <tjc> luisbg: Sure -- it's not private, but is a bit off-topic, so I'll PM
[18:44:12] <cmr> \o
[18:44:18] <bstrie> I'm sure there's some mozilla webpage somewhere to describe this...
[18:44:44] <kimundi> uh
[18:44:45] <kmc> luisbg: they co-exist by one owning the other, which is pretty common for corporations
[18:44:54] <kimundi> who here is responsible for rustdoc_ng?
[18:44:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:45:01] <bstrie> kimundi: cmr_ng
[18:45:12] <cmr> kimundi: hi
[18:45:19] <luisbg> <- not affiliated to Mozilla, btw
[18:45:19] <cmr> bstrie: mind making that my reddit flair? :D
[18:45:41] *** Joins: nejucomo_ (Adium@moz-AC868E2D.hfc.comcastbusiness.net)
[18:45:42] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:45:42] *** ChanServ sets mode: +o pnkfelix
[18:45:43] <kimundi> cmr: "no-defult-passes" ;)
[18:46:04] <bstrie> cmr: asking for flair will get you nowhere!
[18:46:13] <bstrie> read the final paragraph of the community rules
[18:46:25] <kimundi> cmr: (type on command line arg)
[18:46:34] <kimundi> (typo*)
[18:46:39] <cmr> well look at that!
[18:46:45] <cmr> I heard mitsuhiko requested his :(
[18:46:56] <bstrie> cmr: mitsuhiko was grandfathered in, he asked before the rule was in effect
[18:47:14] <cmr> feh
[18:47:41] <brson> I'm going to fix the valgrind issues now and make a snapshot
[18:47:54] <luisbg> \o/
[18:48:06] <bblum> is ecr gone now?
[18:48:09] <kimundi> yay, snapshots \o/
[18:48:14] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:48:26] <bstrie> bblum: I think yesterday was his last day?
[18:48:32] <bblum> 'yesterday'
[18:48:38] <tjc> bstrie: Friday, technically :-)
[18:48:52] <bstrie> time means nothing to me
[18:48:54] <tjc> bblum: his internship ended, it's up to him whether he wants to keep contributing :-)
[18:48:58] <bblum> right
[18:49:04] *** Joins: afrey71 (Mibbit@moz-C3B9248E.whatbox.ca)
[18:50:07] <bstrie> someone should make a post to the mailing list to formally welcome acrichto to the team
[18:50:43] <bstrie> i.e. someone should give me something with which to reap internet karma
[18:51:05] <acrichto> bstrie: I'm going to send a post later today
[18:51:07] <tjc> bstrie: I see what you did there
[18:51:16] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[18:52:10] *** Quits: nejucomo_ (Adium@moz-AC868E2D.hfc.comcastbusiness.net) (Quit: Leaving.)
[18:52:58] *** Joins: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[18:53:06] *** Joins: jviereck (Adium@moz-2E6DC681.dip0.t-ipconnect.de)
[18:53:38] *** Joins: victorporof_ (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[18:53:39] *** Joins: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP)
[18:53:43] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:54:28] <bblum> acrichto: oh, welcome to the team
[18:54:31] <bblum> welcome from afar :P
[18:54:37] *** Quits: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Ping timeout)
[18:55:06] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[18:55:12] <acrichto> :)
[18:56:38] *** Joins: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro)
[18:57:02] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:58:36] *** AutomatedTester|away is now known as AutomatedTester
[19:00:18] *** Joins: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net)
[19:02:43] *** Joins: nejucomo_ (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:03:46] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[19:04:52] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[19:04:58] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[19:07:10] *** jorendorff is now known as jorendorff_away
[19:08:04] <cmr> Hm, this is a new bug.
[19:08:12] <cmr> task <unnamed> failed at 'index out of bounds: the len is 1 but the index is 2', /home/cmr/hacking/rust/src/rustdoc_ng/lib.rs:1
[19:08:18] <nejucomo_> Where can I read about how to write unittests?
[19:08:21] *** nejucomo_ is now known as nejucomo
[19:08:33] <cmr> Anyone seen that? (That file+line is the license comment)
[19:08:34] <luisbg> where is core::pipes now? need stream, Port and Chan
[19:08:52] <cmr> luisbg: std::comm and extra::comm have a lot of that sort of stuff
[19:09:02] <cmr> nejucomo: https://github.com/mozilla/rust/wiki/Doc-unit-testing
[19:09:09] <luisbg> grepping around the filenames in Rust src/lib* didn't help find it
[19:09:27] <luisbg> cmr, how should I search in the future for the new locations? (or other available libs)
[19:09:53] <brson> luisbg: std::comm. they are also in the prelude so the things you listed should always be available
[19:10:08] <cmr> luisbg: I do `ag '(struct|enum|trait) Port'`
[19:10:29] <luisbg> brson, libstd is imported by default, right? (just checking that is what you meant with prelude)
[19:10:50] <cmr> luisbg: libstd is included by default. the prelude is imported by default.
[19:11:01] <luisbg> cmr, cool! thanks
[19:11:05] <cmr> If you look at the output of `rustc --pretty=expanded`, you'll see a `use std::prelude::*` all over the place.
[19:11:43] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[19:12:29] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[19:12:37] <luisbg> cmr, true, nice
[19:14:37] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[19:14:42] <afrey71> Is there any way of modifying elements contained in an owned enum?
[19:14:54] <jdm> cmr: in my experience, those bounds errors come from items involving region pointers
[19:14:55] <sw17ch> Any one know the progress of running Rust on ARM/Android?
[19:14:56] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[19:15:08] <sw17ch> i've not asked for a few weeks, so I'll ask again. :P
[19:15:09] <cmr> sw17ch: It works.
[19:15:24] <afrey71> Using match, the contained element gets moved or copied, and with 'ref mut', I only get a borrowed pointer, not an owned thingie.
[19:15:29] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[19:15:31] <sw17ch> cmr: does it only work with Android?
[19:15:51] <cmr> sw17ch: No, it also works just fine on other ARMs. https://github.com/jensnockert/dueboot for example.
[19:15:55] <Luqman> sw17ch: no it mostly works on arm/linux too
[19:16:16] <kimundi> luisbg: You can also read about how the automatic prelude and std insertion works in the new module tutorial. :)
[19:16:37] <jesseray> luisbg: stream, port, chan: http://static.rust-lang.org/doc/std/comm.html
[19:16:51] <sw17ch> cmr, Luqman: oh neat. i'd really like to try and get it running/targeting an STM32F4 Discovery board.
[19:16:57] <jdm> afrey71: what are you trying to do that doesn't work with a borrowed pointer?
[19:17:08] <kimundi> afrey71: Well, those are the only options :P Either move out of the enum variant, or modify it in place with an mutable reference
[19:17:10] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[19:17:21] <sw17ch> https://github.com/neykov/armboot
[19:17:22] <sw17ch> hah
[19:17:26] <sw17ch> which is pretty much exactly that
[19:17:55] <olsonjeffery> klutzy: \o/
[19:18:13] *** victorporof_ is now known as victorporof
[19:18:20] <afrey71> i.e in something like this: http://pastebin.com/0eZuKh1Y
[19:18:21] <kimundi> cmr: So, rustdoc_ng runs parse, resolve, typcheck etc. Does it end up with an temporary representation of the whole crate including function bodies, or does it stop before that?
[19:18:40] <brson> what important features were added to 0.8?
[19:18:46] <afrey71> Is it possible for recursive_replace to modify contents of 'parent' without much of a cloning dance?
[19:18:55] <tjc> brson: rustpkg is a lot more mature -- IDK if we want to call it "ready"
[19:18:57] <olsonjeffery> brson: is the 0.8 line drawn, already?
[19:18:57] <cmr> kimundi: Well what do you mean?
[19:19:08] <cmr> kimundi: It has the entire typechecked, resolved AST
[19:19:09] <olsonjeffery> brson: im on the verge of a FileInfo/DirectoryInfo PR
[19:19:15] <olsonjeffery> very very close.
[19:19:44] <brson> olsonjeffery: two weeks
[19:19:47] <olsonjeffery> whew!
[19:20:02] <kimundi> cmr: Things like finding every use of an type anywhere in an crate
[19:20:14] <luisbg> kimundi, I see this: https://github.com/mozilla/rust/pull/8777
[19:20:18] <cmr> kimundi: Yes, it can do that.
[19:20:20] <luisbg> kimundi, but not where the actual tutorial is hosted
[19:20:21] <kimundi> cmr: Sorry if I can't be more specific, I still don't know enough about the internals :P
[19:20:23] <olsonjeffery> generic parameters on associated methods, lack thereof, is a "new feature" of sorts
[19:20:35] <kimundi> luisbg: rust-lang.org :)
[19:20:43] <jdm> http://static.rust-lang.org/doc/tutorial.html
[19:21:00] <luisbg> kimundi, oooh... so the module section of THE Tutorial :)
[19:21:04] <luisbg> jdm, thanks
[19:21:54] <kimundi> cmr: So, if I only look at what rustdoc uses, I would have everything I need for an refactoring tool? Just asking because rustc is still to complicated for me to understand.
[19:22:04] <kimundi> luisbg: ah, yeh. Sorry :)
[19:22:30] <cmr> kimundi: No, I don't ever touch function bodies or expressions.
[19:22:38] <cmr> rustdoc just visits the items of a crate.
[19:23:01] <cmr> The information is there, I just don't touch it.
[19:23:06] <kimundi> cmr: Okay, so that's still something I'd have to pull in myself... hmm
[19:23:08] <luisbg> kimundi, thanks
[19:23:52] <kimundi> cmr: Ah, wait. The information is there in an data structure in ng, ng itself just doesn't use it? That's fine with me.
[19:24:12] <cmr> kimundi: No, it's in a datastructure I get from libsyntax.
[19:24:49] <kimundi> Now I'm confused :P Isn't libsyntax just for the parsing and macro part?
[19:25:00] <cmr> Yes, and contains the AST.
[19:25:09] <cmr> I massage it into a form useful for json
[19:25:12] <cmr> but that's basically it
[19:26:25] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:26:26] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:26:37] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:26:37] <kimundi> cmr: Okay, so you start with the AST, which is necessary anyway, but then you run additional compile passes to actually get the semantic meaning of it, right? 'This use statement points at this module in this crate', etc.
[19:26:41] <strcat> brson: new for loop syntax is the big one, I guess
[19:27:07] <olsonjeffery> and all of the std::iter work probably is a signifigant new feature
[19:27:11] <cmr> kimundi: Yes, this is what happens in core.rs
[19:27:16] <olsonjeffery> strcat: was just gonna say that, as a prefix to my statement, heh
[19:27:17] <bstrie> brson: runtime-in-rust was 0.8, yeah? that's pretty important
[19:27:25] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[19:27:26] <olsonjeffery> bstrie: it was in 0.7, but off by default
[19:27:31] <olsonjeffery> its received a lot of attention subsequently
[19:27:56] <olsonjeffery> but given that that is his baby, i assume he can expand on it better than any of us
[19:28:02] <bstrie> brson: you could just skim all the TWiR posts since 0.7 for a summary of important features
[19:28:09] <cmr> Oh, yes!
[19:28:13] <olsonjeffery> bstrie++
[19:28:21] <cmr> Handily delineated in the archives by "The State of Rust"
[19:28:25] *** Joins: lkuper_ (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:29:00] <olsonjeffery> there is where we all condemn cmr for not publishing a weekly json manifest of TWiR, grouped by tenatively version at time of publishing
[19:29:15] * bstrie heaps condemnation
[19:29:25] <afrey71> kimundi: well, a borrowed pointer cannot be returned.
[19:29:28] * olsonjeffery stacks further
[19:29:51] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:29:55] <cmr> jdm: Hm, I think it's trying to point to the inside of a closure.
[19:30:06] <afrey71> kimundi: I'm thus passing an owned pointer to the recursive_replace() function in my example and letting it return back one.
[19:30:10] <kimundi> cmr: So, you get an logical view of the module hierarchy and all definitions in it. Does the processing stop there? Is it easy to continue from there to also get a complete analysis of function bodies/expressions?
[19:30:22] <jdm> cmr: context?
[19:30:34] <kimundi> cmr: Sorry for asking all these questions, I'd really like to understand the compiler better in this regard.
[19:30:41] <cmr> http://i.imgur.com/5CxjAht.png is what I'm seeing
[19:30:53] <jdm> oh, right
[19:30:59] <cmr> kimundi: I filled in http://cmr.github.io/blog/2013/06/30/structure-and-organisation-of-rustc/ a bit
[19:31:14] <strcat> afrey71: std::trie and extra::treemap are examples of recursive owned data structures without clone/unsafe
[19:31:16] <cmr> kimundi: So, the way I can access rustc basically does everything except translation.
[19:31:37] <afrey71> strcat: thanks, I'll have a look.
[19:31:40] <cmr> kimundi: And then *I* pull out the item heirarchy, and stop there.
[19:32:05] <cmr> kimundi: You could look a bit at doctree.rs
[19:32:11] <kimundi> afrey71: Okay, what you have there is a bit of a problem, because it measnn tmeporary moving out of the enum variant, even if you directly move right back into it
[19:32:19] <cmr> kimundi: Erm, visit_ast.rs, that is :)
[19:33:13] <maik> cmr, what editor are you using? is this emacs?
[19:33:22] <cmr> maik: vim
[19:33:26] <cmr> plus tmux
[19:33:39] <kimundi> cmr: I'm having the files open, just wanted to confirm that they actually contain what I'm looking for. :) I'm still unsure if some regards - Does the AST just contain the syntactic structure of a crate, or does it also carry semantic informations after later passes?
[19:33:56] <cmr> kimundi: semantic information such as?
[19:34:28] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[19:34:31] <afrey71> kimundi: yeah, I don't really want to move (or copy).
[19:34:39] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Quit: Leaving)
[19:34:44] <bstrie> afrey71: moves are cheap
[19:34:52] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:34:53] <kimundi> cmr:  'this points at module X/ has type Y/ is invalid in this context'
[19:35:06] <cmr> kimundi: Ok, so some of that is gotten from https://github.com/mozilla/rust/blob/master/src/rustdoc_ng/clean.rs#L971
[19:35:10] <afrey71> bstrie: sure, but they destroy the source object...
[19:35:25] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:35:27] <bstrie> afrey71: not destroy, there's no deallocation and reallocation
[19:35:37] <bstrie> ownership is just a compile-time concept
[19:35:40] <cmr> It uses the def_map in the tyctxt from rustc::middle::ty, as well as crate metadata.
[19:35:42] *** Quits: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro) (Ping timeout)
[19:35:45] <kimundi> bstrie: Well, it is in this case
[19:35:50] <bstrie> kimundi: why so?
[19:36:34] <bstrie> if moving requires the data to be entirely reallocated, that's no better than just copying...
[19:36:35] <kimundi> its an owned pointer to an enum variant, and he want to move an owned pointer out of that variant. It destroys the containing object, and thus causes an deallocation. (which granted is very small)
[19:37:00] <kimundi> bstrie: afrey71's paste: http://pastebin.com/0eZuKh1Y
[19:37:57] <kimundi> afrey71: What could work is, if instead of taking an ~Elem, you take an &mut Elem, and operate over that. Then you don't have that movement issue.
[19:38:33] <afrey71> kimundi: but you cannot modify it, in that case, can you?
[19:38:41] <strcat> bstrie: moving isn't a special thing
[19:38:49] <strcat> rust as a language has one form of copying: a shallow memcpy
[19:39:02] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[19:39:02] <strcat> if the type has a destructor, &fn or &mut in it, the shallow copy steals ownership
[19:39:08] <afrey71> kimundi: I mean changing the variant of the &Elem, for example.
[19:39:11] <kimundi> afrey71: you can't move out of it, but you then could operate with muitable references on it
[19:40:44] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:40:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/amiMWQ
[19:40:44] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:41:29] <kimundi> cmr: What does def_map represent?
[19:42:19] <strcat> def_id -> item
[19:42:34] <strcat> where def_id is what identifies every type
[19:42:38] <strcat> well and other things
[19:42:42] <cmr> kimundi: it's created by resolve, it's the mapping from an id you have to the type it resolve to.
[19:42:55] <kimundi> hmm
[19:43:07] <strcat> cmr: aren't there other things like functions in it though?
[19:43:08] <cmr> Specifiaclly, it resolves an id to its definition.
[19:43:22] *** Quits: jakub (jakub@D9037AF.8AB8D9CD.806C54C8.IP) (Quit: Lost terminal)
[19:43:23] <cmr> strcat: Not sure.
[19:43:27] <cmr> If it does, I don't use it for it.
[19:43:35] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[19:43:49] <cmr> Yes, it also does functions.
[19:44:10] * kimundi has the feeling if he keeps asking about every part he is unsure about, this will result into an endless branching stream of questions :)
[19:44:13] <cmr> kimundi: It's important to note that it's purely within the crate though, so you need to ask metadata for the definition of other things.
[19:44:14] <maik> do we have global const values in rust? like let pi = 3.14f 
[19:44:21] <cmr> maik: static.
[19:44:34] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[19:44:57] <bstrie> maik: static FOO: float = 3.14;
[19:45:25] <kimundi> cmr: Ideally I'd like to have some kind of data structure that contains everything there is to know about a crate, inclusive reference to external crates which can be queried in the same way.
[19:45:31] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:45:34] <kimundi> including*
[19:45:35] <afrey71> I changed my example to: http://pastebin.com/TnsCmefN    Does that look sane? (No longer recursive, but you get the idea).
[19:45:36] <maik> ah thanks
[19:45:43] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:45:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/s5hM4A
[19:45:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:45:46] <bstrie> static mut PI: float = 3.14;  // just keeping our options open
[19:46:06] <kimundi> cmr: But I guess that's going to take a lot of work and learning from my side :P
[19:46:19] <cmr> kimundi: I think doomlord_ actually creates such a structure in his rustfind tool
[19:46:27] <kimundi> hmm!
[19:46:37] <kimundi> right, he had something like that
[19:46:48] * kimundi google rustfind
[19:47:50] <maik> if you have something like this in C " enum{ENET_HOST_ANY = 0, ....." what type is 0? uint16_t?
[19:47:59] <cmr> maik: int
[19:48:07] <maik> cmr, thanks
[19:48:12] <strcat> cmr: it's not
[19:48:15] <cmr> strcat: it isn't?
[19:48:18] <strcat> nope
[19:48:27] <strcat> it's implementation defined and varies per platform on real compilers
[19:48:33] <maik> :(
[19:48:37] <jdm> surprise!
[19:48:57] <strcat> gcc has "short enums" and "long enums"
[19:49:03] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:49:06] <strcat> where a long enum starts as int, and becomes larger if necessary
[19:49:18] <strcat> some platforms default to short enums (variants of ARM?)
[19:49:25] <kimundi> haha
[19:49:36] <strcat> short enums are just as small as possible
[19:49:47] *** Joins: Kruppe (user@moz-85DD0C89.net.uwaterloo.ca)
[19:49:47] * kimundi tried to compile doomlord__ s rustfind ... 221 errors
[19:49:57] <kimundi> Ironically, most are probably caused by me
[19:50:10] <kimundi> libsyntax and rustc type renamings :P
[19:50:18] <afrey71> kimundi, bstrie, strcat: thanks, borrowed pointer based solution seems to work for me.
[19:50:32] <cmr> "An identifier declared as an enumeration constant has type
[19:50:35] <cmr> int
[19:50:36] <cmr> From the C11 spec.
[19:51:22] <strcat> cmr: that's not how big the enum is
[19:51:27] <strcat> you're misinterpreting it
[19:51:32] *** Joins: jstevans (Instantbir@2C020D0D.65B70227.DDE5D3F6.IP)
[19:51:45] <strcat> that's just like how 'a' has the type int
[19:51:51] <jstevans> Is it possible to have 0.7 and the head installed at the same time?
[19:52:00] <cmr> strcat: that's what he asked?
[19:52:07] <strcat> cmr: it's not
[19:52:20] <maik> I just want to have something like a typedef I think
[19:52:21] <cmr> jstevans: yes, just install into different prefixes.
[19:52:24] <strcat> cmr: you're not reading "the enumeration has the type/size of an int"
[19:52:37] <cmr> strcat: Right, he asked what the type of 0 is.
[19:52:50] <maik> the struct looks like this
[19:52:51] <maik>  74 enum
[19:52:52] <maik> 75 {
[19:52:52] <maik> 76  ENET_HOST_ANY = 0,
[19:52:52] <maik> 77  ENET_HOST_BROADCAST = 0xFFFFFFFF,
[19:52:52] <maik> 79  ENET_PORT_ANY = 0
[19:52:53] <maik> 80 };
[19:53:06] <jstevans> cmr -- I'm awful at Linux. how would I do that?
[19:53:06] <maik> and I have written it in rust like static ENET_HOST_ANY: c_int = 0;
[19:53:08] <cmr> the size of the enum is unspecified, but the type of those constants are int.
[19:53:25] <cmr> jstevans: ./configure --prefix=~/.local/rust-0.7
[19:53:36] <cmr> jstevans: of course, ~/.local/rust-0.7 needs to exist
[19:53:38] *** Joins: _Y_ (Mibbit@moz-D7CE8048.dynamic.isp.telekom.rs)
[19:53:45] <_Y_> hi rusties :D
[19:54:02] <_Y_> is rusti usable by non mods?
[19:54:11] <cmr> rusti: "yes"
[19:54:11] <jstevans> cmr: What does that do? When I use "rustc," will the head run or 0.7? How do I access the other one?
[19:54:12] -rusti- "yes"
[19:54:18] <cmr> jstevans: depends in your PATH
[19:54:29] <_Y_> rusti: " 0u-1u"
[19:54:30] -rusti- " 0u-1u"
[19:55:03] <_Y_> rusti: " let v = 0u-1u; println(v);"
[19:55:04] -rusti- " let v = 0u-1u; println(v);"
[19:55:08] <doomlord_> cmr / kimundi - yes rustfind spits out extra metadata to allow linking source level definitions between crates
[19:55:16] <cmr> _Y_: Quotes create a string in rust.
[19:55:29] <_Y_> ah, thanks :)
[19:55:31] <doomlord_> rustfind currently doesn't compile, i need to update to the new visitor stuff. (trait objects?)
[19:55:42] <_Y_> I thought he took what's in quotes as command
[19:55:45] <cmr> no
[19:56:03] <kimundi> doomlord_: Nince! I'm currently updating a fork of rustfind because of renamings btw, you might get an PR soon :)
[19:56:09] <kimundi> Nice*
[19:56:19] <_Y_> rusti: let v = 0u; v -= 1u; println(v);
[19:56:20] -rusti- <anon>:7:38: 7:39 error: mismatched types: expected `&str` but found `uint` (expected &str but found uint)
[19:56:21] -rusti- <anon>:7          let v = 0u; v -= 1u; println(v);
[19:56:21] -rusti-                                                ^
[19:56:21] -rusti- error: aborting due to previous error
[19:56:21] -rusti- application terminated with error code 101
[19:56:33] <kimundi> doomlord_: Unless you already fixed the renaming parts
[19:56:40] <_Y_> nice :)
[19:56:40] <doomlord_> ok, are you actually compiling it ? i didn't think it worked now that old visitor was removed
[19:56:46] <kimundi> (expr_vstor -> ExprVstore etc)
[19:57:08] <maik> can I specify the "types" of a rust enum? like enum Foo{ Bar = 1 }; but 1 should be of type c_int. 
[19:57:09] *** Joins: lex (chatzilla@698F59D6.E8B6FA7D.DDE5D3F6.IP)
[19:57:14] <cmr> maik: You can't, right now.
[19:57:16] *** Quits: Kruppe (user@moz-85DD0C89.net.uwaterloo.ca) (Ping timeout)
[19:57:22] <cmr> maik: The C enum isn't of size c_int either.
[19:57:41] <maik> cmr, okay so I need to use the conversion function you posted 10 min ago?
[19:57:47] <cmr> (6.7.2.2 of the C11 draft http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf, if you're curious)
[19:57:54] <kimundi> doomlord_: Right now I'm running my adhock refactoing tool over it - no idea if it compiles
[19:58:08] <strcat> cmr: bitfields are worse ;p
[19:58:09] <cmr> maik: yes, but you need to know the width  of the enum your C ABI uses.
[19:58:11] <doomlord_> kimundi - i haven't touched it in a couple of weeks so i can most likely merge a PR, but like i say i think the removal of old::visitor kills it
[19:58:15] *** Quits: afrey71 (Mibbit@moz-C3B9248E.whatbox.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[19:58:19] <maik> cmr, okay :x
[19:58:31] <strcat> if you use c_int it will work on x86
[19:58:57] <cmr> maik: In zmq it's easy since it uses #define, not enums. Cross platform, interoperable code doesn't use enums.
[19:59:00] <kimundi> doomlord_: Might well be. Let's see what happens if I fix these errors :P
[19:59:06] <doomlord_> its needs extensive refactoring in find_ast_node.rs ,.. thats the highest priority
[19:59:42] <doomlord_> thats where it uses the old visitor to built its own temporary ast 
[20:00:01] *** Joins: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro)
[20:00:20] <doomlord_> i hadn't been updating it recently which is why it got out of sync with the latest rust releases :(
[20:00:59] <kimundi> doomlord_: Well, if anything I can at least update the part of it that does only involve renamings :)
[20:01:11] <doomlord_> ok i might help me along :)
[20:02:27] <kimundi> doomlord_: Believe me, it will
[20:02:33] <kimundi> "221 errors"
[20:02:49] <doomlord_> lol ok.
[20:05:09] *** Joins: dave1629 (dave@moz-F7321B31.public.wayport.net)
[20:05:46] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:08:12] <dave1629> is there a way to initialize a mutable static that is an owned pointer?  I would like to do something like: static mut gname : ~str = ~"initial"; 
[20:08:45] <bstrie> dave1629: I don't you think you can allocate statically on the heap
[20:08:48] <bstrie> could be wrong though
[20:10:59] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Ping timeout)
[20:11:53] <dave1629> i seefor historical/expository reasons, I'm trying to write a toy rust program as close as possible to:
[20:11:54] <dave1629> extern /*@only@*/ char *gname;
[20:11:55] <dave1629> void setName(/*@temp@*/ char *pname) {
[20:11:55] <dave1629>     gname = pname;
[20:11:56] <dave1629> }
[20:12:52] <strcat> dave1629: use &
[20:13:05] <dave1629> any suggestions for what would be the closest equivalent?  (yes, I realize things like this should not be allowed by the rust compiler, but for type safety reasons)
[20:13:06] <strcat> but it's not possible in safe rust code
[20:13:37] <cmr> I don't think you can do it even with unsafe code, the compiler is pretty strict about constant expressions.
[20:13:53] <strcat> rusti: static x: int = 5; static y: &'static int x; y
[20:13:54] -rusti- <anon>:7:51: 7:52 error: expected `=` but found `x`
[20:13:54] -rusti- <anon>:7          static x: int = 5; static y: &'static int x; y
[20:13:54] -rusti-                                                             ^
[20:13:54] -rusti- application terminated with error code 101
[20:13:59] <strcat> rusti: static x: int = 5; static y: &'static int = x; y
[20:13:59] -rusti- <anon>:7:53: 7:54 error: mismatched types: expected `&'static int` but found `int` (expected &-ptr but found int)
[20:13:59] -rusti- <anon>:7          static x: int = 5; static y: &'static int = x; y
[20:14:00] -rusti-                                                               ^
[20:14:00] -rusti- error: aborting due to previous error
[20:14:00] <dave1629> strcat: yes, that's the point of itI want to show how it need to change to make it safe (preferably, still having the global, mutable pointer
[20:14:01] -rusti- application terminated with error code 101
[20:14:02] <strcat> rusti: static x: int = 5; static y: &'static int = &x; y
[20:14:03] -rusti- &5
[20:14:10] *** Quits: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP) (Quit: tautologico)
[20:14:40] *** Joins: Ferio (Mibbit@moz-23CDE542.fullrate.dk)
[20:14:55] <strcat> dave1629: it's not a safe pattern
[20:14:59] <strcat> there's not really a way around it
[20:15:12] <erickt> dave1629: what are you trying to do?
[20:15:14] <strcat> you can use task-local storage (std::local_data)
[20:15:50] <strcat> dave1629: an & ptr has to have a lifetime associated, and constant will be required to have 'static
[20:16:19] <strcat> and you would need to wrap the unsafe global with a lock to make it safe, + you'd only be able to assign more 'static ptrs
[20:16:31] <strcat> you just wouldn't write code that way in rust
[20:16:51] <dave1629> erickt: a bit of a long storybut if you have time for it, trying to explain rust's solutions to the problems from this paper (http://www.cs.virginia.edu/~evans/pubs/pldi96-abstract.html)
[20:17:33] <erickt> dave1629: that *is* a long story :)
[20:17:39] *** Quits: Ferio (Mibbit@moz-23CDE542.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[20:17:49] *** Joins: Ferio (Ferio@moz-AF1E4A33.clients.kiwiirc.com)
[20:18:19] *** Joins: canhtak (jeremy@moz-20B62323.wl.t.ulaval.ca)
[20:18:27] <bstrie> dave1629: oh, so you're *that* dave :)
[20:18:29] <dave1629> erickt: only about 20 yearsmost of the stories I tell are longer :)  (http://www.cs.virginia.edu/~evans/cs4414-fall2013/class-3-zero-to-a-billion-in-486-years.html)
[20:18:48] <erickt> haha
[20:19:05] <dave1629> bstrie: possibledepends on what *that* dave did :)
[20:19:05] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[20:19:47] <cmr> dave1629: Wait, are you the professor of the OS class?
[20:20:27] <strcat> dave1629: can you say the solution is task-local storage? ;P
[20:21:01] * strcat forgets when rust actually got 'static mut' - not that long ago
[20:21:09] <bstrie> relatively recently
[20:21:19] <bstrie> use to not even have immutable global state :P
[20:21:26] <dave1629> cmr: yes
[20:21:30] <myname> what is a static mut?
[20:21:37] <cmr> dave1629: How is it going?
[20:21:40] <cmr> myname: global, mutable state.
[20:21:43] <bstrie> myname: mutable global variables. Bad Things
[20:21:57] <engla> static mut requires unsafe. to both read and write I think
[20:21:57] <myname> interesting
[20:22:01] <strcat> task-local is still pretty global, and the regular ownership rules keep it safe
[20:22:01] <cmr> Require unsafe code to use, for obvious reasons.
[20:22:06] <kimundi> doomlord_: Send you an PR that fixes all but two errors
[20:22:19] <kimundi> doomlord_: Just as work in progress for now :)
[20:22:30] * maik why does every laptop has those weird stickers ...
[20:22:54] <erickt> dave1629: I suppose you could pass around extra::arc::Arc objects to share state between tasks, but then you need to manage threading that object through each function
[20:23:31] <erickt> dave1629: I wonder if you could store an Arc inside thread local storage? That'd keep you from having to thread the object around
[20:24:17] <dave1629> cmr: I think pretty well, but its early and students have only needed to write a very short program so far.  Many are complaining about Rust being different from what they are used to and lack of documentation for now (http://www.cs.virginia.edu/~evans/cs4414-fall2013/ps1-comments-comments.html), but I think its normal resistance to a new language.
[20:24:41] *** Quits: jviereck (Adium@moz-2E6DC681.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:25:08] *** Joins: aajk (aajk@moz-E1AE6B5.ip.telfort.nl)
[20:25:25] <cmr> dave1629: Is there anything we the rust community can do to help, beyond what we already do?
[20:25:37] <olsonjeffery> argghhh llvm rebuild
[20:25:39] *** Joins: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP)
[20:25:46] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[20:25:47] <aajk> i get this error: unresolved name `int::from_str`
[20:25:58] <aajk> using rust from master...
[20:26:01] <aajk> any help?
[20:26:15] *** jorendorff_away is now known as jorendorff
[20:26:16] <cmr> rusti: fromstr::<int>("153")
[20:26:17] -rusti- <anon>:7:9: 7:23 error: unresolved name `fromstr`.
[20:26:17] -rusti- <anon>:7          fromstr::<int>("153")
[20:26:17] -rusti-                   ^~~~~~~~~~~~~~
[20:26:17] -rusti- error: aborting due to previous error
[20:26:17] -rusti- application terminated with error code 101
[20:26:21] <cmr> rusti: from_str::<int>("153")
[20:26:23] -rusti- Some(153)
[20:27:05] <bstrie> aajk: ^
[20:27:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:27:20] <cmr> dave1629: You should really encourage them to come into IRC rather than trying to find answers in the docs, IMO
[20:27:35] <erickt> dave1629: we're friendly!
[20:27:43] <aajk> @bstrie something like that
[20:27:52] *** Quits: tautologico (shung@72FFECE3.691D28F8.C27E1635.IP) (Quit: tautologico)
[20:27:53] <bstrie> cmr: teaching college students to use IRC will get you a cupful of hemlock
[20:27:55] <maik> I think we already have okayish documentation, it is just scatted all over the net :p
[20:27:56] <dave1629> cmr: Dave Herman sent us some stickers which was great. :)  More seriously, it would be great to have any interested members of the rust community participate in the class forum.  Some volunteers were very helpful doing this for one of the exercises in PS1, but getting expert answers to questions there would be super helpful.  (Anyone can join the course forum, just go to https://piazza.com/virginia/fall2013/cs4414 and enter any email address)
[20:28:12] * erickt joins
[20:28:37] <cmr> Oh cool!
[20:28:39] * cmr also joins.
[20:28:39] *** Joins: jviereck (Adium@moz-2E6DC681.dip0.t-ipconnect.de)
[20:28:41] <strcat> dave1629: http://ix.io/86i don't know how close that is to what you want
[20:28:49] <cmr> bstrie: Ah, is that what Socrates did wrong?
[20:28:53] <kimundi> doomlord_: Haha, I updated my rust version, and NOW I get oldvisit erros too :P
[20:29:02] <Ferio> Hi, does somebody know where core::str::to_upper could be hiding out nowadays? :)
[20:29:08] <bstrie> cmr: it was basically congruent
[20:29:19] <bstrie> Ferio: perhaps in the ascii module?
[20:29:21] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:29:58] <cmr> Ferio: We don't have it for strings, since we don't have full unicode support for cases yet. It does exist for Ascii in std::ascii though
[20:30:16] <Ferio> bstrie: hmm makes sense :) thanks
[20:30:18] <tjc> haha: "I don't like rust at all, I would rather suffer through C"
[20:30:25] <dave1629> I have encouraged students to use the IRC channel, but its impermanence and limited search ability make it less than ideal.  The real-time value of IRC is great, but I really hope students will end up helping produce more coherent and useful documentation.  (My attempt to humorously encourage this: http://www.dorina.org/pubs/strings.html) 
[20:30:40] <tjc> Yeah, we need to work on docuemtnation
[20:30:44] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:30:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14883daea to 140ec4d34: 02http://git.io/N3iJvQ
[20:30:44] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:30:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:30:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fIxa3g
[20:30:46] <ghrust> 13rust/06auto 14555589e 15Steven Fackler: Remove references to std::pipes from task tutorial...
[20:30:46] <ghrust> 13rust/06auto 14bc89ade 15bors: auto merge of #9223 : sfackler/rust/tasks-fix, r=catamorphism...
[20:30:46] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:31:27] <steveklabnik> dave1629: yeah, that'd be great. if i can help any of them help write us docs, let me know
[20:31:28] <Seldaek> dave1629: hey, good to see you here. IMO to get unstuck IRC beats forums because you don't want to wait 3hours running in circles, it's a lot less frustrating to discuss it here 
[20:31:49] <kimundi> Ferio: The old to_upper got removed because it only worked on ascii chars, and did horrible things to non-ascii ones. You rigth now have two options, but findable in std::ascii
[20:32:06] <bstrie> Seldaek: keep in mind that they're on 0.7... you'll have to find an old version of the compiler somewhere
[20:32:14] <Seldaek> dave1629: t'was me emailing you about the new docs btw
[20:32:14] <bstrie> rusti cannot help you
[20:32:17] <engla> kimundi: I'm pretty sure it didn't do any horrible things
[20:32:38] <kimundi> Ferio: Either you convert the whole string to Ascii, whil will fail if any value of it is not an ascii codepoint, or you use the str extension method in there to only map ascii letters to their upper case equivalent.
[20:32:47] <Seldaek> bstrie: true, but AFAIK dave1629 told them they could upgrade to latest if they wished
[20:32:54] <dave1629> tjc: once I cover memory management a bit more, they will be welcome to use C, except if there are any memory leaks or double frees, etc. in their C programs they will have a harsh penalty
[20:33:01] <Ferio> tjc: maybe it would help if one could search the docs, for example google didn't find to to_upper anywhere expect in olds docs http:/dl.rust-lang
[20:33:07] <kimundi> engla: for str.each |byte| { unsafe {}   }
[20:33:13] <tjc> dave1629: Heh. I'm just amused that even by criticizing Rust, the student was saying that C causes suffering :-)
[20:33:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:33:24] <kimundi> engla: for str.map |byte| { unsafe { libc::to_upper(b) } }
[20:33:36] <kimundi> engla: Or something like that :P
[20:33:40] <engla> ok that actually has potential to do something horrible.
[20:33:45] <tjc> Ferio: yes, dbp wrote a great search engine for the docs ("Rustle") but I don't think it's up to date; reviving it would be a good idea
[20:33:47] <Ferio> kimundi: ascii is fine for me right now
[20:33:54] <olsonjeffery> today is, like, roam-on-fire monday
[20:34:00] *** Quits: valenting (Thunderbir@moz-9C32009D.residential.rdsnet.ro) (Ping timeout)
[20:34:08] <olsonjeffery> come in to full disk on database server
[20:34:12] <olsonjeffery> and now corporate-wide dns outage
[20:34:14] <olsonjeffery> good times
[20:34:23] <cmr> dbp contacted me about porting it to work with rustdoc_ng, which would totally be possible and even maybe easy.
[20:34:28] <tjc> olsonjeffery: good reason to go home early :-) unless it's your job to fix dns
[20:34:50] <olsonjeffery> rome*
[20:35:27] <engla> shouldn't have hired Nero as admin
[20:35:39] <olsonjeffery> tjc: the goths are burning the city, and all we can do is file priority helpdesk tickets :)
[20:35:56] <tjc> olsonjeffery: have you tried turning it off and then on again? ;-)
[20:36:05] <engla> 8.8.8.8 :-)
[20:36:10] <kmc> it bugs me that #haskell is generally more about giving your pet explanation in IRC over and over, rather than building good persistent docs by consensus... I don't think we have that problem yet, but I hope we can avoid it, too
[20:36:17] <bstrie> help desk ticket #1563469: lp0 literally on fire
[20:36:33] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:36:45] <kmc> it's hard because the fundamentals of Rust are still changing a lot faster than Haskell at any point in the past 15 years :)
[20:36:51] <dave1629> strcat: re: http://ix.io/86i - interesting, but local_data_key! doesn't work with 0.7, and this is getting into lots of complexities I don't really want to deal with now.  Seems like I will be better off coming up with a different example that works better - I was only wanting to use that one to have something analogous to the C example from the paper, but its not worth dealing with this much complexity for it.
[20:36:53] *** Quits: lex (chatzilla@698F59D6.E8B6FA7D.DDE5D3F6.IP) (Ping timeout)
[20:36:55] <steveklabnik> kmc: exactly
[20:36:57] <olsonjeffery> kmc: well we were *just* discussing the poor state of rust docs.. i think we differentiate by a contractual obligation to be nice
[20:37:07] <kmc> being nice really isn't the issue
[20:37:11] <kmc> #haskell is perfectly nice most of the time
[20:37:18] <kmc> nice != helpful
[20:37:19] <steveklabnik> i've been slowly adding more docs, but it's hard to want to REALLY dive in until it's more stable
[20:37:22] *** Joins: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl)
[20:37:29] <bstrie> kmc: we have a smiley-face quota here to enforce our niceness
[20:37:35] <Seldaek> kmc: in my experience it's hard to avoid this effect, to some extent people will need to repeat themselves, but it's good to have people with low repeat-tolerance that'd rather fix it in the docs 
[20:37:37] <bstrie> :)
[20:37:38] <steveklabnik> like, i've been thinking about how i'd re-write the tutorial, all of it... but I wouldn't want to put effort into such a thing until closer to 1.0
[20:37:39] <strcat> dave1629: ah yeah, I really don't have a good memory on what existed or didn't exist in 0.7 ;]
[20:37:42] <strcat> local_data was different then
[20:38:10] *** Joins: jstevans1 (Instantbir@2C020D0D.65B70227.DDE5D3F6.IP)
[20:38:10] *** Quits: jstevans (Instantbir@2C020D0D.65B70227.DDE5D3F6.IP) (Connection reset by peer)
[20:38:21] *** Quits: fabiand (fabiand@moz-F0FC23CB.adsl.alicedsl.de) (Quit: Verlassend)
[20:38:24] <strcat> maybe we were just missing that macro and you had to manually make the key :s
[20:38:25] <bstrie> steveklabnik: I've had that same urge too, but there's just too much potential stuff in the pipe... foremost on my mind right now is pcwalton's @ -> Gc change
[20:38:48] <Ferio> how stable is rust right now? pygments for examples does not even recognizes livetimes since it seems to be a new feature:)
[20:38:51] <Seldaek> steveklabnik: also one issue someone pointed out about the new docs is that we have 3 things, called "tutorial, manual, and documentation", and those 3 can easily be mixed up; I don't know how to easily consolidate them though, but having a sort of "book" + api docs would be a good start maybe
[20:38:52] <olsonjeffery> a pox upon you, llvm
[20:39:05] <olsonjeffery> so i have a very recent mountain lion install.. i added ccache via brew
[20:39:11] <cmr> Ferio: not really new, although the current syntax is 0.6
[20:39:14] <olsonjeffery> are there any other steps needed to get it used for the llvm build?
[20:39:14] <strcat> Ferio: it's not a new feature since the pygments support was written
[20:39:21] <dgryski> Hi, I'm trying to update some ("ancient") rust code to work with the current language. I have a ~[u8] I used to use vec::filter() on, but using .iter().filter() doesn't seem to do what I need since it creates an iterator, not the filtered array.
[20:39:22] <strcat> Ferio: if it gets that wrong, it was never right ;P
[20:39:36] <olsonjeffery> the "getting started" docs on OSX don't say if you need to pass config flags or what to start using ccache..
[20:39:42] <steveklabnik> Seldaek: yup, exactly those kinds of things
[20:39:43] <cmr> dgryski: .iter().filter().to_owned_vec()
[20:39:45] <strcat> dgryski: do you want to do it in-place, or... ?
[20:39:47] <bstrie> strcat: the pygments support was written during 0.1
[20:39:50] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[20:39:52] <bstrie> definitely before lifetimes
[20:39:54] <strcat> bstrie: oh nvm then
[20:39:55] <cmr> dgryski: that does copies though
[20:39:57] <Ferio> strcat: yeah just look at the sources at github ;)
[20:40:02] <steveklabnik> Seldaek: at least by thinking now i can be ready for when it is closer, though :)
[20:40:02] <strcat> bstrie: I remember it being merged recently
[20:40:12] <bstrie> strcat: it took a loooong time to get upstreamed
[20:40:14] <strcat> Ferio: isn't pygments hosted on bitbucket?
[20:40:23] <Seldaek> steveklabnik: yeah that's cool, this is hard stuff, it should be thought through
[20:40:24] <dcrewi> olsonjeffery: ./configure --enable-ccache
[20:40:25] <strcat> bstrie: well, I'd have thought it would get updated ;p
[20:40:26] <cmr> Ferio: It's not really that stable, though the language is approaching stability, sans bugs.
[20:40:30] <bstrie> strcat: it was *probably* updated after that, before getting upstreamed... a lot of the keywords seem correct
[20:40:35] <Ferio> strcat: yes, but gitbub uses pygments for syntax highlighting
[20:40:40] <bstrie> but lifetimes might very well be newer than it
[20:40:50] <dgryski> cmr: hmm... almost: error: mismatched types: expected `~[u8]` but found `~[&u8]`
[20:40:59] <bstrie> like, we didn't go iface -> trait until like... 0.4
[20:40:59] <sfackler> pygments also doesn't recognize bool as a keyword
[20:41:02] <Seldaek> steveklabnik: happy to see people (well you anyway) focus more on that than breaking more things :)
[20:41:10] <olsonjeffery> dcrewi: ty
[20:41:15] <strcat> bstrie: yeah, but it's been in the language for at least a good solid year
[20:41:38] <olsonjeffery> i remember iface.. those were the days. structural types. sigh.
[20:41:42] <Ferio> anywaymaybe I wait a little bit before digging to deep into rust :)
[20:41:45] <engla> dgryski: I think you should use  .iter().map(|&x| x)  instead of .iter(), so you dereference each element of the iterator
[20:41:48] <cmr> Ferio: Probably wise.
[20:42:02] <olsonjeffery> mandatory heap-allocated vectors
[20:42:09] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[20:42:09] <olsonjeffery> crust fns
[20:42:11] <steveklabnik> Seldaek: :)
[20:42:30] *** Quits: aajk (aajk@moz-E1AE6B5.ip.telfort.nl) (Quit: Ik ga weg)
[20:42:32] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[20:43:05] <cmr> dave1629: piazza seems pretty nice.
[20:43:22] <strcat> one day I'll find the cause of this sret segfault
[20:44:07] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:46:07] *** Quits: jstevans1 (Instantbir@2C020D0D.65B70227.DDE5D3F6.IP) (Ping timeout)
[20:47:07] <maik> has anyone here experience with our libuv wrapper? I think it is behaving wrong with udp -> https://gist.github.com/MaikKlein/6586333
[20:47:33] <dgryski> hrm, map is still giving me an error I can't figure out.  Is there a sample for translating https://github.com/dgryski/rust-bf/blob/master/bf.rs#L42 ?
[20:47:34] <olsonjeffery> acrichto: congrats!
[20:47:47] <acrichto> olsonjeffery: thanks :)
[20:47:59] <dgryski> s/translating/updating/
[20:51:30] *** Quits: squiddy (squiddy@moz-49E21657.adsl.alicedsl.de) (Ping timeout)
[20:52:13] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[20:52:42] <lkuper_> acrichto: congratulations on your new gig!
[20:52:55] <engla> dgryski: it should have worked I think
[20:53:13] <engla> rusti: let program = bytes!("hi <>"); program.iter().map(|&x|x).filter(|x| bytes!("<>+-.,[]").contains(x)).to_owned_vec()
[20:53:14] -rusti- ~[60u8, 62u8]
[20:53:33] <strcat> you want to use move_iter there
[20:53:34] *** Quits: jviereck (Adium@moz-2E6DC681.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:53:50] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[20:53:50] <jensnockert> acrichto: Congratulations!
[20:53:54] <engla> (now I notice that's brainfuck)
[20:54:08] <acrichto> lkuper_ jensnockert: thanks :)
[20:54:15] <Luqman> acrichto: congrats! now llvm stuff can be fixed all that much faster :P
[20:54:45] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[20:54:51] *** Quits: dave1629 (dave@moz-F7321B31.public.wayport.net) (Quit: dave1629)
[20:55:46] <steveklabnik> what's the easiest way to make a directory and file from rust?
[20:55:47] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[20:56:01] <olsonjeffery> brson: ping
[20:56:09] <jensnockert> steveklabnik: libc, I think. :(
[20:56:16] <steveklabnik> jensnockert: :/
[20:56:21] <bstrie> steveklabnik: subprocess out to ruby
[20:56:25] <acrichto> Luqman: haha, I think at this point I need a dedicated machine for just building llvm upgrades
[20:56:26] <kimundi> os::run("mkdir " + file) ?
[20:56:27] <steveklabnik> bstrie: ON IT! :)
[20:56:31] <cmr> steveklabnik: olsonjeffery has a PR coming
[20:56:38] <kimundi> damnit, bstrie's was better
[20:56:46] <steveklabnik> cmr: word. how soon?
[20:56:55] <olsonjeffery> steveklabnik: i literally just made this https://github.com/mozilla/rust/pull/9235
[20:56:57] <steveklabnik> hahah
[20:57:02] <olsonjeffery> that has a real, rustic answer to your question
[20:57:14] <steveklabnik> awesome
[20:57:19] <olsonjeffery> so everyone interested in file io: ^
[20:57:39] <steveklabnik> i guess i'll base my own PR off of this one, then ;)
[20:57:50] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Connection reset by peer)
[20:57:53] <tjc> steveklabnik: there's os::mkdir_recursive
[20:57:55] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[20:57:58] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[20:58:24] <steveklabnik> tjc: cool, i'll poke around there, thanks! want to see if i can implement 'rustpkg init'
[20:58:26] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[20:58:26] <Luqman> acrichto: haha. well if you ever need any testing done i usually build on machine well suited to building llvm 
[20:58:32] *** Joins: victorporof_ (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[20:58:41] <tjc> steveklabnik: great!
[20:58:49] <acrichto> Luqman: what I really need is linux not in a vm...
[20:58:50] *** Joins: jstevans (Instantbir@65B5A71C.65B70227.DDE5D3F6.IP)
[20:59:13] <Seldaek> people of rust, I have an existential question. Ruby has rubyists, python has pythonistas, C.. whatever, but what are we here?
[20:59:13] <olsonjeffery> klutzy: ping
[20:59:19] <steveklabnik> Seldaek: Rustics
[20:59:20] <Luqman> acrichto: i guess buildbots might be an option for you now
[20:59:24] <brson> olsonjeffery: pong
[20:59:35] <olsonjeffery> brson: file io PR at link above
[20:59:37] *** Quits: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Ping timeout)
[20:59:40] <cmr> Seldaek: rusties
[20:59:41] <tjc> if you have push access, you're on the Board of Rustees
[20:59:45] <brson> olsonjeffery: thanks!
[20:59:45] <lkuper_> acrichto: also, dammit, now I'll never catch up to you on the contributors list
[20:59:46] <Seldaek> steveklabnik: this sounds like a bad joke though :p
[20:59:49] <acrichto> Luqman: probably not for everday development, but you never know...
[21:00:03] <tjc> lkuper_: unless you come work for us full-time too :-)
[21:00:07] <engla> Russtians
[21:00:11] <Seldaek> cmr: that one sounds like candy, I like that better
[21:00:24] <lkuper_> tjc: it's no use, he'll have too much of a head start!
[21:00:41] <tjc> lkuper_: nothing a little bit of hard work can't fix. bootstraps! ;-)
[21:01:17] <brson> i like rusticians now
[21:01:19] <Seldaek> also on a related note I don't want to be negative but go definitely has a lead on cute mascots with gophers.
[21:01:22] <strcat> lkuper_: just come up with an excuse to rename libstd again
[21:01:29] <acrichto> lkuper_: who knows, perhaps I'll be reviewing code for a month :P
[21:01:34] <tjc> Seldaek: we've had many discussions about mascots. we never came to a conclusion
[21:01:38] <acrichto> rustisticians
[21:01:40] <tjc> by "many" I mean "at least 2"
[21:01:43] *** Quits: victorporof_ (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Quit: victorporof_)
[21:01:46] <lkuper_> strcat: good plan
[21:01:49] <bstrie> rustachios
[21:01:52] <cmr> rusticles
[21:01:55] <bstrie> 'cause we're all nuts for using this language
[21:01:58] <bstrie> nyuk nyuk
[21:02:12] <tjc> bstrie: i think go has the "nuts" thing cornered already
[21:02:13] <engla> refering to rusticles, I get it
[21:02:17] <Seldaek> tjc: I see, the rust fungi isn't very easy to represent, or cute, but maybe a mushroom of some sort could do
[21:02:24] <Luqman> lkuper_: or remove something big like structural records before :P
[21:02:30] <tjc> Seldaek: Yeah, graydon did claim that the language was named after the fungus, after all...
[21:02:32] <bstrie> I just realized that my punchline can apply to both mine and cmr's term
[21:02:35] <bstrie> and now I feel dirty
[21:02:35] <dgryski> engla: ah, thanks.  The problem with the map is that I had " program = program.iter.map() ... . to_owned_vec()" and it didn't like the assignment
[21:02:43] <benh> can mozilla buy the rust monster? :(
[21:02:44] <tjc> lkuper_: I know, you can add a feature and then remove it
[21:03:05] *** Quits: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com) (Quit: http://www.mibbit.com ajax IRC Client)
[21:03:38] <Seldaek> bstrie: yeah that sounds as bad as testacular, if you are familiar with that case
[21:03:58] <bstrie> lkuper_: revert the change that removed typestate, then remove it again
[21:04:03] <olsonjeffery> rustafarians
[21:04:04] <bstrie> lkuper_: then bring back the C++ runtime
[21:04:13] *** Quits: _Y_ (Mibbit@moz-D7CE8048.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[21:04:16] <Seldaek> olsonjeffery: this is getting somewhere :p
[21:04:18] <kmc> we could be "oxidizers"
[21:04:19] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Ping timeout)
[21:04:25] <pcwalton> metalworkers
[21:04:30] <pcwalton> is a name I proposed a while back
[21:04:33] <lkuper_> I know, I'll resurrect `alt`
[21:04:35] <bstrie> rustees
[21:04:40] <kmc> also +1 for mushrooms as programming language mascots
[21:04:42] <pcwalton> though it's a bit non obvious
[21:04:53] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:04:53] <engla> the rustic imperative: go forth and corrode the world
[21:04:56] <bstrie> kmc: well rusts aren't really mushrooms... they're just little fungus dots
[21:05:13] <bstrie> but yes, I was hoping that o'reilly gave us a mushroom
[21:05:32] *** Joins: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[21:05:37] *** Quits: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Client exited)
[21:05:50] <Seldaek> bstrie: dots don't make for cute mascots though, so maybe it's ok to lie a bit
[21:06:01] <Seldaek> we'll say it's the cousin visiting 
[21:06:03] <cmr> Rusties just soudns right to me.
[21:06:35] <kimundi> The Corroders!
[21:06:36] <lkuper_> don't forget the classic "rustlers", suggested by dherman long ago
[21:07:36] <cmr> Rustlers also good
[21:07:52] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[21:08:37] <Seldaek> anyone up for a very helpful ml thread collecting all those creative proposals? :p
[21:08:50] <tjc> sounds like an opportunity for someone to make a poll!
[21:09:08] <tjc> also to have a lengthy thread about the appropriate voting method for the poll
[21:09:09] <kmc> Rustlers is quite good too, yeah
[21:09:22] * Seldaek happily moving things that truly matter forward..
[21:09:44] <Seldaek> tjc: yes, and a two months flamewar about who is allowed to vote please
[21:10:01] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[21:10:09] <tjc> Seldaek: of course it only should be people with more than 1125 commits, at least 12 of which aren't just comments or whitespace
[21:10:22] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[21:10:25] <kmc> let's make sure the mascot proposal also involves adding new lexical syntax to Rust, somehow
[21:10:37] <benh> That sounds like you have a list of people who have 1113 commits that are just comments or whitespace
[21:10:43] *** Quits: maik (maik@moz-E348F31D.dip0.t-ipconnect.de) (Ping timeout)
[21:11:06] <kmc> i don't always comment my code but when I do, I add the comment a letter at a time in separate commits
[21:11:29] <benh> breaking the build for a commit until you can get the second / in?
[21:12:01] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[21:12:08] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:12:34] <jmgrosen> acrichto: congratulations on the mozilla position! it'll be awesome to have you working full time on rust! :D
[21:12:58] <benh> yay
[21:13:57] <dgryski> http://oldschoolfrp.tumblr.com/post/59594119666/taylorshields-rust
[21:14:12] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Input/output error)
[21:14:20] <steveklabnik> yeah, 'monsters' would be good too
[21:14:21] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[21:14:22] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:14:23] <steveklabnik> heh
[21:14:47] <steveklabnik> okay, "i've only been hacking docs, this is the first code" question
[21:15:07] <steveklabnik> after I make, is './x86_64-unknown-linux-gnu/stage2/bin' where I should be trying out the things i built?
[21:15:18] <cmr> steveklabnik: yes
[21:15:20] <steveklabnik> sweet
[21:15:22] <acrichto> jmgrosen: thanks :)
[21:15:22] <benh> ( oh, so that's fantasy roleplaying and not functional reactive programmin in that url ;) )
[21:15:23] <steveklabnik> it SEEMED so
[21:15:30] <steveklabnik> but there's so many directories o_O
[21:15:33] <erickt> acrichto: congrats!
[21:15:34] <steveklabnik> cool cool
[21:15:35] <cmr> benh: I had that same reaction
[21:15:50] * kmc too
[21:15:57] <kmc> acrichto: are you working in the SF office?
[21:16:11] <acrichto> kmc: I will be soon, in mtv for the today/tomorrow
[21:16:14] <acrichto> erickt: thanks :)
[21:16:45] <kmc> acrichto: cool, I think you're sitting just a few desks over from me
[21:16:59] <acrichto> kmc: woohoo! I look forward to meeting you soon :)
[21:18:34] <brson> the snapshot bot valgrinds successfully with jemalloc off
[21:18:34] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[21:19:48] <acrichto> brson: oh no :(
[21:20:11] <acrichto> brson: strcat was also mentioning that our older valgrind may be having false positives? I tried reproducting and didn't make it all the way
[21:21:12] <brson> the bots are using the same valgrind that i am locally, and I can only reproduce on the bots
[21:21:21] <brson> 3.8.1
[21:21:28] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:21:35] <brson> there's an option to valgrind that's supposed to improve jemalloc compatibility that I haven't tried
[21:21:38] <brson> will also try upgrading
[21:21:46] <acrichto> oh nvmd, I thought they were 3.7
[21:21:56] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:22:27] <brson> when I run make check-stage1-std on my mac the benchmarks no longer run. does anybody know why?
[21:22:54] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[21:23:15] <acrichto> they were restructured at one point I thought
[21:23:24] <acrichto> perhaps they got lost...
[21:23:26] <brson> these are the #[bench] in std
[21:23:30] <brson> they all say ignored
[21:23:34] <brson> oh, it's only when valgrind is on
[21:23:36] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[21:24:01] <acrichto> oh I think that was intentional?
[21:24:04] <acrichto> I forget though
[21:24:07] <brson> somehow we're intentionally not benchmarking under valgrind?
[21:24:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:24:49] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[21:25:17] <engla> graydon did some reconfiguration to split out what the bots did, to reduce cycle time
[21:25:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:27:18] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[21:28:02] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Quit: Leaving)
[21:28:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:30:43] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[21:30:55] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:31:22] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[21:31:32] <kimundi> Yeah I remember that. Benchmarking under valgrind doesn't make sense anyway :P
[21:32:14] *** Quits: Ferio (Ferio@moz-AF1E4A33.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[21:32:38] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:33:21] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:36:30] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[21:38:58] *** Quits: heftig (heftig@moz-3F32DD7A.dip0.t-ipconnect.de) (Ping timeout)
[21:39:17] <doomlord__> (thanks for the PR, i've merged it)
[21:39:47] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[21:39:57] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[21:40:14] <kimundi> doomlord__: No problem. :)
[21:40:27] <strcat> rusti: fn foo() {} let f: extern fn = foo; f
[21:40:27] -rusti- <anon>:7:38: 7:39 error: expected `(` but found `=`
[21:40:27] -rusti- <anon>:7          fn foo() {} let f: extern fn = foo; f
[21:40:27] -rusti-                                                ^
[21:40:27] -rusti- application terminated with error code 101
[21:40:31] <strcat> rusti: fn foo() {} let f: extern fn() = foo; f
[21:40:32] -rusti- fn()
[21:40:46] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:40:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/fIxa3g
[21:40:46] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:40:46] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[21:40:51] <strcat> rusti: fn foo() {} let f: extern "C" fn() = foo; f
[21:40:52] -rusti- <anon>:7:46: 7:49 error: mismatched types: expected `extern "C" fn()` but found `extern "Rust" fn()` (expected "C" fn but found "Rust" fn)
[21:40:52] -rusti- <anon>:7          fn foo() {} let f: extern "C" fn() = foo; f
[21:40:52] -rusti-                                                        ^~~
[21:40:52] -rusti- error: aborting due to previous error
[21:40:52] -rusti- application terminated with error code 101
[21:40:55] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Connection reset by peer)
[21:40:59] <strcat> that could be it
[21:41:44] <strcat> meh
[21:43:49] *** Joins: heftig (heftig@moz-C1BA554.dip0.t-ipconnect.de)
[21:43:49] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:45:23] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[21:45:45] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:45:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/15_W-w
[21:45:45] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:45:46] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:45:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jFLRKQ
[21:45:46] <ghrust> 13rust/06auto 149c322aa 15Huon Wilson: Tests for fixed issues....
[21:45:46] <ghrust> 13rust/06auto 149c1cc73 15bors: auto merge of #9225 : huonw/rust/closing-time, r=alexcrichton...
[21:45:46] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:46:41] *** Joins: maik (maik@moz-E348F31D.dip0.t-ipconnect.de)
[21:47:07] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[21:48:27] *** Joins: squiddy (squiddy@moz-49E21657.adsl.alicedsl.de)
[21:49:44] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[21:51:02] <dgryski> thanks for your help updated my code.
[21:51:03] *** Quits: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl) (Quit: WeeChat 0.4.2-rc1)
[21:51:06] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:51:06] *** ChanServ sets mode: +o pnkfelix
[21:52:46] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[21:52:55] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[21:54:27] <olsonjeffery> question: is there a ticket about llvm snapshots ala the bootstrap compiler? that'd be aces.
[21:55:12] <brson> olsonjeffery: https://github.com/mozilla/rust/issues/5402
[21:56:13] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[21:56:22] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[21:59:37] <brson> i can't currently reproduce any valgrind errors on mac
[21:59:46] <strcat> I can't on linux.
[22:00:07] <strcat> valgrind 3.8.1
[22:00:12] *** Quits: jstevans (Instantbir@65B5A71C.65B70227.DDE5D3F6.IP) (Ping timeout)
[22:00:13] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Connection reset by peer)
[22:00:19] <strcat> I think the buildbots are haunted ;P
[22:00:37] *** Joins: tikue_ (tkuehn@37EC8A1F.D038900B.689607DE.IP)
[22:00:49] <brson> strcat: I found the workaround for the bots: --soname-synonyms=somalloc=NONE
[22:01:03] <brson> i don't know exactly what it does. i just copied it from julian's blog
[22:01:28] <brson> but it seems to make the errors go away
[22:01:43] *** Joins: SingingBoyo (brandon@moz-C8F1D1FC.ubcsecure.wireless.ubc.ca)
[22:02:31] <brson> i think the snapshot bot is the only one running centos
[22:02:31] *** nrc|afk is now known as nrc
[22:02:34] <strcat> Replacements in a statically linked library are done by using the NONE pattern. For example, if you link with libtcmalloc.a, memcheck will properly work when you give the option --soname-synonyms=somalloc=NONE. Note that a NONE pattern will match the main executable and any shared library having no soname. 
[22:02:37] <strcat> oh
[22:02:43] <strcat> it's just from statically linking jemalloc
[22:02:47] <strcat> apparently.
[22:03:11] <strcat> To run a "default" Firefox build for Linux, in which JEMalloc is linked in to the main executable, use --soname-synonyms=somalloc=NONE. 
[22:03:13] <steveklabnik> woot https://github.com/mozilla/rust/pull/9236
[22:04:27] <olsonjeffery> steveklabnik: so how was the fileinfo/directoryinfo apis?
[22:04:28] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[22:04:31] <olsonjeffery> were*
[22:05:20] *** Quits: tikue_ (tkuehn@37EC8A1F.D038900B.689607DE.IP) (Quit: tikue_)
[22:06:16] <steveklabnik> olsonjeffery: didn't actually use them yet. heh. for now, just making directories, and the os::mkdir_recursive was enough
[22:07:28] <olsonjeffery> i thought about spiking a utility API ala ruby's FileUtils ( rm_rf, mkdir_p, etc)
[22:07:31] *** Joins: tikue_ (tkuehn@37EC8A1F.D038900B.689607DE.IP)
[22:07:38] *** Joins: dave1629 (dave@moz-F7321B31.public.wayport.net)
[22:07:42] <olsonjeffery> but im running short on time and i move at a glacial pace. so gotta go go go
[22:08:28] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Ping timeout)
[22:08:36] <steveklabnik> :)
[22:09:40] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[22:09:40] <olsonjeffery> maybe all of the free functions in rt::io::file could move into a nested utils module, and FileInfo, FileStream, etc would just live in the top and call into them as needed
[22:09:53] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[22:10:37] <strcat> pcwalton: do you know when we actually use invoke instructions?
[22:10:49] *** Quits: tikue_ (tkuehn@37EC8A1F.D038900B.689607DE.IP) (Quit: tikue_)
[22:10:52] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[22:11:10] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[22:11:26] <strcat> is it actually whenever there are destructors to run?
[22:11:35] <ww> are there methods in std lib to serialize u16, u32, u64 to network byte order buffer?
[22:11:59] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:12:49] <strcat> alright I think I have a good idea about another bug 
[22:13:41] <cmr> rusti: std::unstable::intrinsics::to_be32(0x123)
[22:13:42] -rusti- 587268096i32
[22:14:06] <strcat> a bug!
[22:14:08] <strcat> :D
[22:14:10] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[22:14:13] <strcat> maybe...
[22:14:20] <acrichto> rusti: print!("{:x} ", std::unstable::intrinsics::to_be32(0x123))
[22:14:22] <Luqman> strcat: isn't invoke used when something in scope needs cleanups?
[22:14:23] -rusti- 23010000 ()
[22:14:28] <strcat> Luqman: yep looks like it
[22:14:33] <strcat> this is a bug in my branch
[22:14:37] <strcat> I hope it's *the* bug
[22:14:46] <Luqman> the x86 bug?
[22:14:50] <strcat> yes
[22:14:58] <cmr> ww: ^
[22:15:02] <strcat> so, we generate call instructions on function pointers
[22:15:11] <strcat> so I taught it to set the sret attribute on them
[22:15:13] <strcat> but I didn
[22:15:18] <cmr> ww: "network order" is just big endian
[22:15:21] <strcat> didn't teach it to set it on invoke instructions of fn ptrs*
[22:15:21] <ww> thx cmr
[22:15:28] *** Joins: tikue_ (tkuehn@37EC8A1F.D038900B.689607DE.IP)
[22:15:51] <ww> i'll look into the intrinsics conversion
[22:16:56] <Luqman> strcat: does the bug reproduce with -Z no-landing-pads cause that seems to make it not use Invoke
[22:17:32] <pnkfelix> strcat: So, I've been diving a little bit into code generation today, and I've been having problems where the LLVM invoke instruction seems to yield buggy code when it restores spilled registers
[22:18:23] <pnkfelix> strcat: I'm curious if you can summarize the bug you're looking at?  (And also whatever info you've garnered on what rules dictate when we use call vs invoke because the choice of which is used has struck me as odd)
[22:18:36] <strcat> pnkfelix: well, I'm tagging our output parameters with sret
[22:18:45] <strcat> very, very slightly changing the ABI
[22:18:48] <pnkfelix> strcat: what does sret mean?
[22:18:53] <strcat> pnkfelix: it means 2 things
[22:19:08] <strcat> 1) it changes the ABI very slightly, for the platform's struct return convention (which we do not need)
[22:19:10] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[22:19:24] <strcat> 2) it tells the LLVM optimizers that the pointer is non-null, and points to valid, properly aligned memory for the type
[22:19:28] <pnkfelix> (for reference, this is the suspect LLVM issue I alluded to above: https://github.com/mozilla/rust/issues/9129#issuecomment-24510246 )
[22:19:30] <strcat> (usually it can't assume that)
[22:19:34] <strcat> all I really want is the 2nd guarantee.
[22:19:34] *** Quits: aeqwa (aeqwa@moz-C28C90E3.dsl.tropolys.de) (Quit: Lost terminal)
[22:19:46] <strcat> but regardless, for now sret is the only way
[22:19:48] <pnkfelix> strcat: ah I see
[22:19:58] <strcat> so the problem is that attributes are associated with function declarations
[22:20:01] <strcat> not with their *type*
[22:20:08] <strcat> and when you call a function *pointer* you aren't using the declaration
[22:20:15] <strcat> so you need to set sret on the call instruction, which I am doing
[22:20:21] <strcat> but I didn't realize we also made invoke instructions.
[22:20:25] <strcat> so I need to add it to those too
[22:20:32] <strcat> and then hopefully this segfault goes away
[22:20:42] <strcat> I am not very optimistic but I am happy I found a bug in this :P
[22:20:57] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Ping timeout)
[22:20:57] <pnkfelix> strcat: I see.  and so you want to find out when we emit those, but you don't currently have a pithy summary for what policy is used to decide to emit invoke versus call ?
[22:21:12] <strcat> pnkfelix: I kno wthe policy
[22:21:16] <strcat> I know the policy*
[22:21:27] * strcat is looking right at it ;p
[22:21:39] <strcat> it's not very simple
[22:21:48] <jack> If i build rust wth --enable-debug, does it only use that on stage2?
[22:21:49] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[22:21:58] <acrichto> jack: it should do it in all stages
[22:22:00] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:22:02] <strcat> pnkfelix: http://ix.io/86t
[22:22:10] <jack> hmm. i must have configured wrong then.
[22:22:11] <pnkfelix> strcat: ah thx
[22:22:21] <strcat> pnkfelix: you can see the short exit at the top for that -Z flag
[22:22:53] <pnkfelix> acrichto: is that true?  I thought we changed our policy there to speed up the cycle times but honestly, I'm not actually sure.
[22:23:18] <strcat> pnkfelix: going to try with disabling the invoke instruction before fixing it though...
[22:23:21] * pnkfelix should just go look in the mk/ files rather than guessing what current policy is
[22:23:35] *** Quits: SingingBoyo (brandon@moz-C8F1D1FC.ubcsecure.wireless.ubc.ca) (Ping timeout)
[22:24:26] <acrichto> pnkfelix: oh maybe, I haven't stared at VERBOSE=1 output recently
[22:25:24] <pnkfelix> strcat: w.r.t. the invoke/call policy, I mostly am curious to know why manually lifting a subexpression out of a function call (and instead binding the subexpr to a variable and then using that in the function call) would cause a call to be generated rather than an invoke.  But I will look at the code you sent more carefully, maybe step through it as it runs.  Thanks!
[22:25:54] <Luqman> pnkfelix: is that segfault something recent? maybe bisecting llvm could be useful
[22:26:10] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:26:15] <pnkfelix> Luqman: Its semi-recent.  I had not yet considered bisecting llvm
[22:26:15] <jack> is --enable-debug not enough? I still don't see it and i know it used that flag when configuring.
[22:26:38] <acrichto> dbaupp: aww your pull requests with tests has /* note `:` */ but you forgot to insert the colon :(
[22:26:40] <aatch> pnkfelix, from looking at the LLVM docs too, there are only really two major differences. 1) invoke is a terminator instruction meaning that it ends a basic block (call does not) and 2) invoke allows for code to be run during unwinding by use of landing pads
[22:26:44] <brson> strcat: r? https://github.com/mozilla/rust/pull/9237
[22:26:47] <pnkfelix> Luqman: I wanted to finish making an isolated test case that shows the bug indpendently from the Rust runtime first, so I could send that over to the LLVM devs.
[22:26:53] <cmr> jack: RUST_LOG=cratename=4
[22:27:13] <jack> cmr: RUST_LOG=cratename is not enough anymore?
[22:27:23] <strcat> brson: could you change the comment to say it's for supporting a statically linked jemalloc?
[22:27:28] <cmr> jack: I don't think so no
[22:27:29] <Luqman> pnkfelix: last time i looked at an llvm related bug it ended up being FastISel outputting wrong instructions
[22:27:39] *** Joins: slack1256 (slack@moz-F5B8C14B.baf.movistar.cl)
[22:27:49] <acrichto> brson: could you push that directly to snap-stage3 and see if it fixes the problems?
[22:27:50] <strcat> brson: it's not needed if you actually dynamically link, so we'd need to be careful about this if we ever support using the system jemalloc
[22:28:59] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:29:19] <kmc> I think '--soname-synonyms=somalloc=*' would be more portable in that regard, but I'm not sure
[22:29:52] <brson> strcat: done
[22:30:05] <strcat> brson: r+
[22:30:29] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[22:30:30] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:30:30] <ghrust> 01[13rust01] 15brson pushed 1 new commit to 06snap-stage3: 02http://git.io/9UYwBw
[22:30:30] <ghrust> 13rust/06snap-stage3 144c49a3d 15Brian Anderson: mk: Fix valgrinding with jemalloc...
[22:30:30] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:30:50] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:30:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149c1cc73 to 14bc89ade: 02http://git.io/N3iJvQ
[22:30:50] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:30:51] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:30:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/e6sh2A
[22:30:51] <ghrust> 13rust/06auto 14edf20cc 15Tim Chevalier: testsuite: Add test for #4208...
[22:30:51] <ghrust> 13rust/06auto 14a658d1f 15bors: auto merge of #9233 : catamorphism/rust/issue-4208, r=catamorphism...
[22:30:52] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:32:08] *** Quits: dave1629 (dave@moz-F7321B31.public.wayport.net) (Quit: dave1629)
[22:32:42] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[22:32:49] <ww> is there a function to copy bytes from [u8] buffer to [u8] buffer but with offset?  vec::bytes::copy_memory() always copy from the beginning of buffer into the beginning of the dest buffer.
[22:34:00] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:34:31] <kimundi> ww: you could make a slice of the destination/source and use that
[22:34:32] <Eridius> ww: slice the buffer first
[22:34:46] <ww> ah i see.  thx
[22:35:17] <strcat> acrichto: Luqman: pnkfelix: solved!
[22:35:22] <strcat> I think.
[22:35:27] <strcat> there could be yet another bug
[22:35:27] <acrichto> strcat: the sret bug, nice!
[22:35:30] <Luqman> \o/
[22:36:03] <strcat> acrichto: https://github.com/mozilla/rust/pull/9109 r? only the last commit is new (rest are just rebased since last time)
[22:36:35] *** Joins: a_m0d|home (a_m0d@moz-1CA91AA3.acanac.net)
[22:36:37] <strcat> rusti: version
[22:36:37] -rusti- "rustc 0.8-pre (29032cd 2013-09-15 11:55:49 -0700)"
[22:37:06] *** Joins: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com)
[22:37:12] <acrichto> oh nice (rusti: version)
[22:37:28] <strcat> acrichto: just made it do $(rustc -v) :)
[22:37:32] <strcat> in the here doc
[22:37:51] <acrichto> strcat: aww it's kinda sad that the location already had the attributes and it was just forgotten that the Invoke instruction needed them as well
[22:37:58] <strcat> acrichto: yep...
[22:37:58] <acrichto> I was hoping for some more clever fix :p
[22:38:09] <strcat> acrichto: well, the original failed fix was tagging call instructions
[22:38:11] <strcat> and that was clever :)
[22:38:14] <acrichto> true
[22:38:24] <strcat> acrichto: this only happens with an invoke *of a function pointer*
[22:38:29] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Ping timeout)
[22:38:29] <strcat> otherwise it knows there's sret from the declaration
[22:38:41] <acrichto> tricksy llvm
[22:39:08] <strcat> rusti: version
[22:39:09] -rusti- error: internal compiler error: unexpected failure
[22:39:09] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[22:39:09] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[22:39:09] -rusti- "rustc 0.8-pre (0ec4d34 2013-09-16 11:30:42 -0700)"
[22:39:12] <strcat> rusti: version
[22:39:12] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:39:13] -rusti- "rustc 0.8-pre (0ec4d34 2013-09-16 11:30:42 -0700)"
[22:39:21] <strcat> acrichto: for whatever reason rustc -v sometimes ICEs
[22:39:22] <acrichto> scary
[22:39:26] *** Joins: dave1629 (dave@moz-F7321B31.public.wayport.net)
[22:39:32] *** Joins: jstevans (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP)
[22:39:32] <strcat> :s
[22:39:43] <acrichto> strcat: https://github.com/mozilla/rust/issues/8870
[22:39:51] <strcat> ha
[22:39:56] <strcat> at least it's known
[22:39:57] <acrichto> printing a version number is hard
[22:40:05] <acrichto> doing it safely is even harder
[22:40:47] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[22:42:11] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[22:43:03] *** Quits: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr) (Quit: Gone)
[22:43:27] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[22:43:42] <ww> how can i cast a struct's memory layout as it is into a byte array [u8]?  are struct packed by default?
[22:43:47] <Eridius> hrm, the new SendStr's impl of Eq calls .equals() instead of .eq(). Seems quite odd when reading the code, though of course str's implementation of .eq and .equals are identical
[22:43:58] <Eridius> ww: structs should be compatible with C structs
[22:44:15] <Eridius> so no, fields are typically not packed, they're aligned as per the normal alignment rules
[22:44:46] <Eridius> you can take a pointer to it and cast that to a *u8 if you want, and use sys::size_of() to find out the actual size of the struct
[22:44:59] <kmc> use vec::raw::buf_as_slice
[22:45:27] <kmc> https://github.com/mozilla/servo/blob/master/src/components/util/debug.rs#L25-L31
[22:45:28] <Luqman> ww: you can put #[packed] onto a struct
[22:45:38] <ww> ok, i see.  i better serialize the struct into vec::raw myself
[22:45:48] <kmc> i wouldn't call that "serialize"
[22:45:56] <kmc> buf_as_slice doesn't do any copying
[22:46:21] <kmc> a slice &[u8] is a represented as a (pointer, length) pair and buf_as_slice just builds one of those for an existing buffer and length
[22:46:40] <Eridius> rusti: struct Foo { a: int, b: int } let f = Foo { a:1, b: 2 } printfln!(std::vec::raw::buf_as_slice(unsafe { std::cast::transmute(&f) }, std::sys::size_of::<Foo>()))
[22:46:50] -rusti- pastebinned 4 lines of output: http://ix.io/86C
[22:46:51] <ww> i meant to avoid the packing problem.  i need to serialize the struct into a packed byte array
[22:47:00] <Eridius> rusti: struct Foo { a: int, b: int } let f = Foo { a:1, b: 2 }; printfln!(std::vec::raw::buf_as_slice(unsafe { std::cast::transmute(&f) }, std::sys::size_of::<Foo>()))
[22:47:02] -rusti- pastebinned 9 lines of output: http://ix.io/86D
[22:47:08] <kmc> yeah, I would not use this unsafe casting stuff for actual serialization
[22:47:26] <Eridius> rusti: struct Foo { a: int, b: int } let f = Foo { a:1, b: 2 }; std::vec::raw::buf_as_slice(unsafe { std::cast::transmute(&f) }, std::sys::size_of::<Foo>()), |x| printfln!(x))
[22:47:28] <ww> ok, thanks all.  that's really helpful
[22:47:29] -rusti- pastebinned 4 lines of output: http://ix.io/86E
[22:47:41] <luisbg> acrichto, \o/
[22:47:49] <Eridius> acrichto: congrats
[22:48:20] <tikue_> acrichto++
[22:48:41] <acrichto> thanks :)
[22:48:55] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[22:49:04] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:49:04] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[22:49:20] <Eridius> acrichto: I see Jason Fager just said it on rust-dev, but I too assumed you were part of the team already ;)
[22:50:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:50:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a658d1f to 14bc89ade: 02http://git.io/N3iJvQ
[22:50:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:50:50] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:50:50] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/bMociA
[22:50:50] <ghrust> 13rust/06auto 143c31cf2 15Daniel Micay: fix handling of function attributes...
[22:50:50] <ghrust> 13rust/06auto 14b2eb1c0 15Daniel Micay: add sret + noalias to the out pointer parameter...
[22:50:51] <ghrust> 13rust/06auto 1422b6f74 15Daniel Micay: document why attributes are set on CallInst
[22:50:53] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:51:32] * strcat ponders making a daily VM image with the newest rust version
[22:52:22] <strcat> I guess that's not worth it ;p
[22:52:28] <strcat> but it'd be easy
[22:52:49] *** Quits: dave1629 (dave@moz-F7321B31.public.wayport.net) (Quit: dave1629)
[22:53:05] <pnkfelix> strcat: wait ... why a whole VM image?
[22:53:50] <strcat> pnkfelix: if someone on OS X wants to debug a linux rust issue
[22:53:57] * strcat shrugs
[22:54:06] <strcat> I already have nightly builds anyway
[22:54:24] <pnkfelix> strcat: Ah.  Yeah I think you don't need to put up a whole VM image.  Or at least, not a new one each time.  :)
[22:54:30] <steveklabnik> Vagrant box?
[22:54:37] <steveklabnik> we do that for rails
[22:54:46] <strcat> pnkfelix: yeah I already have a repo with the builds so it'd be fairly pointless to remake it
[22:54:46] * steveklabnik shrugs
[22:55:06] <strcat> pnkfelix: but making an image from a directory is easy
[22:55:43] <pnkfelix> strcat: Actually, a VM image with properly configuring arm cross-compiling tools would be nice
[22:55:55] <pnkfelix> *properly configured
[22:56:01] <strcat> pnkfelix: well, I plan on just adding cross-compiling support to my arch package
[22:56:07] <strcat> split out
[22:56:22] <strcat> I have to get it working first :)
[22:56:33] <strcat> my ARM computer decided to kill itself
[22:56:46] <pnkfelix> strcat:  i spent a while trying to figure out what combination of packages I needed to pull via apt-get to get something that could make binaries that work on my ARM laptop
[22:56:46] <strcat> it wasn't happy about a kernel upgrade, enough that I think it's actually dead :|
[22:57:07] <pnkfelix> still haven't gotten rust working on that yet 
[22:57:18] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[22:57:43] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:57:44] <pnkfelix> strcat: yeah I've been fearful about making major changes to it, since it was hard enough figuring out the right incantation to get ubuntu working on it.
[22:58:05] <strcat> I had debian stable on my plug computer even though I dislike debian quite a bit
[22:58:13] <strcat> just because it's so painful to deal with if it breaks
[22:58:43] <strcat> (you have to hook it up to a serial port, which my laptop does not have)
[22:59:08] <strcat> and my desktop doesn't have a serial port...
[22:59:11] * strcat sighs
[22:59:19] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:59:58] <strcat> acrichto: now I can move on to fixing mergefunc and killing type_use >:)
[23:00:02] *** Quits: squiddy (squiddy@moz-49E21657.adsl.alicedsl.de) (Quit: Leaving)
[23:00:15] <luisbg> strcat, serial port for debian stable? what?
[23:00:27] <strcat> luisbg: for an embedded ARM computer
[23:00:27] <acrichto> strcat: huzzah! I'm all for red diffs
[23:00:30] <luisbg> strcat, can't you just ctrl+alt+f1, go to the frame buffer terminal and fix things there?
[23:00:36] <strcat> luisbg: it has no screen
[23:00:38] <luisbg> strcat, ooooh OK, that is different yes
[23:00:55] <strcat> luisbg: I just meant I was using debian stable *because* I wanted as few issues to deal with as possible
[23:01:12] <luisbg> strcat, I have a spare desktop machine around here, have been thinking of running a Rust/Servo integration server (build-bot)
[23:01:12] <strcat> even though it makes it a huge pain to use up-to-date libs, and it's missing kernel features I need, and so on
[23:01:23] <luisbg> strcat, I understand
[23:01:41] <strcat> ;]
[23:02:14] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Ping timeout)
[23:02:40] <strcat> pnkfelix: maybe I'll just set up an ARM emulator and figure it out...
[23:02:46] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[23:03:21] <strcat> I wonder how long rust would take to compile in qemu
[23:03:21] <kmc> schroot can set up magic qemulated chroots
[23:03:28] <kmc> which are a lot more convenient than whole-system VMs for some purposes
[23:03:39] <kmc> and you can set one up with just a few commands
[23:05:53] <pnkfelix> strcat: the inconvenience of a lack-of-screen is what led me to get a chromebook rather than continuing to muck with raspberry pi and such
[23:06:02] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[23:06:23] *** Quits: maik (maik@moz-E348F31D.dip0.t-ipconnect.de) (Ping timeout)
[23:06:30] <Luqman> pnkfelix: i thought the gcc-4.4-arm-linux-gnueabi(hf) package was enough
[23:06:31] <pnkfelix> strcat: though I guess the raspberry pi at least does have video capability.
[23:07:07] <pnkfelix> Luqman: that got me part of the way.  but my memory is that I needed other things too, but I don't remember what now.
[23:07:12] *** Joins: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[23:07:27] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:07:36] <pnkfelix> Luqman: Or maybe I had just guessed the wrong toplevel packages to install from the outset, and the one you listed would have worked.  not sure, fuzzy memory.
[23:08:14] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[23:08:22] <Luqman> pnkfelix: i'm not exactly sure either, all the packages were already installed on the machine i usually test with
[23:08:24] *** Quits: nkoep (nik@moz-E00EE456.pool.mediaways.net) (Client exited)
[23:09:32] <luisbg> why do Methods want Borrowed Pointers? I will find I can remember this better if I understand the logic behind it
[23:09:54] <Eridius> luisbg: you mean for self?
[23:09:59] <Eridius> luisbg: because otherwise they'd consume their receiver
[23:10:07] <Eridius> which some methods do anyway, but only when appropriate
[23:10:07] <kmc> sometimes that's what you want, though, and you can do it
[23:10:10] <kmc> yeah
[23:10:11] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[23:10:42] <luisbg> Eridius, "consume their receiver"?
[23:10:50] <luisbg> sorry if it should be obvious
[23:11:06] <Eridius> luisbg: the reciver is the value you're calling the method on. And it would be moved into the method, so you couldn't access it again from the caller
[23:11:42] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[23:13:17] <luisbg> Eridius, an owned box wouldn't let you share the pointer, and a managed box wouldn't be able to leave the task, so the best remaining option is a Borrowed Pointer
[23:13:21] <luisbg> Eridius, is that it?
[23:13:35] <kmc> well you can also turn either of those into a borrowed pointer
[23:13:50] <Eridius> it's not so much about "best remaining option" as it is that a borrowed pointer is precisely what you want to call a method on
[23:13:51] <kmc> the idea is that most methods on an object don't need to assume permanent control of the object's memory management
[23:13:58] <luisbg> kmc, that is also a benefit, yes :)
[23:14:04] <Eridius> the method doesn't want to own its receiver, so you use a borrowed pointer instead
[23:14:10] <Eridius> it doesn't really matter what the alternatives are
[23:14:26] <luisbg> Eridius, I agree, I just worded it weirdly
[23:14:27] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[23:15:14] <kmc> it's nothing special to 'self'; in general when a function wants to use some data without taking ownership, you use a borrowed pointer
[23:15:17] <luisbg> Eridius, thanks for the help
[23:15:18] <tiffany> uh..
[23:15:22] <tiffany> how do you write to a TcpStream?
[23:15:35] <cmr> tiffany: it implements Writer, so you call the .write method
[23:15:39] <tiffany> that isn't working
[23:15:42] <luisbg> kmc, it makes sense, just had to think about it out loud
[23:15:44] <tiffany> error: type `std::rt::io::net::tcp::TcpStream` does not implement any method in scope named `write`
[23:15:54] <cmr> Is std::rt::io::Writer in scope?
[23:16:00] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[23:16:03] <tiffany> ah
[23:16:04] <kmc> the only weird thing is that the & character in "&self" means the opposite of the & in "&x: T" :/
[23:16:09] <kmc> it really should be like "self: &Self"
[23:16:17] *** Joins: victorporof_ (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[23:16:25] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[23:16:45] <kmc> ("should" in some "best of all worlds" sense... not worth changing now)
[23:17:17] *** Quits: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Ping timeout)
[23:17:47] <Eridius> kmc: yeah it is slightly odd, but I think the reduction in redundant typing is worth the wart
[23:17:58] <kmc> I don't feel strongly about it
[23:17:58] *** Joins: dave1629 (dave@moz-F7321B31.public.wayport.net)
[23:18:25] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[23:18:25] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:18:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:19:10] <doomlord__> thats a funny one, &self, its so horribly inconsistent yet in practical terms its forgivable and even preferable.
[23:19:13] <kmc> luisbg: C++ code often follows similar patterns... passing arguments as references (akin to &), returning std::unique_ptr (akin to ~) or shared_ptr (akin to @)
[23:19:24] *** Joins: itdaniher (it@moz-6C3ABA7E.bstnma.fios.verizon.net)
[23:19:28] <mark_edward> i need a static object that needs to be initialized by a function. how can i do this?
[23:19:44] *** Quits: jstevans (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP) (Ping timeout)
[23:19:46] <kmc> mark_edward: you can't; maybe use the local_data module instead?
[23:19:47] <pcwalton> you can't
[23:19:47] <cmr> mark_edward: you can't.
[23:19:48] <kmc> that's thread-local though
[23:19:50] <kimundi> mark_edward: Not safely
[23:19:51] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[23:19:53] <kmc> task-local*
[23:19:58] <Eridius> pcwalton: has there been any thought to adding something equivalent to Go's init()?
[23:19:59] <pcwalton> there is no life-before-main in rust by design
[23:20:02] <pcwalton> please no :)
[23:20:05] <cmr> kimundi: not even unsafely, the language just plain doesn't support it.
[23:20:12] <pcwalton> I consider that a misfeature IMHO
[23:20:13] <Eridius> I suppose you could hack one up yourself using #[start]
[23:20:14] <kmc> you can do it unsafely fsvo unsafely
[23:20:16] <kimundi> cmr: static mut?
[23:20:19] <Eridius> pcwalton: it's very handy on occasion though
[23:20:20] <tiffany> uh..
[23:20:22] <kmc> you can initialize on first use
[23:20:27] <tiffany> my program seems to be failing before main()
[23:20:28] <pcwalton> it's also very easy for making browsers that start up slowly
[23:20:29] <tiffany> or inside of println
[23:20:35] <luisbg> kmc, yes, and also GObject, you pass the object itself as the first argument by reference
[23:20:47] <andrew-d_w> acrichto: Just saw the mailing list news - congrats :D
[23:20:47] <tiffany> first line of main() is println("hi"); and I get task <unnamed> failed at 'explicit failure', /home/tiffany/Projects/rust/src/libstd/rt/io/stdio.rs:22
[23:20:50] <kmc> yeah, and in C++ "this" is always a pointer
[23:20:58] <luisbg> kmc, :)
[23:20:58] <cmr> kimundi: That's different; it doesn't get initialized for you.
[23:21:05] <pcwalton> Eridius: it was a huge mistake in C++ and it was a huge mistake in Go
[23:21:06] <mark_edward> im making a library using OpenAL, and i need to make sure certain functions are called before anything else is done
[23:21:09] <cmr> tiffany: Yes, newrt stdio isn't implemented
[23:21:20] <cmr> mark_edward: Make the library return an object you need to call the methods on.
[23:21:23] <tiffany> what?
[23:21:26] <kimundi> cmr: hm?
[23:21:34] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[23:21:41] <cmr> tiffany: newrt doesn't have stdio support yet. `use std::io::println` after the std::rt::io imports.
[23:21:44] <Eridius> pcwalton: if you say so. It's incredibly handy for making packages that register themselves with the appropriate authority
[23:21:58] <tiffany> oh
[23:21:59] <Eridius> pcwalton: i.e. database connection implementations register themselves with the generic database package in an init()
[23:22:00] <pcwalton> we've been fighting that in Gecko for years and years
[23:22:01] <pcwalton> 
[23:22:01] <kimundi> cmr: static mut - initialisation function - what mark_edward described, no?
[23:22:10] <cmr> kimundi: it doesn't get called for you
[23:22:13] <pcwalton> firefox startup time caused by static initializers
[23:22:22] <Eridius> I also use init() in my IRC bot written in Go. It's structed with plugins, and each plugin registers itself with the plugin manager in an init() method
[23:22:23] <pcwalton> furthermore when it's not defined what order the static initializers run in
[23:22:42] <acrichto> andrew-d_w: thanks :)
[23:22:44] <pcwalton> it's very easy to accidentally do strange things when package link order affects runtime semantics
[23:22:50] <Eridius> I do agree that they can indeed be used inappropriately
[23:22:53] <mark_edward> you can define it though, youre implementing the language!
[23:23:10] <mark_edward> this stuff is needed for certain things, and ppl will just make hacks to do it
[23:23:14] <pcwalton> no it's not needed
[23:23:26] <pcwalton> just make an init function and call it in main
[23:23:39] <pcwalton> it's going to be very hard to understand no matter how we define it
[23:23:48] <Eridius> it's needed if you want a library to be able to initialize itself without any external code knowing about it
[23:23:57] <pcwalton> that is not a Rust goal
[23:24:09] <pcwalton> as far as I'm concerned
[23:24:13] <Eridius> yeah I know. It's obviously a controversial idea
[23:24:20] <pcwalton> see, if you do this your library will never be used in Servo :)
[23:24:27] <pcwalton> we just can't take any libraries that call init()
[23:24:35] <pcwalton> it's caused us too much pain
[23:24:50] <pcwalton> years and years of engineering work because of this one C++ feature
[23:25:03] <kimundi> Eridius: Could still hack that in by making every function a potential lazy initializer ;)
[23:25:14] <Eridius> kimundi: only if you call functions from the package directly
[23:25:14] <strcat> pcwalton: well, we could still provide the guarantee without it being invisible
[23:25:22] <pcwalton> I'm open to considering features that make statics lazy and still feel like statics though
[23:25:24] <pcwalton> to be fair
[23:25:24] <andrew-d_w> pcwalton: From someone who's not familiar with this, why is it such a pain?
[23:25:28] <pcwalton> just no life-before-main :)
[23:25:34] <strcat> library: #[init] fn foo() {}
[23:25:35] <Eridius> kimundi: take Go's database packages. You always use the database package itself rather than the individual database type implementations
[23:25:48] <pcwalton> andrew-d_w: startup time
[23:25:56] <pcwalton> before Firefox can display anything on screen it must run all static initializers
[23:25:57] *** Joins: jstevans (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP)
[23:26:02] <pcwalton> this happens before main() or WinMain() is called
[23:26:08] <strcat> and you'd have to call foo in main if you linked against it
[23:26:10] * strcat shrugs
[23:26:11] <pcwalton> furthermore the seeking behavior is very bad
[23:26:20] <kmc> okay, but they wouldn't be faster if called from main()... you just want to move them later? make them async?
[23:26:21] <pcwalton> what happens is that it seeks all over the executable on disk to find the pages with static initializers
[23:26:24] <Eridius> kimundi: if you say `import _ "github.com/mattn/go-sqlite3"` then the database/sql package automatically gains support for SQLite3 databases, without ever calling anything from the go-sqlite3 package directly
[23:26:31] <pcwalton> kmc: move them later
[23:26:35] <pcwalton> or lazily on demand initialize
[23:26:50] <kimundi> Eridius: I have no idea how that works in go. :P
[23:26:54] <strcat> yeah you can always do this via an atomic bool in a static mut
[23:26:59] <strcat> lazy init
[23:27:00] <kmc> if it's on demand then you also solve the ordering problem
[23:27:03] <andrew-d_w> pcwalton: Huh, fair enough
[23:27:04] <pcwalton> "import" is for namespace resolution not running code :(
[23:27:06] <kimundi> Eridius: Sounds magic
[23:27:09] <kmc> which is part of why people use singletons in C++
[23:27:10] <pcwalton> I never liked that feature in Go
[23:27:13] <Eridius> kimundi: the mere act of linking against the go-sqlite3 package causes it to automatically register its SQLite3 support with the database/sql package
[23:27:18] <jld> static destructors are "fun" too.
[23:27:49] <kimundi> Eridius: Magic, got it.
[23:27:53] <pcwalton> the thing I don't like about Go's database use case is that there's no need for anything to happen at *runtime* there
[23:27:56] <jld> Thread A calls exit() and goes into automagical dtor code that frees memory that Thread B is using, which is protected in locks in all the explicitly written code that touches it.  And so on.
[23:27:57] <Eridius> the use of `import` here is purely because that is how you declare a dependency on a package. the `_` means that you're not actually importing anything into the local scope, you're just doing this for its side-effects (i.e. init() methods)
[23:27:59] <pcwalton> it's purely a compile-time thing.
[23:28:10] <pcwalton> dependencies shouldn't *have* side effects IMHO
[23:28:13] <pcwalton> it's a dependency
[23:28:18] <Eridius> pcwalton: what do you mean? database/sql needs to have the SQLite3 handler registered and associated with the "sqlite" string
[23:28:21] <strcat> pcwalton: I agree
[23:28:26] <pcwalton> that can be a static table, no?
[23:28:37] <strcat> it's done a lot in python
[23:28:43] <Eridius> pcwalton: except database/sql doesn't know about all the possible database types at compile-time
[23:28:44] <strcat> the worst example I can think of is nltk
[23:28:51] <Eridius> notably, the SQLite3 support is via an external package
[23:28:55] <strcat> there are modules I want a little utility function from
[23:29:00] <strcat> but they run 3-10s of init code
[23:29:01] <strcat> :|
[23:29:01] <pcwalton> sure, at the time you try to connect to a database it can query the packages loaded
[23:29:09] <pcwalton> there's no need for that to happen before "main"
[23:29:16] <Eridius> the only alternative is to do something like `import "github.com/mattn/go-sqlite3"` followed by `sqlite.Register()` or somesuch at main() time.
[23:29:19] <mcpherrin> Why can't I "extern mod extra;" in a foo.rs and then omit it from my main.rs that does "mod foo;" that doesn't itself touch libextra?
[23:29:42] <cmr> mcpherrin: you can, you're probably just misunderstanding how the module system works.
[23:29:44] <pcwalton> there could be a way for database/sql to query the list of libraries loaded
[23:29:45] <pcwalton> that's fine
[23:29:58] <tiffany> can you match against strings?
[23:29:58] <Eridius> pcwalton: if the language included runtime information about all the loaed packages, and allowed for metadata on them (so the database packages could register a database entrypoint), then sure. But that's a non-trivial change
[23:30:05] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:30:07] <pcwalton> I much prefer that to life-before-main
[23:30:13] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[23:30:15] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:30:22] <pcwalton> I really think that life-before-main is a big mistake
[23:30:22] <tiffany> er, not literals
[23:30:32] *** Quits: jstevans (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP) (Connection reset by peer)
[23:30:33] *** Joins: jstevans (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP)
[23:30:34] *** Joins: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP)
[23:30:50] <tiffany> as in, a string which starts with a certain letter, and then grab everything after it, like you can do with vectors
[23:30:54] <mcpherrin> cmr: I probably don't :)
[23:31:02] <mcpherrin> cmr: let me get a minimal test case
[23:31:07] <pcwalton> sorry for the visceral reaction here, I have war wounds from Firefox :)
[23:31:08] <Eridius> there's also some cases where you want to abort on failure before doing anything at all, i.e. you might have a text template you want to evaluate and if it fails (because someone removed the file) you want to crash before even entering main
[23:31:13] <andrew-d_w> rusti: "foobar"[0]
[23:31:14] -rusti- 102u8
[23:31:16] <strcat> tiffany: no, but you can use iterators for stuff like that
[23:31:18] <pcwalton> that's the job for macros
[23:31:20] *** jorendorff is now known as jorendorff_away
[23:31:28] <pcwalton> anything statically evaluable should not be evaluated at runtime
[23:31:28] <strcat> tiffany: well not that exact use case, but some of them :)
[23:31:32] <pcwalton> evaluate it at compile time
[23:31:35] <jld> rusti: ""[0]
[23:31:36] -rusti- 226u8
[23:31:59] <strcat> jld: a fun thing: index-assign in strings is unsound
[23:32:12] <strcat> you can use it to make them invalid UTF-8 and then cause disaster with some other methods
[23:32:37] <steveklabnik> bam: https://github.com/mozilla/rust/pull/9239
[23:32:57] <Eridius> pcwalton: well sure, if you have the capability of doing something at compile-time. But you'd have to write some intermediate tool that compiles the template and produces a source file of code containing static values, which then gets compiled again by the "real" compiler. 
[23:32:59] <andrew-d_w> rusti: { let s = "foobar"; match s[0] { 'a' => println("hello"), _ => println("goodbye") } }
[23:33:00] -rusti- <anon>:7:42: 7:48 error: mismatched types: expected `u8` but found `char` (expected u8 but found char)
[23:33:00] -rusti- <anon>:7          { let s = "foobar"; match s[0] { 'a' => println("hello"), _ => println("goodbye") } }
[23:33:00] -rusti-                                                    ^~~~~~
[23:33:00] -rusti- error: aborting due to previous error
[23:33:01] -rusti- application terminated with error code 101
[23:33:09] <andrew-d_w> rusti: { let s = "foobar"; match s[0] { 97 => println("hello"), _ => println("goodbye") } }
[23:33:10] -rusti- goodbye
[23:33:10] -rusti- ()
[23:33:11] <Eridius> it's certainly possible to do that, but it's awkward, and not really feasible for any external packages
[23:33:17] <pcwalton> the thing is, for anything production quality we have to do that
[23:33:44] <pcwalton> there is no way a web browser that does things at startup (before the user sees *anything*) can ship
[23:33:51] <pcwalton> that could have been done at compile time
[23:34:21] <mark_edward> pcwalton: without constexpr, you can't really do much in rust a t compile time
[23:34:29] <pcwalton> mark_edward: then we should fix that problem
[23:35:02] <Eridius> make: *** No rule to make target `[...]/src/libuv/ChangeLog', needed by `rt/i686-pc-mingw32/stage0/libuv/libuv.a'. Stop.
[23:35:05] <Eridius> wat
[23:35:13] <kimundi> haha
[23:35:25] <acrichto> Eridius: I just ran into that, check the logs for gyp failing
[23:35:35] <acrichto> apparently gyp still emits a Makefile if it fails...
[23:35:42] <Eridius> hrm, I just ran `make clean` already
[23:35:48] <acrichto> I was missing xcodebuild...
[23:35:58] <Eridius> this is mingw32. There's no xcodebuild
[23:36:09] <acrichto> oh, windows libuv is also fairly different
[23:36:16] <acrichto> oh wait you need to reconfigure
[23:36:20] <Eridius> make should reconfigure for me
[23:36:20] <andrew-d_w> rusti: { let s = "foobar"; match s[0] { 97 => println(s.slice_chars(1, s.len()), _ => println("goodbye") } }
[23:36:21] -rusti- <anon>:7:107: 7:108 error: incorrect close delimiter: `}`
[23:36:21] -rusti- <anon>:7          { let s = "foobar"; match s[0] { 97 => println(s.slice_chars(1, s.len()), _ => println("goodbye") } }
[23:36:21] -rusti-                                                                                                                     ^
[23:36:21] -rusti- application terminated with error code 101
[23:36:24] <acrichto> instead of rt/$target it's $target/rt
[23:36:28] <andrew-d_w> rusti: { let s = "foobar"; match s[0] { 97 => println(s.slice_chars(1, s.len())), _ => println("goodbye") } }
[23:36:28] -rusti- goodbye
[23:36:29] -rusti- ()
[23:36:33] <andrew-d_w> rusti: { let s = "afoobar"; match s[0] { 97 => println(s.slice_chars(1, s.len())), _ => println("goodbye") } }
[23:36:33] -rusti- foobar
[23:36:34] -rusti- ()
[23:36:37] *** Joins: jstevans1 (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP)
[23:36:37] *** Quits: jstevans (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP) (Connection reset by peer)
[23:36:38] * Eridius backdated to a 5-day-old tree, so maybe there's a dependency issue?
[23:36:47] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[23:36:58] <acrichto> Eridius: if you reconfigure, it doesn't re-run make, and you need the new makefiles
[23:37:10] <acrichto> auto-reconfiguring in a Makefile catches some things, but not all
[23:37:17] <acrichto> to be 100% safe you have to configure first, then make
[23:37:26] <andrew-d_w> tiffany: in case you didn't already see it: checkout the rusti line above
[23:37:27] <Eridius> I wish there was an easy way to say `./configure --use-last-args`, because make will re-use the last args for me
[23:37:31] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[23:37:43] <Eridius> we should have something like 'a'u8 
[23:37:44] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[23:37:56] <tiffany> that isn't what I had in mind
[23:38:00] <strcat> Eridius: b'a', b"foo"
[23:38:01] <acrichto> Eridius: yeah I just kinda hack around it with ^r
[23:38:03] <pcwalton> Eridius++
[23:38:10] <pcwalton> oh, we do have b'a'?
[23:38:18] <Eridius> rusti: b'a'
[23:38:18] <acrichto> rusti: bytes!('a')
[23:38:19] -rusti- <anon>:7:10: 7:13 error: expected one of `; }` but found `'a'`
[23:38:19] <strcat> pcwalton: no, but I just think it's nicer
[23:38:19] -rusti- <anon>:7          b'a'
[23:38:19] -rusti-                    ^~~
[23:38:19] -rusti- application terminated with error code 101
[23:38:19] -rusti- &[97u8]
[23:38:26] <tiffany> I wanted to do more match "foobar" {"foo"+rest => println(res);} and get "bar" out
[23:38:26] <strcat> pcwalton: "foo"u32 would be weird - what is it?
[23:38:27] <acrichto> not quite the same
[23:38:28] <pcwalton> ah
[23:38:30] <Eridius> strcat: 'a'u8 is consistent with integral literal suffixes
[23:38:32] *** Joins: joelteon (joel@moz-317E8D0C.io)
[23:38:36] <pcwalton> we want something there
[23:38:41] <pcwalton> FourCC support would be great ;)
[23:38:46] <strcat> Eridius: yeah but what encoding does it use?
[23:38:49] <pcwalton> for porting rustc to use atom trees
[23:38:49] <Eridius> the only real gotcha is what do you do with non-ascii chars? ''u8
[23:38:57] <strcat> Eridius: say for "foo"u32
[23:38:59] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[23:39:11] <Eridius> strcat: I'm talking char literals, not strings
[23:39:22] <strcat> well, I think we should have a consistent way to do both
[23:39:26] <andrew-d_w> tiffany: ah, gotcha.  maybe splitting the string with split_iter(), and then doing vector matching?
[23:39:27] <Eridius> I suppose the sensible approach is treat the char literal as if it were an integral literal for the codepoint, with the given suffix
[23:39:27] <pcwalton> 'TRAI'u32 'TYPE'u32 'FUNC'u32 'ITEM'u32 'INDX'u32
[23:39:32] <Eridius> so it would do the same thing as 234234u8
[23:39:36] <pcwalton> I want these to replace all the tag_foo_bar we have
[23:39:57] *** Quits: jstevans1 (Instantbir@C5B3630C.9EA65473.DDE5D3F6.IP) (Ping timeout)
[23:39:59] <Eridius> hey it's an OSType!
[23:40:01] <strcat> pcwalton: could use a syntax ext, but the big issue is that they don't work in many places like match yet
[23:40:02] *** Quits: strmpnk (strmpnk@moz-49D42D15.c.ircrelay.com) (Quit: IRCRelay - http://ircrelay.com)
[23:40:04] <pcwalton> yup ;)
[23:40:07] <Eridius> Imma go write rust code for Mac OS 9.1 now
[23:40:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:40:29] <olsonjeffery> tiffany: i know you were asking after file io stuff, here's the PR i made today https://github.com/mozilla/rust/pull/9235
[23:40:31] <pcwalton> you laugh, but I think it would speed up the compiler :) vuint reading is high in the profile
[23:40:42] <pcwalton> can't get much faster than OSTypes
[23:40:51] <cmr> What is an OSType?
[23:40:56] <Eridius> pcwalton: hrm, the wikipedia page on FourCC doesn't talk about endian issues. We'd have to define that
[23:41:09] <cmr> Ah, http://en.wikipedia.org/wiki/OSType ?
[23:41:10] <Eridius> cmr: it's an int32 where each byte is a printable ASCII code
[23:41:11] <pcwalton> cmr: four character code, optimized for speed and kinda-sorta-human-readibility
[23:41:17] <pcwalton> readability*
[23:41:28] <Eridius> it came from Mac OS which means it was probably big endian there, but I don't know what endianness the video codecs that adopted this use
[23:41:34] <pcwalton> Windows uses it a lot too
[23:41:41] <pcwalton> in RIFFs
[23:41:56] <Eridius> magic numbers in data formats are typically OSTypes
[23:42:05] <pcwalton> it's fallen out of favor but hey, I want speed...
[23:42:07] <Eridius> which I guess are called FourCC now
[23:42:15] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:42:34] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[23:43:01] <strcat> it's nice seeing the vectorized loops LLVM is making for us now...
[23:43:04] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:43:07] <pcwalton> strcat: oh, sweet
[23:43:09] <pcwalton> got an example?
[23:43:34] <strcat> pcwalton: fn foo(xs: &mut [f32]) { for x in xs.mut_iter() { *x += 5.0 } }
[23:44:04] <strcat> pcwalton: the vec iterator is the same as C++ iterators now
[23:44:10] <strcat> finally figured out what was making it not optimize
[23:44:16] <strcat> well, a few things
[23:44:21] <pcwalton> awesome
[23:44:31] <andrew-d_w> rusti: { let s = "foobar"; match s.iter().collect { [0x66, 0x6f, 0x6f, ..rest] => println(rest), _ => println("other") } }
[23:44:32] -rusti- <anon>:7:35: 7:51 error: attempted to take value of method `collect` on type `std::str::CharIterator<>` (try writing an anonymous function)
[23:44:33] -rusti- <anon>:7          { let s = "foobar"; match s.iter().collect { [0x66, 0x6f, 0x6f, ..rest] => println(rest), _ => println("other") } }
[23:44:33] -rusti-                                             ^~~~~~~~~~~~~~~~
[23:44:33] -rusti- error: aborting due to previous error
[23:44:33] -rusti- application terminated with error code 101
[23:44:34] <strcat> the last/strangest one was that it was unhappy with us converting ptrs to integers to compare equality
[23:44:46] <strcat> so I just added raw ptrs to the binop table...
[23:44:54] <strcat> 2 character fix ;p
[23:45:03] * andrew-d_w high-fives strcat
[23:45:06] <strcat> well, almost
[23:45:24] * strcat thinks it was really 3 lines
[23:46:29] <echristo> strcat: *puzzles* did you change something in llvm or in rustic?
[23:46:39] <strcat> echristo: rustc
[23:46:47] <echristo> okie.
[23:46:50] <kimundi> pcwalton: Wouldn't it be faster to define enums for there?
[23:47:04] <strcat> echristo: we always generate inbounds getelementptr instructions now, which is the big one
[23:47:13] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:47:13] *** ChanServ sets mode: +o tjc
[23:47:22] <pcwalton> kimundi: yeah, we could
[23:47:22] <strcat> LLVM refused to believe the loops weren't possibly wrapping around back to themselves or something like that...
[23:47:33] <echristo> strcat: oh, nice.
[23:47:40] <echristo> yep. because it wasn't inbounds.
[23:47:52] <strcat> echristo: and also, we did ptr <-> int stuff, which totally throws off alias analysis
[23:48:13] <strcat> + we mark ~ parameters and ret values as noalias now, which can sometimes help...
[23:48:17] <echristo> yup.
[23:48:18] <pcwalton> the alias analysis stuff might help other stuff too?
[23:48:20] <echristo> very nice.
[23:48:22] <kimundi> rusti: stringify!(-"foob")
[23:48:22] -rusti- "- \"foob\""
[23:48:35] <strcat> echristo: fixing our misuse of & in the codebase would mean being able to mark &T for T: Freeze readonly :)
[23:48:48] *** victorporof_ is now known as victorporof
[23:48:53] <tiffany> rusti: ~["foo"].connect(".")
[23:48:54] -rusti- ~~"foo"
[23:49:08] <Luqman> strcat: all those transmutes that would break that :P
[23:49:18] <pcwalton> well, we can just turn it off if we see transmutation
[23:49:34] <strcat> Luqman: well, it'd only be on params
[23:49:42] <strcat> so it mostly means making drop take self by-value or &mut
[23:49:45] <doomlord__> would it work to make self:&Self by default (like *this) and &self would be for self as a value
[23:49:55] <strcat> Luqman: if we output TBAA data, we could mark *any* ptr as readonly
[23:49:57] <strcat> but we don't
[23:49:59] <doomlord__> (wasn't following thewhole discussion)
[23:50:00] <pcwalton> strcat: I have a proposal for by-value drop
[23:50:05] <pcwalton> that I'll bring up tomorrow
[23:50:13] <aatch> I don't think the transmutes should matter, since it would just treat the return value of the transmute as a new value
[23:50:16] <kimundi> hmm... fourcc!("fooo") == ['f' as u8, 'o' as u8, 'o' as u8, 'o' as u8] as u32 / fourcc!(-"fooo") == ['o' as u8, 'o' as u8, 'o' as u8, 'f' as u8] as u32
[23:50:16] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Client exited)
[23:50:42] <Luqman> aatch: there are some drop methods that transmute self to be mutable
[23:50:47] <cmr> brson: Oh! Ping
[23:50:54] <brson> cmr: pong
[23:51:17] <cmr> brson: You told me to ping you today about dialing into the meetings
[23:51:25] <pcwalton> strcat: what commit is the one that got vectorization working? alex gaynor is asking me on twitter
[23:51:32] <aatch> Luqman, yeah, but that shouldn't matter from an alias analysis pov since the return from the transmute a different value from LLVM's point of view.
[23:51:32] <brson> cmr: right
[23:51:40] <strcat> pcwalton: well, I recently had to revert a regression in our offset intrinsic
[23:51:42] <strcat> hm
[23:51:56] <strcat> pcwalton: a241deb97931b7c993e88c600d2b35912730a7e8
[23:52:24] <cmr> I have the past 184 and counting commits built, if anyone wants to play around.
[23:52:25] <kimundi> doomlord__: You mean make the similarity to pattern destructuring work for us by inverting both meanings? I think there are two things that speak against it.
[23:52:47] *** Joins: mib_yn02y7 (Mibbit@moz-E5954BA5.f3.protectedgroup.com)
[23:53:09] <kimundi> doomlord__: 1. Waaaaay to late. 2. & destructuign is not the same as by value, in fact it only works for implicit copyable types by making, well, a copy
[23:53:29] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[23:53:37] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: hoverbear)
[23:53:42] *** Quits: mib_yn02y7 (Mibbit@moz-E5954BA5.f3.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[23:54:36] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[23:54:36] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:55:28] <strcat> pcwalton: still need to get exchange_malloc's return value marked noalias too
[23:55:46] <strcat> but I'm considering submitting a patch to LLVM to make their malloc/free special-casing use something like an attribute...
[23:55:54] *** Joins: snadon (chatzilla@53E4C32F.E454E1CD.47C41102.IP)
[23:55:55] <strcat> the really simple dead-store elimination would be nice
[23:55:58] <pcwalton> right
[23:56:07] <pcwalton> it always bugged me that they hard coded those names
[23:56:22] <strcat> yeah we miss out on the libcall optimizations
[23:56:28] <strcat> but in general, all they do is generate inline code
[23:56:36] <strcat> so we can just not use those C functions
[23:56:46] <strcat> (but malloc/free... those are more than the usual special cases)
[23:56:55] <aatch> pcwalton, well it's only kinda hard-coded. It's hard-coded in the sense that the pass is specific to it.
[23:57:24] <aatch> but there's nothing stopping somebody from writing their own pass that does the same thing with different functions.
[23:58:19] *** Quits: tikue_ (tkuehn@37EC8A1F.D038900B.689607DE.IP) (Quit: tikue_)
[23:58:27] <strcat> aatch: the simplify libcalls pass is actually gone
[23:58:33] <strcat> they integrated into stuff like instcombine afaik.
[23:58:40] <aatch> strcat, it is?
[23:58:42] <aatch> Oh...
[23:58:42] <strcat> aatch: yep
[23:58:48] <strcat> you could still do it yourself
[23:58:54] <aatch> Well that seems like the wrong direction...
[23:58:54] <strcat> but you'd probably need to add attributes...
[23:59:06] <aatch> strcat, or metadata nodes
[23:59:25] <strcat> our problem is that we need to generate wrappers around FFI calls
[23:59:29] *** Quits: a_m0d|home (a_m0d@moz-1CA91AA3.acanac.net) (Quit: Leaving.)
[23:59:50] <strcat> so it will bubble up stuff like noalias within a crate, but not the special casing on symbols
