[00:00:10] <aatch> The issue with SO is that old solutions don't always get updated.
[00:00:25] <sfackler> johnsoft: fixed! https://github.com/sfackler/rust-postgres/commit/e22ef497a7c2df7f61abf22fd02d558b2aa5f4e2
[00:00:26] <ray> and google links to a lot of dead links
[00:00:31] <ray> with xml something errors
[00:00:43] <aatch> I mean, we recently rewrote *all* of the IO lib.
[00:00:57] *** Joins: fyolnish (fyolnish@moz-6F148BEC.uqwimax.jp)
[00:01:20] *** Quits: zq (p@moz-4C4640FD.com) (Quit: leaving)
[00:01:27] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:01:38] <ray> tbh the new examples looked way better
[00:01:49] *** Joins: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP)
[00:02:03] *** Joins: ross (r@moz-35D0ADAB.clr.io)
[00:02:16] <ray> aatch: what about async xD
[00:02:25] <aatch> What about it?
[00:02:28] <ray> then again async is bullshit bingo
[00:02:34] <ray> async io
[00:02:34] <mcpherrin> the rust website used to be littered with out of date documentation people would find via google
[00:02:40] *** Quits: fyolnish (fyolnish@moz-6F148BEC.uqwimax.jp) (Ping timeout)
[00:02:41] <johnsoft> sfackler- awesome!
[00:02:49] <johnsoft> and i'm finally up and running again
[00:03:07] <johnsoft> albeit with a 6-line rustc command
[00:03:27] <sfackler> haha
[00:03:47] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[00:03:47] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[00:03:53] *** Quits: Ferreus (ferreus@moz-D830B08C.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[00:03:59] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[00:04:13] *** Quits: Seich (seich@moz-3D9F5ED0.webfaction.com) (Quit: Bye bye)
[00:04:20] *** Joins: Seich (seich@moz-3D9F5ED0.webfaction.com)
[00:05:46] <ray> hows servo coming along btw?
[00:05:47] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:06:01] *** Seich is now known as IRCMonkey36827
[00:06:38] <aatch> ray, no idea, ask in #servo
[00:06:57] * aatch checks that it's the right channel
[00:07:24] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[00:07:29] *** seich_ is now known as seich
[00:07:40] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[00:07:52] *** Joins: a_m0d (a_m0d@moz-322A4DE4.acanac.net)
[00:08:42] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:09:28] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[00:10:36] *** Parts: wopr2014 (wopr14@moz-1E2B7C70.dip0.t-ipconnect.de) ()
[00:11:16] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[00:13:30] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[00:13:53] *** Quits: espindola (espindola@moz-8F837B07.dsl.teksavvy.com) (Input/output error)
[00:13:53] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[00:14:17] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[00:15:37] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:15:48] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:16:15] <igork> hello, i'm trying to understand how to hadle errors in io, is there shorter way than that? https://gist.github.com/wombatkin/3a04e20ecd721f5c4a24
[00:17:58] <ray> igork: haha, you also tried to make an http server
[00:18:47] <igork> ray: no, this is just small http client, but actually its doesnt matter whats goes over tcp in this example
[00:19:19] <igork> what makes me sad - is that mix of condition/option/IoResult here
[00:19:38] <ray> doesnt addr return an option?
[00:19:41] <aatch> igork, it's not brilliant we know and slated to be changed.
[00:20:02] <ray> which means you just match it as for error handling?
[00:20:24] <busylizzy> hm. what if i want to implement Set trait, but operations like 'contains' mutate the data structure? i can't do this?
[00:21:03] <diverse> aatch: are conditions going to be removed?
[00:21:06] <igork> ray: actually i havent checked from_str yet :)
[00:21:13] <ChrisMorgan> busylizzy: correct
[00:21:16] <sfackler> busylizzy: you can either unsafely transmute self to a mutable reference or not implement Set
[00:21:31] <ChrisMorgan> diverse: replaced with dynamically scoped variables: https://github.com/mozilla/rust/issues/10602
[00:22:51] <aatch> Ah, awesome. I always like dynamically scoped variables in LISP
[00:22:52] *** Quits: igork (Igor@9C577557.7893D71C.6E0EE79F.IP) (Ping timeout)
[00:23:09] *** Joins: igork (Igor@9C577557.7893D71C.6E0EE79F.IP)
[00:23:16] <mceier> is it possible to control stack size when spawning thread/task in rust ? e.g. do spawn(stacksize) { whatever; } ?
[00:23:19] <sfackler> busylizzy: acrichto wrote up a splay tree that runs into the same issues, and I can't remember what he decided to do
[00:23:27] <busylizzy> sfackler: is first variant safe? i mean may this lead to segfault?
[00:23:34] <cmr> mceier: spawn_stack
[00:23:35] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:23:40] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[00:23:45] <busylizzy> sfackler: i'm also writing splay tree %)
[00:24:04] <acrichto> busylizzy: https://github.com/alexcrichton/rs-splay
[00:24:08] <sfackler> busylizzy: it won't segfault. You'll have to be careful to make sure that you don't violate any of the aliasing guarantees llvm assumes about immutable references
[00:24:17] <sfackler> but you'll probably be okay
[00:24:24] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:24:26] <acrichto> busylizzy: the only real stickler was the find(&self) method, and knowledge of heap allocations meant it was ok to safely cast::transmute_mut
[00:24:28] <igork> aatch: is there any proposal or maybe some hint about what changes are planned to io?
[00:24:34] *** Quits: a_m0d (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[00:24:35] <sfackler> a safer bet is to wrap the implementation in a RefCell to make sure the mutations are safe
[00:24:36] <mceier> cmr: thanks
[00:24:41] *** Quits: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com) (Ping timeout)
[00:24:57] <aatch> igork, mostly just changing the error handling, I'm not sure of the details though (if there are any)
[00:25:06] <aatch> acrichto, ^^ anything to add?
[00:25:11] <busylizzy> sfackler, acrichto: thanks
[00:25:49] <acrichto> aatch: igork: yeah error handling will be changing (probably moving to just Result), but other than that I/O is stable-ish
[00:26:04] <acrichto> we my shuffle around imports/exports, but the interface is pretty much stable at this point
[00:26:21] <aatch> Thought so
[00:26:21] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[00:26:55] <igork> aatch, acrichto: thanks, will wait impatiently :)
[00:27:30] <aatch> igork, by the way, have you seen rust-http?
[00:27:42] *** Quits: kimundi (kimundi@moz-AEB7B25C.dip0.t-ipconnect.de) (Ping timeout)
[00:27:51] <ray> whats a dynamically scoped var
[00:27:55] <mceier> rusti: do std::rt::thread::Thread::spawn_stack(1024) { println!("test"); };
[00:27:58] -rusti- pastebinned 2 lines of output: http://ix.io/a1z
[00:28:45] <igork> aatch: yes, http request in my sample is just easiest way (for me) to check how TcpStream is working. 
[00:28:50] <aatch> ray, it's a global (or thread-local in this case) variable where the value changes as you go through the scopes.
[00:29:02] <aatch> igork, fair enough.
[00:29:11] <ray> aatch: ok, sounds weird
[00:29:18] *** Quits: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP) (Input/output error)
[00:29:33] *** Joins: espindola (espindola@moz-BB113AD2.cr.net.cable.rogers.com)
[00:29:41] <ray> is that a good thing to have?
[00:29:42] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:29:47] <aatch> ray, it's a different concept than most are used to, but incredibly powerful when you use it correctly.
[00:30:30] <igork> btw i saw that rust-http is just unwarping socket, probably because api is going to change. maybe i should do the same in my rust learning for now
[00:31:11] *** Quits: blank_name (blank_name@E7821509.94CCB18F.53C6B850.IP) (Quit: leaving)
[00:31:13] <aatch> So using the not_utf case brson mentioned, you'd set some variable to a value that controls the error-handling action.
[00:31:30] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:31:33] <mceier> rusti: do std::rt::thread::Thread::spawn_stack(16*1024) {};
[00:31:34] -rusti- ()
[00:31:38] <mceier> cmr: rust doesn't support stack sizes smaller than 16kB ? 
[00:32:12] <aatch> What happens is that value gets pushed onto a thread/task-local stack.
[00:32:31] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[00:32:46] <aatch> When the scope that you set the variable in ends (either by the function returning or unwinding), that value gets popped off the stack.
[00:32:48] *** Joins: blank_name (blank_name@E7821509.94CCB18F.53C6B850.IP)
[00:34:11] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:34:49] <ChrisMorgan> igork: because rust-http doesn't trap the condition, the only case where None will actually be returned is if the caller traps the condition itself—if nothing traps it, it will fail instead and not actually return None
[00:35:25] <Jemaclus> let five = 10 / 2;
[00:35:33] <Jemaclus> how would I cast five to a float?
[00:35:34] <yuriks> rusti: do std::rt::thread::Thread::spawn_stack(2*1024) { println!("test"); };
[00:35:37] -rusti- pastebinned 2 lines of output: http://ix.io/a1z
[00:35:45] <yuriks> rusti: do std::rt::thread::Thread::spawn_stack(8*1024) { println!("test"); };
[00:35:48] -rusti- pastebinned 2 lines of output: http://ix.io/a1z
[00:36:01] <aatch> Jemaclus, you can do (10 / 2) as f{32,64};
[00:36:07] <yuriks> mceier: that's strange. Does println really do so much magic?
[00:36:10] <Jemaclus> ah, cool
[00:36:11] <Jemaclus> thanks
[00:36:13] *** Joins: zmthy_ (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[00:36:16] *** Quits: zmthy_ (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[00:36:26] <ChrisMorgan> Jemaclus: do you want integer division then turned into a float, or do you want float division?
[00:36:26] <mceier> yuriks: even without println it fails in assert
[00:37:05] <igork> ChrisMorgan: and if contion is handled - it will fail in unwarp, right?
[00:37:15] <igork> s/contion/condition/
[00:37:28] <ChrisMorgan> If the condition is handled and returns None; correct.
[00:38:02] * ChrisMorgan hasn't worked with conditions in a while, that might not be quite correct, can't remember the details of continuing from it
[00:38:09] <aatch> mceier, it's pthreads that doesn't like such a small stack, btw
[00:39:09] <mceier> aatch: but the assert is from rust... shouldn't pthread return the error/abort rather than rust fail ?
[00:39:45] <aatch> No, it looks like our error handling there isn't particularly good.
[00:39:45] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Computer has gone to sleep.)
[00:40:08] <aatch> We just assert that the call to pthread_attr_setstacksize was a success (equal to 0)
[00:40:08] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:40:35] <aatch> However, PTHREAD_STACK_MIN is 16384 bytes according to the man page.
[00:40:43] <mceier> ah, ok ;)
[00:41:08] <igork> ChrisMorgan: well, waht i see - fail! is kinda last try to post message before program dies, which is not very useable in production code. this is how it looks for me, and very probably i'm wrong.
[00:41:42] <ChrisMorgan> igork: fail! kills off that task but does not kill the program as a whole. It is certainly useful.
[00:42:02] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:42:18] <ChrisMorgan> In another language you might have an uncaught exception that kills off a thread but lets the rest of the program survive—task failure is basically that.
[00:43:11] <Jemaclus> ChrisMorgan: well, i want (3 / 4) to be 0.75
[00:43:54] <ChrisMorgan> Jemaclus: then you want something like (3 as f64) / (4 as f64)
[00:44:31] <diverse> rusti: (3.0/4)
[00:44:34] -rusti- pastebinned 7 lines of output: http://ix.io/a1A
[00:44:39] <ChrisMorgan> If they're literals, you can use float literals instead, e.g. 3. / 4.
[00:44:44] <ChrisMorgan> rusti: 3. / 4.
[00:44:45] -rusti- 0.75f64
[00:44:57] <Jemaclus> Ah, I see. That's what I want. Thanks.
[00:44:58] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[00:44:58] <Jemaclus> :)
[00:45:26] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Lingo - http://www.lingoirc.com)
[00:45:43] <ChrisMorgan> A selection of valid literals: 3f32, 3f64, 3.0f64, 3.0, 3.
[00:45:56] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[00:46:04] <mitsuhiko> what's the recommended style to use a variable for RAII only
[00:46:19] <mitsuhiko> is let _ = Mutex::new() etc. supposed to work?
[00:46:26] <mitsuhiko> or should i use a closure?
[00:46:35] *** Joins: zz_kimundi (kimundi@moz-372D6D0F.dip0.t-ipconnect.de)
[00:46:46] <aatch> mceier, https://github.com/mozilla/rust/issues/11694
[00:46:54] *** zz_kimundi is now known as kimundi
[00:46:59] <dbaupp> mitsuhiko: `let _dummy = mutex.take();`, I think
[00:47:32] <igork> ChrisMorgan: well, i imagine one example. lets assume that we have one task listening for upcoming connections (listener), and something bad is happening when it accepting one and listener task is fails. so whole server stops working from caller perspective. probably listener can be designed differently. I'll look at your code again now :)
[00:47:53] <mceier> aatch: I would prefer better error message ;)
[00:48:19] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[00:48:32] <aatch> mceier, and I'd prefer it clamp the value, hence opening an issue about it.
[00:48:34] <mceier> aatch: at least when I set stack size explicitly, I don't expect to get it clamped...
[00:49:07] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[00:49:24] <aatch> However, I do see the value on both sides, hence the issue
[00:49:25] <ercxx> does rustc look at $RUST_HOME ?
[00:49:33] <mceier> ok ;)
[00:49:53] <ChrisMorgan> igork: if a connection fails then that task will die; that is why rust-http puts each connection into its own task; the listener will continue happily if a connection dies unexpectedly or such.
[00:51:04] <Tobba> also wait, eddyb, an llvm! macro?
[00:51:11] <Tobba> I mean cmr, dangit
[00:52:25] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:53:17] *** Joins: mentero (mentero@moz-D61C6F02.proxnet.pl)
[00:53:35] <aatch> I'm not strongly attached to either option though. Both have pros and cons.
[00:53:50] <aatch> Clamping always works, but raises memory usage silently.
[00:54:12] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[00:54:18] *** Quits: Amaranthus (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[00:54:18] *** Quits: dLog (anonymous@moz-8FAE8709.eastlink.ca) (Ping timeout)
[00:54:18] *** Quits: bgmerrell (bgmerrell@moz-AFAF64AB.members.linode.com) (Ping timeout)
[00:54:19] *** Joins: dLog (anonymous@moz-8FAE8709.eastlink.ca)
[00:54:51] <aatch> Throwing an error either means using the largest minimum stack size for all platforms, which is more memory than strictly needed in some cases.
[00:54:52] <igork> ChrisMorgan: well, TcpListener::listen().unwrap() and TcpAcceptor::accept().uwrap() may fail too... but nevermind, i didnt checked that part in rust-hhtp
[00:55:04] <aatch> Or it means some platforms will error and others won't.
[00:55:35] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[00:55:47] <ChrisMorgan> igork: if listen() fails, there's kinda not much to do, is there?
[00:55:58] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:57:08] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:57:15] <Jemaclus> http://pastebin.com/XBgN0RtF
[00:57:40] <Jemaclus> this look ok? I feel like I'm missing something when it comes to the histogram vector... like, I could skip line 16 somehow
[00:58:14] <aatch> line 16 is blank
[00:58:17] <mceier> aatch: well, if I want my code to be portable across all platforms, I think I shouldn't be setting stack size explicitly
[00:58:52] <aatch> mceier, good point, however it's still something to think about.
[00:59:25] <mceier> yes ;)
[00:59:26] <Jemaclus> aatch: ha, i mean line 7
[00:59:29] <aatch> Jemaclus, there's a bunch of stuff in std::iter that would help.
[00:59:45] <Jemaclus> ok, i'll check it out.
[01:00:10] <mitsuhiko> i can't wait for conditions to die.
[01:00:12] <aatch> you could probably use a fixed-size vector too for the histogram.
[01:00:15] <igork> ChrisMorgan: looks like you're right, nothing to handle in listen. for accept this can be some solution if socket limit is reached
[01:00:31] <aatch> `let histogram = [0,..256]`
[01:00:34] <mitsuhiko> until then, does anyone know if i can make this nicer? https://github.com/mitsuhiko/redis-rs/commit/93742282cfe561d983c1271857239fb9e2539298
[01:00:51] <aatch> which is a fixed size vector with 256 elements, each 0.
[01:01:01] <aatch> Jemaclus, ^^
[01:01:33] *** Joins: fyolnish (fyolnish@moz-6F148BEC.uqwimax.jp)
[01:01:53] <Jemaclus> ah
[01:02:00] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Quit: Konversation terminated!)
[01:02:21] <ChrisMorgan> igork: in rust-http (src/http/server/mod.rs), the io_error condition that accept() can raise is trapped and handled intelligently.
[01:02:32] <aatch> it should coerce into a slice most of the time too.
[01:03:08] <Jemaclus> yeah, i see that. cool
[01:03:19] *** Quits: fyolnish (fyolnish@moz-6F148BEC.uqwimax.jp) (Ping timeout)
[01:03:51] *** Joins: fyolnish (fyolnish@moz-6F148BEC.uqwimax.jp)
[01:04:02] <aatch> Jemaclus, also, you should be taking a &str there, not a ~str since you don't need to own the string.
[01:04:38] <carllerche> If I have a fn that returns &'a [~str], how can I get &'a str  out of it w/ an offset?
[01:04:51] <igork> ChrisMorgan: ah, got it. thanks for hints, lets rust it all around :)
[01:05:19] <Jemaclus> aatch: what's the downside of ~str vs &str?
[01:05:49] <aatch> carllerche, `let s : &str = foo[idx];` I *think*.
[01:05:56] <aatch> Might need a little more massaging.
[01:06:09] <ray> isnt a reference and a pointer the same thing btw?
[01:06:10] <aatch> Jemaclus, taking a ~str requires the caller to copy.
[01:06:48] <aatch> ray, technically, but it gets a little muddle when talking about &str, &[] and trait objects.
[01:06:58] <aatch> muddled*
[01:07:37] <aatch> Jemaclus, a ~str is an owned type, meaning that you own it (ie, the data), and nobody else does.
[01:08:01] *** Quits: Jesin (Jesin@moz-3114216B.eecs.lehigh.edu) (Quit: Leaving)
[01:08:20] <Jemaclus> ah, gotcha.
[01:08:23] <aatch> So taking one in a function argument means the caller "moves" the string into that function.
[01:08:35] <carllerche> aatch: so I'm actually trying to wrap the &str in an option, not sure if that is breaking it
[01:08:48] <aatch> carllerche, code?
[01:08:49] <carllerche> I am getting: error: mismatched types: expected `std::option::Option<&'a str>` but found `std::option::Option<~str>` (str storage differs: expected `&'a ` but found `~`)
[01:09:13] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[01:09:32] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[01:09:39] <ChrisMorgan> carllerche: vector[index].as_slice()
[01:09:45] <carllerche> https://gist.github.com/carllerche/6fe536a972353120ccee
[01:10:05] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[01:10:05] <Jemaclus> aatch: so this is better: http://pastebin.com/mwWg66K3
[01:10:06] <Jemaclus> ?
[01:10:19] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[01:10:40] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[01:10:41] <aatch> Jemaclus, generally, if you need to own the data, take an owned type (which lets the called decide if it wants to copy or not), otherwise take a borrowed reference/slice
[01:10:43] <Jemaclus> i can drop the return part, too, i guess. make it an expression
[01:11:21] <Jemaclus> aatch: thanks for the tips. it really helped.
[01:11:25] <carllerche> i don't quite grok the difference between vec / str vs other types with regards to pointer types yet
[01:11:26] <aatch> Jemaclus, why are you casting the length to an int?
[01:12:02] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[01:12:06] <aatch> carllerche, it's a little confusing because of the lack of "Dynamically Sized Types", which would unify regular types and []/str
[01:12:46] <aatch> Basically, DSTs are types that have a size that isn't known until runtime, that means that can only be represented through a type that *does* have a fixed size.
[01:12:49] <Jemaclus> that's a good question.
[01:13:02] <aatch> i.e., a pointer
[01:13:36] <mceier> https://gist.github.com/anonymous/8532506 <- this one for some some reason displays easter egg... ;)
[01:13:46] <mceier> is it shown on every runtime error in rust ?
[01:13:49] *** Joins: igork1 (Igor@9C577557.7893D71C.6E0EE79F.IP)
[01:13:54] <aatch> mceier, I think so.
[01:14:04] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[01:14:05] <aatch> "You've met with a terrible fate, haven't you?"
[01:14:11] <dmac> Hi, simple question, but I'm unable to find the correct combination of sigils to make this work: https://gist.github.com/dmac/8532552. What am I missing?
[01:14:12] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[01:14:16] *** Quits: igork (Igor@9C577557.7893D71C.6E0EE79F.IP) (Ping timeout)
[01:14:33] <mceier> "There are not many persons who know what wonders are opened to them in the stories and visions of their youth;"
[01:14:46] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:14:47] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:14:59] *** Quits: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:15:04] <dbaupp> dmac: in this case, the problem is [].iter() yields references to the elements, not the actual elements
[01:15:17] <dbaupp> i.e. &(~str, int)'s pointing into the vector
[01:15:28] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:15:46] *** Quits: KindOne (KindOne@moz-DCBC5EC4.dynamic.ip.windstream.net) (Ping timeout)
[01:15:59] <aatch> mceier, there's a few. Most of them are H.P. Lovecraft references, I think.
[01:16:12] <mceier> yes, I found the source ;)
[01:16:22] <dbaupp> dmac: I'd write that as `[("a", 1), ("b", 2), ("c", 3)].iter().map(|&(s, n)| (s.to_owned(), n)).collect()`
[01:16:31] *** Quits: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP) (Quit: jsonnull)
[01:16:37] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:16:50] <dbaupp> dmac: (note the lack of sigils on the strings: they're replaced by the explicit .to_owned() call>.)
[01:16:53] <dbaupp> s/>//
[01:18:02] <dbaupp> rusti: let map: std::hashmap::HashMap<~str, int> = [("a", 1), ("b", 2), ("c", 3)].iter().map(|&(s, n)| (s.to_owned(), n)).collect(); *map.get(~"a")
[01:18:09] -rusti- pastebinned 7 lines of output: http://ix.io/a1B
[01:18:10] <dmac> I see, and the reason you can't just use .map(|&t| t) is because of the owned string in the tuple?
[01:18:26] <dbaupp> rusti: let map: std::hashmap::HashMap<~str, int> = [("a", 1), ("b", 2), ("c", 3)].iter().map(|&(s, n)| (s.to_owned(), n)).collect(); *map.get(&~"a")
[01:18:29] -rusti- pastebinned 13 lines of output: http://ix.io/a1C
[01:18:31] <dbaupp> dmac: exactly
[01:18:50] <dbaupp> rusti: let tmp = [("a", 1), ("b", 2), ("c", 3)]; let map: std::hashmap::HashMap<~str, int> = tmp.iter().map(|&(s, n)| (s.to_owned(), n)).collect(); *map.get(&~"a")
[01:18:52] -rusti- 1
[01:19:00] <dbaupp> (in theory there is no need for `tmp` on master.)
[01:19:08] <mitsuhiko> wasn't there an issue for removing conditions?
[01:19:25] <dbaupp> mitsuhiko: https://github.com/mozilla/rust/issues/10602
[01:19:51] <mitsuhiko> yeah, found that one, thought there was another one
[01:19:59] <mitsuhiko> think i might have had this in mind: https://github.com/mozilla/rust/issues/9795
[01:20:03] *** Joins: KindOne (KindOne@moz-19D7287.dynamic.ip.windstream.net)
[01:20:17] <dmac> dbaupp: Got it. Thanks!
[01:20:28] *** Quits: espindola (espindola@moz-BB113AD2.cr.net.cable.rogers.com) (Input/output error)
[01:23:43] <mceier> aatch: I think there might be another bug ... no matter how large I set stack size, program from the gist always hits assertion !ptr.is_null() ... I tried with stacks from 16kB up to 128MB...
[01:25:02] *** Joins: charmander (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net)
[01:25:18] *** Quits: simlay (simlay@moz-490DE04A.amandrai.net) (Quit: leaving)
[01:25:20] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[01:25:41] <dmac> dbaupp: To fix borrowed value errors, I needed to write it like this: https://gist.github.com/dmac/8532552. Is there a way to avoid the intermediate `v` and `keys` variables?
[01:26:36] <bstrie_ng> dmac: updating to the most recent bleeding-edge rust version should fix that issue :)
[01:27:15] <dmac> Cool.
[01:28:01] <bmurphy1976> hey guys, I'm working on some experimental bindings for libcurl.  curl_global_init() is supposed to be called one time when the application starts up and is not thread safe.  Is there a way I can wire up a crate to automatically call a method like this on application start?  
[01:28:43] <dbaupp> bmurphy1976: nope
[01:29:12] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[01:29:21] <bmurphy1976> so what's idiomatic rust then, should i have some sort of init method as well the in turn I expect the crate user to invoke?
[01:29:53] <sfackler> bmurphy1976: The next best thing is to use Once to run the initialization: https://github.com/sfackler/rust-openssl/blob/master/ssl/mod.rs#L20
[01:29:59] <mcpherrin> bmurphy1976: This comes up every time somebody wraps lib curl :P
[01:30:05] <sfackler> and then call the init function from anything that needs to be initialized
[01:30:11] <bmurphy1976> must be a nice way to learn rust :)
[01:31:00] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:31:21] <bmurphy1976> ok, that works for me.  I just want to make sure I wasn't missing something obvious here.
[01:31:45] *** Joins: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com)
[01:38:59] *** Joins: espindola (espindola@moz-8F837B07.dsl.teksavvy.com)
[01:39:11] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[01:39:35] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:40:13] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:41:52] <bmurphy1976> ok, another question, now the inverse.  Is there an idiomatic way to run a cleanup method on exit?  Initial thoughts set a private static with a destructor that calls the appropriate cleanup method.
[01:41:58] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:45:04] <sfackler> statics with destructors don't run and will probably be forbidden in the future
[01:45:43] <sfackler> I don't think there's really any way to do cleanup at exit
[01:45:46] <bmurphy1976> so is there some equivalent to python atexit?
[01:45:53] *** Quits: fyolnish (fyolnish@moz-6F148BEC.uqwimax.jp) (Client exited)
[01:46:24] <sfackler> not that I'm aware of
[01:46:57] <bmurphy1976> ok, I'll submit a github issue and see where that gets me.  I've seen no negative consequences for not calling the cleanup method so far, but would like to eventually do it right
[01:46:59] <ercxx> Here's my little project rust-upnp: https://github.com/eerden/rust-upnp.
[01:46:59] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:47:05] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[01:47:28] <sfackler> bmurphy1976: one option is to just give a cleanup function that applications can call when they're done if they want to be valgrind-clean
[01:48:22] <sfackler> there are probably some pretty serious memory safety issues with atexit handlers
[01:48:39] *** Joins: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com)
[01:48:57] <yuriks> can't you use a RAII object at main and let unwinding do the cleanup?
[01:49:00] <sfackler> at least if they run in response to e.g. a signal, or a call to libc exit
[01:49:11] <bmurphy1976> agreed, but nevertheless it seems like an important feature (i.e cleaning up temp folder garbage on failure)
[01:49:11] <sfackler> yuriks: you can absolutely do that
[01:49:14] <orospakr> hey, is it reasonable for me to want rustpkg to build the package in the current working directory?
[01:50:00] <bmurphy1976> yuriks: that's true, I could have an object that serves as the entry point to the library
[01:50:16] <sfackler> bmurphy1976: you'd have to be careful to make sure that that object is a singleton
[01:50:32] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[01:51:03] <bmurphy1976> sure, I'm just exploring the possibilities, nothing is set in stone right now, this is more of a learning exerecise.  I'm approaching it from the perspective of a user of my library.   how can I make it easy for the user.
[01:51:13] <sfackler> yep
[01:51:17] <bmurphy1976> and the less they have ot do the better in m book
[01:51:19] <bmurphy1976> my book
[01:51:43] <ChrisMorgan> I don't see any convenient way in vectors to insert a large number of items at the start. There's grow_fn which can be used to append many items, but only insert(0, T) which does only one element.
[01:51:53] <sfackler> yeah, that's why I went with the Once solution in rust-openssl
[01:51:56] <sfackler> ChrisMorgan: vec::from_fn?
[01:52:23] <ChrisMorgan> sfackler: I want to prepend many values. vec::from_fn is something else entirely.
[01:52:31] <sfackler> oh, prepend
[01:53:01] <sfackler> make a new vec and append the old one to it is probably a reasonable way
[01:54:01] *** Quits: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: bmurphy1976)
[01:54:30] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[01:54:53] <ChrisMorgan> As a user of the library, it's easier doing it that way than doing it how insert does it (reserve more space, copy the values over and then write the values in to the spot at the start and update the length, all with raw pointers), but I wonder whether we should support such an operation easily.
[01:55:05] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:55:33] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:57:15] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:57:23] *** Quits: blank_name (blank_name@E7821509.94CCB18F.53C6B850.IP) (Quit: leaving)
[01:57:59] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[01:58:00] *** Quits: hays (quassel@moz-F677D4AB.washdc.east.verizon.net) (Ping timeout)
[01:58:53] *** Quits: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: bmurphy1976)
[01:58:56] *** Joins: hays (quassel@moz-35E8FEFC.washdc.east.verizon.net)
[01:59:50] <JustAPerson> So, could someone help me with this example? I can't figure how to properly specify lifetimes here: https://gist.github.com/JustAPerson/8533097
[01:59:54] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[02:01:34] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:03:54] *** Quits: igork1 (Igor@9C577557.7893D71C.6E0EE79F.IP) (Quit: Leaving.)
[02:04:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[02:04:46] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:05:43] <ChrisMorgan> JustAPerson: that looks very much like a bug.
[02:05:45] <aatch> JustAPerson, that's a limitation of the Index trait unfortunately.
[02:06:13] <hoverbear> Are there any tree-like structures in rust's stdlib? I suppose a graph structure would work too. Looking to implement a decision tree.
[02:06:26] <aatch> ChrisMorgan, it's all lumped in with the operator-overloading stuff, index especially so.
[02:06:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:06:45] <aatch> hoverbear, there's TreeMap in extra
[02:06:56] <hoverbear> aatch: Sounds perfect!
[02:06:56] <JustAPerson> ChrisMorgan: aatch: ok thanks, I'll try a normal method
[02:06:58] <ChrisMorgan> aatch: so what's the problem? The code looks entirely valid to me.
[02:07:51] <aatch> ChrisMorgan, the trait doesn't expect a lifetime parameter on &self
[02:08:34] <ChrisMorgan> And so one is not allowed at all. That seems rather suboptimal.
[02:09:00] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[02:09:03] <aatch> It's because having a bound lifetime changes the semantics.
[02:09:35] <olsonjeffery> bnoordhuis spotted in the rust issue tracker
[02:10:05] <aatch> From the trait alone, the compiler can only know that self is borrowed for the length of the method call.
[02:10:06] * olsonjeffery activates the siren
[02:10:09] <hoverbear> aatch: looking at it more, I'm seeing it's binary trees and it's self balancing. I'll have to implement my own I think.
[02:11:07] <aatch> So allowing a bound lifetime means that the compiler wouldn't be able to know how long the borrow is for, and therefore not know if it's valid.
[02:11:16] <olsonjeffery> ChrisMorgan: so i rolled an ultra-primitive http/tcp server for a blog post ive been working on. i felt bad, so i plugged rust-http along with a note that the author doesn't recommend people implement their own http server for service applications
[02:11:56] <aatch> Basically, '&' is the most restrictive bound, representing the shortest lifetime.
[02:13:23] <aatch> If it was a type parameter, it'd be like the trait having `fn foo(&self, a: int)` and trying to implement it with `fn foo<T>(&self, a: T)`
[02:13:38] *** Quits: KindOne (KindOne@moz-19D7287.dynamic.ip.windstream.net) (Ping timeout)
[02:16:14] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.2)
[02:17:26] *** Parts: ray (bernhard@moz-FF531B82.vie.surfer.at) ()
[02:17:36] *** Joins: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com)
[02:17:37] *** Joins: KindOne (KindOne@moz-3DEA9BB3.dynamic.ip.windstream.net)
[02:21:17] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:22:30] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:22:46] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:22:50] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[02:24:06] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[02:25:00] <ChrisMorgan> olsonjeffery: don't bother feeling bad about it!
[02:25:35] * ChrisMorgan is going to be writing an HTTP/0.9 library for a blog post. Estimated line count: < 100
[02:25:40] *** Joins: flounder (Mibbit@moz-A06909E4.glbb.ne.jp)
[02:26:07] <flounder> I was looking over sebcrozet's kiss3d library... "self.material.borrow().borrow().get().borrow().borrow_mut().get().render()" 
[02:26:19] <ChrisMorgan> :-/
[02:29:50] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[02:30:04] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[02:30:14] <dbaupp> at least the compiler makes sure you get the right method calls...
[02:30:40] <flounder> *thumbs up*
[02:31:37] *** Quits: flounder (Mibbit@moz-A06909E4.glbb.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[02:32:10] <cmr> rusti: bytes!(0xBEEBBEEBBEEBBEEB)
[02:32:15] -rusti- pastebinned 7 lines of output: http://ix.io/a1F
[02:32:21] <cmr> unfortunate.
[02:32:50] <Yurume> cmr: negative lowermost byte? :)
[02:33:26] <cmr> I was hoping it'd expand to [0xBE, 0xEB, ...]
[02:33:40] *** Joins: fyolnish (fyolnish@moz-59B4D8A2.panda-world.ne.jp)
[02:33:47] <whitequark> I hope what flounder said was a joke :/
[02:34:56] <cmr> ... don't ask what I'm doing ;p
[02:35:03] <mceier> rusti: bytes!(0xBEEBBEEBBEEBBEEBu)
[02:35:05] -rusti- pastebinned 7 lines of output: http://ix.io/a1G
[02:36:44] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[02:38:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[02:38:51] *** Joins: simlay (simlay@moz-490DE04A.amandrai.net)
[02:46:48] *** Quits: dLog (anonymous@moz-8FAE8709.eastlink.ca) (Connection reset by peer)
[02:47:36] *** Quits: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se) (Ping timeout)
[02:48:12] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[02:48:31] *** Joins: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se)
[02:49:39] <ChrisMorgan> Borrow, borrow, get;
[02:49:39] <ChrisMorgan>     Borrow, Borrow mut.
[02:49:39] <ChrisMorgan> Get; render. Now we’re set—
[02:49:39] <ChrisMorgan>     The line, at last, is shut.
[02:50:38] *** Joins: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu)
[02:51:47] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[02:52:40] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[02:53:39] *** Quits: bmats_ (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Ping timeout)
[02:53:53] <LinearInterpol> So, rust people!
[02:54:00] <LinearInterpol> What cool things have been done in the last few days?
[02:54:15] <ChrisMorgan> Does that bit of poetry count?
[02:54:21] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Ping timeout)
[02:54:27] <LinearInterpol> Yes. :D
[02:55:37] <grahame> ChrisMorgan: clearly I should port my haiku generation code to rust from Python :-)
[02:55:46] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[02:56:31] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[02:56:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:56:52] *** Quits: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:58:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:03:05] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[03:03:31] <cmr> LinearInterpol: https://github.com/cmr/cargo-lite !
[03:03:35] * cmr shameless plug
[03:03:54] <LinearInterpol> Oooo, cool!
[03:03:56] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[03:03:58] <LinearInterpol> Not diggin' python tho.
[03:04:18] <whitequark> doesn't matter which language to use for a stop-gap implementation
[03:04:31] <whitequark> could be QBASIC :p
[03:04:41] <cmr> hey I know that!
[03:04:45] <cmr> that'd be pain incarnate.
[03:04:50] <LinearInterpol> hahaha.
[03:05:02] <cmr> gambas would be semi-reasonable...
[03:05:06] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:05:09] *** Joins: c-a (c-a@moz-8D7A06D6.a163.priv.bahnhof.se)
[03:05:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:05:35] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-5330B499.dynamic.qsc.de)
[03:05:47] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:06:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:07:08] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[03:07:32] <arrrrrrrrr> a + b    <--- this is called summing              a - b     <----- what's this called?
[03:08:08] <Yurume> subbing?
[03:08:10] <aatch> arrrrrrrrr, difference
[03:08:26] <aatch> a + b => sum, a - b => difference (normally)
[03:08:27] <Yurume> arrrrrrrrr: `-` is not associative after all
[03:08:27] <Yurume> ;)
[03:08:39] <arrrrrrrrr> sounds nice
[03:10:01] <aatch> cmr, Naval Fate?
[03:10:11] <ChrisMorgan> a - b → (&a).sub(&b)
[03:10:17] <ChrisMorgan> And it's the Sub trait.
[03:10:26] <dbaupp> ChrisMorgan: actually, a.sub(&b), aiui
[03:10:44] <ChrisMorgan> Oh yeah, that will be taken care of automatically, won't it.
[03:10:55] * ChrisMorgan should get his head checked
[03:11:12] <ChrisMorgan> Quiz question: how do you pronounce mut? (a) mute /ˈmuːt/ [myoot]; (b) mutt /ˈmʌt/ [muht], (c) other?
[03:11:28] <Yurume> arrrrrrrrr: personally, I read a + b adding, a - b subtracting (or difference), and a + b + ... + z summing.
[03:11:50] <Yurume> ChrisMorgan: moot.
[03:11:59] <johnsoft> myoot
[03:12:03] <aatch> ChrisMorgan, maeyqyt
[03:12:04] <Yurume> well, kidding!
[03:12:05] <arrrrrrrrr> ChrisMorgan: (b) mutt
[03:12:23] <ChrisMorgan> Yurume: I wouldn't put it past Americans to do that sort of thing!
[03:12:31] <ChrisMorgan> aatch: IPA?
[03:12:35] <johnsoft> is there a right answer or is this a toople-tuhple thing?
[03:12:38] <aatch> No
[03:12:39] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:12:43] * aatch is being silly
[03:12:48] <arrrrrrrrr> Yurume: I guess I'll go with "taking the sum or the difference" instead of "summing or subbing"
[03:12:53] * dbaupp says it like 'mut'
[03:12:56] <arrrrrrrrr> :p
[03:12:56] <ChrisMorgan> aatch: aw :-(
[03:13:00] <aatch> dbaupp wins
[03:13:19] <ChrisMorgan> dbaupp: sorry, I couldn't hear that, could you speak more loudly?
[03:13:23] <dbaupp> MUT
[03:13:40] <ChrisMorgan> dbaupp: my TTS just said that "em you tee", is that right? ;-)
[03:13:43] <Yurume> <big>MUT</big>
[03:14:05] <johnsoft> MUT
[03:14:31] <dbaupp> (more seriously, though, I say mutt too.)
[03:14:40] <Yurume> ChrisMorgan: my pronounciation seems to be the former, with a weak `j` sound, meaning that my English pronounciation is flawed
[03:15:05] <aatch> I use "mute", because it's the same as the first syllable in "mutable"
[03:15:23] * ChrisMorgan says mutt, which is why he rhymed it with shut
[03:15:34] <o11c> I say moot, with the oo as in book
[03:15:37] <Earnestly> ChrisMorgan: Easy solution.  Start saying "mutable" but stop
[03:15:59] <dbaupp> muttable
[03:16:15] <Yurume> o11c: I found that I was speaking "u" in "mutable" as "oo" in "book" :S
[03:16:26] <Earnestly> müt
[03:16:44] <dbaupp> (will the proposed rust-fmt also include an IPA output, so that people can standardise on how they read their Rust?)
[03:16:56] <Earnestly> heh
[03:17:04] <Tobba> implying anyone can read IPA
[03:17:06] <ChrisMorgan> Ooh, I like it. Can you do that by Thursday, dbaupp?
[03:17:13] * Earnestly doesn't think it matters
[03:17:19] <ChrisMorgan> Earnestly: when something is abbreviated it is not just a shorter form of its source; it takes on a life of its own. The pronunciation of "mut" does not need to have *anything* to do with that of "mutable".
[03:17:30] <o11c> yurume: what? those are completely different
[03:18:07] <Yurumechan> o11c: i.e. my pronounciation was flawed after all...
[03:18:10] <o11c> ChrisMorgan: case in point: char. Does *anybody* seriously pronounce it "care" ?
[03:18:41] <Yurumechan> I really, really suck at speaking
[03:19:06] <whitequark> this is my worst nightmare. as if regular words weren't bad enough. :(
[03:19:27] <dcrewi> there is a sense in which a - b can also be considered summing
[03:19:29] <ChrisMorgan> o11c: for me care is pronounced something like "c-air" while the start of character is like the "carr" in "carry"
[03:20:33] *** Quits: fyolnish (fyolnish@moz-59B4D8A2.panda-world.ne.jp) (Connection reset by peer)
[03:20:33] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:20:36] <o11c> ChrisMorgan: those are the same ...
[03:20:37] <SingingBoyo> Tobba: I'll regret this, but I actually can read most of the IPA.  Sometimes I worry about my sanity.
[03:20:48] <Tobba> hahaha
[03:21:01] <Earnestly> (Funny that, I say "char(red)" mostly because char doesn't mean character in my head, by 1-byte)
[03:21:11] <Earnestly> but*
[03:21:14] * ChrisMorgan laughs airily at how he forgot how Americans pronounced air
[03:21:53] *** Quits: c-a (c-a@moz-8D7A06D6.a163.priv.bahnhof.se) (Ping timeout)
[03:22:04] <ChrisMorgan> Anyway, this whole discussion is moot. I just wanted to get a bit of a feel for what people pronounce it to figure out whether my poetry worked or not!
[03:22:12] <Earnestly> har har
[03:22:21] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[03:22:24] * dbaupp hopes 'moot' was on purpose
[03:22:38] <ercxx> ChrisMorgan: Did you do any work on Keep-Alive?
[03:22:38] <Earnestly> ^
[03:23:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:23:41] <ChrisMorgan> ercxx: it is supported
[03:23:54] <ercxx> ChrisMorgan: ok
[03:24:20] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[03:25:09] <ChrisMorgan> ercxx: in the typical HTTP/1.1 form of "keep alive unless otherwise specified by the lack of both chunking and Content-Length, or by Connection: close".
[03:25:56] <ercxx> ChrisMorgan: I'm playing with upnp. 1.1 and keep-alive is assumed. I just wanted to see how you did it.
[03:26:34] <ChrisMorgan> It's only supported on the server; the client is not yet designed to make multiple requests on the same connection.
[03:27:10] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-5330B499.dynamic.qsc.de) (Quit: arrrrrrrrr)
[03:27:24] <ercxx> All the consequent requests are made on the intial connection, right?
[03:27:51] <ChrisMorgan> No.
[03:28:13] <ChrisMorgan> The client does not support multiple requests on the same connection.
[03:28:34] <ercxx> Sorry, I was talking about http 1.1
[03:29:17] <ercxx> I had to write a mini http server for upnp. I'm having hard time with keep alive. 
[03:29:34] <ercxx> I figured you would be the best person to ask for obvious reasons.
[03:30:07] <ercxx> Am I supposed to wait on the same connection if the client assumes keep-alive?
[03:30:22] <ChrisMorgan> Any reason you can't use rust-http?
[03:30:35] <ercxx> POST
[03:30:41] <ChrisMorgan> That ain't a problem.
[03:30:44] <ercxx> :)
[03:31:01] <ChrisMorgan> http::server::request::Request has the relevant code, incidentally. close_connection and all the stuff that uses it.
[03:31:27] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[03:31:38] <ChrisMorgan> rust-http server doesn't have *good* support for reading request bodies, but it can be done—you'll just need to do it directly yourself rather than having rust-http ensure you do it correctly automatically.
[03:32:04] <ercxx> I'll take a look. I would love to use rust-http.
[03:32:58] <ercxx> ChrisMorgan: How about byte ranges?
[03:33:16] <ChrisMorgan> ercxx: you can handle it manually.
[03:33:57] <ercxx> ok
[03:34:08] <ChrisMorgan> Even where it's not finished yet, rust-http will take care of the basics and so reduce the load significantly.
[03:34:47] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[03:36:12] *** Joins: lenstr (lenstr@468DA139.9636F313.7A27613B.IP)
[03:37:53] *** Quits: lenstr (lenstr@468DA139.9636F313.7A27613B.IP) (Ping timeout)
[03:38:12] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[03:38:32] <herrwolfe45> hi - I'm playing with rust and am writing some code to encode/decode a list of bytes. I'm trying to read a list of bytes into a HashSet to get the unique items, but I'm having some trouble reading the items from the byte list into the hashset - here is my code: https://gist.github.com/derwolfe/c83bf977af42c7818533
[03:38:49] <ChrisMorgan> ercxx: actually, reading the request body is *not* possible just at present, because the relevant object, moved into the ResponseWriter, is private and only exposes the Writer functionality. That is trivially "fixed" by (a) removing `priv` from the field, or (b) implementing Reader on it as well—both bad tricks which I'll accept the necessity of just at present.
[03:39:20] *** Joins: lenstr (lenstr@468DA139.9636F313.7A27613B.IP)
[03:39:53] *** Quits: kimundi (kimundi@moz-372D6D0F.dip0.t-ipconnect.de) (Ping timeout)
[03:40:31] <ChrisMorgan> herrwolfe45: avoid writing code that way—that's *not* how you should do it. That would be trying to create something like a ~[] of the results, ~[(), (), (), (), ...]. That's needless.
[03:40:56] <herrwolfe45> thanks ChrisMorgan 
[03:40:58] <ChrisMorgan> `cloned_els.iter().map(|&x| unique.insert(x)).collect();` I would recommend writing as `for &x in cloned_els.iter() { unique.insert(x) }`
[03:43:44] *** Joins: zz_kimundi (kimundi@moz-BEFFE5BF.dip0.t-ipconnect.de)
[03:44:01] *** zz_kimundi is now known as kimundi
[03:45:01] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[03:45:02] *** Quits: lenstr (lenstr@468DA139.9636F313.7A27613B.IP) (Client exited)
[03:45:24] *** Joins: lenstr (lenstr@468DA139.9636F313.7A27613B.IP)
[03:45:39] <herrwolfe45> ChrisMorgan: is the difference between the two, that the former [(), (), ...] isn't actually inserting the result of the function on each iteration? I don't understand the difference between the two.
[03:45:46] *** Joins: espindol_ (espindola@moz-9F530B29.com)
[03:46:45] *** Quits: espindola (espindola@moz-8F837B07.dsl.teksavvy.com) (Ping timeout)
[03:47:06] <LinearInterpol> So I went ahead and learned a little Haskell to supplement my Rust.
[03:47:09] <LinearInterpol> It helped. :D
[03:47:17] *** Quits: lenstr (lenstr@468DA139.9636F313.7A27613B.IP) (Ping timeout)
[03:47:28] <ChrisMorgan> rusti: range(2i, 5i).collect::<~[int]>()
[03:47:29] -rusti- ~[2, 3, 4]
[03:49:01] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:49:19] <ChrisMorgan> rusti: let values = ~[13u8, 17, 91]; values.iter().map(|&_a| /* pretend we have a function call which returns () */ ()).collect::<~[()]>()
[03:49:20] -rusti- ~[(), (), ()]
[03:50:10] *** Quits: espindol_ (espindola@moz-9F530B29.com) (Quit: Leaving...)
[03:50:12] <ChrisMorgan> herrwolfe45: take a look at http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.collect and see what it does.
[03:50:56] *** Joins: blank_name (blank_name@E7821509.94CCB18F.53C6B850.IP)
[03:51:12] <herrwolfe45> thanks ChrisMorgan - I think I see what I have done incorrectly. I appreciate your help
[03:51:22] <aatch> herrwolfe45, any reason you aren't just using a 256-element fixed-length vector, where the index is the value of the byte?
[03:51:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:52:57] <aatch> That would get you a list of the frequencies for the bytes.
[03:53:08] <herrwolfe45> aatch: I hadn't even thought about that, thanks!
[03:53:27] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:53:35] <aatch> And it's such a small list that doing linear operations on it is super-fast anyway.
[03:57:00] <herrwolfe45> that is a cool idea. I will change how I'm doing it now. Most of what I've done so far has been taking shots in the dark. I've had the crutch of a python collection that I've been leaning on pretty hard.
[03:57:11] <aatch> I imagine that 256 load-compare-branch sequences is going to be fast
[03:57:17] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:57:40] *** Joins: crail (crail@moz-D7728DCD.dhcp.insightbb.com)
[03:58:14] <aatch> herrwolfe45, heh, people often forget about the constant factor in algorithms/datastructures and don't realise that sometimes the "slower" way is actually faster.
[03:58:57] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[03:59:15] <aatch> sure, a linear array isn't going to scale, but neither is the range of values a byte can take.
[03:59:47] <herrwolfe45> your method also seems less convoluted as well when compared to how I'm handling it.
[04:00:40] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[04:01:01] *** Joins: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[04:01:22] <herrwolfe45> thanks for your help aatch and ChrisMorgan - I'm off!
[04:01:22] <dmz> could someone look at this gist and tell me I'm not crazy? https://gist.github.com/kvark/8534280
[04:01:27] *** Parts: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com) (ERC Version 5.3 (IRC client for Emacs))
[04:02:02] <aatch> dmz, well, you are crazy based on that gist
[04:02:05] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[04:02:41] <ChrisMorgan> dmz: you're not crazy (you told me to tell you so).
[04:02:53] <dmz> aatch: the closure returns get_index, which is Option<uint>, and yet the map over closure followed by to_owned_vec somehow produced ~[uint]
[04:03:13] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[04:03:20] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[04:03:25] <aatch> dmz, that would be because you're using filter_map
[04:03:54] <ChrisMorgan> Which means it'll return ~[] because all values are None.
[04:03:56] <aatch> which either skips the element or uses it based on whether you return Some or None
[04:03:56] <dmz> d'oh
[04:04:04] <dmz> totally forgot about that....
[04:04:08] <dmz> thanks!
[04:04:22] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[04:04:37] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[04:05:01] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[04:05:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:05:47] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[04:06:17] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[04:06:55] <dmz> is there a rust debugging tutorial?
[04:07:01] <LinearInterpol> let a = fold::<int>(|a, b| { a + b }, 0, concat::<int>(~Node::<int>(1, ~Node::<int>(2, ~Empty)), ~Node::<int>(3, ~Node::<int>(4, ~Empty))));
[04:07:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:07:08] <LinearInterpol> ^ I love being able to do tht.
[04:07:09] <LinearInterpol> *that.
[04:07:14] <dmz> I'm getting an explicit task failure, and I need a stack trace...
[04:07:15] <LinearInterpol> I just love it. Thank you, Rust devs.
[04:07:28] *** Quits: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: bmurphy1976)
[04:07:35] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[04:07:45] *** Quits: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com) (Ping timeout)
[04:07:53] <mcpherrin> dmz: break on "rust_fail" in gdb
[04:07:58] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[04:08:46] <dmz> "Function "rust_fail" not defined."
[04:08:53] <dmz> mcpherrin: is that normal?
[04:09:02] <mcpherrin> uh I might have the name wrong
[04:09:08] *** Quits: crail (crail@moz-D7728DCD.dhcp.insightbb.com) (Client exited)
[04:09:34] <mcpherrin> what version of rustc are you using?
[04:09:56] <dmz> rustc 0.10-pre (3697121 2014-01-15 16:02:01 -0800)
[04:10:02] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[04:10:13] <dmz> I typed "break rust-fail" in gdb prompt
[04:10:19] <mcpherrin> it was _Unwind_RaiseException before that
[04:10:24] <mcpherrin> rust_fail not rust-fail
[04:10:38] <dmz> fail
[04:10:53] <dmz> rust_fail of course, is the one that it says "Function "rust_fail" not defined."
[04:11:50] *** Joins: crail (crail@moz-D7728DCD.dhcp.insightbb.com)
[04:11:56] <mcpherrin> well it works for me :)
[04:12:11] <dmz> interesting... wiki page on rust says it's developed "Rust Project Developers". I kinda expected a Mozilla Labs reference there or something.
[04:12:48] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[04:13:16] <dmz> mcpherrin: ok, if I continue, and let it load the symbols/libraries, then it's fine. Thanks!
[04:15:31] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[04:17:27] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:17:53] *** Joins: dave1629 (dave@DA923962.6E684168.CE55B2D2.IP)
[04:17:58] <mcpherrin> dmz: nope, it's these fine people https://github.com/mozilla/rust/blob/master/AUTHORS.txt
[04:18:11] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[04:19:01] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[04:19:09] <dmz> lol fine people indeed
[04:19:35] *** Joins: gverilla__ (gverilla@FDCF4B71.90C94185.F945DA.IP)
[04:19:40] <dmz> my name is not there :(
[04:19:49] <mcpherrin> I should change my name to \0Matthew so I'm sorted first lexicographically
[04:19:55] <mcpherrin> dmz: so submit some patches :D
[04:20:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:20:19] <dmz> mcpherrin: I did
[04:20:27] *** Quits: gverilla_ (gverilla@moz-1AA5FE19.versanet.de) (Ping timeout)
[04:20:36] <mcpherrin> dmz: then submit a patch adding yourself to AUTHORS :)
[04:21:09] <dmz> that... sounds weird. Maybe next time I'm doing something useful, I'll include myself
[04:21:10] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[04:21:24] <ChrisMorgan> Or it'll be caught at the next release.
[04:21:57] <dmz> that sounds better :)
[04:22:02] <mcpherrin> It looks like brson updates authors.txt every once in a while
[04:22:09] <mcpherrin> why not help him :)
[04:23:53] *** Joins: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP)
[04:24:19] *** Quits: charmander (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:24:59] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:25:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:27:46] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[04:29:19] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[04:29:34] *** Joins: uberj (uberj@moz-AD308AD7.members.linode.com)
[04:31:03] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[04:31:29] <uberj> how does one raise a system interrupt from rust? specifically I'm trying to raise SIGINT to plop into a gdb session
[04:32:16] <sfackler> uberj: there's a breakpoint intrinsic you can call I think
[04:36:47] <uberj> sfackler: where did you read that?
[04:37:14] *** Joins: gkostyanikov (gkostyanik@5E150618.3E410295.CA6E2165.IP)
[04:37:47] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:38:01] <dbaupp> uberj: std::unstable::intrinsics::abort works
[04:39:48] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:40:12] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:40:27] <uberj> dbaupp: works thanks
[04:41:28] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[04:41:58] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Quit: Hack the planet.)
[04:42:17] * uberj combines dbaupp and sfackler's suggestions and uses use std::unstable::intrinsics::breakpoint;
[04:42:27] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:42:27] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:43:01] *** Joins: mm (mm@moz-DFB1CE19.hsd1.ca.comcast.net)
[04:43:14] *** mm is now known as mcpherrinm
[04:44:14] *** Quits: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu) (Quit: Leaving)
[04:45:10] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:48:21] *** Quits: mentero (mentero@moz-D61C6F02.proxnet.pl) (Ping timeout)
[04:50:18] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[04:54:50] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[04:55:45] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[04:55:59] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:59:36] *** Quits: mcpherrinm (mm@moz-DFB1CE19.hsd1.ca.comcast.net) (Quit: leaving)
[05:01:04] <whitequark> uberj: or trap, that's the breakpoint intrinsic
[05:01:19] <whitequark> doesn't really have much of a difference with abort in reality, though
[05:01:39] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: Ex-Chat)
[05:01:55] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[05:03:30] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[05:03:41] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[05:05:46] * ChrisMorgan didn't need ICE there
[05:06:33] *** Quits: new_one (new_one@1E1119CE.47460DF6.B3C0173E.IP) (Quit: leaving)
[05:06:43] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[05:08:24] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[05:08:58] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[05:09:08] <ChrisMorgan> Oh, that's all it is. It's just not fond of my proper Unicode box drawing ☹
[05:09:18] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[05:09:30] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:09:31] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[05:09:44] *** Quits: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru) (Ping timeout)
[05:09:48] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[05:09:48] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:10:01] <ChrisMorgan> Wah, what am I supposed to do without the ability to draw *proper* boxes?
[05:10:14] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[05:10:28] <mcpherrin> The ZX80 had better drawing
[05:10:44] <ChrisMorgan> //   <----x++++>
[05:10:44] <ChrisMorgan> // ^ ┌─┬─┬─┬─┬─┐
[05:10:44] <ChrisMorgan> // - ├─┼─┼─┼─┼─┤
[05:10:44] <ChrisMorgan> // y ├─┼─╆━╅─┼─┤
[05:10:44] <ChrisMorgan> // + ├─┼─╄━╃─┼─┤
[05:10:44] <ChrisMorgan> // + ├─┼─┼─┼─┼─┤
[05:10:44] <ChrisMorgan> // v └─┴─┴─┴─┴─┘
[05:11:04] <whitequark> whoa!
[05:11:06] <mcpherrin> maybe it was zx81
[05:11:32] <mcpherrin> and the vt340 had sweet drawing primitives too
[05:11:41] <mcpherrin> shitty that terminals have less drawing than they did in the 80s
[05:11:55] * ChrisMorgan looks at http://irclog.gr/#browse/irc.mozilla.org/rust in distress at the things that still don't support Unicode
[05:12:26] <mcpherrin> botbot.me does :-)
[05:12:41] <ChrisMorgan> mcpherrin: so long as they have a decent Unicode font they've got perfectly good drawing primitives, quite an extensive set.
[05:12:56] *** Joins: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru)
[05:13:03] <Tobba> unicode is the worst practical joke ever
[05:13:05] <mcpherrin> ChrisMorgan: VT340 had vector drawing and custom pixel characters!
[05:13:26] <Tobba> I still suspect the unicode commitee were just smoking crack when designing most of it
[05:13:32] <ChrisMorgan> Tobba: nuh uh. I've seen far worse practical jokes than that.
[05:14:07] <Tobba> ﻿ｒｅｍｉｎｄ  ｍｅ  ｗｈｙ  ｗｅ  ｈａｖｅ  ｔｈｉｓ
[05:14:20] * ChrisMorgan just wishes people in India would get with the times and write in Unicode rather than a vast multitude of mutually incompatible fonts
[05:14:29] <mcpherrin> also japan
[05:14:50] <Tobba> Ⓘ ⓜⓔⓐⓝ ⓢⓔⓡⓘⓞⓤⓢⓛⓨ, ⓦⓗⓨ
[05:15:13] * ChrisMorgan only has experience with India in that regards and has seen enough Telugu, Bengali, Hindi, Urdu, &c. fonts to last him several lifetimes
[05:15:40] <mcpherrin> ChrisMorgan: Shift-JIS is a scary character set
[05:15:43] <Tobba> hahahahha
[05:15:56] <Tobba> its probably because nothing supports unicode properly due to it being amazingly awful to deal with
[05:16:18] <Tobba> 	𝖙𝖍𝖎𝖘 𝖎𝖘 𝖆 𝖚𝖓𝖎𝖖𝖚𝖊 𝖈𝖍𝖆𝖗𝖆𝖈𝖙𝖊𝖗 𝖘𝖕𝖆𝖈𝖊 
[05:16:35] <ChrisMorgan> Anyway, rustc is broken, not coping correctly with Unicode. And I'm sad because I'm going to need to remove my box drawing or something as it's fragile. (Remove the <----x++++> line and the ^-y++v and whitespace columns and it compiles!)
[05:16:48] <Tobba> heck, unicode has special CHARACTERS for bold latin letters
[05:17:19] <ercxx> ChrisMorgan: What does rust-http do if there's a new request on an open stream while sending a big file. Like jumping ahead in a video file causing a request with 'Range'?
[05:17:55] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:18:48] *** Joins: lenstr (lenstr@468DA139.9636F313.7A27613B.IP)
[05:19:33] <ChrisMorgan> ercxx: rust-http cannot yet have *full* pipelining (upstream limitations); it will not start processing the next request until the current request is finished.
[05:20:07] <ercxx> ok, thanks
[05:20:22] <ChrisMorgan> I'm not certain of what happens in a case like the one you describe from the client end.
[05:20:36] *** Quits: lenstr (lenstr@468DA139.9636F313.7A27613B.IP) (Ping timeout)
[05:21:20] <ercxx> me neither :)
[05:21:45] <ChrisMorgan> I'll need to find out sooner or later, but just at present I don't know.
[05:22:08] <Yurume> Tobba: it sounds like Hyark Haet Haep Hyar etc.
[05:22:28] <Tobba> I found the icing on the cake
[05:22:34] <Tobba> special charset for sans serif letters
[05:25:21] <diverse> Are we moving vectors to the library?
[05:27:58] *** Quits: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:31:41] <diverse> https://github.com/mozilla/rust/pull/11682
[05:32:57] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:34:33] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:35:43] <bvssvni> will this change how we define owned vectors?
[05:36:06] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Quit: Leaving.)
[05:36:19] *** Joins: brson (brson@moz-5386576F.sd.sd.cox.net)
[05:36:19] *** ChanServ sets mode: +ao brson brson
[05:38:53] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[05:38:58] *** Joins: doomlord_ (servitor@moz-D9C46C01.range86-184.btcentralplus.com)
[05:41:47] *** Quits: StarLight (StarLight@moz-63396A19.dynamic.avangarddsl.ru) (Ping timeout)
[05:44:41] *** Quits: crail (crail@moz-D7728DCD.dhcp.insightbb.com) (Client exited)
[05:44:58] *** Joins: meTaAU (admin@moz-353CB7BE.lns20.per2.internode.on.net)
[05:45:26] <meTaAU> Afternoon
[05:45:48] *** Joins: StarLight (StarLight@moz-28ACE88D.dynamic.avangarddsl.ru)
[05:48:35] <bvssvni> meTaAU: \o
[05:48:43] <Yurume> o/
[05:50:07] <meTaAU> Any ideas on the prefered way of adding support for ARM thumb mode on rustc? It currently works 90%, just pass5 fails because llc assumes ARM mode
[05:50:50] <meTaAU> I need to either add support for the triple thumb-linux-eabi (which looks pretty easy), or send the -march=thumb flag to llc
[05:51:23] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[05:52:06] <meTaAU> Not sure if a patch to add the thumb arch would be dead on arrival or if I should just give it a go
[05:53:26] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[05:54:32] <mcpherrin> meTaAU: I'd probably add the triple
[05:54:51] *** Quits: gkostyanikov (gkostyanik@5E150618.3E410295.CA6E2165.IP) (Ping timeout)
[05:55:20] *** Joins: gkostyanikov (gkostyanik@5E150618.3E410295.CA6E2165.IP)
[06:00:45] *** Quits: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:01:38] <o11c> bvssvni: my understanding is that ~[T] will become Vec<T> and [T, ..N] will be unchanged
[06:02:15] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[06:03:49] <bvssvni> o11c: good
[06:04:48] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:06:03] *** Quits: gkostyanikov (gkostyanik@5E150618.3E410295.CA6E2165.IP) (Ping timeout)
[06:06:20] <bvssvni> will there be a change of how slices are represented?
[06:06:31] *** Joins: gkostyanikov (gkostyanik@5E150618.3E410295.CA6E2165.IP)
[06:06:44] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[06:07:02] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:07:27] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[06:07:33] <dbaupp> bvssvni: probably not
[06:07:34] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:08:48] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[06:11:51] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:12:24] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[06:13:04] <yuriks> when I'm calling unsafe code that returns values by reference, do I need to do something special to ensure that doesn't get optimized out?
[06:13:28] <yuriks> rustc is giving me "value doesn't need to be mutable!" warnings, which is making me suspicious
[06:14:35] *** Joins: jdm (jdm@moz-BDD802ED.hfc.comcastbusiness.net)
[06:14:35] *** ChanServ sets mode: +o jdm
[06:16:19] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[06:17:00] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:19:43] <Yurume> http://www.rust-ci.org/lifthrasiir/rust-encoding/doc/encoding/ rust-ci <3
[06:20:09] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:20:54] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:20:59] <dbaupp> Yurume: cool
[06:21:20] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[06:22:06] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[06:22:31] *** Quits: brson (brson@moz-5386576F.sd.sd.cox.net) (Quit: leaving)
[06:23:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:24:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:25:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:26:09] <sfackler> Yurume: those warnings happen before any optimization
[06:26:09] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[06:26:13] <sfackler> oops
[06:26:20] <sfackler> yuriks: ^
[06:27:37] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[06:28:01] <yuriks> sfackler: well, that's what I'm worried about, that it'll optimize out the call because it thinks it doesn't do anything
[06:29:20] <sfackler> could you show the code?
[06:30:26] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[06:30:48] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:32:10] <yuriks> sfackler: http://hastebin.com/gunadikiki.rs
[06:32:27] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:32:56] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[06:33:08] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:33:10] <yuriks> sfackler: AllocatePool is: pub type ALLOCATE_POOL = extern "win64" fn(PoolType: MEMORY_TYPE, Size: uint, Buffer: **()) -> STATUS;
[06:33:34] <sfackler> yuriks: you want Buffer: *mut *()
[06:33:45] <yuriks> ohhhh
[06:34:05] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[06:34:46] *** Quits: bitwalker (bitwalker@moz-1684082D.hsd1.mn.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[06:35:14] <yuriks> sfackler: I have a bunch of stuff I need to fix then, thanks
[06:35:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:37:09] *** Quits: heftig (heftig@moz-214741C6.dip0.t-ipconnect.de) (Quit: Quitting)
[06:40:13] <yuriks> sfackler: *mut *() or *mut *mut ()?
[06:42:08] <sfackler> probably *mut *()
[06:42:19] <sfackler> unless the function is changing which () the pointer to the pointer points at
[06:42:27] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[06:42:33] <Heather> hi again
[06:42:35] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[06:42:50] <Heather> where is std::io::buffered ?
[06:43:20] <Heather> I mean how to access this field now when it's private
[06:44:16] <Yurume> Heather: it is now just std::io::BufferedReader etc. obviously
[06:45:11] <Heather> ah sure
[06:45:13] <Heather> Thanks )
[06:45:45] <yuriks> sfackler: I mean for the return type of allocate_buffer: -> *mut (), or is that not really necessary? I mean, I'm gonna be casting that around anyway
[06:47:46] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:48:20] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Client exited)
[06:49:49] <sfackler> it's not necessary
[06:50:22] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[06:50:43] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:50:45] <meTaAU> Changed the 3-4 lines for ARM thumb support. Now to wait a couple of hours for it to build
[06:52:20] *** Joins: seich (seichMoz@AA0FB80D.1514D38A.624CE61B.IP)
[06:54:18] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[06:54:24] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:54:38] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:55:02] *** Joins: daschl (daschl@moz-DC6DE6E2.vie.surfer.at)
[06:56:26] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[06:56:47] <lennart> how does one turn a `mut ~[i8]` into a `*mut i8` for passing into a foreign function that wants a `char *`?
[06:57:37] <sfackler> lennart: vec.as_mut_ptr()
[06:57:49] <lennart> aha, thanks
[06:58:29] <lennart> that seems less evil than `ptr::to_mut_unsafe_ptr(&mut foo[0])`
[06:59:38] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[06:59:57] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[07:01:30] <yuriks> hm, rust allows access to the bytes of a str via []. Isn't that potentially bad?
[07:02:53] *** Joins: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de)
[07:03:18] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[07:03:39] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:03:45] <yuriks> well, it is. But maybe I'm missing something here
[07:04:26] *** Joins: pzol_fon (pzol_fon@moz-F6398D35.nat.umts.dynamic.t-mobile.pl)
[07:04:38] *** Joins: dmacvicar (dmacvicar@moz-663A7346.nue.novell.com)
[07:04:53] <sfackler> yuriks: it's read only
[07:05:06] <sfackler> rusti: let mut foo = ~"foo"; foo[0] = 0;
[07:05:13] <yuriks> people will still use it to write broken text-handling programs *shrug*
[07:05:19] <yuriks> er, frown*
[07:05:26] <sfackler> it might get removed
[07:05:34] <sfackler> I don't know if anything actually uses it
[07:05:49] <Yurume> it is at least "safe", though it would be bad as well
[07:06:11] <Yurume> assigning by the byte offset was once safe but it's now unsafe: https://github.com/mozilla/rust/issues/8891
[07:07:08] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[07:07:27] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:08:29] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[07:08:46] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:08:48] *** Quits: pzol_fon (pzol_fon@moz-F6398D35.nat.umts.dynamic.t-mobile.pl) (Ping timeout)
[07:08:56] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[07:09:06] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[07:12:32] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[07:14:03] <carllerche> is it possible to have a struct have a lifetime?
[07:14:16] <dbaupp> struct Foo<'a> { ... }
[07:14:32] <carllerche> I'm trying to do Map<&str, TypeThatOwnsString>
[07:14:46] <carllerche> dbaupp: hmm.. must be late, my brain is shutting off :P thx
[07:15:01] <carllerche> I don't know why i was trying to add the lifetime after struct
[07:17:38] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:18:59] *** Joins: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP)
[07:19:12] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:19:20] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:19:54] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:20:14] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:20:17] <Yurume> carllerche: if you are "using" HashMap<&str, Foo> etc., then you are fine to omit the lifetime. but if you are storing that into some struct, then you will need to specify the lifetime.
[07:20:35] <carllerche> Yurume: yeah, i'm storing it on a struct
[07:20:35] <Yurume> e.g. struct Foo<'a> { mapping: HashMap<&'a str, Bar>, ... }
[07:20:38] <Yurume> ;)
[07:20:58] <carllerche> I'm a bit confused about how the key lifetimes work with everything
[07:21:04] <Yurume> similar rules apply to the closures: struct Foo<'a> { callback: 'a || -> uint, ... }
[07:21:22] <Yurume> lifetimes for keys?
[07:21:35] <carllerche> like, why does find need &&'a str
[07:23:13] <dbaupp> .find takes &K
[07:23:19] <carllerche> also I seem to be hitting a bunch of "cannot borrow `*self` as mutable more than once at a time"
[07:23:23] <dbaupp> and, in this case, K = &'a str
[07:24:10] <carllerche> so if the key was owned, one would only be able to query the map w/ an owned string?
[07:24:18] <Yurume> yeah, that's how many Rust APIs work, i.e. "borrow as much as possible".
[07:24:34] <Yurume> carllerche: there is find_equiv as well.
[07:24:58] <Yurume> ...and I think, in this case, you can indeed use find_equiv to avoid double indirections.
[07:25:05] <carllerche> Yurume: doesn't seem like it is on TreeMap
[07:26:10] <Yurume> hmm, indeed. is there any particular reason to use TreeMap?
[07:26:44] <carllerche> Yurume: I'm not in context of a task and HashMap requires it
[07:26:54] <carllerche> because it uses rand::task_rng
[07:27:17] <Yurume> how about using HashMap::with_capacity_and_keys?
[07:27:45] *** Quits: FreeFull (freefull@moz-4F046D30.as13285.net) (Quit: )
[07:27:48] <carllerche> Yurume: hmm… i guess I didn't see it
[07:28:18] <carllerche> I will attempt to use that
[07:29:37] *** Quits: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP) (Client exited)
[07:32:31] *** Joins: alonlevy (alon@moz-AFF00A6D.bb.netvision.net.il)
[07:32:54] *** Quits: lennart (lennart@moz-DE70D6F.stanford.edu) (Quit: Lost terminal)
[07:33:50] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:34:49] *** Quits: seich (seichMoz@AA0FB80D.1514D38A.624CE61B.IP) (Ping timeout)
[07:35:11] <ChrisMorgan> Another keyword pronunciation question: fn: "fnnn", "eff en", "funk", "function", other?
[07:35:28] *** Joins: seich (seichMoz@AA0FB80D.1514D38A.624CE61B.IP)
[07:36:59] <Yurume> I'd say eff en?
[07:37:07] *** Joins: marianoguerra (marianogue@moz-DAE946C3.dip0.t-ipconnect.de)
[07:37:28] <ross> I say function but that's just me
[07:39:38] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[07:41:42] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[07:45:49] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[07:46:13] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[07:47:24] *** Joins: WebeWizard (Justin@moz-7CCD1DAE.ks.ks.cox.net)
[07:47:35] *** Quits: Earnestly (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[07:47:58] *** Quits: Addle (quassel@moz-67A92E8A.cable.teksavvy.com) (Client exited)
[07:51:16] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:52:05] <myname> eff en sounds something like f****n'
[07:52:33] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[07:54:38] *** Joins: Addle (quassel@moz-67A92E8A.cable.teksavvy.com)
[07:55:23] *** Quits: seich (seichMoz@AA0FB80D.1514D38A.624CE61B.IP) (Quit: Computer has gone to sleep.)
[07:56:24] *** Quits: Addle (quassel@moz-67A92E8A.cable.teksavvy.com) (Ping timeout)
[07:56:30] *** Joins: oberstet (quassel@moz-A038EF90.dynamic.mnet-online.de)
[07:56:37] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:57:36] *** Joins: Addle (quassel@moz-67A92E8A.cable.teksavvy.com)
[07:58:00] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[08:01:32] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[08:04:33] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.2)
[08:05:02] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[08:09:30] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[08:09:59] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[08:13:15] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[08:14:28] *** Quits: marianoguerra (marianogue@moz-DAE946C3.dip0.t-ipconnect.de) (Ping timeout)
[08:14:49] *** flaper87|afk is now known as flaper87
[08:16:53] <wycats> sfackler: is it every practical to use https://github.com/sfackler/rust-phf/blob/master/phf.rs at runtime if inserts are relatively rare compared to lookups?
[08:17:06] <angdev> hello :)
[08:18:16] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[08:18:18] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:18:43] <WebeWizard> hi
[08:19:57] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[08:19:59] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:20:04] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[08:20:20] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[08:20:30] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[08:20:31] <meTaAU> First pull request. Forgot to read contribution guide first though :/
[08:20:59] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[08:21:40] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:22:09] *** Joins: Ms2ger (Ms2ger@53A418F8.CD932C3B.187A1082.IP)
[08:23:25] <angdev> Is `use std::io::stdio::println;` default setting?
[08:23:30] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:24:04] <Ms2ger> I don't think so
[08:24:11] <Ms2ger> println! is exposed, though
[08:24:27] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[08:24:29] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:24:31] <WebeWizard> println!("I am the greatest");
[08:25:10] *** Joins: lpy (lpy@25DD02B9.D19CEE75.952560D4.IP)
[08:25:51] *** Quits: alonlevy (alon@moz-AFF00A6D.bb.netvision.net.il) (Ping timeout)
[08:25:56] <angdev> Hmm.. `fn main() { println("!!"); }` this code is compiled successfully with rust 0.9. but not 0.10-pre.
[08:26:03] <angdev> Is this changed?
[08:26:10] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[08:26:29] <WebeWizard> add an exclamation
[08:26:33] <WebeWizard> println! not println
[08:26:47] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[08:27:24] <Zr40> the println function was removed
[08:27:43] <Yurume> angdev: println is now not imported by default
[08:27:49] <eddyb> Zr40: just from the prelude
[08:28:09] <Yurume> since println!() fulfills every use case
[08:28:14] <angdev> Zr40, Yurume: Thank you.
[08:29:12] *** Joins: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr)
[08:29:30] *** Quits: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com) (Ping timeout)
[08:29:59] *** Quits: jdm (jdm@moz-BDD802ED.hfc.comcastbusiness.net) (Quit: Lost terminal)
[08:31:04] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[08:32:57] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[08:33:16] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[08:34:55] <eddyb> lol, tis is madness http://glaebhoerl.tumblr.com/rust_closure_types
[08:35:16] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[08:35:51] <Yurume> and note that we only have two of them available ;)
[08:36:10] <eddyb> why does it need &move self? surely there's a way to encompass both current procs and unboxed once closures
[08:36:31] <eddyb> I think our friend went a little overboard. I do that sometimes, but... meh
[08:36:36] *** Quits: leslie (Adium@802083C6.67DB9176.67D29DD9.IP) (Quit: Leaving.)
[08:36:38] *** Joins: leslie (Adium@moz-454B76DB.members.linode.com)
[08:36:57] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[08:37:07] *** Joins: jackneill (jackneill@moz-E9D68037.pool.digikabel.hu)
[08:38:42] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[08:39:10] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:39:13] <eddyb> they didn't even bother to use the proposed variadic generics notation <..Args, Ret>
[08:39:20] *** Quits: lpy (lpy@25DD02B9.D19CEE75.952560D4.IP) (Client exited)
[08:40:00] <mitsuhiko> rust's tests really could do with some dependency injection
[08:40:11] <mitsuhiko> having each test create and tear down their own data feels wasteful
[08:40:14] <Yurume> eddyb: &move is (as far as I know) an alternative to ~ where you own the referenced value but not the memory itself
[08:40:19] *** Quits: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net) (Quit: Leaving.)
[08:40:31] <eddyb> Yurume: bleah
[08:40:32] <Yurume> so ~FnOnce and &move FnOnce are indeed similar to each other.
[08:40:40] *** Joins: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au)
[08:40:59] <Yurume> I agree that there *can* be needs for such reference types, but not much.
[08:41:12] <eddyb> Yurume: the actual solution is to allow fn(self) methods to be called via trait objects
[08:42:14] <Yurume> as long as that does not hamper the performance of existing fn(self) usages.
[08:42:19] *** Quits: gkostyanikov (gkostyanik@5E150618.3E410295.CA6E2165.IP) (Ping timeout)
[08:42:21] <eddyb> Yurume: it would be a wrapper
[08:42:40] *** Quits: leslie (Adium@moz-454B76DB.members.linode.com) (Ping timeout)
[08:42:40] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:42:42] <eddyb> so if you have <F: OnceFn> F, you pass a value, if you have ~OnceFn, you move the owned pointer into the vtable method, which is a wrapper for the actual method
[08:43:15] <eddyb> maybe &Trait:Pod could allow something similar, I'm not sure
[08:43:28] <Yurume> eddyb: like that, for owned trait objects fn(self) methods are wrapped by invisible fn(~self) virtual methods?
[08:43:29] *** Joins: leslie (Adium@802083C6.67DB9176.67D29DD9.IP)
[08:43:42] <eddyb> Yurume: yeah
[08:44:14] <eddyb> better than overhauling the borrow checker with an extra reference type with minimal uses
[08:44:23] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[08:44:50] <Yurume> btw, the issue in question is: https://github.com/mozilla/rust/issues/10672
[08:45:43] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Computer has gone to sleep.)
[08:46:39] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:47:11] <Yurume> other than that, the table itself is a good summary of smart pointers as well
[08:48:39] <eddyb> my/move may be natural for Drop, but not OnceFn
[08:49:21] <eddyb> can we get away with trait Fn {fn call(self)?
[08:51:57] <eddyb> &Fn:Pod would be callable, and it would actually work with current closures - well, no, since closures use &mut's for capture
[08:52:20] <eddyb> Fn/FnMut is one trait too many
[08:52:35] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[08:52:56] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[08:53:33] *** Quits: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP) (Quit: victorporof)
[08:53:35] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[08:53:59] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:54:34] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[08:55:01] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Ping timeout)
[08:55:20] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[08:56:13] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[08:56:46] *** Joins: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP)
[08:56:52] <nulldata> Hello
[08:57:09] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[09:01:29] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[09:01:44] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[09:02:40] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[09:04:26] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:04:28] *** Quits: WebeWizard (Justin@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[09:05:01] *** Quits: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com) (Ping timeout)
[09:05:01] *** Quits: jackinloadup (jackinload@moz-E630552F.compute-1.amazonaws.com) (Ping timeout)
[09:05:01] *** Quits: jorendorff_away (jorendorff@moz-C5535E6C.compute-1.amazonaws.com) (Ping timeout)
[09:05:01] *** Quits: brianloveswords (brianloves@moz-CB223D1E.members.linode.com) (Ping timeout)
[09:05:01] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[09:05:01] *** Quits: IRCMonkey36827 (seich@moz-3D9F5ED0.webfaction.com) (Ping timeout)
[09:05:01] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[09:05:01] *** Quits: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP) (Ping timeout)
[09:05:01] *** Quits: veeti (veeti@moz-D6414854.rojekti.fi) (Ping timeout)
[09:05:01] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[09:05:01] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[09:05:02] *** Quits: machty (sid13535@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: robert (uid15951@moz-A42E5B7B.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: v01px3 (sid18631@moz-5F4AA75A.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: evilpie (sid7877@moz-E77DEB21.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Ping timeout)
[09:05:02] *** Quits: cds (uid23856@moz-E77DEB21.irccloud.com) (Ping timeout)
[09:05:11] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[09:05:21] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[09:05:23] *** Joins: v01px3 (sid18631@moz-5F4AA75A.irccloud.com)
[09:05:23] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[09:05:23] *** Quits: marc_ (uid5324@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:05:25] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[09:05:25] *** Joins: jackinloadup (jackinload@moz-E630552F.compute-1.amazonaws.com)
[09:05:30] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[09:05:39] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[09:05:47] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[09:05:50] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[09:05:50] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (Ping timeout)
[09:05:50] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[09:05:51] *** Quits: ekiara (emk@moz-9B1940E9.tech.co.ke) (Ping timeout)
[09:05:52] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[09:05:53] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[09:05:53] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[09:05:54] *** Quits: darnuria (darnuria@E402D079.91BBE29F.DE014C27.IP) (Ping timeout)
[09:05:54] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[09:05:57] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[09:05:57] *** Quits: Gracenotes (person@EBE65A41.2EC0B472.9510F13D.IP) (Ping timeout)
[09:06:03] *** Quits: eco (eco@moz-87840B9D.net) (Ping timeout)
[09:06:05] *** Joins: jorendorff_away (jorendorff@moz-C5535E6C.compute-1.amazonaws.com)
[09:06:06] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[09:06:06] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[09:06:06] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Ping timeout)
[09:06:12] *** Quits: StarLight (StarLight@moz-28ACE88D.dynamic.avangarddsl.ru) (Ping timeout)
[09:06:13] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[09:06:13] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[09:06:13] *** Quits: meTaAU (admin@moz-353CB7BE.lns20.per2.internode.on.net) (Ping timeout)
[09:06:15] *** Joins: StarLight (StarLight@moz-28ACE88D.dynamic.avangarddsl.ru)
[09:06:15] *** Joins: reed (reed@tech.monkey)
[09:06:18] *** Quits: wting (wting@E31B3884.E538DA90.20F09BA6.IP) (Ping timeout)
[09:06:26] *** Joins: marc_ (uid5324@moz-31ABA2C0.irccloud.com)
[09:06:28] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[09:06:30] *** Quits: bitemyapp (callen@95EE74F7.F6EF2525.EE6E63A5.IP) (Ping timeout)
[09:06:30] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[09:06:32] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[09:06:34] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[09:06:34] *** Quits: doy (doy@moz-8F23663C.net) (Ping timeout)
[09:06:37] *** Quits: kphelps (kphelps@858F33C0.15D9BE54.9510F13D.IP) (Ping timeout)
[09:07:34] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[09:07:34] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[09:07:42] *** Joins: machty (sid13535@moz-31ABA2C0.irccloud.com)
[09:07:42] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[09:07:56] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:08:25] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[09:08:32] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[09:08:41] *** Joins: Seicht (seich@moz-3D9F5ED0.webfaction.com)
[09:08:47] *** Joins: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP)
[09:08:59] *** Joins: veeti (veeti@moz-D6414854.rojekti.fi)
[09:08:59] *** Joins: brianloveswords (brianloves@moz-CB223D1E.members.linode.com)
[09:09:08] *** Joins: reyre (reyre@moz-89E9865B.com)
[09:09:14] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[09:09:20] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[09:09:20] *** Joins: Gracenotes (person@EBE65A41.2EC0B472.9510F13D.IP)
[09:09:27] *** Joins: eco (eco@moz-87840B9D.net)
[09:09:37] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[09:09:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:09:38] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[09:09:41] *** Joins: meTaAU (admin@moz-353CB7BE.lns20.per2.internode.on.net)
[09:09:42] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[09:09:53] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[09:09:53] *** Joins: bitemyapp (callen@95EE74F7.F6EF2525.EE6E63A5.IP)
[09:09:59] *** Joins: kphelps (kphelps@858F33C0.15D9BE54.9510F13D.IP)
[09:12:59] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[09:14:13] *** Joins: evilpie (sid7877@moz-E77DEB21.irccloud.com)
[09:17:29] *** Quits: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP) (Ping timeout)
[09:18:22] *** Joins: marianoguerra (marianogue@moz-A15D90FF.dip0.t-ipconnect.de)
[09:19:14] *** Joins: cds (uid23856@moz-E77DEB21.irccloud.com)
[09:19:14] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[09:19:14] *** Joins: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com)
[09:19:14] *** Joins: robert (uid15951@moz-A42E5B7B.irccloud.com)
[09:20:23] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[09:22:05] *** Joins: fabiand (fabiand@moz-62F6AD8C.adsl.alicedsl.de)
[09:22:28] <Zr40> I want to ignore a certain IoError (FileNotFound) but have other IoErrors fail. How can I do that?
[09:22:36] *** Joins: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP)
[09:24:19] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:25:00] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[09:25:32] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[09:26:32] <Yurume> Zr40: I don't have much experience with conditions, but I guess: io_error::cond.trap(|err| { if err.kind != FileNotFound { io_error::cond.raise(err); } }).inside(code);
[09:26:50] <Yurume> I'm not sure if reraising the condition works though
[09:27:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:27:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:28:14] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[09:28:50] *** Joins: rca (rcatolino@moz-18AEB6AE.adsl.proxad.net)
[09:29:26] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:29:42] *** Quits: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP) (Ping timeout)
[09:30:21] <Zr40> Yurume: reraising works. Thanks
[09:31:44] <Yurume> we might need `trap_if` or similar?
[09:32:02] *** Quits: kvanb (kvanb@moz-2FD67D8D.lnse7.win.bigpond.net.au) (Ping timeout)
[09:32:23] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[09:32:53] *** Joins: squiddy (squiddy@moz-953631F8.adsl.alicedsl.de)
[09:33:53] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:34:13] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:34:20] <flaper87> Zr40: sorry, I had to leave yday. I hope you found a solution to your issue
[09:34:45] *** Joins: kvanb (kvanb@moz-CC32E42A.vic.bigpond.net.au)
[09:36:06] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[09:36:06] *** Joins: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP)
[09:36:16] *** Quits: leslie (Adium@802083C6.67DB9176.67D29DD9.IP) (Quit: Leaving.)
[09:36:18] *** Joins: leslie (Adium@moz-454B76DB.members.linode.com)
[09:36:59] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[09:38:26] <Zr40> flaper87: yes, it turned out my code compiled when it shouldn't have. I changed the move in the loop in the spawn to a borrow. It's https://github.com/mozilla/rust/issues/10398
[09:40:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:40:52] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[09:41:04] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:41:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:41:41] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[09:43:28] <pyon> I am trying to understand UnsafeArc's destructor - http://github.com/mozilla/rust/blob/master/src/libstd/sync/arc.rs#L111-L128 . Why is only line 121 executed atomically, instead of the whole of lines 121-125?
[09:44:04] *** Quits: leslie (Adium@moz-454B76DB.members.linode.com) (Ping timeout)
[09:44:09] <pyon> Line 121 decreases the reference count, lines 122-125 delete the object if the old count is zero.
[09:44:15] <pyon> old count is one*
[09:44:56] <dbaupp> if old_count is not 1 (i.e. it's greater), then `self` is never touched again
[09:46:23] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[09:46:43] <pyon> And if it is 1?
[09:46:59] <eddyb> pyon: then nothing else holds a handle to it
[09:47:09] <eddyb> that's the beauty of returning the old value :)
[09:47:21] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[09:47:43] <pyon> Oh, right!
[09:47:51] <eddyb> pyon: if you have a race between destructing two arc handles, whoever gets the second atomic operation has to clean up
[09:48:05] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[09:48:49] <pyon> Ah, that is why the old value is returned!
[09:49:15] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[09:50:26] <pyon> (Or, actually, the fact it is the old value is itself not very important, but it is important that it is a task-local value computed as a part of the atomic operation.)
[09:50:28] <pyon> Right?
[09:50:49] <eddyb> pyon: you're complicating it
[09:51:00] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[09:51:13] <pyon> Mmm.
[09:51:29] <eddyb> an atomic decrement is (atomic {let old = current; current -= 1; old})
[09:51:44] *** Joins: leslie (Adium@802083C6.67DB9176.67D29DD9.IP)
[09:52:11] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[09:52:26] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:52:48] <pyon> Ah!
[09:52:59] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Quit: leaving)
[09:53:36] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[09:53:42] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:53:56] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[09:54:08] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:54:32] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:54:34] <judofyr> I'm getting this error when trying to compile master on 10.9: https://gist.github.com/judofyr/60609a710a2f7c0b67bc
[09:55:35] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[09:55:52] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[09:57:44] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:57:59] *** Joins: igstan (igstan@moz-42A3EA4C.residential.rdsnet.ro)
[09:58:20] *** Quits: leslie (Adium@802083C6.67DB9176.67D29DD9.IP) (Quit: Leaving.)
[09:58:22] *** Joins: leslie (Adium@moz-454B76DB.members.linode.com)
[09:58:43] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Connection reset by peer)
[09:58:44] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:59:17] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:59:42] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Client exited)
[09:59:50] *** Quits: igstan (igstan@moz-42A3EA4C.residential.rdsnet.ro) (Quit: igstan)
[10:00:03] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[10:01:43] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[10:01:58] *** Joins: igork (Igor@9C577557.7893D71C.6E0EE79F.IP)
[10:02:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:02:28] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:03:27] *** Joins: ricepuddin (graham@moz-EE1EF9D8.wlan.ic.ac.uk)
[10:03:31] *** Quits: leslie (Adium@moz-454B76DB.members.linode.com) (Ping timeout)
[10:04:11] *** Joins: leslie (Adium@802083C6.67DB9176.67D29DD9.IP)
[10:05:54] *** Quits: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru) (Quit: Kxepal)
[10:06:10] *** Joins: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru)
[10:08:31] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[10:12:46] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Quit: Computer has gone to sleep.)
[10:12:46] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[10:12:53] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:16:47] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:16:56] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:17:12] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[10:17:28] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:17:29] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:18:03] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:18:03] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:18:04] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:18:38] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:18:39] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:19:20] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:19:20] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:19:40] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[10:20:00] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:20:01] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:20:30] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:20:31] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:21:07] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:21:07] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:21:49] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:21:50] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:22:29] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:22:29] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:22:44] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[10:23:02] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:23:03] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:23:42] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:23:43] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:24:22] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:24:23] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:24:55] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:24:56] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:25:32] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:25:33] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:26:10] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:26:10] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:26:44] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:26:45] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:27:27] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:27:28] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:27:53] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:27:54] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:28:31] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:28:32] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:29:04] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:29:05] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:29:10] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[10:29:44] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:29:45] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:30:19] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:30:20] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:30:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[10:31:02] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:31:03] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:31:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:31:36] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:31:37] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:32:12] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:32:13] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[10:32:28] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[10:32:51] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[10:32:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:38:39] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[10:39:00] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-5330B499.dynamic.qsc.de)
[10:40:11] *** Joins: arrrrrrr1 (arrrrrrrrr@moz-882D5DF4.dynamic.qsc.de)
[10:40:46] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-5330B499.dynamic.qsc.de) (Ping timeout)
[10:41:49] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Client exited)
[10:44:29] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[10:44:44] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[10:45:04] *** Quits: arrrrrrr1 (arrrrrrrrr@moz-882D5DF4.dynamic.qsc.de) (Quit: arrrrrrr1)
[10:45:07] <nulldata> Hell
[10:45:23] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[10:45:25] <FliPPeh> o
[10:45:58] <nulldata> Thanks
[10:47:02] <nulldata> I am getting a segfault from calling `TcpStream::read()`
[10:47:25] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[10:47:36] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[10:48:03] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[10:48:05] <nulldata> It isn't the buffer, because I tested it my just allocating `~[ 0u8, 0u8, 0u8, 0u8 ]` and still got a segfault
[10:48:09] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[10:48:13] <nulldata> by*
[10:48:58] *** Joins: arpd (ben@moz-F01B790B.chunkhost.com)
[10:49:06] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[10:50:33] <rca> nulldata: do you have the code posted somewhere?
[10:51:29] <nulldata> I can cut out the relevant bits into a pastebin 
[10:51:46] *** Joins: fyolnish (fyolnish@moz-594FE5F3.uqwimax.jp)
[10:52:16] <rca> nulldata: yep that would be nice :)
[10:52:21] *** Quits: Matrixiumn (zack@moz-1B22AAE2.net) (Connection reset by peer)
[10:52:27] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[10:53:36] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[10:54:45] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[10:55:01] <nulldata> http://pastebin.com/vkNxnzHs
[10:56:52] <rca> nulldata: remote_read takes its argument by value?
[10:57:10] <rca> it seems to be the same problem Zr40 had yday.
[10:58:06] <rca> your code is actually invalid, and the borrow checker should yell at you. You are moving out of lilbuf on the first loop iteration, and then reusing it on the following iterations.
[10:58:06] <Zr40> that's https://github.com/mozilla/rust/issues/10398
[10:58:19] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[10:58:28] <rca> Zr40: thx, couldn't find it in my history.
[10:59:06] <nulldata> Well the test buffer ( lilbuf ) is redefined each iteration though
[11:00:07] <rca> right, hum...
[11:00:41] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[11:00:58] <nulldata> So that doesn't explain the segfault..
[11:02:12] *** Joins: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP)
[11:02:21] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[11:04:03] *** Quits: marianoguerra (marianogue@moz-A15D90FF.dip0.t-ipconnect.de) (Ping timeout)
[11:04:05] *** Quits: ofeldt (ofeldt@moz-42077DC7.dip0.t-ipconnect.de) (Ping timeout)
[11:04:08] *** Quits: kimundi (kimundi@moz-BEFFE5BF.dip0.t-ipconnect.de) (Ping timeout)
[11:04:18] *** Quits: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de) (Ping timeout)
[11:04:30] *** Quits: FliPPeh (lukas@moz-5A449869.dip0.t-ipconnect.de) (Ping timeout)
[11:04:59] <nulldata> I don't think I should be able to cause a segfault with only safe code
[11:05:16] <Ms2ger> You shouldn't
[11:05:30] <nulldata> So it must be a library bug
[11:05:49] <Zr40> or a compiler bug
[11:05:52] <nulldata> Or compiler bug, but I th
[11:05:55] <nulldata> ops
[11:05:57] <nulldata> oops*
[11:06:08] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[11:06:10] *** Joins: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP)
[11:06:21] <nulldata> Well no need to finished that message, you said it yourself.
[11:06:31] *** Joins: ofeldt (ofeldt@moz-42077DC7.dip0.t-ipconnect.de)
[11:06:40] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[11:06:40] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[11:06:59] *** Joins: doy (doy@moz-8F23663C.net)
[11:07:05] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:07:19] *** Joins: kimundi (kimundi@moz-BEFFE5BF.dip0.t-ipconnect.de)
[11:08:43] <rca> nulldata: sry, was away. Yeah its most definitly a bug. And I can't tell if it's one of the ones I've seen before. You might want to reduce the code to a minimum test case and open an issue.
[11:09:33] *** Joins: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de)
[11:10:19] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[11:11:12] *** Joins: marianoguerra (marianogue@moz-A15D90FF.dip0.t-ipconnect.de)
[11:11:40] *** Joins: FliPPeh (lukas@moz-5A449869.dip0.t-ipconnect.de)
[11:12:47] <nulldata> yeah
[11:21:13] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Ping timeout)
[11:22:30] *** Quits: ricepuddin (graham@moz-EE1EF9D8.wlan.ic.ac.uk) (Ping timeout)
[11:23:48] * kimundi wants a deriving(fmt::Default) :(
[11:24:18] <ChrisMorgan> kimundi: and what would it output?
[11:24:44] <dbaupp> ChrisMorgan: same as #[deriving(ToStr)] does
[11:24:48] <kimundi> ChrisMorgan: Well, like #[deriving(ToStr)], except using the formatting traits
[11:24:55] <dbaupp> "calls" Default on the subfields
[11:25:09] * ChrisMorgan had forgotten about ToStr!
[11:26:02] * kimundi has a 12 line data structure, and 30+ lines format impl for it :P
[11:26:25] <dbaupp> kimundi: delete the \n's!
[11:27:20] <kimundi> dbaupp: I'd rather compress the variant names to incomprehensible abbreviations first! ;)
[11:27:36] *** Joins: gwty (gwtypc@BDE8475B.1113450E.6BE1A500.IP)
[11:27:48] <dbaupp> kimundi: but that doesn't save many lines :P
[11:28:09] <dbaupp> at least, not as many as just deleting the newlines all together
[11:29:06] <eddyb> kimundi: and you might have to rewrite it soon, at least you might be able to do this: format_args!(|args| fmt.run_args(args, then), "Foo({}, {})", a, b);
[11:29:08] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[11:29:34] <eddyb> well, second might is closer to "most likely"
[11:30:31] <kimundi> eddyb: I fully expect you to leave the write!() macro working :P - And if you also change all Default impls in the std library, then I'll gladly change mine too. ;)
[11:31:19] <eddyb> kimundi: as in, write!(fmt.buf?
[11:31:32] *** Joins: tq (tq@moz-632DBD9.ad.umu.se)
[11:31:40] <kimundi> SectionText(s) => write!(f.buf, "SectionText({})", s)
[11:31:41] <kimundi> yes
[11:31:45] <eddyb> those uses have to die
[11:32:16] <Ms2ger> Heh
[11:32:21] <kimundi> D:
[11:32:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:32:24] <kimundi> define "die"
[11:32:32] <eddyb> I might add a new macro, format_to!(f, then, "SectionText({})", s), as a shorthand for the above exapnsion
[11:32:41] <kimundi> the write!() macro itself, or the type of its first parameter?
[11:32:44] <eddyb> kimundi: it assumes you're formatting to a Writer which is not sane
[11:32:58] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[11:33:05] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[11:33:08] <eddyb> the uses of write! for fmt.buf
[11:33:23] <kimundi> eddyb: I have no idea wether its sane or not, I'm just doing what the std lib offers as best practices at the moment 
[11:33:33] *** Quits: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr) (Ping timeout)
[11:33:38] <eddyb> kimundi: fmt.buf won't exist
[11:33:45] <kimundi> I gethered that
[11:33:46] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[11:33:53] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[11:33:53] *** Quits: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de) (Ping timeout)
[11:33:59] <eddyb> good, don't become friends with it
[11:34:03] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[11:34:04] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:35:19] <dbaupp> eddyb: does it eliminate the CPS closures?
[11:35:39] <eddyb> dbaupp: LLVM?
[11:37:23] <eddyb> dbaupp: funny thing is... it's not really optimized properly (I can't even start asking why without my env/self PR, which makes IR slightly more readable), yet it's still a few times faster than format!
[11:37:39] <eddyb> turns out CPS is not inherently slow
[11:38:33] *** Joins: richard|s (mindginati@moz-53E04F45.dyn.cust.vf.net.nz)
[11:38:38] *** Quits: richard|s (mindginati@moz-53E04F45.dyn.cust.vf.net.nz) (Quit: richard|s)
[11:38:40] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[11:38:44] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Ping timeout)
[11:39:03] <nulldata> My problem seems to be related to how I initiate my server, I'll keep narrowing it down.
[11:40:42] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[11:41:00] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[11:42:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:42:21] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[11:42:47] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[11:43:26] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[11:43:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:44:04] *** Joins: pzol_fon (pzol_fon@322A273C.DEB41A6D.AADC76B.IP)
[11:44:34] *** Quits: gwty (gwtypc@BDE8475B.1113450E.6BE1A500.IP) (Ping timeout)
[11:44:53] *** Quits: pzol_fon (pzol_fon@322A273C.DEB41A6D.AADC76B.IP) (Quit: Leaving)
[11:45:08] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[11:46:01] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Quit: )
[11:46:28] *** Joins: gwty (gwtypc@E0368333.E280EF48.EF1555B.IP)
[11:47:16] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[11:48:16] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[11:49:18] *** Joins: tsurai (tsurai@D0859826.B8520FC9.3B82F87E.IP)
[11:50:02] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[11:51:38] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[11:51:53] *** Quits: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP) (Ping timeout)
[11:52:09] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:52:33] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[11:53:27] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[11:54:18] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:55:10] *** Joins: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP)
[11:55:19] <eddyb> why does the snapshot contain so many libs?
[11:55:45] <eddyb> nvm, I read it wrong
[11:56:02] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[11:56:07] *** Joins: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP)
[11:56:48] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Ping timeout)
[11:57:40] *** Joins: heftig (heftig@A374C98A.408BAEBF.C44933E.IP)
[11:59:56] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[12:00:12] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:01:46] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:05:30] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[12:07:08] *** Joins: Florob (Florob@moz-39532932.de)
[12:08:26] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[12:08:27] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:08:42] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:10:06] *** Quits: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:12:35] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Client exited)
[12:12:41] *** Parts: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ex-Chat)
[12:13:00] *** Joins: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP)
[12:13:27] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[12:13:57] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[12:14:13] *** Joins: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP)
[12:15:18] *** Quits: tq (tq@moz-632DBD9.ad.umu.se) (Quit:  HydraIRC -> http://www.hydrairc.com <- Go on, try it!)
[12:15:42] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[12:16:55] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[12:17:12] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[12:17:16] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[12:19:42] *** Quits: gverilla__ (gverilla@FDCF4B71.90C94185.F945DA.IP) (Ping timeout)
[12:20:26] <Florob> Hi. I'm trying to write a Lua module in Rust, and failing miserably apparently. <https://gist.github.com/Florob/8538852> is what I currently have, which gives me a segfault in a strlen() call. Surprisingly (to me) explicitly adding a \0 byte ("hello\0") seems to help, but complains about the thread-local pointer being null. Any pointer what the correct way to do this would be?
[12:22:15] <eddyb> Florob: https://gist.github.com/Florob/8538852#file-gistfile1-rs-L6-L7 why are you using Option in a C structure?
[12:22:56] <eddyb> *T is nullable, so Option<*T> is represented as (uint, *T)
[12:23:09] <kimundi> Option<*c_char> does not get optimized to anullable pointer atm, afaik
[12:23:16] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[12:23:29] <Florob> I was assuming that would become a NULL pointer
[12:23:38] <Florob> as it seems a lot simpler than the function case too
[12:23:38] <eddyb> Florob: no, *T already can be NULL
[12:23:52] <eddyb> rusti: ::std::mem::size_of::<Option<*int>>()
[12:23:53] -rusti- 16u
[12:24:01] <eddyb> rusti: ::std::mem::size_of::<Option<extern "C" fn()>>()
[12:24:02] -rusti- 8u
[12:24:32] <Florob> *sigh* Okay, so "0 as *c_char"?
[12:24:36] <eddyb> Florob: we have ptr::null()
[12:24:46] <dbaupp> Florob: that should work
[12:25:09] <eddyb> rusti: unsafe{let x: *int = ::std::ptr::null(); x}
[12:25:10] -rusti- <anon>:10:9: 10:52 warning: unnecessary `unsafe` block, #[warn(unused_unsafe)] on by default
[12:25:10] -rusti- <anon>:10         unsafe{let x: *int = ::std::ptr::null(); x}
[12:25:11] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[12:25:11] -rusti- (0x0 as *())
[12:25:36] <eddyb> interesting, repr seems to erase the type
[12:26:44] <Florob> That appears to work, except for me failing to use the Lua API apparently. Thanks everyone
[12:27:57] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[12:29:51] *** Joins: nkoep (nik@moz-7A3C96ED.pool.mediaways.net)
[12:33:08] *** Joins: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr)
[12:33:57] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:34:04] <bjz> unsafe{let x: *int = ::std::ptr::null(); *x}
[12:34:11] <bjz> rusti: unsafe{let x: *int = ::std::ptr::null(); *x}
[12:34:12] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[12:34:36] *** Joins: mye (mye@moz-AC9229D6.dip0.t-ipconnect.de)
[12:34:51] <bjz> eddyb: are you saying that rusti's output of `(0x0 as *())` was the weird thing?
[12:35:17] <eddyb> bjz: yeah, that's repr/TyVisitor used by Poly ({:?})
[12:35:24] <bjz> ahh yes
[12:35:33] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[12:35:39] *** kimundi is now known as zz_kimundi
[12:36:22] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[12:36:42] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:38:28] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:41:22] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:41:31] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[12:42:15] <Florob> hmm... is there any good way to get a vector containing `*c_char`s pointing to strings, from a vector of ~str?
[12:42:46] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[12:43:02] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:43:17] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[12:43:42] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:43:52] <eddyb> Florob: mapping
[12:44:34] <eddyb> Florob: though not with with_c_str
[12:45:24] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:46:19] <Florob> eddyb, but, using what instead? maping to ~[u8] containing a trailing zero, and then mapping that to references is the best I can come up with
[12:46:55] <eddyb> Florob: CString is what with_c_str uses internally
[12:47:17] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[12:47:17] *** Quits: fyolnish (fyolnish@moz-594FE5F3.uqwimax.jp) (Ping timeout)
[12:47:32] *** Joins: twi (Adium@moz-A650563E.lnk.telstra.net)
[12:47:41] *** Quits: twi (Adium@moz-A650563E.lnk.telstra.net) (Max SendQ exceeded)
[12:48:13] *** Joins: twi (Adium@moz-A650563E.lnk.telstra.net)
[12:48:37] <Florob> eddyb, there is no way to just get a *c_char from CString though, is there?
[12:49:10] <eddyb> there should be - how else would you use it?
[12:49:13] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[12:49:24] <Florob> calling with_ref() on it
[12:49:27] <eddyb> Florob: http://static.rust-lang.org/doc/master/std/c_str/struct.CString.html
[12:49:56] <eddyb> unwrap looks a bit dangerous
[12:50:37] *** Quits: twi (Adium@moz-A650563E.lnk.telstra.net) (Ping timeout)
[12:50:50] <eddyb> Florob: you may have to do cstr.with_ref(|x|x) and ensure you don't leak the result outside of the scope cstr lives in
[12:50:56] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[12:51:08] *** Joins: twi (Adium@moz-A650563E.lnk.telstra.net)
[12:51:15] *** Quits: twi (Adium@moz-A650563E.lnk.telstra.net) (Max SendQ exceeded)
[12:51:30] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[12:51:51] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[12:53:50] *** Joins: twi (Adium@moz-A650563E.lnk.telstra.net)
[12:55:13] *** Quits: twi (Adium@moz-A650563E.lnk.telstra.net) (No route to host)
[12:55:14] *** Joins: twi1 (Adium@moz-A650563E.lnk.telstra.net)
[12:56:15] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[12:57:01] *** Quits: twi1 (Adium@moz-A650563E.lnk.telstra.net) (Ping timeout)
[12:57:34] <igork> hello, http://www.contrib.andrew.cmu.edu/~acrichto/doc/extra/rc/struct.RcMut.html is not there yet, or its already gone? :)
[12:58:24] <eddyb> igork: Rc<RefCell<T>> does the job now
[12:58:35] <eddyb> or Rc<Cell<T>> for Pod types
[12:59:06] <igork> eddyb: thanks, will look in it
[12:59:57] *** Joins: vmx (vmx@moz-BACBB4A.pools.arcor-ip.net)
[13:02:58] *** Joins: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com)
[13:03:21] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[13:03:51] <Florob> eddyb, Does this look sensible to you? <https://gist.github.com/Florob/8538852#file-gistfile1-rs-L31-L36>
[13:05:06] <eddyb> Florob: sure
[13:05:57] <Florob> You say that as if it didn't look like a complicated mess :)
[13:06:16] <eddyb> Florob: I can read it
[13:06:37] *** Quits: kvanb (kvanb@moz-CC32E42A.vic.bigpond.net.au) (Quit: kvanb)
[13:06:53] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[13:07:16] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[13:07:23] <eddyb> Florob: can't you provide an opaque pointer to Lua?
[13:07:55] <Florob> eddyb, In place of what?
[13:08:16] *** Joins: kvanb (kvanb@moz-CC32E42A.vic.bigpond.net.au)
[13:08:25] <eddyb> Florob: the "user pointer" C libs usually have for callbacks
[13:08:50] <eddyb> another argument to LuaFunc
[13:09:30] <eddyb> otherwise you'll have to create trampolines
[13:11:46] *** Joins: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de)
[13:11:51] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[13:11:51] *** Quits: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP) (Ping timeout)
[13:12:06] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[13:12:16] <Florob> Not sure that is possible in this manner. You can return "user data" to Lua though, which can be saved in variables visible from within Lua, but not as such accessed. You'd then pass that back into a function call
[13:13:19] *** Joins: Ferreus (ferreus@moz-B4B2FD53.pools.arcor-ip.net)
[13:13:57] <eddyb> Florob: I was thinking of wrapping Rust functions in a safe-ish manner
[13:14:23] <eddyb> so you coud register ("hello
[13:14:29] <eddyb> dammit, enter
[13:14:51] <eddyb> ("hello", |_| println!("Hello from Rust!"))
[13:15:06] *** Joins: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP)
[13:17:20] *** Joins: gverilla (gverilla@moz-34765BF9.tubit.tu-berlin.de)
[13:20:28] *** Joins: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[13:20:32] <Florob> eddyb, That would probably work with sufficient magic. You could fill the table with user data instead of functions, and then execute a Rust function stored in that user data when someone tries to call the user data. (If that seems confusing, yes it is)
[13:21:18] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[13:23:23] <igork> if i understand correctly, in rust i need to call clone() if i need to pass copy of variable to function, even when called function is declared as pass-by-value? so no implicit copy construction. its just moved, right?
[13:23:46] <eddyb> we don't have copy constructors, so I'm not sure what you mean
[13:23:51] *** Quits: gverilla (gverilla@moz-34765BF9.tubit.tu-berlin.de) (Ping timeout)
[13:24:16] <eddyb> igork: what does the relevant code look like?
[13:24:38] *** Quits: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP) (Input/output error)
[13:24:46] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[13:24:51] <eddyb> if you work with generics, you need cloning because you don't know if the type parameter copies or not (though we have the Pod kind now, so you could know)
[13:24:53] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[13:25:13] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[13:25:15] *** Quits: zxcdw (r-a@5F0EDB29.B543C4DE.3933CC16.IP) (Ping timeout)
[13:25:31] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[13:25:32] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[13:25:48] *** Joins: zxcdw (r-a@5F0EDB29.B543C4DE.3933CC16.IP)
[13:25:55] *** Joins: benh (ben@moz-4A0366D2.org)
[13:25:59] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[13:26:09] <igork> actually i'm curious about what happens when: let x = SomeBigStruct::new(); function(x); // function signature is - "fn function(x: SomeBigStruct)"
[13:26:16] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:26:20] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[13:26:37] <eddyb> igork: if SomeBigStruct is larger than a register (uint on all supported architectures), it's passed by reference
[13:27:44] <igork> oh, cool
[13:28:22] <eddyb> (so the codegen should be similar to fn function(x: &SomeBigStruct), though we have found missing LLVM optimizations that causes an extra copy - but inlining should fix that, in the general case)
[13:29:37] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[13:30:07] <bstrie_ng> eddyb: and what if the function signature was `fn function(mut x: SomeBigStruct)` . what then?
[13:30:20] <eddyb> bstrie_ng: still by reference
[13:30:32] <bstrie_ng> mutable reference?
[13:30:36] <eddyb> bstrie_ng: keep in mind that the reference is to a temporary on the caller's stack
[13:30:52] <bstrie_ng> oh ok
[13:30:57] <bstrie_ng> so it still gets copied
[13:30:57] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[13:31:10] <bstrie_ng> it's just that the copy doesn't enter the new stack frame, or whatever
[13:31:14] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:31:21] <eddyb> bstrie_ng: LLVM can elide most copies. failure to inline is what keeps most of them alive
[13:31:50] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[13:32:18] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[13:32:35] <eddyb> bstrie_ng: but maybe you don't want to know more details. it's a scary hell
[13:33:04] <bstrie_ng> eddyb: I just get concerned that "sometimes passing by value and sometimes passing by reference based on the size of the thing" is a semantic difference rather than just an optimization
[13:33:26] <eddyb> bstrie_ng: no, though there was a related bug that I've fixed a week ago
[13:34:45] *** Joins: espindola (espindola@moz-8F837B07.dsl.teksavvy.com)
[13:34:58] <eddyb> fn(self) methods used to always pass by reference, even for immediates like u8 - in that case, fn(mut self) could write the the original value, even though it worked fine with NonImmediateAKAFatStruct
[13:35:41] <judofyr> what does `fn ex(mut x: SomeBigStruct)` actually mean? if I do `ex(foobar)` can ex change the foobar-value?
[13:36:15] *** Quits: gwty (gwtypc@E0368333.E280EF48.EF1555B.IP) (Ping timeout)
[13:36:51] <eddyb> judofyr: no
[13:37:07] <eddyb> judofyr: it can change a temporary that has the same value as foobar before the function call
[13:37:16] <eddyb> judofyr: it's kinda like ex(&{foobar})
[13:37:27] <eddyb> or &mut, in that case
[13:39:03] <judofyr> eddyb: right, it will take a local copy and send a reference to that to the function? and if it's a small struct, it's all sent as a value?
[13:39:13] <judofyr> oh, and I'm still having issues compiling latest Rust master on 10.9: https://gist.github.com/judofyr/60609a710a2f7c0b67bc. seems to be related to some weird linking errors? should I open an issue?
[13:39:28] <bstrie_ng> judofyr: anything that looks like `fn foo(mut bar: Qux)` is just shorthand for `fn foo(bar: Qux) { let mut bar = bar; ... }`
[13:39:39] <eddyb> bstrie_ng: only semantically :)
[13:39:48] <judofyr> semantically is good enough for me ;)
[13:39:50] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[13:39:58] <bstrie_ng> eddyb: not sure what you're implying
[13:40:08] *** Joins: Earnestly (earnest@moz-E86D50FA.dyn.plus.net)
[13:40:28] <eddyb> bstrie_ng: that the copy can be outside, as in my example - though usually there's a million copies in the callee and in the caller, so, meh
[13:40:58] <bstrie_ng> wha, does `let mut bar = bar;` cause bar to be copied?
[13:41:26] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:41:40] <dbaupp> bstrie_ng: yes, but LLVM will (almost?) always elide it
[13:41:42] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[13:41:52] <bstrie_ng> sigh
[13:41:57] <bstrie_ng> that should really be a no-op
[13:42:03] <eddyb> bstrie_ng: fn foo(x: u8){} actually does fn foo(x: u8){let ref x = &x;}
[13:42:10] <Zr40> rusti: let x = ["a", "b"]; x.map(|x| x)
[13:42:11] <eddyb> well, no ref
[13:42:12] -rusti- pastebinned 37 lines of output: http://ix.io/a23
[13:42:20] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[13:42:35] <eddyb> bstrie_ng: our codegen can get horrible at times. we have issues open about it
[13:42:41] <bstrie_ng> Zr40: rusti isn't updated such that that's possible
[13:42:53] <bstrie_ng> or, wait
[13:42:57] <bstrie_ng> maybe that really is an error :P
[13:43:18] <bstrie_ng> I thought you were getting the ol rvalue lifetime bug
[13:43:31] <eddyb> rusti: let x = ["a", "b"]; x.map(|x| *x)
[13:43:32] -rusti- ~["a", "b"]
[13:44:03] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[13:44:05] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[13:44:11] <eddyb> x.values().collect() pls
[13:44:35] <igork> i saw how RefCell<T>::new(value: T) -> RefCell<T> is defined, and just wodered how it takes poiner to temporary (which is wrong assumption) and it still works. i'm trying to learn rust, used c++ before, so my questions can look weird, sorry :)
[13:44:54] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:44:57] <eddyb> igork: it takes no pointers. do you see pointers?
[13:45:09] *** Joins: zeenix (zeenix@moz-B92AB3AA.range109-158.btcentralplus.com)
[13:45:24] <Zr40> rusti: let x = ["a", "b"]; x.iter().collect()
[13:45:32] -rusti- pastebinned 6 lines of output: http://ix.io/a24
[13:45:33] *** Parts: zeenix (zeenix@moz-B92AB3AA.range109-158.btcentralplus.com) (Leaving)
[13:45:34] <eddyb> the language should still work even without considering implementation weirdnesses
[13:45:42] <eddyb> Zr40: that tries to collect references
[13:45:45] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:47:10] <eddyb> igork: Rust has similar terminology to C++, but the semantics can differ a lot
[13:47:36] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[13:47:52] <eddyb> you can't easily tell what's an lvalue, for example. you have to dereference &T to assign to it. etc. etc.
[13:48:07] <igork> eddyb: nope, it puts value into RefCell.value. and at this point i feeel like a kid. because for me it looks like copying value into struct, and RefCell contains different copy. but it not that, and i need to learn this semantics.
[13:48:22] <eddyb> igork: "a different copy"?
[13:48:32] <eddyb> it's not different :)
[13:49:05] <igork> eddyb: yup, i need to forget about c++, :)
[13:49:42] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[13:49:56] *** Quits: nulldata (chatzilla@BA6AA2FD.BFAF942F.E5879046.IP) (Ping timeout)
[13:50:04] <Ms2ger> I think the usual way to do that involves large amounts of alcohol :)
[13:50:24] <eddyb> igork: let s = ~"foo"; let cell = RefCell::new(s); // s is now moved from (you can't touch it) and the pointer was copied into cell
[13:51:27] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[13:51:57] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[13:52:52] <eddyb> igork: since it's on the stack, and it would be stupid to not inline RefCell::new, the code above should optimize to let cell = RefCell {value: ~"foo", refcount: 0};
[13:53:07] <flaper87> igork: in case you want to read more about lvalues and rvalues in rust: https://github.com/mozilla/rust/blob/master/src/librustc/middle/trans/doc.rs
[13:53:18] *** Quits: Crandom (Crandom__@moz-56264BBC.sx) (Quit: ZNC - http://znc.in)
[13:53:29] <eddyb> is that even up to date?
[13:53:37] *** Joins: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com)
[13:53:50] <eddyb> well, it mention datums, so it's not terribly old
[13:54:08] <eddyb> igork: there is actually one copy performed there, from "foo" to a ~str, but you can't get rid of that :P
[13:56:58] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[13:57:12] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:57:14] *** Quits: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:57:35] *** Quits: dmacvicar (dmacvicar@moz-663A7346.nue.novell.com) (Quit: Ex-Chat)
[13:58:06] *** Quits: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Client exited)
[13:58:50] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Ping timeout)
[13:59:00] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:59:44] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[14:00:03] <igork> flaper87, eddyb: i think i got it, thanks. when constructing RefCell there is no 'naked' value anymore. its moved
[14:00:53] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[14:11:48] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:12:04] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Computer has gone to sleep.)
[14:12:59] *** jorendorff_away is now known as jorendorff
[14:13:04] *** Quits: kvanb (kvanb@moz-CC32E42A.vic.bigpond.net.au) (Quit: kvanb)
[14:13:35] <eddyb> OMG I've done it
[14:13:53] <eddyb> dbaupp: statically resolved formatting code
[14:14:16] <eddyb> weird enough, I've had to run opt -S -O3 -always-inline *twice* on it
[14:14:41] <eddyb> I guess -always-inline was happening after the optimizations capable of devirtualization
[14:14:59] <eddyb> can I use rustc to compile the .ll now?
[14:15:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:16:05] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[14:16:09] <eddyb>   %1 = tail call i8* @malloc(i64 28) #2
[14:16:23] *** Joins: dew (Instantbir@moz-F418C64A.dhcp.stls.mo.charter.com)
[14:16:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:16:29] *** Quits: dave1629 (dave@DA923962.6E684168.CE55B2D2.IP) (Quit: dave1629)
[14:18:07] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[14:18:20] *** Joins: moostik (Icedove@moz-1FF02BE5.w92-151.abo.wanadoo.fr)
[14:21:07] *** Joins: dave1629 (dave@DA923962.6E684168.CE55B2D2.IP)
[14:21:13] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Client exited)
[14:21:34] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[14:23:15] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Ping timeout)
[14:23:49] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:24:15] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:24:28] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[14:30:59] <eddyb> dbaupp: now I can't see my code... it might have been eliminated by LLVM
[14:32:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:32:43] *** Joins: bakkdoor (bakkdoor@moz-48BDE18.osnanet.de)
[14:36:03] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[14:37:25] <SiegeLord> Something's really wrong with rustdoc...
[14:38:03] *** Quits: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au) (Quit: z0w0)
[14:38:11] <SiegeLord> Alternatively, it gets easily confused by re-exports
[14:38:33] <SiegeLord> Although it used to be able to handle them fine
[14:39:29] *** Joins: c-a (c-a@moz-8D7A06D6.a163.priv.bahnhof.se)
[14:40:13] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[14:40:52] *** Joins: new_one (new_one@A5C477B8.E8B7FFCF.B3C0173E.IP)
[14:41:07] *** Quits: sellout (Adium@moz-76D71F1A.hlrn.qwest.net) (Quit: Leaving.)
[14:41:40] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Client exited)
[14:42:02] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[14:42:46] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[14:42:58] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[14:43:03] <lexs> um, how do i define an empty macro, with args?
[14:43:12] <lexs> i get "unexpected token: `<eof>`"
[14:43:15] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[14:43:44] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Ping timeout)
[14:44:26] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:44:28] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[14:44:46] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[14:44:48] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[14:44:56] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[14:45:20] *** Joins: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk)
[14:45:47] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[14:45:47] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[14:46:06] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:46:26] <ChrisMorgan> ncurses-rs example has ``#[nolink] #[cfg(target_os = "linux")] #[link(name = "GL")] extern { }``. What does this mean?
[14:46:28] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[14:46:41] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:47:18] <ChrisMorgan> lexs: give it some body, e.g. for an expression, ()
[14:47:54] <lexs> ChrisMorgan: that's what I have, it gives eof: https://gist.github.com/lexs/cda1d5f5c6961637aa3f
[14:48:23] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[14:48:24] <ChrisMorgan> lexs: no, I mean () the value, i.e. ... => (())
[14:48:27] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:48:41] *** Quits: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk) (Ping timeout)
[14:48:46] <lexs> ChrisMorgan: oh! thanks
[14:49:40] <Ms2ger> => ((()))?
[14:50:08] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[14:51:26] <eddyb> ChrisMorgan: you'd usually put all the extern functions that are from libGL in there
[14:51:32] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[14:51:39] <eddyb> but people don't do that *sigh*
[14:52:02] <SiegeLord> It's a pain
[14:52:04] <eddyb> ChrisMorgan: I'm not sure what #[nolink] does because the only purpose of such an extern block is to provide libraries to link to
[14:52:06] <ChrisMorgan> eddyb: I was wondering more about the combination of #[nolink] #[cfg(target_os = "linux")] #[link(name = "GL")] and what it means
[14:52:21] <SiegeLord> It's nice to mimic the header structure of the original library
[14:52:25] <ChrisMorgan> The example doesn't use libGL, so I don't know why it's there, really.
[14:52:30] <eddyb> the cfg is simple, it's only for linux. I'd have to
[14:52:40] <eddyb> ChrisMorgan: hmm, that's a bit ridiculous then
[14:52:49] <bjz> ChrisMorgan: I used to do #[nolink]
[14:53:06] <bjz> ChrisMorgan: but I think it was a cargo-cult kind of thing
[14:53:08] <eddyb> if you can, try on linux. should work without it if it's obsolete and not magic
[14:53:12] <bjz> dunno though
[14:53:19] <eddyb> SiegeLord: hmm?
[14:53:31] <eddyb> SiegeLord: you need an extern block anyway
[14:53:33] <SiegeLord> Referring to the empty extern block
[14:53:45] <eddyb> aaah, I see what you mean now
[14:53:59] <SiegeLord> It'd be nice not to need the empty extern block and just be able to do #[link];
[14:55:05] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[14:57:23] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[14:58:01] *** Joins: nical1 (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:58:17] *** Quits: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:59:06] *** Joins: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk)
[15:02:48] *** Joins: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP)
[15:03:57] *** Quits: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk) (Ping timeout)
[15:04:37] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:04:52] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[15:04:56] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[15:05:03] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[15:05:52] *** Joins: bmurphy1976 (bmurphy197@moz-C00AB6D8.hsd1.il.comcast.net)
[15:07:20] *** Joins: benjamin__ (benjamin@moz-C4D66C34.dip0.t-ipconnect.de)
[15:07:22] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[15:07:28] <huhlig> Ok, How does dynamic loading work in rust
[15:07:58] <huhlig> in Java I can Use classloader to load a new class of a type. and validate that it follows a given interface.
[15:07:59] *** Quits: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de) (Ping timeout)
[15:08:17] <cmr> we wrap dlopen etc in std::unstable::dynamic_lib
[15:08:32] *** zz_kimundi is now known as kimundi
[15:08:43] <huhlig> so can you only load C Symbol functions?
[15:08:57] <cmr> you can load whatever symbols you want
[15:09:27] <strcat> it doesn't validate types though and even if it did, it would rely on the crate you loaded having the right metadata
[15:09:28] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:09:39] <pyon> huhlig: The problem with classloaders (and anything reflection-based) is - what happens if the validation fails?
[15:09:46] <huhlig> strcat: isnt that considered a given
[15:09:52] <huhlig> pyon. Exception
[15:10:15] * huhlig is trying to figure out how to convert a java application to rust properly
[15:10:34] <cmr> porting anything java to anything rust isn't going to be easy.
[15:10:39] <cmr> very very different languages.
[15:10:41] <huhlig> well technically its a prototype and set of requirements
[15:10:44] <SiegeLord> I don't think it has to be a given. A potential loader could look at the metadata
[15:10:50] <diverse> cmr: that is what I was thinking
[15:10:52] <huhlig> cmr I wrote the prototype initially
[15:11:13] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[15:11:14] <pyon> huhlig: Scan the whole application for uses of resources that must be manually disposable (normally in "finally" clauses: "finally { foo.dispose(); }"), all of that has to become some sort of owned resource in Rust.
[15:11:15] <huhlig> I need to write a generic event stream processor
[15:11:21] <cmr> huhlig: anyway we don't have any nice runtime loading interface besides what dynamic_lib exposes yet.
[15:11:24] <pyon> s/manually disposable/manually disposed/
[15:11:35] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[15:11:44] <huhlig> pyon: the architecture itself can almost be completely handled by function pointers
[15:11:56] <huhlig> the objects are mostly just containers
[15:12:22] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:12:57] <huhlig> basically the only real data structure I need to worry about is the event itself which can be owned by a manager or queue
[15:13:28] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[15:13:37] *** Quits: bakkdoor (bakkdoor@moz-48BDE18.osnanet.de) (Quit: Leaving...)
[15:14:01] <huhlig> dynamically loaded stream listener, gets chopped into events by a deserializer, stored in a queue, analyzed by a dynamically loaded processor/processors, then queued one last time and serialzied from object to bytestream and serialized by a broadcaster sink
[15:14:31] <huhlig> it ends up being 2+n tasks the task has the runtime data 
[15:14:57] *** Quits: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP) (Quit: victorporof)
[15:14:57] <huhlig> but one big peice is being able to validate the interfaces on dynamically loaded code
[15:15:04] <huhlig> hence the question about loading
[15:15:08] *** Quits: mye (mye@moz-AC9229D6.dip0.t-ipconnect.de) (Quit: mye)
[15:15:31] <huhlig> so does std::unstable::dynamic_lib only give you back a function pointer and not handle classloader type symantics 
[15:16:27] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[15:16:37] *** Joins: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net)
[15:17:00] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[15:17:05] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[15:17:06] *** Joins: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:17:48] *** Quits: nical1 (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:17:53] <huhlig> cmr any plans for one?
[15:18:18] <cmr> we don't have classes etc..
[15:18:32] <huhlig> I didnt think rust was going to have classes
[15:18:36] <FliPPeh> Who needs classes, we have structs!
[15:18:39] <huhlig> I thought they got ripped out
[15:18:46] <cmr> huhlig: eventually there will be support for verifying that the types are what you expect..
[15:18:53] <cmr> but you're still always going to get a function pointer.
[15:19:11] <cmr> the way to handle this is to require plugins to export a symbol with a fixed name that returns a trait object.
[15:19:19] <cmr> your lib defines the trait.
[15:19:27] <huhlig> but thats not possible atm
[15:19:31] <cmr> yes it is.
[15:19:39] <cmr> rustdoc does exactly this.
[15:19:56] <cmr> https://github.com/mozilla/rust/blob/master/src/librustdoc/plugins.rs
[15:20:06] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[15:20:29] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:20:39] <huhlig> so rustdoc_plugin_entrypoint is a function that returns back a traitobj?
[15:21:11] <cmr> yes.
[15:21:55] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[15:21:57] <huhlig> maybe I dont understand. I thought traits were an amorphous compiler contract... is it returning a pointer to a struct?
[15:22:12] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[15:22:14] <huhlig> as well as function pointers to all the methods?
[15:22:26] <cmr> http://static.rust-lang.org/doc/master/tutorial.html#generics
[15:22:29] <cmr> 17.6, trait objects.
[15:22:40] *** Quits: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net) (Ping timeout)
[15:23:09] <cmr> but yes.
[15:23:42] <huhlig> ahh... Trait Objects are polymorphs, or at least have a vtable
[15:25:01] *** kimundi is now known as zz_kimundi
[15:26:26] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[15:26:54] *** Quits: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru) (Quit: Kxepal)
[15:27:10] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[15:27:16] *** Joins: rca_ (rcatolino@moz-5EA2C694.adsl.proxad.net)
[15:27:44] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:28:21] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[15:28:37] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Connection reset by peer)
[15:28:42] *** Quits: rca (rcatolino@moz-18AEB6AE.adsl.proxad.net) (Ping timeout)
[15:28:48] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[15:29:51] *** Quits: dave1629 (dave@DA923962.6E684168.CE55B2D2.IP) (Quit: dave1629)
[15:30:04] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[15:30:23] *** Joins: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net)
[15:32:19] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Ping timeout)
[15:32:43] *** Joins: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com)
[15:32:53] *** Joins: dave1629 (dave@DA923962.6E684168.CE55B2D2.IP)
[15:33:11] *** Joins: okard (okard@moz-8AA7353B.dip0.t-ipconnect.de)
[15:34:10] *** Quits: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Client exited)
[15:34:12] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[15:34:14] *** Joins: atomical (atomical@moz-C92D67E2.library.northwestern.edu)
[15:34:19] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:34:23] *** Quits: mitchty (mitchty@moz-9F527C8F.net) (Ping timeout)
[15:34:30] *** Joins: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru)
[15:35:42] *** Quits: daschl (daschl@moz-DC6DE6E2.vie.surfer.at) (Quit: Textual IRC Client: www.textualapp.com)
[15:35:50] *** Quits: bmurphy1976 (bmurphy197@moz-C00AB6D8.hsd1.il.comcast.net) (Quit: bmurphy1976)
[15:36:04] *** Quits: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[15:36:26] *** Joins: bmurphy1976 (bmurphy197@moz-C00AB6D8.hsd1.il.comcast.net)
[15:36:50] *** Quits: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:37:07] *** Quits: bmurphy1976 (bmurphy197@moz-C00AB6D8.hsd1.il.comcast.net) (Quit: bmurphy1976)
[15:37:25] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[15:37:40] *** Joins: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP)
[15:37:45] *** Joins: bmurphy1976 (bmurphy197@moz-C00AB6D8.hsd1.il.comcast.net)
[15:37:49] *** Joins: mitchty (mitchty@moz-9F527C8F.net)
[15:38:11] *** Joins: alex_ (alex@4A68ADFD.7FDDA9B5.B7830B68.IP)
[15:38:37] *** Joins: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net)
[15:39:48] <alex_> hey, i'm having a little bit of trouble with references. The code (http://pastebin.com/uj0dstji) produces a 'cannot borrow `x` as immutable because it is also borrowed as mutable' error.
[15:39:55] <SiegeLord> Heh, rust has trouble with #[crate_id="foo\0"];
[15:40:42] *** Joins: FreeFull (freefull@moz-4F046D30.as13285.net)
[15:40:46] <alex_> changin `&mut` to `&` causes it to work, though.
[15:40:47] <eddyb> alex_: you can't touch x until b is dead
[15:40:59] <herrwolfe45> hey alex_ I'm getting 'this' paste has been removed
[15:41:03] <eddyb> alex_: because b can change x
[15:41:03] <alex_> eddyb: alright. i thought reading was okay
[15:41:22] <eddyb> alex_: nope
[15:41:24] <alex_> eddyb: alright, that makes sense. 
[15:41:42] *** Quits: japaric (japaric@465C3E59.F60EC59D.F29ED47E.IP) (Ping timeout)
[15:41:46] <alex_> herrwolfe45: Um. It should be there. I just refreshed the page. http://pastebin.com/uj0dstji
[15:41:56] <alex_> herrwolfe45: eddyb gave a pretty good answer though
[15:41:58] <Zr40> herrwolfe45: I suppose you copied the ) along with the url
[15:42:24] <alex_> eddyb, herrwolfe45: Thanks!
[15:42:26] <eddyb> s/copied/IRC client derped - because we obviously like to click on links
[15:43:17] <SiegeLord> And doing #[crate_id="foo\nbar"] makes --crate-name, --crate-file-name very confused
[15:43:21] <SiegeLord> And --dep-info
[15:43:23] *** Quits: espindola (espindola@moz-8F837B07.dsl.teksavvy.com) (Quit: Leaving...)
[15:43:26] *** Joins: vgeddes (vincent.ge@1F5AFC2C.61A199ED.447AD709.IP)
[15:43:31] <SiegeLord> I wish filenames were easier :P
[15:43:43] *** Quits: marianoguerra (marianogue@moz-A15D90FF.dip0.t-ipconnect.de) (Ping timeout)
[15:43:53] <huhlig> cmr perhaps you can help me one last question. std::io::Reader is the base trait for all inputstreams. So is std::io::stdio::stdin a TraitObject, same with an open file?
[15:43:55] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Quit: Leaving)
[15:44:01] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[15:44:11] <cmr> huhlig: no, stdin returns a struct that implements Reader.
[15:44:12] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:44:20] *** Quits: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru) (Quit: Kxepal)
[15:44:21] <cmr> trait objects are "pointers to traits", syntactically.
[15:44:27] <cmr> ~Trait, &Trait
[15:44:32] <cmr> where Trait is the name of a trait.
[15:44:34] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[15:44:39] *** Joins: japaric (japaric@70E8CE2A.4B327FDB.F29ED47E.IP)
[15:44:45] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:44:55] <SiegeLord> We might have to add a --print0 command line switch to rustc XD
[15:44:55] <huhlig> but it would still be possible to write something that would accept a pointer to any Trait that implements Reader
[15:45:07] <huhlig> simply by accepting @Trait
[15:45:11] <huhlig> right?
[15:45:30] <eddyb> death to @, don't use it in new code
[15:45:43] <eddyb> huhlig: traits can't implement other traits
[15:45:44] <cmr> yes, by taking ~Reader or &Reader
[15:45:49] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[15:45:50] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[15:46:19] <huhlig> eddyb: why is it still an option then?
[15:46:28] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:46:31] <cmr> huhlig: it isn't.
[15:46:34] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Connection reset by peer)
[15:46:35] <cmr> you need a feature flag to use it.
[15:46:43] <huhlig> oh. so all managed memory is kaput now?
[15:46:49] <cmr> via @, yes.
[15:46:54] <cmr> there are other types you can use.
[15:46:59] *** Parts: alex_ (alex@4A68ADFD.7FDDA9B5.B7830B68.IP) ()
[15:47:00] <huhlig> I just thought from the commits it was removed from the stdlib
[15:47:01] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[15:47:02] <cmr> Gc<T>, Rc<T>, RWArc<T> etc.
[15:47:09] <huhlig> ahh...
[15:47:19] <strcat> note that rust has never had a gc, and still doesn't
[15:47:28] <strcat> Gc<T> is a slow refcounting implementation ;p
[15:47:35] <strcat> Rc<T> is a fast one, with a weak ptr
[15:47:40] <huhlig> ...
[15:47:48] <eddyb> did &Trait ever coerce to &OtherTrait where trait Trait: OtherTrait?
[15:48:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[15:48:15] <tiffany> why is one reference counter faster than the other?
[15:48:19] <herrwolfe45> yeah alex_ you were right, I copied it. whoops
[15:48:40] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[15:48:42] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[15:48:52] <pnkfelix> eddyb: once, yes.  (Or maybe it was just @Trait coercing to @OtherTrait)
[15:48:55] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[15:49:09] <strcat> tiffany: because Gc<T> has horrific take glue stuff to do an implicit refcount on every implicit copy
[15:49:11] <pnkfelix> eddyb: I can probably dig up the issue report from when nmatsakis turned that off.
[15:49:11] <eddyb> pnkfelix: linked list of vtables :P?
[15:49:22] <eddyb> I want it back :/
[15:49:25] *** Joins: gverilla (gverilla@moz-34765BF9.tubit.tu-berlin.de)
[15:49:30] <strcat> it is the only case in rust where assign/passing/returning is not just a shallow copy
[15:49:30] <eddyb> though in a sane manner
[15:49:33] <strcat> since it also does the refcount
[15:49:37] <pnkfelix> eddyb: or wait, I might have misread your Q
[15:49:39] <tiffany> how does Rc avoid it?
[15:49:40] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:49:45] <pnkfelix> eddyb: (will check)
[15:50:05] <strcat> tiffany: normal type
[15:50:19] *** Quits: oberstet (quassel@moz-A038EF90.dynamic.mnet-online.de) (Client exited)
[15:50:24] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Ping timeout)
[15:50:28] *** Joins: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru)
[15:50:33] <eddyb> I want to kill take glue but I have to wait for the decision that will be taken later today
[15:50:46] <eddyb> that will most likely agree with my self/env PR
[15:50:47] <strcat> defined in the library, normal shallow copy on assigning/passing like any other type
[15:50:52] *** Joins: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:51:04] *** Joins: bakkdoor (bakkdoor@moz-48BDE18.osnanet.de)
[15:51:14] <strcat> tiffany: anyway Gc<T> holds onto memory far longer than it needs to since it leaves refs all down the call stack
[15:51:21] <strcat> and it refcounts excessively
[15:51:26] <tiffany> if there's no extra copy logic then how does it keep track of the reference count?
[15:51:29] <eddyb> Gc<T> = @T fwiw
[15:51:36] <eddyb> tiffany: it moves
[15:51:38] <strcat> tiffany: works like every other type in rust with a destructor
[15:51:38] *** Joins: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk)
[15:51:41] <strcat> it's a library type
[15:51:46] <strcat> Gc<T> is @T inside
[15:51:49] <eddyb> tiffany: you have to clone it to increase the refcount
[15:51:54] <tiffany> ah
[15:51:58] <eddyb> strcat: I'd like a short way to say "split ownership" that isn't "clone"
[15:52:06] <eddyb> clone has a bad aura to it
[15:52:11] <tiffany> so Gc decrements+increments the refcount every single time you shuffle it around
[15:52:18] <strcat> tiffany: yep
[15:52:20] <strcat> tiffany: like
[15:52:25] <strcat> let x = @5; foo(x)
[15:52:30] <strcat> passing to foo increases the refcount
[15:52:39] <strcat> it will not let go of it until you wind all the way back up and `x` goes out of scope
[15:52:44] <strcat> let x = Rc::new(5); foo(x)
[15:52:48] <tiffany> why do we have Gc if Rc is so much better?
[15:52:55] <cmr> placeholder.
[15:52:57] <strcat> tiffany: because in the future it will have a tracing gc
[15:52:59] <strcat> and it won't be useless
[15:53:03] <cmr> there's a PR implementing a pure-Rust GC!
[15:53:10] * cmr omits that it's incorrect
[15:53:15] <cmr> oops ;p
[15:53:23] <cmr> (https://github.com/mozilla/rust/pull/11399)
[15:53:23] * Ms2ger trouts cmr 
[15:53:28] *** Joins: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP)
[15:53:36] <eddyb> we need a trout slapping bot
[15:53:42] <strcat> tiffany: anyway Gc<T> warns you when you use it now
[15:53:46] <Ms2ger> We've already got an incorrect pure-Rust GC... @T
[15:53:47] <tiffany> I like those hybrid garbage collectors which use refcounts for heap stuff and tracing for stack stuff
[15:53:48] <strcat> via #[experimental = "blah blah"]
[15:53:56] <eddyb> strcat: omg does that work?
[15:53:58] <strcat> Ms2ger: well it's 'correct'
[15:54:04] <eddyb> I wanted it for something
[15:54:08] <strcat> Ms2ger: leaking is 'correct' ;p
[15:54:35] <pnkfelix> strcat: does Rc<T> runs the dtors for leaked cycles on task shutdown?
[15:54:38] <eddyb> also, can we *pleaaase* get rid of rust-buildbot?
[15:54:46] <cmr> rust-buildbot: dance
[15:54:47] <rust-buildbot> <(^.^<)
[15:54:47] <strcat> pnkfelix: no, but it provides a weak pointer to break cycles
[15:54:48] <rust-buildbot> <(^.^)>
[15:54:49] <rust-buildbot> (>^.^)>
[15:54:49] <rust-buildbot> (7^.^)7
[15:54:51] <rust-buildbot> (>^.^<)
[15:54:52] <pnkfelix> strcat: ah right
[15:54:57] <eddyb> cmr: does it do *anything* else?
[15:54:59] <strcat> pnkfelix: rust channels, etc. also let you make ref cycles ;p
[15:55:02] <cmr> eddyb: not anymore no.
[15:55:07] <cmr> but it's a useful service!
[15:55:08] <eddyb> cmr: name it dancebot and I'll be fine with it
[15:55:12] <eddyb> just let me tab to rusti pls
[15:55:18] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[15:56:01] <strcat> pnkfelix: imo the ideal thing to do for librustc itself is make a cycle detection tool for Rc, and run a debug build with it on an auto buildbot
[15:56:04] <pnkfelix> 2014Jan21 16:55 *** hdevalence JOIN
[15:56:06] <strcat> (and channels, etc.)
[15:56:09] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[15:56:24] <strcat> although it doesn't use tasks
[15:56:40] *** Quits: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk) (Ping timeout)
[15:56:48] <strcat> although librustc really shouldn't use as much shared ownership as it does...
[15:56:58] <herrwolfe45> I seem to remember there being a rustlang interactive (rusti) service online, can anyone point me to it?
[15:57:06] <eddyb> rusti: "say hi"
[15:57:07] -rusti- "say hi"
[15:57:20] <strcat> herrwolfe45: http://strcat.zapto.org:8000/
[15:57:34] <strcat> assuming my ip hasn't changed recently ;p
[15:57:38] <herrwolfe45> ah - you just send code to - thanks eddyb
[15:57:51] <arpd> I have a vector of type u8, that i've taken as a slice from a larger one, and I'd like to iterate over this slice (created with :`let mut title = contents.slice(0,20)`) and replace nullbytes with spaces, my code looks like this: http://pastie.org/8654138 . I'm taking the wrong approach I guess, what should I be doing here?
[15:57:51] <herrwolfe45> and strcat 
[15:57:54] <eddyb> strcat: nah, it works, but it's loading slow
[15:57:58] <pnkfelix> herrwolfe45: do note that rusti accepts private messages
[15:58:13] <strcat> there's also rustilite which doesn't include the wrapper
[15:58:18] <strcat> rustilite: fn main() {}
[15:58:26] <strcat> rustilite: fn main() { println!("foo") }
[15:58:26] -rustilite- foo
[15:58:35] <eddyb> arpd: use mut_iter
[15:58:50] <herrwolfe45> thanks pnkfelix 
[15:58:59] <arpd> thank you eddyb 
[15:59:01] <eddyb> strcat: oooh
[15:59:08] * Zr40 should hack together a commandline rust repl someday
[15:59:08] <strcat> eddyb: hm?
[15:59:18] <strcat> Zr40: I know how to do a good one ;p
[15:59:24] <strcat> it's kind of ridiculous though
[15:59:27] <strcat> and it will be *nix-only
[15:59:32] <Zr40> unix is fine
[15:59:38] <eddyb> strcat: mmap PROT_EXEC etc.?
[15:59:42] <strcat> Zr40: on every line, you fork(), if something goes wrong you throw it away
[15:59:45] <eddyb> a JIT would be cool
[15:59:46] *** Quits: vgeddes (vincent.ge@1F5AFC2C.61A199ED.447AD709.IP) (Ping timeout)
[15:59:47] <eddyb> strcat: hahaha
[15:59:51] <strcat> Zr40: can keep around N processes to rewind history
[15:59:57] <eddyb> I love it
[16:00:08] <strcat> anyway need to compile librustc with libnative
[16:00:11] <strcat> and make it fork safe
[16:00:12] <strcat> if it's not
[16:00:14] *** Joins: nate (pinkeh@moz-B8462C56.members.linode.com)
[16:00:21] <strcat> probably isn't fully
[16:00:55] *** Joins: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk)
[16:01:13] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:01:14] <eddyb> strcat: I wanted to use fork once to split an attempt to solve a system by assigning a variable a value, and use the old process as the resume point if it fails
[16:01:31] <arpd> Another trivial thing.. If i take a slice of that array using `n.slice(...)`, it is borrowed; How do I make a copy, rather than borrow?
[16:01:35] <eddyb> strcat: much better than mmap-ing the arena to disk - and you get CoW for free :D
[16:01:55] <eddyb> I never ended up doing it though. since it was my impossible mission anyway
[16:02:07] <strcat> eddyb: well, 'free' ;p
[16:02:09] <eddyb> arpd: .to_owned()
[16:02:16] <strcat> eddyb: fork does have to copy the page tables over
[16:02:25] <arpd> thanks again.
[16:02:26] *** Joins: herrwolf` (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[16:02:32] <eddyb> strcat: sure, but that's cheap compared to writing 1GB to disk
[16:02:34] <strcat> it's much faster to use CLONE_VM if all you're doing is forking in an inner loop ;p
[16:02:51] <eddyb> what does CLONE_VM do?
[16:02:55] *** Quits: ricepuddin (graham@moz-2EA67949.wlan.ic.ac.uk) (Ping timeout)
[16:03:07] <strcat> eddyb: look in 'man 2 clone'
[16:03:09] <strcat> eddyb: at all the flags
[16:03:14] *** Quits: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Ping timeout)
[16:03:16] <eddyb> meh. does it give me CoW?
[16:03:16] <strcat> eddyb: it's a wrapper around the linux clone syscall
[16:03:27] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[16:03:28] <strcat> eddyb: pthread_create, fork, vfork, etc. can all be implemented via clone ;p
[16:03:40] <strcat> eddyb: yes, you can get CoW
[16:03:50] <strcat> just mentioning that CoW comes at a cost if it's really an inner loop ;p
[16:03:58] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[16:04:04] <strcat> although the cost is really low if you haven't allocated a lot
[16:04:12] <johnsoft> so! have there been any efforts towards an IDE with intellisense/autocomplete yet?
[16:04:16] <eddyb> strcat: CLONE_VM shares memory, doesn't it?
[16:04:23] <eddyb> strcat: memory is what I want to preserve
[16:04:28] <strcat> eddyb: yes, threads use CLONE_VM
[16:04:29] <eddyb> a 1GB arena to be precise
[16:04:43] <strcat> eddyb: leaving out CLONE_VM is CoW
[16:04:52] <strcat> eddyb: just strace a C program calling fork and one calling pthread_create
[16:04:56] <strcat> you'll see they both call clone ;p
[16:05:08] <eddyb> I know that because you've told me already :)
[16:05:17] <strcat> yeah but you can see the flags
[16:05:28] <strcat> anyway I find it neat
[16:05:36] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[16:05:37] <strcat> eddyb: rusti is built on this stuff - CLONE_NEWPID, etc. for new namespaces
[16:05:42] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[16:05:49] *** Joins: jdm (jdm@moz-BDD802ED.hfc.comcastbusiness.net)
[16:05:49] *** ChanServ sets mode: +o jdm
[16:05:58] <eddyb> the point would be to restrict the memory usage for each attempt to ~10MB max of extra memory
[16:05:58] <strcat> it's neat.
[16:06:03] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[16:06:07] <eddyb> instead of writing 1GB dumps to disk
[16:06:22] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[16:06:45] *** Quits: bakkdoor (bakkdoor@moz-48BDE18.osnanet.de) (Quit: Leaving...)
[16:07:02] <eddyb> hang on, did I ever implement something like the in-place AST folding I was thinking about (what I had was a refcounted DAG) I don't remember
[16:07:22] <eddyb> strcat: don't tempt me to go back to that impossible quest, however pricey bitcoins are right now :P
[16:07:31] <strcat> hm?
[16:07:42] <eddyb> that's all I can say without killing you
[16:07:48] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[16:08:12] <strcat> eddyb: scrypt-based ones are where the money is at
[16:08:23] <strcat> because you can't really use GPUs to mine them
[16:08:26] *** Joins: erickt (Adium@moz-A9F9654D.keplers.com)
[16:08:51] *** Quits: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru) (Quit: Kxepal)
[16:09:03] *** Joins: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net)
[16:09:05] *** Joins: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru)
[16:09:20] *** Joins: bakkdoor (bakkdoor@moz-48BDE18.osnanet.de)
[16:09:50] <eddyb> strcat: sooo, what do you say about my format_ng? was it worth the couple days spent on it? (considering that it needs optimizing twice to get the proper code)
[16:10:49] <strcat> as long as you had fun
[16:11:38] <eddyb> I figured out how to do CPS in Rust despite having never touched the concept before
[16:11:58] *** Quits: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net) (Quit: Leaving.)
[16:11:59] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[16:12:01] <eddyb> strcat: and I watched Sherlock season 3 in the meanwhile, if that's what you're talking about :P
[16:12:49] <erickt> season 3 is out?!
[16:13:43] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[16:13:52] <eddyb> erickt: started and finished while I wasn't looking
[16:13:56] <eddyb> ./x*/stage0/bin/rustc --test bench.rs --opt-level=3 --emit-llvm -S --passes inline -Z lto; ./x*/llvm/R*/bin/opt -S -O3 bench.ll > bench_opt.ll
[16:14:27] <eddyb> if I remove -Z lto, I have to run opt -O3 -inline and then opt -O3 again
[16:14:37] *** Quits: bmurphy1976 (bmurphy197@moz-C00AB6D8.hsd1.il.comcast.net) (Quit: bmurphy1976)
[16:15:18] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:15:24] <eddyb> I don't know what to tell the LLVM guys. since Many gets devirtualized and inlined with just rustc --opt-level=3, so trait virtual calls isn't enough to trigger the issue
[16:15:36] <eddyb> maybe a closure call inside a trait virtual call?
[16:16:50] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[16:18:34] *** Joins: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP)
[16:19:08] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[16:19:18] <erickt> nmatsakis: ping
[16:19:45] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:20:09] <eddyb> strcat: maybe now I need to teach LLVM to optimize stringed memcpys from constants with a single memcpy from a concatenated constant
[16:20:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:20:42] <eddyb> strcat: and malloc + memcpy from constant + pass non-owned pointer to data => pass pointer to constant
[16:21:02] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[16:21:54] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[16:21:57] <eddyb> strcat: but then we have to teach LLVM about ownage (no pwn intended)
[16:22:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[16:22:07] <eddyb> (oh, right, the word is "ownership")
[16:23:54] <o11c> eddyb: yeah, LLVM generally has to be run at least twice in order to fully optimize
[16:24:10] *** Joins: marianoguerra (marianogue@moz-C6801CB6.dip0.t-ipconnect.de)
[16:24:32] <eddyb> o11c: we don't allow an easy way of doing that through rustc :/
[16:24:42] <eddyb> -Z run-llvm-again maybe?
[16:25:21] <pnkfelix> eddyb: or maybe add higher opt-levels ?
[16:25:43] <johnsoft> does llvm converge on something if you just run it in a loop?
[16:25:46] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[16:25:51] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Computer has gone to sleep.)
[16:25:51] <pnkfelix> eddyb: powers of a 2 indicate number of iterations at opt-level 2
[16:26:00] <pnkfelix> eddyb: powers of 3 likewise for opt-level 3.  :)
[16:26:04] <eddyb> heh
[16:26:19] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Client exited)
[16:26:25] <eddyb> though odd/even is more practical
[16:26:40] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[16:26:50] <pnkfelix> eddyb: if you are only going to repeat once, yes
[16:27:15] <pnkfelix> eddyb: but I'll trust you know better than high whether iterating more than tiice is ever profitable
[16:27:15] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Connection reset by peer)
[16:27:22] <pnkfelix> sed -e s/high/i/
[16:27:49] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[16:27:56] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[16:28:55] <eddyb> pnkfelix: as in, 4/5 is 2x2/2x3, 6/7 is 3x2/3x3, etc.
[16:29:02] <adridu59> rust-buildbot: dance
[16:29:04] <rust-buildbot> <(^.^<)
[16:29:04] *** Joins: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP)
[16:29:04] <rust-buildbot> <(^.^)>
[16:29:05] <rust-buildbot> (>^.^)>
[16:29:06] <rust-buildbot> (7^.^)7
[16:29:07] <rust-buildbot> (>^.^<)
[16:29:23] <adridu59> what is that thing for?
[16:29:29] <pnkfelix> eddyb: ah, true, I guess there isn't any opt-level besides {2,3} that we need to consider
[16:30:02] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:30:07] <o11c> johnsoft: I don't think LLVM can be proven to converge; you just have to run it 2 or 3 times and pray
[16:30:09] <adridu59> I mean not the dance, the bot
[16:30:12] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[16:30:52] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: leaving)
[16:30:57] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[16:31:28] <arpd> is there any way to cast a slice of u8 to say, uint?
[16:31:30] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:31:48] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[16:32:07] <strcat> arpd: there isn't a way exposed to do it in safe code
[16:32:23] <ChrisMorgan> adridu59: it should have been moved to #rust-internals
[16:33:19] <johnsoft> arpd- i think you'd need to write your own unsafe function
[16:33:23] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:33:39] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[16:34:18] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[16:34:36] <o11c> arpd: are you going to check the alignment and fail!() if not?
[16:34:38] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[16:34:47] <johnsoft> use transmute, and then vec.set_len(vec.len() / (sizeof<uint>() / 8)
[16:34:53] <johnsoft> or somesuch
[16:35:12] <arpd> thank you, the only reason I ask is that I'd like to initialise a struct that contains fields of types (~str, uint, u8) from a vector of u8
[16:35:16] <strcat> johnsoft: needs to be on the right alignment if it's not x86
[16:35:25] *** Joins: derek_c (derek@moz-78CFE167.cit.cornell.edu)
[16:35:26] *** Quits: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP) (Quit: victorporof)
[16:35:27] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[16:35:36] <arpd> but if there's no rustic way to do that cleanly and safely i'll just massage it a bit first
[16:35:59] <strcat> arpd: what's the ~str for?
[16:36:03] <johnsoft> oh, true, i don't know rust's memory internals stuff
[16:36:13] <arpd> the name of a sample
[16:36:23] <strcat> johnsoft: structs are the same as C structs
[16:36:45] <johnsoft> can you assume allocations are 8-byte-alignd on x64?
[16:36:59] <arpd> strcat: the name of a sample
[16:37:07] <eddyb> but you can't assume that &[u8] is 8-aligned
[16:37:12] <adridu59> ChrisMorgan: what is it for?
[16:37:16] <eddyb> it might be ~[u8] .slice_from(1)
[16:37:22] <strcat> johnsoft: no, you can't assume that
[16:37:30] <strcat> you can assume that malloc/free return aligned memory
[16:37:38] <strcat> but not rust vectors, etc.
[16:37:39] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Computer has gone to sleep.)
[16:37:40] <ChrisMorgan> adridu59: it provides access to the buildbots. Ask it!
[16:37:52] <strcat> they are not defined as being based on malloc/free and will no doubt do something smarter in the (far) future
[16:37:52] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[16:37:57] <johnsoft> if you're using set_len you'd have to own the vector i think... so i'm totally wrong for borrowed pointers
[16:38:24] *** Joins: Florob (Florob@moz-39532932.de)
[16:39:09] <o11c> arpd: in that case, don't you want to cast the (!str, uint, u8) to &[u8] instead?
[16:39:33] <o11c> johnsoft: IIRC amd64 guarantees 16-byte alignment
[16:39:39] <eddyb> ~str is a pointer, transmuting will blow up
[16:39:45] <strcat> o11c: rust's vectors don't
[16:39:49] <strcat> that's just what you get from malloc
[16:40:03] <o11c> freaking layers of opacity :(
[16:40:18] <strcat> malloc returns memory aligned for all the base C types
[16:40:28] <strcat> + the platform might give a better guarantee
[16:40:36] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:40:43] <strcat> but vectors are *not* defined as using malloc
[16:40:48] <strcat> and I guarantee you they won't in the future
[16:41:02] <strcat> malloc/realloc/free is a really crippled interface to an allocator
[16:41:02] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: leaving)
[16:41:17] <strcat> realloc/free could take an old_size parameter to find the allocation faster
[16:41:27] <strcat> malloc/realloc could return the real capacity of the allocation
[16:41:52] <strcat> there's calloc, but not an equivalent for realloc for zeroed new space
[16:41:54] *** Quits: new_one (new_one@A5C477B8.E8B7FFCF.B3C0173E.IP) (Client exited)
[16:42:01] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[16:42:18] *** Joins: eibwen (kvirc@moz-EB6024B9.dip0.t-ipconnect.de)
[16:42:21] <eddyb> strcat: is *one* indirect access considered costly, for the capacity?
[16:42:23] <arpd> o11c: sorry, I don't understand.
[16:42:39] <eddyb> strcat: and/or is the capacity measured in elements, not bytes?
[16:42:41] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[16:42:42] <strcat> eddyb: maybe, push does len == capacity every time
[16:42:49] <strcat> makes it harder to optimize
[16:42:49] <eddyb> oh, I see
[16:43:01] <strcat> eddyb: capacity/len are in elements
[16:43:02] <arpd> o11c: I want to have the data in the struct as a referrable type, so I don't have to (for example) cast to string whenever I'd like to reference the string section
[16:43:19] <arpd> referrable.. ignore that word, try final instead
[16:43:20] <eddyb> strcat: the latter is actually more troublesome than the indirection, I'd think
[16:43:24] <strcat> eddyb: it only needs it in bytes to reallocate, which is an exceptional path
[16:43:41] <strcat> eddyb: yeah because if it's in bytes you need to divide (well, shift)
[16:43:52] <eddyb> shift if you're lucky
[16:44:10] *** Joins: dangets (dangets@moz-AC702758.bois.qwest.net)
[16:44:10] <strcat> the size is a known constant so it can likely do better in most cases
[16:44:11] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: leaving)
[16:44:20] <strcat> not all
[16:44:21] <strcat> ;p
[16:44:22] <eddyb> still a multiplication
[16:44:27] <strcat> sometimes
[16:44:36] <eddyb> strcat: yeah, no, nevermind my crazy optimization attempt
[16:44:38] <strcat> multiplication is immensely faster than division anyway
[16:44:48] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[16:44:51] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[16:44:55] <eddyb> I still have to try that weak static trait object idea
[16:44:56] <strcat> eddyb: mul/add/sub are fast, division is slow, some architectures don't even have division
[16:45:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:45:18] <eddyb> strcat: I know, ARMv5 and lower, no?
[16:45:25] <eddyb> or ARMv4. I'm not sure
[16:45:30] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[16:45:46] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[16:45:49] <eddyb> it doesn't help that ARM5 is ARMv3 or something ridiculous like that
[16:45:59] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[16:46:01] <strcat> eddyb: I think division came in ARM7 or something
[16:46:07] <eddyb> o_O
[16:46:08] <strcat> ARMv7 *
[16:46:23] <eddyb> but ARMv7 is the latest 32-bit only version
[16:46:30] <eddyb> s/latest/last
[16:46:35] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[16:46:38] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[16:46:50] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:47:04] <strcat> eddyb: oh and it's not always there
[16:47:16] <eddyb> strcat: like Neon?
[16:47:24] <strcat> it's in  ARMv7-R (real-time) and ARMv7-M (embedded)
[16:47:35] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[16:47:36] <eddyb> but not in ARMv7-?
[16:47:39] <strcat> not ARMv7-A
[16:47:49] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[16:47:51] <eddyb> A for... I can't remember :(
[16:48:02] <eddyb> applications? no that's Cortex A
[16:48:08] <strcat> eddyb: https://en.wikipedia.org/wiki/ARM_architecture#Cores
[16:48:13] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[16:48:26] <strcat> so yeah ARMv7-A looks like what most phones/tablets have
[16:48:34] <strcat> no division instruction ;p
[16:48:38] <eddyb> wait, what?
[16:49:08] <eddyb> so I was right, but... the one place where you'd accidentally abuse division - it's missing?
[16:49:18] <eddyb> I expected -M to be missing features
[16:49:24] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:49:26] * strcat shrugs
[16:49:37] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[16:49:53] <eddyb> strcat: they do have NEON
[16:50:05] *** Quits: gverilla (gverilla@moz-34765BF9.tubit.tu-berlin.de) (Ping timeout)
[16:50:10] <eddyb> and VFPv4. maybe somewhere in there you can do integer division too
[16:50:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:50:26] *** Quits: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:50:33] *** abinader is now known as abinader_brb
[16:50:56] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[16:51:37] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[16:52:01] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[16:53:01] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: leaving)
[16:53:25] *** Joins: lpy (lpy@186AB984.19500BE2.65042015.IP)
[16:54:03] *** Joins: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP)
[16:54:03] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:54:14] *** Joins: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com)
[16:55:04] <eddyb> strcat: now I can't get LLVM to fail inlining a devirtualized function :/
[16:55:29] *** Joins: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca)
[16:55:48] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[16:55:53] *** Quits: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca) (Quit: Taking a nap.)
[16:57:02] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:57:07] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:57:26] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[16:58:05] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[16:58:06] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[16:58:09] *** Quits: judofyr (judofyr@192D24C7.B738D75A.E7F60444.IP) (Client exited)
[16:58:12] *** Quits: erickt (Adium@moz-A9F9654D.keplers.com) (Quit: Leaving.)
[16:58:13] *** Quits: dangets (dangets@moz-AC702758.bois.qwest.net) (Ping timeout)
[16:58:23] <derek_c> what's the easiest way to take the * of an object?
[16:59:05] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[16:59:11] *** Lovot is now known as MyIRCNick
[16:59:18] *** MyIRCNick is now known as Lovot
[17:00:28] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:00:28] *** ChanServ sets mode: +ao dherman dherman
[17:01:03] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: leaving)
[17:01:08] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[17:01:16] *** Quits: dave1629 (dave@DA923962.6E684168.CE55B2D2.IP) (Quit: dave1629)
[17:01:27] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:01:42] <eddyb> strcat: CNR :(
[17:01:50] <strcat> CNR?
[17:01:54] <strcat> derek_c: &x
[17:02:01] <strcat> and it will coerce to a raw ptr
[17:02:07] *** abinader_brb is now known as abinader
[17:02:11] <eddyb> I even artificially inflated functions with this magic side effect #[inline(always)]fn se(){if ::std::rand::random() {fail!("boo{}", "bar");}}
[17:02:11] *** Quits: lpy (lpy@186AB984.19500BE2.65042015.IP) (Quit: Leaving...)
[17:02:22] <eddyb> strcat: could not reproduce
[17:02:34] <derek_c> strcat: I don't think it coerces
[17:02:36] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[17:02:41] <eddyb> I do something silly with slices though
[17:02:42] <derek_c> mismatched types: expected `*uint` but found `&uint` (expected *-ptr but found &-ptr)
[17:02:42] <derek_c> barrier.rs:29             self.count = &(*self.count + 1);
[17:03:04] <strcat> rusti: let i = 5; let p: *int = &i; p
[17:03:05] -rusti- (0x7f8afb4ded20 as *())
[17:03:56] <strcat> derek_c: you can't do it with a temporary like that
[17:04:03] <strcat> that's not going to work even if it compiled ;p
[17:04:24] <eddyb> great, now I've went like a thousand time past any imaginable inline threshold
[17:04:29] <eddyb> *times
[17:04:33] <derek_c> strcat: ah, of course!
[17:04:36] <derek_c> my bad :)
[17:04:51] <strcat> not exactly sure why it doesn't compile though
[17:06:57] <eddyb> strcat: hmm, any idea how I can track down which pass doesn't run inline again?
[17:07:07] * strcat shrugs
[17:07:08] <eddyb> and/or reduce my testcase
[17:07:45] <eddyb> fake side effects don't reproduce the same LLVM behavior
[17:08:21] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[17:08:41] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[17:09:02] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[17:09:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:09:46] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[17:09:57] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:11:02] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[17:11:42] <acrichto> igork: heh, that's just a staging area where I show off changes I've made to rustdoc, not official or maintained at all
[17:12:13] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[17:13:43] *** Joins: lpy (lpy@186AB984.19500BE2.65042015.IP)
[17:13:45] *** Quits: lpy (lpy@186AB984.19500BE2.65042015.IP) (Client exited)
[17:14:16] *** Parts: herrwolf` (user@CACBD77F.4EBBBE62.C082B7DC.IP) (ERC Version 5.3 (IRC client for Emacs))
[17:15:22] *** Quits: derek_c (derek@moz-78CFE167.cit.cornell.edu) (Ping timeout)
[17:15:31] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:17:34] *** Quits: moostik (Icedove@moz-1FF02BE5.w92-151.abo.wanadoo.fr) (Ping timeout)
[17:17:57] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[17:18:26] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[17:18:42] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[17:19:08] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:19:13] *** Joins: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca)
[17:19:29] *** Quits: tsurai (tsurai@D0859826.B8520FC9.3B82F87E.IP) (Quit: Lost terminal)
[17:19:42] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:19:59] *** Quits: gkostyanikov (gkostyanik@1F32D0AC.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:20:13] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[17:21:23] *** Quits: heftig (heftig@A374C98A.408BAEBF.C44933E.IP) (Quit: Quitting)
[17:21:37] *** Quits: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Client exited)
[17:23:36] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[17:24:08] *** Quits: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr) (Quit: mankyKitty)
[17:26:54] *** Quits: jdm (jdm@moz-BDD802ED.hfc.comcastbusiness.net) (Quit: Lost terminal)
[17:27:09] *** Joins: dangets (dangets@moz-CCF3D56C.bois.qwest.net)
[17:27:14] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:27:52] *** Quits: benjamin__ (benjamin@moz-C4D66C34.dip0.t-ipconnect.de) (Ping timeout)
[17:28:09] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[17:28:37] <dangets> would someone mind helping me with a vec/str toy problem?
[17:28:53] *** Joins: mye (mye@moz-AC9229D6.dip0.t-ipconnect.de)
[17:30:00] <dangets> code is here: https://gist.github.com/dangets/8544326
[17:30:18] <dangets> basically I would like to use the CharRange iterator on a u8 vector
[17:30:29] *** Quits: yuriks (yuriks@8E8458DA.1755AC6C.F6EE4B40.IP) (Connection reset by peer)
[17:30:44] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:30:57] *** Joins: Cevn (sameer@moz-438301B1.v4.wm.edu)
[17:31:20] *** Parts: nical (Nicolas@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[17:31:43] <Ms2ger> Not sure how that'd work
[17:32:21] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:32:56] <dangets> I thought that a str was essentially a [u8]
[17:33:05] <dangets> except valid utf8
[17:33:48] <dangets> I would like to read a buffer of u8 a valid utf8 char at a time
[17:34:10] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[17:34:30] * o11c is increasingly of the opinion that transparently passing invalid utf8 is the best way
[17:34:40] <dangets> I had something basically working using Buffer::read_char, but I wanted to play around more with raw buffers and slicing
[17:35:44] *** Joins: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net)
[17:35:50] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:35:50] *** ChanServ sets mode: +ao dherman dherman
[17:35:59] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Input/output error)
[17:36:20] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[17:37:27] *** Quits: bmats (bmats@moz-C7EBCDDD.hsd1.or.comcast.net) (Ping timeout)
[17:38:00] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Ping timeout)
[17:39:02] <Ms2ger> o11c, you have the right to be wrong :)
[17:39:52] <ChrisMorgan> How do I forcibly turn a i32 into a char?
[17:40:18] <eddyb> ChrisMorgan: transmuting?
[17:40:21] <strcat> ChrisMorgan: why forcibly/
[17:40:26] <strcat> ChrisMorgan: use char::from_u32 ;p
[17:40:29] <eddyb> (if you mean "without checking it")
[17:41:13] * ChrisMorgan doesn't care about checking it, just can't use `as char` because of UTF-16 and is too tired to think clearly about the other options :-(
[17:41:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:41:45] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:41:53] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:42:27] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:42:27] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:42:56] * ChrisMorgan settles for char::from_u32(v as u32)
[17:43:03] <ChrisMorgan> (Thanks.)
[17:43:10] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:43:55] *** Quits: Cevn (sameer@moz-438301B1.v4.wm.edu) (Ping timeout)
[17:44:04] <strcat> ChrisMorgan: it stops at 21-bit + there's the invalid surrogate range
[17:44:15] * ChrisMorgan hates the surrogates
[17:44:42] *** Joins: Cevn (sameer@moz-438301B1.v4.wm.edu)
[17:45:05] <ChrisMorgan> Truth to tell, I had been writing `x as u8 as char`, being fairly confident that all the input I'd get would fit in u8, but that was grating on my conscience :P
[17:45:47] *** Joins: moostik (Icedove@moz-2E0A4DA6.minet.net)
[17:45:58] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:47:45] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[17:47:50] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[17:49:47] <sfackler> wycats: It's impossible right now, but it's something that may be worth supporting. I haven't done any benchmarking yet, but my gut feeling is that the current implementation is roughly as efficient as a normal hashtable
[17:50:25] *** Quits: moostik (Icedove@moz-2E0A4DA6.minet.net) (Ping timeout)
[17:50:59] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[17:51:13] <johnsoft> can someone point me to how to get started with task local storage?
[17:51:55] *** Joins: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[17:54:31] *** Joins: moostik (Icedove@moz-2E0A4DA6.minet.net)
[17:54:50] *** Quits: squiddy (squiddy@moz-953631F8.adsl.alicedsl.de) (Ping timeout)
[17:54:51] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:55:34] <sfackler> wycats: speed improvements will probably come from switching from SipHash to a faster hashing algorithm or switching entirely to something more along the lines of gperf which doesn't need to hash the entire string
[17:55:54] *** Joins: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se)
[17:56:31] <strcat> the hash table is more efficient than C++'s unordered_map
[17:56:34] <strcat> but SipHash is slow
[17:57:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:57:03] *** ChanServ sets mode: +ao brson brson
[17:57:53] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[17:58:10] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[17:59:11] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[17:59:19] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Quit: Leaving...)
[18:00:35] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[18:01:07] <eddyb> strcat: is that really so? what's C++11 using then?
[18:01:25] <strcat> eddyb: I mean 'slower than C++ when you make C++ use SipHash'
[18:01:28] <strcat> er
[18:01:30] <strcat> faster than*
[18:01:32] *** Joins: Sentor (kvirc@893FFB9E.E6B1F028.DBB01AA2.IP)
[18:01:32] * strcat sighs
[18:01:33] <eddyb> oh, heh
[18:01:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:01:44] <strcat> eddyb: C++ takes the hash as a default template parameter
[18:01:52] <strcat> you know that I guess
[18:01:54] <eddyb> yeah, we'll be able to do that soon
[18:02:06] <eddyb> (or I hope so)
[18:03:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:03:17] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:04:00] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:04:04] <uberj> why do we prefix oob_ip addresses with 'ssh' in Inventory?
[18:04:51] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:04:56] <Ms2ger> uberj, is this the channel you meant?
[18:05:08] <uberj> no
[18:05:11] <uberj> lol
[18:05:13] <uberj> sorry
[18:05:33] <Ms2ger> Now I'm wondering why we do too :)
[18:05:50] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:05:50] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:05:55] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:06:27] <uberj> it is a terrible antipattern
[18:08:28] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[18:09:07] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[18:09:07] *** Joins: Kruppe (user@moz-B684EC26.net.uwaterloo.ca)
[18:09:22] *** Joins: judofyr (judofyr@moz-D831035E.uio.no)
[18:10:10] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Quit: pilf)
[18:10:14] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[18:11:03] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[18:11:03] *** Quits: judofyr (judofyr@moz-D831035E.uio.no) (Ping timeout)
[18:12:01] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[18:14:10] *** Quits: FreeFull (freefull@moz-4F046D30.as13285.net) (Ping timeout)
[18:14:25] *** Joins: claudiu (claudiu@moz-6F0C4397.thefacebook.com)
[18:15:17] *** Joins: FreeFull (freefull@moz-14342BB2.as13285.net)
[18:15:20] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[18:15:38] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[18:16:41] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[18:17:33] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[18:19:32] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[18:19:45] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[18:20:41] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Computer has gone to sleep.)
[18:20:45] *** Quits: mye (mye@moz-AC9229D6.dip0.t-ipconnect.de) (Quit: mye)
[18:21:12] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[18:22:12] *** Joins: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:22:12] *** ChanServ sets mode: +o jdm
[18:23:41] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[18:26:10] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[18:27:01] *** Joins: ptc (Adium@moz-70F9251D.thefacebook.com)
[18:27:13] *** Parts: ptc (Adium@moz-70F9251D.thefacebook.com) ()
[18:27:15] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:28:36] *** Quits: moostik (Icedove@moz-2E0A4DA6.minet.net) (Ping timeout)
[18:29:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:29:53] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Client exited)
[18:30:11] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[18:30:13] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[18:31:43] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:32:16] *** Joins: moostik (Icedove@moz-2E0A4DA6.minet.net)
[18:32:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:32:41] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:33:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:34:49] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:39:01] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[18:39:15] <cmr> sshoobip!
[18:39:26] <cmr> sounds like an ancient exclamation.
[18:39:38] <cmr> perhaps of surprise, or amazement.
[18:41:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:41:14] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[18:41:55] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[18:42:52] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[18:43:13] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Quit: Leaving)
[18:43:14] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[18:43:23] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[18:43:31] *** Joins: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:44:10] <Jemaclus> in C I can do something like: printf("%d%d", 0, 1); and it'll print "01"... in Rust, it seems like I can only do one arg, like println!("{}", foo)... is there another way to do it?
[18:44:22] <cmr> {}{}, 0, 1
[18:44:26] <sfackler> Jemaclus: println!("{}{}", 0, 1)
[18:44:34] <cmr> docs: http://static.rust-lang.org/doc/master/std/fmt/index.html
[18:45:15] <Jemaclus> thanks
[18:45:36] *** Quits: okard (okard@moz-8AA7353B.dip0.t-ipconnect.de) (Ping timeout)
[18:45:51] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[18:46:04] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[18:46:45] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Client exited)
[18:46:49] <Jemaclus> hmm, that does work. Thought it threw an error last time I tried. Guess I did something dumb.. :)
[18:47:05] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:47:22] *** Joins: nuts (nuts@moz-66D8F032.w90-40.abo.wanadoo.fr)
[18:48:44] *** Quits: dangets (dangets@moz-CCF3D56C.bois.qwest.net) (Ping timeout)
[18:49:52] <bytbox> I just ran across the phenomenon whereby (A is a trait) ~A implies ~A:Send. I found the ~A: trick, but I don't understand the rationale
[18:50:41] <dmac> It looks like SharedPorts were removed a few months ago, was that a permanent removal? If so, is there now a more idiomatic way to have a multi-consumer, single-producer pattern between tasks?
[18:50:59] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[18:51:30] *** Quits: fabiand (fabiand@moz-62F6AD8C.adsl.alicedsl.de) (Quit: Verlassend)
[18:51:41] *** Quits: Cevn (sameer@moz-438301B1.v4.wm.edu) (Ping timeout)
[18:53:12] <eddyb> bytbox: I guess it's useful when working with tasks, but I don't know exactly why either. maybe strcat or acrichto know?
[18:53:22] *** zz_kimundi is now known as kimundi
[18:53:37] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[18:53:52] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[18:54:12] <nuts> Hi, in rust-0.10 (master version) : error!("something {:s}", string); doesn't work anymore ?
[18:54:35] <bytbox> eddyb: I figured that it was just a "sensible default", but the need to explicitly exclude Send in this one case struck me as awkward
[18:54:35] <eddyb> nuts: does error!("foo") work at all?
[18:54:55] <eddyb> nuts: it might have been feature-gated, I'm not sure
[18:55:09] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[18:55:09] <nuts> yes error!("foo") works
[18:55:24] <eddyb> oh weird
[18:55:28] <nuts> I've this error : "error: failed to find an implementation of trait std::str::Str for extra::base64::FromBase64Err"
[18:55:33] <eddyb> nuts: hehehe
[18:55:37] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:55:42] <eddyb> nuts: string is not a string
[18:56:08] <eddyb> nuts: try error!("something {}", err);
[18:56:35] <nuts> I've this one now
[18:56:36] <nuts> rror: failed to find an implementation of trait std::fmt::Default for extra::base64::FromBase64Error
[18:56:40] <eddyb> (keep in mind that compile errors are your friend)
[18:56:48] <eddyb> nuts: mkay, let me see what FromBase64Err provides
[18:56:53] <Jemaclus> doesn't look like Char has a to_uppercase() method.. :(
[18:57:09] *** Joins: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net)
[18:57:12] <eddyb> Jemaclus: proper to_lower/to_upper requires Unicode tables
[18:57:37] <eddyb> nuts: you'll have to call .to_str() on the error to get a string
[18:57:51] <eddyb> it doesn't look like it implements any formatting http://static.rust-lang.org/doc/master/extra/base64/enum.FromBase64Error.html
[18:57:56] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[18:58:05] <Jemaclus> eddyb: does Rust not have that (yet)?
[18:58:16] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[18:58:23] <nuts> eddyb: right my bad
[18:58:33] <nuts> I did'nt see this method
[18:58:35] <cmr> eddyb: it's on Ascii
[18:58:37] <cmr> erm
[18:58:38] <Jemaclus> I was looking at the Ascii class, and it has it... I suppose it's dumb to convert to Ascii and then back to str?
[18:58:40] <eddyb> Jemaclus: it's a library issue. but AFAIK, the standard library doesn't have exhaustive unicode information
[18:58:40] <cmr> Jemaclus: it's on Ascii
[18:58:42] <nuts> thanks :)
[18:58:43] <cmr> struct, not ascii.
[18:58:47] <cmr> *class
[18:58:53] <Jemaclus> struct
[18:58:54] <Jemaclus> right
[18:58:58] <nuts> thanks eddyb, next time, I will look better the documentation
[18:59:00] <cmr> Jemaclus: we don't support proper unicose casing yet, no.
[18:59:11] <cmr> We have to_ascii_upper.
[18:59:25] <eddyb> cmr: I don't like to tell people about the ASCII one. I guess I should, with a disclaimer
[18:59:25] <cmr> which ignores non-ascii characters.
[18:59:37] *** Joins: Cevn (sameer@moz-438301B1.v4.wm.edu)
[18:59:55] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[18:59:58] <Jemaclus> right
[19:00:03] <Jemaclus> ok, thanks for the tips.
[19:00:14] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[19:00:27] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:01:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:01:53] *** Joins: okard (okard@moz-CE5CBE1A.dip0.t-ipconnect.de)
[19:02:08] <brson> https://github.com/mozilla/rust/wiki/Meeting-weekly-2014-01-21
[19:02:14] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[19:02:22] *** Joins: squiddy (squiddy@moz-953631F8.adsl.alicedsl.de)
[19:02:35] <eddyb> brson: over already?
[19:02:41] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[19:02:45] <SiegeLord> Why don't you guys record the meetings and transcript them post-hoc?
[19:02:59] <SiegeLord> (no need to make the recordings themselves public)
[19:03:11] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[19:03:36] <brson> eddyb: yep
[19:03:58] <eddyb> brson: but... I don't see default type params
[19:04:32] <brson> eddyb: we decided to postpone it because Niko is out
[19:04:35] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[19:04:48] <eddyb> brson: oh :(
[19:04:49] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:04:59] <eddyb> *sigh*
[19:05:05] *** Joins: akp (akp@moz-23A590A0.hfc.comcastbusiness.net)
[19:05:06] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Client exited)
[19:05:52] *** Quits: c-a (c-a@moz-8D7A06D6.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[19:06:03] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Quit: Computer has gone to sleep.)
[19:07:37] <pcwalton> acrichto: rewrote mutexarc
[19:07:40] <pcwalton> building/testing now
[19:08:40] <akp> is there an ubuntu package for Rust?
[19:08:44] <kimundi> Hm, those meeting notes are a bit unclear - is eddyb's env argument change now accepted or does it still need talking over?
[19:08:53] <kimundi> akp: Indeed there is, nightlyies even!
[19:09:02] <kimundi> (Which we recommend to use)
[19:09:22] <kimundi> akp: https://launchpad.net/~hansjorg/+archive/rust
[19:09:28] <akp> kimundi: thanks!
[19:09:48] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[19:10:20] <pnkfelix> kimundi: i think the team mostly agreed with the idea of the change but acrichto had some concerns that he wanted to discuss with eddyb
[19:10:26] <akp> is there a soap library for rust?
[19:10:59] <pnkfelix> kimundi: sorry about the poor notes, I was having difficulty as secretary
[19:12:01] <pnkfelix> kimundi: I think acrichto's concern was largely centered around new restriction that one could not coerece fcn ptrs to closures, only named functions.
[19:12:34] <acrichto> we decided it was fine to go through though
[19:12:53] <kimundi> Ah, okay. :)
[19:13:10] <pnkfelix> acrichto: ah well that explains the ambiguity in the notes; I wasn't sure exactly what the scope of the topics you wanted to still discuss with eddyb
[19:13:27] <acrichto> oh that's right, I did have some
[19:13:45] <Jemaclus> I'm going through Rosetta Code and doing a bunch of those. I figure it's a good way to learn. I'm sure my solutions aren't optimal though.
[19:14:41] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[19:15:45] * kimundi is excited about how much big stuff got and gets done recently :D
[19:16:27] <SiegeLord> Jemaclus: Having them compile would already make them superior to some other Rust Rosetta Code entries ;)
[19:16:59] <Jemaclus> haha. 
[19:17:02] <Jemaclus> well, so far so good, I guess?
[19:17:09] <Jemaclus> I've submitted a few...
[19:17:36] <ChrisMorgan> Nooooooo… ncurses-rs doesn't support the mouse ☹
[19:18:44] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[19:18:48] *** Joins: gwty (gwtypc@F459DCF8.2CEEE9CF.BD94A9D5.IP)
[19:20:50] <ChrisMorgan> Fortunately it looks like it'd be easy to add, but unfortunately I don't have time to *do* that.
[19:21:09] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[19:21:52] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[19:22:03] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[19:23:43] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[19:25:52] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:26:41] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[19:26:42] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[19:27:44] *** Joins: derek_c (derek@moz-A43430DA.cit.cornell.edu)
[19:28:08] <derek_c> why don't we make it so that `do` accepts closures as well?
[19:28:25] <strcat> it used to, was removed
[19:28:49] <ChrisMorgan> derek_c: `do` is being removed (I started it but have been too busy elsewhere just recently)
[19:29:27] <Ms2ger> Is it?
[19:30:51] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[19:33:05] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[19:33:31] <derek_c> hmm... would be sad to see it get removed
[19:33:57] <derek_c> I'd rather have it remain and work with both procedures and closures
[19:34:29] <ChrisMorgan> derek_c: https://github.com/mozilla/rust/issues/10815
[19:34:39] <derek_c> ChrisMorgan: yeah I was reading it
[19:35:24] <derek_c> IMO spawn(proc() { }); is actually pretty bad for a language that optimizes for lightweight concurrency
[19:35:42] <derek_c> also, having `do` makes it easier to see where concurrency happens
[19:36:01] <o11c> but do just works for any closure, not just concurrent ones
[19:36:05] <derek_c> right
[19:36:19] <strcat> derek_c: it's not any lighter than concurrency in C
[19:36:45] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[19:36:55] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[19:36:55] <Ms2ger> Eh?
[19:37:04] <derek_c> strcat: I just meant that Rust syntax-wise feels lighter
[19:37:30] <derek_c> do spawn {}   vs   spawn(proc() { });
[19:38:04] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:38:32] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[19:38:58] *** Joins: jroweboy (Mibbit@moz-18814A6B.provo.static.broadweavenetworks.net)
[19:39:08] <SiegeLord> There could always be a spawn! macro
[19:39:15] <SiegeLord> Truly, macros solve everything
[19:39:46] <strcat> derek_c: I'm not really sure that it needs to feel lightweight
[19:39:50] <strcat> it's not really
[19:40:16] <Tari> I really dislike wrapping blocks in parens; removing do as it is now makes it necessary to do so with larger closures
[19:40:38] <diverse> derek_c: it's just eye-candy
[19:41:23] <Jemaclus> Trying to run this code: http://static.rust-lang.org/doc/master/std/num/fn.pow.html
[19:41:28] <SiegeLord> Eye candy is important :P
[19:41:32] <Jemaclus> pow(2,4);
[19:41:34] *** Joins: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net)
[19:41:35] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[19:41:40] <Jemaclus> and I get this: error: failed to find an implementation of trait std::num::Real for int
[19:41:53] <Jemaclus> i also have use std::num; at the top
[19:42:14] <SiegeLord> Are you using rustc from master?
[19:42:21] <Jemaclus> yeah
[19:42:33] <Jemaclus> well, as of a week ago
[19:42:35] <Ms2ger> Well, an int isn't a real
[19:42:43] <bjz> Jemaclus: update
[19:42:44] <Ms2ger> rusti: pow(2.,4.);
[19:42:46] -rusti- pastebinned 7 lines of output: http://ix.io/a2q
[19:42:49] <Ms2ger> Bah
[19:42:58] <bjz> Jemaclus: it was done in the last week :)
[19:43:02] <Jemaclus> ah.
[19:43:08] <bjz> Jemaclus: thank flaper87 
[19:43:08] <derek_c> how do you yield the current task?
[19:43:13] <bjz> Jemaclus: :)
[19:43:17] <Jemaclus> what does that entail? git pull, make clean, make, make install?
[19:43:35] <bjz> Jemaclus: git pull; make && make install
[19:43:43] <bjz> is what I usually do
[19:43:47] <Jemaclus> i'll give it a shot.
[19:43:48] <Jemaclus> thanks
[19:43:57] <flaper87> :)
[19:44:06] *** Quits: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru) (Quit: Kxepal)
[19:44:15] <strcat> derek_c: there's a deschedule function but you probably shouldn't writing code where you have to call it
[19:44:15] <Jemaclus> let's hope this works. :)
[19:44:20] <flaper87> rusti: use std::num; num::pow(2, 4);
[19:44:22] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:44:23] -rusti- pastebinned 6 lines of output: http://ix.io/a2r
[19:44:26] <flaper87> not sure how to use rusti
[19:44:27] <flaper87> :D
[19:44:27] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[19:44:33] *** Joins: derek_ (derek@moz-78CFE167.cit.cornell.edu)
[19:44:35] *** Joins: derek__ (derek@moz-78CFE167.cit.cornell.edu)
[19:44:38] <bjz> flaper87: rusti is old...
[19:44:39] <Jemaclus> ^ that's what i got
[19:44:41] <derek__> how do you yield the current task?
[19:44:49] <flaper87> bjz: right
[19:44:51] <flaper87> :D
[19:44:53] <flaper87> forgot that
[19:44:54] *** Quits: derek_c (derek@moz-A43430DA.cit.cornell.edu) (Ping timeout)
[19:44:54] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:44:59] <flaper87> Jemaclus: git pull and build
[19:44:59] *** Joins: mib_ku526k (Mibbit@moz-C1D6CBC6.versanet.de)
[19:45:00] <flaper87> :D
[19:45:01] <strcat> 14:45:16        strcat | derek_c: there's a deschedule function but you probably shouldn't writing code where you have to call it
[19:45:02] <Hildar> Seemingly dumb question here, how do I send a [shared]channel to multiple tasks.
[19:45:02] <strcat> derek__: 
[19:45:07] <diverse> I thought rusti got updated recently?
[19:45:09] <jroweboy> Hello everyone! I'm updating some old Rust 0.5 code and I'm wondering how I should handle this enum code. The enum is a simple c-like enum that represents each of the common HTTP methods. when I try to do enum::GET it says unknown name GET. How would I access this name in my code?
[19:45:10] *** Quits: mib_ku526k (Mibbit@moz-C1D6CBC6.versanet.de) (Quit: http://www.mibbit.com ajax IRC Client)
[19:45:10] *** Joins: Kxepal (Miranda@moz-10D65211.pppoe.mtu-net.ru)
[19:45:18] <strcat> diverse: still can't use master
[19:45:22] <diverse> ah
[19:45:23] <strcat> I have to apply a patch and build it
[19:45:28] *** Quits: derek__ (derek@moz-78CFE167.cit.cornell.edu) (Quit: Leaving)
[19:45:30] <strcat> so my nightly repo doesn't work for rusti
[19:45:34] <strcat> no longer updated automatically
[19:45:41] <bjz> jroweboy: wow, 0.5 code :)
[19:45:47] <bjz> jroweboy: could you link?
[19:45:50] <derek_> strcat: thanks
[19:45:53] *** Quits: derek_ (derek@moz-78CFE167.cit.cornell.edu) (Quit: Leaving)
[19:46:03] <bstrie_ng> strange... giving a name to an unused variable rather than using _ has a semantic effect in a way that I wouldn't have expected
[19:46:23] <strcat> bstrie_ng: hm?
[19:46:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:46:35] <jroweboy> @bjz here is my forked copy of it. https://github.com/jroweboy/rust-web The enum is in method.rs
[19:46:41] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[19:46:49] <bjz> jroweboy: enum variants are in the encloding module namespace (or however you sat it)
[19:46:53] <bjz> *sya
[19:46:56] <bjz> *say
[19:47:12] <strcat> bstrie_ng: do you mean in terms of destruction?
[19:47:14] <o11c> about do ... remember that when @decorators were added to python, *everything* changed
[19:47:28] <jroweboy> right so I would use method::Method; and then call Method::GET right?
[19:47:33] <bstrie_ng> strcat: https://gist.github.com/bstrie/8547000 in this, if you give names to `filename` and `rest`, the program fails to compile with "cannot move because borrowed errors"
[19:47:43] <bjz> like, mod option { enum Option<T> { Some(T), None } } let x = option::Some(1);
[19:47:45] <bstrie_ng> strcat: but if you take out the unused names it compiles fine
[19:47:50] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[19:47:56] <bjz> wait: mod option { pub enum Option<T> { Some(T), None } } let x = option::Some(1);
[19:48:02] <strcat> bstrie_ng: you can still use _x
[19:48:07] <strcat> bstrie_ng: it's a lint convention
[19:48:10] <strcat> bstrie_ng: _ has a semantic meaning
[19:48:34] <ChrisMorgan> jroweboy: have you seen rust-http?
[19:48:37] <bjz> jroweboy: method::GET
[19:48:47] <bstrie_ng> strcat: I never figured that _ would allow the compiler additional reasoning
[19:49:01] <bstrie_ng> strcat: and doing _filename and _rest doesn't cause the program to compile
[19:49:35] <strcat> bstrie_ng: _ is used a lot in patterns and has to have semantics
[19:49:42] <bjz> jroweboy: as I say, scoped like a Haskell datatype, not a Java enum
[19:49:50] <jroweboy> @ChirsMorgan Yes I have :) I'm working with that as well, but it doesn't seem to have what I want. Rust-web connects to FCGI servers.
[19:50:12] <ChrisMorgan> jroweboy: why would you want to use FastCGI? It's very slow by comparison.
[19:50:17] <strcat> bstrie_ng: you can never refer to it as a normal ident
[19:50:32] <bjz> jroweboy: http://www.reddit.com/r/rust/comments/1vm5ts/any_reason_why_the_enum_arent_scoped/
[19:50:48] <jroweboy> bjz I guess I just just don't understand scoping. Oh, lemme read that link then! :)
[19:51:00] <strcat> bstrie_ng: you could argue that _foo should be an invalid identifier too, and that it should have the same semantics
[19:51:02] <strcat> dunno
[19:51:13] <bstrie_ng> shrug
[19:51:16] <strcat> bstrie_ng: but _foo is needed for RAII
[19:51:21] <strcat> let _foo = bar();
[19:51:25] <strcat> we don't have an alternative atm
[19:51:30] <bstrie_ng> this is contrived code, I'm just trying to come up with examples that are self-explanatory
[19:51:37] <strcat> if you do let _ = foo() it doesn't hold onto it for the scope
[19:51:41] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[19:51:47] *** Quits: Cevn (sameer@moz-438301B1.v4.wm.edu) (Ping timeout)
[19:52:05] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[19:52:09] <bstrie_ng> I remember reading that issue, but I've forgotten what the final behavior was decided upon
[19:52:24] <bjz> jroweboy: there was a proposal for: enum mod FloatClass { Zero, Subnormal, Infinite, NaN, Normal } let class = FloatClass::NaN; but I think it was rejected
[19:52:38] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[19:52:46] <jroweboy> ChrisMorgan: I understand that as well :D I just want to have different approaches to running my code, so I want it to be both interoperable with rust-http and FCGI. I'm writing an abstraction layer away from the server for web frameworks
[19:53:17] <ChrisMorgan> jroweboy: rust-http will eventually support FastCGI and CGI, but at present that is a *long* way down my priorities list.
[19:53:48] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[19:54:23] *** Joins: heftig (heftig@moz-214741C6.dip0.t-ipconnect.de)
[19:54:48] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[19:55:20] <jroweboy> ChrisMorgan: Oh! I didn't know that. If that's the case I will probably stop using rust web then haha. Thanks for letting me know that 
[19:55:35] <igork> another noob question - https://gist.github.com/wombatkin/947532f9ce985dacd9b3 why rust allows to compile this code? 
[19:55:41] <Jemaclus> aw, i got a bug :(
[19:55:44] <Jemaclus> error: unknown debug flag: no-debug-borrows error: internal compiler error: unexpected failure This message reflects a bug in the Rust compiler.  We would appreciate a bug report: http://static.rust-lang.org/doc/master/complement-bugreport.html
[19:56:24] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:56:34] <ChrisMorgan> jroweboy: when I say "eventually", I'm thinking of its being between one and three years hence.
[19:57:14] <ChrisMorgan> (Simply because it's a low priority. It's the sort of thing which will probably be a contribution from someone else who actually wants it. I wouldn't recommend using CGI or FastCGI as a deployment method.)
[19:57:25] <carllerche> Having a bit of trouble trying to figure out how to work the lifetimes w/ a HashMap https://gist.github.com/carllerche/39b4fac91b68cc527771
[19:58:26] <jroweboy> ChrisMorgan: I'm in no hurry. It'll probably be that long before I even graduate :/ Thanks for the help!
[19:58:55] <igork> i supposed rust should complain about moved value, not depending on having it drop() or not...
[19:59:04] <NiccosSystem> I was reading walton's "Which Pointer Should I Use?". I realise this post is kind of ancient, but I was just wondering how his example with the 'Counter' struct would work now? If I try to compile it now, it gives me errors saying I can't assign to immutable field and that mutable variables cannot be implicitly captured.. Article in question: http://pcwalton.github.io/blog/2013/03/09/which-pointer-should-i-use/
[20:00:27] <Ms2ger> NiccosSystem, which one?
[20:00:58] *** Joins: ptc (Adium@moz-70F9251D.thefacebook.com)
[20:01:14] <NiccosSystem> Under 'Concurrency', right above the conclusion
[20:01:20] <cmr> NiccosSystem: for the last example, you need a "let mut counter = counter;"
[20:01:44] <cmr> the implicit captures no longer happen, you need to explicitly move into the task body.
[20:02:07] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[20:02:25] <cmr> There's no timeout for UDP reads at all right now, right?
[20:02:25] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[20:04:10] <NiccosSystem> I put 'let mut counter = counter;' in the do spawn body, but it gives me the same error. I am fairly new to Rust, so forgive my noobishness :-)
[20:04:24] <cmr> hm.
[20:04:27] <cmr> gist your code?
[20:04:31] <cmr> and rust version?
[20:04:37] <NiccosSystem> rust-0.9
[20:04:45] *** Quits: Sentor (kvirc@893FFB9E.E6B1F028.DBB01AA2.IP) (Quit: Sentorian Intelligent Chat Bot, version 4.0.4 Insomnia.)
[20:04:54] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[20:05:35] <NiccosSystem> http://pastebin.com/iSAtXbEZ
[20:06:35] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[20:06:41] <eddyb> I don't think you need the ~ there, but I don't know much about procs
[20:06:54] <cmr> oh you just need to remove the mut on line 6
[20:07:11] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:07:36] <NiccosSystem> Why? (Just interested)
[20:08:23] <cmr> there's no deep philosophical reason.
[20:08:46] <cmr> afaik it's a historic limitation.
[20:09:08] <cmr> it used to be a closure, and closures can't mutably borrow the things they reference afaik.
[20:09:21] <NiccosSystem> Alright.. You bascially can't move mutable owned pointers
[20:09:22] <cmr> perhaps pcwalton or nmatsakis could comment more on it
[20:09:36] <cmr> well it used to be a closure, which you couldn't move into.
[20:09:53] <cmr> now it's a proc, which you can, but I don't think the rules around it except moves changed.
[20:10:17] <ChrisMorgan> Making a Rust counterpart for ncurses MEVENT which has a `short id` and another field which boils down to `unsigned long`. This would need an architecture-size-specific struct, right?
[20:10:27] *** Quits: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:11:04] <cmr> ChrisMorgan: c_chort and c_ulong
[20:11:06] <cmr> :)
[20:11:08] <cmr> yes.
[20:11:14] <ChrisMorgan> Oh yeah, I'm *really* not thinking straight. Thanks!
[20:11:36] * ChrisMorgan has just pulled his second all-nighter ever
[20:12:31] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:12:37] <diverse> cmr: 'c_chort' you mean 'c_short'?
[20:12:55] <cmr> yeah
[20:12:57] <cmr> sorry
[20:13:07] <diverse> no worries
[20:13:34] *** Quits: nuts (nuts@moz-66D8F032.w90-40.abo.wanadoo.fr) (Quit: Lost terminal)
[20:15:13] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:16:03] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[20:16:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:18:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:18:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:19:16] <SingingBoyo> I think the rust build has race condition bugs.  Fun.
[20:19:37] <Hildar> I noticed a few races about a week ago, nothing since.
[20:20:35] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[20:20:43] <SingingBoyo> last few times I've built it breaks during the first 'make' then works the second time.
[20:22:33] <ChrisMorgan> SingingBoyo: that's perfectly explicable: if there are makefile changes, it reconfigures, but for that process it is still running the old code.
[20:23:18] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[20:24:01] <bstrie_ng> what languages have pattern matching
[20:24:04] <bstrie_ng> besides rust
[20:24:08] <bstrie_ng> it is an ML thing primarily?
[20:25:07] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:25:16] *** Joins: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP)
[20:26:03] <Tari> I'm most familiar with it in Haskell; Python has limited sorts of pattern matching as well (on tuples)
[20:26:11] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:27:00] <bstrie_ng> bjz: you know ML, is that the origin of pattern matching?
[20:27:05] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[20:27:29] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[20:27:30] <bjz> bstrie_ng: do you mean for Rust in particular?
[20:27:38] <o11c> even C++ has a really hacky equivalent of what python has
[20:27:47] <bjz> bstrie_ng: I would be surprised if ML was the first
[20:27:53] *** Quits: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:28:16] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:28:18] <o11c> std::tie
[20:28:31] <bjz> bstrie_ng: http://en.wikipedia.org/wiki/Pattern_matching
[20:29:05] <bjz> ooh, SNOBOL!
[20:29:07] <bjz> haha
[20:29:09] <bjz> :D
[20:29:17] <bstrie_ng> bjz: I saw that article, I was trying to think of pattern matching as distinct from regexes
[20:29:23] <bjz> gotta love good 'ol SNOBOL
[20:29:27] <bjz> yeah, definitely
[20:29:40] <bjz> prolog maybe? but that might be after ML
[20:29:43] <eddyb> http://bilalhusain.com/rust-lexer/transpile.html I love how well it can map :)
[20:29:56] <eddyb> it's mostly adding keywords and punctuation
[20:29:58] <Jemaclus> Filed an issue for my compiler bug. I'll skip the pow() thing for now.
[20:30:03] <pzol> any examples for dynamic compilation? i.e. compiling a text source file and then dynamically loading the resulting library?
[20:30:09] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[20:30:12] <bjz> bstrie_ng: http://c2.com/cgi/wiki?PatternMatching
[20:30:37] <bstrie_ng> bjz: danke
[20:31:05] <bjz> bstrie_ng: can't find much history there, but it might give you some pointers
[20:32:00] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[20:32:31] <bjz> bstrie_ng: http://en.wikipedia.org/wiki/Pattern_calculus
[20:32:45] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:33:33] <bjz> bstrie_ng: any reason you ask?
[20:33:37] <bjz> bstrie_ng: or just out of interest?
[20:33:39] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[20:33:51] <bjz> bstrie_ng: you could ask on #yfl
[20:34:05] <bjz> bstrie_ng: they tend to know their languages pretty well
[20:34:06] <bstrie_ng> bjz: making a new code example for the wikipedia page
[20:34:18] <bstrie_ng> wanted to give a tiny bit of background on pattern matching
[20:34:38] <bjz> ah
[20:35:12] <bjz> you could just mention that rust draws from the ML lineage, where pattern matching is common place
[20:35:38] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[20:35:49] <bstrie_ng> that's what I have, yeah
[20:36:03] <bjz> unfortunately it's more verbose in rust, so a little less pervasive
[20:36:13] <bjz> ML has super nice sugar
[20:36:40] <bjz> :)
[20:37:20] <bjz> bstrie_ng: things like let exprs, and destructuring function args are cool, same with vertor destructuring
[20:37:28] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Quit: nano)
[20:37:28] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:37:33] <bstrie_ng> bjz: check it out: https://en.wikipedia.org/wiki/Rust_(programming_language)#Examples
[20:37:59] <bjz> bstrie_ng: btw: http://c2.com/cgi/wiki?RustLanguage
[20:38:11] <bjz> bstrie_ng: gotta put some witty stuff there
[20:38:27] <eddyb> bstrie_ng: enum variants and destructuring structs would be cool to add
[20:38:56] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[20:39:12] <bstrie_ng> eddyb: I'm explicitly avoiding turning the wikipedia page into a tutorial. basically I think the examples section should be a quick 30-second overview of "things that might blow the minds of C++ programmers"
[20:39:24] <bjz> bstrie_ng: agreed
[20:39:33] <carllerche> Is it even possible (or a good idea) to have HashMap keys be references with lifetimes like I'm trying to do here: https://gist.github.com/carllerche/39b4fac91b68cc527771
[20:39:40] <carllerche> it seems like it would make fns like find_or_insert_with quite tricky to use
[20:39:41] <bjz> bstrie_ng: shame about the ugly highlighting
[20:39:55] <bstrie_ng> yup
[20:39:56] <eddyb> bstrie_ng: then enum variants should be mentioned as a feature or something
[20:39:58] <bjz> bstrie_ng: maybe it would be better to reduce the amount of comments in the code
[20:40:23] <bstrie_ng> eddyb: I plan on writing another code example for Option
[20:40:25] <eddyb> i.e. split https://en.wikipedia.org/wiki/Rust_(programming_language)#Description into a few subtitles
[20:40:34] <bjz> bstrie_ng: also, for the concurrency example it might be nice to have a tiny server example
[20:40:35] <bstrie_ng> yeah, the rest of the page needs work
[20:40:36] <eddyb> it's mashed together now
[20:40:38] *** Quits: vmx (vmx@moz-BACBB4A.pools.arcor-ip.net) (Quit: Leaving)
[20:40:51] <bjz> bstrie_ng: so it's more less contrived
[20:40:53] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[20:40:54] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[20:41:00] <bstrie_ng> bjz: the point is entirely to be contrived
[20:41:07] <bjz> bstrie_ng: it could also display pattern matching in it
[20:41:16] <bjz> bstrie_ng: yeah - tricky
[20:41:20] <bstrie_ng> I try to limit the number of new concepts in each example
[20:41:35] <bstrie_ng> you can't just overwhelm the reader with alien techniques
[20:41:38] <eddyb> bjz: we need to be able to implement a HTTP server in less code than node.js' hello world :)
[20:41:44] <bstrie_ng> you have to whelm them in exactly the correct quantity
[20:41:50] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:41:57] <bjz> bstrie_ng: I would try to add channels - then you could reference Erlang and CML
[20:42:16] <bjz> eddyb: not talking of that kind of server
[20:42:20] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[20:42:27] <bjz> eddyb: as in, the concurrency pattern
[20:42:31] <eddyb> bjz: sure
[20:42:32] <bstrie_ng> bjz: anyway, the really neat thing about the current spawn example is that it shows off race conditions on stdout
[20:42:37] <bstrie_ng> that's the real point
[20:42:43] <bstrie_ng> just to prove that concurrency is happening
[20:42:48] <eddyb> bstrie_ng: oh, println is missing a !
[20:42:57] <eddyb> let's not break on master :P
[20:42:58] <bstrie_ng> eddyb: these are all legal 0.9 :)
[20:43:04] *** Joins: Florob (Florob@moz-39532932.de)
[20:43:05] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:43:19] <bstrie_ng> eddyb: I'd rather println(message) than println!("{}", message), honestly...
[20:43:20] <eddyb> especially since it's using println! everywhere else
[20:43:46] <Matthias247> eddyb: that's pretty simple if you put everything in a library and start that with a single LoC ;)
[20:45:08] <eddyb> ChrisMorgan: make this happen: http_server!(|res| write!(res, "Hello World!"))
[20:45:19] <eddyb> or, |req, res|
[20:45:44] <ChrisMorgan> eddyb: and where will it serve to?
[20:45:56] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:45:59] <eddyb> ChrisMorgan: you mean, the port and host it will listen on?
[20:46:02] <ChrisMorgan> Yes.
[20:46:11] <bjz> bstrie_ng: https://gist.github.com/bjz/8411680
[20:46:13] <eddyb> pick a sane default or have it after the handler in the macro
[20:46:51] <Matthias247> and you can DOS the rust version by sending a single byte :-)
[20:46:54] *** Joins: mpiechotka (mpiechotka@moz-BABDC2A7.dynamic.mnet-online.de)
[20:47:21] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Client exited)
[20:47:30] *** Parts: mpiechotka (mpiechotka@moz-BABDC2A7.dynamic.mnet-online.de) ()
[20:47:31] <ChrisMorgan> eddyb: what a pity ``127.0.0.1:8000`` won't serialise.
[20:47:36] <ChrisMorgan> s/serialise/tokenise/
[20:47:40] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[20:47:42] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:47:43] <eddyb> are you kidding me :(?
[20:47:46] <bstrie_ng> bjz: that might suffice as a more advanced code example. we still need really simple, self-contained, self-explanatory basic examples first
[20:47:47] <eddyb> rusti: 0.0
[20:47:48] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[20:47:48] -rusti- 0f64
[20:47:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[20:47:59] <eddyb> rusti: foo!(0.0.0)
[20:48:01] -rusti- pastebinned 6 lines of output: http://ix.io/a2x
[20:48:02] <bjz> bstrie_ng: yes, agreed
[20:48:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:48:25] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:48:32] <eddyb> rusti: foo!(127.0.0.1:8000)
[20:48:34] -rusti- pastebinned 6 lines of output: http://ix.io/a2y
[20:48:40] *** Joins: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com)
[20:48:43] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:48:51] <eddyb> ChrisMorgan: shouldn't that throw a parse error otherwise?
[20:48:54] <eddyb> rusti: foo!([127.0.0.1:8000)
[20:48:56] -rusti- pastebinned 9 lines of output: http://ix.io/a2z
[20:49:33] <eddyb> ChrisMorgan: have you actually tried it? or is it impossible to extract the pieces from a.b.c.d?
[20:49:51] <ChrisMorgan> Hang on, you're right. I really *do* need to go to bed if I can't tell the difference between tokenisation and lexing failures.
[20:49:56] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:50:06] <SiegeLord> It's definitely 127.0 first
[20:50:17] <eddyb> and then . 0.1?
[20:50:18] <SiegeLord> Dunno what the rest of it is parsed as
[20:50:31] <ChrisMorgan> eddyb: the tokens are (as I first thought) ["127.0", ".", "0.1", ":", "8000"]
[20:50:32] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[20:50:47] <akp> is there a rust library for interacting with SOAP?
[20:50:55] <ChrisMorgan> Thus it's entirely feasible—but that doesn't necessarily mean it's a good idea.
[20:51:09] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:51:14] <ChrisMorgan> akp: I doubt it very much.
[20:51:16] <eddyb> ChrisMorgan: hehehe. come on, I know you want it :D
[20:51:24] *** Quits: japaric (japaric@70E8CE2A.4B327FDB.F29ED47E.IP) (Ping timeout)
[20:51:37] <ChrisMorgan> eddyb: ah yes, sleep— you're right, I do want it!
[20:51:42] *** Joins: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com)
[20:51:58] <eddyb> that too. I'll take mine now, if you don't mind
[20:52:07] <eddyb> don't rust while I'm gone
[20:52:20] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[20:52:24] * ChrisMorgan wishes he could have started taking his eight hours ago
[20:52:30] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[20:52:36] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[20:52:37] <bstrie_ng> ChrisMorgan: you did! this has all been just a dream
[20:52:37] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:53:15] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:53:19] <eddyb> ChrisMorgan: what do you mean you're not using HKT and generators in rust-http?
[20:53:33] <eddyb> ChrisMorgan: what do you think this is, 2014?
[20:53:38] <NiccosSystem> FUCK
[20:53:41] <NiccosSystem> FUCKITY FUCK
[20:53:43] * eddyb ducks and runs - to sleep
[20:53:44] <NiccosSystem> wrong channel
[20:53:46] <NiccosSystem> oops
[20:53:49] <ChrisMorgan> bstrie_ng: you mean I'll get up in twenty minutes' time and find that actually I've still got eight hours of work to do on this project that needs to be in in an hour and a half?
[20:54:00] <ChrisMorgan> eddyb: I'm not certain what you're referring to.
[20:54:22] <eddyb> ChrisMorgan: pretending that you're dreaming. didn't work so well, from the confusion
[20:54:44] *** Joins: japaric (japaric@17483874.6B340C30.BFC118EE.IP)
[20:55:02] <bstrie_ng> ChrisMorgan: don't listen to eddyb, he's just a manifestation of your subconscious trying to keep you from realizing that you're dreaming
[20:55:03] *** Quits: Kruppe (user@moz-B684EC26.net.uwaterloo.ca) (Ping timeout)
[20:55:11] * ChrisMorgan panics
[20:55:48] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:56:06] <eddyb> bstrie_ng: you mean I'm not real? you mean this isn't real https://github.com/mozilla/rust/pull/11595? *deletes the branch*
[20:56:14] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[20:56:15] *** Joins: nszceta (quassel@moz-38D6E53.wireless.pitt.edu)
[20:56:17] *** eddyb is now known as __________
[20:56:30] *** bstrie_ng is now known as ________
[20:56:31] <__________> *poof*
[20:56:34] <________> __________: indeed
[20:56:35] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:56:40] *** Joins: echristo (echristo@E55635C9.D6CCE4AE.77834EAA.IP)
[20:56:41] *** __________ is now known as eddyb
[20:56:45] <nszceta> wtf
[20:56:56] <eddyb> nszceta: you didn't see anything
[20:56:59] <nszceta> ._.
[20:57:03] *** Joins: mpiechotka (mpiechotka@moz-BABDC2A7.dynamic.mnet-online.de)
[20:57:15] *** ________ is now known as bstrieMorgan
[20:58:20] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:58:33] *** Parts: ptc (Adium@moz-70F9251D.thefacebook.com) ()
[20:58:54] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:00:14] *** Joins: bmats_ (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[21:00:33] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:01:00] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Ping timeout)
[21:01:04] <mcpherrin> Is there a wiki page or something on getting rust to target bare metal?
[21:01:15] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:01:27] <mcpherrin> I want elf-i386 code for a coreboot payload
[21:01:49] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[21:02:53] *** Quits: bmats_ (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Ping timeout)
[21:03:56] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:03:56] *** Quits: jackneill (jackneill@moz-E9D68037.pool.digikabel.hu) (Ping timeout)
[21:04:21] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[21:04:33] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[21:04:36] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[21:05:07] *** Quits: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net) (Ping timeout)
[21:05:44] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:06:30] <bjz> bstrieMorgan: https://gist.github.com/bjz/8548380
[21:06:40] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:06:49] <bjz> bstrieMorgan: probably far too complex for a wiki, but kinda fun
[21:06:52] <rdn> what is the the minimal match case when matching an enum struct T? (e.g. T =>, or T{} =>, or do i need to list every struct field)
[21:07:10] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[21:07:45] <bjz> rdn: T { .. } or T(..), I believe
[21:07:46] <sfackler> rdn: if you only care about some of the fields you can do this: T { a, b, .. } => ..
[21:08:03] <rdn> ah thanks
[21:08:46] *** Quits: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Ping timeout)
[21:10:03] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[21:10:10] *** Quits: atomical (atomical@moz-C92D67E2.library.northwestern.edu) (Ping timeout)
[21:10:40] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[21:11:13] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:12:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:12:18] <Jemaclus> let v: [f32, ..5] = [1.1,5.1,77.3,21.1,993.4]; 	v.sort();
[21:12:30] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:12:40] <Jemaclus> This doesn't work. Looks like [f32,..5] doesn't implement cmp::TotalOrd.
[21:12:51] <Jemaclus> is there a better way to sort that? Or make it implement that trait?
[21:12:53] <igork> i've reduced my code, and it still compiling, probably i've missed something in docs about moving values... please hint anyone? :) https://gist.github.com/wombatkin/947532f9ce985dacd9b3
[21:13:05] <ChrisMorgan> Jemaclus: [T, ..N] don't implement much at all for technical reasons.
[21:13:26] <sfackler> you can use v.sort_by(|a, b| a.cmp(b))
[21:13:27] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Ping timeout)
[21:13:41] <Jemaclus> sfackler: that's the same thing as what i have (according to docs)
[21:13:53] <Jemaclus> http://static.rust-lang.org/doc/master/std/vec/trait.MutableTotalOrdVector.html#tymethod.sort
[21:14:01] <ChrisMorgan> Hang on, Jemaclus—TotalOrd? Floats won't implement TotalOrd.
[21:14:30] <Jemaclus> yeah, i figured.
[21:14:33] <bstrieMorgan> floating point math doesn't have a total ordering :)
[21:14:50] <ChrisMorgan> Because of NaN
[21:14:56] <bstrieMorgan> dammit NaN
[21:15:01] *** bstrieMorgan is now known as bstrie_nan
[21:15:06] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:15:19] <Jemaclus> yeah, but it seems to me that a<f32> can be compared to b<f32> and determined whether one is greater, less than, or equal to the other... no?
[21:15:47] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[21:15:56] <Jemaclus> i guess I'm not clear on why I can't do a.cmp(b) when they're floats
[21:15:56] *** Quits: nszceta (quassel@moz-38D6E53.wireless.pitt.edu) (Ping timeout)
[21:16:00] <sfackler> Jemaclus: NaN is special and awful
[21:16:20] <whitequark> NaN != NaN, and so on
[21:16:49] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[21:16:54] <sfackler> there is a special totalOrdering predicate in the IEEE 754 spec, but I don't think Rust uses it yet
[21:16:58] <Jemaclus> ok
[21:17:15] <FreeFull> Haskell's Ord Float instance does Eq for an imput of two NaNs
[21:17:30] <FreeFull> Which is inconsistent with the Eq instance
[21:17:42] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[21:17:45] <FreeFull> EQ for the first one, I mean
[21:17:56] *** Joins: nszceta (quassel@moz-E458A7C0.pharm.pitt.edu)
[21:18:56] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:19:14] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:19:37] <Jemaclus> so Rust doesn't support sorting floats...
[21:20:29] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[21:20:35] <FreeFull> You could write an instance for the trait I suppose yourself. Not sure if it's allowed
[21:20:46] <mcpherrin> what is rustilite 
[21:21:06] <eibwen> rustilite: 1+1
[21:21:08] -rustilite- pastebinned 6 lines of output: http://ix.io/a2D
[21:22:23] <eibwen> does Rust do something against integer overflow bugs?
[21:22:38] <whitequark> not currently, no
[21:22:53] <whitequark> there is CheckedAdd and friends, but you must explicitly use them
[21:22:53] <sfackler> there are checked math methods you can call
[21:23:22] <whitequark> there's been some discussion in issues and ML of making checked operations the default, but it appears that the complexity it adds isn't worth the benefit.
[21:23:30] <eibwen> mhmh
[21:23:33] <kimundi> mcpherrin: rustilite is rusti without the fn main() wrapper
[21:23:39] <Ms2ger> That's unfortunate
[21:23:48] *** Joins: ofeldt- (ofeldt@moz-ADB94067.dip0.t-ipconnect.de)
[21:23:50] <mcpherrin> rustilite: fn main() {println!("what");}
[21:23:51] -rustilite- what
[21:24:12] *** Quits: bakkdoor (bakkdoor@moz-48BDE18.osnanet.de) (Quit: Linkinus - http://linkinus.com)
[21:24:19] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[21:24:20] <FreeFull> rustilite: fn main() { println!("This is bothersome for the standard stuff."); }
[21:24:21] -rustilite- This is bothersome for the standard stuff.
[21:24:26] <Ms2ger> I guess someone could look at the number of security vulnerabilities caused by integer overflow
[21:24:29] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Ping timeout)
[21:24:31] <FreeFull> I wonder
[21:24:34] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[21:24:49] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[21:24:56] *** Quits: ofeldt (ofeldt@moz-42077DC7.dip0.t-ipconnect.de) (Ping timeout)
[21:24:57] <FreeFull> rustilite: fn main() { println!("\x0AACTION This is bothersome for the standard stuff.\x0A"); }
[21:24:58] -rustilite- ACTION This is bothersome for the standard stuff.
[21:25:06] <mcpherrin> rustilite: println!("wakka wakka")
[21:25:09] <FreeFull> Ok, it does filter funny characters out
[21:25:10] -rustilite- pastebinned 6 lines of output: http://ix.io/a2E
[21:25:29] <o11c> it's \x01, aka ^A
[21:25:37] <FreeFull> Oh, yeah
[21:25:43] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:25:45] <FreeFull> rustilite: fn main() { println!("\x01ACTION This is bothersome for the standard stuff.\x01"); }
[21:25:50] <eibwen> =)
[21:25:52] <FreeFull> That probably should get fixed
[21:25:59] <eibwen> rusti: "\n"
[21:26:00] -rusti- "\n"
[21:26:03] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[21:26:07] <o11c> but it's a notice, not a privmsg, so ...
[21:26:11] <eibwen> rusti: println!("\n")
[21:26:12] -rusti- ()
[21:26:15] <pyon> Is the notion of lifetime hardcoded into Rust's borrowed pointers, or can I use it for my own types? (e.g., a RWArc with a lifetime)
[21:26:18] <kimundi> FreeFull: What should get fixed?
[21:26:19] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:26:28] <FreeFull> o11c: PRIVMSG is CTCP request, NOTICE is CTCP reply
[21:26:40] <mcpherrin> rustilite: fn main() {println!("\x01PRIVMSG mcpherrin :what is I dont"); }
[21:26:41] -rustilite- PRIVMSG mcpherrin :what is I dont
[21:26:43] <FreeFull> kimundi: rustilite not filtering some special characters out
[21:26:50] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:26:53] <FreeFull> It should filter anything below space other than newlines out
[21:27:15] *** Joins: tmaila (Mibbit@moz-F0308644.hsd1.ca.comcast.net)
[21:27:17] <kimundi> FreeFull: It doesn't need to, the IRC library strcat uses already does that
[21:27:35] <eibwen> kimundi: how do actions get through then?
[21:27:47] <NiccosSystem> are rusti and rustilite interpreters?
[21:27:47] <kimundi> They don't?
[21:27:56] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[21:27:57] <FreeFull> kimundi: 21:26:41 CTCP PRIVMSG reply from rustilite in channel #rust: mcpherrin :what is I dont
[21:27:59] <bstrie_nan> NiccosSystem: yes
[21:28:14] <Ms2ger> -rustilite/#rust- PRIVMSG mcpherrin :what is I dont
[21:28:18] <FreeFull> ^A gets through
[21:28:33] <kimundi> Huh, well then talk with strcat :P
[21:28:36] <Ms2ger> That's not different from what it would send
[21:28:36] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:28:36] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:28:37] <mcpherrin> NiccosSystem: More like they compile and run the code and print it here, not strictly an interpreter
[21:28:54] <NiccosSystem> Yeah that was what I was wondering
[21:29:04] <kimundi> NiccosSystem: rusti and rustilite are irc bots that pipe the message into rustc - so its not a interpreter per se
[21:29:28] <bstrie_nan> pfft
[21:29:30] <bstrie_nan> semantics
[21:29:36] <nszceta> so when is the Rust OS coming
[21:29:41] <NiccosSystem> Aye, that was what I was wondering about.. whether or not someone had actually made an interpreter..
[21:29:48] <mcpherrin> nszceta: this weekend
[21:29:51] <nszceta> pls
[21:30:00] * mcpherrin already started ;)
[21:30:08] <mcpherrin> ... sorta
[21:30:26] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:30:32] <nszceta> how do you even deal with the IDT
[21:30:47] *** Quits: tmaila (Mibbit@moz-F0308644.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:30:57] <arrdem> mcpherrin: good stuff. post code so the rest of us can chip in
[21:30:59] <herrwolfe45> just out of curiousity, are doctests used frequently with rust?
[21:31:01] <NiccosSystem> gr.. I better start focusing on studying for this maths test..
[21:31:16] <mcpherrin> There's a #rust-osdev channel if you're into that things
[21:31:19] <sfackler> nszceta: the same way you would in a C kernel
[21:31:27] <kimundi> nszceta: If you are interested in os development, join #rust-osdev on this network :)
[21:31:33] <nszceta> o_O
[21:31:33] <kimundi> Darn, not fast enough :P
[21:31:35] <nszceta> !!!!
[21:31:51] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[21:31:53] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:32:25] <Matthias247> splitting rust code from one source file into multiples is quite hard :(
[21:32:26] <nszceta> sfackler: except you can have naked functions in C
[21:32:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:32:35] <nszceta> and not in rust
[21:32:39] <nszceta> AFAIK
[21:33:49] *** Joins: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net)
[21:34:50] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:35:05] <Matthias247> I get new modules even though I don't want them. And then I can't call functions anymore because they are priv. But if I woul make them public anybody could call them.
[21:35:10] *** Parts: mpiechotka (mpiechotka@moz-BABDC2A7.dynamic.mnet-online.de) ()
[21:35:15] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Ping timeout)
[21:35:26] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:35:36] <kimundi> Matthias247: public exports in private modules don't get exported to the outside
[21:35:52] <benh> rusti: bytes!("x", 64, "y")
[21:35:53] -rusti- &[120u8, 64u8, 121u8]
[21:36:05] <stephenmac7> Is it possible to use pattern matching in function arguments?
[21:36:13] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[21:36:16] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[21:36:21] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[21:36:24] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[21:36:28] *** Quits: jroweboy (Mibbit@moz-18814A6B.provo.static.broadweavenetworks.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:36:31] <kimundi> pub mod a { mod b { pub struct C; // C visible } // C visible } // C invisible
[21:36:35] <kimundi> stephenmac7: Yes
[21:36:48] <stephenmac7> How?
[21:37:03] <kimundi> rusti: fn foo((a, b): (int, int)) -> int { a + b } foo((1, 2))
[21:37:05] -rusti- 3
[21:37:06] <Matthias247> hmm, but I still want to export the types in the submodules
[21:37:06] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:37:13] <Matthias247> but not with the full functionality
[21:37:38] *** Quits: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com) (Quit: Leaving)
[21:37:39] <kimundi> Matthias247: You can reexport them in the outer module then
[21:37:46] <stephenmac7> kimundi: Ah, thanks
[21:37:54] <herrwolfe45> benh: to use that bytes! macro, need anything be imported?
[21:38:10] <Matthias247> kimundi: yes, but I think then all functions in the struct get exported?
[21:38:14] <kimundi> pub mod a { pub use self::b::C; mod b { pub struct C; // C visible } // C visible } // C visible, b invisible
[21:38:26] <stephenmac7> kimundi: Rust reminded me of haskell, so I thought, "Hey, they must have pattern matching in function arguments too!"
[21:38:34] <kimundi> Matthias247: Hm, well yeah, I think?
[21:38:44] <kimundi> Good question actually, not sure...
[21:38:47] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:38:48] <Matthias247> kimundi: so I want to have 3 functions of C visible and 2 not
[21:38:48] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[21:39:03] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[21:39:36] <Matthias247> in Java/C# I could simply put all in the same package and can access each other due to internal / package private and export only the necessary things as public
[21:39:44] <Matthias247> much easier
[21:39:46] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[21:39:48] <kimundi> Matthias247: My guts say that if you rexport something, only its public API gets reexported with it, but I'm not sure
[21:40:20] <kimundi> Matthias247: I'd look for/open an issue for this specific problem
[21:40:22] <Matthias247> kimundi: yes, but I have to make it public to even use it internally (in my crate) in another file?
[21:40:25] <pyon> How do I make a type not an instance of Send?
[21:40:38] <kimundi> Cause I'm really not sure what the semantic should be in such a case
[21:41:09] *** Parts: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (ERC Version 5.3 (IRC client for Emacs))
[21:41:13] <kimundi> pyon: special attribute/soon marker type as zero-sized member
[21:41:18] <Matthias247> I could only use Traits at the crate boundary. But that doesn't work for value types
[21:41:31] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:41:46] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Ping timeout)
[21:42:55] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[21:45:00] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[21:45:08] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:45:54] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:45:59] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[21:46:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:46:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:47:36] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:48:39] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[21:48:54] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:50:20] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:50:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:50:48] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:50:52] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[21:51:04] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[21:51:05] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Client exited)
[21:51:07] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Client exited)
[21:51:25] *** Joins: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[21:51:32] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[21:52:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:53:16] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[21:53:26] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[21:54:25] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[21:55:35] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[21:57:45] *** Quits: a__ (a@moz-56DB9895.nycmny.fios.verizon.net) (Quit: Leaving)
[21:57:57] *** Joins: a__ (a@moz-56DB9895.nycmny.fios.verizon.net)
[21:57:58] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:58:17] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[21:58:19] *** Quits: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:59:16] *** Quits: okard (okard@moz-CE5CBE1A.dip0.t-ipconnect.de) (Ping timeout)
[22:00:39] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[22:00:39] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[22:01:23] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:02:19] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:03:53] <bstrie_nan> bjz: what do you think of https://gist.github.com/bstrie/8549335
[22:05:10] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:06:03] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:07:25] <Tobba> is there any way to get past cannot move out of dereference of * pointer
[22:07:35] <bstrie_nan> Tobba: are you in a match?
[22:07:38] <Tobba> nope
[22:07:46] <Tobba> trying to dereference the value so it ends up on the stack then return it
[22:07:54] <Tobba> this will be used on ints 99% of the time
[22:08:23] <bstrie_nan> Tobba: does the .clone() method work?
[22:08:48] <Tobba> I dont have clone()
[22:08:51] <Tobba> whats it implemented as
[22:09:14] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:09:15] <bstrie_nan> is the code short? can you paste it somewhere?
[22:09:27] <Tobba> *(offset(self.ptr, (arg as int)*4) as *T)
[22:09:30] <Tobba> its pretty much just this
[22:09:46] *** Joins: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net)
[22:09:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:09:52] <Tobba> let me look into clone
[22:10:11] *** Quits: dbaupp (Thunderbir@moz-A840EB3D.lns20.syd6.internode.on.net) (Ping timeout)
[22:10:13] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Client exited)
[22:10:21] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[22:10:35] <tq> Can the underlying type be specified for enums, like the following in C++?   enum MyEnum : unsigned char
[22:10:52] <Ms2ger> #[repr(u8)]
[22:10:59] <bstrie_nan> stick that on top of the enum
[22:11:02] *** Quits: heftig (heftig@moz-214741C6.dip0.t-ipconnect.de) (Ping timeout)
[22:11:03] <tq> oh, thanks
[22:11:04] *** Quits: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:11:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:12:11] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:12:26] <Tobba> I dont think clone will work though
[22:12:26] <Tobba> hm
[22:12:36] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[22:13:02] <bstrie_nan> Tobba: I get the impression that what you're doing is already hideously unsafe :)
[22:13:02] *** Joins: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net)
[22:13:25] <Tobba> at the moment yes
[22:13:32] *** Quits: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com) (Ping timeout)
[22:13:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:13:53] <bstrie_nan> I'm not sure what the best way to help is, then
[22:13:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:14:00] <bstrie_nan> I don't go that low-level generally
[22:14:09] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Ping timeout)
[22:17:45] *** Quits: akp (akp@moz-23A590A0.hfc.comcastbusiness.net) (Ping timeout)
[22:18:35] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[22:18:39] *** Joins: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com)
[22:19:24] *** Quits: moostik (Icedove@moz-2E0A4DA6.minet.net) (Ping timeout)
[22:21:11] <Matthias247> ok, I see really no chance to preset a clean public interface when I move an object to it's own file :(
[22:22:45] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[22:23:17] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[22:23:34] *** Joins: heftig (heftig@moz-93EFFD5D.dip0.t-ipconnect.de)
[22:23:50] <whitequark> pub use foo::Obj; ?
[22:24:08] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[22:24:18] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[22:24:30] <Matthias247> that doesn't help on privacy/publicity of methods
[22:25:44] <Matthias247> I want to give specific other classes in my crate access to the methods. But not to the external world
[22:25:56] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:26:05] <Matthias247> basically something very basic
[22:26:51] <bjz> bstrie_nan: linked lists aren't really ideomatic rust
[22:26:58] <bjz> :(
[22:27:15] <bjz> bstrie_nan: I dunno
[22:27:34] <bjz> bstrie_nan: maybe an AST would be better?
[22:27:37] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:28:20] *** Joins: amidvidy (Mibbit@moz-B043471E.airbears.berkeley.edu)
[22:28:21] *** Quits: amidvidy (Mibbit@moz-B043471E.airbears.berkeley.edu) (Quit: amidvidy)
[22:28:30] <bjz> bstrie_nan: that's more of a classic ADT example
[22:28:31] *** Joins: amidvidy (Mibbit@moz-B043471E.airbears.berkeley.edu)
[22:29:48] <amidvidy> hello everyone. I just wrote my first rust program, it's an extremely primitive command-line todo list, and I was wondering if anyone would be so kind as to review the code. It's really short (100 lines).
[22:30:41] <aatch> amidvidy, post your code, somebody'll take a look.
[22:30:45] <aatch> (probably)
[22:30:51] <amidvidy> here it is: https://gist.github.com/amidvidy/8549671
[22:30:52] <bstrie_nan> bjz: eh, again, I'm fine with contrived examples. the point is to express the concept and fire the imagination
[22:31:32] <bjz> bstrie_nan: ADTs fire the imagination more than boring linked lists do
[22:31:39] <bjz> bstrie_nan: <3 eval
[22:31:49] <bjz> woops, I mean ASTs
[22:31:53] <bstrie_nan> bjz: this example was inspired by LinearInterpol's excitement over the one-line linked list over on freenode the other day :P
[22:31:57] <kimundi> amidvidy: In line 33, taking a ~Todo is uneccessary - just take a bare Todo
[22:32:00] <bjz> haha
[22:32:21] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[22:32:27] <bstrie_nan> so don't tell me it's not exciting!! :)
[22:32:31] <amidvidy> kimundi: thanks!
[22:32:41] <bjz> wait really? linked lists are one line in any functional lang. I guess it would be mind-blowing coming from C
[22:32:53] <bstrie_nan> bjz: and again, the point is to blow the minds of C programmers
[22:32:58] <bstrie_nan> we don't need more functional programmers
[22:33:03] <bstrie_nan> we're awash with functional programmers
[22:33:14] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[22:33:16] <bjz> hah, I dunno, we have a mix
[22:33:28] <bjz> mainly semi-polygots
[22:33:30] <Ms2ger> How about double-linked lists?
[22:33:33] <o11c> C programmers have minds?
[22:33:43] <kimundi> amidvidy: In line 45, display(): Instead of iterting over a range(o, self.todods.len()), you can just iterate over the todos directly
[22:33:52] <bstrie_nan> rust will never be as elegant as any other functional language. but we can be as fast as C++, but we need more C++ programmers to spur us
[22:33:56] <kimundi> for todo in self.todos.iter()
[22:34:03] <bjz> bstrie_nan: of course
[22:34:13] <kimundi> for (i, todo) in self.todos.iter().enumerate() if you need a index
[22:34:14] <FreeFull> Once Rust is ready, the only reason to still use C should be compilation to unsupported targets, legacy codebases, and not being able to learn Rust for some reason
[22:34:44] <bjz> FreeFull: C is still pretty cool, despite it's god-awfulness
[22:34:52] <FreeFull> kimundi: Will todo still be a numeric index?
[22:34:58] <Ms2ger> You know, "legacy codebases" is why cobol earns so much
[22:35:15] <FreeFull> bjz: For some things, it's the only reasonable way to go
[22:35:16] <aatch> amidvidy, looks pretty good. Given the structure, you could probably move the todo list into the execution methods and modify it.
[22:35:50] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[22:35:52] <bjz> FreeFull: you know, looking at it as a product of it's time. It's a very simple lang - even if some of the design decisions lead to annoying ambiguities (which cause complexity)
[22:35:52] <amidvidy> aatch: yeah, I originally wrote it with mutation but I thought it would be a bit more interesting if the todolist was immutable
[22:35:54] <kimundi> FreeFull: No, thats what enumerate is for :P
[22:36:02] <FreeFull> You probably don't want to write a kernel in some garbage-collected language, and C++ is more work for kernels than C
[22:36:11] <amidvidy> and kimundi, thanks again, going to make all those changes
[22:36:25] * bjz likes C++. and ML. and Haskell, and others
[22:36:29] <FreeFull> kimundi: Yeah, the code there makes use of the index too =P
[22:36:44] <FreeFull> Ah, I see
[22:36:47] <FreeFull> You already covered it
[22:36:49] <FreeFull> And I'm blind
[22:36:57] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[22:37:05] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[22:37:07] <Ke> like C++
[22:37:09] <kimundi> FreeFull: yeah, but using array indexing - which is slower and discouraged than iterating directly :)
[22:37:10] <Ke> !
[22:37:18] *** Quits: rca_ (rcatolino@moz-5EA2C694.adsl.proxad.net) (Ping timeout)
[22:37:31] <o11c> Everybody who has descended at least one level loves C++
[22:37:45] <o11c> Everybody who has descended at least two also hates it.
[22:38:05] <aatch> I like the C++ that I use, I hate the C++ everybody else uses.
[22:38:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:38:27] <bstrie_nan> cmr: qotw ^
[22:38:31] <FreeFull> kimundi: Yeah
[22:38:57] <FreeFull> I like ASM, and C, and Haskell, and stack-based programming languages
[22:38:57] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:39:02] <FreeFull> And Rust, of course
[22:39:26] <amidvidy> has anyone done a kademlia implementation in rust? that's my goal for my first larger project
[22:40:02] <mcpherrin> amidvidy: I haven't seen one!
[22:40:14] <FreeFull> I'm not sure how well Rust handles UDP right now
[22:40:38] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:40:43] <kimundi> amidvidy: One more thing, you can reduce your Clone implementation to a #[deriving(Clone)] in front of struct Todo { ... } :)
[22:41:06] *** Joins: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[22:41:06] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[22:41:16] *** Quits: Ms2ger (Ms2ger@53A418F8.CD932C3B.187A1082.IP) (Quit: nn)
[22:41:50] <FreeFull> I love deriving typeclasses/traits
[22:42:26] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[22:43:31] <amidvidy> that's really cool. gotta love features that reduce boilerplate. 
[22:43:37] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[22:44:06] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[22:44:46] <amidvidy> updated the gist btw. thanks for the help, I'll be back later when I have more questions :)
[22:44:48] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[22:45:16] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:46:32] *** Quits: amidvidy (Mibbit@moz-B043471E.airbears.berkeley.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:47:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:48:53] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:49:06] *** Quits: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca) (Ping timeout)
[22:50:20] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:50:21] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[22:50:40] *** Joins: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca)
[22:52:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:53:26] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:53:26] *** ChanServ sets mode: +ao dherman dherman
[22:53:35] *** Joins: lennart (lennart@moz-DE70D6F.stanford.edu)
[22:54:01] *** Quits: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP) (Quit: Leaving.)
[22:54:25] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[22:54:36] <lennart> is there a way to get the inner data out of a RWArc once only a single task has a reference to it?
[22:54:36] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[22:56:02] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:56:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:56:38] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[22:57:06] <pyon> lennart: It is expensive to copy/clone right?
[22:57:08] <kimundi> lennart: afaik it has a unwrap method
[22:57:28] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[22:57:47] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:58:18] <lennart> pyon: yes, if I have a RWArc around a large ~[] then it would be nice to just transfer ownership out of the RWArc when it can no longer be modified
[22:59:05] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[22:59:06] <pyon> kimundi: lennart: I see no .unwrap() method in the documentation.
[22:59:14] <pyon> lennart: But you can .read() and .write() with full confidence that it will never block! :-)
[22:59:15] <kimundi> hmm
[22:59:37] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[22:59:41] <pyon> .unwrap() would make sense - fail if the RWArc is not the unique reference.
[23:00:20] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:00:54] <lennart> at least in my use case, I think I'd actually want to block until all other tasks release their copy of the RWArc
[23:00:56] <pyon> Or, rather, wait until all users (readers or writers) end their business, and then fail if the RWArc is not the unique reference.
[23:01:11] <pyon> s/all users/all other users/
[23:01:18] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[23:01:21] <kimundi> Last time I looked into the implementation of a Arc, it had aunwrap... but that might have been UnsafeArc, aka the basic implementation
[23:01:30] <pyon> lennart: Yeah.
[23:01:45] <pcwalton> locks are really bad when they're contended
[23:01:54] <pcwalton> (and I don't mean Rust locks, I mean locks)
[23:01:54] <pyon> kimundi: I do not see any .unwrap() there either.
[23:03:49] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:03:50] <kimundi> maybe it got removed in the meantime, dunno :|
[23:03:57] <pyon> Mmm... Sorry to bring up a question I made long ago that might have already been answered (I got disconnected and had to restart my client), but... is the notion of lifetime intrinsically tied to borrowed pointers, or can I make, say, a custom Arc that is guaranteed to not exceed a certain lifetime?
[23:04:00] <lennart> pcwalton: right, I understand. I was just hoping to be able to compare performance with an implementation using SharedChan
[23:04:22] <sfackler> pyon: lifetimes don't really make sense across multiple tasks
[23:04:29] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[23:05:04] <sfackler> though I may not be thinking of your use case
[23:06:20] *** Joins: findow (Mibbit@moz-E04F0C73.dyn.user.ono.com)
[23:06:47] <pyon> sfackler: I have some sort of container, which is shared across child tasks using a MutexArc. And I want tasks to coordinate their use of the elements of this container (manipulated using RWArcs), in a way that guarantees that the RWArcs to the elements never live longer than the MutexArc to the container.
[23:07:05] *** Quits: findow (Mibbit@moz-E04F0C73.dyn.user.ono.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:07:54] <sfackler> ah, I'd avoid using Arcs entirely for the elements then
[23:08:16] <sfackler> and have the container return borrowed references to the elements directly
[23:08:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:09:01] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[23:09:05] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[23:09:15] <pyon> sfackler: Actually, the very operation of getting an element can modify the container.
[23:09:18] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:09:56] <pyon> Anyway, I guess I shall post code.
[23:09:57] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[23:10:48] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[23:10:54] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[23:11:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:13:40] *** Quits: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP) (Quit: Leaving...)
[23:14:07] *** Joins: new_one (new_one@27570337.92B2BFC6.B3C0173E.IP)
[23:15:11] <stephenmac7> This section doesn't make sense to me: http://static.rust-lang.org/doc/master/tutorial.html#destructors
[23:15:32] <stephenmac7> How do I use a destructor and what does `~` do?
[23:15:32] <steveklabnik> stephenmac7: which part
[23:15:38] <steveklabnik> ah
[23:15:47] <steveklabnik> so, to use a destructor, you implement the Drop trait
[23:15:48] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[23:15:58] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[23:16:02] <steveklabnik> which isn't documented there, mind you
[23:16:15] <steveklabnik> ~ is an owned pointer: http://static.rust-lang.org/doc/master/tutorial.html#ownership
[23:16:21] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:16:22] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:16:36] <steveklabnik> and http://static.rust-lang.org/doc/master/tutorial.html#more-on-boxes
[23:17:18] *** Quits: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca) (Quit: This bear's gotta fly.)
[23:17:27] *** Quits: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP) (Ping timeout)
[23:17:29] *** Joins: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca)
[23:18:05] <stephenmac7> steveklabnik: So, why would we use `~` here: let a = Foo { x: 5, y: ~10 };
[23:18:06] <pyon> Is there any convenient macro like println!, but for writing to stderr?
[23:18:18] <steveklabnik> stephenmac7: it's an example, in real life, you wouldn't
[23:18:23] <steveklabnik> pyon: i believe debug! does
[23:18:30] <sfackler> pyon: you can use write! with a stderr writer as well
[23:18:30] <pyon> steveklabnik: Thanks!
[23:18:39] <steveklabnik> stephenmac7: there is a full pointer guide here: http://static.rust-lang.org/doc/master/guide-pointers.html
[23:18:40] <stephenmac7> But why would you have a pointer to a literal?
[23:18:46] <steveklabnik> you wouldn't.
[23:18:53] <pyon> sfackler: Well, writeln!(&stderr(), "...") all over the place is kind of... annoying.
[23:19:03] <sfackler> yeah
[23:19:13] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[23:19:15] <sfackler> you can always write a macro to do it for you
[23:19:36] <sfackler> though I believe that stderr() is nontrivially expensive to call so you'd probably want to save it off
[23:20:27] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:20:32] <pyon> sfackler: In main(), and then share it with all other tasks using a MutexArc? :-O
[23:20:46] <sfackler> pyon: probably not _that_ expensive :P
[23:21:01] <pyon> lol
[23:21:05] <sfackler> I think there's a per-task stderr writer that you can get at somewhere
[23:21:06] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[23:21:13] <pyon> Ah, makes sense.
[23:21:53] <stephenmac7> steveklabnik: Wouldn't it just be easier to create a new version of whatever you're pointing to?
[23:21:56] <sfackler> pyon: there's some talk about how expensive it is here: http://static.rust-lang.org/doc/master/std/io/stdio/fn.stdout.html
[23:22:18] <steveklabnik> stephenmac7: in what context?
[23:22:18] <sfackler> it's not crazy, but worth noting in case you're planning on dumping tons of stuff
[23:22:24] *** Joins: seich (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[23:22:41] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[23:22:45] <pyon> :-O
[23:22:51] <stephenmac7> For example, if you had a function which modified a struct, wouldn't it be better to just reassign the original struct to a new one?
[23:23:06] <pyon> Then perhaps println! is similarly expensive?
[23:23:21] <sfackler> pyon: I don't think so?
[23:23:23] <sfackler> maybe it is
[23:23:39] <sfackler> I mean, you're making a system call do do the write anyways
[23:23:45] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:23:45] <sfackler> so it probably doesn't matter a ton
[23:24:05] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:24:49] <stephenmac7> steveklabnik: Or, for the sake of simplicity, a point
[23:25:02] <steveklabnik> if the struct is small, sure
[23:25:14] <steveklabnik> if you have a large amount of data, that may not be great perforamance-wise
[23:25:27] <stephenmac7> Oh, so it's about the performance?
[23:25:50] <stephenmac7> Then how does Haskell achieve such performance?
[23:26:06] *** Quits: marianoguerra (marianogue@moz-C6801CB6.dip0.t-ipconnect.de) (Ping timeout)
[23:26:28] <steveklabnik> It Depeds
[23:26:59] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:27:11] <steveklabnik> Depends
[23:27:11] <mitsuhiko> stephenmac7: it's about control not performance
[23:27:12] <aatch> Haskell is *logically* immutable, it can do whatever it wants behind-the-scenes as long as still looks the same
[23:27:15] *** Joins: crail (crail@moz-D7728DCD.dhcp.insightbb.com)
[23:27:22] <steveklabnik> exactly
[23:27:24] <mitsuhiko> haskell language wise is allowed to do a bunch of things
[23:27:33] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:27:48] <mitsuhiko> rust intentionally does not do that, it instead trusts you to know better
[23:28:05] <stephenmac7> Ah. I liked that aspect of Haskell... oh, well.
[23:28:24] *** Quits: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com) (Ping timeout)
[23:28:25] <aatch> stephenmac7, Haskell is not a systems language, Rust is.
[23:28:59] <stephenmac7> So, Rust is more similar to C
[23:29:03] <FreeFull> Haskell does a lot of boxing and sharing
[23:29:06] <mcpherrin> Also C is purely functional
[23:29:07] <Earnestly> (Haskell is also lazy)
[23:29:17] <aatch> stephenmac7, correct
[23:29:22] <stephenmac7> C is not purely functional
[23:29:33] <mcpherrin> C is purely functional and interpreted.
[23:29:42] <FreeFull> C doesn't even have closures
[23:29:48] <aatch> mcpherrin, stop being faecitious
[23:29:53] <mcpherrin> It is interpreted by GCC, which takes a set of compiler arguments and produces an assembly program
[23:29:56] * mcpherrin goes back to work
[23:30:04] <mitsuhiko> stephenmac7: rust is closer to c++ than haskell :)
[23:30:05] <FreeFull> mcpherrin: Well, there are C interpreters
[23:30:09] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[23:30:12] <FreeFull> That aren't GCC, and don't compile
[23:30:30] <aatch> Technically the compiled code is interpreted, by the processor.
[23:30:32] <stephenmac7> mitsuhiko: I see. And is it even more similar to Go?
[23:30:33] <FreeFull> mitsuhiko: I wouldn't say Rust is that close to the mess that C++ is
[23:30:34] <aatch> It's all just semantics.
[23:30:38] <aatch> stephenmac7, not really.
[23:30:39] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:30:41] <mitsuhiko> stephenmac7: god now
[23:30:42] <mitsuhiko> *no
[23:30:43] <FreeFull> Go is weak
[23:30:55] <mitsuhiko> FreeFull: just because c++ is a mess does not mean it's bad :)
[23:30:55] <stephenmac7> I couldn't tell much difference between the two
[23:31:00] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Quit: Konversation terminated!)
[23:31:09] <mitsuhiko> stephenmac7: go and rust have pretty much nothing in common
[23:31:10] <FreeFull> mitsuhiko: It is bad, just not the standard kind of bad
[23:31:30] <mitsuhiko> FreeFull: and yet no language could replace it for years and years
[23:31:32] <stephenmac7> mitsuhiko: Really?
[23:31:32] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[23:31:35] <aatch> stephenmac7, well Rust has a stronger type system, no garbage collector, strong memory management.
[23:31:46] <mitsuhiko> stephenmac7: what feature overlaps between rust and go?
[23:31:48] <aatch> The region system is unique in industry languages.
[23:31:57] <eibwen> some kind of automatic type inferrence
[23:32:02] *** jorendorff is now known as jorendorff_away
[23:32:07] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[23:32:11] <eibwen> the fact that both are relatively new
[23:32:21] <stephenmac7> mitsuhiko: Strongly typed, Concurrency, Pointers
[23:32:26] <aatch> The only commonality between Rust and Go is that they're both new-ish natively compiled languages.
[23:32:42] *** Joins: dbaupp (Thunderbir@F99D8787.D5A1DCF.37681C44.IP)
[23:32:57] <mitsuhiko> stephenmac7: the type systems of go and rust couldn't be father apart, same with the pointers :)
[23:33:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:33:07] <aatch> stephenmac7, so "concurrency" is a bit wishy-washy.
[23:33:17] <mitsuhiko> by that java and c# are just like go :)
[23:33:30] <aatch> Since almost every language has "concurrency" in some form or another.
[23:33:44] <aatch> And Rust doesn't actually have any language-level support specifically for it anyway.
[23:33:47] <stephenmac7> Okay, then let me ask it this way: What market is Rust aiming for?
[23:33:59] <mitsuhiko> stephenmac7: frustrated c++ developers
[23:34:03] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[23:34:05] <FreeFull> Go claims to be a replacement for C++, but isn't really
[23:34:15] <Earnestly> Really, it claims that?
[23:34:16] <stephenmac7> So, they both claim the same goal?
[23:34:16] <bascule> mitsuhiko: Rust is a high-level systems programming language. Go is a low-level managed language runtime ;)
[23:34:19] <aatch> stephenmac7, C/C++ developers looking for more safety without sacrificing performance.
[23:34:37] <kimundi> stephenmac7: Rusts goal is to be good at things C++ is good at, while providing memory safety per default
[23:34:38] <mitsuhiko> calling go a c++ replacement is bold :)
[23:34:39] <aatch> Go fails on the second part, btw.
[23:34:44] <Earnestly> stephenmac7: Go is for servers, rust for kernels.  there's your goals
[23:34:50] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[23:34:54] <Earnestly> (Or embedded)
[23:35:05] <stephenmac7> How well does Rust use existing C++ libraries?
[23:35:05] <bascule> Rust is good for servers too :P
[23:35:11] <mitsuhiko> stephenmac7: badly
[23:35:18] <mitsuhiko> but that's true for c++ as well
[23:35:23] <aatch> Everything uses C++ libraries badly.
[23:35:28] <mitsuhiko> many c++ libraries have a c abi
[23:35:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:35:32] <pjenvey> go's aim was to replace c/c++/java but it's somewhat failed at that goal, a lot of ruby/pythoners/even js folk have adopted it
[23:35:34] <FreeFull> Rust is general purpose. It seems originally it wasn't thought that it'd be suitable for kernels (but it has evolved into something that is)
[23:35:35] <mitsuhiko> which you can use very well with rust
[23:35:38] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[23:35:54] <FreeFull> I'd be happy writing anything in Rust once the language hits 1.0
[23:35:56] <bascule> Go's lack of memory safety means it falls victim to a whole class of data races and shared mutation problems to which Rust isn't susceptible
[23:36:12] <dbaupp> Earnestly: rust is "actually" being designed for browsers (which are essentially kernels atm, anyway)
[23:36:14] <mcpherrin> pjenvey: I don't know if it's really failed:  It is well engineered and is suitable for writing enterprisey apps
[23:36:20] <Earnestly> dbaupp: ikr heh
[23:36:27] <bascule> "share by communicating" is just handwavey advice in Go. It's not enforced by the language
[23:36:28] <FreeFull> It'd be nice if Rust did have something equivalent to STM
[23:36:33] <pjenvey> mcpherrin - I just mean it hasn't exactly stolen a lot of say c++ developers
[23:36:43] <bascule> FreeFull: you can write an STM in Rust! :O (oh god...)
[23:36:44] <eibwen> STM
[23:36:45] <Earnestly> dbaupp: But yeah, not very much between the language and the machine
[23:36:50] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[23:37:08] <stephenmac7> mitsuhiko: Qt has no C API, right?
[23:37:10] <pjenvey> some C/java for sure, but seems more successful at grabbing dyn lang folks who demand better performance/concurrency
[23:37:14] <FreeFull> bascule: I'm no wizard
[23:37:30] <dbaupp> Earnestly: yup
[23:37:34] <aatch> stephenmac7, and? you seem to be changing the topic.
[23:37:46] <mcpherrin> I hear it's replaced a bunch of c++ sevices inside Google which seems like acting as designed
[23:37:48] <aatch> There is no language that can interface well with C++
[23:37:53] <FreeFull> I'd leave writing an STM implementation to someone who is already very familiar with implementing STM
[23:37:57] <pyon> How do I mutate a component of a mutable tuple?
[23:38:02] <stephenmac7> aatch: I'm trying to figure out whether I should invest my time into learning Rust rather than Go
[23:38:12] <aatch> stephenmac7, it depends on what you want to do.
[23:38:13] <mitsuhiko> stephenmac7: not at all, no
[23:38:14] <FreeFull> aatch: C++ is harder to interface with than C
[23:38:14] <bascule> FreeFull: seems good, someone will probably write one eventually
[23:38:21] <pjenvey> bascule - apparently go has a fairly nice race detector, of course that's only going to help some of the time
[23:38:34] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[23:38:34] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:38:37] <bascule> FreeFull: even in languages with good STM support (e.g. Clojure) I haven't actually found myself wanting one
[23:38:42] <sfackler> pyon: you can get a reference to the component like "let (_, ref mut thing, _, _) = my_tuple"
[23:38:44] <aatch> If it's "using C++ libraries" then just use C++.
[23:38:49] <bascule> pjenvey: race detector <<<< making sure races can't happen
[23:38:49] <pyon> aatch: FreeFull: C++ is easy to interface with - the onus ought to be on the C++ developer to provide a C-callable interface.
[23:38:53] <sfackler> and then do "*thing = 10" or whatever
[23:38:53] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[23:39:03] <pyon> sfackler: Ah!
[23:39:08] <FreeFull> bascule: STM is at its best in Haskell
[23:39:10] <mitsuhiko> pyon: c abis and fake com is the only thing that makes sense for c++ libraries anyways
[23:39:12] <bascule> pjenvey: what if the race only happens in production? or only sporadically?
[23:39:15] <stephenmac7> aatch: Except I can't take C++
[23:39:29] <pyon> mitsuhiko: Sad, but true.
[23:39:36] <FreeFull> Rust does allow IO everywhere, so that would be a problem with implementing STM
[23:39:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:40:21] <pjenvey> bascule - that's one of those cases where it's not going to really do it
[23:40:28] <mitsuhiko> lock elision sounds a lot more practical than STM
[23:40:35] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[23:40:35] <pjenvey> vs a more mature type system with better safety guarantees
[23:41:09] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[23:41:19] <stephenmac7> aatch: Okay, so besides writing a kernel (which I have absolutely no interest in), what's rust good for?
[23:41:22] *** Parts: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) ()
[23:41:25] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:41:31] *** Joins: Jesin (Jesin@moz-A43618DF.res.lehigh.edu)
[23:41:41] <Earnestly> stephenmac7: You know what C++ is used for?  That :p
[23:41:56] <copumpkin> a lot of what C++ is used for, it shouldn't be used for :)
[23:42:07] <bascule> stephenmac7: I'd like to use Rust to write a database/distributed filesystem thingy
[23:42:17] <pyon> stephenmac7: Writing systems where garbage collection ought to be avoided, but you still want memory safety, preferably of the compile-time-enforced kind.
[23:42:26] <Earnestly> Game development as well
[23:42:29] <mcpherrin> Anything you care about memory layout, performance, L2 cache hits ... databases, anything real-time, high performance trading apps..
[23:42:41] *** Quits: hoverbear (hoverbear@moz-A73BC514.wireless.uvic.ca) (Quit: Taking a nap.)
[23:42:43] <copumpkin> that last one could be fun
[23:42:44] <pyon> bascule: I am as a matter of fact trying to make a toy DBMS.
[23:42:53] <bascule> fun!
[23:43:09] <mcpherrin> My experience is in databases and operating systems and network code, all of which Rust feels pretty good for.
[23:43:16] <stephenmac7> pyon: Only thing I can think of where garbage collection should be avoided is games
[23:43:21] <stephenmac7> And realtime systems
[23:43:28] <copumpkin> stephenmac7: and HFT systems :P
[23:43:32] <cmr> browsers :)
[23:43:42] <pyon> stephenmac7: Anything where you cannot tolerate arbitrarily long pauses.
[23:43:46] *** Joins: sammykim_ (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[23:43:51] <Earnestly> cmr: That's like saying "all of the above"
[23:43:54] <mitsuhiko> stephenmac7: everything c++ is good for and many of the things where python is useful for
[23:43:57] *** Joins: yuriks (yuriks@54B2E07B.1611DED.F6EE4B40.IP)
[23:44:01] <cmr> That's where rust *excels*, though, not just where it's good.
[23:44:12] <cmr> (soft realtime, that is)
[23:44:15] <stephenmac7> Python and Haskell are the only languages I currently know
[23:44:21] <stephenmac7> Oh, and C++
[23:44:22] <pyon> Basically, Rust is what C++ should have been all along.
[23:44:35] <cmr> I don't think that's true at all, but I won't argue with it :p
[23:44:51] <stephenmac7> cmr: If you were to argue, what would you say?
[23:45:00] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:45:06] <mcpherrin> I think C, Rust, Go, Python, Haskell is a reasonable set of languages to accomplish most modern computing tasks in
[23:45:13] <stephenmac7> pyon: GUI development?
[23:45:23] <mcpherrin> eugh probably Bash too but I hates it :)
[23:45:28] <pyon> stephenmac7: No idea. I do not do much of that.
[23:45:47] *** Joins: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net)
[23:45:47] <stephenmac7> mcpherrin: Thanks
[23:46:01] <cmr> stephenmac7: well, in particular we have no answer to templates, or some of the more crazy things it does.
[23:46:02] <stephenmac7> That's the type of answer I was looking for
[23:46:18] <cmr> pointer-to-member among them.
[23:46:20] <stephenmac7> cmr: I've never needed to use templates before, so nothing to worry about there
[23:46:27] <cmr> stephenmac7: rust is great then!
[23:46:29] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[23:46:36] <mitsuhiko> but templates are the best thing in c++!
[23:47:01] <mcpherrin> Templates in C++ are a bit crazy
[23:47:09] <pyon> cmr: I have never found a situation where pointer-to-member is obviously (or even non-obviously!) the right thing. The only thing I miss from C++ templates is compile-time dimensional analysis, which requires int-parametrized templates.
[23:47:35] <cmr> pyon: we used it for a templatized database driver.
[23:47:41] <mcpherrin> I'd like to see a dimensional analysis syntax extension in Rust
[23:47:42] <cmr> it was very... compact code.
[23:47:50] <pyon> :-O
[23:47:51] *** Quits: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[23:47:52] <cmr> some of the densest code I've seen in c++
[23:47:54] <stephenmac7> But when would you use C rather than Rust?
[23:48:01] <Hildar> Hmm, if I import a module in two other modules, the compiler throws a fit because they are different types (foo::baz::Msg and bar::baz::Msg). Is there a simple way around this I am missing?
[23:48:05] <cmr> stephenmac7: when there's no LLVM toolchain for your platform yet :)
[23:48:13] <cmr> stephenmac7: Rust is what I am replacing C with.
[23:48:19] <mcpherrin> stephenmac7: I'd still rather use C on my embedded devices with 1024 bytes of ram :)
[23:48:19] <cmr> Hildar: you're not importing the module twice.
[23:48:24] <stephenmac7> cmr: Ah. Wait... rust compiles to LLVM?
[23:48:32] <cmr> stephenmac7: yes.
[23:48:39] <stephenmac7> I never knew that!
[23:48:45] <stephenmac7> What a pleasant surprise
[23:48:48] <cmr> mcpherrin: why? what does it give you that C doesn't?
[23:48:52] <cmr> s/C/Rust/
[23:49:07] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:49:13] <mitsuhiko> cmr: compilers for embedded devices
[23:49:18] <stephenmac7> But yes, there are a few things which I program that only support C and Java
[23:49:27] <stephenmac7> Why you would support only Java, I have no idea
[23:49:27] <mcpherrin> cmr: Horrible code with a fixed stack and gotos everywhere :-)
[23:49:36] <cmr> mcpherrin: oh, yeah, we don't have gotos.
[23:49:39] <cmr> forgot about those!
[23:49:41] <Hildar> cmr: Hmm, okay. So how should I do it sorry?
[23:49:44] <stephenmac7> I never used gotos
[23:49:49] <cmr> (fixed stack isn't an issue though, I don't think)
[23:49:52] <mcpherrin> cmr: Once you get above about 2k of ram, I'm onboard for rust :)
[23:49:55] <stephenmac7> They make things terribly messy
[23:49:59] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:50:12] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[23:50:14] <mitsuhiko> stephenmac7: only if you abuse them
[23:50:16] <cmr> Hildar: one sec sorry.
[23:50:21] <mitsuhiko> you can't avoid them in c code
[23:50:23] <stephenmac7> Well, at this point, I'm sold.
[23:50:26] <cmr> (I agree with that, I think goto is very elegant in C)
[23:50:29] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[23:50:48] <stephenmac7> But, why did you include Go in your list, , mcpherrin
[23:51:17] <stephenmac7> What does it do well, in comparison with the other languages you listed?
[23:51:19] <yuriks> I think integer template parameters are the thing I miss the most from C++
[23:51:25] <mcpherrin> stephenmac7: Lots of library support, a very fast compiler, good tooling.
[23:51:38] <cmr> Hildar: so the thing is, that having `mod foo;` twice includes two *entirely separate copies* of `foo`.
[23:51:41] <stephenmac7> So, basically what python has, without the compiler?
[23:51:46] <cmr> Hildar: not referencing the same module twice.
[23:51:54] <cmr> Hildar: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[23:52:13] <cmr> Hildar: the canonical way is `mod foo;` in the crate root, and then `use foo` in submodules which want to use it.
[23:52:33] *** Quits: Ferreus (ferreus@moz-B4B2FD53.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[23:52:52] <Hildar> cmr: "use foo", gah. That would be it. Thank you for the help.
[23:52:53] <stephenmac7> cmr: Oh, and I don't think I'll be making a browser anytime soon
[23:53:00] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[23:53:05] <mcpherrin> I don't actually think Rust is that good for writing a browser :p
[23:53:06] <stephenmac7> Although I wonder how mozilla benefits if they're not rewriting firefox
[23:53:21] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:53:22] <stephenmac7> Why is this a mozilla project anyway?
[23:53:24] <dbaupp> mcpherrin: in what way?
[23:53:36] <dbaupp> stephenmac7: they're using it for an experimental rendering engine: Servo
[23:53:46] <stephenmac7> dbaupp: Ah, I see.
[23:53:57] <kimundi> Hm, it occurs to me that for introductionary material, we can reduce our explanation of the module system to unnested crate-root mod statements only - then have the full guide for when you need to know more
[23:53:58] <mcpherrin> dbaupp: The data structures in the DOM strike me as having lots of loop-de-loops, fractured and complicated lifetimes
[23:54:20] <mcpherrin> Maybe it's just that writing a browser is a hard problem.
[23:54:30] <cmr> kimundi: probably yeah.
[23:55:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:55:06] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:55:36] *** Quits: eibwen (kvirc@moz-EB6024B9.dip0.t-ipconnect.de) (Ping timeout)
[23:55:43] <stephenmac7> Earnestly: So, how would you go about writing a game in rust?
[23:55:49] <Matthias247> somehow rexporting a custom Chan or Port through pub use mypackage::{Chan,Port}; doesn't seem to work. It get's ignored  and the standard types are used
[23:56:14] <stephenmac7> I personally have never written a game, although I always thought it would be interesting to. Both Python and Haskell aren't exactly suited for the job
[23:56:24] <cmr> Matthias247: used how?
[23:56:26] *** Quits: squiddy (squiddy@moz-953631F8.adsl.alicedsl.de) (Quit: Leaving)
[23:56:28] <LinearInterpol> Someone ping me in here?
[23:56:48] <mitsuhiko> stephenmac7: see topic in #rust-gamedev
[23:56:50] <cmr> Matthias247: you might just be using reexports wrong.
[23:56:51] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:57:00] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:57:01] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:57:09] <stephenmac7> mitsuhiko: Oh! Thanks!
[23:57:11] <Matthias247> cmr: I export it through my library. And already getting the dead code analysis that the methods of this types are never used
[23:57:15] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[23:57:20] *** Quits: nkoep (nik@moz-7A3C96ED.pool.mediaways.net) (Quit: Leaving)
[23:57:33] <Matthias247> and if I try to use MyCrate::Port then it gives me an error that it doesn't exist
[23:57:44] <mitsuhiko> can you get rustpkg to track changes on dependencies?
[23:57:49] <cmr> Matthias247: and you have the pub use in your crate root? can you make a minimalized testcase?
[23:57:50] <stephenmac7> Now I have a good reason to learn rust: Being able to write games in a language that's actually coherent
[23:57:50] <Matthias247> it works for all my other types. Only for Port and Chan not
[23:57:55] <cmr> oh
[23:57:57] <mitsuhiko> eg: when i do a test run it does not just recompile the testsuite but also the library it's based on
[23:57:57] <stephenmac7> *excuse
[23:57:59] <cmr> weird.
[23:58:19] <Matthias247> yup
[23:58:25] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Connection reset by peer)
[23:58:34] <Matthias247> I'll try to make a test case and file an issue
[23:58:39] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:58:40] <stephenmac7> Thanks you all!
[23:58:43] <stephenmac7> *to you
[23:58:51] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[23:59:17] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[23:59:26] <cmr> mitsuhiko: unlikely.
[23:59:59] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
