[00:00:02] <ktt3ja> would it work if I use the version from say, September 26?
[00:00:37] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:00:50] *** Quits: scabaloo (student@BF59A32.8FFBE666.DDE5D3F6.IP) (Ping timeout)
[00:03:50] *** Quits: dbaupp (Thunderbir@CE33C7D9.D5A1DCF.37681C44.IP) (Ping timeout)
[00:03:59] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:05:59] *** Quits: schnozzle (Mibbit@moz-C90ADB43.consolidated.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:06:58] *** Joins: scabaloo (student@BF59A32.8FFBE666.DDE5D3F6.IP)
[00:07:32] <zws3mb> meanwhile, someone has hacked facebook?
[00:07:55] *** Quits: mr_pants (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:08:04] *** Quits: ambimorph (amber@moz-B376C52.hlrn.qwest.net) (Ping timeout)
[00:08:33] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:09:12] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:09:12] *** ChanServ sets mode: +ao dherman dherman
[00:09:25] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:10:18] *** Quits: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP) (Ping timeout)
[00:10:59] *** Joins: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net)
[00:12:06] <mletterle> things work a lot better when you define your structs with the right field types
[00:12:09] *** Quits: aeqwa (aeqwa@moz-72E4D83F.dsl.tropolys.de) (Client exited)
[00:16:00] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:16:58] *** Joins: Amaranth (travis@moz-7D905691.avante-wifi.mozilla.hq)
[00:17:18] *** Quits: ktt3ja (Mibbit@moz-E15150E3.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[00:17:20] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:17:41] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:18:44] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[00:19:27] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:19:30] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[00:19:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:20:00] *** Quits: skeet70 (skeet70@moz-76203F31.bzm-mt.client.bresnan.net) (Connection reset by peer)
[00:21:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:21:32] *** Quits: ah3da (Mibbit@moz-2F028CB9.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[00:23:21] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:23:38] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:23:38] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:23:57] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[00:25:06] <etrepum> does Rust have something like Haskell's Enum typeclass? Specifically, I'm looking for toEnum and fromEnum (the rest can be built from that)
[00:25:18] <strcat> not yet
[00:25:31] <kmc> I believe you can do "as int" on a C-like enum (one with no data in any of the ctors)
[00:25:35] <kmc> but not the other direction
[00:25:35] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[00:26:02] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:26:09] <strcat> kmc: fromEnum/toEnum are basically iter::range
[00:26:23] <strcat> but more generic
[00:26:31] <strcat> since it'd work for non-numbers like char
[00:26:35] <kmc> i think you're thinking of enumFrom and enumTo
[00:26:42] <strcat> ah right
[00:26:47] <kmc> fromEnum / toEnum convert between an enum type and Int
[00:27:02] * strcat blames haskell for giving everything the same name :)
[00:27:05] <kmc> haha
[00:27:19] <kmc> just be glad we're not discussing the differences between <$> <$ <*> <* *>
[00:28:09] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Quit: alan)
[00:28:32] <zws3mb> Is there a fundamental difference between the Some branch of Some/None and unwrap() for Options?
[00:28:57] <kmc> unwrap() is a function that unwraps a Some(x) to x, and crashes on None
[00:29:00] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[00:29:25] <kmc> it's like a match where the None branch is a fail!()
[00:29:45] <kmc> if you want to provide a useful error message then use .expect("useful error message")
[00:30:01] *** Joins: adu (ajr@moz-60B25736.washdc.fios.verizon.net)
[00:30:13] <mletterle> this might be basic, but I'm lazy.. getting the length of a vector?
[00:30:19] <zws3mb> I'm having trouble with closures and moved data--I need to call a method on something and then send it somewhere else
[00:30:24] <zws3mb> mletterle: .len()
[00:30:47] <kmc> zws3mb: can you pastebin the problematic code?
[00:30:58] <mletterle> yeah, just found it hehe thanks zws3mb 
[00:31:12] <kmc> zws3mb: often we need to create a Cell::cell() and then .take() it within the closure, in order to move the value somewhere else
[00:31:29] <kmc> rustc doesn't let you move out of a closure, because it doesn't know that the closure won't be called a second time
[00:31:56] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:32:52] *** Joins: Florob (Florob@moz-39532932.de)
[00:33:28] *** Joins: asdf (wil@moz-94FC8FEB.bootp.virginia.edu)
[00:35:25] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:35:40] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:36:05] <asdf> Question: I'm using std::run to create a new process, and am trying to write to and read from its in_fd and out_fd writer and reader, respectively. The write appears to work the first time I do it (at least, no error is raised), but the read returns zero data, and the second time I try to write, I get a "Broken Pipe" error. Is this a known issue?
[00:37:20] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:37:30] <etrepum> strcat: non-numbers are my use case, numbers are easy :)
[00:38:04] <zws3mb> kmc, http://pastebin.com/F8a8PfLB 
[00:40:38] <asdf> Never mind. I seem to have resolved that.
[00:40:41] *** Quits: asdf (wil@moz-94FC8FEB.bootp.virginia.edu) (Quit: leaving)
[00:41:45] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:42:48] *** variable is now known as doctor
[00:44:17] *** Joins: jstevans (Instantbir@939D9860.1A99F5FD.DDE5D3F6.IP)
[00:45:33] *** Quits: berleon (leon@moz-31E2432D.superkabel.de) (Input/output error)
[00:46:45] *** Quits: scabaloo (student@BF59A32.8FFBE666.DDE5D3F6.IP) (Client exited)
[00:50:33] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[00:57:41] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[00:59:53] *** Joins: calatalee (Mibbit@moz-2F028CB9.bootp.virginia.edu)
[00:59:57] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[00:59:59] <acrichto> aww we lost our definition of "Archimedes' staticant"
[01:00:32] <pcwalton> brson: r? https://github.com/mozilla/rust/pull/10132
[01:01:19] <calatalee> what's the easiest way to mirror a webpage?
[01:01:29] <pcwalton> wget has a --mirror mode I think
[01:01:45] *** Quits: joby (Mibbit@moz-1DB2769A.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[01:02:08] *** Quits: miloshadzic (miloshadzi@40469481.F705985F.CC0F3526.IP) (Quit: Textual IRC Client: www.textualapp.com)
[01:02:15] *** Joins: scabaloo (student@BF59A32.8FFBE666.DDE5D3F6.IP)
[01:02:20] <kmc> I usually do wget -r -p -np
[01:02:50] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[01:03:56] *** Joins: alisdair (textual@moz-B330C8FB.vc.shawcable.net)
[01:04:37] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[01:05:01] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[01:06:39] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:07:01] *** Quits: adu (ajr@moz-60B25736.washdc.fios.verizon.net) (Quit: adu)
[01:09:32] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[01:12:31] *** Joins: flabbers (Mibbit@moz-1DB2769A.bootp.virginia.edu)
[01:12:40] *** Joins: dbaupp (Thunderbir@CE33C7D9.D5A1DCF.37681C44.IP)
[01:12:46] <flabbers> is there a standard queue inside the rust library?
[01:13:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[01:13:03] <cmr> flabbers: vectors have push and pop
[01:13:25] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[01:14:16] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:15:02] <McPherrin> Does the rust-lang doc search not work on items less than 4 chars?
[01:15:07] <McPherrin> makes searching for "pop" hard :P
[01:15:52] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[01:15:53] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[01:16:41] <flabbers> McPherrin: wow. ive been using rust for several weeks now. i didnt see the search bar till now haha
[01:17:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[01:17:14] <zws3mb> McPherrin: it definitely works on pop =]
[01:17:23] <SiegeLord> It seems a bit flakey
[01:17:39] <SiegeLord> flabbers: The CSS could be made to have it look more invisible ;)
[01:17:57] *** Quits: alisdair (textual@moz-B330C8FB.vc.shawcable.net) (Ping timeout)
[01:18:13] <McPherrin> Typeerror: my parent is undefined
[01:18:18] *** Joins: alisdair (textual@moz-B330C8FB.vc.shawcable.net)
[01:18:22] <McPherrin> If only we could write web code in rust :(
[01:19:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:20:28] *** Quits: RMF (RMF@moz-1EE56143.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[01:21:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:22:23] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[01:22:31] *** Joins: RMF (RMF@moz-1EE56143.dsl.telepac.pt)
[01:22:33] <Ralith> McPherrin: what gives you the idea that you can't?
[01:24:10] *** Quits: alisdair (textual@moz-B330C8FB.vc.shawcable.net) (Ping timeout)
[01:24:13] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[01:24:50] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[01:25:09] *** Joins: mib (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[01:25:45] <mib> how do I write to a file in 0.8? It seems to have changed quite a bit since 0.7
[01:26:11] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[01:26:26] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[01:26:47] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:26:58] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:27:14] *** Quits: nejucomo (Adium@moz-210D09DF.dsl.dynamic.sonic.net) (Quit: Leaving.)
[01:27:23] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[01:27:42] *** Joins: alisdair (textual@moz-DBA2EB65.vc.shawcable.net)
[01:27:58] <steveklabnik> mib: http://static.rust-lang.org/doc/0.8/std/rt/io/index.html
[01:28:00] <steveklabnik> has some examples
[01:28:05] <steveklabnik> let file = File::open("message.txt", Create, Write); file.write_line("hello, file!");
[01:29:41] *** Joins: maik (maik@moz-B2E82E80.dip0.t-ipconnect.de)
[01:31:48] <strcat> flabbers: there's RingBuf (FIFO) and PriorityQueue
[01:33:30] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[01:37:11] *** Quits: mib (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:39:02] *** Quits: alisdair (textual@moz-DBA2EB65.vc.shawcable.net) (Ping timeout)
[01:41:21] *** Quits: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net) (Ping timeout)
[01:42:55] *** Joins: jerikost (Mibbit@moz-B4A13BCF.hsd1.va.comcast.net)
[01:43:11] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:43:16] *** Joins: alisdair (textual@moz-B330C8FB.vc.shawcable.net)
[01:43:23] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[01:43:58] *** jorendorff is now known as jorendorff_away
[01:45:24] *** Joins: adu (ajr@moz-60B25736.washdc.fios.verizon.net)
[01:46:31] *** jorendorff_away is now known as jorendorff
[01:47:33] *** Quits: alisdair (textual@moz-B330C8FB.vc.shawcable.net) (Ping timeout)
[01:50:46] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:51:23] *** Joins: alisdair (textual@moz-B330C8FB.vc.shawcable.net)
[01:51:48] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:51:55] *** Quits: judder (maradukewa@218D70FD.A9DBEB8D.78E362FE.IP) (Ping timeout)
[01:52:40] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:53:06] *** Quits: alisdair (textual@moz-B330C8FB.vc.shawcable.net) (Ping timeout)
[01:53:58] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:54:42] <veddan> How can I read a single utf-8 codepoint into a char from a Reader?
[01:54:43] *** Quits: dbaupp (Thunderbir@CE33C7D9.D5A1DCF.37681C44.IP) (Ping timeout)
[01:57:00] <brson> acrichto: do you know? ^
[01:57:07] *** Joins: locks (uid130@moz-5F4AA75A.irccloud.com)
[01:57:17] <veddan> basically, what ReaderUtil::read_char() used to do
[01:57:39] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[01:58:07] <brson> acrichto: do we not have any string reading at all right now?
[01:59:53] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[01:59:54] *** ChanServ sets mode: +o jdm
[02:01:06] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[02:01:11] <zws3mb> what is 'a
[02:01:19] <steveklabnik> a 'lifetime' with the name a
[02:02:07] <zws3mb> in the documentation, <'a> ....?
[02:02:31] <steveklabnik> http://static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html
[02:02:36] <steveklabnik> yes, it's often that way
[02:02:44] <strcat> acrichto: how exactly are you measuring the speed? just the deltas?
[02:03:02] <acrichto> veddan: currently there is no concept of encoding/decoding utf8 from a reader
[02:03:23] <acrichto> veddan: we're waiting to flesh out the encoding/decoding story
[02:03:24] <strcat> a naive synchronous C client/server does 3393MiB/s
[02:03:55] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[02:03:57] <acrichto> strcat: yeah I was just bumping a global counter with the number of bytes read and then every second reading it and setting it to 0
[02:04:03] <strcat> ah
[02:04:06] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[02:04:11] <acrichto> strcat: how do the rust/go versions compare on your system
[02:04:11] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[02:04:28] <acrichto> brson: we have "read_line()" through a buffered reader, but that's about it
[02:04:50] <veddan> acrichto: Is there an issue to track for this?
[02:05:31] <acrichto> veddan: there should be, let me look
[02:05:41] *** Quits: jerikost (Mibbit@moz-B4A13BCF.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:05:44] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[02:06:01] <acrichto> veddan: https://github.com/mozilla/rust/issues/6164
[02:06:02] <strcat> acrichto: 2042MiB/s for rust
[02:06:32] <acrichto> strcat: could you paste your C code? I'm curious what the profiles look like
[02:06:41] <strcat> sec
[02:06:43] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[02:06:49] <strcat> let me make it a bit less bad first :)
[02:07:05] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[02:08:29] <veddan> acrichto: thanks. reading to str/char seems like a fairly essential feature
[02:08:46] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[02:09:12] <acrichto> veddan: I certainly agree! I personally lean in favor of only defining these methods on a BufferedReader, but it certainly warrants more discussion than that
[02:09:56] *** Quits: doctor (root@1818E56D.5A29975A.67659D25.IP) (Ping timeout)
[02:10:20] *** Joins: doctor (root@1818E56D.5A29975A.67659D25.IP)
[02:11:38] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[02:11:53] *** Joins: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net)
[02:12:04] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[02:13:59] *** Quits: jstevans (Instantbir@939D9860.1A99F5FD.DDE5D3F6.IP) (Ping timeout)
[02:14:04] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:14:13] <brson> I wonder if Port/Chan methods really should take &mut self or not. It seems arguable either way. Maybe they just encapsulate their mutability
[02:14:18] <veddan> acrichto: that seems reasonable
[02:14:43] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[02:14:57] <veddan> acrichto: I guess you'd also wante to consider how to handle other encodings than utf-8 
[02:15:31] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:16:34] *** Quits: heftig (heftig@moz-48934D4B.dip0.t-ipconnect.de) (Ping timeout)
[02:17:16] <mletterle> MUAHAHAHA
[02:18:08] *** Joins: Amaranthus (travis@moz-7D905691.avante-wifi.mozilla.hq)
[02:18:08] *** Quits: Amaranth (travis@moz-7D905691.avante-wifi.mozilla.hq) (Connection reset by peer)
[02:18:52] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[02:19:52] *** Quits: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net) (Ping timeout)
[02:20:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:21:37] *** Quits: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:21:44] *** Quits: tikue_ (tikue_star@A64AE68.28259105.689607DE.IP) (Ping timeout)
[02:22:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:23:26] <mletterle> https://github.com/mletterle/rust-nss rust-http can use NSS ssl.
[02:23:29] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:23:37] <mletterle> now to sleep... perchance to dream...
[02:23:47] <brson> what would be a better name for the current `try_recv` semantics?
[02:23:49] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[02:23:56] *** Joins: peeves (Mibbit@19404F40.4C84EF83.57DA49D3.IP)
[02:24:46] *** Quits: peeves (Mibbit@19404F40.4C84EF83.57DA49D3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:24:52] <acrichto> brson: what are the current semantics?
[02:25:03] *** Quits: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[02:25:16] <mletterle> I hate to steal pcwalton's library name... but his rust-nss hadn't been worked on in a year so...
[02:25:40] <brson> acrichto: block waiting for a message and return `None` when the sender closes the channel without sending
[02:25:48] *** Joins: heftig (heftig@moz-3E10DED1.dip0.t-ipconnect.de)
[02:25:57] <brson> acrichto: https://github.com/mozilla/rust/issues/10138 https://github.com/mozilla/rust/issues/10139
[02:26:02] <McPherrin> mletterle: use rust_nss instead ;)
[02:26:41] <acrichto> brson: right now if you call recv() and the other end hangs up, you fail?
[02:27:08] *** Joins: brendan (brendaneic@moz-DAED2896.public.wayport.net)
[02:27:36] <brson> acrichto: yes
[02:27:46] *** Quits: calatalee (Mibbit@moz-2F028CB9.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[02:27:53] *** Joins: SparkyFlary (kvirc@moz-68CFC82A.lightspeed.irvnca.sbcglobal.net)
[02:28:00] <acrichto> brson: perhaps something returning a Result
[02:28:10] <acrichto> although there's not really an error to shove in there
[02:28:41] *** Joins: tikue_ (tikue_star@A64AE68.28259105.689607DE.IP)
[02:28:51] <brson> maybe we could just call it `recv_opt`
[02:29:43] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[02:30:04] <acrichto> brson: does peek also fail if disconnected?
[02:30:50] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[02:30:57] <brson> acrichto: no, it returns false
[02:31:26] *** Quits: Amaranthus (travis@moz-7D905691.avante-wifi.mozilla.hq) (Quit: Linkinus - http://linkinus.com)
[02:31:28] <acrichto> weird, I would expect peek() to return Option<T>
[02:31:31] <cmr> honestly I don't think we need try_recv
[02:31:37] <cmr> Just have recv return an option
[02:32:03] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[02:32:21] <brson> acrichto: currently calling peek is asking 'will recv succeed?'
[02:32:41] <acrichto> I suppose it's not racy b/c you can't share it
[02:33:02] <brson> that's right
[02:34:02] <acrichto> I'd actually think that peek should return Option<T> and try_recv() should stay
[02:34:24] <cmr> I think try_recv should return Result<T, RecvFailed> where enum RecvFailed { Closed, NoData }
[02:34:49] <brson> acrichto: try_recv should keep the current semantics? I think most people expect it not to block
[02:34:49] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[02:35:13] <brson> cmr: you would still need a blocking recv function that doesn't fail! on close
[02:35:14] <acrichto> brson: true, I kinda like cmr's suggestion
[02:35:24] <acrichto> ah nvmd
[02:35:35] <cmr> brson: well that's what recv would be
[02:35:43] <cmr> (doesn't need to return an option if try_recv covers both cases)
[02:35:46] <ChrisMorgan> I just fixed up the statement in http://stackoverflow.com/a/19052733/497043 referred to earlier; actually, rust-http does not work with Rust 0.8 at all.
[02:35:58] <cmr> ChrisMorgan: I'm not going crazy \o/
[02:36:06] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[02:36:10] <brson> cmr: it would need to return Option if it didn't fail on close - it's got to return something
[02:36:27] <cmr> brson: well it would fail on close. try_recv wouldn't, recv would
[02:36:30] *** Joins: jstevans (Instantbir@C7C8F9FF.362CC69C.B7830B68.IP)
[02:36:38] <ChrisMorgan> Ah, there is so much knowledge shared on this channel that ends up as widely distributed but poorly documented memories...
[02:36:45] <cmr> fn recv(&mut self) -> T, fn try_recv(&mut self) -> Result<T, RecvFailed>
[02:37:01] <cmr> RecvFailed is admittedly a poor name.
[02:37:02] <zws3mb> Is there a simple way to implement Freeze and Send traits for something like PriorityQueue so one could use it with RWArcs?
[02:37:08] <acrichto> streams seem a lot like iterators...
[02:37:15] <brson> cmr: then NoData wouldn't make sense with try_recv because NoData and Closed would mean the some thing. The only way there can be a diff between Closed and NoData is if you get NoData without blocking
[02:37:39] <cmr> zws3mb: you can't implement those traits, the compiler automatically implements them for eligible types.
[02:37:43] <cmr> brson: right, try_recv wouldn't block.
[02:38:19] <brson> cmr: ok. we're going in circles here. if try_recv doesn't block then there's no blocking function that can recover from a closed channel
[02:38:25] <cmr> Oh
[02:38:27] <cmr> Yes
[02:38:33] *** Joins: inspur (inspurhua@54B0D324.D4DDBED4.B3490680.IP)
[02:38:47] <zws3mb> Any way of telling if PriorityQueue would work with a RWArc then..?
[02:38:54] *** Quits: FreeFull (freefull@moz-67BD238E.skybroadband.com) (Ping timeout)
[02:39:19] <ChrisMorgan> RFC: PR renaming src/libstd/std.rs et al. to lib.rs, src/libstd/num/num.rs to mod.rs, and generally fixing up all those paths to be as we now recommend.
[02:39:34] * ChrisMorgan will do it if it's approved of as an idea
[02:39:34] <acrichto> zws3mb: the T of the priority queue must be sendable and freeze
[02:39:48] <brson> ChrisMorgan: +1
[02:39:54] <cmr> ChrisMorgan: also +1
[02:40:04] <ChrisMorgan> OK, PR scheduled for later today.
[02:40:07] <ChrisMorgan> nmatsakis: did you get a chance to look at my augmented-assignment branch?
[02:40:15] <cmr> brson: is it desirable to have a blocking read that can recover from a closed channel?
[02:40:22] <cmr> Well, I suppose it is
[02:40:26] *** Quits: brendan (brendaneic@moz-DAED2896.public.wayport.net) (Quit: brendan)
[02:41:08] <zws3mb> acrichto: sorry, student here--what would make something not sendable/freeze-able
[02:41:35] *** Quits: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[02:41:38] <tikue_> cmr: isn't that try_recv
[02:41:39] <brson> cmr: Well, personally I feel like any message protocol that depends on knowing when the sender closes should use an `End` message, but some people seem to use try_recv for that kind of logic
[02:41:44] *** Parts: SparkyFlary (kvirc@moz-68CFC82A.lightspeed.irvnca.sbcglobal.net) (Once you know what it is you want to be true, instinct is a very useful device for enabling you to know that it is)
[02:41:50] <acrichto> zws3mb: things aren't send if they contain things like @ or &, and freeze just means that you can't modify anything unless the parent is mutable (@mut isn't send, neither is &mut)
[02:42:03] <brson> cmr: recving an `End` message distinguishes that the sender didn't just fail
[02:42:10] <cmr> brson: Right
[02:42:15] <brson> cmr: so maybe try_recv is just a bad smell
[02:42:17] <tikue_> brson: what if it's not the receiver's responsibility to handle failure
[02:43:27] *** Joins: FreeFull (freefull@25F0ABBB.10B8873C.F2A80E0C.IP)
[02:43:28] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[02:44:04] <brson> tikue_: maybe if failure is expected the sender could stil still send a `SorryIAmFailing` message
[02:44:47] <tikue_> the only thing is that explicit End leads to mroe boilerplate code, which can be off-putting
[02:45:23] *** Quits: fyolnish (fyolnish@moz-1F012F61.uqwimax.jp) (Client exited)
[02:45:31] <cmr> IMO try_recv really shouldn't block, that's not what "try" means to me.
[02:45:46] <benh> I just keep confusing try_recv with peek ;)
[02:45:54] <tikue_> cmr: the spawn try { } blocks
[02:46:08] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[02:46:17] <tikue_> so it's congruous 
[02:46:31] <cmr> tikue_: Ideally they wouldn't be.
[02:46:56] <cmr> IMO it's a smell to be using task failure where an Option or Result can work just fine.
[02:47:05] * tikue_ shrugs
[02:47:12] <cmr> (plus it performs poorly)
[02:47:17] *** jorendorff is now known as jorendorff_away
[02:47:22] <kmc> what's the best intro to the new format!()?
[02:47:30] <tikue_> kmc: the python docs :P
[02:47:36] <kmc> ;_;
[02:47:37] <cmr> kmc: the docs: http://static.rust-lang.org/doc/master/std/fmt/index.html
[02:47:54] <kmc> ah, thanks
[02:48:00] <kmc> didn't think of the accompanying module
[02:48:12] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[02:48:49] <tikue_> brson: i'm not opposed to removing try_recv but I think if it is removed then there should be an enum in std::comm 
[02:48:59] <ChrisMorgan> syntax::ext::deriving::{eq, totaleq, ord, totalord} are in src/libsyntax/ext/deriving/cmp/*. What should be done about them? (a) Make them syntax::ext::deriving::cmp::*; (b) Shift them out of the cmp directory; (c) Leave them be, #[path] attribute and all
[02:49:14] *** Joins: tjc (tjc@5DFB91FC.8C350B7C.7C164FC0.IP)
[02:49:14] *** ChanServ sets mode: +o tjc
[02:49:45] <tikue_> brson: enum Msg<T, U> { Data(T), End(U) } or something
[02:49:46] <ChrisMorgan> Ditto for extra::{bigint, rational, complex}, which are stored in a num/ subdirectory. Should they be shifted to extra::num::*?
[02:50:06] <cmr> brson: So after this conversation I think recv should do what try_recv does, and try_recv should be the non-blocking Result I described above.
[02:50:12] <cmr> Although that Msg enum would also work.
[02:50:16] <cmr> tikue_: what would U be?
[02:50:24] <tikue_> cmr: could be anything
[02:50:33] <tikue_> cmr: End might want to pass along some ending value
[02:50:37] <ChrisMorgan> Also a code style question: #[path="..."] or #[path = "..."]?
[02:51:26] <brson> cmr: i was considering that but the common case right now is just `recv` and this would be imposing a `.unwrap` on a lot of code. Is that something we want to do?
[02:51:57] <cmr> brson: I don't mind it, but that's just me.
[02:51:59] <brson> ChrisMorgan: #[path = ""]
[02:52:09] <ChrisMorgan> Good, that's the one I thought.
[02:52:24] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[02:52:26] <brson> ChrisMorgan: syntax::ext::deriving::cmp::*;
[02:52:59] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[02:53:05] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: My lid went down)
[02:53:11] <ChrisMorgan> There are also src/libstd/num/{int,uint,i16,...}.rs, which are in the root of the std crate.
[02:53:54] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[02:54:03] <brson> hm, we should probably leave those exported as std::*
[02:54:08] <brson> right now our std is flat
[02:54:38] <tikue_> cmr: I don't think any of the code in servo uses try_recv. having it be the norm seems like a pretty large burden
[02:54:39] <kmc> rusti: format!("{:b}", true)
[02:54:41] -rusti- ~"true"
[02:54:48] <brson> std/num is a little odd
[02:56:36] <cmr> Are there *any* users of try_recv?
[02:57:03] <Kelvin> If try_recv had the non-blocking functionality that you described, I would totes use it
[02:57:12] <tikue_> cmr: i have some toy code i use it in
[02:57:20] <tikue_> cmr: only because i didn't want to use a msg enum
[02:58:45] *** Joins: ambimorph (amber@moz-B376C52.hlrn.qwest.net)
[02:59:23] <tikue_> actually, I have code that uses try_send but not try_recv lol
[02:59:52] <Kelvin> but just to be clear, there currently is nothing that has recv functionality that is non-blocking, right?
[03:00:01] <tikue_> Kelvin: peek()
[03:00:11] <tikue_> Kelvin: returns true or false, then you can recv() on true
[03:00:16] *** Joins: dbaupp (Thunderbir@CE33C7D9.D5A1DCF.37681C44.IP)
[03:01:07] <cmr> Is there a name for Chan/Port collectively?
[03:01:22] <dbaupp> ChrisMorgan, brson: there's an RFC that touches on the module-reorganisation a stuff: https://github.com/mozilla/rust/issues/9208 (fwiw)
[03:01:34] <dbaupp> cmr: stream, ala std::comm::stream()?
[03:01:36] <tikue_> cmr: not afaik, but stream() by convention right
[03:01:48] <tikue_> er, stream* by convention
[03:01:56] *** Joins: kimundi_ (kimundi@moz-C21C140E.dip0.t-ipconnect.de)
[03:02:18] <tikue_> could have type Stream<T> = (Port<T>, Chan<T>)  but idk what it'd be useful for
[03:02:20] <ChrisMorgan> dbaupp: I was aware of that one; my PR is largely keeping the same crate structure but fixing up the filesystem in line with current recommendations
[03:02:49] <ChrisMorgan> I was then just cast to wondering bout certain of the other cases. (A hazardous occupation indeed!)
[03:02:52] *** Quits: kimundi (kimundi@moz-EA7ECD3D.dip0.t-ipconnect.de) (Ping timeout)
[03:02:52] *** kimundi_ is now known as kimundi
[03:02:57] <dbaupp> ChrisMorgan: yup, just checking (I saw you mentioned making extra::num, mainly). also, fwiw, I'd prefer keeping deriving/cmp/*.rs in the subfolder.
[03:03:12] *** Quits: ambimorph (amber@moz-B376C52.hlrn.qwest.net) (Quit: Leaving.)
[03:03:32] <cmr> I'm thinking Port/Chan should have a .status() that returns like enum StreamStatus { NoData, HasData, Closed }
[03:03:37] <jeaye> type `std::rt::io::file::FileReader` does not implement any method in scope named `eof`
[03:03:40] <jeaye> say what
[03:03:47] <jeaye> http://static.rust-lang.org/doc/master/std/rt/io/file/struct.FileReader.html
[03:03:57] <ChrisMorgan> I think I'll keep it to just the clearly cut-and-dried ones for now of x/x.rs -> mod.rs and src/libx/x.rs to lib.rs. That's probably safer.
[03:04:07] <cmr> jeaye: is std::rt::io::Reader in scope?
[03:04:37] *** Quits: adu (ajr@moz-60B25736.washdc.fios.verizon.net) (Quit: adu)
[03:04:39] <jeaye> cmr: :)
[03:04:40] <ChrisMorgan> With one exception, moving src/libstd/str/ascii.rs up and removing the now-empty src/libstd/str/.
[03:04:41] <jeaye> thanks
[03:04:47] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[03:05:04] * jeaye is catching q3 up with about a month of Rust breakage.
[03:05:29] *** Quits: scabaloo (student@BF59A32.8FFBE666.DDE5D3F6.IP) (Client exited)
[03:05:31] *** Quits: dbaupp (Thunderbir@CE33C7D9.D5A1DCF.37681C44.IP) (Ping timeout)
[03:05:56] <cmr> jeaye: you should add it to http://hiho.io/rust-ci/ !
[03:06:43] <jeaye> And have my laziness even more public?! :P
[03:07:00] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[03:07:24] *** Quits: maik (maik@moz-B2E82E80.dip0.t-ipconnect.de) (Ping timeout)
[03:07:44] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[03:07:56] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[03:08:25] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[03:09:04] *** Joins: jvns (quassel@moz-DE62990.nyc.res.rr.com)
[03:09:37] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:10:06] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[03:10:36] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Ping timeout)
[03:10:40] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[03:10:44] *** Quits: Kelvin (Mibbit@77A8BD7A.D2312BC6.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:11:10] *** kimundi is now known as zz_kimundi
[03:12:49] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[03:13:20] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[03:13:47] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[03:14:04] *** Parts: bigmonachus (sglez@72385771.D51C35FB.A208C5.IP) (Leaving)
[03:14:08] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[03:14:31] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[03:14:32] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[03:15:00] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:15:09] <jeaye> error: mismatched types: expected `&u8` but found `&char` (expected char but found u8)
[03:15:14] <jeaye> Misleading? o.O
[03:15:35] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[03:15:56] <ChrisMorgan> Which did it actually want?
[03:15:56] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[03:16:22] <jeaye> &u8
[03:17:44] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[03:17:50] *** zz_kimundi is now known as kimundi
[03:20:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:21:26] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:21:29] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:22:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:23:27] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:23:34] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[03:24:01] *** Quits: BinRoot (Mibbit@moz-60878DF8.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:24:49] <tikue_> cmr: what would be the benefit to having it be StreamStatus instead of PortStatus?
[03:24:54] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[03:25:14] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[03:25:55] <cmr> tikue_: Oh right, doesn't make sense on a Chan I suppose.
[03:26:10] <tikue_> it seems like a useful thing to have
[03:26:21] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:28:35] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[03:30:49] *** Joins: adu (ajr@moz-60B25736.washdc.fios.verizon.net)
[03:32:36] *** Quits: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP) (Ping timeout)
[03:32:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:33:32] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[03:33:34] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[03:33:59] *** Joins: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP)
[03:36:15] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[03:36:31] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[03:37:11] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[03:41:51] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Connection reset by peer)
[03:42:03] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:42:35] *** Quits: tikue_ (tikue_star@A64AE68.28259105.689607DE.IP) (Ping timeout)
[03:43:56] *** Joins: tikue_ (tikue_star@A64AE68.28259105.689607DE.IP)
[03:52:50] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[03:53:01] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Quit: Konversation terminated!)
[03:53:37] *** sam113101 is now known as sam113101_afk
[03:54:56] *** Joins: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP)
[03:55:19] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Ping timeout)
[03:55:58] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:56:00] *** Quits: tjc (tjc@5DFB91FC.8C350B7C.7C164FC0.IP) (Ping timeout)
[03:56:22] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Ping timeout)
[03:56:50] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:57:12] *** Quits: matt-r (mattr@8B499E37.E81D922B.BECC6F7D.IP) (Ping timeout)
[03:57:29] *** Joins: matt-r (mattr@8B499E37.E81D922B.BECC6F7D.IP)
[03:57:31] *** Joins: tjc (tjc@5DFB91FC.8C350B7C.7C164FC0.IP)
[03:57:31] *** ChanServ sets mode: +o tjc
[03:57:51] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[03:57:53] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[04:00:02] *** Quits: kimundi (kimundi@moz-C21C140E.dip0.t-ipconnect.de) (Ping timeout)
[04:01:22] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[04:02:21] *** Quits: jvns (quassel@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[04:02:52] *** Quits: jstevans (Instantbir@C7C8F9FF.362CC69C.B7830B68.IP) (Ping timeout)
[04:03:04] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:03:05] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[04:03:13] *** Joins: kimundi (kimundi@moz-1D7A8D6E.dip0.t-ipconnect.de)
[04:03:44] *** sam113101_afk is now known as sam113101
[04:04:24] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:05:43] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:07:46] *** kimundi is now known as zz_kimundi
[04:09:05] *** Joins: vu3rdd (vu3rdd@moz-E083170.cisco.com)
[04:12:18] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[04:12:24] <zws3mb> anyone around who could explain/look at some moved/closure problems?
[04:13:23] <zws3mb> http://pastebin.com/cU5nHuQZ
[04:13:26] <bjz> zws3mb: yeah sure
[04:13:56] <bjz> what is the error?
[04:14:28] <zws3mb> quite a few, first is cannot move out of dereference of & pointer
[04:14:45] *** zz_kimundi is now known as kimundi
[04:14:49] <zws3mb> on let ostreamip and let mystreamip 
[04:16:02] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[04:17:03] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:17:04] <bjz> zws3mb: it would be more helpful to actually have a copy of the error pasted.
[04:17:12] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:17:21] *** Joins: scabaloo (student@BF59A32.8FFBE666.DDE5D3F6.IP)
[04:17:23] <bjz> but yeah, unwrap() moves the data out of an option
[04:17:53] <strcat> well it does it by-value
[04:17:59] <strcat> so if the type has a dtor it will move
[04:18:03] <bjz> now, if the data is in a struct, you can't move the data out, because it's stuck in the struct
[04:18:22] *** Joins: mindcat (mindcat@BF818C7F.B1E12A5D.57E3C596.IP)
[04:18:22] <strcat> rusti: struct Foo(int); let x = Some(Foo(5)); (x.unwrap(), x.unwrap())
[04:18:26] -rusti- (main::Foo(5), main::Foo(5))
[04:18:37] <bjz> so you'd need to get the contents of the options as a reference
[04:18:42] <strcat> rusti: struct Foo(int); impl Drop for Foo { fn drop(&mut self) {} } let x = Some(Foo(5)); (x.unwrap(), x.unwrap())
[04:18:44] -rusti- pastebinned 10 lines of output: http://sprunge.us/JihM
[04:18:50] <bjz> yep ^
[04:18:56] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Ping timeout)
[04:19:16] *** Quits: adu (ajr@moz-60B25736.washdc.fios.verizon.net) (Quit: adu)
[04:19:48] <zws3mb> ah, okay
[04:19:57] <bjz> strcat: you'd need to do something like .as_ref().unwrap() right?
[04:20:04] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Ping timeout)
[04:20:11] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:20:26] <strcat> bjz: yes, although get_ref is still around too (same thing)
[04:20:32] <bjz> oh ok
[04:20:39] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[04:20:40] * bjz thought strcat zapped that
[04:20:45] <bjz> :)
[04:20:47] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:20:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:21:00] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[04:21:15] <strcat> I wanted to, as_ref().get()  is good enough for me ;p
[04:21:31] <bjz> yeah
[04:21:44] <bjz> strcat: hey one thing mr strcat, why do we have MutVector and MutString?
[04:21:57] <bjz> when you can do that with explicit self?
[04:22:22] <strcat> dunno
[04:22:27] <strcat> I don't like those pointless traits
[04:22:30] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:22:34] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:22:43] <bjz> yeah, would be good to consolidate it
[04:22:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:22:49] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:22:55] <strcat> we need to be able to do non-trait impls on built-ins in libstd
[04:22:55] <scabaloo> hi. i'm trying to cache files and i was wondering... what would be the best way to store the contents of the file so they can easily be accessed again?
[04:22:56] <bjz> proliferation of traits is bad
[04:23:10] <strcat> scabaloo: std::hashmap?
[04:23:21] <strcat> what do you want it keyed by?
[04:23:31] *** Joins: eddyb9 (eddy@A93A03C9.9065A63B.FCAAE698.IP)
[04:24:14] <cmr> scabaloo: isn't that what the filesystem is for? Modern OSs have incredibly detailed caching schemes that respond to memory pressure etc.
[04:25:06] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[04:25:18] <scabaloo> we're trying to create our own caching scheme for serving files
[04:25:59] <scabaloo> i'm thinking we would key it by the file name
[04:26:02] <zws3mb> scabaloo is  in the OS Class with me
[04:26:46] *** Quits: tikue_ (tikue_star@A64AE68.28259105.689607DE.IP) (Ping timeout)
[04:27:08] <scabaloo> would MemoryMapKind be relevant?
[04:27:38] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[04:28:24] <vu3rdd> How do I deref or unbox a std::rc::Rc data? 
[04:28:36] <vu3rdd> for eg, let us say I have this:
[04:28:44] <vu3rdd> let x = Rc::new(5)
[04:28:46] <strcat> vu3rdd: *x.borrow(), until there's deref overloading (soon!)
[04:28:53] <vu3rdd> thanks!
[04:29:19] <vu3rdd> strcat: works perfectly fine. Thanks. :)
[04:29:25] <strcat> deref overloading would turn x.borrow() -> &*x and *x.borrow() -> *x
[04:30:14] <vu3rdd> strcat: I had been staring at the std::rc manual page and still didn't catch borrow. :(
[04:31:41] <zws3mb> bjz, strcat, thank you guys
[04:31:42] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[04:31:48] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[04:32:11] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[04:32:48] <zws3mb> and all you gods among men on this channel =P
[04:34:47] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Connection reset by peer)
[04:35:00] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[04:35:35] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Quit: Bye)
[04:35:38] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[04:36:37] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:38:31] <bjz> zws3mb: heh, we try
[04:42:22] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[04:42:52] *** Joins: tikue_ (tikue_star@A64AE68.28259105.689607DE.IP)
[04:44:36] *** Joins: JanC_ (janc@moz-E4BC6B65.dsl.scarlet.be)
[04:44:48] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:45:25] *** Quits: JanC (janc@moz-7257C13F.dsl.scarlet.be) (Ping timeout)
[04:48:12] <vu3rdd> strcat: I have this code.. http://kib2.free.fr/pastebin/view_paste.php?id=131
[04:48:32] <vu3rdd> when I compile, i get an error "canot move out of dereference of & pointer"
[04:48:59] <McPherrin> ooo that's my favourite rust message
[04:49:14] <vu3rdd> I am just trying to define an enum which is recursive, to represent an arithmetic expression.
[04:49:48] <strcat> vu3rdd: you need a call to clone, then
[04:49:57] <strcat> and #[deriving(Clone)] on the enum
[04:50:31] <strcat> vu3rdd: type with dtor, &fn or &mut -> requires a move of ownership to put it somewhere else
[04:50:34] <strcat> Rc has a destructor
[04:51:19] <strcat> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) { println("drop") } } Foo
[04:51:20] *** Quits: tjc (tjc@5DFB91FC.8C350B7C.7C164FC0.IP) (Quit: Places to go, people to annoy)
[04:51:23] -rusti- main::Foo
[04:51:24] -rusti- drop
[04:53:44] <strcat> rusti: use std::rc::Rc; struct Foo; impl Drop for Foo { fn drop(&mut self) { println("drop") } } fn foo<T>(_: T) {} let x = Rc::new(Foo); foo(x); println("end of scope")
[04:53:46] -rusti- drop
[04:53:46] -rusti- end of scope
[04:53:46] -rusti- ()
[04:54:03] <strcat> rusti: use std::rc::Rc; struct Foo; impl Drop for Foo { fn drop(&mut self) { println("drop") } } fn foo<T>(_: T) {} let x = @Foo; foo(x); println("end of scope")
[04:54:05] -rusti- pastebinned 6 lines of output: http://sprunge.us/LXMI
[04:54:18] <strcat> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) { println("drop") } } fn foo<T>(_: T) {} let x = @Foo; foo(x); println("end of scope")
[04:54:19] -rusti- end of scope
[04:54:20] -rusti- drop
[04:54:20] -rusti- ()
[04:54:38] <strcat> @ is really weird and does hidden magic on implicit copies (the only type to do so)
[04:55:44] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:55:51] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:55:58] <aatch> Which is why `@` is now feature-gated
[04:56:21] <strcat> well that's not specifically why
[04:56:43] <aatch> Well it's part of it. Isn't it because it's just not done well?
[04:56:45] *** Joins: mib_dkadmj (Mibbit@5D58FB7.D41652FF.DDE5D3F6.IP)
[04:56:51] <strcat> aatch: well, it's very bad for refcounting
[04:56:52] <mib_dkadmj> Hey
[04:56:55] <strcat> my example shows why
[04:56:56] <mib_dkadmj> I hate to ask this simple question,
[04:57:08] <mib_dkadmj> but is there a simple code segment to write a string to a file in rust?
[04:57:28] <strcat> Rc has move semantics so you do very little refcounting, and it's freed promptly
[04:57:44] <strcat> @ keeps doing refcounting every time you do an implicit copy
[04:58:12] <strcat> if there was an actual gc, it'd make sense that way
[04:58:42] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:59:53] <strcat> 'actual' as in tracing
[05:00:39] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:00:41] <jeaye> How can I get a &[u8] from a &T? (for Reader::read)
[05:02:14] <jeaye> There should be a Reader::read<T>(&mut T)
[05:03:07] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Broken pipe)
[05:03:24] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:05:27] <vu3rdd> strcat: I still don't understand this yet. Sorry.. I modified it to look like this: http://kib2.free.fr/pastebin/view_paste.php?id=132
[05:05:54] <strcat> vu3rdd: clone calls are in the wrong place
[05:05:56] <strcat> so
[05:06:01] <strcat> vu3rdd: do you understand move semantics?
[05:06:06] <vu3rdd> strcat: no
[05:06:19] <strcat> the built-in by-value is always a shallow copy, for Rc it's a pointer copy
[05:06:29] <strcat> if the type has a destructor, the source becomes unusable (a move of ownership)_
[05:06:33] *** Joins: eddyb (eddy@A93A03C9.9065A63B.FCAAE698.IP)
[05:06:35] *** Quits: eddyb (eddy@A93A03C9.9065A63B.FCAAE698.IP) (Quit: eddyb)
[05:06:39] <strcat> and to move ownership from the source, you need to own the source
[05:06:48] <strcat> &T is a non-owning reference, and that's what borrow() returns
[05:06:49] *** Joins: eddyb (eddy@A93A03C9.9065A63B.FCAAE698.IP)
[05:07:05] <strcat> since Rc has shared ownership with the other Rc values of some box of memory
[05:07:15] <strcat> can't move out
[05:07:19] <strcat> so you need
[05:07:21] <strcat> x.borrow().clone()
[05:07:26] <strcat> rather than *x.borrow()
[05:07:35] <strcat> (don't need the other clones)
[05:07:45] <strcat> vu3rdd: basically
[05:07:52] <strcat> let x = Rc::new(5); let y = x;
[05:07:54] <strcat> doesn't do a refcount
[05:08:03] <strcat> it moves ownership of the Rc to y
[05:08:08] <McPherrin> derefing raw pointers is unsafe, but I can pass them around in safe code freely, right?
[05:08:09] <strcat> x can now no longer be used
[05:08:15] <jeaye> McPherrin: Yeah
[05:09:37] <tikue_> you guys see the email just posted to the ML? two orders of magnitude better performance in task communication based on LMAX Disruptor?
[05:09:58] <cmr> tikue_: I thought you were kidding
[05:10:02] <cmr> Holy crap
[05:10:24] <tikue_> i haven't looked at the code but it sounds super cool
[05:10:42] <aatch> McPherrin, pretty much the only expression that is unsafe (not counting calls to unsafe functions).
[05:10:45] <cmr> I've looked into disruptor before, long ago
[05:10:52] <strcat> aatch: it is the only one :)
[05:11:02] <strcat> I even documented it in the manual (the best section in the manual! ;p)
[05:11:04] <vu3rdd> strcat: thanks. I will read up on the ownerships.. 
[05:11:19] <mib_dkadmj> thanks strcat
[05:12:19] <mib_dkadmj> I am now having error: error: Non-literal in bytes!
[05:12:30] <aatch> I tend to think of it as "could this cause my program to crash?", passing around a raw pointer won't, de-reffing will.
[05:12:49] <mib_dkadmj> I have a &str that I want to use with stream.write
[05:12:51] <jeaye> rusti: let x = [0u8, .. std::mem::size_of::<i64>];
[05:12:54] *** jorendorff_away is now known as jorendorff
[05:12:54] <jeaye> ^ Would be nice
[05:12:56] -rusti- timeout triggered!
[05:12:56] -rusti- playpen: failed to open /sys/fs/cgroup/memory/playpen/23977/cgroup.procs: No such file or directory
[05:14:09] <cmr> mib_dkadmj: use .as_bytes() on the &str
[05:14:15] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[05:14:19] <cmr> bytes!() is for byte string literals, not runtime conversion.
[05:14:32] * vu3rdd goes off to read manual section 9.1
[05:14:57] <mib_dkadmj> hmm
[05:15:02] <mib_dkadmj> cmd is a &str
[05:15:06] <mib_dkadmj> I am trying stream.write("" + ~cmd + "");
[05:15:17] <mib_dkadmj> or stream.write(cmd)
[05:15:23] <cmr> stream.write(cmd.as_bytes())
[05:15:38] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[05:15:48] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[05:16:02] *** Quits: KindOne (KindOne@moz-77FD5389.dynamic.ip.windstream.net) (Ping timeout)
[05:16:12] <aatch> tikue_, wow nice. Looks like it would make message passing pretty much free compared to the work any reasonable task would be doing.
[05:17:01] <tikue_> aatch: yeah seriously! pretty awesome stuff
[05:17:09] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[05:17:09] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[05:17:10] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:17:36] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:18:11] <McPherrin> Why are libuv's functions prefixed with rust_? Not seeing where that happens (eg, in uv.h uv_fs_unlink is used like rust_uv_fs_unlink )
[05:18:43] <eddyb> huh?
[05:18:48] <pcmattman> uvll.rs?
[05:19:06] *** Quits: alonlevy (alon@moz-E6115DFA.bb.netvision.net.il) (Ping timeout)
[05:19:26] <pcmattman> or inquiring about the means through which the rust_ is prefixed?
[05:19:36] *** Joins: KindOne (KindOne@moz-77FD5389.dynamic.ip.windstream.net)
[05:20:21] <SiegeLord> rusti: struct A{ a: () }
[05:20:25] -rusti- ()
[05:20:40] <McPherrin> No, in uvll.rs
[05:20:58] <McPherrin> there's extern { 1152     fn rust_uv_guess_handle(fd: c_int) -> c_int;
[05:21:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:21:19] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:22:39] <McPherrin> What's that linked to?
[05:22:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:23:03] <McPherrin> Why is the symbol not uv_guess_handle?  That's what libuv exports
[05:23:23] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:23:30] <Luqman> McPherrin: it's in rt/rust_uv.cpp
[05:23:35] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[05:24:20] <Luqman> McPherrin: as for why, i think there used to be issues with linking directly with the libuv ones.
[05:24:30] <Luqman> though at this point i'm fairly sure they can just be removed
[05:27:50] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:28:26] <McPherrin> Luqman: thanks
[05:28:50] <McPherrin> I'm gonna try to use them directly rather than figuring out how to add stuff to that file
[05:29:11] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[05:29:40] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:30:08] <eddyb> rusti: let pair = (1, '2'); (true, ..pair, false)
[05:30:09] -rusti- pastebinned 6 lines of output: http://sprunge.us/QAag
[05:30:32] <Heather> rusti: print("1"); print("2");
[05:30:33] -rusti- 12()
[05:30:35] <eddyb> what if I make that work? hmm
[05:30:43] <Luqman> eddyb: that's not valid syntax
[05:30:49] <cmr> eddyb: that just inserts the contents of a tuple at that spot in the tuple?
[05:31:00] <eddyb> cmr: yupp
[05:31:16] <tikue_> tuple unpacking ?
[05:31:22] <Sharp> Anyone know of a way to precisely test that the span for an error underlines the correct word?
[05:31:29] <eddyb> I have to look at tuple pattern matching, I guess
[05:31:44] <eddyb> Luqman: it's part of https://github.com/mozilla/rust/issues/10124
[05:32:37] <Luqman> ah
[05:32:40] <cmr> Sharp: not that I know of
[05:33:02] <Sharp> Bleh.  Can I submit my fix with that caveat, then?  I've tested it manually and it works.
[05:33:12] <cmr> Sharp: sure
[05:33:14] <eddyb> cmr: I'm pretty sure any basic attempt will fail in every possible check stage :)
[05:33:30] <eddyb> rusti: let (a, _) = (1, 2);
[05:33:31] -rusti- <anon>:9:14: 9:15 warning: unused variable: `a`, #[warn(unused_variable)] on by default
[05:33:31] -rusti- <anon>:9          let (a, _) = (1, 2);
[05:33:31] -rusti-                        ^
[05:33:31] -rusti- ()
[05:33:40] <eddyb> rusti: let (a, _) = (1, 2, 3); a
[05:33:41] -rusti- pastebinned 7 lines of output: http://sprunge.us/DEAK
[05:34:05] <Sharp> Cool.  Let me just rebuild this once to make sure--I kept adding and removing stuff because I wasn't sure how much I'd have to change, but the current changeset is pretty small.
[05:34:14] <eddyb> what's with (<VI0>,<VI1>,<VI2>)? is it a bug or a feature?
[05:34:22] <eddyb> rusti: let (a, .._) = (1, 2, 3); a
[05:34:24] -rusti- pastebinned 6 lines of output: http://sprunge.us/GAiP
[05:34:40] <tikue_> eddyb: you can't do that because it's refutable
[05:34:43] <tikue_> oh wait no it's not
[05:34:44] <tikue_> that should work
[05:34:55] <eddyb> that's one place I didn't think of: patterns. but it shouldn't be that different
[05:34:55] <tikue_> s/should/could
[05:35:44] <eddyb> rusti: let pair = (1, '2'); {let (a, b) = pair; (true, a, b, false)}
[05:35:45] -rusti- (true, 1, '2', false)
[05:35:56] <tikue_> rusti: match [1, 2, 3] { [a, .._] => a, _ => -1 }
[05:35:57] -rusti- pastebinned 7 lines of output: http://sprunge.us/bLUY
[05:36:01] *** Joins: adarq (x@moz-87A29603.hsd1.fl.comcast.net)
[05:36:14] <tikue_> rusti: match [1, 2, 3] { [a, .._] => a }
[05:36:14] -rusti- 1
[05:36:16] <strcat1> eddyb: the VI means generic integer
[05:36:24] <strcat1> rusti: 1.0.f
[05:36:33] -rusti- pastebinned 7 lines of output: http://sprunge.us/GQTG
[05:36:33] <strcat1> rusti: ??
[05:36:34] <eddyb> so it's already handled in vectors, I see
[05:36:34] -rusti- pastebinned 6 lines of output: http://sprunge.us/UGEb
[05:36:44] <eddyb> match [1, 2, 3] { [a, ..b] => b }
[05:37:11] <eddyb> err
[05:37:15] <eddyb> rusti: match [1, 2, 3] { [a, ..b] => b }
[05:37:15] -rusti- pastebinned 17 lines of output: http://sprunge.us/QSFH
[05:37:32] <eddyb> rusti: match &[1, 2, 3] { [a, ..b] => b }
[05:37:32] <tikue_> lifetime issue
[05:37:32] -rusti- pastebinned 7 lines of output: http://sprunge.us/iXGA
[05:37:41] <SiegeLord> Could these <VI's be made more verbose? Or is their shortness a feature?
[05:37:43] <eddyb> rusti: match &'static [1, 2, 3] { [a, ..b] => b }
[05:37:44] -rusti- pastebinned 7 lines of output: http://sprunge.us/aeFY
[05:38:01] <eddyb> rusti: match &'static [1, 2, 3] { [a, ..b] => b, _ => {fail!()} }
[05:38:02] -rusti- <anon>:9:37: 9:38 warning: unused variable: `a`, #[warn(unused_variable)] on by default
[05:38:02] -rusti- <anon>:9          match &'static [1, 2, 3] { [a, ..b] => b, _ => {fail!()} }
[05:38:02] -rusti-                                               ^
[05:38:02] -rusti- &[2, 3]
[05:38:06] <eddyb> woo
[05:38:20] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:38:22] <eddyb> that means there's a precedent in pattern matching
[05:38:32] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[05:38:50] <tikue_> rusti: match &'static [1, 2, 3] { [a, ..b] => (a, b), _ => fail!() }
[05:38:51] -rusti- (1, &[2, 3])
[05:39:05] <tikue_> eddyb: what do you want to add?
[05:39:15] <eddyb> ([foo, ..[bar, baz]] isn't required in the language itself, since it can be done at runtime)
[05:39:34] <mib_dkadmj> Thanks for the help, guys
[05:39:34] <tikue_> you want to add unpacking into lists?
[05:40:01] <tikue_> like reverse of the current pattern matching basically?
[05:40:29] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:40:32] <eddyb> tikue_: well, the current pattern matching .. doesn't work with tuples, but yeah. see https://github.com/mozilla/rust/issues/10124 for the full proposal
[05:41:03] <eddyb> I'm thinking I could get the tuple stuff into rustc easier than full variadic generics, and it's also easier to implement
[05:42:21] <Luqman> eddyb: i don't think that sort of matching really makes sense on tuples
[05:42:27] *** Quits: mib_dkadmj (Mibbit@5D58FB7.D41652FF.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:42:40] *** Joins: CurlyBrace (Mibbit@5D58FB7.D41652FF.DDE5D3F6.IP)
[05:43:16] <CurlyBrace> Hello all!
[05:43:30] <tikue_> hi there CurlyBrace =]
[05:43:44] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:43:51] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[05:44:00] <eddyb> fn first<T>(x : T) {let (a, .._) = x; a}
[05:44:26] *** Quits: scabaloo (student@BF59A32.8FFBE666.DDE5D3F6.IP) (Ping timeout)
[05:44:39] <tikue_> eddyb: that'd fail on an empty tuple tho, so probably it should only work with match {} 
[05:44:50] <tikue_> just as you can't do let [a, ..b] = vec
[05:44:51] <eddyb> Luqman: I have to find some usecases then, though I'm a little afraid you won't be able to do much with tuples anyway, without variadic generics
[05:45:14] <CurlyBrace> Silly question, are there any alternatives to to_owned();?
[05:45:31] <Luqman> CurlyBrace: to do what exactly?
[05:45:38] <eddyb> fn first<First, ..Rest>(x: (First, ..Rest)) -> First { let (a, .._) = x; a }
[05:45:43] <eddyb> tikue_: ^ that would work :)
[05:46:26] <tikue_> eddyb: yeah that'd be safe 
[05:46:37] <tikue_> i think
[05:46:47] <CurlyBrace> on our webserver project we are implementing a hashtable
[05:47:06] <eddyb> it's a bit silly how tuples and variadic generics depend on each-other...
[05:47:13] *** Joins: jstevans (Instantbir@moz-3FA45308.bootp.virginia.edu)
[05:47:16] <CurlyBrace> for caching, but it is slowing it down; we think that copying via to_owned() for keys and such is what is hurting it
[05:48:00] <eddyb> rusti: fn foobar<T>(x: T) {match x {[a, ..b] => (a, b), _ => {fail!()}}}
[05:48:01] -rusti- pastebinned 7 lines of output: http://sprunge.us/JKdT
[05:48:18] *** Quits: zws3mb (Mibbit@DDA9C825.A9DA0237.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:48:18] <eddyb> gaaah type bounds :(
[05:48:31] <eddyb> rusti: fn foobar<U, T: [U]>(x: T) {match x {[a, ..b] => (a, b), _ => {fail!()}}}
[05:48:32] -rusti- pastebinned 6 lines of output: http://sprunge.us/JbAN
[05:48:50] <eddyb> that is sad
[05:50:25] <eddyb> can generic instantiation ever fail?
[05:50:55] <tikue_> hey, shouldn't function arguments allow refutable patterns?
[05:51:18] <eddyb> tikue_: that implies overloading, I think
[05:51:37] <CurlyBrace> my understanding is that rust hashtables recommend the use of to_owned for the core data
[05:51:39] <tikue_> eddyb: not necessarily, but that's one way to do it
[05:51:48] <CurlyBrace> but we think that that is causing too much overhead
[05:52:01] <tikue_> eddyb: you could simply have a function that requires a specific pattern, right? for example a list of length >= 1
[05:52:23] <eddyb> tikue_: and do what when it receives an empty vector?
[05:52:30] <tikue_> eddyb: not compile
[05:52:32] <tikue_> oh
[05:52:35] <tikue_> i guess you can't guarantee that
[05:52:36] <tikue_> lol
[05:52:36] <eddyb> :)
[05:52:43] <Luqman> eddyb: `T: [U]` is not valid, why not just fn foo<T>U>(x: ~[U]) { ... } ?
[05:52:50] <strcat1> CurlyBrace: no, they don't recommend that
[05:52:56] * tikue_ wants refutable patterns in arguments and overloading /me sighs
[05:53:06] <tikue_> like SML style would be too cool
[05:53:06] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[05:53:07] <strcat1> they take a generic K and V type, and don't make any copies of either the key or value internally
[05:53:16] <strcat1> they can be used for whatever you want
[05:53:25] <eddyb> Luqman: your client is broken, I can see <T>\b\bU> :P. but I know what you mean
[05:53:40] * tikue_ tried to write a macro for it once but it was too tricky
[05:53:58] <strcat1> you could have your keys as &, or behind Rc, or even an enum of different types of references
[05:54:04] <strcat1> whatever is best for that use case
[05:54:06] <Heather> Hello everyone
[05:54:13] <Luqman> eddyb: i might have inserted some extra stuff. terrible wifi :(
[05:54:50] <eddyb> Luqman: it's not the wifi that does it, it's usually console clients (which have to interpret \b)
[05:54:59] *** strcat1 is now known as strcat
[05:55:26] <eddyb> Luqman: unless you're talking about SSH over terrible wifi
[05:56:07] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[05:56:38] <Luqman> eddyb: yep over ssh
[05:57:45] *** Quits: CurlyBrace (Mibbit@5D58FB7.D41652FF.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:58:15] <eddyb> well, since the relationship is mutual within my proposal, I should try working on something else :P
[05:59:00] <Heather> I've made strange centos setup :( xrdp works perfect, simple ssh fails after login with Network Error
[05:59:18] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[05:59:33] <Sharp> cmr: PR is up, if you're interested in reviewing.
[05:59:57] <eddyb> (I might come up with a complicated grep pattern to find instances of manual repacking :P
[06:00:24] <eddyb> like Foo(a, b, c) => Bar(.*a, b, c.*)
[06:01:36] *** Joins: alonlevy (alon@F65092F7.FD0D8A2D.F9582E85.IP)
[06:01:52] <cmr> Sharp: which?
[06:01:57] <cmr> that is, link?
[06:03:08] <Sharp> cmr: https://github.com/mozilla/rust/pull/10142/
[06:03:30] <Heather> let switch unknown-linux to pc-
[06:04:23] *** Joins: oberstet (quassel@moz-BCE29FF.dynamic.mnet-online.de)
[06:05:17] <Luqman> Heather: the canonical target for linux i've seen is either x86_64-linux-gnu or x86_64-unknown-linux-gnu
[06:05:49] <McPherrin> Luqman: The canonical target isn't ubuntu? ;)
[06:05:55] * ChrisMorgan wants rustc for arm-unknown-linux-gnueabi
[06:06:07] <McPherrin> ChrisMorgan: Haven't we got that?
[06:06:18] <McPherrin> ChrisMorgan: We have at some point I think
[06:06:28] <ChrisMorgan> I do not believe we have ever had it.
[06:06:32] <McPherrin> Luqman: Didn't you run rust on the ts7800?
[06:06:43] <ChrisMorgan> Cross-compiling onto ARM, sure, but not rustc itself.
[06:06:43] <McPherrin> What target did you use?
[06:07:09] <Heather> Luqman no...
[06:07:30] <Luqman> McPherrin: yes, arm-unknown-linux-gnueabi
[06:07:40] <Heather> Luqman all the software use pc-linux-gnu
[06:07:41] <McPherrin> ChrisMorgan: Oh, you want to run rustc *on* the target
[06:07:47] <ChrisMorgan> Correct.
[06:07:51] *** jorendorff is now known as jorendorff_away
[06:07:59] <eddyb> haha, only one instance: src/librustc/metadata/encoder.rs:            named_field(nm, vis) => (nm, vis),
[06:08:12] <McPherrin> ChrisMorgan: Ah, I haven't got an arm machine with enough memory to run rustc :(
[06:08:24] <Luqman> ChrisMorgan: i imagine you could do that if you used the cross compiler to compile rustc itself
[06:08:57] <ChrisMorgan> McPherrin: what, you don't even have 50MB to spare? I'm not talking about compiling rustc itself on ARM, I'm talking about being able to compile other rust code (like rust-http) on my tablet.
[06:09:20] <ChrisMorgan> Luqman: I've made three attempts at that but failed each time.
[06:09:40] <McPherrin> ChrisMorgan: Oh, yeah if you don't want to compile rustc on the target sure
[06:09:44] <Heather> Luqman it also possible to have unknown as default if you like to but you definitely should support pc-linux-gnu thing....
[06:09:56] <McPherrin> ChrisMorgan: See first I think you want too little, then I think you want too much :P
[06:10:08] <cmr> Heather: why?
[06:10:29] <Heather> cmr because it's ./configure standard
[06:10:49] * ChrisMorgan wants it for his Asus Eee Pad Transformer TF101 so that he can actually seriously develop rust-http away from home rather than making changes and fixing up the compile errors later
[06:10:55] <pcmattman> surely ./configure targets $HOST by default, not pc-linux-gnu?
[06:11:00] <Heather> cmr Gentoo is using it for most of the packages
[06:11:09] <cmr> Heather: do you have a canonical reference for that?
[06:11:11] <Sharp> cmr: "This addresses the span part of the PR, but the structure name part."  What does this mean?
[06:11:16] <pcmattman> oh, that kind of standard
[06:11:25] <McPherrin> Heather: Nobody cares about Gentoo >:D
[06:11:33] <cmr> Sharp: but /not/ the structure name part, sorry.
[06:11:48] <Sharp> I think the PR actually does address that… at least, when I tested manually, it did.
[06:12:01] <Sharp> Well, maybe I'm confused about what you mean.
[06:12:16] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:12:33] <Heather> McPherrin sure nobody cares about Gentoo, but suddently pcakges works on pc-linux-gnu
[06:12:42] <Heather> McPherrin do you have idea why?
[06:12:44] <cmr> you'll output "structure has no field named `foo`", the original issue has "structure `Foo` has no field named `foo`"
[06:13:06] <Sharp> Oh, I see now.  Sorry.
[06:13:16] <Sharp> I can add that in, I don't think that part is terribly difficult.
[06:14:27] <cmr> it's the easiest part ;)
[06:14:40] <cmr> Sharp: thanks for fixing this :D
[06:15:13] <Sharp> My pleasure, it was pretty instructive (though I ended up not having to use most of what I wrote, since I didn't end up having to change the generic stuff :P)
[06:15:33] <cmr> Do you think the E-easy categorization was accurate?
[06:15:47] <cmr> (this is to improve my heuristic)
[06:16:15] <Sharp> I think so, yeah.
[06:16:36] *** Joins: gem (nandaja@3EF310DF.F377D157.4781A82F.IP)
[06:17:05] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:18:57] *** Joins: CurlyBrace (Mibbit@5D58FB7.D41652FF.DDE5D3F6.IP)
[06:19:26] <CurlyBrace> I'm back (that mushroom badge helped a lot)
[06:20:29] *** Joins: lkuper (lkuper@moz-7A8BA7B.public.wayport.net)
[06:20:44] *** Quits: alonlevy (alon@F65092F7.FD0D8A2D.F9582E85.IP) (Ping timeout)
[06:21:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:22:23] <flabbers> rusti: use extra::arc; let in_cache: bool = false; let in_cache_RW=arc::RWArc::new(in_cache); in_cache_RW.write( |arg| arg = true );
[06:22:25] -rusti- pastebinned 7 lines of output: http://sprunge.us/ADaM
[06:22:46] *** Quits: lkuper (lkuper@moz-7A8BA7B.public.wayport.net) (Ping timeout)
[06:23:11] <flabbers> rusti: use extra::arc; let in_cache: bool = false; let in_cache_RW=arc::RWArc::new(in_cache); in_cache_RW.write( |arg| arg = &true );
[06:23:12] -rusti- pastebinned 7 lines of output: http://sprunge.us/KKRH
[06:23:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:23:28] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[06:23:39] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[06:23:50] <flabbers> does anyone know how to fix that?
[06:23:54] <CurlyBrace> hmm
[06:23:59] <CurlyBrace> flabbers, are you in the OS class?
[06:24:25] <flabbers> im in a do
[06:24:32] <CurlyBrace> ?
[06:24:38] <flabbers> im not sure what u mean by OS class
[06:24:39] <tikue_> you guys are using RWArc for a global cache?
[06:24:44] <tikue_> CurlyBrace ^
[06:24:58] *** Quits: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb_)
[06:25:11] <CurlyBrace> We were, yeah
[06:25:17] <flabbers> 'bool created' do { 'bool altered' }
[06:25:27] <tikue_> CurlyBrace: how did you find the API for RWArc? 
[06:25:32] <CurlyBrace> But it had too much overhead; the cache would only have one cache
[06:25:39] <CurlyBrace> we are trying something else now
[06:25:45] <tikue_> what does it mean "the cache would only have one cache"
[06:26:03] <CurlyBrace> rust documentation, 'extra'
[06:26:11] <flabbers> http://static.rust-lang.org/doc/0.8/extra/arc/struct.RWArc.html
[06:26:17] <tikue_> CurlyBrace: no i meant, how was using it?
[06:26:19] *** kimundi is now known as zz_kimundi
[06:26:23] <CurlyBrace> not sure
[06:26:31] <CurlyBrace> That was actually my partner's work
[06:26:33] <tikue_> ah
[06:26:36] <CurlyBrace> and it wasn't working very well anyway
[06:26:40] <tikue_> why not?
[06:26:45] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[06:26:45] <CurlyBrace> not sure
[06:26:48] <tikue_> hm
[06:27:00] <flabbers> hmm.... the RWArc works for all my other stuff. this is the first time i got a mut error
[06:27:00] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[06:27:01] <CurlyBrace> too much overhead with making all the data to_owned(), we think
[06:27:02] <tikue_> the state of concurrent data structures in rust is bleak
[06:27:58] *** Joins: alonlevy (alon@F65092F7.FD0D8A2D.F9582E85.IP)
[06:28:08] <Luqman> ChrisMorgan: how did it fail for you?
[06:29:21] <CurlyBrace> the caching is really where we are stuck right now
[06:29:41] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[06:29:57] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[06:29:58] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[06:30:13] <ChrisMorgan> Luqman: my first attempt never got far owing to problems in the target selection stuff where it simply wouldn't build parts that I needed for another platform; can't remember much about my second attempt; my third seemed to have built something for the platform but they were actually x86-64 binaries that it built rather than ARM binaries, despite where it put them.
[06:30:26] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[06:31:04] <ChrisMorgan> If rustpkg were working on the rust repository, would it expect src/libstd/lib.rs et al. or src/std/lib.rs?
[06:31:26] <Luqman> ChrisMorgan: were you trying to massage the makefiles or running the commands manually?
[06:31:46] <ChrisMorgan> I've tried both approaches.
[06:32:15] *** Joins: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[06:32:34] <inspur> how to compile rust file and gernerate an exe with runtime self contained 
[06:33:10] <ChrisMorgan> But mostly I tried the makefile approach.
[06:33:29] *** Joins: test (Mibbit@1914817D.DD5A7578.2B99CF6B.IP)
[06:33:38] <CurlyBrace> inspur, are you asking us?
[06:33:46] <ChrisMorgan> inspur: you want a statically linked Windows binary?
[06:33:56] *** Joins: zws3mb (Mibbit@moz-6662234E.bootp.virginia.edu)
[06:34:19] <inspur> yes 
[06:34:34] <strcat> atm you have to avoid libstd if you want static linking
[06:34:58] <inspur> what's your meaning?
[06:35:13] *** Quits: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb_)
[06:35:20] <strcat> you can't currently use the standard library (libstd) with static linking
[06:35:32] <strcat> you have to use #[no_std] atm until that is fixed
[06:35:38] <strcat> unless you want to fix it
[06:36:14] <Yurume> would the static linking, once implemented, (finally) enable the link-time optimization?
[06:36:24] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[06:36:34] <strcat> Yurume: well they are two separate issues
[06:36:56] <strcat> the crate system currently only works with dynamic linking
[06:37:03] <inspur> no std no extra,just use the rust syntax,rustrt.dll also need?
[06:37:06] *** Quits: gem (nandaja@3EF310DF.F377D157.4781A82F.IP) (Ping timeout)
[06:37:10] <strcat> inspur: don't need rustrt
[06:37:23] <strcat> that's just C/C++ code used by libstd
[06:37:58] <strcat> although it's a real pain to not have the stdlib ;p
[06:38:08] <inspur> i'll have a try
[06:38:37] <Sharp> Is there any way to make rustc compilation faster? :(
[06:38:48] *** Quits: eevee (eevee@moz-EB1D4A9E.evrt.wa.frontiernet.net) (Ping timeout)
[06:38:51] <cmr> Sharp: send a pull request making it so :p
[06:38:56] <Yurume> strcat, well, I'm not sure about LTO on dynamic linkage, but isn't the term LTO normally applied to static linkage? ;)
[06:38:59] <Sharp> Haha.
[06:39:05] <strcat> Yurume: LTO is neither static/dynamic linking
[06:39:06] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Ping timeout)
[06:39:11] <strcat> it's whole program optimization
[06:39:22] <Sharp> I did notice we seem to be copying a lot of stuff when we evaluate enum branches but I'm not sure that's really the bottleneck.
[06:39:24] <CurlyBrace> So I've got a hashmap
[06:39:38] <CurlyBrace> any alternatives to .copy and .to_owned?
[06:39:50] <strcat> CurlyBrace: sure, you can store stuff however you want in it
[06:39:50] <CurlyBrace> THe overhead of copying the values put in the table are killing me
[06:39:54] <strcat> you can store by-reference
[06:39:56] <strcat> you can store as Rc
[06:40:07] <strcat> you can use an enum like std::send_str to store more than one kind of thing
[06:40:37] <strcat> HashMap allows any kind of value, and the key just has to have Eq and IterBytes
[06:40:38] <Yurume> my humble understanding was that LTO is a special kind of whole program optimization where you can't assume much about the input objects, but well, anyway.
[06:40:42] *** Quits: alonlevy (alon@F65092F7.FD0D8A2D.F9582E85.IP) (No route to host)
[06:40:53] <strcat> Yurume: not really
[06:40:56] <strcat> anyway back to that ;p
[06:41:16] <strcat> Yurume: with static linking, you build each translation unit to machine code, then link it into one binary
[06:41:19] <CurlyBrace> Hmmm
[06:41:20] <CurlyBrace> thanks
[06:41:46] <strcat> Yurume: with dynamic linking, there are boundaries *between* areas of static linking, where it's not actually linked until runtime
[06:41:46] *** Quits: heftig (heftig@moz-3E10DED1.dip0.t-ipconnect.de) (Ping timeout)
[06:41:59] <Heather> 01it's based on autotools' config.guess script01
[06:42:03] <strcat> Yurume: with LTO, you the internal compiler representation (LLVM bytecode) is output instead of machine code
[06:42:18] <cmr> CurlyBrace: Have you actually profiled it?
[06:42:18] <strcat> Yurume: then the compiler reads it back in, and compiles multiple translation units as a single one
[06:42:24] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[06:42:33] <strcat> Yurume: if you use LTO for *every* library, it's true whole program optimization
[06:42:38] <strcat> you can ofc mix this stuff 
[06:42:40] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[06:42:51] <CurlyBrace> What do you mean by 'profile'?
[06:43:01] *** Joins: eevee (eevee@moz-DD9FF470.evrt.wa.frontiernet.net)
[06:43:10] <Yurume> strcat, ah, so LTO is *not* performed across the machine code, but across some internal representation for translation units, got it.
[06:43:16] <strcat> Yurume: yup
[06:43:22] <cmr> CurlyBrace: then you haven't :p. A profiler monitors a program's execution to let you know where it's spending its time (essentially)
[06:43:22] <Yurume> I always assumed the former.. ;_;
[06:43:27] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[06:43:33] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[06:43:33] <strcat> Yurume: for LLVM, LLVM bytecode (IR is just the 'disassembled' form of it) is the intermediate format for LTO
[06:43:54] <Yurume> (and wondered about the ability of compilers that can reason about such unconstrained machine codes)
[06:43:56] <CurlyBrace> Then no, afraid not, we have just been using holistic benchmarks
[06:44:10] <strcat> Yurume: atm, rust compiles a crate as a single LLVM module, so it goes FunctionPass (per-function) -> ModulePass (per-module, and it runs function passes itself) -> CodeGen
[06:44:32] <strcat> Yurume: with LTO, you do FunctionPass -> ModulePass many times, and then read it all in and do ModulePass -> CodeGen
[06:45:01] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[06:45:03] <Heather> McPherrin Luqman I think it comes from here : https://projects.coin-or.org/CoinUtils/browser/branches/autotools-update/config.guess#L925
[06:45:23] <Heather> McPherrin Luqman that's case when it should be called pc-linux- ...
[06:45:48] <strcat> Yurume: so for a single 'crate', rust is already doing LTO because 'modules' aren't a compilation unit at all
[06:46:07] <zws3mb> is the as_ref() for Options working in 0.8?
[06:46:12] <strcat> anyway it sucks that atm making separate compilation units implies dynamic linking
[06:46:22] <tikue_> zws3mb: it was added post-0.8 i think
[06:46:24] <Yurume> strcat, thank you for explanation, I guess that is also related to the incremental compilation?
[06:46:28] <strcat> Yurume: yep
[06:46:37] <Yurume> (currently, as you explained, nothing can be done atm)
[06:46:37] <zws3mb> tikue_: thanks
[06:46:37] <strcat> Yurume: for incremental compilation, you need to make separate compilation units
[06:46:48] <strcat> Yurume: so atm, to do that, you'd need to make 1000 dynamic libs ;p
[06:47:00] <Luqman> Heather: ok, it seems like it wants pc-linux for i*86 and (a bit lower down) -unknown-linux-gnu for x86_64
[06:47:05] <strcat> when we support static linking and LTO, you'll be able to get the best of every world
[06:47:17] <strcat> your development builds can just use incremental static linking
[06:47:20] <Heather> Luqman yes
[06:47:35] <strcat> then, for performance, you can do an expensive LTO build
[06:47:36] <Heather> Luqman so both must be available...
[06:47:56] <cmr> CurlyBrace: If you're on linux you can use the `perf` tool to profile.
[06:48:02] <strcat> so at that point most modules will probably want to become extern mod...
[06:48:08] <strcat> but until then, no
[06:48:31] <Yurume> and libextra gets weight. :)
[06:49:15] <strcat> Yurume: well what we'd probably want to do is split libstd into many independent modules, and compile them into a single user-facing std.so/std.a/std.bc
[06:49:28] <Yurume> actually, while trying to distribute a Windows build of the application written in Rust, I stumbled across lots of DLLs that have to be distributed as well
[06:49:29] *** Quits: flabbers (Mibbit@moz-1DB2769A.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[06:49:50] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[06:49:56] <CurlyBrace> I will look into that, thanks
[06:49:58] <strcat> Yurume: libgcc, libstdc++, librustrt, libstd
[06:50:02] <Yurume> my personal project currently requires about 20 MiB of DLLs...
[06:50:02] <strcat> all of that is from libstd though
[06:50:19] <Sharp> cmr: Pretty sure my new code works (as of stage1 anyway), just need to make sure all the tests still pass since I know a couple of them rely on that error message.
[06:50:23] <strcat> https://github.com/thestinger/rust-core/blob/master/support.rs this is the entire 'runtime' needed, if you're not using libstd
[06:50:38] *** Joins: pnathan (Adium@moz-EF4F82C8.tukw.qwest.net)
[06:50:39] <Yurume> strcat, I also needed libextra anyway
[06:53:41] *** Joins: MisterAbc (bzlandfill@moz-E6C0A70.bootp.virginia.edu)
[06:55:08] *** sam113101 is now known as sam113101_afk
[06:55:29] *** sam113101_afk is now known as sam113101
[06:55:48] *** Quits: test (Mibbit@1914817D.DD5A7578.2B99CF6B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:58:28] *** Joins: test (Mibbit@1914817D.DD5A7578.2B99CF6B.IP)
[06:59:17] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:59:44] *** Joins: dbaupp (Thunderbir@moz-15934519.lns20.syd6.internode.on.net)
[07:03:11] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[07:03:20] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[07:03:52] *** Quits: dbaupp (Thunderbir@moz-15934519.lns20.syd6.internode.on.net) (Ping timeout)
[07:04:13] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:04:32] *** Quits: tikue_ (tikue_star@A64AE68.28259105.689607DE.IP) (Client exited)
[07:05:37] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:06:13] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:07:06] *** Quits: zws3mb (Mibbit@moz-6662234E.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:07:06] <eddyb> http://news.slashdot.org/story/13/10/29/0030245/telegraph-contributor-says-coding-is-for-exceptionally-dull-weirdos
[07:07:23] *** Joins: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net)
[07:07:43] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[07:10:26] <Luqman> ChrisMorgan: cross compiling llvm, let's see how far i can get with this
[07:10:27] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[07:10:28] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[07:10:30] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[07:12:16] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[07:13:17] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[07:14:45] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[07:15:00] *** Joins: panos (panos@moz-211A355F.static.otenet.gr)
[07:15:07] *** Parts: panos (panos@moz-211A355F.static.otenet.gr) ()
[07:15:24] <ChrisMorgan> Luqman: I'm looking forward to hearing from you!
[07:16:40] *** Quits: cdidd (cdidd@moz-D6CE25FC.broadband.corbina.ru) (Input/output error)
[07:16:46] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[07:19:51] <eddyb> http://www.reddit.com/r/programming/comments/1p4j8d/telegraph_coding_is_a_niche_mechanical_skill_a/ ah, the news is 4 days old
[07:19:56] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Connection reset by peer)
[07:20:03] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[07:20:07] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[07:20:54] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:21:17] *** Quits: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com) (Ping timeout)
[07:21:40] *** Quits: nfroidure (nfroidure@moz-8A81D933.w90-34.abo.wanadoo.fr) (Ping timeout)
[07:21:44] <McPherrin> Luqman: you've told me this before -- how do I spawn a new task on a dedicated thread?
[07:21:50] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[07:21:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:22:10] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[07:22:10] *** Quits: relrod (relrod@moz-AABB5D31.redhat.com) (Ping timeout)
[07:22:24] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (Ping timeout)
[07:22:26] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[07:22:29] *** Quits: ofeldt- (ofeldt@moz-5A8D8707.dip0.t-ipconnect.de) (Ping timeout)
[07:22:29] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (Ping timeout)
[07:22:29] *** Quits: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[07:22:30] <McPherrin> one of these days I'll figure out these documentations.
[07:22:31] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Connection reset by peer)
[07:22:31] *** Joins: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net)
[07:22:36] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[07:22:36] *** Quits: StarLight (StarLight@moz-5848D83A.dynamic.avangarddsl.ru) (Ping timeout)
[07:22:36] *** Quits: oberstet (quassel@moz-BCE29FF.dynamic.mnet-online.de) (Ping timeout)
[07:22:41] *** Quits: Zuchto (chat@moz-1FF744E2.members.linode.com) (Ping timeout)
[07:22:41] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[07:22:41] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[07:22:46] <Luqman> McPherrin: use std::task; do task::spawn_sched(task::SingleThreaded) { ... }
[07:22:47] *** Quits: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com) (Ping timeout)
[07:22:47] *** Quits: jxs (joaoxsouls@moz-A7EE0DAF.compute-1.amazonaws.com) (Ping timeout)
[07:22:47] *** Quits: KindOne (KindOne@moz-77FD5389.dynamic.ip.windstream.net) (Ping timeout)
[07:22:47] *** Quits: indirect (indirect@moz-49D42D15.c.ircrelay.com) (Ping timeout)
[07:22:47] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Ping timeout)
[07:22:47] *** Quits: zz_kimundi (kimundi@moz-1D7A8D6E.dip0.t-ipconnect.de) (Ping timeout)
[07:22:47] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[07:22:47] *** Quits: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP) (Ping timeout)
[07:22:49] *** Quits: eco (eco@moz-87840B9D.net) (Ping timeout)
[07:22:51] *** Joins: eco (eco@moz-87840B9D.net)
[07:22:51] *** Joins: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP)
[07:22:52] *** Joins: Zuchto (chat@moz-1FF744E2.members.linode.com)
[07:22:52] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[07:22:53] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[07:22:56] *** Quits: bran (bran@moz-AC832EC7.compute-1.amazonaws.com) (Ping timeout)
[07:22:58] *** Joins: benh (ben@moz-4A0366D2.org)
[07:22:59] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[07:23:00] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[07:23:02] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[07:23:04] *** Joins: StarLight (StarLight@moz-5848D83A.dynamic.avangarddsl.ru)
[07:23:07] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[07:23:07] *** Joins: zz_kimundi (kimundi@moz-1D7A8D6E.dip0.t-ipconnect.de)
[07:23:09] *** Joins: ofeldt (ofeldt@moz-5A8D8707.dip0.t-ipconnect.de)
[07:23:10] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[07:23:15] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[07:23:21] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[07:23:29] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[07:23:30] *** Joins: oberstet (quassel@moz-BCE29FF.dynamic.mnet-online.de)
[07:23:31] *** zz_kimundi is now known as kimundi
[07:23:31] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[07:23:34] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Ping timeout)
[07:23:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:23:45] *** Joins: nfroidure (nfroidure@moz-8A81D933.w90-34.abo.wanadoo.fr)
[07:23:46] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[07:23:48] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[07:23:55] *** Joins: bran (bran@moz-AC832EC7.compute-1.amazonaws.com)
[07:24:43] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[07:24:47] *** Joins: relrod (relrod@moz-AABB5D31.redhat.com)
[07:25:44] <ChrisMorgan> Hmm... on a simple rust-http perf report with running 8 connections/threads at once, over 20% of the time is directly from malloc/free/realloc functions.
[07:25:45] *** Joins: indirect (indirect@moz-49D42D15.c.ircrelay.com)
[07:26:13] *** Joins: KindOne (KindOne@moz-77FD5389.dynamic.ip.windstream.net)
[07:26:22] *** Joins: jxs (joaoxsouls@moz-A7EE0DAF.compute-1.amazonaws.com)
[07:27:34] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:31:27] *** Joins: Ms2ger (Ms2ger@moz-EC6C128C.adsl-dyn.isp.belgacom.be)
[07:31:31] *** Quits: inspur (inspurhua@54B0D324.D4DDBED4.B3490680.IP) (Quit: )
[07:33:53] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:34:15] *** Quits: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP) (Quit: Computer has gone to sleep.)
[07:35:41] *** Quits: MisterAbc (bzlandfill@moz-E6C0A70.bootp.virginia.edu) (Quit: CGI:IRC (Ping timeout))
[07:38:01] <Luqman> ChrisMorgan: ok, got librustllvm.so built and now building librustc
[07:38:12] <ChrisMorgan> Ooh!
[07:39:44] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:40:52] <strcat> ChrisMorgan: do you use a lot of vectors?
[07:40:56] <strcat> or strings
[07:42:19] <CurlyBrace> ChrisMorgan, is this for the OS assignment?
[07:42:41] <ChrisMorgan> CurlyBrace: no, I'm not a student of that course
[07:42:41] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[07:42:43] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[07:42:49] <CurlyBrace> ah, thanks anyway
[07:43:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:43:06] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[07:43:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[07:43:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:43:32] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[07:44:07] <ChrisMorgan> strcat: I was using my "info" server example. Most of the time is spent in the request handling stage. It does do some stuff with strings.
[07:45:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:45:42] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[07:45:49] *** Joins: gavinb (gavinb@7D889947.4B34258A.6F50E8A8.IP)
[07:51:06] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[07:54:01] *** Quits: Ms2ger (Ms2ger@moz-EC6C128C.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[07:56:32] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[07:57:29] *** Quits: gavinb (gavinb@7D889947.4B34258A.6F50E8A8.IP) (Quit: gavinb)
[08:00:15] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[08:00:44] *** Quits: kimundi (kimundi@moz-1D7A8D6E.dip0.t-ipconnect.de) (Ping timeout)
[08:00:44] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[08:00:47] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[08:00:55] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[08:00:55] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[08:00:55] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[08:00:58] *** Quits: ofeldt (ofeldt@moz-5A8D8707.dip0.t-ipconnect.de) (Ping timeout)
[08:00:58] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[08:00:58] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[08:00:58] *** Quits: a__ (a__@moz-6F5CFC76.nycmny.fios.verizon.net) (Ping timeout)
[08:01:04] *** Quits: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[08:01:04] *** Quits: dg (dg@moz-AF6F3E94.com) (Ping timeout)
[08:01:07] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[08:01:10] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[08:01:10] *** Quits: ato (ato@moz-9CC2E667.no) (Ping timeout)
[08:01:10] *** Quits: ski (md9slj@moz-E5796727.student.chalmers.se) (Ping timeout)
[08:01:10] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[08:01:10] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Ping timeout)
[08:01:10] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[08:01:15] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Ping timeout)
[08:01:15] *** Quits: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP) (Ping timeout)
[08:01:15] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[08:01:16] *** Joins: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP)
[08:01:22] *** Quits: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP) (Ping timeout)
[08:01:22] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Ping timeout)
[08:01:22] *** Quits: bodie_ (bodie@moz-10569756.cmdnnj.fios.verizon.net) (Ping timeout)
[08:01:22] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[08:01:22] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[08:01:22] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[08:01:22] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[08:01:22] *** Quits: adrusi (adrusi@moz-392E7E0.bltmmd.fios.verizon.net) (Ping timeout)
[08:01:22] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[08:01:22] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[08:01:22] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Ping timeout)
[08:01:22] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[08:01:25] *** Quits: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP) (Ping timeout)
[08:01:28] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Ping timeout)
[08:01:34] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[08:01:34] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[08:01:34] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[08:01:35] *** Quits: nfroidure (nfroidure@moz-8A81D933.w90-34.abo.wanadoo.fr) (Ping timeout)
[08:01:39] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[08:01:42] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[08:01:55] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[08:01:59] *** Joins: bodie (bodie@moz-10569756.cmdnnj.fios.verizon.net)
[08:01:59] *** Joins: a__ (a__@moz-6F5CFC76.nycmny.fios.verizon.net)
[08:01:59] *** Joins: nfroidure (nfroidure@moz-8A81D933.w90-34.abo.wanadoo.fr)
[08:02:02] *** Joins: ato (ato@moz-9CC2E667.no)
[08:02:07] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:02:09] *** Joins: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net)
[08:02:11] *** Quits: saati (s@moz-11469F61.harmless.hu) (Ping timeout)
[08:03:00] *** Joins: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP)
[08:03:04] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[08:03:08] *** Joins: jpf (jan@moz-A8C26A15.org)
[08:03:23] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:03:33] *** Joins: benh (ben@moz-4A0366D2.org)
[08:03:43] *** Joins: ofeldt (ofeldt@moz-5A8D8707.dip0.t-ipconnect.de)
[08:03:45] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[08:03:52] *** Quits: KindOne (KindOne@moz-77FD5389.dynamic.ip.windstream.net) (Ping timeout)
[08:04:03] *** Joins: ski (md9slj@moz-E5796727.student.chalmers.se)
[08:04:23] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[08:04:24] *** Joins: zz_kimundi (kimundi@moz-1D7A8D6E.dip0.t-ipconnect.de)
[08:04:27] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[08:04:47] *** zz_kimundi is now known as kimundi
[08:04:48] *** Joins: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP)
[08:05:05] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[08:05:32] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[08:05:35] *** Joins: saati (s@moz-11469F61.harmless.hu)
[08:05:42] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[08:06:52] *** Joins: heftig (heftig@moz-3E10DED1.dip0.t-ipconnect.de)
[08:07:00] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[08:07:03] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[08:07:49] *** Joins: KindOne (KindOne@moz-77FD5389.dynamic.ip.windstream.net)
[08:08:04] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[08:08:40] *** Joins: squiddy (squiddy@moz-F163EC01.adsl.alicedsl.de)
[08:11:02] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[08:11:41] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[08:17:55] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[08:22:26] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[08:23:27] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[08:23:46] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[08:25:11] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[08:26:46] *** Quits: CurlyBrace (Mibbit@5D58FB7.D41652FF.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:27:39] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[08:27:39] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[08:27:42] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[08:28:25] *** Quits: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[08:29:27] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:31:18] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[08:31:31] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[08:31:58] *** Quits: heftig (heftig@moz-3E10DED1.dip0.t-ipconnect.de) (Quit: Quitting)
[08:32:39] <reedlepee> dbaupp: Could you give some hints about the bug https://github.com/mozilla/rust/issues/7743
[08:33:52] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[08:34:40] *** Quits: RMF (RMF@moz-1EE56143.dsl.telepac.pt) (Ping timeout)
[08:34:41] <dbaupp> reedlepee: resurrect https://github.com/mozilla/rust/pull/8016
[08:34:49] *** flaper87|afk is now known as flaper87
[08:35:02] *** Joins: autra_ (augustin@moz-2EA7A1DF.fullsix.com)
[08:35:05] <dbaupp> reedlepee: that is a patch for that bug, but there were some problems at the time that meant it couldn't land.
[08:36:11] <dbaupp> ChrisMorgan: are you using a lot of streams for the malloc/free/realloc benchmark? (they allocate each message at the moment)
[08:38:05] *** Joins: Jackneill (Jackneill@moz-FFCD5077.pool.digikabel.hu)
[08:40:12] <ChrisMorgan> dbaupp: sure, it goes writing quite a few times.
[08:42:39] <dbaupp> ChrisMorgan: I meant std::comm::stream() (i.e. Port & Chan)
[08:44:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:44:26] <TeXitoi> how can I iter on lines in stdin in current, because since std::io is removed, I can't find something as 0.8 each_lines() ?
[08:45:44] <TeXitoi> (and line_iter() do not work, even if it is refered in the master std::rt::io documentation)
[08:45:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:46:09] <Luqman> ChrisMorgan: success!
[08:46:28] <Luqman> i got rustc running on arm and was able to compile and run a simple hello world
[08:47:03] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:48:06] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[08:49:00] <Luqman> ChrisMorgan: don't know if you saw before you timed out but i got it working
[08:50:40] *** Joins: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP)
[08:52:04] <McPherrin> Luqman: sweet
[08:52:13] <McPherrin> Luqman: Now can you boostrap? :D
[08:52:49] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[08:53:15] <Luqman> yea, i guess i can make a stage0 compiler for arm/linux now
[08:53:29] <Luqman> but i do dread testing it on this arm board :P
[08:53:30] *** Joins: alonlevy (alon@moz-87959726.redhat.com)
[08:54:46] <McPherrin> Luqman: Using the TS7800?
[08:55:12] <McPherrin> You're probably better off finding somebody with an android device with more ram..
[08:55:23] <Luqman> McPherrin: yea goto80. someone should really fix binaerpilot :(
[08:55:42] *** pmoore|away is now known as pmoore
[08:55:42] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[08:55:59] <Luqman> well an android phone wouldn't really work for this
[08:56:18] <McPherrin> Well like you could install ubuntu or whatever, right
[08:56:22] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[08:56:43] <McPherrin> I can get you an account on my gumstix board if you want, too
[08:57:33] <Luqman> i wonder how well it would work if i just made a qemu instance on hfcs :P
[08:58:02] <McPherrin> probably better :P
[08:58:13] <McPherrin> You wouldn't thrash to "disk" at least
[08:59:49] <Luqman> haha yea
[09:00:06] <Luqman> anyways, i've got a meeting i should probably not be late for tomorrow so bedtime
[09:03:04] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[09:03:26] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[09:03:58] *** Joins: fabiand (fabiand@moz-A2502B1D.adsl.alicedsl.de)
[09:05:21] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[09:10:28] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:10:56] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[09:11:04] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:12:51] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[09:13:33] *** Joins: nkoep (nik@moz-7C89E6C9.pool.mediaways.net)
[09:18:37] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[09:19:01] <ChrisMorgan> Luqman: marvellous! Can you post some directions?
[09:19:28] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[09:21:18] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Ping timeout)
[09:21:24] * ChrisMorgan doesn't care about being able to compiling rustc with rustc on ARM; 1GB of RAM is far too little for that; but being able to compile other things with rustc on ARM will be great
[09:21:49] <strcat> ChrisMorgan: 1GiB should be enough
[09:21:50] <strcat> it's fixable
[09:21:56] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[09:22:24] <ChrisMorgan> strcat: you mean that in the longer term it should get under that? I'd hope so, but it's not there yet.
[09:22:32] <strcat> it's like 1.4GiB now?
[09:23:19] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[09:23:25] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[09:23:39] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:23:51] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[09:24:00] <ChrisMorgan> Yep. But that 1GB is shared across the entire OS... and Android doesn't even like things using ¾GB and starts killing things left, right and centre by then.
[09:24:08] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[09:28:47] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[09:32:59] *** Joins: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be)
[09:34:23] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[09:35:45] <ChrisMorgan> r? https://github.com/mozilla/rust/pull/10143
[09:37:20] *** Quits: alonlevy (alon@moz-87959726.redhat.com) (Ping timeout)
[09:37:34] <dbaupp> ChrisMorgan: looking...
[09:38:39] <eddyb> pffft, I need a DAG. do I have to use Rc<T>?
[09:39:02] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:39:06] <eddyb> I'm assuming it will be messy without auto-dereference
[09:39:14] <strcat> eddyb: or use a map ;p
[09:39:20] <dbaupp> eddyb: you can use a backing vector and store indices rather than pointerrs
[09:39:42] <eddyb> no, that's worse in my case
[09:39:43] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:39:59] <eddyb> dbaupp: it's not really contained
[09:40:14] <dbaupp> "contained"?
[09:40:40] <eddyb> in JS, I just have objects linked by properties on other objects. GC takes care of the details
[09:41:13] <eddyb> dbaupp: it's not just a DAG, it's objects which can be connected into a DAG
[09:41:33] <Sharp> strcat: Are you still awake?
[09:41:39] <strcat> yes
[09:41:44] <strcat> I shouldn't be, but I am
[09:41:51] <Sharp> How hard do you think https://github.com/mozilla/rust/issues/9890 is?
[09:42:07] <Sharp> It doesn't seem like it should be too bad,
[09:42:09] <eddyb> dbaupp: so I can't put them in a single container (like a backing vector)
[09:42:16] <Sharp> But then again I know nothing about that area :P
[09:43:11] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[09:43:12] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[09:43:31] <strcat> Sharp: well it would be pretty easy if you're familiar with LLVM
[09:43:45] <strcat> http://ix.io/8Nh
[09:43:50] <strcat> that function would ideally not exist...
[09:43:57] <Sharp> I'm not, but I'm willing to be.
[09:44:07] <Sharp> Yeah, I see iter_vec_raw in the source.
[09:44:17] <eddyb> (or capable of figuring out things from the context of your changes :P)
[09:44:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:44:42] <Sharp> Based on the fact that I see a Phi I'm guessing it has something to do with SSA?
[09:44:53] <strcat> Sharp: well it builds up LLVM instructions
[09:45:00] <strcat> and LLVM IR is in SSA form
[09:45:04] <Sharp> Ah, okay.
[09:45:14] <strcat> except it handles pointers/memory outside of SSA
[09:45:48] <eddyb> http://ideone.com/ this needs Rust support ASAP
[09:46:01] * dbaupp nominates eddyb to set it up
[09:46:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:46:11] <strcat> Sharp: so... the issue is that it generates inbounds GEP (pointer arithmetic) instructions
[09:46:20] <eddyb> dbaupp: I don't own the site :(
[09:46:21] * pcmattman also nominates eddyb for setup
[09:46:22] <strcat> and goes past the end for zero-size types
[09:46:24] <Sharp> But with zero size types, it never ends?
[09:46:27] <strcat> it *really* should just make a counter
[09:46:29] <Sharp> Or that.
[09:46:32] <strcat> Sharp: well, it ends
[09:46:37] <dbaupp> eddyb: buy it/hack it, just to add rust :P
[09:46:38] <strcat> it *works*, but it's undefined behaviour
[09:46:43] <strcat> it won't necessarily always work
[09:47:25] <Sharp> I'm uncertain why it works at all, but okay :)  So just generate an index-based loop rather than a pointer arithmetic-based loop?
[09:47:50] <eddyb> why would pointer arithmetic fail?
[09:48:12] <eddyb> is there some way to get the size of () that results in a non-zero value?
[09:48:16] <Sharp> Zero sized types, I believe...
[09:48:17] <strcat> Sharp: well, for zero-size types it really just needs a counter
[09:48:26] <dbaupp> eddyb: LLVM can do optimisations based on certain assumptions, so breaking those assumptions can result in broken code
[09:48:30] <strcat> Sharp: VecIterator in std::vec does this correctly
[09:48:40] <Sharp> Yeah, you mentioned that in the bug.
[09:48:45] <strcat> eddyb: C/C++ pointer arithmetic is undef behaviour when you index more than one byte past the end of the object
[09:48:46] <FreeFull> I read veciterator as velociraptor
[09:48:48] <Sharp> So it seems like I should have enough to work with :)
[09:48:59] <strcat> eddyb: so LLVM has two forms of pointer arithmetic
[09:49:13] <strcat> GEP, which is defined outside object bounds (deref still isn't) and wraps
[09:49:49] <strcat> inbounds GEP, which must be done within object bounds (one byte past the end is fine, which means the start of any sized element one past the end) + has undef behaviour on wrapping
[09:49:57] <strcat> it can be optimized much better.
[09:50:00] <Sharp> I think I even see the bit that VecIterator is doing differently.
[09:50:14] <strcat> Sharp: it branches on size and uses the ptrs as counters via casts to/from int
[09:50:29] <Sharp> Yeah.
[09:50:47] <Sharp> Oh, huh.  That's kind of cool.
[09:50:47] <eddyb> strcat: so the actual problem is that the first byte within the vector is outside the vector?
[09:51:09] <Sharp> Doesn't that assume that pointer size = int size?  Or is that pretty much always the case?
[09:51:12] <eddyb> strcat: I was thinking it was adding a non-zero value
[09:51:14] <strcat> eddyb: well, with zero-size types there basically is no vector ;p
[09:51:27] <strcat> rusti: std::mem::size_of::<[(), ..10000]>()
[09:51:28] <eddyb> Sharp: uint/int are uintptr/intptr
[09:51:28] -rusti- 0u
[09:51:37] <strcat> so, lets say you have an array of 100k zero-size types
[09:51:38] <Sharp> Ah, cool.
[09:51:41] <strcat> and it's a unit struct with a dtor
[09:51:55] <strcat> this iter function will iterator 100k bytes into... somewhere, and each time is undef behaviour
[09:51:59] <strcat> very bad
[09:52:32] <eddyb> a pointer to the vector is outside any element :)
[09:52:32] <strcat> it likely never causes anything bad to happen because I doubt we ever deref that ptr, or *use* it for anything but indexing more - but this is still undef and could break at any time (if it's not already corrupting memory)
[09:52:32] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:52:34] <Sharp> Yeah, that's what I thought… which is why I was confused when you said it would work fine
[09:53:10] <strcat> Sharp: well it's basically that an LLVM optimization pass isn't using this inbounds information in a way that breaks stuff
[09:53:14] <strcat> but it's totally allowed to do so
[09:53:21] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[09:53:21] <strcat> it's just luck that it works now
[09:53:26] <Sharp> Heh.
[09:53:30] <eddyb> strcat: I think I know how to make sense of it: ([(), ..100], int) - a pointer to any element of the vector is inside the int
[09:53:45] <eddyb> so it's outside the vector
[09:53:45] <Sharp> Okay… can I take a stab at fixing it, then?
[09:53:52] <Sharp> Not right now, but tomorrow :)  It's too late to do anything right now.
[09:53:54] <strcat> Sharp: sure :)
[09:53:59] <Sharp> Sweet, thanks!
[09:54:12] <Sharp> I may end up bugging you a bit, hopefully that is okay.
[09:54:16] <strcat> yeah
[09:54:26] <eddyb> Sharp: I guess you could take a look at generated code (with --emit-llvm) for a simple while loop doing the same task
[09:54:52] <strcat> I think that tvec file generates loops with a counter to initialize vectors
[09:55:00] <strcat> maybe that's in expr, I forget
[09:55:11] <eddyb> for [v, ..N]?
[09:55:12] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[09:55:14] <strcat> oh no there is is
[09:55:15] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[09:55:18] <strcat> line 399 in tvec.rs
[09:55:19] <Sharp> I think it's in tvec.
[09:55:23] <Sharp> Yeah.
[09:56:06] <strcat> Sharp: so yeah, it just needs to loop like that and call the function N times with... some arbitrary ptr (null? doesn't matter)
[09:56:25] <Sharp> Can I use mem::size_of like iter() does?
[09:56:32] <Sharp> (For VecIterator).
[09:57:01] <strcat> Sharp: you'll have to use typeof::typeof to get an llvm type for the element type and then ask LLVm for the size
[09:57:05] <strcat> llsizeof_alloc or something
[09:57:09] <Sharp> Ah, okay
[09:57:13] <Sharp> That was the part I wasn't sure about
[09:57:27] <Sharp> Since it wasn't obvious to me how to get the type from ty::t
[09:57:31] *** Joins: RMF (RMF@4EAA63AE.44ED0B2A.7CFB50F9.IP)
[09:57:53] <strcat> Sharp: in common.rs, there's code that checks the size to decide if things are 'immediate'
[09:58:01] <strcat> so you can copy that for the condition
[09:58:21] <Sharp> Ah, thanks
[09:58:31] <Sharp> I see it.
[09:58:35] <strcat> anyway, sleep! :)
[09:58:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[09:58:51] <Sharp> llsize_of_alloc(ccx, llty) etc.
[09:59:25] <Sharp> I, too, should sleep :P
[09:59:33] *** Joins: mib_s3he33 (Mibbit@moz-4D6BA918.superkabel.de)
[09:59:42] *** Parts: mib_s3he33 (Mibbit@moz-4D6BA918.superkabel.de) ()
[09:59:43] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[09:59:43] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[09:59:48] <Sharp> Thanks for all the help, everyone.
[10:00:12] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[10:00:30] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:05:19] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:05:31] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Connection reset by peer)
[10:05:43] *** Joins: sweet_kid (Upasana@7A8B6584.18833892.388CF16F.IP)
[10:06:38] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:10:04] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[10:11:37] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[10:12:51] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:15:41] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[10:15:47] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[10:17:31] *** Joins: Ferreus (ferreus@moz-4F5BA8CC.dip0.t-ipconnect.de)
[10:23:25] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[10:23:42] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[10:29:49] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[10:34:13] <ChrisMorgan> Luqman: any chance of getting directions for building rustc for ARM?
[10:39:41] *** Joins: Amaranth (travis@moz-7D905691.avante-wifi.mozilla.hq)
[10:42:59] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[10:43:05] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[10:43:36] *** Joins: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP)
[10:44:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:45:18] *** Joins: fyolnish (fyolnish@moz-DD178E09.uqwimax.jp)
[10:46:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:47:03] *** Quits: fyolnish (fyolnish@moz-DD178E09.uqwimax.jp) (Ping timeout)
[10:48:19] *** Joins: fyolnish (fyolnish@moz-DD178E09.uqwimax.jp)
[10:49:51] <nmatsakis> ChrisMorgan: argh, I know I promised you fast turnaround, but I forgot :( I will take a look today
[10:50:17] <ChrisMorgan> nmatsakis: no problems, I've been exceptionally busy over the past week and a half too.
[10:50:34] <nmatsakis> ChrisMorgan: can you resend me the branch name? there is no open PR, right?
[10:51:09] <ChrisMorgan> Details at https://github.com/mozilla/rust/issues/5992#issuecomment-22258296
[10:51:25] <ChrisMorgan> chris-morgan/rust/augmented-assignment
[10:52:10] * ChrisMorgan didn't think of opening a PR for it, given that it was known to be incomplete
[10:52:30] <nmatsakis> ChrisMorgan: that's fine, i'll take a look
[11:00:16] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Client exited)
[11:00:51] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:03:11] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[11:03:26] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[11:16:38] *** Quits: RMF (RMF@4EAA63AE.44ED0B2A.7CFB50F9.IP) (Quit: Computer has gone to sleep.)
[11:16:41] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[11:17:14] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[11:19:36] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[11:20:05] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[11:22:26] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[11:23:07] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[11:23:29] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[11:24:42] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:24:51] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:26:34] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:30:50] *** flaper87 is now known as flaper87|afk
[11:38:52] *** Joins: Blub\w (wry@AE75993.49E09875.28B38467.IP)
[11:39:01] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[11:43:12] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:44:09] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[11:44:26] *** Quits: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be) (Quit: lunch)
[11:45:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:46:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:49:23] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[11:52:21] <steffenomak> hello peeps, can some one explain why i need a space after first argument in a function to make the next align if I break the parameters apart by a newline?
[11:54:49] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[11:55:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:59:31] <pnkfelix> nmatsakis: ping
[12:04:11] <dbaupp> steffenomak: sounds like a bug with the rust settings for editor you are using... which editor?
[12:04:29] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[12:05:46] *** Quits: sweet_kid (Upasana@7A8B6584.18833892.388CF16F.IP) (Quit: Leaving)
[12:06:08] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[12:09:15] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[12:09:28] <steffenomak> dbaupp: Ohhh I forgot to tell that I use vim
[12:12:13] <dbaupp> ChrisMorgan: https://botbot.me/mozilla/rust/msg/7333945/
[12:12:22] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[12:12:37] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[12:12:58] <ChrisMorgan> steffenomak: the Vim indent rules are a long way from perfect, unfortunately.
[12:13:46] <ChrisMorgan> One of my longer-term goals is to implement solid indentation for it. As it is, it's mostly cindent with a few custom rules.
[12:14:02] <steffenomak> ChrisMorgan: Ok, so what editor has the best rust indent rules?
[12:14:10] <ChrisMorgan> Probably Vim.
[12:16:26] <steffenomak> ChrisMorgan: Ok, but overall the rust intendation is quite good in vim, it's just that one space that is wierd.
[12:16:40] <ChrisMorgan> I assure you, there are a few other places it's suboptimal, too.
[12:16:50] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[12:17:27] <ChrisMorgan> As a matter of fact, I was not aware of the fact that adding a space made it get the indentation correct. I'll take a look at the matter.
[12:18:19] <steffenomak> ChrisMorgan: And you only have to do it the first time, the other arguments line up as they should
[12:18:23] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[12:19:20] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[12:20:51] *** Quits: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP) (Quit: Computer has gone to sleep.)
[12:22:38] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[12:23:01] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[12:23:04] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[12:24:05] <steffenomak> ChrisMorgan: But when I have you attention, I have some problems solving some bindings issues that probably going to pop up some more. But only if you have time. 
[12:24:40] <ChrisMorgan> Sure.
[12:25:47] *** Quits: squiddy (squiddy@moz-F163EC01.adsl.alicedsl.de) (Ping timeout)
[12:33:06] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[12:36:24] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[12:38:05] <steffenomak> When a C function returns a pointer to a struct and in the struct you have an array of structs. How do I translate that to rust, bacause the struct has some of it's own memory managment and ref counting.
[12:38:45] <steffenomak> I know I can use some sort of cast::transmutate but will that still point to the same memory as the original struct?
[12:39:31] <mletterle> this may be a silly question.. but is there some way to get a matched value other then doing let i = somevar first?
[12:40:11] <bstrie> steffenomak: transmute doesn't change the location of whatever you've transmuted
[12:40:19] *** bhearsum|afk is now known as bhearsum
[12:40:27] <bstrie> mletterle: not sure what you mean?
[12:40:46] <bstrie> mletterle: you can do `match somevar {`, if that's what you're asking
[12:42:11] <steffenomak> bstrie: Ok, so I have 2 rust structs that are equivalent to the C structs, and one of the structs has an array of the other one, will the transmutate work on the array?
[12:43:20] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[12:43:25] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[12:43:33] <bstrie> I'm not super familiar with transmute, so I can't say for sure
[12:43:41] <bstrie> why do you want to transmute it?
[12:43:52] <bstrie> rust structs should be equivalent in memory layout to C structs
[12:44:02] *** Joins: maik (maik@moz-B2E82E80.dip0.t-ipconnect.de)
[12:44:02] <mletterle> bstrie: match FunctionCall() { match _ => /* Anyway to get functionCall's return value? * / }
[12:44:34] <ChrisMorgan> mletterle: not if you ignored it with the pattern _.
[12:44:49] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Input/output error)
[12:44:55] <steffenomak> bstrie: Yes that I know, but the problem I have is with the array in the struct. But I'll try and see what happens if I have a regular unsafe pointer in the struct.
[12:45:00] <bstrie> mletterle: what's the match statement for, then? do you want the match statement to also return something, as well as storing the return value of the function call somewhere?
[12:45:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:45:28] <mletterle> bstrie: Maybe I want to pass that value to another function by default, say.
[12:46:30] <ChrisMorgan> steffenomak: `struct A { bees: ~[B] }`, I don't see what the precise problem is. Are you wanting to use it across the language boundary?
[12:46:58] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[12:46:59] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:47:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:47:25] <ChrisMorgan> mletterle: what is the function call returning? An enum?
[12:48:08] <jdm> steffenomak: if you have an unsafe pointer and a length, you can use vec::from_buf I suppose
[12:48:22] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Quit: Ex-Chat)
[12:48:31] <jdm> steffenomak: or vec::raw::buf_as_slice
[12:49:46] <mletterle> contrived example:     match 5 { 1 =>  println("It was 1") , _ => println(format!("{} is alot!", /*can't do it? */))  }
[12:50:02] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[12:50:20] <steffenomak> jdm: that much I have read, but maybe I havent been clear enough. As the thing I'm working on is to implement http://wiki.libsdl.org/SDL_Palette?highlight=%28%5CbCategoryStruct%5Cb%29%7C%28CategoryPixels%29 form sdl2
[12:50:21] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:50:25] <mletterle> of course if i do "let i = 5" and match on i I can just pass in i, just curious if there was a way to avoid the variable assignment.
[12:50:35] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[12:51:17] <jdm> steffenomak: right. I recommend an unsafe pointer and using vec::raw::buf_as_slice with the length in that structure
[12:51:40] <ChrisMorgan> mletterle: sure, just bind it immediately.
[12:51:41] <jdm> er, assuming that ncolors is related to colors
[12:51:42] <ChrisMorgan> rusti: match 5 { 2 => println("It was two."), n => println!("It was {}", n) }
[12:51:43] -rusti- It was 5
[12:51:43] -rusti- ()
[12:52:01] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[12:52:11] <adridu59> acrichto: hi, are you there?
[12:52:45] <steffenomak> jdm: I'll take a look and do some tests to see how it works.
[12:53:21] *** Quits: StarLight (StarLight@moz-5848D83A.dynamic.avangarddsl.ru) (Ping timeout)
[12:54:10] <mletterle> Ah
[12:54:14] <mletterle> sweet. Thanks!
[12:54:47] <mletterle> Should have thought of that from enum variant matching 
[12:55:36] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:59:24] *** Quits: vu3rdd (vu3rdd@moz-E083170.cisco.com) (Ping timeout)
[13:00:25] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[13:01:20] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[13:01:22] <ChrisMorgan> steffenomak: on the function indentation thing, it looks like my indent rules are what's causing the trouble there; cindent() gets them right. I'll pinpoint it now.
[13:01:59] <steffenomak> ChrisMorgan: nice to hear, would like to help, but I
[13:02:27] <steffenomak> 'm still a total noob when it comes to vim.
[13:03:10] <ChrisMorgan> Ah, found it. Fixing it.
[13:04:09] *** Joins: StarLight (StarLight@moz-5848D83A.dynamic.avangarddsl.ru)
[13:04:25] *** Joins: judder (maradukewa@218D70FD.A9DBEB8D.78E362FE.IP)
[13:05:49] *** kimundi is now known as zz_kimundi
[13:11:31] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:13:02] <mletterle> oh.. why did I run make clean?
[13:13:47] *** Joins: tav (tav@moz-40D7C5F6.range109-154.btcentralplus.com)
[13:13:52] <ChrisMorgan> Because you enjoy waiting for Rust to build.
[13:14:00] <dbaupp> mletterle: because you're cold and want to get some CPU heating going
[13:14:20] <mletterle> all good answers
[13:14:46] <dbaupp> (fortunately make clean doesn't clean LLVM)
[13:15:05] <mletterle> indeedy
[13:15:13] *** Joins: Ms2ger (Ms2ger@moz-EC6C128C.adsl-dyn.isp.belgacom.be)
[13:16:47] <ChrisMorgan> So you'll want to do that, too.
[13:17:16] <dbaupp> while :; do make -j10 check & done
[13:17:24] <mletterle> Survival Tips: if you're trapped in the tundra with your laptop, compiling rust could save your life!
[13:18:08] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Ping timeout)
[13:18:30] <ChrisMorgan> steffenomak: quick fix for that indent problem: after the ``\ && s:get_line_trimmed(a:lnum) !~ "^\\s*[\\[\\]{}]"`` line in src/etc/vim/indent/rust.vim, put this line: ``\ && prevline !~ "^\\s*fn\\s"``
[13:18:33] <Yoric> From what I understand, it's even better if you build under Windows.
[13:18:57] <mletterle> still meaning to do that eventually...
[13:18:59] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[13:19:09] <Yoric> Getting the tundra on fire?
[13:19:49] <mletterle> in not so many words.
[13:21:11] <ChrisMorgan> And it'd be even better compiling it on ARM... any instructions on compiling it for ARM yet, Luqman?
[13:21:45] <steffenomak> ChrisMorgan: It fixes that intendation problem, thx
[13:21:48] *** Joins: alonlevy (alon@moz-87959726.redhat.com)
[13:23:29] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[13:25:01] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[13:25:11] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[13:26:33] *** zz_kimundi is now known as kimundi
[13:26:53] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[13:27:07] *** Joins: gem (nandaja@DDFD6BF2.6DA6875B.2C7B20EF.IP)
[13:27:38] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[13:29:00] <erickt> ugh, is anyone able to compile rust on mavericks? it used to work for me, but for some reason it's now complaining about `clang: error: argument unused during compilation: '-I /Users/erickt/rust/rust/src/rt'
[13:29:20] <ChrisMorgan> r? https://github.com/mozilla/rust/pull/10149 (Vim syntax/indent updates)
[13:29:49] <bstrie> erickt: did you reinstall the xcode tools?
[13:29:50] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:30:03] <erickt> bstrie: i did!
[13:30:56] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[13:31:38] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:32:05] <erickt> ChrisMorgan: r+
[13:32:17] <ChrisMorgan> Thanks.
[13:32:22] <bstrie> erickt: this is your punishment for enabling a company that's forcing us to type the word "mavericks" hundreds of times over the next decade
[13:32:50] <bstrie> like, jeez. pick a shorter codename
[13:32:54] <erickt> lol
[13:32:58] <ChrisMorgan> "maverick"
[13:33:06] <Ms2ger> How about "bonobo"?
[13:33:13] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[13:33:23] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[13:33:31] <erickt> bstrie: looks like we could add "-Qunused-arguments" to the clang command line to get it to work
[13:33:52] <jdm> Ms2ger: Namoroka
[13:34:03] *** Joins: sk (sk@78B6911C.1BDAABAD.4AC61A50.IP)
[13:34:11] <Ms2ger> jdm, heh, I think that was before my time
[13:34:12] * ChrisMorgan wonders whether he should post to the mailing list requesting that developers changing the prelude please update the appropriate syntax files or whether he should just make a script to do it first
[13:34:17] <Ms2ger> Though I may have run it
[13:35:44] <adridu59> rusti: ::std::rt::io::stdio::println("test")
[13:35:45] -rusti- test
[13:35:45] -rusti- ()
[13:35:51] <adridu59> rusti: std::rt::io::stdio::println("test")
[13:35:51] -rusti- test
[13:35:51] -rusti- ()
[13:40:18] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[13:40:31] *** Quits: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net) (Input/output error)
[13:41:08] *** Quits: Amaranth (travis@moz-7D905691.avante-wifi.mozilla.hq) (Quit: Linkinus - http://linkinus.com)
[13:41:21] *** Quits: Blub\w (wry@AE75993.49E09875.28B38467.IP) (Quit: cya later or tomorrow or something)
[13:43:20] *** jorendorff_away is now known as jorendorff
[13:43:25] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[13:43:43] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[13:45:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:45:54] <erickt> bstrie: turns out it was being caused by ccache *somehow*
[13:46:08] <erickt> removing it from my path got it to work
[13:47:06] <bstrie> amusing
[13:47:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:47:39] *** Quits: sk (sk@78B6911C.1BDAABAD.4AC61A50.IP) (Ping timeout)
[13:48:05] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[13:48:48] <pnkfelix> erickt: that's disturbing.  Do you use `configure --enable-ccache`, or are you saying ccache got in the way without your even asking for it?
[13:48:57] <erickt> rust's build daemon: "how dare you try to save time compiling rust! I'm going to trick you into doing `git clean -xfd` so you now have to rebuild llvm too! hahahaha!"
[13:49:23] <erickt> pnkfelix: I did not, I just added homebrew's ccache bin directory in my path
[13:50:18] *** flaper87|afk is now known as flaper87
[13:51:56] <pnkfelix> erickt: bizarre.  I guess I'll keep an eye out for that when I upgrade to Mvrcks
[13:52:00] *** Joins: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:53:03] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[13:53:28] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Ping timeout)
[13:54:57] *** Parts: judder (maradukewa@218D70FD.A9DBEB8D.78E362FE.IP) ()
[13:55:27] *** Quits: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:56:45] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[13:57:04] <maik> ChrisMorgan, shouldn't we make a seperate repo for the vim files? So that everyone can just update them with vundle etc?
[14:00:06] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[14:00:08] *** Joins: benh (ben@moz-4A0366D2.org)
[14:00:52] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[14:01:01] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[14:01:39] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: Textual IRC Client: www.textualapp.com)
[14:06:32] *** Quits: gem (nandaja@DDFD6BF2.6DA6875B.2C7B20EF.IP) (Ping timeout)
[14:06:54] *** Joins: mindcat_ (mindcat@F7D929F.C6D6E0F5.857BDFA9.IP)
[14:07:02] *** Quits: mindcat (mindcat@BF818C7F.B1E12A5D.57E3C596.IP) (Ping timeout)
[14:07:20] *** Joins: gem (nandaja@DDFD6BF2.6DA6875B.2C7B20EF.IP)
[14:07:24] *** Quits: mindcat_ (mindcat@F7D929F.C6D6E0F5.857BDFA9.IP) (Connection reset by peer)
[14:07:26] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[14:08:36] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[14:08:37] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[14:09:20] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[14:09:29] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:11:54] *** Joins: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP)
[14:13:53] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:14:40] <TeXitoi> someone to review/comment https://github.com/mozilla/rust/pull/10145 please?
[14:15:20] *** Joins: sweet_kid (Upasana@7A8B6584.18833892.388CF16F.IP)
[14:15:25] <bstrie> TeXitoi: I'll take a look
[14:15:31] <TeXitoi> bstrie: thanks
[14:15:46] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[14:16:06] <bstrie> TeXitoi: is adding parallelization *also* breaking the shootout directives? :)
[14:16:28] <bstrie> TeXitoi: also, did you benchmark before and after the changes?
[14:17:00] <TeXitoi> I benchmarked
[14:17:14] <bstrie> what are the results like?
[14:17:15] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[14:17:32] <TeXitoi> parallelisation is not necessary to solve the issue
[14:18:29] <TeXitoi> before : with 10, do not pass with 1Go ram on 32bits, after, it pass easy
[14:18:52] <bstrie> awesome
[14:20:55] <bstrie> one sec
[14:21:20] *** Quits: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP) (Connection reset by peer)
[14:21:28] *** Quits: lerc (quassel@moz-1AC1A28C.telstraclear.net) (Ping timeout)
[14:21:47] *** kimundi is now known as zz_kimundi
[14:22:05] *** Joins: lerc (quassel@moz-2A8CFEEE.telstraclear.net)
[14:22:24] *** Joins: mindcat (mindcat@6C25F822.EEF2A000.F956842C.IP)
[14:23:13] *** Quits: fabiand (fabiand@moz-A2502B1D.adsl.alicedsl.de) (Ping timeout)
[14:23:47] *** zz_kimundi is now known as kimundi
[14:24:06] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[14:25:31] *** Joins: mib_vf7ewj (Mibbit@4BED3CB3.F5F53E8A.2D6DB75E.IP)
[14:27:05] *** Joins: fabiand (fabiand@moz-A2502B1D.adsl.alicedsl.de)
[14:28:26] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[14:29:18] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:29:37] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:31:07] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[14:32:47] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[14:33:54] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[14:34:32] *** Quits: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[14:35:14] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[14:35:33] *** Quits: maik (maik@moz-B2E82E80.dip0.t-ipconnect.de) (Ping timeout)
[14:35:36] *** Joins: mib_mt47oq (Mibbit@moz-E1532C88.amazon.com)
[14:35:54] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[14:36:33] *** Joins: maik (maik@moz-B2E82E80.dip0.t-ipconnect.de)
[14:38:50] <mib_mt47oq> If tasks map to OS threads in M:N fashion, what happens when M < N? Does it default to using a single core?
[14:39:23] <adridu59> TeXitoi: nice work
[14:40:03] <TeXitoi> adridu59: thanks :)
[14:40:40] *** Joins: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP)
[14:41:31] <sp3d> mib_mt47oq: I think it's assumed that #tasks>=#threads in general, but because of libuv doing e.g. file IO in its own thread Rust can actually have more threads running than tasks
[14:41:41] <cmr> mib_mt47oq: if you only spawn one scheduler, they'll only use one core.
[14:41:41] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[14:41:41] <TeXitoi> added comment corresponding to bstrie questions
[14:42:37] *** Quits: jstevans (Instantbir@moz-3FA45308.bootp.virginia.edu) (Ping timeout)
[14:43:27] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[14:43:27] *** Quits: tav (tav@moz-40D7C5F6.range109-154.btcentralplus.com) (Ping timeout)
[14:43:41] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[14:43:48] *** Quits: alonlevy (alon@moz-87959726.redhat.com) (Ping timeout)
[14:43:53] <bstrie> TeXitoi: still gonna be a bit until I get around to a review
[14:44:08] <bstrie> TeXitoi: does this actually *completely* fix the issue mentioned in the commit message?
[14:44:44] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[14:44:45] *** Joins: tav (tav@moz-40D7C5F6.range109-154.btcentralplus.com)
[14:44:52] <mib_mt47oq> Thanks for the answers. I'm trying to identify best practices for the rust model of concurrency. For example, if I have a task that does one thing, but it does it a lot more than other tasks, should I be spawning two of them? Or can one task load balance across multiple cores?
[14:45:14] *** Joins: zagabar (zagabar@BC4D85C9.B543C4DE.3933CC16.IP)
[14:45:47] <mib_mt47oq> (Interpreting the rust model as spinning up tasks for dedicated purposes a la Servo)
[14:45:59] <cmr> mib_mt47oq: if you want parallelism you need to spawn more schedulers.
[14:46:01] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:46:41] *** Quits: mindcat (mindcat@6C25F822.EEF2A000.F956842C.IP) (Ping timeout)
[14:46:46] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[14:47:04] <mib_mt47oq> what is the difference between spawning more schedulers and spawning more tasks? 
[14:47:24] <mib_mt47oq> I don't remember anything about spawning schedulers in the tutorial
[14:47:45] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:49:02] <cmr> hm it looks like this has changed, nevermind
[14:50:48] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[14:51:20] *** Joins: mindcat (mindcat@B18B7E0A.90785442.291A146C.IP)
[14:52:21] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Ping timeout)
[14:56:29] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[14:58:39] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[15:00:12] <mib_mt47oq> is that the same alonlevy from pedestrianobservations?
[15:00:31] <alonlevy> mib_mt47oq, no
[15:00:39] <alonlevy> at least I don't recall anything with that name
[15:00:45] <alonlevy> it's a pretty common name
[15:00:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:01:16] <mib_mt47oq> okay, sorry about that. its just an urbanism blog I follow
[15:01:26] <alonlevy> yeah, just googled it
[15:02:01] <alonlevy> np
[15:02:12] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[15:02:59] *** Joins: MX80 (MX80@moz-5BB6C0C8.dsl.g3telecom.net)
[15:05:51] <TeXitoi> bstrie: the issue, as I understant it, is "with 10, on 64 bits with 4GB of ram, it fails
[15:06:26] *** Quits: victorporof_ (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[15:06:45] <TeXitoi> I do not have a 4GB 64bits machine, but I am confident my pull request fix that
[15:07:36] <TeXitoi> the old version just do not desallocate any memory, witch was rothly exp(exp(N))
[15:08:27] <TeXitoi> now, it desallocates a lot, as asked by the shootout benchmarck, and the space complexity is exp(N), so an order of magnitude lesser
[15:08:38] <TeXitoi> bstrie: does it answer your question ?
[15:09:29] <bstrie> TeXitoi: also, one last question
[15:09:33] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[15:09:45] <bstrie> TeXitoi: can you link to the benchmark page that mentions this requirement to deallocate
[15:11:05] *** kimundi is now known as zz_kimundi
[15:11:24] <TeXitoi> bstrie: http://benchmarksgame.alioth.debian.org/u32/performance.php?test=binarytrees
[15:11:48] <TeXitoi> Each program should [...] allocate, walk, and deallocate many bottom-up binary trees
[15:12:05] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[15:12:15] <bstrie> TeXitoi: bonus question! :) can you run the first-place C program on that page, and see how our time compares?
[15:12:20] <bstrie> just for my own curiosity :)
[15:13:18] <TeXitoi> bstrie: I can't right now as I'm at work, but I should have the time in 4-5 hours
[15:13:53] <TeXitoi> I suspect it should be comparable to the best c++ version using boost::pool, but that is just my intuition
[15:14:58] <bstrie> TeXitoi: according to that page, the best C++ is still 4x slower than C :P
[15:15:07] <bstrie> surely we can do better than that
[15:15:08] <TeXitoi> (so slower than the best C version, as it does not free/malloc between iteration, but just reuse the allocated memory)
[15:16:01] <bstrie> what tricks does that java version use to be twice as fast as the C++ version?
[15:16:05] *** Quits: mib_vf7ewj (Mibbit@4BED3CB3.F5F53E8A.2D6DB75E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:16:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:17:11] <TeXitoi> bstrie: it uses the garbage collector, and the C++ version just basically do new/delete at each iterations
[15:17:23] *** Joins: adu (ajr@moz-1A861F1E.washdc.fios.verizon.net)
[15:18:05] <TeXitoi> malloc(, realloc)*, free at each iteration to be precise
[15:18:22] <TeXitoi> as my rust version
[15:18:55] <TeXitoi> to reuse the memory, I suspect Arena should change, or use unsafe code, or something like that
[15:19:16] <TeXitoi> (note that I program in rust since 10 days)
[15:19:25] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[15:19:26] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[15:19:31] <bstrie> haha
[15:19:42] <bstrie> well you are probably better at rust than I am, and I've been here for two years :P
[15:19:46] <bstrie> <-- lazy
[15:20:19] <TeXitoi> I have backgroud in OCaml, Haskell and C++, it helps ;)
[15:21:30] *** Joins: jstevans (Instantbir@moz-111C0031.bootp.virginia.edu)
[15:21:54] *** jorendorff is now known as jorendorff_away
[15:22:12] <TeXitoi> I have to go, feel free to ask anything else on the pull request
[15:22:45] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[15:22:52] <bstrie> will do
[15:22:54] *** Quits: gem (nandaja@DDFD6BF2.6DA6875B.2C7B20EF.IP) (Ping timeout)
[15:23:10] *** Joins: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[15:23:44] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[15:24:03] *** Quits: mib_mt47oq (Mibbit@moz-E1532C88.amazon.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:24:59] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[15:25:45] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:27:49] *** Joins: gem (nandaja@27576FFD.192CB06D.D33C5897.IP)
[15:28:42] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[15:30:26] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:30:45] <Sharp> bstrie: You could statically allocate memory per green thread, then it would be thread safe and as fast as the C version!
[15:31:13] <Sharp> (And slow down thread creation!)
[15:37:44] *** Quits: maik (maik@moz-B2E82E80.dip0.t-ipconnect.de) (Ping timeout)
[15:38:41] <shadower> is it possible to use concat_idents! with a method call? 
[15:38:49] <shadower> I'm trying to do something like this: https://gist.github.com/tomassedovic/7217029
[15:39:20] <shadower> i.e. add a common prefix to a bunch of methods with a macro
[15:40:07] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[15:40:20] <Sharp> As far as I know, macros only operate on syntax trees, so it shouldn't care whether what you're calling is a method or not (in principle anyway).
[15:40:44] <Sharp> (Or defining).
[15:40:49] <shadower> yeah
[15:41:11] <shadower> should I file an issue then?
[15:41:15] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[15:41:22] <benh> but macro invocations can't show up at arbitrary places in the ast, only at expression or item positions :/
[15:41:22] * Sharp probably isn't the best person to ask :)
[15:41:51] <Sharp> Aren't method names items?  No?
[15:42:06] <Sharp> Or method definitions, anyway?
[15:42:07] <benh> no, items are method definitions and that sort of thing
[15:42:25] <benh> you can't do "2 return_a_plus_symbol!() 2" either
[15:42:25] *** Quits: mindcat (mindcat@B18B7E0A.90785442.291A146C.IP) (Quit: Lost terminal)
[15:42:49] <eddyb> isn't ,* wrong there?
[15:42:55] <eddyb> shouldn't it be ||*?
[15:43:03] <shadower> eddyb: oh yeah, sorry
[15:43:12] <Sharp> You can't, eddyb?  Laaame (actually, that kind of makes sense :P)
[15:43:25] <Sharp> Er, benh.
[15:43:25] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[15:43:37] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[15:46:26] *** Joins: aeqwa (aeqwa@moz-3879D0B8.dsl.tropolys.de)
[15:46:37] *** Quits: aeqwa (aeqwa@moz-3879D0B8.dsl.tropolys.de) (Quit: WeeChat 0.4.3-dev)
[15:46:41] *** Joins: aeqwa (aeqwa@moz-3879D0B8.dsl.tropolys.de)
[15:46:42] <shadower> the unified function/method call proposal from the ML would help here I think. One could write: concat_idents!(has_, $property)($obj)
[15:48:21] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[15:50:52] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[15:51:59] *** Joins: cdidd (cdidd@moz-29E84F8B.broadband.corbina.ru)
[15:52:19] *** jorendorff_away is now known as jorendorff
[15:52:50] <benh> you could also do something like call_concat!(receiver, method, name, fragments)
[15:52:53] <mletterle> You get some weird errors when you and your dependent crates were built on different versions of rust
[15:53:27] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[15:53:28] <SimonSapin> How does str::rc deal with cycles?
[15:53:45] <Ms2ger> SimonSapin, not?
[15:53:47] <shadower> benh: I thought about doing that, but I couldn't figure out how to implement it
[15:54:03] <cmr> SimonSapin: Cycles aren't allowed, the type system ensures that.
[15:54:18] <SimonSapin> cmr: How?
[15:54:27] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:54:48] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:54:51] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[15:54:52] <Sharp> Rust doesn't usually let you create cycles as far as I can tell :P
[15:55:05] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Ping timeout)
[15:55:15] <benh> shadower: aw, maybe i was a bit optimistic there
[15:55:37] <cmr> SimonSapin: it requires the type to be Freeze
[15:56:09] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[15:56:31] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:56:39] <SimonSapin> I see, thanks cmr 
[15:56:45] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:57:40] *** Joins: maik (maik@moz-FE083F80.dip0.t-ipconnect.de)
[15:58:36] <mletterle> kinda cool to see work you've done discussed by others.
[16:00:08] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:00:21] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:00:47] *** Quits: maik (maik@moz-FE083F80.dip0.t-ipconnect.de) (Ping timeout)
[16:02:04] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:06:45] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[16:07:58] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[16:07:58] *** ChanServ sets mode: +o jdm
[16:09:14] *** Joins: jdm_ (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:09:19] <andor> is glfw-rs meant to be compiled on the git version? because 0.8 doesn't seem to like it
[16:09:26] *** Joins: GeneralMaximus (ankur@631D8187.77B4AB2C.274D17D6.IP)
[16:09:41] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[16:09:46] <cmr> andor: yes
[16:10:39] <Sharp> If there is one thing I have learend from hanging out here, it is never to use anything but master if you expect things to work.
[16:10:59] *** Quits: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[16:12:06] *** Joins: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[16:13:57] *** jorendorff is now known as jorendorff_away
[16:14:22] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[16:15:20] <andor> bummer
[16:15:33] <andor> are there nightlies for windows? official or not
[16:15:39] <cmr> andor: no
[16:15:48] *** Joins: maik (maik@moz-873130A9.dip0.t-ipconnect.de)
[16:15:58] * Sharp knows people who use Windows and Rust tend to use VMs.
[16:16:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:16:11] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[16:16:34] *** jdm_ is now known as jdm
[16:16:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[16:16:44] <andor> yeah, i would as well, but i want to try some graphics programming, and a vm isn't really an option
[16:17:37] *** Quits: jstevans (Instantbir@moz-111C0031.bootp.virginia.edu) (Ping timeout)
[16:17:55] <Sharp> Build from source, I suppose?
[16:18:01] <Sharp> It doesn't take that long! /lie
[16:18:04] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[16:18:28] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[16:18:35] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[16:18:37] <andor> yeah, that's my main issue, don't feel like getting it to compile again...
[16:19:32] <Sharp> Do you have to do extra work on Windows?  Seems probable… everything is harder on Windows :(
[16:19:46] <andor> last time i did it, it was a lot of hassle
[16:19:48] *** Quits: eevee (eevee@moz-DD9FF470.evrt.wa.frontiernet.net) (Connection reset by peer)
[16:20:15] <andor> partly because it isn't 100% staightforward, but mostly because i'm just bad at it, heh
[16:21:02] <andor> oh, reading the wiki right now, gcc=4.5 isn't a requirement on windows since rust>=0.8?
[16:21:31] *** Joins: jstevans (Instantbir@moz-111C0031.bootp.virginia.edu)
[16:21:43] <Sharp> Dunno.  I know people have been working hard to reduce Rust's dependencies on any kind of C compiler (as opposed to LLVM).
[16:21:50] <Sharp> But I'm not sure how that translates to Windows.
[16:21:59] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[16:22:47] *** jorendorff_away is now known as jorendorff
[16:23:22] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:23:37] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[16:24:36] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[16:24:47] *** Joins: eevee (eevee@moz-DD9FF470.evrt.wa.frontiernet.net)
[16:25:37] *** Joins: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:25:37] *** ChanServ sets mode: +ao dherman dherman
[16:26:34] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[16:28:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:29:29] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[16:29:34] *** Quits: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[16:29:41] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[16:30:07] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:30:07] *** ChanServ sets mode: +o jdm
[16:30:54] <Luqman> ChrisMorgan: sorry, I was sleeping. I'll put together some instructions later as well as maybe package up a tarball
[16:32:07] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[16:32:07] *** ChanServ sets mode: +ao dherman dherman
[16:32:30] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[16:34:39] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[16:35:04] *** Joins: scabaloo (student@FD682510.6925E1D4.DDE5D3F6.IP)
[16:35:07] <Sharp> cmr: So wait, I know we can have either tuple or struct variants.  Are const variants considered tuples or structs?
[16:36:47] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[16:37:13] *** Quits: gem (nandaja@27576FFD.192CB06D.D33C5897.IP) (Ping timeout)
[16:37:33] <SiegeLord> They are tuples
[16:38:05] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[16:38:35] *** Quits: GeneralMaximus (ankur@631D8187.77B4AB2C.274D17D6.IP) (Quit: Computer has gone to sleep.)
[16:38:44] <Sharp> 0-tuples?  Cool.
[16:38:57] <Sharp> (Or possibly 1-tuples with implicit self).
[16:39:04] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[16:39:04] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[16:39:15] <bstrie> () is the zero-tuple
[16:41:04] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[16:42:39] <Sharp> Variants have names though.
[16:42:45] <Sharp> So both concepts are compatible, I think.
[16:43:27] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:43:35] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[16:43:37] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:44:33] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[16:45:46] <eddyb> Sharp: struct Foo; is pretty much struct Foo(); (newtype of ())
[16:45:55] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[16:46:52] <Sharp> Yah.  But I think that is different than the Foo in enum Bar { Foo }.
[16:47:49] <eddyb> in a way, yes
[16:49:30] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[16:50:11] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:50:24] *** Quits: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP) (Ping timeout)
[16:50:51] *** Joins: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP)
[16:51:42] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[16:51:49] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[16:52:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:53:43] *** Joins: oberstet_ (quassel@moz-9A2AC71A.dynamic.mnet-online.de)
[16:53:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:54:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:54:31] *** Quits: oberstet (quassel@moz-BCE29FF.dynamic.mnet-online.de) (Ping timeout)
[16:56:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:58:23] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[16:59:18] *** Joins: ofeldt- (ofeldt@moz-3D21AC81.dip0.t-ipconnect.de)
[16:59:22] *** Quits: Kxepal (Miranda@moz-54BF1851.pppoe.mtu-net.ru) (Ping timeout)
[16:59:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:00:02] *** Quits: ofeldt (ofeldt@moz-5A8D8707.dip0.t-ipconnect.de) (Ping timeout)
[17:01:25] *** Joins: RMF (RMF@moz-1EE56143.dsl.telepac.pt)
[17:01:26] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:01:50] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[17:02:44] *** Joins: Kxepal (Miranda@moz-A79FEB26.pppoe.mtu-net.ru)
[17:03:09] <pnkfelix> are we not mtg in gigo?  Or is vidyo failing me once again?
[17:04:23] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[17:04:30] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:04:34] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:04:47] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:04:50] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:05:08] <pnkfelix> nmatsakis: ^
[17:05:29] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:06:11] <pnkfelix> brson: ^
[17:06:38] *** Quits: scabaloo (student@FD682510.6925E1D4.DDE5D3F6.IP) (Ping timeout)
[17:06:59] <nmatsakis> pnkfelix: we are in GIGO, are you connected
[17:07:13] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:07:14] <pnkfelix> i freaking hate vidyo, why does this keep happening.  :(
[17:07:33] <nmatsakis> pnkfelix: :( :(
[17:08:20] *** Quits: Ferreus (ferreus@moz-4F5BA8CC.dip0.t-ipconnect.de) (Ping timeout)
[17:12:11] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:13:19] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:14:54] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[17:14:56] *** Quits: autra_ (augustin@moz-2EA7A1DF.fullsix.com) (Ping timeout)
[17:15:51] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:15:51] *** ChanServ sets mode: +ao brson brson
[17:16:56] *** zz_kimundi is now known as kimundi
[17:17:17] *** Joins: mikezaby (mikezaby@moz-B26868E.home.otenet.gr)
[17:17:33] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:22:27] *** flaper87 is now known as flaper87|afk
[17:23:41] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[17:24:48] *** Quits: maik (maik@moz-873130A9.dip0.t-ipconnect.de) (Ping timeout)
[17:25:17] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:25:17] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:25:29] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:26:52] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[17:27:14] <pcwalton> can anyone decipher the failure here? http://buildbot.rust-lang.org/builders/auto-win-32-nopt-t/builds/1325/steps/test/logs/stdio
[17:27:21] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[17:27:53] <Sharp> rusti: use std::unstable::intrinsics::get_tydesc; get_tydesc::<[(), ..1000]>()
[17:27:53] -rusti- pastebinned 7 lines of output: http://sprunge.us/XHIj
[17:28:22] <Sharp> rusti: unsafe { use std::unstable::intrinsics::get_tydesc; get_tydesc::<[(), ..1000]>() }
[17:28:23] -rusti- (0x60c030 as *())
[17:28:27] <eddyb> heh
[17:28:44] <Sharp> Not as enlightening as I'd hoped :(
[17:29:03] <eddyb> *() is awesome. kinda like void*, but safer
[17:29:28] * Sharp is trying to simplify the generated LLVM so he can actually find stuff :P
[17:29:46] *** Joins: edorian (Mibbit@moz-6A69EC94.dynamic.qsc.de)
[17:30:07] * mletterle is learning how crate hierarchies work
[17:30:23] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[17:30:26] <osa1> will garbage collected pointers be removed in the future? I was planning to implement persistent data structures and some other stuff to encourage more functional style programming in rust, but if this is the case I think I better be not starting this ...
[17:30:34] <mletterle> split out the nspr stuff from rust-nss
[17:30:39] <Sharp> Is there any way I can produce a raw_iter_vec() with no_std?
[17:30:54] <eddyb> Sharp: you have to use the module in std which deals with TyDesc to get more info, btw
[17:31:08] <eddyb> Sharp: what do you mean? what's like with std?
[17:31:18] <Sharp> Hm?
[17:31:25] <Sharp> The LLVM output is just really bloated
[17:31:33] <eddyb> Sharp: example pls, I mean. what you want, with std
[17:31:50] <eddyb> pcwalton: I'm a little late, but this is the only error: tmp\run_pass_stage2_driver.rs:293:4: 293:15 error: function `main` is private
[17:31:57] <Sharp> I want to iter() (somehow) over a vector over a zero-sized type
[17:32:04] <pcwalton> osa1: they will not be removed entirely, they will just be librarified
[17:32:07] <pcwalton> eddyb: sure
[17:32:09] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Ping timeout)
[17:32:09] <pcwalton> but I wonder why :)
[17:32:14] <pcwalton> I didn't do anything do change that
[17:32:29] <Sharp> Which I *think* is how I can get iter_vec_raw to be called.
[17:32:34] <eddyb> oh, a temp file. can you grab it to look at it?
[17:32:38] <eddyb> Sharp: ah, let's see
[17:32:42] <pcwalton> oh, I found it
[17:32:52] <osa1> pcwalton: ok so there will still be fully garbage-collected (with cyclic references etc.) pointer types, is that right?
[17:32:56] <pcwalton> yes
[17:33:04] <osa1> pcwalton: is there a discussion about it that I can see?
[17:33:07] <eddyb> rusti: for _ in [0u8, ..100] {print("a");}
[17:33:08] -rusti- pastebinned 7 lines of output: http://sprunge.us/LNEQ
[17:33:14] <pcwalton> there have been several discussions scattered around
[17:33:21] <eddyb> rusti: for _ in [0u8, ..100].iter() {print("a");}
[17:33:22] -rusti- pastebinned 13 lines of output: http://sprunge.us/CMCM
[17:33:31] <osa1> pcwalton: what about first comment in this discussion http://www.reddit.com/r/rust/comments/1pe2lc/a_bit_of_functional_programming_in_rust_or_a/ ?
[17:33:36] <eddyb> rusti: for _ in &'static [0u8, ..100].iter() {print("a");}
[17:33:36] -rusti- pastebinned 16 lines of output: http://sprunge.us/bVJW
[17:33:40] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[17:33:50] <pcwalton> osa1: it means they will be removed from the *language* not the *library*
[17:34:03] <eddyb> rusti: for _ in (&'static [0u8, ..100]).iter() {print("a");}
[17:34:03] -rusti- pastebinned 13 lines of output: http://sprunge.us/XiMJ
[17:34:21] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[17:34:23] <ercxx> Are there any examples/tutorials that use `Any`?
[17:34:35] <osa1> okay
[17:34:42] <eddyb> rusti: let v = [0u8, ..100]; for _ in v.iter() {print("a");}
[17:34:43] -rusti- aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa()
[17:34:51] <Sharp> rusti: for _ in (&'static [0u8,, ..100]).move_iter() { print("a"); }
[17:34:52] -rusti- pastebinned 6 lines of output: http://sprunge.us/dDUZ
[17:34:54] <eddyb> Sharp: something has to implement the iter() method
[17:35:10] <Sharp> I'm pretty sure it does implement iter(), just not next().
[17:35:15] <eddyb> Sharp: you have a non-unicode character in that last message
[17:35:20] <Sharp> Huh, really?
[17:35:31] <TeXitoi> bstrie should look at it, but if any other can review/comment my first pull request : https://github.com/mozilla/rust/pull/10145
[17:35:38] <Sharp> rusti: for _ in (&'static [0u8, ..100]).iter() { print("a"); }
[17:35:39] -rusti- pastebinned 13 lines of output: http://sprunge.us/iAhL
[17:35:53] <Sharp> rusti: for _ in (&'static [0u8, ..100]).move_iter() { print("a"); }
[17:35:53] -rusti- pastebinned 7 lines of output: http://sprunge.us/eRWi
[17:35:58] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[17:36:00] <eddyb> rusti: #[no_std] let v = [0u8, ..100]; for _ in v.iter() {print("a");}
[17:36:00] -rusti- pastebinned 7 lines of output: http://sprunge.us/POVD
[17:36:10] <eddyb> rusti: #[no_std]; let v = [0u8, ..100]; for _ in v.iter() {print("a");}
[17:36:10] -rusti- pastebinned 7 lines of output: http://sprunge.us/CjPb
[17:36:27] <Sharp> That won't work since it's in a function already… but anyway, the issue is
[17:36:30] <Sharp> iter() apparently requires Some()
[17:36:35] <eddyb> Sharp: try to compile something like that, but without print("a")
[17:36:42] <Sharp> So when I used no_std it complained about Some() not being present
[17:37:02] <Sharp> Or, maybe you're right and that was the result of print()
[17:37:06] *** Joins: DeTeam (DeTeam@moz-25868064.dyn.broadband.iskratelecom.ru)
[17:37:23] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[17:37:35] <Sharp> Or map() or something.
[17:37:41] <eddyb> Sharp: if the method exists at all with #[no_std], it's in rustc
[17:38:06] <Sharp> Yeah… I get the error about Some().
[17:38:07] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[17:38:21] <Luqman> ChrisMorgan: https://gist.github.com/luqmana/40528aff62afcdb72680
[17:38:25] <eddyb> Sharp: enum Option<T> {Some(T), None}
[17:38:35] <Sharp> Sure.
[17:38:37] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[17:38:45] <eddyb> Sharp: you can copy the basic implementations from libstd, until you have a working example
[17:38:53] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[17:38:54] <Sharp> Or I could just use Option, maybe?
[17:38:58] <Sharp> Or is that not a thing? :P
[17:40:02] <eddyb> Sharp: you can use rust-core, if you want to get that setup. but the easiest way is to copy implementations into your test-case
[17:40:13] <Sharp> Oh, well, this is silly, iter() is also in std :P
[17:40:36] <eddyb> the for-in sugar needed Option?
[17:40:38] <Sharp> I'm going to stop throwing things against the wall and go read the code :)
[17:40:54] <Sharp> Not just for-in, I don't think
[17:41:13] <Sharp> I had a variant that didn't use for and it still complained about that.
[17:41:36] <benh> the for-in sugar compiles to iterator use, the .next method on iterators returns Option...
[17:41:43] <Sharp> Ah, that's probably it.
[17:41:48] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[17:42:10] <kimundi> Every function/method usable per default is an actual function/method implemented in libstd, if you're not using libstd you need to copy everything you want to use
[17:42:15] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[17:42:16] *** jorendorff is now known as jorendorff-away
[17:42:57] <kimundi> just dump the modules iter, option into your codebase :P
[17:43:22] <Sharp> I actually just realized that it seems like raw_iter_vec gets implemented in Drop()
[17:43:26] <Sharp> So I might not have to do anything but define the vec :D
[17:44:05] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:44:18] <Sharp> Er, iter_vec_raw
[17:44:37] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:45:08] <SiegeLord> Wasn't there some proposal for 'in' for placement new?
[17:45:19] <eddyb> hmm, how it would be defined for [T, ..N]?
[17:45:57] *** Quits: oberstet_ (quassel@moz-9A2AC71A.dynamic.mnet-online.de) (Client exited)
[17:46:16] <eddyb> or is it defined for a slice? but then, what's with the specialization in rustc?
[17:47:19] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[17:47:48] <eddyb> huh, what's this? https://github.com/mozilla/rust/blob/master/src/libstd/vec.rs#L1005
[17:47:58] <SiegeLord> It'd be a shame is new is a keyword... it reads weird to do let a = Thing::init();
[17:48:29] <eddyb> new Thing(...) could be sugar for Thing::new(...)
[17:48:56] <SiegeLord> You can't even write Thing::new
[17:49:15] <SiegeLord> It'd have to be sugar for Thing::init, which is even worse imo :P
[17:51:11] <Sharp> Wait, why do we need this at all?
[17:51:40] <SiegeLord> Placement new is coming
[17:51:44] <Sharp> eddyb: Not the same thing.  That's a better iter().
[17:51:54] <SiegeLord> And the proposed syntax is let a = new(B) C::init();
[17:52:01] <Sharp> Why?
[17:52:10] <Sharp> What advantage does it have?
[17:52:22] <pcwalton> it's covered in the minutes https://etherpad.mozilla.org/Rust-meeting-weekly
[17:52:42] <Sharp> Oh, I see.
[17:52:58] <SiegeLord> I remember Graydon had the let a = C::new() in B; syntax
[17:53:06] <SiegeLord> I thought it was nice... >.>
[17:53:37] <bstrie> haven't read the notes yet, but I'd prefer reusing `in` somehow to making `new` a keyword
[17:53:41] <Sharp> I feel like there is spomething more general lurking in here...
[17:54:52] <myname> what should C::new() in B do?
[17:55:05] <benh> Just use @ instead of new ;)
[17:55:06] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[17:55:14] <benh> @B C::new()!
[17:55:23] <myname> (i don't get new(B) C::init() either)
[17:55:29] <SiegeLord> myname: Same thing new(B) C::init() does
[17:55:39] <SiegeLord> Check the meeting notes, it's explained there
[17:55:42] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:55:42] *** ChanServ sets mode: +o tjc
[17:55:46] <benh> Also how is new(my_vector.allocate_space_at_end) supposed to work, doesn't that imply that my_vector.allocate_space_at_end() pushes an uninitialized object into the vector?
[17:55:48] <SiegeLord> Has to do with the out pointer
[17:55:55] <myname> i will as soon as i'm home
[17:56:15] <myname> wtf out pointer
[17:56:18] <nmatsakis> benh: not necessarily -- it can return an obj that *will*push later
[17:56:37] <eddyb> new(RC) is ugly imo... can't we do better :(?
[17:56:44] *** Quits: jstevans (Instantbir@moz-111C0031.bootp.virginia.edu) (Ping timeout)
[17:57:13] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[17:57:24] * Sharp likes @ as identifier.
[17:58:38] <eddyb> oh, I know: Rc<Thing>::new(...)
[17:59:02] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[17:59:05] <eddyb> you only need variadic generics to make it work, I think
[17:59:35] <eddyb> (although the silly parser rules today might make it uglier)
[18:00:43] <eddyb> and probably nobody cares about my opinion, so I should shut up and do something useful
[18:00:54] <Sharp> Do constructors usually take arguments?
[18:00:58] * Sharp wonders.
[18:01:09] <pnkfelix> one's without args could be called zero(), no?
[18:01:12] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[18:01:19] <Sharp> from_zero()?
[18:01:26] <Sharp> I wouldn't be against that.
[18:01:32] <pnkfelix> I was thinking just fn zero()
[18:01:36] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[18:01:39] <Sharp> That too.
[18:01:45] <pnkfelix> but you're right that breaks the from_foo pattern
[18:02:11] <Sharp> from_()() :)
[18:02:28] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[18:02:30] *** Joins: lbergstrom (Adium@15117742.DA651652.D56BC519.IP)
[18:02:47] <pnkfelix> pcwalton: there was one other thing I was thinking
[18:02:56] <nmatsakis> Personally I like `init`, `with_foo` and `from_foo`, depending on the situation
[18:03:00] <nmatsakis> e.g., HashMap::with_capacity(1024)
[18:03:08] <pnkfelix> pcwalton: while I did speak in favor of allowing new() and ctor() calls to be decoupled
[18:03:22] <pnkfelix> pcwalton: I have also seen cases where such decoupling was a real pain in the neck
[18:03:32] <Sharp> That's the primary thing to me.  I like the fact that constructors are currently flexible.  I don't like reserving keywords for constructors in the general case...
[18:03:33] <pcwalton> hmm
[18:03:37] <pnkfelix> pcwalton: namely the fact that the order of eval is not necessarily defined
[18:03:40] <nmatsakis> Sharp: nobody is proposin that
[18:03:47] <pcwalton> yeah, this isn't what we're proposing
[18:03:53] <pnkfelix> pcwalton: between the ctor args and the eval of E in new (E) ctor()
[18:03:56] <pcwalton> placement new is about *allocation*
[18:04:06] <nmatsakis> Sharp: it's more that the current convention is that we call our constructors `new`, and we're thinking about `new` being the keyword to indicate allocation (instead of `~`, `@`, etc)
[18:04:24] <Sharp> Right, I understand that.  But it seems to me that that's unnecessarily confusing since a lot of constructors are already, as you said, called new.
[18:04:35] <pcwalton> we'll have to rename them
[18:05:08] <eddyb> pcwalton: what about Rc<Thing>::new(...)? it can do in-place allocation, and have variadic arguments
[18:05:10] <Sharp> Ah, I see.  So the proposal was about what to rename them?  In that case, I agree with nmatsakis .
[18:05:17] <pnkfelix> pcwalton: it might be nice to actually fix that in the language, and get some assurance of atomicity for the control handoff from when the allocator finishes to when the ctor starts
[18:05:27] <pcwalton> eddyb: ambiguous parse. < is the less-than operator
[18:05:37] <pnkfelix> pcwalton: (but of course that would require the ctor args to be eval'ed before the allocation call is done)
[18:05:39] <pcwalton> pnkfelix: yeah, that's what placement "new" is designed to fix
[18:06:00] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:06:01] <pnkfelix> pcwalton: which may or may not be an argument *for* the `in` form of the syntax
[18:06:02] <eddyb> pcwalton: but it looks nice >:(. but I could settle for Rc::<Thing>::new(...)
[18:06:33] <pcwalton> that would be coupling allocation to construction
[18:06:38] <pcwalton> that's explicitly what we're trying to avoid
[18:06:41] * Sharp thinks @ says allocation because it starts with an "a" :P
[18:06:43] <eddyb> hmpf
[18:06:45] *** Joins: oal_ (oal@26029749.1D466084.2CFD4520.IP)
[18:06:48] * Sharp is very English centric though.
[18:07:18] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[18:07:22] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Client exited)
[18:07:55] <Sharp> Then you could have @R for reference counted, @G for GC, @O for owned, etc.
[18:08:14] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[18:08:14] <Sharp> Though that might make things harder to parse.
[18:08:19] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[18:08:30] <eddyb> the sigils work very nicely for this.. "@" compared to "new(Gc) "... but I don't have a better solution
[18:08:34] <SiegeLord> I don't really agree that 'new' as a word implies allocation...
[18:08:48] <eddyb> pcwalton: hey, how about @(Gc)Thing::new(...) :P?
[18:09:23] * Sharp doesn't mind that.
[18:09:34] <pcwalton> depends on whether you like @ as a sigil
[18:09:39] <pcwalton> that's the overloadable @ that we've talked about
[18:09:44] <pcwalton> I don't really like @ myself
[18:09:47] <pnkfelix> pcwalton: hmm, I feel like I missed the reasoning for why we have to avoid such coupling.  I understand that we don't want the ctors to be tied to any particular allocation strategy
[18:09:49] <pcwalton> but that's a personal opinion
[18:09:51] <mletterle> you could always use "ctor" 
[18:09:52] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:09:52] *** ChanServ sets mode: +o tjc
[18:10:09] <mletterle> doesn't imply anything other than I'm going to construct a new one of that, whatever that means
[18:10:15] <pnkfelix> pcwalton: but I had assumed an appropriate API between the two would sidestep that
[18:10:30] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[18:10:31] <Sharp> I think if you are going to use an English word, new is about as short as you are going to get and it's very conventional.  I am just hopeful that Rust can avoid using an English word.
[18:11:12] <tjc> Sharp: Ok, no English words. "nouveau" it is ;-)
[18:11:13] <mletterle> Eh.. Thing<-() 
[18:11:21] <Sharp> Not short :P
[18:11:26] <pnkfelix> Sharp: I'll take that as a vote for \nu{}
[18:11:37] <Sharp> \nu{GC}? 
[18:11:40] <Sharp> That seems good to me.
[18:11:42] <tikue_> what are we bikeshedding? 
[18:11:44] * tikue_ just arrived
[18:11:47] <tjc> okay, "neuf"
[18:11:48] <tjc> ;-)
[18:11:53] *** Quits: KindOne (KindOne@moz-77FD5389.dynamic.ip.windstream.net) (Ping timeout)
[18:11:57] <tjc> tikue_: memory allocation
[18:12:03] <tikue_> tjc: what about memory allocation?
[18:12:12] <tjc> tikue_: See the second half of https://etherpad.mozilla.org/Rust-meeting-weekly
[18:12:22] <tikue_> ah thx
[18:12:22] <tjc> (starting at line 119, "placement new")
[18:12:25] <tikue_> kk
[18:12:26] <eddyb> pcwalton: placement new is too damn verbose to allow for any neat code :(. there has to be a combination of characters that's not much longer than the type of allocation itself
[18:12:35] <pcwalton> I disagree
[18:13:09] <pnkfelix> pcwalton: (or wait, maybe I misunderstood your comment, which may not have even been directed at me.  Oh well, I must go.)
[18:13:34] <Sharp> Just have shortcuts for the commonly used one (~).
[18:13:42] <Sharp> Anything but ~ seems to be used much less.
[18:14:13] <pcwalton> I agree it shouldn't be new(Unique) Foo :)
[18:14:18] *** pmoore is now known as pmoore|away
[18:14:47] <pnkfelix> new (~) Foo
[18:14:53] <pcwalton> or just "new Foo"
[18:14:53] <eddyb> noooo
[18:14:57] * bstrie defenestrates pnkfelix
[18:15:00] <Sharp> ~ := \nu{Unique}
[18:15:03] <Sharp> You can be verbose or not :P
[18:15:03] *** oal_ is now known as oal
[18:15:16] <pnkfelix> pcwalton: Isn't "new Foo" shorthand ambiguous ?
[18:15:50] *** Joins: KindOne (KindOne@moz-D951B524.dynamic.ip.windstream.net)
[18:15:51] <pnkfelix> pcwalton: (i.e. for parenthesized Foo)
[18:16:28] <pnkfelix> pcwalton: or maybe its just going to be non LL1.  I guess that ship may have sailed anyway.
[18:16:31] <pcwalton> pnkfelix: yeah, it is, but we can just define which production ( goes to
[18:16:48] *** Joins: maik (maik@moz-873130A9.dip0.t-ipconnect.de)
[18:16:56] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[18:17:17] <Sharp> How many more strategies are there going to be?  If it's just three, maybe there's another symbol Rust isn't using yet :P
[18:17:25] <pcwalton> there are innumerable strategies
[18:17:29] <pnkfelix> pcwalton: I'd still like to see if we can hash something out with a localized sugar, `use @ = GC; use ~ = Unique;` as the common case at the top.
[18:17:32] <pcwalton> for example, in Servo's script task it's JSManaged
[18:17:37] <pcwalton> because we use the JS GC, not the Rust GC
[18:17:52] <pcwalton> this is much of the reason for these extensibility changes
[18:17:59] <pcwalton> we need to make Rust work with different GCs
[18:18:04] <Sharp> Like I said… to me, it seems like while there are many, many strategies, the vast majority of the time people are using ~.  So there should be a verbose option for the nonconventional strategies but I would hate to lose the simplicity of ~.
[18:18:25] <pcwalton> I think that extensibility/orthogonality always means having some verbosity over having just one strategy "baked in"
[18:18:57] <eddyb> @ can be Gc and % can be Rc
[18:18:58] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:19:00] <Sharp> Sure, but why not have convenient shorthand for the common strategy?  I understand that special casing sucks but we already do it to some extent (e.g. for _ in syntactic sugar)
[18:19:02] <pcwalton> but when you hit a brick wall like we did in Servo with JSManaged…all of the conciseness doesn't soften the blow of that brick wall :)
[18:19:07] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:19:09] <eddyb> (but localized, as previously suggested)
[18:19:13] <pcwalton> I'm fine with having "new" automatically be ~
[18:19:14] <SiegeLord> I remember when I first learned C++ I used 'new' everywhere without realizing it allocated :P
[18:19:19] *** Quits: DeTeam (DeTeam@moz-25868064.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[18:19:43] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Max SendQ exceeded)
[18:19:46] <bstrie> I'd be sad to lose the conciseness of ~Foo
[18:19:59] <bstrie> but it depends on the ultimate design
[18:20:09] <Sharp> ~<optional strategy>
[18:20:20] <Sharp> Or would that conflict with existing syntax?
[18:20:28] <eddyb> Sharp: it... wouldn't :D
[18:20:32] <myname> oh, segmented stack is going away?
[18:20:51] <Sharp> ~<JSManaged>, ~<RC>, ~
[18:20:58] <pcwalton> I think if we want brevity than the obvious solution is s/new/@/
[18:21:03] <Sharp> Yeah, that works too
[18:21:12] <pcwalton> I would love to reclaim ~ for bitwise not ;)
[18:21:14] <Sharp> I like @ over ~ anyway
[18:21:17] <Sharp> Yeah!
[18:21:29] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[18:21:30] <bstrie> pcwalton: boo, ! makes more sense there anyway :)
[18:21:43] <SiegeLord> So... why does BufferedWriter not flush before being destroyed?
[18:21:56] <SiegeLord> It there some performance implication to that?
[18:22:27] <Sharp> The only reason I'd go with ~ over @ (like I have the choice :P) is that a lot of code is already using ~.  But it's a simple sed.
[18:22:37] <myname> i'd say postfix @RC
[18:22:46] <myname> Thing::new @RC
[18:22:51] <eddyb> postfix is... weird
[18:23:06] <Sharp> Postfix reminds me of CPS :(
[18:23:19] <eddyb> this is concise enough for me: ~<Rc>Some(1337u)
[18:23:46] <pcwalton> yeah, `@RC Thing::init` is the obvious thing if we want a short version I think
[18:24:02] <Sharp> What's the problem with it?  I know you said before you don't like @.
[18:24:14] <eddyb> pcwalton: wouldn't it be ambiguous with just the space there?
[18:24:35] <eddyb> pcwalton: nvm, having a space in the first place solves the ambiguity :P
[18:24:39] <pcwalton> I think not if we make it a PrimaryExpression it's fine
[18:24:40] *** Joins: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP)
[18:24:42] <pcwalton> it's just that I don't like @ :)
[18:24:56] <eddyb> ~Rc Some(1337u) is cute :D
[18:25:13] <eddyb> reminds me of &mut
[18:25:19] <pcwalton> but I don't dislike it THAT strongly so I am fine with adding the sugar if we decide we can't live without it…it's backwards compatible
[18:26:57] *** Joins: ash_136 (ashvini@1A256789.F78407A4.E5F05D4F.IP)
[18:27:17] <eddyb> sweet (sugar)
[18:27:21] *** Quits: KindOne (KindOne@moz-D951B524.dynamic.ip.windstream.net) (Ping timeout)
[18:28:30] <osa1> what are #[cfg(...)] annotations in source?
[18:28:50] *** Quits: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP) (Ping timeout)
[18:28:57] <cmr> I really like the current convention of `Type::new` for constructors, will be sad to see it go.
[18:29:16] <bstrie> osa1: conditional compilation
[18:29:32] <sfackler> osa1: "only compile this if the ... is passed via the --cfg parameter to rustc"
[18:29:42] <osa1> aha, thanks
[18:29:57] <cmr> osa1: they're attributes. https://github.com/mozilla/rust/wiki/The-Rusticon
[18:30:04] <Sharp> It could be condensed even further in the common (@ = @Unique) case if we did it like liveness variables… @x is as short as ~x, and @'GC y is shorter than any variant involving new or \nu.
[18:30:19] *** bent is now known as bent|lunch
[18:30:26] <cmr> I don't like @ because it is dense.
[18:30:29] <cmr> (to look at)
[18:30:35] <Sharp> We could keep ~ then...
[18:30:38] <cmr> It's in a better position on the keyboard though
[18:30:41] <cmr> Let's use $ :P
[18:30:58] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:31:05] * Sharp thinks allocation should be dense because it is heavy!
[18:31:17] <eddyb> cmr: I hope they agree to not use "new" as a keyword
[18:31:22] <benh> but it's not, lots of functions allocate and don't look nearly as heavy
[18:31:28] <benh> like .to_str(), .collect()
[18:31:33] <tikue_> i'd love to see a writeup of the different proposals, i feel like i can't see the forest for the treets right now
[18:31:40] <cmr> tikue_++
[18:31:49] <Ms2ger> eddyb, oh, new, that's a good idea
[18:31:49] *** Joins: KindOne (KindOne@moz-C10D0A83.dynamic.ip.windstream.net)
[18:31:51] <tikue_> s/treets/trees it's early lol
[18:31:59] <Sharp> Haha
[18:32:33] <cmr> I feel like the issue comes down to two things: 1. Need a way to create a box, 2. Need a way to construct a value in said box
[18:32:34] <tikue_> would type inference work with something like new?
[18:32:42] <Sharp> Allocation is *probably* the most costly thing done by a primitive in Rust, though I don't know all the primitives.
[18:33:01] <tikue_> let a: @<RC> int = new 5;
[18:33:03] <SiegeLord> spawn might be more expensive
[18:33:16] <cmr> SiegeLord: spawn is in the library, though
[18:33:19] <tikue_> oh i mean let a: new<RC> int = new 5;
[18:33:25] <SiegeLord> Ah... right right
[18:33:34] <Sharp> Therefore, I think it should look the heaviest :D
[18:33:36] <cmr> tikue_: Now, why wouldn't that be let a: Rc<int> = new 5;
[18:33:49] <tikue_> cmr: that's what i'm going for :P just took some time to get there 
[18:33:57] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[18:33:57] <cmr> :P
[18:34:04] <eddyb> but then...
[18:34:05] <Sharp> let @'RC a = new 5
[18:34:08] <Sharp> Er
[18:34:17] <Sharp> let @'RC a = 5
[18:34:25] <Sharp> Wait… I'm confusing myself :P
[18:34:29] <Sharp> let a : @'RC int = 5
[18:34:30] <eddyb> new 5 as Rc<int>?
[18:34:33] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[18:34:35] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[18:34:38] <Sharp> Or just @5
[18:34:40] <tikue_> eddyb: type inference could make new 5 be anything right
[18:34:42] <Sharp> Since it should be able to type infer
[18:34:44] *** vfetwnuncszu is now known as dcrewi
[18:34:49] <eddyb> tikue_: hmm, it might work
[18:34:51] <Sharp> let a : @'RC int = @5
[18:35:11] <eddyb> Sharp: no, Rc<int> would be the type of a
[18:36:10] <eddyb> well...
[18:36:11] <SiegeLord> I don't think that'd work... that's akin let a:int = dwim(b)
[18:36:24] <eddyb> ~5 as Rc<int>
[18:36:24] <SiegeLord> *akin to
[18:36:30] <Sharp> I disagree.  The type of unique reference to T is ~T, so the type of Rc to T should be @'RC T
[18:36:32] <tikue_> RC<int> would be pretty intrusive in function declarations without sugar
[18:36:54] <Sharp> (Case issues aside)
[18:36:55] <eddyb> tikue_: it's just 2 characters extra
[18:37:02] <tikue_> eddyb: for every argument
[18:37:11] <benh> don't refcount every argument!
[18:37:16] <tikue_> lol
[18:37:22] <Sharp> SiegeLord: Which one won't work?
[18:37:27] <tikue_> benh: isn't the proposal to get rid of ~ as well
[18:37:33] <eddyb> Sharp: Rc<int> is a type which is already implemented
[18:37:34] <benh> at the callsite it's gonna look like f(a.clone(), b.clone(), c.clone())
[18:37:37] <Ms2ger> Let's get rid of allocation
[18:37:39] <SiegeLord> Maybe one day we'll be able to do type Rci = Rc<int>
[18:37:42] <cmr> Ms2ger: I agree
[18:37:47] <Sharp> Heh.
[18:37:53] <Ms2ger> cmr, wait, what?
[18:37:55] <tikue_> benh: that's bad too :(
[18:38:07] <cmr> Ms2ger: allocation is almost as bad as strings, we should just get rid of it.
[18:38:14] <SiegeLord> Sharp: in new(GC), GC is a function... you can't infer RHS that way
[18:38:20] <Ms2ger> Oh yes, I agree about getting rid of strings
[18:38:22] <eddyb> so, can we use ~Thing::new as Rc<Thing>? (with inference instead of casting)
[18:38:32] <Ms2ger> Then we won't feel so bad about implementing our own in Servo
[18:38:35] <cmr> rusti: use std::rc::Rc; type Rci = Rc<int>;
[18:38:36] -rusti- ()
[18:38:38] <Sharp> Oh, hrm.  Good point.
[18:38:39] <cmr> SiegeLord: ?
[18:38:40] <benh> cmr: yeah, if users want allocation, they can just, oh, embed a javascript engine and use its gc!
[18:38:44] <eddyb> Rci is ugly >:(
[18:38:50] <SiegeLord> cmr: Even better!
[18:39:21] *** Joins: heftig (heftig@moz-3E10DED1.dip0.t-ipconnect.de)
[18:39:22] <Sharp> So how do we destructure it?  That was part of the proposal IIRC.
[18:40:26] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:40:28] <tikue_> what will `struct BinTree { left: Option<~BinTree>, right: Option<~BinTree> }` look like in various proposals?
[18:40:28] <Sharp> E.g. from the doc:     let new(GC) x = new(GC) 42.  I suppose the difference was that it was specified on both sides.
[18:40:31] *** Joins: mort (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[18:40:35] *** Joins: sk (sk@87B8A259.74F564.7CB1DC59.IP)
[18:40:41] *** Joins: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP)
[18:40:47] <cmr> pcwalton: I don't think it will be possible for this change to be non-intrusive. I think constructors will need an explicit outptr, because of the following: `fn init(...) { let x = SomeStruct { .... }; x.b = ...; x }`. Afaik the current outptr strategy only works for the return value. Being able to avoid the intermediate stack value seems to be desirable?
[18:41:01] <Sharp> tikue_: `struct BinTree { left: Option<@BinTree>, right: Option<@BinTree> }` for mine
[18:41:16] <tikue_> Sharp: what would @ be?
[18:41:17] <pcwalton> cmr: llvm optimizes it out.
[18:41:26] <Sharp> @ = ~ without any parameters
[18:41:51] <tikue_> and what is the preference for @ over ~? that ~ is the more valuable sigil to have for other things?
[18:41:54] <cmr> pcwalton: always?
[18:42:00] <pcwalton> AFAIK yes
[18:42:04] <cmr> Hm, ok.
[18:42:04] <pcwalton> if we mark the outptr as noalias
[18:42:15] <mort> I have a file stream by let writer = std::rt::io::file::open(p, Create, ReadWrite), so how do I write to a file? I've been trying different things like write_line and they're not working
[18:42:24] <Sharp> We could keep ~, I don't care much either way :P
[18:42:33] <Sharp> It doesn't substantially change the proposal provided a one character operator is used.
[18:42:39] <cmr> mort: use std::rt::io::Writer; writer.write(bytes!("Hello, world"));
[18:43:11] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[18:43:39] * Sharp personally likes @ for allocation because it starts with an 'a' in English :D
[18:44:07] <benh> Also looks like an a in some fonts~
[18:44:20] <McPherrin> @ should be for built in twitter support
[18:44:25] <Sharp> Haha
[18:44:31] <Sharp> An integral feature of any systems language.
[18:44:42] <eddyb> /. pls
[18:44:54] <McPherrin> I had a patched copy of `make` that tweeted, twitter.com/compilatron
[18:45:29] <cmr> McPherrin: ... hahah
[18:45:31] <Sharp> Rust should only produce bytecode that is 140 characters or less.
[18:45:43] <eddyb> well, do whatever you want. but damned be whoever manages to merge a verbose syntax for allocation into Rust
[18:45:59] *** Joins: pseudoku (quassel@AB24FE06.3AC31C7E.520CDC98.IP)
[18:46:04] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[18:46:21] <benh> I really liked the lightweight "impl Foo { fn new() -> Foo { ... } } idiom :'( 
[18:46:29] <Sharp> What's funny is that I am quite used to verbose allocation in other languages, but in my brief time with Rust I've become a convert :P
[18:46:51] <jason_> benh: liked? is that changing?
[18:47:11] <benh> 'new' is in the running to become a keyword ;)
[18:47:42] <pseudoku> If i typedef a HashMap<~str, int> as Map, can i invoke Map::new() ?? I'm getting an unresolved name error
[18:47:48] <cmr> pseudoku: no
[18:48:08] <eddyb> maybe we want to fix that, too (since we were talking so much about new)
[18:48:39] <benh> I'd love that :(
[18:49:02] <pseudoku> cmr: how else can i invoke static methods on a typedef?
[18:49:10] <cmr> pseudoku: you can't.
[18:49:24] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:49:31] <benh> typedefs only alias the part of the type that lives in the type namespace
[18:49:43] <benh> not the reflections in the module namespace or w/e you want to call it
[18:51:06] <pseudoku> cmr, benh: will this work let a :Map = HashMap<~str, int>::new ?
[18:51:20] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[18:51:20] <cmr> pseudoku: yes
[18:52:32] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:52:59] <pseudoku> cmr, benh: thanks
[18:53:37] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:56:55] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[18:57:01] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:57:01] *** ChanServ sets mode: +ao brson brson
[18:57:15] *** Parts: lbergstrom (Adium@15117742.DA651652.D56BC519.IP) ()
[18:58:05] <tikue_> benh: i like that idiom as well
[18:59:45] *** bent|lunch is now known as bent
[19:00:07] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[19:01:03] <pseudoku> if I have a HashMap<~str, int>, is it possible to retrieve the value using &str as key, like map.get("keyname") instead of map.get(~"keyname")??
[19:01:22] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving)
[19:01:58] <bstrie> pseudoku: good question
[19:01:58] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:02:08] <kimundi> pseudoku: look for something that is generic over the Equiv trait
[19:02:14] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:02:20] <cmr> find_equiv
[19:02:24] <cmr> http://static.rust-lang.org/doc/master/std/hashmap/struct.HashMap.html#method.find_equiv
[19:02:26] <kimundi> because that one was created exactly for that purpose
[19:02:59] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[19:03:35] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[19:03:56] <pseudoku> bstrie, kimundi, cmr: thanks, btw why is the semantics of find_equiv different from that of get (Option vs fail) ? any specific reason?
[19:04:00] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[19:04:09] <kimundi> api cruft
[19:04:11] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[19:04:32] <pseudoku> oh
[19:04:39] <kimundi> or rather, which one does what?
[19:04:45] *** jorendorff-away is now known as jorendorff_away
[19:04:47] *** Quits: ash_136 (ashvini@1A256789.F78407A4.E5F05D4F.IP) (Quit: Leaving)
[19:05:04] <cmr> pseudoku: find and get are different
[19:05:09] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[19:05:22] <cmr> get is just find(...).unwrap()
[19:05:23] <kimundi> afaik get() is different to find(), which is more similar to find_equiv()
[19:05:45] <FreeFull> Is there get_equiv()?
[19:05:48] <pseudoku> cmr: yes, but why isn't there a get_equiv? i
[19:06:14] <cmr> pseudoku: because no one added it yet.
[19:06:27] <pseudoku> cmr: oh..ok
[19:08:34] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[19:08:57] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[19:10:33] <mort> cmr thanks for your help earlier, so now I'm trying to write a string contained in the variable newFileText, when i try to write it using writer.write(bytes!(newFileText)) it says that a non-literal is in bytes!, what does this mean?
[19:10:47] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[19:10:57] <cmr> mort: bytes!() is for byte string literals. You want newFileText.as_bytes()
[19:11:13] <erickt> does anyone know if the new std::rt::io::Reader did not get a .read_char on purpose?
[19:11:45] *** Quits: maik (maik@moz-873130A9.dip0.t-ipconnect.de) (Ping timeout)
[19:14:03] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[19:14:03] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:14:17] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[19:14:32] <cmr> erickt: it was on purposes. we don't have any encoding/decoding support yet.
[19:14:43] <erickt> k
[19:15:19] *** Quits: sk (sk@87B8A259.74F564.7CB1DC59.IP) (Ping timeout)
[19:16:30] <pseudoku> what does this error mean "error: mismatched types: expected `&<V9>` but found `&str` (expected &-ptr but found &str)". I am passing &str to HashMap<~str,int>::find_equiv
[19:16:35] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:16:58] <Ms2ger> You need to pass & &str
[19:18:53] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:18:55] <pseudoku> Ms2ger: thanks
[19:19:01] <Ms2ger> Np
[19:19:02] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[19:19:18] <Ms2ger> It's... not exactly obvious
[19:19:49] <eddyb> & & is fugly
[19:20:12] <pcwalton> brson: r? https://github.com/mozilla/rust/pull/10156
[19:20:27] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:20:50] <eddyb> what's the excuse for && matching as logic AND token in prefix position?
[19:21:32] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[19:21:32] <pcwalton> because the lexer and parser are not intertwined
[19:21:39] <pcwalton> we could probably just special case it in the parser though
[19:22:39] <bstrie> it is pretty weird
[19:23:07] <benh> Is there a plan for moving to a generated parser yet?
[19:23:18] <nmatsakis> pcwalton: didn't you remove @fn?
[19:23:23] <pseudoku> are ~/@/&str's implicitly coerced to corresponding [u8] ??
[19:23:26] <pcwalton> nmatsakis: yes
[19:23:34] <pcwalton> but there are vestiges left I'm sure
[19:23:43] <nmatsakis> pcwalton: oh, you didn't *remove remove* it
[19:23:46] <bstrie> benh: I don't know if that's actually feasible, even if it is possible
[19:23:48] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[19:23:51] <nmatsakis> pcwalton: ok that explains why I still see uses here and there :)
[19:23:57] <Ms2ger> pseudoku, no
[19:24:10] <pcwalton> nmatsakis: where do the bounds go in |A|->B?
[19:24:18] <nmatsakis> pcwalton: what bounds?
[19:24:18] <benh> bstrie: I heard it was intended but I was wondering if anyone had picked out some existing technology to use
[19:24:25] <pcwalton> closures have trait/kind bounds at the moment
[19:24:26] <nmatsakis> pcwalton: oh, I was imagining |A|:K -> B
[19:24:33] <pcwalton> ok
[19:25:04] <pseudoku> Ms2ger: how can I make a &str be treated as &[u8] ? casting using 'as' ?
[19:25:41] <eddyb> I have to get my codeaze into Rust and try to get it to be fast... if I can't, I would be sad :(
[19:25:54] <mletterle> be nice if you could do #[cfg(blah)] { stuff; suff; suff; }
[19:26:06] <cmr> mletterle: if cfg!(blah) { stuff; }
[19:26:11] <Ms2ger> pseudoku, as_bytes
[19:26:26] <mletterle> does that work for externs?
[19:26:32] <mletterle> mod and use
[19:26:34] <mletterle> etc
[19:26:50] <cmr> mletterle: no, but #[cfg(...)] does.
[19:26:58] <cmr> You're saying you want to apply a cfg to a group of items?
[19:27:00] <eddyb> it's pretty bad right now, recursive descent + memoization :/
[19:27:03] <mletterle> yes
[19:27:08] <cmr> eddyb: what is codeaze?
[19:27:18] <pseudoku> Ms2ger, thanks again...is there any plan to make all these casts work with the 'as' operator?
[19:27:25] <mletterle> like #[cfg(blah)] { extern mod crate; use crate::stuff; }
[19:27:32] <Ms2ger> pseudoku, I suspect not
[19:27:42] <pcwalton> pseudoku: no
[19:27:46] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[19:28:05] <pseudoku> Ms2ger, pcwalton: ok...thanks 
[19:28:07] *** Joins: sjmur (chatzilla@BA6AE206.87F910E.C2E02DEF.IP)
[19:28:11] <eddyb> cmr: my own combinatorial recursive descent parser system, using regexp as a primitive (in JS, that is)
[19:29:26] <eddyb> https://github.com/eddyb/wiREd/blob/master/deps/codeaze/codeaze.js and https://github.com/eddyb/wiREd/tree/master/cparse if you're curious
[19:29:51] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[19:30:07] *** Quits: RMF (RMF@moz-1EE56143.dsl.telepac.pt) (Ping timeout)
[19:30:16] <eddyb> cmr: I wrote a parser for lex and yacc in codeaze, that outputs codeaze rules. that cparse thing takes a preprocessed header and extracts types and functions
[19:30:56] *** Joins: steveklabnik (steveklabn@moz-679CA643.public.wayport.net)
[19:31:51] <eddyb> I had to extend the C11 syntax I found with inline assembly and attributes, but apart from that, all the work is in processing the output from the codeaze rules. most of that would go away, if I can come up with cleaner default structures (a lot of things wrap now)
[19:32:52] <eddyb> like (foo|bar)* would produce an array of length 1 arrays containing a foo or a bar, I think
[19:33:48] *** Joins: RMF (RMF@ADEE763B.194C8B26.11F731AB.IP)
[19:34:33] <eddyb> cmr: even with caching/memoization, it still goes to 30-ish seconds for a 40k header file (preprocessed common windows includes)
[19:35:16] *** Quits: pseudoku (quassel@AB24FE06.3AC31C7E.520CDC98.IP) (Client exited)
[19:36:01] *** Joins: jstevans (Instantbir@FC7D839.D2312BC6.DDE5D3F6.IP)
[19:36:46] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[19:36:51] <jvshahid> 15:28:11 < eddyb> cmr: my own combinatorial recursive descent parser system, using  regexp as a primitive (in JS, that is)
[19:37:58] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[19:39:21] <eddyb> jvshahid: hmm?
[19:40:02] <jvshahid> sorry, was trying to copy the link
[19:40:44] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Client exited)
[19:42:35] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[19:43:32] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:43:48] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[19:44:44] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[19:45:40] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[19:46:15] *** Quits: StarLight (StarLight@moz-5848D83A.dynamic.avangarddsl.ru) (Ping timeout)
[19:46:35] <ercxx> What exactly is std::cell for? When would I want to use it?
[19:47:47] <cmr> ercxx: when you figure it out, make a doc PR!
[19:48:02] <ercxx> cmr: :)
[19:49:36] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:50:52] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[19:51:02] *** Quits: mikezaby (mikezaby@moz-B26868E.home.otenet.gr) (Input/output error)
[19:51:09] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:51:19] <kmc> ercxx: we use it a lot as a workaround for this "can't move out of closures" problem
[19:51:47] <kmc> is there a write_str method in std::rt::io or do I have to do explicitly .to_bytes()?
[19:51:56] <ercxx> kmc: thanks
[19:52:07] <cmr> kmc: as_bytes
[19:52:42] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:54:02] <sfackler> ecrxx: It's also used to get around the borrow checker
[19:55:18] <ercxx> Is it a language limitation?
[19:55:44] <sfackler> yep
[19:57:10] <ercxx> ok
[19:57:56] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[20:00:43] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[20:01:08] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[20:02:12] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[20:02:13] *** Quits: eddyb (eddy@A93A03C9.9065A63B.FCAAE698.IP) (Ping timeout)
[20:04:05] *** Joins: onr99 (onur@DBB90BD8.70012127.53438D71.IP)
[20:04:05] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:04:52] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:07:13] *** Quits: onr99 (onur@DBB90BD8.70012127.53438D71.IP) (Quit: Leaving)
[20:07:54] *** jorendorff_away is now known as jorendorff
[20:08:03] *** Joins: onr99 (onur@DBB90BD8.70012127.53438D71.IP)
[20:10:04] <mletterle> crate heirachies are confusing. *sigh*
[20:10:17] <mletterle> be nice if you could get a list of items in a crate
[20:10:53] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[20:10:56] <FreeFull> Make it happen
[20:10:58] *** Quits: mort (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:11:21] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:11:21] *** ChanServ sets mode: +ao dherman dherman
[20:12:05] <bstrie> make cmr make it happen
[20:12:32] <aeqwa> http://pastebin.com/4tPsJVnn need there some help can't find my mistake ( error message in the link included )
[20:13:18] <bstrie> aeqwa: "type" is a keyword, you can't use it as the name of a struct field
[20:13:54] <aeqwa> bstrie: oh god thank you :)
[20:14:01] <bstrie> np :)
[20:14:15] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[20:16:25] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[20:16:44] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:17:59] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[20:18:46] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[20:18:53] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[20:20:17] <mletterle> so.. in a submodule how do I use a type declared in a parent module?
[20:20:44] <bstrie> pcwalton: haha, wait, did firefox actually have tests that were making network calls to zombo.com?
[20:21:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:21:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:22:45] <Ms2ger> bstrie, probably
[20:23:02] <bstrie> I'm amused that that's the site they chose to immortalize in the test suite
[20:23:05] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:23:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:23:31] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[20:23:34] *** Joins: maik (maik@moz-873130A9.dip0.t-ipconnect.de)
[20:24:04] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[20:25:44] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Ping timeout)
[20:26:00] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Ping timeout)
[20:26:30] *** Joins: skeet70 (skeet70@moz-156ACA63.msu.montana.edu)
[20:27:22] *** Joins: kud1ing (Mibbit@moz-A2DD7270.pools.arcor-ip.net)
[20:28:40] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[20:29:04] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[20:29:14] *** Quits: jstevans (Instantbir@FC7D839.D2312BC6.DDE5D3F6.IP) (Ping timeout)
[20:32:00] <Liam`> http://pastebin.mozilla.org/3376590 Can someone explain to me what I'm doing wrong on line 14? I have put the error in the pastebin. The docs for TcpStream say that TcpStream implements Writer, and i'm not sure what to do. 
[20:32:03] <ercxx> mletterle: did you try `super::your_type` ?
[20:32:08] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Client exited)
[20:32:27] *** Quits: skeet70 (skeet70@moz-156ACA63.msu.montana.edu) (Ping timeout)
[20:32:49] <mletterle> ercxx: Yeah I was just making a stupid mistake. :)
[20:33:32] *** Joins: CurlyBrace (Mibbit@644ADD46.C4F5A14C.DDE5D3F6.IP)
[20:34:06] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[20:35:09] *** Quits: CurlyBrace (Mibbit@644ADD46.C4F5A14C.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:35:22] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:35:23] *** Joins: CurlyBrace (Mibbit@644ADD46.C4F5A14C.DDE5D3F6.IP)
[20:36:27] *** Joins: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP)
[20:36:29] <ercxx> Liam`: I don't see write_str() here : http://static.rust-lang.org/doc/master/std/rt/io/trait.Writer.html
[20:38:20] <Liam`> huh. i wonder where i got write_str from
[20:39:34] *** Joins: mohawk (Mibbit@2122F797.6106BEDC.6E370BFC.IP)
[20:39:51] <mletterle> hrm.. or not.. so I have .\a.rs .\subdir\b.rs and I want to get to a type in a.rs from b.rs... 
[20:40:06] *** Quits: maik (maik@moz-873130A9.dip0.t-ipconnect.de) (Ping timeout)
[20:40:41] *** Quits: mohawk (Mibbit@2122F797.6106BEDC.6E370BFC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:40:49] <ercxx> mletterle: how about ::a::your_type ?
[20:41:50] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[20:42:00] <kmc> I think there's still write_str in the docs
[20:42:02] <ercxx> Liam`: I call non existing functions all the time. It's cool when they exist though.
[20:42:06] <kmc> but the methods was removed
[20:42:14] <ercxx> kmc: 0.8 docs ?
[20:42:20] <kmc> ercxx: error: unresolved name `RcMut`. Did you mean `id`? :D
[20:42:50] <Liam`> well, on another note, what should I do to get that line of code working?
[20:43:11] <mletterle> ercxx: nope. 
[20:44:23] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[20:44:24] <ercxx> liam drop the `~` , call as_bytes() on the string while passing it to write and make socket mutable.
[20:44:34] <ercxx> kmc: Where's that from?
[20:44:47] <ercxx> mletterle: is the mod public?
[20:45:33] <mletterle> yes
[20:45:53] <ercxx> :(
[20:45:55] <Liam`> ercxx: got it. thanks.
[20:46:05] <ercxx> Liam`: np
[20:46:07] *** Quits: Ms2ger (Ms2ger@moz-EC6C128C.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:46:55] <ercxx> Liam`: if you're on 0.8 you probably saw write_str in std::io::WriterUtil. Seems like it's gone.
[20:47:04] <Liam`> I am on 0.8
[20:47:19] <ercxx> stay away from it :)
[20:47:20] <Liam`> I can't find the docs for as_bytes(), though. It works
[20:47:23] <Liam`> but I can't find it.
[20:48:38] <ercxx> Liam`: It's here: http://static.rust-lang.org/doc/0.8/std/str/trait.StrSlice.html#fn.as_bytes
[20:48:54] <Liam`> (it might be important to mention that my ability at Rust is very weak)
[20:48:55] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[20:49:49] <kmc> ercxx: it's from my list of amusing rustc error messages
[20:49:53] *** Quits: kud1ing (Mibbit@moz-A2DD7270.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:50:57] *** Quits: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP) (Ping timeout)
[20:51:25] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[20:51:48] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[20:52:07] <mletterle> OMG
[20:52:59] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Ping timeout)
[20:53:28] <aeqwa> is std::str::slice() returning a substring ? 
[20:54:15] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[20:54:19] <mletterle> enums are hard
[20:54:25] <mletterle> /sarcasm
[20:55:32] <engla_> aeqwa: the method .slice returns a substring (a slice!) yes
[20:55:43] <strcat> kmc: I like 'expected `type_error` but found `type_error`'
[20:55:56] <strcat> get them from mismatching lifetimes
[20:56:38] <kmc> yes
[20:56:48] <kmc> error: mismatched types: expected `u32` but found `uint` (expected uint but found u32)
[20:56:51] <kmc> that's one of my favorites
[20:57:17] *** Joins: jstevans (Instantbir@FC7D839.D2312BC6.DDE5D3F6.IP)
[20:57:25] <aeqwa> engla_: thanks i looked in the docs but i never heared the word slice used for the term substring 
[20:57:41] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[20:58:43] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:59:12] <engla_> aeqwa: Rust says slice for the &[T] type too (a subvector of a vector), so both &str and &[T] are called slices
[20:59:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:00:52] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[21:01:29] *** Quits: CurlyBrace (Mibbit@644ADD46.C4F5A14C.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:01:46] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[21:02:45] <kmc> is it bad if I write fmt::Default instances which just invoke the "{:?}" formatter?
[21:02:51] <kmc> so that "{}" will be the same as "{:?}" for that type?
[21:04:04] <strcat> kmc: well it's bad to use {:?} in production code ;p
[21:04:13] <mletterle> oh man... I guess I shouldn't be surprised that rust isn't forgiving about not declaring mods explicitly.
[21:04:33] <kmc> strcat: right... that's because it uses reflection stuff that breaks abstraction boundaries?
[21:04:44] <strcat> kmc: and it's always going to be an unstable format
[21:04:50] <strcat> + it's really slow/bloated, if you care about that
[21:05:07] <kmc> mm
[21:05:09] <strcat> for each type you use it with, it generates a tree of visit functions
[21:07:41] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:07:53] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Ping timeout)
[21:08:09] <ercxx> mletterle: http://pastebin.mozilla.org/3376797
[21:08:31] <ercxx> mletterle: Also take a good look at this: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[21:08:34] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[21:09:49] *** Quits: Jackneill (Jackneill@moz-FFCD5077.pool.digikabel.hu) (Input/output error)
[21:10:05] <mletterle> ercxx: Yeah, I've been reading it.. but the tutorial doesn't go into file system layout seperation very well.
[21:10:19] *** bhearsum is now known as bhearsum|afk
[21:10:21] <mletterle> reexporting etc, etc.
[21:10:25] <mletterle> I have it working now... 
[21:10:32] <mletterle> thank you though!
[21:10:34] <ercxx> np
[21:10:51] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[21:10:56] <McPherrin> The importance of stack safety: http://www.edn.com/design/automotive/4423428/Toyota-s-killer-firmware--Bad-design-and-its-consequences
[21:11:20] <McPherrin> And other safeties too.
[21:13:16] <strcat> if you have an embedded device like that you really just need to not use recursive and do analysis - neither the growing strategy or the unwinding strategy is going to keep it reliable
[21:14:03] <strcat> unwinding makes sense in something like a browser or a server
[21:15:16] <thewonderidiot> oh wow, that's bad
[21:15:38] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:15:38] *** ChanServ sets mode: +o tjc
[21:19:30] *** Joins: pheleas_frog (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[21:21:20] <pheleas_frog> is there an easy way to extract a file's extension given a path?
[21:22:43] <acrichto> rusti: Path::new("foo.txt").extension_str()
[21:22:44] -rusti- pastebinned 17 lines of output: http://sprunge.us/UfYD
[21:22:54] <acrichto> rusti: format!("{:?}", Path::new("foo.txt").extension_str())
[21:22:55] -rusti- pastebinned 21 lines of output: http://sprunge.us/cWgY
[21:23:16] <acrichto> rusti: let p = Path::new("foo.txt"); format!("{:?}", p.extension_str())
[21:23:17] -rusti- ~"Some(\"txt\")"
[21:23:24] <acrichto> pheleas_frog: there we go!
[21:23:30] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:23:31] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[21:25:01] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Quit: Leaving)
[21:25:06] *** Joins: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net)
[21:26:23] *** Joins: mikezaby (mikezaby@moz-B26868E.home.otenet.gr)
[21:27:02] <kmc> GitHub is 503ing :(
[21:28:27] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:29:49] <pheleas_frog> acrichto is that for 0.8? it doesn't seem to be working and there isn't anything on the documentation. I'm specifically using a PosixPath if that helps
[21:30:09] *** Quits: edorian (Mibbit@moz-6A69EC94.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[21:30:24] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[21:31:07] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[21:31:31] *** Joins: zws3mb (Mibbit@3513EECA.C422786F.DDE5D3F6.IP)
[21:31:50] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[21:31:52] *** Quits: sjmur (chatzilla@BA6AE206.87F910E.C2E02DEF.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130911164256])
[21:32:15] <sfackler> the Path API was rewritten a week or two ago
[21:33:51] <dbaupp> pheleas_frog: http://static.rust-lang.org/doc/0.8/std/path/index.html might have something
[21:34:23] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Ping timeout)
[21:34:24] <dbaupp> pheleas_frog: also, any particular reason you're using PosixPath rather than just using `Path` (which is an alias for the system-appropriate version of Path)
[21:35:09] <acrichto> pheleas_frog: ah yes sorry that's on master
[21:35:14] <dbaupp> pheleas_frog: specifically, looks like .filetype() is what you want. http://static.rust-lang.org/doc/0.8/std/path/trait.GenericPath.html#fn.filetype
[21:38:25] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:38:25] *** ChanServ sets mode: +o pnkfelix
[21:39:08] <pheleas_frog> dbaupp I'm using Posixpath because that's what my starter code for an assignment used. Thanks for that link, it worked.
[21:39:32] <pnkfelix> pcwalton: ping
[21:39:38] <pcwalton> pnkfelix: pong
[21:39:42] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[21:39:54] <pnkfelix> pcwalton: I wanted to follow up on a detail from our conversation earlier
[21:40:10] <pcwalton> pnkfelix: sure
[21:40:13] <pnkfelix> pcwalton: I had mentioned forcing the arguments to a ctor invocation to be evaluated before the allocation occurs
[21:40:26] <pnkfelix> pcwalton: and I think in response you said that this is precisely what we're trying to avoid
[21:40:50] <strcat> pnkfelix: the point of placement new is to make the allocation and then put the object in it
[21:40:55] <pnkfelix> pcwalton: which in hindsight I interpret as meaning "we don't want to pay the cost of storing intermediate arguments on the stack and then moving them into the allocated spot"
[21:41:01] <pcwalton> I don't really understand why it's relevant
[21:41:07] <pcwalton> I don't think I said anything about that ordering
[21:41:12] <pcwalton> or at least I didn't intend to
[21:41:16] *** Joins: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP)
[21:41:17] <pcwalton> but I would agree with that statement, yes
[21:42:08] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[21:42:46] <pnkfelix> pcwalton: so, as you said during the mtg, (and as strcat just said), a reason to use placement new is to avoid stashing the intermediate result from a ctor call onto the stack and then copying it into place
[21:43:04] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:43:25] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[21:43:30] <pnkfelix> pcwalton: my intuition (which may be unsupported in general) is that the arguments to an ctor are likely to occupy little space in many cases compared to the result of the ctor call.  But who knows.
[21:43:35] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:43:41] <pnkfelix> pcwalton: the thing I wanted to point out
[21:43:48] <strcat> you could do this with once fns ;p
[21:44:00] <pnkfelix> pcwalton: is the reason that it can be relevant to force the ctor args to be evaluated before the allocation
[21:44:19] <pnkfelix> pcwalton: is because the ctor args themselves may causes a garbage collection
[21:44:21] *** Joins: Phlunk3 (Phlunk3@B3BD2D2D.D79BC248.293D7F07.IP)
[21:44:56] <pcwalton> I don't think it makes sense to evaluate the arguments and leave them before the constructor call
[21:44:58] <pcwalton> why would we do that?
[21:45:05] <pnkfelix> pcwalton: and so if you allow their evaluation to occur after the placement-new allocation but before ctor invocation
[21:45:27] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[21:45:42] <pnkfelix> pcwalton: then you'll need to do something to ensure that the gc-allocated memory is either pre-initialized with soemthing the gc can deal with
[21:45:53] <pcwalton> yeah, we know that
[21:45:54] <pnkfelix> pcwalton: or otherwise marked as not-yet-ready to be scanned by the gc
[21:46:01] <pcwalton> task failure affects this too
[21:46:04] <pcwalton> we always have to deal with this problem
[21:46:07] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[21:46:11] <pcwalton> if you fail while evaluating an argument
[21:46:12] *** Joins: hjr3 (hradtke@817E9B7E.C3D4F2AA.56F40276.IP)
[21:46:19] <pcwalton> this is just a fundamental issue with Rust's memory model
[21:46:29] *** Joins: mib_ugseuw (Mibbit@moz-889CF32B.f3.protectedgroup.com)
[21:46:37] *** Quits: mib_ugseuw (Mibbit@moz-889CF32B.f3.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[21:47:02] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[21:47:48] <pnkfelix> pcwalton: yes.  But if the ctor arguments (which again, I've assumed to be small in general) are evalauted into stack-allocated temporaries and if ther evaluation precedes the gc-allocation via placement new
[21:48:06] *** Quits: steveklabnik (steveklabn@moz-679CA643.public.wayport.net) (Ping timeout)
[21:48:35] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[21:48:53] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[21:48:56] <pnkfelix> pcwalton: then you get an atomic handoff from the allocation over to the ctor invocation itself (at the cost of those stack allocated temporaries and the associated moves of them into place)_
[21:49:14] <pcwalton> sure
[21:49:23] <pcwalton> but I don't think it's worth it if we can solve the GC-uninitialized-memory problem
[21:49:24] *** Joins: maik (maik@moz-FE083F80.dip0.t-ipconnect.de)
[21:49:45] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[21:49:57] *** Quits: pheleas_frog (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:49:58] <pnkfelix> pcwalton: I just wanted to explain where I was coming from in terms of why I thought we might want to eval the arguments before the gc-allocator invocation.
[21:50:03] <pcwalton> sure, that makes sense
[21:50:31] <pnkfelix> pcwalton: but as you say, if we can deal with the uninitialized memory in some other way (i.e. by zeroing it or whatever, which we may have to do anyway, not sure), then it won't matter.
[21:51:34] <pnkfelix> pcwalton: Also, I hope we do explore this sigil sugar idea a bit more.  (Maybe its been discussed already, I haven't checked the logs nor my email)
[21:52:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:52:15] <pcwalton> I'm not very keen on it personally
[21:52:34] <pcwalton> but we can if you'd like
[21:53:01] <pnkfelix> pcwalton: okay, maybe I'll write something up.  I suspect it is largely orthogonal to the other parts of the api.
[21:53:46] <pnkfelix> pcwalton: (And also, I haven't resolve how to actually weave it in with placement new itself.  So if I cannot resolve that part of the puzzle, it may not be as much of a win as I had hoped)
[21:53:56] <pcwalton> okay
[21:55:49] *** Quits: onr99 (onur@DBB90BD8.70012127.53438D71.IP) (Ping timeout)
[21:57:26] *** Quits: zws3mb (Mibbit@3513EECA.C422786F.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:00:24] <Sharp> strcat: Ping
[22:01:09] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[22:02:26] <strcat> Sharp: pong
[22:02:51] <Sharp> I've been tracing through the code trying to figure out how to actually get it to produce iter_vec_raw
[22:02:59] <Sharp> It seems like most of the time it isn't ever hit
[22:03:01] <strcat> destructors
[22:03:05] <Sharp> Ah, okay
[22:03:13] <Sharp> That was the only path that seemed promising but I hadn't tried it yet, thanks :)
[22:03:22] <strcat> struct Foo; impl Drop for Foo { ... } [Foo, ..3]
[22:03:29] <strcat> should call the dtor 3 times (with a null pointer or whatever)
[22:03:38] <strcat> probably want to create a test case for that
[22:03:45] <Sharp> Great.  Thanks again.  And yeah, I will.
[22:03:54] *** Joins: geoffhill (geoffhill@moz-79C8D45C.amazon.com)
[22:03:56] <Sharp> I assume there's a good reason it has to be separate from all other vec functions?
[22:04:04] <strcat> hm?
[22:04:13] <Sharp> E.g., regular iter
[22:04:28] <strcat> fixed-size vectors and ~[T] are built-in types
[22:04:35] <strcat> the stdlib can't implement methods on them
[22:04:39] <strcat> that's why it has all those useless traits
[22:04:42] <Sharp> Ah.
[22:04:57] <strcat> we could probably make it possible to impl Drop for them in libstd
[22:05:02] <strcat> that'd be nice
[22:05:07] <Sharp> Actually, there seem to be some unused methods (iter_vec_uniq)
[22:05:11] <strcat> it'd be even nicer if ~[T] wasn't a really slow built-in type ;p
[22:05:16] <Sharp> Heh.
[22:05:32] <strcat> #[lang = "vector"] struct Vec { ... } 
[22:05:38] <strcat> and just do the sugar from that... ideally
[22:05:49] <strcat> and hey, for all the other built-in types too.
[22:05:57] <Sharp> To be able to override them, or make that the implementation?
[22:06:03] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[22:06:06] <strcat> make that the implementation
[22:06:10] <strcat> so you can define methods on them
[22:06:16] <Sharp> What would be the downside?
[22:06:19] <strcat> and so rust-core can use ~[T]
[22:06:24] <strcat> Sharp: there wouldn't be one
[22:06:30] <strcat> the downside is someone has to implement it
[22:06:34] <Sharp> Is there an issue for it?
[22:06:39] <strcat> yes
[22:06:43] <strcat> somewhere
[22:06:53] <Sharp> Cool.
[22:07:44] <pcwalton> nmatsakis: r? https://github.com/mozilla/rust/pull/10159
[22:07:47] <Sharp> Anyway, thanks!
[22:10:17] <dbaupp> strcat: would that need generic container initialisers?
[22:10:59] <strcat> dbaupp: no, could associate the ~[T] syntax with the vector lang item
[22:11:30] <dbaupp> strcat: right (I was hoping for an excuse for them :P )
[22:11:48] <strcat> ~[T] is honestly really awful, it being in the compiler makes it far too hard to fix :(
[22:11:54] <strcat> http://ix.io/8MW vs http://ix.io/8MY is just sad
[22:12:04] *** Joins: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP)
[22:12:42] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Ping timeout)
[22:12:57] <strcat> so I'd rather just replace it with a lang item...
[22:14:16] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[22:16:47] <pnkfelix> pcwalton: where do I need to look in Servo to find JSManaged ?  Is it not called it there, or do I need to ack in something other than the master branch ?
[22:16:57] <pnkfelix> pcwalton: (or are there submodules I need to check out, etc…?)
[22:17:16] *** Quits: jstevans (Instantbir@FC7D839.D2312BC6.DDE5D3F6.IP) (Ping timeout)
[22:17:32] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[22:17:34] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[22:17:42] *** Quits: mikezaby (mikezaby@moz-B26868E.home.otenet.gr) (Input/output error)
[22:17:47] <pnkfelix> pcwalton: (ah probably in rust-mozjs ...)
[22:18:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:19:00] <jmgrosen> is `match foo { bytes!("blah") => asdf, _ => {} }` supposed to be invalid?
[22:19:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:19:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:19:56] <strcat> atm I'll just settle for being happy with the Send/Freeze thing being solved and soon deref overloading ;p
[22:20:28] <dbaupp> jmgrosen: kinda
[22:20:39] <jmgrosen> why?
[22:20:56] <dbaupp> macros aren't parsed in pattern contexts
[22:21:00] <pnkfelix> jmgrosen: I don't think the pattern position is a macro-expansion position ?
[22:21:06] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[22:21:08] <jmgrosen> ah, ok
[22:21:09] <dbaupp> they're currently only allowed as expressions and items
[22:21:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:21:22] <strcat> if you wanted to make everyone angry you could propose using deref for Option instead of 'get' or 'unwrap' ;p
[22:21:25] <pnkfelix> jmgrosen: though I could imagine changing that
[22:21:31] <dbaupp> jmgrosen: https://github.com/mozilla/rust/issues/6830 fwiw
[22:21:33] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[22:21:38] <dbaupp> strcat-- 
[22:22:00] <dbaupp> (I think we're already far too free with .get/.unwrap.)
[22:22:25] <benh> autoderef for Option? sign me up
[22:23:02] <strcat> not autoderef
[22:23:03] <strcat> explicit deref
[22:23:08] <strcat> like raw pointers
[22:23:31] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:24:00] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[22:24:04] <benh> yeah but just imagine the possibilities of autoderef. it'd be like nullable pointers!
[22:24:54] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[22:25:50] *** Parts: pnathan (Adium@moz-EF4F82C8.tukw.qwest.net) ()
[22:26:45] *** Joins: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net)
[22:27:02] *** Joins: jstevans (Instantbir@FC7D839.D2312BC6.DDE5D3F6.IP)
[22:27:28] <strcat> benh: well, worse
[22:27:34] <strcat> in C you don't have auto-deref
[22:29:09] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[22:29:23] *** Quits: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net) (Ping timeout)
[22:29:59] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[22:30:59] <jdm> pnkfelix: JSManaged doesn't exist yet
[22:31:15] <jdm> pnkfelix: actually, it might exist in the inline branch in src/components/script/dom/bindings/utils.rs
[22:32:23] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[22:33:13] <pnkfelix> jdm: ah, I'm still waiting for all the submodules to checkout
[22:33:34] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[22:33:36] <pnkfelix> jdm: (I wanted to take a look at JSManaged's API as part of input for what I'll draft about sigil sugar.)
[22:33:54] <jdm> pnkfelix: https://github.com/mozilla/servo/blob/inline/src/components/script/dom/bindings/utils.rs#L107
[22:34:15] <jdm> note that that's an old API
[22:34:34] <jdm> we would probably have something more like the AbstractNode one now that returns borrowed pointers instead of using callbacks
[22:35:29] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[22:37:18] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[22:37:58] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[22:40:56] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[22:45:40] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[22:47:50] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:48:21] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[22:50:09] *** Quits: hjr3 (hradtke@817E9B7E.C3D4F2AA.56F40276.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:51:13] *** ozten is now known as ozten|afk
[22:51:31] *** Quits: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP) (Quit: Yeri)
[22:52:03] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[22:53:52] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:54:09] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[22:54:19] <pcwalton> nmatsakis: where does the abi go in the new bare fn syntax?
[23:00:07] <pcwalton> nmatsakis: never mind, found it in your blog post
[23:00:42] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[23:01:13] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[23:01:23] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[23:02:50] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:03:11] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:03:24] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[23:03:24] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[23:04:28] *** Quits: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP) (Ping timeout)
[23:05:02] *** Joins: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP)
[23:05:37] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[23:05:51] <mletterle> oh goodie.. now I get to figure out rust multi-threading/tasking
[23:05:53] *** Quits: RMF (RMF@ADEE763B.194C8B26.11F731AB.IP) (Quit: Textual IRC Client: www.textualapp.com)
[23:07:08] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Quit: leaving)
[23:07:10] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[23:09:37] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[23:10:25] <ercxx> How do I prevent 
[23:10:36] <ercxx> oops
[23:11:06] <mletterle> not like that ;)
[23:11:22] <ercxx> I'm trying to mess with rust itself but changing the smallest thing takes more than 10 minutes to compile.
[23:11:32] <mletterle> is there a way to have a cross task block? or am I going to have to venture into unsafe territory here?
[23:11:35] <ercxx> Is there a way to prevent mass compilation?
[23:11:44] <cmr> ercxx: don't compile everything
[23:11:47] <cmr> ercxx: make stage1-rustc
[23:11:55] <ercxx> will try right away
[23:12:18] <sfackler> you can also do NO_REBUILD=1 in some cases if you're just changing tests
[23:12:35] <ercxx> make: *** No rule to make target 'stage1-rustc'.  Stop.
[23:13:02] <brson> rustc-stage1
[23:13:36] <ercxx> trying now
[23:15:10] <cmr> ah
[23:15:12] <cmr> sorry
[23:15:17] <brson> ercxx: the best way to do this is to `make check-stage1-std` to get a complete build of stage1 std then after that do `make check-stage1-std NO_REBUILD=1` to rebuild just the std test cases
[23:15:38] <brson> you can also do x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so
[23:16:03] <brson> which is the first rust binary built in stage0
[23:16:14] <mletterle> ah extra::sync looks promising.
[23:16:26] <ercxx> I'm just playing with TcpListener, which is in std. It's still very long.
[23:17:53] *** Quits: jstevans (Instantbir@FC7D839.D2312BC6.DDE5D3F6.IP) (Ping timeout)
[23:18:44] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:18:46] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:18:46] *** ChanServ sets mode: +ao brson brson
[23:19:13] *** Quits: sweet_kid (Upasana@7A8B6584.18833892.388CF16F.IP) (Quit: Leaving)
[23:20:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:21:45] <kmc> gr do I have to learn conditions now just to do "get me up to n bytes from this file, without crashing on EOF"
[23:21:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:23:00] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[23:23:22] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:23:32] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[23:23:36] <brson> kmc: yes
[23:23:49] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:24:28] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[23:24:35] *** Joins: zws3mb (Mibbit@A4F1BB26.8239D6FF.DDE5D3F6.IP)
[23:24:35] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:24:53] *** Joins: alonlevy (alon@moz-E6115DFA.bb.netvision.net.il)
[23:25:42] <McPherrin> Luqman: how did rust on arm in a qemu work out?
[23:26:07] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Quit: alan)
[23:26:36] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Broken pipe)
[23:26:53] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:28:00] <tjc> kmc: learn them so you can state an opinion when we debate whether to remove them in some upcoming Rust meeting :-)
[23:29:11] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:29:17] <cmr> Someone I was emailing with about stack safety said that conditions really aren't useful when you don't have someone sitting there to do stuff to handle it a la common lisp
[23:29:52] <tjc> cmr: I haven't worked with conditions before Rust, but using them in Rust, in retrospect I feel like I've used them in cases where I probably should have just used task failure
[23:30:09] <tjc> Like, for rustpkg stuff, I didn't see a lot of cases where I wanted the caller to be able to supply a substitute value
[23:30:16] <tjc> Of course, I may be going about the problem wrong.
[23:31:13] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[23:31:38] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[23:31:43] *** Joins: mr_pants (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net)
[23:31:59] *** Quits: nkoep (nik@moz-7C89E6C9.pool.mediaways.net) (Client exited)
[23:32:34] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:32:43] <mr_pants> hello I'm from the university course.  I was wondering how you could use rust to hold a file in memory (simple cache).  I understand a hash table can be used to implement an LRU but how do i get the files into memory, not just the file pointers?
[23:32:44] <zws3mb>  Still struggling with borrowed pointers/closures/mutability.... http://pastebin.com/G5tQGwit Why does TCPStream::peer_name() require mutability?
[23:33:06] <cmr> mr_pants: read it, store the string
[23:33:32] <zws3mb> mr_pants, think like the default "Hello Krusty" page, but read into a string instead of typed out.
[23:33:38] <tjc> mr_pants: The simplest way is, like cmr said, to read the whole contents of the file into a string
[23:33:47] <mr_pants> awesome thanks
[23:33:49] <tjc> There are fancier things, but unless your assignment asks for something complex, do the simplest thing possible :-)
[23:34:38] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Ping timeout)
[23:35:02] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:35:10] *** Quits: snerd (motk@moz-E535583C.nonstopcrunchy.net) (Client exited)
[23:35:26] <pcwalton> zws3mb: I'm not sure why peer_name() would require mutability
[23:35:41] *** Quits: aeqwa (aeqwa@moz-3879D0B8.dsl.tropolys.de) (Quit: WeeChat 0.4.3-dev)
[23:35:57] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[23:36:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:37:02] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[23:37:24] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:38:24] <Sharp> strcat: So here's the thing… by implementing Drop for Foo I appear to make it larger than size 0 :P
[23:39:03] <strcat> Sharp: #[unsafe_no_drop_flag]
[23:39:08] <Sharp> Ah, thanks.
[23:39:30] <Sharp> Must have missed that earlier.
[23:39:50] *** ozten|afk is now known as ozten
[23:39:55] <strcat> I forgot to tell you about it
[23:40:06] *** Quits: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:40:26] *** Joins: jstevans (Instantbir@42A0AC8E.C4F5A14C.DDE5D3F6.IP)
[23:40:33] <pcwalton> zws3mb: it's because it's internally mutating some internal state by talking to the scheduler
[23:42:00] <pcwalton> zws3mb: just talked to brson and acrichto and I think we agree that those functions shouldn't be mutable
[23:42:46] <zws3mb> pcwalton, okay, I was quite confused as to why they would be...how might I go about circumventing that problem though?
[23:42:56] <pcwalton> zws3mb: I think you have no choice but to use cast::transmute_mut
[23:43:01] <mletterle> gah, can't initialize a static.
[23:43:02] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:43:03] <pcwalton> and file a bug :)
[23:43:19] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[23:43:49] <Sharp> Actually… even with that flag, if I add a destructor it seems to have a size.
[23:44:11] <zws3mb> pcwalton, okay--thank you!
[23:44:40] <strcat> Sharp: on the type
[23:44:47] <strcat> #[unsafe_no_drop_flag] struct Foo;
[23:44:51] <Sharp> Oh.  Duh.
[23:44:58] <Sharp> Sorry, my brain is clearly not working today :D
[23:46:11] *** Quits: jstevans (Instantbir@42A0AC8E.C4F5A14C.DDE5D3F6.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[23:47:27] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:49:20] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[23:49:35] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:50:12] <Sharp> Haha, now it's hanging attempting to create the vector (I couldn't create it fixed size because it insists Foo is not copyable, so I used from_elem).
[23:50:13] <mletterle> is mutex doing what I think it's doing here? https://github.com/mletterle/rust-nss/commit/ec9961e7cf2d67f73360d5771a7a5ae2ffe0beb9
[23:50:18] <Sharp> Which I suppose is fine :P
[23:50:42] <strcat> Sharp: [Foo, Foo, Foo] should work
[23:50:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:50:50] *** ChanServ sets mode: +ao brson brson
[23:50:51] <strcat> from_elem is for ~[T]
[23:50:55] <Sharp> I think when I tried that earlier it didn't call the destructor
[23:50:57] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[23:50:58] <strcat> neither should hang
[23:51:00] <Sharp> But probably not.
[23:51:01] <cmr> I wonder if we could add a syntax extension before_main!(static $name: $type = $expr) that just shoves the expr into a fn, and then gens a function that the runtime calls before main to initialize them.
[23:52:09] <Sharp> Maybe it's hanging because of my implementation of clone().
[23:52:10] <sfackler> there'd have to be some limitations on $expr to make it safe
[23:52:17] <Sharp> fn clone(&self) -> Foo { Foo }
[23:52:39] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[23:53:07] <Sharp> (Though that didn't hang before...)
[23:54:30] *** Joins: Mx7f (Mibbit@moz-A4F22CCD.nycap.res.rr.com)
[23:54:34] <reedlepee> make check gives the following error 
[23:54:35] <reedlepee> cp: cannot create regular file `i686-unknown-linux-gnu/stage1/lib/libextra-a7c050cfd46b2c9a-0.9-pre.so': Permission denied make: *** [i686-unknown-linux-gnu/stage1/lib/libextra.so] Error 1
[23:54:41] <reedlepee> what can be done ?
[23:54:45] <cmr> sfackler: such as?
[23:55:10] <sfackler> cmr: you can't be allowed to reference any statics probably
[23:55:57] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[23:55:59] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[23:56:05] <strcat> reedlepee: looks like you ran make as root previously
[23:56:38] <sfackler> or I guess really just before_main'd statics
[23:56:40] <cmr> sfackler: actually.
[23:56:53] <cmr> sfackler: any before_main would have to be a static mut, which requires unsafe code anyway.
[23:57:00] <reedlepee> strcat: no i didn't 
[23:57:08] <krdln> How can I mix stdout and prints? https://gist.github.com/krdln/7224818 doesn't work correctly.
[23:58:23] <Sharp> Nope… that's not it.  It's hanging even without Clone and with let x = [Foo, Foo, Foo].
[23:58:46] *** Joins: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com)
[23:58:56] <dcrewi> is the compiler's test harness documented anywhere?
[23:59:05] <McPherrin> krdln: What output do you get?  I'd hazard a guess there need to be some flushes in there
[23:59:07] <cmr> krdln: you might need to flush it? iirc there's a bug/feature where they aren't flush when they're destructed.
[23:59:28] <strcat> reedlepee: hm, well I don't know why that would happen
[23:59:57] <Sharp> rusti: #[unsafe_no_drop_flag] struct Foo; impl Drop for Foo { fn drop(&mut self) {} }; let x = [Foo, Foo, Foo];
[23:59:59] <krdln> I get  WorldHello! Seems like print have it's own buffer 
