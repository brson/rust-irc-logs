[00:00:13] <MaikKlein> is http://smallcultfollowing.com/babysteps/ also hosted on github?
[00:00:38] <aatch> brson, what kind of API do you want for AtomicOption?
[00:01:17] <MaikKlein> yeah it is
[00:04:13] *** Joins: zenon (Mibbit@moz-4ACF1D7.hsd1.wa.comcast.net)
[00:05:29] *** Quits: zenon (Mibbit@moz-4ACF1D7.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:07:11] *** Joins: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP)
[00:08:55] *** Quits: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP) (Ping timeout)
[00:10:29] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Quit: leaving)
[00:11:51] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[00:13:34] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:13:46] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[00:15:35] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[00:16:05] *** Joins: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP)
[00:18:21] <brson> aatch: take, give, swap, compare_and_swap. I think it basically has to be AtomicPtrOption though to guarantee that the Option is pointer sized. Maybe it's a combination of your AtomicPtr and Option. I haven't put much thought into it
[00:18:57] *** Quits: MaikKlein (maik@moz-4A7E00D6.dip0.t-ipconnect.de) (Ping timeout)
[00:19:02] <brson> It may not even contain an actual Option type if implemented with *c_void or somesuch
[00:21:16] <aatch> brson, well using owned pointers, I have swap and take
[00:21:26] <brson> aatch: yep
[00:21:40] <aatch> I'm not sure if the others make sense in that context.
[00:22:35] <aatch> I could have give, but it would just be let _ = self.take(order)
[00:22:57] <aatch> No, wait, I mean let _ = self.swap(ptr, order)
[00:23:18] <brson> I thought you already had 'give'
[00:23:35] <aatch> brson, I'm changing the impl.
[00:23:58] <aatch> AtomicPtr now uses *mut ptr everywhere
[00:24:04] <aatch> for maximum unsafety.
[00:24:39] <brson> lol
[00:24:47] <aatch> But it has compare-and-swap.
[00:25:13] <aatch> since cas for pointers only makes sense if you can alias pointers.
[00:25:42] <aatch> and task-local atomic types aren't exactly useful...
[00:25:43] *** Joins: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP)
[00:26:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[00:26:37] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:27:41] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:27:57] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:28:03] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[00:28:46] *** Quits: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP) (Input/output error)
[00:29:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:29:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:31:21] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[00:37:27] *** Joins: \n (_n@moz-C2B49FFE.hsd1.ca.comcast.net)
[00:39:29] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[00:42:11] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[00:42:14] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[00:42:46] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[00:44:30] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:46:32] *** Quits: steveklabnik (steve@31B68BE8.171C391.80C20C35.IP) (Ping timeout)
[00:46:50] <arnold> Hi all. I'm trying to implement a simple parallel map function, but can't seem to figure out how to pass a function to a closure for a task. If it's an owned function, compilation fails for 'illegal by-move capture of captured outer immutable variable in a stack closure', and if I use a borrowed or managed function, it is illegal because 'value has non-owned type `&fn('a) -> 'b`. Any ideas?
[00:51:05] *** Joins: SimonSapin (simon@5AAE35B2.5EFFC0B8.24454B25.IP)
[00:51:38] *** Quits: \n (_n@moz-C2B49FFE.hsd1.ca.comcast.net) (Client exited)
[00:52:26] *** Joins: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net)
[00:54:31] <arnold> paste of trying to use borrowed fn in the task: http://pastebin.com/0QLmCqNg
[00:56:32] *** Joins: steveklabnik (steve@31B68BE8.171C391.80C20C35.IP)
[00:57:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:57:45] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/7UyTfw
[00:57:45] <ghrust> 13rust/06auto 14a4b3fa8 15Niko Matsakis: Issue #3678: Remove wrappers and call foreign functions directly
[00:57:45] <ghrust> 13rust/06auto 14d3c3956 15Niko Matsakis: core => std
[00:57:45] <ghrust> 13rust/06auto 141df1356 15Niko Matsakis: Cleanup return logic for Rust fns with foreign ABIs
[00:57:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:59:55] <aatch> arnold, there are some limitations in closures at the moment, you should use a Cell to move the element into the task.
[01:01:30] <arnold> aatch: thanks, I'll give that a try, where can I find Cell?
[01:01:37] <aatch> std::cell
[01:01:44] <aatch> if you are on incoming
[01:01:48] <aatch> core::cell otherwise
[01:03:01] <arnold> thanks!
[01:05:34] *** Quits: steveklabnik (steve@31B68BE8.171C391.80C20C35.IP) (Ping timeout)
[01:07:51] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[01:09:21] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[01:09:38] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[01:11:00] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:12:44] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[01:13:31] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[01:15:13] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[01:17:43] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Ping timeout)
[01:26:22] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[01:33:57] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:36:59] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[01:40:00] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:44:17] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[01:45:37] *** Quits: Raynes (macro@moz-E5F01CE6.members.linode.com) (Ping timeout)
[01:46:02] *** Joins: Raynes (macro@moz-E5F01CE6.members.linode.com)
[01:46:09] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[01:49:48] *** Quits: paupau (NEAT@moz-C616DA0A.hsd1.ca.comcast.net) (Ping timeout)
[01:51:41] *** Quits: isaac (isaac@moz-C0CEEB7.dfw.dsl-w.verizon.net) (Ping timeout)
[01:52:57] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:54:23] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[01:55:56] *** Joins: MaikKlein (maik@moz-4A7E00D6.dip0.t-ipconnect.de)
[01:56:46] *** Joins: catpig (catpig@moz-D3725275.dip0.t-ipconnect.de)
[01:56:46] *** Quits: snearch (snearch@moz-9C336E70.pool.mediaways.net) (Quit: Verlassend)
[02:00:14] <bjz> rusti: "foo".tail()
[02:00:15] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LJYY
[02:00:56] <bjz> rusti: match "foo" { [_,..tl] => tl }
[02:00:58] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FVAQ
[02:01:12] <bjz> rusti: match "foo" { &[_,..tl] => tl }
[02:01:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/NaSZ
[02:01:25] <bjz> bleh
[02:01:41] *** Joins: pnathan (Adium@moz-BAD56020.wireless.fsr.net)
[02:01:57] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[02:02:01] <bjz> no destructuring on strings, it seems
[02:02:05] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[02:02:07] <bjz> and no tail
[02:02:42] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: computer sleeping)
[02:03:30] <bjz> rusti: "foo".slice(1, "foo".len())
[02:03:31] -rusti- "oo"
[02:08:05] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[02:09:35] <MaikKlein> @bjz do you use tasks for your math lib?
[02:09:52] <bjz> MaikKlein: no
[02:10:19] <bjz> :)
[02:10:29] <MaikKlein> aren't tasks suited this task (haha)?
[02:10:35] <MaikKlein> for*
[02:10:56] <bjz> possibly
[02:11:09] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[02:13:10] <bjz> unfortunately I'm not smart enough yet
[02:13:13] <bjz> :P
[02:13:13] <arnold> aatch: unfortunately I seem to get the same errors closing over a Cell with a function in it as the function itself. Did you mean some other way to get the Cell into the task besides closing over it?
[02:13:28] <bjz> MaikKlein: it's currently broken atm :(
[02:13:40] <bjz> MaikKlein: it will be fixed though
[02:13:51] *** Quits: lerc (quassel@121.75.155.67) (Ping timeout)
[02:14:49] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[02:15:05] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:15:11] <MaikKlein> yeah I tried to write an vec3 and the got my first compiler bug :(
[02:15:24] <cmr> a rite of passage :)
[02:15:42] <bjz> MaikKlein: I can fix lmath for you if you like
[02:15:48] *** Joins: tjc (tjc@moz-49417AD2.dsl.dynamic.sonic.net)
[02:15:48] *** ChanServ sets mode: +o tjc
[02:16:04] <MaikKlein> no it's not that important to me
[02:16:05] <bjz> MaikKlein: I just have to do a heap of work-arounds
[02:16:16] <MaikKlein> but thanks
[02:16:27] <MaikKlein> I am more into learning atm :)
[02:16:50] <MaikKlein> is SIMD possible in Rust?
[02:16:52] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[02:16:55] <cmr> yes
[02:16:59] <bjz> they are working on it
[02:17:06] <bjz> a fellow from samsung is
[02:17:09] <cmr> sanxiyn is implementing it
[02:17:13] <MaikKlein> oh cool
[02:17:14] <bjz> yup
[02:17:19] <cmr> afaik a few patches for it ahve alreadylanded.
[02:17:31] <bjz> oh nice
[02:17:36] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[02:17:42] <cmr> the #[simd] attribute on structs
[02:17:50] <cmr> I don't knwo if it actually uses SIMD extensions yet.
[02:18:54] <MaikKlein> btw how would I do a benchmark in rust?
[02:19:19] <cmr> MaikKlein: you can look in src/test/bench for inspiration
[02:19:31] <bjz> cmr: I think it just checks for alignment atm
[02:19:56] <bjz> cmr: I think it works on tuples and vec newtypes too
[02:20:03] <bjz> but don't quote me
[02:20:04] <cmr> bjz: oh, neat.
[02:21:49] *** Quits: lerc (quassel@121-74-233-23.telstraclear.net) (Ping timeout)
[02:22:56] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:22:57] <ghrust> 01[13rust01] 15pcwalton created 06intra-crate-start (+1 new commit): 02http://git.io/Gi7rQQ
[02:22:57] <ghrust> 13rust/06intra-crate-start 14cf34f9f 15Patrick Walton: librustc: Allow intra-crate start functions, for runtimeless operation.
[02:22:57] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:23:55] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[02:25:08] <MaikKlein> i don't uderstabd
[02:25:11] <MaikKlein> understand*
[02:25:21] <bjz> ?
[02:25:25] <bjz> what?
[02:25:26] <MaikKlein> there are no real benchmarks, or do i look at the wrong files?
[02:25:48] <cmr> what's fake about the benchmarks in https://github.com/mozilla/rust/tree/incoming/src/test/bench ?
[02:26:23] <MaikKlein> https://github.com/mozilla/rust/blob/incoming/src/test/bench/shootout-fibo.rs what is this telling me?
[02:26:30] *** cscottnet_away is now known as cscottnet
[02:26:43] <cmr> it's benchmarking function call for the most part.
[02:26:52] <cmr> most of those benchmarks are from the programming language shootout
[02:26:57] <cmr> (thus the names)
[02:27:06] <cmr> http://benchmarksgame.alioth.debian.org/
[02:28:13] <bjz> http://pcwalton.github.io/blog/2013/04/18/performance-of-sequential-rust-programs/
[02:28:28] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[02:28:28] *** ChanServ sets mode: +o brson
[02:29:15] <cscottnet> how do i do pointer equality testing in rust?  i'm getting "error: binary operation == cannot be applied to type `object::Object`"
[02:29:51] <cmr> cscottnet: ptr::ref_eq I think
[02:29:59] <bjz> yep
[02:30:00] *** Parts: pnathan (Adium@moz-BAD56020.wireless.fsr.net) ()
[02:30:01] *** kimundi is now known as zz_kimundi
[02:30:06] <cscottnet> ok, sounds reasonable.
[02:30:14] <MaikKlein> I never did a benchmark in my life, but how do I know how fast the program executes?
[02:30:17] <cmr> cscottnet: you can do #[deriving(Eq)] to get real equality though
[02:30:24] <cmr> MaikKlein: you compile and execute it
[02:31:01] <cscottnet> "real equality"?  no, i have two pointers to jsobjects, and i want to implement javascript ===, that is, i want to see if my two @mut Object values are pointing to the same object.
[02:31:28] <cmr> cscottnet: well real meaning component-wise
[02:31:36] <tjc> deriving(Eq) gives you structural equality
[02:31:46] <tjc> the nature of reality is a philosophical question that Rust doesn't have a stance on ;-)
[02:31:57] <cscottnet> tjc: i agree with you ;)
[02:32:26] <cscottnet> i was just giving cmr a hard time; for the particular reality i'm dealing with, ptr::ref_eq sounds like the right thing
[02:32:35] <cmr> :)
[02:33:41] *** Joins: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP)
[02:34:22] <cscottnet> as a matter of abstract philosophy, i tend to like duck typing, hence structural equality is quite nice.  not sure that deriving(Eq) actually gives full structural equality of duck types, though.
[02:35:56] <cscottnet> my philosophy has probably been severely compromised by extensive python and javascript influence
[02:36:55] <cscottnet> hm, ptr::ref_eq has the signature fn ref_eq<'a, 'b, T>(thing: &'a T, other: &'b T) -> bool
[02:37:35] <cscottnet> and i've got two @mut Foo (where there is a struct Foo) values.  Do I need to reference the @mut and then borrow a pointer?
[02:38:01] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:38:01] <ghrust> 01[13rust01] 15pcwalton 04deleted 06intra-crate-start at 14cf34f9f: 02http://git.io/72NDnA
[02:38:01] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:38:11] <cscottnet> after all, the @mut boxes can be different, while still containing the same value, right?  (although maybe i'm confused)
[02:40:08] *** Quits: nooy (user@moz-2458675D.a146.priv.bahnhof.se) (Client exited)
[02:42:40] <arnold> in case anyone is curious, I've worked around the issue I had with trying to pass the same function to multiple spawned tasks by instead making the function take a no-param function that returns the function to be called: http://pastebin.com/cJDKCvMM
[02:43:06] *** Quits: zz_kimundi (kimundi@moz-D90FF6DB.dip0.t-ipconnect.de) (Ping timeout)
[02:43:30] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:45:17] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[02:45:52] *** Joins: zz_kimundi (kimundi@moz-D417DC3B.dip0.t-ipconnect.de)
[02:46:11] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:46:18] *** zz_kimundi is now known as kimundi
[02:47:04] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[02:47:52] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[02:48:53] *** Quits: MaikKlein (maik@moz-4A7E00D6.dip0.t-ipconnect.de) (Ping timeout)
[02:54:16] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[02:57:09] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:01:47] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Connection reset by peer)
[03:01:59] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[03:07:07] *** Joins: dbaupp (Thunderbir@moz-AA5D250F.lns20.syd6.internode.on.net)
[03:16:24] *** Joins: catpigger (catpig@moz-43225E55.dip0.t-ipconnect.de)
[03:16:58] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:17:28] *** Quits: catpig (catpig@moz-D3725275.dip0.t-ipconnect.de) (Ping timeout)
[03:18:39] *** Quits: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP) (Input/output error)
[03:18:47] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[03:20:28] *** Quits: catpigger (catpig@moz-43225E55.dip0.t-ipconnect.de) (Quit: Verlassend)
[03:27:41] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[03:28:43] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[03:30:04] <bstrie> dbaupp: pong
[03:38:39] *** Quits: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net) (Quit: Leaving.)
[03:39:36] <zxcdw> zero.rs seems awesome
[03:40:38] *** Quits: SimonSapin (simon@5AAE35B2.5EFFC0B8.24454B25.IP) (Ping timeout)
[03:46:52] <aatch> cscottnet, two @-ptrs that compare equal point to the same data.
[03:47:01] <aatch> Since @-ptrs are implemented as a 32-byte header
[03:47:19] <aatch> (at the moment, anyway)
[03:47:36] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[03:47:44] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:49:32] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[03:50:36] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[03:51:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:51:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1463ae60c to 14e2f8b51: 02http://git.io/N3iJvQ
[03:51:49] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:51:50] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:51:50] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/385Cqw
[03:51:50] <ghrust> 13rust/06auto 14751a0ed 15Tim Chevalier: testsuite: Add test cases that pass
[03:51:50] <ghrust> 13rust/06auto 1424d6c54 15bors: auto merge of #6695 : catamorphism/rust/moretestcases, r=catamorphism
[03:51:50] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:52:23] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[03:56:44] *** Joins: SimonSapin (simon@8ACF1000.5EFFC0B8.24454B25.IP)
[03:57:14] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Quit: Leaving.)
[04:02:04] <bstrie> !time
[04:02:44] *** Joins: paupau (NEAT@moz-C616DA0A.hsd1.ca.comcast.net)
[04:02:53] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:03:33] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[04:08:04] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[04:10:47] <arnold> aatch: is this more like what you were thinking about using Cells for passing elements to a task? http://pastebin.com/KTuGnybN Unfortunately it still needs Copy, despite the doc comment for spawn_with saying it is useful for "noncopyables"
[04:11:37] *** Joins: aruniiird (arun@53CED781.5BF4CDD7.73686190.IP)
[04:11:51] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[04:11:54] <aatch> arnold, no. I meant that you can do Cell::new(val) before the closure, then Cell::take() inside it to get it back out.
[04:12:05] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[04:12:07] <aatch> which avoids the copying.
[04:12:13] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Input/output error)
[04:14:02] <arnold> that's essentially what spawn_with does. But I also found whenever referring to a Cell inside the closure, I get the same compiler errors as referring to the value inside directly
[04:15:34] *** Quits: aruniiird (arun@53CED781.5BF4CDD7.73686190.IP) (Ping timeout)
[04:18:29] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[04:18:35] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[04:18:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:18:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1424d6c54 to 14e2f8b51: 02http://git.io/N3iJvQ
[04:18:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:18:50] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:18:50] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/pCfj3Q
[04:18:50] <ghrust> 13rust/06auto 14196851c 15Tim Chevalier: core: Fail with a better error message when list_dir gets an empty path...
[04:18:50] <ghrust> 13rust/06auto 14a243ea3 15Tim Chevalier: testsuite: Add a test for listing the root directory......
[04:18:51] <ghrust> 13rust/06auto 14510d0f2 15bors: auto merge of #6687 : catamorphism/rust/list_dir_empty, r=catamorphism...
[04:18:52] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:19:18] <steven_is_false> So close to releasing my project to the public. Now I just need a name!
[04:20:04] <arnold> for the values, in that for loop, even though T is Owned, it is Borrowed pointers that it is iterating over (due to 'map')... and creating an Owned pointer to that value is considered 'moving out of deference of immutable & pointer'
[04:20:16] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:20:55] <arnold> should have copied that compiler error in the first place: "moving out of dereference of immutable & pointer"
[04:21:04] <dbaupp> bstrie: doesn't matter, was just fishing for an r ;P
[04:22:10] *** Joins: z0w0 (zack@moz-A5D3D7C0.lns3.woo.bigpond.net.au)
[04:23:29] *** Quits: tjc (tjc@moz-49417AD2.dsl.dynamic.sonic.net) (Quit: Places to go, people to annoy)
[04:24:46] <arnold> the main problem was with the function call in the closure - Cells wouldn't work for that even if they would compile, because they limit just one task to the value in the Cell at a time.
[04:26:34] *** Joins: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP)
[04:26:34] *** ChanServ sets mode: +o brson
[04:29:28] *** Joins: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP)
[04:30:44] *** Joins: aruniiird (arun@moz-3DB73AA5.azulsystems.com)
[04:31:38] *** Quits: seth (seth@5AAE35B2.5EFFC0B8.24454B25.IP) (Ping timeout)
[04:33:55] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[04:36:52] *** Joins: doomlord (doomlod@moz-B63745D8.range86-176.btcentralplus.com)
[04:36:53] *** Joins: hjr3 (hradtke@moz-AE3056B9.static.stls.mo.charter.com)
[04:37:09] *** Quits: arnold (arnold@moz-72830A1C.nyc.res.rr.com) (Quit: WeeChat 0.4.1)
[04:38:21] *** Quits: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[04:40:00] *** Joins: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP)
[04:40:00] *** ChanServ sets mode: +o brson
[04:41:36] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:44:50] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[04:46:33] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[04:48:28] *** Quits: paupau (NEAT@moz-C616DA0A.hsd1.ca.comcast.net) (Quit: out)
[04:49:22] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[04:51:07] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:53:55] *** Quits: aruniiird (arun@moz-3DB73AA5.azulsystems.com) (Ping timeout)
[04:55:49] <bjz> how do I append a character to a string?
[04:56:00] <aatch> bjz, push_char?
[04:56:05] <bjz> ahh
[04:56:06] <bjz> hah
[04:56:09] * aatch is guessing
[04:56:53] <bjz> that works
[04:57:48] *** Joins: int3_ (int3_@moz-B7B5F043.singnet.com.sg)
[05:03:23] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[05:04:11] *** Quits: hjr3 (hradtke@moz-AE3056B9.static.stls.mo.charter.com) (Ping timeout)
[05:10:23] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Quit: Leaving.)
[05:10:44] *** Joins: madmoose (Hat@moz-E1973371.nerp.net)
[05:10:47] <bjz> any ideas on how I might make this tokeniser more elegant: https://gist.github.com/bjz/3fea1656f13ae7f881e4
[05:12:04] *** Joins: hay_guise (Mibbit@moz-258BC5F7.eastlink.ca)
[05:12:04] <bjz> it's pretty horrid
[05:12:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:12:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/pCfj3Q
[05:12:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:13:02] <dbaupp> bjz: token.clone()?
[05:13:13] <aatch> array of slices!
[05:13:56] <bjz> aatch: I need to keep the parens
[05:14:22] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[05:14:34] <dbaupp> bjz: you could do '(' | ')' => { push_token(); tokens.push(c.to_str()) }
[05:15:03] <bjz> ahh
[05:15:29] <bjz> nice
[05:15:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:15:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/hjRZ7g
[05:15:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:15:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:15:47] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/8273Lw
[05:15:47] <ghrust> 13rust/06auto 14751a0ed 15Tim Chevalier: testsuite: Add test cases that pass
[05:15:47] <ghrust> 13rust/06auto 141deb3b3 15Tim Chevalier: testsuite: xfail issue-5530...
[05:15:47] <ghrust> 13rust/06auto 147fb3a50 15bors: auto merge of #6695 : catamorphism/rust/moretestcases, r=catamorphism
[05:15:50] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:15:51] <dbaupp> also, merging the two _ matches with an if else might be nicer (or it might not be)
[05:16:21] <bjz> lolwut, it says char doesn't impl to_str
[05:16:47] <bjz> rusti: 'w'.to_str()
[05:16:49] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YjDY
[05:17:14] <bjz> oh well, fmt for now I guess
[05:17:22] <dbaupp> rusti: str::from_char('a')
[05:17:24] -rusti- ~"a"
[05:18:32] <dbaupp> also, if you make push_token a macro, you don't have to do the clone
[05:19:15] <bjz> neat
[05:20:11] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[05:20:24] <dbaupp> but, as aatch says, you could make it either an iterator of slices, or a vec of slices to avoid the allocations
[05:20:50] <dbaupp> (just store the start of a token, and "pushes" are slicing from the start to the current position)
[05:21:55] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:22:14] <bjz> what function should I use, just to start me off?
[05:22:26] <dbaupp> for what?
[05:22:46] <bjz> "you could make it either an iterator of slices, or a vec of slices to avoid the allocations"
[05:22:55] <bjz> iterator of slices
[05:23:05] <bjz> maybe
[05:23:06] <dbaupp> Oh, std::iterator
[05:23:52] <dbaupp> (depends whether you want a `for each_token(str) |tok| { ... }` iterator, or the more general std::iterator iterator)
[05:24:38] <dbaupp> for the former, just replace the tokens.push(token) with `if !f(token) { return false; }`
[05:24:52] <dbaupp> and return true at the bottom of each_token
[05:25:01] <bjz> where is each_token?
[05:25:12] <dbaupp> bjz: that's what you'd define :)
[05:25:39] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[05:25:39] <bjz> oh k
[05:25:58] <dbaupp> for the later, you have struct TokenIterator<'self> { position: uint, string: &'self str }, and impl the Iterator trait
[05:26:16] <dbaupp> *latter
[05:31:19] <aatch> Goddamit, the one time strcat isn't on and I have news for him.
[05:32:44] *** Joins: enticeing (user@B2F7F54B.E4834407.EAAB5301.IP)
[05:33:00] <enticeing> okay, i'm not sure exactly how i should seperate code into seperate files
[05:33:14] <hay_guise> can anyone suggest how to fix this? i'm trying to write a recursive function on a recursive data structure, and i can't figure out how to do it. tried two implementations, but neither one compiles. https://gist.github.com/hclarke/a49503c5c86b9b1175ac
[05:33:15] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[05:33:39] <enticeing> if it's compiling into a binary at the end, should i have a .rc somewhere? or just put the linking stuff into a main.rs or something
[05:34:21] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[05:34:47] <dbaupp> enticeing: the .rc extension is old/deprecated, you can basically organise it how you want at the moment
[05:34:50] <aatch> enticeing, .rc files will probably get removed
[05:35:14] <dbaupp> (I think rustpkg will have ideas about file structure... possibly a bin.rs file?)
[05:35:48] <aatch> dbaupp, if I remember correctly, there is bin.rs and lib.rs as main ones
[05:35:56] <dbaupp> hay_guise: is it complaining about moves behind a & match?
[05:35:59] <aatch> there is also pkg.rs for more complex setups
[05:36:15] <dbaupp> hay_guise: (and/or moving out of an immutable structure?)
[05:36:15] <enticeing> aatch: okay, so if i have multiple files in the same dir, how should i use code between them?
[05:36:28] <dbaupp> enticeing: 'mod filename'
[05:36:36] <enticeing> derp, i was using extern mod for some reason
[05:37:14] <dbaupp> you can use `#[path="path/to/file"] mod whatever_you_want;` for more flexibility too
[05:37:49] <aatch> dbaupp, turns out marking &mut ptrs as noalias is pretty easy lol.
[05:38:01] <dbaupp> aatch: ooh, sweet!
[05:38:05] <enticeing> hmmm
[05:38:21] <hay_guise> dbaupp: yes, the first thing i tried complains about moving out of immutable structure, the second try complains about by-move behind & match.
[05:38:31] <dbaupp> aatch: it's one or two lines checking for &mut and calling some LLVM function?
[05:38:42] <aatch> dbaupp, yep.
[05:38:56] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[05:38:56] <enticeing> `extern mod` gives me `can't find crate`, `mod` gives me ` `use` and `extern mod` declarations must precede items`
[05:39:09] <aatch> I'm not sure if I have it in the best place, but it works.
[05:40:37] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[05:40:47] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[05:41:30] <dbaupp> hay_guise: `fn first<'r, T>(tree: &'r Tree<T>) -> &'r T { match *tree { Leaf(ref e) => e, Node([ref first_child, .. _]) => first(first_child) } }`
[05:41:33] <dbaupp> might work
[05:43:19] <enticeing> i'm not sure why i'm getting this: http://ix.io/5Nh
[05:43:41] <dbaupp> hay_guise: basically those error messages are saying that you are destructuring/destroying a data structure that you are not allowed to
[05:43:52] <dbaupp> hay_guise: so you have to do it without destructuring
[05:44:08] <enticeing> hmmm
[05:44:11] <dbaupp> hay_guise: which basically involves returning a pointer to the interior of the data structure
[05:44:24] <enticeing> it works if i put mod after use, which doesn't really make sense to me
[05:44:43] <dbaupp> hay_guise: but to do that, you need to make sure the Rust compiler knows about how long the interior-pointer is valid for
[05:44:47] <aatch> enticeing, you need put `use`s before everything, except extern mod
[05:45:00] <enticeing> that's odd
[05:45:06] <aatch> if you declare the mod in the same file, you don't need to `use` it though.
[05:45:07] <dbaupp> hay_guise: which is precisely as long as the original pointer is valid for (this is what the 'r lifetime is saying)
[05:45:07] <enticeing> shouldn't mod be up there with extern mod ?
[05:45:22] <aatch> enticeing, it's to do with the shadowing rules.
[05:45:31] <aatch> The order follows the shadow rules.
[05:45:53] <enticeing> well, i have everything building now, so thanks
[05:46:02] <aatch> also, extern mod and use have a bigger impact on resolution than mod
[05:46:46] <enticeing> it does mostly nothing right now: https://github.com/enticeing/rustchip
[05:46:48] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[05:47:12] <aatch> Chip16?
[05:47:46] <dbaupp> there should be a big helpful warning messages if rust detects a mod before a use, since this comes up semi-regularly
[05:47:49] <enticeing> it's a simple architecture designed to be easy to emulate
[05:49:08] *** Joins: caitp_ (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[05:50:05] <aatch> enticeing, cool.
[05:51:03] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[05:51:37] <hay_guise> dbaupp: cool. i got it working the way i want. the thing i was missing was the 'ref' keyword. thanks!
[05:52:40] <dbaupp> hay_guise: nice :) (be careful about [0] btw, it can make the task fail if the vector is too short)
[05:52:48] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:52:57] <aatch> dbaupp: https://github.com/mozilla/rust/pull/6742
[05:53:20] <Eridius> rusti: for str::each_split("foobar", |c| false) |s| io::println(s) }
[05:53:20] -rusti- foo.rs:6:4: 6:5 error: incorrect close delimiter: `}`
[05:53:20] -rusti- foo.rs:6     });
[05:53:20] -rusti-              ^
[05:53:28] <Eridius> rusti: for str::each_split("foobar", |c| false) |s| { io::println(s) }
[05:53:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WXFT
[05:53:39] <dbaupp> aatch: awesome!
[05:53:48] <hay_guise> dbaupp: of course. in the place i'm actually using it, i have a bounds check :)
[05:53:59] <dbaupp> aatch: (you can mark ~ pointers are noalias too, right?)
[05:54:07] <dbaupp> hay_guise: :)
[05:55:05] <aatch> dbaupp, probably.
[05:55:08] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[05:55:35] <aatch> Should be fairly easy to add. I'm just making sure this works properly first.
[05:56:21] <dbaupp> working properly is optional! :P
[05:57:59] <aatch> I figure that getting the /idea/ out first with an initial impl, then refining it, is more efficient
[05:58:31] <aatch> so I can get direction earlier, and thus avoid wasting time refactoring because I missed something.
[05:59:06] <dbaupp> yeah, that is reasonable :)
[05:59:44] <aatch> I'm now trying to figure out what would be involved with implementing TBAA, or even a proper Alias Analysis pass
[06:01:17] <cscottnet> zxcdw: zero.rs?
[06:01:50] <dbaupp> cscottnet: https://github.com/pcwalton/zero.rs
[06:02:00] <dbaupp> cscottnet: running Rust without the runtime
[06:02:23] <dbaupp> aatch: yeah, a general framework would be more... general
[06:06:53] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[06:09:41] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:10:02] <aatch> dbaupp, hmm... Seems like one of the first things to do would be to use our own set of passes, instead of the C/C++ based ones.
[06:10:32] <dbaupp> aatch: I'm not sure what you mean by C/C++?
[06:10:36] <dbaupp> (the ones in LLVM?)
[06:12:44] <aatch> Theres an API that is intended to make it easy to have C/C++-like optimization passes
[06:13:08] <aatch> Including the different levels
[06:13:47] *** Quits: KindOne (KindOne@moz-97FBD8C0.dynamic.ip.windstream.net) (Ping timeout)
[06:17:12] *** Joins: KindOne (KindOne@moz-D175B296.dynamic.ip.windstream.net)
[06:21:46] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[06:22:58] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[06:23:31] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:24:24] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[06:25:10] *** Joins: steveklabnik (steve@moz-31F4139E.hfc.comcastbusiness.net)
[06:26:26] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[06:27:01] *** Joins: aruniiird (arun@moz-3DB73AA5.azulsystems.com)
[06:29:40] *** Joins: geomyidae (geomyidae@62E2E3C0.37A86C23.448B98CC.IP)
[06:33:02] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[06:34:41] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[06:42:17] <Ralith> aatch: what's a "C/C++-like optimization pass"?
[06:42:25] <Ralith> do you mean C/C++ *targeted*?
[06:44:47] <aatch> Ralith, basically it just a pre-built set of optimizations that are more-or-less equivalent to the C/C++ ones, including what gets turned on at the different levels
[06:45:12] <Ralith> I'll take that as a yes
[06:45:39] <aatch> Ralith, sorry, just making sure I was clear
[06:46:17] <Ralith> http://donsbot.wordpress.com/2010/03/01/evolving-faster-haskell-programs-now-with-llvm/ may be of interest re: choosing more-appropriate LLVM passes
[06:46:24] <Ralith> bust rust is close enough to C that I wouldn't worry about it too much
[06:47:06] <dbaupp> Ralith: I think there are plans for something like that, but we should at least be passing all the information Rust has to LLVM
[06:47:26] <Ralith> that certainly sounds like a good thing to do
[06:47:32] <dbaupp> (it only recently started passing some aliasing and alignment info)
[06:47:32] <Ralith> but rust*
[06:47:47] <Ralith> is there a writeup on that anywhere?
[06:48:33] *** Quits: blitter (blitter@moz-E761A52F.dyn.centurytel.net) (Ping timeout)
[06:48:38] <aatch> It doesn't /actually/ pass alias info yet, theres an open pull req lol.
[06:49:13] <dbaupp> aatch: :P
[06:49:14] <dbaupp> Ralith: https://github.com/mozilla/rust/issues/3519
[06:49:26] <dbaupp> (is the issue about LLVM passes)
[06:50:31] <Ralith> and with exactly that link in the first comment, heh
[06:50:55] <dbaupp> and https://github.com/mozilla/rust/pull/6742 and https://github.com/mozilla/rust/pull/6724 are two PRs passing more info to LLVM
[06:51:17] <dbaupp> (neither of which have been merged yet, heh, so 'recently' == 'soon')
[06:51:33] <aatch> The issue numbers are anagrams!
[06:51:45] * aatch notices weird things
[06:51:46] <dbaupp> :D
[06:53:06] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[06:55:41] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[06:55:49] *** Quits: hansjorg_ (hansjorg@moz-1D800A00.dsl.no.powertech.net) (Quit: leaving)
[06:59:38] *** Quits: steveklabnik (steve@moz-31F4139E.hfc.comcastbusiness.net) (Ping timeout)
[07:10:34] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[07:10:48] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[07:13:59] *** Quits: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[07:16:59] *** Joins: Tekk (user@moz-FE1B67B8.ec.res.rr.com)
[07:18:55] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:20:30] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[07:23:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[07:24:34] *** Joins: jviereck (Adium@moz-BA1D85DC.dclient.hispeed.ch)
[07:24:42] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[07:25:11] *** Joins: geomyidae_ (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[07:25:35] *** Quits: geomyidae (geomyidae@62E2E3C0.37A86C23.448B98CC.IP) (Ping timeout)
[07:25:40] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[07:26:20] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[07:26:50] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (Ping timeout)
[07:27:09] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[07:27:24] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[07:27:54] *** Quits: samebchase (samuel@moz-7519FE69.net) (Ping timeout)
[07:28:59] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[07:30:42] *** Quits: arete (arete@moz-CC2E6F16.new.xen.prgmr.com) (Ping timeout)
[07:31:15] *** Joins: samebchase (samuel@moz-7519FE69.net)
[07:31:21] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[07:31:41] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[07:34:11] *** Joins: arete (arete@moz-CE1DC602.xen.prgmr.com)
[07:35:12] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[07:37:07] <dbaupp> aatch: for the &mut noalias... any particular reason that it's `vec::from_fn`, rather than `do args.mapi |i, arg|`?
[07:44:38] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:51:32] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[07:53:38] *** Quits: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP) (Quit: ÎûúÎç§ÏùÄ Ïá†Ìá¥ÌñàÏäµÎãàÎã§.)
[07:53:46] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[07:55:31] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[08:04:31] *** Quits: int3_ (int3_@moz-B7B5F043.singnet.com.sg) (Connection reset by peer)
[08:04:49] *** Joins: int3_ (int3_@moz-B7B5F043.singnet.com.sg)
[08:06:55] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[08:09:45] *** Joins: int3__ (int3_@moz-B7B5F043.singnet.com.sg)
[08:09:46] *** Quits: int3_ (int3_@moz-B7B5F043.singnet.com.sg) (Connection reset by peer)
[08:20:02] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[08:20:19] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[08:20:49] *** Quits: aruniiird (arun@moz-3DB73AA5.azulsystems.com) (Ping timeout)
[08:20:57] <steven_is_false> Hi! How closely tied together would profiling, and code coverage information be to the normal debugging information? 
[08:21:14] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[08:21:43] <steven_is_false> What I mean is how much more work would it be to add those on once the normal debugging information is added.
[08:22:51] <dbaupp> steven_is_false: I believe profiling can just use the normal debugging stuff
[08:22:55] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[08:23:11] <steven_is_false> dbaupp: That would be awesome if it was possible.
[08:23:47] <dbaupp> if you're on linux, you can use 'perf' to do (basic) profiling already
[08:23:53] <dbaupp> (and mac has something similar)
[08:24:25] <steven_is_false> dbaupp: That's true. But that's not the same as code coverage.
[08:24:27] <dbaupp> http://stackoverflow.com/questions/11445619/profiling-c-on-mac-os-x
[08:24:38] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[08:24:51] <dbaupp> yes, except I've got no idea how code coverage tools work ;)
[08:25:30] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[08:25:54] <steven_is_false> Fair enough.
[08:26:22] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[08:34:16] *** Joins: mschifer (Adium@D9DE8DD6.29D23E98.3646F6BA.IP)
[08:35:34] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[08:39:42] *** Joins: aruniiird (arun@53CED781.5BF4CDD7.73686190.IP)
[08:44:21] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[08:45:13] <benh> if my pull request fails to merge by now, do i rebase and force-push to the pull request branch?
[08:45:43] <benh> or merge incoming, push merge commit?
[08:45:44] <dbaupp> benh: yes, that's one option
[08:45:56] <dbaupp> normally people seem to rebase and force-push
[08:46:04] <benh> ok
[08:46:08] <benh> thanks :)
[08:46:11] <dbaupp> (and I've never had anyone complain at me when I've done it)
[08:50:59] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[08:55:28] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[08:57:16] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[08:58:11] *** Joins: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr)
[09:00:03] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[09:00:32] *** Parts: mschifer (Adium@D9DE8DD6.29D23E98.3646F6BA.IP) ()
[09:01:24] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[09:01:54] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[09:05:42] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[09:05:43] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[09:12:03] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[09:13:34] *** Joins: deLta30 (quassel@43DFD49C.123B5A3C.110F01C1.IP)
[09:15:18] *** Joins: gour (bzlandfill@moz-B805441.adsl.net.t-com.hr)
[09:15:49] *** Quits: gour (bzlandfill@moz-B805441.adsl.net.t-com.hr) (Quit: CGI:IRC (EOF))
[09:16:56] *** Joins: gour (bzlandfill@moz-B805441.adsl.net.t-com.hr)
[09:17:27] *** Quits: gour (bzlandfill@moz-B805441.adsl.net.t-com.hr) (Quit: CGI:IRC)
[09:22:12] *** Quits: geomyidae_ (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Connection reset by peer)
[09:22:15] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[09:24:39] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Input/output error)
[09:25:02] *** Joins: gour (chatzilla@moz-B805441.adsl.net.t-com.hr)
[09:25:57] <gour> morning
[09:26:07] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[09:26:13] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[09:26:57] <gour> afaik, rust has FFI to call C libs, but i wonder what is the prospect of calling C++ to use rust for writing desktop apps with e.g. qt (bindings)?
[09:27:55] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[09:28:37] <cyndis> a subset of c++ is possible
[09:28:55] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[09:29:02] <cyndis> qt in general is almost impossible to port to anything
[09:29:34] <cyndis> well, not impossible, but very complicated
[09:32:17] <cyndis> with smoke it is possible but it is a different beast than binding other c++ libraries
[09:32:58] <gour> i see...it means that if one does not develop for web and want to avoid scripting languages (python really has bindings for everything), one is destined to use qt with c++ only :-(
[09:33:17] <gour> D does not have qtd, same with haskell, ada, nimrod...
[09:33:37] <spider-mario> there used to be qtHaskell but it looks dead
[09:33:51] <cyndis> i think it would be possible to create bindings but it would not be easy
[09:33:54] <gour> yeah, berlios projct some years ago
[09:34:08] <gour> there used to be qtd as well, but dead too
[09:34:37] <gour> otoh, gtk project does not look so well on mac and many are not happy with the gtk3 direction as well
[09:35:12] <spider-mario> it doesn‚Äôt looks great on windows either
[09:35:16] <gour> so, we can use python+ cython as "poor man's type-safety" :-D
[09:35:17] <spider-mario> neither in KDE
[09:35:24] <spider-mario> really, it only looks good in GTK+ environments
[09:35:39] <gour> ??
[09:35:47] <gour> ahh, ok
[09:36:23] <cyndis> this is the kind of stuff you have to do when wrapping Qt: http://techbase.kde.org/Development/Languages/Smoke
[09:38:36] <gour> actually ada has qt bindings, but not for qt5 (yet)...my mistake
[09:39:24] *** Quits: caitp_ (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp_)
[09:39:35] <cyndis> mhm..the more i think about this the more i want to try wrapping qt..
[09:41:08] <gour> i just wonder about all the plethora of new languages without having decent support for writing gui apps...assuming that everything won't go to hell..err. web
[09:44:09] <cyndis> yes, it is problematic.
[09:44:42] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[09:52:52] *** Quits: deLta30 (quassel@43DFD49C.123B5A3C.110F01C1.IP) (Connection reset by peer)
[09:56:16] *** Joins: deLta30 (quassel@D8773FDF.7728CFDA.F7B44A7.IP)
[09:57:00] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[09:59:37] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[10:02:57] *** Quits: hay_guise (Mibbit@moz-258BC5F7.eastlink.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[10:03:09] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[10:07:14] *** Quits: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[10:12:19] *** Joins: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr)
[10:13:29] *** Quits: deLta30 (quassel@D8773FDF.7728CFDA.F7B44A7.IP) (Ping timeout)
[10:14:48] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[10:15:57] *** Joins: deLta30 (quassel@EC5E1BB1.90C2C02F.110F01C1.IP)
[10:20:37] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[10:25:05] *** Quits: int3__ (int3_@moz-B7B5F043.singnet.com.sg) (Client exited)
[10:29:32] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[10:30:07] *** Quits: doomlord (doomlod@moz-B63745D8.range86-176.btcentralplus.com) (Ping timeout)
[10:31:52] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[10:32:15] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[10:32:48] <indutny> hi people
[10:32:54] <indutny> do enums have some default methods?
[10:32:59] <indutny> like .max() and .min() ?
[10:33:43] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[10:33:58] <indutny> seems like no
[10:35:21] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:35:32] <dbaupp> indutny: no
[10:42:51] <Boreeas> Is there a way to get a char from a number, similar to python's chr()? char::from_digit seems to be for representation of the number
[10:45:30] <indutny> dbaupp: thanks
[10:45:45] <dbaupp> rusti: 45 as char
[10:45:47] -rusti- '-'
[10:45:53] <dbaupp> Boreeas: ^
[10:46:42] <dbaupp> rusti: 'a' as uint
[10:46:43] -rusti- 97
[10:47:11] *** Quits: deLta30 (quassel@EC5E1BB1.90C2C02F.110F01C1.IP) (Connection reset by peer)
[10:49:39] <aatch> dbaupp, it's vec::from_fn because that's what was already there...
[10:50:48] *** Joins: deLta30 (quassel@7D91DF70.E7126F6E.F7B44A7.IP)
[10:51:00] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[10:51:01] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[10:51:28] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[10:57:17] <mzabaluev> Why cannot rustc compile crates out of the current directory if they reference other modules?
[10:57:50] *** Quits: deLta30 (quassel@7D91DF70.E7126F6E.F7B44A7.IP) (Connection reset by peer)
[10:58:08] <mzabaluev> It's annoying to use it in out-of-tree automake builds
[11:00:33] <Boreeas> dbaupp: Great, thanks
[11:01:33] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (Ping timeout)
[11:02:38] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[11:03:03] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[11:04:23] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[11:05:27] <dbaupp> aatch: heh :)
[11:06:15] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[11:08:43] *** Quits: aruniiird (arun@53CED781.5BF4CDD7.73686190.IP) (Ping timeout)
[11:12:00] *** Joins: aruniiird (arun@53CED781.5BF4CDD7.73686190.IP)
[11:15:02] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[11:16:48] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[11:18:11] *** Joins: mib_10qict (Mibbit@D4CB6C0.117B2A33.9261C90B.IP)
[11:20:03] *** Quits: mib_10qict (Mibbit@D4CB6C0.117B2A33.9261C90B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:20:30] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[11:21:51] *** Quits: jviereck (Adium@moz-BA1D85DC.dclient.hispeed.ch) (Ping timeout)
[11:29:27] *** Joins: martndemus (martndemus@moz-FAE8D24A.sshunet.nl)
[11:31:13] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[11:31:54] *** Joins: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de)
[11:33:25] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[11:35:06] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[11:35:31] <indutny> hm...
[11:35:39] <indutny> I think I've a feature request
[11:35:51] <indutny> can we make traits imply some other traits to be implemented?
[11:36:04] <indutny> like `trait MyTrait < ToStr+Clone { ‚Ä¶ }`
[11:36:11] <indutny> or
[11:36:16] <indutny> trait MyTrait: ToStr+Clone {}
[11:36:32] <indutny> it'll remove a lot of copy-paste code from my project
[11:36:38] <indutny> ok, better send it to mailing list
[11:37:01] <dbaupp> I think that works now?
[11:38:04] <dbaupp> rusti: trait A {} trait B: A {} impl B for uint {} "ok"
[11:38:04] -rusti- "ok"
[11:38:11] <dbaupp> hm, maybe not
[11:39:47] <dbaupp> indutny: there are whole pile of issues about it https://github.com/mozilla/rust/search?q=trait+inheritance&type=Issues
[11:40:16] <indutny> oh
[11:40:17] <indutny> thanks
[11:40:42] <indutny> so rust support this syntax
[11:40:46] <indutny> but it doesn't really work yet
[11:41:00] <dbaupp> just like half the language :P
[11:41:05] <dbaupp> yep, seems so
[11:41:39] <indutny> rusti: trait A : ToStr{ fn s(&self); } impl B for uint { fn s(&self) { self.to_str() } }
[11:41:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GAdH
[11:42:02] <indutny> oops
[11:42:08] <indutny> rusti: trait A: ToStr { fn s(&self); } impl A for uint { fn s(&self) { self.to_str() } }
[11:42:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iITi
[11:42:18] <indutny> ah
[11:42:26] <indutny> rusti: trait A: ToStr { fn s(&self) -> ~str; } impl A for uint { fn s(&self) -> ~str { self.to_str() } }
[11:42:52] <indutny> rusti: trait A: ToStr { fn s(&self) -> ~str; } impl A for S { fn s(&self) -> ~str { self.to_str() } } struct S
[11:42:52] -rusti- foo.rs:6:4: 6:5 error: expected `{`, `(`, or `;` after struct name but found `}`
[11:42:52] -rusti- foo.rs:6     });
[11:42:52] -rusti-              ^
[11:43:08] <indutny> rusti: trait A: ToStr { fn s(&self) -> ~str; } impl A for S { fn s(&self) -> ~str { self.to_str() } } struct S; let p = S; p.to_str()
[11:43:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OQIZ
[11:43:40] <indutny> rusti: trait A: ToStr { fn s(&self) -> ~str; } impl A for S { fn s(&self) -> ~str { self.to_str() } } #[deriving(ToStr)]struct S; let p = S; p.to_str()
[11:43:42] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AhTg
[11:44:05] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Quit: Leaving)
[11:44:46] <dbaupp> indutny: https://github.com/mozilla/rust/issues/6727 :(
[11:45:25] <dbaupp> (rusti inserts the code into a block in main, so deriving doesn't work)
[11:45:34] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[11:46:34] *** Joins: jaen (jaen@moz-327D7F75.play-internet.pl)
[11:48:10] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[11:48:15] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[11:48:57] *** Quits: SimonSapin (simon@8ACF1000.5EFFC0B8.24454B25.IP) (Ping timeout)
[11:57:58] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:58:52] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[12:01:15] *** Joins: deLta30 (quassel@D76C5922.DD2595E6.110F01C1.IP)
[12:02:28] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[12:03:17] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[12:04:12] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[12:05:55] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[12:08:30] <z0w0> dbaupp: i thought that was fixed recently
[12:08:43] <dbaupp> z0w0: which?
[12:08:59] <z0w0> not sure, i was sure i saw a pull request that fixed it
[12:09:12] <z0w0> might have been imagining it lol
[12:09:17] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[12:09:17] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[12:10:33] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (Ping timeout)
[12:11:41] *** Quits: z0w0 (zack@moz-A5D3D7C0.lns3.woo.bigpond.net.au) (Ping timeout)
[12:11:47] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[12:12:47] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[12:12:54] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Computer has gone to sleep.)
[12:12:55] *** Quits: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[12:13:38] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[12:13:39] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[12:14:05] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[12:14:07] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[12:14:31] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[12:14:32] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[12:14:47] *** Quits: aruniiird (arun@53CED781.5BF4CDD7.73686190.IP) (Ping timeout)
[12:14:48] <MaikKlein> can I chain commands in Rust?
[12:14:50] <MaikKlein> like
[12:14:56] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[12:14:57] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[12:15:05] <MaikKlein> object.mult(2)..mult(2)..mult(2)..mult(2)..mult(2)..mult(2);
[12:15:14] <MaikKlein> oh not double point
[12:15:21] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[12:15:25] <MaikKlein> no*
[12:15:40] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[12:15:46] <MaikKlein> I would need to return something like a &self
[12:15:48] <MaikKlein> right?
[12:16:19] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[12:16:22] *** Joins: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr)
[12:17:46] *** Quits: deLta30 (quassel@D76C5922.DD2595E6.110F01C1.IP) (Client exited)
[12:19:49] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[12:20:18] <doener> MaikKlein: in the trait definition, you can use &Self as the return type
[12:24:26] *** Joins: thpickert (thpickert@moz-99F22CD3.dynamic.dsl.tng.de)
[12:25:22] <dbaupp> MaikKlein: you'll need to put a lifetime on the return type too
[12:25:30] <dbaupp> doener: are you dotdash on github?
[12:26:17] *** Quits: thpickert (thpickert@moz-99F22CD3.dynamic.dsl.tng.de) (Quit: thpickert)
[12:26:29] *** Joins: thpickert (thpickert@moz-99F22CD3.dynamic.dsl.tng.de)
[12:28:24] <doener> yup
[12:28:32] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[12:29:59] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[12:31:11] <MaikKlein> https://gist.github.com/MaikKlein/5652654 I am not sure how I declare the lifetime
[12:31:18] <MaikKlein> I know it is ' right?
[12:31:41] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Ping timeout)
[12:32:31] <dbaupp> doener: nice work with the keywords patch! it's amazing!
[12:32:47] <doener> MaikKlein: fn mult<'r>(&'r mut self) -> &'r mut Number
[12:32:49] *** Joins: jviereck (Adium@moz-BA1D85DC.dclient.hispeed.ch)
[12:32:51] <doener> dbaupp: thanks!
[12:33:02] <dbaupp> MaikKlein: yes. fn mult<'r>(&'r mut self) -> &'r mut Number { .. }
[12:33:19] <dbaupp> MaikKlein: (oh, right... doener said stuff)
[12:33:41] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:33:49] <dbaupp> doener: all my changes to libsyntax were/are making it slower and slower... and then you come and fix everything! :)
[12:33:56] <doener> heh :-)
[12:34:28] <dbaupp> strcat: https://github.com/mozilla/rust/pull/6742
[12:35:00] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[12:35:28] <dbaupp> doener: I've taken inspiration from you, and am currently working on making the macro names interned :)
[12:36:14] <thpickert> Is that the change that was posted to reddit, too?
[12:36:42] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[12:36:44] <thpickert> I thought it took balls to go so deep inside and make such fundamental changes.
[12:36:59] <dbaupp> thpickert: this one http://www.reddit.com/r/rust/comments/1f2ncu/use_an_enum_for_keywords_and_intern_them_to/
[12:36:59] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[12:37:00] <thpickert> Looks like it was well worth the journey to the center. :D
[12:37:23] <strcat> https://github.com/mozilla/rust/pull/6742 awesome.
[12:37:27] *** Quits: jaen (jaen@moz-327D7F75.play-internet.pl) (Quit: WeeChat 0.4.1)
[12:37:39] <thpickert> dbaupp: Ah right, I saw that and even looked at the diff.
[12:38:09] <dbaupp> strcat: that pull request makes it look trivial to add noalias to ~ also
[12:38:45] <dbaupp> strcat: (aatch was really excited to tell you about it before... but then you weren't online. :P )
[12:38:47] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[12:38:53] <cmr> So I saw pcwalton's freestanding commit but thought "surely such a small change doesn't actually enable freestanding rust"
[12:38:58] <cmr> guess I was wrong!
[12:50:06] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Quit: WeeChat 0.4.2-dev)
[12:50:07] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[12:51:51] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:51:51] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147fb3a50 to 14510d0f2: 02http://git.io/N3iJvQ
[12:51:51] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:51:54] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:51:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/S_GQSg
[12:51:54] <ghrust> 13rust/06auto 142c2346e 15James Miller: Mark &mut parameters as noalias
[12:51:54] <ghrust> 13rust/06auto 14f254d11 15bors: auto merge of #6742 : Aatch/rust/mut-noalias, r=thestinger...
[12:51:55] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:54:24] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[13:01:40] *** Joins: gour_ (chatzilla@moz-BCB32D33.adsl.net.t-com.hr)
[13:02:01] *** Quits: gour (chatzilla@moz-B805441.adsl.net.t-com.hr) (Ping timeout)
[13:02:07] *** gour_ is now known as gour
[13:05:50] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[13:07:35] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:07:59] <strcat> dbaupp: I ended up extending that align code a bit more
[13:08:04] <strcat> for the memcpys rustc generates itself
[13:08:15] <strcat> it turns out really well, we get much nicer asm now
[13:08:28] <strcat> doesn't make a huge difference in perf but... it looks nicer! ;p
[13:08:36] <cmr> do the llvm intrinsics use sse?
[13:08:38] *** Quits: wting (wting@moz-250C027.csres.utexas.edu) (Ping timeout)
[13:08:42] *** Joins: wting (wting@moz-250C027.csres.utexas.edu)
[13:08:44] *** Quits: cdidd (cdidd@moz-1CCC251B.broadband.corbina.ru) (Input/output error)
[13:09:01] <cmr> If it's available, of course
[13:09:07] <dbaupp> cmr: I think so
[13:09:23] <dbaupp> (profiling out put shows '__memcpy_sse3' or something like that)
[13:09:32] <dbaupp> strcat: :D
[13:09:54] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[13:10:09] <strcat> dbaupp: well that's just the kernel one
[13:10:17] <strcat> dbaupp: my stuff isn't actually landed yet ;p
[13:10:38] <strcat> dbaupp: malloc aligns to 16, and the kernel checks at runtime if it can use sse
[13:10:39] <dbaupp> strcat: isn't that the one that LLVM delegates to?
[13:10:47] <strcat> dbaupp: but LLVM also inlines generated code
[13:10:49] <strcat> for small ones
[13:11:02] <strcat> so this makes the inlined code better
[13:11:13] <strcat> it usually only tells it the align is 8 though so I don't think it will use SSE
[13:11:17] <strcat> but it does output better code
[13:11:24] <strcat> it was doing *ridiculous* byte-by-byte copies
[13:11:40] <strcat> at the very least it makes some code smaller
[13:11:46] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[13:12:32] <dbaupp> strcat: yeah, I've seen a few instances of movb, movb, movb ... 
[13:12:49] <dbaupp> good that that's dying :)
[13:13:34] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[13:13:52] *** Quits: martndemus (martndemus@moz-FAE8D24A.sshunet.nl) (Input/output error)
[13:15:34] *** Joins: catpig (catpig@moz-43225E55.dip0.t-ipconnect.de)
[13:16:22] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:18:23] <strcat> dbaupp: well another place it happens is vectors
[13:18:26] <strcat> we generate poor code
[13:18:29] <strcat> I haven't fixed that ;p
[13:18:34] <strcat> also I think we make bad copies for enums
[13:18:43] <strcat> anyway I'm going to fix it ;p
[13:18:53] <dbaupp> For copying a vector, or allocating one?
[13:19:03] <strcat> dbaupp: both
[13:19:09] <strcat> str/vec is just bad
[13:19:21] <strcat> lots of holes in str allowing invalid utf-8, lots of perf issues :(
[13:19:27] <dbaupp> (I know that rust used to generated individual moves for [1, .. 1000], but I though that was fixed?)
[13:19:45] <strcat> dbaupp: stack allocated vecs are allocated properly now
[13:19:58] <strcat> or rather, initialized
[13:20:10] <dbaupp> yeah, being able to cast int -> char with 'as' isn't great
[13:20:29] <strcat> dbaupp: there are holes in the API too
[13:20:35] <strcat> not just assuming char is a valid code point
[13:20:58] <strcat> the easiest way to fix it is making it much smaller by removing duplicate APIs
[13:21:04] <strcat> and then it will be much easier to audit
[13:22:22] <dbaupp> that won't be an enjoyable task
[13:22:36] <dbaupp> (other than the joy of kill thousands of lines of crufty code)
[13:29:59] <doener> dbaupp: [1, ..1000] should be fixed, but e.g. from_elem() still generates a mov loop
[13:30:21] <doener> unless the inlining fails, then it's worse
[13:30:39] <dbaupp> doener: [1, .. 1000] should generate a mov loop too, right?
[13:31:02] <doener> should be a call to memset with incoming
[13:31:10] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Ping timeout)
[13:31:59] <cmr> rusti: struct Foo(int, int, int, int); let x = [Foo(1, 2, 3, 4), ..1000]; x
[13:32:00] -rusti- line longer than 10000 characters, bailing out
[13:32:01] *** Quits: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de) (Ping timeout)
[13:32:04] <dbaupp> doener: it can't be... memset sets bytes
[13:32:06] <cmr> rusti: struct Foo(int, int, int, int); let x = [Foo(1, 2, 3, 4), ..100]; x
[13:32:08] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/DcAe
[13:33:33] <dbaupp> doener: (and I just tested, http://ix.io/5Nq)
[13:33:51] <dbaupp> (that's with -O )
[13:33:56] <strcat> dbaupp: what does it do without -O?
[13:34:07] <strcat> we should be making a loop before opt now
[13:34:43] <strcat> dbaupp: we could turn u8 vec init into memsets though
[13:34:52] <strcat> LLVM is likely smart enough to do it in most cases
[13:34:56] <strcat> but we might as well
[13:35:11] <dbaupp> strcat: http://ix.io/5Nr
[13:35:20] <doener> dbaupp: oh, right, didn't think about it being set to 1
[13:35:37] <strcat> dbaupp: I like intel syntax better ;p
[13:36:07] <dbaupp> strcat: LLVM is smart [0xffffu16, .. 1000] becomes
[13:36:12] <dbaupp> 	movl	$255, %esi
[13:36:12] <dbaupp> 	movl	$2000, %edx
[13:36:12] <dbaupp> 	callq	memset@PLT
[13:36:19] <strcat> dbaupp: yep it's usually smart
[13:36:28] <dbaupp> strcat: I'm just using rustc -S :P
[13:36:39] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[13:36:54] <strcat> well gcc has -masm=intel
[13:36:55] <strcat> we need it too
[13:36:58] <strcat> so my eyes don't bleed
[13:37:01] *** Joins: doomlord (doomlod@moz-B63745D8.range86-176.btcentralplus.com)
[13:37:03] <dbaupp> heh
[13:37:14] <dbaupp> I like information moving right :P
[13:37:14] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[13:37:28] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[13:37:48] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[13:37:55] <strcat> dbaupp: well, most C functions use (dst, src) so I'm used to that
[13:38:09] <strcat> and with &mut self that's usually what you do ;p
[13:38:10] <dbaupp> strcat: and =
[13:38:15] <strcat> yep
[13:38:25] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:38:35] <strcat> I mostly hate the %, $ nonsense and how it specifies sizes in all the ops
[13:38:57] <dbaupp> yeah, for some reason, I like asm going (src, dst), but everything else is (dst, src) for sure
[13:39:31] <dbaupp> strcat: isn't it just a flag to pass to LLVM?
[13:39:38] <strcat> dbaupp: maybe!
[13:39:43] <strcat> let me see if clang knows how
[13:39:45] <strcat> that would be the answer ;p
[13:40:03] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[13:40:28] <strcat> dbaupp: clang doesn't understand -masm=intel ;\
[13:40:30] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: Leaving)
[13:40:40] <strcat> or -fverbose-asm....
[13:40:52] <dbaupp> the man page for clang doesn't feature 'intel' at all either
[13:40:57] <strcat> -fverbose-asm is really awesome, it puts var names on the registers
[13:41:15] <dbaupp> yeah, it's my favourite flag to GCC
[13:41:22] <dbaupp> (other than -O3 ;P )
[13:41:27] <strcat> dbaupp: it can
[13:41:30] <strcat> dbaupp: http://gcc.gnu.org/wiki/Var_Tracking_Assignments
[13:41:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:41:45] <strcat> arch defaults to enabling var tracking for debug packages no
[13:41:46] <strcat> w
[13:41:52] <strcat> it's really awesome
[13:42:02] <strcat> you can optimize and still get usable debug symbols
[13:42:03] <strcat> :)
[13:42:28] <dbaupp> strcat: ‚Äìx86-asm-syntax=intel
[13:42:50] <strcat> dbaupp: oh
[13:42:59] <dbaupp> I guess it'd be nice if rust gave usable debug symbols before optimisation first ;P
[13:43:20] <dbaupp> strcat: possibly with -mllvm before it
[13:43:22] <dbaupp> http://stackoverflow.com/questions/10990018/how-to-generate-assembly-code-with-clang-in-intel-syntax
[13:43:39] <strcat> yay!
[13:44:46] *** Joins: charliesome (charliesom@moz-3097CE0F.cpe.vividwireless.net.au)
[13:44:47] <cmr> it'd be nice if debug-info worked at all!
[13:45:08] <charliesome> hey everyone, is there a way to disable split stacks in rust?
[13:45:29] <strcat> charliesome: no, but you can set a large initial stack size
[13:45:58] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:45:58] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/S_GQSg
[13:45:58] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:45:59] <strcat> in which case there's no overhead beyond what you'd get preventing stack overflow with -fstack-protector in C
[13:46:10] <charliesome> strcat: but there's no way to get rid of the checks at the start of every function even if there's a huge stack?
[13:46:11] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[13:46:16] <strcat> charliesome: no
[13:46:18] <charliesome> damn
[13:46:37] <cmr> why does rust do this crazy stack stuff?
[13:47:02] <dbaupp> cmr: to avoid stack overflows
[13:47:17] <strcat> cmr: scaling on 32-bit
[13:47:22] <strcat> I've talked to pcwalton about it a lot
[13:47:27] <strcat> it's likely it won't be used on 64-bit
[13:47:35] <strcat> and we can just use a guard page instead of checks afaik.
[13:47:54] <benh> Will it be disabled on runtimeless rust?
[13:47:56] <strcat> mprotect a page as PROT_NONE
[13:48:10] <strcat> benh: doubt it
[13:48:12] <dbaupp> strcat: "it won't be used", what's 'it'?
[13:48:18] <strcat> dbaupp: segmented stacks
[13:48:18] <benh> stack splitting
[13:48:30] <dbaupp> strcat: just allocate a huge one to start with?
[13:48:36] <strcat> dbaupp: yes
[13:48:41] <strcat> and I think a guard page can replace the checks
[13:49:04] <benh> I thought the idea was that it can be the guard page that triggers more allocation
[13:49:17] *** Joins: SimonSapin (simon@8ACF1000.5EFFC0B8.24454B25.IP)
[13:49:27] <strcat> benh: that wastes 4k though
[13:49:36] <strcat> maybe not a big deal
[13:49:37] <benh> It's only virtual memory though
[13:49:52] <strcat> benh: segmented stacks do nothing but reduce VM
[13:49:59] <strcat> they don't reduce RES
[13:50:17] <strcat> allocation on linux is lazy, doesn't matter if it's a stack or from mmap
[13:50:38] <strcat> writing to a page triggers a page fault and it hands you the memory
[13:50:50] <benh> Yeah, I thought that's why they're interesting in 32bit, where virtual memory is more limited
[13:51:03] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[13:51:06] <strcat> yeah
[13:51:25] <strcat> but we could just be using processes
[13:51:30] <strcat> with the exchange heap as MAP_SHARED memory
[13:51:47] <strcat> linux doesn't have "threads" and "processes"
[13:52:02] <benh> :I
[13:52:05] <benh> this sure is complicated
[13:52:10] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[13:52:14] <strcat> benh: well basically, linux has tasks
[13:52:18] <strcat> the scheduler manages them all the same
[13:52:24] <strcat> there's a clone syscall for spawning one
[13:52:25] <benh> It just has tasks with mostly shared memory and mostly distinct memory?
[13:52:32] <strcat> benh: neither
[13:52:39] <strcat> when you call clone, you can choose to pass CLONE_VM
[13:52:58] <strcat> if you set CLONE_VM, the tasks share address space
[13:53:02] <strcat> what you'd think of as a "thread"
[13:53:15] <strcat> if you don't pass CLONE_VM, it does copy-on-write
[13:53:22] <benh> That's what I meant, cool
[13:53:32] <strcat> benh: man clone explains a lot of it
[13:53:41] <benh> I'm sure there's other fiddly details about process-specific resources
[13:54:04] <strcat> benh: not entirely, after a fork you generally have to close all files
[13:54:06] <strcat> before exec
[13:54:26] <benh> Can't you tell it to do that automatically? Or is that only on a per-file basis?
[13:54:33] <strcat> benh: yes you can do it automatically
[13:54:38] <strcat> there's a way to close all but a range of files
[13:54:50] <strcat> benh: rusti (the bot) also uses namespaces
[13:54:54] <strcat> so that's part of clone too :)
[13:55:08] <benh> these for(i=STDERR_FILENO+1; i<huge_number;++i)close(i); loops always looked suspect to me :(
[13:55:12] <strcat> CLONE_NEWPID for example - the process sees a completely new pid namespace (as in /proc)
[13:55:14] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[13:55:23] <benh> huh
[13:55:25] <strcat> benh: well, linux has a lot of great stuff that's not in POSIX
[13:55:29] <strcat> benh: for example, signalfd
[13:55:32] <benh> Yeah, figures
[13:55:34] <strcat> you can treat signals as files and use epoll on them
[13:55:39] <benh> yeah
[13:55:45] <benh> synchronous signal handling sounds really cool :)
[13:55:55] *** Quits: gour (chatzilla@moz-BCB32D33.adsl.net.t-com.hr) (Ping timeout)
[13:56:02] <strcat> benh: well, still async but async like async I/O :)
[13:56:09] <strcat> instead of... horrific signals
[13:56:45] <strcat> benh: I started rewriting rusti as my own little C program
[13:56:50] <strcat> I'll stop using lxc eventually
[13:56:53] <strcat> so I learned this crap ;p
[13:57:01] <benh> I always get scared away from low-level programming because the thought of properly dealing with every single error condition for every single read() call is offputting to my delicate sensibilities
[13:57:12] <benh> but all the fancy system-level facilities are intriguing too so maybe I'll get to it eventually :D
[13:57:13] <doomlord> "<benh> Will it be disabled on runtimeless rust?" <<<< what is "runtimeless rust", would it help me with my attempt to port to the   iphone (where i think i run into issues porting the runtime..)
[13:57:22] <strcat> benh: if (syscall() < 0) { err(1, NULL) }
[13:57:24] <strcat> ;p
[13:57:26] <cmr> doomlord: no, it won't
[13:57:27] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[13:57:37] <dbaupp> doomlord: https://github.com/pcwalton/zero.rs
[13:57:44] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[13:57:47] <strcat> benh: http://ix.io/5LW that's what I have so far, pretty interesting imo :)
[13:57:54] <strcat>     int pid = syscall(__NR_clone,
[13:57:55] <strcat>                       SIGCHLD|CLONE_NEWIPC|CLONE_NEWNS|CLONE_NEWPID|CLONE_NEWUTS|CLONE_NEWNET,
[13:57:57] <strcat>                       NULL);
[13:58:17] <strcat> that grabs a new IPC namespace, filesystem namespace (can't see/use/modify mounts), pid namespace, hostname (uts) namespace and network one
[13:58:53] <benh> That's powerful :O
[13:59:11] <benh> What's hostname/network namespace?
[13:59:23] <strcat> benh: makes it not see any network devices, it has it's own set of them
[13:59:27] <strcat> but it starts with none
[13:59:28] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[13:59:29] <benh> right
[13:59:33] <strcat> you have to manually set up the loopback if you need it ;p
[13:59:35] <doomlord> that looks like a good idea, runtimeless rust, and the comments made (about separating the standard library into runtime-depednant and runtimeless)  make perfect sense. 
[13:59:50] <strcat> benh: seccomp whitelists a set of syscalls
[13:59:52] <benh> I'm completely unaware of how socket syscalls map to making network devices do things :(
[13:59:52] <strcat> benh: pretty cool.
[14:00:11] <strcat> benh: also if I *needed* root, I could drop capabilities instead of doing setuid
[14:00:40] <strcat> but then I'd need NEW_USER too to make it not able to mess with /proc/sys
[14:00:42] <benh> sounds a lot more space-age than the geordi c++ eval bot :)
[14:00:50] <strcat> CLONE_NEWUSER *
[14:00:54] <strcat> but CLONE_NEWUSER is... really need
[14:00:57] <strcat> really new*
[14:01:02] <strcat> and it doesn't work yet.
[14:01:02] *** Joins: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de)
[14:01:03] <strcat> ;p
[14:01:12] <strcat> so really, you can't yet run untrusted code as root in a container :(
[14:01:41] <strcat> benh: seccomp is pretty awesome
[14:01:54] <strcat> benh: even without all this other stuff, you could just whitelist read/write/exit_group and run sandboxed code
[14:01:58] <strcat> but rust needs a lot
[14:02:15] <strcat> glibc needs a lot just to dynamically link ;\
[14:02:34] <strcat> glibc + static linking -> it call the uname syscall to check the kernel version ;p
[14:02:42] <benh> heh
[14:02:51] <cmr> strcat: have you tried musl?
[14:02:54] <benh> can't you somehow dump and restore an already dynamically linked process image ;)
[14:02:55] <strcat> cmr: yep
[14:03:08] <strcat> benh: perhaps!
[14:03:24] *** Joins: gour (chatzilla@moz-A6323B65.adsl.net.t-com.hr)
[14:03:24] <strcat> benh: anyway easy enough to statically link :)
[14:03:32] <strcat> seccomp is pretty cool.
[14:03:38] <benh> sounds like it!!
[14:03:42] <strcat> whitelist for syscalls + syscall parameters
[14:03:52] <strcat> sadly it can only do int comparisons (<, >, <=, ==, etc.)
[14:04:02] <benh> Can you filter on parameters too?
[14:04:03] <strcat> so you can't whitelist a syscall for specific string params
[14:04:05] <strcat> benh: yes
[14:04:09] <strcat> benh: but only via int filters
[14:04:22] <strcat> so you could actually whitelist a pointer to a specific string
[14:04:28] <strcat> but you can't whitelist an actual string
[14:04:33] <benh> ah
[14:05:28] <strcat> benh: + cgroups are cool! :p
[14:05:42] <strcat> you add a task to a cgroup, and anything it forks is in the cgroup too
[14:05:55] <strcat> and you can do resource limitations (memory, cpu shares) for a whole cgroup
[14:06:14] <strcat> or kill the whole cgroup (that's how systemd reliably kills services)
[14:06:24] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[14:06:29] <benh> I already didn't get around to grokking process groups and session leaders and whatever and now you're making it more advanced, argh ;)
[14:06:51] *** Joins: gour_ (chatzilla@moz-2B886B4A.adsl.net.t-com.hr)
[14:06:55] <strcat> easy to use too. you just 'mkdir /sys/fs/cgroup/memory/some_name' and write 0 (current process) to memory/some_name/tasks
[14:07:06] <strcat> and it will respect the memory limit :)
[14:07:15] <benh> Can't be anomymous?
[14:07:19] <benh> anonymous*
[14:07:25] <strcat> benh: no, sadly it can't be afaik
[14:07:27] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:07:27] <strcat> benh: but... they are a tree
[14:07:36] <strcat> benh: so you can make /sys/fs/cgroup/memory/root_of_tree
[14:07:37] <benh> I guess a pid for a name is close enough
[14:07:44] <strcat> and then make root_of_tree/foo
[14:08:00] *** Quits: gour (chatzilla@moz-A6323B65.adsl.net.t-com.hr) (Ping timeout)
[14:08:03] *** gour_ is now known as gour
[14:08:12] <strcat> lxc and systemd make a {cpu,memory}/{lxc,systemd} one and put their actual groups under it
[14:08:14] <strcat> so it's not too messy
[14:09:11] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:09:35] <strcat> benh: anyway, linux has so much neat stuff like that with no equivalent on other OSes ;p
[14:09:48] <strcat> google made the modern seccomp2 for chrome
[14:09:57] <strcat> the original one was terrible
[14:10:17] *** Quits: dbaupp (Thunderbir@moz-AA5D250F.lns20.syd6.internode.on.net) (Ping timeout)
[14:13:18] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[14:13:40] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[14:15:06] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[14:15:06] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[14:16:44] <strcat> benh: it's kind of amusing how bad POSIX is...
[14:16:50] <strcat> like how you can't portably close a file
[14:17:17] <strcat> if close(p) fails, you have to do different things on different OSes ;p
[14:17:22] <strcat> linux -> it closed it for you
[14:17:27] <strcat> most others -> loop until it works
[14:17:31] <benh> ugh
[14:17:45] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[14:18:03] *** Quits: gour (chatzilla@moz-2B886B4A.adsl.net.t-com.hr) (Ping timeout)
[14:18:38] *** Joins: gour (chatzilla@moz-F900198B.adsl.net.t-com.hr)
[14:23:02] <EXetoC> rusti: let i = 1u8; let j: &u8 = match Some(1) { Some(x) => &1, None => &i };
[14:23:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/NZNh
[14:23:20] *** Joins: snearch (snearch@moz-9172598.pool.mediaways.net)
[14:23:43] <cmr> uit
[14:26:46] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[14:29:22] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[14:32:07] <EXetoC> rusti: let i = 1u8; let j: &u8; match Some(1) { Some(x) => &1, None => &i };
[14:32:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LEGc
[14:34:33] <EXetoC> that's not what I meant
[14:35:16] *** Joins: kud1ing (Mibbit@moz-D0EFC33D.pools.arcor-ip.net)
[14:37:38] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[14:37:59] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:38:29] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:38:45] <charliesome> how can I get an unsafe pointer to a string?
[14:39:07] *** Joins: steveklabnik (steve@moz-31F4139E.hfc.comcastbusiness.net)
[14:39:37] <benh> look at str::as_c_str
[14:39:39] <cmr> charliesome: there's str::as_c_str, but I'm not sure if that's what you want.
[14:39:55] <charliesome> cmr: is there a way to do it without calling any core lib/std lib functions?
[14:40:17] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:40:27] <benh> That's gonna be hard since most of the pointer manipulation happens in std::ptr :/
[14:40:44] <benh> like ptr::to_unsafe_ptr(&my_str[0])
[14:40:49] <charliesome> hm
[14:41:14] <charliesome> oh looks like ptr::to_unsafe_ptr is written in rust itself
[14:41:18] <charliesome> i'll just copy-paste it
[14:41:57] <benh> I guess you can declare the reinterpret_cast intrinsic directly
[14:42:48] *** Joins: berak (chatzilla@98B3EA.5F42470D.16E13E53.IP)
[14:42:54] <EXetoC> rusti: let i: uint = 1; let j: &uint = match true { true|false => &i }
[14:42:58] -rusti- foo.rs:6:4: 6:5 error: expected `;` but found `}`
[14:42:58] -rusti- foo.rs:6     });
[14:42:58] -rusti-              ^
[14:43:41] <kimundi> needs a ; at the end
[14:43:56] <EXetoC> rusti: let i: uint = 1; let j: &uint = match true { true|false => &i };
[14:44:01] -rusti- foo.rs:5:30: 5:31 warning: unused variable: `j` [-W unused-variable (default)]
[14:44:02] -rusti- foo.rs:5          let i: uint = 1; let j: &uint = match true { true|false => &i };
[14:44:02] -rusti-                                        ^
[14:44:02] -rusti- note: in expansion of fmt!
[14:44:02] -rusti- foo.rs:4:12: 6:7 note: expansion site
[14:44:10] <EXetoC> rusti: let i: uint = 1; let j: &uint = match true { true|false => &i }; j
[14:44:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/diWH
[14:45:04] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[14:45:05] <EXetoC> something like that works if I assign 'j' to something after it has been declared
[14:45:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:46:07] <EXetoC> rusti: let i: uint = 1; let j: &uint; = j = match true { true|false => &i }; j
[14:46:08] -rusti- foo.rs:5:40: 5:41 error: unexpected token: `=`
[14:46:08] -rusti- foo.rs:5          let i: uint = 1; let j: &uint; = j = match true { true|false => &i }; j
[14:46:08] -rusti-                                                  ^
[14:46:19] <EXetoC> rusti: let i: uint = 1; let j: &uint; j = match true { true|false => &i }; j
[14:46:20] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LIZP
[14:47:00] <EXetoC> rusti: let i: uint = 1; let j: &uint; match true { true|false => j = &i }; j
[14:47:01] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/Bcbc
[14:50:32] <EXetoC> bah, the j at the end shouldn't be there, but sometimes only one of the alternatives work. a borrowck bug maybe
[14:51:49] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[14:53:34] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[14:53:43] *** Joins: gareth0 (gareth0@moz-BDF86227.dynamic.dsl.as9105.com)
[14:56:51] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbl)
[15:05:30] *** Quits: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[15:07:44] <charliesome> yay: https://github.com/charliesome/rustboot
[15:09:00] *** Quits: kud1ing (Mibbit@moz-D0EFC33D.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:09:15] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:09:26] <strcat> charliesome: awesome
[15:09:27] <strcat> :)
[15:09:35] <charliesome> thanks for your help everyone!
[15:10:12] <charliesome> although for the rust half of it i was like this http://i.imgur.com/xVyoSl.jpg
[15:11:01] <steveklabnik> oh no charliesome 
[15:11:05] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:11:11] <steveklabnik> i'm waiting for it to load, but if that's what i think it is...
[15:11:20] <charliesome> it is that dog
[15:11:28] <steveklabnik> see, my friends have been writing this OS in D for the past few years....
[15:11:50] <steveklabnik> amazing
[15:11:52] <steveklabnik> that's awesome. you're awesome.
[15:12:12] <strcat> charliesome: for the range part, you can do 'for uint::range(0, 80*25) |i| { }' btw
[15:12:23] <strcat> oh
[15:12:26] <strcat> you don't have libstd :)
[15:12:29] <strcat> nvm 
[15:12:31] <charliesome> yeah :|
[15:12:37] <charliesome> steveklabnik: cheers :)
[15:12:52] <charliesome> steveklabnik: is this D operating system anywhere?
[15:12:54] <strcat> charliesome: well we should certainly split that :)
[15:13:27] <steveklabnik> charliesome: xomb.org
[15:13:31] <steveklabnik> it's an exokernel
[15:13:39] *** Joins: sankha93 (Instantbir@3AA64862.291909EC.8B6C1D65.IP)
[15:14:15] *** Joins: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr)
[15:14:40] <charliesome> oh wow that's very cool
[15:15:29] <gour> steveklabnik: that OS in D is in D1?
[15:16:14] <steveklabnik> ehhhhhh it was, but then I think got moved to D2?
[15:16:23] <steveklabnik> frankly, all that shenanigans is one of the reasons i'm intersted in Rust
[15:17:12] <strcat> steveklabnik: btw I think we could be having all of the examples in the docs syntax highlighted, we just have to mark them as rust or something
[15:17:37] <strcat> and nag graydon to update pandoc on the server ;p
[15:17:55] <strcat> it has rust support now
[15:18:01] <steveklabnik> awesome
[15:18:01] <steveklabnik> that sounds great
[15:18:07] * gour would be interested for rust if there would be prospect to use it to write desktop app using qt :-/
[15:18:26] <steveklabnik> gour: that shouldn't be terribly hard to build
[15:18:35] <steveklabnik> strcat: previously, i'd marked code samples with ```lang
[15:18:44] <steveklabnik> how would we do it in this case? with the ~~~s?
[15:18:58] <strcat> steveklabnik: sec
[15:19:25] <strcat> ~~~~ {.rust}
[15:19:27] <strcat> 1
[15:19:30] <strcat> ~~~~
[15:19:31] <strcat> maybe
[15:19:57] <strcat> and we probably need css
[15:20:00] <steveklabnik> yeah
[15:20:31] <strcat> steveklabnik: that works!
[15:20:41] *** Quits: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de) (Ping timeout)
[15:20:42] <strcat> default css works
[15:20:45] <steveklabnik> what about when there are two back to back
[15:20:46] <steveklabnik> do you need two ~~~ lines
[15:21:07] *** Quits: gareth0 (gareth0@moz-BDF86227.dynamic.dsl.as9105.com) (Quit: Leaving)
[15:21:10] <strcat> hm?
[15:21:35] <charliesome> steveklabnik: also, if you're a fan of operating systems written in non traditional languages, check out http://github.com/charliesome/jsos ;)
[15:21:55] <strcat> steveklabnik: http://i.imgur.com/od6VLZd.png
[15:22:07] <SiegeLord> That Xomb thing is almost certainly in D1, glancing at the source code
[15:22:22] <gour> steveklabnik: i mean using 'qt bindings for rust'. not calling C++ :-)
[15:22:25] *** Quits: SimonSapin (simon@8ACF1000.5EFFC0B8.24454B25.IP) (Ping timeout)
[15:22:55] <steveklabnik> gour: right, qt bindings should be easy, i'd think. maybe not. hm. i guess it is C++, not C
[15:22:59] <steveklabnik> charliesome: ha!
[15:23:15] <strcat> pyqt/pyside were a PITA to make afaik
[15:23:18] <gour> steveklabnik: yep, it's C++
[15:23:28] <steveklabnik> SiegeLord: yeah, given its age, that's true too. for a while we were using ldc, which I thought only supported 2
[15:23:36] <cmr> I thought there were C bindings to Qt
[15:23:39] <cmr> maybe not
[15:23:47] <gour> i'm not sure about it
[15:23:51] <cyndis> not only is it c++, it has MOC introspection
[15:23:51] <steveklabnik> strcat: nice. that looks reasonable at least. not great, but okay
[15:23:52] <SiegeLord> steveklabnik, It dropped D1 support only recently (earlier this year)
[15:24:02] <gour> wxython was using SWIG, now they're doing via SIP
[15:24:24] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[15:24:30] <strcat> steveklabnik: makes it stand out at least
[15:24:32] <steveklabnik> SiegeLord: roger.
[15:24:43] <steveklabnik> charliesome: i submitted it to HN, my apologies. :)
[15:25:04] <SiegeLord> Somehow there's a D binding to qt... I'm not 100% sure how that works
[15:25:26] <charliesome> steveklabnik: i'll brace myself for people asking how it's useful in the real world
[15:25:41] <steveklabnik> heh
[15:25:58] <gour> SiegeLord: it's dead project, btw
[15:26:10] <SiegeLord> Really? That's saddening
[15:26:23] <SiegeLord> I thought it was one of the more shining examples of projects under D
[15:26:37] <gour> SiegeLord: yep, i mean that the main guy behind it now works on either ldc or gdc
[15:27:00] <gour> SiegeLord: D has only gtkd which is ok, but for multi-platform project gtk sucks
[15:27:27] <strcat> gtk sucks in general
[15:27:36] <benh> :(
[15:27:36] <strcat> hardly any widgets and they keep so many useful APIs private ;\
[15:27:36] *** Joins: oal (oal@2602D8B5.799888E6.F7A44A1B.IP)
[15:27:50] <benh> but it's default theme and the hello world program look much cuter than qt's
[15:27:53] <benh> its*
[15:28:07] <strcat> benh: the default theme is hideous, unless you mean the default gnome theme (adwaita)
[15:28:14] <strcat> the default gtk theme is worse than win98 ;p
[15:28:29] <strcat> well I guess adwaita isn't even the default gnome theme
[15:28:42] <strcat> it's just *a* supported theme, it's one of the few that doesn't break with every gtk release :)
[15:29:43] <gour> well, the point is that rust seems to be cool as *language*, but not sure it will address gui development in general...even nimrod has gtk/iup bindings
[15:29:56] <gour> otoh, ada has both gtk/qt
[15:30:05] *** Quits: charliesome (charliesom@moz-3097CE0F.cpe.vividwireless.net.au) (Quit: Textual IRC Client: www.textualapp.com)
[15:30:09] <strcat> gour: there's no reason it can't have nice bindings to gtk
[15:30:20] *** Joins: int3_ (int3_@moz-B7B5F043.singnet.com.sg)
[15:30:27] <strcat> it can handle the gtk memory management + refcounting automatically too
[15:30:58] <strcat> just that no one has put in the huge effort to make nice bindings to that massive API
[15:31:25] <strcat> like what gtkmm/glibmm are for C++
[15:31:33] <SiegeLord> Looks like QtD claims that it uses something based on QtJambi... i.e. it generates the bindings automatically (perhaps through introspection?)
[15:31:33] <gour> well, we're interested for qt...just count the number if gtk devs working on win/mac...even linux team is not very big
[15:31:46] <strcat> gour: gtk is pretty dead
[15:31:50] <strcat> there are 1-2 full time devs
[15:31:55] <strcat> rust is a bigger project, by far
[15:32:05] <strcat> pretty sad
[15:32:21] <gour> i understand, 'm simply not the one working on the rust compiler, but just potential end-user :-(
[15:33:49] <cyndis> there's SMOKE which can be used to generate Qt bindings
[15:34:01] <cyndis> it's used by most if not all of the existing bindings
[15:34:37] <gour> there is also SIP written by pyqt guy
[15:35:20] <doomlord> i wonder how much C++ could be directly translated
[15:35:32] <strcat> cyndis: but are they actually meant for a language that can represent their memory management without just passing a handle to a gc?
[15:35:46] <strcat> gobject introspection really isn't
[15:36:07] <cyndis> i don't really know much about smoke
[15:38:09] *** Joins: MaikKlein (maik@moz-9F4B6917.openskytelcom.net)
[15:39:04] <sp3d> gobject introspection really isn't what?
[15:39:26] *** Joins: caitp_ (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[15:40:04] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:40:09] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (Ping timeout)
[15:40:09] *** Quits: chadz (uid979@moz-D8B63698.irccloud.com) (Ping timeout)
[15:40:09] *** Quits: geomyidae__ (uid214@moz-D8B63698.irccloud.com) (Ping timeout)
[15:40:18] *** Quits: wycats_ (uid79@moz-D8B63698.irccloud.com) (Ping timeout)
[15:40:21] <strcat> sp3d: see the previous line
[15:40:38] <sp3d> I was hoping for a little clarification ;)
[15:40:46] <strcat> gtkmm/glibmm are entirely made by hand mostly for that reason afaik
[15:40:51] <gour> funny, i mixed the author of http://sebastiansylvan.wordpress.com/2013/05/25/language-design-deal-breakers/ with Bryan O'Sullivan's :-)
[15:41:09] <strcat> sp3d: languages like python just hand the gobject values off to the gc
[15:41:13] <strcat> sp3d: they only keep 1 reference to them
[15:41:18] <strcat> but gtk uses reference counting
[15:41:26] <sp3d> mm
[15:41:28] <strcat> and in C++, gtkmm/glibmm use it properly
[15:41:33] <strcat> with smart pointers
[15:41:43] <strcat> rust should do the same, but afaik it requires a ton of manual work
[15:41:52] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:41:59] <strcat> gtkmm/glibmm are also one of the few sane ways to write new gtk widgets
[15:42:16] <benh> Wouldn't we just hide one reference somewhere
[15:42:30] <benh> a struct that drops it on death, that can live whereever the user wants?
[15:42:43] <strcat> huh we used to have a TBAA pass
[15:42:52] <strcat> benh: no
[15:43:13] <strcat> benh: gobject already has an allocation + refcount for the objects
[15:43:15] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[15:43:51] *** Quits: catpig (catpig@moz-43225E55.dip0.t-ipconnect.de) (Quit: Verlassend)
[15:44:28] <strcat> and it increments it and decrements it in various places
[15:44:50] <strcat> the only reason python/ruby bindings keep 1 refcount for the gc is because they have no way to represent the memory management
[15:44:53] <strcat> so they add a layer of indirection
[15:45:17] *** Quits: MaikKlein (maik@moz-9F4B6917.openskytelcom.net) (Ping timeout)
[15:45:29] <strcat> so yes, we'd have a struct with a dtor
[15:45:34] <strcat> but it would also have Clone
[15:45:42] <strcat> calling g_object_ref
[15:45:46] <strcat> and the dtor would call unref
[15:45:55] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[15:46:04] <strcat> but then you have to manually figure it all out because different APIs do memory management in different ways :(
[15:46:17] *** Quits: steveklabnik (steve@moz-31F4139E.hfc.comcastbusiness.net) (Ping timeout)
[15:46:35] <sp3d> that's the entire point of the ownedness notations on gobject introspection annotations though, no?
[15:46:44] <sp3d> transfer notations*
[15:47:35] <sp3d> gobject APIs generally treat things either analogously to & or analogously to... ~Ref<T>?, as I understand it
[15:47:38] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[15:48:02] <strcat> sp3d: they mark the APIs that take &, &mut or transfer ownership of g_malloc'ed things
[15:48:06] <strcat> the refcounting is tricker
[15:48:11] <strcat> trickier*
[15:50:11] <strcat> sp3d: in theory if some object needs another object, it should increment the ref itself
[15:50:20] <strcat> and you can just automatically generate everything
[15:50:25] <sp3d> yeah
[15:50:28] <strcat> but I don't think it's actually like that
[15:50:43] *** Quits: doomlord (doomlod@moz-B63745D8.range86-176.btcentralplus.com) (Connection reset by peer)
[15:50:51] <strcat> they have this weird system with a pseudo-refcount too
[15:50:59] <sp3d> floating references?
[15:51:08] <strcat> well the first reference doesn't really count
[15:51:42] <strcat> if you have 1 ref and you pass it to an API, the API will free it when it's done
[15:51:45] <strcat> sometimes
[15:52:36] <sp3d> you're making it sound more confusing than it is ;) (but it does definitely complicate things, true)
[15:53:00] <benh> strcat: Are you sure calling Clone shouldn't physically create a new widget?
[15:53:12] <strcat> benh: it definitely shouldn't
[15:53:21] <strcat> Clone on @/@mut/Rc/RcMut just does a shallow copy
[15:53:34] *** Joins: victorporof (victorporo@DE2B5DEF.67CDC207.79933D60.IP)
[15:54:08] <strcat> sp3d: gtkmm apparently disables floating references
[15:54:28] <strcat> so maybe a rust binding can do that too, not sure how you do it
[15:54:41] <benh> Can't you ""disable"" it by just sinking them immediately?
[15:54:50] <sp3d> you can just wrap the creation of--
[15:54:50] <sp3d> I believe so
[15:56:41] <sp3d> clearly someone needs to write a rust GTK binding using GIR and see how well the memory-management systems mesh in practice ;)
[15:57:24] <strcat> benh: yeah but looking at gtkmm's code, it's really weird
[15:57:34] <strcat> they have a smart pointer *and* the objects do refcounting on their own
[15:57:43] <gour> why wasting time with gtk bindings?
[15:57:58] <benh> let's not get political here
[15:58:18] <strcat> anyway we have #[non_owned] now so we can make safe bindings to libs with mutable refcounted objects
[15:58:25] <strcat> so there's that.
[15:58:54] <strcat> sp3d: one of the tricky things is freezing
[15:59:23] <strcat> I assume there are going to be a lot of APIs where we want to use transmutes to &'r and &'r mut
[15:59:45] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[15:59:45] <strcat> so if the object is mutable and has shared ownership, it has to do the whole dynamic freezing dance
[15:59:49] <sp3d> mm
[15:59:56] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:00:12] <cyndis> i don't think qt objects do externally visible reference counting
[16:00:31] <strcat> cyndis: well it might not be externally visible in C++ because of dtors ;p
[16:01:16] <strcat> but bindings would have to wrap it through C, and you'd lose the automatic dtors
[16:01:28] <cyndis> that's true, but i wonder..hmm..
[16:02:20] <cyndis> i guess i don't really understand the problem
[16:02:20] <strcat> qt treats the ownership as an internal tree so...
[16:02:32] <cyndis> for widgets
[16:02:38] <strcat> cyndis: well rust generally has to know about the lifetimes of each widget for memory safety
[16:03:09] <strcat> so qt's internal memory management isn't good enough if rust doesn't know when an object's lifetime ends
[16:03:33] <cyndis> yeah, i guess that causes problems
[16:03:40] <strcat> the gtk stuff is external enough that you can encode it into rust's memory management
[16:03:57] <strcat> anyway I don't know exactly how qt does it
[16:04:34] <cyndis> widgets do have the ownership tree system, but i think everything else is just.. normal
[16:04:59] <gour> how is ada managing to get qt bindings?
[16:05:12] <gour> considering its type-safety
[16:05:59] <cyndis> though i guess other things can be qobjects too..bah
[16:06:29] <strcat> cyndis: if you can make an external reference in *addition* to the internal ones, there's no problem
[16:06:37] <strcat> I mean a tracked external one
[16:06:47] <cyndis> i don't think you can
[16:07:04] <strcat> anyway rust is generating beautiful code for &mut and swaps now ;p
[16:07:07] * strcat is happy
[16:07:18] <cyndis> but you also don't *have to* use the ownership tree
[16:07:24] <strcat> cyndis: ah
[16:07:58] <cyndis> well, i'm not sure, actually.
[16:08:00] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[16:08:08] <strcat> we generate perfect IR for this
[16:08:13] <cyndis> i wonder if widgets will settle peacefully without a parent
[16:08:17] <strcat> #[inline(never)]
[16:08:20] <strcat> fn set<T>(x: &mut T, y: &mut T) {
[16:08:22] <strcat>     util::swap(x, y);
[16:08:24] <strcat> }
[16:08:26] <strcat> better than clang can do :)
[16:08:27] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[16:08:35] <strcat> http://ix.io/5Nv
[16:09:41] <cyndis> :)
[16:10:21] <strcat> well, with my swap_fast branch at least ;p
[16:10:24] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[16:10:27] <benh> :D
[16:10:41] <strcat> we used to used memmove, we did an equality check on the pointers, there was no noalias, and we used align 1
[16:10:50] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[16:10:51] <strcat> used to use*
[16:11:14] *** Joins: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de)
[16:12:30] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[16:12:35] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[16:12:41] <strcat> oh
[16:12:55] <strcat> we can also mark borrowed pointer params without a lifetime as nocapture I think
[16:13:02] <strcat> LLVM can often figure it out (it did here)
[16:17:21] *** Quits: caitp_ (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp_)
[16:19:34] *** Joins: mohawk (Mibbit@moz-A930D36.columbus.res.rr.com)
[16:19:34] *** Parts: berak (chatzilla@98B3EA.5F42470D.16E13E53.IP) ()
[16:19:35] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[16:19:49] *** Quits: mohawk (Mibbit@moz-A930D36.columbus.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:20:47] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[16:22:46] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[16:23:04] <strcat> https://github.com/mozilla/rust/issues/6750 if someone has a lot of time on their hands :)
[16:29:24] *** Quits: gour (chatzilla@moz-F900198B.adsl.net.t-com.hr) (Quit: ChatZilla 0.9.90 [Iceweasel 20.0/20130402193240])
[16:30:05] <benh> https://github.com/mozilla/rust/pull/6700 Could someone re-review this? Merge failed after a commit that removed ~ before lots of string literals, I force-pushed my branch.
[16:32:18] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[16:34:06] <Yurume> wow, it is incredibly hard to call the win32 API correctly
[16:34:09] <Yurume> in Rust, of course
[16:35:48] <Diablo-D3> https://github.com/charliesome/rustboot
[16:35:54] <Diablo-D3> :D
[16:36:53] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:36:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qrlQ8g
[16:36:53] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:36:54] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:36:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OWDQhw
[16:36:54] <ghrust> 13rust/06auto 14d89a6ce 15Benjamin Herr: rustdoc: properly nest markup within enum variant lists (fixes #6605)...
[16:36:54] <ghrust> 13rust/06auto 141f8c4b0 15bors: auto merge of #6700 : ben0x539/rust/nestvariantdocs, r=thestinger...
[16:36:54] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:37:15] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:39:10] <benh> Thanks :)
[16:39:13] <strcat> np
[16:40:01] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[16:41:43] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[16:41:46] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[16:43:26] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[16:44:15] <strcat> Yurume: is it more than just using stdcall?
[16:44:51] <strcat> on that note I should teach rust to do linux syscalls so I can have containers in rust
[16:45:53] <benh> Teaching rust to do syscalls directly means avoiding C call overhead?
[16:46:03] *** Joins: steveklabnik (steve@moz-925E56DC.public.wayport.net)
[16:46:25] <strcat> benh: well it means being able to call APIs that aren't exposed in glibc
[16:46:49] <strcat> there isn't much C call overhead left, it just means allocating at least 2MiB
[16:46:54] <strcat> but syscalls don't use stack :)
[16:47:33] * strcat goes to find __syscall
[16:47:51] <strcat> err
[16:49:01] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:50:12] *** Joins: Blub\w (wry@moz-5C648A92.wireless.dyn.drei.com)
[16:51:44] <cmr> strcat: proper syscalls need to parse the elf auxv and look for the vdso
[16:52:04] <cmr> interrupts are ill-performant
[16:55:11] <benh> :O
[16:55:30] <strcat> cmr: hm, really?
[16:55:35] <cmr> strcat: yeah.
[16:55:36] <strcat> musl seems to use interrupts :(
[16:55:43] <cmr> http://lwn.net/Articles/446528/
[16:55:55] <cmr> it's a light wrapper around SYSENTER afaik
[16:56:22] <strcat> cmr: ah right I know about gettimeofday cheating
[16:56:27] <strcat> I didn't think about it before
[16:56:41] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[16:57:01] *** Joins: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[16:57:17] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[16:57:49] *** tiffnya is now known as tiffany
[16:58:41] <cmr> http://www.technovelty.org/linux/a-little-tour-of-linux-gateso.html, http://blogs.igalia.com/aperez/2009/01/13/the-story-of-linux-gatevdsoso/
[17:00:31] <cmr> https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/x86/vdso/vdso32/syscall.S?id=refs/tags/v3.10-rc2#n16
[17:05:16] *** Quits: steveklabnik (steve@moz-925E56DC.public.wayport.net) (Ping timeout)
[17:06:51] *** Quits: thpickert (thpickert@moz-99F22CD3.dynamic.dsl.tng.de) (Quit: thpickert)
[17:09:11] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[17:10:56] <steven_is_false> So, today I released my simple project https://gitorious.org/p-x/binary . It's not gone very far yet but it has a lot of the basics in place to start working on.
[17:11:10] *** Joins: steveklabnik (steve@moz-925E56DC.public.wayport.net)
[17:12:03] <cmr> "This is free software computer art, and an attempt to explore the bounds of what is possible using free software tools, and technology in the new creative media of software"
[17:12:05] <cmr> So... what is it?
[17:12:15] <Tekk> cmr: a marketing pitch :)
[17:12:32] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[17:12:34] <steven_is_false> cmr: Mostly a game but I wanted to avoid the word because I felt that it had bad associations.
[17:12:53] <steveklabnik> i just joined again, but that sounds interesting. what are we talking about?
[17:13:03] <cmr> https://gitorious.org/p-x/binary
[17:13:20] <Tekk> steven_is_false: I'd just say game
[17:13:25] <Tekk> yours sounds very weasel-wordy
[17:14:00] <Tekk> actually more CEO-speak
[17:14:23] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[17:15:12] <steveklabnik> i think it sounds fine, except it needs more description of it in the concrete. it's a piece of art?
[17:15:28] <strcat> real-time audio-visual demo or something? ;p
[17:15:28] <steveklabnik> not going to download and run a random binary without a better description
[17:15:45] <steveklabnik> oh, strcat , did you want me to add those annotations to https://github.com/mozilla/rust/pull/6748 now?
[17:15:45] <steven_is_false> steveklabnik: That's the source for the binary.
[17:15:57] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:16:04] <strcat> steveklabnik: it doesn't really matter, we can add them to all of them in one commit
[17:16:08] <steveklabnik> strcat: cool.
[17:16:12] <steveklabnik> that's probably easier, then
[17:16:23] <steveklabnik> any chance of an r? any time soon?
[17:16:33] <strcat> steveklabnik: yeah sorry, I actually looked at it and forgot :)
[17:16:36] <steveklabnik> it's all good
[17:16:45] * strcat has the attention span of a dog
[17:16:50] <steveklabnik> hahah
[17:16:52] <steveklabnik> no worries
[17:17:31] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[17:17:46] <strcat> renaming libcore really stalled a lot of PRs
[17:17:54] <steveklabnik> i bet
[17:19:45] <steven_is_false> I think demo sort of captures what I want the project to be.
[17:19:48] <steveklabnik> do we have a nodoc tag of some kind for rustdoc?
[17:20:03] <strcat> steveklabnik: yeah, I forgot what it i
[17:20:05] <strcat> s
[17:20:07] <strcat> #[doc(hidden)] ?
[17:20:09] <strcat> something like that
[17:20:13] <strcat> to hide an item
[17:20:16] <pascal> yepp
[17:20:43] <steveklabnik> cool
[17:20:55] <strcat> hm I guess ty_box is @ and ty_uniq is ~
[17:20:59] <strcat> so this is pretty easy
[17:21:00] <steveklabnik> going to also write some docs for logging.rs
[17:21:07] <pascal> https://github.com/mozilla/rust/wiki/Doc-using-rustdoc#other-tidbits-and-limitations
[17:21:13] <steveklabnik> and it's exposing its rustrt module, which is totally an implemtnation detail
[17:21:15] <steveklabnik> pascal: thanks!
[17:21:25] <steveklabnik> the wiki has so many pages it's kind of hard to navigate at times
[17:21:27] <strcat> steveklabnik: we really need to document all the attributes :)
[17:21:27] <steveklabnik> i forget where things are :/
[17:21:30] <strcat> in the manual
[17:22:00] <steven_is_false> I think this is a lot better: P(œá = x) is a free software art demo, a demonstration of how far we can push free software tools, and technology towards making art.
[17:22:10] <steveklabnik> yes!
[17:22:16] *** Joins: doomlord (doomlod@moz-B63745D8.range86-176.btcentralplus.com)
[17:24:32] <strcat> heh it's trivial now
[17:24:33] <strcat> [noalias db51dbb] mark unique pointer parameters as noalias
[17:24:36] <strcat>  1 file changed, 3 insertions(+)
[17:24:38] <strcat> ;p
[17:25:08] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[17:26:59] <benh> further nails in the coffin of the idea that user types could be as first-class as built-in types~
[17:27:20] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[17:30:55] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:30:55] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/OWDQhw
[17:30:55] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:32:34] *** Joins: wilma (Mibbit@moz-82E8A66C.socal.res.rr.com)
[17:32:39] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Connection reset by peer)
[17:33:37] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[17:33:54] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:33:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/xz5ahg
[17:33:54] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:33:55] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:33:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gJhGiQ
[17:33:55] <ghrust> 13rust/06auto 149bb8077 15Steve Klabnik: Add documentation for libstd/bool.rs....
[17:33:56] <ghrust> 13rust/06auto 14f5d4ea8 15bors: auto merge of #6748 : steveklabnik/rust/bool_docs, r=thestinger...
[17:33:56] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:33:59] <SiegeLord> Couldn't you just have an attribute #[im_just_like_owned]
[17:34:08] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[17:34:09] <SiegeLord> And that'd get the same LLVM annotations?
[17:35:57] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[17:37:40] <strcat> SiegeLord: the compiler enforces invariants on ~ and & though
[17:38:11] <strcat> &mut is *guaranteed* to be the only handle for mutating the object, with a guarantee of no other ptrs for reading
[17:38:22] <strcat> and ~ is guaranteed to be a globally unique handle when passed to a fn
[17:38:38] *** Joins: chadz (uid979@moz-D8B63698.irccloud.com)
[17:39:04] <strcat> & and ~ are also always either immutable, or the ~ is a globally unique handle
[17:39:11] <strcat> *if* the object is Const
[17:39:53] *** Joins: jihyun (uid7128@moz-D8B63698.irccloud.com)
[17:40:28] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[17:40:43] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[17:40:59] *** Joins: geomyidae__ (uid214@moz-D8B63698.irccloud.com)
[17:41:58] *** Quits: wilma (Mibbit@moz-82E8A66C.socal.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:43:17] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[17:44:57] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[17:52:38] *** Quits: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de) (Ping timeout)
[18:11:52] *** Joins: axesdnd (axes@moz-37E367FF.cj.upcnet.ro)
[18:14:20] <axesdnd> hello ! I am unable to use core::io::ReaderUtil since the last update. Can anybody help ?
[18:15:06] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[18:17:06] <doener> axesdnd: core was renamed to std
[18:17:26] <axesdnd> thanks doener !
[18:17:40] <steveklabnik> axesdnd: and std was renamed to extra
[18:20:08] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[18:21:45] *** Joins: kud1ing (Mibbit@moz-D0EFC33D.pools.arcor-ip.net)
[18:24:16] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[18:26:28] <strcat> nmatsakis: https://github.com/mozilla/rust/pull/6754 r?
[18:28:14] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[18:29:30] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[18:29:57] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[18:30:14] *** Joins: blitter (blitter@moz-E761A52F.dyn.centurytel.net)
[18:30:14] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:33:02] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[18:33:27] *** Quits: steveklabnik (steve@moz-925E56DC.public.wayport.net) (Ping timeout)
[18:36:37] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[18:36:56] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:36:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/gJhGiQ
[18:36:56] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:37:33] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:37:38] *** Joins: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de)
[18:37:39] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: jaen)
[18:42:42] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[18:42:43] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[18:43:41] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[18:44:44] <Yurume> strcat, sorry for late reply, I had to do something like this: https://gist.github.com/lifthrasiir/4dd91fcdbb83fbccf6bf#file-angolmois-rs-L943-L992
[18:45:24] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:49:40] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[18:50:23] <mzabaluev> When is the Great Renaming core -> std expected to land in master?
[18:50:52] <strcat> it landed
[18:50:52] <Yurume> within a week
[18:50:56] <strcat> oh
[18:50:57] <Yurume> ah
[18:50:58] <strcat> master
[18:51:00] <strcat> well
[18:51:02] <strcat> master is silly
[18:51:12] <Yurume> scrap master ;)
[18:51:22] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[18:51:26] <strcat> there's no time frame on anything landing in master since it's just a legacy thing - it's just whenever someone feels like merging it
[18:51:27] <Jeaye> More like s/incoming/master/g
[18:51:27] <mzabaluev> strcat: does it make sense to follow master in my project?
[18:51:35] <strcat> mzabaluev: well it makes sense to follow incoming
[18:51:38] <Jeaye> mzabaluev: Follow incoming
[18:51:42] <mzabaluev> I see, incoming it is then
[18:51:53] <strcat> mzabaluev: *eventually* incoming will become master
[18:52:00] *** Joins: keret (Mibbit@57405509.B1E7DD16.75EC049A.IP)
[18:52:21] *** Quits: keret (Mibbit@57405509.B1E7DD16.75EC049A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:52:39] <Yurume> strcat, basically i) it is painful to convert to/from UTF-16 and ii) several big structs in Win32 API assumed to be filled by just zeroes
[18:52:43] <mzabaluev> strcat: I thought master is kind-of-stable compiler that can be tested by people not directly involved with Rust development
[18:53:33] <strcat> mzabaluev: master is just what was in incoming the last time someone felt like merging it
[18:53:38] <strcat> it's not more stable/tested
[18:53:44] <mzabaluev> If there is no system at all in how it is advanced, I'll just target incoming then
[18:54:03] <steven_is_false> Hi! How can I set the return value for my application?
[18:54:06] <Yurume> mzabaluev, in reality master and incoming is enough unstable to annoy people but also enough usable for targeting it
[18:54:10] <strcat> mzabaluev: having a separate incoming branch is essentially obsolete now that there are tests run on every pull before a merge
[18:54:20] <Yurume> steven_is_false, os::set_exit_status?
[18:54:25] <strcat> mzabaluev: before, tests were run at regular intervals on incoming and when it was green it was merged to master
[18:54:35] <steven_is_false> Yurume: Thank you!
[18:54:53] <Yurume> steven_is_false, keep in mind that it doesn't terminate the process immediately
[18:55:09] <Yurume> it just sets the internal exit code that will be returned when the scheduler finishes
[18:55:14] <steven_is_false> Yurume: I get that.
[18:56:35] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (Ping timeout)
[18:56:39] <Yurume> enough rants, going to sleep...
[18:58:28] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:58:31] <Tekk> anyone familiar with how zero.rs works?
[19:00:26] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:00:27] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:00:48] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[19:00:53] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:00:53] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:01:18] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:01:19] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:01:44] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:01:45] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:02:09] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:02:10] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:02:34] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:03:24] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[19:10:22] *** Joins: caitp_ (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[19:14:28] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[19:16:19] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[19:17:40] <txdv> we need rust core on rustboot
[19:19:32] <mzabaluev> Is it possible to disable non-host architecture support in the LLVM build?
[19:21:09] <strcat> mzabaluev: yes
[19:21:12] <strcat> sec
[19:21:27] <strcat> mzabaluev: pass --enable-targets=host in ./configure
[19:21:35] <strcat> not sure where that's called (I guess rust's ./configure)
[19:21:43] <mzabaluev> strcat: thanks!
[19:21:57] <strcat> cling has to be built that way which is why I know
[19:22:00] <strcat> at least, it did have to be :)
[19:22:20] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[19:22:36] *** Quits: axesdnd (axes@moz-37E367FF.cj.upcnet.ro) (Ping timeout)
[19:23:07] <mzabaluev> strcat: the top-level configure also documents --host-triples and --target-triples
[19:24:08] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[19:25:05] *** Quits: kud1ing (Mibbit@moz-D0EFC33D.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:28:16] *** Quits: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de) (Ping timeout)
[19:31:13] <mzabaluev> strcat: the top-level configure forces --enable-targets=x86,x86_64,arm,mips :-/
[19:31:13] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[19:31:21] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Quit: Leaving)
[19:31:22] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[19:33:36] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[19:33:39] <cmr> mzabaluev: those are the only archs rust supports right now 
[19:35:09] *** Joins: wycats_ (uid79@moz-D8B63698.irccloud.com)
[19:35:27] *** Quits: jviereck (Adium@moz-BA1D85DC.dclient.hispeed.ch) (Ping timeout)
[19:35:43] <cmr> rusti: let x = ~42; let y = &x; let z = &x; fmt!("%?, %?", *y, *z)
[19:35:46] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[19:35:49] -rusti- ~"~42, ~42"
[19:36:07] <cmr> strcat: so what does ~ being globally unique mean?
[19:36:08] *** Joins: hay_guise (Mibbit@moz-258BC5F7.eastlink.ca)
[19:36:20] <cmr> I'm pretty sure I just aliased right there.
[19:36:26] <cmr> not really sure though :\
[19:36:31] <strcat> cmr: not from LLVM's POV
[19:36:36] <strcat> while the & exists, you can't mutate it
[19:36:55] <cmr> oh
[19:37:05] <strcat> if LLVM hands you 'a' and 'b' and asks if they are aliasing, and neither is allowed to mutate memory, you can say NoAlias
[19:37:24] <cmr> rusti: let x = ~42; let y = &mut x; let z = &x; *x = 4; fmt!("%?, %?", *y, *z)
[19:37:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WLCV
[19:37:26] <strcat> it only counts as aliasing (from LLVM's POV) if one of them can be used to mutate it (while the other exists)
[19:37:33] <cmr> mmm
[19:37:40] <cmr> that makes sense
[19:37:47] <strcat> cmr: we have a lot of code breaking the mutability rules though, it will be a pain to fix it all
[19:38:04] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[19:38:11] <strcat> cmr: also for 'noalias' on a function parameter, LLVM only cares about the function scope
[19:38:58] <strcat> it means no other pointer mutates the value the noalias parameter points at, and the noalias parameter (or pointers created from it) aren't used to mutate memory another pointer in the function scope can see
[19:39:07] <strcat> anyway, gets complicated ;p
[19:39:23] <strcat> noalias for ~ and &mut on params is simple though
[19:39:28] <strcat> actual TBAA is hard
[19:39:44] <strcat> since you need to worry about scopes of things
[19:40:42] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[19:42:25] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[19:42:40] <engla> strcat: what about the runtime checking of @mut ?
[19:43:00] <strcat> engla: it stops you from making two &mut to the same box
[19:43:08] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[19:43:14] *** Joins: eatkinson (eatkinson@moz-49417AD2.dsl.dynamic.sonic.net)
[19:43:26] <engla> I mean, could you mark a &mut pointer borrowing from a @mut as noalias?
[19:43:38] <engla> if you interfere with runtime checking, you might end up in trouble
[19:44:04] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[19:44:07] <strcat> engla: the runtime checking works by setting a flag
[19:44:29] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[19:44:38] <strcat> each @mut keeps track of whether it has no borrows, N immutable borrows, or a mutable borrow
[19:45:06] <strcat> if you have a mutable borrow already, it will just fail!()
[19:45:13] <engla> ok so the check happens before the second &mut shows up
[19:45:15] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[19:45:27] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[19:45:28] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[19:45:30] <strcat> engla: it's fine if you have aliasing pointers marked as non-aliasing
[19:45:50] <strcat> you just can't use them
[19:46:02] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[19:46:13] <strcat> basically, if you have noalias on &mut
[19:46:13] <engla> ok
[19:46:13] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[19:46:19] <strcat> it reserves the right to batch updates together
[19:46:27] <strcat> and if it sees
[19:46:28] <strcat> *x = 5;
[19:46:31] <strcat> through an &mut
[19:46:33] <strcat> and then
[19:46:36] <strcat> a read from a &
[19:46:44] <strcat> it assumes the &mut did not modify the memory the & points at
[19:46:57] <Earnestly> ‚ô•
[19:46:58] <strcat> so it doesn't have to deref and fetch again
[19:46:58] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[19:47:04] <strcat> Earnestly: \o
[19:47:08] <Earnestly> o/
[19:47:57] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[19:48:24] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[19:53:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[19:54:26] *** Quits: heftig (heftig@moz-AE443C71.dip0.t-ipconnect.de) (Ping timeout)
[19:57:39] *** Joins: heftig (heftig@moz-847177C4.dip0.t-ipconnect.de)
[20:05:41] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[20:05:43] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:07:27] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[20:12:26] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[20:13:36] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[20:13:38] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:15:05] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[20:16:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[20:16:27] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[20:16:39] <hay_guise> is there a built in function to copy a vector by reference (borrowed pointer)? (presumably returning an owned pointer)
[20:17:21] <doener> rusti: let x: &[int] = &[1,2,3,4]; x.to_owned()
[20:17:22] -rusti- ~[1, 2, 3, 4]
[20:17:48] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[20:17:52] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[20:17:55] <hay_guise> cool, thanks
[20:18:13] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[20:18:44] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:19:19] *** Joins: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de)
[20:20:01] *** Quits: eatkinson (eatkinson@moz-49417AD2.dsl.dynamic.sonic.net) (Quit: eatkinson)
[20:20:18] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[20:20:22] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:20:53] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[20:21:28] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Connection reset by peer)
[20:25:40] *** Quits: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[20:25:44] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:30:00] *** Quits: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de) (Ping timeout)
[20:36:29] *** Quits: ILyoan (ILyoan@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[20:40:22] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:40:22] *** ChanServ sets mode: +o dherman
[20:40:23] *** Joins: ILyoan (ILyoan@B4104EBB.3CC170B1.1E14B209.IP)
[20:40:41] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Quit: Leaving.)
[20:42:10] *** Quits: sankha93 (Instantbir@3AA64862.291909EC.8B6C1D65.IP) (Ping timeout)
[20:43:20] *** Joins: sankha93 (Instantbir@3AA64862.291909EC.8B6C1D65.IP)
[20:46:01] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[20:47:04] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[20:48:05] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:48:42] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[20:48:48] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[20:49:43] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[20:49:48] <thomaslee> mzabaluev, ping?
[20:49:59] <mzabaluev> thomaslee: yes?
[20:50:07] <thomaslee> I'm taking a look at https://github.com/mozilla/rust/issues/6745
[20:50:30] *** Joins: petantik (oz@moz-20EC2160.net)
[20:50:44] <thomaslee> I'm having a hard time reproducing the exact error you're talking about here -- any possibility you could post a full reproduction as a gist or something?
[20:50:54] <thomaslee> plus commands used to build it etc.
[20:51:47] <thomaslee> (entirely possible I'm just doing something dumb, but I want to be sure I'm trying to fix the right thing :))
[20:51:56] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[20:52:14] <mzabaluev> rustc --lib def.rs
[20:52:34] <mzabaluev> rustc -L . use.rs
[20:52:50] <mzabaluev> thomaslee: these are the commands I use to build
[20:53:16] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[20:54:12] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Quit: Computer has gone to sleep.)
[20:54:48] <mzabaluev> I should have given some attribute love to def.rs to make it work without options
[20:55:28] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[20:55:41] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[20:55:57] *** Joins: catpig (catpig@moz-43225E55.dip0.t-ipconnect.de)
[20:56:55] <thomaslee> mzabaluev, ah, there we go -- looks like I was doing something dumb last night :) thanks, I'll see if I can figure this one out.
[21:01:05] *** Joins: alisdair (textual@moz-EA60A466.dedicated.allstream.net)
[21:01:32] *** Joins: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr)
[21:02:32] *** Quits: Blub\w (wry@moz-5C648A92.wireless.dyn.drei.com) (Quit: night)
[21:03:44] *** Quits: pyrac (pyrac@moz-D851FA22.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[21:11:12] *** Joins: cdidd (cdidd@C9988B9C.8AFAB4CD.62D8163C.IP)
[21:15:15] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[21:16:24] *** Quits: sankha93 (Instantbir@3AA64862.291909EC.8B6C1D65.IP) (Ping timeout)
[21:17:54] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[21:18:21] *** Joins: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de)
[21:19:39] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[21:27:17] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[21:35:41] *** Joins: jaen (jaen@moz-8581ECC8.play-internet.pl)
[21:36:40] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[21:36:45] *** Quits: victorporof (victorporo@DE2B5DEF.67CDC207.79933D60.IP) (Quit: victorporof)
[21:39:35] *** Quits: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de) (Ping timeout)
[21:41:13] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[21:42:20] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[21:42:45] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[21:43:29] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:44:26] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[21:48:05] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[21:48:43] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[21:49:43] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:50:22] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[21:50:28] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[21:50:55] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[21:53:59] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:54:00] *** Joins: SiegeLordEx (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:55:09] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[21:55:16] *** Quits: SiegeLordEx (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[21:55:27] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:55:58] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[21:56:18] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[21:57:42] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[22:01:45] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[22:03:22] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[22:06:31] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[22:14:11] *** Quits: catpig (catpig@moz-43225E55.dip0.t-ipconnect.de) (Quit: Verlassend)
[22:14:46] *** Quits: hay_guise (Mibbit@moz-258BC5F7.eastlink.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[22:16:12] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[22:17:16] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[22:19:31] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[22:21:20] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[22:21:47] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[22:28:17] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[22:28:54] *** Quits: caitp_ (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[22:29:53] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[22:32:06] *** Quits: bytbox (s@moz-96B204E2.wireless.umd.edu) (Ping timeout)
[22:33:29] *** Joins: kyle2000 (kyle2000@D3528B97.7E2E8376.3031298E.IP)
[22:37:00] <kyle2000> friends, i want to lazy-load some data into a ~[u8] and store it in a struct. so i was thinking of having an Option<~[u8]> field in the struct that'd be None at first but then Some(~[u8]) once the data has been loaded and cached. so this struct field would need to be mut. but while doing research i have read that mutable fields have been deprecated! so what is the recommended way to lazy-load and cache data within a struct?
[22:37:00] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[22:37:08] *** Joins: bytbox (s@moz-96B204E2.wireless.umd.edu)
[22:37:34] <aatch> kyle2000, the variable holding the struct must be mutable
[22:37:52] <txdv> is there a way to get the version of rust? rust -version?
[22:37:53] <kyle2000> aatch: okay. so then the mutability is inherited?
[22:38:13] <aatch> Also, it might be easier to just use an empty array to indicate no data
[22:38:15] <thiez> txdv: rustc -v
[22:38:27] <aatch> txdv, or rustc --version
[22:38:34] <txdv> thanks
[22:39:02] <aatch> thiez, have you seen the atomic stuff I pushed recently?
[22:39:06] <thiez> I suppose it would be nice for 'rust' to have a -v and/or --version too.
[22:39:14] <kyle2000> aatch: i was thinking about that initially but there may not always be data so i wanted to keep the cached status separate from the data itself.
[22:39:44] <thiez> aatch: I noticed it earlier today, and I intend to look at it in detail tomorrow when I'm sober :p
[22:40:19] <aatch> thiez, fair enough.
[22:40:28] <aatch> I thought you might be interested, that's all
[22:40:33] <thiez> I am
[22:41:11] <aatch> kyle2000, fair enough. anyway, mutability is determined by the mutability of the variable.
[22:41:17] <thiez> thanks for the heads-up :)
[22:43:39] <Jeaye> What's the equivalent of: `std::vector<T &> v;` // note mutability
[22:43:47] *** Joins: axesdnd (axes@moz-37E367FF.cj.upcnet.ro)
[22:43:48] <thiez> aatch: one thing I did notice, your atomic structs are not marked #[mutable]
[22:43:52] *** Quits: igl1 (igl@moz-56F77DC0.adsl.alicedsl.de) (Ping timeout)
[22:44:06] <thiez> or #[unsafe_mutable], or whatever the appropriate annotation is these days
[22:44:34] *** Joins: igl (igl@moz-54B68BCA.adsl.alicedsl.de)
[22:44:54] <thiez> might be relevant for the load method.
[22:45:14] <Jeaye> ~[&T] doesn't seem to cut it
[22:45:20] *** Quits: alisdair (textual@moz-EA60A466.dedicated.allstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[22:45:26] <Jeaye> ~[&mut T], rather
[22:45:37] <aatch> thiez, I don't think it's neccessary...
[22:47:01] <aatch> Jeaye, what are you trying to express?
[22:47:27] <Jeaye> A container of mutable references to type T
[22:47:45] <Jeaye> But wasn't looking to go as far as ~[@mut T]
[22:47:49] <aatch> And what's wrong with ~[&mut T]?
[22:47:59] <Jeaye> error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[22:48:04] <aatch> Other than that you might need a lifetime.
[22:48:08] <aatch> Ah.
[22:48:31] <aatch> Ok, well then you need to add some lifetimes around so it knows how long those references last
[22:49:04] <thiez> aatch: perhaps not, I suppose we'll find out soon enough :)
[22:49:24] <aatch> like struct Foo<'self,T> { a: ~[&'self mut T] }
[22:49:39] <thiez> did the calls to the atomic intrinsics really require an unsafe block? As I recall they worked without unsafe{} at some point
[22:49:51] <aatch> thiez, they did, but weren't supposed to.
[22:50:12] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[22:50:16] <aatch> at any rate, most of the calls I make are to the wrappers, which I marked unsafe anyway (because they are)
[22:50:19] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[22:50:36] <thiez> how are they unsafe though?
[22:51:15] <aatch> because they are generic, so you can pass in things that might break things.
[22:52:00] <aatch> Or did you mean the intrinsics?
[22:52:07] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[22:52:09] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[22:52:36] <thiez> I meant the intrinsics
[22:52:59] <thiez> I see your atomic_whatever functions might indeed be unsafe
[22:53:06] <aatch> Oh, that's just because all extern fns are supposed to be unsafe
[22:53:31] <aatch> part of the whole "unsafe means you know what you're doing" thing.
[22:54:01] <thiez> it kind of bothers me that many of the intrinsics are not really 'unsafe'
[22:55:04] <thiez> it's not like atomic stores and loads are less safe than normal stores and loads. The same applies to most of the math intrinsics
[22:55:39] <aatch> thiez, which is why there are wrappers over most of them.
[22:56:14] <thiez> fair enough, still, it would be nice if "rust-intrinsic" was considered safe unless declared to be unsafe
[23:05:07] <strcat> aatch: \o
[23:05:15] <aatch> strcat, o/
[23:06:41] *** Joins: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de)
[23:07:50] *** Joins: z0w0 (zack@moz-A5D3D7C0.lns3.woo.bigpond.net.au)
[23:13:06] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Quit: Leaving.)
[23:14:08] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[23:14:54] <Jeaye> rusti: @2
[23:14:55] -rusti- @2
[23:15:04] <Jeaye> rusti: @2 + 3
[23:15:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TRdf
[23:15:09] <Jeaye> rusti: @2 + @3
[23:15:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gDdH
[23:16:24] <Jeaye> rusti: let a: @i32 = @2; let b: @i32 = @2; a == b
[23:16:25] -rusti- true
[23:16:55] <Jeaye> rusti: let a: @i32 = @2; let b: @i32 = @3; a == b
[23:16:56] -rusti- false
[23:17:29] *** Joins: catpig (catpig@moz-43225E55.dip0.t-ipconnect.de)
[23:17:37] <Jeaye> rusti: let a: @i32 = @2; let b: @i32 = @3; i32::to_ptr(a) == i32::to_ptr(b
[23:17:38] -rusti- foo.rs:6:4: 6:5 error: incorrect close delimiter: `}`
[23:17:38] -rusti- foo.rs:6     });
[23:17:38] -rusti-              ^
[23:17:44] <Jeaye> rusti: let a: @i32 = @2; let b: @i32 = @3; i32::to_ptr(a) == i32::to_ptr(b)
[23:17:45] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aeId
[23:18:25] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[23:18:34] <Jeaye> vec has that to_ptr; where is it for ints?
[23:18:48] <Jeaye> rusti: let a: @i32 = @2; let b: @i32 = @3; i32::raw::to_ptr(a) == i32::raw::to_ptr(b)
[23:18:49] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/NRMc
[23:19:44] <strcat> rusti: unsafe { *(0 as *int) }
[23:19:45] -rusti- /usr/local/bin/rust.sh: line 21:    13 Segmentation fault      ./foo
[23:19:46] *** Quits: int3_ (int3_@moz-B7B5F043.singnet.com.sg) (Client exited)
[23:20:24] <aatch> Jeaye, there is no int-to-ptr because that is pretty much the most unsafe thing you can do
[23:21:08] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[23:21:59] <Jeaye> I want `std::shared_ptr<int32_t> a(new int32_t(42)); int32_t const * const b(a.get());`
[23:22:52] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[23:22:54] <aatch> rusti: let a = @2i; let b = @2i; std::managed::ptr_eq(a,b)
[23:22:55] -rusti- false
[23:22:55] <Jeaye> Not `int32_t *a(reinterpret_cast<int32_t*>(42));`
[23:23:06] <Jeaye> aatch: Perfect. Thanks!
[23:23:10] <aatch> rusti: let a = @2i; let b = a; std::managed::ptr_eq(a,b)
[23:23:12] -rusti- true
[23:23:13] <strcat> int to ptr is just a cast
[23:23:20] <strcat> rusti: 12 as *int
[23:23:22] -rusti- 12
[23:23:31] <strcat> dereferencing the ptr is the unsafe op
[23:23:42] <Jeaye> Just looking to compare addresses.
[23:24:03] <strcat> so you want ptr to int
[23:24:15] <Jeaye> I want std::managed::ptr_eq
[23:25:05] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Quit: Leaving)
[23:26:12] *** cscottnet is now known as cscottnet_away
[23:26:52] <benh> rusti: unsafe { let x = cast::transmute::<*int, ~int>(0 as *int); let y = ptr::to_unsafe_ptr(x); cast::forget(x); y }
[23:26:54] -rusti- 32
[23:27:22] *** cscottnet_away is now known as cscottnet
[23:28:19] <aatch> benh, congrats, you have created a convoluted way to determine the size of the box header :P
[23:29:24] <benh> Seems more reliable than hardcoding a type that looks like what I think the structure of a box looks like ;)
[23:29:30] <benh> in user code, anyway
[23:29:49] <strcat> why do you need to know the structure of it?
[23:30:16] <benh> So I can take an unsafe pointer to the contents of a ~-box and later get the ~-box back
[23:31:12] * strcat would really like to get rid of those headers... ;[
[23:31:40] <benh> See, if I do it like that my code will keep working once you do that :]
[23:32:05] <benh> but if I do something like &*(0 as *BoxRepr).data...
[23:32:54] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[23:33:26] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[23:33:58] <MaikKlein> out of curiosity, does this compile on your machine? https://gist.github.com/MaikKlein/5650864
[23:34:27] *** Quits: kyle2000 (kyle2000@D3528B97.7E2E8376.3031298E.IP) (Quit: Leaving)
[23:34:35] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[23:34:38] <benh> nope
[23:34:42] <benh> ICE
[23:36:47] <benh> I think add/+ is supposed to return a new value, not mutate the lhs.
[23:37:24] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:37:56] <aatch> currently `a op= b` is turned into `a = a op b`
[23:39:33] <MaikKlein> i fixed it by copying it instead of cloning
[23:39:53] <MaikKlein> btw what is the difference between cloning and copying?
[23:40:10] <cmr> MaikKlein: clone is deep, copy is shallow.
[23:40:12] <Luqman> hmm, were static methods defined by a trait only available through Trait::method and not Impl::method ?
[23:40:24] <aatch> Luqman, yes
[23:41:52] <MaikKlein> @cmr does deep mean it clones everything like objects in a vector too while copy doesn't?
[23:42:27] <aatch> cmr, actually clone isn't necessarily deep
[23:42:34] <aatch> That's why we have DeepClone
[23:42:43] <MaikKlein> ah found something http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/
[23:42:43] <cmr> Oh :s
[23:43:05] <cmr> Ah it's only deep for ~T
[23:43:12] <cmr> (by default, at least)
[23:43:24] <cmr> I haven't really used @-ptrs yet, except @Reader :(
[23:43:25] <strcat> clone is as deep as the ownership
[23:43:39] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[23:44:19] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[23:44:38] <Luqman> nmatsakis: ping
[23:46:08] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[23:46:13] *** Quits: MaikKlein (maik@moz-157AD805.dip0.t-ipconnect.de) (Ping timeout)
[23:50:02] *** Joins: int3_ (int3_@moz-B7B5F043.singnet.com.sg)
[23:50:13] *** cscottnet is now known as cscottnet_away
[23:50:18] *** Quits: int3_ (int3_@moz-B7B5F043.singnet.com.sg) (Connection reset by peer)
[23:50:32] *** Joins: int3_ (int3_@moz-B7B5F043.singnet.com.sg)
[23:51:53] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[23:52:25] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[23:53:04] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[23:53:37] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[23:55:54] *** Quits: int3_ (int3_@moz-B7B5F043.singnet.com.sg) (Ping timeout)
[23:56:33] *** Joins: SimonSapin (simon@8ACF1000.5EFFC0B8.24454B25.IP)
