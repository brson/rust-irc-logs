[00:00:50] *** Joins: jack_ (sid19593@moz-A42E5B7B.irccloud.com)
[00:00:52] *** Joins: larsberg_ (sid16141@moz-A42E5B7B.irccloud.com)
[00:01:17] <esummers> @acrichto: Yes only for new connections
[00:02:15] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[00:02:33] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Connection reset by peer)
[00:02:55] *** Joins: Jesse_ (jruderman@moz-62518563.mtv2.mozilla.com)
[00:03:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:03:20] *** Quits: larsberg (larsberg@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[00:03:20] *** larsberg_ is now known as larsberg
[00:04:02] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[00:05:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:05:48] <brson> mac3 and 4 are working again, and better than ever
[00:05:54] <brson> should have the old DNS timeout problem fixed
[00:06:12] <brson> they were configured bizarrely to use localhost as the primary DNS server
[00:06:21] <brson> and to hardcode the default static route
[00:06:23] <brson> all messed up
[00:06:25] <brson> better now
[00:06:44] <brson> i had to get professional help for it though. required 2 IT experts
[00:07:15] <acrichto> brson: \o/
[00:07:31] <esummers> brson: If you have OS X Server installed, it sets localhost by default
[00:07:43] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[00:07:46] <brson> ah, they are running server
[00:07:47] <esummers> brson: and sets up a caching DNS server
[00:07:57] <brson> but not correctly it would seem
[00:08:13] <brson> i wonder if mac5 and 6 are running server
[00:08:31] <brson> i bet for those i order desktop because it's like 200$ cheaper
[00:08:34] <esummers> brson: The caching DNS server gets forwarders from DHCP by default, they probably need to be manually set
[00:09:08] <esummers> brson: (or just don't use the DNS server)
[00:10:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:11:42] <nrc> acrichto: more linking issues, I think, this time with run-pass/syntax-extension-hexfloat.rs - can't find crate hexfloat
[00:11:51] <acrichto> nrc: is that stage1?
[00:12:17] <nrc> and the pre.so is in my obj dir, but not the proper lib
[00:12:20] <nrc> acrichto: nope, 2
[00:12:59] <acrichto> sounds fishy, but syntax extensions are generally pretty flaky in tests
[00:13:04] <nrc> as in, it exists in /home/nick/rust2/x86_64-unknown-linux-gnu/stage2/lib, but not /home/nick/rust2/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/lib
[00:16:13] <acrichto> sounds like some deps went awry
[00:16:18] <acrichto> for the full stage2 build didn't finish
[00:16:43] <nrc> I deleted everything and started again from configure
[00:16:55] <huon> I think I've noticed deps with hexfloat and fourcc with the run-pass/compile-fail tests before
[00:17:00] <huon> *deps issues
[00:17:32] <nrc> I don't think the build failed - this is well into the tests
[00:18:40] <huon> if the tests don't depend on the hexfloat and fourcc crates, those crates may not be built before running the tests
[00:21:09] <acrichto> nrc: try running 'make' and then running the tests
[00:22:03] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[00:22:03] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1473bff98 to 14af93684: 02http://git.io/N3iJvQ
[00:22:03] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[00:22:05] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[00:22:05] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/EEUlPA
[00:22:05] <ghrust> 13rust/06auto 14de8099e 15Lindsey Kuper: Typo fixes.
[00:22:05] <ghrust> 13rust/06auto 148f1055e 15bors: auto merge of #12958 : lkuper/rust/rustdoc-typos, r=alexcrichton
[00:22:05] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[00:22:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:24:55] *** Quits: jack (jack@moz-DF5A9AA3.members.linode.com) (Quit: leaving)
[00:25:30] *** jack_ is now known as jack
[00:26:53] *** Parts: krdln (Mibbit@moz-C271714F.dynamic.chello.pl) ()
[00:28:08] <nrc> yeah, that works, so, deps, I guess
[00:29:51] <nrc> acrichto: where should I be looking for tese deps?
[00:29:55] <nrc> *these
[00:30:10] <acrichto> nrc: mk/tests.mk
[00:32:22] *** Quits: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net) (Quit: Sharp)
[00:33:34] <nrc> hmm, what is run-pass-fulldeps for?
[00:33:49] <acrichto> tests that depend on libsyntax/librustc
[00:33:54] <acrichto> (in theory)
[00:35:30] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[00:35:41] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[00:43:19] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[00:44:14] <acrichto> brson: did the mac bots change at all?
[00:44:15] <acrichto> LLVM ERROR: Section too large, can't encode r_address (0x10000f3) into 24 bits of scattered relocation entry
[00:44:19] <acrichto> (in stage0)
[00:44:36] <aatch> I remember that error...
[00:44:40] <brson> acrichto: no
[00:44:49] <brson> we broke mac in the last 3 days?
[00:44:55] <acrichto> I will attempt to reproduce
[00:45:20] <acrichto> it's a stage0 failure, so it can't be *that* bad (hopefully)
[00:46:23] <aatch> https://github.com/mozilla/rust/issues/7221
[00:46:38] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[00:47:03] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[00:47:03] <ghrust> [13rust] 15bors 04force-pushed 06auto from 148f1055e to 14af93684: 02http://git.io/N3iJvQ
[00:47:03] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[00:47:06] <aatch> Apparently this has reared it's head ^^ acrichto, brson 
[00:47:13] <acrichto> hmm
[00:52:59] <aatch> acrichto, well, on my machine (linux-64) librustc.so is 39M, and that's optimised
[00:53:50] <acrichto> brson: the metadata may just be too much, perhaps we should take mac-32-nopt out of the rotation?
[00:54:26] <huon> maybe we could compress metadata for .so's (but not .rlib's)?
[00:55:04] <acrichto> that's what we already do
[00:55:12] <acrichto> sadly :(
[00:55:19] <acrichto> not sure what's over the limit
[00:55:26] <acrichto> metadata shouldn't differ much between nopt and opt
[00:56:44] <brson> that's why we stopped doing mac-32-nopt befor
[00:58:14] <acrichto> gonna try to bisect it
[00:58:39] * ChrisMorgan thought that 32-bit was no longer an option for Mac OS X?
[01:01:23] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[01:02:03] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[01:02:03] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14a81d7fb to 14af93684: 02http://git.io/N3iJvQ
[01:02:03] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[01:02:04] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[01:02:04] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/fI3ciA
[01:02:04] <ghrust> 13rust/06auto 14c18fea5 15Jonathan S: Relaxed the memory ordering on the implementation of UnsafeArc
[01:02:04] <ghrust> 13rust/06auto 1495c4d47 15bors: auto merge of #12962 : gereeter/rust/relaxed-arc, r=alexcrichton...
[01:02:05] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[01:02:08] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[01:02:16] <brson> acrichto: ok, I'm going to try to disable it
[01:08:04] <brson> there are no mac-32-nopt builders now
[01:10:08] <nrc> acrichto: please could you re-r+ https://github.com/mozilla/rust/pull/12983 ? I removed some whitespace
[01:10:24] <ChrisMorgan> Does anyone (literally anyone) actually use 32-bit Mac OS X?
[01:10:49] <mcpherrin> ChrisMorgan: I know somebody who does
[01:11:17] * ChrisMorgan honestly thought that Mac OS X was 64-bit only since the Intel transition; is that not true?
[01:11:24] <kmc> don't think so
[01:11:35] <kmc> somebody was asking me about Rust support for NetBSD/ppc today
[01:11:56] <mcpherrin> ChrisMorgan: There was a brief period where they shipped 32-bit-only intels
[01:12:09] <nrc> acrichto: also, r? https://github.com/mozilla/rust/pull/12984
[01:12:12] * ChrisMorgan clearly doesn't remember the time too well
[01:12:38] <acrichto> nrc: I don't think that's the right fix b/c nothing in TARGET_CRATES can depend on crates in HOST_CRATES
[01:12:45] <acrichto> hexfloat depends on syntax
[01:12:51] <nrc> oh, curses
[01:13:43] <mcpherrin> ChrisMorgan: At very least the 2006 mac minis are not 64 bit
[01:13:59] <mcpherrin> ie MacMini1,1,
[01:14:59] <Armavica> is it relevant to implement the equivalent of to_owned_vec() but returning a Vec<T>?
[01:15:32] <Armavica> I'd simply call it to_vec()
[01:17:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:18:12] <nrc> acrichto: any idea how to fix this?
[01:18:35] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[01:19:26] <acrichto> nrc: move the tests to run-pass-fulldeps
[01:19:47] <nrc> acrichto: ok, thanks!
[01:19:52] <acrichto> nrc: (maybe)
[01:20:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:24:00] <nrc> trying...
[01:24:10] <nrc> (God, I wish make check were faster)
[01:25:31] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[01:26:20] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[01:26:20] *** ChanServ sets mode: +qo brson brson
[01:34:04] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[01:36:19] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[01:41:10] <acrichto> brson: I'm fairly certain that https://github.com/mozilla/rust/pull/12735 broke the mac build
[01:41:17] <acrichto> not that it helps much 
[01:41:24] <acrichto> 11k changes :\
[01:41:41] <huon> acrichto: separate commits
[01:41:47] <huon> theoretically they compile individually
[01:41:54] <acrichto> bisect says one of 871e5708106c5ee3ad8d2bd6ec68fca60428b77e
[01:41:55] <acrichto> or e02aa722aace1112ba2a7927ef76abe79ba9dae6
[01:42:02] <acrichto> but neither of those looks suspicious
[01:42:28] <acrichto> one of those didn't build
[01:42:50] <brson> i'm not to keen to revert *that*
[01:42:51] <acrichto> something like the entire pretty printer becoming type generic is what I suspect
[01:43:20] <brson> *oo
[01:44:20] <acrichto> oh it's gotta be e02aa722aace1112ba2a7927ef76abe79ba9dae6
[01:44:26] <acrichto> I thought it was a small commit
[01:44:33] <acrichto> but github was hiding the changes to pprust.rs
[01:44:35] <acrichto> ugh
[01:45:54] <huon> about half of it is whitespace changes, fwiw
[01:46:53] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Client exited)
[01:47:37] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:48:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:48:55] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:49:03] *** Joins: gwty (gwtypc@9CBCEDA8.6ED6EC5D.137C914F.IP)
[01:49:14] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:49:26] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[01:50:16] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:50:34] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:50:49] *** Quits: sunfish (chatzilla@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[01:51:12] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:51:31] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:54:09] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:55:05] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:55:51] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:56:10] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:03:01] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[02:03:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:05:03] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[02:05:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:14:56] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:16:25] *** Quits: Jesse_ (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse_)
[02:27:01] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[02:27:02] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1495c4d47 to 14af93684: 02http://git.io/N3iJvQ
[02:27:02] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[02:31:47] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[02:33:10] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[02:33:55] <acrichto> brson: hm, I think the android builder is having some trouble
[02:34:36] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[02:37:49] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Ping timeout)
[02:37:58] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[02:38:10] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:38:12] *** Quits: GrecKo (GrecKo@moz-A7AA1BB6.fr) (Ping timeout)
[02:38:24] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Ping timeout)
[02:38:27] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[02:38:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:38:28] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:38:29] *** Joins: GrecKo (GrecKo@moz-A7AA1BB6.fr)
[02:38:31] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[02:38:33] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[02:38:38] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[02:38:45] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:38:46] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[02:38:58] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[02:51:02] *** Quits: gimpf (gimpf@moz-20705D24.adsl.highway.telekom.at) (Ping timeout)
[02:51:11] <nrc> acrichto: seems to work - r? https://github.com/mozilla/rust/pull/12987 please?
[02:51:19] *** Quits: gwty (gwtypc@9CBCEDA8.6ED6EC5D.137C914F.IP) (Ping timeout)
[02:51:47] <acrichto> 0 line change!
[02:52:20] <klutzy> https://gist.github.com/klutzy/9595004
[02:52:26] <klutzy> (*p) :(
[02:53:41] <nrc> would have been more with hg :-p
[02:54:35] <huon> klutzy: magical
[02:54:45] <nrc> and it would be easier to build on top too - I miss a patch queue - so simple, and yet so usable
[02:54:54] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[02:55:15] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:56:41] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[02:59:09] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[03:03:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:03:13] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[03:03:13] *** ChanServ sets mode: +o tjc
[03:05:28] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:12:07] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[03:12:07] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZNjgIA
[03:12:07] <ghrust> 13rust/06auto 14a198d54 15Ziad Hatahet: Documentation and formatting changes for option.rs.
[03:12:07] <ghrust> 13rust/06auto 1401c0494 15bors: auto merge of #12965 : hatahet/rust/option_doc, r=alexcrichton
[03:12:08] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[03:12:09] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[03:12:09] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14e578fd8 to 14af93684: 02http://git.io/N3iJvQ
[03:12:09] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[03:18:41] <acrichto> huon: how'd you get that coverage graph awhile back?
[03:19:14] <huon> acrichto: graph?
[03:19:25] <acrichto> I think it was kcov?
[03:19:35] <acrichto> you had line-by-line coverage
[03:19:38] <huon> oh, yeah, kcov
[03:19:46] <huon> just compile with debug info and run under kcov
[03:19:52] <acrichto> oh sweet
[03:19:54] <huon> it was ridiculously easy
[03:20:10] * huon was upset that he didn't have to fight through layers of man pages and tooling flags
[03:20:14] <acrichto> lol
[03:20:19] <acrichto> what a travesty
[03:22:15] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Ping timeout)
[03:22:15] *** Quits: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net) (Ping timeout)
[03:22:17] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[03:22:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:22:26] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[03:22:29] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[03:22:34] *** Joins: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net)
[03:22:35] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[03:22:40] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Ping timeout)
[03:22:40] *** Quits: GrecKo (GrecKo@moz-A7AA1BB6.fr) (Ping timeout)
[03:22:41] *** Joins: GrecKo (GrecKo@moz-A7AA1BB6.fr)
[03:22:41] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[03:22:44] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[03:22:58] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[03:23:01] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:23:19] <acrichto> huon: hm, I'm not sure that it's working with generics :(
[03:23:40] <huon> acrichto: is it a problem with our debug info?
[03:23:46] <acrichto> perhaps
[03:23:53] <acrichto> "I hit go"
[03:24:07] <klutzy> struct IUnknown; -> struct IUnknown(*());
[03:24:08] <huon> (I saw some weird things too: like the body of an if statement run more times than the condition.)
[03:24:09] <acrichto> I wanted this to tell me what I had left to test lol
[03:24:20] <klutzy> this solves (*p) issues but it can't be passed to c++ directly
[03:35:33] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:36:19] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:37:48] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[03:41:45] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[03:44:06] *** Quits: japaric1 (japaric@F7ED54E5.59294C36.95AFB88D.IP) (Ping timeout)
[03:44:59] *** Joins: japaric1 (japaric@59593737.CBA91732.95AFB88D.IP)
[03:45:26] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:45:59] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[03:46:10] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[03:46:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:54:30] <aatch> Hey, I'm looking at improving SIMD support in Rust, do I need to write an RFC for this?
[03:56:01] <huon> aatch: probably
[03:56:26] <huon> aatch: (have you seen http://blog.aventine.se/2013/07/16/my-vision-for-rust-simd.html ?)
[03:57:04] <huon> (just as a possible source of ideas/whatever)
[03:57:41] <aatch> huon, yeah, it's similar to some of what I've been doing so far.
[03:57:52] *** Quits: zz_kimundi (kimundi@moz-C61A47F0.dip0.t-ipconnect.de) (Ping timeout)
[03:58:13] <huon> awesome
[03:58:41] <nrc> that would be cool
[03:58:51] <nrc> RFC would be good
[03:59:45] <huon> I know jensnockert (obviously), carter and sanxiyn all have opinions and idea about that
[04:01:18] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:01:51] *** Joins: zz_kimundi (kimundi@moz-CAFCCD90.dip0.t-ipconnect.de)
[04:01:53] *** zz_kimundi is now known as kimundi
[04:02:01] <aatch> Well all I've done so far is add an explicit simd type in the compiler
[04:02:09] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[04:02:10] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1401c0494 to 14af93684: 02http://git.io/N3iJvQ
[04:02:10] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[04:02:10] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[04:02:10] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/0KvmCQ
[04:02:10] <ghrust> 13rust/06auto 14a07db20 15Alan Andrade: deny missing docs
[04:02:10] <ghrust> 13rust/06auto 142682ac4 15bors: auto merge of #12968 : alan-andrade/rust/docathon-getopts-deny-missingdocs, r=alexcrichton...
[04:02:10] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[04:02:15] <aatch> which is just (base_ty, len)
[04:02:43] <aatch> since I figured that it'd be the first step to any sort of real support, no matter what.
[04:02:53] <nrc> aatch: I foresee hours of fun bikeshedding the syntax for that
[04:03:44] <huon> hours?
[04:03:56] <sfackler> decades!
[04:04:02] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[04:04:03] <nrc> centuries!
[04:04:13] <huon> forevermore!
[04:04:14] <aatch> jens makes a good point that, really, we don't want to actually name the types since it makes things *more* complicated, instead of less.
[04:05:27] <aatch> I'm trying to think if there's any reason we couldn't have '<expr, expr, expr>' for vector expression syntax.
[04:05:27] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[04:05:54] <nrc> I kind of prefer to leave <> for generics
[04:05:59] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[04:06:08] <nrc> I would prefer a variation on the () tuple syntax somehow
[04:06:26] <nrc> since simd types, to me at least, seem intuitively more like tuples than type parameters
[04:06:36] <huon> simd![....]
[04:06:38] * nrc lets the bikeshedding begin!
[04:06:52] <huon> ( https://github.com/mozilla/rust/pull/12947 )
[04:07:06] <huon> (don't know what it would expand too, though :P )
[04:07:33] <aatch> That's kind of the problem.
[04:07:37] <nrc> I fear implementing simd as a macro might be hard work...
[04:07:44] <huon> well, actually
[04:07:50] <huon> asm!() expands to an ExprInlineAsm
[04:08:01] <huon> i.e. it's not really sugar for anything that can be written any other way
[04:08:06] <aatch> huon, I had the same idea at one point.
[04:08:07] <huon> so we could do simd the same
[04:08:29] <aatch> However, how do you express: `fn foo() -> <simd ty>`?
[04:08:30] <huon> nrc: run the whole computation at compile time; super-speed
[04:09:27] <aatch> since we can't expand macros in any position other than expressions or items.
[04:09:28] <nrc> :-)
[04:09:48] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[04:09:48] <huon> aatch: ah, yes
[04:09:55] <huon> we could fix that?
[04:09:55] <nrc> allow macros in other positions?
[04:10:04] <aatch> That's far beyond me though...
[04:10:07] <nrc> great minds...
[04:10:22] <huon> flock together?
[04:10:55] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[04:11:08] <nrc> exactly
[04:11:51] * nrc shakes fist at Github AGAIN
[04:12:26] <huon> aatch: (int, .. 4) to mirror the [..] syntax?
[04:12:36] <sfackler> it'd require parser/ast changes more than anything
[04:12:54] <huon> (although that might get in the way of the variadic generics that eddyb keeps going on about)
[04:13:21] * nrc likes that (at first blush)
[04:13:31] <huon> (re macros: https://github.com/mozilla/rust/issues/7727#issuecomment-21620454 )
[04:13:44] * huon should probably write that up as an RFC, now that we have the process
[04:14:15] <nrc> huon: they would always be in <>, no?
[04:15:17] <huon> nrc: eddyb has been saying we could have something like `fn foo((x, .. y): (A, .. B)) -> B { y }`
[04:16:11] <nrc> ah, right
[04:16:25] <huon> (I'm not expressing support or otherwise for VG, just keeping the options open.)
[04:16:45] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[04:17:16] <nrc> yeah, that might clash - I'm not sure I like that syntax though - seems to promote the false equivalence between tuples and multi-argument functions
[04:17:39] <nrc> bikesheds upon bikesheds
[04:18:02] <aatch> I'm actually still fond of the angle-bracket syntax, btw.
[04:18:10] <nrc> why so?
[04:18:42] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[04:18:49] <klutzy> huon: https://gist.github.com/klutzy/9595004#file-a-rs it becomes somewhat usable
[04:18:51] <aatch> it matches syntax for them in other places, notably LLVM
[04:19:27] <aatch> It also for similar syntax in both type and expression places
[04:19:34] <aatch> also allows*
[04:19:44] <huon> angles seem fine to me too, modulo general grammar concerns
[04:19:47] <nrc> aatch: anywhere other than LLVM - I feel that LLVM is too low level to be worth emulating, mostly
[04:20:00] <acrichto> klutzy: why not have "struct vtable { meth1: ..., meth2: ... }" ?
[04:20:05] <huon> (although I do like the simd![...] idea ;P )
[04:20:14] <aatch> huon, I don't *think* there are any grammar concerns.
[04:20:14] <nrc> aatch: can you give an example for the second point?
[04:20:37] <huon> aatch: yeah; I'd want to be sure of it :) (since it seems like something that might cause confusion
[04:20:44] <aatch> nrc, well for (T, .. n), the matching expression would be (a, b, c, d)
[04:20:54] <aatch> but that conflicts with tuples.
[04:21:17] <aatch> unless you have a macro for construction.
[04:21:32] <nrc> I see what you mean
[04:22:11] <aatch> whereas I'm pretty sure that `<a, b, c, d>` is unambiguous in an expression position.
[04:22:41] <aatch> as both '>' and '<' are infix operators.
[04:22:48] <aatch> so cannot *start* an expression.
[04:23:30] <nrc> I see simd types as tuples which are more likely to get a fast path, so I am happy if the syntax is similar
[04:23:45] <klutzy> acrichto: it sounds good; I was just trying to use one method rather than to create full binding :p
[04:24:24] <nrc> like, we could allow (T, ..n) as shorthand for an n-ary tuple of type T, but then I guess the distinction from arrays gets less meaningful
[04:25:08] <nrc> thinking about it, I think I like simd![T] more and more
[04:25:20] <nrc> er simd![T, ..n]
[04:25:42] <aatch> nrc, implement the macro-level support and I'll be fine with it.
[04:25:44] <nrc> just need to allow macros in type position, and we're good :-)
[04:26:17] <aatch> simd vectors are closer to fixed-length vectors than anything else, as well.
[04:26:48] <huon> last time this came up there was the proposal to just use fixed-length vectors as simd types
[04:26:52] <huon> but that seems like a bad idea
[04:27:29] <nrc> aatch: yeah, that's why I like simd![T, ..n]
[04:28:51] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[04:30:43] <nrc> git question: I want to update my last commit, is there a quicker way than creating a temporary commit and using rebase -i to squash it into the existing one?
[04:31:24] <klutzy> git commit --amend
[04:32:08] <nrc> thanks klutzy!
[04:35:01] <ChrisMorgan> nrc: git copied hg :P
[04:35:09] * ChrisMorgan admits git had commit --amend before hg
[04:36:50] <huon> ChrisMorgan: so by "git copied hg" you mean precisely the opposite?
[04:39:51] <nrc> ChrisMorgan: but usually using hg it is rare to use commit, for me at least - I always used a patch queue, so I'm used to `hg qref, so easy
[04:40:03] <nrc> *'hg qref', so easy
[04:40:36] <ChrisMorgan> nrc: yeah, I suppose so (I haven't used mq much, though were I working on Mozilla stuff in hg I would doubtless be)
[04:40:36] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:40:51] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[04:42:40] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:49:41] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:52:13] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[04:52:14] <ghrust> [13rust] 15bors 04force-pushed 06auto from 142682ac4 to 14af93684: 02http://git.io/N3iJvQ
[04:52:14] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[04:52:48] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:54:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:56:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:00:24] *** Joins: japaric2 (japaric@B07B45DD.24D108FE.95AFB88D.IP)
[05:00:42] *** Quits: japaric1 (japaric@59593737.CBA91732.95AFB88D.IP) (Ping timeout)
[05:03:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:03:10] <sfackler> acrichto: brson: the android bot seems hosed: http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t/builds/1703/steps/shell_2/logs/stdio
[05:03:18] <acrichto> yeah, trying to fix it
[05:03:44] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:03:52] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:03:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:04:07] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:04:43] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:04:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:04:57] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[05:04:58] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ce3e7a3 to 14af93684: 02http://git.io/N3iJvQ
[05:04:58] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[05:04:59] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[05:04:59] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/z_WwYg
[05:04:59] <ghrust> 13rust/06auto 145e64e3f 15Eunchong Yu: Add impl IntoStr for ::std::vec_ng::Vec<Ascii>
[05:04:59] <ghrust> 13rust/06auto 1457fa0ca 15bors: auto merge of #12972 : Kroisse/rust/vec_ng_into_str, r=alexcrichton
[05:04:59] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[05:05:07] <Kroisse> wow
[05:05:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:11:52] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[05:12:13] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:13:55] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[05:15:30] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:17:09] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[05:17:09] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ze-5Kg
[05:17:09] <ghrust> 13rust/06auto 14de8099e 15Lindsey Kuper: Typo fixes.
[05:17:09] <ghrust> 13rust/06auto 14ec08a4a 15bors: auto merge of #12958 : lkuper/rust/rustdoc-typos, r=alexcrichton
[05:17:09] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[05:17:11] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[05:17:11] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1457fa0ca to 14af93684: 02http://git.io/N3iJvQ
[05:17:11] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[05:18:11] <huon> Kroisse: (that failure isn't your fault)
[05:23:11] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[05:28:00] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:31:17] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[05:31:17] *** ChanServ sets mode: +o tjc
[05:33:16] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:33:59] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[05:33:59] *** ChanServ sets mode: +o tjc
[05:34:11] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:34:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:53:33] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[05:53:33] *** ChanServ sets mode: +o tjc
[05:54:49] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[05:56:41] *** Joins: edwardw (edwardw@96E7298D.3E260003.B9C6B12A.IP)
[06:04:50] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[06:06:52] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[06:06:59] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[06:08:22] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:19:13] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:22:56] *** Joins: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net)
[06:26:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:27:13] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[06:27:13] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ec08a4a to 14af93684: 02http://git.io/N3iJvQ
[06:27:13] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[06:27:14] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[06:27:14] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/nuw0xw
[06:27:14] <ghrust> 13rust/06auto 14749e527 15Brian Anderson: std: Improve docs for atomics. Fix two bugs...
[06:27:14] <ghrust> 13rust/06auto 14348c2fa 15bors: auto merge of #12954 : brson/rust/atomicdocs, r=alexcrichton...
[06:27:14] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[06:28:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:30:56] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[06:32:51] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:33:49] <lkuper> acrichto: bors is being awfully stubborn, eh?
[06:35:26] <acrichto> lkuper: yeah :\, I don't think he liked the move in MTV
[06:36:34] <eddyb> much mountain. such view
[06:36:59] <eddyb> snap3-linux is still down :(
[06:39:42] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140316030202])
[06:44:41] *** Quits: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net) (Quit: Computer has gone to sleep.)
[06:47:37] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:51:56] *** Quits: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP) (Ping timeout)
[06:55:27] *** Joins: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP)
[07:03:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:05:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:09:06] *** Joins: gwty (gwtypc@8473EFD5.3FFECA9D.5785B5AF.IP)
[07:11:18] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[07:11:39] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:12:14] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[07:12:14] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/K3o_eQ
[07:12:14] <ghrust> 13rust/06auto 14ecb34d8 15Steven Fackler: Docify std::vec_ng...
[07:12:14] <ghrust> 13rust/06auto 145d8fb4d 15bors: auto merge of #12955 : sfackler/rust/vec_ng-doc, r=alexcrichton...
[07:12:15] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[07:13:27] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[07:27:19] *** Joins: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu)
[07:29:32] *** Joins: MaXYZW (MaXYZW@30ACD1D1.B8E2E5C.E9D0DC51.IP)
[07:31:47] *** Quits: MaXYZW (MaXYZW@30ACD1D1.B8E2E5C.E9D0DC51.IP) (Quit: Computer has gone to sleep.)
[07:33:49] *** Quits: edwardw (edwardw@96E7298D.3E260003.B9C6B12A.IP) (Quit: Leaving...)
[07:38:24] *** Quits: gwty (gwtypc@8473EFD5.3FFECA9D.5785B5AF.IP) (Ping timeout)
[07:41:06] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[07:47:29] <klutzy> acrichto: struct vtable version https://gist.github.com/klutzy/9595004#file-a-rs
[07:48:56] <eddyb> looks cool
[07:49:12] <eddyb> I'd like this to be possible with a trait
[07:50:30] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[07:52:11] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[07:52:11] <ghrust> [13rust] 15bors 04force-pushed 06auto from 145d8fb4d to 14af93684: 02http://git.io/N3iJvQ
[07:52:11] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[07:52:12] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[07:52:12] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZutwiA
[07:52:12] <ghrust> 13rust/06auto 14de8099e 15Lindsey Kuper: Typo fixes.
[07:52:12] <ghrust> 13rust/06auto 144185f5d 15bors: auto merge of #12958 : lkuper/rust/rustdoc-typos, r=alexcrichton
[07:52:12] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[07:54:27] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[07:56:10] <eddyb> rusti: Some::<(uint, uint, uint, uint)>(return);
[07:56:14] -rusti- pastebinned 8 lines of output: http://sprunge.us/JFdF
[07:56:43] <eddyb> rusti: Some::<(uint, uint, uint, uint)>(return); if true {return;}
[07:56:44] -rusti- pastebinned 8 lines of output: http://sprunge.us/ELLP
[07:57:11] <eddyb> rusti: if true{ Some::<(uint, uint, uint, uint)>(return);}
[07:57:20] <eddyb> rusti: if true{let x = Some::<(uint, uint, uint, uint)>(return);}
[07:57:21] -rusti- <anon>:16:21: 16:65 error: cannot determine a type for this local variable: unconstrained type
[07:57:21] -rusti- <anon>:16         if true{let x = Some::<(uint, uint, uint, uint)>(return);}
[07:57:21] -rusti-                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[07:57:21] -rusti- error: aborting due to previous error
[07:57:23] -rusti- application terminated with error code 101
[07:57:25] <eddyb> hmpf
[07:57:37] <eddyb> so this code looks broken
[07:59:26] <eddyb> rusti: fn foo(_: (uint, uint)) {}if true{foo(return);}
[07:59:39] <eddyb> I guess it compiles so I should leave this part of trans alone
[08:03:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:05:04] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:05:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:10:58] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[08:14:36] <eddyb> nmatsakis: pfffft. I need generators for this
[08:18:27] <eddyb> nmatsakis: I have to take something like args: &[T], map: |&'a Block<'a>, &T| -> DatumBlock<'a, Expr>
[08:18:44] <eddyb> generators would work perfectly here *sigh*
[08:21:12] <eddyb> (hmm.... I guess the body of the for loop could return a value being passed to next
[08:21:32] <eddyb> and the for loop itself would return the value that next didn't "like"
[08:21:39] <eddyb> i.e. when it stopped
[08:22:04] <eddyb> fn next(&mut self, value: V) -> Result<R, V>;
[08:22:16] <eddyb> hmmmmm
[08:22:24] <eddyb> RFC time?
[08:22:49] <eddyb> (you can implement a folder without a closure this way)
[08:24:33] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:33] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:58] <eddyb> Result<R, ()> is isomorphic to Option<R> so you keep the same optimizations - and with default type params, you can still use Iterator<R> (without specifying () for the "input" type)
[08:26:50] <eddyb> so the current fold becomes something like .fold(initial).map(|(prev, element)| next(prev, element)).run()
[08:27:10] <eddyb> hmm, the argument for the first .next() call is problematic
[08:41:13] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:16] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:42:12] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[08:42:12] <ghrust> [13rust] 15bors 04force-pushed 06auto from 144185f5d to 14af93684: 02http://git.io/N3iJvQ
[08:42:12] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[08:42:13] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[08:42:13] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Zt505w
[08:42:13] <ghrust> 13rust/06auto 14c18fea5 15Jonathan S: Relaxed the memory ordering on the implementation of UnsafeArc
[08:42:13] <ghrust> 13rust/06auto 1452ba3b1 15bors: auto merge of #12962 : gereeter/rust/relaxed-arc, r=alexcrichton...
[08:42:13] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[08:48:08] <huon> eddyb: what's wrong with Unfold?
[08:48:30] * eddyb takes a look
[08:48:39] <eddyb> pretty sure it's not as composable as I'd like it to be
[08:49:34] <eddyb> oh I see. hmpf
[08:50:00] <eddyb> huon: and I have to zip it?
[08:50:09] <eddyb> seems... counterproductive
[08:51:11] <eddyb> what I was talking about would come in handy when implementing generators (however hacky they may be)
[08:51:50] <eddyb> huon: my closure workaround works for now
[08:52:00] <huon> have to zip it?
[08:52:11] <eddyb> I guess you can put the actual iterator inside it?
[08:52:12] * huon doesn't understand what that means
[08:52:19] <eddyb> http://static.rust-lang.org/doc/master/std/iter/struct.Unfold.html
[08:52:27] <eddyb> it doesn't have an iterator, it's just an infinite stream
[08:52:37] <huon> infinite stream == iterator
[08:52:44] <eddyb> I mean, base iterator
[08:52:52] <huon> um, what?
[08:53:11] <eddyb> I guess the scan adaptor is closest to what I need
[08:53:14] <huon> why does Unfold need an base iterator?
[08:53:23] <eddyb> because I'm not pulling values out of a hat
[08:53:35] <huon> also, Unfold::new(iter, |i| i.next().map(...)) ?
[08:53:50] <huon> (I guess that's what you mean by "put the actual iterator inside it")
[08:53:55] <huon> but yeah, scan is probably what you want
[08:54:09] <eddyb> I have a container of T and a |state, T| -> (state, value) transition
[08:54:36] <eddyb> the problem with Scan http://static.rust-lang.org/doc/master/std/iter/struct.Scan.html is that you have to extract the state manually
[08:55:24] <eddyb> and as such, it's way more complicated than my workaround
[08:55:36] <eddyb> huon: I just want generators :/
[08:56:04] <eddyb> and I think we can extend Iterator without... uhm... breaking it
[08:56:05] <sigma> are we still concerned about microsoft having patents on the c# approach?
[08:56:11] <sigma> or are there alternatives I've missed
[08:56:13] <eddyb> patents?
[08:56:18] <eddyb> on what?
[08:56:26] <sigma> the way c# does yield
[08:56:31] <huon> sigma: I was under the impression that the patents were mainly on flattening generators
[08:56:47] <huon> not necessarily the basic "compile yield -> struct" component
[08:56:50] <eddyb> http://www.forbes.com/sites/realspin/2014/03/16/is-the-supreme-court-about-to-rule-that-software-is-ineligible-for-patent-protection/
[08:56:53] <sigma> cool
[08:57:09] <sigma> we can only hope that happens
[08:57:23] <eddyb> huon: combining nested state machines?
[08:57:29] <huon> eddyb: yes
[08:58:13] <eddyb> so, uhm, without prior knowledge of the way it's done in C# or even any knowledge at all about such things
[08:58:37] <huon> eddyb: I still don't understand why scan is fundamentally different to what you have?
[08:58:39] <eddyb> if I were to write an optimizer for nested state machines... I would be violating a patent?
[08:58:49] <huon> (other than taking &mut rather than by-val)
[08:58:59] *** Quits: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu) (Quit: )
[08:59:05] *** Joins: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu)
[08:59:15] <eddyb> huon: it makes the whole thing more complicated
[08:59:28] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[08:59:31] <sigma> eddyb: I think that was a concern, I havn't seen it mentioned in a while though
[08:59:51] <eddyb> huon: I'd like to be generic over an iterator that does something like Scan, instead of using Scan
[09:00:13] <eddyb> huon: that's the only improvement over my workaround
[09:00:14] <huon> eddyb: <I: Iterator<T>>?
[09:01:03] <eddyb> the generic function holds the state *between* calls to next
[09:01:20] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[09:01:37] <eddyb> I need to feed the state back to the iterator
[09:02:57] <eddyb> the iterator can't use a local for the state because the generic function needs to change that state
[09:03:09] <eddyb> s/holds/holds and may modify/ I guess
[09:03:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:04:00] <eddyb> this actually reminds me of my CPS stuff in std::fmt. yeah, I did CPS with iterators. much fun
[09:05:56] *** Quits: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net) (Ping timeout)
[09:05:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:06:39] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[09:11:16] *** Joins: MaXYZW (MaXYZW@moz-BC4833A5.science.ku.dk)
[09:12:34] *** Quits: MaXYZW (MaXYZW@moz-BC4833A5.science.ku.dk) (Quit: Computer has gone to sleep.)
[09:13:06] *** Joins: MaXYZW (MaXYZW@moz-BC4833A5.science.ku.dk)
[09:14:49] *** Quits: MaXYZW (MaXYZW@moz-BC4833A5.science.ku.dk) (Ping timeout)
[09:15:54] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[09:17:09] *** Joins: MaXYZW (MaXYZW@moz-BC4833A5.science.ku.dk)
[09:20:31] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[09:26:02] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[09:31:13] *** Quits: MaXYZW (MaXYZW@moz-BC4833A5.science.ku.dk) (Quit: Computer has gone to sleep.)
[09:32:19] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[09:32:19] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1452ba3b1 to 14af93684: 02http://git.io/N3iJvQ
[09:32:19] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[09:47:24] <eddyb> huh, how is the visitor working?
[09:47:47] <eddyb> oh, I guess it was using something else before
[09:52:20] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[09:52:20] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/YuzWWA
[09:52:20] <ghrust> 13rust/06auto 14417e54e 15Alex Crichton: test: Fix android tests...
[09:52:20] <ghrust> 13rust/06auto 14062d108 15bors: auto merge of #12994 : alexcrichton/rust/fix-android, r=huonw...
[09:52:20] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[09:52:21] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[09:52:22] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14d5f6087 to 14af93684: 02http://git.io/N3iJvQ
[09:52:22] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[09:57:51] <huon> such retry, wow https://github.com/lkuper/rust/commit/de8099edbed5e09c2334f3036a2a9eb63df5e4f1#commitcomment-5692597
[10:02:14] <Yurume> retry^5
[10:03:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:05:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:07:02] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[10:18:52] <eddyb> rusti: (~::std::rc::Rc::new(5) as ~Deref<int>).to_str()
[10:18:52] -rusti- <anon>:16:9: 16:57 error: failed to find an implementation of trait std::fmt::Show for ~std::ops::Deref<int>:Send
[10:18:52] -rusti- <anon>:16         (~::std::rc::Rc::new(5) as ~Deref<int>).to_str()
[10:18:52] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[10:18:53] -rusti- application terminated with error code 101
[10:19:01] <eddyb> hmpf
[10:19:51] <eddyb> rusti: struct Foo {x: int} (~::std::rc::Rc::new(Foo {x: 5}) as ~Deref<Foo>).x
[10:19:52] -rusti- pastebinned 11 lines of output: http://sprunge.us/CCGi
[10:20:04] <eddyb> interesting
[10:20:15] <eddyb> I guess... that case never happens
[10:37:39] *** Joins: gimpf (gimpf@moz-DB86CEB0.adsl.highway.telekom.at)
[10:42:21] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[10:42:21] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14062d108 to 14af93684: 02http://git.io/N3iJvQ
[10:42:21] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[10:42:22] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[10:42:22] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/-JCX6Q
[10:42:22] <ghrust> 13rust/06auto 144835a0d 15Alex Crichton: rustdoc: Implement cross-crate searching...
[10:42:22] <ghrust> 13rust/06auto 142d7a47e 15bors: auto merge of #12946 : alexcrichton/rust/discover, r=huonw...
[10:42:22] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[10:43:24] <huon> "test result: FAILED 0 passed; 1384 failed; 44 ignored; 0 measured"
[10:43:25] <huon> whoops
[10:43:58] <eddyb> gj
[10:44:01] <huon> (that also means the whole queue will just fail :( )
[10:44:15] <huon> since it was the patch that was meant to be fixing the android tests
[10:54:30] <cmr> Ok I really think we shouldn't be using github for rfc discussion
[10:55:11] <huon> things get lost too easily
[10:55:45] <cmr> yeah
[10:57:00] <cmr> servo is liking critic for review
[10:57:22] <huon> does that make sense with the RFC style?
[10:57:34] <cmr> I was more thinking code review
[10:57:38] <cmr> because github is awful for that too
[10:57:47] <cmr> critic makes no sense for RFCs
[10:57:55] <cmr> I hate to say this, because the UI is awful
[10:58:01] <cmr> but it should really just be a mailing list
[10:58:10] <cmr> it's the best software I know of for discussion :(
[10:58:20] <huon> how about reddit with threaded discussions?
[10:58:36] <huon> (or whatever that new software is... discourse or something?)
[10:58:45] <cmr> hm, I haven't looked too much at discourse
[10:58:52] <cmr> one thing I don't want to lose is line comments
[10:58:58] <huon> yeah, definitely
[10:59:04] <huon> reddit with line comments
[10:59:58] <eddyb> I think Rietveld has everything we'd need and it works like a mailing list
[11:00:05] <eddyb> but the UI isn't great
[11:00:56] <eddyb> I guess this is as good of an example as any https://codereview.chromium.org/191233003/#ps10001
[11:01:11] <eddyb> cmr: ^^ is the UI worse than critic? I'm curious
[11:01:38] <cmr> no, not really.
[11:01:48] <cmr> critic is really ugly
[11:01:54] <cmr> but it works very well from my interactions with it
[11:02:04] <eddyb> CSS, maybe?
[11:03:16] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:03:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:05:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:06:12] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[11:06:40] <cmr> http://try.discourse.org/t/variance-inference-rules/160/2
[11:06:44] <cmr> this could work
[11:06:51] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:06:59] <cmr> it takes markdown
[11:07:40] <cmr> you select a bunch of text and a popup appears to quote it in a reply
[11:07:41] <eddyb> pretty. melikes
[11:07:48] <cmr> which isn't as nice as clicking on a line number :(
[11:10:49] <cmr> haha what
[11:10:53] <cmr> there's a link to http://bulbapedia.bulbagarden.net/wiki/Pok%C3%A9mon_Wiki
[11:11:01] <cmr> under "Documentation" for phabricator
[11:11:06] <cmr> http://phabricator.org/tour/
[11:11:08] <cmr> look at that bottom bar
[11:11:17] <cmr> hilarious
[11:11:59] <eddyb> Starcraft II Races
[11:12:12] <eddyb> and Selected PokÃ©mon
[11:12:34] <cmr> kinda embarassing that I didn't notice those before I noticed the link to bulbapedia
[11:12:34] <eddyb> oh I guess you were including those too in "bottom bar"
[11:12:40] <cmr> selective blindness!
[11:12:43] <cmr> (I was)
[11:15:22] <cmr> https://secure.phabricator.com/book/phabricator/article/installation_guide/
[11:15:39] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:15:45] <cmr> I'm not sure I can use this software
[11:15:49] <cmr> the documentation is too distracting
[11:15:55] <cmr> I'll die of amusement first
[11:17:20] <eddyb> "Mac OS X is an acceptable flavor of Linux." as technically incorrect as that is, I'd give the author a cookie
[11:17:47] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:18:14] <huon> we need RFCs about how we RFC
[11:18:43] *** Joins: easy_muffin (martin@moz-C9733614.public.telering.at)
[11:18:58] <huon> erm, why can't I create an account on try.discourse.org?
[11:19:23] <cmr> I logged in with github successfully.
[11:19:55] <huon> yeah, it works right up until it's not letting me click the big blue "create account" button :(
[11:21:01] <nmatsakis> eddyb: that signature made no sense
[11:21:30] <eddyb> nmatsakis: an array of arguments and a closure translating one argument
[11:21:53] <nmatsakis> oh, I see whta you meant, nm I read it wrong,
[11:22:05] <nmatsakis> I guess I have no idea what you're doing but I'm not sure why that'd be a problem :)
[11:24:23] <eddyb> I'm just complaining that we don't have generator-style iterators
[11:24:46] <eddyb> (that take a value in next)
[11:25:11] <nmatsakis> oh
[11:25:22] <nmatsakis> you can write one :)
[11:25:48] <eddyb> nmatsakis: a lot of things in trans could be more efficiently modeled with iterators, but having to thread bcx through makes it much harder
[11:25:54] <eddyb> nmatsakis: I can write an RFC *sigh*
[11:26:26] * nmatsakis has to write some RFCs too
[11:26:36] <nmatsakis> me bugging you is very pot kettle black
[11:27:03] * nmatsakis has to read some RFCs, too
[11:27:09] <huon> cmr: hm, the threading of discourse isn't very good
[11:27:44] <huon> (it appears to be single level only, i.e. replies to replies don't seem be associated with the original post)
[11:27:51] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[11:28:19] <cmr> hm
[11:29:11] <huon> it seems that self posts on a subreddit would work just as well as discourse
[11:29:23] <huon> (although there's no email interaction that way?)
[11:30:37] <cmr> I think email, at the very least notifications, is too important to forgo :(
[11:31:33] <huon> yeah
[11:31:41] <huon> custom RSS gateway? :/
[11:32:16] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[11:32:16] <ghrust> [13rust] 15bors 04force-pushed 06auto from 142d7a47e to 14af93684: 02http://git.io/N3iJvQ
[11:32:16] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[11:32:17] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[11:32:17] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/sa8iqg
[11:32:17] <ghrust> 13rust/06auto 14749e527 15Brian Anderson: std: Improve docs for atomics. Fix two bugs...
[11:32:17] <ghrust> 13rust/06auto 14e2754d1 15bors: auto merge of #12954 : brson/rust/atomicdocs, r=alexcrichton...
[11:32:17] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[11:32:31] <cmr> https://meta.discourse.org/t/threaded-vs-flat-discourses-way-of-handling-responses-is-genius-but-i-have-one-small-suggestion/4053 praises their "threading" support
[11:32:56] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[11:34:05] <huon> we could implement email notifications for reddit given it's open source...
[11:35:35] <cmr> I don't think discourse is workable
[11:35:54] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[11:36:24] <huon> yeah, I agree
[11:36:44] <huon> the phabricator you were talking about above is what LLVM uses, right?
[11:38:40] *** Quits: easy_muffin (martin@moz-C9733614.public.telering.at) (Ping timeout)
[11:39:44] <cmr> yeah
[11:39:46] <cmr> (and facebook)
[11:39:55] <cmr> I'm not sure it's good for rfc discussion though
[11:40:02] <cmr> I'm not looking at it for that, at least.
[11:40:42] <huon> LLVM uses facebook for discussion?
[11:40:50] <cmr> no, facebook uses phabricator
[11:40:54] <cmr> they invented it
[11:40:54] <huon> oh, dur
[11:40:57] * huon is dumb
[11:41:41] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[11:43:34] *** Joins: aepsil0n (ebopp@moz-EF530DCB.ita.uni-heidelberg.de)
[11:44:36] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[11:50:53] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[11:53:49] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[11:54:40] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[12:00:30] *** Joins: gwty (gwtypc@34B1BA24.9A245E16.8A00C703.IP)
[12:00:48] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[12:03:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:03:44] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[12:05:29] *** Quits: Kxepal (Miranda@moz-C9CC9CAB.pppoe.mtu-net.ru) (Ping timeout)
[12:05:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:06:06] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Ping timeout)
[12:09:53] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[12:10:42] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[12:13:33] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[12:15:30] <cmr> nmatsakis: ping
[12:15:59] <nmatsakis> cmr: pong
[12:16:54] <cmr> nmatsakis: looking at middle::ty::Region for https://github.com/mozilla/rust/issues/6751, what would references that originally had no lifetime end up as?
[12:18:04] <nmatsakis> cmr: depends, but either ty::re_free(BrAnon) or ty::re_bound(BrAnon)
[12:18:13] *** Joins: eibwen (kvirc@moz-25FA2E23.dip0.t-ipconnect.de)
[12:18:28] <eddyb> ReFree/ReBound now
[12:18:29] <nmatsakis> cmr: well, if they appeared in a fn sig
[12:18:33] <nmatsakis> yeah
[12:19:04] <cmr> ok
[12:21:42] *** Joins: ski (ski@moz-E5796727.student.chalmers.se)
[12:21:46] <cmr> nmatsakis: ReLateBound or ReEarlyBound or either?
[12:21:58] <cmr> probably ReLateBound
[12:22:06] <cmr> since it's the only one with a BoundRegion
[12:22:18] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[12:22:18] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14e2754d1 to 14af93684: 02http://git.io/N3iJvQ
[12:22:18] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[12:22:18] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[12:22:18] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/QEktKQ
[12:22:18] <ghrust> 13rust/06auto 14de8099e 15Lindsey Kuper: Typo fixes.
[12:22:18] <ghrust> 13rust/06auto 1467f5e9c 15bors: auto merge of #12958 : lkuper/rust/rustdoc-typos, r=alexcrichton
[12:22:18] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[12:22:21] *** Joins: edwardw (edwardw@2D2C4852.2264CD20.339614B0.IP)
[12:22:36] <eddyb> cmr: keep in mind that trans only sees ReStatic after some point
[12:22:53] <cmr> eddyb: where and why?
[12:23:01] <cmr> surely not in function signatures
[12:23:08] <eddyb> *everywhere8
[12:23:17] <eddyb> cmr: it's part of monomorphization
[12:23:25] <edwardw> nmatsakis: ping
[12:23:34] <eddyb> type substitutions are applied and lifetimes are converted to ReStatic
[12:23:50] <cmr> eugh
[12:25:13] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[12:25:54] <nmatsakis> edwardw: pong
[12:26:17] <edwardw> https://github.com/mozilla/rust/blob/master/src/librustc/middle/typeck/variance.rs#L678 there was another issue in variance inference
[12:26:41] <edwardw> the region parameter and mutability in trait reference never be accounted for in variance inference
[12:26:46] <edwardw> is it intentional?
[12:28:14] <edwardw> that's what threw off my patch. I thought I only added constraint for *unused* parameters, but parameters in trait reference are never used
[12:28:16] <nmatsakis> edwardw: no, that seems bogus
[12:28:38] <edwardw> ok
[12:28:43] <nmatsakis> it should act exactly as if it were &(T) where T = Trait<...>
[12:28:53] <eddyb> DST?
[12:28:55] <nmatsakis> i.e., yet another bug caused by not yet having DST :)
[12:28:57] *** Quits: gimpf (gimpf@moz-DB86CEB0.adsl.highway.telekom.at) (Ping timeout)
[12:29:05] <cmr> eddyb: where does this happen?
[12:29:07] *** Quits: japaric2 (japaric@B07B45DD.24D108FE.95AFB88D.IP) (Ping timeout)
[12:29:15] <edwardw> one more question
[12:29:25] <nmatsakis> edwardw: that makes sense, I was still trying to understand why your patch would need changes to the inference rules. I feel like it shouldn't.
[12:29:32] <nmatsakis> edwardw: (bug fixes, though, are another matter)
[12:29:34] <eddyb> cmr: possibly all over the place. ty::substs has a region substitution field that can be one variant that triggers this behavior
[12:29:43] <edwardw> in comment you said impls are not inferred
[12:29:52] <edwardw> I feel we may need to change that too
[12:29:58] <eddyb> cmr: you could find that and grep for it. I think some functions in trans::base do substitution + lifetime erasure
[12:29:59] <nmatsakis> I don't think so
[12:30:01] <nmatsakis> edwardw: ^
[12:30:23] <edwardw> otherwise lifetime parameters in impls are not going to be substituted 
[12:30:31] <cmr> ah I see the comment now
[12:30:42] <nmatsakis> edwardw: I don't understand what you mean by substituted in this context
[12:30:59] *** Joins: japaric2 (japaric@EAACEE24.8C2993CE.5C7588CA.IP)
[12:31:22] <edwardw> a sec, I'm looking for a concert example
[12:31:46] <edwardw> https://github.com/mozilla/rust/blob/master/src/libserialize/json.rs#L318
[12:32:04] <edwardw> should this be allowed?
[12:32:20] <edwardw> m seems to not live long enough
[12:32:49] <cmr> eddyb: that's only done for lifetimes in type parameters, not function signatures.
[12:32:57] <edwardw> `Encoder::new(&mut m as &mut io::Writer);` requires lifetime 'a, m is only a local variable 
[12:33:00] <cmr> so trans doesn't see *only* ReStatic after a time
[12:33:14] <nmatsakis> edwardw: I'm reading it, one sec
[12:35:07] <nmatsakis> edwardw: I believe there is a bug there, but I don't believe it has anything to do with variance inference examining impls
[12:35:32] *** flaper87|afk is now known as flaper87
[12:35:40] <edwardw> ok, I'll fix the trait reference bug first then
[12:35:41] <eddyb> cmr: what do you mean?
[12:35:51] <edwardw> ty
[12:36:38] <nmatsakis> edwardw: to put another way, I think that is probably #5781
[12:36:58] <nmatsakis> edwardw: but let me think about it a bit more  :)
[12:37:05] <edwardw> sure :P
[12:37:06] <cmr> edwardw: subst.rs, line 270
[12:37:54] <edwardw> cmr: what about it?
[12:38:05] <cmr> erm
[12:38:07] <cmr> sorry
[12:38:08] <cmr> @eddyb
[12:38:14] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[12:38:14] <edwardw> LOL
[12:38:16] <cmr> too many ed<TAB>'s
[12:38:25] <edwardw> haha
[12:39:07] <eddyb> cmr: ty::ErasedRegions
[12:39:16] <cmr> yes I know
[12:39:30] <eddyb> I think what it talks about is <'a> |&'a T| -> &'a U
[12:39:38] <eddyb> if that's not late bound, I don't know what is
[12:39:57] * eddyb has no idea how these things work
[12:40:47] <cmr> nmatsakis: is my understanding that ReStatic will never be substituted into a function signature correct?
[12:40:49] <eddyb> cmr: you can compile small files and enable some debug logging to see the types, I guess
[12:41:20] <eddyb> cmr: no, that's incorrect, I thought you were talking about the Note in that function's comments
[12:41:30] <nmatsakis> edwardw: I've got to go for a bit, not sure if that's #5781 or another bug, but I guess I need to make a smaller example and dump it. In any case, I think that Encodable ought to be invariant with respect to its argument, since it appears within an &mut T. Therefore, the substitution of Encoder<'short> for Encoder<'a> ought to fail somewhere
[12:41:41] <nmatsakis> cmr: I don't know, that doesn't seem obviously true?
[12:41:55] * nmatsakis breakfast
[12:42:09] <cmr> eddyb: I was
[12:42:13] <edwardw> nmatsakis: ok
[12:42:29] <kimundi> I have a question about the rfc repo. Should you only post something there if it is directly applicable as a standalone proposal, or would it also be okay to write up a feature proposal that depends on another feature proposal and/or would allow expression/implementation of yet another feature proposal? That is, is it okay to write about A if it needs B and would only exist to express C and similar?
[12:42:47] <kimundi> I guess you could cal that a proposal fragment
[12:42:55] <ChrisMorgan> This RFC process is *very* quickly breaking down and showing GitHub to be quite terrible for such a process.
[12:43:04] <eddyb> cmr: trans/common.rs: monomorphize_type
[12:43:07] <kimundi> haha
[12:44:49] <eddyb> cmr: hmm, that doesn't seem to erase regions immediately, which would be good for you
[12:45:28] <huon> cmr: https://github.com/mozilla/rust/pull/12999 r?
[12:45:46] <huon> oh, weird, line breaks in the middle of ` ` code blocks...
[12:45:58] * huon fixes that
[12:46:51] <pnkfelix> ChrisMorgan: yeah.  I'm going to add agenda item to mtg tonight for that
[12:47:49] * ChrisMorgan wonders whether the likes of a Confluence wiki page would work better
[12:47:57] <cmr> ew confluence
[12:48:13] <cmr> probably my least favorite atlassian product
[12:48:13] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[12:48:15] * huon doesn't want to be a doll
[12:48:43] <eddyb> cmr: trans doesn't even mention ErasedRegions. how odd
[12:48:58] <cmr> ChrisMorgan: I'm coming to believe we should just use a mailing list for discussing RFCs
[12:49:00] <eddyb> wait, no, it does
[12:49:05] <ChrisMorgan> cmr: it's pretty fancy software and normally works well. Of course, it all depends on how you use it whether it's pleasant or not, but I had few complaints when using it for a full-year Uni project with three other students, a client and a supervisor. We got good marks for documenting things â˜º
[12:49:17] <eddyb> (grep has a different order than what I'd expect)
[12:49:31] <ChrisMorgan> cmr: mailing list has the disadvantage that you can't so easily modify the RFC. That's where a wiki is better.
[12:49:50] <huon> and threading is bleh on a ML :(
[12:49:56] <eddyb> github wikis do have history
[12:49:57] <ChrisMorgan> Very.
[12:50:04] <eddyb> but I don't think they have comments
[12:50:05] <ChrisMorgan> eddyb: but no connection with commenting.
[12:50:05] <cmr> ChrisMorgan: the mailing list isn't storage for the RFC, it's just for discussion.
[12:50:41] <ChrisMorgan> With email + ??? or wiki + issue, you have the issue that it's no longer in one place, which means you've got to synchronise changes here and there and everywhere.
[12:50:44] <eddyb> we should just build our own thing, using a mailing list like rietveld, but with a nicer UI
[12:50:52] <eddyb> nothing big, just an UI for a service
[12:50:59] <eddyb> bonus points for using rust-http
[12:51:07] * ChrisMorgan would be in favour of such a thing but is not willing to do it himself at present
[12:51:12] * cmr agrees
[12:52:11] <eddyb> cmr: trans_fn_ref_with_vtables uses ErasedRegions
[12:53:05] <cmr> eddyb: that's only for fn pointers, not translating functions.
[12:53:13] <eddyb> and that's called from trans_fn_ref and I'm pretty sure that's how you call every function ever
[12:53:23] <pnkfelix> ChrisMorgan: cmr: should we put together a specific list of problems we have encountered with github thus far?
[12:53:29] <cmr> eddyb: calls don't matter
[12:53:33] <eddyb> cmr: but there might be a discrepancy
[12:53:35] <cmr> eddyb: it's the decl that does
[12:53:50] <eddyb> cmr: a call initializes the translation of the function
[12:53:59] <pnkfelix> ChrisMorgan: cmr: My main one(s) is either dropping of comments on prior commits (due to forced-push) or auto-hiding of comments on outdated diffs.
[12:54:11] <eddyb> I wonder what happens if you have a non-type-generic function
[12:54:13] <cmr> eddyb: when? I'm tracing it through trans_crate
[12:54:16] <ChrisMorgan> Can't collaborate on updating the spec. History not retained well (especially comments). Closed service (no migration to other services should the need arise). No formatting control.
[12:54:31] <eddyb> then it can either be translated directly (with what substs?)
[12:54:45] <eddyb> or through trans_fn_ref (if a call to it occurs first)
[12:54:57] <eddyb> in the latter case, regions are erased for sure
[12:55:41] <eddyb> get_item_val(ccx, def_id.node) hmm
[12:56:02] <eddyb> cmr: it's all very confusing, I suggest you experiment
[12:56:26] <eddyb> cmr: Datum's and other things debug their type, so RUST_LOG is your friend
[12:56:47] <eddyb> right now I have my own callstack in my brain
[12:57:51] <pnkfelix> ChrisMorgan: cmr: I won't be surprised if the people say "it will be easier to just tweak our process internally rather than attempt to adopt a different service"
[12:58:00] <pnkfelix> ChrisMorgan: cmr: but we'll see what happens.
[12:58:37] <ChrisMorgan> pnkfelix: unfortunately that tends to be true. But at present I think I really would prefer a MediaWiki installation to GitHub issues. Reformat it all in Markdown when it's done and dusted if desired.
[12:58:56] <cmr> pnkfelix: I'm annoyed enough with github's crappy code reviews that I'm experimenting with phabricator
[12:59:19] <pnkfelix> cmr: yeah I saw you talking about that w/ huon
[12:59:21] <cmr> A wiki for issues and bug reports is super bad I think.
[12:59:38] <cmr> I'd rather use bugzilla, and that's saying something!
[12:59:48] <cmr> That said I don't mind github issues
[12:59:57] <cmr> it's a bit inflexible but it works for us
[12:59:59] <huon> What do other similar projects use for RFC-style things? (I know Python uses a ML)
[13:01:39] <ChrisMorgan> Bitcoin uses MediaWiki for the storage of their protocol improvements, not sure whether discussion takes place there or not.
[13:03:10] *** Joins: gimpf (gimpf@moz-DB86CEB0.adsl.highway.telekom.at)
[13:03:30] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:05:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:07:27] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[13:07:28] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1467f5e9c to 14af93684: 02http://git.io/N3iJvQ
[13:07:28] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[13:07:29] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:07:30] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[13:07:30] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/B1lQBQ
[13:07:30] <ghrust> 13rust/06auto 14c18fea5 15Jonathan S: Relaxed the memory ordering on the implementation of UnsafeArc
[13:07:30] <ghrust> 13rust/06auto 1414364ce 15bors: auto merge of #12962 : gereeter/rust/relaxed-arc, r=alexcrichton...
[13:07:30] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[13:08:06] <cmr> acrichto: I'm getting http://buildbot.rust-lang.org/builders/try-win/builds/926/steps/test/logs/stdio on separate-libc ...
[13:08:19] <cmr> acrichto: is there any way to just exclude it from tests? :\
[13:08:27] *** Quits: edwardw (edwardw@2D2C4852.2264CD20.339614B0.IP) (Ping timeout)
[13:09:56] *** Joins: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP)
[13:10:21] <eddyb> was there an issue explaining why the win bots are slower?
[13:10:38] *** flaper87 is now known as flaper87|afk
[13:11:01] <cmr> there's https://github.com/mozilla/rust/issues/8859
[13:11:13] <eddyb> like, since a few days ago
[13:11:15] <cmr> Our issues on windows are surely plethora
[13:11:18] <cmr> oh that
[13:14:57] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[13:17:22] *** flaper87|afk is now known as flaper87
[13:23:36] <cmr> !! 13000 is mine
[13:23:44] <cmr> r? https://github.com/mozilla/rust/pull/13000
[13:26:12] <eibwen> is there already a repo for cargo?
[13:26:34] <huon> cmr: r-
[13:26:43] <huon> the number is too nice for a useful PR
[13:27:20] <ChrisMorgan> eibwen: yes, but it's a Secret!
[13:27:30] <cmr> it's not a secret
[13:27:34] <cmr> there's a link to it in the ML
[13:27:45] <ChrisMorgan> https://github.com/carlhuda/cargo
[13:28:26] <eibwen> thank you :)
[13:28:28] <eddyb> there's rust-lang/cargo
[13:28:48] <eddyb> wait, what, there's a prototype that works?
[13:29:07] <huon> cmr: hm, does, say #[bench] fn foo(x: int) { ...  } still get ignored?
[13:29:18] <cmr> huon: no, see the PR text.
[13:29:25] <eddyb> https://github.com/carlhuda/cargo/blob/master/DESIGN/DESIGN.md lovely
[13:30:08] <huon> cmr: oh
[13:30:10] <huon> ok
[13:30:33] <eibwen> does that cargo work already?
[13:30:54] <huon> probably not
[13:30:56] <ChrisMorgan> eibwen: depends on what you mean by "work". No.
[13:31:11] <huon> they added `cargo-compile` today, so maybe you can compile things with it
[13:31:14] <eibwen> can it compile a packet?
[13:31:38] <eibwen> okay
[13:36:32] *** Quits: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP) (Ping timeout)
[13:39:06] *** Joins: edwardw (edwardw@FC63E399.AB331A3B.FAED9FFC.IP)
[13:39:16] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[13:40:39] <cmr> eddyb: testing has confirmed that my original thinking was correct. only lifetime parameters from type signatures are substituted as ReStatic.
[13:40:47] <cmr> That is, things such as `impl<'a> Foo { ... }`
[13:41:05] <eddyb> so foo<'a>(&'a T) is not erased?
[13:41:20] <eddyb> what about foo<'a, T>(&'a T)?
[13:41:21] <cmr> I don't care about that because named lifetimes can't be marked nocapture :P
[13:41:34] <cmr> I only care about anonymous lifetimes
[13:41:44] <eddyb> right, but those... hang on
[13:41:53] <eddyb> cmr: derp, I see it now
[13:42:14] <eddyb> you were pointing at the right thing, I just didn't think of it. ReAnon is never substituted. that's what you meant earlier?
[13:42:26] <cmr> yes
[13:42:34] <eddyb> so trans has a mix of ReStatic and ReAnon
[13:43:17] <eddyb> odd, but fine
[13:43:27] <eddyb> cmr: it might break, though
[13:43:43] <eddyb> rusti: fn foo<T>(x: &T) -> &T {x}
[13:43:44] -rusti- pastebinned 11 lines of output: http://sprunge.us/HGDV
[13:43:50] <cmr> I tested that case
[13:44:03] <cmr> also holy crap that error message
[13:44:04] <eddyb> that note is above the error :(
[13:44:06] <cmr> ktt3ja <3
[13:44:26] <eddyb> we should really deny ReAnon in return types
[13:44:42] <eddyb> rusti: fn foo() -> &str {"foo"}
[13:44:43] -rusti- <anon>:16:9: 16:33 warning: code is never used: `foo`, #[warn(dead_code)] on by default
[13:44:43] -rusti- <anon>:16         fn foo() -> &str {"foo"}
[13:44:43] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~
[13:44:43] -rusti- ()
[13:44:47] <eddyb> that is not sane
[13:45:05] <cmr> well we'd be forbidding ReInfer
[13:45:12] <cmr> that'd be an easy fix.
[13:45:19] <cmr> open an issue, cc me
[13:45:42] <huon> there's already an issue
[13:46:18] <eddyb> ah, right, ReInfer
[13:48:24] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[13:52:26] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[13:52:26] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1414364ce to 14af93684: 02http://git.io/N3iJvQ
[13:52:26] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[13:52:38] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:52:40] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[13:54:07] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[13:59:49] *** Quits: gwty (gwtypc@34B1BA24.9A245E16.8A00C703.IP) (Ping timeout)
[14:02:16] *** Quits: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu) (Quit: )
[14:02:18] *** Joins: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu)
[14:03:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:05:04] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[14:05:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:07:55] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[14:09:20] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[14:11:02] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:12:50] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[14:16:33] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[14:25:15] *** flaper87 is now known as flaper87|afk
[14:32:12] *** Joins: Kxepal (Miranda@moz-C9CC9CAB.pppoe.mtu-net.ru)
[14:36:00] <pnkfelix> i wonder if we should extend `_` type placeholders to support fn's within impl Trait for Type { ... }
[14:36:11] <pnkfelix> (since you can derive it from the Trait's definition, right?)
[14:36:23] <eddyb> hmm?
[14:36:37] <eddyb> pnkfelix: like, argument types and return type?
[14:36:41] <pnkfelix> eddyb: yeah
[14:36:47] <eddyb> for consistency, I'd use .. in arguments
[14:37:05] <pnkfelix> eddyb: oh I wasn't talking about replacing all of the types
[14:37:09] <eddyb> but it feels weird. oooh, you mean individual types?
[14:37:11] <pnkfelix> it was something like this
[14:37:24] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[14:37:24] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14c544eab to 14af93684: 02http://git.io/N3iJvQ
[14:37:24] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[14:37:26] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[14:37:26] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Mh1Z0w
[14:37:26] <ghrust> 13rust/06auto 14a07db20 15Alan Andrade: deny missing docs
[14:37:26] <ghrust> 13rust/06auto 1480ed794 15bors: auto merge of #12968 : alan-andrade/rust/docathon-getopts-deny-missingdocs, r=alexcrichton...
[14:37:27] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[14:37:30] <pnkfelix> fn name(&self, (_c, _): (&ast_map::Map, _)) -> ~str { ... }
[14:37:39] <eddyb> right, that makes sense
[14:38:21] <pnkfelix> I mostly am annoyed having to write out the type when I'm not actually going to be using it.  Oh wait, I already have a type alias for the relevant tuple here
[14:38:25] *** Joins: easy_muffin (martin@moz-C9733614.public.telering.at)
[14:38:28] <pnkfelix> (problem solved)
[14:38:39] *** Quits: easy_muffin (martin@moz-C9733614.public.telering.at) (Client exited)
[14:38:42] <eddyb> pnkfelix: what'ya doing with ast_map?
[14:39:02] * eddyb tends to get personal about parts of the codebase he's touched
[14:39:11] <pnkfelix> eddyb: Trying to get the CFG code into shape for use with more stuff in rustc
[14:39:21] <pnkfelix> eddyb: right now I'm just trying to make a graphviz output module
[14:39:24] <eddyb> the current middle::cfg?
[14:39:30] <pnkfelix> eddyb: so I can see visualizations of the flow graphs
[14:39:33] <pnkfelix> eddyb: Yeah.
[14:39:33] <eddyb> graphviz?
[14:39:37] * eddyb hugs pnkfelix
[14:39:42] <pnkfelix> eddyb: you know, dot?
[14:39:56] <cmr> that will be cool
[14:39:59] <eddyb> a blast to the past
[14:40:14] <pnkfelix> its still not quite right yet
[14:40:17] <pnkfelix> but here's a preview
[14:40:18] <cmr> hahah
[14:40:20] <eddyb> like this http://me.kwhq.net/stuff/graph/new-md4.svg
[14:40:36] <cmr> huon: I fixed https://github.com/mozilla/rust/issues/8153
[14:40:41] <eddyb> (yes, you need to zoom out)
[14:40:42] <cmr> huon: We had duplicate methods *in rustc*!
[14:40:56] <eddyb> cmr: which ones?
[14:41:00] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[14:41:04] <cmr> it was actually std
[14:41:06] <pnkfelix> http://picpaste.com/l_while_x_break_l.png
[14:41:07] <cmr> my bad, I'm blind
[14:41:09] <cmr> char_at
[14:41:36] <pnkfelix> (but like I said, its currently broken.  I need to change the way I identify the nodes)
[14:41:54] <eddyb> pnkfelix: I'd suggest rectangular boxes and SVG output
[14:42:06] <pnkfelix> (because middle::cfg inserts fake ones with dummy ast::ids, and I was using the ast::id as the way to make "unique" node labels.)
[14:42:06] <eddyb> from, you know, experience :P
[14:42:24] <pnkfelix> eddyb: SVG versus .dot you mean?
[14:42:34] <eddyb> .dot -> SVG instead of PNG
[14:42:37] <pnkfelix> eddyb: I imagine graphviz has a SVG backend
[14:42:45] <eddyb> yupp it does
[14:42:53] <pnkfelix> eddyb: oh, sure.  I'm using a Graphviz app locally
[14:43:14] <pnkfelix> eddyb: but next time I share, I'll use svg I guess
[14:43:51] <eddyb> and maybe the arrows should be inverted
[14:44:00] <eddyb> or, no, it kinda makes sense
[14:44:15] <pnkfelix> eddyb: yeah, it makes sense excpet for where its broken
[14:44:16] <eddyb> true -> () -> (true, ()) is a bit confusing at first
[14:44:23] <pnkfelix> e.g. that `break 'exit` out of nowhere is nonsense
[14:44:50] <pnkfelix> eddyb: right, its control flow, not dataflow
[14:45:05] <eddyb> it kinda looks like what you'd use to generate Java bytecode out of
[14:45:27] <eddyb> (compared to LLVM IR)
[14:45:53] <cmr> well... it's a cfg
[14:45:56] <cmr> so...
[14:46:39] <eddyb> someone give me a good reason to stop thinking of Java bytecode from Rust
[14:46:51] <cmr> JVM backend! That'd be fun
[14:47:05] <cmr> it'd be fun to implement.
[14:47:16] <eddyb> cmr: you're not helping!
[14:47:21] <cmr> eddyb: I expect a pull request in a week.
[14:47:34] <cmr> bstrie: amidoinitrite?
[14:47:41] * eddyb spills beans all over cmr
[14:47:50] <eddyb> that's all the Java you're gonna get
[14:48:20] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[14:49:44] <eddyb> pnkfelix: hmpf, I was under the impression that a CFG would be easier to translate to IR. I mean, it should have the correct execution order... but you need to store the result from each node *somewhere*
[14:50:53] *** Quits: larsberg (sid16141@moz-A42E5B7B.irccloud.com) (Ping timeout)
[14:53:40] <bstrie> cmr: a weeks seems a bit ambitious. well done
[14:54:10] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:56:10] <cmr> eddyb: know of any particular issues preventing repr from being removed?
[14:56:22] <eddyb> {:?}?
[14:56:27] <cmr> yeah
[14:56:41] <eddyb> I actually cleaned up trans::reflect
[14:56:54] <eddyb> so don't remove that from under my feet
[14:57:20] <cmr> did that land?
[14:57:20] <eddyb> cmr: I think we can have a TyVisitor with generic methods
[14:57:23] <eddyb> nope
[14:57:27] <cmr> can you land it? :P
[14:57:35] <eddyb> what are you touching?
[14:57:40] <cmr> nothing yet
[14:57:46] <cmr> but I want to rip out reflection into a libreflect
[14:57:50] <eddyb> aah
[14:58:12] <eddyb> cmr: aaand somehow make {:?} work?
[14:58:20] <acrichto> cmr: I've seen that bug when crates don't have any tests before, if you add an empty test to the crate it should work
[14:58:31] <cmr> {} with a reflect::repr(&value)
[14:58:38] <eddyb> hmm, okay
[14:58:46] <eddyb> cmr: you don't need to touch trans then
[14:58:56] <acrichto> cmr: see https://github.com/mozilla/rust/issues/10872
[14:59:11] <cmr> eddyb: there's one (wrong) use of the tyvisitor lang item in object construction
[14:59:26] <cmr> acrichto: thanks
[14:59:29] <eddyb> cmr: just move the specific implementation of TyVisitor (maybe the lang item itself?) out of libstd
[14:59:52] <cmr> eddyb: I can't move the lang item until the use of it in trans is gone
[14:59:52] <eddyb> cmr: file/line?
[14:59:55] <cmr> sec
[15:00:08] <cmr> ty.rs 4623
[15:00:25] <eddyb> you mean casting to a trait object always generating a TyVisitor?
[15:00:33] <eddyb> err, visit_glue
[15:00:42] <cmr> hm that isn't what I thought it was
[15:00:45] <cmr> this might not actually be bogus
[15:00:51] <eddyb> hah I was just looking at that
[15:01:00] <cmr> yeah this is just visit glue
[15:01:01] <eddyb> cmr: that's used by visit_glue to get the right type
[15:01:02] <cmr> my bad
[15:01:30] <eddyb> if you don't make &T as &Trait error with that change, it's fine with me
[15:01:38] <cmr> but yes, I mean the extra visit glue. Ideally libreflect would use an intrinsic that gens visit glue
[15:02:04] <eddyb> cmr: if we make the visiting stuff generic, then we don't need visit_glue in tydesc
[15:02:30] <eddyb> if you move it, it will actually be easier to experiment :D
[15:02:31] *** Joins: jack_ (sid19593@moz-A42E5B7B.irccloud.com)
[15:02:33] <cmr> eddyb: can you describe how'd that look, generic?
[15:02:54] <eddyb> cmr: generic methods on TyVisitor and a generic visit_type lang item
[15:03:06] <eddyb> everywhere you see a *TyDesc, replace that with a generic type
[15:04:21] <eddyb> cmr: if you can make librustc not depend on libreflect, that would be great
[15:04:45] <cmr> just think
[15:04:47] <cmr> all that visit glue
[15:04:50] <cmr> gone
[15:06:21] <eddyb> now all we need is a DebugShow
[15:07:53] <eddyb> printing things like refcounts on Rc, capacity on Vec etc.
[15:08:11] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[15:08:11] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1480ed794 to 14af93684: 02http://git.io/N3iJvQ
[15:08:11] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[15:08:12] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[15:08:12] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/AS4ORQ
[15:08:12] <ghrust> 13rust/06auto 14417e54e 15Alex Crichton: test: Fix android tests...
[15:08:12] <ghrust> 13rust/06auto 143844996 15bors: auto merge of #12994 : alexcrichton/rust/fix-android, r=huonw...
[15:08:13] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[15:08:20] <cmr> ohh that'd be nice
[15:09:28] <huon> could use the #
[15:09:42] <huon> like acrichto suggests in https://github.com/mozilla/rust/issues/12128
[15:09:49] <eddyb> and maybe implement a lang item to handle reflection (not really for printing, just reflection in general) through raw-pointer-based abstractions
[15:09:51] <huon> (speaking of which, I should tackle that)
[15:10:08] <eddyb> though I hope Vec will use something like (~[T], uint) under DST
[15:10:33] <huon> well, actually maybe not; that would make `#[deriving(Show)] struct Foo { x: Vec<T> }` print the capacity too
[15:10:33] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[15:10:38] <huon> eddyb: that's not "correct"
[15:10:45] <eddyb> huon: why?
[15:10:47] <huon> especially if we have sized allocators
[15:11:01] <huon> because the length of ~[] will be the size of the allocation
[15:11:08] <eddyb> oh, right, Drop
[15:11:09] <huon> but it's not if you're using it for Vec
[15:11:50] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:12:05] <eddyb> anyways, DebugShow would be nice, especially if it's easy to derive
[15:12:42] <cmr> rusti: enum Foo { Bar { x: int } } Bar { x: 4 }
[15:12:43] -rusti- pastebinned 8 lines of output: http://sprunge.us/WjRg
[15:12:54] <cmr> oh right that's not even using :? anymore
[15:12:57] <eddyb> nope
[15:13:47] <eddyb> cmr: pls make libreflect not part of the bootstrap process, then we can clean it up without triggering a rebuild of *everything* every time
[15:13:59] <eddyb> and sticking #[cfg(not(stage0))] every-freaking-where
[15:14:12] *** Joins: larsberg (sid16141@moz-A42E5B7B.irccloud.com)
[15:14:44] <cmr> eddyb: I'm not working on it until your cleanups land, for your sanity and mine.
[15:15:08] *** Joins: gwty (gwtypc@C920894F.E56F3B82.AAF4A5CC.IP)
[15:15:11] <eddyb> cmr: my changes are to trans::reflect
[15:15:17] <eddyb> you shouldn't have to touch that
[15:15:20] <cmr> did your de-@ land?
[15:15:24] <eddyb> yupp
[15:15:26] <cmr> oh ok
[15:15:32] <eddyb> http://huonw.github.io/isrustfastyet/mem/#2c8bce1 \o/ I made a dip
[15:15:54] <cmr> hm why did it rocket back up
[15:16:05] <eddyb> out of order?
[15:16:34] <cmr> only direct pushes to master get out of order
[15:16:51] *** jack_ is now known as jack
[15:16:55] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:17:09] <eddyb> cmr: there were rollups
[15:17:35] <cmr> rollups are still in order
[15:17:41] <eddyb> then I don't know
[15:17:47] <cmr> it just shows as one PR
[15:17:49] <cmr> (because it is one)
[15:19:32] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[15:19:32] <ghrust> [13rust] 15cmr 04force-pushed 06try from 148daff39 to 1415c6bd1: 02http://git.io/k471pw
[15:19:32] <ghrust> 13rust/06try 14cd49f9f 15Corey Richardson: Remove libc from std...
[15:19:32] <ghrust> 13rust/06try 14254a011 15Corey Richardson: fix fallout from std::libc separation
[15:19:33] <ghrust> 13rust/06try 14c29523c 15Corey Richardson: rt: remove opendir/readdir hack
[15:19:35] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[15:21:39] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[15:21:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:23:48] *** Quits: japaric2 (japaric@EAACEE24.8C2993CE.5C7588CA.IP) (Connection reset by peer)
[15:24:11] *** Joins: japaric2 (japaric@EAACEE24.8C2993CE.5C7588CA.IP)
[15:24:42] <cmr> We have 494 transmutes in the codebase.
[15:24:54] <cmr> though a bunch of them are in tests
[15:25:03] <eddyb> cmr: can you bring up a density plot?
[15:25:09] <cmr> uhhh
[15:25:13] <cmr> no
[15:25:27] <cmr> git grep transmute -- '*.rs' | wc -l
[15:25:53] <cmr> Did someone have a fix for linkage1? It's really annoying :\
[15:26:04] <eddyb> what do you mean?
[15:26:23] <cmr> https://gist.github.com/cmr/5030ac07141e9b0ff247
[15:26:25] <cmr> always fails for me
[15:26:28] <acrichto> cmr: yes, nrc has a PR
[15:26:42] <acrichto> https://github.com/mozilla/rust/pull/12983
[15:26:50] <eddyb> libstd has most of those transmutes
[15:27:36] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[15:28:08] <cmr> acrichto: you know, everyone who looked at that bench PR didn't read the text, apparently, and raised that issue :P
[15:48:52] *** Quits: japaric2 (japaric@EAACEE24.8C2993CE.5C7588CA.IP) (Ping timeout)
[15:49:28] *** Joins: japaric2 (japaric@508B8F57.E321A207.5C7588CA.IP)
[15:50:25] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:52:35] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[15:52:35] <ghrust> [13rust] 15bors 04force-pushed 06auto from 143844996 to 14af93684: 02http://git.io/N3iJvQ
[15:52:35] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[15:52:35] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[15:52:35] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/zGUYVQ
[15:52:35] <ghrust> 13rust/06auto 14f6195f5 15Nick Cameron: Fix linkage1 test which fails due to --as-needed...
[15:52:35] <ghrust> 13rust/06auto 14e215dfd 15bors: auto merge of #12983 : nick29581/rust/test_fix, r=alexcrichton
[15:52:36] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[15:53:45] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:55:07] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (No route to host)
[15:55:18] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[15:58:16] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[16:02:34] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[16:03:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:04:32] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[16:05:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:06:53] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[16:07:37] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[16:13:49] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:21:18] *** Joins: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net)
[16:26:13] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[16:26:13] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14e215dfd to 14af93684: 02http://git.io/N3iJvQ
[16:26:13] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[16:27:37] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[16:27:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 145c97dcf to 14af93684: 02http://git.io/N3iJvQ
[16:27:37] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[16:28:01] *** japaric2 is now known as japaric
[16:30:52] *** flaper87|afk is now known as flaper87
[16:31:16] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[16:31:32] *** Joins: dherman (dherman@moz-62518563.mtv2.mozilla.com)
[16:31:32] *** ChanServ sets mode: +ao dherman dherman
[16:31:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[16:33:20] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[16:34:22] *** Quits: gwty (gwtypc@C920894F.E56F3B82.AAF4A5CC.IP) (Ping timeout)
[16:36:07] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:36:11] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[16:36:31] *** Joins: gwty (gwtypc@36B896FC.BD82C0B5.645B845A.IP)
[16:38:49] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:40:17] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[16:40:17] *** ChanServ sets mode: +qo brson brson
[16:43:37] *** Quits: gwty (gwtypc@36B896FC.BD82C0B5.645B845A.IP) (Ping timeout)
[16:43:39] *** Joins: gwty (gwtypc@36B896FC.BD82C0B5.645B845A.IP)
[16:55:55] *** Quits: Kxepal (Miranda@moz-C9CC9CAB.pppoe.mtu-net.ru) (Ping timeout)
[16:57:49] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[16:58:38] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[16:58:38] *** ChanServ sets mode: +qo brson brson
[17:00:00] *** Joins: Kxepal (Miranda@moz-1110A3C3.pppoe.mtu-net.ru)
[17:03:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:05:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:18:22] *** Quits: dherman (dherman@moz-62518563.mtv2.mozilla.com) (Quit: dherman)
[17:19:26] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Ping timeout)
[17:19:40] *** Quits: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net) (Quit: Computer has gone to sleep.)
[17:23:12] *** Quits: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[17:23:35] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[17:24:36] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Connection reset by peer)
[17:25:33] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[17:27:33] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[17:27:33] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/oC3tjQ
[17:27:33] <ghrust> 13rust/06auto 147da1d66 15Alex Crichton: rustdoc: Implement cross-crate searching...
[17:27:34] <ghrust> 13rust/06auto 143208dbe 15bors: auto merge of #12946 : alexcrichton/rust/discover, r=huonw...
[17:27:34] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[17:28:21] *** Quits: edwardw (edwardw@FC63E399.AB331A3B.FAED9FFC.IP) (Ping timeout)
[17:29:07] <cmr> acrichto: android builder is bouncing everything
[17:29:10] <cmr> http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t/builds/1721/steps/shell/logs/stdio
[17:32:14] <acrichto> cmr: indeed
[17:37:58] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[17:40:35] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[17:40:45] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[17:40:45] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/a6u8dg
[17:40:45] <ghrust> 13rust/06auto 146a7306f 15Alex Crichton: test: Fix android tests...
[17:40:45] <ghrust> 13rust/06auto 1420e4547 15bors: auto merge of #12994 : alexcrichton/rust/fix-android, r=huonw...
[17:40:45] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[17:40:47] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[17:40:47] <ghrust> [13rust] 15bors 04force-pushed 06auto from 143208dbe to 14af93684: 02http://git.io/N3iJvQ
[17:40:47] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[17:44:42] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[17:44:42] *** ChanServ sets mode: +qo brson brson
[17:47:27] <eddyb> error: aborting due to 68 previous errors // fun time
[17:47:43] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[17:53:12] *** flaper87 is now known as flaper87|afk
[17:55:17] *** Joins: edwardw (edwardw@3570A9BA.4E6A4251.FAED9FFC.IP)
[18:01:02] *** Joins: sunfish (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:02:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:05:06] <brson> Bors queue: 71
[18:05:16] <brson> there's a lot going on
[18:05:40] <acrichto> hopefull this next one will land
[18:06:16] *** Quits: japaric (japaric@508B8F57.E321A207.5C7588CA.IP) (Ping timeout)
[18:07:20] <eddyb> brson: why is snaplinux still down :(?
[18:07:24] <eddyb> *snap-linux
[18:07:32] *** Joins: japaric (japaric@7433ECC4.8FD1E798.5C7588CA.IP)
[18:07:55] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:08:04] <brson> eddyb: not sure yet. all the mountain view vms disappeared in the move
[18:08:26] <eddyb> oh
[18:08:49] *** Joins: MaXYZW (MaXYZW@moz-386AA7F6.fullrate.dk)
[18:09:38] <cmr> brson: well that and bors has been bouncing everything
[18:12:35] *** Quits: eibwen (kvirc@moz-25FA2E23.dip0.t-ipconnect.de) (Ping timeout)
[18:13:13] *** Joins: dherman (dherman@moz-24157589.mtv2.mozilla.com)
[18:13:13] *** ChanServ sets mode: +ao dherman dherman
[18:13:30] *** Quits: dherman (dherman@moz-24157589.mtv2.mozilla.com) (Quit: dherman)
[18:14:03] <erickt> brson / acrichto: I got a question / comment about https://github.com/mozilla/rust/pull/12936. I made an experimental fork of Encodable/Decodable that produced and consumed a Stream of tagged values. I think I mentioned this to you back then. I got it initially working, but it seemed to be about 10-20% slower than what we've got now. I bring it up in relation to #12936 because it would allow us to have one decoder that can produce a
[18:14:29] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Client exited)
[18:16:27] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[18:18:00] *** Quits: sunfish (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Client exited)
[18:18:36] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Input/output error)
[18:18:46] *** Joins: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:20:10] *** Joins: dherman (dherman@moz-62518563.mtv2.mozilla.com)
[18:20:10] *** ChanServ sets mode: +ao dherman dherman
[18:20:26] <erickt> brson / acrichto: I'm planning on reviving it as an RFC, but I'm not sure if there's much I can do about that performance overhead. llvm is just really good at inlining methods, and my stream approach needs to perform a match on every value
[18:20:55] <cmr> erickt: your first message was truncated at "that can produce a"
[18:21:09] <acrichto> erickt: interesting! sounds like we should hold off on merging that PR
[18:21:14] * erickt shakes fist at irc
[18:21:32] <erickt> for a replay: brson / acrichto: I got a question / comment about https://github.com/mozilla/rust/pull/12936. I made an experimental fork of Encodable/Decodable that produced and consumed a Stream of tagged values.
[18:21:37] <erickt> I think I mentioned this to you back then. I got it initially working, but it seemed to be about 10-20% slower than what we've got now.
[18:21:41] <erickt> I bring it up in relation to #12936 because it would allow us to have one decoder that can produce a Json object, or a #[deriving(Decodable)]-ed type
[18:22:09] <acrichto> interesting!
[18:22:15] <acrichto> sounds like we should hold off on merging
[18:22:54] <erickt> acrichto: the problem with the current encoding/decoding approach is that we cannot decode into a generic type like json::Json.
[18:23:41] <acrichto> can't you implement Decodable<JsonDecoder>?
[18:25:56] <erickt> no, because there's no way to ask the writer "what's the type of the next value?"
[18:27:22] <erickt> `#[deriving(Decodable)] struct Foo { x: int }` is basically saying "give me an object (or fail) then give me a field named `x` or fail, give me an integer or fail, close the object`
[18:27:42] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[18:27:42] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1420e4547 to 14af93684: 02http://git.io/N3iJvQ
[18:27:42] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[18:28:13] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[18:28:56] <erickt> to handle Json, you'd need to write `is the next type an object, parse an object, or parse a list, or ...`
[18:29:36] <erickt> I think our current decoder is LL(0) and we'd need at least LL(1) for json::Json
[18:30:23] <acrichto> hm
[18:31:32] *** Quits: dherman (dherman@moz-62518563.mtv2.mozilla.com) (Quit: dherman)
[18:31:47] <eddyb> hah, removed all mention of ValueRef from reflect
[18:31:59] * eddyb is tempted to make "val" private
[18:34:55] <eddyb> r? https://github.com/mozilla/rust/pull/13004
[18:35:01] <eddyb> this is what I wasted two days on
[18:35:25] <eddyb> oh, wait, I forgot to check Pods
[18:35:33] <eddyb> (and it needs more doc comments in datum)
[18:35:47] <eddyb> at least it's still a negative diff
[18:36:16] <eddyb> I might keep going, now that I have the type, I'd like to use it more
[18:39:11] <eddyb> huon: bbl, I expect a hundred nits in an hour (more than one per minute? geez I'm pretentious)
[18:39:12] <erickt> acrichto: a small part of me is considering making a macro that can generate a NFA to drive decoding :)
[18:47:10] <cmr> acrichto: ping
[18:50:41] <erickt> acrichto: however... now that I think about it, if you do `impl Decodable<JsonDecoder> for Json { ... }` we can cheat and use a private api exposed by JsonDecoder
[18:50:49] <cmr> acrichto: isn't https://github.com/mozilla/rust/blob/master/src/libstd/rt/task.rs#L357 totally bogus?
[18:52:32] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[18:52:32] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1464a525f to 14af93684: 02http://git.io/N3iJvQ
[18:52:32] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[18:52:32] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[18:52:32] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/UCa8LA
[18:52:32] <ghrust> 13rust/06auto 146a7306f 15Alex Crichton: test: Fix android tests...
[18:52:32] <ghrust> 13rust/06auto 14891eab9 15bors: auto merge of #12994 : alexcrichton/rust/fix-android, r=huonw...
[18:52:33] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[18:53:13] <erickt> acrichto: that wouldn't allow us to decode into artitrary generic enums, but we could do it in specific cases. It'd also let us do the fast thing for #[deriving(Decodable)]
[18:53:53] *** Quits: MaXYZW (MaXYZW@moz-386AA7F6.fullrate.dk) (Quit: Computer has gone to sleep.)
[18:55:31] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[18:56:54] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[18:59:33] *** Joins: eibwen (kvirc@moz-25FA2E23.dip0.t-ipconnect.de)
[18:59:51] *** flaper87|afk is now known as flaper87
[19:05:07] <cmr> fn get_global_ptr() -> *mut Option<~~[~[u8]]>
[19:05:12] <cmr> that right there is one hell of a signature
[19:09:30] *** Joins: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com)
[19:09:30] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:21:08] <edwardw> nmatsakis: ping
[19:21:16] <nmatsakis> edwardw: pong
[19:21:56] <edwardw> from variance inference POV, is there anything special about "pub struct S<T> { next: Option<~S<T>> }" ?
[19:22:11] <edwardw> I have trouble with this: https://github.com/mozilla/rust/blob/master/src/libarena/lib.rs#L389
[19:22:12] <nmatsakis> you mean because it is recursive?
[19:22:19] <edwardw> yes
[19:22:22] <nmatsakis> no, not particularly, that's why we use a fixed pont algorithm
[19:22:36] <nmatsakis> what trouble?
[19:22:38] <nmatsakis> also,
[19:22:52] <nmatsakis> I was thinking I'd like to see a version of your patch that doesn't change the inference algorithm in any way (beyond bug fixes)
[19:22:55] <edwardw> It can't pass typeck, saying "cannot determine a type for this expression: unconstrained type"
[19:22:59] <nmatsakis> is that what you're working on?
[19:23:13] <edwardw> yes I'm working on it
[19:23:39] <nmatsakis> ok (just making sure)
[19:23:49] <edwardw> ok, I'll push a commit with bug fix only
[19:23:54] <nmatsakis> regarding that particular case, does labeling the type of `start` help
[19:24:12] <nmatsakis> (in particular, I think that the current system is "coherent" -- we ought to be able to make it work -- and if that's not the case, that's something I want to know)
[19:24:19] <nmatsakis> it might not be the best choice of defaults etc
[19:24:21] <nmatsakis> but that's separate
[19:24:36] <edwardw> no, not really, it has trouble with `self`
[19:25:06] <nmatsakis> edwardw: ah, no doubt because it IS unconstrianed
[19:25:16] <nmatsakis> edwardw: you need to add a marker to TypedArenaChunk
[19:25:32] <nmatsakis> edwardw: this *is* an interesting case for my RFC though, since T is "used", but not in a meaningful way
[19:25:41] <nmatsakis> I hadn't thought about cycles, bah.
[19:25:50] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:25:51] *** Quits: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[19:25:54] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[19:26:10] <edwardw> this is covariant, isn't it?
[19:26:11] <nmatsakis> I would think a CovariantMarker would be correct
[19:26:18] <edwardw> ok
[19:26:26] <nmatsakis> we only ever give out &T, I think?
[19:26:53] <edwardw> either ~self or *u8
[19:28:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:32:44] <nrc> ah, good timing - nmatsakis - I don't understand the covariant default example from the RFC - I thought that because mutability is supplied from outside in Rust, we would always have to assume that all fields are mutable to be conservative and thus if `T` appears in a field's type we must assume `T` is invariant?
[19:37:22] *** Quits: gwty (gwtypc@36B896FC.BD82C0B5.645B845A.IP) (Ping timeout)
[19:40:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:41:56] <nmatsakis> nrc: the rule for (e.g.) &mut T is that &mut T1 <: &mut T2 iff T1 = T2
[19:42:23] <nmatsakis> basically the invariant part come about as part of the type that adds the mutability
[19:42:59] *** Joins: gwty (gwtypc@36B896FC.BD82C0B5.645B845A.IP)
[19:43:06] <nmatsakis> likewise, RefCell<T1> <: RefCell<T2> iff T1 = T2, because RefCell is invariant with respect to its type parameter -- this (right now) is because of a marker, but I would like to change that to happen because Unsafe<T> (the only legal to get interior mutability) is just known to be invariant with respect to T (just for convenience)
[19:43:11] <nrc> So the variance inference algorithm infers variance per type, not per struct/trait
[19:43:14] <nrc> ?
[19:43:19] <nmatsakis> No
[19:43:28] <nmatsakis> It infers the variance of each type parameter with respect to its containing trait
[19:43:31] <nmatsakis> or struct
[19:43:33] <nmatsakis> or other nominal type :)
[19:43:44] <nmatsakis> But the subtyping rules for &mut are as I showed
[19:44:10] <nmatsakis> (And the variance algorithm does consider that, i.e., it knows that in `&mut T`, T appears in an invariant context)
[19:44:20] <nrc> Oh, so it is more like the variance inference assumes immutability, and if the type is mutable, then we ignore the variance?
[19:44:51] <nmatsakis> basically yes 
[19:45:52] <nmatsakis> just because T1 <: T2, does not mean that &mut T1 <: &mut T2
[19:45:57] <nmatsakis> though &T1 <: T2
[19:46:01] <nmatsakis> * &T1 <: &T2
[19:46:27] <nmatsakis> you can think of it as:
[19:46:38] <nmatsakis> the T in '&mut T' is invariant with respect to &mut
[19:46:43] <nmatsakis> or whatever :)
[19:46:51] <nmatsakis> I always forget if one writes "the parameter is invariant" or "the containing type"
[19:47:05] <nmatsakis> &mut T is invariant with respect to T?
[19:48:22] <nrc> yeah, the last one :-)
[19:48:53] <strcat> brson: has https://github.com/mozilla/rust/pull/12772 been discussed at all?
[19:49:00] <strcat> I didn't realize it was controversial at all
[19:49:15] <strcat> not really fun solving 200 rebase conflicts
[19:50:04] <strcat> I want to move vec_ng to vec and then remove all of the duplication with slices
[19:50:25] <strcat> atm there's a steady stream of PRs adding more documentation, methods, tests, etc. that I'm just going to be removing ;\
[19:52:37] <nmatsakis> I thought we'd call it "array"?
[19:52:46] <nmatsakis> slice::from_fn() seems surprising to me
[19:52:52] <nmatsakis> but I guess I could live with it
[19:52:59] <cmr> you can't construct a slice like that
[19:53:02] <nmatsakis> still, array and vector seem to be the accepted terminology at this point
[19:53:09] <cmr> oh unless you mean owned slice
[19:53:19] <nmatsakis> this term "owned slice" is an oxymoron to me
[19:53:22] <strcat> nmatsakis: array in C++, D and Go means fixed-size array
[19:53:27] <nmatsakis> right
[19:53:30] <nmatsakis> that's what it would mean in Rust too
[19:53:37] <strcat> nmatsakis: fixed-size at compile-time*
[19:53:38] <nmatsakis> [T] --> array
[19:53:50] <cmr> to me, [T] or [T, ..N] is an array, &[T] is and ~[T] are slices, Vec is a vector(growable)
[19:53:51] <strcat> std::array<T, n> and T a[n] are the C++ arrays
[19:53:55] <strcat> Go and D also have fixed-size arrays
[19:53:58] <nmatsakis> what cmr said
[19:54:02] <strcat> Go calls dynamically sized ones slices
[19:54:09] <nmatsakis> strcat: T* is an array in C and C++ too :)
[19:54:11] <strcat> D calls heap-allocated ones slices
[19:54:15] <strcat> nmatsakis: well, only sort of
[19:54:19] <nmatsakis> also, Java
[19:54:23] <nmatsakis> somewhat more users than D
[19:54:43] <nmatsakis> anyway, I could live with it
[19:54:44] <strcat> nmatsakis: I would rather have it cleanly split into modules though
[19:54:54] <strcat> std::vec -> the Vec<T> type you can push to
[19:54:58] <strcat> std::slice -> methods on [T]
[19:55:05] <nmatsakis> yes sure, it's just that I would have called it std::array
[19:55:15] <strcat> I'm okay with that too
[19:55:15] <nmatsakis> and have slice be a term for "borrowed array"
[19:55:26] <strcat> I just want it moved out the way
[19:55:30] <strcat> out of*
[19:55:31] <nmatsakis> ok I see
[19:56:38] <strcat> well
[19:56:48] <strcat> maybe one day we'll have functionality available for just [T, ..n] though
[19:57:05] <edwardw> nmatsakis: besides bug fix, do you also want the type and self paramater substitution being turned on in the patch you asked?
[19:57:34] <nmatsakis> edwardw: I don't know what you mean "parameter substitution"
[19:57:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:57:51] <edwardw> self and type parameters
[19:58:01] <nmatsakis> strcat: (as I said, I'm not necessarily opposed to calling [T] a slice, just not necessarily what I expected)
[19:58:07] * strcat shrugs
[19:58:13] <strcat> I don't really care much either way
[19:58:15] <nmatsakis> in some sense it *is* a slice, i.e., Vec overallocates,
[19:58:18] <nmatsakis> and it's a subset of that
[19:58:24] <nmatsakis> (potentially)
[19:58:41] <nmatsakis> edwardw: do you mean, incorporating variance into the type checker?
[19:58:56] <edwardw> nmatsakis: yes
[19:59:03] <strcat> I don't really associate slice with a borrowed view
[19:59:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:59:48] <nmatsakis> edwardw: ok, yes I meant that too, ideally in separated commits :)
[19:59:52] <eddyb> /back
[20:00:00] <edwardw> gotcha
[20:00:03] <nmatsakis> strcat: I do, but I don't know why
[20:00:05] * eddyb notices all the nmatsakis ever in the backlog
[20:00:23] <strcat> nmatsakis: I'm used to go's definition of it despite not using go
[20:00:35] * strcat shrugs ;p
[20:00:55] <nmatsakis> strcat: it's growing on me. array vs vec is a bit...subtle or something. I think I changed my mind :)
[20:01:29] <eddyb> strcat has that power on people :P
[20:01:33] <nmatsakis> and maybe it's useful to use array *just* for fixed-length arrays
[20:01:56] <eddyb> https://travis-ci.org/mozilla/rust/jobs/21039235 welp I screwed up
[20:01:59] <strcat> nmatsakis: imo fixed-size array is too long for people to actually say it, so they'll just say array
[20:02:18] <strcat> seems more natural to go along with that and say array ([T, ..n]), slice ([T]) and vector
[20:02:19] <eddyb> AddrSpaceCast source must be a pointer
[20:02:29] <eddyb> strcat: do we emit AddrSpaceCast o_O?
[20:02:32] <cmr> why are we touching addrspaces again
[20:02:39] <strcat> although it wouldn't be the end of the world to use the same term for [T, ..n] and [T] and just disambiguate with 'fixed-size' when necessary
[20:02:53] <strcat> eddyb: we used to emit that stuff
[20:02:58] <strcat> for some reason @ was in an address space
[20:03:00] <strcat> don't ask me why
[20:03:01] <eddyb> LOL
[20:03:07] <eddyb> but.... not in my repo
[20:03:08] <nmatsakis> GC 
[20:03:14] <nmatsakis> that is, rooting
[20:03:18] <strcat> but afaik address spaces are totally implementation defined ;p
[20:03:21] <strcat> by the backends
[20:03:21] <eddyb> so, what, LLVM does it for PointerCast?
[20:03:27] * nmatsakis shrugs
[20:03:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:03:32] <nmatsakis> just saying why
[20:04:14] <eddyb> so, I broke something to do with pointers in https://github.com/mozilla/rust/pull/13004
[20:04:21] <eddyb> maybe used ptr cast instead of bit cast
[20:04:36] <eddyb> but can someone take a look over it while I sleep?
[20:04:55] <eddyb> nmatsakis: I have some ideas about merging the DPS/Datum stuff
[20:06:01] <cmr> Are there any lints that run in trans these days?
[20:06:13] <cmr> I don't want to have to do the rejiggering to enable that :(
[20:06:32] <eddyb> nmatsakis: similar to what you did with the datum kinds: 3 types, SaveIn(Datum<Lvalue>) impl Trait<()>, Ignore impl Trait<()>, ImmResult impl Trait<Datum<Rvalue>>
[20:06:39] <eddyb> no idea what to call Trait yet
[20:07:20] <eddyb> nmatsakis: trans_expr (and not middle::ty_ decides which one to use depending on the resulting type
[20:07:26] <eddyb> s/_/)
[20:08:03] <nmatsakis> eddyb: I on't quit get it but I consider Ignore an abomination
[20:08:16] <nmatsakis> maybe I would consider it less so if it were nicer packaged
[20:08:34] <strcat> reminds me of tuple unpacking in C++
[20:08:36] * strcat shudders
[20:08:46] <eddyb> nmatsakis: and they would have ADT operations implemented, like constructing a value (for ImmResult), accessing a field (via extractvalue or GEPi) etc.
[20:08:48] <nmatsakis> as it is, I don't understand why we don't just generate (and drop, if needed) a result. Using ignore seems like it's at best an overoptimization and at worst violating language semantics in ways that are not clear to me
[20:09:13] <eddyb> nmatsakis: oh, yeah, with this change, Ignore wouldn't be handled directly
[20:09:47] <strcat> git says I need to handle conflicts in a file where it put no merge markers ;\
[20:09:48] <nmatsakis> I think I see what you're aiming at, it sounds plausible, I guess I'd want to see how it works out,
[20:09:48] <eddyb> I guess I could conflate ImmResult and Ignore and call drop if required
[20:09:55] <nmatsakis> I agree current setup is not optimal
[20:10:23] <eddyb> we currently have no way of producing {i8 0, i8 0} from (0u8, 0u8)
[20:10:35] <nmatsakis> eddyb: specifically my concern with ignore is that the more branches we have, the more change we have of doing it wrong...
[20:10:43] <eddyb> or {i8 1, i8 0} from Some(0)
[20:10:44] <nmatsakis> e.g., not calling a destructor we're supposed to call,
[20:10:46] <nmatsakis> or calling it at the wrong time
[20:10:53] <strcat> nmatsakis: I still prefer 'unique' to 'owned' anyway ;P
[20:11:10] <nmatsakis> so any code that does something like "match dest { Ignore => /* fast path */, Some(addr) => /* full path */ }"
[20:11:12] <eddyb> nmatsakis: what I said earlier, you wouldn't have to handle it everywhere, just call the generic method
[20:11:13] * cmr prefers "owning"
[20:11:14] <nmatsakis> is asking for trouble
[20:11:33] <eddyb> ok, I gtg. good night and have fun (snapshot pls)
[20:11:35] <nmatsakis> eddyb: right, so I'm thinking that this might be ok, as long sa we could convince ourselves the generic method is doing the right thing
[20:12:02] <nmatsakis> eddyb: but it still seems like premature optimizaiton to me unless you have some specific place it'd be important :)
[20:13:15] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:21:14] *** Quits: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com) (Quit: pcwalton)
[20:24:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:25:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:27:14] <edwardw> nmatsakis: the commits have been pushed as promised: https://github.com/mozilla/rust/pull/12828
[20:27:17] *** flaper87 is now known as flaper87|afk
[20:27:20] <nmatsakis> edwardw: ah great
[20:27:33] <nmatsakis> edwardw: let me check that out and do a local build
[20:27:38] <edwardw> ok
[20:28:04] <edwardw> certain crates won't compile, all is in the commit message
[20:28:12] *** Joins: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com)
[20:28:12] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:29:06] *** Joins: dherman (dherman@moz-62518563.mtv2.mozilla.com)
[20:29:06] *** ChanServ sets mode: +ao dherman dherman
[20:29:47] *** flaper87|afk is now known as flaper87
[20:39:23] *** flaper87 is now known as flaper87|afk
[20:41:47] *** Quits: edwardw (edwardw@3570A9BA.4E6A4251.FAED9FFC.IP) (Quit: Leaving...)
[20:51:12] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[20:51:12] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/UCa8LA
[20:51:12] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[20:52:06] <carter> huon: something about simd?
[20:53:25] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[20:58:43] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[20:58:43] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/zVwqBg
[20:58:43] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[20:58:49] *** Quits: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com) (Quit: pcwalton)
[21:00:12] <cmr> acrichto: can we get RUST_BACKTRACE=1 and RUST_LOG=4 on the mac builders?
[21:00:15] <cmr> http://buildbot.rust-lang.org/builders/auto-mac-64-nopt-c/builds/3827/steps/compile/logs/stdio
[21:05:07] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[21:05:08] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[21:05:12] <acrichto> perhaps, not rust log though
[21:05:15] <acrichto> we don't want debug spray
[21:07:30] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[21:07:30] <ghrust> [13rust] 15bors 04force-pushed 06auto from 146ca126b to 14891eab9: 02http://git.io/N3iJvQ
[21:07:30] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[21:07:33] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[21:07:33] <ghrust> [13rust] 15bors pushed 22 new commits to 06auto: 02http://git.io/6q1Kzg
[21:07:33] <ghrust> 13rust/06auto 141f4c630 15Jorge Aparicio: Make method Vec::remove() public
[21:07:33] <ghrust> 13rust/06auto 141607871 15Corey Richardson: rustc: disallow duplicate methods in trait impls...
[21:07:33] <ghrust> 13rust/06auto 14f9e0baa 15Corey Richardson: remove duplicate methods in impls
[21:07:35] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[21:09:56] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:26:43] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:30:56] <fredy> is there a way to run a trait implemented method of an extern crate? I have tried this example but I get some errors http://pastebin.mozilla.org/4623192 thx (and sorry for the crossposting in #rust)
[21:33:18] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[21:34:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:35:04] <sfackler> fredy: you need to "use mystruct::MyTrait;"
[21:35:16] <ChrisMorgan> fredy: #rust is the better channel for such questions
[21:35:28] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:37:55] <fredy> thx sfackler, ChrisMorgan ok I'll have it in mind, sorry
[21:38:32] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:46:06] *** Joins: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com)
[21:46:06] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:47:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:56:56] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[22:01:18] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:03:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:03:56] <cmr> acrichto: I meant RUST_LOG=1, sorry.
[22:04:06] <cmr> acrichto: it'd probably never complete if we actually used RUST_LOG=4!
[22:04:36] <acrichto> ah yeah
[22:04:39] <acrichto> we'd have to be careful
[22:04:46] <acrichto> we don't want RUST_BAKCTRACE=1 during tests
[22:05:01] <cmr> that's true
[22:11:55] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[22:21:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:23:30] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[22:24:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:25:17] <kimundi> r? https://github.com/mozilla/rust/pull/13008
[22:25:24] <kimundi> (tiny one)
[22:26:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:28:10] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[22:30:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:33:36] *** Quits: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com) (Quit: pcwalton)
[22:39:13] <nrc> hmm, should we feature gate DST?
[22:40:49] <cmr> I don't really see why we should, given that they're built-in types.
[22:40:51] <cmr> and so useful
[22:42:09] <brson> acrichto: we might try launching some new ec2 bots using "c3" instances, which are supposed to have the fastest CPU's. right now we're using "m3.xlarge" which is an older model CPU
[22:42:22] <brson> right now I'm experimenting with moving bors into EC2
[22:43:53] <acrichto> brson: interesting, for just windows or everything?
[22:44:41] <brson> at least windows. could let us discard the two dedicated windows machines we're using now
[22:44:57] <brson> maybe linux too
[22:45:02] *** Quits: gimpf (gimpf@moz-DB86CEB0.adsl.highway.telekom.at) (Ping timeout)
[22:45:12] <brson> maybe these are fast enough for us to finally get off all our dedicated hardware
[22:45:51] <cmr> is ec2 cheaper than our own hardware? or are there other concerns?
[22:47:53] <acrichto> brson: hm, there don't seem to be stats about the cpus on ec2 pages
[22:47:59] <acrichto> I may be looking in the wrong place though
[22:48:49] <brson> cmr: no, it's very expensive. maintaining physical machines is unpleasant though
[22:49:57] <strcat> cmr: the only way to use it cheaply is using only spot instances
[22:50:08] <strcat> cmr: but then you aren't going to have *any* machines at peak times
[22:50:10] * cmr didn't even know spot instances were cheap
[22:50:40] <strcat> aichallenge was run on spot instances, because it just needed daily throughput
[22:52:48] *** Quits: dherman (dherman@moz-62518563.mtv2.mozilla.com) (Quit: dherman)
[22:53:36] <huon> carter: aatch was/is planning to write up an RFC about simd
[22:54:20] <aatch> I am, in fact, writing it up now
[22:58:28] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[23:05:26] *** Joins: gimpf (gimpf@moz-DB86CEB0.adsl.highway.telekom.at)
[23:06:04] <brson> rebooting rust-mac5
[23:07:27] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[23:07:27] <ghrust> [13rust] 15bors pushed 22 new commits to 06auto: 02http://git.io/a3Vlnw
[23:07:28] <ghrust> 13rust/06auto 141f4c630 15Jorge Aparicio: Make method Vec::remove() public
[23:07:28] <ghrust> 13rust/06auto 141607871 15Corey Richardson: rustc: disallow duplicate methods in trait impls...
[23:07:28] <ghrust> 13rust/06auto 14f9e0baa 15Corey Richardson: remove duplicate methods in impls
[23:07:30] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[23:08:42] <cmr> ohh rollup
[23:08:50] <cmr> with breaking changes
[23:08:53] <cmr> so fun for twir :(
[23:09:25] <nrc> how do I get the str representation of a keyword?
[23:13:04] <acrichto> brson: rust-cron and such were assigned static ips yesterday?
[23:13:35] <huon> nrc: doesn't it have an ident that you can use with the normal interner?
[23:13:46] <huon> (um, token::get_str or something?)
[23:13:47] <brson> acrichto: yes
[23:14:05] <acrichto> brson: have you tried renewing the DHCP lease recnetly?
[23:14:19] <brson> acrichto: i just tried renewing and rebooting mac5
[23:14:21] <brson> no dice
[23:14:25] <acrichto> aww
[23:14:36] <acrichto> I got a static IP yesterday for another machine and that was what they recommended
[23:15:59] <nrc> huon: oh right, I see - to_ident and then get_ident
[23:16:56] <brson> you know, it looks like a one line change to start spinning up beefier ec2 instances
[23:18:50] <acrichto> brson: nice!
[23:20:03] <brson> maybe i should shut all the existing instances down and just start using the fastest we can get
[23:20:06] <brson> for science
[23:20:11] <huon> nrc: oh... I was close :)
[23:22:19] <acrichto> brson: maybe we could try running a snap through the ec2 machines?
[23:23:52] <brson> acrichto: we need a special (old) linux image to do snaps
[23:23:57] <brson> i could try to set that up
[23:24:26] <acrichto> oh yeah
[23:24:39] <acrichto> forgot about that
[23:25:43] *** kimundi is now known as zz_kimundi
[23:27:47] *** zz_kimundi is now known as kimundi
[23:30:18] <brson> acrichto: actually, I'll just reconfigure buildbot, kill the windows instances and restart the build
[23:30:49] <acrichto> ok
[23:30:49] <brson> oh, that may still end up killing the other slaves
[23:30:59] <acrichto> buildbot reconfig shouldn't kill slaves
[23:31:30] <acrichto> although I rolled another PR into it
[23:31:39] <acrichto> thinking it was going to get restarted anyway
[23:31:43] <acrichto> so I'll just stop all slaves
[23:33:02] <brson> i just stopped all ec2 instances
[23:33:08] <brson> and buildbot is reconfigured
[23:33:14] <acrichto> and bors is ready to merge
[23:33:17] <acrichto> GO!
[23:33:18] <brson> so the next build should fire up fast instances
[23:33:26] <acrichto> supa fast
[23:33:45] <cmr> how fast, comparatively?
[23:33:46] <acrichto> bors takes so long to run right now
[23:33:51] <cmr> (or do we not know)
[23:33:51] <acrichto> processing 70 PRs takes forever
[23:34:06] <cmr> http://huonw.github.io/isrustfastyet/buildbot/
[23:34:07] <brson> i'm pretty sure we have a problem GCing old ec2 instances and we're just throwing away money on vms that aren't working
[23:34:11] <cmr> windows exploded, somehow
[23:34:36] <acrichto> cmr: during the move in MTV win1 and win2 got turned off
[23:34:43] <cmr> ohhh
[23:34:45] <acrichto> tests have been running on win3 and win4 which are VMs that are much slower
[23:36:00] <cmr> mm
[23:36:06] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[23:36:06] <ghrust> [13rust] 15bors 04force-pushed 06auto from 148b89e22 to 14891eab9: 02http://git.io/N3iJvQ
[23:36:06] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[23:45:17] <acrichto> brson: well the macs came back online
[23:45:32] <acrichto> http://buildbot.rust-lang.org/buildslaves
[23:45:39] <acrichto> everything else is dead :(
[23:45:42] <cmr> hahah
[23:46:11] *** Joins: rook (rook@moz-97AF7010.hsd1.mn.comcast.net)
[23:46:17] <huon> looks like we're just gating on mac now :P
[23:46:26] <cmr> What version of linux do you use? Ubuntu 12.04?
[23:46:33] <huon> who needs other platforms anyway?
[23:46:34] <acrichto> I think yeah
[23:46:44] <acrichto> well we were gating on everything but osx for the weekend
[23:46:49] <acrichto> so it only makes sense that we're only gating on osx now
[23:46:54] * cmr trying to pick a compatible VM for his phabricator experiment
[23:47:10] <acrichto> zomg phabricator
[23:47:14] <acrichto> I <3 phabricator
[23:47:21] <cmr> btw I don't want it to use it for rfcs
[23:47:21] <acrichto> but sadly it's "one more thing" :(
[23:47:24] <cmr> just code review
[23:47:37] <sfackler> gerrit is also worth checking out for code review
[23:47:41] <sfackler> it's really nice imo
[23:47:47] <acrichto> I have heard good things about gerrit
[23:47:51] <strcat> but can you use gerrit properly with github?
[23:47:53] <acrichto> a group used it in OS once
[23:48:08] <strcat> one of the great things about gerrit is that your pull request lives in the main repo
[23:48:20] <strcat> no silly github workflow with an extra remote clone
[23:48:57] <sfackler> I'm not sure if it would be integratable (is that a word?) with github in a reasonable way
[23:49:10] *** Joins: pcwalton (pcwalton@moz-24157589.mtv2.mozilla.com)
[23:49:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:49:22] <sfackler> but at least it has reasonable tracking of changes to commits
[23:49:33] <sfackler> and side by side diffs!
[23:50:53] <strcat> yeah
[23:51:10] <strcat> sfackler: at the cost of putting identifiers in the commit messages though to track them during rebases
[23:54:35] <sfackler> yeah. that part's pretty painless if you install the commit hook
[23:58:56] *** Quits: eibwen (kvirc@moz-25FA2E23.dip0.t-ipconnect.de) (Ping timeout)
[23:59:29] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
