[00:00:28] *** Joins: eholk_ (eholk@7A812DBD.48D4C455.51B6877.IP)
[00:00:49] <eibwen> is 1.0 going to be the next version, or will we have 0.10?
[00:01:01] *** Quits: eholk_ (eholk@7A812DBD.48D4C455.51B6877.IP) (Quit: eholk_)
[00:01:08] <mcpherrin> eibwen: there will surely be an 0.10
[00:01:27] <mcpherrin> unless everybody goes full tilt for the next few weeks I guess
[00:02:04] *** Joins: bmats_ (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[00:02:04] *** Quits: bmats (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Connection reset by peer)
[00:02:31] *** tabraldes_ is now known as TimAbraldes
[00:02:50] *** Quits: bmats_ (bmats@moz-87F0A991.hfc.comcastbusiness.net) (Quit: Leaving...)
[00:02:51] *** jorendorff is now known as jorendorff_away
[00:07:04] *** flaper87 is now known as flaper87|afk
[00:07:41] *** Joins: mib_v389gr (Mibbit@575DAA11.D682D0E2.FBF658BF.IP)
[00:07:42] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[00:08:26] *** Quits: mib_v389gr (Mibbit@575DAA11.D682D0E2.FBF658BF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:08:27] *** Quits: LuckyTiger888 (Mibbit@moz-3F964EEC.hsd1.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:08:38] *** Quits: eibwen (kvirc@moz-90347E5.dip0.t-ipconnect.de) (Ping timeout)
[00:09:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:11:31] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[00:12:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:12:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:13:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:14:01] <eddyb> andor: sorry. look for MutableVector methods instead
[00:14:04] <olsonjeffery> anyone able to help me troubleshoot this error? https://gist.github.com/olsonjeffery/8609548
[00:14:07] <olsonjeffery> thanks in advance..
[00:14:25] <andor> eddyb: yeah, already figured it out, as_mut_ptr()
[00:14:46] <brson> olsonjeffery: did your next story get published yet?
[00:14:46] <olsonjeffery> pretty obnoxious.. can't see how/why it's unconstrained.. the caller isn't parameterized, and agent satisfies the agentcon straints..
[00:15:00] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:15:14] <andor> eddyb: another problem i have now, which i guess isn't going to have an easy solution is that i'm doing std::str::raw::from_c_str(namebuf.as_ptr()), and this sometimes blows up, because invalid unicode codepoint :\
[00:15:23] <olsonjeffery> brson: we held off until monday based on some of the feedback and revisions i did (a few people mentioned the lack of error handling)
[00:15:31] <eddyb> olsonjeffery: is Agent a generic type param?
[00:15:32] <olsonjeffery> so i did a brief disucssion of conditions
[00:15:39] *** Joins: eholk_ (eholk@7A812DBD.48D4C455.51B6877.IP)
[00:15:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:15:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:16:09] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[00:16:28] <olsonjeffery> eddy: no it's an actual type. is that not possible?
[00:16:33] <olsonjeffery> that function itself isn't parameterized at all
[00:16:51] <olsonjeffery> it's a concrete type that satisffies the onstraints on World<T>'s impl
[00:16:58] <eddyb> olsonjeffery: the error would make much more sense if Agent were a generic param
[00:17:14] <eddyb> andor: you can call set_len on the original ~[T]
[00:17:51] <eddyb> olsonjeffery: maybe it's D and E
[00:17:55] <olsonjeffery> well if i have to i can parameterize that function with the same constraints as World<T>, but i just wanted to avoid that exploding code
[00:17:59] *** Joins: dbaupp (Thunderbir@moz-68C83524.lns20.syd6.internode.on.net)
[00:18:03] <olsonjeffery> hm.
[00:18:18] <andor> eddyb: yeah, but it doesn't really matter, from_c_str doesn't take a [T], it takes *c_char, and looks for \0, and doesn't use the (non-existent) len
[00:18:22] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[00:18:38] <olsonjeffery> yeah i wish those traits weren't themselves parameterized.. it makes things weird (Encodable/Decodable)
[00:18:39] <eddyb> andor: but that will make a copy
[00:18:42] <olsonjeffery> when using them as constraints
[00:18:50] <eddyb> olsonjeffery: do you need them as constraints?
[00:18:56] <andor> eddyb: what will? and of what?
[00:19:09] <olsonjeffery> eddyb: yeah.. i want World<T> to satisfy #[deriving(Encodable, Decodable)]
[00:19:10] <eddyb> andor: from_c_str will copy the entire buffer AFAIK
[00:19:16] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[00:19:22] <olsonjeffery> which means that all their contents must satisfy that, as well
[00:19:25] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:19:25] <olsonjeffery> include the T
[00:19:28] <eddyb> olsonjeffery: in new_zone, do you actually use encodable/decodable stuff?
[00:19:35] <olsonjeffery> no it's totally exterior
[00:19:43] <eddyb> olsonjeffery: then don't bound it :P
[00:19:54] <olsonjeffery> the bound is placed on the impl
[00:20:11] <andor> eddyb: http://static.rust-lang.org/doc/master/std/str/raw/fn.from_c_str.html it doesn't really specify how it operates, maybe i should look into the source
[00:20:12] <eddyb> olsonjeffery: which is just an implicit bound on each of the methods
[00:20:22] <eddyb> andor: does it return ~str?
[00:20:35] <olsonjeffery> eddyb: ah. yeah. good point.
[00:20:47] <andor> eddyb: yup
[00:20:52] <eddyb> andor: then it copies
[00:20:53] *** Quits: derek_c (derek@moz-E25AC88D.cit.cornell.edu) (Ping timeout)
[00:21:01] <eddyb> andor: because ~str has to be a new allocation
[00:21:05] <olsonjeffery> considering that i just wrote a post on params/bounds, its amusing that this was lost on me
[00:21:39] <andor> eddyb: well okay, but i don't really understand how that'll solve my invalid codepoint problem
[00:21:57] <eddyb> andor: not sure it would. can you dump the bytes?
[00:22:19] <andor> i'll try
[00:22:25] <eddyb> andor: it's easier, btw, if you have a length, instead of searching for a '\0'
[00:23:11] <eddyb> olsonjeffery: you can have multiple impl's for the same type, with different bounds, btw
[00:23:21] * olsonjeffery nods
[00:23:21] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[00:23:32] <olsonjeffery> im curious how this will fall out for the deriving stuff.
[00:23:39] <olsonjeffery> i really would like to know the root of the compiler's complaint here
[00:23:52] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[00:23:53] <eddyb> olsonjeffery: it can't have actual types for D and E
[00:23:54] *** Joins: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net)
[00:24:06] <eddyb> olsonjeffery: because nothing needs actual types
[00:24:22] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:24:31] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[00:24:32] <olsonjeffery> yeah im only supply D and E so that i do TPayload: Decodable<D>
[00:24:38] * olsonjeffery shrugs
[00:24:48] <olsonjeffery> because i want to be able to serialize the struct
[00:24:48] <eddyb> olsonjeffery: a simpler example would be fn foo<T>(){}
[00:24:55] <eddyb> rusti: fn foo<T>(){}
[00:24:56] <olsonjeffery> and it's parameterized
[00:24:58] -rusti- pastebinned 10 lines of output: http://ix.io/a6Y
[00:25:18] <eddyb> lol, what's with the ICE?
[00:25:22] <eddyb> rusti: fn foo<T>(){} foo();
[00:25:23] -rusti- <anon>:10:23: 10:26 error: cannot determine a type for this expression: unconstrained type
[00:25:23] -rusti- <anon>:10         fn foo<T>(){} foo();
[00:25:23] -rusti-                                 ^~~
[00:25:23] -rusti- error: aborting due to previous error
[00:25:23] -rusti- application terminated with error code 101
[00:25:43] <eddyb> olsonjeffery: you need D/E when you actually *do* serialize/deserialize the struct
[00:26:11] <olsonjeffery> yes
[00:26:14] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[00:26:16] <olsonjeffery> i also need them to place the bounds
[00:26:16] *** Quits: nightpool (nightpool@moz-7CAAC068.wi.res.rr.com) (Ping timeout)
[00:26:24] <olsonjeffery> you can't do T: Encodable + Decodable
[00:26:31] <olsonjeffery> because those traits, themselves, are actually parameterized
[00:26:32] <eddyb> olsonjeffery: you only need the bounds when you actually *do* serialize/deserialize the struct
[00:26:46] <olsonjeffery> unlike doing #[deriving(Encodable)]
[00:27:06] <eddyb> olsonjeffery: if you don't need bounds to ensure the safety of wrapped unsafe code, don't add them
[00:27:09] <olsonjeffery> eddyb: i wonder if that'll get in tthe way of putting the deriving on World<T>
[00:27:24] <olsonjeffery> ill need the bound in new(), for example
[00:27:33] <eddyb> olsonjeffery: why?
[00:27:51] <eddyb> when you start using methods from traits on type params, *then* add bounds
[00:28:01] <olsonjeffery> fair enough.
[00:28:02] <eddyb> olsonjeffery: generic structures don't have bounds
[00:28:11] <olsonjeffery> well see what hppens
[00:28:38] <olsonjeffery> i wonder how the fact that it has a T on it wil be enforced wrt deriving
[00:28:46] *** Joins: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au)
[00:29:03] <olsonjeffery> you can't derive unless all fields satisfy the trait you're deriving
[00:29:09] <olsonjeffery> in any event, ill find out soon enough
[00:29:14] <eddyb> pretty sure #[deriving(Default)] struct Foo<T>(T); does impl<T: Default> Foo<T> {fn default() -> Foo<T> {Foo(Default::default())}}
[00:29:16] <olsonjeffery> this was a good discussion, thanks
[00:29:39] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[00:29:53] <eddyb> rusti: #[deriving(Default)] struct Foo<T>(T);
[00:29:56] -rusti- pastebinned 10 lines of output: http://ix.io/a6Z
[00:30:25] <eddyb> rusti: #[deriving(Default)] struct Foo<T>(T); let x: Foo<Option<uint>> = Default::default(); x
[00:30:26] -rusti- <anon>:10:75: 10:91 error: failed to find an implementation of trait std::default::Default for main::Foo<std::option::Option<uint>>
[00:30:26] -rusti- <anon>:10         #[deriving(Default)] struct Foo<T>(T); let x: Foo<Option<uint>> = Default::default(); x
[00:30:26] -rusti-                                                                                     ^~~~~~~~~~~~~~~~
[00:30:26] -rusti- application terminated with error code 101
[00:30:40] <eddyb> (deriving must still be broken in rusti)
[00:31:12] <eddyb> rustilite: #[deriving(Default)] struct Foo<T>(T); fn main() {let x: Foo<Option<uint>> = Default::default(); println!("{:?}", x);}
[00:31:13] -rustilite- Foo<std::option::Option<uint>>(None)
[00:31:27] <sfackler> deriving doesn't work on things defined inside of a function for some dumb reason
[00:32:00] <eddyb> rustilite: #[deriving(Default)] struct Foo<T>(T); struct Bar; fn main() {let x: Foo<Bar> = Default::default(); println!("{:?}", x);}
[00:32:01] -rustilite- <anon>:1:81: 1:97 error: failed to find an implementation of trait std::default::Default for Bar
[00:32:01] -rustilite- <anon>:1 #[deriving(Default)] struct Foo<T>(T); struct Bar; fn main() {let x: Foo<Bar> = Default::default(); println!("{:?}", x);}
[00:32:01] -rustilite-                                                                                          ^~~~~~~~~~~~~~~~
[00:32:01] -rustilite- application terminated with error code 101
[00:32:34] <eddyb> olsonjeffery: ^^ proof that the impl's generated by deriving are bounded
[00:32:41] <eddyb> rustilite: #[deriving(Default)] struct Foo<T>(T); struct Bar; fn main() {let x: Foo<&Bar> = Default::default(); println!("{:?}", x);}
[00:32:41] -rustilite- <anon>:1:82: 1:98 error: failed to find an implementation of trait std::default::Default for &Bar
[00:32:42] -rustilite- <anon>:1 #[deriving(Default)] struct Foo<T>(T); struct Bar; fn main() {let x: Foo<&Bar> = Default::default(); println!("{:?}", x);}
[00:32:42] -rustilite-                                                                                           ^~~~~~~~~~~~~~~~
[00:32:42] -rustilite- application terminated with error code 101
[00:32:55] <eddyb> rustilite: #[deriving(Default)] struct Foo<T>(&T); struct Bar; fn main() {let x: Foo<Bar> = Default::default(); println!("{:?}", x);}
[00:32:56] -rustilite- <anon>:1:36: 1:38 error: missing lifetime specifier
[00:32:56] -rustilite- <anon>:1 #[deriving(Default)] struct Foo<T>(&T); struct Bar; fn main() {let x: Foo<Bar> = Default::default(); println!("{:?}", x);}
[00:32:56] -rustilite-                                             ^~
[00:32:56] -rustilite- error: aborting due to previous error
[00:32:56] -rustilite- application terminated with error code 101
[00:33:18] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:33:19] <eddyb> rustilite: #[deriving(Default)] struct Foo<'a, T>(&'a T); struct Bar; fn main() {let x: Foo<Option<uint>> = Default::default(); println!("{:?}", x);}
[00:33:21] -rustilite- pastebinned 6 lines of output: http://ix.io/a70
[00:33:24] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:34:08] <eddyb> olsonjeffery: it's not very smart, but it still works
[00:34:31] <eddyb> rustilite: #[deriving(Default)] struct Foo<T>(Option<~T>); struct Bar; fn main() {let x: Foo<Bar> = Default::default(); println!("{:?}", x);}
[00:34:31] -rustilite- <anon>:1:90: 1:106 error: failed to find an implementation of trait std::default::Default for Bar
[00:34:31] -rustilite- <anon>:1 #[deriving(Default)] struct Foo<T>(Option<~T>); struct Bar; fn main() {let x: Foo<Bar> = Default::default(); println!("{:?}", x);}
[00:34:31] -rustilite-                                                                                                   ^~~~~~~~~~~~~~~~
[00:34:32] -rustilite- application terminated with error code 101
[00:34:38] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[00:34:49] <eddyb> olsonjeffery: and here's an example where it fails :) ^^
[00:35:00] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:35:08] <eddyb> though I'm not sure you can bound Option<~T> instead of T
[00:37:20] *** Quits: icebattle (wayne@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Quit: leaving)
[00:38:03] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[00:38:22] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[00:38:33] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:38:53] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:40:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:40:55] *** Joins: derek_c (derek@moz-CE6E60A5.cit.cornell.edu)
[00:40:59] *** kimundi is now known as zz_kimundi
[00:41:33] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:41:43] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[00:42:28] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[00:42:32] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[00:43:52] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:44:32] <pcwalton> acrichto: how do I check to see if I'm on a green thread?
[00:44:35] <pcwalton> (yes I have to do this) :)
[00:44:56] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[00:46:26] <acrichto> pcwalton: maybe_take_runtime
[00:46:33] <pcwalton> ok
[00:46:44] <acrichto> with the mutexes it's can_block
[00:46:47] <acrichto> but that hasn't landed yet
[00:47:22] *** Quits: amir (amir@moz-49060BB9.cust.bluewin.ch) (Ping timeout)
[00:47:51] *** Joins: korenchkin (Mibbit@moz-27CA5815.pools.arcor-ip.net)
[00:48:49] *** Quits: int3_ (int3_@85A5E4ED.1820E79E.4C66E0CE.IP) (Client exited)
[00:50:49] *** Joins: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu)
[00:50:54] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[00:53:00] *** Quits: korenchkin (Mibbit@moz-27CA5815.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:54:34] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[00:56:48] *** Quits: Kjelle (karl@moz-58495553.static.spa.siw.siwnet.net) (Quit: )
[00:57:31] <photex> I'm having trouble understanding what I need to do in order to use a captured value when using spawn. I get this error for several variables:  this closure's environment must satisfy `Send`
[00:58:00] <photex> another error is: capture of moved value
[00:58:38] <photex> for that moved value in particular I don't want to clone it because it's huge
[00:58:58] <photex> it's an immutable ~[~[f64]]
[00:59:46] *** Parts: gp5st1 (jim@moz-14388241.hsd1.pa.comcast.net) ()
[01:00:43] <bvssvni> photex: have you tried proc?
[01:01:01] *** Joins: canhtak (canhtak@moz-94ED4C91.wl.t.ulaval.ca)
[01:01:06] <photex> bvssvni: I haven't heard of proc yet
[01:01:29] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:02:28] <bvssvni> photex: closures and procs got different environment
[01:03:06] <bvssvni> photex: procs can be sent between tasks
[01:03:20] <bvssvni> photex: closures can be used on the same stack
[01:03:37] <bvssvni> photex: the notation for proc is a bit different
[01:03:46] <bvssvni> photex: proc (args) {body}
[01:03:59] <WebeWizard> how do i turn off the unnecessary parenthesis warnings?
[01:07:41] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[01:08:02] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[01:08:48] *** Joins: Jessin (Jesin@moz-C1EBF9B4.dept.lehigh.edu)
[01:09:14] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[01:09:43] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[01:10:36] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:12:16] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[01:13:32] <photex> bvssvni: searching for 'proc' in the docs doesn't turn anything up
[01:13:56] <photex> are there some examples that you can think of off the top of your head
[01:14:00] <photex> so I can see this in context?
[01:16:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:17:05] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Quit: Leaving.)
[01:17:15] *** Quits: Jessin (Jesin@moz-C1EBF9B4.dept.lehigh.edu) (Quit: Leaving)
[01:17:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:18:01] <bvssvni> rusti: let x = proc {1+1}; (x)()
[01:18:01] -rusti- <anon>:10:22: 10:23 error: expected `(` but found `{`
[01:18:01] -rusti- <anon>:10         let x = proc {1+1}; (x)()
[01:18:01] -rusti-                                ^
[01:18:01] -rusti- application terminated with error code 101
[01:18:17] <bvssvni> rusti: let x = proc() {1+1}; (x)()
[01:18:18] -rusti- 2
[01:18:58] <bvssvni> rusti: fn two() -> proc() -> int {1+1}; (two())()
[01:18:59] -rusti- <anon>:10:36: 10:39 error: mismatched types: expected `proc:Send() -> int` but found `<generic integer #0>` (expected fn but found integral variable)
[01:18:59] -rusti- <anon>:10         fn two() -> proc() -> int {1+1}; (two())()
[01:18:59] -rusti-                                              ^~~
[01:19:00] -rusti- error: aborting due to previous error
[01:19:00] -rusti- application terminated with error code 101
[01:19:45] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[01:19:47] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[01:19:53] <bvssvni> rusti: fn two() -> proc() -> int {proc() {1+1}}; (two())()
[01:19:53] -rusti- 2
[01:20:15] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[01:20:38] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[01:20:39] <bvssvni> photex: I have not used procs between tasks yet, perhaps somebody else here can show you examples
[01:21:21] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[01:22:42] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[01:23:29] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:23:30] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[01:23:31] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:23:43] <brson> android bots are green again
[01:23:55] <photex> interesting, thanks bvssvni 
[01:24:34] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:24:56] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:26:00] <photex> hrm, same errors with proc
[01:26:14] <photex> "capture of moved value"
[01:26:33] <acrichto> brson: \o/
[01:26:36] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:26:50] <olsonjeffery> android bots, heh
[01:26:52] <bvssvni> photex: can you post some code at gist.github.com?
[01:28:26] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[01:29:13] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:31:41] <photex> bvssvni: yes: https://gist.github.com/photex/8610367
[01:32:44] <Jesin> hmm, is Rust expected to have a macro system?
[01:33:38] <bvssvni> Jesin: Rust does have a powerful, awesome macro system!
[01:33:56] <Jesin> ooh
[01:34:03] <wilson> https://github.com/mozilla/rust/blob/master/doc/guide-macros.md
[01:34:05] <Jesin> AST-based, not text-based, I hope?
[01:34:12] *** Joins: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP)
[01:34:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:34:21] *** Quits: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP) (Client exited)
[01:34:22] * Jesin reads wilson's link
[01:35:02] <bvssvni> photex: do you have the compiler error too?
[01:35:05] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[01:35:15] <wilson> I personally found that document tough going the first time I found it, but I haven't gotten good enough at rust to feel like I should contribute patches to it yet
[01:35:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:36:07] <photex> bvssvni: updated the gist with the output from rustc
[01:37:15] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Connection reset by peer)
[01:38:13] <Jesin> hmm... I only recently learned of rust and http://nimrod-lang.org/
[01:38:23] <bvssvni> photex: do you see 'frame_data' is used by all the tasks?
[01:39:01] <photex> because I'm spawning multiple times?
[01:39:07] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:39:18] <bvssvni> photex: yes
[01:39:26] <bvssvni> photex: maybe you can use a channel?
[01:39:27] <photex> how can I just capture a reference to frame_data and use that?
[01:39:33] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[01:39:41] *** Quits: alex__ (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[01:39:57] * photex understands closures from Common Lisp and Python
[01:40:06] <photex> it's a new ballgame in Rust
[01:40:26] <bvssvni> photex: wait, I think I misunderstood what you are doing :)
[01:41:34] <bvssvni> photex: I think the problem is calling the 'slice' function on 'frame_data'
[01:42:27] <photex> hrm, well I just noticed I mean to be doing frame_data[0].slice(...)
[01:42:49] <photex> each item in frame_data is another vector. that vector coresponds to a transform for a frame
[01:43:11] <photex> for each instance in sgxml_doc.instances I have an index into that vector
[01:43:30] <photex> in order to extract the transform (a 4x4 matrix) I was going to use slice
[01:43:40] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:44:00] *** Quits: derek_c (derek@moz-CE6E60A5.cit.cornell.edu) (Ping timeout)
[01:44:18] *** Quits: jadbaires (jadrian@C280A95C.A5C01502.6119BA41.IP) (Quit: Konversation terminated!)
[01:44:24] *** Joins: jadbaires (jadrian@C280A95C.A5C01502.6119BA41.IP)
[01:44:37] <photex> I'm fine just using something like: frame_data[frame][index+offset] to get those values out instead
[01:44:44] <seanmonstar> whats the difference between `fn foo<T:Foo>(f: ~T) {}` and `fn foo(t: ~Foo) {}`
[01:45:23] *** Quits: jadbaires (jadrian@C280A95C.A5C01502.6119BA41.IP) (Quit: Konversation terminated!)
[01:45:29] *** Joins: jadbaires (jadrian@moz-C4590B45.dsl.telepac.pt)
[01:45:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:46:24] <ChrisMorgan> seanmonstar: the first uses generics, which is static dispatch; the second a trait object, which is dynamic dispatch.
[01:46:45] <ChrisMorgan> The first is thus faster.
[01:47:23] <seanmonstar> interesting. but in both cases, the function can only ever take an impl of Foo?
[01:47:36] <seanmonstar> they're functionally equivalent, just one is faster?
[01:47:39] <ChrisMorgan> With generics, you can take just plain T as well as ~T, but with a trait object it must currently be a pointer form such as ~T
[01:49:36] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[01:49:51] *** Quits: blaenk (blaenk@moz-43A413B6.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[01:50:14] <seanmonstar> cool thanks. i'll have to break the urge to use the latter form
[01:51:26] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:52:50] <ChrisMorgan> Yes, generics should normally be preferred.
[01:53:22] <seanmonstar> i guess i made the mistake of thinking the latter is like using an interface argument in Java
[01:55:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:56:15] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:57:26] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:57:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:59:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:59:30] <photex> ok bvssvni I found extra::arc and it seems to do exactly what I wanted
[01:59:35] <photex> I updated the gist
[02:00:07] <photex> arc is not a name I would have immediately associated with what I was trying to do... I'll have to brush up on terminology
[02:00:08] *** Quits: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net) (Quit: Leaving)
[02:00:26] <veddan> seanmonstar: the latter is much like taking an interface argument in Java
[02:01:08] <seanmonstar> veddan: well sure, but in Java, you don't shy away from it
[02:01:56] <seanmonstar> photex: atomic reference counting?
[02:02:41] <photex> seanmonstar: I've never seen it abbreviated anywhere I guess
[02:02:52] <photex> never thought to look for the acronym
[02:03:12] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[02:03:15] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[02:03:20] <seanmonstar> if you don't need to share between tasks, theres std::rc
[02:03:20] <photex> that isn't even what I really wanted to do... I'm still getting to grips with Rust (this is like day 3 of actually trying haha)
[02:03:26] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[02:03:31] <bvssvni> photex: I have observed lot of Rust is named after how it is implemented, not by the use
[02:03:45] <photex> that is a good tip bvssvni 
[02:03:47] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:03:48] *** Joins: derek_c (derek@moz-CE6E60A5.cit.cornell.edu)
[02:04:41] <photex> for my test case here, I have to load a lot of data into memory
[02:04:50] <photex> I don't want to copy that into every task
[02:04:51] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[02:05:06] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[02:05:10] <photex> writing this serially isn't a big deal. I'm trying to become adept at concurrency
[02:05:29] <bvssvni> photex: are you sure that the data is copied and not the reference counter only?
[02:05:30] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[02:06:18] <photex> bvssvni: I have no idea. But isn't calling clone copying the data?
[02:06:21] <bvssvni> photex: the clone() method is not a deep cloning algorithm
[02:06:35] <photex> ok so that just gives me a new pointer/reference?
[02:06:41] <bvssvni> photex: was demonstrated this yesterday on borrowed pointers :D
[02:07:03] <photex> I thought that cloning a ~ was like a move
[02:07:12] * photex hears the bwamp bwamp trumpet
[02:07:16] <SiegeLord> Is it possible to receive literals such as [[1, 2], [3, 4]] as a function argument (with variable number of dimensions each way)?
[02:07:53] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[02:08:13] <bvssvni> rusti: println!("{:?}", [[1, 2], [3, 4]])
[02:08:14] -rusti- [[1, 2], [3, 4]]
[02:08:14] -rusti- ()
[02:08:24] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[02:08:28] <bvssvni> rusti: println!("{}", [[1, 2], [3, 4]])
[02:08:33] -rusti- pastebinned 8 lines of output: http://ix.io/a72
[02:08:34] <photex> wow I'm so dumb
[02:08:41] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:08:54] <bvssvni> SiegeLord: I believe the type is [[int]]
[02:09:12] <bvssvni> SigeLord: perhaps [[int, ..2]]
[02:09:13] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[02:09:50] <photex> the arc version seems faster...
[02:09:55] <photex> bah, ok, time to go home!
[02:10:08] <bvssvni> photex: yeah!
[02:10:08] <photex> ttyl, thanks for the help bvssvni 
[02:10:32] <SiegeLord> bvssvni: [int] isn't a type atm
[02:10:33] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:11:07] <bvssvni> SiegeLord: well, then it can't have variable number of dimensions
[02:11:19] <bvssvni> SiegeLord: because vec require same types of all elements
[02:11:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:11:50] <bvssvni> SiegeLord: perhaps [&[int]] ?
[02:12:02] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:12:51] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[02:13:05] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[02:13:29] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[02:13:31] <SiegeLord> I managed to get it to work with &[&[int]] and literals like [&[1, 2], &[3, 4]]
[02:13:39] <seanmonstar> the duplicated code in extra::json makes me sad. theres no sort of default methods on traits or some such?
[02:13:44] *** Joins: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu)
[02:13:58] <SiegeLord> Not sure why it's not auto-slicing, but w/e
[02:14:23] <dbaupp> seanmonstar: there is default methods
[02:14:59] <seanmonstar> dbaupp: or, rather, defining methods for a base impl, and then reusing that impl?
[02:15:53] <dbaupp> seanmonstar: are you talking about the duplication between Encoder and PrettyEncoder?
[02:15:58] <seanmonstar> yea
[02:16:20] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:16:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:16:47] <dbaupp> yeah, the best way to dedeup that is probably with a macro
[02:16:57] <dbaupp> but i imagine it might be tricky
[02:17:39] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[02:18:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:18:39] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:18:43] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[02:18:46] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:19:32] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[02:20:23] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[02:21:47] *** Quits: Addle (quassel@moz-67A92E8A.cable.teksavvy.com) (Ping timeout)
[02:21:57] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: leaving)
[02:23:09] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:23:59] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[02:25:12] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[02:25:34] *** Quits: onelson (onelson@moz-DD666EC5.laika.com) (Quit: Leaving.)
[02:25:43] *** Quits: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Lost terminal)
[02:27:38] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[02:29:14] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[02:29:20] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Ping timeout)
[02:30:45] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[02:33:19] *** Quits: eholk_ (eholk@7A812DBD.48D4C455.51B6877.IP) (Quit: eholk_)
[02:35:14] <SiegeLord> What would I match a symbol with in a macro?
[02:35:25] <SiegeLord> like macro!(+)
[02:35:35] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[02:36:11] <dbaupp> SiegeLord: tt
[02:37:05] *** Quits: pyon (user@5D202184.695050F8.E6392873.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[02:37:12] <dbaupp> rusti: macro_rules! expr ( ($e: expr) => { $e } ) macro_rules! op ( ($op: tt) => { expr!(2 $op 3) } } (op!(+), op!(*), op!(-))
[02:37:14] -rusti- pastebinned 7 lines of output: http://ix.io/a73
[02:37:23] <dbaupp> rusti: macro_rules! expr ( ($e: expr) => { $e } ) macro_rules! op ( ($op: tt) => { expr!(2 $op 3) } ) (op!(+), op!(*), op!(-))
[02:37:25] -rusti- (5, 6, -1)
[02:38:33] <dbaupp> (the "silly" expr macro is just to allow the substitution of $op)
[02:38:56] *** Quits: Jesin (Jesin@moz-C1EBF9B4.dept.lehigh.edu) (Quit: Leaving)
[02:39:15] <_achin> rust used to have a 'float' type.  what has that turned in to?
[02:39:24] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[02:39:57] <dbaupp> _achin: the direct equivalent is f64
[02:40:07] <dbaupp> but f32 and f64 are the only two floating point types now
[02:40:13] <_achin> thanks
[02:40:28] <_achin> i'm trying to reproduce some old bugs, and many of them use the float type
[02:41:05] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[02:42:59] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:43:13] <bjz> does this look like a bug to you? https://gist.github.com/bjz/28ff6acc655233ac3e07
[02:43:19] <bjz> OHH
[02:43:21] <bjz> woops
[02:43:29] <dbaupp> bjz: nope :P
[02:43:30] <bjz> `+` not `,`
[02:46:03] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[02:46:19] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[02:48:05] *** Quits: derek_c (derek@moz-CE6E60A5.cit.cornell.edu) (Ping timeout)
[02:48:42] <SiegeLord> dbaupp: Is it obvious why that exor macro is needed?
[02:48:44] <SiegeLord> *expr
[02:48:55] <SiegeLord> Or how it works?
[02:50:09] <dbaupp> SiegeLord: i'm busy right now, but I'll answer in a bit
[02:50:16] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[02:51:09] <SiegeLord> k, it's not urgent
[02:51:14] <SiegeLord> Just curious
[02:53:36] <bvssvni> SiegeLord: saw your post on reddit, is cmake building makefiles?
[02:54:25] <SiegeLord> I tried Makefiles and ninja stuff
[02:54:35] <SiegeLord> Didn't try any of the IDE project files (that's a bit silly)
[02:54:49] <skrylar> Ninjabuild is nice, but its important to remember that its really meant to be output by another tool.
[02:55:00] <SiegeLord> Well, CMake is that tool ;)
[02:55:24] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:57:14] <bvssvni> SiegeLord: sorry, was mistaken you for another :P
[02:57:27] <bvssvni> SiegeLord: what happens with the brain nowdays
[02:58:13] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[02:58:15] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:58:28] *** Quits: gwty (gwtypc@223388BD.59B7E344.137C914F.IP) (Ping timeout)
[02:59:36] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:59:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:00:54] *** Quits: jadbaires (jadrian@moz-C4590B45.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:00:56] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[03:01:00] *** Joins: jadbaires (jadrian@moz-C4590B45.dsl.telepac.pt)
[03:01:05] <bvssvni> SiegeLord: what kind of output does gnuplot give?
[03:01:28] <bvssvni> SiegeLord: looking at your repo
[03:02:35] <dbaupp> SiegeLord: the reason is tts are currently not supported by the "main" parser, so you can't substitute them directly (i.e. `=> { 2 $op 3 }` ) doesn't work), you can only pass them to another macro invocation... but such a macro invocation can parse it's argument as something else and tt's will be handled fine by that
[03:02:44] <dbaupp> so it's just hack to get around that limitation
[03:02:49] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:02:58] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:03:12] <SiegeLord> bvssvni: It has a wxWidgets GUI, and sometimes I use it to output pdf's and png's via cairo
[03:03:14] *** Quits: jadbaires (jadrian@moz-C4590B45.dsl.telepac.pt) (Client exited)
[03:03:22] <SiegeLord> *via it's cairo backend
[03:03:30] <SiegeLord> *its
[03:03:43] <bvssvni> SiegeLord: nice
[03:06:10] <SiegeLord> Oh I see what Reddit post you're talking about it... he's not quite using my macros correctly :/
[03:06:18] <SiegeLord> I must have documented them badly >_<
[03:07:20] <bvssvni> SiegeLord: it must be in the source I read your name
[03:08:32] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[03:10:24] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[03:11:31] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[03:11:33] <bvssvni> SiegeLord: ah, I get a 'multiple match for extra' when compiling rustgnuplot
[03:11:55] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[03:12:05] <bvssvni> SiegeLord: got this error before, wonder what it is
[03:12:08] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:12:49] <SiegeLord> I generally clean out the rustlib directory
[03:12:58] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:13:02] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:13:23] <bvssvni> SiegeLord: where is rustlib located?
[03:13:39] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[03:13:43] <SiegeLord> Hold, on broke my weechat
[03:13:49] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[03:14:21] <SiegeLord> Ok, better now
[03:14:32] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:14:36] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[03:15:02] <SiegeLord> I clean out this directory: /usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/
[03:15:12] <SiegeLord> And then make install Rust again
[03:15:32] <bvssvni> SiegeLord: good idea
[03:16:13] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[03:16:53] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:17:11] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:18:10] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[03:18:31] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[03:18:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:18:49] *** Joins: gwty (gwtypc@223388BD.59B7E344.137C914F.IP)
[03:19:04] <dbaupp> bvssvni: https://github.com/mozilla/rust/pull/11786 ?
[03:20:06] <bvssvni> dbaupp: my fault, I was trying to update my fork to master
[03:20:28] <dbaupp> bvssvni: ah
[03:21:02] <dbaupp> um.... isn't that just `git pull --ff-only upstream master` in your checkout's master branch?
[03:21:31] *** Quits: gwty (gwtypc@223388BD.59B7E344.137C914F.IP) (Ping timeout)
[03:21:33] <bvssvni> dbaupp: thanks
[03:22:05] <_achin> (followed by a `git push fork master` to update the copy on github)
[03:24:15] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:26:37] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[03:27:33] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[03:27:47] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[03:28:06] <ercxx> why does the Path::from_str() returns an Option but Path::new() returns a Path ?
[03:28:44] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[03:29:00] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[03:29:49] *** Quits: nfroidure (nfroidure@moz-5B08EA47.w90-18.abo.wanadoo.fr) (Ping timeout)
[03:30:55] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[03:31:35] *** Quits: skrylar (skrylar@moz-F692F728.austin.res.rr.com) (Quit: leaving)
[03:32:04] <dbaupp> ercxx: because from_str is a trait that is defined to return Option
[03:32:12] <dbaupp> *is from a trait
[03:32:33] *** Joins: skrylar (skrylar@moz-F692F728.austin.res.rr.com)
[03:33:27] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:33:35] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[03:34:43] *** Quits: zz_kimundi (kimundi@moz-D234AB83.dip0.t-ipconnect.de) (Ping timeout)
[03:37:04] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[03:37:54] <SiegeLord> I wonder if it's possible to go from a macro!(a, b, c) to a permutation of all those arguments (e.g. generate a + a, a + b, a + c, b + a, b + b, ...)
[03:38:21] *** Joins: zz_kimundi (kimundi@moz-B18493E2.dip0.t-ipconnect.de)
[03:38:32] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[03:38:33] <bvssvni> SiegeLord: can macroes emulate precedence (like a+b*c or a*b+c)
[03:38:48] <SiegeLord> I don't know
[03:38:50] *** zz_kimundi is now known as kimundi
[03:38:58] <dbaupp> bvssvni: what do you mean by that?
[03:39:23] <bvssvni> dbaupp: how binary operators are evaluated
[03:39:34] <dbaupp> yeah, I got that
[03:39:45] <dbaupp> what does "emulate precedence" mean
[03:39:56] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[03:40:00] <newguy> hi
[03:40:12] <newguy> i have a question about splitting strings in rust
[03:40:22] <newguy> can anyone help?
[03:40:26] <dbaupp> say you had `multiply!($e) => 2 * $e`, then multiply!(1 + 2)` will expand to the equivalent of 2 * (1 + 2)
[03:40:29] <dbaupp> newguy: yes
[03:40:32] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:40:41] <dbaupp> newguy: (don't ask to ask a question, just ask it :) )
[03:40:43] <bvssvni> dbaupp: whether macroes can output a*b+c into add(mul(a, b), c)
[03:41:05] <newguy> k thanks. so basically i want to split a string on spaces.
[03:41:15] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[03:41:16] <dbaupp> bvssvni: if you write it correctly, but it's probably very hard to write a macro_rules!() one that does it in general
[03:41:22] <newguy> im a java programmer. and im very new to rust.
[03:41:25] *** Quits: Earnestly (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[03:41:44] <dbaupp> bvssvni: (i.e. you'll only be able to handle a subset of expressions, others just won't parse)
[03:42:12] <dbaupp> newguy: string.split(' ') will give you an iterator over the splits
[03:42:25] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[03:42:38] <dbaupp> rusti: for s in "foo bar baz".split(' ') { print!("'{}' ", s); }
[03:42:40] -rusti- 'foo' 'bar' 'baz' ()
[03:42:48] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[03:43:00] <newguy> thanks! i'll try it out now
[03:43:05] <mcpherrin> rusti: let x: ~[&str] = "hi newguy".split(' ').collect(); println!("{:?}", x)
[03:43:06] -rusti- ~["hi", "newguy"]
[03:43:06] -rusti- ()
[03:43:36] * dbaupp encourages the use of the iterator directly, rather than collecting into a vector, where possible
[03:43:50] <TheHydroImpulse> What's the best way to iterate characters from a string? Not sure which Iterator type to use
[03:44:03] <dbaupp> TheHydroImpulse: .chars()
[03:44:18] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Quit: e)
[03:44:31] <dbaupp> (however, note that that is unnormalised unicode codepoints, not visible graphemes)
[03:44:33] *** Joins: nfroidure (nfroidure@moz-93494C89.w90-18.abo.wanadoo.fr)
[03:44:48] <mcpherrin> dbaupp: of course using the vector directly is best
[03:45:01] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[03:45:24] <dbaupp> mcpherrin: s/vector/iterator/?
[03:45:30] <mcpherrin> dbaupp: yes
[03:45:46] <newguy> Thank you dbaupp and rusti!
[03:46:08] <newguy> im working on creating a web server. thanks for the help. making progress. 
[03:46:15] <newguy> btw how often are you guys on IRC?
[03:46:15] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[03:46:56] <mcpherrin> newguy: If you haven't seen, rust-http is a library that has an http server.  I don't mean to dissuade you from writing your own of course, but you may find it useful or instructive
[03:46:59] <mcpherrin> https://github.com/chris-morgan/rust-http
[03:47:08] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[03:47:28] <newguy> mcpherrin: thanks! i'll check it out
[03:48:21] <TheHydroImpulse> dbaupp What type does .chars() return? I can't find that method in the docs
[03:48:57] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[03:48:57] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[03:49:18] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[03:49:21] <dbaupp> TheHydroImpulse: do you know that the docs have a search bar at the top?
[03:49:36] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[03:50:30] <mcpherrin> http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.chars
[03:50:59] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[03:51:04] <mcpherrin> so it returns a http://static.rust-lang.org/doc/master/std/str/struct.Chars.html
[03:51:07] <TheHydroImpulse> dbaupp Yes, searching for "chars" doesn't return anything. mcpherrin thanks. 
[03:51:19] <dbaupp> TheHydroImpulse: it does for me
[03:51:20] <dbaupp> weird
[03:51:42] <mcpherrin> and calling next() on that (as when you're iterating) returns Option<char>
[03:52:01] <TheHydroImpulse> dbaupp Yeah, the search is a bit buggy sometimes.
[03:52:22] <dbaupp> TheHydroImpulse: I see http://i.imgur.com/ZvWtlmF.png
[03:52:34] <dbaupp> on this page: http://static.rust-lang.org/doc/master/std/index.html?search=chars
[03:52:40] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[03:53:12] <TheHydroImpulse> It works now.
[03:53:14] <TheHydroImpulse> Thanks
[03:54:33] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[03:57:09] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[03:57:10] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[03:57:28] *** Joins: mcomella (mcomella@moz-AE370C8B.hsd1.ca.comcast.net)
[03:57:31] *** Parts: mcomella (mcomella@moz-AE370C8B.hsd1.ca.comcast.net) (Leaving)
[03:57:52] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[03:58:06] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[03:59:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:59:15] *** Quits: claudiu (claudiu@moz-F69B678E.thefacebook.com) (Input/output error)
[03:59:36] *** Joins: claudiu (claudiu@moz-F69B678E.thefacebook.com)
[04:00:33] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:00:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:01:16] *** Quits: claudiu (claudiu@moz-F69B678E.thefacebook.com) (Ping timeout)
[04:01:55] <ercxx> rusti: "a b c\nd e f".lines().rev();
[04:01:58] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[04:02:28] <ercxx> rusti: let x = "a b c\nd e f".lines().rev();
[04:02:30] -rusti- pastebinned 10 lines of output: http://ix.io/a7b
[04:02:44] <ercxx> rusti: "a b c\nd e f".lines().rev();
[04:02:46] <dbaupp> ercxx: I don't think rusti has updated
[04:02:47] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[04:02:51] <dbaupp> so it's .invert()
[04:03:07] <ercxx> rusti: "a b c\nd e f".lines().invert();
[04:03:08] -rusti- <anon>:10:9: 10:41 error: type `std::str::CharSplits<,char>` does not implement any method in scope named `invert`
[04:03:08] -rusti- <anon>:10         "a b c\nd e f".lines().invert();
[04:03:08] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[04:03:08] -rusti- error: aborting due to previous error
[04:03:08] -rusti- application terminated with error code 101
[04:03:09] <dbaupp> (assuming that lines is actually a doubleendediterator)
[04:03:27] <dbaupp> Er, CharSplits
[04:03:43] <ercxx> it supposedly implements it
[04:04:08] <ercxx> but I get the same error with rev here.
[04:05:53] <ercxx> yeah I meant inert() works here :)
[04:05:59] <ercxx> invert()
[04:08:54] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[04:11:09] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:12:27] *** Quits: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[04:13:35] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[04:17:13] *** jorendorff_away is now known as jorendorff
[04:17:14] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:18:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:19:01] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[04:19:33] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:19:46] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[04:21:14] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[04:21:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:23:04] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[04:23:07] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:24:13] *** Joins: niceguyneil (Mibbit@moz-FE606886.nyc.res.rr.com)
[04:24:47] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[04:26:09] *** Quits: niceguyneil (Mibbit@moz-FE606886.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:26:41] <newguy> i cant seem to break out of an if statement
[04:26:44] <newguy> using break
[04:27:01] <newguy> the error is that the break is inside the closure
[04:27:47] *** Quits: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net) (Quit: WeeChat 0.4.2)
[04:28:15] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:28:22] <mcpherrin> You can't "break" from an "if" (in any language?)
[04:29:22] <mcpherrin> Or if I misunderstand, can you provide a code sample in a gist?
[04:29:26] <newguy> i'm sorry. it's late at night. i think it's time that i get some rest. but thanks for being patient
[04:29:33] <newguy> youre right
[04:29:37] <newguy> im just braindead
[04:29:45] <mcpherrin> it's late and I'm drunk so it's just as likely I'm wrong :-)
[04:29:53] <nate> what's the difference between "{}" and "{:?}" in format!
[04:30:03] <newguy> mcpherrin: ballmer peak
[04:30:20] <mcpherrin> nate: {:?} uses introspection to print out the value.  {} uses the Default formatting trait to do it
[04:31:29] <mcpherrin> rusti: print!("{:?} vs {}", "abc", "abc")
[04:31:30] -rusti- "abc" vs abc()
[04:31:47] <dbaupp> ({:?} should preferably only be used for debugging.)
[04:31:51] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:31:55] *** Joins: spott (spott@moz-703681CC.pools.spcsdns.net)
[04:32:00] *** Joins: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net)
[04:32:03] <mcpherrin> rusti: print!("{:?}" ~[(1,"hi")])
[04:32:03] -rusti- <anon>:10:9: 11:6 error: expected token: `,`
[04:32:03] -rusti- <anon>:10         print!("{:?}" ~[(1,"hi")])
[04:32:03] -rusti- <anon>:11     };
[04:32:04] -rusti- error: aborting due to previous error
[04:32:04] -rusti- application terminated with error code 101
[04:32:25] <mcpherrin> rusti: println!("{:?}", ~[(1,"hi")])
[04:32:26] -rusti- ~[(1, "hi")]
[04:32:26] -rusti- ()
[04:33:02] *** Joins: yuriks_ (yuriks@9E36DD42.4576F2C7.8E0C6B01.IP)
[04:33:11] <mcpherrin> {} wouldn't work here because that type doesn't have an impl of std::fmt::Default, but that would be annoying for trying to debug code
[04:33:19] *** Quits: yuriks (yuriks@DC0B30CB.1755AC6C.F6EE4B40.IP) (Ping timeout)
[04:33:39] <SiegeLord> Hmm... is macro_rules! just a one procedural macro?
[04:33:55] <SiegeLord> So we could create a new macro_rules if we wanted?
[04:34:02] <dbaupp> yes
[04:36:12] <dbaupp> (actually, it may not be possible to register new macros from a custom macro easily.)
[04:36:41] <nate> mcpherrin: ahhh ok that makes sense
[04:37:33] <nate> thanks!
[04:37:38] *** Joins: dherman (dherman@32D1164B.EE0ADED3.2C01E229.IP)
[04:37:38] *** ChanServ sets mode: +ao dherman dherman
[04:37:48] <mcpherrin> Note {:?} is also a lot slower
[04:39:04] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:39:06] *** Quits: yuriks_ (yuriks@9E36DD42.4576F2C7.8E0C6B01.IP) (Ping timeout)
[04:39:12] *** Quits: dherman (dherman@32D1164B.EE0ADED3.2C01E229.IP) (Quit: dherman)
[04:40:15] <nate> yeah that makes sense
[04:40:35] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:40:47] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:40:50] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[04:41:25] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[04:42:08] *** Joins: lkuper (lkuper@6FA5FA9.52E2F3EF.FBBA4BA2.IP)
[04:42:18] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:42:31] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[04:47:32] *** Joins: yuriks (yuriks@FE210417.B7C33B0B.748B6D8D.IP)
[04:49:19] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:49:28] *** Quits: yuriks (yuriks@FE210417.B7C33B0B.748B6D8D.IP) (Ping timeout)
[04:53:55] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:55:44] *** Quits: spott (spott@moz-703681CC.pools.spcsdns.net) (Client exited)
[04:57:50] *** jorendorff is now known as jorendorff_away
[04:58:06] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[04:58:44] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:59:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:00:25] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[05:01:27] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:02:06] *** Quits: lkuper (lkuper@6FA5FA9.52E2F3EF.FBBA4BA2.IP) (Quit: lkuper)
[05:05:23] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[05:06:29] *** Joins: lkuper (lkuper@6FA5FA9.52E2F3EF.FBBA4BA2.IP)
[05:07:03] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[05:08:23] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[05:12:03] *** Quits: Kxepal (Miranda@moz-98E14614.pppoe.mtu-net.ru) (Ping timeout)
[05:12:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:15:09] *** Joins: Kxepal (Miranda@moz-D046FA40.pppoe.mtu-net.ru)
[05:17:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:19:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:20:34] *** Quits: lennart (lennart@moz-DE70D6F.stanford.edu) (Ping timeout)
[05:21:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[05:23:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[05:24:32] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[05:24:35] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[05:25:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:25:38] *** Joins: Rui (rui@76AC059.672E3962.8368921A.IP)
[05:29:08] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[05:31:14] *** Quits: new_one (new_one@12F1C6D9.92B2BFC6.B3C0173E.IP) (Client exited)
[05:33:25] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[05:33:30] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:34:48] *** Joins: maxli1 (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[05:34:52] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[05:36:06] *** Joins: derek_c (derek@moz-E25AC88D.cit.cornell.edu)
[05:38:10] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[05:41:17] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[05:42:07] <sfackler> dbaupp: it's easy to make a procedural macro that creates macros. it just needs to return an MRDef value
[05:42:10] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[05:42:39] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[05:42:53] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[05:48:20] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[05:49:35] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Ping timeout)
[05:50:07] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[05:50:08] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[05:50:35] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[05:50:35] *** Quits: Rui (rui@76AC059.672E3962.8368921A.IP) (Quit: )
[05:50:47] *** Joins: Rui (rui@76AC059.672E3962.8368921A.IP)
[05:51:50] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[05:53:15] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[05:53:34] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[05:57:52] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[05:58:36] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:59:47] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[06:00:01] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[06:00:28] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:00:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:02:13] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:06:07] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[06:07:21] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[06:09:20] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[06:09:20] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Ping timeout)
[06:09:33] *** Quits: angdev (uid7041@moz-E77DEB21.irccloud.com) (Ping timeout)
[06:09:40] *** Joins: johanh (uid17185@moz-A42E5B7B.irccloud.com)
[06:09:41] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[06:09:58] *** Joins: angdev (uid7041@moz-E77DEB21.irccloud.com)
[06:13:04] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[06:15:01] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[06:17:28] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[06:17:53] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:18:53] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:19:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:21:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[06:22:53] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:23:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[06:23:14] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:23:35] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Quit: wilmoore)
[06:24:03] *** Joins: Jesin (Jesin@moz-A43618DF.res.lehigh.edu)
[06:25:01] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[06:25:33] *** Quits: Rui (rui@76AC059.672E3962.8368921A.IP) (Client exited)
[06:27:15] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[06:27:31] *** Joins: valenting (Thunderbir@A64FDE7E.7E118222.89C0DD0D.IP)
[06:29:23] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[06:29:35] *** Joins: hs (Mibbit@moz-37BB3344.singnet.com.sg)
[06:30:25] *** Quits: hs (Mibbit@moz-37BB3344.singnet.com.sg) (Quit: http://www.mibbit.com ajax IRC Client)
[06:33:50] *** Quits: valenting (Thunderbir@A64FDE7E.7E118222.89C0DD0D.IP) (Ping timeout)
[06:35:54] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[06:36:06] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[06:38:36] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:42:36] <pongad> When the compiler complains `unresolved enum variant, struct or const `OneElement`' that means I haven't declared the name OneElement right?
[06:42:46] <pongad> But...I did...and used it before. :D
[06:43:58] *** Quits: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu) (Ping timeout)
[06:44:58] <bjz> gist?
[06:45:17] *** Quits: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au) (Quit: kvanb)
[06:45:25] <bjz> pongad: ^
[06:45:45] <pongad> I created an enum MinMaxResult
[06:46:08] <pongad> It has NoElements, OneElement(T), and MinMax(T,T)
[06:46:32] <pongad> I created a function that returns a MinMaxResult, and apparently the compiler thinks that's ok
[06:46:40] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[06:47:13] <bjz> pongad: OneElement(T) is a type constructor
[06:47:16] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[06:47:31] <pongad> Wha?
[06:47:47] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[06:47:47] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[06:48:01] *** Joins: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu)
[06:48:12] <pongad> When I test, I try to match the return value to a MinMax(x,y), and the compiler complains MinMax doesn't exist
[06:48:22] <pongad> OneElement also doesn't exist
[06:48:35] <bjz> did you import each variant?
[06:48:50] <bjz> could you send a gist?
[06:48:54] *** Quits: maxli1 (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:49:19] <pongad> It's actually a part of a change I'm helping with in stdlib, one sec
[06:49:44] <pongad> https://github.com/pongad/rust/blob/master/src/libstd/iter.rs
[06:50:07] <pongad> MinMaxResult declared on 917
[06:50:29] <pongad> Compile fails on 3020
[06:52:38] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[06:53:09] <bjz> enum MinMaxResult<T>
[06:53:13] *** Joins: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au)
[06:53:13] <bjz> it's not public
[06:53:19] <bjz> pub enum MinMaxResult<T>
[06:53:42] <pongad> Holy spirits :D
[06:54:02] <pongad> Newbie mistake I guess?
[06:54:05] <bjz> nope
[06:54:10] <pongad> Thanks a ton bjz
[06:54:14] <bjz> just a programming mistaker
[06:54:31] <bjz> the error message could be improved - i dunno
[06:54:34] <bjz> but yeah
[06:54:47] <pongad> Can't remember the last time I did something like that
[06:55:01] <bjz> :)
[06:57:05] <pongad> The pub-ness of an impl is just the pub-ness of the type the impl is for right?
[06:58:01] <bjz> I think so
[06:58:13] <bjz> I find pub-ness abit wierd atm
[06:58:46] <pongad> Ahh
[06:58:58] <bjz> functions impled directly on types need `pub` in front to be used in different modules
[06:59:12] <bjz> trait functions don't need `pup`
[06:59:14] <bjz> hah
[06:59:25] <bjz> no, they don't need puppies
[06:59:29] <bjz> or `pub`
[06:59:34] <pongad> :D
[06:59:55] <pongad> makes sense
[07:00:10] <bjz> and then the is tis priv keyword that is only for struct fields
[07:00:35] <bjz> It's kind of wierd that there it is only used in one place
[07:00:56] <pongad> Emit warning when referring to an non-public type?
[07:01:01] <pongad> Not sure how well that will work
[07:01:16] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:01:31] *** Joins: valenting (Thunderbir@DCE0CA8A.A95316AD.89C0DD0D.IP)
[07:01:59] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:02:25] *** Quits: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au) (Quit: kvanb)
[07:02:58] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:05:14] *** Quits: valenting (Thunderbir@DCE0CA8A.A95316AD.89C0DD0D.IP) (Ping timeout)
[07:09:37] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:09:41] *** Quits: canhtak (canhtak@moz-94ED4C91.wl.t.ulaval.ca) (Quit: canhtak)
[07:10:17] *** Joins: valenting (Thunderbir@29282F17.7E118222.89C0DD0D.IP)
[07:10:28] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[07:13:52] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[07:15:06] <dbaupp> sfackler: oh, cool
[07:16:45] <wycats> is there a way to unquote in macros?
[07:16:58] <dbaupp> re warning on non-public types: https://github.com/mozilla/rust/pull/11773
[07:17:22] <dbaupp> wycats: macros aren't the directly same as quoting, so I'm not sure that makes sense...
[07:17:29] <dbaupp> macro_rules or procedural?
[07:17:34] <wycats> macro_rules
[07:17:46] <wycats> what I'm trying to do is create an ident composed of $foo, an _, and $bar
[07:17:56] <wycats> in a macro_rules
[07:18:00] <dbaupp> ah, concat_idents! kinda does what you want
[07:18:04] <dbaupp> but won't acutally work
[07:18:07] <wycats> dbaupp: but how do I use it
[07:18:07] <wycats> ha
[07:18:11] <dbaupp> ... there isn't a way to do it atm
[07:18:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:18:26] <wycats> yay!
[07:18:31] <wycats> what's a procedural macro?
[07:18:37] <dbaupp> (concat_idents!($foo, $bar) would work, if foo and bar are `ident`, but no way to put a _ in there)
[07:18:47] <dbaupp> macros written in Rust that generate an AST
[07:18:53] <dbaupp> like format!() etc.
[07:18:56] <wycats> isn't _ an ident?
[07:18:58] <wycats> a legal ident?
[07:19:00] <dbaupp> they're not done with macro_rules!()
[07:19:03] <dbaupp> nope, _ is a pattern
[07:19:11] <wycats> fuuuu
[07:19:11] <dbaupp> can't call a variable _ ever
[07:19:18] <dbaupp> (similar to haskell)
[07:19:34] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[07:19:37] <wycats> dbaupp: sgb
[07:19:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:20:14] <dbaupp> wycats: 'sgb'?
[07:20:19] <wycats> seems good bro
[07:20:28] <dbaupp> hah
[07:21:15] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:21:20] <wycats> dbaupp: heh
[07:21:30] <wycats> dbaupp: I guess I'll hold off on the more ambitious macro
[07:21:34] <wycats> and stick with something simpler :P
[07:21:53] <dbaupp> you can be less DRY and just pass in the manually joined $foo_$bar ident
[07:23:04] <wycats> yep
[07:23:06] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[07:23:10] <wycats> dbaupp: I'm working on an FFI macro
[07:23:20] <wycats> https://gist.github.com/wycats/187734023aa19a55bf76
[07:23:26] <wycats> https://gist.github.com/wycats/187734023aa19a55bf76#file-lib-rs-L60
[07:23:40] <wycats> if you scroll down you'll see that we mostly abstracted the inside bits
[07:23:46] <wycats> now I want to generate the signature
[07:24:10] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[07:24:27] *** Quits: madmoose (Hat@moz-E1973371.nerp.net) (Ping timeout)
[07:24:28] <wycats> but I was hoping for the coup de gras: ffi!(skylight); ffi_fn!(hello_new, version: &str, config: u32, { ... })
[07:24:31] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[07:24:33] <wycats> oh well :P
[07:24:35] *** Joins: madmoose (Hat@moz-E1973371.nerp.net)
[07:24:36] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[07:24:37] <JustAPerson> Anyone know of a good description of rust's lifetime specifiers? There's not much in the tutorial or manual about them.
[07:24:43] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[07:24:45] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[07:24:45] <wycats> JustAPerson: so the basic idea is this:
[07:24:50] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[07:24:50] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:24:51] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[07:25:02] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Ping timeout)
[07:25:07] <wycats> let's say you have a struct like this: struct Person { name: ~str }
[07:25:16] <wycats> and I have a borrowed &Person
[07:25:25] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[07:25:37] <dbaupp> JustAPerson: there's http://static.rust-lang.org/doc/master/guide-lifetimes.html too
[07:25:38] <wycats> and I want to write a function that takes a borrowed &Person and returns its name borrowed
[07:25:43] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[07:25:48] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[07:26:10] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[07:26:12] <dbaupp> wycats: macros like that would be very slick
[07:26:14] <wycats> you need a way to indicate that the name is actually only valid for the same amount of time that the original person was valid for
[07:26:44] <JustAPerson> wycats: yes I understand that's their purpose, but I seem to keep misusing them, such as here: https://gist.github.com/JustAPerson/57157c39b7d004733b09
[07:26:49] <wycats> JustAPerson: so your function without lifetimes might look like fn person_name(person: &Person) -> &str { &person.name }
[07:27:07] <JustAPerson> In this case I guess I just need to change the type of Person.account to ~Acount instead of &'a Account
[07:27:19] <wycats> so what you need to do is indicate that the string shares a lifetime with the person
[07:27:33] <wycats> fn person_name<'a>(person: &'a Person) -> &'a str { &person.name }
[07:27:37] *** Quits: derek_c (derek@moz-E25AC88D.cit.cornell.edu) (Ping timeout)
[07:27:40] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[07:27:44] <wycats> you're just saying
[07:28:00] <wycats> "hey compiler. whatever scope the original Person was valid in, make sure the name doesn't outlive that scope"
[07:28:15] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[07:28:21] *** Joins: mcomella (mcomella@moz-AE370C8B.hsd1.ca.comcast.net)
[07:28:27] *** Parts: mcomella (mcomella@moz-AE370C8B.hsd1.ca.comcast.net) (Leaving)
[07:28:36] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[07:28:50] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[07:29:49] *** Joins: Rui (rui@76AC059.672E3962.8368921A.IP)
[07:30:17] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[07:30:43] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[07:32:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:33:24] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:33:56] *** Quits: Rui (rui@76AC059.672E3962.8368921A.IP) (Quit: )
[07:35:05] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[07:36:01] <wycats> dbaupp: one of my goals is to make it easier to generate .h files
[07:36:14] <wycats> if the FFI definitions are constrained via a macro
[07:36:58] <wycats> dbaupp: I'm pretty happy with run! already
[07:37:30] <dbaupp> wycats: it should already be relatively easy to generate .h files
[07:37:34] <wycats> https://gist.github.com/wycats/c355bc014766a59883fd
[07:37:38] <wycats> dbaupp: "relatively"
[07:37:38] <dbaupp> modulo enums & built-ins
[07:37:48] <wycats> there's a lot of minor details that gum up the works
[07:38:05] <wycats> and more regular syntax would make an initial hax implementation easier for me :P
[07:38:13] <dbaupp> yeah, but I don't think the difficult will be something solvable with macros :P
[07:38:26] <wycats> dbaupp: confirm :)
[07:38:33] <wycats> see the second point :P
[07:38:45] <dbaupp> the correct technique will be using libsyntax and librustc to parse and find exported extern functions
[07:38:47] <wycats> tl;dr unskilled lazy wycats wants to make something that works first
[07:38:56] <wycats> dbaupp: yes, that would be the correct technique
[07:39:16] * dbaupp will try writing something like that now
[07:39:20] <wycats> dbaupp: I'd be very happy if someone did that for me
[07:39:22] <wycats> ooh wheee
[07:40:00] <wycats> then I'm left with "typing #[no_mangle] pub extern "C" fn ... -> bool is very annoying"
[07:40:02] <wycats> :P
[07:40:06] <wycats> still a good reason
[07:40:11] *** Quits: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net) (Quit: )
[07:41:11] <dbaupp> yup, definitely a good place to use macros
[07:41:15] <dbaupp> <3 macros
[07:42:32] *** Joins: jcmoyer (deadbeef@moz-40035C19.sta.embarqhsd.net)
[07:44:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:45:05] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[07:45:25] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:47:29] <wycats> <3
[07:47:46] <wycats> dbaupp: I ran into an issue that I worked around with macros that was kind of sad
[07:47:55] <wycats> couldn't implement a trait for T and separately for ~T
[07:48:05] <wycats> I wanted ~T, Option<T>, and "bare" T
[07:48:09] <dbaupp> (T is a generic?)
[07:48:11] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[07:48:41] <wycats> basically, I wanted to be able to implement it for ~T, and then have a different impl for u32, u64, etc.
[07:48:52] <wycats> but all of the non-~T impls were always identical
[07:50:05] <wycats> I implemented a macro that generated the impl for whichever named types I happened to need
[07:50:06] <wycats> but it was sad
[07:51:38] <dbaupp> yeah, it's a slightly annoying restriction
[07:52:00] <dbaupp> but anything else would be ambiguous
[07:52:37] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[07:52:37] <dbaupp> (i.e. when you use the impl on a type like `~int`, that "satisfies" the T and ~T impls and so the compiler can't immediately tell which to use.)
[07:53:02] *** Joins: agoforth (agoforth@moz-9411BD74.pool.mediaways.net)
[07:53:05] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:56:02] <wycats> dbaupp: it's more than slightly annoying
[07:56:21] <wycats> I don't know how to actually do what I need without having enumerate all possible bare types
[07:56:22] *** Joins: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP)
[07:56:30] <wycats> dbaupp: you would think the solution would be "use the more specific type"
[07:56:47] <wycats> dbaupp: is there a way to specify a list of comma-separated things in a macro definition?
[07:56:48] <dbaupp> wycats: having a concept of specificity would be one solution, yes
[07:56:50] <wycats> or just comma-trailing
[07:57:03] <dbaupp> $( ... ),* is comma separated
[07:57:11] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[07:57:12] <wycats> dbaupp: I mean... it seems clear how to deal with it in this case -> ~T is a T, but T is not a ~T
[07:57:19] <wycats> you don't need any magic specificity concept
[07:57:21] <dbaupp> (any token can go in place of the ,)
[07:57:34] <dbaupp> wycats: no, you need specificity to work out which impl to use
[07:57:46] <wycats> why isn't ^^ enough
[07:58:00] <wycats> if there are multiple possible implementations, figure out which one is a subset of the other
[07:58:06] <wycats> and choose the smallest set
[07:58:10] <dbaupp> that's what I mean by specifity
[07:58:13] <wycats> if they are the same set, then it's still an error
[07:58:22] <wycats> yes, but it seems to not require a new semantic concept
[07:58:28] <wycats> the needed semantics are already there
[07:59:31] <dbaupp> isn't the process of figuring out subsets etc. basically just specificity by another name?
[07:59:42] <dbaupp> (something is more specific than its supersets, etc.)
[07:59:51] <acrichto> wycats: https://gist.github.com/8613246
[07:59:52] <wycats> sure
[08:00:11] <wycats> acrichto: confirm I am working on something quite like that
[08:00:22] <acrichto> sadly I don't think concat_idents!() will work
[08:00:30] <acrichto> function names don't expect the name to be a macro invocation
[08:00:34] <wycats> acrichto: how do I get it to match a literal (
[08:00:35] <acrichto> I've wanted that before...
[08:00:52] <acrichto> the fn arguments I had are surrounded by (
[08:00:59] <acrichto> I think you just don't put a $ in front of it
[08:01:06] <wycats> I'm getting: local ambiguity: multiple parsing options: built-in NTs ident ('param') or 1 other options.
[08:01:06] <acrichto> and make sure ther's a closing one
[08:01:07] <JustAPerson> so with no exception handling, when I need to call a library function when quitting (cleaning up ncurses in particular), should I just implement Drop for a dummy object and create an instance of it in main()?
[08:01:13] * ChrisMorgan has also wanted to do `let concat_idents!(...)` before
[08:01:14] <dbaupp> wycats: ah, that one sucks :(
[08:01:17] <acrichto> wycats: yeah I've run into that a lot...
[08:01:41] <dbaupp> wycats: what's the precise macro definition?
[08:01:46] <acrichto> JustAPerson: yeah that'll ensure that the code is run regardless of whether main fails or not
[08:02:02] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:02:14] <wycats> https://www.irccloud.com/pastebin/y4VyX9GR
[08:02:17] <ChrisMorgan> JustAPerson: with ncurses, do you mean needing to call endwin()?
[08:02:25] <JustAPerson> ChrisMorgan: yes
[08:02:25] <wycats> dbaupp: ^
[08:02:28] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/issues/7727#issuecomment-21620454
[08:02:50] <JustAPerson> acrichto: ok, thanks
[08:03:05] <wycats> my FFI always uses bool to indicate success/failure and an out value
[08:03:43] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:03:51] <acrichto> wycats: can you gist the error message as well?
[08:03:55] <ChrisMorgan> JustAPerson: the endwin() call matches initscr(); a "faithful" ncurses binding would leave you to call endwin() yourself, while a rustic one would change all the interfaces drastically and employ Drop on the return type of the init type.
[08:04:10] <wycats> https://www.irccloud.com/pastebin/OO6Pmc2u
[08:04:20] <dbaupp> wycats: ah, that one
[08:04:35] <dbaupp> I think you have to write a special case for the zero-args case :(
[08:04:41] <wycats> seems fine
[08:04:42] <wycats> I will do it
[08:05:07] <wycats> just will mean 4 cases
[08:05:11] <wycats> since I also need void return cases
[08:05:14] *** Joins: nkoep (nik@moz-433CB284.pool.mediaways.net)
[08:05:19] <dbaupp> can't that just be ()?
[08:05:31] <dbaupp> (slightly ugly, but saves you 2 cases...)
[08:06:13] <wycats> https://www.irccloud.com/pastebin/URiRsBQw
[08:06:20] <wycats> when I added the case for ()
[08:06:36] <ChrisMorgan> JustAPerson: I reckon that your options are either to have a faithful, thin ncurses binding, or to design a rustic API from scratch which may well bear little resemblance to ncurses. I think that mixing the two is probably not a good idea.
[08:06:40] <JustAPerson> ChrisMorgan: the binding I'm using defines no state type, so I just call initscr() and endwin() manually in main().
[08:06:40] <wycats> dbaupp: only if I want to have to pass an out: *mut ()
[08:06:44] <wycats> which seems very bad :P
[08:07:17] <acrichto> wycats: I'm not even sure what that would look like in C
[08:07:23] <acrichto> I guess void* ,... but still seems wrong lol
[08:07:25] <JustAPerson> ChrisMorgan: what would be rustic? this binding is pretty much just externing and wrapping all the functions with little abstraction, something I may have to do myself for windows and w* functions
[08:07:25] <ChrisMorgan> JustAPerson: all the ncurses stuff I've seen thus far (e.g. https://github.com/jeaye/ncurses-rs) has been thin bindings
[08:07:35] <JustAPerson> yeah that's what I'm using
[08:07:37] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[08:07:49] <wycats> yeah I'm not gonna do it :P
[08:08:43] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:08:46] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[08:09:21] <ChrisMorgan> JustAPerson: a rustic interface would have things like a global object which will endwin() on drop, and Window objects for that concept, some form of scoping for attribute handling, &c.
[08:10:13] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[08:10:48] <wycats> so what am I doing wrong?
[08:11:01] <JustAPerson> ChrisMorgan: how are global objects done in rust? I recall something about mutable statics, but they're unsafe as I recall
[08:11:20] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[08:11:46] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[08:11:48] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: io2)
[08:11:57] *** Quits: lkuper (lkuper@6FA5FA9.52E2F3EF.FBBA4BA2.IP) (Quit: lkuper)
[08:12:00] <wycats> they are not :P
[08:12:52] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[08:14:18] <FliPPeh_> They are not done or they are not unsafe? :v
[08:14:34] <wycats> you probably want to use TLS
[08:14:36] <wycats> not "globals"
[08:15:38] <JustAPerson> wycats: TLS?
[08:15:43] <wycats> task local storage
[08:15:47] <wycats> very bad acronym :(
[08:15:50] <wycats> such overloading
[08:16:09] <JustAPerson> lol, that does sound like it be better
[08:16:25] <FliPPeh_> If you're using libnative you can use the same acronym meaning!
[08:17:15] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[08:17:28] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Client exited)
[08:17:32] <wycats> std::rt::thread_local_storage
[08:17:50] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[08:18:08] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:18:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:18:34] <acrichto> you'll want std::local_data rather than thread_local_storage
[08:18:41] <wycats> done
[08:18:44] <acrichto> thread_local_store is *thread* local storage, where the unit of work in rust is a *task*
[08:18:49] <wycats> ccccc
[08:19:45] <wycats> so what is this NT baloney?
[08:20:00] <wycats> "built-in NTs ident"
[08:20:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:20:25] <dbaupp> nonterminal
[08:21:06] *** Joins: Ms2ger (Ms2ger@768AD319.7BE2E8BA.187A1082.IP)
[08:21:38] <wycats> ah
[08:21:45] <wycats> so how should I read this error?
[08:22:02] <acrichto> oh *that's* what NT means!
[08:22:08] <Ms2ger> First, sacrifice a goat.
[08:22:18] <wycats> lols
[08:22:19] <wycats> local ambiguity: multiple parsing options: built-in NTs ident ('param') or 1 other options.
[08:22:29] <wycats> so we have a built-in nonterminal ident
[08:22:30] <Ms2ger> Non-terminal?
[08:22:38] <wycats> or 1 other option
[08:22:40] <wycats> what is the other option?
[08:23:18] <wycats> sorry the 1 other options :P
[08:23:41] <dbaupp> wycats: I think the other option is the trailing )
[08:23:57] <wycats> yes, but there is no ident in the ()
[08:23:58] <dbaupp> i.e. it could either parse a ) or parse an ident
[08:24:01] <wycats> so why is it ambiguous?
[08:24:04] <dbaupp> yeah, it's really dumb
[08:24:06] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[08:24:07] <dbaupp> bugs bugs bugs
[08:24:09] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[08:24:15] <wycats> is there a way to write this that will parse?
[08:24:16] <Ms2ger> features features features
[08:24:22] <wycats> it seems like it stops you from writing a parameter list
[08:24:25] <wycats> which... seems fundamental :P
[08:24:31] <wycats> Ms2ger: I have a doubt
[08:24:33] <wycats> seems like a bug
[08:24:40] <Ms2ger> What does the code look like?
[08:24:50] <tikue> does std::iter have a method that partitions the iterator into sub-iterators? like iter.partition() -> iterator<iterator<T>>
[08:25:40] <wycats> https://www.irccloud.com/pastebin/vTbJwlb8
[08:25:42] <wycats> Ms2ger: ^
[08:25:46] <tikue> basically iter.partition(n)) -> iterator<[T, ..n]>
[08:26:48] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[08:27:05] <dbaupp> wycats: I have a feeling you can do something like $([$param:ident: $ty:ty]),* to fix it
[08:27:07] <dbaupp> iirc.
[08:27:20] <wycats> basically mandate extra []?
[08:27:31] <dbaupp> yeah
[08:27:35] <wycats> :(
[08:27:37] <wycats> many tears
[08:27:41] <dbaupp> something like that has fixed my problems with this stuff before
[08:27:43] <wycats> there must be some way to do this
[08:27:49] <dbaupp> fix the compiler
[08:27:51] <dbaupp> \o/
[08:27:51] <wycats> it's literally just a parameter list in a macro
[08:28:02] <wycats> nobody has ever needed to represent a parameter list in a macro before?
[08:28:13] <dbaupp> yes, people have
[08:28:28] <wycats> and what do they do?
[08:28:29] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[08:28:31] <acrichto> wycats: you can just have a separate case in the macro
[08:28:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:28:33] <dbaupp> and they've done either the special-case-0 or the [] workaround
[08:28:36] <wycats> "make it not a parameter list"
[08:28:40] <wycats> dbaupp: I did the special-case 0
[08:28:41] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:28:41] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:28:42] <wycats> no dice
[08:28:45] <wycats> I will show you
[08:28:47] <dbaupp> oh, really? :(
[08:28:51] <ChrisMorgan> JustAPerson: when I said "global", I didn't mean a true global, I meant an object which must stay alive for the entire ncurses session
[08:29:16] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[08:29:35] <wycats> https://www.irccloud.com/pastebin/iixeNPHV
[08:29:40] <wycats> maybe I am mistunderstanding?
[08:29:50] <acrichto> wycats: change the * to a +
[08:29:55] <acrichto> in the first case
[08:29:59] <acrichto> that may help, not guaranteed
[08:30:10] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:30:38] <wycats> https://www.irccloud.com/pastebin/t10NcU0N
[08:30:46] <dbaupp> wycats: reordering them may help too (not sure about that, though)
[08:31:13] * dbaupp -> dinner
[08:31:18] <wycats> oh noes
[08:31:30] <acrichto> wycats: this has to be possible, someone's written an html parser in macros
[08:31:49] <wycats> moving the 0-case up helped
[08:31:55] <wycats> and worked
[08:32:01] <acrichto> interesting
[08:32:25] <wycats> now the only question is: whether representing an out-var as a return variable is a good idea
[08:32:53] <acrichto> for C FFI I would lean that way (b/c you can guaranteed return anything regardless of ABI)
[08:32:54] <wycats> I think so
[08:33:00] <acrichto> but I'm also ABI paranoid
[08:33:02] <wycats> acrichto: I mean visually
[08:33:06] <wycats> -> u64
[08:33:06] <acrichto> oh
[08:33:15] <wycats> I think if I can get .h files generated
[08:33:17] <acrichto> oh yeah that's fine
[08:33:20] <wycats> dbaupp was working on it
[08:33:21] <acrichto> that's the eway to go
[08:33:23] <wycats> allegedly :P
[08:33:25] <acrichto> hehe
[08:33:34] <wycats> worst case I can write a regex-based parser in Ruby :P :P :P
[08:34:00] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[08:34:14] *** Joins: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au)
[08:34:47] <bjz> cmr: what is the best way for me to install cargo-lite
[08:34:57] <bjz> cmr: might be good to put that in the readme
[08:35:09] * bjz is python noob
[08:39:07] <wycats> is there any way in macros to convert types
[08:39:12] <wycats> ~T -> T for example?
[08:39:53] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[08:40:50] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[08:42:20] <wycats> oh shit lifetimes :P
[08:42:32] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[08:42:58] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:43:48] <wycats> I'll just add a possibly unnecessary lifetime to the expansion :P
[08:44:46] <Tobba> is there any way to do something like
[08:44:48] <Tobba> use x as y
[08:44:59] <strcat> use y = x;
[08:45:12] <Tobba> bit inconsistent, fair enough
[08:45:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:46:09] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[08:47:35] <wycats> I so badly want as
[08:47:39] <wycats> I want the ES6 syntax basically
[08:47:43] <wycats> but I'm biased :P
[08:47:52] *** Quits: nkoep (nik@moz-433CB284.pool.mediaways.net) (Client exited)
[08:48:05] <JustAPerson> Is it intended that when I have `pub use reexport = original` in a module, I have to use `module::reexport::original::foo` to access a member of the original module?
[08:48:08] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[08:48:09] <wycats> use trace::{Trace, TraceBody as Body}
[08:48:14] *** Joins: decode__ (agoforth@moz-37AB61B4.pool.mediaways.net)
[08:48:41] *** Quits: agoforth (agoforth@moz-9411BD74.pool.mediaways.net) (Ping timeout)
[08:49:07] <Tobba> the hell is ES6
[08:49:14] <wycats> ECMAScript 6
[08:49:15] <Tobba> oh, ECMAScript 6
[08:49:21] <Tobba> bit hard to find docs on what it is
[08:49:25] <wycats> Tobba: yeah
[08:49:31] <wycats> look at the es6 module transpiler
[08:49:37] <Tobba> did they fix the language sucking yet
[08:49:42] <Tobba> oh boy classes
[08:49:53] <wycats> Tobba: I'm on the committee :P :P :P
[08:49:56] <wycats> s/they/you/
[08:50:04] <wycats> and I hope we have gone some of the way
[08:50:08] <wycats> there are a lot of nice improvements
[08:50:16] <Tobba> is the type coercion removed yet
[08:50:22] <wycats> nothing is removed
[08:50:23] <Tobba> because thats the source of like 99% of JS wtf's
[08:50:34] <wycats> JS WTFs aren't related to actual JS bugs
[08:50:41] <Ms2ger> Are promises specced yet?
[08:50:43] <wycats> yes
[08:50:50] <Tobba> they're related to the language being really dumb
[08:50:50] <Tobba> but yeah
[08:51:10] <wycats> Tobba: they're an example of something dumb a language does
[08:51:18] <wycats> what's your favorite language? I can find you some WTFs ;)
[08:51:21] <Tobba> I still dont get {} + {} == NaN
[08:51:27] <Tobba> hm
[08:51:29] <wycats> Tobba: you're not supposed to get it
[08:51:33] <wycats> don't rely on coercion
[08:51:35] <Tobba> depends, one of my favorites is probably Lua
[08:51:37] <strcat> wycats: so what does JS offer other than being forced on developers by browsers? ;P
[08:51:50] <strcat> languages like C# have far better support for async
[08:51:58] <wycats> strcat: it's better than Java and VB? Our other options?
[08:52:00] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[08:52:03] <strcat> JS doesn't even have threading :)
[08:52:06] <wycats> strcat: ES6 has equivalent support for async
[08:52:18] <Ms2ger> Web workers?
[08:52:33] <strcat> wycats: VB is a nicer language than JS now - VB.NET is just C# with keywords instead of C syntax :P
[08:52:41] <strcat> it has LINQ, generators, async/await, etc. afaik
[08:52:47] <wycats> spawn(function*() { let posts = yield getJSON("/posts"); return yield getJSON(`/posts/${posts[0].comments}/comments`) })
[08:52:55] <wycats> ^^ ES6
[08:53:04] <wycats> essentially equivalent to await
[08:53:05] <Ms2ger> return yield?
[08:53:13] *** Joins: rca (rcatolino@moz-5E0A44D2.adsl.proxad.net)
[08:53:18] <strcat> wycats: C#'s yield isn't the same as async/await though
[08:53:23] <strcat> is JS's something different?
[08:53:26] <JustAPerson> Tobba: you can get similarly silly behaviour with metatables (particularly if you're naughty and use debug.getmetatable() to modify an number's mt or the like)
[08:53:30] <wycats> strcat: ^^ is basically async/await
[08:53:41] <wycats> Ms2ger: return the value of waiting for the second async thing to finish
[08:53:45] <Tobba> yeah but setmetatable isnt really a wtf
[08:53:51] <Tobba> its literally you changing the behaviour
[08:53:51] <wycats> strcat: and function * / yield is a general purpose abstraction
[08:53:56] <wycats> which is nice
[08:54:05] <Tobba> also debug.getmetatable is a debug function with obligatory hilarious results
[08:54:06] <wycats> Tobba: it's pretty WAT
[08:54:15] <Tobba> if you mess them up the results can be kinda weird
[08:54:22] <Tobba> other than that
[08:54:25] *** Joins: jackneill (jackneill@moz-143FDB1E.pool.digikabel.hu)
[08:54:34] <JustAPerson> I'm not as fresh with Lua as I used to be, and I can't remember any of the things that really used to stump me about it
[08:54:50] <Tobba> probably the dumbfuck syntax for not equals being ~=
[08:54:53] <Tobba> I mean seriously, why
[08:54:57] <strcat> wycats: anyway, dynamic typing *puke* :)
[08:55:03] <wycats> ES6 classes are a big improvement, proxies are great
[08:55:10] <Tobba> everyone who uses Lua just edits it so you can use != and ! anyways
[08:55:14] <JustAPerson> that was never a problem for me lol. I started with Lua and now != is foreign to me :)
[08:55:25] <Tobba> on swedish keyboards its a nightmare to type
[08:55:36] <wycats> Tobba: and in JS people don't rely on coercion
[08:55:38] <wycats> bada bing
[08:55:42] <Tobba> alt gr + ¨ + shift + =
[08:55:52] <Tobba> shift + 0*
[08:55:59] <strcat> wycats: I'm a believer in not having software get more resource hungry and unreliable every year as it likes to do :)
[08:56:01] <Tobba> if you mess it up it adds a ~ ontop of whichever character you type next
[08:56:12] <strcat> web browsers are a nice way of erasing years and years of hardware improvements
[08:56:14] <Tobba> usually writing in a unicode character and Breaking Everything
[08:56:35] <Ms2ger> strcat, you're in such a sunny mood today :)
[08:56:45] <strcat> it's 2014 and I can run a game with 2000-era graphics with piles of memory!
[08:56:50] <Tobba> web browsers are really uhhhh though
[08:56:52] <strcat> Ms2ger: ;P
[08:57:06] <Tobba> I've done stuff with HTML5
[08:57:07] <Tobba> it was bad
[08:57:16] * Ms2ger goes back to writing web browsers
[08:57:45] <Tobba> it still does some shitty array sorting stuff out of lazyness on my side, the result is eating 1GB memory on FF
[09:00:09] * strcat will root for NaCl/Pepper
[09:00:25] <Ms2ger> You really want Google to own the entire stack?
[09:00:43] <strcat> Ms2ger: if no one else wants to throw out the horrible existing one, YES.
[09:00:58] <Ms2ger> Fortunately that's not going to happen
[09:01:21] <strcat> Ms2ger: when 95% of smartphones/tablets are android and only developers use laptops.... we'll see
[09:02:01] <Ms2ger> It's sad that you think that way
[09:02:13] <strcat> I want a language-agnostic native sandboxing model
[09:02:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:02:58] <strcat> without the existing sprawling wasteland of DOM/CSS stuff ;p
[09:03:26] <strcat> i.e. I want to be able to use Qt and have minimum overhead as required for sandboxing
[09:03:55] <strcat> and maybe someone else wants to use EFL, or whatever
[09:04:13] <strcat> monoculture without competition is what javascript/dom/css/html is
[09:04:26] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:04:27] <strcat> and it can't ever break compatibility so it can't not be awful
[09:04:29] * strcat shrugs
[09:04:53] <wycats> such goalposts, very moving
[09:04:54] <wycats> anyway
[09:04:58] <wycats> we're doing good
[09:05:06] <wycats> ES7 will have structured data
[09:05:11] <wycats> https://www.irccloud.com/pastebin/453ycsmc
[09:05:13] <Ms2ger> I, as a user, don't want you to use all that crap
[09:05:20] <strcat> html/js is a huge step backwards from Qt
[09:05:20] <wycats> I thought --staticlib was a static library output?
[09:05:22] <strcat> Ms2ger: sure they do
[09:05:31] <Ms2ger> No I don't
[09:05:34] <wycats> why would you root for NaCL over asm.js
[09:05:37] <Ms2ger> Don't tell me what I think
[09:05:40] <strcat> users want good applications, not poor reinventions of stuff like window managers in web apps
[09:05:50] <wycats> I root for an evolutionary approach that can actually work
[09:06:02] <strcat> wycats: NaCl is a working product today
[09:06:14] <wycats> strcat: asm.js is a working product today
[09:06:15] <wycats> and
[09:06:16] <mcpherrin> If I can't use it in w3m then bollocks to the lot of it
[09:06:17] <wycats> it's portable
[09:06:17] <strcat> chrome's flash is an NaCl/Pepper application
[09:06:20] <mcpherrin> damn you kids and your netscape 4s
[09:06:26] <strcat> wycats: no, it's not portable.
[09:06:41] <wycats> strcat: you've been drinking many kool-aids from someone
[09:06:43] <Tobba> asm.js is just kinda a dirty hack over the real problem
[09:06:44] <strcat> wycats: if something needs asm.js to be usable, it's not portable to browsers without the same optimizations for it
[09:07:13] <strcat> wycats: asm.js doesn't have threads, it doesn't have SIMD, it doesn't have 64-bit integers
[09:07:15] <wycats> strcat: I meant portable to different platforms
[09:07:21] <wycats> like PNaCL
[09:07:23] <wycats> which isn't working yet
[09:07:34] <wycats> Tobba: why do you care what the syntax for your bytecode VM is?
[09:07:41] <wycats> who cares if it looks like JS?
[09:07:48] <strcat> wycats: I don't care about that
[09:08:00] <bjz> we have a #rust-offtopic
[09:08:02] <wycats> c
[09:08:03] <wycats> sorry
[09:08:09] <strcat> the fact is that existing browsers are an insecure, poorly performing mess
[09:08:11] <strcat> ;p
[09:08:15] <wycats> JS will always be subject to moving goalposts
[09:08:40] <strcat> wycats: and it can't break backwards compatibility so it will lose, just like C++ will be displaced by languages like Rust in the long-term
[09:08:49] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[09:08:53] <wycats> we will see
[09:08:55] <bjz> I mean, it's not *entirely* off-topic, but it's blurring the line
[09:08:56] <strcat> the stack is too big to sanely implement
[09:09:03] <Ms2ger> You're free to bet against the web
[09:09:03] <wycats> strcat: we will see
[09:09:06] <wycats> gentleman's bet
[09:09:07] <Ms2ger> Just don't expect to win
[09:09:07] <bjz> :)
[09:09:11] <strcat> Ms2ger: not betting 'against the web'
[09:09:24] <Tobba> google wanting to make everything a webapp pisses me off
[09:09:25] <strcat> betting against javascript/html
[09:09:31] <Ms2ger> i.e., the web
[09:09:35] <strcat> Ms2ger: once javascript is just a compiler target, it's close to dead
[09:09:40] <Ms2ger> Anyway
[09:12:19] <strcat> if I wanted incremental improvements I wouldn't care about rust
[09:12:34] <strcat> why not just use C++14 with clang's static analysis and do debugging with their sanitizers?
[09:13:10] *** Quits: nattofriends (tsutsumi@moz-A9E340E1.fuqu.jp) (Ping timeout)
[09:13:39] *** Joins: nattofriends (tsutsumi@moz-A9E340E1.fuqu.jp)
[09:14:33] <strcat> huge library ecosystem and great performance today, and can be introduced in any existing C/C++ codebase
[09:14:55] <strcat> I don't buy into 'worse is better' and that's exactly what JS is
[09:15:00] <strcat> "we're stuck with this and we can't do better"
[09:15:07] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:15:17] <Tobba> I never could take "huge ecosystem" and "great performance" in the same sentance seriously
[09:16:08] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[09:16:11] <wycats> strcat: if you don't buy worse is better you're going to have a very bad time in life
[09:16:12] <mcpherrin> It could be worse.  We could all be using X11 over the network.
[09:16:16] <wycats> if life involves software
[09:16:20] <wycats> worse is better is reality
[09:16:26] <strcat> wycats: if I did I wouldn't have any interest at all in rust
[09:16:30] <Tobba> mcpherrin: dont even say that
[09:16:36] <wycats> strcat: you don't
[09:16:39] *** FliPPeh_ is now known as FliPPeh
[09:16:42] <wycats> Rust is too conservative for you
[09:16:46] <wycats> as you've said a few times :P
[09:16:48] <mcpherrin> Tobba: X11 over HTTP over dialup!
[09:16:56] <strcat> wycats: I haven't said rust is too conservative...
[09:17:06] <Tobba> I was gonna say: It could be worse. We could all be using X11.
[09:17:10] <Tobba> then I realized this is already the case
[09:17:26] <strcat> bit ridiculous to say one of the top 10 contributors to the language has no interest in it
[09:17:53] <wycats> strcat: you've said your interest is in maintaining a fork of the language that is more aggressive
[09:17:59] <strcat> wycats: no, I have not
[09:18:00] <mcpherrin> Tobba: I haven't used X11 in days ;P
[09:18:06] <strcat> rust-core is not 'more aggressive' or 'less conservative'
[09:18:08] <Tobba> woo wayland?
[09:18:08] <wycats> strcat: musta misunderstood
[09:18:14] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[09:18:37] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:18:38] <Tobba> I actually got it running once then my graphics driver promptly crashed 5 minutes later, not to mention I never got the wayland xorg server to work
[09:18:46] <strcat> wycats: if anything I have stated that I want the stdlib to be *more* conservative
[09:18:53] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:19:02] *** Joins: mib_46kifj (Mibbit@AB2E94E6.840C84C7.B5A68B59.IP)
[09:19:08] <mcpherrin> Tobba: More like free of the oppression of graphics
[09:19:29] <mcpherrin> I only need to run X to fire up a browser with newfangled features
[09:19:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Connection reset by peer)
[09:19:38] <Tobba> pffft
[09:19:38] *** Quits: mib_46kifj (Mibbit@AB2E94E6.840C84C7.B5A68B59.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:19:53] <strcat> wycats: provide a systems language stdlib letting you pick and choose the features you want, with the same concurrent and I/O model as existing C libraries so you can use them all without any pain
[09:20:04] <Tobba> at least we have direct rendering
[09:20:10] <strcat> and don't push opinionated concurrency models that might not pan out on people
[09:20:12] <Tobba> although chromes sandboxing already makes GL slow as shit
[09:20:16] <strcat> just provide proven technologies
[09:20:28] <Ms2ger> Uh-oh, we're back to the stdlib
[09:20:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:20:35] <Tobba> abandon ship
[09:20:39] * Ms2ger jumps
[09:24:23] <strcat> Tobba: chrome's GL sandboxing was necessary before
[09:24:43] <strcat> DRI3 on Linux with the open Intel drivers is the *only* in-process sandboxed GL implementation that I know of
[09:25:27] <mcpherrin> strcat: I have been drinking with people from Nvidia's driver security team
[09:25:35] <mcpherrin> and oh boy that didn't give me any confidence :P
[09:27:48] <strcat> anyway there's a big difference between what chrome/chromium does with flash than what firefox does with flash, for example
[09:28:13] <Tobba> strcat: whats the major diff, iirc chrome has its own VM?
[09:28:24] <strcat> chrome flash is basically a sandboxed nacl/pepper app
[09:28:31] <Tobba> ah
[09:28:33] *** Joins: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de)
[09:28:33] <Tobba> oh right, PepperFlash
[09:28:38] <Tobba> thats neato actually
[09:28:39] <strcat> firefox flash is just in another process so when it crashes it doesn't take down the browser
[09:28:56] <Tobba> I remember seeing mozillas flash VM written in JS
[09:29:00] <strcat> it still has direct gl, and all that jazz
[09:29:02] <strcat> Tobba: shumway
[09:29:10] <Tobba> I think I had a brain aneurysm the second I saw it
[09:29:13] <strcat> Tobba: it can run most flash banner ads
[09:29:22] * strcat has it
[09:29:29] <strcat> I haven't actually found something I wanted it to run yet
[09:29:31] <Tobba> hahaha
[09:29:44] <strcat> ABP removes the advertisements anyway
[09:29:53] <strcat> it'll get there, I guess
[09:30:10] <strcat> I'd rather just have pepper flash though :P
[09:30:10] <Tobba> I guess, but still
[09:30:17] <Tobba> slow thing combined with more slow things
[09:30:33] <strcat> flash doesn't necessary have to be slow, adobe's implementation was just awful
[09:30:38] <FreeFull> Firefox uses plugin-container
[09:30:54] <Tobba> and the shumway demo does this
[09:30:55] <Tobba> https://dl.dropbox.com/u/4838268/ShareX/2014-01/2014-01-25_10-30-48.png
[09:31:03] <Tobba> though thats probably because of my GPU which I should probably get replaced
[09:31:11] <strcat> FreeFull: that's just the name it gives the separate process, it's not a secure sandbox
[09:31:16] <strcat> flash can still use stuff like gl directly
[09:31:21] <FreeFull> Last time I tried the shumway demo it worked fine
[09:31:25] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:31:34] <strcat> FreeFull: a demo written for shumway works, sure :)
[09:31:39] <Tobba> yeah its my GPU
[09:31:48] <strcat> is there a video app (BBC, youtube, some other site?) that it runs?
[09:31:50] <FreeFull> strcat: Of course =P
[09:31:57] <Tobba> its sorta defect and throws up artifacts very occasionally
[09:31:59] <strcat> I have it installed with the goal of not having to use flash as much
[09:32:03] <strcat> but it isn't working so far :)
[09:32:07] <Tobba> on the shumway demo it cracks out artifacts all over though
[09:32:17] <strcat> works fine for me
[09:32:23] <strcat> (the demo)
[09:32:31] <Tobba> at least they recompile AS to JS I think?
[09:32:41] <strcat> and it can run stuff like the flash version check on adobe's site and some flash banner ads
[09:32:44] <mcpherrin> AS is pretty easy to transpile to JS
[09:32:59] <strcat> Tobba: AS is basically a superset of JS with stuff likes static types...
[09:33:10] <Tobba> ah
[09:33:17] <Tobba> never really messed with it, for good reasons
[09:33:21] <Tobba> while at it can we also kill java
[09:33:48] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[09:33:54] <strcat> java applets are basically dead except for things needing client-side crypto
[09:33:59] <strcat> I haven't seen one in ages
[09:34:09] <mcpherrin> I think flash's AS engine might still be based on Mozilla's Tamarin js engine
[09:34:20] <Tobba> why would you use java for clientside crypto
[09:34:50] <Tobba> only thing I've seen it used for is sockets, which is largely replaced with flash now
[09:34:58] <strcat> Tobba: because js doesn't let you do it securely
[09:35:01] <Tobba> because HTML5 for some reason didnt add proper goddamn TCP sockets
[09:36:00] <mcpherrin> Allowing arbitrary TCP sockets from JS/html would be kinda insane
[09:36:06] <Tobba> flash does it
[09:36:14] <Tobba> it just has a reasonable security protocol
[09:36:17] <Tobba> websockets suck
[09:36:26] <mcpherrin> flash is kinda insane :P
[09:36:28] <strcat> mcpherrin: not as insane as arbitrary OpenGL :)
[09:36:33] <strcat> but flash does that too...
[09:36:44] <Tobba> what checks does chrome perform on OGL calls anyways
[09:37:24] <mcpherrin> I am pretty vaguely uncomfortable with the current models of what new fangled features random webpages can run on my computer
[09:37:30] <mcpherrin> At least ActiveX is dead
[09:37:46] <Tobba> tbh
[09:37:50] <Tobba> everything running in the browser is fucking insane
[09:38:00] <Tobba> and points to that the security model for desktop apps utterly failed
[09:38:06] <strcat> mcpherrin: well, what I think is sane is starting bottom up again
[09:38:08] <strcat> make a secure sandbox
[09:38:16] <strcat> now expose carefully designed APIs to it
[09:38:21] *** Joins: weirdo (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[09:38:36] <strcat> and that is why I like NaCl :P, starts from a secure sandbox for native code, works up from there
[09:38:47] <strcat> Pepper is a set of APIs for NaCl
[09:39:03] <strcat> although I really hope they move to in-process opengl on the intel drivers with dri3
[09:39:23] <Tobba> time to come up with a name which can have the acronym KCl
[09:39:50] <Ke> there is no security with graphics
[09:40:05] <diverse> Tobba: Kernel Compiling Language?
[09:40:20] <Tobba> I thought of kernel for a while but I couldent come up with anything sane
[09:40:22] <Ke> it's the part of code that crashes most of the time with benevolent code
[09:40:33] <Ke> and some people want to feed it malicious code
[09:40:34] <Tobba> also yep, graphics drivers suck
[09:40:35] <mcpherrin> strcat: Yeah, NaCl seems pretty alright, though I don't think the pepper apis are the best -- they're basically chrome guts
[09:40:36] <strcat> Ke: I trust intel's open-source driver on sandy bridge and later to be secure.... it has per-process memory protection, etc. now
[09:41:11] <Ke> I've heard
[09:41:14] <mcpherrin> Does it use an IOMMU to prevent graphics code from DMAing random things?
[09:41:14] <strcat> although no one is using dri3 yet (introduced with xorg 1.15) so... it's not being used yet
[09:41:27] <mcpherrin> (I am unsure how much memory access a GPU has to begin with)
[09:41:42] <Tobba> full memory access, basicaly
[09:41:46] <Ke> it can do DMA
[09:41:54] <strcat> mcpherrin: well, the nvidia driver allows full memory access to the full system due to bugs... they fix them now and then
[09:41:57] <strcat> but they're never ending
[09:42:00] <Tobba> its a PCI-e peripheral, it can do whatever the hell it wants
[09:42:03] <strcat> full ring0 access to the entire system
[09:42:05] <strcat> ;p
[09:42:06] <Ke> if you don't have an IOMMU thats all the memory right away
[09:42:12] <Tobba> not really
[09:42:26] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[09:42:29] <Tobba> just dont expose the goddamn control registers that tell the GPU where to write stuff
[09:42:31] <strcat> mcpherrin: intel actually added memory protection stuff at a hardware level but until very recently it wasn't used
[09:42:34] <Tobba> to the user
[09:42:36] <Tobba> thats a terrible idea
[09:42:45] <mcpherrin> Modern Intel CPUs have an IOMMU so that's at least a barrier to malicious peripherals
[09:42:51] <strcat> mcpherrin: they finally exposed it, and now everyone has to move to the sane rendering API :)
[09:42:56] <strcat> dri2 is insecure itself
[09:42:59] <strcat> ignoring hardware
[09:43:03] <mcpherrin> I work in embedded where we use it, and I dunno what ya'll desktop folk do
[09:43:12] <Tobba> heh
[09:43:20] <strcat> mcpherrin: dri3 provides a file descriptor for sharing a buffer
[09:43:23] <Tobba> I wish more things had firewire ports
[09:43:26] <Tobba> DMA exploits best exploits
[09:43:36] <Tobba> seriously, which idiot gave an external peripheral port a DMA INTERFACE
[09:43:42] <strcat> mcpherrin: and then the kernel/hardware deal with the rest (well, assuming you don't use nvidia/amd gpus ;p)
[09:44:00] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[09:44:00] <strcat> Tobba: doesn't thunderbolt have that too?
[09:44:04] <Tobba> yep
[09:44:11] <Tobba> thunderbolt is literally PCI-e and display port
[09:44:14] <Tobba> in a wire
[09:44:16] <mcpherrin> strcat: I'm more worried about bugs in the graphics card allowing arbitrary "code" execution from shader programs and so what the API is doesn't matter too much
[09:44:28] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[09:44:36] <strcat> mcpherrin: well the API lets you read other apps buffers
[09:44:38] <strcat> and potentially write to them
[09:44:40] <strcat> that's pretty bad
[09:45:01] <weirdo> why can't I import a trait name via "use mytrait::MyTrait"?
[09:45:09] <mcpherrin> Tobba: and I assume they didn't do the sane thing and sandbox it? :(
[09:45:25] <Tobba> of course not
[09:45:26] <strcat> mcpherrin: nope, you can totally take over a system via firewire/thunderbolt
[09:45:27] <Tobba> I think the IOMMU helps tho
[09:45:31] <mcpherrin> Tobba: maybe I need to bust out the hardware engineer i keep in my closet and get some malicious peripheral on
[09:45:39] <strcat> mcpherrin: plug in -> bam, the firmware is wiped with a malicious one
[09:45:40] <Tobba> but you can hook up a GPU over thunderbolt if you're feeling insane
[09:45:41] <strcat> ;p
[09:45:50] <strcat> mcpherrin: look at the new mac pro
[09:46:00] <strcat> mcpherrin: what apple wants is the ability to attach arbitrary hardware externally
[09:46:02] <Tobba> which is obviously hilariously slow since the bus isnt that fast
[09:46:04] <strcat> it's basically external PCIe
[09:46:12] <mcpherrin> yeah, there's nothing wrong with external PCIe
[09:46:13] <strcat> it's a terrible, terrible idea from a security POV
[09:46:22] <Tobba> yeah but its not meant to replace USB
[09:46:28] <mcpherrin> Just don't expose arbitrary memory to the device
[09:46:30] <Tobba> firewire was just like, for cameras and shizzle
[09:46:38] <strcat> mcpherrin: but that's what PCIe (and thunderbolt) do :)
[09:46:42] <Tobba> though theres the same issue
[09:46:47] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[09:47:01] <Tobba> when some guy comes over, hooks up a peripheral and your device has been pwned right there
[09:47:06] <mcpherrin> strcat: Not inheriently -- IOMMU!
[09:47:20] <Tobba> so yeah, IOMMUs
[09:47:26] <strcat> mcpherrin: well someone should let apple know about that...
[09:47:29] <strcat> cause they aren't doing it
[09:47:31] <Tobba> hahahahaha
[09:47:37] <mcpherrin> strcat: yeah :p
[09:47:55] <mcpherrin> Even with one they're not perfect
[09:48:10] <mcpherrin> bugs in our work product were causing badness and that wasn't even malicious
[09:48:13] <Tobba> if you have a malicious PCI-e card you can probably just use a boot ROM
[09:48:15] <weirdo> say I have a file "mytrait.rs" which defines the trait "MyTrait". now I want to "impl MyTrait for MyStruct" in another file, but "use mytrait::MyTrait;" doesn't bring the name into scope. what's up with that?
[09:48:38] <Tobba> wierdo: make sure that the trait is public?
[09:48:52] <skrylar> I don't think anyone is really taking computer security for plebians with any seriousness, honestly.
[09:48:59] <Tobba> I mean, if its external PCI-e a boot rom might work, but tbh I doubt the thunderbolt port is active at boot time
[09:49:14] <Tobba> then again what do you know
[09:49:25] <skrylar> Those that have information that needs to be secure have a budget to have custom rigs, and everyone else "doesn't matter" because easier spying is more convenient than doing good jobs
[09:49:28] <diverse> sounds like I'm supposed to avoid firewire and thunderbolt at all times
[09:49:32] *** Quits: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au) (Ping timeout)
[09:49:47] <Tobba> dont forget expresscard
[09:49:48] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Connection reset by peer)
[09:50:00] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (Ping timeout)
[09:50:00] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[09:50:12] <Tobba> http://www.breaknenter.org/projects/inception/
[09:50:16] *** Quits: xoebus (xoebus@moz-A192BC54.xen.prgmr.com) (Ping timeout)
[09:50:24] *** Quits: GregorR (Gregor@moz-D9651910.so) (Ping timeout)
[09:50:24] *** Quits: Ycros (ycros@moz-E0894734.ycros.org) (Ping timeout)
[09:50:29] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[09:50:29] *** Quits: weirdo (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Ping timeout)
[09:50:29] *** Quits: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP) (Ping timeout)
[09:50:38] <skrylar> what is it with organization tools requiring online activation, and then the devs don't update the program in 2-3 years
[09:50:52] <skrylar> if you're *that* worried about piracy, maybe try actually keeping your software updated -_-
[09:51:00] <Tobba> management
[09:51:00] <Tobba> obviously
[09:51:06] <skrylar> yeah but these are indie groups
[09:51:07] *** Quits: nyux (nyux@moz-1CEE0DD2.aiiane.com) (Ping timeout)
[09:51:07] *** Quits: Eridius (kevin@moz-533B0DB4.us) (Ping timeout)
[09:51:12] <skrylar> with like 1-2 guys
[09:51:15] *** Quits: ldunn (username@moz-94CB0FA.cyberius.net) (Ping timeout)
[09:51:28] <skrylar> Paint Tool SAI is one of those, I think its written by like one dude; hasn't updated since '07, yet it activates
[09:51:32] <skrylar> its like
[09:51:44] <skrylar> "seriously, you haven't updated and cracks are abound; why not just be nice to the people still paying you?"
[09:52:02] *** Joins: Ycros (ycros@moz-E0894734.ycros.org)
[09:52:06] <Tobba> or better yet skip all the DRM stuf
[09:52:06] <Tobba> f
[09:52:11] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[09:52:18] <Tobba> it'll take me IDA and a cup of coffee to break it anyways
[09:52:26] <skrylar> Tobba: yeah but that's not always [legally] possible
[09:52:40] *** Joins: xoebus (xoebus@moz-A192BC54.xen.prgmr.com)
[09:52:49] *** Joins: GregorR (Gregor@moz-D9651910.so)
[09:52:52] <strcat> skrylar: but... mypaint/krita :(
[09:53:01] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[09:53:01] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Connection reset by peer)
[09:53:02] <skrylar> strcat: they don't do what sai does :(
[09:53:07] <strcat> what does SAI do?
[09:53:12] *** Joins: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au)
[09:53:25] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[09:53:29] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[09:53:34] *** Joins: weirdo (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[09:53:34] <skrylar> Paint Tool SAI had this really nice setup with vectorized inking layers and some nice color blending tools IIRC
[09:53:35] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[09:53:42] *** Joins: ldunn (username@moz-94CB0FA.cyberius.net)
[09:53:45] *** Joins: nyux (nyux@moz-1CEE0DD2.aiiane.com)
[09:53:46] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[09:53:51] <skrylar> a lot of people liked it on deviantart because inking was really easy with it
[09:54:05] * strcat thought mypaint did that kind of thing
[09:54:10] <skrylar> vector inking? no
[09:54:28] <skrylar> you'd have to round-trip between inkscape and mypaint, which is far less convenient
[09:54:28] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[09:55:31] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[09:55:48] <Tobba> inkscape is horrible
[09:55:59] <skrylar> then theres Sketchbook Pro ._. which got abandoned for years before the iphone version came out and they picked up the PC build again... technically can do the same in mypaint, but sketchbook has a great GUI and all these useful brushes with copic color palette options... mypaint defaults to a bunch of crap brushes D:
[09:56:04] <Tobba> that thing gave me PTSD from trying to draw a goddamn triangle
[09:56:10] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[09:56:13] <Tobba> I ended up writing the SWF file manually
[09:56:24] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[09:56:41] <skrylar> i actually like mypaint/krita, i just wish they would.. you know..
[09:56:53] <skrylar> work on stuff that was super important, like *good* brush defaults
[09:57:17] <Tobba> one day I want to code a painting tool
[09:57:28] <Tobba> I have some ideas
[09:57:28] <wycats> is there a way in macros to say that some $foo is either an ident or an expr?
[09:57:31] <wycats> or whatever?
[09:57:38] <skrylar> wycats: yeah
[09:57:45] <wycats> how can?
[09:57:50] <skrylar> wycats: macro_rules(($a:expr) => {...})
[09:58:13] <skrylar> strcat: the other bag of sad is the size D:
[09:58:26] <strcat> skrylar: hm?
[09:58:36] <Tobba> I never managed to figure out why some applications are so goddamn big
[09:58:36] <wycats> skrylar: I actually want ident or pat
[09:58:42] <wycats> does pat include ident?
[09:59:00] <Tobba> I also never managed to figure out how everyone can fail at writing a good updater
[09:59:12] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[09:59:13] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[09:59:15] <wycats> Tobba: chrome does ok
[09:59:25] <skrylar> strcat: OC takes up like.. 5mb disk space, <10mb RAM. Manga Labbo (same devs) does bitonal full sheets in true 1-bit, both have RAM overhead of basically nothing. MyPaint needs loads of python runtimes and Krita is a like.. 200mb install with a massive footprint
[09:59:43] <skrylar> MyPaint/Krita don't even do 1-bit IIRC
[09:59:49] <Tobba> I broke the spotify one this morning, now I'm stuck with a window with a progress bar and no close button until I can bother to kill the process (read: never)
[10:00:04] <mcpherrin> Tobba the first time I tried to draw some triangles in blender I gave uo and wrote a tool to generate the files instead...
[10:00:12] <Tobba> hahahahaa
[10:00:18] <Tobba> I just gave up because the grid alignment was broken
[10:00:25] * strcat happily updates everything with a package manager ;p
[10:00:30] <strcat> covers spotify too... if I used it
[10:00:38] <strcat> but afaik I can't even if I wanted to :P
[10:00:42] <strcat> wooo, canada
[10:00:43] <Tobba> spotify isnt on the official repos of most distros though
[10:00:44] <Tobba> I think
[10:00:46] <skrylar> yay region locks
[10:00:58] <mcpherrin> I use spotify in Canada ;)
[10:01:08] <strcat> mcpherrin: without tricking it?
[10:01:08] <skrylar> i appreciate how forward thinking the RIAA is, making people use region locks so we get creative solutions to bypass all of them
[10:01:08] <Tobba> the key is VPN on specific applications
[10:01:14] <mcpherrin> you just need a us billing address
[10:01:19] <Tobba> hahahah seriously?
[10:01:36] <mcpherrin> they dont ip filter subscribers. just address on the credit card
[10:01:41] <Tobba> how do they handle free users then
[10:01:44] <strcat> skrylar: well stuff like EME is absolutely hilarious to me
[10:01:49] <strcat> as you can just record the browser window
[10:01:55] <mcpherrin> Free users are restricted a lot more.
[10:01:57] * strcat shrugs
[10:02:01] <skrylar> strcat: don't say that, it makes me miss my mac :(
[10:02:06] <skrylar> audio hijack pro <3
[10:02:12] <mcpherrin> no linux, no roaming internationally...
[10:02:29] <mcpherrin> adverts, etc
[10:02:31] <skrylar> OH NO THOSE LINUX BASTARDS WILL (wait what will linux people do?)
[10:02:49] <Tobba> what does EME even do
[10:02:51] <Tobba> cant you just grab the file
[10:02:52] *** Joins: valenting1 (Thunderbir@DCE0CA8A.A95316AD.89C0DD0D.IP)
[10:02:53] <strcat> skrylar: pretty easy to do that with pulse too... firefox opens new audio streams for different tabs afaik
[10:02:53] <mcpherrin> Their advertising stuff doesnt work on Linux
[10:02:55] <Tobba> like geez
[10:03:05] <skrylar> strcat: pulse is a horrible creature
[10:03:06] <mcpherrin> no ads means no free musics
[10:03:08] <strcat> Tobba: it provides an API for a binary blob to do something from within the browser
[10:03:12] <dbaupp> wycats: re ident or pat, you should just be abel to use ident
[10:03:13] *** Quits: tav (tav@moz-54E3B3B0.range31-52.btcentralplus.com) (Quit: tav)
[10:03:16] <Tobba> strcat: uhhhhmmm
[10:03:16] <strcat> skrylar: meh, not really, it's fine
[10:03:22] <wycats> dbaupp: nah I need _
[10:03:24] <dbaupp> wycats: (since an ident is a valid pattern)
[10:03:25] <strcat> Tobba: I don't know what 'something' is
[10:03:28] <wycats> pat worked
[10:03:29] <wycats> you meant pat
[10:03:30] <dbaupp> wycats: oh, I see
[10:03:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:03:31] <wycats> not ident
[10:03:33] <Tobba> I dont want to know
[10:03:33] <skrylar> strcat: eh, the people who have to do a lot of audio work hate it
[10:03:39] *** Quits: valenting1 (Thunderbir@DCE0CA8A.A95316AD.89C0DD0D.IP) (Quit: valenting1)
[10:03:43] <Tobba> its probably shitty encryption or something I dunno
[10:03:46] *** Quits: valenting (Thunderbir@29282F17.7E118222.89C0DD0D.IP) (Ping timeout)
[10:03:47] <Tobba> can prolly just grab the file
[10:03:50] <mcpherrin> no API access on free spotify either
[10:03:57] * skrylar is one of said people who has to use JACK for audio work, which involves trying to shank Pulse on top of Jack
[10:03:58] <dbaupp> wycats: I thought you mean "I have an argument that I want to use as an ident and also use as a pat"
[10:04:01] <strcat> skrylar: *shrug*, I don't see why :P, it's better than the userland part of alsa it replaces
[10:04:02] <dbaupp> *meant
[10:04:05] <wycats> ah
[10:04:21] <skrylar> strcat: oh, i've had a lot of times pulse will just crash and not start up
[10:04:21] <strcat> although I still just use alsa's dmix crud
[10:04:33] <skrylar> esp. when jack is involved
[10:04:34] <strcat> skrylar: I haven't seen that, I'd blame the distro for patching everything ;]
[10:04:42] <wycats> man the 3-stage compiler takes a long time if you make small tweaks to libstd
[10:04:57] <skrylar> i don't mean to seem like a mega-downer though
[10:05:07] <skrylar> i'm just sad because most of the time linux-compatible software isn't really inspirational
[10:05:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[10:05:20] <strcat> skrylar: pulse was definitely pretty awful until 2012/2013
[10:05:24] <wycats> is there an equivalent to closure.finally() for proc?
[10:05:28] <mcpherrin> man linux networking is awesome though!
[10:05:33] <strcat> I think it is a strict improvement over the userland part of alsa now
[10:05:41] <strcat> and I'd say it's better than windows audio for sure
[10:05:44] <skrylar> e.g. i've been dying for a Notebook replacement, and nobody has one. they just say "well i use evernote" (no thanks, i don't do cloud) or "just use org-mode"
[10:06:01] <skrylar> org-mode compared to CP Notebook is like jabbing out your eyes and trying to paint using your elbows
[10:06:12] <mcpherrin> org mooooooode!!
[10:06:27] <strcat> skrylar: ipython notebook! (probably not at all what you want though :D)
[10:06:40] <skrylar> strcat: pff lol
[10:06:54] <mcpherrin> If I cant script it in a broken ass lisp, what good is an editor
[10:07:05] <skrylar> interesting note: scrivener runs really well in wine
[10:07:15] <Tobba> I never understood emacs users
[10:07:21] <Tobba> I want a text editor, not a OS
[10:07:23] <skrylar> other interesting note: scrivener devs have no problem increasing DRM without notifying users during an update
[10:07:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[10:07:43] <skrylar> then removing the download for previous patches so you can't downgrade 
[10:07:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:07:55] <strcat> Tobba: for that same reason... having the window manager do tabbing/splitting is nicer :P
[10:08:24] * strcat ponders porting all 800k lines of metasploit from ruby1.9 to ruby2.1
[10:08:28] <mcpherrin> Tobba, but I do want an OS :)
[10:08:30] <strcat> how hard can it be?
[10:08:37] <skrylar> strcat: nah, i mostly want an actual outliner :(
[10:08:38] <Tobba> you're going to die strcat
[10:09:08] <skrylar> as in a legitimate outliner that works in nodes, not "the magic of plain text" which completely misses the boat as far as node cloning / linking
[10:09:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:09:59] <mcpherrin> I want a wacom tablet style drawing overlay on a vt320 style terminal
[10:10:05] *** Joins: marianoguerra (marianogue@moz-8364F18D.dip0.t-ipconnect.de)
[10:10:11] <mcpherrin> and a good ascii drawing program
[10:10:12] <strcat> skrylar: *shrug*, I like the idea of rendering it in the editor and then showing it as plain text as soon as you start editing that part
[10:10:38] <skrylar> strcat: well, there used to be grandview :(
[10:11:11] <skrylar> Leo is technically a decent outliner, however it derps hardcore
[10:11:11] <wycats> is there an equivalent to closure.finally() for proc?
[10:11:22] <strcat> wycats: use RAII instead ;p
[10:11:31] <wycats> strcat: can you show me an example?
[10:11:46] <wycats> I know RAII in broad strokes but not how to apply it here
[10:11:59] <strcat> wycats: well you could make a type taking a proc and running it in the dtor
[10:12:04] *** Quits: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) (Ping timeout)
[10:12:05] <strcat> or something like that
[10:12:13] <skrylar> strcat: the problem with 'the magic of plain text' is that it slows down when you need to make heavy use of it, not to mention excess derp that is not helpful; e.g. org-mode users have to use the archive command because emacs starts choking on heavy todo outlines
[10:12:18] <wycats> that's basically what finally does
[10:12:23] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[10:12:23] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Ping timeout)
[10:12:29] <wycats> but finally does *self
[10:12:30] *** Quits: A1kmm (A1kmm@moz-EBABC254.dsl.mel.iprimus.net.au) (Ping timeout)
[10:12:31] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[10:12:33] <wycats> which doesn't work for procs
[10:12:38] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[10:12:54] <strcat> wycats: store Option<proc()> taken by-value
[10:13:03] <strcat> then .take() it in the dtor and run it
[10:13:18] <strcat> or use unsafe code and avoid Option, but it doesn't matter much
[10:14:19] <wycats> so I should implement a Finallyizer basically
[10:14:37] *** Quits: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au) (Ping timeout)
[10:15:00] <strcat> wycats: ScopeGuard ;]
[10:15:08] <wycats> ;)
[10:15:28] <Tobba> oh god
[10:15:40] <Tobba> the amount of "wat" when a debug print from yesterday appears again
[10:15:48] <Tobba> its not anywhere in the code
[10:15:51] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[10:15:54] <strcat> wycats: D has a scope statement
[10:15:54] <Tobba> help I have a code ghost
[10:15:59] <strcat> scope(exit) println("foo")
[10:16:01] *** Joins: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP)
[10:16:06] <strcat> scope(failure) println("halp!")
[10:16:07] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[10:16:13] <Tobba> D is interesting
[10:16:18] <strcat> scope(success) println("great success!")
[10:16:19] <Tobba> I dont think it'll take off though, still interesting
[10:16:26] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[10:16:28] *** Joins: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au)
[10:16:38] <skrylar> eeh. I used to care about D until they let Alec take over.
[10:16:42] <strcat> wycats: I'd like it if rust had that too, maybe it can be a syntax ext
[10:16:53] <skrylar> Now it feels like its been despoiled by too much C++, instead of C++--
[10:17:05] <skrylar> with some java badness thrown in
[10:17:23] <diverse> skrylar: it's a Java clone without the VM
[10:17:28] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[10:17:36] * strcat forgot about this weird script he has
[10:17:42] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[10:17:48] <skrylar> diverse: kinda sad isn't it? considering it started as "a fixed C++"
[10:17:55] <strcat> http://ix.io/6kD haha
[10:18:20] <skrylar> i'm hoping rust doesn't turn full stupid at the last minute
[10:18:53] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[10:19:05] <wycats> strcat: Python with?
[10:19:07] * skrylar has logged 26-something hours the past week trying to get base libs working to release a GUI lib in rust ><
[10:19:27] <strcat> wycats: well it's way more powerful than that, python with is sugar for enter/exit methods
[10:19:37] <strcat> wycats: rust already has better via destructors
[10:20:08] <strcat> scope guards let you run arbitrary stuff on the scope exit (and only on failure/success if desired) without making a type
[10:20:51] <strcat> scope(exit) rmdir("foo")
[10:20:53] <strcat> mkdir("foo")
[10:21:07] <strcat> do_stuff()
[10:21:26] * skrylar has discovered something derpy about freetype while wrapping it: they have a FT_Long / FT_ULong type
[10:21:30] <skrylar> okay, no big deal
[10:21:35] <Tobba> ew
[10:21:37] <skrylar> then later, "unsigned long"
[10:21:48] <skrylar> "freetype, WHY DO YOU HAVE A ULONG TYPE THAT YOU DO NOT USE??"
[10:21:49] <strcat> skrylar: well, at least it's not glib/gobject
[10:22:15] * skrylar quietly places strcat in to a cardboard box for mentioning gobject
[10:22:51] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:23:31] <Tobba> whats gobject
[10:23:40] <skrylar> Tobba: gnome's object type
[10:23:45] <skrylar> or
[10:23:54] <skrylar> An immitation of LISP's CLOS, in pure C
[10:24:01] <Tobba> oh god kill it with fire
[10:24:21] <diverse> Tobba: hahaha
[10:24:23] <skrylar> it fulfills the quote "every language will implement a version of CLOS about half as well"
[10:24:40] <Tobba> I need to implement something like that actually
[10:24:41] <Tobba> in pure Rust
[10:24:52] <skrylar> isn't rust a little antithetical to CLOS
[10:25:18] <Tobba> well
[10:25:25] <Tobba> I need to set up some way to describe any arbitary object
[10:25:27] <Tobba> and methods to call on that
[10:25:32] <Tobba> in a thread safe manner too obviously
[10:25:37] <Matthias247> if you kill it propably 30% of all linux apps won't work any more ;)
[10:25:38] <Tobba> basicaly, unf
[10:25:48] <skrylar> Tobba: so basically just
[10:26:15] <diverse> Matthias247: that's underestimating
[10:26:28] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[10:26:29] <skrylar> enum Doodle { DoAThing(~str, ~[FascinatingEnumWithTypes]) } and a chan
[10:26:29] <strcat> Tobba: gobject is dynamic/weak typing in C
[10:26:34] <strcat> Tobba: so for example
[10:26:40] <strcat> you have a VteTerminal ptr
[10:26:46] <strcat> you want to call a widget function?
[10:26:55] <Matthias247> diverse: prpoably depends if focus on desktop app or also count all the command line tools and libraries
[10:26:58] <strcat> do_something_with_widget(GTK_WIDGET(vte))
[10:27:08] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Client exited)
[10:27:11] <Tobba> yep thats pretty awful
[10:27:12] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[10:27:17] <strcat> and GTK_WIDGET just expands to an assert printing an error (it doesn't exit by default) and a cast to GtkWidget*
[10:27:24] <strcat> Tobba: anyway that's how they do everything.
[10:27:29] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[10:27:31] <Tobba> I just need a way to describe a list of calls on an object
[10:27:33] <strcat> they have an inheritance hierarchy you need to cast between
[10:27:36] <Tobba> what types the args are, and how to call it
[10:27:45] <dbaupp> strcat: https://gist.github.com/huonw/13b6413bd494a8d3a392
[10:27:49] <Tobba> and a function pointer obviously
[10:28:02] <strcat> and functions taking a gobject ptr will usually do an assert forcing a return (so it's a no-op) if you pass the wrong type
[10:28:03] <skrylar> Tobba: nope, function pointers are badlands for rust
[10:28:12] <strcat> that's why programs like firefox like printing those gtk asserts
[10:28:21] <skrylar> Tobba: what i mentioned is fairly close to the rust-y way IIRC
[10:28:21] <strcat> non-fatal type errors everywhere!
[10:28:23] * strcat sighs
[10:28:40] <strcat> and firefox isn't even a gtk application, just uses it a bit...
[10:29:14] <dbaupp> wycats: https://gist.github.com/huonw/13b6413bd494a8d3a392 should be modifyable to use proc()'s
[10:29:40] <wycats> dbaupp: thx
[10:30:13] <dbaupp> (skip the 'when' stuff if you don't care about failure or not)
[10:30:22] <Tobba> I guess I can sorta provide closures
[10:30:33] <Tobba> static closures then transmute them
[10:30:34] <Tobba> but ugh
[10:30:43] <skrylar> Tobba: you can use an enum to contain the types allowed as parameters, an enum to define types of messages to send (e.g. SendMsg) in the terms of how Smalltalk does it
[10:30:45] <Tobba> extremely unsafe
[10:30:50] <skrylar> and a chan to send those over
[10:30:57] <wycats> dbaupp: trying to modify task.run to take a proc, fwiw
[10:31:00] <skrylar> its basically message passing :\
[10:31:13] <wycats> taking a closure hoses me pretty hard if my FFI function takes a ~T
[10:31:13] <Tobba> this is intended for message passing
[10:31:15] <Tobba> kind of
[10:31:26] <skrylar> yerp, then you'd want to do it that way
[10:31:39] <wycats> dbaupp: I don't really understand why spawn takes a procedure and run takes a closure
[10:31:44] <skrylar> you don't need to cast, you just need to receive on a port and select
[10:31:45] <wycats> I suspect it just hasn't gotten much love
[10:32:08] <Tobba> skrylar: not exactly sure what you're thinking
[10:32:14] <Tobba> developing a kernel though, I dont even have chans
[10:32:18] *** Joins: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr)
[10:32:22] <Tobba> its for application <-> driver object interactions
[10:32:30] <skrylar> all though rust's general desire that you not store function pointers does make some optimizations hard :(
[10:33:28] <Matthias247> you can store function pointers
[10:33:39] <Matthias247> i use them in my library
[10:33:51] <Matthias247> use bare functions and pass the object by unsafe ptr ;)
[10:33:53] <dbaupp> wycats: you can use the Option dance to get around the closure thing, btw
[10:34:13] <Matthias247> but yes, rusts desire is to do it not that way
[10:34:16] <skrylar> Matthias247: i don't think storing them is considered very rustic
[10:34:22] <dbaupp> wycats: on the outside `let mut x = Some(foo);`, on the inside `let foo = x.take();`
[10:34:38] <wycats> dbaupp: yes but that's hostile to abstractions
[10:34:41] <wycats> I know how to fix it
[10:34:45] <dbaupp> wycats: yes
[10:34:52] <wycats> I am doing the option dance now
[10:34:58] <wycats> I'm trying to write a PR to fix run :P
[10:35:01] <Tobba> in my C++ implementation of this
[10:35:02] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:35:08] <Tobba> you basicaly had to do a closure dance
[10:35:15] <Tobba> or uh, lambda rather
[10:35:17] <Matthias247> skrylar: yes. but sometimes you got do to what you got to do :)
[10:35:19] <Tobba> to wrap the entire object up
[10:35:22] <Tobba> it was amazingly awful
[10:35:36] <dbaupp> wycats: (fwiw, I'm not 100% sure run is broken... it may be taking a closure to avoid an allocation on purpose)
[10:35:42] <skrylar> Matthias247: and sometimes you spend 16 hours bind+wrap'ing freetype2 :(
[10:35:50] <wycats> dbaupp: welp
[10:35:54] <dbaupp> wycats: but... I've never touched any of that code so I'm likely to be wrong
[10:35:55] <wycats> seems not
[10:36:07] <Matthias247> skrylar: if that's what YOU got do do then propably yes. Me not :)
[10:36:14] <wycats> since the code that calls into it is basically wrapping procedures into closures
[10:36:31] <skrylar> Matthias247: well, i'm trying to make the substructure for desktop apps :B
[10:36:45] <Matthias247> good thing
[10:36:50] <strcat> skrylar: well, freetype2 alone isn't enough :)
[10:36:53] <wycats> "mutable variables cannot be implicitly captured"
[10:36:55] <strcat> if you want stuff like RTL support
[10:36:58] <wycats> how do you explicitly capture them?
[10:36:59] <strcat> need pango ;p
[10:37:06] <skrylar> i wrote RTL support in C once
[10:37:09] <Matthias247> but for which framework? completely from scratch?
[10:37:10] <skrylar> that was not fun
[10:37:21] * skrylar remembers the haunting pages of the UTF BIDI report
[10:37:22] <strcat> afaik the two real font stacks are pango and qt
[10:37:25] <Matthias247> or based no GTK or something like this?
[10:37:27] <strcat> and they just sit on top of freetype
[10:37:40] <skrylar> well, mines based on SDL
[10:37:47] <Matthias247> ok
[10:38:06] <skrylar> GTK and Qt aren't really great for games or GUIs that go inline with heavy GL use
[10:38:14] <Tobba> can we just kill RTL languages
[10:38:16] <Tobba> fuck em
[10:38:33] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:38:39] <skrylar> i mean sure, use gtk or qt if you want
[10:38:42] <Tobba> mostly kidding of course but supporting that is amazingly awful
[10:38:47] <skrylar> i just don't want 30mb of runtime to put a button on the screen
[10:39:31] <skrylar> or in the case of GTK, 30mb of runtime and archaic platform support on windows
[10:39:34] <dbaupp> wycats: you can't
[10:39:41] <dbaupp> wycats: it's a bug too
[10:39:47] <wycats> https://github.com/mozilla/rust/issues/10617 ?
[10:40:00] <dbaupp> wycats: yeah
[10:40:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:40:11] <dbaupp> wycats: the fix is actually next in the queue: https://github.com/mozilla/rust/pull/11626
[10:40:19] <wycats> is there a way to get data out of a proc then?
[10:40:19] <dbaupp> coincidentally
[10:40:20] <wycats> ha
[10:40:25] <wycats> such coincidence
[10:40:35] <dbaupp> "out of a proc"?
[10:40:46] <dbaupp> oh, I see
[10:40:55] <wycats> proc() { ... get data out of here ... }
[10:40:55] <dbaupp> only via return value
[10:41:02] <dbaupp> or by channels
[10:41:27] <wycats> hm and task.run() returns ~Task
[10:41:29] <wycats> not the return
[10:42:00] <wycats> I probably need to do this when I'm more awake
[10:42:15] <strcat> skrylar: pango, not gtk ;p
[10:45:14] *** Joins: mib_mmhasq (Mibbit@moz-FF9F15DD.dip0.t-ipconnect.de)
[10:45:39] <wycats> it's compiling O_O
[10:45:45] <wycats> it's in libextra
[10:45:54] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[10:46:48] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[10:47:03] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[10:49:26] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[10:50:57] *** Joins: Kambfhase (quassel@moz-9BB02FDA.travedsl.de)
[10:51:28] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[10:55:10] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:56:37] <skrylar> egads
[10:56:42] <skrylar> i just tested out of curiosity
[10:56:47] <skrylar> krita uses 200mb to idle
[10:59:06] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:59:30] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:59:36] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:59:42] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:59:53] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:00:00] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[11:00:07] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[11:00:11] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:00:17] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[11:00:29] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:01:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:01:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:01:53] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:02:10] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[11:02:49] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:02:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:02:52] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[11:04:29] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:04:31] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[11:04:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:04:50] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:04:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:05:44] *** Quits: mib_mmhasq (Mibbit@moz-FF9F15DD.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[11:06:18] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:06:27] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[11:08:31] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:08:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:08:33] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[11:08:57] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:10:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:11:49] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[11:12:54] *** Joins: nkoep (nik@moz-433CB284.pool.mediaways.net)
[11:13:37] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[11:14:00] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[11:15:51] <weirdo> how do I fix this name importing problem? https://gist.github.com/anonymous/d833dc218c9fddc227a6
[11:15:52] *** Quits: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[11:17:52] <Kambfhase> 'module wasn't actually a module!'
[11:17:57] <Kambfhase> fix that
[11:18:38] <wycats> cannot capture variable of type `std::option::Option<&str>`, which does not fulfill `Send`, in a bounded closure
[11:18:53] <wycats> hm... you can't send &str into a procedure?
[11:18:56] <Ms2ger> Sounds like you need a copy
[11:19:09] <wycats> I think I misunderstand procedures
[11:19:24] <wycats> fn foo(string: &str) { do spawn { string } } <= no go?
[11:19:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:21:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:21:40] *** Quits: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de) (Input/output error)
[11:22:31] *** Joins: eibwen (kvirc@moz-6D9D6D14.dip0.t-ipconnect.de)
[11:22:50] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[11:22:52] *** Joins: ling0322 (Mibbit@B2B4D297.879B3CA7.AC7F8427.IP)
[11:23:26] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[11:23:42] <ling0322> how can i use HashSet::from_iterator? i tried but it tells me unresolved name `HashSet::from_iterator`
[11:27:49] <eddyb> wycats: foo returns before the procedure may even start
[11:28:05] *** Joins: mib_3awta4 (Mibbit@moz-E02EA2F2.hsi.kabel-badenwuerttemberg.de)
[11:28:12] *** Quits: mib_3awta4 (Mibbit@moz-E02EA2F2.hsi.kabel-badenwuerttemberg.de) (Quit: mib_3awta4)
[11:28:28] <wycats> hmmmm
[11:28:31] <wycats> in my case it's synchronous
[11:28:33] <eddyb> wycats: &'static str should be Send - for everything else, you'll want something like Arc<~str> (so you don't make pointless copies)
[11:28:43] <eddyb> wycats: spawn isn't sync
[11:28:49] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[11:28:53] <wycats> in my case it happens to be sync :P
[11:28:55] <eddyb> it cannot be guaranteed to be sync
[11:28:57] <wycats> spawn was an example
[11:29:00] <eddyb> oh
[11:29:06] <wycats> I guess what I want is the non-existent once closure
[11:29:14] <eddyb> wycats: you may want to use stack once closures
[11:29:23] <wycats> do they exist?
[11:29:26] <eddyb> which, yeah, not there yet
[11:29:28] <wycats> I was under the impression that they did not
[11:29:29] <wycats> :P
[11:29:29] <wycats> ok
[11:29:31] <wycats> sgb
[11:29:49] <eddyb> wycats: is the "once" part a strong requirement?
[11:29:53] <wycats> I was refactoring task.run to take a procedure, but I think what I actually want is a once-closure
[11:29:56] <wycats> eddyb: yes
[11:30:07] <wycats> eddyb: this is to make the abstraction useful without option dances
[11:30:38] <wycats> I can't write a macro that abstracts over the code to run in a task if I need to option-dance in order to use it
[11:31:03] <wycats> and both procedures and closures have abstraction-breaking properties, it seems
[11:31:13] <wycats> procedures can't accept moved-in references
[11:31:38] <wycats> and closures can't move in owned references
[11:31:54] <wycats> procedures block &T and closures block ~T
[11:32:08] <wycats> once closures allow both &T and ~T, but don't exist
[11:32:09] <wycats> wheee
[11:32:50] <ling0322> how can i use HashSet::from_iterator? i tried but it tells me 'unresolved name `HashSet::from_iterator`' <- anyone can help me QAQ
[11:32:53] <wycats> I could write a procedural macro that looks for ~T and does the option dance before calling task.run
[11:33:03] <wycats> ling0322: use std::hashmap::HashSet
[11:33:09] <eddyb> ling0322: pretty sure from_iterator is used by collect
[11:33:35] <wycats> eddyb: blah
[11:33:44] <dbaupp> ling0322: just use .collect() on the iterator
[11:33:52] <eddyb> ling0322: let set: HashSet<T> = iter.collect();
[11:33:52] <dbaupp> ling0322: or, FromIterator::from_iterator
[11:34:12] <dbaupp> associated functions from traits have to be called via the trait, not the type
[11:34:14] <ling0322> let me have a try ....
[11:34:31] <wycats> dbaupp: eddyb: I'm pretty sure he just didn't import HashSet
[11:34:48] <eddyb> wycats: see dbaupp's last comment
[11:35:05] <eddyb> wycats: we'll have unboxed closures at some point, and hopefully a way to control captures like in C++11. too bad we're not there yet :(
[11:35:42] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:35:47] <wycats> eddyb: I don't care about controlling captures here
[11:35:59] <ling0322> i imported std::hashmap::HashMap;
[11:36:04] <wycats> what I want is a closure that statically can only be called once but is known to be called now
[11:36:25] <wycats> it's just a semantic hole in what we have
[11:36:41] <wycats> and it makes it hard to write certain kinds of syntactic abstractions
[11:36:49] <ling0322> ok, it works, thank you! @dbaupp @wycats @eddyb
[11:36:55] <wycats> yay!
[11:37:08] <wycats> eddyb: I'm glad to hear that once closures are coming
[11:37:13] <wycats> the issue seemed stalled
[11:38:39] <eddyb> wycats: we kinda need variadic generics for the Fn traits so we can progress
[11:38:41] *** Joins: moostik (Icedove@moz-2B884898.w83-199.abo.wanadoo.fr)
[11:38:51] <wycats> :shipit:
[11:38:54] <eddyb> and it's basically my fault that the entire thing is stalled :P
[11:38:58] <wycats> ;(
[11:39:02] <wycats> I really need variadic sleep
[11:39:35] <wycats> eddyb: am I right in reading variadic generics as also capable of allowing arity-overloaded functions?
[11:39:57] <eddyb> wycats: yeah, albeit a bit hacky
[11:40:03] <wycats> yeah
[11:40:08] <wycats> syntax sugar can come later :P
[11:40:11] <eddyb> (no specialization like in C++, just implementing a trait)
[11:40:17] <wycats> c
[11:40:28] <wycats> macro that shit :P
[11:40:40] <wycats> ok I'm going to bed
[11:40:50] <wycats> sad that my procedure patch isn't actually the right move
[11:41:28] <wycats> for posterity: https://gist.github.com/56ab99d667e417559e28
[11:41:56] <wycats> I kind of want the "run returns a tuple of task and result" change regardless
[11:42:32] <wycats> tomorrow
[11:42:58] <eddyb> wycats: we already have a "scope guard"
[11:43:06] <eddyb> wycats: it's "finally"
[11:43:16] <dbaupp> eddyb: that's not RAII
[11:43:28] <dbaupp> (at least, it's a different kind of RAII)
[11:43:47] <eddyb> dbaupp: it uses RAII internally
[11:44:01] <eddyb> dbaupp: no reason why we couldn't expose Finallyalizer as ScopeGuard
[11:44:03] <dbaupp> eddyb: I know
[11:44:09] <dbaupp> eddyb: yes, but we don't
[11:45:46] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[11:46:29] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[11:46:33] <dbaupp> wycats: so, anyway, I have thing that handles creating a .h for function definitions with primitive types & pointers
[11:46:48] <dbaupp> but... as you said, the details of structs and enums etc are killing it
[11:49:42] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[11:50:44] *** Quits: ling0322 (Mibbit@B2B4D297.879B3CA7.AC7F8427.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:51:26] <doomlord_> been out of rust for a while, i remember talk of @ being removed , moving to generalized smart pointers, whats the latest thinking/changes there
[11:51:48] <doomlord_> even ~ might be removed i heard
[11:51:48] <Ms2ger> @mut is dead, @ is on its way out
[11:52:06] *** Joins: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com)
[11:52:38] <Ms2ger> I don't think the jury is in on ~
[11:52:45] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[11:53:25] <doomlord_> ~[T] would be Vec<T>   ~T Uniq<T> ... 
[11:53:29] <eddyb> well, ~ won't be an operator, we'll use box to allocate smart ptrs
[11:53:37] <eddyb> doomlord_: we already have Vec<T> btw
[11:53:42] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[11:54:07] <eddyb> (and it's faster than ~[T] - easier to add Vec<T> in the library than fix ~[T])
[11:54:18] <FreeFull> In Haskell, you can create an IO action and then send it over a Chan. Would anything like that be possible in Rust?
[11:54:36] <doomlord_> semantically the same but compiles differently?
[11:54:53] <dbaupp> eddyb: it's not faster than ~[T] for iterating :P
[11:54:58] *** Quits: Kambfhase (quassel@moz-9BB02FDA.travedsl.de) (Client exited)
[11:55:01] * skrylar ponders idly how the ethics of copying a program go
[11:55:01] <eddyb> dbaupp: that's a LLVM issue :/
[11:55:01] <dbaupp> FreeFull: yes
[11:55:09] <dbaupp> eddyb: yup, still affects us though :P
[11:55:11] <Matthias247> you can send a proc that performs IO through a channel ;)
[11:55:22] <dbaupp> FreeFull: send `proc()`
[11:55:31] <skrylar> I'm not normally a fan of clones, but I'm curious of "that was so heinously overpriced and the licensing is crap" is a valid reason to consider copying
[11:55:57] <kimundi> doomlord_: It has the same API, but is implemented differerntly, and in a library.
[11:56:11] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:56:35] <doomlord_> does that mean there's 'overloading' of operator[]  like in c++
[11:56:47] <kimundi> doomlord_: Specifically, with Vec<T>, a initial empty vector did not do a heap allocation
[11:57:04] <eddyb> doomlord_: Index
[11:57:15] <eddyb> s/did/does/
[11:57:45] <eddyb> (length, capacity, *data) rather than *(length, capacity, ..data)
[11:57:51] <kimundi> doomlord_: Well, operators are a different story - I'm not sure if Vec implements the Index traits, but they are getting overhauled anyway. The plan is for those operators to be user implementable in the end anyway.
[11:57:57] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[11:58:21] <eddyb> kimundi: they already are user implementing. one possible overhauling is to make them variadic :P
[11:58:27] <eddyb> s/implementable/
[11:58:37] <kimundi> eddyb: Well and all the XAssign ones
[11:58:38] <eddyb> wtf did I do there? I need more sleep
[11:58:57] <eddyb> kimundi: oooh, IndexAssign? I didn't actually think of that one
[11:59:26] <kimundi> foo[bar] = baz // not sure if that is possible to overwrite today, but it will be somewhere in the future
[11:59:50] <eddyb> being generic over mutability would be interesting, so &mut Vec<T> can give you a &mut T, but &Vec<T> only a &T
[12:00:19] <eddyb> IndexAssign is better for maps, where C++ does something silly with the default constructor
[12:01:15] <kimundi> doomlord_: A lot of interesting stuff landed in the last few weeks/months
[12:01:40] <kimundi> doomlord_: For example, exportable declarative and procedural macros
[12:01:57] <eddyb> remind me to overhaul quote_*
[12:02:09] <kimundi> eddyb: <eddyb> remind me to overhaul quote_*
[12:02:24] <kimundi> ;D
[12:02:25] <eddyb> to support ${value} instead of just $local_name
[12:02:57] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:03:09] <doomlord_> any links on that.. "exportable declarative and procedural macros"
[12:03:39] <kimundi> doomlord_: I recommend just browing through http://cmr.github.io/
[12:03:59] <kimundi> Nice weekly summaries
[12:04:12] <dbaupp> eddyb: you'll need to overhaul the tokeniser & parser too :P
[12:04:20] <dbaupp> (to support ${<expr>})
[12:04:33] <eddyb> I doubt there's a lot of people having worked with ES6 quasi/template strings that would now be fiddling with quote_*, but ${value} is easier to understand than $local_name
[12:04:38] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:04:39] <eddyb> dbaupp: how so?
[12:04:41] <kimundi> doomlord_: Re macros specifically: its not yet documented, but the PR that added it has a code example of how it looks
[12:05:09] <WebeWizard> sorry to trouble you, but hooowwwww do i turn off unnecessary parenthesis warnings?
[12:05:24] <eddyb> dbaupp: is it invalid syntax?
[12:05:52] <eddyb> dbaupp: macro_rules parses $(...)* and stuff, I somehow doubt ${...} doesn't work
[12:06:26] <eddyb> just parsing a block after $ would be enough in ext/quote.rs
[12:06:55] <eddyb> WebeWizard: is it one of the new shiny lints?
[12:07:01] <kimundi> WebeWizard: Apart from not not using unnecessary parenthesis? ;) - it should print some kind of attribute that causes it, like #[warn(unecessary...)] - copy that in your module, change the warn to allow, and add a semicolon at the end
[12:07:08] <eddyb> WebeWizard: remove the extra parens :D
[12:07:24] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[12:07:40] <WebeWizard> the extra parenths make it more readable to me :P
[12:07:59] <WebeWizard> kimundi, thanks i'll give it a shot
[12:08:01] *** Quits: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch) (Ping timeout)
[12:08:36] <WebeWizard> parenthesis turn: while witchcraft {}
[12:08:57] <WebeWizard> into: while ( ( I am a logical ) set of conditions ) {}
[12:09:37] *** Joins: alexherbo2 (alexherbo2@moz-FC10E83F.de)
[12:09:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:10:16] <Armavica> WebeWizard: #[allow(unnecessary_paren)] ?
[12:10:39] <Armavica> I've not tested it but it seems reasonable
[12:10:44] <eddyb> we should lint every little Rust style point :P
[12:10:50] <WebeWizard> Armavica, kimundi : Thank you, that worked.
[12:10:54] <dbaupp> eddyb: oh, I guess it does work
[12:11:09] <eddyb> you like spaces inside parens? NOPE
[12:11:16] *** Joins: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch)
[12:11:33] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:12:02] <WebeWizard> if rustc gives me warnings for every space inside of parens... i just might die
[12:12:20] * dbaupp implements a lint for spaces inside parens
[12:12:54] * WebeWizard death
[12:13:07] <dbaupp> :P (the compiler doesn't actually support linting on many formatting things... parens is basically the only thing.)
[12:13:31] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[12:14:04] <Armavica> indeed I was suprised not to see a lint for too long lines
[12:14:27] <WebeWizard> lint on tabs instead of four spaces...
[12:14:37] <Armavica> oh yeah
[12:14:42] <dbaupp> lint on use of an editor other than emacs
[12:14:48] <Armavica> *vim
[12:14:49] * dbaupp flamewar
[12:14:57] <WebeWizard> lol
[12:15:01] * Armavica jumps into it
[12:15:20] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:15:58] <eddyb> pnkfelix: hi. which side do you take?
[12:16:23] <WebeWizard> gedit...
[12:16:26] <mankyKitty> I was actually curious about editor/workflow usage of rust peeps... 
[12:17:01] <mankyKitty> Since I treat editors like pokemon...
[12:17:08] <eddyb> kdevelop4 (yay work sets are back)
[12:17:48] <kimundi> Kata :P
[12:17:57] <WebeWizard> i'm crossing my fingers for a convenient eclipse plugin
[12:18:02] <Armavica> a wild notepad appears !
[12:18:04] <kimundi> eddyb: Btw, did you ever fix Rusts kate highlining?
[12:18:25] <kimundi> Or is that still on ice :D
[12:18:43] <eddyb> bah, so many things to do
[12:19:30] <mankyKitty> eddyb: never enough time... stupid "real life" ;)
[12:19:49] *** Joins: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP)
[12:19:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:21:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:23:25] <eddyb> mankyKitty: with that I had no time
[12:23:36] <eddyb> now I have *some* time
[12:23:47] <eddyb> kimundi: https://etherpad.mozilla.org/k14brBnFZa feel free to add to it. I'll try to use it more :P
[12:23:51] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[12:24:02] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[12:24:11] <kimundi> lol
[12:24:13] *** Joins: Ferreus (ferreus@moz-3B955C3A.pools.arcor-ip.net)
[12:24:43] <mankyKitty> eddyb: I have time, but little experience with sys langs so I spend most of my time trying to understand :P
[12:24:45] *** Quits: alexherbo2 (alexherbo2@moz-FC10E83F.de) (Quit: WeeChat 0.4.2)
[12:25:30] <eddyb> and then it will be easy to understand it
[12:25:39] <mankyKitty> If anyone is interested, I've forked a rust-koans repo and I'm trying to update it. PRs, tips, recommendations gratefully accepted: https://github.com/mankyKitty/rust-koans
[12:25:44] <mankyKitty> eddyb: Hope so!
[12:25:47] <eddyb> but then you have to understand *what you're working on*
[12:25:56] <eddyb> like, rustc internals
[12:26:23] <mankyKitty> Yeah I've bitten off a big one with that ICE bug I'm looking at.. it's tough going ><
[12:26:27] <Armavica> do you know a way to get the size of a vector?
[12:26:36] <eddyb> Armavica: .len()?
[12:26:58] <Armavica> ah, I thought I also tried that
[12:27:00] <Armavica> thank you
[12:27:04] <WebeWizard> ya, the documentaton never really makes it clear that .len() exists, but it does
[12:27:11] <WebeWizard> it's in the cheatsheat anyways
[12:27:21] <eddyb> WebeWizard: ImmutableVector. wait, no. Container?
[12:27:24] <eddyb> it's *somewhere*
[12:27:42] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:27:50] <dbaupp> Container
[12:28:15] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[12:28:37] <eddyb> dbaupp: is that even used as a bound *anywhere*?
[12:29:07] <Armavica> and how does it also work for a vector?
[12:29:32] <kimundi> Armavica: hm?
[12:29:34] <Armavica> I guess a vector is a container?
[12:29:44] <weirdo> are there any plans to change static trait methods so that they can be called on the type implementing them rather than the trait itself?
[12:29:46] <WebeWizard> as a new user, if it's not listed under std::vec::* in the docs, therefore it must not exist
[12:29:47] <eddyb> Armavica: it's a trait
[12:29:55] <eddyb> WebeWizard: use the search bar
[12:30:17] <dbaupp> WebeWizard: it's a bug
[12:30:25] <dbaupp> work on fixing it is progressing
[12:30:28] <eddyb> weirdo: the proper solution would be Trait::<for T>::method
[12:30:49] <eddyb> about that, is there any reason why we haven't done it already?
[12:30:49] <dbaupp> but, yes, it's definitely not good that primtiive types are so poorly documented
[12:31:12] <dbaupp> weirdo: people are pushing for that
[12:32:17] <Armavica> eddyb: then shouldn't it be mentioned on the page http://static.rust-lang.org/doc/master/std/vec/index.html ?
[12:32:41] <eddyb> Armavica: that's just what's in that module
[12:33:00] <eddyb> Armavica: it's not magically linked to [T]
[12:33:02] <WebeWizard> Armavica, This document has helped me out a few times http://static.rust-lang.org/doc/master/complement-cheatsheet.html
[12:33:04] <kimundi> eddyb: I think there was confusing about what would be the best course of action - <for T>, or allowing T:::trait_method llokup just like for methods - but I think the current stance is actually to implement both, the latter for actual usage, the former in case you need to be specific
[12:33:07] *** Quits: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au) (Quit: kvanb)
[12:33:33] <eddyb> Armavica: http://static.rust-lang.org/doc/master/std/container/trait.Container.html
[12:33:34] <dbaupp> Armavica: yes, it should
[12:33:35] <dbaupp> but bugs
[12:34:49] <Armavica> ok, thank's all
[12:36:22] <Armavica> as a newcomer, I find the docs not that intuitive
[12:36:55] <kimundi> Armavica: Btw, the bug is that the types ~[T] and &[T] are defined by the compiler itself, and as such do not appear in any library docs
[12:37:11] *** Joins: oberstet (quassel@moz-82FA2EA.dynamic.mnet-online.de)
[12:37:18] <Armavica> oh, I see
[12:38:07] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Client exited)
[12:40:56] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[12:41:23] <dbaupp> kimundi: (well, the bug that's directly relevant is "primitive types like ~[T] and &[T] do not appear in the docs", the resolution may or may not be moving them out of the compiler.)
[12:41:50] <pnkfelix> eddyb: "side" ?
[12:41:58] <dbaupp> in either case, rustdoc will be changed to handle this
[12:42:34] <dbaupp> pnkfelix: trying to pull you into an editor flamewar :P https://botbot.me/mozilla/rust/msg/10190129/
[12:42:50] <newguy> hey guys, so I'm trying to open the contents of a file in my current working directory. i have the /<path> but im not sure how to open the file in rust and read it
[12:43:18] <dbaupp> newguy: http://static.rust-lang.org/doc/master/complement-cheatsheet.html#how-do-i-read-from-a-file
[12:43:35] <newguy> thanks!
[12:43:36] <dbaupp> meh, that's kinda a crappy example w.r.t. error handling :(
[12:43:45] <pnkfelix> Well I'm hoping at some point to get Rust support into DrRacket
[12:43:59] <newguy> thats ok, i think i can use match statements to handle errors
[12:44:02] <pnkfelix> but even then I probably wouldn't use that as my primary editor
[12:44:17] *** flaper87|afk is now known as flaper87
[12:44:25] <newguy> going afk...
[12:44:52] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[12:47:15] *** Joins: Kjelle (karl@moz-58495553.static.spa.siw.siwnet.net)
[12:49:41] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[12:50:02] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:51:43] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:53:52] *** Quits: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP) (Ping timeout)
[12:54:09] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[12:55:32] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:55:44] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[12:56:47] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:57:00] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[13:01:38] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Connection reset by peer)
[13:01:45] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[13:01:45] *** Joins: fabiand (fabiand@moz-7CCE2976.adsl.alicedsl.de)
[13:01:48] *** Joins: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr)
[13:03:17] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[13:03:56] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[13:04:12] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[13:04:58] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:07:56] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[13:11:10] *** Quits: fabiand (fabiand@moz-7CCE2976.adsl.alicedsl.de) (Quit: Verlassend)
[13:12:19] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[13:13:47] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:14:48] *** Quits: FliPPeh (flippeh@moz-5A449869.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.2)
[13:15:25] *** Joins: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de)
[13:18:18] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[13:18:56] *** Joins: pyon (user@5D202184.695050F8.E6392873.IP)
[13:20:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:20:18] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[13:21:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:22:42] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[13:23:00] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[13:24:00] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Quit: Leaving.)
[13:24:09] <newguy> what does read_whole_file() return?
[13:24:12] <newguy> a ~str?
[13:24:20] <newguy> or ~[u8]
[13:24:20] <newguy> ?
[13:24:35] <kimundi> newguy: Where is it defined?
[13:24:57] <newguy> std::io
[13:25:22] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[13:25:51] <newguy> my goal is to put a file's entire contents into a str
[13:26:06] <pnkfelix> newguy: I don't see it in std::io ...
[13:26:19] <newguy> http://web.mit.edu/rust-lang_v0.8/doc/std/io/fn.read_whole_file.html
[13:26:28] <pnkfelix> newguy: ah okay v0.8
[13:26:30] <kimundi> That'S ancient xD
[13:26:36] <newguy> lol
[13:26:43] <pnkfelix> newguy: I see, you're trying to read the `Result` type
[13:26:53] <newguy> i'm not sure how to use that
[13:26:53] <pnkfelix> newguy: Result<A, B> is a  type that means
[13:27:10] <pnkfelix> newguy: "I give back an A.  Unless there's an error, in which case the result holds a B"
[13:27:27] <newguy> ahhh
[13:27:33] <newguy> thank you!
[13:27:37] <pnkfelix> newguy: So read_whole_file since Result<~[u8], ~str>, you will get back a ~[u8] unles 
[13:27:41] <pnkfelix> s there's an error
[13:28:18] <pnkfelix> newguy: click the link for Result in that doc to see how its structured; you can use `match` to handle the cases, or use its methods.
[13:28:26] <newguy> ok
[13:28:51] <kimundi> (I'd recommend updating to at least 0.9 though, better even current git master)
[13:31:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[13:31:44] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Input/output error)
[13:32:05] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[13:32:55] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Connection reset by peer)
[13:32:56] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[13:35:43] *** Joins: amir (amir@moz-49060BB9.cust.bluewin.ch)
[13:37:41] <newguy> if i have a string like "/file.txt", do i have to remove the '/' before it being a valid &path parameter?
[13:37:50] <newguy> if it is in my current working directory
[13:37:58] <newguy> ?
[13:38:28] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[13:39:58] <kimundi> newguy: No idea how it worked in 0.8, but I'm guessing thaty you either need to start with a "./file.txt" or "file.txt" to get something relative to the current working directoriy
[13:40:01] *** Joins: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net)
[13:40:24] <kimundi> As "/file.txt" is a absolute path, at least under unix systems#
[13:40:24] <newguy> ok, i'll try both
[13:40:45] <bvssvni> newguy: might try "./file.txt" as well
[13:46:01] <newguy> compiler error says that io::read_whole_file is an unresolved name. i'm running v0.9, does that mean its no longer included?
[13:46:13] <kimundi> yes
[13:46:14] *** Joins: new_one (new_one@297327D5.92B2BFC6.B3C0173E.IP)
[13:46:17] <newguy> :(
[13:46:32] <kimundi> io got changed a lot between 0.8 and 0.9
[13:46:49] <newguy> does anyone know of an alternative to read the entire file as an ~[u8] or ~[str]
[13:46:50] <newguy> ?
[13:46:52] <Yurume> does `rustpkg install foo` for the crate_type "bin" install the shared object to `bin/` as well?
[13:47:07] <kimundi> Yurume: Don'T think so
[13:47:10] <bvssvni> newguy: there is a 'read_to_end" method in newer io
[13:47:11] <Yurume> gah.
[13:47:12] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[13:47:23] <kimundi> newguy: http://static.rust-lang.org/doc/master/complement-cheatsheet.html#file-operations
[13:48:00] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[13:48:09] <kimundi> Oh, that on_error patterns looks nice!
[13:48:25] * kimundi just saw that cheatsheet for the first time
[13:49:47] <Yurume> kimundi, the current rustpkg can't really be used for cross-repo dependency tracking, so I tried to build rust-sdl with rustpkg and then build my program with Make
[13:50:35] *** Joins: rca_ (rcatolino@moz-585FE07D.adsl.proxad.net)
[13:50:43] <kimundi> Yurume: Actually, I think I misunderstood your question, in which case I have no idea how the answer is :P
[13:51:26] <bvssvni> Yurume: I believe it does, if I remember correctly
[13:51:47] <Yurume> kimundi, well, `rustpkg build sdl` creates `build/<triple>/sdl/sdl*.so`
[13:51:52] <Yurume> with varying <triple>
[13:51:53] *** Quits: rca (rcatolino@moz-5E0A44D2.adsl.proxad.net) (Ping timeout)
[13:52:32] <Yurume> hmm, wait, even when it is installed in bin/ somehow, I can't really use that in Make as sdl*.so contains hash in its file name, duh.
[13:52:39] <Yurume> I think rustc has some option for that though
[13:53:02] <bvssvni> Yurume: I thought the hash was removed when installed to bin
[13:53:29] <Yurume> really?
[13:53:44] <Yurume> anyway, rustpkg install sdl seems to do nothing
[13:53:45] <Yurume> for m
[13:53:46] <Yurume> e
[13:54:23] <bvssvni> Yurume: it doesn't copy it to the local 'bin' folder?
[13:54:59] <Yurume> nope
[13:55:12] <Yurume> though the `bin` directory itself is created in process
[13:55:30] <nham> does anyone know why I'm getting "recipe for target 'tidy' failed" when running "make check" on rust master? full verbose output: http://pastebin.com/Fhhs9DxX
[13:57:00] <newguy> just fyi, "./filename.txt" doesn't constitute a &path. "filename.txt" does
[13:57:03] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[13:57:28] <bvssvni> newguy: good to know!
[13:57:52] <newguy> alrighty, signing off now! thanks for the help guys, ill be on again later
[14:02:49] *** Quits: alexherbo2 (alexherbo2@moz-FE8DA79A.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[14:03:00] *** Joins: mib_w9jtg7 (Mibbit@7CFF614E.365E6653.99F8A076.IP)
[14:03:01] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:03:45] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:05:26] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:05:38] <Yurume> bvssvni, okay, specifying the crate id fully (i.e. "sdl#0.3.1") helped, but it installed `lib/<triple>/libsdl-<hash>-0.3.1.so` anyway :)
[14:05:43] <Yurume> installed to*
[14:05:53] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[14:07:13] *** Quits: mib_w9jtg7 (Mibbit@7CFF614E.365E6653.99F8A076.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:07:36] *** Joins: Rui (rui@76AC059.672E3962.8368921A.IP)
[14:10:04] <bvssvni> Yurume: rustpkg should have a -v flag
[14:10:12] <Yurume> indeed
[14:10:16] *** Joins: Earnestly (earnest@D966D76B.1ED7F176.BFD1ABFD.IP)
[14:11:24] *** Quits: Rui (rui@76AC059.672E3962.8368921A.IP) (Quit: )
[14:11:28] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[14:11:38] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[14:11:45] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[14:12:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:13:48] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:16:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:16:50] *** Quits: new_one (new_one@297327D5.92B2BFC6.B3C0173E.IP) (Client exited)
[14:17:24] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[14:17:44] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[14:18:30] *** Joins: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de)
[14:18:45] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:19:19] *** jorendorff_away is now known as jorendorff
[14:19:28] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:20:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:21:16] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[14:22:02] *** jorendorff is now known as jorendorff_away
[14:22:03] *** Joins: mib_d0iqb6 (Mibbit@moz-E58BD7B5.vo47.ru)
[14:22:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:22:48] *** Quits: mib_d0iqb6 (Mibbit@moz-E58BD7B5.vo47.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[14:24:45] *** jorendorff_away is now known as jorendorff
[14:24:54] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:26:50] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[14:27:34] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[14:29:17] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[14:30:21] *** Joins: jensnock_ (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com)
[14:31:11] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[14:34:35] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:34:35] *** Joins: elux (peter@moz-34C3066.dsl.bell.ca)
[14:34:54] <SiegeLord> Heh, I'm using method names like len(), get() etc in my vector traits, and they are conflicting with the same from traits in std :P
[14:35:01] *** Joins: new_one_ (new_one@8F21257C.4B0DC706.B3C0173E.IP)
[14:35:11] <SiegeLord> Which points to the std traits not being so useless after all
[14:35:35] <SiegeLord> I wish there were more of them, so I could reuse them better...
[14:36:41] <bvssvni> SiegeLord: what about adding a prefix?
[14:37:04] <bvssvni> SiegeLord: expr_len(), expr_get()
[14:37:14] <SiegeLord> It's only a problem if I wish to treat Rust's vectors as vectors in my library
[14:37:42] <marianoguerra> is "static foo:i32 = 21" the correct way to declare module constants? (like #define in C)
[14:38:04] <bvssvni> SiegeLord: it would be easier if Rust allowed multiple functions with same names
[14:38:34] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[14:38:42] <bvssvni> marianoguerra: yes
[14:39:48] <SiegeLord> And I can't actually use ImmutableVector trait myself, as it has the wrong self for the slicing methods
[14:39:59] <SiegeLord> I guess I'll abandon Rust's vectors, heh
[14:40:01] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:40:16] <bvssvni> SiegeLord: you can wrap them in their own structs though
[14:40:18] <marianoguerra> bvssvni: thanks
[14:40:33] <SiegeLord> bvssvni: That's what I am/was doing
[14:40:49] <SiegeLord> Problem is... that forces a heap allocation in the trivial case
[14:40:58] <SiegeLord> I guess that's where DST would help things
[14:41:02] <bvssvni> SiegeLord: an alternative is to use static functions
[14:41:03] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:41:18] <bvssvni> SiegeLord: this is what I ended up with in my indexing library
[14:41:24] <kimundi> Yeah, with DST you could do struct MyVec { priv v: [T] }
[14:42:43] *** jorendorff is now known as jorendorff_away
[14:42:48] <bvssvni> kimundi: nice, so it will be faster then
[14:43:38] <strcat> bvssvni: not really... ~[T] and &[T] are distinct types atm
[14:43:43] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[14:43:44] <Tobba> so uh
[14:43:50] <Tobba> when will we get DSTs anyways
[14:43:50] <strcat> a trait implementing for &[T] (like ImmutableVector) is not implemented for ~[T]
[14:43:56] <strcat> although ~[T] will coerce to &[T]
[14:44:01] <strcat> but it won't count as implementing it
[14:44:17] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[14:45:19] *** Joins: heftig (heftig@moz-1F9C34E6.dip0.t-ipconnect.de)
[14:46:01] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:46:21] <mankyKitty> Is there a way I can switch off the 'dead_assignment' warning for a single variable? It's not production code and never will be production code, just fyi. ;)
[14:46:34] <doener> let _x = 5;
[14:46:50] <doener> the compiler won't warn about variables that start with a underscore
[14:46:51] <mankyKitty> doener: cheers
[14:47:03] <SiegeLord> mankyKitty: Some corporation might hack your computer and take your code and sell it!
[14:47:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:47:16] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[14:47:22] <kimundi> Tobba: When the devs decided to do it, and start implementing it - its not yet set in stone, but after nmatsakis went full cycle with the design to end up at see http://smallcultfollowing.com/babysteps/blog/2014/01/05/dst-take-5/, it will probably land in that form.
[14:47:37] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[14:48:08] <bvssvni> kimundi: 404
[14:48:21] <kimundi> http://smallcultfollowing.com/babysteps/blog/2014/01/05/dst-take-5/
[14:48:27] <kimundi> stray comma at the end
[14:48:55] <mankyKitty> I'm not entirely convinced I want to get rid of the warning if it complicates this code too much (writing koans).. not sure which is worse, the compiler warning a newbie or teaching variables that don't trigger the right warnings
[14:49:20] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[14:49:31] <dbaupp> mankyKitty: you can also just use `#[allow(dead_assignment)];`
[14:50:21] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[14:50:23] <mankyKitty> dbaupp: ahhh that's better.. 
[14:50:53] <bvssvni> mankyKitty: you can also use '_' as variable name to ignore it
[14:51:42] <mankyKitty> bvssvni: Yeah doener just pointed that one out to me too.. in this case I think the #[] solution is best... maybe
[14:52:29] *** Quits: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au) (Quit: Leaving.)
[14:53:11] <bvssvni> mankyKitty: if you don't need the variable elsewhere, you can use just '_', like in 'let _ = 10;'
[14:53:53] <nham> is there anything I need to do to make the test suite work besides cloning the rust repo and running "./configure" ? after doing this, make check fails
[14:53:53] <bvssvni> rusti: let (x, _) = (1, 2); x
[14:54:00] <nham> full verbose output is here: http://pastebin.com/Fhhs9DxX
[14:54:32] <bvssvni> looks like rusti is offline
[14:54:55] <mankyKitty> bvssvni: yep yep. But in this case my code is meant to be demonstrating something, and I didn't want to introduce alternate syntax like that yet, and I wanted to just avoid compiler warnings that weren't really useful in this instance.
[14:55:11] <bvssvni> mankyKitty: ah :)
[14:55:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:55:50] <mankyKitty> bvssvni: I found a rust-koans repo that hasn't been touched for about seven months, so I've forked it and I'm trying to update/improve it
[14:55:53] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:55:56] <flaper87> what does visit_glue do exactly?
[14:56:07] <kimundi> nham: git clone, then ./configure, then make check ought to work
[14:56:15] <kimundi> nham: try just running make first
[14:56:17] <strcat> flaper87: walks the representation of a type, it's the implementation of TyVisitor
[14:56:25] <strcat> awful reflection stuff existing to implement std::repr ;p
[14:56:30] <mankyKitty> bvssvni: because I've still so much to learn about rust as well, this should be good for me. :)
[14:56:39] <flaper87> strcat: oh ok, thanks!
[14:56:48] <dbaupp> nham: that error is rather strange
[15:00:05] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:08] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[15:00:37] <nham> kimundi: thats exactly what i did. i get the output from the pastebin. not sure where to go from here
[15:02:50] <bvssvni> finally! https://github.com/mozilla/rust/pull/11790
[15:03:34] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:03:38] <doener> now I want a gold star, too
[15:03:59] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:04:46] *** Quits: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de) (Client exited)
[15:04:50] <Matthias247> silver star is much cooler ;)
[15:05:08] *** Joins: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de)
[15:05:40] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:05:58] *** Joins: Orwin (Adium@91BD4595.AC80DA87.CC73C50D.IP)
[15:07:33] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[15:07:55] *** Joins: canhtak (canhtak@moz-94ED4C91.wl.t.ulaval.ca)
[15:09:26] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Ping timeout)
[15:10:39] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[15:12:57] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[15:13:09] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[15:14:37] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:15:06] *** Joins: FliPPeh (flippeh@moz-5A449869.dip0.t-ipconnect.de)
[15:15:28] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:19:01] *** Joins: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net)
[15:20:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:22:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:23:35] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[15:24:22] *** Quits: dLog (anonymous@moz-8FAE8709.eastlink.ca) (Ping timeout)
[15:25:16] <marianoguerra> how do I disable #[warn(dead_code)] on a module?
[15:25:30] <kimundi> #[allow(dead_code)];
[15:25:35] *** Joins: gwty (gwtypc@1367F163.6A6162CC.8A00C703.IP)
[15:25:58] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[15:26:00] <marianoguerra> I didn't had the ; at the end and it didn't work
[15:26:08] <marianoguerra> with the ; works.. strage
[15:26:22] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[15:26:52] <kimundi> marianoguerra: A attribute with ; at the end applies to the next item, while a attribute with an ; at the end applies to the parent item
[15:27:05] * o11c points out that that is confusing
[15:27:21] <kimundi> #[allow(dead_code)] mod foo { ... } and mod foo { #[allow(dead_code)]; } are identical
[15:27:25] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[15:27:34] <Ms2ger> kimundi, I think you said "with" twice
[15:27:53] <kimundi> There are planns to change the syntax to something more explicit
[15:29:04] <kimundi> Ms2ger: Hm?
[15:30:00] <Ms2ger> I think at least one of those cases should be about an attribute *without* a ; at the end
[15:30:17] <marianoguerra> kimundi: thanks
[15:30:28] <cmr> bjz: oh, yeah.
[15:30:33] <kimundi> ooh, yeah. whoops :P
[15:30:35] <cmr> bjz: just copy it somewhere in your path ;(
[15:30:44] <bjz> cmr: :(
[15:30:45] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[15:31:14] <kimundi> no ; => next item. ; => parent item
[15:31:45] <Ms2ger> That's what I thought :)
[15:31:49] <marianoguerra> I have some constants in a module and I want to use them in some other file I'm now doing "mod x;" and then "x::constant", is that the correct way?
[15:31:53] <marianoguerra> "use x" complains
[15:31:55] *** Joins: dherman (dherman@32D1164B.EE0ADED3.2C01E229.IP)
[15:31:55] *** ChanServ sets mode: +ao dherman dherman
[15:32:08] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[15:32:26] <Matthias247> you don't need use x when you already have mod x;
[15:32:27] <bvssvni> marianoguerra: yes
[15:32:27] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[15:32:42] <Matthias247> you might need use x::constant;
[15:32:47] <marianoguerra> Matthias247: use x; complains so I'm not using it
[15:32:51] <kimundi> the constant needs to be public to the module
[15:33:10] <marianoguerra> Matthias247: wouldn't that "bring the name to this namespace"? that is I don't have to prefix them?
[15:33:13] <marianoguerra> I want to prefix them
[15:33:28] <kimundi> and use paths are absolute, so if all this is in a submodule then the use path either needs to include that, or be "use self::x::constant"
[15:33:30] <bvssvni> marianoguerra: then the way you did is correct
[15:33:41] <marianoguerra> bvssvni: ok, thanks
[15:33:56] <Matthias247> mod already brings the complete module name in the namespace, so everything is ok here
[15:35:47] <marianoguerra> mod sounds like a definition :)
[15:36:03] <kimundi> mod is a definition :)
[15:36:07] <kimundi> It declares a module
[15:36:09] <marianoguerra> btw, this is my project to learn rust https://github.com/marianoguerra/hkwm
[15:36:10] <newguy> hey guys, why isn't it possible to append strings using +=
[15:36:12] <marianoguerra> a dummy window manager
[15:36:13] <newguy> ?
[15:36:20] *** Joins: Hildar (Mibbit@1F537296.286B12C7.8772DA20.IP)
[15:36:33] <newguy> im trying to create a running ~str in a for loop using +=
[15:36:36] <marianoguerra> kimundi: it declares that the following is that module or what?
[15:36:47] <kimundi> newguy: because we currently lack the proper operator overloading to implement that efficiently - its planned though
[15:37:08] <newguy> ahh ok. how would i go about accomplishing it?
[15:37:16] <kimundi> newguy: just use .push() or .push_str(), I forget which one is the correct one
[15:37:21] <cmr> bjz: and install the deps... on arch it's python2-sh, python2-docopt, and python2-toml
[15:37:25] <newguy> oh ok. thanks. ill try both.
[15:37:53] <Matthias247> marianoguerra: it creates a new module and puts the content of the file into the module
[15:38:21] <Hildar> Is there a way to select()/poll() on TcpStreams yet? Or do I need to do it in C?
[15:38:34] <cmr> bjz: or just install them with pip...
[15:38:36] <kimundi> marianoguerra: mod foo; and mod foo { ... } both declare a module - "use" just imports names form other declared modules into local scope
[15:38:44] <cmr> bjz: if I knew how to use setup.py I'd use those.
[15:39:22] <Matthias247> Hildar: in the stdlib - no
[15:41:36] <Hildar> Matthias247 : Dang, guess I'm brushing up on the ffi then.
[15:41:51] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[15:41:58] <Matthias247> Hildar: I already begun that
[15:42:03] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[15:43:11] <Matthias247> but up to now only for linux with epoll
[15:43:29] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[15:43:41] <Hildar> Matthias247 : Any chance I could take a look? I'm on linux.
[15:43:43] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[15:44:14] <Matthias247> Hildar: the description is here: https://github.com/mozilla/rust/issues/11165#issuecomment-32798282
[15:44:30] <Matthias247> source code will follow soon. still tweeking a few things
[15:44:43] <Hildar> Ah nice, I'll keep an eye on it thanks.
[15:47:08] <bjz> cmr: heh, you need to work on your user experience :P
[15:47:22] <bjz> cmr: I will test though
[15:47:36] <cmr> bjz: I'll try and get a working setup.py together...
[15:47:58] <bstrie_pyro> someone go subscribe to the subreddit so we can have a clean 2700
[15:48:01] <bjz> cmr: that would be super awesome
[15:48:06] <bstrie_pyro> it's driving me batty
[15:48:17] <bjz> bstrie_pyro: can I unsub then sub?
[15:48:24] <bstrie_pyro> bjz: no, it tracks unsubs too
[15:48:31] <bstrie_pyro> would have no net effect
[15:48:41] <bjz> bstrie_pyro: I will have subbed though, which is what you wanted?
[15:48:52] <bjz> you said nothing about net subbing
[15:48:55] <bstrie_pyro> bjz: ok keep doing that over and over
[15:49:06] <bstrie_pyro> bjz: then when someone else subscribes, you will push us up to 2700
[15:49:13] <bstrie_pyro> chop chop!
[15:49:14] <bjz> ok
[15:49:18] <kimundi> bjz: Well, he _did_ tack on the "...so we can have a clean 2700" conditional ;)
[15:49:19] <bjz> just a sec...
[15:49:29] <bjz> kimundi: shhh
[15:49:41] * bstrie_pyro gives bjz the "smartass" flair
[15:49:44] * kimundi is silent
[15:49:44] *** Quits: dherman (dherman@32D1164B.EE0ADED3.2C01E229.IP) (Quit: dherman)
[15:49:48] <bjz> kimundi: I work procedurally
[15:50:20] * kimundi recommends bjz for getting the LL(1)-smartass flair
[15:54:53] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[15:55:19] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:56:50] * kimundi is knee-deep in needlessly complicated parser code for a docopt library because he doesn't know better
[15:56:51] <bstrie_pyro> I wonder if "LL(1)" could become a nerd synonym for someone with nearsightedness
[15:57:08] <kimundi> bstrie_pyro: That would be LL(0.25)
[15:58:02] <kimundi> "Not quite near enough to see the thing in front of you clearly" :P
[15:58:23] * kimundi bad joke
[15:58:38] <cmr> heh
[15:58:49] <cmr> bjz: alright that was surprisingly painless
[15:58:58] <bjz> \o/
[15:59:58] <weirdo> what's the point of tuple structs?
[16:00:35] <kimundi> weirdo: Syntactical freedom for grouping types together in a struct :P
[16:01:12] <kimundi> Easier construction and pattern matching, at the cost of more annoying individual field access
[16:01:23] *** Quits: new_one_ (new_one@8F21257C.4B0DC706.B3C0173E.IP) (Client exited)
[16:01:32] <cmr> So we can give tuples nominal types.
[16:01:48] <kimundi> And that
[16:02:03] *** Quits: Hildar (Mibbit@1F537296.286B12C7.8772DA20.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:02:04] <eddyb> great, xdotool windowkill closed my entire chrome :(
[16:02:17] *** Quits: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:02:19] *** bstrie_pyro is now known as bstrie_goblin
[16:02:22] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Connection reset by peer)
[16:02:27] <bstrie_goblin> mitsuhiko: shut up (am I doing this right?)
[16:02:36] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[16:02:49] <bvssvni> is (a,b)[0] coming to Rust anytime soon?
[16:03:03] <bstrie_goblin> bvssvni: nope
[16:03:22] <kimundi> bvssvni: No, and it won't, because indexing doesn't make sense if the individual fields can be different types
[16:03:36] <kimundi> Use [T, ..2] instead :P
[16:03:44] <bvssvni> kimundi: good point
[16:04:16] <kimundi> That being said, we currently have impls for common tuple sizes
[16:04:20] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:04:21] <eddyb> .get::<0>() might work, though not without some painful additions
[16:04:29] <kimundi> rusti: (1u, "foo").n1()
[16:04:34] -rusti- "foo"
[16:04:53] <bvssvni> kimundi: :D
[16:05:01] <eddyb> kimundi: well, with variadic generics, at least you can impl n3 once and have it work for all tuples > 3
[16:05:12] <eddyb> so those methods are not... bad
[16:05:16] *** Joins: niceguyneil (Mibbit@moz-FE606886.nyc.res.rr.com)
[16:05:21] <eddyb> maybe not so fortunately named
[16:05:22] <kimundi> eddyb: yup, that will greatly improve that situation :)
[16:05:33] <cmr> bjz: oh heh I just realized I never committed the docs.
[16:06:03] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:06:26] <kimundi> Still, to be generally useful we'd need also nX_ref() and nX_mut(), and that is going to be a lot of methods
[16:06:46] <eddyb> kimundi: only implemented once ;)
[16:06:49] *** Joins: ljrmorgan (Mibbit@moz-1BCDA4C8.as13285.net)
[16:07:02] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Client exited)
[16:07:12] <eddyb> .val0(), .ref0(), .mut0(), anyone?
[16:07:24] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[16:07:28] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:08:05] <kimundi> eddyb: Sure, but N traits, N impls and N x 3 methods is still a lot of code
[16:08:22] <kimundi> (Though the N traits might fall away)
[16:08:25] <cmr> bjz: https://github.com/cmr/cargo-lite#installation
[16:08:57] <eddyb> #[lang="tuple"] struct Tuple<..T>(..T);
[16:09:16] <kimundi> eddyb: Yeah, something like that
[16:09:27] <eddyb> a fake struct that... has the right contents :)
[16:10:50] <bjz> cmr: it would be good if it was a copy/paste
[16:10:54] <bjz> cmr: like: http://brew.sh/
[16:11:14] <eddyb> kimundi: because there's no O(N*N/2) expansion or whatever, you can have way more methods
[16:11:24] <niceguyneil> so, some help if you guys could: I'm trying to have my enum contain a JSON(~Encodable) - something that I can JSON serialize later. That's not a valid type, since Encodable takes a type parameter. But saying ~Encodable<Encoder> doesn't work either, because it wants a struct instead of a trait. How would I do this?
[16:11:27] <bjz> cmr: but I'm being annoying now :P
[16:11:28] * kimundi is still irked about how "immutable reference, mutable reference" vs "reference, mutable reference" turned into the inconsistent abbreviations "ref, mut"
[16:11:50] <bjz> cmr: `ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"` is too easy
[16:11:58] <kimundi> eddyb: I know, I understand that part :)
[16:12:21] <eddyb> but we're not there yet :(
[16:12:31] <eddyb> niceguyneil: you need Encodable<JsonEncoder> or something like that
[16:13:01] <eddyb> Encodable<Encoder> could actually work under DST - though with a lot of "unsized" all over the place
[16:13:39] *** Joins: awidegre1n (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:13:42] *** Joins: furypt (Adium@moz-C2895121.rev.vodafone.pt)
[16:13:47] * bjz realises he still has a `cargo-central` directory in his rust project directory
[16:13:50] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Connection reset by peer)
[16:14:17] <eddyb> nmatsakis: I know you may never see this... but what if we use a symbol instead of a long word "unsized"? %T or some other abomination :P
[16:14:33] <cmr> bjz: well..
[16:14:43] <eddyb> nmatsakis: hmm, *T would kinda fit with the fact that it needs indirection
[16:15:09] <ljrmorgan> hi! Does anyone know if there is a way to get "rustkpg test" to run tests outside of a test.rs file? I want to put the tests for my library in an inner test module per module, but then rustpkg test doesn't pick them up
[16:15:14] <niceguyneil> so, how does this work with [Derived(Encodable)] then - it seems like that makes something just generally "encodable", not "JSON-encodable" or "file-encodable". I guess my impression of how it would work would that if something was "generally encodable", then the different encoders would handle different methods of doing so.
[16:15:18] <kimundi> eddyb: I got the impression the devs favour keywords to cryptic symbols
[16:15:21] <niceguyneil> [Deriving] rather
[16:15:31] <eddyb> [deriving], even
[16:15:38] <kimundi> eddyb: unsized will be rare enough, the least it could tell the reader is what word to look for :P
[16:15:47] *** Parts: furypt (Adium@moz-C2895121.rev.vodafone.pt) ()
[16:15:54] <bvssvni> what if Rust replaced 'let' with 'ref', 'box', 'gc', 'rc' etc.
[16:16:07] <eddyb> meh
[16:16:09] <jensnock_> bjz: On a scale from `Holy christ that is some HTML3 from hell' to `Does not look too bad' does http://jensnockert.github.io/2013/07/16/my-vision-for-rust-simd.html come in?
[16:16:09] <flaper87> ljrmorgan: I think, no
[16:16:20] <jensnock_> bjz: Designwise.
[16:16:34] <cmr> jensnock_: holy serifs batman.
[16:16:44] <kimundi> bvssvni: How about no :P
[16:16:46] <eddyb> kimundi: I would want anything like <T: Trait> and using only references to allow an unsized T, like Trait itself. that way you can use trait objects without duplicating API and whatnot
[16:16:46] <cmr> the font is very heavy/dark
[16:16:50] <bstrie_goblin> jensnock_: ...html3? :P
[16:16:53] <bvssvni> kimundi: :D
[16:17:11] <bjz> jensnock_: leading (line height) could be abit bigger
[16:17:17] <jensnock_> bstrie_goblin: I still code HTML like it's '93
[16:17:19] <eddyb> the font is actually cool :D
[16:17:39] <flaper87> jensnock_: LOL @ 93 :P
[16:17:46] <eddyb> though it is my laptop monitor, higher DPI and whatnot
[16:17:46] <bjz> jensnock_: the code type style blends in too much with the text
[16:17:56] <kimundi> eddyb: You mean <unsized T: Trait> ?
[16:18:23] <eddyb> kimundi: well, it's <T: Trait> now
[16:18:30] <bjz> jensnock_: would be better if it stood out more to the body text
[16:18:46] <Ms2ger> jensnock_, HTML3 from hell!
[16:18:47] <Ms2ger> ;)
[16:19:01] <bjz> jensnock_: sometimes folks give the inline code a different background which helps 
[16:19:03] <kimundi> eddyb: I don't understand what you're talking about :)
[16:19:05] <eddyb> kimundi: a lot of API stuff would be more flexible if it accepted unsized, it is rare that you actually pass things by value
[16:19:21] <ljrmorgan> flaper87: thanks, that's a bit of a pain. I'm going to keep trying to get it working, I'll update on IRC if I get anywhere
[16:19:28] <kimundi> eddyb: You mean making unsized the default?
[16:19:38] <Ms2ger> jensnock_, lgtm, but you need spaces after colons
[16:19:38] <bjz> jensnock_: neads more 'before' space above all the headings
[16:19:42] <eddyb> kimundi: no, but making it easier to use all over the place
[16:20:02] <eddyb> kimundi: fn write_foo<W: Writer>(w: &mut W) {w.write("foo".as_bytes());}
[16:20:21] <eddyb> that would work with an unsized W. do you want "unsized " in a million places like that? doubtful
[16:20:33] <cmr> bstrie_goblin: we're at 2700
[16:20:34] <eddyb> <*W: Writer> actually looks good
[16:20:34] <bjz> jensnock_: maybe lighten the body text a tad so its not fighting with the headlines as well
[16:20:42] <kimundi> eddyb: Well, all that has already been discussed in detail by the devs
[16:20:45] <eddyb> or W* if you don't want semantic conflict
[16:21:09] <bjz> jensnock_: but that's fraught with danger - coders seem to go insane about that on HN
[16:21:18] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[16:21:29] <kimundi> eddyb: Basically, there are two options: make unsized the default, requiring a "Sized" kind for places where its forbidden.
[16:21:33] <eddyb> kimundi: bleah, if only we have libsyntax hooked up to a scripting language, I could easily "grep" for functions which have bounded type params and don't use them as values
[16:21:47] <kimundi> eddyb: Or making Sized the default, requiring unsized for the cases where you want to allow it
[16:22:06] <eddyb> and then add unsized in all those places and asking the devs if they like the result :P
[16:22:25] <kimundi> eddyb: nmatsakis himself would very much like to take the Sized rout, but it means that you would annotate _most_ generic code with a Sized bound
[16:22:36] <bjz> HN User 2045673: Why is body text not black on white. I hate you.
[16:22:39] <eddyb> kimundi: what I'm asking for is a one-character annotation
[16:22:56] <eddyb> kimundi: most generic code does not actually deal with values btw
[16:23:10] <bjz> jensnock_: did any of those suggestions help?
[16:23:17] <eddyb> kimundi: [T] is an exception
[16:23:24] <jensnock_> bjz: I think so, but I just need to implement them.
[16:23:41] <bjz> jensnock_: also note the ieee754 repo I added you to
[16:23:55] <kimundi> eddyb: A third option would be to have defaults for that stuff, like automatically implying a Size bound for function signatures that would require it. That has been seen to magical, in general
[16:24:50] <kimundi> So, right now the route seems to be the "unsized" keyword, which will sadly lead to people writing code that can not be used with unsized types even if it could
[16:25:23] <eddyb> kimundi: I still prefer a one character annotation above "unsized "
[16:26:00] <eddyb> s/above/over
[16:26:04] <kimundi> I agree with the devs that a one-character annotation for it would make it even more cryptic than it already would be
[16:26:16] <eddyb> bleah
[16:26:39] <kimundi> But I agree that <unsized T> looks bleah :P
[16:26:44] <jensnock_> More or less sexy? http://jensnockert.github.io/2013/07/16/my-vision-for-rust-simd.html
[16:27:17] <Ms2ger> Moar
[16:27:22] <jensnock_> \o/
[16:27:41] <Ms2ger> Though I'm not sure I like the overlapping near fn cross...
[16:27:52] <jensnock_> I'm pretty sure I don't.
[16:27:57] <jensnock_> But my CSS-fu is too low.
[16:28:09] <bjz> jensnock_: reduce code size much more
[16:28:21] *** Quits: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de) (Input/output error)
[16:28:22] <bstrie_goblin> jensnock_: background too bright, soften it up a smidge
[16:28:31] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[16:28:53] <bjz> jensnock_: also, remove the border around the code bits
[16:28:58] *** Quits: pyon (user@5D202184.695050F8.E6392873.IP) (Client exited)
[16:29:11] <bjz> jensnock_: but all in all much better
[16:29:19] <eddyb> kimundi: there is one advantage with a sized annotation (and it's not bad if it's one character): you can use compile errors to add it wherever required
[16:29:44] <bjz> jensnock_: actually, bump up the the body text line height abit more - still looks cramped
[16:29:51] <kimundi> eddyb: I agree with you there
[16:30:15] <SiegeLord> Looks much better if I disable the custom font and line size :P
[16:30:42] <kimundi> eddyb: But that would mean Having a special "Sized" kind that is used like a trait bound, but has seperate syntax, which would also not be very clean
[16:30:53] <eddyb> jensnock_: I don't think <T, ..n> conflicts with anything
[16:31:01] <eddyb> kimundi: let's add symbols for all kinds!
[16:31:29] <eddyb> ~Trait:#>$
[16:31:36] <kimundi> eddyb: Wouldn't <T, ..n> conflict with integers in the type system?
[16:31:37] <eddyb> Freeze+Send+Pod
[16:31:47] <bvssvni> make sure it is not alphabetic :P
[16:32:16] <kimundi> eddyb: The problem is that you effectively turn generics into perl with that :P
[16:32:35] <eddyb> kimundi: it's an initial < that disambiguates it from foo<... or foo::<... or a < b
[16:32:48] <eddyb> kimundi: it's not foo<T, ..n>, but a type of its own
[16:33:04] <kimundi> eddyb: Hm, then it might work, I guess
[16:33:05] <bjz> jensnock_: I would say 18px for the code font size would be good (sorry - still on design)
[16:33:30] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[16:33:32] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:33:36] <jensnock_> I just need input on the design.
[16:33:41] <jensnock_> The blog post is 6 months old.
[16:34:08] <bvssvni> what about foo<<bar<baz<T>>>, foo <- bar <- baz <- T
[16:34:26] <bjz> jensnock_: ah
[16:34:39] <Ms2ger> What, are we adding <- as an assignment operator?
[16:34:47] <jensnock_> But feel free to comment on the contents as well.
[16:34:50] <eddyb> jensnock_: simd![T, ..4] is my favorite, actually
[16:34:52] <bvssvni> Ms2get: a generic assignment operator
[16:35:19] <eddyb> jensnock_: though at that point you can easily make simd!<T, ..4> work
[16:35:33] <eddyb> bjz: was it you that proposed a macro matching overhaul?
[16:35:45] <bjz> jensnock_: also, monaco is so much nicer than droid :P
[16:35:52] <eddyb> would come in handy for a few things
[16:36:15] <jensnock_> bjz: Sure, but isn't it OS X only?
[16:36:20] <bjz> eddyb: yeah, but the reasoning against it was compelling
[16:36:27] <eddyb> bjz: :(
[16:36:36] <bjz> jensnock_: the osx one is Menlo, no?
[16:36:48] <eddyb> bjz: does it require parsing a lot of things as token-trees?
[16:37:03] <jensnock_> bjz: Yes, but Monaco is the old OS X one.
[16:37:20] <jensnock_> eddyb: I don't feel super-strongly anymore.
[16:37:27] <eddyb> bjz: that is, the initial pare step doesn't know where the macro ends
[16:37:31] <bjz> eddyb: it's more that things like editors can't parse it
[16:37:40] <eddyb> bjz: oh come on...
[16:37:56] <eddyb> are we seriously blocking the language on dumb editors :P?
[16:38:07] <jensnock_> http://jensnockert.github.io/2013/07/16/my-vision-for-rust-simd.html background slightly tuned down.
[16:38:27] <bstrie_goblin> jensnock_: that reminds me! please, PLEASE put a hugely visible date on all things related to rust
[16:38:35] <kimundi> eddyb: Yes, we are. If you need a full IDE just to get syntax highlining, then the language will be used by fewer people :P
[16:38:39] <bstrie_goblin> I know it's there in the url, but I'd like to see it below the title
[16:38:57] <bjz> bstrie_goblin: ++++++++++++++100299u88723
[16:39:10] <jensnock_> bstrie_goblin: You have a point, anything related to Rust bitrots quite quickly.
[16:39:10] <eddyb> kimundi: syntax highlighting would still work in most places
[16:39:20] <o11c> eddyb: it's not a matter of dumb editors
[16:39:23] <bjz> eddyb: I dunno, but my suggestion at least would have broken stuff
[16:39:50] <eddyb> bjz: like?
[16:40:30] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[16:40:34] <eddyb> if you highlighting tokens only, it's already a lot
[16:40:38] <bjz> eddyb: https://gist.github.com/bjz/8333444
[16:40:48] <bjz> it's more than about editors
[16:40:53] <eddyb> *you're
[16:40:56] <bjz> it's about tools in general
[16:41:34] *** Joins: Erik_ (Erik_S@moz-E7E31D21.hlrn.qwest.net)
[16:41:45] <bjz> that was my proposal anyway
[16:41:52] <eddyb> bjz: anything else other than the muncher thing?
[16:42:04] <eddyb> (I've seen the proposal before)
[16:42:23] <jensnock_> I don't even have syntax highlighting for Rust.
[16:42:39] <bjz> well, as soon as you get to an <identifier>! you don't know anything about what comes next
[16:42:54] <bjz> unless you have the macro definition
[16:43:06] <eddyb> bjz: well, that's what I was asking about initially
[16:43:29] <eddyb> it would requiring dropping to token-tree parsing
[16:43:37] <jensnock_> But now I'm going to drink sake and eat food \o/
[16:43:44] <bjz> like <identifier>!(...) is easy
[16:43:48] <eddyb> though I'm curious if it affects performance
[16:44:14] * jensnock_ hugs Ms2get, flaper87, cmr, bstrie_goblin, eddyb, bjz for the valuable input.
[16:44:20] <bjz> no worries!
[16:44:27] *** Quits: jensnock_ (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[16:44:40] <kimundi> eddyb: For what it's worth, I also have a proposal for making macros more flexible that tries to address that "what comes next?" concern: https://github.com/mozilla/rust/issues/9894
[16:44:55] *** Joins: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com)
[16:45:23] <eddyb> kimundi: oh I know that one
[16:45:29] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[16:45:32] <flaper87> incredibly enough, I just started playing with Rust's macros just yday 
[16:45:53] <flaper87> kimundi: +1 for making them more flexible
[16:45:59] <flaper87> I'll take a look at that PR
[16:46:05] <eddyb> s/PR/issue
[16:46:05] <kimundi> Simd!< ... > could be a valid macro with my proposal :P
[16:46:15] <eddyb> kimundi: oh, right, hmm
[16:46:41] *** Quits: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[16:46:53] <kimundi> Say we allow a number of "macro token tree"s after an macro invokation, with their number being fixed and notated by the macro itself
[16:46:55] <niceguyneil> hey guys, still unclear re: encodable. if I have a method taking in "convertible to JSON", I can't do ~Encodable<json::Encoder> because Encoders have a lifetime param based on their writer. To me, it makes sense that something encodable wouldn't have to know about its writer when created - it would get passed to a writer. Thoughts?
[16:47:06] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:47:15] <kimundi> macro!4 ( ... ) foo < ... > [ ... ]
[16:47:31] <eddyb> kimundi: well, allowing more delimiters is strictly better than what we have today and it doesn't require !!!! or !4
[16:47:33] <o11c> I know that LLVM treats them differently, but is there any user-facing reason that [float, ..4] and <float, ..4> need to be different types?
[16:47:36] <flaper87> eddyb: erm, yeah issue T_T
[16:47:49] <kimundi> It would be unabigiusly parsable, but I'm not sure if it would be simple enough for tooling support
[16:47:55] <niceguyneil> so I'd have a json::Encoder::write(foo: &Encodable, w : &mut Writer)
[16:48:05] <eddyb> niceguyneil: type MyEncodable<'a> = ~Encodable<json::Encoder<'a>>;
[16:48:15] <eddyb> niceguyneil: now you can use MyEncodable without the lifetime
[16:48:34] <kimundi> eddyb: Do you mean more delimiter in general, or more delimiter per macro invokation? because the latter one is the tooling issue
[16:48:51] <eddyb> kimundi: I mean allow (), {}, <>, [], etc.
[16:49:05] <eddyb> kimundi: instead of () in expressions and {} in items or whatever it was
[16:49:07] <kimundi> right - though I just realized <> would not work
[16:49:14] <eddyb> oh :(
[16:49:16] <o11c> <> needs to die
[16:49:19] <eddyb> kimundi: we still have []
[16:49:25] <o11c> it's not even an ambiguity ...
[16:49:28] <kimundi> That could be allowed
[16:49:45] <kimundi> Simd![f32, ..4]
[16:50:00] <o11c> if you're parsing a type, Foo[] is a template instead of indexing a value
[16:50:14] <o11c> and you already need foo::<> for function templates ...
[16:50:24] <bjz> o11c: kill <> with fire!
[16:50:27] <eddyb> o11c: s/template/generic
[16:50:32] <kimundi> o11c: I don't think we are going to change that part of the syntax anymore
[16:50:51] <o11c> kimundi: but ... my %
[16:50:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:50:57] <eddyb> o11c: though [] doesn't help because a[b] would be a valid type *and* an expression
[16:51:08] <eddyb> would just confuse users even more
[16:51:09] <o11c> eddyb: so? Rust already has to handle that case
[16:51:17] <o11c> a < b > c
[16:51:18] <eddyb> o11c: you're not improving anything
[16:51:32] <bstrie_goblin> what is it about bikeshedding this week
[16:51:32] <eddyb> oh, that one
[16:51:34] <SiegeLord> Editors can match []'s :P
[16:51:45] <o11c> eddyb: it would make all possibly matching characters always match
[16:51:50] <o11c> which is a HUGE win for tooling
[16:51:52] <kimundi> bstrie_goblin: It's just the season, I guess :P
[16:51:55] <niceguyneil> eddyb: thank's but I still see the same thing: wrong number of lifetime parameters: expected 1 but found 0 for MyEncodable. Do you see what I mean about whether an Encodable should "own" its encoder or not?
[16:52:02] <SiegeLord> Having written a few nested templates this week, it was a pain not to have my editor highlight the matching <
[16:52:09] <SiegeLord> *nested generics
[16:52:18] <SiegeLord> It's even worse than |||a|||
[16:52:31] <SiegeLord> Well, maybe not...
[16:52:31] <bstrie_goblin> SiegeLord: my proposal is to get rid of the < binary operator, and replace it with !>=
[16:52:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:52:37] <bstrie_goblin> that would solve the problem
[16:52:46] <eddyb> well...
[16:52:55] <eddyb> I can type «» just as easy as <>
[16:52:55] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:53:04] <kimundi> 4 `less` 7 ftw!
[16:53:04] <bvssvni> NO
[16:53:08] <SiegeLord> I wouldn't mind «'s
[16:53:16] <bvssvni> globalization issues
[16:53:18] <o11c> bstrie_goblin: still doesn't solve the backwards case
[16:53:19] <SiegeLord> Might be hard to type on Windows
[16:53:24] <kimundi> Oh, are we at the part where we start suggesting unicode?
[16:53:30] * kimundi crams out his character table
[16:53:33] <eddyb> kimundi: but it's latin-1!
[16:53:46] <SiegeLord> I think <prefix>[] and <prefix>() is where it's at
[16:53:49] <eddyb> ab and bb or something
[16:54:14] *** Joins: int3_ (int3_@moz-BA9A8211.public.wayport.net)
[16:54:20] <kimundi> eddyb: Keep your dirty codepages away from me! ;P
[16:54:22] <bstrie_goblin> I can't wait for 1.0, just so that anytime anyone brings up syntax I can shrug and say WHELP TOO LATE TO CHANGE IT NOW
[16:54:43] <eddyb> transmute«uint, *T»(0)
[16:54:50] <eddyb> only issue is that it's too small
[16:54:54] *** Joins: apoelstra (username@moz-BBEB5B9E.sw.biz.rr.com)
[16:55:02] <SiegeLord> They'll just suggest a #[version=(2.0)] attribute
[16:55:13] <SiegeLord> That puts the parser into a different state
[16:55:14] <bvssvni> foo<A, B, C> vs foo <- [A, B, C]
[16:55:25] <eddyb> bvssvni: the later is just nuts
[16:55:28] <eddyb> *latter
[16:55:29] <bstrie_goblin> SiegeLord: that's when we know that we can ban them without remorse
[16:55:37] <bstrie_goblin> since clearly they have no valuable input
[16:55:50] <kimundi> type Foo⟨T⟩;
[16:55:51] <eddyb> SiegeLord: #[phase(token)] extern mod my_tokenizer;
[16:56:04] <eddyb> kimundi: wtf is that?
[16:56:04] <SiegeLord> bstrie_goblin: Hey now, it's what Python did with its from __future__ nonsense :P
[16:56:20] <kimundi> eddyb: Take your pick: http://en.wikipedia.org/wiki/Bracket#Angle_brackets_or_chevrons_.E2.8C.A9_.E2.8C.AA
[16:56:38] <eddyb> SiegeLord: it's actually decently easy to allow pluggin in alternate tokenizers/parsers in Rust
[16:57:08] <SiegeLord> As long as I don't have to read/use code written in alternate syntaxes, that sounds like a great idea ;)
[16:57:19] <eddyb> struct Foo〈T, U〉(T, U);
[16:57:24] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Connection reset by peer)
[16:57:30] <eddyb> you need a font that can display it nicely
[16:57:38] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[16:57:52] <kimundi> type Foo⟦T⟧;
[16:57:53] <eddyb> SiegeLord: JS people do this all the time - see dogescript
[16:58:05] <SiegeLord> It still doesn't solve the editor issue :P
[16:58:14] <kimundi> type Foo｢T｣; // looks nice :P
[16:58:20] <SiegeLord> Editors match only two pairs of characters... () and []
[16:58:33] <eddyb> SiegeLord: kate can match arbitrary pairs, I think
[16:58:56] <o11c> eddyb: any decent editor can match arbitrary pairs
[16:58:56] <eddyb> let me check
[16:59:04] <o11c> so unless you ban less-than and greater-than ...
[16:59:21] <SiegeLord> It's not matching for me
[16:59:42] <eddyb> SiegeLord: what editor?
[16:59:45] <SiegeLord> Kate
[16:59:48] <eddyb> o_O
[16:59:55] <kimundi> type Foo《T》; // Highly visible!
[16:59:57] <eddyb> SiegeLord: is it not matching {}?
[17:00:07] <SiegeLord> We're obviously talking about <>
[17:00:16] <SiegeLord> Of course it matches {}
[17:00:18] <eddyb> SiegeLord: that's an exception from the rule
[17:00:33] <SiegeLord> It's not matching «'s
[17:00:46] <eddyb> SiegeLord: by arbitrary I meant "defined in the syntax file"
[17:01:00] <SiegeLord> Why is the C++ syntax file not defining them then? :P
[17:01:07] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[17:01:11] <eddyb> SiegeLord: what, <>?
[17:01:14] <SiegeLord> Yes
[17:01:23] <bvssvni> foo<bar<A, B>, baz<A, B>> vs foo <- (bar, baz) <- (A, B)
[17:01:25] <kimundi> Same reason as Rust, I guess
[17:01:25] <eddyb> because it would break with a < b;
[17:01:35] <eddyb> kimundi: in Rust it's actually determinstic
[17:01:54] <eddyb> not sure if I want to spend a week trying to get it to work in that XML state machine
[17:02:12] <eddyb> SiegeLord: I *think* it's possible to extend it to any pair, but I have to check
[17:02:16] <bjz> how do you compile benchmarks?
[17:02:26] <eddyb> bjz: --test and run the resulting file with --bench
[17:02:31] *** Quits: niceguyneil (Mibbit@moz-FE606886.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:02:31] <eddyb> bjz: if you're talking about #[bench]
[17:02:32] <bjz> wut
[17:02:48] <bjz> wouldn't it be easier to have a --bench thing?
[17:02:52] <bjz> for rustc?
[17:02:56] <eddyb> bjz: why?
[17:03:03] <eddyb> bjz: --test compiles all test and benchmarks
[17:03:13] <kimundi> bvssvni: That would probably improve the readability a bit, but because its so exotic would probably get even more hate :P
[17:03:18] *** Quits: awidegre1n (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[17:03:18] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:03:20] <bjz> as in, compile benchmarks separately
[17:03:23] <bvssvni> kimundi: I know :P
[17:03:29] <eddyb> bjz: then you can run all of them, just tests (default), just benchmarks (--bench) or filter by name
[17:03:50] <bvssvni> kimundi: uses this notation when analyzing programs
[17:04:03] <bvssvni> kimundi: but no language supports it as I know of
[17:04:33] <o11c> eddyb: frankly, given how much *other* syntax is still changing, I think it's dumb to not make an obvious improvement like this ...
[17:04:42] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[17:05:21] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[17:05:50] <eddyb> o11c: unless you remove the ambiguity for ::<>, it won't be welcome
[17:06:23] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[17:06:47] <bvssvni> kimundi: the benefit of this notion it's easy to define transformation of data structures
[17:06:50] <o11c> that might even be possible, but even if it's not it's still a win
[17:07:01] <kimundi> bvssvni: yeah
[17:07:19] <o11c> since function[index] is never valid ... if the AST contains that, treat it as a generic lookup instead
[17:07:35] <kimundi> o11c: It is valid
[17:07:40] <SiegeLord> Is it never valid? Can't implement Index on an fn?
[17:07:59] <o11c> oh please don't tell me you did that ...
[17:08:17] <eddyb> o11c: you can't forbid it
[17:08:20] <kimundi> o11c: Of course not, but it would still be valid syntacical wise
[17:08:36] <o11c> kimundi: what would it be impl'd on, given that the fn is generic?
[17:09:05] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:09:13] <kimundi> let f = foo(); let x = f[12]; // This shouldn't behave completly different just because foo() returned a function pointer
[17:09:16] <eddyb> o11c: generic type params are inferred
[17:09:20] <adridu59> hi everyone
[17:09:46] <eddyb> o11c: and mapping names to their definitions happens waaay before type checking
[17:09:50] <Armavica> hi adridu59
[17:09:58] <bvssvni> adridu59: hi
[17:10:32] <o11c> eddyb: sure they're inferred, but what is there to infer with if you're indexing instead of calling?
[17:10:54] <pepper_chico> I'm seeing people here that I use to see on ##c++ =)
[17:11:30] <o11c> pepper_chico: yes, Rust is the only language that is both trying to replace C++ and actually has a hope of doing it.
[17:11:44] <pepper_chico> o11c: yeah
[17:11:55] <kimundi> pepper_chico: Either spies or converts, you should interrogate them to be sure! ;)
[17:11:57] <o11c> Unfortunately, it's not fixing everything, and regressing in some areas
[17:12:04] <eddyb> o11c: that's an answer to "what would it be impl'd on, given that the fn is generic?"
[17:12:09] <adridu59> I know what structs are, but what are "newtype structs"?
[17:12:24] <kimundi> adridu59: struct Foo(Bar)
[17:12:27] <o11c> I get that separate compilation is hard, but [] instead of <> is trivial
[17:12:30] <bjz> if somebody asks, "does Rust obey the C calling convention", what should I say?
[17:12:31] <pepper_chico> o11c: example of regression?
[17:12:33] <kimundi> adridu59: Basically, named tuples with just one element
[17:12:35] <pepper_chico> I'd like to know
[17:12:44] <eddyb> bjz: only with extern "C"
[17:12:50] <o11c> pepper_chico: no separate compilation and no templates with value arguments are the big ones
[17:12:55] <bjz> eddyb: thought so
[17:13:00] <eddyb> bjz: otherwise, it doesn't provide any guarantees
[17:13:19] <kimundi> adridu59: Called newtypes due to the terminolgy existing in other languages -  basically it has the same memory layout as the one type it wraps, but is a seperate type as far as the typesystem is concerned.
[17:13:30] <o11c> I'm worried that "compile everything at once" just seems like a good idea until someone create a huge application
[17:13:35] <pepper_chico> o11c: they are working to include template with numerical arguments
[17:13:40] *** Joins: derek_c (derek@moz-CE6E60A5.cit.cornell.edu)
[17:13:41] <pepper_chico> that's what I heard
[17:13:51] <adridu59> kimundi: but it's not exactly the same since it is named isn't it?
[17:14:02] <o11c> pepper_chico: oh, and no constexpr
[17:14:03] <kimundi> adridu59: Names don't change the size
[17:14:04] <SiegeLord> Isn't separate compillation essentially captured using rlib's?
[17:14:14] <adridu59> kimundi: just syntax sugar?
[17:14:27] <kimundi> adridu59: Not really sugar either - it is a seperate type
[17:14:34] <o11c> SiegeLord: not really
[17:14:58] <kimundi> adridu59: It can be seen as typesystem sugar for a  struct with one field I guess
[17:15:05] <eddyb> rusti: struct Foo; impl Index<Foo, Foo> for fn(Foo) -> Foo {fn index(&self, &i: &Foo) -> Foo {(*self)(i)}} fn foo(x: Foo) -> Foo {x} foo[Foo]
[17:15:08] -rusti- main::Foo
[17:15:16] <eddyb> o11c: omg I got it first try ^^
[17:15:18] <pepper_chico> o11c: I think I can live without it =), but about the compilation concern, that's a real worry for me, I hope it does well in this area, and even better than c++ compilation times
[17:15:25] <adridu59> kimundi: yea I think so; what's the use case of these through?
[17:15:28] <kimundi> eddyb: haha, I know that feeling :)
[17:15:32] <eddyb> o11c: you can't even disambiguate based on the names, because Foo is *both* a value and a type
[17:15:33] <SiegeLord> o11c: Don't see why not
[17:15:43] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[17:15:45] <SiegeLord> Separate compillation in Rust is using lots of small crates
[17:15:49] <adridu59> kimundi: also, can't you just use #[repr] with a struct instead?
[17:15:54] <o11c> eddyb: not a generic function
[17:16:11] <eddyb> o11c: okay, try 2
[17:16:24] <kimundi> adridu59: For example, you could define a struct InvertedByte(u8), that implements all traits u8 does, but applies a bit negation first
[17:16:25] <eddyb> rusti: struct Foo; impl Index<Foo, Foo> for fn(Foo) -> Foo {fn index(&self, &i: &Foo) -> Foo {(*self)(i)}} fn id<T>(x: T) -> T {x} id[Foo]
[17:16:26] -rusti- main::Foo
[17:16:29] <eddyb> o11c: bam
[17:16:35] <eddyb> o11c: T is inferred
[17:16:43] <kimundi> adridu59: #[repr] is just for enums
[17:17:00] <kimundi> adridu59: And it only tells the compile how big the variant should be
[17:17:03] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[17:17:15] <eddyb> s/variant/tag/
[17:17:19] <adridu59> kimundi: so not suitable for newtypes I guess
[17:17:30] <eddyb> adridu59: what would it do on newtypes?
[17:17:35] <kimundi> adridu59: For example u8, struct NewU8(u8), enum EnumU8{ EnumU8_(u8) } all would have the same size
[17:17:37] <eddyb> a newtype is just a tuple struct with one field
[17:18:04] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:18:16] <kimundi> adridu59: types don't exist in once the compiler turns it into macine code
[17:18:40] <kimundi> After compilation, struct Foo(u8) is just 8 bits, just as a bare u8
[17:19:09] <kimundi> Or ((((u8,),),),) for that matter :P
[17:19:14] <adridu59> eddyb: I was thinking use repr to define a newtype on a particular type
[17:19:25] <kimundi> rusti: mem::size_of::<u8>()
[17:19:30] -rusti- pastebinned 11 lines of output: http://ix.io/a7r
[17:19:30] <eddyb> adridu59: huh?
[17:19:41] <kimundi> rusti: ::std::mem::size_of::<u8>()
[17:19:42] -rusti- 1u
[17:19:51] <kimundi> rusti: ::std::mem::size_of::<((((u8,),),),)>()
[17:19:52] -rusti- 1u
[17:20:04] <eddyb> adridu59: mentally replace "newtype" with "tuple struct with one field"
[17:20:37] <kimundi> rusti: struct Foo(u8); ::std::mem::size_of::<Foo>()
[17:20:38] -rusti- 1u
[17:20:45] <adridu59> I'm having a hard time representing myself what "tuple structs" are althrough I know what each of these are individually
[17:20:47] <adridu59> tbh
[17:20:52] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[17:20:56] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[17:20:58] <eddyb> adridu59: then ask :)
[17:21:04] <eddyb> adridu59: struct Foo(A, B, C, D);
[17:21:15] <eddyb> adridu59: they're just structs with unamed fields
[17:21:15] <bvssvni> adridu59: it is a struct with unamed fields
[17:21:25] <apoelstra> anyone here familiar with rust-http? why must the server type be clonable? isn't it a sane usecase to derive a subtype which holds a (not cloneable) Chan?
[17:21:27] <SiegeLord> I'd say it's a named tuple :P
[17:21:33] <kimundi> adridu59: A tuple struct is just a struct that has anonymous fields - each field doesn'T have a name, but just an fixed position in the type definition
[17:21:52] <kimundi> rusti: struct Foo(uint, uint); ::std::mem::size_of::<Foo>()
[17:21:53] -rusti- 16u
[17:22:14] <kimundi> Like a tuple, except with a unique name
[17:22:24] <adridu59> okay, but then why would I want a tuple struct instead of tuple? for a typedef?
[17:22:39] <kimundi> adridu59: For example, yeah
[17:22:40] *** Quits: ljrmorgan (Mibbit@moz-1BCDA4C8.as13285.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:22:43] <eddyb> adridu59: *like* a typedef
[17:23:03] <eddyb> adridu59: type Foo = (uint, uint); doesn't create a new type, but a type alias
[17:23:13] <kimundi> Real world example of crappy code I'm writing: struct Lines<'a>(~[Line<'a>]);
[17:23:40] <eddyb> kimundi: why not struct Lines<'a>(&'a [Line<'a>]); :P
[17:23:45] <adridu59> would you use them for something other than type alias?
[17:23:56] <eddyb> adridu59: it is *different* from a type alias
[17:24:09] <SiegeLord> You use a tuple struct to wrap a type until you realize you care about privacy
[17:24:13] <kimundi> eddyb: its a AST, the vectors are created during construction :P
[17:24:17] <SiegeLord> And then you switch to using a struct :P
[17:24:43] <eddyb> SiegeLord: struct Foo(priv Bar); should be a thing
[17:24:58] <eddyb> though without * overloading, it's less useful now
[17:25:00] * kimundi still things struct Foo(priv T) should be a thing
[17:25:34] <adridu59> newtype structs don't have auto-deref anymore but structs still do right?
[17:25:51] <cmr> no
[17:26:01] <cmr> well
[17:26:06] <cmr> newtypes didn't have auto-deref
[17:26:10] <cmr> they had plain deref
[17:26:12] <cmr> you could do *newtype
[17:26:40] <kimundi> adridu59: newtype structs have still the same behavior like regular structs, they just no longer automatically deref to their field
[17:26:55] <adridu59> kimundi: ah I see!
[17:27:31] <kimundi> Which regular structs never did, because, well there can be more than a field :P
[17:27:49] <adridu59> kimundi: but why was this behavior removed then? the issue talks about errors with it
[17:28:39] <kimundi> adridu59: Well, it was unexpected, because part of the reason for using a newtype in the first place is to seperate it from the type it wraps
[17:28:54] <cmr> (also because of smart pointer sugar which mandates a Deref trait)
[17:28:55] <kimundi> When we get Deref traits, you can opt-in to that again
[17:29:00] *** Quits: marianoguerra (marianogue@moz-8364F18D.dip0.t-ipconnect.de) (Ping timeout)
[17:29:01] <cmr> (which would make newtypes undereffable)
[17:29:24] <adridu59> okay
[17:29:57] <adridu59> I feel like I've made another step towards the grail quest, thanks!
[17:30:06] <SiegeLord> There is no iterator that returns random numbers, is there?
[17:30:34] <eddyb> SiegeLord: do you really need an iterator for that?
[17:30:54] <kimundi> SiegeLord: Not that I know, but I guess it would be a trivial thing to implement it :)
[17:30:56] <eddyb> rusti: let x: (uint, bool) = (rand(), rand()); x
[17:30:58] -rusti- pastebinned 8 lines of output: http://ix.io/a7s
[17:31:00] <SiegeLord> I only wrote API that accepts iterators :P
[17:31:02] <SiegeLord> *an
[17:31:03] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:31:16] <eddyb> rusti: use std::rand::rand; let x: (uint, bool) = (rand(), rand()); x
[17:31:18] -rusti- pastebinned 8 lines of output: http://ix.io/a7t
[17:31:21] <eddyb> hmpf
[17:31:47] *** Joins: leaper (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp)
[17:31:55] <eddyb> rusti: let x: (uint, bool) = (random(), random()); x
[17:31:58] -rusti- pastebinned 8 lines of output: http://ix.io/a7u
[17:32:04] <eddyb> nevermind
[17:32:06] <bvssvni> rusti: let rng = std::rand::Rng::new(); let x: (uint, bool) = (rng.rand(), rng.rand()); x
[17:32:06] -rusti- <anon>:10:19: 10:38 error: unresolved name `std::rand::Rng::new`.
[17:32:07] -rusti- <anon>:10         let rng = std::rand::Rng::new(); let x: (uint, bool) = (rng.rand(), rng.rand()); x
[17:32:07] -rusti-                             ^~~~~~~~~~~~~~~~~~~
[17:32:07] -rusti- error: aborting due to previous error
[17:32:07] -rusti- application terminated with error code 101
[17:32:09] <jfbk> is there an incantation to skip building stage0?
[17:32:17] <eddyb> bvssvni: you're not supposed to need a RNG
[17:32:27] <adridu59> rand api is tricky semantically iirc
[17:32:35] <eddyb> rusti: use std::rand::random; let x: (uint, bool) = (random(), random()); x
[17:32:36] -rusti- (6329900370626053637u, true)
[17:32:45] <eddyb> rusti: use std::rand::random; let x: (uint, bool) = random(); x
[17:32:46] -rusti- (17684145316485902874u, true)
[17:32:56] <eddyb> nice, tuples work :D
[17:33:09] <bvssvni> wow
[17:33:25] <bvssvni> that is cool :)
[17:34:01] <leaper> std::io::timer::sleep() fails at runtime in when called from a native task: http://mibpaste.com/BP9vkP 
[17:34:08] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[17:34:20] <eddyb> does it say "unimplemented"?
[17:34:38] <eddyb> leaper: "unimplemented I/O interface"
[17:34:40] <kimundi> rusti: use std::rand::random; struct RandIter; impl Iterator<u8> for RandIter { fn next(&mut self) -> Option<u8> { Some(random()) } }
[17:34:43] -rusti- pastebinned 10 lines of output: http://ix.io/a7v
[17:35:00] <leaper> eddyb: yep
[17:35:04] <kimundi> lol, that ICE again
[17:35:19] <kimundi> rusti: use std::rand::random; struct RandIter; impl Iterator<u8> for RandIter { fn next(&mut self) -> Option<u8> { Some(random()) } } RandIter.take(5).to_owned_vec()
[17:35:20] -rusti- ~[34u8, 228u8, 62u8, 41u8, 114u8]
[17:35:25] <SiegeLord> kimundi: I think the best place for it would be as a default method to std::rand::distributions::Sample
[17:35:27] <eddyb> kimundi: y un o generic
[17:35:39] <eddyb> *u no
[17:35:56] <kimundi> eddyb: Cuz I no want looking up the Random trait :P
[17:35:56] <adridu59> leaper: yea it's not implemented yet iirc
[17:36:04] <eddyb> kimundi: riight
[17:36:41] <kimundi> Is there a way to see the last github issues I commented on?
[17:36:49] <flaper87> wasn't there a PR for that ICE somewhere? 
[17:36:56] <flaper87> I think I saw it, or maybe not
[17:37:20] <leaper> Oh I see. If I run into such an exception "unimplemented" then I imagine there's a TODO: somewhere and I don't need to make an issue?
[17:37:46] <Matthias247> there's an issue for it. No PR
[17:37:50] <eddyb> leaper: libnative is still pretty new
[17:37:57] <eddyb> leaper: keep in mind that Rust tries to keep errors as helpful as possible, so most of the time all the information you need is in the error ;)
[17:38:15] <adridu59> leaper: implemented 3 days ago I think https://github.com/mozilla/rust/pull/11294
[17:38:26] <cmr> Which specific error is this?
[17:38:28] <adridu59> leaper: do you have a recent Rust?
[17:38:42] <eddyb> wait, what?
[17:38:48] <leaper> Mine's a few days old.
[17:39:05] <eddyb> oh, another rust rule: keep it master
[17:39:07] <adridu59> master should have it
[17:39:21] <adridu59> leaper: what OS are you on?
[17:39:22] <flaper87> see, I know I saw something
[17:39:28] <flaper87> I knew*
[17:39:44] <leaper> Got it, thank you two. Mac OS X 10.9.1
[17:40:15] <adridu59> well I think Homebrew has nightlies
[17:40:21] <pepper_chico> I'm earger for the pointer trait so Rc and Gc and others doesn't need .borrow() anymore
[17:40:25] <pepper_chico> any status on that?
[17:41:14] <eddyb> pepper_chico: someone has to go and implement it. I think I can, but after I finish with the other stuff I have on my TODO list
[17:41:29] <pepper_chico> =/
[17:43:02] <leaper> adridu59 yep I'm keeping up to date with `brew rm rust && brew install rust --HEAD` just hadn't done so since the 22nd. I guess that's a long time ago in this project :)
[17:43:16] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[17:43:36] <eddyb> leaper: http://huonw.github.io/isrustfastyet/pull_requests/
[17:43:51] <adridu59> leaper: haha, I think you are right before the PR landed
[17:44:30] <leaper> haha
[17:44:43] <Matthias247> I now also have uploaded my (event based) IO work. Might be interesting for some people: https://github.com/Matthias247/revbio
[17:44:53] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:45:21] <leaper> Yep I was 5 commits before.
[17:45:36] <Matthias247> and yes, it's more than incomplete, probably buggy and no ideomatic rust ;)
[17:45:45] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[17:45:54] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[17:45:58] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
[17:46:50] <SiegeLord> Will the std::num rework allow me to define sin() on matrices?
[17:47:16] <SiegeLord> 'cause I'm having trouble imagining what I should return from the pi() method atm :P
[17:47:27] <cmr> SiegeLord: no.
[17:47:37] <cmr> std::num is removing most generic numeric support.
[17:47:42] <SiegeLord> It's a bad rework then!
[17:47:46] <cmr> no it's not
[17:47:52] <cmr> its generic numeric support was awful
[17:47:56] <tiffany> you could return a fail!("go home, you're drunk")
[17:47:58] <cmr> it's being stripped for only primitive types
[17:48:09] <SiegeLord> I guess I'll add my own sin then
[17:48:22] <SiegeLord> tiffany: Hah!
[17:48:31] <flaper87> SiegeLord: have you looked into: https://github.com/bjz/num-rs ?
[17:48:42] <SiegeLord> Too much magma over there
[17:48:43] <flaper87> nothing useful there yet but it's comming :D
[17:49:08] <tiffany> matthias: that's really cool
[17:49:42] <SiegeLord> It looks like it separates sin from constants though, so it might be usable
[17:49:48] <bvssvni> Matthias247: what are the use cases?
[17:50:09] <SiegeLord> It's super silly that I won't be able to do sin(t) anymore with just libstd :P
[17:51:06] <cmr> SiegeLord: you saw how awfully it was structured right?
[17:51:24] <SiegeLord> I'm all for fixing it
[17:51:42] <SiegeLord> I'm not all for not being able to write generic math code using libstd
[17:51:50] * bvssvni prefers std::num to be simple
[17:51:56] <Matthias247> bvssvni: anything that want's to use IO? ;)
[17:52:17] <bvssvni> Matthias247: :)
[17:52:48] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[17:53:17] <bvssvni> Matthias247: looks like a mixture of state machine and message system
[17:53:36] <Matthias247> you need to build a state machine around it so that it works
[17:54:00] <Matthias247> ok, you could also do unsafe callbacks on each event
[17:54:11] <Matthias247> then you have libuv style
[17:54:57] <Matthias247> I looked for a system that works without callbacks, because they don't fit very good into rust
[17:56:26] <leaper> This is probably a stupid question but: Wouldn't it be useful if traits could define fields as well as functions? I had this idea when trying to think of how I would construct an Compontent Entity System in rust ala: http://en.wikipedia.org/wiki/Entity_component_system
[17:57:25] <Matthias247> I'm sure it would be ;)
[17:57:56] <leaper> It would mean the trait is constrained to only be implemented for structs, but would make the field access transparent so structs could be used in polymorphic ways.
[17:58:50] <leaper> I have no idea how technically possible it is; haven't really thought through the implications.
[17:59:03] <bvssvni> leaper: the problem is that the size gets extended with new impls
[17:59:15] <kimundi> leaper: That is planned
[17:59:19] <eddyb> leaper: it's quite possible
[17:59:23] <kimundi> leaper: Won't be for 1.0 though
[17:59:28] <kimundi> Servo needs it
[17:59:39] <kimundi> for fast access to DOM elements
[17:59:50] <eddyb> kimundi: are we not against it? that sounds better than what I knew
[18:00:15] <bvssvni> would that require the struct to declare the fields?
[18:00:16] <eddyb> properly defined duck typing <3
[18:00:33] <kimundi> eddyb: Not sure actually, but I know that _something_ along those lines is needed :P
[18:01:29] <eddyb> kimundi: I don't like single inheritance because it's harder then to add something (way) more flexible, like traits with fields
[18:01:41] <leaper> Interesting! In the mean time I was thinking of simulating it with some macro: #[my_derives=MyPlainOldDataTrait] and generating the getters and setters, and inserting the required fields into the struct.
[18:02:29] <kimundi> eddyb: Uhm, trait with fields is basically what this is about as far as I know - which together with trait inheritance and trait objects would result in single-inheritance objects
[18:02:48] <eddyb> kimundi: trait inheritance is not single
[18:02:51] * bvssvni found out std::rand::random() is 100x+ faster than creating a generator each time :P
[18:03:05] <kimundi> eddyb: Do'h, your right.
[18:03:20] <eddyb> single inheritance sucks
[18:03:30] <kimundi> eddyb: Can still be made single though, if you restrict it to only single inheritance for traits with structs
[18:03:38] <eddyb> JS copes with that by being quite flexible
[18:03:44] <eddyb> kimundi: I don't want single inheritance
[18:04:14] <kimundi> eddyb: Well, as far as I know single inheritance has a performance advantage - just one pointer
[18:04:15] <eddyb> and you don't need virtual field access to make very good use of traits with fields
[18:04:48] <eddyb> kimundi: using &Trait as &BaseTrait?
[18:04:54] <kimundi> yeah
[18:05:06] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[18:05:14] <eddyb> kimundi: that's not possible yet, but I have an idea on how to extract the sub-vtable
[18:05:36] *** Quits: derek_c (derek@moz-CE6E60A5.cit.cornell.edu) (Ping timeout)
[18:06:15] <eddyb> kimundi: anyways, you're implying virtual field access would be a thing - while the best use for traits with fields is DRY, IMO
[18:06:46] <kimundi> eddyb: Uhm, define virtual field access and DRY in this context please :)
[18:06:47] <wycats> I thought the current proposal is just limited to traits that can require certain fields to be present at the head of the struct
[18:06:47] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[18:07:04] <kimundi> wycats: Yeah, that is how I understood it
[18:07:42] <eddyb> kimundi: virtual field access: being able to access a named field via &Trait. *it's the biggest complaint point ever* when it comes to any form of multiple inheritance mixed with fields
[18:07:52] <eddyb> kimundi: DRY: don't repeat yourself
[18:08:49] <kimundi> eddyb: Well yeah, having fields makes multiple inheritance complicated at the very least
[18:09:06] <eddyb> kimundi: how complicated?
[18:09:07] <kimundi> I don't get the DRY aspect here
[18:09:11] <wycats> I don't think this proposal can be considered multiple inheritance
[18:09:20] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[18:09:23] <wycats> it doesn't add anything new re: methods than we already have with Foo : Bar
[18:09:23] <kimundi> wycats: It isn't
[18:09:33] <eddyb> kimundi: with fields in traits you can write code generic over the presence of some fields
[18:10:15] <wycats> confirm
[18:10:19] <wycats> I have wanted this repeatedly
[18:10:25] <eddyb> kimundi: you can put code that uses fields common to all implementors in default methods
[18:10:32] <eddyb> you don't even need to allow virtual field access
[18:10:33] <kimundi> The proposal is basically layering single data inheritance on top of the multiple method trait inheritance stuff
[18:10:45] <kimundi> eddyb: Right, but that is slow
[18:10:53] <eddyb> kimundi: what is slow?
[18:11:02] <wycats> like I have a Message trait in protobuf and I would like like to be able to write code generic against .serialized and not have to type the field name over and over (error prone)
[18:11:03] <eddyb> kimundi: virtual field access is slow *and you don't need it*
[18:11:06] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[18:11:09] <kimundi> eddyb: Going through a virtual call insteasd of loading from an fixed pointer offset
[18:11:23] <wycats> it doesn't add virtual field access if you use generics
[18:11:33] <kimundi> eddyb: That might be your opinion, but it is what this whole proposal is based on
[18:11:43] <wycats> fn serialized<I: Message>(message: I) { message.serialized }
[18:12:02] <wycats> static field lookup just like message.serialized() would be static method lookup
[18:12:03] <kimundi> The Servo devs want it, for real speed reasons, so we will probably get it in the language sooner or later
[18:12:17] <leaper> This is the basic usecase that spurred my question on Trait fields: https://gist.github.com/jakerr/8620786
[18:12:41] <wycats> kimundi: I think it's legitimate if it's limited to a trait that essentially asserts the presence of fields
[18:12:53] <wycats> I don't think it's reasonable to think of it as a special-case hack for Servo
[18:12:58] <kimundi> wycats: I agree
[18:13:00] <SiegeLord> Is -O the highest optimization level available?
[18:13:04] <wycats> no
[18:13:05] <kimundi> Not saying its a special case hack
[18:13:09] <wycats> --opt-level=3
[18:13:17] <wycats> kimundi: I disagree that it's virtual field access in practice
[18:13:36] <kimundi> Just saying that servo is the initial motivation for wanting it, at least for the core devs :)
[18:13:47] <SiegeLord> Damn, still doesn't help >_<. Going to have to look at the assembly
[18:14:02] <eddyb> SiegeLord: you mean LLVM IR?
[18:14:14] <SiegeLord> Is one of them easier to look at?
[18:14:18] <kimundi> wycats: What do you mean?
[18:14:40] *** Joins: short (Mibbit@moz-85C0C507.hsd1.wa.comcast.net)
[18:15:05] <eddyb> SiegeLord: LLVM IR tells you a lot about optimization-related nonsense
[18:15:14] <eddyb> SiegeLord: assembly, not so much
[18:16:05] <kimundi> wycats: Do you mean that this proposal would also allow access to the fields without going through a trait object? because thats true as well :P
[18:16:16] <kimundi> ust didn't mention it explicitly
[18:16:45] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[18:16:55] <wycats> kimundi: I mean that trait objects are already slow
[18:17:00] <wycats> and this proposal doesn't change that
[18:17:16] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[18:17:19] <wycats> but it does allow for fast field lookup if you write methods generic over traits that are constrained by having fields
[18:17:34] <eddyb> s/lookup/access
[18:17:37] <wycats> I think it would be weird to disallow virtual field lookup
[18:17:39] <wycats> c
[18:17:43] <wycats> sorry for being imprecise
[18:17:45] <eddyb> kimundi: what servo wants is &Struct -> &BaseStruct
[18:17:49] <wycats> I am not a "Real Programmer"
[18:17:54] <Earnestly> wycats: (slow in comparison to what out of curiosity?)
[18:17:56] <wycats> no formal CS training
[18:18:05] <wycats> Earnestly: slow compared to static offsets
[18:18:12] <Earnestly> Ah
[18:18:27] <wycats> Earnestly: if you know exactly what type you have, your .foo is basically just a static offset into some memory
[18:18:35] <wycats> and you can achieve that with structs via generics
[18:18:39] <eddyb> kimundi: but then, &BaseStruct -> &Trait wouldn't give you the Struct's methods, so it's already pointless
[18:18:41] <wycats> sorry traits
[18:18:43] <Matthias247> trait objects have the same speed as virtual function calls in c++. or not?
[18:18:47] <eddyb> wycats: well, I'm glad *someone* agrees with me :D
[18:18:48] <kimundi> eddyb: Might well be, with all those proposals and shining light on all possibility, its hard to keep track of the orginal problems sometimes. :P
[18:18:53] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Connection reset by peer)
[18:18:59] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[18:19:03] <eddyb> single inheritance is cursed
[18:19:05] <wycats> eddyb: are you saying is pointless?
[18:19:17] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[18:19:21] <wycats> it sounds like I'm in favor of the proposal
[18:19:21] * kimundi does not claim that he remembers the right stuff all the time
[18:19:22] <eddyb> wycats: I'm saying single inheritance is kinda pointless
[18:19:33] <wycats> eddyb: I'm saying I want traits that are constrained over fields
[18:19:38] <wycats> sounds like you don't agree :)
[18:19:44] <eddyb> wycats: I agree *with that*
[18:19:46] <wycats> but maybe I'm misunderstanding
[18:19:58] <wycats> you can achieve "inheritance" via the current trait composition mechanism
[18:20:04] <eddyb> wycats: I was pointing out that the single struct inheritance servo wants is already broken
[18:20:06] <wycats> trait Element : Node
[18:20:14] <eddyb> wycats: because we don't store vtable pointers inside structs
[18:20:15] <wycats> eddyb: I'm pretty sure this is all servo wants
[18:20:25] <wycats> constraining a trait to fields and Foo : Bar in traits
[18:20:46] <eddyb> wycats: from what kimundi said, they want single structural inheritance, i.e. being able to case &Struct to &BaseStruct
[18:21:00] <eddyb> *cast
[18:21:00] <wycats> I don't know what "case A to B" means
[18:21:01] <kimundi> eddyb: That was not what I meant
[18:21:03] <wycats> ah
[18:21:03] <Ms2ger> That's pretty important, yes
[18:21:12] <wycats> I believe that they want that
[18:21:16] <wycats> but it works without vtables
[18:21:18] <eddyb> wycats: but that erases anything trait-related in Rust so it's useless
[18:21:21] <kimundi> eddyb: I was talking about the same stuff as wycats - though maybe badly :P
[18:21:30] <bstrie_goblin> /r/rust is now 120 subscribers behind /r/objectivec
[18:21:30] <flaper87> (side note: You guys know how to keep this channel alive :D) 
[18:21:32] <flaper87> brb
[18:21:39] <bstrie_goblin> this is the only measure of popularity that I care about
[18:21:48] <flaper87> bstrie_goblin: lol
[18:21:49] <wycats> because the Node (let's say) is a trait constrained to having a few fields at the head
[18:22:01] <wycats> and Element basically inherits that constraint
[18:22:26] <wycats> so fn parentNode<I: Node>(node: I) { node.parentNode }
[18:22:33] <kimundi> eddyb: why is it useless?
[18:22:48] <kimundi> Or do you mean the struct inheritance
[18:22:50] <wycats> ^^ is useful to me
[18:22:57] <bstrie_goblin> wycats: CS major here. formal CS training has nothing whatsoever to do with programming :)
[18:22:58] <wycats> today it cannot happen
[18:23:09] <kimundi> wycats: To me too, I needed it myself :P
[18:23:11] <eddyb> wycats: kimundi mentioned "fast" and we already have multiple trait inheritance that's as slow as the equivalent in C++, so it must be structural inheritance
[18:23:11] <wycats> bstrie_goblin: it has to do with sometimes missing out on shared terminology
[18:23:27] <kimundi> eddyb: As I said, that is not true
[18:23:45] <eddyb> we need to bring someone from servo in here and ask them
[18:23:49] <eddyb> Ms2ger: how much do you know?
[18:23:50] <Matthias247> bstrie_goblin: most people I know with a CS degree can't program at all ...
[18:23:55] <wycats> fn write_to_io<I: Message>(io: IO, message: I) { io.write(message.serialized) }
[18:24:01] <kimundi> eddyb: A virtual call is slower than loading a field from a pointer offset
[18:24:03] <wycats> ^^ this is what I think we're tralking about
[18:24:07] <wycats> and it's not a virtual call
[18:24:14] <wycats> or a virtual field lookup
[18:24:19] <wycats> it's a static field access
[18:24:20] *** Joins: alexherbo2 (alexherbo2@moz-FC10E83F.de)
[18:24:28] <eddyb> wycats: that's what I want. remember what I said?
[18:24:38] <eddyb> wycats: "you don't need virtual field access"
[18:24:50] <Ms2ger> eddyb, we want at least a subtyping relation
[18:24:57] <wycats> Ms2ger: deny
[18:24:57] <eddyb> wycats: but I can't know for sure that it's what servo wants
[18:25:00] <wycats> Ms2ger: deeeeeeny
[18:25:05] <wycats> you do not want subtype
[18:25:06] <Ms2ger> I didn't quite understand nmatsakis's post
[18:25:09] <wycats> subtyping
[18:25:18] <Matthias247> I would like it ;)
[18:25:19] <wycats> you want a totally invariant relationaship
[18:25:24] <wycats> I thought so too
[18:25:26] <Ms2ger> wycats, I want to implement the DOM without transmuting to get to a base class
[18:25:43] <wycats> but then pcwalton pointed out to me that trait inheritance as implemented today gives you what you need
[18:25:49] <eddyb> Ms2ger: do you want to call the original class' methods through the base class?
[18:26:00] <leaper> wycats, kimundi, eddyb not sure if you saw my gist. It's the usecase that spurred my original question: https://gist.github.com/jakerr/8620786 Maybe kinda similar to what Servo wants? 
[18:26:05] <Ms2ger> eddyb, sorry, could you rephrase that?
[18:26:33] <kimundi> leaper: I saw the gist, and it is as far as I know the situation servo wants, and what I and wycats was talking about
[18:26:45] <eddyb> Ms2ger: s/class/struct. &Struct -> &BaseStruct then call a method on &BaseStruct - do you want the version that BaseStruct implements or the one that Struct implements, or do you not care?
[18:26:53] <wycats> Ms2ger: you can basically circumvent virtually all of the variance problems by seeing how far trait inheritance as implemented today will get you
[18:26:55] <kimundi> (Unless servo wants field access for generics?)
[18:27:13] <bstrie_goblin> wycats: http://www.youtube.com/watch?v=5G9O9j0DSII&t=2m57s
[18:27:29] <kimundi> leaper: Ah, only now did I see the second file
[18:27:29] <bstrie_goblin> ^ that's what you just reminded me of
[18:27:43] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[18:27:45] <Ms2ger> eddyb, we want the one in Struct in some cases, at least, but there won't be one in Struct for most cases
[18:28:00] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:28:14] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[18:28:21] <kimundi> leaper: The Position+Color stuff would likely not be possible, only one trait in a trait bound could have fields
[18:28:40] <eddyb> Ms2ger: hmm. no way you can do &my_struct.super?
[18:28:48] <kimundi> r/have fields/restrict impl to struct with that fields
[18:28:58] <eddyb> kimundi: why?
[18:28:59] <wycats> Ms2ger: using trait inheritance solves both the in position and out position variance problems
[18:29:10] <Ms2ger> wycats, if you say so
[18:29:16] <wycats> Ms2ger: think about it
[18:29:27] <Ms2ger> wycats, I'd rather avoid that :)
[18:29:30] <wycats> :P
[18:29:32] <eddyb> Ms2ger: s/you can do/you can be happy with doing/
[18:29:55] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[18:29:58] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[18:30:02] <wycats> foo<I: Node>(callback: |&I|) <= works as expected
[18:30:15] <kimundi> eddyb: Because that would open the multiple inheritance problem in the case of trait objects, as far as I know. - which of the two sets of fields comes first in memory, and how to deal with it if you'd allow upcasts? :P
[18:30:21] <Ms2ger> eddyb, I don't follow. &my_struct.super sounds like it solves calling the impl on BaseStruct when you have &Struct
[18:30:41] <eddyb> Ms2ger: instead of a transmute
[18:30:44] <wycats> container_append<I: Node>(node: I) { append(node) } works as expected
[18:31:07] <wycats> container_get<I: Node>(container: Container<I>) -> I works as expected
[18:31:51] <bvssvni> if the type of super is known, why not call the method on the trait directly? (or am I missing something)
[18:32:00] <Ms2ger> eddyb, I guess
[18:32:16] <Ms2ger> eddyb, I've been avoiding getting it all into my head :)
[18:32:30] <eddyb> Ms2ger: fields in traits + unrestricted multiple trait inheritance is much more powerful than some silly single inheritance servo would want
[18:32:43] <eddyb> kimundi: that assumes you want virtual field access
[18:32:55] <leaper> kimundi: It seems Position + Color should be fine if they don't have conflicting fields no?
[18:33:00] <Ms2ger> Eh, multiple inheritance
[18:33:01] <eddyb> kimundi: but you don't actually need it
[18:33:07] <Ms2ger> Let's not go there, it's a silly place :)
[18:33:07] <kimundi> eddyb: Might well be
[18:33:20] <eddyb> Ms2ger: we can do multiple inheritance better than C++
[18:33:30] <Ms2ger> Woo.
[18:33:30] <kimundi> Ms2ger: Does the servo usecase involve trait objects?
[18:33:46] <Ms2ger> kimundi, I don't know
[18:33:51] <kimundi> Ah, okay
[18:33:53] <eddyb> Ms2ger: which is why I want to this right, with traits :D
[18:34:17] <Ms2ger> wycats, anyway, feel free to send your explanation to mozilla.dev.servo :)
[18:34:18] <eddyb> *to do
[18:34:21] * kimundi exits this conversation now
[18:34:38] <wycats> I'm pretty sure what I'm describing above is what pcwalton at least has in mind
[18:34:43] <bvssvni> maybe Rust should have a prop { get; set; } like C#
[18:34:55] *** Joins: mib_f1xx1f (Mibbit@moz-82E5EE96.hsd1.va.comcast.net)
[18:34:59] <wycats> (Switched to mobile)
[18:35:01] <eddyb> bvssvni: maaaybe not. I think there was a consensus against that
[18:35:06] <wycats> People sadly seem against
[18:35:09] <eddyb> wycats: then you know more than me
[18:35:44] *** Quits: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net) (Quit: WeeChat 0.4.2)
[18:35:45] <wycats> Uniform Access Principle ftmfw
[18:35:46] <Matthias247> bvssvni: i would also like that ;)
[18:35:54] <eddyb> wycats: well, if you want this awesome feature, let's team up and make people forget virtual field access
[18:36:13] <eddyb> wycats: that's what most people bring up against it. and it's not fair at all
[18:36:18] <cmr> bjz: is the cargo-lite docs/workflow much better now?
[18:36:25] <eddyb> because you rarely need the darn thing
[18:36:34] <wycats> eddyb: I think we're on the same page 
[18:36:48] <bjz> cmr: had to install python2
[18:36:50] <wycats> If you need virtual lookup you're probably better off with a method honestly 
[18:36:58] <cmr> bjz: arch's fault ;p
[18:37:03] <bjz> cmr: umm, so I need docopt?
[18:37:07] <wycats> I would like getters and setters though
[18:37:11] <cmr> bjz: setup.py does the things
[18:37:29] <eddyb> wycats: or explicitly ask for virtual field access. though I don't want "virtual" as a keyword
[18:37:54] <eddyb> wycats: kimundi has a point about offset
[18:38:04] <bjz> Traceback (most recent call last):
[18:38:05] <bjz>   File "/usr/local/bin/cargo-lite.py", line 22, in <module>
[18:38:05] <bjz>     from docopt import docopt
[18:38:05] <bjz> ImportError: No module named docopt
[18:38:20] * cmr checks that he pushed the commit adding the deps
[18:38:43] <cmr> nope
[18:38:46] <cmr> I need to stop doing that
[18:38:50] <wycats> eddyb: what is the point?
[18:39:01] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[18:39:09] * leaper is leaving
[18:39:11] <leaper> Thanks for the interesting conversation!
[18:39:12] <wycats> My understanding of the proposal is that it's a constraint on fields existing at the head of the struct
[18:39:17] <eddyb> wycats: that it's somewhat cheaper to have an offset in the vtable instead of a method call
[18:39:29] *** Quits: leaper (Mibbit@moz-1095CD08.kanagawa.ocn.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[18:39:54] <eddyb> wycats: that is, if people really need virtual field access for something. *the fields-in-traits feature* doesn't need virtual field access at all
[18:40:04] <wycats> Confirn
[18:40:10] <wycats> And you don't want it virtual
[18:40:22] <eddyb> you shouldn't do anything :)
[18:40:27] <eddyb> opt-in for slowness
[18:41:18] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[18:41:47] *** Joins: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[18:41:57] *** Joins: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net)
[18:42:29] <cmr> you're talking about http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/ right?
[18:42:34] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[18:42:52] <cmr> bjz: (I updated btw, pull and re-install)
[18:44:31] *** Joins: dLog (anonymous@moz-8FAE8709.eastlink.ca)
[18:44:36] *** Joins: alonlevy (alon@moz-7E95D53A.red.bezeqint.net)
[18:44:42] <wycats> eddyb: I'd say YAGNI for now
[18:45:00] <eddyb> wycats: I sure hope so :D
[18:45:37] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:45:42] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:46:50] <phil> jeaye: no more ncurses-rs for you eh?
[18:47:02] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:47:20] <jeaye> phil: I haven't touched any of my Rust projects in a few months.
[18:47:25] <phil> ah
[18:47:28] <phil> no time?
[18:47:39] <jeaye> Aside from merging in pull requests for things like ncurses-rs.
[18:47:39] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[18:48:00] <jeaye> phil: Yeah, life gets in the way, other projects, etc.
[18:48:10] <wycats> Sad :(
[18:48:17] <phil> yeah
[18:48:18] <SiegeLord> Damn, temporaries are killing performance in my vector expressions
[18:48:23] <phil> i know how that goes
[18:48:40] <wycats> I gotta break out libbuffoon into a public library without intermixed skylight details
[18:49:03] *** Quits: alonlevy (alon@moz-7E95D53A.red.bezeqint.net) (Ping timeout)
[18:49:09] <wycats> Vector expressions?
[18:49:53] <Ms2ger> Just watch out that the librarians don't throw you out
[18:50:15] *** Joins: ljrmorgan (Mibbit@moz-1BCDA4C8.as13285.net)
[18:50:18] <SiegeLord> wycats: Writing a little expression template linear algebra library
[18:51:01] *** Quits: int3_ (int3_@moz-BA9A8211.public.wayport.net) (Client exited)
[18:52:20] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[18:52:34] <SiegeLord> http://pastebin.ca/2588967 the top loop is 20-50% slower than the bottom loop
[18:53:51] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Connection reset by peer)
[18:53:52] *** Joins: judofyr_ (judofyr@moz-8BB0A10D.nextgentel.com)
[18:54:05] <eddyb> SiegeLord: what's assign doing?
[18:54:42] <SiegeLord> A loop over self.unsafe_set(i, v.unsafe_get(i));
[18:55:03] <eddyb> SiegeLord: okay, here's an idea: don't use a and b in the first loop
[18:55:29] <eddyb> (since you only use a in the second loop)
[18:55:46] <SiegeLord> That's kind of the point :P
[18:55:53] <eddyb> SiegeLord: do these vectors have to be arbitrarily sized?
[18:55:57] <SiegeLord> Of course
[18:56:08] <eddyb> so it's not like you can use Vec2 and Vec3
[18:56:14] <SiegeLord> Nope
[18:56:27] <eddyb> mkay
[18:56:35] <eddyb> SiegeLord: what's the point?
[18:57:08] <SiegeLord> 'b' is the temporary that LLVM has trouble optimizing out
[18:57:19] <eddyb> SiegeLord: does let t = (&a + &a * &a) / &a; a.assign(&t); make it as fast?
[18:57:42] <SiegeLord> That won't work, as a.assign naturally mutates a
[18:57:47] *** Joins: mib_i7ywej (Mibbit@FC7CB5CE.7FDDA9B5.B7830B68.IP)
[18:57:47] <eddyb> SiegeLord: it's better to compare between your top version and my t one, instead of your bottom unsafe version
[18:57:49] <SiegeLord> And all those &a freeze it
[18:58:20] <eddyb> SiegeLord: does t keep &a inside it?
[18:58:24] <SiegeLord> Yep
[18:58:50] <ljrmorgan> is there a way to get a function pointer to a method on a trait?
[18:58:51] <eddyb> hmm
[18:59:17] <eddyb> SiegeLord: so how does the bottom version work?
[18:59:25] <mib_i7ywej> Hey I got (what I hope is) a simple question regarding casting integers to string
[18:59:31] <eddyb> ljrmorgan: not easily
[18:59:41] <SiegeLord> eddyb: There is a copy when you do let v = ...get(i)
[18:59:54] <SiegeLord> Of a single f32
[18:59:55] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[19:00:08] <eddyb> SiegeLord: wait, so Vector is a [f32]?
[19:00:18] <SiegeLord> The bottom loop copies one f32 at a time, and the top one copies the whole vector
[19:00:22] <SiegeLord> Yes
[19:00:29] *** Joins: jakerr (bluehex@moz-1095CD08.kanagawa.ocn.ne.jp)
[19:00:49] <ljrmorgan> eddyb: :-) does that mean it can't be done, or that the syntax is a bit gnarly?
[19:01:11] *** Joins: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de)
[19:01:18] *** Quits: mib_i7ywej (Mibbit@FC7CB5CE.7FDDA9B5.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:01:21] <eddyb> ljrmorgan: do you want it to work on trait objects?
[19:01:29] *** Joins: bugweiser (Mibbit@FC7CB5CE.7FDDA9B5.B7830B68.IP)
[19:01:30] <eddyb> SiegeLord: so you weren't correct when I asked if t here keeps &a inside itself in let t = (&a + &a * &a) / &a;
[19:01:35] <eddyb> ljrmorgan: i.e. go through the vtable?
[19:01:48] <SiegeLord> eddyb: It sure does...
[19:02:07] <eddyb> SiegeLord: is t a ~[f32]?
[19:02:12] <ljrmorgan> eddyb: I want it to work on something which implements the trait
[19:02:25] <eddyb> ljrmorgan: so a generic type with a bound?
[19:02:54] <ljrmorgan> eddyb: e.g. let x = Some(3); let is_some = Option::is_some; let should_be_true = is_some(x);
[19:02:55] <SiegeLord> t is a Divider<Adder<&Vector,Multiplier<&Vector,&Vector>>,&Vector>
[19:03:00] <ljrmorgan> something like that anyway
[19:03:05] <eddyb> ljrmorgan: you have to wait for UFCS. I have a PR which fixes the internals so it would work, all that remains is to allow it
[19:03:17] <eddyb> SiegeLord: aha
[19:03:20] <ljrmorgan> eddyb: yeah, a generic type with a bound would work
[19:03:35] <eddyb> SiegeLord: and what does assign do?
[19:03:55] *** Quits: oberstet (quassel@moz-82FA2EA.dynamic.mnet-online.de) (Client exited)
[19:04:20] <SiegeLord> eddyb: https://gist.github.com/SiegeLord/dc93a3c2b3e421522bc8#file-vector-rs-L39
[19:04:48] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[19:05:05] <bugweiser> Hey, unrelated question to all this: when using format!() to format a string, how do you escape { characters necessary for the string?
[19:05:13] <eddyb> SiegeLord: you have way too many newlines and tabs
[19:05:31] <SiegeLord> That's just silly :P
[19:05:47] <eddyb> bugweiser: \\
[19:06:20] <ljrmorgan> eddyb: thanks for your help, is there somewhere I can read more about ufcs? Any idea when that might land?
[19:06:39] <eddyb> ljrmorgan: my PR - I was hoping for "this evening" but I'm slow :(
[19:06:52] <ljrmorgan> eddyb: I sort of want something a bit like boost::bind in C++ (or even just strait member function pointers)
[19:07:14] <ljrmorgan> eddyb: that's great, sounds like I won't have to wait too long then. Thanks!
[19:07:27] <eddyb> ljrmorgan: allowing it is quite easy, the problem is we need to agree in a meeting on it
[19:07:33] <eddyb> SiegeLord: more than one of those things would fit on my screen if you used a rustier style, just saying
[19:07:46] <SiegeLord> Get a bigger screen :P
[19:07:55] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[19:07:58] <eddyb> SiegeLord: why aren't you using iterators instead of the unsafe nonsense?
[19:08:21] <bugweiser> eddyb: thanks
[19:08:35] <eddyb> SiegeLord: oooh, I see your problem :)
[19:08:54] <SiegeLord> I guess I could be using iterators... I'll think about it
[19:08:58] *** Parts: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) ()
[19:09:02] <eddyb> though, no, it can't be solved with *just* iterators
[19:09:39] <eddyb> SiegeLord: meh, do you really want that code to work? instead of using map?
[19:10:06] <eddyb> SiegeLord: for LLVM - you could try collecting "(&a + &a * &a) / &a" inside the for loop
[19:10:18] <eddyb> it might be able to remove the allocation
[19:10:24] <SiegeLord> What do you mean, "collecting"?
[19:10:37] <eddyb> SiegeLord: the equivalent of the collect method on iterators
[19:11:22] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:11:26] *** Quits: Orwin (Adium@91BD4595.AC80DA87.CC73C50D.IP) (Ping timeout)
[19:12:10] *** Quits: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de) (Ping timeout)
[19:12:32] <SiegeLord> I think it made it 10x+ slower :P
[19:12:37] <SiegeLord> It's still running, can't tell yet
[19:12:37] *** Joins: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de)
[19:13:25] <eddyb> SiegeLord: meh, LLVM doesn't do too well with removing dynamically sized allocation
[19:14:02] <eddyb> SiegeLord: anyways, we have a similar issue with [T] and iterators
[19:14:53] <eddyb> SiegeLord: you can easily take a vector and an iterator and assign the results of the iteration into the vector. but it can't be a mutable slice of a vector you're already taking values from
[19:15:05] <eddyb> SiegeLord: a map_assign method might be the best thing here
[19:16:01] <SiegeLord> Not sure how map_assign would work in the general case
[19:16:29] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[19:16:31] <SiegeLord> E.g. summing of two different vectors and assigning it to a third
[19:16:51] <SiegeLord> You'd have to zip the two vectors... and then I'm not sure how you'd map_assign on that
[19:17:08] <SiegeLord> Well, not assign it to a third... I mean a = a + b
[19:17:16] <eddyb> SiegeLord: I mean, a.map_assign(|v| (v + v * v) / v) would be the equivalent of your second loop
[19:17:35] <SiegeLord> Well, sure, but it's just a toy example
[19:17:38] <eddyb> :(
[19:17:59] <eddyb> SiegeLord: oh, I know :D
[19:18:13] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[19:19:03] <eddyb> SiegeLord: for (a, b) in a.mut_iter().zip(b.iter()) { *a += b; }
[19:19:19] <eddyb> SiegeLord: soon you might be able to overload a += b; to do exactly that
[19:19:50] <SiegeLord> Hmm, I wonder if I can fit += into my lib idea
[19:19:54] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[19:20:38] <SiegeLord> These things just don't mesh that well with borrow checking
[19:21:32] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:21:40] <SiegeLord> Yeah, doubt it'll work. If it could have worked, it'd just be able to do a.assign(&a + &b) today
[19:22:02] <SiegeLord> It will work in simple cases, but not in the general case
[19:22:08] *** Quits: short (Mibbit@moz-85C0C507.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:23:51] <newguy> how do i make sure that my program can only access files in subdirectories of my current working directory?
[19:24:21] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:24:35] <newguy> for example, if the filepath is "/filename.txt" in know that it is in the current directory
[19:25:32] *** Joins: alonlevy (alon@moz-AA416853.bb.netvision.net.il)
[19:25:36] <newguy> how would i go about determining if a filepath is a subdirectory of my current working directory?
[19:25:57] <eddyb> SiegeLord: it will work with AddAssign that takes &mut a and &b
[19:26:21] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Ping timeout)
[19:26:39] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[19:28:25] *** Quits: Erik_ (Erik_S@moz-E7E31D21.hlrn.qwest.net) (Ping timeout)
[19:28:30] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:31:13] *** Quits: weirdo (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[19:32:19] *** Joins: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de)
[19:33:20] <newguy> does anyone have experience with path_is_dir or path_exists
[19:33:21] <newguy> ?
[19:33:56] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[19:34:41] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:34:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:36:26] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[19:39:23] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Client exited)
[19:40:11] <cmr> newguy: /filename.txt is by definition not relative, and not to be taken as a subdirectory of the cwd.
[19:40:40] <cmr> You can join that path with the cwd to get such.
[19:40:48] <SiegeLord> eddyb: Problem is, what if the RHS also has terms depending on a
[19:40:55] <eddyb> SiegeLord: bleah
[19:41:03] <SiegeLord> It just won't work in the general case
[19:41:07] <eddyb> SiegeLord: you might want to use RefCells internally
[19:41:17] <SiegeLord> Yeah, I'll think about that
[19:41:25] <eddyb> SiegeLord: so individual accesses are protected
[19:41:26] <SiegeLord> Obviously what I'm doing is safe in the context of assignment
[19:41:28] *** Quits: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP) (Quit: victorporof)
[19:41:31] <eddyb> SiegeLord: well, not RefCells, Cells
[19:41:44] <eddyb> (since f32 is Pod)
[19:41:51] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[19:42:03] <newguy> cmr: ok. How should I go about ensuring that a given path is in my cwd or subdirectory of my cwd
[19:42:12] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:43:07] *** Quits: ion (ion@heh.fi) (Ping timeout)
[19:43:28] <eddyb> SiegeLord: it doesn't have an overhead AFAICT https://github.com/mozilla/rust/blob/master/src/libstd/cell.rs
[19:43:44] <SiegeLord> Interesting
[19:43:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:44:08] <eddyb> SiegeLord: ~[Cell<f32>] :P
[19:45:40] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[19:46:46] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[19:47:13] <eddyb> SiegeLord: and I think then you can borrow everything as immutable - it's not a good abstraction, but you're not breaking memory safety
[19:47:24] <kimundi> One of theses days, I really need to let someone explain to me the fully capabilities of Cell and RefCell, and what they each are being needed for.
[19:47:27] <SiegeLord> Interesting
[19:47:37] <SiegeLord> I'll see if that's a possibility
[19:48:38] <SiegeLord> The API as is seems very clunky coming from, e.g. MATLAB, but it seems par-for-the-course in terms of banging your head against borrow check in other places in Rust
[19:48:55] <SiegeLord> But if this Cell improves on that, that'd be neat
[19:49:07] <eddyb> kimundi: Cell is for Pods, it has 0 overhead, and it lets you mutate the contents via an immutable borrow - you can only access the inner value with get/set so it doesn't violate memory safety
[19:49:49] <SiegeLord> So if Cell is no_freeze... would Buu be a no_cell?
[19:50:19] <kimundi> SiegeLord: HAHA
[19:50:27] <kimundi> That's a bad one :P
[19:50:40] *** Quits: skade (skade@moz-C4F7242D.dip0.t-ipconnect.de) (Quit: Textual IRC Client: www.textualapp.com)
[19:51:00] *** Joins: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[19:51:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:51:27] <newguy> does anyone know if getcwd() is still in use?
[19:51:39] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:51:44] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[19:52:17] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[19:52:25] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:52:33] <kimundi> newguy: No idea, but a function like that should exist somewhere in the std lib
[19:52:56] <eddyb> kimundi: RefCell is more complicated: it has an extra uint, a borrow refcount, and you can borrow it mutably or immutably. the two kinds of borrows can't overlap, you can't have more than one mutable borrow at any time, but you can have more than one immutable borrow (that's what the refcount is for)
[19:53:01] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:53:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:53:08] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:53:22] <nham> is it possible to "unborrow" a reference without leaving the scope?
[19:53:40] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Client exited)
[19:53:49] <kimundi> nham: No, but you can add additional scopes and let that end befor the outer original one
[19:54:16] <kimundi> That is, I think under certain circiumstances it unborrows automatically - but the manual way works too
[19:54:37] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[19:54:45] <nham> kimundi: hmm, okay. thanks
[19:55:11] *** Joins: satalha__ (satalha@moz-21D6B3DE.csclub.uwaterloo.ca)
[19:55:12] *** Quits: ljrmorgan (Mibbit@moz-1BCDA4C8.as13285.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:56:10] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[19:56:29] <kimundi> eddyb: Hm, I see. And both are used to work around the typesystem by either making checks dynamic, or reducing to the special case where no check is neccessary either way, right?
[19:56:39] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[19:56:57] <eddyb> kimundi: yupp
[19:57:42] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[19:58:21] <newguy> how would i check a substring from the end of a string?
[19:58:32] <newguy> like the file extension
[19:58:45] *** Quits: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com) (Quit: Leaving)
[19:59:42] <newguy> maybe like a contains() function that checks to see if a string includes a substring?
[19:59:51] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[20:00:05] <kimundi> rusti: "foobar".ends_with("bar")
[20:00:06] -rusti- true
[20:00:34] <newguy> thanks!
[20:00:49] <kimundi> newguy: Though If you want to be future proof, you need to stop treading paths as strings :P
[20:01:08] <newguy> ok, how should i treat them?
[20:01:09] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:01:40] <newguy> oh lol
[20:02:23] <kimundi> By working with Path structs exclusively - though they properly don't yet have all the nice API like strings does
[20:02:34] <newguy> gotchya
[20:02:54] *** Joins: davidillsley (sid18481@moz-5F4AA75A.irccloud.com)
[20:03:02] <kimundi> In general, you can not assume that a path is a valid utf8 encoded unicode string, like Rusts string type is
[20:03:45] <kimundi> Windows paths are USC16, and unix paths are basically arbitrary binary data
[20:06:13] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[20:06:27] *** Joins: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP)
[20:07:31] *** Joins: alonlevy_ (alon@moz-A0B19A63.bb.netvision.net.il)
[20:07:41] <newguy> kimundi: ok
[20:07:56] *** Quits: alonlevy (alon@moz-AA416853.bb.netvision.net.il) (Ping timeout)
[20:08:21] *** Quits: judofyr_ (judofyr@moz-8BB0A10D.nextgentel.com) (Client exited)
[20:08:24] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[20:08:42] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[20:10:24] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[20:11:45] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[20:14:19] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[20:14:46] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[20:18:38] *** Joins: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP)
[20:19:01] *** Quits: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de) (Input/output error)
[20:19:07] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[20:28:10] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[20:32:19] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[20:32:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:33:50] *** Joins: zeenix (zeenix@moz-B92AB3AA.range109-158.btcentralplus.com)
[20:34:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:34:29] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[20:34:37] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[20:34:44] *** Parts: zeenix (zeenix@moz-B92AB3AA.range109-158.btcentralplus.com) (Leaving)
[20:35:33] *** Quits: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP) (Ping timeout)
[20:38:19] *** Joins: turbopape (turbopape@B011C239.487157C6.F27A0FFA.IP)
[20:38:27] <comex> anyone know whether there is already a bug for make -j being broken?
[20:39:03] <eddyb> comex: broken in what way?
[20:39:19] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[20:39:38] <comex> eddyb: compile failure.
[20:40:01] <eddyb> comex: oh, interesting. during which stage?
[20:40:29] <comex> let's see, i already cleared the history because i had seen this discussed before.  i'll do it again
[20:40:35] <newguy> hey does anyone know what happened to is_dir()
[20:40:57] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:40:59] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[20:41:03] <newguy> its showing up when i search for it in the documentation, but when i click on it, it doesnt find it
[20:41:03] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[20:41:54] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[20:42:40] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:42:45] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[20:43:24] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[20:43:24] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[20:43:43] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Client exited)
[20:44:06] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[20:44:25] *** Joins: ion (ion@heh.fi)
[20:45:48] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Ping timeout)
[20:46:42] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:46:46] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[20:47:10] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[20:47:19] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Client exited)
[20:47:42] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[20:48:30] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[20:49:24] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Ping timeout)
[20:50:10] *** Joins: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu)
[20:50:53] *** Joins: twi (Adium@moz-B714914D.lnse3.lon.bigpond.net.au)
[20:51:27] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[20:51:53] *** Quits: int3_ (int3_@moz-EB847D24.subnet-224.amherst.edu) (Ping timeout)
[20:52:12] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[20:59:20] *** Joins: jdsanders (Adium@moz-9FDB729E.hlrn.qwest.net)
[21:01:55] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[21:01:58] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[21:03:07] *** Quits: Ms2ger (Ms2ger@768AD319.7BE2E8BA.187A1082.IP) (Quit: nn)
[21:05:00] <olsonjeffery> newguy: yeah i see that as well.. that's weird
[21:05:05] <olsonjeffery> re: doc link error
[21:05:06] *** Quits: mib_f1xx1f (Mibbit@moz-82E5EE96.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:05:12] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:05:24] <olsonjeffery> newguy: to answer your question, though, use fs::stat and inspect the `kind` field
[21:05:48] <olsonjeffery> newguy: http://static.rust-lang.org/doc/master/std/io/fs/fn.stat.html
[21:06:33] <olsonjeffery> that's the mechanism that underlaid is_dir when it existed.. it was just a convenience function
[21:06:45] *** Quits: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[21:07:28] <olsonjeffery> ah. i see what's going on.. 
[21:07:35] <olsonjeffery> i think this is an error in the docs
[21:07:37] <olsonjeffery> cmr: ping
[21:08:15] <olsonjeffery> newguy: so is_dir is an extension for path::Path that is impl'd in io::fs
[21:08:22] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[21:08:43] *** Joins: furypt (Adium@moz-C2895121.rev.vodafone.pt)
[21:09:13] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[21:11:50] <olsonjeffery> cmr: if you happen by: https://github.com/mozilla/rust/issues/11800
[21:14:57] *** Parts: furypt (Adium@moz-C2895121.rev.vodafone.pt) ()
[21:17:15] <pongad> Sorry, a newbie question: if I have an enum MinMaxResult<T> with deriving(Eq), why can't I assert_eq! two MinMaxResult<&int>...?
[21:17:27] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[21:17:50] <pongad> It complains about a borrowed value not living long enough
[21:18:18] <comex> task 'rustc' has overflowed its stack
[21:18:20] <comex> zsh: illegal hardware instruction  rustc bindgen.rs
[21:18:22] <comex> i just don't seem to have any luck...
[21:18:26] *** Quits: jackneill (jackneill@moz-143FDB1E.pool.digikabel.hu) (Ping timeout)
[21:19:02] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:20:07] <comex> infinite recursion in middle::ty::type_structurally_contains
[21:20:09] *** Joins: yuriks (yuriks@EB1C9F80.D509E3A.8E0C6B01.IP)
[21:21:01] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[21:21:56] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[21:22:13] <kimundi> pongad: On what version of Rust are you?
[21:22:23] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:22:40] <pongad> kimundi: I'm on master
[21:23:33] <pongad> I did assert_eq!(vector.iter().min_max(), OneElement(&10)),  OneElement being a variant of MinMaxResult
[21:23:43] <kimundi> pongad: Hm, what exactly is the definition of MinMaxResult, and how are you plugging value into assert_eq! ?
[21:23:52] <pongad> rustc complains about &10 not living long enough
[21:24:04] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[21:24:07] *** Joins: ofeldt (ofeldt@moz-16F18429.dip0.t-ipconnect.de)
[21:24:50] <pongad> kimundi: http://pastebin.com/UNKZJmi0
[21:24:53] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:25:01] *** Quits: ofeldt- (ofeldt@moz-4EE121FE.dip0.t-ipconnect.de) (Ping timeout)
[21:25:35] <_achin> does anyone know if github has a way to see all issues that you've subscribed to?
[21:27:22] <pongad> _achin: There's notification, but I don't think there's a persistent way to do it
[21:27:40] <pongad> I might just be wrong though, haven't used GitHub for that long
[21:27:51] <kimundi> rusti: let x = &5; let y = & &5; (*x, **y)
[21:27:52] -rusti- (5, 5)
[21:27:55] <kimundi> hmm
[21:28:24] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[21:28:35] <kimundi> pongad: I don't see an obvious problem to fix, so you might just need to assign 10 to a seperate variable beforehand
[21:28:40] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[21:28:56] <kimundi> pongad: For reference, here is the implementation of assert_eq! : https://github.com/mozilla/rust/blob/master/src/libstd/macros.rs#L75-L88
[21:28:59] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[21:29:10] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[21:29:34] <pongad> kimundi: I saw the definition, though I'm not sure why the compile is failing
[21:29:45] <kimundi> me neither
[21:29:51] <pongad> I'll set to a variable beforehand
[21:30:01] <pongad> Will call for help in the PR :D
[21:30:11] <eddyb> rusti: let x = &5; let y = & {&5}; (*x, **y)
[21:30:12] -rusti- (5, 5)
[21:30:15] <eddyb> hmm
[21:30:20] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[21:30:55] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[21:31:05] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[21:32:20] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:32:50] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Client exited)
[21:33:16] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[21:34:10] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:34:57] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[21:35:26] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[21:35:31] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[21:35:33] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[21:35:54] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:36:18] <sfackler> pongad: I've run into that as well. I think it's a lifetime issue introduced by niko's recent changes. I've worked around it by using assert!(foo == Some(&10)) instead of assert_eq!
[21:37:35] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:37:35] <pongad> sfackler: great! I'll see if that works!
[21:38:02] <newguy> how would one go about checking if a file is in their current or subdirectory?
[21:38:05] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[21:39:01] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:39:49] <comex> at least that one is easy to pin down. https://github.com/mozilla/rust/issues/11801
[21:39:57] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[21:40:10] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[21:41:28] <jdsanders> anybody know of a library that has a primality test for `extra::bigint::BigUint`s?
[21:42:27] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Connection reset by peer)
[21:42:38] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[21:46:43] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[21:52:13] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[21:53:24] *** Quits: bdd (bdd@C4ACBE39.C0E94BF1.D01D599A.IP) (Quit: Changing server)
[21:55:21] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[21:55:42] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:56:54] *** Joins: bdd (bdd@C4ACBE39.C0E94BF1.D01D599A.IP)
[21:57:46] *** Quits: bdd (bdd@C4ACBE39.C0E94BF1.D01D599A.IP) (Quit: leaving)
[21:58:04] *** Joins: nszceta (quassel@moz-E6CA8D6.hsd1.pa.comcast.net)
[21:58:21] *** Joins: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP)
[21:58:23] *** Joins: bdd (bdd@C4ACBE39.C0E94BF1.D01D599A.IP)
[21:59:44] *** Quits: victorporof (victorporo@E55FB5BC.20287B6C.D111398B.IP) (Quit: victorporof)
[22:00:01] *** Quits: lenstr (lenstr@88ED11E5.9636F313.7A27613B.IP) (Ping timeout)
[22:00:07] *** Quits: bdd (bdd@C4ACBE39.C0E94BF1.D01D599A.IP) (Quit: leaving)
[22:01:04] *** Quits: bugweiser (Mibbit@FC7CB5CE.7FDDA9B5.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:01:57] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:02:40] <wycats> I see a bunch of 6-month-old activity around once-fns behind a flag
[22:02:43] <wycats> did it all get reverted?
[22:02:49] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[22:02:54] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[22:03:38] *** Quits: rca_ (rcatolino@moz-585FE07D.adsl.proxad.net) (Ping timeout)
[22:03:56] *** Quits: canhtak (canhtak@moz-94ED4C91.wl.t.ulaval.ca) (Quit: canhtak)
[22:04:18] *** Joins: canhtak (canhtak@moz-94ED4C91.wl.t.ulaval.ca)
[22:04:52] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:05:32] <wycats> is it possible to cast a static || into a fn?
[22:05:48] *** Joins: lennart (lennart@moz-DE70D6F.stanford.edu)
[22:05:57] <eddyb> wycats: no. though what's the issue?
[22:06:01] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[22:06:02] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[22:06:09] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:06:14] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[22:06:27] <eddyb> wycats: 'static || has some problems with missing inferred bounds and implicit copyability
[22:06:29] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[22:06:30] <wycats> eddyb: I'm just trying to work out ways to write this run! macro without the limitations of proc or closure
[22:06:34] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[22:07:02] <wycats> I want to be able to run some code into a block that can both have &T referenced and ~T moved in
[22:07:06] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:07:21] <wycats> the real solution is a once closure
[22:07:34] <eddyb> wycats: does the code run in another thread?
[22:07:37] <wycats> but because I'm writing a macro I have other choices
[22:07:41] <wycats> eddyb: the full context is this:
[22:07:43] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[22:07:45] <wycats> I'm working at the FFI boundary
[22:07:49] <wycats> I'm using Task::new.run()
[22:07:50] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:07:54] <wycats> but run takes a ||
[22:08:00] <eddyb> you can't use - wait, what?
[22:08:01] <wycats> which means I can't move in owned parameters
[22:08:10] <eddyb> why does run take a || and not a proc?
[22:08:21] <wycats> so I actually wrote a patch to make it take a proc
[22:08:25] <eddyb> it sounds like it does something in a different task
[22:08:27] <wycats> which made my situation even worse
[22:08:29] <wycats> it doesn't
[22:08:30] <eddyb> hehe
[22:08:34] <wycats> it's basically just a C++ try/catch
[22:08:39] <wycats> plus creation of a TLS
[22:08:46] <eddyb> wycats: so it does run in another task
[22:08:50] <wycats> ah yes
[22:08:53] <wycats> but not thread
[22:08:58] <wycats> neither green nor native
[22:09:02] <eddyb> wycats: Task doesn't know that
[22:09:03] *** Quits: hays (quassel@moz-35E8FEFC.washdc.east.verizon.net) (Ping timeout)
[22:09:07] <wycats> confirm :)
[22:09:10] <wycats> I was in this code last night
[22:09:19] <wycats> so the problem with procedures is that it's hostile to being used with &T
[22:09:21] <eddyb> if you're running with libnative, it's always going to be a different thread
[22:09:29] <eddyb> wycats: because it's not safe :)
[22:09:33] <wycats> yes
[22:09:39] <wycats> the correct solution is a once fn
[22:09:48] <wycats> which allows moving in ~T and referencing &T
[22:09:48] <eddyb> it's still technically a proc
[22:10:07] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:10:07] *** Joins: hays (quassel@moz-D0A13FDA.washdc.east.verizon.net)
[22:10:08] <wycats> or maybe a borrowed proc?
[22:10:11] <eddyb> >_>
[22:10:25] <wycats> the point is I want to write an abstraction that doesn't require dances to get values in
[22:10:28] <wycats> and I'm close
[22:10:47] <eddyb> wycats: I seriously doubt what it does is sync
[22:10:49] <wycats> I may write a procedural macro that does the option dance for you for owned values
[22:10:55] <wycats> eddyb: your doubts are incorrect
[22:10:58] <wycats> it is absolutely sync
[22:11:04] <eddyb> with what?
[22:11:08] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:11:09] <wycats> it's similar to wrapping the run code in a try { } catch { }
[22:11:12] <wycats> it calls the fn()
[22:11:14] <wycats> synchronously
[22:11:16] <eddyb> wycats: that's semantically
[22:11:18] <wycats> and adds a destructor
[22:11:22] <eddyb> it calls the proc from another task
[22:11:26] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:11:29] *** Quits: heftig (heftig@moz-1F9C34E6.dip0.t-ipconnect.de) (Ping timeout)
[22:11:33] <wycats> it does not run it in parallel with the original code
[22:11:40] <wycats> it runs it down-stack from the original code
[22:11:47] <eddyb> only because something synchronizes it
[22:11:51] <wycats> no
[22:11:52] <eddyb> wycats: it runs on a different stack
[22:11:54] <wycats> that is incorrect
[22:12:03] <eddyb> what you're saying doesn't make sense
[22:12:15] <wycats> ok
[22:12:20] <eddyb> you're telling me it doesn't always spawn a thread with libnative?
[22:12:28] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:12:42] <wycats> https://github.com/mozilla/rust/blob/master/src/libstd/rt/task.rs#L108
[22:12:46] <wycats> where is it spawning a thread?
[22:12:47] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:13:08] <wycats> I'm telling you it doesn't spawn a thread, correct
[22:13:09] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:13:23] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[22:13:49] <wycats> this is useful for an FFI boundary
[22:14:43] <eddyb> wycats: you do read the part where it says "this shouldn't be abused for try/catch", right?
[22:15:04] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[22:15:17] <wycats> eddyb: I do not agree that I am abusing it for try/catch
[22:15:22] <wycats> I'm not using it in the middle of other rust code
[22:15:29] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[22:16:11] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[22:16:18] <eddyb> https://github.com/mozilla/rust/blob/master/src/libstd/task.rs#L250-L276
[22:16:22] *** Joins: heftig (heftig@moz-8FF1C6CF.dip0.t-ipconnect.de)
[22:16:42] *** Joins: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au)
[22:16:43] <eddyb> so this is... the sane version, I guess
[22:16:58] <wycats> "This is meant to be used at the absolute boundaries of a task's lifetime, and only for that purpose"
[22:17:01] <wycats> that is what I am doing
[22:17:40] <eddyb> okay, so this is what spawn does https://github.com/mozilla/rust/blob/master/src/libstd/rt/task.rs#L234-L235
[22:17:53] <SiegeLord> Does Cell break the analogy between memory safety and data race freedom?
[22:18:05] <eddyb> wycats: this is a really weird hack
[22:18:08] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[22:18:20] <eddyb> wycats: it's not the "try" thing exposed by libstd though
[22:18:30] <wycats> eddyb: I disagree that it's a weird hack
[22:18:30] <eddyb> that one does what I thought it did
[22:18:37] <wycats> or do you mean the internals
[22:18:39] <wycats> the internals are weird
[22:18:45] <wycats> the API does basically what I want
[22:18:57] <eddyb> SiegeLord: it doesn't break anything, as long as you consider kinds
[22:19:23] <eddyb> wycats: doesn't it destroy the task?
[22:19:47] <wycats> eddyb: I have to make a new task at each FFI boundary
[22:19:51] <wycats> but it's not TOO expensive
[22:19:59] <wycats> and saves me from taking down the entire host process
[22:20:08] *** Quits: alonlevy_ (alon@moz-A0B19A63.bb.netvision.net.il) (Ping timeout)
[22:20:09] <wycats> taking down the host process on fail! is basically a non-starter
[22:20:22] <eddyb> what I don't understand is how this makes sense
[22:20:22] <wycats> https://gist.github.com/wycats/56ab99d667e417559e28
[22:20:28] <eddyb> I guess it's designed around M:N
[22:20:32] <wycats> this is my patch to make it take a procedure instead of a closure
[22:20:51] <wycats> both libnative and libgreen call into it
[22:20:54] <wycats> you can see in my patch
[22:21:08] <wycats> but I'm not submitting the procedure patch because it has the same problems in reverse
[22:21:20] *** Quits: hays (quassel@moz-D0A13FDA.washdc.east.verizon.net) (Ping timeout)
[22:21:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:21:23] <eddyb> so what this thing does
[22:21:37] <eddyb> is it runs a function just before it kills the task
[22:21:42] <eddyb> *on the same thread*
[22:22:30] *** Joins: brson (brson@moz-7B0110AD.mv.mozilla.com)
[22:22:30] *** ChanServ sets mode: +ao brson brson
[22:22:36] <wycats> yep
[22:22:48] <wycats> that is what you want when calling into a Rust extern'ed C function
[22:22:55] <wycats> you don't want to spin up a new thread
[22:23:00] <eddyb> wycats: that surely isn't supposed to be ran by you
[22:23:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:23:08] *** Joins: hays (quassel@moz-51C45E29.washdc.east.verizon.net)
[22:23:09] <eddyb> so you're abusing the M:N design
[22:23:10] <wycats> eddyb: it's in the public API
[22:23:13] <wycats> um
[22:23:17] <wycats> "abusing"
[22:23:21] <wycats> I don't think I am
[22:23:30] <wycats> and I think the use-case is legitimate
[22:23:39] <wycats> calling into Rust functions from C code
[22:23:47] <eddyb> wycats: why is there a "try" function doing it with "spawn", in std::task?
[22:24:04] <eddyb> wycats: okay, let's say I don't have strong feelings
[22:24:08] <wycats> there are different use-cases
[22:24:14] <wycats> sometimes spawning is correc
[22:24:19] <wycats> in my case spawning is definitely incorrect
[22:24:32] <eddyb> wycats: so you want to control unwinding?
[22:24:45] <wycats> I just want to know if unwinding has happened
[22:24:51] <wycats> so I can return a failure back to see
[22:25:08] <wycats> my FFI is of the form fn ffi_func(...params, out: *mut T) -> bool
[22:25:13] <wycats> and if unwinding happens
[22:25:16] <wycats> I return false
[22:25:19] <wycats> otherwise true and fill in the out
[22:25:22] <eddyb> well, there's this https://github.com/mozilla/rust/blob/master/src/libstd/rt/task.rs#L178
[22:25:46] <eddyb> maybe you can control unwinding without touching tasks?
[22:25:52] <wycats> the handle is a task
[22:26:10] <wycats> also, I would like TLS to exist
[22:26:19] <wycats> so if I have to... make a HashMap :P
[22:26:51] <eddyb> wycats: among other things, https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L188-L196
[22:27:00] <wycats> I mean... is there a way to make an unsafe closure that lets you move things in?
[22:27:04] <wycats> I would assume no
[22:27:23] <eddyb> wycats: actually, look around the code I've linked
[22:27:31] <wycats> hm interesting
[22:27:34] <wycats> but it doesn't give me TLS
[22:27:40] <eddyb> it does nasty things with closures
[22:27:46] <wycats> and takes *c_vod?
[22:27:48] <wycats> void*
[22:28:04] <wycats> whoa it casts the closure to a *c_void
[22:28:07] <wycats> what is going on here :P
[22:28:15] <eddyb> wycats: wait, are you calling from C to Rust or from Rust to C?
[22:28:15] *** Joins: steveno (steveno@moz-2B2BE86F.hsd1.pa.comcast.net)
[22:28:19] <wycats> C to Rust
[22:28:38] <eddyb> wycats: then maybe you can initialize the task once
[22:28:45] <wycats> maybe
[22:28:56] <wycats> the core issue is that I need a way to syntactically write a closure-like thing that the compiler will allow me to move into and close over references
[22:29:02] <wycats> I am willing to use unsafe code
[22:29:09] <wycats> but neither procs nor || do both
[22:29:21] <eddyb> wycats: what is that closure for?
[22:29:25] <wycats> to pass to try
[22:29:29] <wycats> or something try-like
[22:29:38] <wycats> eddyb: I'll probably open up my abstraction for comments when I'm done
[22:29:42] <eddyb> wycats: from Rust, calling C code?
[22:29:59] <wycats> from a function at the FFI boundary in Rust being called from C
[22:30:01] <eddyb> I'm not sure what the big picture is
[22:30:05] <wycats> ok:
[22:30:30] <wycats> atm I have a ffi_fn! macro that looks like this ffi_fn!(skylight_high_res_time() -> u64 { precise_time_nanos() })
[22:30:41] <wycats> which basically wants to run that code in the block in a "try" of some sort
[22:30:44] <eddyb> oooh, skylight. heh
[22:30:52] <wycats> and stuff the u64 in an out var
[22:31:01] <wycats> and returns a true/false depending on whether the try failed
[22:31:04] <eddyb> wycats: so you want the error handling on the Rust side?
[22:31:16] <eddyb> wycats: you do realize it's much easier to do this in C++, right?
[22:31:50] <wycats> so the C code does something like: uint_64t time; if (skylight_high_res_time(&time)) return ULL2NUM(time) else rb_raise("Couldn't get a timestamp")
[22:31:55] <wycats> I don't have C++
[22:31:56] <wycats> I have C
[22:32:09] <eddyb> okay, let me think
[22:32:25] <wycats> so basically I just want to run that code (precise_time_nanos()) inside of a try of some sort
[22:32:37] <wycats> the tricky thing is that some of the FFI functions take ~Trace and some take &Trace
[22:32:44] <wycats> so if I macroify into a closure
[22:32:45] *** Quits: moostik (Icedove@moz-2B884898.w83-199.abo.wanadoo.fr) (Ping timeout)
[22:32:51] <wycats> I can't use ~Trace in the block
[22:32:57] <wycats> and if I macroify into a procedure
[22:33:01] <wycats> I can't use &Trace in the block
[22:33:03] <eddyb> wycats: there has to be an way to do this on the C side
[22:33:08] <wycats> I don't really want to
[22:33:15] <wycats> I don't want unwinding to escape Rust
[22:33:29] <eddyb> wycats: Rust uses libunwind
[22:33:33] <wycats> yes I know
[22:33:38] <wycats> was going to mess around with borrowed procedures
[22:34:11] <eddyb> wycats: you mean like &my OnceFn?
[22:34:19] <eddyb> or just <F: OnceFn> F
[22:34:26] <wycats> I didn't think OnceFns made it in
[22:34:26] <eddyb> we're not there yet
[22:34:38] <eddyb> wycats: they didn't. I still have to implement variadic generics :(
[22:34:39] <wycats> yeah OnceFns are the correct solution
[22:34:41] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[22:35:00] <wycats> was going to see if &proc() had the correct semantics
[22:35:06] <wycats> it may allow moving &ref inside
[22:35:12] <wycats> using*
[22:35:16] <eddyb> wycats: that's useless
[22:35:19] <wycats> why?
[22:35:23] <eddyb> you can't call &proc
[22:35:39] <wycats> dereferencing will just fail I guess?
[22:35:50] <eddyb> wycats: you can't move out of a borrowed reference
[22:36:00] <wycats> yeah
[22:36:06] <wycats> ugh
[22:36:18] <wycats> I just want a closure-like thing that is restricted enough to allow moving ~T and referencing &T
[22:36:27] <eddyb> https://github.com/mozilla/rust/blob/master/src/rt/rust_try.ll
[22:36:28] <wycats> I'm willing to accept any solution :P
[22:36:33] <eddyb> this is interesting
[22:36:36] <wycats> including unsafe code
[22:36:47] <eddyb> wycats: handle exceptions on the C side
[22:36:51] <eddyb> much easier
[22:37:14] <wycats> with rust_try and a function pointer?
[22:37:21] <eddyb> wycats: with libunwind
[22:37:21] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[22:37:31] <wycats> I'm willing to accept this but it seems actually bad
[22:37:46] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[22:37:48] <wycats> it seems like the "FFI boundary" case is a normal case
[22:37:50] <wycats> nothing crazy
[22:38:00] <eddyb> wycats: though you might not be able to prevent the task object to go crazy
[22:38:18] <wycats> eddyb: can I case a &proc() to a proc unsafely?
[22:38:28] <eddyb> wycats: you'll double free
[22:38:35] <wycats> cast*
[22:38:40] <wycats> I can cast::forget
[22:38:53] <wycats> at the end of the day I just need a syntactic form that the compiler will allow me to reference things from
[22:38:54] <eddyb> so you end up with exactly the same thing as before
[22:39:03] <wycats> before when?
[22:39:04] <eddyb> but with more unsafe
[22:39:06] <johnsoft> wycats- i needed something similar, but gave up
[22:39:10] <eddyb> wycats: a borrowed proc is still a proc
[22:39:13] <johnsoft> and used a struct with a method instead
[22:39:15] <wycats> right now I can't actually make it work
[22:39:22] *** Joins: marcel_r (chatzilla@37CAED5E.29CC82CF.C33E194F.IP)
[22:39:31] <wycats> johnsoft: but I actually need to be able to reference any of the variables
[22:39:43] <eddyb> wycats: you can use a procedural macro
[22:39:50] <wycats> eddyb: I was considering that
[22:40:00] <johnsoft> wycats- define them as references in the struct
[22:40:01] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[22:40:01] <wycats> but let's step back for a second
[22:40:04] <eddyb> to store the captures in a struct and implement an OnceFn-like trait
[22:40:06] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[22:40:16] <wycats> how does a OnceFn-like trait work?
[22:40:29] <eddyb> wycats: just like OnceFn
[22:40:36] <eddyb> wycats: you just can't make it variadic
[22:41:03] <patpat> hi, what is Rust's stance on Ternary Operators?
[22:41:04] <wycats> eddyb: link?
[22:41:10] <wycats> patpat: make a macro :P
[22:41:17] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:41:22] <eddyb> patpat: if a {b} else {c}
[22:41:25] <wycats> eddyb: there must be a way to syntactically write a closure or procedure that allows moving into and referencing out of, but which can eventually be cast into something that can be run safely a single time
[22:41:25] <kimundi> patpat: The stance is "Use if else" :)
[22:41:30] <patpat> aw, okay :P
[22:41:32] *** Quits: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au) (Quit: kvanb)
[22:41:42] <wycats> t!(foo ? bar : baz) would work too ;)
[22:41:43] <eddyb> wycats: trait OnceFn0<T> {fn call(self) -> T;}
[22:41:45] <wycats> if you wrote it
[22:42:01] *** Joins: brson_ (brson@moz-BBE3ABD.mv.mozilla.com)
[22:42:06] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[22:42:36] <glaebhoerl> eddyb: afaik you can't call that as a trait object though
[22:42:43] <glaebhoerl> (which is where the need for &move/&my comes in)
[22:43:10] <eddyb> wycats: though I suggest naming it something specific to that function, so we don't start having FnN traits :P
[22:43:12] *** Quits: brson (brson@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:43:51] *** Quits: brson_ (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[22:43:55] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:43:55] *** ChanServ sets mode: +ao brson brson
[22:44:16] <eddyb> glaebhoerl: I thought about doing something like impl Fn<...> for &mut Context, with Fn taking self by value, and self becomes &mut self on a &mut Trait
[22:44:47] <eddyb> glaebhoerl: though that has problems, like degrading has to be allowed with kinds, and it kinda breaks generic bounds
[22:44:53] <wycats> seems like &proc still requires references to implement Send
[22:44:58] *** Quits: amir (amir@moz-49060BB9.cust.bluewin.ch) (Ping timeout)
[22:45:33] <eddyb> wycats: &proc is a bust
[22:46:20] <eddyb> glaebhoerl: in this case, the function doesn't need trait objects
[22:46:50] <dbaupp> wycats: https://github.com/huonw/header btw
[22:47:10] <dbaupp> SiegeLord: Cell is not Send, so it can't be used from multiple threads
[22:47:13] <wycats> eddyb: closures won't let me move into
[22:47:23] <SiegeLord> dbaupp: I see
[22:47:25] <wycats> and there's no way to unsafely do it?
[22:47:36] <wycats> dbaupp: sexy
[22:47:44] <wycats> are you huonw?
[22:47:48] * dbaupp is
[22:47:50] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[22:47:55] <wycats> ah I didn't know that?
[22:47:59] <eddyb> wycats: you create a structure to hold the arguments and implement OnceFn0
[22:48:09] * dbaupp doesn't know if wycats didn't know that?
[22:48:10] <wycats> procedural macros are hard :P
[22:48:16] <wycats> dbaupp: I did not know that
[22:48:21] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[22:48:29] <dbaupp> wycats: it's not very good... it'll crash on the use of non-primitive types :P
[22:48:32] *** Joins: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net)
[22:48:36] <wycats> um
[22:48:36] <eddyb> wycats: no they're not :)
[22:48:38] <wycats> sbb
[22:48:39] <wycats> :P
[22:48:42] *** Joins: bt3ze (ben@moz-DBB46323.itc.virginia.edu)
[22:48:44] <wycats> eddyb: to me they are hard
[22:48:48] <wycats> the AST is not documented
[22:48:55] <wycats> I actually know how to work with ASTs :P
[22:48:58] <eddyb> wycats: but it's... named :)
[22:49:09] <wycats> all the Handlebars work is essentially in the style of "procedural macro"s
[22:49:27] <wycats> I guess I could try using printf-debugging to learn
[22:49:30] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[22:50:41] <wycats> hm: https://gist.github.com/9b8afdbe3bcb8690521d
[22:50:44] <wycats> why is this allowed?
[22:50:59] * skrylar eyes suspiciously. "Inkscape is a professional ... " version 0.48. HMMMMM.
[22:51:04] <dbaupp> wycats: what's the problem?
[22:51:11] <eddyb> wycats: does it actually consume x?
[22:51:12] <wycats> aren't I moving x into the closure?
[22:51:13] <dbaupp> wycats: using `x` inside the closure?
[22:51:21] <dbaupp> oh, || closures capture by-reference
[22:51:22] <wycats> I thought *x dereferences and forces a move
[22:51:46] <eddyb> wycats: try using x after the println call
[22:51:56] <dbaupp> wycats: println!(..., x); expands to &x
[22:52:01] <dbaupp> so it's just borrowing it
[22:52:07] <wycats> ok I wrote a free() function that forced it to be consumed :P
[22:52:12] <dbaupp> (see `--pretty expanded`)
[22:52:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:52:29] <wycats> maybe an approach is:
[22:52:35] <wycats> write a closure that takes the list of arguments
[22:52:45] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[22:52:50] <wycats> and call it with the arguments 
[22:52:58] <eddyb> wycats: no variadics
[22:52:58] <wycats> or an fn
[22:53:13] <wycats> what I'm trying to work out is what the raw try takes
[22:53:17] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[22:53:22] <wycats> eddyb: sure, but I can just generate what I need in the macro
[22:53:26] <eddyb> wycats: do what I said :P
[22:53:37] *** Quits: marcel_r (chatzilla@37CAED5E.29CC82CF.C33E194F.IP) (Connection reset by peer)
[22:53:42] <eddyb> wycats: and impl TryInnerOnceFn or whatever for ||
[22:53:45] <wycats> eddyb: can you gist what "handle exceptions in C" looks like?
[22:53:53] <wycats> eddyb: ah
[22:53:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:54:01] <eddyb> wycats: so previous usescases still work
[22:54:08] <wycats> I honestly lack context on what "implement something like OnceFn" means
[22:54:12] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[22:54:20] <eddyb> wycats: I gave you a complete definition above!
[22:54:27] <eddyb> it's even generic over the return type :P
[22:54:28] <wycats> I read it
[22:54:40] <eddyb> wycats: it's really just a trait with a single "call" method that takes self by value
[22:54:45] <eddyb> there's nothing more to it
[22:54:46] <eddyb> nada
[22:54:48] <eddyb> niente
[22:54:52] <wycats> hm
[22:54:54] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[22:55:03] <wycats> so let me try to see if I can explain it back to you
[22:55:12] <wycats> what is "self"?
[22:55:23] <eddyb> wycats: the receiver of the method?
[22:55:32] <wycats> so you're packing the args into a struct?
[22:55:44] <eddyb> and you can write a procedural macro (it's actually easy) that puts the arguments in a structure and then implements TryInnerOnceFn for that structure
[22:55:49] *** Quits: bt3ze (ben@moz-DBB46323.itc.virginia.edu) (Connection reset by peer)
[22:55:49] <eddyb> wycats: sure
[22:55:51] <wycats> how do you call this code inside a try?
[22:55:57] <wycats> that's the crux of my question
[22:55:58] <eddyb> wycats: by calling the method?
[22:56:03] *** Joins: bt3ze (ben@moz-DBB46323.itc.virginia.edu)
[22:56:08] <eddyb> OOOH
[22:56:15] <eddyb> wycats: I think I see what the issue is
[22:56:27] <eddyb> it's not what try takes, but what it's implemented with
[22:56:31] *** Joins: marcel_r (chatzilla@37CAED5E.29CC82CF.C33E194F.IP)
[22:56:34] <wycats> the OnceFn is just a strategy for dealing with compilation restrictions
[22:56:49] <wycats> but I still need a way to take whatever strategy I use and pass the code running part to some form of try
[22:56:50] <eddyb> wycats: you'd have to rewrite finally and try to use similar OnceFn traits
[22:57:00] <wycats> https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L164
[22:57:03] <wycats> this code takes a trait
[22:57:03] <dbaupp> one solution would be making try generic: `fn try<A>(args: A, f: |A|) { ... }`
[22:57:06] <wycats> sorry a closure
[22:57:07] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[22:57:17] <eddyb> dbaupp: won't work
[22:57:26] <dbaupp> then `.try(things_you_need_by_value, |x| { ... })`
[22:57:46] *** Quits: bt3ze (ben@moz-DBB46323.itc.virginia.edu) (Connection reset by peer)
[22:57:56] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[22:57:57] <eddyb> wycats: not that try, the other try
[22:57:58] <wycats> so let's say I have this struct that has all the stuff packed into it
[22:58:07] <wycats> the problem is that I have to call it from something
[22:58:13] <wycats> which has the same restrictions
[22:58:14] <eddyb> wycats: oh wait, they're intertwined
[22:58:17] <wycats> closure may get called twice
[22:58:22] <wycats> proc may get called later
[22:58:33] <wycats> so now I've just pushed the problem down a level
[22:58:41] <wycats> but I have no way to pass "call this OnceFn" directly to try
[22:58:48] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[22:58:49] <eddyb> wycats: yeah, I see the issue
[22:58:53] *** flaper87 is now known as flaper87|afk
[22:59:00] <wycats> glad :)
[22:59:07] <wycats> I thought I was going crazy / being a horrific noob
[22:59:30] <wycats> is there no "unsafe once fn" that can be cobbled together?
[22:59:35] <eddyb> wycats: rewriting Task::run is easy (that's what I was calling "try" sorry)
[22:59:41] <wycats> yeah agreed
[22:59:44] <wycats> that isn't the problem
[22:59:51] <eddyb> wycats: problem is, it's using finally (which you can rewrite) and try (which... you can't)
[22:59:58] <wycats> correct
[23:00:05] <eddyb> wycats: this is what glaebhoerl was actually talking about
[23:00:07] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[23:00:14] <wycats> basically what I need is a way to tell the compiler "hey you see these moves inside here... allow them even though you normally would not"
[23:00:18] <eddyb> wycats: OnceFn + indirection means you need something like &my self or &move self
[23:00:31] <eddyb> wycats: I guess you can use ~ if you don't mind the allocation
[23:00:34] <wycats> eddyb: the solution right now is closure + option dance
[23:00:40] <wycats> but option dance is not easy to macroize
[23:00:49] <wycats> I am trying to find a solution that uses the block of code unchanged
[23:01:04] <wycats> I can obviously move it into a {}, a ||, a proc(), a fn, etc.
[23:01:07] <eddyb> the difference between ~ and &my/&move is that the latter can live on the stack
[23:01:20] <wycats> but I'd like to avoid changing the code inside the implementation
[23:01:34] <eddyb> wycats: one safe solution would be to use that trait
[23:01:47] <eddyb> wycats: but have it take ~self, like procs
[23:01:50] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[23:02:01] <wycats> use what trait?
[23:02:09] <eddyb> wycats: CustomOnceFn
[23:02:34] <eddyb> hmm, you may not need a procedural macro at all, for the structure
[23:02:56] <eddyb> wycats: can you extract argument names and argument types, sepparately?
[23:03:07] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[23:03:23] <wycats> https://gist.github.com/fe451f37d41fe1f0125c
[23:03:31] <eddyb> the difference between ~CustomOnceFn and proc is that proc always needs Send
[23:03:32] <wycats> this is the basically the challege
[23:03:37] <wycats> eddyb: yes
[23:03:38] <wycats> you can
[23:03:41] <wycats> I believe so anyway
[23:03:47] <wycats> so I can do things like call with args
[23:03:59] <wycats> fn foo(...args) { block of code } foo(...args)
[23:04:02] <eddyb> while your ~CustomOnceFn doesn't need Send
[23:04:12] <wycats> but I still need a way to call foo inside a try
[23:04:28] <eddyb> wycats: so here's the deal
[23:04:32] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[23:04:36] <wycats> and I don't want to change all the references inside "block of code" to self.foo
[23:05:02] <wycats> let's make a deal
[23:05:05] <wycats> what is the deal?
[23:05:24] <eddyb> struct Args(argument types); impl CustomOnceFn<return type> for Args {fn call(~self) -> return type {let Args(argument names) = self; ... code ...}}
[23:05:36] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:06:02] <wycats> oooh
[23:06:04] <eddyb> now cast ~Args(argument names) to ~CustomOnceFn<return type> or whatever
[23:06:15] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Quit: Leaving...)
[23:06:37] <wycats> ok I'm losing you
[23:06:43] <wycats> I don't see how to actually CALL this code
[23:06:45] <eddyb> and the latter can be used instead of a proc, by Task::run and the try nonsense
[23:06:58] <eddyb> wycats: you can call the call method on ~CustomOnceFn
[23:07:04] <wycats> so I see the low-level try primitives here: https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L164
[23:07:12] <wycats> yes, but how do you call it inside the scope of a try?
[23:07:22] <eddyb> wycats: by calling the method?
[23:07:51] <wycats> well the low-level is rust_try
[23:07:53] <eddyb> wycats: try would take such a trait object instead of a method
[23:07:59] <wycats> which takes a c_void*
[23:08:04] *** Joins: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de)
[23:08:05] <Kjelle> Say that I have a vector of elements of a game "Entity" trait. Is there some way I can find which items in the vector that are of type "Player" (which implements "Entity" trait)? Or is there maybe some other cooler way of doing such things in Rust?
[23:08:06] <eddyb> wycats: trait objects and closures are both two words
[23:08:12] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[23:08:15] *** Quits: steveno (steveno@moz-2B2BE86F.hsd1.pa.comcast.net) (Quit: Leaving)
[23:08:16] <wycats> how do I take the ~CustomOnceFn and make it palatable to rust_try
[23:08:42] <wycats> I don't know what "invoke" does in this llvm dump
[23:08:44] <eddyb> Kjelle: you need to have Entity inherit Any, though I'm not sure that would "just work"
[23:08:50] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[23:08:55] <wycats> invoke void %f(i8* %fptr, i8* %env)
[23:09:05] <kimundi> Kjelle: In general, once you've put something into a trait object, you loose the ability to get it out again
[23:09:11] <wycats> basically give it the function cast to void* plus the trait object cast to void*?
[23:09:13] <kimundi> eddyb: It won't
[23:09:24] <eddyb> kimundi: it would at least give you the TypeId
[23:09:34] <eddyb> that you can compare with TypeId::of::<Player>
[23:09:45] <kimundi> True, but the Any traits need to be reimplemented manually
[23:09:52] <eddyb> if you want the contents
[23:09:57] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Quit: Konversation terminated!)
[23:10:02] <Kjelle> Hmm, ok
[23:10:11] <eddyb> kimundi: we need to add the ability to cast &Trait to &BaseTrait
[23:10:17] <kimundi> eddyb: yeah
[23:10:40] <eddyb> wycats: that calls f with fptr and env. (fptr, env) are the closure that you gave to try
[23:10:48] <eddyb> wycats: f is "try_fn", I believe
[23:10:51] <wycats> in this case I have no closure
[23:10:56] <eddyb> wycats: https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L178-L186
[23:10:56] <wycats> I have a trait with a function on it
[23:11:06] <wycats> I am missing huge details
[23:11:07] <wycats> ugh
[23:11:12] <eddyb> wycats: you need to change the type of "closure" from that to the trait pointer
[23:11:26] <kimundi> wycats: A trait object is pretty much the same as a closure in that regard
[23:11:28] <eddyb> wycats: it's rust code calling the closure, not the LLVM thing
[23:11:36] <eddyb> kimundi: don't confuse him more!
[23:11:38] <wycats> and what does "invoke" expect
[23:11:44] <eddyb> wycats: invoke calls try_fn
[23:11:46] <kimundi> okay :P
[23:11:51] <eddyb> wycats: it doesn't call the closure
[23:11:59] <eddyb> wycats: https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L170-L171
[23:12:08] <Kjelle> I tried something as simple as adding a "is_player" function to the entity trait but I cant cast anyway I think :(
[23:12:35] <eddyb> wycats: f = try_fn, and then there's the contents of the closure, the function pointer and the env - the LLVM code doesn't care about those, it just passes them to try_fn
[23:12:55] <wycats> but rust_try is definitely taking a thing to call
[23:13:03] <wycats> and this trait object is not a thing to call
[23:13:04] <eddyb> wycats: try_fn
[23:13:13] <wycats> ah but it takes parameters
[23:13:16] <wycats> any kind you want
[23:13:18] <eddyb> wycats: it doesn't call the closure, it calls try_fn, which calls the closure
[23:13:18] <Kjelle> casting using "as" only seems to work when casting to trait object, not from trait object to something else. Guess I understand why, it is an unsafe operation.
[23:13:32] <wycats> so you can give it a "callable thing" plus pointers to whatever arguments?
[23:13:40] <eddyb> wycats: two arguments to be precise
[23:13:52] <eddyb> wycats: in this case, the two arguments are the contents of a ||
[23:13:54] <wycats> but the specific arguments don't matter
[23:13:57] <wycats> so I can give it ~self
[23:14:04] <eddyb> wycats: a ~Trait has the same size
[23:14:07] <eddyb> two pointers
[23:14:11] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[23:14:15] <wycats> and it will call trait_fn(self)
[23:14:18] *** Joins: matthewbot (user@moz-C6814817.ga.at.cox.net)
[23:14:20] <eddyb> wycats: oh, you want to use rust_try directly?
[23:14:27] <bvssvni> Kjelle: the solution is to add 'get_component' and 'set_component' on entity
[23:14:35] <eddyb> bvssvni: err, what?
[23:14:45] <wycats> eddyb: vs. try?
[23:14:59] <wycats> or are you saying I just unsafely cast the trait into a closure?
[23:15:08] <eddyb> wycats: I was thinking of modifying try and Task::run to take a trait
[23:15:14] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[23:15:21] <eddyb> Kjelle: the issue is that we don't yet allow casting &TraitA to &TraitB where TraitA inherits TraitB
[23:15:29] <eddyb> Kjelle: then it would be easy to use Any
[23:15:46] <wycats> eddyb: ok let's start over
[23:15:55] <wycats> what entry point do you want to pass the trait into?
[23:15:56] <eddyb> wycats: rust_try takes three things
[23:15:59] <wycats> yes
[23:16:04] <wycats> I feel like a horrible person here :P
[23:16:07] <eddyb> a function to call
[23:16:09] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[23:16:12] <eddyb> and two opaque pointers
[23:16:19] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[23:16:24] <eddyb> the function to call is "try_fn" here https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L178-L186
[23:16:24] <wycats> and it calls the function with the pointers
[23:16:25] <wycats> right?
[23:16:31] <bvssvni> Kjelle: you are trying to create Entity/Component framework, right?
[23:16:31] <eddyb> yes
[23:16:37] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:16:40] <wycats> eddyb: ok this makes sense
[23:16:52] <eddyb> wycats: try_fn "assembles" the two pointers back into a closure
[23:17:02] <Kjelle> bvssvni: not really, I have some kind of entity trait which the player and enemies implement
[23:17:03] <wycats> if I call try_fn directly I wouldn't need a trait object right?
[23:17:10] <wycats> I could just make the struct in the macro
[23:17:24] <eddyb> wycats: you mean, if you call rust_try directly
[23:17:27] <wycats> right
[23:17:27] <Kjelle> the enemies need to find out who the player is from a vector of Entity trait objects
[23:17:38] <eddyb> wycats: you still need something opaque
[23:17:45] <wycats> although how do I get a reference to struct.call (or whatever I call it) from the struct's impl
[23:17:56] <bvssvni> Kjelle: you can use an int pointing to the player
[23:17:57] *** Joins: kvanb (kvanb@moz-19F0C096.lnse5.win.bigpond.net.au)
[23:18:09] <eddyb> wycats: you don't
[23:18:23] <eddyb> wycats: all you need to do is transmute the two opaque pointers into a trait pointer
[23:18:28] <eddyb> wycats: and then call the method as usual
[23:18:31] <wycats> struct Args { foo: int } impl Args { pub fn call(self) { let ... = Args{ self }; code } }
[23:18:42] <bvssvni> Kjelle: if you need multiple players, consider HashSet
[23:18:46] <eddyb> wycats: you need a trait, not a simple method
[23:19:01] <eddyb> wycats: or are trying trying to abuse rust_try? hmm
[23:19:06] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[23:19:07] <wycats> such abuse
[23:19:18] <wycats> eddyb: I guess where I'm still confused is where the trait gets called
[23:19:26] <eddyb> wycats: in the callback of rust_try
[23:19:33] <eddyb> the extern "C" fn(*c_void, *c_void)
[23:19:41] <wycats> rust_try(what goes here, what goes here, what goes here)?
[23:19:47] <wycats> given the above struct definition?
[23:19:49] <Kjelle> bvssvni: Yeah that might work. Maybe I should convert this into a component based thing though. I did that for a C++ 2D engine/framework I wrote once, worked quite well.
[23:20:19] *** Joins: Guest_ (textual@moz-9F92DFA4.sb.sd.cox.net)
[23:20:19] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[23:20:23] <eddyb> wycats: callback, opaque, opaque. the callback does anything it wants with opaque and opaque. do you want to use a trait or just the structure?
[23:20:43] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Client exited)
[23:20:55] <wycats> eddyb: and what kind of thing is the callback?
[23:21:08] <eddyb> wycats: an extern "C" fn with two *c_void arguments
[23:21:13] *** Joins: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net)
[23:21:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:21:33] <wycats> ah
[23:21:56] <eddyb> extern "C" fn callback(args: *c_void, _: *c_void) {let args: ~Args = transmute(args); args.call();}
[23:21:59] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[23:22:00] <eddyb> that might just work
[23:22:05] <Guest_> nmatsakis: I started writing up what we talked about, any structure you have in mind for proposals? I figured we could codify it (at least a little) in the process
[23:22:07] <wycats> ok I'm starting to understand
[23:22:10] *** Guest_ is now known as jroesch
[23:22:22] <wycats> how do I get rust_try?
[23:22:27] <wycats> where do I import it from
[23:22:35] <eddyb> wycats: I was talking about traits because you seemed ready to modify the std code
[23:22:48] <eddyb> wycats: you kinda have to make it up yourself
[23:22:54] *** Quits: bt3ze (ben@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[23:23:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[23:23:11] <eddyb> wycats: put this somewhere https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L188-L196
[23:23:25] <wycats> I will probably write my own special-purpose Task::run
[23:23:28] <eddyb> wycats: you also have to run this https://github.com/mozilla/rust/blob/master/src/libstd/rt/unwind.rs#L172-L175
[23:23:29] <wycats> once I get things working
[23:23:31] <wycats> I really do want TLS
[23:23:49] <eddyb> wycats: then rewrite Task::run, try and finally
[23:24:01] <eddyb> wycats: though it won't be nice with ~OnceFn0
[23:24:03] <wycats> yes, I am planning on doing that for my special-case
[23:24:12] <wycats> I can use macros to get the job done for myself
[23:24:25] <eddyb> we do really need &my/&move *sigh*
[23:24:28] <wycats> eddyb: why am I externing this rust_try?
[23:24:44] <eddyb> wycats: extern means you're importing it
[23:25:01] <wycats> ah
[23:25:05] <wycats> it's like a Rust C prototype :P
[23:25:31] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[23:25:53] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[23:26:15] <eddyb> wycats: this is very fun
[23:26:23] <eddyb> wycats: but I have to sleep, good night and good luck :)
[23:26:30] <wycats> eddyb: fun in the sense of "look at this idiot go"?
[23:26:33] <wycats> hahah
[23:26:33] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[23:26:35] <wycats> iScare
[23:26:51] <eddyb> wycats: you? an idiot?
[23:27:12] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:27:17] <eddyb> I still feel bad about thinking Task::run wasn't a hack running on the same thread
[23:27:28] <Kjelle> bvssvni: How would you create get_component? I would still have a problem with finding out what type a component is. In C++ I once did a super slow solution with dynamic_cast...
[23:27:49] <bvssvni> Kjelle: I would return an enum containing all the component types
[23:28:23] <eddyb> bvssvni: but why would someone have a trait object when an enum would suffice?
[23:28:27] <wycats> eddyb: heh
[23:28:36] <wycats> thanks for all your help
[23:28:53] <eddyb> wycats: I just saw the ages in that gist
[23:29:04] <eddyb> wycats: you're just two years older than me!
[23:29:11] *** Quits: jroesch (textual@moz-9F92DFA4.sb.sd.cox.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:29:11] <bvssvni> eddyb: because traits are for different implementations, not for type reflection
[23:29:13] <eddyb> and Tom Dale is a kid :))
[23:29:13] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[23:29:39] <eddyb> bvssvni: if you can use an enum, then your types are bounded to a known set
[23:30:10] <eddyb> thus, using a trait object is pointless indirection
[23:30:18] <bvssvni> eddyb: I know, and the only way to work around this is to create a flexible type enough to emulate objects
[23:30:30] <eddyb> wat
[23:31:05] <eddyb> bvssvni: we have Any. we're missing trait pointer upcasting
[23:31:17] <bvssvni> eddyb: ok, let me check it
[23:31:57] <eddyb> if we had trait pointer upcasting, you would make Entity inherit Any, and then cast &Entity to &Any
[23:32:03] *** Quits: squiddy (squiddy@moz-B55EC66.adsl.alicedsl.de) (Quit: Leaving)
[23:32:56] <eddyb> &Any lets you query its TypeId, and we have generic methods for &Any and &mut Any that give you Option<&T>/Option<&mut T>, Some if it's the type you want, None if it's not
[23:33:28] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[23:33:30] *** Quits: turbopape (turbopape@B011C239.487157C6.F27A0FFA.IP) (Quit: Quitte)
[23:33:38] <kimundi> rusti: let x = 5u; let y = &x as &Any; (y.is::<uint>(), y.is::<char>())
[23:33:39] -rusti- (true, false)
[23:34:14] <kimundi> rusti: let x = 5u; let y = &x as &Any; (y.is::<uint>(), y.is::<char>(), y.as_ref::<uint>())
[23:34:16] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[23:34:22] -rusti- pastebinned 16 lines of output: http://ix.io/a7E
[23:34:31] <eddyb> http://static.rust-lang.org/doc/master/std/any/trait.Any.html
[23:34:41] <wycats> eddyb: deeeeny
[23:34:43] <wycats> I am 31
[23:34:49] <wycats> Tom isn't 10 either
[23:34:50] <eddyb> why the as_void_ptr/as_mut_void_ptr methods?
[23:35:02] <wycats> I'm very old :(
[23:35:06] <wycats> I didn't start programming until 23
[23:35:10] <eddyb> isn't that unnecessary indirection?
[23:35:10] <kimundi> rusti: let x = 5u; let y = &x as &Any; (y.is::<uint>(), y.is::<char>(), y.as_ref::<uint>().map(|x| *x).unwrap())
[23:35:11] -rusti- (true, false, 5u)
[23:35:24] *** Quits: marcel_r (chatzilla@37CAED5E.29CC82CF.C33E194F.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131212173133])
[23:36:10] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[23:36:18] <kimundi> eddyb: Look at the implementation - they might be uneccessary today, but I arrived at needing them when I wrote Any.
[23:36:36] *** Quits: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:36:37] *** Joins: jroesch (jared@moz-EC0023EB.whatbox.ca)
[23:36:46] <eddyb> kimundi: ~Any with @ inside?
[23:37:45] <Kjelle> eddyb: Found this, mignt be what I need? http://static.rust-lang.org/doc/master/std/any/trait.AnyRefExt.html
[23:37:46] <eddyb> i.e. the box header?
[23:37:55] <kimundi> eddyb: Nothing to do with managed contents - in fact this raw pointer stuff might break gc, I have no idee ... :P
[23:38:00] <eddyb> Kjelle: sadly, you have to reimplement it
[23:38:12] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[23:38:22] <eddyb> Kjelle: that is, Entity inherits Any, but you have to reimplement AnyRefExt for &Entity
[23:38:31] <eddyb> kimundi: but what, then?
[23:38:43] <Kjelle> ok, gonna experiment with that a bit, but yeah, it sounds a bit ugly
[23:39:17] <eddyb> kimundi: why not take the pointer from the trait itself?
[23:39:23] <eddyb> Kjelle: http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/any.rs.html#71-101
[23:39:48] <kimundi> eddyb: Don't remember, but afaik trying to do the work of method dispatch manually with transmuting pointers did not work, only writing these methods lead to success, different memory layout of ~@ might well have been the testcase that tripped it up
[23:39:56] *** Joins: mpiechotka (mpiechotka@moz-737FBFDC.dynamic.mnet-online.de)
[23:40:05] <glaebhoerl> eddyb: I've been thinking about upcasting a bit, and it seems to raise very multiple-inheritancey issues :C like if you have `trait C: A + B`, you can't reinterpret &C as either an &A or an &B, at most one of them can work and otherwise you start needing to add an offset to the impl pointer or follow a pointer to get the right vtable or something like that (note I don't know how sub/supertrait vtables are currently represented, I'm just 
[23:40:06] <glaebhoerl> going from theory)
[23:40:15] <glaebhoerl> so the best you could do is automatic coercion
[23:40:20] <glaebhoerl> which makes me kinda sad
[23:41:09] *** Joins: judofyr (judofyr@moz-8BB0A10D.nextgentel.com)
[23:41:12] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[23:41:16] <eddyb> Kjelle: with Entity inheriting Any, you only need to copy this part http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/any.rs.html#80-101
[23:41:27] <eddyb> kimundi: and replace &'a Any with &'a Entity, really
[23:41:32] <eddyb> err, Kjelle ^^
[23:41:42] <dbaupp> glaebhoerl: isn't the offset statically known?
[23:41:43] <Kjelle> Hmm, ok, thaks, gonna try this out :)
[23:41:59] <eddyb> glaebhoerl, dbaupp: that's what I was going to say, the offset should be known
[23:42:08] <dbaupp> glaebhoerl: (so the coercion is literally just `vtable_ptr += 10` or whatever)
[23:42:14] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[23:42:19] <glaebhoerl> we're not disagreeing :)
[23:42:42] <dbaupp> glaebhoerl: oh, I thought you meant we had to store the offset in the vtable and then add it
[23:42:50] <glaebhoerl> (but this is very similar to the kind of thing C++ does with casting to base classes when multiple inheritance is involved)
[23:42:51] *** Quits: judofyr (judofyr@moz-8BB0A10D.nextgentel.com) (Ping timeout)
[23:42:55] * dbaupp learns to read
[23:43:12] <eddyb> glaebhoerl: except this is traits, and the vtable is orthogonal to the structure
[23:43:20] <eddyb> *this is about
[23:43:43] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[23:43:47] <eddyb> trait C: A + B => C::vtable = (tydesc, ..methods, ..A::vtable, ..B::vtable) - that'd just work nicely, minus the duplication
[23:44:12] <bvssvni> Kjelle: but does this means you have to caste to entity before storing in the vec?
[23:44:21] <bvssvni> *cast
[23:44:35] *** Quits: nszceta (quassel@moz-E6CA8D6.hsd1.pa.comcast.net) (Input/output error)
[23:44:39] <Kjelle> I store ~Entity.
[23:44:57] <bvssvni> Kjelle: and Player and Enemy inherits from Entity?
[23:45:06] <Kjelle> yes
[23:45:08] <eddyb> bvssvni: they implement Entity
[23:45:13] <Kjelle> yeah
[23:45:20] <Kjelle> they implement the trait
[23:45:32] <bvssvni> Kjelle: but then you need to cast them back to use them :P
[23:45:32] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[23:45:37] <wycats> self::libunwind from the perspective of rust/src/libstd/rt/unwind.rs  is what from the perspective of an external crate?
[23:45:42] <wycats> std::rt::libunwind?
[23:45:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[23:45:58] <kimundi> well, I'm off for the night!
[23:45:59] <dbaupp> probably std::rt::unwind::libunwind
[23:45:59] <eddyb> wycats: std::rt::unwind::libunwind
[23:46:06] <Kjelle> bvssvni: That is what http://static.rust-lang.org/doc/master/std/any/trait.AnyRefExt.html seems to do, I just need to reimplement it : >
[23:46:10] <dbaupp> but it's probably private
[23:46:15] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:46:25] <glaebhoerl> eddyb: if we have/add subtyping, I'm thinking a subtype relationship will hold if it makes sense semantically _and_ the in-memory representation of the subtype can also be interpreted as-is as an instance of the supertype (maybe I'm wrong about this, but this seems sensible)
[23:46:33] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[23:46:34] <wycats> scumbag eddyb: tells me "make sure you call this code", points to private code :P
[23:46:39] <bvssvni> Kjelle: oh, I thought it only checked for traits as subset
[23:46:47] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[23:46:47] <eddyb> wycats: then rewrite rt::unwind
[23:46:55] <dbaupp> s/rewrite/copy/
[23:46:56] <wycats> wat
[23:46:57] <eddyb> bvssvni: what?
[23:47:00] <wycats> so much copying
[23:47:02] <glaebhoerl> so e.g. with single inheritance of structs, given `struct Foo: Bar` you can say &Foo <: &Bar
[23:47:08] <wycats> eddyb: I can just cast everything :P
[23:47:09] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[23:47:12] <eddyb> wycats: make it use a trait object instead of a closure
[23:47:14] <glaebhoerl> but you wouldn't be able to say the same sort of things for trait objects
[23:47:29] <pongad> When you do `make check`, it tests your examples as well?
[23:47:31] <eddyb> glaebhoerl: what?
[23:47:32] <wycats> try ends up unsafely casting everything to a void * anyway
[23:47:41] * glaebhoerl is thinking too far ahead maybe
[23:47:43] <wycats> so I can just unsafely transmute
[23:47:50] <glaebhoerl> eddyb: which part needs clarifying?
[23:47:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:47:58] <eddyb> glaebhoerl: traits are cool. they don't involve any of the nonsense from C++
[23:49:13] <wycats> actually no... it looks up closure.code etc
[23:49:16] <wycats> for the other pointers
[23:49:20] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[23:49:30] <eddyb> wycats: a closure is just two pointers
[23:49:40] <mpiechotka> Hi. I have problems compiling https://gist.github.com/uzytkownik/8625649 - rustc asks to add #[feature(macro_registrar)] despite it is there.
[23:49:43] <wycats> so just make a struct with the same layout? :P
[23:49:53] <wycats> and transmute?
[23:49:57] <eddyb> Kjelle: I have something even better than Any - I call it Many. I'd release it, but it's not really nice to use now, we're missing some language features - it allows you to go from &Many to any trait of the implementor's choosing (instead of one type, like Any does)
[23:50:03] <eddyb> wycats: *sigh*
[23:50:11] <wycats> eddyb:  :P
[23:50:17] <wycats> don't sigh
[23:50:25] <eddyb> wycats: rewrite it to use a ~Trait instead of ||
[23:50:26] <ercxx> anybody know of any tree/graph implementations in rust to look and learn from?
[23:50:34] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[23:50:38] <eddyb> wycats: they are both (*T, *U)
[23:50:40] <Kjelle> eddyb: cool :)
[23:51:12] *** Joins: Matthias247_ (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[23:51:27] <eddyb> mpiechotka: missing ";" after it
[23:52:17] <kimundi> eddyb: Ouh, how did you manage that? (Many that is)
[23:52:40] <eddyb> kimundi: it's a bit hacky for performance
[23:53:10] <kimundi> eddyb: Did I understand right that it allows casting to a trait object of a different trait that is also implemented by the value inside the ~Any ?
[23:53:12] <eddyb> kimundi: Many has a method that takes a &Trait TypeId and returns its vtable as Option<&'static ()>
[23:53:22] <wycats> eddyb: rewrite involves copying out chunks of internal private unwinder code
[23:53:25] <wycats> which seems... not ideal?
[23:53:32] <eddyb> wycats: rewrite in place
[23:53:36] <eddyb> change it
[23:54:06] <Kjelle> eddyb: Will I need to reimplement any_ref and is for implementors of Entity or only Entity?
[23:54:12] <Kjelle> This got confusing fast...
[23:54:21] <eddyb> Kjelle: for &'a Entity, that is, the trait object
[23:54:28] <Kjelle> ok : )
[23:54:35] <kimundi> eddyb: Hm, how do you get the correct vtable?
[23:55:09] <eddyb> kimundi: in the implementation, by casting self to &Trait
[23:55:57] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[23:57:00] <eddyb> kimundi: thing is... it will work even when you dynamically load a library with a new type exposing a new trait via Many
[23:57:36] <kimundi> eddyb: hm...
[23:57:38] <kimundi> well I'm going to bed now for real.
[23:57:44] <eddyb> kimundi: it can even be used to expose individual methods - and I think I've mentioned ObjC-like capabilities in #rust-internals
[23:58:05] <eddyb> type id = RWArc<Many>;
[23:58:42] <eddyb> yeah, me too, good night :D
[23:59:04] <Kjelle> eddyb: Well, it compilled!
[23:59:07] <eddyb> wycats: don't unwind yourself too much while I'm gone :P
[23:59:19] <glaebhoerl> eddyb: well how about this: `trait A { ... }; trait B: A { ... }; trait C: A { ... }; trait D: B + C { ... };`. now cast &D to &A. what happens?
[23:59:35] <glaebhoerl> you'll have two different ways to get a vtable for A
[23:59:47] <glaebhoerl> and thanks to coherence you _can_ just choose one arbitrarily
[23:59:53] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[23:59:58] <eddyb> glaebhoerl: and they might not match?
[23:59:59] <glaebhoerl> but don't tell me this doesn't remind you a little bit of MI in C++
