[00:19:25] *** Joins: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de)
[00:22:38] *** Joins: bytewise (bytewise@moz-mkh5h4.hsi16.unitymediagroup.de)
[00:41:18] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[00:43:49] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:53:02] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[01:09:02] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:11:07] *** Quits: santiago (santiago@moz-8th.j2e.167.12.IP) (Quit: Computer has gone to sleep.)
[01:21:32] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[01:23:01] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[01:26:39] *** Quits: bytewise (bytewise@moz-mkh5h4.hsi16.unitymediagroup.de) (Quit: Quit)
[01:31:00] *** Quits: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:33:13] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[01:41:42] *** Quits: stl (stl@moz-o9aiua.broadband.corbina.ru) (Ping timeout: 121 seconds)
[01:44:29] *** Joins: c74d3 (c74d3a4ebb6@moz-v3r8ri.mggc.hibn.4404.2002.IP)
[01:45:37] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[01:46:02] *** c74d3 is now known as c74d
[01:56:11] *** Joins: stl (stl@moz-6r1bf1.broadband.corbina.ru)
[01:56:13] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:57:29] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[02:20:27] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[02:22:24] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:29:38] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[02:47:03] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:48:43] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:48:51] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:55:00] *** Quits: zz_kimundi (kimundi@moz-siarqd.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:56:45] *** Joins: zz_kimundi (kimundi@moz-ch362e.dip0.t-ipconnect.de)
[02:56:46] *** zz_kimundi is now known as kimundi
[03:00:31] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:03:37] *** Joins: jtdowney (jtdowney@moz-qb98um.catdevnull.net)
[03:08:46] *** Joins: c74d3 (c74d3a4ebb6@moz-dc55cs.mggc.hibn.4404.2002.IP)
[03:09:10] *** Quits: c74d (c74d3a4ebb6@moz-v3r8ri.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[03:09:48] *** c74d3 is now known as c74d
[03:10:34] *** Quits: c74d (c74d3a4ebb6@moz-dc55cs.mggc.hibn.4404.2002.IP) (Connection closed)
[03:10:52] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[03:24:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:42:35] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:45:20] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[03:49:20] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:53:22] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[03:59:28] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Connection closed)
[04:00:45] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:03:15] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[04:11:43] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[04:16:09] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[04:17:28] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Ping timeout: 121 seconds)
[04:24:02] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[04:26:07] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[04:27:13] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[04:28:27] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[04:34:29] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:38:41] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[04:53:01] *** Joins: p1start (p1start@moz-nftjhe.org)
[04:58:19] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:18:11] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[05:20:00] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[05:20:04] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[05:22:37] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[05:26:57] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[05:32:43] *** Quits: O01eg (o01eg@moz-7fe1ek.nlre.4n8f.2698.2a02.IP) (Client exited)
[05:35:16] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[05:39:32] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[05:50:45] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[05:54:58] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Ping timeout: 121 seconds)
[06:03:27] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:12:19] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[06:16:47] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[06:17:05] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[06:21:49] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[06:45:31] *** Joins: daschl (Adium@moz-f1dnqb.public.t-mobile.at)
[07:06:39] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[07:10:55] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[07:13:19] *** Quits: daschl (Adium@moz-f1dnqb.public.t-mobile.at) (Quit: Leaving.)
[07:16:07] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:16:09] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:16:11] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[07:16:32] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:28:43] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:36:24] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:36:46] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[07:40:57] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[08:00:38] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:01:17] *** Joins: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de)
[08:06:13] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[08:08:55] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[08:23:00] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[08:37:21] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[08:41:47] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[08:56:02] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[08:56:35] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:59:53] <Quxxy> I'm trying to write a cargo subcommand that needs the lib name, source file, -L and --extern flags and the output directory... is there a reasonable way to get this that *does not* involve depending on cargo itself?
[09:00:26] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[09:01:03] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[09:01:53] *** Joins: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr)
[09:19:20] *** Quits: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:21:11] *** Joins: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr)
[09:34:29] *** Quits: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:41:58] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[09:50:46] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[09:55:12] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[10:03:54] *** Joins: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr)
[10:14:21] *** Joins: nonsensickle_ (nonsensickl@moz-4v0.gkd.16.182.IP)
[10:16:53] *** Joins: nonsensickle__ (nonsensickl@moz-4v0.gkd.16.182.IP)
[10:17:30] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[10:18:33] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[10:19:46] *** Quits: nonsensickle_ (nonsensickl@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[10:21:20] *** Quits: nonsensickle__ (nonsensickl@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[10:28:04] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:29:54] *** Joins: p1start (p1start@moz-nftjhe.org)
[10:32:00] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:33:21] *** Joins: nonsensickle_ (nonsensickl@moz-4v0.gkd.16.182.IP)
[10:36:31] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[10:37:06] *** Quits: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:44:56] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[10:47:16] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[10:47:47] *** Quits: dustinm` (dustinm@moz-1c1j82.fu2o.sj0n.5300.2607.IP) (Ping timeout: 121 seconds)
[10:49:22] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[10:57:29] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:01:01] *** Quits: JustAPerson (JustAPerson@moz-un628q.moe) (Ping timeout: 121 seconds)
[11:01:40] *** Joins: JustAPerson (JustAPerson@moz-un628q.moe)
[11:01:52] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[11:04:27] *** Quits: ogham (rally@moz-91e3hp.cable.virginm.net) (Ping timeout: 121 seconds)
[11:14:24] *** Joins: dustinm` (dustinm@moz-es6jb7.ip-167-114-152.net)
[11:16:29] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[11:22:20] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:24:46] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[11:26:08] *** Joins: duncan (paul@moz-9vabq7.sgnwmi.sbcglobal.net)
[11:27:13] *** Quits: qrlpx (smuxi@moz-n7t.3nb.211.95.IP) (Connection closed)
[11:39:06] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[11:40:07] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[11:43:32] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[11:54:08] *** kimundi is now known as zz_kimundi
[11:58:36] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:59:38] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[12:02:39] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[12:05:52] *** Quits: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de) (Connection closed)
[12:10:49] *** Joins: jarrednicholls (uid19542@moz-cmdbn3.highgate.irccloud.com)
[12:21:59] *** zz_kimundi is now known as kimundi
[12:34:08] *** kimundi is now known as zz_kimundi
[12:45:24] *** zz_kimundi is now known as kimundi
[12:59:21] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:03:31] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[13:20:54] *** Joins: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de)
[13:29:06] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[13:51:50] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[13:56:32] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[14:00:17] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[14:04:19] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[14:25:40] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[14:46:13] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[14:48:49] *** Quits: jarrednicholls (uid19542@moz-cmdbn3.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[15:00:44] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:02:47] *** Joins: p32blo (p32blo@moz-fhmueq.1oel.r662.0690.2001.IP)
[15:04:54] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[15:05:55] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[15:06:30] *** Parts: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) ()
[15:07:17] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[15:12:35] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:17:05] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:36:23] *** Quits: p32blo (p32blo@moz-fhmueq.1oel.r662.0690.2001.IP) (Ping timeout: 121 seconds)
[15:36:38] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[15:39:00] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:42:32] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:42:39] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:43:34] *** kimundi is now known as zz_kimundi
[15:46:36] *** Joins: brson (brson@moz-d18.tb2.56.172.IP)
[15:54:00] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:03:07] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[16:04:58] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:05:24] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:07:31] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[16:08:27] *** Joins: O01eg (o01eg@moz-qi2pml.uea1.4n8f.2698.2a02.IP)
[16:10:16] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:14:08] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:42:11] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:48:38] *** Quits: nonsensickle_ (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[16:48:55] *** Joins: nonsensickle_ (nonsensickl@moz-4v0.gkd.16.182.IP)
[17:03:25] <acrichto> Quxxy: hm, are you running the compiler manually?
[17:03:37] <acrichto> Quxxy: e.g. this sounds kinda like `cargo rustc` or perhaps `cargo metadata`
[17:03:44] <acrichto> cargo metadata is just a PR right now though
[17:04:13] <Quxxy> acrichto: Ah, I'm doing a rustdoc-like tool that uses rustc to turn a crate into an FFI interface for another language (i.e. C, Python, .NET)
[17:04:26] <Quxxy> So I need the externs and lib dirs for rustc to get the metadata
[17:04:27] <acrichto> oh nice!
[17:04:42] <acrichto> ah yeah in that case you'd have to link against cargo itself unfortunately
[17:05:04] <Quxxy> Ah well
[17:05:18] <Quxxy> My current progress is: everything I want is buried as deep as possible :P
[17:05:49] <Quxxy> And I always seem to new a type that has no obvious way of creating one :P
[17:05:51] <acrichto> lol
[17:06:12] <acrichto> to start off with you can probably safely assume that everything is in `target/debug/deps
[17:06:16] <acrichto> and target/debug
[17:07:02] <Quxxy> Probably a good idea
[17:07:08] <Quxxy> I'm about ready to tear my hair out :P
[17:07:25] <Quxxy> It turns out the type search in rustdoc can't express "function of any arity that returns a T"
[17:07:54] *** Joins: ogham (rally@moz-95g.2nj.199.138.IP)
[17:09:39] <Quxxy> acrichto: Am I correct in assuming that cargo finds the core rust libs by working back from the path to rustc.exe?
[17:09:59] <Quxxy> (Just if you know off the top of your head)
[17:10:00] <acrichto> Quxxy: cargo itself doesn't actually find them, it just assumes the compiler can find them
[17:10:07] <Quxxy> Ah
[17:10:29] <Quxxy> Suppose that's what *I'm* doing, then :P
[17:12:05] *** Quits: brson (brson@moz-d18.tb2.56.172.IP) (Connection closed)
[17:13:42] *** zz_kimundi is now known as kimundi
[17:15:03] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[17:34:25] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[17:34:52] *** Joins: dpc_ (dpc@moz-t6gr4b.ca.comcast.net)
[17:35:54] *** Joins: jarrednicholls (uid19542@moz-cmdbn3.highgate.irccloud.com)
[17:38:01] *** Quits: JanC (janc@moz-1ibeqa.dsl.scarlet.be) (Ping timeout: 121 seconds)
[17:45:54] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[17:48:58] *** Joins: EspressoDan (EspressoDan@moz-1kt.vjg.211.140.IP)
[17:51:07] *** Joins: JanC (janc@moz-olsksc.dsl.scarlet.be)
[17:54:24] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[17:58:24] *** Quits: EspressoDan (EspressoDan@moz-1kt.vjg.211.140.IP) (Client exited)
[18:00:20] <jdub> i'm using cargo rustc with --target=blah.json -- it's not finding core... it's fine if i just use a target triple
[18:00:46] <jdub> i've tried this with rustc nightly binaries for x86 and 64
[18:00:54] <mcpherrin> jdub: Well, do you have core compiled for the json target you're using?
[18:01:22] <jdub> json target is the same triple
[18:01:27] *** Joins: p32blo (p32blo@moz-qr0u8a.dsl.telepac.pt)
[18:01:54] <jdub> --target=i686-unknown-linux-gnu works
[18:02:08] <jdub> --target=target.json (where llvm-target = i686-unknown-linux-gnu) does not
[18:04:30] <mcpherrin> I may be mistaken, but I don't think it's using the llvm-target to find libraries
[18:04:58] <mcpherrin> I think it's looking for the target name, ie, target
[18:05:46] <mcpherrin> ln -s /usr/local/lib/i686-unknown-linux-gnu/ /usr/local/lib/target/ might make it work?
[18:06:43] <jdub> i'll rename the file instead
[18:06:47] <jdub> that seems like magic though
[18:07:22] <jdub> hrm, and clearly others are using non-triple-named target files
[18:11:45] <jdub> oh wow
[18:11:45] <jdub> https://github.com/rust-lang/cargo/issues/1606#issuecomment-101808448
[18:11:53] <jdub> you have to build libcore against the target file
[18:13:23] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:13:56] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[18:16:25] <jdub> hah, if i -L to the path libcore is in, i get:
[18:16:37] <jdub> src/lib.rs:5:1: 5:19 error: couldn't find crate `core` with expected target triple src/arch/x86/target.json
[18:17:28] <jdub> hmm, i wonder if i can fool it with RUST_TARGET_PATH
[18:18:47] <jdub> whoa!
[18:19:18] <jdub> hmm, though i don't know yet if it used the file
[18:22:03] *** Joins: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP)
[18:22:08] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[18:22:59] *** Joins: durka42 (Adium@moz-nbnmpt.wireless-pennnet.upenn.edu)
[18:24:19] *** Joins: EspressoDan (EspressoDan@moz-1kt.vjg.211.140.IP)
[18:24:52] <durka42> can I pass an argument like "-Wl,-rpath ./" to the linker?
[18:24:57] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[18:25:14] *** Quits: EspressoDan (EspressoDan@moz-1kt.vjg.211.140.IP) (Client exited)
[18:25:24] *** Joins: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP)
[18:25:25] <durka42> currently I have to set LD_LIBRARY_PATH when running "cargo test" or it can't find my library (which is inside the project)
[18:27:03] <mbrubeck> durka42: You can have your build script output link paths: http://doc.crates.io/build-script.html#outputs-of-the-build-script
[18:27:39] <mbrubeck> Not sure about -rpath...
[18:27:40] <jdub> *ah*, i really need to rebuild libcore anyway, because it's built with the stack protection gear
[18:28:56] <Ericson2314> acrichto: Hi, I'm in the proccess of responding to your post on my RFC, but I was wondering if we could talk about it it realtime too (and then i would still post for the public record).
[18:29:50] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[18:30:00] *** Quits: p32blo (p32blo@moz-qr0u8a.dsl.telepac.pt) (Ping timeout: 121 seconds)
[18:30:41] <acrichto> Ericson2314: sure
[18:30:42] <acrichto> !
[18:31:27] *** Joins: brson (brson@moz-48fqub.res.rr.com)
[18:31:37] <durka42> mbrubeck: doesn't seem to work
[18:31:43] <Ericson2314> how does cargo deal with different packages that have crates with the same name?
[18:32:00] <Ericson2314> more generally, name space collisions between deps, especially transitive deps
[18:32:10] <durka42> I'm outputting the path for both cargo:rustc-link-search=native={} and cargo:rustc-libdir={}, but it seems to get lost somewhere
[18:32:20] <Ericson2314> I understand no package may transitively depend on two different versions of the same package
[18:32:40] <Ericson2314> but similar issues arise if two different packages have some symbols in common
[18:32:48] <durka42> does cargo cache the output values somewhere? can I go check if they are correct?
[18:33:02] <durka42> I had a brief fantasy they might be in Cargo.lock, but no such luck :)
[18:33:04] <acrichto> Ericson2314: cargo passes a unique "metadata hash" into the compiler for all crates, and this hash frobs symbol names, so all crates are guaranteed to have different symbol names
[18:33:20] <acrichto> Ericson2314: the metadata hash is derived from source (e.g. crates.io, git, etc), version, and name
[18:33:35] <durka42> they must be saved _somewhere_, because as I recently discovered, Cargo only runs the build script if the moon is full
[18:33:41] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[18:34:26] <Ericson2314> And while multiple rlibs are compiled, this frobbing is global to the whole package being built?
[18:35:59] <Ericson2314> that isn't pertinent to my RFC
[18:36:26] <Ericson2314> but does have repercussions on caching depependies between projects with is another interest of mine
[18:36:44] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[18:37:14] <acrichto> Ericson2314: not sure what you mean I think
[18:37:32] <acrichto> Ericson2314: the frobbing happens when each crate is compiled, and Cargo passes the hash to the compiler for each crate
[18:37:50] <acrichto> Ericson2314: as in I'm not sure what you mean by "global to the whole package being built"
[18:38:49] <Ericson2314> Basically, if a rlib is built for it's depencies resolved to specific versions/git commits
[18:39:34] <Ericson2314> will the frobbing always be the same, or does it depend on what lib/exe in turn depend on that rlib, and what that lib/exe also depends on?
[18:39:56] <acrichto> I forget what the precise inputs are
[18:40:03] <acrichto> the set of dependencies may alter the hash as well
[18:40:07] <acrichto> and the version of cargo also definitely affects it
[18:40:23] <Ericson2314> ok no worries. Anyways all this does not take into account stdlib at the moment?
[18:40:33] <acrichto> correct
[18:40:49] <acrichto> but all cargo crates have -C metadata specified
[18:40:54] <Ericson2314> ok whew
[18:40:59] <acrichto> so they're guaratneed to be different even if a crate is called std
[18:41:53] <Ericson2314> so my motivation is building the stdlib with cargo
[18:42:26] <Ericson2314> but that doesn't work quite right with/wihout #![no_std]
[18:43:04] <Ericson2314> Because libraries in the sysroot are essentially poluting my build
[18:43:19] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[18:43:24] <Ericson2314> also i have to edit every upsteam package that uses stdlib so that it uses my stdlib instead
[18:44:09] <Ericson2314> no i agree we don't want upstream packages to be "subverted" by my choice of stdlib
[18:44:09] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[18:44:31] <Ericson2314> but if cargo was aware of those packages (e.g. bitflags) depending on stdlib or libcore
[18:44:53] <Ericson2314> it could mediate that
[18:45:39] <Ericson2314> so if i override libstd with a cargo config, i can use that instead, just as when I override any other package
[18:46:26] <Ericson2314> But if i just happend to build a package with a crate called "core" I won't go around overriding libstd by mistake every or failing to do so at all 
[18:47:19] <Ericson2314> so yes Phase 1 is a bit sneaky in that if you try to make implicit-deps and non-implicit-deps packages, weird stuff might happen
[18:47:33] <Ericson2314> but phase 3 the frobbing takes care of everything so no surprises
[18:48:34] *** Quits: durka42 (Adium@moz-nbnmpt.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[18:53:49] <acrichto> Ericson2314: oh sorry stepped out for a sec, so to clarify:
[18:53:56] <Ericson2314> no worries
[18:53:56] <acrichto> you want to build the stdlib with cargo for easy cross compilation?
[18:54:09] <Ericson2314> yes
[18:54:22] <acrichto> hm
[18:54:38] <acrichto> that seems somewhat disconnected from the desire to declare a dependency on std
[18:54:39] <Ericson2314> and I always want to allow ppl to write packages with libstd-like crate names without problems
[18:55:05] <acrichto> what do you mean libstd-like crate names?
[18:55:09] *** Quits: brson (brson@moz-48fqub.res.rr.com) (Quit: leaving)
[18:55:13] <Ericson2314> std, core, alloc, etc.
[18:55:24] <acrichto> that's possible today though?
[18:55:27] <acrichto> they can just be put in cargo
[18:55:34] <acrichto> and you can just call it whatever you'd like
[18:55:35] <Ericson2314> I think the sysroot ones confused cargo
[18:55:46] <acrichto> well that gets into the problem of swapping crates
[18:55:50] <Ericson2314> i should unbitrot my stuff and confirm this
[18:55:52] <acrichto> the only liballoc should be the actual liballoc
[18:56:07] <Ericson2314> but declaring a libstd dependancy also ensures that
[18:56:10] <acrichto> e.g. I don't want a foo-alloc to swap out and replace the actual liballoc
[18:56:17] <Ericson2314> neither do I
[18:56:23] <acrichto> wait hm, ensures what?
[18:56:37] <Ericson2314> right now it's all or nothing
[18:56:41] <Ericson2314> with a valid sysroot
[18:56:52] <Ericson2314> you can't call a crate "core"
[18:57:01] <Ericson2314> with an empty sysroot
[18:57:10] <acrichto> you're losing me :(
[18:57:13] <Ericson2314> sorry
[18:57:25] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[18:57:26] <acrichto> so why do sysroots come into play at all here?
[18:57:32] <acrichto> if we're talking about cross compilation?
[18:57:47] <acrichto> in theory the sysroot for the target just doesn't exist at all
[18:58:03] <acrichto> sysroot in the sense of "target libdir in the real sysroot"
[18:58:18] <Ericson2314> so i haddn't used my own target json yet
[18:58:48] <acrichto> right, but a --target argument will change the sysroot the compiler looks for
[18:58:48] <Ericson2314> and i wanted to kernel to support 32- and 64-bit
[18:59:08] <Ericson2314> so in the 32 bit case (my laptop is old :)) i wasn't actually cross compiling
[18:59:11] <acrichto> were you using the 32/64 linux targets?
[18:59:18] <acrichto> as targets for the kernel?
[18:59:19] <Ericson2314> i686-linux-gnu
[18:59:20] <Ericson2314> yeah
[18:59:34] <acrichto> ok, so in this specific use case
[18:59:39] <acrichto> why'd you want to recompile libcore?
[18:59:59] <Ericson2314> i don't
[19:00:03] <jdub> i think i've hit the same issue
[19:00:03] <Ericson2314> but i did want to recompiled alloc
[19:00:15] <Ericson2314> that is when things broke
[19:00:26] <acrichto> Ericson2314: ok that's where I think things start to diverge
[19:00:35] <acrichto> Ericson2314: liballoc just fundamentally doesn't have support for custom kernels
[19:00:44] <acrichto> so the "right" thing to do would bring in a custom target spec
[19:00:55] <acrichto> so liballoc in theory knows that it's being compiled for something special
[19:01:02] <jdub> acrichto: one reason to recompile core is to get rid of morestack
[19:01:14] <acrichto> jdub: sure, I've also recompiled to get rid of SSE instructions in the past
[19:01:17] <Ericson2314> acrichto but if i am trying to be portable
[19:01:19] <acrichto> jdub: but these are also covered by a custom target spec
[19:01:27] <Ericson2314> I'll need to delcare dependency on my core
[19:01:35] <acrichto> Ericson2314: hacking support into liballoc for your own kernel isn't necessarily portable thugh?
[19:01:46] <acrichto> whoa wait, where did declaring a dependency on core come in?
[19:02:24] <Ericson2314> err sorry
[19:03:00] <Ericson2314> so liballoc does have a feature which makes it suitable for kernel work
[19:03:03] <Ericson2314> different names
[19:03:19] <Ericson2314> scialex added it as ad hoc cfg
[19:03:28] <Ericson2314> and i turned it into a feature so i could use it with cargo
[19:03:29] <acrichto> Ericson2314: ah sry brb gonna head out to lunch now
[19:03:31] <Ericson2314> ok
[19:03:35] <acrichto> I will respond to everything when I get back though!
[19:03:38] <acrichto> we should definitely continue this :)
[19:04:03] <Ericson2314> ok
[19:04:12] <Ericson2314> oh one lass line
[19:04:32] <Ericson2314> i want to depend on core so I have the *option* of cross compiling for 64-bit
[19:04:59] <Ericson2314> if i don't depend on libcore, i can only do native target for my kernel
[19:05:05] <Ericson2314> so we can forget about alloc
[19:07:00] <Ericson2314> jdub not sure if it did that whether i would get conflict
[19:07:15] <Ericson2314> i don't know at what point the target is different enough so cargo does not get confused
[19:07:43] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[19:07:52] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[19:16:27] *** Joins: durka42 (Adium@moz-2e50jm.o2oh.k96e.f470.2607.IP)
[19:18:57] *** Quits: durka42 (Adium@moz-2e50jm.o2oh.k96e.f470.2607.IP) (Quit: Leaving.)
[19:22:03] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[19:52:52] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[19:58:40] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Ping timeout: 121 seconds)
[19:59:59] *** Quits: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) (Quit: )
[20:00:55] *** Parts: duncan (paul@moz-9vabq7.sgnwmi.sbcglobal.net) ()
[20:06:50] *** Joins: durka42 (Adium@moz-qsuual.pa.comcast.net)
[20:14:06] *** Joins: EspressoDan (EspressoDan@moz-14q.853.211.140.IP)
[20:16:33] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[20:16:33] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[20:20:12] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[20:25:46] <acrichto> Ericson2314: I am back! so I definitely think that all rust code will have to depend on libcore at some point
[20:25:50] <acrichto> so there's probably no getting around that
[20:26:07] <acrichto> but this problem in general seems pretty disconnected from "declaring a dependence on std"
[20:26:18] <acrichto> I don't think that libcore will make its way into crates.io any time soon unfortunately
[20:26:23] <acrichto> due to its massive usage of unstable features
[20:26:30] <acrichto> which means that basically only one compiler can compile it
[20:35:03] <Ericson2314> ok I'm back too
[20:36:17] *** Quits: EspressoDan (EspressoDan@moz-14q.853.211.140.IP) (Client exited)
[20:36:36] *** Joins: EspressoDan (EspressoDan@moz-14q.853.211.140.IP)
[20:38:30] <Ericson2314> acrichto: for me there is no disconnected. Right now we have two ways of getting the crate to rustc with cargo. A) cargo provides it, and frobs things, b) look it up in the sysroot
[20:38:36] <Ericson2314> A) seems wholly superiot
[20:38:39] <Ericson2314> *superior
[20:38:59] <acrichto> Ericson2314: sure, but (B) is the only way std/core can be compiled
[20:39:02] <acrichto> due to the usage of unstable features
[20:39:33] <Ericson2314> i don't follow
[20:39:41] <acrichto> hm, let me put this another way
[20:39:46] <Ericson2314> it seems more like a policy decision than a technical one
[20:40:04] <acrichto> cargo can very easily cross compile the world, but it doesn't understand the source of the standard library/core, so it can't cross compile them easily
[20:40:19] <acrichto> so we can also bolster efforts to enable cross compilation of std/core in these areas
[20:40:40] <acrichto> std/core being distributed in binary form is a technical limitation because a stable compiler cannot compile std/core
[20:41:32] <Ericson2314> Well we want cargo to be useful with non-stable compilers too right?
[20:42:07] <acrichto> sure, but easy cross compilation shouldn't be locked into nightly
[20:42:15] <acrichto> it's something that stable should definitely be able to do for sure
[20:42:26] <acrichto> I'm still also not connect the dots here I think
[20:42:35] <acrichto> even if I say I depend on std, I'm not sure why that makes cross compiling easier
[20:42:51] <acrichto> whenever you cross compile, for example, libcore has to be *somewhere*
[20:43:00] <acrichto> someone has to make sure libcore is built, be it cargo, you, or the compiler
[20:43:11] <acrichto> and saying whether or not I depend on core doesn't seem to assist in this decision?
[20:43:14] <acrichto> er, depend on std*
[20:43:15] <Ericson2314> yeah
[20:43:22] <Ericson2314> but by depending on std
[20:43:28] <Ericson2314> you let cargo know "hey I need that"
[20:43:47] <Ericson2314> you are proposing since std requires unstable compiler
[20:43:49] <acrichto> but what can cargo do with that information?
[20:44:27] <Ericson2314> many options a) get unstable compiler b) download binary
[20:44:57] <acrichto> whoa lol hang on
[20:45:04] <acrichto> so cargo knows that my crate depends on std
[20:45:09] <acrichto> and it knows that I'm compiling for some target
[20:45:17] <Ericson2314> yes
[20:45:18] <acrichto> how does it know to go download an unstable compiler?
[20:45:23] <acrichto> or how does it know what binary to download from where?
[20:45:59] *** Parts: durka42 (Adium@moz-qsuual.pa.comcast.net) ()
[20:46:15] <Ericson2314> There are a couple options
[20:46:26] <Ericson2314> simplest is just ad-hoc special case
[20:46:38] <Ericson2314> which isn't nice great
[20:46:51] <Ericson2314> but how would you support "easy" cross compiling?
[20:47:18] <acrichto> I would envision this through one of two methods:
[20:47:32] <acrichto> 1) we provide nightlies/binaries for lots more architectures, plus a super easy way to download an integerate them
[20:47:45] <acrichto> for example multirust could provide the ability to manage target libs for a whole bunch of platforms
[20:48:02] <acrichto> 2) a method is provided for very easily bootstrapping core/std into a custom sysroot
[20:48:11] <acrichto> and then cargo would pass --sysroot to that location perhaps
[20:48:17] <acrichto> (or they'd just be bootstrapped into a global sysroot)
[20:48:29] <acrichto> both of these are pretty hard though, and I don't think that (2) may be actually possible
[20:48:58] <Ericson2314> so what I just proposed is basically another way of looking 1
[20:49:17] <acrichto> coming back to your RFC, though, I still have yet to see how "I depend on std" makes cross compilation easier
[20:49:20] <Ericson2314> instead of you the user having to push button to download the binaries first, cargo just does it on command
[20:49:29] *** Quits: EspressoDan (EspressoDan@moz-14q.853.211.140.IP) (Client exited)
[20:49:46] <acrichto> yeah that I would love for cargo to do!
[20:50:15] <Ericson2314> Having a std dependency just gives cargo finer-grained information on when it needs to do this
[20:50:22] <Ericson2314> rather than just assuming all packages need libstd
[20:50:31] <Ericson2314> as it would need to do now
[20:50:37] <Ericson2314> were we to try to implement 1
[20:50:48] <acrichto> that's where I'm still somewhat skeptical
[20:50:55] <acrichto> so cargo doesn't actually need to know whether something depends on std or not
[20:51:01] <acrichto> and it's feasible for crates to not depend on std at all
[20:51:05] <acrichto> (e.g. they jsut don't use it)
[20:51:09] <acrichto> so what I would envision is:
[20:51:13] <Ericson2314> why is that better?
[20:51:18] *** Joins: zyphrus (David@moz-1a4.urk.98.101.IP)
[20:51:22] <acrichto> 1) for a given cargo build --target foo, cargo finds the folder where the `foo` libs are stored
[20:51:32] <acrichto> 2) if this folder does not exist, cargo queries the "central server" about the `foo` target libraries
[20:51:43] <acrichto> 3) if present, cargo downloads all the libs into the right place
[20:51:47] <acrichto> 4) cargo then continues as usual
[20:52:02] <acrichto> here if `foo` is a known triple, cargo will download core/std/friends if available
[20:52:09] <acrichto> and some architectures may not have std at all, so (3) may only download core
[20:52:33] <acrichto> cargo not knowing about std is basically just keeping cargo as streamlined as possible
[20:52:39] <acrichto> it's an extra piece of metadata cargo can't do much with
[20:52:44] <acrichto> it *might* be able to not download std
[20:52:46] <acrichto> but that's kinda it?
[20:52:56] <acrichto> does that make sense?
[20:54:10] <Ericson2314> the steps are fine, but to me it's a crutial bit of metadata
[20:54:48] <Ericson2314> immagine a future where there are no unstable features libstd needs
[20:54:50] <Ericson2314> way, way off
[20:55:01] <Ericson2314> my way, there is an easy migration path
[20:55:10] <Ericson2314> std just becomes a normal package like every other
[20:55:26] <Ericson2314> and any special casing can be removed from cargo
[20:56:04] <acrichto> I think one thing we may be disconected on is the special casing in cargo, currently the cargo knows nothing about std, it's the compiler which is doing all the special casing
[20:56:08] *** Joins: EspressoDan (EspressoDan@moz-14q.853.211.140.IP)
[20:56:39] *** Quits: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP) (Connection closed)
[20:56:43] <Ericson2314> we are both proposing adding some extra functionality to cargo
[20:56:53] <Ericson2314> you propose look at target and build/dl sysroot
[20:57:07] <Ericson2314> I propose look at target and build all deps
[20:57:25] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[20:57:32] <acrichto> ah ok, I was thinking of today's cargo, I see what you mean now
[20:57:34] <Ericson2314> if std is a (transitive dep) build/download it, which for the time being cargo might need to special case to know hwo to do
[20:57:47] <Ericson2314> in my kernel dev case
[20:57:53] <acrichto> I feel like this boils down to "core and std in cargo" though
[20:57:59] <Ericson2314> I need unstable compiler
[20:58:13] <Ericson2314> so I /can/ just build libstd and the crates behind the facade
[20:58:45] <Ericson2314> in practice, the use of custom targets and unstable compilers will probably go hand in hand
[20:58:47] <acrichto> not necessarily though
[20:58:58] <acrichto> you can build one exact version of the facade crates
[20:59:09] <acrichto> you're not guaranteed to be able to compile any other version of them
[20:59:16] <acrichto> (that one version being the one of the compiler sha)
[20:59:31] <acrichto> I somewhat disagree that custom target == unstable compiler
[20:59:41] <acrichto> as soon as we have #![no_std] and libcore stable, that should be all that's necessary
[20:59:47] <acrichto> which I see as quite plausible to do!
[21:00:18] <Ericson2314> mmm you end up using a lot of lang items still
[21:00:22] <Ericson2314> just to use core
[21:00:28] <acrichto> ah right
[21:00:37] <acrichto> I kinda consider that under the "stabilize #[no_std] umbrella"
[21:00:38] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[21:00:43] <Ericson2314> which is good imo, i want to debug to serial port for eample
[21:01:37] <Ericson2314> it seems like the unstable parts of the implemtation of libcore and the unstable parts of using libcore overlap a lot?
[21:01:46] <Ericson2314> I could remember that incorrectly
[21:01:59] <acrichto> ideally they don't overlap, but I do think that there's a lot going on today unfortunately
[21:02:01] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[21:02:08] <acrichto> much of that is likely just because we haven't scrutinized libcore at all
[21:02:11] <acrichto> for stability
[21:02:13] *** Quits: jdub (jdub@moz-udlk0m.internode.on.net) (Ping timeout: 121 seconds)
[21:02:31] <acrichto> hm, so let me try to summarize what we've talked about:
[21:02:32] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[21:02:36] <Ericson2314> ok
[21:02:42] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[21:03:07] <acrichto> A) It would be super awesome if all cargo crates had an implicit `std = "1.0.0"` version dep, meaning that cargo would auto-download std and compile it for the target architecture if necessary
[21:03:13] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[21:03:21] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[21:03:28] <acrichto> B) putting std/core into crates.io, however, is a long way off, and may have some tough technical hurdles to overcome
[21:03:47] <acrichto> C) for now, the best option may be to download precompiled binaries from an official dist server of some form?
[21:03:51] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[21:04:00] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[21:04:05] <acrichto> does that sound about right?
[21:04:11] <Ericson2314> yup!
[21:04:14] <Ericson2314> just one little thing
[21:04:30] *** Joins: santiago (santiago@moz-ro2mm9.res.rr.com)
[21:04:32] <Ericson2314> how does one write a package that uses non-stable compiler?
[21:04:38] *** Quits: santiago (santiago@moz-ro2mm9.res.rr.com) (Quit: Computer has gone to sleep.)
[21:04:57] <Ericson2314> because if that is possible, would nice to see version on implicit std dependency also adjusted
[21:05:01] <acrichto> I think Cargo itself wouldn't have to worry about that and you'd just write it as usual
[21:05:11] <acrichto> oh sure
[21:05:54] <Ericson2314> So basically that plan, especially C) is my phase 2.
[21:06:08] * acrichto rereads quickly
[21:06:10] <Ericson2314> where cargo needs a lil magic to get the binary
[21:06:21] <Ericson2314> ^ that is all phase 2 is saying
[21:06:50] <Ericson2314> phase 3 is ideal world where std and it's deps are completely cargoized and no magic is needed
[21:06:50] <acrichto> hm ok
[21:07:02] *** Joins: bvssvni (sven@moz-qqolj8.bb.online.no)
[21:07:10] <Ericson2314> so phase 1 has the problem you pointed out earlier that if you have packages that aren't implict std
[21:07:18] <Ericson2314> you can feed them the wrong std crate
[21:07:32] <Ericson2314> which is britle as you say
[21:07:49] *** Joins: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP)
[21:08:10] <Ericson2314> I think the solution there is simply to require that all deps have implicit deps disabled
[21:08:32] <acrichto> so it sounds like we definitely want the same thing overall, but I'm not sure of the best way forward on the RFC
[21:08:35] *** Quits: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP) (Connection closed)
[21:08:50] <acrichto> for example adding more binaries and such to what we distribute probably doesn't require an RFC
[21:08:57] *** Joins: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP)
[21:09:05] <acrichto> adding auto-download behavior to Cargo may require an RFC, however, but I'm not sure enough infrastructure exists today to spec that out
[21:09:19] <acrichto> and then putting std/core into crates.io is so far off it may not be worth having an RFC about that at this point
[21:09:47] <Ericson2314> yeah i was thinking it might be good to rip out mentions of the phases
[21:10:07] <Ericson2314> which are in the far future
[21:10:26] <acrichto> I think it may also be important to emphasize that most of this development can indeed happen today, it's just somewhat painful to set up
[21:10:40] <acrichto> e.g. you have to probably compile core/std yourself and arrange them to be in a special location
[21:11:01] <bvssvni> why is cargo not picking 0.0.2 if there are two dependencies using 0.0.1 and 0.0.2?
[21:11:08] <Ericson2314> since we've started talking i've remember more details on the problems i ran into, so I can clarify that
[21:11:14] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[21:11:16] <acrichto> bvssvni: 0.0.1 is semver incompatible with 0.0.2
[21:11:27] <acrichto> Ericson2314: ok, cool!
[21:11:37] <bvssvni> acrichto: does that rule change after 1.0?
[21:12:11] <acrichto> bvssvni: yeah, for example 0.1.0 is compatible with 0.1.1, but incompatibel with 0.2.0
[21:12:21] <acrichto> 1.0.0 is compatible with 1.1.0 and 1.0.1, but incompatible with 2.0.0
[21:12:22] <acrichto> etc
[21:12:42] <Ericson2314> acrichto: One thing i am still confused on, is when you cross compile with cargo now, does rustc or cargo switch sysroots?
[21:12:58] <bvssvni> acrichto: shouldn’t 0.0.1 and 0.0.2 be compatible?
[21:13:04] <acrichto> Ericson2314: there's only one sysroot for the compiler, regardless of what triple you're targeting
[21:13:13] <acrichto> bvssvni: nah semver compatibility is defined as "same left-most nonzero digit"
[21:13:16] *** Joins: jdub (jdub@moz-agrbt8.internode.on.net)
[21:13:22] <acrichto> bvssvni: and in this case the left-most nonzero digits are 1/2 and 1 != 2
[21:13:27] <acrichto> Ericson2314: cargo doesn't switch the sysroot at all
[21:13:30] <bvssvni> acrichto: ah
[21:13:39] <acrichto> Ericson2314: what the compiler does is derive the location of libs from the one sysroot it has
[21:13:45] <acrichto> Ericson2314: e.g. $sysroot/lib/rustlib/$target/lib
[21:14:03] <Ericson2314> ah ok
[21:14:05] *** Quits: EspressoDan (EspressoDan@moz-14q.853.211.140.IP) (Client exited)
[21:14:26] <acrichto> Ericson2314: so when you cross compile, what you'll probably need to do is override `rustc` in PATH (or soon just set RUSTC) to pass `-L` or `--sysroot` when the cross compiler is invoked
[21:14:34] <acrichto> or just throw libs in the compiler's sysroot yourself
[21:15:03] <Ericson2314> I'm thinking for foward compatability with nicer things
[21:15:15] <Ericson2314> it would be nice if right now we could get cargo to complain about the missing libs
[21:15:20] <Ericson2314> not rustc at build time
[21:15:21] *** Joins: EspressoDan (EspressoDan@moz-14q.853.211.140.IP)
[21:16:14] <acrichto> Ericson2314: hm, how so?
[21:16:22] <acrichto> as in cargo detects that std is not available for the target triple?
[21:16:30] <Ericson2314> yeah
[21:16:41] <Ericson2314> so right now it can say "sorry, no can do" and later it can download
[21:16:59] <Ericson2314> but right off the bat we no longer have cargo at the mercy of what's in the sysroot
[21:17:44] <acrichto> hm
[21:17:59] <acrichto> I would be wary of doing that for now b/c crates may not depend on std
[21:18:09] <acrichto> and it's also tough for cargo to find the std
[21:18:11] *** Quits: EspressoDan (EspressoDan@moz-14q.853.211.140.IP) (Client exited)
[21:18:19] <acrichto> e.g. it ties a dependence on rustc's directory layout
[21:18:24] <acrichto> which may not be desirable
[21:18:32] <acrichto> but I can see where a nicer error message would be super helpful
[21:18:32] <Ericson2314> rustc could tell cargo where it is
[21:18:59] <Ericson2314> and in the future where we have cargo downloading automatically, it will need to know where to put it
[21:19:44] <acrichto> true
[21:19:44] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[21:19:59] <acrichto> Ericson2314: although arguably --sysroot may not be necessary
[21:20:05] <acrichto> b/c it's largely just a glorified -L flag
[21:20:09] <Ericson2314> i hope so!
[21:20:15] *** Joins: EspressoDan (EspressoDan@moz-14q.853.211.140.IP)
[21:20:20] <acrichto> there's some fine details for weird host platforms like windows
[21:20:29] <acrichto> but cargo would probably have its own custom dirs for managing downloads
[21:20:32] <acrichto> and it would pass -L flags
[21:21:00] <Ericson2314> does cargo attempt to support multiple simultaneous rustcs at the moment?
[21:21:13] <acrichto> cargo recently got support for a RUSTC env var
[21:21:20] <Ericson2314> ok
[21:21:21] <acrichto> and a `build.rustc` configuration key
[21:21:24] <acrichto> so in that sense, I guess "yes" :)
[21:21:31] <Ericson2314> oo what's in the config key?
[21:22:18] <acrichto> oh just a path
[21:22:21] <Ericson2314> ok
[21:22:28] <acrichto> http://doc.crates.io/config.html
[21:22:35] <Ericson2314> thanks
[21:22:43] <Ericson2314> so how about this
[21:22:57] <mbrubeck> acrichto: Ooh, does this mean we could start using cargo directly to build Servo with our custom rust snapshot?
[21:22:58] <Ericson2314> on first start, it queries rustc, and symlinks all the libs where it can find them
[21:23:19] <Ericson2314> $rust-ver/libs
[21:23:21] <Ericson2314> or something
[21:23:22] <acrichto> mbrubeck: I believe so!
[21:23:37] <larsberg> +1
[21:23:43] <acrichto> Ericson2314: er, slight hiccup in that symlinks don't work on windows :(
[21:23:45] <Ericson2314> and then in the future it always passes in --use-sysroot=false and --externs the libs isntead
[21:23:53] <acrichto> Ericson2314: or rather they just require admin privs (but that's a minor detail)
[21:24:03] <Ericson2314> coppying works too
[21:24:14] <Ericson2314> cause it only needs rlibs?
[21:24:21] <Ericson2314> so no rpath etc to worry about?
[21:24:58] <acrichto> yeah that should be fine
[21:25:21] <Ericson2314> great!
[21:25:43] <Ericson2314> [that can also be the ground breaking for future persisting builds between projects]
[21:25:58] *** Quits: EspressoDan (EspressoDan@moz-14q.853.211.140.IP) (Client exited)
[21:26:18] <Ericson2314> I think that's basically what I need to rewrite this RFC!
[21:26:21] <acrichto> Ericson2314: https://github.com/rust-lang/cargo/issues/482
[21:26:24] * acrichto wants to fix that very soon
[21:26:53] <Ericson2314> ah, i'll go get up to date on that too
[21:28:49] *** Quits: jarrednicholls (uid19542@moz-cmdbn3.highgate.irccloud.com) (Quit: Connection closed for inactivity)
[21:31:19] *** Joins: EspressoDan (EspressoDan@moz-14q.853.211.140.IP)
[21:31:45] *** Joins: santiago (santiago@moz-8th.j2e.167.12.IP)
[21:39:17] *** Quits: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de) (Quit: Bye)
[21:58:34] *** Quits: EspressoDan (EspressoDan@moz-14q.853.211.140.IP) (Client exited)
[22:08:23] *** Joins: EspressoDan (EspressoDan@moz-14q.853.211.140.IP)
[22:08:44] *** Quits: zyphrus (David@moz-1a4.urk.98.101.IP) (Ping timeout: 121 seconds)
[22:15:40] <posix4e> Am I allowed to create crates with dependencies that are pointing at a github?
[22:16:22] <sfackler> you can make them, but can't publish them to crates.io
[22:17:16] <posix4e> kk
[22:17:17] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Ping timeout: 121 seconds)
[22:18:56] *** Quits: EspressoDan (EspressoDan@moz-14q.853.211.140.IP) (Client exited)
[22:21:17] *** Joins: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr)
[22:24:59] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[22:29:24] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:34:01] *** Joins: EspressoDan (EspressoDan@moz-ct79sd.dynamic.ashlandfiber.net)
[22:43:48] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:50:51] *** Joins: panicbit (panicbit@moz-trnuar.dip0.t-ipconnect.de)
[23:12:14] *** Quits: EspressoDan (EspressoDan@moz-ct79sd.dynamic.ashlandfiber.net) (Client exited)
[23:13:27] *** Joins: harrisonclarke (harrisoncla@moz-530kut.eastlink.ca)
[23:15:31] *** Quits: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:36:42] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[23:39:12] *** Quits: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP) (Connection closed)
[23:41:33] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[23:43:31] *** Joins: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP)
[23:44:04] *** Quits: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP) (Connection closed)
[23:44:09] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[23:44:10] *** Joins: eckhardt (eckhardt@moz-s9e.ov1.227.199.IP)
[23:44:29] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[23:51:08] *** Quits: harrisonclarke (harrisoncla@moz-530kut.eastlink.ca) (Connection closed)
[23:51:29] *** Joins: harrisonclarke (harrisoncla@moz-530kut.eastlink.ca)
[23:55:52] *** Quits: harrisonclarke (harrisoncla@moz-530kut.eastlink.ca) (Ping timeout: 121 seconds)
