[00:02:42] <mcpherrin> eternaleye: Well, that assumes you have a disk :P
[00:05:26] <eternaleye> mcpherrin: True enough, but if you don't have a disk _somewhere_, I find myself... concerned.
[00:05:46] <eternaleye> mcpherrin: in-memory databases are all well and good, but at least have an asynchronous log, dammit!
[00:06:43] <eternaleye> mcpherrin: Either that or your data's ephemeral, in which case losing it really isn't a thing...
[00:12:43] * bascule likes having lots of replicas and redundancy and not depending on wacky crap like fsync
[00:13:03] <bascule> "When you call fsync(), you open up a portal to hell" -Kyle Kingsbury
[00:13:46] <bascule> assume some members who acknowledge writes will lose them, because some will anyway
[00:14:19] <bascule> eventually all computers lose containment on the purple smoke
[00:14:28] *** Quits: brson_ (brson@moz-bro.mg6.56.172.IP) (Ping timeout: 121 seconds)
[00:14:28] <Tiffany> how are you supposed to stay ACID without fsync?
[00:15:24] <dcb> ACID doesn't preclude piping to /dev/null and returning an error
[00:15:51] <dcb> but more seriously, via distribution
[00:15:59] <bascule> Tiffany: what happens if computers explode, disks get corrupted, memory gets corrupted, bugs introduce data consistency errors, etc?
[00:16:13] <bascule> Tiffany: you need a plan for all that stuff
[00:16:24] <bascule> fsync() is a band aid
[00:16:55] <Tiffany> so what do you do when something OOMs and finds all its data corrupted?
[00:17:04] <bascule> Tiffany: regarding replicas that report writes accepted without persisting them, that's where things like anti-entropy help
[00:17:06] <Tiffany> just scrap it all and start over?
[00:17:09] <bascule> yes
[00:17:17] <bascule> and hope at least one other replica got a good copy
[00:20:23] <eternaleye> IMO, it's best-effort at every level
[00:21:02] <eternaleye> Just because fsync() can't give _every_ guarantee desired, doesn't mean it isn't sometimes the simplest way to get _some_ of them, allowing the others to be obtained with additional methods.
[00:21:42] <eternaleye> Personally, persistent data structures + mmap + replicated consensus is my favored toolbox for that kind of thing
[00:22:56] <Tiffany> I've never done distributed systems
[00:24:57] <bascule> eternaleye: yeah, I prefer systems are designed with the idea that any node might be running a buggy, corrupted copy of the program at any time, and that the other nodes are able to deal with that gracefully
[00:25:03] <bascule> prefer (distributed) systems
[00:25:31] <eternaleye> bascule: Oh, sure
[00:25:44] <bascule> this is why you see massive data storage systems AT LEAST do something like a CRC32/CRC64 on the data
[00:25:57] <eternaleye> bascule: I just also like aggressively designing the implementations to avoid _reliance_ on the replication if possible
[00:26:15] <eternaleye> bascule: CRC isn't an at-least; it provides completely different guarantees from crypto hashes
[00:26:38] <bascule> sure, I'm talking about where there aren't any security guarantees, and where the other option is "nothing"
[00:26:56] <eternaleye> bascule: Guaranteed detection of specific errors but weak against targeted attacks, vs. stochastic detection but hard to intentionally attack
[00:26:58] <bascule> I prefer hashes too, and content addressable storage where content is identified by a hash of the ciphertext! :o
[00:27:21] <bascule> but uhh
[00:27:26] <bascule> some systems don't even CRC the data
[00:27:29] <eternaleye> bascule: Sure
[00:27:44] <bascule> then bitrot happens
[00:27:49] <bascule> then the bitrotted data gets replicated
[00:27:50] <eternaleye> bascule: I'm more saying that CRC and crypto-hashes are not comparable, as they're on different continuua
[00:27:50] <bascule> seems bad
[00:28:02] <bascule> sure, but that's reliability vs security
[00:28:06] <eternaleye> yup
[00:28:22] <bascule> some systems can't even store data reliably!
[00:28:25] <eternaleye> heh
[00:28:29] <bascule> security is definitely a bridge too far for them
[00:28:52] <eternaleye> That reminds me, I need to finish speccing out my suffix-tree based backup system
[00:29:47] <Ilari> Heh, I actually have one program that can actually OOM on some systems (crashes, but should dump some data).
[00:31:03] <eternaleye> byte-granular deduplicated backups sound fun :D
[00:33:18] <Ilari> And yeah, 32 bit systems are bit thing of the past (one could VMsize OOM on those).
[00:34:29] <bascule> eternaleye: heh, there are people working on that, but I don't really like that approach
[00:34:34] <bascule> I prefer deduping at the object level
[00:35:02] <bascule> it makes it easier to do things like oblivious storage, for example
[00:35:41] <Ilari> Also, one program of mine actually can track and quota memory for embedded Lua interpretter (and also survive if that thing runs OOM).
[00:42:30] * bascule likes leaning on the OS for that sort of stuff
[00:42:38] <bascule> doesn't help eternaleye's use case of writing a kernel lol but
[00:44:14] <eternaleye> bascule: Very little does :P
[00:57:03] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:59:49] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[01:01:08] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:12:55] *** Joins: blank_na1e (blank_name@moz-ms6nj1.mi.frontiernet.net)
[01:15:04] *** Quits: blank_name (blank_name@moz-ttfeua.mi.frontiernet.net) (Ping timeout: 121 seconds)
[01:55:02] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:01:19] *** Quits: vks (quassel@moz-42n5l0.pools.vodafone-ip.de) (Ping timeout: 121 seconds)
[02:16:33] *** Joins: adu (ajr@moz-99ult9.md.comcast.net)
[02:17:40] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:18:04] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:03:35] *** Joins: brson (brson@moz-3ki2he.tmodns.net)
[03:27:26] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:35:22] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:46:31] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:53:10] *** Quits: brson (brson@moz-3ki2he.tmodns.net) (Ping timeout: 121 seconds)
[04:06:23] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[04:16:58] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:38:50] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[06:32:18] *** Joins: atomic (atomic@moz-d4em5e.de.colt.net)
[06:32:37] *** Quits: adu (ajr@moz-99ult9.md.comcast.net) (Client exited)
[06:35:25] <Ilari> Well, /23s didn't quite run out, 5 remain...
[06:50:46] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:11:05] *** Joins: Tobba (Tobba@moz-oecqnu.plus.com)
[09:14:46] *** Quits: Tobba (Tobba@moz-oecqnu.plus.com) (A TLS packet with unexpected length was received.)
[09:57:02] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:34:39] *** Joins: vks (quassel@moz-42n5l0.pools.vodafone-ip.de)
[10:35:31] *** Joins: Tobba (Tobba@moz-4l45on.skybroadband.com)
[11:30:39] *** Quits: Tobba (Tobba@moz-4l45on.skybroadband.com) (A TLS packet with unexpected length was received.)
[13:17:14] <Tiffany> I don't know why it took until now for me to add bascule's blog to my rss reader
[13:57:04] <Tiffany> oh so that's why cryptosphere uses curvecp instead of noise, it's older than noise
[14:24:34] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (Ping timeout: 121 seconds)
[14:27:06] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[14:47:08] <vks> what is noise?
[14:47:41] <Elaine> https://github.com/trevp/noise
[14:47:51] <Elaine> a cryptographic protocol being designed.
[14:47:57] <Elaine> really a family of protocols
[14:48:04] <Elaine> https://moderncrypto.org/mail-archive/noise/2015/
[14:48:08] <Tiffany> protocol factory
[14:48:19] <Elaine> yeah, that's a good way to put it
[14:48:56] <vks> cool, thanks!
[15:26:25] <Tiffany> convergent encryption sounded a lot cooler until I read this article: https://tahoe-lafs.org/hacktahoelafs/drew_perttula.html
[16:40:22] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[17:52:40] <bascule> Tiffany: that's why you include a convergence secret in key derivation
[17:54:14] <Tiffany> yeah
[17:54:48] <Tiffany> but that article mentioned how deduplication is actually not that helpful, and even less so when you include convergence secrets
[17:59:05] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[18:01:40] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[18:03:31] <Tiffany> is there anything that combines CRCs with cryptographic hashes?
[18:04:06] <Tiffany> also, what is the chance of a cryptographic hash having a one or two bit error lead to an identical hash?
[18:04:13] <Tiffany> it must be extremely small
[18:06:41] <Tiffany> hm
[18:07:38] <Tiffany> is there any way of uniquely identifying objects in distributed systems which doesn't have a risk of collisions?
[18:09:48] <bascule> if you have a cryptographic hash, you don't need a CRC
[18:10:12] <bascule> and if you're using a hash like Blake2b, the chance of a collision is vanishingly small
[18:10:15] <Tiffany> eternaleye will probably disagree
[18:10:21] <bascule> hahaha
[18:10:33] <bascule> a hash fulfills the same purpose, it's just collision resistant
[18:10:51] <bascule> yesterday I was talking about systems that punted on security, but used e.g. CRC64 to prevent bitrot
[18:10:52] <Tiffany> with CRC the chance of a 1 or certain types of 2-bit error leading to collision is actually impossible, as opposed to just vanishingly small
[18:11:11] <bascule> I mean per the pigeonhole principle that's not really possible
[18:11:13] <Tiffany> using CRCs to identify objects is of course a horrible idea
[18:11:17] <Tiffany> oh
[18:11:23] <Tiffany> you're talking about object collisions, not bit errors
[18:11:23] <Tiffany> yeah
[18:11:36] <Tiffany> cryptographic hashes are better in that regard
[18:11:55] <Tiffany> how many distributed systems actually gracefully handle the case of hash collisions?
[18:12:13] <bascule> allegedly git has some built-in stuff to handle certain cases
[18:12:57] <Tiffany> probably mainly for taking care of the truncated hashes
[18:13:34] <Tiffany> with those, you just specify more of the hash, or disambiguate deterministically
[18:13:46] <Tiffany> for a file store like cryptosphere it's a more significant problem
[18:14:42] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:18:43] <bascule> I mean, we can calculate the birthday bound on the number of objects at which we'd start expecting collisions
[18:19:19] <bascule> on say, 256-bit Blake2b hashes
[18:20:32] <bascule> that's 2^256/2
[18:20:40] <eternaleye> bascule: A hash and a crc are _not_ fulfilling the same purpose
[18:20:41] <eternaleye> bascule: A CRC has deterministic detection of single-bit flips, two-bit flips less than a specific distance apart, etc.
[18:20:43] <eternaleye> bascule: In cases where the attacker can't do chosen-*text attacks, this is *superior* for a number of purposes
[18:20:45] <eternaleye> bascule: And one big reason for that is size
[18:20:48] <eternaleye> bascule: Due to the birthday problem, getting stochastic detection of errors requires a lot more bits
[18:20:53] <eternaleye> bascule: CRC is wholly unsuited to content-based addressing, yes... but that's not the only thing people want.
[18:21:04] <Ilari> bascule: I think I saw code in git that dealt with actual full collision.
[18:21:35] <bascule> eternaleye: do you think a collision resistant hash function like Blake2b will fail to detect bitrot?
[18:21:45] <bascule> I certainly don't
[18:21:54] <eternaleye> bascule: I'm saying that in order to drive the probability low, *you need to spend more bits*
[18:22:01] <eternaleye> bascule: There are cases where that's a bad trade.
[18:22:09] <bascule> sure, but you also need more bits to prevent object collisions in general
[18:22:14] <bascule> seems ok?
[18:22:23] <bascule> (for content addressable storage)
[18:22:45] <Tiffany> I'm trying to see if there's any examples of files with identical hashes in the wild
[18:22:49] <Tiffany> but I'm not succeeding
[18:23:01] <bascule> well there are, but they're using chosen prefix attacks on MD5 and such
[18:23:10] <Tiffany> well yeah
[18:23:18] <Tiffany> someone claimed there are zero known collisions for SHA-2
[18:23:20] <Tiffany> which I find dubious
[18:23:25] <eternaleye> bascule: There's also the efficiency of updating a CRC
[18:25:49] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[18:26:12] <Ilari> bascule: Oh yup, git does have code that deals with full SHA-1 collisions. If detected, it bombs out with fatal error (I don't recall exactly what pairs of objects it checks).
[18:27:24] *** Quits: atomic (atomic@moz-d4em5e.de.colt.net) (Ping timeout: 121 seconds)
[18:30:18] <Tiffany> ilari: so your git repository becomes unusable?
[18:31:28] <Ilari> Tiffany: I think it can only happen on transfer operations or maybe if object it is trying to create is of different type than what is already there.
[18:31:59] <Tiffany> I'm wondering what the hash collision failure mode of something like bittorrent or cryptosphere is
[18:32:13] <Tiffany> if you are trying to download a torrent with a colliding hash, do you end up having bits and pieces from both files?
[18:32:41] <bascule> Tiffany: yes, in fact that attack worked against some systems
[18:32:46] <Ilari> Tiffany: Bittorrent: If you can collide block hash, you can IIRC corrupt a file, and it has no secondary mechanism to check.
[18:32:53] <bascule> like LimeWire
[18:36:55] <eternaleye> bascule: CRCs and hashes have VERY different use cases; the similarity of the (baseline) API for using them obscures that.
[18:36:57] <eternaleye> bascule: Being able to "patch" a CRC with (new data, replaced data) is a heck of a thing
[18:36:58] <eternaleye> bascule: Incidentally, an example of that kind of storage, where CRCs are exactly the thing to use? Ceph.
[18:37:00] <eternaleye> bascule: Rados Block Device, made of a list of 4MB objects, supports random write inside objects, nominal rather than content-based.
[18:37:03] <eternaleye> bascule: And you don't want to issue a 4MB read for each 512byte write to update a blake2b hash
[18:37:42] <eternaleye> bascule: Much better to RMW just the tiny block
[18:39:45] <bascule> eternaleye: I guess I'm more concerned with random access reads than writes
[18:41:42] <Tiffany> and there's another torrent containing the full archive, 160GB compressed
[18:41:47] <Tiffany> oh, wrong channel
[19:14:08] *** Quits: vks (quassel@moz-42n5l0.pools.vodafone-ip.de) (Ping timeout: 121 seconds)
[19:28:01] <Ilari> Heh, discussions on TLS ML about what server is to do if it does not have appropriate cert chain.
[19:59:06] <Ilari> Ever seen interplay of automation and system operator actions leading into really nasty results? :->
[20:47:53] <Ilari> Also, troubleshooting machine of complexity of LHC is probably pretty fun (looks like they are having technical issues or something)...
[21:03:15] <bascule> hahaha
[21:03:19] <bascule> yeah sounds hard
[21:17:42] <Ilari> Seems like the same cause has caused two consequtive emergency beam dumps ~5-20 minutes after reaching stable beams.
[21:21:44] <Ilari> The one previous to those got dumped by PLC failing and backup PLC being misconfigured. Causing personel safety communications to fail (CERN apparently _really_ doesn't want anyone to be in the tunnel when LHC has magnets powered on).
[21:38:31] <Ilari> Ah, apparently looks like broken circuit board or something.
[21:40:45] <Ilari> At least it isn't figuring out cause of things going from from seriously patchy data (e.g. MH370). :-)
[21:41:50] <Tiffany> iirc being in the tunnel while it's running causes very fast death
[21:42:49] <Ilari> Radiation? Or something else?
[21:43:17] <Tiffany> I think so?
[21:43:32] <eddyb> if it can give pidgeons cancer...
[21:51:26] <Ilari> Despite having occured less than 18 months ago, the disappearence of Malysia Airlines flight 370 ranks among great mysteries in aviation (the hypotheses about cause include successful hijacking, hijacking gone wrong, technical failure, diversion gone wrong and pilot suicide)...
[21:55:43] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Connection closed)
[21:55:43] *** Joins: dcb_ (textual@moz-j72nfe.ca.comcast.net)
[22:07:54] *** dcb_ is now known as dcb
[22:20:12] *** Joins: vks (quassel@moz-42n5l0.pools.vodafone-ip.de)
[23:05:33] <Tiffany> "In 2011, Intel announced that it is working on a car security system that connects to smartphones via an application. The application works by streaming video to a cloud service if your car is broken into.[168]"
[23:05:44] <Tiffany> after the mess that is the intel ME chipset, I don't trust intel to get that right...
[23:53:41] <Ilari> ME can read/write main memory without restriction, right?
[23:54:21] <Ilari> Heh... "This is just editor error."
