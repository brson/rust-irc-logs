[00:00:51] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[00:02:33] *** Quits: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com) (Quit: quit)
[00:05:00] *** Joins: mib_z49mq5 (Mibbit@moz-juv.9o3.252.72.IP)
[00:05:50] *** Quits: mib_z49mq5 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:07:48] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[00:08:47] <larsberg> Got to play with a couple of Fx0 devices yesterday. Apart from being on FFOS 2.0 (can't update because of private keys), they are pretty awesome! Much more fluid than the Flame experience :-)
[00:08:54] *** Joins: je_julie (uid29643@moz-2q4j9e.brockwell.irccloud.com)
[00:09:15] <mwu> love 'em
[00:09:20] <mwu> just wish I could unlock mine
[00:09:31] *** Quits: Zoxc (Zoxc@moz-tbtdpn.bb.online.no) (Ping timeout: 121 seconds)
[00:10:16] <mwu> also a very very japanese feeling phone, unlike the rest of the world that get phones that feel like metal slabs
[00:10:21] <larsberg> mwu: bbirtles said they are "in negotiations" on that right now
[00:10:30] <mwu> mmm
[00:10:39] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[00:10:39] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vkh20
[00:10:39] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[00:10:43] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[00:10:44] -ghservo- [13servo] 15bors-servo closed pull request #6278: Pass release/dev arguments to command function for jQuery update (06master...06patch-3) 02http://git.io/vkhl8
[00:10:44] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[00:11:20] <fabrice> mwu: you won't get high speed data in the US though
[00:11:22] <mbrubeck> larsberg: FYI, more apk-builder shenanigans. https://github.com/tomaka/android-rs-glue/pull/58
[00:11:23] <crowbot> PR #58: Parse "-l foo" linker arguments - https://github.com/tomaka/android-rs-glue/pull/58
[00:11:34] <mwu> fabrice: that's ok, I'll just visit japan more often
[00:12:05] <mwu> also there's almost zero reception where I live anyway
[00:12:57] * pcwalton is sad how many memory barriers are in style::properties::ComputedValues::drop
[00:13:01] <fabrice> I like the z3c quite a lot
[00:13:20] <mwu> I don't think I've played with the z3c yet
[00:13:50] <larsberg> mbrubeck: gah, thanks for catching and fixing that! I will revive a cleaner Android-rs-glue when I get back from Japan to improve that experience + packaging the resources + having a working debug mode
[00:14:14] <larsberg> fabrice: it definitely looked pretty nice when I saw you using it the last time I was in MTV
[00:14:22] *** Joins: mib_6kqp4m (Mibbit@moz-juv.9o3.252.72.IP)
[00:15:04] *** Joins: njn (chatzilla@moz-c6c476.iinet.net.au)
[00:17:42] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[00:18:04] *** chmanchester is now known as chmanchester|afk
[00:21:49] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[00:22:58] *** Joins: Zoxc (Zoxc@moz-f74alg.bb.online.no)
[00:25:53] *** Quits: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[00:30:00] *** Quits: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp) (Ping timeout: 121 seconds)
[00:33:21] *** Joins: bdero (bran@moz-uiog92.biz.rr.com)
[00:33:28] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[00:33:28] -ghservo- [13servo] 15frewsxcv opened pull request #6279: Add flake8 to the tidy process for Python files (06master...06flake8) 02http://git.io/vkhDy
[00:33:28] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[00:33:50] <mbrubeck> frewsxcv: Nice, now tidy can tidy itself. :P
[00:34:02] <frewsxcv> yep :)
[00:35:26] *** kimundi is now known as zz_kimundi
[00:36:28] *** Joins: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp)
[00:37:20] *** Joins: Caspy7 (chatzilla@moz-tkogmh.stlsmo.sbcglobal.net)
[00:37:47] *** chmanchester|afk is now known as chmanchester
[00:42:03] *** Quits: jga (jga@moz-ofn.t1q.244.77.IP) (Ping timeout: 121 seconds)
[00:43:10] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[00:43:53] *** Quits: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[00:44:38] *** Joins: brson (brson@moz-3ia.c9m.56.172.IP)
[00:44:38] *** ChanServ sets mode: +o brson
[00:49:14] *** Quits: ienzam1 (enzam@moz-spq.4ra.239.216.IP) (Ping timeout: 121 seconds)
[00:50:56] *** Joins: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp)
[00:51:10] *** Quits: larsberg (Adium@moz-mfl.g5u.215.61.IP) (Quit: Leaving.)
[00:54:47] *** Joins: zmike_ (discomfitor@moz-mfl.g5u.215.61.IP)
[01:00:20] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[01:02:27] *** Quits: MrZeus (MrZeus@moz-jf4304.skybroadband.com) (Ping timeout: 121 seconds)
[01:03:58] *** Quits: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:06:56] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[01:06:56] -ghservo- [13servo] 15glennw opened pull request #6280: Partial implementation of transform animations spec. (06master...06transform-transitions) 02http://git.io/vkh79
[01:06:56] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[01:18:28] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[01:19:07] *** Joins: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP)
[01:21:02] *** Quits: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl) (Ping timeout: 121 seconds)
[01:22:36] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[01:23:28] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[01:30:23] *** Quits: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP) (Ping timeout: 121 seconds)
[01:32:28] *** Quits: Zoxc (Zoxc@moz-f74alg.bb.online.no) (Ping timeout: 121 seconds)
[01:33:31] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[01:34:54] *** Joins: Zoxc (Zoxc@moz-f74alg.bb.online.no)
[01:35:06] *** Joins: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP)
[01:39:49] *** Quits: dbaron (dbaron@moz-5okg08.rgd2.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[01:44:15] *** Quits: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP) (Quit: Lost terminal)
[01:44:57] *** Joins: slyu (slyu@moz-aj9ejj.HINET-IP.hinet.net)
[01:45:39] *** Quits: mib_6kqp4m (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:47:47] *** Quits: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP) (Ping timeout: 121 seconds)
[01:48:55] *** Quits: crowbot (nodebot@moz-be4gel.compute-1.amazonaws.com) (A TLS packet with unexpected length was received.)
[01:48:55] *** Joins: crowbot1 (nodebot@moz-4c16ej.compute-1.amazonaws.com)
[01:49:52] *** Quits: zmike_ (discomfitor@moz-mfl.g5u.215.61.IP) (Ping timeout: 121 seconds)
[01:54:39] *** Joins: jedireza (jedireza@moz-allpoi.ca.comcast.net)
[01:55:28] <pcwalton> ok, I put my profiler up on https://github.com/pcwalton/gperftools
[01:56:52] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:58:27] *** Quits: brson (brson@moz-3ia.c9m.56.172.IP) (Quit: leaving)
[01:59:57] *** Joins: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP)
[02:04:34] *** Joins: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp)
[02:04:40] *** Quits: zz_kimundi (kimundi@moz-iru09r.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:04:56] *** Quits: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp) (Connection closed)
[02:06:25] *** Joins: zz_kimundi (kimundi@moz-ugi.lub.188.87.IP)
[02:06:32] *** zz_kimundi is now known as kimundi
[02:07:43] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[02:14:25] *** Quits: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP) (Connection closed)
[02:14:43] *** Joins: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP)
[02:17:01] *** Joins: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp)
[02:19:14] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[02:19:16] *** Quits: tikue (tim@moz-n71.k1b.0.198.IP) (Connection closed)
[02:19:36] *** Quits: mwu (mwu@moz-ojvkdi.oi2i.p882.0085.2601.IP) (Quit: Leaving)
[02:21:43] *** Joins: playjax (chatzilla@moz-bqrtim.optusnet.com.au)
[02:21:51] *** Quits: jedireza (jedireza@moz-allpoi.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[02:23:18] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[02:25:21] *** Joins: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com)
[02:29:36] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[02:35:44] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[02:39:17] *** Quits: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP) (Quit: This computer has gone to sleep)
[02:42:14] *** Quits: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp) (Ping timeout: 121 seconds)
[02:43:17] *** Joins: mib_4fchdb (Mibbit@moz-juv.9o3.252.72.IP)
[02:43:44] *** Quits: mib_4fchdb (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:44:21] *** WindowsBunny is now known as BunnyServ
[02:45:17] *** Quits: gandalf (zbraniecki@moz-u3dg2t.sfo1.mozilla.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:59:20] *** Joins: jedireza (jedireza@moz-allpoi.ca.comcast.net)
[03:02:02] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[03:03:00] *** Quits: kimundi (kimundi@moz-ugi.lub.188.87.IP) (Ping timeout: 121 seconds)
[03:04:27] *** Joins: zz_kimundi (kimundi@moz-b6c.mnt.188.87.IP)
[03:04:33] *** zz_kimundi is now known as kimundi
[03:05:16] *** Joins: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp)
[03:12:18] *** Quits: jedireza (jedireza@moz-allpoi.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:16:02] *** Joins: mib_jpo6tz (Mibbit@moz-juv.9o3.252.72.IP)
[03:16:48] *** Quits: mib_jpo6tz (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:20:10] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[03:21:50] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[03:24:17] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[03:24:52] *** Joins: ienzam (enzam@moz-fussc3.ca.comcast.net)
[03:35:38] *** chmanchester is now known as chmanchester|afk
[03:35:58] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[03:35:58] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vkjGJ
[03:35:58] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[03:36:00] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[03:36:00] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vkjGU
[03:36:00] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[03:39:16] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[03:43:48] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[03:43:48] -ghservo- [13rust-cocoa] 15metajack opened pull request #91: Bring repo and package naming in line with Rust conventions. (06master...06crate-io2) 02http://git.io/vkjZu
[03:43:48] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[03:44:46] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[03:44:46] -ghservo- [13core-foundation-rs] 15metajack opened pull request #65: Change package name and repo location. (06master...06crates-io-2) 02http://git.io/vkjZM
[03:44:46] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[03:44:49] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[03:44:49] -ghservo- [13cocoa-rs] 15glennw pushed 2 new commits to 06master: 02http://git.io/vkjZS
[03:44:49] -ghservo- 13cocoa-rs/06master 148f278a7 15Jack Moffitt: Bring repo and package naming in line with Rust conventions.
[03:44:49] -ghservo- 13cocoa-rs/06master 1410df8a7 15Glenn Watson: Merge pull request #91 from metajack/crate-io2...
[03:44:49] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[03:47:14] <jack> gw: can you grab rust-core-foundation too? ^
[03:47:43] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[03:47:43] -ghservo- [13core-foundation-rs] 15glennw closed pull request #65: Change package name and repo location. (06master...06crates-io-2) 02http://git.io/vkjZM
[03:47:43] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[03:47:45] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[03:47:45] -ghservo- [13core-foundation-rs] 15glennw pushed 2 new commits to 06master: 02http://git.io/vkjn3
[03:47:45] -ghservo- 13core-foundation-rs/06master 14fd8bed8 15Jack Moffitt: Change package name and repo location....
[03:47:45] -ghservo- 13core-foundation-rs/06master 1413ed7c7 15Glenn Watson: Merge pull request #65 from metajack/crates-io-2...
[03:47:45] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[03:47:48] <gw> jack: done
[03:49:11] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[03:49:11] -ghservo- [13core-foundation-rs] 15metajack opened pull request #66: Remove unneeded lib section. (06master...06crates-io-3) 02http://git.io/vkjng
[03:49:11] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[03:49:36] <jack> gw: this make take a few tries :)
[03:49:36] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[03:49:36] -ghservo- [13core-foundation-rs] 15glennw pushed 2 new commits to 06master: 02http://git.io/vkjnV
[03:49:36] -ghservo- 13core-foundation-rs/06master 149e71e34 15Jack Moffitt: Remove unneeded lib section.
[03:49:36] -ghservo- 13core-foundation-rs/06master 14c2d82df 15Glenn Watson: Merge pull request #66 from metajack/crates-io-3...
[03:49:36] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[03:50:12] <jack> ok. core-foundation is on crates.io now
[03:50:22] <jack> besides rust-core-graphics, what else does glutin need?
[03:50:49] *** Joins: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca)
[03:52:43] *** Joins: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp)
[03:57:17] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[03:57:44] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[03:57:44] -ghservo- [13rust-core-graphics] 15metajack opened pull request #37: Add metadata for crates.io. (06master...06crates-io) 02http://git.io/vkjco
[03:57:44] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[03:58:45] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[03:58:45] -ghservo- [13core-graphics-rs] 15glennw closed pull request #37: Add metadata for crates.io. (06master...06crates-io) 02http://git.io/vkjcH
[03:58:45] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[03:59:33] <jack> core-grpahics is on crates.io now
[04:00:02] <jack> ok. time for a glutin pr
[04:00:05] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[04:00:05] -ghservo- [13servo] 15jdm opened issue #6281: Investigate per-document event queues 02http://git.io/vkjCv
[04:00:05] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[04:02:23] *** Joins: mukilan (mukilan@moz-inv.v1b.164.122.IP)
[04:06:42] *** Quits: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net) (Connection closed)
[04:09:09] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[04:09:09] -ghservo- [13glutin] 15metajack opened pull request #30: Use official crates now. (06servo...06new-crates) 02http://git.io/vkjWK
[04:09:09] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[04:10:19] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[04:10:19] -ghservo- [13glutin] 15glennw pushed 2 new commits to 06servo: 02http://git.io/vkjWd
[04:10:19] -ghservo- 13glutin/06servo 146db961c 15Jack Moffitt: Use official crates now.
[04:10:19] -ghservo- 13glutin/06servo 149384e13 15Glenn Watson: Merge pull request #30 from metajack/new-crates...
[04:10:19] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[04:16:48] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Connection closed)
[04:18:14] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[04:18:43] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Connection closed)
[04:19:17] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[04:19:18] *** Quits: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP) (Quit: å •å…¥ /dev/null)
[04:20:16] <jack> whee.
[04:20:55] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[04:21:00] *** Quits: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[04:25:02] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[04:27:28] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[04:29:06] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[04:29:39] *** Joins: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca)
[04:34:42] *** Joins: waffles (Wafflespean@moz-4e9.43b.136.123.IP)
[04:35:47] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[04:42:23] *** Quits: bdero (bran@moz-uiog92.biz.rr.com) (Ping timeout: 121 seconds)
[04:43:56] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[04:48:09] *** Joins: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp)
[04:51:07] *** Quits: Jesse (jruderman@moz-cfhap5.mtv2.mozilla.com) (Client exited)
[04:52:18] *** Joins: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca)
[04:56:05] *** Joins: acgtyrant (acgtyrant@moz-pdhlop.2jmr.vvej.0250.2001.IP)
[04:59:10] *** Quits: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp) (Ping timeout: 121 seconds)
[05:00:04] *** Joins: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp)
[05:01:08] *** Quits: acgtyrant (acgtyrant@moz-pdhlop.2jmr.vvej.0250.2001.IP) (Ping timeout: 121 seconds)
[05:08:25] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[05:08:25] -ghservo- [13glutin] 15metajack opened pull request #31: Fix extern crate name. (06servo...06fixup-crates) 02http://git.io/vkjup
[05:08:25] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[05:10:22] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[05:10:22] -ghservo- [13glutin] 15glennw closed pull request #31: Fix extern crate name. (06servo...06fixup-crates) 02http://git.io/vkjup
[05:10:22] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[05:15:13] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:19:04] *** Joins: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP)
[05:21:40] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[05:25:13] *** Joins: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net)
[05:25:48] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[05:26:12] *** Quits: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP) (Ping timeout: 121 seconds)
[05:30:58] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[05:31:15] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[05:32:19] *** Joins: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP)
[05:33:23] <njn> gw: I just did a run where 14 FreeTypeLibraryHandle's were instantiated, but FreeTypeLibraryHandle::drop was only called 7 times. Is that expected?
[05:35:00] <gw> njn: perhaps. some of the ft handles are stored in thread tls, so perhaps they aren't getting dropped? I'm not sure - would need to investigate more - but I wouldn't be entirely surprised
[05:35:24] *** Quits: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp) (Ping timeout: 121 seconds)
[05:35:33] <gw> thread tls ... duh
[05:37:46] <njn> :)
[05:37:59] *** Quits: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net) (Client exited)
[05:42:26] *** Quits: ekiara (emk@moz-o2c214.tech.co.ke) (Quit: leaving)
[05:45:11] *** Joins: ekiara (emk@moz-o2c214.tech.co.ke)
[05:47:41] *** Joins: ldng (ldng@moz-l3gmiq.abo.bbox.fr)
[05:48:07] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:51:21] *** Joins: bogdan_maris (Instantbird@moz-662.esi.231.62.IP)
[05:53:36] <njn> gw: I've confirmed the TLS ones (LOCAL_CONTEXT_KEY) never get dropped
[05:54:35] <gw> njn: interesting. I'm not sure what the TLS semantics are. perhaps we need to clear the TLS variable when the thread exits?
[05:54:52] <njn> specifically:
[05:54:53] <njn> START LayoutWorker worker 1/6
[05:54:55] <njn> START LayoutWorker worker 6/6
[05:54:56] <njn> START LayoutWorker worker 2/6
[05:54:58] <njn> START LayoutWorker worker 3/6
[05:54:59] <njn> START LayoutWorker worker 5/6
[05:55:01] <njn> START LayoutWorker worker 4/6
[05:55:02] <njn> START LayoutTask PipelineId(0)
[05:56:13] <njn> http://doc.servo.org/std/thread/struct.LocalKey.html says "Initialization is dynamically performed on the first call to with() within a thread, and values support destructors which will be run when a thread exits."
[05:56:26] <njn> which suggests it *should* drop, if I'm reading it right
[05:56:41] <gw> yep, that's how I read it
[05:56:42] <njn> oh, wait!
[05:56:44] <njn> thread_local!(static LOCAL_CONTEXT_KEY: Cell<*mut LocalLayoutContext> = Cell::new(ptr::null_mut()));
[05:56:48] <njn> raw pointers!
[05:56:57] <gw> njn: ah, yep that'll do it!
[05:57:30] <njn> gw: I think this explains something
[05:57:39] <njn> I've been seeing FreeType memory usage being high, according to Massif
[05:57:39] *** Joins: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp)
[05:57:47] <njn> but all the non-temporary ones I've instrumented are tiny
[05:58:03] <njn> so it must be the temporary LayoutContext ones that are getting big, and then not being freed
[05:58:14] <njn> (where "high" means 1MB+)
[05:58:44] <gw> njn: that would make sense. the way TLS works has changed quite a lot since that was implemented. the raw pointer usage may not be necessary anymore (I think)
[05:58:56] <njn> so LayoutWorker tasks use LOCAL_CONTEXT_KEY, as does LayoutTask itself
[06:00:31] <njn> gw: I'll try changing the raw pointer to a Box
[06:01:26] <njn> or maybe it needs to be Option<Box<>>, so I can give it a meaningful "nothing" initial value?
[06:01:59] <njn> or maybe just Option<>
[06:02:04] <njn> without the Box
[06:02:10] <gw> yep
[06:02:36] * gw can't quite remember why it had to be a raw pointer
[06:02:44] *** Joins: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net)
[06:03:16] * njn doesn't understand Cell<> yet,which is a problem
[06:09:02] *** Quits: ldng (ldng@moz-l3gmiq.abo.bbox.fr) (Quit: Leaving)
[06:10:19] *** Quits: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[06:11:46] <njn> gw: I'm getting complaints about the relevant types not implementing `Copy`
[06:12:00] <njn> esp. LocalLayoutContext
[06:12:49] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[06:14:13] <njn> hmm, maybe I need RefCell
[06:16:33] *** Joins: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp)
[06:17:16] *** Quits: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[06:20:34] *** Joins: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp)
[06:22:26] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[06:26:29] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[06:30:19] *** Quits: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp) (Quit: Textual IRC Client: www.textualapp.com)
[06:31:10] *** Joins: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp)
[06:33:36] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[06:33:36] -ghservo- [13servo] 15nnethercote opened issue #6282: LocalLayoutContexts leaked via LOCAL_CONTEXT_KEY 02http://git.io/vkjyr
[06:33:36] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[06:34:04] <njn> gw: I filed a PR ^^^ because I'm about to finish up for today and somebody might have some more insight overnight
[06:41:40] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[06:45:42] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[06:47:33] *** Joins: aravindavk (aravinda@moz-so4.f0d.244.121.IP)
[06:47:37] *** Joins: dstrbad (dstrbad@moz-smbt6v.cable.xnet.hr)
[06:51:22] *** Quits: ienzam (enzam@moz-fussc3.ca.comcast.net) (Ping timeout: 121 seconds)
[06:56:01] *** Quits: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp) (Ping timeout: 121 seconds)
[06:56:40] *** Joins: schnozzle (Mibbit@moz-juv.9o3.252.72.IP)
[06:58:17] *** Joins: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP)
[06:59:09] *** Quits: schnozzle (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:01:45] *** Joins: mib_jd2s7m (Mibbit@moz-juv.9o3.252.72.IP)
[07:03:10] *** Quits: nattokirai (nattokirai@moz-86b4bs.bitcat.net) (Connection closed)
[07:03:21] *** Joins: nattokirai (nattokirai@moz-86b4bs.bitcat.net)
[07:06:31] *** Quits: mib_jd2s7m (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:10:40] *** Quits: aravindavk (aravinda@moz-so4.f0d.244.121.IP) (Ping timeout: 121 seconds)
[07:10:53] *** Joins: aravindavk (aravinda@moz-m6j.f0d.244.121.IP)
[07:16:11] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Ping timeout: 121 seconds)
[07:16:24] *** Joins: akiss (akiss@moz-uli0pr.pool.digikabel.hu)
[07:23:12] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[07:27:15] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[07:30:38] *** Joins: Ms2ger (Ms2ger@moz-vbh.07m.182.91.IP)
[07:31:47] *** Quits: akiss (akiss@moz-uli0pr.pool.digikabel.hu) (Ping timeout: 121 seconds)
[07:40:53] *** darkowlzz|afk is now known as darkowlzz
[07:42:20] *** Joins: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp)
[07:43:06] *** Joins: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net)
[07:48:59] *** Joins: akiss (akiss@moz-ci925s.inf.u-szeged.hu)
[07:51:13] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:55:34] *** Quits: waffles (Wafflespean@moz-4e9.43b.136.123.IP) (Quit: C'yall later... :))
[07:57:32] *** Joins: eddyb (eddyb@moz-2fd.hlc.26.188.IP)
[07:58:21] *** Quits: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net) (Client exited)
[07:59:10] *** Quits: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com) (Ping timeout: 121 seconds)
[08:06:34] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (RecvQ exceeded)
[08:06:44] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[08:07:21] *** Quits: nattokirai (nattokirai@moz-86b4bs.bitcat.net) (Ping timeout: 121 seconds)
[08:08:02] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[08:08:02] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 14252a40f to 14907c051: 02http://git.io/veWu4
[08:08:02] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[08:08:03] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[08:08:03] -ghservo- [13servo] 15bors-servo pushed 2 new commits to 06tmp: 02http://git.io/vIeTC
[08:08:03] -ghservo- 13servo/06tmp 147e29da7 15Jinwoo Song: WebSocket constructor should not panic...
[08:08:03] -ghservo- 13servo/06tmp 1413a0eba 15bors-servo: Auto merge of #6086 - Jinwoo-Song:websocket_construct_fix, r=Ms2ger...
[08:08:03] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[08:08:04] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[08:08:04] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14252a40f to 1413a0eba: 02http://git.io/A9I6iA
[08:08:04] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[08:15:29] *** Joins: mib_jnbq5a (Mibbit@moz-juv.9o3.252.72.IP)
[08:15:47] *** Quits: mib_jnbq5a (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:15:56] *** Joins: eibwen (eibwen@moz-7h1.o4b.231.217.IP)
[08:18:49] *** Quits: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp) (Ping timeout: 121 seconds)
[08:21:37] *** Joins: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp)
[08:23:56] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[08:28:04] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[08:28:06] *** Quits: eibwen (eibwen@moz-7h1.o4b.231.217.IP) (Ping timeout: 121 seconds)
[08:29:49] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[08:34:24] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[08:34:32] *** Quits: akiss (akiss@moz-ci925s.inf.u-szeged.hu) (Ping timeout: 121 seconds)
[08:36:51] *** Quits: moa (Cedric@moz-af6r18.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[08:49:43] *** Joins: moa (Cedric@moz-5q0u7t.abo.wanadoo.fr)
[08:50:03] *** darkowlzz is now known as darkowlzz|afk
[08:52:45] *** darkowlzz|afk is now known as darkowlzz
[08:53:15] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[08:53:15] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 1413a0eba to 14907c051: 02http://git.io/veWu4
[08:53:15] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[08:53:16] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[08:53:16] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vIeZI
[08:53:16] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[08:55:38] *** darkowlzz is now known as darkowlzz|afk
[09:00:56] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:04:16] *** Joins: till (till@moz-n4nh2a.adsl.alicedsl.de)
[09:06:32] *** Quits: acgtyrant (acgtyrant@moz-ldn.4sk.186.39.IP) (Ping timeout: 121 seconds)
[09:08:58] *** Quits: zmike_ (discomfitor@moz-3ctsh7.ocn.ne.jp) (Ping timeout: 121 seconds)
[09:10:47] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[09:20:45] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[09:24:42] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[09:24:44] *** Quits: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[09:24:48] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[09:26:47] *** Joins: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp)
[09:27:14] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[09:28:46] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[09:30:04] *** Quits: dstrbad (dstrbad@moz-smbt6v.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[09:33:08] *** Quits: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net) (Connection closed)
[09:33:45] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[09:33:45] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vIeZI
[09:33:45] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[09:33:50] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[09:33:50] -ghservo- [13servo] 15bors-servo closed pull request #6251: Only count outline width in overflow calculation if outline style is active. (06master...06fix-overflow) 02http://git.io/vkDb3
[09:33:50] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[09:39:53] *** Joins: zmike_ (discomfitor@moz-mfl.g5u.215.61.IP)
[09:43:29] *** Joins: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net)
[09:43:38] *** Joins: waffles (Wafflespean@moz-4e9.43b.136.123.IP)
[09:43:44] *** Quits: waffles (Wafflespean@moz-4e9.43b.136.123.IP) (Connection closed)
[09:44:03] *** Joins: waffles (Wafflespean@moz-4e9.43b.136.123.IP)
[09:46:53] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[09:47:52] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[09:48:21] *** Quits: waffles (Wafflespean@moz-4e9.43b.136.123.IP) (Quit: C'yall later... :))
[09:48:53] *** jandem-away is now known as jandem
[09:49:21] *** Joins: ray (bernhard@moz-vsafmp.dynamic.surfer.at)
[09:50:50] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[09:52:10] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[09:53:07] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[09:58:30] *** Quits: tglman (tglman@moz-l8btep.as13285.net) (Ping timeout: 121 seconds)
[09:59:28] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[10:02:36] *** Quits: slyu (slyu@moz-aj9ejj.HINET-IP.hinet.net) (A TLS packet with unexpected length was received.)
[10:08:12] *** Quits: njn (chatzilla@moz-c6c476.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 41.0a1/20150531163607])
[10:18:44] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[10:20:38] *** AutomatedTester|AFK is now known as AutomatedTester
[10:23:12] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[10:25:27] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[10:28:33] *** Joins: tglman (tglman@moz-5tn.5e0.117.94.IP)
[10:29:14] *** Joins: fkaa_ (tundmatu@moz-501od2.business.telia.com)
[10:29:31] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[10:30:14] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[10:30:26] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[10:32:34] *** Quits: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[10:36:16] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[10:38:39] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[10:41:09] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[10:41:47] *** Joins: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl)
[10:42:42] *** Joins: dstrbad (dstrbad@moz-1dd912.dsl.iskon.hr)
[10:42:50] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[10:43:46] *** Quits: till (till@moz-n4nh2a.adsl.alicedsl.de) (A TLS packet with unexpected length was received.)
[10:49:02] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[10:50:30] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[10:50:36] *** Joins: till (till@moz-n4nh2a.adsl.alicedsl.de)
[10:51:39] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[10:52:27] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[10:54:14] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[10:54:33] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[10:54:34] *** Quits: tglman (tglman@moz-5tn.5e0.117.94.IP) (Ping timeout: 121 seconds)
[10:56:05] *** Joins: tglman (tglman@moz-5tn.5e0.117.94.IP)
[10:56:08] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[10:56:29] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[10:57:00] *** Joins: jga (jga@moz-hs0.t1q.244.77.IP)
[11:00:31] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Ping timeout: 121 seconds)
[11:08:16] *** Quits: tomaka (Pierre@moz-ppjd78.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[11:08:45] *** Quits: dstrbad (dstrbad@moz-1dd912.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[11:10:49] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[11:10:52] *** Joins: tomaka (Pierre@moz-ppjd78.abo.wanadoo.fr)
[11:20:42] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[11:21:02] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Connection closed)
[11:26:12] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[11:26:31] *** AutomatedTester is now known as AutomatedTester|AFK
[11:30:20] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[11:30:22] *** Joins: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP)
[11:41:50] *** Joins: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net)
[11:42:33] *** Joins: bdero (bran@moz-uiog92.biz.rr.com)
[11:45:08] *** Quits: tglman (tglman@moz-5tn.5e0.117.94.IP) (Ping timeout: 121 seconds)
[11:55:44] *** Quits: firebot (firebot@moz-pku4c8.glob.com.au) (Quit: I was told to shutdown by bolg. :-( )
[12:02:18] *** Joins: firebot (firebot@moz-pku4c8.glob.com.au)
[12:07:37] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[12:11:27] *** Quits: aravindavk (aravinda@moz-m6j.f0d.244.121.IP) (Ping timeout: 121 seconds)
[12:11:51] *** Quits: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl) (Client exited)
[12:11:55] *** Quits: nicknikolov (nicknikolov@moz-tlf.1cp.223.158.IP) (Quit: Leaving...)
[12:11:57] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[12:19:49] <jga> jdm: sorry I kind of hijacked #6135 , I have some on going work related to that code and would be good to have it commited so I can make further progress
[12:19:49] <crowbot1> Issue #6135: Implement attribute getter of Location #5591  - https://github.com/servo/servo/pull/6135
[12:20:05] *** Quits: bdero (bran@moz-uiog92.biz.rr.com) (Ping timeout: 121 seconds)
[12:21:00] *** Joins: duncan (paul@moz-9vabq7.sgnwmi.sbcglobal.net)
[12:21:52] *** Quits: zmike_ (discomfitor@moz-mfl.g5u.215.61.IP) (Ping timeout: 121 seconds)
[12:22:36] *** Quits: till (till@moz-n4nh2a.adsl.alicedsl.de) (A TLS packet with unexpected length was received.)
[12:23:08] *** Joins: tglman (tglman@moz-l8btep.as13285.net)
[12:26:57] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[12:27:06] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[12:30:33] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[12:31:04] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[12:33:07] *** Quits: fkaa_ (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[12:34:53] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Ping timeout: 121 seconds)
[12:38:33] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[12:40:06] *** Quits: je_julie (uid29643@moz-2q4j9e.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[12:44:55] *** Joins: jschuster (schuster@moz-p3jtsp.ma.comcast.net)
[12:45:24] *** Quits: jga (jga@moz-hs0.t1q.244.77.IP) (Ping timeout: 121 seconds)
[12:46:57] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[12:52:54] *** Joins: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl)
[12:52:55] *** Joins: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca)
[13:02:20] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[13:02:39] *** AutomatedTester|AFK is now known as AutomatedTester
[13:08:07] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[13:08:46] *** Quits: moa (Cedric@moz-5q0u7t.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[13:11:52] *** Joins: adu (ajr@moz-vd1fau.fios.verizon.net)
[13:12:42] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[13:15:17] *** Joins: bdero (bran@moz-uiog92.biz.rr.com)
[13:15:42] *** Joins: aravindavk (aravinda@moz-8es.oi0.167.122.IP)
[13:16:50] *** Joins: bdero1 (bran@moz-uiog92.biz.rr.com)
[13:16:56] *** Quits: bdero (bran@moz-uiog92.biz.rr.com) (Connection closed)
[13:23:14] *** Joins: till (till@moz-n4nh2a.adsl.alicedsl.de)
[13:24:07] *** Quits: playjax (chatzilla@moz-bqrtim.optusnet.com.au) (Connection closed)
[13:26:18] *** Joins: jdm (jdm@moz-mu9.06r.98.75.IP)
[13:26:18] *** ChanServ sets mode: +qo jdm jdm
[13:26:48] *** Joins: morton (Mibbit@moz-juv.9o3.252.72.IP)
[13:27:38] *** Quits: till (till@moz-n4nh2a.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[13:27:43] *** Joins: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at)
[13:28:35] *** Quits: morton (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:30:30] <Ms2ger> Morning jdm 
[13:30:41] <jdm> view halloo!
[13:31:26] *** Joins: till (till@moz-n4nh2a.adsl.alicedsl.de)
[13:31:50] *** Quits: dinfuehr (dinfuehr@moz-rb39fm.highway.telekom.at) (Ping timeout: 121 seconds)
[13:36:22] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[13:38:36] *** Joins: psd (psd@moz-li207d.mtnl.net.in)
[13:45:28] *** Quits: aravindavk (aravinda@moz-8es.oi0.167.122.IP) (Ping timeout: 121 seconds)
[13:49:58] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[13:51:31] *** Quits: cakecatz (cakecatz@moz-u6p4rc.so-net.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[13:53:30] *** Joins: Witcher (Witcher@moz-65s.g1n.108.213.IP)
[13:56:04] *** Joins: cornelius (Mibbit@moz-juv.9o3.252.72.IP)
[13:57:42] *** Quits: jdm (jdm@moz-mu9.06r.98.75.IP) (Quit: )
[13:59:12] *** Joins: steveklabnik (root@moz-fft.uo8.55.45.IP)
[13:59:38] *** Joins: jdm (jdm@moz-mu9.06r.98.75.IP)
[13:59:38] *** ChanServ sets mode: +qo jdm jdm
[13:59:46] *** Quits: cornelius (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:04:39] *** Joins: aravindavk (aravinda@moz-8es.oi0.167.122.IP)
[14:13:12] *** Joins: hatman (Mibbit@moz-juv.9o3.252.72.IP)
[14:13:43] *** Quits: hatman (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:16:16] *** Quits: aravindavk (aravinda@moz-8es.oi0.167.122.IP) (Ping timeout: 121 seconds)
[14:21:16] *** Quits: bogdan_maris (Instantbird@moz-662.esi.231.62.IP) (Client exited)
[14:22:54] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:26:04] *** Quits: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl) (Client exited)
[14:38:10] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[14:38:10] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vIfLq
[14:38:10] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[14:38:11] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[14:38:11] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vIfLY
[14:38:11] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[15:09:37] *** Quits: jdm (jdm@moz-mu9.06r.98.75.IP) (Quit: )
[15:09:47] *** Joins: waffles (Wafflespean@moz-4e9.43b.136.123.IP)
[15:13:45] *** Joins: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca)
[15:20:44] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[15:23:40] *** Quits: Caspy7 (chatzilla@moz-tkogmh.stlsmo.sbcglobal.net) (Ping timeout: 121 seconds)
[15:28:22] *** Joins: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp)
[15:31:20] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[15:31:20] -ghservo- [13rust-core-text] 15metajack opened pull request #38: Use modern crate naming conventions. (06master...06modern-conventions) 02http://git.io/vIfgQ
[15:31:20] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[15:36:09] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[15:36:09] -ghservo- [13rust-cgl] 15metajack opened pull request #8: Fix license info in Cargo metadata. (06master...06modern-conventions) 02http://git.io/vIfVq
[15:36:09] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[15:38:04] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[15:38:04] -ghservo- [13io-surface-rs] 15metajack opened pull request #30: Use modern naming conventions. (06master...06modern-conventions) 02http://git.io/vIfws
[15:38:04] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[15:39:18] *** Joins: jdm (jdm@moz-qo7lj6.ckpj.s0pt.0450.2001.IP)
[15:39:18] *** ChanServ sets mode: +qo jdm jdm
[15:40:57] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[15:40:57] -ghservo- [13cgl-rs] 15jdm pushed 2 new commits to 06master: 02http://git.io/vIfrN
[15:40:57] -ghservo- 13cgl-rs/06master 148c257b5 15Jack Moffitt: Fix license info in Cargo metadata.
[15:40:57] -ghservo- 13cgl-rs/06master 1495aa323 15Josh Matthews: Merge pull request #8 from metajack/modern-conventions...
[15:40:57] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[15:41:12] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[15:41:12] -ghservo- [13core-text-rs] 15jdm pushed 2 new commits to 06master: 02http://git.io/vIfoU
[15:41:12] -ghservo- 13core-text-rs/06master 1487015a1 15Jack Moffitt: Use modern crate naming conventions.
[15:41:12] -ghservo- 13core-text-rs/06master 1454080aa 15Josh Matthews: Merge pull request #38 from metajack/modern-conventions...
[15:41:12] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[15:41:37] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[15:41:37] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 14afb4f66 to 14610de77: 02http://git.io/veWu4
[15:41:37] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[15:41:38] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[15:41:38] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14afb4f66 to 14ccfe29d: 02http://git.io/A9I6iA
[15:41:38] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[15:42:27] *** Joins: gamakichi (Mibbit@moz-juv.9o3.252.72.IP)
[15:43:07] *** Quits: gamakichi (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:49:24] <mbrubeck> frewsxcv's squash pic in https://github.com/servo/servo/pull/6279#issuecomment-108668085 is ridiculously large in gmail.
[15:49:25] <crowbot1> PR #6279: Add flake8 to the tidy process for Python files - https://github.com/servo/servo/pull/6279
[15:50:35] <Ms2ger> What are those anyway?
[15:51:17] <frewsxcv> lol
[15:51:53] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[15:51:53] -ghservo- [13servo] 15mbrubeck opened pull request #6283: Upgrade android-rs-glue (06master...06linkargs) 02http://git.io/vIf1A
[15:51:53] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[15:52:10] <frewsxcv> Ms2ger: squashes
[15:52:21] <Ms2ger> Oh right, I was thinking of publishing twis today
[15:52:31] <Ms2ger> Anyone have the script for new contributors?
[15:55:13] <Manishearth> Ms2ger: its on the wiki. twis wiki i think
[15:56:20] <Ms2ger> Found it
[15:57:10] *** Joins: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com)
[15:58:36] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Quit: leaving)
[16:02:32] *** Joins: ienzam (enzam@moz-fussc3.ca.comcast.net)
[16:03:45] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[16:06:36] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[16:09:19] *** Joins: mib_4qxwo5 (Mibbit@moz-juv.9o3.252.72.IP)
[16:14:08] *** AutomatedTester is now known as AutomatedTester|AFK
[16:14:41] *** Joins: jga (jga@moz-hs0.t1q.244.77.IP)
[16:17:19] <Ms2ger> https://github.com/servo/blog.servo.org/pull/19 needs work still, I'm heading off for most of the night, though
[16:20:00] <Manishearth> Ms2ger: why does my post get a mention? :D
[16:20:07] *** Joins: pcwalton (pcwalton@moz-f2m.ebe.216.216.IP)
[16:20:07] *** ChanServ sets mode: +o pcwalton
[16:20:20] <Manishearth> I'll add a link to njns post and finish up the twis
[16:20:52] *** Quits: bdero1 (bran@moz-uiog92.biz.rr.com) (Ping timeout: 121 seconds)
[16:21:00] <Manishearth> or maybe not, I'm tired and still at work (amazing discovery that may simplify my entire project a LOT, too hyped to go back)
[16:21:26] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[16:21:26] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vIfoW
[16:21:26] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[16:21:28] <Savago> yay! Got rust (specific servo required hash) built for Raspberry Pi 2. Only took 8hs to do the compile. :-)
[16:21:30] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[16:21:30] -ghservo- [13servo] 15bors-servo closed pull request #6279: Add flake8 to the tidy process for Python files (06master...06flake8) 02http://git.io/vkhDy
[16:21:30] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[16:21:54] <Savago> pcwalton: thanks for the instructions on https://github.com/servo/servo/wiki/Building-on-ARM-desktop-Linux
[16:22:04] <pcwalton> no problem
[16:22:22] <Savago> perhaps we could add there how to create a swap file?
[16:22:35] <Savago> (i.e. a temporary file to be used as a swap area)
[16:22:35] <pcwalton> yeah, feel free to edit it
[16:22:51] <pcwalton> fallocate -l 2G /swap && mkswap /swap && swapon /swap
[16:22:53] <pcwalton> something like that
[16:22:58] <Manishearth> Savago: :D
[16:23:32] <Savago> pcwalton: Iâ€™m old school, used dd to create the file. ;-)
[16:23:34] <pcwalton> BTW, my current hypothesis is that my style recalc test case is swamping my the L2 cache on my ARM SoC
[16:23:50] <pcwalton> which is why the scaling is relatively bad
[16:24:04] <pcwalton> especially when going from 4 --> 8
[16:24:05] <Savago> dd if=/dev/zero of=file.swap bs=1024K count=2000
[16:24:14] <pcwalton> fallocate will be faster since it doesn't have to write zeroes
[16:24:17] <pcwalton> but it doesn't really matter :)
[16:24:19] <pcwalton> if you look at http://www.hardkernel.com/main/products/prdt_info.php?g_code=G141351880955&tab_idx=2
[16:24:40] <pcwalton> the little cores have only 512K L2 cache compared to 2MB L2 for the big cores
[16:24:49] <Savago> ouch!
[16:24:52] <pcwalton> compare to 6MB L3 cache on my Core i7 desktop
[16:25:05] <pcwalton> that 2MB L2 vs. 6 MB L3 may make the difference
[16:25:12] <pcwalton> not sure though, I'm going to try cachegrind
[16:25:28] <Manishearth> Wow
[16:25:39] <Manishearth> Time taken to do a simple task in C 100 times: 6 ms
[16:25:51] <Savago> pcwalton: you still see the need to refactor the display list creating code? IIRC you commented about it last week.
[16:25:52] <Manishearth> Same task in Java: 2597 ms
[16:25:57] <BunnyServ> Manishearth: And Rust?
[16:26:09] <Savago> Manishearth: jvm is heavy.
[16:26:19] <Manishearth> sorry no Rust here. I might try and hook it up, but getting Java and C++ to talk to each other is painful in itself
[16:26:20] <pcwalton> sounds like you're hitting some sort of pathological case in Java, or measuring its startup time, or something
[16:26:24] <Manishearth> Savago: yeah, but this is too much
[16:26:31] <Manishearth> pcwalton: no, it's the indirection of the bitmap API
[16:26:35] <Manishearth> android stuff
[16:26:38] <Savago> I would bet on startup time.
[16:26:38] <pcwalton> the Java HotSpot compiler is really good
[16:26:41] <pcwalton> oh, you're on Android?
[16:26:44] <Manishearth> Savago: not startup
[16:26:48] <pcwalton> yeah, Dalvik is more or less garbage
[16:26:56] <Manishearth> I'll talk more when I get back, got a cab to catch
[16:26:57] <pcwalton> (which is why Google is replacing it with ART)
[16:27:06] <Savago> makes wonder why up to this days java is used in android.
[16:27:19] <pcwalton> backwards compatibility
[16:27:27] <Savago> pcwalton: ART? Is that related to the new Sky project?
[16:27:38] <pcwalton> Savago: http://en.wikipedia.org/wiki/Android_Runtime
[16:27:44] <Savago> Humâ€¦ ./mach build works on raspbian. :-)
[16:28:51] <eddyb> pcwalton: I still can't switch to ART without Google's own apps crashing
[16:28:57] <pcwalton> weird
[16:28:59] <eddyb> it's probably CM's fault, but still annoying
[16:29:46] <pcwalton> Dalvik was really bad -- it took a long time for them to even move to a JIT as opposed to an interpreter, it uses conservative GC...
[16:30:15] <aweinstock> I'm in the process of trying to update glutin, and I'm getting the error mentioned in #6042
[16:30:16] <crowbot1> Issue #6042: glx::MakeCurrent failed - https://github.com/servo/servo/issues/6042
[16:30:35] <pcwalton> if you want reasonable performance on Android either write in native code, or stick to the parts written in C like Skia
[16:30:46] <pcwalton> even JS should be faster than Dalvik
[16:31:17] <Savago> I would hope for improvements coming from Sky: https://www.youtube.com/watch?v=PnIWl33YMwA
[16:31:28] <Savago> (even though is just an experiment ATM).
[16:31:35] <pcwalton> (unfortunately the UI layer requires that you go through Java, so you have to have Java in there no matter what)
[16:31:47] <pcwalton> (even if it's just to open a GL window)
[16:31:47] <aweinstock> branches containing the progress on updating glutin: https://github.com/aweinstock314/glutin/tree/rebase-to-upstream-70c88cf18f1db5aa7e2a49eb2cd7f4cb449da5d4 and https://github.com/aweinstock314/servo/tree/update-glutin
[16:32:23] <pcwalton> it may be that our data structures need to go on a serious memshrink diet to work well on ARM
[16:32:28] <pcwalton> (paging njn) :)
[16:32:42] <pcwalton> which I would not be terribly surprised by, given that this was Leo's result
[16:33:00] <Savago> pcwalton: is there something similar to pahole for inspecting padding in rust structs?
[16:33:21] <pcwalton> I think the Rust compiler may have some sort of instrumentation for this? I forget.
[16:33:31] <pcwalton> there was something for wasted space due to unused enum variants
[16:34:31] <pcwalton> it makes sense -- if you're blowing out your L2 cache then every single core is going to be contending on main memory
[16:34:35] <nox> What's blocking the android-rs-glue upgrade btw?
[16:34:54] <pcwalton> main memory on the Samsung Exynos 5422 is only a 64-bit bus according to that block diagram
[16:34:57] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[16:34:57] -ghservo- [13servo] 15fbau123 opened pull request #6284: Fix #6242 testbinding add specialoperations (06master...066242-testbinding-add-specialoperations) 02http://git.io/vIJvi
[16:34:57] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[16:35:00] <pcwalton> that's gonna hurt
[16:35:02] *** ahal is now known as ahal|afk
[16:35:17] <mbrubeck> nox: I just submitted a PR to upgrade to android-rs-glue master... want to r+ it? :)
[16:35:17] <mbrubeck> https://github.com/servo/servo/pull/6283
[16:35:18] <crowbot1> PR #6283: Upgrade android-rs-glue - https://github.com/servo/servo/pull/6283
[16:35:35] <nox> Yeah that was my question.
[16:35:52] <nox> Better to keep Homu busy.
[16:36:37] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[16:36:37] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vIJfa
[16:36:37] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[16:36:38] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[16:36:38] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vIJfV
[16:36:38] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[16:36:39] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[16:36:39] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vIJfV
[16:36:39] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[16:36:59] <pcwalton> what I'd give for Larrabee's 1024-bit memory ring bus
[16:37:56] <Savago> damnâ€¦ first compiler error on components/plugins/lib.rs. For what is it used?
[16:38:29] *** Quits: ray (bernhard@moz-vsafmp.dynamic.surfer.at) (Quit: Leaving.)
[16:39:53] <mbrubeck> Savago: plugins is where our syntax extensions and other compiler plugins live.
[16:40:18] <mbrubeck> Savago: So it has the greatest concentration of unstable code.
[16:41:04] <Savago> mbrubeck: oh boy. :-|
[16:41:27] *** Joins: nefzaoui (nefzaoui@moz-083.5ub.228.41.IP)
[16:44:20] *** Joins: bholley (bholley@moz-qpv0dk.ca.comcast.net)
[16:44:38] <pcwalton> Savago: are you on the right revision of Rust?
[16:44:56] <pcwalton> make sure that your revision of Rust matches rust-snapshot-hash
[16:45:01] <pcwalton> in the servo source tree
[16:45:40] *** Quits: jdm (jdm@moz-qo7lj6.ckpj.s0pt.0450.2001.IP) (A TLS packet with unexpected length was received.)
[16:46:20] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[16:46:20] *** ChanServ sets mode: +qo jdm jdm
[16:46:21] <Savago> pcwalton: bingo! I checked out b301e02 and rust-snapshot points to 474c6e.
[16:46:26] <pcwalton> oops
[16:46:30] <pcwalton> you'll have to rebuild rust from scratch :(
[16:46:31] <Savago> Well, lets wait another 8hs...
[16:46:32] <pcwalton> sorry
[16:46:36] <Savago> :-)
[16:46:49] <pcwalton> did we just do a rustup?
[16:46:55] <SimonSapin> Isnâ€™t compile-time unsafe code "less bad" than runtime unsafe code, since it doesnâ€™t (?) get untrusted input?
[16:47:12] <pcwalton> yes, I would agree with that
[16:47:14] <Savago> pcwalton better to update the hash in the article.
[16:47:27] <pcwalton> Savago: yeah, sorry, I'm working on an old version of Servo and I think we just did a rustup or something
[16:47:36] *** Quits: tomaka (Pierre@moz-ppjd78.abo.wanadoo.fr) (Quit: Leaving)
[16:47:59] <pcwalton> I need to keep bugging the core team to support ARM desktop Linux :)
[16:48:02] <pcwalton> officially
[16:48:05] <pcwalton> it's becoming a really important platform
[16:48:13] <Savago> nah, building rust helps to build the character.
[16:48:33] *** Quits: pcwalton (pcwalton@moz-f2m.ebe.216.216.IP) (Client exited)
[16:49:25] *** Quits: jga (jga@moz-hs0.t1q.244.77.IP) (Ping timeout: 121 seconds)
[16:50:28] *** Joins: tomaka (Pierre@moz-ppjd78.abo.wanadoo.fr)
[16:52:47] <jdm> Savago: are you building on the rPi or something?
[16:53:22] <Savago> jdm: yep, rPi2.
[16:53:43] *** Joins: jdm_ (jdm@moz-i5m.05u.207.66.IP)
[16:54:06] <Manishearth> Savago: so I was basically timing the difference between Java Bitmap.writePixel() and directly writing to the pixel buffer in C++
[16:54:25] <Manishearth> lots of other factors there
[16:54:47] *** Quits: jwilm (jwilm@moz-1rin99.hfc.comcastbusiness.net) (Quit: Leaving...)
[16:54:57] <Savago> Manishearth: once upon a time, I looked into java source code. Any syscall would go through 7-8 function calls until getting to the POSIX one.
[16:55:02] <Manishearth> haha
[16:55:18] <Savago> It is true. So Iâ€™m not surprised if it is 10x slower than C.
[16:55:22] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (Connection closed)
[16:55:25] <Manishearth> Savago: https://github.com/Manishearth/ndk-scratch/blob/lock_forever/app/src/main/java/com/example/hellojni/DualBitmap.java https://github.com/Manishearth/ndk-scratch/blob/lock_forever/app/src/main/jni/layer.cpp
[16:56:07] <Manishearth> really crappy code (also there's a stray escape char there for some reason, probably got caught in git add), but it gives a clean interface for modifying a bitmap from both Java and C++
[16:57:25] <Savago> Manishearth: did you try to do the same thing in Rust and measured the time it took?
[16:57:31] <Savago> (it would be interesting).
[16:58:17] <Manishearth> So yesterday I had a presentation, and it turned out that I had been doing stuff wrong due to a miscommunication. So I was told a bunch of constraints that we had to work with. But ... I had a hunch about those, and there was an assumption behind those constraints, so I investigated today and that assumption turned out to be wrong. Which significantly simplifies the situation and makes it really easy fo
[16:58:23] <Manishearth> r me to progress on my project
[16:58:26] <Manishearth> Savago: will do maybe.
[16:58:28] <Manishearth> Savago: though. this is just array writes.
[16:58:42] <Manishearth> It's going to be the same as C++ really :)
[16:58:56] <Savago> Indeed.
[16:58:58] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[16:58:58] *** ChanServ sets mode: +qo jdm jdm
[16:59:26] *** Joins: jwilm (jwilm@moz-1rin99.hfc.comcastbusiness.net)
[16:59:40] *** Quits: jdm_ (jdm@moz-i5m.05u.207.66.IP) (Ping timeout: 121 seconds)
[17:00:09] <Savago> jdm: one advantage of rpi2 is that supposedly opengl should work. (thus making possible to run servo for real)
[17:00:48] *** Joins: jdm_ (jdm@moz-ta4010.ckpj.s0pt.0450.2001.IP)
[17:04:05] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (Ping timeout: 121 seconds)
[17:04:26] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[17:06:07] *** Quits: psd (psd@moz-li207d.mtnl.net.in) (Connection closed)
[17:06:50] *** Joins: bdero (bran@moz-uiog92.biz.rr.com)
[17:07:05] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:07:06] *** ChanServ sets mode: +o brson
[17:07:45] *** Joins: wilfredh (uid159@moz-md9so9.brockwell.irccloud.com)
[17:09:30] *** Joins: MrZeus (MrZeus@moz-jf4304.skybroadband.com)
[17:11:51] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Connection closed)
[17:12:17] *** Joins: jevin (jevin@moz-sra.ovp.12.72.IP)
[17:12:45] *** Quits: bholley (bholley@moz-qpv0dk.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:14:06] *** Quits: mib_4qxwo5 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:15:29] *** chmanchester|afk is now known as chmanchester
[17:18:22] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[17:18:22] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vIJfV
[17:18:22] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[17:18:26] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[17:18:26] -ghservo- [13servo] 15bors-servo closed pull request #6283: Upgrade android-rs-glue (06master...06linkargs) 02http://git.io/vIf1A
[17:18:26] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[17:19:23] *** Quits: ienzam (enzam@moz-fussc3.ca.comcast.net) (Ping timeout: 121 seconds)
[17:20:58] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:20:58] *** ChanServ sets mode: +o pcwalton
[17:21:55] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[17:26:09] <mbrubeck> mmatyas: Android Servo is fixed on master now, if you're still interested in playing with that.
[17:33:20] *** Quits: jdm_ (jdm@moz-ta4010.ckpj.s0pt.0450.2001.IP) (A TLS packet with unexpected length was received.)
[17:33:46] *** Joins: jdm (jdm@moz-ta4010.ckpj.s0pt.0450.2001.IP)
[17:33:46] *** ChanServ sets mode: +qo jdm jdm
[17:34:46] <mmatyas> mbrubeck, great, I'll try it out!
[17:35:37] *** Joins: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca)
[17:35:52] *** Joins: mwu (mwu@moz-lu71bu.oi2i.p882.0085.2601.IP)
[17:39:20] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[17:40:54] *** Quits: ahal|afk (ahal@moz-b8e0a0.cpe.pppoe.ca) (Ping timeout: 121 seconds)
[17:42:47] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[17:43:46] *** Joins: jviereck (Adium@moz-s67nbh.rgd2.9kg1.0101.2620.IP)
[17:45:35] *** Quits: jviereck (Adium@moz-s67nbh.rgd2.9kg1.0101.2620.IP) (Quit: Leaving.)
[17:46:24] *** Joins: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com)
[17:46:29] *** Joins: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com)
[17:46:57] *** Joins: jviereck1 (Adium@moz-l8ebtf.sfo1.mozilla.com)
[17:47:00] *** Quits: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[17:47:19] *** Quits: jviereck1 (Adium@moz-l8ebtf.sfo1.mozilla.com) (Quit: Leaving.)
[17:49:47] *** Joins: ahal|afk (ahal@moz-b8e0a0.cpe.pppoe.ca)
[17:55:56] *** darkowlzz|afk is now known as darkowlzz
[17:59:02] *** BunnyServ is now known as WindowsBunny
[18:00:26] *** ahal|afk is now known as ahal
[18:01:10] *** Joins: jviereck (Adium@moz-8imlrj.rgd2.9kg1.0101.2620.IP)
[18:01:10] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[18:05:15] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[18:05:22] *** Joins: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca)
[18:07:26] *** Quits: waffles (Wafflespean@moz-4e9.43b.136.123.IP) (Quit: C'yall later... :))
[18:09:24] *** Joins: ienzam (enzam@moz-spq.4ra.239.216.IP)
[18:10:47] <pcwalton> fascinating
[18:11:04] <pcwalton> it doesn't look at first like L2 cache is the problem
[18:11:10] <pcwalton> rather, the problem may be L1 cache, in particular I-cache
[18:11:17] <pcwalton> properties::cascade wrecks the I-cache
[18:11:25] <eddyb> just pass -Os :P
[18:11:34] *** Joins: Boddlnagg (Patrick@moz-2biui2.dyn.telefonica.de)
[18:11:34] <pcwalton> that won't fix it
[18:11:38] <eddyb> (does clang even support -Os? what does it do?)
[18:11:40] <pcwalton> properties::cascade is hilariously large
[18:12:53] *** Quits: jviereck (Adium@moz-8imlrj.rgd2.9kg1.0101.2620.IP) (Quit: Leaving.)
[18:13:02] *** Joins: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com)
[18:13:31] *** Quits: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com) (Quit: Leaving.)
[18:15:16] <SimonSapin> pcwalton: is code loaded a function at a time?
[18:15:32] <SimonSapin> would it help to break up cascade in more functions?
[18:15:40] <pcwalton> not really, unfortunately
[18:15:59] <pcwalton> SimonSapin: at the CPU level, it's loaded X bytes at a time, where X is your cache line size
[18:16:26] <pcwalton> SimonSapin: 64 bytes per line is probably what my ARM board uses
[18:16:31] <pcwalton> so, it's loaded 64 bytes at a time
[18:17:06] <pcwalton> assuming this is actually the problem (I need to verify) the problem is that it's just plain too much code
[18:17:22] <pcwalton> the solution could be to try to make it a more interpreter-like approach whereby you use the same code to handle many properties
[18:17:32] <pcwalton> highly speculative though and I want to verify my findings before embarking on that
[18:18:22] <SimonSapin> pcwalton: I see. I designed this so that each property has its own type for values, but in Gecko itâ€™s a single AST-like type
[18:18:33] <pcwalton> SimonSapin: the L1 instruction cache on Cortex-A15 (a good moderate-high-end ARM chip) is only 32K, so it's easy to blow it out
[18:18:41] <pcwalton> 32K per core, I should mention
[18:19:50] <pcwalton> does anyone know offhand whether it's possible to restrict my cachegrind output to a certain call tree -- or, perhaps, a certain set of threads?
[18:20:09] <SimonSapin> I did this to take advantage of the type system and avoid things like `else { unreachable!() }`, but we could revisit that decision
[18:20:09] <pcwalton> I get a lot of DOM stuff (which obviously isn't interesting when looking at multicore scaling) clogging up my output
[18:20:13] <pcwalton> sure
[18:20:44] <Ms2ger> SimonSapin, avoiding `else { unreachable!() }` sounds like a very good idea :)
[18:21:34] <pcwalton> btw, properties::PropertyDeclaration::parse() also messes up the I-cache pretty bad, but that sounds less fixable
[18:21:41] <pcwalton> and also less critical
[18:21:56] <pcwalton> hmm, properties::cascade is so much code disassembling it crashes GDB
[18:21:58] <pcwalton> that seemsâ€¦ bad
[18:22:12] <pcwalton> oh, there it goes
[18:22:18] <pcwalton> yeah, it's 100K of code in that one function
[18:22:24] <pcwalton> that willâ€¦ not play well with your i-cache :)
[18:22:33] <pcwalton> switching to Thumb might help a bit on ARM
[18:23:11] <Ms2ger> Somebody please finish https://github.com/servo/blog.servo.org/pull/19 :)
[18:23:51] * mwu wonders how arm64 would do
[18:26:01] <mwu> jdm: about the const issues in tracing
[18:26:36] <mwu> the tracing api now wants a pointer to where the reference itself (*mut JSObject or JSVal) is stored
[18:26:58] <mwu> whereas before we just pointed directly to the GCThing
[18:28:15] <mwu> it stores the locations of where pointers to GCthings are stored
[18:29:06] <mwu> IIRC this is necessary for generational GC in order to keep track of pointers into the nursery
[18:29:27] <mwu> or something. don't know the details of this very well
[18:29:32] *** Joins: jga (jga@moz-hs0.t1q.244.77.IP)
[18:29:46] *** Joins: mib_bc877e (Mibbit@moz-juv.9o3.252.72.IP)
[18:29:52] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[18:29:52] -ghservo- [13servo] 15mbrubeck opened pull request #6285: Better command-line error handling (06master...06nofile) 02http://git.io/vIJFw
[18:29:52] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[18:30:02] <mwu> JSTraceable only operates on const self so that's where the cast comes from
[18:30:58] <Manishearth> Ms2ger: sorry, too tired today. tomorrow
[18:31:54] *** Quits: Ms2ger (Ms2ger@moz-vbh.07m.182.91.IP) (Quit: Leaving)
[18:32:00] *** Joins: Ms2ger (Ms2ger@moz-vbh.07m.182.91.IP)
[18:32:20] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[18:38:01] *** Quits: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[18:39:06] *** Joins: Jackneill (Jackneill@moz-bl9mla.pool.digikabel.hu)
[18:39:53] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[18:48:29] *** Joins: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net)
[18:48:50] <mwu> jdm: hmmm I guess I can stick Heap in an UnsafeCell to get a mutable reference in the reflector. don't know about the other cases though
[18:49:20] *** Quits: jga (jga@moz-hs0.t1q.244.77.IP) (Connection closed)
[18:50:06] *** Joins: ray (bernhard@moz-vsafmp.dynamic.surfer.at)
[18:51:08] <pcwalton> interestingâ€¦ matches::matches_simple_selector retires more instructions than properties::cascade (63M to 52M), but on ARM the ratio of time spent in the former to the latter is 1:6.5
[18:51:28] <pcwalton> more evidence of cache effects
[18:51:56] *** Joins: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com)
[18:52:32] <pcwalton> (or memory effects generally; the "dmb ish" could also be killing us)
[18:53:51] <pcwalton> on x86 Core i7 the imbalance is still there, but it's less: 1:2.92 ratio
[18:55:11] <pcwalton> that's some evidence toward the hypothesis that the memory hierarchy on the Core i7 is primarily what's responsible for the better parallel scaling
[18:55:37] *** Quits: bdero (bran@moz-uiog92.biz.rr.com) (Ping timeout: 121 seconds)
[18:55:45] *** Quits: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com) (Quit: Leaving.)
[18:59:06] *** AutomatedTester|AFK is now known as AutomatedTester
[19:00:08] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[19:00:08] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vIUkB
[19:00:08] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[19:00:10] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[19:00:10] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vIUkR
[19:00:10] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[19:03:16] *** Joins: bdero (bran@moz-uiog92.biz.rr.com)
[19:04:48] *** Joins: bdero1 (bran@moz-uiog92.biz.rr.com)
[19:04:51] *** Quits: bdero (bran@moz-uiog92.biz.rr.com) (Connection closed)
[19:10:38] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[19:10:38] -ghservo- [13io-surface-rs] 15metajack opened issue #31: IOSurface struct has a dtor which changes it's representation 02http://git.io/vIUqd
[19:10:38] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[19:12:02] <jack> r? https://github.com/servo/io-surface-rs/pull/30
[19:12:02] <crowbot1> PR #30: Use modern naming conventions. - https://github.com/servo/io-surface-rs/pull/30
[19:17:33] *** Joins: dbaron (dbaron@moz-7i8mdt.2rkg.9kg1.0101.2620.IP)
[19:19:58] <jack> pcwalton: So Arc<Flow> has not deref_mut
[19:20:09] <jack> Can I depend on the refcount being 1?
[19:20:46] <SimonSapin> jack: thereâ€™s Arc::make_unique that clones if it isnâ€™t
[19:21:18] <jack> SimonSapin: I think that wouldn't be good since the destructive write would be lost.
[19:22:21] *** chmanchester is now known as chmanchester|afk
[19:22:22] <jack> looks like make_unique is all it has ;(
[19:22:32] <jack> And there's no way to tell what hte refcount is.
[19:22:52] <SimonSapin> thereâ€™s std::rc::get_mut but IÂ donâ€™t see an Arc equivalent
[19:22:56] <jack> Or rather, I have no way to known whether it copied or not.
[19:23:01] <SimonSapin> probably itâ€™d be racy
[19:23:40] <jack> make_unique is already racy.
[19:23:52] <SimonSapin> oh, thereâ€™s alloc::arc::get_mut
[19:24:15] <SimonSapin> but apparently not reexported in std
[19:24:23] <SimonSapin> is it?
[19:25:18] <jack> i'm happy to use the alloc crate.
[19:25:29] <jack> I guess my concern is whether the refcount being 1 is something we can depend on.
[19:26:03] *** darkowlzz is now known as darkowlzz|afk
[19:27:57] *** Joins: dinfuehr (dinfuehr@moz-s3qe0m.highway.telekom.at)
[19:28:35] *** Quits: vodik (simon@moz-2hv.lpm.107.207.IP) (Ping timeout: 121 seconds)
[19:29:09] <eddyb> make_unique would need a variant returning Result or Cow for that to be easy to check
[19:29:50] *** Joins: dstrbad (dstrbad@moz-1dd912.dsl.iskon.hr)
[19:30:19] <eddyb> ah, get_mut returns Option so you can unwrap it
[19:30:34] *** Quits: jdm (jdm@moz-ta4010.ckpj.s0pt.0450.2001.IP) (A TLS packet with unexpected length was received.)
[19:30:59] *** Joins: jdm (jdm@moz-ta4010.ckpj.s0pt.0450.2001.IP)
[19:30:59] *** ChanServ sets mode: +qo jdm jdm
[19:32:16] <eddyb> jack: do you enforce something about the ownership of those Arc's that you expect a refcount of 1? AFAICT it's a tree, and you're doing fork-join over it, so subtrees wouldn't be shared?
[19:32:32] <jdm> mwu: I understand that JSTraceable provides you an &self; maybe we can change that.
[19:32:48] <jdm> otherwise maybe UnsafeCell is the solution
[19:32:50] <mwu> jdm: oh ok. I was thinking of doing that too, but I wasn't sure if that's a good idea
[19:32:54] <jack> eddyb: this is dealing with the root of the tree
[19:33:08] <jack> So it's no obviously a wrong assumption.
[19:33:12] <mwu> I'll try changing it and see what happens
[19:33:31] <mwu> worse case we have to stick all Heap<T> in UnsafeCell
[19:34:09] *** Quits: tglman (tglman@moz-l8btep.as13285.net) (Ping timeout: 121 seconds)
[19:34:14] <jdm> hence the original MutHeap idea
[19:34:41] <mwu> there's Heap<T> users who don't care about modifying the value after construction so it's awkward
[19:35:33] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[19:35:33] -ghservo- [13rust-mozjs] 15michaelwu opened issue #152: Implement AutoCheckCannotGC 02http://git.io/vIUct
[19:35:33] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[19:36:20] <jack> weird. this code works:
[19:36:20] <jack> https://github.com/servo/servo/blob/master/components/layout/construct.rs#L428-L445
[19:36:35] <jack> but if you s/FlowRef/Arc<Flow>/ it stops working with a borrow check error.
[19:36:52] <jack> the last highlighted line is apparently borrowing an already borrowed ref
[19:37:42] *** Joins: tglman (tglman@moz-l8btep.as13285.net)
[19:38:47] <jack> error: cannot borrow immutable borrowed content as mutable
[19:40:31] *** Joins: vodik (simon@moz-86ind4.dedicated.allstream.net)
[19:41:35] *** Quits: valentin (icecold@moz-9bn.d10.25.188.IP) (Quit: Leaving.)
[19:42:59] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[19:43:11] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[19:44:13] *** Joins: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca)
[19:46:15] *** Joins: dstrbad_ (dstrbad@moz-n7qh2u.dsl.iskon.hr)
[19:46:33] <nmatsakis> jack: can you past the error?
[19:46:34] <nmatsakis> *paste
[19:46:59] *** Joins: valentin (icecold@moz-9bn.d10.25.188.IP)
[19:46:59] <jack> https://www.irccloud.com/pastebin/fLrmhdJM/
[19:47:39] <jack> oh, maybe FlowRef didn't move by default.
[19:48:42] <nmatsakis> jack: I don't see that it impl's copy (FlowRef)
[19:48:46] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[19:48:53] *** Quits: dstrbad (dstrbad@moz-1dd912.dsl.iskon.hr) (Ping timeout: 121 seconds)
[19:49:20] <jack> Does unsafe_no_drop_flag affect it?
[19:49:53] <nmatsakis> no
[19:50:03] <nmatsakis> so this is finish(&mut self) from FlowContructionUtils being called?
[19:50:05] <jack> So that error happens when I add let mut inline_flow_ref = inline_flow_ref; at the start of the new scope. If I take that out the error is much shorter and has very little info.
[19:50:17] <jack> https://www.irccloud.com/pastebin/m6U5Iuez/
[19:50:23] <jack> that's the original error in its entirety
[19:50:40] *** AutomatedTester is now known as AutomatedTester|AFK
[19:50:47] *** Quits: valentin (icecold@moz-9bn.d10.25.188.IP) (Quit: Leaving.)
[19:50:53] *** Joins: valentin (icecold@moz-9bn.d10.25.188.IP)
[19:50:54] *** Parts: duncan (paul@moz-9vabq7.sgnwmi.sbcglobal.net) ()
[19:51:01] <nmatsakis> jack: is your modified code pushed?
[19:51:02] *** Quits: vodik (simon@moz-86ind4.dedicated.allstream.net) (Connection closed)
[19:51:27] <nmatsakis> jack: however, I'm guesing this is because you now have an Arc<Flow>
[19:51:31] <nmatsakis> jack: and that only gives you a &Flow
[19:51:37] <nmatsakis> jack:  but the method in question wants &mut Flow
[19:51:37] <jack> yes. should apply on your version cleanly
[19:51:47] <nmatsakis> i.e., the problem we talked about before?
[19:51:57] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[19:51:58] <nmatsakis> only in this case it doesn't look like it's meant to be unsafe magic code
[19:51:59] <jack> this is an automatic deref_mut?
[19:52:38] *** Joins: vodik (simon@moz-86ind4.dedicated.allstream.net)
[19:52:39] <nmatsakis> right, because as_inline is declared as:
[19:52:46] <nmatsakis> fn as_inline<'a>(&'a mut self) -> &'a mut InlineFlow
[19:53:12] <nmatsakis> does inline_flow_ref have to be in an Arc here?
[19:53:21] <nmatsakis> I'm going to guess not
[19:53:26] <nmatsakis> seeing as how it doesn't appear to escape
[19:53:38] <jack> probably right. I can pass by ref.
[19:53:42] <jack> I'll try that.
[19:53:50] <nmatsakis> yeah, or substitute a box, or something
[19:53:56] <nmatsakis> (Stack alloc feels best of course)
[19:54:00] *** Quits: dstrbad_ (dstrbad@moz-n7qh2u.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[19:56:10] *** Joins: dstrbad (dstrbad@moz-n7qh2u.dsl.iskon.hr)
[19:59:33] *** Joins: naudtov (naudtov@moz-3rgsah.hfc.comcastbusiness.net)
[20:00:02] *** Quits: tglman (tglman@moz-l8btep.as13285.net) (Ping timeout: 121 seconds)
[20:00:34] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[20:01:16] *** Quits: mukilan (mukilan@moz-inv.v1b.164.122.IP) (A TLS packet with unexpected length was received.)
[20:01:43] *** Quits: dstrbad (dstrbad@moz-n7qh2u.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[20:03:59] *** Quits: jdm (jdm@moz-ta4010.ckpj.s0pt.0450.2001.IP) (Connection closed)
[20:06:14] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[20:06:14] *** ChanServ sets mode: +qo jdm jdm
[20:06:32] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[20:09:22] *** AutomatedTester|AFK is now known as AutomatedTester
[20:09:58] *** Quits: dinfuehr (dinfuehr@moz-s3qe0m.highway.telekom.at) (Connection closed)
[20:10:19] *** Joins: dinfuehr (dinfuehr@moz-s3qe0m.highway.telekom.at)
[20:14:22] *** Quits: dinfuehr (dinfuehr@moz-s3qe0m.highway.telekom.at) (Ping timeout: 121 seconds)
[20:14:32] *** Parts: Boddlnagg (Patrick@moz-2biui2.dyn.telefonica.de) ()
[20:18:31] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (Connection closed)
[20:19:51] *** Quits: rohinpatel (rohinpatel@moz-ed0fdd.resnet.ubc.ca) (Ping timeout: 121 seconds)
[20:21:28] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[20:21:28] *** ChanServ sets mode: +qo jdm jdm
[20:30:06] <jdm> mwu: heh, I just saw bug 1171593
[20:30:09] <firebot> https://bugzil.la/1171593 â€” INVALID, mwu@mozilla.com â€” Replace JS_NewObjectWithGivenProto with JS_NewObject when there's no proto
[20:30:20] <mwu> jdm: yup. best way to resolve the question.
[20:30:51] <mwu> a wrong patch brings people over like nothing else
[20:36:20] *** Quits: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[20:37:19] *** Joins: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net)
[20:40:07] <Savago> hummâ€¦ what would make cargo to fail finding x11 (the crate, I mean)?
[20:41:14] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:42:53] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[20:46:27] *** Quits: adu (ajr@moz-vd1fau.fios.verizon.net) (Client exited)
[20:46:48] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[20:46:48] -ghservo- [13servo] 15frewsxcv opened pull request #6286: Bump rust-url version: 0.2.16 â†’ 0.2.35 (06master...06bump-url) 02http://git.io/vIU9c
[20:46:48] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[20:47:30] *** Quits: Witcher (Witcher@moz-65s.g1n.108.213.IP) (Ping timeout: 121 seconds)
[20:48:22] *** chmanchester|afk is now known as chmanchester
[20:48:39] * pcwalton wishes script didn't depend on style
[20:48:45] <pcwalton> I wish script didn't depend on anything, actually
[20:49:45] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[20:49:45] -ghservo- [13servo] 15frewsxcv opened issue #6287: Package errors during mach cargo-update 02http://git.io/vIUH8
[20:49:45] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[20:53:13] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[20:53:13] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 140a03dd4 to 140bbc282: 02http://git.io/veWu4
[20:53:13] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[20:53:14] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[20:53:14] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 140a03dd4 to 149b5a01e: 02http://git.io/A9I6iA
[20:53:14] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[20:53:15] * jdm too!
[20:53:19] <jack> so if i have impl Foo on Flow, and a foo: &mut Flow, I can't do foo.method()?
[20:53:25] <jack> Seems to be unable to find it.
[20:53:40] *** Joins: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com)
[20:53:57] *** Quits: till (till@moz-n4nh2a.adsl.alicedsl.de) (Quit: night)
[20:54:57] *** Quits: bdero1 (bran@moz-uiog92.biz.rr.com) (Ping timeout: 121 seconds)
[20:55:08] *** Quits: jviereck (Adium@moz-l8ebtf.sfo1.mozilla.com) (Quit: Leaving.)
[20:55:28] <mbrubeck> jack: That should work in general... is the Foo trait in scope? (`use Foo;`)
[20:55:52] <jack> It is.
[20:55:53] *** darkowlzz|afk is now known as darkowlzz
[20:56:11] <jack> error: no method named `add_new_child` found for type `&mut flow::Flow` in the current scope
[20:57:16] <mbrubeck> is this from FlowConstructionUtils?
[20:57:26] *** darkowlzz is now known as darkowlzz|afk
[20:57:39] *** Joins: jdm_ (jdm@moz-3iidq0.ckpj.s0pt.0450.2001.IP)
[20:58:04] <jack> MutableFlowConstructionUtils
[20:58:13] <jack> impl MutableOwnedFlowUtils for Flow {
[20:58:19] <jack> sorry, MutableOwnedFlowUtils
[20:58:52] <jack> I don't know why there are MutableFlowUtils and MutableOwnedFlowUtils
[20:58:55] <jack> pcwalton: ^ ?
[20:59:07] <pcwalton> possibly predating DST
[20:59:12] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (Connection closed)
[20:59:37] <pcwalton> I think I tried to remove them once and had a bunch of weird type system things I couldn't figure out
[20:59:38] <pcwalton> it's a giant pain
[20:59:40] <mbrubeck> Neither defines an `add_new_child` method -- I think that's only in FlowConstructionUtils. (Unless you are just adding it.)
[20:59:51] <pcwalton> I think Rust's typechecker is totally borked around method/lifetime/trait object lookup somehow
[21:00:31] <jack> mbrubeck: You may be right.
[21:01:49] *** jandem is now known as jandem-away
[21:02:41] *** Joins: tglman (tglman@moz-l8btep.as13285.net)
[21:02:52] *** Joins: bholley (bholley@moz-qpv0dk.ca.comcast.net)
[21:04:10] <jack> If Flow is impled for InlineFlow, the let inline_flow = InlineFlow::new(...); inline_flow.add_new_child should work right?
[21:04:30] <jack> If FlowConstructionUtils is impled on Flow
[21:04:43] <jack> Or does the compile not have the ability to transitively search?
[21:06:57] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[21:07:14] <jack> error: the trait `core::marker::Sized` is not implemented for the type `flow::Flow` [E0277]
[21:10:00] <jack> There seems to be no way to write this that doesn't involve some nastiness.
[21:10:26] <jack> Either I have to call methods with crazy casts, or have two variables, one for hte original struct and one for the Flow reference
[21:13:24] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Connection closed)
[21:13:28] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[21:13:54] *** Joins: Caspy7 (chatzilla@moz-tkogmh.stlsmo.sbcglobal.net)
[21:15:01] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[21:17:16] <jack> Apparently I can't impl on Flow at all
[21:17:25] <jack> The compiler just hadn't gotten to that piece of code yet or something.
[21:18:03] <jack> https://play.rust-lang.org/?code=use%20std%3A%3Arc%3A%3ARc%3B%0A%0Atrait%20SomeTrait%20{%20fn%20foo%28%26self%29%20{%20}%20}%0A%0Aimpl%20SomeTrait%20for%20i32%20{%20}%0A%0Atrait%20Extension%20{%20fn%20bar%28%26mut%20self%29%20{%20}%20}%0A%0Aimpl%20Extension%20for%20Rc%3CSomeTrait%3E%20{%20}%0A%0Afn%20main%28%29%20{%0A%20%20let%20mut%20x%3A%20Rc%3CSomeTrait%3
[21:18:03] <jack> E%20%3D%20Rc%3A%3Anew%2822%29%3B%0A%20%20x.clone%28%29%3B%0A%20%20x.bar%28%29%3B%0A}%0A&version=nightly
[21:18:17] <jack> stupid irccloud.
[21:18:28] <jack> http://is.gd/oE88Ia
[21:20:11] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[21:20:20] <mbrubeck> jack: I think the actual Flow is object-safe, but you'll need to impl on Box<Flow> or &Flow or <T: Flow> instead of just Flow.
[21:20:54] <jack> What does object safe mean?
[21:21:07] <jack> http://is.gd/i6vai0
[21:21:11] <jack> is what i currently have that still fails
[21:22:02] *** Quits: ray (bernhard@moz-vsafmp.dynamic.surfer.at) (Quit: Leaving.)
[21:22:41] <mbrubeck> jack: Traits with static methods (ones that don't take self) can't be turned into trait objects because reasons
[21:22:55] <mbrubeck> jack: If Flow is object safe then you can do http://is.gd/4aKC5V
[21:23:16] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[21:23:16] -ghservo- [13rust-mozjs] 15michaelwu pushed 1 new commit to 06smupgrade2: 02http://git.io/vIUj5
[21:23:16] -ghservo- 13rust-mozjs/06smupgrade2 149a6b4fd 15Michael Wu: Add support for null HandleValues
[21:23:16] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[21:23:16] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[21:23:49] <frewsxcv> jack: https://doc.rust-lang.org/stable/book/trait-objects.html
[21:23:53] <mbrubeck> http://huonw.github.io/blog/2015/05/where-self-meets-sized-revisiting-object-safety/ has a good explanation of object safety if that's an issue
[21:26:35] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[21:26:35] -ghservo- [13servo] 15michaelwu pushed 1 new commit to 06smupgrade3: 02http://git.io/vITvY
[21:26:35] -ghservo- 13servo/06smupgrade3 14b9fe07c 15Michael Wu: Address more review comments
[21:26:35] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[21:26:42] <frewsxcv> mbrubeck's resource is better
[21:27:22] <jack> frewsxcv: Yes, I know about trait objects, but unless I missed osmething in that doc, there is no mention of object safety.
[21:27:25] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[21:27:27] * jack reads Huon's blog post.
[21:28:07] *** Quits: jdm_ (jdm@moz-3iidq0.ckpj.s0pt.0450.2001.IP) (Quit: )
[21:28:31] *** Quits: Jackneill (Jackneill@moz-bl9mla.pool.digikabel.hu) (Ping timeout: 121 seconds)
[21:28:56] *** Quits: ienzam (enzam@moz-spq.4ra.239.216.IP) (Ping timeout: 121 seconds)
[21:32:06] *** Joins: ienzam (enzam@moz-spq.4ra.239.216.IP)
[21:34:41] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[21:34:41] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vIU7e
[21:34:41] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[21:34:42] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[21:34:42] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vITJV
[21:34:42] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[21:34:45] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[21:34:45] -ghservo- [13servo] 15bors-servo closed pull request #6285: Better command-line error handling (06master...06nofile) 02http://git.io/vIJFw
[21:34:45] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[21:39:03] *** Joins: jviereck (Adium@moz-bvi9d2.rgd2.9kg1.0101.2620.IP)
[21:42:26] *** Quits: jviereck (Adium@moz-bvi9d2.rgd2.9kg1.0101.2620.IP) (Quit: Leaving.)
[21:43:48] <jack> Ok. Figured that bit out.
[21:44:02] <jack> I'm starting to feel like pcwalton is going to have to do this.
[21:44:24] <pcwalton> is this another rustup?
[21:44:25] <jack> Because FlowRef had DerefMut, there is no easy conversion.
[21:44:40] <pcwalton> oh, moving to DST
[21:44:44] <jack> The way we are passing stuff around is probably going to have to be redone.
[21:44:55] <pcwalton> yeah, I can take a shot at it after figuring out this parallel ARM stuff
[21:45:24] <jack> I can solve some things by not putting things in Arcs, but Arcs are what all the functions take.
[21:45:59] <jack> It worries me a lot you can be jiggering around inside these FlowRefs
[21:46:33] *** Joins: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp)
[21:46:46] *** Quits: cakecatz (cakecatz@moz-rakufn.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:47:59] <jack> I suspect this is going to be pretty hard without being able to mutate the inside of an Arc.
[21:48:51] *** Joins: larsberg (Adium@moz-mfl.g5u.215.61.IP)
[21:48:52] *** ChanServ sets mode: +o larsberg
[21:52:30] <jack> add_new_child takes a Arc<Flow> and then mutates the interior flow to set the parent.
[21:52:40] <jack> So I guess this needs to take &mut Flow
[21:53:11] *** Joins: jviereck (Adium@moz-6crvn4.rgd2.9kg1.0101.2620.IP)
[21:53:40] <jack> But it can't without copying.
[21:54:08] *** Quits: jviereck (Adium@moz-6crvn4.rgd2.9kg1.0101.2620.IP) (Quit: Leaving.)
[21:54:17] <jack> and clearly the refcount is not going to be one.
[21:55:38] <jack> So make_unique or get_mut aren't going to work.
[22:01:44] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[22:04:36] *** Quits: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca) (A TLS packet with unexpected length was received.)
[22:04:39] *** Joins: zmike_ (discomfitor@moz-mfl.g5u.215.61.IP)
[22:05:43] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[22:06:24] *** Quits: Jesse (jruderman@moz-h28sem.sntcca.sbcglobal.net) (Client exited)
[22:08:09] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[22:08:38] <mwu> whoo
[22:08:51] <mwu> got unsafecells inside unsafecells
[22:09:22] *** Quits: Ms2ger (Ms2ger@moz-vbh.07m.182.91.IP) (Ping timeout: 121 seconds)
[22:11:58] *** Quits: nefzaoui (nefzaoui@moz-083.5ub.228.41.IP) (Quit: Ex-Chat)
[22:13:15] *** Quits: vodik (simon@moz-86ind4.dedicated.allstream.net) (Quit: WeeChat 1.2)
[22:15:53] *** Joins: vodik (simon@moz-86ind4.dedicated.allstream.net)
[22:17:04] *** Quits: vodik (simon@moz-86ind4.dedicated.allstream.net) (Quit: WeeChat 1.2)
[22:17:19] *** Joins: vodik (simon@moz-86ind4.dedicated.allstream.net)
[22:20:13] *** Joins: nickniko_ (nicknikolov@moz-7ep.6g7.220.90.IP)
[22:20:13] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[22:21:08] *** Quits: bholley (bholley@moz-qpv0dk.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:23:34] *** WindowsBunny is now known as BunnyHitler
[22:23:54] *** BunnyHitler is now known as WindowsBunny
[22:25:02] *** eddyb is now known as thitlerrors
[22:25:05] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[22:25:05] -ghservo- [13rust-azure] 15frewsxcv opened pull request #164: Update repository hyperlinks to reflect new locations (06master...06patch-1) 02http://git.io/vITC3
[22:25:05] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[22:25:13] *** thitlerrors is now known as eddyb
[22:28:45] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:35:59] *** nrc is now known as nrc|distracted
[22:41:47] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[22:41:47] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vITJV
[22:41:47] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[22:41:52] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[22:41:52] -ghservo- [13servo] 15bors-servo closed pull request #6286: Bump rust-url version: 0.2.16 â†’ 0.2.35 (06master...06bump-url) 02http://git.io/vIU9c
[22:41:52] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[22:42:51] *** Quits: Caspy7 (chatzilla@moz-tkogmh.stlsmo.sbcglobal.net) (Ping timeout: 121 seconds)
[22:45:03] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[22:45:03] -ghservo- [13rust-mozjs] 15michaelwu pushed 1 new commit to 06smupgrade2: 02http://git.io/vITBo
[22:45:03] -ghservo- 13rust-mozjs/06smupgrade2 142b2b39a 15Michael Wu: Implement Heap<T> with UnsafeCell
[22:45:03] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[22:47:49] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[22:47:49] -ghservo- [13servo] 15michaelwu pushed 1 new commit to 06smupgrade3: 02http://git.io/vITRu
[22:47:49] -ghservo- 13servo/06smupgrade3 1474e8df5 15Michael Wu: Adapt to the new Heap<T> API
[22:47:49] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[22:49:03] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[22:49:03] -ghservo- [13servo] 15frewsxcv opened pull request #6288: Update dependencies to reflect new locations, crate names (06master...06update-dep-paths) 02http://git.io/vITR5
[22:49:03] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[22:59:01] <Savago> question: what would make mach/cargo to fail to find x11 crate? Iâ€™m able to download and build it by hand just fine.
[23:00:25] *** Quits: naudtov (naudtov@moz-3rgsah.hfc.comcastbusiness.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:01:00] *** Joins: larsberg1 (Adium@moz-mfl.g5u.215.61.IP)
[23:01:01] *** Joins: njn (chatzilla@moz-c6c476.iinet.net.au)
[23:01:12] *** Quits: larsberg (Adium@moz-mfl.g5u.215.61.IP) (Connection closed)
[23:01:37] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[23:01:37] -ghservo- [13rust-layers] 15frewsxcv opened pull request #169: Update dependencies to reflect new locations, crate names (06master...06patch-1) 02http://git.io/vITuD
[23:01:37] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[23:01:37] <njn> mccr8: ping
[23:01:39] <njn> whoops, wrong channel
[23:06:44] *** larsberg1 is now known as larsberg
[23:06:47] *** ChanServ sets mode: +o larsberg
[23:06:56] <mbrubeck> Savago: jack just changed a bunch of dependency stuff; frewsxcv posted a PR just now to update some Cargo files...
[23:07:32] <Savago> mbrubeck: coolio.
[23:07:38] <frewsxcv> https://github.com/servo/rust-azure/pull/164 https://github.com/servo/rust-layers/pull/169
[23:07:39] <crowbot1> PR #169: Update dependencies to reflect new locations, crate names - https://github.com/servo/rust-layers/pull/169
[23:07:39] <crowbot1> PR #164: Update dependencies reflect new locations, crate names - https://github.com/servo/rust-azure/pull/164
[23:07:47] <frewsxcv> are the ones holding me back on the servo PR
[23:09:51] *** Quits: zmike_ (discomfitor@moz-mfl.g5u.215.61.IP) (Ping timeout: 121 seconds)
[23:14:22] * frewsxcv clarifies https://github.com/servo/servo/pull/6288
[23:14:22] <crowbot1> PR #6288: Update dependencies to reflect new locations, crate names - https://github.com/servo/servo/pull/6288
[23:14:28] <frewsxcv> /me meant 
[23:14:30] <frewsxcv> https://github.com/servo/servo/pull/6288#issuecomment-109087524
[23:14:30] <crowbot1> PR #6288: Update dependencies to reflect new locations, crate names - https://github.com/servo/servo/pull/6288
[23:21:52] *** AutomatedTester is now known as AutomatedTester|AFK
[23:23:49] *** Quits: larsberg (Adium@moz-mfl.g5u.215.61.IP) (Quit: Leaving.)
[23:25:00] *** Quits: nrc|distracted (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[23:27:06] *** Joins: bdero (bran@moz-bbb.8fo.42.70.IP)
[23:29:18] *** Quits: nickniko_ (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[23:32:17] * njn is trying to work out how LOCAL_CONTEXT_KEY should be changed to avoid the raw pointer that's causing leaks
[23:32:33] <eddyb> njn: what's that?
[23:32:47] <njn> eddyb: #6282
[23:32:47] <crowbot1> Issue #6282: LocalLayoutContexts leaked via LOCAL_CONTEXT_KEY - https://github.com/servo/servo/issues/6282
[23:33:32] <njn> the tricky part is that the `*mut LocalLayoutContext` gets copied out of the TLS and into a LayoutContext
[23:33:33] <eddyb> njn: how did you fail?
[23:33:54] <njn> eddyb: I haven't worked out what type LOCAL_CONTEXT_KEY should have
[23:34:09] <eddyb> sorry, how did RefCell<Option<T>> fail?
[23:34:44] <njn> er, lots of compile errors
[23:35:07] <eddyb> caused by usage sites not updated?
[23:35:21] <njn> the tricky part is that the `*mut LocalLayoutContext` gets copied out of the TLS and into a LayoutContext
[23:35:33] <eddyb> so... call .take()?
[23:35:39] <eddyb> not sure what semantics you want
[23:35:46] <eddyb> shared ownership?
[23:36:50] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[23:36:59] <njn> eddyb: I don't know. I'm still trying to get my head around it. That's what I'm struggling with
[23:37:05] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:37:12] <eddyb> what is it even?
[23:37:23] <eddyb> a link to the code would be more useful than the issue
[23:38:07] <eddyb> oh and TLS initializers can do anything, it's runtime code ran on the first access
[23:38:22] <njn> https://github.com/servo/servo/blob/master/components/layout/context.rs#L41
[23:39:14] <eddyb> heh, yeah
[23:39:24] <eddyb> njn: create_or_get_local_context should go in the initializer
[23:39:45] <eddyb> let me sketch something
[23:40:56] <eddyb> oh, you need the shared context to initialize font_context. bummer
[23:41:13] <jack> frewsxcv: I think you just redid a bunch of work I did
[23:41:41] <jack> I'll push my branch tonight for comparison.
[23:42:16] <eddyb> njn: so apart from the font context, this is what it would look like https://gist.github.com/eddyb/48ea89d3679bb4e7c0f3
[23:42:34] <eddyb> I'll have a look around to see how that one is supposed to work
[23:44:08] <eddyb> whoa whoa
[23:44:12] <eddyb> njn: this is UB https://github.com/servo/servo/blob/master/components/layout/context.rs#L139
[23:44:43] <njn> eddyb: yeah, it's a mess
[23:45:00] <njn> cloning an Rc just increments the refcount, doesn't clone the thing on the inside, right?
[23:45:10] *** Joins: sneakyness (textual@moz-6un.t6n.183.64.IP)
[23:47:05] <eddyb> yes
[23:47:14] <frewsxcv> jack: ah, :-/
[23:47:34] <eddyb> njn: this feels off
[23:47:42] <frewsxcv> i should maybe start attending meetings and reading official things to prevent this from happening
[23:47:53] <njn> eddyb: could be; it's definitely causes lieaks
[23:48:20] <eddyb> hmm, there is no way to provide an explicit initializer to LocalKey
[23:48:48] <frewsxcv> jack: sorry about that. feel free to close any of my PRs
[23:50:17] <njn> eddyb: I'm not worried about the TLS initialization being slightly less elegant than it might be; I am worried about the leak
[23:51:01] <eddyb> so there's a bigger issue than the leak
[23:51:09] <eddyb> you create &mut FontContext on demand
[23:51:11] <eddyb> that is *wrong*
[23:51:31] <njn> the "you" is not "me" here
[23:51:41] <eddyb> yes, a general you
[23:51:57] <eddyb> other people might be listening :)
[23:52:11] <njn> I think the important thing is to work out what type cached_local_layout_context should have here:
[23:52:14] <njn> pub struct LayoutContext<'a> {
[23:52:16] <njn>     pub shared: &'a SharedLayoutContext,
[23:52:17] <njn>     cached_local_layout_context: *mut LocalLayoutContext,
[23:52:19] <njn> }
[23:52:26] <njn> should be a safe reference of some kind
[23:52:30] <eddyb> an Rc
[23:52:45] <eddyb> that's not the hard part, the hard part is &mut FontContext which is given out
[23:52:57] <njn> an Rc that is pulled out of TLS
[23:53:00] <eddyb> yes
[23:54:08] <njn> eddyb: you think it's the `mut` that's the problem?
[23:54:39] <eddyb> oh, all fields are given out of as &mut. hmpf
[23:54:53] <njn> there is also &'b mut ApplicableDeclarationsCache and &'b mut StyleSharingCandidateCache
[23:55:06] <eddyb> it's UB, no matter whether the compiler gives you an error for it or not
[23:55:27] <njn> I'll try to work out if the mutability is needed
[23:55:31] <eddyb> it is, I checked
[23:55:38] <eddyb> they're all caches
[23:57:11] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[23:57:11] *** Quits: bdero (bran@moz-bbb.8fo.42.70.IP) (Ping timeout: 121 seconds)
[23:57:34] <njn> so the idea is you can create multiple LayoutContexts but they're all sharing the same underlying LocalLayoutContext?
[23:58:03] <eddyb> presumably, yes
[23:58:24] <eddyb> it's definitely a safe thing to do with its public API
[23:59:02] <gw> njn: I *think* there's only ever one LayoutContext existing at once (per thread)
[23:59:21] <gw> njn: but that's just from a quick scan of the code, it could be wrong
[23:59:29] *** Joins: bdero (bran@moz-bbb.8fo.42.70.IP)
[23:59:39] <njn> gw: seems like all the accesses could just go via vanilla TLS lookups, instead of this whole cached thing, then
