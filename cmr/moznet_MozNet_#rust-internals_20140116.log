[00:01:34] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[00:01:48] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[00:02:01] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:02:01] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140c5dd9e to 14149fc76: 02http://git.io/N3iJvQ
[00:02:01] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:02:05] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:02:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/1syx_g
[00:02:05] <ghrust> 13rust/06auto 14515978d 15Flavio Percoco: Use the least significant beat to determine if int/uint is even
[00:02:05] <ghrust> 13rust/06auto 143697121 15bors: auto merge of #11568 : FlaPer87/rust/even, r=alexcrichton...
[00:02:05] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:03:39] <dbaupp> does that PR^ actually make any difference at all? Wouldn't LLVM optimise x % 2 == 0 to x & 1 == 0 trivially?
[00:04:52] <dbaupp> oh, I see the comments -O0 and -O1
[00:04:57] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[00:04:57] *** ChanServ sets mode: +o tjc
[00:05:01] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: tjc)
[00:07:08] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[00:07:36] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[00:10:40] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:14:01] *** Quits: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP) (Ping timeout)
[00:14:20] *** Joins: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP)
[00:17:49] <acrichto> vadimcn: oh awesome!
[00:18:02] <acrichto> dbaupp: nah yeah LLVM optimizes it just fine
[00:18:07] <acrichto> but not reason to deny really
[00:31:24] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:34:06] *** Quits: deens (deens@moz-A47475CE.hsd1.ca.comcast.net) (Client exited)
[00:38:59] *** Joins: deens (deens@moz-A47475CE.hsd1.ca.comcast.net)
[00:56:06] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[01:04:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:04:40] <dbaupp> neat, removing box headers on ~ and ~[] seems to have saved us 60MB
[01:20:45] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:24:34] <dbaupp> brson: https://github.com/mozilla/rust/pull/11588 r?
[01:29:30] <nmatsakis> I like how trans is getting simpler and simpler as we remove complications from the language.
[01:29:45] <nmatsakis> more and more, the semantics of each rust statement really have a straightforward translation.
[01:30:22] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[01:32:05] *** Quits: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP) (Ping timeout)
[01:35:20] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Connection reset by peer)
[01:35:32] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[01:36:09] <dbaupp> nmatsakis: are trait objects considered to reach everything by type_contents?
[01:36:34] <nmatsakis> dbaupp: depends if they have bounds. e.g., ~Foo:Send is not considered to reach everything
[01:36:42] * nmatsakis remembers he wanted to tweak the defaults there
[01:36:49] <dbaupp> ah, of course
[01:37:51] <dbaupp> Do we want #[managed] to imply #[no_send]?
[01:38:03] <nmatsakis> yes
[01:38:21] <nmatsakis> well, probably?
[01:38:23] <nmatsakis> what is #[managed]?
[01:38:34] <nmatsakis> I would suggest you not add new annotations,
[01:38:40] <nmatsakis> the new plan is to use marker types excluseively
[01:38:57] <nmatsakis> though we haven't migrated over from the other schemes that are in use
[01:39:16] <dbaupp> Just an annotation to throw on struct Gc<T> {} to make it possible to detect when a structure reaches a Gc pointer
[01:39:24] <dbaupp> changing it to a marker type has the same question
[01:39:35] *** Quits: blank_name (blank_name@A6C6321C.964BADD.93A5C78C.IP) (Ping timeout)
[01:39:38] <dbaupp> do we want #[lang="managed"] struct Managed; to be no-send?
[01:39:39] <nmatsakis> I'd say no,
[01:39:49] <nmatsakis> and instead just have the GC type include both Managed and NoSend
[01:40:01] * nmatsakis shrugs
[01:40:05] <nmatsakis> in theory one might have a global GC,
[01:40:10] <nmatsakis> though of course our infrastructure won't scale
[01:40:12] <dbaupp> yeah, that's what I was thinking
[01:40:33] <nmatsakis> by which I mean: if we're going to plausibly support other kinds of GCs, we'd need more than a tag like Managed
[01:40:34] <dbaupp> this means that ~Foo:Send will be considered to possibly contain managed pointers though
[01:40:41] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[01:40:54] <nmatsakis> that's true
[01:40:54] <dbaupp> (even though, with the libstd scheme, it never will.)
[01:41:00] <nmatsakis> yes I take it back
[01:41:08] <nmatsakis> I think Managed should probably imply NoSend
[01:41:25] <nmatsakis> since the scheme is not going to be truly generic anyhow
[01:41:34] <dbaupp> Yep, ok
[01:41:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:41:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/1syx_g
[01:41:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:41:58] <dbaupp> nmatsakis: (is it ok if I leave it as an annotation for now? since there's no examples of marker types to crib off.)
[01:42:33] <nmatsakis> dbaupp: y
[01:43:54] <dbaupp> thanks
[01:44:15] *** Joins: a_m0d (a_m0d@moz-322A4DE4.acanac.net)
[01:45:27] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[01:45:58] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[01:46:44] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:46:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8m5NhQ
[01:46:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:46:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:46:44] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/qsWIDA
[01:46:44] <ghrust> 13rust/06auto 14a5ed0c5 15bors: auto merge of #11565 : mozilla/rust/snapshot, r=huonw
[01:46:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:47:50] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[01:48:13] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:48:13] *** ChanServ sets mode: +qo brson brson
[01:49:12] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Quit: )
[01:49:47] *** Quits: deens (deens@moz-A47475CE.hsd1.ca.comcast.net) (Client exited)
[01:49:52] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[01:51:03] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[02:02:22] *** Quits: tikue (tkuehn@268C2DFE.FAD414BA.D74CC41D.IP) (Quit: tikue)
[02:06:18] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[02:20:10] *** Joins: deens (deens@moz-A47475CE.hsd1.ca.comcast.net)
[02:21:17] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:33:30] *** Joins: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com)
[02:37:16] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:38:20] <cmr> my mind insist on internally pronouncing bors as borsch
[02:38:55] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:39:34] *** Quits: deens (deens@moz-A47475CE.hsd1.ca.comcast.net) (Client exited)
[02:39:45] *** kimundi is now known as zz_kimundi
[02:53:31] *** Joins: blank_name (blank_name@A6C6321C.964BADD.93A5C78C.IP)
[02:59:43] <sfackler> acrichto: pcwalton: I think https://github.com/mozilla/rust/pull/11151 is ready to go. Want to run it through try first or just let it go through?
[03:00:10] <strcat> dbaupp: removing managed-unique headers really took away 60MiB? heh
[03:00:22] <dbaupp> strcat: apparently
[03:00:23] <strcat> I could submit a PR replacing vectors... ;p
[03:00:46] <dbaupp> that was blocked on managed headers?
[03:01:07] *** Joins: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP)
[03:01:19] <strcat> well, deciding that the headers were unnecessary was blocking it
[03:02:03] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:02:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/PpSdeg
[03:02:03] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:02:18] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:06:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:06:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/fTE5fw
[03:06:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[03:06:47] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:06:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/_DkIew
[03:06:47] <ghrust> 13rust/06auto 143b32ea8 15lucy: Revert "show options for -W help and -W". Fixes #11458....
[03:06:47] <ghrust> 13rust/06auto 14bf2ab22 15bors: auto merge of #11574 : neeee/rust/master, r=alexcrichton...
[03:06:47] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[03:10:17] <cmr> strcat: great job removing headers btw
[03:10:27] <strcat> *shrug*, easy
[03:10:30] <cmr> less bloat is good
[03:10:32] <cmr> well yes.
[03:10:39] <cmr> but I was surprised to see it in the list.
[03:10:57] <cmr> sfackler: it already needs a rebase.
[03:11:01] <sfackler> asdfasdf
[03:11:15] <strcat> the hard part was getting 99% of the way there by removing them from non-managed unique ;p
[03:11:20] <sfackler> at least i squashed it down to 1 commit
[03:11:26] <sfackler> rebasing over 15 commits was a nightmare
[03:14:04] *** Quits: zz_kimundi (kimundi@moz-FAACE8A8.dip0.t-ipconnect.de) (Ping timeout)
[03:14:53] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[03:15:14] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:15:16] <cmr> strcat: do you think a non-pthreads libnative would be worthwhile?
[03:15:27] <strcat> hm?
[03:15:31] <cmr> (on linux)
[03:15:35] <strcat> I don't really think so
[03:15:56] <strcat> if you don't want threads, a library will have a hard time knowing what you *do* want to do with clone
[03:16:17] <cmr> specifically I meant locks/sync primitives, sorry.
[03:16:25] <cmr> (this is re: your comments about TBB)
[03:16:56] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[03:17:48] *** Joins: zz_kimundi (kimundi@moz-A0A35D8B.dip0.t-ipconnect.de)
[03:17:50] *** zz_kimundi is now known as kimundi
[03:19:19] *** Joins: jdm (jdm@moz-12626D4B.static.videotron.ca)
[03:19:25] <strcat> cmr: ah, well it's probably worth using a custom mutex/rwlock
[03:19:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:24:53] *** Quits: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP) (Ping timeout)
[03:26:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[03:34:29] <sfackler> acrichto: ping
[03:35:01] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[03:35:31] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: userns!)
[03:35:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[03:36:19] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:36:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:36:30] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:39:45] * strcat needs to figure out how user namespaces work
[03:39:47] <strcat> getting an error ;[
[03:39:59] <cmr> klutzy: vadimcn: ping
[03:40:19] <klutzy> pong but on lunch :p
[03:40:34] <cmr> could I convince you to take a look at https://github.com/mozilla/rust/pull/11431 ? it fails on windows with http://buildbot.rust-lang.org/builders/auto-win-32-nopt-c/builds/2633/steps/compile/logs/stdio
[03:40:50] <cmr> I think it's a libnative bug, but some reproduction would be awesome before I waste some time on a buildbot quirk :)
[03:50:04] *** Joins: deens (deens@moz-A47475CE.hsd1.ca.comcast.net)
[03:50:43] <strcat> hm
[03:50:50] <strcat> trying to figure out how to managed cgroups like this...
[03:51:25] * strcat doesn't want to have to add a wait on the parent
[03:51:28] <strcat> I guess I have to...
[03:51:46] *** Quits: deens (deens@moz-A47475CE.hsd1.ca.comcast.net) (Ping timeout)
[03:54:10] *** Quits: a_m0d (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[04:03:43] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[04:04:04] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[04:05:52] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[04:09:37] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:21:40] <cmr> strcat: r? https://github.com/mozilla/rust/pull/10460
[04:21:48] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:21:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/_DkIew
[04:21:48] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:22:57] <bjz> r? https://github.com/mozilla/rust/pull/11548
[04:23:31] <bjz> acrichto: ^
[04:26:42] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:26:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kPslCA
[04:26:42] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:26:44] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:26:44] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/P17aEw
[04:26:44] <ghrust> 13rust/06auto 143115968 15Corey Richardson: Add support for arbitrary flags to MemoryMap....
[04:26:44] <ghrust> 13rust/06auto 1416525e4 15Corey Richardson: Use `mmap` to map in task stacks and guard page
[04:26:44] <ghrust> 13rust/06auto 14f4414a1 15Corey Richardson: Implement caching of stacks.
[04:26:46] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:28:29] <cmr> strcat: thanks
[04:32:14] *** Joins: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP)
[04:36:48] <dbaupp> should lang items be exported by default?
[04:36:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:36:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ccaff7f to 14bf2ab22: 02http://git.io/N3iJvQ
[04:36:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:36:50] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:36:50] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/i9W_lw
[04:36:50] <ghrust> 13rust/06auto 141dd6906 15Brendan Zabarauskas: Merge Bitwise and BitCount traits and remove from prelude, along with Bounded...
[04:36:50] <ghrust> 13rust/06auto 146708558 15bors: auto merge of #11548 : bjz/rust/bitwise, r=alexcrichton...
[04:36:51] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:37:01] <dbaupp> (i.e. symbols in the binary even if they aren't pub)
[04:39:45] <strcat> dbaupp: that'd be nice
[04:39:55] * dbaupp files a bug
[04:41:46] <ChrisMorgan> Or mandate that they *be* pub.
[04:42:07] <dbaupp> we don't even type check them
[04:42:10] <dbaupp> yay lang items
[04:46:21] <dbaupp> https://github.com/mozilla/rust/issues/11591
[04:49:48] <cmr> whoops, forgot to push the fixes.
[04:49:59] <cmr> strcat: re-r? https://github.com/mozilla/rust/pull/10460
[04:51:20] <sfackler> uh, have private traits always been exported?
[04:51:38] <strcat> cmr: can that be rebased?
[04:52:05] <cmr> strcat: if you want it to be.
[04:52:17] <cmr> it doesn't really fit in anywhere...
[04:52:34] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[04:52:53] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:53:17] * strcat shrugs
[05:07:35] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[05:13:52] <eddyb> 60MB? cool :D
[05:18:21] <cmr> strcat: is that a yes? :p
[05:18:31] <strcat> cmr: yes
[05:18:34] <cmr> ok
[05:18:47] <strcat> having massive problems with CLONE_NEWUSER ;[
[05:26:14] <eddyb> strcat: did you see http://lists.cs.uiuc.edu/pipermail/llvm-commits/Week-of-Mon-20140113/201613.html?
[05:26:23] <eddyb> how many weeks do you reckon it will sit there?
[05:26:45] <strcat> dunno
[05:26:50] <strcat> my LLVM patch is still sitting there
[05:26:53] * strcat shrugs
[05:27:03] <strcat> I'd say, forever
[05:27:03] <cmr> beg for review in their irc channel? ;p
[05:27:06] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[05:27:07] <strcat> I tried that
[05:27:11] <cmr> :(
[05:27:11] <eddyb> cmr: exactly my thought
[05:27:18] * strcat shrugs
[05:28:23] <strcat> meh
[05:28:29] <strcat> I don't think you can mix a chroot with a user ns...
[05:28:31] <strcat> I don't get it
[05:29:53] <eddyb> cmr: well... I kinda know a LLVM developer, I might bug him specifically :P
[05:34:41] <bjz> eddyb: heh
[05:34:59] <strcat> problem: you aren't allowed to unshare CLONE_NEWUSER in a chroot
[05:35:13] <strcat> problem 2: you aren't allowed to chroot after unsharing CLONE_NEWUSER
[05:35:15] <strcat> ;[
[05:35:18] <strcat> rusti: :(
[05:35:20] -rusti- pastebinned 9 lines of output: http://ix.io/9To
[05:35:27] * strcat doesn't get how to use it
[05:35:58] <eddyb> strcat: sounds like an oversight
[05:37:06] *** Quits: ktt3ja (ktt3ja@moz-515C1363.hsd1.va.comcast.net) (Quit: Leaving)
[05:43:32] *** Quits: jdm (jdm@moz-12626D4B.static.videotron.ca) (Quit: Lost terminal)
[05:46:49] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:46:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/i9W_lw
[05:46:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:50:34] <cmr> strcat: squashed up: https://github.com/mozilla/rust/pull/10460
[05:50:48] <strcat> sec
[05:51:46] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:51:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/frcwnQ
[05:51:46] <ghrust> 13rust/06auto 14ff6c0af 15Patrick Walton: libsyntax: Remove the obsolete ability to parse from substrings....
[05:51:46] <ghrust> 13rust/06auto 14793f740 15bors: auto merge of #11575 : pcwalton/rust/parse-substrs, r=alexcrichton...
[05:51:47] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:51:49] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:51:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/oiyrjQ
[05:51:49] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:07:00] <strcat> CLONE_NEWUSER is being such a pain.
[06:07:05] * strcat gives up
[06:11:44] <eddyb> aaaaand LLVM rebuilds again
[06:14:28] <eddyb> going from branch1 -> older master -> update local master -> branch2 tends to trigger rebuilds even if everything is identical :/
[06:17:34] <eddyb> strcat, nmatsakis: https://github.com/mozilla/rust/pull/11595 though I'm not sure tests all pass - oh and I've forgot to disable bare fn -> proc
[06:20:09] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:21:51] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[06:25:50] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[06:26:26] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:28:33] *** Quits: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP) (Ping timeout)
[06:42:20] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[06:43:21] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Ping timeout)
[06:46:08] <eddyb> / FIXME(#3320) this should go away and be eplaced with proper inference, got a patch nderway - ndm
[06:46:20] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[06:50:55] *** Joins: listboss (listboss@moz-D0B2649.dyn.optonline.net)
[06:52:48] *** Parts: listboss (listboss@moz-D0B2649.dyn.optonline.net) (Leaving...)
[06:53:34] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[06:55:08] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[06:55:54] <acrichto> sfackler: pong
[06:57:50] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[06:58:06] *** vfetwnuncszu is now known as dcrewi
[07:00:27] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Ping timeout)
[07:01:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:02:12] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:02:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/frcwnQ
[07:02:12] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:03:17] <sfackler> acrichto: is there a reasonable way to fix the private trait missing_doc/export issues?
[07:03:32] <acrichto> sfackler: I can think of one way
[07:03:39] <acrichto> which is to revert my change to privac
[07:03:45] <acrichto> and instead put that logic in reachability
[07:03:52] <acrichto> or make privacy smarter
[07:04:41] <sfackler> also I think external macros is ready to go
[07:05:02] <acrichto> I have r+'d
[07:05:13] <acrichto> or at least I thought I did...
[07:05:34] <sfackler> oh, I haven't checked my email :P
[07:06:56] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:06:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/GCaROQ
[07:06:56] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:10:42] <sfackler> acrichto: would you mind terribly if I cut down the number of iterations of extra::comm::recv_a_lot by an 1 or 2 orders of magnitude? it takes roughly a minute and a half to run just that test on my system
[07:11:36] <acrichto> you can go right ahead
[07:11:40] <acrichto> I've noticed that before as well
[07:11:40] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[07:11:43] <acrichto> git diff
[07:11:46] <acrichto> whoops
[07:13:18] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[07:15:00] <eddyb>  error: expected outer comment // wat?
[07:16:04] <eddyb> oh, I think I got it. has to be at the start of the function
[07:16:43] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:16:43] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 143b2acaf to 14793f740: 02http://git.io/N3iJvQ
[07:16:43] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:27:09] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:35:57] *** flaper87|afk is now known as flaper87
[07:48:22] <sfackler> any idea what happened here? http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/2694/steps/test/logs/stdio
[07:51:50] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:51:50] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wAjEDQ
[07:51:50] <ghrust> 13rust/06auto 140e94ae4 15Derek Chiang: Fix some docs in std::rt::task
[07:51:50] <ghrust> 13rust/06auto 1416b5c2c 15bors: auto merge of #11571 : derekchiang/rust/fix-task-docs, r=alexcrichton...
[07:51:51] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:53:57] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:58:30] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[08:27:21] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[08:37:47] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[08:46:22] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[08:51:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:51:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1416b5c2c to 14793f740: 02http://git.io/N3iJvQ
[08:51:45] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:51:46] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:51:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3uaPqg
[08:51:46] <ghrust> 13rust/06auto 14c57920b 15Kevin Ballard: path: Fix joining Windows path when the receiver is "C:"...
[08:51:46] <ghrust> 13rust/06auto 146361c1d 15bors: auto merge of #11579 : kballard/rust/windows-path-join, r=erickt...
[08:51:46] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:05:04] <eddyb> nmatsakis, strcat: could we just get rid of the return pointer and let LLVM handle large return types by itself?
[09:05:29] <strcat> eddyb: might not work on every target, dunno
[09:05:34] <strcat> that'd be ideal obviously
[09:05:38] <strcat> it *should* be possible
[09:06:10] <strcat> eddyb: I've looked in LLVM and know that there's code to lower large return values to sret
[09:06:10] <acrichto> eddyb: last time I asked that I think the answer was that we manually do the retptr for abi compatibility
[09:06:15] *** Joins: bjz (bjz@moz-38D46E1C.perm.iinet.net.au)
[09:06:20] <strcat> acrichto: well we need it for extern
[09:06:27] <strcat> not necessarily for rust itself
[09:06:41] <strcat> we have very sloppy foreign ABI support atm ;p
[09:06:44] <eddyb> strcat: can't LLVM enfore C ABIs?
[09:06:46] <strcat> it doesn't handle lots of stuff right
[09:06:48] <strcat> eddyb: no
[09:06:50] <eddyb> better than we do?
[09:06:52] <eddyb> oh, okay
[09:07:03] <strcat> eddyb: C ABI is enforced by the frontend
[09:07:10] <strcat> it requires type system knowledge LLVM does not have
[09:07:16] <strcat> rust doesn't implement it right
[09:07:26] <strcat> eddyb: look at how clang passes structs
[09:07:27] <strcat> try a few
[09:07:37] <strcat> struct foo { float x, y; }
[09:07:39] <strcat> etc.
[09:07:41] <eddyb> so extern "C" rust functions would still require the return pointer
[09:07:44] <eddyb> strcat: oh I know :)
[09:07:46] <strcat> you have to do it in very specific ways
[09:07:50] <strcat> rust really doesn't
[09:08:06] <strcat> like you have to pass a struct with floats differently than a struct without them in some cases
[09:08:23] <strcat> and c99 complex numbers (which rust doesn't support)
[09:08:58] <eddyb> let x = Some(0u); should be %x = call Some::<uint>(i64 0); with Some::<uint> being ret {i64, i64} {i64 1, i64 %0}
[09:09:25] <eddyb> (but then... if you need to pass it by reference.... ouch)
[09:09:30] <strcat> eddyb: your LLVM patch should say why it's necessary
[09:09:53] <strcat> (inline) with an example and they are going to want an IR test
[09:09:55] <eddyb> strcat: the code was broken
[09:10:03] <eddyb> and I have an IR test
[09:10:06] <strcat> ah nvm
[09:10:12] <eddyb> it was a logic error
[09:10:36] <eddyb> and yeah, I saw how struct {int, int} becomes i64
[09:10:41] <eddyb> a bit weird
[09:10:43] <strcat> well just trying to cover all the bases because they are really bad at doing integration of patches afaict
[09:10:51] <strcat> they still haven't merged the one fixing mergefunc
[09:11:02] <eddyb> pffffft
[09:11:21] <strcat> they really need to use something where the unreviewed patches are highly visible
[09:11:27] <eddyb> strcat: do procs need the opaque_box structure?
[09:11:33] <eddyb> or could it be any pointer?
[09:11:36] <strcat> eddyb: they need the tydesc
[09:11:37] *** Joins: rca (rcatolino@moz-FBA8CEE6.adsl.proxad.net)
[09:11:49] <strcat> eddyb: well
[09:12:00] <strcat> eddyb: switch them to
[09:12:05] <strcat> [ptr, {env}]
[09:12:09] <strcat> or something like that
[09:12:19] <strcat> for the dtor
[09:15:05] <eddyb> strcat: I so wish they were just traits...
[09:15:23] <strcat> eddyb: then they'd be more expensive to call ;p
[09:15:35] <eddyb> but that needs Fn which needs varidic generics which could've been implemented a month ago if we didn't need all the discussions
[09:16:00] <eddyb> strcat: &Trait with one method has only that method instead of the vtable, problem solved
[09:16:11] <eddyb> ~Trait -> &Trait loads that method
[09:16:45] <strcat> not problem solved ;p
[09:16:45] <eddyb> strcat: objections?
[09:17:03] <eddyb> we have all had enough headaches
[09:17:12] <eddyb> strcat: why would &Trait need tydesc?
[09:17:36] <eddyb> don't tell me visit_glue. pls don't. I don't want to hear it. nope nope nope
[09:18:06] <strcat> visit glue doesn't support that
[09:18:09] <strcat> and screw visit glue
[09:18:15] <eddyb> rusti: ||
[09:18:17] -rusti- pastebinned 6 lines of output: http://ix.io/9Tu
[09:18:21] <strcat> poor rusti 
[09:18:26] <strcat> not as secure as he could be
[09:18:55] <eddyb> rusti: || {}
[09:18:56] -rusti- fn()
[09:19:14] <eddyb> strcat: then why do you need tydesc?
[09:19:33] <strcat> didn't say that!
[09:19:41] <strcat> just that making &Trait zero-overhead doesn't solve it for proc
[09:19:46] <eddyb> aaaah
[09:20:04] <eddyb> strcat: but procs don't have extra cost ;)
[09:20:18] <eddyb> you call them at most once and free them once
[09:20:38] <strcat> 2 caches misses vs one cache miss on a call could matter
[09:20:46] <strcat> eddyb: you can make a proc from a bare fn
[09:20:47] <strcat> doesn't allocate
[09:20:54] <eddyb> I just disallowed that
[09:21:14] <eddyb> strcat: not used in libstd/libsyntax/librustc
[09:21:32] <eddyb> only 7 tests that fail, stage2 compiles fine :P
[09:21:50] *** Joins: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP)
[09:22:18] <eddyb> strcat: if you have the dtor as a direct vtable entry, you actually get a benefit, if you don't call the proc. if you call the proc, the cost moved from getting the dtor to getting the call fn
[09:23:08] *** Quits: jaeholee (uid4856@moz-31ABA2C0.irccloud.com) (Quit: )
[09:24:02] <eddyb> how on earth would you get a ~OnceFn without a ~T, anyway? hmm, if it's a statically resolved function, maybe you can cheat, but it would be a manual implementation anyway
[09:25:36] <eddyb> strcat: hey, here's a cool trick, make a ~Trait from a ~EmptyStruct without allocating. can't have ~() not allocate *always*, it would break a few things, but maybe there's a way to do it if you explicitely want no instances
[09:25:57] <strcat> eddyb: fwiw rust is already broken in that regard
[09:26:07] <strcat> void *ptr = malloc(0);
[09:26:11] <eddyb> oh, yeah, hehe
[09:26:11] <strcat> may return NULL :)
[09:26:19] <strcat> doesn't have to return NULL
[09:26:20] <eddyb> rusti: Some(~())
[09:26:21] -rusti- Some(~())
[09:26:24] <strcat> it has to return something valid to pass to free
[09:26:25] <eddyb> hmpf
[09:26:27] <strcat> eddyb: glibc returns non-null
[09:26:35] <eddyb> :(
[09:26:55] <eddyb> libstd/libextra don't make use of procs from bare fns at all
[09:26:58] <strcat> as does musl, at least by default, for glibc compat
[09:26:59] <Yurume> rusti: let v = ~(); let w: *() = v; w
[09:27:03] -rusti- pastebinned 7 lines of output: http://ix.io/9Tv
[09:27:05] <eddyb> death to all magic
[09:27:21] <Yurume> rusti: let v = ~(); let w: *() = std::cast::transmute(v); w
[09:27:22] <eddyb> expect dragons. dragons are cool
[09:27:23] -rusti- pastebinned 7 lines of output: http://ix.io/9Tw
[09:27:34] <Yurume> aar
[09:27:41] <eddyb> we need a LLVM+Rust mascot
[09:27:43] <Yurume> rusti: let v = ~(); let w: *() = unsafe{std::cast::transmute(v)}; w
[09:27:44] -rusti- (0x7f4250000e70 as *())
[09:27:50] <Yurume> hmm
[09:27:54] <eddyb> a dragon covered in rusty armor
[09:28:27] <sigma> I was thinking a wizard strapped to a rack
[09:28:58] <sigma> That might be a little dark for an official mascot
[09:32:08] <eddyb> git rm src/test/run-fail/task-spawn-barefn.rs
[09:32:14] <eddyb> (yay more removed lines)
[09:32:43] <eddyb> this is awesome, I get to remove failing tests instead of fixing them
[09:32:54] <eddyb> pcwalton knows that feeling
[09:45:06] <eddyb> /home/eddy/Projects/rust/src/test/run-pass/yield1.rs:16:19: 16:24 error: mismatched types: expected `proc:Send()` but found `fn()` (expected fn but found extern fn)
[09:45:27] <eddyb> shouldn't that be "expected proc" not "expected fn"
[09:52:47] *** Quits: jt (quassel@moz-B994FA9E.cs.st-andrews.ac.uk) (Client exited)
[09:53:52] <eddyb> run-pass/trait-object-generics is the only broken one, I need to figure out that out
[09:54:52] <eddyb>      * task <unnamed> failed at 'index out of bounds: the len is 1 but the index is 1', /home/tortue/rust_compiler_newest/src/librustc/middle/subst.rs:58
[09:55:05] <eddyb> wait, that's what I get... did I break a fix?
[09:56:15] <eddyb> strcat: any idea what test/run-pass/unwind-box.rs does?
[09:56:19] <eddyb> it looks... very dumb
[09:56:25] * strcat shrugs
[09:56:59] <eddyb> the entire test is do spawn {let _a = @0; fail!();}
[09:57:03] <eddyb> does it... test anything?
[09:58:50] <eddyb> similar story in unwind-resource2
[09:59:41] <eddyb> unwind-unique... does it test that unwinding... works?
[10:02:03] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:02:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/3uaPqg
[10:02:03] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:03:22] *** Quits: larsberg (sid16141@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:03:22] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:03:22] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:03:22] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:03:23] *** Quits: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:03:23] *** Quits: geomyidae_ (uid214@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:03:23] *** Quits: dbaupp (Thunderbir@moz-F3F7375F.lns20.syd6.internode.on.net) (Ping timeout)
[10:03:58] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:04:12] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:04:32] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:05:09] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[10:05:35] *** Joins: dbaupp (Thunderbir@moz-F3F7375F.lns20.syd6.internode.on.net)
[10:06:48] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:06:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wNFTfg
[10:06:48] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:06:51] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:06:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/XVYSYA
[10:06:51] <ghrust> 13rust/06auto 140e94ae4 15Derek Chiang: Fix some docs in std::rt::task
[10:06:51] <ghrust> 13rust/06auto 14530856a 15bors: auto merge of #11571 : derekchiang/rust/fix-task-docs, r=alexcrichton...
[10:06:51] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:07:50] *** Quits: bjz (bjz@moz-38D46E1C.perm.iinet.net.au) (Connection reset by peer)
[10:07:58] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[10:10:10] *** Joins: bjz (bjz@moz-38D46E1C.perm.iinet.net.au)
[10:13:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:13:34] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:14:24] *** Joins: notrusti (notrusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:14:52] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[10:15:46] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[10:16:03] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[10:16:49] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:17:10] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[10:17:10] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[10:17:31] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[10:18:04] *** Quits: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net) (Ping timeout)
[10:18:39] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[10:19:07] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[10:19:13] *** Joins: kaeso (kaeso@B42A452A.36A75777.A2798B07.IP)
[10:19:16] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:19:22] *** Joins: Seldaek (seld@E733C546.5464C2F1.F113998C.IP)
[10:21:02] *** Joins: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net)
[10:21:58] *** Joins: sfackler (sfackler@moz-AEECCEBA.com)
[10:23:31] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[10:23:33] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[10:26:26] <eddyb> https://github.com/mozilla/rust/commit/ad6eeb843b3f21bd51bc6d89d58a75367b7439df
[10:26:33] <eddyb> hmm, I think I need to ignore self there
[10:29:48] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[10:30:33] <eddyb> strcat: %tydesc = type { i64, i64, void (i8*)*, void (i8*)*, void (i8*)*, { i8*, i64 } } looks better, doesn't it?
[10:32:11] <eddyb>   %13 = call %"enum.std::option::Option<&'static ()>[#1]" bitcast (%"enum.std::option::Option<&'static ()>[#1]" (i64*, %"struct.std::unstable::intrinsics::TypeId[#1]")* @"Many$uint::get_vtable_for_trait::hb3420faad54e2775jIaY::v0.0" to %"enum.std::option::Option<&'static ()>[#1]" (i8*, %"struct.std::unstable::intrinsics::TypeId[#1]")*)(i8* %12, %"struct.std::unstable::intrinsics::TypeId[#1]" { i64 -5928969608689945349 })
[10:32:31] <eddyb> no opaque box :D
[10:33:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:33:47] <eddyb> (doesn't include my LLVM fix because make is so nice and wrote it over)
[10:34:48] <strcat> notrusti: 1
[10:34:48] -notrusti- 1
[10:34:53] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:35:04] * strcat bored ;[
[10:35:47] <eddyb> strcat: r+ my PR?
[10:35:55] <eddyb> just to watch it fail because I broke something
[10:36:35] <strcat> notrusti: "3" - "2"
[10:36:36] -notrusti- 1
[10:36:41] <strcat> eddyb: fine ;p
[10:36:45] <eddyb> wait what?
[10:36:46] <strcat> where?
[10:37:09] <strcat> notrusti: x = new Boolean(false); console.log(x == false); if (x) { console.log("x is true") }
[10:37:09] -notrusti- true
[10:37:10] -notrusti- x is true
[10:37:10] -notrusti- undefined
[10:37:11] <eddyb> strcat: https://github.com/mozilla/rust/pull/11595
[10:37:24] <eddyb> haha, node.js, I was thinking it's that
[10:37:36] <eddyb> new Boolean should be disallowed IMO. EWWW
[10:37:56] <eddyb> notrusti: process.exit(1)
[10:37:56] -notrusti- application terminated with error code 1
[10:39:24] <strcat> notrusti: 1
[10:39:27] <strcat> notrusti: p 1
[10:39:27] -notrusti- 1
[10:39:41] <strcat> notrusti: p (5 / 0 rescue 2)
[10:39:42] -notrusti- -e:1: syntax error, unexpected modifier_rescue, expecting ')'
[10:39:42] -notrusti- p (5 / 0 rescue 2)
[10:39:42] -notrusti-                ^
[10:39:42] -notrusti- application terminated with error code 1
[10:39:46] <strcat> ;[
[10:39:50] <strcat> notrusti: p 1 / 0 rescue p 5
[10:39:51] -notrusti- 5
[10:40:01] <strcat> eddyb: oh you linked it
[10:40:03] <strcat> didn't notice
[10:40:05] <eddyb> wat?
[10:40:46] <strcat> ugh, long!
[10:40:49] <strcat> ;p
[10:42:47] <strcat> heh
[10:42:50] <strcat> silly old 2-space indents
[10:44:02] <strcat> hm
[10:44:07] <strcat> I forget how to make github use git -w
[10:44:46] <strcat> ah
[10:44:49] <strcat> ?w=1 at the end
[10:46:22] <Yurume> notrusti lol
[10:47:47] <strcat> notrusti: ps
[10:47:48] -notrusti-   PID TTY          TIME CMD
[10:47:48] -notrusti-     1 ?        00:00:00 irc_alt.sh
[10:47:48] -notrusti-     2 ?        00:00:00 ps
[10:48:01] <strcat> notrusti: ps
[10:48:01] -notrusti-   PID TTY          TIME CMD
[10:48:01] -notrusti-     1 ?        00:00:00 ps
[10:48:15] <strcat> notrusti: rustc -v
[10:48:15] -notrusti- rustc 0.10-pre (db7b9a3 2014-01-15 02:09:57 -0500)
[10:48:15] -notrusti- host: x86_64-unknown-linux-gnu
[10:49:08] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:52:12] <eddyb> notrusti: node -pe '1/0'
[10:52:13] -notrusti- application terminated abnormally with signal 31 (Bad system call)
[10:52:18] <eddyb> o_O
[10:52:26] <eddyb> strcat: why is that not supported?
[10:52:34] <strcat> notrusti: node -pe '1/0'
[10:52:34] -notrusti- Infinity
[10:52:38] <strcat> it was something else
[10:53:36] <eddyb> fty=fn(&Trait2<A2><no-bounds>) all_substs=substs(regions=[], self_ty=Some([type error]), tps=[A2])
[10:53:37] *** Joins: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com)
[10:53:43] <eddyb> I don't get substs
[10:54:55] <eddyb> wait, the problem is that it shouldn't subst at all. BLEAH
[10:56:05] <eddyb> need more juggling
[10:59:07] *** flaper87 is now known as flaper87|afk
[11:00:22] *** Quits: gwty (gwtypc@77D2A3.3F98A9B1.CF29F6CE.IP) (Ping timeout)
[11:00:42] <strcat> notrusti: rustc<<<"fn main(){println("foo")}" && ./rust_out
[11:00:43] -notrusti- application terminated abnormally with signal 31 (Bad system call)
[11:01:12] <strcat> everything is so demanding these days ;s
[11:02:02] *** Joins: gwty (gwtypc@A3F4FE97.CFB6D583.BD94A9D5.IP)
[11:02:12] <eddyb> notrusti: echo 'fn main(){println!("foo");}' | rustc -S --emit-llvm -o /dev/stdout -
[11:02:13] -notrusti- application terminated abnormally with signal 31 (Bad system call)
[11:02:17] <eddyb> oh come on
[11:02:25] <strcat> it's mad because of bash
[11:02:34] <eddyb> notrusti: /bin/echo 'fn main(){println!("foo");}' | rustc -S --emit-llvm -o /dev/stdout -
[11:02:35] -notrusti- application terminated abnormally with signal 31 (Bad system call)
[11:04:16] <strcat> notrusti: echo 'fn main(){println!("foo");}' | rustc -S --emit-llvm -o /dev/stdout -
[11:04:18] -notrusti- pastebinned 3 lines of output: http://ix.io/9TP
[11:04:32] <strcat> great
[11:04:58] <strcat> eddyb: ah there's no dev/stdout
[11:05:08] <strcat> didn't make the symlinks
[11:05:20] <strcat> notrusti: echo 'fn main(){println!("foo");}' | rustc -S --emit-llvm -o /proc/self/fd/1 -
[11:05:21] <eddyb> does -o - work?
[11:05:24] -notrusti- pastebinned 3 lines of output: http://ix.io/9TP
[11:05:52] <strcat> well it's a bad place to try it for the first time ;p
[11:06:48] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:06:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14530856a to 146361c1d: 02http://git.io/N3iJvQ
[11:06:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:06:52] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:06:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2y9ngQ
[11:06:52] <ghrust> 13rust/06auto 14c626838 15a_m0d: Update docs index to use lists...
[11:06:52] <ghrust> 13rust/06auto 14142ee5f 15bors: auto merge of #11588 : am0d/rust/dox, r=brson...
[11:06:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:07:39] <nmatsakis> eddyb: don't have time for a lengthy chat right now (though in a few hours), but I'm persuaded that the env pointer can go. I think we'll want to change the front end some to disallow casts from random fn ptrs into closures/procs, and only allow it from named fn items.
[11:08:03] <eddyb> nmatsakis: it wasn't used for procs at all
[11:08:06] <nmatsakis> that is, I'd prefer not to have "clever" stuff in trans, like generating double virtual dispatch
[11:08:22] <nmatsakis> in the case of a named fn item, we can generate a shallow wrapper 
[11:08:40] <eddyb> sure, the wrapper thing can be per-function instead of per-type, it's easy to fix if we have front-end enforcing
[11:08:41] <nmatsakis> that is specific to that fn
[11:08:56] *** Quits: gwty (gwtypc@A3F4FE97.CFB6D583.BD94A9D5.IP) (Ping timeout)
[11:09:14] <nmatsakis> enforcing that in the front-end is a bit tricky to do the Right Way, but we could add a hack for now 
[11:09:25] <eddyb> nmatsakis: DefItem?
[11:09:37] <nmatsakis> doing it the Right Way would also fix some long-standing issues around fn type inference
[11:09:57] <nmatsakis> eddyb: what I had in mind is a second pass somewhere that detects coercion from bare fn to closure and examines the expr being coerced
[11:10:14] <nmatsakis> eddyb: to check that it is an ExprPath that resolves to a DefItem
[11:10:20] <eddyb> nmatsakis: we already have an insertion point, no second pass
[11:10:20] <strcat> nmatsakis: could the env ptr just be at the end instead? 
[11:10:26] <eddyb> strcat: nope nope nope
[11:10:28] <strcat> nmatsakis: we use the cc calling convention
[11:10:46] <strcat> so passing an extra arg is harmless
[11:10:48] <nmatsakis> strcat: that's what I originally wanted and thought, but eddyb pointed out that it will cause problems if we move to a Fn trait
[11:11:01] <strcat> nmatsakis: well our functions wouldn't have an env param
[11:11:06] <strcat> I just mean closures would have it at the end
[11:11:10] <strcat> and therefore functions are closures
[11:11:13] <nmatsakis> point is, closure type would be an object type,
[11:11:21] <nmatsakis> and hence the environment of the closure would be the "self" type
[11:11:42] <eddyb> nmatsakis: I know where the coercion happens because I already disabled procs
[11:11:58] <eddyb> the coercion for procs, that is
[11:12:00] <nmatsakis> eddyb: yeah ok we can do it right at the spot. I forgot if the expr was available then.
[11:12:16] <eddyb> do you want me to do it? what do we do about bare fn -> procs?
[11:12:30] <ChrisMorgan> nmatsakis: I went trying to rebase augmented-assignment but there have been some fairly significant changes in there making it a little hard for me to figure out what I should be doing. I'll probably have another go at it early next week.
[11:12:42] <eddyb> the only users of the latter coercion were tests which were written before spawn was in the prelude
[11:12:45] <eddyb> or before do, for that matter
[11:13:02] <nmatsakis> eddyb: yes, do it as part of that branch
[11:13:20] <nmatsakis> strcat: does that make sense? I think he's right that it doesn't work, but it's only 6am here and my head might be cloudy :)
[11:14:06] <nmatsakis> ChrisMorgan: ok. I was thinking about that branch the other day; i've got another similarly rotting branch that makes some changes to how we handle operators, I was thinking about trying to roll the two together
[11:14:14] <strcat> nmatsakis: yeah it makes sense
[11:14:28] * strcat needs to get rid of this crappy kernel he made
[11:14:40] <nmatsakis> the only place it causes a problem is just coercing from a bare fn pointer (not item) into a closure,
[11:14:45] <ChrisMorgan> nmatsakis: I'm thinking it might make sense for me to trim mine down to just the traits, implementations and lang items and drop any pretense of actually hooking it into the compiler.
[11:14:50] <nmatsakis> which seems pretty unusual, if it happens at all.
[11:14:58] <nmatsakis> so it's a good trade. :)
[11:15:15] <nmatsakis> ChrisMorgan: that would still be valuable
[11:15:33] <nmatsakis> ChrisMorgan: as I recall the integration was fairly straight forward
[11:15:58] <nmatsakis> has anyone seen this LLVM error:
[11:16:07] <nmatsakis> SmallVector.h: Assertion `begin() + idx < end()' failed.
[11:16:27] <nmatsakis> when compiling deriving-to-str.rs with optimiziations enabled
[11:16:48] <nmatsakis> presumably my branch is at fault, but I just thought i'd check if anyone's seen it before :)
[11:17:47] <ChrisMorgan> nmatsakis: yes, it was (or should have been, but I made a mess of it due to not knowing enough)
[11:17:59] <strcat> nmatsakis: heh our LLVM has bounds checks? ;\
[11:18:07] <strcat> explains why it's 20-30% slower with asserts
[11:18:17] <nmatsakis> strcat: apparently :)
[11:18:42] * strcat hasn't seen that
[11:19:38] <nmatsakis> wish I had any idea which code it was related to
[11:19:41] <nmatsakis> something in the "sel dag"
[11:20:23] <strcat> nmatsakis: output IR and run bugpoint on it
[11:20:26] <strcat> <3 bugpoint
[11:20:41] <strcat> well that's assuming fastisel won't die on it
[11:21:08] <nmatsakis> strcat: ah, good idea. I was first trying commenting out lines in the source file. If that fails, I'll bring in bugpoint.
[11:24:04] * nmatsakis always forgets about bugpoint
[11:25:30] <nmatsakis> I wish we would generate consistent symbol names so that diff would work better
[11:25:38] <strcat> diff on IR?
[11:25:45] <strcat> nmatsakis: use vimdiff or meld, they catch partial lines
[11:25:57] <strcat> well, tbh I don't know how well meld works
[11:26:07] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[11:26:11] <nmatsakis> hmm, good point, emacs diff might be helpful in the same way
[11:26:11] <strcat> vimdiff will line up very similar lines and color the changed symbol number nonsense
[11:26:28] <nmatsakis> I was thinking of trying to write a regexp to strip out that portion of the name
[11:26:34] <nmatsakis> but I will try vimdiff or emacsdiff first 
[11:28:43] <strcat> one day I'll try setting vimdiff/meld as the git mergetool again
[11:28:59] <sigma> fugitive is awesome for that
[11:29:21] * strcat has fugitive but doesn't use it much
[11:29:37] <sigma> to be fair I actually only use it for git add -p
[11:30:08] <strcat> pfft, git add
[11:30:27] * strcat likes doing 20 git commit -p --amend
[11:30:27] <sigma> more of a commit -a man? :)
[11:30:33] <eddyb> nmatsakis: what do you think about my maybe-explicit-lifetime-annotated operator overload traits?
[11:30:33] <strcat> well, or -a
[11:30:40] <strcat> sigma: I like having stuff in the reflog
[11:30:57] <strcat> vim always loses my persistent undo trees because git touches the files
[11:31:14] <strcat> and I like being able to *delete* stuff that I might need  ;p
[11:31:36] <sigma> huh, I have that problem and abusing the reflog never occurred to me
[11:31:40] <sigma> nice
[11:33:29] <strcat> I only really use `add` to add files...
[11:33:49] * strcat doesn't really get staging
[11:34:29] *** Joins: larsberg (sid16141@moz-A42E5B7B.irccloud.com)
[11:34:34] <strcat> I'd rather just amend/rebase later
[11:37:19] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[11:47:06] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:48:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:55:55] *** Quits: notrusti (notrusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[11:58:40] *** Quits: bjz (bjz@moz-38D46E1C.perm.iinet.net.au) (Ping timeout)
[11:58:44] *** Joins: geomyidae_ (uid214@moz-E77DEB21.irccloud.com)
[12:01:46] *** Joins: binsh (binsh@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:03:39] *** Joins: a_m0d (a_m0d@moz-322A4DE4.acanac.net)
[12:04:04] <eddyb> nmatsakis: I hate how ty::subst is non-hygienic
[12:07:54] *** Quits: binsh (binsh@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[12:13:00] *** Joins: binsh (binsh@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:16:54] *** Joins: mib_6cg12j (Mibbit@6BBA85E0.E57335F3.73513262.IP)
[12:18:21] *** Quits: mib_6cg12j (Mibbit@6BBA85E0.E57335F3.73513262.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:19:43] *** Quits: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com) (Ping timeout)
[12:23:14] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[12:23:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:25:43] *** Quits: binsh (binsh@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[12:26:17] *** Joins: binsh (binsh@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:26:43] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:26:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2y9ngQ
[12:26:43] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:31:45] *** Joins: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com)
[12:31:53] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:31:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/yQvn_A
[12:31:53] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:31:55] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:31:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/U6xePQ
[12:31:55] <ghrust> 13rust/06auto 1462fbd00 15Vadim Chugunov: Only build LLVM tools Rust needs.
[12:31:55] <ghrust> 13rust/06auto 14e6a2742 15bors: auto merge of #11590 : vadimcn/rust/llvm-tools, r=alexcrichton...
[12:31:55] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:36:30] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:41:17] <pnkfelix> nmatsakis: ping
[12:41:50] *** Joins: gwty (gwtypc@A3F4FE97.CFB6D583.BD94A9D5.IP)
[12:44:47] *** Quits: a_m0d (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[12:46:54] <strcat> eddyb: why drag me into it ;p
[12:49:59] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:56:10] <strcat> binsh: rustc - <<< 'fn main() { println!("Hello, world!"); }' && size rust_out
[12:56:11] -binsh-    text	   data	    bss	    dec	    hex	filename
[12:56:11] -binsh- 1655153	 208088	   1536	1864777	 1c7449	rust_out
[12:56:50] <strcat> eddyb: one day they'll merge that mergefunc patch :(
[13:06:49] *** flaper87|afk is now known as flaper87
[13:24:05] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[13:24:44] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[13:26:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:27:16] *** Quits: binsh (binsh@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:42:14] *** Joins: Fill (Fill@moz-1107002D.kimsufi.com)
[13:45:49] <eddyb> nmatsakis: oops, there's no Expr, I remembered wrong
[13:46:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:46:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/U6xePQ
[13:46:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:46:44] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[13:47:16] <eddyb> nmatsakis: sorry I didn't realize this earlier. you think we need a special pass for it?
[13:48:06] *** Parts: Fill (Fill@moz-1107002D.kimsufi.com) (Leaving)
[13:51:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:51:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tgCEgQ
[13:51:47] <ghrust> 13rust/06auto 14f98f76e 15Derek Chiang: Fixing a typo: bookeeping -> bookkeeping
[13:51:47] <ghrust> 13rust/06auto 14f63a7f5 15bors: auto merge of #11596 : derekchiang/rust/fix-libnative-docs, r=alexcrichton
[13:51:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:51:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:51:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/l18BqQ
[13:51:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:52:34] *** Quits: gwty (gwtypc@A3F4FE97.CFB6D583.BD94A9D5.IP) (Ping timeout)
[14:04:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[14:10:15] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[14:15:41] <nmatsakis> pnkfelix: oh, I guess this channel, pong.
[14:16:31] <nmatsakis> eddyb: maybe-explicit-lifetime-annotated operator overload traits? I didn't see whatever it is that you're referring to yet, I think
[14:19:07] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[14:20:12] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[14:26:14] <nmatsakis> does anyone have any experience using bugpoint? strcat is not around anymore I guess :)
[14:27:12] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[14:28:09] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:31:47] *** Quits: rca (rcatolino@moz-FBA8CEE6.adsl.proxad.net) (Ping timeout)
[14:31:55] <pnkfelix> nmatsakis: I've been thinking about finalization.  Your comment on Tuesday about Send made me think of a scheme that I'm pretty excited about
[14:32:04] <nmatsakis> pnkfelix: oh? cool
[14:32:55] <pnkfelix> nmatsakis: but I wanted to check whether the mental model I'm slowly developing is, mm, compatible with our overall patterns for how we use the trait system
[14:33:27] <nmatsakis> pnkfelix: ok. I was about to run out and get a coffee, want to do a quick vidyo chat afterwards?
[14:33:41] <pnkfelix> nmatsakis: sure.  Just ping me.
[14:34:06] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[14:35:00] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[14:40:18] <nmatsakis> pnkfelix: ok, running out, be back soon
[14:41:19] <eddyb> nmatsakis: last night: [23:53] <eddyb> nmatsakis: note to self: trait Add<'lhs, 'rhs, Rhs, Ret> {fn add(&'lhs self, &'rhs Rhs) -> Ret;} and allow both impl Add<X, X> for X; and impl<'a> Add<'a, 'a, X, X> for X;
[14:43:09] *** Joins: rca (rcatolino@moz-FBA8CEE6.adsl.proxad.net)
[14:45:51] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[14:48:21] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[14:48:33] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:02:14] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:02:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tgCEgQ
[15:02:14] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:03:30] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[15:03:51] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[15:05:39] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[15:07:00] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:07:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4ku7PQ
[15:07:00] <ghrust> 13rust/06auto 149fe5d16 15Steven Fackler: Stop returning error strings in From{Base64,Hex}...
[15:07:00] <ghrust> 13rust/06auto 14fa91446 15bors: auto merge of #11597 : sfackler/rust/err-enums, r=alexcrichton...
[15:07:01] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:11:59] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:11:59] *** ChanServ sets mode: +ao dherman dherman
[15:12:00] *** Joins: lkuper (lkuper@B6422202.A0D37E9B.51B6877.IP)
[15:15:34] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[15:16:14] <eddyb> Some(fn_sig.inputs[0]).move_iter().chain(args).collect()
[15:16:25] <eddyb> this is a tad silly, we need val_iter on vectors
[15:24:07] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[15:24:13] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[15:29:01] <eddyb> // To reduce refcounting cost, we're representing types as unsafe pointers throughout the compiler. These are simply casted t_box values.
[15:30:01] <eddyb> I feel like we should fix that
[15:32:54] *** Quits: rca (rcatolino@moz-FBA8CEE6.adsl.proxad.net) (Ping timeout)
[15:33:35] *** Joins: rca (rcatolino@moz-FBA8CEE6.adsl.proxad.net)
[15:37:00] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[15:37:38] <eddyb> RefCell<HashMap<intern_key, ~t_box_>>
[15:37:54] <eddyb> why are the values not inlined?
[15:39:14] <nmatsakis> probably just dates from an older time where you couldn't get a ptr to the interior of the hashmap
[15:40:54] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[15:41:12] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[15:49:04] <pnkfelix> nmatsakis: will you be able to talk soon?  Otherwise we can discuss this tomorrow
[15:49:11] <nmatsakis> pnkfelix: yes I pinged you
[15:49:16] <nmatsakis> pnkfelix: was just about to ping you again :)
[15:49:29] <nmatsakis> pnkfelix: now is fine
[15:49:59] <pnkfelix> nmatsakis: hmm okay.  (My notification system seems to have failed me so I missed the ping)
[15:50:06] <pnkfelix> nmatsakis: I'll go find a spot to talk.
[15:50:07] <nmatsakis> pnkfelix: ok, my room?
[15:52:33] <pnkfelix> nmatsakis: sure, be there soon
[16:15:23] <eddyb> nmatsakis: so what do we do, if the expression is not actually available?
[16:16:02] <eddyb> I don't feel comfortable with adding another visitor
[16:19:17] <eddyb> maybe I should just stop thinking while I'm watching Ender's Game :)
[16:20:58] *** Quits: lkuper (lkuper@B6422202.A0D37E9B.51B6877.IP) (Quit: lkuper)
[16:21:44] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:21:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4ku7PQ
[16:21:44] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:23:43] *** Joins: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu)
[16:26:55] <eddyb> test result: ok. 1326 passed; 0 failed; 54 ignored; 0 measured
[16:28:50] <Luqman> eddyb: #11595 is awesome!
[16:29:32] <eddyb> Luqman: it passes tests
[16:32:03] *** Quits: Kxepal (Miranda@moz-EEB2B0E3.pppoe.mtu-net.ru) (Ping timeout)
[16:32:57] <eddyb> and I fixed the nit strcat mentioned
[16:35:27] *** Joins: Kxepal (Miranda@moz-D2BE416E.pppoe.mtu-net.ru)
[16:37:51] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[16:37:51] *** ChanServ sets mode: +qo brson brson
[16:40:11] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Ping timeout)
[16:40:24] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[16:40:52] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[16:42:45] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[16:43:08] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[16:43:12] <Luqman> eddyb: should push it to try in the meanwhile
[16:43:27] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[16:43:47] <eddyb> Luqman: would that allow it to be pushed to master without retesting?
[16:44:06] <eddyb> I don't have the commit rights to do that, but feel free to, if you do :)
[16:44:06] <Luqman> no
[16:44:34] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:44:34] <ghrust> 01[13rust01] 15luqmana 04force-pushed 06try from 14bad983e to 144522dcf: 02http://git.io/k471pw
[16:44:34] <ghrust> 13rust/06try 144522dcf 15Eduard Burtescu: Demote self to an (almost) regular argument and remove the env param....
[16:44:34] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:45:03] *** Joins: deens (deens@moz-A47475CE.hsd1.ca.comcast.net)
[16:45:30] <eddyb> Luqman: thanks :D
[16:45:47] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:45:52] *** Joins: gwty (gwtypc@A3F4FE97.CFB6D583.BD94A9D5.IP)
[16:47:26] <sfackler> this is just a spurious failure, right? http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/2694/steps/test/logs/stdio
[16:51:32] *** Quits: deens (deens@moz-A47475CE.hsd1.ca.comcast.net) (Quit: Leaving...)
[16:52:24] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:56:00] *** Quits: Kxepal (Miranda@moz-D2BE416E.pppoe.mtu-net.ru) (Ping timeout)
[17:01:52] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[17:01:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2OwFoQ
[17:01:52] <ghrust> 13rust/06auto 141f5dc55 15Seo Sanghyeon: Correct span for ExprCall and ExprIndex
[17:01:52] <ghrust> 13rust/06auto 149434e7c 15bors: auto merge of #11599 : sanxiyn/rust/accurate-span-3, r=luqmana
[17:01:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[17:02:28] <brson> sfackler: i think so
[17:02:37] <brson> really wish we could figure out why that happens
[17:02:46] <brson> a million kudos to whoever does
[17:02:58] <nmatsakis> eddyb: we could do the check in an existing pass, such as the writeback pass or as part of the type checker.
[17:03:08] <nmatsakis> brson: how do we feel about carrying a local LLVM ptach?
[17:03:15] <nmatsakis> in particular this one: http://llvm.org/bugs/show_bug.cgi?id=9900
[17:04:05] <eddyb> nmatsakis: when writeback writes the adjustments? mkay, I'll give a try, thanks
[17:04:16] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:04:50] <brson> nmatsakis: i'm fine with it, but we'll have to get it upstream eventually. where is this affecting us?
[17:04:50] <nmatsakis> eddyb: not sure that's the cleanest thing, but it's a hack anyhow. you could put FIXME(#2190)
[17:05:04] <nmatsakis> brson: at the moment, I think it is preventing my branch from landing ;)
[17:05:20] <nmatsakis> hopefully this is on its way to being upstreamed,
[17:05:24] <nmatsakis> maybe worth asking rafael
[17:05:33] <eddyb> local LLVM patch?
[17:05:41] <nmatsakis> but I'm not 100% sure that this patch addresses the problem, I have to try it locally
[17:05:52] <eddyb> (I guess everyone knows about my patch and it's not a bit thing, nevermind)
[17:05:55] <eddyb> *big thing
[17:06:12] <brson> nmatsakis: what are you using 0-size arrays for?
[17:06:28] <brson> nmatsakis: seems like the patch is dead since it's from 2011
[17:06:58] <nmatsakis> brson: I'm not using them for anything; existing code uses them, and somehow in my branch LLVM crashes during optimization
[17:07:08] <nmatsakis> brson: I'm trying to narrow down what if anything is different 
[17:07:21] <nmatsakis> brson: re: dates, I didn't look at the dates ;) 
[17:07:57] <nmatsakis> yeah, 2011 is kind of old.
[17:08:50] <sfackler> brson: could you retry this then? https://github.com/mozilla/rust/pull/11151
[17:11:39] *** Joins: Kxepal (Miranda@moz-4F25DFCF.pppoe.mtu-net.ru)
[17:12:17] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[17:14:20] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[17:18:20] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[17:32:28] <eddyb> nmatsakis: [T] is represented as [T x 0], right?
[17:33:48] <nmatsakis> eddyb: I believe so.
[17:33:56] <nmatsakis> or maybe *T, can't remember.
[17:34:01] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[17:34:47] <eddyb> [0 x T], sorry
[17:35:48] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[17:45:15] <nmatsakis> pnkfelix: ping
[17:49:25] <eddyb> okay, check in place, I'll see how big of an impact it has on the libs (hope I don't get bitten by tests)
[17:51:51] <Yurume> yay, I have a new (and hopefully final...) version of the Periodic Table of Rust Types: http://cosmic.mearie.org/2014/01/periodic-table-of-rust-types/testing
[17:52:01] <eddyb> Luqman: oops, thank you very much, I didn't think to check the tests http://buildbot.rust-lang.org/builders/try-linux/builds/778/steps/compile/logs/stdio
[17:52:07] <eddyb> more unused mut to burn
[17:52:11] <Yurume> this time I've hidden the proposed cells under the checkboxes
[17:52:31] <Yurume> and add why they are currently impossible
[17:52:33] <Yurume> added*
[17:52:35] <sfackler> Yurume: I'm not sure what the text in the bare trait box is supposed to mean
[17:53:20] <eddyb> the statically resolved thing?
[17:53:23] <Yurume> hmm, any suggestion?
[17:54:00] <eddyb> oh, it's more confusing than I remember it
[17:54:20] <Yurume> (actually I'm not sure how to describe that cell without DST)
[17:55:28] <eddyb> Yurume: "traits require forgetting the size" - idk
[17:55:49] <Yurume> much better, I'll try that
[17:56:30] <Yurume> "traits have no size information at compile time"?
[17:56:39] <eddyb> Yurume: nope
[17:56:45] <Yurume> hmm strange
[17:57:22] <kimundi> I think "Owned" vs "mutable reference" and "immutabel reference" is a bad name - "Owned pointer", "Owned box" or better "Owning pointer/box" would be more accurate - but that touches on the general issue of how to name them
[17:57:23] <eddyb> Yurume: that box is actually equivalent to a type
[17:58:35] <Yurume> kimundi, a-ha, was it changed in the manual by now?
[17:58:54] <eddyb> Yurume: "Statically resolved traits are no different than the types that implement them"
[17:58:58] <eddyb> I can't do better :(
[17:59:01] <Yurume> ...it turns out that it was so at least since 0.8 :S
[18:00:10] <kimundi> Yurume: Don'T know, I think not - as I said, I don't think there ever was a decision to stop calling them "owned", or even a discussion of whether that would be bad - I just personally think that "owning" would at least be more accurate, as all values in rust are owned, not just ~ pointers
[18:00:17] <eddyb> Yurume: Trait is actually the Unsized version of T, not... Trait
[18:00:28] <eddyb> you need a 3D periodic table
[18:00:50] <eddyb> or make an L
[18:01:02] <Yurume> kimundi, tried to do s/owned/owning/g as appropriate
[18:01:08] <eddyb> the intersection between indirect traits and indirect types is T
[18:01:09] <Yurume> (but not "owned" environment etc.)
[18:02:00] <eddyb> Yurume: in the black string box put "cannot restrict the backing storage of strings" - might need to rephrase it
[18:02:49] <kimundi> "Fixed sized strings do not make much sense with utf8 encoding"
[18:03:31] <Yurume> kimundi, that may or may not be the case
[18:03:42] <kimundi> Yurume: "Owned trait object" -> "Owning trait object", but I wonder if it would be more consistent with outside literature to keep it as "owned" for now
[18:03:53] <eddyb> nmatsakis: if you represent &[T] as &Trait, then it has a pointer and a vtable. &Trait doesn't really need tydesc, so &Trait with a single vtable item (thus including &[T]) unpack their only vtable item
[18:03:56] <kimundi> Yurume: Hm?
[18:03:59] <bjz> brson: Why doesn't Drop::drop take `self` by value?
[18:04:02] <Yurume> kimundi, it is "owned traits" in the manual
[18:04:06] <Yurume> tutorial*
[18:04:07] <nmatsakis> pnkfelix: in discussions with brson, we realized that making dtors in GC'd data hard is going to really hamped efforts to put smart pointers into GC data (for better or worse), and essentially relies on `~T` being considered safe
[18:04:51] <kimundi> Yurume: Are the others called owning in the tutorial?
[18:05:00] <nmatsakis> pnkfelix: (there has been vague talk of making `~T` more of a library type, though I tend to like the sugar myself -- but regardless of how you spell it, it's more about baking in the semantics I guess)
[18:05:10] <eddyb> nmatsakis: I may have just abstracted all DSTs to traits. maybe. it's a bit complicated, like ~Traits needs a dynamically-resolved drop_glue while ~[T] doesn't forget *that* information. ignore my tangent :)
[18:05:11] <nmatsakis> eddyb: I don't follow; in meeting at the moment though
[18:05:40] <Yurume> kimundi, "owned boxes", "owned closures" (`proc`), "owned traits"/"owned objects".
[18:05:43] <brson> bjz: it would require special rules specifically for the drop method that aren't worth the complexity
[18:05:51] <Yurume> these are three remaining usage of the term "owned" in the tutorial
[18:05:55] <Yurume> usages*
[18:06:07] <eddyb> nmatsakis: at least I know how to keep the current shallow closure representation (and reuse it for any &Trait exposing a single method)
[18:06:18] <cmr> brson: what rules would those be?
[18:06:23] <bjz> brson: ok - was just curious
[18:07:06] <eddyb> ouch, this fails: let ret = s.split_terminator(sep).map(Some);
[18:07:16] <eddyb> I guess I need to also allow DefVariant
[18:07:31] <kimundi> Yurume: Well, then I would change it back to owned for now, I'd say - but call the collum "Owned box"
[18:07:39] <brson> cmr: you have to decide what happens if the self value is moved out of the stack frame - do you drop it again? do you prevent the move?
[18:07:45] <Yurume> eddyb, tried s/cannot restrict/cannot be enforced/. does it make sense?
[18:08:16] <eddyb> Yurume: I was talking about the black boxes
[18:08:25] <brson> cmr: or not even out of the stack frame. self can go out of scope again within drop
[18:08:30] <kimundi> Yurume: And I didn'T get your earlier remark about "Fixed sized strings do not make much sense with utf8 encoding" :P
[18:08:31] <Yurume> eddyb, oops
[18:08:43] <eddyb> Yurume: the gray ones were fine AFAICT
[18:09:15] <bjz> brson: yeah, that makes sense
[18:10:33] <Yurume> "Strings cannot restrict their backing storage." does it make sense? (I wanted a complete sentence)
[18:10:42] <kimundi> Also, putting *T and *mut under references, with a black box for the ~ equivalent feels wrong too - if anything, both should stand alone, and either can be used for owned data
[18:11:05] <Yurume> kimundi, limited horizontal dimension :)
[18:11:25] <Yurume> they are separated from others so I think it's fine
[18:11:45] <eddyb> Yurume: same for traits
[18:12:01] <Yurume> agreed
[18:12:23] <Yurume> kimundi, I've reverted changes from "owned" to "owning", except for the "owning pointers" etc.
[18:12:43] <Yurume> I'm not sure whether to revert them as well
[18:13:07] <eddyb> Yurume: I mean, black box not gray box
[18:13:11] <kimundi> Yurume: Maybe change the row description from "immutable reference" to "immutable pointer", and then change the individual labels to "immutabel borowed reference, immutable borrowed slice" etc - that way, raw pointers and references would fit the column label
[18:13:24] <Yurume> eddyb, ...well I'm feeling a bit dummy
[18:13:27] <eddyb> Yurume: I've confused you. "statically resolved traits are no different than the types that implement them." is for the black box
[18:13:31] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:13:32] <Yurume> aww
[18:13:51] <eddyb> the original gray box was fine, AFAICT (yay repeating myself)
[18:14:13] <eddyb> Yurume: Trait is the unsized form of T, not Trait
[18:14:47] <eddyb> you can then have the indirection on the unsized Trait form or the sized "bare" T
[18:14:56] <kimundi> So, "Immutable pointer | Mutable pointer | Owned pointer" as labels on top
[18:15:06] <Yurume> eddyb, hmm, you are correct about that, I'll think a bit more about that
[18:15:32] <Yurume> hmm no
[18:15:56] <kimundi> With the black box for raw pointers being "Either *T or *mut T can fill this role, depending on context"
[18:16:02] <Yurume> there is an existing relation between the "simple" row and "trait" row (invisible in the current table)
[18:16:18] <eddyb> Yurume: yes
[18:16:31] <eddyb> Yurume: OOOH I know
[18:16:48] <eddyb> Yurume: move the trait row to under the simple row
[18:16:48] <Yurume> so it may make sense that... `Trait` goes to both columns.
[18:17:00] <eddyb> Yurume: then Bare T fills two rows
[18:17:17] <eddyb> just make it taller (I hope whatever you're working in allows to do that without much pain)
[18:17:48] <eddyb> Yurume: the Unsized column would still start half-way through
[18:17:50] <Yurume> ah okay
[18:18:06] <eddyb> yay I've removed the need for a third dimension :D
[18:18:14] <Yurume> *that* makes sense
[18:18:21] <Yurume> how about the current table?
[18:18:36] <Yurume> did I mess the descriptions again? :)
[18:19:07] <kimundi> Woha, that makes sense indeed
[18:19:12] <eddyb> Yurume: DST traits are wrong
[18:19:20] <Yurume> again! XD
[18:19:25] <eddyb> what did you have initially?
[18:19:31] <eddyb> I told you the gray boxes were fine all along
[18:19:49] <eddyb> also strings. wtf?
[18:19:54] <Yurume> kimundi, ah, I forgot to reply, eddyb pointed out that there are some possible operations with &mut str (e.g. reversing the order of code points) which are not very useful but possible.
[18:20:13] <eddyb> the backing storage comments were all about *Bare strings*
[18:20:33] <kimundi> Yurume: Yeah, sure. I mean the black box for fixed sized strings though ;)
[18:20:42] <Yurume> pfffff
[18:20:48] <eddyb> kimundi: niko.clone() in progress, 43%
[18:20:53] <Yurume> maybe I'm a lot sleepy...
[18:21:09] <Yurume> (3:20 AM here, I really have to sleep once this is sorted out)
[18:21:11] <eddyb> so how did it look originally?
[18:21:27] <Yurume> let me look for it...
[18:21:58] <eddyb> the unsized comments should be about indirection
[18:22:16] <eddyb> backing storage was about fixed-size strings
[18:22:57] <Yurume> eddyb, http://cosmic.mearie.org/2014/01/periodic-table-of-rust-types/testing2 this was the initial state
[18:23:09] <Yurume> right after I've posted a link to the draft
[18:23:23] <eddyb> Yurume: the grey ones are correct IMO
[18:23:33] <Yurume> okay
[18:23:47] <eddyb> "allocated to some other storage" is what I suggested to be replaced with something about unrestricted backing storage
[18:24:03] <Yurume> and nothing else?
[18:24:10] <kimundi> For the fixed sized string box, I think something along the lines of "Fixed sized strings are not very useful with the variable-length utf8 encoding"
[18:24:14] <Yurume> (apart from kimundi's one)
[18:24:31] <Yurume> sorry
[18:24:44] <Yurume> so eddyb and kimundi are referring the same box...
[18:24:52] <eddyb> you can restrict a vector to a fixed size (though the DST vector can be thought of as a fixed-sized vector which forgot it's static length)
[18:24:52] * Yurume feel infinitely stupid
[18:24:55] <Yurume> feels*
[18:25:02] <kimundi> Oh, we are? :P
[18:25:18] <eddyb> kimundi's comment is valid, but not complete. idk, roll with it if you want
[18:25:27] <Yurume> the box in the "bare" column and the "string" row, isn't it?
[18:25:28] <kimundi> eddyb: What am I missing?
[18:25:36] <eddyb> cannot enforce fixed-length strings containing variable-length utf8?
[18:26:17] <kimundi> sure can enforce, the subset of useful strings you can put int here is just comprartivly small ;)
[18:26:40] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:26:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2OwFoQ
[18:26:41] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:26:47] <eddyb> kimundi: not now, for example
[18:27:03] <eddyb> /home/eddy/Projects/rust/src/libextra/test.rs:896:47: 896:54 error: cannot coerce non-statically resolved bare fn
[18:27:05] <Yurume> updated, I really hope that I've got all cells correct in this time!
[18:27:07] <eddyb> time to fix libraries
[18:27:19] <bstrie> acrichto: casual ping
[18:27:30] <eddyb> Yurume: doesn't mention utf8, but it's not... wrong :)
[18:27:31] <Yurume> (reverted all cells in the "unsized" column, updated a "bare" "string" cell)
[18:27:58] <Yurume> eddyb, for the "mutable reference"-"string" cell?
[18:28:14] <eddyb> Yurume: no, the bare one, which kimundi was talking about
[18:28:36] <eddyb> I don't know about &mut str... is "little" proper english there?
[18:28:57] <kimundi> "few" would be more appropriate
[18:29:00] <Yurume> ah, right, should have been "few"
[18:30:13] <eddyb> kimundi: I didn't go directly for that, because I feel like "little" conveys "too few", as in "of little importance"
[18:30:13] <kimundi> Yurume: Anything else you're still changing at the moment?
[18:30:28] <Yurume> I don't think so
[18:30:34] <Yurume> I'm writing the changelog
[18:30:54] <kimundi> Yurume: I've still got a few remarks ;)
[18:31:03] <Yurume> go ahead :)
[18:31:17] <eddyb> StaticBenchFn(extern fn(&mut BenchHarness)),
[18:31:24] <eddyb> that should be a 'static closure
[18:32:28] <kimundi> First, I'm still unhappy with "String""Bare" - I have no idea what "Strings cannot restrict their backing storage." is supposed to tell me.
[18:32:47] <kimundi> I know what the idea behind it is, but I think the sentence itself still needs work
[18:32:54] <eddyb> kimundi: it means you can't have that "n" as in fixed-length vectors
[18:32:59] <eddyb> StaticTestFn(f) => run_test_inner(desc, monitor_ch, proc() f())
[18:33:18] <eddyb> acrichto: do you think ^^ should just have a proc for f, instead?
[18:33:25] <kimundi> eddyb: I know, and you could, it would just not be useful
[18:33:45] <eddyb> acrichto: though then I would have to enable bare fn -> proc again
[18:34:07] <eddyb> kimundi: that's not the reason we don't have StaticString
[18:34:15] <kimundi> One could define a str/N type that only allows 5 bytes of storeage - which would fit "abcde" or "bcd"
[18:34:23] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[18:34:31] <eddyb> (though [u8, ..128] is a pretty good way to do it)
[18:34:49] <kimundi> eddyb: hu? I'm sorry, what are you talking about?
[18:34:56] <eddyb> nevermind :)
[18:35:15] <eddyb> kimundi: I agree mentioning utf8 is good, but it should be stronger than "not useful"
[18:35:42] <kimundi> Anyway, having a fiex sized bare string is not useful neither now or in the future - I just want that "String""bare" box to contain a sentence that expresses the "why" halfway clear :)
[18:35:50] <eddyb> "managing variable-lenght utf8 in a fixed-size storage is impractical"
[18:36:01] <kimundi> THAT for example, yeah
[18:36:18] <eddyb> *length
[18:36:41] <kimundi> "Fixed sized storage is impractical for the variable length utf8 encoding of strings"
[18:37:06] <kimundi> "Fixed sized storage is impractical for the variable length utf8 encoding"
[18:37:18] <kimundi> DOes this last one sound good?
[18:38:38] <Yurume> sounds a lot better.
[18:38:43] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:38:52] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:40:10] <Yurume> kimundi, applied (modulo s/utf8/UTF-8), does it look good?
[18:41:13] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[18:43:23] *** Quits: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu) (Ping timeout)
[18:43:29] *** Joins: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu)
[18:43:50] <kimundi> Yes, looks awesome
[18:43:52] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[18:43:53] <kimundi> :)
[18:44:18] <kimundi> Now, I have one more major proposal for a change to the diagram
[18:45:00] <eddyb> rusti: let x: ||:Pod = ||{};
[18:45:01] -rusti- <anon>:10:13: 10:14 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[18:45:02] -rusti- <anon>:10         let x: ||:Pod = ||{};
[18:45:02] -rusti-                       ^
[18:45:02] -rusti- ()
[18:45:15] <eddyb> rusti: let x: ||:Pod = ||{}; let y = (x, x);
[18:45:17] -rusti- pastebinned 10 lines of output: http://ix.io/9Uo
[18:45:24] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[18:45:31] <eddyb> that is BS
[18:45:38] <eddyb> rusti: let x: 'static||:Pod = ||{}; let y = (x, x);
[18:45:38] <kimundi> First, to change "[ Immutable reference | Mutable Reference | Owned ]" to "[ Immutable pointer | Mutable pointer | Owned pointer ]"
[18:45:47] -rusti- failed to pastebin 10 lines of output
[18:46:00] <eddyb> 'static || contains no captures
[18:46:13] <Yurume> kimundi, agreed (and I forgot to apply that suggestion)
[18:46:13] <eddyb> ||:Pod should be Pod, thus copyable
[18:46:24] <eddyb> nmatsakis: how is 'static ||:Pod not copyable?
[18:46:42] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:46:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146c48fae to 149434e7c: 02http://git.io/N3iJvQ
[18:46:42] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:46:42] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:46:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/w0CMSA
[18:46:42] <ghrust> 13rust/06auto 14281bc65 15Steven Fackler: Load macros from external modules
[18:46:42] <ghrust> 13rust/06auto 144eee414 15bors: auto merge of #11151 : sfackler/rust/ext-crate, r=alexcrichton...
[18:46:43] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:46:44] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[18:46:47] <kimundi> And then to change the individual labels for &T and &mut T to "(Im)mutable reference" or "(Im)mutable borrowed reference"
[18:47:09] <nmatsakis> eddyb: 'static ought to be copyable, for sure.
[18:47:27] <Yurume> kimundi, so that the table matches that of the tutorial?
[18:48:01] <eddyb> nmatsakis: 'static || is not Send nor Pod by default (a separate issue). but I would think ||:Pod would enforce copyability
[18:48:10] <kimundi> Yurume: I don't know how the tutorial looks like - but if you mean "reference" instead of "borrowed pointer", then yes :)
[18:48:37] <Yurume> it seems so
[18:49:32] <Yurume> and it seems that I'd mixed the term "reference" with "borrowed pointer" anyway
[18:50:01] <nmatsakis> eddyb: that's probably rule; our handling of closure type and bounds is sufficiently broken right now that it's hard to say what it means, but once the work for #2202 lands, I think ||:Pod would be ok to copy
[18:50:01] <Yurume> kimundi, how about other usages of "borrowed"? e.g. borrowed vector slice?
[18:50:07] <nmatsakis> eddyb: *probably true
[18:50:25] <eddyb> nmatsakis: I have to break parallel test runners - or whatever extra::test::test_main_static does, or fix TypeContents
[18:50:35] <kimundi> Yurume: Either have borrowed everywhere, or nowehere in those labels
[18:50:44] <eddyb> nmatsakis: or keep using extern fn and add indirection
[18:51:04] <eddyb> the latest is the easiest one, and it's already being done
[18:51:05] <nmatsakis> eddyb: just do that, I'd say? is that about coercing from extern fn to closure?
[18:51:10] <Yurume> then I'd rather make them consistent.
[18:51:10] <kimundi> All & are borroed after all
[18:51:44] <eddyb> nmatsakis: yeah, benchmarks - timings won't suffer from an outer (potential) indirect call
[18:52:29] <eddyb> hmm, this is already done, three rows above, for DynBenchFn: let bs = ::test::bench::benchmark(|harness| bencher.run(harness));
[18:52:44] <kimundi> Yurume: Looks good - one last change I'D do is to change "Raw""Owned" to "Either *T or *mut T can fill this role, depending on usage"
[18:52:59] <kimundi> That is, change the black box there
[18:53:09] *** Joins: jensnock_ (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:53:30] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[18:54:01] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[18:54:52] <Yurume> kimundi, how about "Raw pointers do not have ownership built-in, and *T or *mut T should be used as appropriate."? *T/*mut T is not a drop-in replacement for <raw-owned> T anyway.
[18:56:19] <kimundi> Well, what would "having ownership build-in" mean in this context? that the thing they point at gets freed if the pointer goes out of scope?
[18:56:34] <eddyb> Yurume: now you need to add kinds :P
[18:56:39] <kimundi> In that sense, there is indeed no raw equivalent, as you'd have to do that manual there
[18:56:43] <Yurume> eddyb, awwwww!! :)
[18:57:00] <Yurume> I once had that thought and realized that there can be custom kinds...
[18:57:06] <eddyb> can there?
[18:57:20] <eddyb> there's only 3 kinds, Send, Freeze and Pod, AFAIK
[18:57:20] <Yurume> or proposed, but anyway.
[18:57:44] <eddyb> Yurume: hmm, maybe colored borders for kinds?
[18:57:53] <eddyb> (so you can have more than one)
[18:58:10] <eddyb> you need at least 6 colors
[18:58:26] <eddyb> because types can add, remove, or inherit kinds
[18:58:30] <bstrie> does https://github.com/mozilla/rust/pull/11585 completely implement the rvalue lifetime stuff?
[18:58:50] <eddyb> 585? isn't that me?
[18:58:51] <bstrie> cuz that would be really awesome
[18:59:03] <eddyb> hmm, coincidence, no
[18:59:20] <eddyb> bstrie: sounds like yes :D
[18:59:34] <Yurume> eddyb, https://github.com/mozilla/rust/blob/9075025c7b48ffc028b3bddbb983ceac98ce9636/src/librustc/middle/ty.rs#L727 there are five.
[19:00:16] <Yurume> 'static, Send, Freeze, Sized, Pod
[19:00:37] <Yurume> maybe kinds should go to some subtable, given its size...
[19:01:09] <eddyb> you already have the Sized distinction, that's why I didn't mention it
[19:01:22] <eddyb> 'static is awkward
[19:01:50] <eddyb> Yurume: I'm curious how borders would look... but I don't know
[19:01:57] <Yurume> eddyb, actually, there *can* be an additional column on the left of immutable pointer.
[19:02:04] <kimundi> 'static for kinds will be generalized to arbitrary lifetime bounds afaik - at least nmatsakis mentioned something like that
[19:02:06] <Yurume> (for &'static T etc.)
[19:02:17] <eddyb> kimundi: :'static is a thing
[19:02:27] <eddyb> maybe :'a? that would be... interesting
[19:02:33] <kimundi> eddyb: I know, that is what I'm talking about
[19:02:39] <Yurume> kimundi, right. that was my intention. it seems that my description makes some sense ;)
[19:03:14] <Yurume> "built-in" is a bit confusing, I think I can live without it
[19:03:18] *** Quits: jensnock_ (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:03:21] <Yurume> "Raw pointers do not have ownership, *T or *mut T should be used as appropriate."
[19:03:28] <acrichto> eddyb: bare fn => proc would make spawn() nice in some cases
[19:03:33] <eddyb> nmatsakis: is it worth opening an issue about explicitly annotated-with-lifetimes lang-item traits like trait Add<'lhs, 'rhs, Rhs, Ret>?
[19:03:48] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:04:05] <acrichto> brson: ping
[19:04:07] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Broken pipe)
[19:04:26] <eddyb> acrichto: only tests used that. it will only work when the function is statically resolved, unlike closures where you can have a relatively low-cost indirect call wrapper
[19:04:51] <eddyb> acrichto: if you decide it's worth keeping, I can re-enable it
[19:04:52] <acrichto> eddyb: the compiler/stdlib are terrible use case for seeing patterns with spawn
[19:05:18] <eddyb> (but I won't unfix the tests, they only used bare fns because they predate a lot of things)
[19:05:29] <kimundi> acrichto: Afaik there has been a solution for bare fn => proc/closure afaik - as eddyb said it would just be allowed for statically defined functions, not for arbitrary function pointers
[19:05:35] <acrichto> I'd be ok with restricting it to statically resolved things
[19:05:40] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:05:42] <acrichto> that's ok
[19:05:46] <kimundi> Or is them working with arbitrary function pointers the problem?
[19:05:49] <acrichto> although maybe a little surprising...
[19:06:13] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:06:25] <Yurume> okay, that's enough for today. I'm shipping the changes :)
[19:06:51] <eddyb> acrichto: my indirect wrapper for closures is equivalent to impl<..Args, Ret> Fn<..Args, Ret> for extern "Rust" fn(..Args) -> Ret; (which can be in the library in the future)
[19:07:00] <kimundi> Yurume: One last thing? ._.'
[19:07:18] <Yurume> kimundi, ;)
[19:07:18] <eddyb> acrichto: you can't have such an indirect wrapper for procs without allocating - in which case, they're similar to proc() f()
[19:07:19] <acrichto> eddyb: that's a wall of text to me :(
[19:07:31] <Yurume> but yeah, what's that?
[19:08:35] <eddyb> acrichto: with a Fn trait, a library implementation of Fn for bare functions would have a bare function pointer for self in fn call(&mut self, ..Arguments) -> Return
[19:08:51] <kimundi> Yurume: For consistency, and independent of what the tutorial say, either everything under owned pointers should have the name "owned" _or_ "owning" - there is no difference between them, just two ways to name the same thing
[19:09:41] <Yurume> haha. maybe it might be a good idea to change the tutorial instead XD
[19:09:46] <eddyb> though my generated closure wrapper for arbitrary bare functions requires one less indirection, &mut self/&self is a pointer to the function, not a reference to a pointer to the function
[19:09:57] <Yurume> kimundi, updated
[19:10:06] <eddyb> nmatsakis: can we have unsized bare functions?
[19:10:22] <eddyb> nmatsakis: so &extern "Rust" fn is a function pointer, not a double pointer
[19:11:10] <kimundi> Yurume: Great! Now I'm happy with everything :)
[19:11:20] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:11:34] <Yurume> eddyb, are you happy with the current state? (except for the kinds, I cannot really make that in time)
[19:11:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:12:09] <eddyb> Yurume: looks fine, go to sleep :)
[19:12:19] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:12:19] *** ChanServ sets mode: +qo brson brson
[19:12:20] <Yurume> thanks ;)
[19:13:09] <brson> acrichto: in a meeting
[19:16:53] <eddyb> now to decide whether to implement a fast call to the right function...
[19:17:06] <eddyb> or to go through ExprCall trans
[19:21:44] <eddyb>     -b <branch>           create and checkout a new branch
[19:21:50] <eddyb> I was in the dark for so long :(
[19:25:03] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[19:26:25] <eddyb> nmatsakis: callee::trans(bcx, expr) should return Callee {bcx: bcx, data: Fn(llval)} - llval should be usable outside of its bcx, for the cases of AutoEnv allowed - I hope I'm not screwing this up
[19:26:41] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:26:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144eee414 to 149434e7c: 02http://git.io/N3iJvQ
[19:26:41] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:26:42] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:26:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EgnijA
[19:26:42] <ghrust> 13rust/06auto 140e94ae4 15Derek Chiang: Fix some docs in std::rt::task
[19:26:42] <ghrust> 13rust/06auto 146141662 15bors: auto merge of #11571 : derekchiang/rust/fix-task-docs, r=alexcrichton...
[19:26:42] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:36:11] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:36:43] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:38:25] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:41:10] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:46:26] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:47:52] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:47:52] *** ChanServ sets mode: +qo brson brson
[19:53:03] <bstrie> acrichto: I've noticed an unusually high number of people noticing that our static binaries are really big, do we ever expect that to decrease by any noticeable amount or should I just tell them to use dynamic linking :)
[19:53:28] <acrichto> bstrie: option A is to use LTO to bring the size down, option B is really to just use dynamic linking
[19:53:33] <acrichto> like that's what dynamic linking is designed to do
[19:53:46] <acrichto> it has other implications, but if you just want a small binary then dynamic linking is the way to go
[19:54:06] <acrichto> I had an idea to make our "hello world" tiny, but it only applied to the LTO case
[19:54:16] <acrichto> and it had lots of caveats, so I don't think it's worthit
[19:54:44] <acrichto> a real solution would be for the "default case" to be better, and that would involve drastically changing how things work in terms of compilation
[19:54:58] <bstrie> acrichto: let's embed heuristics in the compiler such that it prefers dynamic if you're printing any variation of the string "hello, world" :)
[19:55:06] <acrichto> hehe
[19:55:48] <kimundi> let's just embedded a lto-optimized version of a "hello world" program into rustc and emit that :P
[19:56:44] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[19:58:27] <sfackler> bstrie: you doubted! https://github.com/mozilla/rust/pull/11151
[19:59:01] <bstrie> sfackler: ....what did I doubt?!
[20:00:21] <sfackler> that we'd actually get external syntax extensions merged :P
[20:00:24] <sfackler> back in december
[20:01:28] <bstrie> sfackler: that's not merged!
[20:01:50] * bstrie doubts
[20:03:19] <sfackler> augh!
[20:05:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:06:45] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:06:45] *** ChanServ sets mode: +o tjc
[20:07:13] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[20:09:42] <nmatsakis> brson: so, re: the LLVM patch, now that I knew what the issue was in relation to, I was able to make further changes to bypass the problem in the rustc side
[20:22:45] <eddyb> aaalmost there
[20:23:28] <eddyb> I hope I can get it ready for a review until I go to sleep
[20:24:01] <eddyb> nmatsakis: you're going to make me rebase on top of this? https://github.com/mozilla/rust/pull/11585
[20:24:22] <nmatsakis> eddyb: better you than me.
[20:24:24] <nmatsakis> ;)
[20:24:37] <nmatsakis> but I doubt it'll pass bors on the first go.
[20:24:40] <nmatsakis> never does.
[20:24:51] <eddyb> I need to fix a bunch of things in mine. gaah it's like two days late
[20:24:59] <nmatsakis> "late"?
[20:25:19] <eddyb> nmatsakis: just being bummed about twiddling my thumbs
[20:25:22] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:25:22] *** ChanServ sets mode: +ao dherman dherman
[20:31:25] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:38:02] <eddyb> commencing check-stage1. I hope it works
[20:39:04] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[20:41:02] <eddyb> rustc: /home/eddy/Projects/rust/src/llvm/lib/IR/Instructions.cpp:1084: void llvm::StoreInst::AssertOK(): Assertion `getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && "Ptr must be a pointer to Val type!"' failed.
[20:41:14] <eddyb> I went a bit nuts on removing opaque_box pointers
[20:41:33] <brson> acrichto: pong
[20:41:39] <brson> nmatsakis: sweet
[20:42:43] <eddyb> Store i64 (i8*, { i64, i64, [0 x i64] }*)* -> { i64, i64, [0 x i8] }* (i8*, { i64, i64, [0 x { i64, i64, [0 x i8] }*] }*)**
[20:43:01] <eddyb> erm, what?
[20:44:12] <acrichto> brson: you ok if I turn on core dumps on all the linux bots? I figured I'd use http://man7.org/linux/man-pages/man5/core.5.html to put everything in /cores/core.$pid like OSX
[20:44:25] <acrichto> brson: I feel like it's theo nly way we're gonna figure out what these random failures are
[20:44:35] <brson> acrichto: yes please. sorry i haven't done it
[20:44:43] <brson> acrichto: do you know how to modify the aws images?
[20:44:50] <brson> well, do the errors happen on aws?
[20:45:02] <brson> if they are just on linux1/2 then maybe adjusting them is sufficient
[20:45:15] <acrichto> yeah I think I'll just hope it happens where I enable core dumps :P
[20:45:16] <brson> or maybe adjusting them is sufficient anyway and we can leave ec2 alone
[20:45:26] <acrichto> I hope...
[20:46:14] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[20:46:50] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:46:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/EgnijA
[20:46:50] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:46:56] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:51:46] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:51:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/VjSYZA
[20:51:46] <ghrust> 13rust/06auto 14dd7b7eb 15Alex Crichton: Tweak the interface of std::io...
[20:51:46] <ghrust> 13rust/06auto 1472faeb2 15bors: auto merge of #11598 : alexcrichton/rust/io-export, r=brson...
[20:51:46] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:52:55] <eddyb> strcat: egrep \bopaque_box\b has 4 matches, only 3 are uses
[20:53:03] <eddyb> it's basically @Trait
[20:56:35] <eddyb> I don't understand what src/test/run-pass/autobind.rs is doing >_>
[20:56:40] <acrichto> strcat: ping
[20:56:47] <strcat> pong
[20:57:00] <acrichto> do you know what #9758 is about?
[20:57:07] <strcat> link?
[20:57:10] * strcat lazy
[20:57:15] <acrichto> https://github.com/mozilla/rust/issues/9758
[20:57:25] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:57:39] <strcat> acrichto: well, try making that change to UnsafeArc again
[20:57:40] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:57:40] *** ChanServ sets mode: +qo brson brson
[20:57:42] <strcat> I bet it still breaks
[20:57:51] <strcat> don't know why
[20:57:57] <acrichto> arc already has #[unsafe_no_drop_flag]
[20:57:59] <strcat> I fixed something related while trying to fix it
[20:58:08] <acrichto> https://github.com/mozilla/rust/blob/master/src/libstd/sync/arc.rs#L35
[20:58:33] <acrichto> strcat: you ok if I close?
[20:58:35] <strcat> ah the code changed
[20:58:38] <acrichto> esp b/c 3511 is being fixed
[20:58:40] <strcat> acrichto: well the bug is still there
[20:58:42] * strcat shrugs
[20:58:48] <acrichto> not after 3511 is merged though, rikght?
[20:58:57] <strcat> probably not ;]
[20:58:59] <acrichto> and it's also tough to say if the bug is still there b/c we don't know what the bug is
[20:59:16] <strcat> I could make another test case
[20:59:17] <eddyb> strcat: do we have traits used as &Trait or &mut Trait with only one method?
[20:59:30] <eddyb> acrichto: ^^ (I know Writer doesn't fit)
[20:59:41] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[20:59:52] <eddyb> we can optimize (vtable, ptr) to (method, ptr)
[20:59:55] <acrichto> I'm sure there's some trait like that
[21:00:00] <acrichto> but it's not that common I don't think
[21:00:13] <acrichto> well Deref may be one, but on one's gonna create &Deref
[21:00:31] <eddyb> hehe
[21:01:07] <eddyb> acrichto: maybe we could leave only one method in Writer, but it's not worth doing it just for this optimization
[21:02:38] <acrichto> brson: can I get root on linux{1,2} ?
[21:02:45] <acrichto> brson: I think I can only log in as rustbuild right now
[21:04:25] <strcat> ah right Map is missing clone
[21:07:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:07:59] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:10:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:12:48] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:22:36] <acrichto> brson: you ok if I delete the 0.9 milestone on github?
[21:23:57] <eddyb> strcat: I'll soon be removing ty_opaque_closure_ptr \o/
[21:31:32] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[21:31:32] *** ChanServ sets mode: +ao dherman dherman
[21:32:18] <brson> acrichto: yes, delete 0.9
[21:32:35] <brson> acrichto: give me a sec to put your keys on those bots
[21:32:45] <acrichto> brson: no rush of course
[21:36:35] <brson> oh dammit. i don't have root on them, just on linux1a/b
[21:36:40] <brson> i'll ping the man
[21:36:49] <acrichto> hehe
[21:36:50] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:36:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1472faeb2 to 146141662: 02http://git.io/N3iJvQ
[21:36:50] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:36:51] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:36:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QCpK9g
[21:36:51] <ghrust> 13rust/06auto 148f4edf9 15Derek Guenther: Update test run summary
[21:36:51] <ghrust> 13rust/06auto 14da6842f 15bors: auto merge of #11601 : dguenther/rust/fix_test_summary, r=brson...
[21:36:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:36:53] <eddyb> strcat: AAARGH I CAN'T DO IT :(((
[21:37:19] <eddyb> drop goes through the tydesc, and the tydesc is generated for ty_opaque_closure_ptr
[21:40:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:45:10] <Luqman> hmm, think it's reasonable to build with `-Z debug-info` when you pass --enable-debug?
[21:46:08] <cmr> yes.
[21:46:10] <acrichto> lol README.md still refers to cargo
[21:46:11] <cmr> I had a patch that enabled that.
[21:46:26] <cmr> debuginfo was having some problems at the time.
[21:48:01] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[21:55:31] <cmr> Luqman: https://github.com/mozilla/rust/issues/9770 https://github.com/mozilla/rust/issues/7205
[22:06:07] *** Quits: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu) (Ping timeout)
[22:06:22] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Client exited)
[22:09:24] *** Joins: jdm (jdm@47D9A12A.80DA567B.66C78069.IP)
[22:10:07] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:19:02] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[22:20:33] *** Joins: lkuper (lkuper@7405A0B9.654CD82F.51B6877.IP)
[22:22:41] *** Quits: jdm (jdm@47D9A12A.80DA567B.66C78069.IP) (Ping timeout)
[22:24:21] *** Joins: jdm (jdm@47D9A12A.80DA567B.66C78069.IP)
[22:25:06] *** Quits: lkuper (lkuper@7405A0B9.654CD82F.51B6877.IP) (Quit: lkuper)
[22:25:10] *** Quits: jdm (jdm@47D9A12A.80DA567B.66C78069.IP) (Quit: Lost terminal)
[22:26:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:26:47] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14da6842f to 146141662: 02http://git.io/N3iJvQ
[22:26:47] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:26:47] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:26:47] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/BuJn6A
[22:26:47] <ghrust> 13rust/06auto 14419ac4a 15Niko Matsakis: Issue #3511 - Rationalize temporary lifetimes....
[22:26:47] <ghrust> 13rust/06auto 14e71571a 15Niko Matsakis: Use as_slice() method on option
[22:26:48] <ghrust> 13rust/06auto 146badef4 15Niko Matsakis: Remove FIXMEs and add license
[22:26:50] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:26:53] <eddyb> strcat: wait, how on earth do proc envs get freed? I'm confused. very much so
[22:27:17] *** Joins: lkuper (lkuper@moz-6881CCA2.dhcp-bl.indiana.edu)
[22:27:52] <eddyb> drop_ty(bcx, box_cell_v, ty::mk_opaque_closure_ptr(tcx, ast::OwnedSigil))
[22:28:00] <eddyb> does that call through the tydesc or not?
[22:29:27] <eddyb> / Drop the tuple data then free the descriptor
[22:29:30] <eddyb> LOL
[22:29:33] <eddyb> it's obvious now
[22:30:28] <eddyb> bye bye ty_opaque_closure_ptr. sorry for being so weird, it's late here, I'm running on The Mentalist and addiction to refactoring
[22:34:05] *** bstrie is now known as bstrie_disappeared
[22:34:32] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:36:16] <sfackler> does bsd do something weird when it runs run-pass tests?
[22:37:34] <sfackler> oh, maybe the same thing as windows? librun_pass_stage2.so?
[22:39:50] <acrichto> sfackler: yeah bsd run check-fast
[22:39:55] <acrichto> runs*
[22:46:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:46:30] *** ChanServ sets mode: +qo brson brson
[22:46:41] *** Quits: rca (rcatolino@moz-FBA8CEE6.adsl.proxad.net) (Ping timeout)
[22:47:35] <sfackler> acrichto: where should I put feature gate stuff for check-fast?
[22:48:02] <acrichto> sfackler: I wouldn't run this stuff during check fast at all 
[22:48:19] <sfackler> that'd be xfail-fast, right?
[22:48:22] <acrichto> yeah
[22:48:25] <sfackler> cool
[22:49:43] <eddyb> haha, dropping a proc involved two null comparisons instead of one
[22:49:55] <eddyb> this is so good, simplifying crap away
[22:59:06] *** Quits: gwty (gwtypc@A3F4FE97.CFB6D583.BD94A9D5.IP) (Ping timeout)
[23:02:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:02:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pQ97qQ
[23:02:04] <ghrust> 13rust/06auto 1406544fe 15Flavio Percoco: Add a generic power function...
[23:02:04] <ghrust> 13rust/06auto 14753bb83 15bors: auto merge of #11503 : FlaPer87/rust/master, r=huonw...
[23:02:04] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:02:05] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:02:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b7807c7 to 146141662: 02http://git.io/N3iJvQ
[23:02:05] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:03:27] <sfackler> acrichto: re-r? xfail-fast'd all the run-pass tests. https://github.com/mozilla/rust/pull/11151
[23:04:28] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[23:05:03] <pnkfelix> acrichto: ping
[23:08:50] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:08:51] <acrichto> pnkfelix: pong
[23:09:22] <pnkfelix> acrichto: I'm playing with integrating BDW gc and trying to work through some oddities 
[23:09:32] <acrichto> BDW?
[23:09:59] <pnkfelix> acrichto: oh, sorry: BDW == Boehm-Demers-Weiser
[23:10:05] <pnkfelix> acrichto: the conservative GC
[23:10:05] <acrichto> ah
[23:10:09] <acrichto> cool
[23:10:16] <pnkfelix> acrichto: So my most immediate question is
[23:10:48] <pnkfelix> acrichto: as a matter of policy, do we strive to ensure that every libc::malloc from Rust code has its corresponding free in Rust code as well?
[23:11:07] <pnkfelix> acrichto: Or do I need to be concerned about mallocs in Rust land and frees in C land, or vice versa?
[23:11:16] <pnkfelix> acrichto: (I'm thinking specifically of libuv here.)
[23:11:32] <acrichto> I believe that the current case is that all mallocs that happen in rust get free'd in rust
[23:11:41] <pnkfelix> acrichto: Okay.
[23:11:43] <acrichto> and I think that if you're dealing with ~ pointers then you have to do that to guarantee safety
[23:11:52] <acrichto> the only fuzzy part is strings I think
[23:12:02] <acrichto> we may get some strings from C or pass some strings off to C
[23:12:03] <acrichto> but nothing important
[23:12:11] <acrichto> certainly nothing with GC things
[23:12:18] <pnkfelix> acrichto: Okay.
[23:14:23] <eddyb> strcat: make_free_glue is completely gone :D
[23:14:29] <pnkfelix> acrichto: (The only other weird thing is that it seems like the address that `free` is getting, at least from BDW's point of view, an address that is 0x30 bytes more than the address that it had returned via `malloc`.  I'm still puzzling over that one; it might be an instrumentation mistake on my part.)
[23:15:09] <acrichto> pnkfelix: does this replace the malloc/free symbols globally?
[23:15:27] <pnkfelix> acrichto: "globally" is a funny word...
[23:15:37] <acrichto> does it export the malloc/free symbols?
[23:16:04] <pnkfelix> acrichto: but yes, the general intention is that if you have storage that will either allocate GC storage *or* have an owning reference to GC storage, then you need to use the BDW provided alloc/free
[23:16:42] <acrichto> so we had problems in the past like this jemalloc
[23:16:51] <acrichto> things like libuv was creating strings (or libc)
[23:16:52] <pnkfelix> acrichto: I'm trying to get away with plugging substitutes at the global_heap.rs level
[23:16:53] <acrichto> and then we call free
[23:17:16] <pnkfelix> acrichto: Okay, and that was for ~str storage ?
[23:17:21] <acrichto> so basically what happened is that we overrode the local free, but didn't override hte upstream mallocs
[23:17:25] <acrichto> *c_char most likely
[23:17:30] <pnkfelix> hmm yes of course
[23:17:35] <acrichto> although I remember seeing it for other things as well
[23:18:06] <pnkfelix> acrichto: Okay, well I'll set a breakpoint on malloc too, I should have done that already
[23:18:10] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[23:18:23] <pnkfelix> acrichto: and see if I get stack-traces that are smoking guns that way
[23:19:32] <pnkfelix> acrichto: In principle for storage that both does not hold any ptrs and is not itself collectable, I could resort to the system malloc/free
[23:19:44] <pnkfelix> acrichto: (assuming that BDW is not already doing that in the first place)
[23:19:56] <acrichto> yeah I never understood how that worked
[23:20:05] <acrichto> I would avoid overriding the malloc/free symbols if I were you
[23:20:08] <pnkfelix> acrichto: The only reason not to do that would be if BDW wants to know how many bytes have been allocated via those paths
[23:20:26] <pnkfelix> acrichto: I'm trying to ensure that the standard malloc/free remains exposed in the normal place
[23:20:34] <acrichto> makes sense
[23:20:48] <acrichto> I wouldn't guarantee that we malloc/free correctly everywhere though
[23:20:50] <pnkfelix> acrichto: but one needs to put the GC-enabled allocation/free hooks somewhere...
[23:21:01] <acrichto> yeah
[23:21:02] <pnkfelix> acrichto: okay.  But in terms of our policy
[23:21:09] <acrichto> well we don't relaly have a policy
[23:21:10] <pnkfelix> acrichto: it would be considered an actionable bug, right?
[23:21:14] <acrichto> it's always "just wworked in the past"
[23:21:18] *** flaper87 is now known as flaper87|afk
[23:21:21] <acrichto> well the bug would be "audit all malloc/free callsites"
[23:21:28] <acrichto> to just make sure they shouldn't be exchange{alloc,free}
[23:21:30] <pnkfelix> acrichto: i.e. if I found ways to fix it, or at least make it more explicit that there's this constraint
[23:21:35] <pnkfelix> acrichto: yeah.  Yeah, okay.
[23:21:49] <acrichto> we can certainly be more vigilant from now on
[23:23:53] <pnkfelix> acrichto: hmm.  No malloc/free's caught by lldb after main starts before I see the phenomenon.  I'll have to dig more into it.
[23:25:03] <pnkfelix> acrichto: (maybe I just screwed up something and am passing the wrong address back from malloc() or into free().  Need to look more.)  Anyway, thanks for the info.
[23:25:13] <acrichto> np
[23:26:28] <acrichto> brson: I'm sad to say that we may be back at the mutex drawing board, this flavor of mutex is 25-40% slower across the board compared to pthreads
[23:32:56] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:33:26] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:35:12] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[23:36:07] *** Joins: ktt3ja (ktt3ja@moz-515C1363.hsd1.va.comcast.net)
[23:36:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:41:22] <brson> acrichto: that's not awesome
[23:41:29] <brson> acrichto: did you test your previous version?
[23:41:35] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:41:43] <acrichto> brson: I want to be 100% sure, so compiling on another linux VM that has 'perf' installed righ tnow
[23:41:58] <acrichto> brson: I didn't test my previous version exhaustively, but I remember it being just as fast
[23:42:08] <acrichto> with essentially 0 slowdown
[23:43:08] <strcat> are they still using pthread locks somewhere? I'm curious why it's not faster
[23:43:20] <eddyb> why do we have a move_val intrinsic?
[23:43:23] <strcat> pthread locks seem really slow
[23:43:24] <strcat> eddyb: take glue
[23:43:31] *** Quits: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com) (Quit: Leaving)
[23:43:32] <strcat> eddyb: if it's not used it can just be removed
[23:43:40] <strcat> since take glue will be gone afaik
[23:43:42] <eddyb> isn't it equivalent to *dst = src;
[23:43:44] <acrichto> strcat: in my previous version there were no atomics in the uncontended case (except for the pthread_trylock), but in this new version there's always at least one atomic
[23:43:57] <eddyb> strcat: take glue will be gone with @Trait AFAIK
[23:43:58] <strcat> eddyb: I don't think so
[23:44:05] <strcat> (the previous thing)
[23:44:14] <strcat> acrichto: well pthread_trylock is probably slow too
[23:44:25] <eddyb> wait, do you really need take_glue?
[23:44:30] <acrichto> strcat: perhaps, but that's not too helpful b/c we have no alternatives right now
[23:44:36] <strcat> eddyb: no it was in response to the previous thing
[23:44:45] <eddyb> isn't it... obvious what should be done for @T and @Trait?
[23:44:53] <strcat> removed?
[23:45:01] <eddyb> it always has the same repr, and ~T can never have the headers
[23:45:23] <eddyb> strcat: I mean, take_glue is always a known operation now
[23:45:27] * strcat doesn't really know what the topic is
[23:45:35] <eddyb> heh
[23:45:40] <strcat> eddyb: a struct with @ inside has take glue
[23:45:47] <eddyb> wait, what?
[23:45:53] <strcat> struct foo { x: @int, y: int }
[23:45:56] <strcat> that struct has take glue
[23:46:03] <strcat> it has to refcount for `x` on a shallow copy
[23:46:04] <eddyb> I hate thinking about @T
[23:46:44] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:46:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14753bb83 to 146141662: 02http://git.io/N3iJvQ
[23:46:44] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:46:45] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:46:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iti8lQ
[23:46:45] <ghrust> 13rust/06auto 14328b47d 15Steven Fackler: Load macros from external modules
[23:46:45] <ghrust> 13rust/06auto 14c08aa41 15bors: auto merge of #11151 : sfackler/rust/ext-crate, r=alexcrichton...
[23:46:46] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:47:06] <pnkfelix> acrichto: Ah, we use the (deprecated?) llvm malloc/free instructions.  I wonder if that is related here.
[23:47:11] <eddyb> strcat: wait, but how can shallow copies be done through a trait pointer (hence take_glue)?
[23:47:15] <strcat> pnkfelix: I don't think we do... afaik
[23:47:24] <acrichto> pnkfelix: that would be news to me!
[23:47:25] <strcat> where do you see those?
[23:47:52] <pnkfelix> strcat: I just tried commenting (well,#cfg'ing) them out , and I got a build failure.  Am looking.
[23:48:02] <eddyb> AFAIK take_glue is only for @T and @Trait
[23:48:10] <strcat> eddyb: and anything with @ inside
[23:48:35] <pnkfelix> strcat: trans/build.rs has things that calls out to them, but those might be dead code too (I hope!)
[23:48:36] <eddyb> but a structure doesn't have a tydesc
[23:48:58] <eddyb> strcat: I think take_glue was used only by ~Trait containing @T
[23:49:01] <eddyb> or was required
[23:49:02] <strcat> eddyb: it does have a corresponding tydesc, just not one inside it
[23:49:14] <strcat> generated as needed
[23:49:18] <eddyb> forget that can happen, think virtual
[23:49:21] <strcat> pnkfelix: they're dead
[23:49:25] <strcat> pnkfelix: afaik...
[23:49:35] <strcat> pnkfelix: we use lang items for malloc/free
[23:49:39] <strcat> or direct calls to them
[23:49:42] <strcat> in the stdlib
[23:49:46] <eddyb> strcat: are there virtual calls to take_glue that can't be statically resolved?
[23:49:48] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[23:50:00] <pnkfelix> strcat: yeah, I found those (the lang items and the calls I could grep for in stdlib) and replaced them already
[23:50:08] <strcat> eddyb: maybe not anymore
[23:50:09] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[23:50:55] <eddyb> okay, I'll try to remove it after someone r+'s my env/self PR. which needs a lot of fixing. boy oh boy
[23:51:06] <pnkfelix> strcat: but I suppose this is all moot since the debugger did not observe any control transfers into malloc/free that were not mediated by the GC_malloc/GC_free that I've inserted.  So back to drawing board for me...
[23:51:36] <eddyb>     /// `init` is unsafe because it returns a zeroed-out datum, which is unsafe unless T is POD. We don't have a POD kind yet. (See #4074).
[23:51:39] <pnkfelix> acrichto: strcat: (And yes, AFAICT the code that calls out to the LLVM free/malloc/array_malloc insns are all dead)
[23:51:46] <eddyb> LOL, libstd, a bit outdated, ain't you?
[23:51:51] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[23:51:55] <strcat> acrichto: btw what's the case you're benchmarking? how many instructions in the lock scope and how many concurrent threads?
[23:52:12] <acrichto> strcat: 0 instructions in the critical section and 1-8 threads
[23:52:13] <brson> acrichto: i haven't read the responses to the channel rfc yet, but i do intend to maybe today
[23:52:37] <acrichto> brson: there was far fewer responses than I thought there would be
[23:53:01] <acrichto> /home/alex/rust/src/rt/rust_cxx_glue.cpp:21: undefined reference to `__cxa_begin_catch'
[23:53:04] <acrichto> haven't gotten that one in awhile
[23:53:16] <brson> why does that still exist?
[23:53:21] <acrichto> that's from way back when
[23:53:23] <brson> oh
[23:53:30] <acrichto> if you don't run 'make clean' it leaves the object in the archive
[23:53:37] <acrichto> this is like a 2 month old repo
[23:55:20] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[23:56:43] <brson> erickt: does running a meetup on meetup.com cost money?
[23:57:10] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[23:57:59] <erickt> brson: it's $12 a month, it's no big deal
[23:58:25] <pnkfelix> I think Paris needs a Rustaceans meetup  :)
[23:58:40] <erickt> meetups for everyone!
