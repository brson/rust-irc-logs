[00:17:28] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[00:21:44] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[00:38:18] *** Quits: brson (brson@moz-7ji.c9m.56.172.IP) (Quit: leaving)
[00:44:50] <eddyb> come on, SIGILL with no output?
[00:45:12] <huon> sounds like a segfault
[00:45:33] <eddyb> it's annoying
[00:45:58] <eddyb> wait, what?
[00:46:00] <eddyb> 0x00007ffff630c3a6 in check::coercion::Coerce$LT$$u27$f$C$$u20$$u27$tcx$GT$::can_unsize_ty::h7237625cc89d27a2Vtf ()
[00:46:11] <eddyb> how did I segfault in safe code?
[00:46:26] <eddyb> with the snapshot compiler's codegen
[00:46:40] <eddyb> and a silly small stack
[00:47:36] <eddyb> huon: stack overflows do print something specific, don't they?
[00:50:58] <eddyb> the frame pointers look all wrong :/
[00:51:12] <eddyb> aren't they supposed to be generally decreasing?
[00:51:23] <eddyb> (from entry point to leaves)
[00:57:34] <eddyb> oh, I'm dumb, those are RIPs not RSPs
[00:57:47] <eddyb> the 7ffffff part always confuses me
[00:58:33] *** Joins: brson (brson@moz-7ji.c9m.56.172.IP)
[00:58:33] *** ChanServ sets mode: +qo brson brson
[00:58:40] <eddyb> apparently a read from the stack is causing the segfault. although LLVM could be using RBP to store something else
[00:59:02] <eddyb> oh
[00:59:09] <eddyb> doener: I have a nullptr dereference...
[00:59:23] <cmr> eddyb: pretty sure RBP isn't used as the base pointer on x86_64 ever.
[00:59:28] <cmr> (by rustc)
[00:59:39] <cmr> except maybe on mac iirc, due to some obscure gdb issue.
[00:59:45] <cmr> (but that may have been fixed)
[00:59:51] *** Quits: brson (brson@moz-7ji.c9m.56.172.IP) (Quit: leaving)
[01:00:01] <eddyb> you mean we always act like -fomit-frame-pointer or something?
[01:00:05] <cmr> yes.
[01:00:19] <eddyb> well, it's not the stack because it's... 0
[01:00:55] <eddyb> I have no idea why, there's no unsafe code
[01:01:46] <eddyb> not in typeck and not in middle::traits
[01:03:23] *** Quits: Sergio (Sergio@moz-23roph.bz) (Ping timeout: 121 seconds)
[01:11:37] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[01:14:11] <eddyb> inc_strong<alloc::rc::Rc<rustc::middle::ty::TraitRef>> (self=<optimized out>)
[01:14:17] <eddyb> well, debuginfo works
[01:15:36] <eddyb> looks like calling .clone() on a captured variable ends up with invalid data
[01:15:52] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[01:16:13] <eddyb> actually, no, it could very well be a function
[01:18:25] *** Joins: Sergio (Sergio@moz-23roph.bz)
[01:20:05] <eddyb> doener: I have foo.by_ref_method(match foo.field { Variant(ref data) => data.clone(), _ => unreachable!() })
[01:20:16] <eddyb> doener: anything suspicious about that?
[01:29:52] <eddyb> nmatsakis: I see a commit of yours in the rollup. wouldn't trait inheritance result in the vtable of Fn having 3 methods?
[01:53:51] <reem> since vtables are statically allocated does it make a difference?
[02:05:49] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[02:10:05] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[02:55:06] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Ping timeout: 121 seconds)
[02:59:59] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[03:04:15] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[03:05:23] *** Joins: reem_ (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP)
[03:09:18] *** Quits: reem (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[03:10:59] *** Quits: reem_ (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP) (Connection closed)
[03:11:01] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[03:12:49] *** Joins: bombless (bombless@moz-raekri.0v2u.0v40.0da8.2001.IP)
[03:12:53] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[03:24:53] *** Quits: kimundi (kimundi@moz-7lq6bi.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:27:52] *** Joins: zz_kimundi (kimundi@moz-b2ofg1.dip0.t-ipconnect.de)
[03:27:53] *** zz_kimundi is now known as kimundi
[03:54:08] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[03:58:22] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[04:01:29] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[04:05:16] *** Quits: bombless (bombless@moz-raekri.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[04:35:24] *** Joins: bombless (bombless@moz-odk.piv.41.59.IP)
[04:35:38] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[04:43:34] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:48:19] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[04:52:35] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[05:20:17] *** Quits: eddyb (eddyb@moz-dhp.t65.25.188.IP) (Ping timeout: 121 seconds)
[05:35:36] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[05:42:27] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[05:46:43] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[06:12:45] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[06:17:13] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[06:36:41] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[06:40:53] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[07:07:03] *** bombless is now known as bombless_afk
[07:30:49] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[07:32:16] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[07:35:03] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[07:44:19] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[07:44:47] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[07:48:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[07:55:58] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[07:56:43] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[07:57:23] *** bombless_afk is now known as bombless
[08:01:13] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:01:28] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[08:02:30] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[08:24:57] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[08:27:54] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:29:13] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[09:02:57] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[09:08:31] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[09:19:08] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[09:23:22] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[09:28:13] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:28:28] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[09:28:29] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:46:07] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[09:47:02] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:54:38] *** Joins: doener (doener@moz-929cn9.unity-media.net)
[10:05:43] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[10:05:44] *** ChanServ sets mode: +o pnkfelix
[10:13:18] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[10:17:34] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[10:33:03] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[10:34:27] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[10:34:28] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[11:04:42] *** Quits: WindowsBunny (Peter@moz-7f2st1.east.verizon.net) (Connection closed)
[11:06:38] *** Joins: WindowsBunny (Peter@moz-7f2st1.east.verizon.net)
[11:07:28] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[11:08:09] *** Quits: bombless (bombless@moz-odk.piv.41.59.IP) (Quit: Leaving)
[11:11:44] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[11:25:37] *** Joins: bombless (bombless@moz-raekri.0v2u.0v40.0da8.2001.IP)
[11:26:45] *** Joins: eddyb (eddyb@moz-dhp.t65.25.188.IP)
[11:27:00] *** Quits: JustAPerson (JustAPerson@moz-un628q.moe) (Ping timeout: 121 seconds)
[11:29:08] <eddyb> doener: the adventure continues. I wonder if the specific AST generated for `while let Ok(Some(Variant(x))) = result { result = foo(&bar(&x)); }` is capable of calling bar with a zeroed x
[11:29:52] *** Joins: JustAPerson (JustAPerson@moz-un628q.moe)
[11:33:03] <doener> eddyb: related to the nullptr deref you mentioned last night?
[11:34:00] <eddyb> yeah
[11:34:22] <eddyb> DEBUG:rustc_typeck::check::coercion: TrPr: 0x7fc242ff0ff0 [0x0, 0x7fc2394a4920, 0x0, 0x0, 0x0, 0x0, 0x1, 0xa]
[11:34:30] <eddyb> DEBUG:rustc_typeck::check::coercion: TrPr: 0x7fc242ff0ff0 [0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0]
[11:35:05] <eddyb> doener: so I'm printing 8 "words" of x (it's likely just a couple, but I didn't bother to use size_of)
[11:35:16] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[11:35:42] <eddyb> doener: according to the iterations, this last one should not even match the Variant I'm expecting
[11:36:13] <eddyb> can_unsize_ty(source=Fat<Fat<[_; 3]>>, target=Fat<Fat<[isize]>>)
[11:37:00] <eddyb> so, uhm, it's likely Ok(None)
[11:37:22] <eddyb> doener: `while let` keeps matching even when the condition doesn't hold anymore
[11:37:50] <eddyb> doener: but I'm not sure I can reproduce this outside of rustc
[11:42:31] <eddyb> whoa
[11:42:52] <eddyb> doener: there's two empty lines! http://is.gd/Bseq2c
[11:42:54] <eddyb> doener: in the output!!!
[11:43:41] <eddyb> doener: to make it clearer: http://is.gd/9yOuVH
[11:44:41] <eddyb> OH
[11:45:09] <eddyb> doener: no, I was wrong, in my case there's one last iteration that should still match... and it does match correctly. but then the data is zeroed
[11:45:51] <eddyb> doener: actually, only the first iteration of the loop has non-zeroed data, and that's what I reproduced
[11:51:28] <eddyb> doener: this is getting stupid http://is.gd/QRoRvS
[11:51:52] <eddyb> pnkfelix: ^^ are you aware of any zeroing bugs?
[11:53:07] <pnkfelix> eddyb: I wouldn't be surprised 
[11:53:18] <eddyb> just loop and match: http://is.gd/NVYOcJ
[11:53:42] <eddyb> hang on, I wonder if this is the bug you commented on last month or so
[11:53:47] <doener> eddyb: hmm... in a match the var is actually indirect. So "x" is a pointer into result. And at the end of the match, x gets dropped, which actually drops the string in result
[11:54:09] <eddyb> doener: look at the last one, it's much simpler
[11:54:11] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[11:54:40] <arielb1> nmatsakis: ping
[11:55:27] <pnkfelix> eddyb: looks pretty goofy
[11:55:34] <doener> eddyb: http://is.gd/AXCHV3
[11:55:44] <eddyb> oh this is an ICE https://github.com/rust-lang/rust/issues/18845
[11:55:55] <eddyb> not an actual runtime issue
[11:56:32] <eddyb> doener: hahahahaah what?
[11:56:33] <eddyb> wtf
[11:56:58] <eddyb> how can it be so general?
[11:57:51] <pnkfelix> in any case, please file a bug
[11:58:09] <pnkfelix> (or I can do so; just want to make sure it happens)
[11:58:48] <eddyb> doener: hmm, so `match result` moves out of `result` and zeroes it while reusing its location for `x`?
[11:59:52] <eddyb> it doesn't happen with a for loop - oh, because that's also desugared
[12:00:35] <pnkfelix> eh I'll file one
[12:01:56] <eddyb> doener: nevermind, I see what's going on
[12:02:30] <eddyb> pnkfelix: wait! I came up with a better demo
[12:02:44] <pnkfelix> doener's last one is pretty good
[12:02:59] <eddyb> well, doener knows what's up, but this is just the symptom
[12:03:21] <pnkfelix> in any case this makes it crystal clear its a bug: http://is.gd/rKHkuR
[12:03:23] <eddyb> this is what I'd put in an issue: http://is.gd/ntbj0j but I want to try something else
[12:10:45] *** Joins: acharles (acharles@moz-ulbdcn.ca.comcast.net)
[12:18:47] *** Joins: dasflkjwk (Mibbit@moz-r5p.f33.174.217.IP)
[12:30:12] *** Parts: dasflkjwk (Mibbit@moz-r5p.f33.174.217.IP) ()
[13:06:09] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[13:09:23] <doener> eddyb: hm, there's actually code that's supposed to handle that AFAICT
[13:11:35] *** Joins: joel2 (joel@moz-6ampnk.gtri.gatech.edu)
[13:18:57] <nmatsakis> arielb1: pong
[13:24:26] <doener> eddyb: LOL!
[13:25:16] <doener> eddyb: http://is.gd/qpFJts
[13:25:35] <arielb1> nmatsakis: I thought about the candidate_should_be_dropped_in_favor_of
[13:25:48] <arielb1> it seems wrong
[13:26:01] <arielb1> I mean, that function is kind-of really wrong
[13:26:06] <arielb1> and not only with respect to regions
[13:27:04] <doener> eddyb: the reassignment checker does "reassigned = <check here>", instead of "reassigned |= <check here>", so only the last check is effective, and in the second match in that example the second assignment doesn't affect "result", so the check gives the wrong result
[13:27:22] <doener> eddyb: http://is.gd/m0TPLk -- better example, forgot to reset result in the previous one
[13:27:32] <doener> eddyb: testing the fix now
[13:27:45] <eddyb> hah
[13:28:55] <nmatsakis> arielb1: I don't disagree
[13:29:23] <arielb1> I mean, it guesses ambiguities
[13:30:38] <arielb1> playbot: trait Foo<T> { fn value(&self) -> T; } impl<T> Foo<()> for T { fn value(&self) {} } impl Foo<bool> for bool { fn value(&self) -> bool { *self } } fn foo<T>(t: T) where T: Foo<bool> { println!("{}", t.value()) } foo(false)
[13:30:48] <arielb1> rust: trait Foo<T> { fn value(&self) -> T; } impl<T> Foo<()> for T { fn value(&self) {} } impl Foo<bool> for bool { fn value(&self) -> bool { *self } } fn foo<T>(t: T) where T: Foo<bool> { println!("{}", t.value()) } foo(false)
[13:30:53] <arielb1> rusti: trait Foo<T> { fn value(&self) -> T; } impl<T> Foo<()> for T { fn value(&self) {} } impl Foo<bool> for bool { fn value(&self) -> bool { *self } } fn foo<T>(t: T) where T: Foo<bool> { println!("{}", t.value()) } foo(false)
[13:31:22] <arielb1> I mean, we shouldn't do that
[13:34:52] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[13:35:05] <arielb1> nmatsakis: I was thinking of just quickly picking where clauses when they definitely apply
[13:35:23] <arielb1> which should be easy because they can't be polymorphic
[13:37:16] <arielb1> but it becomes slightly uglier with projections
[13:37:44] <arielb1> Because we do want to allow <_ as MyTrait>::T : Sized to automatch
[13:38:39] <arielb1> But if we have trait Foo { type Bar: 
[13:39:03] <arielb1> I mean, trait WithParam<T> { .. }; trait Foo { type Bar: WithParam<Self> }
[13:39:20] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[13:39:44] <arielb1> We don't want to match <$0 as Foo>::Bar : WithParam<$1> to the projection
[13:39:50] <arielb1> unless we have $0 = $1 already
[13:42:53] <eddyb> arielb1: you never answered my query about "checking whether type variables were updated"
[13:43:04] <eddyb> arielb1: because I think that's possible
[13:43:25] <eddyb> there's also plug_leaks, which I'm not sure exactly what it does yet
[13:53:43] <doener> eddyb: https://github.com/rust-lang/rust/pull/23702
[13:55:46] <eddyb> doener: I was looking at that :)
[13:56:20] <eddyb> doener: btw, a = foo(); uses a temporary - is that intentional?
[13:56:30] <eddyb> doener: is it part of exception safety?
[13:57:17] <doener> eddyb: got a more complete example?
[13:58:03] <eddyb> doener: I mean, when foo uses a return pointer, assignments always go through a temporary
[13:58:42] <eddyb> I thought cases like a = a.take(); were supposed to be handled specially by noticing that the RHS borrows the lvalue being mutated
[13:59:08] <doener> eddyb: open opportunity for optimization :-) It's about dropping and aliasing
[13:59:19] <eddyb> but b = a.take() could call Option::take(&mut b, &mut a)
[13:59:26] <eddyb> doener: right, I just remember some older discussion about it
[13:59:35] <eddyb> doener: and I'm not sure if I am imagining it
[14:00:11] <doener> let's maybe talk in the evening, need to get back to work
[14:00:14] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[14:00:14] *** ChanServ sets mode: +qo nrc nrc
[14:02:39] <nmatsakis> arielb1: In exploring various extensions though I definitely encountered numerous limitations around having more where clauses than the minimal set. I'm currently working on some revisions to the code that (a) make region inferencing more eager, so we can reject choices that will lead to inference errors earlier; and (b) trying to think about how to make more "piecemeal" advances. I'd like a more wholistic approach for inferencing
[14:03:03] <nmatsakis> arielb1: that said I don't quite understand what you were syaing by "quickly picking where clauses" -- that is kind of what it does now, by dropping other candidates, sounds to me like you meant something different 
[14:03:30] <arielb1> nmatsakis: currently it sometimes picks where clauses even when it isn't sure they match
[14:04:20] <arielb1> and there are other impls
[14:04:23] <eddyb> where did copy_fat_ptr come from?
[14:05:01] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[14:06:14] <eddyb> https://github.com/rust-lang/rust/commit/a5eefdef3c6123ec4217d0f21ff78bffe9c5ccbd *sigh*
[14:06:43] <eddyb> that's not the right direction
[14:07:11] <eddyb> but using Datum at all in _match is probably a total PITA
[14:07:32] <arielb1> up to region handling (which we don't do ATM), if an impl matching implies that a where-clause matches, then they are equivalent
[14:08:20] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[14:09:42] <eddyb> unsolved conflicts: 25
[14:10:04] <eddyb> why did nrc have to reindent the whole unsized coercion logic?
[14:11:18] *** Quits: bombless (bombless@moz-raekri.0v2u.0v40.0da8.2001.IP) (Quit: Leaving)
[14:12:21] <arielb1> I put that the wrong way
[14:12:34] <arielb1> If a where-clause matches perfectly
[14:12:50] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[14:12:56] <arielb1> then even if another impl matches, if it applies, then by coherence that where-clause would have picked it
[14:13:15] <arielb1> so we can just pick the where-clause, there is no ambiguity
[14:13:58] <arielb1> same with projections
[14:15:22] <nmatsakis> arielb1: yes, itused to me more limited than that, I forget why I changed it
[14:15:33] <nmatsakis> arielb1: that is, it used to check that the where clause subsumed the impl
[14:15:50] <nmatsakis> arielb1: maybe we should put that back in, if nothing else to find out what breaks :)
[14:16:10] <nmatsakis> I guess git blame can maybe help me remember
[14:33:26] *** Joins: brson (brson@moz-kc2.7vl.56.172.IP)
[14:33:26] *** ChanServ sets mode: +qo brson brson
[14:46:16] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[15:05:33] *** Joins: pnkfelix (pnkfelix@moz-je0.a5j.80.81.IP)
[15:05:33] *** ChanServ sets mode: +o pnkfelix
[15:09:42] *** Quits: RalfJ (quassel@moz-5t4t9t.ralfj.de) (Ping timeout: 121 seconds)
[15:13:47] *** Quits: brson (brson@moz-kc2.7vl.56.172.IP) (Quit: leaving)
[15:13:58] *** Joins: brson (brson@moz-kc2.7vl.56.172.IP)
[15:13:58] *** ChanServ sets mode: +qo brson brson
[15:14:11] <eddyb> nmatsakis: rebasing atm, only tests left for Unsize (it works otherwise, 0 breaking changes AFAICT)
[15:15:56] <eddyb> nmatsakis: and then I'll have to touch metadata for CoerceUnsize (ugh) or compute it on the fly (and cache the result). it's really just a field index that needs to be computed from the impl, and only for impls in the same crate (when validating them) and during trans
[15:33:13] *** Joins: bombless (bombless@moz-1j8.piv.41.59.IP)
[15:38:30] *** Quits: brson (brson@moz-kc2.7vl.56.172.IP) (Quit: leaving)
[15:56:29] <eddyb> nmatsakis: so you added the outlives thing... shouldn't that be an obligation?
[15:57:00] <eddyb> nmatsakis: I don't think trait selection can depend on lifetimes, not really
[16:15:56] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:29:51] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[16:40:31] <eddyb> nmatsakis: I was hoping the fnptr stuff wasn't serious...
[16:41:50] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[17:00:15] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[17:03:27] <eddyb> doener: time is flying by, the fix has been merged already :|
[17:28:31] <doener> yay
[17:29:03] <eddyb> come on, my workaround failed :|
[17:29:15] <eddyb> oh I guess I can clone :P
[17:29:49] <acrichto> win 16
[17:29:51] <acrichto> grr
[17:30:48] <eddyb> acrichto: one day someone will mine the logs for ^win \d+$
[17:31:03] <eddyb> nmatsakis: \o/ git rm -f src/librustc_typeck/check/vtable.rs
[17:40:07] *** Quits: bombless (bombless@moz-1j8.piv.41.59.IP) (Ping timeout: 121 seconds)
[17:48:03] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[17:48:04] *** ChanServ sets mode: +qo nrc nrc
[17:49:50] <eddyb> doener: and I'm dumb, the real answer is:         while let Ok(Some(traits::VtableUnsizeStruct(nested))) = result.clone() {
[17:51:32] *** Quits: pnkfelix (pnkfelix@moz-je0.a5j.80.81.IP) (Ping timeout: 121 seconds)
[17:57:59] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:05:08] *** Joins: bombless (bombless@moz-9ns2lq.0v2u.0v40.0da8.2001.IP)
[18:22:55] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[18:23:09] *** Joins: RalfJ (quassel@moz-5t4t9t.ralfj.de)
[18:23:12] *** Joins: insaneinside (user@moz-dgv9mb.customer.broadstripe.net)
[18:24:52] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[18:29:03] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:41:46] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[18:45:48] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[18:47:58] *** Quits: bombless (bombless@moz-9ns2lq.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[18:50:42] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[18:52:34] <Luqman> eddyb: haha, another channel i'm in keeps score for /win typos :P
[18:54:10] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[19:01:14] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[19:08:32] *** Joins: Codenator (Mibbit@moz-d18.qnr.198.81.IP)
[19:08:38] *** Parts: Codenator (Mibbit@moz-d18.qnr.198.81.IP) ()
[19:12:34] *** nrc is now known as nrc|afk
[19:18:57] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[19:23:13] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:48:21] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Client exited)
[20:13:10] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[20:17:24] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[20:19:03] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[20:25:11] *** Joins: c74d (c74d3a4ebb6@moz-9ju4vo.mggc.hibn.4404.2002.IP)
[20:41:08] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[20:41:16] *** Joins: japaric (japaric@moz-lgr.14p.64.181.IP)
[20:53:17] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[20:53:17] *** ChanServ sets mode: +qo brson brson
[20:55:45] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[20:59:50] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[21:00:03] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:10:33] *** Quits: joel2 (joel@moz-6ampnk.gtri.gatech.edu) (Ping timeout: 121 seconds)
[21:21:11] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[21:26:16] *** Joins: eddyb_ (eddyb@moz-ule.hlc.26.188.IP)
[21:29:03] *** Quits: eddyb (eddyb@moz-dhp.t65.25.188.IP) (Ping timeout: 121 seconds)
[21:30:41] *** eddyb_ is now known as eddyb
[21:39:12] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:41:18] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:49:04] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:50:11] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:50:11] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:50:12] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[22:09:28] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[22:12:07] *** Quits: rprichard (rprichard@moz-nbiuci.en8f.d045.0009.2601.IP) (Connection closed)
[22:12:18] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[22:14:52] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[22:17:59] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[22:19:50] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[22:22:42] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[22:22:42] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[22:22:43] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[22:23:34] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[22:43:34] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[22:50:04] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[23:00:41] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[23:03:41] *** Joins: reem (reem@moz-q6hb33.coob.q2h1.0009.2601.IP)
[23:15:56] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[23:16:04] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[23:19:45] *** Quits: reem (reem@moz-q6hb33.coob.q2h1.0009.2601.IP) (Connection closed)
[23:21:31] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[23:21:31] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[23:21:32] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[23:23:44] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[23:27:55] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[23:29:36] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[23:49:25] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[23:52:22] *** Joins: aatch (james@moz-rkcq9l.0k7n.u6dj.e000.2406.IP)
[23:53:12] *** Joins: rprichard (rprichard@moz-oksmjj.en8f.d045.0009.2601.IP)
[23:57:49] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[23:59:47] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
