[00:02:56] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[00:03:57] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[00:04:43] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[00:04:43] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[00:07:20] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:09:33] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:09:33] *** ChanServ sets mode: +ao dherman dherman
[00:10:09] *** Quits: tikue_ (tkuehn@moz-C55F9DFF.hsd1.pa.comcast.net) (Quit: tikue_)
[00:10:27] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[00:10:27] *** ChanServ sets mode: +ao brson brson
[00:10:38] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[00:11:32] *** Joins: stomper (Mibbit@moz-A06909E4.glbb.ne.jp)
[00:11:45] <stomper> Is @mut being replaced by refcell?
[00:12:13] *** Quits: vmx (vmx@moz-C6F3FF7E.pools.arcor-ip.net) (Quit: Leaving)
[00:13:02] <strcat> stomper: yes, RefCell replaces @mut and RcMut
[00:13:22] <strcat> @T is replaced by a choice of Rc<T> or Gc<T>
[00:16:38] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[00:17:35] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[00:17:36] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:19:47] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[00:24:29] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Quit: Leaving.)
[00:24:44] <stomper> "last argument in `do` call has non-procedure type:" <- That error immediately brought back memories of learning haskell
[00:25:47] *** Joins: kvanb (kvanb@moz-C4940225.lnse5.lon.bigpond.net.au)
[00:26:02] <myname> ah, dear monads
[00:27:54] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:28:50] *** Joins: short (Mibbit@moz-3D556E4B.amazon.com)
[00:29:43] <a_m0d|home> acrichto: would you expect to see a list of the valid `crate_type`s printed as part of the invalid crate_type error?
[00:29:54] <a_m0d|home> Or just expect the user to look that up in the manual?
[00:31:23] <acrichto> a_m0d|home: the list might be a little too large, and we generally don't have urls right now, so I think just saying invalid is fine
[00:35:02] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[00:37:18] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:38:49] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:39:11] *** Joins: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP)
[00:39:18] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:41:40] *** Quits: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP) (Input/output error)
[00:41:47] *** Joins: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP)
[00:42:19] *** Joins: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:42:41] *** Quits: dredozubov (dredozubov@EC6EC1F6.27163FAA.806C54C8.IP) (Input/output error)
[00:43:19] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[00:47:37] *** Joins: mjburgess (mjburgess@CC799EF6.58AFE261.5EBD1F4C.IP)
[00:51:00] *** Joins: valenting (Thunderbir@moz-9DFB83CF.residential.rdsnet.ro)
[00:51:27] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:54:49] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[00:55:18] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:55:36] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:56:33] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[00:57:00] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[00:57:36] *** Quits: nkoep (nik@moz-A39EE525.pool.mediaways.net) (Quit: Leaving)
[00:58:12] *** Joins: raspy (bzlandfill@moz-FB14AB08.hsd1.ca.comcast.net)
[00:58:36] *** Quits: raspy (bzlandfill@moz-FB14AB08.hsd1.ca.comcast.net) (Quit: CGI:IRC)
[00:58:49] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[00:59:04] *** Joins: super (Mibbit@moz-FB14AB08.hsd1.ca.comcast.net)
[01:01:53] *** Joins: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP)
[01:04:10] <super> Would someone mind helping me understand something? I'm working on a basic BST to help me learn some rust, and I have the nodes represented as Option< ~node<T> > for some template type T, but I'm having trouble when using them in a pattern match for methods like find.  for example   fn insert(&self, data: T) -> bool { match self.head { Some(x) .... } }
[01:05:18] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:05:30] <Yurume> super, Some(ref x)
[01:06:21] <Yurume> destructuring unique pointers (~) from the Option (and others) moves it from the value, which is impossible since self is not mutable.
[01:06:37] <super> ah
[01:06:38] *** Quits: heftig (heftig@moz-A10B924.dip0.t-ipconnect.de) (Ping timeout)
[01:06:56] <Yurume> hmm, wait, in that case you actually want self to be mutable (are you doing the singly linked list insertion right?)
[01:07:09] <Yurume> in that case, change &self to &mut self
[01:07:31] <Yurume> and Soem(x) to Some(ref mut x) to indicate that `x` will be updated in place
[01:07:36] <bjz> super: are you wanting to mutate it though?
[01:07:42] <Yurume> but should not be moved from it
[01:07:46] <super> for insertion yeah, the tree will need to be mutable, but not for something like find
[01:07:56] <Yurume> for find you should use Some(ref x)
[01:08:08] <Yurume> for in-place insertion you should use Some(ref mut x)
[01:08:23] <super> these pointers remind me a bit of c++11
[01:08:33] <Yurume> for the functional insertion you can simply let the value move from self (i.e. &self -> self)
[01:08:52] <Yurume> right, it's like a compiler-checked std::unique_ptr.
[01:08:53] <bjz> you can do: fn insert(&mut self, data: T) -> bool { match self.head { Some(ref mut x) => ... } }
[01:09:09] <bjz> super: they are actually partly inspired by C++
[01:09:40] <super> seems like the right approach, once it compiles, should be pretty safe
[01:10:05] <dbaupp> You can do `~ref x` and `~ref mut x` to get references straight to the node's (&node<T> and &mut node<T>), rather than references to the outer ~: `& ~node<T>` (etc)
[01:10:07] <bjz> super: there are a number of different things in Rust that take inspiration from C++
[01:10:36] <bjz> dbaupp: ah yeah
[01:10:41] <bjz> that would be better
[01:11:03] <bjz> fn insert(&mut self, data: T) -> bool { match self.head { Some(~ref mut x) => ... } }
[01:11:16] <bjz> ~ in patterns destructures
[01:12:21] <Crandom> I want to use rust-core but it doesn't compile with 0.8. Any suggestions of which intermediary version of rustc to use?
[01:12:28] <strcat> use master
[01:12:29] <bjz> super: just doing Some(ref mut x) will give you a &mut ~T
[01:12:47] <Crandom> ta
[01:12:49] <bjz> Crandom: use master. almost all libs track master
[01:14:15] <bjz> super: Some(~ref mut x) will give you a &mut T
[01:15:01] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:15:11] <bjz> super: does that make sense?
[01:15:18] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[01:15:26] <super> I think so, just digesting for a minute
[01:15:54] <bjz> you will develop an intutition for it before long
[01:16:06] <bjz> but it can be confusing/annoying at first
[01:16:25] *** Joins: heftig (heftig@moz-E18A4DBD.dip0.t-ipconnect.de)
[01:16:39] <super> yeah, but working with c++ for a living helps one develop a thick skin for such things lol
[01:16:51] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[01:16:56] *** Joins: Liothen (liothen@moz-92B99500.org)
[01:18:06] *** Quits: derby (dirby@moz-286ED1A3.tor.leo-unglaub.net) (Input/output error)
[01:18:47] <bjz> super: at least rustc complains rather than silently accepting stuff
[01:19:32] <bjz> but you can have your segfaults if you like - just use unsafe {} :D
[01:20:02] <super> yeah, though clang is improving things, our code is filled with rust defaults(const and explicit constructors everywhere)
[01:20:16] <super> well, I'm not sure about implicit conversions
[01:20:20] <super> but mutability at least
[01:20:30] <bjz> yeah, const as default is bloody brilliant
[01:20:53] <bjz> what kind of stuff do you work on in C++?
[01:21:15] <strcat> rust's mutability isn't really like const
[01:21:44] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[01:21:53] <bjz> strcat: yeah
[01:21:54] <super> Well, I'm moving to a new team at work which will be android NDK stuff, but before I was doing a lot of Qt5 development
[01:22:06] <FreeFull> rusti: unsafe { *(0 as *int) }
[01:22:09] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[01:22:12] <bjz> strcat: more like `immutable` in D?
[01:22:16] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[01:22:42] <strcat> bjz: yes
[01:23:10] <bjz> super: C++ interop is a challenge. you need a C api
[01:23:42] <bjz> strcat: must be super annoying typing `immutable` all the time
[01:23:52] <super> sad to say I haven't got to see much D yet, thought I'd like to.
[01:24:00] <strcat> bjz: you can't really, D doesn't have borrowing like rust
[01:24:09] <strcat> the refs aren't really any safer than C++ there
[01:24:16] <strcat> and you can't really say much is immutable for sure
[01:24:24] <bjz> super: D has some nice things in it, especially in the static code gen stuff
[01:24:49] <skrylar> yeah, though i think Rust macros are going to end up giving you that
[01:24:56] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[01:25:02] <skrylar> we just need static reflection in macros *nods8
[01:25:14] <bjz> super: I doubt that will be able to happen
[01:25:34] <bjz> macros run before the type checker
[01:25:48] * skrylar shrugs
[01:25:54] *** Quits: Liothen (liothen@moz-92B99500.org) (Quit: Textual IRC Client: www.textualapp.com)
[01:26:00] <skrylar> they're really helpful for things like automatic binding generation
[01:26:05] *** Joins: Liothen (liothen@moz-92B99500.org)
[01:26:42] <skrylar> i remember some D template mixins that you threw a function at and they would make Lua wrappers
[01:27:43] * skrylar wonders if there would be any benefit whatsoever porting termbox to a rust-native version
[01:27:44] *** Quits: mpiechotka (mpiechotka@moz-FF5F76BA.adsl.inetia.pl) (Ping timeout)
[01:27:44] <bjz> macros are super nice - I use them in various things, but they are brittle things to work with
[01:30:07] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[01:30:33] <bjz> skrylar: beep
[01:31:16] <Crandom> are segmented stacks being removed some time soon?
[01:31:26] <skrylar> bjz: i have been beeped
[01:31:32] <bjz> Crandom: haven't they already?
[01:31:41] <bjz> skrylar: check your pms
[01:31:51] * skrylar prods irrsi
[01:33:32] <Crandom> they have? (it's just i noticed https://github.com/mozilla/rust/blob/master/src/rt/arch/x86_64/morestack.S and friends still exist)
[01:35:27] <whitequark> they're used to check for stack overflow
[01:36:10] *** Joins: mpiechotka (mpiechotka@moz-FF5F76BA.adsl.inetia.pl)
[01:37:50] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[01:37:53] <super> Is there a template trait that assures comparability?
[01:38:02] *** Quits: espadrine (Thunderbir@moz-BA7B4434.w90-2.abo.wanadoo.fr) (Ping timeout)
[01:38:47] <sfackler> super: implementing cmp::Ord allows you to use < &c
[01:39:47] *** Quits: mark_edward (quassel@moz-E0F1AB04.hsd1.in.comcast.net) (Ping timeout)
[01:41:24] *** Joins: espadrine (Thunderbir@moz-BA7B4434.w90-2.abo.wanadoo.fr)
[01:41:30] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[01:42:55] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[01:43:37] <super> thank you. I think specifying T: Ord + Eq gets me what I need
[01:44:14] <bjz> super: there is also TotalOrd
[01:44:33] <bjz> super: atm there is lots of Ord traits
[01:44:39] <bjz> it's a tad crazy
[01:45:16] <bjz> http://static.rust-lang.org/doc/master/std/cmp/index.html
[01:45:31] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[01:45:57] *** Quits: mpiechotka (mpiechotka@moz-FF5F76BA.adsl.inetia.pl) (Ping timeout)
[01:46:19] <bjz> strcat: skrylar is wondering about iterators, and how they optimise
[01:46:40] <bjz> strcat: they optmise away right? if you write them correctly?
[01:47:11] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[01:48:09] <strcat> bjz: sure
[01:48:25] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[01:48:44] <bjz> strcat: skrylar is worried about the 'sufficiently smart compiler' problem
[01:49:02] <strcat> iterators are low-level
[01:49:11] <strcat> not much lower level than the vector iterator
[01:49:24] <strcat> inlining doesn't require a smart compiler
[01:49:41] *** Quits: gwty (gwtypc@F97FFBA9.3803318B.25B273F5.IP) (Ping timeout)
[01:49:52] *** Quits: gwty_ (gwtypc@F97FFBA9.3803318B.25B273F5.IP) (Ping timeout)
[01:50:11] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[01:50:20] *** Quits: espadrine (Thunderbir@moz-BA7B4434.w90-2.abo.wanadoo.fr) (Ping timeout)
[01:51:09] <bjz> strcat: yeah? what are the potential pitfalls in making nice iterators?
[01:51:09] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[01:51:27] <bjz> or things you should do to make them nice?
[01:51:32] <strcat> it's not really different than code elsewhere
[01:51:48] * strcat shrugs
[01:51:53] <skrylar> well the thing in D is they said "don't use 'inline', just let the compiler do it" and there's no easy way to see if D actually did inline it
[01:51:57] <skrylar> other than checking the binary
[01:52:14] <strcat> skrylar: I wasn't suggesting inlining stuff manually
[01:52:25] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[01:52:38] <strcat> skrylar: --emit-llvm -S -o - is pretty easy to check with
[01:52:41] <bjz> skrylar: apparently #[inline] only really tells rust to do it cross-srate
[01:52:51] <strcat> allows it to
[01:52:55] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[01:52:59] <bjz> strcat: yep
[01:53:03] <strcat> and adds an inline hint, which just increases the threshold
[01:53:05] <bjz> strcat: better wording
[01:53:07] <strcat> but that's an anti-pattern
[01:53:19] <strcat> if you use LTO, it's not necessary
[01:53:24] *** Quits: jcmoyer (apocalypse@moz-40035C19.sta.embarqhsd.net) (Ping timeout)
[01:53:44] <bjz> strcat: it's like writing stuff in a header file right?
[01:53:52] <strcat> skrylar: LLVM's inlining is dead simple
[01:54:14] <strcat> it's just an iterative loop, continuing until there is nothing left to inline
[01:54:35] <strcat> it adds up the cost of every instruction, and if the total is below the inline threshold then it inlines it at all static call sites
[01:54:58] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[01:55:05] <bjz> ok
[01:55:12] <bjz> nice to know
[01:55:14] <strcat> and it gets intermingled with other optimization passes, there won't be functions below the threshold left at the end
[01:55:25] <bjz> so how do you do LTO?
[01:55:30] <strcat> unless they're called indirectly (function ptrs) in a way that it can't change to static
[01:55:32] <strcat> bjz: -Z lto
[01:55:33] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[01:55:40] <bjz> "link time optimisation" right?
[01:55:44] <strcat> bjz: yes
[01:55:49] <skrylar> I couldn't get LTO to work
[01:55:54] <strcat> bjz: removes crate boundaries, optimizes as a whole
[01:56:00] <strcat> skrylar: need a linker/compiler with LTO support
[01:56:05] <skrylar> Interestingly, Ubuntu's version of LLVM/Clang don't include the Gold library
[01:56:19] <strcat> a properly packaged one does ;p
[01:56:22] <strcat> skrylar: gold is part of binutils
[01:56:52] <skrylar> i can go grab the error again if you want; i have the build-essental and such packages though
[01:57:02] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[01:57:05] * strcat doesn't use ubuntu
[01:57:15] <strcat> worksforme ;p
[01:57:19] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:57:21] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[01:57:37] * bjz doesn't use ubuntu
[01:57:49] * bjz is an OSX heretic
[01:58:07] <skrylar> I remember OSX. And then my mac broke.
[01:58:33] <bjz> heh
[01:58:54] <skrylar> And then my next computer was like, the same price as a MBP but has more hardware
[01:58:54] <bjz> ouch x_o
[01:59:16] * skrylar used an OSX86 install once, that was a fun time xD
[01:59:32] <bjz> :)
[01:59:54] * bjz is sad Linux doesn't have a nice UX
[02:00:07] <super> depends which linux
[02:00:14] <bjz> anyway, #rust-offtopic
[02:00:15] <super> crunchbang is beautiful
[02:00:31] * FreeFull uses a hobble-cobble of things. It's very personal
[02:00:33] <skrylar> i wonder how many channels i can join before irssi becomes an unusable mess
[02:00:37] <Yurume> bjz: was there such channel?
[02:00:45] <bjz> yep!
[02:00:58] <Yurume> right now I have 30 channels connected (across five different networks, though)
[02:01:01] * bjz just uses a GUI for IRC x)
[02:01:04] <strcat> bjz: 'bjz is sad Linux doesn't have a nice UX' certainly has nicer ones that OS X comes with ;P
[02:01:12] <skrylar> ... lol
[02:01:48] <Crandom> I'm trying to install latest rust-core with latest rustic and getting "unresolved imports c_types" from https://github.com/thestinger/rust-core/blob/master/core/fail.rs. I've tried changing to various other things (like std::libc::types::os::arch::c95) but to no avail. Any idea what going wrong?
[02:02:01] <Crandom> ^rustic^rustc
[02:02:20] <Crandom> ^install^compile
[02:02:21] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:02:24] * Crandom should sleep
[02:02:28] <bjz> strcat: what about a lovely ecosystem of apps which are beautifully designed?
[02:02:41] <strcat> bjz: certainly has those too
[02:02:51] <bjz> super: crunchbang looks nice
[02:02:55] <skrylar> I remember when my GPU was completely unusable because the OS decided I needed wobblywindows and so much GPU-based bling that there was no video memory left, and it didn't swap it out. So I had to go in to KDE and completely shut down all of the chrome just to be able to run an actual OpenGL app *nods*
[02:03:48] <skrylar> Oh, and the endless fun of having to suspend pulseaudio so i could start up jack, because audio software thought pulse was a heretic
[02:03:49] <dbaupp> <3 wobbly windows :P
[02:04:04] <bjz> dbaupp: <3 CoreAnimation
[02:04:56] <FreeFull> skrylar: irssi can handle hundreds of channels without trouble
[02:04:59] <skrylar> I was looking at SDL2 and wondering why we don't just use it as our window library
[02:05:13] <skrylar> FreeFull: i have no doubt that it can  technically do it, however my ability to monitor that many channels effectively is nonexistent
[02:05:13] <FreeFull> I'm in 88 channels right now
[02:05:16] <bjz> skrylar: I dunno if it is designed for that
[02:05:18] <strcat> skrylar: because it doesn't have widgets
[02:05:20] <FreeFull> Same
[02:05:26] <skrylar> strcat: neither does X11
[02:05:29] <FreeFull> I don't actually try to monitor all of them though
[02:05:39] <strcat> skrylar: ???? sdl2 isn't a replacement for X11
[02:05:39] <bjz> skrylar: the good thing about CoreAnimation is that it has consistent animations
[02:05:42] <FreeFull> I just occasionally switch around to see if there is interesting conversation happening
[02:06:08] <bjz> skrylar: which ties all of the apps together at a deeper level than just ui chrome
[02:06:16] * ChrisMorgan <3 wobbly windows when using Unity instead of i3
[02:06:28] <skrylar> yeah i'm familiar with CA
[02:06:40] <skrylar> its mostly just a tween lib though, IIRC
[02:06:48] * bjz thinks http://etoileos.com/ looks cool, but it seems abandoned
[02:06:57] <bjz> skrylar: well isn't that all you need?
[02:07:06] <FreeFull> http://members.chello.nl/w.boeke/SDL-widgets/index.html This probably would be useful if it wasn't written in C++
[02:07:17] <bjz> skrylar: this is gui animation we are talking about
[02:07:19] <skrylar> what I was getting at with SDL for the window engine is that most people do not actually use X11 for anything except getting a display up and windows
[02:07:27] <skrylar> Consider that you don't even use X to manage your windows
[02:07:33] <skrylar> you put a window manager over that
[02:07:39] <strcat> skrylar: sure, X11 is just used for IPC
[02:07:49] <strcat> it's not used for drawing anymore, or fonts
[02:07:53] <skrylar> so why are we not using something that does nothing but what people actually use X for, instead of hauling a useless dinosoar around?
[02:08:05] <jhasse> Wayland
[02:08:09] <strcat> skrylar: that's what wayland is
[02:08:18] <skrylar> waylands adoption rate is like, nil, though
[02:08:20] <FreeFull> Wayland apparently has some bad design decisions
[02:08:27] <FreeFull> I'm not sure what they are
[02:08:32] <strcat> skrylar: wayland's adoption rate is pretty high
[02:08:39] <strcat> FreeFull: ok, so unsubstantiated FUD?
[02:08:57] <FreeFull> I wish I had logs
[02:09:14] <strcat> FreeFull: I totally believe that you ran into someone who was spreading FUD about it.
[02:09:20] <strcat> doesn't mean anything
[02:09:29] <skrylar> I thought it required some jiggling of programs to get them to work on it, though that could have been an early build
[02:09:34] <strcat> if you don't have anything concrete to bring up, don't bother criticizing something
[02:09:51] <whitequark> skrylar: there's upcoming wayland support in qt5 and gtk3
[02:09:59] <strcat> whitequark: it's already there ;p
[02:10:03] <whitequark> even better
[02:10:07] <FreeFull> I think there was something about window decorations, and about how events in wayland work
[02:10:14] <strcat> I can run gtk3/qt5 applications in wayland
[02:10:22] * skrylar will start caring about wayland when i can use it without having to monkeywrench my OS :/ though I have nothing against it
[02:10:24] <FreeFull> Don't windows draw their own window decorations in wayland?
[02:10:35] <jhasse> yes
[02:10:37] <whitequark> there's still tons of gtk2 apps though
[02:10:38] <strcat> FreeFull: yes, the toolkit draws the window decorations
[02:10:42] <whitequark> like gimp
[02:10:44] <strcat> FreeFull: just like OS X and windows
[02:11:03] <strcat> FreeFull: there are zero round trips for drawing that way
[02:11:11] <strcat> when it finishes it frame, it lets wayland know
[02:11:15] <FreeFull> What if the program freezes? Are the window decorations responsive?
[02:11:33] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[02:11:41] <skrylar> FreeFull: my guess is people will put window managers over it
[02:11:45] <strcat> FreeFull: the compositor is able to kill the window, if that's what you're asking
[02:12:03] <skrylar> wayland->WM->toolkit, will probably be how it goes
[02:12:05] <skrylar> thats what happens now
[02:12:09] <skrylar> (in X)
[02:12:13] <jhasse> FreeFull: On windows when a program freezes the border is drawn by the os ontop of the windows so you can use the buttons
[02:12:14] <strcat> skrylar: it's not what happens in wayland, though
[02:12:16] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:12:17] <strcat> wayland isn't a program
[02:12:37] <FreeFull> What if you are using the equivalent of a tiling wm, and don't want window decorations?
[02:12:46] <strcat> FreeFull: so you can disable window decorations
[02:12:48] *** Quits: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Quit: Leaving...)
[02:12:54] <strcat> as you can with windows using client-side decorations in X11
[02:12:58] <FreeFull> jhasse: Yeah, that's probably the best way if you do have it draw its own decorations
[02:12:59] <jhasse> FreeFull: you'll have to disable them in gtk
[02:13:02] <ercxx> why do I have to `use std::io::Listener` when using `std::io::net::tcp::Listener` ?
[02:13:12] <skrylar> public imports?
[02:13:19] <FreeFull> What if you're not using gtk though?
[02:13:24] <FreeFull> But a mixture of things
[02:13:31] <strcat> FreeFull: doesn't make a difference
[02:13:33] <FreeFull> Do you have to manually disable them in every one tihng?
[02:13:37] <strcat> FreeFull: no
[02:13:38] <bjz> strcat: so do you have to adapt an entire OS to use wayland?
[02:13:41] <strcat> bjz: no
[02:13:56] <FreeFull> Does the display server still have control over the decorations ultimately then?
[02:14:03] <strcat> FreeFull: there isn't a display server
[02:14:18] <strcat> wayland is a library
[02:14:26] *** Quits: tupshin_ (quassel@moz-54DE2E9C.du.xdsl.is) (Ping timeout)
[02:14:34] <FreeFull> I'm talking about what is built on top of the library
[02:14:42] <strcat> the compositor (what you would call a window manager, in X11) can do what it wants
[02:14:44] <FreeFull> So, say, weston
[02:14:57] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:15:07] <jhasse> no he doesn't have control
[02:15:10] <jhasse> gtk and qt have
[02:15:11] <FreeFull> You know, I think there should be logs, I remember which channel it was in now
[02:15:34] <strcat> jhasse: it's not enforced at a wayland protocol level
[02:15:44] <FreeFull> jhasse: So a tiling compositor with no decorations would be troublesome?
[02:15:51] <strcat> FreeFull: no
[02:16:01] <strcat> FreeFull: gnome will be using client-side decorations, kde will be using server-side decorations
[02:16:06] <strcat> FreeFull: applications will work either way
[02:16:19] <strcat> as they do today in X11
[02:16:27] <jhasse> FreeFull: no, you can disable decorations in gtk/qt. One could implement a global setting for all toolkits
[02:16:27] <FreeFull> What if you start a gnome app in KDE? Does it have gnome window decorations?
[02:16:31] <strcat> but it's not part of the protocol, so there aren't round trips required for drawing
[02:16:42] <strcat> FreeFull: again, exactly what happens today when you start gnome apps in KDE
[02:16:44] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:16:51] <strcat> gnome apps use client-side drawing in X11 now, when under gnome-shell
[02:16:56] <FreeFull> jhasse: What if you want some windows to have decorations and some to not?
[02:17:07] <strcat> FreeFull: up to the compositor
[02:17:31] <FreeFull> strcat: Well, I haven't used a window manager with decorations in a long time
[02:17:49] <FreeFull> So I have no idea, really
[02:18:31] <FreeFull> Sounds like there'd be a theme clash then for the window decorations then
[02:18:37] <strcat> there isn't
[02:18:46] <jhasse> strcat: you sure?
[02:19:07] <strcat> I can tell you with 100% certainty that gnome is using client-side decorations in wayland, and kde is going to be using server-side
[02:19:15] <strcat> and there are not new problems
[02:19:30] <jhasse> still the decorations would look different, wouldn't they?
[02:19:34] <strcat> no, they wouldn't
[02:19:46] <strcat> do gnome applications with client-side decoration support look different in xfce/kde? no
[02:19:47] <jhasse> so kwin must use gtk to draw the decorations?
[02:20:06] <strcat> kwin is going to be using server-side decorations, not different than in X11
[02:20:17] <strcat> or do you mean when running in gnome-shell
[02:20:45] <jhasse> i was thinking about apps that integrate the decoration into their gui
[02:20:52] <jhasse> like chrome
[02:21:23] <jhasse> if they use gtk to draw "_ + x" it won't respect the kwin theme
[02:21:37] <strcat> jhasse: chrome defaults to not fitting in anywhere ;p
[02:21:38] <FreeFull> Nope, no logs
[02:21:51] <strcat> jhasse: can disable it and have it use the OS decorations in linux
[02:21:54] * strcat shrugs
[02:21:57] <jhasse> strcat: not on windows and osx ;)
[02:22:07] <FreeFull> Chrome doesn't use GTK unless you tell it to, normally it just draws its own
[02:22:13] <alan_andrade> How can I parse an option from getopts that will take a number only such as: -5 ?
[02:22:14] <alan_andrade> https://gist.github.com/alan-andrade/8214055
[02:22:20] <strcat> FreeFull: it uses gtk to draw lots of stuff on linux
[02:22:27] <strcat> scrollbars, checkboxes
[02:22:35] <strcat> stuff in the content window doesn't follow the gtk theme due to the sandbox
[02:22:35] <FreeFull> I'm talking about the decorations though
[02:22:43] <strcat> it can't draw decorations with gtk
[02:22:45] <whitequark> hrm, why is to_uint for raw pointers in a trait, but for borrowed pointers in a module?
[02:23:13] <strcat> it either draws them itself (with some gtk functions involved on linux, at a low-level) or doesn't draw them
[02:23:53] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[02:23:55] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[02:23:56] *** Quits: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) (Quit: jeff_)
[02:24:04] <strcat> whitequark: not design decisions, just what it is
[02:24:15] <strcat> it's somewhat pointless to have to_uint at all when you can just cast
[02:25:09] <FreeFull> Ah, yeah, I was thinking about the "use system title bar and borders" setting
[02:25:33] <FreeFull> Yeah, it doesn't draw anything by itself when it's checked
[02:25:44] <strcat> FreeFull: gnome applications do client-side rendering and put stuff in their title bar now, too
[02:26:04] <strcat> their enormous title bar*
[02:26:59] <FreeFull> I haven't used any gnome apps in a while
[02:28:04] <strcat> if you use them outside of gnome-shell they don't do that, though
[02:28:14] <FreeFull> Well, other than some gnome 2 stuff
[02:28:27] <FreeFull> I don't actually have any gnome 3 stuff installed
[02:29:10] *** Joins: jhasse_ (jhasse@moz-3128EA21.ewe-ip-backbone.de)
[02:29:16] <strcat> anyway, X11 doesn't do much work tying stuff together
[02:29:24] <strcat> the various fd.o standards do
[02:29:54] *** Quits: jhasse_ (jhasse@moz-3128EA21.ewe-ip-backbone.de) (Quit: Verlassend)
[02:30:01] <strcat> wayland drops X11 but it keeps most of those standards (or they'll be adapted) and it's the same graphics/input stack too (evdev, dri2/drm, etc.)
[02:30:04] <FreeFull> X11 is old, lots of crusty parts
[02:30:08] *** Joins: jhasse_ (jhasse@moz-3128EA21.ewe-ip-backbone.de)
[02:30:19] <ChrisMorgan> ercxx: you must use Listener as well as TcpListener because the listen() method is on the Listener trait.
[02:30:21] *** Quits: jhasse (jhasse@moz-39E0351E.ewe-ip-backbone.de) (Ping timeout)
[02:30:26] *** Quits: jhasse_ (jhasse@moz-3128EA21.ewe-ip-backbone.de) (Quit: Verlassend)
[02:30:36] *** Joins: jhasse (jhasse@moz-3128EA21.ewe-ip-backbone.de)
[02:30:36] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:30:43] <ercxx> ChrisMorgan: Thanks.
[02:31:27] <strcat> FreeFull: wayland pretty just removes the round trips, removes unnecessary buffer copying and removes tearing
[02:31:37] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:31:42] <strcat> and drops all the legacy stuff
[02:32:05] <strcat> it's not really a huge shock for most applications, and they'll pretty much already work if they're built on qt/gtk/enlightenment
[02:32:22] <strcat> and if they're not quite there, they can run in a rootless X window
[02:32:44] <strcat> which will eventually be faster than a windowed application in X, because the application renders as if it is fullscreen (less indirection)
[02:32:52] <ercxx> FreeFull: here's a talk from a wayland(also x) dev http://youtu.be/RIctzAQOe44
[02:33:08] <strcat> (atm it's a tiny bit slower to use xwayland apps compared to using them in wayland)
[02:33:10] <strcat> er
[02:33:15] <strcat> compared to using them in X11*
[02:33:51] <FreeFull> I like reading better than watching hour-long videos
[02:34:01] *** Joins: nical (nico@moz-FE0AE368.w2-3.abo.wanadoo.fr)
[02:35:38] <FreeFull> I should try writing a client program to see what it would entail (without using a toolkit like GTK)
[02:36:01] *** Quits: Ferreus (ferreus@moz-A4A53361.pools.arcor-ip.net) (Ping timeout)
[02:36:08] <strcat> FreeFull: wayland won't really be involved much
[02:36:12] <FreeFull> I'll check if the weston examples are like that
[02:36:22] <strcat> if you aren't using a library then you'll just be using opengles/egl directly
[02:36:32] <FreeFull> strcat: I know X is rather difficult even if you know what you're doing
[02:36:46] <strcat> FreeFull: well wayland's API is pretty minimal.... it provides a lot less
[02:37:11] <FreeFull> And with X, you wouldn't usually even be talking the protocol directly but using a library on top of a library
[02:37:50] <strcat> FreeFull: http://wayland.freedesktop.org/docs/html/chap-Library.html#sect-Library-Client really not a lot to deal with ;p
[02:38:01] <strcat> you draw yourself and tell it when your frame is done
[02:38:18] <strcat> it's a shared buffer (dri)
[02:38:29] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[02:38:43] <strcat> it's the same way you'd write a modern application on X if you were doing direct rendering via gl
[02:39:02] <super> Could someone explain to me the issue I'm having. I get a "cannot move out of dereference of & pointer" on the two recursive calls http://mibpaste.com/usgTf3 
[02:39:30] <strcat> super: do you know what move semantics are?
[02:39:56] <FreeFull> strcat: I guess it'd be sort of like how you do things in KolibriOS
[02:40:00] <super> to a basic extent in the context of c++, but not rust
[02:40:05] <FreeFull> But not in x86 ASM
[02:40:20] <Yurume> super: what exact line is causing that error?
[02:40:37] <strcat> super: the only form of passing/assignment/returning built-in to the language is a shallow memcpy, and if the type has a destructor you need ownership of it to do that (as it needs to move ownership)
[02:40:39] <Yurume> (I guess lines 34 and 36 but not sure)
[02:40:49] *** Parts: nical (nico@moz-FE0AE368.w2-3.abo.wanadoo.fr) ()
[02:40:59] <strcat> so if you have something like a generic type T, doing anything with it by-value will need ownership
[02:41:02] <super> yeah, 34 and 36
[02:41:06] <FreeFull> Rust and Haskell don't seem to have any wayland bindings yet
[02:41:21] <strcat> FreeFull: it's a really simple C API
[02:41:26] <strcat> don't really need much in the way of bindings
[02:41:27] <FreeFull> Ah, Rust does seem to have some
[02:41:57] <FreeFull> Nevermind, this is just an empty directory structure
[02:42:23] <Yurume> super: x has a type of &~node<T>, which is a *borrowed* pointer to the unique pointer to the node, and since it's borrowed you cannot take it as a value
[02:43:10] <Yurume> in fact, the signature of `find` itself is problematic since it would mean that you find something in the list by giving up with that list (!)
[02:43:26] <Yurume> i.e. the list is not usable after `find` call
[02:44:57] <strcat> super: the tutorial for master introduces move semantics, etc. by implementing a data structure http://static.rust-lang.org/doc/master/tutorial.html#implementing-a-linked-list
[02:45:11] <strcat> doesn't go very far into detail yet
[02:45:17] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[02:45:47] <strcat> you'd need to know more to implement a proper find function returning a ref to an element (named lifetimes - since it won't infer past function boundaries)
[02:46:22] <FreeFull> There doesn't seem to be any way to make weston use alt instead of super in its shortcuts
[02:46:30] <strcat> fn find(&'a Container, |&Element| -> bool) -> &'a Element or whatever
[02:46:46] <Yurume> strcat: since `find` function above actually returns bool and not the matched node, so it does not require named lifetimes, but yeah.
[02:46:58] <super> I'll go ahead and give that a look
[02:47:04] <strcat> FreeFull: weston is pretty much just a demo, you'd have more luck with one of the real compositors ;p
[02:47:07] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[02:47:17] <FreeFull> And when you run weston in X, it doesn't grab the keyboard, so all key combos that the window manager uses get intercepted by it
[02:47:28] <FreeFull> strcat: What are the real compositors right now?
[02:47:59] <strcat> FreeFull: gnome-shell works well, I played with using a few things in it like epiphany (their libwebkit browser)
[02:48:05] * strcat shrugs
[02:48:25] <strcat> I need firefox and a nice manual tiling compositor before I'd actually switch
[02:48:30] <FreeFull> I don't like gnome though
[02:48:45] <FreeFull> Firefox is definitely a must for me too
[02:48:47] <strcat> FreeFull: nicer than weston at least :P
[02:48:53] <FreeFull> As well as tiling
[02:49:08] <strcat> well, I'd drop firefox if dwb switched to v8 and picked up a few more features
[02:49:54] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[02:49:59] <FreeFull> Well, I'd end up having an X server running inside the compositor anyway
[02:50:03] <strcat> mostly because vimperator/pentadactyl are so broken now...
[02:50:30] <FreeFull> I imagine porting something like wine over to wayland would be a lot of effort and have questionable benefits
[02:50:42] *** Quits: super (Mibbit@moz-FB14AB08.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:50:44] <strcat> FreeFull: I don't really think it'd be a lot of work
[02:51:00] <strcat> atm it's blocked by glx and gl being in the same lib
[02:51:20] <strcat> the plan is to split out libglx from libgl, and then wayland can have non-es gl too
[02:51:40] <FreeFull> strcat: I want a browser that supports flash, won't cry if I open 600 tabs of stuff, and is heavily customisable with addons
[02:52:03] <jhasse> why would you want to open 600 tabs?
[02:52:05] <Earnestly> No one "wants" flash, some people merely tolerate it
[02:52:08] <strcat> FreeFull: most of them support flash as well as firefox
[02:52:27] <FreeFull> Last time I checked flash didn't work outside of X11 though
[02:52:33] *** Joins: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz)
[02:52:34] <FreeFull> On linux, that is
[02:53:01] <FreeFull> Earnestly: I want to be able to run all the .swf files that have been made already
[02:53:23] <FreeFull> And HTML5+CSS+JS is still not quite as good for some things
[02:53:27] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:53:27] *** ChanServ sets mode: +ao dherman dherman
[02:53:31] <strcat> FreeFull: it would be able to work as a rootless X app in something like nspluginwrapper
[02:53:43] <strcat> NPAPI flash is dead on linux
[02:53:49] <FreeFull> I know
[02:53:49] <strcat> so it's always going to be stuck on gtk2
[02:53:55] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:53:59] <strcat> FreeFull: pepper API flash runs outside of X11
[02:54:11] <strcat> it runs in the NaCl/pepper sandbox stuff
[02:54:14] <FreeFull> Chrome/chromium is the only thing with pepper though
[02:54:25] <strcat> FreeFull: opera has it ;p
[02:54:26] <FreeFull> And I like firefox a lot better
[02:54:35] *** Joins: Ferreus (ferreus@moz-A4A53361.pools.arcor-ip.net)
[02:54:36] <FreeFull> Ah, opera apparently too then
[02:54:39] <strcat> steam, opera, chrome isn't nothing! ;p
[02:54:44] <strcat> but all 3 are basically chromium...
[02:54:51] <Earnestly> webkit?
[02:54:57] <FreeFull> Opera doesn't have it's own engine now though, it's another webkit browser
[02:54:57] <Earnestly> (blink?)
[02:54:57] <strcat> blink/chromium
[02:55:02] <strcat> FreeFull: not webkit
[02:55:02] <Axord> poor Opera
[02:55:11] <Earnestly> Well, blink now
[02:55:29] <FreeFull> Is blink a webkit fork?
[02:55:29] <strcat> FreeFull: webkit went through a major fork
[02:55:32] <strcat> FreeFull: yes
[02:55:39] <Axord> Probably still fair to equate webkit to blink for a while yet
[02:55:39] <strcat> webkit dropped millions of lines of code, as did blink
[02:55:50] <strcat> Axord: they are pretty diverged though
[02:55:50] <FreeFull> I miss konqueror. That was actually an ok-ish browser
[02:55:57] <dbaupp> strcat: in the TyVisitor is visit_rec the struct visitor?
[02:56:01] <Earnestly> Blink was mostly chromiums changes that were diverging from webkit too much
[02:56:06] <Earnestly> Or something like that
[02:56:16] <Axord> strcat: if you say so
[02:56:19] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[02:56:24] <dbaupp> strcat: or is that visit_class?
[02:56:32] <strcat> dbaupp: uhhh
[02:56:35] <strcat> visit_class
[02:56:37] <strcat> probably.
[02:56:42] <FreeFull> So webkit is the Apple side and blink the Google side?
[02:56:48] <dbaupp> oh, I guess I can check repr.rs
[02:56:50] <strcat> FreeFull: yup
[02:56:54] *** Quits: stomper (Mibbit@moz-A06909E4.glbb.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[02:57:02] <strcat> FreeFull: gnome/gtk/qt is still on the webkit boat too
[02:57:05] <dbaupp> yup, looks like it's visit_class
[02:57:06] <dbaupp> thanks.
[02:57:20] <FreeFull> I wonder if servo will ever be good
[02:57:34] <strcat> blink is a far better choice for gtk/qt since they get v8 instead of the awful webkit js engine
[02:57:39] <Earnestly> strcat: Oh boy, did you see the X Security talk from c3?
[02:57:49] <strcat> Earnestly: yes
[02:58:01] <Earnestly> (And mostly how good the Xorg devs were in fixing bugs, GTK is sane and QT just doesn't seem to care about it :S)
[02:58:01] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[02:58:06] <whitequark> hm, *T doesn't auto-dereference?
[02:58:13] <FreeFull> I thought v8 was closed source and chromium used something else
[02:58:14] <strcat> whitequark: nope, since it's unsafe
[02:58:25] <strcat> whitequark: the auto-deref code has a concept of explicit vs implicit derefs
[02:58:29] <strcat> and raw ptrs are explicit
[02:58:34] <Earnestly> strcat: Now, do you think his GLX hate was before or after the 1.15 rewrite?
[02:58:39] <strcat> FreeFull: v8 is open-source
[02:58:45] <FreeFull> Ok
[02:58:46] <strcat> FreeFull: node.js and chromium use it
[02:58:48] <whitequark> strcat: so, I have to write (*foo).bar everywhere?
[02:58:59] <FreeFull> Earnestly: QT has fewer portability problems though
[02:59:07] <whitequark> precedency of * really is a pain
[02:59:13] <FreeFull> On the other hand, it's C++ so hard to bind to from other languages
[02:59:16] <strcat> FreeFull: the closed parts of chrome are pretty much just artwork, their pdf plugin, their flash plugin and some google spyware
[02:59:22] <Earnestly> FreeFull: Yeah, but they don't seem to care about probably many zero-day exploits
[02:59:33] <Earnestly> strcat: :D
[02:59:40] <strcat> FreeFull: and the pdf/flash plugins actually work with chromium/opera
[02:59:51] *** Quits: short (Mibbit@moz-3D556E4B.amazon.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:59:52] <strcat> but they're blobs
[03:00:06] <strcat> sandboxed blobs though... about as well as js is sandboxed ;p
[03:00:11] <FreeFull> Earnestly: A lot of developers don't
[03:00:41] <Yurume> whitequark: deferencing *T is unsafe (passing it around is safe though), so auto-deref is considered harmful
[03:00:49] <Earnestly> FreeFull: A lot do, and they seem to fix them
[03:00:56] <Earnestly> At least Xorg and GTK
[03:01:09] <FreeFull> Fixing them is definitely a good idea
[03:01:17] *** Quits: discomfitor (asdf@moz-975BC507.hsd1.ct.comcast.net) (Ping timeout)
[03:01:17] <FreeFull> Never good to have vulnerabilities around
[03:01:20] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[03:01:28] <strcat> local exploits aren't incredibly interesting because there's a huge abundance of them
[03:01:31] *** Joins: discomfitor (asdf@moz-975BC507.hsd1.ct.comcast.net)
[03:01:41] <FreeFull> You also get things like crashes and weird program states due to stuff like that
[03:01:56] <strcat> they have no shortage of bugs :)
[03:02:03] <Earnestly> strcat: Connect to a rogue X server?
[03:02:17] <strcat> Earnestly: if you already have an unsandboxed local process, it's over
[03:02:19] <FreeFull> If you have a QT program running as root for some reason...
[03:02:21] <strcat> you have root
[03:02:39] * whitequark is trying to write an allocator in rust. it's a pain.
[03:02:49] <Earnestly> FreeFull: Well, xorg does.
[03:02:56] <strcat> Earnestly: xorg can run as non-root now
[03:02:56] <FreeFull> whitequark: Lots of unsafe blocks?
[03:03:04] <Earnestly> strcat: Ehhh.  Not with 1.15
[03:03:06] <Earnestly> Soon
[03:03:11] *** Quits: jhasse (jhasse@moz-3128EA21.ewe-ip-backbone.de) (Quit: Verlassend)
[03:03:13] <whitequark> FreeFull: I can't represent block headers with & pointers, and I can't use them with * pointers
[03:03:21] <Earnestly> (again)
[03:03:25] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[03:03:29] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[03:04:15] <Earnestly> strcat: I guess it's just age but it was pretty nice to see that even still they're pretty happy to fix these problems.  I wasn't really aware of the extent other than what Xorg devs have said about the state of Xorg
[03:04:16] <strcat> whitequark: why not * pointers?
[03:04:19] <carter> urk, am I right in thinking rustpkg api needs some love?
[03:04:20] <carter> https://github.com/mozilla/rust/blob/master/src/librustpkg/api.rs
[03:04:24] <FreeFull> whitequark: Trying to get something faster than standard allocation?
[03:04:24] <carter> its a bit stringy :/
[03:04:54] <whitequark> FreeFull: naw, I'm writing a heap impl for an embedded device
[03:04:57] <FreeFull> Quite stringy indeed
[03:05:12] <whitequark> strcat, FreeFull: here's my non-working code: https://gist.github.com/whitequark/c739ed572d78bf157960
[03:05:22] <FreeFull> whitequark: Ah. So no other allocator to fall back to.
[03:05:27] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[03:05:27] <bjz> carter: indeed
[03:05:42] <carter> gah
[03:05:43] <strcat> whitequark: you'll definitely have fewer problems if you use *
[03:05:50] <whitequark> FreeFull: yeah, and 20K of RAM
[03:05:59] <bjz> carter: rustpkg in general needs love
[03:06:02] <whitequark> strcat: ok, I'll try
[03:06:12] <carter> well, assuming theres meat in my alleged plans to play with rust this month, i may yak shave on ruskpkg next month
[03:06:15] <strcat> whitequark: (*foo).bar isn't *that* bad ;p
[03:06:27] <strcat> whitequark: well, probably *mut
[03:06:37] <bjz> carter: <3 <3 <3
[03:06:42] <carter> 'cause as much as cabal / cabal-install aren't perfect.... this rustpkg stuff.... not ok
[03:06:52] <bjz> carter: there are plenty of outstanding issues
[03:06:53] <FreeFull> strcat: is -> that evil?
[03:06:59] <whitequark> strcat: yeah, I think I got carried away with that
[03:07:09] <carter> i have no doubt everyone who has nontrivial builds has outstanding issues with it :P
[03:07:10] <bjz> carter: I'm having to move off rustpkg actually
[03:07:17] <carter> bjz: what for?
[03:07:57] <bjz> carter: it's been a pain - installing libs, more complex build setups - external test suites, examples etc
[03:08:01] <strcat> FreeFull: no, -> isn't evil, but 99% of rust code has safe pointers and uses auto-deref
[03:08:56] <bvssvni> bjz: https://github.com/bvssvni/rust-empty
[03:09:10] <Yurume> whitequark: depending on your use cases, you can minimize the use of * deferences with a wrapper function/method, and it's better for safety
[03:10:08] <FreeFull> Is anyone working at all on allowing higher kinded traits such as Functor/Mappable?
[03:10:31] <bvssvni> bjz: is there anything I should add to readme?
[03:10:52] <cmr> FreeFull: no one is working on it, no.
[03:12:35] <bvssvni> bjz: I want to create a comprehensive tutorial for how to organize a Rust project
[03:12:51] <FreeFull> ):
[03:12:55] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[03:12:58] <cmr> bvssvni: src/empty is an anti-pattern
[03:13:14] <bvssvni> cmr: what do you mean?
[03:13:15] <FreeFull> What's src/empty about?
[03:13:18] <cmr> you have the crate name duplicated.
[03:13:25] <cmr> just put the files in src/
[03:13:36] *** Joins: jhasse (jhass_000@moz-3128EA21.ewe-ip-backbone.de)
[03:13:49] <cmr> rustpkg bugs shouldn't encourage poor project structure.
[03:13:51] <bvssvni> cmr: I was following the workspace convention -> multiple crates, multiple targets
[03:14:12] <cmr> bvssvni: most repos really shouldn't be a workspacee
[03:14:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:14:54] <ChrisMorgan> rustpkg *really* needs fixing up and documenting.
[03:14:57] <bvssvni> cmr: will that conflict with library by github url?
[03:14:58] <bjz> bvssvni: I think your README should remove most of the stuff about unix and installing Rust - just focus on jusing how to use the project
[03:15:21] <FreeFull> Should I try out the ipython notepad thing I've been hearing about?
[03:15:39] <bjz> bvssvni: the other stuff is distracting - folks can find that elsewhere
[03:15:55] <bvssvni> bjz: I can move it to a wiki page
[03:15:56] <bjz> bvssvni: also, you should put it under CI
[03:16:08] <bjz> yeah, or another doc file
[03:16:15] <bvssvni> bjz: CI?
[03:16:16] <cmr> bvssvni: it shouldn't, I don't think. if it does, rustpkg needs to be fixed.
[03:16:20] <strcat> FreeFull: if you actually use python (especially pylab/matplotlib/numpy/scipy) a lot ;p
[03:16:28] <bjz> bvssvni: continuous integration
[03:16:28] <bvssvni> cmr: haha
[03:16:40] <bjz> http://hiho.io/rust-ci
[03:16:47] <whitequark> hm, strange. I have static mut free_list: Header
[03:16:50] <cmr> bjz: http://rust-ci.org/ :)
[03:16:51] <bjz> bvssvni: that could also be covered in the tute
[03:16:54] <whitequark> but: src/libmetal/global_heap.rs:45:32: 45:42 error: mismatched types: expected `*mut global_heap::Header` but found `&global_heap::Header` (values differ in mutability)
[03:16:57] <whitequark> src/libmetal/global_heap.rs:45     let (mut prev, mut iter) = (&free_list as *mut Header, free_list.next);
[03:16:58] <bvssvni> cmr: thought it was a feature
[03:17:01] <whitequark> (pointing at &free_list)
[03:17:03] <FreeFull> strcat: Well, I was thinking of using it with other languages, not python
[03:17:05] <bjz> cmr: nice!
[03:17:17] <FreeFull> I don't care for python itself
[03:17:19] <strcat> FreeFull: it's very centered around what pylab wants afaik
[03:17:59] <bjz> bvssvni: basically focus on project setup - not on building rust or using unix - folks can find that stuff elsewhere
[03:19:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:19:32] *** ChanServ sets mode: +ao dherman dherman
[03:20:06] *** Quits: Ferreus (ferreus@moz-A4A53361.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[03:20:18] *** Joins: creationix (creationix@moz-2FD6AA77.cpe.cableone.net)
[03:25:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[03:26:37] *** Quits: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz) (Ping timeout)
[03:30:41] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:33:47] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:35:58] <wycats_> it's coming along bros: https://github.com/wycats/route-recognizer.rs/blob/master/src/lib.rs#L84
[03:36:06] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:36:08] <wycats_> a progress is made
[03:37:08] *** Joins: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz)
[03:37:51] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:37:52] *** Joins: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:39:06] *** Quits: zz_kimundi (kimundi@moz-AA8877D1.dip0.t-ipconnect.de) (Ping timeout)
[03:39:27] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[03:40:36] <Luqman> sfackler: i've an idea about how to maybe get that to work, but first want to figure out #11197 :(
[03:40:52] *** Quits: creationix (creationix@moz-2FD6AA77.cpe.cableone.net) (Ping timeout)
[03:41:13] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[03:42:21] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[03:42:21] <whitequark> \o/ I've compiled the allocator
[03:42:30] *** Joins: zz_kimundi (kimundi@moz-56BCBF80.dip0.t-ipconnect.de)
[03:42:47] *** zz_kimundi is now known as kimundi
[03:43:40] <whitequark> ... of course it immediately aborts.
[03:43:43] <whitequark> sigh.
[03:45:39] <wycats_> hmmm
[03:46:02] <wycats_> if I have a type that wants to have a field with a generic type inside, does that mean that the parent type also needs to be generic over the same type?
[03:46:19] <wycats_> in my case, I have an NFA<T> which is in a field in Router
[03:46:24] <cmr> wycats_: yes.
[03:46:27] <wycats_> do I need a Router<T>
[03:46:28] <wycats_> hmm
[03:46:39] <wycats_> in my case, the Router always wants to use the same T
[03:46:45] <wycats_> so it seems bad to expose that to Router::new()
[03:46:50] <cmr> Then you don't actually want it generic, do you?
[03:46:53] <cmr> NFA<SomeConcreteType>
[03:46:59] <wycats_> ahh
[03:47:07] <wycats_> I can do NFA<Whatevs> in the struct definition
[03:47:08] <wycats_> perfect
[03:47:16] <wycats_> cmr: btw: I'm gonna get back on the case of that segv tomorrow
[03:48:41] <sfackler> Luqman: haha, that one seems like a bit of a higher priority :)
[03:49:14] <wycats_> what's the trait for implementing < ?
[03:49:16] *** Joins: pongad (Mibbit@moz-7E3233EF.revip5.asianet.co.th)
[03:49:19] <sfackler> wycats_: Ord
[03:49:20] <cmr> Ord
[03:49:28] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[03:49:34] <wycats_> and I just need lt
[03:49:39] <wycats_> the others are derived?
[03:49:56] <sfackler> they're all defined in terms of one another iirc so you just need to implement one of them
[03:50:05] <ChrisMorgan> You only need to implement lt.
[03:50:19] <sfackler> yeah I'm wrong
[03:50:36] <wycats_> how is le implemented in terms of lt
[03:50:38] <sfackler> haha, I love the impl list on http://static.rust-lang.org/doc/master/std/cmp/trait.Ord.html
[03:50:59] <wycats_> weird
[03:51:01] <ChrisMorgan> wycats_: in terms of lt and eq, not just lt.
[03:51:02] <wycats_> looking at the implementation
[03:51:13] <wycats_> fn le(&self, other: &Self) -> bool { !other.lt(self) }
[03:51:18] <wycats_> seems like it's just implemented in terms of lt
[03:51:23] <wycats_> something seems off here
[03:51:33] <sfackler> it's true for a total order
[03:51:34] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[03:51:59] <ChrisMorgan> Sorry, my turn to be wrong. Of course it's not using eq.
[03:52:08] <sfackler> Ord copies the standard C++ way of doing operator<, operator>=, etc
[03:52:23] <sfackler> except in C++ you have to do it yourself
[03:52:55] <wycats_> weird
[03:52:57] <Luqman> wycats_: a <= b  :  !(a > b)
[03:53:24] <wycats_> hm
[03:53:36] <ChrisMorgan> wycats_: it's depending on `a < b ⇔ b > a`
[03:53:48] <Yurume> wycats_: Ord is a fancy name for operator</<=/>/>= etc, and TotalOrd is there for stricter requirements
[03:53:56] <pongad> How does it give you le, only knowing lt?
[03:54:32] <Yurume> pongad: a.le(&b) == !a.gt(&b) == !b.lt(&a)
[03:54:59] <ChrisMorgan> pongad: self ≤ other ⇔ ¬(other < self)
[03:55:02] <comex> rustc seems to be ignoring my --link-args
[03:55:15] <pongad> Oh right, I forgot you can do it the other way around too
[03:55:19] <Luqman> comex: what're you trying to do?
[03:55:24] <Yurume> each equality invokes the corresponding axiom so it's not universal, but it works for many cases, and if it doesn't, you simply override the default method.
[03:55:27] <comex> wait, i'm an idiot
[03:55:34] <pongad> Too early in the morning for math for me
[03:55:36] <pongad> XD
[03:56:45] *** Quits: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:56:50] <bvssvni> le && ge == Eq
[03:57:03] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[03:57:29] <Yurume> bvssvni: not necessarily true for non-totally-ordered types ;)
[03:57:58] <bvssvni> Yurume: never heard of it, googling it
[03:58:17] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:58:34] <wycats_> so what are you supposed to return for equal?
[03:58:36] <wycats_> for Ord?
[03:58:40] <comex> it's just that it's ignoring stderr output from the linker
[03:58:49] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[03:58:54] <cmr> wycats_: for which method? :)
[03:58:58] <wycats_> lt
[03:59:04] <Luqman> false
[03:59:42] <Yurume> bvssvni: a simple example of non-totally-ordered types (i.e. exactly one of a<b, a>b, a=b is true for every a&b pair) is... a floating point type.
[03:59:57] <Yurume> that's why #[deriving(TotalOrd)] does not work for f32/f64 :(
[03:59:57] <ChrisMorgan> (self = other) ⇒ ¬(self < other)
[04:00:18] <sfackler> dat utf8
[04:00:26] <Yurume> there is a related issue: #10320
[04:00:31] <bvssvni> Yurume: is this like 0.999999... = 1?
[04:00:43] <ChrisMorgan> Floating point numbers are the *canonical* example of the distinction between total and partial ordering.
[04:00:47] <comex> so why does compiling an empty file (with -dead_strip) give me 1.2M of standard library?
[04:00:52] <comex> that's kinda extreme
[04:00:54] <Yurume> bvssvni: no, mainly because of NaNs.
[04:00:56] <ChrisMorgan> bvssvni: floats are not totally ordered because of NaN
[04:01:15] <bvssvni> Yurume: ah, NaN != NaN?
[04:01:23] <ChrisMorgan> Indeed.
[04:01:27] <ChrisMorgan> NaN != everything
[04:01:39] <Yurume> rusti: let nan = Float::nan(); nan == nan
[04:01:43] <cmr> comex: -Z lto
[04:01:53] -rusti- pastebinned 9 lines of output: http://ix.io/9Ca
[04:01:53] <cmr> comex: or -Z prefer-dynamic to get a tiny dynamically linked binary.
[04:01:55] <Yurume> rusti: let nan = std::num::Float::nan(); nan == nan
[04:01:57] -rusti- pastebinned 9 lines of output: http://ix.io/9Cb
[04:02:04] <Yurume> whoops
[04:02:08] <Yurume> rusti: let nan: f64 = std::num::Float::nan(); nan == nan
[04:02:09] -rusti- false
[04:02:13] <Yurume> that is.
[04:02:13] <sfackler> iirc all comparisons with NaN are false
[04:02:39] <ChrisMorgan> sfackler: != is true
[04:02:40] <ecl3ctic> rusti: println("{}", nan == nan)
[04:02:44] -rusti- pastebinned 10 lines of output: http://ix.io/9Cc
[04:02:49] <comex> cmr: ah, prefer-dynamic gets me a small binary, but lto does not (makes it larger actually)
[04:02:50] <Yurume> there is a relatively new addition of IEEE 754-2008 called totalOrder function though
[04:02:56] <ecl3ctic> println!("{}", nan == nan)
[04:03:03] <ecl3ctic> rusti: println!("{}", nan == nan)
[04:03:04] <Yurume> (and I think totalOrder distinguishes -0 and +0, which may or may not be desirable)
[04:03:06] -rusti- pastebinned 18 lines of output: http://ix.io/9Cd
[04:03:06] *** Quits: mjburgess (mjburgess@CC799EF6.58AFE261.5EBD1F4C.IP) (Quit: )
[04:03:26] <bvssvni> rusti: let nan: f64 = std::num::Float::nan(); nan < 0_f64 && nan > 0_f64
[04:03:27] -rusti- false
[04:03:32] <ecl3ctic> (I just realised I'm a boob)
[04:03:44] <Yurume> ecl3ctic: rusti does not preserve the states :)
[04:03:55] <bvssvni> rusti: let nan: f64 = std::num::Float::nan(); nan <= 0_f64 && nan >= 0_f64
[04:03:55] -rusti- false
[04:03:55] <Yurume> everything you give to rusti should be self-contained
[04:04:19] <ecl3ctic> Yurume: I just flipped to the IRC window, half read things and started typing random shit to rusti
[04:04:33] <wycats_> ah but I should be implementing TotalOrd if I want .sort
[04:05:07] <ChrisMorgan> In general it's a good idea to implement all of {,Total}{Eq,Ord}
[04:05:10] <Yurume> yeah, that is a bit painful
[04:05:19] <ChrisMorgan> (I mean, for orderable things.)
[04:06:00] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:06:03] <Yurume> wycats_: you can avoid that issue with .sort_by, though
[04:06:05] <cmr> wycats_: does #[deriving(Ord, Eq, TotalOrd, TotalEq)] not do the right thing for your type?
[04:06:11] <Yurume> (and providing your own comparison function)
[04:06:19] <bvssvni> rusti: let nan: f64 = std::num::Float::nan(); !(nan < 0_f64) && !(nan >= 0_f64)
[04:06:20] -rusti- true
[04:06:23] <bvssvni> ha
[04:06:30] <bvssvni> that's why
[04:06:41] <bvssvni> rusti: let nan: f64 = std::num::Float::nan(); !(nan < 0_f64) && !(nan > 0_f64)
[04:06:42] -rusti- true
[04:07:49] <Yurume> as always, you are recommended to read What Every Computer Scientist Should Know About Floating-Point Arithmetic: http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html
[04:07:53] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[04:08:02] <wycats_> why do I need to implement TotalEq for TotalOrd if TotalOrd is required to return Equals?
[04:08:08] <ercxx> Why exactly the compiler complains about the borroved value's lifetime here: http://kib2.free.fr/pastebin/view_paste.php?id=164
[04:08:54] <ChrisMorgan> Ah, you people happily using f64, never realising that if you build your code on armhf it will be unsound… (f64.trunc() is broken, which is why println!("{}", 0f64) hangs on armhf)
[04:09:05] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[04:09:25] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:09:25] *** ChanServ sets mode: +ao dherman dherman
[04:09:28] <Yurume> ChrisMorgan: how does it break?
[04:09:44] <comex> libnative makes things smaller, but still giant, i guess because of vtables pointing to things that are not actually used
[04:09:51] <ChrisMorgan> ercxx: you want from_utf8_owned
[04:10:00] *** Quits: heftig (heftig@moz-E18A4DBD.dip0.t-ipconnect.de) (Quit: Quitting)
[04:10:01] <Yurume> ercxx: from_utf8_owned.
[04:10:14] <Yurume> from_utf8 now converts &[u8] to &str
[04:10:16] <cmr> comex: I doubt it. If you're using the runtime, you're going to be using most of libstd.
[04:10:19] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:10:24] <ChrisMorgan> Yurume: https://github.com/mozilla/rust/issues/10482#issuecomment-31117740
[04:10:26] <ercxx> thanks
[04:10:41] *** Quits: pongad (Mibbit@moz-7E3233EF.revip5.asianet.co.th) (Quit: http://www.mibbit.com ajax IRC Client)
[04:10:58] <comex> cmr: there is a *lot* of random stuff like tcp and udp sockets
[04:11:01] <wycats_> hmm what I really want here is last_by(fn(&a, &b))
[04:11:06] <wycats_> for an immutable vector
[04:11:14] <cmr> comex: even with LTO?
[04:11:22] <comex> (referenced from IoFactory referenced from task::local_io)
[04:11:23] <Yurume> ChrisMorgan: that seems to be seriously broken. huh
[04:11:24] <comex> yes
[04:11:33] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:11:35] <whitequark> hm, do I understand it correctly: ~[] (or &[] for that matter) are fat pointers?
[04:11:43] <ChrisMorgan> Yurume: yep, it's seriously broken.
[04:11:46] <whitequark> tuples of (size, data) passed by value
[04:12:05] * whitequark tries to make sense of assembly
[04:12:07] <ecl3ctic> Is there a good reason why a function that, for example, takes 3 i32's can't accept 1 tuple (i32, i32, i32)?
[04:12:08] <cmr> whitequark: not for ~[]
[04:12:18] <whitequark> cmr: hm, what ~[] is?
[04:12:27] <cmr> whitequark: ~[] is *(*T, len, cap)
[04:12:57] <whitequark> ... would an empty ~[u8] be allocated with cap=4?
[04:12:59] <Yurume> I guess broken trunc() ultimately affects to_str(), unless libstd uses some kind of mystic codes like dtoa
[04:13:07] <cmr> whitequark: yes
[04:13:12] <whitequark> that would explain why it explodes after four pushes
[04:13:13] <Luqman> cmr: i think *T is last
[04:13:15] <whitequark> so my realloc is broken.
[04:13:16] <cmr> (unfortunately)
[04:13:24] <cmr> Ah yes, it is last.
[04:13:31] <cmr> And it's not actually a pointer, the data is stored inline
[04:13:42] <cmr> (it's a VLA, essentially)
[04:13:48] * whitequark nods
[04:13:51] <ChrisMorgan> ecl3ctic: you mean like Pythons *args concept. A good reason to begin with is that it takes effort and there are far higher priority things to do
[04:13:57] *** Joins: heftig (heftig@moz-E18A4DBD.dip0.t-ipconnect.de)
[04:14:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:14:29] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[04:15:34] <ecl3ctic> ChrisMorgan: That's a fair reason, but my question was more 'is it possible/a good idea'
[04:15:45] <ecl3ctic> because I think I'd find it quite useful
[04:15:53] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[04:16:11] <ChrisMorgan> ecl3ctic: I think it'll all be bound up in the notion of function traits.
[04:16:21] *** Joins: stomper (Mibbit@moz-A06909E4.glbb.ne.jp)
[04:16:35] <cmr> ecl3ctic: are you even talking about *args-like unpacking, or just using a tuple in general?
[04:16:39] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[04:16:49] <ecl3ctic> cmr: I'm not familiar with *args
[04:16:57] <cmr> then probably not
[04:17:05] <stomper> Sometimes I feel like rustc is talking down to me... "124:49 note: Did you mean to close this delimiter?"
[04:17:43] <cmr> stomper: that's me talking down on you, indirectly ;p
[04:17:44] <Yurume> *args and **kwargs are useful for perfect forwarding though
[04:18:03] <stomper> haha
[04:18:29] <Yurume> but rust does not allow intercepting method calls (a la Python's __getattr__ etc.) so it's mostly irrevalent.
[04:18:38] <ChrisMorgan> ecl3ctic: in Python, `def x(a, b, c): pass` can be called as `x(a, b, c)` or, given a tuple `t = (a, b, c)`, `x(*t)`.
[04:19:43] <bvssvni> in Lua there is pack and unpack
[04:20:56] <ecl3ctic> ChrisMorgan: if only I knew Python
[04:20:57] <bjz> ecl3ctic: rust's functions are not curried by default like in Haskell
[04:21:41] <bjz> ecl3ctic: or SML
[04:21:44] <cmr> ecl3ctic: regardless, fn foo(int, int, int) should be the same as fn foo((int, int, int))
[04:22:00] <ChrisMorgan> ecl3ctic: I'm just demonstrating what Python's *args unpacking does, as it's what you're asking about.
[04:22:04] <bjz> cmr: why?
[04:22:05] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[04:22:10] <ChrisMorgan> cmr: objection. Strong objection.
[04:22:22] <bjz> ChrisMorgan: +1
[04:22:41] <bvssvni> there is one problem with this: when translating code from one programming language to another
[04:22:41] <ecl3ctic> ChrisMorgan: oh yeah I appreciate that, I just don't know the syntax
[04:22:53] <cmr> ChrisMorgan: what?
[04:23:11] <bvssvni> some languages supports same function names on different types
[04:23:23] <cmr> I suppose there might be some padding for alignment of the tuple.
[04:23:24] <ChrisMorgan> cmr: what do we do when we have a generic T? foo(T), foo((T,)), foo(((T,),)), &c. My initial feeling there, without having followed it through completely, is that we'd have ambiguity.
[04:23:28] <Yurume> bvssvni: C++?
[04:23:46] <cmr> ChrisMorgan: I don't really see its relevance.
[04:23:49] *** Quits: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz) (Ping timeout)
[04:23:52] <bvssvni> Yurume: got this problem when translating between C# and Lua
[04:24:20] <SiegeLord> In what way should fn foo(int, int) be the same as fn foo((int, int)) ?
[04:24:58] <cmr> ecl3ctic asked "Is there a good reason why a function that, for example, takes 3 i32's can't accept 1 tuple (i32, i32, i32)?"
[04:25:07] <cmr> And my response is: no, they should be the same.
[04:25:09] <bjz> ecl3ctic: In haskell you can do `f :: (a, a, a) -> b`, then `x = (1, 2, 3)` and `f x`. That is analogous to Rust's `fn f(x: (T, T, T)) -> U {} let x (1, 2, 3); f(x)`
[04:25:22] <cmr> (although I see now there might be some extra alignment for the tuple)
[04:25:26] <SiegeLord> eddyb is adding a tuple expansion syntax, no?
[04:25:35] <SiegeLord> So it'll be foo(..(1, 2))
[04:25:38] <cmr> I feel like ya'll are reading too deeply into this :P
[04:26:01] <benh> should f(1, (2, 3)) and f((1, 2), 3) be the same?
[04:26:40] <bvssvni> no, but f(1, ..(2,3)) and f(..(1, 3), 3)
[04:26:43] <ChrisMorgan> cmr: it needs extra syntax, or I think we have ambiguity, and we certainly have semantic ugliness. That's what the .. is, akin to Python's *. That's the part that I was objecting to—that `fn foo(int, int, int)` should be the same as `fn foo((int, int, int))`.
[04:26:49] <ecl3ctic> I reckon tuples should automatically unpack if they need to in order to meet the function signature
[04:26:51] <wycats_> ahhhh yeah: https://github.com/wycats/route-recognizer.rs/blob/master/src/lib.rs#L129-L159
[04:26:54] <wycats_> correct sorting
[04:27:06] <cmr> ecl3ctic: did your original question have anything to do with unpacking?
[04:27:09] <bjz> benh: well how do you disambiguate fn(T, (U, V)) with fn((T, U), V)
[04:27:29] <benh> Should I?
[04:27:45] <cmr> ChrisMorgan: I'm just talking about trans-wise/semantics wise. Besides the types, there's not really a difference.
[04:28:25] * bjz thinks that "`fn foo(int, int, int)` should be the same as `fn foo((int, int, int))`" seems simple but would actually lead to more ugliness and complications down the line
[04:28:27] <ecl3ctic> cmr: I'm just getting confused now
[04:28:29] <bvssvni> cmr: there is a difference if the signature is changed
[04:28:31] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[04:28:49] <cmr> bvssvni: that's the types changing.
[04:29:11] <cmr> bjz: that's not what I meant at all, I meant what it codegens into.
[04:29:13] <bvssvni> cmr: if there is no unpack, one might end up with not getting compiler errors when wanted
[04:29:20] <bjz> cmr: OHH
[04:29:27] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[04:29:28] * cmr was never talking about unpacking
[04:29:40] <bvssvni> ah
[04:29:41] <ChrisMorgan> wycats_: you know, I think you should be able to use `assert_eq!(router.recognize("/posts/1"), Ok(&StringHandler(~"id")));`
[04:29:43] <SiegeLord> Well then say so :P
[04:29:51] <Yurume> cmr: I had a function which arguments include a generic type implemented by either () or (i16,i16). how could rustc resolve that?
[04:29:52] * bjz smacks palm into face
[04:29:52] <wycats_> where's the list of asserts?
[04:30:07] <cmr> wycats_: assert! and assert_eq! are it
[04:30:11] <wycats_> we should be able to use macros to make assert! print out a useful error message
[04:30:26] <Yurume> I know it's technically possible to resolve them, but the resolution rule would be prohibitively complex
[04:30:29] <bjz> wycats_: libsyntax/ext/expand.rs ^_^
[04:30:52] <bjz> wycats_: yay documentation
[04:31:02] <cmr> they're in the manual too
[04:31:16] <cmr> ...or not
[04:31:20] <bjz> wycats_: there's also assert_approx_eq
[04:31:35] <wycats_> how approximate is approximate?
[04:31:42] <cmr> that's still around? fun
[04:31:46] <dbaupp> 1e-6 or something
[04:32:01] <bjz> wycats_: you can also give it an epsilon
[04:32:09] <bjz> as the third argument
[04:32:10] *** Quits: stomper (Mibbit@moz-A06909E4.glbb.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[04:32:35] <wycats_> lolz
[04:32:51] <bjz> wycats_: it requires that the type implements ApproxEq
[04:32:58] <wycats_> ah
[04:32:59] <wycats_> lulz
[04:33:03] <wycats_> ApproxEq is a funny type
[04:33:05] <ChrisMorgan> wycats_: your assert messages are also the wrong way around; it's supposed to be the *failure* message
[04:33:05] <bjz> roflcopter
[04:33:33] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[04:33:37] <ChrisMorgan> (Personally, I wouldn't worry about specifying messages in the significant majority of assert cases.)
[04:33:37] <bjz> wycats_: yeah, it's ugly without associated constants
[04:34:12] <wycats_> ChrisMorgan: yeah
[04:34:17] <comex> mm
[04:34:17] <wycats_> ChrisMorgan: I keep screwing that up
[04:34:20] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[04:34:20] <bjz> heh, why would you need a sucess message?
[04:34:32] <ChrisMorgan> wycats_: it's the RSpec influence, isn't it?
[04:34:34] <cmr> wycats_: it's the string passed to fail!()
[04:35:06] <comex> anyway, cmr: do you know any way i can get that down further? i'd rather not have to manually copy stuff i need from libstd
[04:35:18] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[04:35:24] <Yurume> bjz: assert_eq!(info!("success!"), (), "failed!"); or similar?
[04:35:24] <cmr> comex: with static linking? no, sorry. file bugs :)
[04:35:30] <comex> (why do those things even need vtables?)
[04:35:37] <comex> ok :p
[04:35:47] <wycats_> https://github.com/wycats/route-recognizer.rs/commit/d58a6cbf7360bb2fe941edd14d5acdc87e0411e3
[04:35:53] <wycats_> ChrisMorgan: I want rspec for Rust
[04:35:57] <wycats_> it should be easy with traits
[04:36:04] <cmr> well the IoFactory trait references Udp/Tcp etc.
[04:36:09] <wycats_> expect(somesuch).to == 12
[04:36:11] <bjz> Yurume: that would print success even if it failed
[04:36:15] <cmr> And also file io and everything else.
[04:36:17] <bjz> :P
[04:36:22] <cmr> So using it requires pulling in everything
[04:36:26] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[04:36:26] * ChrisMorgan does not really like that way of doing things
[04:36:31] <Yurume> bjz: ah, right, assert_eq!(a, b, "failed!"); info!("success!"); should do it.
[04:36:39] <bjz> yup
[04:36:43] <Yurume> (no, I don't like that obviously)
[04:36:58] <wycats_> ChrisMorgan: every time I drill into why someone doesn't like it, they say they didn't like expect(5).to.be.equal.to(5)
[04:37:05] <wycats_> which is not at all what I am suggesting ;)
[04:37:39] <wycats_> I like the rspec approach because it makes the order obvious and it makes the error message trivial to generate
[04:37:53] <ChrisMorgan> wycats_: I like `assert 5 == 5`. If I've got to, I'll take `assert_eq!(5, 5)`.
[04:38:09] <wycats_> I'll take assert 5 == 5 if I get a free error message
[04:38:13] <wycats_> Elixir does ti
[04:38:14] <wycats_> it
[04:38:16] <wycats_> via macros
[04:38:20] <comex> ah.  so what i really want is a way to remove unused virtual methods.  i wonder if clang can do that for C++
[04:38:47] * ChrisMorgan wants assert! et al. not to need the parentheses
[04:38:54] <cmr> comex: I very much doubt it
[04:39:01] <Yurume> assert! a == 5?
[04:39:08] *** Joins: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net)
[04:39:23] <ChrisMorgan> Yurume: yes, but with a semicolon instead of a question mark.
[04:39:37] <cmr> heh
[04:39:48] <Yurume> right, I should have quoted it within backquotes
[04:40:10] <Yurume> that would make macro syntaxes a bit harder to parse though
[04:40:16] <ChrisMorgan> We don't write `if (a == 5)`, do we? So why should assert need the parentheses? (I will concur with anyone that claims that that logic is full of holes.)
[04:40:24] *** Quits: nfroidure (nfroidure@moz-B747FB5E.w90-18.abo.wanadoo.fr) (Ping timeout)
[04:40:47] <comex> looks like no
[04:40:55] <Yurume> well, we already have two types of macro invocation syntaxes: f!() and f!{}, so why not f! followed by a single $expr or $ident.
[04:41:07] <ChrisMorgan> There was talk of doing something like `foo!! x (y)` == `foo!(x, y)`.
[04:41:32] <Yurume> that does not work for assert!s however
[04:41:34] <wycats_> https://gist.github.com/wycats/50f4d35c01e020d16a8a
[04:41:41] <wycats_> :shipit: ?
[04:42:36] <Yurume> wycats_: how do you use it?
[04:42:36] <sfackler> Yurume: there's also f! ident (..)
[04:42:51] <sfackler> but it's only used by macro_rules! right now
[04:42:52] <Yurume> sfackler: yeah, (for macro_rules! etc.)
[04:43:08] <wycats_> #[test] fn foo() { expect(something()).to == some_val }
[04:43:09] <Yurume> but for the assert! use case you need to eliminate trailing ()s
[04:44:07] <Yurume> wycats_: I don't really see its benefit over assert_eq!(something(), some_val);
[04:44:29] <wycats_> there are a few benefits:
[04:44:36] <wycats_> (1) you don't have to remember the order
[04:44:59] <wycats_> (2) you get nicely formatted error messages
[04:45:06] <Yurume> there is no order between two arguments, since it performs two-way comparisons (i.e. a == b && b == a)
[04:45:15] <wycats_> but the generated error message cares about the order
[04:45:17] <wycats_> here's the deal
[04:45:21] <wycats_> some people don't see the point
[04:45:25] <wycats_> those people shouldn't use it :)
[04:45:51] <wycats_> I've seen this argument in a lot of languages... it's a dumb argument because it's almost a purely aesthetic question
[04:46:01] <Yurume> one may refine the syntax to assert!(expected <expected> actual <actual>); or something like that
[04:46:03] <wycats_> it's cool that you can implement BDD style cleanly in Rust
[04:46:22] <wycats_> if you don't like it, don't use it
[04:46:23] <wycats_> bada bing
[04:46:25] <doy> i dislike it because i find it hard to read - it expects you to parse it as english when it's clearly not and i find that more confusing than helpful
[04:46:27] <ChrisMorgan> wycats_: you know that assert_eq! provides a nice message already?
[04:46:36] <wycats_> ChrisMorgan: but then you have to remember the orde
[04:46:37] <wycats_> order
[04:46:39] <wycats_> see above
[04:47:09] <wycats_> I'm shitty at remembering order
[04:47:36] <bvssvni> the 'to' confuses me
[04:47:43] <Yurume> wycats_: how about refining messages? do not use expected and actual, use left and right instead.
[04:47:55] <wycats_> Yurume: that doesn't look good in a message
[04:48:06] <wycats_> you want "Expected <inspected> to equal <inspected>"
[04:48:11] <Yurume> hmm
[04:48:22] <wycats_> Not "Left <inspected> didn't equal right <inspected>"
[04:48:24] <ChrisMorgan> bvssvni: the .to bit can be trivially removed from the design
[04:48:29] <wycats_> ChrisMorgan: confirm
[04:48:32] <Yurume> if it's an issue, the second choice is customizable error messages
[04:48:32] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[04:48:37] <wycats_> but the thing is
[04:49:01] <wycats_> I don't think this is an area where community-wide adoption of a single approach is necessary
[04:49:16] <Yurume> assert!(a, b, "{left} is expected to have a value of {right} but isn't");
[04:49:24] <Yurume> (mostly bikeshedding though)
[04:49:28] <wycats_> that is a nice improvement yeah
[04:49:37] <wycats_> doesn't fix assert_eq!
[04:49:44] <Yurume> then it may have a problem with error messages without {left} and {right}.
[04:49:49] <Yurume> wycats_: sorry, s/assert/assert_eq/
[04:50:40] <wycats_> the point of assert_eq is that you don't have to type an error message
[04:50:46] <wycats_> as long as you remember the right left/right order
[04:51:18] <bvssvni> if you test two algorithms against each other with random input, there is no defined 'expected'?
[04:51:41] <wycats_> bvssvni: that's not what these things look like
[04:51:51] <wycats_> assert_eq!(something(), ~"hello")
[04:51:52] <Yurume> personally I don't care, in normal hours you won't see these messages anyway and you need to look the testing code up when there is an error.
[04:51:52] <ChrisMorgan> When it's cut down to `expect(foo) == bar` I don't have any particular objection to it left beyond the fact that to the "outsider" it will probably be confusing—equality comparison causing failure? Takes a little getting used to.
[04:52:27] <wycats_> ChrisMorgan: yeah the .to isn't necessary... trying to eliminate the confusion
[04:52:32] *** Joins: stomper (Mibbit@moz-A06909E4.glbb.ne.jp)
[04:52:34] <wycats_> Rust has overridable ==
[04:52:46] <Yurume> wycats_: expect(foo).is_empty() won't work ;)
[04:53:01] <Yurume> or similar non-operator methods.
[04:53:32] <wycats_> sure it will
[04:53:33] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[04:54:26] <wycats_> impl IsEmptyMatcher for T { }
[04:54:57] <Yurume> in general it won't work for every method.
[04:55:12] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[04:55:24] <wycats_> Yurume: right... you create matchers
[04:55:25] <ChrisMorgan> Yurume: `expect(foo.is_empty()) == true`
[04:55:44] *** Joins: nfroidure (nfroidure@moz-7EFE7A4F.w90-18.abo.wanadoo.fr)
[04:55:54] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:55:57] <wycats_> one of the reasons for .to is: expect(foo).to be_close_to(bar)
[04:56:14] <wycats_> hm
[04:56:16] <wycats_> that doesn't work
[04:56:22] <Yurume> ChrisMorgan: haha
[04:56:28] <wycats_> so to_be_close_to(bar)
[04:56:36] <wycats_> anyway
[04:56:43] <wycats_> I haven't really done a full design here
[04:56:49] <wycats_> I just think it's cool that it can be somewhat done
[04:56:57] <stomper> Can anyone explain this behaviour to me: http://mibpaste.com/0gUV22 If I have a struct with a field of type ~str, and I assign it something like `~[77, 97, 77].to_str()` it will give me the string "~[77, 97, 77]", not the characters those values represent
[04:57:20] <cmr> stomper: std::str::from_utf8
[04:57:25] <bvssvni> whycats_: it's a nice trick
[04:57:30] <cmr> stomper: to_str gives a representatino of the vector.
[04:57:35] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:57:47] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[04:57:58] <ChrisMorgan> stomper: you're expecting the wrong thing from to_str.
[04:58:03] <stomper> oh jesus
[04:58:05] <stomper> of course
[04:58:06] <stomper> okay
[04:58:29] <Yurume> cmr: was there any reason that `impl<T:ToStr> ToStr for ~[T]` (and `&'r[T]` etc.) exists?
[04:58:37] <cmr> I do not know.
[04:59:28] <Yurume> there are two (or possibly three) different kinds of stringification operations: human-readable string, inspection, internal representation.
[04:59:34] *** Joins: twi1 (Adium@moz-174339A4.cust.dsl.vodafone.it)
[04:59:40] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[05:00:07] <Yurume> I'm not sure ToStr should return a human-readable string or inspection, the status quo seems to be both.
[05:00:21] <bjz> Yurume: ToStr should really be removed, and the functionality moved to a default method on fmt::Default
[05:00:58] * bjz wonders if he should attempt to do that now
[05:01:25] *** Quits: twi1 (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[05:01:37] <ChrisMorgan> bjz: https://github.com/mozilla/rust/issues/9806
[05:01:52] <lkuper> Can someone explain what the difference is between {} and {:?} in a format string?
[05:01:58] <Yurume> bjz: delegation via Formatter.buf?
[05:02:07] <bjz> ChrisMorgan: ahh
[05:02:25] <sfackler> lkuper: {} uses the Default trait and {:?} uses reflection
[05:02:26] <cmr> lkuper: http://doc.rust-lang.org/doc/master/std/fmt/index.html
[05:02:27] <ChrisMorgan> lkuper: {} is human-friendly formatting, {:?} is the fixed internal representation.
[05:02:29] <dbaupp> lkuper: {:?} is reflection and not customisable, {} is a trait
[05:02:52] <ChrisMorgan> lkuper: there, do you feel answered?
[05:02:58] <cmr> :P
[05:03:01] <lkuper> in four different ways :)
[05:03:13] <bjz> `impl<T: fmt::String> ToStr for T` makes sense
[05:03:42] <dbaupp> bjz: why do that when you can just have .to_str be a default method on fmt::String?
[05:03:49] <Yurume> Path is formatted super-duper uglily with {:?} ;)
[05:04:01] <dbaupp> Yurume: Path.display() <3
[05:04:14] <bjz> dbaupp: hmm, yeah I guess so
[05:04:34] <Yurume> dbaupp: yeah, and that's a main difference between (in my terminology) inspection and internal representation.
[05:05:22] <lkuper> so the reason I ask about {} and {:?} is that I'm trying to finally write up something about default methods for the tutorial
[05:06:00] <Yurume> for example, I want to inspect some biggy structs which contain Paths. currently without having a custom inspection method inner Paths will be printed uglily (with {:?}) or won't compile at all (with {:s}).
[05:06:16] <Yurume> with {:s} and {}*
[05:07:05] *** Joins: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[05:07:09] <lkuper> and I want to show something like https://gist.github.com/lkuper/8215298 to carry on the "Printable" example that's already in the tutorial
[05:07:29] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:08:10] <lkuper> but I don't want to do :? if I can't help it; but I can't use {} either because Default is not implemented for Self
[05:08:20] <lkuper> s/can't help it/can help it/
[05:08:41] <dbaupp> You could do `trait Printable: Default`, but that makes Printable kinda pointless...
[05:08:46] <bjz> dbaupp: do you think I should have a go at doing a deriving(String)?
[05:09:00] <dbaupp> bjz: no, deriving(Default)
[05:09:33] * dbaupp basically only sees the use of {} and {:?}
[05:09:40] <bjz> dbaupp: there is already a deriving(Default)
[05:09:43] <dbaupp> and occasionally {:x}
[05:09:50] <dbaupp> yeah, fmt::Default needs to be renamed
[05:10:07] <bjz> https://github.com/mozilla/rust/issues/9806#issuecomment-26145205
[05:10:12] <bjz> mmk
[05:10:17] <bjz> what to?
[05:10:33] <Yurume> fmt::Formattable?
[05:10:39] <dbaupp> https://github.com/mozilla/rust/issues/9806#issuecomment-30045380
[05:10:45] <Yurume> fmt::Thing
[05:10:51] <lkuper> dbaupp: yeah, but then that's another thing to explain
[05:10:56] <dbaupp> lkuper: yup
[05:11:02] <lkuper> ugh, `Default` is mentioned in the tutorial but never explained
[05:11:28] <bjz> Yurume: you should avoid -able trait names
[05:11:42] <dbaupp> bjz: (fwiw, I imagine one of the formatting traits is not a good way to start with deriving, it'll probably be kinda complicated... but you can try :) )
[05:11:47] <lkuper> bjz: heh, on that note, maybe the tutorial shouldn't use `Printable` as an example then!
[05:12:00] <bjz> dbaupp: ok, so do Default => Format first?
[05:12:02] <Yurume> bjz: aha, then how about... ToStr? (providing that it is reexported in std::prelude)
[05:12:18] <bjz> dbaupp: I'm looking at the deriving code, seems to look ok
[05:16:55] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[05:17:01] <ChrisMorgan> wycats_: how are you building route-recognizer?
[05:17:11] <wycats_> rustc --rlib lib.rs
[05:17:23] <wycats_> I've been running the tests as rustc --test lib.rs
[05:17:25] <wycats_> why?
[05:18:49] <ChrisMorgan> Just wondering, largely.
[05:19:04] <ChrisMorgan> #[crate_type = "rlib"]; would fix the --rlib flag.
[05:19:16] <wycats_> ChrisMorgan: yeah
[05:19:53] <wycats_> ChrisMorgan: people don't think static is ready as a default yet
[05:20:01] <wycats_> so I'm letting people choose for now
[05:21:06] <ChrisMorgan> Weird. From the src directory, `rustpkg build` will create an empty directory .rust in the repository root and will compile the code to /dev/null. `rustpkg install` will create .rust in the src directory, with the artefacts in it.
[05:22:14] *** Quits: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Quit: Leaving)
[05:22:17] <ChrisMorgan> wycats_: two spaces, rather than four? :-(
[05:22:29] *** Parts: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net) ()
[05:24:44] <wycats_> ChrisMorgan: I'm used to it from my Ruby days
[05:24:49] <wycats_> should I forcibly change to 4?
[05:24:58] <wycats_> ChrisMorgan: I'm not bothering to make it work with rustpkg
[05:25:01] <ChrisMorgan> Well, the going convention in Rust is four spaces.
[05:25:06] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[05:25:59] <wycats_> 4 spaces it is
[05:26:01] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[05:26:28] <wycats_> 2 spaces makes it easier to contain within 80 characters :P
[05:26:29] * ChrisMorgan will submit a pull request replacing the manual Total{Ord,Eq} implementations with automatically derived ones
[05:27:41] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[05:27:52] <wycats_> ChrisMorgan: wheee
[05:28:08] <wycats_> ChrisMorgan: OSS, it's awesome
[05:28:50] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[05:28:51] *** ChanServ sets mode: +o jdm
[05:29:26] <lkuper> on that note, if anyone has suggestions to improve https://github.com/mozilla/rust/pull/11270 I'm happy to hear them :)
[05:29:33] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[05:29:45] *** Quits: jhasse (jhass_000@moz-3128EA21.ewe-ip-backbone.de) (Ping timeout)
[05:30:19] *** Joins: Guest_ (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[05:30:30] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[05:31:37] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[05:32:44] *** Joins: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz)
[05:33:04] <o11c> wycats_: if you have enough levels of indentation that 4 spaces will put you over 80 ... you're doing it wrong
[05:33:04] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[05:33:09] <joelteon> how's rust's performance doing?
[05:33:20] <o11c> even *8* space advocates use that
[05:34:00] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[05:34:07] <alan_andrade> 8 feels way too much
[05:34:16] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:34:37] *** Quits: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz) (Ping timeout)
[05:34:38] <o11c> I agree, but at least setting my editor softtabstop=4 I can just go over twice for that style
[05:34:44] <o11c> but there's no good way to support 2
[05:34:54] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[05:34:57] *** Joins: lenstr_ (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[05:36:03] <ChrisMorgan> o11c: `setl sts=2 sw=2 ts=2 et` and stop thinking about it.
[05:36:48] *** Quits: lenstr_ (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[05:40:08] <lkuper> o11c: it's not so much that it puts you over 80 as that you find that you suddenly have only 70 or 60 to work with because you're in a few levels, and then your code is more screenfuls than it really has any right to be
[05:40:44] <ChrisMorgan> wycats_: OK, I was caught by your TotalOrd implementation. Back to front like that, #[deriving(TotalOrd)] won't do.
[05:41:01] *** Joins: lpy_ (lpy@12172131.F09091A8.1348A864.IP)
[05:41:04] <wycats_> ChrisMorgan: there's probably a better way to do it
[05:41:16] <ChrisMorgan> wycats_: but at least Eq/TotalEq can be derived.
[05:41:34] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[05:41:42] <wycats_> ChrisMorgan: what do you mean "back to front"?
[05:42:01] <ChrisMorgan> if self.stars > other.stars { Less } etc.
[05:42:34] <ChrisMorgan> self.stars > other.stars ⇒ self < other
[05:42:42] <wycats_> ChrisMorgan: I can flip the order and use .first() instead of last()
[05:42:55] *** Quits: lpy_ (lpy@12172131.F09091A8.1348A864.IP) (Ping timeout)
[05:43:18] <wycats_> the two ambiguous tests on the bottom will test if you do it right
[05:43:31] <ChrisMorgan> That's why you write tests :-)
[05:45:45] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:45:57] <bjz> was the #[deprecated] attribute added?
[05:46:27] *** Quits: stomper (Mibbit@moz-A06909E4.glbb.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[05:47:22] *** Joins: canhtak (canhtak@moz-59105D0.wl.t.ulaval.ca)
[05:49:22] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[05:51:33] <ChrisMorgan> wycats_: think we could replace the ~str in NFA.process(...) -> Result<T, ~str> with an enum? (It can then implement fmt::Default for a human-readable message from it.)
[05:54:57] *** Quits: Guest_ (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:55:33] <bjz> dbaupp: I wish we could have paths in the deriving thingy
[05:55:54] <o11c> ChrisMorgan: I have to think about it every time I switch to a project ... I'm seriously considering adding a second user to my machines just for projects that require strange indentation settings but don't specify a modeline.
[05:56:07] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[05:56:38] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:56:47] <o11c> lkuper: that's what I mean: if you are considering having 60 characters on a line, that's too much logic. Introduce a couple of named intermediate variables or something.
[05:57:30] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[05:58:04] <ChrisMorgan> o11c: you just want a bit of setup in your vimrc. `au BufNewFile,BufRead /path/to/project/*.rs setl ts=2 sw=2 sts=2 et`.
[05:58:31] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:58:52] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:58:57] <o11c> au by path is just plain ugly though ... I'm considering what I should do about it.
[05:59:13] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Ping timeout)
[06:00:21] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[06:00:25] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[06:00:57] <ChrisMorgan> Or use a plugin that detects the number of spaces per line and sets it automatically. But that won't work for new files in the same project without it also scanning other files around it.
[06:02:15] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[06:02:40] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[06:02:43] <Yurume> is /r/rust serving as a subreddit for both Rust and Servo (for now)?
[06:04:25] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Ping timeout)
[06:04:54] <o11c> yurume: from my understanding, it's a subreddit for anything written in Rust for now ... I don't follow reddit or rust close enough to say whether that will change once rust gets popular
[06:04:57] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[06:05:47] <sanxiyn> I found spir's "on quality & success" mail interesting.
[06:05:55] <o11c> hm, I should ask FlashCode to make smart completion handle case better ...
[06:06:16] <Yurume> o11c: yeah, I read a question about Unicode grapheme cluster segmentation in /r/rust (in relation to Servo and Rust stdlib's lack of support) and I wondered that
[06:06:39] <Yurume> and I found that rust-grapheme seems not up to date ;)
[06:06:43] <sanxiyn> At some point, compromising on language designer's ideal is inevitable, because programming language should transition to belonging to its users, from the property of language designers
[06:06:55] <sanxiyn> spir seems to think this is a bad thing, but I wonder why
[06:09:08] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[06:09:10] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:09:10] *** ChanServ sets mode: +ao dherman dherman
[06:09:11] *** Joins: Guest_ (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net)
[06:10:04] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[06:10:14] <bjz> dbaupp: then add to_str to fmt::Format?
[06:10:51] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[06:11:35] *** Quits: victorporof (victorporo@773D35C8.FAB6DAB7.79933D60.IP) (Quit: victorporof)
[06:11:39] *** Joins: Rrust (Mibbit@D45A3673.BBF72655.65B957D6.IP)
[06:11:44] *** Quits: Rrust (Mibbit@D45A3673.BBF72655.65B957D6.IP) (Quit: Rrust)
[06:11:58] *** Joins: Rust (Mibbit@D45A3673.BBF72655.65B957D6.IP)
[06:13:26] <Yurume> sanxiyn: spir thinks that's a bad thing since it keeps bad practices from being eradicated.
[06:13:32] <Yurume> (as far as I read)
[06:13:45] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:14:16] <sanxiyn> Yurume: I am all for eradicating evils I see in the world, but I found attacking all evils at once is often not the best strategy to do so
[06:14:25] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[06:14:27] <Yurume> for me, though, almost every decision made by language designers has no clear cut (even for =/== problem described in the mail)
[06:15:30] <Yurume> Java, for example, have made the same choice for =/== problem but does not suffer from a typo since `if` only accepts booleans.
[06:15:56] <o11c> just use := for assignment and == for comparison, make everybody happy!
[06:16:04] <sanxiyn> Yurume: Well, that too, but my point is even for clear cut issues, compromise is often the right answer
[06:16:19] <sanxiyn> You compromise when you want to cooperate
[06:16:35] <sanxiyn> And creating a programming language (and its ecosystem) these days all but require cooperation
[06:16:46] <Yurume> some decisions are pretty bad in that that decision is mostly orthogonal to other decisions (e.g. nullable pointers)
[06:17:24] <Yurume> but yeah, many decisions are not problematic by themselves but a set of particular decisions causes problems.
[06:17:25] <bjz> dbaupp: I wonder if it would be better just to have a `fn to_str<T: Format>(x: &T) -> ~str { format!("{}", x) }` function in `fmt`
[06:17:32] <sanxiyn> Language-known-by-code-name-of-M# reportedly still has nullable pointers, because not having them would be too big a departure from C#
[06:17:36] <sanxiyn> I think I can understand that
[06:18:02] <Yurume> sanxiyn: right, and I think I don't disagree on that :)
[06:18:15] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[06:18:39] <sanxiyn> I mostly found spir's framing of the issue unpleasant, that compromising is always bad
[06:18:59] <bjz> dbaupp: is there any reason why somebody would, or should override that implementation, if it were going to be a default method in fmt::Format?
[06:19:14] <Yurume> so the points are: i) many decisions are not problematic in isolation (i.e. can be worked around) and ii) even when some decisions are problematic in most cases, the problems may have to be compromised to be accepted.
[06:20:49] <o11c> sanxiyn: rust has nullable pointers internally, it just doesn't expose them (*)
[06:21:20] <o11c> but it exposes Option<~T> and Option<&T>, which are the same thing (except that they're not)
[06:21:59] <Yurume> o11c: Hoare's "billion dollar mistake" is limited to the unrestricted/unchecked null pointers, Rust is safe in that regard.
[06:22:08] <sanxiyn> o11c: Option<~T> is a different type from ~T, so Rust does not have nullable pointers in the usual sense
[06:22:57] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[06:23:09] <o11c> sanxiyn: thus "has, but does not expose"
[06:25:01] *** Quits: Rust (Mibbit@D45A3673.BBF72655.65B957D6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:28:59] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[06:30:16] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:30:43] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[06:31:42] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[06:33:09] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[06:35:05] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Ping timeout)
[06:35:32] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[06:35:32] *** ChanServ sets mode: +o jdm
[06:37:11] *** Quits: canhtak (canhtak@moz-59105D0.wl.t.ulaval.ca) (Quit: canhtak)
[06:37:37] *** Joins: jdm_ (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[06:37:40] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Connection reset by peer)
[06:40:15] *** Joins: pongad (Mibbit@moz-7E3233EF.revip5.asianet.co.th)
[06:41:16] *** Joins: derek_c (derek@6A9BB0A2.74FA9A9F.EB673A25.IP)
[06:42:37] <derek_c> how do you trap whatever conditions?
[06:42:49] <derek_c> sort of like `except:` in Python?
[06:45:30] <Yurume> derek_c: http://static.rust-lang.org/doc/master/tutorial-conditions.html#trapping-a-condition
[06:46:04] <wycats_> ChrisMorgan: you know better than I
[06:46:16] <wycats_> I've been using Results when I want to leave a note for myself to do better error handling
[06:46:41] <Yurume> so, basically condition_to_trap.trap(|_| /* called when the condition traps, return an alternative value or fail here */).inside(|| { ... })
[06:46:48] <ChrisMorgan> wycats_: the general idea of using an enum instead of a ~str is to have it (a) as data rather than text, and (b) using less memory
[06:48:23] <wycats_> oh I see
[06:48:26] <wycats_> you mean as the error
[06:48:28] <wycats_> yeah absolutely
[06:48:57] <wycats_> I mean you could make it an Option<~str>
[06:48:59] <wycats_> :p
[06:49:41] <wycats_> but you're saying an enum of different kind of errors?
[06:51:07] <ChrisMorgan> Yeah. They can be simple variants or they can have extra data attached.
[06:51:44] <wycats_> yeah seems good
[06:51:46] <wycats_> :+1:
[06:51:47] <wycats_> do it
[06:51:54] <wycats_> my finger is hovering over the merge button
[06:51:59] <ChrisMorgan> e.g. enum ProcessingError { CouldNotProcess(~str), PrematurelyExhausted }
[06:52:15] <wycats_> ChrisMorgan: yeah
[06:54:05] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[06:54:34] <wycats_> sfackler: where's your PR for loadable macros?
[06:54:48] <ofeldt-> enum SexualInnuendo { PrematurelyExhausted } *duck*
[06:54:50] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:55:28] <wycats_> the HTTP errors are so much worse
[06:55:34] *** Joins: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au)
[06:55:35] <wycats_> Request Entity Too Long
[06:55:45] * ofeldt- giggles
[06:55:56] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[06:56:18] <wycats_> Payment Required
[06:56:24] <wycats_> Method Not Allowed
[06:56:32] <wycats_> Length Required
[06:56:44] <wycats_> aaaanyway
[06:57:23] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:57:37] <whitequark> wycats_: Blocked by Parental Controls
[06:57:40] <sfackler> wycats_: https://github.com/mozilla/rust/pull/11151
[06:57:50] <sfackler> it doesn't handle macro_rules style macros yet
[06:58:18] *** Joins: fabiand (fabiand@moz-D7D680EB.adsl.alicedsl.de)
[06:58:29] <sfackler> (it also segfaults ~50% of the time :D)
[06:58:37] <wycats_> sfackler: I'm so excited for #[deriving(Postgres)]
[06:58:52] <ChrisMorgan> sfackler: only 50% of the time? Marvellous!
[06:59:07] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:59:46] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[06:59:47] <sfackler> !
[07:00:58] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[07:01:07] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[07:02:41] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[07:02:55] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[07:03:28] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[07:03:57] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[07:04:14] <wycats_> sfackler: seriously, if that can happen, ChrisMorgan and I can make the most awesome statically typed web framework of all time
[07:04:32] <ofeldt-> wycats_, rustyrails? ;)
[07:05:16] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[07:05:29] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[07:05:30] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[07:06:16] <ChrisMorgan> sfackler: I am *delighted* to see what you've got there in #11151. I had not been expecting it to come along before 1.0, yet here it is, for procedural macros and all!
[07:06:46] *** Joins: jackneill (jackneill@moz-E7969CCA.pool.digikabel.hu)
[07:06:55] <wycats_> ofeldt-: this is what I have in mind so far: https://gist.github.com/wycats/f7c07cce7a012f7a2727
[07:08:40] *** Quits: sellout (Adium@moz-2ECB0660.hlrn.qwest.net) (Quit: Leaving.)
[07:10:01] *** Quits: pongad (Mibbit@moz-7E3233EF.revip5.asianet.co.th) (Quit: http://www.mibbit.com ajax IRC Client)
[07:11:03] <ofeldt-> wycats_, awesome, but isn't this a typo? ( https://gist.github.com/wycats/f7c07cce7a012f7a2727#file-post-resource-rs-L19 )
[07:11:37] <ofeldt-> wycats_, shouldn't one pass params instead of id there, or am i missing something?
[07:12:00] <wycats_> into find?
[07:12:18] <ofeldt-> from_params()
[07:12:29] <wycats_> from_params takes HashMap<~str, ~str>
[07:12:36] <wycats_> fn from_params(&self, params: HashMap<~str, ~str>) -> ~Post
[07:12:50] <wycats_> ah I see
[07:12:52] <wycats_> yeah that's a typo
[07:15:11] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[07:17:19] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[07:19:14] <wycats_> fixed
[07:20:24] <ofeldt-> wycats_, apart from the procedural macros, i think it depends on the impact of libraries gathering around the framework. what makes rails the de facto standard now is the vast majority of sub-solutions available and the quick iterative development cycles for new/better ideas.
[07:20:47] <wycats_> ofeldt-: confirm
[07:20:56] <wycats_> honestly at this point I'm just messing around and thinking about stuff
[07:21:37] <whitequark> wycats_: have you seen ocsigen?
[07:21:47] <wycats_> whitequark: link/
[07:21:48] <wycats_> ?
[07:21:59] <whitequark> http://ocsigen.org/
[07:22:20] <wycats_> feels so... enterprisey
[07:22:44] <wycats_> it looks like it may be HTML-based?
[07:22:49] <whitequark> it is a rather radical web framework in ocaml. I do not necessarily agree with all of their design decisions (for example, automagic synchronization of client and server state via a persistent connection), but it's nevertheless an interesting source of inspiration
[07:22:55] <sammykim> When I make a macro, how can I see what the macro mackes in real code with rust compile option?
[07:23:01] <whitequark> what do you mean by HTML-based?
[07:23:07] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[07:23:10] <wycats_> it looks like it's designed around generating HTML
[07:23:36] <whitequark> I wouldn't say so
[07:24:30] <sfackler> sammykim: try "rustc --pretty expanded foo.rs"
[07:24:32] *** Quits: kvanb (kvanb@moz-C4940225.lnse5.lon.bigpond.net.au) (Quit: kvanb)
[07:24:47] <derek_c> Yurume: didn't make myself clear, but I was asking how do you trap "any" condition
[07:24:49] <whitequark> it sure has awesome facilities for generating HTML in a typesafe way, but it's not the only thing it can do
[07:24:52] <derek_c> like a catch-all
[07:25:00] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[07:25:24] <Yurume> derek_c: aha, I think there exists no such way, but you can trap on the failure using (|| { ... }).finally(|| { ... }) constuct.
[07:25:53] <sammykim> sfackler: Thanks!
[07:26:15] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Ping timeout)
[07:26:19] <ChrisMorgan> OCaml, UR/Web and Haskell are the interesting things to look at as far as web frameworks are concerned in the direction I want to go.
[07:26:24] <Yurume> since conditions will fail by default you can catch them by failures. 
[07:26:24] <whitequark> wycats_: if something, it's centered around sharing code and data, not simply generating HTML.
[07:26:30] *** Joins: Skrylar_ (Skrylar@moz-F692F728.austin.res.rr.com)
[07:26:33] <wycats_> I'll take a look
[07:26:37] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[07:26:41] <Skrylar_> is there a way to unsafely shove a pointer back in an Rc?
[07:26:48] <Skrylar_> I extracted one with Rc.borrow() before
[07:26:49] <bjz> gist?
[07:27:06] *** Quits: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP) (Input/output error)
[07:27:26] <derek_c> Yurume: I'm still not sure how to do this. could you point me to an example?
[07:28:57] *** Joins: kvanb (kvanb@moz-C4940225.lnse5.lon.bigpond.net.au)
[07:29:27] <Yurume> derek_c: (|| { /* this code may fail or raise an unhandled condition */ }).finally(|| { /* this code will run after the first closure exits normally or terminates due to the failure */ })
[07:29:47] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[07:30:00] <Yurume> so it's not strictly a try-catch equivalent, but if you add an additional flag which is only set after the whole closure is done then you can simulate it.
[07:30:17] <Yurume> the problem with this approach is obviously an inability to check what conditions cause the error...
[07:31:40] <wycats_> conditions are pretty ghetto
[07:31:44] <derek_c> Yurume: ah, I see
[07:31:47] <derek_c> Yurume: thanks a lot!
[07:32:20] <Yurume> derek_c: conditions are currently in flux and may get removed (not set in stone however) ;)
[07:32:35] <derek_c> Yurume: huh? what would be the alternative?
[07:32:44] <derek_c> is there an issue discussing this?
[07:32:51] <wycats_> Results are one alternative
[07:33:00] <benh> https://github.com/mozilla/rust/issues/10602 kinda
[07:33:02] <wycats_> I like Results
[07:33:21] <wycats_> I like Go's solution but think there could be nicer sugar
[07:33:31] <Yurume> derek_c: yeah, #10602.
[07:33:37] <derek_c> Yurume: thanks :)
[07:33:56] <bjz> http://www.reddit.com/r/rust/comments/1u13pj/thoughts_on_the_rust_roadmap/cedh50u
[07:34:20] <Yurume> derek_c: so beware of breaking changes :)
[07:34:33] <Yurume> (personally that was one reason for me to avoid conditions)
[07:35:05] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Quit: Leaving.)
[07:38:30] *** Joins: Ms2ger (Ms2ger@7AE7573F.9612FC09.3773EA9F.IP)
[07:38:34] *** Quits: zq (p@moz-4C4640FD.com) (Quit: leaving)
[07:40:43] <comex> sfackler: +100000
[07:47:13] <ecl3ctic> what's the fate of 'do' looking like at the moment?
[07:47:23] <ecl3ctic> I read something on the mailing list about turfing it
[07:47:41] <ecl3ctic> that was a month ago
[07:50:04] <Yurume> do is alive but is only for proc()s now.
[07:50:49] <Yurume> almost every case you've used do should be replaced with a simple function call: do a.and_then |r| { ... } -> a.and_then(|r| { ... }) etc.
[07:50:55] *** Joins: bheylin (brianheyli@C709828D.E7BADBF1.B0C2132F.IP)
[07:51:17] <Yurume> (spawn is an exception, since it had received ~fn() and now receives proc().)
[07:52:30] <bjz> ecl3ctic: I just don't use it anymore
[07:52:55] <bjz> ecl3ctic: seeing as there seems to be the writing on the wall for it
[07:53:04] <bjz> tbh it's not that bad
[07:53:41] <ecl3ctic> fair enough
[07:53:42] <Yurume> bjz: I have translated Angolmois-rust to 0.9, and it turns out that every do usage in it has been removed.
[07:53:51] <Yurume> (since it didn't use spawn)
[07:54:21] <ecl3ctic> ChrisMorgan seems to be on track to kill it entirely: https://github.com/mozilla/rust/issues/10815
[07:54:36] <ecl3ctic> I suppose it's safest to just stay away from it then
[07:57:49] <bjz> Yurume: is it under travis-ci now?
[07:58:07] <bjz> Yurume: that's a good way to stay on top of language changes
[07:58:08] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:58:10] <Yurume> not yet
[07:58:29] <bjz> http://rust-ci.org/
[07:58:31] <Yurume> it is inherently not testable (though my other project tries to improve that)
[07:58:52] <bjz> oh, it can be simple as just checking if it builds or not
[07:58:53] <Yurume> though it may be useful to check if it just compiles
[07:58:57] <bjz> yep
[07:59:03] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[07:59:20] <bjz> sanxiyn: hihi
[07:59:29] <Yurume> another reason I didn't use Travis for that purpose is that... Windows support is painful.
[07:59:39] <bjz> sanxiyn: you were doing the SIMD work, right?
[07:59:49] <ChrisMorgan> Yurume: I've learned that the significant majority of times when people say that something is not testable, they're wrong.
[07:59:57] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:00:01] <bjz> sanxiyn: carter is interested in the situation there
[08:00:09] <carter> cmr:yp
[08:00:13] <carter> bjz: yup
[08:00:18] * sanxiyn back
[08:00:21] <sanxiyn> Back from meeting
[08:00:22] <sanxiyn> carter: Hi
[08:00:25] <carter> hey
[08:00:27] <Yurume> ChrisMorgan: right, but I wanted to say that it is not designed to be testable so it would take a major effort to test it :S
[08:00:34] <carter> g2g soon, but hello
[08:00:49] <sanxiyn> carter: Interested in SIMD for Rust?
[08:00:50] *** Quits: bheylin (brianheyli@C709828D.E7BADBF1.B0C2132F.IP) (Quit: bheylin)
[08:00:52] <carter> yes
[08:00:56] <ChrisMorgan> But as observed, that it compiles is the most useful test for Rust projects at present.
[08:00:59] <bjz> I just thought I'd let you guys know
[08:01:01] <carter> i want type safe shuffles
[08:01:05] <Yurume> ChrisMorgan: lol
[08:01:10] <carter> as well as the less portable stuff
[08:01:21] *** Quits: kvanb (kvanb@moz-C4940225.lnse5.lon.bigpond.net.au) (Quit: kvanb)
[08:01:23] <sanxiyn> carter: Is there a type unsafe kind?
[08:01:27] <carter> yup :)
[08:01:30] <sanxiyn> Oh
[08:01:40] <bjz> carter: you were saying there was lots of nuance to it, right?
[08:01:42] <Yurume> it also has a plenty amount of FFIs, so compiling is not sufficient (it often segfaults by its own)
[08:01:43] <carter> yes
[08:01:44] <carter> lots
[08:01:51] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[08:01:59] <carter> like, for code gen, the shuffle mask needs to be fixed at compile time
[08:02:08] <carter> but the types for the ops don't enforce that
[08:02:29] <Yurume> anyway, that will be improved over the time, but Angolmois is more of the showcase than a fully maintained project
[08:02:36] <Yurume> Angolmois-rust is*
[08:02:39] <bjz> carter: so is this a limitation in other langs?
[08:02:43] <sanxiyn> carter: At the moment, we rely on LLVM to generate shuffle from individual get/set
[08:02:46] <carter> yes
[08:02:51] <carter> wait waht?
[08:02:52] <sanxiyn> carter: In no case rustc itself generates LLVM vector shuffle
[08:02:53] <carter> get set?
[08:02:56] <carter> i know
[08:03:02] <carter> oh, yeah
[08:03:09] <sanxiyn> Ah, we do generate LLVM vector shuffle instruction for broadcasting
[08:03:13] <sanxiyn> That is the only exception, I think
[08:03:26] <carter> i actually would be ok with just doing the intel intrinsics or whatever
[08:03:35] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Ping timeout)
[08:03:41] <carter> but that still has the static shuffle arg masks requirement 
[08:03:54] <sanxiyn> carter: Current Rust SIMD has no architecture specific support whatsoever :(
[08:03:59] <Yurume> bjz: anyway, if you are interested, here is the change: https://github.com/lifthrasiir/angolmois-rust/commit/661a7d23f94779d810609d2db1972d92391f51e9
[08:04:01] <carter> so kinda useless ;p
[08:04:04] <sanxiyn> Yup
[08:04:12] <Yurume> (and Github diff does not work, sadly)
[08:04:22] <sanxiyn> carter: But then, it's roughly similar to how recent JavaScript SIMD support is
[08:04:31] <bjz> carter: sanxiyn works for samsung, so I believe he would be interested in ARM support too
[08:04:41] <sanxiyn> You could also say that JavaScript SIMD support is kinda useless... anyway
[08:04:41] <carter> cool
[08:04:46] <carter> sanxiyn: yup
[08:05:01] <carter> i pointed out to pcwalton earlier that it blows up on wider lanes
[08:05:03] <sanxiyn> carter: But then, well, JavaScript SIMD suppport is also kinda useful :) so it depends
[08:05:03] <carter> like 
[08:05:06] <carter> nope
[08:05:07] <carter> not for me
[08:05:11] <sanxiyn> yeah not for you
[08:05:17] <sanxiyn> but not useless for everybody
[08:05:20] <carter> yes
[08:05:24] <sanxiyn> Same for Rust
[08:05:34] <carter> but if you can't write a modern blas in rust
[08:05:40] <carter> then rust is useless to me
[08:05:45] <sanxiyn> carter: Primarily, I didn't go Intel intrinsic route because I was not sure how to integrate that with current LLVM backend
[08:05:49] <carter> oh
[08:05:51] <carter> thats easy
[08:06:01] <sanxiyn> Oh if you can figure that out please do so
[08:06:05] <carter> theres a bunch of llvm primops for that
[08:06:12] <sanxiyn> carter: Oh there is?
[08:06:15] <carter> yuppp
[08:06:18] <sanxiyn> As in, something not documented in http://llvm.org/docs/LangRef.html ?
[08:06:32] <carter> they're "functions"
[08:06:46] <carter> just write the intrinsic you want in clang
[08:06:50] <carter> and have clang emit the ll file
[08:06:54] <sanxiyn> So there are LLVM intrinsic functions for arch-specific SIMD intrinsics? That makes sense...
[08:06:58] <carter> yuup
[08:06:59] <sanxiyn> carter: Oh
[08:07:03] <carter> yeah
[08:07:13] <sanxiyn> carter: Ah so I shouldn't have looked at documentation, but experimented with clang...
[08:07:16] <bjz> \o/
[08:07:17] <sanxiyn> That also sorta makes sense
[08:07:20] <carter> yeah
[08:07:27] <carter> you can kinda read them in the llvm source tree
[08:07:34] <carter> but its in a funny hard to read notation
[08:07:41] <sanxiyn> carter: If you add bunch of Rust intrinsics for those LLVM primops(primops? is that the terminology?)
[08:07:44] <bjz> yay for awesome documentation
[08:07:44] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[08:07:46] <sanxiyn> That would be great
[08:07:49] <bjz> carter: :)
[08:07:58] <sanxiyn> LLVM primops, right?
[08:08:33] <sanxiyn> carter: I can help you with that if you need help navigating maze that is rustc
[08:08:38] <carter> ok
[08:08:39] <carter> yeah
[08:08:43] <carter> i'd be down for that
[08:08:58] <carter> i'll try to make the time
[08:09:00] <carter> i want nice things
[08:09:17] <carter> eg https://github.com/llvm-mirror/llvm/blob/master/lib/Target/X86/X86InstrAVX512.td is for avx512
[08:09:32] <sanxiyn> carter: Basically, all Rust intrinsics to LLVM IR translation happens in src/librustc/middle/trans/intrinsic.rs now
[08:09:46] <sanxiyn> (It didn't in the past, but we are in the happy place now)
[08:10:15] <sanxiyn> As long as you know LLVM intrinsic function names, you can copy and paste similar codes in that file
[08:10:43] <carter> xyeah
[08:10:44] <carter> ok
[08:10:45] <carter> hrmm
[08:10:54] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[08:11:08] <carter> sanxiyn: do you have a copy of the intel architecture manual handy?
[08:11:16] <sanxiyn> carter: I have PDF
[08:11:19] <carter> ok
[08:11:52] <sanxiyn> carter: Eh... at the moment there is no arch-specific Rust intrinsics, so we'd need to add that logic
[08:11:56] <carter> yeah
[08:11:58] <carter> that too
[08:12:11] <carter> sanxiyn: thats why first i wann get the shuffle-vector op type safe
[08:12:21] <carter> because that lets you have a portable fallback
[08:12:26] <carter> for the arch specifci shuffles
[08:12:45] <sanxiyn> carter: I don't understand
[08:12:47] <carter> ok
[08:12:53] <carter> in shuffle-vector
[08:13:13] <carter> you have c=shuffle(a,b,shuffleIndexes)
[08:13:16] <carter> right?
[08:13:25] <sanxiyn> yes
[08:14:04] <carter> now, naively, i might try to write something like let d = [1,2,3,4] in let c= shuffle(a,b,d)
[08:14:05] <carter> right?
[08:14:17] <carter> and lets pretend we compiled at -O0
[08:14:21] <carter> so that wasn't inlined away
[08:14:32] <carter> ok?
[08:14:33] <sanxiyn> carter: Currently Rust doesn't have that :(
[08:14:41] <carter> thats ok
[08:14:44] <carter> have which?
[08:14:49] <carter> O0?
[08:14:57] <sanxiyn> No, shuffle(a, b, d)
[08:15:00] <carter> i know!
[08:15:03] <carter> thats the problem
[08:15:14] <carter> even if you did, it'd not be type safe
[08:15:24] <sanxiyn> carter: Because d needs to be known at compile time
[08:15:26] <carter> because that d param needs to be a constant literal for llvm code gen
[08:15:26] <carter> yes
[08:15:27] <carter> exactly
[08:15:32] <carter> exactly
[08:15:44] <carter> so rust needs a way of expressing that
[08:15:55] <carter> to make both the llvm shuffle intrinsic safe
[08:16:07] <carter> and also the cpu spcific ones
[08:16:24] <carter> 'cause i don't think having a magic special macro for each is good engineering
[08:17:00] <sanxiyn> Ugh we don't have way to express "known at compile time", not exactly
[08:17:06] <carter> exactly
[08:17:06] <sanxiyn> Although there *is* such notion in the compiler
[08:17:16] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[08:17:20] <sanxiyn> (Namely, to check whether array length is known at compile time)
[08:17:22] <carter> well, if its known at compile time, it can just be a field on the ast
[08:17:28] <carter> of the op
[08:17:31] <carter> internally
[08:17:35] <Yurume> how many shuffle indices are there?
[08:17:41] <carter> depends on the vector!
[08:17:53] <carter> with avx512, you could express.... many
[08:17:59] <carter> 16xFloat is a lot of shuffle
[08:18:05] <carter> 16^16 is big
[08:18:12] <carter> granted theres probably lane restrictions
[08:18:14] <sanxiyn> Yurume: For f32x4, that's 00000000 from 77777777
[08:18:14] <Yurume> ah, right
[08:18:16] <sanxiyn> Yurume: Lots
[08:18:38] <carter> Yurume: and that doesn't even help with the per arch support
[08:18:57] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[08:19:05] <carter> any relaly perf sensitive code should use the cpu specific stuff
[08:19:05] <Yurume> I was thinking in terms of MMX (hah), but 16xFloat is... too much. yeah.
[08:19:27] <carter> but llvm's shuffle op lets you abstract from it
[08:19:39] <carter> which also makes it more human readable
[08:19:44] <sanxiyn> carter: In rustc, const_eval.rs has a function that receives AST, and returns integer constant, constant, not a constant
[08:20:03] <sanxiyn> carter: integer constant is for array length, constant is for statics
[08:20:08] <carter> ok
[08:20:08] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:20:10] <sanxiyn> Could add mask constant there
[08:20:23] <carter> statics can still be dynamic
[08:20:24] <sanxiyn> (I don't think flag on AST is a good idea)
[08:20:37] <carter> if blah then static_val1 else static_val2
[08:20:38] <carter> right?
[08:21:01] <Yurume> could we special-case shuffle so that we have an internal shuffle!(...) syntax extension which directly translates to the intrinsic?
[08:21:34] <carter> that doesn't address the cpu specific shuffle intrinsics
[08:21:38] <carter> but yeah, you could
[08:21:38] <sanxiyn> Yurume: Like asm!, right?
[08:21:47] <Yurume> right
[08:21:51] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[08:22:04] <carter> the atomics in rust curently hit this problem
[08:22:14] <sanxiyn> carter: How?
[08:22:16] <carter> and to the 'oh, theres only 4 versions, just write the mangled names out"
[08:22:52] <Yurume> do we have 4^4 + 8^8 + 16^16 versions in this case? :)
[08:23:10] <carter> https://github.com/mozilla/rust/blob/master/src/libstd/unstable/intrinsics.rs#L270-L274
[08:23:27] <carter> they only have 4 ops
[08:23:31] <carter> Yurume: noooooo
[08:23:32] <carter> evil
[08:24:03] <Yurume> do I get the count right at least?
[08:24:09] <Yurume> did I get*
[08:24:31] <carter> idk, its 330 am over here
[08:25:29] <sanxiyn> carter: If we have shuffle intrinsic function (which is just function), we'd need some way to express "known at compile time" in type level or so
[08:25:38] <carter> sanxiyn: yes
[08:25:42] *** Quits: valenting (Thunderbir@moz-9DFB83CF.residential.rdsnet.ro) (Ping timeout)
[08:25:42] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:25:47] <sanxiyn> carter: If we go shuffle! route, then it wouldn't be function, so we can special case
[08:25:51] <carter> yes
[08:26:13] <carter> but then you'd need to do that for every other new intrinsics that has some many valued int static thingy
[08:26:21] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[08:26:34] <sanxiyn> carter: Question is how many we will have
[08:26:41] <sanxiyn> (You already mentioned atomics)
[08:26:54] <carter> well, all the CPU specific simd shuffles
[08:26:56] <carter> are one
[08:27:33] <sanxiyn> carter: Like pshufb?
[08:27:49] <carter> yup
[08:27:59] <sanxiyn> Hm
[08:28:15] <carter> and then AVX shuffles
[08:28:32] <carter> and avx2
[08:28:34] <Yurume> sanxiyn: in Korean #rust channel klutzy suggested using &'static [i32] for indices. is there any problem with this approach?
[08:28:49] <carter> there could be more than one static pointer
[08:29:00] <klutzy> (I was half joking)
[08:29:03] <carter> ok
[08:29:06] <Yurume> klutzy: ...
[08:29:12] <sanxiyn> Yurume: Well you could unsafely forge &'static...
[08:29:38] <Yurume> klutzy: your bad
[08:29:59] <carter> hehe
[08:30:12] <sanxiyn> Do we want "mask = <literal>; shuffle(a, b, mask)" to work, or forcing "shuffle(a, b, <literal>)" fine?
[08:30:18] <sanxiyn> Later is probably simple to implement
[08:30:31] <carter> forcing the latter is fine
[08:30:38] <sanxiyn> Oh ok
[08:30:46] <carter> q: would <<  lit >> ever appear in valid rust?
[08:30:51] <carter> as it currently exists?
[08:31:14] <sanxiyn> carter: <<lit>> is valid token stream, so if we go macro, that will work ok
[08:31:21] <carter> 'cause then shuffle<<list>>(a,b) could be a thing
[08:31:34] <carter> *lit
[08:31:39] <sanxiyn> carter: Well 1<<2>>2 would be 1?
[08:31:48] <carter> oh
[08:31:53] <carter> i was thinking like the type args
[08:32:19] <sanxiyn> carter: Oh can't have non-type template arguments yet
[08:32:33] <carter> i know
[08:32:33] <sanxiyn> I mean, non-type, non-lifetime
[08:32:55] <carter> granted, this has a stronger requirement than that
[08:33:24] *** Quits: jdm_ (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Connection reset by peer)
[08:34:09] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[08:34:10] *** ChanServ sets mode: +o jdm
[08:34:29] <carter> point being, there needs to a be a design that accomodates the fact that certain cpu intrinsics require certain args fixed a compile time
[08:35:05] <carter> where  theres too many possible values to just pre-generate   op_val1  op_val2 ... op_val200000000
[08:35:09] <carter> or something
[08:35:28] <carter> i have some ideas type system wise
[08:35:42] <carter> though i've not had the time to really work them out
[08:35:54] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[08:36:36] <carter> 'cause having to have 50+ special macros for each cpu shuffle intrinsic is probably a no, right sanxiyn ?
[08:36:42] <carter> *for all the different
[08:36:51] <sanxiyn> carter: Yeah probably not a good idea
[08:37:09] <sanxiyn> carter: To me the closest thing we have in the compiler is with requirement that array length be integer constant
[08:37:15] <carter> I agree
[08:37:18] *** Joins: bheylin (brianheyli@moz-300B2629.vanguardgames.net)
[08:37:27] <carter> so its about generalizing that
[08:37:32] <sanxiyn> carter: How does C deal with this?
[08:37:33] <ecl3ctic> this sounds like a language deficiency
[08:37:37] <carter> C doesn't
[08:37:47] <carter> it just throws an error when the arg isn't a constnat
[08:37:51] <carter> the types don't express it
[08:38:08] <carter> ecl3ctic: i agree, i'm planning to fix this in haskell also
[08:38:14] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[08:38:24] <carter> sanxiyn: C doesn't deal with it
[08:38:29] <carter> the C compilers do
[08:38:29] <carter> :)
[08:39:11] <carter> lemme throw together a c snipped
[08:40:25] <bjz> carter: could this be solved with allowing constants in type parameter lists?
[08:40:33] <carter> yes
[08:40:39] <carter> at least for the cpu specic ones
[08:40:41] <bjz> because that is something we need anyway
[08:40:50] <carter> but llvm shuffle is a bit more agnostic
[08:41:05] <bjz> for things like impling traits on fixed length vecs
[08:41:14] <bjz> and other niceties
[08:41:22] <bjz> ok
[08:41:27] *** Quits: KindOne (KindOne@moz-61DE83A6.dynamic.ip.windstream.net) (Ping timeout)
[08:41:42] <Yurume> carter: are nine shuffle intrinsics (4x4->4, 4x4->8, 4x4->16, etc.) sufficient when we allow constants in type parameters?
[08:42:05] <carter> Yurume: ummmmmmmm
[08:42:11] <sanxiyn> Yurume: Uh...
[08:42:19] <carter> i'm going to say "never"
[08:42:28] <carter> the llvm intrinsic is a bit more flexible
[08:42:31] <Yurume> (I really don't know about actual CPU instructions so it's my guess from shufflevector documentation)
[08:42:42] <bjz> carter: but yeah, factor into your RFC that constants in type parameter lists are on the cards - its just a question of priorities. it may be that it might be compelling to move them up the list
[08:42:51] <carter> ok
[08:42:59] <carter> i need to crash
[08:43:08] <bjz> ok, cool
[08:43:08] <carter> bjz: please remind me in a day or so?
[08:43:10] <sanxiyn> bjz: I got the impression it really is not 1.0 material though
[08:43:15] <bjz> sanxiyn: yes
[08:43:22] <sanxiyn> carter: Let's talk about this later
[08:43:25] <carter> sure
[08:43:46] <carter> i don't care what the syntax is mind you, as long as its sane :)
[08:43:49] <carter> heheh
[08:43:58] <bjz> sanxiyn: as I say, it's a question of priorities
[08:44:00] <carter> i'm glad the focus isn't on the syntax
[08:44:17] <bjz> sanxiyn: perhaps there could be some kind of transitionary way
[08:44:32] <bjz> sanxiyn: but with an eye on moving to that in the end
[08:44:52] *** Joins: KindOne (KindOne@6214C64B.C538DA2.EC6A1518.IP)
[08:44:55] <carter> this would also probably be helpful for some of the gpu experiments, if those continue
[08:45:15] * sanxiyn is ignorant of GPUs :(
[08:45:36] <sanxiyn> carter: Some search keywords?
[08:45:45] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:45:48] <carter> i'm pretty ignorant of gpus too
[08:45:49] <sanxiyn> Like, GPU also has vector shuffle with constant mask?
[08:45:56] <sanxiyn> (It probably does...)
[08:45:58] <carter> gpus are all about vector ops
[08:46:09] <carter> different style
[08:46:16] <Yurume> and sometimes synchronization primitives?
[08:46:19] <carter> i think OpenCL and Cuda do it differnt
[08:46:21] <sanxiyn> As I understand it also has execution masks?
[08:46:28] <carter> idk
[08:46:30] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[08:46:33] <Yurume> (I think CUDA had warp-synchronization primitives..)
[08:46:39] <carter> thats a whole nother topic
[08:46:42] <carter> i know nothing (yet)
[08:46:43] <carter> g2g
[08:46:45] <carter> night all
[08:46:47] <Yurume> night
[08:46:58] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Quit: Leaving.)
[08:47:10] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[08:47:52] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[08:48:45] *** Joins: victorporof (victorporo@773D35C8.FAB6DAB7.79933D60.IP)
[08:49:59] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[08:50:31] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[08:50:49] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[08:51:09] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:54:15] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[08:57:25] *** Joins: tupshin_ (quassel@moz-54DE2E9C.du.xdsl.is)
[08:57:29] <eddyb> o_O https://www.youtube.com/watch?v=g8ix6c55iTw
[08:58:45] <kimundi> Good morning
[08:58:53] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:58:57] <zxcdw> Good morning!
[09:00:33] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[09:01:36] *** Quits: bheylin (brianheyli@moz-300B2629.vanguardgames.net) (Quit: bheylin)
[09:05:02] <Yurume> eddyb: I've heard that you are making a pure-Rust png decoder. is it available now?
[09:05:48] <eddyb> Yurume: it's been delayed, I wanted to also implement pure rust inflation
[09:06:07] <Yurume> yeah, that's my main interest
[09:06:31] <Yurume> (since png decoder itself is fairly easy to implement once zlib is done)
[09:06:40] <eddyb> I had benchmarks which showed RGB8 decoding being faster than libpng, and it bummed me when I couldn't reproduce that :P
[09:06:53] <Yurume> zlib included?
[09:07:29] <eddyb> using zlib via ffi
[09:08:06] <Yurume> that sound like that libpng does useless stuffs...
[09:08:07] <Yurume> sounds*
[09:08:48] <eddyb> Yurume: the current benchmark shows my decoder consistently 1.5 times slower than libpng
[09:09:22] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[09:10:09] <eddyb> maybe I was doing something stupid in the libpng benchmark, maybe it was something in rust which was fixed, I don't know
[09:10:23] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[09:11:25] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[09:12:11] <bjz> eddyb
[09:12:15] <eddyb> Yurume: right now I have a bunch of things to do in rustc itself, sorry for the delay :(
[09:12:36] <eddyb> bjz: hmm?
[09:12:36] <bjz> eddyb: yeah, we get folks coming via the reddit talking about their new servers every so often :P
[09:12:51] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[09:12:58] <bjz> eddyb: we have to direct them to /r/playrust
[09:13:01] <bjz> :)
[09:13:06] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[09:13:22] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[09:13:24] <eddyb> I didn't know it was in alpha. was surprised to see X playing it
[09:13:42] <eddyb> bjz: might give us unintended popularity :P
[09:13:47] <bjz> :P
[09:13:49] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[09:13:53] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[09:14:12] * bjz played minecraft from the beginning - way before X
[09:14:19] <Yurume> bjz: I think they simply post to /r/rust without visiting the subreddit
[09:14:28] <bjz> Yurume: yeah
[09:14:32] <Yurume> (assuming /r/rust is for the game)
[09:14:39] <bjz> -_-
[09:14:41] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:14:49] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[09:16:06] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[09:17:17] *** Quits: FreeFull (freefull@moz-D8B8D8D6.as13285.net) (Ping timeout)
[09:17:46] *** Joins: FreeFull (freefull@moz-8361FE2B.as13285.net)
[09:19:45] *** Quits: FreeFull (freefull@moz-8361FE2B.as13285.net) (Ping timeout)
[09:20:13] *** Joins: nrc (ncameron@moz-A76F1825.cable.virginm.net)
[09:24:10] *** Joins: FreeFull (freefull@moz-F0C23786.as13285.net)
[09:24:47] *** Joins: rca (rcatolino@2245D013.CC72BB30.520D6FA6.IP)
[09:27:09] *** Quits: FreeFull (freefull@moz-F0C23786.as13285.net) (Ping timeout)
[09:28:12] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Quit: Leaving.)
[09:29:23] *** Joins: FreeFull (freefull@moz-1251C634.as13285.net)
[09:30:23] *** Joins: espadrine (Thunderbir@moz-BA7B4434.w90-2.abo.wanadoo.fr)
[09:31:23] *** Quits: FreeFull (freefull@moz-1251C634.as13285.net) (Ping timeout)
[09:32:18] *** Joins: mpiechotka (mpiechotka@moz-FF5F76BA.adsl.inetia.pl)
[09:32:23] *** Joins: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de)
[09:32:30] *** Quits: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de) (Client exited)
[09:33:03] *** Joins: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de)
[09:38:02] *** Joins: derby (dirby@35557655.3CEF567.B3ED7DFA.IP)
[09:38:25] <eddyb> bjz: oooh, distance-based in-game VoIP. I don't remember seeing anything like that before :D
[09:38:55] <bjz> doesn't ARMA2 have that?
[09:39:08] <bjz> well, the engine?
[09:39:23] *** Joins: FreeFull (freefull@moz-15420047.as13285.net)
[09:39:46] <bjz> it was probably inspired by DayZ
[09:39:48] <eddyb> hmm, I don't know. I have never played nor watched anyone playing it
[09:40:02] <bjz> (which was originally an arma2 mod)
[09:41:24] *** Quits: FreeFull (freefull@moz-15420047.as13285.net) (Ping timeout)
[09:41:43] *** Quits: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de) (Quit: Leaving.)
[09:44:37] *** Joins: FreeFull (freefull@moz-BDAA147F.as13285.net)
[09:44:44] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[09:49:42] *** Joins: squiddy (squiddy@moz-4265BEBB.adsl.alicedsl.de)
[09:53:34] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Input/output error)
[09:53:44] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[09:53:44] *** ChanServ sets mode: +o jdm
[09:59:16] *** Quits: tupshin_ (quassel@moz-54DE2E9C.du.xdsl.is) (Ping timeout)
[09:59:36] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:59:49] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Ping timeout)
[10:00:18] *** Joins: twi (Adium@7F053C78.444892F5.509B472F.IP)
[10:01:17] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[10:04:37] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Ping timeout)
[10:04:49] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[10:05:27] *** Quits: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au) (Quit: z0w0)
[10:05:32] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[10:06:52] *** Joins: jaen (jaen@moz-3519AD0A.neoplus.adsl.tpnet.pl)
[10:07:11] *** Joins: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz)
[10:07:15] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[10:07:25] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[10:09:12] *** Joins: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de)
[10:15:14] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[10:21:29] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:25:50] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[10:28:46] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[10:28:56] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[10:30:20] *** Joins: nkoep (nik@moz-9B2AEE99.pool.mediaways.net)
[10:45:27] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[10:47:56] *** Joins: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au)
[10:49:35] *** Joins: nical (nico@moz-FE0AE368.w2-3.abo.wanadoo.fr)
[10:51:44] *** Joins: siavashserver (siavash@EF3CD9D1.3DEB375.82A25C10.IP)
[10:52:55] *** Quits: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:55:38] *** Quits: KindOne (KindOne@6214C64B.C538DA2.EC6A1518.IP) (Ping timeout)
[10:59:42] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[10:59:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:00:01] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[11:00:15] *** Quits: zmthy (Tim@moz-70178026.dsl.dyn.ihug.co.nz) (Quit: leaving)
[11:00:24] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:01:23] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[11:02:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[11:02:15] *** Joins: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de)
[11:03:45] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[11:03:51] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:05:06] *** kimundi is now known as zz_kimundi
[11:06:04] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[11:07:01] *** Joins: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP)
[11:08:46] *** Quits: lenstr (lenstr@E724F85B.C66E72B1.B69CD7C4.IP) (Ping timeout)
[11:08:52] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[11:11:54] *** Joins: KindOne (KindOne@6214C64B.C538DA2.EC6A1518.IP)
[11:12:29] <dbaupp> bjz: sorry, I was away
[11:12:47] <bjz> dbaupp: np!
[11:12:53] *** Parts: siavashserver (siavash@EF3CD9D1.3DEB375.82A25C10.IP) (Konversation terminated!)
[11:12:57] <dbaupp> bjz: I'm inclined to agree with you about .to_str becoming a normal function
[11:12:57] <bjz> dbaupp: #rust-internals?
[11:13:08] <dbaupp> ok
[11:13:14] * dbaupp catches up with the backlog there
[11:13:21] *** Quits: Guest_ (textual@moz-30B6C3D1.lightspeed.rsbgtx.sbcglobal.net) (Ping timeout)
[11:13:36] <eddyb> rusti: format!("{}", ~[~"a", ~"b"])
[11:13:41] -rusti- pastebinned 10 lines of output: http://ix.io/9Cv
[11:14:24] <eddyb> I have an Iterator<~str>, what's the cheapest way of printing [a, b]?
[11:16:52] <eddyb> I guess I'll just do a plain map and connect. it's debug! anyways
[11:17:32] *** Joins: vmx (vmx@moz-DA9CC755.pools.arcor-ip.net)
[11:19:13] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:20:46] <mpiechotka> Hi. How to call a 'static' method of a trait?
[11:22:21] <eddyb> Trait::method(). you need to have something in there for it to infer the Self type
[11:22:48] *** Joins: kvanb (kvanb@moz-C4940225.lnse5.lon.bigpond.net.au)
[11:24:44] <mpiechotka> eddyb: Ok. It was confused that I cannot use it in 'use'.
[11:24:48] <mpiechotka> Thanks
[11:24:57] <bvssvni> rusti: let a = Zero::zero::<int>(); a
[11:25:01] -rusti- pastebinned 13 lines of output: http://ix.io/9CA
[11:25:31] <bvssvni> rusti: let a = std::num::Zero::zero::<int>(); a
[11:25:33] -rusti- pastebinned 9 lines of output: http://ix.io/9CC
[11:25:34] <eddyb> mpiechotka: ah, it's not a module. impls are, I think. you can always write a generic function to wrap the trait static method
[11:26:14] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[11:28:13] *** Quits: squiddy (squiddy@moz-4265BEBB.adsl.alicedsl.de) (Input/output error)
[11:32:05] *** Joins: ofeldt (ofeldt@moz-D989B272.dip0.t-ipconnect.de)
[11:32:09] <adridu59> dbaupp: r? https://github.com/mozilla/rust/pull/10801
[11:33:05] *** Quits: ofeldt- (ofeldt@moz-3736EFF2.dip0.t-ipconnect.de) (Ping timeout)
[11:33:16] <dbaupp> looking
[11:35:46] <Soft> Does anybody know about websockets library for Rust?
[11:39:08] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[11:39:20] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[11:39:23] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Quit: bye)
[11:39:40] <eddyb> Soft: I haven't seen anything myself. I would suppose one could wrap rust-http (or extend it?) for it to support WebSocket connections
[11:39:43] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[11:40:58] <eddyb> it would be a bit harder to get to the flexibility of socket.io, but I can imagine serialization to JSON could be used to convert ADTs into socket.io-compatible event JSON documents
[11:42:25] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[11:42:57] *** Joins: mib_r72qqi (Mibbit@moz-A7BAC003.w81-249.abo.wanadoo.fr)
[11:46:07] *** Joins: siavashserver (siavash@EF3CD9D1.3DEB375.82A25C10.IP)
[11:46:16] *** Joins: gwty (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP)
[11:46:41] *** Joins: lpy (lpy@9A6870A6.F09091A8.1348A864.IP)
[11:46:41] *** Joins: gwty_ (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP)
[11:50:19] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Quit: Lost terminal)
[11:52:12] *** Quits: mib_r72qqi (Mibbit@moz-A7BAC003.w81-249.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[11:52:17] <siavashserver> Where will "rustpkg install" copy compiled files? :D
[11:52:27] <siavashserver> pretty newbie question
[11:53:41] <bvssvni> to the 'bin' folder
[11:53:41] *** Joins: jhasse (jhass_000@moz-3128EA21.ewe-ip-backbone.de)
[11:54:29] <siavashserver> Is there any command for removal of installed packages too?
[11:55:24] <jhasse> rustpkg clean
[11:55:45] <siavashserver> rustpkg clean <package name> ?
[11:55:51] <jhasse> yes
[11:57:53] <siavashserver> Is "extern mod package_name;" all I need to use a manually installed package in rust programs?
[11:58:18] <jhasse> yes
[11:58:42] <siavashserver> thank you very much for help!
[11:59:03] <jhasse> np :)
[12:01:03] <siavashserver> Actually I'm trying to convert a simple C project to Rust ( https://github.com/siavashserver/catalyzer ) and warm up; I need to use this assimp binding https://github.com/h3r2tic/assimp-rs
[12:01:08] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[12:01:28] <Skrylar_> is there a way to get bytes!() to encode a c-string?
[12:01:49] <Skrylar_> i would prefer to just have a static value (its a dictionary key in a C binding) and just use that
[12:02:24] *** Joins: twi1 (Adium@366146E1.F33C246D.C3DDD137.IP)
[12:02:35] *** Quits: twi1 (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[12:02:49] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[12:02:49] *** Joins: twi1 (Adium@366146E1.F33C246D.C3DDD137.IP)
[12:02:53] <siavashserver> and bjz's glfw-rs bindings <3
[12:03:00] *** Quits: twi1 (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[12:03:18] *** Quits: twi (Adium@7F053C78.444892F5.509B472F.IP) (Ping timeout)
[12:03:26] <bjz> ^_^
[12:03:32] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[12:04:10] <dbaupp> Skrylar_: you mean null terminated?
[12:04:17] <dbaupp> rusti: bytes!("foo", 0)
[12:04:18] -rusti- &[102u8, 111u8, 111u8, 0u8]
[12:04:20] <Skrylar_> yeah, it just gives me a [u8]
[12:04:25] <FreeFull> jhasse: I tried running some GTK 3 programs in Weston, and the window decorations looked a lot different for the weston stuff and GTK stuff
[12:04:34] <Skrylar_> i'll give that one more try
[12:04:37] <dbaupp> Skrylar_: oh, you want a *u8?
[12:04:48] <Skrylar_> yeah, it goes out to SDL
[12:04:56] <Skrylar_> but its a static immutable value
[12:05:01] <dbaupp> use bytes!() and then call .as_ptr()?
[12:05:17] <dbaupp> oh, do you want it in an actual `static`?
[12:05:22] <jhasse> FreeFull, oh :(
[12:05:40] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[12:05:44] <jhasse> FreeFull, hopefully they can fix that before wayland is used
[12:05:59] <Skrylar_> dbaupp: alright it works, thanks
[12:06:06] * Skrylar_ is getting mouse events again, whee
[12:06:36] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[12:08:58] <FreeFull> jhasse: nestopia crashed when I tried loading a game due to making a wayland window but expecting an X11 window, pcsxr worked but it opened an X11 window for the emulation.
[12:09:04] <FreeFull> Everything else seems to work fine
[12:09:34] <FreeFull> Ah, and I can't resize the GTK windows by dragging their edges
[12:09:45] *** Joins: rust (Mibbit@C75745DB.4E4A5350.3BD9FE04.IP)
[12:10:05] <FreeFull> Oh, I can, it's just pixel perfect
[12:10:34] <dbaupp> adridu59: that PR isn't yours, is it?
[12:11:59] <jhasse> FreeFull, what distro are you using?
[12:12:06] <FreeFull> Arch
[12:12:59] <jhasse> cool. I always wanted to try it out but I think my linux skills aren't good enough
[12:13:56] <jhasse> I wonder if there's a wayland roadmap somewhere ...
[12:14:05] *** Quits: FreeFull (freefull@moz-BDAA147F.as13285.net) (Ping timeout)
[12:16:15] *** Quits: rust (Mibbit@C75745DB.4E4A5350.3BD9FE04.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:17:36] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[12:17:51] *** Quits: Skrylar_ (Skrylar@moz-F692F728.austin.res.rr.com) (Ping timeout)
[12:18:10] *** Joins: FreeFull (freefull@moz-41091BF3.as13285.net)
[12:19:03] <thiez> my rustc gets "fatal runtime error: Could not unwind stack, error = 5" when it finds some error in my code. Is this new? what does it mean?
[12:19:23] <thiez> it suggests I've met with a terrible fate :p
[12:20:03] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[12:20:05] <bvssvni> thiez: I got the 'terrible fate' but when I updated rust it disappeared.
[12:20:08] <dbaupp> thiez: backtrace?
[12:20:10] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:20:36] <dbaupp> thiez: also, platform?
[12:21:56] <thiez> what was the syntax to get a proper trace again?
[12:22:10] <siavashserver> Is it possible to have control over memory alignment of data too? What's rust's default memory alignment?
[12:22:18] <FreeFull> jhasse: Got disconencted from the internet, did you reply?
[12:22:39] <thiez> I'm on x64 debian linux
[12:22:41] *** Quits: jviereck (Adium@moz-4E567DEF.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:22:42] <jhasse> FreeFull, cool. I always wanted to try it out but I think my linux skills aren't good enough
[12:22:42] <jhasse> <jhasse> I wonder if there's a wayland roadmap somewhere ...
[12:22:43] <dbaupp> thiez: running it under gdb will probably halt on a fatal runtime error
[12:22:51] <dbaupp> and then just `backtrace` should be ok
[12:23:07] <jhasse> FreeFull, atm I'm reading the Mir vs wayland discussions :D
[12:23:12] <jhasse> *through
[12:23:14] *** Joins: libgccerror (Mibbit@B9BBA2B7.E0D718C1.BDAE6B1E.IP)
[12:23:19] <libgccerror> hello
[12:23:26] <libgccerror> anybody there?
[12:23:34] <dbaupp> hi
[12:23:40] <libgccerror> hello
[12:23:45] <libgccerror> I got error about libgcc
[12:23:52] <libgccerror> could you give me an advice?
[12:23:54] * dbaupp guessed :)
[12:23:57] <dbaupp> are you on windows?
[12:24:03] <libgccerror> yep
[12:24:07] <dbaupp> hm
[12:24:11] <dbaupp> vadimcn, klutzy ^
[12:24:23] <libgccerror> I found some topics but no works..
[12:24:44] <libgccerror> I installed up-to-date MinGW 
[12:25:10] <FreeFull> jhasse: I think in general Mir is less liked than Wayland
[12:25:14] <jhasse> libgccerror, you have to install 4.6.0
[12:25:25] <libgccerror> maybe
[12:25:31] <jhasse> mingw-get upgrade g++ "<4.6.1"
[12:25:34] <libgccerror> how could i find it?
[12:25:36] <jhasse> (i'm not sure about htat cmd)
[12:25:53] <jhasse> open C:\MinGW\msys\msys.bat
[12:26:11] <dbaupp> jhasse: I heard someone fixed a some errors by actually upgrading to a new g++
[12:26:13] <dbaupp> I think
[12:26:21] <dbaupp> s/a/
[12:26:53] <jhasse> I haven't tried that. Oh wait I'm on g++ 4.7.0
[12:27:02] <libgccerror> command not found..
[12:28:22] <jhasse> how have you installed mingw?
[12:28:24] <libgccerror> actually mine is 4.8.1
[12:28:29] <libgccerror> yep
[12:28:53] <jhasse> using mingw-get-inst?
[12:29:47] <jhasse> mingw-get upgrade "g++<4.7.1"
[12:29:49] <jhasse> should work
[12:29:59] <libgccerror> Mingw Installation Manager
[12:31:15] <libgccerror> it shows sh: mingw-get : command not found
[12:31:16] <jhasse> FreeFull, good thing. I hope Mir dies
[12:31:25] <jhasse> that's strange
[12:31:38] <jhasse> ah wait
[12:31:52] <jhasse> there was an option in the installer to install the mingw-get command
[12:31:58] <jhasse> iirc
[12:32:01] *** Quits: nrc (ncameron@moz-A76F1825.cable.virginm.net) (Ping timeout)
[12:32:59] <jhasse> can you open up the mingw installation manager?
[12:33:10] <libgccerror> yes
[12:33:21] <jhasse> There's a package called "mingw32-mingw-get"
[12:33:30] <jhasse> (Class = bin)
[12:33:47] <jhasse> Right click, mark for installation
[12:33:59] <libgccerror> It was already installed
[12:34:15] <jhasse> oO
[12:34:20] <libgccerror> 0.6.4version
[12:34:26] <jhasse> that's strange
[12:35:15] *** Quits: lpy (lpy@9A6870A6.F09091A8.1348A864.IP) (Quit: Leaving...)
[12:35:39] <libgccerror> Could I install g++ without MinGW?
[12:35:58] *** Quits: siavashserver (siavash@EF3CD9D1.3DEB375.82A25C10.IP) (Quit: Konversation terminated!)
[12:36:18] <jhasse> yes, but that's hard to do
[12:36:33] <libgccerror> god..
[12:36:34] <thiez> dbaupp: it happens in rt::util::abort, called by begin_unwind
[12:36:34] <jhasse> I would first try to reinstall mingw
[12:36:49] <jhasse> there should be an option for the command line tool of mingw-get
[12:37:18] <thiez> updating to master now, so if that makes the problem vanish as bvssvni suggests, it's not really important :)
[12:37:44] <jhasse> libgccerror, ah wait my mingw installer says the command line tool is always available. I'm using 0.6.2 though
[12:38:28] <libgccerror> you mean msys right?
[12:38:56] <jhasse> no the version of mingw-get-setup.exe
[12:39:16] <libgccerror> nono the command
[12:39:51] <jhasse> mingw-get itself is 0.6.2-beta-20131004-1
[12:40:05] <FreeFull> jhasse: I just tried running nestopia in Weston without X, and it glitches everything out until I switch VTs
[12:40:25] <libgccerror> me too also..
[12:40:35] <FreeFull> I think it's to do with SDL trying to access the framebuffer
[12:40:53] <jhasse> How do you know? (I'm typing mingw-get --version)
[12:41:15] <jhasse> FreeFull, what is VT?
[12:41:38] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[12:42:26] <jhasse> libgccerror, can you type the following into msys? ls /mingw/bin | grep mingw-get
[12:43:37] <libgccerror> No such a directory or files..
[12:43:50] *** Quits: z0w0 (zack@moz-356923D4.lnse4.woo.bigpond.net.au) (Client exited)
[12:44:08] <FreeFull> jhasse: Virtual Terminal
[12:44:12] <libgccerror> oh gosh i found libgcc_dw_2.dll
[12:44:25] <libgccerror> thats what i need it
[12:44:54] <FreeFull> They are the different consoles you can switch between using something like ctrl+alt+F1 (don't press this if you don't know how to get back to X)
[12:45:05] <adridu59> dbaupp: could you take a look? https://github.com/mozilla/rust/pull/11271
[12:45:41] <jhasse> libgccerror, ls /c/MinGW/bin | grep mingw-get
[12:45:46] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[12:45:48] <FreeFull> I'm tempted to compile SDL2 with wayland support
[12:46:05] <FreeFull> But I don't actually have any software that uses SDL2
[12:46:52] <libgccerror> found
[12:47:11] <jhasse> type
[12:47:30] <jhasse> export PATH=$PATH:/c/MinGW/bin
[12:47:50] <jhasse> don't know if this will work
[12:48:02] <jhasse> it seems that something is wrong with you msys installation
[12:49:00] <jhasse> now try  mingw-get upgrade "g++<4.7.1" again
[12:49:01] <libgccerror> mingw-get is accessible
[12:49:14] <libgccerror> but it shows locked
[12:49:27] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[12:50:24] <jhasse> libgccerror, hm ... try to install mingw-developer-toolkit in the MinGW installation manager
[12:50:46] <jhasse> and then restart msys.bat
[12:51:39] <libgccerror> it was already installed
[12:52:01] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[12:52:12] <jhasse> okay I'm out of ideas, sry :/
[12:52:23] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:52:51] <libgccerror> thanks very very much
[12:53:03] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:56:42] <adridu59> dbaupp: updated
[12:56:58] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[12:56:58] <jhasse> libgccerror, Is msys-base also installed?
[12:57:03] <adridu59> dbaupp: I think that switching to ```rust should be done for the whole codebase
[12:57:44] <jhasse> libgccerror, ahhhhh I forgot: Have you typed "sh /postinstall/pi.sh" yet?
[12:59:06] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[12:59:18] <mpiechotka> Hi. I've tried to use macros to write simple DSL but I get error when I try it that they are not stable. When I add #[feature(macro_rules)] it does not seems to have effect and when I add #[feature(macro_rules)]; I get "expected item but found `;`" error. How to use #[feature(macro_rules)]?
[12:59:22] <libgccerror> i just typed
[12:59:30] <dbaupp> adridu59: yeah, probably
[12:59:46] <libgccerror> its downloading sth
[12:59:55] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[13:00:02] <dbaupp> mpiechotka: it needs the ;, and should go before an `use` or `extern mod` statements in the file you run rustc on
[13:00:06] <dbaupp> (at the top)
[13:00:53] <mpiechotka> dbaupp: Thanks. I had it after extern mod.
[13:01:09] <mpiechotka> Should I fill a bug about unclear error?
[13:01:24] <libgccerror> @jhasse in rust tutorial it tells that i should install 4.5 version g++
[13:01:49] <libgccerror> how should i install that version?
[13:01:53] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[13:02:01] <jhasse> libgccerror, that didn't work for me
[13:02:08] <jhasse> I'm using 4.7.0
[13:02:21] *** Quits: jaen (jaen@moz-3519AD0A.neoplus.adsl.tpnet.pl) (Ping timeout)
[13:02:24] <libgccerror> I installed it but it shows error
[13:02:30] <jhasse> try make again ;)
[13:02:35] <libgccerror> ok
[13:03:33] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[13:04:09] <jhasse> libgccerror, btw: If you hit Alt + Space and select Properties you can enable QuickEdit mode. THis allows you to copy and paste
[13:05:03] <jhasse> If you want to do serious work on Windows I would install ConEmu though (http://code.google.com/p/conemu-maximus5/ ). You can select a msys profile there and copy via shift + mouse
[13:05:55] *** Joins: pongad (Mibbit@moz-7E3233EF.revip5.asianet.co.th)
[13:06:12] <libgccerror> rust is so hard to install in x64 windows..
[13:06:17] <FreeFull> jhasse: That's weird, deadbeef will run in weston if I run weston under X11, but not standalone
[13:06:33] <FreeFull> Audacious works fine though
[13:07:08] <jhasse> FreeFull, is audacious gtk2?
[13:07:14] <FreeFull> jhasse: Another thing, weston's keyboard shortcuts (close window, etc) don't seem to work on GTK windows
[13:07:28] <FreeFull> Audacious is gtk 3
[13:07:51] <FreeFull> Deadbeef is too
[13:08:03] <libgccerror> now my rust shows 0xc0000142 error
[13:08:08] <FreeFull> I don't have gtk 2 compiled with wayland support
[13:08:32] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[13:08:50] <jhasse> libgccerror, during make?
[13:08:59] *** Quits: kvanb (kvanb@moz-C4940225.lnse5.lon.bigpond.net.au) (Ping timeout)
[13:09:07] <FreeFull> jhasse: Another thing, egl stuff seems to be glitchy, but I think that's mesa's fault
[13:09:23] <libgccerror> no i just copy&paste some library rust say 
[13:09:25] <jhasse> FreeFull, are you running with an Intel graphics card?
[13:09:32] <FreeFull> Nope, AMD
[13:09:49] <adridu59> dbaupp: I think it's ready
[13:09:59] <jhasse> cool, didn't know the open source driver has wayland support already
[13:10:04] <FreeFull> When I tried weston in the past, the egl stuff wasn't glitchy
[13:10:17] <jhasse> libgccerror, what do you mean with "rust say"?
[13:10:33] <FreeFull> So I think something in mesa or the driver changed to break it
[13:10:45] <libgccerror> rust says "libgcc_s_2-1.dll not found!"
[13:11:04] <libgccerror> i just copy that dynamic linked library from MinGW folder to rust
[13:11:33] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[13:11:43] <jhasse> should not be necessary
[13:11:55] <jhasse> what does "g++ -v" say?
[13:11:56] <FreeFull> jhasse: It'd be nice to have a browser that runs in wayland
[13:12:03] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[13:12:07] <dbaupp> adridu59: are those tests being run by `check-stage2-doc-std`?
[13:12:12] <dbaupp> adridu59: (or stage1)
[13:13:03] <libgccerror> 4.7.
[13:13:09] <libgccerror> 0
[13:13:30] <libgccerror> sth strange is it's thread model is win32
[13:14:04] <jhasse> on my machine too
[13:14:14] <jhasse> and I'm building rust master just fine ... hm ...
[13:14:28] *** Joins: eiro (marc@moz-1FDC8CA5.u-strasbg.fr)
[13:14:31] <eiro> hello
[13:14:48] <libgccerror> hi
[13:15:07] <jhasse> libgccerror, Try to put the DLL in C:/MinGW/bin
[13:15:14] <jhasse> but I can't remember I did that ...
[13:15:36] <libgccerror> what dlls?
[13:16:02] <bjz> eiro: hihi!
[13:16:03] <adridu59> dbaupp: I do not know
[13:16:10] <bjz> eiro: welcome o/
[13:16:26] <eiro> thanks bjz :) 
[13:16:49] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:17:12] <libgccerror> you've got same error like me?
[13:17:26] <jhasse> libgccerror, no, it builds fine
[13:17:31] <dbaupp> adridu59: please check
[13:17:49] <adridu59> dbaupp: what does that change?
[13:17:55] <jhasse> libgccerror, libgcc_s_dw2-1.dll
[13:17:55] <dbaupp> adridu59: change?
[13:18:40] <adridu59> should I install clang or gcc?
[13:18:49] <dbaupp> adridu59: are you asking me?
[13:18:55] <adridu59> yea
[13:18:58] <dbaupp> huh?
[13:18:59] <adridu59> I think I have gcc on my other computer
[13:19:08] <dbaupp> I'm taking about the examples in the documentation you are adding
[13:19:12] <dbaupp> not about GCC or Clang??
[13:19:16] * dbaupp is very confused
[13:19:25] <adridu59> I need either of the two to build
[13:19:36] <dbaupp> oh, you don't have a Rust built?
[13:19:38] <libgccerror> libgcc_s_dw2-1.dll was already in MinGW's bin
[13:19:44] <adridu59> not atm
[13:19:54] <adridu59> I'm on my laptop
[13:19:56] <dbaupp> so you don't happen to have a rustdoc binary already?
[13:20:05] <adridu59> I don't think so
[13:20:26] <dbaupp> ah, well
[13:20:28] * dbaupp shrugs
[13:20:40] <adridu59> hmm, I think I have gcc by default
[13:20:43] <adridu59> on lubuntu
[13:20:52] <adridu59> but ./configure says no?
[13:21:08] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[13:21:51] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Connection reset by peer)
[13:22:28] <jhasse> libgccerror, try "git clean -xfd" inside rust's folder (it will remove all files not in the repository
[13:22:37] <adridu59> ok I'm test building
[13:22:49] <jhasse> and then try "./configure && (make || make) && make install" again
[13:23:02] <dbaupp> adridu59: ah, I just checked: they are onyl run iwth ```rust ... ```
[13:23:23] <libgccerror> im now re-install rust
[13:23:44] <jhasse> that will also work ;)
[13:23:49] <dbaupp> adridu59: (when you do get a rustc, you can run just the doc tests with `rustdoc --test --test-args io libstd/lib.rs`
[13:24:13] <dbaupp> (--test-args io filters it down to tests with a path that contains "io".)
[13:24:24] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[13:24:59] <adridu59> I have rust binaries
[13:25:16] <FreeFull> tmux detach
[13:25:16] <dbaupp> oh, including rustdoc?
[13:25:22] <FreeFull> WWooooppss
[13:25:45] <adridu59> test result: ok. 23 passed; 0 failed; 2 ignored; 0 measured
[13:26:01] <adridu59> yes I have ubuntu nightly
[13:26:11] <FreeFull> Well, this is weird
[13:26:20] <dbaupp> adridu59: and none of them are from io::Reader, right?
[13:26:37] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[13:27:08] <bstrie_mojitos> FreeFull: you can just do prefix+d to detach tmux
[13:27:13] <FreeFull> I can see my mouse cursor no matter what VT I'm in. Anything I type goes into both X and the VT. And I can't see anything else from X
[13:27:29] <FreeFull> bstrie_mojitos: That's assuming that you have access to the terminal tmux is attached to
[13:27:55] <bstrie_mojitos> FreeFull: you can do `tmux a -d` from any other terminal to detach all other terminals
[13:28:02] <adridu59> ignored tests? io::signal::Listener_0 and io::timer_0
[13:29:27] <dbaupp> adridu59: no
[13:29:31] <FreeFull> Well, the X problem is more important for me
[13:29:40] <dbaupp> adridu59: I mean, there is no tests listed with `io::Reader` in the name
[13:29:53] <adridu59> no
[13:29:56] <dbaupp> adridu59: specifically the example in `io::Reader::eof` isn't being tested
[13:30:14] <adridu59> of course not, it needs ```rust to be tested
[13:30:19] <dbaupp> yes
[13:30:28] <dbaupp> oh, you knew this already?
[13:30:41] <libgccerror> it just shows same error..
[13:31:29] <dbaupp> adridu59: please change the example to use ```rust
[13:31:31] <adridu59> yea
[13:31:55] <libgccerror> and i didnt installed git
[13:31:56] <adridu59> for the sake of consistency it should be done to the whole repo no?
[13:32:06] <adridu59> I'll do that to the whole file for now
[13:32:43] <dbaupp> yes
[13:32:59] <dbaupp> not for the sake of consistency: for the sake of having non-bitrotting examples
[13:33:56] <dbaupp> testing the code examples isn't just because it seems cute: it's essentially required because things change quickly, and the examples quickly stop compiling if they aren't forced to be up-to-date
[13:34:36] *** zz_kimundi is now known as kimundi
[13:35:21] <jhasse> libgccerror, hm ... I don't know why this could be. Sorry I have to go offline now, I hope you can fix it
[13:36:45] *** Quits: jhasse (jhass_000@moz-3128EA21.ewe-ip-backbone.de) (Quit: Verlassend)
[13:41:31] <adridu59> dbaupp: I know, just saying that we should do that everywhere instead of just having it in a few places
[13:41:56] <adridu59> dbaupp: I have a test failing, the one on which I use .expect() with input from stdin
[13:42:15] <adridu59> can I silence expect or do I have to change that example
[13:42:28] <adridu59> (note that I'm using std::io::ignore_io_error())
[13:43:24] <adridu59> https://github.com/mozilla/rust/pull/11266
[13:44:24] <FreeFull> Which architectures can Rust be currently compiled for?
[13:48:50] *** Quits: pongad (Mibbit@moz-7E3233EF.revip5.asianet.co.th) (Quit: http://www.mibbit.com ajax IRC Client)
[13:49:04] <adridu59> dbaupp: PR updated!
[13:50:04] <thiez> why do we have Token::Binop(AND), but Token::ANDAND
[13:50:11] <thiez> surely && is a binop as well?
[13:50:27] <thiez> as is EQEQ, LT, LE, etc.
[13:52:35] *** Quits: twi (Adium@moz-174339A4.cust.dsl.vodafone.it) (Quit: Leaving.)
[13:52:49] *** Quits: libgccerror (Mibbit@B9BBA2B7.E0D718C1.BDAE6B1E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:54:36] <adridu59> dbaupp: I don't get what you mean by "is this example correct"
[13:54:46] <adridu59> have you noticed the "!" in front of reader.eof()?
[13:56:57] *** Quits: derek_c (derek@6A9BB0A2.74FA9A9F.EB673A25.IP) (Quit: Leaving)
[13:57:36] <dbaupp> adridu59: yes, so it's the same as writing `if reader.eof() { println("only one line"); }
[13:57:37] <dbaupp> `
[13:57:45] <dbaupp> even though you've read nothign at all
[13:58:54] <adridu59> right I thought you were speaking of the last line
[13:59:31] <pyon> I have a "struct Foo<'a> { bar: &'a mut Bar }", and a function that takes a "foo: &Foo". Is it possible to mutate the object pointed by "foo.bar" within that function? (Note that I want to modify the pointed object, not the pointer itself.)
[14:00:01] <thiez> nope
[14:00:32] <pyon> Why not? I am not really mutating the Foo or anything it owns.
[14:00:50] <dbaupp> it would not be memory safe
[14:01:10] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[14:01:25] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[14:01:28] <adridu59> dbaupp: updated
[14:01:30] <dbaupp> allowing mutation through & &mut would effectively allow one to have multiple &mut pointers to the same piece of data, which is not legal
[14:01:39] *** Quits: Kxepal (Miranda@moz-937849DD.pppoe.mtu-net.ru) (Connection reset by peer)
[14:01:48] <dbaupp> so & &mut is treated as & &, which is perfectly fine
[14:01:56] *** Joins: Kxepal (Miranda@moz-937849DD.pppoe.mtu-net.ru)
[14:01:58] <pyon> Ah, okay, that makes perfect sense.
[14:02:37] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[14:02:40] <pyon> ty guys :-)
[14:04:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[14:08:07] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:10:03] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[14:10:11] *** Joins: jviereck1 (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[14:10:12] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Client exited)
[14:11:19] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[14:12:12] <adridu59> dbaupp: addmitedly, .eof() has pretty odd use cases since it is superseeded by other functions... do you think I should go back to you example with "only one line"? that would be quite odd too as an example since that would involve calling read_line.unwrap() then .eof check? sounds a bit weird too
[14:13:03] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[14:14:37] <adridu59> but you are right that my current example isn't relevant
[14:18:28] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:18:52] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[14:19:05] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:19:56] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:20:04] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:20:59] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:21:11] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:21:21] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:21:31] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:21:42] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:21:49] <dbaupp> adridu59: you could do `.expect("expecting at least one line");` or something
[14:21:53] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:21:55] <dbaupp> (rather than .unwrap)
[14:21:57] * dbaupp shrugs
[14:22:14] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:22:20] <adridu59> would it pass the test through, I'll try that
[14:22:21] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:22:29] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:22:40] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:23:13] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:23:20] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:23:37] *** Joins: twi (Adium@366146E1.F33C246D.C3DDD137.IP)
[14:23:47] *** Quits: twi (Adium@366146E1.F33C246D.C3DDD137.IP) (Max SendQ exceeded)
[14:24:00] *** Joins: twi (Adium@5554A293.72702734.4ABB9B40.IP)
[14:24:26] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Ping timeout)
[14:25:07] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[14:25:09] *** Quits: jviereck1 (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:25:16] <adridu59> nope, .expect() fails
[14:25:30] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[14:25:48] <adridu59> ok, I'm just gonna unwrap
[14:26:17] <adridu59> fails also my bad
[14:26:19] <dbaupp> how does .unwrap() if .expect() fails?
[14:26:35] <dbaupp> .expect() is just .unwrap() with a customisable message
[14:26:54] <adridu59> yes, my bad!
[14:27:08] <adridu59> I thought that the error catcher could possibly only work with unwrap
[14:27:27] <adridu59> I can use unwrap_or() like in the other example
[14:28:12] <adridu59> yea since it's a println I can unwrap_or("Error message") sounds good
[14:29:12] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:30:12] *** Quits: gwty_ (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP) (Quit: No Ping reply in 180 seconds.)
[14:30:40] *** Joins: gwty_ (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP)
[14:30:49] <adridu59> dbaupp: updated
[14:31:38] *** Joins: Ferreus (ferreus@moz-B23984A6.pools.arcor-ip.net)
[14:31:43] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[14:32:34] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[14:33:21] *** Quits: jackneill (jackneill@moz-E7969CCA.pool.digikabel.hu) (Ping timeout)
[14:33:53] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[14:35:47] *** Quits: gwty (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP) (Quit: No Ping reply in 180 seconds.)
[14:36:31] *** Quits: gwty_ (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP) (Ping timeout)
[14:36:39] *** Joins: gwty (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP)
[14:38:10] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:44:36] *** Joins: jackneill (jackneill@moz-E7969CCA.pool.digikabel.hu)
[14:47:04] *** Joins: mib_zodatl (Mibbit@2B74F0B0.41D261A1.477F65C2.IP)
[14:49:00] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:50:27] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:53:10] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:54:28] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[14:56:00] <adridu59> haha: http://osrc.dfm.io/bors
[14:57:19] *** Joins: mib_8sker9 (Mibbit@moz-9F74EE19.pool.ukrtel.net)
[14:57:24] *** Quits: mib_8sker9 (Mibbit@moz-9F74EE19.pool.ukrtel.net) (Quit: mib_8sker9)
[14:57:25] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:57:55] *** Quits: moostik (Icedove@moz-75F6D558.w92-135.abo.wanadoo.fr) (Ping timeout)
[14:58:53] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[14:59:00] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:01:26] <eddyb> http://osrc.dfm.io/eddyb o_O this makes me look better than I actually am
[15:01:51] <adridu59> what do you mean? it only uses complimenting words fwiw
[15:03:10] <eddyb> "fulltime hacker", "loves pushing code", "trend setting"
[15:03:23] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[15:03:34] <adridu59> ;)
[15:04:04] *** Quits: mib_zodatl (Mibbit@2B74F0B0.41D261A1.477F65C2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:04:58] <eddyb> though my motivation is temporarily low because I'm sick of this trans shit. though I hope it's over soon because the code is slightly cleaner now
[15:05:11] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[15:06:47] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[15:10:31] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[15:11:32] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[15:11:35] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[15:11:51] *** Joins: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net)
[15:13:28] <turbopape> Hi people,
[15:13:36] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:13:59] <kimundi> Hi turbopape 
[15:14:11] <turbopape> I am considering writing a web content modifying engine ,
[15:14:18] <turbopape> it would have to be runtime,
[15:14:32] <turbopape> and be typically put ahead of a telcos operator,
[15:14:38] <turbopape> so performance matters...
[15:14:48] <turbopape> I have seen clojure, and golang for the matter
[15:14:57] <turbopape> and somehow landed here...
[15:15:12] <turbopape> How would you guys see this kind of load heavy project
[15:15:27] <turbopape> with both systems and kind of complex data transformation project...
[15:15:40] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[15:15:59] <turbopape> I mean can be Rust used for this kind of project ?
[15:16:02] <turbopape> PLZ ?
[15:16:25] <turbopape> Sorry, I meant realtime, not runtime :)
[15:16:45] *** Joins: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch)
[15:16:49] <thiez> Rust is not really production-ready at this point, I imagine using C++ would be much easier, especially since more libraries exist.
[15:17:02] <turbopape> okay...
[15:17:14] <kimundi> hm, hard to say. In principle Rust aims to be a general purpose language with C++-like performance characteristics, so it would probably be possible - but its not production ready yet, and I also don't know exactly what a web content modifying engine is :P
[15:17:28] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:17:41] <turbopape> kimundi, that's the point :) It's a new silly idea... :)
[15:17:58] <turbopape> a proxy that would transform a web backend to add recommendation, social bookmarks...
[15:18:24] <turbopape> it has a heavy duty to change the html on the fly (after running the recommendations, etc...)
[15:18:34] <turbopape> and delivering timely, 
[15:18:41] <turbopape> and fault tolerant responses !
[15:19:08] *** Joins: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net)
[15:19:14] <thiez> so where between a server and a client would this web content modifying engine be located
[15:19:42] <turbopape> between the server and the client, it would "mimick" the original server behaviour...
[15:19:53] <turbopape> kind of reverse proxy adding DOM elements
[15:19:56] <turbopape> you see ?
[15:19:58] <kimundi> well, provided all libraries exist, and it doesn'T rely on features still in flux, it would probably be possible to write something like that
[15:20:08] <thiez> is that ethical?
[15:20:19] *** Quits: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: Blei)
[15:20:27] *** Joins: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch)
[15:20:29] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[15:20:32] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[15:20:33] <turbopape> actually the customers would subscribe to this kind of service :
[15:20:48] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Max SendQ exceeded)
[15:20:49] <turbopape> they'd add recommendations or any other value added services to their existing web site
[15:20:50] <bstrie_mojitos> thiez: some ISPs already do this, inserting ads into webpages for their own benefit
[15:20:56] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[15:21:08] <turbopape> no thiez, not that kind of stuff,
[15:21:10] <thiez> bstrie_mojitos: and I think that's horribly unethical :)
[15:21:11] <turbopape> more value added 
[15:21:25] <turbopape> I mean, 
[15:21:35] * Ms2ger used to have a free webhost that did that
[15:21:46] <turbopape> the original website (ecommerce) would want to add a recommender engine,
[15:21:46] <bstrie_mojitos> intuitively I expect a "web content modifying engine" would just be a proxy that transparently transforms every instance of the word "cloud" to "butt"
[15:21:51] <thiez> turbopape: wouldn't it be easier to inject javascript that performs the transformation on the client side?
[15:22:03] *** Joins: rca_ (rcatolino@moz-D0B9B101.adsl.proxad.net)
[15:22:22] <turbopape> thiez, nope, all the featurephones out there won't be able to run it
[15:22:28] <turbopape> besides, from my experience, 
[15:22:41] <turbopape> JS on the mobile is a bit too "expensive" right now...
[15:22:47] <turbopape> But did you get the point ?
[15:22:47] *** Quits: rca (rcatolino@2245D013.CC72BB30.520D6FA6.IP) (Ping timeout)
[15:22:53] *** Quits: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: Blei)
[15:22:59] <thiez> yes I get it now :)
[15:22:59] <turbopape> it is about a service sold to portal owners,
[15:23:03] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[15:23:18] <turbopape> not some kind of man in the middle impersonation :)
[15:23:20] *** rca_ is now known as rca
[15:23:25] <turbopape> Well, thank you guys !
[15:23:34] *** Joins: sammykim (sam@D87EE329.3E0FD91D.1C44CDAC.IP)
[15:24:26] <thiez> I suppose it would be an interesting project, and the servo-people would know about DOM-manipulation in rust
[15:25:24] <turbopape> yeah, just why I landed here in the first place...
[15:25:48] <turbopape> But I don't think the DOM manipulation is the hardest part...
[15:26:04] <turbopape> It's 1) the delivery engine 
[15:26:19] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[15:26:19] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[15:26:26] <Ms2ger> I wouldn't do DOM manipulation in rust right now :)
[15:26:39] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[15:27:08] <sammykim> What does it mean this T:Eq like fn foo<T:Eq>(a: &[T]) ?
[15:27:24] <Ms2ger> A T that implements trait Eq
[15:27:25] <bstrie_mojitos> sammykim: that function will be defined for all types that implement Eq
[15:27:33] <sammykim> Oh.. I see.
[15:27:44] <kimundi> sammykim: The function is generic over all types that implement the Eq trait - in other words all types where the == operator is overloaded for
[15:27:44] <sammykim> Then they T type must implement Eq right?
[15:28:24] <sammykim> bstrie_mojitos, kimundi, Ms2ger: Thanks!
[15:28:33] <kimundi> yes
[15:28:52] <sammykim> Great!
[15:29:07] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:31:01] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[15:31:31] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[15:32:44] *** Joins: Savago (Savago@CD06F12A.EBA15B4E.DB532300.IP)
[15:33:26] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[15:38:05] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:40:18] *** Quits: FreeFull (freefull@moz-41091BF3.as13285.net) (Input/output error)
[15:40:18] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[15:40:41] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[15:43:34] *** Joins: FreeFull (freefull@moz-41091BF3.as13285.net)
[15:44:12] *** Joins: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[15:45:42] <cwmma> \msg nickserv
[15:45:47] <cwmma> \msg nickserv
[15:46:13] <Ms2ger> /
[15:48:14] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[15:48:20] <cwmma> Ms2ger: thank you
[15:48:36] <Ms2ger> Np :)
[15:48:38] <cwmma> I did eventually figure that one out
[15:49:17] <cwmma> after I did it the second time in a row
[15:49:17] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[15:49:47] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[15:49:52] <adridu59> do compiler attributes have to be followed by a semicolon or not?
[15:49:58] <adridu59> seems like not
[15:50:03] *** Quits: jackneill (jackneill@moz-E7969CCA.pool.digikabel.hu) (Ping timeout)
[15:50:09] <Ms2ger> Might be "depends
[15:50:10] <Ms2ger> "
[15:50:11] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[15:51:27] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[15:52:28] <kimundi> adridu59: Which attribute where?
[15:52:28] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[15:52:30] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:52:41] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[15:52:50] *** Quits: derby (dirby@35557655.3CEF567.B3ED7DFA.IP) (Input/output error)
[15:52:58] <kimundi> adridu59: If the attribute should apply to the floowing item, no semicolon. If it should apply to the containing parent module, semicolon
[15:53:07] <kimundi> following*
[15:53:08] *** Joins: derby (dirby@moz-1319847A.countshockula.com)
[15:53:14] <adridu59> thanks!
[15:53:28] *** Quits: derby (dirby@moz-1319847A.countshockula.com) (Input/output error)
[15:53:39] <adridu59> it's weird because it looks like bors failed on a semicolon
[15:53:40] <adridu59> http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/2426/steps/test/logs/stdio
[15:53:51] *** Joins: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie)
[15:54:51] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[15:54:55] <kimundi> hu
[15:55:00] <kimundi> does it work locally?
[15:55:54] <kimundi> oh wait, I think the problem might be that its an inner attribute somewhere deep inside a main function - afaik that doesn'T work so well
[15:55:54] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[15:56:11] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[15:56:16] <kimundi> rusti: #[inline] fn foo() {}
[15:56:16] -rusti- ()
[15:56:24] <kimundi> rusti: mod foo {#[inline] fn foo() {}}
[15:56:25] -rusti- ()
[15:56:29] <kimundi> rusti: mod foo {#[inline]; fn foo() {}}
[15:56:30] -rusti- ()
[15:56:42] <kimundi> rusti: fn bar() {#[inline]; fn foo() {}}
[15:56:43] -rusti- ()
[15:56:49] <kimundi> hmm
[15:56:55] <adridu59> I think it works locally
[15:57:10] <adridu59> in fact I didn't change that part of the code in my patch, it was here before
[15:57:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:57:55] *** Joins: gkostyanikov (gkostyanik@BE81805F.A859D9FD.CA6E2165.IP)
[15:59:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:59:52] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[16:00:11] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[16:01:36] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[16:04:07] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[16:04:16] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[16:04:37] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[16:04:38] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[16:05:12] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[16:05:53] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[16:07:45] *** Quits: Savago (Savago@CD06F12A.EBA15B4E.DB532300.IP) (Quit: Savago)
[16:08:28] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:08:44] *** Joins: payload (Mibbit@moz-4DA0B54B.dynamic.primacom.net)
[16:09:03] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[16:10:51] <payload> hi. I like concept called reactive programming. Is there already some implementation giving me reactive programming with rust objects?
[16:10:52] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[16:11:11] <bstrie_mojitos> payload: I doubt it!
[16:11:12] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[16:11:54] <bstrie_mojitos> payload: maybe you could write one :)
[16:12:00] <payload> well I also found nothing while searching
[16:12:00] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[16:12:21] <payload> yey, I definitely look into that, then there is nothing at the moment
[16:12:39] *** Joins: tupshin_ (quassel@moz-54DE2E9C.du.xdsl.is)
[16:12:41] <payload> maybe is there a discussion of it, do you know?
[16:13:23] <bstrie_mojitos> payload: I don't even really know what reactive programming entails, aside from a bit of UI stuff
[16:14:19] <kimundi> I definitly heard people discuss it in a rust context a few months back
[16:14:21] <SiegeLord> I think tiffany tried to do functional reactive programming a few months ago... is that the same thing?
[16:14:23] <pyon> bstrie_mojitos: It means dealing with values that are functions of time.
[16:14:39] <kimundi> But no real code was written afaik
[16:14:44] <pyon> In a regular programming language, *variables* are functions of time, but values themselves are not.
[16:14:44] <tiffany> they're different
[16:15:06] <tiffany> functional reactive programming is applying reactive programming to functional languages
[16:15:21] <tiffany> I haven't really used reactive programming languages but every time I look into it all I get is "it's like spreadsheets"
[16:15:40] <bstrie_mojitos> payload: reminds me of http://esolangs.org/wiki/Entropy :)
[16:16:16] *** Joins: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net)
[16:16:57] <payload> yesterday I reread my understanding of (functional) reactive programming... it gave me a couple of phrases which are not sooo helpful in understanding it :)
[16:18:35] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[16:18:53] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:19:01] <payload> my understanding of it, is, that you "variables" depend on each other... than you change a variable, all other things, whos state depend on it, recalculate appropriately
[16:19:11] *** Joins: AvianFlu_ (AvianFlu@moz-C85C7DB7.dyn.optonline.net)
[16:19:23] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[16:19:41] <tiffany> in FRP you usually work with signals which are just functions used to transform the source signal into a new one
[16:19:49] <tiffany> I suppose reactive programming is more variable based
[16:19:50] <payload> also than you have events, like network packets, mouse clicks.... you can depend on this event stream, and handle it
[16:20:23] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Ping timeout)
[16:20:36] *** Quits: gkostyanikov (gkostyanik@BE81805F.A859D9FD.CA6E2165.IP) (Ping timeout)
[16:20:41] <payload> you because functional programming avoids stateful variables, there is a difference
[16:21:51] <tiffany> it's probably easier to implement reactive programming
[16:21:57] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[16:22:49] <payload> a variable change could be an event and it feeds into this event stream and on it goes... or the state of a variable is a "behaviour" in some FRP systems
[16:22:49] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[16:22:51] <bstrie_mojitos> tiffany: by "reactive programming" is that essentially "non-functional reactive programming"?
[16:23:14] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[16:23:19] <tiffany> I kept running into the type syste while trying to do FRP, but with reactive programming it seems like you can just have a Reactive<T> with a .depend() function to add new dependencies, and a .set() method to set the value and update dependencies
[16:23:35] <tiffany> type system issues*
[16:23:50] <bstrie_mojitos> tiffany: I hadn't heard of this! you should give a talk
[16:24:06] <tiffany> I tried using tasks, closures, structs, ... and everything had limitations
[16:24:47] <tiffany> I always managed to implement lift, but in some cases I couldn't get lift2, some I couldn't get async, and some other issues I forgot (going by elm terminology)
[16:24:55] <tiffany> eh, I'm not really an expert on FRP
[16:25:07] *** Quits: nical (nico@moz-FE0AE368.w2-3.abo.wanadoo.fr) (Ping timeout)
[16:25:08] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[16:25:24] <tiffany> or do public speaking, at all
[16:26:06] *** Parts: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) ()
[16:26:26] <payload> tiffany: is your work online somewhere?
[16:26:34] <tiffany> I don't think so
[16:26:46] <payload> I looked a little bit into the haskell implementation of sodium FRP
[16:26:52] <tiffany> they were mostly just 40 line rust files before I ran into some fundamental problem with my approach
[16:26:59] <tiffany> I should probably look at other implementations
[16:27:08] *** jorendorff_away is now known as jorendorff
[16:27:19] <bstrie_mojitos> tiffany: that still makes you the world's top expert on reactive programming in rust
[16:27:31] <tiffany> if I do look into it again I will write a blog post about my experiences
[16:27:31] <payload> :)
[16:27:45] <payload> yey, where is your blog?
[16:28:02] <tiffany> nothing fancy: https://lymiahugs.com/~tiffany/blog/
[16:28:10] <payload> the sodium guy also tried a rust implementation but got not very far either
[16:28:12] <bstrie_mojitos> tiffany: yes, it would be interesting to read about the problems you ran into
[16:28:25] *** Quits: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net) (Quit: Leaving.)
[16:28:49] *** Quits: erickt1 (Adium@moz-4B000CB7.dyn.optonline.net) (Quit: Leaving.)
[16:28:55] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[16:29:05] *** Quits: sammykim (sam@D87EE329.3E0FD91D.1C44CDAC.IP) (Quit: Leaving)
[16:29:05] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[16:29:44] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[16:30:42] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[16:33:07] *** Joins: brylie (quassel@moz-E27796EB.hsd1.or.comcast.net)
[16:33:15] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[16:33:22] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[16:33:38] *** Quits: Kxepal (Miranda@moz-937849DD.pppoe.mtu-net.ru) (Ping timeout)
[16:34:48] *** Joins: Kxepal (Miranda@moz-9E54938F.pppoe.mtu-net.ru)
[16:35:41] *** Joins: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP)
[16:36:52] <olsonjeffery> i feel like rust would need a good answer to the question "so what about cross-process/platform messaging?" before diving too hard into thinking about reactive programming
[16:37:25] *** Quits: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP) (Ping timeout)
[16:37:44] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[16:37:52] <olsonjeffery> probably MutexArc would get you there for in-process
[16:37:54] <bstrie_mojitos> is reactive programming a good excuse to start thinking about those things?
[16:38:02] <olsonjeffery> sure.
[16:39:10] *** Joins: jackneill (jackneill@moz-E7969CCA.pool.digikabel.hu)
[16:42:36] <payload> olsonjeffery: I don't see a connection
[16:43:04] *** Joins: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP)
[16:43:12] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[16:43:12] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[16:43:46] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[16:45:28] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[16:48:30] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Quit: Leaving.)
[16:48:35] *** Joins: siavashserver (siavash@19112693.498D8908.82A25C10.IP)
[16:49:56] <olsonjeffery> payload: how do you propose to enforce consistency of changing events streams/values in a distributed system? that's kind of the point of reactive programming, is it not?
[16:49:59] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[16:50:16] <olsonjeffery> not even "enforce", but "propagate change".
[16:52:50] *** Joins: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP)
[16:52:50] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Connection reset by peer)
[16:53:03] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:53:14] *** Joins: jvshahid_ (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[16:53:17] *** Joins: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP)
[16:54:00] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[16:54:43] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[16:58:03] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[16:58:09] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:58:13] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[16:58:24] *** Joins: threecreepio1 (Adium@moz-9DA6CBAC.bredband.comhem.se)
[16:58:24] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Connection reset by peer)
[16:59:45] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[17:00:09] *** Joins: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com)
[17:00:09] *** ChanServ sets mode: +o jdm
[17:00:16] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[17:00:34] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[17:01:50] <pyon> How exactly is this parsed: "a as uint % b as uint * c as uint"?
[17:02:10] <pyon> "(a as uint) % (b as uint) * (c as uint)" ???
[17:02:34] <olsonjeffery> yeah
[17:02:46] <bstrie_mojitos> rusti: 1i8 as uint * 2i16 as uint
[17:02:47] -rusti- 2u
[17:02:56] *** jorendorff is now known as jorendorff_away
[17:03:01] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[17:03:18] <bstrie_mojitos> pyon: when in doubt, add the parens anyway. doesn't hurt to clarify precedence
[17:05:27] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:07:56] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[17:07:59] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[17:09:39] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[17:10:45] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[17:11:26] *** Quits: jvshahid_ (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[17:11:54] <payload> bstrie_mojitos: pyon: when in doubt, look it up :) http://static.rust-lang.org/doc/master/rust.html#operator-precedence
[17:12:31] *** Joins: jonesnc (Mibbit@AE594406.D3CF842A.3225B490.IP)
[17:12:41] *** Quits: jonesnc (Mibbit@AE594406.D3CF842A.3225B490.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:12:44] <bstrie_mojitos> nah, when in doubt, *never* rely on the documentation :P
[17:13:31] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[17:14:02] <Ms2ger> bstrie_mojitos, get drunk :)
[17:14:38] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[17:14:39] <bstrie_mojitos> Ms2ger: as of today I'm technically not on vacation anymore, but I like to pretend :)
[17:14:53] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[17:15:21] <Ms2ger> bstrie_mojitos, technically working is the best kind of working
[17:15:37] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[17:16:53] * bstrie_mojitos covertly sips a mojito at his desk
[17:17:02] *** Quits: payload (Mibbit@moz-4DA0B54B.dynamic.primacom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:17:03] *** Joins: Florob (Florob@moz-39532932.de)
[17:20:34] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[17:20:40] *** Quits: siavashserver (siavash@19112693.498D8908.82A25C10.IP) (Quit: Konversation terminated!)
[17:20:41] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[17:21:39] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[17:21:46] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[17:24:40] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[17:29:48] *** Joins: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[17:30:23] *** Quits: oal (oal@26029749.1D466084.2CFD4520.IP) (Ping timeout)
[17:30:32] *** Quits: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Ping timeout)
[17:30:32] *** cwmma_ is now known as cwmma
[17:30:58] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:30:59] *** Joins: oal (oal@26029749.1D466084.2CFD4520.IP)
[17:31:13] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[17:34:50] <eddyb> https://www.youtube.com/watch?v=gTj5Ni7_zes "I will not design security solutions without a strong IT security background" amen
[17:34:55] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Ping timeout)
[17:37:01] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[17:37:18] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[17:38:51] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Client exited)
[17:39:38] *** Joins: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net)
[17:39:50] <Florob> *sigh* why do people insist on linking to youtube
[17:40:42] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:40:44] <SiegeLord> What do you want instead? Polsy?
[17:40:54] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[17:41:07] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[17:41:47] *** Joins: twi1 (Adium@366146E1.F33C246D.C3DDD137.IP)
[17:41:49] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:42:18] *** Quits: espadrine (Thunderbir@moz-BA7B4434.w90-2.abo.wanadoo.fr) (Ping timeout)
[17:42:43] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:42:43] <Florob> In this particular case <http://media.ccc.de/browse/congress/2013/30C3_-_5334_-_en_-_saal_2_-_201312291400_-_rfid_treehouse_of_horror_-_adrian_dabrowski.html>. People didn't spend time on building a data retention free CDN for this just so everyone still uses youtube
[17:42:58] *** Quits: twi (Adium@5554A293.72702734.4ABB9B40.IP) (Ping timeout)
[17:43:11] *** Joins: espadrine (Thunderbir@moz-475D8076.w92-128.abo.wanadoo.fr)
[17:43:29] *** Quits: twi1 (Adium@366146E1.F33C246D.C3DDD137.IP) (Ping timeout)
[17:45:40] *** Quits: turbopape (turbopape@2B74F0B0.41D261A1.477F65C2.IP) (Client exited)
[17:48:36] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:48:52] <nielsle> I tried to replace a condition in rustpkg with a Result. Am I on the right track? https://github.com/nielsle/rust/commit/721eb3e8f92bd17a472636694166e0f7b2853310
[17:50:12] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[17:51:02] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[17:51:51] <kimundi> [o__o] has left! Quick, say something silly while we're not being monitored!
[17:53:12] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[17:53:19] <xitology> Hi! Could someone help me to make this program compile: https://gist.github.com/xitology/dfbf6583bf82f8a2cf0d (not sure how to satisfy the borrow checher)
[17:54:14] <klutzy> xitology: &map -> &mut map in main()
[17:54:27] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[17:55:31] <klutzy> xitology: and map.find() -> map.find_mut() which returns &mut
[17:56:48] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[17:56:51] <xitology> klutzy, awesome thank you! Still complains about map.insert(key, ~[val]) though
[17:57:44] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[17:57:54] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Quit: Gone)
[17:58:02] <rca> i think you should use mangle instead of find/insert.
[17:58:22] <eddyb> Florob: *sorry*
[18:00:06] <xitology> rca: thanks, I'll try it
[18:00:29] *** jorendorff_away is now known as jorendorff
[18:00:52] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[18:02:37] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[18:03:05] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[18:03:35] <steven_is_false> Hello. Does anyone know if there is an equivalent of std::ptr::to_mut_unsafe_ptr for vectors?
[18:04:00] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:04:00] *** ChanServ sets mode: +ao brson brson
[18:08:09] <rca> steven_is_false: there's a as_mut_ptr method for vectors.
[18:08:42] <steven_is_false> Thhat's not for unsafe pointers though
[18:09:02] <rca> well it returns an unsafe pointer.
[18:09:22] <steven_is_false> rca: Oh let me check
[18:10:05] <steven_is_false> thanks!
[18:10:12] <rca> np
[18:10:25] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[18:10:32] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: kngl)
[18:11:11] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[18:12:04] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[18:12:29] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:14:20] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[18:14:46] *** Quits: AvianFlu_ (AvianFlu@moz-C85C7DB7.dyn.optonline.net) (Input/output error)
[18:15:09] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:16:01] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[18:22:36] *** Joins: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[18:23:18] *** Quits: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Ping timeout)
[18:23:18] *** cwmma_ is now known as cwmma
[18:23:19] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[18:24:54] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[18:24:55] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[18:25:30] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:25:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:25:48] *** Quits: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP) (Connection reset by peer)
[18:25:58] *** Joins: alan_andrade (alan_andra@94147F3C.3C8440C4.B7838CA6.IP)
[18:28:13] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Max SendQ exceeded)
[18:28:19] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[18:30:50] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:36:28] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[18:40:06] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[18:40:17] *** Joins: alonlevy (alon@DB438A2E.66821607.AB64B967.IP)
[18:41:10] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[18:45:18] *** Quits: tupshin_ (quassel@moz-54DE2E9C.du.xdsl.is) (Ping timeout)
[18:45:46] *** jorendorff is now known as jorendorff_away
[18:46:14] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[18:46:51] *** Quits: vmx (vmx@moz-DA9CC755.pools.arcor-ip.net) (Quit: Leaving)
[18:47:17] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[18:49:54] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[18:51:35] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[18:52:41] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[18:53:07] <brson> 0.9 contributors: https://gist.github.com/brson/8224412
[18:58:29] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:58:43] <bstrie_mojitos> brson: when is that happening?
[18:59:31] <brson> bstrie_mojitos: as soon as it can. I need to test that the installers still work, and I really want to get android unwinding working again
[18:59:35] <brson> probably not this week though
[18:59:54] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[18:59:56] <bstrie_mojitos> ok good :) I tend to waste all my time on forums when releases come out
[19:00:07] <bstrie_mojitos> and I wanted to get some work done
[19:00:13] <bstrie_mojitos> and drink these mojitos.
[19:00:19] *** bstrie_mojitos is now known as bstrie
[19:00:32] <brson> lol
[19:01:50] *** Joins: echristo (echristo@8063EDD3.D6CCE4AE.77834EAA.IP)
[19:02:32] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[19:03:46] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[19:04:25] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[19:08:42] *** Quits: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net) (Quit: This computer has gone to sleep)
[19:09:20] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[19:09:29] *** Joins: Rico (Mibbit@moz-AF9B1002.superkabel.de)
[19:10:02] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[19:10:20] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:11:05] <Rico> Hello. Can someone help me t create a static list of strings? I try >>static nouns : ~[~str] = ~[~"hello"];<< but I get the error "constant contains unimplemented expression type".
[19:11:16] *** Joins: short (Mibbit@moz-3D556E4B.amazon.com)
[19:12:12] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[19:12:26] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[19:12:50] <bstrie> Rico: ~ is a heap allocation, which can't happen statically
[19:12:52] <kimundi> Rico: Sure! You'Re problem is that both ~[T] and ~str as heap allocated datastructures, which are not allowed in compiletime constants
[19:13:42] <kimundi> However, you can just define them as references to compiletime constant data: static nouns : &'static [&'static str] = &["hello"];
[19:13:57] <kimundi> rusti: static nouns : &'static [&'static str] = &["hello"]; nouns
[19:13:58] -rusti- &["hello"]
[19:15:46] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[19:16:42] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[19:16:54] <Rico> ok, thank you all very much :) Have have to look more into static contants I guess... 
[19:17:09] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[19:18:29] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[19:18:47] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[19:21:24] <mpiechotka> Hi. When I run rustpkg build I get "task '<unnamed>' failed at 'assertion failed: !outputs_disc.is_empty()', /var/tmp/portage/dev-lang/rust-9999/work/rust-9999/src/librustpkg/util.rs:548" - any idea how to workaround it?
[19:22:04] *** Parts: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) ()
[19:24:59] *** Quits: StarLight (StarLight@moz-50479A70.dynamic.avangarddsl.ru) (Ping timeout)
[19:27:46] <jdm> nooo, first rust release that doesn't include my name ;_;
[19:27:49] <brson> alan_andrade: I'm very enthusastic about your doc prs. let's get them polished off and merged
[19:27:53] <jdm> I have dropped the ball
[19:27:59] <brson> jdm: submit a pr, quick
[19:28:08] <alan_andrade> @brson On it :D
[19:28:17] <bstrie> jdm: I too have dropped the ball. let's fork rust and have our own release, with you and me as the only contributors
[19:28:25] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[19:29:08] *** Joins: StarLight (StarLight@moz-BA2CD59E.dynamic.avangarddsl.ru)
[19:29:22] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Ping timeout)
[19:30:00] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[19:30:11] <bstrie> whoa
[19:30:28] <bstrie> contrary to my expectations, the subreddit traffic stats in december blew away the previous best month
[19:31:12] <bstrie> the past trend has been that traffic peaks in months with a release, and then gradually declines until the next
[19:31:21] <bstrie> but for some reason december was huge
[19:31:27] <bstrie> I guess we're just getting more visible
[19:31:28] *** Joins: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[19:31:51] <kimundi> bstrie: Do all the playrust misposts count? :P
[19:31:57] <zxcdw> Heh, I swear some of it comes from Rust-the-game :)
[19:32:01] <bstrie> kimundi: hahahahahaha, good point
[19:32:11] *** Quits: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Quit: cwmma_)
[19:32:14] *** Joins: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[19:32:16] <zxcdw> Seems to be among the top10 played games on Steam already
[19:32:17] *** Quits: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Ping timeout)
[19:32:17] *** cwmma_ is now known as cwmma
[19:32:18] <bstrie> still, we don't get *that* many misposts
[19:32:27] <bstrie> like, one a day on average
[19:32:37] <rca> there's also a lot of people taking vacations in december. ie more time to play with stuff like rust.
[19:32:50] <o11c> zxcdw: obviously, you need to add the Rust Language to Steam ...
[19:32:58] *** Joins: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[19:33:02] *** Joins: derby (dirby@moz-773B6878.torservers.net)
[19:33:03] <zxcdw> Haha, now that would be it!
[19:33:06] <nielsle> mpiechotka: If on linux, try to set   "export RUST_LOG=rustpkg::util" Then you get debug info
[19:33:25] <zxcdw> Let Valve/Steam manage the Windows installation issues ;)
[19:33:45] <bstrie> if I may digress, as a video game connoisseur myself I don't really see the appeal in Rust-the-game
[19:33:49] <mpiechotka> nielsle: Ok. Wait a sec - the debug build have not yet finished.
[19:34:01] *** Quits: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Ping timeout)
[19:34:02] *** cwmma_ is now known as cwmma
[19:34:20] <bstrie> seems to just be another game jumping on the minecraft bandwagon, with the pvp paranoia of DayZ
[19:34:35] <steveklabnik> What's the timeline on 0.9? I need to know when to check out Rust for Rubyists ;) /cc brson pcwalton acrichto
[19:34:36] *** Joins: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[19:34:48] *** Quits: cwmma_ (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Quit: cwmma_)
[19:34:55] <bstrie> steveklabnik: next week mebbe?
[19:34:56] <alan_andrade> that was my intro guide to rust @steveklabnik
[19:34:59] *** Quits: FreeFull (freefull@moz-41091BF3.as13285.net) (Connection reset by peer)
[19:35:16] <steveklabnik> alan_andrade: woo! I guess it was okay, since you're here?
[19:35:27] <steveklabnik> bstrie: cool, thanks. guess i'll do that this weekend then...
[19:35:41] *** Quits: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Ping timeout)
[19:35:54] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:35:59] <alan_andrade> okay would depreciate the value. I believe it's fantastic
[19:36:09] <alan_andrade> In the same way Rust's community
[19:36:44] <alan_andrade> Thanks for your work steve +1
[19:37:00] <zxcdw> bstrie: indeed, although I haven't tried it, so who knows!
[19:37:11] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[19:37:17] <zxcdw> Maybe if I did I'd have to move from #rust in here to #rust in Quakenet
[19:37:28] <zxcdw> (assuming that their channel exists there)
[19:37:35] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[19:37:37] <zxcdw> (as if games these days have IRC channels... :()
[19:38:04] <bstrie> zxcdw: come play dungeon crawl stone soup!! ##crawl on freenode
[19:39:35] <eddyb> bstrie: next week? I have time to break debuginfo until then!
[19:40:03] <eddyb> with all this work, I'd be sad if there's no speedup in LLVM
[19:41:17] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[19:42:49] *** Joins: apoelstra (username@moz-B7040E82.vs.shawcable.net)
[19:45:27] <alan_andrade> This might be dumb, but what's the main difference of doing `as_slice` vs. `clone` ?
[19:45:39] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[19:46:02] <Ms2ger> as_slice doesn't copy
[19:46:04] <Ms2ger> clone does
[19:46:09] <bstrie> a clone is a deep copy, and a slice is just a window to gaze into the thing
[19:46:37] <alan_andrade> It would be correct to say that as_slice is faster ?
[19:46:40] <Ms2ger> Yes
[19:47:03] <eddyb> it's a noop, allocation-wise
[19:47:36] <eddyb> if we had better heap-allocated vectors/strings, it would be truly a noop
[19:47:50] *** Quits: gwty (gwtypc@102CF09B.E5EF4F0B.27560D6E.IP) (Ping timeout)
[19:48:42] <whitequark> is Option<*T> flattened to a nullable pointer?
[19:48:59] <whitequark> (apparently not, but I'll ask just in case)
[19:49:19] <eddyb> *T is nullable, &T/~T/@T isn't
[19:49:21] <kimundi> whitequark: *T not (yet?)
[19:49:22] <eddyb> *aren't
[19:49:28] <alan_andrade> why would you clone instead of slice ? I believe when you will change the copied value in some way... ?
[19:49:33] <Ms2ger> Right, *T can already be null
[19:49:49] * whitequark nods
[19:50:22] <kimundi> alan_andrade: Right, clone() if you need a new indipendend copy of the value to modify/pass to something else, etc
[19:50:40] <alan_andrade> In what way this code is changing the copied value ?
[19:50:41] <alan_andrade> https://github.com/mozilla/rust/blob/master/src/libextra/getopts.rs#L403
[19:52:13] <alan_andrade> oh oh oh, I think I got it. In LOC 406, the copied value get's inserted in a new vector. That's why. A slice wouldn't work I guess
[19:52:13] <kimundi> alan_andrade: as_slice() is just a convenience method for invoking autoomatic slicing of a vector or string - It's not strictly neccessary, but it makes code nicer in some situations
[19:52:45] <Ms2ger> alan_andrade, right, the free vector contains ~strs
[19:53:24] <alan_andrade> aha! moment for me :D
[19:53:31] <alan_andrade> Thanks
[19:54:25] *** Joins: FreeFull (freefull@moz-3109D7BE.as13285.net)
[19:56:27] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:57:56] *** jdm is now known as jdm|busy
[19:58:51] <bvssvni> https://github.com/bvssvni/rust-empty/wiki/How-to-use-generic-and-traits-in-Rust
[19:59:19] <bvssvni> writing a tutorial of how to combine generics and traits. ideas?
[20:02:52] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:03:24] <bstrie> bvssvni: how does the current tutorial cover it?
[20:03:38] <bvssvni> bstrie: I have not found any
[20:04:05] <bvssvni> bstrie: the tutorial covers generics and traits, but not library design
[20:05:21] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:05:21] *** ChanServ sets mode: +o tjc
[20:08:08] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Quit: Leaving...)
[20:10:29] *** Joins: ptc1 (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[20:10:54] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Ping timeout)
[20:13:26] *** Joins: twi (Adium@moz-174339A4.cust.dsl.vodafone.it)
[20:14:15] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[20:17:24] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[20:17:52] *** jorendorff_away is now known as jorendorff
[20:18:37] *** Quits: alonlevy (alon@DB438A2E.66821607.AB64B967.IP) (Ping timeout)
[20:22:59] *** Quits: echristo (echristo@8063EDD3.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[20:26:21] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[20:26:31] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[20:30:31] *** jdm|busy is now known as jdm
[20:30:38] *** Joins: echristo (echristo@8063EDD3.D6CCE4AE.77834EAA.IP)
[20:31:57] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[20:33:54] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[20:36:39] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[20:37:53] <bvssvni> changed the link: https://github.com/bvssvni/rust-empty/wiki/How-to-use-generics-and-traits-in-Rust
[20:38:11] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[20:39:07] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[20:40:03] <bstrie> bvssvni: I think there's a whole bunch of people working on documentation right now, might want to try and coordinate via the mailing list
[20:42:23] <bvssvni> bstrie: I am writing to myself as I learn
[20:42:32] <bstrie> ah ok
[20:42:43] <bvssvni> bstrie: might be a good idea to join the mailing list
[20:42:57] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[20:43:19] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[20:43:56] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[20:45:21] *** Quits: Rico (Mibbit@moz-AF9B1002.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:46:06] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[20:47:41] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:48:39] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[20:49:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:53:38] *** Quits: jackneill (jackneill@moz-E7969CCA.pool.digikabel.hu) (Ping timeout)
[20:55:10] *** Joins: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[20:55:44] <steveklabnik> :)
[20:57:19] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[20:57:28] <mpiechotka> nielsle: Log is here https://gist.github.com/uzytkownik/8226733
[20:58:33] *** Quits: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Ping timeout)
[20:59:02] *** Joins: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[20:59:12] *** jorendorff is now known as jorendorff_away
[21:01:44] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[21:02:20] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[21:04:24] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:04:24] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Ping timeout)
[21:04:41] *** Quits: victorporof (victorporo@773D35C8.FAB6DAB7.79933D60.IP) (Quit: victorporof)
[21:04:56] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:06:13] *** Joins: johnwalkergh (user@moz-E52097FC.dhcp.insightbb.com)
[21:06:30] *** Joins: moostik (Icedove@moz-F5DBFF76.w83-202.abo.wanadoo.fr)
[21:06:48] <johnwalkergh> hi. i just tried to fix an issue with emacs rust-mode: https://github.com/mozilla/rust/pull/11278
[21:07:06] <johnwalkergh> clearly this doesn't work, however. does anyone have suggestions for handling this behavior? 
[21:07:23] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:08:57] <johnwalkergh> i guess one way might be to treat character literals ' being matched with any character two positions away
[21:09:27] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[21:09:29] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Quit: lenstr)
[21:10:08] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[21:11:10] *** Quits: Ms2ger (Ms2ger@7AE7573F.9612FC09.3773EA9F.IP) (Quit: nn)
[21:12:58] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:13:06] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:13:50] *** Quits: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Quit: cwmma)
[21:14:49] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[21:15:36] *** Joins: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[21:15:54] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:16:07] *** Parts: cwmma (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) ()
[21:17:32] <kmc> rusti: (false | true, false || true)
[21:17:33] -rusti- (true, true)
[21:17:46] <kmc> ^  weird that bitwise or/and are allowed on bool; is this a bug?
[21:18:19] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:18:51] <kimundi> kmc: Well, they are both one bit in a sense :P
[21:19:51] <kmc> sure, you can see bool as basically u1, on the other hand things like "0 as bool" are no longer allowed
[21:22:25] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[21:22:29] <SiegeLord> || short circuits and | doesn't
[21:22:41] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[21:22:46] <SiegeLord> So... foo() | bar() will do something different than foo() || bar()
[21:22:53] <SiegeLord> And the former might be needed sometimes?
[21:23:14] <SiegeLord> As long as you can't do int | bool it's all good, I'd say
[21:24:04] <bvssvni> rusti: false | true
[21:24:05] -rusti- true
[21:24:53] <kmc> ah, interesting point
[21:25:05] <bvssvni> rusti: false || true
[21:25:05] -rusti- true
[21:25:23] <kmc> but I think using | on bools because it doesn't short circuit would be the height of unreadable "too clever" code
[21:25:35] <bvssvni> rusti: true || false
[21:25:36] -rusti- true
[21:25:45] <bvssvni> rusti: true | false
[21:25:46] -rusti- true
[21:26:25] <FreeFull> | is bitwise, so it can't short-circuit
[21:26:30] <FreeFull> rusti: 3 | 6
[21:26:31] -rusti- 7
[21:27:00] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[21:27:28] <kmc> that is correct
[21:27:30] <SiegeLord> rusti: let mut a:i32 = 1; fn foo(a: &mut i32) -> bool { *a += 1; false } foo(&mut a) || foo(&mut a); *a
[21:27:32] -rusti- pastebinned 7 lines of output: http://ix.io/9DE
[21:27:35] *** Joins: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net)
[21:27:41] <SiegeLord> rusti: let mut a:i32 = 1; fn foo(a: &mut i32) -> bool { *a += 1; false } foo(&mut a) || foo(&mut a); a
[21:27:42] -rusti- 3i32
[21:27:55] <SiegeLord> rusti: let mut a:i32 = 1; fn foo(a: &mut i32) -> bool { *a += 1; false } foo(&mut a) | foo(&mut a); a
[21:27:55] -rusti- 3i32
[21:27:57] <nielsle> mpiechotka: I don't think that I have an answer for you :-)
[21:28:10] <SiegeLord> Err... I meant to return 'true'... but w/e
[21:28:26] *** Quits: ptc1 (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[21:28:45] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[21:28:48] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[21:29:13] <mpiechotka> nielsle: Thanks. I've filled the bug
[21:29:19] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[21:29:22] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[21:29:29] <SiegeLord> Also... there's |=
[21:29:36] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:29:42] <SiegeLord> If you disallow | on bools, you'd have to introduce ||=
[21:29:45] <SiegeLord> Which is just silly :P
[21:30:21] *** Joins: kvanb (kvanb@moz-CDB93B52.lnse3.win.bigpond.net.au)
[21:34:51] <johnwalkergh> can anyone think of another languages where ' can be a character literal and then by itself somewhere?
[21:35:03] <johnwalkergh> like a lisp with 'a' behavior and 'a
[21:35:31] <johnwalkergh> maybe scala is that crazy?
[21:35:39] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[21:36:17] <tjc> johnwalkergh: Ocaml as well, if I recall correctly
[21:36:32] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:36:46] <kmc> yeah, 'a only in types though
[21:38:21] <johnwalkergh> ocaml is a good example
[21:38:39] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:38:51] <johnwalkergh> actually, apparently they switched to backquotes instead
[21:39:41] <johnwalkergh> oh wow, ocaml really has it bad lol
[21:41:12] <whitequark> backquotes? no, still 'a
[21:42:44] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[21:43:23] <johnwalkergh> an article i was looking at suggested that there's also revised syntax that delegates one of the uses of ' to `
[21:43:43] <johnwalkergh> so you do [: `1 ... instead of [< '1 ... in streams
[21:45:14] <FreeFull> SiegeLord: ||= isn't silly at all
[21:45:29] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[21:45:44] <FreeFull> johnwalkergh: Haskell allows a'
[21:45:58] <SiegeLord> ||= doesn't make any sense... what exactly are you short circuiting there?
[21:46:21] <FreeFull> SiegeLord: a ||= b; would be the same as a = a || b;
[21:46:45] <FreeFull> So if a is true, it's a no-op
[21:46:51] <SiegeLord> Oh I see... now that's some clever code right there
[21:46:59] <SiegeLord> Let's add it
[21:47:35] * brendanc adds a ?:= b to C
[21:48:00] <FreeFull> Now ?:= wouldn't make sense =P
[21:48:14] <FreeFull> I'm pretty sure C has ||=
[21:48:16] <brendanc> :)
[21:48:44] <SiegeLord> It doesn't
[21:50:54] *** Quits: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP) (Ping timeout)
[21:52:12] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:52:50] *** Quits: johnwalkergh (user@moz-E52097FC.dhcp.insightbb.com) (Client exited)
[21:54:36] <ecl3ctic> the tutorial at http://static.rust-lang.org/doc/master/tutorial.html has two references to 'managed closures' but no definition of them
[21:54:45] <ecl3ctic> do managed closures actually exist?
[21:57:32] *** Quits: doy (doy@moz-8F23663C.net) (Quit: rebooting)
[21:57:42] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:57:53] *** Joins: payload (Mibbit@moz-49A381BD.dip0.t-ipconnect.de)
[21:58:50] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[21:58:53] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[21:59:36] <strcat> ecl3ctic: not anymore
[21:59:43] *** Parts: mpiechotka (mpiechotka@moz-FF5F76BA.adsl.inetia.pl) ()
[21:59:47] <kimundi> Woho! Finally found the bug in my matrix transformation code. Memo to self: The w component is important, too.
[22:02:11] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:04:04] *** Quits: discomfitor (asdf@moz-975BC507.hsd1.ct.comcast.net) (Quit: ah. I see.)
[22:04:09] *** Joins: discomfitor (discomfito@moz-975BC507.hsd1.ct.comcast.net)
[22:04:19] <payload> tiffany: maybe this will help me with FRP in rust http://www.cs.jhu.edu/CIRL/publications/pdf/DaHaPeTR2010frp.pdf
[22:04:41] <tiffany> interesting
[22:05:58] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:07:50] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[22:08:07] <ecl3ctic> strcat: thanks. There are a few inconsistencies in that tutorial what with the removal of @mut, @, and I see managed closures
[22:08:12] *** Quits: fabiand (fabiand@moz-D7D680EB.adsl.alicedsl.de) (Quit: Verlassend)
[22:08:53] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[22:09:07] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[22:10:28] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:10:53] *** Quits: posco (sid14832@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:11:11] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[22:11:18] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:11:18] *** Quits: lmandel1 (uid15702@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:11:18] *** Quits: geomyidae_ (uid214@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:12:04] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:12:11] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: gazoombo (sid6629@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: cmeiklejohn (sid1900@moz-31ABA2C0.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: davidillsley (sid18481@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: robert (uid15951@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: wycats_ (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:12:11] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:12:31] *** Quits: Meistarin (sid19523@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:12:33] *** Joins: davidillsley (sid18481@moz-5F4AA75A.irccloud.com)
[22:12:46] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[22:12:51] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[22:12:54] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[22:14:02] *** Joins: doy (doy@moz-8F23663C.net)
[22:14:08] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[22:14:16] *** Quits: davidillsley (sid18481@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:14:19] *** Quits: fixplz (uid18459@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:14:38] *** Joins: gazoombo (sid6629@moz-E77DEB21.irccloud.com)
[22:14:49] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[22:14:49] *** ChanServ sets mode: +o jack
[22:14:53] *** Joins: lmandel1 (uid15702@moz-E77DEB21.irccloud.com)
[22:15:25] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[22:16:28] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:16:32] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:16:38] *** Quits: antifuchs (sid10828@moz-31ABA2C0.irccloud.com) (Ping timeout)
[22:16:39] *** Joins: davidillsley (sid18481@moz-5F4AA75A.irccloud.com)
[22:17:26] *** Quits: tomdale (sid5518@moz-31ABA2C0.irccloud.com) (Ping timeout)
[22:18:01] *** Quits: gazoombo (sid6629@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:18:24] *** Quits: davidillsley (sid18481@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:18:24] *** Quits: escalant3 (uid14896@moz-31ABA2C0.irccloud.com) (Ping timeout)
[22:18:24] *** Quits: lmandel1 (uid15702@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:18:26] *** Joins: fixplz (uid18459@moz-A42E5B7B.irccloud.com)
[22:18:37] *** Joins: escalant3 (uid14896@moz-31ABA2C0.irccloud.com)
[22:18:55] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:19:46] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[22:20:08] *** Quits: fixplz (uid18459@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:20:09] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[22:20:25] *** Quits: escalant3 (uid14896@moz-31ABA2C0.irccloud.com) (Ping timeout)
[22:20:44] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[22:21:06] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:21:06] *** Quits: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:21:42] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:22:03] *** Quits: balpert_ (sid15886@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:22:23] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[22:22:34] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:24:20] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[22:24:27] *** Joins: balpert_ (sid15886@moz-A42E5B7B.irccloud.com)
[22:24:45] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:25:00] *** Joins: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com)
[22:25:59] *** Quits: bynaryshef (bynaryshef@moz-DCC9E7CE.mem.bellsouth.net) (Quit: This computer has gone to sleep)
[22:26:00] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[22:26:45] *** Quits: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:27:00] *** Joins: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com)
[22:27:08] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:27:09] *** ChanServ sets mode: +o tjc
[22:30:59] *** Joins: Jarrett (chatzilla@moz-465FA06E.dhcp.rvsd.ca.charter.com)
[22:30:59] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:30:59] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:31:11] *** Quits: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:34:18] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[22:35:46] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[22:35:47] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[22:38:21] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:38:42] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:38:54] *** Joins: alonlevy (alon@moz-30492E92.bb.netvision.net.il)
[22:39:08] *** Quits: balpert_ (sid15886@moz-A42E5B7B.irccloud.com) (Ping timeout)
[22:39:09] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:39:42] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[22:42:43] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[22:45:15] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[22:46:14] *** Joins: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de)
[22:47:51] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:48:12] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[22:48:53] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:49:19] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:49:37] *** Quits: dhedlund (dhedlund@moz-A6C9F88D.ptld.qwest.net) (Ping timeout)
[22:50:26] *** Joins: dhedlund (dhedlund@moz-81171707.ptld.qwest.net)
[22:52:13] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[22:52:29] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[22:52:31] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[22:52:50] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:53:03] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[22:53:50] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:54:56] *** jorendorff_away is now known as jorendorff
[22:55:02] *** Quits: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP) (Quit: Leaving.)
[22:56:08] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[22:58:10] *** Quits: jviereck (Adium@moz-2FD0F134.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:58:38] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[23:00:44] *** Joins: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com)
[23:00:49] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[23:01:43] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[23:02:57] <vadimcn> what's the right way to run android tests?
[23:02:58] *** Joins: canhtak (canhtak@moz-59105D0.wl.t.ulaval.ca)
[23:03:10] <indirect> double-blind
[23:03:24] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[23:03:31] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[23:04:24] <vadimcn> I'm trying "make check-stage2-T-arm-linux-androideabi-H-x86_64-unknown-linux-gnu", but it fails with "failed at 'android device is not available'" error
[23:04:28] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[23:05:25] <brson> vadimcn: to get the makefiles to find the emulator you need to run configure with adb in your path, then run make with a running emulator
[23:05:29] <brson> that first step trips me up a lot
[23:05:35] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[23:05:41] <brson> if configure doesn't find adb then make never will, even if you add it to your path later
[23:05:54] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[23:05:57] *** Joins: locks (sid130@moz-5F4AA75A.irccloud.com)
[23:06:28] <brson> vadimcn: i'm going to submit a pr that uses c++ for android unwinding, but please do continue to investigate
[23:06:57] <vadimcn> brson: did that, but configure didn't find ADB,so I added it manually in build/config.mk
[23:07:53] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[23:09:44] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[23:10:09] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[23:10:12] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[23:10:20] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[23:10:40] *** Joins: ptc1 (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[23:10:41] *** Quits: ptc1 (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Client exited)
[23:11:00] *** Joins: wycats (wycats@moz-DBE30632.hsd1.or.comcast.net)
[23:11:05] <wycats> hello folks
[23:11:14] <wycats> the time has come to investigate this SEGV
[23:11:17] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[23:12:00] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Ping timeout)
[23:12:11] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:12:12] <wycats> who was the one that wanted me to paste the LLVM IR
[23:12:23] <wycats> cmr: I think it was you
[23:12:46] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[23:13:00] <zxcdw> do it!
[23:13:01] *** Joins: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP)
[23:14:02] *** Quits: rca (rcatolino@moz-D0B9B101.adsl.proxad.net) (Ping timeout)
[23:14:32] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[23:14:44] <wycats> hm so interestingly, I'm still getting the SEGV but now I'm seeing the same pointer on both side
[23:14:47] <wycats> so that's good
[23:18:42] <wycats> hm... so now I have been able to reproduce the different pointer on different sides problem
[23:18:44] <brson> wycats: if you have a working and a nonworking version the the IR of each would be helpful
[23:18:50] <wycats> brson: awesome
[23:18:54] <wycats> brson: remind me how to get the IR again?
[23:18:54] <brson> wycats: have you run valgrind on this program?
[23:19:03] <brson> rustc --emit-llvm -S
[23:19:13] <brson> the memory sounds pretty fishy
[23:19:24] <wycats> brson: I've now gotten to the point where I can reproduce the same and different pointers
[23:19:30] <wycats> adding a lifetime causes a different pointer
[23:20:33] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[23:21:34] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[23:22:16] <wycats> https://gist.github.com/wycats/bb0ab7c24a4c6d43d804
[23:22:38] <wycats> https://gist.github.com/wycats/bb0ab7c24a4c6d43d804/raw/93c21d21a92e03bdc5790a2ce848de0ea6ab5593/different-pointer.txt - different pointer
[23:22:47] <wycats> https://gist.github.com/wycats/bb0ab7c24a4c6d43d804/raw/50d21db3c07ecee21b18f91de067b81d1224c191/same-pointer.txt - same pointer
[23:22:56] <wycats> note that I had to change the return value
[23:25:23] <dbaupp> wycats: do you have the code for the two cases too?
[23:25:25] *** Joins: tupshin_ (quassel@moz-54DE2E9C.du.xdsl.is)
[23:25:28] <wycats> sure
[23:25:32] <wycats> uno momento por favor
[23:26:36] <carter> is there any mechanism to write OS / Arch conditional code in rust rgith now?
[23:26:38] <brson> wycats: can you reproduce it with both functions returning the Option?
[23:27:01] <brson> wycats: the same pointer case is *correct* right? there's no bug at all in that case?
[23:27:11] <wycats> I can't return the option without a lifetime
[23:27:16] <wycats> since it's a borrowed string out of the trace
[23:27:21] <wycats> brson: I believe so
[23:27:35] <wycats> I believe that the same pointer case is working properly
[23:27:49] <carter> pcwalton: acrichto  is there any way to write code that has different defns depending on the OS / Arch / etc?
[23:28:09] <wycats> https://gist.github.com/wycats/bb0ab7c24a4c6d43d804
[23:28:15] <wycats> I added the code to the top of the two outputs
[23:28:17] <brson> wycats: in the incorrect case, is the C declaration declared to return a structure shaped like a Rust enum?
[23:28:33] <brson> wycats: the failing case is using an outparam to return the Option
[23:28:41] <brson> so we may not be doing the C ABI right
[23:28:42] <wycats> ahhhh
[23:28:46] <brson> or your decl may be wrong
[23:28:59] <SiegeLord> carter: The #[cfg] attribute is likely what you're looking for
[23:29:00] <wycats> I was told that Option<&str> was just a return value of a nullable Slice
[23:29:08] <SiegeLord> I think there's a macro too (forget what it is)
[23:29:17] <wycats> brson: so I need to use an out param in C?
[23:29:21] <brson> wycats: oh, heh. I think this a rust ABI bug
[23:29:23] <wycats> instead of a return value?
[23:29:24] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[23:29:37] <wycats> brson: ah, so I don't need an out param, because Rust shouldn't be using one
[23:29:39] <brson> our Option<pointer> is actually a struct that's pointer sized, *not* a pointer
[23:29:45] <brson> so that causes ABI problems with C code
[23:30:07] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[23:30:12] <brson> yeah, I believe you are right to thing it's a pointer, and Rust is wrong
[23:30:13] <wycats> brson: someone told me that I could always treat Option<any> as a nullable any in C
[23:30:17] <wycats> woot
[23:30:20] <wycats> is there a temporary workaround?
[23:30:37] <brson> if you want to fix it declare `struct Option { inner: pointer }` and return that probably
[23:30:41] <carter> SiegeLord: this? https://github.com/mozilla/rust/wiki/Doc-attributes
[23:30:52] <brson> that should make your C code use an outpointer for the return
[23:30:54] <wycats> brson: say more
[23:31:02] <wycats> I don't know what an outpointed is
[23:31:03] <wycats> :(
[23:31:06] <wycats> outpointer
[23:31:21] <SiegeLord> carter: Just the conditional compillation parts of that
[23:31:29] <wycats> brson: talk to me like a 3 year old
[23:31:50] <brson> In C structures are often returned by the caller allocating space on the stack, then passing a pointer to that stack slot to the callee. the callee then writes directly into the callers stack. that pointer is an out pointer
[23:31:55] <SiegeLord> The rest looks horribly outdated
[23:31:55] <carter> ok
[23:32:16] <brson> wycats: in your IR you can see the first param is "%"enum.std::option::Option<&'static str>[#1]"* sret"
[23:32:28] <brson> wycats: that's saying make the first parameter a 'struct return' (or something)
[23:32:29] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[23:32:57] <brson> wycats: C just does that under the hood automatically when you make a function return a struct
[23:32:58] <wycats> brson: yeah I get that
[23:33:07] <dbaupp> brson: Option<&'static str> isn't pointersized
[23:33:21] <bvssvni> what is the replacement of 'start_on_main_thread'?
[23:33:23] <dbaupp> rusti: std::mem::size_of::<Option<&str>>()
[23:33:25] -rusti- 24u
[23:33:34] <brson> wycats: so if you declare your C redeclaration of skilight_get_trace_name to return a struct instead of a pointer, it should match what Rust is doing
[23:34:31] <wycats> brson: right now my prototype is RustSlice * skylight_trace_get_name(RustTrace) <= RustTrace is a typedef of void *
[23:34:38] <wycats> so you're saying to remove the * ?
[23:34:39] <brson> dbaupp: oh right. &str isn't even a pointer
[23:34:43] *** Quits: jdm (jdm@moz-3FFA85CA.dsl.teksavvy.com) (Quit: Lost terminal)
[23:35:02] <dbaupp> I guess the option could be 2 words rather than 3 though
[23:35:20] <wycats> but what would it look like in C if Rust returns None?
[23:35:26] <wycats> if it's not a pointer
[23:35:50] <brson> wycats: i'm not sure now. didn't realize this was Option<&str> and not &somethingelse
[23:36:01] <wycats> brson: tl;dr I am pwned?
[23:36:02] <wycats> :P
[23:36:07] <brson> no, we'll figure it out
[23:36:19] <dbaupp> wycats: it's a 3 word struct in C
[23:37:04] *** Joins: Meistarin (sid19523@moz-A42E5B7B.irccloud.com)
[23:37:07] <brson> dbaupp is probably right. your Option<&str> looks something like `struct OptionRustSlice { discrim: uintptr_t, slice: RustSlice }`
[23:37:18] <brson> then return that instead of `RustSlice*`
[23:37:45] <brson> discrim will be 0 for None
[23:38:09] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[23:38:13] <wycats> brson: so create that struct in C?
[23:38:23] <wycats> and return that?
[23:39:20] <olsonjeffery> wycats: maybe write a quick program and compile it and then look at it w/ pahole to confirm the layout?
[23:39:30] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Quit: Leaving...)
[23:39:32] <wycats> not familiar with pahole
[23:39:37] * wycats noob :( :( :(
[23:40:11] <brson> wycats: yes
[23:40:19] <brson> wycats: but with recent enum changes discrim is probably actually uint8_t
[23:40:22] <brson> not uintptr_t
[23:40:23] <olsonjeffery> it's a linux cli util to show you the memory layout of structs in a given bin.. pretty straightforward
[23:41:40] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:41:41] <wycats> brson: and this explains why the pointer was off, because I was actually looking at a phantom first out param?
[23:41:59] *** jorendorff is now known as jorendorff_away
[23:42:32] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[23:42:46] <brson> wycats: i think you would have been passing the trace pointer in the outparam and your trace pointer would be whatever happened to be in the second argument register
[23:43:09] <brson> but I'm not familiar enough with the ABI to know for sure
[23:43:32] <wycats> brson: seems legit
[23:43:36] <wycats> trying this out
[23:43:49] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[23:43:57] <wycats> what package in ubuntu is pahole in?
[23:44:01] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:44:57] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[23:45:30] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:46:46] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[23:46:53] <wycats> brson: I'm trying https://gist.github.com/anonymous/8229589#file-skylight_native-c-L55-L58
[23:47:02] <wycats> and using it down here: https://gist.github.com/anonymous/8229589#file-skylight_native-c-L231
[23:47:13] <wycats> getting skylight_native.c:231:3: error: invalid initializer
[23:47:20] <wycats> am I just being an idiot?
[23:48:14] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[23:48:23] <olsonjeffery> wycats: it's in the `dwarves` package
[23:48:45] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[23:49:00] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[23:49:11] <brson> wycats: change the declaration of skylight_trace_get_name to return OptionRustSlice at least
[23:49:26] *** Quits: canhtak (canhtak@moz-59105D0.wl.t.ulaval.ca) (Quit: canhtak)
[23:50:19] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[23:50:38] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[23:50:42] *** Quits: payload (Mibbit@moz-49A381BD.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[23:50:59] <wycats> ah there we go
[23:51:34] <wycats> brson: is this something Rust will fix?
[23:52:46] <wycats> hm still segving
[23:52:54] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[23:53:42] <brson> wycats: not as far as I know. &str is a 'fat pointer' - it's always two words and doesn't do the null pointer optimization when stuffed in an Option, and I haven't heard any talk of expanding that optimization to more complex cases like this
[23:53:55] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[23:53:57] <wycats> brson: so this is another use-case for a rust.h
[23:54:15] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[23:54:21] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[23:54:44] <wycats> OptionSlice and IsNone
[23:55:06] <brson> wycats: *maybe*. The representation of Option depends on what's inside it so we can't account for everything, but yeah you could export an OptionSlice type
[23:56:15] <wycats> hm... still seeing different pointers inside and outside of Rust
[23:56:25] <wycats> Trace Pointer: 0x10a1510
[23:56:29] <wycats> Pointer in Rust: 0x7fffffffc7c0
[23:56:44] <brson> :(
[23:56:59] <wycats> hmmmm
[23:57:25] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:57:41] <wycats> brson: the nice thing about a rust.h as part of Rust itself is that Rust could keep the macros up to date
[23:57:57] <wycats> so if the implementation changed, it wouldn't break C code that relied on internals
[23:58:11] <brson> yes
[23:58:34] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[23:58:34] *** ChanServ sets mode: +o tjc
[23:59:03] *** Joins: valenting (Thunderbir@moz-9DFB83CF.residential.rdsnet.ro)
[23:59:08] <brson> wycats: do you have clang? if you compile your file with -emit-llvm you can probably see what it thinks the signature of trace_get_name is
[23:59:30] <wycats> you mean skylight_trace_get_name?
[23:59:31] *** Joins: canhtak (canhtak@moz-59105D0.wl.t.ulaval.ca)
[23:59:41] <brson> yeah
[23:59:50] <wycats> brson: I'm using mkmf in Ruby
[23:59:56] <wycats> I think I can change CC to be clang?
