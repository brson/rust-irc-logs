[00:01:44] *** Joins: kmcguire (kmcguire@moz-uqq.d7l.207.68.IP)
[00:02:48] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[00:19:26] *** Joins: mib_biilxi (Mibbit@moz-juv.9o3.252.72.IP)
[00:19:50] <brson> last week was even slower than the previous
[00:19:58] <brson> the rust fad may be over
[00:24:11] *** Quits: mib_biilxi (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:25:14] <bstrie> brson: oh no not our fad! slower how?
[00:25:21] <brson> oh, but there were a billion new rfc's proposed. yay
[00:25:36] <brson> bstrie: 79 PR's merged. 6 new contribs
[00:25:42] <brson> 1 billion RFC PR's
[00:25:49] <bstrie> brson: last week only had 3 new contribs
[00:26:02] <bstrie> fewer PRs is a good thing, it means the language is done!
[00:26:05] <brson> that's not what my numbers say
[00:26:08] <bstrie> once it gets to zero we can go home
[00:26:34] <bstrie> there is, theoretically, only finite work that needs to be done
[00:27:09] <brson> oh, my bad. it's actually less than 1 billion
[00:28:50] <bstrie> brson: I'm willing to say that the loss of all the dev-related pages on the wiki is a factor in fewer new contributors
[00:29:46] <brson> bstrie: just this weekend i wanted to know the command to install the dev prerequisites on debian, which were on the wiki
[00:30:07] <brson> has anybody proposed a plan for a new rust wiki?
[00:30:17] <steveklabnik> the plan is to move the info in-tree, via READMEs
[00:30:19] <steveklabnik> iirc
[00:30:39] <brson> i have content like the fott list that i do not want in tree
[00:30:47] <steveklabnik> and don't forget about https://github.com/rust-lang/rust-wiki-backup <-
[00:31:02] <bstrie> the wiki doesn't need to be entirely gone, stuff like FOTT is perfect for it
[00:31:17] <bstrie> if you're worried about licensing, just throw a creative commons things on every page
[00:31:30] <steveklabnik> no it's just that wikis always end up terrible
[00:31:32] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[00:31:37] <steveklabnik> (at least for me anyway)
[00:31:55] * steveklabnik doesn't want to argue about the wiki right now though :)
[00:32:14] <bstrie> steveklabnik: I am in agreement that the wiki needed to be purged, but there do exist miscellaneous things that need little editing and retain long-term relevance that a wiki is fine for
[00:33:13] <bstrie> I agree that it would be good to get "how to develop rust" docs in-tree, so that you can clone the repo and have all the instruction you need contained within
[00:33:48] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:33:56] <bstrie> but in the meantime we have to come to terms that the wiki backup has zero discoverability, and new users are suffering for it
[00:34:21] <nrc> I find in-tree docs hard to find, in general - you need to know something exists to look for it
[00:34:41] <steveklabnik> i haven't really heard new users asking for stuff that was in the wiki
[00:35:03] <nrc> this can be solved by having an index, but that gets out of date and you have all the problems of an out-of-tree wiki but with a more heavyweight process for making changes
[00:35:21] <nrc> I used to refer people to the testing page on a fairly regular basis
[00:35:21] <bstrie> steveklabnik: because when people can't find it via google it's easy to presume that it doesn't exist
[00:35:50] <bstrie> I don't believe that foreknowledge of IRC should be a prereq of rust development
[00:36:08] <steveklabnik> so, this is speculation
[00:36:14] <steveklabnik> sorry, said i wasn't gonna argue about the wiki
[00:36:18] <steveklabnik> i am instead going to eat dinner
[00:36:19] <steveklabnik> :)
[00:37:40] * kmc plays with a mock-up of a macro-based typestate compiler
[00:37:49] <kmc> https://gist.github.com/kmcallister/1707df01324bd2cabdc4
[00:41:20] *** Quits: w66745 (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[00:43:10] <eddyb> nmatsakis liked that idea of making Trait -> T sugar for Trait<Output=T>, not sure if there were any issues with it
[00:43:30] <eddyb> State::get_x<V = True> could be State::x -> True then
[00:43:40] <bstrie> kmc: macros can expand to multiple items now?
[00:43:51] <eddyb> bstrie: that's pretty old
[00:44:05] <bstrie> shows how much I've been paying attention to macros :P
[00:44:21] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[00:46:48] *** Joins: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at)
[00:47:36] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:50:30] <bstrie> kmc: is `S<S<Z>>>` an encoding for two? :P
[00:50:54] *** Quits: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at) (Ping timeout: 121 seconds)
[00:51:31] <bstrie> I suppose you could have a nat!(2) macro to do that for you, though not sure what the recursion limit is
[00:51:33] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0a1/20150315030236])
[00:52:55] <kmc> bstrie: yes. also in reality you'd probably use binary numbers, not unary
[00:53:01] <kmc> freebroccolo has been working on that kind of stuff
[00:53:15] <kmc> hopefully we'll have data kinds soon enough
[00:53:16] <reem> see: https://github.com/epsilonz/shoggoth.rs
[00:54:46] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[00:54:46] *** ChanServ sets mode: +o nrc
[00:55:13] <kmc> it should be possible to express lower bounds / upper bounds on nats in this system
[00:57:44] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[00:59:52] *** Quits: ecr (chatzilla@moz-lbb.gon.175.205.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 36.0.3/20150319201009])
[01:00:19] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[01:00:19] *** ChanServ sets mode: +o pcwalton
[01:08:37] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-re6slh.dynamic.qsc.de) (Ping timeout: 121 seconds)
[01:12:17] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:13:55] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[01:17:46] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[01:27:41] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:28:47] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[01:31:41] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[01:47:33] *** Joins: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at)
[01:49:52] <eddyb> playbot: fn foo() -> Box<Deref> { panic!() }
[01:49:53] -playbot- <anon>:14:25: 14:30 error: use of undeclared type name `Deref`
[01:49:53] -playbot- <anon>:14         fn foo() -> Box<Deref> { panic!() }
[01:49:53] -playbot- output truncated; full output at: http://bit.ly/1BJAP3O
[01:50:03] <eddyb> playbot: fn foo() -> Box<Fn> { panic!() }
[01:50:04] -playbot- <anon>:14:25: 14:27 error: angle-bracket notation is not stable when used with the `Fn` family of traits, use parentheses [E0215]
[01:50:04] -playbot- <anon>:14         fn foo() -> Box<Fn> { panic!() }
[01:50:04] -playbot- output truncated; full output at: http://bit.ly/1Hw3FNa
[01:50:12] <eddyb> playbot: fn foo() -> Box<std::ops::Deref> { panic!() }
[01:50:14] -playbot- ()
[01:50:32] <eddyb> nmatsakis: ^ why can you omit associated types in trait objects?
[01:51:40] *** Quits: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at) (Ping timeout: 121 seconds)
[01:52:41] <nrc> it's a valid type, essentially existential in the assoc types
[01:52:57] <eddyb> nrc: it's bottom
[01:53:16] <eddyb> unless...
[01:53:36] <eddyb> playbot: fn foo() -> Box<std::ops::Deref<Target=()>> { panic!() } fn bar() -> Box<std::ops::Deref> { foo() }
[01:53:37] -playbot- <anon>:14:101: 14:106 error: mismatched types:
[01:53:37] -playbot-  expected `Box<core::ops::Deref>`,
[01:53:37] -playbot- output truncated; full output at: http://bit.ly/1BJBq5B
[01:54:28] <eddyb> nrc: nope, no way to create a value of that type
[01:55:14] <eddyb> erroring in astconv would be easy and it would spare me of having to error during *attempted* selection
[01:55:39] <nrc> I thought you could coerce a concrete type to a trait object type where the triat object does not need to have the assoc types specified
[01:55:55] <nrc> also maybe more useful as a bound?
[01:56:43] <eddyb> nrc: you can't use trait *types* as bounds
[01:57:05] <eddyb> right now we error if you don't have all the types specified
[01:57:24] <eddyb> playbot: fn foo() -> Box<std::ops::Deref<Target=()>> { Box::new(Box::new(())) }
[01:57:26] -playbot- ()
[01:57:26] <nrc> I meant the trait without assoc types, not just the trait object
[01:57:39] <eddyb> yeah, but that's just the same syntax
[01:57:47] <eddyb> playbot: fn foo() -> Box<std::ops::Deref> { Box::new(Box::new(())) }
[01:57:49] -playbot- <anon>:14:44: 14:66 error: the value of the associated type `Target` (from the trait `core::ops::Deref`) must be specified [E0191]
[01:57:49] -playbot- <anon>:14         fn foo() -> Box<std::ops::Deref> { Box::new(Box::new(())) }
[01:57:49] -playbot- output truncated; full output at: http://bit.ly/1Hw5qdi
[01:58:51] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[01:58:52] <nrc> hmm, I would have expected that last one to work, if nothing else
[01:58:58] <eddyb> nrc, nmatsakis: ^^ should I preserve that error and its current triggers, make it always trigger in astconv for trait objects, or simply allow incomplete trait objects?
[01:59:20] <eddyb> nrc: well, that error is why I'm even asking about this behavior
[01:59:27] <scott> playbot: fn foo(x: &std::ops::Deref) -> &<std::ops::Deref as std::ops::Deref>::Target { x.deref() }
[01:59:28] -playbot- error: internal compiler error: type_of with ty_projection
[01:59:28] -playbot- note: the compiler unexpectedly panicked. this is a bug.
[01:59:28] -playbot- output truncated; full output at: http://bit.ly/1BJC3vR
[01:59:33] <scott> \o/
[01:59:45] <nrc> I remember discussing trait objects with nmatsakis and aturon and there were defintely reasons to have incomplete trait object types, but I can't remember what those were
[02:00:11] <eddyb> it doesn't make sense to me to check it on casting when there are 0 ways to create an incomplete trait object
[02:00:14] <eddyb> scott: uhm...
[02:00:35] <eddyb> scott: std::ops::Deref as std::ops::Deref is not exactly valid...
[02:00:47] <scott> eddyb: at first I left the return type as ()
[02:00:57] <scott> rustc told me it found &<std::ops::Deref as std::ops::Deref>::Target
[02:01:06] <eddyb> that's just completely broken
[02:01:15] <nrc> no, I am assuming there should be some way to create such objects, if there is not (and that is intentional), then I agree checking for the cast error is silly
[02:01:59] <eddyb> nmatsakis: how do you expect to be able to implement a trait for a trait object given associated types? you can proxy methods that take self, but you can't do that with types
[02:02:12] <eddyb> or rather...
[02:02:37] <eddyb> <Deref<Target=T> as Deref>::Target == T
[02:02:52] <eddyb> but Deref with no associated type bindings cannot implement Deref
[02:03:09] <eddyb> nrc: I'd be very interested in a refutation of the above
[02:03:54] <eddyb> I'll try to move the error to astconv
[02:08:55] *** Quits: eddyb (eddyb@moz-dhp.t65.25.188.IP) (Ping timeout: 121 seconds)
[02:16:05] <freebroccolo> bstrie kmc: the current type level nat stuff (for shoggoth) I'm working on uses recursively run-length encoded nats (similar to elias gamma codes) to encode towers of exponentials closed under arithmetic operations… you can actually represent numbers larger than machine words efficiently with it…
[02:17:45] <freebroccolo> I haven't committed that stuff to the shoggoth repo yet but probably will soon…
[02:19:01] <freebroccolo> it generalizes to integers and dyadic rationals too… you could even do reals with some work
[02:20:13] <bstrie> freebroccolo: I'm curious how often you hit recursion limits :)
[02:20:21] <bstrie> I thought our limit was, like, 60
[02:20:33] <bstrie> something absurdly low
[02:21:48] <freebroccolo> bstrie: well, even with the plain binary nats implementation, I was able to get indexed containers to work with thousands of elements without hitting the limit: https://gist.github.com/freebroccolo/5f43b737cc1c28c96896
[02:21:50] <kmc> :O
[02:21:56] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[02:22:21] <freebroccolo> that was based on the encoding that I suggested in the type macro rfc…
[02:22:49] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[02:23:11] <freebroccolo> I think what's more of a potential problem than the recursion limit is the slowdown caused by associated type projections, the one that shows up for iterator chaining
[02:27:05] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:28:40] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:28:40] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:28:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:28:53] *** Quits: mystor_ (mystor@moz-5cj.r78.15.130.IP) (Connection closed)
[02:30:23] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[02:31:02] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[02:35:45] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:42:52] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:42:55] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:43:35] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:43:35] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:43:36] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:47:07] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[02:47:07] *** ChanServ sets mode: +o pcwalton
[02:47:23] *** Joins: eddyb (eddyb@moz-dhp.t65.25.188.IP)
[02:48:19] *** Joins: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at)
[02:49:42] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[02:49:59] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[02:49:59] *** ChanServ sets mode: +o pcwalton
[02:50:18] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[02:51:03] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:51:48] <eddyb> freebroccolo: did you mean to impl Deref & DerefMut here? https://gist.github.com/freebroccolo/5f43b737cc1c28c96896#file-indexed-rs-L219-L235
[02:52:18] <eddyb> freebroccolo: the stuff in std::borrow is annoying because it sounds like language-level when it's not at all
[02:52:26] *** Quits: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at) (Ping timeout: 121 seconds)
[02:53:20] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:54:23] <freebroccolo> hmm, IIRC I was mostly following the implementation from Vec but you could be right
[02:54:59] <eddyb> that is for Cow<[T]>
[02:55:13] <freebroccolo> borrow is, you mean?
[02:55:24] <eddyb> yupp. I guess you want both borrow and deref, in any case
[02:56:19] <Gankro> Will anything be stabilized after beta? Or is beta basically == stable modulo bugs?
[02:56:21] <freebroccolo> yeah, I see deref in the vec sources… not sure why I did it that way. Probably just saw borrow first somewhere
[02:56:33] <eddyb> freebroccolo: the `Add: Fn(N, M) -> R` notation is interesting. would you consider `N: Add(M) -> R` to be worse?
[02:56:50] <eddyb> or Add<M> -> R
[02:56:51] <reem> Gankro: I highly doubt everything will be ready for beta
[02:57:01] <reem> Gankro: A lot of the corner case concerns and library auditing hasn't been done yet
[02:57:09] <reem> speaking of which...
[02:57:10] <eddyb> (I am trying to look for reasons to add the Trait -> Output sugar)
[02:57:13] <freebroccolo> eddyb: well, it works that way because Add is a unit struct with a Fn impl… you could do it the other way but it wouldn't work out as nicely elsewhere
[02:57:38] <eddyb> freebroccolo: well, you can't do it the other way right now, because Trait -> Output is an error
[02:57:49] <freebroccolo> I wrote a macro that is a little bit like the type families syntax for Haskell… so you can define a bunch of Add impls by "match arms" at once
[02:58:14] <freebroccolo> I mean with explicit projections… that's how I used to do it but it's really hard to read
[02:58:48] <eddyb> yeah, no, we don't want that
[02:59:37] <freebroccolo> what I would really love is sealed traits… most of those bounds would be unnecessary if you could tell the compiler the domain is closed
[02:59:55] <freebroccolo> it's possible to generate them with a macro but that's just more magic
[03:00:05] <eddyb> hmm
[03:00:46] <scott> you want sealed traits for the same reason people wanted closed type families in Haskell, right?
[03:00:49] *** Joins: hoverbear (hoverbear@moz-csaicn.gv.shawcable.net)
[03:01:02] <freebroccolo> scott: yeah
[03:01:05] <eddyb> freebroccolo: what if Nat inherited from traits implemented on the concrete types?
[03:01:12] <freebroccolo> also for overlapping patterns
[03:01:15] <eddyb> would that cause some weird recursion?
[03:01:47] *** Joins: brson (brson@moz-pmd945.tmodns.net)
[03:01:47] *** ChanServ sets mode: +o brson
[03:01:56] <freebroccolo> eddyb: which traits are you thinking of? not sure I get what you mean
[03:02:16] <eddyb> freebroccolo: the arithmetic/comparison ones
[03:02:46] <eddyb> the ones you want implicit given types that implement Nat
[03:02:57] <eddyb> actually, they're not trait right now
[03:03:02] <eddyb> freebroccolo: this is confusing!
[03:03:04] <freebroccolo> oh… hmm. I'm not sure.
[03:03:39] <eddyb> what I'm thinking of requires HKT
[03:04:00] <freebroccolo> You can make them implicit for some things… like Nat things are put in a wrapper struct where the contents must implement a Reflect trait that lets you convert them to usize
[03:04:14] <freebroccolo> but it doesn't work for things like Add because you need another operand and it's not there yet
[03:04:34] <freebroccolo> and we don't have fancy enough types to do some magic there, AFAIK
[03:05:05] <aturon> Gankro: when you ask about beta, do you mean in terms of what ships for 1.0 specifically?
[03:05:07] <freebroccolo> Actually…
[03:05:09] <reem> Is it firmly too late to do String => StrBuf and str => Str, in light of Path and PathBuf?
[03:05:42] <freebroccolo> There _is_ a way to avoid those bounds by encoding what it means to be closed/total in the types… I thought about doing that but it's pretty complicated and I'm not sure it's worth it.
[03:06:03] <eddyb> reem: I remember StrBuf, it wasn't pretty
[03:06:06] <Eridius> the existence of Path/PathBuf does not have any implications for String/str.
[03:06:36] <reem> Path/PathBuf creates a reasonable convention for unsized-view/owned-growable
[03:06:43] <reem> which str/String does *entirely* differently
[03:06:45] <Gankro> aturon: I'm not sure what you mean
[03:07:08] <aturon> Gankro: so, we will continuously be adding new features as unstable and stabilizing them on an ongoing basis
[03:07:15] <Gankro> aturon: ok
[03:07:25] <aturon> Gankro: but it sounded like maybe your question was about the "1.0" cutoff specifically
[03:07:28] <Gankro> So is there any problem with leaving the entry sugar unstable?
[03:07:46] <aturon> Gankro: well, the main tradeoff right now is trying to get as much of the ecosystem onto stable Rust as we can, prior to 1.0,
[03:07:53] <Gankro> I'm just kinda paranoid
[03:07:55] <aturon> but I'm happy to defer to your judgment on the entry sugar
[03:07:59] <aturon> yes, believe me, i understand :)
[03:08:45] <Gankro> aturon: my main concern is I'm waffling on whether .entry(key).or_insert(value) is better/worse than .get_default(key, value)
[03:08:55] <aturon> (in terms of your comment, it is true that we've been somewhat loose with changing `#[stable]` APIs in the past, but this has slowed way down since alpha, and should basically stop after beta)
[03:09:00] <aturon> oops, g2g, happy to discuss more later
[03:09:19] <Gankro> Stupid aturon family ;_;
[03:09:24] <Gankro> so lonely
[03:14:38] *** Quits: enjolras (enjolras@moz-p7mo8q.ovh) (Ping timeout: 121 seconds)
[03:15:51] *** Quits: scialex (scialex@moz-if7.du5.16.138.IP) (Ping timeout: 121 seconds)
[03:17:58] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:22:01] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[03:25:18] *** Joins: garming (garming@moz-pqd1u2.xtra.co.nz)
[03:25:52] *** Quits: zz_kimundi (kimundi@moz-rl5lt8.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:26:15] *** Quits: Kxepal (Miranda@moz-hj3bnl.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[03:27:21] *** Joins: mortishadf (Mibbit@moz-juv.9o3.252.72.IP)
[03:28:18] *** Joins: Kxepal (Miranda@moz-7r0agj.pppoe.mtu-net.ru)
[03:29:00] *** Joins: zz_kimundi (kimundi@moz-7lq6bi.dip0.t-ipconnect.de)
[03:29:01] *** zz_kimundi is now known as kimundi
[03:29:44] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[03:30:03] *** Quits: mortishadf (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:31:54] *** Quits: brson (brson@moz-pmd945.tmodns.net) (Quit: leaving)
[03:35:08] *** Quits: eddyb (eddyb@moz-dhp.t65.25.188.IP) (Ping timeout: 121 seconds)
[03:39:33] *** Joins: brson (brson@moz-pmd945.tmodns.net)
[03:39:33] *** ChanServ sets mode: +o brson
[03:45:03] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[03:49:05] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Ping timeout: 121 seconds)
[03:49:06] *** Joins: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at)
[03:50:57] <sfackler> acrichto: ping
[03:53:13] *** Quits: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at) (Ping timeout: 121 seconds)
[03:54:45] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Ping timeout: 121 seconds)
[03:55:32] *** Quits: brson (brson@moz-pmd945.tmodns.net) (Quit: leaving)
[04:03:20] *** Joins: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP)
[04:06:26] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[04:06:34] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[04:06:43] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:16:33] *** Joins: semarie (semarie@moz-29eeuu.puckey.org)
[04:16:33] *** Quits: semarie (semarie@moz-29eeuu.puckey.org) (Z-Lined: [gavin] botnet-20150302 (ID: IS7UJQVB8W))
[04:17:04] <acrichto> sfackler: pong
[04:23:47] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:24:11] <sfackler> acrichto: what are the conventions on crate names now?
[04:24:36] <acrichto> foo-bar for package names, which translates to foo_bar
[04:24:36] <acrichto> win 29
[04:25:29] <sfackler> should foo_bar packages migrate/are there plans for a magic migration path on crates.io?
[04:26:17] <huon> I suspect it's not possible to migrate
[04:26:28] <acrichto> yes it is not possible to migrate
[04:26:34] <acrichto> you cannot upload both foo_bar and foo-bar
[04:27:05] *** Joins: semarie (semarie@moz-75bn3d.nullbyte.me)
[04:27:11] <reem> If I am the author of a package with a hyphen, do I need to do anything?
[04:27:35] <acrichto> nah you should be fine
[04:28:09] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[04:28:34] *** Joins: mib_w0ybrf (Mibbit@moz-juv.9o3.252.72.IP)
[04:29:03] <reem> cool
[04:29:19] <huon> sfackler: I believe crates.io handles them transparently the same, other than display, e.g. https://crates.io/crates/slow-primes
[04:29:44] <reem> I'm glad we didn't eliminate - from package names at the end of this. For completely aesthetic reasons I prefer them.
[04:30:20] *** Quits: mib_w0ybrf (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:30:21] <acrichto> sfackler: yes actually the way that it's set up I believe that you'll be able to depend on `unix-socket` and it'll match unix_socket
[04:30:21] <sfackler> so hypothetically if someone went into the crates.io backend and renamed foo_bar to foo-bar, would that be transparent to consumers of the crate?
[04:30:34] <acrichto> I think I'd have to update the index as well
[04:30:37] <acrichto> but I think it's plausible yes
[04:30:43] <sfackler> (cough cough) :P
[04:32:16] <huon> if only it exposed an SQL injection vector, then we could do it ourselves :P
[04:33:03] <huon> acrichto: \o/ https://crates.io/keywords/FFT https://crates.io/keywords/fft
[04:33:10] <huon> acrichto: you deployed it!
[04:33:19] <acrichto> :D
[04:33:41] <huon> after all my broken code...
[04:34:02] <acrichto> lol no worries
[04:34:09] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[04:34:12] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[04:34:17] *** Joins: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP)
[04:38:10] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[04:38:39] *** Joins: eddyb (eddyb@moz-dhp.t65.25.188.IP)
[04:42:02] <quantheory> huon: What did you mean by "old-`transmute` like errors"?
[04:42:07] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:42:25] *** Quits: marsel (user@moz-6n3.f56.180.94.IP) (Ping timeout: 121 seconds)
[04:43:04] <quantheory> I guess I'm a new person and don't know about old things.
[04:43:20] <huon> quantheory: transmute::<T, U> has a restriction that T and U have the same size. Previously this was only checked in trans and so generic instantiations of external functions could generate errors
[04:43:37] <huon> e.g. fn wrapper<T, U>(x: T) -> U { transmute(x) }
[04:43:59] <huon> calling wrapper::<u16, u8> in some other library would result in horrible error messages
[04:44:16] <huon> (basically the same sort of failings as C++ generic templates)
[04:44:49] <quantheory> Hmm
[04:46:50] *** bstrie is now known as huom
[04:46:55] <quantheory> I'm still sort of toying with ideas, but I've wanted to try to design rules around use of constants in generics to avoid this.
[04:47:59] *** huom is now known as bstrie
[04:48:14] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[04:48:49] <huon> yeah, my question was entirely directed to niko since he was proposing the generalisations :)
[04:49:51] *** Joins: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at)
[04:51:01] <quantheory> Yeah, I was just curious because I have a draft RFC that I'll probably put up one of these days. Basically to add constraints to generic constants that are somewhat analogous to what we already do with putting bounds on types.
[04:53:58] *** Quits: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at) (Ping timeout: 121 seconds)
[04:56:05] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[04:56:08] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[04:56:09] <quantheory> Something like, for associated types, you can have "T::U = usize" as a bound, so why not "T::CONST = 4" as a bound (or more generic things like ranges). A lot of possible complications here, though.
[04:58:46] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[05:01:56] <eddyb> quantheory: oh! you're here! but I have to go to school :(
[05:02:44] *** Quits: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP) (Connection closed)
[05:02:50] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:02:59] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:03:04] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:04:05] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[05:10:02] <quantheory> eddyb: Too bad!
[05:10:18] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[05:10:47] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[05:10:47] *** ChanServ sets mode: +o pcwalton
[05:10:52] <quantheory> I'm a night owl, and you are at a very different longitude I guess, because this is the only time we run into each other.
[05:20:56] *** Quits: hoverbear (hoverbear@moz-csaicn.gv.shawcable.net) (Quit: Time to hibernate.... ZzZz...)
[05:22:26] *** Joins: marsel (user@moz-3o2.end.162.188.IP)
[05:23:25] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:31:03] *** Quits: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP) (Quit: Leaving)
[05:33:38] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[05:38:08] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[05:40:56] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:47:25] *** Quits: O01eg (o01eg@moz-spb2m1.tap7.4n8f.2698.2a02.IP) (Client exited)
[05:49:04] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (A TLS packet with unexpected length was received.)
[05:49:10] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[05:50:37] *** Joins: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at)
[05:52:06] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:54:29] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:54:40] *** Quits: dinfuehr (dinfuehr@moz-4pfs7r.highway.telekom.at) (Ping timeout: 121 seconds)
[05:56:37] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:57:51] *** Joins: jmitchell (user@moz-o8p.pug.156.104.IP)
[06:04:24] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:05:03] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:06:28] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:07:03] *** Quits: jmitchell (user@moz-o8p.pug.156.104.IP) (A TLS packet with unexpected length was received.)
[06:07:36] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[06:08:36] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:09:48] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:10:48] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[06:10:56] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[06:10:56] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:12:59] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:19:39] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:21:31] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[06:22:57] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[06:25:47] *** Joins: ytain (ytain@moz-vhndj2.dsl.teksavvy.com)
[06:27:19] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:27:41] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[06:27:49] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[06:29:00] <sfackler> acrichto: huon: https://github.com/rust-lang/log/issues/34
[06:29:15] <huon> sfackler: whoops
[06:29:25] <doener> tiffany, cmr: we _are_ using the lifetime start/end intrinsics. My first implementation was messed up, but the second one, we're using that since summer last year
[06:29:33] <cmr> doener: ah, ok.
[06:30:13] <huon> sfackler: ok, yanked 0.2.6
[06:30:44] <huon> sfackler: it's just log that had breaking changes right? do I need to also bump env?
[06:30:52] <sfackler> it's just log, yeah
[06:30:58] <sfackler> not sure if env should be bumped or not
[06:31:08] <sfackler> to "keep up" or whatever
[06:31:38] <eddyb> doener: why can't I get LLVM to do something nasty on UB q_q?
[06:31:45] <sfackler> might want to just to make the split more clear?
[06:32:17] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[06:32:20] <eddyb> doener: I want to PoC some bad static mut stuff and LLVM keeps being innocent
[06:33:29] <huon> sfackler: ok, doing that too
[06:33:51] <eddyb> not to mention that FOO = FOO.take() is codegen'd in a very defensive way - I'm guessing we don't have all the information in trans to be able to tell between foo = foo.take() and foo = bar.take() (the same way borrowck can)
[06:35:50] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:35:51] *** Joins: jmitchel_ (jmitchell@moz-o8p.pug.156.104.IP)
[06:37:19] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[06:37:19] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[06:37:20] *** Joins: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP)
[06:38:19] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[06:44:00] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:49:57] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:52:22] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[06:56:17] *** Quits: eddyb (eddyb@moz-dhp.t65.25.188.IP) (Ping timeout: 121 seconds)
[06:56:36] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:57:45] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:01:05] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[07:01:25] *** Joins: canhtak (canhtak@moz-kcs.u0t.149.5.IP)
[07:01:44] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:02:09] *** Quits: ff (flaper87Moz@moz-g7hu5v.ip56.fastwebnet.it) (Ping timeout: 121 seconds)
[07:04:03] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[07:08:08] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:08:54] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[07:11:17] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:12:11] <doener> acrichto: what's with that QUEUE assertion? Is it known what's causing it?
[07:12:34] <acrichto> doener: https://github.com/rust-lang/rust/pull/23592
[07:12:41] <acrichto> in short, yes it's known :)
[07:13:01] <doener> ah, cool
[07:13:22] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:13:32] *** Quits: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP) (Connection closed)
[07:13:35] *** Joins: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP)
[07:14:43] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:15:26] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:15:45] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:17:29] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[07:18:21] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[07:21:18] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[07:21:39] *** Quits: canhtak (canhtak@moz-kcs.u0t.149.5.IP) (Client exited)
[07:21:57] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[07:26:27] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[07:31:06] *** Joins: canhtak (canhtak@moz-kcs.u0t.149.5.IP)
[07:31:07] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[07:31:32] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:32:09] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[07:33:43] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[07:33:52] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[07:33:53] *** ChanServ sets mode: +o nrc
[07:42:47] <doener> mov    0x8,%rsi -- how the heck can that segfault?
[07:44:00] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[07:46:15] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:46:32] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[07:46:47] *** Joins: kushal (kdas@moz-s3u5m7.202.sitibroadband.in)
[07:49:12] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[07:49:22] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:51:04] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[07:52:49] <doener> oh, no $, so it's trying to read from 0x8
[07:54:20] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:55:48] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:59:08] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[08:02:06] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:02:58] *** Joins: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp)
[08:03:35] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[08:04:01] *** Joins: zmack_ (zmack@moz-htpein.home.aster.pl)
[08:05:43] *** Quits: reem (reem@moz-3ugurj.coob.q2h1.0009.2601.IP) (Connection closed)
[08:07:16] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Ping timeout: 121 seconds)
[08:08:03] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[08:23:15] *** Quits: rprichard (rprichard@moz-ekp75j.en8f.d045.0009.2601.IP) (Connection closed)
[08:23:18] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[08:24:39] *** Quits: ytain (ytain@moz-vhndj2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[08:25:38] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:26:35] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[08:27:33] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[08:30:05] *** Joins: pkondzior (uid768@moz-gsp5c1.uxbridge.irccloud.com)
[08:30:21] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[08:32:03] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[08:32:05] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[08:33:23] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Quit: Bye)
[08:34:26] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:40:43] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[08:40:43] *** Quits: kmcguire (kmcguire@moz-uqq.d7l.207.68.IP) (Ping timeout: 121 seconds)
[08:43:04] *** Joins: imperio (Mibbit@moz-opqtbe.abo.bbox.fr)
[08:43:16] *** Joins: eibwen (eibwen@moz-u77b05.dip0.t-ipconnect.de)
[08:44:22] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[08:45:12] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[08:51:11] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:56:41] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[08:57:59] *** Joins: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP)
[08:58:04] *** Quits: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP) (Connection closed)
[08:58:24] *** Joins: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP)
[08:58:51] *** Joins: jmitche__ (jmitchell@moz-o8p.pug.156.104.IP)
[08:59:31] *** Quits: jmitchel_ (jmitchell@moz-o8p.pug.156.104.IP) (Connection closed)
[09:00:27] *** Joins: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net)
[09:00:55] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[09:02:26] *** Quits: reem (reem@moz-jr2e28.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[09:03:54] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:04:30] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[09:07:40] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[09:07:40] *** ChanServ sets mode: +o pnkfelix
[09:09:59] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[09:17:55] *** Quits: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[09:18:46] *** Joins: laumann (thomas@moz-vj4.hq0.225.130.IP)
[09:20:08] *** Joins: eddyb (eddyb@moz-tpq.fmm.166.109.IP)
[09:20:22] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[09:20:28] <eddyb> playbot: let x: Box<Copy+'static> = Box::new(&0);
[09:20:29] -playbot- <anon>:14:46: 14:47 error: borrowed value does not live long enough
[09:20:29] -playbot- <anon>:14         let x: Box<Copy+'static> = Box::new(&0);
[09:20:29] -playbot- output truncated; full output at: http://bit.ly/19MoVkb
[09:26:41] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[09:33:59] *** Quits: cdidd (cdidd@moz-06bnoi.broadband.corbina.ru) (Ping timeout: 121 seconds)
[09:34:52] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[09:35:56] *** Joins: cdidd (cdidd@moz-671va2.broadband.corbina.ru)
[09:36:34] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[09:39:20] *** Quits: marsel (user@moz-3o2.end.162.188.IP) (Connection closed)
[09:39:24] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[09:39:39] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[09:42:18] *** Quits: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net) (Connection closed)
[09:42:25] *** Joins: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net)
[09:47:27] *** Joins: arrrrrrr1 (arrrrrrrrs@moz-re6slh.dynamic.qsc.de)
[09:47:42] <pnkfelix> nmatsakis: okay, pushed updated gh23638 ; let me know what you think of the new approach.
[09:47:42] <[o__o]> Reject specialized Drop impls.: https://github.com/rust-lang/rust/pull/23638
[09:48:15] <pnkfelix> nmatsakis: oh maybe I should squash
[09:48:34] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[09:48:41] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[09:48:47] <pnkfelix> nmatsakis: (no i'll wait to squash so you can compare the relative complexity)
[09:49:36] <pnkfelix> nmatsakis: (where one would need to imagine how much other code might need to be added for the previously uncovered case. (cases?))
[09:50:41] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[09:54:38] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[09:54:46] *** Quits: eddyb (eddyb@moz-tpq.fmm.166.109.IP) (Ping timeout: 121 seconds)
[09:59:24] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[10:00:54] *** Joins: stew (Mibbit@moz-s69u6n.retail.telecomitalia.it)
[10:01:07] *** Parts: stew (Mibbit@moz-s69u6n.retail.telecomitalia.it) ()
[10:01:57] *** Quits: eibwen (eibwen@moz-u77b05.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[10:03:19] <nmatsakis> pnkfelix: the new code looks right to me
[10:03:36] <nmatsakis> pnkfelix: it doesn't seem THAT complex I guess
[10:03:42] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[10:03:50] <nmatsakis> checking for duplicates etc  feels hokey but I guess is equivalent?
[10:03:53] <nmatsakis> (pigeonhole principle?)
[10:03:57] <pnkfelix> nmatsakis: how expensive is the infer-context machinery to set up?
[10:04:38] <pnkfelix> nmatsakis: I'm figuring its probably better long-term to use this approach. It seems like it would hopefully generalize properly to other cases.
[10:05:13] <pnkfelix> nmatsakis: I was mainly unhappy that I had to add new fn's for constructing a new kind of Substs
[10:05:59] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[10:06:07] <nmatsakis> pnkfelix: it's not particularly expensive 
[10:06:31] <pnkfelix> nmatsakis: okay.  i was wondering if I should be trying to reuse (and reset) it in between calls
[10:06:38] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[10:06:47] <pnkfelix> nmatsakis: but I imagine resetting it means it wouldn't save much if anything
[10:06:52] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[10:07:23] <nmatsakis> pnkfelix: oh,it's just creating a few vectors, I don't think it's worth it
[10:07:55] <nmatsakis> pnkfelix: g2g for a bit, I'll be back in a few hours
[10:10:09] *** Quits: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[10:18:48] *** Joins: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net)
[10:21:39] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[10:22:06] *** Quits: jmitche__ (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[10:23:32] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Client exited)
[10:26:00] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[10:26:01] *** Quits: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[10:28:59] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[10:33:33] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[10:35:39] *** Quits: Mutabah (tpg@moz-hklpnj.mutabah.net) (Ping timeout: 121 seconds)
[10:40:23] *** Joins: Mutabah (tpg@moz-hklpnj.mutabah.net)
[10:44:11] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[10:44:40] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[10:47:09] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[10:49:33] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[10:49:56] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[10:50:41] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[11:03:41] *** Quits: zmack_ (zmack@moz-htpein.home.aster.pl) (Quit: Leaving...)
[11:04:04] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[11:06:57] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[11:16:25] *** Joins: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com)
[11:16:41] *** Quits: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com) (Quit: Textual IRC Client: www.textualapp.com)
[11:20:03] *** Joins: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net)
[11:20:23] *** Quits: njn (chatzilla@moz-mv909v.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0a1/20150322160652])
[11:23:06] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[11:23:11] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[11:26:35] *** Joins: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com)
[11:26:46] *** Quits: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com) (Quit: Textual IRC Client: www.textualapp.com)
[11:26:48] *** Joins: Skyler (Skyler@moz-e93b35.sd.cox.net)
[11:27:06] *** Joins: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com)
[11:27:06] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Client exited)
[11:27:24] *** Quits: canhtak (canhtak@moz-kcs.u0t.149.5.IP) (Client exited)
[11:27:43] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[11:28:07] *** Quits: pkondzior (uid768@moz-gsp5c1.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[11:28:46] *** Joins: Skyler (Skyler@moz-e93b35.sd.cox.net)
[11:31:04] *** Quits: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[11:35:13] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[11:37:24] *** Joins: canhtak (canhtak@moz-kcs.u0t.149.5.IP)
[11:41:29] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Quit: )
[11:42:02] *** Joins: marsel (user@moz-o3p.ehs.180.94.IP)
[11:42:05] *** Joins: pkondzior (uid768@moz-gsp5c1.uxbridge.irccloud.com)
[11:43:57] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[11:53:37] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[11:57:45] *** Joins: rprichard (rprichard@moz-nbiuci.en8f.d045.0009.2601.IP)
[11:58:47] <huon> steveklabnik: do you know about #rust-libs? :)
[11:59:02] <huon> steveklabnik: thoughts on https://github.com/rust-lang/rust/issues/15654#issuecomment-84834369 ?
[11:59:08] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[12:00:17] *** Quits: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com) (Quit: Textual IRC Client: www.textualapp.com)
[12:02:25] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[12:03:21] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (A TLS packet with unexpected length was received.)
[12:03:38] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[12:03:58] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[12:04:49] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:17:20] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[12:17:38] *** Joins: mib_ssvvoz (Mibbit@moz-0uj.t41.28.120.IP)
[12:18:30] *** Joins: ytain (ytain@moz-vhndj2.dsl.teksavvy.com)
[12:19:21] *** Quits: mib_ssvvoz (Mibbit@moz-0uj.t41.28.120.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:21:52] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[12:22:15] *** Joins: eddyb (eddyb@moz-dhp.t65.25.188.IP)
[12:30:47] *** Joins: Ferreus (ferreus@moz-r468ou.68ev.buuc.2028.2a02.IP)
[12:41:21] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[12:41:21] *** ChanServ sets mode: +o pnkfelix
[12:44:42] <pnkfelix> Manishearth: is this test failure nondeterministically affecting all the builds (the "assertion failed: QUEUE as uint != 1" one): http://buildbot.rust-lang.org/builders/auto-linux-64-opt/builds/4186/steps/test/logs/stdio
[12:44:49] <pnkfelix> Manishearth: ?
[12:44:53] <Mutabah> Fun internals question - Name resolution order WRT imports
[12:45:15] <Mutabah> The core::iter::order module imports 'ord' but also defines a function named 'ord'
[12:46:18] <Mutabah> How does rustc know when it's the ::ord import being reference, and when it's the 'ord' function
[12:46:30] <Mutabah> (by the fact that there's extra path nodes?)
[12:46:38] <Manishearth> pnkfelix: no idea
[12:46:48] <Manishearth> ive been a bit busy today, not kept an eye on thre queue :/
[12:48:37] <pnkfelix> Manishearth: no worries, just curious; I feel like I saw that error ... well, at least twice or maybe three times, and the most recent time it was for a PR that I did not think would have tickled that test
[12:49:05] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[12:49:28] *** Parts: calc0000 (calc0000@moz-dh85rc.mqd9.h8am.0980.2605.IP) ()
[12:50:43] <munksgaard> What is an Upvar?
[12:51:35] <pnkfelix> munksgaard: a free variable in a closure
[12:51:48] <pnkfelix> munksgaard: e.g. in `|y| x+y`, x is an Upvar
[12:52:34] <pnkfelix> munksgaard: (or more specifcally, a free variable in a closure that references a stack-local variable, I think.)
[12:52:48] <munksgaard> pnkfelix: Ah, so typeck finds all the free variables and determines how to capture them, borrow and whatnot?
[12:53:24] *** Quits: Kxepal (Miranda@moz-7r0agj.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[12:53:29] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[12:54:31] *** Joins: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com)
[12:54:37] <pnkfelix> munksgaard: yeah that's about about right.  We used to require explicit annotations for much more stuff.  Now I think only the `move` needs to be explicit, e.g. in `move |y| foo(x,y)` 
[12:55:11] *** Joins: Kxepal (Miranda@moz-u7povl.pppoe.mtu-net.ru)
[12:56:09] <munksgaard> pnkfelix: Cool, thanks.
[13:02:53] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[13:11:32] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[13:16:01] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[13:21:38] *** Quits: marsel (user@moz-o3p.ehs.180.94.IP) (Ping timeout: 121 seconds)
[13:21:43] <steveklabnik> huon: i do, but i forgot about it. i recently re-did my VPS, and i lost my irc channel list
[13:21:58] <steveklabnik> huon: let me comment inline there
[13:28:49] *** Quits: garming (garming@moz-pqd1u2.xtra.co.nz) (Ping timeout: 121 seconds)
[13:42:27] *** Joins: mystor_ (mystor@moz-5cj.r78.15.130.IP)
[13:46:10] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[13:56:55] <eddyb> nmatsakis: not sure if you've seen my thoughts about "stable ABI" yesterday in here, talking to geofft
[13:58:41] <eddyb> nmatsakis: I believe it's possible to handle most of the usecases "stable ABI" proponents are interested in with semi-stable compiler metadata and in-language APIs
[13:59:14] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:59:58] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:00:21] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[14:03:41] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:05:39] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[14:10:13] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[14:10:43] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[14:15:33] *** Quits: RossJH (textual@moz-m6lf6o.in-addr.btopenworld.com) (Quit: Textual IRC Client: www.textualapp.com)
[14:18:38] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[14:18:45] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Ping timeout: 121 seconds)
[14:20:49] *** Joins: scialex (scialex@moz-if7.du5.16.138.IP)
[14:20:55] *** Joins: def_blue (def_greef@moz-55rvi2.dclient.hispeed.ch)
[14:21:43] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[14:21:44] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:24:14] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[14:26:45] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Ping timeout: 121 seconds)
[14:27:49] *** Joins: minzh (minzh@moz-vrp.b70.39.106.IP)
[14:29:23] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[14:33:51] *** Quits: def_blue (def_greef@moz-55rvi2.dclient.hispeed.ch) (A TLS packet with unexpected length was received.)
[14:36:39] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[14:38:33] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[14:39:38] *** Quits: untitaker (untitaker@moz-afka6q.highway.telekom.at) (Ping timeout: 121 seconds)
[14:42:19] *** Joins: def_blue (def_greef@moz-55rvi2.dclient.hispeed.ch)
[14:42:23] *** Quits: def_blue (def_greef@moz-55rvi2.dclient.hispeed.ch) (Connection closed)
[14:46:11] *** Joins: untitaker (untitaker@moz-6tlunf.highway.telekom.at)
[14:46:16] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[14:47:21] *** Joins: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp)
[14:47:42] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Connection closed)
[14:51:31] <steveklabnik> r? anyone https://github.com/rust-lang/rust/pull/23617
[14:59:49] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[15:01:29] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[15:03:38] *** Quits: ytain (ytain@moz-vhndj2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[15:04:23] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[15:07:30] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[15:07:33] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[15:08:13] <Mutabah> Does anyone know how ambiguities of functions and modules/imports are handled?
[15:08:31] <Mutabah> e.g. a module (in this case, imported using 'use') and a function share the same name in the current namespace
[15:13:24] <imperio> Mutabah: If I'm not wrong, the last import override the current one
[15:13:31] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[15:13:47] <imperio> I should better say that the last definition override the previous one
[15:14:04] <imperio> but I should check again to be sure of what I'm saying
[15:14:08] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:14:20] <Mutabah> imperio: Interesting. Part of libcore (which I assume is 'correct') accesses an import (cmp) in a module that defines a function of the same name
[15:15:03] <Mutabah> (::iter::order imports ::cmp, but defines a cmp method)
[15:15:44] *** sunfish-away is now known as sunfish
[15:15:46] <imperio> is these case, generally you just import the mod and use the function like this some_mod::cmp
[15:16:02] <imperio> you should put a debug print in the function to be sure of which one is called
[15:16:29] <Mutabah> imperio: You misunderstand, I'm trying to understand _why_ this works
[15:16:31] <Mutabah> Not if it works
[15:16:40] <Mutabah> (I'm writing a C++ rust 'compiler')
[15:17:26] <imperio> Mutabah: then it just like I said
[15:17:36] <imperio> but I don't know exactly which part is the source of it
[15:18:02] <Mutabah> One tick, I'll get a gh link
[15:19:14] <Mutabah> https://github.com/rust-lang/rust/blob/master/src/libcore/iter.rs#L2919
[15:19:33] <Mutabah> I guess modules are handled slightly differently to "leaf" nodes in paths
[15:20:07] <imperio> Mutabah: sorry but I can't help you more on that. My knowledges are very limited to this field ^^'
[15:20:13] <Mutabah> :D
[15:20:19] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Ping timeout: 121 seconds)
[15:20:30] <Mutabah> No problem, it's a very low-level language detail
[15:20:40] <Mutabah> It's possible that it's not intendend behavior
[15:21:05] <Mutabah> (I should stop being lazy and just read what rustc does... but I'd prefer an answer on intent)
[15:22:00] <imperio> Mutabah: haha. I don't know who did write this part. But if I could help a little that's fine ! (and I understand you : it's a lot faster to ask before searching sometime ^^)
[15:23:25] <Mutabah> Especially if searching means understanding rustc's source, which I have noticed is kinda odd in paces
[15:23:29] <Mutabah> *places
[15:23:56] <Mutabah> Ugh, job for tomorrow, not something you start at 11:30PM
[15:24:39] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[15:25:21] <Mutabah> imperio: If you're interested in this - https://github.com/thepowersgang/mrustc/
[15:26:05] <imperio> Mutabah: I'm more interested about libs than compiler code. I'll take a look however
[15:26:21] <imperio> (I starred to keep an eye on it)
[15:33:52] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[15:39:08] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[15:46:37] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[15:49:49] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:50:05] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:57:46] *** Joins: jmitchel_ (jmitchell@moz-o8p.pug.156.104.IP)
[15:57:58] <munksgaard> Given an ExprCall, can I find the actual implementation of callee? Preferably something I can call `visit_fn` on or similar
[16:00:11] *** Quits: mystor_ (mystor@moz-5cj.r78.15.130.IP) (Connection closed)
[16:00:42] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[16:01:36] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:06:05] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[16:06:05] *** ChanServ sets mode: +o pcwalton
[16:08:18] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[16:08:36] *** Quits: canhtak (canhtak@moz-kcs.u0t.149.5.IP) (Client exited)
[16:09:37] *** Joins: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca)
[16:10:13] *** Quits: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca) (Connection closed)
[16:12:38] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[16:13:32] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:14:07] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:14:23] *** Quits: imperio (Mibbit@moz-opqtbe.abo.bbox.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:16:25] *** Joins: mib_uwfbnz (Mibbit@moz-juv.9o3.252.72.IP)
[16:17:41] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:17:42] *** ChanServ sets mode: +o brson
[16:19:37] <brson> acrichto: is the rollup looking good?
[16:19:39] <kmc> munksgaard: not in general, it could be dynamically dispatched
[16:20:20] <steveklabnik> brson: acrichto i hope so
[16:21:04] <kmc> munksgaard: but in some cases the information is available, for example the tcx has a method_map which maps NodeId to DefId
[16:23:47] *** Quits: det- (chris@moz-da97an.lv.cox.net) (Quit: Leaving)
[16:23:51] *** Joins: det (chris@moz-da97an.lv.cox.net)
[16:27:05] *** Quits: minzh (minzh@moz-vrp.b70.39.106.IP) (A TLS packet with unexpected length was received.)
[16:29:17] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[16:31:59] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[16:32:00] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:32:01] <nmatsakis> eddyb: re: stable ABI, I didn't notice your comments, but I can believe that
[16:33:45] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:35:58] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:36:49] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:38:44] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[16:39:05] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[16:41:05] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[16:41:49] <munksgaard> kmc: And if I have the defid, I can get the function declarations and body? 
[16:42:06] <kmc> probably
[16:42:20] <kmc> maybe?
[16:42:32] <kmc> maybe not if it's cross-crate
[16:43:01] <kmc> I think the method_map is the result of method resolution and there's probably a simpler mapping for ordinary functions
[16:43:09] <kmc> ordinary function calls, rather
[16:44:10] <erickt> aturon: ping
[16:44:23] <munksgaard> kmc, it looks like map might give me the item, but you're right, it looks like that's only for the current crate
[16:54:17] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[16:54:32] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[16:57:22] *** Joins: dinfuehr (dinfuehr@moz-c6jd6r.highway.telekom.at)
[17:01:13] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Ping timeout: 121 seconds)
[17:01:29] *** Quits: dinfuehr (dinfuehr@moz-c6jd6r.highway.telekom.at) (Ping timeout: 121 seconds)
[17:02:08] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[17:02:43] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[17:03:20] *** Joins: O01eg (o01eg@moz-c0o96v.vve2.4n8f.2698.2a02.IP)
[17:04:54] *** Quits: jmitchel_ (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[17:07:48] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[17:09:04] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[17:10:00] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[17:10:13] *** Quits: mib_uwfbnz (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:10:14] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Quit: Winners never quit.)
[17:12:20] <acrichto> brson: r? https://github.com/rust-lang/rust/pull/23546 (hoping to land that change this week and clean out the syntax next week)
[17:13:21] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[17:14:07] <acrichto> brson: while you're at it, could you take a look at https://github.com/rust-lang/cargo/pull/1443 as well? I don't want to land that until the change lands in rustc though
[17:14:13] *** Joins: eibwen (eibwen@moz-u77b05.dip0.t-ipconnect.de)
[17:16:27] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Quit: rcirc on GNU Emacs 24.3.92.1)
[17:17:17] <acrichto> brson: btw I also caught one of the windows slaves disappearing in the act this morning, and I saw there was a failed status check on EC2, so it could just be the machine literally falling over
[17:17:49] <acrichto> brson: also, thanks!
[17:18:06] <brson> acrichto: huh, i wonder if status checks are supposed to fail so often
[17:18:18] <brson> something about windows instances causes ec2 status checks to fail?
[17:18:35] <acrichto> yeah I wasn't sure what caused it or what it was
[17:18:47] <acrichto> but the "Instance Status check" failed when it went offline
[17:18:54] <acrichto> or at least around the time it was lost from the buildmaster
[17:20:52] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[17:21:33] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[17:23:21] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[17:24:27] *** sunfish is now known as sunfish-away
[17:24:48] <brson> i can't find any particular info about windows vms failing instance status checks
[17:25:04] <brson> the 'system log' for the failed windows instance is not helpful
[17:27:35] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Ping timeout: 121 seconds)
[17:28:29] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[17:32:42] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[17:32:45] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[17:33:18] *** Quits: laumann (thomas@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[17:35:02] <aturon> erickt: pong
[17:36:35] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[17:36:37] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[17:36:52] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[17:38:00] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[17:38:15] <erickt> aturon: I was just curious if you've written up your specialization thing from last week. I got distracted finding bstrie and didn't pay attention to what you were saying :)
[17:38:41] <aturon> erickt: nmatsakis is working on a writeup of those ideas + interaction with coherence
[17:38:49] <erickt> awesome
[17:40:17] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[17:40:23] *** Joins: tcurdt (tcurdt@moz-9bk00f.cust.swisscom.ch)
[17:40:46] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Ping timeout: 121 seconds)
[17:40:54] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[17:42:53] *** Joins: sprang (sprang@moz-bb96om.6d5c.910g.0470.2001.IP)
[17:46:50] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Quit: Winners never quit.)
[17:52:06] *** Joins: avikpal (avikpal@moz-aar.0pm.194.117.IP)
[17:52:21] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[17:52:29] *** Quits: sprang (sprang@moz-bb96om.6d5c.910g.0470.2001.IP) (Ping timeout: 121 seconds)
[17:53:39] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[17:58:59] <acrichto> brson: what's the difference between win1 and windist1?
[17:59:15] <acrichto> I updated the normal windows vms and forgot the windist ones :(
[17:59:21] <acrichto> aka no cargo nightlies for the past week!
[17:59:31] <acrichto> (just curius)
[18:00:11] <brson> acrichto: i'll have to think about it a sec
[18:01:18] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[18:01:57] <brson> acrichto: i believe the only difference is they are restricted to a single build and should be on the same ami
[18:02:13] <acrichto> oh, even easier!
[18:02:23] <acrichto> I'll just copy the same one then
[18:05:25] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[18:06:13] *** Joins: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca)
[18:06:41] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:06:41] *** ChanServ sets mode: +o pcwalton
[18:08:29] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Ping timeout: 121 seconds)
[18:11:59] *** Quits: tcurdt (tcurdt@moz-9bk00f.cust.swisscom.ch) (Quit: Computer has gone to sleep.)
[18:15:33] *** Joins: jdm (jdm@moz-uoj6rj.ckpj.s0pt.0450.2001.IP)
[18:17:49] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Connection closed)
[18:18:02] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[18:19:12] *** Joins: sprang (sprang@moz-vv7.7vl.56.172.IP)
[18:20:31] *** Quits: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca) (Quit: Time to hibernate.... ZzZz...)
[18:23:42] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[18:24:12] *** Joins: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca)
[18:27:40] *** Quits: scialex (scialex@moz-if7.du5.16.138.IP) (Ping timeout: 121 seconds)
[18:29:20] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[18:30:57] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[18:31:28] *** Joins: erickt_ (erickt@moz-4hh.6p3.217.74.IP)
[18:33:46] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:33:50] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:34:13] *** Quits: hoverbear (hoverbear@moz-82h62u.wireless.uvic.ca) (Quit: Time to hibernate.... ZzZz...)
[18:37:57] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[18:39:30] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:40:12] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[18:41:55] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[18:44:42] *** Joins: avikpal_ (avikpal@moz-09r.bnc.79.112.IP)
[18:45:26] *** Quits: sprang (sprang@moz-vv7.7vl.56.172.IP) (Ping timeout: 121 seconds)
[18:48:04] *** Quits: avikpal (avikpal@moz-aar.0pm.194.117.IP) (Ping timeout: 121 seconds)
[18:53:27] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[18:56:18] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[18:58:34] <brson> hey guys i love rust but i just want to know why didn't you implement [random silly idea]? it's so obvious
[19:01:34] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[19:03:26] <nmatsakis> acrichto: ping
[19:03:31] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Quit: Leaving.)
[19:03:38] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[19:04:04] <nmatsakis> erickt_: I've gota draft of that coherence writeup, but I plan to do significant revision, still I can send it to you if you want to see
[19:04:49] <erickt_> nmatsakis: sure! that'd be wonderful.
[19:05:18] <nmatsakis> erickt_: basically I've got a good description of the *problem* but I wanted to integrate some talk of the sol'n. if only i knew what that was ;)
[19:05:46] <nmatsakis> erickt_: I've got some ideas I've been investigating for simple interim measures we might take... but I haven't had time to experiment fully yet
[19:05:49] <erickt_> I was wondering if it was going to be possible for serde to specialize serializing &[u8]
[19:05:57] <erickt_> :)
[19:06:21] <erickt_> back in a bit though
[19:06:54] <imperio> brson: where's that come from ? O.o
[19:07:32] *** Joins: munksgaard (munksgaard@moz-33d.hq0.225.130.IP)
[19:07:59] <brson> imperio: it's my impression of q's like https://www.reddit.com/r/rust/comments/304xbz/why_specify_the_type_of_every_function_parameter/
[19:08:53] <simukis> brson: push https://github.com/nagisa/rust/tree/stack-handling-cleanup to try please?
[19:09:36] *** Joins: nrc_ (nrc@moz-4bhi2i.xtra.co.nz)
[19:11:08] *** nrc_ is now known as nrc
[19:13:38] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Ping timeout: 121 seconds)
[19:14:44] <brson> simukis: done
[19:15:20] <simukis> brson: thanks!
[19:17:21] *** Joins: mib_ujvrpk (Mibbit@moz-068.gtj.229.46.IP)
[19:20:27] *** Quits: mib_ujvrpk (Mibbit@moz-068.gtj.229.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:23:34] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[19:24:52] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[19:25:48] *** Joins: luzie (lu.cy@moz-ri8.k60.238.104.IP)
[19:28:03] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:29:21] <simukis> brson: btw, I think bitrig snapshots got into infinite snapshot fail loop
[19:30:03] <simukis> because some previous snapshot failed to upload properly and now a snapshot will always reliably fail with failure to download a snapshot
[19:30:28] *** Joins: avikpal (avikpal@moz-aar.0pm.194.117.IP)
[19:30:31] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[19:31:15] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[19:31:31] *** Quits: luzie (lu.cy@moz-ri8.k60.238.104.IP) (Quit: WeeChat 1.1.1)
[19:31:36] *** Joins: luzie (lu.cy@moz-ri8.k60.238.104.IP)
[19:31:45] *** Quits: luzie (lu.cy@moz-ri8.k60.238.104.IP) (Quit: WeeChat 1.1.1)
[19:32:42] *** Quits: avikpal_ (avikpal@moz-09r.bnc.79.112.IP) (Ping timeout: 121 seconds)
[19:37:02] *** Joins: marsel (user@moz-o3p.ehs.180.94.IP)
[19:37:56] <Gankro> nrc: Are deref coercions suppose to work in generic contexts?
[19:38:37] <cmr> Gankro: is http://static.rust-lang.org/doc/master/src/collections/binary_heap.rs.html#504 true? I count 3 moves per iteration of the loop, one from self.data[parent] into x, one of zeroed into self.data[parent], and one from x into self.data[pos]... which is the same as mem::swap.
[19:40:31] <Gankro> nrc: e.g. foo<T: Trait>(x: &T); foo(&Box::new(impls_trait));
[19:40:57] <Gankro> cmr: looking...
[19:41:24] <nrc> Gankro: where Trait == Deref?
[19:41:32] <nrc> oh, no
[19:41:37] <nrc> I see the &Box...
[19:42:07] <nrc> Gankro: yes, I think they should
[19:42:18] <nrc> eddyb ^ ?
[19:42:25] <Gankro> nrc: possible bug then? http://users.rust-lang.org/t/pre-rfc-auto-dereferencing-parameters-passed-to-generic-functions-as-well-as-concrete-ones/702/
[19:42:56] <eddyb> nrc: what exactly are we tallking about?
[19:43:06] <eddyb> oh
[19:43:10] <Gankro> nrc: example code: http://is.gd/RXxMxO
[19:43:36] <eddyb> Gankro: those are bound-targeting coercions
[19:43:42] <simukis> brson: is pushing a try build for one specific machine only a thing?
[19:43:43] <nrc> Gankro: wait, in that case I think we can infer T == &Box<..> so we'll try that rather than a deref coercion
[19:43:49] <eddyb> blaenk came up with the idea and I'm nagging nmatsakis ever since
[19:44:13] <eddyb> I'm not sure if it's even possible, but it's a nice idea in theory
[19:44:41] <nmatsakis> I'm more-or-less in favor but I want to set them up carefully in terms of what bounds they are targeting
[19:46:20] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[19:46:42] <Gankro> nrc: Wait, how can T == &Box<impls>?
[19:47:04] <Gankro> Box<impl> does not impl?
[19:47:24] <nrc> Gankro: no, I was wrong about that, I didn't grok the whole example
[19:47:35] * nrc goes back to drinking his coffee
[19:50:29] <Gankro> cmr: possibly LLVM can optimize away the writing-of-zeros in most cases?
[19:50:48] <Gankro> cmr: have you looked at the IR?
[19:50:50] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:51:04] <cmr> Gankro: hm, that's a good observation. I'll look...
[19:54:30] <Gankro> The idea is that you're basically doing a circular swap a => b => c => d => a, and want to avoid having to swap a through everything. But exception safety means you can't just have "logically uninitalized" memory drifting through the array while you do this, you lean on the drop flag.
[19:55:16] <Gankro> A different solution would be two passes: walk up the array to find the final swap location (which can panic), then do all the swaps afterwards (which can't panic)
[19:55:38] <cmr> Ord being the panic-worry, right?
[19:55:43] <Gankro> yep
[19:55:48] *** Quits: kushal (kdas@moz-s3u5m7.202.sitibroadband.in) (Ping timeout: 121 seconds)
[19:56:10] <Gankro> I just thought of that new strategy... would be interesting if someone tried it out (wink-wink-nudge-nudge)
[19:57:18] <Gankro> even-more-alternatively you could just set up a panic-guard that inserts the value in the uninit spot on drop
[19:57:49] *** Joins: kushal (kdas@moz-600.5af.142.202.IP)
[19:57:56] <Gankro> Which actually works out kinda perfectly since that's exactly the code that runs after the loop anyway
[19:58:01] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[19:59:35] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[20:00:16] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[20:01:08] <erickt_> nmatsakis: back
[20:03:09] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[20:07:43] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Quit: Winners never quit.)
[20:07:48] <eddyb> nrc: did you get anything merged that removes the support for casting to trait objects?
[20:07:49] <Gankro> Hmm, it would be really nice to have finally blocks/closures for this kind of pattern
[20:08:09] <eddyb> nrc: I'm asking because I want to nuke vtable.rs as coercions no longer need it
[20:08:21] <nrc> eddyb: https://github.com/rust-lang/rust/pull/2363
[20:08:24] <nrc> not landed yet
[20:08:30] <eddyb> 2363?
[20:08:31] <nrc> I haven't checked on why not yet
[20:08:36] <eddyb> I guess I'll duplicate it for now so I can still compile
[20:08:43] <nrc> 23630
[20:08:51] <eddyb> nrc: thanks :D
[20:09:17] <eddyb> nrc: it's... in the queue?
[20:09:26] <nrc> ah, good
[20:09:30] <nrc> then we wait...
[20:09:35] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[20:09:35] *** ChanServ sets mode: +o brson
[20:10:20] <nrc> oh not really
[20:10:53] *** Joins: tcurdt (tcurdt@moz-9bk00f.cust.swisscom.ch)
[20:11:24] *** Quits: tcurdt (tcurdt@moz-9bk00f.cust.swisscom.ch) (Quit: Computer has gone to sleep.)
[20:12:15] <nrc> ah stupid Homu
[20:13:07] <Gankro> cmr: This would basically be optimal: http://is.gd/ZDKKHB
[20:14:34] <Gankro> Is there any safety issue with allowing `finally` blocks like this?
[20:15:03] *** Joins: Tobba|Laptop (Tobba@moz-o13d22.bredband.telia.com)
[20:15:39] <Gankro> There's a few places I've found where you can write really clean, clear, and efficient unsafe code as long as there's some code you can unconditionally run at the end, even if it panics.
[20:17:22] <sfackler> Gankro: you can do that kind of thing with an object + Drop impl
[20:17:29] *** Joins: hoverbear (hoverbear@moz-a97.b2m.54.96.IP)
[20:17:36] <sfackler> like the old std::finally module
[20:17:37] <cmr> sfackler: not as nicely when you need to capture a mutable variable.
[20:17:44] <Gankro> sfackler: I need to refer to a lot of locals, though
[20:17:50] <Gankro> The capturing is nasty
[20:18:14] <Gankro> I basically end up making a lot of *const's to "weakly capture" them
[20:18:49] <Gankro> Even though all I'm logically doing is adding a block at the end of the function
[20:19:06] *** Quits: Tobba|Laptop (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[20:22:03] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:23:33] *** Quits: avikpal (avikpal@moz-aar.0pm.194.117.IP) (Ping timeout: 121 seconds)
[20:23:57] *** Quits: kushal (kdas@moz-600.5af.142.202.IP) (Quit: Leaving)
[20:24:24] <eddyb> hmm
[20:24:50] <sfackler> it seems to me like you wouldn't want to do the ptr::read and ptr::writes at all - seems like a lot of extra copying if the type is large when you only really need a reference, right?
[20:25:53] <cmr> sfackler: in sift_up? you need to, the data gets overwritten with the element that rightfully belongs there.
[20:27:27] <steveklabnik> is there anything that actually implements BorrowMut?
[20:28:27] <steveklabnik> oh i'm dumb
[20:28:28] <steveklabnik> impl<T: ?Sized> BorrowMut<T> for T {
[20:29:56] *** Joins: Skyler (Skyler@moz-e93b35.sd.cox.net)
[20:32:40] <Gankro> sfackler: it's logically a circular shift
[20:32:53] <Gankro> but with non-contiguous indices
[20:33:25] <Gankro> sfackler: cmr: I've logged an rfc issue against this: https://github.com/rust-lang/rfcs/issues/1010
[20:33:33] <Gankro> feel free to stomp me into the ground
[20:34:41] <sfackler> ha, I wouldn't go that far :P
[20:35:16] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[20:35:25] <sfackler> i think it is possible to do with out any *const weak reference business by adding "payload" arguments to the main part and the finally part but it's cumbersome enough that it might be worth having dedicated syntax for
[20:36:13] <Gankro> cmr: Are you trying to kill the last bits of drop flag, or just learning about collections stuff?
[20:37:04] <cmr> Gankro: I was comparing my implementation of a binary heap to the one in libcollections.
[20:37:33] <Gankro> sfackler: Actually it's not clear that this example can work *at all* because the `drop` impl needs to effectively be a moving closure
[20:37:48] <sfackler> Option dance!
[20:38:00] <Gankro> sfackler: Ah, of course
[20:38:09] <sfackler> (ah the dream of consuming Drop)
[20:38:09] <Gankro> More indirection! yay!
[20:38:25] <Gankro> Would need huon's ManuallyDrop otherwise
[20:38:31] <sfackler> the most powerful tool in computer science
[20:39:49] <Gankro> What's the plan for this code when we lose the drop flag anyway? Anyone other than pnkfelix know?
[20:40:32] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[20:42:10] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[20:45:00] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[20:45:01] *** Quits: semarie (semarie@moz-75bn3d.nullbyte.me) (A TLS packet with unexpected length was received.)
[20:45:15] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:45:39] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[20:47:24] <Gankro> cmr: did you ever check if LLVM is killing the zeroing?
[20:48:55] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:50:34] <cmr> Gankro: I did, and it is not.
[20:50:50] <Gankro> huh
[20:51:03] <Gankro> Might be one of those really old optimizations that used to make sense...
[20:51:18] <Gankro> (it's before my time)
[20:52:02] <cmr> it's also not eliminating any of the bounds checks.
[20:52:10] <cmr> :\
[20:54:47] <cmr> the slow path of Vec::push is also inlined *everywhere*.
[20:57:03] <cmr> (gh23670)
[20:57:04] <[o__o]> libcollections: move Vec::push slow path out: https://github.com/rust-lang/rust/pull/23670
[20:58:41] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:59:48] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[20:59:49] *** ChanServ sets mode: +o pnkfelix
[20:59:55] <erickt_> cmr: nice. I swear I've tried that change before, but it was so unpredicable whether or not llvm would optimize it properly or not :(
[21:00:15] <cmr> erickt_: what do you mean by "properly"?
[21:00:48] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:01:16] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:01:29] <erickt_> if I recall correctly, I couldn't get llvm to stop inlining the cold path, which seemed to then stop other things from being inlined correctly because the function size got too big
[21:02:13] <cmr> ah
[21:02:19] <erickt_> and by properly or correctly, I mean that when everything was working just right llvm was able to optimize away the overhead of using iterators in serde
[21:02:33] <erickt_> and compile down into memcpys
[21:02:45] <cmr> well, in my test it doesn't inline the call to resize.
[21:03:22] <erickt_> but it was very sensitive, and it was easy to do something small and hurt the performance
[21:04:00] <cmr> yeah.
[21:04:01] *** Joins: phaylon (phaylon@moz-t987n8.scsys.co.uk)
[21:05:07] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:05:07] *** ChanServ sets mode: +o pcwalton
[21:10:35] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:11:05] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:11:58] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:13:53] *** Joins: jdm_ (jdm@moz-i5m.05u.207.66.IP)
[21:13:54] *** Quits: jdm_ (jdm@moz-i5m.05u.207.66.IP) (Connection closed)
[21:16:29] *** Quits: jdm (jdm@moz-uoj6rj.ckpj.s0pt.0450.2001.IP) (Ping timeout: 121 seconds)
[21:16:45] <steveklabnik> ROLLUP LANDED :confetti_ball:
[21:16:49] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:17:24] <erickt_> woo
[21:19:11] <aturon> steveklabnik: \o/
[21:19:41] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:19:45] *** Quits: munksgaard (munksgaard@moz-33d.hq0.225.130.IP) (Ping timeout: 121 seconds)
[21:20:02] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:21:12] <steveklabnik> i'm tempoted to start another since there's already six, but i decided before my threshhold is 10
[21:21:54] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:22:31] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:25:49] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:26:17] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[21:26:37] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:28:04] *** Joins: tcurdt (tcurdt@moz-9bk00f.cust.swisscom.ch)
[21:28:08] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:28:17] *** Joins: reem (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP)
[21:28:33] *** Quits: tcurdt (tcurdt@moz-9bk00f.cust.swisscom.ch) (Quit: Textual IRC Client: www.textualapp.com)
[21:28:36] *** Joins: violaceae (violaceae@moz-9n4s22.u4is.n1v0.0007.2601.IP)
[21:33:35] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:34:07] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:34:22] *** Joins: jdm (jdm@moz-mu9.06r.98.75.IP)
[21:34:38] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:34:41] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[21:35:00] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:36:55] *** Quits: hoverbear (hoverbear@moz-a97.b2m.54.96.IP) (Quit: Time to hibernate.... ZzZz...)
[21:39:13] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[21:42:29] *** Joins: hoverbear (hoverbear@moz-a97.b2m.54.96.IP)
[21:43:36] <gleb> is it idiomatic to use String instead of Error in Result? pkg-config does it and unwrapping such result isn't very ergonomic due to the way Debug is implemented for String
[21:44:00] <reem> usually no
[21:44:27] <gleb> should there be a way to easily wrap String and put into an Error maybe?
[21:45:58] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[21:48:42] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:49:54] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[21:50:03] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:55:39] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[21:56:00] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[21:56:49] *** Joins: njn (chatzilla@moz-mv909v.iinet.net.au)
[21:58:19] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[21:58:25] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:58:25] *** ChanServ sets mode: +o pcwalton
[21:58:36] *** Joins: munksgaard (munksgaard@moz-33d.hq0.225.130.IP)
[22:00:02] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Ping timeout: 121 seconds)
[22:01:00] <gleb> alternatively what if Result::unwrap() used Display instead of Debug?
[22:01:36] *** Joins: bkearns (Adium@moz-rudtng.static.wiline.com)
[22:01:47] <reem> gleb: That turns out very inconvenient, we tried it before.
[22:02:05] <gleb> okay :)
[22:02:26] <imperio> reem: I didn't follow this conversion. What was the issue on that please ?
[22:02:45] *** Quits: munksgaard (munksgaard@moz-33d.hq0.225.130.IP) (Ping timeout: 121 seconds)
[22:03:20] <gleb> imperio:  Result<Smth, String> isn't very unwrap-friendly because Debug on String isn't  readable
[22:03:54] <imperio> gleb: I was talking about the Debug instead of Display actually ^^
[22:03:57] <bluss> don't you think we should change Debug on String so that it displays all printable text
[22:04:12] <reem> imperio: unwrap requiring the error type to be Display vs. Debug
[22:04:13] <bluss> playbot: "αβ"
[22:04:15] -playbot- "\u{3b1}\u{3b2}"
[22:04:22] <bluss> that should be "αβ" ^
[22:05:04] <imperio> reem: yes ! That's it ! Why did it change to that ?
[22:05:48] *** Quits: violaceae (violaceae@moz-9n4s22.u4is.n1v0.0007.2601.IP) (Quit: Leaving)
[22:06:22] <gleb> imperio: sorry, misread your question
[22:06:25] <reem> imperio: It used to be Display but that turns out to be really inconvenient so we changed it to Debug since unwrap shouldn't be shown to the user.
[22:07:17] <imperio> gleb: no problem and thanks anyways ;)
[22:07:37] <imperio> reem: why not ? In a lot of cases, it has to
[22:08:27] <reem> imperio: The idea with Display is it's a nice format. unwrap is a development tool, it shouldn't be used on things that could actually be None in production.
[22:08:36] <reem> s/production/user release
[22:09:15] <barosl> Also, implementing Display manually was painful, in contrast, Debug can be (hopefully) implemented automatically using #[derive]
[22:09:43] <bluss> the policy is now that everything implemnts Debug
[22:09:52] <imperio> reem: Hum... It's very complicated to understand from the dev compiler point of view. I'm not sure to understand why we're not supposed to have a None value.
[22:10:02] <gleb> so what would the idiomatic way to die with a message be? like e.g. pkg-config does
[22:10:31] <imperio> For example, if you create a text editor and you can't open a file, it'd be nice to say to the user that's because it doesn't have the right to open it or because the file doesn't exist, no ?
[22:10:35] <reem> imperio: I usually use unwrap only if I have some other static guarantee that it's a Some
[22:10:44] <gleb> sorry, not like it does, but like every build.rs that uses it might
[22:10:54] <imperio> barosl: Yes5, but I don't think that it's a major problem ^^
[22:10:58] <reem> imperio: Sure, but you should have an infrastructure for logging user-friendly errors that isn't dump an unwrap message to stderr
[22:11:15] <reem> obviously it depends on the tool
[22:11:24] <reem> a word processor is going to have friendlier errors than vim
[22:12:02] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:12:04] <imperio> reem: I think I got what you meant. Thanks a lot for the explanations ! :D
[22:12:23] <gleb> reem: yeah, thanks, this might need to be put in the book 
[22:12:43] <imperio> gleb: totally agree
[22:13:11] *** Joins: jdm_ (jdm@moz-mu9.06r.98.75.IP)
[22:13:14] <reem> It's the same way you'd never want to alert random Errors to a user in a web app
[22:13:21] *** Quits: jdm (jdm@moz-mu9.06r.98.75.IP) (Connection closed)
[22:13:26] <reem> dev facing errors and user facing errors are different
[22:14:29] <brson> I gave moz opsec an account on aws. sometime in the next quarter they should start doing security evaluations of some sort for us.
[22:14:36] <imperio> reem: yes but I almost only have the dev point of view. It's very hard to see the differences until you face them
[22:15:44] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Ping timeout: 121 seconds)
[22:21:59] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[22:24:36] *** Joins: jxv (jxv___@moz-qneod7.pk6i.d98i.030a.2602.IP)
[22:25:22] *** Quits: burntsushi (burntsushi@moz-t92kn9.ma.charter.com) (Ping timeout: 121 seconds)
[22:25:34] *** Joins: burntsushi (burntsushi@moz-t92kn9.ma.charter.com)
[22:28:04] *** Joins: mystor_ (mystor@moz-va2.r78.15.130.IP)
[22:28:29] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[22:28:49] <aturon> huon: ping on a couple things: https://github.com/rust-lang/rust/issues/15628 and `#[derive(FromPrimitive)]`
[22:28:54] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[22:32:57] <huon> aturon: pong
[22:32:58] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Quit: Leaving)
[22:33:07] <huon> aturon: hm, I'm not sure what do with #15628
[22:33:19] <huon> at least it's unstable now
[22:33:23] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[22:33:23] *** Quits: eibwen (eibwen@moz-u77b05.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:33:40] <aturon> huon: ah, i had forgotten it was destabilized
[22:33:44] <aturon> i pinged because it was on the milestone,
[22:33:51] <aturon> but i think it can be re-milestoned given that it's unstable
[22:34:03] <aturon> (moving to 1.0, I-needsdecision
[22:34:16] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[22:34:24] <huon> aturon: and FromPrimitive is wanting FromPrimitive(u8) etc. implemented?
[22:34:51] <aturon> From(u8) now, but yes
[22:34:59] <aturon> maybe we should make a tracking issue
[22:35:14] <aturon> i suppose there's no chance of that happening for beta
[22:35:20] <huon> oh
[22:35:24] <huon> I tihnk it should be possible
[22:35:31] <simukis> is master failing to compile for me only?
[22:35:35] <huon> I'll try to get a PR up today (i.e. next 12 hours or so)
[22:35:36] <aturon> huon: (From landed in https://github.com/rust-lang/rust/pull/23538)
[22:35:50] <aturon> huon: ah, ok! it would be great to be able to have a stable FromPrimitive replacement
[22:35:51] <simukis> (@librustdoc because of references where plain vars are expected)
[22:36:40] <huon> I think Cow is possibly the best named type in Rust
[22:38:10] *** Quits: jdm_ (jdm@moz-mu9.06r.98.75.IP) (Connection closed)
[22:38:17] * erickt_ hugs Cow
[22:38:21] *** erickt_ is now known as erickt
[22:38:34] *** Joins: jdm (jdm@moz-mu9.06r.98.75.IP)
[22:38:42] <bluss> huon.into_cow()
[22:38:55] <huon> moo
[22:39:03] <bluss> :)
[22:40:49] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:41:10] <gleb> is AsRef<[T]> going to be implemented for &[T; N]?
[22:41:30] <reem> probably for some concrete N yes, but not generally
[22:42:17] <gleb> but it's not for some small Ns as merged today?
[22:42:24] <eddyb> bound. targeting. coercions
[22:42:42] <eddyb> also, what's AsRef?
[22:43:03] <gleb> eddyb: generic conversion traits
[22:43:36] <eddyb> well, you could abuse Unsize...
[22:44:16] <eddyb> impl<T, A: Unsize<[T]>> AsRef<[T]> for A
[22:44:18] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[22:44:31] <huon> blanket impls are killer
[22:44:39] <huon> for coherence, apparently.
[22:44:46] <eddyb> hmm
[22:45:02] <eddyb> huon: technically, only [T; N] can ever implement Unsize<[T]>, but you're right
[22:45:10] <simukis> https://github.com/rust-lang/rust/pull/23674 feel free to r+
[22:45:17] <eddyb> not sure how much sense the super-generic conversion trait stuff makes sense
[22:45:25] <eddyb> a lot of it seems impossible to implement
[22:46:01] <WindowsBunny> I have a question, RFC 940 says "If the Cargo.toml does not specify an explicit crate name, then Cargo will use the package name but with all - replaced by _."
[22:46:10] <WindowsBunny> How do I specify the crate name in Cargo.toml?
[22:46:41] <aturon> eddyb: yeah, it's not as far-reaching was one might hope, but in the end was a clear improvement over accumulating ad hoc traits like AsPath, IntoBytes, etc
[22:46:47] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:47:33] <eddyb> aturon: that seems... reasonable, I guess
[22:48:13] <aturon> (in the future, specialization may let us go farther with overlapping impls, etc. time will tell :)
[22:48:51] <aturon> brson: congrats on landing the feature gating PR! (grumble grumble rebase grumble :)
[22:49:10] <eddyb> nmatsakis: how does coherence behave for built-in traits? I guess only Sized for now
[22:49:53] <huon> WindowsBunny: I believe any combination of -'s or _'s should work
[22:50:09] <eddyb> nmatsakis: I'm wondering if it might be worth encoding the fact that A: Unsize<[T]> requires A to be an array
[22:50:20] <WindowsBunny> huon: That's... not what I asked?
[22:50:21] <cmr> huon: I believe WindowsBunny is asking about the mechanics of defining the crate name, not how it is translated.
[22:50:29] <huon> WindowsBunny: I believe foo-bar-baz, foo-bar_baz, foo_bar-baz, foo_bar_baz will all define the same crate
[22:50:38] <carllerche> the write! macro should probably call Write::write_fmt via UFCS no? so that using the Write macro isnt needed?
[22:50:45] * WindowsBunny grabs a trout and slaps huon with it
[22:50:49] <huon> WindowsBunny: oh, I see
[22:50:53] <huon> WindowsBunny: whoops :P
[22:51:04] <huon> WindowsBunny: [lib] name = "..."
[22:51:13] <gleb> aturon: do you think libcore/array.rs should have impls for AsRef too?
[22:51:29] *** Quits: hoverbear (hoverbear@moz-a97.b2m.54.96.IP) (Connection closed)
[22:51:38] <aturon> carllerche: it can't, sadly, for obscure reasons related to http://static.rust-lang.org/doc/master/std/fmt/trait.Write.html (cc acrichto)
[22:52:03] <aturon> gleb: probably so, yes. i didn't attempt to be exhaustive in the PR; the main focus was replacing existing ad hoc traits like AsPath etc
[22:52:12] <carllerche> aturon: not following, but I got stuck for a while on weird error messages :(
[22:52:17] <carllerche> it was pretty confusing
[22:52:38] <aturon> acrichto: ^ re: not using UFCS in write!
[22:53:09] <WindowsBunny> huon: Ah okay, thanks
[22:53:12] <gleb> aturon: would you consider a PR that would add the impls of AsRef<[T]> and AsMut<[T]>?
[22:53:41] <aturon> gleb: sure!
[22:53:51] <gleb> okay
[22:55:43] *** Joins: hoverbear (hoverbear@moz-a97.b2m.54.96.IP)
[22:56:13] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[22:57:44] <acrichto> aturon: I do think, however, that write! should probably import io::Write
[22:57:48] <acrichto> even if it doesn't call via ufcs
[22:58:14] <carllerche> why can't it call it via ufcs?
[22:58:44] <acrichto> carllerche: the write! macro may call Formatter::write_fmt, fmt::Write::write_fmt, or io::Write::write_fmt
[22:58:49] <acrichto> we want the macro usable in all of those contexts
[22:58:57] <acrichto> so there's no true disambiguation
[23:01:07] *** Joins: hoverbea_ (hoverbear@moz-ctf.3ep.54.96.IP)
[23:01:23] <brson> aturon: thanks. i'm very curious to see how things build against the beta channel now. should be able to test everything with 'real' feature gating tomorrow
[23:01:34] <brson> there's a beta build running now
[23:01:39] <aturon> brson: \o/
[23:01:46] *** Joins: mjboa (mike@moz-n5270k.dip0.t-ipconnect.de)
[23:02:06] <aturon> brson: what's the status of the CI infrastructure -- how long until we can start testing various tweaks against the ecosystem?
[23:02:27] <aturon> (a possibility i'm drooling over on a near-daily basis at this point)
[23:02:50] <eddyb> aturon: oh, yeah, that reminds me I have a PR to fix nits on, that's kinda related
[23:03:01] <brson> aturon: it's so close. it works with published builds fine, but i've been running against bugs testing custom rust builds. any day now
[23:03:22] <eddyb> I wanted to use an env var to pass something to rustc even through cargo, but I can just use a shell script to proxy rustc
[23:03:40] <eddyb> (i.e. a rustc shell script in PATH that forwards to the real binary and adds some flags)
[23:04:15] <brson> aturon: fyi here's an example of the basic regression report https://gist.github.com/brson/919ce8e24831d1c51285
[23:04:24] <brson> that can be run against *all* crates
[23:04:28] *** Quits: hoverbear (hoverbear@moz-a97.b2m.54.96.IP) (Ping timeout: 121 seconds)
[23:04:42] <gleb> aturon: AsRef impls are marked as stable elsewhere, should the array ones be too?
[23:05:30] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[23:05:35] *** Quits: hoverbea_ (hoverbear@moz-ctf.3ep.54.96.IP) (Quit: Time to hibernate.... ZzZz...)
[23:06:12] <aturon> brson: holy crap
[23:06:20] <aturon> you thought of everything :)
[23:06:42] <aturon> gleb: hm, i'm a little less sure there, just because of the hackiness around implementing for N <= 32 etc
[23:06:49] <aturon> eddyb: not sure i'm following
[23:08:18] <gleb> aturon: unstable(feature="core") then?
[23:08:27] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:08:56] <aturon> gleb: how about `array_as_ref`
[23:09:09] <aturon> (we're starting to introduce finer-grained features now that the bulk of std is stable
[23:09:30] <gleb> aturon: ah, so this should have its own feature? alright
[23:10:12] <aturon> gleb: yeah, it makes it easier to track what people are using/need stabilized. you can just write any name in the feature attribute, the compiler will aggregate
[23:11:27] <gleb> aturon: care to suggest what goes into reason=""? ;)
[23:12:04] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:12:38] *** Quits: jdm (jdm@moz-mu9.06r.98.75.IP) (Quit: )
[23:12:52] *** Joins: canhtak (canhtak@moz-mi6.8r7.252.94.IP)
[23:18:48] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:20:41] <eddyb> aturon: my "type inference diff" thing, i.e. https://github.com/rust-lang/rust/pull/23017
[23:22:03] <eddyb> aturon: the last comment, on the last commit, adding the env var - I can throw away all that stuff and sneak extra rustc flags past cargo a different way
[23:23:02] *** Joins: Rym_ (y@moz-vsu.f6d.55.31.IP)
[23:23:12] <eddyb> aturon: the general usefulness of the tooling is yet unknown, as I don't have a reliable way of probing the ecosystem (which you seem to be talking about)
[23:23:51] <eddyb> (well, it did help in-tree, but the rust repo itself is kind of special with its thousands of tests)
[23:23:54] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[23:27:34] *** Quits: Rym_ (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[23:31:25] *** Quits: canhtak (canhtak@moz-mi6.8r7.252.94.IP) (Client exited)
[23:34:47] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[23:36:13] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[23:36:13] *** ChanServ sets mode: +o pcwalton
[23:43:22] *** Quits: jyyou (jyyou@moz-hskqde.members.linode.com) (Ping timeout: 121 seconds)
[23:44:42] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[23:45:48] *** Quits: reem (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP) (Connection closed)
[23:47:43] *** Joins: reem (reem@moz-4jmrjg.coob.q2h1.0009.2601.IP)
[23:52:43] *** Joins: darnuria (darnuria@moz-cagds5.kokakiwi.net)
[23:54:49] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[23:55:39] *** Joins: arrrrrrrrr (arrrrrrrrs@moz-4oqi82.dynamic.qsc.de)
[23:56:25] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[23:58:00] *** Joins: brson (brson@moz-7ji.c9m.56.172.IP)
[23:58:00] *** ChanServ sets mode: +o brson
[23:58:29] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-re6slh.dynamic.qsc.de) (Ping timeout: 121 seconds)
